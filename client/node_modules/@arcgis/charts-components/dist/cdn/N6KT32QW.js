/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import{d as t}from"./TLMHEFBH.js";import{c as f,g as C}from"./UM26TKF2.js";import a from"./GUWCFIQ4.js";import{j as r}from"./MHMLEVRX.js";import"./DXCHSVBP.js";import"./2YIVYDK5.js";import{F as d,g as n,h as s,l as h,y as c}from"./GRWAOK3Y.js";import"./UUMP6K6L.js";export default $arcgis.t(([,,,,,,,{ic:g,kc:m,nc:p}])=>{var u=n`:host{margin-bottom:var(--arcgis-charts-intra-section-margin);margin-top:var(--arcgis-charts-intra-section-margin);height:100%}`,l=class extends c{constructor(){super(...arguments),this.onModelConfigChange=async e=>{let a=e?.detail.config??this.model.config;this.layer===void 0&&await this.updateFetchLayerFieldsInfo(a)},this.activeColorMatch=!1,this.popoverPlacement="leading",this.arcgisChartsConfigNoSeriesUpdate=h()}static{this.properties={layerFieldsInfo:16,activeColorMatch:16,model:0,timeZone:3,popoverPlacement:3,seriesColor:2,calculatedMinMaxBounds:2,page:3,layer:0,usePopupTemplateFieldsInfo:5}}static{this.styles=u}async load(){this.layer!==void 0&&await this.layerChange(this.layer,void 0),this.seriesColor!==void 0&&this.seriesColorChange(this.seriesColor),this.usePopupTemplateFieldsInfo!==void 0&&await this.usePopupTemplateFieldsInfoChange(this.usePopupTemplateFieldsInfo,void 0),this.modelChange(this.model),this.onModelConfigChange(),this.updateDataFilters()}async willUpdate(e){e.has("model")&&this.modelChange(this.model,e.get("model")),e.has("layer")&&await this.layerChange(this.layer,e.get("layer")),e.has("usePopupTemplateFieldsInfo")&&this.usePopupTemplateFieldsInfo!==void 0&&await this.usePopupTemplateFieldsInfoChange(this.usePopupTemplateFieldsInfo,e.get("usePopupTemplateFieldsInfo")),e.has("seriesColor")&&this.seriesColor!==void 0&&this.seriesColorChange(this.seriesColor),this.layerFieldsInfo===void 0&&await this.updateFetchLayerFieldsInfo()}disconnectedCallback(){super.disconnectedCallback(),this.model.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}modelChange(e,a){a?.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange),e?.addEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}async layerChange(e,a){e!==void 0&&!r(a,e)&&await this.updateFetchLayerFieldsInfo()}async usePopupTemplateFieldsInfoChange(e,a){e!==void 0&&e!==a&&await this.updateFetchLayerFieldsInfo()}seriesColorChange(e){this.activeColorMatch=e?.get(0)===void 0,this.model.colorMatch&&e?.forEach((a,i)=>{f(a)&&e?.get(0)!==void 0&&a?.color!==void 0&&!r(this.model.getSeriesColor(i),a?.color)&&this.model.setSeriesColor(a?.color,i)})}async updateDataFilters(){let e=this.model.getDataFilters(),a=e?.where,i=this.layer?.definitionExpression??void 0;r(a,i)||await this.model.setDataFilters({...e,where:i})}async updateFetchLayerFieldsInfo(e){let a=e??this.model.config,i=this.layer;if(!i){let o=C(a)?a.iLayer:void 0;o&&(i=await g(o))}i&&(this.layerFieldsInfo=await m(i,this.usePopupTemplateFieldsInfo))}render(){let e=this.layerFieldsInfo?.find(o=>o.name===this.model.xAxisField),a=e!==void 0&&p(e),i;switch(this.page){case t.Data:i=s`<arcgis-charts-config-bar-chart-data .model=${this.model} .layerFieldsInfo=${this.layerFieldsInfo}></arcgis-charts-config-bar-chart-data>`;break;case t.Series:i=s`<arcgis-charts-config-bar-chart-series .model=${this.model} .activeColorMatch=${this.activeColorMatch} .popoverPlacement=${this.popoverPlacement}></arcgis-charts-config-bar-chart-series>`;break;case t.Axes:i=s`<arcgis-charts-config-axes .model=${this.model} show-max-y-bound-option .calculatedMinMaxBounds=${this.calculatedMinMaxBounds}></arcgis-charts-config-axes>`;break;case t.Guides:i=s`<arcgis-charts-config-guides .model=${this.model} .timeZone=${this.timeZone} .enableXAxisGuide=${a} enable-y-axis-guide .calculatedMinMaxBounds=${this.calculatedMinMaxBounds}></arcgis-charts-config-guides>`;break;case t.Format:i=s`<arcgis-charts-config-format .model=${this.model}></arcgis-charts-config-format>`;break;case t.General:i=s`<arcgis-charts-config-general .model=${this.model}></arcgis-charts-config-general>`;break;default:i="";break}return i}};d("arcgis-charts-config-bar-chart",l);return l},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",a)