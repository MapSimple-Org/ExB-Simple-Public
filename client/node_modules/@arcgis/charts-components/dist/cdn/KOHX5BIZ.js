/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import{a as y}from"./MWPCQM2X.js";import{a as P}from"./XIZLMN6F.js";import{a as p}from"./JHAJCFXL.js";import g from"./MSRS6EXP.js";import"./TLMHEFBH.js";import{a as b}from"./BMZ5OG4J.js";import f from"./TNMDYW24.js";import e from"./GUWCFIQ4.js";import"./MHMLEVRX.js";import"./DXCHSVBP.js";import"./5BG7WW2E.js";import{g as d}from"./2YIVYDK5.js";import{A as a,B as c,D as h,F as L,g as u,h as n,l as $,y as x}from"./GRWAOK3Y.js";import"./UUMP6K6L.js";export default $arcgis.t(([,,,,,,,{Ha:g},,{r:I}])=>{var l={topSection:"top-section",sectionLabel:"section-label",list:"list",infoIcon:"info-icon"},N=u`:host{display:flex;flex-direction:column;width:var(--arcgis-charts-config-calcite-block-default-width);margin:var(--arcgis-charts-config-calcite-block-default-margin)}.top-section{margin-top:var(--arcgis-charts-config-margin-minor)}.section-label{display:flex;margin-bottom:var(--arcgis-charts-config-margin-major);margin-left:var(--arcgis-charts-config-margin-minor);margin-right:var(--arcgis-charts-config-margin-minor);justify-content:space-between;align-items:center;font-weight:var(--calcite-font-weight-medium);font-size:var(--calcite-font-size-0)}.list{margin-left:var(--arcgis-charts-config-margin-minor);margin-right:var(--arcgis-charts-config-margin-minor);margin-bottom:var(--arcgis-charts-config-margin-major)}.info-icon{margin:auto 1rem;pointer-events:auto}`,C=class extends x{constructor(){super(...arguments),this._messages=b(),this.resetSeriesOriginal=()=>{this.configSeriesOpen=!1,this.selectedSeriesIndex=void 0,this.model.resetSeriesStyling(),this.seriesOrderResetCounter+=1},this.onMultipleSeriesSelect=async e=>{if(!this.shouldDisableMeanLinesOption()){let i=e.target,t=i.value??i.parentElement.value??"";this.model.showMeanLines=t===d.MeanLines}},this.seriesNameChange=e=>{if(e.detail!==null||e.detail!==void 0){let i=e.detail?.name;this.model.setSeriesName(i,this.selectedSeriesIndex??-1)}},this.seriesColorChange=e=>{if(e.detail!==null&&e.detail!==void 0){let{color:i}=e.detail;i!==void 0&&(this.meanLinesBoxColorIsSelected?this.model.meanLinesBoxColor=i:(this.model.colorMatch=!1,this.model.setSeriesColor(i,this.selectedSeriesIndex??-1)))}},this.seriesLineStyleChange=e=>{if(e.detail!==null&&e.detail!==void 0){let{style:i}=e.detail;i!==void 0&&this.model.setSeriesLineStyle(i,this.selectedSeriesIndex??-1)}},this.seriesLineWidthChange=e=>{if(e.detail!==null&&e.detail!==void 0){let{width:i}=e.detail;i!==void 0&&this.model.setSeriesLineWidth(i,this.selectedSeriesIndex??-1)}},this.onCalciteListOrderChange=e=>{let i=this.model.boxPlotSeriesIndexWhenMeanLinesShown;if(e.detail!==null&&e.detail!==void 0){let{newIndex:t,oldIndex:s}=e.detail,o=s,r=t;i!==-1&&(o=s>=i?s+1:s,r=t>=i?t+1:t),this.model.moveSeries(o,r),this.seriesOrderResetCounter+=1}},this.seriesPopoverClose=()=>{this.selectedSeriesIndex=void 0,this.meanLinesBoxColorIsSelected=!1,this.configSeriesOpen=!1,this.seriesPopover=p(this.seriesPopover)},this.openSeriesPopOver=e=>{e.stopImmediatePropagation(),this.removeSeriesPopover();let i=e.target,t=i.localName==="calcite-list-item"?i:i.parentNode,s=!this.configSeriesOpen,o=this.model.getSeriesIndex(t.value);if(o!==void 0&&o!==-1)this.configSeriesOpen=this.selectedSeriesIndex===o?s:!0,this.configSeriesOpen?this.selectedSeriesIndex=o:this.selectedSeriesIndex=void 0,this.meanLinesBoxColorIsSelected=!1;else if(t.value==="box-plot-color"){let r=!this.meanLinesBoxColorIsSelected;this.configSeriesOpen=r,this.meanLinesBoxColorIsSelected=r,this.selectedSeriesIndex=void 0}},this.createTooltip=(e,i)=>{let t=e.target;this.tooltip=h(n`<calcite-tooltip style=${c({opacity:1,zIndex:"var(--calcite-floating-ui-z-index)"})} .referenceElement=${t} open placement=top>${i??""}</calcite-tooltip>`),document.body.appendChild(this.tooltip)},this.destroyTooltip=()=>{I(this.tooltip)},this.onModelConfigChange=()=>{this.requestUpdate()},this.meanLinesBoxColorIsSelected=!1,this.seriesOrderResetCounter=0,this.configSeriesOpen=!1,this.activeColorMatch=!1,this.popoverPlacement="leading",this.arcgisChartsConfigPopoverOpenChange=$({composed:!0,cancelable:!0,bubbles:!0})}static{this.properties={selectedSeriesIndex:16,meanLinesBoxColorIsSelected:16,seriesOrderResetCounter:16,messageOverrides:0,model:0,configSeriesOpen:5,activeColorMatch:5,popoverPlacement:1}}static{this.styles=N}load(){this.modelChange(this.model),this.onModelConfigChange()}willUpdate(e){e.has("model")&&this.modelChange(this.model,e.get("model")),e.has("selectedSeriesIndex")&&this.selectedSeriesIndexChange(),e.has("meanLinesBoxColorIsSelected")&&this.meanLinesBoxColorIsSelectedChange()}disconnectedCallback(){super.disconnectedCallback(),this.removeSeriesPopover(),this.model.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}modelChange(e,i){i?.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange),e.addEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}selectedSeriesIndexChange(){this.selectedSeriesIndex!==void 0&&this.configSeriesOpen?this.setupSeriesPopover():this.removeSeriesPopover()}meanLinesBoxColorIsSelectedChange(){this.meanLinesBoxColorIsSelected&&this.configSeriesOpen?this.setupSeriesPopover():this.removeSeriesPopover()}removeSeriesPopover(){this.seriesPopover!==null&&this.seriesPopover!==void 0&&(this.seriesPopover.open=!1,this.seriesPopover=p(this.seriesPopover))}buildSeriesListItems(){let e=this.model.seriesLength,i=this.model.boxPlotSeriesIndexWhenMeanLinesShown,t=Array.from({length:e},(s,o)=>o);return y(t,s=>this.model.getSeriesId(s),s=>{let o=this.model.getSeriesId(s),r=this.model.getSeriesColor(s),m=this.model.getSeriesName(s),S=this.model.chartSubType,M=S===g.BoxPlotMonoField||S===g.BoxPlotMultiFields?this._messages.series:o,v="#CCCCCC",f="minus-square";if((e>1||!this.activeColorMatch)&&r!==void 0){f=this.model.showMeanLines===!0?"line-solid":"square-f";let[O,B,w,E]=[...r];v=`rgba(${O},${B},${w},${E/255})`}return i!==s?n`<calcite-list-item .label=${m??o??""} .description=${M} .value=${o} .selected=${this.selectedSeriesIndex===s} @click=${this.openSeriesPopOver}><calcite-icon slot=content-end .icon=${f} style=${c({color:v})}></calcite-icon></calcite-list-item>`:null})}buildSeriesList(){return P(this.seriesOrderResetCounter,n`<calcite-list label class=${a(l.list)} drag-enabled selection-mode=single selection-appearance=border @calciteListOrderChange=${this.onCalciteListOrderChange}>${this.buildSeriesListItems()}</calcite-list>`)}setupSeriesPopover(){this.removeSeriesPopover(),this.meanLinesBoxColorIsSelected?this.seriesPopover=h(n`<arcgis-charts-config-box-plot-series-popover .referenceElement=${this.el} .selectedColor=${this.model.meanLinesBoxColor} .placement=${this.popoverPlacement} open .selectedSeriesIndex=${this.selectedSeriesIndex} .labelCanBeConfigured=${!this.meanLinesBoxColorIsSelected} @arcgisChartsConfigSeriesPopoverNameChange=${this.seriesNameChange} @arcgisChartsConfigSeriesPopoverColorChange=${this.seriesColorChange} @arcgisChartsConfigSeriesPopoverLineStyleChange=${this.seriesLineStyleChange} @arcgisChartsConfigSeriesPopoverLineWidthChange=${this.seriesLineWidthChange} @arcgisChartsConfigPopoverClose=${this.seriesPopoverClose}></arcgis-charts-config-box-plot-series-popover>`):this.selectedSeriesIndex!==void 0&&(this.seriesPopover=h(n`<arcgis-charts-config-box-plot-series-popover .referenceElement=${this.el} .selectedName=${this.model.getSeriesName(this.selectedSeriesIndex)} .selectedColor=${this.model.getSeriesColor(this.selectedSeriesIndex)} .selectedLineStyle=${this.model.getSeriesLineStyle(this.selectedSeriesIndex)} .selectedLineWidth=${this.model.getSeriesLineWidth(this.selectedSeriesIndex)} .isLineSymbol=${this.model.showMeanLines} .placement=${this.popoverPlacement} open .selectedSeriesIndex=${this.selectedSeriesIndex} .labelCanBeConfigured=${!this.meanLinesBoxColorIsSelected} @arcgisChartsConfigSeriesPopoverNameChange=${this.seriesNameChange} @arcgisChartsConfigSeriesPopoverColorChange=${this.seriesColorChange} @arcgisChartsConfigSeriesPopoverLineStyleChange=${this.seriesLineStyleChange} @arcgisChartsConfigSeriesPopoverLineWidthChange=${this.seriesLineWidthChange} @arcgisChartsConfigPopoverClose=${this.seriesPopoverClose}></arcgis-charts-config-box-plot-series-popover>`)),this.seriesPopover&&!document.body.contains(this.seriesPopover)&&document.body.appendChild(this.seriesPopover)}shouldDisableMeanLinesOption(){return this.model.splitByField===""||this.model.splitByField===void 0}renderMeanLinesBoxColorItem(){let e="#CCCCCC",i="minus-square",t=this.model.meanLinesBoxColor;if(t!==void 0){i="square-f";let[s,o,r,m]=[...t];e=`rgba(${s},${o},${r},${m/255})`}return n`<calcite-list label class=${a(l.list)}><calcite-list-item value=box-plot-color .label=${this._messages.boxPlotColor} .selected=${this.meanLinesBoxColorIsSelected} @click=${this.openSeriesPopOver}><calcite-icon slot=content-end .icon=${i} style=${c({color:e})}></calcite-icon></calcite-list-item></calcite-list>`}renderMultipleSeriesOption(){let e=this.shouldDisableMeanLinesOption();return e?[]:[n`<div class=${`${l.sectionLabel} ${l.topSection}`}>${this._messages.displayMultipleSeries}</div>`,n`<calcite-list label class=${a(l.list)} selection-mode=single-persist selection-appearance=border @click=${this.onMultipleSeriesSelect}><calcite-list-item .label=${this._messages.sideBySide} .value=${d.Side} .selected=${this.model.showMeanLines!==!0}><calcite-icon slot=content-start scale=l icon=graph-box-side-by-side></calcite-icon><calcite-icon class=${a(l.infoIcon)} slot=actions-end icon=information scale=s flip-rtl @mouseover=${i=>this.createTooltip(i,this._messages.sideBySideTooltip??"")} @mouseout=${this.destroyTooltip}></calcite-icon></calcite-list-item><calcite-list-item .label=${this._messages.meanLines} .value=${d.MeanLines} .disabled=${e} .selected=${this.model.showMeanLines===!0}><calcite-icon slot=content-start scale=l icon=graph-box-mean-lines></calcite-icon><calcite-icon class=${a(l.infoIcon)} slot=actions-end icon=information scale=s flip-rtl @mouseover=${i=>this.createTooltip(i,this._messages.meanLinesTooltip??"")} @mouseout=${this.destroyTooltip}></calcite-icon></calcite-list-item></calcite-list>`,this.model.showMeanLines===!0?this.renderMeanLinesBoxColorItem():null]}render(){return n`${this.renderMultipleSeriesOption()}<div class=${a(l.sectionLabel)}>${this._messages.series}<calcite-button @click=${this.resetSeriesOriginal} .disabled=${!this.model.resetAvailable()} appearance=transparent icon-end=reset>${this._messages.reset}</calcite-button></div>${this.buildSeriesList()}`}};L("arcgis-charts-config-box-plot-series",C);return C},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",e,f,g)