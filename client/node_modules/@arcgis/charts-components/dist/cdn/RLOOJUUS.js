/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import{a as L}from"./MWPCQM2X.js";import{a as k}from"./XIZLMN6F.js";import{b as K,c as N}from"./JHAJCFXL.js";import e from"./MSRS6EXP.js";import{f as s}from"./TLMHEFBH.js";import{a as C}from"./BMZ5OG4J.js";import c from"./TNMDYW24.js";import a from"./GUWCFIQ4.js";import{j as b,q as d}from"./MHMLEVRX.js";import"./DXCHSVBP.js";import"./5BG7WW2E.js";import{k as r,o as h}from"./2YIVYDK5.js";import{A as o,F as P,g as I,h as n,l as f,w as m,x as p,y as F}from"./GRWAOK3Y.js";import"./UUMP6K6L.js";export default $arcgis.t(([,,,,,,,{Qa:E,Xa:D,mc:v,oc:T,ya:w,za:A},,{a:y,c:$,g:S,k:g,o:z}])=>{var _=I`.hide{display:none}.am5-modal{width:100%;height:100%;position:absolute;z-index:100000;top:0;left:0}.am5-modal-curtain{top:0;left:0;width:100%;height:100%;position:absolute;background:#fff!important;z-index:100}.am5-modal-wrapper{top:0;left:0;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;white-space:nowrap;background:#ffffff80;z-index:101}.am5-modal-content{display:inline-block;padding:1.2em;vertical-align:middle;text-align:start;white-space:normal;background:#fff;border-radius:4px;box-shadow:#00000073 0 0 36px;color:#000}.am5-layer-1000{z-index:1000!important}.am5-layer-30{z-index:100!important}.arcgis-charts-modal{box-shadow:none!important}.arcgis-charts-modal-header{background-color:#0000000d;font-weight:700;padding:4px;align-content:center}.show{display:block}.notifyPanel{flex:0 1 auto}.disable-interactions{pointer-events:none}.dim-text{color:var(--arcgis-charts-dim-text)}.name{display:flex;flex-direction:column;margin:.5rem;padding:.5rem;background:#fff;min-width:250px}.header{margin:0;font-weight:bolder}.fab{display:flex;justify-content:stretch}.pick-list-item-label{font-size:small}.sort-icon-color{color:#000}.sort-y-axis{transform:rotate(90deg)}calcite-panel{max-height:60vh}calcite-panel .size-section{width:19rem;margin:1rem 0;display:flex;flex-wrap:wrap;justify-content:space-evenly}calcite-panel .size-section calcite-label{width:8rem;margin-bottom:.25rem}calcite-panel .apply-button{width:17rem}`,c={jsAppFlyout:"js-app-flyout",name:"line-chart-data-popover",numericFieldPickList:"line-chart-data-numeric-fields-pick-list",header:"header",fab:"fab",pickListItemLabel:"pick-list-item-label",sizeSection:"size-section",applyButton:"apply-button"},x=class extends F{constructor(){super(...arguments),this._messages=C(),this.commonStrings=C({name:"common",blocking:!0}),this.picklist=m(),this.intervalSizeElement=m(),this.intervalTypeElement=m(),this.popoverElement=m(),this.placement="leading",this.offsetDistance=-200,this.pickListHasChanged=!1,this.layerFieldsInfo=[],this.arcgisChartsConfigLineChartDataPopoverChange=f(),this.arcgisChartsConfigLineChartPopoverClose=f()}static{this.properties={aggregationLabels:16,timeAggregationLabels:16,messageOverrides:0,headingTitle:3,referenceElement:2,open:7,contentKind:1,layerFieldsInfo:0,selectedContent:1}}static{this.styles=_}async reposition(){await this.popoverElement.value?.reposition()}willUpdate(e){e.has("selectedContent")&&this.selectedContentChange(this.selectedContent,e.get("selectedContent"));let t=$.map(l=>w(l,this.commonStrings));b(this.aggregationLabels,t)||(this.aggregationLabels=t);let i=[h.Start,h.End].map(l=>A(l,this.commonStrings));b(this.timeAggregationLabels,i)||(this.timeAggregationLabels=i)}updated(){setTimeout(async()=>{typeof this.picklist.value?.setFocus=="function"&&await this.picklist.value?.setFocus()},y.PopoverTimer),K(this.popoverElement.value,this.open),this.hasUpdated||setTimeout(()=>{this.popoverElement.value?.reposition()},y.PopoverTimer)}selectedContentChange(e,t){this.pickListHasChanged=N(e,t)}buildAggregationPickListItems(){return L($,e=>e,(e,t)=>n`<calcite-list-item .label=${this.aggregationLabels?.[t]} .value=${e} .selected=${g(e,this.selectedContent)}></calcite-list-item>`)}buildIntervalAlignmentPickListItems(){let e=[h.Start,h.End];return L(e,t=>t,(t,i)=>n`<calcite-list-item .label=${this.timeAggregationLabels?.[i]} .value=${t} .selected=${g(t,this.selectedContent)}></calcite-list-item>`)}buildPickListItem(e){return k(e.name,n`<calcite-list-item .label=${E(this.layerFieldsInfo,e.name)} .value=${e.name} .selected=${g(e.name,this.selectedContent)}></calcite-list-item>`)}buildPickListItems(e){let t=this.layerFieldsInfo?.length??0,i=[];switch(e){case s.numericFields:{for(let l=0;l<t;l+=1){let a=this.layerFieldsInfo?.[l];a&&v(a)&&i.push(this.buildPickListItem(a))}break}case s.xAxisField:{for(let l=0;l<t;l+=1){let a=this.layerFieldsInfo?.[l];a&&(v(a)||a.type===d.Date||a.type===d.DateOnly||a.type===d.TimestampOffset)&&i.push(this.buildPickListItem(a))}break}case s.splitByField:{let l=k(" ",n`<calcite-list-item label=" " value=" " .selected=${g("",this.selectedContent)}></calcite-list-item>`);i.push(l);for(let a=0;a<t;a+=1){let u=this.layerFieldsInfo?.[a];u&&(T(u)||u.type===d.String)&&i.push(this.buildPickListItem(u))}break}}return i}closePopover(){if(this.contentKind===s.numericFields){let e={pickListElement:this.picklist.value,eventEmitter:this.arcgisChartsConfigLineChartDataPopoverChange,contentKind:this.contentKind};z(e)}this.open=!1,this.arcgisChartsConfigLineChartPopoverClose.emit()}onDataContentTypeChange(e){this.pickListHasChanged=!0;let t=e.target.selectedItems;this.arcgisChartsConfigLineChartDataPopoverChange.emit({contentKind:this.contentKind,value:t.map(i=>i.value)}),this.open=!1}intervalChange(){let e=Number.parseInt(this.intervalSizeElement.value?.value??""),t=this.intervalTypeElement.value?.selectedOption?.value;!Number.isNaN(e)&&e>0&&this.arcgisChartsConfigLineChartDataPopoverChange.emit({contentKind:this.contentKind,value:[{intervalSize:e,intervalUnits:t}]}),this.open=!1}onNumericFieldsChange(e){e.target!==null&&(this.selectedContent=e.target.selectedItems.map(t=>t.value))}onNumericFieldSelectionDone(){this.pickListHasChanged&&this.closePopover()}renderAggregationType(){let e=this.buildAggregationPickListItems();return n`<calcite-list label class=${o(c.pickListItemLabel)} selection-mode=single selection-appearance=border @calciteListChange=${this.onDataContentTypeChange}>${e}</calcite-list>`}renderXAxisField(){let e=this.buildPickListItems(s.xAxisField);return n`<calcite-list label class=${o(c.pickListItemLabel)} selection-mode=single selection-appearance=border filter-enabled @calciteListChange=${this.onDataContentTypeChange} ${p(this.picklist)}>${e}</calcite-list>`}renderNumericFields(){let e=this.buildPickListItems(s.numericFields);return n`<calcite-list label class=${o(c.numericFieldPickList)} selection-mode=multiple filter-enabled @calciteListChange=${this.onNumericFieldsChange} ${p(this.picklist)}>${e}</calcite-list>`}renderSplitByField(){let e=this.buildPickListItems(s.splitByField);return n`<calcite-list label class=${o(c.pickListItemLabel)} selection-mode=single selection-appearance=border filter-enabled @calciteListChange=${this.onDataContentTypeChange} ${p(this.picklist)}>${e}</calcite-list>`}renderIntervalAlignment(){let e=this.buildIntervalAlignmentPickListItems();return n`<calcite-list label class=${o(c.pickListItemLabel)} selection-mode=single selection-appearance=border @calciteListChange=${this.onDataContentTypeChange}>${e}</calcite-list>`}renderInterval(){let e=this.selectedContent,t=[r.Second,r.Minute,r.Hour,r.Day,r.Week,r.Month,r.Year];return n`<div><div class=${o(c.sizeSection)}><calcite-label scale=m>${this._messages.intervalSize}<calcite-input type=number scale=m min=1 step=any .value=${S(e?.size,1)} ${p(this.intervalSizeElement)}></calcite-input></calcite-label><calcite-label scale=m>${this._messages.intervalType}<calcite-select .label=${this._messages.intervalType??""} ${p(this.intervalTypeElement)}>${t.map(i=>n`<calcite-option .value=${i} .label=${D(i,this._messages)} .selected=${e?.unit===i}></calcite-option>`)}</calcite-select></calcite-label><calcite-button class=${o(c.applyButton)} appearance=outline @click=${this.intervalChange}>${this._messages.apply}</calcite-button></div></div>`}renderPopoverInfo(){let e;switch(this.contentKind){case s.aggregation:e=this.renderAggregationType();break;case s.xAxisField:e=this.renderXAxisField();break;case s.numericFields:e=this.renderNumericFields();break;case s.splitByField:e=this.renderSplitByField();break;case s.intervalAlignment:e=this.renderIntervalAlignment();break;case s.interval:e=this.renderInterval();break}return e}render(){let e;return this.contentKind===s.numericFields&&(e=n`<div slot=footer><calcite-fab class=${o(c.fab)} appearance=outline-fill kind=neutral icon .label=${this._messages.selectionDone} scale=s text-enabled .text=${this._messages.selectionDone} @click=${this.onNumericFieldSelectionDone}></calcite-fab></div>`),n`<div class=${o(c.jsAppFlyout)}><calcite-popover class=${o(c.name)} .referenceElement=${this.referenceElement??document.body} .placement=${this.placement} .offsetDistance=${this.offsetDistance} @calcitePopoverClose=${this.closePopover} .open=${this.open} label auto-close ${p(this.popoverElement)}><calcite-panel closable .closed=${!this.open} @calcitePanelClose=${this.closePopover}><div slot=header-content class=${o(c.header)}>${this.headingTitle??""}</div>${this.renderPopoverInfo()}${e}</calcite-panel></calcite-popover></div>`}};P("arcgis-charts-config-line-chart-popover",x);return x},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",a,c,e)