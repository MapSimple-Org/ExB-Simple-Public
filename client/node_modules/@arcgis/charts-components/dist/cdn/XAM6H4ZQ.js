/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import{c as h}from"./TLMHEFBH.js";import j from"./JQSIPEYW.js";import i from"./TNMDYW24.js";import g from"./XWFCGUDT.js";import f from"./NWTSIC7V.js";import e from"./7DWSED2R.js";import d from"./MJVNOHMT.js";import c from"./CDJV5WUJ.js";import a from"./GUWCFIQ4.js";import{e as b,j as G,k as w,p as _}from"./MHMLEVRX.js";import{d as V}from"./5BG7WW2E.js";import{a as P,w as W}from"./2YIVYDK5.js";export default $arcgis.t(([{B:S,Da:J,Ea:D,Ga:M,Ha:u,Rb:K,ob:v,pc:Q,sb:B,zb:O},{c:X,d:q},{Ha:E,va:Y,wa:ee,xa:oe},{k:I,l:j,m:H,x:ne},{b:re},{a:te,c:ie,d:ae},{b:U},L])=>{var ke=[P.BarSeries,P.BoxPlotSeries,P.LineSeries,P.PieSeries,P.HistogramSeries,P.ScatterSeries],De=1,Oe={PNG:"png"};function de(c,e){return!G(c,e)}function he(c,e){return de(c,e)||c!==e}function ce(c){return(new Intl.NumberFormat(c,{minimumFractionDigits:1,maximumFractionDigits:1}).formatToParts(1.1).find(e=>e.type==="decimal")?.value??".")==="."?",":";"}var le=c=>{let{value:e,quoteAll:t=!1,locale:s="en"}=c,a=e==null?"":String(e);if(Number.isFinite(Number(a))){let o=Number(a);a=new Intl.NumberFormat(s,{minimumFractionDigits:0,maximumFractionDigits:2}).format(o).replace(/\u202F/gu," ")}return(t||/[",\r\n]/u.test(a))&&(a=`"${a.replace(/"/gu,'""')}"`),a};function Ie(c,e={}){let{columns:t,delimiter:s,includeHeader:a=!0,quoteAll:o=!1,locale:r}=e,m=c.length===0,n="";if(!m){let f=t??Object.keys(c[0]),g=[],F=r??U().formatLocale,p=s??ce(F);if(n+=`sep=${p}\r
`,a){let i=f.map(d=>le({value:d,quoteAll:o,locale:F}));g.push(i.join(p))}c.forEach(i=>{let d=f.map(l=>le({value:i[l],quoteAll:o,locale:F}));g.push(d.join(p))}),n+=g.join(`\r
`)}return n}function je(c){let{rawData:e,config:t,layer:s,fieldList:a}=c,o=e;if(t!==void 0&&Array.isArray(e)&&e.length>0){let r=W(t?.series);r===P.HistogramSeries?o=ue(t,e):r===P.BarSeries||r===P.LineSeries||r===P.ComboLineAndBarSeries?o=fe({config:t,rows:e,layer:s,fieldList:a}):r===P.PieSeries?o=pe({config:t,rows:e,layer:s,fieldList:a}):r===P.BoxPlotSeries&&(o=be({config:t,rows:e,fieldList:a}))}return o}function ue(c,e){let t=re(c),s=`${b(h.Min)} of ${t}`,a=`${b(h.Max)} of ${t}`,o=`${b(h.Count)} of ${t}`;return e.map(r=>{let{minValue:m,maxValue:n,count:f}=r,g=w(m),F=w(n),p=w(f),i={};return g&&(i[s]=m.toFixed(2)),F&&(i[a]=n.toFixed(2)),g&&F&&(i.Label=`${m.toFixed(2)} - ${n.toFixed(2)}`),p&&(i[o]=f),i})}function se(c,e,t){let s=Object.keys(c),a=[];return t?a=t.map(o=>s.find(r=>r.toLowerCase().includes(o.toLowerCase()))||""):a=s.filter(o=>o.toLowerCase().includes(e.toLowerCase())),a.filter(o=>o.trim()!=="")}function fe(c){let{config:e,rows:t,layer:s,fieldList:a}=c,o=X(e),r=Y(e),m=b(r),n=oe(e),f=v(e.series),g=E(e),F=ee(e),p=K(s)?.objectIdField??"FID",i=n.length===1&&n[0]===p,d;switch(f){case u.BarAndLineNoAggregation:d=t.map(l=>{let x=$({field:o,value:l[o],fieldList:a}),y={[o]:x};return Object.assign(y,...n.map(A=>({[A]:l[A]}))),y});break;case u.BarAndLineFromFields:d=_(n,t).map(([l,x])=>{let y=O(e.series)[0],A={};return x!==void 0&&l!==void 0&&(A.Field=x[o],A.Value=x[y]),A});break;case u.BarAndLineMonoField:case u.BarAndLineMultiFields:d=t.map(l=>{let x=$({field:o,value:l[o],fieldList:a}),y={[o]:x};return n.forEach((A,k)=>{let R=q({config:e,xAxisField:o,numericFields:n,aggregationType:r,layer:s,numericFieldIndex:k,fieldList:a}),T=O(e.series)[k],Z=T,z=T;T.toLowerCase()===R.name.toLowerCase()&&(Z=R.description,z=R.name),y[Z]=l[z]}),y});break;case u.BarAndLineSplitBy:d=t.flatMap(l=>{let x=se(l,n[0]),y=$({field:o,value:l[o],fieldList:a});return g.map((A,k)=>({[o]:y,[F]:A,[i?m:`${m} of ${n[0]}`]:l[x[k]]}))});break;case u.BarAndLineSplitByNoAggregation:d=t.map(l=>{let x=$({field:o,value:l[o],fieldList:a}),y=se(l,n[0],g);return{[o]:x,[F]:l[F],[n[0]]:l[y[0]]}});break;default:d=t}return d}function me(c,e=2){if(c.length===0)return[];let t=c.reduce((s,a)=>{for(let[o,r]of Object.entries(a))typeof r=="number"&&Number.isFinite(r)&&(s[o]=(s[o]??0)+r);return s},{});return c.map(s=>{let a={...s};for(let[o,r]of Object.entries(s))if(typeof r=="number"&&t[o]>0){let m=r/t[o]*100;a[`${o}${M}`]=`${m.toFixed(e)}%`}return a})}function pe(c){let{config:e,rows:t,layer:s,fieldList:a}=c,o=te(e),r=v(e.series),m=me(t,2),n=ie(e),f=r!==u.PieFromFields?V.Category:V.Fields,g=ae(e,f),F=q({config:e,xAxisField:o,numericFields:n,aggregationType:g,mode:f,layer:s,fieldList:a}),p=O(e.series)[0];return r===u.PieFromCategory?m=m.map(i=>{let d=$({field:o,value:i[o],fieldList:a}),l={[o]:d},x=p,y=p;return p.toLowerCase()===F.name.toLowerCase()&&(x=F.description,y=F.name),l[x]=i[y],l[b(M.trim())]=i[`${y}${M}`],l}):r===u.PieFromFields&&(m=_(n,m).map(([i,d])=>{let l={};return d!==void 0&&i!==void 0&&(l.Field=d[o],l.Value=d[p],l[b(M.trim())]=d[`${p}${M}`]),l})),m}function N(c){let{rawData:e,keyBase:t="",outRow:s}=c;for(let[a,o]of Object.entries(B)){let r=e[t+o];r!==void 0&&(s[a]=w(r)?r.toFixed(2):r);let m=e[t+o+J];m!==void 0&&(s[`${a} Outlier`]=w(m)?m.toFixed(2):m);let n=e[t+o+D];n!==void 0&&(s[`${a} Z-Score`]=w(n)?n.toFixed(2):n)}}function C(c){let{rawData:e,outRow:t,config:s,boxPlotSubType:a,fieldList:o}=c,r=I(s),m=H(s),n=j(s),f=B.Outlier,g=S;switch(a){case u.BoxPlotMonoFieldAndCategory:{let i=$({field:r,value:e[r],fieldList:o});t[r]=i,t[b(B.Outlier)]=e[f];break}case u.BoxPlotMultiFieldsAndCategory:{t[b(r)]=e[r],f=`${m.find(i=>Object.keys(e).some(d=>d.toLowerCase().includes(i.toLowerCase())))??""}_${f}`,t[b(B.Outlier)]=e[f];break}case u.BoxPlotMonoFieldAndSplitBy:case u.BoxPlotMultiFieldsAndSplitBy:{let i=e[n];f=`${i}_${f}`,t.Field=e[g],t[b(n)]=i,t[b(B.Outlier)]=e[f];break}case u.BoxPlotMonoFieldAndCategoryAndSplitBy:{let i=e[n];f=`${i}_${f}`,t[b(r)]=e[r],t[b(n)]=i,t[b(B.Outlier)]=e[f];break}case u.BoxPlotMonoField:case u.BoxPlotMultiFields:default:{t.Field=e[g],t[b(B.Outlier)]=e[f];break}}let F=`${f}${D}`,p=e[F];p!==void 0&&(t[`${b(B.Outlier)} Z-Score`]=w(p)?p.toFixed(2):p)}function Fe(c){let{rawData:e,outRow:t,config:s,splitByValue:a}=c,o=v(s.series),r=e[`${a}_${B.Average}`],m=j(s),n=I(s),f="";switch(o){case u.BoxPlotMonoFieldAndSplitBy:{f=`${a}_${m}`,t.Field=e[S],t[b(m)]=e[f];break}case u.BoxPlotMultiFieldsAndSplitBy:{f=`${a}_${B.Average}`,t.Field=e[S],t[b(m)]=e[f];break}case u.BoxPlotMonoFieldAndCategoryAndSplitBy:{f=`${a}_${B.Average}`,t[n]=e[n],t[b(m)]=a;break}}t[b(B.Average)]=w(r)?r.toFixed(2):r;let g=`${r}${D}`,F=e[g];F!==void 0&&(t[`${b(B.Average)} Z-Score`]=w(F)?F.toFixed(2):F)}function be(c){let{config:e,rows:t,fieldList:s}=c,a=v(e.series),o=a,r=ne(e),m=Array.isArray(t)&&t.length>0&&t.every(i=>i[L.boxPlot.boxPlotMeanLineMarkerId]!==void 0);r&&!m&&(a===u.BoxPlotMonoFieldAndSplitBy?o=u.BoxPlotMonoField:a===u.BoxPlotMultiFieldsAndSplitBy?o=u.BoxPlotMultiFields:a===u.BoxPlotMonoFieldAndCategoryAndSplitBy&&(o=u.BoxPlotMonoFieldAndCategory));let n=I(e),f=H(e),g=E(e),F=j(e),p;switch(o){case u.BoxPlotMonoField:case u.BoxPlotMonoFieldAndCategory:{p=t.map(i=>{let d={};if(i[L.boxPlot.boxPlotOutlierId])C({rawData:i,outRow:d,config:e,boxPlotSubType:o});else{if(o===u.BoxPlotMonoFieldAndCategory){let l=$({field:n,value:i[n],fieldList:s});d[n]=l}else o===u.BoxPlotMonoField&&(d.Field=i[S]);N({rawData:i,outRow:d})}return d});break}case u.BoxPlotMultiFields:{p=t.flatMap(i=>{let d={};return i[L.boxPlot.boxPlotOutlierId]?C({rawData:i,outRow:d,config:e,boxPlotSubType:o}):(d.Field=i[S],N({rawData:i,outRow:d})),[d]});break}case u.BoxPlotMultiFieldsAndCategory:{p=t.flatMap(i=>f.map(d=>{let l={},x="";if(l.Field=d,i[L.boxPlot.boxPlotOutlierId])C({rawData:i,outRow:l,config:e,boxPlotSubType:o});else{if(o===u.BoxPlotMultiFieldsAndCategory){let y=$({field:n,value:i[n],fieldList:s});l[n]=y,x=`${d}_`}N({rawData:i,outRow:l,keyBase:x})}return l}));break}case u.BoxPlotMonoFieldAndSplitBy:case u.BoxPlotMultiFieldsAndSplitBy:case u.BoxPlotMonoFieldAndCategoryAndSplitBy:{p=t.flatMap(i=>{if(i[L.boxPlot.boxPlotOutlierId]){let d={};return C({rawData:i,outRow:d,config:e,boxPlotSubType:o}),[d]}else return i[L.boxPlot.boxPlotMeanLineMarkerId]?g?.map(d=>{let l={};return Fe({rawData:i,outRow:l,splitByValue:d,config:e}),l}):g.map(d=>{let l={};if(o===u.BoxPlotMonoFieldAndCategoryAndSplitBy){let x=$({field:n,value:i[n],fieldList:s});l[n]=x}return i[L.boxPlot.boxPlotOutlierId]?C({rawData:i,outRow:l,config:e,boxPlotSubType:o}):(l[F]=d,N({rawData:i,outRow:l,keyBase:`${d}_`})),l})});break}default:p=t}return p}var ge=c=>{let e=!1;return(typeof c=="string"||typeof c=="number")&&(e=!Number.isNaN(new Date(c).getTime())),e},$=c=>{let{field:e,value:t,fieldList:s}=c,a=!1;return s!==void 0&&s.length>0&&(a=Q(s).some(o=>o===e)),ge(t)&&a?new Date(t).toISOString():t};return{a:ke,b:De,c:Oe,d:de,e:he,f:Ie,g:je}},a,c,d,e,f,g,i,j)