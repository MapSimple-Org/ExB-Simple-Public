/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import b from"./CDJV5WUJ.js";import{i as I,j as T,k as A,l as Ce,m as Me,o as we}from"./UM26TKF2.js";import a from"./GUWCFIQ4.js";import{d as ee,f as V,i as ce,q as ie,w as fe}from"./MHMLEVRX.js";import{a as j}from"./5BG7WW2E.js";import{a as M,b as v,f as ge,h as $,k as z,n as U,o as de,v as k,w as ye}from"./2YIVYDK5.js";export default $arcgis.t(([{substitute:w},,,,,,,,{$b:qe,B:ue,Dc:Q,Ha:P,I:B,K:q,L:me,M:K,Ma:Ie,N:xe,O:pe,Qa:N,Rb:Be,Ua:Te,_:be,aa:Fe,ba:ve,da:Se,eb:he,ec:se,k:E,lb:_,mb:Ae,ob:R,oc:ae,pc:Le,q:S,qb:L,qc:Ne,rc:Z,sc:J,ya:te},{c:D,d:W,f:oe}])=>{async function ne(i){let{queryObject:e,queryConfig:t,category:s,splitByField:a,chartLimits:o,abortKey:n}=i,l=a!==void 0,r=s!==ue?[s]:[];l&&r.push(a);let u=Be(e),x={...t,groupByFieldsForStatistics:Array.from(new Set(r)),outStatistics:[{statisticType:v.Count,onStatisticField:u.objectIdField,outStatisticFieldName:`${v.Count}_OBJECTID`}],orderByFields:void 0,num:o?.maxBarThreePlusSeriesCountTotal},c=await qe({queryObject:e,featureCount:1,queryConfig:x,abortKey:n});return Array.from(new Set(c.map(p=>p.attributes[l?a:s]))).sort((p,m)=>typeof p=="string"&&typeof m=="string"?p.localeCompare(m):Number(p)-Number(m))}function Oe(i,e,t){let s=i?.axes?.[e];s?.title!==void 0?s.title.content.text=t:s!==void 0&&(s.title=q({text:t,visible:!0,font:B(S.AxisTitle)}))}function ke(i){let{config:e,layerInfo:t,commonStrings:s,numericFields:a,aggregationType:o}=i,n="";if(e)if(Ie(e)===ge.Stacked100)n=s.utilsStrings.statistics.percent;else{let l=te(o,s);if(a.length===1){let r=N(t.layerFieldsInfo,a[0]);o===v.NoAggregation?n=r:o===v.Count&&a[0]===t.objectIdField?n=s.utilsStrings.statistics.count:n=w(s.axisLabels.aggregationOfFieldName,{aggregation:l,fieldName:r})}else a.length>1&&(o===v.NoAggregation?n=s.axisLabels.values:n=w(s.axisLabels.aggregationOfValues,{aggregation:l}))}return n}var De=(i,e,t)=>i.axes?.[e]??be(t,i.type)[e],Ve=i=>{let{config:e,axis:t,axisIndex:s}=i;e.axes!==void 0&&(e.axes[s]=t)},ji=i=>{let{config:e,axisIndex:t,isMax:s}=i,a=Number.NaN;return s?a=e.axes?.[t]?.maximum:a=e.axes?.[t]?.minimum,a??Number.NaN},F=i=>{let{config:e,value:t,axisIndex:s,isMax:a}=i,o=e?.axes?.[s];o!==void 0&&(a?o.maximum=t:o.minimum=t)},ki=(i,e)=>{F({config:i,value:e,axisIndex:0,isMax:!1})},$e=i=>i.axes?.[0]?.valueFormat??K(),Ze=(i,e,t)=>{let s=De(i,0,e);if(s!==void 0&&t!==void 0){let a={...s,valueFormat:t};Ve({config:i,axis:a,axisIndex:0})}},je=(i,e,t)=>{let s=i.axes?.[e];s!==void 0&&(s.integerOnlyValues=t)},Je=i=>{let e=ye(i.series);return e===M.BarSeries||e===M.ComboLineAndBarSeries||e===M.LineSeries},Qe=i=>{let{axisIndex:e,config:t,isMultiAxis:s}=i,a=!1;return e===0||e===1&&s?a=!0:e===2&&(a=Je(t)),a},Di=i=>{let{axisIndex:e,func:t,config:s}=i;return Qe({axisIndex:e,config:s,isMultiAxis:!0})?t(e):void 0},Vi=(i,e)=>{let t,s=e.axes?.[i]?.valueFormat;return(i===0||i>=1&&we(s))&&(t=s),t},$i=i=>{let{config:e,commonStrings:t,valueFormat:s,axisIndex:a=0}=i,o=De(e,a,t);if(o!==void 0&&s!==void 0){let n={...o,valueFormat:s};Ve({config:e,axis:n,axisIndex:a})}},Ei=(i,e)=>i.axes?.[e]?.isLogarithmic??!1,Pi=i=>{let{config:e,isLogarithmic:t,axisIndex:s}=i,a=e.axes?.[s];a&&(a.isLogarithmic=t,F({config:e,value:null,axisIndex:s,isMax:!0}),F({config:e,value:null,axisIndex:s,isMax:!1}))},Xi=i=>{let{config:e,scrollbar:t,axisIndex:s}=i;e.axes?.[s]!==void 0&&(e.axes[s].scrollbar=t)},zi=i=>i.version,We=i=>i.title?.content.text??"",Ui=(i,e)=>{e.title!==void 0?e.title.content.text=i:e.title===void 0&&i!==void 0&&(e.title=q({text:i,visible:!0,font:B(S.ChartTitle)}))},Ki=i=>i.subtitle?.content.text??"",_i=(i,e)=>{e.subtitle!==void 0?e.subtitle.content.text=i:e.subtitle===void 0&&i!==void 0&&(e.subtitle=q({text:i,visible:!0,font:B(S.ChartSubtitle)}))},Ri=i=>i.footer?.content.text??"",Zi=(i,e)=>{e.footer!==void 0?e.footer.content.text=i:e.footer===void 0&&i!==void 0&&(e.footer=q({text:i,visible:!0,font:B(S.DescriptionText)}))},Ji=i=>i.title?i.title.visible??!0:!1,Qi=(i,e)=>{e.title!==void 0?e.title.visible=i:e.title===void 0&&(e.title=q({text:"",visible:i,font:B(S.ChartTitle)}))},Wi=i=>i.subtitle?i.subtitle.visible??!0:!1,Gi=(i,e)=>{e.subtitle!==void 0?e.subtitle.visible=i:e.subtitle===void 0&&(e.subtitle=q({text:"",visible:i,font:B(S.ChartSubtitle)}))},Ge=i=>i.footer?.visible??!1,Hi=(i,e)=>{e.footer!==void 0?e.footer.visible=i:e.footer===void 0&&i!==Ge(e)&&(e.footer=q({text:"",visible:!0,font:B(S.DescriptionText)}))},Yi=i=>i.chartRenderer,et=(i,e)=>{e.chartRenderer=i},it=(i,e)=>i.axes?.[e]?.title?.content,tt=i=>{let{config:e,axisIndex:t,symbol:s}=i,a=e.axes?.[t];if(a!==void 0){let o=a.title?.content.text;(a.title===void 0||s===void 0)&&(a.title=q({text:"",visible:!0,font:B(S.AxisTitle),type:S.AxisTitle})),s!==void 0&&(a.title.content=s),a.title.content.text=o}},st=i=>{for(let e of i.axes??[])if(e?.labels!==void 0)return e.labels.content},at=(i,e)=>{for(let t of e.axes??[])if(t!==void 0){let s=t.labels?.content.text;i===void 0?t.labels=q({text:"",visible:!0,font:B(S.AxisLabels),type:S.AxisLabels}):t.labels.content=V(i),t.labels.content.text=s}},ot=i=>{for(let e of i.axes??[])if(e?.lineSymbol!==void 0)return e.lineSymbol},nt=(i,e)=>{for(let t of e.axes??[])t!==void 0&&(t.lineSymbol=V(i)??me())},rt=i=>{for(let e of i.axes??[])if(e?.grid!==void 0)return e.grid},lt=(i,e,t)=>{let s=e.axes;t.forEach(a=>{s?.[a]!==void 0&&(s[a].grid=V(i))})},re=(i,e)=>e.axes?.[i]?.title?.content.text??"",ct=(i,e,t)=>{let s=t.axes?.[e];s?.title!==void 0?s.title.content.text=i:s!==void 0&&s?.title===void 0&&(s.title=q({text:i,visible:!0,font:B(S.AxisTitle)}))},gt=(i,e)=>e.axes?.[i]?.title?.visible??!1,dt=(i,e,t)=>{let s=t.axes?.[e];s?.title!==void 0?s.title.visible=i:s!==void 0&&s?.title===void 0&&(s.title=q({text:re(e,t),visible:i,font:B(S.AxisTitle)}))},yt=(i,e)=>i.axes?.[e]?.displayZeroLine??!1,ft=(i,e,t)=>{i.axes?.[t]!==void 0&&(i.axes[t].displayZeroLine=e)},ut=(i,e)=>i.axes?.[e]?.displayCursorTooltip??!1,mt=i=>{let{config:e,displayCursorTooltip:t,axisIndex:s}=i;e.axes?.[s]!==void 0&&(e.axes[s].displayCursorTooltip=t)},xt=(i,e)=>i.axes?.[e]?.buffer??!1,pt=i=>{let{config:e,buffer:t,axisIndex:s}=i,a=e.axes?.[s];a!==void 0&&(a.buffer=t)},bt=(i,e)=>i.axes?.[e]?.tickSpacing,Ft=i=>{let{config:e,tickSpacing:t,axisIndex:s}=i;e.axes?.[s]!==void 0&&(e.axes[s].tickSpacing=t)},vt=(i,e)=>i.axes?.[e]?.integerOnlyValues??!1,St=i=>{let{config:e,integerOnlyValues:t,axisIndex:s}=i;e.axes?.[s]!==void 0&&(e.axes[s].integerOnlyValues=t)},He=i=>{let e,t=i.series[0];return L(t)&&(e=t.temporalBinning?.size),e},Ye=i=>{let e,t=i.series[0];return L(t)&&(e=t.temporalBinning?.unit),e},ei=i=>{let e,t=i.series[0];return L(t)&&(e=t.temporalBinning?.timeAggregationType),e},ii=i=>{let e,t=i.series[0];return L(t)&&(e=t.temporalBinning?.trimIncompleteTimeInterval),e},ti=i=>{let e,t=i.series[0];return L(t)&&(e=t.temporalBinning?.nullPolicy),e},Ee=(i,e)=>{e?.series?.forEach(t=>{L(t)&&(t.temporalBinning??={},t.temporalBinning.size=i)}),F({config:e,value:null,axisIndex:1,isMax:!1}),F({config:e,value:null,axisIndex:1,isMax:!0})},si=(i,e)=>{e?.series?.forEach(t=>{L(t)&&(t.temporalBinning??={},t.temporalBinning.nullPolicy=i)}),F({config:e,value:null,axisIndex:1,isMax:!1}),F({config:e,value:null,axisIndex:1,isMax:!0})},It=(i,e)=>{e.series?.forEach(t=>{L(t)&&(t.temporalBinning??={},t.temporalBinning.unit=i)}),F({config:e,value:null,axisIndex:1,isMax:!1}),F({config:e,value:null,axisIndex:1,isMax:!0})},Tt=(i,e)=>{e.series?.forEach(t=>{L(t)&&(t.temporalBinning??={},t.temporalBinning.timeAggregationType=i)}),F({config:e,value:null,axisIndex:1,isMax:!1}),F({config:e,value:null,axisIndex:1,isMax:!0})},ht=(i,e)=>{e.series?.forEach(t=>{L(t)&&(t.temporalBinning??={},t.temporalBinning.trimIncompleteTimeInterval=i)}),F({config:e,value:null,axisIndex:1,isMax:!1}),F({config:e,value:null,axisIndex:1,isMax:!0})},At=i=>{Ee(0,i)};async function ai(i){let{config:e,layer:t,xAxisField:s,splitByField:a,layerFieldsInfo:o,aggregationFields:n,fetchNullValues:l}=i,r=o.filter(b=>b.name===a)[0]?.type,u=l!==!0?`${a} IS NOT NULL`:"",x=s&&l!==!0?`${s} IS NOT NULL`:"",{where:c}=e?.dataFilters??{},p={where:se([c,u,x]),orderByFields:Te(a)?[]:[`${a} ${$.Ascending}`],geometry:e?.dataFilters?.geometry},m=t,d="";n.length===0?d=m?.objectIdField??"":[d]=n;let y=await ne({queryObject:m,category:e?.series[0].x??"",splitByField:a,queryConfig:p});if(e){let b=e?.series.map(f=>_({where:f.query?.where})?.toString()??"").filter(f=>f!==void 0&&f!=="");y=he({arrayA:y,arrayB:b,getKey:f=>f===null?null:f?.toString()})}return{categoriesArray:y,splitByFieldType:r,numericalField:d}}function Bt(i,e){let t=e==="";for(let s of i)if(e===s.name){t=!0;break}return t}function qt(i,e){let t=Ne(i),s=e.length===0,a=0;for(let o of e){for(let n of t)if(o===n&&(a+=1),a===e.length){s=!0;break}if(s)break}return s}function Lt(i,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(s=>{Object.defineProperty(i.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s)||Object.create(null))})})}async function oi(i){let{layerInfo:e,config:t,category:s}=i,{layer:a}=e,{where:o}=t?.dataFilters??{},{fetchNullValues:n}=t?.series?.[0]?.query??{},l=n!==!0?`${s} IS NOT NULL`:"",r={where:se([o,l]),orderByFields:[],geometry:t?.dataFilters?.geometry},u=Z(a);return(await ne({queryObject:a,category:s,queryConfig:r})).map(x=>{let c=String(x);return J({fieldName:s,fieldValueToMatch:c,subtypeInfo:u,fieldList:e.layerFieldsInfo})??c})}var Nt=(i,e)=>e.series[i]?.id,Ct=(i,e)=>e.series.findIndex(t=>t.id===i),ni=i=>i.series.length??0,Mt=(i,e)=>e.series[i].visible??!0;function wt(i,e){let t;return i.length!==0&&e<i.length&&(t=i[e].dataTooltipValueFormat),t}function Ot(i){let{series:e,seriesIndex:t,valueFormat:s}=i;e.length!==0&&t<e.length&&(e[t].dataTooltipValueFormat=s)}function X(i){let{seriesIndex:e,xAxisField:t,aggregationType:s,config:a,layerInfo:o,commonStrings:n}=i,{objectIdField:l}=o??{},r,u=a.series[e??0],x=!1,c=!1;if(u===void 0){let d=a.series;x=d.slice(0,e).every(y=>I(y)),c=d.slice(0,e).every(y=>T(y))}else x=I(u),c=T(u);x?r=Fe({commonStrings:n,seriesIndex:e,objectIDField:l}):c?r=ve({commonStrings:n,seriesIndex:e,objectIDField:l}):r=Se({seriesIndex:e,objectIDField:l,commonStrings:n});let p=a.series[0]?.dataLabels,m={...r,x:t,y:"",dataLabels:{...r.dataLabels,type:r.dataLabels?.type??M.Text,content:{...r.dataLabels?.content,...p?.content,type:fe.TS},visible:p?.visible??!1}};if(m.query={groupByFieldsForStatistics:[t]},s!==v.NoAggregation&&l!==void 0){let d=`${s}_${l}_0`.toUpperCase();m.y=d,m.query.outStatistics=[{statisticType:s,onStatisticField:l,outStatisticFieldName:d}]}if(I(m)||T(m)||A(m)&&a.series[0]?.binTemporalData){let d;if(a?.series?.[0]!==void 0&&(d=R(a.series)),d!==P.BarAndLineNoAggregation&&d!==P.BarAndLineSplitByNoAggregation){let y=Ye(a);y===z.Quarter&&(y=z.Month),m.temporalBinning={size:He(a),unit:y,timeAggregationType:ei(a),trimIncompleteTimeInterval:ii(a),nullPolicy:ti(a)}}}return V(m)}function Pe(i,e,t){let{layerFieldsInfo:s,objectIdField:a}=e,o=D(i),n=le(i),l=ze(i),r=G(i),u=n.length===0||n.includes(a),x=te(l,t),c=u?"":n.map(g=>N(s??[],g)).join(", "),p=N(s??[],o),m=N(s??[],r),d=i.series.some(g=>A(g)),y=d?"category":"xAxisField",b=p,f="";if(oe({fieldName:o,numericFields:n,fieldList:s}))f=w(t.titleLabels.aggrTypeOfAggrFields,{aggregationType:x,aggregationFields:c});else if(l===v.NoAggregation){let g=u?a:c;if(r===""){let O=d?"aggrTypeCategory":"aggrTypeXAxisField";f=w(t.titleLabels[O],{aggregationType:g,[y]:b})}else{let O=d?"aggrTypeCategoryBySplitBy":"aggrTypeXAxisFieldBySplitBy";f=w(t.titleLabels[O],{aggregationType:g,[y]:b,splitByField:m})}}else if(l===v.Count)if(r===""){let g=d?"aggrTypeCategory":"aggrTypeXAxisField";f=w(t.titleLabels[g],{aggregationType:x,[y]:b})}else{let g=d?"aggrTypeCategoryBySplitBy":"aggrTypeXAxisFieldBySplitBy";f=w(t.titleLabels[g],{aggregationType:x,[y]:b,splitByField:m})}else if(r!==""){let g=d?"aggrTypeOfAggrFieldByCategoryBySplitByField":"aggrTypeOfAggrFieldByXAxisFieldBySplitByField";f=w(t.titleLabels[g],{aggregationType:x,aggregationField:c,[y]:b,splitByField:m})}else if(n.length>0){let g=d?"aggrTypeOfAggrFieldsByCategory":"aggrTypeOfAggrFieldsByXAxisField";f=w(t.titleLabels[g],{aggregationType:x,aggregationFields:c,[y]:b})}return f}var Xe=i=>_({where:i.query?.where,normalize:!1,escape:!1})??"",ze=i=>i?.series?.[0]?.query?.outStatistics?.[0]?.statisticType??v.NoAggregation,G=ee(i=>{let e=i?.series?.[0]?.query?.where?.split("=")[0].trim()??"";return Ae(i?.series?.[0]?.query?.where)?"":e},i=>i?.series?.[0]?.query?.where),le=ee(i=>{let e=[];if(G(i)==="")e=i?.series.map(t=>{let s=t.query?.outStatistics?.map(a=>a.onStatisticField)??[];return s?.length>0?s:t.y}).flat()??[];else{let t=i?.series?.[0],s=t?.query?.outStatistics?.[0]?.onStatisticField??[t?.y].flat()[0];e=s!==void 0?[s]:[]}return[...new Set(e.filter(t=>t!==""))]},i=>i?.series);function ri(i){let{numericFields:e,aggregationType:t,config:s,layerInfo:a}=i,o=!1;t===v.Count?o=!0:t===v.NoAggregation&&(o=e.every(r=>{let u=a.layerFieldsInfo.find(x=>x.name===r);return u!==void 0?ae(u):!1})),je(s,1,o);let n=s.series.some(r=>I(r)),l=s.series.some(r=>T(r));if(n||l){let r=D(s),u=a.layerFieldsInfo.find(c=>c.name===r),x=u!==void 0&&ae(u);je(s,0,x)}}var li=i=>{let e=j.xAxisAsc,t=i.orderOptions?.data?.orderType??k.Category,s=i.orderOptions?.data?.orderBy??$.Ascending;return t===k.Category&&Array.isArray(s)?e=j.customSort:t===k.Category?s===$.Ascending?e=j.xAxisAsc:e=j.xAxisDesc:s===$.Ascending?e=j.yAxisAsc:e=j.yAxisDesc,e};function ci(i){let{xAxisField:e,numericFields:t,aggregationType:s,config:a,layerInfo:o,commonStrings:n}=i,{layerFieldsInfo:l}=o,r=!1,u=X({config:a,xAxisField:e,aggregationType:s,layerInfo:o,seriesIndex:0,commonStrings:n}),x=W({config:a,xAxisField:e,numericFields:t,aggregationType:s,layer:o.layer,fieldList:l}).name,c={...u,id:`series_${Date.now()}`,name:n.axisLabels.values,x:E,y:x},p=[];for(let d of t)p.push({onStatisticField:d,outStatisticFieldName:`${d}_0`.toUpperCase(),statisticType:s});c.query={outStatistics:p};let m=a.series[0];return m!==void 0&&(c.id=m.id,a.colorMatch||(A(m)&&A(c)?c.fillSymbol=m.fillSymbol:(I(c)&&I(m)||T(c)&&T(m))&&(c.lineSymbol=m.lineSymbol,c.markerSymbol=m.markerSymbol),r=!0),c.id=m.id,m.name!==u.name&&(c.name=m.name)),a.series.length===1&&!a.colorMatch&&(A(c)?c.fillSymbol=a.series[0].fillSymbol:(I(c)||T(c))&&(c.lineSymbol=a.series[0].lineSymbol,c.markerSymbol=a.series[0].markerSymbol),r=!0),a.colorMatch=!r,[c]}function Ue(i){let{xAxisField:e,numericFields:t,aggregationType:s,config:a,layerInfo:o,commonStrings:n}=i,{layerFieldsInfo:l,objectIdField:r}=o,u=[],x=!1;for(let c=0;c<t.length;c+=1){let p=X({config:a,xAxisField:e,aggregationType:s,layerInfo:o,seriesIndex:c,commonStrings:n}),m=W({config:a,xAxisField:e,numericFields:t,aggregationType:s,layer:o.layer,numericFieldIndex:c,fieldList:l}).name,d=t[c],y={...p,query:{...p.query}};d!==r&&(y={...y,id:d,name:N(l,d)});let b=d;y.query!==void 0&&(s!==v.NoAggregation?(b=m,y.query.outStatistics=[{...p.query?.outStatistics?.[0]??{},onStatisticField:d,outStatisticFieldName:m,statisticType:s}]):delete y.query.outStatistics),y.y=b;let f=a.series.find(g=>g.query?.outStatistics?.[0]?.onStatisticField===d&&g.query.where===void 0);if(f!==void 0&&typeof f.y=="string"&&f.y.trim()!==""){a.colorMatch||(A(y)&&A(f)?y.fillSymbol=f.fillSymbol:(I(y)&&I(f)||T(y)&&T(f))&&(y.lineSymbol=f.lineSymbol,y.markerSymbol=f.markerSymbol),x=!0);let g=X({config:a,xAxisField:e,aggregationType:s,layerInfo:o,seriesIndex:c,commonStrings:n});y.id=f.id,f.id!==g.id&&f.name!==g.name&&(y.id=f.id,y.name=f.name)}u.push(y)}return a.series.length===1&&u.length===1&&!a.colorMatch&&(A(a.series[0])&&A(u[0])?u[0].fillSymbol=a.series[0].fillSymbol:(I(a.series[0])&&I(u[0])||T(a.series[0])&&T(u[0]))&&(u[0].lineSymbol=a.series[0].lineSymbol,u[0].markerSymbol=a.series[0].markerSymbol),x=!0),a.colorMatch=!x,u}async function gi(i){let{splitByField:e,xAxisField:t,numericFields:s,aggregationType:a,config:o,layerInfo:n,commonStrings:l}=i,{layer:r,layerFieldsInfo:u}=n,{fetchNullValues:x}=o?.series?.[0]?.query??{},c=t!==E?t:void 0,{categoriesArray:p,splitByFieldType:m,numericalField:d}=await ai({config:o,layer:r,layerFieldsInfo:u,xAxisField:c,aggregationFields:s,splitByField:e,fetchNullValues:x}),y=[],b=!1;if(p.length===0){y=Ue({xAxisField:t,numericFields:s,aggregationType:a,config:o,layerInfo:n,commonStrings:l});for(let f of y)f.query&&(f.query.where=`${e}=''`)}else for(let f=0;f<p.length;f+=1){let g=p[f],O=W({config:o,xAxisField:t,numericFields:s,aggregationType:a,layer:n.layer,seriesIndex:f,splitByField:e,fieldList:u}).name,H=X({config:o,xAxisField:t,aggregationType:a,layerInfo:n,seriesIndex:f,commonStrings:l}),Ke={fieldName:e,fieldValueToMatch:g??"",subtypeInfo:Z(n.layer),fieldList:n.layerFieldsInfo},_e=J(Ke),Y=`${g}`,h={...H,id:Y,name:_e??Y,y:O,query:{...H.query,where:`${e}=${m===ie.String&&g!==null?`'${g}'`:g}`,outStatistics:a!==v.NoAggregation?[{...H.query?.outStatistics?.[0]??{},onStatisticField:d,outStatisticFieldName:O,statisticType:a}]:void 0}};a===v.NoAggregation&&(h.query!==void 0&&(delete h.query.outStatistics,delete h.query.groupByFieldsForStatistics),h.y=d);let C=o.series.find(Re=>String(Xe(Re)).trim().replace(/'/gu,"")===Y);C!==void 0&&(o.colorMatch||(A(h)&&A(C)?h.fillSymbol=C.fillSymbol:(I(h)&&I(C)||T(h)&&T(C))&&(h.lineSymbol=C.lineSymbol,h.markerSymbol=C.markerSymbol),b=!0),h.id=C.id,h.name=C.name),y.push(h)}return o.colorMatch=!b,y}var jt=async i=>{let{xAxisField:e,splitByField:t,numericFields:s,aggregationType:a,config:o,layerInfo:n,commonStrings:l}=i,{layerFieldsInfo:r}=n??{},u=ni(o),x=D(o),c=di(o,n,l),p=yi(o,n,l),m=fi(o,n),d=$e(o),y=o.series.some(g=>A(g)),b=Ce(o.series),f=Me(o.series);if(r!==void 0){let g=Le(r);!g.includes(x)&&g.includes(e)?d=xe():g.includes(x)&&!g.includes(e)&&(y?d=K():d=pe()),r.find(O=>O.name===e)?.type===ie.String&&(d=K()),d!==void 0&&Ze(o,l,d)}if(u===0&&(o.series=[X({config:o,xAxisField:e,aggregationType:a,layerInfo:n,commonStrings:l})]),o.series.forEach(g=>{g.x=e,g.query!==void 0&&(g.query.groupByFieldsForStatistics=[e])}),t===""||s.length>1?oe({fieldName:e,numericFields:s,fieldList:r})?o.series=ci({config:o,layerInfo:n,xAxisField:e,numericFields:s,aggregationType:a,commonStrings:l}):o.series=Ue({config:o,layerInfo:n,xAxisField:e,numericFields:s,aggregationType:a,commonStrings:l}):(await Promise.resolve(),o.series=await gi({config:o,layerInfo:n,splitByField:t,xAxisField:e,numericFields:s,aggregationType:a,commonStrings:l})),m){let g=N(r,e);Oe(o,0,g)}if(p){let g=ke({config:o,layerInfo:n,commonStrings:l,numericFields:s,aggregationType:a});Oe(o,1,g)}if(o.title&&c&&(o.title.content.text=Pe(o,n,l)),F({config:o,value:null,axisIndex:1,isMax:!1}),F({config:o,value:null,axisIndex:1,isMax:!0}),ri({numericFields:s,aggregationType:a,config:o,layerInfo:n}),b||f){F({config:o,value:null,axisIndex:0,isMax:!1}),F({config:o,value:null,axisIndex:0,isMax:!0}),Ee(0,o);let g=d?.type===M.DateAxisFormat?U.Null:U.Interpolate;si(g,o)}},kt=i=>{let{config:e,seriesIndex:t,layerInfo:s,commonStrings:a}=i,o=e.series?.[t],n=G(e),l;if(R(e.series)===P.BarAndLineFromFields)l=a.axisLabels.values;else if(ce(n)){let r=o.query?.outStatistics?.[0]?.onStatisticField;r!==void 0&&r!==s.objectIdField&&(l=N(s.layerFieldsInfo,r))}else{let r=String(Xe(o)).trim().replace(/'/gu,""),u={fieldName:G(e),fieldValueToMatch:r??"",subtypeInfo:Z(s.layer),fieldList:s.layerFieldsInfo};l=J(u)??r}return l??o.id},Dt=(i,e)=>{e.orderOptions??={};let t=e.orderOptions?.data?.orderType;li(e)===j.customSort&&t===k.Category&&(e.orderOptions.data={orderType:k.Category,orderBy:[...i]})},Vt=async(i,e)=>{let t=D(i),s=$e(i)?.type,a=le(i),o=R(i.series),n=[];return s===M.CategoryAxisFormat&&(o===P.BarAndLineFromFields||t===E?n=a.map(l=>N(e?.layerFieldsInfo,l)):t.trim()!==""&&t!==E&&e!==void 0&&(n=await oi({layerInfo:e,config:i,category:t}))),n};function di(i,e,t){let s=Pe(i,e,t),a=We(i),o=Q(i);return s===a||o}function yi(i,e,t){let s=ke({config:i,layerInfo:e,commonStrings:t,numericFields:le(i),aggregationType:ze(i)}),a=re(1,i),o=Q(i);return s===a||o}function fi(i,e){let t=N(e.layerFieldsInfo,D(i)),s=re(0,i),a=Q(i);return t===s||a}function $t(i){return i.series[0]?.binTemporalData??!1}function Et(i,e){e?.series.forEach(t=>{(t?.type===M.BarSeries||t?.type===M.LineSeries)&&(t.binTemporalData=i,i?t.temporalBinning={unit:z.Day,size:0,timeAggregationType:de.Start,trimIncompleteTimeInterval:!0,nullPolicy:U.Null}:delete t.temporalBinning)})}var Pt=(i,e)=>{e.series.forEach(t=>{t.query&&(t.query.fetchNullValues=i)})},Xt=i=>i.series.some(e=>e.query?.fetchNullValues),zt=i=>i.series.map(e=>String(_({where:e.query?.where}))).filter(e=>e!==void 0&&e.trim()!==""),Ut=i=>i.dataFilters,Kt=(i,e)=>{i!==void 0?e.dataFilters=i:delete e.dataFilters};return{a:ne,b:Oe,c:ke,d:ji,e:F,f:ki,g:$e,h:Ze,i:je,j:Di,k:Vi,l:$i,m:Ei,n:Pi,o:Xi,p:zi,q:We,r:Ui,s:Ki,t:_i,u:Ri,v:Zi,w:Ji,x:Qi,y:Wi,z:Gi,A:Ge,B:Hi,C:Yi,D:et,E:it,F:tt,G:st,H:at,I:ot,J:nt,K:rt,L:lt,M:re,N:ct,O:gt,P:dt,Q:yt,R:ft,S:ut,T:mt,U:xt,V:pt,W:bt,X:Ft,Y:vt,Z:St,_:He,$:Ye,aa:ei,ba:ii,ca:ti,da:Ee,ea:si,fa:It,ga:Tt,ha:ht,ia:At,ja:ai,ka:Bt,la:qt,ma:Lt,na:oi,oa:Nt,pa:Ct,qa:ni,ra:Mt,sa:wt,ta:Ot,ua:Pe,va:ze,wa:G,xa:le,ya:li,za:jt,Aa:kt,Ba:Dt,Ca:Vt,Da:$t,Ea:Et,Fa:Pt,Ga:Xt,Ha:zt,Ia:Ut,Ja:Kt}},"intl","geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request",a,b)