/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import{a as p}from"./RHPUTTSM.js";import{a as I,b as w}from"./VZXOTDOW.js";import d from"./MSRS6EXP.js";import"./TLMHEFBH.js";import{a as m}from"./BMZ5OG4J.js";import b from"./TNMDYW24.js";import a from"./GUWCFIQ4.js";import{g as c}from"./MHMLEVRX.js";import"./DXCHSVBP.js";import"./5BG7WW2E.js";import{a as l}from"./2YIVYDK5.js";import{A as o,D as v,F as C,g as f,h as n,w as h,x as r,y as N}from"./GRWAOK3Y.js";import"./UUMP6K6L.js";export default $arcgis.t(([,,{a:g,f:M,g:x,h:B,i:i}])=>{var d={linkContainer:"link-container",label:"label",mb2:"mb-2"},E=f`.hide{display:none}.am5-modal{width:100%;height:100%;position:absolute;z-index:100000;top:0;left:0}.am5-modal-curtain{top:0;left:0;width:100%;height:100%;position:absolute;background:#fff!important;z-index:100}.am5-modal-wrapper{top:0;left:0;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;white-space:nowrap;background:#ffffff80;z-index:101}.am5-modal-content{display:inline-block;padding:1.2em;vertical-align:middle;text-align:start;white-space:normal;background:#fff;border-radius:4px;box-shadow:#00000073 0 0 36px;color:#000}.am5-layer-1000{z-index:1000!important}.am5-layer-30{z-index:100!important}.arcgis-charts-modal{box-shadow:none!important}.arcgis-charts-modal-header{background-color:#0000000d;font-weight:700;padding:4px;align-content:center}.show{display:block}.notifyPanel{flex:0 1 auto}.disable-interactions{pointer-events:none}.dim-text{color:var(--arcgis-charts-dim-text)}calcite-block{width:var(--arcgis-charts-config-calcite-block-width, var(--arcgis-charts-config-calcite-block-default-width));height:var(--arcgis-charts-config-calcite-block-height, var(--arcgis-charts-config-calcite-block-default-height));border:0px;-webkit-box-shadow:0 0 0 0;box-shadow:0 0}.text{display:flex;margin-left:var(--arcgis-charts-config-margin-minor);width:calc(100% - 1.5rem);height:2rem;margin-bottom:var(--arcgis-charts-config-margin-minor)}.label{display:flex;justify-content:space-between}.mb-2{margin-bottom:var(--arcgis-charts-config-margin-minor)}.link-container{display:flex;justify-content:flex-end;margin-top:-.75rem}`,b=class extends N{constructor(){super(...arguments),this._messages=m(),this.commonStrings=m({name:"common",blocking:!0}),this.axisModel=new p,this.minBoundInputElement=h(),this.maxBoundInputElement=h(),this.showLogScaleSwitch=h(),this.defaultMinBound=Number.NaN,this.defaultMaxBound=Number.NaN,this.onMaxBoundsChange=async()=>{let e=this.maxBoundInputElement.value?.value,t=this.maxBoundInputElement.value?.status;if(e!==void 0&&e!==""){let s=this.maxBoundInputElement.value?.min===void 0?this.axisModel.getMinBound():Math.max(this.maxBoundInputElement.value.min,this.axisModel.getMinBound()),a=Number.parseFloat(e);if(a!==this.axisModel.getMinBound()&&M(a,s,this.maxBoundInputElement.value?.max)){if(a!==this.axisModel.getMaxBound()){this.axisModel.setMaxBound(a);let u=this.getAxisBoundsFromStateStore();u&&(u.currMaxBound=a)}t=i.IDLE}else t=i.INVALID}else t=i.IDLE;this.maxBoundInputElement.value&&B({inputElement:this.maxBoundInputElement.value,status:t}),t!==i.INVALID&&this.minBoundInputElement.value?.status===i.INVALID&&await this.onMinBoundsChange(),this.requestUpdate()},this.onMaxBoundsChangeDebounced=c(this.onMaxBoundsChange,g.DebounceTimer),this.onMinBoundsChange=async()=>{let e=this.minBoundInputElement.value?.value,t=this.minBoundInputElement.value?.status;if(e!==void 0&&e!==""){let s=this.minBoundInputElement.value?.max===void 0?this.axisModel.getMaxBound():Math.min(this.minBoundInputElement.value.max,this.axisModel.getMaxBound()),a=Number.parseFloat(e);if(a!==this.axisModel.getMaxBound()&&M(a,this.minBoundInputElement.value?.min,s)){if(a!==this.axisModel.getMinBound()){this.axisModel.setMinBound(a);let u=this.getAxisBoundsFromStateStore();u&&(u.currMinBound=a)}t=i.IDLE}else t=i.INVALID}else t=i.IDLE;this.minBoundInputElement.value&&B({inputElement:this.minBoundInputElement.value,status:t}),t!==i.INVALID&&this.maxBoundInputElement.value?.status===i.INVALID&&await this.onMaxBoundsChange(),await this.updateEnableLogarithmic(this.axisModel.getLogarithmic()&&(this.dataMinValue??Number.NaN)>0),this.requestUpdate()},this.onMinBoundsChangeDebounced=c(this.onMinBoundsChange,g.DebounceTimer),this.onModelConfigChange=()=>{this.requestUpdate()},this.disableMaxBoundResetBtn=!0,this.disableMinBoundResetBtn=!0,this.isXAxis=!1,this.axisTitle=""}static{this.properties={disableMaxBoundResetBtn:16,disableMinBoundResetBtn:16,messageOverrides:0,model:0,isXAxis:5,axisTitle:1,maxBoundMaxLimit:9,maxBoundMinLimit:9,minBoundMinLimit:9,minBoundMaxLimit:9,showMaxBoundOption:5,showMinBoundOption:5,showEnableLogOption:5,dataMaxValue:9,dataMinValue:9,initialMaxBound:9,initialMinBound:9}}static{this.styles=E}load(){this.modelChange(this.model),this.dataMinValue!==void 0&&this.dataMinValueChange(this.dataMinValue,Number.NaN),this.dataMaxValue!==void 0&&this.dataMaxValueChange(this.dataMaxValue,Number.NaN)}willUpdate(e){e.has("model")&&this.modelChange(this.model,e.get("model")),e.has("dataMinValue")&&this.dataMinValueChange(this.dataMinValue??Number.NaN,e.get("dataMinValue")),e.has("dataMaxValue")&&this.dataMaxValueChange(this.dataMaxValue??Number.NaN,e.get("dataMaxValue")),e.has("initialMaxBound")&&this.initialMaxBoundChange(),e.has("initialMinBound")&&this.initialMinBoundChange()}updated(){this.disableResetButtons()}disconnectedCallback(){super.disconnectedCallback(),this.model.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}modelChange(e,t){this.axisModel=new p(this.model,this.isXAxis),t?.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange),e?.addEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}dataMinValueChange(e,t){Number.isNaN(t)&&!Number.isNaN(e)&&(this.defaultMinBound=e)}dataMaxValueChange(e,t){Number.isNaN(t)&&!Number.isNaN(e)&&(this.defaultMaxBound=e)}initialMaxBoundChange(){Number.isNaN(this.axisModel.getMaxBound())||this.axisModel.setMaxBound(this.axisModel.getMaxBound())}initialMinBoundChange(){Number.isNaN(this.axisModel.getMinBound())||this.axisModel.setMinBound(this.axisModel.getMinBound())}getAxisBoundsFromStateStore(){let e,t=I.chartAxesBoundDataMap,s=this.model.chartId;if(s){let a=w({chartId:s,isXAxis:this.isXAxis,isLogarithmic:this.axisModel.getLogarithmic()});e=t[s]?.[a]}return e}disableResetButtons(){let e=this.getAxisBoundsFromStateStore();e&&(this.disableMaxBoundResetBtn=e.defaultMaxBound===e.currMaxBound,this.disableMinBoundResetBtn=e.defaultMinBound===e.currMinBound)}async onShowLogScaleMouseEnter(){this.showLogScaleTooltip?.remove(),this.showLogScaleSwitch.value?.disabled&&(this.showLogScaleTooltip=v(n`<calcite-tooltip .referenceElement=${this.showLogScaleSwitch.value??document.body} open>${this.commonStrings.utilsStrings.tooltips?.logDisabled??""}</calcite-tooltip>`),document.body.appendChild(this.showLogScaleTooltip))}onShowLogScaleMouseLeave(){this.showLogScaleTooltip?.remove()}async onCategoryFormatChange(e){this.axisModel.setValueFormat(e.target.categoryFormat)}async updateEnableLogarithmic(e){e!==this.axisModel.getLogarithmic()&&(this.axisModel.setLogarithmic(e),this.requestUpdate())}async onNumberFormatChange(e){this.axisModel.setValueFormat({type:l.NumberAxisFormat,intlOptions:e.detail}),this.requestUpdate()}async onRevertMaxBoundsToDefault(){if(this.maxBoundInputElement.value?.status===i.INVALID||this.axisModel.getMaxBound()!==this.defaultMaxBound){let e=this.getAxisBoundsFromStateStore();this.axisModel.getMinBound()>this.defaultMaxBound&&this.axisModel.setMinBound(e?.defaultMinBound??Number.NaN),this.axisModel.setMaxBound(e?.defaultMaxBound??Number.NaN),this.requestUpdate()}}async onRevertMinBoundsToDefault(){(this.minBoundInputElement.value?.status===i.INVALID||this.axisModel.getMinBound()!==this.defaultMinBound)&&(this.axisModel.getMaxBound()<this.defaultMinBound&&this.axisModel.setMaxBound(Number.NaN),this.axisModel.setMinBound(Number.NaN),this.requestUpdate())}async enableLogScale(e){let{checked:t}=e.target;this.axisModel.setLogarithmic(t&&(this.dataMinValue??Number.NaN)>0),this.requestUpdate()}render(){return n`<div><calcite-block .hidden=${this.axisModel.getValueFormat()?.type===l.DateAxisFormat} open .heading=${this.axisTitle}>${this.renderAxis()}</calcite-block></div>`}renderAxis(){let e=null,t={...this.axisModel.getValueFormat()};switch(this.axisModel.getValueFormat()?.type){case l.CategoryAxisFormat:e=n`<arcgis-charts-config-category-format .categoryFormat=${t} @arcgisChartsConfigCategoryFormatChange=${this.onCategoryFormatChange}></arcgis-charts-config-category-format>`;break;case l.NumberAxisFormat:e=n`<div>${this.renderShowLogScale()}${this.renderMinBound()}${this.renderMaxBound()}<arcgis-charts-config-number-format .numberFormat=${{...t.intlOptions}} @arcgisChartsConfigNumberFormatChange=${this.onNumberFormatChange}></arcgis-charts-config-number-format></div>`;break;case l.DateAxisFormat:e=null;break}return e}renderMaxBound(){let e;if(!this.showMaxBoundOption)e=null;else{let t=x(this.axisModel.getMaxBound(),this.initialMaxBound);e=n`<div><calcite-label class=${o(d.label)}>${this._messages.maxBounds}<calcite-input type=number number-button-type=none .min=${this.maxBoundMinLimit??Number.MIN_SAFE_INTEGER} .max=${this.maxBoundMaxLimit??Number.MAX_SAFE_INTEGER} step=any .value=${t} @calciteInputInput=${this.onMaxBoundsChangeDebounced} ${r(this.maxBoundInputElement)}></calcite-input></calcite-label><div class=${o(d.linkContainer)}><calcite-button .disabled=${this.disableMaxBoundResetBtn} @click=${this.onRevertMaxBoundsToDefault} appearance=transparent icon-end=reset>${this._messages.revertToDefault}</calcite-button></div></div>`}return e}renderMinBound(){let e;if(!this.showMinBoundOption)e=null;else{let t=x(this.axisModel.getMinBound(),this.initialMinBound??void 0);e=n`<div><calcite-label class=${o(d.label)}>${this._messages.minBounds}<calcite-input type=number number-button-type=none .min=${this.minBoundMinLimit??Number.MIN_SAFE_INTEGER} .max=${this.minBoundMaxLimit??Number.MAX_SAFE_INTEGER} step=any .value=${t} @calciteInputInput=${this.onMinBoundsChangeDebounced} ${r(this.minBoundInputElement)}></calcite-input></calcite-label><div class=${o(d.linkContainer)}><calcite-button .disabled=${this.disableMinBoundResetBtn} appearance=transparent icon-end=reset @click=${this.onRevertMinBoundsToDefault}>${this._messages.revertToDefault}</calcite-button></div></div>`}return e}renderShowLogScale(){let e;return this.showEnableLogOption&&(e=n`<calcite-label layout=inline-space-between class=${o({[d.label]:!0,[d.mb2]:!0})}>${this._messages.logScale}<div @mouseenter=${this.onShowLogScaleMouseEnter} @mouseleave=${this.onShowLogScaleMouseLeave}><calcite-switch .checked=${this.axisModel.getLogarithmic()&&(this.dataMinValue??Number.NaN)>0} .disabled=${(this.dataMinValue??Number.NaN)<=0} @calciteSwitchChange=${this.enableLogScale} ${r(this.showLogScaleSwitch)}></calcite-switch></div></calcite-label>`),e}};C("arcgis-charts-config-axis",b);return b},a,b,d)