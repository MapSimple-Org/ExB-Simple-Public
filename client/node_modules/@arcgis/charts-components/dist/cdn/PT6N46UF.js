/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import i from"./XWFCGUDT.js";import h from"./6KL5YQAS.js";import g from"./XCUGMEPO.js";import f from"./NQ2FR6A4.js";import e from"./MJVNOHMT.js";import d from"./CDJV5WUJ.js";import"./UM26TKF2.js";import b from"./GUWCFIQ4.js";import{f as F,w as a}from"./MHMLEVRX.js";import"./DXCHSVBP.js";import{d as c,e as o}from"./5BG7WW2E.js";import{a as n}from"./2YIVYDK5.js";import"./GRWAOK3Y.js";import"./UUMP6K6L.js";export default $arcgis.t(([,,,,,,,,{A:h,Dc:A,Ha:l,O:m,R:g,fa:f,ha:b,oa:L,ob:u},,{la:I,ma:p,na:w},,{a:U},{a:P,b:y,c:x,d:V},{a:S,b:D,c:T,d:N,e:G,f:k,g:M,h:B,i:z,j:_,k:O}])=>{var H=i=>i.legend?.displayNumericValue??!1,J=(i,e)=>{e.series[0]?.type===n.PieSeries&&(e.legend===void 0&&(e.legend=g()),e.legend.displayNumericValue=i)},Q=i=>i.legend?.displayPercentage??!1,X=(i,e)=>{e.series[0]?.type===n.PieSeries&&(e.legend===void 0&&(e.legend=g()),e.legend.displayPercentage=i)},Y=i=>i.legend?.labelMaxWidth??200,Z=(i,e)=>{e.series[0]?.type===n.PieSeries&&(e.legend===void 0&&(e.legend=g()),e.legend.labelMaxWidth=i)},d=class extends y{getDisplayNumericValue(){return H(this._config)}setDisplayNumericValue(e){J(e,this._config),this.emitConfigUpdate("setDisplayNumericValue")}getDisplayPercentage(){return Q(this._config)}setDisplayPercentage(e){X(e,this._config),this.emitConfigUpdate("setDisplayPercentage")}getLabelMaxWidth(){return Y(this._config)}setLabelMaxWidth(e){Z(e,this._config),this.emitConfigUpdate("setLabelMaxWidth")}};p(d,[y]);var $=i=>i.series?.[0]?.innerRadius,ee=(i,e)=>{e.series?.[0]&&(e.series[0].innerRadius=i)},ie=i=>i.series?.[0]?.dataLabelsCharacterLimit,te=(i,e)=>{e.series?.[0]&&(e.series[0].dataLabelsCharacterLimit=i)},E=i=>i.series[0]?.startAngle,se=(i,e)=>{e.series?.[0]&&(e.series[0].startAngle=i)},re=(i,e)=>{e.series?.[0]&&(e.series[0].endAngle=i)},oe=i=>i.series?.[0]?.displayCategoryOnTooltip??!0,ne=i=>i.series?.[0]?.displayNumericValueOnTooltip??!0,ae=i=>i.series?.[0]?.displayPercentageOnTooltip??!0,ge=(i,e)=>{e.series[0]&&(e.series[0].displayPercentageOnTooltip=i)},le=i=>i.series?.[0]?.valuePrefix,ce=(i,e)=>{e.series?.[0]&&(e.series[0].valuePrefix=i)},de=i=>i.series?.[0]?.valueSuffix,he=(i,e)=>{e.series?.[0]&&(e.series[0].valueSuffix=i)},me=i=>i.series?.[0]?.percentagePrefix,fe=(i,e)=>{e.series?.[0]&&(e.series[0].percentagePrefix=i)},ue=i=>i.series?.[0]?.percentageSuffix,pe=(i,e)=>{e.series?.[0]&&(e.series[0].percentageSuffix=i)},ye=i=>{let e,t=i.series?.[0];return t?.displayNumericValueOnDataLabel===!0&&t?.displayPercentageOnDataLabel===!0?e=o.Both:t?.displayNumericValueOnDataLabel===!0?e=o.Value:e=o.Percentage,e},Se=(i,e)=>{let t=i===o.Value||i===o.Both,s=i===o.Percentage||i===o.Both;e.series?.[0]&&(e.series[0].displayNumericValueOnDataLabel=t,e.series[0].displayPercentageOnDataLabel=s),e.legend&&(e.legend={...e.legend,displayNumericValue:t,displayPercentage:s})},_e=i=>i.series?.[0]?.alignDataLabels??!1,Oe=(i,e)=>{e.series[0]&&(e.series[0].alignDataLabels=i)},ve=i=>i.series?.[0]?.dataLabelsInside??!1,Ce=(i,e)=>{e.series[0]&&(e.series[0].dataLabelsInside=i)},Fe=i=>i.series?.[0]?.dataLabelsOffset??10,be=(i,e)=>{e.series[0]&&(e.series[0].dataLabelsOffset=i)},Le=i=>i.series?.[0]?.numericValueFormat?.intlOptions?.minimumFractionDigits,Ae=(i,e)=>{e.series?.[0]&&(e.series[0].numericValueFormat??=m(),e.series[0].numericValueFormat.intlOptions.minimumFractionDigits=i,e.series[0].numericValueFormat.intlOptions.maximumFractionDigits=i,e.series[0].percentValueFormat??=m(),e.series[0].percentValueFormat.intlOptions.minimumFractionDigits=i,e.series[0].percentValueFormat.intlOptions.maximumFractionDigits=i)},Ie=i=>i.series?.[0]?.optimizeDataLabelsOverlapping??!1,we=(i,e)=>{e.series[0]&&(e.series[0].optimizeDataLabelsOverlapping=i)},Ue=i=>i.series[0]?.ticks?.visible??!1,Pe=(i,e)=>{e.series?.[0]&&(e.series[0].ticks??=f(),e.series[0].ticks.visible=i)},xe=i=>i.series[0]?.ticks?.lineSymbol,Ve=(i,e)=>{i&&e.series?.[0]&&(e.series[0].ticks??=f(),e.series[0].ticks.lineSymbol=F(i))},De=(i,e)=>e.series?.[0]?.slices?.[i]?.originalLabel,Te=(i,e)=>e.series?.[0]?.slices?.[i]?.label,Ne=(i,e,t)=>{t.series?.[0]?.slices?.[e]&&(t.series[0].slices[e].label=i)},Ge=(i,e)=>e.series?.[0]?.slices?.[i]?.fillSymbol?.color,ke=(i,e,t)=>{let s=t.series?.[0]?.slices?.[e]?.fillSymbol;s!==void 0?(s.color=i,s.outline!==void 0?s.outline.color=i:s.outline={type:a.SLS,color:i}):t.series?.[0]?.slices?.[e]!==void 0&&(t.series[0].slices[e].fillSymbol={type:a.SFS,color:i,outline:{type:a.SLS,color:i}})},Me=i=>i.series?.[0]?.slices?.map(e=>e.sliceId),R=(i,e)=>{e.series?.[0]?.slices?.sort((t,s)=>i.findIndex(r=>t.sliceId===r)-i.findIndex(r=>s.sliceId===r))},Be=i=>i.series?.[0]?.sliceGrouping,W=(i,e)=>{e.series?.[0]&&(e.series[0].sliceGrouping=i)},K=i=>i.series?.[0]?.sliceGrouping?.percentageThreshold,ze=(i,e)=>{e.series?.[0]?.sliceGrouping!==void 0?e.series[0].sliceGrouping.percentageThreshold=i:e.series[0].sliceGrouping={sliceId:h.defaultGroupOfSlicesId,percentageThreshold:i}},Ee=i=>i.series?.[0]?.slices,j=(i,e)=>{e.series?.[0]&&(e.series[0].slices=i)},Re=i=>{j(void 0,i),W({sliceId:h.defaultGroupOfSlicesId,percentageThreshold:K(i)??0},i)},We=(i,e)=>e.series[0]?.slices?.[i]?.sliceId,Ke=(i,e)=>e.series[0]?.slices?.findIndex(t=>t.sliceId===i),je=i=>i.series[0]?.slices?.length??0,v=class extends U{constructor(){super(...arguments),this._chartType=n.PieSeries,this._mode=c.Category,this._groupedSliceIds=[]}async setup(e){await this.loadConfigFromLayer(e);let{config:t}=e;if(t!==void 0){let s=u(t.series);this._mode=s!==l.PieFromFields?c.Category:c.Fields}typeof this.resolveSetup=="function"&&this.resolveSetup()}get category(){return S(this._config)}set category(e){this.guardSetterFromAsyncOverwrite(()=>{(!A(this._config)||e.trim()!=="")&&(M({newCategory:e,config:this._config,layerInfo:this.layerInfo,commonStrings:this.commonStrings,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("category"))})}get numericFields(){return T(this._config)}set numericFields(e){this.guardSetterFromAsyncOverwrite(()=>{typeof e=="string"&&(e=[e]),this.layerInfo===void 0||I(this.layerInfo.layerFieldsInfo,e)?(z({newNumericFields:e,config:this._config,layerInfo:this.layerInfo,commonStrings:this.commonStrings,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("numericFields")):console.log("Invalid numericFields")})}get aggregationType(){return N(this._config,this._mode)}set aggregationType(e){this.guardSetterFromAsyncOverwrite(()=>{B({newAggregationType:e,config:this._config,layerInfo:this.layerInfo,commonStrings:this.commonStrings,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("aggregationType")})}getSortOrder(){return D(this._config,this._mode)}setSortOrder(e,t){k({newSortOrderKind:e,config:this._config,orderByList:t}),this.emitConfigUpdate("setSortOrder")}get orderByList(){return _(this._config,this._mode)}set orderByList(e){this.guardSetterFromAsyncOverwrite(()=>{O({values:e,config:this._config,mode:this._mode}),this.emitConfigUpdate("orderByList")})}get mode(){return this._mode}set mode(e){this._mode=e,this.emitConfigUpdate("mode")}async getCustomSortValues(){let e=S(this._config),t=u(this._config.series),s=[];return t===l.PieFromFields?s=this.numericFields:e.trim()!==""&&t===l.PieFromCategory&&(s=await w({category:e,config:this._config,layerInfo:this.layerInfo})),s}moveCustomSortValuesInOrderByList(e,t){this.guardSetterFromAsyncOverwrite(()=>{let s=_(this._config,this._mode),[r]=s.splice(e,1);s.splice(t,0,r),O({values:s,config:this._config,mode:this._mode}),this.emitConfigUpdate("moveCustomSortValuesInOrderByList")})}get ticksSymbol(){return xe(this._config)}set ticksSymbol(e){this.guardSetterFromAsyncOverwrite(()=>{Ve(e,this._config),this.emitConfigUpdate("ticksSymbol")})}get slices(){return Ee(this._config)}set slices(e){this.guardSetterFromAsyncOverwrite(()=>{j(e,this._config),this.emitConfigUpdate("slices")})}get groupedSliceIds(){return this._groupedSliceIds}set groupedSliceIds(e){this._groupedSliceIds=e,this.emitConfigUpdate("groupedSliceIds")}get sliceGrouping(){return Be(this._config)}set sliceGrouping(e){this.guardSetterFromAsyncOverwrite(()=>{W(e,this._config),this.emitConfigUpdate("sliceGrouping")})}get innerRadiusSize(){return $(this._config)??0}set innerRadiusSize(e){this.guardSetterFromAsyncOverwrite(()=>{ee(e,this._config),this.emitConfigUpdate("innerRadiusSize")})}get groupingThreshold(){return K(this._config)??0}set groupingThreshold(e){this.guardSetterFromAsyncOverwrite(()=>{ze(e,this._config),this.emitConfigUpdate("groupingThreshold")})}get labelCharacterLimit(){return ie(this._config)??null}set labelCharacterLimit(e){this.guardSetterFromAsyncOverwrite(()=>{te(e,this._config),this.emitConfigUpdate("labelCharacterLimit")})}get decimalPlaces(){return Le(this._config)??1}set decimalPlaces(e){this.guardSetterFromAsyncOverwrite(()=>{Ae(e,this._config),this.emitConfigUpdate("decimalPlaces")})}get displayType(){return ye(this._config)}set displayType(e){this.guardSetterFromAsyncOverwrite(()=>{Se(e,this._config),this.emitConfigUpdate("displayType")})}generateDefaultConfig(){let e=L(this.commonStrings);return e.series=[b(this.commonStrings,this.layerInfo?.objectIdField)],e}getOriginalSliceName(e){return De(e,this._config)}getSliceName(e){return Te(e,this._config)}setSliceName(e,t){this.guardSetterFromAsyncOverwrite(()=>{Ne(e,t,this._config),this.emitConfigUpdate("setSliceName")})}getSliceColor(e){return Ge(e,this._config)}setSliceColor(e,t){this.guardSetterFromAsyncOverwrite(()=>{ke(e,t,this._config),this.emitConfigUpdate("setSliceColor")})}get orderOfSlices(){return Me(this._config)}set orderOfSlices(e){e!==void 0&&this.guardSetterFromAsyncOverwrite(()=>{R(e,this._config),this.emitConfigUpdate("orderOfSlices")})}moveSeries(e,t){this.guardSetterFromAsyncOverwrite(()=>{let s=this.orderOfSlices;if(s!==void 0){let[r]=s.splice(e,1);s.splice(t,0,r),R(s,this._config),this.emitConfigUpdate("moveSeries")}})}getSliceId(e){return We(e,this._config)}getSliceIndex(e){return Ke(e,this._config)}getSlicesLength(){return je(this._config)}resetSlices(){this.guardSetterFromAsyncOverwrite(()=>{Re(this._config),this.emitConfigUpdate("resetSlices")})}resetAvailable(){let e=!this.colorMatch,t=!1,s=this.slices?.length??0;for(let r=0;r<s;r+=1){let C=this.getOriginalSliceName(r),q=this.getSliceName(r);if(C!==void 0&&C?.toString()!==q?.toString()){t=!0;break}}return this.sliceGrouping?.originalLabel!==void 0&&this.sliceGrouping?.label!==this.sliceGrouping.originalLabel&&(t=!0),e||t}get ticksVisibility(){return Ue(this._config)}set ticksVisibility(e){this.guardSetterFromAsyncOverwrite(()=>{Pe(e,this._config),this.emitConfigUpdate("ticksVisibility")})}get startAngle(){return E(this._config)}set startAngle(e){this.guardSetterFromAsyncOverwrite(()=>{se(e,this._config),this.emitConfigUpdate("startAngle")})}get endAngle(){return E(this._config)}set endAngle(e){this.guardSetterFromAsyncOverwrite(()=>{re(e,this._config),this.emitConfigUpdate("endAngle")})}get displayCategoryValueOnTooltip(){return oe(this._config)}set displayCategoryValueOnTooltip(e){this.guardSetterFromAsyncOverwrite(()=>{this._config.series[0].displayCategoryOnTooltip=e,this.emitConfigUpdate("displayCategoryValueOnTooltip")})}get displayNumericValueOnTooltip(){return ne(this._config)}set displayNumericValueOnTooltip(e){this.guardSetterFromAsyncOverwrite(()=>{this._config.series[0].displayNumericValueOnTooltip=e,this.emitConfigUpdate("displayNumericValueOnTooltip")})}get displayPercentageOnTooltip(){return ae(this._config)}set displayPercentageOnTooltip(e){this.guardSetterFromAsyncOverwrite(()=>{ge(e,this._config),this.emitConfigUpdate("displayPercentageOnTooltip")})}get valuePrefix(){return le(this._config)}set valuePrefix(e){this.guardSetterFromAsyncOverwrite(()=>{ce(e,this._config),this.emitConfigUpdate("valuePrefix")})}get valueSuffix(){return de(this._config)}set valueSuffix(e){this.guardSetterFromAsyncOverwrite(()=>{he(e,this._config),this.emitConfigUpdate("valueSuffix")})}get percentagePrefix(){return me(this._config)}set percentagePrefix(e){this.guardSetterFromAsyncOverwrite(()=>{fe(e,this._config),this.emitConfigUpdate("percentagePrefix")})}get percentageSuffix(){return ue(this._config)}set percentageSuffix(e){this.guardSetterFromAsyncOverwrite(()=>{pe(e,this._config),this.emitConfigUpdate("percentageSuffix")})}get dataLabelsOffset(){return Fe(this._config)}set dataLabelsOffset(e){this.guardSetterFromAsyncOverwrite(()=>{be(e,this._config),this.emitConfigUpdate("dataLabelsOffset")})}get alignDataLabels(){return _e(this._config)}set alignDataLabels(e){this.guardSetterFromAsyncOverwrite(()=>{Oe(e,this._config),this.emitConfigUpdate("alignDataLabels")})}get dataLabelsInside(){return ve(this._config)}set dataLabelsInside(e){this.guardSetterFromAsyncOverwrite(()=>{Ce(e,this._config),this.emitConfigUpdate("dataLabelsInside")})}get optimizeDataLabelsOverlapping(){return Ie(this._config)}set optimizeDataLabelsOverlapping(e){this.guardSetterFromAsyncOverwrite(()=>{we(e,this._config),this.emitConfigUpdate("optimizeDataLabelsOverlapping")})}generateChartTitle(){return G({config:this._config,layerInfo:this.layerInfo,commonStrings:this.commonStrings,mode:this._mode})}};p(v,[d,x,P,V]);return v},"geometry/support/jsonUtils","rest/support/AttributeBinsQuery","rest/support/Query","rest/support/StatisticDefinition","time/TimeExtent","core/promiseUtils","request","intl",b,d,e,f,g,h,i)