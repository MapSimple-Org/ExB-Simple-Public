/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import{a as J,b as X,g as ee}from"./UM26TKF2.js";import a from"./GUWCFIQ4.js";import{f as s,i as g}from"./MHMLEVRX.js";import{d as I}from"./DXCHSVBP.js";import{a as c,b,d as E,h as v,k as S,p as w,q as A,v as B,w as T}from"./2YIVYDK5.js";export default $arcgis.t(([{A:G,Aa:j,B:V,Ha:l,Rb:K,Ua:L,bb:h,ec:Q,fb:C,gb:W,h:U,hb:z,i:P,ic:Z,ja:_,kb:$,lb:H,n:N,ob:O,qb:R,ub:Y,vc:x,xc:q}])=>{var D=(i=>(i.NONE="none",i.ROTATE="rotate",i.STAGGER="stagger",i.WRAP="wrap",i))(D||{});function he(i){let{configToUpdate:e,chartContainer:r,layer:t}=i,o=s(e);if(o.series[0]?.type===c.HeatSeries&&t?.capabilities?.queryAttributeBins?.supportsFirstDayOfWeek===!0&&(!("firstDayOfWeek"in e)||e.firstDayOfWeek===void 0||e.firstDayOfWeek===null)){let{lang:n}=I(r??document.documentElement);try{o.firstDayOfWeek=N.local().setLocale(n.replaceAll("_","-")).startOf("week",{useLocaleWeeks:!0}).weekday}catch{}}return o}function Oe(i){let e=s(i);return g(i.axes)||(e.axes=i.axes?.map(r=>{let t=r;return delete t.calculateAutomaticMaximum,delete t.calculateAutomaticMinimum,t.title?.content.font?.style!==void 0&&(t.title.content.font.style=t.title.content.font.style.toLowerCase()),t})),e}function Fe(i){let e=s(i);return g(i.series)||(e.series=i.series.map((r,t)=>{let o=r;r.id===void 0&&(o.id=`Series ${Date.now()}-${t}`);let n=T(i.series,t);return(n===c.BarSeries||n===c.LineSeries||n===c.RadarSeries)&&o.query?.outStatistics?.[0]?.statisticType==="median"&&(o.query.outStatistics[0].statisticType=b.ContinuousPercentile),n===c.BarSeries&&o.multipleBarType!==void 0&&(o.stackedType=o.multipleBarType,delete o.multipleBarType),n===c.PieSeries&&o.sliceGrouping!==void 0&&(o.sliceGrouping.sliceId=G.defaultGroupOfSlicesId,o.sliceGrouping.groupName!==void 0&&(o.sliceGrouping={...o.sliceGrouping,label:o.sliceGrouping.groupName},delete o.sliceGrouping.groupName),o.sliceGrouping.groupSliceSymbol!==void 0&&(o.sliceGrouping={...o.sliceGrouping,fillSymbol:o.sliceGrouping.groupSliceSymbol},delete o.sliceGrouping.groupSliceSymbol)),o})),e}async function te(i,e){let r=[];return await Promise.all(i.map(async t=>{if(!L(t)){let o=h(t,!1);if(o.fieldToSort!==void 0){let n=await x({queryObject:e,fieldToMatch:o.fieldToSort});n!==void 0&&r.push(o.orderBy===void 0?n:`${n} ${o.orderBy}`)}}})),r}async function ke(i,e){let r={...i},t=e;if(!t){let o=ee(i)?i.iLayer:i.dataSource?.layer;o&&(t=await Z(o))}if(t){let o=O(r.series),n=T(r.series),y=r.series&&r.series.length>0&&r.series[0].x.trim()===""||n===c.GaugeSeries&&!Y(i)||o===l.PieFromFields||o===l.BarAndLineFromFields||o===l.BoxPlotMonoField||o===l.BoxPlotMonoFieldAndSplitBy||o===l.BoxPlotMultiFields||o===l.BoxPlotMultiFieldsAndSplitBy,u=n===c.ScatterSeries||o===l.BarAndLineNoAggregation||o===l.BarAndLineSplitByNoAggregation||o===l.BoxPlotMonoField||o===l.BoxPlotMonoFieldAndSplitBy||o===l.BoxPlotMonoFieldAndCategory||o===l.BoxPlotMonoFieldAndCategoryAndSplitBy||o===l.PieNoAggregation;if(r.series=await Promise.all(i.series.map(async d=>{let a={...d};if(y||(a.x=await x({queryObject:t,fieldToMatch:d.x})),"y"in a&&u){let p=a.y;if(Array.isArray(p)){let f=await q({fieldsList:p,queryObject:t});f!==void 0&&"y"in a&&(a.y=f)}else"y"in a&&typeof p=="string"&&(a.y=await x({queryObject:t,fieldToMatch:p}))}if(d.query!==void 0){let{where:p,groupByFieldsForStatistics:f,outStatistics:m}=d.query;if(f=await q({fieldsList:f,queryObject:t}),m!==void 0&&(m=await Promise.all(m.map(async F=>{let k={...F};return k.onStatisticField=await x({queryObject:t,fieldToMatch:F.onStatisticField}),k}))),p!==void 0&&o===l.BarAndLineSplitBy){let F=$(d.query?.where),k=H({where:d.query?.where,normalize:!1,escape:!1});p=`${await x({queryObject:t,fieldToMatch:F})}=${k}`}a.query!==void 0&&(p!==void 0&&(a.query.where=p),f!==void 0&&(a.query.groupByFieldsForStatistics=f),m!==void 0&&(a.query.outStatistics=m))}return a})),r.series[0]?.query!==void 0){let d=r.series[0].query,{orderByFields:a}=d;a!==void 0&&a.length>0&&(a=await te(a,t),a.length>0&&d.orderByFields!==void 0&&(r.series[0].query.orderByFields=a))}if(r.orderOptions?.orderByFields!==void 0){let{orderByFields:d}=r.orderOptions;d!==void 0&&d.length>0&&(d=await te(d,t),d.length>0&&(r.orderOptions.orderByFields=d))}if(n===c.GaugeSeries&&i.axes?.[0]!==void 0){let{minimumFromField:d,maximumFromField:a}=i.axes[0];if(d!==void 0){let p=typeof d=="string"?d:d.onStatisticField,f=await x({queryObject:t,fieldToMatch:p}),m=d;typeof i.axes[0].minimumFromField=="string"?m=f:typeof d=="object"&&(m={...d,onStatisticField:f}),i.axes[0].minimumFromField=m}if(a!==void 0){let p=typeof a=="string"?a:a.onStatisticField,f=await x({queryObject:t,fieldToMatch:p}),m=a;typeof i.axes[0].maximumFromField=="string"?m=f:typeof a=="object"&&(m={...a,onStatisticField:f}),i.axes[0].maximumFromField=m}}}return r}function Pe(i){let e=s(i);if(!g(i.series)&&T(i.series)===c.BoxPlotSeries){let r=e.series[0];r&&(r.showOutliers!==void 0&&(i.showOutliers===void 0&&(e.showOutliers=r.showOutliers),delete r.showOutliers),r.standardizeValues!==void 0&&(i.standardizeValues===void 0&&(e.standardizeValues=r.standardizeValues),delete r.standardizeValues),r.showMean!==void 0&&(i.showMean===void 0&&(e.showMean=r.showMean),delete r.showMean))}return e}function we(i){let e={orderType:B.Category,orderBy:v.Ascending},r=i.query?.orderByFields?.[0];if(r!==void 0){let{outStatisticFieldName:t,statisticType:o}=i.query?.outStatistics?.[0]??{},n=h(r);t!==void 0&&n.fieldToSort===t&&o!==void 0&&(o===b.Average||o==="mean"?e.orderType=B.Mean:o===b.ContinuousPercentile&&(e.orderType=B.Median)),e.orderBy=n.orderBy??v.Ascending}return e}function Ae(i){let e=!1,r=Array.from(new Set(i.series.map(t=>t.type)));return r.length===2&&r.includes(c.BoxPlotSeries)&&r.includes(c.LineSeries)&&(e=i.series.find(t=>t.type===c.LineSeries)?.query?.outStatistics?.[0]!==void 0),e}function Le(i){let e=s(i);if(!g(e.series)&&T(i.series)===c.BoxPlotSeries){if(e.orderOptions?.data===void 0){let r=we(i.series[0]);r.orderType!==void 0&&(e.orderOptions??={},e.orderOptions.data={orderType:r.orderType,orderBy:r.orderBy})}if(e.series=i.series.map(r=>{let t=r;return g(t.x?.trim())&&(t.x=V),delete t.query?.orderByFields,t}),Ae(e)){e.showMean=!0;let r=e.series.find(t=>t.type===c.BoxPlotSeries);e.series.forEach(t=>{t.type===c.LineSeries&&(delete t.query?.groupByFieldsForStatistics,delete t.query?.outStatistics,delete t.query?.orderByFields,r&&(t.y=r.y))})}e.series=i.series.map(r=>{let t=r;return delete t.query?.outStatistics,t})}return e}function Ce(i){let e=s(i);return e.legend!==void 0&&!Number.isFinite(e.legend.maxHeight)&&(e.legend.maxHeight=Number.NaN),e}function qe(i){let e=s(i);return"dataSource"in e&&e.dataSource.layer&&(e.iLayer=e.dataSource.layer,delete e.dataSource),e}function De(i){let e=s(i),r=new Set,t=e.id??"";return r.add(t),e.series.forEach(o=>{let n=o.id;r.has(n)&&(n=`${n}_${Date.now()}`,o.id=n),r.add(n)}),e}async function Me(i){let{configToUpdate:e,layer:r,chartContainer:t}=i,o=s(e);return o=Oe(o),o=Fe(o),o=await ke(o,r),o=Pe(o),o=Le(o),o=Ce(o),o=De(o),o=he({configToUpdate:o,chartContainer:t,layer:r}),o}function Ee(i){let e=s(i);return e?.orderOptions?.orderByFields!==void 0&&O(i.series)===l.PieFromFields&&(e.orderOptions.orderByFields=i?.orderOptions?.orderByFields?.map(r=>{let t=s(r);return r!==void 0&&r.includes("arcgis_charts_pie_category_from_fields_name")&&(t=r.replace("arcgis_charts_pie_category_from_fields_name",P)),t})),e}function Ie(i){let e=s(i);if(!g(i.series)&&e.axes?.[0]!==void 0&&T(i.series)===c.GaugeSeries&&i.axes?.[0]!==void 0){let r=i.axes[0];r.ticks!==void 0&&Object.hasOwn(r.ticks,"spacing")&&delete r.ticks.spacing,e.axes[0]=r}return e}function Ue(i){let e=s(i),{extent:r}=e.series[0]?.query??{};return r!==void 0&&(e.dataFilters={...e.dataFilters,geometry:r},e.series.forEach(t=>{"query"in t&&"extent"in t.query&&delete t.query.extent})),e}function xe(i){let e=s(i);return g(i.series)||(J(i)&&i.rotated===void 0&&(e.rotated=i.series[0].rotated??_()),e.series.forEach(r=>{r.rotated!==void 0&&delete r.rotated})),e}function Ne(i){let e=s(i),r=i.dataSource;return"dataSource"in e&&!g(r)&&(r.type==="featureLayer"&&e.dataSource!==void 0&&(e.dataSource.type="layer"),"featureLayer"in r&&(e.dataSource.layer=r.featureLayer,delete e.dataSource.featureLayer)),e}function Ge(i){let e=s(i);if("dataSource"in i){let r=i.dataSource;if(r.filter!==void 0&&r.filter.trim()!==""){let t=Q([r.filter,e.dataFilters?.where]);e.dataFilters={...e.dataFilters,where:t},delete e.dataSource.filter}}return e}function Ve(i){return i!=="originalValue"}function be(i){let e;switch(i){case"mean":e=B.Mean;break;case"median":e=B.Median;break;case"category":e=B.Category;break}return e}function _e(i){let e=s(i);if(!g(i.series)&&T(i.series)===c.PieSeries){let r=e.series[0];if(r){if(r.sortLabelsBy==="originalValue")e.sortLabelsBy=r.sortLabelsBy;else if(r.sortLabelsBy!==void 0&&e.orderOptions?.data===void 0){let t=M(e);t!==void 0&&(e.orderOptions??={},e.orderOptions.data=t)}r.sortLabelsBy&&delete r.sortLabelsBy}}return e}function je(i){let e=s(i);return g(i.series)||(X(i)&&i.stackedType===void 0&&(e.stackedType=i.series[0].stackedType??j()),e.series.forEach(r=>{"stackedType"in r&&delete r.stackedType})),e}function We(i){let e=s(i),r=i.sortOptions?.sortSeriesBy;return e.orderOptions===void 0&&typeof r=="string"&&(e.orderOptions??={},e.orderOptions.series={orderBy:r==="DESC"?v.Descending:v.Ascending}),e}function ze(i){let e=s(i);return e.colorMatch===void 0&&e.series[0]?.colorType!==void 0&&(e.colorMatch=e.series[0]?.colorType===E.Match),e.series.forEach(r=>{r.colorType!==void 0&&delete r.colorType}),e}function $e(i){let e=s(i);if(e.sortDataBy!==void 0){if(e.orderOptions?.data===void 0){let r=i.sortDataBy,t=be(r?.sortType);t!==void 0&&(e.orderOptions??={},e.orderOptions.data={orderType:t,orderBy:r?.sortOrder??v.Ascending})}delete e.sortDataBy}return e}function He(i){let e=s(i);return e.axes?.forEach(r=>{r!==void 0&&r.scrollbarVisible!==void 0&&r.scrollbar?.visible===void 0&&(r.scrollbar={...r.scrollbar,visible:r.scrollbarVisible},delete r.scrollbarVisible)}),e}function Re(i){let e=s(i),r=e.series[0]?.query?.orderByFields;if(r!==void 0&&r.length>0&&e.orderOptions?.orderByFields===void 0){e.orderOptions??={};let t=!0;if(r.length===1){let{fieldToSort:o,orderBy:n}=h(r[0]),y;o===i.series[0].x||o===P?y=B.Category:"y"in i.series[0]&&o===i.series[0].y&&(y=B.YValue),y!==void 0&&(t=!1,e.orderOptions.data===void 0&&(e.orderOptions.data={orderType:y,orderBy:n?.toUpperCase()==="DESC"?v.Descending:v.Ascending}))}t&&(e.orderOptions.orderByFields=r)}return e.series.forEach(t=>{delete t.query?.orderByFields}),e}function M(i){let e,r=i.orderOptions?.orderByFields?.[0];if(i.series?.length>0){let t=T(i.series),o=O(i.series);if(t!==c.PieSeries&&o!==l.BarAndLineFromFields&&(r=r??i.series[0].x),r&&!L(r)){let{fieldToSort:n,orderBy:y}=h(r),u;n===i.series[0].x||n===P?u=B.Category:"y"in i.series[0]&&n===i.series[0].y&&(u=B.YValue),u!==void 0&&(e={orderType:u,orderBy:y?.toUpperCase()==="DESC"?v.Descending:v.Ascending})}}return e}function Ye(i){let e=s(i),r=i,t=i,o=i,n=i,y=i;if(e){if(e.orderOptions?.series===void 0&&r.sortOptions?.sortSeriesBy!==void 0&&(e.orderOptions??={},e.orderOptions.series={preferLabel:Ve(t.sortLabelsBy??r.sortOptions.sortSeriesBy.sortType),orderBy:r.sortOptions.sortSeriesBy.sortOrder??v.Ascending}),t.sortLabelsBy==="originalValue"||n.orderOptions?.data?.preferDataLabel===!1||y.orderOptions?.data?.preferLabel===!1)e.orderOptions?.data&&delete e.orderOptions.data;else if(e.orderOptions?.data===void 0)if(T(e.series)===c.BoxPlotSeries){if(t.sortLabelsBy||o.sortOptions?.sortDataBy!==void 0){let u=be(o.sortOptions?.sortDataBy?.sortType);u!==void 0&&(e.orderOptions??={},e.orderOptions.data={orderType:u,orderBy:o.sortOptions?.sortDataBy?.sortOrder??v.Ascending})}}else{let u=M(e);u!==void 0&&(e.orderOptions??={},e.orderOptions.data=u)}"sortLabelsBy"in e&&delete e.sortLabelsBy,"sortOptions"in e&&delete e.sortOptions}return e}function Ke(i){let e=s(i);if(e){let r=O(e.series);if((r===l.BarAndLineFromFields||r===l.PieFromFields)&&e.orderOptions?.data===void 0&&e.orderOptions?.orderByFields!==void 0){let t=M(e);t!==void 0&&(e.orderOptions??={},e.orderOptions.data=t,delete e.orderOptions.orderByFields)}}return e}function Qe(i){let e=s(i);return e.horizontalAxisLabelsBehavior===D.NONE&&(e.horizontalAxisLabelsBehavior=w.Hide),e.verticalAxisLabelsBehavior===D.NONE&&(e.verticalAxisLabelsBehavior=w.Hide),e}function Ze(i){let e=s(i),r=e.series[0];if(r&&!r.temporalBinning&&R(e.series[0])&&("timeIntervalSize"in r||"timeIntervalUnits"in r||"timeAggregationType"in r||"trimIncompleteTimeInterval"in r||"nullPolicy"in r)){if(r.temporalBinning={},r.timeIntervalSize!==void 0&&(r.temporalBinning.size=r.timeIntervalSize,delete r.timeIntervalSize),r.timeIntervalUnits){let t;switch(r.timeIntervalUnits){case"esriTimeUnitsSeconds":t=S.Second;break;case"esriTimeUnitsMinutes":t=S.Minute;break;case"esriTimeUnitsHours":t=S.Hour;break;case"esriTimeUnitsDays":t=S.Day;break;case"esriTimeUnitsWeeks":t=S.Week;break;case"esriTimeUnitsMonths":t=S.Month;break;case"esriTimeUnitsYears":t=S.Year;break}t!==void 0&&(r.temporalBinning.unit=t),delete r.timeIntervalUnits}r.timeAggregationType&&(r.temporalBinning.timeAggregationType=r.timeAggregationType,delete r.timeAggregationType),r.trimIncompleteTimeInterval!==void 0&&(r.temporalBinning.trimIncompleteTimeInterval=r.trimIncompleteTimeInterval,delete r.trimIncompleteTimeInterval),r.nullPolicy&&(r.temporalBinning.nullPolicy=r.nullPolicy,delete r.nullPolicy)}return e}function Je(i){let e=s(i);return e.series.forEach(r=>{r.query?.outStatistics?.forEach(t=>{t.statisticType==="percentile_cont"?t.statisticType=b.ContinuousPercentile:t.statisticType==="percentile_disc"&&(t.statisticType=b.DiscretePercentile)})}),e}function Xe(i){let e=s(i);return e.subtitle===void 0&&e.subTitle&&(e.subtitle=e.subTitle),delete e.subTitle,e}function et(i){let e=s(i),r=e.series[0];return r?.temporalBinning&&delete r.temporalBinning?.type,e}function tt(i){let e=s(i);return e=Ee(e),e}function ie(i){let e=s(i);return e=Ie(e),e}function re(i){let e=s(i);return e=Ue(e),e}function oe(i){let e=s(i);return e=xe(e),e}function se(i){let e=s(i);return e=Ne(e),e}function ne(i){let e=s(i);return e=Ge(e),e}function ae(i){let e=s(i);return e=_e(e),e}function de(i){let e=s(i);return e=We(e),e}function ce(i){let e=s(i);return e=ze(e),e}function le(i){return He(i)}function ue(i){let e=s(i);return i.series[0]?.type===c.BoxPlotSeries&&(e=$e(e)),e}function ye(i){return je(i)}function pe(i){return Ye(i)}function fe(i){return qe(i)}function me(i){return Ke(i)}function ve(i){return Qe(i)}function ge(i){return Ze(i)}function Be(i){return Je(i)}function Te(i){let e=s(i);return e=xe(e),Xe(e)}function Se(i){let e=s(i);return e=et(e),e}function it(i){let{versionsToConvert:e=[],configToUpdate:r}=i,t=s(r);return e.length>0&&t!==void 0&&(t=Re(t),e.includes(C)||e.includes(W)?(t=tt(t),t=ie(t),t=re(t),t=oe(t),t=se(t),t=ne(t),t=ae(t),t=de(t),t=ce(t),t=le(t),t=ue(t),t=ye(t),t=pe(t),t=fe(t),t=me(t),t=ve(t),t=ge(t),t=Be(t),t=Te(t),t=Se(t)):e.forEach(o=>{if(t!==void 0)switch(o){case"1.0.1":t=ie(t);break;case"3.4.0":t=re(t);break;case"4.0.0":t=oe(t);break;case"4.0.1":t=se(t);break;case"6.4.0":t=ne(t);break;case"7.5.1":t=ae(t);break;case"8.0.0":t=de(t);break;case"9.2.0":t=ce(t);break;case"9.7.0":t=le(t);break;case"10.0.0":t=ue(t);break;case"11.0.0":t=ye(t);break;case"14.0.1":t=pe(t);break;case"16.0.0":t=fe(t);break;case"16.1.0":t=me(t);break;case"18.1.3":t=ve(t);break;case"20.1.0":t=ge(t);break;case"21.0.0":t=Be(t);break;case"23.2.0":t=Te(t);break;case"24.3.0":t=Se(t);break}}),t.version=U),t}async function dt(i,e,r){let t=i;if(i){let o=K(e);t=await Me({configToUpdate:i,layer:o,chartContainer:r});let n=i.version??C,{versionStatus:y,versions:u}=z(n);(y===A.Older||y===A.Unrecognized)&&(t=it({versionsToConvert:u,configToUpdate:t}))}return t}return dt},a)