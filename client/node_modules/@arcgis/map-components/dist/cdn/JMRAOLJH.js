/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import{a as U}from"./ZTJVS6I7.js";import b from"./O7NRKSDP.js";import"./M7RWCXDB.js";import{a as ge}from"./2FRN3DYW.js";import"./E6ONWL52.js";import{a as oe}from"./SRCDHGWY.js";import{a as K}from"./RK5LF5NN.js";import a from"./7S26CSJP.js";import"./MGF5CCZW.js";import"./7QR22OBQ.js";import"./TC4TLAIC.js";import{H as F,I as G,J as se,K as ne,L as Y,M as $,P as ae,a as re,b as h,s as B}from"./U4NXTENC.js";import"./7V34NQ5V.js";export default $arcgis.t(([Pe,ze,I,{formatDate:W},{createTrackingTarget:Oe,runTracked:ue,signal:Ue},{watch:pe,whenOnce:Me},{a:le},{e:ce,f:de,g:he}])=>{var Ee=re`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted var(--calcite-color-foreground-current)}}.esri-slider{-webkit-user-select:none;user-select:none;direction:ltr;width:100%;height:100%;display:flex}.esri-disabled{pointer-events:none}.esri-disabled .esri-slider__content,.esri-disabled .esri-slider__min,.esri-disabled .esri-slider__max{opacity:var(--calcite-opacity-light)}.esri-slider--reversed.esri-slider--horizontal{flex-direction:row-reverse}.esri-slider--reversed.esri-slider--vertical{flex-direction:column}.esri-slider--horizontal{flex-direction:row}.esri-slider--horizontal .esri-slider__content{height:auto}.esri-slider--horizontal .esri-slider__track{width:100%;height:2px}.esri-slider--horizontal .esri-slider__segment--interactive:hover{cursor:ew-resize}.esri-slider--horizontal .esri-slider__anchor{width:1px;height:100%}.esri-slider--horizontal .esri-slider__label{text-align:center;margin:0 11px;top:-30px;left:-50px}.esri-slider--horizontal .esri-slider__label-input{text-align:center}.esri-slider--horizontal .esri-slider__max,.esri-slider--horizontal .esri-slider__min{flex:none;width:50px;height:auto;margin:auto}.esri-slider--horizontal .esri-slider__ticks{width:100%;margin:9px 0 0;top:100%;left:0}.esri-slider--horizontal .esri-slider__tick{width:1px;height:5px}.esri-slider--horizontal .esri-slider__tick-label{margin-top:18px}.esri-slider--vertical{flex-direction:column-reverse}.esri-slider--vertical .esri-slider__content{flex-direction:column;width:auto}.esri-slider--vertical .esri-slider__track{flex-direction:column;flex:1 0 0;width:2px;height:100%}.esri-slider--vertical .esri-slider__segment--interactive:hover{cursor:ns-resize}.esri-slider--vertical .esri-slider__anchor{width:100%;height:1px}.esri-slider--vertical .esri-slider__label{text-align:left;top:-10px;left:20px}.esri-slider--vertical .esri-slider__max,.esri-slider--vertical .esri-slider__min{flex:0 0 22px;width:100%;margin:auto}.esri-slider--vertical .esri-slider__ticks{margin:0 0 0 11px;top:0;left:100%}.esri-slider--vertical .esri-slider__tick{width:5px;height:1px}.esri-slider--vertical .esri-slider__tick-label{margin-left:30px}.esri-slider__content{z-index:0;flex:1 0 auto;justify-content:center;align-items:center;margin:auto;line-height:0;display:flex;position:relative}.esri-slider__track{touch-action:none;background-color:var(--calcite-color-border-ghost);display:inline-block;position:relative}.esri-slider__segment{transform-origin:0 0;will-change:transform;touch-action:none;width:100%;height:100%;position:absolute;top:0;left:0}.esri-slider__segment:hover{cursor:pointer}.esri-slider__anchor{touch-action:none;-webkit-user-select:none;user-select:none;background-color:var(--calcite-color-brand);position:absolute}.esri-slider__anchor:focus .esri-slider__thumb,.esri-slider__anchor:focus .esri-slider__label{outline:inherit}.esri-slider__anchor--moving:focus .esri-slider__thumb{cursor:grabbing;border:3px solid var(--calcite-color-brand-press)}.esri-slider__anchor--moving .esri-slider__label:hover,.esri-slider__anchor--moving .esri-slider__label--interactive:hover{cursor:grabbing}.esri-slider__thumb{box-sizing:border-box;z-index:1;touch-action:none;background-color:var(--calcite-color-foreground-2);border:2px solid var(--calcite-color-brand);border-radius:16px;width:16px;height:16px;transition:all .125s ease-in-out;position:absolute;top:-7px;left:-7px}.esri-slider__thumb:hover{cursor:grab;border-width:3px;border-color:var(--calcite-color-brand-press);width:19.2px;height:19.2px;top:-8.6px;left:-8.6px}.esri-slider__label{min-width:80px;line-height:var(--calcite-font-line-height-fixed-xl);position:absolute}.esri-slider__label:hover{cursor:grab}.esri-slider__label--interactive:hover,.esri-slider__max--interactive:hover,.esri-slider__min--interactive:hover{cursor:pointer;text-decoration:underline}.esri-slider__label-input{z-index:1;width:100%;position:relative}.esri-slider__extra-content{display:inline-block}.esri-slider__max,.esri-slider__min{text-align:center;justify-content:center;align-items:center;height:22px;line-height:var(--calcite-font-line-height-fixed-xl);display:flex}.esri-slider__max--interactive:hover,.esri-slider__min--interactive:hover{background-color:var(--calcite-color-foreground-2)}.esri-slider__range-input{text-align:center;width:100%;padding:1px 0}.esri-slider__ticks{z-index:0;height:100%;display:inline-block;position:absolute}.esri-slider__tick{background:var(--calcite-color-foreground-1);position:absolute}.esri-slider__tick-label{width:max-content;position:absolute}:dir(rtl) .esri-slider__label,:dir(rtl) .esri-slider__max,:dir(rtl) .esri-slider__min,:dir(rtl) .esri-slider__tick-label{direction:rtl;unicode-bidi:plaintext}:dir(rtl) .esri-slider__range-input,:dir(rtl) .esri-slider__label-input{unicode-bidi:plaintext}:host{width:350px}.wrapper{display:flex;flex-direction:column;overflow:hidden;gap:var(--calcite-spacing-md);justify-content:space-between;padding:var(--esri-widget-padding);position:relative;calcite-label{--calcite-label-margin-bottom: 0}&.loading>*:not(calcite-scrim){opacity:0}}.unsupported{padding:0 var(--calcite-spacing-lg);animation:esri-fade-in .25s ease-in-out}.slider{padding-block-end:var(--label-wrap-padding, 0)}.time-configuration{--date-play-button-offset: 11px;--slider-play-button-offset: 8px;display:grid;gap:var(--calcite-spacing-md);grid-template-columns:1fr min-content;.slider-container{grid-column:1;+calcite-button{grid-column:2;transform:translateY(var(--slider-play-button-offset))}}.timezone-input-container{grid-column:1;min-width:0;+span{grid-column:2}}.date-picker-container{grid-column:1;+calcite-button{grid-column:2;transform:translateY(var(--date-play-button-offset))}}calcite-button{place-self:center}}`;Intl.DateTimeFormat().resolvedOptions().timeZone;var me={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function N(i,e,t){return i===0?0:i*me[e]/me[t]}function M(i){return i instanceof Date&&!Number.isNaN(i.getTime())}function P(i,e,t="hours"){let r=new Date(i.getTime()),s=N(e,t,"milliseconds");return r.setTime(r.getTime()+s),r}function T(i,e){let t=N(e,"hours","milliseconds"),r=new Date(i.getTime()+t),s=r.toISOString().slice(0,10),n=r.getUTCHours()*60+r.getUTCMinutes();return{localDate:s,minutesSinceMidnight:n}}var j=Math.PI,u=Math.sin,k=Math.cos,Ae=Math.asin,Le=Math.acos,w=j/180,Se=1e3*60*60*24,De=2440588,Te=2451545;function Ne(i){return i.valueOf()/Se-.5+De}function E(i){return new Date((i+.5-De)*Se)}function He(i){return Ne(i)-Te}var _e=w*23.4397;function Ie(i,e){return Ae(u(e)*k(_e)+k(e)*u(_e)*u(i))}function je(i){return w*(357.5291+.98560028*i)}function Re(i){return w*(1.9148*u(i)+.02*u(2*i)+3e-4*u(3*i))}function Ze(i,e){var t=w*102.9372;return i+e+t+j}var D={};D.PolarException={NORMAL:0,MIDNIGHT_SUN:1,POLAR_NIGHT:2};var q=[[-.83,"sunrise","sunset"]],ke=9e-4;function Be(i,e){return Math.round(i-ke-e/(2*j))}function fe(i,e,t){return ke+(i+e)/(2*j)+t}function be(i,e,t){return Te+i+.0053*u(e)-.0069*u(2*t)}function Fe(i,e,t){return Le((u(i)-u(e)*u(t))/(k(e)*k(t)))}D.getTimes=function(i,e,t){var r=w*-t,s=w*e,n=He(i),a=Be(n,r),l=fe(0,r,a),o=je(l),d=Re(o),c=Ze(o,d),g=Ie(c,0),p=be(l,o,c);function x(Z){var O=Fe(Z,s,g),Ce=fe(O,r,a);return be(Ce,o,c)}function y(Z){var O=(u(Z)-u(s)*u(g))/(k(s)*k(g));return O<-1?D.PolarException.MIDNIGHT_SUN:O>1?D.PolarException.POLAR_NIGHT:D.PolarException.NORMAL}var f={solarNoon:E(p),nadir:E(p-.5),polarException:D.PolarException.NORMAL},v,_,z,R,te;for(v=0,_=q.length;v<_;v+=1)z=q[v],R=x(z[0]*w),te=p-(R-p),f[z[1]]=E(te),f[z[2]]=E(R);return f.polarException=y(q[0][0]*w),f};var Ge={spring:{dayOfMonth:20,month:2},summer:{dayOfMonth:21,month:5},fall:{dayOfMonth:23,month:8},winter:{dayOfMonth:21,month:11}},J=["spring","summer","fall","winter"];function C(i,e,t){let r=ee(e,t),{dayOfMonth:s,month:n}=Ge[r],a=new Date(i.getTime());return a.setMonth(n,s),a}function Ye(i,e){let t=Ke(i);return ee(t,e)}function Ke(i){let e=i.getTime(),t=C(i,"spring","northern").getTime(),r=C(i,"summer","northern").getTime(),s=C(i,"fall","northern").getTime(),n=C(i,"winter","northern").getTime();return e>=t&&e<r?"spring":e>=r&&e<s?"summer":e>=s&&e<n?"fall":"winter"}function ee(i,e){return e==="northern"?i:qe(i)}function ve(i){return i>=0?"northern":"southern"}function qe(i){let e=J.indexOf(i);return J[(e+2)%4]}var H=1440,Ve=864e5;function We(i,e,t,r){let s=D.getTimes(i,e,t),n=s.sunrise,a=s.sunset,l=P(i,r),o=P(n,r),d=P(a,r);if(l.getUTCDate()!==o.getUTCDate()||l.getUTCDate()!==d.getUTCDate()){let c=l.getTime()-o.getTime()>0?1:-1;n.setUTCDate(n.getUTCDate()+c),a.setUTCDate(a.getUTCDate()+c)}return{sunrise:n,sunset:a}}function m(i){return i?.type==="sun"}function ie(i,e){return(i%e+e)%e}var $e={hour:"numeric",minute:"numeric",timeZone:"UTC"},Je={hour:"numeric",timeZone:"UTC"};function Qe(i){let e=Math.round(N(i,"minutes","hours"));return new Date(N(e,"hours","milliseconds"))}function Xe(i){return new Date(i*6e4)}function ei(i){let e=Qe(i),t=W(e,$e);if(t.includes(" ")){t=W(e,Je),t=t.replace(":00","");let r="\u2060";t=t.split(" ").map(s=>Array.from(s).join(r)).join(" ")}return t}function ii(i){let e=Xe(i),t=W(e,$e);return i!==0&&t==="00:00"&&(t="24:00"),t}var ti=(i,e)=>{switch(e){case"tick":return ei(i);case"max":case"min":case"value":return ii(i)}},ri=H-1,si=ri/4;function ni(i){return h`<calcite-slider class="slider" .disabled=${i.disabled} fill-placement=none label-ticks label-handles .labelFormatter=${ti} min=0 .max=${H-1} @calciteSliderInput=${e=>{let t=Array.isArray(e.target.value)?e.target.value[0]:e.target.value;t!=null&&i.onTimeChanged(t)}} .scale=${i.scale} .step=${i.steps} snap style=${Y({gridArea:"slider"})} .ticks=${si} .value=${ie(i.value??0,H)} ${G(i.ref)}></calcite-slider>`}function ai(i,e){return i/15}function li(i,e){let t=i?.[0];if(t==null)return null;e||(e={hours:0,minutes:0,seconds:0}),e.hours=ai(t);let r=e.hours%1;e.hours-=r,e.minutes=r*60;let s=e.minutes%1;return e.minutes-=s,e.seconds=Math.round(s*60),e}function oi(i){let e=li([i.longitude,i.latitude]);return e==null?0:Math.round(e.hours+e.minutes/60+e.seconds/3600)}var ci=100,di=1e3,b=12e5,A=72e5;function we(i,e){return ie(i+e,24)}function hi({mode:i,lighting:e,getPlaySpeed:t,onProgress:r,beforeProgress:s}){let n=-1;function a(l=Date.now()){let o=e.date,d=Date.now()-(l??0);if(i==="day"){l=Date.now();let c=t()/ci*d;if(c>0){let g=new Date(o.getTime()+c),p=e.displayUTCOffset??0,x=we(g.getUTCHours(),p),y=we(o.getUTCHours(),p);x<y&&(g=new Date(o.getTime()+c-Ve));let f=e.clone();s?.(),e.date=g,r?.(f,e)}}else if(d>di){l=Date.now();let c=(o.getUTCMonth()+1)%12,g=new Date(o.getTime());g.setUTCMonth(c);let p=e.clone();s?.(),e.date=g,r?.(p,e)}n=requestAnimationFrame(()=>a(l))}return a(),U(()=>cancelAnimationFrame(n))}var L=b/4;function gi(i,e,t,r){let{day:s,night:n=s,twilight:a=s}=r,l=s*L,o=n*L,d=a*L;if(i==null||e==null||Number.isNaN(i.getTime())&&Number.isNaN(e.getTime()))return l;let c=t.getTime(),g=i.getTime(),p=e.getTime(),x=g-A/2,y=g+A/2,f=p-A/3*2,v=p+A/3,_=l;return c>=x&&c<=y?c-x<=b?_=o-(c-x)/b*(o-d):y-c<=b/2?_=l-(y-c)/b*2*(l-d):_=d:c>=f&&c<=v?c-f<=b/2?_=l-(c-f)/b*2*(l-d):v-c<=b?_=o-(v-c)/b*(o-d):_=d:(c<g||c>p)&&(_=o),_}function S(i){return i.hidden?null:i.children}function xe(i){let{children:e,hideHeader:t,headingLevel:r=2,label:s,title:n}=i;return h`<div aria-label=${s??$} class=${ne({...typeof i.class=="string"?{[i.class]:!0}:i.class,[K.widget]:!0,[K.panel]:!0})} role=presentation>${S({hidden:t||!n,children:ge({level:r,children:n})})}${e}</div>`}var Q=class{#i;#r;#s=Oe(()=>{this.#t()});constructor(e){this.#r=e;let t;ue(this.#s,()=>{t=e()}),this.#i=Ue(t)}#t(){let e=this.#i.value;ue(this.#s,()=>{this.#i.value=this.#r(e)})}mutate(e){this.#i.value=e}get value(){return this.#i.value}};function V(i){return new Q(i)}var ui={day:1,night:6,twilight:2/3},X=class extends se{constructor(){super(...arguments),this.messages=oe({blocking:!0}),this.#r="none",this.#s=null,this.#l=F(),this.#n=F(),this.#d=200,this.#h=200,this.#e={},this._offset=V(e=>m(this._lighting)?this._lighting.displayUTCOffset??e:e),this._timesliderPosition=V(e=>{if(m(this._lighting)){let t=this._lighting.displayUTCOffset??0,r=this._lighting.date;if(M(r)){let{minutesSinceMidnight:s}=T(r,t);return s}else return e}return e}),this._localDate=V(e=>{if(m(this._lighting)){let t=this._lighting.displayUTCOffset??0,r=this._lighting.date;if(M(r)){let{localDate:s}=T(r,t);return s}else return e}return e}),this.view=le(this),this.autoDestroyDisabled=!1,this.dateOrSeason="date",this.headingLevel=2,this.hideDatePicker=!1,this.hideHeader=!1,this.hidePlayButtons=!1,this.hideShadowsToggle=!1,this.hideSunLightingToggle=!1,this.hideTimezone=!1,this.icon="brightness",this.playSpeedMultiplier=1,this.timeSliderSteps=5,this.arcgisReady=B(),this.arcgisUserDateTimeChange=B(),this.#c=!1}static{this.properties={view:0,_playingState:16,_sunlightingDisabled:16,autoDestroyDisabled:5,currentSeason:1,dateOrSeason:3,dayPlaying:5,_directShadowsDisabled:16,headingLevel:9,hideDatePicker:5,hideHeader:5,hidePlayButtons:5,hideShadowsToggle:5,hideSunLightingToggle:5,hideTimezone:5,icon:3,label:1,playSpeedMultiplier:9,position:1,referenceElement:1,timeSliderSteps:9,utcOffset:9,timeSliderPosition:9,localDate:1,yearPlaying:5}}static{this.styles=Ee}get _view(){return this.view?.type==="3d"?this.view:void 0}#i;#r;#s;#t;#l;#n;#d;#h;#o(){if(this.#t)return;let e=de(()=>{if(this.#t?.remove(),m(this._lighting)){let t=this.utcOffset??0,r=this.timeSliderPosition??0,s=this.localDate,n=r-t*60,a=P(s,n,"minutes");this._lighting.date=a,this._lighting.displayUTCOffset=t}},{timeout:this.#d});this.#t=U(()=>{he(e),this.#t=void 0})}#u({scale:e,disabled:t}){let{messages:r}=this;return h`<calcite-label .scale=${e} class="date-picker-container">${r.date}${pi({disabled:t,scale:e,date:this.localDateAsString,onDateChange:s=>{let n=s.currentTarget.value,a=Array.isArray(n)?n[0]:n;this._stopPlaying(),this.localDate=a,this._emitUserDateTimeChangeEvent()}})}</calcite-label>${S({hidden:this.hidePlayButtons,children:ye({playing:this.yearPlaying,disabled:t,label:r.playYear,onClick:()=>{this._playingState==="year"?this._playingState="none":this._playingState="year"},scale:e})})}`}#p({scale:e,disabled:t}){let{messages:r}=this;return h`<calcite-label .scale=${e} class="date-picker-container">${r.season}${mi({scale:e,selectedSeason:this.currentSeason,disabled:t,messages:r,onSeasonChange:s=>{this._stopPlaying(),this.currentSeason=s.currentTarget.value}})}</calcite-label>`}#e;get#g(){return Array.isArray(this.#n?.value?.value)?this.#n?.value?.value[0]:this.#n?.value?.value}get localDateAsString(){return this._localDate.value??""}get _playingState(){return this.#r}set _playingState(e){this.#r=e,this.#a?.remove(),e==="none"?this.#i?.remove():(this._play(e),this._emitUserDateTimeChangeEvent())}get _lighting(){return this._view?.environment?.lighting}get _sunlightingDisabled(){return!m(this._lighting)}set _sunlightingDisabled(e){this.#e.sunlightingDisabled=e;let t=this._view?.environment;if(t==null)return;let r=t.lighting,s=this.#s;this.#s=r;let n={directShadowsEnabled:r.directShadowsEnabled};m(r)&&(n.cameraTrackingEnabled=r.cameraTrackingEnabled);let a=e?"virtual":"sun",l;s!=null&&s.type===a?l=s:l=e?new ze:new Pe,l.set(n),t.lighting=l,e||(this._stopPlaying(),this.#l.value&&(this.#l.value.open=!1))}get currentSeason(){let e=this._view?.camera?.position?.latitude??0,t=ve(e);return Ye(this.localDate,t)}set currentSeason(e){this._stopPlaying();let t=this._view?.camera?.position?.latitude??0,r=ve(t),s=ee(e,r);this.localDate=C(this.localDate,s,"northern"),this._emitUserDateTimeChangeEvent()}get dayPlaying(){return this._playingState==="day"}set dayPlaying(e){this._playingState=e?"day":"none"}get _directShadowsDisabled(){return!this._lighting?.directShadowsEnabled}set _directShadowsDisabled(e){this.#e.directShadowsDisabled=e,this._lighting&&(this._lighting.directShadowsEnabled=!e)}get utcOffset(){return this._offset.value}set utcOffset(e){this._offset.mutate(e),this.#o()}get timeSliderPosition(){return this._timesliderPosition.value}set timeSliderPosition(e){this._timesliderPosition.mutate(ie(e??0,H)),this.#o()}get localDate(){return this._localDate.value!=null?new Date(this._localDate.value):new Date}set localDate(e){let t=new Date(e);if(M(t)){t.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate());let r=t.toISOString().slice(0,10);this._localDate.mutate(r),this.#o()}}get yearPlaying(){return this._playingState==="year"}set yearPlaying(e){this._playingState=e?"year":"none"}async destroy(){await this.manager.destroy()}async load(){this.#e.utcOffset=this.utcOffset,this.#e.timeSliderPosition=this.timeSliderPosition,this.#e.localDate=this.localDateAsString,this.manager.onLifecycle(()=>[pe(()=>{let e=null;if(m(this._lighting)){let t=this._lighting.displayUTCOffset??0,r=this._lighting.date;if(M(r)){let{minutesSinceMidnight:s}=T(r,t);e=s}}return e},e=>{let t=this.#g;e!=null&&t!==e&&this._emitUserDateTimeChangeEvent()},{sync:!0}),pe(()=>{let e=this._view?.camera?.position;return e?oi(e):void 0},e=>{let t=this._lighting;m(t)&&t.cameraTrackingEnabled&&(t.displayUTCOffset=e)},{sync:!0,initial:!0}),I.onLocaleChange(()=>{this.requestUpdate()})]),this.manager.onDisconnected(()=>{this.#i?.remove(),this.#t?.remove(),this.#a?.remove()})}willUpdate(e){if(super.willUpdate(e),!!this.#c&&m(this._lighting)&&e.has("utcOffset")){let t=this.utcOffset??0,r=this._lighting.displayUTCOffset??0,s=this.timeSliderPosition??0,n=this.localDate,a=s-r*60,l=P(n,a,"minutes"),{minutesSinceMidnight:o,localDate:d}=T(l,t);this._timesliderPosition.mutate(o),this._localDate.mutate(d)}}updated(e){super.updated(e),this._adjustTimeSliderLabels()}#c;async loaded(){let e=new AbortController;this.manager.onDisconnected(()=>({remove:()=>{e.abort()}})),await ce(Me(()=>this._view?.ready,{signal:e.signal}).then(()=>{this.utcOffset=this.#e.utcOffset??this.utcOffset,this.timeSliderPosition=this.#e.timeSliderPosition??this.timeSliderPosition,this.localDate=this.#e.localDate??this.localDate,this.#e.directShadowsDisabled!=null&&(this._directShadowsDisabled=this.#e.directShadowsDisabled),this.#e.sunlightingDisabled!=null&&(this._sunlightingDisabled=this.#e.sunlightingDisabled),this.#e={}})),this.#c=!0}_adjustTimeSliderLabels(){let e=this.#n.value;e&&bi(e,I.getLocale())}_emitUserDateTimeChangeEvent(){this.isConnected&&this.arcgisUserDateTimeChange.emit()}_stopPlaying(){this._playingState="none"}#a;#m(e){if(this.#a)return;let t=setTimeout(()=>{let r=e.displayUTCOffset??0,s=e.date,{minutesSinceMidnight:n}=T(s,r);this._timesliderPosition.mutate(n),this.#a?.remove()},this.#h);this.#a=U(()=>{clearTimeout(t),this.#a=void 0;let r=this._lighting;if(m(r)){let s=r.displayUTCOffset??0,n=r.date,{minutesSinceMidnight:a}=T(n,s);this._timesliderPosition.mutate(a)}})}_play(e){this.#i?.remove();let t=this._view;if(t==null||this._sunlightingDisabled)return;let r=t.environment.lighting;if(!m(r))return;let s=0;this.#i=hi({mode:e,lighting:r,beforeProgress:()=>{s=this.#g??0},onProgress:(n,a)=>{this._timesliderPosition.mutate(s),this.#m(a)},getPlaySpeed:()=>{let n=this._view,a=this._view?.environment.lighting;if(n!=null&&m(a)){let l=n.camera.position.latitude??0,o=n.camera.position.longitude??0,{sunrise:d,sunset:c}=We(a.date,l,o,a.displayUTCOffset??0);return gi(d,c,a.date,ui)*this.playSpeedMultiplier}else return L*this.playSpeedMultiplier}})}render(){let{messages:e,dateOrSeason:t}=this,r=this._sunlightingDisabled,s="m";if(this._view?.type!=="3d")return xe({class:"wrapper",label:e.componentLabel,title:e.title,hideHeader:this.hideHeader,headingLevel:this.headingLevel,children:h`<div class="unsupported"><p>${e.unsupported}</p></div>`});let n=(this.utcOffset??0)*60,a=this.view?.ready===!0,l=Array.isArray(this.timeSliderSteps)?this.timeSliderSteps.at(0):this.timeSliderSteps;return xe({class:{wrapper:!0,loading:!a},label:e.componentLabel,title:e.title,hideHeader:this.hideHeader,headingLevel:this.headingLevel,children:h`${a?void 0:h`<calcite-scrim loading></calcite-scrim>`}<div class="time-configuration" style=${Y({columnGap:this.hidePlayButtons?"0":void 0})}><calcite-label class="slider-container" .scale=${s}>${e.timeSliderLabel}${ni({ref:this.#n,disabled:this._sunlightingDisabled,scale:s,value:this.timeSliderPosition??0,steps:l,onTimeChanged:o=>{this._stopPlaying(),this._emitUserDateTimeChangeEvent(),this.timeSliderPosition=o}})}</calcite-label>${S({hidden:this.hidePlayButtons,children:ye({disabled:this._sunlightingDisabled,playing:this.dayPlaying,label:e.playDay,onClick:()=>{this._playingState==="day"?this._stopPlaying():this._playingState="day"},scale:s})})}${S({hidden:this.hideTimezone,children:h`<calcite-label .scale=${s} class="timezone-input-container">${e.timezone}<calcite-input-time-zone mode=offset overlay-positioning=fixed .scale=${s} .disabled=${this._sunlightingDisabled} .value=${`${n}`} .referenceDate=${this.localDateAsString} @calciteInputTimeZoneChange=${o=>{let d=+o.target.value;this.utcOffset=d/60,this._stopPlaying()}} ${G(this.#l)}></calcite-input-time-zone></calcite-label><span></span>`})}${S({hidden:this.hideDatePicker,children:t==="date"?this.#u({scale:s,disabled:r}):this.#p({scale:s,disabled:r})})}</div>${S({hidden:this.hideSunLightingToggle,children:_i({scale:s,messages:e.sunLightingToggle,sunlightingEnabled:!this._sunlightingDisabled,onSunLightingToggle:o=>{this._sunlightingDisabled=!o}})})}${S({hidden:this.hideShadowsToggle,children:fi({scale:s,messages:e.shadowsToggle,onShadowCheckboxChange:o=>{this._directShadowsDisabled=!o},shadowEnabled:!this._directShadowsDisabled})})}`})}};function ye({disabled:i,playing:e,onClick:t,label:r,scale:s="m"}){return h`<calcite-button appearance=solid .scale=${s} .disabled=${i} .iconStart=${e?"pause-f":"play-f"} .label=${r} @click=${t} round title=${r??$} type=button></calcite-button>`}function pi({disabled:i,date:e,onDateChange:t,scale:r}){return h`<calcite-input-date-picker data-testid=daylight-date-picker .disabled=${i} overlay-positioning=fixed placement=bottom .value=${e} .scale=${r} @calciteInputDatePickerChange=${t}></calcite-input-date-picker>`}function mi({messages:i,disabled:e,scale:t,selectedSeason:r,onSeasonChange:s}){return h`<calcite-select .disabled=${e} .label=${i.season} .scale=${t} .value=${r} @calciteSelectChange=${n=>{s(n)}}>${J.map(n=>h`<calcite-option .selected=${r===n} .value=${n}>${i[n]}</calcite-option>`)}</calcite-select>`}function _i({messages:i,sunlightingEnabled:e,onSunLightingToggle:t,scale:r}){return h`<calcite-label layout=inline .scale=${r} title=${i?.tooltip??$}><calcite-checkbox .scale=${r} .checked=${e} @calciteCheckboxChange=${s=>t(s.target.checked)}></calcite-checkbox>${i?.label}</calcite-label>`}function fi({messages:i,shadowEnabled:e,onShadowCheckboxChange:t,scale:r}){return h`<calcite-label layout=inline .scale=${r} title=${i?.tooltip??$}><calcite-checkbox .checked=${e} @calciteCheckboxChange=${s=>t(s.target.checked)}></calcite-checkbox>${i.label}</calcite-label>`}function bi(i,e){let t=wi(e),r=t?.language??"",s=t?.region??"",n=["ar","bg","el","en","ko"].includes(r)||r==="zh"&&["HK","TW"].includes(s);if(i.style.setProperty("--label-wrap-padding",n?"5px":"0"),i.style.setProperty("--label-wrapping",n?"normal":"nowrap"),!i.hasAttribute("data-slider-label-stylesheet-attatched")&&i.shadowRoot){let a=i.shadowRoot.adoptedStyleSheets,l=new CSSStyleSheet;l.replaceSync(`
      .tick__label {
        text-align: center;
        white-space: var(--label-wrapping, normal);
      }
    `),i.shadowRoot.adoptedStyleSheets=[...a,l],i.toggleAttribute("data-slider-label-stylesheet-attatched",!0)}}var vi=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/u;function wi(i){return vi.exec(i)?.groups}ae("arcgis-daylight",X);return X},"views/3d/environment/SunLighting","views/3d/environment/VirtualLighting","intl","intl","applications/Components/reactiveUtils","core/reactiveUtils",a,b)