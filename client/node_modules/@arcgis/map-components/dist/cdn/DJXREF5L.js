/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import{a as P}from"./7V34NQ5V.js";var w={};P(w,{PLACEHOLDER:()=>te,PLACEHOLDER2:()=>se,assert:()=>W,getType:()=>T,isArray:()=>ee,isDate:()=>N,isNaN:()=>E,isNumber:()=>a,isObject:()=>$,isString:()=>F,numberToString:()=>Z,repeat:()=>j,toDate:()=>X,toNumber:()=>R});function E(s){return Number(s)!==s}function T(s){return{}.toString.call(s)}function W(s,e="Assertion failed"){if(!s)throw new Error(e)}function R(s){if(s!=null&&!a(s)){let e=Number(s);return E(e)&&F(s)&&s!=""&&s.match(/[0-9]+/)?R(s.replace(/[^0-9.\-]+/g,"")):e}return s}function X(s){if(N(s))return new Date(s);if(a(s))return new Date(s);{let e=Number(s);return a(e)?new Date(e):new Date(s)}}function Z(s){if(E(s))return"NaN";if(s===1/0)return"Infinity";if(s===-1/0)return"-Infinity";if(s===0&&1/s===-1/0)return"-0";let e=s<0;s=Math.abs(s);let t=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+s),i=t[1],r=t[2]||"",n;if(t[3]===void 0)n=r===""?i:i+"."+r;else{let o=+t[3];if(s<1){let u=o-1;n="0."+j("0",u)+i+r}else{let u=o-r.length;u===0?n=i+r:u<0?n=i+r.slice(0,u)+"."+r.slice(u):n=i+r+j("0",u)}}return e?"-"+n:n}function j(s,e){return new Array(e+1).join(s)}function N(s){return T(s)==="[object Date]"}function F(s){return typeof s=="string"}function a(s){return typeof s=="number"&&Number(s)==s}function $(s){return typeof s=="object"&&s!==null}function ee(s){return Array.isArray(s)}var te="__\xA7\xA7\xA7__",se="__\xA7\xA7\xA7\xA7__";var f={};P(f,{add:()=>pe,any:()=>k,copy:()=>ge,each:()=>l,eachContinue:()=>ne,eachReverse:()=>re,find:()=>we,findIndex:()=>x,findIndexReverse:()=>H,findMap:()=>xe,findReverse:()=>ve,first:()=>le,getFirstSortedIndex:()=>Oe,getSortedIndex:()=>A,has:()=>be,indexOf:()=>D,insert:()=>M,insertIndex:()=>B,keepIf:()=>Pe,last:()=>ue,map:()=>ie,move:()=>ae,pushAll:()=>ce,pushOne:()=>de,remove:()=>v,removeFirst:()=>_,removeIndex:()=>z,replace:()=>fe,setIndex:()=>he,shiftLeft:()=>oe,shuffle:()=>ye,slice:()=>me,toArray:()=>_e});function D(s,e){let t=s.length;for(let i=0;i<t;++i)if(s[i]===e)return i;return-1}function k(s,e){let t=s.length;for(let i=0;i<t;++i)if(e(s[i]))return!0;return!1}function ie(s,e){let t=s.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=e(s[r],r);return i}function l(s,e){let t=s.length;for(let i=0;i<t;++i)e(s[i],i)}function re(s,e){let t=s.length;for(;t>0;)--t,e(s[t],t)}function ne(s,e){let t=s.length;for(let i=0;i<t&&e(s[i],i);++i);}function oe(s,e){let t=s.length;for(let i=e;i<t;++i)s[i-e]=s[i];s.length=t-e}function ue(s){let e=s.length;return e?s[e-1]:void 0}function le(s){return s[0]}function M(s,e,t){t=Math.max(0,Math.min(t,s.length)),s.splice(t,0,e)}function he(s,e,t){v(s,e),M(s,e,t)}function ce(s,e){let t=e.length;for(let i=0;i<t;++i)s.push(e[i])}function v(s,e){let t=!1,i=0;for(;;){if(i=s.indexOf(e,i),i===-1)return t;t=!0,s.splice(i,1)}}function _(s,e){let t=s.indexOf(e);return t!==-1?(s.splice(t,1),!0):!1}function ae(s,e,t){let i=D(s,e);i!==-1&&z(s,i),t==null?s.push(e):B(s,t,e)}function pe(s,e,t){a(t)?t===0?s.unshift(e):s.splice(t,0,e):s.push(e)}function de(s,e){s.indexOf(e)===-1&&s.push(e)}function fe(s,e,t){let i=s.indexOf(e);i!==-1&&s.splice(i,1),a(t)?s.splice(t,0,e):s.push(e)}function _e(s){return Array.isArray(s)?s:[s]}function be(s,e){return D(s,e)!==-1}function ge(s){let e=s.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=s[i];return t}function me(s,e,t=s.length){let i=new Array(t-e);for(let r=e;r<t;++r)i[r-e]=s[r];return i}function B(s,e,t){s.splice(e,0,t)}function z(s,e){s.splice(e,1)}function x(s,e){let t=s.length;for(let i=0;i<t;++i)if(e(s[i],i))return i;return-1}function H(s,e){let t=s.length;for(;t>0;)if(--t,e(s[t],t))return t;return-1}function we(s,e){let t=x(s,e);if(t!==-1)return s[t]}function ve(s,e){let t=H(s,e);if(t!==-1)return s[t]}function xe(s,e){let t=s.length;for(let i=0;i<t;++i){let r=e(s[i],i);if(r!==void 0)return r}}function ye(s){let e=s.length,t,i;for(;e!==0;)i=Math.floor(Math.random()*e),e-=1,t=s[e],s[e]=s[i],s[i]=t}function A(s,e){let t=0,i=s.length,r=!1;for(;t<i;){let n=t+i>>1,o=e(s[n]);o<0?t=n+1:o===0?(r=!0,t=n+1):i=n}return{found:r,index:r?t-1:t}}function Oe(s,e){let t=0,i=s.length,r=!1;for(;t<i;){let n=t+i>>1,o=e(s[n]);o<0?t=n+1:(o===0&&(r=!0),i=n)}return{found:r,index:t}}function Pe(s,e){let t=s.length;for(;t>0;)--t,e(s[t])||s.splice(t,1)}var q={};P(q,{copy:()=>je,each:()=>h,eachContinue:()=>Ee,eachOrdered:()=>$e,hasKey:()=>Y,keys:()=>b,keysOrdered:()=>K,softCopyProperties:()=>De});function b(s){return Object.keys(s)}function K(s,e){return b(s).sort(e)}function je(s){return Object.assign({},s)}function h(s,e){b(s).forEach(t=>{e(t,s[t])})}function Ee(s,e){for(let t in s)if(Y(s,t)&&!e(t,s[t]))break}function $e(s,e,t){l(K(s,t),i=>{e(i,s[i])})}function Y(s,e){return{}.hasOwnProperty.call(s,e)}function De(s,e){return h(s,(t,i)=>{i!=null&&e[t]==null&&(e[t]=i)}),e}var g=class{constructor(){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},c=class{constructor(e){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=e}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}},G=class extends g{constructor(){super(...arguments),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_dispose(){l(this._disposers,e=>{e.dispose()})}},p=class extends g{constructor(e){super(),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposers=e}_dispose(){l(this._disposers,e=>{e.dispose()})}get disposers(){return this._disposers}},J=class extends g{constructor(){super(...arguments),Object.defineProperty(this,"_disposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_dispose(){this._disposer!=null&&(this._disposer.dispose(),this._disposer=void 0)}get(){return this._value}set(e,t){this._disposer!=null&&this._disposer.dispose(),this._disposer=t,this._value=e}reset(){this.set(void 0,void 0)}},Q=class extends c{constructor(){super(...arguments),Object.defineProperty(this,"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){return++this._counter,new c(()=>{--this._counter,this._counter===0&&this.dispose()})}};var y=class{constructor(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;let e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{l(e,t=>{t.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}}hasListeners(){return this._listeners.length!==0}hasListenersByType(e){return k(this._listeners,t=>(t.type===null||t.type===e)&&!t.killed)}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(e){delete this._disabled[e]}disableType(e,t=1/0){this._disabled[e]=t}_removeListener(e){if(this._iterating===0){let t=this._listeners.indexOf(e);if(t===-1)throw new Error("Invalid state: could not remove listener");this._listeners.splice(t,1)}else this._killed.push(e)}_removeExistingListener(e,t,i,r){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(n=>{n.once===e&&n.type===t&&(i===void 0||n.callback===i)&&n.context===r&&n.disposer.dispose()})}isEnabled(e){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&this._disabled[e]===void 0}removeType(e){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(t=>{t.type===e&&t.disposer.dispose()})}has(e,t,i){return x(this._listeners,n=>n.once!==!0&&n.type===e&&(t===void 0||n.callback===t)&&n.context===i)!==-1}_shouldDispatch(e){if(this._disposed)throw new Error("EventDispatcher is disposed");let t=this._disabled[e];return a(t)?(t<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled}_eachListener(e){++this._iterating;try{l(this._listeners,e)}finally{--this._iterating,this._iterating===0&&this._killed.length!==0&&(l(this._killed,t=>{this._removeListener(t)}),this._killed.length=0)}}dispatch(e,t){this._shouldDispatch(e)&&this._eachListener(i=>{!i.killed&&(i.type===null||i.type===e)&&(i._debounceDelay?(i._debounceTimeout&&window.clearTimeout(i._debounceTimeout),i._debounceTimeout=window.setTimeout(()=>{i._debounceTimeout=void 0,i.killed||i.dispatch(e,t)},i._debounceDelay)):i.dispatch(e,t))})}_on(e,t,i,r,n,o,u){if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(e,t,i,r);let d={type:t,callback:i,context:r,shouldClone:n,dispatch:o,killed:!1,once:e,disposer:new c(()=>{d.killed=!0,d._debounceTimeout&&window.clearTimeout(d._debounceTimeout),this._removeListener(d)}),_debounceDelay:u};return this._listeners.push(d),d}onAll(e,t,i=!0){return this._on(!1,null,e,t,i,(r,n)=>e.call(t,n)).disposer}on(e,t,i,r=!0){return this._on(!1,e,t,i,r,(n,o)=>t.call(i,o)).disposer}onDebounced(e,t,i,r,n=!0){return this._on(!1,e,t,r,n,(o,u)=>t.call(r,u),i).disposer}once(e,t,i,r=!0){let n=this._on(!0,e,t,i,r,(o,u)=>{n.disposer.dispose(),t.call(i,u)});return n.disposer}off(e,t,i){this._removeExistingListener(!1,e,t,i)}copyFrom(e){if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");let t=[];return l(e._listeners,i=>{!i.killed&&i.shouldClone&&(i.type===null?t.push(this.onAll(i.callback,i.context)):i.once?t.push(this.once(i.type,i.callback,i.context)):t.push(this.on(i.type,i.callback,i.context)))}),new p(t)}};function L(s){h(s,(e,t)=>{$(t)&&typeof t.dispose=="function"&&(t.enableDispose=!0,t.dispose())})}var S=class{constructor(e,t,i){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=e,this._template=t,this._settings=i}_dispose(){L(this._settings)}get(e,t){let i=this._settings[e];return i!==void 0?i:t}set(e,t){this._settings[e]=t,this._template._stateChanged(this._name)}remove(e){delete this._settings[e],this._template._stateChanged(this._name)}setAll(e){b(e).forEach(t=>{this._settings[t]=e[t]}),this._template._stateChanged(this._name)}_apply(e,t){h(this._settings,(i,r)=>{!t[i]&&!e._userSettings[i]&&(t[i]=!0,e.setRaw(i,r))})}},I=class{constructor(e){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=e}_dispose(){h(this._states,(e,t)=>{t._dispose()})}lookup(e){return this._states[e]}create(e,t){let i=this._states[e];if(i)return i.setAll(t),i;{let r=new S(e,this._template,t);return this._states[e]=r,this._template._stateChanged(e),r}}remove(e){delete this._states[e],this._template._stateChanged(e)}_apply(e,t){h(this._states,(i,r)=>{let n=t.states[i];n==null&&(n=t.states[i]={});let o=e.states.create(i,{});r._apply(o,n)})}},C=class{constructor(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}add(e,t){let i=this._callbacks[e];return i===void 0&&(i=this._callbacks[e]=[]),i.push(t),new c(()=>{_(i,t),i.length===0&&delete this._callbacks[e]})}remove(e){this._callbacks[e]!==void 0&&delete this._callbacks[e]}_apply(e){let t=[];return h(this._callbacks,(i,r)=>{l(r,n=>{t.push(e.adapters.add(i,n))})}),new p(t)}},O=class s{constructor(e,t){if(Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new I(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new C}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new y}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e}static new(e){return new s(e,!0)}_dispose(){L(this._settings),L(this._privateSettings)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}_checkDisposed(){if(this._disposed)throw new Error("Template is disposed")}get entities(){return this._entities}get(e,t){this._checkDisposed();let i=this._settings[e];return i!==void 0?i:t}setRaw(e,t){this._checkDisposed(),this._settings[e]=t}set(e,t){this._checkDisposed(),this._settings[e]!==t&&(this.setRaw(e,t),this._entities.forEach(i=>{i._setTemplateProperty(this,e,t)}))}remove(e){this._checkDisposed(),e in this._settings&&(delete this._settings[e],this._entities.forEach(t=>{t._removeTemplateProperty(e)}))}removeAll(){this._checkDisposed(),h(this._settings,(e,t)=>{this.remove(e)})}getPrivate(e,t){this._checkDisposed();let i=this._privateSettings[e];return i!==void 0?i:t}setPrivateRaw(e,t){return this._checkDisposed(),this._privateSettings[e]=t,t}setPrivate(e,t){return this._checkDisposed(),this._privateSettings[e]!==t&&(this.setPrivateRaw(e,t),this._entities.forEach(i=>{i._setTemplatePrivateProperty(this,e,t)})),t}removePrivate(e){this._checkDisposed(),e in this._privateSettings&&(delete this._privateSettings[e],this._entities.forEach(t=>{t._removeTemplatePrivateProperty(e)}))}setAll(e){this._checkDisposed(),h(e,(t,i)=>{this.set(t,i)})}on(e,t){this._checkDisposed();let i=this._settingEvents[e];return i===void 0&&(i=this._settingEvents[e]=[]),i.push(t),new c(()=>{_(i,t),i.length===0&&delete this._settingEvents[e]})}onPrivate(e,t){this._checkDisposed();let i=this._privateSettingEvents[e];return i===void 0&&(i=this._privateSettingEvents[e]=[]),i.push(t),new c(()=>{_(i,t),i.length===0&&delete this._privateSettingEvents[e]})}_apply(e,t){this._checkDisposed();let i=[];return h(this._settingEvents,(r,n)=>{l(n,o=>{i.push(e.on(r,o))})}),h(this._privateSettingEvents,(r,n)=>{l(n,o=>{i.push(e.onPrivate(r,o))})}),this.states._apply(e,t),i.push(this.adapters._apply(e)),i.push(e.events.copyFrom(this.events)),new p(i)}_setObjectTemplate(e){this._checkDisposed(),this._entities.push(e)}_removeObjectTemplate(e){v(this._entities,e)}_stateChanged(e){this._checkDisposed(),this._entities.forEach(t=>{t._applyStateByKey(e)})}};function m(s,e){return s===e?0:s<e?-1:1}function U(s,e,t){let i=s.length,r=e.length,n=Math.min(i,r);for(let o=0;o<n;++o){let u=t(s[o],e[o]);if(u!==0)return u}return m(i,r)}function Re(s,e){return s===e?0:s<e?-1:1}var V=class{constructor(e,t){if(Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=e,!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(e){let t=new this(e,!0);return t.setupDefaultRules(),t}setupDefaultRules(){}_lookupRules(e){return this._rules[e]}ruleRaw(e,t=[]){let i=this._rules[e];i||(i=this._rules[e]=[]),t.sort(m);let{index:r,found:n}=A(i,o=>{let u=m(o.tags.length,t.length);return u===0?U(o.tags,t,m):u});if(n)return i[r].template;{let o=O.new({});return i.splice(r,0,{tags:t,template:o}),o}}rule(e,t=[]){return this.ruleRaw(e,t)}};export{E as a,R as b,X as c,Z as d,N as e,F as f,a as g,$ as h,ee as i,te as j,se as k,w as l,D as m,ie as n,l as o,re as p,ne as q,v as r,_ as s,ae as t,de as u,ge as v,B as w,z as x,we as y,ve as z,A,Oe as B,Pe as C,f as D,b as E,K as F,je as G,h as H,Ee as I,q as J,g as K,c as L,G as M,p as N,J as O,Q as P,y as Q,m as R,U as S,Re as T,O as U,V};
