/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import{C as V,D as R,K as y,M as k,h as x}from"./5DXMZMVZ.js";import{N as v,Q as G,d as D,f as O,o as C,q as $,u as w}from"./VUQ2DCM6.js";import{a as B}from"./Z5DBBLVJ.js";import{N as E,g as m,o as M}from"./DJXREF5L.js";var c=class extends R{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let e=this.width(),t=this.height(),i=e/Math.abs(e),n=t/Math.abs(t),s=0,r=0,l=this.get("strokeWidth",0);this.get("containStroke",!1)&&(e-=i*l,t-=n*l,s+=i*l/2,r+=n*l/2);let a=e,h=t;if(m(a)&&m(h)){let o=Math.min(a,h)/2,d=w(this.get("cornerRadiusTL",8),o),u=w(this.get("cornerRadiusTR",8),o),g=w(this.get("cornerRadiusBR",8),o),f=w(this.get("cornerRadiusBL",8),o),b=Math.min(Math.abs(a/2),Math.abs(h/2));d=x(d,0,b),u=x(u,0,b),g=x(g,0,b),f=x(f,0,b);let p=this._display;p.moveTo(s+d*i,r),p.lineTo(s+a-u*i,r),u>0&&p.arcTo(s+a,r,s+a,r+u*n,u),p.lineTo(s+a,r+h-g*n),g>0&&p.arcTo(s+a,r+h,s+a-g*i,r+h,g),p.lineTo(s+f*i,r+h),f>0&&p.arcTo(s,r+h,s,r+h-f*n,f),p.lineTo(s,r+d*n),d>0&&p.arcTo(s,r,s+d*i,r,d),p.closePath()}}};Object.defineProperty(c,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"});Object.defineProperty(c,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:R.classNames.concat([c.className])});var _=class extends y{_afterNew(){this._settings.themeTags=v(this._settings.themeTags,["button"]),super._afterNew(),this._settings.background||this.set("background",c.new(this._root,{themeTags:v(this._settings.themeTags,["background"])})),this.setPrivate("trustBounds",!0)}_prepareChildren(){if(super._prepareChildren(),this.isDirty("icon")){let e=this._prevSettings.icon,t=this.get("icon");t!==e&&(this._disposeProperty("icon"),e&&e.dispose(),t&&this.children.push(t),this._prevSettings.icon=t)}if(this.isDirty("label")){let e=this._prevSettings.label,t=this.get("label");t!==e&&(this._disposeProperty("label"),e&&e.dispose(),t&&this.children.push(t),this._prevSettings.label=t)}}};Object.defineProperty(_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});Object.defineProperty(_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.classNames.concat([_.className])});var T=class extends k{constructor(){super(...arguments),Object.defineProperty(this,"_editOnEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew();let e=this.children.push(y.new(this._root,{html:'<textarea class="am5-editable-label"></textarea>',isMeasured:!1}));e.hide(),this.setPrivate("input",e);let t=this.get("background");t?t.set("themeTags",["editablelabel","background"]):t=this.set("background",c.new(this._root,{themeTags:["editablelabel","background"]}))}_beforeChanged(){if(super._beforeChanged(),this.isDirty("editOn")){this._editOnEvents&&this._editOnEvents.dispose();let e=this.get("editOn","click");e!="none"&&(this._editOnEvents=new E([this.getPrivate("input").events.on(e,t=>{}),this.events.on(e,t=>{this.set("active",!0)})]))}}_prepareChildren(){super._prepareChildren(),this._maybeInitTextarea()}_updateChildren(){if(super._updateChildren(),this.isDirty("active")){let e=this.get("active",!1);e?this._startEditing():this._stopEditing();let t=this.get("background");t&&t.set("active",e)}this._syncText(),this._syncStyle()}_maybeInitTextarea(){if(!this._isInited()){let e=this.getPrivate("input");if(e&&e.getPrivate("htmlElement")){let i=e.getPrivate("htmlElement").querySelector(".am5-editable-label");i&&(this.setPrivate("textarea",i),i.addEventListener("input",n=>{this.get("multiLine")===!1&&(i.value=i.value.replace(/\n/g," ")),this.set("text",i.value),this._syncStyle()}),i.addEventListener("blur",n=>this.set("active",!1)),O("keyboardevents")&&this._disposers.push(D(document,"keydown",n=>{$(n)=="Escape"&&this.set("active",!1)})),this._disposers.push(D(document,"keydown",n=>{$(n)=="Enter"&&this.get("multiLine")===!1&&(n.preventDefault(),this.set("active",!1))})),this.events.dispatch("inited",{type:"inited",target:this}))}}}_isInited(){return!!this.getPrivate("textarea")}_startEditing(){if(!this._isInited()){this.events.once("inited",()=>{this._startEditing()});return}this._text.set("opacity",0);let e=this.getPrivate("input"),t=this.getPrivate("textarea");t&&(this.get("text","")==""&&this.set("text"," "),e.show(0),this.setTimeout(()=>{this._syncStyle(),t.focus()},100))}_stopEditing(){if(!this._isInited()){this.events.once("inited",()=>{this._stopEditing()});return}let e=this.getPrivate("input"),t=this.getPrivate("textarea");t&&(this.set("text",t.value),e.hide(0),this._text.set("opacity",1))}_syncStyle(){let e=this.getPrivate("input"),t=this.getPrivate("textarea"),i=e.getPrivate("htmlElement");if(t&&i){let n=window.getComputedStyle(t);M(n,u=>{t.style[u]="initial"}),t.style.color=this.get("fill",G(0)).toCSS(this.get("fillOpacity",1)),t.style.backgroundColor="rgba(0, 0, 0, 0)",t.style.border="none",t.style.outline="none",t.style.padding="0",t.wrap="off",t.style.resize="none",t.style.overflow="hidden";let s=this.get("maxWidth",0)-this.get("paddingLeft",0)-this.get("paddingRight",0);s>0?t.style.maxWidth=s+"px":t.style.minWidth="",t.style.height="auto",t.style.minHeight=t.scrollHeight+"px",this.get("width")&&(t.style.width=this.width()-this.get("paddingLeft",0)-this.get("paddingRight",0)+"px",t.style.minWidth="");let r=this.get("lineHeight");r?r instanceof B?t.style.lineHeight=r.value+"":m(r)&&(t.style.lineHeight=r+""):t.style.lineHeight="1.2";let l=this.get("fontFamily");l||(l=getComputedStyle(i,"font-family").getPropertyValue("font-family")),t.style.fontFamily=l;let a=this.get("fontSize");a?m(a)?a=a+"px":a=a:a=getComputedStyle(i,"font-size").getPropertyValue("font-size"),t.style.fontSize=a;let h=this.get("fontWeight");h?h=h:h=getComputedStyle(i,"font-weight").getPropertyValue("font-weight"),t.style.fontWeight=h;let o=this.get("fontStyle");o?o=o:o=getComputedStyle(i,"font-style").getPropertyValue("font-style"),t.style.fontStyle=o,this.get("oversizedBehavior")=="wrap"?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="nowrap",this._root.events.on("frameended",()=>{t.style.minWidth==""&&(t.style.minWidth=t.scrollWidth+20+"px");let u=this.get("textAlign","start");u=="center"?(t.style.textAlign="center",!i.style.transform.match(/translateX/)&&!this.get("width")&&(i.style.transform+=" translateX(-50%)")):u=="end"?(t.style.textAlign="right",!i.style.transform.match(/translateX/)&&!this.get("width")&&(i.style.transform+=" translateX(-100%)")):t.style.textAlign=u})}}_syncText(){let e=this.getPrivate("textarea"),t=this.get("text","");t==" "&&(t=""),e&&(e.value=t)}};Object.defineProperty(T,"className",{enumerable:!0,configurable:!0,writable:!0,value:"EditableLabel"});Object.defineProperty(T,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:k.classNames.concat([T.className])});var P=class extends y{constructor(){super(...arguments),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:this._makeThumb()}),Object.defineProperty(this,"startGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"endGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"_thumbBusy",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_startDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_endDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_thumbDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_gripDown",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_addOrientationClass(){this._settings.themeTags=v(this._settings.themeTags,["scrollbar",this._settings.orientation]),this._settings.background||(this._settings.background=c.new(this._root,{themeTags:v(this._settings.themeTags,["main","background"])}))}_makeButton(){return this.children.push(_.new(this._root,{themeTags:["resize","button",this.get("orientation")],icon:V.new(this._root,{themeTags:["icon"]})}))}_makeThumb(){return this.children.push(c.new(this._root,{themeTags:["thumb",this.get("orientation")]}))}_handleAnimation(e){e&&this._disposers.push(e.events.on("stopped",()=>{this.setPrivateRaw("isBusy",!1),this._thumbBusy=!1}))}_afterNew(){this._addOrientationClass(),super._afterNew();let e=this.startGrip,t=this.endGrip,i=this.thumb,n=this.get("background");n&&this._disposers.push(n.events.on("click",s=>{this.setPrivateRaw("isBusy",!0);let r=this._display.toLocal(s.point),l=this.width(),a=this.height(),h=this.get("orientation"),o;h=="vertical"?o=(r.y-i.height()/2)/a:o=(r.x-i.width()/2)/l;let d,u;h=="vertical"?(d=o*a,u="y"):(d=o*l,u="x");let g=this.get("animationDuration",0);g>0?(this._thumbBusy=!0,this._handleAnimation(this.thumb.animate({key:u,to:d,duration:g,easing:this.get("animationEasing")}))):(this.thumb.set(u,d),this._root.events.once("frameended",()=>{this.setPrivateRaw("isBusy",!1)}))})),this._disposers.push(i.events.on("dblclick",s=>{if(!C(s.originalEvent,this))return;let r=this.get("animationDuration",0),l=this.get("animationEasing");this.animate({key:"start",to:0,duration:r,easing:l}),this.animate({key:"end",to:1,duration:r,easing:l})})),this._disposers.push(e.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._startDown=!0,this._gripDown="start"})),this._disposers.push(t.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._endDown=!0,this._gripDown="end"})),this._disposers.push(i.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._thumbDown=!0,this._gripDown=void 0})),this._disposers.push(e.events.on("globalpointerup",()=>{this._startDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._startDown=!1})),this._disposers.push(t.events.on("globalpointerup",()=>{this._endDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._endDown=!1})),this._disposers.push(i.events.on("globalpointerup",()=>{this._thumbDown&&(this.setPrivateRaw("isBusy",!1),this._released()),this._thumbDown=!1})),this._disposers.push(e.on("x",()=>{this._updateThumb()})),this._disposers.push(t.on("x",()=>{this._updateThumb()})),this._disposers.push(e.on("y",()=>{this._updateThumb()})),this._disposers.push(t.on("y",()=>{this._updateThumb()})),this._disposers.push(i.events.on("positionchanged",()=>{this._updateGripsByThumb()})),this.get("orientation")=="vertical"?(e.set("x",0),t.set("x",0),this._disposers.push(i.adapters.add("y",s=>Math.max(Math.min(Number(s),this.height()-i.height()),0))),this._disposers.push(i.adapters.add("x",s=>this.width()/2)),this._disposers.push(e.adapters.add("x",s=>this.width()/2)),this._disposers.push(t.adapters.add("x",s=>this.width()/2)),this._disposers.push(e.adapters.add("y",s=>Math.max(Math.min(Number(s),this.height()),0))),this._disposers.push(t.adapters.add("y",s=>Math.max(Math.min(Number(s),this.height()),0)))):(e.set("y",0),t.set("y",0),this._disposers.push(i.adapters.add("x",s=>Math.max(Math.min(Number(s),this.width()-i.width()),0))),this._disposers.push(i.adapters.add("y",s=>this.height()/2)),this._disposers.push(e.adapters.add("y",s=>this.height()/2)),this._disposers.push(t.adapters.add("y",s=>this.height()/2)),this._disposers.push(e.adapters.add("x",s=>Math.max(Math.min(Number(s),this.width()),0))),this._disposers.push(t.adapters.add("x",s=>Math.max(Math.min(Number(s),this.width()),0))))}_updateChildren(){super._updateChildren(),(this.isDirty("end")||this.isDirty("start")||this._sizeDirty)&&this.updateGrips()}_changed(){if(super._changed(),this.isDirty("start")||this.isDirty("end")){let e="rangechanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,start:this.get("start",0),end:this.get("end",1),grip:this._gripDown})}}_released(){let e="released";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}updateGrips(){let e=this.startGrip,t=this.endGrip,i=this.get("orientation"),n=this.height(),s=this.width();i=="vertical"?(e.set("y",n*this.get("start",0)),t.set("y",n*this.get("end",1))):(e.set("x",s*this.get("start",0)),t.set("x",s*this.get("end",1)));let r=this.getPrivate("positionTextFunction"),l=Math.round(this.get("start",0)*100),a=Math.round(this.get("end",0)*100),h,o;r?(h=r.call(this,this.get("start",0)),o=r.call(this,this.get("end",0))):(h=l+"%",o=a+"%"),e.set("ariaLabel",this._t("From %1",void 0,h)),e.set("ariaValueNow",""+l),e.set("ariaValueText",l+"%"),e.set("ariaValueMin","0"),e.set("ariaValueMax","100"),t.set("ariaLabel",this._t("To %1",void 0,o)),t.set("ariaValueNow",""+a),t.set("ariaValueText",a+"%"),t.set("ariaValueMin","0"),t.set("ariaValueMax","100")}_updateThumb(){let e=this.thumb,t=this.startGrip,i=this.endGrip,n=this.height(),s=this.width(),r=t.x(),l=i.x(),a=t.y(),h=i.y(),o=0,d=1;this.get("orientation")=="vertical"?m(a)&&m(h)&&(!this._thumbBusy&&!e.isDragging()&&(e.set("height",h-a),e.set("y",a)),o=a/n,d=h/n):m(r)&&m(l)&&(!this._thumbBusy&&!e.isDragging()&&(e.set("width",l-r),e.set("x",r)),o=r/s,d=l/s),this.getPrivate("isBusy")&&(this.get("start")!=o||this.get("end")!=d)&&(this.set("start",o),this.set("end",d));let u=this.getPrivate("positionTextFunction"),g=Math.round(this.get("start",0)*100),f=Math.round(this.get("end",0)*100),b,p;u?(b=u.call(this,this.get("start",0)),p=u.call(this,this.get("end",0))):(b=g+"%",p=f+"%"),e.set("ariaLabel",this._t("From %1 to %2",void 0,b,p)),e.set("ariaValueNow",""+g),e.set("ariaValueText",g+"%")}_updateGripsByThumb(){let e=this.thumb,t=this.startGrip,i=this.endGrip;if(this.get("orientation")=="vertical"){let n=e.height();t.set("y",e.y()),i.set("y",e.y()+n)}else{let n=e.width();t.set("x",e.x()),i.set("x",e.x()+n)}}};Object.defineProperty(P,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Scrollbar"});Object.defineProperty(P,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.classNames.concat([P.className])});export{c as a,_ as b,T as c,P as d};
