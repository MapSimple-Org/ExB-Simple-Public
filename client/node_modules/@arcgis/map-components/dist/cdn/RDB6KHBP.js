/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.3 */
import a from"./OIWZBZDP.js";import{a as _}from"./WWP67VI5.js";import{a as d}from"./NZ53PAWS.js";import"./MGF5CCZW.js";import"./TC4TLAIC.js";import{J as $,K as i,M as v,P as w,a as g,b as l}from"./U4NXTENC.js";import"./7V34NQ5V.js";export default $arcgis.t(([{watch:L},{a:f,b:T,c:b,d:y,f:p}])=>{var M=g`.arcgis-print__template-select-flow-item-container{display:flex;flex-direction:column;justify-content:space-between;overflow-y:hidden;flex-grow:1}.arcgis-print__template-select-flow-item-container .arcgis-print__template-select-flow-item-content{display:flex;flex-direction:column;overflow-y:auto;flex:1 0}.arcgis-print__template-select-flow-item-container .arcgis-print__template-select-flow-item-content .arcgis-print__template-select-flow-item-list-heading{display:flex;gap:var(--calcite-spacing-xs);align-items:center;padding:var(--calcite-spacing-md) var(--calcite-spacing-lg);background-color:var(--calcite-color-foreground-2);border-bottom:1px solid var(--calcite-color-border-3);font-weight:var(--calcite-font-weight-semibold)}.arcgis-print__template-button-container{padding:var(--calcite-spacing-md)}.arcgis-print__template-done-button{width:100%}`,o="arcgis-print",s={templateSelectError:`${o}__template-select-error`,templateButtonContainer:`${o}__template-button-container`,templateDoneButton:`${o}__template-done-button`,templateSelectFlowItemContainer:`${o}__template-select-flow-item-container`,templateSelectFlowItemContent:`${o}__template-select-flow-item-content`,templateSelectFlowItemListHeading:`${o}__template-select-flow-item-list-heading`,browseTemplateButtonContainer:`${o}__browse-template-button-container`,browseTemplateButtonContainerFilter:`${o}__browse-template-button-container-filter`},u=class extends ${constructor(){super(...arguments),this._handles=_("disconnect")}static{this.properties={_selectedTemplate:16,excludeOrganizationTemplates:5,browseTemplateButtonOnClick:0,viewModel:0,messages:0,hideTemplateSelector:0}}static{this.styles=M}loaded(){this.manager.onLifecycle(()=>[L(()=>this.viewModel.templateOptions.id,e=>{this._handles.removeHandles("template-handle"),this._selectedTemplate=e?this.viewModel.getLayoutTemplateById(e)??void 0:void 0,this._handles.addHandles(L(()=>this._selectedTemplate?.state,()=>this.requestUpdate(),{initial:!0}),"template-handle")},{initial:!0})])}_getPortalTemplates(){let{portalTemplateIds:e}=this.viewModel;return this.viewModel.includeDefaultTemplates&&!this.excludeOrganizationTemplates?this.viewModel.defaultTemplates.toArray().filter(({layout:n,layoutItem:a})=>!p(n)&&!!a?.id&&e.includes(a.id)):[]}_getDefaultTemplates(){let{portalTemplateIds:e}=this.viewModel;return this.viewModel.includeDefaultTemplates?this.viewModel.defaultTemplates.toArray().filter(({layout:n,layoutItem:a})=>!p(n)&&(!a?.id||!e.includes(a.id))):[]}_getPrintServiceTemplates(){return!this.viewModel.includeDefaultTemplates||!this._getDefaultTemplates().length?this.viewModel.printServiceTemplates.toArray().filter(({layout:e})=>!p(e)):[]}render(){let{messages:e}=this,n=f.test(this.viewModel.portal?.url),a=this.viewModel.browseTemplates.toArray(),t=this._getPortalTemplates(),c=this._getDefaultTemplates(),m=this._getPrintServiceTemplates(),r=a.length+t.length+c.length+m.length>15,h=this.browseTemplateButtonOnClick?l`<calcite-button appearance=outline class=${i(r?s.browseTemplateButtonContainerFilter:s.browseTemplateButtonContainer)} icon-start=folder @click=${this.browseTemplateButtonOnClick} .slot=${r?"filter-actions-end":"default"}>${r?null:e.browseTemplates}</calcite-button>`:null;return l`<div class=${i(s.templateSelectFlowItemContainer)}><div class=${i(s.templateSelectFlowItemContent)}>${r?null:h}${d("template-list",l`<calcite-list .filterEnabled=${r} .filterProps=${["label"]} .label=${e.templateList} selection-mode=single-persist @calciteListChange=${({currentTarget:S})=>this.viewModel.applyTemplate(S.selectedItems[0]?.value)}>${r?h:null}${a.length?l`<div><div class=${i(s.templateSelectFlowItemListHeading)}>${e.myTemplates}${n?l`<calcite-chip appearance=outline kind=neutral .label=${e.beta} scale=s>${e.beta}</calcite-chip>`:null}</div>${this._renderLayoutTemplates(a,!0,!0)}</div>`:null}${t.length?l`<div><div class=${i(s.templateSelectFlowItemListHeading)}>${e.organizationTemplates}${n?l`<calcite-chip appearance=outline kind=neutral .label=${e.beta} scale=s>${e.beta}</calcite-chip>`:null}</div>${this._renderLayoutTemplates(t)}</div>`:null}${a.length||t.length?c.length?l`<div><div class=${i(s.templateSelectFlowItemListHeading)}>${e.defaultTemplates}</div>${this._renderLayoutTemplates(c,!0)}</div>`:null:this._renderLayoutTemplates(c,!0)}${a.length||t.length?m.length?l`<div><div class=${i(s.templateSelectFlowItemListHeading)}>${e.defaultTemplates}</div>${this._renderLayoutTemplates(m)}</div>`:null:this._renderLayoutTemplates(m)}</calcite-list>`)}</div><div class=${i(s.templateButtonContainer)}><calcite-button class=${i(s.templateDoneButton)} @click=${this.hideTemplateSelector}>Done</calcite-button></div></div>`}_renderLayoutTemplates(e,n=!1,a=!1){return n&&e.sort((t,c)=>(t.label??"")>(c.label??"")?1:-1),e.map(t=>l`<calcite-list-item .description=${T(t)} .label=${b(t,this.messages)} .selected=${t.id===this.viewModel.templateOptions.id} title=${t.description??""??v} .value=${t}><calcite-icon .icon=${(t.layout?y(t.layout):null)||"custom-print"} slot=content-start></calcite-icon>${t.state==="loading"?l`<calcite-loader inline label=loading scale=s slot=content-end></calcite-loader>`:null}${t?.state==="error"?d(`template-error-${t.id}`,l`<calcite-icon class=${i(s.templateSelectError)} icon=exclamation-mark-circle scale=s slot=content-end></calcite-icon>`):null}${a?l`<calcite-action icon=trash @click=${()=>this.viewModel.removePortalTemplate(t)} slot=actions-end text=delete></calcite-action>`:null}</calcite-list-item>`)}};w("arcgis-print-template-selector",u);return u},"core/reactiveUtils",a)