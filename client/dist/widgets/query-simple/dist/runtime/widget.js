System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/sql-expression-runtime","widgets/shared-code/common","jimu-layouts/layout-runtime","jimu-theme"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/filled/directional/down.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/filled/directional/down.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownFilled: () => (/* binding */ DownFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/down.svg */ "./jimu-icons/svg/filled/directional/down.svg");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/filled/directional/right.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/filled/directional/right.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightFilled: () => (/* binding */ RightFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/right.svg */ "./jimu-icons/svg/filled/directional/right.svg");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowLeftOutlined: () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/collapse-all.tsx":
/*!**********************************************************!*\
  !*** ./jimu-icons/outlined/directional/collapse-all.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollapseAllOutlined: () => (/* binding */ CollapseAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/collapse-all.svg */ "./jimu-icons/svg/outlined/directional/collapse-all.svg");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CollapseAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/expand-all.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/expand-all.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExpandAllOutlined: () => (/* binding */ ExpandAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/expand-all.svg */ "./jimu-icons/svg/outlined/directional/expand-all.svg");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ExpandAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/trash.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TrashOutlined: () => (/* binding */ TrashOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/svg/filled/directional/down.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/down.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m14 4-6 8-6-8z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/directional/right.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/right.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m4 2 8 6-8 6z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/collapse-all.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/collapse-all.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/expand-all.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/expand-all.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/error.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/error.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/icon.svg":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/query-simple/icon.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" d=\"M8.5 3A5.5 5.5 0 0 1 14 8.5a5.5 5.5 0 0 1-1.273 3.527l4.053 4.054a.75.75 0 1 1-1.06 1.06l-4.054-4.053a5.5 5.5 0 0 1-3.527 1.273 5.5 5.5 0 1 1 0-11H8.5zm0 1.5h-.361a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\"></path><rect width=\"19\" height=\"19\" x=\".5\" y=\".5\" stroke=\"#000\" rx=\"1.5\"></rect></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/config.ts":
/*!************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateToolType: () => (/* binding */ CreateToolType),
/* harmony export */   FieldsType: () => (/* binding */ FieldsType),
/* harmony export */   ListDirection: () => (/* binding */ ListDirection),
/* harmony export */   PagingType: () => (/* binding */ PagingType),
/* harmony export */   QueryArrangeType: () => (/* binding */ QueryArrangeType),
/* harmony export */   ResultSelectMode: () => (/* binding */ ResultSelectMode),
/* harmony export */   SelectionType: () => (/* binding */ SelectionType),
/* harmony export */   SortDirection: () => (/* binding */ SortDirection),
/* harmony export */   SpatialFilterType: () => (/* binding */ SpatialFilterType),
/* harmony export */   SpatialRelation: () => (/* binding */ SpatialRelation),
/* harmony export */   SymbolType: () => (/* binding */ SymbolType),
/* harmony export */   UnitType: () => (/* binding */ UnitType),
/* harmony export */   mapJSAPISpatialRelToDsSpatialRel: () => (/* binding */ mapJSAPISpatialRelToDsSpatialRel),
/* harmony export */   mapJSAPIUnitToDsUnit: () => (/* binding */ mapJSAPIUnitToDsUnit)
/* harmony export */ });
var CreateToolType;
(function (CreateToolType) {
    CreateToolType["Point"] = "Point";
    CreateToolType["Polyline"] = "Polyline";
    CreateToolType["Polygon"] = "Polygon";
    CreateToolType["Rectangle"] = "Rectangle";
    CreateToolType["Circle"] = "Circle";
})(CreateToolType || (CreateToolType = {}));
var SelectionType;
(function (SelectionType) {
    SelectionType["NewSelection"] = "NEW_SELECTION";
    SelectionType["AddToSelection"] = "ADD_TO_CURRENT_SELECTION";
    SelectionType["RemoveFromSelection"] = "REMOVE_FROM_CURRENT_SELECTION";
    SelectionType["SubsetSelection"] = "SUBSET_FROM_CURRENT_SELECTION";
    SelectionType["SwitchSelection"] = "SWITCH_CURRENT_SELECTION";
})(SelectionType || (SelectionType = {}));
var QueryArrangeType;
(function (QueryArrangeType) {
    QueryArrangeType["Block"] = "BLOCK";
    QueryArrangeType["Inline"] = "INLINE";
    QueryArrangeType["Popper"] = "POPPER";
})(QueryArrangeType || (QueryArrangeType = {}));
var SpatialFilterType;
(function (SpatialFilterType) {
    SpatialFilterType["CurrentMapExtent"] = "CurrentMapExtent";
    SpatialFilterType["InteractiveDrawMode"] = "InteractiveDrawMode";
    SpatialFilterType["None"] = "";
})(SpatialFilterType || (SpatialFilterType = {}));
var SpatialRelation;
(function (SpatialRelation) {
    SpatialRelation["Intersect"] = "intersects";
    SpatialRelation["Contain"] = "contains";
    SpatialRelation["Cross"] = "crosses";
    SpatialRelation["EnvelopeIntersect"] = "envelope-intersects";
    SpatialRelation["IndexIntersect"] = "index-intersects";
    SpatialRelation["Overlap"] = "overlaps";
    SpatialRelation["Touch"] = "touches";
    SpatialRelation["Within"] = "within";
})(SpatialRelation || (SpatialRelation = {}));
const mapJSAPISpatialRelToDsSpatialRel = {
    [SpatialRelation.Intersect]: 'esriSpatialRelIntersects',
    [SpatialRelation.Contain]: 'esriSpatialRelContains',
    [SpatialRelation.Cross]: 'esriSpatialRelCrosses',
    [SpatialRelation.EnvelopeIntersect]: 'esriSpatialRelEnvelopeIntersects',
    [SpatialRelation.IndexIntersect]: 'esriSpatialRelIndexIntersects',
    [SpatialRelation.Overlap]: 'esriSpatialRelOverlaps',
    [SpatialRelation.Touch]: 'esriSpatialRelTouches',
    [SpatialRelation.Within]: 'esriSpatialRelWithin'
};
var UnitType;
(function (UnitType) {
    UnitType["Miles"] = "Miles";
    UnitType["Kilometers"] = "Kilometers";
    UnitType["Feet"] = "Feet";
    UnitType["Meters"] = "Meters";
    UnitType["NauticalMiles"] = "NauticalMiles";
})(UnitType || (UnitType = {}));
const mapJSAPIUnitToDsUnit = {
    [UnitType.Miles]: 'esriSRUnit_StatuteMile',
    [UnitType.Kilometers]: 'esriSRUnit_Kilometer',
    [UnitType.Feet]: 'esriSRUnit_Foot',
    [UnitType.Meters]: 'esriSRUnit_Meter',
    [UnitType.NauticalMiles]: 'esriSRUnit_NauticalMile'
};
var ListDirection;
(function (ListDirection) {
    ListDirection["Horizontal"] = "Horizontal";
    ListDirection["Vertical"] = "Vertical";
})(ListDirection || (ListDirection = {}));
var PagingType;
(function (PagingType) {
    PagingType["MultiPage"] = "MultiPage";
    PagingType["LazyLoad"] = "LazyLoad";
    PagingType["Simple"] = "Simple";
})(PagingType || (PagingType = {}));
var FieldsType;
(function (FieldsType) {
    FieldsType["PopupSetting"] = "PopupSetting";
    FieldsType["SelectAttributes"] = "SelectAttributes";
})(FieldsType || (FieldsType = {}));
var SortDirection;
(function (SortDirection) {
    SortDirection["Asc"] = "Asc";
    SortDirection["Desc"] = "Desc";
})(SortDirection || (SortDirection = {}));
var ResultSelectMode;
(function (ResultSelectMode) {
    ResultSelectMode["Single"] = "Single";
    ResultSelectMode["Multiple"] = "Multiple";
})(ResultSelectMode || (ResultSelectMode = {}));
var SymbolType;
(function (SymbolType) {
    SymbolType["DefaultSymbol"] = "DefaultSymbol";
    SymbolType["CustomSymbol"] = "CustomSymbol";
})(SymbolType || (SymbolType = {}));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAddToMapAction: () => (/* binding */ createAddToMapAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Custom "Add to Map" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Show on Map" action with a custom
 * implementation that uses QuerySimple's selection process (selectRecordsAndPublish).
 * This ensures consistent behavior with query results and proper integration
 * with the widget's "Clear results" functionality.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Add to Map" data action that uses QuerySimple's selection process.
 *
 * This action replaces the framework's "Show on Map" action and ensures consistent
 * behavior with QuerySimple's query results by using the same selection mechanism.
 *
 * @param widgetId - The widget ID that provides this action
 * @param outputDS - The output data source (used for selection on the origin layer)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration (for zoomToSelected setting)
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns A DataAction object that can be used by DataActionList
 */
function createAddToMapAction(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    return {
        id: `${widgetId}-addToMap`,
        name: 'addToMap',
        label: intl.formatMessage({ id: 'addToMap', defaultMessage: 'Add to map' }),
        // Icon matches the framework's "Show on Map" action for consistency
        icon: (__webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg"),
        // Note: Index may not control position if extraActions are always appended after framework actions
        index: -100,
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records
            if (!dataSets || dataSets.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'No data sets'
                });
                return false;
            }
            // Check if we have records and output data source
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            const supported = hasRecords && !!outputDS;
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                result: supported,
                hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return supported;
        }),
        /**
         * Executes the action by selecting records using QuerySimple's selection process.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            if (!outputDS || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: !outputDS ? 'No outputDS' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            // Get record IDs
            const recordIds = allRecords.map(record => record.getId());
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                recordsCount: allRecords.length,
                recordIds: recordIds.slice(0, 10), // Log first 10 IDs
                outputDSId: outputDS.id
            });
            // Use QuerySimple's selection process - selects on origin layer and publishes selection messages
            // This ensures consistent behavior with query results and proper integration with "Clear results"
            try {
                (0,_runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, allRecords, true);
                // Determine zoom behavior: runtime override takes precedence, then queryItem config, defaults to true
                const shouldZoom = runtimeZoomToSelected !== undefined
                    ? runtimeZoomToSelected
                    : ((queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== false);
                if (shouldZoom && allRecords.length > 0) {
                    const zoomDataSet = {
                        dataSource: outputDS,
                        records: allRecords,
                        name: outputDS.getLabel()
                    };
                    // Find and execute the zoomToFeature action from available framework actions
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().getSupportedActions(widgetId, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records)
                        .then(actionCategories => {
                        // Search through all action categories to find zoomToFeature action
                        let zoomAction = null;
                        for (const category in actionCategories) {
                            const actions = actionCategories[category];
                            zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature') || null;
                            if (zoomAction)
                                break;
                        }
                        if (zoomAction) {
                            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().executeDataAction(zoomAction, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records, widgetId);
                        }
                    })
                        .catch(error => {
                        debugLogger.log('DATA-ACTION', {
                            action: 'addToMap-onExecute-zoom',
                            error: error instanceof Error ? error.message : String(error)
                        });
                    });
                }
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: true,
                    message: 'Successfully selected records and published selection message',
                    zoomExecuted: shouldZoom
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                console.error('Error executing Add to Map action:', error);
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/index.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getExtraActions: () => (/* binding */ getExtraActions)
/* harmony export */ });
/* harmony import */ var _add_to_map_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-to-map-action */ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx");

/**
 * QuerySimple Custom Data Actions
 *
 * Returns custom data actions for the widget.
 * Includes a custom "Add to Map" action that uses QuerySimple's selection process.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source (null/undefined if not available)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns Array of custom DataAction objects (empty if conditions not met)
 */
function getExtraActions(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    // Only create the action if we have both an output data source and intl object
    if (outputDS && intl) {
        return [(0,_add_to_map_action__WEBPACK_IMPORTED_MODULE_0__.createAddToMapAction)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected)];
    }
    return [];
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/default-query-item.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/default-query-item.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_QUERY_ITEM: () => (/* binding */ DEFAULT_QUERY_ITEM)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/query-simple/src/config.ts");

const DEFAULT_QUERY_ITEM = {
    icon: null,
    displayLabel: true,
    sqlExprObj: null,
    useAttributeFilter: true,
    useSpatialFilter: true,
    spatialMapWidgetIds: [],
    spatialFilterTypes: [],
    spatialInteractiveCreateToolTypes: [
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Point,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polyline,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polygon,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Rectangle,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Circle
    ],
    spatialInteractiveEnableBuffer: false,
    spatialInteractiveBufferDistance: 0,
    spatialInteractiveBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    spatialRelations: [_config__WEBPACK_IMPORTED_MODULE_0__.SpatialRelation.Intersect],
    spatialRelationUseDataSources: [],
    spatialRelationEnableSelectTool: false,
    spatialRelationEnableBuffer: false,
    spatialRelationBufferDistance: 0,
    spatialRelationBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    resultListDirection: _config__WEBPACK_IMPORTED_MODULE_0__.ListDirection.Vertical,
    resultPagingStyle: _config__WEBPACK_IMPORTED_MODULE_0__.PagingType.MultiPage,
    resultFieldsType: _config__WEBPACK_IMPORTED_MODULE_0__.FieldsType.PopupSetting,
    resultSymbolType: _config__WEBPACK_IMPORTED_MODULE_0__.SymbolType.DefaultSymbol,
    resultCustomSymbol: {
        angle: 0,
        color: [255, 255, 255, 255],
        outline: {
            color: [255, 255, 255, 255],
            style: 'esriSLSSolid',
            type: 'esriSLS',
            width: 1
        },
        size: 6,
        style: 'esriSMSCircle',
        type: 'esriSMS',
        xoffset: 0,
        yoffset: 0
    },
    resultAllowChangeSymbol: false,
    allowExport: false,
    sortOptions: [],
    zoomToSelected: true,
    itemSizeMap: {
        arrangementHorizontalPopper: {
            minSize: { width: 300, height: 300 },
            defaultSize: { width: 360, height: 480 }
        }
    }
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferInput: () => (/* binding */ BufferInput)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */





function BufferInput(props) {
    const { distance = 0, unit = _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters, onBufferChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const [d, setD] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(distance);
    const [u, setU] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(unit);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_5__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        let changed = false;
        if (distance !== d) {
            setD(distance);
            changed = true;
        }
        if (unit !== u) {
            setU(unit);
            changed = true;
        }
        if (changed) {
            onBufferChange(distance, unit);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [distance, unit]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setD(distance);
            setU(unit);
            onBufferChange(distance, unit);
        }
    }, [queryTaskContext.resetSymbol, distance, unit, onBufferChange]);
    const handleDistanceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
    }, []);
    const handleDistanceAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
        onBufferChange(value, u);
    }, [onBufferChange, u]);
    const handleBufferUnitChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        setU(e.target.value);
        onBufferChange(d, e.target.value);
    }, [onBufferChange, d]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": getI18nMessage('theBufferDistance'), className: 'mr-1', value: d, onChange: handleDistanceChange, onAcceptValue: handleDistanceAccepted }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('unit'), value: u, onChange: handleBufferUnitChange, children: Object.values(_config__WEBPACK_IMPORTED_MODULE_3__.UnitType).map((value) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: value, children: getI18nMessage(`unit_${value}`) }, value))) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadStatus: () => (/* binding */ LoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/filled/directional/right */ "./jimu-icons/filled/directional/right.tsx");
/* harmony import */ var jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/filled/directional/down */ "./jimu-icons/filled/directional/down.tsx");

/** @jsx jsx */
// This file is duplicated from '../../../../feature-info/src/runtime/components/feature-info'





var LoadStatus;
(function (LoadStatus) {
    LoadStatus["Pending"] = "Pending";
    LoadStatus["Fulfilled"] = "Fulfilled";
    LoadStatus["Rejected"] = "Rejected";
})(LoadStatus || (LoadStatus = {}));
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  border: 1px solid var(--sys-color-divider-secondary);
  .esri-widget__heading {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    margin: 0;
    color: var(--sys-color-surface-paper-text);
  }

  .esri-feature__content-element {
    padding: 0;
  }

  .jimu-btn.expanded {
    align-self: flex-start;
  }
  
  // Larger expand/collapse button for better touch targets
  .jimu-btn[aria-label*="expand"],
  .jimu-btn[aria-label*="collapse"] {
    min-width: 32px;
    min-height: 32px;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .esri-feature.esri-widget {
    background-color: transparent;
  }
`;
class FeatureInfo extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor(props) {
        var _a, _b, _c, _d;
        super(props);
        this.toggleExpanded = (e) => {
            e.stopPropagation();
            this.setState({ showContent: !this.state.showContent });
        };
        const { togglable = false, expandByDefault } = this.props;
        const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
        const initialShowContent = !togglable || expandByDefault;
        console.log('[FeatureInfo] constructor', {
            event: 'FeatureInfo-constructor',
            recordId,
            togglable,
            expandByDefault,
            initialShowContent,
            timestamp: Date.now()
        });
        this.featureContainer = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.state = {
            showContent: initialShowContent,
            loadStatus: LoadStatus.Pending
        };
    }
    componentDidMount() {
        this.createFeature();
    }
    componentDidUpdate(prevProps) {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        if (this.feature) {
            if (prevProps.popupTemplate !== this.props.popupTemplate ||
                prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate ||
                prevProps.graphic !== this.props.graphic) {
                this.destroyFeature();
                this.createFeature();
            }
            else {
                this.feature.visibleElements = this.getVisibleElements();
            }
        }
        // Sync expandByDefault prop changes (when user clicks Expand All/Collapse All)
        // This ensures all items respect the global expand/collapse state
        if (prevProps.expandByDefault !== this.props.expandByDefault) {
            const { togglable = false, expandByDefault } = this.props;
            const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
            // Log expandByDefault changes (using console.log since debugLogger might not be available here)
            console.log('[FeatureInfo] expandByDefault changed', {
                event: 'expandByDefault-prop-changed',
                recordId,
                prevExpandByDefault: prevProps.expandByDefault,
                newExpandByDefault: expandByDefault,
                togglable,
                currentShowContent: this.state.showContent,
                willUpdateState: togglable,
                timestamp: Date.now()
            });
            if (togglable) {
                this.setState({ showContent: expandByDefault }, () => {
                    console.log('[FeatureInfo] state updated after expandByDefault change', {
                        event: 'FeatureInfo-state-updated',
                        recordId,
                        newShowContent: this.state.showContent,
                        timestamp: Date.now()
                    });
                });
            }
        }
        // Log all componentDidUpdate calls to track remounts
        const recordId = ((_f = (_e = this.props.graphic) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.OBJECTID) || ((_h = (_g = this.props.graphic) === null || _g === void 0 ? void 0 : _g.attributes) === null || _h === void 0 ? void 0 : _h.objectid) || 'unknown';
        if (prevProps.graphic !== this.props.graphic ||
            prevProps.popupTemplate !== this.props.popupTemplate ||
            prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate) {
            console.log('[FeatureInfo] componentDidUpdate - props changed that trigger recreate', {
                event: 'FeatureInfo-props-changed-recreate',
                recordId,
                graphicChanged: prevProps.graphic !== this.props.graphic,
                popupTemplateChanged: prevProps.popupTemplate !== this.props.popupTemplate,
                defaultPopupTemplateChanged: prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate,
                expandByDefault: this.props.expandByDefault,
                currentShowContent: this.state.showContent,
                timestamp: Date.now()
            });
        }
    }
    destroyFeature() {
        this.feature && !this.feature.destroyed && this.feature.destroy();
    }
    getVisibleElements() {
        const { togglable = false } = this.props;
        const { showContent } = this.state;
        const expanded = togglable ? showContent : true;
        return {
            title: true,
            content: {
                fields: expanded,
                text: expanded,
                media: expanded,
                attachments: expanded
            },
            lastEditedInfo: false
        };
    }
    createFeature() {
        let featureModulePromise;
        if (this.Feature) {
            featureModulePromise = Promise.resolve();
        }
        else {
            featureModulePromise = (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Feature'
            ]).then(modules => {
                [
                    this.Feature
                ] = modules;
            });
        }
        return featureModulePromise.then(() => {
            var _a, _b, _c, _d;
            // Check if component is still mounted before trying to append
            // This prevents errors when component unmounts during async module loading
            if (!this.featureContainer.current) {
                // Component was unmounted, abort
                return;
            }
            const container = document && document.createElement('div');
            container.className = 'jimu-widget';
            this.featureContainer.current.appendChild(container);
            const originDS = this.props.dataSource.getOriginDataSources();
            const rootDataSource = (_a = originDS === null || originDS === void 0 ? void 0 : originDS[0]) === null || _a === void 0 ? void 0 : _a.getRootDataSource();
            this.destroyFeature();
            const layer = this.props.graphic.layer;
            if (this.props.popupTemplate) {
                this.props.graphic.popupTemplate = this.props.popupTemplate;
            }
            else if (layer) {
                // set popupTemplate with layer's popupTemplate or defaultPopupTemplate
                this.props.graphic.popupTemplate = (_b = layer.popupTemplate) !== null && _b !== void 0 ? _b : this.props.defaultPopupTemplate;
            }
            else {
                this.props.graphic.popupTemplate = this.props.defaultPopupTemplate;
            }
            if (layer && !layer.popupTemplate) {
                layer.popupTemplate = this.props.popupTemplate || this.props.defaultPopupTemplate;
            }
            this.feature = new this.Feature({
                container: container,
                defaultPopupTemplateEnabled: true,
                // @ts-expect-error
                spatialReference: ((_d = (_c = this.props.dataSource) === null || _c === void 0 ? void 0 : _c.layer) === null || _d === void 0 ? void 0 : _d.spatialReference) || null,
                // @ts-expect-error
                map: (rootDataSource === null || rootDataSource === void 0 ? void 0 : rootDataSource.map) || null,
                graphic: this.props.graphic,
                visibleElements: this.getVisibleElements()
            });
        }).then(() => {
            this.setState({ loadStatus: LoadStatus.Fulfilled });
        });
    }
    render() {
        const { togglable = false, intl } = this.props;
        const { showContent } = this.state;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'feature-info-component d-flex align-items-center p-1', css: style, children: [togglable && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { "aria-label": intl.formatMessage({ id: showContent ? 'collapse' : 'expand' }), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-outline-inside flex-shrink-0', { expanded: showContent }), variant: 'text', color: 'inherit', icon: true, size: 'sm', onClick: this.toggleExpanded, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              min-width: 32px;
              min-height: 32px;
              padding: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
            `, children: showContent ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__.DownFilled, { size: 'm' }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__.RightFilled, { size: 'm', autoFlip: true }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1', ref: this.featureContainer })] }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(FeatureInfo));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDraw: () => (/* binding */ GeometryFromDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-draw-tool */ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







function GeometryFromDraw(props) {
    const { onGeometryChange, createToolTypes, mapWidgetIds, enableBuffer, bufferDistance, bufferUnit, onBufferChange, widgetId } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_7__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geodesicBufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryServiceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferDistanceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferDistance);
    const bufferUnitRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferUnit);
    const bufferedGraphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (enableBuffer) {
            // Parent component query-task-spatial-form will reset buffer parameter when filter type changes,
            // so defer the init buffer option in order not to be override by its parent.
            jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
                onBufferChange(bufferDistance, bufferUnit);
            });
        }
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
            'esri/Graphic'
        ]).then((modules) => {
            const Graphic = modules[0];
            bufferedGraphicRef.current = new Graphic({
                symbol: {
                    type: 'simple-fill',
                    color: [51, 51, 204, 0.5],
                    style: 'solid',
                    outline: {
                        color: [51, 51, 204, 0.8],
                        width: 1
                    }
                }
            });
        });
    });
    const applyBufferEffect = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        if (!geometryRef.current || !enableBuffer || bufferDistanceRef.current === 0) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        // If the end user uses a point or line query geometry, then the negative buffer will not work (same effect as there is no buffer)
        const isPointNegativeBuffer = (((_a = geometryRef.current) === null || _a === void 0 ? void 0 : _a.type) === 'point' || ((_b = geometryRef.current) === null || _b === void 0 ? void 0 : _b.type) === 'multipoint') && bufferDistanceRef.current < 0;
        const isLineNegativeBuffer = ((_c = geometryRef.current) === null || _c === void 0 ? void 0 : _c.type) === 'polyline' && bufferDistanceRef.current < 0;
        if (isPointNegativeBuffer || isLineNegativeBuffer) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        const geometry = geometryRef.current;
        // https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html#buffer
        if (((_d = geometry.spatialReference) === null || _d === void 0 ? void 0 : _d.isGeographic) && !geometry.spatialReference.isWGS84) {
            const serviceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getGeometryService();
            if (!geometryServiceRef.current) {
                const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                    'esri/rest/geometryService',
                    'esri/rest/support/BufferParameters'
                ]);
                geometryServiceRef.current = {
                    geometryService: modules[0],
                    bufferParameters: modules[1]
                };
            }
            const { geometryService, bufferParameters: BufferParameters } = geometryServiceRef.current;
            const polygons = yield geometryService.buffer(serviceUrl, new BufferParameters({
                distances: [bufferDistanceRef.current],
                unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current),
                geodesic: true,
                bufferSpatialReference: geometry.spatialReference,
                outSpatialReference: geometry.spatialReference,
                geometries: [geometry]
            }));
            bufferedGraphicRef.current.geometry = polygons[0];
        }
        else {
            if (((_e = geometry.spatialReference) === null || _e === void 0 ? void 0 : _e.isWGS84) || ((_f = geometry.spatialReference) === null || _f === void 0 ? void 0 : _f.isWebMercator)) {
                if (!geodesicBufferOperatorRef.current) {
                    geodesicBufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/geodesicBufferOperator');
                }
                if (!geodesicBufferOperatorRef.current.isLoaded()) {
                    yield geodesicBufferOperatorRef.current.load();
                }
                bufferedGraphicRef.current.geometry = geodesicBufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
            else {
                if (!bufferOperatorRef.current) {
                    bufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/bufferOperator');
                }
                bufferedGraphicRef.current.geometry = bufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
        }
    }), [enableBuffer]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            getLayerFunRef.current && getLayerFunRef.current().removeAll();
            onGeometryChange(null);
        }
    }, [queryTaskContext.resetSymbol, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        // clear drawing graphics before switching map view
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        if (layer) {
            layer.removeAll();
            onGeometryChange(null);
        }
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, [onGeometryChange]);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferDistanceRef.current = distance;
        bufferUnitRef.current = unit;
        applyBufferEffect();
        onBufferChange(distance, unit);
    }, [onBufferChange, applyBufferEffect]);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic, getLayerFun, clearAfterApply) => {
        getLayerFunRef.current = getLayerFun;
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        // it's possible that the geometry is the same as the previous one, only the clearAfterApply is changed.
        if (geometryRef.current !== (graphic === null || graphic === void 0 ? void 0 : graphic.geometry)) {
            geometryRef.current = graphic === null || graphic === void 0 ? void 0 : graphic.geometry;
            applyBufferEffect().then(() => {
                if (bufferedGraphicRef.current.geometry) {
                    layer === null || layer === void 0 ? void 0 : layer.add(bufferedGraphicRef.current);
                }
            });
        }
        onGeometryChange(graphic === null || graphic === void 0 ? void 0 : graphic.geometry, layer, graphic, clearAfterApply);
    }, [onGeometryChange, applyBufferEffect]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))), (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__.InteractiveDraw, { jimuMapView: jimuMapView, widgetId: widgetId, toolTypes: createToolTypes, onDrawEnd: handleDrawEnd }), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'title3', "aria-label": getI18nMessage('theBufferDistance'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_5__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: handleBufferChange }) })] }))] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDataSource: () => (/* binding */ GeometryFromDataSource)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */






const marginStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`;
function getRuntimeDataSource() {
    const result = {};
    let notEmpty = false;
    const dsMap = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSources();
    Object.keys(dsMap).forEach(dsId => {
        const ds = dsMap[dsId];
        // only include the ds that has geometry
        if (ds.getGeometryType() != null && !ds.isInAppConfig() && ds.getMainDataSource().id === dsId && !ds.getDataSourceJson().isOutputFromWidget) {
            result[dsId] = ds;
            notEmpty = true;
        }
    });
    return notEmpty ? result : null;
}
function GeometryFromDataSource(props) {
    var _a;
    const { onSelectionChange, useDataSources = [], useRuntimeData, spatialRelations, enableBuffer, bufferDistance, bufferUnit, onBufferChange, onRelationChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [currentDataSource, setCurrentDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(useDataSources[0]);
    const [runtimeDataSource, setRuntimeDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [count, setCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const [currentRelation, setCurrentRelation] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_6__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation();
    const spatialRelationOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return Object.entries(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialRelation).map(([key, value]) => ({
            value,
            label: getI18nMessage(`spatialRelation_${key}`)
        }));
    }, [getI18nMessage]);
    const loadedUseDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const loaded = [];
        useDataSources.forEach((item) => {
            var _a, _b;
            if (((_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[item.mainDataSourceId]) === null || _b === void 0 ? void 0 : _b.instanceStatus) === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created) {
                loaded.push(item.dataSourceId);
            }
        });
        if (loaded.length > 0) {
            return loaded.join(',');
        }
        return '';
    });
    const numOfDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        if (!useRuntimeData) {
            return 0;
        }
        return Object.keys((_a = state.dataSourcesInfo) !== null && _a !== void 0 ? _a : {}).filter(dsId => state.dataSourcesInfo[dsId].instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created).length;
    });
    const runtimeDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (numOfDs > 0) {
            return getRuntimeDataSource();
        }
    }, [numOfDs]);
    const numOfRuntimeDs = Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).length;
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if ((spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0) {
            onRelationChange(spatialRelations[0]);
        }
        if (enableBuffer) {
            onBufferChange(bufferDistance, bufferUnit);
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setCurrentRelation(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
            onRelationChange(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
        }
    }, [queryTaskContext.resetSymbol, onRelationChange, spatialRelations]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!spatialRelations) {
            setCurrentRelation(null);
        }
        else if (!spatialRelations.includes(currentRelation)) {
            setCurrentRelation(spatialRelations[0]);
            onRelationChange(spatialRelations[0]);
        }
    }, [spatialRelations, currentRelation, onRelationChange]);
    const handleDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = useDataSources.find((item) => item.dataSourceId === dsId);
        setCurrentDataSource((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(ds));
        setRuntimeDataSource(null);
    }, [useDataSources]);
    const handleRuntimeDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(dsId);
        setRuntimeDataSource(ds);
        setCurrentDataSource(null);
    }, []);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource((_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        if ((records === null || records === void 0 ? void 0 : records.length) > 0) {
            const geometries = records.map((record) => record.getJSAPIGeometry());
            onSelectionChange(geometries);
            setCount(records.length);
        }
        else {
            onSelectionChange(null);
            setCount(0);
        }
    }, [currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId, runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, onSelectionChange]);
    const getLabelOfSpatialRelation = (relation) => {
        return spatialRelationOptions.find(item => item.value === relation).label;
    };
    const handleSpatialRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(e => {
        setCurrentRelation(e.target.value);
        onRelationChange(e.target.value);
    }, [onRelationChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: marginStyle, className: 'title3', children: getI18nMessage('chooseFilterLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterLayer'), value: (_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, children: [numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('preconfigured') }), useDataSources.map((item) => {
                        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(item.dataSourceId);
                        if (loadedUseDataSources.includes(item.dataSourceId) || (ds === null || ds === void 0 ? void 0 : ds.getLabel())) {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: item.dataSourceId, onClick: () => { handleDataSourceChange(item.dataSourceId); }, children: ds === null || ds === void 0 ? void 0 : ds.getLabel() }, item.dataSourceId));
                        }
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { children: translate('loading') }, item.dataSourceId));
                    }), numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { divider: true }), numOfRuntimeDs > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('runtime') }), Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).map(dsId => {
                        const ds = runtimeDataSources[dsId];
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: dsId, onClick: () => { handleRuntimeDataSourceChange(dsId); }, children: ds.getLabel() }, dsId));
                    })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-1 font-italic', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `color: var(--sys-color-surface-paper-hint);`, children: getI18nMessage('selectedRecords', { num: count }) }), (spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate title3 mb-0', children: getI18nMessage('relationship') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('relationship'), value: currentRelation, onChange: handleSpatialRelationChange, children: spatialRelations.map((item) => {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item, children: getLabelOfSpatialRelation(item) }, item));
                        }) })] })), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', "aria-label": getI18nMessage('theBufferDistance'), css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3 text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_4__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: onBufferChange }) })] })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: currentDataSource, dataSource: runtimeDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), useDataSources.map((item) => {
                // make sure the datasource is created
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: item }, item.dataSourceId));
            })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromMap: () => (/* binding */ GeometryFromMap)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");

/** @jsx jsx */


function GeometryFromMap(props) {
    const { onGeometryChange, mapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const PolygonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            let handler;
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/core/reactiveUtils').then((reactiveUtils) => {
                handler = reactiveUtils.watch(() => jimuMapView.view.extent, (extent) => {
                    if (PolygonRef.current) {
                        onGeometryChange(PolygonRef.current.fromExtent(extent));
                    }
                    else {
                        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/geometry/Polygon']).then(modules => {
                            PolygonRef.current = modules[0];
                            onGeometryChange(PolygonRef.current.fromExtent(extent));
                        });
                    }
                });
                // set initial extent
                onGeometryChange(jimuMapView.view.extent);
            });
            return () => {
                if (handler) {
                    handler.remove();
                }
            };
        }
    }, [jimuMapView, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveDraw: () => (/* binding */ InteractiveDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");

/** @jsx jsx */





const sketchToolInfoMap = {
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Point]: { drawToolName: 'point', esriClassName: 'esri-icon-point', toolIndex: 0 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polyline]: { drawToolName: 'polyline', esriClassName: 'esri-icon-polyline', toolIndex: 4 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polygon]: { drawToolName: 'polygon', esriClassName: 'esri-icon-polygon', toolIndex: 2 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Rectangle]: {
        drawToolName: 'rectangle',
        esriClassName: 'esri-icon-checkbox-unchecked',
        toolIndex: 1
    },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Circle]: { drawToolName: 'circle', esriClassName: 'esri-icon-radio-unchecked', toolIndex: 3 }
};
function InteractiveDraw(props) {
    const { toolTypes = [], jimuMapView, onDrawEnd, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [mapModule, setMapModule] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const graphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [clearAfterApply, setClearAfterApply] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const visibleElements = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return {
            createTools: Object.entries(sketchToolInfoMap).reduce((result, [key, value]) => (Object.assign(Object.assign({}, result), { [value.drawToolName]: toolTypes.includes(key) })), { point: false }),
            selectionTools: {
                'lasso-selection': false,
                'rectangle-selection': false
            },
            settingsMenu: false,
            undoRedoMenu: false,
            deleteButton: true
        };
    }, [toolTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.moduleLoader.loadModule('jimu-ui/advanced/map').then((result) => {
            setMapModule(result);
        });
    });
    const handleDrawToolCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuDrawToolsRef) => {
        getLayerFunRef.current = jimuDrawToolsRef.getGraphicsLayer;
    }, []);
    const handleDrawStart = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        getLayerFunRef.current && (getLayerFunRef.current)().removeAll();
    }, []);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic) => {
        graphicRef.current = graphic;
        onDrawEnd(graphic, getLayerFunRef.current, clearAfterApply);
    }, [onDrawEnd, clearAfterApply]);
    const handleCleared = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        graphicRef.current = null;
        onDrawEnd(null);
    }, [onDrawEnd]);
    const handleClearSettingChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        if (graphicRef.current) {
            onDrawEnd(graphicRef.current, getLayerFunRef.current, e.target.checked);
        }
        setClearAfterApply(e.target.checked);
    }, [onDrawEnd]);
    const JimuDraw = mapModule === null || mapModule === void 0 ? void 0 : mapModule.JimuDraw;
    if (!JimuDraw) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.StatusIndicator, { statusType: widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading });
    }
    const isAvailable = Object.keys(visibleElements.createTools).some(toolName => visibleElements.createTools[toolName]);
    if (!isAvailable) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JimuDraw, { jimuMapView: jimuMapView, operatorWidgetId: widgetId, disableSymbolSelector: true, drawingOptions: {
                    creationMode: mapModule.JimuDrawCreationMode.Single,
                    updateOnGraphicClick: false,
                    visibleElements: visibleElements
                }, uiOptions: {
                    isHideBorder: true
                }, onJimuDrawCreated: handleDrawToolCreated, onDrawingStarted: handleDrawStart, onDrawingFinished: handleDrawEnd, onDrawingCleared: handleCleared }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: clearAfterApply, onChange: handleClearSettingChange, className: 'mr-2' }), getI18nMessage('clearDrawing')] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingResult: () => (/* binding */ LoadingResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");





const Root = jimu_theme__WEBPACK_IMPORTED_MODULE_3__.styled.div `
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 2;

  .loading-content {
    .loading-tip {
      position: relative;
    }
  }
`;
function LoadingResult() {
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'loading-content w-100 px-4 d-flex flex-column justify-content-center align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { role: 'alert', "aria-live": 'assertive', className: 'text-paper', children: translate('retrieving') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { className: 'loading-tip mt-8', type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryResultItem: () => (/* binding */ QueryResultItem)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _components_feature_info__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/feature-info */ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");

/** @jsx jsx */





const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  overflow: auto;
  flex-flow: row;
  cursor: pointer;
  flex-shrink: 0;
  min-height: 2rem;
  position: relative;
  &.selected {
    outline: 2px solid var(--sys-color-primary-main);
  }
  
  .remove-button {
    position: absolute;
    top: 4px;
    right: 4px;
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
    
    // Larger touch target for mobile/accessibility
    min-width: 32px;
    min-height: 32px;
  }
`;
/**
 * QueryResultItem component - displays a single query result record
 * Features:
 * - Clicking the item zooms to the feature on the map
 * - Remove button (trash icon) in upper-right corner to remove record from results
 * - Records are expanded by default to show full feature information
 */
const QueryResultItem = (props) => {
    const { widgetId, data, dataSource, popupTemplate, defaultPopupTemplate, onClick, onRemove, expandByDefault = false } = props;
    const recordId = data.getId();
    // Log when QueryResultItem renders
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        console.log('[QueryResultItem] rendered', {
            event: 'QueryResultItem-render',
            recordId,
            expandByDefault,
            timestamp: Date.now()
        });
    }, [recordId, expandByDefault]);
    // Check if this record is currently selected
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[dataSource.id]) === null || _b === void 0 ? void 0 : _b.selectedIds) === null || _c === void 0 ? void 0 : _c.includes(data.getId()); });
    // Determine if list is displayed vertically (affects FeatureInfo expandability)
    const isVerticalAlign = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection !== _config__WEBPACK_IMPORTED_MODULE_5__.ListDirection.Horizontal;
    });
    // Handle clicking on the result item - zooms to feature on map
    const handleClickResultItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        // Don't trigger zoom if clicking the remove button
        if (e.target.closest('.remove-button')) {
            return;
        }
        onClick(data);
    }, [onClick, data]);
    // Handle clicking the remove button - removes record from results and selection
    const handleRemove = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        e.stopPropagation(); // Prevent triggering the item click handler
        e.preventDefault();
        onRemove(data);
    }, [onRemove, data]);
    const onKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Enter' || evt.key === ' ') {
            evt.preventDefault();
            evt.stopPropagation();
            handleClickResultItem(evt);
        }
    }, [handleClickResultItem]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-result-item', { selected }), onClick: handleClickResultItem, onKeyUp: onKeyUp, css: style, role: 'option', "aria-selected": selected, tabIndex: 0, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_feature_info__WEBPACK_IMPORTED_MODULE_4__["default"], { graphic: data.feature, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, togglable: isVerticalAlign, expandByDefault: expandByDefault, dataSource: dataSource }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: "remove-button", icon: true, size: "sm", variant: "text", color: "inherit", onClick: handleRemove, "aria-label": "Remove record", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px;
          min-width: 32px;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__.TrashOutlined, { size: 18 }) })] }));
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskResult: () => (/* binding */ QueryTaskResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _simple_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./simple-list */ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/outlined/directional/expand-all */ "./jimu-icons/outlined/directional/expand-all.tsx");
/* harmony import */ var jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/directional/collapse-all */ "./jimu-icons/outlined/directional/collapse-all.tsx");
/* harmony import */ var _data_actions__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../data-actions */ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */





// FORCED: Always SimpleList - LazyList and PagingList removed










const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_3__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Detects if an identify popup is currently visible in the DOM.
 * Uses verified selectors based on Experience Builder's identify popup structure.
 *
 * @returns true if identify popup is detected and visible, false otherwise
 */
function isIdentifyPopupOpen() {
    // Primary selector: .esri-popup with role="dialog"
    const popup = document.querySelector('.esri-popup[role="dialog"]');
    if (!popup) {
        return false;
    }
    // Verify it's visible (not hidden)
    const ariaHidden = popup.getAttribute('aria-hidden');
    if (ariaHidden === 'true') {
        return false;
    }
    // Additional check: verify computed style shows it's visible
    const style = window.getComputedStyle(popup);
    if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
        return false;
    }
    // Verify it contains esri-features (identify popup structure)
    const hasFeatures = popup.querySelector('.esri-features');
    if (!hasFeatures) {
        return false;
    }
    return true;
}
const resultStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  display: flex;
  flex-direction: column;

  .query-result__header {
    color: var(--sys-color-surface-paper-text);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: 1.5;
    border-bottom: 1px solid var(--sys-color-divider-secondary);
    margin-bottom: 6px;
    padding-bottom: 8px;
  }

  .query-result-container {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    overflow: auto;
    min-height: 0;
  }

  .query-result-info {
    height: 18px;
  }
`;
function QueryTaskResult(props) {
    var _a, _b;
    const { queryItem, queryParams, resultCount, maxPerPage, records, defaultPageSize, widgetId, outputDS, runtimeZoomToSelected, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const intl = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
    const [queryData, setQueryData] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [selectedRecords, setSelectedRecords] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState([]);
    const [removedRecordIds, setRemovedRecordIds] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Set());
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_8__.DEFAULT_QUERY_ITEM, queryItem);
    const [expandAll, setExpandAll] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    // Track individual item expansion states to maintain state when items are removed
    const [itemExpandStates, setItemExpandStates] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Map());
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Track expandAll changes for debugging
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-state-changed',
            widgetId,
            expandAll,
            queryItemConfigId: queryItem.configId,
            timestamp: Date.now()
        });
    }, [expandAll, widgetId, queryItem.configId]);
    // Track if we've already selected these records to prevent re-selection when switching tabs
    const hasSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track the last records we selected to detect when new records come in
    const lastSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the original query record IDs (not selected IDs) to detect when query results change
    const lastQueryRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the last selected FeatureDataRecords for restoration (if needed)
    const lastSelectedFeatureRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Ref to track removedRecordIds for use in callbacks (avoids stale closure issues)
    const removedRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(new Set());
    // Sync ref whenever removedRecordIds state changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        removedRecordIdsRef.current = removedRecordIds;
    }, [removedRecordIds]);
    // Error state for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const extraActions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,_data_actions__WEBPACK_IMPORTED_MODULE_12__.getExtraActions)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected);
    }, [widgetId, outputDS, intl, queryItem, runtimeZoomToSelected]);
    const enableDataAction = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_a = widgetJson.enableDataAction) !== null && _a !== void 0 ? _a : true;
    });
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    const directionTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection;
    });
    // FORCE SimpleList - ignore config, we're done with lazy loading issues
    const pagingType = _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.Simple;
    const direction = directionTypeInConfig !== null && directionTypeInConfig !== void 0 ? directionTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.ListDirection.Vertical;
    // Group records by origin data source for DataActionList
    // This ensures DataActionList recognizes records even when they come from different queries/origins
    const actionDataSets = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        // Debug: Log what records are available
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-calculation-start',
            widgetId: widgetId,
            selectedRecordsCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            queryDataRecordsCount: ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            hasSelectedRecords: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0,
            hasQueryDataRecords: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) > 0,
            hasRecordsProp: (records === null || records === void 0 ? void 0 : records.length) > 0
        });
        const recordsToUse = (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0
            ? selectedRecords
            : (((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.length) > 0 ? queryData.records : (records || []));
        // If no records, return single DataRecordSet with empty records using outputDS
        if (!recordsToUse || recordsToUse.length === 0) {
            const emptyDataSet = {
                dataSource: outputDS,
                type: 'loaded',
                records: [],
                name: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                label: outputDS === null || outputDS === void 0 ? void 0 : outputDS.getLabel()
            };
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-empty-records',
                widgetId: widgetId,
                dataSetDataSourceId: (_d = emptyDataSet.dataSource) === null || _d === void 0 ? void 0 : _d.id
            });
            return [emptyDataSet];
        }
        // Group records by their origin data source
        const recordsByOriginDS = new Map();
        recordsToUse.forEach(record => {
            var _a, _b, _c, _d;
            const recordDS = (_b = (_a = record).getDataSource) === null || _b === void 0 ? void 0 : _b.call(_a);
            let originDS = null;
            if (recordDS) {
                originDS = ((_c = recordDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
            }
            else if (outputDS) {
                // Fallback: use outputDS's origin if record doesn't have dataSource
                originDS = ((_d = outputDS.getOriginDataSources()) === null || _d === void 0 ? void 0 : _d[0]) || outputDS;
            }
            if (originDS) {
                if (!recordsByOriginDS.has(originDS)) {
                    recordsByOriginDS.set(originDS, []);
                }
                recordsByOriginDS.get(originDS).push(record);
            }
        });
        // Create a DataRecordSet for each origin data source
        const dataSets = Array.from(recordsByOriginDS.entries()).map(([originDS, originRecords]) => {
            const dataSet = {
                dataSource: originDS, // Use origin DS, not outputDS
                type: 'selected',
                records: originRecords,
                name: originDS.id,
                label: originDS.getLabel()
            };
            // Add fields if needed (use currentItem's field settings)
            if (currentItem.resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_4__.FieldsType.SelectAttributes && currentItem.resultDisplayFields != null) {
                dataSet.fields = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.combineFields)(currentItem.resultDisplayFields, currentItem.resultTitleExpression);
            }
            else if (originDS && 'getPopupInfo' in originDS) {
                // use fields in popup template from origin DS
                const popupInfo = originDS.getPopupInfo();
                if (popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) {
                    dataSet.fields = popupInfo.fieldInfos.filter((fieldInfo) => fieldInfo.visible).map((fieldInfo) => fieldInfo.fieldName);
                }
            }
            return dataSet;
        });
        // Debug: Log what the final dataSets contain
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-final',
            widgetId: widgetId,
            dataSetsCount: dataSets.length,
            totalRecordsCount: recordsToUse.length,
            dataSetsByOrigin: dataSets.map(ds => {
                var _a, _b;
                return ({
                    originDSId: (_a = ds.dataSource) === null || _a === void 0 ? void 0 : _a.id,
                    recordsCount: ((_b = ds.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                    type: ds.type
                });
            })
        });
        // If we couldn't group by origin (shouldn't happen), fallback to single DataRecordSet with outputDS
        if (dataSets.length === 0 && outputDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-fallback-to-outputDS',
                widgetId: widgetId,
                reason: 'could-not-determine-origin-ds'
            });
            return [{
                    dataSource: outputDS,
                    type: recordsToUse.length > 0 ? 'selected' : 'loaded',
                    records: recordsToUse,
                    name: outputDS.id,
                    label: outputDS.getLabel()
                }];
        }
        return dataSets;
    }, [selectedRecords, outputDS, queryData, currentItem, records, widgetId]);
    // Memoize filtered records to prevent unnecessary re-renders that reset scroll position
    // This ensures the records prop only changes when the actual data changes, not just the array reference
    const filteredRecordsForList = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        return ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.filter((record) => !removedRecordIds.has(record.getId()))) ||
            ((records === null || records === void 0 ? void 0 : records.filter(record => !removedRecordIds.has(record.getId()))) || []);
    }, [queryData === null || queryData === void 0 ? void 0 : queryData.records, records, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    /**
     * Effect hook that runs when new query results arrive.
     * Resets removed records, expand state, and query data for the new results.
     * Also handles auto-selection of records when they first arrive.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Check if these are new records (different from what we last queried)
        // IMPORTANT: Compare against original query results, not selected results
        // This prevents removedRecordIds from being reset when records are removed
        const currentRecordIds = (records === null || records === void 0 ? void 0 : records.map(record => record.getId())) || [];
        const recordsChanged = currentRecordIds.length !== lastQueryRecordIdsRef.current.length ||
            currentRecordIds.some((id, index) => id !== lastQueryRecordIdsRef.current[index]);
        // Debug: Log when records prop changes
        debugLogger.log('RESULTS-MODE', {
            event: 'records-prop-changed',
            widgetId: widgetId,
            recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            willSetQueryData: records && records.length > 0,
            removedRecordIdsCount: removedRecordIds.size,
            hasSelectedRef: hasSelectedRef.current,
            recordsChanged: recordsChanged,
            lastQueryRecordIdsCount: lastQueryRecordIdsRef.current.length,
            currentRecordIdsCount: currentRecordIds.length
        });
        // IMPORTANT: Only reset removed records if this is truly a NEW query with different records
        // Don't reset if records are the same (just a re-render or lazy load)
        if (recordsChanged) {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-truly-changed-resetting-removed',
                widgetId: widgetId,
                oldRecordIdsCount: lastQueryRecordIdsRef.current.length,
                newRecordIdsCount: currentRecordIds.length
            });
            setRemovedRecordIds(new Set());
            // Update the original query record IDs ref
            lastQueryRecordIdsRef.current = currentRecordIds;
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-not-changed-preserving-removed',
                widgetId: widgetId,
                recordIdsCount: currentRecordIds.length,
                removedRecordIdsCount: removedRecordIds.size
            });
        }
        // Reset expand all to queryItem's resultExpandByDefault setting
        setExpandAll((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
        setQueryData({
            records,
            pageSize: defaultPageSize,
            page: 1
        });
        // Only auto-select records if:
        // 1. We have records and outputDS
        // 2. We haven't already selected these records (hasSelectedRef is false)
        // 3. OR the records have actually changed (new query results)
        // 4. AND we don't have any removed records (to prevent re-selecting removed ones)
        if (records && records.length > 0 && outputDS &&
            (!hasSelectedRef.current || recordsChanged) &&
            removedRecordIds.size === 0) {
            const recordIds = records.map(record => record.getId());
            const fdr = records;
            // Select records and publish selection message using utility function
            try {
                setSelectionError(null); // Clear previous errors
                (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
                hasSelectedRef.current = true; // Mark as selected
                lastSelectedRecordsRef.current = recordIds; // Store the IDs we selected
                lastSelectedFeatureRecordsRef.current = fdr; // Store the full records for potential restoration
                // Notify HelperSimple of selection change
                const originDS = (_b = outputDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0];
                const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
                const selectionEvent = new CustomEvent('querysimple-selection-changed', {
                    detail: {
                        widgetId,
                        recordIds,
                        dataSourceId,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    },
                    bubbles: true,
                    cancelable: true
                });
                window.dispatchEvent(selectionEvent);
            }
            catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                setSelectionError(errorMessage);
                debugLogger.log('TASK', {
                    event: 'selection-failed-query-result',
                    error: errorMessage,
                    errorStack: error instanceof Error ? error.stack : undefined,
                    recordCount: recordIds.length
                });
            }
        }
        else if (recordsChanged && records && records.length === 0) {
            // If records were cleared, reset the selection flag
            hasSelectedRef.current = false;
            lastSelectedRecordsRef.current = [];
            setSelectionError(null); // Clear errors when clearing records
        }
        else if (removedRecordIds.size > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'skipping-reselection-due-to-removed-records',
                widgetId: widgetId,
                removedRecordIdsCount: removedRecordIds.size,
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                hasSelectedRef: hasSelectedRef.current,
                recordsChanged: recordsChanged
            });
        }
    }, [records, defaultPageSize, outputDS, widgetId, queryItem.configId, queryItem.resultExpandByDefault, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear selection when resultSelectMode changed
        if (outputDS) {
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.clearSelectionInDataSources)(outputDS);
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.publishSelectionMessage)(widgetId, [], outputDS, true);
        }
    }, [queryItem.resultSelectMode, outputDS, widgetId]);
    // Update expandAll when queryItem changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        const newExpandAll = (_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false;
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-reset-by-queryItem-change',
            widgetId,
            queryItemConfigId: queryItem.configId,
            resultExpandByDefault: currentItem.resultExpandByDefault,
            newExpandAll,
            timestamp: Date.now()
        });
        setExpandAll(newExpandAll);
        // Reset individual expansion states when query changes
        setItemExpandStates(new Map());
    }, [queryItem.configId, queryItem.resultExpandByDefault, widgetId]);
    /**
     * Monitor origin data source selection changes to detect when other widgets (like map identify)
     * clear our selections. Enhanced with identify popup detection for testing scenarios.
     * Watches the origin data source's selection state directly via polling.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (!outputDS)
            return;
        const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (!originDS)
            return;
        const originDSId = originDS.id;
        let previousSelectedIds = [];
        let identifyPopupWasOpen = false;
        let lastLogTime = 0;
        const LOG_THROTTLE_MS = 1000; // Throttle logs to once per second
        // Initial check
        previousSelectedIds = originDS.getSelectedRecordIds() || [];
        identifyPopupWasOpen = isIdentifyPopupOpen();
        // Watch for selection changes on the origin data source
        const checkSelection = () => {
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            const ourExpectedIds = lastSelectedRecordsRef.current;
            const hasOurSelection = ourExpectedIds.length > 0;
            const identifyPopupIsOpen = isIdentifyPopupOpen();
            // Detect if selection was cleared or changed externally
            const wasCleared = previousSelectedIds.length > 0 && currentSelectedIds.length === 0;
            const wasChanged = previousSelectedIds.length > 0 &&
                (currentSelectedIds.length !== previousSelectedIds.length ||
                    !currentSelectedIds.every(id => previousSelectedIds.includes(id)));
            // NEW: Detect if selection was added (went from empty to having records)
            const wasAdded = previousSelectedIds.length === 0 && currentSelectedIds.length > 0;
            // Track identify popup state changes
            const identifyPopupJustOpened = !identifyPopupWasOpen && identifyPopupIsOpen;
            const identifyPopupJustClosed = identifyPopupWasOpen && !identifyPopupIsOpen;
            const identifyPopupStillOpen = identifyPopupWasOpen && identifyPopupIsOpen;
            // Log identify popup state changes
            const now = Date.now();
            if (identifyPopupJustOpened || identifyPopupJustClosed) {
                debugLogger.log('SELECTION', {
                    event: identifyPopupJustOpened ? 'identify-popup-opened' : 'identify-popup-closed',
                    originDSId,
                    ourSelectionCount: ourExpectedIds.length,
                    currentSelectionCount: currentSelectedIds.length,
                    timestamp: new Date().toISOString()
                });
                // If identify popup just closed and selection was cleared, dispatch restore event
                if (identifyPopupJustClosed && wasCleared && hasOurSelection && ourExpectedIds.length > 0) {
                    const restoreEvent = new CustomEvent(RESTORE_ON_IDENTIFY_CLOSE_EVENT, {
                        detail: {
                            widgetId,
                            recordIds: ourExpectedIds,
                            outputDsId: outputDS.id,
                            queryItemConfigId: queryItem.configId
                        },
                        bubbles: true,
                        cancelable: true
                    });
                    window.dispatchEvent(restoreEvent);
                    debugLogger.log('SELECTION', {
                        event: 'identify-popup-closed-restore-requested',
                        widgetId,
                        recordCount: ourExpectedIds.length,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    });
                }
            }
            // Log ALL selection changes (not just when we have our own selection)
            if (wasCleared || wasChanged || wasAdded) {
                // Check if this matches our expected selection
                const matchesOurSelection = hasOurSelection &&
                    ourExpectedIds.length === currentSelectedIds.length &&
                    ourExpectedIds.every(id => currentSelectedIds.includes(id));
                // Determine what would happen (for testing/logging)
                const wouldRestore = wasCleared && identifyPopupIsOpen && hasOurSelection && ourExpectedIds.length > 0;
                // Determine scenario
                let scenario = 'Unknown';
                if (wasAdded && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 4: Another widget selected records (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 5: Another widget changed selection (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 2: Query  Identify (selection changed, not cleared)  Would NOT restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget  Would NOT restore';
                }
                else if (wasCleared && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 1: Query  Identify  Would restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget (cleared)  Would NOT restore';
                }
                else if (wasAdded && hasOurSelection) {
                    scenario = matchesOurSelection
                        ? 'Our widget selected records'
                        : 'Another widget selected different records';
                }
                // Log detection with identify popup state (throttled)
                if (now - lastLogTime > LOG_THROTTLE_MS) {
                    debugLogger.log('SELECTION', {
                        event: wasCleared ? 'selection-cleared' : wasChanged ? 'selection-changed' : 'selection-added',
                        originDSId,
                        ourExpectedCount: ourExpectedIds.length,
                        previousSelectedCount: previousSelectedIds.length,
                        currentSelectedCount: currentSelectedIds.length,
                        wasCleared,
                        wasChanged,
                        wasAdded,
                        hasOurSelection,
                        matchesOurSelection,
                        identifyPopupIsOpen,
                        identifyPopupJustOpened,
                        identifyPopupStillOpen,
                        identifyPopupJustClosed,
                        wouldRestore,
                        ourExpectedIds: ourExpectedIds.slice(0, 5),
                        previousSelectedIds: previousSelectedIds.slice(0, 5),
                        currentSelectedIds: currentSelectedIds.slice(0, 5),
                        timestamp: new Date().toISOString(),
                        note: wouldRestore
                            ? 'Would restore selection (cleared + identify popup open)'
                            : identifyPopupIsOpen && wasChanged
                                ? 'Identify popup open but selection changed (not cleared) - would not restore'
                                : wasCleared && !identifyPopupIsOpen
                                    ? 'Selection cleared, checking if identify popup opens...'
                                    : wasAdded
                                        ? hasOurSelection && matchesOurSelection
                                            ? 'Our widget selected records'
                                            : hasOurSelection && !matchesOurSelection
                                                ? 'Another widget selected different records'
                                                : 'Selection added (by another widget or external source)'
                                        : 'No identify popup detected - would not restore'
                    });
                    lastLogTime = now;
                }
            }
            previousSelectedIds = [...currentSelectedIds];
            identifyPopupWasOpen = identifyPopupIsOpen;
        };
        // Check periodically (every 500ms)
        const intervalId = setInterval(checkSelection, 500);
        return () => {
            clearInterval(intervalId);
        };
    }, [outputDS]);
    /**
     * Clears all results. Resets local state and delegates to parent's clearResult method.
     */
    const clearResults = () => {
        // Reset local selection flags
        hasSelectedRef.current = false;
        lastSelectedRecordsRef.current = [];
        // Reset local query data state
        setQueryData(null);
        setRemovedRecordIds(new Set());
        // Clear error state when clearing results
        setSelectionError(null);
        // Delegate to parent's clearResult method (via onNavBack) which handles
        // clearing selection from map, publishing messages, etc.
        onNavBack(true);
    };
    const handleRenderDone = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(({ dataItems, pageSize, page }) => {
        console.log('[QueryResult] handleRenderDone called', {
            event: 'handleRenderDone-called',
            widgetId,
            queryItemConfigId: queryItem.configId,
            dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
            pageSize,
            page,
            timestamp: Date.now()
        });
        // Use ref to get latest removedRecordIds (avoids stale closure issues with lazy loading)
        const currentRemovedIds = removedRecordIdsRef.current;
        // Filter out removed records FIRST - before any selection logic
        // This ensures removed records stay removed even during lazy loading
        const filteredItems = (dataItems === null || dataItems === void 0 ? void 0 : dataItems.filter(item => !currentRemovedIds.has(item.getId()))) || [];
        // Check if queryData has actually changed before updating state
        // This prevents unnecessary re-renders that reset scroll position
        const currentRecords = (queryData === null || queryData === void 0 ? void 0 : queryData.records) || [];
        const currentRecordIds = currentRecords.map(r => r.getId()).sort();
        const newRecordIds = filteredItems.map(r => r.getId()).sort();
        const dataChanged = currentRecordIds.length !== newRecordIds.length ||
            !currentRecordIds.every((id, idx) => id === newRecordIds[idx]) ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.pageSize) !== pageSize ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.page) !== page;
        // Only update state if data has actually changed
        if (dataChanged) {
            setQueryData({
                records: filteredItems,
                pageSize,
                page
            });
        }
        // Only select records that are NOT removed
        // IMPORTANT: Only re-select if the selection has actually changed to avoid resetting scroll position
        if (filteredItems && filteredItems.length > 0 && outputDS) {
            const recordIds = filteredItems.map(record => record.getId());
            const fdr = filteredItems;
            // Check what's currently selected to avoid unnecessary re-selection (which resets scroll)
            const currentlySelectedIds = outputDS.getSelectedRecordIds() || [];
            const selectionChanged = currentlySelectedIds.length !== recordIds.length ||
                !recordIds.every(id => currentlySelectedIds.includes(id));
            // Only select if the selection has actually changed
            if (selectionChanged) {
                try {
                    setSelectionError(null); // Clear previous errors
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
                    debugLogger.log('RESULTS-MODE', {
                        event: 'handleRenderDone-selecting-filtered-records',
                        widgetId: widgetId,
                        dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                        filteredItemsCount: filteredItems.length,
                        removedRecordIdsCount: currentRemovedIds.size,
                        selectionChanged: true,
                        currentlySelectedCount: currentlySelectedIds.length,
                        newSelectionCount: recordIds.length
                    });
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-handleRenderDone',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'handleRenderDone-skipping-reselection',
                    widgetId: widgetId,
                    dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                    filteredItemsCount: filteredItems.length,
                    removedRecordIdsCount: currentRemovedIds.size,
                    reason: 'selection-unchanged',
                    currentlySelectedCount: currentlySelectedIds.length
                });
            }
        }
    }, [outputDS, widgetId, queryData]);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(outputDS === null || outputDS === void 0 ? void 0 : outputDS.id);
        const dsRecords = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        const selectedIds = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
        // Capture records prop before using it (to avoid shadowing)
        const recordsProp = records;
        // Debug: Log what handleDataSourceInfoChange sees
        debugLogger.log('RESULTS-MODE', {
            event: 'handleDataSourceInfoChange-fired',
            widgetId: widgetId,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            dsId: ds === null || ds === void 0 ? void 0 : ds.id,
            selectedRecordsFromDS: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
            selectedIdsFromDS: selectedIds.length,
            currentSelectedRecordsState: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            recordsPropCount: (recordsProp === null || recordsProp === void 0 ? void 0 : recordsProp.length) || 0,
            removedRecordIdsCount: removedRecordIds.size,
            timestamp: Date.now()
        });
        // If we have records in the prop (accumulated records) but DS shows 0 selected,
        // and we currently have selectedRecords, this is likely a query switch in "Add to" mode
        // where re-selection hasn't happened yet. Don't clear selectedRecords - wait for re-selection.
        if (recordsProp && recordsProp.length > 0 && selectedIds.length === 0 && selectedRecords && selectedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-clear-during-query-switch',
                widgetId: widgetId,
                reason: 'waiting-for-reselection',
                recordsPropCount: recordsProp.length,
                currentSelectedRecordsCount: selectedRecords.length
            });
            return; // Skip updating - re-selection is coming
        }
        // IMPORTANT: Filter out removed records from DS selection before comparing/syncing
        // This prevents removed records from being re-added when scrolling triggers this callback
        const filteredDsRecords = (_b = dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.filter((record) => !removedRecordIds.has(record.getId()))) !== null && _b !== void 0 ? _b : [];
        const filteredSelectedIds = selectedIds.filter(id => !removedRecordIds.has(id));
        // If DS has more selected than our state, but the difference is entirely removed records, don't sync
        if (filteredSelectedIds.length === ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0) && selectedIds.length > filteredSelectedIds.length) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-sync-due-to-removed-records',
                widgetId: widgetId,
                reason: 'ds-selection-includes-removed-records',
                dsSelectedCount: selectedIds.length,
                filteredCount: filteredSelectedIds.length,
                componentStateCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                removedRecordIdsCount: removedRecordIds.size
            });
            return; // Skip syncing - the mismatch is due to removed records
        }
        let shouldUpdate = false;
        if (filteredSelectedIds.length !== (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length)) {
            shouldUpdate = true;
        }
        else { // equal length
            shouldUpdate = filteredSelectedIds.some(id => {
                const target = selectedRecords.find((item) => item.getId() === id);
                return target == null;
            });
        }
        if (shouldUpdate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                note: 'filtered-out-removed-records'
            });
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                oldSelectedIds: (selectedRecords || []).map(r => r.getId()).slice(0, 5),
                newSelectedIds: filteredSelectedIds.slice(0, 5),
                note: 'filtered-out-removed-records',
                timestamp: Date.now()
            });
            setSelectedRecords(filteredDsRecords);
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-update',
                widgetId: widgetId,
                reason: 'no-change-detected',
                timestamp: Date.now()
            });
        }
    }, [outputDS === null || outputDS === void 0 ? void 0 : outputDS.id, selectedRecords, widgetId, records, removedRecordIds]);
    /**
     * Generates the tip message showing how many features are displayed.
     * Filters out removed records to show accurate counts.
     *
     * @returns Formatted string like "Features displayed: 118 / 121"
     */
    const getTipMessage = () => {
        if (queryData && queryData.records) {
            // Filter out removed records for display count
            const displayedRecords = queryData.records.filter((record) => !removedRecordIds.has(record.getId()));
            const displayedCount = displayedRecords.length;
            // FORCED: Always SimpleList, so always use simple display format
            return `${getI18nMessage('featuresDisplayed')}: ${displayedCount} / ${resultCount}`;
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
        }
        return '';
    };
    /**
     * Toggles expand/collapse state for all result items.
     * When toggled, all result items will be expanded or collapsed together.
     * Updates individual item expansion states in the map to maintain state when items are removed.
     */
    const toggleExpandAll = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setExpandAll(prev => {
            const newValue = !prev;
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'toggleExpandAll-clicked',
                widgetId,
                previousValue: prev,
                newValue,
                timestamp: Date.now()
            });
            // Update all current items in the map with the new expansion state
            setItemExpandStates(prevMap => {
                const newMap = new Map(prevMap);
                // Get all current record IDs from filtered records
                const allRecordIds = filteredRecordsForList.map(r => r.getId());
                allRecordIds.forEach(id => {
                    newMap.set(id, newValue);
                });
                debugLogger.log('EXPAND-COLLAPSE', {
                    event: 'itemExpandStates-updated',
                    widgetId,
                    newValue,
                    updatedCount: allRecordIds.length,
                    recordIds: allRecordIds.slice(0, 10), // Log first 10 IDs
                    timestamp: Date.now()
                });
                return newMap;
            });
            return newValue;
        });
    }, [widgetId, filteredRecordsForList]);
    const resultUseOutputDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
            dataSourceId: queryItem.outputDataSourceId,
            mainDataSourceId: queryItem.outputDataSourceId
        });
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.outputDataSourceId]);
    const handleEscape = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    }, []);
    // Keep records selected and zoom to clicked record
    // Records remain selected as long as they're in the results
    // Clicking a record always zooms to it on the map (this behavior is always enabled)
    const toggleSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        // Ensure the clicked record is selected (it should already be, but ensure it)
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        const dataId = data.getId();
        // If this record isn't already selected, add it to the selection
        if (!selectedIds.includes(dataId)) {
            const updatedSelectedDatas = [...selectedDatas, data];
            const recordIds = updatedSelectedDatas.map(record => record.getId());
            // Select records and publish selection message using utility function
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
        }
        // Zoom to the clicked record using data actions (always enabled - user wants to keep this behavior)
        const dataSet = {
            dataSource: outputDS,
            records: [data],
            type: 'selected',
            name: outputDS.getLabel()
        };
        // Get available data actions and find the zoomToFeature action
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
            .then(actionCategories => {
            // Look for zoomToFeature action in any category
            let zoomAction = null;
            for (const category in actionCategories) {
                const actions = actionCategories[category];
                zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                if (zoomAction)
                    break;
            }
            if (zoomAction) {
                // Execute the zoom action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, widgetId);
            }
        })
            .catch(error => {
            // Silently handle errors
        });
    }, [outputDS, widgetId]);
    /**
     * Removes a record from the results and selection.
     * If removing the last record, automatically clears all results
     * by calling the trash can logic (same as clicking Clear button).
     * This ensures the UI doesn't show "Features displayed: 0 / 1" when all results are removed.
     *
     * @param data - The feature data record to remove
     */
    const removeRecord = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        const dataId = data.getId();
        const currentExpandAll = expandAll;
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'removeRecord-started',
            widgetId,
            removedRecordId: dataId,
            currentExpandAll,
            timestamp: Date.now()
        });
        // Remove from expansion states map
        setItemExpandStates(prevMap => {
            const newMap = new Map(prevMap);
            newMap.delete(dataId);
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'itemExpandStates-cleaned-up',
                widgetId,
                removedRecordId: dataId,
                remainingCount: newMap.size,
                timestamp: Date.now()
            });
            return newMap;
        });
        // Add to removed records set
        setRemovedRecordIds(prev => {
            var _a, _b;
            const newSet = new Set(prev).add(dataId);
            // If all records are now removed, clear everything by calling trash can logic
            // IMPORTANT: Compare against actual displayed records count, not resultCount
            // resultCount only reflects the latest query, but in "Add to" mode we display accumulated records
            // Use queryData.records.length (before filtering) as the source of truth for displayed records
            // Fall back to accumulatedRecords.length if in accumulation mode, or resultCount as last resort
            let currentDisplayedCount = ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            if (currentDisplayedCount === 0) {
                // If queryData doesn't have records yet, check if we're in accumulation mode
                const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
                    resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
                if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                    currentDisplayedCount = accumulatedRecords.length;
                }
                else {
                    // Last resort: use resultCount (but this might be incorrect in accumulation mode)
                    currentDisplayedCount = resultCount;
                }
            }
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-checking-all-removed',
                widgetId,
                removedRecordIdsSize: newSet.size,
                currentDisplayedCount,
                resultCount,
                queryDataRecordsCount: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                resultsMode,
                willNavigateBack: newSet.size === currentDisplayedCount && currentDisplayedCount > 0,
                timestamp: Date.now()
            });
            if (newSet.size === currentDisplayedCount && currentDisplayedCount > 0) {
                // All displayed records removed - clear everything (same as clicking trash can button)
                onNavBack(true);
                return newSet;
            }
            return newSet;
        });
        // Update queryData to filter out the removed record
        setQueryData(prevData => {
            if (!prevData)
                return prevData;
            const filteredRecords = prevData.records.filter((record) => record.getId() !== dataId);
            return Object.assign(Object.assign({}, prevData), { records: filteredRecords });
        });
        // ALWAYS remove from origin data source selections (same as Remove mode)
        // This properly removes records from the map selection, handling single or multiple origin sources
        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_14__.removeRecordsFromOriginSelections)(widgetId, [data], outputDS);
        // Update outputDS selection
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const updatedSelectedDatas = selectedDatas.filter(record => record.getId() !== dataId);
        const recordIds = updatedSelectedDatas.map(record => record.getId());
        // Update outputDS selection
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, updatedSelectedDatas);
        }
        // IMPORTANT: Publish custom event so widget can update lastSelection state
        // This ensures restoration restores the correct (updated) count
        const originDS = (_b = outputDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0];
        const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
        const selectionEvent = new CustomEvent('querysimple-selection-changed', {
            detail: {
                widgetId,
                recordIds, // Updated record IDs (with removed record excluded)
                dataSourceId,
                outputDsId: outputDS.id,
                queryItemConfigId: queryItem.configId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(selectionEvent);
        // If in accumulation mode, also remove from accumulated records
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
            resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        if (isAccumulationMode && onAccumulatedRecordsChange && accumulatedRecords && accumulatedRecords.length > 0) {
            const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_14__.removeResultsFromAccumulated)(outputDS, [data], accumulatedRecords);
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removed-from-accumulated',
                widgetId,
                removedRecordId: dataId,
                accumulatedRecordsCountBefore: accumulatedRecords.length,
                remainingRecordsCount: remainingRecords.length,
                wasRemoved: remainingRecords.length < accumulatedRecords.length
            });
            onAccumulatedRecordsChange(remainingRecords);
        }
        // Log after removeRecord completes to check if expandAll changed
        setTimeout(() => {
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-completed',
                widgetId,
                removedRecordId: dataId,
                expandAllBefore: currentExpandAll,
                expandAllAfter: expandAll,
                expandAllChanged: currentExpandAll !== expandAll,
                expandByDefaultProp: expandAll, // What will be passed to SimpleList
                timestamp: Date.now()
            });
        }, 0);
    }, [outputDS, widgetId, resultCount, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, queryItem.configId, expandAll]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result h-100', css: resultStyle, role: 'listbox', "aria-label": getI18nMessage('results'), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: resultUseOutputDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding: 0 16px; margin-top: 8px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result__header d-flex align-items-center mx-4', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { "aria-label": getI18nMessage('back'), ref: backBtnRef, className: 'p-0 mr-2', size: 'sm', variant: 'text', color: 'inherit', icon: true, onClick: () => { onNavBack(); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_9__.ArrowLeftOutlined, { autoFlip: true }) }), (_b = currentItem.resultsLabel) !== null && _b !== void 0 ? _b : getI18nMessage('results'), ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, size: 'sm', variant: 'text', color: 'inherit', onClick: clearResults, "aria-label": getI18nMessage('clearResult'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: iconMap.toolDelete }) }) }), enableDataAction && outputDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `width: 1px; height: 16px; background-color: var(--sys-color-divider-input);` }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionList, { widgetId: widgetId, dataSets: actionDataSets, listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionListStyle.Dropdown, buttonSize: 'sm', buttonType: 'tertiary', extraActions: extraActions })] }))] }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-container mt-1', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-info mb-2 px-4 d-flex align-items-center justify-content-between', role: 'alert', "aria-live": 'polite', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: getTipMessage() }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), placement: 'top', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, onClick: toggleExpandAll, "aria-label": expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), children: expandAll ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_11__.CollapseAllOutlined, {}) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_10__.ExpandAllOutlined, {}) }) }) })] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_simple_list__WEBPACK_IMPORTED_MODULE_6__.SimpleList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, records: filteredRecordsForList, direction: direction, onEscape: handleEscape, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll, itemExpandStates: itemExpandStates, removedRecordIds: removedRecordIds, onRenderDone: handleRenderDone }, 'simple'))] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskContext: () => (/* binding */ QueryTaskContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    resetSymbol: null
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskForm: () => (/* binding */ QueryTaskForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_spatial_form__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-spatial-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");

/** @jsx jsx */










const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_10__.createQuerySimpleDebugLogger)();



const getFormStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    .form-title {
      color: var(--sys-color-surface-paper-text);
      font-weight: 500;
      font-size: 0.8125rem;
      line-height: 1.5;
      margin-top: 0 !important;
    }
    .query-form__content {
      flex: 1 1 ${isAutoHeight ? 'auto' : 'auto'};
      max-height: ${isAutoHeight ? '61.8vh' : 'none'};
      overflow: auto;
      padding-bottom: 0;
    }
    .query-form__actions {
      flex-shrink: 0;
      margin-top: 0;
      padding-top: 4px;
    }
  `;
};
function QueryTaskForm(props) {
    var _a;
    const { widgetId, configId, outputDS, spatialFilterEnabled, datasourceReady, onFormSubmit, dataActionFilter, initialInputValue, onHashParameterUsed, queryItemShortId } = props;
    const preDataActionFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.usePrevious(dataActionFilter);
    const queryItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.queryItems.find(item => item.configId === configId);
    });
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_7__["default"]);
    const [resetSymbol, setResetSymbol] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Runtime zoom preference - initialized with config value, can be overridden by user
    const [runtimeZoomToSelected, setRuntimeZoomToSelected] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    // Sync runtime zoom preference when query item changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setRuntimeZoomToSelected((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected, queryItem === null || queryItem === void 0 ? void 0 : queryItem.configId]);
    // const [dataSource, setDataSource] = React.useState<DataSource>(null)
    const { useAttributeFilter, useSpatialFilter, spatialFilterTypes, sqlExprObj, spatialMapWidgetIds, spatialInteractiveCreateToolTypes, spatialRelationUseDataSources, spatialIncludeRuntimeData, spatialRelations, spatialRelationEnableBuffer, spatialRelationBufferDistance, spatialRelationBufferUnit, spatialInteractiveEnableBuffer, spatialInteractiveBufferDistance, spatialInteractiveBufferUnit, attributeFilterLabel = getI18nMessage('attributeFilter'), spatialFilterLabel = getI18nMessage('spatialFilter'), attributeFilterDesc, spatialFilterDesc } = currentItem;
    const [attributeFilterSqlExprObj, setAttributeFilterSqlExprObj] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(sqlExprObj);
    const spatialFilterObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const spatialRelationRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(_config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect);
    const bufferRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const applyButtonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_9__.useAutoHeight)();
    const showClauseNumber = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef((0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj));
    const initialValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track which configId we've set the value for
    const lastValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track the last value that was set
    const hashTriggeredRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false); // Track if query was triggered via hash parameter
    const originDS = outputDS === null || outputDS === void 0 ? void 0 : outputDS.getOriginDataSources()[0];
    /**
     * Sets the input value from URL hash parameters when:
     * 1. Datasource is ready
     * 2. We have an initialInputValue from URL hash
     * 3. We haven't already set it for this configId, OR the value has changed
     *
     * Uses both React state updates and DOM manipulation to ensure the value
     * is properly set in SqlExpressionRuntime's internal state.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Reset flag if configId changed (switched to different query)
        if (initialValueSetRef.current !== null && initialValueSetRef.current !== configId) {
            initialValueSetRef.current = null;
            lastValueSetRef.current = null;
            hashTriggeredRef.current = false; // Reset hash trigger flag when switching queries
        }
        // Check if value has changed for the same configId
        const valueChanged = lastValueSetRef.current !== null &&
            lastValueSetRef.current !== initialInputValue &&
            initialValueSetRef.current === configId;
        // Set the value if:
        // - We haven't set it for this configId yet, OR
        // - The value has changed for the same configId (hash parameter updated)
        const shouldSetValue = datasourceReady &&
            initialInputValue &&
            ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) > 0 &&
            (initialValueSetRef.current !== configId || valueChanged);
        if (shouldSetValue) {
            const firstPart = sqlExprObj.parts[0];
            // Check if the first part is a SINGLE clause (not a SqlClauseSet)
            if (firstPart && 'type' in firstPart && firstPart.type === 'SINGLE' && 'valueOptions' in firstPart) {
                // Update the expression object with the initial value
                const updated = sqlExprObj.setIn(['parts', '0', 'valueOptions', 'value'], initialInputValue);
                setAttributeFilterSqlExprObj(updated);
                // Update clause number for the updated expression
                showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(updated);
                initialValueSetRef.current = configId;
                lastValueSetRef.current = initialInputValue;
                // Also set the value directly on the input element after a delay to ensure component is rendered
                // This is necessary because SqlExpressionRuntime may not sync from the expression prop alone
                const timeoutId = setTimeout(() => {
                    var _a;
                    // Find the input element within SqlExpressionRuntime
                    const formElement = ((_a = document.querySelector(`[data-widget-id="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.closest('.query-form')) ||
                        document.querySelector('.query-form');
                    if (formElement) {
                        // Look for text input elements
                        const textInputs = formElement.querySelectorAll('input[type="text"]');
                        textInputs.forEach((input) => {
                            var _a;
                            // Update the value if input is empty OR if the value has changed (hash parameter updated)
                            const shouldUpdate = !input.value ||
                                input.value.trim() === '' ||
                                input.value !== initialInputValue;
                            if (shouldUpdate) {
                                // Focus the input first
                                input.focus();
                                // Set the value
                                input.value = initialInputValue;
                                // Create and dispatch input event with proper properties
                                const inputEvent = new Event('input', { bubbles: true, cancelable: true });
                                Object.defineProperty(inputEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(inputEvent);
                                // Create and dispatch change event
                                const changeEvent = new Event('change', { bubbles: true, cancelable: true });
                                Object.defineProperty(changeEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(changeEvent);
                                // Also try React's synthetic event approach using native value setter
                                const nativeInputValueSetter = (_a = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value')) === null || _a === void 0 ? void 0 : _a.set;
                                if (nativeInputValueSetter) {
                                    nativeInputValueSetter.call(input, initialInputValue);
                                    const reactEvent = new Event('input', { bubbles: true });
                                    input.dispatchEvent(reactEvent);
                                }
                                // Blur to trigger any validation or state updates
                                input.blur();
                            }
                        });
                        // After setting values and blurring, verify input value is set before triggering Apply button
                        setTimeout(() => {
                            var _a;
                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                // VERIFICATION: Ensure input value is actually set before executing query
                                // This is especially important for grouped queries where dropdowns need to be synchronized first
                                const formElement = ((_a = document.querySelector(`[data-widget-id="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.closest('.query-form')) ||
                                    document.querySelector('.query-form');
                                if (formElement && initialInputValue) {
                                    const textInputs = formElement.querySelectorAll('input[type="text"]');
                                    let inputValueSet = false;
                                    textInputs.forEach((input) => {
                                        if (input.value === initialInputValue) {
                                            inputValueSet = true;
                                        }
                                    });
                                    if (!inputValueSet) {
                                        debugLogger.log('FORM', {
                                            event: 'input-value-not-set-retrying',
                                            expectedValue: initialInputValue,
                                            queryItemShortId,
                                            action: 'will-retry-after-delay',
                                            note: 'Input value not set, retrying to ensure synchronization'
                                        });
                                        // Retry after a short delay to allow state to sync
                                        setTimeout(() => {
                                            // Recursively call verifyAndApply if needed, but limit retries
                                            // For now, just retry once more
                                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                                hashTriggeredRef.current = true;
                                                // Remove hash parameter from URL before Apply is triggered
                                                if (onHashParameterUsed && queryItemShortId) {
                                                    onHashParameterUsed(queryItemShortId);
                                                }
                                                // Auto-trigger Apply button
                                                applyButtonRef.current.click();
                                            }
                                        }, 300);
                                        return; // Exit early, will retry
                                    }
                                }
                                // Input value is set correctly, proceed with execution
                                debugLogger.log('FORM', {
                                    event: 'input-value-verified',
                                    expectedValue: initialInputValue,
                                    queryItemShortId,
                                    note: 'Input value verified, proceeding with query execution'
                                });
                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                hashTriggeredRef.current = true;
                                // Remove hash parameter from URL before Apply is triggered to prevent re-execution
                                if (onHashParameterUsed && queryItemShortId) {
                                    onHashParameterUsed(queryItemShortId);
                                }
                                // Auto-trigger Apply button to execute the query with the populated value
                                applyButtonRef.current.click();
                            }
                        }, 200); // Small delay after blur to ensure state is synced
                    }
                }, 500); // Longer delay to ensure component is fully rendered
                return () => clearTimeout(timeoutId);
            }
        }
        // The sqlExprObj.parts may change but the displaySQL is the same
        if (!sqlExprObj) {
            showClauseNumber.current = 0;
            setAttributeFilterSqlExprObj(null);
        }
        else {
            showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
            // Only update if we haven't set the initial value for this configId yet, or if we don't have an initial value
            if (initialValueSetRef.current !== configId || !initialInputValue) {
                setAttributeFilterSqlExprObj(sqlExprObj);
            }
        }
    }, [sqlExprObj, initialInputValue, datasourceReady, configId, widgetId, onHashParameterUsed, queryItemShortId]);
    const applyQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        // When the 'apply' button is clicked, it should clear the selection from the previous result list
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.clearSelectionInDataSources)(outputDS);
        if (outputDS) {
            const originDs = outputDS.getOriginDataSources()[0];
            if (originDs) {
                const dataViewConfig = originDs.getDataViewConfig();
                const maximum = dataViewConfig === null || dataViewConfig === void 0 ? void 0 : dataViewConfig.maximum;
                if (maximum != null && maximum > 0) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(outputDS, outputDS.getDataSourceJson().setIn(['query', 'maximum'], maximum));
                }
            }
        }
        // Force zoom for hash-triggered queries, otherwise use runtime preference
        const zoomToUse = hashTriggeredRef.current ? true : runtimeZoomToSelected;
        let rel = spatialRelationRef.current;
        if (((_a = spatialFilterObjRef.current) === null || _a === void 0 ? void 0 : _a.geometry) && rel == null) {
            rel = _config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect;
        }
        if (Array.isArray((_b = spatialFilterObjRef.current) === null || _b === void 0 ? void 0 : _b.geometry)) {
            if (spatialFilterObjRef.current.geometry.length === 1) {
                onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry: spatialFilterObjRef.current.geometry[0], relation: rel, buffer: bufferRef.current }), zoomToUse);
            }
            else {
                (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)([
                    'esri/geometry/operators/unionOperator'
                ]).then(modules => {
                    const operator = modules[0];
                    const geometry = operator.executeMany(spatialFilterObjRef.current.geometry);
                    onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry, relation: rel, buffer: bufferRef.current }), zoomToUse);
                });
            }
        }
        else {
            onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { relation: rel, buffer: bufferRef.current }), zoomToUse);
        }
        // Reset hashTriggeredRef after use
        hashTriggeredRef.current = false;
    }, [onFormSubmit, outputDS, attributeFilterSqlExprObj, runtimeZoomToSelected]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((event) => {
        if (event.key === 'Enter' && datasourceReady) {
            event.preventDefault();
            // Find the active input field
            const activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT' && activeElement.type === 'text') {
                // Force blur to trigger SqlExpressionRuntime's input processing
                activeElement.blur();
                // Wait for blur processing, then click the Apply button
                // This uses the exact same code path as clicking the button manually
                setTimeout(() => {
                    if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                        applyButtonRef.current.click();
                    }
                    else {
                        applyQuery();
                    }
                }, 200);
            }
            else {
                // Not in an input field, safe to apply immediately
                if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                    applyButtonRef.current.click();
                }
                else {
                    applyQuery();
                }
            }
        }
    }, [datasourceReady, applyQuery]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!dataActionFilter)
            return;
        if (dataActionFilter.where !== (preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where)) {
            applyQuery();
        }
    }, [dataActionFilter, preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where, applyQuery]);
    const resetQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        // 1. reset attribute filter
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
        setAttributeFilterSqlExprObj(sqlExprObj);
        // 2. reset spatial filter
        setResetSymbol(Symbol());
    }, [sqlExprObj]);
    const handleSqlExprObjChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlObj) => {
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlObj);
        setAttributeFilterSqlExprObj(sqlObj);
    }, []);
    const handleSpatialFilterChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((filter) => {
        spatialFilterObjRef.current = filter;
    }, []);
    const handleRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((rel) => {
        spatialRelationRef.current = rel;
    }, []);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferRef.current = { distance, unit };
    }, []);
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // Debug logging for form rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        debugLogger.log('FORM', {
            event: 'form-render-check',
            configId,
            datasourceReady,
            useAttributeFilter,
            sqlExprObj: sqlExprObj ? 'exists' : 'null',
            sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            showAttributeFilter,
            originDS: originDS ? 'exists' : 'null',
            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'none',
            showSpatialFilter,
            isAutoHeight,
            outputDS: outputDS ? 'exists' : 'null'
        });
    }, [configId, datasourceReady, useAttributeFilter, sqlExprObj, showAttributeFilter, originDS, showSpatialFilter, isAutoHeight, outputDS]);
    // Log when form content should render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (showAttributeFilter && originDS) {
            debugLogger.log('FORM', {
                event: 'attribute-filter-ready',
                configId,
                originDSId: originDS.id,
                sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
                attributeFilterLabel,
                note: 'Input field should be visible'
            });
        }
        else {
            debugLogger.log('FORM', {
                event: 'attribute-filter-not-ready',
                configId,
                showAttributeFilter,
                originDS: originDS ? 'exists' : 'null',
                useAttributeFilter,
                sqlExprObj: sqlExprObj ? 'exists' : 'null',
                reason: !showAttributeFilter ? 'showAttributeFilter is false' : 'originDS is null'
            });
        }
    }, [showAttributeFilter, originDS, configId, sqlExprObj, useAttributeFilter, attributeFilterLabel]);
    // Check DOM visibility after render
    const formContentRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (formContentRef.current) {
            const computedStyle = window.getComputedStyle(formContentRef.current);
            const rect = formContentRef.current.getBoundingClientRect();
            debugLogger.log('FORM', {
                event: 'form-content-dom-check',
                configId,
                exists: !!formContentRef.current,
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                height: computedStyle.height,
                maxHeight: computedStyle.maxHeight,
                flex: computedStyle.flex,
                flexBasis: computedStyle.flexBasis,
                rectHeight: rect.height,
                rectWidth: rect.width,
                isVisible: rect.height > 0 && rect.width > 0,
                parentHeight: ((_a = formContentRef.current.parentElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0
            });
        }
    }, [configId, showAttributeFilter, originDS]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_context__WEBPACK_IMPORTED_MODULE_11__.QueryTaskContext.Provider, { value: { resetSymbol }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form', css: getFormStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: formContentRef, className: 'query-form__content', onKeyDown: handleKeyDown, children: [showAttributeFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding-top: 2px;`, "aria-label": attributeFilterLabel, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title d-flex align-items-center', { 'd-none': !attributeFilterLabel && !attributeFilterDesc }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-top: 0;
                margin-bottom: 4px;
              `, children: [attributeFilterLabel && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: attributeFilterLabel }), attributeFilterDesc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: attributeFilterDesc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_12__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), originDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin: -10px 0px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: originDS, expression: attributeFilterSqlExprObj, onChange: handleSqlExprObjChange }, `${configId}-${initialInputValue || 'default'}`) }))] })), showAttributeFilter && showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr", { className: 'm-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `border: none; height: 1px; background-color: var(--sys-color-divider-secondary);` })), showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_spatial_form__WEBPACK_IMPORTED_MODULE_8__.QueryTaskSpatialForm, { widgetId: widgetId, label: spatialFilterLabel, desc: spatialFilterDesc, filterTypes: spatialFilterTypes, mapWidgetIds: spatialMapWidgetIds, createToolTypes: spatialInteractiveCreateToolTypes, onFilterChange: handleSpatialFilterChange, onRelationChange: handleRelationChange, onBufferChange: handleBufferChange, spatialRelations: spatialRelations, dsEnableBuffer: spatialRelationEnableBuffer, dsBufferDistance: spatialRelationBufferDistance, dsBufferUnit: spatialRelationBufferUnit, drawEnableBuffer: spatialInteractiveEnableBuffer, drawBufferDistance: spatialInteractiveBufferDistance, drawBufferUnit: spatialInteractiveBufferUnit, useDataSources: spatialRelationUseDataSources, useRuntimeData: spatialIncludeRuntimeData }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form__actions px-4 d-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: runtimeZoomToSelected, onChange: (_, checked) => setRuntimeZoomToSelected(checked), className: 'mr-2' }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-auto', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `font-size: 0.875rem; color: var(--sys-color-text-primary);`, children: getI18nMessage('zoomToSelected') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: applyButtonRef, color: 'primary', className: 'ml-auto', disabled: !datasourceReady, onClick: applyQuery, children: getI18nMessage('apply') }), (showClauseNumber.current > 0 || showSpatialFilter) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-2', onClick: resetQuery, children: getI18nMessage('reset') }))] })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskLabel: () => (/* binding */ QueryTaskLabel)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

/** @jsx jsx */


const textStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  font-weight: 500;
  font-size: 0.875rem;
`;
function QueryTaskLabel(props) {
    const { icon, name } = props;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center text-truncate', css: textStyle, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { className: 'query-task-icon mr-2', icon: icon.svg }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', title: name, children: name })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListInline: () => (/* binding */ TaskListInline)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");

/** @jsx jsx */






const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
const SPACE = 8;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  > div {
    margin-right: 8px;
  }
`;
// show task label and an arrow to the task content
function TaskListInline(props) {
    const { queryItems, widgetId, minSize, defaultSize, defaultPageSize, widgetLabel, wrap = false } = props;
    const containerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const containerWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const contentWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef({});
    const [numOfExpanded, setNumOfExpanded] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(queryItems.length);
    const [openedPopper, setOpenedPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(-1);
    const resizeObserverRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const adjustContent = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        let total = 0;
        for (let i = 0; i < numOfExpanded; i++) {
            const item = queryItems[i];
            const itemWidth = contentWidthRef.current[item.configId];
            if (itemWidth > 0) {
                total += itemWidth + SPACE;
                if (total >= containerWidthRef.current && numOfExpanded !== i) {
                    setNumOfExpanded(i);
                    return;
                }
            }
            else {
                return; // content width not ready
            }
        }
        setNumOfExpanded(queryItems.length);
    }, [numOfExpanded, queryItems]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (resizeObserverRef.current) {
            resizeObserverRef.current.disconnect();
        }
        // bind with the new event handler
        resizeObserverRef.current = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
            const width = Math.round(entries[0].contentRect.width);
            if (containerWidthRef.current !== width) {
                containerWidthRef.current = width;
                adjustContent();
            }
        }, 200));
        resizeObserverRef.current.observe(containerRef.current);
        return () => {
            resizeObserverRef.current.disconnect();
        };
    }, [adjustContent]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        var _a;
        containerWidthRef.current = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth;
        adjustContent();
    });
    const handleItemWidthChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, width) => {
        const queryItem = queryItems[index];
        if (contentWidthRef.current[queryItem.configId] !== width) {
            contentWidthRef.current[queryItem.configId] = width;
            adjustContent();
        }
    }, [queryItems, adjustContent]);
    const handlePopperOpenedChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, isOpen) => {
        if (isOpen) {
            setOpenedPopper(index);
        }
        else if (index === openedPopper) {
            // current popper is closed
            setOpenedPopper(-1);
        }
    }, [openedPopper]);
    const [expandedArray, nonExpandedArray] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const expandedArray = [];
        const nonExpandedArray = [];
        for (let i = 0; i < queryItems.length; i++) {
            if (i < numOfExpanded) {
                expandedArray.push(queryItems[i]);
            }
            else {
                nonExpandedArray.push(queryItems[i]);
            }
        }
        return [expandedArray, nonExpandedArray];
    }, [queryItems, numOfExpanded]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: containerRef, css: style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('runtime-query__query-list h-100 d-flex', { 'flex-wrap': wrap, 'align-content-start': wrap }), children: [expandedArray.map((queryItem, index) => {
                var _a;
                const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
                return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: index, icon: currentItem.icon, buttonType: 'default', label: currentItem.displayLabel ? currentItem.name : undefined, popperTitle: currentItem.name, onWidthChange: handleItemWidthChange, minSize: minSize, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== index, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: index, total: 1, isInPopper: true, queryItem: currentItem, wrappedInPopper: true, className: 'pb-4', defaultPageSize: defaultPageSize, initialInputValue: currentItem.shortId === ((_a = props.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) ? props.initialQueryValue.value : undefined, onHashParameterUsed: props.onHashParameterUsed, queryItemShortId: currentItem.shortId }) }, currentItem.configId);
            }), nonExpandedArray.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: expandedArray.length + 1, icon: iconMap.iconMore, minSize: minSize, buttonType: 'default', popperTitle: widgetLabel, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== expandedArray.length + 1, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_3__.QueryTaskList, { widgetId: widgetId, isInPopper: true, defaultPageSize: defaultPageSize, queryItems: nonExpandedArray, className: 'pb-4', initialQueryValue: props.initialQueryValue, onHashParameterUsed: props.onHashParameterUsed }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListPopperWrapper: () => (/* binding */ TaskListPopperWrapper)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */



const shiftOptions = { padding: 1 };
function TaskListPopperWrapper(props) {
    const { id, icon, label, forceClose, onOpenedChange, popperTitle, minSize, defaultSize, onWidthChange, buttonType = 'tertiary', children } = props;
    const iconRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const widthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const [isOpen, setIsOpen] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const [popperVersion, setPopperVersion] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const isMobile = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useCheckSmallBrowserSizeMode();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (forceClose) {
            setIsOpen(false);
        }
    }, [forceClose]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (typeof onWidthChange === 'function') {
            widthRef.current = Math.round(iconRef.current.clientWidth);
            onWidthChange(id, widthRef.current);
            const resizeObserver = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
                const width = Math.round(entries[0].contentRect.width);
                if (widthRef.current !== width) {
                    widthRef.current = width;
                    onWidthChange(id, width);
                }
            }, 200));
            resizeObserver.observe(iconRef.current);
            return () => {
                resizeObserver.disconnect();
            };
        }
    });
    const togglePopper = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        if (typeof onOpenedChange === 'function') {
            onOpenedChange(id, !isOpen);
        }
        setIsOpen(!isOpen);
        setPopperVersion(popperVersion + 1);
        if (isOpen) {
            setTimeout(() => {
                if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.isKeyboardMode)()) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(iconRef.current);
                }
            }, 200);
        }
    }, [id, isOpen, popperVersion, onOpenedChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'runtime-query__widget-popper', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { title: label, "aria-label": label, icon: true, size: 'sm', variant: buttonType === 'tertiary' ? 'text' : undefined, color: buttonType === 'tertiary' ? 'inherit' : undefined, type: buttonType === 'tertiary' ? undefined : buttonType, ref: iconRef, onClick: togglePopper, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, Object.assign({ size: 16 }, (typeof icon === 'string' ? { icon } : { icon: icon.svg, color: buttonType === 'tertiary' ? undefined : icon.properties.color }))), label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
            line-height: 1.2;
          `, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ 'ml-2': icon != null }), children: label })] }), isMobile
                ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.MobilePanel, { open: isOpen, title: popperTitle, onClose: togglePopper, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple.org", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })
                : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FloatingPanel, { className: 'ui-unit-popper ui-unit-popper_k-arrangement-icon flex-grow-1', headerClassName: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS, open: isOpen, onHeaderClose: togglePopper, toggle: togglePopper, headerTitle: popperTitle, minSize: minSize, defaultSize: defaultSize, dragBounds: 'body', version: popperVersion, reference: iconRef, placement: 'bottom-start', shiftOptions: shiftOptions, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple.org", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskList: () => (/* binding */ QueryTaskList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */





const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__.createQuerySimpleDebugLogger)();
// Helper function to group queries by groupId
const groupQueries = (queryItems) => {
    const groups = {};
    const ungrouped = [];
    const groupOrder = [];
    const groupIndexMap = {};
    // First pass: collect items in regular arrays
    const groupItemsMap = {};
    queryItems.forEach((item, index) => {
        if (item.groupId) {
            if (!groupItemsMap[item.groupId]) {
                groupItemsMap[item.groupId] = [];
                groups[item.groupId] = {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]),
                    displayName: item.groupDisplayName || item.name || `Group ${item.groupId}`,
                    icon: item.icon
                };
                groupIndexMap[item.groupId] = index;
                groupOrder.push(item.groupId);
            }
            groupItemsMap[item.groupId].push(item);
        }
        else {
            ungrouped.push({ item, index });
        }
    });
    // Second pass: convert regular arrays to ImmutableArrays
    Object.keys(groupItemsMap).forEach(groupId => {
        groups[groupId].items = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(groupItemsMap[groupId]);
    });
    return { groups, ungrouped, groupOrder };
};
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
function QueryTaskList(props) {
    const { queryItems, widgetId, defaultPageSize, isInPopper = false, className = '', initialQueryValue, onHashParameterUsed, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const { groups, ungrouped, groupOrder } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => groupQueries(queryItems), [queryItems]);
    // Find the query item matching the initialQueryValue shortId from URL hash
    const matchingQueryIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (!(initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId)) {
            return -1;
        }
        return queryItems.findIndex(item => item.shortId === initialQueryValue.shortId);
    }, [queryItems, initialQueryValue]);
    // Determine which group/ungrouped index the matching query is at
    const getQuerySelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        if (matchingQueryIndex < 0)
            return null;
        const item = queryItems[matchingQueryIndex];
        if (item.groupId) {
            const groupItems = ((_a = groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.items) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
            const indexInGroup = groupItems.findIndex(q => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-in-group',
                groupId: item.groupId,
                indexInGroup: indexInGroup >= 0 ? indexInGroup : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'group', groupId: item.groupId, index: indexInGroup >= 0 ? indexInGroup : 0 };
        }
        else {
            // Ungrouped query
            const indexInUngrouped = ungrouped.findIndex(({ item: q }) => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-ungrouped',
                indexInUngrouped: indexInUngrouped >= 0 ? indexInUngrouped : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'ungrouped', index: indexInUngrouped >= 0 ? indexInUngrouped : 0 };
        }
    }, [matchingQueryIndex, queryItems, groups, ungrouped]);
    // Track selected query - initialize with matching query if found from URL hash
    const [selectedGroupId, setSelectedGroupId] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection',
                groupId: getQuerySelection.groupId
            });
            return getQuerySelection.groupId;
        }
        // Default to first group if groups exist and no hash parameter
        if (groupOrder.length > 0) {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection-default',
                groupId: groupOrder[0],
                note: 'No hash parameter, defaulting to first group'
            });
            return groupOrder[0];
        }
        return null;
    });
    const [selectedGroupQueryIndex, setSelectedGroupQueryIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-query-index',
                index: getQuerySelection.index
            });
            return getQuerySelection.index;
        }
        return 0;
    });
    const [selectedUngroupedIndex, setSelectedUngroupedIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type) === 'ungrouped') {
            debugLogger.log('GROUP', {
                event: 'initial-ungrouped-index',
                index: getQuerySelection.index
            });
            return getQuerySelection.index;
        }
        return 0;
    });
    // Update selection when initialQueryValue changes (e.g., when URL hash is detected)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (getQuerySelection) {
            if (getQuerySelection.type === 'group') {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-group',
                    groupId: getQuerySelection.groupId,
                    index: getQuerySelection.index
                });
                setSelectedGroupId(getQuerySelection.groupId);
                setSelectedGroupQueryIndex(getQuerySelection.index);
            }
            else {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-ungrouped',
                    index: getQuerySelection.index
                });
                setSelectedGroupId(null);
                setSelectedUngroupedIndex(getQuerySelection.index);
            }
        }
        else {
            // No hash parameter - ensure we have a default selection
            // If groups exist, default to first group (already handled in useState initializer)
            // But if no groups and we have ungrouped, ensure selectedUngroupedIndex is set
            if (groupOrder.length === 0 && ungrouped.length > 0) {
                debugLogger.log('GROUP', {
                    event: 'no-hash-parameter-default-ungrouped',
                    defaultIndex: 0
                });
                setSelectedUngroupedIndex(0);
            }
        }
    }, [getQuerySelection, groupOrder.length, ungrouped.length]);
    // Get the currently selected query item
    const getSelectedQueryItem = () => {
        // PRIORITY 1: If hash parameter matches a query, use that directly
        // This ensures we always use the hash-matched query, regardless of state timing
        // This is critical for grouped queries where dropdowns need to be synchronized
        if (getQuerySelection && matchingQueryIndex >= 0) {
            const hashMatchedItem = queryItems[matchingQueryIndex];
            debugLogger.log('GROUP', {
                event: 'getSelectedQueryItem-hash-match',
                shortId: hashMatchedItem.shortId,
                groupId: hashMatchedItem.groupId,
                configId: hashMatchedItem.configId,
                isGrouped: !!hashMatchedItem.groupId,
                matchingQueryIndex,
                note: 'Using hash-matched query (highest priority)'
            });
            return hashMatchedItem;
        }
        // PRIORITY 2: Otherwise use current state selection
        debugLogger.log('GROUP', {
            event: 'getSelectedQueryItem-state-selection',
            selectedGroupId,
            hasSelectedGroup: selectedGroupId && groups[selectedGroupId],
            selectedGroupQueryIndex,
            selectedUngroupedIndex,
            ungroupedLength: ungrouped.length,
            groupOrderLength: groupOrder.length,
            note: 'No hash parameter, using state selection'
        });
        // If a group is selected, get query from that group
        if (selectedGroupId && groups[selectedGroupId]) {
            const groupItems = groups[selectedGroupId].items;
            if (groupItems.length > 0) {
                const idx = selectedGroupQueryIndex < groupItems.length ? selectedGroupQueryIndex : 0;
                const selectedItem = groupItems[idx];
                debugLogger.log('GROUP', {
                    event: 'selected-query-from-group',
                    groupId: selectedGroupId,
                    groupQueryIndex: idx,
                    queryItemConfigId: selectedItem.configId,
                    queryDisplayName: getQueryDisplayName(selectedItem)
                });
                return selectedItem;
            }
        }
        // Otherwise, get from ungrouped queries
        if (ungrouped.length > 0) {
            const idx = selectedUngroupedIndex < ungrouped.length ? selectedUngroupedIndex : 0;
            const selectedItem = ungrouped[idx].item;
            debugLogger.log('GROUP', {
                event: 'selected-query-from-ungrouped',
                ungroupedIndex: idx,
                queryItemConfigId: selectedItem.configId,
                queryDisplayName: getQueryDisplayName(selectedItem)
            });
            return selectedItem;
        }
        // Fallback to first query item
        debugLogger.log('GROUP', {
            event: 'selected-query-fallback',
            note: 'No groups or ungrouped queries, using first item'
        });
        return queryItems[0];
    };
    const selectedQueryItem = getSelectedQueryItem();
    const selectedQueryRealIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return queryItems.findIndex(q => q.configId === selectedQueryItem.configId);
    }, [queryItems, selectedQueryItem]);
    // If only one query total, don't show dropdown
    const showDropdown = queryItems.length > 1 || groupOrder.length > 0;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `runtime-query__query-list h-100 ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      display: flex;
      flex-direction: column;
      .query-selector {
        padding: 16px;
        border-bottom: 1px solid var(--sys-color-divider-secondary);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .query-selector-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--sys-color-text-primary);
        margin-bottom: 4px;
      }
      .query-selector select {
        width: 100%;
      }
      .query-task-container {
        flex: 1;
        overflow: auto;
      }
    `, children: selectedQueryItem && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `query-task-container ${isInPopper ? jimu_ui__WEBPACK_IMPORTED_MODULE_3__.FOCUSABLE_CONTAINER_CLASS : ''}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: selectedQueryRealIndex >= 0 ? selectedQueryRealIndex : 0, total: queryItems.length, queryItem: selectedQueryItem, defaultPageSize: defaultPageSize, isInPopper: isInPopper, initialInputValue: selectedQueryItem.shortId === (initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId) ? initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value : undefined, onHashParameterUsed: onHashParameterUsed, queryItems: queryItems, selectedQueryIndex: selectedUngroupedIndex, onQueryChange: (index) => setSelectedUngroupedIndex(index), 
                // Grouping props
                groups: groups, ungrouped: ungrouped, groupOrder: groupOrder, selectedGroupId: selectedGroupId, selectedGroupQueryIndex: selectedGroupQueryIndex, onGroupChange: (groupId) => setSelectedGroupId(groupId), onGroupQueryChange: (index) => setSelectedGroupQueryIndex(index), onUngroupedChange: (index) => setSelectedUngroupedIndex(index), resultsMode: resultsMode, onResultsModeChange: onResultsModeChange, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange }) })) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskSpatialForm: () => (/* binding */ QueryTaskSpatialForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-from-ds */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx");
/* harmony import */ var _geometry_from_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry-from-map */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx");
/* harmony import */ var _geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./geometry-from-draw */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");

/** @jsx jsx */








function QueryTaskSpatialForm(props) {
    var _a;
    const { label, desc, filterTypes, mapWidgetIds, onFilterChange, onRelationChange, onBufferChange, useDataSources, spatialRelations, useRuntimeData, dsEnableBuffer, dsBufferDistance, dsBufferUnit, drawEnableBuffer, drawBufferDistance, drawBufferUnit, createToolTypes, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // used to store the selection of the data source in order to update the filter when option changes
    const selectedGeometriesRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const mapExists = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        if ((mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.length) > 0) {
            const mapWidgetId = mapWidgetIds[0];
            return state.appConfig.widgets[mapWidgetId] != null;
        }
        return false;
    });
    const canUseMapFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return mapExists && ((filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent)) || (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode)));
    }, [filterTypes, mapExists]);
    const supportedFilterTypes = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [];
        if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData) {
            result.push({ value: 'data', label: getI18nMessage('featureFromDs') });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent))) {
            result.push({ value: 'map', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent}`) });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode))) {
            result.push({ value: 'draw', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode}`) });
        }
        return result;
    }, [canUseMapFilter, useDataSources, useRuntimeData, getI18nMessage, filterTypes]);
    const [currentFilterType, setCurrentFilterType] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // in order to avoid invalid option being selected
        if (currentFilterType !== 'none' && !supportedFilterTypes.find((item) => item.value === currentFilterType)) {
            setCurrentFilterType((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
        }
    }, [currentFilterType, supportedFilterTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear the relationship and buffer if filter type is not 'data'
        if (currentFilterType === 'map' || currentFilterType === 'draw' || currentFilterType === 'none') {
            onRelationChange(null);
            onBufferChange(0, _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters);
            onFilterChange({ geometry: null });
        }
        // no need to update the filter if the data source has selection since it will be updated in the handleSelectionChange method
        if (currentFilterType === 'data' && selectedGeometriesRef.current == null) {
            onFilterChange({ geometry: null });
        }
    }, [currentFilterType, onRelationChange, onBufferChange, onFilterChange]);
    const handleFilterTypeChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => { setCurrentFilterType(evt.target.value); }, []);
    const handleGeometryChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometry, layer, graphic, clearAfterApply) => {
        onFilterChange({ geometry, graphic, layer, clearAfterApply });
    }, [onFilterChange]);
    const handleSelectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometries) => {
        selectedGeometriesRef.current = geometries;
        onFilterChange({ geometry: geometries });
    }, [onFilterChange]);
    if (!((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData || canUseMapFilter)) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4 pb-4', "aria-label": label, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !label && !desc }), children: [label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: label }), desc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: desc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), supportedFilterTypes.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3', children: getI18nMessage('chooseFilterType') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterType'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `height: 32px;`, value: currentFilterType, onChange: handleFilterTypeChanged, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'none', children: "-" }, '-'), supportedFilterTypes.map(item => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item.value, children: item.label }, item.value))] })] })), currentFilterType === 'data' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__.GeometryFromDataSource, { enableBuffer: dsEnableBuffer, bufferDistance: dsBufferDistance, bufferUnit: dsBufferUnit, spatialRelations: spatialRelations, useDataSources: useDataSources, useRuntimeData: useRuntimeData, onSelectionChange: handleSelectionChange, onRelationChange: onRelationChange, onBufferChange: onBufferChange })), currentFilterType === 'map' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_map__WEBPACK_IMPORTED_MODULE_6__.GeometryFromMap, { mapWidgetIds: mapWidgetIds, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange })), currentFilterType === 'draw' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__.GeometryFromDraw, { enableBuffer: drawEnableBuffer, bufferDistance: drawBufferDistance, bufferUnit: drawBufferUnit, mapWidgetIds: mapWidgetIds, widgetId: widgetId, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange, onBufferChange: onBufferChange }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTask: () => (/* binding */ QueryTask)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_task_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx");
/* harmony import */ var _query_result__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-result */ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_label__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-label */ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var _loading_result__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./loading-result */ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

/** @jsx jsx */

















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.createQuerySimpleDebugLogger)();
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  &.wrapped .query-form {
    height: 100%;
  }
  .query-task__content {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-top: 8px;
    &:has(> .query-form__header > div:not(.d-none)), &:has(> .query-result) {
      padding-top: 16px;
    }
  }
  .query-form__header {
    display: flex;
    &.has-content {
      border-bottom: 1px solid var(--sys-color-divider-secondary);
      margin-bottom: 6px;
      padding-bottom: 8px;
    }
    .nav-action {
      flex: 1 1 0;
      overflow: hidden;
      display: flex;
      .jimu-btn {
        min-width: 26px;
      }
    }
    .result-menu {
      display: flex;
    }
  }
`;
function QueryTask(props) {
    var _a, _b, _c, _d, _e;
    const { queryItem, onNavBack, total, isInPopper = false, defaultPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.CONSTANTS.DEFAULT_QUERY_PAGE_SIZE, wrappedInPopper = false, className = '', index, initialInputValue, onHashParameterUsed, queryItems, selectedQueryIndex, onQueryChange, groups, ungrouped, groupOrder, selectedGroupId, selectedGroupQueryIndex, onGroupChange, onGroupQueryChange, onUngroupedChange, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange } = props, otherProps = __rest(props, ["queryItem", "onNavBack", "total", "isInPopper", "defaultPageSize", "wrappedInPopper", "className", "index", "initialInputValue", "onHashParameterUsed", "queryItems", "selectedQueryIndex", "onQueryChange", "groups", "ungrouped", "groupOrder", "selectedGroupId", "selectedGroupQueryIndex", "onGroupChange", "onGroupQueryChange", "onUngroupedChange", "resultsMode", "onResultsModeChange", "accumulatedRecords", "onAccumulatedRecordsChange"]);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_13__["default"]);
    const [stage, setStage] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0); // 0 = form, 1 = results, 2 = loading
    const [activeTab, setActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState('query');
    const [enabled, setEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const [resultCount, setResultCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    // Track if we've already selected records for the current query results
    const hasSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track query execution count to force QueryTaskResult remount on new queries
    const queryExecutionKeyRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const queryParamRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const recordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [outputDS, setOutputDS] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [spatialFilterEnabled, setSpatialFilterEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const attributeFilterSqlExprObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.sqlExprObj);
    const spatialFilterObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const clearResultBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const [dataActionFilter, setDataActionFilter] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.configId);
    // Track manual tab switches to prevent auto-switch useEffect from interfering
    const manualTabSwitchRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track when a query was just executed - only auto-switch after query execution completes
    const queryJustExecutedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Store the last runtime zoom override value from the form for use by Add to Map action
    const lastRuntimeZoomToSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Error states for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [zoomError, setZoomError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_10__.DEFAULT_QUERY_ITEM, queryItem);
    const { icon, name, displayLabel } = currentItem;
    const dsExists = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.useDataSourceExists)({ widgetId: props.widgetId, useDataSourceId: (_a = currentItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId });
    // Debug logging for tab content rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('TASK', {
            event: 'query-tab-content-render',
            activeTab,
            enabled,
            dsExists,
            dataSource: dataSource ? 'exists' : 'null',
            queryItemConfigId: queryItem.configId,
            note: 'Query tab content state check'
        });
    }, [activeTab, enabled, dsExists, dataSource, queryItem.configId]);
    // Debug logging for Tab children rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'query-tab-children-render',
                activeTab,
                queryItemConfigId: queryItem.configId,
                note: 'Query Tab children should be rendering'
            });
        }
    }, [activeTab, queryItem.configId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    // Get the pagination style from widget config (MultiPage or LazyLoad/Single-page)
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    // Get the initial page size for single-page (LazyLoad) results
    // This allows users to configure how many records are loaded initially when using single-page mode
    // Defaults to 100 if not configured
    const lazyLoadInitialPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.lazyLoadInitialPageSize;
    });
    // Watch for when results are ready and switch to Results tab
    // ONLY auto-switch when a query was just executed and results are loaded
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Don't auto-switch if user manually switched tabs
        if (manualTabSwitchRef.current) {
            debugLogger.log('TASK', {
                event: 'auto-switch-skipped',
                reason: 'manual-tab-switch-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                activeTab,
                resultCount,
                queryJustExecutedRef: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
            return;
        }
        // FORCED: Always use SimpleList - we're done with lazy loading issues
        // Records are available immediately, so we can switch as soon as resultCount > 0
        const isSimpleList = true;
        // ONLY auto-switch when:
        // 1. A query was just executed (queryJustExecutedRef.current === true)
        // 2. We have results (resultCount > 0)
        // 3. Records are actually loaded:
        //    - For SimpleList: resultCount > 0 is sufficient (records available immediately)
        //    - For LazyLoad: recordsRef.current must have data (wait for lazy loading)
        // 4. We're currently on the query tab (don't switch if already on results)
        const hasRecords = isSimpleList
            ? resultCount > 0
            : (recordsRef.current && recordsRef.current.length > 0);
        debugLogger.log('TASK', {
            event: 'auto-switch-check',
            widgetId: props.widgetId,
            queryItemConfigId: queryItem.configId,
            activeTab,
            resultCount,
            queryJustExecutedRef: queryJustExecutedRef.current,
            isSimpleList,
            pagingTypeInConfig,
            hasRecords,
            recordsRefLength: ((_a = recordsRef.current) === null || _a === void 0 ? void 0 : _a.length) || 0,
            manualTabSwitchRef: manualTabSwitchRef.current,
            willAutoSwitch: queryJustExecutedRef.current && resultCount > 0 && hasRecords && activeTab === 'query',
            timestamp: Date.now()
        });
        if (queryJustExecutedRef.current &&
            resultCount > 0 &&
            hasRecords &&
            activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'auto-switch-triggered',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                fromTab: activeTab,
                toTab: 'results',
                resultCount,
                timestamp: Date.now()
            });
            setActiveTab('results');
            queryJustExecutedRef.current = false; // Reset after switching
            debugLogger.log('TASK', {
                event: 'auto-switch-completed',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                queryJustExecutedRefReset: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
        }
    }, [resultCount, activeTab, pagingTypeInConfig]);
    // Verify dropdowns are synchronized with hash parameter when present
    // This is especially important for grouped queries where dropdowns need to be synchronized
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only verify if we have a hash parameter
        if (!initialInputValue || !queryItem.shortId) {
            return;
        }
        // Verify the current queryItem matches what we expect from hash parameter
        const expectedShortId = queryItem.shortId;
        const isGroupedQuery = queryItem.groupId !== null && queryItem.groupId !== undefined;
        // Check if dropdowns are correctly set for grouped queries
        if (isGroupedQuery) {
            const expectedGroupId = queryItem.groupId;
            const actualGroupId = selectedGroupId;
            const expectedQueryIndex = selectedGroupQueryIndex;
            if (expectedGroupId !== actualGroupId) {
                debugLogger.log('GROUP', {
                    event: 'dropdown-group-mismatch',
                    expectedGroupId,
                    actualGroupId,
                    queryItemShortId: expectedShortId,
                    warning: 'First dropdown may not be synchronized with hash parameter'
                });
            }
            else if (expectedQueryIndex !== undefined) {
                // Verify the query index within the group matches
                const groupItems = (_a = groups === null || groups === void 0 ? void 0 : groups[expectedGroupId]) === null || _a === void 0 ? void 0 : _a.items;
                if (groupItems && groupItems.length > expectedQueryIndex) {
                    const expectedQueryConfigId = (_b = groupItems[expectedQueryIndex]) === null || _b === void 0 ? void 0 : _b.configId;
                    const actualQueryConfigId = queryItem.configId;
                    if (expectedQueryConfigId !== actualQueryConfigId) {
                        debugLogger.log('GROUP', {
                            event: 'dropdown-query-index-mismatch',
                            expectedQueryConfigId,
                            actualQueryConfigId,
                            expectedQueryIndex,
                            queryItemShortId: expectedShortId,
                            warning: 'Second dropdown may not be synchronized with hash parameter'
                        });
                    }
                    else {
                        debugLogger.log('GROUP', {
                            event: 'dropdowns-synchronized',
                            queryItemShortId: expectedShortId,
                            groupId: expectedGroupId,
                            selectedGroupQueryIndex: expectedQueryIndex,
                            note: 'Dropdowns synchronized with hash parameter'
                        });
                    }
                }
            }
        }
        else {
            // Ungrouped query - verify it's selected
            debugLogger.log('GROUP', {
                event: 'dropdowns-synchronized-ungrouped',
                queryItemShortId: expectedShortId,
                note: 'Ungrouped query dropdown synchronized with hash parameter'
            });
        }
    }, [initialInputValue, queryItem.shortId, queryItem.groupId, queryItem.configId, selectedGroupId, selectedGroupQueryIndex, groups]);
    const useOutputDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
        dataSourceId: queryItem.outputDataSourceId,
        mainDataSourceId: queryItem.outputDataSourceId
    }), [queryItem.outputDataSourceId]);
    const updateDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        var _a, _b;
        const currentDs = ds !== null && ds !== void 0 ? ds : dataSource;
        // should disable spatial filter if the dataSource is an output ds and it already has spatial filter
        if ((_a = currentDs === null || currentDs === void 0 ? void 0 : currentDs.getDataSourceJson()) === null || _a === void 0 ? void 0 : _a.isOutputFromWidget) {
            const qDs = currentDs;
            const qParams = (_b = qDs.getCurrentQueryParams) === null || _b === void 0 ? void 0 : _b.call(qDs);
            if (qParams.geometry != null) {
                setSpatialFilterEnabled(false);
            }
            else {
                setSpatialFilterEnabled(true);
            }
        }
    }, [dataSource]);
    const handleStatusChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((enabled) => {
        setEnabled(enabled);
        updateDataSource();
    }, [updateDataSource]);
    const handleOutputDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info, preInfo) => {
        const outputId = queryItem.outputDataSourceId;
        const filter = (info === null || info === void 0 ? void 0 : info.widgetQueries) ? info.widgetQueries[`setFilter-${outputId}`] : null;
        if (filter == null) { // filter is null means there are incomplete queries, ignore this change
            return;
        }
        const preFilter = (preInfo === null || preInfo === void 0 ? void 0 : preInfo.widgetQueries) ? preInfo.widgetQueries[`setFilter-${outputId}`] : null;
        if ((filter === null || filter === void 0 ? void 0 : filter.where) !== (preFilter === null || preFilter === void 0 ? void 0 : preFilter.where)) {
            setDataActionFilter(filter);
        }
    }, [queryItem.outputDataSourceId]);
    const publishDataClearedMsg = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        if (!outputDS)
            return;
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordSetChangeMessage(props.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_1__.RecordSetChangeType.Remove, [outputDS.id]);
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        yield jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(props.widgetId, [], [outputDS.id]));
    }), [props.widgetId, outputDS]);
    /**
     * Clears all query results from the UI and map.
     * This is the single source of truth for clearing results.
     * It clears the records, resets the result count, clears selection from the map,
     * publishes a cleared message to the map, switches back to the Query tab,
     * and increments the query execution key to force QueryTaskResult to remount with fresh state.
     */
    const clearResult = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        recordsRef.current = null;
        outputDS === null || outputDS === void 0 ? void 0 : outputDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady);
        setResultCount(0);
        // Clear selection directly from data source using utility function
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.clearSelectionInDataSources)(outputDS);
        // Clear widget-level accumulated records when clearing results
        if (onAccumulatedRecordsChange) {
            onAccumulatedRecordsChange([]);
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-cleared-on-clear-results',
                widgetId: props.widgetId
            });
        }
        publishDataClearedMsg();
        // Switch back to Query tab when clearing results
        setActiveTab('query');
        setStage(0);
        hasSelectedRecordsRef.current = false; // Reset selection flag when clearing
        // Increment query execution key to force QueryTaskResult remount with fresh state
        queryExecutionKeyRef.current += 1;
        // Clear error states when clearing results
        setSelectionError(null);
        setZoomError(null);
    }, [outputDS, publishDataClearedMsg, props.widgetId, queryItem.configId, onAccumulatedRecordsChange]);
    /**
     * Handles data source creation when switching between query items.
     * When a new query item is selected (e.g., switching from Parcel to Major),
     * this clears old results by programmatically clicking the trash can button
     * to ensure all cleanup logic runs properly.
     *
     * @param ds - The newly created data source for the selected query item
     */
    const handleDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        // In "Add to" and "Remove from" modes, preserve accumulated records and selection - don't clear
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'preserving-selection-on-query-switch-handleDataSourceCreated',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length
            });
            setDataSource(ds);
            updateDataSource(ds);
            setStage(0);
            setActiveTab('query');
            return; // Skip clearing - preserve selection
        }
        // For "New" mode, clear old results as before
        let clearButton = clearResultBtnRef.current;
        if (!clearButton) {
            clearButton = (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.findClearResultsButton)();
        }
        if (clearButton && resultCount > 0) {
            clearButton.click();
        }
        else {
            clearResult();
        }
        setDataSource(ds);
        updateDataSource(ds);
        setStage(0);
        setActiveTab('query'); // Return to Query tab when switching queries
    }, [updateDataSource, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const handleOutputDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        setOutputDS(ds);
        // If in "Add to" or "Remove from" mode and we have accumulated records, re-select them
        // This uses the same logic as after query completion - selectRecordsAndPublish
        // This ensures records are selected both on the map and in the Results tab
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            // Use a small delay to ensure the DS is fully ready
            setTimeout(() => {
                const featureDS = ds;
                if (featureDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    const recordIds = accumulatedRecords.map(record => record.getId());
                    try {
                        // Use the same selectRecordsAndPublish that's used after query completion
                        // This will select records on the map and trigger handleDataSourceInfoChange
                        // in query-result.tsx to update selectedRecords state for the Results tab
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.selectRecordsAndPublish)(props.widgetId, featureDS, recordIds, accumulatedRecords);
                        // Update recordsRef so results tab shows accumulated records
                        recordsRef.current = accumulatedRecords;
                        setResultCount(accumulatedRecords.length);
                        debugLogger.log('RESULTS-MODE', {
                            event: 're-selected-accumulated-records-after-query-switch',
                            widgetId: props.widgetId,
                            outputDSId: featureDS.id,
                            recordsCount: accumulatedRecords.length
                        });
                        // Verify what's actually selected in the DS after a delay
                        setTimeout(() => {
                            var _a;
                            const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(featureDS.id);
                            const selectedInDS = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
                            const selectedIdsInDS = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
                            debugLogger.log('RESULTS-MODE', {
                                event: 'verify-records-after-reselection',
                                widgetId: props.widgetId,
                                outputDSId: featureDS.id,
                                expectedCount: accumulatedRecords.length,
                                actualSelectedInDS: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) || 0,
                                selectedIdsInDS: selectedIdsInDS.length,
                                recordsMatch: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) === accumulatedRecords.length
                            });
                        }, 200);
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 're-selection-failed-after-switch',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error',
                            errorStack: error instanceof Error ? error.stack : undefined
                        });
                    }
                }
            }, 100);
        }
    }, [resultsMode, accumulatedRecords, props.widgetId]);
    // Clear results when query item changes (e.g., when new hash parameter triggers different query)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Only clear if we're actually switching to a different query (not just re-rendering)
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        // Only clear results when switching queries if we're in "New" mode
        // In "Add to" and "Remove from" modes, we want to preserve accumulated records across query switches
        if (isSwitchingQueries && resultCount > 0 && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            // Store the old configId before updating
            const oldConfigId = previousConfigIdRef.current;
            // Update the ref to track the new query
            previousConfigIdRef.current = queryItem.configId;
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-results-on-query-switch-new-mode',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode
            });
            // Clear immediately when switching queries, but wrap in try-catch to handle
            // race conditions with feature info windows that might be rendering
            try {
                clearResult();
            }
            catch (error) {
                // Log for debugging but don't show to user (framework race condition)
                // The error is in framework code (feature-info.tsx), not our code
                // This can happen if feature-info.tsx is trying to appendChild to a DOM element
                // that gets removed when we clear selection
                debugLogger.log('TASK', {
                    event: 'clear-result-race-condition',
                    error: error instanceof Error ? error.message : String(error),
                    note: 'Likely race condition with feature-info.tsx'
                });
                if (true) {
                    console.warn('Error clearing results (likely race condition with feature info):', error);
                }
                // Don't set error state - this is expected in some scenarios
            }
        }
        else if (isSwitchingQueries) {
            // Just update the ref - don't clear results if in "Add to" or "Remove from" mode or no results
            previousConfigIdRef.current = queryItem.configId;
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'preserving-accumulated-records-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    oldConfigId: previousConfigIdRef.current,
                    newConfigId: queryItem.configId,
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
                });
            }
        }
    }, [queryItem.configId, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const navToForm = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((clearResults = false) => {
        if (clearResults) {
            // Use the centralized clearResult method instead of duplicating logic
            clearResult();
            return;
        }
        // Switch to query tab but don't clear results unless explicitly requested
        // Mark as manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab('query');
        // Reset the flag after a short delay
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Only change stage if we're clearing results
        // Otherwise, keep stage at 1 (results available) so results persist
        if (!clearResults && resultCount > 0) {
            setStage(1); // Keep results available
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
        });
    }, [clearResult, resultCount]);
    /**
     * Handles tab switching between Query and Results tabs.
     * Tab switching preserves results state - results remain visible and selected
     * when switching between tabs. Results are only cleared when explicitly
     * clicking the trash can button or when starting a new query.
     *
     * @param tab - The tab to switch to ('query' | 'results')
     * @param event - Optional mouse event to prevent default behavior
     */
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab, event) => {
        debugLogger.log('TASK', {
            event: 'tab-change',
            tab,
            currentTab: activeTab,
            resultCount,
            eventType: event === null || event === void 0 ? void 0 : event.type
        });
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        // Don't allow switching to results if there are no results
        if (tab === 'results' && resultCount === 0) {
            debugLogger.log('TASK', {
                event: 'tab-change-blocked',
                reason: 'no-results',
                tab,
                resultCount
            });
            return;
        }
        // Mark this as a manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab(tab);
        // Reset the flag after a short delay to allow the state update to complete
        // This prevents the auto-switch useEffect from immediately switching back
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Don't change stage here - just switch the view
        // Stage should remain at 1 (results available) when switching between tabs
    }, [resultCount, activeTab]);
    /**
     * Handles form submission when user clicks "Apply" button.
     * Clears old results (if any) by programmatically clicking the trash can button,
     * then executes the query with the provided SQL expression and spatial filter.
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmit = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c;
        // Clear previous errors when starting a new query
        setSelectionError(null);
        setZoomError(null);
        // Store the runtime zoom override for use by Add to Map action
        lastRuntimeZoomToSelectedRef.current = runtimeZoomToSelected;
        attributeFilterSqlExprObj.current = sqlExpr;
        spatialFilterObj.current = spatialFilter;
        // Load the first page
        const featureDS = outputDS;
        // For "Add to" and "Remove from" modes, use widget-level accumulated records
        // These persist across query switches, unlike query-item-level records
        let existingRecordsForMerge = [];
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
            existingRecordsForMerge = accumulatedRecords || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'using-widget-level-accumulated-records',
                widgetId: props.widgetId,
                resultsMode,
                existingRecordsCount: existingRecordsForMerge.length,
                outputDSId: outputDS.id
            });
        }
        // For "New" mode, clear old results by programmatically clicking the trash can button
        // For "Add to" and "Remove from" modes, we keep accumulated results, so skip clearing
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection && clearResultBtnRef.current) {
            clearResultBtnRef.current.click();
            // Small delay to ensure the click handler completes before proceeding
            yield new Promise(resolve => setTimeout(resolve, 0));
        }
        // Set loading stage
        setStage(2);
        // For "New" mode, clear data cleared message
        // For "Add to" and "Remove from" modes, skip clearing to preserve existing records
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            yield publishDataClearedMsg();
        }
        // FORCED: Always use SimpleList - fetch ALL records, not just a page
        // Use data source's max record count, or fall back to a large number (10000)
        const maxRecordCount = (_c = (_b = (_a = featureDS).getMaxRecordCount) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : 10000;
        let pageSize = maxRecordCount;
        const queryParams = (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.generateQueryParams)(featureDS, sqlExpr, spatialFilter, currentItem, 1, pageSize);
        queryParamRef.current = queryParams;
        // Change output ds status to unloaded before use it to load count/records.
        featureDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        featureDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        let queryResultCount = 0; // Capture count from promise chain to use in finally block
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.executeCountQuery)(props.widgetId, featureDS, queryParams)
            .then((count) => {
            queryResultCount = count; // Store count for use in finally block
            // Don't set resultCount here - wait until query completes and queryJustExecutedRef is set
            // This ensures auto-switch useEffect runs with queryJustExecutedRef.current === true
            // update ds in order to execute query
            featureDS.updateQueryParams(queryParamRef.current, props.widgetId);
            return (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.executeQuery)(props.widgetId, queryItem, featureDS, queryParamRef.current);
        })
            .then((result) => __awaiter(this, void 0, void 0, function* () {
            var _a;
            let recordsToDisplay = result.records;
            let dsToUse = outputDS;
            // Handle "Add to" mode: merge new results with widget-level accumulated records
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection && result.records && result.records.length > 0) {
                try {
                    // Merge new query results with widget-level accumulated records
                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, // Use outputDS for key generation
                    result.records, existingRecordsForMerge // Widget-level accumulated records
                    );
                    recordsToDisplay = mergedRecords;
                    // Update widget-level accumulated records so they persist across query switches
                    if (onAccumulatedRecordsChange) {
                        onAccumulatedRecordsChange(mergedRecords);
                    }
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-merge-complete',
                        widgetId: props.widgetId,
                        existingRecordsCount: existingRecordsForMerge.length,
                        newRecordsCount: result.records.length,
                        mergedRecordsCount: mergedRecords.length,
                        outputDSId: outputDS.id,
                        widgetLevelRecordsUpdated: true
                    });
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to normal behavior on error
                    recordsToDisplay = result.records;
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                // Handle "Remove from" mode: remove matching records from widget-level accumulated records
                try {
                    // Check if we have accumulated records to remove from
                    if (existingRecordsForMerge.length === 0) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-accumulated-records',
                            widgetId: props.widgetId,
                            queryRecordsCount: ((_a = result.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
                            note: 'No accumulated records to remove from - no-op'
                        });
                        // No accumulated records, so nothing to remove - show empty results
                        recordsToDisplay = [];
                    }
                    else if (result.records && result.records.length > 0) {
                        // Remove matching records from accumulated records
                        const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.removeResultsFromAccumulated)(outputDS, // Use outputDS for key generation
                        result.records, existingRecordsForMerge // Widget-level accumulated records
                        );
                        recordsToDisplay = remainingRecords;
                        // Update widget-level accumulated records
                        if (onAccumulatedRecordsChange) {
                            onAccumulatedRecordsChange(remainingRecords);
                        }
                        // Remove records from origin data source selections (map highlighting)
                        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.removeRecordsFromOriginSelections)(props.widgetId, result.records, outputDS);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-complete',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            queryRecordsCount: result.records.length,
                            remainingRecordsCount: remainingRecords.length,
                            recordsRemoved: existingRecordsForMerge.length - remainingRecords.length,
                            outputDSId: outputDS.id,
                            widgetLevelRecordsUpdated: true,
                            originSelectionsUpdated: true
                        });
                        // If all records removed, auto-clear (consistent with user expectation)
                        if (remainingRecords.length === 0) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-all-records-removed',
                                widgetId: props.widgetId,
                                note: 'All accumulated records removed - auto-clearing'
                            });
                            // Clear widget-level accumulated records
                            if (onAccumulatedRecordsChange) {
                                onAccumulatedRecordsChange([]);
                            }
                        }
                    }
                    else {
                        // Query returned no results - nothing to remove
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-query-results',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            note: 'Query returned no results - no records to remove'
                        });
                        // Keep existing accumulated records displayed
                        recordsToDisplay = existingRecordsForMerge;
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to showing query results on error
                    recordsToDisplay = result.records || [];
                    console.error('Error in remove mode:', error);
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                // For "New" mode, clear widget-level accumulated records
                if (onAccumulatedRecordsChange) {
                    onAccumulatedRecordsChange([]);
                }
            }
            recordsRef.current = recordsToDisplay;
            // Reset selection flag for new query results
            hasSelectedRecordsRef.current = false;
            // Select records in the output DS
            // For "Add to" mode, select merged records
            // For "Remove from" mode, select remaining records (already updated via removeRecordsFromOriginSelections)
            // For "New" mode, select query results
            if (recordsToDisplay && recordsToDisplay.length > 0 && dsToUse) {
                const recordIdsToSelect = recordsToDisplay.map(record => record.getId());
                // For "Remove from" mode, selection was already updated via removeRecordsFromOriginSelections
                // But we still need to select in the outputDS for widget state consistency
                if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                    // Selection was already updated in origin DSs via removeRecordsFromOriginSelections
                    // Just update outputDS selection for widget state consistency
                    try {
                        if (typeof dsToUse.selectRecordsByIds === 'function') {
                            dsToUse.selectRecordsByIds(recordIdsToSelect, recordsToDisplay);
                        }
                        hasSelectedRecordsRef.current = true;
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-updated',
                            widgetId: props.widgetId,
                            recordCount: recordsToDisplay.length
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }
                else {
                    // For "Add to" and "New" modes, select records normally
                    try {
                        setSelectionError(null); // Clear previous errors
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.selectRecordsAndPublish)(props.widgetId, dsToUse, recordIdsToSelect, recordsToDisplay);
                        hasSelectedRecordsRef.current = true; // Mark as selected
                    }
                    catch (error) {
                        const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                        setSelectionError(errorMessage);
                        debugLogger.log('TASK', {
                            event: 'selection-failed',
                            error: errorMessage,
                            errorStack: error instanceof Error ? error.stack : undefined,
                            recordCount: recordIdsToSelect.length
                        });
                        console.error('Error publishing selection message', error);
                    }
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection && recordsToDisplay.length === 0) {
                // All records removed - clear selection
                try {
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.clearSelectionInDataSources)(dsToUse);
                    hasSelectedRecordsRef.current = false;
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-all-records-removed-selection-cleared',
                        widgetId: props.widgetId
                    });
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-clear-selection-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error'
                    });
                }
            }
            // Mark that query just executed BEFORE updating resultCount
            // This ensures the auto-switch useEffect sees queryJustExecutedRef.current === true
            queryJustExecutedRef.current = true;
            debugLogger.log('TASK', {
                event: 'query-executed-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                resultsMode,
                recordsToDisplayCount: recordsToDisplay.length,
                queryResultCount,
                timestamp: Date.now()
            });
            // Update result count
            // For "Add to" and "Remove from" modes, use accumulated/remaining count
            // For "New" mode, use query count
            const newResultCount = resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection
                ? recordsToDisplay.length
                : queryResultCount;
            setResultCount(newResultCount);
            debugLogger.log('TASK', {
                event: 'result-count-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                newResultCount,
                resultsMode,
                timestamp: Date.now()
            });
            // Trigger the existing zoomToFeature data action (same as clicking "Zoom To" in the menu)
            // Use runtime preference if provided, otherwise fall back to config setting (defaults to true)
            const shouldZoom = runtimeZoomToSelected !== undefined
                ? runtimeZoomToSelected
                : (queryItem.zoomToSelected !== false);
            // Use the output DS and merged records
            const recordsForZoom = recordsToDisplay || result.records;
            const dsForZoom = dsToUse || outputDS;
            if (recordsForZoom && recordsForZoom.length > 0 && dsForZoom && shouldZoom) {
                // Create a data set from the appropriate data source and records
                const dataSet = {
                    dataSource: dsForZoom,
                    records: recordsForZoom,
                    name: dsForZoom.getLabel()
                };
                // Get available data actions and find the zoomToFeature action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(props.widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
                    .then(actionCategories => {
                    // Look for zoomToFeature action in any category
                    let zoomAction = null;
                    for (const category in actionCategories) {
                        const actions = actionCategories[category];
                        zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                        if (zoomAction)
                            break;
                    }
                    if (zoomAction) {
                        // Execute the same zoom action that works when clicked manually
                        return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, props.widgetId);
                    }
                    else {
                        return Promise.resolve(false);
                    }
                })
                    .catch(error => {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to zoom to features';
                    setZoomError(errorMessage);
                    debugLogger.log('ZOOM', {
                        event: 'zoom-action-failed',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    if (true) {
                        console.error('Error executing zoomToFeature data action', error);
                    }
                    return Promise.resolve(false);
                });
            }
            return Promise.resolve(true);
        }))
            .finally(() => {
            if ((spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.layer) && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.clearAfterApply)) {
                spatialFilter.layer.removeAll();
            }
            setStage(1);
            // queryJustExecutedRef.current is now set BEFORE setResultCount (moved up)
            // Tab switching is now handled by useEffect that watches for queryJustExecutedRef and results
            // This matches the behavior of manual input where results are rendered before tab switch
        });
    }), [currentItem, queryItem, props.widgetId, outputDS, defaultPageSize, pagingTypeInConfig, lazyLoadInitialPageSize, publishDataClearedMsg, clearResult, resultsMode, accumulatedRecords, onAccumulatedRecordsChange]);
    const { useAttributeFilter, sqlExprObj, useSpatialFilter, spatialFilterTypes, spatialIncludeRuntimeData, spatialRelationUseDataSources } = currentItem;
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task h-100', className, { wrapped: wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      ${style}
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useOutputDs, onDataSourceCreated: handleOutputDataSourceCreated, onDataSourceInfoChange: handleOutputDataSourceInfoChange }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { value: activeTab, onChange: (id) => handleTabChange(id), fill: true, type: 'underline', keepMount: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'query', title: getI18nMessage('queryTab'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'query'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
              padding-top: 0 !important;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-form__header mx-4 align-items-center', { 'in-popper': isInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              padding: 6px 0;
              padding-top: 8px;
              border-bottom: 1px solid var(--sys-color-divider-secondary);
              flex-shrink: 0;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('nav-action align-items-center', { 'd-none': wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1 1 0;
                overflow: hidden;
                display: flex;
                align-items: center;
                gap: 4px;
                .jimu-btn {
                  min-width: 26px;
                }
              `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 mr-2', { 'd-none': total === 1 || !onNavBack }), size: 'sm', type: 'tertiary', icon: true, onClick: onNavBack, "aria-label": getI18nMessage('back'), ref: backBtnRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_14__.ArrowLeftOutlined, { autoFlip: true }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_label__WEBPACK_IMPORTED_MODULE_9__.QueryTaskLabel, { icon: icon, name: displayLabel ? name : '' }), (() => {
                                                    var _a;
                                                    if (!queryItems || queryItems.length <= 1)
                                                        return null;
                                                    // Get current query's origin data source ID
                                                    const currentOriginDSId = (_a = queryItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId;
                                                    if (!currentOriginDSId)
                                                        return null;
                                                    // Find all queries from the same origin data source that have shortIds
                                                    const sameLayerQueries = queryItems.filter(item => {
                                                        var _a;
                                                        return ((_a = item.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId) === currentOriginDSId &&
                                                            item.shortId &&
                                                            item.shortId.trim() !== '';
                                                    });
                                                    // Only show info button if there are queries with shortIds
                                                    if (sameLayerQueries.length === 0)
                                                        return null;
                                                    // Build tooltip content
                                                    const queryLines = sameLayerQueries.map(item => {
                                                        const queryName = getQueryDisplayName(item);
                                                        return `${queryName}: #${item.shortId}=value`;
                                                    });
                                                    const tooltipTitle = `This layer can be searched using the shortIds ${sameLayerQueries.map(q => q.shortId).join(' and ')} using #shortId=value in the URL.\n\n${queryLines.join('\n')}\n\nExample: ${queryLines[0]}`;
                                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: tooltipTitle, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": 'Hash parameter search information', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex-shrink: 0;
                        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }));
                                                })()] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: clearResultBtnRef, size: 'sm', type: 'tertiary', "aria-label": getI18nMessage('clearResult'), icon: true, className: 'ml-auto py-0', onClick: clearResult, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__.TrashOutlined, {}) }) }))] }), (() => {
                                    // Only show dropdowns if multiple queries exist
                                    if (!queryItems || queryItems.length <= 1) {
                                        return null;
                                    }
                                    // Build flat list of all queries with their display info
                                    // For grouped queries, use group display name (only show once per group)
                                    const queryOptions = [];
                                    // Track which groups we've already added to avoid duplicates
                                    const addedGroups = new Set();
                                    queryItems.forEach((item, idx) => {
                                        var _a, _b, _c;
                                        if (item.groupId) {
                                            // For grouped queries, use group display name (only add once per group)
                                            if (!addedGroups.has(item.groupId)) {
                                                addedGroups.add(item.groupId);
                                                const groupDisplayName = ((_a = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.displayName) ||
                                                    ((_c = (_b = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _b === void 0 ? void 0 : _b.items[0]) === null || _c === void 0 ? void 0 : _c.name) ||
                                                    item.name ||
                                                    `Group ${item.groupId}`;
                                                queryOptions.push({
                                                    configId: item.configId,
                                                    displayName: groupDisplayName,
                                                    groupId: item.groupId,
                                                    index: idx
                                                });
                                            }
                                        }
                                        else {
                                            // Ungrouped query - use item.name for first dropdown (not searchAlias/jimuFieldName)
                                            queryOptions.push({
                                                configId: item.configId,
                                                displayName: item.name || getQueryDisplayName(item),
                                                groupId: null,
                                                index: idx
                                            });
                                        }
                                    });
                                    // Determine currently selected query
                                    const currentQueryItem = queryItem;
                                    const currentQueryGroupId = currentQueryItem.groupId || null;
                                    const isGroupedQuery = currentQueryGroupId !== null;
                                    // Find the option index for the current query
                                    const currentOptionIndex = queryOptions.findIndex(opt => {
                                        if (isGroupedQuery) {
                                            return opt.groupId === currentQueryGroupId;
                                        }
                                        else {
                                            return opt.configId === currentQueryItem.configId;
                                        }
                                    });
                                    debugLogger.log('GROUP', {
                                        event: 'rendering-dropdowns',
                                        totalQueries: queryItems.length,
                                        queryOptionsCount: queryOptions.length,
                                        currentQueryGroupId,
                                        isGroupedQuery,
                                        currentOptionIndex,
                                        selectedGroupId,
                                        selectedGroupQueryIndex,
                                        currentQueryConfigId: currentQueryItem.configId
                                    });
                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 4px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      font-size: 0.875rem;
                      font-weight: 500;
                      color: var(--sys-color-text-primary);
                      margin-bottom: 4px;
                      display: block;
                    `, children: getI18nMessage('searchLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: currentOptionIndex >= 0 ? currentOptionIndex : 0, onChange: (e) => {
                                                            var _a;
                                                            const optionIndex = parseInt(e.target.value);
                                                            const selectedOption = queryOptions[optionIndex];
                                                            debugLogger.log('GROUP', {
                                                                event: 'query-option-selected',
                                                                optionIndex,
                                                                selectedOption,
                                                                isGrouped: selectedOption.groupId !== null
                                                            });
                                                            if (selectedOption.groupId) {
                                                                // Grouped query selected - set group and first query in group
                                                                if (onGroupChange) {
                                                                    onGroupChange(selectedOption.groupId);
                                                                }
                                                                if (onGroupQueryChange) {
                                                                    onGroupQueryChange(0);
                                                                }
                                                            }
                                                            else {
                                                                // Ungrouped query selected - clear group selection
                                                                if (onGroupChange) {
                                                                    onGroupChange(null);
                                                                }
                                                                if (onUngroupedChange) {
                                                                    // Find the ungrouped index
                                                                    const ungroupedIndex = (_a = ungrouped === null || ungrouped === void 0 ? void 0 : ungrouped.findIndex(({ item }) => item.configId === selectedOption.configId)) !== null && _a !== void 0 ? _a : -1;
                                                                    if (ungroupedIndex >= 0) {
                                                                        onUngroupedChange(ungroupedIndex);
                                                                    }
                                                                    else {
                                                                        // Fallback: use the index from queryItems
                                                                        debugLogger.log('GROUP', {
                                                                            event: 'ungrouped-fallback-to-index',
                                                                            selectedOptionIndex: selectedOption.index
                                                                        });
                                                                        if (onQueryChange) {
                                                                            onQueryChange(selectedOption.index);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, children: queryOptions.map((option, idx) => {
                                                            debugLogger.log('GROUP', {
                                                                event: 'rendering-query-option',
                                                                index: idx,
                                                                configId: option.configId,
                                                                displayName: option.displayName,
                                                                groupId: option.groupId
                                                            });
                                                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: option.displayName }, option.configId));
                                                        }) })] }), isGroupedQuery && currentQueryGroupId && groups && groups[currentQueryGroupId] && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      padding: 4px 16px;
                      flex-shrink: 0;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        margin-bottom: 4px;
                        display: block;
                      `, children: "Search Alias" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: selectedGroupQueryIndex !== undefined ? selectedGroupQueryIndex : 0, onChange: (e) => {
                                                            var _a;
                                                            const newIndex = parseInt(e.target.value);
                                                            debugLogger.log('GROUP', {
                                                                event: 'group-query-selected',
                                                                groupId: currentQueryGroupId,
                                                                groupQueryIndex: newIndex,
                                                                queryItemConfigId: (_a = groups[currentQueryGroupId].items[newIndex]) === null || _a === void 0 ? void 0 : _a.configId,
                                                                queryDisplayName: getQueryDisplayName(groups[currentQueryGroupId].items[newIndex])
                                                            });
                                                            if (onGroupQueryChange) {
                                                                onGroupQueryChange(newIndex);
                                                            }
                                                        }, children: groups[currentQueryGroupId].items.map((item, idx) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: getQueryDisplayName(item) }, item.configId))) })] }))] }));
                                })(), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 8px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "d-flex align-items-center", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      gap: 0.5rem;
                      flex-wrap: nowrap;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "title2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        white-space: nowrap;
                        flex-shrink: 0;
                      `, children: [getI18nMessage('results'), ":"] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: getI18nMessage('resultsModeDesc'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": getI18nMessage('resultsModeDesc'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `flex-shrink: 0;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: "radiogroup", "aria-label": getI18nMessage('resultsMode'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          display: flex;
                          gap: 4px;
                          align-items: stretch;
                          flex: 1;
                          min-width: 0;
                        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode: resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection, "aria-label": `${getI18nMessage('createNewResults')}: ${((_b = getI18nMessage('resultsModeDesc').split('\n')[1]) === null || _b === void 0 ? void 0 : _b.trim()) || ''}`, title: getI18nMessage('createNewResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeNew') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Add to" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection &&
                                                                    recordsRef.current &&
                                                                    recordsRef.current.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const currentRecords = recordsRef.current;
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, currentRecords, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        currentRecordsCount: currentRecords.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection, "aria-label": `${getI18nMessage('addToCurrentResults')}: ${((_c = getI18nMessage('resultsModeDesc').split('\n')[2]) === null || _c === void 0 ? void 0 : _c.trim()) || ''}`, title: getI18nMessage('addToCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeAdd') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'primary' : 'default', disabled: !accumulatedRecords || accumulatedRecords.length === 0, onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Remove from" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                // (same pattern as "Add to" mode)
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection &&
                                                                    recordsRef.current &&
                                                                    recordsRef.current.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const currentRecords = recordsRef.current;
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, currentRecords, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch-to-remove',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        currentRecordsCount: currentRecords.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection, "aria-label": `${getI18nMessage('removeFromCurrentResults')}: ${((_d = getI18nMessage('resultsModeDesc').split('\n')[3]) === null || _d === void 0 ? void 0 : _d.trim()) || ''}`, title: (!accumulatedRecords || accumulatedRecords.length === 0)
                                                                ? getI18nMessage('resultsModeDisabledRemove')
                                                                : getI18nMessage('removeFromCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeRemove') })] })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `results-mode-description-${props.widgetId}`, className: "sr-only", "aria-live": "polite", role: "status", children: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection
                                                ? getI18nMessage('createNewResults')
                                                : resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection
                                                    ? getI18nMessage('addToCurrentResults')
                                                    : getI18nMessage('removeFromCurrentResults') })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
            `, children: [enabled && dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  min-height: 0;
                  overflow: hidden;
                `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_form__WEBPACK_IMPORTED_MODULE_6__.QueryTaskForm, Object.assign({}, otherProps, { configId: queryItem.configId, outputDS: outputDS, datasourceReady: dataSource != null, spatialFilterEnabled: spatialFilterEnabled, dataActionFilter: dataActionFilter, onFormSubmit: handleFormSubmit, initialInputValue: initialInputValue, onHashParameterUsed: onHashParameterUsed, queryItemShortId: queryItem.shortId })) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.DataSourceTip, { widgetId: props.widgetId, useDataSource: queryItem.useDataSource, showMessage: true, onStatusChange: handleStatusChange, onDataSourceCreated: handleDataSourceCreated })] })] }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'results', title: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { children: [getI18nMessage('resultsTab'), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  margin-left: 6px;
                  font-size: 0.75rem;
                  opacity: 0.7;
                `, children: ["(", resultCount, ")"] }))] }), disabled: resultCount === 0, children: resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'results'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 0;
                height: 100%;
                padding-top: 0 !important;
              `, onClick: (e) => {
                                // Prevent clicks from bubbling up when Results tab is active
                                if (activeTab === 'results') {
                                    e.stopPropagation();
                                }
                            }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result__WEBPACK_IMPORTED_MODULE_7__.QueryTaskResult, { widgetId: props.widgetId, queryItem: queryItem, queryParams: queryParamRef.current, resultCount: resultCount, maxPerPage: (_e = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(dataSource), records: recordsRef.current, defaultPageSize: defaultPageSize, outputDS: outputDS, runtimeZoomToSelected: lastRuntimeZoomToSelectedRef.current, resultsMode: resultsMode, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, onNavBack: (clearResults = false) => {
                                    // Handle navigation from QueryTaskResult
                                    // If clearResults is true, clear everything and go to query tab
                                    // If false, just switch to query tab without clearing
                                    if (clearResults) {
                                        hasSelectedRecordsRef.current = false; // Reset flag when clearing
                                        navToForm(true);
                                    }
                                    else {
                                        // Just switch tabs, don't clear results
                                        // Mark as manual switch to prevent auto-switch useEffect from interfering
                                        manualTabSwitchRef.current = true;
                                        setActiveTab('query');
                                        // Reset the flag after a short delay
                                        setTimeout(() => {
                                            manualTabSwitchRef.current = false;
                                        }, 100);
                                    }
                                } }, `${queryItem.configId}-${queryExecutionKeyRef.current}`) })) })] }), (selectionError || zoomError) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 0 16px;
          margin-top: 8px;
        `, children: [selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) })), zoomError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: zoomError, onDismiss: () => setZoomError(null) }))] })), stage === 2 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1000;
          background-color: rgba(255, 255, 255, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_loading_result__WEBPACK_IMPORTED_MODULE_15__.LoadingResult, {}) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-utils.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineFields: () => (/* binding */ combineFields),
/* harmony export */   executeCountQuery: () => (/* binding */ executeCountQuery),
/* harmony export */   executeQuery: () => (/* binding */ executeQuery),
/* harmony export */   generateQueryParams: () => (/* binding */ generateQueryParams),
/* harmony export */   getPopupTemplate: () => (/* binding */ getPopupTemplate)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



function combineFields(resultDisplayFields, resultTitleExpression, idField) {
    const fields = new Set();
    resultDisplayFields === null || resultDisplayFields === void 0 ? void 0 : resultDisplayFields.forEach(item => fields.add(item));
    if (resultTitleExpression) {
        const templates = resultTitleExpression.match(/\{\w*\}/g);
        if ((templates === null || templates === void 0 ? void 0 : templates.length) > 0) {
            templates.forEach(item => fields.add(item.substring(1, item.length - 1)));
        }
    }
    if (idField) {
        fields.add(idField);
    }
    return Array.from(fields);
}
function getPopupTemplate(outputDS, queryItem) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const { resultFieldsType, resultDisplayFields, resultTitleExpression = '' } = queryItem;
        const currentOriginDs = outputDS.getOriginDataSources()[0];
        const popupInfo = currentOriginDs.getPopupInfo();
        if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
            let fields;
            if (resultDisplayFields == null) {
                const fieldsInContent = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.getFieldInfosInPopupContent)(popupInfo);
                if (fieldsInContent.length > 0) {
                    const uniqueFields = new Set(fieldsInContent.map(ele => ele.fieldName));
                    fields = Array.from(uniqueFields);
                }
                else {
                    // return all fields by default
                    const allFieldsSchema = outputDS.getSchema();
                    fields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
                }
            }
            else {
                fields = resultDisplayFields.asMutable({ deep: true });
            }
            if (popupInfo) {
                const fieldInfos = [];
                fields.forEach(field => {
                    const fieldInfo = popupInfo.fieldInfos.find(fieldInfo => fieldInfo.fieldName === field);
                    if (fieldInfo) {
                        fieldInfo.visible = true;
                        fieldInfos.push(fieldInfo);
                    }
                    else {
                        fieldInfos.push({
                            fieldName: field,
                            label: field
                        });
                    }
                });
                return {
                    popupTemplate: {
                        fieldInfos,
                        content: [{
                                type: 'fields'
                            }],
                        title: resultTitleExpression
                    }
                };
            }
            return {
                popupTemplate: {
                    fieldInfos: fields.map(field => ({
                        fieldName: field,
                        label: field
                    })),
                    content: [{
                            type: 'fields'
                        }],
                    title: resultTitleExpression
                }
            };
        }
        // the source layer will provide popup info
        let layerObject;
        if (currentOriginDs.layer) {
            layerObject = currentOriginDs.layer;
        }
        else {
            layerObject = yield currentOriginDs.createJSAPILayerByDataSource();
        }
        if (layerObject) {
            yield layerObject.load();
        }
        return { defaultPopupTemplate: ((_a = layerObject === null || layerObject === void 0 ? void 0 : layerObject.associatedLayer) === null || _a === void 0 ? void 0 : _a.defaultPopupTemplate) || (layerObject === null || layerObject === void 0 ? void 0 : layerObject.defaultPopupTemplate) };
    });
}
function generateQueryParams(outputDS, sqlExpr, spatialFilter, queryItem, page, pageSize) {
    var _a, _b, _c;
    const currentQueryDsJson = outputDS.getDataSourceJson();
    const currentOriginDs = outputDS.getOriginDataSources()[0];
    const isLocalDs = currentQueryDsJson === null || currentQueryDsJson === void 0 ? void 0 : currentQueryDsJson.isDataInDataSourceInstance;
    if (isLocalDs) {
        outputDS.setSourceRecords(currentOriginDs.getSourceRecords());
    }
    const { useAttributeFilter, useSpatialFilter, sortOptions, resultFieldsType, resultDisplayFields, resultTitleExpression } = queryItem;
    let outputFields = resultDisplayFields;
    if (resultDisplayFields == null) {
        // return all fields by default
        const allFieldsSchema = outputDS.getSchema();
        outputFields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
    }
    const mergedQueryParams = outputDS.mergeQueryParams((_a = currentOriginDs.getCurrentQueryParams()) !== null && _a !== void 0 ? _a : {}, {
        where: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpr, outputDS).sql : '1=1',
        sqlExpression: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? sqlExpr : null
    });
    // compose query params for query
    const queryParams = Object.assign({ 
        // url: ds.url,
        returnGeometry: true, page,
        pageSize }, mergedQueryParams);
    if (useSpatialFilter && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.geometry)) {
        const { geometry, relation = _config__WEBPACK_IMPORTED_MODULE_1__.SpatialRelation.Intersect, buffer } = spatialFilter;
        const spatialQueryParams = {
            geometryType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(geometry.type),
            geometry: geometry.toJSON(),
            spatialRel: _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPISpatialRelToDsSpatialRel[relation],
            distance: buffer === null || buffer === void 0 ? void 0 : buffer.distance,
            units: (buffer === null || buffer === void 0 ? void 0 : buffer.unit) ? _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPIUnitToDsUnit[buffer.unit] : undefined
        };
        Object.assign(queryParams, spatialQueryParams);
    }
    if ((sortOptions === null || sortOptions === void 0 ? void 0 : sortOptions.length) > 0) {
        Object.assign(queryParams, {
            orderByFields: sortOptions.map(item => `${item.jimuFieldName} ${item.order}`)
        });
    }
    if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
        const fields = combineFields(outputFields, resultTitleExpression, outputDS.getIdField());
        Object.assign(queryParams, {
            outFields: fields
        });
    }
    else {
        // use popup setting
        const popupInfo = currentOriginDs.getPopupInfo();
        // popupInfo may have expressions in its fieldInfos
        const fieldNames = Object.values((_b = currentOriginDs.getSchema().fields) !== null && _b !== void 0 ? _b : {}).map(f => f.name);
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-boolean-literal-compare
        const validFieldInfos = (_c = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) === null || _c === void 0 ? void 0 : _c.filter(fieldInfo => fieldInfo.visible !== false && fieldNames.includes(fieldInfo.fieldName));
        Object.assign(queryParams, {
            outFields: validFieldInfos === null || validFieldInfos === void 0 ? void 0 : validFieldInfos.map(fieldInfo => fieldInfo.fieldName)
        });
    }
    return queryParams;
}
function executeCountQuery(widgetId, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield outputDS.loadCount(queryParams, { widgetId, refresh: true });
        return result != null ? result : 0;
    });
}
function executeQuery(widgetId, queryItem, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const popupInfo = outputDS.getPopupInfo();
        const layerDefinition = outputDS.getLayerDefinition();
        const getDefaultFieldInfos = () => {
            var _a;
            return [
                { fieldName: (_a = layerDefinition === null || layerDefinition === void 0 ? void 0 : layerDefinition.objectIdField) !== null && _a !== void 0 ? _a : 'objectid', label: 'OBJECTID', tooltip: '', visible: true }
            ];
        };
        const fieldInfos = ((fieldInfos) => (fieldInfos.length ? fieldInfos : getDefaultFieldInfos()))(((popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) || []).filter((i) => i.visible));
        // const fields = outputDS.getSchema()?.fields
        // let selectedFieldNames
        // if (queryItem.resultFieldsType === FieldsType.SelectAttributes) {
        //   selectedFieldNames = [].concat(queryItem.resultDisplayFields, queryItem.resultTitleFields)
        // } else {
        //   selectedFieldNames = fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        // }
        // const selectedFieldJimuNames = fields
        //   ? Object.keys(fields).filter((jimuName) => selectedFieldNames.includes(fields[jimuName].name))
        //   : []
        // outputDS.setSelectedFields(selectedFieldJimuNames)
        let records = yield outputDS.load(queryParams, { widgetId });
        if (records == null) {
            records = [];
        }
        const originDs = outputDS.getOriginDataSources()[0];
        const layerObject = yield getLayerObject(originDs);
        records.forEach((record) => {
            const feature = record.feature;
            if (layerObject) {
                feature.sourceLayer = layerObject.associatedLayer || layerObject;
            }
            feature.layer = feature.sourceLayer;
        });
        const queryResult = {
            records,
            fields: fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        };
        // publish message
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordSetChangeMessage(widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.RecordSetChangeType.CreateUpdate, [{
                records: outputDS.getAllLoadedRecords(),
                fields: queryResult.fields,
                dataSource: outputDS,
                name: outputDS.id,
                label: outputDS.getLabel()
            }]);
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        return queryResult;
    });
}
function getLayerObject(dataSource) {
    return __awaiter(this, void 0, void 0, function* () {
        const layerObject = yield dataSource.createJSAPILayerByDataSource();
        // layerObject may be undefined if the data source is added by URL
        if (layerObject) {
            yield layerObject.load();
        }
        return layerObject;
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearAccumulatedResults: () => (/* binding */ clearAccumulatedResults),
/* harmony export */   createAccumulatedResultsDataSource: () => (/* binding */ createAccumulatedResultsDataSource),
/* harmony export */   getRecordKey: () => (/* binding */ getRecordKey),
/* harmony export */   mergeResultsIntoAccumulated: () => (/* binding */ mergeResultsIntoAccumulated),
/* harmony export */   removeRecordsFromOriginSelections: () => (/* binding */ removeRecordsFromOriginSelections),
/* harmony export */   removeResultsFromAccumulated: () => (/* binding */ removeResultsFromAccumulated)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing results accumulation in QuerySimple widget.
 * Handles "Add to" and "Remove from" modes for accumulating query results.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Generates a composite key for a record that includes both origin data source ID and objectId.
 * This ensures uniqueness across different layers that may have the same objectId.
 *
 * @param record - The feature data record
 * @param outputDS - The output data source containing the record
 * @returns Composite key string: `${originDSId}_${objectId}`
 */
function getRecordKey(record, outputDS) {
    var _a;
    const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
    const originDSId = (originDS === null || originDS === void 0 ? void 0 : originDS.id) || outputDS.id; // Fallback to outputDS if no origin
    const objectId = record.getId();
    const key = `${originDSId}_${objectId}`;
    debugLogger.log('RESULTS-MODE', {
        event: 'record-key-generated',
        originDSId,
        objectId,
        key,
        hasOriginDS: !!originDS
    });
    return key;
}
/**
 * Creates an accumulated results data source for storing merged query results.
 * This data source is widget-level and persists across multiple queries.
 *
 * @param widgetId - The widget ID
 * @param originDS - The origin data source to use as the base
 * @returns The created accumulated results data source
 */
function createAccumulatedResultsDataSource(widgetId, originDS) {
    return __awaiter(this, void 0, void 0, function* () {
        const accumulatedDSId = `${widgetId}_accumulated_results`;
        debugLogger.log('RESULTS-MODE', {
            event: 'creating-accumulated-ds',
            widgetId,
            accumulatedDSId,
            originDSId: originDS.id
        });
        // Check if data source already exists
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        let accumulatedDS = dsManager.getDataSource(accumulatedDSId);
        if (accumulatedDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-ds-already-exists',
                accumulatedDSId
            });
            return accumulatedDS;
        }
        // Get origin data source JSON to create output data source
        const originDataSourceJson = originDS.getDataSourceJson();
        // Create output data source JSON similar to how query items create output DS
        const outputDataSourceJson = {
            id: accumulatedDSId,
            label: 'Accumulated Results',
            type: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.type,
            geometryType: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.geometryType,
            url: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.url,
            itemId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.itemId,
            portalUrl: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.portalUrl,
            originDataSources: [{
                    dataSourceId: originDS.id,
                    mainDataSourceId: originDS.id,
                    rootDataSourceId: originDS.id
                }],
            layerId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.layerId,
            isDataInDataSourceInstance: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.isDataInDataSourceInstance,
            isOutputFromWidget: true
        };
        // Create the data source using DataSourceManager
        // Note: This follows the pattern from setting.tsx for creating output data sources
        accumulatedDS = dsManager.createDataSourceByDataSourceJson(outputDataSourceJson);
        // Set initial status
        accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        debugLogger.log('RESULTS-MODE', {
            event: 'accumulated-ds-created',
            accumulatedDSId,
            originDSId: originDS.id,
            status: accumulatedDS.getStatus()
        });
        return accumulatedDS;
    });
}
/**
 * Merges new query results with existing records.
 * Deduplicates records using composite keys (originDSId_objectId).
 *
 * This function merges new records with existing records that were captured
 * before the query executed. The caller is responsible for storing the merged
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param newRecords - New records to merge in
 * @param existingRecords - Existing records captured before query execution (optional, defaults to empty array)
 * @returns Array of all merged records (existing + new unique records)
 */
function mergeResultsIntoAccumulated(outputDS, newRecords, existingRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'merging-results-start',
        outputDSId: outputDS.id,
        existingRecordsCount: existingRecords.length,
        newRecordsCount: newRecords.length
    });
    // Build Set of existing record keys for fast lookup
    const existingKeys = new Set(existingRecords.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'existing-records-check',
        existingRecordsCount: existingRecords.length,
        existingKeysCount: existingKeys.size
    });
    // Filter new records to only include those not already in output DS
    const uniqueNewRecords = newRecords.filter(record => {
        const key = getRecordKey(record, outputDS);
        const isDuplicate = existingKeys.has(key);
        if (isDuplicate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'duplicate-record-skipped',
                key,
                objectId: record.getId()
            });
        }
        return !isDuplicate;
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'deduplication-complete',
        newRecordsCount: newRecords.length,
        uniqueNewRecordsCount: uniqueNewRecords.length,
        duplicatesSkipped: newRecords.length - uniqueNewRecords.length
    });
    // Merge records
    const mergedRecords = [...existingRecords, ...uniqueNewRecords];
    debugLogger.log('RESULTS-MODE', {
        event: 'merge-complete',
        totalRecordsAfterMerge: mergedRecords.length,
        existingCount: existingRecords.length,
        newUniqueCount: uniqueNewRecords.length
    });
    return mergedRecords;
}
/**
 * Removes matching records from widget-level accumulated records.
 * Matches records using composite keys (originDSId_objectId).
 *
 * This function removes records from existing accumulated records that were captured
 * before the query executed. The caller is responsible for storing the remaining
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param recordsToRemove - Records to remove (from query results)
 * @param existingAccumulatedRecords - Existing accumulated records captured before query execution (optional, defaults to empty array)
 * @returns Array of remaining records after removal
 */
function removeResultsFromAccumulated(outputDS, recordsToRemove, existingAccumulatedRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-results-start',
        outputDSId: outputDS.id,
        recordsToRemoveCount: recordsToRemove.length,
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length
    });
    // If no accumulated records, nothing to remove
    if (existingAccumulatedRecords.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-accumulated-records-to-remove',
            outputDSId: outputDS.id
        });
        return [];
    }
    // If no records to remove, return existing records unchanged
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove',
            outputDSId: outputDS.id,
            existingAccumulatedRecordsCount: existingAccumulatedRecords.length
        });
        return existingAccumulatedRecords;
    }
    // Build Set of keys to remove for fast lookup
    const removeKeys = new Set(recordsToRemove.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'remove-keys-built',
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length,
        removeKeysCount: removeKeys.size
    });
    // Filter out records that match keys to remove
    const remainingRecords = [];
    const removedRecords = [];
    existingAccumulatedRecords.forEach(record => {
        var _a, _b, _c, _d;
        const key = getRecordKey(record, outputDS);
        const shouldRemove = removeKeys.has(key);
        if (shouldRemove) {
            removedRecords.push(record);
            debugLogger.log('RESULTS-MODE', {
                event: 'record-marked-for-removal',
                key,
                objectId: record.getId(),
                originDSId: ((_d = (_c = (_b = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record)) === null || _b === void 0 ? void 0 : _b.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.id) || 'unknown'
            });
        }
        else {
            remainingRecords.push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removal-complete',
        recordsRemoved: removedRecords.length,
        remainingRecordsCount: remainingRecords.length,
        recordsToRemoveCount: recordsToRemove.length,
        matchedRecordsCount: removedRecords.length,
        unmatchedRecordsCount: recordsToRemove.length - removedRecords.length
    });
    return remainingRecords;
}
/**
 * Removes records from origin data source selections.
 * Groups records by their origin data source and updates each origin DS's selection separately.
 * This ensures map selection is updated correctly when records come from multiple origin layers.
 *
 * @param widgetId - The widget ID for publishing messages
 * @param recordsToRemove - Records to remove from selection
 * @param outputDS - The output data source (used for key generation)
 */
function removeRecordsFromOriginSelections(widgetId, recordsToRemove, outputDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-start',
        widgetId,
        recordsToRemoveCount: recordsToRemove.length,
        outputDSId: outputDS.id
    });
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove-from-selection',
            widgetId
        });
        return;
    }
    // Group records by their origin data source
    const recordsByOriginDS = new Map();
    recordsToRemove.forEach(record => {
        var _a, _b, _c;
        const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
        let originDS = null;
        if (recordDS) {
            originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
        }
        else {
            // Fallback: try to get origin from outputDS
            originDS = ((_c = outputDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || null;
        }
        if (originDS) {
            if (!recordsByOriginDS.has(originDS)) {
                recordsByOriginDS.set(originDS, []);
            }
            recordsByOriginDS.get(originDS).push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'records-grouped-by-origin',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        recordsByOriginDS: Array.from(recordsByOriginDS.entries()).map(([ds, records]) => ({
            originDSId: ds.id,
            recordCount: records.length
        }))
    });
    // For each origin DS, get current selection and remove matching records
    recordsByOriginDS.forEach((recordsToRemoveForOrigin, originDS) => {
        try {
            // Get current selected records from this origin DS
            const currentSelectedRecords = originDS.getSelectedRecords() || [];
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'processing-origin-ds-removal',
                widgetId,
                originDSId: originDS.id,
                currentSelectedCount: currentSelectedRecords.length,
                recordsToRemoveCount: recordsToRemoveForOrigin.length
            });
            // Build Set of IDs to remove for fast lookup
            const idsToRemove = new Set(recordsToRemoveForOrigin.map(record => record.getId()));
            // Filter out records that match IDs to remove
            const remainingRecords = currentSelectedRecords.filter(record => {
                const recordId = record.getId();
                return !idsToRemove.has(recordId);
            });
            const remainingIds = remainingRecords.map(record => record.getId());
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-filtered',
                widgetId,
                originDSId: originDS.id,
                removedCount: currentSelectedRecords.length - remainingRecords.length,
                remainingCount: remainingRecords.length
            });
            // Update selection in origin DS
            if (typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(remainingIds, remainingRecords);
            }
            // Publish selection change message for this origin DS
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, remainingRecords, [originDS.id]));
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-selection-updated',
                widgetId,
                originDSId: originDS.id,
                remainingRecordsCount: remainingRecords.length,
                messagePublished: true
            });
        }
        catch (error) {
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-error',
                widgetId,
                originDSId: originDS.id,
                error: error instanceof Error ? error.message : 'Unknown error',
                errorStack: error instanceof Error ? error.stack : undefined
            });
            console.error(`Error removing records from origin DS ${originDS.id}:`, error);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-complete',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        totalRecordsRemoved: recordsToRemove.length
    });
}
/**
 * Clears all records from the accumulated results data source.
 *
 * @param accumulatedDS - The accumulated results data source to clear
 */
function clearAccumulatedResults(accumulatedDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'clearing-accumulated-results',
        accumulatedDSId: accumulatedDS.id
    });
    // Set status to NotReady to clear records
    accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    // Clear any loaded records if possible
    // Note: May need to use DataSourceManager methods depending on ExB API
    debugLogger.log('RESULTS-MODE', {
        event: 'accumulated-results-cleared',
        accumulatedDSId: accumulatedDS.id
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearSelectionInDataSources: () => (/* binding */ clearSelectionInDataSources),
/* harmony export */   findClearResultsButton: () => (/* binding */ findClearResultsButton),
/* harmony export */   getOriginDataSource: () => (/* binding */ getOriginDataSource),
/* harmony export */   publishSelectionMessage: () => (/* binding */ publishSelectionMessage),
/* harmony export */   selectRecordsAndPublish: () => (/* binding */ selectRecordsAndPublish),
/* harmony export */   selectRecordsInDataSources: () => (/* binding */ selectRecordsInDataSources)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/**
 * Utility functions for managing feature selection in QuerySimple widget.
 * Consolidates repeated selection logic to follow DRY principles.
 */

/**
 * Gets the origin data source from an output data source.
 * @param outputDS - The output data source
 * @returns The origin data source, or null if not available
 */
function getOriginDataSource(outputDS) {
    if (!outputDS)
        return null;
    const originDataSources = outputDS.getOriginDataSources();
    return (originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0]) || null;
}
/**
 * Selects records in both the origin data source and output data source.
 * This is the standard pattern used throughout the widget for selection.
 *
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Optional array of FeatureDataRecord objects for proper highlighting
 */
function selectRecordsInDataSources(outputDS, recordIds, records) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    // Select in origin data source (the actual layer)
    if (originDS && typeof originDS.selectRecordsByIds === 'function') {
        originDS.selectRecordsByIds(recordIds, records);
    }
    // Also select in outputDS for widget's internal state
    if (typeof outputDS.selectRecordsByIds === 'function') {
        outputDS.selectRecordsByIds(recordIds, records);
    }
}
/**
 * Clears selection in both the origin data source and output data source.
 *
 * @param outputDS - The output data source
 */
function clearSelectionInDataSources(outputDS) {
    selectRecordsInDataSources(outputDS, []);
}
/**
 * Publishes a selection change message for the given records and data sources.
 *
 * @param widgetId - The widget ID
 * @param records - Array of FeatureDataRecord objects (empty array to clear)
 * @param outputDS - The output data source
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS = false) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    if (originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [originDS.id]));
    }
    else if (alsoPublishToOutputDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
    // Optionally publish to outputDS as well (for some edge cases)
    if (alsoPublishToOutputDS && originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
}
/**
 * Selects records and publishes the selection message in one call.
 * This is the most common pattern - selecting records and notifying the map.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Array of FeatureDataRecord objects for proper highlighting
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function selectRecordsAndPublish(widgetId, outputDS, recordIds, records, alsoPublishToOutputDS = false) {
    selectRecordsInDataSources(outputDS, recordIds, records);
    publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS);
}
/**
 * Finds the "Clear results" button in the DOM.
 * Used when programmatically triggering the clear action.
 *
 * @returns The clear button element, or null if not found
 */
function findClearResultsButton() {
    return document.querySelector('button[aria-label="Clear results"]');
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleList: () => (/* binding */ SimpleList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");

/** @jsx jsx */





const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    flex: 1 1 ${isAutoHeight ? 'auto' : 0};
    overflow: auto;
    max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      flex-direction: column;
      .list-items {
        position: relative;
        flex-direction: column;
      }

      .feature-info-component {
        width: 100%;
      }

      .query-result-item + .query-result-item {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    .list-items {
      display: flex;
    }
  `;
};
function SimpleList(props) {
    const { widgetId, outputDS, queryItem, records, direction, onEscape, onSelectChange, onRemove, expandByDefault, itemExpandStates, removedRecordIds, onRenderDone } = props;
    const [popupTemplate, setPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_5__.useAutoHeight)();
    const resultContainerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    // Filter out removed records
    const filteredRecords = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (records === null || records === void 0 ? void 0 : records.filter(record => !(removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.has(record.getId())))) || [];
    }, [records, removedRecordIds]);
    // Notify parent when records are rendered (for auto-switch logic)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (onRenderDone && filteredRecords.length > 0) {
            console.log('[SimpleList] calling onRenderDone', {
                event: 'SimpleList-onRenderDone-called',
                widgetId,
                queryItemConfigId: queryItem.configId,
                filteredRecordsCount: filteredRecords.length,
                totalRecordsCount: records.length,
                removedRecordIdsCount: (removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.size) || 0,
                timestamp: Date.now()
            });
            onRenderDone({ dataItems: filteredRecords });
        }
    }, [filteredRecords, onRenderDone, widgetId, queryItem.configId, records.length, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_4__.getPopupTemplate)(outputDS, queryItem).then(rs => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_2__.ListDirection.Vertical }), css: getStyle(isAutoHeight), ref: resultContainerRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-items px-4 py-1', role: 'listbox', children: filteredRecords.map((dataItem) => {
                const recordId = dataItem.getId();
                // Use individual state from map if available, otherwise fall back to expandByDefault
                const individualExpandState = itemExpandStates === null || itemExpandStates === void 0 ? void 0 : itemExpandStates.get(recordId);
                const expandByDefaultValue = individualExpandState !== undefined ? individualExpandState : (expandByDefault !== null && expandByDefault !== void 0 ? expandByDefault : true);
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_3__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: expandByDefaultValue, onClick: onSelectChange, onRemove: onRemove }, recordId));
            }) }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'QuerySimple',
    reset: 'Reset',
    searchLayer: 'Search Layer',
    apply: 'Search',
    noDataAvailable: 'Error in loading data',
    noQueryItem: 'No query',
    newQueryHint: 'Add content by clicking the "{label}" button on the configuration panel',
    attributeFilter: 'Attribute filter',
    spatialFilter: 'Spatial filter',
    spatialFilterType_CurrentMapExtent: 'Current map extent',
    spatialFilterType_InteractiveDrawMode: 'Drawn graphic',
    results: 'Results',
    featuresDisplayed: 'Features displayed',
    clearResult: 'Clear results',
    checkResult: 'Check results',
    mapMustBeVisible: 'Map must be visible',
    chooseFilterType: 'Choose the filter type',
    chooseGeometryType: 'Choose the geometry type',
    clearDrawing: 'Clear the graphic when applying',
    featureFromDs: 'Selecting features from data source',
    featureFromMap: 'Geometries from a map',
    chooseFilterLayer: 'Choose a filter layer',
    selectedRecords: '{num} records are selected for the filter',
    spatialNotAvailable: 'Spatial filter is not available here.',
    spatialNotAvailableDesc: 'Spatial filter is not supported for a data source that already contains a spatial query.',
    preconfigured: 'Preconfigured',
    runtime: 'Runtime',
    selectLoaded: 'Select loaded',
    retrieving: 'Retrieving query results...',
    zoomToSelected: 'Zoom to selected',
    queryTab: 'Query',
    resultsTab: 'Results',
    expandAll: 'Expand all',
    collapseAll: 'Collapse all',
    addToMap: 'Add to map',
    resultsMode: 'Results mode',
    createNewResults: 'Create new results',
    addToCurrentResults: 'Add to current results',
    removeFromCurrentResults: 'Remove from current results',
    resultsModeDisabledRemove: 'Remove from current results (no accumulated results)',
    resultsModeDesc: 'Controls how query results are combined:\n New: Each query replaces previous results\n Add: New results are added to existing results\n Remove: Matching results are removed from existing results',
    resultsModeNew: 'New',
    resultsModeAdd: 'Add',
    resultsModeRemove: 'Remove'
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx":
/*!****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoHeight: () => (/* binding */ useAutoHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/** @jsx jsx */



function useAutoHeight() {
    const layoutInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_widget_context__WEBPACK_IMPORTED_MODULE_2__.QueryWidgetContext);
    let layoutId;
    let layoutItemId;
    if (layoutInfo.includes(':')) {
        const r = layoutInfo.split(':');
        layoutId = r[0];
        layoutItemId = r[1];
    }
    const isAuto = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c, _d;
        const layoutItem = (_b = (_a = state.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        return ((_d = (_c = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _c === void 0 ? void 0 : _c.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    });
    return isAuto;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-config.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getWidgetRuntimeDataMap: () => (/* binding */ getWidgetRuntimeDataMap)
/* harmony export */ });
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__);






const getWidgetRuntimeDataMap = () => ({
    iconMap: {
        iconQuery: __webpack_require__(/*! ../../icon.svg */ "./your-extensions/widgets/query-simple/icon.svg"),
        iconWarning: (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default()),
        iconError: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default()),
        arrowNavBack: (jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()),
        arrowRight: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        toolDelete: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        iconMore: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default())
    }
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryWidgetContext: () => (/* binding */ QueryWidgetContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryWidgetContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(null);


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.0.0',
                description: 'The first version.',
                upgrader: (oldConfig) => {
                    return oldConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version.ts":
/*!*************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WIDGET_VERSION: () => (/* binding */ WIDGET_VERSION)
/* harmony export */ });
/**
 * Widget version number.
 * Base version matches Experience Builder version (1.19.0).
 * Release number increments on major changes (001, 002, 003, ...).
 * Minor version increments on smaller fixes between major releases (r015.1, r015.2, ...).
 *
 * To increment:
 * - Major change: Update RELEASE_NUMBER (e.g., 015 -> 016) and reset MINOR_VERSION to 0
 * - Minor fix: Increment MINOR_VERSION (e.g., 1 -> 2) while keeping same RELEASE_NUMBER
 */
const BASE_VERSION = '1.19.0';
const RELEASE_NUMBER = '016'; // Increment on major changes (001, 002, 003, ...)
const MINOR_VERSION = '5'; // Increment on minor fixes between major releases (1, 2, 3, ...)
const WIDGET_VERSION = MINOR_VERSION && MINOR_VERSION !== '0'
    ? `${BASE_VERSION}-r${RELEASE_NUMBER}.${MINOR_VERSION}`
    : `${BASE_VERSION}-r${RELEASE_NUMBER}`;


/***/ }),

/***/ "@emotion/react/jsx-runtime":
/*!************************************!*\
  !*** external "jimu-core/emotion" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "widgets/shared-code/common":
/*!*********************************************!*\
  !*** external "widgets/shared-code/common" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/query-simple/src/version-manager.ts");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_inline__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-list-inline */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */











const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for QuerySimple to notify HelperSimple of selection changes.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
/**
 * Custom event name for QuerySimple to notify HelperSimple of widget open/close state.
 */
const QUERYSIMPLE_WIDGET_STATE_EVENT = 'querysimple-widget-state-changed';
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.state = {
            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection // Default mode
        };
        this.widgetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.visibilityObserver = null;
        this.visibilityCheckInterval = null;
        /**
         * Notifies HelperSimple of selection changes.
         * Called by QueryTaskResult when selection is made.
         *
         * @param recordIds - Array of selected record IDs
         * @param dataSourceId - Optional data source ID
         */
        this.notifyHelperSimpleOfSelection = (recordIds, dataSourceId) => {
            const { id } = this.props;
            const event = new CustomEvent(QUERYSIMPLE_SELECTION_EVENT, {
                detail: {
                    widgetId: id,
                    recordIds,
                    dataSourceId
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * Sets up visibility detection to track when the widget panel is open/closed.
         * Uses IntersectionObserver if available, falls back to periodic checking.
         */
        this.setupVisibilityDetection = () => {
            // Wait for next tick to ensure ref is set
            setTimeout(() => {
                if (!this.widgetRef.current) {
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup-failed',
                        widgetId: this.props.id,
                        reason: 'widget-ref-not-available'
                    });
                    return;
                }
                const element = this.widgetRef.current;
                // Method 1: IntersectionObserver (most efficient)
                if ('IntersectionObserver' in window) {
                    this.visibilityObserver = new IntersectionObserver((entries) => {
                        const entry = entries[0];
                        const isVisible = entry.isIntersecting && entry.intersectionRatio > 0;
                        // Only log if state changed
                        if (this.state.isPanelVisible !== isVisible) {
                            this.setState({ isPanelVisible: isVisible });
                            this.logVisibilityChange(isVisible, 'IntersectionObserver');
                            this.notifyHelperSimpleOfPanelState(isVisible);
                        }
                    }, {
                        threshold: [0, 0.1, 1.0], // Trigger at 0%, 10%, and 100% visibility
                        rootMargin: '0px'
                    });
                    this.visibilityObserver.observe(element);
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup',
                        widgetId: this.props.id,
                        method: 'IntersectionObserver'
                    });
                }
                else {
                    // Method 2: Fallback to periodic checking
                    this.visibilityCheckInterval = window.setInterval(() => {
                        const isVisible = this.checkVisibility();
                        if (this.state.isPanelVisible !== isVisible) {
                            this.setState({ isPanelVisible: isVisible });
                            this.logVisibilityChange(isVisible, 'periodic-check');
                            this.notifyHelperSimpleOfPanelState(isVisible);
                        }
                    }, 250); // Check every 250ms
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup',
                        widgetId: this.props.id,
                        method: 'periodic-check'
                    });
                }
            }, 100);
        };
        /**
         * Cleans up visibility detection observers/intervals.
         */
        this.cleanupVisibilityDetection = () => {
            if (this.visibilityObserver) {
                this.visibilityObserver.disconnect();
                this.visibilityObserver = null;
            }
            if (this.visibilityCheckInterval !== null) {
                clearInterval(this.visibilityCheckInterval);
                this.visibilityCheckInterval = null;
            }
        };
        /**
         * Checks if the widget element is currently visible.
         * Fallback method when IntersectionObserver is not available.
         */
        this.checkVisibility = () => {
            if (!this.widgetRef.current)
                return false;
            const element = this.widgetRef.current;
            const style = window.getComputedStyle(element);
            const rect = element.getBoundingClientRect();
            const isVisible = (style.display !== 'none' &&
                style.visibility !== 'hidden' &&
                style.opacity !== '0' &&
                rect.width > 0 &&
                rect.height > 0 &&
                rect.top < window.innerHeight &&
                rect.bottom > 0 &&
                rect.left < window.innerWidth &&
                rect.right > 0);
            return isVisible;
        };
        /**
         * Tracks selection changes from query-result.
         * In "Add to" or "Remove from" modes, uses accumulated records count for restoration.
         */
        this.handleSelectionChange = (event) => {
            var _a;
            const customEvent = event;
            const { id } = this.props;
            // Only track if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const hasSelection = customEvent.detail.recordIds && customEvent.detail.recordIds.length > 0;
            // In "Add to" or "Remove from" mode, use accumulated records count for restoration
            // The accumulated records are the source of truth for what should be restored
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            const accumulatedRecordsCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const selectionCount = isAccumulationMode && accumulatedRecordsCount > 0
                ? accumulatedRecordsCount
                : (hasSelection ? customEvent.detail.recordIds.length : 0);
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-updating-state',
                widgetId: id,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelectionFromEvent: hasSelection,
                accumulatedRecordsCountBefore: accumulatedRecordsCount,
                calculatedSelectionCount: selectionCount,
                'will-set-hasSelection': selectionCount > 0,
                'will-set-lastSelection': hasSelection && !!customEvent.detail.outputDsId && !!customEvent.detail.queryItemConfigId,
                decisionLogic: {
                    'isAccumulationMode': isAccumulationMode,
                    'accumulatedRecordsCount > 0': accumulatedRecordsCount > 0,
                    'use-accumulated-count': isAccumulationMode && accumulatedRecordsCount > 0,
                    'use-event-count': !(isAccumulationMode && accumulatedRecordsCount > 0)
                }
            });
            this.setState({
                hasSelection: selectionCount > 0,
                selectionRecordCount: selectionCount,
                // Store lastSelection for compatibility, but restoration will use accumulatedRecords in Add/Remove modes
                lastSelection: hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? {
                        recordIds: customEvent.detail.recordIds,
                        outputDsId: customEvent.detail.outputDsId,
                        queryItemConfigId: customEvent.detail.queryItemConfigId
                    }
                    : undefined
            });
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-state-updated',
                widgetId: id,
                'new-hasSelection': selectionCount > 0,
                'new-selectionRecordCount': selectionCount,
                'new-lastSelection-recordIds-count': hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? customEvent.detail.recordIds.length
                    : 0,
                'note': 'lastSelection-only-contains-current-query-records-not-all-accumulated-records'
            });
        };
        /**
         * Handles restore request when identify popup closes.
         * Only restores if widget panel is open.
         * In "Add to" or "Remove from" modes, restores all accumulated records.
         */
        this.handleRestoreOnIdentifyClose = (event) => {
            var _a, _b, _c;
            const customEvent = event;
            const { id } = this.props;
            // Only handle if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const isWidgetOpen = this.state.isPanelVisible === true;
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restore-requested',
                widgetId: id,
                isWidgetOpen,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelection: this.state.hasSelection || false,
                accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                hasLastSelection: !!this.state.lastSelection,
                lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                outputDsId: customEvent.detail.outputDsId,
                queryItemConfigId: customEvent.detail.queryItemConfigId
            });
            // Only restore if widget is open
            if (!isWidgetOpen) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-widget-closed',
                    widgetId: id,
                    recordCount: customEvent.detail.recordIds.length
                });
                return;
            }
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-found-accumulated-records',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode,
                    'condition-result': isAccumulationMode
                });
            }
            // In Add/Remove modes, check accumulated records instead of lastSelection
            if (isAccumulationMode) {
                if (!this.state.hasSelection || !this.state.accumulatedRecords || this.state.accumulatedRecords.length === 0) {
                    debugLogger.log('RESTORE', {
                        event: 'identify-popup-closed-restore-skipped-no-accumulated-records',
                        widgetId: id,
                        hasSelection: this.state.hasSelection,
                        accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                        'hypothesis': 'hasSelection-is-false-or-no-accumulated-records',
                        'maybe-hasSelection-should-be-based-on-accumulated-records': true
                    });
                    return;
                }
                // Restore all accumulated records (grouped by origin DS)
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restoring-accumulated-records',
                    widgetId: id,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length
                });
                this.addSelectionToMap();
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // For "New" mode, use original validation logic
            // Check if we have matching selection state
            if (!this.state.hasSelection || !this.state.lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-no-selection',
                    widgetId: id,
                    hasSelection: this.state.hasSelection,
                    hasLastSelection: !!this.state.lastSelection
                });
                return;
            }
            // Verify the outputDsId matches
            if (this.state.lastSelection.outputDsId !== customEvent.detail.outputDsId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-ds-mismatch',
                    widgetId: id,
                    ourOutputDsId: this.state.lastSelection.outputDsId,
                    requestedOutputDsId: customEvent.detail.outputDsId
                });
                return;
            }
            // Verify the queryItemConfigId matches (optional but good to check)
            if (this.state.lastSelection.queryItemConfigId !== customEvent.detail.queryItemConfigId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-query-mismatch',
                    widgetId: id,
                    ourQueryItemConfigId: this.state.lastSelection.queryItemConfigId,
                    requestedQueryItemConfigId: customEvent.detail.queryItemConfigId
                });
                return;
            }
            // Restore selection to map (reuse existing method)
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restoring-selection',
                widgetId: id,
                recordCount: customEvent.detail.recordIds.length,
                outputDsId: customEvent.detail.outputDsId
            });
            this.addSelectionToMap();
        };
        /**
         * Adds selection to map when widget opens (reuses Add to Map logic).
         * In "Add to" or "Remove from" modes, restores all accumulated records grouped by origin data source.
         */
        this.addSelectionToMap = () => {
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            debugLogger.log('RESTORE', {
                event: 'addSelectionToMap-called',
                widgetId: id,
                resultsMode,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                lastSelectionOutputDsId: lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.outputDsId
            });
            // In Add/Remove modes, use accumulated records for restoration
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            // Adding log to see if accumulatedRecords exist but we're not using them
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-found-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0,
                    'condition-result': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0
                });
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: 0,
                    'will-fallback-to-lastSelection': !!lastSelection
                });
            }
            if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restoring-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Restore selection for each origin data source
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                recordsByOriginDS.forEach((records, originDS) => {
                    const recordIds = records.map(r => r.getId());
                    try {
                        // Use originDS directly (not outputDS) since records are selected in origin layers
                        selectRecordsAndPublish(id, originDS, recordIds, records, true);
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restored-origin-ds',
                            widgetId: id,
                            originDSId: originDS.id,
                            recordCount: records.length,
                            zoomExecuted: false
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restore-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error),
                            errorStack: error instanceof Error ? error.stack : undefined
                        });
                    }
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            // Or maybe we should always check accumulatedRecords first?
            if (accumulatedRecords && accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-lastSelection-exiting',
                    widgetId: id,
                    resultsMode,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-early-maybe-should-check-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            // Get records from output DS (same as Add to Map)
            const allRecords = outputDS.getAllLoadedRecords() || [];
            const recordsToSelect = allRecords.filter(record => lastSelection.recordIds.includes(record.getId()));
            if (recordsToSelect.length === 0) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-no-matching-records',
                    widgetId: id,
                    ourRecordCount: lastSelection.recordIds.length
                });
                return;
            }
            // Same logic as Add to Map action - selectRecordsAndPublish handles duplicate checking
            // Don't zoom when restoring on widget open (Add to Map action handles zoom for manual clicks)
            try {
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                selectRecordsAndPublish(id, outputDS, lastSelection.recordIds, recordsToSelect, true);
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-selection-added-to-map',
                    widgetId: id,
                    recordCount: recordsToSelect.length,
                    zoomExecuted: false
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-add-to-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error)
                });
            }
        };
        /**
         * Handles results mode change from dropdown.
         * Updates widget state and logs the change for debugging.
         */
        this.handleResultsModeChange = (mode) => {
            debugLogger.log('RESULTS-MODE', {
                event: 'mode-changed',
                widgetId: this.props.id,
                previousMode: this.state.resultsMode,
                newMode: mode,
                timestamp: new Date().toISOString()
            });
            // If switching to "New" mode, clear accumulated records
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'clearing-accumulated-records-on-mode-switch',
                    widgetId: this.props.id,
                    previousMode: this.state.resultsMode
                });
                this.setState({ resultsMode: mode, accumulatedRecords: [] });
            }
            else {
                this.setState({ resultsMode: mode });
            }
        };
        this.handleAccumulatedRecordsChange = (records) => {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-updated',
                widgetId: this.props.id,
                recordsCount: records.length
            });
            this.setState({ accumulatedRecords: records });
        };
        /**
         * NOTE: No longer needed - we use existing output DS instead of creating new one.
         * Kept for reference but not used.
         */
        this.getOrCreateAccumulatedResultsDS = (originDS) => __awaiter(this, void 0, void 0, function* () {
            // This is no longer used - we merge records into existing output DS
            throw new Error('This method is deprecated - use existing output DS instead');
        });
        /**
         * Clears selection from map only (keeps selection in widget's internal state).
         * Called when widget panel closes to remove selection from map while preserving widget state.
         * Always clears accumulated records if they exist, regardless of current mode.
         */
        this.clearSelectionFromMap = () => {
            var _a;
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-called',
                widgetId: id,
                resultsMode,
                isAccumulationMode,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                selectionRecordCount: this.state.selectionRecordCount || 0
            });
            // Always clear accumulated records if they exist (regardless of mode)
            // This handles the case where mode might have changed but records still exist
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-checking-accumulated-records',
                widgetId: id,
                'condition': 'accumulatedRecords && accumulatedRecords.length > 0',
                'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
            });
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'clear-found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'clear-found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'clear-could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clearing-accumulated-records-from-map',
                    widgetId: id,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Clear selection from each origin data source
                recordsByOriginDS.forEach((records, originDS) => {
                    try {
                        if (typeof originDS.selectRecordsByIds === 'function') {
                            // Clear selection from originDS (map) only
                            originDS.selectRecordsByIds([], []);
                            // Publish clear message so map knows to clear
                            jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(id, [], [originDS.id]));
                            debugLogger.log('RESTORE', {
                                event: 'panel-closed-cleared-origin-ds-selection',
                                widgetId: id,
                                originDSId: originDS.id,
                                recordCount: records.length
                            });
                        }
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-closed-clear-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error)
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-cleared-accumulated-records-returning',
                    widgetId: id,
                    'will-not-fallback-to-lastSelection': true
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we didn't enter the if block?
            // Or maybe we should always clear accumulated records if they exist?
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-accumulated-records-exist-but-not-clearing',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-condition-failed-why',
                    'condition-was': 'accumulatedRecords && accumulatedRecords.length > 0',
                    'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0)
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-no-lastSelection-exiting',
                    widgetId: id,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-maybe-should-have-cleared-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            try {
                // Get origin DS (the map layer)
                const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
                if (!originDS) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-origin-ds-not-found',
                        widgetId: id,
                        outputDsId: lastSelection.outputDsId
                    });
                    return;
                }
                // Check current selection state before clearing
                const currentSelectedIds = originDS.getSelectedRecordIds() || [];
                const ourRecordIds = lastSelection.recordIds;
                const matchesOurSelection = ourRecordIds.length === currentSelectedIds.length &&
                    ourRecordIds.every(recordId => currentSelectedIds.includes(recordId));
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-map-selection',
                    widgetId: id,
                    ourRecordCount: ourRecordIds.length,
                    mapSelectedCount: currentSelectedIds.length,
                    matchesOurSelection,
                    ourRecordIds: ourRecordIds.slice(0, 5),
                    mapSelectedIds: currentSelectedIds.slice(0, 5)
                });
                if (typeof originDS.selectRecordsByIds === 'function') {
                    // Clear selection from originDS (map) only - don't touch outputDS (widget state)
                    originDS.selectRecordsByIds([], []);
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-cleared-origin-ds-selection',
                        widgetId: id,
                        originDSId: originDS.id
                    });
                    // Publish clear message so map knows to clear
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(id, [], [originDS.id]));
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-published-clear-message',
                        widgetId: id,
                        originDSId: originDS.id
                    });
                    // Verify selection was cleared
                    const afterClearIds = originDS.getSelectedRecordIds() || [];
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-selection-cleared-from-map',
                        widgetId: id,
                        recordCount: lastSelection.recordIds.length,
                        originDSId: originDS.id,
                        selectionAfterClear: afterClearIds.length,
                        verifiedCleared: afterClearIds.length === 0
                    });
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-origin-ds-no-select-method',
                        widgetId: id,
                        originDSId: originDS.id,
                        hasSelectMethod: typeof originDS.selectRecordsByIds === 'function'
                    });
                }
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clear-from-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
            }
        };
        /**
         * Logs visibility state changes.
         */
        this.logVisibilityChange = (isVisible, method) => {
            var _a, _b, _c, _d;
            debugLogger.log('WIDGET-STATE', {
                event: isVisible ? 'panel-opened' : 'panel-closed',
                widgetId: this.props.id,
                isVisible,
                method,
                timestamp: new Date().toISOString()
            });
            if (isVisible) {
                // When panel opens, check if we have selection to restore
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToRestore = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                    hasSelectionToRestore,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToRestore': hasSelectionToRestore,
                        'will-call-addSelectionToMap': hasSelectionToRestore
                    }
                });
                // Add selection to map if we have one
                if (hasSelectionToRestore) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-calling-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-true'
                    });
                    this.addSelectionToMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-skipping-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
            else {
                // When panel closes, clear selection from map only (keep widget state)
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToClear = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_d = this.state.lastSelection) === null || _d === void 0 ? void 0 : _d.recordIds.length) || 0,
                    hasSelectionToClear,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToClear': hasSelectionToClear,
                        'will-call-clearSelectionFromMap': hasSelectionToClear
                    }
                });
                if (hasSelectionToClear) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-calling-clearSelectionFromMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-true'
                    });
                    this.clearSelectionFromMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-no-selection-to-clear',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
        };
        /**
         * Notifies HelperSimple of panel visibility state changes.
         */
        this.notifyHelperSimpleOfPanelState = (isVisible) => {
            const event = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
                detail: {
                    widgetId: this.props.id,
                    isOpen: isVisible
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * Removes a hash parameter from the URL after it has been used to populate a query.
         * This prevents the parameter from being re-applied when switching between queries.
         */
        this.removeHashParameter = (shortId) => {
            var _a;
            const hash = window.location.hash.substring(1);
            if (!hash) {
                return;
            }
            const urlParams = new URLSearchParams(hash);
            if (urlParams.has(shortId)) {
                const value = urlParams.get(shortId);
                urlParams.delete(shortId);
                const newHash = urlParams.toString();
                // Update URL without triggering navigation
                // If no hash params remain, remove hash entirely, otherwise keep the hash
                const newUrl = newHash
                    ? `${window.location.pathname}${window.location.search}#${newHash}`
                    : `${window.location.pathname}${window.location.search}`;
                debugLogger.log('HASH', {
                    event: 'hash-removed',
                    widgetId: this.props.id,
                    shortId: shortId,
                    value: value,
                    newHash: newHash,
                    newUrl: newUrl
                });
                window.history.replaceState(null, '', newUrl);
                // Clear the state so it won't trigger again
                if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                    this.setState({ initialQueryValue: undefined });
                }
            }
        };
        /**
         * Checks the URL hash parameters for any shortIds that match query items.
         * If found, stores the value to be used to auto-populate and execute the query.
         * Experience Builder uses hash-based URL parameters (e.g., #pin=2223059013).
         *
         * This method prioritizes the first matching shortId found in the query items order.
         * If multiple hash parameters exist, only the first match is used.
         */
        this.checkQueryStringForShortIds = () => {
            var _a, _b, _c, _d, _e;
            const { config } = this.props;
            if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
                return;
            }
            // Extract all shortIds from query items
            const shortIds = config.queryItems
                .map(item => item.shortId)
                .filter(shortId => shortId != null && shortId.trim() !== '');
            if (shortIds.length === 0) {
                return;
            }
            // Get URL hash fragment parameters (ExB uses # for params)
            const hash = window.location.hash.substring(1); // Remove the #
            const urlParams = new URLSearchParams(hash);
            // Log hash check for debugging
            debugLogger.log('HASH', {
                event: 'hash-check',
                widgetId: this.props.id,
                hash: hash,
                availableShortIds: shortIds,
                currentState: this.state.initialQueryValue
            });
            // Find the first matching shortId (prioritize first match in query items order)
            // This ensures we only set state once per check and maintains consistent behavior
            for (const shortId of shortIds) {
                if (urlParams.has(shortId)) {
                    const value = urlParams.get(shortId);
                    // Only update if the value has changed to avoid unnecessary re-renders
                    if (((_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId) !== shortId || ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.value) !== value) {
                        debugLogger.log('HASH', {
                            event: 'hash-detected',
                            widgetId: this.props.id,
                            shortId: shortId,
                            value: value,
                            previousShortId: (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.shortId,
                            previousValue: (_e = this.state.initialQueryValue) === null || _e === void 0 ? void 0 : _e.value
                        });
                        // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
                        const needsModeReset = this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                        this.setState(Object.assign({ initialQueryValue: { shortId, value } }, (needsModeReset ? {
                            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                            accumulatedRecords: []
                        } : {})));
                        if (needsModeReset) {
                            debugLogger.log('HASH', {
                                event: 'hash-reset-mode-to-new',
                                widgetId: this.props.id,
                                previousMode: this.state.resultsMode,
                                reason: 'hash-parameter-detected'
                            });
                        }
                    }
                    else {
                        debugLogger.log('HASH', {
                            event: 'hash-skipped',
                            widgetId: this.props.id,
                            shortId: shortId,
                            value: value,
                            reason: 'value-unchanged'
                        });
                    }
                    return; // Exit after first match
                }
            }
            // If no hash parameters match any shortId, clear the state
            // This handles cases where hash parameters were removed
            if (this.state.initialQueryValue) {
                debugLogger.log('HASH', {
                    event: 'hash-cleared',
                    widgetId: this.props.id,
                    previousShortId: this.state.initialQueryValue.shortId,
                    previousValue: this.state.initialQueryValue.value,
                    reason: 'no-matching-hash-params'
                });
                this.setState({ initialQueryValue: undefined });
            }
        };
    }
    componentDidMount() {
        this.checkQueryStringForShortIds();
        // Listen for hash changes to detect when hash parameters are updated
        // This is needed when HelperSimple opens the widget with a hash parameter
        // or when hash parameters change while the widget is already mounted
        window.addEventListener('hashchange', this.checkQueryStringForShortIds);
        // Set up visibility detection
        this.setupVisibilityDetection();
        // Listen for selection changes from query-result
        window.addEventListener(QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Listen for restore requests when identify popup closes
        window.addEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Notify HelperSimple that this widget is now open
        const openEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId: this.props.id,
                isOpen: true
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(openEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-opened',
            widgetId: this.props.id,
            isOpen: true,
            timestamp: new Date().toISOString()
        });
        // Also check after a short delay to catch cases where hash was already present
        // when widget was opened (e.g., by HelperSimple opening the widget)
        setTimeout(() => {
            this.checkQueryStringForShortIds();
        }, 100);
    }
    componentWillUnmount() {
        // Clean up hashchange listener
        window.removeEventListener('hashchange', this.checkQueryStringForShortIds);
        // Clean up selection change listener
        window.removeEventListener(QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Clean up restore on identify close listener
        window.removeEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Clean up visibility detection
        this.cleanupVisibilityDetection();
        // Notify HelperSimple that this widget is now closed
        const closeEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId: this.props.id,
                isOpen: false
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(closeEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-closed',
            widgetId: this.props.id,
            isOpen: false,
            timestamp: new Date().toISOString()
        });
    }
    componentDidUpdate(prevProps) {
        if (prevProps.config.queryItems !== this.props.config.queryItems) {
            this.checkQueryStringForShortIds();
        }
    }
    render() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        const { config, id, icon, label, layoutId, layoutItemId, controllerWidgetId } = this.props;
        const widgetLabel = this.props.intl.formatMessage({
            id: '_widgetLabel',
            defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]._widgetLabel
        });
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, { icon: iconMap.iconQuery, widgetId: this.props.id, name: widgetLabel });
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Popper && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_10__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_9__.TaskListPopperWrapper, { id: 0, icon: icon, popperTitle: label, minSize: (_c = (_b = config.sizeMap) === null || _b === void 0 ? void 0 : _b.arrangementIconPopper) === null || _c === void 0 ? void 0 : _c.minSize, defaultSize: (_e = (_d = config.sizeMap) === null || _d === void 0 ? void 0 : _d.arrangementIconPopper) === null || _e === void 0 ? void 0 : _e.defaultSize, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_7__.QueryTaskList, { widgetId: id, isInPopper: true, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, className: 'pb-4', initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.removeHashParameter, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange }) }) }));
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Inline && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_10__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_inline__WEBPACK_IMPORTED_MODULE_8__.TaskListInline, { widgetId: id, widgetLabel: label, wrap: config.arrangeWrap, queryItems: config.queryItems, minSize: (_g = (_f = config.sizeMap) === null || _f === void 0 ? void 0 : _f.arrangementIconPopper) === null || _g === void 0 ? void 0 : _g.minSize, defaultSize: (_j = (_h = config.sizeMap) === null || _h === void 0 ? void 0 : _h.arrangementIconPopper) === null || _j === void 0 ? void 0 : _j.defaultSize, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.removeHashParameter }) }));
        }
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Paper, { ref: this.widgetRef, variant: 'flat', className: 'jimu-widget runtime-query', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
        display: flex;
        flex-direction: column;
        height: 100%;
      `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "widget-header", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px 16px;
          border-bottom: 1px solid var(--sys-color-divider-secondary);
          background-color: var(--sys-color-surface);
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "widget-title", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--sys-color-text-primary);
          `, children: label || widgetLabel }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            flex: 1;
            overflow: auto;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_10__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_7__.QueryTaskList, { widgetId: id, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.removeHashParameter, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 4px 12px;
            border-top: 1px solid var(--sys-color-divider-secondary);
            background-color: var(--sys-color-surface-paper);
            flex-shrink: 0;
            text-align: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              font-size: 0.75rem;
              color: var(--sys-color-text-tertiary);
              font-weight: 400;
              letter-spacing: 0.025em;
              display: inline-flex;
              align-items: center;
              gap: 4px;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex-shrink: 0;
                  opacity: 0.6;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple.org", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-left: 6px;
                opacity: 0.5;
                font-size: 0.7rem;
              `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_12__.WIDGET_VERSION] })] }) })] })] }));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_6__.versionManager;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9xdWVyeS1zaW1wbGUvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2QztBQUVVO0FBRWhELE1BQU0sVUFBVSxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQ3JELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLHlFQUFHLElBQU0sTUFBTSxFQUFJO0FBQzFELENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWDRDO0FBRVc7QUFFakQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxLQUF3QixFQUFFLEVBQUU7SUFDdEQsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUc7SUFDdEIsTUFBTSxFQUFFLFNBQVMsS0FBZ0IsS0FBSyxFQUFoQixNQUFNLFVBQUssS0FBSyxFQUFoQyxhQUF3QixDQUFRO0lBRXRDLE1BQU0sT0FBTyxHQUFHLHFEQUFVLENBQUMsK0JBQStCLEVBQUUsU0FBUyxDQUFDO0lBQ3RFLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTyx1RkFBSyxTQUFTLEVBQUUsT0FBTyxJQUFNLE1BQWEsRUFBSTtJQUMvRCxPQUFPLGdFQUFDLEdBQUcsa0JBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxH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N0MsV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUNuQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsdUJBQXVCLEVBQ2pELGtCQUFrQixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLEVBQ2pELDBCQUEwQixFQUFFLElBQUksQ0FBQyw4QkFBOEIsR0FDL0QsR0FDMEIsR0FDMUIsRUFFTix5RUFBSyxHQUFHLEVBQUUsOENBQUc7Ozs7OztXQU1aLFlBQ0MsMkVBQU0sR0FBRyxFQUFFLDhDQUFHOzs7Ozs7OzthQVFiLGFBRUMsMEVBQ0UsS0FBSyxFQUFDLElBQUksRUFDVixNQUFNLEVBQUMsSUFBSSxFQUNYLE9BQU8sRUFBQyxXQUFXLEVBQ25CLElBQUksRUFBQyxNQUFNLEVBQ1gsTUFBTSxFQUFDLGNBQWMsRUFDckIsV0FBVyxFQUFDLEdBQUcsRUFDZixHQUFHLEVBQUUsOENBQUc7OztpQkFHUCxhQUVELDhFQUFVLE1BQU0sRUFBQyxrQkFBa0IsR0FBRSxFQUNyQyw4RUFBVSxNQUFNLEVBQUMsZUFBZSxHQUFFLElBQzlCLGtDQUVOLDJFQUFNLEdBQUcsRUFBRSw4Q0FBRzs7OztlQUliLGtCQUNHLHFEQUFjLElBQ1gsSUFDRixHQUNILElBQ0YsSUFDQSxDQUNUO0lBQ0gsQ0FBQzs7QUExMkNNLHFCQUFjLEdBQUcsNERBQWM7aUVBRG5CLE1BQU07QUErMkNuQixTQUFTLDJCQUEyQixDQUFDLEdBQUcsSUFBSSxxQkFBdUIsR0FBRyxHQUFHLEVBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvZXhwYW5kLWFsbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mby50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vbW9yZS1ob3Jpem9udGFsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvaWNvbi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvY29uZmlnLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2RhdGEtYWN0aW9ucy9hZGQtdG8tbWFwLWFjdGlvbi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGF0YS1hY3Rpb25zL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kZWZhdWx0LXF1ZXJ5LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYnVmZmVyLWlucHV0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tZHJhdy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLWRzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tbWFwLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2ludGVyYWN0aXZlLWRyYXctdG9vbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9sb2FkaW5nLXJlc3VsdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS1yZXN1bHQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS1yZXN1bHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1jb250ZXh0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stZm9ybS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxhYmVsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC1pbmxpbmUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLXNwYXRpYWwtZm9ybS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcmVzdWx0cy1tYW5hZ2VtZW50LXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvc2VsZWN0aW9uLXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvc2ltcGxlLWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvdHJhbnNsYXRpb25zL2RlZmF1bHQudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS91c2VBdXRvSGVpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC1jb25maWcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS93aWRnZXQtY29udGV4dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvdmVyc2lvbi1tYW5hZ2VyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3ZlcnNpb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmUvZW1vdGlvblwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1hcmNnaXNcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXRoZW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcIndpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1jb3JlL2xpYi9zZXQtcHVibGljLXBhdGgudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS93aWRnZXQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL2Rvd24uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IERvd25GaWxsZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBSaWdodEZpbGxlZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBBcnJvd0xlZnRPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IENvbGxhcHNlQWxsT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvZXhwYW5kLWFsbC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgRXhwYW5kQWxsT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBUcmFzaE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBJbmZvT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJtMTQgNC02IDgtNi04elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm00IDIgOCA2LTggNnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0yIDdhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0ybTUgMWExIDEgMCAxIDEgMiAwIDEgMSAwIDAgMS0yIDBtNiAwYTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTE1IDcuNWEuNTIuNTIgMCAwIDEtLjUxNi41MjdIMi45NzZMNi40NzMgMTEuNmEuNTM1LjUzNSAwIDAgMSAwIC43NDYuNTEuNTEgMCAwIDEtLjczIDBMMSA3LjVsNC43NDMtNC44NDZhLjUxLjUxIDAgMCAxIC43MyAwIC41MzUuNTM1IDAgMCAxIDAgLjc0NkwyLjk3NiA2Ljk3M2gxMS41MDhjLjI4NSAwIC41MTYuMjM2LjUxNi41MjdcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMSAzaDE0djFIMXpNOSA3aDZ2MUg5ek01LjAzNiA2LjE0NmEuNS41IDAgMCAwLS43MDggMEwxLjE0NiA5LjMyOGEuNS41IDAgMSAwIC43MDguNzA4bDIuMzI4LTIuMzI5VjE0LjVoMVY3LjcwN2wyLjMyOCAyLjMyOWEuNS41IDAgMSAwIC43MDgtLjcwOHpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMSAzaDE0djFIMXpNOSA3aDZ2MUg5ek00LjMyOCAxNC4zNTRhLjUuNSAwIDAgMCAuNzA4IDBsMy4xODItMy4xODJhLjUuNSAwIDEgMC0uNzA4LS43MDhsLTIuMzI4IDIuMzI5VjZoLTF2Ni43OTNsLTIuMzI4LTIuMzI4YS41LjUgMCAxIDAtLjcwOC43MDd6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNNC42NTMgMTMuODU0YS40ODUuNDg1IDAgMCAxIDAtLjcwOEwxMC4yNCA4IDQuNjUzIDIuODU0YS40ODUuNDg1IDAgMCAxIDAtLjcwOC41NC41NCAwIDAgMSAuNzM4IDBsNS45NTYgNS41YS40ODUuNDg1IDAgMCAxIDAgLjcwOGwtNS45NTYgNS41YS41NC41NCAwIDAgMS0uNzM4IDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk02IDYuNWEuNS41IDAgMCAxIDEgMHY2YS41LjUgMCAwIDEtMSAwek05LjUgNmEuNS41IDAgMCAwLS41LjV2NmEuNS41IDAgMCAwIDEgMHYtNmEuNS41IDAgMCAwLS41LS41XFxcIj48L3BhdGg+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTEgMEg1YTEgMSAwIDAgMC0xIDF2MkguNWEuNS41IDAgMCAwIDAgMWgxLjZsLjgxIDExLjFhMSAxIDAgMCAwIC45OTUuOWg4LjE5YTEgMSAwIDAgMCAuOTk1LS45TDEzLjkgNGgxLjZhLjUuNSAwIDAgMCAwLTFIMTJWMWExIDEgMCAwIDAtMS0xbTAgM1YxSDV2MnptMS44OTUgMWgtOS43OWwuOCAxMWg4LjE5elxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAxNkE4IDggMCAxIDEgOCAwYTggOCAwIDAgMSAwIDE2bTAtMUE3IDcgMCAxIDAgOCAxYTcgNyAwIDAgMCAwIDE0TTggNGEuOTA1LjkwNSAwIDAgMC0uOS45OTVsLjM1IDMuNTA3YS41NTIuNTUyIDAgMCAwIDEuMSAwbC4zNS0zLjUwN0EuOTA1LjkwNSAwIDAgMCA4IDRtMSA3YTEgMSAwIDEgMS0yIDAgMSAxIDAgMCAxIDIgMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTggNS41YTEgMSAwIDEgMCAwLTIgMSAxIDAgMCAwIDAgMk02LjUgNy41QS41LjUgMCAwIDEgNyA3aDEuNXY0LjVoMWEuNS41IDAgMCAxIDAgMWgtM2EuNS41IDAgMCAxIDAtMWgxVjhIN2EuNS41IDAgMCAxLS41LS41XFxcIj48L3BhdGg+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAxNkE4IDggMCAxIDEgOCAwYTggOCAwIDAgMSAwIDE2bTAtMUE3IDcgMCAxIDAgOCAxYTcgNyAwIDAgMCAwIDE0XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk04IDIuMTI1IDE0LjMzNCAxNEgxLjY2N3ptLS44ODItLjQ3YTEgMSAwIDAgMSAxLjc2NSAwbDYuMzMzIDExLjg3NEExIDEgMCAwIDEgMTQuMzM0IDE1SDEuNjY3YTEgMSAwIDAgMS0uODgyLTEuNDd6TTggNC44NzRhLjkwNS45MDUgMCAwIDAtLjkuOTk1bC4zNSAzLjUwN2EuNTUyLjU1MiAwIDAgMCAxLjEgMEw4LjkgNS44N2EuOTA1LjkwNSAwIDAgMC0uOS0uOTk1bTEgN2ExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMjAgMjBcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk04LjUgM0E1LjUgNS41IDAgMCAxIDE0IDguNWE1LjUgNS41IDAgMCAxLTEuMjczIDMuNTI3bDQuMDUzIDQuMDU0YS43NS43NSAwIDEgMS0xLjA2IDEuMDZsLTQuMDU0LTQuMDUzYTUuNSA1LjUgMCAwIDEtMy41MjcgMS4yNzMgNS41IDUuNSAwIDEgMSAwLTExSDguNXptMCAxLjVoLS4zNjFhNCA0IDAgMSAwIDAgOCA0IDQgMCAwIDAgMC04elxcXCI+PC9wYXRoPjxyZWN0IHdpZHRoPVxcXCIxOVxcXCIgaGVpZ2h0PVxcXCIxOVxcXCIgeD1cXFwiLjVcXFwiIHk9XFxcIi41XFxcIiBzdHJva2U9XFxcIiMwMDBcXFwiIHJ4PVxcXCIxLjVcXFwiPjwvcmVjdD48L3N2Zz5cIiIsImltcG9ydCB0eXBlIHsgU3BhdGlhbFJlbGF0aW9uc2hpcCwgVW5pdHMgfSBmcm9tICdAZXNyaS9hcmNnaXMtcmVzdC1mZWF0dXJlLXNlcnZpY2UnXG5pbXBvcnQgdHlwZSB7IEltbXV0YWJsZU9iamVjdCwgSW1tdXRhYmxlQXJyYXksIFNxbEV4cHJlc3Npb24sIFVzZURhdGFTb3VyY2UsIEljb25SZXN1bHQsIE9yZGVyQnlPcHRpb24gfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFNpemUgfSBmcm9tICdqaW11LXVpJ1xuXG5leHBvcnQgZW51bSBDcmVhdGVUb29sVHlwZSB7XG4gIFBvaW50ID0gJ1BvaW50JyxcbiAgUG9seWxpbmUgPSAnUG9seWxpbmUnLFxuICBQb2x5Z29uID0gJ1BvbHlnb24nLFxuICBSZWN0YW5nbGUgPSAnUmVjdGFuZ2xlJyxcbiAgQ2lyY2xlID0gJ0NpcmNsZSdcbn1cblxuZXhwb3J0IGVudW0gU2VsZWN0aW9uVHlwZSB7XG4gIE5ld1NlbGVjdGlvbiA9ICdORVdfU0VMRUNUSU9OJyxcbiAgQWRkVG9TZWxlY3Rpb24gPSAnQUREX1RPX0NVUlJFTlRfU0VMRUNUSU9OJyxcbiAgUmVtb3ZlRnJvbVNlbGVjdGlvbiA9ICdSRU1PVkVfRlJPTV9DVVJSRU5UX1NFTEVDVElPTicsXG4gIFN1YnNldFNlbGVjdGlvbiA9ICdTVUJTRVRfRlJPTV9DVVJSRU5UX1NFTEVDVElPTicsXG4gIFN3aXRjaFNlbGVjdGlvbiA9ICdTV0lUQ0hfQ1VSUkVOVF9TRUxFQ1RJT04nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkIHtcbiAgbmFtZTogc3RyaW5nXG4gIGFsaWFzPzogc3RyaW5nXG4gIGxhYmVsPzogc3RyaW5nXG59XG5cbmV4cG9ydCBlbnVtIFF1ZXJ5QXJyYW5nZVR5cGUge1xuICBCbG9jayA9ICdCTE9DSycsXG4gIElubGluZSA9ICdJTkxJTkUnLFxuICBQb3BwZXIgPSAnUE9QUEVSJyxcbn1cblxuZXhwb3J0IGVudW0gU3BhdGlhbEZpbHRlclR5cGUge1xuICBDdXJyZW50TWFwRXh0ZW50ID0gJ0N1cnJlbnRNYXBFeHRlbnQnLFxuICBJbnRlcmFjdGl2ZURyYXdNb2RlID0gJ0ludGVyYWN0aXZlRHJhd01vZGUnLFxuICBOb25lID0gJydcbn1cblxuZXhwb3J0IGVudW0gU3BhdGlhbFJlbGF0aW9uIHtcbiAgSW50ZXJzZWN0ID0gJ2ludGVyc2VjdHMnLFxuICBDb250YWluID0gJ2NvbnRhaW5zJyxcbiAgQ3Jvc3MgPSAnY3Jvc3NlcycsXG4gIEVudmVsb3BlSW50ZXJzZWN0ID0gJ2VudmVsb3BlLWludGVyc2VjdHMnLFxuICBJbmRleEludGVyc2VjdCA9ICdpbmRleC1pbnRlcnNlY3RzJyxcbiAgT3ZlcmxhcCA9ICdvdmVybGFwcycsXG4gIFRvdWNoID0gJ3RvdWNoZXMnLFxuICBXaXRoaW4gPSAnd2l0aGluJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTcGF0aWFsRmlsdGVyT2JqIHtcbiAgZ2VvbWV0cnk6IGFueVxuICBncmFwaGljPzogX19lc3JpLkdyYXBoaWNcbiAgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuXG4gIHJlbGF0aW9uPzogU3BhdGlhbFJlbGF0aW9uXG4gIGJ1ZmZlcj86IHsgZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUgfVxufVxuXG5leHBvcnQgY29uc3QgbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWw6IHsgW2tleTogc3RyaW5nXTogU3BhdGlhbFJlbGF0aW9uc2hpcCB9ID0ge1xuICBbU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdF06ICdlc3JpU3BhdGlhbFJlbEludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkNvbnRhaW5dOiAnZXNyaVNwYXRpYWxSZWxDb250YWlucycsXG4gIFtTcGF0aWFsUmVsYXRpb24uQ3Jvc3NdOiAnZXNyaVNwYXRpYWxSZWxDcm9zc2VzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5FbnZlbG9wZUludGVyc2VjdF06ICdlc3JpU3BhdGlhbFJlbEVudmVsb3BlSW50ZXJzZWN0cycsXG4gIFtTcGF0aWFsUmVsYXRpb24uSW5kZXhJbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxJbmRleEludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLk92ZXJsYXBdOiAnZXNyaVNwYXRpYWxSZWxPdmVybGFwcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uVG91Y2hdOiAnZXNyaVNwYXRpYWxSZWxUb3VjaGVzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5XaXRoaW5dOiAnZXNyaVNwYXRpYWxSZWxXaXRoaW4nXG59XG5cbmV4cG9ydCBlbnVtIFVuaXRUeXBlIHtcbiAgTWlsZXMgPSAnTWlsZXMnLFxuICBLaWxvbWV0ZXJzID0gJ0tpbG9tZXRlcnMnLFxuICBGZWV0ID0gJ0ZlZXQnLFxuICBNZXRlcnMgPSAnTWV0ZXJzJyxcbiAgTmF1dGljYWxNaWxlcyA9ICdOYXV0aWNhbE1pbGVzJyxcbn1cblxuZXhwb3J0IGNvbnN0IG1hcEpTQVBJVW5pdFRvRHNVbml0OiB7IFtrZXk6IHN0cmluZ106IFVuaXRzIH0gPSB7XG4gIFtVbml0VHlwZS5NaWxlc106ICdlc3JpU1JVbml0X1N0YXR1dGVNaWxlJyxcbiAgW1VuaXRUeXBlLktpbG9tZXRlcnNdOiAnZXNyaVNSVW5pdF9LaWxvbWV0ZXInLFxuICBbVW5pdFR5cGUuRmVldF06ICdlc3JpU1JVbml0X0Zvb3QnLFxuICBbVW5pdFR5cGUuTWV0ZXJzXTogJ2VzcmlTUlVuaXRfTWV0ZXInLFxuICBbVW5pdFR5cGUuTmF1dGljYWxNaWxlc106ICdlc3JpU1JVbml0X05hdXRpY2FsTWlsZSdcbn1cblxuZXhwb3J0IGVudW0gTGlzdERpcmVjdGlvbiB7XG4gIEhvcml6b250YWwgPSAnSG9yaXpvbnRhbCcsXG4gIFZlcnRpY2FsID0gJ1ZlcnRpY2FsJyxcbn1cblxuZXhwb3J0IGVudW0gUGFnaW5nVHlwZSB7XG4gIE11bHRpUGFnZSA9ICdNdWx0aVBhZ2UnLFxuICBMYXp5TG9hZCA9ICdMYXp5TG9hZCcsXG4gIFNpbXBsZSA9ICdTaW1wbGUnLCAvLyBSZW5kZXIgYWxsIHJlY29yZHMgYXQgb25jZSwgbm8gbGF6eSBsb2FkaW5nIG9yIHBhZ2luYXRpb25cbn1cblxuZXhwb3J0IGVudW0gRmllbGRzVHlwZSB7XG4gIFBvcHVwU2V0dGluZyA9ICdQb3B1cFNldHRpbmcnLFxuICBTZWxlY3RBdHRyaWJ1dGVzID0gJ1NlbGVjdEF0dHJpYnV0ZXMnLFxufVxuXG5leHBvcnQgZW51bSBTb3J0RGlyZWN0aW9uIHtcbiAgQXNjID0gJ0FzYycsXG4gIERlc2MgPSAnRGVzYycsXG59XG5cbmV4cG9ydCBlbnVtIFJlc3VsdFNlbGVjdE1vZGUge1xuICBTaW5nbGUgPSAnU2luZ2xlJyxcbiAgTXVsdGlwbGUgPSAnTXVsdGlwbGUnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNvcnRPcHRpb24ge1xuICBuYW1lOiBzdHJpbmdcbiAgZGlyZWN0aW9uOiBTb3J0RGlyZWN0aW9uXG59XG5cbmV4cG9ydCBlbnVtIFN5bWJvbFR5cGUge1xuICBEZWZhdWx0U3ltYm9sID0gJ0RlZmF1bHRTeW1ib2wnLFxuICBDdXN0b21TeW1ib2wgPSAnQ3VzdG9tU3ltYm9sJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeUl0ZW1UeXBlIHtcbiAgY29uZmlnSWQ6IHN0cmluZ1xuICBpY29uPzogSWNvblJlc3VsdFxuICBuYW1lPzogc3RyaW5nXG4gIGRpc3BsYXlMYWJlbD86IGJvb2xlYW5cbiAgdXNlRGF0YVNvdXJjZT86IFVzZURhdGFTb3VyY2VcbiAgb3V0cHV0RGF0YVNvdXJjZUlkPzogc3RyaW5nXG4gIHVzZUF0dHJpYnV0ZUZpbHRlcj86IGJvb2xlYW5cbiAgdXNlU3BhdGlhbEZpbHRlcj86IGJvb2xlYW5cbiAgYXR0cmlidXRlRmlsdGVyTGFiZWw/OiBzdHJpbmdcbiAgc3BhdGlhbEZpbHRlckxhYmVsPzogc3RyaW5nXG4gIGF0dHJpYnV0ZUZpbHRlckRlc2M/OiBzdHJpbmdcbiAgc3BhdGlhbEZpbHRlckRlc2M/OiBzdHJpbmdcbiAgcmVzdWx0c0xhYmVsPzogc3RyaW5nXG4gIHNxbEV4cHJPYmo/OiBTcWxFeHByZXNzaW9uXG4gIHNwYXRpYWxNYXBXaWRnZXRJZHM/OiBzdHJpbmdbXVxuICBzcGF0aWFsRmlsdGVyVHlwZXM/OiBTcGF0aWFsRmlsdGVyVHlwZVtdXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUNyZWF0ZVRvb2xUeXBlcz86IENyZWF0ZVRvb2xUeXBlW11cbiAgc3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyPzogYm9vbGVhblxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJEaXN0YW5jZT86IG51bWJlclxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJVbml0PzogVW5pdFR5cGVcbiAgc3BhdGlhbFJlbGF0aW9ucz86IFNwYXRpYWxSZWxhdGlvbltdXG4gIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzPzogVXNlRGF0YVNvdXJjZVtdXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZVNlbGVjdFRvb2w/OiBib29sZWFuXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcj86IGJvb2xlYW5cbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2U/OiBudW1iZXJcbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdD86IFVuaXRUeXBlXG4gIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGE/OiBib29sZWFuXG4gIHJlc3VsdExpc3REaXJlY3Rpb24/OiBMaXN0RGlyZWN0aW9uXG4gIHJlc3VsdFBhZ2luZ1N0eWxlPzogUGFnaW5nVHlwZVxuICByZXN1bHRGaWVsZHNUeXBlPzogRmllbGRzVHlwZVxuICByZXN1bHRUaXRsZUZpZWxkcz86IHN0cmluZ1tdXG4gIHJlc3VsdFRpdGxlRXhwcmVzc2lvbj86IHN0cmluZ1xuICByZXN1bHREaXNwbGF5RmllbGRzPzogc3RyaW5nW11cbiAgcmVzdWx0U3ltYm9sVHlwZT86IFN5bWJvbFR5cGVcbiAgcmVzdWx0Q3VzdG9tU3ltYm9sPzogYW55XG4gIHJlc3VsdEFsbG93Q2hhbmdlU3ltYm9sPzogYm9vbGVhblxuICByZXN1bHRFeHBhbmRCeURlZmF1bHQ/OiBib29sZWFuXG4gIHJlc3VsdFNlbGVjdE1vZGU/OiBSZXN1bHRTZWxlY3RNb2RlXG4gIGFsbG93RXhwb3J0PzogYm9vbGVhblxuICBzb3J0T3B0aW9ucz86IE9yZGVyQnlPcHRpb25bXVxuICBpdGVtU2l6ZU1hcD86IHtcbiAgICBhcnJhbmdlbWVudEhvcml6b250YWxQb3BwZXI/OiBTaXplTWFwXG4gIH1cbiAgLy8gR3JvdXBpbmcgZmllbGRzXG4gIGdyb3VwSWQ/OiBzdHJpbmdcbiAgZ3JvdXBEaXNwbGF5TmFtZT86IHN0cmluZ1xuICBzZWFyY2hBbGlhcz86IHN0cmluZ1xuICBzaG9ydElkPzogc3RyaW5nXG4gIHpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNpemVNYXAge1xuICBtaW5TaXplPzogU2l6ZVxuICBkZWZhdWx0U2l6ZT86IFNpemVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nQ29uZmlnIHtcbiAgcXVlcnlJdGVtcz86IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGFycmFuZ2VUeXBlOiBRdWVyeUFycmFuZ2VUeXBlXG4gIGFycmFuZ2VXcmFwPzogYm9vbGVhblxuICByZXN1bHRMaXN0RGlyZWN0aW9uPzogTGlzdERpcmVjdGlvblxuICByZXN1bHRQYWdpbmdTdHlsZT86IFBhZ2luZ1R5cGVcbiAgZGVmYXVsdFBhZ2VTaXplPzogbnVtYmVyXG4gIGxhenlMb2FkSW5pdGlhbFBhZ2VTaXplPzogbnVtYmVyXG4gIHNpemVNYXA/OiB7XG4gICAgYXJyYW5nZW1lbnRJY29uUG9wcGVyPzogU2l6ZU1hcFxuICB9XG59XG5cbmV4cG9ydCB0eXBlIElNQ29uZmlnID0gSW1tdXRhYmxlT2JqZWN0PFNldHRpbmdDb25maWc+XG5cblxuIiwiLyoqXG4gKiBDdXN0b20gXCJBZGQgdG8gTWFwXCIgZGF0YSBhY3Rpb24gZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIFxuICogVGhpcyBhY3Rpb24gcmVwbGFjZXMgdGhlIGZyYW1ld29yaydzIFwiU2hvdyBvbiBNYXBcIiBhY3Rpb24gd2l0aCBhIGN1c3RvbVxuICogaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MgKHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKS5cbiAqIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IGJlaGF2aW9yIHdpdGggcXVlcnkgcmVzdWx0cyBhbmQgcHJvcGVyIGludGVncmF0aW9uXG4gKiB3aXRoIHRoZSB3aWRnZXQncyBcIkNsZWFyIHJlc3VsdHNcIiBmdW5jdGlvbmFsaXR5LlxuICovXG5cbmltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgSW50bFNoYXBlLCBEYXRhQWN0aW9uTWFuYWdlciwgdHlwZSBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggfSBmcm9tICcuLi9ydW50aW1lL3NlbGVjdGlvbi11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcbmltcG9ydCB0eXBlIHsgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5cbi8qKlxuICogQ3JlYXRlcyBhIGN1c3RvbSBcIkFkZCB0byBNYXBcIiBkYXRhIGFjdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy5cbiAqIFxuICogVGhpcyBhY3Rpb24gcmVwbGFjZXMgdGhlIGZyYW1ld29yaydzIFwiU2hvdyBvbiBNYXBcIiBhY3Rpb24gYW5kIGVuc3VyZXMgY29uc2lzdGVudFxuICogYmVoYXZpb3Igd2l0aCBRdWVyeVNpbXBsZSdzIHF1ZXJ5IHJlc3VsdHMgYnkgdXNpbmcgdGhlIHNhbWUgc2VsZWN0aW9uIG1lY2hhbmlzbS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRCB0aGF0IHByb3ZpZGVzIHRoaXMgYWN0aW9uXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBzZWxlY3Rpb24gb24gdGhlIG9yaWdpbiBsYXllcilcbiAqIEBwYXJhbSBpbnRsIC0gVGhlIEludGwgb2JqZWN0IGZvciBpbnRlcm5hdGlvbmFsaXphdGlvblxuICogQHBhcmFtIHF1ZXJ5SXRlbSAtIE9wdGlvbmFsIHF1ZXJ5IGl0ZW0gY29uZmlndXJhdGlvbiAoZm9yIHpvb21Ub1NlbGVjdGVkIHNldHRpbmcpXG4gKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSB6b29tIG92ZXJyaWRlIGZyb20gdGhlIHF1ZXJ5IGZvcm1cbiAqIEByZXR1cm5zIEEgRGF0YUFjdGlvbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBieSBEYXRhQWN0aW9uTGlzdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWRkVG9NYXBBY3Rpb24oXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlLFxuICBpbnRsOiBJbnRsU2hhcGUsXG4gIHF1ZXJ5SXRlbT86IFF1ZXJ5SXRlbVR5cGUsXG4gIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbik6IERhdGFBY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIGlkOiBgJHt3aWRnZXRJZH0tYWRkVG9NYXBgLFxuICAgIG5hbWU6ICdhZGRUb01hcCcsXG4gICAgbGFiZWw6IGludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnYWRkVG9NYXAnLCBkZWZhdWx0TWVzc2FnZTogJ0FkZCB0byBtYXAnIH0pLFxuICAgIC8vIEljb24gbWF0Y2hlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiBmb3IgY29uc2lzdGVuY3lcbiAgICBpY29uOiByZXF1aXJlKCcuLi9ydW50aW1lL2Fzc2V0cy9pY29ucy9zaG93LW9uLW1hcC5zdmcnKS5kZWZhdWx0IHx8IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZycpLFxuICAgIC8vIE5vdGU6IEluZGV4IG1heSBub3QgY29udHJvbCBwb3NpdGlvbiBpZiBleHRyYUFjdGlvbnMgYXJlIGFsd2F5cyBhcHBlbmRlZCBhZnRlciBmcmFtZXdvcmsgYWN0aW9uc1xuICAgIGluZGV4OiAtMTAwLFxuICAgIHdpZGdldElkLFxuICAgIGludGwsXG4gICAgc3VwcG9ydFByb3ZpZGVyV2lkZ2V0OiB0cnVlLFxuICAgIFxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhpcyBhY3Rpb24gY2FuIHByb2Nlc3MgdGhlIGdpdmVuIGRhdGEgc2V0cy5cbiAgICAgKiBTdXBwb3J0cyBSZWNvcmRzIGxldmVsIGFjdGlvbnMgd2l0aCBmZWF0dXJlIGRhdGEgcmVjb3Jkcy5cbiAgICAgKi9cbiAgICBpc1N1cHBvcnRlZDogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBhY3Rpb25XaWRnZXRJZCxcbiAgICAgICAgZGF0YUxldmVsLFxuICAgICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBPbmx5IHN1cHBvcnQgUmVjb3JkcyBsZXZlbCBhY3Rpb25zXG4gICAgICBpZiAoZGF0YUxldmVsICE9PSBEYXRhTGV2ZWwuUmVjb3Jkcykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vdCBSZWNvcmRzIGxldmVsJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTmVlZCBhdCBsZWFzdCBvbmUgZGF0YSBzZXQgd2l0aCByZWNvcmRzXG4gICAgICBpZiAoIWRhdGFTZXRzIHx8IGRhdGFTZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vIGRhdGEgc2V0cydcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgcmVjb3JkcyBhbmQgb3V0cHV0IGRhdGEgc291cmNlXG4gICAgICBjb25zdCBoYXNSZWNvcmRzID0gZGF0YVNldHMuc29tZShkcyA9PiBkcy5yZWNvcmRzICYmIGRzLnJlY29yZHMubGVuZ3RoID4gMClcbiAgICAgIGNvbnN0IHN1cHBvcnRlZCA9IGhhc1JlY29yZHMgJiYgISFvdXRwdXREU1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgIHJlc3VsdDogc3VwcG9ydGVkLFxuICAgICAgICBoYXNSZWNvcmRzLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRhdGFTZXRzLnJlZHVjZSgoc3VtLCBkcykgPT4gc3VtICsgKGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwKSwgMClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVybiBzdXBwb3J0ZWRcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBhY3Rpb24gYnkgc2VsZWN0aW5nIHJlY29yZHMgdXNpbmcgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy5cbiAgICAgKi9cbiAgICBvbkV4ZWN1dGU6IGFzeW5jIChkYXRhU2V0czogRGF0YVJlY29yZFNldFtdLCBkYXRhTGV2ZWw6IERhdGFMZXZlbCwgYWN0aW9uV2lkZ2V0SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGFjdGlvbldpZGdldElkLFxuICAgICAgICBkYXRhTGV2ZWwsXG4gICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFNcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmICghb3V0cHV0RFMgfHwgZGF0YUxldmVsICE9PSBEYXRhTGV2ZWwuUmVjb3Jkcykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICFvdXRwdXREUyA/ICdObyBvdXRwdXREUycgOiAnTm90IFJlY29yZHMgbGV2ZWwnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDb2xsZWN0IGFsbCByZWNvcmRzIGZyb20gYWxsIGRhdGEgc2V0c1xuICAgICAgY29uc3QgYWxsUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gICAgICBkYXRhU2V0cy5mb3JFYWNoKGRhdGFTZXQgPT4ge1xuICAgICAgICBpZiAoZGF0YVNldC5yZWNvcmRzICYmIGRhdGFTZXQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gRmlsdGVyIHRvIG9ubHkgRmVhdHVyZURhdGFSZWNvcmQgdHlwZXNcbiAgICAgICAgICBjb25zdCBmZWF0dXJlUmVjb3JkcyA9IGRhdGFTZXQucmVjb3Jkcy5maWx0ZXIoXG4gICAgICAgICAgICAocmVjb3JkKTogcmVjb3JkIGlzIEZlYXR1cmVEYXRhUmVjb3JkID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlY29yZCAmJiB0eXBlb2YgKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZCkuZ2V0R2VvbWV0cnkgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApXG4gICAgICAgICAgYWxsUmVjb3Jkcy5wdXNoKC4uLmZlYXR1cmVSZWNvcmRzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoYWxsUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZmVhdHVyZSByZWNvcmRzIGZvdW5kJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gR2V0IHJlY29yZCBJRHNcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IGFsbFJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiBhbGxSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVjb3JkSWRzOiByZWNvcmRJZHMuc2xpY2UoMCwgMTApLCAvLyBMb2cgZmlyc3QgMTAgSURzXG4gICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVc2UgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2VzcyAtIHNlbGVjdHMgb24gb3JpZ2luIGxheWVyIGFuZCBwdWJsaXNoZXMgc2VsZWN0aW9uIG1lc3NhZ2VzXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgY29uc2lzdGVudCBiZWhhdmlvciB3aXRoIHF1ZXJ5IHJlc3VsdHMgYW5kIHByb3BlciBpbnRlZ3JhdGlvbiB3aXRoIFwiQ2xlYXIgcmVzdWx0c1wiXG4gICAgICB0cnkge1xuICAgICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCh3aWRnZXRJZCwgb3V0cHV0RFMsIHJlY29yZElkcywgYWxsUmVjb3JkcywgdHJ1ZSlcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluZSB6b29tIGJlaGF2aW9yOiBydW50aW1lIG92ZXJyaWRlIHRha2VzIHByZWNlZGVuY2UsIHRoZW4gcXVlcnlJdGVtIGNvbmZpZywgZGVmYXVsdHMgdG8gdHJ1ZVxuICAgICAgICBjb25zdCBzaG91bGRab29tID0gcnVudGltZVpvb21Ub1NlbGVjdGVkICE9PSB1bmRlZmluZWQgXG4gICAgICAgICAgPyBydW50aW1lWm9vbVRvU2VsZWN0ZWQgXG4gICAgICAgICAgOiAocXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCAhPT0gZmFsc2UpXG4gICAgICAgIFxuICAgICAgICBpZiAoc2hvdWxkWm9vbSAmJiBhbGxSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCB6b29tRGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgICAgICAgcmVjb3JkczogYWxsUmVjb3JkcyxcbiAgICAgICAgICAgIG5hbWU6IG91dHB1dERTLmdldExhYmVsKClcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmluZCBhbmQgZXhlY3V0ZSB0aGUgem9vbVRvRmVhdHVyZSBhY3Rpb24gZnJvbSBhdmFpbGFibGUgZnJhbWV3b3JrIGFjdGlvbnNcbiAgICAgICAgICBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN1cHBvcnRlZEFjdGlvbnMod2lkZ2V0SWQsIFt6b29tRGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzKVxuICAgICAgICAgICAgLnRoZW4oYWN0aW9uQ2F0ZWdvcmllcyA9PiB7XG4gICAgICAgICAgICAgIC8vIFNlYXJjaCB0aHJvdWdoIGFsbCBhY3Rpb24gY2F0ZWdvcmllcyB0byBmaW5kIHpvb21Ub0ZlYXR1cmUgYWN0aW9uXG4gICAgICAgICAgICAgIGxldCB6b29tQWN0aW9uOiBEYXRhQWN0aW9uIHwgbnVsbCA9IG51bGxcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBpbiBhY3Rpb25DYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9ucyA9IGFjdGlvbkNhdGVnb3JpZXNbY2F0ZWdvcnldXG4gICAgICAgICAgICAgICAgem9vbUFjdGlvbiA9IGFjdGlvbnMuZmluZCgoYWN0aW9uOiBEYXRhQWN0aW9uKSA9PiBcbiAgICAgICAgICAgICAgICAgIGFjdGlvbi5uYW1lID09PSAnem9vbVRvRmVhdHVyZScgfHwgYWN0aW9uLmlkID09PSAnem9vbVRvRmVhdHVyZSdcbiAgICAgICAgICAgICAgICApIHx8IG51bGxcbiAgICAgICAgICAgICAgICBpZiAoem9vbUFjdGlvbikgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKHpvb21BY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YUFjdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5leGVjdXRlRGF0YUFjdGlvbih6b29tQWN0aW9uLCBbem9vbURhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3Jkcywgd2lkZ2V0SWQpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZS16b29tJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgc2VsZWN0ZWQgcmVjb3JkcyBhbmQgcHVibGlzaGVkIHNlbGVjdGlvbiBtZXNzYWdlJyxcbiAgICAgICAgICB6b29tRXhlY3V0ZWQ6IHNob3VsZFpvb21cbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICB9KVxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleGVjdXRpbmcgQWRkIHRvIE1hcCBhY3Rpb246JywgZXJyb3IpXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogQ2xlYW51cCBtZXRob2QgKHJlcXVpcmVkIGJ5IERhdGFBY3Rpb24gaW50ZXJmYWNlKVxuICAgICAqL1xuICAgIGRlc3Ryb3k6ICgpOiB2b2lkID0+IHtcbiAgICAgIC8vIE5vIGNsZWFudXAgbmVlZGVkXG4gICAgfVxuICB9XG59XG5cbiIsImltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgRGF0YVNvdXJjZSwgdHlwZSBJbnRsU2hhcGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBjcmVhdGVBZGRUb01hcEFjdGlvbiB9IGZyb20gJy4vYWRkLXRvLW1hcC1hY3Rpb24nXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5cbi8qKlxuICogUXVlcnlTaW1wbGUgQ3VzdG9tIERhdGEgQWN0aW9uc1xuICogXG4gKiBSZXR1cm5zIGN1c3RvbSBkYXRhIGFjdGlvbnMgZm9yIHRoZSB3aWRnZXQuXG4gKiBJbmNsdWRlcyBhIGN1c3RvbSBcIkFkZCB0byBNYXBcIiBhY3Rpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKG51bGwvdW5kZWZpbmVkIGlmIG5vdCBhdmFpbGFibGUpXG4gKiBAcGFyYW0gaW50bCAtIFRoZSBJbnRsIG9iamVjdCBmb3IgaW50ZXJuYXRpb25hbGl6YXRpb25cbiAqIEBwYXJhbSBxdWVyeUl0ZW0gLSBPcHRpb25hbCBxdWVyeSBpdGVtIGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIHpvb20gb3ZlcnJpZGUgZnJvbSB0aGUgcXVlcnkgZm9ybVxuICogQHJldHVybnMgQXJyYXkgb2YgY3VzdG9tIERhdGFBY3Rpb24gb2JqZWN0cyAoZW1wdHkgaWYgY29uZGl0aW9ucyBub3QgbWV0KVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXh0cmFBY3Rpb25zIChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBpbnRsOiBJbnRsU2hhcGUsXG4gIHF1ZXJ5SXRlbT86IFF1ZXJ5SXRlbVR5cGUsXG4gIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbik6IERhdGFBY3Rpb25bXSB7XG4gIC8vIE9ubHkgY3JlYXRlIHRoZSBhY3Rpb24gaWYgd2UgaGF2ZSBib3RoIGFuIG91dHB1dCBkYXRhIHNvdXJjZSBhbmQgaW50bCBvYmplY3RcbiAgaWYgKG91dHB1dERTICYmIGludGwpIHtcbiAgICByZXR1cm4gW2NyZWF0ZUFkZFRvTWFwQWN0aW9uKHdpZGdldElkLCBvdXRwdXREUywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXVxuICB9XG4gIFxuICByZXR1cm4gW11cbn1cblxuIiwiaW1wb3J0IHtcbiAgdHlwZSBRdWVyeUl0ZW1UeXBlLFxuICBDcmVhdGVUb29sVHlwZSxcbiAgVW5pdFR5cGUsXG4gIFNwYXRpYWxSZWxhdGlvbixcbiAgTGlzdERpcmVjdGlvbixcbiAgUGFnaW5nVHlwZSxcbiAgRmllbGRzVHlwZSxcbiAgU3ltYm9sVHlwZVxufSBmcm9tICcuL2NvbmZpZydcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfUVVFUllfSVRFTTogUGFydGlhbDxRdWVyeUl0ZW1UeXBlPiA9IHtcbiAgaWNvbjogbnVsbCxcbiAgZGlzcGxheUxhYmVsOiB0cnVlLFxuICBzcWxFeHByT2JqOiBudWxsLFxuICB1c2VBdHRyaWJ1dGVGaWx0ZXI6IHRydWUsXG4gIHVzZVNwYXRpYWxGaWx0ZXI6IHRydWUsXG4gIHNwYXRpYWxNYXBXaWRnZXRJZHM6IFtdLFxuICBzcGF0aWFsRmlsdGVyVHlwZXM6IFtdLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXM6IFtcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2ludCxcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2x5bGluZSxcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2x5Z29uLFxuICAgIENyZWF0ZVRvb2xUeXBlLlJlY3RhbmdsZSxcbiAgICBDcmVhdGVUb29sVHlwZS5DaXJjbGVcbiAgXSxcbiAgc3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyOiBmYWxzZSxcbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2U6IDAsXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXQ6IFVuaXRUeXBlLk1ldGVycyxcbiAgc3BhdGlhbFJlbGF0aW9uczogW1NwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RdLFxuICBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlczogW10sXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZVNlbGVjdFRvb2w6IGZhbHNlLFxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXI6IGZhbHNlLFxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZTogMCxcbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdDogVW5pdFR5cGUuTWV0ZXJzLFxuICByZXN1bHRMaXN0RGlyZWN0aW9uOiBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsLFxuICByZXN1bHRQYWdpbmdTdHlsZTogUGFnaW5nVHlwZS5NdWx0aVBhZ2UsXG4gIHJlc3VsdEZpZWxkc1R5cGU6IEZpZWxkc1R5cGUuUG9wdXBTZXR0aW5nLFxuICByZXN1bHRTeW1ib2xUeXBlOiBTeW1ib2xUeXBlLkRlZmF1bHRTeW1ib2wsXG4gIHJlc3VsdEN1c3RvbVN5bWJvbDoge1xuICAgIGFuZ2xlOiAwLFxuICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICBvdXRsaW5lOiB7XG4gICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICBzdHlsZTogJ2VzcmlTTFNTb2xpZCcsXG4gICAgICB0eXBlOiAnZXNyaVNMUycsXG4gICAgICB3aWR0aDogMVxuICAgIH0sXG4gICAgc2l6ZTogNixcbiAgICBzdHlsZTogJ2VzcmlTTVNDaXJjbGUnLFxuICAgIHR5cGU6ICdlc3JpU01TJyxcbiAgICB4b2Zmc2V0OiAwLFxuICAgIHlvZmZzZXQ6IDBcbiAgfSxcbiAgcmVzdWx0QWxsb3dDaGFuZ2VTeW1ib2w6IGZhbHNlLFxuICBhbGxvd0V4cG9ydDogZmFsc2UsXG4gIHNvcnRPcHRpb25zOiBbXSxcbiAgem9vbVRvU2VsZWN0ZWQ6IHRydWUsXG4gIGl0ZW1TaXplTWFwOiB7XG4gICAgYXJyYW5nZW1lbnRIb3Jpem9udGFsUG9wcGVyOiB7XG4gICAgICBtaW5TaXplOiB7IHdpZHRoOiAzMDAsIGhlaWdodDogMzAwIH0sXG4gICAgICBkZWZhdWx0U2l6ZTogeyB3aWR0aDogMzYwLCBoZWlnaHQ6IDQ4MCB9XG4gICAgfVxuICB9XG59XG5cblxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDF2MTRoMTRWMXptOS4wODIgMTNjLS4wMDUtLjAzNy0uMTEzLS4yNzQtLjEyMi0uMzA5YTEuNSAxLjUgMCAwIDAgLjcxOC0xLjI2NyAxLjIgMS4yIDAgMCAwLS4wNTMtLjM1OGMuMTUyLS4xNzYuMjYzLS4zODMuMzI2LS42MDdxLjA0Ni4wMDMuMDkzLjAwM2MuMy4wMDIuNTkzLS4wOTEuODM2LS4yNjZxLjA2LjA2Ni4xMjYuMTI0Yy40Mi40MTIuOTc3LjY1NCAxLjU2NC42OEgxNHYyaC0zLjkxOE0xNCAxMWgtLjQzYTEuNDYgMS40NiAwIDAgMS0uOTA2LS40MzNjLS4yNjQtLjIzLS4yNTgtLjc4Mi0uNjE3LS43ODItLjQ4MiAwLS41Mi42NzctMS4wMDMuNjc3LS4yMTkgMC0uMzgtLjE3Ny0uNTk5LS4xNzctLjE5MyAwLS40NDUuMTAyLS40NDUuMjkzdi41MDJjMCAuNDI0LS41MDYuNTA4LS41MDYuOTM0IDAgLjE3MS4xODQuMjM2LjE4NC40MSAwIC41OC0uODkzLjUwMi0uODkzIDEuMDggMCAuMTkxLjIxNS4zMDUuMjE1LjQ4NlYxNEg2LjM3NXEuMDg3LS4yNDMuMDktLjUwMmMwLS41NDctMS4wNDMtLjM5My0xLjIwNy0uNzItLjQwNy0uODEzLjY5My0xLjAyMi42OTMtMS42NzMgMC0uMTYtLjA4Mi0uNDg4LS4zMzQtLjUxMy0uMzUxLS4wMzUtLjQ0My4xNTQtLjc5Ny4xNTRhLjQwNi40MDYgMCAwIDEtLjQzNy0uMzZjMC0uMzg2LjMwOC0uNTY2LjMwOC0uOTUyIDAtLjI1LS4xMDItLjM5My0uMTAyLS42NDNhLjYyLjYyIDAgMCAxIC41OS0uNjQzYy4zMjMgMCAuNDY0LjI2NC42MTguNTRhLjY0LjY0IDAgMCAwIC42MTcuMzA4Yy40OSAwIC43OTgtLjYxLjc5OC0uOTc3YS40Ny40NyAwIDAgMSAuNDM3LS40ODhjLjM0NyAwIC40NzYuMzYuODI0LjM2LjU3IDAgLjU1LS43NTYgMS4wNTMtMS4wMy42MTgtLjMzMi40MzgtMS4wNTIuMzYtMS40NC0uMDMyLS4xNjkuMjktLjUuNDY0LS40ODcuNzIuMDUuNDEyLS41NC40MTItLjgyM3EwLS4wNzMuMDIyLS4xNDJjLjExMS0uMzMyLjU5NS0uNDM4LjU5NS0uODM2IDAtLjI4MS0uMjMzLS40MS0uMjMzLS42OTNhLjY1LjY1IDAgMCAxIC4yMi0uNDRIMTR6TTIgMTRWMmg4LjI3OGMtLjAxMy4wNzctLjEzMi4zNTYtLjEzMi40NCAwIC4xOTQuMDM4LjM4Ny4xMTIuNTY3YTEuNiAxLjYgMCAwIDAtLjQyMi42NDMgMS40IDEuNCAwIDAgMC0uMDc0LjQ0MiAxLjcgMS43IDAgMCAwLS41MzYuNDMgMS4zMiAxLjMyIDAgMCAwLS4zMiAxLjA5MXEuMDQ2LjIwNS4wNjYuNDE0YTIgMiAwIDAgMC0uNjQ5LjY3IDEuNDYgMS40NiAwIDAgMC0uNjc0LS4xNjYgMS40NSAxLjQ1IDAgMCAwLTEuMzgzIDEuMDg2IDEuNDQgMS40NCAwIDAgMC0xLjA4Ni0uNDY5IDEuNjIgMS42MiAwIDAgMC0xLjU5MSAxLjY0M2MwIC4yNTQuMTEzLjI5My4wODQuNTc0cy0uMjkuNTM1LS4yOSAxLjAyMmExLjM3IDEuMzcgMCAwIDAgLjk4NCAxLjI5IDEuNTggMS41OCAwIDAgMC0uMDAzIDEuNTQ5Yy4xNDMuMjg2LjYzNi43NzQuNTM0Ljc3NHpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQge1xyXG4gIFJlYWN0LFxyXG4gIGpzeCxcclxuICBob29rc1xyXG59IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU2VsZWN0LCBOdW1lcmljSW5wdXQsIGRlZmF1bHRNZXNzYWdlcyBhcyBqaW11VUlNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgZGlzdGFuY2U6IG51bWJlclxyXG4gIHVuaXQ6IFVuaXRUeXBlXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQnVmZmVySW5wdXQgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgZGlzdGFuY2UgPSAwLCB1bml0ID0gVW5pdFR5cGUuTWV0ZXJzLCBvbkJ1ZmZlckNoYW5nZSB9ID0gcHJvcHNcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGppbXVVSU1lc3NhZ2VzLCBkZWZhdWx0TWVzc2FnZSlcclxuICBjb25zdCBbZCwgc2V0RF0gPSBSZWFjdC51c2VTdGF0ZShkaXN0YW5jZSlcclxuICBjb25zdCBbdSwgc2V0VV0gPSBSZWFjdC51c2VTdGF0ZSh1bml0KVxyXG4gIGNvbnN0IHF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFF1ZXJ5VGFza0NvbnRleHQpXHJcbiAgY29uc3QgcmVzZXRTeW1ib2xSZWYgPSBSZWFjdC51c2VSZWYocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbClcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcclxuICAgIGlmIChkaXN0YW5jZSAhPT0gZCkge1xyXG4gICAgICBzZXREKGRpc3RhbmNlKVxyXG4gICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKHVuaXQgIT09IHUpIHtcclxuICAgICAgc2V0VSh1bml0KVxyXG4gICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKGNoYW5nZWQpIHtcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoZGlzdGFuY2UsIHVuaXQpXHJcbiAgICB9XHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xyXG4gIH0sIFtkaXN0YW5jZSwgdW5pdF0pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAmJiBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICE9PSByZXNldFN5bWJvbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQgPSBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sXHJcbiAgICAgIHNldEQoZGlzdGFuY2UpXHJcbiAgICAgIHNldFUodW5pdClcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoZGlzdGFuY2UsIHVuaXQpXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIGRpc3RhbmNlLCB1bml0LCBvbkJ1ZmZlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURpc3RhbmNlQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHZhbHVlKSA9PiB7XHJcbiAgICBzZXREKHZhbHVlKVxyXG4gIH0sIFtdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEaXN0YW5jZUFjY2VwdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKHZhbHVlKSA9PiB7XHJcbiAgICBzZXREKHZhbHVlKVxyXG4gICAgb25CdWZmZXJDaGFuZ2UodmFsdWUsIHUpXHJcbiAgfSwgW29uQnVmZmVyQ2hhbmdlLCB1XSlcclxuXHJcbiAgY29uc3QgaGFuZGxlQnVmZmVyVW5pdENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XHJcbiAgICBzZXRVKGUudGFyZ2V0LnZhbHVlKVxyXG4gICAgb25CdWZmZXJDaGFuZ2UoZCwgZS50YXJnZXQudmFsdWUpXHJcbiAgfSwgW29uQnVmZmVyQ2hhbmdlLCBkXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAgPE51bWVyaWNJbnB1dFxyXG4gICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfVxyXG4gICAgICAgIGNsYXNzTmFtZT0nbXItMSdcclxuICAgICAgICB2YWx1ZT17ZH1cclxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlRGlzdGFuY2VDaGFuZ2V9XHJcbiAgICAgICAgb25BY2NlcHRWYWx1ZT17aGFuZGxlRGlzdGFuY2VBY2NlcHRlZH1cclxuICAgICAgLz5cclxuICAgICAgPFNlbGVjdFxyXG4gICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd1bml0Jyl9XHJcbiAgICAgICAgdmFsdWU9e3V9XHJcbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUJ1ZmZlclVuaXRDaGFuZ2V9XHJcbiAgICAgID5cclxuICAgICAgICB7T2JqZWN0LnZhbHVlcyhVbml0VHlwZSkubWFwKCh2YWx1ZSkgPT4gKFxyXG4gICAgICAgICAgPG9wdGlvbiBrZXk9e3ZhbHVlfSB2YWx1ZT17dmFsdWV9PlxyXG4gICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoYHVuaXRfJHt2YWx1ZX1gKX1cclxuICAgICAgICAgIDwvb3B0aW9uPlxyXG4gICAgICAgICkpfVxyXG4gICAgICA8L1NlbGVjdD5cclxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgKVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuLy8gVGhpcyBmaWxlIGlzIGR1cGxpY2F0ZWQgZnJvbSAnLi4vLi4vLi4vLi4vZmVhdHVyZS1pbmZvL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvJ1xuaW1wb3J0IHsgUmVhY3QsIGNzcywganN4LCB0eXBlIERhdGFTb3VyY2UsIGluamVjdEludGwsIHR5cGUgSW50bFNoYXBlLCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFJpZ2h0RmlsbGVkIH0gZnJvbSAnamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQnXG5pbXBvcnQgeyBEb3duRmlsbGVkIH0gZnJvbSAnamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bidcblxuZXhwb3J0IGVudW0gTG9hZFN0YXR1cyB7XG4gIFBlbmRpbmcgPSAnUGVuZGluZycsXG4gIEZ1bGZpbGxlZCA9ICdGdWxmaWxsZWQnLFxuICBSZWplY3RlZCA9ICdSZWplY3RlZCdcbn1cblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZVxuICBncmFwaGljOiBfX2VzcmkuR3JhcGhpY1xuICBwb3B1cFRlbXBsYXRlOiBfX2VzcmkuUG9wdXBUZW1wbGF0ZVxuICBkZWZhdWx0UG9wdXBUZW1wbGF0ZTogX19lc3JpLlBvcHVwVGVtcGxhdGVcbiAgdG9nZ2xhYmxlPzogYm9vbGVhblxuICBleHBhbmRCeURlZmF1bHQ/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGxvYWRTdGF0dXM6IExvYWRTdGF0dXNcbiAgc2hvd0NvbnRlbnQ6IGJvb2xlYW5cbn1cblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gIC5lc3JpLXdpZGdldF9faGVhZGluZyB7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbSAhaW1wb3J0YW50O1xuICAgIGZvbnQtd2VpZ2h0OiA1MDAgIWltcG9ydGFudDtcbiAgICBtYXJnaW46IDA7XG4gICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLXRleHQpO1xuICB9XG5cbiAgLmVzcmktZmVhdHVyZV9fY29udGVudC1lbGVtZW50IHtcbiAgICBwYWRkaW5nOiAwO1xuICB9XG5cbiAgLmppbXUtYnRuLmV4cGFuZGVkIHtcbiAgICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0O1xuICB9XG4gIFxuICAvLyBMYXJnZXIgZXhwYW5kL2NvbGxhcHNlIGJ1dHRvbiBmb3IgYmV0dGVyIHRvdWNoIHRhcmdldHNcbiAgLmppbXUtYnRuW2FyaWEtbGFiZWwqPVwiZXhwYW5kXCJdLFxuICAuamltdS1idG5bYXJpYS1sYWJlbCo9XCJjb2xsYXBzZVwiXSB7XG4gICAgbWluLXdpZHRoOiAzMnB4O1xuICAgIG1pbi1oZWlnaHQ6IDMycHg7XG4gICAgcGFkZGluZzogNnB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgfVxuXG4gIC5lc3JpLWZlYXR1cmUuZXNyaS13aWRnZXQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICB9XG5gXG5cbmludGVyZmFjZSBFeHRyYVByb3BzIHtcbiAgaW50bDogSW50bFNoYXBlXG59XG5cbmNsYXNzIEZlYXR1cmVJbmZvIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcyAmIEV4dHJhUHJvcHMsIFN0YXRlPiB7XG4gIHByaXZhdGUgRmVhdHVyZTogdHlwZW9mIF9fZXNyaS5GZWF0dXJlXG4gIHByaXZhdGUgZmVhdHVyZTogX19lc3JpLkZlYXR1cmVcbiAgcHJpdmF0ZSByZWFkb25seSBmZWF0dXJlQ29udGFpbmVyOiBSZWFjdC5SZWZPYmplY3Q8SFRNTElucHV0RWxlbWVudCB8IG51bGw+XG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSwgZXhwYW5kQnlEZWZhdWx0IH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgcmVjb3JkSWQgPSB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lk9CSkVDVElEIHx8IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8ub2JqZWN0aWQgfHwgJ3Vua25vd24nXG4gICAgY29uc3QgaW5pdGlhbFNob3dDb250ZW50ID0gIXRvZ2dsYWJsZSB8fCBleHBhbmRCeURlZmF1bHRcbiAgICBcbiAgICBjb25zb2xlLmxvZygnW0ZlYXR1cmVJbmZvXSBjb25zdHJ1Y3RvcicsIHtcbiAgICAgIGV2ZW50OiAnRmVhdHVyZUluZm8tY29uc3RydWN0b3InLFxuICAgICAgcmVjb3JkSWQsXG4gICAgICB0b2dnbGFibGUsXG4gICAgICBleHBhbmRCeURlZmF1bHQsXG4gICAgICBpbml0aWFsU2hvd0NvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIHRoaXMuZmVhdHVyZUNvbnRhaW5lciA9IFJlYWN0LmNyZWF0ZVJlZigpXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHNob3dDb250ZW50OiBpbml0aWFsU2hvd0NvbnRlbnQsXG4gICAgICBsb2FkU3RhdHVzOiBMb2FkU3RhdHVzLlBlbmRpbmdcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlKClcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAocHJldlByb3BzOiBQcm9wcykge1xuICAgIGlmICh0aGlzLmZlYXR1cmUpIHtcbiAgICAgIGlmIChwcmV2UHJvcHMucG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB8fFxuICAgICAgICBwcmV2UHJvcHMuZ3JhcGhpYyAhPT0gdGhpcy5wcm9wcy5ncmFwaGljKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveUZlYXR1cmUoKVxuICAgICAgICB0aGlzLmNyZWF0ZUZlYXR1cmUoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlLnZpc2libGVFbGVtZW50cyA9IHRoaXMuZ2V0VmlzaWJsZUVsZW1lbnRzKClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3luYyBleHBhbmRCeURlZmF1bHQgcHJvcCBjaGFuZ2VzICh3aGVuIHVzZXIgY2xpY2tzIEV4cGFuZCBBbGwvQ29sbGFwc2UgQWxsKVxuICAgIC8vIFRoaXMgZW5zdXJlcyBhbGwgaXRlbXMgcmVzcGVjdCB0aGUgZ2xvYmFsIGV4cGFuZC9jb2xsYXBzZSBzdGF0ZVxuICAgIGlmIChwcmV2UHJvcHMuZXhwYW5kQnlEZWZhdWx0ICE9PSB0aGlzLnByb3BzLmV4cGFuZEJ5RGVmYXVsdCkge1xuICAgICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSwgZXhwYW5kQnlEZWZhdWx0IH0gPSB0aGlzLnByb3BzXG4gICAgICBjb25zdCByZWNvcmRJZCA9IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8uT0JKRUNUSUQgfHwgdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5vYmplY3RpZCB8fCAndW5rbm93bidcbiAgICAgIFxuICAgICAgLy8gTG9nIGV4cGFuZEJ5RGVmYXVsdCBjaGFuZ2VzICh1c2luZyBjb25zb2xlLmxvZyBzaW5jZSBkZWJ1Z0xvZ2dlciBtaWdodCBub3QgYmUgYXZhaWxhYmxlIGhlcmUpXG4gICAgICBjb25zb2xlLmxvZygnW0ZlYXR1cmVJbmZvXSBleHBhbmRCeURlZmF1bHQgY2hhbmdlZCcsIHtcbiAgICAgICAgZXZlbnQ6ICdleHBhbmRCeURlZmF1bHQtcHJvcC1jaGFuZ2VkJyxcbiAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgIHByZXZFeHBhbmRCeURlZmF1bHQ6IHByZXZQcm9wcy5leHBhbmRCeURlZmF1bHQsXG4gICAgICAgIG5ld0V4cGFuZEJ5RGVmYXVsdDogZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgICB0b2dnbGFibGUsXG4gICAgICAgIGN1cnJlbnRTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgd2lsbFVwZGF0ZVN0YXRlOiB0b2dnbGFibGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKHRvZ2dsYWJsZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd0NvbnRlbnQ6IGV4cGFuZEJ5RGVmYXVsdCB9LCAoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tGZWF0dXJlSW5mb10gc3RhdGUgdXBkYXRlZCBhZnRlciBleHBhbmRCeURlZmF1bHQgY2hhbmdlJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdGZWF0dXJlSW5mby1zdGF0ZS11cGRhdGVkJyxcbiAgICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgICAgbmV3U2hvd0NvbnRlbnQ6IHRoaXMuc3RhdGUuc2hvd0NvbnRlbnQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBMb2cgYWxsIGNvbXBvbmVudERpZFVwZGF0ZSBjYWxscyB0byB0cmFjayByZW1vdW50c1xuICAgIGNvbnN0IHJlY29yZElkID0gdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5PQkpFQ1RJRCB8fCB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lm9iamVjdGlkIHx8ICd1bmtub3duJ1xuICAgIGlmIChwcmV2UHJvcHMuZ3JhcGhpYyAhPT0gdGhpcy5wcm9wcy5ncmFwaGljIHx8IFxuICAgICAgICBwcmV2UHJvcHMucG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSkge1xuICAgICAgY29uc29sZS5sb2coJ1tGZWF0dXJlSW5mb10gY29tcG9uZW50RGlkVXBkYXRlIC0gcHJvcHMgY2hhbmdlZCB0aGF0IHRyaWdnZXIgcmVjcmVhdGUnLCB7XG4gICAgICAgIGV2ZW50OiAnRmVhdHVyZUluZm8tcHJvcHMtY2hhbmdlZC1yZWNyZWF0ZScsXG4gICAgICAgIHJlY29yZElkLFxuICAgICAgICBncmFwaGljQ2hhbmdlZDogcHJldlByb3BzLmdyYXBoaWMgIT09IHRoaXMucHJvcHMuZ3JhcGhpYyxcbiAgICAgICAgcG9wdXBUZW1wbGF0ZUNoYW5nZWQ6IHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUsXG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlQ2hhbmdlZDogcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlLFxuICAgICAgICBleHBhbmRCeURlZmF1bHQ6IHRoaXMucHJvcHMuZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgICBjdXJyZW50U2hvd0NvbnRlbnQ6IHRoaXMuc3RhdGUuc2hvd0NvbnRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBkZXN0cm95RmVhdHVyZSAoKSB7XG4gICAgdGhpcy5mZWF0dXJlICYmICF0aGlzLmZlYXR1cmUuZGVzdHJveWVkICYmIHRoaXMuZmVhdHVyZS5kZXN0cm95KClcbiAgfVxuXG4gIGdldFZpc2libGVFbGVtZW50cyAoKSB7XG4gICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgc2hvd0NvbnRlbnQgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCBleHBhbmRlZCA9IHRvZ2dsYWJsZSA/IHNob3dDb250ZW50IDogdHJ1ZVxuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogdHJ1ZSxcbiAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgZmllbGRzOiBleHBhbmRlZCxcbiAgICAgICAgdGV4dDogZXhwYW5kZWQsXG4gICAgICAgIG1lZGlhOiBleHBhbmRlZCxcbiAgICAgICAgYXR0YWNobWVudHM6IGV4cGFuZGVkXG4gICAgICB9LFxuICAgICAgbGFzdEVkaXRlZEluZm86IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgY3JlYXRlRmVhdHVyZSAoKSB7XG4gICAgbGV0IGZlYXR1cmVNb2R1bGVQcm9taXNlXG4gICAgaWYgKHRoaXMuRmVhdHVyZSkge1xuICAgICAgZmVhdHVyZU1vZHVsZVByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKVxuICAgIH0gZWxzZSB7XG4gICAgICBmZWF0dXJlTW9kdWxlUHJvbWlzZSA9IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xuICAgICAgICAnZXNyaS93aWRnZXRzL0ZlYXR1cmUnXG4gICAgICBdKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgICAgICBbXG4gICAgICAgICAgdGhpcy5GZWF0dXJlXG4gICAgICAgIF0gPSBtb2R1bGVzXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gZmVhdHVyZU1vZHVsZVByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBjb21wb25lbnQgaXMgc3RpbGwgbW91bnRlZCBiZWZvcmUgdHJ5aW5nIHRvIGFwcGVuZFxuICAgICAgLy8gVGhpcyBwcmV2ZW50cyBlcnJvcnMgd2hlbiBjb21wb25lbnQgdW5tb3VudHMgZHVyaW5nIGFzeW5jIG1vZHVsZSBsb2FkaW5nXG4gICAgICBpZiAoIXRoaXMuZmVhdHVyZUNvbnRhaW5lci5jdXJyZW50KSB7XG4gICAgICAgIC8vIENvbXBvbmVudCB3YXMgdW5tb3VudGVkLCBhYm9ydFxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQgJiYgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnamltdS13aWRnZXQnXG4gICAgICB0aGlzLmZlYXR1cmVDb250YWluZXIuY3VycmVudC5hcHBlbmRDaGlsZChjb250YWluZXIpXG5cbiAgICAgIGNvbnN0IG9yaWdpbkRTID0gdGhpcy5wcm9wcy5kYXRhU291cmNlLmdldE9yaWdpbkRhdGFTb3VyY2VzKClcbiAgICAgIGNvbnN0IHJvb3REYXRhU291cmNlID0gb3JpZ2luRFM/LlswXT8uZ2V0Um9vdERhdGFTb3VyY2UoKVxuXG4gICAgICB0aGlzLmRlc3Ryb3lGZWF0dXJlKClcbiAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5wcm9wcy5ncmFwaGljLmxheWVyIGFzIF9fZXNyaS5GZWF0dXJlTGF5ZXJcbiAgICAgIGlmICh0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5ncmFwaGljLnBvcHVwVGVtcGxhdGUgPSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGVcbiAgICAgIH0gZWxzZSBpZiAobGF5ZXIpIHtcbiAgICAgICAgLy8gc2V0IHBvcHVwVGVtcGxhdGUgd2l0aCBsYXllcidzIHBvcHVwVGVtcGxhdGUgb3IgZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgICAgdGhpcy5wcm9wcy5ncmFwaGljLnBvcHVwVGVtcGxhdGUgPSBsYXllci5wb3B1cFRlbXBsYXRlID8/IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHJvcHMuZ3JhcGhpYy5wb3B1cFRlbXBsYXRlID0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgfVxuICAgICAgaWYgKGxheWVyICYmICFsYXllci5wb3B1cFRlbXBsYXRlKSB7XG4gICAgICAgIGxheWVyLnBvcHVwVGVtcGxhdGUgPSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHwgdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgfVxuICAgICAgdGhpcy5mZWF0dXJlID0gbmV3IHRoaXMuRmVhdHVyZSh7XG4gICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZUVuYWJsZWQ6IHRydWUsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgc3BhdGlhbFJlZmVyZW5jZTogdGhpcy5wcm9wcy5kYXRhU291cmNlPy5sYXllcj8uc3BhdGlhbFJlZmVyZW5jZSB8fCBudWxsLFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgIG1hcDogcm9vdERhdGFTb3VyY2U/Lm1hcCB8fCBudWxsLFxuICAgICAgICBncmFwaGljOiB0aGlzLnByb3BzLmdyYXBoaWMsXG4gICAgICAgIHZpc2libGVFbGVtZW50czogdGhpcy5nZXRWaXNpYmxlRWxlbWVudHMoKVxuICAgICAgfSlcbiAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBsb2FkU3RhdHVzOiBMb2FkU3RhdHVzLkZ1bGZpbGxlZCB9KVxuICAgIH0pXG4gIH1cblxuICB0b2dnbGVFeHBhbmRlZCA9IChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93Q29udGVudDogIXRoaXMuc3RhdGUuc2hvd0NvbnRlbnQgfSlcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSwgaW50bCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgc2hvd0NvbnRlbnQgfSA9IHRoaXMuc3RhdGVcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZlYXR1cmUtaW5mby1jb21wb25lbnQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBwLTEnIGNzcz17c3R5bGV9PlxuICAgICAgICB7dG9nZ2xhYmxlICYmIChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtpbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogc2hvd0NvbnRlbnQgPyAnY29sbGFwc2UnIDogJ2V4cGFuZCcgfSl9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2ppbXUtb3V0bGluZS1pbnNpZGUgZmxleC1zaHJpbmstMCcsIHsgZXhwYW5kZWQ6IHNob3dDb250ZW50IH0pfVxuICAgICAgICAgICAgdmFyaWFudD0ndGV4dCdcbiAgICAgICAgICAgIGNvbG9yPSdpbmhlcml0J1xuICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZUV4cGFuZGVkfVxuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIG1pbi13aWR0aDogMzJweDtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMzJweDtcbiAgICAgICAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3Nob3dDb250ZW50ID8gPERvd25GaWxsZWQgc2l6ZT0nbScvPiA6IDxSaWdodEZpbGxlZCBzaXplPSdtJyBhdXRvRmxpcC8+fVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC1ncm93LTEnIHJlZj17dGhpcy5mZWF0dXJlQ29udGFpbmVyfSAvPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGluamVjdEludGwoRmVhdHVyZUluZm8pXG5cblxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcywgdHlwZSBJbW11dGFibGVBcnJheSwgbG9kYXNoLCBsb2FkQXJjR0lTSlNBUElNb2R1bGUsIHV0aWxzLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcclxuaW1wb3J0IHsgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHR5cGUgeyBDcmVhdGVUb29sVHlwZSwgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCB7IEludGVyYWN0aXZlRHJhdyB9IGZyb20gJy4vaW50ZXJhY3RpdmUtZHJhdy10b29sJ1xyXG5pbXBvcnQgeyBCdWZmZXJJbnB1dCB9IGZyb20gJy4vYnVmZmVyLWlucHV0J1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgbWFwV2lkZ2V0SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XHJcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xyXG4gIGNyZWF0ZVRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XHJcbiAgZW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgYnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGJ1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG4gIG9uR2VvbWV0cnlDaGFuZ2U6IChnZW9tOiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2VvbWV0cnlGcm9tRHJhdyAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvbkdlb21ldHJ5Q2hhbmdlLCBjcmVhdGVUb29sVHlwZXMsIG1hcFdpZGdldElkcywgZW5hYmxlQnVmZmVyLCBidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdCwgb25CdWZmZXJDaGFuZ2UsIHdpZGdldElkIH0gPSBwcm9wc1xyXG4gIGNvbnN0IFtqaW11TWFwVmlldywgc2V0SmltdU1hcFZpZXddID0gUmVhY3QudXNlU3RhdGU8SmltdU1hcFZpZXc+KG51bGwpXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihqaW11VUlNZXNzYWdlcywgZGVmYXVsdE1lc3NhZ2UpXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG4gIGNvbnN0IGdldExheWVyRnVuUmVmID0gUmVhY3QudXNlUmVmPCgpID0+IF9fZXNyaS5HcmFwaGljc0xheWVyPihudWxsKVxyXG4gIGNvbnN0IGJ1ZmZlck9wZXJhdG9yUmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5idWZmZXJPcGVyYXRvcj4obnVsbClcclxuICBjb25zdCBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5nZW9kZXNpY0J1ZmZlck9wZXJhdG9yPihudWxsKVxyXG4gIGNvbnN0IGdlb21ldHJ5U2VydmljZVJlZiA9IFJlYWN0LnVzZVJlZjx7IGdlb21ldHJ5U2VydmljZTogX19lc3JpLmdlb21ldHJ5U2VydmljZSwgYnVmZmVyUGFyYW1ldGVyczogdHlwZW9mIF9fZXNyaS5CdWZmZXJQYXJhbWV0ZXJzIH0+KG51bGwpXHJcbiAgY29uc3QgZ2VvbWV0cnlSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLkdlb21ldHJ5PihudWxsKVxyXG4gIGNvbnN0IGJ1ZmZlckRpc3RhbmNlUmVmID0gUmVhY3QudXNlUmVmKGJ1ZmZlckRpc3RhbmNlKVxyXG4gIGNvbnN0IGJ1ZmZlclVuaXRSZWYgPSBSZWFjdC51c2VSZWYoYnVmZmVyVW5pdClcclxuICBjb25zdCBidWZmZXJlZEdyYXBoaWNSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLkdyYXBoaWM+KG51bGwpXHJcblxyXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xyXG4gICAgaWYgKGVuYWJsZUJ1ZmZlcikge1xyXG4gICAgICAvLyBQYXJlbnQgY29tcG9uZW50IHF1ZXJ5LXRhc2stc3BhdGlhbC1mb3JtIHdpbGwgcmVzZXQgYnVmZmVyIHBhcmFtZXRlciB3aGVuIGZpbHRlciB0eXBlIGNoYW5nZXMsXHJcbiAgICAgIC8vIHNvIGRlZmVyIHRoZSBpbml0IGJ1ZmZlciBvcHRpb24gaW4gb3JkZXIgbm90IHRvIGJlIG92ZXJyaWRlIGJ5IGl0cyBwYXJlbnQuXHJcbiAgICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XHJcbiAgICAgICAgb25CdWZmZXJDaGFuZ2UoYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcclxuICAgICAgJ2VzcmkvR3JhcGhpYydcclxuICAgIF0pLnRoZW4oKG1vZHVsZXMpID0+IHtcclxuICAgICAgY29uc3QgR3JhcGhpYyA9IG1vZHVsZXNbMF1cclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQgPSBuZXcgR3JhcGhpYyh7XHJcbiAgICAgICAgc3ltYm9sOiB7XHJcbiAgICAgICAgICB0eXBlOiAnc2ltcGxlLWZpbGwnLFxyXG4gICAgICAgICAgY29sb3I6IFs1MSwgNTEsIDIwNCwgMC41XSxcclxuICAgICAgICAgIHN0eWxlOiAnc29saWQnLFxyXG4gICAgICAgICAgb3V0bGluZToge1xyXG4gICAgICAgICAgICBjb2xvcjogWzUxLCA1MSwgMjA0LCAwLjhdLFxyXG4gICAgICAgICAgICB3aWR0aDogMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgYXBwbHlCdWZmZXJFZmZlY3QgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWdlb21ldHJ5UmVmLmN1cnJlbnQgfHwgIWVuYWJsZUJ1ZmZlciB8fCBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50ID09PSAwKSB7XHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gbnVsbFxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGUgZW5kIHVzZXIgdXNlcyBhIHBvaW50IG9yIGxpbmUgcXVlcnkgZ2VvbWV0cnksIHRoZW4gdGhlIG5lZ2F0aXZlIGJ1ZmZlciB3aWxsIG5vdCB3b3JrIChzYW1lIGVmZmVjdCBhcyB0aGVyZSBpcyBubyBidWZmZXIpXHJcbiAgICBjb25zdCBpc1BvaW50TmVnYXRpdmVCdWZmZXIgPSAoZ2VvbWV0cnlSZWYuY3VycmVudD8udHlwZSA9PT0gJ3BvaW50JyB8fCBnZW9tZXRyeVJlZi5jdXJyZW50Py50eXBlID09PSAnbXVsdGlwb2ludCcpICYmIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPCAwXHJcbiAgICBjb25zdCBpc0xpbmVOZWdhdGl2ZUJ1ZmZlciA9IGdlb21ldHJ5UmVmLmN1cnJlbnQ/LnR5cGUgPT09ICdwb2x5bGluZScgJiYgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA8IDBcclxuICAgIGlmIChpc1BvaW50TmVnYXRpdmVCdWZmZXIgfHwgaXNMaW5lTmVnYXRpdmVCdWZmZXIpIHtcclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBudWxsXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGdlb21ldHJ5ID0gZ2VvbWV0cnlSZWYuY3VycmVudFxyXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmFyY2dpcy5jb20vamF2YXNjcmlwdC9sYXRlc3QvYXBpLXJlZmVyZW5jZS9lc3JpLWdlb21ldHJ5LWdlb21ldHJ5RW5naW5lLmh0bWwjYnVmZmVyXHJcbiAgICBpZiAoZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT8uaXNHZW9ncmFwaGljICYmICFnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLmlzV0dTODQpIHtcclxuICAgICAgY29uc3Qgc2VydmljZVVybCA9IHV0aWxzLmdldEdlb21ldHJ5U2VydmljZSgpXHJcbiAgICAgIGlmICghZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBjb25zdCBtb2R1bGVzID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXHJcbiAgICAgICAgICAnZXNyaS9yZXN0L2dlb21ldHJ5U2VydmljZScsXHJcbiAgICAgICAgICAnZXNyaS9yZXN0L3N1cHBvcnQvQnVmZmVyUGFyYW1ldGVycydcclxuICAgICAgICBdKVxyXG4gICAgICAgIGdlb21ldHJ5U2VydmljZVJlZi5jdXJyZW50ID0ge1xyXG4gICAgICAgICAgZ2VvbWV0cnlTZXJ2aWNlOiBtb2R1bGVzWzBdLFxyXG4gICAgICAgICAgYnVmZmVyUGFyYW1ldGVyczogbW9kdWxlc1sxXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zdCB7IGdlb21ldHJ5U2VydmljZSwgYnVmZmVyUGFyYW1ldGVyczogQnVmZmVyUGFyYW1ldGVycyB9ID0gZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnRcclxuICAgICAgY29uc3QgcG9seWdvbnMgPSBhd2FpdCBnZW9tZXRyeVNlcnZpY2UuYnVmZmVyKHNlcnZpY2VVcmwsIG5ldyBCdWZmZXJQYXJhbWV0ZXJzKHtcclxuICAgICAgICBkaXN0YW5jZXM6IFtidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50XSxcclxuICAgICAgICB1bml0OiBsb2Rhc2gua2ViYWJDYXNlKGJ1ZmZlclVuaXRSZWYuY3VycmVudCkgYXMgYW55LFxyXG4gICAgICAgIGdlb2Rlc2ljOiB0cnVlLFxyXG4gICAgICAgIGJ1ZmZlclNwYXRpYWxSZWZlcmVuY2U6IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UsXHJcbiAgICAgICAgb3V0U3BhdGlhbFJlZmVyZW5jZTogZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSxcclxuICAgICAgICBnZW9tZXRyaWVzOiBbZ2VvbWV0cnldXHJcbiAgICAgIH0pKVxyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IHBvbHlnb25zWzBdXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT8uaXNXR1M4NCB8fCBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc1dlYk1lcmNhdG9yKSB7XHJcbiAgICAgICAgaWYgKCFnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZSgnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvZ2VvZGVzaWNCdWZmZXJPcGVyYXRvcicpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmlzTG9hZGVkKCkpIHtcclxuICAgICAgICAgIGF3YWl0IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5sb2FkKClcclxuICAgICAgICB9XHJcbiAgICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuZXhlY3V0ZShcclxuICAgICAgICAgIGdlb21ldHJ5IGFzIF9fZXNyaS5HZW9tZXRyeVVuaW9uLFxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdW5pdDogbG9kYXNoLmtlYmFiQ2FzZShidWZmZXJVbml0UmVmLmN1cnJlbnQpIGFzIGFueVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIWJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGUoJ2VzcmkvZ2VvbWV0cnkvb3BlcmF0b3JzL2J1ZmZlck9wZXJhdG9yJylcclxuICAgICAgICB9XHJcbiAgICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBidWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmV4ZWN1dGUoXHJcbiAgICAgICAgICBnZW9tZXRyeSBhcyBfX2VzcmkuR2VvbWV0cnlVbmlvbixcclxuICAgICAgICAgIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHVuaXQ6IGxvZGFzaC5rZWJhYkNhc2UoYnVmZmVyVW5pdFJlZi5jdXJyZW50KSBhcyBhbnlcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbZW5hYmxlQnVmZmVyXSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KCkucmVtb3ZlQWxsKClcclxuICAgICAgb25HZW9tZXRyeUNoYW5nZShudWxsKVxyXG4gICAgfVxyXG4gIH0sIFtxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sLCBvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykgPT4ge1xyXG4gICAgLy8gY2xlYXIgZHJhd2luZyBncmFwaGljcyBiZWZvcmUgc3dpdGNoaW5nIG1hcCB2aWV3XHJcbiAgICBjb25zdCBsYXllciA9IGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCgpXHJcbiAgICBpZiAobGF5ZXIpIHtcclxuICAgICAgbGF5ZXIucmVtb3ZlQWxsKClcclxuICAgICAgb25HZW9tZXRyeUNoYW5nZShudWxsKVxyXG4gICAgfVxyXG4gICAgc2V0SmltdU1hcFZpZXcoamltdU1hcFZpZXc/LnZpZXcgIT0gbnVsbCA/IGppbXVNYXBWaWV3IDogbnVsbClcclxuICB9LCBbb25HZW9tZXRyeUNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUJ1ZmZlckNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChkaXN0YW5jZSwgdW5pdCkgPT4ge1xyXG4gICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA9IGRpc3RhbmNlXHJcbiAgICBidWZmZXJVbml0UmVmLmN1cnJlbnQgPSB1bml0XHJcbiAgICBhcHBseUJ1ZmZlckVmZmVjdCgpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIGFwcGx5QnVmZmVyRWZmZWN0XSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRHJhd0VuZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChncmFwaGljLCBnZXRMYXllckZ1biwgY2xlYXJBZnRlckFwcGx5KSA9PiB7XHJcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ID0gZ2V0TGF5ZXJGdW5cclxuICAgIGNvbnN0IGxheWVyID0gZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KClcclxuICAgIC8vIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgZ2VvbWV0cnkgaXMgdGhlIHNhbWUgYXMgdGhlIHByZXZpb3VzIG9uZSwgb25seSB0aGUgY2xlYXJBZnRlckFwcGx5IGlzIGNoYW5nZWQuXHJcbiAgICBpZiAoZ2VvbWV0cnlSZWYuY3VycmVudCAhPT0gZ3JhcGhpYz8uZ2VvbWV0cnkpIHtcclxuICAgICAgZ2VvbWV0cnlSZWYuY3VycmVudCA9IGdyYXBoaWM/Lmdlb21ldHJ5XHJcbiAgICAgIGFwcGx5QnVmZmVyRWZmZWN0KCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgaWYgKGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5KSB7XHJcbiAgICAgICAgICBsYXllcj8uYWRkKGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50KVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIG9uR2VvbWV0cnlDaGFuZ2UoZ3JhcGhpYz8uZ2VvbWV0cnksIGxheWVyLCBncmFwaGljLCBjbGVhckFmdGVyQXBwbHkpXHJcbiAgfSwgW29uR2VvbWV0cnlDaGFuZ2UsIGFwcGx5QnVmZmVyRWZmZWN0XSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAge1xyXG4gICAgICAgIG1hcFdpZGdldElkcz8ubWFwKChtYXBXaWRnZXRJZCwgeCkgPT4gKFxyXG4gICAgICAgICAgPEppbXVNYXBWaWV3Q29tcG9uZW50XHJcbiAgICAgICAgICAgIGtleT17eH0gdXNlTWFwV2lkZ2V0SWQ9e21hcFdpZGdldElkfSBvbkFjdGl2ZVZpZXdDaGFuZ2U9e2hhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSlcclxuICAgICAgfVxyXG4gICAgICB7amltdU1hcFZpZXc/LnZpZXcgJiYgKFxyXG4gICAgICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAgICAgIDxJbnRlcmFjdGl2ZURyYXdcclxuICAgICAgICAgICAgamltdU1hcFZpZXc9e2ppbXVNYXBWaWV3fVxyXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XHJcbiAgICAgICAgICAgIHRvb2xUeXBlcz17Y3JlYXRlVG9vbFR5cGVzfVxyXG4gICAgICAgICAgICBvbkRyYXdFbmQ9e2hhbmRsZURyYXdFbmR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAge2VuYWJsZUJ1ZmZlciAmJiAoXHJcbiAgICAgICAgICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGNsYXNzTmFtZT0ndGl0bGUzJyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX0gY3NzPXtjc3NgbWFyZ2luLXRvcDogMC43NXJlbTtgfT5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZSc+e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfTwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggbXQtMSc+XHJcbiAgICAgICAgICAgICAgICA8QnVmZmVySW5wdXQgZGlzdGFuY2U9e2J1ZmZlckRpc3RhbmNlfSB1bml0PXtidWZmZXJVbml0fSBvbkJ1ZmZlckNoYW5nZT17aGFuZGxlQnVmZmVyQ2hhbmdlfS8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICApfVxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAgUmVhY3RSZWR1eCxcclxuICBqc3gsXHJcbiAgY3NzLFxyXG4gIEltbXV0YWJsZSxcclxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxyXG4gIHR5cGUgVXNlRGF0YVNvdXJjZSxcclxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxyXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxyXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXHJcbiAgaG9va3MsXHJcbiAgdHlwZSBEYXRhU291cmNlLFxyXG4gIHR5cGUgSU1TdGF0ZSxcclxuICBEYXRhU291cmNlU3RhdHVzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIE9wdGlvbiwgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgeyBCdWZmZXJJbnB1dCB9IGZyb20gJy4vYnVmZmVyLWlucHV0J1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuY29uc3QgbWFyZ2luU3R5bGUgPSBjc3NgbWFyZ2luLXRvcDogMC43NXJlbTtgXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNwYXRpYWxSZWxhdGlvbnM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxSZWxhdGlvbj5cclxuICB1c2VEYXRhU291cmNlczogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT5cclxuICB1c2VSdW50aW1lRGF0YTogYm9vbGVhblxyXG4gIGVuYWJsZUJ1ZmZlcjogYm9vbGVhblxyXG4gIGJ1ZmZlckRpc3RhbmNlOiBudW1iZXJcclxuICBidWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIG9uU2VsZWN0aW9uQ2hhbmdlOiAoZ2VvbXM6IF9fZXNyaS5HZW9tZXRyeVtdKSA9PiB2b2lkXHJcbiAgb25SZWxhdGlvbkNoYW5nZTogKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB2b2lkXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSdW50aW1lRGF0YVNvdXJjZSAoKTogeyBbZHNJZDogc3RyaW5nXTogRGF0YVNvdXJjZSB9IHtcclxuICBjb25zdCByZXN1bHQgPSB7fVxyXG4gIGxldCBub3RFbXB0eSA9IGZhbHNlXHJcbiAgY29uc3QgZHNNYXAgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2VzKClcclxuICBPYmplY3Qua2V5cyhkc01hcCkuZm9yRWFjaChkc0lkID0+IHtcclxuICAgIGNvbnN0IGRzID0gZHNNYXBbZHNJZF1cclxuICAgIC8vIG9ubHkgaW5jbHVkZSB0aGUgZHMgdGhhdCBoYXMgZ2VvbWV0cnlcclxuICAgIGlmIChkcy5nZXRHZW9tZXRyeVR5cGUoKSAhPSBudWxsICYmICFkcy5pc0luQXBwQ29uZmlnKCkgJiYgZHMuZ2V0TWFpbkRhdGFTb3VyY2UoKS5pZCA9PT0gZHNJZCAmJiAhZHMuZ2V0RGF0YVNvdXJjZUpzb24oKS5pc091dHB1dEZyb21XaWRnZXQpIHtcclxuICAgICAgcmVzdWx0W2RzSWRdID0gZHNcclxuICAgICAgbm90RW1wdHkgPSB0cnVlXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIG5vdEVtcHR5ID8gcmVzdWx0IDogbnVsbFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2VvbWV0cnlGcm9tRGF0YVNvdXJjZSAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvblNlbGVjdGlvbkNoYW5nZSwgdXNlRGF0YVNvdXJjZXMgPSBbXSwgdXNlUnVudGltZURhdGEsIHNwYXRpYWxSZWxhdGlvbnMsIGVuYWJsZUJ1ZmZlciwgYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQsIG9uQnVmZmVyQ2hhbmdlLCBvblJlbGF0aW9uQ2hhbmdlIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oamltdVVJTWVzc2FnZXMsIGRlZmF1bHRNZXNzYWdlKVxyXG4gIGNvbnN0IFtjdXJyZW50RGF0YVNvdXJjZSwgc2V0Q3VycmVudERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGUodXNlRGF0YVNvdXJjZXNbMF0pXHJcbiAgY29uc3QgW3J1bnRpbWVEYXRhU291cmNlLCBzZXRSdW50aW1lRGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPigpXHJcbiAgY29uc3QgW2NvdW50LCBzZXRDb3VudF0gPSBSZWFjdC51c2VTdGF0ZSgwKVxyXG4gIGNvbnN0IFtjdXJyZW50UmVsYXRpb24sIHNldEN1cnJlbnRSZWxhdGlvbl0gPSBSZWFjdC51c2VTdGF0ZShzcGF0aWFsUmVsYXRpb25zPy5bMF0pXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG4gIGNvbnN0IHRyYW5zbGF0ZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKClcclxuXHJcbiAgY29uc3Qgc3BhdGlhbFJlbGF0aW9uT3B0aW9uczogQXJyYXk8eyB2YWx1ZTogc3RyaW5nLCBsYWJlbDogc3RyaW5nIH0+ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoU3BhdGlhbFJlbGF0aW9uKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gKHtcclxuICAgICAgdmFsdWUsXHJcbiAgICAgIGxhYmVsOiBnZXRJMThuTWVzc2FnZShgc3BhdGlhbFJlbGF0aW9uXyR7a2V5fWApXHJcbiAgICB9KSlcclxuICB9LCBbZ2V0STE4bk1lc3NhZ2VdKVxyXG5cclxuICBjb25zdCBsb2FkZWRVc2VEYXRhU291cmNlcyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBjb25zdCBsb2FkZWQgPSBbXVxyXG4gICAgdXNlRGF0YVNvdXJjZXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBpZiAoc3RhdGUuZGF0YVNvdXJjZXNJbmZvPy5baXRlbS5tYWluRGF0YVNvdXJjZUlkXT8uaW5zdGFuY2VTdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuQ3JlYXRlZCkge1xyXG4gICAgICAgIGxvYWRlZC5wdXNoKGl0ZW0uZGF0YVNvdXJjZUlkKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgaWYgKGxvYWRlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiBsb2FkZWQuam9pbignLCcpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gJydcclxuICB9KVxyXG5cclxuICBjb25zdCBudW1PZkRzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGlmICghdXNlUnVudGltZURhdGEpIHtcclxuICAgICAgcmV0dXJuIDBcclxuICAgIH1cclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhzdGF0ZS5kYXRhU291cmNlc0luZm8gPz8ge30pLmZpbHRlcihkc0lkID0+IHN0YXRlLmRhdGFTb3VyY2VzSW5mb1tkc0lkXS5pbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVkKS5sZW5ndGhcclxuICB9KVxyXG5cclxuICBjb25zdCBydW50aW1lRGF0YVNvdXJjZXMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIGlmIChudW1PZkRzID4gMCkge1xyXG4gICAgICByZXR1cm4gZ2V0UnVudGltZURhdGFTb3VyY2UoKVxyXG4gICAgfVxyXG4gIH0sIFtudW1PZkRzXSlcclxuXHJcbiAgY29uc3QgbnVtT2ZSdW50aW1lRHMgPSBPYmplY3Qua2V5cyhydW50aW1lRGF0YVNvdXJjZXMgPz8ge30pLmxlbmd0aFxyXG5cclxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcclxuICAgIGlmIChzcGF0aWFsUmVsYXRpb25zPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2Uoc3BhdGlhbFJlbGF0aW9uc1swXSlcclxuICAgIH1cclxuICAgIGlmIChlbmFibGVCdWZmZXIpIHtcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQpXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShzcGF0aWFsUmVsYXRpb25zPy5bMF0pXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIG9uUmVsYXRpb25DaGFuZ2UsIHNwYXRpYWxSZWxhdGlvbnNdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFzcGF0aWFsUmVsYXRpb25zKSB7XHJcbiAgICAgIHNldEN1cnJlbnRSZWxhdGlvbihudWxsKVxyXG4gICAgfSBlbHNlIGlmICghc3BhdGlhbFJlbGF0aW9ucy5pbmNsdWRlcyhjdXJyZW50UmVsYXRpb24pKSB7XHJcbiAgICAgIHNldEN1cnJlbnRSZWxhdGlvbihzcGF0aWFsUmVsYXRpb25zWzBdKVxyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKHNwYXRpYWxSZWxhdGlvbnNbMF0pXHJcbiAgICB9XHJcbiAgfSwgW3NwYXRpYWxSZWxhdGlvbnMsIGN1cnJlbnRSZWxhdGlvbiwgb25SZWxhdGlvbkNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhcclxuICAgIChkc0lkOiBzdHJpbmcpID0+IHtcclxuICAgICAgY29uc3QgZHMgPSB1c2VEYXRhU291cmNlcy5maW5kKChpdGVtKSA9PiBpdGVtLmRhdGFTb3VyY2VJZCA9PT0gZHNJZClcclxuICAgICAgc2V0Q3VycmVudERhdGFTb3VyY2UoSW1tdXRhYmxlKGRzKSlcclxuICAgICAgc2V0UnVudGltZURhdGFTb3VyY2UobnVsbClcclxuICAgIH0sXHJcbiAgICBbdXNlRGF0YVNvdXJjZXNdXHJcbiAgKVxyXG5cclxuICBjb25zdCBoYW5kbGVSdW50aW1lRGF0YVNvdXJjZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxyXG4gICAgKGRzSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShkc0lkKVxyXG4gICAgICBzZXRSdW50aW1lRGF0YVNvdXJjZShkcylcclxuICAgICAgc2V0Q3VycmVudERhdGFTb3VyY2UobnVsbClcclxuICAgIH0sXHJcbiAgICBbXVxyXG4gIClcclxuXHJcbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShjdXJyZW50RGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkID8/IHJ1bnRpbWVEYXRhU291cmNlPy5pZClcclxuICAgIGNvbnN0IHJlY29yZHMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxyXG4gICAgaWYgKHJlY29yZHM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgZ2VvbWV0cmllcyA9IHJlY29yZHMubWFwKChyZWNvcmQpID0+IHJlY29yZC5nZXRKU0FQSUdlb21ldHJ5KCkpXHJcbiAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlKGdlb21ldHJpZXMpXHJcbiAgICAgIHNldENvdW50KHJlY29yZHMubGVuZ3RoKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb25TZWxlY3Rpb25DaGFuZ2UobnVsbClcclxuICAgICAgc2V0Q291bnQoMClcclxuICAgIH1cclxuICB9LCBbY3VycmVudERhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCwgcnVudGltZURhdGFTb3VyY2U/LmlkLCBvblNlbGVjdGlvbkNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGdldExhYmVsT2ZTcGF0aWFsUmVsYXRpb24gPSAocmVsYXRpb246IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcbiAgICByZXR1cm4gc3BhdGlhbFJlbGF0aW9uT3B0aW9ucy5maW5kKGl0ZW0gPT4gaXRlbS52YWx1ZSA9PT0gcmVsYXRpb24pLmxhYmVsXHJcbiAgfVxyXG5cclxuICBjb25zdCBoYW5kbGVTcGF0aWFsUmVsYXRpb25DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhlID0+IHtcclxuICAgIHNldEN1cnJlbnRSZWxhdGlvbihlLnRhcmdldC52YWx1ZSlcclxuICAgIG9uUmVsYXRpb25DaGFuZ2UoZS50YXJnZXQudmFsdWUpXHJcbiAgfSwgW29uUmVsYXRpb25DaGFuZ2VdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdj5cclxuICAgICAgPGRpdiBjc3M9e21hcmdpblN0eWxlfSBjbGFzc05hbWU9J3RpdGxlMyc+e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJMYXllcicpfTwvZGl2PlxyXG4gICAgICA8U2VsZWN0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlckxheWVyJyl9XHJcbiAgICAgICAgdmFsdWU9e2N1cnJlbnREYXRhU291cmNlPy5kYXRhU291cmNlSWQgPz8gcnVudGltZURhdGFTb3VyY2U/LmlkfVxyXG4gICAgICA+XHJcbiAgICAgICAge251bU9mUnVudGltZURzID4gMCAmJiB1c2VEYXRhU291cmNlcy5sZW5ndGggPiAwICYmIDxPcHRpb24gaGVhZGVyPntnZXRJMThuTWVzc2FnZSgncHJlY29uZmlndXJlZCcpfTwvT3B0aW9uPn1cclxuICAgICAgICB7dXNlRGF0YVNvdXJjZXMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShpdGVtLmRhdGFTb3VyY2VJZClcclxuICAgICAgICAgIGlmIChsb2FkZWRVc2VEYXRhU291cmNlcy5pbmNsdWRlcyhpdGVtLmRhdGFTb3VyY2VJZCkgfHwgZHM/LmdldExhYmVsKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICA8T3B0aW9uIGtleT17aXRlbS5kYXRhU291cmNlSWR9IHZhbHVlPXtpdGVtLmRhdGFTb3VyY2VJZH0gb25DbGljaz17KCkgPT4geyBoYW5kbGVEYXRhU291cmNlQ2hhbmdlKGl0ZW0uZGF0YVNvdXJjZUlkKSB9fT5cclxuICAgICAgICAgICAgICB7ZHM/LmdldExhYmVsKCl9XHJcbiAgICAgICAgICAgICAgPC9PcHRpb24+XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxPcHRpb24ga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0+XHJcbiAgICAgICAgICAgICAge3RyYW5zbGF0ZSgnbG9hZGluZycpfVxyXG4gICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgIClcclxuICAgICAgICB9KX1cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIHVzZURhdGFTb3VyY2VzLmxlbmd0aCA+IDAgJiYgPE9wdGlvbiBkaXZpZGVyLz59XHJcbiAgICAgICAge251bU9mUnVudGltZURzID4gMCAmJiA8T3B0aW9uIGhlYWRlcj57Z2V0STE4bk1lc3NhZ2UoJ3J1bnRpbWUnKX08L09wdGlvbj59XHJcbiAgICAgICAge09iamVjdC5rZXlzKHJ1bnRpbWVEYXRhU291cmNlcyA/PyB7fSkubWFwKGRzSWQgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZHMgPSBydW50aW1lRGF0YVNvdXJjZXNbZHNJZF1cclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxPcHRpb24ga2V5PXtkc0lkfSB2YWx1ZT17ZHNJZH0gb25DbGljaz17KCkgPT4geyBoYW5kbGVSdW50aW1lRGF0YVNvdXJjZUNoYW5nZShkc0lkKSB9fT5cclxuICAgICAgICAgICAgICB7ZHMuZ2V0TGFiZWwoKX1cclxuICAgICAgICAgICAgPC9PcHRpb24+XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfSl9XHJcbiAgICAgIDwvU2VsZWN0PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbXQtMSBmb250LWl0YWxpYycgY3NzPXtjc3NgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLWhpbnQpO2B9PntnZXRJMThuTWVzc2FnZSgnc2VsZWN0ZWRSZWNvcmRzJywgeyBudW06IGNvdW50IH0pfTwvZGl2PlxyXG4gICAgICB7c3BhdGlhbFJlbGF0aW9ucz8ubGVuZ3RoID4gMCAmJiAoXHJcbiAgICAgICAgPGRpdiBjc3M9e21hcmdpblN0eWxlfT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlIHRpdGxlMyBtYi0wJz57Z2V0STE4bk1lc3NhZ2UoJ3JlbGF0aW9uc2hpcCcpfTwvZGl2PlxyXG4gICAgICAgICAgPFNlbGVjdFxyXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVsYXRpb25zaGlwJyl9XHJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50UmVsYXRpb259XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTcGF0aWFsUmVsYXRpb25DaGFuZ2V9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtzcGF0aWFsUmVsYXRpb25zLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aXRlbX0gdmFsdWU9e2l0ZW19PntnZXRMYWJlbE9mU3BhdGlhbFJlbGF0aW9uKGl0ZW0pfTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAge2VuYWJsZUJ1ZmZlciAmJiAoXHJcbiAgICAgICAgPGRpdiByb2xlPSdncm91cCcgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9IGNzcz17bWFyZ2luU3R5bGV9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpdGxlMyB0ZXh0LXRydW5jYXRlJz57Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IG10LTEnPlxyXG4gICAgICAgICAgICA8QnVmZmVySW5wdXQgZGlzdGFuY2U9e2J1ZmZlckRpc3RhbmNlfSB1bml0PXtidWZmZXJVbml0fSBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9Lz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCB1c2VEYXRhU291cmNlPXtjdXJyZW50RGF0YVNvdXJjZX0gZGF0YVNvdXJjZT17cnVudGltZURhdGFTb3VyY2V9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlfSAvPlxyXG4gICAgICB7dXNlRGF0YVNvdXJjZXMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBkYXRhc291cmNlIGlzIGNyZWF0ZWRcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0gdXNlRGF0YVNvdXJjZT17aXRlbX0vPlxyXG4gICAgICAgIClcclxuICAgICAgfSl9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBqc3gsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZSwgdHlwZSBJbW11dGFibGVBcnJheSB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcclxuaW1wb3J0IHR5cGUgeyBDcmVhdGVUb29sVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIG1hcFdpZGdldElkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxyXG4gIGNyZWF0ZVRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XHJcbiAgb25HZW9tZXRyeUNoYW5nZTogKGdlb206IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21NYXAgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgb25HZW9tZXRyeUNoYW5nZSwgbWFwV2lkZ2V0SWRzIH0gPSBwcm9wc1xyXG4gIGNvbnN0IFtqaW11TWFwVmlldywgc2V0SmltdU1hcFZpZXddID0gUmVhY3QudXNlU3RhdGU8SmltdU1hcFZpZXc+KG51bGwpXHJcbiAgY29uc3QgUG9seWdvblJlZiA9IFJlYWN0LnVzZVJlZjx0eXBlb2YgX19lc3JpLlBvbHlnb24+KG51bGwpXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoamltdU1hcFZpZXc/LnZpZXcpIHtcclxuICAgICAgbGV0IGhhbmRsZXI6IElIYW5kbGVcclxuICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlKCdlc3JpL2NvcmUvcmVhY3RpdmVVdGlscycpLnRoZW4oKHJlYWN0aXZlVXRpbHM6IF9fZXNyaS5yZWFjdGl2ZVV0aWxzKSA9PiB7XHJcbiAgICAgICAgaGFuZGxlciA9IHJlYWN0aXZlVXRpbHMud2F0Y2goKCkgPT4gamltdU1hcFZpZXcudmlldy5leHRlbnQsIChleHRlbnQ6IF9fZXNyaS5FeHRlbnQpID0+IHtcclxuICAgICAgICAgIGlmIChQb2x5Z29uUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgb25HZW9tZXRyeUNoYW5nZShQb2x5Z29uUmVmLmN1cnJlbnQuZnJvbUV4dGVudChleHRlbnQpKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2VzcmkvZ2VvbWV0cnkvUG9seWdvbiddKS50aGVuKG1vZHVsZXMgPT4ge1xyXG4gICAgICAgICAgICAgIFBvbHlnb25SZWYuY3VycmVudCA9IG1vZHVsZXNbMF1cclxuICAgICAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKFBvbHlnb25SZWYuY3VycmVudC5mcm9tRXh0ZW50KGV4dGVudCkpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvLyBzZXQgaW5pdGlhbCBleHRlbnRcclxuICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKGppbXVNYXBWaWV3LnZpZXcuZXh0ZW50KVxyXG4gICAgICB9KVxyXG4gICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICBoYW5kbGVyLnJlbW92ZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgW2ppbXVNYXBWaWV3LCBvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykgPT4ge1xyXG4gICAgc2V0SmltdU1hcFZpZXcoamltdU1hcFZpZXc/LnZpZXcgIT0gbnVsbCA/IGppbXVNYXBWaWV3IDogbnVsbClcclxuICB9LCBbXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAge1xyXG4gICAgICAgIG1hcFdpZGdldElkcz8ubWFwKChtYXBXaWRnZXRJZCwgeCkgPT4gKFxyXG4gICAgICAgICAgPEppbXVNYXBWaWV3Q29tcG9uZW50XHJcbiAgICAgICAgICAgIGtleT17eH0gdXNlTWFwV2lkZ2V0SWQ9e21hcFdpZGdldElkfSBvbkFjdGl2ZVZpZXdDaGFuZ2U9e2hhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSlcclxuICAgICAgfVxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwganN4LCB0eXBlIEltbXV0YWJsZUFycmF5LCBtb2R1bGVMb2FkZXIsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBKaW11TWFwVmlldyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHR5cGUgKiBhcyBqaW11TWFwIGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvbWFwJ1xuaW1wb3J0IHsgQ3JlYXRlVG9vbFR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBFbnRpdHlTdGF0dXNUeXBlLCBTdGF0dXNJbmRpY2F0b3IgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuZXhwb3J0IGludGVyZmFjZSBJbnRlcmFjdGl2ZURyYXdQcm9wcyB7XG4gIGppbXVNYXBWaWV3OiBKaW11TWFwVmlld1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XG4gIG9uRHJhd0VuZDogKGdyYXBoaWM6IF9fZXNyaS5HcmFwaGljLCBnZXRMYXllckZ1bj8sIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHZvaWRcbn1cblxuY29uc3Qgc2tldGNoVG9vbEluZm9NYXAgPSB7XG4gIFtDcmVhdGVUb29sVHlwZS5Qb2ludF06IHsgZHJhd1Rvb2xOYW1lOiAncG9pbnQnLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvaW50JywgdG9vbEluZGV4OiAwIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5Qb2x5bGluZV06IHsgZHJhd1Rvb2xOYW1lOiAncG9seWxpbmUnLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvbHlsaW5lJywgdG9vbEluZGV4OiA0IH0sXG4gIFtDcmVhdGVUb29sVHlwZS5Qb2x5Z29uXTogeyBkcmF3VG9vbE5hbWU6ICdwb2x5Z29uJywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1wb2x5Z29uJywgdG9vbEluZGV4OiAyIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5SZWN0YW5nbGVdOiB7XG4gICAgZHJhd1Rvb2xOYW1lOiAncmVjdGFuZ2xlJyxcbiAgICBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLWNoZWNrYm94LXVuY2hlY2tlZCcsXG4gICAgdG9vbEluZGV4OiAxXG4gIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5DaXJjbGVdOiB7IGRyYXdUb29sTmFtZTogJ2NpcmNsZScsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcmFkaW8tdW5jaGVja2VkJywgdG9vbEluZGV4OiAzIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEludGVyYWN0aXZlRHJhdyAocHJvcHM6IEludGVyYWN0aXZlRHJhd1Byb3BzKSB7XG4gIGNvbnN0IHsgdG9vbFR5cGVzID0gW10sIGppbXVNYXBWaWV3LCBvbkRyYXdFbmQsIHdpZGdldElkIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBbbWFwTW9kdWxlLCBzZXRNYXBNb2R1bGVdID0gUmVhY3QudXNlU3RhdGU8dHlwZW9mIGppbXVNYXA+KG51bGwpXG4gIGNvbnN0IGdldExheWVyRnVuUmVmID0gUmVhY3QudXNlUmVmPCgpID0+IF9fZXNyaS5HcmFwaGljc0xheWVyIHwgX19lc3JpLk1hcE5vdGVzTGF5ZXI+KG51bGwpXG4gIGNvbnN0IGdyYXBoaWNSZWYgPSBSZWFjdC51c2VSZWYobnVsbClcbiAgY29uc3QgW2NsZWFyQWZ0ZXJBcHBseSwgc2V0Q2xlYXJBZnRlckFwcGx5XSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuXG4gIGNvbnN0IHZpc2libGVFbGVtZW50cyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBjcmVhdGVUb29sczogT2JqZWN0LmVudHJpZXMoc2tldGNoVG9vbEluZm9NYXApLnJlZHVjZShcbiAgICAgICAgKHJlc3VsdCwgW2tleSwgdmFsdWVdKSA9PiAoeyAuLi5yZXN1bHQsIFt2YWx1ZS5kcmF3VG9vbE5hbWVdOiB0b29sVHlwZXMuaW5jbHVkZXMoa2V5IGFzIENyZWF0ZVRvb2xUeXBlKSB9KSxcbiAgICAgICAgeyBwb2ludDogZmFsc2UgfVxuICAgICAgKSBhcyBhbnksXG4gICAgICBzZWxlY3Rpb25Ub29sczoge1xuICAgICAgICAnbGFzc28tc2VsZWN0aW9uJzogZmFsc2UsXG4gICAgICAgICdyZWN0YW5nbGUtc2VsZWN0aW9uJzogZmFsc2VcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nc01lbnU6IGZhbHNlLFxuICAgICAgdW5kb1JlZG9NZW51OiBmYWxzZSxcbiAgICAgIGRlbGV0ZUJ1dHRvbjogdHJ1ZVxuICAgIH1cbiAgfSwgW3Rvb2xUeXBlc10pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgbW9kdWxlTG9hZGVyLmxvYWRNb2R1bGU8dHlwZW9mIGppbXVNYXA+KCdqaW11LXVpL2FkdmFuY2VkL21hcCcpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgc2V0TWFwTW9kdWxlKHJlc3VsdClcbiAgICB9KVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZURyYXdUb29sQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChqaW11RHJhd1Rvb2xzUmVmOiBqaW11TWFwLkppbXVEcmF3Q3JlYXRlZERlc2NyaXB0b3IpID0+IHtcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ID0gamltdURyYXdUb29sc1JlZi5nZXRHcmFwaGljc0xheWVyXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZURyYXdTdGFydCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmICgoZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCkoKSBhcyBfX2VzcmkuR3JhcGhpY3NMYXllcikucmVtb3ZlQWxsKClcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlRHJhd0VuZCA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChncmFwaGljKSA9PiB7XG4gICAgICBncmFwaGljUmVmLmN1cnJlbnQgPSBncmFwaGljXG4gICAgICBvbkRyYXdFbmQoZ3JhcGhpYywgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCwgY2xlYXJBZnRlckFwcGx5KVxuICAgIH0sXG4gICAgW29uRHJhd0VuZCwgY2xlYXJBZnRlckFwcGx5XVxuICApXG5cbiAgY29uc3QgaGFuZGxlQ2xlYXJlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBncmFwaGljUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgb25EcmF3RW5kKG51bGwpXG4gIH0sIFtvbkRyYXdFbmRdKVxuXG4gIGNvbnN0IGhhbmRsZUNsZWFyU2V0dGluZ0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgaWYgKGdyYXBoaWNSZWYuY3VycmVudCkge1xuICAgICAgb25EcmF3RW5kKGdyYXBoaWNSZWYuY3VycmVudCwgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCwgZS50YXJnZXQuY2hlY2tlZClcbiAgICB9XG4gICAgc2V0Q2xlYXJBZnRlckFwcGx5KGUudGFyZ2V0LmNoZWNrZWQpXG4gIH0sIFtvbkRyYXdFbmRdKVxuXG4gIGNvbnN0IEppbXVEcmF3ID0gbWFwTW9kdWxlPy5KaW11RHJhd1xuICBpZiAoIUppbXVEcmF3KSB7XG4gICAgcmV0dXJuIDxTdGF0dXNJbmRpY2F0b3Igc3RhdHVzVHlwZT17RW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nfSAvPlxuICB9XG4gIGNvbnN0IGlzQXZhaWxhYmxlID0gT2JqZWN0LmtleXModmlzaWJsZUVsZW1lbnRzLmNyZWF0ZVRvb2xzKS5zb21lKHRvb2xOYW1lID0+IHZpc2libGVFbGVtZW50cy5jcmVhdGVUb29sc1t0b29sTmFtZV0pXG4gIGlmICghaXNBdmFpbGFibGUpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxKaW11RHJhd1xuICAgICAgICBqaW11TWFwVmlldz17amltdU1hcFZpZXd9XG4gICAgICAgIG9wZXJhdG9yV2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICBkaXNhYmxlU3ltYm9sU2VsZWN0b3JcbiAgICAgICAgZHJhd2luZ09wdGlvbnM9e3tcbiAgICAgICAgICBjcmVhdGlvbk1vZGU6IG1hcE1vZHVsZS5KaW11RHJhd0NyZWF0aW9uTW9kZS5TaW5nbGUsXG4gICAgICAgICAgdXBkYXRlT25HcmFwaGljQ2xpY2s6IGZhbHNlLFxuICAgICAgICAgIHZpc2libGVFbGVtZW50czogdmlzaWJsZUVsZW1lbnRzXG4gICAgICAgIH19XG4gICAgICAgIHVpT3B0aW9ucz17e1xuICAgICAgICAgIGlzSGlkZUJvcmRlcjogdHJ1ZVxuICAgICAgICB9fVxuICAgICAgICBvbkppbXVEcmF3Q3JlYXRlZD17aGFuZGxlRHJhd1Rvb2xDcmVhdGVkfVxuICAgICAgICBvbkRyYXdpbmdTdGFydGVkPXtoYW5kbGVEcmF3U3RhcnR9XG4gICAgICAgIG9uRHJhd2luZ0ZpbmlzaGVkPXtoYW5kbGVEcmF3RW5kfVxuICAgICAgICBvbkRyYXdpbmdDbGVhcmVkPXtoYW5kbGVDbGVhcmVkfVxuICAgICAgLz5cbiAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICA8Q2hlY2tib3ggY2hlY2tlZD17Y2xlYXJBZnRlckFwcGx5fSBvbkNoYW5nZT17aGFuZGxlQ2xlYXJTZXR0aW5nQ2hhbmdlfSBjbGFzc05hbWU9J21yLTInIC8+XG4gICAgICAgIHtnZXRJMThuTWVzc2FnZSgnY2xlYXJEcmF3aW5nJyl9XG4gICAgICA8L2xhYmVsPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBMb2FkaW5nLCBMb2FkaW5nVHlwZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBzdHlsZWQgfSBmcm9tICdqaW11LXRoZW1lJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5cbmNvbnN0IFJvb3QgPSBzdHlsZWQuZGl2YFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICByaWdodDogMDtcbiAgbGVmdDogMDtcbiAgei1pbmRleDogMjtcblxuICAubG9hZGluZy1jb250ZW50IHtcbiAgICAubG9hZGluZy10aXAge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgfVxuYFxuZXhwb3J0IGZ1bmN0aW9uIExvYWRpbmdSZXN1bHQgKCkge1xuICBjb25zdCB0cmFuc2xhdGUgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgcmV0dXJuIChcbiAgICA8Um9vdD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsb2FkaW5nLWNvbnRlbnQgdy0xMDAgcHgtNCBkLWZsZXggZmxleC1jb2x1bW4ganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICA8ZGl2IHJvbGU9J2FsZXJ0JyBhcmlhLWxpdmU9J2Fzc2VydGl2ZScgY2xhc3NOYW1lPSd0ZXh0LXBhcGVyJz5cbiAgICAgICAgICB7dHJhbnNsYXRlKCdyZXRyaWV2aW5nJyl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8TG9hZGluZyBjbGFzc05hbWU9J2xvYWRpbmctdGlwIG10LTgnIHR5cGU9e0xvYWRpbmdUeXBlLkRvbnV0fS8+XG4gICAgICA8L2Rpdj5cbiAgICA8L1Jvb3Q+XG4gIClcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxuICB0eXBlIElNU3RhdGUsXG4gIGNsYXNzTmFtZXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFRyYXNoT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci90cmFzaCdcbmltcG9ydCBGZWF0dXJlSW5mbyBmcm9tICcuL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvJ1xuaW1wb3J0IHsgTGlzdERpcmVjdGlvbiB9IGZyb20gJy4uL2NvbmZpZydcblxuZXhwb3J0IGludGVyZmFjZSBSZXN1bHRJdGVtUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHBvcHVwVGVtcGxhdGU6IGFueVxuICBkZWZhdWx0UG9wdXBUZW1wbGF0ZTogYW55XG4gIGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkXG4gIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VcbiAgZXhwYW5kQnlEZWZhdWx0OiBib29sZWFuXG4gIG9uQ2xpY2s6IChyZWNvcmQ6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIG9uUmVtb3ZlOiAocmVjb3JkOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIGZsZXgtZmxvdzogcm93O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBtaW4taGVpZ2h0OiAycmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICYuc2VsZWN0ZWQge1xuICAgIG91dGxpbmU6IDJweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKTtcbiAgfVxuICBcbiAgLnJlbW92ZS1idXR0b24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDRweDtcbiAgICByaWdodDogNHB4O1xuICAgIHotaW5kZXg6IDEwO1xuICAgIG9wYWNpdHk6IDAuNztcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnM7XG4gICAgXG4gICAgJjpob3ZlciB7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgIH1cbiAgICBcbiAgICAvLyBMYXJnZXIgdG91Y2ggdGFyZ2V0IGZvciBtb2JpbGUvYWNjZXNzaWJpbGl0eVxuICAgIG1pbi13aWR0aDogMzJweDtcbiAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICB9XG5gXG5cbi8qKlxuICogUXVlcnlSZXN1bHRJdGVtIGNvbXBvbmVudCAtIGRpc3BsYXlzIGEgc2luZ2xlIHF1ZXJ5IHJlc3VsdCByZWNvcmRcbiAqIEZlYXR1cmVzOlxuICogLSBDbGlja2luZyB0aGUgaXRlbSB6b29tcyB0byB0aGUgZmVhdHVyZSBvbiB0aGUgbWFwXG4gKiAtIFJlbW92ZSBidXR0b24gKHRyYXNoIGljb24pIGluIHVwcGVyLXJpZ2h0IGNvcm5lciB0byByZW1vdmUgcmVjb3JkIGZyb20gcmVzdWx0c1xuICogLSBSZWNvcmRzIGFyZSBleHBhbmRlZCBieSBkZWZhdWx0IHRvIHNob3cgZnVsbCBmZWF0dXJlIGluZm9ybWF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBRdWVyeVJlc3VsdEl0ZW0gPSAocHJvcHM6IFJlc3VsdEl0ZW1Qcm9wcykgPT4ge1xuICBjb25zdCB7IHdpZGdldElkLCBkYXRhLCBkYXRhU291cmNlLCBwb3B1cFRlbXBsYXRlLCBkZWZhdWx0UG9wdXBUZW1wbGF0ZSwgb25DbGljaywgb25SZW1vdmUsIGV4cGFuZEJ5RGVmYXVsdCA9IGZhbHNlIH0gPSBwcm9wc1xuICBcbiAgY29uc3QgcmVjb3JkSWQgPSBkYXRhLmdldElkKClcbiAgXG4gIC8vIExvZyB3aGVuIFF1ZXJ5UmVzdWx0SXRlbSByZW5kZXJzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1tRdWVyeVJlc3VsdEl0ZW1dIHJlbmRlcmVkJywge1xuICAgICAgZXZlbnQ6ICdRdWVyeVJlc3VsdEl0ZW0tcmVuZGVyJyxcbiAgICAgIHJlY29yZElkLFxuICAgICAgZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW3JlY29yZElkLCBleHBhbmRCeURlZmF1bHRdKVxuICBcbiAgLy8gQ2hlY2sgaWYgdGhpcyByZWNvcmQgaXMgY3VycmVudGx5IHNlbGVjdGVkXG4gIGNvbnN0IHNlbGVjdGVkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+XG4gICAgc3RhdGUuZGF0YVNvdXJjZXNJbmZvPy5bZGF0YVNvdXJjZS5pZF0/LnNlbGVjdGVkSWRzPy5pbmNsdWRlcyhkYXRhLmdldElkKCkpXG4gIClcbiAgXG4gIC8vIERldGVybWluZSBpZiBsaXN0IGlzIGRpc3BsYXllZCB2ZXJ0aWNhbGx5IChhZmZlY3RzIEZlYXR1cmVJbmZvIGV4cGFuZGFiaWxpdHkpXG4gIGNvbnN0IGlzVmVydGljYWxBbGlnbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRMaXN0RGlyZWN0aW9uICE9PSBMaXN0RGlyZWN0aW9uLkhvcml6b250YWxcbiAgfSlcblxuICAvLyBIYW5kbGUgY2xpY2tpbmcgb24gdGhlIHJlc3VsdCBpdGVtIC0gem9vbXMgdG8gZmVhdHVyZSBvbiBtYXBcbiAgY29uc3QgaGFuZGxlQ2xpY2tSZXN1bHRJdGVtID0gUmVhY3QudXNlQ2FsbGJhY2soKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICAvLyBEb24ndCB0cmlnZ2VyIHpvb20gaWYgY2xpY2tpbmcgdGhlIHJlbW92ZSBidXR0b25cbiAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCcucmVtb3ZlLWJ1dHRvbicpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgb25DbGljayhkYXRhKVxuICB9LCBbb25DbGljaywgZGF0YV0pXG5cbiAgLy8gSGFuZGxlIGNsaWNraW5nIHRoZSByZW1vdmUgYnV0dG9uIC0gcmVtb3ZlcyByZWNvcmQgZnJvbSByZXN1bHRzIGFuZCBzZWxlY3Rpb25cbiAgY29uc3QgaGFuZGxlUmVtb3ZlID0gUmVhY3QudXNlQ2FsbGJhY2soKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpIC8vIFByZXZlbnQgdHJpZ2dlcmluZyB0aGUgaXRlbSBjbGljayBoYW5kbGVyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgb25SZW1vdmUoZGF0YSlcbiAgfSwgW29uUmVtb3ZlLCBkYXRhXSlcblxuICBjb25zdCBvbktleVVwID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRW50ZXInIHx8IGV2dC5rZXkgPT09ICcgJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgaGFuZGxlQ2xpY2tSZXN1bHRJdGVtKGV2dCBhcyBhbnkpXG4gICAgfVxuICB9LCBbaGFuZGxlQ2xpY2tSZXN1bHRJdGVtXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktcmVzdWx0LWl0ZW0nLCB7IHNlbGVjdGVkIH0pfVxuICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2tSZXN1bHRJdGVtfVxuICAgICAgb25LZXlVcD17b25LZXlVcH1cbiAgICAgIGNzcz17c3R5bGV9XG4gICAgICByb2xlPSdvcHRpb24nXG4gICAgICBhcmlhLXNlbGVjdGVkPXtzZWxlY3RlZH1cbiAgICAgIHRhYkluZGV4PXswfVxuICAgID5cbiAgICAgIDxGZWF0dXJlSW5mb1xuICAgICAgICBncmFwaGljPXtkYXRhLmZlYXR1cmUgYXMgX19lc3JpLkdyYXBoaWN9XG4gICAgICAgIHBvcHVwVGVtcGxhdGU9e3BvcHVwVGVtcGxhdGV9XG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlPXtkZWZhdWx0UG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgdG9nZ2xhYmxlPXtpc1ZlcnRpY2FsQWxpZ259XG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQnlEZWZhdWx0fVxuICAgICAgICBkYXRhU291cmNlPXtkYXRhU291cmNlfVxuICAgICAgLz5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgY2xhc3NOYW1lPVwicmVtb3ZlLWJ1dHRvblwiXG4gICAgICAgIGljb25cbiAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgdmFyaWFudD1cInRleHRcIlxuICAgICAgICBjb2xvcj1cImluaGVyaXRcIlxuICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZW1vdmV9XG4gICAgICAgIGFyaWEtbGFiZWw9XCJSZW1vdmUgcmVjb3JkXCJcbiAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICAgIG1pbi13aWR0aDogMzJweDtcbiAgICAgICAgICB3aWR0aDogMzJweDtcbiAgICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBgfVxuICAgICAgPlxuICAgICAgICA8VHJhc2hPdXRsaW5lZCBzaXplPXsxOH0gLz5cbiAgICAgIDwvQnV0dG9uPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICBJbW11dGFibGUsXG4gIGhvb2tzLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxuICB0eXBlIERhdGFSZWNvcmRTZXQsXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUsXG4gIERhdGFBY3Rpb25NYW5hZ2VyLFxuICBEYXRhTGV2ZWwsXG4gIHVzZUludGxcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uLCBUb29sdGlwLCBEYXRhQWN0aW9uTGlzdCwgRGF0YUFjdGlvbkxpc3RTdHlsZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgRmllbGRzVHlwZSwgUGFnaW5nVHlwZSwgTGlzdERpcmVjdGlvbiwgUmVzdWx0U2VsZWN0TW9kZSwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuLy8gRk9SQ0VEOiBBbHdheXMgU2ltcGxlTGlzdCAtIExhenlMaXN0IGFuZCBQYWdpbmdMaXN0IHJlbW92ZWRcbmltcG9ydCB7IFNpbXBsZUxpc3QgfSBmcm9tICcuL3NpbXBsZS1saXN0J1xuaW1wb3J0IHsgY29tYmluZUZpZWxkcyB9IGZyb20gJy4vcXVlcnktdXRpbHMnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdCdcbmltcG9ydCB7IEV4cGFuZEFsbE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsJ1xuaW1wb3J0IHsgQ29sbGFwc2VBbGxPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsJ1xuaW1wb3J0IHsgZ2V0RXh0cmFBY3Rpb25zIH0gZnJvbSAnLi4vZGF0YS1hY3Rpb25zJ1xuaW1wb3J0IHsgXG4gIHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzLCBcbiAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzLCBcbiAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2gsXG4gIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlIFxufSBmcm9tICcuL3NlbGVjdGlvbi11dGlscydcbmltcG9ydCB7IHJlbW92ZVJlc3VsdHNGcm9tQWNjdW11bGF0ZWQsIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyB9IGZyb20gJy4vcmVzdWx0cy1tYW5hZ2VtZW50LXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHsgRXJyb3JNZXNzYWdlIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5jb25zdCB7IGljb25NYXAgfSA9IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgcmVxdWVzdGluZyByZXN0b3JhdGlvbiB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlcy5cbiAqL1xuY29uc3QgUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCA9ICdxdWVyeXNpbXBsZS1yZXN0b3JlLW9uLWlkZW50aWZ5LWNsb3NlJ1xuXG4vKipcbiAqIERldGVjdHMgaWYgYW4gaWRlbnRpZnkgcG9wdXAgaXMgY3VycmVudGx5IHZpc2libGUgaW4gdGhlIERPTS5cbiAqIFVzZXMgdmVyaWZpZWQgc2VsZWN0b3JzIGJhc2VkIG9uIEV4cGVyaWVuY2UgQnVpbGRlcidzIGlkZW50aWZ5IHBvcHVwIHN0cnVjdHVyZS5cbiAqIFxuICogQHJldHVybnMgdHJ1ZSBpZiBpZGVudGlmeSBwb3B1cCBpcyBkZXRlY3RlZCBhbmQgdmlzaWJsZSwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmZ1bmN0aW9uIGlzSWRlbnRpZnlQb3B1cE9wZW4oKTogYm9vbGVhbiB7XG4gIC8vIFByaW1hcnkgc2VsZWN0b3I6IC5lc3JpLXBvcHVwIHdpdGggcm9sZT1cImRpYWxvZ1wiXG4gIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVzcmktcG9wdXBbcm9sZT1cImRpYWxvZ1wiXScpXG4gIFxuICBpZiAoIXBvcHVwKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIFZlcmlmeSBpdCdzIHZpc2libGUgKG5vdCBoaWRkZW4pXG4gIGNvbnN0IGFyaWFIaWRkZW4gPSBwb3B1cC5nZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJylcbiAgaWYgKGFyaWFIaWRkZW4gPT09ICd0cnVlJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBBZGRpdGlvbmFsIGNoZWNrOiB2ZXJpZnkgY29tcHV0ZWQgc3R5bGUgc2hvd3MgaXQncyB2aXNpYmxlXG4gIGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocG9wdXApXG4gIGlmIChzdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgfHwgc3R5bGUudmlzaWJpbGl0eSA9PT0gJ2hpZGRlbicgfHwgc3R5bGUub3BhY2l0eSA9PT0gJzAnKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIFZlcmlmeSBpdCBjb250YWlucyBlc3JpLWZlYXR1cmVzIChpZGVudGlmeSBwb3B1cCBzdHJ1Y3R1cmUpXG4gIGNvbnN0IGhhc0ZlYXR1cmVzID0gcG9wdXAucXVlcnlTZWxlY3RvcignLmVzcmktZmVhdHVyZXMnKVxuICBpZiAoIWhhc0ZlYXR1cmVzKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNSZXN1bHRQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcmVzdWx0Q291bnQ6IG51bWJlclxuICBtYXhQZXJQYWdlOiBudW1iZXJcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4gIG91dHB1dERTOiBEYXRhU291cmNlXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4gIGRlZmF1bHRQYWdlU2l6ZTogbnVtYmVyXG4gIHJlY29yZHM6IERhdGFSZWNvcmRbXVxuICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4gIG9uTmF2QmFjazogKGNsZWFyUmVzdWx0cz86IGJvb2xlYW4pID0+IHZvaWRcbiAgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxufVxuXG5jb25zdCByZXN1bHRTdHlsZSA9IGNzc2BcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcblxuICAucXVlcnktcmVzdWx0X19oZWFkZXIge1xuICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlci10ZXh0KTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgfVxuXG4gIC5xdWVyeS1yZXN1bHQtY29udGFpbmVyIHtcbiAgICBmbGV4OiAxIDEgMDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgbWluLWhlaWdodDogMDtcbiAgfVxuXG4gIC5xdWVyeS1yZXN1bHQtaW5mbyB7XG4gICAgaGVpZ2h0OiAxOHB4O1xuICB9XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tSZXN1bHQgKHByb3BzOiBRdWVyeVRhc1Jlc3VsdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtLCBxdWVyeVBhcmFtcywgcmVzdWx0Q291bnQsIG1heFBlclBhZ2UsIHJlY29yZHMsIGRlZmF1bHRQYWdlU2l6ZSwgd2lkZ2V0SWQsIG91dHB1dERTLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQsIG9uTmF2QmFjaywgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IGludGwgPSB1c2VJbnRsKClcbiAgY29uc3QgW3F1ZXJ5RGF0YSwgc2V0UXVlcnlEYXRhXSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IFtzZWxlY3RlZFJlY29yZHMsIHNldFNlbGVjdGVkUmVjb3Jkc10gPSBSZWFjdC51c2VTdGF0ZTxEYXRhUmVjb3JkW10+KFtdKVxuICBjb25zdCBbcmVtb3ZlZFJlY29yZElkcywgc2V0UmVtb3ZlZFJlY29yZElkc10gPSBSZWFjdC51c2VTdGF0ZTxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKVxuICBcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgW2V4cGFuZEFsbCwgc2V0RXhwYW5kQWxsXSA9IFJlYWN0LnVzZVN0YXRlKGN1cnJlbnRJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCA/PyBmYWxzZSlcbiAgLy8gVHJhY2sgaW5kaXZpZHVhbCBpdGVtIGV4cGFuc2lvbiBzdGF0ZXMgdG8gbWFpbnRhaW4gc3RhdGUgd2hlbiBpdGVtcyBhcmUgcmVtb3ZlZFxuICBjb25zdCBbaXRlbUV4cGFuZFN0YXRlcywgc2V0SXRlbUV4cGFuZFN0YXRlc10gPSBSZWFjdC51c2VTdGF0ZTxNYXA8c3RyaW5nLCBib29sZWFuPj4obmV3IE1hcCgpKVxuICBjb25zdCBiYWNrQnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIFxuICAvLyBUcmFjayBleHBhbmRBbGwgY2hhbmdlcyBmb3IgZGVidWdnaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2V4cGFuZEFsbC1zdGF0ZS1jaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgZXhwYW5kQWxsLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtleHBhbmRBbGwsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IHNlbGVjdGVkIHRoZXNlIHJlY29yZHMgdG8gcHJldmVudCByZS1zZWxlY3Rpb24gd2hlbiBzd2l0Y2hpbmcgdGFic1xuICBjb25zdCBoYXNTZWxlY3RlZFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgdGhlIGxhc3QgcmVjb3JkcyB3ZSBzZWxlY3RlZCB0byBkZXRlY3Qgd2hlbiBuZXcgcmVjb3JkcyBjb21lIGluXG4gIGNvbnN0IGxhc3RTZWxlY3RlZFJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nW10+KFtdKVxuICAvLyBUcmFjayB0aGUgb3JpZ2luYWwgcXVlcnkgcmVjb3JkIElEcyAobm90IHNlbGVjdGVkIElEcykgdG8gZGV0ZWN0IHdoZW4gcXVlcnkgcmVzdWx0cyBjaGFuZ2VcbiAgY29uc3QgbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZ1tdPihbXSlcbiAgLy8gVHJhY2sgdGhlIGxhc3Qgc2VsZWN0ZWQgRmVhdHVyZURhdGFSZWNvcmRzIGZvciByZXN0b3JhdGlvbiAoaWYgbmVlZGVkKVxuICBjb25zdCBsYXN0U2VsZWN0ZWRGZWF0dXJlUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxGZWF0dXJlRGF0YVJlY29yZFtdPihbXSlcbiAgLy8gUmVmIHRvIHRyYWNrIHJlbW92ZWRSZWNvcmRJZHMgZm9yIHVzZSBpbiBjYWxsYmFja3MgKGF2b2lkcyBzdGFsZSBjbG9zdXJlIGlzc3VlcylcbiAgY29uc3QgcmVtb3ZlZFJlY29yZElkc1JlZiA9IFJlYWN0LnVzZVJlZjxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKVxuICBcbiAgLy8gU3luYyByZWYgd2hlbmV2ZXIgcmVtb3ZlZFJlY29yZElkcyBzdGF0ZSBjaGFuZ2VzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVtb3ZlZFJlY29yZElkc1JlZi5jdXJyZW50ID0gcmVtb3ZlZFJlY29yZElkc1xuICB9LCBbcmVtb3ZlZFJlY29yZElkc10pXG4gIC8vIEVycm9yIHN0YXRlIGZvciB1c2VyLWZhY2luZyBlcnJvcnNcbiAgY29uc3QgW3NlbGVjdGlvbkVycm9yLCBzZXRTZWxlY3Rpb25FcnJvcl0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmc+KG51bGwpXG5cbiAgY29uc3QgZXh0cmFBY3Rpb25zID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGdldEV4dHJhQWN0aW9ucyh3aWRnZXRJZCwgb3V0cHV0RFMsIGludGwsIHF1ZXJ5SXRlbSwgcnVudGltZVpvb21Ub1NlbGVjdGVkKVxuICB9LCBbd2lkZ2V0SWQsIG91dHB1dERTLCBpbnRsLCBxdWVyeUl0ZW0sIHJ1bnRpbWVab29tVG9TZWxlY3RlZF0pXG5cbiAgY29uc3QgZW5hYmxlRGF0YUFjdGlvbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmVuYWJsZURhdGFBY3Rpb24gPz8gdHJ1ZVxuICB9KVxuXG4gIGNvbnN0IHBhZ2luZ1R5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRQYWdpbmdTdHlsZVxuICB9KVxuICBjb25zdCBkaXJlY3Rpb25UeXBlSW5Db25maWcgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0TGlzdERpcmVjdGlvblxuICB9KVxuICAvLyBGT1JDRSBTaW1wbGVMaXN0IC0gaWdub3JlIGNvbmZpZywgd2UncmUgZG9uZSB3aXRoIGxhenkgbG9hZGluZyBpc3N1ZXNcbiAgY29uc3QgcGFnaW5nVHlwZSA9IFBhZ2luZ1R5cGUuU2ltcGxlXG4gIGNvbnN0IGRpcmVjdGlvbiA9IGRpcmVjdGlvblR5cGVJbkNvbmZpZyA/PyBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsXG5cbiAgLy8gR3JvdXAgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2UgZm9yIERhdGFBY3Rpb25MaXN0XG4gIC8vIFRoaXMgZW5zdXJlcyBEYXRhQWN0aW9uTGlzdCByZWNvZ25pemVzIHJlY29yZHMgZXZlbiB3aGVuIHRoZXkgY29tZSBmcm9tIGRpZmZlcmVudCBxdWVyaWVzL29yaWdpbnNcbiAgY29uc3QgYWN0aW9uRGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIC8vIERlYnVnOiBMb2cgd2hhdCByZWNvcmRzIGFyZSBhdmFpbGFibGVcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtY2FsY3VsYXRpb24tc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgc2VsZWN0ZWRSZWNvcmRzQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBxdWVyeURhdGFSZWNvcmRzQ291bnQ6IHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTPy5pZCxcbiAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkczogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggPiAwLFxuICAgICAgaGFzUXVlcnlEYXRhUmVjb3JkczogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggPiAwLFxuICAgICAgaGFzUmVjb3Jkc1Byb3A6IHJlY29yZHM/Lmxlbmd0aCA+IDBcbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IHJlY29yZHNUb1VzZSA9IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoID4gMCBcbiAgICAgID8gc2VsZWN0ZWRSZWNvcmRzIFxuICAgICAgOiAocXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggPiAwID8gcXVlcnlEYXRhLnJlY29yZHMgOiAocmVjb3JkcyB8fCBbXSkpXG4gICAgXG4gICAgLy8gSWYgbm8gcmVjb3JkcywgcmV0dXJuIHNpbmdsZSBEYXRhUmVjb3JkU2V0IHdpdGggZW1wdHkgcmVjb3JkcyB1c2luZyBvdXRwdXREU1xuICAgIGlmICghcmVjb3Jkc1RvVXNlIHx8IHJlY29yZHNUb1VzZS5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGVtcHR5RGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgICAgIHR5cGU6ICdsb2FkZWQnLFxuICAgICAgICByZWNvcmRzOiBbXSxcbiAgICAgICAgbmFtZTogb3V0cHV0RFM/LmlkLFxuICAgICAgICBsYWJlbDogb3V0cHV0RFM/LmdldExhYmVsKClcbiAgICAgIH1cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2FjdGlvbkRhdGFTZXRzLWVtcHR5LXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIGRhdGFTZXREYXRhU291cmNlSWQ6IGVtcHR5RGF0YVNldC5kYXRhU291cmNlPy5pZFxuICAgICAgfSlcbiAgICAgIHJldHVybiBbZW1wdHlEYXRhU2V0XVxuICAgIH1cbiAgICBcbiAgICAvLyBHcm91cCByZWNvcmRzIGJ5IHRoZWlyIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gICAgXG4gICAgcmVjb3Jkc1RvVXNlLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICAgIGNvbnN0IHJlY29yZERTID0gKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZCkuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICAgIFxuICAgICAgaWYgKHJlY29yZERTKSB7XG4gICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICAgIH0gZWxzZSBpZiAob3V0cHV0RFMpIHtcbiAgICAgICAgLy8gRmFsbGJhY2s6IHVzZSBvdXRwdXREUydzIG9yaWdpbiBpZiByZWNvcmQgZG9lc24ndCBoYXZlIGRhdGFTb3VyY2VcbiAgICAgICAgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5zZXQob3JpZ2luRFMsIFtdKVxuICAgICAgICB9XG4gICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykucHVzaChyZWNvcmQgYXMgRmVhdHVyZURhdGFSZWNvcmQpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBDcmVhdGUgYSBEYXRhUmVjb3JkU2V0IGZvciBlYWNoIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10gPSBBcnJheS5mcm9tKHJlY29yZHNCeU9yaWdpbkRTLmVudHJpZXMoKSkubWFwKChbb3JpZ2luRFMsIG9yaWdpblJlY29yZHNdKSA9PiB7XG4gICAgICBjb25zdCBkYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICBkYXRhU291cmNlOiBvcmlnaW5EUywgLy8gVXNlIG9yaWdpbiBEUywgbm90IG91dHB1dERTXG4gICAgICAgIHR5cGU6ICdzZWxlY3RlZCcsXG4gICAgICAgIHJlY29yZHM6IG9yaWdpblJlY29yZHMsXG4gICAgICAgIG5hbWU6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYWJlbDogb3JpZ2luRFMuZ2V0TGFiZWwoKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBZGQgZmllbGRzIGlmIG5lZWRlZCAodXNlIGN1cnJlbnRJdGVtJ3MgZmllbGQgc2V0dGluZ3MpXG4gICAgICBpZiAoY3VycmVudEl0ZW0ucmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzICYmIGN1cnJlbnRJdGVtLnJlc3VsdERpc3BsYXlGaWVsZHMgIT0gbnVsbCkge1xuICAgICAgICBkYXRhU2V0LmZpZWxkcyA9IGNvbWJpbmVGaWVsZHMoY3VycmVudEl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcywgY3VycmVudEl0ZW0ucmVzdWx0VGl0bGVFeHByZXNzaW9uKVxuICAgICAgfSBlbHNlIGlmIChvcmlnaW5EUyAmJiAnZ2V0UG9wdXBJbmZvJyBpbiBvcmlnaW5EUykge1xuICAgICAgICAvLyB1c2UgZmllbGRzIGluIHBvcHVwIHRlbXBsYXRlIGZyb20gb3JpZ2luIERTXG4gICAgICAgIGNvbnN0IHBvcHVwSW5mbyA9IG9yaWdpbkRTLmdldFBvcHVwSW5mbygpXG4gICAgICAgIGlmIChwb3B1cEluZm8/LmZpZWxkSW5mb3MpIHtcbiAgICAgICAgICBkYXRhU2V0LmZpZWxkcyA9IHBvcHVwSW5mby5maWVsZEluZm9zLmZpbHRlcigoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8udmlzaWJsZSkubWFwKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby5maWVsZE5hbWUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGRhdGFTZXRcbiAgICB9KVxuICAgIFxuICAgIC8vIERlYnVnOiBMb2cgd2hhdCB0aGUgZmluYWwgZGF0YVNldHMgY29udGFpblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1maW5hbCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cy5sZW5ndGgsXG4gICAgICB0b3RhbFJlY29yZHNDb3VudDogcmVjb3Jkc1RvVXNlLmxlbmd0aCxcbiAgICAgIGRhdGFTZXRzQnlPcmlnaW46IGRhdGFTZXRzLm1hcChkcyA9PiAoe1xuICAgICAgICBvcmlnaW5EU0lkOiBkcy5kYXRhU291cmNlPy5pZCxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiBkcy5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgdHlwZTogZHMudHlwZVxuICAgICAgfSkpXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiB3ZSBjb3VsZG4ndCBncm91cCBieSBvcmlnaW4gKHNob3VsZG4ndCBoYXBwZW4pLCBmYWxsYmFjayB0byBzaW5nbGUgRGF0YVJlY29yZFNldCB3aXRoIG91dHB1dERTXG4gICAgaWYgKGRhdGFTZXRzLmxlbmd0aCA9PT0gMCAmJiBvdXRwdXREUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtZmFsbGJhY2stdG8tb3V0cHV0RFMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogJ2NvdWxkLW5vdC1kZXRlcm1pbmUtb3JpZ2luLWRzJ1xuICAgICAgfSlcbiAgICAgIHJldHVybiBbe1xuICAgICAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICAgICAgdHlwZTogcmVjb3Jkc1RvVXNlLmxlbmd0aCA+IDAgPyAnc2VsZWN0ZWQnIDogJ2xvYWRlZCcsXG4gICAgICAgIHJlY29yZHM6IHJlY29yZHNUb1VzZSxcbiAgICAgICAgbmFtZTogb3V0cHV0RFMuaWQsXG4gICAgICAgIGxhYmVsOiBvdXRwdXREUy5nZXRMYWJlbCgpXG4gICAgICB9XVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZGF0YVNldHNcbiAgfSwgW3NlbGVjdGVkUmVjb3Jkcywgb3V0cHV0RFMsIHF1ZXJ5RGF0YSwgY3VycmVudEl0ZW0sIHJlY29yZHMsIHdpZGdldElkXSlcblxuICAvLyBNZW1vaXplIGZpbHRlcmVkIHJlY29yZHMgdG8gcHJldmVudCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzIHRoYXQgcmVzZXQgc2Nyb2xsIHBvc2l0aW9uXG4gIC8vIFRoaXMgZW5zdXJlcyB0aGUgcmVjb3JkcyBwcm9wIG9ubHkgY2hhbmdlcyB3aGVuIHRoZSBhY3R1YWwgZGF0YSBjaGFuZ2VzLCBub3QganVzdCB0aGUgYXJyYXkgcmVmZXJlbmNlXG4gIGNvbnN0IGZpbHRlcmVkUmVjb3Jkc0Zvckxpc3QgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gcXVlcnlEYXRhPy5yZWNvcmRzPy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKSkgfHwgXG4gICAgICAgICAgIChyZWNvcmRzPy5maWx0ZXIocmVjb3JkID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IFtdKVxuICB9LCBbcXVlcnlEYXRhPy5yZWNvcmRzLCByZWNvcmRzLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICAvLyBmb2N1cyB0aGUgYmFjayBidXR0b24gd2hlbiBpdCBpcyByZW5kZXJlZFxuICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgfSlcblxuICAvKipcbiAgICogRWZmZWN0IGhvb2sgdGhhdCBydW5zIHdoZW4gbmV3IHF1ZXJ5IHJlc3VsdHMgYXJyaXZlLlxuICAgKiBSZXNldHMgcmVtb3ZlZCByZWNvcmRzLCBleHBhbmQgc3RhdGUsIGFuZCBxdWVyeSBkYXRhIGZvciB0aGUgbmV3IHJlc3VsdHMuXG4gICAqIEFsc28gaGFuZGxlcyBhdXRvLXNlbGVjdGlvbiBvZiByZWNvcmRzIHdoZW4gdGhleSBmaXJzdCBhcnJpdmUuXG4gICAqL1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIENoZWNrIGlmIHRoZXNlIGFyZSBuZXcgcmVjb3JkcyAoZGlmZmVyZW50IGZyb20gd2hhdCB3ZSBsYXN0IHF1ZXJpZWQpXG4gICAgLy8gSU1QT1JUQU5UOiBDb21wYXJlIGFnYWluc3Qgb3JpZ2luYWwgcXVlcnkgcmVzdWx0cywgbm90IHNlbGVjdGVkIHJlc3VsdHNcbiAgICAvLyBUaGlzIHByZXZlbnRzIHJlbW92ZWRSZWNvcmRJZHMgZnJvbSBiZWluZyByZXNldCB3aGVuIHJlY29yZHMgYXJlIHJlbW92ZWRcbiAgICBjb25zdCBjdXJyZW50UmVjb3JkSWRzID0gcmVjb3Jkcz8ubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSkgfHwgW11cbiAgICBjb25zdCByZWNvcmRzQ2hhbmdlZCA9IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoICE9PSBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudC5sZW5ndGggfHxcbiAgICAgIGN1cnJlbnRSZWNvcmRJZHMuc29tZSgoaWQsIGluZGV4KSA9PiBpZCAhPT0gbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnRbaW5kZXhdKVxuICAgIFxuICAgIC8vIERlYnVnOiBMb2cgd2hlbiByZWNvcmRzIHByb3AgY2hhbmdlc1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdyZWNvcmRzLXByb3AtY2hhbmdlZCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgd2lsbFNldFF1ZXJ5RGF0YTogcmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSxcbiAgICAgIGhhc1NlbGVjdGVkUmVmOiBoYXNTZWxlY3RlZFJlZi5jdXJyZW50LFxuICAgICAgcmVjb3Jkc0NoYW5nZWQ6IHJlY29yZHNDaGFuZ2VkLFxuICAgICAgbGFzdFF1ZXJ5UmVjb3JkSWRzQ291bnQ6IGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50Lmxlbmd0aCxcbiAgICAgIGN1cnJlbnRSZWNvcmRJZHNDb3VudDogY3VycmVudFJlY29yZElkcy5sZW5ndGhcbiAgICB9KVxuICAgIFxuICAgIC8vIElNUE9SVEFOVDogT25seSByZXNldCByZW1vdmVkIHJlY29yZHMgaWYgdGhpcyBpcyB0cnVseSBhIE5FVyBxdWVyeSB3aXRoIGRpZmZlcmVudCByZWNvcmRzXG4gICAgLy8gRG9uJ3QgcmVzZXQgaWYgcmVjb3JkcyBhcmUgdGhlIHNhbWUgKGp1c3QgYSByZS1yZW5kZXIgb3IgbGF6eSBsb2FkKVxuICAgIGlmIChyZWNvcmRzQ2hhbmdlZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVjb3Jkcy10cnVseS1jaGFuZ2VkLXJlc2V0dGluZy1yZW1vdmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICBvbGRSZWNvcmRJZHNDb3VudDogbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQubGVuZ3RoLFxuICAgICAgICBuZXdSZWNvcmRJZHNDb3VudDogY3VycmVudFJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBzZXRSZW1vdmVkUmVjb3JkSWRzKG5ldyBTZXQoKSlcbiAgICAgIC8vIFVwZGF0ZSB0aGUgb3JpZ2luYWwgcXVlcnkgcmVjb3JkIElEcyByZWZcbiAgICAgIGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50ID0gY3VycmVudFJlY29yZElkc1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZWNvcmRzLW5vdC1jaGFuZ2VkLXByZXNlcnZpbmctcmVtb3ZlZCcsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgZXhwYW5kIGFsbCB0byBxdWVyeUl0ZW0ncyByZXN1bHRFeHBhbmRCeURlZmF1bHQgc2V0dGluZ1xuICAgIHNldEV4cGFuZEFsbChjdXJyZW50SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQgPz8gZmFsc2UpXG4gICAgc2V0UXVlcnlEYXRhKHtcbiAgICAgIHJlY29yZHMsXG4gICAgICBwYWdlU2l6ZTogZGVmYXVsdFBhZ2VTaXplLFxuICAgICAgcGFnZTogMVxuICAgIH0pXG4gICAgXG4gICAgLy8gT25seSBhdXRvLXNlbGVjdCByZWNvcmRzIGlmOlxuICAgIC8vIDEuIFdlIGhhdmUgcmVjb3JkcyBhbmQgb3V0cHV0RFNcbiAgICAvLyAyLiBXZSBoYXZlbid0IGFscmVhZHkgc2VsZWN0ZWQgdGhlc2UgcmVjb3JkcyAoaGFzU2VsZWN0ZWRSZWYgaXMgZmFsc2UpXG4gICAgLy8gMy4gT1IgdGhlIHJlY29yZHMgaGF2ZSBhY3R1YWxseSBjaGFuZ2VkIChuZXcgcXVlcnkgcmVzdWx0cylcbiAgICAvLyA0LiBBTkQgd2UgZG9uJ3QgaGF2ZSBhbnkgcmVtb3ZlZCByZWNvcmRzICh0byBwcmV2ZW50IHJlLXNlbGVjdGluZyByZW1vdmVkIG9uZXMpXG4gICAgaWYgKHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwICYmIG91dHB1dERTICYmIFxuICAgICAgICAoIWhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgfHwgcmVjb3Jkc0NoYW5nZWQpICYmIFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzLnNpemUgPT09IDApIHtcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IHJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGNvbnN0IGZkciA9IHJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgICAgXG4gICAgICAvLyBTZWxlY3QgcmVjb3JkcyBhbmQgcHVibGlzaCBzZWxlY3Rpb24gbWVzc2FnZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICB0cnkge1xuICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2god2lkZ2V0SWQsIG91dHB1dERTLCByZWNvcmRJZHMsIGZkcilcbiAgICAgICAgaGFzU2VsZWN0ZWRSZWYuY3VycmVudCA9IHRydWUgLy8gTWFyayBhcyBzZWxlY3RlZFxuICAgICAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSByZWNvcmRJZHMgLy8gU3RvcmUgdGhlIElEcyB3ZSBzZWxlY3RlZFxuICAgICAgICBsYXN0U2VsZWN0ZWRGZWF0dXJlUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmRyIC8vIFN0b3JlIHRoZSBmdWxsIHJlY29yZHMgZm9yIHBvdGVudGlhbCByZXN0b3JhdGlvblxuICAgICAgICBcbiAgICAgICAgLy8gTm90aWZ5IEhlbHBlclNpbXBsZSBvZiBzZWxlY3Rpb24gY2hhbmdlXG4gICAgICAgIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgICAgY29uc3QgZGF0YVNvdXJjZUlkID0gb3JpZ2luRFM/LmlkXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbkV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdxdWVyeXNpbXBsZS1zZWxlY3Rpb24tY2hhbmdlZCcsIHtcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgcmVjb3JkSWRzLFxuICAgICAgICAgICAgZGF0YVNvdXJjZUlkLFxuICAgICAgICAgICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgfSxcbiAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoc2VsZWN0aW9uRXZlbnQpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VsZWN0IHF1ZXJ5IHJlc3VsdHMnXG4gICAgICAgIHNldFNlbGVjdGlvbkVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWZhaWxlZC1xdWVyeS1yZXN1bHQnLFxuICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyZWNvcmRzQ2hhbmdlZCAmJiByZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBJZiByZWNvcmRzIHdlcmUgY2xlYXJlZCwgcmVzZXQgdGhlIHNlbGVjdGlvbiBmbGFnXG4gICAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgIGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IFtdXG4gICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBlcnJvcnMgd2hlbiBjbGVhcmluZyByZWNvcmRzXG4gICAgfSBlbHNlIGlmIChyZW1vdmVkUmVjb3JkSWRzLnNpemUgPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdza2lwcGluZy1yZXNlbGVjdGlvbi1kdWUtdG8tcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzU2VsZWN0ZWRSZWY6IGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHJlY29yZHNDaGFuZ2VkOiByZWNvcmRzQ2hhbmdlZFxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtyZWNvcmRzLCBkZWZhdWx0UGFnZVNpemUsIG91dHB1dERTLCB3aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBxdWVyeUl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0LCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIGNsZWFyIHNlbGVjdGlvbiB3aGVuIHJlc3VsdFNlbGVjdE1vZGUgY2hhbmdlZFxuICAgIGlmIChvdXRwdXREUykge1xuICAgICAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKG91dHB1dERTKVxuICAgICAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2Uod2lkZ2V0SWQsIFtdLCBvdXRwdXREUywgdHJ1ZSlcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0ucmVzdWx0U2VsZWN0TW9kZSwgb3V0cHV0RFMsIHdpZGdldElkXSlcblxuICAvLyBVcGRhdGUgZXhwYW5kQWxsIHdoZW4gcXVlcnlJdGVtIGNoYW5nZXMgKGUuZy4sIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJpZXMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbmV3RXhwYW5kQWxsID0gY3VycmVudEl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0ID8/IGZhbHNlXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2V4cGFuZEFsbC1yZXNldC1ieS1xdWVyeUl0ZW0tY2hhbmdlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIHJlc3VsdEV4cGFuZEJ5RGVmYXVsdDogY3VycmVudEl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0LFxuICAgICAgbmV3RXhwYW5kQWxsLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBzZXRFeHBhbmRBbGwobmV3RXhwYW5kQWxsKVxuICAgIC8vIFJlc2V0IGluZGl2aWR1YWwgZXhwYW5zaW9uIHN0YXRlcyB3aGVuIHF1ZXJ5IGNoYW5nZXNcbiAgICBzZXRJdGVtRXhwYW5kU3RhdGVzKG5ldyBNYXAoKSlcbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZCwgcXVlcnlJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCwgd2lkZ2V0SWRdKVxuXG4gIC8qKlxuICAgKiBNb25pdG9yIG9yaWdpbiBkYXRhIHNvdXJjZSBzZWxlY3Rpb24gY2hhbmdlcyB0byBkZXRlY3Qgd2hlbiBvdGhlciB3aWRnZXRzIChsaWtlIG1hcCBpZGVudGlmeSlcbiAgICogY2xlYXIgb3VyIHNlbGVjdGlvbnMuIEVuaGFuY2VkIHdpdGggaWRlbnRpZnkgcG9wdXAgZGV0ZWN0aW9uIGZvciB0ZXN0aW5nIHNjZW5hcmlvcy5cbiAgICogV2F0Y2hlcyB0aGUgb3JpZ2luIGRhdGEgc291cmNlJ3Mgc2VsZWN0aW9uIHN0YXRlIGRpcmVjdGx5IHZpYSBwb2xsaW5nLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW91dHB1dERTKSByZXR1cm5cblxuICAgIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBpZiAoIW9yaWdpbkRTKSByZXR1cm5cblxuICAgIGNvbnN0IG9yaWdpbkRTSWQgPSBvcmlnaW5EUy5pZFxuICAgIGxldCBwcmV2aW91c1NlbGVjdGVkSWRzOiBzdHJpbmdbXSA9IFtdXG4gICAgbGV0IGlkZW50aWZ5UG9wdXBXYXNPcGVuID0gZmFsc2VcbiAgICBsZXQgbGFzdExvZ1RpbWUgPSAwXG4gICAgY29uc3QgTE9HX1RIUk9UVExFX01TID0gMTAwMCAvLyBUaHJvdHRsZSBsb2dzIHRvIG9uY2UgcGVyIHNlY29uZFxuICAgIFxuICAgIC8vIEluaXRpYWwgY2hlY2tcbiAgICBwcmV2aW91c1NlbGVjdGVkSWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgIGlkZW50aWZ5UG9wdXBXYXNPcGVuID0gaXNJZGVudGlmeVBvcHVwT3BlbigpXG5cbiAgICAvLyBXYXRjaCBmb3Igc2VsZWN0aW9uIGNoYW5nZXMgb24gdGhlIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IGNoZWNrU2VsZWN0aW9uID0gKCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkSWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgY29uc3Qgb3VyRXhwZWN0ZWRJZHMgPSBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnRcbiAgICAgIGNvbnN0IGhhc091clNlbGVjdGlvbiA9IG91ckV4cGVjdGVkSWRzLmxlbmd0aCA+IDBcbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBJc09wZW4gPSBpc0lkZW50aWZ5UG9wdXBPcGVuKClcbiAgICAgIFxuICAgICAgLy8gRGV0ZWN0IGlmIHNlbGVjdGlvbiB3YXMgY2xlYXJlZCBvciBjaGFuZ2VkIGV4dGVybmFsbHlcbiAgICAgIGNvbnN0IHdhc0NsZWFyZWQgPSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCA+IDAgJiYgY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMFxuICAgICAgY29uc3Qgd2FzQ2hhbmdlZCA9IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgKGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggIT09IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoIHx8XG4gICAgICAgICAhY3VycmVudFNlbGVjdGVkSWRzLmV2ZXJ5KGlkID0+IHByZXZpb3VzU2VsZWN0ZWRJZHMuaW5jbHVkZXMoaWQpKSlcbiAgICAgIFxuICAgICAgLy8gTkVXOiBEZXRlY3QgaWYgc2VsZWN0aW9uIHdhcyBhZGRlZCAod2VudCBmcm9tIGVtcHR5IHRvIGhhdmluZyByZWNvcmRzKVxuICAgICAgY29uc3Qgd2FzQWRkZWQgPSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMCAmJiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoID4gMFxuICAgICAgXG4gICAgICAvLyBUcmFjayBpZGVudGlmeSBwb3B1cCBzdGF0ZSBjaGFuZ2VzXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCA9ICFpZGVudGlmeVBvcHVwV2FzT3BlbiAmJiBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwSnVzdENsb3NlZCA9IGlkZW50aWZ5UG9wdXBXYXNPcGVuICYmICFpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwU3RpbGxPcGVuID0gaWRlbnRpZnlQb3B1cFdhc09wZW4gJiYgaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgXG4gICAgICAvLyBMb2cgaWRlbnRpZnkgcG9wdXAgc3RhdGUgY2hhbmdlc1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICAgICAgaWYgKGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkIHx8IGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnU0VMRUNUSU9OJywge1xuICAgICAgICAgIGV2ZW50OiBpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCA/ICdpZGVudGlmeS1wb3B1cC1vcGVuZWQnIDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZCcsXG4gICAgICAgICAgb3JpZ2luRFNJZCxcbiAgICAgICAgICBvdXJTZWxlY3Rpb25Db3VudDogb3VyRXhwZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgIGN1cnJlbnRTZWxlY3Rpb25Db3VudDogY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgaWRlbnRpZnkgcG9wdXAganVzdCBjbG9zZWQgYW5kIHNlbGVjdGlvbiB3YXMgY2xlYXJlZCwgZGlzcGF0Y2ggcmVzdG9yZSBldmVudFxuICAgICAgICBpZiAoaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQgJiYgd2FzQ2xlYXJlZCAmJiBoYXNPdXJTZWxlY3Rpb24gJiYgb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHJlc3RvcmVFdmVudCA9IG5ldyBDdXN0b21FdmVudChSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5ULCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICAgIHJlY29yZElkczogb3VyRXhwZWN0ZWRJZHMsXG4gICAgICAgICAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHJlc3RvcmVFdmVudClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1NFTEVDVElPTicsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtcmVxdWVzdGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgcmVjb3JkQ291bnQ6IG91ckV4cGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTG9nIEFMTCBzZWxlY3Rpb24gY2hhbmdlcyAobm90IGp1c3Qgd2hlbiB3ZSBoYXZlIG91ciBvd24gc2VsZWN0aW9uKVxuICAgICAgaWYgKHdhc0NsZWFyZWQgfHwgd2FzQ2hhbmdlZCB8fCB3YXNBZGRlZCkge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIG1hdGNoZXMgb3VyIGV4cGVjdGVkIHNlbGVjdGlvblxuICAgICAgICBjb25zdCBtYXRjaGVzT3VyU2VsZWN0aW9uID0gaGFzT3VyU2VsZWN0aW9uICYmIFxuICAgICAgICAgIG91ckV4cGVjdGVkSWRzLmxlbmd0aCA9PT0gY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCAmJlxuICAgICAgICAgIG91ckV4cGVjdGVkSWRzLmV2ZXJ5KGlkID0+IGN1cnJlbnRTZWxlY3RlZElkcy5pbmNsdWRlcyhpZCkpXG4gICAgICAgIFxuICAgICAgICAvLyBEZXRlcm1pbmUgd2hhdCB3b3VsZCBoYXBwZW4gKGZvciB0ZXN0aW5nL2xvZ2dpbmcpXG4gICAgICAgIGNvbnN0IHdvdWxkUmVzdG9yZSA9IHdhc0NsZWFyZWQgJiYgaWRlbnRpZnlQb3B1cElzT3BlbiAmJiBoYXNPdXJTZWxlY3Rpb24gJiYgb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID4gMFxuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHNjZW5hcmlvXG4gICAgICAgIGxldCBzY2VuYXJpbyA9ICdVbmtub3duJ1xuICAgICAgICBpZiAod2FzQWRkZWQgJiYgIWhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gJ1RFU1QgU0NFTkFSSU8gNDogQW5vdGhlciB3aWRnZXQgc2VsZWN0ZWQgcmVjb3JkcyAod2UgaGF2ZSBubyBzZWxlY3Rpb24pJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0NoYW5nZWQgJiYgIW1hdGNoZXNPdXJTZWxlY3Rpb24gJiYgIWhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gJ1RFU1QgU0NFTkFSSU8gNTogQW5vdGhlciB3aWRnZXQgY2hhbmdlZCBzZWxlY3Rpb24gKHdlIGhhdmUgbm8gc2VsZWN0aW9uKSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNDaGFuZ2VkICYmICFtYXRjaGVzT3VyU2VsZWN0aW9uICYmIGhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgICAgICAgPyAnVEVTVCBTQ0VOQVJJTyAyOiBRdWVyeSDihpIgSWRlbnRpZnkgKHNlbGVjdGlvbiBjaGFuZ2VkLCBub3QgY2xlYXJlZCkg4oaSIFdvdWxkIE5PVCByZXN0b3JlJ1xuICAgICAgICAgICAgOiAnVEVTVCBTQ0VOQVJJTyAzOiBRdWVyeSDihpIgQW5vdGhlciBRdWVyeVNpbXBsZSB3aWRnZXQg4oaSIFdvdWxkIE5PVCByZXN0b3JlJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0NsZWFyZWQgJiYgaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICAgICAgICA/ICdURVNUIFNDRU5BUklPIDE6IFF1ZXJ5IOKGkiBJZGVudGlmeSDihpIgV291bGQgcmVzdG9yZSdcbiAgICAgICAgICAgIDogJ1RFU1QgU0NFTkFSSU8gMzogUXVlcnkg4oaSIEFub3RoZXIgUXVlcnlTaW1wbGUgd2lkZ2V0IChjbGVhcmVkKSDihpIgV291bGQgTk9UIHJlc3RvcmUnXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQWRkZWQgJiYgaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSBtYXRjaGVzT3VyU2VsZWN0aW9uXG4gICAgICAgICAgICA/ICdPdXIgd2lkZ2V0IHNlbGVjdGVkIHJlY29yZHMnXG4gICAgICAgICAgICA6ICdBbm90aGVyIHdpZGdldCBzZWxlY3RlZCBkaWZmZXJlbnQgcmVjb3JkcydcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTG9nIGRldGVjdGlvbiB3aXRoIGlkZW50aWZ5IHBvcHVwIHN0YXRlICh0aHJvdHRsZWQpXG4gICAgICAgIGlmIChub3cgLSBsYXN0TG9nVGltZSA+IExPR19USFJPVFRMRV9NUykge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnU0VMRUNUSU9OJywge1xuICAgICAgICAgICAgZXZlbnQ6IHdhc0NsZWFyZWQgPyAnc2VsZWN0aW9uLWNsZWFyZWQnIDogd2FzQ2hhbmdlZCA/ICdzZWxlY3Rpb24tY2hhbmdlZCcgOiAnc2VsZWN0aW9uLWFkZGVkJyxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQsXG4gICAgICAgICAgICBvdXJFeHBlY3RlZENvdW50OiBvdXJFeHBlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkQ291bnQ6IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICB3YXNDbGVhcmVkLFxuICAgICAgICAgICAgd2FzQ2hhbmdlZCxcbiAgICAgICAgICAgIHdhc0FkZGVkLFxuICAgICAgICAgICAgaGFzT3VyU2VsZWN0aW9uLFxuICAgICAgICAgICAgbWF0Y2hlc091clNlbGVjdGlvbixcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBJc09wZW4sXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCxcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBTdGlsbE9wZW4sXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwSnVzdENsb3NlZCxcbiAgICAgICAgICAgIHdvdWxkUmVzdG9yZSxcbiAgICAgICAgICAgIG91ckV4cGVjdGVkSWRzOiBvdXJFeHBlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRJZHM6IHByZXZpb3VzU2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJZHM6IGN1cnJlbnRTZWxlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgbm90ZTogd291bGRSZXN0b3JlIFxuICAgICAgICAgICAgICA/ICdXb3VsZCByZXN0b3JlIHNlbGVjdGlvbiAoY2xlYXJlZCArIGlkZW50aWZ5IHBvcHVwIG9wZW4pJ1xuICAgICAgICAgICAgICA6IGlkZW50aWZ5UG9wdXBJc09wZW4gJiYgd2FzQ2hhbmdlZFxuICAgICAgICAgICAgICAgID8gJ0lkZW50aWZ5IHBvcHVwIG9wZW4gYnV0IHNlbGVjdGlvbiBjaGFuZ2VkIChub3QgY2xlYXJlZCkgLSB3b3VsZCBub3QgcmVzdG9yZSdcbiAgICAgICAgICAgICAgICA6IHdhc0NsZWFyZWQgJiYgIWlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgICAgICAgICAgICAgID8gJ1NlbGVjdGlvbiBjbGVhcmVkLCBjaGVja2luZyBpZiBpZGVudGlmeSBwb3B1cCBvcGVucy4uLidcbiAgICAgICAgICAgICAgICAgIDogd2FzQWRkZWRcbiAgICAgICAgICAgICAgICAgICAgPyBoYXNPdXJTZWxlY3Rpb24gJiYgbWF0Y2hlc091clNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgID8gJ091ciB3aWRnZXQgc2VsZWN0ZWQgcmVjb3JkcydcbiAgICAgICAgICAgICAgICAgICAgICA6IGhhc091clNlbGVjdGlvbiAmJiAhbWF0Y2hlc091clNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgPyAnQW5vdGhlciB3aWRnZXQgc2VsZWN0ZWQgZGlmZmVyZW50IHJlY29yZHMnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdTZWxlY3Rpb24gYWRkZWQgKGJ5IGFub3RoZXIgd2lkZ2V0IG9yIGV4dGVybmFsIHNvdXJjZSknXG4gICAgICAgICAgICAgICAgICAgIDogJ05vIGlkZW50aWZ5IHBvcHVwIGRldGVjdGVkIC0gd291bGQgbm90IHJlc3RvcmUnXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBsYXN0TG9nVGltZSA9IG5vd1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHByZXZpb3VzU2VsZWN0ZWRJZHMgPSBbLi4uY3VycmVudFNlbGVjdGVkSWRzXVxuICAgICAgaWRlbnRpZnlQb3B1cFdhc09wZW4gPSBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgcGVyaW9kaWNhbGx5IChldmVyeSA1MDBtcylcbiAgICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoY2hlY2tTZWxlY3Rpb24sIDUwMClcbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKVxuICAgIH1cbiAgfSwgW291dHB1dERTXSlcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCByZXN1bHRzLiBSZXNldHMgbG9jYWwgc3RhdGUgYW5kIGRlbGVnYXRlcyB0byBwYXJlbnQncyBjbGVhclJlc3VsdCBtZXRob2QuXG4gICAqL1xuICBjb25zdCBjbGVhclJlc3VsdHMgPSAoKSA9PiB7XG4gICAgLy8gUmVzZXQgbG9jYWwgc2VsZWN0aW9uIGZsYWdzXG4gICAgaGFzU2VsZWN0ZWRSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gW11cbiAgICAvLyBSZXNldCBsb2NhbCBxdWVyeSBkYXRhIHN0YXRlXG4gICAgc2V0UXVlcnlEYXRhKG51bGwpXG4gICAgc2V0UmVtb3ZlZFJlY29yZElkcyhuZXcgU2V0KCkpXG4gICAgLy8gQ2xlYXIgZXJyb3Igc3RhdGUgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbClcbiAgICAvLyBEZWxlZ2F0ZSB0byBwYXJlbnQncyBjbGVhclJlc3VsdCBtZXRob2QgKHZpYSBvbk5hdkJhY2spIHdoaWNoIGhhbmRsZXNcbiAgICAvLyBjbGVhcmluZyBzZWxlY3Rpb24gZnJvbSBtYXAsIHB1Ymxpc2hpbmcgbWVzc2FnZXMsIGV0Yy5cbiAgICBvbk5hdkJhY2sodHJ1ZSlcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZVJlbmRlckRvbmUgPSBSZWFjdC51c2VDYWxsYmFjaygoeyBkYXRhSXRlbXMsIHBhZ2VTaXplLCBwYWdlIH0pID0+IHtcbiAgICBjb25zb2xlLmxvZygnW1F1ZXJ5UmVzdWx0XSBoYW5kbGVSZW5kZXJEb25lIGNhbGxlZCcsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgZGF0YUl0ZW1zQ291bnQ6IGRhdGFJdGVtcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBwYWdlU2l6ZSxcbiAgICAgIHBhZ2UsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFVzZSByZWYgdG8gZ2V0IGxhdGVzdCByZW1vdmVkUmVjb3JkSWRzIChhdm9pZHMgc3RhbGUgY2xvc3VyZSBpc3N1ZXMgd2l0aCBsYXp5IGxvYWRpbmcpXG4gICAgY29uc3QgY3VycmVudFJlbW92ZWRJZHMgPSByZW1vdmVkUmVjb3JkSWRzUmVmLmN1cnJlbnRcbiAgICBcbiAgICAvLyBGaWx0ZXIgb3V0IHJlbW92ZWQgcmVjb3JkcyBGSVJTVCAtIGJlZm9yZSBhbnkgc2VsZWN0aW9uIGxvZ2ljXG4gICAgLy8gVGhpcyBlbnN1cmVzIHJlbW92ZWQgcmVjb3JkcyBzdGF5IHJlbW92ZWQgZXZlbiBkdXJpbmcgbGF6eSBsb2FkaW5nXG4gICAgY29uc3QgZmlsdGVyZWRJdGVtcyA9IGRhdGFJdGVtcz8uZmlsdGVyKGl0ZW0gPT4gIWN1cnJlbnRSZW1vdmVkSWRzLmhhcyhpdGVtLmdldElkKCkpKSB8fCBbXVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHF1ZXJ5RGF0YSBoYXMgYWN0dWFsbHkgY2hhbmdlZCBiZWZvcmUgdXBkYXRpbmcgc3RhdGVcbiAgICAvLyBUaGlzIHByZXZlbnRzIHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMgdGhhdCByZXNldCBzY3JvbGwgcG9zaXRpb25cbiAgICBjb25zdCBjdXJyZW50UmVjb3JkcyA9IHF1ZXJ5RGF0YT8ucmVjb3JkcyB8fCBbXVxuICAgIGNvbnN0IGN1cnJlbnRSZWNvcmRJZHMgPSBjdXJyZW50UmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpLnNvcnQoKVxuICAgIGNvbnN0IG5ld1JlY29yZElkcyA9IGZpbHRlcmVkSXRlbXMubWFwKHIgPT4gci5nZXRJZCgpKS5zb3J0KClcbiAgICBjb25zdCBkYXRhQ2hhbmdlZCA9IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoICE9PSBuZXdSZWNvcmRJZHMubGVuZ3RoIHx8XG4gICAgICAhY3VycmVudFJlY29yZElkcy5ldmVyeSgoaWQsIGlkeCkgPT4gaWQgPT09IG5ld1JlY29yZElkc1tpZHhdKSB8fFxuICAgICAgcXVlcnlEYXRhPy5wYWdlU2l6ZSAhPT0gcGFnZVNpemUgfHxcbiAgICAgIHF1ZXJ5RGF0YT8ucGFnZSAhPT0gcGFnZVxuICAgIFxuICAgIC8vIE9ubHkgdXBkYXRlIHN0YXRlIGlmIGRhdGEgaGFzIGFjdHVhbGx5IGNoYW5nZWRcbiAgICBpZiAoZGF0YUNoYW5nZWQpIHtcbiAgICAgIHNldFF1ZXJ5RGF0YSh7XG4gICAgICAgIHJlY29yZHM6IGZpbHRlcmVkSXRlbXMsXG4gICAgICAgIHBhZ2VTaXplLFxuICAgICAgICBwYWdlXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBPbmx5IHNlbGVjdCByZWNvcmRzIHRoYXQgYXJlIE5PVCByZW1vdmVkXG4gICAgLy8gSU1QT1JUQU5UOiBPbmx5IHJlLXNlbGVjdCBpZiB0aGUgc2VsZWN0aW9uIGhhcyBhY3R1YWxseSBjaGFuZ2VkIHRvIGF2b2lkIHJlc2V0dGluZyBzY3JvbGwgcG9zaXRpb25cbiAgICBpZiAoZmlsdGVyZWRJdGVtcyAmJiBmaWx0ZXJlZEl0ZW1zLmxlbmd0aCA+IDAgJiYgb3V0cHV0RFMpIHtcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IGZpbHRlcmVkSXRlbXMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGNvbnN0IGZkciA9IGZpbHRlcmVkSXRlbXMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgICAgXG4gICAgICAvLyBDaGVjayB3aGF0J3MgY3VycmVudGx5IHNlbGVjdGVkIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHJlLXNlbGVjdGlvbiAod2hpY2ggcmVzZXRzIHNjcm9sbClcbiAgICAgIGNvbnN0IGN1cnJlbnRseVNlbGVjdGVkSWRzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgY29uc3Qgc2VsZWN0aW9uQ2hhbmdlZCA9IGN1cnJlbnRseVNlbGVjdGVkSWRzLmxlbmd0aCAhPT0gcmVjb3JkSWRzLmxlbmd0aCB8fFxuICAgICAgICAhcmVjb3JkSWRzLmV2ZXJ5KGlkID0+IGN1cnJlbnRseVNlbGVjdGVkSWRzLmluY2x1ZGVzKGlkKSlcbiAgICAgIFxuICAgICAgLy8gT25seSBzZWxlY3QgaWYgdGhlIHNlbGVjdGlvbiBoYXMgYWN0dWFsbHkgY2hhbmdlZFxuICAgICAgaWYgKHNlbGVjdGlvbkNoYW5nZWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCh3aWRnZXRJZCwgb3V0cHV0RFMsIHJlY29yZElkcywgZmRyKVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYW5kbGVSZW5kZXJEb25lLXNlbGVjdGluZy1maWx0ZXJlZC1yZWNvcmRzJyxcbiAgICAgICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgICAgIGRhdGFJdGVtc0NvdW50OiBkYXRhSXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgZmlsdGVyZWRJdGVtc0NvdW50OiBmaWx0ZXJlZEl0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogY3VycmVudFJlbW92ZWRJZHMuc2l6ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbkNoYW5nZWQ6IHRydWUsXG4gICAgICAgICAgICBjdXJyZW50bHlTZWxlY3RlZENvdW50OiBjdXJyZW50bHlTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBuZXdTZWxlY3Rpb25Db3VudDogcmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQtaGFuZGxlUmVuZGVyRG9uZScsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZElkcy5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ2hhbmRsZVJlbmRlckRvbmUtc2tpcHBpbmctcmVzZWxlY3Rpb24nLFxuICAgICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICBmaWx0ZXJlZEl0ZW1zQ291bnQ6IGZpbHRlcmVkSXRlbXMubGVuZ3RoLFxuICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogY3VycmVudFJlbW92ZWRJZHMuc2l6ZSxcbiAgICAgICAgICByZWFzb246ICdzZWxlY3Rpb24tdW5jaGFuZ2VkJyxcbiAgICAgICAgICBjdXJyZW50bHlTZWxlY3RlZENvdW50OiBjdXJyZW50bHlTZWxlY3RlZElkcy5sZW5ndGhcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtvdXRwdXREUywgd2lkZ2V0SWQsIHF1ZXJ5RGF0YV0pXG5cbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2Uob3V0cHV0RFM/LmlkKVxuICAgIGNvbnN0IGRzUmVjb3JkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgIGNvbnN0IHNlbGVjdGVkSWRzID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICBcbiAgICAvLyBDYXB0dXJlIHJlY29yZHMgcHJvcCBiZWZvcmUgdXNpbmcgaXQgKHRvIGF2b2lkIHNoYWRvd2luZylcbiAgICBjb25zdCByZWNvcmRzUHJvcCA9IHJlY29yZHNcbiAgICBcbiAgICAvLyBEZWJ1ZzogTG9nIHdoYXQgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Ugc2Vlc1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS1maXJlZCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUz8uaWQsXG4gICAgICBkc0lkOiBkcz8uaWQsXG4gICAgICBzZWxlY3RlZFJlY29yZHNGcm9tRFM6IGRzUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzZWxlY3RlZElkc0Zyb21EUzogc2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgY3VycmVudFNlbGVjdGVkUmVjb3Jkc1N0YXRlOiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgcmVjb3Jkc1Byb3BDb3VudDogcmVjb3Jkc1Byb3A/Lmxlbmd0aCB8fCAwLFxuICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzLnNpemUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIHdlIGhhdmUgcmVjb3JkcyBpbiB0aGUgcHJvcCAoYWNjdW11bGF0ZWQgcmVjb3JkcykgYnV0IERTIHNob3dzIDAgc2VsZWN0ZWQsXG4gICAgLy8gYW5kIHdlIGN1cnJlbnRseSBoYXZlIHNlbGVjdGVkUmVjb3JkcywgdGhpcyBpcyBsaWtlbHkgYSBxdWVyeSBzd2l0Y2ggaW4gXCJBZGQgdG9cIiBtb2RlXG4gICAgLy8gd2hlcmUgcmUtc2VsZWN0aW9uIGhhc24ndCBoYXBwZW5lZCB5ZXQuIERvbid0IGNsZWFyIHNlbGVjdGVkUmVjb3JkcyAtIHdhaXQgZm9yIHJlLXNlbGVjdGlvbi5cbiAgICBpZiAocmVjb3Jkc1Byb3AgJiYgcmVjb3Jkc1Byb3AubGVuZ3RoID4gMCAmJiBzZWxlY3RlZElkcy5sZW5ndGggPT09IDAgJiYgc2VsZWN0ZWRSZWNvcmRzICYmIHNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS1za2lwcGluZy1jbGVhci1kdXJpbmctcXVlcnktc3dpdGNoJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWFzb246ICd3YWl0aW5nLWZvci1yZXNlbGVjdGlvbicsXG4gICAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHNQcm9wLmxlbmd0aCxcbiAgICAgICAgY3VycmVudFNlbGVjdGVkUmVjb3Jkc0NvdW50OiBzZWxlY3RlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgcmV0dXJuIC8vIFNraXAgdXBkYXRpbmcgLSByZS1zZWxlY3Rpb24gaXMgY29taW5nXG4gICAgfVxuICAgIFxuICAgIC8vIElNUE9SVEFOVDogRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHMgZnJvbSBEUyBzZWxlY3Rpb24gYmVmb3JlIGNvbXBhcmluZy9zeW5jaW5nXG4gICAgLy8gVGhpcyBwcmV2ZW50cyByZW1vdmVkIHJlY29yZHMgZnJvbSBiZWluZyByZS1hZGRlZCB3aGVuIHNjcm9sbGluZyB0cmlnZ2VycyB0aGlzIGNhbGxiYWNrXG4gICAgY29uc3QgZmlsdGVyZWREc1JlY29yZHMgPSBkc1JlY29yZHM/LmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKSA/PyBbXVxuICAgIGNvbnN0IGZpbHRlcmVkU2VsZWN0ZWRJZHMgPSBzZWxlY3RlZElkcy5maWx0ZXIoaWQgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKGlkKSlcbiAgICBcbiAgICAvLyBJZiBEUyBoYXMgbW9yZSBzZWxlY3RlZCB0aGFuIG91ciBzdGF0ZSwgYnV0IHRoZSBkaWZmZXJlbmNlIGlzIGVudGlyZWx5IHJlbW92ZWQgcmVjb3JkcywgZG9uJ3Qgc3luY1xuICAgIGlmIChmaWx0ZXJlZFNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gKHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDApICYmIHNlbGVjdGVkSWRzLmxlbmd0aCA+IGZpbHRlcmVkU2VsZWN0ZWRJZHMubGVuZ3RoKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS1za2lwcGluZy1zeW5jLWR1ZS10by1yZW1vdmVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogJ2RzLXNlbGVjdGlvbi1pbmNsdWRlcy1yZW1vdmVkLXJlY29yZHMnLFxuICAgICAgICBkc1NlbGVjdGVkQ291bnQ6IHNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgZmlsdGVyZWRDb3VudDogZmlsdGVyZWRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgIGNvbXBvbmVudFN0YXRlQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplXG4gICAgICB9KVxuICAgICAgcmV0dXJuIC8vIFNraXAgc3luY2luZyAtIHRoZSBtaXNtYXRjaCBpcyBkdWUgdG8gcmVtb3ZlZCByZWNvcmRzXG4gICAgfVxuICAgIFxuICAgIGxldCBzaG91bGRVcGRhdGUgPSBmYWxzZVxuICAgIGlmIChmaWx0ZXJlZFNlbGVjdGVkSWRzLmxlbmd0aCAhPT0gc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGgpIHtcbiAgICAgIHNob3VsZFVwZGF0ZSA9IHRydWVcbiAgICB9IGVsc2UgeyAvLyBlcXVhbCBsZW5ndGhcbiAgICAgIHNob3VsZFVwZGF0ZSA9IGZpbHRlcmVkU2VsZWN0ZWRJZHMuc29tZShpZCA9PiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHNlbGVjdGVkUmVjb3Jkcy5maW5kKChpdGVtKSA9PiBpdGVtLmdldElkKCkgPT09IGlkKVxuICAgICAgICByZXR1cm4gdGFyZ2V0ID09IG51bGxcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXVwZGF0aW5nLXNlbGVjdGVkUmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgb2xkQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIG5ld0NvdW50OiBmaWx0ZXJlZERzUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG5vdGU6ICdmaWx0ZXJlZC1vdXQtcmVtb3ZlZC1yZWNvcmRzJ1xuICAgICAgfSlcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXVwZGF0aW5nLXNlbGVjdGVkUmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgb2xkQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIG5ld0NvdW50OiBmaWx0ZXJlZERzUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG9sZFNlbGVjdGVkSWRzOiAoc2VsZWN0ZWRSZWNvcmRzIHx8IFtdKS5tYXAociA9PiByLmdldElkKCkpLnNsaWNlKDAsIDUpLFxuICAgICAgICBuZXdTZWxlY3RlZElkczogZmlsdGVyZWRTZWxlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgbm90ZTogJ2ZpbHRlcmVkLW91dC1yZW1vdmVkLXJlY29yZHMnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBzZXRTZWxlY3RlZFJlY29yZHMoZmlsdGVyZWREc1JlY29yZHMpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXNraXBwaW5nLXVwZGF0ZScsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnbm8tY2hhbmdlLWRldGVjdGVkJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW291dHB1dERTPy5pZCwgc2VsZWN0ZWRSZWNvcmRzLCB3aWRnZXRJZCwgcmVjb3JkcywgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyB0aGUgdGlwIG1lc3NhZ2Ugc2hvd2luZyBob3cgbWFueSBmZWF0dXJlcyBhcmUgZGlzcGxheWVkLlxuICAgKiBGaWx0ZXJzIG91dCByZW1vdmVkIHJlY29yZHMgdG8gc2hvdyBhY2N1cmF0ZSBjb3VudHMuXG4gICAqIFxuICAgKiBAcmV0dXJucyBGb3JtYXR0ZWQgc3RyaW5nIGxpa2UgXCJGZWF0dXJlcyBkaXNwbGF5ZWQ6IDExOCAvIDEyMVwiXG4gICAqL1xuICBjb25zdCBnZXRUaXBNZXNzYWdlID0gKCkgPT4ge1xuICAgIGlmIChxdWVyeURhdGEgJiYgcXVlcnlEYXRhLnJlY29yZHMpIHtcbiAgICAgIC8vIEZpbHRlciBvdXQgcmVtb3ZlZCByZWNvcmRzIGZvciBkaXNwbGF5IGNvdW50XG4gICAgICBjb25zdCBkaXNwbGF5ZWRSZWNvcmRzID0gcXVlcnlEYXRhLnJlY29yZHMuZmlsdGVyKChyZWNvcmQ6IERhdGFSZWNvcmQpID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpXG4gICAgICBjb25zdCBkaXNwbGF5ZWRDb3VudCA9IGRpc3BsYXllZFJlY29yZHMubGVuZ3RoXG4gICAgICBcbiAgICAgIC8vIEZPUkNFRDogQWx3YXlzIFNpbXBsZUxpc3QsIHNvIGFsd2F5cyB1c2Ugc2ltcGxlIGRpc3BsYXkgZm9ybWF0XG4gICAgICByZXR1cm4gYCR7Z2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVzRGlzcGxheWVkJyl9OiAke2Rpc3BsYXllZENvdW50fSAvICR7cmVzdWx0Q291bnR9YFxuICAgICAgY29uc3QgeyBwYWdlID0gMSwgcGFnZVNpemUgPSBkZWZhdWx0UGFnZVNpemUgfSA9IHF1ZXJ5RGF0YVxuICAgICAgY29uc3QgZnJvbSA9IChwYWdlIC0gMSkgKiBwYWdlU2l6ZSArIDFcbiAgICAgIGNvbnN0IHRvID0gZnJvbSArIHBhZ2VTaXplIC0gMVxuICAgICAgaWYgKHJlc3VsdENvdW50ID4gMCkge1xuICAgICAgICByZXR1cm4gYCR7Z2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVzRGlzcGxheWVkJyl9OiAke2Zyb219IC0gJHtNYXRoLm1pbih0bywgZGlzcGxheWVkQ291bnQpfSAvICR7cmVzdWx0Q291bnR9YFxuICAgICAgfVxuICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogMCAtIDAgLyAwYFxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIGV4cGFuZC9jb2xsYXBzZSBzdGF0ZSBmb3IgYWxsIHJlc3VsdCBpdGVtcy5cbiAgICogV2hlbiB0b2dnbGVkLCBhbGwgcmVzdWx0IGl0ZW1zIHdpbGwgYmUgZXhwYW5kZWQgb3IgY29sbGFwc2VkIHRvZ2V0aGVyLlxuICAgKiBVcGRhdGVzIGluZGl2aWR1YWwgaXRlbSBleHBhbnNpb24gc3RhdGVzIGluIHRoZSBtYXAgdG8gbWFpbnRhaW4gc3RhdGUgd2hlbiBpdGVtcyBhcmUgcmVtb3ZlZC5cbiAgICovXG4gIGNvbnN0IHRvZ2dsZUV4cGFuZEFsbCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRFeHBhbmRBbGwocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdWYWx1ZSA9ICFwcmV2XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICd0b2dnbGVFeHBhbmRBbGwtY2xpY2tlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBwcmV2aW91c1ZhbHVlOiBwcmV2LFxuICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgYWxsIGN1cnJlbnQgaXRlbXMgaW4gdGhlIG1hcCB3aXRoIHRoZSBuZXcgZXhwYW5zaW9uIHN0YXRlXG4gICAgICBzZXRJdGVtRXhwYW5kU3RhdGVzKHByZXZNYXAgPT4ge1xuICAgICAgICBjb25zdCBuZXdNYXAgPSBuZXcgTWFwKHByZXZNYXApXG4gICAgICAgIC8vIEdldCBhbGwgY3VycmVudCByZWNvcmQgSURzIGZyb20gZmlsdGVyZWQgcmVjb3Jkc1xuICAgICAgICBjb25zdCBhbGxSZWNvcmRJZHMgPSBmaWx0ZXJlZFJlY29yZHNGb3JMaXN0Lm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgYWxsUmVjb3JkSWRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgIG5ld01hcC5zZXQoaWQsIG5ld1ZhbHVlKVxuICAgICAgICB9KVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgICBldmVudDogJ2l0ZW1FeHBhbmRTdGF0ZXMtdXBkYXRlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgICAgdXBkYXRlZENvdW50OiBhbGxSZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICAgIHJlY29yZElkczogYWxsUmVjb3JkSWRzLnNsaWNlKDAsIDEwKSwgLy8gTG9nIGZpcnN0IDEwIElEc1xuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gbmV3TWFwXG4gICAgICB9KVxuICAgICAgXG4gICAgICByZXR1cm4gbmV3VmFsdWVcbiAgICB9KVxuICB9LCBbd2lkZ2V0SWQsIGZpbHRlcmVkUmVjb3Jkc0Zvckxpc3RdKVxuXG4gIGNvbnN0IHJlc3VsdFVzZU91dHB1dERhdGFTb3VyY2UgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gSW1tdXRhYmxlKHtcbiAgICAgIGRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZCxcbiAgICAgIG1haW5EYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRcbiAgICB9KVxuICB9LCBbcXVlcnlJdGVtPy5vdXRwdXREYXRhU291cmNlSWRdKVxuXG4gIGNvbnN0IGhhbmRsZUVzY2FwZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gIH0sIFtdKVxuXG4gIC8vIEtlZXAgcmVjb3JkcyBzZWxlY3RlZCBhbmQgem9vbSB0byBjbGlja2VkIHJlY29yZFxuICAvLyBSZWNvcmRzIHJlbWFpbiBzZWxlY3RlZCBhcyBsb25nIGFzIHRoZXkncmUgaW4gdGhlIHJlc3VsdHNcbiAgLy8gQ2xpY2tpbmcgYSByZWNvcmQgYWx3YXlzIHpvb21zIHRvIGl0IG9uIHRoZSBtYXAgKHRoaXMgYmVoYXZpb3IgaXMgYWx3YXlzIGVuYWJsZWQpXG4gIGNvbnN0IHRvZ2dsZVNlbGVjdGlvbiA9IFJlYWN0LnVzZUNhbGxiYWNrKChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4ge1xuICAgIC8vIEVuc3VyZSB0aGUgY2xpY2tlZCByZWNvcmQgaXMgc2VsZWN0ZWQgKGl0IHNob3VsZCBhbHJlYWR5IGJlLCBidXQgZW5zdXJlIGl0KVxuICAgIGNvbnN0IHNlbGVjdGVkRGF0YXMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSA/PyBbXVxuICAgIGNvbnN0IHNlbGVjdGVkSWRzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSA/PyBbXVxuICAgIGNvbnN0IGRhdGFJZCA9IGRhdGEuZ2V0SWQoKVxuICAgIFxuICAgIC8vIElmIHRoaXMgcmVjb3JkIGlzbid0IGFscmVhZHkgc2VsZWN0ZWQsIGFkZCBpdCB0byB0aGUgc2VsZWN0aW9uXG4gICAgaWYgKCFzZWxlY3RlZElkcy5pbmNsdWRlcyhkYXRhSWQpKSB7XG4gICAgICBjb25zdCB1cGRhdGVkU2VsZWN0ZWREYXRhcyA9IFsuLi5zZWxlY3RlZERhdGFzLCBkYXRhXVxuICAgICAgY29uc3QgcmVjb3JkSWRzID0gdXBkYXRlZFNlbGVjdGVkRGF0YXMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIFxuICAgICAgLy8gU2VsZWN0IHJlY29yZHMgYW5kIHB1Ymxpc2ggc2VsZWN0aW9uIG1lc3NhZ2UgdXNpbmcgdXRpbGl0eSBmdW5jdGlvblxuICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2god2lkZ2V0SWQsIG91dHB1dERTLCByZWNvcmRJZHMsIHVwZGF0ZWRTZWxlY3RlZERhdGFzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sIHRydWUpXG4gICAgfVxuICAgIFxuICAgIC8vIFpvb20gdG8gdGhlIGNsaWNrZWQgcmVjb3JkIHVzaW5nIGRhdGEgYWN0aW9ucyAoYWx3YXlzIGVuYWJsZWQgLSB1c2VyIHdhbnRzIHRvIGtlZXAgdGhpcyBiZWhhdmlvcilcbiAgICBjb25zdCBkYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgICByZWNvcmRzOiBbZGF0YV0sXG4gICAgICB0eXBlOiAnc2VsZWN0ZWQnLFxuICAgICAgbmFtZTogb3V0cHV0RFMuZ2V0TGFiZWwoKVxuICAgIH1cbiAgICBcbiAgICAvLyBHZXQgYXZhaWxhYmxlIGRhdGEgYWN0aW9ucyBhbmQgZmluZCB0aGUgem9vbVRvRmVhdHVyZSBhY3Rpb25cbiAgICBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN1cHBvcnRlZEFjdGlvbnMod2lkZ2V0SWQsIFtkYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMpXG4gICAgICAudGhlbihhY3Rpb25DYXRlZ29yaWVzID0+IHtcbiAgICAgICAgLy8gTG9vayBmb3Igem9vbVRvRmVhdHVyZSBhY3Rpb24gaW4gYW55IGNhdGVnb3J5XG4gICAgICAgIGxldCB6b29tQWN0aW9uOiBhbnkgPSBudWxsXG4gICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgaW4gYWN0aW9uQ2F0ZWdvcmllcykge1xuICAgICAgICAgIGNvbnN0IGFjdGlvbnMgPSBhY3Rpb25DYXRlZ29yaWVzW2NhdGVnb3J5XVxuICAgICAgICAgIHpvb21BY3Rpb24gPSBhY3Rpb25zLmZpbmQoKGFjdGlvbjogYW55KSA9PiBhY3Rpb24ubmFtZSA9PT0gJ3pvb21Ub0ZlYXR1cmUnIHx8IGFjdGlvbi5pZCA9PT0gJ3pvb21Ub0ZlYXR1cmUnKVxuICAgICAgICAgIGlmICh6b29tQWN0aW9uKSBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHpvb21BY3Rpb24pIHtcbiAgICAgICAgICAvLyBFeGVjdXRlIHRoZSB6b29tIGFjdGlvblxuICAgICAgICAgIHJldHVybiBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmV4ZWN1dGVEYXRhQWN0aW9uKHpvb21BY3Rpb24sIFtkYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMsIHdpZGdldElkKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgLy8gU2lsZW50bHkgaGFuZGxlIGVycm9yc1xuICAgICAgfSlcbiAgfSwgW291dHB1dERTLCB3aWRnZXRJZF0pXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSByZWNvcmQgZnJvbSB0aGUgcmVzdWx0cyBhbmQgc2VsZWN0aW9uLlxuICAgKiBJZiByZW1vdmluZyB0aGUgbGFzdCByZWNvcmQsIGF1dG9tYXRpY2FsbHkgY2xlYXJzIGFsbCByZXN1bHRzXG4gICAqIGJ5IGNhbGxpbmcgdGhlIHRyYXNoIGNhbiBsb2dpYyAoc2FtZSBhcyBjbGlja2luZyBDbGVhciBidXR0b24pLlxuICAgKiBUaGlzIGVuc3VyZXMgdGhlIFVJIGRvZXNuJ3Qgc2hvdyBcIkZlYXR1cmVzIGRpc3BsYXllZDogMCAvIDFcIiB3aGVuIGFsbCByZXN1bHRzIGFyZSByZW1vdmVkLlxuICAgKiBcbiAgICogQHBhcmFtIGRhdGEgLSBUaGUgZmVhdHVyZSBkYXRhIHJlY29yZCB0byByZW1vdmVcbiAgICovXG4gIGNvbnN0IHJlbW92ZVJlY29yZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4ge1xuICAgIGNvbnN0IGRhdGFJZCA9IGRhdGEuZ2V0SWQoKVxuICAgIGNvbnN0IGN1cnJlbnRFeHBhbmRBbGwgPSBleHBhbmRBbGxcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZlUmVjb3JkLXN0YXJ0ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIGN1cnJlbnRFeHBhbmRBbGwsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFJlbW92ZSBmcm9tIGV4cGFuc2lvbiBzdGF0ZXMgbWFwXG4gICAgc2V0SXRlbUV4cGFuZFN0YXRlcyhwcmV2TWFwID0+IHtcbiAgICAgIGNvbnN0IG5ld01hcCA9IG5ldyBNYXAocHJldk1hcClcbiAgICAgIG5ld01hcC5kZWxldGUoZGF0YUlkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgIGV2ZW50OiAnaXRlbUV4cGFuZFN0YXRlcy1jbGVhbmVkLXVwJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICByZW1haW5pbmdDb3VudDogbmV3TWFwLnNpemUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBuZXdNYXBcbiAgICB9KVxuICAgIFxuICAgIC8vIEFkZCB0byByZW1vdmVkIHJlY29yZHMgc2V0XG4gICAgc2V0UmVtb3ZlZFJlY29yZElkcyhwcmV2ID0+IHtcbiAgICAgIGNvbnN0IG5ld1NldCA9IG5ldyBTZXQocHJldikuYWRkKGRhdGFJZClcbiAgICAgIFxuICAgICAgLy8gSWYgYWxsIHJlY29yZHMgYXJlIG5vdyByZW1vdmVkLCBjbGVhciBldmVyeXRoaW5nIGJ5IGNhbGxpbmcgdHJhc2ggY2FuIGxvZ2ljXG4gICAgICAvLyBJTVBPUlRBTlQ6IENvbXBhcmUgYWdhaW5zdCBhY3R1YWwgZGlzcGxheWVkIHJlY29yZHMgY291bnQsIG5vdCByZXN1bHRDb3VudFxuICAgICAgLy8gcmVzdWx0Q291bnQgb25seSByZWZsZWN0cyB0aGUgbGF0ZXN0IHF1ZXJ5LCBidXQgaW4gXCJBZGQgdG9cIiBtb2RlIHdlIGRpc3BsYXkgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgLy8gVXNlIHF1ZXJ5RGF0YS5yZWNvcmRzLmxlbmd0aCAoYmVmb3JlIGZpbHRlcmluZykgYXMgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3IgZGlzcGxheWVkIHJlY29yZHNcbiAgICAgIC8vIEZhbGwgYmFjayB0byBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoIGlmIGluIGFjY3VtdWxhdGlvbiBtb2RlLCBvciByZXN1bHRDb3VudCBhcyBsYXN0IHJlc29ydFxuICAgICAgbGV0IGN1cnJlbnREaXNwbGF5ZWRDb3VudCA9IHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgIGlmIChjdXJyZW50RGlzcGxheWVkQ291bnQgPT09IDApIHtcbiAgICAgICAgLy8gSWYgcXVlcnlEYXRhIGRvZXNuJ3QgaGF2ZSByZWNvcmRzIHlldCwgY2hlY2sgaWYgd2UncmUgaW4gYWNjdW11bGF0aW9uIG1vZGVcbiAgICAgICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICAgICAgaWYgKGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjdXJyZW50RGlzcGxheWVkQ291bnQgPSBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTGFzdCByZXNvcnQ6IHVzZSByZXN1bHRDb3VudCAoYnV0IHRoaXMgbWlnaHQgYmUgaW5jb3JyZWN0IGluIGFjY3VtdWxhdGlvbiBtb2RlKVxuICAgICAgICAgIGN1cnJlbnREaXNwbGF5ZWRDb3VudCA9IHJlc3VsdENvdW50XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVtb3ZlUmVjb3JkLWNoZWNraW5nLWFsbC1yZW1vdmVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNTaXplOiBuZXdTZXQuc2l6ZSxcbiAgICAgICAgY3VycmVudERpc3BsYXllZENvdW50LFxuICAgICAgICByZXN1bHRDb3VudCxcbiAgICAgICAgcXVlcnlEYXRhUmVjb3Jkc0NvdW50OiBxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIHdpbGxOYXZpZ2F0ZUJhY2s6IG5ld1NldC5zaXplID09PSBjdXJyZW50RGlzcGxheWVkQ291bnQgJiYgY3VycmVudERpc3BsYXllZENvdW50ID4gMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAobmV3U2V0LnNpemUgPT09IGN1cnJlbnREaXNwbGF5ZWRDb3VudCAmJiBjdXJyZW50RGlzcGxheWVkQ291bnQgPiAwKSB7XG4gICAgICAgIC8vIEFsbCBkaXNwbGF5ZWQgcmVjb3JkcyByZW1vdmVkIC0gY2xlYXIgZXZlcnl0aGluZyAoc2FtZSBhcyBjbGlja2luZyB0cmFzaCBjYW4gYnV0dG9uKVxuICAgICAgICBvbk5hdkJhY2sodHJ1ZSlcbiAgICAgICAgcmV0dXJuIG5ld1NldFxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gbmV3U2V0XG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgcXVlcnlEYXRhIHRvIGZpbHRlciBvdXQgdGhlIHJlbW92ZWQgcmVjb3JkXG4gICAgc2V0UXVlcnlEYXRhKHByZXZEYXRhID0+IHtcbiAgICAgIGlmICghcHJldkRhdGEpIHJldHVybiBwcmV2RGF0YVxuICAgICAgY29uc3QgZmlsdGVyZWRSZWNvcmRzID0gcHJldkRhdGEucmVjb3Jkcy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gcmVjb3JkLmdldElkKCkgIT09IGRhdGFJZClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnByZXZEYXRhLFxuICAgICAgICByZWNvcmRzOiBmaWx0ZXJlZFJlY29yZHNcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIEFMV0FZUyByZW1vdmUgZnJvbSBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9ucyAoc2FtZSBhcyBSZW1vdmUgbW9kZSlcbiAgICAvLyBUaGlzIHByb3Blcmx5IHJlbW92ZXMgcmVjb3JkcyBmcm9tIHRoZSBtYXAgc2VsZWN0aW9uLCBoYW5kbGluZyBzaW5nbGUgb3IgbXVsdGlwbGUgb3JpZ2luIHNvdXJjZXNcbiAgICByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMod2lkZ2V0SWQsIFtkYXRhXSwgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSlcbiAgICBcbiAgICAvLyBVcGRhdGUgb3V0cHV0RFMgc2VsZWN0aW9uXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRhcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpID8/IFtdXG4gICAgY29uc3QgdXBkYXRlZFNlbGVjdGVkRGF0YXMgPSBzZWxlY3RlZERhdGFzLmZpbHRlcihyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkgIT09IGRhdGFJZClcbiAgICBjb25zdCByZWNvcmRJZHMgPSB1cGRhdGVkU2VsZWN0ZWREYXRhcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBvdXRwdXREUyBzZWxlY3Rpb25cbiAgICBpZiAodHlwZW9mIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgdXBkYXRlZFNlbGVjdGVkRGF0YXMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICB9XG4gICAgXG4gICAgLy8gSU1QT1JUQU5UOiBQdWJsaXNoIGN1c3RvbSBldmVudCBzbyB3aWRnZXQgY2FuIHVwZGF0ZSBsYXN0U2VsZWN0aW9uIHN0YXRlXG4gICAgLy8gVGhpcyBlbnN1cmVzIHJlc3RvcmF0aW9uIHJlc3RvcmVzIHRoZSBjb3JyZWN0ICh1cGRhdGVkKSBjb3VudFxuICAgIGNvbnN0IG9yaWdpbkRTID0gKG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UpLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgY29uc3QgZGF0YVNvdXJjZUlkID0gb3JpZ2luRFM/LmlkXG4gICAgY29uc3Qgc2VsZWN0aW9uRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3F1ZXJ5c2ltcGxlLXNlbGVjdGlvbi1jaGFuZ2VkJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZWNvcmRJZHMsIC8vIFVwZGF0ZWQgcmVjb3JkIElEcyAod2l0aCByZW1vdmVkIHJlY29yZCBleGNsdWRlZClcbiAgICAgICAgZGF0YVNvdXJjZUlkLFxuICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChzZWxlY3Rpb25FdmVudClcbiAgICBcbiAgICAvLyBJZiBpbiBhY2N1bXVsYXRpb24gbW9kZSwgYWxzbyByZW1vdmUgZnJvbSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIGlmIChpc0FjY3VtdWxhdGlvbk1vZGUgJiYgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCByZW1haW5pbmdSZWNvcmRzID0gcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZChcbiAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgICAgICAgW2RhdGFdLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgIClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZlZC1mcm9tLWFjY3VtdWxhdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEJlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgd2FzUmVtb3ZlZDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGggPCBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShyZW1haW5pbmdSZWNvcmRzKVxuICAgIH1cbiAgICBcbiAgICAvLyBMb2cgYWZ0ZXIgcmVtb3ZlUmVjb3JkIGNvbXBsZXRlcyB0byBjaGVjayBpZiBleHBhbmRBbGwgY2hhbmdlZFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVtb3ZlUmVjb3JkLWNvbXBsZXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgZXhwYW5kQWxsQmVmb3JlOiBjdXJyZW50RXhwYW5kQWxsLFxuICAgICAgICBleHBhbmRBbGxBZnRlcjogZXhwYW5kQWxsLFxuICAgICAgICBleHBhbmRBbGxDaGFuZ2VkOiBjdXJyZW50RXhwYW5kQWxsICE9PSBleHBhbmRBbGwsXG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdFByb3A6IGV4cGFuZEFsbCwgLy8gV2hhdCB3aWxsIGJlIHBhc3NlZCB0byBTaW1wbGVMaXN0XG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9LCAwKVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkLCByZXN1bHRDb3VudCwgb25OYXZCYWNrLCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBleHBhbmRBbGxdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdCBoLTEwMCcgY3NzPXtyZXN1bHRTdHlsZX0gcm9sZT0nbGlzdGJveCcgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHMnKX0+XG4gICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCB1c2VEYXRhU291cmNlPXtyZXN1bHRVc2VPdXRwdXREYXRhU291cmNlfSBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZX0gLz5cbiAgICAgIFxuICAgICAgey8qIEVycm9yIE1lc3NhZ2UgKi99XG4gICAgICB7c2VsZWN0aW9uRXJyb3IgJiYgKFxuICAgICAgICA8ZGl2IGNzcz17Y3NzYHBhZGRpbmc6IDAgMTZweDsgbWFyZ2luLXRvcDogOHB4O2B9PlxuICAgICAgICAgIDxFcnJvck1lc3NhZ2UgXG4gICAgICAgICAgICBlcnJvcj17c2VsZWN0aW9uRXJyb3J9IFxuICAgICAgICAgICAgb25EaXNtaXNzPXsoKSA9PiBzZXRTZWxlY3Rpb25FcnJvcihudWxsKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHRfX2hlYWRlciBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIG14LTQnPlxuICAgICAgICA8QnV0dG9uIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdiYWNrJyl9IHJlZj17YmFja0J0blJlZn0gY2xhc3NOYW1lPSdwLTAgbXItMicgc2l6ZT0nc20nIHZhcmlhbnQ9J3RleHQnIGNvbG9yPSdpbmhlcml0JyBpY29uIG9uQ2xpY2s9eygpID0+IHsgb25OYXZCYWNrKCkgfX0+XG4gICAgICAgICAgPEFycm93TGVmdE91dGxpbmVkIGF1dG9GbGlwLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIHtjdXJyZW50SXRlbS5yZXN1bHRzTGFiZWwgPz8gZ2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHMnKX1cbiAgICAgICAgeyhcbiAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9IHBsYWNlbWVudD0nYm90dG9tJz5cbiAgICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J21sLWF1dG8nIGljb24gc2l6ZT0nc20nIHZhcmlhbnQ9J3RleHQnIGNvbG9yPSdpbmhlcml0JyBvbkNsaWNrPXtjbGVhclJlc3VsdHN9IGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfT5cbiAgICAgICAgICAgICAgICA8SWNvbiBpY29uPXtpY29uTWFwLnRvb2xEZWxldGV9IC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgey8qIERhdGEgYWN0aW9ucyBmaWx0ZXJlZCB2aWEgbWFuaWZlc3QuanNvbiBleGNsdWRlRGF0YUFjdGlvbnMgLSBTaG93IG9uIE1hcCwgU2VsZWN0IExvYWRlZCwgYW5kIENsZWFyIFNlbGVjdGlvbiBhcmUgZXhjbHVkZWQuXG4gICAgICAgICAgICAgICAgQ3VzdG9tIFwiQWRkIHRvIE1hcFwiIGFjdGlvbiBpcyBwcm92aWRlZCB2aWEgZXh0cmFBY3Rpb25zIGFuZCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MuICovfVxuICAgICAgICAgICAge2VuYWJsZURhdGFBY3Rpb24gJiYgb3V0cHV0RFMgJiYgKFxuICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2B3aWR0aDogMXB4OyBoZWlnaHQ6IDE2cHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLWlucHV0KTtgfT48L2Rpdj5cbiAgICAgICAgICAgICAgICA8RGF0YUFjdGlvbkxpc3RcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgICAgIGRhdGFTZXRzPXthY3Rpb25EYXRhU2V0c31cbiAgICAgICAgICAgICAgICAgIGxpc3RTdHlsZT17RGF0YUFjdGlvbkxpc3RTdHlsZS5Ecm9wZG93bn1cbiAgICAgICAgICAgICAgICAgIGJ1dHRvblNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgYnV0dG9uVHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICBleHRyYUFjdGlvbnM9e2V4dHJhQWN0aW9uc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0LWNvbnRhaW5lciBtdC0xJz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdC1pbmZvIG1iLTIgcHgtNCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1iZXR3ZWVuJyByb2xlPSdhbGVydCcgYXJpYS1saXZlPSdwb2xpdGUnPlxuICAgICAgICAgIDxzcGFuPntnZXRUaXBNZXNzYWdlKCl9PC9zcGFuPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtleHBhbmRBbGwgPyBnZXRJMThuTWVzc2FnZSgnY29sbGFwc2VBbGwnKSA6IGdldEkxOG5NZXNzYWdlKCdleHBhbmRBbGwnKX0gcGxhY2VtZW50PSd0b3AnPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZUV4cGFuZEFsbH1cbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtleHBhbmRBbGwgPyBnZXRJMThuTWVzc2FnZSgnY29sbGFwc2VBbGwnKSA6IGdldEkxOG5NZXNzYWdlKCdleHBhbmRBbGwnKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtleHBhbmRBbGwgPyA8Q29sbGFwc2VBbGxPdXRsaW5lZCAvPiA6IDxFeHBhbmRBbGxPdXRsaW5lZCAvPn1cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7LyogRk9SQ0VEOiBBbHdheXMgU2ltcGxlTGlzdCAtIExhenlMb2FkIGFuZCBNdWx0aVBhZ2UgcmVtb3ZlZCAqL31cbiAgICAgICAge3Jlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgPFNpbXBsZUxpc3RcbiAgICAgICAgICAgIGtleT0nc2ltcGxlJ1xuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgcXVlcnlJdGVtPXtxdWVyeUl0ZW19XG4gICAgICAgICAgICBvdXRwdXREUz17b3V0cHV0RFMgYXMgYW55fVxuICAgICAgICAgICAgcmVjb3Jkcz17ZmlsdGVyZWRSZWNvcmRzRm9yTGlzdH1cbiAgICAgICAgICAgIGRpcmVjdGlvbj17ZGlyZWN0aW9ufVxuICAgICAgICAgICAgb25Fc2NhcGU9e2hhbmRsZUVzY2FwZX1cbiAgICAgICAgICAgIG9uU2VsZWN0Q2hhbmdlPXt0b2dnbGVTZWxlY3Rpb259XG4gICAgICAgICAgICBvblJlbW92ZT17cmVtb3ZlUmVjb3JkfVxuICAgICAgICAgICAgZXhwYW5kQnlEZWZhdWx0PXtleHBhbmRBbGx9XG4gICAgICAgICAgICBpdGVtRXhwYW5kU3RhdGVzPXtpdGVtRXhwYW5kU3RhdGVzfVxuICAgICAgICAgICAgcmVtb3ZlZFJlY29yZElkcz17cmVtb3ZlZFJlY29yZElkc31cbiAgICAgICAgICAgIG9uUmVuZGVyRG9uZT17aGFuZGxlUmVuZGVyRG9uZX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgUXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8UXVlcnlUYXNrQ29udGV4dFByb3BzPih7XG4gIHJlc2V0U3ltYm9sOiBudWxsXG59KVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0NvbnRleHRQcm9wcyB7XG4gIHJlc2V0U3ltYm9sPzogc3ltYm9sIC8vIHVzZWQgdG8gdHJpZ2dlciByZXNldCBvcGVyYXRpb25cbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgY2xhc3NOYW1lcyxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBSZWFjdFJlZHV4LFxuICBob29rcyxcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXG4gIHR5cGUgU3FsUXVlcnlQYXJhbXMsXG4gIEltbXV0YWJsZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIENoZWNrYm94IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IFNxbEV4cHJlc3Npb25SdW50aW1lLCBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbiB9IGZyb20gJ2ppbXUtdWkvYmFzaWMvc3FsLWV4cHJlc3Npb24tcnVudGltZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCBTcGF0aWFsUmVsYXRpb24sIHR5cGUgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IFF1ZXJ5VGFza1NwYXRpYWxGb3JtIH0gZnJvbSAnLi9xdWVyeS10YXNrLXNwYXRpYWwtZm9ybSdcbmltcG9ydCB7IHVzZUF1dG9IZWlnaHQgfSBmcm9tICcuL3VzZUF1dG9IZWlnaHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXG5pbXBvcnQgeyBJbmZvT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvJ1xuaW1wb3J0IHsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIH0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrSXRlbVByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBjb25maWdJZDogc3RyaW5nXG4gIHNwYXRpYWxGaWx0ZXJFbmFibGVkOiBib29sZWFuXG4gIGRhdGFzb3VyY2VSZWFkeTogYm9vbGVhblxuICBvdXRwdXREUz86IERhdGFTb3VyY2VcbiAgb25Gb3JtU3VibWl0OiAoc3FsRXhwck9iajogSU1TcWxFeHByZXNzaW9uLCBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqLCB6b29tVG9TZWxlY3RlZD86IGJvb2xlYW4pID0+IHZvaWRcbiAgZGF0YUFjdGlvbkZpbHRlcj86IFNxbFF1ZXJ5UGFyYW1zXG4gIGluaXRpYWxJbnB1dFZhbHVlPzogc3RyaW5nXG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gIHF1ZXJ5SXRlbVNob3J0SWQ/OiBzdHJpbmdcbn1cblxuY29uc3QgZ2V0Rm9ybVN0eWxlID0gKGlzQXV0b0hlaWdodDogYm9vbGVhbikgPT4ge1xuICByZXR1cm4gY3NzYFxuICAgIGZsZXg6IDEgMSBhdXRvO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBtaW4taGVpZ2h0OiAwO1xuICAgIC5mb3JtLXRpdGxlIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlci10ZXh0KTtcbiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICBmb250LXNpemU6IDAuODEyNXJlbTtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICBtYXJnaW4tdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgfVxuICAgIC5xdWVyeS1mb3JtX19jb250ZW50IHtcbiAgICAgIGZsZXg6IDEgMSAke2lzQXV0b0hlaWdodCA/ICdhdXRvJyA6ICdhdXRvJ307XG4gICAgICBtYXgtaGVpZ2h0OiAke2lzQXV0b0hlaWdodCA/ICc2MS44dmgnIDogJ25vbmUnfTtcbiAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgcGFkZGluZy1ib3R0b206IDA7XG4gICAgfVxuICAgIC5xdWVyeS1mb3JtX19hY3Rpb25zIHtcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgIHBhZGRpbmctdG9wOiA0cHg7XG4gICAgfVxuICBgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tGb3JtIChwcm9wczogUXVlcnlUYXNrSXRlbVByb3BzKSB7XG4gIGNvbnN0IHsgd2lkZ2V0SWQsIGNvbmZpZ0lkLCBvdXRwdXREUywgc3BhdGlhbEZpbHRlckVuYWJsZWQsIGRhdGFzb3VyY2VSZWFkeSwgb25Gb3JtU3VibWl0LCBkYXRhQWN0aW9uRmlsdGVyLCBpbml0aWFsSW5wdXRWYWx1ZSwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcXVlcnlJdGVtU2hvcnRJZCB9ID0gcHJvcHNcbiAgY29uc3QgcHJlRGF0YUFjdGlvbkZpbHRlciA9IGhvb2tzLnVzZVByZXZpb3VzKGRhdGFBY3Rpb25GaWx0ZXIpXG4gIGNvbnN0IHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+ID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnF1ZXJ5SXRlbXMuZmluZChpdGVtID0+IGl0ZW0uY29uZmlnSWQgPT09IGNvbmZpZ0lkKVxuICB9KVxuICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBbcmVzZXRTeW1ib2wsIHNldFJlc2V0U3ltYm9sXSA9IFJlYWN0LnVzZVN0YXRlPHN5bWJvbD4obnVsbClcbiAgLy8gUnVudGltZSB6b29tIHByZWZlcmVuY2UgLSBpbml0aWFsaXplZCB3aXRoIGNvbmZpZyB2YWx1ZSwgY2FuIGJlIG92ZXJyaWRkZW4gYnkgdXNlclxuICBjb25zdCBbcnVudGltZVpvb21Ub1NlbGVjdGVkLCBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWRdID0gUmVhY3QudXNlU3RhdGU8Ym9vbGVhbj4oXG4gICAgcXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCA/PyB0cnVlXG4gIClcblxuICAvLyBTeW5jIHJ1bnRpbWUgem9vbSBwcmVmZXJlbmNlIHdoZW4gcXVlcnkgaXRlbSBjaGFuZ2VzIChlLmcuLCBzd2l0Y2hpbmcgYmV0d2VlbiBxdWVyaWVzKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFJ1bnRpbWVab29tVG9TZWxlY3RlZChxdWVyeUl0ZW0/Lnpvb21Ub1NlbGVjdGVkID8/IHRydWUpXG4gIH0sIFtxdWVyeUl0ZW0/Lnpvb21Ub1NlbGVjdGVkLCBxdWVyeUl0ZW0/LmNvbmZpZ0lkXSlcblxuICAvLyBjb25zdCBbZGF0YVNvdXJjZSwgc2V0RGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPihudWxsKVxuICBjb25zdCB7XG4gICAgdXNlQXR0cmlidXRlRmlsdGVyLFxuICAgIHVzZVNwYXRpYWxGaWx0ZXIsXG4gICAgc3BhdGlhbEZpbHRlclR5cGVzLFxuICAgIHNxbEV4cHJPYmosXG4gICAgc3BhdGlhbE1hcFdpZGdldElkcyxcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXMsXG4gICAgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXMsXG4gICAgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSxcbiAgICBzcGF0aWFsUmVsYXRpb25zLFxuICAgIHNwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcixcbiAgICBzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZSxcbiAgICBzcGF0aWFsUmVsYXRpb25CdWZmZXJVbml0LFxuICAgIHNwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcixcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJEaXN0YW5jZSxcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJVbml0LFxuICAgIGF0dHJpYnV0ZUZpbHRlckxhYmVsID0gZ2V0STE4bk1lc3NhZ2UoJ2F0dHJpYnV0ZUZpbHRlcicpLFxuICAgIHNwYXRpYWxGaWx0ZXJMYWJlbCA9IGdldEkxOG5NZXNzYWdlKCdzcGF0aWFsRmlsdGVyJyksXG4gICAgYXR0cmlidXRlRmlsdGVyRGVzYyxcbiAgICBzcGF0aWFsRmlsdGVyRGVzY1xuICB9ID0gY3VycmVudEl0ZW1cbiAgY29uc3QgW2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpdID0gUmVhY3QudXNlU3RhdGU8SU1TcWxFeHByZXNzaW9uPihzcWxFeHByT2JqKVxuICBjb25zdCBzcGF0aWFsRmlsdGVyT2JqUmVmID0gUmVhY3QudXNlUmVmPFNwYXRpYWxGaWx0ZXJPYmo+KG51bGwpXG4gIGNvbnN0IHNwYXRpYWxSZWxhdGlvblJlZiA9IFJlYWN0LnVzZVJlZjxTcGF0aWFsUmVsYXRpb24+KFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3QpXG4gIGNvbnN0IGJ1ZmZlclJlZiA9IFJlYWN0LnVzZVJlZjx7IGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlIH0+KG51bGwpXG4gIGNvbnN0IGFwcGx5QnV0dG9uUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50PihudWxsKVxuICBjb25zdCBpc0F1dG9IZWlnaHQgPSB1c2VBdXRvSGVpZ2h0KClcbiAgY29uc3Qgc2hvd0NsYXVzZU51bWJlciA9IFJlYWN0LnVzZVJlZihnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxFeHByT2JqKSlcbiAgY29uc3QgaW5pdGlhbFZhbHVlU2V0UmVmID0gUmVhY3QudXNlUmVmPHN0cmluZyB8IG51bGw+KG51bGwpIC8vIFRyYWNrIHdoaWNoIGNvbmZpZ0lkIHdlJ3ZlIHNldCB0aGUgdmFsdWUgZm9yXG4gIGNvbnN0IGxhc3RWYWx1ZVNldFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKSAvLyBUcmFjayB0aGUgbGFzdCB2YWx1ZSB0aGF0IHdhcyBzZXRcbiAgY29uc3QgaGFzaFRyaWdnZXJlZFJlZiA9IFJlYWN0LnVzZVJlZjxib29sZWFuPihmYWxzZSkgLy8gVHJhY2sgaWYgcXVlcnkgd2FzIHRyaWdnZXJlZCB2aWEgaGFzaCBwYXJhbWV0ZXJcblxuICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTPy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGlucHV0IHZhbHVlIGZyb20gVVJMIGhhc2ggcGFyYW1ldGVycyB3aGVuOlxuICAgKiAxLiBEYXRhc291cmNlIGlzIHJlYWR5XG4gICAqIDIuIFdlIGhhdmUgYW4gaW5pdGlhbElucHV0VmFsdWUgZnJvbSBVUkwgaGFzaFxuICAgKiAzLiBXZSBoYXZlbid0IGFscmVhZHkgc2V0IGl0IGZvciB0aGlzIGNvbmZpZ0lkLCBPUiB0aGUgdmFsdWUgaGFzIGNoYW5nZWRcbiAgICogXG4gICAqIFVzZXMgYm90aCBSZWFjdCBzdGF0ZSB1cGRhdGVzIGFuZCBET00gbWFuaXB1bGF0aW9uIHRvIGVuc3VyZSB0aGUgdmFsdWVcbiAgICogaXMgcHJvcGVybHkgc2V0IGluIFNxbEV4cHJlc3Npb25SdW50aW1lJ3MgaW50ZXJuYWwgc3RhdGUuXG4gICAqL1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFJlc2V0IGZsYWcgaWYgY29uZmlnSWQgY2hhbmdlZCAoc3dpdGNoZWQgdG8gZGlmZmVyZW50IHF1ZXJ5KVxuICAgIGlmIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQpIHtcbiAgICAgIGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBoYXNoIHRyaWdnZXIgZmxhZyB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHZhbHVlIGhhcyBjaGFuZ2VkIGZvciB0aGUgc2FtZSBjb25maWdJZFxuICAgIGNvbnN0IHZhbHVlQ2hhbmdlZCA9IGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBudWxsICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBpbml0aWFsSW5wdXRWYWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID09PSBjb25maWdJZFxuICAgIFxuICAgIC8vIFNldCB0aGUgdmFsdWUgaWY6XG4gICAgLy8gLSBXZSBoYXZlbid0IHNldCBpdCBmb3IgdGhpcyBjb25maWdJZCB5ZXQsIE9SXG4gICAgLy8gLSBUaGUgdmFsdWUgaGFzIGNoYW5nZWQgZm9yIHRoZSBzYW1lIGNvbmZpZ0lkIChoYXNoIHBhcmFtZXRlciB1cGRhdGVkKVxuICAgIGNvbnN0IHNob3VsZFNldFZhbHVlID0gZGF0YXNvdXJjZVJlYWR5ICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBjb25maWdJZCB8fCB2YWx1ZUNoYW5nZWQpXG4gICAgXG4gICAgaWYgKHNob3VsZFNldFZhbHVlKSB7XG4gICAgICBjb25zdCBmaXJzdFBhcnQgPSBzcWxFeHByT2JqLnBhcnRzWzBdXG4gICAgICAvLyBDaGVjayBpZiB0aGUgZmlyc3QgcGFydCBpcyBhIFNJTkdMRSBjbGF1c2UgKG5vdCBhIFNxbENsYXVzZVNldClcbiAgICAgIGlmIChmaXJzdFBhcnQgJiYgJ3R5cGUnIGluIGZpcnN0UGFydCAmJiBmaXJzdFBhcnQudHlwZSA9PT0gJ1NJTkdMRScgJiYgJ3ZhbHVlT3B0aW9ucycgaW4gZmlyc3RQYXJ0KSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgZXhwcmVzc2lvbiBvYmplY3Qgd2l0aCB0aGUgaW5pdGlhbCB2YWx1ZVxuICAgICAgICBjb25zdCB1cGRhdGVkID0gc3FsRXhwck9iai5zZXRJbihbJ3BhcnRzJywgJzAnLCAndmFsdWVPcHRpb25zJywgJ3ZhbHVlJ10sIGluaXRpYWxJbnB1dFZhbHVlKVxuICAgICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHVwZGF0ZWQpXG4gICAgICAgIC8vIFVwZGF0ZSBjbGF1c2UgbnVtYmVyIGZvciB0aGUgdXBkYXRlZCBleHByZXNzaW9uXG4gICAgICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHVwZGF0ZWQpXG4gICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID0gY29uZmlnSWRcbiAgICAgICAgbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgPSBpbml0aWFsSW5wdXRWYWx1ZVxuICAgICAgICBcbiAgICAgICAgLy8gQWxzbyBzZXQgdGhlIHZhbHVlIGRpcmVjdGx5IG9uIHRoZSBpbnB1dCBlbGVtZW50IGFmdGVyIGEgZGVsYXkgdG8gZW5zdXJlIGNvbXBvbmVudCBpcyByZW5kZXJlZFxuICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIFNxbEV4cHJlc3Npb25SdW50aW1lIG1heSBub3Qgc3luYyBmcm9tIHRoZSBleHByZXNzaW9uIHByb3AgYWxvbmVcbiAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgaW5wdXQgZWxlbWVudCB3aXRoaW4gU3FsRXhwcmVzc2lvblJ1bnRpbWVcbiAgICAgICAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldC1pZD1cIiR7d2lkZ2V0SWR9XCJdYCk/LmNsb3Nlc3QoJy5xdWVyeS1mb3JtJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWVyeS1mb3JtJylcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIExvb2sgZm9yIHRleHQgaW5wdXQgZWxlbWVudHNcbiAgICAgICAgICAgIGNvbnN0IHRleHRJbnB1dHMgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRleHRJbnB1dHMuZm9yRWFjaCgoaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB2YWx1ZSBpZiBpbnB1dCBpcyBlbXB0eSBPUiBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQgKGhhc2ggcGFyYW1ldGVyIHVwZGF0ZWQpXG4gICAgICAgICAgICAgIGNvbnN0IHNob3VsZFVwZGF0ZSA9ICFpbnB1dC52YWx1ZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZS50cmltKCkgPT09ICcnIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlICE9PSBpbml0aWFsSW5wdXRWYWx1ZVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIC8vIEZvY3VzIHRoZSBpbnB1dCBmaXJzdFxuICAgICAgICAgICAgICAgIGlucHV0LmZvY3VzKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHZhbHVlXG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBpbml0aWFsSW5wdXRWYWx1ZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgZGlzcGF0Y2ggaW5wdXQgZXZlbnQgd2l0aCBwcm9wZXIgcHJvcGVydGllc1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGlucHV0RXZlbnQsICd0YXJnZXQnLCB7IHZhbHVlOiBpbnB1dCwgZW51bWVyYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQoaW5wdXRFdmVudClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRpc3BhdGNoIGNoYW5nZSBldmVudFxuICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5nZUV2ZW50ID0gbmV3IEV2ZW50KCdjaGFuZ2UnLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2hhbmdlRXZlbnQsICd0YXJnZXQnLCB7IHZhbHVlOiBpbnB1dCwgZW51bWVyYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQoY2hhbmdlRXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQWxzbyB0cnkgUmVhY3QncyBzeW50aGV0aWMgZXZlbnQgYXBwcm9hY2ggdXNpbmcgbmF0aXZlIHZhbHVlIHNldHRlclxuICAgICAgICAgICAgICAgIGNvbnN0IG5hdGl2ZUlucHV0VmFsdWVTZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHdpbmRvdy5IVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZSwgJ3ZhbHVlJyk/LnNldFxuICAgICAgICAgICAgICAgIGlmIChuYXRpdmVJbnB1dFZhbHVlU2V0dGVyKSB7XG4gICAgICAgICAgICAgICAgICBuYXRpdmVJbnB1dFZhbHVlU2V0dGVyLmNhbGwoaW5wdXQsIGluaXRpYWxJbnB1dFZhbHVlKVxuICAgICAgICAgICAgICAgICAgY29uc3QgcmVhY3RFdmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQocmVhY3RFdmVudClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQmx1ciB0byB0cmlnZ2VyIGFueSB2YWxpZGF0aW9uIG9yIHN0YXRlIHVwZGF0ZXNcbiAgICAgICAgICAgICAgICBpbnB1dC5ibHVyKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWZ0ZXIgc2V0dGluZyB2YWx1ZXMgYW5kIGJsdXJyaW5nLCB2ZXJpZnkgaW5wdXQgdmFsdWUgaXMgc2V0IGJlZm9yZSB0cmlnZ2VyaW5nIEFwcGx5IGJ1dHRvblxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChhcHBseUJ1dHRvblJlZi5jdXJyZW50ICYmICFhcHBseUJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkICYmIGRhdGFzb3VyY2VSZWFkeSkge1xuICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBVElPTjogRW5zdXJlIGlucHV0IHZhbHVlIGlzIGFjdHVhbGx5IHNldCBiZWZvcmUgZXhlY3V0aW5nIHF1ZXJ5XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgZ3JvdXBlZCBxdWVyaWVzIHdoZXJlIGRyb3Bkb3ducyBuZWVkIHRvIGJlIHN5bmNocm9uaXplZCBmaXJzdFxuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtd2lkZ2V0LWlkPVwiJHt3aWRnZXRJZH1cIl1gKT8uY2xvc2VzdCgnLnF1ZXJ5LWZvcm0nKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1ZXJ5LWZvcm0nKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChmb3JtRWxlbWVudCAmJiBpbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dElucHV0cyA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJylcbiAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFZhbHVlU2V0ID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgdGV4dElucHV0cy5mb3JFYWNoKChpbnB1dDogSFRNTElucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQudmFsdWUgPT09IGluaXRpYWxJbnB1dFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaW5wdXRWYWx1ZVNldCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKCFpbnB1dFZhbHVlU2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2lucHV0LXZhbHVlLW5vdC1zZXQtcmV0cnlpbmcnLFxuICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkVmFsdWU6IGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnd2lsbC1yZXRyeS1hZnRlci1kZWxheScsXG4gICAgICAgICAgICAgICAgICAgICAgbm90ZTogJ0lucHV0IHZhbHVlIG5vdCBzZXQsIHJldHJ5aW5nIHRvIGVuc3VyZSBzeW5jaHJvbml6YXRpb24nXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC8vIFJldHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gYWxsb3cgc3RhdGUgdG8gc3luY1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBSZWN1cnNpdmVseSBjYWxsIHZlcmlmeUFuZEFwcGx5IGlmIG5lZWRlZCwgYnV0IGxpbWl0IHJldHJpZXNcbiAgICAgICAgICAgICAgICAgICAgICAvLyBGb3Igbm93LCBqdXN0IHJldHJ5IG9uY2UgbW9yZVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHBseUJ1dHRvblJlZi5jdXJyZW50ICYmICFhcHBseUJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkICYmIGRhdGFzb3VyY2VSZWFkeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGhhc2hUcmlnZ2VyZWRSZWYgdG8gZm9yY2Ugem9vbSBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllc1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgaGFzaCBwYXJhbWV0ZXIgZnJvbSBVUkwgYmVmb3JlIEFwcGx5IGlzIHRyaWdnZXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uSGFzaFBhcmFtZXRlclVzZWQgJiYgcXVlcnlJdGVtU2hvcnRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkKHF1ZXJ5SXRlbVNob3J0SWQpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF1dG8tdHJpZ2dlciBBcHBseSBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLy8gRXhpdCBlYXJseSwgd2lsbCByZXRyeVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBJbnB1dCB2YWx1ZSBpcyBzZXQgY29ycmVjdGx5LCBwcm9jZWVkIHdpdGggZXhlY3V0aW9uXG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdpbnB1dC12YWx1ZS12ZXJpZmllZCcsXG4gICAgICAgICAgICAgICAgICBleHBlY3RlZFZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQsXG4gICAgICAgICAgICAgICAgICBub3RlOiAnSW5wdXQgdmFsdWUgdmVyaWZpZWQsIHByb2NlZWRpbmcgd2l0aCBxdWVyeSBleGVjdXRpb24nXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTZXQgaGFzaFRyaWdnZXJlZFJlZiB0byBmb3JjZSB6b29tIGZvciBoYXNoLXRyaWdnZXJlZCBxdWVyaWVzXG4gICAgICAgICAgICAgICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBoYXNoIHBhcmFtZXRlciBmcm9tIFVSTCBiZWZvcmUgQXBwbHkgaXMgdHJpZ2dlcmVkIHRvIHByZXZlbnQgcmUtZXhlY3V0aW9uXG4gICAgICAgICAgICAgICAgaWYgKG9uSGFzaFBhcmFtZXRlclVzZWQgJiYgcXVlcnlJdGVtU2hvcnRJZCkge1xuICAgICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZChxdWVyeUl0ZW1TaG9ydElkKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEF1dG8tdHJpZ2dlciBBcHBseSBidXR0b24gdG8gZXhlY3V0ZSB0aGUgcXVlcnkgd2l0aCB0aGUgcG9wdWxhdGVkIHZhbHVlXG4gICAgICAgICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDIwMCkgLy8gU21hbGwgZGVsYXkgYWZ0ZXIgYmx1ciB0byBlbnN1cmUgc3RhdGUgaXMgc3luY2VkXG4gICAgICAgICAgfVxuICAgICAgICB9LCA1MDApIC8vIExvbmdlciBkZWxheSB0byBlbnN1cmUgY29tcG9uZW50IGlzIGZ1bGx5IHJlbmRlcmVkXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gVGhlIHNxbEV4cHJPYmoucGFydHMgbWF5IGNoYW5nZSBidXQgdGhlIGRpc3BsYXlTUUwgaXMgdGhlIHNhbWVcbiAgICBpZiAoIXNxbEV4cHJPYmopIHtcbiAgICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IDBcbiAgICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmoobnVsbClcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iailcbiAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHdlIGhhdmVuJ3Qgc2V0IHRoZSBpbml0aWFsIHZhbHVlIGZvciB0aGlzIGNvbmZpZ0lkIHlldCwgb3IgaWYgd2UgZG9uJ3QgaGF2ZSBhbiBpbml0aWFsIHZhbHVlXG4gICAgICBpZiAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkIHx8ICFpbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHNxbEV4cHJPYmopXG4gICAgICB9XG4gICAgfVxuICB9LCBbc3FsRXhwck9iaiwgaW5pdGlhbElucHV0VmFsdWUsIGRhdGFzb3VyY2VSZWFkeSwgY29uZmlnSWQsIHdpZGdldElkLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCBxdWVyeUl0ZW1TaG9ydElkXSlcblxuICBjb25zdCBhcHBseVF1ZXJ5ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIFdoZW4gdGhlICdhcHBseScgYnV0dG9uIGlzIGNsaWNrZWQsIGl0IHNob3VsZCBjbGVhciB0aGUgc2VsZWN0aW9uIGZyb20gdGhlIHByZXZpb3VzIHJlc3VsdCBsaXN0XG4gICAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKG91dHB1dERTKVxuXG4gICAgaWYgKG91dHB1dERTKSB7XG4gICAgICBjb25zdCBvcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgaWYgKG9yaWdpbkRzKSB7XG4gICAgICAgIGNvbnN0IGRhdGFWaWV3Q29uZmlnID0gb3JpZ2luRHMuZ2V0RGF0YVZpZXdDb25maWcoKVxuICAgICAgICBjb25zdCBtYXhpbXVtID0gZGF0YVZpZXdDb25maWc/Lm1heGltdW1cbiAgICAgICAgaWYgKG1heGltdW0gIT0gbnVsbCAmJiBtYXhpbXVtID4gMCkge1xuICAgICAgICAgIERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkudXBkYXRlRGF0YVNvdXJjZUJ5RGF0YVNvdXJjZUpzb24oXG4gICAgICAgICAgICBvdXRwdXREUyxcbiAgICAgICAgICAgIG91dHB1dERTLmdldERhdGFTb3VyY2VKc29uKCkuc2V0SW4oWydxdWVyeScsICdtYXhpbXVtJ10sIG1heGltdW0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9yY2Ugem9vbSBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllcywgb3RoZXJ3aXNlIHVzZSBydW50aW1lIHByZWZlcmVuY2VcbiAgICBjb25zdCB6b29tVG9Vc2UgPSBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPyB0cnVlIDogcnVudGltZVpvb21Ub1NlbGVjdGVkXG5cbiAgICBsZXQgcmVsID0gc3BhdGlhbFJlbGF0aW9uUmVmLmN1cnJlbnRcbiAgICBpZiAoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Py5nZW9tZXRyeSAmJiByZWwgPT0gbnVsbCkge1xuICAgICAgcmVsID0gU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdFxuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQ/Lmdlb21ldHJ5KSkge1xuICAgICAgaWYgKHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudC5nZW9tZXRyeS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgb25Gb3JtU3VibWl0KGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIHsgLi4uc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50LCBnZW9tZXRyeTogc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Lmdlb21ldHJ5WzBdLCByZWxhdGlvbjogcmVsLCBidWZmZXI6IGJ1ZmZlclJlZi5jdXJyZW50IH0sIHpvb21Ub1VzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xuICAgICAgICAgICdlc3JpL2dlb21ldHJ5L29wZXJhdG9ycy91bmlvbk9wZXJhdG9yJ1xuICAgICAgICBdKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgICAgICAgIGNvbnN0IG9wZXJhdG9yOiAodHlwZW9mIF9fZXNyaS51bmlvbk9wZXJhdG9yKSA9IG1vZHVsZXNbMF1cbiAgICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG9wZXJhdG9yLmV4ZWN1dGVNYW55KHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudC5nZW9tZXRyeSlcbiAgICAgICAgICBvbkZvcm1TdWJtaXQoYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiwgeyAuLi5zcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQsIGdlb21ldHJ5LCByZWxhdGlvbjogcmVsLCBidWZmZXI6IGJ1ZmZlclJlZi5jdXJyZW50IH0sIHpvb21Ub1VzZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgb25Gb3JtU3VibWl0KGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIHsgLi4uc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50LCByZWxhdGlvbjogcmVsLCBidWZmZXI6IGJ1ZmZlclJlZi5jdXJyZW50IH0sIHpvb21Ub1VzZSlcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgaGFzaFRyaWdnZXJlZFJlZiBhZnRlciB1c2VcbiAgICBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPSBmYWxzZVxuICB9LCBbb25Gb3JtU3VibWl0LCBvdXRwdXREUywgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiwgcnVudGltZVpvb21Ub1NlbGVjdGVkXSlcblxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2ZW50OiBSZWFjdC5LZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJyAmJiBkYXRhc291cmNlUmVhZHkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIFxuICAgICAgLy8gRmluZCB0aGUgYWN0aXZlIGlucHV0IGZpZWxkXG4gICAgICBjb25zdCBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICBpZiAoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCcgJiYgYWN0aXZlRWxlbWVudC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgLy8gRm9yY2UgYmx1ciB0byB0cmlnZ2VyIFNxbEV4cHJlc3Npb25SdW50aW1lJ3MgaW5wdXQgcHJvY2Vzc2luZ1xuICAgICAgICBhY3RpdmVFbGVtZW50LmJsdXIoKVxuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgYmx1ciBwcm9jZXNzaW5nLCB0aGVuIGNsaWNrIHRoZSBBcHBseSBidXR0b25cbiAgICAgICAgLy8gVGhpcyB1c2VzIHRoZSBleGFjdCBzYW1lIGNvZGUgcGF0aCBhcyBjbGlja2luZyB0aGUgYnV0dG9uIG1hbnVhbGx5XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmIChhcHBseUJ1dHRvblJlZi5jdXJyZW50ICYmICFhcHBseUJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkKSB7XG4gICAgICAgICAgICBhcHBseUJ1dHRvblJlZi5jdXJyZW50LmNsaWNrKClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBwbHlRdWVyeSgpXG4gICAgICAgICAgfVxuICAgICAgICB9LCAyMDApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3QgaW4gYW4gaW5wdXQgZmllbGQsIHNhZmUgdG8gYXBwbHkgaW1tZWRpYXRlbHlcbiAgICAgICAgaWYgKGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQgJiYgIWFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuZGlzYWJsZWQpIHtcbiAgICAgICAgICBhcHBseUJ1dHRvblJlZi5jdXJyZW50LmNsaWNrKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcHBseVF1ZXJ5KClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2RhdGFzb3VyY2VSZWFkeSwgYXBwbHlRdWVyeV0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWRhdGFBY3Rpb25GaWx0ZXIpIHJldHVyblxuICAgIGlmIChkYXRhQWN0aW9uRmlsdGVyLndoZXJlICE9PSBwcmVEYXRhQWN0aW9uRmlsdGVyPy53aGVyZSkge1xuICAgICAgYXBwbHlRdWVyeSgpXG4gICAgfVxuICB9LCBbZGF0YUFjdGlvbkZpbHRlciwgcHJlRGF0YUFjdGlvbkZpbHRlcj8ud2hlcmUsIGFwcGx5UXVlcnldKVxuXG4gIGNvbnN0IHJlc2V0UXVlcnkgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgLy8gMS4gcmVzZXQgYXR0cmlidXRlIGZpbHRlclxuICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbEV4cHJPYmopXG4gICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihzcWxFeHByT2JqKVxuICAgIC8vIDIuIHJlc2V0IHNwYXRpYWwgZmlsdGVyXG4gICAgc2V0UmVzZXRTeW1ib2woU3ltYm9sKCkpXG4gIH0sIFtzcWxFeHByT2JqXSlcblxuICBjb25zdCBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHNxbE9iajogSU1TcWxFeHByZXNzaW9uKSA9PiB7XG4gICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsT2JqKVxuICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsT2JqKVxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVTcGF0aWFsRmlsdGVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGZpbHRlcjogU3BhdGlhbEZpbHRlck9iaikgPT4ge1xuICAgIHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCA9IGZpbHRlclxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVSZWxhdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChyZWw6IFNwYXRpYWxSZWxhdGlvbikgPT4ge1xuICAgIHNwYXRpYWxSZWxhdGlvblJlZi5jdXJyZW50ID0gcmVsXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZUJ1ZmZlckNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4ge1xuICAgIGJ1ZmZlclJlZi5jdXJyZW50ID0geyBkaXN0YW5jZSwgdW5pdCB9XG4gIH0sIFtdKVxuXG4gIGNvbnN0IHNob3dBdHRyaWJ1dGVGaWx0ZXIgPSB1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwck9iaiAhPSBudWxsXG4gIGNvbnN0IHNob3dTcGF0aWFsRmlsdGVyID0gc3BhdGlhbEZpbHRlckVuYWJsZWQgJiYgdXNlU3BhdGlhbEZpbHRlciAmJiAoc3BhdGlhbEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgfHwgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSB8fCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMClcblxuICAvLyBEZWJ1ZyBsb2dnaW5nIGZvciBmb3JtIHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnZm9ybS1yZW5kZXItY2hlY2snLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBkYXRhc291cmNlUmVhZHksXG4gICAgICB1c2VBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICBzcWxFeHByT2JqOiBzcWxFeHByT2JqID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICBzcWxFeHByT2JqUGFydHM6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHNob3dBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICBvcmlnaW5EUzogb3JpZ2luRFMgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbm9uZScsXG4gICAgICBzaG93U3BhdGlhbEZpbHRlcixcbiAgICAgIGlzQXV0b0hlaWdodCxcbiAgICAgIG91dHB1dERTOiBvdXRwdXREUyA/ICdleGlzdHMnIDogJ251bGwnXG4gICAgfSlcbiAgfSwgW2NvbmZpZ0lkLCBkYXRhc291cmNlUmVhZHksIHVzZUF0dHJpYnV0ZUZpbHRlciwgc3FsRXhwck9iaiwgc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFMsIHNob3dTcGF0aWFsRmlsdGVyLCBpc0F1dG9IZWlnaHQsIG91dHB1dERTXSlcblxuICAvLyBMb2cgd2hlbiBmb3JtIGNvbnRlbnQgc2hvdWxkIHJlbmRlclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzaG93QXR0cmlidXRlRmlsdGVyICYmIG9yaWdpbkRTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnYXR0cmlidXRlLWZpbHRlci1yZWFkeScsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgc3FsRXhwck9ialBhcnRzOiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGF0dHJpYnV0ZUZpbHRlckxhYmVsLFxuICAgICAgICBub3RlOiAnSW5wdXQgZmllbGQgc2hvdWxkIGJlIHZpc2libGUnXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnYXR0cmlidXRlLWZpbHRlci1ub3QtcmVhZHknLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgc2hvd0F0dHJpYnV0ZUZpbHRlcixcbiAgICAgICAgb3JpZ2luRFM6IG9yaWdpbkRTID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICAgICAgc3FsRXhwck9iajogc3FsRXhwck9iaiA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgICByZWFzb246ICFzaG93QXR0cmlidXRlRmlsdGVyID8gJ3Nob3dBdHRyaWJ1dGVGaWx0ZXIgaXMgZmFsc2UnIDogJ29yaWdpbkRTIGlzIG51bGwnXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3Nob3dBdHRyaWJ1dGVGaWx0ZXIsIG9yaWdpbkRTLCBjb25maWdJZCwgc3FsRXhwck9iaiwgdXNlQXR0cmlidXRlRmlsdGVyLCBhdHRyaWJ1dGVGaWx0ZXJMYWJlbF0pXG5cbiAgLy8gQ2hlY2sgRE9NIHZpc2liaWxpdHkgYWZ0ZXIgcmVuZGVyXG4gIGNvbnN0IGZvcm1Db250ZW50UmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChmb3JtQ29udGVudFJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zdCBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZm9ybUNvbnRlbnRSZWYuY3VycmVudClcbiAgICAgIGNvbnN0IHJlY3QgPSBmb3JtQ29udGVudFJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnZm9ybS1jb250ZW50LWRvbS1jaGVjaycsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBleGlzdHM6ICEhZm9ybUNvbnRlbnRSZWYuY3VycmVudCxcbiAgICAgICAgZGlzcGxheTogY29tcHV0ZWRTdHlsZS5kaXNwbGF5LFxuICAgICAgICB2aXNpYmlsaXR5OiBjb21wdXRlZFN0eWxlLnZpc2liaWxpdHksXG4gICAgICAgIG9wYWNpdHk6IGNvbXB1dGVkU3R5bGUub3BhY2l0eSxcbiAgICAgICAgaGVpZ2h0OiBjb21wdXRlZFN0eWxlLmhlaWdodCxcbiAgICAgICAgbWF4SGVpZ2h0OiBjb21wdXRlZFN0eWxlLm1heEhlaWdodCxcbiAgICAgICAgZmxleDogY29tcHV0ZWRTdHlsZS5mbGV4LFxuICAgICAgICBmbGV4QmFzaXM6IGNvbXB1dGVkU3R5bGUuZmxleEJhc2lzLFxuICAgICAgICByZWN0SGVpZ2h0OiByZWN0LmhlaWdodCxcbiAgICAgICAgcmVjdFdpZHRoOiByZWN0LndpZHRoLFxuICAgICAgICBpc1Zpc2libGU6IHJlY3QuaGVpZ2h0ID4gMCAmJiByZWN0LndpZHRoID4gMCxcbiAgICAgICAgcGFyZW50SGVpZ2h0OiBmb3JtQ29udGVudFJlZi5jdXJyZW50LnBhcmVudEVsZW1lbnQ/LmNsaWVudEhlaWdodCB8fCAwXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2NvbmZpZ0lkLCBzaG93QXR0cmlidXRlRmlsdGVyLCBvcmlnaW5EU10pXG5cbiAgcmV0dXJuIChcbiAgICA8UXVlcnlUYXNrQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyByZXNldFN5bWJvbCB9fT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1mb3JtJyBjc3M9e2dldEZvcm1TdHlsZShpc0F1dG9IZWlnaHQpfT5cbiAgICAgICAgPGRpdiByZWY9e2Zvcm1Db250ZW50UmVmfSBjbGFzc05hbWU9J3F1ZXJ5LWZvcm1fX2NvbnRlbnQnIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn0+XG4gICAgICAgICAge3Nob3dBdHRyaWJ1dGVGaWx0ZXIgJiYgKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgcm9sZT0nZ3JvdXAnIFxuICAgICAgICAgICAgICBjbGFzc05hbWU9J3B4LTQnIFxuICAgICAgICAgICAgICBjc3M9e2Nzc2BwYWRkaW5nLXRvcDogMnB4O2B9XG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2F0dHJpYnV0ZUZpbHRlckxhYmVsfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZm9ybS10aXRsZSBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJywgeyAnZC1ub25lJzogIWF0dHJpYnV0ZUZpbHRlckxhYmVsICYmICFhdHRyaWJ1dGVGaWx0ZXJEZXNjIH0pfSBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAge2F0dHJpYnV0ZUZpbHRlckxhYmVsICYmIDxkaXYgY2xhc3NOYW1lPSdtci0yIHRpdGxlMic+e2F0dHJpYnV0ZUZpbHRlckxhYmVsfTwvZGl2Pn1cbiAgICAgICAgICAgICAgICB7YXR0cmlidXRlRmlsdGVyRGVzYyAmJiAoXG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXthdHRyaWJ1dGVGaWx0ZXJEZXNjfT5cbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeSc+PEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz48L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge29yaWdpbkRTICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYG1hcmdpbjogLTEwcHggMHB4O2B9PlxuICAgICAgICAgICAgICAgICAgPFNxbEV4cHJlc3Npb25SdW50aW1lXG4gICAgICAgICAgICAgICAgICAgIGtleT17YCR7Y29uZmlnSWR9LSR7aW5pdGlhbElucHV0VmFsdWUgfHwgJ2RlZmF1bHQnfWB9XG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZT17b3JpZ2luRFN9XG4gICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb249e2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmp9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTcWxFeHByT2JqQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge3Nob3dBdHRyaWJ1dGVGaWx0ZXIgJiYgc2hvd1NwYXRpYWxGaWx0ZXIgJiYgKFxuICAgICAgICAgICAgPGhyIGNsYXNzTmFtZT0nbS00JyBjc3M9e2Nzc2Bib3JkZXI6IG5vbmU7IGhlaWdodDogMXB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO2B9Lz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtzaG93U3BhdGlhbEZpbHRlciAmJiAoXG4gICAgICAgICAgICA8UXVlcnlUYXNrU3BhdGlhbEZvcm1cbiAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICBsYWJlbD17c3BhdGlhbEZpbHRlckxhYmVsfVxuICAgICAgICAgICAgICBkZXNjPXtzcGF0aWFsRmlsdGVyRGVzY31cbiAgICAgICAgICAgICAgZmlsdGVyVHlwZXM9e3NwYXRpYWxGaWx0ZXJUeXBlc31cbiAgICAgICAgICAgICAgbWFwV2lkZ2V0SWRzPXtzcGF0aWFsTWFwV2lkZ2V0SWRzfVxuICAgICAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e3NwYXRpYWxJbnRlcmFjdGl2ZUNyZWF0ZVRvb2xUeXBlc31cbiAgICAgICAgICAgICAgb25GaWx0ZXJDaGFuZ2U9e2hhbmRsZVNwYXRpYWxGaWx0ZXJDaGFuZ2V9XG4gICAgICAgICAgICAgIG9uUmVsYXRpb25DaGFuZ2U9e2hhbmRsZVJlbGF0aW9uQ2hhbmdlfVxuICAgICAgICAgICAgICBvbkJ1ZmZlckNoYW5nZT17aGFuZGxlQnVmZmVyQ2hhbmdlfVxuICAgICAgICAgICAgICBzcGF0aWFsUmVsYXRpb25zPXtzcGF0aWFsUmVsYXRpb25zfVxuICAgICAgICAgICAgICBkc0VuYWJsZUJ1ZmZlcj17c3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyfVxuICAgICAgICAgICAgICBkc0J1ZmZlckRpc3RhbmNlPXtzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZX1cbiAgICAgICAgICAgICAgZHNCdWZmZXJVbml0PXtzcGF0aWFsUmVsYXRpb25CdWZmZXJVbml0fVxuICAgICAgICAgICAgICBkcmF3RW5hYmxlQnVmZmVyPXtzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXJ9XG4gICAgICAgICAgICAgIGRyYXdCdWZmZXJEaXN0YW5jZT17c3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2V9XG4gICAgICAgICAgICAgIGRyYXdCdWZmZXJVbml0PXtzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJVbml0fVxuICAgICAgICAgICAgICB1c2VEYXRhU291cmNlcz17c3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXN9XG4gICAgICAgICAgICAgIHVzZVJ1bnRpbWVEYXRhPXtzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LWZvcm1fX2FjdGlvbnMgcHgtNCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgIGNoZWNrZWQ9e3J1bnRpbWVab29tVG9TZWxlY3RlZH1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoXywgY2hlY2tlZCkgPT4gc2V0UnVudGltZVpvb21Ub1NlbGVjdGVkKGNoZWNrZWQpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPSdtci0yJ1xuICAgICAgICAgIC8+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdtci1hdXRvJyBjc3M9e2Nzc2Bmb250LXNpemU6IDAuODc1cmVtOyBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7YH0+XG4gICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3pvb21Ub1NlbGVjdGVkJyl9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDxCdXR0b24gcmVmPXthcHBseUJ1dHRvblJlZn0gY29sb3I9J3ByaW1hcnknIGNsYXNzTmFtZT0nbWwtYXV0bycgZGlzYWJsZWQ9eyFkYXRhc291cmNlUmVhZHl9IG9uQ2xpY2s9e2FwcGx5UXVlcnl9PlxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdhcHBseScpfVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIHsoc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID4gMCB8fCBzaG93U3BhdGlhbEZpbHRlcikgJiYgKFxuICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J21sLTInIG9uQ2xpY2s9e3Jlc2V0UXVlcnl9PntnZXRJMThuTWVzc2FnZSgncmVzZXQnKX08L0J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvUXVlcnlUYXNrQ29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgdHlwZSBJY29uUmVzdWx0LCB0eXBlIEltbXV0YWJsZU9iamVjdCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEljb24gfSBmcm9tICdqaW11LXVpJ1xuXG5pbnRlcmZhY2UgQ29udGVudFByb3BzIHtcbiAgaWNvbj86IEljb25SZXN1bHQgfCBJbW11dGFibGVPYmplY3Q8SWNvblJlc3VsdD5cbiAgbmFtZTogc3RyaW5nXG59XG5cbmNvbnN0IHRleHRTdHlsZSA9IGNzc2BcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgZm9udC1zaXplOiAwLjg3NXJlbTtcbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza0xhYmVsIChwcm9wczogQ29udGVudFByb3BzKSB7XG4gIGNvbnN0IHsgaWNvbiwgbmFtZSB9ID0gcHJvcHNcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIHRleHQtdHJ1bmNhdGUnIGNzcz17dGV4dFN0eWxlfT5cbiAgICAgIHtpY29uICYmIDxJY29uIGNsYXNzTmFtZT0ncXVlcnktdGFzay1pY29uIG1yLTInIGljb249e2ljb24uc3ZnfSAvPn1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlJyB0aXRsZT17bmFtZX0+XG4gICAgICAgIHtuYW1lfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCBSZWFjdCwgdHlwZSBJbW11dGFibGVBcnJheSwgY2xhc3NOYW1lcywgbG9kYXNoLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgU2l6ZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVRhc2sgfSBmcm9tICcuL3F1ZXJ5LXRhc2snXG5pbXBvcnQgeyBRdWVyeVRhc2tMaXN0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QnXG5pbXBvcnQgeyBUYXNrTGlzdFBvcHBlcldyYXBwZXIgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1wb3BwZXItd3JhcHBlcidcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9JVEVNIH0gZnJvbSAnLi4vZGVmYXVsdC1xdWVyeS1pdGVtJ1xuXG5jb25zdCB7IGljb25NYXAgfSA9IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwKClcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHdpZGdldExhYmVsOiBzdHJpbmdcbiAgd3JhcDogYm9vbGVhblxuICBtaW5TaXplOiBTaXplXG4gIGRlZmF1bHRTaXplOiBTaXplXG4gIHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGRlZmF1bHRQYWdlU2l6ZT86IG51bWJlclxuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH1cbiAgb25IYXNoUGFyYW1ldGVyVXNlZD86IChzaG9ydElkOiBzdHJpbmcpID0+IHZvaWRcbn1cblxuY29uc3QgU1BBQ0UgPSA4XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICA+IGRpdiB7XG4gICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gIH1cbmBcblxuLy8gc2hvdyB0YXNrIGxhYmVsIGFuZCBhbiBhcnJvdyB0byB0aGUgdGFzayBjb250ZW50XG5leHBvcnQgZnVuY3Rpb24gVGFza0xpc3RJbmxpbmUgKHByb3BzOiBRdWVyeVRhc2tMaXN0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW1zLCB3aWRnZXRJZCwgbWluU2l6ZSwgZGVmYXVsdFNpemUsIGRlZmF1bHRQYWdlU2l6ZSwgd2lkZ2V0TGFiZWwsIHdyYXAgPSBmYWxzZSB9ID0gcHJvcHNcbiAgY29uc3QgY29udGFpbmVyUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IGNvbnRhaW5lcldpZHRoUmVmID0gUmVhY3QudXNlUmVmPG51bWJlcj4oMClcbiAgY29uc3QgY29udGVudFdpZHRoUmVmID0gUmVhY3QudXNlUmVmPHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0+KHt9KVxuICBjb25zdCBbbnVtT2ZFeHBhbmRlZCwgc2V0TnVtT2ZFeHBhbmRlZF0gPSBSZWFjdC51c2VTdGF0ZShxdWVyeUl0ZW1zLmxlbmd0aClcbiAgY29uc3QgW29wZW5lZFBvcHBlciwgc2V0T3BlbmVkUG9wcGVyXSA9IFJlYWN0LnVzZVN0YXRlKC0xKVxuICBjb25zdCByZXNpemVPYnNlcnZlclJlZiA9IFJlYWN0LnVzZVJlZjxSZXNpemVPYnNlcnZlcj4obnVsbClcblxuICBjb25zdCBhZGp1c3RDb250ZW50ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGxldCB0b3RhbCA9IDBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bU9mRXhwYW5kZWQ7IGkrKykge1xuICAgICAgY29uc3QgaXRlbSA9IHF1ZXJ5SXRlbXNbaV1cbiAgICAgIGNvbnN0IGl0ZW1XaWR0aCA9IGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W2l0ZW0uY29uZmlnSWRdXG4gICAgICBpZiAoaXRlbVdpZHRoID4gMCkge1xuICAgICAgICB0b3RhbCArPSBpdGVtV2lkdGggKyBTUEFDRVxuICAgICAgICBpZiAodG90YWwgPj0gY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCAmJiBudW1PZkV4cGFuZGVkICE9PSBpKSB7XG4gICAgICAgICAgc2V0TnVtT2ZFeHBhbmRlZChpKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLy8gY29udGVudCB3aWR0aCBub3QgcmVhZHlcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0TnVtT2ZFeHBhbmRlZChxdWVyeUl0ZW1zLmxlbmd0aClcbiAgfSwgW251bU9mRXhwYW5kZWQsIHF1ZXJ5SXRlbXNdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpXG4gICAgfVxuICAgIC8vIGJpbmQgd2l0aCB0aGUgbmV3IGV2ZW50IGhhbmRsZXJcbiAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50ID0gbmV3IFJlc2l6ZU9ic2VydmVyKGxvZGFzaC50aHJvdHRsZSgoZW50cmllcykgPT4ge1xuICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLnJvdW5kKGVudHJpZXNbMF0uY29udGVudFJlY3Qud2lkdGgpXG4gICAgICBpZiAoY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCAhPT0gd2lkdGgpIHtcbiAgICAgICAgY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCA9IHdpZHRoXG4gICAgICAgIGFkanVzdENvbnRlbnQoKVxuICAgICAgfVxuICAgIH0sIDIwMCkpXG4gICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudC5vYnNlcnZlKGNvbnRhaW5lclJlZi5jdXJyZW50KVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpXG4gICAgfVxuICB9LCBbYWRqdXN0Q29udGVudF0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCA9IGNvbnRhaW5lclJlZi5jdXJyZW50Py5jbGllbnRXaWR0aFxuICAgIGFkanVzdENvbnRlbnQoKVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZUl0ZW1XaWR0aENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgcXVlcnlJdGVtID0gcXVlcnlJdGVtc1tpbmRleF1cbiAgICBpZiAoY29udGVudFdpZHRoUmVmLmN1cnJlbnRbcXVlcnlJdGVtLmNvbmZpZ0lkXSAhPT0gd2lkdGgpIHtcbiAgICAgIGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W3F1ZXJ5SXRlbS5jb25maWdJZF0gPSB3aWR0aFxuICAgICAgYWRqdXN0Q29udGVudCgpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtcywgYWRqdXN0Q29udGVudF0pXG5cbiAgY29uc3QgaGFuZGxlUG9wcGVyT3BlbmVkQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZGV4OiBudW1iZXIsIGlzT3BlbjogYm9vbGVhbikgPT4ge1xuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHNldE9wZW5lZFBvcHBlcihpbmRleClcbiAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBvcGVuZWRQb3BwZXIpIHtcbiAgICAgIC8vIGN1cnJlbnQgcG9wcGVyIGlzIGNsb3NlZFxuICAgICAgc2V0T3BlbmVkUG9wcGVyKC0xKVxuICAgIH1cbiAgfSwgW29wZW5lZFBvcHBlcl0pXG5cbiAgY29uc3QgW2V4cGFuZGVkQXJyYXksIG5vbkV4cGFuZGVkQXJyYXldID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgZXhwYW5kZWRBcnJheSA9IFtdXG4gICAgY29uc3Qgbm9uRXhwYW5kZWRBcnJheSA9IFtdXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWVyeUl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaSA8IG51bU9mRXhwYW5kZWQpIHtcbiAgICAgICAgZXhwYW5kZWRBcnJheS5wdXNoKHF1ZXJ5SXRlbXNbaV0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub25FeHBhbmRlZEFycmF5LnB1c2gocXVlcnlJdGVtc1tpXSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFtleHBhbmRlZEFycmF5LCBub25FeHBhbmRlZEFycmF5XVxuICB9LCBbcXVlcnlJdGVtcywgbnVtT2ZFeHBhbmRlZF0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHJlZj17Y29udGFpbmVyUmVmfSBjc3M9e3N0eWxlfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3J1bnRpbWUtcXVlcnlfX3F1ZXJ5LWxpc3QgaC0xMDAgZC1mbGV4JywgeyAnZmxleC13cmFwJzogd3JhcCwgJ2FsaWduLWNvbnRlbnQtc3RhcnQnOiB3cmFwIH0pfT5cbiAgICAgIHtleHBhbmRlZEFycmF5Lm1hcCgocXVlcnlJdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICAgICAgICByZXR1cm4gPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgIGlkPXtpbmRleH1cbiAgICAgICAgICBrZXk9e2N1cnJlbnRJdGVtLmNvbmZpZ0lkfVxuICAgICAgICAgIGljb249e2N1cnJlbnRJdGVtLmljb259XG4gICAgICAgICAgYnV0dG9uVHlwZT0nZGVmYXVsdCdcbiAgICAgICAgICBsYWJlbD17Y3VycmVudEl0ZW0uZGlzcGxheUxhYmVsID8gY3VycmVudEl0ZW0ubmFtZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICBwb3BwZXJUaXRsZT17Y3VycmVudEl0ZW0ubmFtZX1cbiAgICAgICAgICBvbldpZHRoQ2hhbmdlPXtoYW5kbGVJdGVtV2lkdGhDaGFuZ2V9XG4gICAgICAgICAgbWluU2l6ZT17bWluU2l6ZX1cbiAgICAgICAgICBkZWZhdWx0U2l6ZT17ZGVmYXVsdFNpemV9XG4gICAgICAgICAgb25PcGVuZWRDaGFuZ2U9e2hhbmRsZVBvcHBlck9wZW5lZENoYW5nZX1cbiAgICAgICAgICBmb3JjZUNsb3NlPXtvcGVuZWRQb3BwZXIgPj0gMCAmJiBvcGVuZWRQb3BwZXIgIT09IGluZGV4fVxuICAgICAgICA+XG4gICAgICAgICAgPFF1ZXJ5VGFza1xuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgdG90YWw9ezF9XG4gICAgICAgICAgICBpc0luUG9wcGVyXG4gICAgICAgICAgICBxdWVyeUl0ZW09e2N1cnJlbnRJdGVtfVxuICAgICAgICAgICAgd3JhcHBlZEluUG9wcGVyPXt0cnVlfVxuICAgICAgICAgICAgY2xhc3NOYW1lPSdwYi00J1xuICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtkZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZT17Y3VycmVudEl0ZW0uc2hvcnRJZCA9PT0gcHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgPyBwcm9wcy5pbml0aWFsUXVlcnlWYWx1ZS52YWx1ZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3Byb3BzLm9uSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkPXtjdXJyZW50SXRlbS5zaG9ydElkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgfSl9XG5cbiAgICAgIHtub25FeHBhbmRlZEFycmF5Lmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8VGFza0xpc3RQb3BwZXJXcmFwcGVyXG4gICAgICAgICAgaWQ9e2V4cGFuZGVkQXJyYXkubGVuZ3RoICsgMX1cbiAgICAgICAgICBpY29uPXtpY29uTWFwLmljb25Nb3JlfVxuICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgYnV0dG9uVHlwZT0nZGVmYXVsdCdcbiAgICAgICAgICBwb3BwZXJUaXRsZT17d2lkZ2V0TGFiZWx9XG4gICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgIG9uT3BlbmVkQ2hhbmdlPXtoYW5kbGVQb3BwZXJPcGVuZWRDaGFuZ2V9XG4gICAgICAgICAgZm9yY2VDbG9zZT17b3BlbmVkUG9wcGVyID49IDAgJiYgb3BlbmVkUG9wcGVyICE9PSBleHBhbmRlZEFycmF5Lmxlbmd0aCArIDF9XG4gICAgICAgID5cbiAgICAgICAgICA8UXVlcnlUYXNrTGlzdCB3aWRnZXRJZD17d2lkZ2V0SWR9IGlzSW5Qb3BwZXIgZGVmYXVsdFBhZ2VTaXplPXtkZWZhdWx0UGFnZVNpemV9IHF1ZXJ5SXRlbXM9e25vbkV4cGFuZGVkQXJyYXkgYXMgYW55fSBjbGFzc05hbWU9J3BiLTQnIGluaXRpYWxRdWVyeVZhbHVlPXtwcm9wcy5pbml0aWFsUXVlcnlWYWx1ZX0gb25IYXNoUGFyYW1ldGVyVXNlZD17cHJvcHMub25IYXNoUGFyYW1ldGVyVXNlZH0gLz5cbiAgICAgICAgPC9UYXNrTGlzdFBvcHBlcldyYXBwZXI+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCBSZWFjdCwgdHlwZSBJY29uUmVzdWx0LCB0eXBlIEltbXV0YWJsZU9iamVjdCwgbG9kYXNoLCBjbGFzc05hbWVzLCBob29rcywgaXNLZXlib2FyZE1vZGUsIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uLCBNb2JpbGVQYW5lbCwgdHlwZSBTaXplLCB0eXBlIEJ1dHRvblR5cGUsIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MsIEZsb2F0aW5nUGFuZWwsIHR5cGUgU2hpZnRPcHRpb25zIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFdJREdFVF9WRVJTSU9OIH0gZnJvbSAnLi4vdmVyc2lvbidcblxuZXhwb3J0IGludGVyZmFjZSBUYXNrTGlzdFBvcHBlcldyYXBwZXJQcm9wcyB7XG4gIGlkOiBudW1iZXJcbiAgaWNvbj86IHN0cmluZyB8IEltbXV0YWJsZU9iamVjdDxJY29uUmVzdWx0PlxuICBsYWJlbD86IHN0cmluZ1xuICBmb3JjZUNsb3NlPzogYm9vbGVhblxuICBwb3BwZXJUaXRsZT86IHN0cmluZ1xuICBidXR0b25UeXBlPzogQnV0dG9uVHlwZVxuICBvbldpZHRoQ2hhbmdlPzogKGlkOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpID0+IHZvaWRcbiAgb25PcGVuZWRDaGFuZ2U/OiAoaWQ6IG51bWJlciwgaXNPcGVuOiBib29sZWFuKSA9PiB2b2lkXG4gIG1pblNpemU6IFNpemVcbiAgZGVmYXVsdFNpemU6IFNpemVcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0RWxlbWVudDxhbnk+XG59XG5cbmNvbnN0IHNoaWZ0T3B0aW9uczogU2hpZnRPcHRpb25zID0geyBwYWRkaW5nOiAxIH1cblxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tMaXN0UG9wcGVyV3JhcHBlciAocHJvcHM6IFRhc2tMaXN0UG9wcGVyV3JhcHBlclByb3BzKSB7XG4gIGNvbnN0IHsgaWQsIGljb24sIGxhYmVsLCBmb3JjZUNsb3NlLCBvbk9wZW5lZENoYW5nZSwgcG9wcGVyVGl0bGUsIG1pblNpemUsIGRlZmF1bHRTaXplLCBvbldpZHRoQ2hhbmdlLCBidXR0b25UeXBlID0gJ3RlcnRpYXJ5JywgY2hpbGRyZW4gfSA9IHByb3BzXG4gIGNvbnN0IGljb25SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3Qgd2lkdGhSZWYgPSBSZWFjdC51c2VSZWYoMClcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbcG9wcGVyVmVyc2lvbiwgc2V0UG9wcGVyVmVyc2lvbl0gPSBSZWFjdC51c2VTdGF0ZSgwKVxuICBjb25zdCBpc01vYmlsZSA9IGhvb2tzLnVzZUNoZWNrU21hbGxCcm93c2VyU2l6ZU1vZGUoKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGZvcmNlQ2xvc2UpIHtcbiAgICAgIHNldElzT3BlbihmYWxzZSlcbiAgICB9XG4gIH0sIFtmb3JjZUNsb3NlXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIG9uV2lkdGhDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHdpZHRoUmVmLmN1cnJlbnQgPSBNYXRoLnJvdW5kKGljb25SZWYuY3VycmVudC5jbGllbnRXaWR0aClcbiAgICAgIG9uV2lkdGhDaGFuZ2UoaWQsIHdpZHRoUmVmLmN1cnJlbnQpXG4gICAgICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihsb2Rhc2gudGhyb3R0bGUoKGVudHJpZXMpID0+IHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLnJvdW5kKGVudHJpZXNbMF0uY29udGVudFJlY3Qud2lkdGgpXG4gICAgICAgIGlmICh3aWR0aFJlZi5jdXJyZW50ICE9PSB3aWR0aCkge1xuICAgICAgICAgIHdpZHRoUmVmLmN1cnJlbnQgPSB3aWR0aFxuICAgICAgICAgIG9uV2lkdGhDaGFuZ2UoaWQsIHdpZHRoKVxuICAgICAgICB9XG4gICAgICB9LCAyMDApKVxuICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShpY29uUmVmLmN1cnJlbnQpXG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCB0b2dnbGVQb3BwZXIgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBvbk9wZW5lZENoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb25PcGVuZWRDaGFuZ2UoaWQsICFpc09wZW4pXG4gICAgfVxuICAgIHNldElzT3BlbighaXNPcGVuKVxuICAgIHNldFBvcHBlclZlcnNpb24ocG9wcGVyVmVyc2lvbiArIDEpXG4gICAgaWYgKGlzT3Blbikge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChpc0tleWJvYXJkTW9kZSgpKSB7XG4gICAgICAgICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoaWNvblJlZi5jdXJyZW50KVxuICAgICAgICB9XG4gICAgICB9LCAyMDApXG4gICAgfVxuICB9LCBbaWQsIGlzT3BlbiwgcG9wcGVyVmVyc2lvbiwgb25PcGVuZWRDaGFuZ2VdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3J1bnRpbWUtcXVlcnlfX3dpZGdldC1wb3BwZXInPlxuICAgICAgPEJ1dHRvblxuICAgICAgICB0aXRsZT17bGFiZWx9XG4gICAgICAgIGFyaWEtbGFiZWw9e2xhYmVsfVxuICAgICAgICBpY29uIHNpemU9J3NtJ1xuICAgICAgICB2YXJpYW50PXtidXR0b25UeXBlID09PSAndGVydGlhcnknID8gJ3RleHQnIDogdW5kZWZpbmVkfVxuICAgICAgICBjb2xvcj17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/ICdpbmhlcml0JyA6IHVuZGVmaW5lZH1cbiAgICAgICAgdHlwZT17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/IHVuZGVmaW5lZCA6IGJ1dHRvblR5cGV9XG4gICAgICAgIHJlZj17aWNvblJlZn1cbiAgICAgICAgb25DbGljaz17dG9nZ2xlUG9wcGVyfVxuICAgICAgPlxuICAgICAgICB7aWNvbiAmJiA8SWNvblxuICAgICAgICAgIHNpemU9ezE2fVxuICAgICAgICAgIHsuLi4odHlwZW9mIGljb24gPT09ICdzdHJpbmcnID8geyBpY29uIH0gOiB7IGljb246IGljb24uc3ZnLCBjb2xvcjogYnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/IHVuZGVmaW5lZCA6IGljb24ucHJvcGVydGllcy5jb2xvciB9KX1cbiAgICAgICAgLz59XG4gICAgICAgIHtsYWJlbCAmJiA8ZGl2XG4gICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWJveDtcbiAgICAgICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMjtcbiAgICAgICAgICAgIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7XG4gICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICAgICAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgICAgICAgICBgfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyh7ICdtbC0yJzogaWNvbiAhPSBudWxsIH0pfT57bGFiZWx9PC9kaXY+fVxuICAgICAgPC9CdXR0b24+XG4gICAgICB7aXNNb2JpbGVcbiAgICAgICAgPyA8TW9iaWxlUGFuZWwgb3Blbj17aXNPcGVufSB0aXRsZT17cG9wcGVyVGl0bGV9IG9uQ2xvc2U9e3RvZ2dsZVBvcHBlcn0+XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxcmVtOyAvKiBTY29wZWQgcGFkZGluZyB0byBzcGFjZSBjb250ZW50IGZyb20gZm9vdGVyICovXG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsvKiBTdGF0aW9uYXJ5IGZvb3RlciAqL31cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuMDI1ZW07XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgICAgIDxzdmcgXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTYgMTggMjIgMTIgMTYgNlwiLz5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIFF1ZXJ5U2ltcGxlIGJ5IE1hcFNpbXBsZS5vcmdcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvTW9iaWxlUGFuZWw+XG4gICAgICAgIDogPEZsb2F0aW5nUGFuZWxcbiAgICAgICAgICAgIGNsYXNzTmFtZT0ndWktdW5pdC1wb3BwZXIgdWktdW5pdC1wb3BwZXJfay1hcnJhbmdlbWVudC1pY29uIGZsZXgtZ3Jvdy0xJ1xuICAgICAgICAgICAgaGVhZGVyQ2xhc3NOYW1lPXtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTfVxuICAgICAgICAgICAgb3Blbj17aXNPcGVufVxuICAgICAgICAgICAgb25IZWFkZXJDbG9zZT17dG9nZ2xlUG9wcGVyfVxuICAgICAgICAgICAgdG9nZ2xlPXt0b2dnbGVQb3BwZXJ9XG4gICAgICAgICAgICBoZWFkZXJUaXRsZT17cG9wcGVyVGl0bGV9XG4gICAgICAgICAgICBtaW5TaXplPXttaW5TaXplfVxuICAgICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgICAgZHJhZ0JvdW5kcz0nYm9keSdcbiAgICAgICAgICAgIHZlcnNpb249e3BvcHBlclZlcnNpb259XG4gICAgICAgICAgICByZWZlcmVuY2U9e2ljb25SZWZ9XG4gICAgICAgICAgICBwbGFjZW1lbnQ9J2JvdHRvbS1zdGFydCdcbiAgICAgICAgICAgIHNoaWZ0T3B0aW9ucz17c2hpZnRPcHRpb25zfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDFyZW07IC8qIFNjb3BlZCBwYWRkaW5nIHRvIHNwYWNlIGNvbnRlbnQgZnJvbSBmb290ZXIgKi9cbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgey8qIFN0YXRpb25hcnkgZm9vdGVyICovfVxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyKTtcbiAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXRlcnRpYXJ5KTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIxNiAxOCAyMiAxMiAxNiA2XCIvPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiOCA2IDIgMTIgOCAxOFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgUXVlcnlTaW1wbGUgYnkgTWFwU2ltcGxlLm9yZ1xuICAgICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07XG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgdntXSURHRVRfVkVSU0lPTn1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9GbG9hdGluZ1BhbmVsPlxuICAgICAgfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCBSZWFjdCwgdHlwZSBJbW11dGFibGVBcnJheSwgSW1tdXRhYmxlLCB0eXBlIEltbXV0YWJsZU9iamVjdCwgaG9va3MsIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFNlbGVjdCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVRhc2sgfSBmcm9tICcuL3F1ZXJ5LXRhc2snXG5pbXBvcnQgeyBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGlzSW5Qb3BwZXI/OiBib29sZWFuXG4gIGRlZmF1bHRQYWdlU2l6ZT86IG51bWJlclxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9XG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBvblJlc3VsdHNNb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG59XG5cbmludGVyZmFjZSBHcm91cGVkUXVlcmllcyB7XG4gIGdyb3VwczogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9XG4gIHVuZ3JvdXBlZDogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT5cbiAgZ3JvdXBPcmRlcjogc3RyaW5nW11cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdyb3VwIHF1ZXJpZXMgYnkgZ3JvdXBJZFxuY29uc3QgZ3JvdXBRdWVyaWVzID0gKHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+KTogR3JvdXBlZFF1ZXJpZXMgPT4ge1xuICBjb25zdCBncm91cHM6IHsgW2dyb3VwSWQ6IHN0cmluZ106IHsgaXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+LCBkaXNwbGF5TmFtZTogc3RyaW5nLCBpY29uPzogYW55IH0gfSA9IHt9XG4gIGNvbnN0IHVuZ3JvdXBlZDogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT4gPSBbXVxuICBjb25zdCBncm91cE9yZGVyOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IGdyb3VwSW5kZXhNYXA6IHsgW2dyb3VwSWQ6IHN0cmluZ106IG51bWJlciB9ID0ge31cbiAgXG4gIC8vIEZpcnN0IHBhc3M6IGNvbGxlY3QgaXRlbXMgaW4gcmVndWxhciBhcnJheXNcbiAgY29uc3QgZ3JvdXBJdGVtc01hcDogeyBbZ3JvdXBJZDogc3RyaW5nXTogUXVlcnlJdGVtVHlwZVtdIH0gPSB7fVxuXG4gIHF1ZXJ5SXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICBpZiAoIWdyb3VwSXRlbXNNYXBbaXRlbS5ncm91cElkXSkge1xuICAgICAgICBncm91cEl0ZW1zTWFwW2l0ZW0uZ3JvdXBJZF0gPSBbXVxuICAgICAgICBncm91cHNbaXRlbS5ncm91cElkXSA9IHtcbiAgICAgICAgICBpdGVtczogSW1tdXRhYmxlKFtdKSxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogaXRlbS5ncm91cERpc3BsYXlOYW1lIHx8IGl0ZW0ubmFtZSB8fCBgR3JvdXAgJHtpdGVtLmdyb3VwSWR9YCxcbiAgICAgICAgICBpY29uOiBpdGVtLmljb25cbiAgICAgICAgfVxuICAgICAgICBncm91cEluZGV4TWFwW2l0ZW0uZ3JvdXBJZF0gPSBpbmRleFxuICAgICAgICBncm91cE9yZGVyLnB1c2goaXRlbS5ncm91cElkKVxuICAgICAgfVxuICAgICAgZ3JvdXBJdGVtc01hcFtpdGVtLmdyb3VwSWRdLnB1c2goaXRlbSlcbiAgICB9IGVsc2Uge1xuICAgICAgdW5ncm91cGVkLnB1c2goeyBpdGVtLCBpbmRleCB9KVxuICAgIH1cbiAgfSlcblxuICAvLyBTZWNvbmQgcGFzczogY29udmVydCByZWd1bGFyIGFycmF5cyB0byBJbW11dGFibGVBcnJheXNcbiAgT2JqZWN0LmtleXMoZ3JvdXBJdGVtc01hcCkuZm9yRWFjaChncm91cElkID0+IHtcbiAgICBncm91cHNbZ3JvdXBJZF0uaXRlbXMgPSBJbW11dGFibGUoZ3JvdXBJdGVtc01hcFtncm91cElkXSlcbiAgfSlcblxuICByZXR1cm4geyBncm91cHMsIHVuZ3JvdXBlZCwgZ3JvdXBPcmRlciB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZGlzcGxheSBuYW1lIGZvciBxdWVyeSBpbiBkcm9wZG93blxuLy8gVXNlczogc2VhcmNoQWxpYXMgfHwgamltdUZpZWxkTmFtZSB8fCBpdGVtLm5hbWUgfHwgZmFsbGJhY2tcbmNvbnN0IGdldFF1ZXJ5RGlzcGxheU5hbWUgPSAoaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+KTogc3RyaW5nID0+IHtcbiAgLy8gRmlyc3QgcHJpb3JpdHk6IHNlYXJjaEFsaWFzIGlmIHNldFxuICBpZiAoaXRlbS5zZWFyY2hBbGlhcykge1xuICAgIHJldHVybiBpdGVtLnNlYXJjaEFsaWFzXG4gIH1cbiAgXG4gIC8vIFNlY29uZCBwcmlvcml0eTogZmllbGQgbmFtZSBmcm9tIFNRTCBleHByZXNzaW9uXG4gIGNvbnN0IGppbXVGaWVsZE5hbWUgPSBpdGVtLnNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LmppbXVGaWVsZE5hbWVcbiAgaWYgKGppbXVGaWVsZE5hbWUpIHtcbiAgICByZXR1cm4gamltdUZpZWxkTmFtZVxuICB9XG4gIFxuICAvLyBUaGlyZCBwcmlvcml0eTogaXRlbSBuYW1lXG4gIGlmIChpdGVtLm5hbWUpIHtcbiAgICByZXR1cm4gaXRlbS5uYW1lXG4gIH1cbiAgXG4gIC8vIEZhbGxiYWNrXG4gIHJldHVybiAnUXVlcnknXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tMaXN0IChwcm9wczogUXVlcnlUYXNrTGlzdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtcywgd2lkZ2V0SWQsIGRlZmF1bHRQYWdlU2l6ZSwgaXNJblBvcHBlciA9IGZhbHNlLCBjbGFzc05hbWUgPSAnJywgaW5pdGlhbFF1ZXJ5VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHJlc3VsdHNNb2RlLCBvblJlc3VsdHNNb2RlQ2hhbmdlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlcylcbiAgXG4gIGNvbnN0IHsgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIgfSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gZ3JvdXBRdWVyaWVzKHF1ZXJ5SXRlbXMpLCBbcXVlcnlJdGVtc10pXG4gIFxuICAvLyBGaW5kIHRoZSBxdWVyeSBpdGVtIG1hdGNoaW5nIHRoZSBpbml0aWFsUXVlcnlWYWx1ZSBzaG9ydElkIGZyb20gVVJMIGhhc2hcbiAgY29uc3QgbWF0Y2hpbmdRdWVyeUluZGV4ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFpbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBxdWVyeUl0ZW1zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uc2hvcnRJZCA9PT0gaW5pdGlhbFF1ZXJ5VmFsdWUuc2hvcnRJZClcbiAgfSwgW3F1ZXJ5SXRlbXMsIGluaXRpYWxRdWVyeVZhbHVlXSlcbiAgXG4gIC8vIERldGVybWluZSB3aGljaCBncm91cC91bmdyb3VwZWQgaW5kZXggdGhlIG1hdGNoaW5nIHF1ZXJ5IGlzIGF0XG4gIGNvbnN0IGdldFF1ZXJ5U2VsZWN0aW9uID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKG1hdGNoaW5nUXVlcnlJbmRleCA8IDApIHJldHVybiBudWxsXG4gICAgXG4gICAgY29uc3QgaXRlbSA9IHF1ZXJ5SXRlbXNbbWF0Y2hpbmdRdWVyeUluZGV4XVxuICAgIGlmIChpdGVtLmdyb3VwSWQpIHtcbiAgICAgIGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cHNbaXRlbS5ncm91cElkXT8uaXRlbXMgfHwgSW1tdXRhYmxlKFtdKVxuICAgICAgY29uc3QgaW5kZXhJbkdyb3VwID0gZ3JvdXBJdGVtcy5maW5kSW5kZXgocSA9PiBxLmNvbmZpZ0lkID09PSBpdGVtLmNvbmZpZ0lkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXF1ZXJ5LWZvdW5kLWluLWdyb3VwJyxcbiAgICAgICAgZ3JvdXBJZDogaXRlbS5ncm91cElkLFxuICAgICAgICBpbmRleEluR3JvdXA6IGluZGV4SW5Hcm91cCA+PSAwID8gaW5kZXhJbkdyb3VwIDogMCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGl0ZW0uc2hvcnRJZFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7IHR5cGU6ICdncm91cCcgYXMgY29uc3QsIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCwgaW5kZXg6IGluZGV4SW5Hcm91cCA+PSAwID8gaW5kZXhJbkdyb3VwIDogMCB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeVxuICAgICAgY29uc3QgaW5kZXhJblVuZ3JvdXBlZCA9IHVuZ3JvdXBlZC5maW5kSW5kZXgoKHsgaXRlbTogcSB9KSA9PiBxLmNvbmZpZ0lkID09PSBpdGVtLmNvbmZpZ0lkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXF1ZXJ5LWZvdW5kLXVuZ3JvdXBlZCcsXG4gICAgICAgIGluZGV4SW5Vbmdyb3VwZWQ6IGluZGV4SW5Vbmdyb3VwZWQgPj0gMCA/IGluZGV4SW5Vbmdyb3VwZWQgOiAwLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogaXRlbS5zaG9ydElkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgdHlwZTogJ3VuZ3JvdXBlZCcgYXMgY29uc3QsIGluZGV4OiBpbmRleEluVW5ncm91cGVkID49IDAgPyBpbmRleEluVW5ncm91cGVkIDogMCB9XG4gICAgfVxuICB9LCBbbWF0Y2hpbmdRdWVyeUluZGV4LCBxdWVyeUl0ZW1zLCBncm91cHMsIHVuZ3JvdXBlZF0pXG4gIFxuICAvLyBUcmFjayBzZWxlY3RlZCBxdWVyeSAtIGluaXRpYWxpemUgd2l0aCBtYXRjaGluZyBxdWVyeSBpZiBmb3VuZCBmcm9tIFVSTCBoYXNoXG4gIGNvbnN0IFtzZWxlY3RlZEdyb3VwSWQsIHNldFNlbGVjdGVkR3JvdXBJZF0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmcgfCBudWxsPigoKSA9PiB7XG4gICAgaWYgKGdldFF1ZXJ5U2VsZWN0aW9uPy50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtZ3JvdXAtc2VsZWN0aW9uJyxcbiAgICAgICAgZ3JvdXBJZDogZ2V0UXVlcnlTZWxlY3Rpb24uZ3JvdXBJZFxuICAgICAgfSlcbiAgICAgIHJldHVybiBnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkXG4gICAgfVxuICAgIC8vIERlZmF1bHQgdG8gZmlyc3QgZ3JvdXAgaWYgZ3JvdXBzIGV4aXN0IGFuZCBubyBoYXNoIHBhcmFtZXRlclxuICAgIGlmIChncm91cE9yZGVyLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbC1ncm91cC1zZWxlY3Rpb24tZGVmYXVsdCcsXG4gICAgICAgIGdyb3VwSWQ6IGdyb3VwT3JkZXJbMF0sXG4gICAgICAgIG5vdGU6ICdObyBoYXNoIHBhcmFtZXRlciwgZGVmYXVsdGluZyB0byBmaXJzdCBncm91cCdcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ3JvdXBPcmRlclswXVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9KVxuICBjb25zdCBbc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIHNldFNlbGVjdGVkR3JvdXBRdWVyeUluZGV4XSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IHtcbiAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24/LnR5cGUgPT09ICdncm91cCcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbC1ncm91cC1xdWVyeS1pbmRleCcsXG4gICAgICAgIGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleFxuICAgICAgfSlcbiAgICAgIHJldHVybiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9KVxuICBjb25zdCBbc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCwgc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleF0gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PiB7XG4gICAgaWYgKGdldFF1ZXJ5U2VsZWN0aW9uPy50eXBlID09PSAndW5ncm91cGVkJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLXVuZ3JvdXBlZC1pbmRleCcsXG4gICAgICAgIGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleFxuICAgICAgfSlcbiAgICAgIHJldHVybiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9KVxuICBcbiAgLy8gVXBkYXRlIHNlbGVjdGlvbiB3aGVuIGluaXRpYWxRdWVyeVZhbHVlIGNoYW5nZXMgKGUuZy4sIHdoZW4gVVJMIGhhc2ggaXMgZGV0ZWN0ZWQpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGdldFF1ZXJ5U2VsZWN0aW9uKSB7XG4gICAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWNoYW5nZWQtdG8tZ3JvdXAnLFxuICAgICAgICAgIGdyb3VwSWQ6IGdldFF1ZXJ5U2VsZWN0aW9uLmdyb3VwSWQsXG4gICAgICAgICAgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4XG4gICAgICAgIH0pXG4gICAgICAgIHNldFNlbGVjdGVkR3JvdXBJZChnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkKVxuICAgICAgICBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleChnZXRRdWVyeVNlbGVjdGlvbi5pbmRleClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tY2hhbmdlZC10by11bmdyb3VwZWQnLFxuICAgICAgICAgIGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleFxuICAgICAgICB9KVxuICAgICAgICBzZXRTZWxlY3RlZEdyb3VwSWQobnVsbClcbiAgICAgICAgc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleChnZXRRdWVyeVNlbGVjdGlvbi5pbmRleClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm8gaGFzaCBwYXJhbWV0ZXIgLSBlbnN1cmUgd2UgaGF2ZSBhIGRlZmF1bHQgc2VsZWN0aW9uXG4gICAgICAvLyBJZiBncm91cHMgZXhpc3QsIGRlZmF1bHQgdG8gZmlyc3QgZ3JvdXAgKGFscmVhZHkgaGFuZGxlZCBpbiB1c2VTdGF0ZSBpbml0aWFsaXplcilcbiAgICAgIC8vIEJ1dCBpZiBubyBncm91cHMgYW5kIHdlIGhhdmUgdW5ncm91cGVkLCBlbnN1cmUgc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCBpcyBzZXRcbiAgICAgIGlmIChncm91cE9yZGVyLmxlbmd0aCA9PT0gMCAmJiB1bmdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnbm8taGFzaC1wYXJhbWV0ZXItZGVmYXVsdC11bmdyb3VwZWQnLFxuICAgICAgICAgIGRlZmF1bHRJbmRleDogMFxuICAgICAgICB9KVxuICAgICAgICBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KDApXG4gICAgICB9XG4gICAgfVxuICB9LCBbZ2V0UXVlcnlTZWxlY3Rpb24sIGdyb3VwT3JkZXIubGVuZ3RoLCB1bmdyb3VwZWQubGVuZ3RoXSlcbiAgXG4gIC8vIEdldCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHF1ZXJ5IGl0ZW1cbiAgY29uc3QgZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0gPSAoKTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+ID0+IHtcbiAgICAvLyBQUklPUklUWSAxOiBJZiBoYXNoIHBhcmFtZXRlciBtYXRjaGVzIGEgcXVlcnksIHVzZSB0aGF0IGRpcmVjdGx5XG4gICAgLy8gVGhpcyBlbnN1cmVzIHdlIGFsd2F5cyB1c2UgdGhlIGhhc2gtbWF0Y2hlZCBxdWVyeSwgcmVnYXJkbGVzcyBvZiBzdGF0ZSB0aW1pbmdcbiAgICAvLyBUaGlzIGlzIGNyaXRpY2FsIGZvciBncm91cGVkIHF1ZXJpZXMgd2hlcmUgZHJvcGRvd25zIG5lZWQgdG8gYmUgc3luY2hyb25pemVkXG4gICAgaWYgKGdldFF1ZXJ5U2VsZWN0aW9uICYmIG1hdGNoaW5nUXVlcnlJbmRleCA+PSAwKSB7XG4gICAgICBjb25zdCBoYXNoTWF0Y2hlZEl0ZW0gPSBxdWVyeUl0ZW1zW21hdGNoaW5nUXVlcnlJbmRleF1cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0taGFzaC1tYXRjaCcsXG4gICAgICAgIHNob3J0SWQ6IGhhc2hNYXRjaGVkSXRlbS5zaG9ydElkLFxuICAgICAgICBncm91cElkOiBoYXNoTWF0Y2hlZEl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgY29uZmlnSWQ6IGhhc2hNYXRjaGVkSXRlbS5jb25maWdJZCxcbiAgICAgICAgaXNHcm91cGVkOiAhIWhhc2hNYXRjaGVkSXRlbS5ncm91cElkLFxuICAgICAgICBtYXRjaGluZ1F1ZXJ5SW5kZXgsXG4gICAgICAgIG5vdGU6ICdVc2luZyBoYXNoLW1hdGNoZWQgcXVlcnkgKGhpZ2hlc3QgcHJpb3JpdHkpJ1xuICAgICAgfSlcbiAgICAgIHJldHVybiBoYXNoTWF0Y2hlZEl0ZW1cbiAgICB9XG4gICAgXG4gICAgLy8gUFJJT1JJVFkgMjogT3RoZXJ3aXNlIHVzZSBjdXJyZW50IHN0YXRlIHNlbGVjdGlvblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICBldmVudDogJ2dldFNlbGVjdGVkUXVlcnlJdGVtLXN0YXRlLXNlbGVjdGlvbicsXG4gICAgICBzZWxlY3RlZEdyb3VwSWQsXG4gICAgICBoYXNTZWxlY3RlZEdyb3VwOiBzZWxlY3RlZEdyb3VwSWQgJiYgZ3JvdXBzW3NlbGVjdGVkR3JvdXBJZF0sXG4gICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCxcbiAgICAgIHNlbGVjdGVkVW5ncm91cGVkSW5kZXgsXG4gICAgICB1bmdyb3VwZWRMZW5ndGg6IHVuZ3JvdXBlZC5sZW5ndGgsXG4gICAgICBncm91cE9yZGVyTGVuZ3RoOiBncm91cE9yZGVyLmxlbmd0aCxcbiAgICAgIG5vdGU6ICdObyBoYXNoIHBhcmFtZXRlciwgdXNpbmcgc3RhdGUgc2VsZWN0aW9uJ1xuICAgIH0pXG4gICAgXG4gICAgLy8gSWYgYSBncm91cCBpcyBzZWxlY3RlZCwgZ2V0IHF1ZXJ5IGZyb20gdGhhdCBncm91cFxuICAgIGlmIChzZWxlY3RlZEdyb3VwSWQgJiYgZ3JvdXBzW3NlbGVjdGVkR3JvdXBJZF0pIHtcbiAgICAgIGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cHNbc2VsZWN0ZWRHcm91cElkXS5pdGVtc1xuICAgICAgaWYgKGdyb3VwSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBpZHggPSBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCA8IGdyb3VwSXRlbXMubGVuZ3RoID8gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggOiAwXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IGdyb3VwSXRlbXNbaWR4XVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0ZWQtcXVlcnktZnJvbS1ncm91cCcsXG4gICAgICAgICAgZ3JvdXBJZDogc2VsZWN0ZWRHcm91cElkLFxuICAgICAgICAgIGdyb3VwUXVlcnlJbmRleDogaWR4LFxuICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzZWxlY3RlZEl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgcXVlcnlEaXNwbGF5TmFtZTogZ2V0UXVlcnlEaXNwbGF5TmFtZShzZWxlY3RlZEl0ZW0pXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEl0ZW1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gT3RoZXJ3aXNlLCBnZXQgZnJvbSB1bmdyb3VwZWQgcXVlcmllc1xuICAgIGlmICh1bmdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgaWR4ID0gc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCA8IHVuZ3JvdXBlZC5sZW5ndGggPyBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4IDogMFxuICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdW5ncm91cGVkW2lkeF0uaXRlbVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdzZWxlY3RlZC1xdWVyeS1mcm9tLXVuZ3JvdXBlZCcsXG4gICAgICAgIHVuZ3JvdXBlZEluZGV4OiBpZHgsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzZWxlY3RlZEl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5RGlzcGxheU5hbWU6IGdldFF1ZXJ5RGlzcGxheU5hbWUoc2VsZWN0ZWRJdGVtKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBzZWxlY3RlZEl0ZW1cbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgdG8gZmlyc3QgcXVlcnkgaXRlbVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICBldmVudDogJ3NlbGVjdGVkLXF1ZXJ5LWZhbGxiYWNrJyxcbiAgICAgIG5vdGU6ICdObyBncm91cHMgb3IgdW5ncm91cGVkIHF1ZXJpZXMsIHVzaW5nIGZpcnN0IGl0ZW0nXG4gICAgfSlcbiAgICByZXR1cm4gcXVlcnlJdGVtc1swXVxuICB9XG4gIFxuICBjb25zdCBzZWxlY3RlZFF1ZXJ5SXRlbSA9IGdldFNlbGVjdGVkUXVlcnlJdGVtKClcbiAgY29uc3Qgc2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBxdWVyeUl0ZW1zLmZpbmRJbmRleChxID0+IHEuY29uZmlnSWQgPT09IHNlbGVjdGVkUXVlcnlJdGVtLmNvbmZpZ0lkKVxuICB9LCBbcXVlcnlJdGVtcywgc2VsZWN0ZWRRdWVyeUl0ZW1dKVxuICBcbiAgLy8gSWYgb25seSBvbmUgcXVlcnkgdG90YWwsIGRvbid0IHNob3cgZHJvcGRvd25cbiAgY29uc3Qgc2hvd0Ryb3Bkb3duID0gcXVlcnlJdGVtcy5sZW5ndGggPiAxIHx8IGdyb3VwT3JkZXIubGVuZ3RoID4gMFxuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17YHJ1bnRpbWUtcXVlcnlfX3F1ZXJ5LWxpc3QgaC0xMDAgJHtjbGFzc05hbWV9YH0gY3NzPXtjc3NgXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIC5xdWVyeS1zZWxlY3RvciB7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS1zZWxlY3Rvci1sYWJlbCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgfVxuICAgICAgLnF1ZXJ5LXNlbGVjdG9yIHNlbGVjdCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuICAgICAgLnF1ZXJ5LXRhc2stY29udGFpbmVyIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICB9XG4gICAgYH0+XG4gICAgICB7LyogU2VhcmNoIExheWVyIGRyb3Bkb3duIG1vdmVkIHRvIFF1ZXJ5VGFzayBRdWVyeSB0YWIgY29udGVudCAqL31cbiAgICAgIFxuICAgICAgey8qIFNob3cgc2VsZWN0ZWQgcXVlcnkgZm9ybSBkaXJlY3RseSBiZWxvdyAqL31cbiAgICAgIHtzZWxlY3RlZFF1ZXJ5SXRlbSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgcXVlcnktdGFzay1jb250YWluZXIgJHtpc0luUG9wcGVyID8gRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTUyA6ICcnfWB9PlxuICAgICAgICAgIDxRdWVyeVRhc2tcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIGluZGV4PXtzZWxlY3RlZFF1ZXJ5UmVhbEluZGV4ID49IDAgPyBzZWxlY3RlZFF1ZXJ5UmVhbEluZGV4IDogMH1cbiAgICAgICAgICAgIHRvdGFsPXtxdWVyeUl0ZW1zLmxlbmd0aH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbT17c2VsZWN0ZWRRdWVyeUl0ZW19XG4gICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2RlZmF1bHRQYWdlU2l6ZX1cbiAgICAgICAgICAgIGlzSW5Qb3BwZXI9e2lzSW5Qb3BwZXJ9XG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZT17c2VsZWN0ZWRRdWVyeUl0ZW0uc2hvcnRJZCA9PT0gaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgPyBpbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtvbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgcXVlcnlJdGVtcz17cXVlcnlJdGVtc31cbiAgICAgICAgICAgIHNlbGVjdGVkUXVlcnlJbmRleD17c2VsZWN0ZWRVbmdyb3VwZWRJbmRleH1cbiAgICAgICAgICAgIG9uUXVlcnlDaGFuZ2U9eyhpbmRleCkgPT4gc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleChpbmRleCl9XG4gICAgICAgICAgICAvLyBHcm91cGluZyBwcm9wc1xuICAgICAgICAgICAgZ3JvdXBzPXtncm91cHN9XG4gICAgICAgICAgICB1bmdyb3VwZWQ9e3VuZ3JvdXBlZH1cbiAgICAgICAgICAgIGdyb3VwT3JkZXI9e2dyb3VwT3JkZXJ9XG4gICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWQ9e3NlbGVjdGVkR3JvdXBJZH1cbiAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4PXtzZWxlY3RlZEdyb3VwUXVlcnlJbmRleH1cbiAgICAgICAgICAgIG9uR3JvdXBDaGFuZ2U9eyhncm91cElkKSA9PiBzZXRTZWxlY3RlZEdyb3VwSWQoZ3JvdXBJZCl9XG4gICAgICAgICAgICBvbkdyb3VwUXVlcnlDaGFuZ2U9eyhpbmRleCkgPT4gc2V0U2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgb25Vbmdyb3VwZWRDaGFuZ2U9eyhpbmRleCkgPT4gc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleChpbmRleCl9XG4gICAgICAgICAgICByZXN1bHRzTW9kZT17cmVzdWx0c01vZGV9XG4gICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlPXtvblJlc3VsdHNNb2RlQ2hhbmdlfVxuICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXthY2N1bXVsYXRlZFJlY29yZHN9XG4gICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17b25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAvLyBObyBvbk5hdkJhY2sgLSBubyBuYXZpZ2F0aW9uIG5lZWRlZFxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5cblxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCB0eXBlIElNU3RhdGUsIGpzeCwgY3NzLCBjbGFzc05hbWVzLCB0eXBlIEltbXV0YWJsZUFycmF5LCB0eXBlIFVzZURhdGFTb3VyY2UsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIFRvb2x0aXAsIEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IHR5cGUgQ3JlYXRlVG9vbFR5cGUsIFNwYXRpYWxGaWx0ZXJUeXBlLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIHR5cGUgU3BhdGlhbFJlbGF0aW9uLCBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURhdGFTb3VyY2UgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHMnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbU1hcCB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1tYXAnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURyYXcgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHJhdydcclxuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrSXRlbVByb3BzIHtcclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIGRlc2M6IHN0cmluZ1xyXG4gIGRzRW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgZHNCdWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgZHNCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIGRyYXdFbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBkcmF3QnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGRyYXdCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIHNwYXRpYWxSZWxhdGlvbnM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxSZWxhdGlvbj5cclxuICB1c2VEYXRhU291cmNlczogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT5cclxuICB1c2VSdW50aW1lRGF0YTogYm9vbGVhblxyXG4gIGZpbHRlclR5cGVzOiBJbW11dGFibGVBcnJheTxTcGF0aWFsRmlsdGVyVHlwZT5cclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICBjcmVhdGVUb29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxyXG4gIG9uRmlsdGVyQ2hhbmdlOiAoZmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqKSA9PiB2b2lkXHJcbiAgb25SZWxhdGlvbkNoYW5nZTogKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB2b2lkXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrU3BhdGlhbEZvcm0gKHByb3BzOiBRdWVyeVRhc2tJdGVtUHJvcHMpIHtcclxuICBjb25zdCB7XHJcbiAgICBsYWJlbCwgZGVzYywgZmlsdGVyVHlwZXMsIG1hcFdpZGdldElkcywgb25GaWx0ZXJDaGFuZ2UsIG9uUmVsYXRpb25DaGFuZ2UsIG9uQnVmZmVyQ2hhbmdlLCB1c2VEYXRhU291cmNlcywgc3BhdGlhbFJlbGF0aW9ucywgdXNlUnVudGltZURhdGEsXHJcbiAgICBkc0VuYWJsZUJ1ZmZlciwgZHNCdWZmZXJEaXN0YW5jZSwgZHNCdWZmZXJVbml0LCBkcmF3RW5hYmxlQnVmZmVyLCBkcmF3QnVmZmVyRGlzdGFuY2UsIGRyYXdCdWZmZXJVbml0LCBjcmVhdGVUb29sVHlwZXMsIHdpZGdldElkXHJcbiAgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcclxuICAvLyB1c2VkIHRvIHN0b3JlIHRoZSBzZWxlY3Rpb24gb2YgdGhlIGRhdGEgc291cmNlIGluIG9yZGVyIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIHdoZW4gb3B0aW9uIGNoYW5nZXNcclxuICBjb25zdCBzZWxlY3RlZEdlb21ldHJpZXNSZWYgPSBSZWFjdC51c2VSZWY8YW55PihudWxsKVxyXG4gIGNvbnN0IG1hcEV4aXN0cyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBpZiAobWFwV2lkZ2V0SWRzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IG1hcFdpZGdldElkID0gbWFwV2lkZ2V0SWRzWzBdXHJcbiAgICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1ttYXBXaWRnZXRJZF0gIT0gbnVsbFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfSlcclxuICBjb25zdCBjYW5Vc2VNYXBGaWx0ZXIgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBtYXBFeGlzdHMgJiYgKGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5DdXJyZW50TWFwRXh0ZW50KSB8fCBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpXHJcbiAgfSwgW2ZpbHRlclR5cGVzLCBtYXBFeGlzdHNdKVxyXG4gIGNvbnN0IHN1cHBvcnRlZEZpbHRlclR5cGVzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBbXVxyXG4gICAgaWYgKHVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwIHx8IHVzZVJ1bnRpbWVEYXRhKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdkYXRhJywgbGFiZWw6IGdldEkxOG5NZXNzYWdlKCdmZWF0dXJlRnJvbURzJykgfSlcclxuICAgIH1cclxuICAgIGlmIChjYW5Vc2VNYXBGaWx0ZXIgJiYgZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkN1cnJlbnRNYXBFeHRlbnQpKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdtYXAnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuQ3VycmVudE1hcEV4dGVudH1gKSB9KVxyXG4gICAgfVxyXG4gICAgaWYgKGNhblVzZU1hcEZpbHRlciAmJiBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ2RyYXcnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZX1gKSB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4gIH0sIFtjYW5Vc2VNYXBGaWx0ZXIsIHVzZURhdGFTb3VyY2VzLCB1c2VSdW50aW1lRGF0YSwgZ2V0STE4bk1lc3NhZ2UsIGZpbHRlclR5cGVzXSlcclxuXHJcbiAgY29uc3QgW2N1cnJlbnRGaWx0ZXJUeXBlLCBzZXRDdXJyZW50RmlsdGVyVHlwZV0gPSBSZWFjdC51c2VTdGF0ZShzdXBwb3J0ZWRGaWx0ZXJUeXBlcz8uWzBdPy52YWx1ZSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIGluIG9yZGVyIHRvIGF2b2lkIGludmFsaWQgb3B0aW9uIGJlaW5nIHNlbGVjdGVkXHJcbiAgICBpZiAoY3VycmVudEZpbHRlclR5cGUgIT09ICdub25lJyAmJiAhc3VwcG9ydGVkRmlsdGVyVHlwZXMuZmluZCgoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gY3VycmVudEZpbHRlclR5cGUpKSB7XHJcbiAgICAgIHNldEN1cnJlbnRGaWx0ZXJUeXBlKHN1cHBvcnRlZEZpbHRlclR5cGVzPy5bMF0/LnZhbHVlKVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RmlsdGVyVHlwZSwgc3VwcG9ydGVkRmlsdGVyVHlwZXNdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gY2xlYXIgdGhlIHJlbGF0aW9uc2hpcCBhbmQgYnVmZmVyIGlmIGZpbHRlciB0eXBlIGlzIG5vdCAnZGF0YSdcclxuICAgIGlmIChjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ21hcCcgfHwgY3VycmVudEZpbHRlclR5cGUgPT09ICdkcmF3JyB8fCBjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ25vbmUnKSB7XHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2UobnVsbClcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoMCwgVW5pdFR5cGUuTWV0ZXJzKVxyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgICAvLyBubyBuZWVkIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIGlmIHRoZSBkYXRhIHNvdXJjZSBoYXMgc2VsZWN0aW9uIHNpbmNlIGl0IHdpbGwgYmUgdXBkYXRlZCBpbiB0aGUgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIG1ldGhvZFxyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgc2VsZWN0ZWRHZW9tZXRyaWVzUmVmLmN1cnJlbnQgPT0gbnVsbCkge1xyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgfSwgW2N1cnJlbnRGaWx0ZXJUeXBlLCBvblJlbGF0aW9uQ2hhbmdlLCBvbkJ1ZmZlckNoYW5nZSwgb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHsgc2V0Q3VycmVudEZpbHRlclR5cGUoZXZ0LnRhcmdldC52YWx1ZSkgfSwgW10pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUdlb21ldHJ5Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGdlb21ldHJ5OiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4ge1xyXG4gICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeSwgZ3JhcGhpYywgbGF5ZXIsIGNsZWFyQWZ0ZXJBcHBseSB9KVxyXG4gIH0sIFtvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChnZW9tZXRyaWVzKSA9PiB7XHJcbiAgICBzZWxlY3RlZEdlb21ldHJpZXNSZWYuY3VycmVudCA9IGdlb21ldHJpZXNcclxuICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IGdlb21ldHJpZXMgfSlcclxuICB9LCBbb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBpZiAoISh1c2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMCB8fCB1c2VSdW50aW1lRGF0YSB8fCBjYW5Vc2VNYXBGaWx0ZXIpKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGNsYXNzTmFtZT0ncHgtNCBwYi00JyBhcmlhLWxhYmVsPXtsYWJlbH0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmb3JtLXRpdGxlIG15LTIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6ICFsYWJlbCAmJiAhZGVzYyB9KX0+XHJcbiAgICAgICAge2xhYmVsICYmIDxkaXYgY2xhc3NOYW1lPSdtci0yIHRpdGxlMic+e2xhYmVsfTwvZGl2Pn1cclxuICAgICAgICB7ZGVzYyAmJiAoXHJcbiAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXtkZXNjfT5cclxuICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeSc+XHJcbiAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpdGxlMyc+e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9PC9kaXY+XHJcbiAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9XHJcbiAgICAgICAgICAgIGNzcz17Y3NzYGhlaWdodDogMzJweDtgfVxyXG4gICAgICAgICAgICB2YWx1ZT17Y3VycmVudEZpbHRlclR5cGV9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZH1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPG9wdGlvbiBrZXk9Jy0nIHZhbHVlPSdub25lJz4tPC9vcHRpb24+XHJcbiAgICAgICAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5tYXAoaXRlbSA9PiA8b3B0aW9uIGtleT17aXRlbS52YWx1ZX0gdmFsdWU9e2l0ZW0udmFsdWV9PntpdGVtLmxhYmVsfTwvb3B0aW9uPil9XHJcbiAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgKFxyXG4gICAgICAgIDxHZW9tZXRyeUZyb21EYXRhU291cmNlXHJcbiAgICAgICAgICBlbmFibGVCdWZmZXI9e2RzRW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RzQnVmZmVyRGlzdGFuY2V9XHJcbiAgICAgICAgICBidWZmZXJVbml0PXtkc0J1ZmZlclVuaXR9XHJcbiAgICAgICAgICBzcGF0aWFsUmVsYXRpb25zPXtzcGF0aWFsUmVsYXRpb25zfVxyXG4gICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3VzZURhdGFTb3VyY2VzfVxyXG4gICAgICAgICAgdXNlUnVudGltZURhdGE9e3VzZVJ1bnRpbWVEYXRhfVxyXG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e2hhbmRsZVNlbGVjdGlvbkNoYW5nZX1cclxuICAgICAgICAgIG9uUmVsYXRpb25DaGFuZ2U9e29uUmVsYXRpb25DaGFuZ2V9XHJcbiAgICAgICAgICBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnbWFwJyAmJiAoXHJcbiAgICAgICAgPEdlb21ldHJ5RnJvbU1hcFxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICAgIHtjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RyYXcnICYmIChcclxuICAgICAgICA8R2VvbWV0cnlGcm9tRHJhd1xyXG4gICAgICAgICAgZW5hYmxlQnVmZmVyPXtkcmF3RW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RyYXdCdWZmZXJEaXN0YW5jZX1cclxuICAgICAgICAgIGJ1ZmZlclVuaXQ9e2RyYXdCdWZmZXJVbml0fVxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e29uQnVmZmVyQ2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIFVzZURhdGFTb3VyY2UsXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBjbGFzc05hbWVzLFxuICBDT05TVEFOVFMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBEYXRhUmVjb3JkU2V0LFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICBEYXRhU291cmNlU3RhdHVzLFxuICBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSxcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxuICBSZWNvcmRTZXRDaGFuZ2VUeXBlLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgTXV0YWJsZVN0b3JlTWFuYWdlcixcbiAgRGF0YUFjdGlvbk1hbmFnZXIsXG4gIERhdGFMZXZlbCxcbiAgdHlwZSBRdWVyaWFibGVEYXRhU291cmNlLFxuICB0eXBlIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zLFxuICBob29rcyxcbiAgbG9kYXNoLFxuICBEYXRhU291cmNlTWFuYWdlcixcbiAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MsIFRhYnMsIFRhYiwgU2VsZWN0IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IEluZm9PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8nXG5pbXBvcnQgeyBUcmFzaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gnXG5pbXBvcnQgeyBQYWdpbmdUeXBlLCB0eXBlIFF1ZXJ5SXRlbVR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5VGFza0Zvcm0gfSBmcm9tICcuL3F1ZXJ5LXRhc2stZm9ybSdcbmltcG9ydCB7IFF1ZXJ5VGFza1Jlc3VsdCB9IGZyb20gJy4vcXVlcnktcmVzdWx0J1xuaW1wb3J0IHsgRGF0YVNvdXJjZVRpcCwgdXNlRGF0YVNvdXJjZUV4aXN0cywgRXJyb3JNZXNzYWdlIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyBRdWVyeVRhc2tMYWJlbCB9IGZyb20gJy4vcXVlcnktdGFzay1sYWJlbCdcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcbmltcG9ydCB7IGdlbmVyYXRlUXVlcnlQYXJhbXMsIGV4ZWN1dGVRdWVyeSwgZXhlY3V0ZUNvdW50UXVlcnkgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkLCByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkLCByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMgfSBmcm9tICcuL3Jlc3VsdHMtbWFuYWdlbWVudC11dGlscydcbmltcG9ydCB7IE1lbnVPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL21lbnUnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IEFycm93TGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0J1xuaW1wb3J0IHsgTG9hZGluZ1Jlc3VsdCB9IGZyb20gJy4vbG9hZGluZy1yZXN1bHQnXG5pbXBvcnQgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMsIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoLCBmaW5kQ2xlYXJSZXN1bHRzQnV0dG9uIH0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIGluZGV4OiBudW1iZXJcbiAgdG90YWw6IG51bWJlclxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgd3JhcHBlZEluUG9wcGVyPzogYm9vbGVhblxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgaXNJblBvcHBlcj86IGJvb2xlYW5cbiAgb25OYXZCYWNrPzogKCkgPT4gdm9pZFxuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG4gIC8vIFByb3BzIGZvciBTZWFyY2ggTGF5ZXIgZHJvcGRvd24gKHdoZW4gbXVsdGlwbGUgcXVlcmllcylcbiAgcXVlcnlJdGVtcz86IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIHNlbGVjdGVkUXVlcnlJbmRleD86IG51bWJlclxuICBvblF1ZXJ5Q2hhbmdlPzogKGluZGV4OiBudW1iZXIpID0+IHZvaWRcbiAgLy8gR3JvdXBpbmcgcHJvcHNcbiAgZ3JvdXBzPzogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9XG4gIHVuZ3JvdXBlZD86IEFycmF5PHsgaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LCBpbmRleDogbnVtYmVyIH0+XG4gIGdyb3VwT3JkZXI/OiBzdHJpbmdbXVxuICBzZWxlY3RlZEdyb3VwSWQ/OiBzdHJpbmcgfCBudWxsXG4gIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4PzogbnVtYmVyXG4gIG9uR3JvdXBDaGFuZ2U/OiAoZ3JvdXBJZDogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZFxuICBvbkdyb3VwUXVlcnlDaGFuZ2U/OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxuICBvblVuZ3JvdXBlZENoYW5nZT86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gIC8vIFJlc3VsdHMgbW9kZSBwcm9wc1xuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGVcbiAgb25SZXN1bHRzTW9kZUNoYW5nZT86IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB2b2lkXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGRpc3BsYXkgbmFtZSBmb3IgcXVlcnkgaW4gZHJvcGRvd25cbi8vIFVzZXM6IHNlYXJjaEFsaWFzIHx8IGppbXVGaWVsZE5hbWUgfHwgaXRlbS5uYW1lIHx8IGZhbGxiYWNrXG5jb25zdCBnZXRRdWVyeURpc3BsYXlOYW1lID0gKGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPik6IHN0cmluZyA9PiB7XG4gIC8vIEZpcnN0IHByaW9yaXR5OiBzZWFyY2hBbGlhcyBpZiBzZXRcbiAgaWYgKGl0ZW0uc2VhcmNoQWxpYXMpIHtcbiAgICByZXR1cm4gaXRlbS5zZWFyY2hBbGlhc1xuICB9XG4gIFxuICAvLyBTZWNvbmQgcHJpb3JpdHk6IGZpZWxkIG5hbWUgZnJvbSBTUUwgZXhwcmVzc2lvblxuICBjb25zdCBqaW11RmllbGROYW1lID0gaXRlbS5zcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy5qaW11RmllbGROYW1lXG4gIGlmIChqaW11RmllbGROYW1lKSB7XG4gICAgcmV0dXJuIGppbXVGaWVsZE5hbWVcbiAgfVxuICBcbiAgLy8gVGhpcmQgcHJpb3JpdHk6IGl0ZW0gbmFtZVxuICBpZiAoaXRlbS5uYW1lKSB7XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG4gIFxuICAvLyBGYWxsYmFja1xuICByZXR1cm4gJ1F1ZXJ5J1xufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgJi53cmFwcGVkIC5xdWVyeS1mb3JtIHtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gIH1cbiAgLnF1ZXJ5LXRhc2tfX2NvbnRlbnQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nLXRvcDogOHB4O1xuICAgICY6aGFzKD4gLnF1ZXJ5LWZvcm1fX2hlYWRlciA+IGRpdjpub3QoLmQtbm9uZSkpLCAmOmhhcyg+IC5xdWVyeS1yZXN1bHQpIHtcbiAgICAgIHBhZGRpbmctdG9wOiAxNnB4O1xuICAgIH1cbiAgfVxuICAucXVlcnktZm9ybV9faGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgICYuaGFzLWNvbnRlbnQge1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICAgIH1cbiAgICAubmF2LWFjdGlvbiB7XG4gICAgICBmbGV4OiAxIDEgMDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgLmppbXUtYnRuIHtcbiAgICAgICAgbWluLXdpZHRoOiAyNnB4O1xuICAgICAgfVxuICAgIH1cbiAgICAucmVzdWx0LW1lbnUge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICB9XG4gIH1cbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFzayAocHJvcHM6IFF1ZXJ5VGFza1Byb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtLCBvbk5hdkJhY2ssIHRvdGFsLCBpc0luUG9wcGVyID0gZmFsc2UsIGRlZmF1bHRQYWdlU2l6ZSA9IENPTlNUQU5UUy5ERUZBVUxUX1FVRVJZX1BBR0VfU0laRSwgd3JhcHBlZEluUG9wcGVyID0gZmFsc2UsIGNsYXNzTmFtZSA9ICcnLCBpbmRleCwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbXMsIHNlbGVjdGVkUXVlcnlJbmRleCwgb25RdWVyeUNoYW5nZSwgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIsIHNlbGVjdGVkR3JvdXBJZCwgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIG9uR3JvdXBDaGFuZ2UsIG9uR3JvdXBRdWVyeUNoYW5nZSwgb25Vbmdyb3VwZWRDaGFuZ2UsIHJlc3VsdHNNb2RlLCBvblJlc3VsdHNNb2RlQ2hhbmdlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCAuLi5vdGhlclByb3BzIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBbc3RhZ2UsIHNldFN0YWdlXSA9IFJlYWN0LnVzZVN0YXRlKDApIC8vIDAgPSBmb3JtLCAxID0gcmVzdWx0cywgMiA9IGxvYWRpbmdcbiAgY29uc3QgW2FjdGl2ZVRhYiwgc2V0QWN0aXZlVGFiXSA9IFJlYWN0LnVzZVN0YXRlPCdxdWVyeScgfCAncmVzdWx0cyc+KCdxdWVyeScpXG4gIGNvbnN0IFtlbmFibGVkLCBzZXRFbmFibGVkXSA9IFJlYWN0LnVzZVN0YXRlKHRydWUpXG4gIGNvbnN0IFtyZXN1bHRDb3VudCwgc2V0UmVzdWx0Q291bnRdID0gUmVhY3QudXNlU3RhdGUoMClcbiAgLy8gVHJhY2sgaWYgd2UndmUgYWxyZWFkeSBzZWxlY3RlZCByZWNvcmRzIGZvciB0aGUgY3VycmVudCBxdWVyeSByZXN1bHRzXG4gIGNvbnN0IGhhc1NlbGVjdGVkUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgcXVlcnkgZXhlY3V0aW9uIGNvdW50IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCByZW1vdW50IG9uIG5ldyBxdWVyaWVzXG4gIGNvbnN0IHF1ZXJ5RXhlY3V0aW9uS2V5UmVmID0gUmVhY3QudXNlUmVmKDApXG4gIGNvbnN0IHF1ZXJ5UGFyYW1SZWYgPSBSZWFjdC51c2VSZWY8UXVlcnlQYXJhbXM+KG51bGwpXG4gIGNvbnN0IHJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWY8RGF0YVJlY29yZFtdPihudWxsKVxuICBjb25zdCBbb3V0cHV0RFMsIHNldE91dHB1dERTXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG4gIGNvbnN0IFtkYXRhU291cmNlLCBzZXREYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG4gIGNvbnN0IFtzcGF0aWFsRmlsdGVyRW5hYmxlZCwgc2V0U3BhdGlhbEZpbHRlckVuYWJsZWRdID0gUmVhY3QudXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiA9IFJlYWN0LnVzZVJlZjxJTVNxbEV4cHJlc3Npb24+KHF1ZXJ5SXRlbS5zcWxFeHByT2JqKVxuICBjb25zdCBzcGF0aWFsRmlsdGVyT2JqID0gUmVhY3QudXNlUmVmKG51bGwpXG4gIGNvbnN0IGJhY2tCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3QgY2xlYXJSZXN1bHRCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3QgW2RhdGFBY3Rpb25GaWx0ZXIsIHNldERhdGFBY3Rpb25GaWx0ZXJdID0gUmVhY3QudXNlU3RhdGUobnVsbClcbiAgY29uc3QgcHJldmlvdXNDb25maWdJZFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmc+KHF1ZXJ5SXRlbS5jb25maWdJZClcbiAgLy8gVHJhY2sgbWFudWFsIHRhYiBzd2l0Y2hlcyB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gIGNvbnN0IG1hbnVhbFRhYlN3aXRjaFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgd2hlbiBhIHF1ZXJ5IHdhcyBqdXN0IGV4ZWN1dGVkIC0gb25seSBhdXRvLXN3aXRjaCBhZnRlciBxdWVyeSBleGVjdXRpb24gY29tcGxldGVzXG4gIGNvbnN0IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBTdG9yZSB0aGUgbGFzdCBydW50aW1lIHpvb20gb3ZlcnJpZGUgdmFsdWUgZnJvbSB0aGUgZm9ybSBmb3IgdXNlIGJ5IEFkZCB0byBNYXAgYWN0aW9uXG4gIGNvbnN0IGxhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbiB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKVxuICAvLyBFcnJvciBzdGF0ZXMgZm9yIHVzZXItZmFjaW5nIGVycm9yc1xuICBjb25zdCBbc2VsZWN0aW9uRXJyb3IsIHNldFNlbGVjdGlvbkVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcbiAgY29uc3QgW3pvb21FcnJvciwgc2V0Wm9vbUVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcblxuICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICBjb25zdCB7IGljb24sIG5hbWUsIGRpc3BsYXlMYWJlbCB9ID0gY3VycmVudEl0ZW1cbiAgY29uc3QgZHNFeGlzdHM6IGJvb2xlYW4gPSB1c2VEYXRhU291cmNlRXhpc3RzKHsgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLCB1c2VEYXRhU291cmNlSWQ6IGN1cnJlbnRJdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCB9KVxuXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIHRhYiBjb250ZW50IHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnktdGFiLWNvbnRlbnQtcmVuZGVyJyxcbiAgICAgIGFjdGl2ZVRhYixcbiAgICAgIGVuYWJsZWQsXG4gICAgICBkc0V4aXN0cyxcbiAgICAgIGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICBub3RlOiAnUXVlcnkgdGFiIGNvbnRlbnQgc3RhdGUgY2hlY2snXG4gICAgfSlcbiAgfSwgW2FjdGl2ZVRhYiwgZW5hYmxlZCwgZHNFeGlzdHMsIGRhdGFTb3VyY2UsIHF1ZXJ5SXRlbS5jb25maWdJZF0pXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgVGFiIGNoaWxkcmVuIHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhY3RpdmVUYWIgPT09ICdxdWVyeScpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeS10YWItY2hpbGRyZW4tcmVuZGVyJyxcbiAgICAgICAgYWN0aXZlVGFiLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBub3RlOiAnUXVlcnkgVGFiIGNoaWxkcmVuIHNob3VsZCBiZSByZW5kZXJpbmcnXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2FjdGl2ZVRhYiwgcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICAvLyBmb2N1cyB0aGUgYmFjayBidXR0b24gd2hlbiBpdCBpcyByZW5kZXJlZFxuICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgfSlcblxuICAvLyBHZXQgdGhlIHBhZ2luYXRpb24gc3R5bGUgZnJvbSB3aWRnZXQgY29uZmlnIChNdWx0aVBhZ2Ugb3IgTGF6eUxvYWQvU2luZ2xlLXBhZ2UpXG4gIGNvbnN0IHBhZ2luZ1R5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3Byb3BzLndpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRQYWdpbmdTdHlsZVxuICB9KVxuXG4gIC8vIEdldCB0aGUgaW5pdGlhbCBwYWdlIHNpemUgZm9yIHNpbmdsZS1wYWdlIChMYXp5TG9hZCkgcmVzdWx0c1xuICAvLyBUaGlzIGFsbG93cyB1c2VycyB0byBjb25maWd1cmUgaG93IG1hbnkgcmVjb3JkcyBhcmUgbG9hZGVkIGluaXRpYWxseSB3aGVuIHVzaW5nIHNpbmdsZS1wYWdlIG1vZGVcbiAgLy8gRGVmYXVsdHMgdG8gMTAwIGlmIG5vdCBjb25maWd1cmVkXG4gIGNvbnN0IGxhenlMb2FkSW5pdGlhbFBhZ2VTaXplID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbcHJvcHMud2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLmxhenlMb2FkSW5pdGlhbFBhZ2VTaXplXG4gIH0pXG5cblxuICAvLyBXYXRjaCBmb3Igd2hlbiByZXN1bHRzIGFyZSByZWFkeSBhbmQgc3dpdGNoIHRvIFJlc3VsdHMgdGFiXG4gIC8vIE9OTFkgYXV0by1zd2l0Y2ggd2hlbiBhIHF1ZXJ5IHdhcyBqdXN0IGV4ZWN1dGVkIGFuZCByZXN1bHRzIGFyZSBsb2FkZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBEb24ndCBhdXRvLXN3aXRjaCBpZiB1c2VyIG1hbnVhbGx5IHN3aXRjaGVkIHRhYnNcbiAgICBpZiAobWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC1za2lwcGVkJyxcbiAgICAgICAgcmVhc29uOiAnbWFudWFsLXRhYi1zd2l0Y2gtZmxhZy1zZXQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGFjdGl2ZVRhYixcbiAgICAgICAgcmVzdWx0Q291bnQsXG4gICAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmOiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gRk9SQ0VEOiBBbHdheXMgdXNlIFNpbXBsZUxpc3QgLSB3ZSdyZSBkb25lIHdpdGggbGF6eSBsb2FkaW5nIGlzc3Vlc1xuICAgIC8vIFJlY29yZHMgYXJlIGF2YWlsYWJsZSBpbW1lZGlhdGVseSwgc28gd2UgY2FuIHN3aXRjaCBhcyBzb29uIGFzIHJlc3VsdENvdW50ID4gMFxuICAgIGNvbnN0IGlzU2ltcGxlTGlzdCA9IHRydWVcbiAgICBcbiAgICAvLyBPTkxZIGF1dG8tc3dpdGNoIHdoZW46XG4gICAgLy8gMS4gQSBxdWVyeSB3YXMganVzdCBleGVjdXRlZCAocXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9PT0gdHJ1ZSlcbiAgICAvLyAyLiBXZSBoYXZlIHJlc3VsdHMgKHJlc3VsdENvdW50ID4gMClcbiAgICAvLyAzLiBSZWNvcmRzIGFyZSBhY3R1YWxseSBsb2FkZWQ6XG4gICAgLy8gICAgLSBGb3IgU2ltcGxlTGlzdDogcmVzdWx0Q291bnQgPiAwIGlzIHN1ZmZpY2llbnQgKHJlY29yZHMgYXZhaWxhYmxlIGltbWVkaWF0ZWx5KVxuICAgIC8vICAgIC0gRm9yIExhenlMb2FkOiByZWNvcmRzUmVmLmN1cnJlbnQgbXVzdCBoYXZlIGRhdGEgKHdhaXQgZm9yIGxhenkgbG9hZGluZylcbiAgICAvLyA0LiBXZSdyZSBjdXJyZW50bHkgb24gdGhlIHF1ZXJ5IHRhYiAoZG9uJ3Qgc3dpdGNoIGlmIGFscmVhZHkgb24gcmVzdWx0cylcbiAgICBjb25zdCBoYXNSZWNvcmRzID0gaXNTaW1wbGVMaXN0IFxuICAgICAgPyByZXN1bHRDb3VudCA+IDAgXG4gICAgICA6IChyZWNvcmRzUmVmLmN1cnJlbnQgJiYgcmVjb3Jkc1JlZi5jdXJyZW50Lmxlbmd0aCA+IDApXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC1jaGVjaycsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgYWN0aXZlVGFiLFxuICAgICAgcmVzdWx0Q291bnQsXG4gICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZjogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCxcbiAgICAgIGlzU2ltcGxlTGlzdCxcbiAgICAgIHBhZ2luZ1R5cGVJbkNvbmZpZyxcbiAgICAgIGhhc1JlY29yZHMsXG4gICAgICByZWNvcmRzUmVmTGVuZ3RoOiByZWNvcmRzUmVmLmN1cnJlbnQ/Lmxlbmd0aCB8fCAwLFxuICAgICAgbWFudWFsVGFiU3dpdGNoUmVmOiBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCxcbiAgICAgIHdpbGxBdXRvU3dpdGNoOiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ICYmIHJlc3VsdENvdW50ID4gMCAmJiBoYXNSZWNvcmRzICYmIGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5JyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgaWYgKHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgJiYgXG4gICAgICAgIHJlc3VsdENvdW50ID4gMCAmJiBcbiAgICAgICAgaGFzUmVjb3JkcyAmJiBcbiAgICAgICAgYWN0aXZlVGFiID09PSAncXVlcnknKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnYXV0by1zd2l0Y2gtdHJpZ2dlcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBmcm9tVGFiOiBhY3RpdmVUYWIsXG4gICAgICAgIHRvVGFiOiAncmVzdWx0cycsXG4gICAgICAgIHJlc3VsdENvdW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBzZXRBY3RpdmVUYWIoJ3Jlc3VsdHMnKVxuICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IGFmdGVyIHN3aXRjaGluZ1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2F1dG8tc3dpdGNoLWNvbXBsZXRlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWZSZXNldDogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3Jlc3VsdENvdW50LCBhY3RpdmVUYWIsIHBhZ2luZ1R5cGVJbkNvbmZpZ10pXG5cbiAgLy8gVmVyaWZ5IGRyb3Bkb3ducyBhcmUgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXIgd2hlbiBwcmVzZW50XG4gIC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGdyb3VwZWQgcXVlcmllcyB3aGVyZSBkcm9wZG93bnMgbmVlZCB0byBiZSBzeW5jaHJvbml6ZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IHZlcmlmeSBpZiB3ZSBoYXZlIGEgaGFzaCBwYXJhbWV0ZXJcbiAgICBpZiAoIWluaXRpYWxJbnB1dFZhbHVlIHx8ICFxdWVyeUl0ZW0uc2hvcnRJZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgY3VycmVudCBxdWVyeUl0ZW0gbWF0Y2hlcyB3aGF0IHdlIGV4cGVjdCBmcm9tIGhhc2ggcGFyYW1ldGVyXG4gICAgY29uc3QgZXhwZWN0ZWRTaG9ydElkID0gcXVlcnlJdGVtLnNob3J0SWRcbiAgICBjb25zdCBpc0dyb3VwZWRRdWVyeSA9IHF1ZXJ5SXRlbS5ncm91cElkICE9PSBudWxsICYmIHF1ZXJ5SXRlbS5ncm91cElkICE9PSB1bmRlZmluZWRcbiAgICBcbiAgICAvLyBDaGVjayBpZiBkcm9wZG93bnMgYXJlIGNvcnJlY3RseSBzZXQgZm9yIGdyb3VwZWQgcXVlcmllc1xuICAgIGlmIChpc0dyb3VwZWRRdWVyeSkge1xuICAgICAgY29uc3QgZXhwZWN0ZWRHcm91cElkID0gcXVlcnlJdGVtLmdyb3VwSWRcbiAgICAgIGNvbnN0IGFjdHVhbEdyb3VwSWQgPSBzZWxlY3RlZEdyb3VwSWRcbiAgICAgIGNvbnN0IGV4cGVjdGVkUXVlcnlJbmRleCA9IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4XG4gICAgICBcbiAgICAgIGlmIChleHBlY3RlZEdyb3VwSWQgIT09IGFjdHVhbEdyb3VwSWQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ2Ryb3Bkb3duLWdyb3VwLW1pc21hdGNoJyxcbiAgICAgICAgICBleHBlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgYWN0dWFsR3JvdXBJZCxcbiAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgICAgd2FybmluZzogJ0ZpcnN0IGRyb3Bkb3duIG1heSBub3QgYmUgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKGV4cGVjdGVkUXVlcnlJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIFZlcmlmeSB0aGUgcXVlcnkgaW5kZXggd2l0aGluIHRoZSBncm91cCBtYXRjaGVzXG4gICAgICAgIGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cHM/LltleHBlY3RlZEdyb3VwSWRdPy5pdGVtc1xuICAgICAgICBpZiAoZ3JvdXBJdGVtcyAmJiBncm91cEl0ZW1zLmxlbmd0aCA+IGV4cGVjdGVkUXVlcnlJbmRleCkge1xuICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUXVlcnlDb25maWdJZCA9IGdyb3VwSXRlbXNbZXhwZWN0ZWRRdWVyeUluZGV4XT8uY29uZmlnSWRcbiAgICAgICAgICBjb25zdCBhY3R1YWxRdWVyeUNvbmZpZ0lkID0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgaWYgKGV4cGVjdGVkUXVlcnlDb25maWdJZCAhPT0gYWN0dWFsUXVlcnlDb25maWdJZCkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdkcm9wZG93bi1xdWVyeS1pbmRleC1taXNtYXRjaCcsXG4gICAgICAgICAgICAgIGV4cGVjdGVkUXVlcnlDb25maWdJZCxcbiAgICAgICAgICAgICAgYWN0dWFsUXVlcnlDb25maWdJZCxcbiAgICAgICAgICAgICAgZXhwZWN0ZWRRdWVyeUluZGV4LFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgICAgICAgIHdhcm5pbmc6ICdTZWNvbmQgZHJvcGRvd24gbWF5IG5vdCBiZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnZHJvcGRvd25zLXN5bmNocm9uaXplZCcsXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICAgICAgZ3JvdXBJZDogZXhwZWN0ZWRHcm91cElkLFxuICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleDogZXhwZWN0ZWRRdWVyeUluZGV4LFxuICAgICAgICAgICAgICBub3RlOiAnRHJvcGRvd25zIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5IC0gdmVyaWZ5IGl0J3Mgc2VsZWN0ZWRcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnZHJvcGRvd25zLXN5bmNocm9uaXplZC11bmdyb3VwZWQnLFxuICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgIG5vdGU6ICdVbmdyb3VwZWQgcXVlcnkgZHJvcGRvd24gc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2luaXRpYWxJbnB1dFZhbHVlLCBxdWVyeUl0ZW0uc2hvcnRJZCwgcXVlcnlJdGVtLmdyb3VwSWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgc2VsZWN0ZWRHcm91cElkLCBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCwgZ3JvdXBzXSlcblxuICBjb25zdCB1c2VPdXRwdXREczogSW1tdXRhYmxlT2JqZWN0PFVzZURhdGFTb3VyY2U+ID0gUmVhY3QudXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgSW1tdXRhYmxlKHtcbiAgICAgICAgZGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkLFxuICAgICAgICBtYWluRGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgICB9KSxcbiAgICBbcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZF1cbiAgKVxuXG4gIGNvbnN0IHVwZGF0ZURhdGFTb3VyY2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZHM/OiBEYXRhU291cmNlKSA9PiB7XG4gICAgY29uc3QgY3VycmVudERzID0gZHMgPz8gZGF0YVNvdXJjZVxuICAgIC8vIHNob3VsZCBkaXNhYmxlIHNwYXRpYWwgZmlsdGVyIGlmIHRoZSBkYXRhU291cmNlIGlzIGFuIG91dHB1dCBkcyBhbmQgaXQgYWxyZWFkeSBoYXMgc3BhdGlhbCBmaWx0ZXJcbiAgICBpZiAoY3VycmVudERzPy5nZXREYXRhU291cmNlSnNvbigpPy5pc091dHB1dEZyb21XaWRnZXQpIHtcbiAgICAgIGNvbnN0IHFEczogUXVlcmlhYmxlRGF0YVNvdXJjZSA9IGN1cnJlbnREcyBhcyBRdWVyaWFibGVEYXRhU291cmNlXG4gICAgICBjb25zdCBxUGFyYW1zID0gcURzLmdldEN1cnJlbnRRdWVyeVBhcmFtcz8uKCkgYXMgRmVhdHVyZUxheWVyUXVlcnlQYXJhbXNcbiAgICAgIGlmIChxUGFyYW1zLmdlb21ldHJ5ICE9IG51bGwpIHtcbiAgICAgICAgc2V0U3BhdGlhbEZpbHRlckVuYWJsZWQoZmFsc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZCh0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2RhdGFTb3VyY2VdKVxuXG4gIGNvbnN0IGhhbmRsZVN0YXR1c0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlbmFibGVkOiBib29sZWFuKSA9PiB7XG4gICAgc2V0RW5hYmxlZChlbmFibGVkKVxuICAgIHVwZGF0ZURhdGFTb3VyY2UoKVxuICB9LCBbdXBkYXRlRGF0YVNvdXJjZV0pXG5cbiAgY29uc3QgaGFuZGxlT3V0cHV0RGF0YVNvdXJjZUluZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5mbywgcHJlSW5mbykgPT4ge1xuICAgIGNvbnN0IG91dHB1dElkID0gcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZFxuICAgIGNvbnN0IGZpbHRlciA9IGluZm8/LndpZGdldFF1ZXJpZXMgPyBpbmZvLndpZGdldFF1ZXJpZXNbYHNldEZpbHRlci0ke291dHB1dElkfWBdIDogbnVsbFxuICAgIGlmIChmaWx0ZXIgPT0gbnVsbCkgeyAvLyBmaWx0ZXIgaXMgbnVsbCBtZWFucyB0aGVyZSBhcmUgaW5jb21wbGV0ZSBxdWVyaWVzLCBpZ25vcmUgdGhpcyBjaGFuZ2VcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBwcmVGaWx0ZXIgPSBwcmVJbmZvPy53aWRnZXRRdWVyaWVzID8gcHJlSW5mby53aWRnZXRRdWVyaWVzW2BzZXRGaWx0ZXItJHtvdXRwdXRJZH1gXSA6IG51bGxcbiAgICBpZiAoZmlsdGVyPy53aGVyZSAhPT0gcHJlRmlsdGVyPy53aGVyZSkge1xuICAgICAgc2V0RGF0YUFjdGlvbkZpbHRlcihmaWx0ZXIpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZF0pXG5cbiAgY29uc3QgcHVibGlzaERhdGFDbGVhcmVkTXNnID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghb3V0cHV0RFMpIHJldHVyblxuICAgIGNvbnN0IGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlID0gbmV3IERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKHByb3BzLndpZGdldElkLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLlJlbW92ZSwgW291dHB1dERTLmlkXSlcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKVxuICAgIGF3YWl0IE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UobmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZShwcm9wcy53aWRnZXRJZCwgW10sIFtvdXRwdXREUy5pZF0pKVxuICB9LCBbcHJvcHMud2lkZ2V0SWQsIG91dHB1dERTXSlcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBxdWVyeSByZXN1bHRzIGZyb20gdGhlIFVJIGFuZCBtYXAuXG4gICAqIFRoaXMgaXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIGNsZWFyaW5nIHJlc3VsdHMuXG4gICAqIEl0IGNsZWFycyB0aGUgcmVjb3JkcywgcmVzZXRzIHRoZSByZXN1bHQgY291bnQsIGNsZWFycyBzZWxlY3Rpb24gZnJvbSB0aGUgbWFwLFxuICAgKiBwdWJsaXNoZXMgYSBjbGVhcmVkIG1lc3NhZ2UgdG8gdGhlIG1hcCwgc3dpdGNoZXMgYmFjayB0byB0aGUgUXVlcnkgdGFiLFxuICAgKiBhbmQgaW5jcmVtZW50cyB0aGUgcXVlcnkgZXhlY3V0aW9uIGtleSB0byBmb3JjZSBRdWVyeVRhc2tSZXN1bHQgdG8gcmVtb3VudCB3aXRoIGZyZXNoIHN0YXRlLlxuICAgKi9cbiAgY29uc3QgY2xlYXJSZXN1bHQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmVjb3Jkc1JlZi5jdXJyZW50ID0gbnVsbFxuICAgIG91dHB1dERTPy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgICBzZXRSZXN1bHRDb3VudCgwKVxuICAgIFxuICAgIC8vIENsZWFyIHNlbGVjdGlvbiBkaXJlY3RseSBmcm9tIGRhdGEgc291cmNlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMob3V0cHV0RFMpXG4gICAgXG4gICAgLy8gQ2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHMgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShbXSlcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2FjY3VtdWxhdGVkLXJlY29yZHMtY2xlYXJlZC1vbi1jbGVhci1yZXN1bHRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBwdWJsaXNoRGF0YUNsZWFyZWRNc2coKVxuICAgIC8vIFN3aXRjaCBiYWNrIHRvIFF1ZXJ5IHRhYiB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICBzZXRTdGFnZSgwKVxuICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgc2VsZWN0aW9uIGZsYWcgd2hlbiBjbGVhcmluZ1xuICAgIC8vIEluY3JlbWVudCBxdWVyeSBleGVjdXRpb24ga2V5IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCByZW1vdW50IHdpdGggZnJlc2ggc3RhdGVcbiAgICBxdWVyeUV4ZWN1dGlvbktleVJlZi5jdXJyZW50ICs9IDFcbiAgICAvLyBDbGVhciBlcnJvciBzdGF0ZXMgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbClcbiAgICBzZXRab29tRXJyb3IobnVsbClcbiAgfSwgW291dHB1dERTLCBwdWJsaXNoRGF0YUNsZWFyZWRNc2csIHByb3BzLndpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlXSlcblxuICAvKipcbiAgICogSGFuZGxlcyBkYXRhIHNvdXJjZSBjcmVhdGlvbiB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJ5IGl0ZW1zLlxuICAgKiBXaGVuIGEgbmV3IHF1ZXJ5IGl0ZW0gaXMgc2VsZWN0ZWQgKGUuZy4sIHN3aXRjaGluZyBmcm9tIFBhcmNlbCB0byBNYWpvciksXG4gICAqIHRoaXMgY2xlYXJzIG9sZCByZXN1bHRzIGJ5IHByb2dyYW1tYXRpY2FsbHkgY2xpY2tpbmcgdGhlIHRyYXNoIGNhbiBidXR0b25cbiAgICogdG8gZW5zdXJlIGFsbCBjbGVhbnVwIGxvZ2ljIHJ1bnMgcHJvcGVybHkuXG4gICAqIFxuICAgKiBAcGFyYW0gZHMgLSBUaGUgbmV3bHkgY3JlYXRlZCBkYXRhIHNvdXJjZSBmb3IgdGhlIHNlbGVjdGVkIHF1ZXJ5IGl0ZW1cbiAgICovXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKGRzOiBEYXRhU291cmNlKSA9PiB7XG4gICAgLy8gSW4gXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCBwcmVzZXJ2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFuZCBzZWxlY3Rpb24gLSBkb24ndCBjbGVhclxuICAgIGlmICgocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikgXG4gICAgICAgICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncHJlc2VydmluZy1zZWxlY3Rpb24tb24tcXVlcnktc3dpdGNoLWhhbmRsZURhdGFTb3VyY2VDcmVhdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHNldERhdGFTb3VyY2UoZHMpXG4gICAgICB1cGRhdGVEYXRhU291cmNlKGRzKVxuICAgICAgc2V0U3RhZ2UoMClcbiAgICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgICAgcmV0dXJuIC8vIFNraXAgY2xlYXJpbmcgLSBwcmVzZXJ2ZSBzZWxlY3Rpb25cbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgb2xkIHJlc3VsdHMgYXMgYmVmb3JlXG4gICAgbGV0IGNsZWFyQnV0dG9uID0gY2xlYXJSZXN1bHRCdG5SZWYuY3VycmVudFxuICAgIGlmICghY2xlYXJCdXR0b24pIHtcbiAgICAgIGNsZWFyQnV0dG9uID0gZmluZENsZWFyUmVzdWx0c0J1dHRvbigpXG4gICAgfVxuICAgIFxuICAgIGlmIChjbGVhckJ1dHRvbiAmJiByZXN1bHRDb3VudCA+IDApIHtcbiAgICAgIGNsZWFyQnV0dG9uLmNsaWNrKClcbiAgICB9IGVsc2Uge1xuICAgICAgY2xlYXJSZXN1bHQoKVxuICAgIH1cbiAgICBzZXREYXRhU291cmNlKGRzKVxuICAgIHVwZGF0ZURhdGFTb3VyY2UoZHMpXG4gICAgc2V0U3RhZ2UoMClcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JykgLy8gUmV0dXJuIHRvIFF1ZXJ5IHRhYiB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gIH0sIFt1cGRhdGVEYXRhU291cmNlLCBjbGVhclJlc3VsdCwgcmVzdWx0Q291bnQsIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIHByb3BzLndpZGdldElkXSlcblxuICBjb25zdCBoYW5kbGVPdXRwdXREYXRhU291cmNlQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChkczogRGF0YVNvdXJjZSkgPT4ge1xuICAgIHNldE91dHB1dERTKGRzKVxuICAgIFxuICAgIC8vIElmIGluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUgYW5kIHdlIGhhdmUgYWNjdW11bGF0ZWQgcmVjb3JkcywgcmUtc2VsZWN0IHRoZW1cbiAgICAvLyBUaGlzIHVzZXMgdGhlIHNhbWUgbG9naWMgYXMgYWZ0ZXIgcXVlcnkgY29tcGxldGlvbiAtIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoXG4gICAgLy8gVGhpcyBlbnN1cmVzIHJlY29yZHMgYXJlIHNlbGVjdGVkIGJvdGggb24gdGhlIG1hcCBhbmQgaW4gdGhlIFJlc3VsdHMgdGFiXG4gICAgaWYgKChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSBcbiAgICAgICAgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBVc2UgYSBzbWFsbCBkZWxheSB0byBlbnN1cmUgdGhlIERTIGlzIGZ1bGx5IHJlYWR5XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgZmVhdHVyZURTID0gZHMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICBpZiAoZmVhdHVyZURTICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkcyA9IGFjY3VtdWxhdGVkUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBVc2UgdGhlIHNhbWUgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggdGhhdCdzIHVzZWQgYWZ0ZXIgcXVlcnkgY29tcGxldGlvblxuICAgICAgICAgICAgLy8gVGhpcyB3aWxsIHNlbGVjdCByZWNvcmRzIG9uIHRoZSBtYXAgYW5kIHRyaWdnZXIgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2VcbiAgICAgICAgICAgIC8vIGluIHF1ZXJ5LXJlc3VsdC50c3ggdG8gdXBkYXRlIHNlbGVjdGVkUmVjb3JkcyBzdGF0ZSBmb3IgdGhlIFJlc3VsdHMgdGFiXG4gICAgICAgICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChcbiAgICAgICAgICAgICAgcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGZlYXR1cmVEUyxcbiAgICAgICAgICAgICAgcmVjb3JkSWRzLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHJlY29yZHNSZWYgc28gcmVzdWx0cyB0YWIgc2hvd3MgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgcmVjb3Jkc1JlZi5jdXJyZW50ID0gYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgICBzZXRSZXN1bHRDb3VudChhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZS1zZWxlY3RlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLWFmdGVyLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgb3V0cHV0RFNJZDogZmVhdHVyZURTLmlkLFxuICAgICAgICAgICAgICByZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFZlcmlmeSB3aGF0J3MgYWN0dWFsbHkgc2VsZWN0ZWQgaW4gdGhlIERTIGFmdGVyIGEgZGVsYXlcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShmZWF0dXJlRFMuaWQpXG4gICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5EUyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZElkc0luRFMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSA/PyBbXVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICd2ZXJpZnktcmVjb3Jkcy1hZnRlci1yZXNlbGVjdGlvbicsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIG91dHB1dERTSWQ6IGZlYXR1cmVEUy5pZCxcbiAgICAgICAgICAgICAgICBleHBlY3RlZENvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGFjdHVhbFNlbGVjdGVkSW5EUzogc2VsZWN0ZWRJbkRTPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZElkc0luRFM6IHNlbGVjdGVkSWRzSW5EUy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcmVjb3Jkc01hdGNoOiBzZWxlY3RlZEluRFM/Lmxlbmd0aCA9PT0gYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSwgMjAwKVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZS1zZWxlY3Rpb24tZmFpbGVkLWFmdGVyLXN3aXRjaCcsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCAxMDApXG4gICAgfVxuICB9LCBbcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcHJvcHMud2lkZ2V0SWRdKVxuXG4gIC8vIENsZWFyIHJlc3VsdHMgd2hlbiBxdWVyeSBpdGVtIGNoYW5nZXMgKGUuZy4sIHdoZW4gbmV3IGhhc2ggcGFyYW1ldGVyIHRyaWdnZXJzIGRpZmZlcmVudCBxdWVyeSlcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IGNsZWFyIGlmIHdlJ3JlIGFjdHVhbGx5IHN3aXRjaGluZyB0byBhIGRpZmZlcmVudCBxdWVyeSAobm90IGp1c3QgcmUtcmVuZGVyaW5nKVxuICAgIGNvbnN0IGlzU3dpdGNoaW5nUXVlcmllcyA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCAhPT0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgXG4gICAgLy8gT25seSBjbGVhciByZXN1bHRzIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXMgaWYgd2UncmUgaW4gXCJOZXdcIiBtb2RlXG4gICAgLy8gSW4gXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB3ZSB3YW50IHRvIHByZXNlcnZlIGFjY3VtdWxhdGVkIHJlY29yZHMgYWNyb3NzIHF1ZXJ5IHN3aXRjaGVzXG4gICAgaWYgKGlzU3dpdGNoaW5nUXVlcmllcyAmJiByZXN1bHRDb3VudCA+IDAgJiYgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAvLyBTdG9yZSB0aGUgb2xkIGNvbmZpZ0lkIGJlZm9yZSB1cGRhdGluZ1xuICAgICAgY29uc3Qgb2xkQ29uZmlnSWQgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnRcbiAgICAgIC8vIFVwZGF0ZSB0aGUgcmVmIHRvIHRyYWNrIHRoZSBuZXcgcXVlcnlcbiAgICAgIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhcmluZy1yZXN1bHRzLW9uLXF1ZXJ5LXN3aXRjaC1uZXctbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHJlc3VsdHNNb2RlXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBDbGVhciBpbW1lZGlhdGVseSB3aGVuIHN3aXRjaGluZyBxdWVyaWVzLCBidXQgd3JhcCBpbiB0cnktY2F0Y2ggdG8gaGFuZGxlXG4gICAgICAvLyByYWNlIGNvbmRpdGlvbnMgd2l0aCBmZWF0dXJlIGluZm8gd2luZG93cyB0aGF0IG1pZ2h0IGJlIHJlbmRlcmluZ1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2xlYXJSZXN1bHQoKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gTG9nIGZvciBkZWJ1Z2dpbmcgYnV0IGRvbid0IHNob3cgdG8gdXNlciAoZnJhbWV3b3JrIHJhY2UgY29uZGl0aW9uKVxuICAgICAgICAvLyBUaGUgZXJyb3IgaXMgaW4gZnJhbWV3b3JrIGNvZGUgKGZlYXR1cmUtaW5mby50c3gpLCBub3Qgb3VyIGNvZGVcbiAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIGZlYXR1cmUtaW5mby50c3ggaXMgdHJ5aW5nIHRvIGFwcGVuZENoaWxkIHRvIGEgRE9NIGVsZW1lbnRcbiAgICAgICAgLy8gdGhhdCBnZXRzIHJlbW92ZWQgd2hlbiB3ZSBjbGVhciBzZWxlY3Rpb25cbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAnY2xlYXItcmVzdWx0LXJhY2UtY29uZGl0aW9uJyxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIG5vdGU6ICdMaWtlbHkgcmFjZSBjb25kaXRpb24gd2l0aCBmZWF0dXJlLWluZm8udHN4J1xuICAgICAgICB9KVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGNsZWFyaW5nIHJlc3VsdHMgKGxpa2VseSByYWNlIGNvbmRpdGlvbiB3aXRoIGZlYXR1cmUgaW5mbyk6JywgZXJyb3IpXG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9uJ3Qgc2V0IGVycm9yIHN0YXRlIC0gdGhpcyBpcyBleHBlY3RlZCBpbiBzb21lIHNjZW5hcmlvc1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNTd2l0Y2hpbmdRdWVyaWVzKSB7XG4gICAgICAvLyBKdXN0IHVwZGF0ZSB0aGUgcmVmIC0gZG9uJ3QgY2xlYXIgcmVzdWx0cyBpZiBpbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlIG9yIG5vIHJlc3VsdHNcbiAgICAgIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgXG4gICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3ByZXNlcnZpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1vbi1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICBvbGRDb25maWdJZDogcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50LFxuICAgICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0uY29uZmlnSWQsIGNsZWFyUmVzdWx0LCByZXN1bHRDb3VudCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcHJvcHMud2lkZ2V0SWRdKVxuXG4gIGNvbnN0IG5hdlRvRm9ybSA9IFJlYWN0LnVzZUNhbGxiYWNrKChjbGVhclJlc3VsdHMgPSBmYWxzZSkgPT4ge1xuICAgIGlmIChjbGVhclJlc3VsdHMpIHtcbiAgICAgIC8vIFVzZSB0aGUgY2VudHJhbGl6ZWQgY2xlYXJSZXN1bHQgbWV0aG9kIGluc3RlYWQgb2YgZHVwbGljYXRpbmcgbG9naWNcbiAgICAgIGNsZWFyUmVzdWx0KClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICAvLyBTd2l0Y2ggdG8gcXVlcnkgdGFiIGJ1dCBkb24ndCBjbGVhciByZXN1bHRzIHVubGVzcyBleHBsaWNpdGx5IHJlcXVlc3RlZFxuICAgIC8vIE1hcmsgYXMgbWFudWFsIHN3aXRjaCB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgLy8gUmVzZXQgdGhlIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIH0sIDEwMClcbiAgICAvLyBPbmx5IGNoYW5nZSBzdGFnZSBpZiB3ZSdyZSBjbGVhcmluZyByZXN1bHRzXG4gICAgLy8gT3RoZXJ3aXNlLCBrZWVwIHN0YWdlIGF0IDEgKHJlc3VsdHMgYXZhaWxhYmxlKSBzbyByZXN1bHRzIHBlcnNpc3RcbiAgICBpZiAoIWNsZWFyUmVzdWx0cyAmJiByZXN1bHRDb3VudCA+IDApIHtcbiAgICAgIHNldFN0YWdlKDEpIC8vIEtlZXAgcmVzdWx0cyBhdmFpbGFibGVcbiAgICB9XG4gICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcbiAgICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgICB9KVxuICB9LCBbY2xlYXJSZXN1bHQsIHJlc3VsdENvdW50XSlcblxuICAvKipcbiAgICogSGFuZGxlcyB0YWIgc3dpdGNoaW5nIGJldHdlZW4gUXVlcnkgYW5kIFJlc3VsdHMgdGFicy5cbiAgICogVGFiIHN3aXRjaGluZyBwcmVzZXJ2ZXMgcmVzdWx0cyBzdGF0ZSAtIHJlc3VsdHMgcmVtYWluIHZpc2libGUgYW5kIHNlbGVjdGVkXG4gICAqIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gdGFicy4gUmVzdWx0cyBhcmUgb25seSBjbGVhcmVkIHdoZW4gZXhwbGljaXRseVxuICAgKiBjbGlja2luZyB0aGUgdHJhc2ggY2FuIGJ1dHRvbiBvciB3aGVuIHN0YXJ0aW5nIGEgbmV3IHF1ZXJ5LlxuICAgKiBcbiAgICogQHBhcmFtIHRhYiAtIFRoZSB0YWIgdG8gc3dpdGNoIHRvICgncXVlcnknIHwgJ3Jlc3VsdHMnKVxuICAgKiBAcGFyYW0gZXZlbnQgLSBPcHRpb25hbCBtb3VzZSBldmVudCB0byBwcmV2ZW50IGRlZmF1bHQgYmVoYXZpb3JcbiAgICovXG4gIGNvbnN0IGhhbmRsZVRhYkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCh0YWI6ICdxdWVyeScgfCAncmVzdWx0cycsIGV2ZW50PzogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAndGFiLWNoYW5nZScsXG4gICAgICB0YWIsXG4gICAgICBjdXJyZW50VGFiOiBhY3RpdmVUYWIsXG4gICAgICByZXN1bHRDb3VudCxcbiAgICAgIGV2ZW50VHlwZTogZXZlbnQ/LnR5cGVcbiAgICB9KVxuICAgIFxuICAgIGlmIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB9XG4gICAgLy8gRG9uJ3QgYWxsb3cgc3dpdGNoaW5nIHRvIHJlc3VsdHMgaWYgdGhlcmUgYXJlIG5vIHJlc3VsdHNcbiAgICBpZiAodGFiID09PSAncmVzdWx0cycgJiYgcmVzdWx0Q291bnQgPT09IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICd0YWItY2hhbmdlLWJsb2NrZWQnLFxuICAgICAgICByZWFzb246ICduby1yZXN1bHRzJyxcbiAgICAgICAgdGFiLFxuICAgICAgICByZXN1bHRDb3VudFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBNYXJrIHRoaXMgYXMgYSBtYW51YWwgc3dpdGNoIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICBzZXRBY3RpdmVUYWIodGFiKVxuICAgIFxuICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gYWxsb3cgdGhlIHN0YXRlIHVwZGF0ZSB0byBjb21wbGV0ZVxuICAgIC8vIFRoaXMgcHJldmVudHMgdGhlIGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGltbWVkaWF0ZWx5IHN3aXRjaGluZyBiYWNrXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgfSwgMTAwKVxuICAgIFxuICAgIC8vIERvbid0IGNoYW5nZSBzdGFnZSBoZXJlIC0ganVzdCBzd2l0Y2ggdGhlIHZpZXdcbiAgICAvLyBTdGFnZSBzaG91bGQgcmVtYWluIGF0IDEgKHJlc3VsdHMgYXZhaWxhYmxlKSB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHRhYnNcbiAgfSwgW3Jlc3VsdENvdW50LCBhY3RpdmVUYWJdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGZvcm0gc3VibWlzc2lvbiB3aGVuIHVzZXIgY2xpY2tzIFwiQXBwbHlcIiBidXR0b24uXG4gICAqIENsZWFycyBvbGQgcmVzdWx0cyAoaWYgYW55KSBieSBwcm9ncmFtbWF0aWNhbGx5IGNsaWNraW5nIHRoZSB0cmFzaCBjYW4gYnV0dG9uLFxuICAgKiB0aGVuIGV4ZWN1dGVzIHRoZSBxdWVyeSB3aXRoIHRoZSBwcm92aWRlZCBTUUwgZXhwcmVzc2lvbiBhbmQgc3BhdGlhbCBmaWx0ZXIuXG4gICAqIFxuICAgKiBAcGFyYW0gc3FsRXhwciAtIFRoZSBTUUwgZXhwcmVzc2lvbiBmb3IgYXR0cmlidXRlIGZpbHRlcmluZ1xuICAgKiBAcGFyYW0gc3BhdGlhbEZpbHRlciAtIFRoZSBzcGF0aWFsIGZpbHRlciBvYmplY3RcbiAgICogQHBhcmFtIHJ1bnRpbWVab29tVG9TZWxlY3RlZCAtIE9wdGlvbmFsIHJ1bnRpbWUgb3ZlcnJpZGUgZm9yIHpvb20tdG8tc2VsZWN0ZWQgYmVoYXZpb3JcbiAgICovXG4gIGNvbnN0IGhhbmRsZUZvcm1TdWJtaXQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uLCBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB7XG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzIHdoZW4gc3RhcnRpbmcgYSBuZXcgcXVlcnlcbiAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKVxuICAgIHNldFpvb21FcnJvcihudWxsKVxuICAgIFxuICAgIC8vIFN0b3JlIHRoZSBydW50aW1lIHpvb20gb3ZlcnJpZGUgZm9yIHVzZSBieSBBZGQgdG8gTWFwIGFjdGlvblxuICAgIGxhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYuY3VycmVudCA9IHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuICAgIFxuICAgIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmouY3VycmVudCA9IHNxbEV4cHJcbiAgICBzcGF0aWFsRmlsdGVyT2JqLmN1cnJlbnQgPSBzcGF0aWFsRmlsdGVyXG4gICAgLy8gTG9hZCB0aGUgZmlyc3QgcGFnZVxuICAgIGNvbnN0IGZlYXR1cmVEUyA9IG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICAvLyBGb3IgXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB1c2Ugd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAvLyBUaGVzZSBwZXJzaXN0IGFjcm9zcyBxdWVyeSBzd2l0Y2hlcywgdW5saWtlIHF1ZXJ5LWl0ZW0tbGV2ZWwgcmVjb3Jkc1xuICAgIGxldCBleGlzdGluZ1JlY29yZHNGb3JNZXJnZTogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgIGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICd1c2luZy13aWRnZXQtbGV2ZWwtYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGV4aXN0aW5nUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBjbGVhciBvbGQgcmVzdWx0cyBieSBwcm9ncmFtbWF0aWNhbGx5IGNsaWNraW5nIHRoZSB0cmFzaCBjYW4gYnV0dG9uXG4gICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2Rlcywgd2Uga2VlcCBhY2N1bXVsYXRlZCByZXN1bHRzLCBzbyBza2lwIGNsZWFyaW5nXG4gICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiAmJiBjbGVhclJlc3VsdEJ0blJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhclJlc3VsdEJ0blJlZi5jdXJyZW50LmNsaWNrKClcbiAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSB0aGUgY2xpY2sgaGFuZGxlciBjb21wbGV0ZXMgYmVmb3JlIHByb2NlZWRpbmdcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSlcbiAgICB9XG4gICAgXG4gICAgLy8gU2V0IGxvYWRpbmcgc3RhZ2VcbiAgICBzZXRTdGFnZSgyKVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIGNsZWFyIGRhdGEgY2xlYXJlZCBtZXNzYWdlXG4gICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2Rlcywgc2tpcCBjbGVhcmluZyB0byBwcmVzZXJ2ZSBleGlzdGluZyByZWNvcmRzXG4gICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgYXdhaXQgcHVibGlzaERhdGFDbGVhcmVkTXNnKClcbiAgICB9XG4gICAgXG4gICAgLy8gRk9SQ0VEOiBBbHdheXMgdXNlIFNpbXBsZUxpc3QgLSBmZXRjaCBBTEwgcmVjb3Jkcywgbm90IGp1c3QgYSBwYWdlXG4gICAgLy8gVXNlIGRhdGEgc291cmNlJ3MgbWF4IHJlY29yZCBjb3VudCwgb3IgZmFsbCBiYWNrIHRvIGEgbGFyZ2UgbnVtYmVyICgxMDAwMClcbiAgICBjb25zdCBtYXhSZWNvcmRDb3VudCA9IChmZWF0dXJlRFMgYXMgYW55KS5nZXRNYXhSZWNvcmRDb3VudD8uKCkgPz8gMTAwMDBcbiAgICBsZXQgcGFnZVNpemUgPSBtYXhSZWNvcmRDb3VudFxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gZ2VuZXJhdGVRdWVyeVBhcmFtcyhmZWF0dXJlRFMsIHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIGN1cnJlbnRJdGVtLCAxLCBwYWdlU2l6ZSlcbiAgICBxdWVyeVBhcmFtUmVmLmN1cnJlbnQgPSBxdWVyeVBhcmFtc1xuICAgIC8vIENoYW5nZSBvdXRwdXQgZHMgc3RhdHVzIHRvIHVubG9hZGVkIGJlZm9yZSB1c2UgaXQgdG8gbG9hZCBjb3VudC9yZWNvcmRzLlxuICAgIGZlYXR1cmVEUy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5VbmxvYWRlZClcbiAgICBmZWF0dXJlRFMuc2V0Q291bnRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5VbmxvYWRlZClcbiAgICBsZXQgcXVlcnlSZXN1bHRDb3VudCA9IDAgLy8gQ2FwdHVyZSBjb3VudCBmcm9tIHByb21pc2UgY2hhaW4gdG8gdXNlIGluIGZpbmFsbHkgYmxvY2tcbiAgICBleGVjdXRlQ291bnRRdWVyeShwcm9wcy53aWRnZXRJZCwgZmVhdHVyZURTLCBxdWVyeVBhcmFtcylcbiAgICAgIC50aGVuKChjb3VudCkgPT4ge1xuICAgICAgICBxdWVyeVJlc3VsdENvdW50ID0gY291bnQgLy8gU3RvcmUgY291bnQgZm9yIHVzZSBpbiBmaW5hbGx5IGJsb2NrXG4gICAgICAgIC8vIERvbid0IHNldCByZXN1bHRDb3VudCBoZXJlIC0gd2FpdCB1bnRpbCBxdWVyeSBjb21wbGV0ZXMgYW5kIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmIGlzIHNldFxuICAgICAgICAvLyBUaGlzIGVuc3VyZXMgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IHJ1bnMgd2l0aCBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ID09PSB0cnVlXG4gICAgICAgIC8vIHVwZGF0ZSBkcyBpbiBvcmRlciB0byBleGVjdXRlIHF1ZXJ5XG4gICAgICAgIGZlYXR1cmVEUy51cGRhdGVRdWVyeVBhcmFtcyhxdWVyeVBhcmFtUmVmLmN1cnJlbnQsIHByb3BzLndpZGdldElkKVxuICAgICAgICByZXR1cm4gZXhlY3V0ZVF1ZXJ5KHByb3BzLndpZGdldElkLCBxdWVyeUl0ZW0sIGZlYXR1cmVEUywgcXVlcnlQYXJhbVJlZi5jdXJyZW50KVxuICAgICAgfSlcbiAgICAgIC50aGVuKGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICAgICAgbGV0IHJlY29yZHNUb0Rpc3BsYXkgPSByZXN1bHQucmVjb3Jkc1xuICAgICAgICBsZXQgZHNUb1VzZSA9IG91dHB1dERTXG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgXCJBZGQgdG9cIiBtb2RlOiBtZXJnZSBuZXcgcmVzdWx0cyB3aXRoIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiAmJiByZXN1bHQucmVjb3JkcyAmJiByZXN1bHQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIE1lcmdlIG5ldyBxdWVyeSByZXN1bHRzIHdpdGggd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgIG91dHB1dERTLCAvLyBVc2Ugb3V0cHV0RFMgZm9yIGtleSBnZW5lcmF0aW9uXG4gICAgICAgICAgICAgIHJlc3VsdC5yZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgIGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlIC8vIFdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSBtZXJnZWRSZWNvcmRzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3JkcyBzbyB0aGV5IHBlcnNpc3QgYWNyb3NzIHF1ZXJ5IHN3aXRjaGVzXG4gICAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UobWVyZ2VkUmVjb3JkcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnYWRkLW1vZGUtbWVyZ2UtY29tcGxldGUnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGV4aXN0aW5nUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgIG5ld1JlY29yZHNDb3VudDogcmVzdWx0LnJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBtZXJnZWRSZWNvcmRzQ291bnQ6IG1lcmdlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgICAgd2lkZ2V0TGV2ZWxSZWNvcmRzVXBkYXRlZDogdHJ1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnYWRkLW1vZGUtZXJyb3InLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gRmFsbCBiYWNrIHRvIG5vcm1hbCBiZWhhdmlvciBvbiBlcnJvclxuICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IHJlc3VsdC5yZWNvcmRzXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgICAgICAvLyBIYW5kbGUgXCJSZW1vdmUgZnJvbVwiIG1vZGU6IHJlbW92ZSBtYXRjaGluZyByZWNvcmRzIGZyb20gd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIHRvIHJlbW92ZSBmcm9tXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIHF1ZXJ5UmVjb3Jkc0NvdW50OiByZXN1bHQucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgbm90ZTogJ05vIGFjY3VtdWxhdGVkIHJlY29yZHMgdG8gcmVtb3ZlIGZyb20gLSBuby1vcCdcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLy8gTm8gYWNjdW11bGF0ZWQgcmVjb3Jkcywgc28gbm90aGluZyB0byByZW1vdmUgLSBzaG93IGVtcHR5IHJlc3VsdHNcbiAgICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IFtdXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5yZWNvcmRzICYmIHJlc3VsdC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIG1hdGNoaW5nIHJlY29yZHMgZnJvbSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1JlY29yZHMgPSByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICAgIG91dHB1dERTLCAvLyBVc2Ugb3V0cHV0RFMgZm9yIGtleSBnZW5lcmF0aW9uXG4gICAgICAgICAgICAgICAgcmVzdWx0LnJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgICBleGlzdGluZ1JlY29yZHNGb3JNZXJnZSAvLyBXaWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVtYWluaW5nUmVjb3Jkc1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gVXBkYXRlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHJlbWFpbmluZ1JlY29yZHMpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFJlbW92ZSByZWNvcmRzIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMgKG1hcCBoaWdobGlnaHRpbmcpXG4gICAgICAgICAgICAgIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyhcbiAgICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICByZXN1bHQucmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICAgIG91dHB1dERTXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtY29tcGxldGUnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcXVlcnlSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHJlY29yZHNSZW1vdmVkOiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGggLSByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgICAgICB3aWRnZXRMZXZlbFJlY29yZHNVcGRhdGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG9yaWdpblNlbGVjdGlvbnNVcGRhdGVkOiB0cnVlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBJZiBhbGwgcmVjb3JkcyByZW1vdmVkLCBhdXRvLWNsZWFyIChjb25zaXN0ZW50IHdpdGggdXNlciBleHBlY3RhdGlvbilcbiAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWFsbC1yZWNvcmRzLXJlbW92ZWQnLFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgbm90ZTogJ0FsbCBhY2N1bXVsYXRlZCByZWNvcmRzIHJlbW92ZWQgLSBhdXRvLWNsZWFyaW5nJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUXVlcnkgcmV0dXJuZWQgbm8gcmVzdWx0cyAtIG5vdGhpbmcgdG8gcmVtb3ZlXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtbm8tcXVlcnktcmVzdWx0cycsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBub3RlOiAnUXVlcnkgcmV0dXJuZWQgbm8gcmVzdWx0cyAtIG5vIHJlY29yZHMgdG8gcmVtb3ZlJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAvLyBLZWVwIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgZGlzcGxheWVkXG4gICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSBleGlzdGluZ1JlY29yZHNGb3JNZXJnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1lcnJvcicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gc2hvd2luZyBxdWVyeSByZXN1bHRzIG9uIGVycm9yXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVzdWx0LnJlY29yZHMgfHwgW11cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHJlbW92ZSBtb2RlOicsIGVycm9yKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgICAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBjbGVhciB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoW10pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSByZWNvcmRzVG9EaXNwbGF5XG4gICAgICAgIC8vIFJlc2V0IHNlbGVjdGlvbiBmbGFnIGZvciBuZXcgcXVlcnkgcmVzdWx0c1xuICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgIFxuICAgICAgICAvLyBTZWxlY3QgcmVjb3JkcyBpbiB0aGUgb3V0cHV0IERTXG4gICAgICAgIC8vIEZvciBcIkFkZCB0b1wiIG1vZGUsIHNlbGVjdCBtZXJnZWQgcmVjb3Jkc1xuICAgICAgICAvLyBGb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUsIHNlbGVjdCByZW1haW5pbmcgcmVjb3JkcyAoYWxyZWFkeSB1cGRhdGVkIHZpYSByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMpXG4gICAgICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIHNlbGVjdCBxdWVyeSByZXN1bHRzXG4gICAgICAgIGlmIChyZWNvcmRzVG9EaXNwbGF5ICYmIHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoID4gMCAmJiBkc1RvVXNlKSB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkSWRzVG9TZWxlY3QgPSByZWNvcmRzVG9EaXNwbGF5Lm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRm9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCBzZWxlY3Rpb24gd2FzIGFscmVhZHkgdXBkYXRlZCB2aWEgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zXG4gICAgICAgICAgLy8gQnV0IHdlIHN0aWxsIG5lZWQgdG8gc2VsZWN0IGluIHRoZSBvdXRwdXREUyBmb3Igd2lkZ2V0IHN0YXRlIGNvbnNpc3RlbmN5XG4gICAgICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFNlbGVjdGlvbiB3YXMgYWxyZWFkeSB1cGRhdGVkIGluIG9yaWdpbiBEU3MgdmlhIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgICAgICAgICAgLy8gSnVzdCB1cGRhdGUgb3V0cHV0RFMgc2VsZWN0aW9uIGZvciB3aWRnZXQgc3RhdGUgY29uc2lzdGVuY3lcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZHNUb1VzZS5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBkc1RvVXNlLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHNUb1NlbGVjdCwgcmVjb3Jkc1RvRGlzcGxheSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLW91dHB1dC1kcy1zZWxlY3Rpb24tdXBkYXRlZCcsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1vdXRwdXQtZHMtc2VsZWN0aW9uLWVycm9yJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBcIkFkZCB0b1wiIGFuZCBcIk5ld1wiIG1vZGVzLCBzZWxlY3QgcmVjb3JkcyBub3JtYWxseVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzXG4gICAgICAgICAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgICAgICAgIHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGRzVG9Vc2UsXG4gICAgICAgICAgICAgICAgcmVjb3JkSWRzVG9TZWxlY3QsXG4gICAgICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSB0cnVlIC8vIE1hcmsgYXMgc2VsZWN0ZWRcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZWxlY3QgcXVlcnkgcmVzdWx0cydcbiAgICAgICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tZmFpbGVkJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzVG9TZWxlY3QubGVuZ3RoXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHB1Ymxpc2hpbmcgc2VsZWN0aW9uIG1lc3NhZ2UnLCBlcnJvcilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiAmJiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIC8vIEFsbCByZWNvcmRzIHJlbW92ZWQgLSBjbGVhciBzZWxlY3Rpb25cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKGRzVG9Vc2UpXG4gICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1hbGwtcmVjb3Jkcy1yZW1vdmVkLXNlbGVjdGlvbi1jbGVhcmVkJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1jbGVhci1zZWxlY3Rpb24tZXJyb3InLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1hcmsgdGhhdCBxdWVyeSBqdXN0IGV4ZWN1dGVkIEJFRk9SRSB1cGRhdGluZyByZXN1bHRDb3VudFxuICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBzZWVzIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgPT09IHRydWVcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAncXVlcnktZXhlY3V0ZWQtZmxhZy1zZXQnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXlDb3VudDogcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGgsXG4gICAgICAgICAgcXVlcnlSZXN1bHRDb3VudCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSByZXN1bHQgY291bnRcbiAgICAgICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgdXNlIGFjY3VtdWxhdGVkL3JlbWFpbmluZyBjb3VudFxuICAgICAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCB1c2UgcXVlcnkgY291bnRcbiAgICAgICAgY29uc3QgbmV3UmVzdWx0Q291bnQgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICAgICAgPyByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aFxuICAgICAgICAgIDogcXVlcnlSZXN1bHRDb3VudFxuICAgICAgICBcbiAgICAgICAgc2V0UmVzdWx0Q291bnQobmV3UmVzdWx0Q291bnQpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3Jlc3VsdC1jb3VudC1zZXQnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIG5ld1Jlc3VsdENvdW50LFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIGV4aXN0aW5nIHpvb21Ub0ZlYXR1cmUgZGF0YSBhY3Rpb24gKHNhbWUgYXMgY2xpY2tpbmcgXCJab29tIFRvXCIgaW4gdGhlIG1lbnUpXG4gICAgICAgIC8vIFVzZSBydW50aW1lIHByZWZlcmVuY2UgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gY29uZmlnIHNldHRpbmcgKGRlZmF1bHRzIHRvIHRydWUpXG4gICAgICAgIGNvbnN0IHNob3VsZFpvb20gPSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCBcbiAgICAgICAgICA/IHJ1bnRpbWVab29tVG9TZWxlY3RlZCBcbiAgICAgICAgICA6IChxdWVyeUl0ZW0uem9vbVRvU2VsZWN0ZWQgIT09IGZhbHNlKVxuICAgICAgICBcbiAgICAgICAgLy8gVXNlIHRoZSBvdXRwdXQgRFMgYW5kIG1lcmdlZCByZWNvcmRzXG4gICAgICAgIGNvbnN0IHJlY29yZHNGb3Jab29tID0gcmVjb3Jkc1RvRGlzcGxheSB8fCByZXN1bHQucmVjb3Jkc1xuICAgICAgICBjb25zdCBkc0Zvclpvb20gPSBkc1RvVXNlIHx8IG91dHB1dERTXG4gICAgICAgIFxuICAgICAgICBpZiAocmVjb3Jkc0Zvclpvb20gJiYgcmVjb3Jkc0Zvclpvb20ubGVuZ3RoID4gMCAmJiBkc0Zvclpvb20gJiYgc2hvdWxkWm9vbSkge1xuICAgICAgICAgIC8vIENyZWF0ZSBhIGRhdGEgc2V0IGZyb20gdGhlIGFwcHJvcHJpYXRlIGRhdGEgc291cmNlIGFuZCByZWNvcmRzXG4gICAgICAgICAgY29uc3QgZGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2U6IGRzRm9yWm9vbSxcbiAgICAgICAgICAgIHJlY29yZHM6IHJlY29yZHNGb3Jab29tLFxuICAgICAgICAgICAgbmFtZTogZHNGb3Jab29tLmdldExhYmVsKClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBHZXQgYXZhaWxhYmxlIGRhdGEgYWN0aW9ucyBhbmQgZmluZCB0aGUgem9vbVRvRmVhdHVyZSBhY3Rpb25cbiAgICAgICAgICByZXR1cm4gRGF0YUFjdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRTdXBwb3J0ZWRBY3Rpb25zKHByb3BzLndpZGdldElkLCBbZGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzKVxuICAgICAgICAgICAgLnRoZW4oYWN0aW9uQ2F0ZWdvcmllcyA9PiB7XG4gICAgICAgICAgICAgIC8vIExvb2sgZm9yIHpvb21Ub0ZlYXR1cmUgYWN0aW9uIGluIGFueSBjYXRlZ29yeVxuICAgICAgICAgICAgICBsZXQgem9vbUFjdGlvbjogYW55ID0gbnVsbFxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IGluIGFjdGlvbkNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25zID0gYWN0aW9uQ2F0ZWdvcmllc1tjYXRlZ29yeV1cbiAgICAgICAgICAgICAgICB6b29tQWN0aW9uID0gYWN0aW9ucy5maW5kKChhY3Rpb246IGFueSkgPT4gYWN0aW9uLm5hbWUgPT09ICd6b29tVG9GZWF0dXJlJyB8fCBhY3Rpb24uaWQgPT09ICd6b29tVG9GZWF0dXJlJylcbiAgICAgICAgICAgICAgICBpZiAoem9vbUFjdGlvbikgYnJlYWtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh6b29tQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSB0aGUgc2FtZSB6b29tIGFjdGlvbiB0aGF0IHdvcmtzIHdoZW4gY2xpY2tlZCBtYW51YWxseVxuICAgICAgICAgICAgICAgIHJldHVybiBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmV4ZWN1dGVEYXRhQWN0aW9uKHpvb21BY3Rpb24sIFtkYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMsIHByb3BzLndpZGdldElkKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gem9vbSB0byBmZWF0dXJlcydcbiAgICAgICAgICAgICAgc2V0Wm9vbUVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdaT09NJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAnem9vbS1hY3Rpb24tZmFpbGVkJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleGVjdXRpbmcgem9vbVRvRmVhdHVyZSBkYXRhIGFjdGlvbicsIGVycm9yKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSlcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGlmIChzcGF0aWFsRmlsdGVyPy5sYXllciAmJiBzcGF0aWFsRmlsdGVyPy5jbGVhckFmdGVyQXBwbHkpIHtcbiAgICAgICAgICBzcGF0aWFsRmlsdGVyLmxheWVyLnJlbW92ZUFsbCgpXG4gICAgICAgIH1cbiAgICAgICAgc2V0U3RhZ2UoMSlcbiAgICAgICAgLy8gcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCBpcyBub3cgc2V0IEJFRk9SRSBzZXRSZXN1bHRDb3VudCAobW92ZWQgdXApXG4gICAgICAgIC8vIFRhYiBzd2l0Y2hpbmcgaXMgbm93IGhhbmRsZWQgYnkgdXNlRWZmZWN0IHRoYXQgd2F0Y2hlcyBmb3IgcXVlcnlKdXN0RXhlY3V0ZWRSZWYgYW5kIHJlc3VsdHNcbiAgICAgICAgLy8gVGhpcyBtYXRjaGVzIHRoZSBiZWhhdmlvciBvZiBtYW51YWwgaW5wdXQgd2hlcmUgcmVzdWx0cyBhcmUgcmVuZGVyZWQgYmVmb3JlIHRhYiBzd2l0Y2hcbiAgICAgIH0pXG4gIH0sIFtjdXJyZW50SXRlbSwgcXVlcnlJdGVtLCBwcm9wcy53aWRnZXRJZCwgb3V0cHV0RFMsIGRlZmF1bHRQYWdlU2l6ZSwgcGFnaW5nVHlwZUluQ29uZmlnLCBsYXp5TG9hZEluaXRpYWxQYWdlU2l6ZSwgcHVibGlzaERhdGFDbGVhcmVkTXNnLCBjbGVhclJlc3VsdCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2VdKVxuXG4gIGNvbnN0IHsgdXNlQXR0cmlidXRlRmlsdGVyLCBzcWxFeHByT2JqLCB1c2VTcGF0aWFsRmlsdGVyLCBzcGF0aWFsRmlsdGVyVHlwZXMsIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IHNob3dBdHRyaWJ1dGVGaWx0ZXIgPSB1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwck9iaiAhPSBudWxsXG4gIGNvbnN0IHNob3dTcGF0aWFsRmlsdGVyID0gc3BhdGlhbEZpbHRlckVuYWJsZWQgJiYgdXNlU3BhdGlhbEZpbHRlciAmJiAoc3BhdGlhbEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgfHwgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSB8fCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMClcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrIGgtMTAwJywgY2xhc3NOYW1lLCB7IHdyYXBwZWQ6IHdyYXBwZWRJblBvcHBlciB9KX0gY3NzPXtjc3NgXG4gICAgICAke3N0eWxlfVxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGB9PlxuICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17dXNlT3V0cHV0RHN9IG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZU91dHB1dERhdGFTb3VyY2VDcmVhdGVkfSBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVPdXRwdXREYXRhU291cmNlSW5mb0NoYW5nZX0vPlxuICAgICAgXG4gICAgICB7LyogVGFiIE5hdmlnYXRpb24gLSBNb3ZlZCB0byB0b3AgKi99XG4gICAgICA8VGFic1xuICAgICAgICB2YWx1ZT17YWN0aXZlVGFifVxuICAgICAgICBvbkNoYW5nZT17KGlkKSA9PiBoYW5kbGVUYWJDaGFuZ2UoaWQgYXMgJ3F1ZXJ5JyB8ICdyZXN1bHRzJyl9XG4gICAgICAgIGZpbGw9e3RydWV9XG4gICAgICAgIHR5cGU9J3VuZGVybGluZSdcbiAgICAgICAga2VlcE1vdW50PXt0cnVlfVxuICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIGB9XG4gICAgICA+XG4gICAgICAgIDxUYWJcbiAgICAgICAgICBpZD0ncXVlcnknXG4gICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdxdWVyeVRhYicpfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktdGFza19fY29udGVudCcsIHtcbiAgICAgICAgICAgICAgW0ZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1NdOiBpc0luUG9wcGVyICYmIGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5J1xuICAgICAgICAgICAgfSl9IFxuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICBgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHsvKiBIZWFkZXIgd2l0aCBiYWNrIGJ1dHRvbiBhbmQgcXVlcnkgbGFiZWwgLSBRdWVyeSB0YWIgb25seSAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS1mb3JtX19oZWFkZXIgbXgtNCBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdpbi1wb3BwZXInOiBpc0luUG9wcGVyIH0pfSBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgcGFkZGluZzogNnB4IDA7XG4gICAgICAgICAgICAgIHBhZGRpbmctdG9wOiA4cHg7XG4gICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbmF2LWFjdGlvbiBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdkLW5vbmUnOiB3cmFwcGVkSW5Qb3BwZXIgfSl9IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDEgMSAwO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgIC5qaW11LWJ0biB7XG4gICAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDI2cHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3AtMCBtci0yJywgeyAnZC1ub25lJzogdG90YWwgPT09IDEgfHwgIW9uTmF2QmFjayB9KX1cbiAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbk5hdkJhY2t9XG4gICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnYmFjaycpfVxuICAgICAgICAgICAgICAgICAgcmVmPXtiYWNrQnRuUmVmfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxBcnJvd0xlZnRPdXRsaW5lZCBhdXRvRmxpcC8+XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPFF1ZXJ5VGFza0xhYmVsIGljb249e2ljb259IG5hbWU9e2Rpc3BsYXlMYWJlbCA/IG5hbWUgOiAnJ30gLz5cbiAgICAgICAgICAgICAgICB7LyogSGFzaCBwYXJhbWV0ZXIgaW5mbyBidXR0b24gLSBzaG93cyBxdWVyaWVzIGZyb20gc2FtZSBsYXllciB3aXRoIHNob3J0SWRzICovfVxuICAgICAgICAgICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKCFxdWVyeUl0ZW1zIHx8IHF1ZXJ5SXRlbXMubGVuZ3RoIDw9IDEpIHJldHVybiBudWxsXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIEdldCBjdXJyZW50IHF1ZXJ5J3Mgb3JpZ2luIGRhdGEgc291cmNlIElEXG4gICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50T3JpZ2luRFNJZCA9IHF1ZXJ5SXRlbS51c2VEYXRhU291cmNlPy5kYXRhU291cmNlSWRcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50T3JpZ2luRFNJZCkgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gRmluZCBhbGwgcXVlcmllcyBmcm9tIHRoZSBzYW1lIG9yaWdpbiBkYXRhIHNvdXJjZSB0aGF0IGhhdmUgc2hvcnRJZHNcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNhbWVMYXllclF1ZXJpZXMgPSBxdWVyeUl0ZW1zLmZpbHRlcihpdGVtID0+IFxuICAgICAgICAgICAgICAgICAgICBpdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCA9PT0gY3VycmVudE9yaWdpbkRTSWQgJiYgXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2hvcnRJZCAmJiBcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG9ydElkLnRyaW0oKSAhPT0gJydcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gT25seSBzaG93IGluZm8gYnV0dG9uIGlmIHRoZXJlIGFyZSBxdWVyaWVzIHdpdGggc2hvcnRJZHNcbiAgICAgICAgICAgICAgICAgIGlmIChzYW1lTGF5ZXJRdWVyaWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gQnVpbGQgdG9vbHRpcCBjb250ZW50XG4gICAgICAgICAgICAgICAgICBjb25zdCBxdWVyeUxpbmVzID0gc2FtZUxheWVyUXVlcmllcy5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5TmFtZSA9IGdldFF1ZXJ5RGlzcGxheU5hbWUoaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke3F1ZXJ5TmFtZX06ICMke2l0ZW0uc2hvcnRJZH09dmFsdWVgXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBjb25zdCB0b29sdGlwVGl0bGUgPSBgVGhpcyBsYXllciBjYW4gYmUgc2VhcmNoZWQgdXNpbmcgdGhlIHNob3J0SWRzICR7c2FtZUxheWVyUXVlcmllcy5tYXAocSA9PiBxLnNob3J0SWQpLmpvaW4oJyBhbmQgJyl9IHVzaW5nICNzaG9ydElkPXZhbHVlIGluIHRoZSBVUkwuXFxuXFxuJHtxdWVyeUxpbmVzLmpvaW4oJ1xcbicpfVxcblxcbkV4YW1wbGU6ICR7cXVlcnlMaW5lc1swXX1gXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxUb29sdGlwIFxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tJyBcbiAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3Rvb2x0aXBUaXRsZX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPSdzbScgXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uIFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nSGFzaCBwYXJhbWV0ZXIgc2VhcmNoIGluZm9ybWF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtyZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0gcGxhY2VtZW50PSdib3R0b20nPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICByZWY9e2NsZWFyUmVzdWx0QnRuUmVmfVxuICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfVxuICAgICAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbWwtYXV0byBweS0wJ1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtjbGVhclJlc3VsdH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRyYXNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgey8qIFNlYXJjaCBMYXllciAvIEdyb3VwIGRyb3Bkb3ducyAtIHNob3cgYmFzZWQgb24gZ3JvdXBpbmcgKi99XG4gICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgLy8gT25seSBzaG93IGRyb3Bkb3ducyBpZiBtdWx0aXBsZSBxdWVyaWVzIGV4aXN0XG4gICAgICAgICAgICAgIGlmICghcXVlcnlJdGVtcyB8fCBxdWVyeUl0ZW1zLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQnVpbGQgZmxhdCBsaXN0IG9mIGFsbCBxdWVyaWVzIHdpdGggdGhlaXIgZGlzcGxheSBpbmZvXG4gICAgICAgICAgICAgIC8vIEZvciBncm91cGVkIHF1ZXJpZXMsIHVzZSBncm91cCBkaXNwbGF5IG5hbWUgKG9ubHkgc2hvdyBvbmNlIHBlciBncm91cClcbiAgICAgICAgICAgICAgY29uc3QgcXVlcnlPcHRpb25zOiBBcnJheTx7XG4gICAgICAgICAgICAgICAgY29uZmlnSWQ6IHN0cmluZ1xuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmdcbiAgICAgICAgICAgICAgICBncm91cElkOiBzdHJpbmcgfCBudWxsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlclxuICAgICAgICAgICAgICB9PiA9IFtdXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBUcmFjayB3aGljaCBncm91cHMgd2UndmUgYWxyZWFkeSBhZGRlZCB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgICAgICAgIGNvbnN0IGFkZGVkR3JvdXBzID0gbmV3IFNldDxzdHJpbmc+KClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbXMuZm9yRWFjaCgoaXRlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgICAgLy8gRm9yIGdyb3VwZWQgcXVlcmllcywgdXNlIGdyb3VwIGRpc3BsYXkgbmFtZSAob25seSBhZGQgb25jZSBwZXIgZ3JvdXApXG4gICAgICAgICAgICAgICAgICBpZiAoIWFkZGVkR3JvdXBzLmhhcyhpdGVtLmdyb3VwSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZGVkR3JvdXBzLmFkZChpdGVtLmdyb3VwSWQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwRGlzcGxheU5hbWUgPSBncm91cHM/LltpdGVtLmdyb3VwSWRdPy5kaXNwbGF5TmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cHM/LltpdGVtLmdyb3VwSWRdPy5pdGVtc1swXT8ubmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEdyb3VwICR7aXRlbS5ncm91cElkfWBcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBncm91cERpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSAtIHVzZSBpdGVtLm5hbWUgZm9yIGZpcnN0IGRyb3Bkb3duIChub3Qgc2VhcmNoQWxpYXMvamltdUZpZWxkTmFtZSlcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBpdGVtLm5hbWUgfHwgZ2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKSxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgY3VycmVudGx5IHNlbGVjdGVkIHF1ZXJ5XG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRRdWVyeUl0ZW0gPSBxdWVyeUl0ZW1cbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFF1ZXJ5R3JvdXBJZCA9IGN1cnJlbnRRdWVyeUl0ZW0uZ3JvdXBJZCB8fCBudWxsXG4gICAgICAgICAgICAgIGNvbnN0IGlzR3JvdXBlZFF1ZXJ5ID0gY3VycmVudFF1ZXJ5R3JvdXBJZCAhPT0gbnVsbFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRmluZCB0aGUgb3B0aW9uIGluZGV4IGZvciB0aGUgY3VycmVudCBxdWVyeVxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50T3B0aW9uSW5kZXggPSBxdWVyeU9wdGlvbnMuZmluZEluZGV4KG9wdCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzR3JvdXBlZFF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0Lmdyb3VwSWQgPT09IGN1cnJlbnRRdWVyeUdyb3VwSWRcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdC5jb25maWdJZCA9PT0gY3VycmVudFF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW5kZXJpbmctZHJvcGRvd25zJyxcbiAgICAgICAgICAgICAgICB0b3RhbFF1ZXJpZXM6IHF1ZXJ5SXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9uc0NvdW50OiBxdWVyeU9wdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWVyeUdyb3VwSWQsXG4gICAgICAgICAgICAgICAgaXNHcm91cGVkUXVlcnksXG4gICAgICAgICAgICAgICAgY3VycmVudE9wdGlvbkluZGV4LFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCxcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVlcnlDb25maWdJZDogY3VycmVudFF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgey8qIEZpcnN0IERyb3Bkb3duOiBBbGwgcXVlcmllcyAqL31cbiAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgnc2VhcmNoTGF5ZXInKX1cbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBcbiAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50T3B0aW9uSW5kZXggPj0gMCA/IGN1cnJlbnRPcHRpb25JbmRleCA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25JbmRleCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRPcHRpb24gPSBxdWVyeU9wdGlvbnNbb3B0aW9uSW5kZXhdXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAncXVlcnktb3B0aW9uLXNlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpc0dyb3VwZWQ6IHNlbGVjdGVkT3B0aW9uLmdyb3VwSWQgIT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZE9wdGlvbi5ncm91cElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyb3VwZWQgcXVlcnkgc2VsZWN0ZWQgLSBzZXQgZ3JvdXAgYW5kIGZpcnN0IHF1ZXJ5IGluIGdyb3VwXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cENoYW5nZShzZWxlY3RlZE9wdGlvbi5ncm91cElkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwUXVlcnlDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwUXVlcnlDaGFuZ2UoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5IHNlbGVjdGVkIC0gY2xlYXIgZ3JvdXAgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cENoYW5nZShudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblVuZ3JvdXBlZENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHVuZ3JvdXBlZCBpbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVuZ3JvdXBlZEluZGV4ID0gdW5ncm91cGVkPy5maW5kSW5kZXgoKHsgaXRlbSB9KSA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY29uZmlnSWQgPT09IHNlbGVjdGVkT3B0aW9uLmNvbmZpZ0lkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA/PyAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmdyb3VwZWRJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVuZ3JvdXBlZENoYW5nZSh1bmdyb3VwZWRJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IHVzZSB0aGUgaW5kZXggZnJvbSBxdWVyeUl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3VuZ3JvdXBlZC1mYWxsYmFjay10by1pbmRleCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uSW5kZXg6IHNlbGVjdGVkT3B0aW9uLmluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUXVlcnlDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25RdWVyeUNoYW5nZShzZWxlY3RlZE9wdGlvbi5pbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge3F1ZXJ5T3B0aW9ucy5tYXAoKG9wdGlvbiwgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3JlbmRlcmluZy1xdWVyeS1vcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWdJZDogb3B0aW9uLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogb3B0aW9uLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBvcHRpb24uZ3JvdXBJZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtvcHRpb24uY29uZmlnSWR9IHZhbHVlPXtpZHh9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcHRpb24uZGlzcGxheU5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB7LyogU2Vjb25kIERyb3Bkb3duOiBRdWVyaWVzIHdpdGhpbiBzZWxlY3RlZCBncm91cCAob25seSBpZiBncm91cGVkIHF1ZXJ5IHNlbGVjdGVkKSAqL31cbiAgICAgICAgICAgICAgICAgIHtpc0dyb3VwZWRRdWVyeSAmJiBjdXJyZW50UXVlcnlHcm91cElkICYmIGdyb3VwcyAmJiBncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0gJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgU2VhcmNoIEFsaWFzXG4gICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IFxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCAhPT0gdW5kZWZpbmVkID8gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggOiAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0luZGV4ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdncm91cC1xdWVyeS1zZWxlY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogY3VycmVudFF1ZXJ5R3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cFF1ZXJ5SW5kZXg6IG5ld0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0uaXRlbXNbbmV3SW5kZXhdPy5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKGdyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXS5pdGVtc1tuZXdJbmRleF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkdyb3VwUXVlcnlDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwUXVlcnlDaGFuZ2UobmV3SW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXS5pdGVtcy5tYXAoKGl0ZW0sIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aXRlbS5jb25maWdJZH0gdmFsdWU9e2lkeH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldFF1ZXJ5RGlzcGxheU5hbWUoaXRlbSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIFJlc3VsdHMgTW9kZSBCdXR0b24gR3JvdXAgLSBBbHdheXMgc2hvdywgcmVnYXJkbGVzcyBvZiBxdWVyeSBjb3VudCAqL31cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBnYXA6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgey8qIFJlc3VsdHMgbGFiZWwgYW5kIGluZm8gYnV0dG9uICovfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGl0bGUyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfTpcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeScgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpfSBjc3M9e2Nzc2BmbGV4LXNocmluazogMDtgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICB7LyogTW9kZSBidXR0b25zICovfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwicmFkaW9ncm91cFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gPyAnY29udGFpbmVkJyA6ICdvdXRsaW5lZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNb2RlID0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGU6IHJlc3VsdHNNb2RlIHx8IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVzdWx0c01vZGVDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlKG5ld01vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake2dldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJyl9OiAke2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKS5zcGxpdCgnXFxuJylbMV0/LnRyaW0oKSB8fCAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZU5ldycpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNNb2RlID0gcmVzdWx0c01vZGUgfHwgU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnYnV0dG9uLW1vZGUtY2hhbmdlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHN3aXRjaGluZyBGUk9NIFwiTmV3XCIgVE8gXCJBZGQgdG9cIiBtb2RlIGFuZCB3ZSBoYXZlIGN1cnJlbnQgcmVzdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2UgdGhlbSB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgYmVmb3JlIGNoYW5naW5nIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzUmVmLmN1cnJlbnQgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzUmVmLmN1cnJlbnQubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFJlY29yZHMgPSByZWNvcmRzUmVmLmN1cnJlbnQgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQWNjdW11bGF0ZWQgPSBhY2N1bXVsYXRlZFJlY29yZHMgfHwgW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSBjdXJyZW50IHJlc3VsdHMgd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkUmVjb3JkcyA9IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmVjb3JkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NhcHR1cmluZy1jdXJyZW50LXJlc3VsdHMtb24tbW9kZS1zd2l0Y2gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRzQ291bnQ6IGN1cnJlbnRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWNvcmRzQ291bnQ6IG1lcmdlZFJlY29yZHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShtZXJnZWRSZWNvcmRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25SZXN1bHRzTW9kZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2UobmV3TW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzJdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVBZGQnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFhY2N1bXVsYXRlZFJlY29yZHMgfHwgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c01vZGUgPSByZXN1bHRzTW9kZSB8fCBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3dpdGNoaW5nIEZST00gXCJOZXdcIiBUTyBcIlJlbW92ZSBmcm9tXCIgbW9kZSBhbmQgd2UgaGF2ZSBjdXJyZW50IHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHRoZW0gd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGJlZm9yZSBjaGFuZ2luZyBtb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChzYW1lIHBhdHRlcm4gYXMgXCJBZGQgdG9cIiBtb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1JlZi5jdXJyZW50ICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1JlZi5jdXJyZW50Lmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSZWNvcmRzID0gcmVjb3Jkc1JlZi5jdXJyZW50IGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0FjY3VtdWxhdGVkID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgY3VycmVudCByZXN1bHRzIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjYXB0dXJpbmctY3VycmVudC1yZXN1bHRzLW9uLW1vZGUtc3dpdGNoLXRvLXJlbW92ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZHNDb3VudDogY3VycmVudFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZENvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKG1lcmdlZFJlY29yZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblJlc3VsdHNNb2RlQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZShuZXdNb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YCR7Z2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzNdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXsoIWFjY3VtdWxhdGVkUmVjb3JkcyB8fCBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEaXNhYmxlZFJlbW92ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVSZW1vdmUnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgaWQ9e2ByZXN1bHRzLW1vZGUtZGVzY3JpcHRpb24tJHtwcm9wcy53aWRnZXRJZH1gfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNyLW9ubHlcIlxuICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGl2ZT1cInBvbGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgcm9sZT1cInN0YXR1c1wiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRJMThuTWVzc2FnZSgnY3JlYXRlTmV3UmVzdWx0cycpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGdldEkxOG5NZXNzYWdlKCdhZGRUb0N1cnJlbnRSZXN1bHRzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICB7ZW5hYmxlZCAmJiBkc0V4aXN0cyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgPFF1ZXJ5VGFza0Zvcm1cbiAgICAgICAgICAgICAgICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkPXtxdWVyeUl0ZW0uY29uZmlnSWR9XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZVJlYWR5PXtkYXRhU291cmNlICE9IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIHNwYXRpYWxGaWx0ZXJFbmFibGVkPXtzcGF0aWFsRmlsdGVyRW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YUFjdGlvbkZpbHRlciA9IHtkYXRhQWN0aW9uRmlsdGVyfVxuICAgICAgICAgICAgICAgICAgICBvbkZvcm1TdWJtaXQ9e2hhbmRsZUZvcm1TdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtpbml0aWFsSW5wdXRWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17b25IYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZD17cXVlcnlJdGVtLnNob3J0SWR9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8RGF0YVNvdXJjZVRpcFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtwcm9wcy53aWRnZXRJZH1cbiAgICAgICAgICAgICAgICB1c2VEYXRhU291cmNlPXtxdWVyeUl0ZW0udXNlRGF0YVNvdXJjZX1cbiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICBvblN0YXR1c0NoYW5nZT17aGFuZGxlU3RhdHVzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvVGFiPlxuICAgICAgICA8VGFiXG4gICAgICAgICAgaWQ9J3Jlc3VsdHMnXG4gICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c1RhYicpfVxuICAgICAgICAgICAgICB7cmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAoe3Jlc3VsdENvdW50fSlcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgfVxuICAgICAgICAgIGRpc2FibGVkPXtyZXN1bHRDb3VudCA9PT0gMH1cbiAgICAgICAgPlxuICAgICAgICAgIHtyZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrX19jb250ZW50Jywge1xuICAgICAgICAgICAgICAgIFtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTXTogaXNJblBvcHBlciAmJiBhY3RpdmVUYWIgPT09ICdyZXN1bHRzJ1xuICAgICAgICAgICAgICB9KX0gXG4gICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCBjbGlja3MgZnJvbSBidWJibGluZyB1cCB3aGVuIFJlc3VsdHMgdGFiIGlzIGFjdGl2ZVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVUYWIgPT09ICdyZXN1bHRzJykge1xuICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza1Jlc3VsdFxuICAgICAgICAgICAgICAgIGtleT17YCR7cXVlcnlJdGVtLmNvbmZpZ0lkfS0ke3F1ZXJ5RXhlY3V0aW9uS2V5UmVmLmN1cnJlbnR9YH1cbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17cHJvcHMud2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtPXtxdWVyeUl0ZW19XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXM9e3F1ZXJ5UGFyYW1SZWYuY3VycmVudH1cbiAgICAgICAgICAgICAgICByZXN1bHRDb3VudD17cmVzdWx0Q291bnR9XG4gICAgICAgICAgICAgICAgbWF4UGVyUGFnZT17KGRhdGFTb3VyY2UgYXMgUXVlcmlhYmxlRGF0YVNvdXJjZSk/LmdldE1heFJlY29yZENvdW50Py4oKX1cbiAgICAgICAgICAgICAgICByZWNvcmRzPXtyZWNvcmRzUmVmLmN1cnJlbnR9XG4gICAgICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtkZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTfVxuICAgICAgICAgICAgICAgIHJ1bnRpbWVab29tVG9TZWxlY3RlZD17bGFzdFJ1bnRpbWVab29tVG9TZWxlY3RlZFJlZi5jdXJyZW50fVxuICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXtyZXN1bHRzTW9kZX1cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e2FjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17b25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgb25OYXZCYWNrPXsoY2xlYXJSZXN1bHRzID0gZmFsc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBuYXZpZ2F0aW9uIGZyb20gUXVlcnlUYXNrUmVzdWx0XG4gICAgICAgICAgICAgICAgICAvLyBJZiBjbGVhclJlc3VsdHMgaXMgdHJ1ZSwgY2xlYXIgZXZlcnl0aGluZyBhbmQgZ28gdG8gcXVlcnkgdGFiXG4gICAgICAgICAgICAgICAgICAvLyBJZiBmYWxzZSwganVzdCBzd2l0Y2ggdG8gcXVlcnkgdGFiIHdpdGhvdXQgY2xlYXJpbmdcbiAgICAgICAgICAgICAgICAgIGlmIChjbGVhclJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBmbGFnIHdoZW4gY2xlYXJpbmdcbiAgICAgICAgICAgICAgICAgICAgbmF2VG9Gb3JtKHRydWUpXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBKdXN0IHN3aXRjaCB0YWJzLCBkb24ndCBjbGVhciByZXN1bHRzXG4gICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgYXMgbWFudWFsIHN3aXRjaCB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gICAgICAgICAgICAgICAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMClcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9UYWI+XG4gICAgICA8L1RhYnM+XG5cbiAgICAgIHsvKiBFcnJvciBNZXNzYWdlcyAqL31cbiAgICAgIHsoc2VsZWN0aW9uRXJyb3IgfHwgem9vbUVycm9yKSAmJiAoXG4gICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogMCAxNnB4O1xuICAgICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgYH0+XG4gICAgICAgICAge3NlbGVjdGlvbkVycm9yICYmIChcbiAgICAgICAgICAgIDxFcnJvck1lc3NhZ2UgXG4gICAgICAgICAgICAgIGVycm9yPXtzZWxlY3Rpb25FcnJvcn0gXG4gICAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0U2VsZWN0aW9uRXJyb3IobnVsbCl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge3pvb21FcnJvciAmJiAoXG4gICAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgICBlcnJvcj17em9vbUVycm9yfSBcbiAgICAgICAgICAgICAgb25EaXNtaXNzPXsoKSA9PiBzZXRab29tRXJyb3IobnVsbCl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIExvYWRpbmcgSW5kaWNhdG9yIC0gb3ZlcmxheXMgb24gdG9wIG9mIHRhYnMgKi99XG4gICAgICB7c3RhZ2UgPT09IDIgJiYgKFxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgei1pbmRleDogMTAwMDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBgfT5cbiAgICAgICAgICA8TG9hZGluZ1Jlc3VsdCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7XG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgSU1TcWxFeHByZXNzaW9uLFxuICB0eXBlIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgdHlwZSBRdWVyeVBhcmFtcyxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSxcbiAgUmVjb3JkU2V0Q2hhbmdlVHlwZSxcbiAgdHlwZSBJbW11dGFibGVBcnJheSxcbiAgZGF0YVNvdXJjZVV0aWxzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgSUZpZWxkSW5mbyB9IGZyb20gJ0Blc3JpL2FyY2dpcy1yZXN0LWZlYXR1cmUtc2VydmljZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIEZpZWxkc1R5cGUsIG1hcEpTQVBJVW5pdFRvRHNVbml0LCBtYXBKU0FQSVNwYXRpYWxSZWxUb0RzU3BhdGlhbFJlbCB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IGdldEZpZWxkSW5mb3NJblBvcHVwQ29udGVudCB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5leHBvcnQgZnVuY3Rpb24gY29tYmluZUZpZWxkcyAocmVzdWx0RGlzcGxheUZpZWxkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPiwgcmVzdWx0VGl0bGVFeHByZXNzaW9uOiBzdHJpbmcsIGlkRmllbGQ/OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGZpZWxkcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIHJlc3VsdERpc3BsYXlGaWVsZHM/LmZvckVhY2goaXRlbSA9PiBmaWVsZHMuYWRkKGl0ZW0pKVxuICBpZiAocmVzdWx0VGl0bGVFeHByZXNzaW9uKSB7XG4gICAgY29uc3QgdGVtcGxhdGVzID0gcmVzdWx0VGl0bGVFeHByZXNzaW9uLm1hdGNoKC9cXHtcXHcqXFx9L2cpXG4gICAgaWYgKHRlbXBsYXRlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgdGVtcGxhdGVzLmZvckVhY2goaXRlbSA9PiBmaWVsZHMuYWRkKGl0ZW0uc3Vic3RyaW5nKDEsIGl0ZW0ubGVuZ3RoIC0gMSkpKVxuICAgIH1cbiAgfVxuICBpZiAoaWRGaWVsZCkge1xuICAgIGZpZWxkcy5hZGQoaWRGaWVsZClcbiAgfVxuICByZXR1cm4gQXJyYXkuZnJvbShmaWVsZHMpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQb3B1cFRlbXBsYXRlIChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4pOiBQcm9taXNlPHsgcG9wdXBUZW1wbGF0ZT86IF9fZXNyaS5Qb3B1cFRlbXBsYXRlLCBkZWZhdWx0UG9wdXBUZW1wbGF0ZT86IF9fZXNyaS5Qb3B1cFRlbXBsYXRlIH0+IHtcbiAgY29uc3QgeyByZXN1bHRGaWVsZHNUeXBlLCByZXN1bHREaXNwbGF5RmllbGRzLCByZXN1bHRUaXRsZUV4cHJlc3Npb24gPSAnJyB9ID0gcXVlcnlJdGVtXG4gIGNvbnN0IGN1cnJlbnRPcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBwb3B1cEluZm8gPSBjdXJyZW50T3JpZ2luRHMuZ2V0UG9wdXBJbmZvKClcblxuICBpZiAocmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzKSB7XG4gICAgbGV0IGZpZWxkczogc3RyaW5nW11cbiAgICBpZiAocmVzdWx0RGlzcGxheUZpZWxkcyA9PSBudWxsKSB7XG4gICAgICBjb25zdCBmaWVsZHNJbkNvbnRlbnQgPSBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQocG9wdXBJbmZvKVxuICAgICAgaWYgKGZpZWxkc0luQ29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHVuaXF1ZUZpZWxkcyA9IG5ldyBTZXQoZmllbGRzSW5Db250ZW50Lm1hcChlbGUgPT4gZWxlLmZpZWxkTmFtZSkpXG4gICAgICAgIGZpZWxkcyA9IEFycmF5LmZyb20odW5pcXVlRmllbGRzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmV0dXJuIGFsbCBmaWVsZHMgYnkgZGVmYXVsdFxuICAgICAgICBjb25zdCBhbGxGaWVsZHNTY2hlbWEgPSBvdXRwdXREUy5nZXRTY2hlbWEoKVxuICAgICAgICBmaWVsZHMgPSBhbGxGaWVsZHNTY2hlbWE/LmZpZWxkcyA/IE9iamVjdC52YWx1ZXMoYWxsRmllbGRzU2NoZW1hLmZpZWxkcykubWFwKGZpZWxkID0+IGZpZWxkLmppbXVOYW1lKSA6IFtdXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpZWxkcyA9IHJlc3VsdERpc3BsYXlGaWVsZHMuYXNNdXRhYmxlKHsgZGVlcDogdHJ1ZSB9KVxuICAgIH1cbiAgICBpZiAocG9wdXBJbmZvKSB7XG4gICAgICBjb25zdCBmaWVsZEluZm9zID0gW11cbiAgICAgIGZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgY29uc3QgZmllbGRJbmZvID0gcG9wdXBJbmZvLmZpZWxkSW5mb3MuZmluZChmaWVsZEluZm8gPT4gZmllbGRJbmZvLmZpZWxkTmFtZSA9PT0gZmllbGQpXG4gICAgICAgIGlmIChmaWVsZEluZm8pIHtcbiAgICAgICAgICBmaWVsZEluZm8udmlzaWJsZSA9IHRydWVcbiAgICAgICAgICBmaWVsZEluZm9zLnB1c2goZmllbGRJbmZvKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpZWxkSW5mb3MucHVzaCh7XG4gICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkLFxuICAgICAgICAgICAgbGFiZWw6IGZpZWxkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgICBmaWVsZEluZm9zLFxuICAgICAgICAgIGNvbnRlbnQ6IFt7XG4gICAgICAgICAgICB0eXBlOiAnZmllbGRzJ1xuICAgICAgICAgIH1dLFxuICAgICAgICAgIHRpdGxlOiByZXN1bHRUaXRsZUV4cHJlc3Npb25cbiAgICAgICAgfVxuICAgICAgfSBhcyBhbnlcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgZmllbGRJbmZvczogZmllbGRzLm1hcChmaWVsZCA9PiAoe1xuICAgICAgICAgIGZpZWxkTmFtZTogZmllbGQsXG4gICAgICAgICAgbGFiZWw6IGZpZWxkXG4gICAgICAgIH0pKSxcbiAgICAgICAgY29udGVudDogW3tcbiAgICAgICAgICB0eXBlOiAnZmllbGRzJ1xuICAgICAgICB9XSxcbiAgICAgICAgdGl0bGU6IHJlc3VsdFRpdGxlRXhwcmVzc2lvblxuICAgICAgfSBhcyBhbnlcbiAgICB9XG4gIH1cbiAgLy8gdGhlIHNvdXJjZSBsYXllciB3aWxsIHByb3ZpZGUgcG9wdXAgaW5mb1xuICBsZXQgbGF5ZXJPYmplY3RcbiAgaWYgKGN1cnJlbnRPcmlnaW5Ecy5sYXllcikge1xuICAgIGxheWVyT2JqZWN0ID0gY3VycmVudE9yaWdpbkRzLmxheWVyXG4gIH0gZWxzZSB7XG4gICAgbGF5ZXJPYmplY3QgPSBhd2FpdCBjdXJyZW50T3JpZ2luRHMuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpXG4gIH1cbiAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgYXdhaXQgbGF5ZXJPYmplY3QubG9hZCgpXG4gIH1cbiAgcmV0dXJuIHsgZGVmYXVsdFBvcHVwVGVtcGxhdGU6IGxheWVyT2JqZWN0Py5hc3NvY2lhdGVkTGF5ZXI/LmRlZmF1bHRQb3B1cFRlbXBsYXRlIHx8IGxheWVyT2JqZWN0Py5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5UGFyYW1zIChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvbixcbiAgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaixcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sXG4gIHBhZ2U6IG51bWJlcixcbiAgcGFnZVNpemU6IG51bWJlclxuKTogUXVlcnlQYXJhbXMge1xuICBjb25zdCBjdXJyZW50UXVlcnlEc0pzb24gPSBvdXRwdXREUy5nZXREYXRhU291cmNlSnNvbigpXG4gIGNvbnN0IGN1cnJlbnRPcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBpc0xvY2FsRHMgPSBjdXJyZW50UXVlcnlEc0pzb24/LmlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlXG4gIGlmIChpc0xvY2FsRHMpIHtcbiAgICBvdXRwdXREUy5zZXRTb3VyY2VSZWNvcmRzKGN1cnJlbnRPcmlnaW5Ecy5nZXRTb3VyY2VSZWNvcmRzKCkpXG4gIH1cblxuICBjb25zdCB7IHVzZUF0dHJpYnV0ZUZpbHRlciwgdXNlU3BhdGlhbEZpbHRlciwgc29ydE9wdGlvbnMsIHJlc3VsdEZpZWxkc1R5cGUsIHJlc3VsdERpc3BsYXlGaWVsZHMsIHJlc3VsdFRpdGxlRXhwcmVzc2lvbiB9ID0gcXVlcnlJdGVtXG4gIGxldCBvdXRwdXRGaWVsZHM6IHN0cmluZ1tdIHwgSW1tdXRhYmxlQXJyYXk8c3RyaW5nPiA9IHJlc3VsdERpc3BsYXlGaWVsZHNcbiAgaWYgKHJlc3VsdERpc3BsYXlGaWVsZHMgPT0gbnVsbCkge1xuICAgIC8vIHJldHVybiBhbGwgZmllbGRzIGJ5IGRlZmF1bHRcbiAgICBjb25zdCBhbGxGaWVsZHNTY2hlbWEgPSBvdXRwdXREUy5nZXRTY2hlbWEoKVxuICAgIG91dHB1dEZpZWxkcyA9IGFsbEZpZWxkc1NjaGVtYT8uZmllbGRzID8gT2JqZWN0LnZhbHVlcyhhbGxGaWVsZHNTY2hlbWEuZmllbGRzKS5tYXAoZmllbGQgPT4gZmllbGQuamltdU5hbWUpIDogW11cbiAgfVxuICBjb25zdCBtZXJnZWRRdWVyeVBhcmFtcyA9IG91dHB1dERTLm1lcmdlUXVlcnlQYXJhbXMoY3VycmVudE9yaWdpbkRzLmdldEN1cnJlbnRRdWVyeVBhcmFtcygpID8/IHt9LCB7XG4gICAgd2hlcmU6ICh1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwcj8uc3FsKSA/IGRhdGFTb3VyY2VVdGlscy5nZXRBcmNHSVNTUUwoc3FsRXhwciwgb3V0cHV0RFMpLnNxbCA6ICcxPTEnLFxuICAgIHNxbEV4cHJlc3Npb246ICh1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwcj8uc3FsKSA/IHNxbEV4cHIgOiBudWxsXG4gIH0gYXMgYW55KVxuXG4gIC8vIGNvbXBvc2UgcXVlcnkgcGFyYW1zIGZvciBxdWVyeVxuICBjb25zdCBxdWVyeVBhcmFtczogRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMgPSB7XG4gICAgLy8gdXJsOiBkcy51cmwsXG4gICAgcmV0dXJuR2VvbWV0cnk6IHRydWUsXG4gICAgcGFnZSxcbiAgICBwYWdlU2l6ZSxcbiAgICAuLi5tZXJnZWRRdWVyeVBhcmFtc1xuICB9XG4gIGlmICh1c2VTcGF0aWFsRmlsdGVyICYmIHNwYXRpYWxGaWx0ZXI/Lmdlb21ldHJ5KSB7XG4gICAgY29uc3QgeyBnZW9tZXRyeSwgcmVsYXRpb24gPSBTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0LCBidWZmZXIgfSA9IHNwYXRpYWxGaWx0ZXJcblxuICAgIGNvbnN0IHNwYXRpYWxRdWVyeVBhcmFtczogRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMgPSB7XG4gICAgICBnZW9tZXRyeVR5cGU6IGRhdGFTb3VyY2VVdGlscy5jaGFuZ2VKU0FQSUdlb21ldHJ5VHlwZVRvUmVzdEFQSUdlb21ldHJ5VHlwZShnZW9tZXRyeS50eXBlKSxcbiAgICAgIGdlb21ldHJ5OiBnZW9tZXRyeS50b0pTT04oKSxcbiAgICAgIHNwYXRpYWxSZWw6IG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsW3JlbGF0aW9uXSxcbiAgICAgIGRpc3RhbmNlOiBidWZmZXI/LmRpc3RhbmNlLFxuICAgICAgdW5pdHM6IGJ1ZmZlcj8udW5pdCA/IG1hcEpTQVBJVW5pdFRvRHNVbml0W2J1ZmZlci51bml0XSA6IHVuZGVmaW5lZFxuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHF1ZXJ5UGFyYW1zLCBzcGF0aWFsUXVlcnlQYXJhbXMpXG4gIH1cblxuICBpZiAoc29ydE9wdGlvbnM/Lmxlbmd0aCA+IDApIHtcbiAgICBPYmplY3QuYXNzaWduKHF1ZXJ5UGFyYW1zLCB7XG4gICAgICBvcmRlckJ5RmllbGRzOiBzb3J0T3B0aW9ucy5tYXAoaXRlbSA9PiBgJHtpdGVtLmppbXVGaWVsZE5hbWV9ICR7aXRlbS5vcmRlcn1gKVxuICAgIH0pXG4gIH1cblxuICBpZiAocmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzKSB7XG4gICAgY29uc3QgZmllbGRzID0gY29tYmluZUZpZWxkcyhvdXRwdXRGaWVsZHMgYXMgYW55LCByZXN1bHRUaXRsZUV4cHJlc3Npb24sIG91dHB1dERTLmdldElkRmllbGQoKSlcbiAgICBPYmplY3QuYXNzaWduKHF1ZXJ5UGFyYW1zLCB7XG4gICAgICBvdXRGaWVsZHM6IGZpZWxkc1xuICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgLy8gdXNlIHBvcHVwIHNldHRpbmdcbiAgICBjb25zdCBwb3B1cEluZm8gPSBjdXJyZW50T3JpZ2luRHMuZ2V0UG9wdXBJbmZvKClcbiAgICAvLyBwb3B1cEluZm8gbWF5IGhhdmUgZXhwcmVzc2lvbnMgaW4gaXRzIGZpZWxkSW5mb3NcbiAgICBjb25zdCBmaWVsZE5hbWVzID0gT2JqZWN0LnZhbHVlcyhjdXJyZW50T3JpZ2luRHMuZ2V0U2NoZW1hKCkuZmllbGRzID8/IHt9KS5tYXAoZiA9PiBmLm5hbWUpXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS1ib29sZWFuLWxpdGVyYWwtY29tcGFyZVxuICAgIGNvbnN0IHZhbGlkRmllbGRJbmZvcyA9IHBvcHVwSW5mbz8uZmllbGRJbmZvcz8uZmlsdGVyKGZpZWxkSW5mbyA9PiBmaWVsZEluZm8udmlzaWJsZSAhPT0gZmFsc2UgJiYgZmllbGROYW1lcy5pbmNsdWRlcyhmaWVsZEluZm8uZmllbGROYW1lKSlcbiAgICBPYmplY3QuYXNzaWduKHF1ZXJ5UGFyYW1zLCB7XG4gICAgICBvdXRGaWVsZHM6IHZhbGlkRmllbGRJbmZvcz8ubWFwKGZpZWxkSW5mbyA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICAgIH0pXG4gIH1cbiAgcmV0dXJuIHF1ZXJ5UGFyYW1zXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlQ291bnRRdWVyeSAoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBxdWVyeVBhcmFtczogUXVlcnlQYXJhbXNcbik6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG91dHB1dERTLmxvYWRDb3VudChxdWVyeVBhcmFtcywgeyB3aWRnZXRJZCwgcmVmcmVzaDogdHJ1ZSB9KVxuICByZXR1cm4gcmVzdWx0ICE9IG51bGwgPyByZXN1bHQgOiAwXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlUXVlcnkgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPixcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHF1ZXJ5UGFyYW1zOiBRdWVyeVBhcmFtc1xuKTogUHJvbWlzZTx7IHJlY29yZHM/OiBEYXRhUmVjb3JkW10sIGZpZWxkcz86IHN0cmluZ1tdIH0+IHtcbiAgY29uc3QgcG9wdXBJbmZvID0gb3V0cHV0RFMuZ2V0UG9wdXBJbmZvKClcblxuICBjb25zdCBsYXllckRlZmluaXRpb24gPSBvdXRwdXREUy5nZXRMYXllckRlZmluaXRpb24oKVxuICBjb25zdCBnZXREZWZhdWx0RmllbGRJbmZvcyA9ICgpID0+XG4gICAgW1xuICAgICAgeyBmaWVsZE5hbWU6IGxheWVyRGVmaW5pdGlvbj8ub2JqZWN0SWRGaWVsZCA/PyAnb2JqZWN0aWQnLCBsYWJlbDogJ09CSkVDVElEJywgdG9vbHRpcDogJycsIHZpc2libGU6IHRydWUgfVxuICAgIF0gYXMgSUZpZWxkSW5mb1tdXG4gIGNvbnN0IGZpZWxkSW5mb3MgPSAoKGZpZWxkSW5mb3MpID0+IChmaWVsZEluZm9zLmxlbmd0aCA/IGZpZWxkSW5mb3MgOiBnZXREZWZhdWx0RmllbGRJbmZvcygpKSkoXG4gICAgKHBvcHVwSW5mbz8uZmllbGRJbmZvcyB8fCBbXSkuZmlsdGVyKChpKSA9PiBpLnZpc2libGUpXG4gIClcbiAgLy8gY29uc3QgZmllbGRzID0gb3V0cHV0RFMuZ2V0U2NoZW1hKCk/LmZpZWxkc1xuICAvLyBsZXQgc2VsZWN0ZWRGaWVsZE5hbWVzXG4gIC8vIGlmIChxdWVyeUl0ZW0ucmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzKSB7XG4gIC8vICAgc2VsZWN0ZWRGaWVsZE5hbWVzID0gW10uY29uY2F0KHF1ZXJ5SXRlbS5yZXN1bHREaXNwbGF5RmllbGRzLCBxdWVyeUl0ZW0ucmVzdWx0VGl0bGVGaWVsZHMpXG4gIC8vIH0gZWxzZSB7XG4gIC8vICAgc2VsZWN0ZWRGaWVsZE5hbWVzID0gZmllbGRJbmZvcy5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgLy8gfVxuICAvLyBjb25zdCBzZWxlY3RlZEZpZWxkSmltdU5hbWVzID0gZmllbGRzXG4gIC8vICAgPyBPYmplY3Qua2V5cyhmaWVsZHMpLmZpbHRlcigoamltdU5hbWUpID0+IHNlbGVjdGVkRmllbGROYW1lcy5pbmNsdWRlcyhmaWVsZHNbamltdU5hbWVdLm5hbWUpKVxuICAvLyAgIDogW11cbiAgLy8gb3V0cHV0RFMuc2V0U2VsZWN0ZWRGaWVsZHMoc2VsZWN0ZWRGaWVsZEppbXVOYW1lcylcbiAgbGV0IHJlY29yZHMgPSBhd2FpdCBvdXRwdXREUy5sb2FkKHF1ZXJ5UGFyYW1zLCB7IHdpZGdldElkIH0pXG4gIGlmIChyZWNvcmRzID09IG51bGwpIHtcbiAgICByZWNvcmRzID0gW11cbiAgfVxuICBjb25zdCBvcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBsYXllck9iamVjdCA9IGF3YWl0IGdldExheWVyT2JqZWN0KG9yaWdpbkRzKVxuICByZWNvcmRzLmZvckVhY2goKHJlY29yZCkgPT4ge1xuICAgIGNvbnN0IGZlYXR1cmUgPSAocmVjb3JkIGFzIGFueSkuZmVhdHVyZVxuICAgIGlmIChsYXllck9iamVjdCkge1xuICAgICAgZmVhdHVyZS5zb3VyY2VMYXllciA9IChsYXllck9iamVjdCBhcyBhbnkpLmFzc29jaWF0ZWRMYXllciB8fCBsYXllck9iamVjdFxuICAgIH1cbiAgICBmZWF0dXJlLmxheWVyID0gZmVhdHVyZS5zb3VyY2VMYXllclxuICB9KVxuICBjb25zdCBxdWVyeVJlc3VsdCA9IHtcbiAgICByZWNvcmRzLFxuICAgIGZpZWxkczogZmllbGRJbmZvcy5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgfVxuXG4gIC8vIHB1Ymxpc2ggbWVzc2FnZVxuICBjb25zdCBkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSA9IG5ldyBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgUmVjb3JkU2V0Q2hhbmdlVHlwZS5DcmVhdGVVcGRhdGUsIFt7XG4gICAgcmVjb3Jkczogb3V0cHV0RFMuZ2V0QWxsTG9hZGVkUmVjb3JkcygpLFxuICAgIGZpZWxkczogcXVlcnlSZXN1bHQuZmllbGRzLFxuICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgIG5hbWU6IG91dHB1dERTLmlkLFxuICAgIGxhYmVsOiBvdXRwdXREUy5nZXRMYWJlbCgpXG4gIH1dKVxuICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKVxuXG4gIHJldHVybiBxdWVyeVJlc3VsdFxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRMYXllck9iamVjdCAoZGF0YVNvdXJjZTogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSkge1xuICBjb25zdCBsYXllck9iamVjdCA9IGF3YWl0IGRhdGFTb3VyY2UuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpIGFzIF9fZXNyaS5MYXllclxuICAvLyBsYXllck9iamVjdCBtYXkgYmUgdW5kZWZpbmVkIGlmIHRoZSBkYXRhIHNvdXJjZSBpcyBhZGRlZCBieSBVUkxcbiAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgYXdhaXQgbGF5ZXJPYmplY3QubG9hZCgpXG4gIH1cbiAgcmV0dXJuIGxheWVyT2JqZWN0XG59XG5cblxuIiwiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgcmVzdWx0cyBhY2N1bXVsYXRpb24gaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogSGFuZGxlcyBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMgZm9yIGFjY3VtdWxhdGluZyBxdWVyeSByZXN1bHRzLlxuICovXG5cbmltcG9ydCB0eXBlIHsgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQsIERhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBEYXRhU291cmNlTWFuYWdlciwgRGF0YVNvdXJjZVN0YXR1cywgTWVzc2FnZU1hbmFnZXIsIERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLCBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogR2VuZXJhdGVzIGEgY29tcG9zaXRlIGtleSBmb3IgYSByZWNvcmQgdGhhdCBpbmNsdWRlcyBib3RoIG9yaWdpbiBkYXRhIHNvdXJjZSBJRCBhbmQgb2JqZWN0SWQuXG4gKiBUaGlzIGVuc3VyZXMgdW5pcXVlbmVzcyBhY3Jvc3MgZGlmZmVyZW50IGxheWVycyB0aGF0IG1heSBoYXZlIHRoZSBzYW1lIG9iamVjdElkLlxuICogXG4gKiBAcGFyYW0gcmVjb3JkIC0gVGhlIGZlYXR1cmUgZGF0YSByZWNvcmRcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgY29udGFpbmluZyB0aGUgcmVjb3JkXG4gKiBAcmV0dXJucyBDb21wb3NpdGUga2V5IHN0cmluZzogYCR7b3JpZ2luRFNJZH1fJHtvYmplY3RJZH1gXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWNvcmRLZXkoXG4gIHJlY29yZDogRmVhdHVyZURhdGFSZWNvcmQsXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiBzdHJpbmcge1xuICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIGNvbnN0IG9yaWdpbkRTSWQgPSBvcmlnaW5EUz8uaWQgfHwgb3V0cHV0RFMuaWQgLy8gRmFsbGJhY2sgdG8gb3V0cHV0RFMgaWYgbm8gb3JpZ2luXG4gIGNvbnN0IG9iamVjdElkID0gcmVjb3JkLmdldElkKClcbiAgY29uc3Qga2V5ID0gYCR7b3JpZ2luRFNJZH1fJHtvYmplY3RJZH1gXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlY29yZC1rZXktZ2VuZXJhdGVkJyxcbiAgICBvcmlnaW5EU0lkLFxuICAgIG9iamVjdElkLFxuICAgIGtleSxcbiAgICBoYXNPcmlnaW5EUzogISFvcmlnaW5EU1xuICB9KVxuICBcbiAgcmV0dXJuIGtleVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZSBmb3Igc3RvcmluZyBtZXJnZWQgcXVlcnkgcmVzdWx0cy5cbiAqIFRoaXMgZGF0YSBzb3VyY2UgaXMgd2lkZ2V0LWxldmVsIGFuZCBwZXJzaXN0cyBhY3Jvc3MgbXVsdGlwbGUgcXVlcmllcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG9yaWdpbkRTIC0gVGhlIG9yaWdpbiBkYXRhIHNvdXJjZSB0byB1c2UgYXMgdGhlIGJhc2VcbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFjY3VtdWxhdGVkUmVzdWx0c0RhdGFTb3VyY2UoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiBQcm9taXNlPEZlYXR1cmVMYXllckRhdGFTb3VyY2U+IHtcbiAgY29uc3QgYWNjdW11bGF0ZWREU0lkID0gYCR7d2lkZ2V0SWR9X2FjY3VtdWxhdGVkX3Jlc3VsdHNgXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2NyZWF0aW5nLWFjY3VtdWxhdGVkLWRzJyxcbiAgICB3aWRnZXRJZCxcbiAgICBhY2N1bXVsYXRlZERTSWQsXG4gICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWRcbiAgfSlcbiAgXG4gIC8vIENoZWNrIGlmIGRhdGEgc291cmNlIGFscmVhZHkgZXhpc3RzXG4gIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgbGV0IGFjY3VtdWxhdGVkRFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShhY2N1bXVsYXRlZERTSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgXG4gIGlmIChhY2N1bXVsYXRlZERTKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2FjY3VtdWxhdGVkLWRzLWFscmVhZHktZXhpc3RzJyxcbiAgICAgIGFjY3VtdWxhdGVkRFNJZFxuICAgIH0pXG4gICAgcmV0dXJuIGFjY3VtdWxhdGVkRFNcbiAgfVxuICBcbiAgLy8gR2V0IG9yaWdpbiBkYXRhIHNvdXJjZSBKU09OIHRvIGNyZWF0ZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAgY29uc3Qgb3JpZ2luRGF0YVNvdXJjZUpzb24gPSBvcmlnaW5EUy5nZXREYXRhU291cmNlSnNvbigpXG4gIFxuICAvLyBDcmVhdGUgb3V0cHV0IGRhdGEgc291cmNlIEpTT04gc2ltaWxhciB0byBob3cgcXVlcnkgaXRlbXMgY3JlYXRlIG91dHB1dCBEU1xuICBjb25zdCBvdXRwdXREYXRhU291cmNlSnNvbiA9IHtcbiAgICBpZDogYWNjdW11bGF0ZWREU0lkLFxuICAgIGxhYmVsOiAnQWNjdW11bGF0ZWQgUmVzdWx0cycsXG4gICAgdHlwZTogb3JpZ2luRGF0YVNvdXJjZUpzb24/LnR5cGUsXG4gICAgZ2VvbWV0cnlUeXBlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8uZ2VvbWV0cnlUeXBlLFxuICAgIHVybDogb3JpZ2luRGF0YVNvdXJjZUpzb24/LnVybCxcbiAgICBpdGVtSWQ6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5pdGVtSWQsXG4gICAgcG9ydGFsVXJsOiBvcmlnaW5EYXRhU291cmNlSnNvbj8ucG9ydGFsVXJsLFxuICAgIG9yaWdpbkRhdGFTb3VyY2VzOiBbe1xuICAgICAgZGF0YVNvdXJjZUlkOiBvcmlnaW5EUy5pZCxcbiAgICAgIG1haW5EYXRhU291cmNlSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgcm9vdERhdGFTb3VyY2VJZDogb3JpZ2luRFMuaWRcbiAgICB9XSxcbiAgICBsYXllcklkOiBvcmlnaW5EYXRhU291cmNlSnNvbj8ubGF5ZXJJZCxcbiAgICBpc0RhdGFJbkRhdGFTb3VyY2VJbnN0YW5jZTogb3JpZ2luRGF0YVNvdXJjZUpzb24/LmlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlLFxuICAgIGlzT3V0cHV0RnJvbVdpZGdldDogdHJ1ZVxuICB9XG4gIFxuICAvLyBDcmVhdGUgdGhlIGRhdGEgc291cmNlIHVzaW5nIERhdGFTb3VyY2VNYW5hZ2VyXG4gIC8vIE5vdGU6IFRoaXMgZm9sbG93cyB0aGUgcGF0dGVybiBmcm9tIHNldHRpbmcudHN4IGZvciBjcmVhdGluZyBvdXRwdXQgZGF0YSBzb3VyY2VzXG4gIGFjY3VtdWxhdGVkRFMgPSBkc01hbmFnZXIuY3JlYXRlRGF0YVNvdXJjZUJ5RGF0YVNvdXJjZUpzb24ob3V0cHV0RGF0YVNvdXJjZUpzb24pIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgXG4gIC8vIFNldCBpbml0aWFsIHN0YXR1c1xuICBhY2N1bXVsYXRlZERTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBhY2N1bXVsYXRlZERTLnNldENvdW50U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2FjY3VtdWxhdGVkLWRzLWNyZWF0ZWQnLFxuICAgIGFjY3VtdWxhdGVkRFNJZCxcbiAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICBzdGF0dXM6IGFjY3VtdWxhdGVkRFMuZ2V0U3RhdHVzKClcbiAgfSlcbiAgXG4gIHJldHVybiBhY2N1bXVsYXRlZERTXG59XG5cbi8qKlxuICogTWVyZ2VzIG5ldyBxdWVyeSByZXN1bHRzIHdpdGggZXhpc3RpbmcgcmVjb3Jkcy5cbiAqIERlZHVwbGljYXRlcyByZWNvcmRzIHVzaW5nIGNvbXBvc2l0ZSBrZXlzIChvcmlnaW5EU0lkX29iamVjdElkKS5cbiAqIFxuICogVGhpcyBmdW5jdGlvbiBtZXJnZXMgbmV3IHJlY29yZHMgd2l0aCBleGlzdGluZyByZWNvcmRzIHRoYXQgd2VyZSBjYXB0dXJlZFxuICogYmVmb3JlIHRoZSBxdWVyeSBleGVjdXRlZC4gVGhlIGNhbGxlciBpcyByZXNwb25zaWJsZSBmb3Igc3RvcmluZyB0aGUgbWVyZ2VkXG4gKiByZWNvcmRzICh0eXBpY2FsbHkgaW4gcmVjb3Jkc1JlZiBvciBzdGF0ZSkuXG4gKiBcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIGtleSBnZW5lcmF0aW9uKVxuICogQHBhcmFtIG5ld1JlY29yZHMgLSBOZXcgcmVjb3JkcyB0byBtZXJnZSBpblxuICogQHBhcmFtIGV4aXN0aW5nUmVjb3JkcyAtIEV4aXN0aW5nIHJlY29yZHMgY2FwdHVyZWQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbiAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIGVtcHR5IGFycmF5KVxuICogQHJldHVybnMgQXJyYXkgb2YgYWxsIG1lcmdlZCByZWNvcmRzIChleGlzdGluZyArIG5ldyB1bmlxdWUgcmVjb3JkcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIG5ld1JlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIGV4aXN0aW5nUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4pOiBGZWF0dXJlRGF0YVJlY29yZFtdIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdtZXJnaW5nLXJlc3VsdHMtc3RhcnQnLFxuICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgIGV4aXN0aW5nUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHMubGVuZ3RoLFxuICAgIG5ld1JlY29yZHNDb3VudDogbmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIEJ1aWxkIFNldCBvZiBleGlzdGluZyByZWNvcmQga2V5cyBmb3IgZmFzdCBsb29rdXBcbiAgY29uc3QgZXhpc3RpbmdLZXlzID0gbmV3IFNldChcbiAgICBleGlzdGluZ1JlY29yZHMubWFwKHJlY29yZCA9PiBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUykpXG4gIClcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnZXhpc3RpbmctcmVjb3Jkcy1jaGVjaycsXG4gICAgZXhpc3RpbmdSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgZXhpc3RpbmdLZXlzQ291bnQ6IGV4aXN0aW5nS2V5cy5zaXplXG4gIH0pXG4gIFxuICAvLyBGaWx0ZXIgbmV3IHJlY29yZHMgdG8gb25seSBpbmNsdWRlIHRob3NlIG5vdCBhbHJlYWR5IGluIG91dHB1dCBEU1xuICBjb25zdCB1bmlxdWVOZXdSZWNvcmRzID0gbmV3UmVjb3Jkcy5maWx0ZXIocmVjb3JkID0+IHtcbiAgICBjb25zdCBrZXkgPSBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUylcbiAgICBjb25zdCBpc0R1cGxpY2F0ZSA9IGV4aXN0aW5nS2V5cy5oYXMoa2V5KVxuICAgIFxuICAgIGlmIChpc0R1cGxpY2F0ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnZHVwbGljYXRlLXJlY29yZC1za2lwcGVkJyxcbiAgICAgICAga2V5LFxuICAgICAgICBvYmplY3RJZDogcmVjb3JkLmdldElkKClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIHJldHVybiAhaXNEdXBsaWNhdGVcbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnZGVkdXBsaWNhdGlvbi1jb21wbGV0ZScsXG4gICAgbmV3UmVjb3Jkc0NvdW50OiBuZXdSZWNvcmRzLmxlbmd0aCxcbiAgICB1bmlxdWVOZXdSZWNvcmRzQ291bnQ6IHVuaXF1ZU5ld1JlY29yZHMubGVuZ3RoLFxuICAgIGR1cGxpY2F0ZXNTa2lwcGVkOiBuZXdSZWNvcmRzLmxlbmd0aCAtIHVuaXF1ZU5ld1JlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBNZXJnZSByZWNvcmRzXG4gIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBbLi4uZXhpc3RpbmdSZWNvcmRzLCAuLi51bmlxdWVOZXdSZWNvcmRzXVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdtZXJnZS1jb21wbGV0ZScsXG4gICAgdG90YWxSZWNvcmRzQWZ0ZXJNZXJnZTogbWVyZ2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgZXhpc3RpbmdDb3VudDogZXhpc3RpbmdSZWNvcmRzLmxlbmd0aCxcbiAgICBuZXdVbmlxdWVDb3VudDogdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIHJldHVybiBtZXJnZWRSZWNvcmRzXG59XG5cbi8qKlxuICogUmVtb3ZlcyBtYXRjaGluZyByZWNvcmRzIGZyb20gd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gKiBNYXRjaGVzIHJlY29yZHMgdXNpbmcgY29tcG9zaXRlIGtleXMgKG9yaWdpbkRTSWRfb2JqZWN0SWQpLlxuICogXG4gKiBUaGlzIGZ1bmN0aW9uIHJlbW92ZXMgcmVjb3JkcyBmcm9tIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgdGhhdCB3ZXJlIGNhcHR1cmVkXG4gKiBiZWZvcmUgdGhlIHF1ZXJ5IGV4ZWN1dGVkLiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciBzdG9yaW5nIHRoZSByZW1haW5pbmdcbiAqIHJlY29yZHMgKHR5cGljYWxseSBpbiByZWNvcmRzUmVmIG9yIHN0YXRlKS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKiBAcGFyYW0gcmVjb3Jkc1RvUmVtb3ZlIC0gUmVjb3JkcyB0byByZW1vdmUgKGZyb20gcXVlcnkgcmVzdWx0cylcbiAqIEBwYXJhbSBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3JkcyAtIEV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgY2FwdHVyZWQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbiAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIGVtcHR5IGFycmF5KVxuICogQHJldHVybnMgQXJyYXkgb2YgcmVtYWluaW5nIHJlY29yZHMgYWZ0ZXIgcmVtb3ZhbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHJlY29yZHNUb1JlbW92ZTogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuKTogRmVhdHVyZURhdGFSZWNvcmRbXSB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZpbmctcmVzdWx0cy1zdGFydCcsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBJZiBubyBhY2N1bXVsYXRlZCByZWNvcmRzLCBub3RoaW5nIHRvIHJlbW92ZVxuICBpZiAoZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLWFjY3VtdWxhdGVkLXJlY29yZHMtdG8tcmVtb3ZlJyxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkXG4gICAgfSlcbiAgICByZXR1cm4gW11cbiAgfVxuICBcbiAgLy8gSWYgbm8gcmVjb3JkcyB0byByZW1vdmUsIHJldHVybiBleGlzdGluZyByZWNvcmRzIHVuY2hhbmdlZFxuICBpZiAocmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICduby1yZWNvcmRzLXRvLXJlbW92ZScsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgIH0pXG4gICAgcmV0dXJuIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzXG4gIH1cbiAgXG4gIC8vIEJ1aWxkIFNldCBvZiBrZXlzIHRvIHJlbW92ZSBmb3IgZmFzdCBsb29rdXBcbiAgY29uc3QgcmVtb3ZlS2V5cyA9IG5ldyBTZXQoXG4gICAgcmVjb3Jkc1RvUmVtb3ZlLm1hcChyZWNvcmQgPT4gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpKVxuICApXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92ZS1rZXlzLWJ1aWx0JyxcbiAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgcmVtb3ZlS2V5c0NvdW50OiByZW1vdmVLZXlzLnNpemVcbiAgfSlcbiAgXG4gIC8vIEZpbHRlciBvdXQgcmVjb3JkcyB0aGF0IG1hdGNoIGtleXMgdG8gcmVtb3ZlXG4gIGNvbnN0IHJlbWFpbmluZ1JlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICBjb25zdCByZW1vdmVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gIFxuICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgY29uc3Qga2V5ID0gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpXG4gICAgY29uc3Qgc2hvdWxkUmVtb3ZlID0gcmVtb3ZlS2V5cy5oYXMoa2V5KVxuICAgIFxuICAgIGlmIChzaG91bGRSZW1vdmUpIHtcbiAgICAgIHJlbW92ZWRSZWNvcmRzLnB1c2gocmVjb3JkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVjb3JkLW1hcmtlZC1mb3ItcmVtb3ZhbCcsXG4gICAgICAgIGtleSxcbiAgICAgICAgb2JqZWN0SWQ6IHJlY29yZC5nZXRJZCgpLFxuICAgICAgICBvcmlnaW5EU0lkOiAocmVjb3JkLmdldERhdGFTb3VyY2U/LigpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UpPy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0/LmlkIHx8ICd1bmtub3duJ1xuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtYWluaW5nUmVjb3Jkcy5wdXNoKHJlY29yZClcbiAgICB9XG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92YWwtY29tcGxldGUnLFxuICAgIHJlY29yZHNSZW1vdmVkOiByZW1vdmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICBtYXRjaGVkUmVjb3Jkc0NvdW50OiByZW1vdmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgdW5tYXRjaGVkUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoIC0gcmVtb3ZlZFJlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICByZXR1cm4gcmVtYWluaW5nUmVjb3Jkc1xufVxuXG4vKipcbiAqIFJlbW92ZXMgcmVjb3JkcyBmcm9tIG9yaWdpbiBkYXRhIHNvdXJjZSBzZWxlY3Rpb25zLlxuICogR3JvdXBzIHJlY29yZHMgYnkgdGhlaXIgb3JpZ2luIGRhdGEgc291cmNlIGFuZCB1cGRhdGVzIGVhY2ggb3JpZ2luIERTJ3Mgc2VsZWN0aW9uIHNlcGFyYXRlbHkuXG4gKiBUaGlzIGVuc3VyZXMgbWFwIHNlbGVjdGlvbiBpcyB1cGRhdGVkIGNvcnJlY3RseSB3aGVuIHJlY29yZHMgY29tZSBmcm9tIG11bHRpcGxlIG9yaWdpbiBsYXllcnMuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSUQgZm9yIHB1Ymxpc2hpbmcgbWVzc2FnZXNcbiAqIEBwYXJhbSByZWNvcmRzVG9SZW1vdmUgLSBSZWNvcmRzIHRvIHJlbW92ZSBmcm9tIHNlbGVjdGlvblxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZHNUb1JlbW92ZTogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IHZvaWQge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92aW5nLXJlY29yZHMtZnJvbS1vcmlnaW4tc2VsZWN0aW9ucy1zdGFydCcsXG4gICAgd2lkZ2V0SWQsXG4gICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWRcbiAgfSlcbiAgXG4gIGlmIChyZWNvcmRzVG9SZW1vdmUubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLXJlY29yZHMtdG8tcmVtb3ZlLWZyb20tc2VsZWN0aW9uJyxcbiAgICAgIHdpZGdldElkXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuICBcbiAgLy8gR3JvdXAgcmVjb3JkcyBieSB0aGVpciBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+KClcbiAgXG4gIHJlY29yZHNUb1JlbW92ZS5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgY29uc3QgcmVjb3JkRFMgPSByZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgXG4gICAgaWYgKHJlY29yZERTKSB7XG4gICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrOiB0cnkgdG8gZ2V0IG9yaWdpbiBmcm9tIG91dHB1dERTXG4gICAgICBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IG51bGxcbiAgICB9XG4gICAgXG4gICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgIH1cbiAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykhLnB1c2gocmVjb3JkKVxuICAgIH1cbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVjb3Jkcy1ncm91cGVkLWJ5LW9yaWdpbicsXG4gICAgd2lkZ2V0SWQsXG4gICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZSxcbiAgICByZWNvcmRzQnlPcmlnaW5EUzogQXJyYXkuZnJvbShyZWNvcmRzQnlPcmlnaW5EUy5lbnRyaWVzKCkpLm1hcCgoW2RzLCByZWNvcmRzXSkgPT4gKHtcbiAgICAgIG9yaWdpbkRTSWQ6IGRzLmlkLFxuICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHMubGVuZ3RoXG4gICAgfSkpXG4gIH0pXG4gIFxuICAvLyBGb3IgZWFjaCBvcmlnaW4gRFMsIGdldCBjdXJyZW50IHNlbGVjdGlvbiBhbmQgcmVtb3ZlIG1hdGNoaW5nIHJlY29yZHNcbiAgcmVjb3Jkc0J5T3JpZ2luRFMuZm9yRWFjaCgocmVjb3Jkc1RvUmVtb3ZlRm9yT3JpZ2luLCBvcmlnaW5EUykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgY3VycmVudCBzZWxlY3RlZCByZWNvcmRzIGZyb20gdGhpcyBvcmlnaW4gRFNcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkSWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdwcm9jZXNzaW5nLW9yaWdpbi1kcy1yZW1vdmFsJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBjdXJyZW50U2VsZWN0ZWRDb3VudDogY3VycmVudFNlbGVjdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4ubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBCdWlsZCBTZXQgb2YgSURzIHRvIHJlbW92ZSBmb3IgZmFzdCBsb29rdXBcbiAgICAgIGNvbnN0IGlkc1RvUmVtb3ZlID0gbmV3IFNldChcbiAgICAgICAgcmVjb3Jkc1RvUmVtb3ZlRm9yT3JpZ2luLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICApXG4gICAgICBcbiAgICAgIC8vIEZpbHRlciBvdXQgcmVjb3JkcyB0aGF0IG1hdGNoIElEcyB0byByZW1vdmVcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1JlY29yZHMgPSBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZC5nZXRJZCgpXG4gICAgICAgIHJldHVybiAhaWRzVG9SZW1vdmUuaGFzKHJlY29yZElkKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgcmVtYWluaW5nSWRzID0gcmVtYWluaW5nUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdvcmlnaW4tZHMtcmVtb3ZhbC1maWx0ZXJlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgcmVtb3ZlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCAtIHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICByZW1haW5pbmdDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBzZWxlY3Rpb24gaW4gb3JpZ2luIERTXG4gICAgICBpZiAodHlwZW9mIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVtYWluaW5nSWRzLCByZW1haW5pbmdSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFB1Ymxpc2ggc2VsZWN0aW9uIGNoYW5nZSBtZXNzYWdlIGZvciB0aGlzIG9yaWdpbiBEU1xuICAgICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVtYWluaW5nUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLCBbb3JpZ2luRFMuaWRdKVxuICAgICAgKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdvcmlnaW4tZHMtc2VsZWN0aW9uLXVwZGF0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHJlbWFpbmluZ1JlY29yZHNDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG1lc3NhZ2VQdWJsaXNoZWQ6IHRydWVcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1yZW1vdmFsLWVycm9yJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgfSlcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlbW92aW5nIHJlY29yZHMgZnJvbSBvcmlnaW4gRFMgJHtvcmlnaW5EUy5pZH06YCwgZXJyb3IpXG4gICAgfVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmluZy1yZWNvcmRzLWZyb20tb3JpZ2luLXNlbGVjdGlvbnMtY29tcGxldGUnLFxuICAgIHdpZGdldElkLFxuICAgIG9yaWdpbkRTQ291bnQ6IHJlY29yZHNCeU9yaWdpbkRTLnNpemUsXG4gICAgdG90YWxSZWNvcmRzUmVtb3ZlZDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aFxuICB9KVxufVxuXG4vKipcbiAqIENsZWFycyBhbGwgcmVjb3JkcyBmcm9tIHRoZSBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlLlxuICogXG4gKiBAcGFyYW0gYWNjdW11bGF0ZWREUyAtIFRoZSBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlIHRvIGNsZWFyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckFjY3VtdWxhdGVkUmVzdWx0cyhcbiAgYWNjdW11bGF0ZWREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuKTogdm9pZCB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnY2xlYXJpbmctYWNjdW11bGF0ZWQtcmVzdWx0cycsXG4gICAgYWNjdW11bGF0ZWREU0lkOiBhY2N1bXVsYXRlZERTLmlkXG4gIH0pXG4gIFxuICAvLyBTZXQgc3RhdHVzIHRvIE5vdFJlYWR5IHRvIGNsZWFyIHJlY29yZHNcbiAgYWNjdW11bGF0ZWREUy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgYWNjdW11bGF0ZWREUy5zZXRDb3VudFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBcbiAgLy8gQ2xlYXIgYW55IGxvYWRlZCByZWNvcmRzIGlmIHBvc3NpYmxlXG4gIC8vIE5vdGU6IE1heSBuZWVkIHRvIHVzZSBEYXRhU291cmNlTWFuYWdlciBtZXRob2RzIGRlcGVuZGluZyBvbiBFeEIgQVBJXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2FjY3VtdWxhdGVkLXJlc3VsdHMtY2xlYXJlZCcsXG4gICAgYWNjdW11bGF0ZWREU0lkOiBhY2N1bXVsYXRlZERTLmlkXG4gIH0pXG59XG5cbiIsIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGZlYXR1cmUgc2VsZWN0aW9uIGluIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIENvbnNvbGlkYXRlcyByZXBlYXRlZCBzZWxlY3Rpb24gbG9naWMgdG8gZm9sbG93IERSWSBwcmluY2lwbGVzLlxuICovXG5cbmltcG9ydCB0eXBlIHsgRGF0YVNvdXJjZSwgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlIH0gZnJvbSAnamltdS1jb3JlJ1xuXG4vKipcbiAqIEdldHMgdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSBmcm9tIGFuIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEByZXR1cm5zIFRoZSBvcmlnaW4gZGF0YSBzb3VyY2UsIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JpZ2luRGF0YVNvdXJjZShcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkXG4pOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCB7XG4gIGlmICghb3V0cHV0RFMpIHJldHVybiBudWxsXG4gIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VzID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICByZXR1cm4gb3JpZ2luRGF0YVNvdXJjZXM/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IG51bGxcbn1cblxuLyoqXG4gKiBTZWxlY3RzIHJlY29yZHMgaW4gYm90aCB0aGUgb3JpZ2luIGRhdGEgc291cmNlIGFuZCBvdXRwdXQgZGF0YSBzb3VyY2UuXG4gKiBUaGlzIGlzIHRoZSBzdGFuZGFyZCBwYXR0ZXJuIHVzZWQgdGhyb3VnaG91dCB0aGUgd2lkZ2V0IGZvciBzZWxlY3Rpb24uXG4gKiBcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiByZWNvcmQgSURzIHRvIHNlbGVjdFxuICogQHBhcmFtIHJlY29yZHMgLSBPcHRpb25hbCBhcnJheSBvZiBGZWF0dXJlRGF0YVJlY29yZCBvYmplY3RzIGZvciBwcm9wZXIgaGlnaGxpZ2h0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICByZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuKTogdm9pZCB7XG4gIGlmICghb3V0cHV0RFMpIHJldHVyblxuICBcbiAgY29uc3Qgb3JpZ2luRFMgPSBnZXRPcmlnaW5EYXRhU291cmNlKG91dHB1dERTKVxuICBcbiAgLy8gU2VsZWN0IGluIG9yaWdpbiBkYXRhIHNvdXJjZSAodGhlIGFjdHVhbCBsYXllcilcbiAgaWYgKG9yaWdpbkRTICYmIHR5cGVvZiBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCByZWNvcmRzKVxuICB9XG4gIFxuICAvLyBBbHNvIHNlbGVjdCBpbiBvdXRwdXREUyBmb3Igd2lkZ2V0J3MgaW50ZXJuYWwgc3RhdGVcbiAgaWYgKHR5cGVvZiBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCByZWNvcmRzKVxuICB9XG59XG5cbi8qKlxuICogQ2xlYXJzIHNlbGVjdGlvbiBpbiBib3RoIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWRcbik6IHZvaWQge1xuICBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhvdXRwdXREUywgW10pXG59XG5cbi8qKlxuICogUHVibGlzaGVzIGEgc2VsZWN0aW9uIGNoYW5nZSBtZXNzYWdlIGZvciB0aGUgZ2l2ZW4gcmVjb3JkcyBhbmQgZGF0YSBzb3VyY2VzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgKGVtcHR5IGFycmF5IHRvIGNsZWFyKVxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIGFsc29QdWJsaXNoVG9PdXRwdXREUyAtIFdoZXRoZXIgdG8gYWxzbyBwdWJsaXNoIGEgbWVzc2FnZSBmb3Igb3V0cHV0RFMgKGRlZmF1bHQ6IGZhbHNlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2UoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgYWxzb1B1Ymxpc2hUb091dHB1dERTOiBib29sZWFuID0gZmFsc2Vcbik6IHZvaWQge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgXG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgXG4gIGlmIChvcmlnaW5EUykge1xuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBbb3JpZ2luRFMuaWRdKVxuICAgIClcbiAgfSBlbHNlIGlmIChhbHNvUHVibGlzaFRvT3V0cHV0RFMpIHtcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3JkcywgW291dHB1dERTLmlkXSlcbiAgICApXG4gIH1cbiAgXG4gIC8vIE9wdGlvbmFsbHkgcHVibGlzaCB0byBvdXRwdXREUyBhcyB3ZWxsIChmb3Igc29tZSBlZGdlIGNhc2VzKVxuICBpZiAoYWxzb1B1Ymxpc2hUb091dHB1dERTICYmIG9yaWdpbkRTKSB7XG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIFtvdXRwdXREUy5pZF0pXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogU2VsZWN0cyByZWNvcmRzIGFuZCBwdWJsaXNoZXMgdGhlIHNlbGVjdGlvbiBtZXNzYWdlIGluIG9uZSBjYWxsLlxuICogVGhpcyBpcyB0aGUgbW9zdCBjb21tb24gcGF0dGVybiAtIHNlbGVjdGluZyByZWNvcmRzIGFuZCBub3RpZnlpbmcgdGhlIG1hcC5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHJlY29yZCBJRHMgdG8gc2VsZWN0XG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgZm9yIHByb3BlciBoaWdobGlnaHRpbmdcbiAqIEBwYXJhbSBhbHNvUHVibGlzaFRvT3V0cHV0RFMgLSBXaGV0aGVyIHRvIGFsc28gcHVibGlzaCBhIG1lc3NhZ2UgZm9yIG91dHB1dERTIChkZWZhdWx0OiBmYWxzZSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHJlY29yZElkczogc3RyaW5nW10sXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIGFsc29QdWJsaXNoVG9PdXRwdXREUzogYm9vbGVhbiA9IGZhbHNlXG4pOiB2b2lkIHtcbiAgc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMob3V0cHV0RFMsIHJlY29yZElkcywgcmVjb3JkcylcbiAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIG91dHB1dERTLCBhbHNvUHVibGlzaFRvT3V0cHV0RFMpXG59XG5cbi8qKlxuICogRmluZHMgdGhlIFwiQ2xlYXIgcmVzdWx0c1wiIGJ1dHRvbiBpbiB0aGUgRE9NLlxuICogVXNlZCB3aGVuIHByb2dyYW1tYXRpY2FsbHkgdHJpZ2dlcmluZyB0aGUgY2xlYXIgYWN0aW9uLlxuICogXG4gKiBAcmV0dXJucyBUaGUgY2xlYXIgYnV0dG9uIGVsZW1lbnQsIG9yIG51bGwgaWYgbm90IGZvdW5kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kQ2xlYXJSZXN1bHRzQnV0dG9uKCk6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCB7XG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b25bYXJpYS1sYWJlbD1cIkNsZWFyIHJlc3VsdHNcIl0nKSBhcyBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGxcbn1cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIGNsYXNzTmFtZXMsXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIExpc3REaXJlY3Rpb24gfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVJlc3VsdEl0ZW0gfSBmcm9tICcuL3F1ZXJ5LXJlc3VsdC1pdGVtJ1xuaW1wb3J0IHsgZ2V0UG9wdXBUZW1wbGF0ZSB9IGZyb20gJy4vcXVlcnktdXRpbHMnXG5pbXBvcnQgeyB1c2VBdXRvSGVpZ2h0IH0gZnJvbSAnLi91c2VBdXRvSGVpZ2h0J1xuXG5leHBvcnQgaW50ZXJmYWNlIFNpbXBsZUxpc3RQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgcmVjb3JkczogRGF0YVJlY29yZFtdXG4gIGRpcmVjdGlvbjogTGlzdERpcmVjdGlvblxuICBvbkVzY2FwZTogKCkgPT4gdm9pZFxuICBvblNlbGVjdENoYW5nZTogKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIG9uUmVtb3ZlOiAoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbiAgZXhwYW5kQnlEZWZhdWx0PzogYm9vbGVhblxuICBpdGVtRXhwYW5kU3RhdGVzPzogTWFwPHN0cmluZywgYm9vbGVhbj5cbiAgcmVtb3ZlZFJlY29yZElkcz86IFNldDxzdHJpbmc+XG4gIG9uUmVuZGVyRG9uZT86IChvcHRpb25zOiB7IGRhdGFJdGVtczogYW55W10gfSkgPT4gdm9pZFxufVxuXG5jb25zdCBnZXRTdHlsZSA9IChpc0F1dG9IZWlnaHQ6IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXg6IDEgMSAke2lzQXV0b0hlaWdodCA/ICdhdXRvJyA6IDB9O1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIG1heC1oZWlnaHQ6ICR7aXNBdXRvSGVpZ2h0ID8gJ2NhbGMoNjEuOHZoIC0gMTAwcHgpJyA6ICdub25lJ307XG5cbiAgICAucXVlcnktcmVzdWx0LWl0ZW0gKyAucXVlcnktcmVzdWx0LWl0ZW0ge1xuICAgICAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgfVxuXG4gICAgJi52ZXJ0aWNhbCB7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgLmxpc3QtaXRlbXMge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG5cbiAgICAgIC5mZWF0dXJlLWluZm8tY29tcG9uZW50IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG5cbiAgICAgIC5xdWVyeS1yZXN1bHQtaXRlbSArIC5xdWVyeS1yZXN1bHQtaXRlbSB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAwO1xuICAgICAgICBtYXJnaW4tdG9wOiAwLjVyZW07XG4gICAgICB9XG4gICAgfVxuICAgIC5saXN0LWl0ZW1zIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgfVxuICBgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTaW1wbGVMaXN0IChwcm9wczogU2ltcGxlTGlzdFByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICB3aWRnZXRJZCxcbiAgICBvdXRwdXREUyxcbiAgICBxdWVyeUl0ZW0sXG4gICAgcmVjb3JkcyxcbiAgICBkaXJlY3Rpb24sXG4gICAgb25Fc2NhcGUsXG4gICAgb25TZWxlY3RDaGFuZ2UsXG4gICAgb25SZW1vdmUsXG4gICAgZXhwYW5kQnlEZWZhdWx0LFxuICAgIGl0ZW1FeHBhbmRTdGF0ZXMsXG4gICAgcmVtb3ZlZFJlY29yZElkcyxcbiAgICBvblJlbmRlckRvbmVcbiAgfSA9IHByb3BzXG4gIFxuICBjb25zdCBbcG9wdXBUZW1wbGF0ZSwgc2V0UG9wdXBUZW1wbGF0ZV0gPSBSZWFjdC51c2VTdGF0ZTxhbnk+KClcbiAgY29uc3QgW2RlZmF1bHRQb3B1cFRlbXBsYXRlLCBzZXREZWZhdWx0UG9wdXBUZW1wbGF0ZV0gPSBSZWFjdC51c2VTdGF0ZTxhbnk+KClcbiAgY29uc3QgaXNBdXRvSGVpZ2h0ID0gdXNlQXV0b0hlaWdodCgpXG4gIGNvbnN0IHJlc3VsdENvbnRhaW5lclJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcblxuICAvLyBGaWx0ZXIgb3V0IHJlbW92ZWQgcmVjb3Jkc1xuICBjb25zdCBmaWx0ZXJlZFJlY29yZHMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gcmVjb3Jkcz8uZmlsdGVyKHJlY29yZCA9PiAhcmVtb3ZlZFJlY29yZElkcz8uaGFzKHJlY29yZC5nZXRJZCgpKSkgfHwgW11cbiAgfSwgW3JlY29yZHMsIHJlbW92ZWRSZWNvcmRJZHNdKVxuXG4gIC8vIE5vdGlmeSBwYXJlbnQgd2hlbiByZWNvcmRzIGFyZSByZW5kZXJlZCAoZm9yIGF1dG8tc3dpdGNoIGxvZ2ljKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChvblJlbmRlckRvbmUgJiYgZmlsdGVyZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbU2ltcGxlTGlzdF0gY2FsbGluZyBvblJlbmRlckRvbmUnLCB7XG4gICAgICAgIGV2ZW50OiAnU2ltcGxlTGlzdC1vblJlbmRlckRvbmUtY2FsbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGZpbHRlcmVkUmVjb3Jkc0NvdW50OiBmaWx0ZXJlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICB0b3RhbFJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcz8uc2l6ZSB8fCAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBvblJlbmRlckRvbmUoeyBkYXRhSXRlbXM6IGZpbHRlcmVkUmVjb3JkcyB9KVxuICAgIH1cbiAgfSwgW2ZpbHRlcmVkUmVjb3Jkcywgb25SZW5kZXJEb25lLCB3aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCByZWNvcmRzLmxlbmd0aCwgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBnZXRQb3B1cFRlbXBsYXRlKG91dHB1dERTLCBxdWVyeUl0ZW0pLnRoZW4ocnMgPT4ge1xuICAgICAgc2V0UG9wdXBUZW1wbGF0ZShycy5wb3B1cFRlbXBsYXRlKVxuICAgICAgc2V0RGVmYXVsdFBvcHVwVGVtcGxhdGUocnMuZGVmYXVsdFBvcHVwVGVtcGxhdGUpXG4gICAgfSlcbiAgfSwgW291dHB1dERTLCBxdWVyeUl0ZW1dKVxuXG4gIGNvbnN0IGhhbmRsZUtleVVwID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBvbkVzY2FwZSgpXG4gICAgfVxuICB9LCBbb25Fc2NhcGVdKVxuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICcgJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICB9XG4gIH0sIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBcbiAgICAgIG9uS2V5VXA9e2hhbmRsZUtleVVwfSBcbiAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn0gXG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoeyB2ZXJ0aWNhbDogZGlyZWN0aW9uID09PSBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsIH0pfSBcbiAgICAgIGNzcz17Z2V0U3R5bGUoaXNBdXRvSGVpZ2h0KX1cbiAgICAgIHJlZj17cmVzdWx0Q29udGFpbmVyUmVmfVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsaXN0LWl0ZW1zIHB4LTQgcHktMScgcm9sZT0nbGlzdGJveCc+XG4gICAgICAgIHtmaWx0ZXJlZFJlY29yZHMubWFwKChkYXRhSXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkID0gZGF0YUl0ZW0uZ2V0SWQoKVxuICAgICAgICAgIC8vIFVzZSBpbmRpdmlkdWFsIHN0YXRlIGZyb20gbWFwIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBleHBhbmRCeURlZmF1bHRcbiAgICAgICAgICBjb25zdCBpbmRpdmlkdWFsRXhwYW5kU3RhdGUgPSBpdGVtRXhwYW5kU3RhdGVzPy5nZXQocmVjb3JkSWQpXG4gICAgICAgICAgY29uc3QgZXhwYW5kQnlEZWZhdWx0VmFsdWUgPSBpbmRpdmlkdWFsRXhwYW5kU3RhdGUgIT09IHVuZGVmaW5lZCA/IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSA6IChleHBhbmRCeURlZmF1bHQgPz8gdHJ1ZSlcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFF1ZXJ5UmVzdWx0SXRlbVxuICAgICAgICAgICAgICBrZXk9e3JlY29yZElkfVxuICAgICAgICAgICAgICBkYXRhPXtkYXRhSXRlbSBhcyBGZWF0dXJlRGF0YVJlY29yZH1cbiAgICAgICAgICAgICAgZGF0YVNvdXJjZT17b3V0cHV0RFN9XG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgcG9wdXBUZW1wbGF0ZT17cG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGU9e2RlZmF1bHRQb3B1cFRlbXBsYXRlfVxuICAgICAgICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEJ5RGVmYXVsdFZhbHVlfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtvblNlbGVjdENoYW5nZX1cbiAgICAgICAgICAgICAgb25SZW1vdmU9e29uUmVtb3ZlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApXG4gICAgICAgIH0pfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBfd2lkZ2V0TGFiZWw6ICdRdWVyeVNpbXBsZScsXG4gIHJlc2V0OiAnUmVzZXQnLFxuICBzZWFyY2hMYXllcjogJ1NlYXJjaCBMYXllcicsXG4gIGFwcGx5OiAnU2VhcmNoJyxcbiAgbm9EYXRhQXZhaWxhYmxlOiAnRXJyb3IgaW4gbG9hZGluZyBkYXRhJyxcbiAgbm9RdWVyeUl0ZW06ICdObyBxdWVyeScsXG4gIG5ld1F1ZXJ5SGludDogJ0FkZCBjb250ZW50IGJ5IGNsaWNraW5nIHRoZSBcIntsYWJlbH1cIiBidXR0b24gb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFuZWwnLFxuICBhdHRyaWJ1dGVGaWx0ZXI6ICdBdHRyaWJ1dGUgZmlsdGVyJyxcbiAgc3BhdGlhbEZpbHRlcjogJ1NwYXRpYWwgZmlsdGVyJyxcbiAgc3BhdGlhbEZpbHRlclR5cGVfQ3VycmVudE1hcEV4dGVudDogJ0N1cnJlbnQgbWFwIGV4dGVudCcsXG4gIHNwYXRpYWxGaWx0ZXJUeXBlX0ludGVyYWN0aXZlRHJhd01vZGU6ICdEcmF3biBncmFwaGljJyxcbiAgcmVzdWx0czogJ1Jlc3VsdHMnLFxuICBmZWF0dXJlc0Rpc3BsYXllZDogJ0ZlYXR1cmVzIGRpc3BsYXllZCcsXG4gIGNsZWFyUmVzdWx0OiAnQ2xlYXIgcmVzdWx0cycsXG4gIGNoZWNrUmVzdWx0OiAnQ2hlY2sgcmVzdWx0cycsXG4gIG1hcE11c3RCZVZpc2libGU6ICdNYXAgbXVzdCBiZSB2aXNpYmxlJyxcbiAgY2hvb3NlRmlsdGVyVHlwZTogJ0Nob29zZSB0aGUgZmlsdGVyIHR5cGUnLFxuICBjaG9vc2VHZW9tZXRyeVR5cGU6ICdDaG9vc2UgdGhlIGdlb21ldHJ5IHR5cGUnLFxuICBjbGVhckRyYXdpbmc6ICdDbGVhciB0aGUgZ3JhcGhpYyB3aGVuIGFwcGx5aW5nJyxcbiAgZmVhdHVyZUZyb21EczogJ1NlbGVjdGluZyBmZWF0dXJlcyBmcm9tIGRhdGEgc291cmNlJyxcbiAgZmVhdHVyZUZyb21NYXA6ICdHZW9tZXRyaWVzIGZyb20gYSBtYXAnLFxuICBjaG9vc2VGaWx0ZXJMYXllcjogJ0Nob29zZSBhIGZpbHRlciBsYXllcicsXG4gIHNlbGVjdGVkUmVjb3JkczogJ3tudW19IHJlY29yZHMgYXJlIHNlbGVjdGVkIGZvciB0aGUgZmlsdGVyJyxcbiAgc3BhdGlhbE5vdEF2YWlsYWJsZTogJ1NwYXRpYWwgZmlsdGVyIGlzIG5vdCBhdmFpbGFibGUgaGVyZS4nLFxuICBzcGF0aWFsTm90QXZhaWxhYmxlRGVzYzogJ1NwYXRpYWwgZmlsdGVyIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIGEgZGF0YSBzb3VyY2UgdGhhdCBhbHJlYWR5IGNvbnRhaW5zIGEgc3BhdGlhbCBxdWVyeS4nLFxuICBwcmVjb25maWd1cmVkOiAnUHJlY29uZmlndXJlZCcsXG4gIHJ1bnRpbWU6ICdSdW50aW1lJyxcbiAgc2VsZWN0TG9hZGVkOiAnU2VsZWN0IGxvYWRlZCcsXG4gIHJldHJpZXZpbmc6ICdSZXRyaWV2aW5nIHF1ZXJ5IHJlc3VsdHMuLi4nLFxuICB6b29tVG9TZWxlY3RlZDogJ1pvb20gdG8gc2VsZWN0ZWQnLFxuICBxdWVyeVRhYjogJ1F1ZXJ5JyxcbiAgcmVzdWx0c1RhYjogJ1Jlc3VsdHMnLFxuICBleHBhbmRBbGw6ICdFeHBhbmQgYWxsJyxcbiAgY29sbGFwc2VBbGw6ICdDb2xsYXBzZSBhbGwnLFxuICBhZGRUb01hcDogJ0FkZCB0byBtYXAnLFxuICByZXN1bHRzTW9kZTogJ1Jlc3VsdHMgbW9kZScsXG4gIGNyZWF0ZU5ld1Jlc3VsdHM6ICdDcmVhdGUgbmV3IHJlc3VsdHMnLFxuICBhZGRUb0N1cnJlbnRSZXN1bHRzOiAnQWRkIHRvIGN1cnJlbnQgcmVzdWx0cycsXG4gIHJlbW92ZUZyb21DdXJyZW50UmVzdWx0czogJ1JlbW92ZSBmcm9tIGN1cnJlbnQgcmVzdWx0cycsXG4gIHJlc3VsdHNNb2RlRGlzYWJsZWRSZW1vdmU6ICdSZW1vdmUgZnJvbSBjdXJyZW50IHJlc3VsdHMgKG5vIGFjY3VtdWxhdGVkIHJlc3VsdHMpJyxcbiAgcmVzdWx0c01vZGVEZXNjOiAnQ29udHJvbHMgaG93IHF1ZXJ5IHJlc3VsdHMgYXJlIGNvbWJpbmVkOlxcbuKAoiBOZXc6IEVhY2ggcXVlcnkgcmVwbGFjZXMgcHJldmlvdXMgcmVzdWx0c1xcbuKAoiBBZGQ6IE5ldyByZXN1bHRzIGFyZSBhZGRlZCB0byBleGlzdGluZyByZXN1bHRzXFxu4oCiIFJlbW92ZTogTWF0Y2hpbmcgcmVzdWx0cyBhcmUgcmVtb3ZlZCBmcm9tIGV4aXN0aW5nIHJlc3VsdHMnLFxuICByZXN1bHRzTW9kZU5ldzogJ05ldycsXG4gIHJlc3VsdHNNb2RlQWRkOiAnQWRkJyxcbiAgcmVzdWx0c01vZGVSZW1vdmU6ICdSZW1vdmUnXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IFF1ZXJ5V2lkZ2V0Q29udGV4dCB9IGZyb20gJy4vd2lkZ2V0LWNvbnRleHQnXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VBdXRvSGVpZ2h0ICgpIHtcbiAgY29uc3QgbGF5b3V0SW5mbyA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlXaWRnZXRDb250ZXh0KVxuICBsZXQgbGF5b3V0SWRcbiAgbGV0IGxheW91dEl0ZW1JZFxuICBpZiAobGF5b3V0SW5mby5pbmNsdWRlcygnOicpKSB7XG4gICAgY29uc3QgciA9IGxheW91dEluZm8uc3BsaXQoJzonKVxuICAgIGxheW91dElkID0gclswXVxuICAgIGxheW91dEl0ZW1JZCA9IHJbMV1cbiAgfVxuICBjb25zdCBpc0F1dG8gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdXG4gICAgcmV0dXJuIGxheW91dEl0ZW0/LnNldHRpbmc/LmF1dG9Qcm9wcz8uaGVpZ2h0ID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG9cbiAgfSlcblxuICByZXR1cm4gaXNBdXRvXG59XG5cblxuIiwiaW1wb3J0IGljb25XYXJuaW5nIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZydcbmltcG9ydCBpY29uRXJyb3IgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZydcbmltcG9ydCBhcnJvd05hdkJhY2sgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmcnXG5pbXBvcnQgYXJyb3dSaWdodCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC5zdmcnXG5pbXBvcnQgdG9vbERlbGV0ZSBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xuaW1wb3J0IGljb25Nb3JlIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21vcmUtaG9yaXpvbnRhbC5zdmcnXG5cbmV4cG9ydCBjb25zdCBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCA9ICgpID0+ICh7XG4gIGljb25NYXA6IHtcbiAgICBpY29uUXVlcnk6IHJlcXVpcmUoJy4uLy4uL2ljb24uc3ZnJyksXG4gICAgaWNvbldhcm5pbmcsXG4gICAgaWNvbkVycm9yLFxuICAgIGFycm93TmF2QmFjayxcbiAgICBhcnJvd1JpZ2h0LFxuICAgIHRvb2xEZWxldGUsXG4gICAgaWNvbk1vcmVcbiAgfVxufSlcblxuXG5cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgUXVlcnlXaWRnZXRDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxzdHJpbmc+KG51bGwpXG5cblxuIiwiaW1wb3J0IHsgQmFzZVZlcnNpb25NYW5hZ2VyIH0gZnJvbSAnamltdS1jb3JlJ1xuXG5jbGFzcyBWZXJzaW9uTWFuYWdlciBleHRlbmRzIEJhc2VWZXJzaW9uTWFuYWdlciB7XG4gIHZlcnNpb25zID0gW3tcbiAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgIGRlc2NyaXB0aW9uOiAnVGhlIGZpcnN0IHZlcnNpb24uJyxcbiAgICB1cGdyYWRlcjogKG9sZENvbmZpZykgPT4ge1xuICAgICAgcmV0dXJuIG9sZENvbmZpZ1xuICAgIH1cbiAgfV1cbn1cblxuZXhwb3J0IGNvbnN0IHZlcnNpb25NYW5hZ2VyID0gbmV3IFZlcnNpb25NYW5hZ2VyKClcblxuXG5cbiIsIi8qKlxuICogV2lkZ2V0IHZlcnNpb24gbnVtYmVyLlxuICogQmFzZSB2ZXJzaW9uIG1hdGNoZXMgRXhwZXJpZW5jZSBCdWlsZGVyIHZlcnNpb24gKDEuMTkuMCkuXG4gKiBSZWxlYXNlIG51bWJlciBpbmNyZW1lbnRzIG9uIG1ham9yIGNoYW5nZXMgKDAwMSwgMDAyLCAwMDMsIC4uLikuXG4gKiBNaW5vciB2ZXJzaW9uIGluY3JlbWVudHMgb24gc21hbGxlciBmaXhlcyBiZXR3ZWVuIG1ham9yIHJlbGVhc2VzIChyMDE1LjEsIHIwMTUuMiwgLi4uKS5cbiAqIFxuICogVG8gaW5jcmVtZW50OlxuICogLSBNYWpvciBjaGFuZ2U6IFVwZGF0ZSBSRUxFQVNFX05VTUJFUiAoZS5nLiwgMDE1IC0+IDAxNikgYW5kIHJlc2V0IE1JTk9SX1ZFUlNJT04gdG8gMFxuICogLSBNaW5vciBmaXg6IEluY3JlbWVudCBNSU5PUl9WRVJTSU9OIChlLmcuLCAxIC0+IDIpIHdoaWxlIGtlZXBpbmcgc2FtZSBSRUxFQVNFX05VTUJFUlxuICovXG5jb25zdCBCQVNFX1ZFUlNJT04gPSAnMS4xOS4wJ1xuY29uc3QgUkVMRUFTRV9OVU1CRVIgPSAnMDE2JyAvLyBJbmNyZW1lbnQgb24gbWFqb3IgY2hhbmdlcyAoMDAxLCAwMDIsIDAwMywgLi4uKVxuY29uc3QgTUlOT1JfVkVSU0lPTiA9ICc1JyAvLyBJbmNyZW1lbnQgb24gbWlub3IgZml4ZXMgYmV0d2VlbiBtYWpvciByZWxlYXNlcyAoMSwgMiwgMywgLi4uKVxuXG5leHBvcnQgY29uc3QgV0lER0VUX1ZFUlNJT04gPSBNSU5PUl9WRVJTSU9OICYmIE1JTk9SX1ZFUlNJT04gIT09ICcwJ1xuICA/IGAke0JBU0VfVkVSU0lPTn0tciR7UkVMRUFTRV9OVU1CRVJ9LiR7TUlOT1JfVkVSU0lPTn1gXG4gIDogYCR7QkFTRV9WRVJTSU9OfS1yJHtSRUxFQVNFX05VTUJFUn1gXG5cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fZW1vdGlvbl9yZWFjdF9qc3hfcnVudGltZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2FyY2dpc19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2NvcmVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9sYXlvdXRzX2xheW91dF9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdGhlbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX2Jhc2ljX3NxbF9leHByZXNzaW9uX3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfd2lkZ2V0c19zaGFyZWRfY29kZV9jb21tb25fXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIvKipcclxuICogV2VicGFjayB3aWxsIHJlcGxhY2UgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gd2l0aCBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgdG8gc2V0IHRoZSBwdWJsaWMgcGF0aCBkeW5hbWljYWxseS5cclxuICogVGhlIHJlYXNvbiB3aHkgd2UgY2FuJ3Qgc2V0IHRoZSBwdWJsaWNQYXRoIGluIHdlYnBhY2sgY29uZmlnIGlzOiB3ZSBjaGFuZ2UgdGhlIHB1YmxpY1BhdGggd2hlbiBkb3dubG9hZC5cclxuICogKi9cclxuX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB3aW5kb3cuamltdUNvbmZpZy5iYXNlVXJsXHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIEFsbFdpZGdldFByb3BzLCBEYXRhU291cmNlTWFuYWdlciwgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLCBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgUGFwZXIsIFdpZGdldFBsYWNlaG9sZGVyIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHR5cGUgSU1Db25maWcsIFF1ZXJ5QXJyYW5nZVR5cGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcblxuaW1wb3J0IHsgdmVyc2lvbk1hbmFnZXIgfSBmcm9tICcuLi92ZXJzaW9uLW1hbmFnZXInXG5pbXBvcnQgeyBRdWVyeVRhc2tMaXN0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QnXG5pbXBvcnQgeyBUYXNrTGlzdElubGluZSB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LWlubGluZSdcbmltcG9ydCB7IFRhc2tMaXN0UG9wcGVyV3JhcHBlciB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyJ1xuaW1wb3J0IHsgUXVlcnlXaWRnZXRDb250ZXh0IH0gZnJvbSAnLi93aWRnZXQtY29udGV4dCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcbmltcG9ydCB7IFdJREdFVF9WRVJTSU9OIH0gZnJvbSAnLi4vdmVyc2lvbidcblxuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIFF1ZXJ5U2ltcGxlIHRvIG5vdGlmeSBIZWxwZXJTaW1wbGUgb2Ygc2VsZWN0aW9uIGNoYW5nZXMuXG4gKi9cbmNvbnN0IFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCA9ICdxdWVyeXNpbXBsZS1zZWxlY3Rpb24tY2hhbmdlZCdcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgUXVlcnlTaW1wbGUgdG8gbm90aWZ5IEhlbHBlclNpbXBsZSBvZiB3aWRnZXQgb3Blbi9jbG9zZSBzdGF0ZS5cbiAqL1xuY29uc3QgUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXdpZGdldC1zdGF0ZS1jaGFuZ2VkJ1xuXG4vKipcbiAqIEN1c3RvbSBldmVudCBuYW1lIGZvciByZXF1ZXN0aW5nIHJlc3RvcmF0aW9uIHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzLlxuICovXG5jb25zdCBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXJlc3RvcmUtb24taWRlbnRpZnktY2xvc2UnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpZGdldCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8QWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+LCB7IGluaXRpYWxRdWVyeVZhbHVlPzogeyBzaG9ydElkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfSwgaXNQYW5lbFZpc2libGU/OiBib29sZWFuLCBoYXNTZWxlY3Rpb24/OiBib29sZWFuLCBzZWxlY3Rpb25SZWNvcmRDb3VudD86IG51bWJlciwgbGFzdFNlbGVjdGlvbj86IHsgcmVjb3JkSWRzOiBzdHJpbmdbXSwgb3V0cHV0RHNJZDogc3RyaW5nLCBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nIH0sIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZSwgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXSB9PiB7XG4gIHN0YXRpYyB2ZXJzaW9uTWFuYWdlciA9IHZlcnNpb25NYW5hZ2VyXG5cbiAgc3RhdGU6IHsgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9LCBpc1BhbmVsVmlzaWJsZT86IGJvb2xlYW4sIGhhc1NlbGVjdGlvbj86IGJvb2xlYW4sIHNlbGVjdGlvblJlY29yZENvdW50PzogbnVtYmVyLCBsYXN0U2VsZWN0aW9uPzogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSwgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlLCBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdIH0gPSB7XG4gICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uIC8vIERlZmF1bHQgbW9kZVxuICB9XG4gIHByaXZhdGUgd2lkZ2V0UmVmID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpXG4gIHByaXZhdGUgdmlzaWJpbGl0eU9ic2VydmVyOiBJbnRlcnNlY3Rpb25PYnNlcnZlciB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgdmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsXG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5jaGVja1F1ZXJ5U3RyaW5nRm9yU2hvcnRJZHMoKVxuICAgIC8vIExpc3RlbiBmb3IgaGFzaCBjaGFuZ2VzIHRvIGRldGVjdCB3aGVuIGhhc2ggcGFyYW1ldGVycyBhcmUgdXBkYXRlZFxuICAgIC8vIFRoaXMgaXMgbmVlZGVkIHdoZW4gSGVscGVyU2ltcGxlIG9wZW5zIHRoZSB3aWRnZXQgd2l0aCBhIGhhc2ggcGFyYW1ldGVyXG4gICAgLy8gb3Igd2hlbiBoYXNoIHBhcmFtZXRlcnMgY2hhbmdlIHdoaWxlIHRoZSB3aWRnZXQgaXMgYWxyZWFkeSBtb3VudGVkXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcylcbiAgICBcbiAgICAvLyBTZXQgdXAgdmlzaWJpbGl0eSBkZXRlY3Rpb25cbiAgICB0aGlzLnNldHVwVmlzaWJpbGl0eURldGVjdGlvbigpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBzZWxlY3Rpb24gY2hhbmdlcyBmcm9tIHF1ZXJ5LXJlc3VsdFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwgdGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2UgYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHJlc3RvcmUgcmVxdWVzdHMgd2hlbiBpZGVudGlmeSBwb3B1cCBjbG9zZXNcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5ULCB0aGlzLmhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2UgYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBcbiAgICAvLyBOb3RpZnkgSGVscGVyU2ltcGxlIHRoYXQgdGhpcyB3aWRnZXQgaXMgbm93IG9wZW5cbiAgICBjb25zdCBvcGVuRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIGlzT3BlbjogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChvcGVuRXZlbnQpXG4gICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICBldmVudDogJ3dpZGdldC1vcGVuZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBpc09wZW46IHRydWUsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWxzbyBjaGVjayBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGNhdGNoIGNhc2VzIHdoZXJlIGhhc2ggd2FzIGFscmVhZHkgcHJlc2VudFxuICAgIC8vIHdoZW4gd2lkZ2V0IHdhcyBvcGVuZWQgKGUuZy4sIGJ5IEhlbHBlclNpbXBsZSBvcGVuaW5nIHRoZSB3aWRnZXQpXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcygpXG4gICAgfSwgMTAwKVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgLy8gQ2xlYW4gdXAgaGFzaGNoYW5nZSBsaXN0ZW5lclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1F1ZXJ5U3RyaW5nRm9yU2hvcnRJZHMpXG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgc2VsZWN0aW9uIGNoYW5nZSBsaXN0ZW5lclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwgdGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2UgYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBcbiAgICAvLyBDbGVhbiB1cCByZXN0b3JlIG9uIGlkZW50aWZ5IGNsb3NlIGxpc3RlbmVyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwgdGhpcy5oYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgdmlzaWJpbGl0eSBkZXRlY3Rpb25cbiAgICB0aGlzLmNsZWFudXBWaXNpYmlsaXR5RGV0ZWN0aW9uKClcbiAgICBcbiAgICAvLyBOb3RpZnkgSGVscGVyU2ltcGxlIHRoYXQgdGhpcyB3aWRnZXQgaXMgbm93IGNsb3NlZFxuICAgIGNvbnN0IGNsb3NlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIGlzT3BlbjogZmFsc2VcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoY2xvc2VFdmVudClcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiAnd2lkZ2V0LWNsb3NlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4pIHtcbiAgICBpZiAocHJldlByb3BzLmNvbmZpZy5xdWVyeUl0ZW1zICE9PSB0aGlzLnByb3BzLmNvbmZpZy5xdWVyeUl0ZW1zKSB7XG4gICAgICB0aGlzLmNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcygpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSBvZiBzZWxlY3Rpb24gY2hhbmdlcy5cbiAgICogQ2FsbGVkIGJ5IFF1ZXJ5VGFza1Jlc3VsdCB3aGVuIHNlbGVjdGlvbiBpcyBtYWRlLlxuICAgKiBcbiAgICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHNlbGVjdGVkIHJlY29yZCBJRHNcbiAgICogQHBhcmFtIGRhdGFTb3VyY2VJZCAtIE9wdGlvbmFsIGRhdGEgc291cmNlIElEXG4gICAqL1xuICBub3RpZnlIZWxwZXJTaW1wbGVPZlNlbGVjdGlvbiA9IChyZWNvcmRJZHM6IHN0cmluZ1tdLCBkYXRhU291cmNlSWQ/OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvcmRJZHMsXG4gICAgICAgIGRhdGFTb3VyY2VJZFxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHZpc2liaWxpdHkgZGV0ZWN0aW9uIHRvIHRyYWNrIHdoZW4gdGhlIHdpZGdldCBwYW5lbCBpcyBvcGVuL2Nsb3NlZC5cbiAgICogVXNlcyBJbnRlcnNlY3Rpb25PYnNlcnZlciBpZiBhdmFpbGFibGUsIGZhbGxzIGJhY2sgdG8gcGVyaW9kaWMgY2hlY2tpbmcuXG4gICAqL1xuICBzZXR1cFZpc2liaWxpdHlEZXRlY3Rpb24gPSAoKSA9PiB7XG4gICAgLy8gV2FpdCBmb3IgbmV4dCB0aWNrIHRvIGVuc3VyZSByZWYgaXMgc2V0XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMud2lkZ2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2aXNpYmlsaXR5LWRldGVjdGlvbi1zZXR1cC1mYWlsZWQnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ3dpZGdldC1yZWYtbm90LWF2YWlsYWJsZSdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndpZGdldFJlZi5jdXJyZW50XG5cbiAgICAgIC8vIE1ldGhvZCAxOiBJbnRlcnNlY3Rpb25PYnNlcnZlciAobW9zdCBlZmZpY2llbnQpXG4gICAgICBpZiAoJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAgICAgKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gZW50cmllc1swXVxuICAgICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gZW50cnkuaXNJbnRlcnNlY3RpbmcgJiYgZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPiAwXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE9ubHkgbG9nIGlmIHN0YXRlIGNoYW5nZWRcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmlzUGFuZWxWaXNpYmxlICE9PSBpc1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzUGFuZWxWaXNpYmxlOiBpc1Zpc2libGUgfSlcbiAgICAgICAgICAgICAgdGhpcy5sb2dWaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSwgJ0ludGVyc2VjdGlvbk9ic2VydmVyJylcbiAgICAgICAgICAgICAgdGhpcy5ub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUoaXNWaXNpYmxlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGhyZXNob2xkOiBbMCwgMC4xLCAxLjBdLCAvLyBUcmlnZ2VyIGF0IDAlLCAxMCUsIGFuZCAxMDAlIHZpc2liaWxpdHlcbiAgICAgICAgICAgIHJvb3RNYXJnaW46ICcwcHgnXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIG1ldGhvZDogJ0ludGVyc2VjdGlvbk9ic2VydmVyJ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTWV0aG9kIDI6IEZhbGxiYWNrIHRvIHBlcmlvZGljIGNoZWNraW5nXG4gICAgICAgIHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IHRoaXMuY2hlY2tWaXNpYmlsaXR5KClcbiAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc1BhbmVsVmlzaWJsZSAhPT0gaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNQYW5lbFZpc2libGU6IGlzVmlzaWJsZSB9KVxuICAgICAgICAgICAgdGhpcy5sb2dWaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSwgJ3BlcmlvZGljLWNoZWNrJylcbiAgICAgICAgICAgIHRoaXMubm90aWZ5SGVscGVyU2ltcGxlT2ZQYW5lbFN0YXRlKGlzVmlzaWJsZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDI1MCkgLy8gQ2hlY2sgZXZlcnkgMjUwbXNcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIG1ldGhvZDogJ3BlcmlvZGljLWNoZWNrJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sIDEwMClcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgdmlzaWJpbGl0eSBkZXRlY3Rpb24gb2JzZXJ2ZXJzL2ludGVydmFscy5cbiAgICovXG4gIGNsZWFudXBWaXNpYmlsaXR5RGV0ZWN0aW9uID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnZpc2liaWxpdHlPYnNlcnZlcikge1xuICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlciA9IG51bGxcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgIT09IG51bGwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbClcbiAgICAgIHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgd2lkZ2V0IGVsZW1lbnQgaXMgY3VycmVudGx5IHZpc2libGUuXG4gICAqIEZhbGxiYWNrIG1ldGhvZCB3aGVuIEludGVyc2VjdGlvbk9ic2VydmVyIGlzIG5vdCBhdmFpbGFibGUuXG4gICAqL1xuICBjaGVja1Zpc2liaWxpdHkgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKCF0aGlzLndpZGdldFJlZi5jdXJyZW50KSByZXR1cm4gZmFsc2VcbiAgICBcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy53aWRnZXRSZWYuY3VycmVudFxuICAgIGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudClcbiAgICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIFxuICAgIGNvbnN0IGlzVmlzaWJsZSA9IChcbiAgICAgIHN0eWxlLmRpc3BsYXkgIT09ICdub25lJyAmJlxuICAgICAgc3R5bGUudmlzaWJpbGl0eSAhPT0gJ2hpZGRlbicgJiZcbiAgICAgIHN0eWxlLm9wYWNpdHkgIT09ICcwJyAmJlxuICAgICAgcmVjdC53aWR0aCA+IDAgJiZcbiAgICAgIHJlY3QuaGVpZ2h0ID4gMCAmJlxuICAgICAgcmVjdC50b3AgPCB3aW5kb3cuaW5uZXJIZWlnaHQgJiZcbiAgICAgIHJlY3QuYm90dG9tID4gMCAmJlxuICAgICAgcmVjdC5sZWZ0IDwgd2luZG93LmlubmVyV2lkdGggJiZcbiAgICAgIHJlY3QucmlnaHQgPiAwXG4gICAgKVxuICAgIFxuICAgIHJldHVybiBpc1Zpc2libGVcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFja3Mgc2VsZWN0aW9uIGNoYW5nZXMgZnJvbSBxdWVyeS1yZXN1bHQuXG4gICAqIEluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB1c2VzIGFjY3VtdWxhdGVkIHJlY29yZHMgY291bnQgZm9yIHJlc3RvcmF0aW9uLlxuICAgKi9cbiAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ8eyB3aWRnZXRJZDogc3RyaW5nLCByZWNvcmRJZHM6IHN0cmluZ1tdLCBkYXRhU291cmNlSWQ/OiBzdHJpbmcsIG91dHB1dERzSWQ/OiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkPzogc3RyaW5nIH0+XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIE9ubHkgdHJhY2sgaWYgdGhpcyBpcyBmb3Igb3VyIHdpZGdldFxuICAgIGlmIChjdXN0b21FdmVudC5kZXRhaWwud2lkZ2V0SWQgIT09IGlkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgaGFzU2VsZWN0aW9uID0gY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcyAmJiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCA+IDBcbiAgICBcbiAgICAvLyBJbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCB1c2UgYWNjdW11bGF0ZWQgcmVjb3JkcyBjb3VudCBmb3IgcmVzdG9yYXRpb25cbiAgICAvLyBUaGUgYWNjdW11bGF0ZWQgcmVjb3JkcyBhcmUgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3Igd2hhdCBzaG91bGQgYmUgcmVzdG9yZWRcbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIGNvbnN0IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgY29uc3Qgc2VsZWN0aW9uQ291bnQgPSBpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwXG4gICAgICA/IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50XG4gICAgICA6IChoYXNTZWxlY3Rpb24gPyBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCA6IDApXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVTZWxlY3Rpb25DaGFuZ2UtdXBkYXRpbmctc3RhdGUnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICBldmVudFJlY29yZElkc0NvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIGhhc1NlbGVjdGlvbkZyb21FdmVudDogaGFzU2VsZWN0aW9uLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRCZWZvcmU6IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50LFxuICAgICAgY2FsY3VsYXRlZFNlbGVjdGlvbkNvdW50OiBzZWxlY3Rpb25Db3VudCxcbiAgICAgICd3aWxsLXNldC1oYXNTZWxlY3Rpb24nOiBzZWxlY3Rpb25Db3VudCA+IDAsXG4gICAgICAnd2lsbC1zZXQtbGFzdFNlbGVjdGlvbic6IGhhc1NlbGVjdGlvbiAmJiAhIWN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkICYmICEhY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkLFxuICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAnaXNBY2N1bXVsYXRpb25Nb2RlJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAnYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwJzogYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwLFxuICAgICAgICAndXNlLWFjY3VtdWxhdGVkLWNvdW50JzogaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCxcbiAgICAgICAgJ3VzZS1ldmVudC1jb3VudCc6ICEoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaGFzU2VsZWN0aW9uOiBzZWxlY3Rpb25Db3VudCA+IDAsXG4gICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogc2VsZWN0aW9uQ291bnQsXG4gICAgICAvLyBTdG9yZSBsYXN0U2VsZWN0aW9uIGZvciBjb21wYXRpYmlsaXR5LCBidXQgcmVzdG9yYXRpb24gd2lsbCB1c2UgYWNjdW11bGF0ZWRSZWNvcmRzIGluIEFkZC9SZW1vdmUgbW9kZXNcbiAgICAgIGxhc3RTZWxlY3Rpb246IGhhc1NlbGVjdGlvbiAmJiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCAmJiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICByZWNvcmRJZHM6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMsXG4gICAgICAgICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS1zdGF0ZS11cGRhdGVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICduZXctaGFzU2VsZWN0aW9uJzogc2VsZWN0aW9uQ291bnQgPiAwLFxuICAgICAgJ25ldy1zZWxlY3Rpb25SZWNvcmRDb3VudCc6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgJ25ldy1sYXN0U2VsZWN0aW9uLXJlY29yZElkcy1jb3VudCc6IGhhc1NlbGVjdGlvbiAmJiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCAmJiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgICAgPyBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICA6IDAsXG4gICAgICAnbm90ZSc6ICdsYXN0U2VsZWN0aW9uLW9ubHktY29udGFpbnMtY3VycmVudC1xdWVyeS1yZWNvcmRzLW5vdC1hbGwtYWNjdW11bGF0ZWQtcmVjb3JkcydcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgcmVzdG9yZSByZXF1ZXN0IHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzLlxuICAgKiBPbmx5IHJlc3RvcmVzIGlmIHdpZGdldCBwYW5lbCBpcyBvcGVuLlxuICAgKiBJbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgcmVzdG9yZXMgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2UgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudDx7IFxuICAgICAgd2lkZ2V0SWQ6IHN0cmluZywgXG4gICAgICByZWNvcmRJZHM6IHN0cmluZ1tdLCBcbiAgICAgIG91dHB1dERzSWQ6IHN0cmluZyxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmdcbiAgICB9PlxuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBPbmx5IGhhbmRsZSBpZiB0aGlzIGlzIGZvciBvdXIgd2lkZ2V0XG4gICAgaWYgKGN1c3RvbUV2ZW50LmRldGFpbC53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zdCBpc1dpZGdldE9wZW4gPSB0aGlzLnN0YXRlLmlzUGFuZWxWaXNpYmxlID09PSB0cnVlXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXJlcXVlc3RlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBpc1dpZGdldE9wZW4sXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGV2ZW50UmVjb3JkSWRzQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICB9KVxuICAgIFxuICAgIC8vIE9ubHkgcmVzdG9yZSBpZiB3aWRnZXQgaXMgb3BlblxuICAgIGlmICghaXNXaWRnZXRPcGVuKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC13aWRnZXQtY2xvc2VkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvcmRDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogU2hvdWxkIGFsd2F5cyBjaGVjayBhY2N1bXVsYXRlZFJlY29yZHMgZmlyc3QsIHJlZ2FyZGxlc3Mgb2YgbW9kZVxuICAgIGlmICh0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdzaG91bGQtdXNlLWFjY3VtdWxhdGVkJzogdHJ1ZSxcbiAgICAgICAgJ2N1cnJlbnQtY29uZGl0aW9uLWNoZWNrJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6IGlzQWNjdW11bGF0aW9uTW9kZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gSW4gQWRkL1JlbW92ZSBtb2RlcywgY2hlY2sgYWNjdW11bGF0ZWQgcmVjb3JkcyBpbnN0ZWFkIG9mIGxhc3RTZWxlY3Rpb25cbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBpZiAoIXRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8ICF0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyB8fCB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbixcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICdoeXBvdGhlc2lzJzogJ2hhc1NlbGVjdGlvbi1pcy1mYWxzZS1vci1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAnbWF5YmUtaGFzU2VsZWN0aW9uLXNob3VsZC1iZS1iYXNlZC1vbi1hY2N1bXVsYXRlZC1yZWNvcmRzJzogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBhbGwgYWNjdW11bGF0ZWQgcmVjb3JkcyAoZ3JvdXBlZCBieSBvcmlnaW4gRFMpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBNYXliZSBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCBpbiBhY2N1bXVsYXRpb24gbW9kZT9cbiAgICBpZiAodGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCAmJiAhaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1hY2N1bXVsYXRpb24tbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbW9kZS1pcy1ub3QtYWRkLW9yLXJlbW92ZScsXG4gICAgICAgICdzaG91bGQtd2Utc3RpbGwtdXNlLXRoZW0nOiAnTkVFRFMtSU5WRVNUSUdBVElPTidcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIHVzZSBvcmlnaW5hbCB2YWxpZGF0aW9uIGxvZ2ljXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBtYXRjaGluZyBzZWxlY3Rpb24gc3RhdGVcbiAgICBpZiAoIXRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8ICF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLW5vLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbixcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb25cbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRoZSBvdXRwdXREc0lkIG1hdGNoZXNcbiAgICBpZiAodGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLm91dHB1dERzSWQgIT09IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1kcy1taXNtYXRjaCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyT3V0cHV0RHNJZDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLm91dHB1dERzSWQsXG4gICAgICAgIHJlcXVlc3RlZE91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgcXVlcnlJdGVtQ29uZmlnSWQgbWF0Y2hlcyAob3B0aW9uYWwgYnV0IGdvb2QgdG8gY2hlY2spXG4gICAgaWYgKHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5xdWVyeUl0ZW1Db25maWdJZCAhPT0gY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1xdWVyeS1taXNtYXRjaCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyUXVlcnlJdGVtQ29uZmlnSWQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5xdWVyeUl0ZW1Db25maWdJZCxcbiAgICAgICAgcmVxdWVzdGVkUXVlcnlJdGVtQ29uZmlnSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBSZXN0b3JlIHNlbGVjdGlvbiB0byBtYXAgKHJldXNlIGV4aXN0aW5nIG1ldGhvZClcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3Jpbmctc2VsZWN0aW9uJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHJlY29yZENvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIG91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHNlbGVjdGlvbiB0byBtYXAgd2hlbiB3aWRnZXQgb3BlbnMgKHJldXNlcyBBZGQgdG8gTWFwIGxvZ2ljKS5cbiAgICogSW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHJlc3RvcmVzIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzIGdyb3VwZWQgYnkgb3JpZ2luIGRhdGEgc291cmNlLlxuICAgKi9cbiAgcHJpdmF0ZSBhZGRTZWxlY3Rpb25Ub01hcCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGxhc3RTZWxlY3Rpb24sIGFjY3VtdWxhdGVkUmVjb3JkcywgcmVzdWx0c01vZGUgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhbGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgbGFzdFNlbGVjdGlvbk91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24/Lm91dHB1dERzSWRcbiAgICB9KVxuICAgIFxuICAgIC8vIEluIEFkZC9SZW1vdmUgbW9kZXMsIHVzZSBhY2N1bXVsYXRlZCByZWNvcmRzIGZvciByZXN0b3JhdGlvblxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IFNob3VsZCBhbHdheXMgY2hlY2sgYWNjdW11bGF0ZWRSZWNvcmRzIGZpcnN0LCByZWdhcmRsZXNzIG9mIG1vZGVcbiAgICAvLyBBZGRpbmcgbG9nIHRvIHNlZSBpZiBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCB1c2luZyB0aGVtXG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnc2hvdWxkLXVzZS1hY2N1bXVsYXRlZCc6IHRydWUsXG4gICAgICAgICdjdXJyZW50LWNvbmRpdGlvbi1jaGVjayc6IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICAgICdjb25kaXRpb24tcmVzdWx0JzogaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiAwLFxuICAgICAgICAnd2lsbC1mYWxsYmFjay10by1sYXN0U2VsZWN0aW9uJzogISFsYXN0U2VsZWN0aW9uXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gR3JvdXAgYWNjdW11bGF0ZWQgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gICAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgICBcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAxOiBUcnkgdG8gZ2V0IGZyb20gcmVjb3JkLmdldERhdGFTb3VyY2UoKVxuICAgICAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2ZvdW5kLW9yaWdpbi1kcy1mcm9tLXJlY29yZC1kcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbnVsbCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdyZWNvcmQuZ2V0RGF0YVNvdXJjZSgpJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAyOiBJZiB0aGF0IGZhaWxlZCwgc2VhcmNoIGFsbCBkYXRhIHNvdXJjZXMgZm9yIGEgcmVjb3JkIHdpdGggbWF0Y2hpbmcgSURcbiAgICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICAgIGNvbnN0IGRzTWFwID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2VzKClcbiAgICAgICAgICBjb25zdCBhbGxEYXRhU291cmNlcyA9IE9iamVjdC52YWx1ZXMoZHNNYXApXG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCBkcyBvZiBhbGxEYXRhU291cmNlcykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgYnkgY2hlY2tpbmcgZm9yIGdldEFsbExvYWRlZFJlY29yZHMgbWV0aG9kXG4gICAgICAgICAgICBpZiAoZHMgJiYgdHlwZW9mIChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIERTIGhhcyB0aGUgcmVjb3JkXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmVjb3JkcyA9IChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gYWxsUmVjb3Jkcy5maW5kKChyOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gci5nZXRJZCgpID09PSByZWNvcmRJZClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIHRoZSByZWNvcmQgLSBnZXQgb3JpZ2luIERTIGZyb20gdGhpcyBEU1xuICAgICAgICAgICAgICAgICAgb3JpZ2luRFMgPSAoZHMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdmb3VuZC1vcmlnaW4tZHMtdmlhLXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NlYXJjaGVkLWFsbC1kYXRhLXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hlZERTSWQ6IGRzLmlkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjb3VsZC1ub3QtZmluZC1vcmlnaW4tZHMtZm9yLXJlY29yZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIHdhcm5pbmc6ICdyZWNvcmQtd2lsbC1iZS1za2lwcGVkJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBzZWxlY3Rpb24gZm9yIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCB7IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIH0gPSByZXF1aXJlKCcuL3NlbGVjdGlvbi11dGlscycpXG4gICAgICByZWNvcmRzQnlPcmlnaW5EUy5mb3JFYWNoKChyZWNvcmRzLCBvcmlnaW5EUykgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBVc2Ugb3JpZ2luRFMgZGlyZWN0bHkgKG5vdCBvdXRwdXREUykgc2luY2UgcmVjb3JkcyBhcmUgc2VsZWN0ZWQgaW4gb3JpZ2luIGxheWVyc1xuICAgICAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKGlkLCBvcmlnaW5EUywgcmVjb3JkSWRzLCByZWNvcmRzLCB0cnVlKVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXJlc3RvcmVkLW9yaWdpbi1kcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgIHpvb21FeGVjdXRlZDogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXJlc3RvcmUtb3JpZ2luLWRzLWZhaWxlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogTWF5YmUgYWNjdW11bGF0ZWRSZWNvcmRzIGV4aXN0IGJ1dCB3ZSdyZSBub3QgaW4gYWNjdW11bGF0aW9uIG1vZGU/XG4gICAgLy8gT3IgbWF5YmUgd2Ugc2hvdWxkIGFsd2F5cyBjaGVjayBhY2N1bXVsYXRlZFJlY29yZHMgZmlyc3Q/XG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCAmJiAhaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWRkU2VsZWN0aW9uVG9NYXAtYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbm90LWFjY3VtdWxhdGlvbi1tb2RlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbW9kZS1pcy1ub3QtYWRkLW9yLXJlbW92ZScsXG4gICAgICAgICdzaG91bGQtd2Utc3RpbGwtdXNlLXRoZW0nOiAnTkVFRFMtSU5WRVNUSUdBVElPTidcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGwgYmFjayB0byBvcmlnaW5hbCBsb2dpYyBmb3IgXCJOZXdcIiBtb2RlXG4gICAgaWYgKCFsYXN0U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWRkU2VsZWN0aW9uVG9NYXAtbm8tbGFzdFNlbGVjdGlvbi1leGl0aW5nJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnbm8tbGFzdFNlbGVjdGlvbi1zby1leGl0aW5nLWVhcmx5LW1heWJlLXNob3VsZC1jaGVjay1hY2N1bXVsYXRlZC1yZWNvcmRzLWZpcnN0J1xuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgICBjb25zdCBvdXRwdXREUyA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlKGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIFxuICAgIGlmICghb3V0cHV0RFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtb3V0cHV0LWRzLW5vdC1mb3VuZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3V0cHV0RHNJZDogbGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gR2V0IHJlY29yZHMgZnJvbSBvdXRwdXQgRFMgKHNhbWUgYXMgQWRkIHRvIE1hcClcbiAgICBjb25zdCBhbGxSZWNvcmRzID0gb3V0cHV0RFMuZ2V0QWxsTG9hZGVkUmVjb3JkcygpIHx8IFtdXG4gICAgY29uc3QgcmVjb3Jkc1RvU2VsZWN0ID0gYWxsUmVjb3Jkcy5maWx0ZXIocmVjb3JkID0+IFxuICAgICAgbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMuaW5jbHVkZXMocmVjb3JkLmdldElkKCkpXG4gICAgKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXG4gICAgXG4gICAgaWYgKHJlY29yZHNUb1NlbGVjdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtbm8tbWF0Y2hpbmctcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyUmVjb3JkQ291bnQ6IGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFNhbWUgbG9naWMgYXMgQWRkIHRvIE1hcCBhY3Rpb24gLSBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCBoYW5kbGVzIGR1cGxpY2F0ZSBjaGVja2luZ1xuICAgIC8vIERvbid0IHpvb20gd2hlbiByZXN0b3Jpbmcgb24gd2lkZ2V0IG9wZW4gKEFkZCB0byBNYXAgYWN0aW9uIGhhbmRsZXMgem9vbSBmb3IgbWFudWFsIGNsaWNrcylcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB9ID0gcmVxdWlyZSgnLi9zZWxlY3Rpb24tdXRpbHMnKVxuICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goaWQsIG91dHB1dERTLCBsYXN0U2VsZWN0aW9uLnJlY29yZElkcywgcmVjb3Jkc1RvU2VsZWN0LCB0cnVlKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXNlbGVjdGlvbi1hZGRlZC10by1tYXAnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzVG9TZWxlY3QubGVuZ3RoLFxuICAgICAgICB6b29tRXhlY3V0ZWQ6IGZhbHNlXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWFkZC10by1tYXAtZmFpbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHJlc3VsdHMgbW9kZSBjaGFuZ2UgZnJvbSBkcm9wZG93bi5cbiAgICogVXBkYXRlcyB3aWRnZXQgc3RhdGUgYW5kIGxvZ3MgdGhlIGNoYW5nZSBmb3IgZGVidWdnaW5nLlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZSA9IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ21vZGUtY2hhbmdlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIHByZXZpb3VzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIG5ld01vZGU6IG1vZGUsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG4gICAgXG4gICAgLy8gSWYgc3dpdGNoaW5nIHRvIFwiTmV3XCIgbW9kZSwgY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgIGlmIChtb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1vbi1tb2RlLXN3aXRjaCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBwcmV2aW91c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGVcbiAgICAgIH0pXG4gICAgICB0aGlzLnNldFN0YXRlKHsgcmVzdWx0c01vZGU6IG1vZGUsIGFjY3VtdWxhdGVkUmVjb3JkczogW10gfSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlc3VsdHNNb2RlOiBtb2RlIH0pXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UgPSAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1yZWNvcmRzLXVwZGF0ZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHMubGVuZ3RoXG4gICAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHsgYWNjdW11bGF0ZWRSZWNvcmRzOiByZWNvcmRzIH0pXG4gIH1cblxuICAvKipcbiAgICogTk9URTogTm8gbG9uZ2VyIG5lZWRlZCAtIHdlIHVzZSBleGlzdGluZyBvdXRwdXQgRFMgaW5zdGVhZCBvZiBjcmVhdGluZyBuZXcgb25lLlxuICAgKiBLZXB0IGZvciByZWZlcmVuY2UgYnV0IG5vdCB1c2VkLlxuICAgKi9cbiAgcHJpdmF0ZSBnZXRPckNyZWF0ZUFjY3VtdWxhdGVkUmVzdWx0c0RTID0gYXN5bmMgKG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKTogUHJvbWlzZTxGZWF0dXJlTGF5ZXJEYXRhU291cmNlPiA9PiB7XG4gICAgLy8gVGhpcyBpcyBubyBsb25nZXIgdXNlZCAtIHdlIG1lcmdlIHJlY29yZHMgaW50byBleGlzdGluZyBvdXRwdXQgRFNcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgLSB1c2UgZXhpc3Rpbmcgb3V0cHV0IERTIGluc3RlYWQnKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBzZWxlY3Rpb24gZnJvbSBtYXAgb25seSAoa2VlcHMgc2VsZWN0aW9uIGluIHdpZGdldCdzIGludGVybmFsIHN0YXRlKS5cbiAgICogQ2FsbGVkIHdoZW4gd2lkZ2V0IHBhbmVsIGNsb3NlcyB0byByZW1vdmUgc2VsZWN0aW9uIGZyb20gbWFwIHdoaWxlIHByZXNlcnZpbmcgd2lkZ2V0IHN0YXRlLlxuICAgKiBBbHdheXMgY2xlYXJzIGFjY3VtdWxhdGVkIHJlY29yZHMgaWYgdGhleSBleGlzdCwgcmVnYXJkbGVzcyBvZiBjdXJyZW50IG1vZGUuXG4gICAqL1xuICBwcml2YXRlIGNsZWFyU2VsZWN0aW9uRnJvbU1hcCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGxhc3RTZWxlY3Rpb24sIGFjY3VtdWxhdGVkUmVjb3JkcywgcmVzdWx0c01vZGUgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhbGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5zZWxlY3Rpb25SZWNvcmRDb3VudCB8fCAwXG4gICAgfSlcbiAgICBcbiAgICAvLyBBbHdheXMgY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyBpZiB0aGV5IGV4aXN0IChyZWdhcmRsZXNzIG9mIG1vZGUpXG4gICAgLy8gVGhpcyBoYW5kbGVzIHRoZSBjYXNlIHdoZXJlIG1vZGUgbWlnaHQgaGF2ZSBjaGFuZ2VkIGJ1dCByZWNvcmRzIHN0aWxsIGV4aXN0XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtY2hlY2tpbmctYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAnY29uZGl0aW9uJzogJ2FjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCcsXG4gICAgICAnY29uZGl0aW9uLXJlc3VsdCc6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgIH0pXG4gICAgXG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gR3JvdXAgYWNjdW11bGF0ZWQgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gICAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgICBcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAxOiBUcnkgdG8gZ2V0IGZyb20gcmVjb3JkLmdldERhdGFTb3VyY2UoKVxuICAgICAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2NsZWFyLWZvdW5kLW9yaWdpbi1kcy1mcm9tLXJlY29yZC1kcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbnVsbCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdyZWNvcmQuZ2V0RGF0YVNvdXJjZSgpJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAyOiBJZiB0aGF0IGZhaWxlZCwgc2VhcmNoIGFsbCBkYXRhIHNvdXJjZXMgZm9yIGEgcmVjb3JkIHdpdGggbWF0Y2hpbmcgSURcbiAgICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICAgIGNvbnN0IGRzTWFwID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2VzKClcbiAgICAgICAgICBjb25zdCBhbGxEYXRhU291cmNlcyA9IE9iamVjdC52YWx1ZXMoZHNNYXApXG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCBkcyBvZiBhbGxEYXRhU291cmNlcykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgYnkgY2hlY2tpbmcgZm9yIGdldEFsbExvYWRlZFJlY29yZHMgbWV0aG9kXG4gICAgICAgICAgICBpZiAoZHMgJiYgdHlwZW9mIChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIERTIGhhcyB0aGUgcmVjb3JkXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmVjb3JkcyA9IChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gYWxsUmVjb3Jkcy5maW5kKChyOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gci5nZXRJZCgpID09PSByZWNvcmRJZClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIHRoZSByZWNvcmQgLSBnZXQgb3JpZ2luIERTIGZyb20gdGhpcyBEU1xuICAgICAgICAgICAgICAgICAgb3JpZ2luRFMgPSAoZHMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1mb3VuZC1vcmlnaW4tZHMtdmlhLXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NlYXJjaGVkLWFsbC1kYXRhLXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hlZERTSWQ6IGRzLmlkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1jb3VsZC1ub3QtZmluZC1vcmlnaW4tZHMtZm9yLXJlY29yZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIHdhcm5pbmc6ICdyZWNvcmQtd2lsbC1iZS1za2lwcGVkJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2xlYXJpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1mcm9tLW1hcCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG9yaWdpbkRTQ291bnQ6IHJlY29yZHNCeU9yaWdpbkRTLnNpemVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIENsZWFyIHNlbGVjdGlvbiBmcm9tIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICByZWNvcmRzQnlPcmlnaW5EUy5mb3JFYWNoKChyZWNvcmRzLCBvcmlnaW5EUykgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBDbGVhciBzZWxlY3Rpb24gZnJvbSBvcmlnaW5EUyAobWFwKSBvbmx5XG4gICAgICAgICAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMoW10sIFtdKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQdWJsaXNoIGNsZWFyIG1lc3NhZ2Ugc28gbWFwIGtub3dzIHRvIGNsZWFyXG4gICAgICAgICAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgICAgICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKGlkLCBbXSwgW29yaWdpbkRTLmlkXSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmVkLW9yaWdpbi1kcy1zZWxlY3Rpb24nLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyLW9yaWdpbi1kcy1mYWlsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1jbGVhcmVkLWFjY3VtdWxhdGVkLXJlY29yZHMtcmV0dXJuaW5nJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAnd2lsbC1ub3QtZmFsbGJhY2stdG8tbGFzdFNlbGVjdGlvbic6IHRydWVcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogTWF5YmUgYWNjdW11bGF0ZWRSZWNvcmRzIGV4aXN0IGJ1dCB3ZSBkaWRuJ3QgZW50ZXIgdGhlIGlmIGJsb2NrP1xuICAgIC8vIE9yIG1heWJlIHdlIHNob3VsZCBhbHdheXMgY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyBpZiB0aGV5IGV4aXN0P1xuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbm90LWNsZWFyaW5nJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtY29uZGl0aW9uLWZhaWxlZC13aHknLFxuICAgICAgICAnY29uZGl0aW9uLXdhcyc6ICdhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAnLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGwgYmFjayB0byBvcmlnaW5hbCBsb2dpYyBmb3IgXCJOZXdcIiBtb2RlXG4gICAgaWYgKCFsYXN0U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLW5vLWxhc3RTZWxlY3Rpb24tZXhpdGluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnbm8tbGFzdFNlbGVjdGlvbi1zby1leGl0aW5nLW1heWJlLXNob3VsZC1oYXZlLWNsZWFyZWQtYWNjdW11bGF0ZWQtcmVjb3Jkcy1maXJzdCdcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3Qgb3V0cHV0RFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShsYXN0U2VsZWN0aW9uLm91dHB1dERzSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICBpZiAoIW91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLW91dHB1dC1kcy1ub3QtZm91bmQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgb3JpZ2luIERTICh0aGUgbWFwIGxheWVyKVxuICAgICAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgXG4gICAgICBpZiAoIW9yaWdpbkRTKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1vcmlnaW4tZHMtbm90LWZvdW5kJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgb3V0cHV0RHNJZDogbGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBjdXJyZW50IHNlbGVjdGlvbiBzdGF0ZSBiZWZvcmUgY2xlYXJpbmdcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IG91clJlY29yZElkcyA9IGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzXG4gICAgICBjb25zdCBtYXRjaGVzT3VyU2VsZWN0aW9uID0gb3VyUmVjb3JkSWRzLmxlbmd0aCA9PT0gY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCAmJlxuICAgICAgICBvdXJSZWNvcmRJZHMuZXZlcnkocmVjb3JkSWQgPT4gY3VycmVudFNlbGVjdGVkSWRzLmluY2x1ZGVzKHJlY29yZElkKSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jaGVja2luZy1tYXAtc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXJSZWNvcmRDb3VudDogb3VyUmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgbWFwU2VsZWN0ZWRDb3VudDogY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgbWF0Y2hlc091clNlbGVjdGlvbixcbiAgICAgICAgb3VyUmVjb3JkSWRzOiBvdXJSZWNvcmRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgIG1hcFNlbGVjdGVkSWRzOiBjdXJyZW50U2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSlcbiAgICAgIH0pXG5cbiAgICAgIGlmICh0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIENsZWFyIHNlbGVjdGlvbiBmcm9tIG9yaWdpbkRTIChtYXApIG9ubHkgLSBkb24ndCB0b3VjaCBvdXRwdXREUyAod2lkZ2V0IHN0YXRlKVxuICAgICAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMoW10sIFtdKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyZWQtb3JpZ2luLWRzLXNlbGVjdGlvbicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBQdWJsaXNoIGNsZWFyIG1lc3NhZ2Ugc28gbWFwIGtub3dzIHRvIGNsZWFyXG4gICAgICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZShpZCwgW10sIFtvcmlnaW5EUy5pZF0pXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1wdWJsaXNoZWQtY2xlYXItbWVzc2FnZScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBWZXJpZnkgc2VsZWN0aW9uIHdhcyBjbGVhcmVkXG4gICAgICAgIGNvbnN0IGFmdGVyQ2xlYXJJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1zZWxlY3Rpb24tY2xlYXJlZC1mcm9tLW1hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIHJlY29yZENvdW50OiBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgc2VsZWN0aW9uQWZ0ZXJDbGVhcjogYWZ0ZXJDbGVhcklkcy5sZW5ndGgsXG4gICAgICAgICAgdmVyaWZpZWRDbGVhcmVkOiBhZnRlckNsZWFySWRzLmxlbmd0aCA9PT0gMFxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLW9yaWdpbi1kcy1uby1zZWxlY3QtbWV0aG9kJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgaGFzU2VsZWN0TWV0aG9kOiB0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2xlYXItZnJvbS1tYXAtZmFpbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvZ3MgdmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VzLlxuICAgKi9cbiAgbG9nVmlzaWJpbGl0eUNoYW5nZSA9IChpc1Zpc2libGU6IGJvb2xlYW4sIG1ldGhvZDogc3RyaW5nKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICBldmVudDogaXNWaXNpYmxlID8gJ3BhbmVsLW9wZW5lZCcgOiAncGFuZWwtY2xvc2VkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaXNWaXNpYmxlLFxuICAgICAgbWV0aG9kLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICAgIFxuICAgIGlmIChpc1Zpc2libGUpIHtcbiAgICAgIC8vIFdoZW4gcGFuZWwgb3BlbnMsIGNoZWNrIGlmIHdlIGhhdmUgc2VsZWN0aW9uIHRvIHJlc3RvcmVcbiAgICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICAgIGNvbnN0IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyA9IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzICYmIHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDBcbiAgICAgIGNvbnN0IGhhc1NlbGVjdGlvblN0YXRlID0gdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gfHwgZmFsc2VcbiAgICAgIGNvbnN0IGhhc1NlbGVjdGlvblRvUmVzdG9yZSA9IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgPyBoYXNBY2N1bXVsYXRlZFJlY29yZHMgXG4gICAgICAgIDogaGFzU2VsZWN0aW9uU3RhdGVcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1jaGVja2luZy1zZWxlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5zZWxlY3Rpb25SZWNvcmRDb3VudCB8fCAwLFxuICAgICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgICAgbGFzdFNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzU2VsZWN0aW9uVG9SZXN0b3JlLFxuICAgICAgICBkZWNpc2lvbkxvZ2ljOiB7XG4gICAgICAgICAgJ2lzQWNjdW11bGF0aW9uTW9kZSc6IGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgICAnaGFzQWNjdW11bGF0ZWRSZWNvcmRzJzogaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICAgICdoYXNTZWxlY3Rpb25TdGF0ZSc6IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICAgICdjYWxjdWxhdGVkLWhhc1NlbGVjdGlvblRvUmVzdG9yZSc6IGhhc1NlbGVjdGlvblRvUmVzdG9yZSxcbiAgICAgICAgICAnd2lsbC1jYWxsLWFkZFNlbGVjdGlvblRvTWFwJzogaGFzU2VsZWN0aW9uVG9SZXN0b3JlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIEFkZCBzZWxlY3Rpb24gdG8gbWFwIGlmIHdlIGhhdmUgb25lXG4gICAgICBpZiAoaGFzU2VsZWN0aW9uVG9SZXN0b3JlKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1jYWxsaW5nLWFkZFNlbGVjdGlvblRvTWFwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUtaXMtdHJ1ZSdcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5hZGRTZWxlY3Rpb25Ub01hcCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtc2tpcHBpbmctYWRkU2VsZWN0aW9uVG9NYXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvUmVzdG9yZS1pcy1mYWxzZScsXG4gICAgICAgICAgd2h5OiBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgICAgICA/ICduby1hY2N1bXVsYXRlZC1yZWNvcmRzJyBcbiAgICAgICAgICAgIDogJ25vLWhhc1NlbGVjdGlvbi1zdGF0ZSdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2hlbiBwYW5lbCBjbG9zZXMsIGNsZWFyIHNlbGVjdGlvbiBmcm9tIG1hcCBvbmx5IChrZWVwIHdpZGdldCBzdGF0ZSlcbiAgICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICAgIGNvbnN0IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyA9IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzICYmIHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDBcbiAgICAgIGNvbnN0IGhhc1NlbGVjdGlvblN0YXRlID0gdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gfHwgZmFsc2VcbiAgICAgIGNvbnN0IGhhc1NlbGVjdGlvblRvQ2xlYXIgPSBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgID8gaGFzQWNjdW11bGF0ZWRSZWNvcmRzIFxuICAgICAgICA6IGhhc1NlbGVjdGlvblN0YXRlXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2hlY2tpbmctc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGhhc1NlbGVjdGlvbjogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUuc2VsZWN0aW9uUmVjb3JkQ291bnQgfHwgMCxcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24sXG4gICAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc1NlbGVjdGlvblRvQ2xlYXIsXG4gICAgICAgIGRlY2lzaW9uTG9naWM6IHtcbiAgICAgICAgICAnaXNBY2N1bXVsYXRpb25Nb2RlJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAgICdoYXNBY2N1bXVsYXRlZFJlY29yZHMnOiBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgICAgJ2hhc1NlbGVjdGlvblN0YXRlJzogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgICAgJ2NhbGN1bGF0ZWQtaGFzU2VsZWN0aW9uVG9DbGVhcic6IGhhc1NlbGVjdGlvblRvQ2xlYXIsXG4gICAgICAgICAgJ3dpbGwtY2FsbC1jbGVhclNlbGVjdGlvbkZyb21NYXAnOiBoYXNTZWxlY3Rpb25Ub0NsZWFyXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChoYXNTZWxlY3Rpb25Ub0NsZWFyKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jYWxsaW5nLWNsZWFyU2VsZWN0aW9uRnJvbU1hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9DbGVhci1pcy10cnVlJ1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uRnJvbU1hcCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtbm8tc2VsZWN0aW9uLXRvLWNsZWFyJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub0NsZWFyLWlzLWZhbHNlJyxcbiAgICAgICAgICB3aHk6IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgICAgID8gJ25vLWFjY3VtdWxhdGVkLXJlY29yZHMnIFxuICAgICAgICAgICAgOiAnbm8taGFzU2VsZWN0aW9uLXN0YXRlJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZmllcyBIZWxwZXJTaW1wbGUgb2YgcGFuZWwgdmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VzLlxuICAgKi9cbiAgbm90aWZ5SGVscGVyU2ltcGxlT2ZQYW5lbFN0YXRlID0gKGlzVmlzaWJsZTogYm9vbGVhbikgPT4ge1xuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBpc09wZW46IGlzVmlzaWJsZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgaGFzaCBwYXJhbWV0ZXIgZnJvbSB0aGUgVVJMIGFmdGVyIGl0IGhhcyBiZWVuIHVzZWQgdG8gcG9wdWxhdGUgYSBxdWVyeS5cbiAgICogVGhpcyBwcmV2ZW50cyB0aGUgcGFyYW1ldGVyIGZyb20gYmVpbmcgcmUtYXBwbGllZCB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJpZXMuXG4gICAqL1xuICByZW1vdmVIYXNoUGFyYW1ldGVyID0gKHNob3J0SWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBpZiAoIWhhc2gpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgXG4gICAgaWYgKHVybFBhcmFtcy5oYXMoc2hvcnRJZCkpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdXJsUGFyYW1zLmdldChzaG9ydElkKVxuICAgICAgdXJsUGFyYW1zLmRlbGV0ZShzaG9ydElkKVxuICAgICAgY29uc3QgbmV3SGFzaCA9IHVybFBhcmFtcy50b1N0cmluZygpXG4gICAgICAvLyBVcGRhdGUgVVJMIHdpdGhvdXQgdHJpZ2dlcmluZyBuYXZpZ2F0aW9uXG4gICAgICAvLyBJZiBubyBoYXNoIHBhcmFtcyByZW1haW4sIHJlbW92ZSBoYXNoIGVudGlyZWx5LCBvdGhlcndpc2Uga2VlcCB0aGUgaGFzaFxuICAgICAgY29uc3QgbmV3VXJsID0gbmV3SGFzaCBcbiAgICAgICAgPyBgJHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9JHt3aW5kb3cubG9jYXRpb24uc2VhcmNofSMke25ld0hhc2h9YCBcbiAgICAgICAgOiBgJHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9JHt3aW5kb3cubG9jYXRpb24uc2VhcmNofWBcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ2hhc2gtcmVtb3ZlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBzaG9ydElkOiBzaG9ydElkLFxuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIG5ld0hhc2g6IG5ld0hhc2gsXG4gICAgICAgIG5ld1VybDogbmV3VXJsXG4gICAgICB9KVxuICAgICAgXG4gICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgJycsIG5ld1VybClcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgdGhlIHN0YXRlIHNvIGl0IHdvbid0IHRyaWdnZXIgYWdhaW5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID09PSBzaG9ydElkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbml0aWFsUXVlcnlWYWx1ZTogdW5kZWZpbmVkIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyB0aGUgVVJMIGhhc2ggcGFyYW1ldGVycyBmb3IgYW55IHNob3J0SWRzIHRoYXQgbWF0Y2ggcXVlcnkgaXRlbXMuXG4gICAqIElmIGZvdW5kLCBzdG9yZXMgdGhlIHZhbHVlIHRvIGJlIHVzZWQgdG8gYXV0by1wb3B1bGF0ZSBhbmQgZXhlY3V0ZSB0aGUgcXVlcnkuXG4gICAqIEV4cGVyaWVuY2UgQnVpbGRlciB1c2VzIGhhc2gtYmFzZWQgVVJMIHBhcmFtZXRlcnMgKGUuZy4sICNwaW49MjIyMzA1OTAxMykuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBwcmlvcml0aXplcyB0aGUgZmlyc3QgbWF0Y2hpbmcgc2hvcnRJZCBmb3VuZCBpbiB0aGUgcXVlcnkgaXRlbXMgb3JkZXIuXG4gICAqIElmIG11bHRpcGxlIGhhc2ggcGFyYW1ldGVycyBleGlzdCwgb25seSB0aGUgZmlyc3QgbWF0Y2ggaXMgdXNlZC5cbiAgICovXG4gIGNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghY29uZmlnLnF1ZXJ5SXRlbXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBhbGwgc2hvcnRJZHMgZnJvbSBxdWVyeSBpdGVtc1xuICAgIGNvbnN0IHNob3J0SWRzID0gY29uZmlnLnF1ZXJ5SXRlbXNcbiAgICAgIC5tYXAoaXRlbSA9PiBpdGVtLnNob3J0SWQpXG4gICAgICAuZmlsdGVyKHNob3J0SWQgPT4gc2hvcnRJZCAhPSBudWxsICYmIHNob3J0SWQudHJpbSgpICE9PSAnJylcblxuICAgIGlmIChzaG9ydElkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCBVUkwgaGFzaCBmcmFnbWVudCBwYXJhbWV0ZXJzIChFeEIgdXNlcyAjIGZvciBwYXJhbXMpXG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSAvLyBSZW1vdmUgdGhlICNcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG5cbiAgICAvLyBMb2cgaGFzaCBjaGVjayBmb3IgZGVidWdnaW5nXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdoYXNoLWNoZWNrJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaGFzaDogaGFzaCxcbiAgICAgIGF2YWlsYWJsZVNob3J0SWRzOiBzaG9ydElkcyxcbiAgICAgIGN1cnJlbnRTdGF0ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZVxuICAgIH0pXG5cbiAgICAvLyBGaW5kIHRoZSBmaXJzdCBtYXRjaGluZyBzaG9ydElkIChwcmlvcml0aXplIGZpcnN0IG1hdGNoIGluIHF1ZXJ5IGl0ZW1zIG9yZGVyKVxuICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBvbmx5IHNldCBzdGF0ZSBvbmNlIHBlciBjaGVjayBhbmQgbWFpbnRhaW5zIGNvbnNpc3RlbnQgYmVoYXZpb3JcbiAgICBmb3IgKGNvbnN0IHNob3J0SWQgb2Ygc2hvcnRJZHMpIHtcbiAgICAgIGlmICh1cmxQYXJhbXMuaGFzKHNob3J0SWQpKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdXJsUGFyYW1zLmdldChzaG9ydElkKVxuICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQgdG8gYXZvaWQgdW5uZWNlc3NhcnkgcmUtcmVuZGVyc1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCAhPT0gc2hvcnRJZCB8fCB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhc2gtZGV0ZWN0ZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICBzaG9ydElkOiBzaG9ydElkLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcHJldmlvdXNTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgICAgcHJldmlvdXNWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJlc2V0IHRvIE5ldyBtb2RlIHdoZW4gaGFzaCBwYXJhbWV0ZXIgaXMgZGV0ZWN0ZWQgdG8gYXZvaWQgYnVncyB3aXRoIGFjY3VtdWxhdGlvbiBtb2Rlc1xuICAgICAgICAgIGNvbnN0IG5lZWRzTW9kZVJlc2V0ID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSAhPT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgXG4gICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZTogeyBzaG9ydElkLCB2YWx1ZSB9LFxuICAgICAgICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgYW5kIGNsZWFyIGFjY3VtdWxhdGVkUmVjb3JkcyAoc2FtZSBhcyBoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZSBkb2VzKVxuICAgICAgICAgICAgLi4uKG5lZWRzTW9kZVJlc2V0ID8geyBcbiAgICAgICAgICAgICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IFtdXG4gICAgICAgICAgICB9IDoge30pXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAobmVlZHNNb2RlUmVzZXQpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXJlc2V0LW1vZGUtdG8tbmV3JyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgIHByZXZpb3VzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgICAgICAgcmVhc29uOiAnaGFzaC1wYXJhbWV0ZXItZGV0ZWN0ZWQnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhc2gtc2tpcHBlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgIHNob3J0SWQ6IHNob3J0SWQsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICByZWFzb246ICd2YWx1ZS11bmNoYW5nZWQnXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLy8gRXhpdCBhZnRlciBmaXJzdCBtYXRjaFxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIG5vIGhhc2ggcGFyYW1ldGVycyBtYXRjaCBhbnkgc2hvcnRJZCwgY2xlYXIgdGhlIHN0YXRlXG4gICAgLy8gVGhpcyBoYW5kbGVzIGNhc2VzIHdoZXJlIGhhc2ggcGFyYW1ldGVycyB3ZXJlIHJlbW92ZWRcbiAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ2hhc2gtY2xlYXJlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBwcmV2aW91c1Nob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUuc2hvcnRJZCxcbiAgICAgICAgcHJldmlvdXNWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZS52YWx1ZSxcbiAgICAgICAgcmVhc29uOiAnbm8tbWF0Y2hpbmctaGFzaC1wYXJhbXMnXG4gICAgICB9KVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWQgfSlcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgY29uZmlnLCBpZCwgaWNvbiwgbGFiZWwsIGxheW91dElkLCBsYXlvdXRJdGVtSWQsIGNvbnRyb2xsZXJXaWRnZXRJZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHdpZGdldExhYmVsID0gdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2Uoe1xuICAgICAgaWQ6ICdfd2lkZ2V0TGFiZWwnLFxuICAgICAgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5fd2lkZ2V0TGFiZWxcbiAgICB9KVxuICAgIGlmICghY29uZmlnLnF1ZXJ5SXRlbXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIDxXaWRnZXRQbGFjZWhvbGRlciBpY29uPXtpY29uTWFwLmljb25RdWVyeX0gd2lkZ2V0SWQ9e3RoaXMucHJvcHMuaWR9IG5hbWU9e3dpZGdldExhYmVsfSAvPlxuICAgIH1cblxuICAgIGlmIChjb25maWcuYXJyYW5nZVR5cGUgPT09IFF1ZXJ5QXJyYW5nZVR5cGUuUG9wcGVyICYmICFjb250cm9sbGVyV2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICA8VGFza0xpc3RQb3BwZXJXcmFwcGVyXG4gICAgICAgICAgICBpZD17MH1cbiAgICAgICAgICAgIGljb249e2ljb259XG4gICAgICAgICAgICBwb3BwZXJUaXRsZT17bGFiZWx9XG4gICAgICAgICAgICBtaW5TaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5taW5TaXplfVxuICAgICAgICAgICAgZGVmYXVsdFNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/LmRlZmF1bHRTaXplfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxRdWVyeVRhc2tMaXN0IFxuICAgICAgICAgICAgICB3aWRnZXRJZD17aWR9IFxuICAgICAgICAgICAgICBpc0luUG9wcGVyIFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc30gXG4gICAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX0gXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0ncGItNCcgXG4gICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlPXt0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlfSBcbiAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17dGhpcy5yZW1vdmVIYXNoUGFyYW1ldGVyfVxuICAgICAgICAgICAgICByZXN1bHRzTW9kZT17dGhpcy5zdGF0ZS5yZXN1bHRzTW9kZX1cbiAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17dGhpcy5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXt0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e3RoaXMuaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L1Rhc2tMaXN0UG9wcGVyV3JhcHBlcj5cbiAgICAgICAgPC9RdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXI+XG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5hcnJhbmdlVHlwZSA9PT0gUXVlcnlBcnJhbmdlVHlwZS5JbmxpbmUgJiYgIWNvbnRyb2xsZXJXaWRnZXRJZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFF1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17YCR7bGF5b3V0SWR9OiR7bGF5b3V0SXRlbUlkfWB9PlxuICAgICAgICAgIDxUYXNrTGlzdElubGluZVxuICAgICAgICAgICAgd2lkZ2V0SWQ9e2lkfVxuICAgICAgICAgICAgd2lkZ2V0TGFiZWw9e2xhYmVsfVxuICAgICAgICAgICAgd3JhcD17Y29uZmlnLmFycmFuZ2VXcmFwfVxuICAgICAgICAgICAgcXVlcnlJdGVtcz17Y29uZmlnLnF1ZXJ5SXRlbXN9XG4gICAgICAgICAgICBtaW5TaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5taW5TaXplfVxuICAgICAgICAgICAgZGVmYXVsdFNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/LmRlZmF1bHRTaXplfVxuICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtjb25maWcuZGVmYXVsdFBhZ2VTaXplfVxuICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9XG4gICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXt0aGlzLnJlbW92ZUhhc2hQYXJhbWV0ZXJ9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9RdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXI+XG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYXBlciByZWY9e3RoaXMud2lkZ2V0UmVmfSB2YXJpYW50PSdmbGF0JyBjbGFzc05hbWU9J2ppbXUtd2lkZ2V0IHJ1bnRpbWUtcXVlcnknIGNzcz17Y3NzYFxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBgfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3aWRnZXQtaGVhZGVyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogNnB4IDE2cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UpO1xuICAgICAgICBgfT5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwid2lkZ2V0LXRpdGxlXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgIGB9PlxuICAgICAgICAgICAge2xhYmVsIHx8IHdpZGdldExhYmVsfVxuICAgICAgICAgIDwvaDM+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIGB9PlxuICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgICAgIDxRdWVyeVRhc2tMaXN0IFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtpZH0gXG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtcz17Y29uZmlnLnF1ZXJ5SXRlbXN9IFxuICAgICAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX0gXG4gICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9IFxuICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMucmVtb3ZlSGFzaFBhcmFtZXRlcn1cbiAgICAgICAgICAgICAgICByZXN1bHRzTW9kZT17dGhpcy5zdGF0ZS5yZXN1bHRzTW9kZX1cbiAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlPXt0aGlzLmhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcz17dGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHN9XG4gICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e3RoaXMuaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9RdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey8qIFN0YXRpb25hcnkgZm9vdGVyICovfVxuICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcbiAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgXG4gICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIxNiAxOCAyMiAxMiAxNiA2XCIvPlxuICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgUXVlcnlTaW1wbGUgYnkgTWFwU2ltcGxlLm9yZ1xuICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuN3JlbTtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgdntXSURHRVRfVkVSU0lPTn1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvUGFwZXI+XG4gICAgKVxuICB9XG59XG5cblxuIGV4cG9ydCBmdW5jdGlvbiBfX3NldF93ZWJwYWNrX3B1YmxpY19wYXRoX18odXJsKSB7IF9fd2VicGFja19wdWJsaWNfcGF0aF9fID0gdXJsIH0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=