System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/sql-expression-runtime","jimu-theme","widgets/shared-code/common","jimu-layouts/layout-runtime","jimu-core/react"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	var __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_react__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_react__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_react__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/filled/directional/down.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/filled/directional/down.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownFilled: () => (/* binding */ DownFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/down.svg */ "./jimu-icons/svg/filled/directional/down.svg");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/filled/directional/right.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/filled/directional/right.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightFilled: () => (/* binding */ RightFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/right.svg */ "./jimu-icons/svg/filled/directional/right.svg");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowLeftOutlined: () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/collapse-all.tsx":
/*!**********************************************************!*\
  !*** ./jimu-icons/outlined/directional/collapse-all.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollapseAllOutlined: () => (/* binding */ CollapseAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/collapse-all.svg */ "./jimu-icons/svg/outlined/directional/collapse-all.svg");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CollapseAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/expand-all.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/expand-all.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExpandAllOutlined: () => (/* binding */ ExpandAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/expand-all.svg */ "./jimu-icons/svg/outlined/directional/expand-all.svg");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ExpandAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/trash.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TrashOutlined: () => (/* binding */ TrashOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/svg/filled/directional/down.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/down.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m14 4-6 8-6-8z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/directional/right.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/right.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m4 2 8 6-8 6z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/collapse-all.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/collapse-all.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/expand-all.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/expand-all.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/error.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/error.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/icon.svg":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/query-simple/icon.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" d=\"M8.5 3A5.5 5.5 0 0 1 14 8.5a5.5 5.5 0 0 1-1.273 3.527l4.053 4.054a.75.75 0 1 1-1.06 1.06l-4.054-4.053a5.5 5.5 0 0 1-3.527 1.273 5.5 5.5 0 1 1 0-11H8.5zm0 1.5h-.361a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\"></path><rect width=\"19\" height=\"19\" x=\".5\" y=\".5\" stroke=\"#000\" rx=\"1.5\"></rect></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/config.ts":
/*!************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateToolType: () => (/* binding */ CreateToolType),
/* harmony export */   FieldsType: () => (/* binding */ FieldsType),
/* harmony export */   ListDirection: () => (/* binding */ ListDirection),
/* harmony export */   PagingType: () => (/* binding */ PagingType),
/* harmony export */   QueryArrangeType: () => (/* binding */ QueryArrangeType),
/* harmony export */   ResultSelectMode: () => (/* binding */ ResultSelectMode),
/* harmony export */   SelectionType: () => (/* binding */ SelectionType),
/* harmony export */   SortDirection: () => (/* binding */ SortDirection),
/* harmony export */   SpatialFilterType: () => (/* binding */ SpatialFilterType),
/* harmony export */   SpatialRelation: () => (/* binding */ SpatialRelation),
/* harmony export */   SymbolType: () => (/* binding */ SymbolType),
/* harmony export */   UnitType: () => (/* binding */ UnitType),
/* harmony export */   mapJSAPISpatialRelToDsSpatialRel: () => (/* binding */ mapJSAPISpatialRelToDsSpatialRel),
/* harmony export */   mapJSAPIUnitToDsUnit: () => (/* binding */ mapJSAPIUnitToDsUnit)
/* harmony export */ });
var CreateToolType;
(function (CreateToolType) {
    CreateToolType["Point"] = "Point";
    CreateToolType["Polyline"] = "Polyline";
    CreateToolType["Polygon"] = "Polygon";
    CreateToolType["Rectangle"] = "Rectangle";
    CreateToolType["Circle"] = "Circle";
})(CreateToolType || (CreateToolType = {}));
var SelectionType;
(function (SelectionType) {
    SelectionType["NewSelection"] = "NEW_SELECTION";
    SelectionType["AddToSelection"] = "ADD_TO_CURRENT_SELECTION";
    SelectionType["RemoveFromSelection"] = "REMOVE_FROM_CURRENT_SELECTION";
    SelectionType["SubsetSelection"] = "SUBSET_FROM_CURRENT_SELECTION";
    SelectionType["SwitchSelection"] = "SWITCH_CURRENT_SELECTION";
})(SelectionType || (SelectionType = {}));
var QueryArrangeType;
(function (QueryArrangeType) {
    QueryArrangeType["Block"] = "BLOCK";
    QueryArrangeType["Inline"] = "INLINE";
    QueryArrangeType["Popper"] = "POPPER";
})(QueryArrangeType || (QueryArrangeType = {}));
var SpatialFilterType;
(function (SpatialFilterType) {
    SpatialFilterType["CurrentMapExtent"] = "CurrentMapExtent";
    SpatialFilterType["InteractiveDrawMode"] = "InteractiveDrawMode";
    SpatialFilterType["None"] = "";
})(SpatialFilterType || (SpatialFilterType = {}));
var SpatialRelation;
(function (SpatialRelation) {
    SpatialRelation["Intersect"] = "intersects";
    SpatialRelation["Contain"] = "contains";
    SpatialRelation["Cross"] = "crosses";
    SpatialRelation["EnvelopeIntersect"] = "envelope-intersects";
    SpatialRelation["IndexIntersect"] = "index-intersects";
    SpatialRelation["Overlap"] = "overlaps";
    SpatialRelation["Touch"] = "touches";
    SpatialRelation["Within"] = "within";
})(SpatialRelation || (SpatialRelation = {}));
const mapJSAPISpatialRelToDsSpatialRel = {
    [SpatialRelation.Intersect]: 'esriSpatialRelIntersects',
    [SpatialRelation.Contain]: 'esriSpatialRelContains',
    [SpatialRelation.Cross]: 'esriSpatialRelCrosses',
    [SpatialRelation.EnvelopeIntersect]: 'esriSpatialRelEnvelopeIntersects',
    [SpatialRelation.IndexIntersect]: 'esriSpatialRelIndexIntersects',
    [SpatialRelation.Overlap]: 'esriSpatialRelOverlaps',
    [SpatialRelation.Touch]: 'esriSpatialRelTouches',
    [SpatialRelation.Within]: 'esriSpatialRelWithin'
};
var UnitType;
(function (UnitType) {
    UnitType["Miles"] = "Miles";
    UnitType["Kilometers"] = "Kilometers";
    UnitType["Feet"] = "Feet";
    UnitType["Meters"] = "Meters";
    UnitType["NauticalMiles"] = "NauticalMiles";
})(UnitType || (UnitType = {}));
const mapJSAPIUnitToDsUnit = {
    [UnitType.Miles]: 'esriSRUnit_StatuteMile',
    [UnitType.Kilometers]: 'esriSRUnit_Kilometer',
    [UnitType.Feet]: 'esriSRUnit_Foot',
    [UnitType.Meters]: 'esriSRUnit_Meter',
    [UnitType.NauticalMiles]: 'esriSRUnit_NauticalMile'
};
var ListDirection;
(function (ListDirection) {
    ListDirection["Horizontal"] = "Horizontal";
    ListDirection["Vertical"] = "Vertical";
})(ListDirection || (ListDirection = {}));
var PagingType;
(function (PagingType) {
    PagingType["MultiPage"] = "MultiPage";
    PagingType["LazyLoad"] = "LazyLoad";
    PagingType["Simple"] = "Simple";
})(PagingType || (PagingType = {}));
var FieldsType;
(function (FieldsType) {
    FieldsType["PopupSetting"] = "PopupSetting";
    FieldsType["SelectAttributes"] = "SelectAttributes";
})(FieldsType || (FieldsType = {}));
var SortDirection;
(function (SortDirection) {
    SortDirection["Asc"] = "Asc";
    SortDirection["Desc"] = "Desc";
})(SortDirection || (SortDirection = {}));
var ResultSelectMode;
(function (ResultSelectMode) {
    ResultSelectMode["Single"] = "Single";
    ResultSelectMode["Multiple"] = "Multiple";
})(ResultSelectMode || (ResultSelectMode = {}));
var SymbolType;
(function (SymbolType) {
    SymbolType["DefaultSymbol"] = "DefaultSymbol";
    SymbolType["CustomSymbol"] = "CustomSymbol";
})(SymbolType || (SymbolType = {}));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAddToMapAction: () => (/* binding */ createAddToMapAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Custom "Add to Map" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Show on Map" action with a custom
 * implementation that uses QuerySimple's selection process (selectRecordsAndPublish).
 * This ensures consistent behavior with query results and proper integration
 * with the widget's "Clear results" functionality.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Add to Map" data action that uses QuerySimple's selection process.
 *
 * This action replaces the framework's "Show on Map" action and ensures consistent
 * behavior with QuerySimple's query results by using the same selection mechanism.
 *
 * @param widgetId - The widget ID that provides this action
 * @param outputDS - The output data source (used for selection on the origin layer)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration (for zoomToSelected setting)
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns A DataAction object that can be used by DataActionList
 */
function createAddToMapAction(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    return {
        id: `${widgetId}-addToMap`,
        name: 'addToMap',
        label: intl.formatMessage({ id: 'addToMap', defaultMessage: 'Add to map' }),
        // Icon matches the framework's "Show on Map" action for consistency
        icon: (__webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg"),
        // Note: Index may not control position if extraActions are always appended after framework actions
        index: -100,
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records
            if (!dataSets || dataSets.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'No data sets'
                });
                return false;
            }
            // Check if we have records and output data source
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            const supported = hasRecords && !!outputDS;
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                result: supported,
                hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return supported;
        }),
        /**
         * Executes the action by selecting records using QuerySimple's selection process.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            if (!outputDS || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: !outputDS ? 'No outputDS' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            // Get record IDs
            const recordIds = allRecords.map(record => record.getId());
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                recordsCount: allRecords.length,
                recordIds: recordIds.slice(0, 10), // Log first 10 IDs
                outputDSId: outputDS.id
            });
            // Use QuerySimple's selection process - selects on origin layer and publishes selection messages
            // This ensures consistent behavior with query results and proper integration with "Clear results"
            try {
                (0,_runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, allRecords, true);
                // Note: Zoom is now handled by the separate "Zoom To" action in the DataActionList
                // Users can click "Zoom To" from the action menu if they want to zoom to selected records
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: true,
                    message: 'Successfully selected records and published selection message'
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/index.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getExtraActions: () => (/* binding */ getExtraActions)
/* harmony export */ });
/* harmony import */ var _add_to_map_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-to-map-action */ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx");
/* harmony import */ var _zoom_to_action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./zoom-to-action */ "./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx");


/**
 * QuerySimple Custom Data Actions
 *
 * Returns custom data actions for the widget.
 * Includes custom "Zoom To" and "Add to Map" actions that use QuerySimple's processes.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source (null/undefined if not available)
 * @param mapView - The map view (null/undefined if not available)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns Array of custom DataAction objects (empty if conditions not met)
 */
function getExtraActions(widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected) {
    const actions = [];
    // Add "Zoom To" action if we have mapView and intl
    if (mapView && intl) {
        actions.push((0,_zoom_to_action__WEBPACK_IMPORTED_MODULE_1__.createZoomToAction)(widgetId, mapView, intl));
    }
    // Add "Add to Map" action if we have outputDS and intl
    if (outputDS && intl) {
        actions.push((0,_add_to_map_action__WEBPACK_IMPORTED_MODULE_0__.createAddToMapAction)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected));
    }
    return actions;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createZoomToAction: () => (/* binding */ createZoomToAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _runtime_zoom_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runtime/zoom-utils */ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts");
/**
 * Custom "Zoom To" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Zoom To" action with a custom
 * implementation that uses QuerySimple's zoom logic (mapView.goTo with padding).
 * This ensures consistent zoom behavior with proper padding.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Zoom To" data action that uses QuerySimple's zoom logic.
 *
 * This action replaces the framework's "Zoom To" action and ensures consistent
 * zoom behavior with padding using mapView.goTo().
 *
 * @param widgetId - The widget ID that provides this action
 * @param mapView - The map view to zoom (MapView or SceneView)
 * @param intl - The Intl object for internationalization
 * @returns A DataAction object that can be used by DataActionList
 */
function createZoomToAction(widgetId, mapView, intl) {
    return {
        id: `${widgetId}-zoomTo`,
        name: 'querySimpleZoomTo', // Use unique name to avoid conflict with framework action
        label: intl.formatMessage({ id: 'zoomToSelected', defaultMessage: 'Zoom to selected' }),
        // Use the same icon as the framework's zoom action (from ExB configuration page)
        icon: (__webpack_require__(/*! ../runtime/assets/icons/zoom-to.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/zoom-to.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg"),
        index: -90, // Position before Add to Map (-100)
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasMapView: !!mapView
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records and a map view
            if (!dataSets || dataSets.length === 0 || !mapView) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-isSupported',
                    result: false,
                    reason: !dataSets || dataSets.length === 0 ? 'No data sets' : 'No mapView'
                });
                return false;
            }
            // Check if we have records
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-isSupported',
                result: hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return hasRecords;
        }),
        /**
         * Executes the action by zooming to records using the shared zoom utility.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasMapView: !!mapView
            });
            if (!mapView || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
                if (!mapView) {
                    debugLogger.log('BUG', {
                        bugId: 'BUG-GRAPHICS-001',
                        category: 'GRAPHICS',
                        event: 'zoom-operation-failed-graphics-layer-disabled',
                        widgetId,
                        operation: 'zoom-to-selected-action',
                        dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                        description: 'Zoom to selected action attempted but mapView is unavailable (likely because useGraphicsLayerForHighlight is disabled)',
                        workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                        targetResolution: 'r019.0'
                    });
                }
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    reason: !mapView ? 'No mapView' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            try {
                // Use the shared zoom utility function
                yield (0,_runtime_zoom_utils__WEBPACK_IMPORTED_MODULE_2__.zoomToRecords)(mapView, allRecords);
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: true,
                    message: 'Successfully zoomed to features',
                    recordsCount: allRecords.length
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/default-query-item.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/default-query-item.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_QUERY_ITEM: () => (/* binding */ DEFAULT_QUERY_ITEM)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/query-simple/src/config.ts");

const DEFAULT_QUERY_ITEM = {
    icon: null,
    displayLabel: true,
    sqlExprObj: null,
    useAttributeFilter: true,
    useSpatialFilter: true,
    spatialMapWidgetIds: [],
    spatialFilterTypes: [],
    spatialInteractiveCreateToolTypes: [
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Point,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polyline,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polygon,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Rectangle,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Circle
    ],
    spatialInteractiveEnableBuffer: false,
    spatialInteractiveBufferDistance: 0,
    spatialInteractiveBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    spatialRelations: [_config__WEBPACK_IMPORTED_MODULE_0__.SpatialRelation.Intersect],
    spatialRelationUseDataSources: [],
    spatialRelationEnableSelectTool: false,
    spatialRelationEnableBuffer: false,
    spatialRelationBufferDistance: 0,
    spatialRelationBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    resultListDirection: _config__WEBPACK_IMPORTED_MODULE_0__.ListDirection.Vertical,
    resultPagingStyle: _config__WEBPACK_IMPORTED_MODULE_0__.PagingType.MultiPage,
    resultFieldsType: _config__WEBPACK_IMPORTED_MODULE_0__.FieldsType.PopupSetting,
    resultSymbolType: _config__WEBPACK_IMPORTED_MODULE_0__.SymbolType.DefaultSymbol,
    resultCustomSymbol: {
        angle: 0,
        color: [255, 255, 255, 255],
        outline: {
            color: [255, 255, 255, 255],
            style: 'esriSLSSolid',
            type: 'esriSLS',
            width: 1
        },
        size: 6,
        style: 'esriSMSCircle',
        type: 'esriSMS',
        xoffset: 0,
        yoffset: 0
    },
    resultAllowChangeSymbol: false,
    allowExport: false,
    sortOptions: [],
    zoomToSelected: true,
    itemSizeMap: {
        arrangementHorizontalPopper: {
            minSize: { width: 300, height: 300 },
            defaultSize: { width: 360, height: 480 }
        }
    }
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg":
/*!***********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg ***!
  \***********************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M0 10.5V12a1 1 0 0 0 1 1h1.5v-1H1v-1.5zM2.5 1H1a1 1 0 0 0-1 1v1.5h1V2h1.5zM0 8.5h1v-3H0zM4.5 1v1h3V1zm5 0v1H11v1.5h1V2a1 1 0 0 0-1-1zM6.318 13.682a4.5 4.5 0 0 0 5.991.334l1.848 1.848.707-.707-1.847-1.848a4.5 4.5 0 1 0-6.699.373m.707-.707a3.5 3.5 0 1 1 4.95-4.95 3.5 3.5 0 0 1-4.95 4.95M9 13v-2H7v-1h2V8h1v2h2v1h-2v2z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferInput: () => (/* binding */ BufferInput)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */





function BufferInput(props) {
    const { distance = 0, unit = _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters, onBufferChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const [d, setD] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(distance);
    const [u, setU] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(unit);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_5__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        let changed = false;
        if (distance !== d) {
            setD(distance);
            changed = true;
        }
        if (unit !== u) {
            setU(unit);
            changed = true;
        }
        if (changed) {
            onBufferChange(distance, unit);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [distance, unit]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setD(distance);
            setU(unit);
            onBufferChange(distance, unit);
        }
    }, [queryTaskContext.resetSymbol, distance, unit, onBufferChange]);
    const handleDistanceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
    }, []);
    const handleDistanceAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
        onBufferChange(value, u);
    }, [onBufferChange, u]);
    const handleBufferUnitChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        setU(e.target.value);
        onBufferChange(d, e.target.value);
    }, [onBufferChange, d]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": getI18nMessage('theBufferDistance'), className: 'mr-1', value: d, onChange: handleDistanceChange, onAcceptValue: handleDistanceAccepted }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('unit'), value: u, onChange: handleBufferUnitChange, children: Object.values(_config__WEBPACK_IMPORTED_MODULE_3__.UnitType).map((value) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: value, children: getI18nMessage(`unit_${value}`) }, value))) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadStatus: () => (/* binding */ LoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/filled/directional/right */ "./jimu-icons/filled/directional/right.tsx");
/* harmony import */ var jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/filled/directional/down */ "./jimu-icons/filled/directional/down.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */
// This file is duplicated from '../../../../feature-info/src/runtime/components/feature-info'






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
var LoadStatus;
(function (LoadStatus) {
    LoadStatus["Pending"] = "Pending";
    LoadStatus["Fulfilled"] = "Fulfilled";
    LoadStatus["Rejected"] = "Rejected";
})(LoadStatus || (LoadStatus = {}));
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  border: 1px solid var(--sys-color-divider-secondary);
  .esri-widget__heading {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    margin: 0;
    color: var(--sys-color-surface-paper-text);
  }

  .esri-feature__content-element {
    padding: 0;
  }

  .jimu-btn.expanded {
    align-self: flex-start;
  }
  
  // Larger expand/collapse button for better touch targets
  .jimu-btn[aria-label*="expand"],
  .jimu-btn[aria-label*="collapse"] {
    min-width: 32px;
    min-height: 32px;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .esri-feature.esri-widget {
    background-color: transparent;
  }
`;
class FeatureInfo extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor(props) {
        var _a, _b, _c, _d;
        super(props);
        this.toggleExpanded = (e) => {
            e.stopPropagation();
            this.setState({ showContent: !this.state.showContent });
        };
        const { togglable = false, expandByDefault } = this.props;
        const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
        const initialShowContent = !togglable || expandByDefault;
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'FeatureInfo-constructor',
            recordId,
            togglable,
            expandByDefault,
            initialShowContent,
            timestamp: Date.now()
        });
        this.featureContainer = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.state = {
            showContent: initialShowContent,
            loadStatus: LoadStatus.Pending
        };
    }
    componentDidMount() {
        this.createFeature();
    }
    componentDidUpdate(prevProps) {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        if (this.feature) {
            if (prevProps.popupTemplate !== this.props.popupTemplate ||
                prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate ||
                prevProps.graphic !== this.props.graphic) {
                this.destroyFeature();
                this.createFeature();
            }
            else {
                this.feature.visibleElements = this.getVisibleElements();
            }
        }
        // Sync expandByDefault prop changes (when user clicks Expand All/Collapse All)
        // This ensures all items respect the global expand/collapse state
        if (prevProps.expandByDefault !== this.props.expandByDefault) {
            const { togglable = false, expandByDefault } = this.props;
            const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'expandByDefault-prop-changed',
                recordId,
                prevExpandByDefault: prevProps.expandByDefault,
                newExpandByDefault: expandByDefault,
                togglable,
                currentShowContent: this.state.showContent,
                willUpdateState: togglable,
                timestamp: Date.now()
            });
            if (togglable) {
                this.setState({ showContent: expandByDefault }, () => {
                    debugLogger.log('EXPAND-COLLAPSE', {
                        event: 'FeatureInfo-state-updated',
                        recordId,
                        newShowContent: this.state.showContent,
                        timestamp: Date.now()
                    });
                });
            }
        }
        // Log all componentDidUpdate calls to track remounts
        const recordId = ((_f = (_e = this.props.graphic) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.OBJECTID) || ((_h = (_g = this.props.graphic) === null || _g === void 0 ? void 0 : _g.attributes) === null || _h === void 0 ? void 0 : _h.objectid) || 'unknown';
        if (prevProps.graphic !== this.props.graphic ||
            prevProps.popupTemplate !== this.props.popupTemplate ||
            prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate) {
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'FeatureInfo-props-changed-recreate',
                recordId,
                graphicChanged: prevProps.graphic !== this.props.graphic,
                popupTemplateChanged: prevProps.popupTemplate !== this.props.popupTemplate,
                defaultPopupTemplateChanged: prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate,
                expandByDefault: this.props.expandByDefault,
                currentShowContent: this.state.showContent,
                timestamp: Date.now()
            });
        }
    }
    destroyFeature() {
        this.feature && !this.feature.destroyed && this.feature.destroy();
    }
    getVisibleElements() {
        const { togglable = false } = this.props;
        const { showContent } = this.state;
        const expanded = togglable ? showContent : true;
        return {
            title: true,
            content: {
                fields: expanded,
                text: expanded,
                media: expanded,
                attachments: expanded
            },
            lastEditedInfo: false
        };
    }
    createFeature() {
        let featureModulePromise;
        if (this.Feature) {
            featureModulePromise = Promise.resolve();
        }
        else {
            featureModulePromise = (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Feature'
            ]).then(modules => {
                [
                    this.Feature
                ] = modules;
            });
        }
        return featureModulePromise.then(() => {
            var _a, _b, _c, _d;
            // Check if component is still mounted before trying to append
            // This prevents errors when component unmounts during async module loading
            if (!this.featureContainer.current) {
                // Component was unmounted, abort
                return;
            }
            const container = document && document.createElement('div');
            container.className = 'jimu-widget';
            this.featureContainer.current.appendChild(container);
            const originDS = this.props.dataSource.getOriginDataSources();
            const rootDataSource = (_a = originDS === null || originDS === void 0 ? void 0 : originDS[0]) === null || _a === void 0 ? void 0 : _a.getRootDataSource();
            this.destroyFeature();
            const layer = this.props.graphic.layer;
            if (this.props.popupTemplate) {
                this.props.graphic.popupTemplate = this.props.popupTemplate;
            }
            else if (layer) {
                // set popupTemplate with layer's popupTemplate or defaultPopupTemplate
                this.props.graphic.popupTemplate = (_b = layer.popupTemplate) !== null && _b !== void 0 ? _b : this.props.defaultPopupTemplate;
            }
            else {
                this.props.graphic.popupTemplate = this.props.defaultPopupTemplate;
            }
            if (layer && !layer.popupTemplate) {
                layer.popupTemplate = this.props.popupTemplate || this.props.defaultPopupTemplate;
            }
            this.feature = new this.Feature({
                container: container,
                defaultPopupTemplateEnabled: true,
                // @ts-expect-error
                spatialReference: ((_d = (_c = this.props.dataSource) === null || _c === void 0 ? void 0 : _c.layer) === null || _d === void 0 ? void 0 : _d.spatialReference) || null,
                // @ts-expect-error
                map: (rootDataSource === null || rootDataSource === void 0 ? void 0 : rootDataSource.map) || null,
                graphic: this.props.graphic,
                visibleElements: this.getVisibleElements()
            });
        }).then(() => {
            this.setState({ loadStatus: LoadStatus.Fulfilled });
        });
    }
    render() {
        const { togglable = false, intl } = this.props;
        const { showContent } = this.state;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'feature-info-component d-flex align-items-center p-1', css: style, children: [togglable && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { "aria-label": intl.formatMessage({ id: showContent ? 'collapse' : 'expand' }), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-outline-inside flex-shrink-0', { expanded: showContent }), variant: 'text', color: 'inherit', icon: true, size: 'sm', onClick: this.toggleExpanded, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              min-width: 32px;
              min-height: 32px;
              padding: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
            `, children: showContent ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__.DownFilled, { size: 'm' }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__.RightFilled, { size: 'm', autoFlip: true }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1', ref: this.featureContainer })] }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(FeatureInfo));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDraw: () => (/* binding */ GeometryFromDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-draw-tool */ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







function GeometryFromDraw(props) {
    const { onGeometryChange, createToolTypes, mapWidgetIds, enableBuffer, bufferDistance, bufferUnit, onBufferChange, widgetId } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_7__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geodesicBufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryServiceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferDistanceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferDistance);
    const bufferUnitRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferUnit);
    const bufferedGraphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (enableBuffer) {
            // Parent component query-task-spatial-form will reset buffer parameter when filter type changes,
            // so defer the init buffer option in order not to be override by its parent.
            jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
                onBufferChange(bufferDistance, bufferUnit);
            });
        }
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
            'esri/Graphic'
        ]).then((modules) => {
            const Graphic = modules[0];
            bufferedGraphicRef.current = new Graphic({
                symbol: {
                    type: 'simple-fill',
                    color: [51, 51, 204, 0.5],
                    style: 'solid',
                    outline: {
                        color: [51, 51, 204, 0.8],
                        width: 1
                    }
                }
            });
        });
    });
    const applyBufferEffect = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        if (!geometryRef.current || !enableBuffer || bufferDistanceRef.current === 0) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        // If the end user uses a point or line query geometry, then the negative buffer will not work (same effect as there is no buffer)
        const isPointNegativeBuffer = (((_a = geometryRef.current) === null || _a === void 0 ? void 0 : _a.type) === 'point' || ((_b = geometryRef.current) === null || _b === void 0 ? void 0 : _b.type) === 'multipoint') && bufferDistanceRef.current < 0;
        const isLineNegativeBuffer = ((_c = geometryRef.current) === null || _c === void 0 ? void 0 : _c.type) === 'polyline' && bufferDistanceRef.current < 0;
        if (isPointNegativeBuffer || isLineNegativeBuffer) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        const geometry = geometryRef.current;
        // https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html#buffer
        if (((_d = geometry.spatialReference) === null || _d === void 0 ? void 0 : _d.isGeographic) && !geometry.spatialReference.isWGS84) {
            const serviceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getGeometryService();
            if (!geometryServiceRef.current) {
                const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                    'esri/rest/geometryService',
                    'esri/rest/support/BufferParameters'
                ]);
                geometryServiceRef.current = {
                    geometryService: modules[0],
                    bufferParameters: modules[1]
                };
            }
            const { geometryService, bufferParameters: BufferParameters } = geometryServiceRef.current;
            const polygons = yield geometryService.buffer(serviceUrl, new BufferParameters({
                distances: [bufferDistanceRef.current],
                unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current),
                geodesic: true,
                bufferSpatialReference: geometry.spatialReference,
                outSpatialReference: geometry.spatialReference,
                geometries: [geometry]
            }));
            bufferedGraphicRef.current.geometry = polygons[0];
        }
        else {
            if (((_e = geometry.spatialReference) === null || _e === void 0 ? void 0 : _e.isWGS84) || ((_f = geometry.spatialReference) === null || _f === void 0 ? void 0 : _f.isWebMercator)) {
                if (!geodesicBufferOperatorRef.current) {
                    geodesicBufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/geodesicBufferOperator');
                }
                if (!geodesicBufferOperatorRef.current.isLoaded()) {
                    yield geodesicBufferOperatorRef.current.load();
                }
                bufferedGraphicRef.current.geometry = geodesicBufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
            else {
                if (!bufferOperatorRef.current) {
                    bufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/bufferOperator');
                }
                bufferedGraphicRef.current.geometry = bufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
        }
    }), [enableBuffer]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            getLayerFunRef.current && getLayerFunRef.current().removeAll();
            onGeometryChange(null);
        }
    }, [queryTaskContext.resetSymbol, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        // clear drawing graphics before switching map view
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        if (layer) {
            layer.removeAll();
            onGeometryChange(null);
        }
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, [onGeometryChange]);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferDistanceRef.current = distance;
        bufferUnitRef.current = unit;
        applyBufferEffect();
        onBufferChange(distance, unit);
    }, [onBufferChange, applyBufferEffect]);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic, getLayerFun, clearAfterApply) => {
        getLayerFunRef.current = getLayerFun;
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        // it's possible that the geometry is the same as the previous one, only the clearAfterApply is changed.
        if (geometryRef.current !== (graphic === null || graphic === void 0 ? void 0 : graphic.geometry)) {
            geometryRef.current = graphic === null || graphic === void 0 ? void 0 : graphic.geometry;
            applyBufferEffect().then(() => {
                if (bufferedGraphicRef.current.geometry) {
                    layer === null || layer === void 0 ? void 0 : layer.add(bufferedGraphicRef.current);
                }
            });
        }
        onGeometryChange(graphic === null || graphic === void 0 ? void 0 : graphic.geometry, layer, graphic, clearAfterApply);
    }, [onGeometryChange, applyBufferEffect]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))), (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__.InteractiveDraw, { jimuMapView: jimuMapView, widgetId: widgetId, toolTypes: createToolTypes, onDrawEnd: handleDrawEnd }), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'title3', "aria-label": getI18nMessage('theBufferDistance'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_5__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: handleBufferChange }) })] }))] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDataSource: () => (/* binding */ GeometryFromDataSource)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */






const marginStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`;
function getRuntimeDataSource() {
    const result = {};
    let notEmpty = false;
    const dsMap = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSources();
    Object.keys(dsMap).forEach(dsId => {
        const ds = dsMap[dsId];
        // only include the ds that has geometry
        if (ds.getGeometryType() != null && !ds.isInAppConfig() && ds.getMainDataSource().id === dsId && !ds.getDataSourceJson().isOutputFromWidget) {
            result[dsId] = ds;
            notEmpty = true;
        }
    });
    return notEmpty ? result : null;
}
function GeometryFromDataSource(props) {
    var _a;
    const { onSelectionChange, useDataSources = [], useRuntimeData, spatialRelations, enableBuffer, bufferDistance, bufferUnit, onBufferChange, onRelationChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [currentDataSource, setCurrentDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(useDataSources[0]);
    const [runtimeDataSource, setRuntimeDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [count, setCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const [currentRelation, setCurrentRelation] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_6__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation();
    const spatialRelationOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return Object.entries(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialRelation).map(([key, value]) => ({
            value,
            label: getI18nMessage(`spatialRelation_${key}`)
        }));
    }, [getI18nMessage]);
    const loadedUseDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const loaded = [];
        useDataSources.forEach((item) => {
            var _a, _b;
            if (((_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[item.mainDataSourceId]) === null || _b === void 0 ? void 0 : _b.instanceStatus) === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created) {
                loaded.push(item.dataSourceId);
            }
        });
        if (loaded.length > 0) {
            return loaded.join(',');
        }
        return '';
    });
    const numOfDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        if (!useRuntimeData) {
            return 0;
        }
        return Object.keys((_a = state.dataSourcesInfo) !== null && _a !== void 0 ? _a : {}).filter(dsId => state.dataSourcesInfo[dsId].instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created).length;
    });
    const runtimeDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (numOfDs > 0) {
            return getRuntimeDataSource();
        }
    }, [numOfDs]);
    const numOfRuntimeDs = Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).length;
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if ((spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0) {
            onRelationChange(spatialRelations[0]);
        }
        if (enableBuffer) {
            onBufferChange(bufferDistance, bufferUnit);
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setCurrentRelation(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
            onRelationChange(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
        }
    }, [queryTaskContext.resetSymbol, onRelationChange, spatialRelations]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!spatialRelations) {
            setCurrentRelation(null);
        }
        else if (!spatialRelations.includes(currentRelation)) {
            setCurrentRelation(spatialRelations[0]);
            onRelationChange(spatialRelations[0]);
        }
    }, [spatialRelations, currentRelation, onRelationChange]);
    const handleDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = useDataSources.find((item) => item.dataSourceId === dsId);
        setCurrentDataSource((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(ds));
        setRuntimeDataSource(null);
    }, [useDataSources]);
    const handleRuntimeDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(dsId);
        setRuntimeDataSource(ds);
        setCurrentDataSource(null);
    }, []);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource((_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        if ((records === null || records === void 0 ? void 0 : records.length) > 0) {
            const geometries = records.map((record) => record.getJSAPIGeometry());
            onSelectionChange(geometries);
            setCount(records.length);
        }
        else {
            onSelectionChange(null);
            setCount(0);
        }
    }, [currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId, runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, onSelectionChange]);
    const getLabelOfSpatialRelation = (relation) => {
        return spatialRelationOptions.find(item => item.value === relation).label;
    };
    const handleSpatialRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(e => {
        setCurrentRelation(e.target.value);
        onRelationChange(e.target.value);
    }, [onRelationChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: marginStyle, className: 'title3', children: getI18nMessage('chooseFilterLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterLayer'), value: (_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, children: [numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('preconfigured') }), useDataSources.map((item) => {
                        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(item.dataSourceId);
                        if (loadedUseDataSources.includes(item.dataSourceId) || (ds === null || ds === void 0 ? void 0 : ds.getLabel())) {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: item.dataSourceId, onClick: () => { handleDataSourceChange(item.dataSourceId); }, children: ds === null || ds === void 0 ? void 0 : ds.getLabel() }, item.dataSourceId));
                        }
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { children: translate('loading') }, item.dataSourceId));
                    }), numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { divider: true }), numOfRuntimeDs > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('runtime') }), Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).map(dsId => {
                        const ds = runtimeDataSources[dsId];
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: dsId, onClick: () => { handleRuntimeDataSourceChange(dsId); }, children: ds.getLabel() }, dsId));
                    })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-1 font-italic', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `color: var(--sys-color-surface-paper-hint);`, children: getI18nMessage('selectedRecords', { num: count }) }), (spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate title3 mb-0', children: getI18nMessage('relationship') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('relationship'), value: currentRelation, onChange: handleSpatialRelationChange, children: spatialRelations.map((item) => {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item, children: getLabelOfSpatialRelation(item) }, item));
                        }) })] })), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', "aria-label": getI18nMessage('theBufferDistance'), css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3 text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_4__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: onBufferChange }) })] })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: currentDataSource, dataSource: runtimeDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), useDataSources.map((item) => {
                // make sure the datasource is created
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: item }, item.dataSourceId));
            })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromMap: () => (/* binding */ GeometryFromMap)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");

/** @jsx jsx */


function GeometryFromMap(props) {
    const { onGeometryChange, mapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const PolygonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            let handler;
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/core/reactiveUtils').then((reactiveUtils) => {
                handler = reactiveUtils.watch(() => jimuMapView.view.extent, (extent) => {
                    if (PolygonRef.current) {
                        onGeometryChange(PolygonRef.current.fromExtent(extent));
                    }
                    else {
                        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/geometry/Polygon']).then(modules => {
                            PolygonRef.current = modules[0];
                            onGeometryChange(PolygonRef.current.fromExtent(extent));
                        });
                    }
                });
                // set initial extent
                onGeometryChange(jimuMapView.view.extent);
            });
            return () => {
                if (handler) {
                    handler.remove();
                }
            };
        }
    }, [jimuMapView, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addHighlightGraphics: () => (/* binding */ addHighlightGraphics),
/* harmony export */   cleanupGraphicsLayer: () => (/* binding */ cleanupGraphicsLayer),
/* harmony export */   clearGraphicsLayer: () => (/* binding */ clearGraphicsLayer),
/* harmony export */   createOrGetGraphicsLayer: () => (/* binding */ createOrGetGraphicsLayer),
/* harmony export */   getMapViewFromDataSource: () => (/* binding */ getMapViewFromDataSource),
/* harmony export */   removeHighlightGraphics: () => (/* binding */ removeHighlightGraphics)
/* harmony export */ });
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing graphics layer highlighting in QuerySimple widget.
 * Provides highlighting that works independently of layer visibility.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
// Global sequence counter for graphics operations to track timing across calls
let operationSequence = 0;
/**
 * Gets the map view from a data source's origin layer.
 * Accesses the view through the FeatureLayer's view property.
 * @param outputDS - The output data source (or any data source)
 * @returns Promise resolving to MapView or SceneView, or null if not available
 */
function getMapViewFromDataSource(outputDS) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        const seq = ++operationSequence;
        if (!outputDS) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-outputDS',
                seq,
                timestamp: Date.now()
            });
            return null;
        }
        try {
            // Get origin data source to access the layer
            const originDataSources = outputDS.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (!originDS) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-originDS',
                    outputDSId: outputDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Access the FeatureLayer from the data source
            const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
            if (!layer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-layer',
                    originDSId: originDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Log layer properties to understand structure
            const layerKeys = Object.keys(layer).filter(key => !key.startsWith('_') &&
                typeof layer[key] !== 'function').slice(0, 20); // Limit to first 20 properties
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-layer-inspection',
                originDSId: originDS.id,
                layerId: layer.id,
                layerType: layer.type || 'unknown',
                layerKeys: layerKeys,
                hasLayerMap: !!layer.map,
                hasLayerView: !!layer.view,
                hasLayerParent: !!layer.parent,
                layerMapType: layer.map ? typeof layer.map : 'none',
                timestamp: Date.now()
            });
            // Check layer.parent for map/view access (since hasLayerParent is true)
            const parent = layer.parent;
            if (parent) {
                // Log parent properties
                const parentKeys = Object.keys(parent).filter(key => !key.startsWith('_') &&
                    typeof parent[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-layer-parent-inspection',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    parentType: parent.type || 'unknown',
                    parentKeys: parentKeys,
                    hasParentMap: !!parent.map,
                    hasParentView: !!parent.view,
                    hasParentViews: !!parent.views,
                    parentViewsLength: ((_c = parent.views) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    hasParentExtent: !!parent.extent,
                    timestamp: Date.now()
                });
                // Try to get view from parent
                if (parent.view) {
                    const view = parent.view;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
                // Try to get map from parent and then view
                const parentMap = parent.map;
                if (parentMap) {
                    const view = parentMap.view ||
                        ((_e = (_d = parentMap.views) === null || _d === void 0 ? void 0 : _d.getItemAt) === null || _e === void 0 ? void 0 : _e.call(_d, 0)) ||
                        (((_f = parentMap.views) === null || _f === void 0 ? void 0 : _f.length) > 0 ? parentMap.views[0] : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-layer-parent-map',
                            originDSId: originDS.id,
                            layerId: layer.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                // Parent might BE the view (check if it has view-like properties)
                if (parent.type === 'map' || parent.type === 'scene' || parent.extent) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-is-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: parent.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return parent;
                }
            }
            // Try multiple approaches to get the view:
            // 1. Layer might have a direct view property
            if (layer.view) {
                const view = layer.view;
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-success-via-layer-view',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    viewType: view.type || 'unknown',
                    timestamp: Date.now()
                });
                return view;
            }
            // 2. Try to get map from layer and then view from map
            const map = layer.map ||
                ((_g = layer.parent) === null || _g === void 0 ? void 0 : _g.map) ||
                layer.__map ||
                layer._map;
            if (map) {
                // Log map properties
                const mapKeys = Object.keys(map).filter(key => !key.startsWith('_') &&
                    typeof map[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-map-found',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    mapId: map.id || 'unknown',
                    mapKeys: mapKeys,
                    hasMapView: !!map.view,
                    hasMapViews: !!(map.views),
                    mapViewsLength: ((_h = map.views) === null || _h === void 0 ? void 0 : _h.length) || 0,
                    timestamp: Date.now()
                });
                const view = map.view ||
                    ((_k = (_j = map.views) === null || _j === void 0 ? void 0 : _j.getItemAt) === null || _k === void 0 ? void 0 : _k.call(_j, 0)) ||
                    (((_l = map.views) === null || _l === void 0 ? void 0 : _l.length) > 0 ? map.views[0] : null) ||
                    (map.views && map.views.length > 0 ? map.views.getItemAt(0) : null);
                if (view) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-map',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
            }
            // 3. Try to get root data source and access map from there
            const rootDS = originDS.getRootDataSource();
            if (rootDS) {
                const rootMap = ((_o = (_m = rootDS).getMap) === null || _o === void 0 ? void 0 : _o.call(_m)) ||
                    rootDS.map ||
                    rootDS.__map ||
                    rootDS._map;
                if (rootMap) {
                    // Log root map properties
                    const rootMapKeys = Object.keys(rootMap).filter(key => !key.startsWith('_') &&
                        typeof rootMap[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-map-found',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootMapId: rootMap.id || 'unknown',
                        rootMapKeys: rootMapKeys,
                        hasRootMapView: !!rootMap.view,
                        hasRootMapViews: !!(rootMap.views),
                        rootMapViewsLength: ((_p = rootMap.views) === null || _p === void 0 ? void 0 : _p.length) || 0,
                        timestamp: Date.now()
                    });
                    const view = rootMap.view ||
                        ((_r = (_q = rootMap.views) === null || _q === void 0 ? void 0 : _q.getItemAt) === null || _r === void 0 ? void 0 : _r.call(_q, 0)) ||
                        (((_s = rootMap.views) === null || _s === void 0 ? void 0 : _s.length) > 0 ? rootMap.views[0] : null) ||
                        (rootMap.views && rootMap.views.length > 0 ? rootMap.views.getItemAt(0) : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-rootDS',
                            originDSId: originDS.id,
                            rootDSId: rootDS.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                else {
                    // Log root DS properties to see what's available
                    const rootDSKeys = Object.keys(rootDS).filter(key => !key.startsWith('_') &&
                        typeof rootDS[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-ds-inspection',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootDSKeys: rootDSKeys,
                        hasGetMap: typeof rootDS.getMap === 'function',
                        hasMap: !!rootDS.map,
                        timestamp: Date.now()
                    });
                }
            }
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-view',
                originDSId: originDS.id,
                layerId: layer.id,
                hasLayerMap: !!map,
                hasRootDS: !!rootDS,
                timestamp: Date.now()
            });
            return null;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-error',
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Gets the default highlight symbol based on geometry type.
 * Uses the map's actual highlight color from highlightOptions to match standard selection appearance.
 */
function getDefaultHighlightSymbol(geometryType, mapView) {
    // Get default highlight color from view's highlightOptions
    const highlightOptions = (mapView.highlightOptions || {});
    // Extract color - could be array [R,G,B,A] or Color object
    let highlightColor = null;
    if (highlightOptions.color) {
        // If it's a Color object, convert to array
        if (typeof highlightOptions.color === 'object' && 'toRgba' in highlightOptions.color) {
            highlightColor = highlightOptions.color.toRgba();
        }
        // If it's already an array
        else if (Array.isArray(highlightOptions.color)) {
            highlightColor = highlightOptions.color;
        }
    }
    // If no color in highlightOptions, use the ArcGIS documented default: cyan [0, 255, 255]
    if (!highlightColor) {
        highlightColor = [0, 255, 255, 1.0]; // Full opacity default
    }
    // Ensure we have 4 elements [R, G, B, A]
    const baseColor = highlightColor.slice(0, 3);
    const baseAlpha = highlightColor.length >= 4 ? highlightColor[3] : 1.0;
    // Get fill opacity from highlightOptions or use default
    const fillOpacity = highlightOptions.fillOpacity !== undefined
        ? highlightOptions.fillOpacity
        : 0.25; // Default 25% opacity for fill
    const fillColor = [...baseColor, fillOpacity];
    // Get halo opacity or use default - for outlines and lines
    const haloOpacity = highlightOptions.haloOpacity !== undefined
        ? highlightOptions.haloOpacity
        : baseAlpha; // Use the color's alpha if available, otherwise 1.0
    const outlineColor = [...baseColor, haloOpacity];
    // For lines, use full opacity to ensure visibility
    const lineOpacity = highlightOptions.haloOpacity !== undefined
        ? Math.max(highlightOptions.haloOpacity, 0.8) // At least 80% opacity
        : baseAlpha; // Use the color's alpha, or default to 1.0
    const lineColor = [...baseColor, lineOpacity];
    switch (geometryType) {
        case 'point':
        case 'multipoint':
            return {
                type: 'simple-marker',
                color: outlineColor,
                outline: {
                    color: outlineColor,
                    width: 2
                },
                size: 12
            };
        case 'polyline':
            return {
                type: 'simple-line',
                color: lineColor, // Use lineColor with proper opacity
                width: 4 // Increased width for visibility
            };
        case 'polygon':
        case 'multipolygon':
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
        default:
            // Fallback to polygon symbol
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
    }
}
/**
 * Creates or gets an existing graphics layer for the widget.
 * Uses a unique ID based on widget ID to ensure one layer per widget.
 */
function createOrGetGraphicsLayer(widgetId, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        const layerId = `querysimple-highlight-${widgetId}`;
        try {
            // Check if layer already exists
            const existingLayer = mapView.map.layers.find(layer => layer.id === layerId);
            if (existingLayer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'createOrGetGraphicsLayer-found-existing',
                    seq,
                    widgetId,
                    layerId,
                    timestamp: Date.now()
                });
                return existingLayer;
            }
            // Load GraphicsLayer module
            const [GraphicsLayer] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/layers/GraphicsLayer']);
            // Create new graphics layer
            const graphicsLayer = new GraphicsLayer({
                id: layerId,
                title: `QuerySimple Highlights (${widgetId})`,
                listMode: 'hide', // Hide from layer list
                visible: true
            });
            // Add to map
            mapView.map.add(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-created',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
            return graphicsLayer;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-error',
                seq,
                widgetId,
                layerId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Adds highlight graphics to the graphics layer using default map highlight color.
 * Note: This function should be called after GraphicsLayer module is loaded.
 */
function addHighlightGraphics(graphicsLayer, records, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        if (!graphicsLayer || !records || records.length === 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'addHighlightGraphics-skipped',
                seq,
                reason: !graphicsLayer ? 'no-graphics-layer' : 'no-records',
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                timestamp: Date.now()
            });
            return;
        }
        // Log existing state BEFORE adding - verify assumption about duplicates
        const existingGraphicsCount = graphicsLayer.graphics.length;
        const existingRecordIds = [];
        const existingRecordIdSet = new Set();
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                existingRecordIds.push(recordId);
                existingRecordIdSet.add(recordId);
            }
        });
        // Log what we're trying to add
        const incomingRecordIds = records.map(r => r.getId());
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-before-add',
            seq,
            graphicsLayerId: graphicsLayer.id,
            existingGraphicsCount,
            existingRecordIds: existingRecordIds.slice(0, 20), // Limit to first 20 for readability
            existingRecordIdsCount: existingRecordIds.length,
            incomingRecordIds: incomingRecordIds.slice(0, 20), // Limit to first 20
            incomingRecordIdsCount: incomingRecordIds.length,
            duplicateRecordIds: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).slice(0, 20),
            duplicateCount: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).length,
            timestamp: Date.now()
        });
        // Load Graphic module
        const [Graphic] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/Graphic']);
        let addedCount = 0;
        let skippedCount = 0;
        let duplicateCount = 0;
        const addedRecordIds = [];
        const skippedRecordIds = [];
        const duplicateRecordIds = [];
        records.forEach(record => {
            try {
                const recordId = record.getId();
                // Check if this record ID already exists in graphics layer
                if (existingRecordIdSet.has(recordId)) {
                    duplicateCount++;
                    duplicateRecordIds.push(recordId);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'addHighlightGraphics-duplicate-detected',
                        seq,
                        recordId,
                        graphicsLayerId: graphicsLayer.id,
                        timestamp: Date.now()
                    });
                    return; // Skip adding duplicate
                }
                const graphic = record.feature;
                if (!graphic || !graphic.geometry) {
                    skippedCount++;
                    skippedRecordIds.push(recordId);
                    return;
                }
                // Get geometry type from graphic
                const geometryType = graphic.geometry.type;
                // Create symbol using default highlight color
                const symbol = getDefaultHighlightSymbol(geometryType, mapView);
                // Create new graphic with highlight symbol
                const highlightGraphic = new Graphic({
                    geometry: graphic.geometry,
                    symbol: symbol,
                    attributes: {
                        recordId: recordId,
                        source: 'querysimple-highlight',
                        widgetId: graphicsLayer.id.replace('querysimple-highlight-', '')
                    }
                });
                graphicsLayer.add(highlightGraphic);
                addedCount++;
                addedRecordIds.push(recordId);
                // Add to tracking set to prevent duplicates within this batch
                existingRecordIdSet.add(recordId);
            }
            catch (error) {
                skippedCount++;
                skippedRecordIds.push(record.getId());
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'addHighlightGraphics-record-error',
                    seq,
                    recordId: record.getId(),
                    error: error instanceof Error ? error.message : String(error),
                    timestamp: Date.now()
                });
            }
        });
        // Log final state AFTER adding
        const finalGraphicsCount = graphicsLayer.graphics.length;
        const finalRecordIds = [];
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                finalRecordIds.push(recordId);
            }
        });
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-complete',
            seq,
            graphicsLayerId: graphicsLayer.id,
            recordsCount: records.length,
            addedCount,
            skippedCount,
            duplicateCount,
            addedRecordIds: addedRecordIds.slice(0, 20), // Limit to first 20
            skippedRecordIds: skippedRecordIds.slice(0, 20),
            duplicateRecordIds: duplicateRecordIds.slice(0, 20),
            existingGraphicsCount,
            finalGraphicsCount,
            expectedFinalCount: existingGraphicsCount + addedCount,
            finalRecordIds: finalRecordIds.slice(0, 20), // Limit to first 20
            finalRecordIdsCount: finalRecordIds.length,
            timestamp: Date.now()
        });
    });
}
/**
 * Removes highlight graphics from the graphics layer by record IDs.
 */
function removeHighlightGraphics(graphicsLayer, recordIds) {
    const seq = ++operationSequence;
    if (!graphicsLayer || !recordIds || recordIds.length === 0) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'removeHighlightGraphics-skipped',
            seq,
            reason: !graphicsLayer ? 'no-graphics-layer' : 'no-record-ids',
            recordIdsCount: (recordIds === null || recordIds === void 0 ? void 0 : recordIds.length) || 0,
            timestamp: Date.now()
        });
        return;
    }
    const recordIdSet = new Set(recordIds);
    let removedCount = 0;
    // Find and remove graphics matching record IDs
    const graphicsToRemove = [];
    graphicsLayer.graphics.forEach(graphic => {
        var _a;
        const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
        if (recordId && recordIdSet.has(recordId)) {
            graphicsToRemove.push(graphic);
        }
    });
    graphicsToRemove.forEach(graphic => {
        graphicsLayer.remove(graphic);
        removedCount++;
    });
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'removeHighlightGraphics-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        recordIdsCount: recordIds.length,
        removedCount,
        timestamp: Date.now()
    });
}
/**
 * Clears all highlight graphics from the graphics layer.
 */
function clearGraphicsLayer(graphicsLayer) {
    const seq = ++operationSequence;
    if (!graphicsLayer) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'clearGraphicsLayer-skipped',
            seq,
            reason: 'no-graphics-layer',
            timestamp: Date.now()
        });
        return;
    }
    const graphicsCount = graphicsLayer.graphics.length;
    graphicsLayer.removeAll();
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'clearGraphicsLayer-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        graphicsRemoved: graphicsCount,
        timestamp: Date.now()
    });
}
/**
 * Removes the graphics layer from the map and cleans up references.
 */
function cleanupGraphicsLayer(widgetId, mapView) {
    const seq = ++operationSequence;
    const layerId = `querysimple-highlight-${widgetId}`;
    try {
        const graphicsLayer = mapView.map.layers.find(layer => layer.id === layerId);
        if (graphicsLayer) {
            // Clear all graphics first
            graphicsLayer.removeAll();
            // Remove layer from map
            mapView.map.remove(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-complete',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
        else {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-not-found',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
    }
    catch (error) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'cleanupGraphicsLayer-error',
            seq,
            widgetId,
            layerId,
            error: error instanceof Error ? error.message : String(error),
            errorStack: error instanceof Error ? error.stack : undefined,
            timestamp: Date.now()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts":
/*!*******************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AccumulatedRecordsManager: () => (/* binding */ AccumulatedRecordsManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage accumulated records and results mode state.
 *
 * Centralizes accumulated records management logic for the widget.
 * Handles results mode changes, accumulated records updates, and mode reset logic.
 *
 * Part of Chunk 5: Accumulated Records Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class AccumulatedRecordsManager {
    constructor() {
        this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
        this.accumulatedRecords = [];
    }
    /**
     * Sets callbacks for mode change and accumulated records change events.
     *
     * @param callbacks - Callbacks for mode change and accumulated records change
     */
    setCallbacks(callbacks) {
        this.callbacks = callbacks;
    }
    /**
     * Gets the current results mode.
     *
     * @returns Current results mode
     */
    getResultsMode() {
        return this.resultsMode;
    }
    /**
     * Gets the current accumulated records.
     *
     * @returns Current accumulated records array
     */
    getAccumulatedRecords() {
        return this.accumulatedRecords;
    }
    /**
     * Gets the count of accumulated records.
     *
     * @returns Number of accumulated records
     */
    getAccumulatedRecordsCount() {
        return this.accumulatedRecords.length;
    }
    /**
     * Checks if the widget is in accumulation mode (Add to or Remove from).
     *
     * @returns True if in accumulation mode, false otherwise
     */
    isAccumulationMode() {
        return this.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection ||
            this.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
    }
    /**
     * Checks if there are accumulated records.
     *
     * @returns True if accumulated records exist, false otherwise
     */
    hasAccumulatedRecords() {
        return this.accumulatedRecords.length > 0;
    }
    /**
     * Handles results mode change.
     *
     * Updates the results mode and optionally clears accumulated records when switching
     * to "New" mode. Also handles hash parameter consumption when switching to accumulation modes.
     *
     * @param widgetId - Widget ID for logging
     * @param mode - New results mode
     * @param shouldConsumeHash - Whether to consume hash parameter (for deep linking)
     * @param hashShortId - Optional shortId to consume from hash
     * @param removeHashParameter - Optional callback to remove hash parameter
     */
    handleResultsModeChange(widgetId, mode, shouldConsumeHash = false, hashShortId, removeHashParameter) {
        var _a;
        const previousMode = this.resultsMode;
        const currentAccumulatedCount = this.accumulatedRecords.length;
        debugLogger.log('RESULTS-MODE', {
            event: 'handleResultsModeChange-triggered',
            widgetId,
            previousMode,
            newMode: mode,
            currentAccumulatedCount,
            timestamp: Date.now()
        });
        // Consume deep link when switching to accumulation modes
        if (shouldConsumeHash && (mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection)) {
            if (hashShortId && removeHashParameter) {
                debugLogger.log('HASH', {
                    event: 'consuming-hash-on-mode-switch',
                    widgetId,
                    mode,
                    shortId: hashShortId
                });
                removeHashParameter(hashShortId);
            }
        }
        // If switching to "New" mode, clear accumulated records
        if (mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection) {
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-accumulated-records-on-mode-switch',
                widgetId,
                previousMode
            });
            this.resultsMode = mode;
            this.accumulatedRecords = [];
        }
        else {
            this.resultsMode = mode;
        }
        // Trigger callback
        if ((_a = this.callbacks) === null || _a === void 0 ? void 0 : _a.onModeChange) {
            this.callbacks.onModeChange(this.resultsMode);
        }
        return {
            resultsMode: this.resultsMode,
            accumulatedRecords: this.accumulatedRecords
        };
    }
    /**
     * Handles accumulated records change.
     *
     * Updates the accumulated records array.
     *
     * @param widgetId - Widget ID for logging
     * @param records - New accumulated records array
     */
    handleAccumulatedRecordsChange(widgetId, records) {
        var _a;
        const previousCount = this.accumulatedRecords.length;
        const newCount = records.length;
        debugLogger.log('RESULTS-MODE', {
            event: 'handleAccumulatedRecordsChange-triggered',
            widgetId,
            previousCount,
            newCount,
            timestamp: Date.now()
        });
        this.accumulatedRecords = records;
        // Trigger callback
        if ((_a = this.callbacks) === null || _a === void 0 ? void 0 : _a.onAccumulatedRecordsChange) {
            this.callbacks.onAccumulatedRecordsChange(this.accumulatedRecords);
        }
    }
    /**
     * Resets mode to "New Selection" and clears accumulated records.
     *
     * Called when hash parameters are detected to reset the widget to a clean state.
     *
     * @param widgetId - Widget ID for logging
     * @param currentMode - Current mode before reset
     */
    resetModeOnHashDetection(widgetId, currentMode) {
        if (currentMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection) {
            debugLogger.log('HASH', {
                event: 'mode-reset-needed-on-hash-detection',
                widgetId,
                currentMode,
                timestamp: Date.now()
            });
            this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
            this.accumulatedRecords = [];
        }
        return {
            resultsMode: this.resultsMode,
            accumulatedRecords: this.accumulatedRecords
        };
    }
    /**
     * Cleans up the manager.
     *
     * Resets state to initial values.
     */
    cleanup() {
        this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
        this.accumulatedRecords = [];
        this.callbacks = undefined;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-event-handling.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-event-handling.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventManager: () => (/* binding */ EventManager),
/* harmony export */   OPEN_WIDGET_EVENT: () => (/* binding */ OPEN_WIDGET_EVENT),
/* harmony export */   QUERYSIMPLE_SELECTION_EVENT: () => (/* binding */ QUERYSIMPLE_SELECTION_EVENT),
/* harmony export */   RESTORE_ON_IDENTIFY_CLOSE_EVENT: () => (/* binding */ RESTORE_ON_IDENTIFY_CLOSE_EVENT)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Event name constants for QuerySimple widget events.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
const OPEN_WIDGET_EVENT = 'helpersimple-open-widget';
/**
 * Utility to manage event listeners and custom event dispatching.
 *
 * Centralizes event handling logic for the widget, including:
 * - Event listener setup/cleanup
 * - Custom event dispatching
 * - Event handler registration
 *
 * Part of Chunk 7: Event Handling extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class EventManager {
    constructor() {
        this.listenersSetup = false;
        /**
         * Bound event handler for OPEN_WIDGET_EVENT.
         */
        this.handleOpenWidgetEventBound = (event) => {
            var _a;
            if ((_a = this.handlers) === null || _a === void 0 ? void 0 : _a.onOpenWidgetEvent) {
                this.handlers.onOpenWidgetEvent(event);
            }
        };
        /**
         * Bound event handler for QUERYSIMPLE_SELECTION_EVENT.
         */
        this.handleSelectionChangeBound = (event) => {
            var _a;
            if ((_a = this.handlers) === null || _a === void 0 ? void 0 : _a.onSelectionChange) {
                this.handlers.onSelectionChange(event);
            }
        };
        /**
         * Bound event handler for RESTORE_ON_IDENTIFY_CLOSE_EVENT.
         */
        this.handleRestoreOnIdentifyCloseBound = (event) => {
            var _a;
            if ((_a = this.handlers) === null || _a === void 0 ? void 0 : _a.onRestoreOnIdentifyClose) {
                this.handlers.onRestoreOnIdentifyClose(event);
            }
        };
    }
    /**
     * Sets event handler callbacks.
     *
     * @param handlers - Event handler callbacks
     */
    setHandlers(handlers) {
        this.handlers = handlers;
    }
    /**
     * Sets up all event listeners.
     *
     * Registers listeners for:
     * - OPEN_WIDGET_EVENT: HelperSimple orchestration
     * - QUERYSIMPLE_SELECTION_EVENT: Selection changes from QueryTaskResult
     * - RESTORE_ON_IDENTIFY_CLOSE_EVENT: Restore selection after identify popup closes
     *
     * @param widgetId - Widget ID for logging
     */
    setup(widgetId) {
        if (this.listenersSetup) {
            debugLogger.log('EVENTS', {
                event: 'event-manager-setup-already-setup',
                widgetId,
                timestamp: Date.now()
            });
            return;
        }
        debugLogger.log('EVENTS', {
            event: 'event-manager-setup-start',
            widgetId,
            timestamp: Date.now()
        });
        // Listen for HelperSimple orchestration events
        window.addEventListener(OPEN_WIDGET_EVENT, this.handleOpenWidgetEventBound);
        // Listen for selection changes from query-result
        window.addEventListener(QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChangeBound);
        // Listen for restore requests when identify popup closes
        window.addEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyCloseBound);
        this.listenersSetup = true;
        debugLogger.log('EVENTS', {
            event: 'event-manager-setup-complete',
            widgetId,
            listenersRegistered: 3,
            timestamp: Date.now()
        });
    }
    /**
     * Cleans up all event listeners.
     *
     * @param widgetId - Widget ID for logging
     */
    cleanup(widgetId) {
        if (!this.listenersSetup) {
            debugLogger.log('EVENTS', {
                event: 'event-manager-cleanup-not-setup',
                widgetId,
                timestamp: Date.now()
            });
            return;
        }
        debugLogger.log('EVENTS', {
            event: 'event-manager-cleanup-start',
            widgetId,
            timestamp: Date.now()
        });
        window.removeEventListener(OPEN_WIDGET_EVENT, this.handleOpenWidgetEventBound);
        window.removeEventListener(QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChangeBound);
        window.removeEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyCloseBound);
        this.listenersSetup = false;
        this.handlers = undefined;
        debugLogger.log('EVENTS', {
            event: 'event-manager-cleanup-complete',
            widgetId,
            timestamp: Date.now()
        });
    }
    /**
     * Dispatches a custom event to notify HelperSimple of selection changes.
     *
     * @param widgetId - Widget ID
     * @param recordIds - Array of selected record IDs
     * @param dataSourceId - Optional data source ID
     * @param outputDsId - Output data source ID (required for lastSelection state)
     * @param queryItemConfigId - Query item config ID (required for lastSelection state)
     */
    dispatchSelectionEvent(widgetId, recordIds, dataSourceId, outputDsId, queryItemConfigId) {
        debugLogger.log('EVENTS', {
            event: 'event-manager-dispatch-selection-event',
            widgetId,
            recordIdsCount: recordIds.length,
            dataSourceId,
            outputDsId,
            queryItemConfigId,
            timestamp: Date.now()
        });
        const event = new CustomEvent(QUERYSIMPLE_SELECTION_EVENT, {
            detail: {
                widgetId,
                recordIds,
                dataSourceId,
                outputDsId,
                queryItemConfigId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(event);
        debugLogger.log('EVENTS', {
            event: 'event-manager-selection-event-dispatched',
            widgetId,
            recordIdsCount: recordIds.length,
            timestamp: Date.now()
        });
    }
    /**
     * Checks if event listeners are currently set up.
     *
     * @returns True if listeners are set up, false otherwise
     */
    isSetup() {
        return this.listenersSetup;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GraphicsLayerManager: () => (/* binding */ GraphicsLayerManager)
/* harmony export */ });
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage graphics layer initialization and cleanup.
 *
 * Centralizes graphics layer management logic for the widget.
 * Handles graphics layer creation, initialization, and cleanup.
 *
 * Part of Chunk 4: Graphics Layer Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class GraphicsLayerManager {
    constructor(graphicsLayerRef, mapViewRef) {
        this.graphicsLayerRef = graphicsLayerRef;
        this.mapViewRef = mapViewRef;
    }
    /**
     * Initializes the graphics layer for map highlighting.
     *
     * Creates or retrieves a graphics layer and adds it to the map view.
     *
     * @param widgetId - Widget ID for graphics layer naming
     * @param mapView - The ArcGIS MapView or SceneView instance
     * @param callbacks - Optional callbacks for initialization events
     *
     * @returns Promise resolving to the graphics layer, or null if initialization failed
     */
    initialize(widgetId, mapView, callbacks) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c, _d;
            // Chunk 4: Comparison logging - new implementation
            const newStateBefore = {
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                hasMapView: !!this.mapViewRef.current,
                viewType: ((_b = this.mapViewRef.current) === null || _b === void 0 ? void 0 : _b.type) || null
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-initializeGraphicsLayer-before',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    mapViewType: mapView.type || 'unknown',
                    timestamp: Date.now()
                }
            });
            try {
                // Create or get graphics layer
                const graphicsLayer = yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__.createOrGetGraphicsLayer)(widgetId, mapView);
                if (!graphicsLayer) {
                    debugLogger.log('CHUNK-4-COMPARE', {
                        event: 'new-implementation-initializeGraphicsLayer-failed',
                        widgetId,
                        newImplementation: {
                            stateBefore: newStateBefore,
                            result: 'failed',
                            reason: 'graphics-layer-creation-failed',
                            timestamp: Date.now()
                        }
                    });
                    return null;
                }
                // Store references
                this.mapViewRef.current = mapView;
                this.graphicsLayerRef.current = graphicsLayer;
                const newStateAfter = {
                    hasGraphicsLayer: !!this.graphicsLayerRef.current,
                    graphicsLayerId: ((_c = this.graphicsLayerRef.current) === null || _c === void 0 ? void 0 : _c.id) || null,
                    hasMapView: !!this.mapViewRef.current,
                    viewType: ((_d = this.mapViewRef.current) === null || _d === void 0 ? void 0 : _d.type) || null
                };
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayer-success',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        stateAfter: newStateAfter,
                        result: 'success',
                        graphicsLayerId: graphicsLayer.id,
                        viewType: mapView.type || 'unknown',
                        timestamp: Date.now()
                    }
                });
                // Call callback if provided
                if (callbacks === null || callbacks === void 0 ? void 0 : callbacks.onGraphicsLayerInitialized) {
                    callbacks.onGraphicsLayerInitialized(graphicsLayer);
                }
                return graphicsLayer;
            }
            catch (error) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayer-error',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'error',
                        error: error instanceof Error ? error.message : String(error),
                        timestamp: Date.now()
                    }
                });
                return null;
            }
        });
    }
    /**
     * Initializes graphics layer lazily when output data source becomes available.
     *
     * @param widgetId - Widget ID
     * @param config - Widget configuration
     * @param outputDS - The output data source that was created
     * @param mapView - Optional map view (if not provided, uses mapViewRef)
     * @param callbacks - Optional callbacks
     */
    initializeFromOutputDS(widgetId, config, outputDS, mapView, callbacks) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a;
            // Chunk 4: Comparison logging - new implementation
            const newStateBefore = {
                useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                hasMapView: !!this.mapViewRef.current,
                outputDSId: outputDS.id
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-initializeGraphicsLayerFromOutputDS-before',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    timestamp: Date.now()
                }
            });
            // Only initialize if enabled and not already initialized
            if (!config.useGraphicsLayerForHighlight || this.graphicsLayerRef.current) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'skipped',
                        reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'already-initialized',
                        timestamp: Date.now()
                    }
                });
                return;
            }
            // Use provided map view or get from ref
            const mapViewToUse = mapView || this.mapViewRef.current;
            if (!mapViewToUse) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'skipped',
                        reason: 'map-view-not-available-yet',
                        timestamp: Date.now()
                    }
                });
                return;
            }
            // Initialize graphics layer
            yield this.initialize(widgetId, mapViewToUse, callbacks);
        });
    }
    /**
     * Cleans up the graphics layer.
     *
     * Removes the graphics layer from the map view and clears internal references.
     *
     * @param widgetId - Widget ID
     * @param callbacks - Optional callbacks
     */
    cleanup(widgetId, callbacks) {
        var _a, _b, _c, _d;
        // Chunk 4: Comparison logging - new implementation
        const newStateBefore = {
            hasGraphicsLayer: !!this.graphicsLayerRef.current,
            graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
            hasMapView: !!this.mapViewRef.current,
            viewType: ((_b = this.mapViewRef.current) === null || _b === void 0 ? void 0 : _b.type) || null
        };
        debugLogger.log('CHUNK-4-COMPARE', {
            event: 'new-implementation-cleanupGraphicsLayer-before',
            widgetId,
            newImplementation: {
                stateBefore: newStateBefore,
                timestamp: Date.now()
            }
        });
        const mapView = this.mapViewRef.current;
        if (mapView) {
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__.cleanupGraphicsLayer)(widgetId, mapView);
            this.mapViewRef.current = null;
            this.graphicsLayerRef.current = null;
            const newStateAfter = {
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_c = this.graphicsLayerRef.current) === null || _c === void 0 ? void 0 : _c.id) || null,
                hasMapView: !!this.mapViewRef.current,
                viewType: ((_d = this.mapViewRef.current) === null || _d === void 0 ? void 0 : _d.type) || null
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-cleanupGraphicsLayer-complete',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    stateAfter: newStateAfter,
                    result: 'complete',
                    timestamp: Date.now()
                }
            });
            // Call callback if provided
            if (callbacks === null || callbacks === void 0 ? void 0 : callbacks.onGraphicsLayerCleaned) {
                callbacks.onGraphicsLayerCleaned();
            }
        }
        else {
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-cleanupGraphicsLayer-skipped',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    result: 'skipped',
                    reason: 'no-map-view',
                    timestamp: Date.now()
                }
            });
        }
    }
    /**
     * Clears all graphics from the graphics layer if it exists.
     *
     * @param widgetId - Widget ID for logging
     * @param config - Widget configuration
     */
    clearGraphics(widgetId, config) {
        var _a, _b;
        // Chunk 4: Comparison logging - new implementation
        const graphicsLayer = this.graphicsLayerRef.current;
        const newStateBefore = {
            useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
            hasGraphicsLayer: !!graphicsLayer,
            graphicsLayerId: (graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.id) || null,
            graphicsCount: (graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics.length) || 0
        };
        debugLogger.log('CHUNK-4-COMPARE', {
            event: 'new-implementation-clearGraphicsLayerIfExists-before',
            widgetId,
            newImplementation: {
                stateBefore: newStateBefore,
                timestamp: Date.now()
            }
        });
        if (config.useGraphicsLayerForHighlight && graphicsLayer) {
            const { clearGraphicsLayer } = __webpack_require__(/*! ../graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
            clearGraphicsLayer(graphicsLayer);
            const newStateAfter = {
                useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                graphicsCount: ((_b = this.graphicsLayerRef.current) === null || _b === void 0 ? void 0 : _b.graphics.length) || 0
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-clearGraphicsLayerIfExists-complete',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    stateAfter: newStateAfter,
                    result: 'complete',
                    graphicsLayerId: graphicsLayer.id,
                    timestamp: Date.now()
                }
            });
        }
        else {
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-clearGraphicsLayerIfExists-skipped',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    result: 'skipped',
                    reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'no-graphics-layer',
                    timestamp: Date.now()
                }
            });
        }
    }
    /**
     * Gets the current graphics layer.
     */
    getGraphicsLayer() {
        return this.graphicsLayerRef.current;
    }
    /**
     * Checks if graphics layer should be initialized based on config and current state.
     *
     * @param config - Widget configuration
     * @param mapView - Map view to check
     * @returns true if graphics layer should be initialized
     */
    shouldInitialize(config, mapView) {
        return !!(mapView && config.useGraphicsLayerForHighlight && !this.graphicsLayerRef.current);
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapViewManager: () => (/* binding */ MapViewManager)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage map view ref and view change handlers.
 *
 * Centralizes map view management logic for the widget.
 * Handles JimuMapView changes and maintains refs for map view access.
 *
 * Part of Chunk 6: Map View Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class MapViewManager {
    constructor(mapViewRef) {
        this.jimuMapView = null;
        this.mapViewRef = mapViewRef;
    }
    /**
     * Handles JimuMapView change from JimuMapViewComponent.
     * Updates internal state and calls callbacks.
     */
    handleJimuMapViewChanged(jimuMapView, props, callbacks) {
        var _a;
        const { id } = props;
        debugLogger.log('MAP-EXTENT', {
            event: 'handleJimuMapViewChanged',
            widgetId: id,
            hasJimuMapView: !!jimuMapView,
            hasView: !!(jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view),
            viewType: ((_a = jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) === null || _a === void 0 ? void 0 : _a.type) || 'none',
            timestamp: Date.now()
        });
        // Store JimuMapView internally
        this.jimuMapView = jimuMapView;
        // Update map view ref if view is available
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            this.mapViewRef.current = jimuMapView.view;
        }
        else {
            this.mapViewRef.current = null;
        }
        // Call callback to update widget state
        if (callbacks.onMapViewChange) {
            callbacks.onMapViewChange(jimuMapView);
        }
    }
    /**
     * Gets the current JimuMapView.
     */
    getJimuMapView() {
        return this.jimuMapView;
    }
    /**
     * Gets the current map view from ref.
     */
    getMapView() {
        return this.mapViewRef.current;
    }
    /**
     * Cleans up map view references.
     */
    cleanup() {
        this.mapViewRef.current = null;
        this.jimuMapView = null;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UrlConsumptionManager: () => (/* binding */ UrlConsumptionManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage URL parameter consumption and deep linking.
 *
 * Handles both Hash fragments (#) and Query Strings (?), with Hash taking priority.
 * Implements atomic consumption to prevent infinite loops.
 *
 * Part of Chunk 1: URL Parameter Consumption extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class UrlConsumptionManager {
    constructor() {
        this.lastProcessedHash = '';
        this.isProcessing = false;
        this.hashChangeHandler = null;
    }
    /**
     * Checks URL for hash and query string parameters matching configured shortIds.
     * Hash parameters take priority over query string parameters.
     */
    checkUrlParameters(props, resultsMode, callbacks) {
        var _a;
        const { config, id } = props;
        const { onInitialValueFound, onModeResetNeeded } = callbacks;
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return;
        }
        // Prevent concurrent processing
        if (this.isProcessing) {
            return;
        }
        const shortIds = config.queryItems
            .map(item => item.shortId)
            .filter(sid => sid != null && sid.trim() !== '');
        if (shortIds.length === 0) {
            return;
        }
        const hash = window.location.hash.substring(1);
        const query = window.location.search.substring(1);
        // Skip hash-only if we've already processed this exact hash fragment
        // But always check query strings (they don't trigger hashchange events)
        // Only skip if we have a hash fragment AND we've already processed it
        if (hash && this.lastProcessedHash === hash) {
            return;
        }
        this.isProcessing = true;
        // Only update lastProcessedHash if we actually have a hash fragment
        // Query strings are always checked (no skip logic for them)
        if (hash) {
            this.lastProcessedHash = hash;
        }
        const hashParams = new URLSearchParams(hash);
        const queryParams = new URLSearchParams(query);
        let foundShortId = null;
        let foundValue = null;
        let foundIn = null;
        // PRIORITY 1: Hash fragments (always win)
        for (const sid of shortIds) {
            if (hashParams.has(sid)) {
                foundShortId = sid;
                foundValue = hashParams.get(sid);
                foundIn = 'hash';
                break;
            }
        }
        // PRIORITY 2: Query string (if no hash match)
        if (!foundShortId) {
            for (const sid of shortIds) {
                if (queryParams.has(sid)) {
                    foundShortId = sid;
                    foundValue = queryParams.get(sid);
                    foundIn = 'query';
                    break;
                }
            }
        }
        if (foundShortId && foundValue !== null) {
            debugLogger.log('HASH', {
                event: 'url-param-detected',
                widgetId: id,
                shortId: foundShortId,
                value: foundValue,
                foundIn,
                timestamp: Date.now()
            });
            // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
            if (resultsMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection && onModeResetNeeded) {
                debugLogger.log('HASH', {
                    event: 'mode-reset-needed-on-hash-detection',
                    widgetId: id,
                    currentMode: resultsMode,
                    timestamp: Date.now()
                });
                onModeResetNeeded();
            }
            onInitialValueFound({ shortId: foundShortId, value: foundValue });
        }
        else {
            // No matching parameters found - clear state
            onInitialValueFound(undefined);
        }
        this.isProcessing = false;
    }
    /**
     * Removes a hash parameter from the URL.
     * Used when switching to accumulation modes to consume the deep link.
     */
    removeHashParameter(shortId, widgetId) {
        if (!shortId)
            return;
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        if (urlParams.has(shortId)) {
            urlParams.delete(shortId);
            const newHash = urlParams.toString();
            debugLogger.log('HASH', {
                event: 'removeHashParameter',
                widgetId,
                shortId,
                newHash: newHash ? `#${newHash}` : '(empty)',
                timestamp: Date.now()
            });
            // Update the URL without triggering a reload
            // Always preserve pathname and query string, only update hash
            window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
            // Reset tracking so it can be processed again if needed
            this.lastProcessedHash = '';
        }
    }
    /**
     * Sets up the manager (no autonomous URL checking).
     * QuerySimple should only process hash parameters when HelperSimple explicitly triggers it
     * via OPEN_WIDGET_EVENT. This ensures HelperSimple remains the orchestrator.
     */
    setup(props, resultsMode, callbacks) {
        // Do NOT automatically check URL parameters
        // Do NOT set up hashchange listener
        // QuerySimple will only process hash when HelperSimple explicitly opens the widget
        // This ensures HelperSimple remains the orchestrator
    }
    /**
     * Cleans up hash change listener.
     */
    cleanup() {
        if (this.hashChangeHandler) {
            window.removeEventListener('hashchange', this.hashChangeHandler);
            this.hashChangeHandler = null;
        }
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts":
/*!*****************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WidgetVisibilityManager: () => (/* binding */ WidgetVisibilityManager)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify HelperSimple of widget open/close state.
 */
const QUERYSIMPLE_WIDGET_STATE_EVENT = 'querysimple-widget-state-changed';
/**
 * Utility to manage widget panel visibility detection and HelperSimple notification.
 *
 * Uses IntersectionObserver for efficient DOM-level visibility tracking.
 * Falls back to periodic checking if IntersectionObserver is not available.
 *
 * Part of Chunk 2: Widget Visibility Engine extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class WidgetVisibilityManager {
    constructor() {
        this.visibilityObserver = null;
        this.visibilityCheckInterval = null;
        this.isPanelVisible = false;
        this.widgetElement = null;
    }
    /**
     * Checks if the widget element is currently visible.
     * Fallback method when IntersectionObserver is not available.
     */
    checkVisibility() {
        if (!this.widgetElement)
            return false;
        const element = this.widgetElement;
        const style = window.getComputedStyle(element);
        const rect = element.getBoundingClientRect();
        const isVisible = (style.display !== 'none' &&
            style.visibility !== 'hidden' &&
            style.opacity !== '0' &&
            rect.width > 0 &&
            rect.height > 0 &&
            rect.top < window.innerHeight &&
            rect.bottom > 0 &&
            rect.left < window.innerWidth &&
            rect.right > 0);
        return isVisible;
    }
    /**
     * Notifies HelperSimple of panel visibility state changes.
     */
    notifyHelperSimpleOfPanelState(isVisible, widgetId) {
        const event = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: isVisible
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(event);
        debugLogger.log('WIDGET-STATE', {
            event: isVisible ? 'panel-opened' : 'panel-closed',
            widgetId,
            isVisible,
            method: 'notifyHelperSimpleOfPanelState',
            timestamp: new Date().toISOString()
        });
    }
    /**
     * Logs visibility state changes and calls callbacks.
     */
    logVisibilityChange(isVisible, method, widgetId, callbacks) {
        debugLogger.log('WIDGET-STATE', {
            event: isVisible ? 'panel-opened' : 'panel-closed',
            widgetId,
            isVisible,
            method,
            timestamp: new Date().toISOString()
        });
        // Notify HelperSimple
        this.notifyHelperSimpleOfPanelState(isVisible, widgetId);
        // Call optional callback
        if (callbacks.onVisibilityChange) {
            callbacks.onVisibilityChange(isVisible);
        }
    }
    /**
     * Sets up visibility detection.
     */
    setup(widgetElement, props, callbacks, onVisibilityStateChange) {
        const { id } = props;
        this.widgetElement = widgetElement;
        // Wait for next tick to ensure element is ready
        setTimeout(() => {
            if (!this.widgetElement) {
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup-failed',
                    widgetId: id,
                    reason: 'widget-element-not-available'
                });
                return;
            }
            const element = this.widgetElement;
            // Method 1: IntersectionObserver (most efficient)
            if ('IntersectionObserver' in window) {
                this.visibilityObserver = new IntersectionObserver((entries) => {
                    const entry = entries[0];
                    const isVisible = entry.isIntersecting && entry.intersectionRatio > 0;
                    // Only update if state changed
                    if (this.isPanelVisible !== isVisible) {
                        this.isPanelVisible = isVisible;
                        this.logVisibilityChange(isVisible, 'IntersectionObserver', id, callbacks);
                        onVisibilityStateChange(isVisible);
                    }
                }, {
                    threshold: [0, 0.1, 1.0], // Trigger at 0%, 10%, and 100% visibility
                    rootMargin: '0px'
                });
                this.visibilityObserver.observe(element);
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup',
                    widgetId: id,
                    method: 'IntersectionObserver'
                });
            }
            else {
                // Method 2: Fallback to periodic checking
                this.visibilityCheckInterval = window.setInterval(() => {
                    const isVisible = this.checkVisibility();
                    if (this.isPanelVisible !== isVisible) {
                        this.isPanelVisible = isVisible;
                        this.logVisibilityChange(isVisible, 'periodic-check', id, callbacks);
                        onVisibilityStateChange(isVisible);
                    }
                }, 250); // Check every 250ms
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup',
                    widgetId: id,
                    method: 'periodic-check'
                });
            }
        }, 100);
    }
    /**
     * Cleans up visibility detection observers/intervals.
     */
    cleanup() {
        // Clean up IntersectionObserver
        if (this.visibilityObserver) {
            this.visibilityObserver.disconnect();
            this.visibilityObserver = null;
        }
        // Clean up interval
        if (this.visibilityCheckInterval !== null) {
            clearInterval(this.visibilityCheckInterval);
            this.visibilityCheckInterval = null;
        }
        this.widgetElement = null;
    }
    /**
     * Gets current visibility state.
     */
    getIsPanelVisible() {
        return this.isPanelVisible;
    }
    /**
     * Notifies HelperSimple on mount.
     */
    notifyMount(widgetId) {
        const openEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: true
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(openEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-mounted',
            widgetId,
            timestamp: new Date().toISOString()
        });
    }
    /**
     * Notifies HelperSimple on unmount.
     */
    notifyUnmount(widgetId) {
        const closeEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: false
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(closeEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-unmounted',
            widgetId,
            timestamp: new Date().toISOString()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useZoomToRecords: () => (/* binding */ useZoomToRecords)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var _zoom_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../zoom-utils */ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts");
/**
 * Hook for zooming to feature records with padding.
 *
 * Wraps the shared zoomToRecords utility function in a React hook.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


/**
 * Custom hook that returns a function to zoom to records with padding.
 *
 * @param mapView - The map view to zoom
 * @returns A function that takes records and optional padding, and zooms to them
 */
function useZoomToRecords(mapView) {
    return react__WEBPACK_IMPORTED_MODULE_0__["default"].useCallback((records, options) => __awaiter(this, void 0, void 0, function* () {
        if (!mapView) {
            return;
        }
        yield (0,_zoom_utils__WEBPACK_IMPORTED_MODULE_1__.zoomToRecords)(mapView, records, options);
    }), [mapView]);
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveDraw: () => (/* binding */ InteractiveDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");

/** @jsx jsx */





const sketchToolInfoMap = {
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Point]: { drawToolName: 'point', esriClassName: 'esri-icon-point', toolIndex: 0 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polyline]: { drawToolName: 'polyline', esriClassName: 'esri-icon-polyline', toolIndex: 4 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polygon]: { drawToolName: 'polygon', esriClassName: 'esri-icon-polygon', toolIndex: 2 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Rectangle]: {
        drawToolName: 'rectangle',
        esriClassName: 'esri-icon-checkbox-unchecked',
        toolIndex: 1
    },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Circle]: { drawToolName: 'circle', esriClassName: 'esri-icon-radio-unchecked', toolIndex: 3 }
};
function InteractiveDraw(props) {
    const { toolTypes = [], jimuMapView, onDrawEnd, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [mapModule, setMapModule] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const graphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [clearAfterApply, setClearAfterApply] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const visibleElements = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return {
            createTools: Object.entries(sketchToolInfoMap).reduce((result, [key, value]) => (Object.assign(Object.assign({}, result), { [value.drawToolName]: toolTypes.includes(key) })), { point: false }),
            selectionTools: {
                'lasso-selection': false,
                'rectangle-selection': false
            },
            settingsMenu: false,
            undoRedoMenu: false,
            deleteButton: true
        };
    }, [toolTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.moduleLoader.loadModule('jimu-ui/advanced/map').then((result) => {
            setMapModule(result);
        });
    });
    const handleDrawToolCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuDrawToolsRef) => {
        getLayerFunRef.current = jimuDrawToolsRef.getGraphicsLayer;
    }, []);
    const handleDrawStart = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        getLayerFunRef.current && (getLayerFunRef.current)().removeAll();
    }, []);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic) => {
        graphicRef.current = graphic;
        onDrawEnd(graphic, getLayerFunRef.current, clearAfterApply);
    }, [onDrawEnd, clearAfterApply]);
    const handleCleared = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        graphicRef.current = null;
        onDrawEnd(null);
    }, [onDrawEnd]);
    const handleClearSettingChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        if (graphicRef.current) {
            onDrawEnd(graphicRef.current, getLayerFunRef.current, e.target.checked);
        }
        setClearAfterApply(e.target.checked);
    }, [onDrawEnd]);
    const JimuDraw = mapModule === null || mapModule === void 0 ? void 0 : mapModule.JimuDraw;
    if (!JimuDraw) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.StatusIndicator, { statusType: widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading });
    }
    const isAvailable = Object.keys(visibleElements.createTools).some(toolName => visibleElements.createTools[toolName]);
    if (!isAvailable) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JimuDraw, { jimuMapView: jimuMapView, operatorWidgetId: widgetId, disableSymbolSelector: true, drawingOptions: {
                    creationMode: mapModule.JimuDrawCreationMode.Single,
                    updateOnGraphicClick: false,
                    visibleElements: visibleElements
                }, uiOptions: {
                    isHideBorder: true
                }, onJimuDrawCreated: handleDrawToolCreated, onDrawingStarted: handleDrawStart, onDrawingFinished: handleDrawEnd, onDrawingCleared: handleCleared }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: clearAfterApply, onChange: handleClearSettingChange, className: 'mr-2' }), getI18nMessage('clearDrawing')] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingResult: () => (/* binding */ LoadingResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");





const Root = jimu_theme__WEBPACK_IMPORTED_MODULE_3__.styled.div `
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 2;

  .loading-content {
    .loading-tip {
      position: relative;
    }
  }
`;
function LoadingResult() {
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'loading-content w-100 px-4 d-flex flex-column justify-content-center align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { role: 'alert', "aria-live": 'assertive', className: 'text-paper', children: translate('retrieving') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { className: 'loading-tip mt-8', type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryResultItem: () => (/* binding */ QueryResultItem)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _components_feature_info__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/feature-info */ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  overflow: auto;
  flex-flow: row;
  cursor: pointer;
  flex-shrink: 0;
  min-height: 2rem;
  position: relative;
  &.selected {
    outline: 2px solid var(--sys-color-primary-main);
  }
  
  .remove-button {
    position: absolute;
    top: 4px;
    right: 4px;
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
    
    // Larger touch target for mobile/accessibility
    min-width: 32px;
    min-height: 32px;
  }
`;
/**
 * QueryResultItem component - displays a single query result record
 * Features:
 * - Clicking the item zooms to the feature on the map
 * - Remove button (trash icon) in upper-right corner to remove record from results
 * - Records are expanded by default to show full feature information
 */
const QueryResultItem = (props) => {
    const { widgetId, data, dataSource, popupTemplate, defaultPopupTemplate, onClick, onRemove, expandByDefault = false } = props;
    const recordId = data.getId();
    // Log when QueryResultItem renders
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'QueryResultItem-render',
            recordId,
            expandByDefault,
            timestamp: Date.now()
        });
    }, [recordId, expandByDefault]);
    // Check if this record is currently selected
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[dataSource.id]) === null || _b === void 0 ? void 0 : _b.selectedIds) === null || _c === void 0 ? void 0 : _c.includes(data.getId()); });
    // Determine if list is displayed vertically (affects FeatureInfo expandability)
    const isVerticalAlign = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection !== _config__WEBPACK_IMPORTED_MODULE_5__.ListDirection.Horizontal;
    });
    // Handle clicking on the result item - zooms to feature on map
    const handleClickResultItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        // Don't trigger zoom if clicking the remove button
        if (e.target.closest('.remove-button')) {
            return;
        }
        onClick(data);
    }, [onClick, data]);
    // Handle clicking the remove button - removes record from results and selection
    const handleRemove = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        e.stopPropagation(); // Prevent triggering the item click handler
        e.preventDefault();
        onRemove(data);
    }, [onRemove, data]);
    const onKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Enter' || evt.key === ' ') {
            evt.preventDefault();
            evt.stopPropagation();
            handleClickResultItem(evt);
        }
    }, [handleClickResultItem]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-result-item', { selected }), onClick: handleClickResultItem, onKeyUp: onKeyUp, css: style, role: 'option', "aria-selected": selected, tabIndex: 0, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_feature_info__WEBPACK_IMPORTED_MODULE_4__["default"], { graphic: data.feature, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, togglable: isVerticalAlign, expandByDefault: expandByDefault, dataSource: dataSource }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: "remove-button", icon: true, size: "sm", variant: "text", color: "inherit", onClick: handleRemove, "aria-label": "Remove record", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px;
          min-width: 32px;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__.TrashOutlined, { size: 18 }) })] }));
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskResult: () => (/* binding */ QueryTaskResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hooks/use-zoom-to-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts");
/* harmony import */ var _simple_list__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./simple-list */ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/directional/expand-all */ "./jimu-icons/outlined/directional/expand-all.tsx");
/* harmony import */ var jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/directional/collapse-all */ "./jimu-icons/outlined/directional/collapse-all.tsx");
/* harmony import */ var _data_actions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../data-actions */ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */






// FORCED: Always SimpleList - LazyList and PagingList removed










const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_16__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_3__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Detects if an identify popup is currently visible in the DOM.
 * Uses verified selectors based on Experience Builder's identify popup structure.
 *
 * @returns true if identify popup is detected and visible, false otherwise
 */
function isIdentifyPopupOpen() {
    // Primary selector: .esri-popup with role="dialog"
    const popup = document.querySelector('.esri-popup[role="dialog"]');
    if (!popup) {
        return false;
    }
    // Verify it's visible (not hidden)
    const ariaHidden = popup.getAttribute('aria-hidden');
    if (ariaHidden === 'true') {
        return false;
    }
    // Additional check: verify computed style shows it's visible
    const style = window.getComputedStyle(popup);
    if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
        return false;
    }
    // Verify it contains esri-features (identify popup structure)
    const hasFeatures = popup.querySelector('.esri-features');
    if (!hasFeatures) {
        return false;
    }
    return true;
}
const resultStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  display: flex;
  flex-direction: column;

  .query-result__header {
    color: var(--sys-color-surface-paper-text);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: 1.5;
    border-bottom: 1px solid var(--sys-color-divider-secondary);
    margin-bottom: 6px;
    padding-bottom: 8px;
  }

  .query-result-container {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    overflow: auto;
    min-height: 0;
  }

  .query-result-info {
    height: 18px;
  }
`;
function QueryTaskResult(props) {
    var _a, _b;
    const { queryItem, queryParams, resultCount, maxPerPage, records, widgetId, outputDS, runtimeZoomToSelected, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, eventManager } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const intl = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
    const zoomToRecords = (0,_hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_6__.useZoomToRecords)(mapView);
    const [queryData, setQueryData] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [selectedRecords, setSelectedRecords] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState([]);
    const [removedRecordIds, setRemovedRecordIds] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Set());
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_QUERY_ITEM, queryItem);
    const [expandAll, setExpandAll] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    // Track individual item expansion states to maintain state when items are removed
    const [itemExpandStates, setItemExpandStates] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Map());
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Track expandAll changes for debugging
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-state-changed',
            widgetId,
            expandAll,
            queryItemConfigId: queryItem.configId,
            timestamp: Date.now()
        });
    }, [expandAll, widgetId, queryItem.configId]);
    // Track if we've already selected these records to prevent re-selection when switching tabs
    const hasSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track the last records we selected to detect when new records come in
    const lastSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the original query record IDs (not selected IDs) to detect when query results change
    const lastQueryRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the last selected FeatureDataRecords for restoration (if needed)
    const lastSelectedFeatureRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Ref to track removedRecordIds for use in callbacks (avoids stale closure issues)
    const removedRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(new Set());
    // Sync ref whenever removedRecordIds state changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        removedRecordIdsRef.current = removedRecordIds;
    }, [removedRecordIds]);
    // Error state for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const extraActions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,_data_actions__WEBPACK_IMPORTED_MODULE_13__.getExtraActions)(widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected);
    }, [widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected]);
    const enableDataAction = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_a = widgetJson.enableDataAction) !== null && _a !== void 0 ? _a : true;
    });
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    const directionTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection;
    });
    // FORCE SimpleList - ignore config, we're done with lazy loading issues
    const pagingType = _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.Simple;
    const direction = directionTypeInConfig !== null && directionTypeInConfig !== void 0 ? directionTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.ListDirection.Vertical;
    // Group records by origin data source for DataActionList
    // This ensures DataActionList recognizes records even when they come from different queries/origins
    const actionDataSets = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        // Debug: Log what records are available
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-calculation-start',
            widgetId: widgetId,
            selectedRecordsCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            queryDataRecordsCount: ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            hasSelectedRecords: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0,
            hasQueryDataRecords: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) > 0,
            hasRecordsProp: (records === null || records === void 0 ? void 0 : records.length) > 0
        });
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        // In accumulation modes (Add/Remove), prefer the 'records' prop (the accumulated set)
        // because outputDS.getSelectedRecords() will only return records that match the current query's where clause.
        const recordsToUse = isAccumulationMode
            ? (records || [])
            : ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0 ? selectedRecords : (((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.length) > 0 ? queryData.records : (records || [])));
        // If no records, return single DataRecordSet with empty records using outputDS
        if (!recordsToUse || recordsToUse.length === 0) {
            const emptyDataSet = {
                dataSource: outputDS,
                type: 'loaded',
                records: [],
                name: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                label: outputDS === null || outputDS === void 0 ? void 0 : outputDS.getLabel()
            };
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-empty-records',
                widgetId: widgetId,
                dataSetDataSourceId: (_d = emptyDataSet.dataSource) === null || _d === void 0 ? void 0 : _d.id
            });
            return [emptyDataSet];
        }
        // Group records by their origin data source
        const recordsByOriginDS = new Map();
        recordsToUse.forEach(record => {
            var _a, _b, _c, _d;
            const recordDS = (_b = (_a = record).getDataSource) === null || _b === void 0 ? void 0 : _b.call(_a);
            let originDS = null;
            if (recordDS) {
                originDS = ((_c = recordDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
            }
            else if (outputDS) {
                // Fallback: use outputDS's origin if record doesn't have dataSource
                originDS = ((_d = outputDS.getOriginDataSources()) === null || _d === void 0 ? void 0 : _d[0]) || outputDS;
            }
            if (originDS) {
                if (!recordsByOriginDS.has(originDS)) {
                    recordsByOriginDS.set(originDS, []);
                }
                recordsByOriginDS.get(originDS).push(record);
            }
        });
        // Create a DataRecordSet for each origin data source
        const dataSets = Array.from(recordsByOriginDS.entries()).map(([originDS, originRecords]) => {
            const dataSet = {
                dataSource: originDS, // Use origin DS, not outputDS
                type: 'selected',
                records: originRecords,
                name: originDS.id,
                label: originDS.getLabel()
            };
            // Add fields if needed (use currentItem's field settings)
            if (currentItem.resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_4__.FieldsType.SelectAttributes && currentItem.resultDisplayFields != null) {
                dataSet.fields = (0,_query_utils__WEBPACK_IMPORTED_MODULE_8__.combineFields)(currentItem.resultDisplayFields, currentItem.resultTitleExpression);
            }
            else if (originDS && 'getPopupInfo' in originDS) {
                // use fields in popup template from origin DS
                const popupInfo = originDS.getPopupInfo();
                if (popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) {
                    dataSet.fields = popupInfo.fieldInfos.filter((fieldInfo) => fieldInfo.visible).map((fieldInfo) => fieldInfo.fieldName);
                }
            }
            return dataSet;
        });
        // Debug: Log what the final dataSets contain
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-final',
            widgetId: widgetId,
            dataSetsCount: dataSets.length,
            totalRecordsCount: recordsToUse.length,
            dataSetsByOrigin: dataSets.map(ds => {
                var _a, _b;
                return ({
                    originDSId: (_a = ds.dataSource) === null || _a === void 0 ? void 0 : _a.id,
                    recordsCount: ((_b = ds.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                    type: ds.type
                });
            })
        });
        // If we couldn't group by origin (shouldn't happen), fallback to single DataRecordSet with outputDS
        if (dataSets.length === 0 && outputDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-fallback-to-outputDS',
                widgetId: widgetId,
                reason: 'could-not-determine-origin-ds'
            });
            return [{
                    dataSource: outputDS,
                    type: recordsToUse.length > 0 ? 'selected' : 'loaded',
                    records: recordsToUse,
                    name: outputDS.id,
                    label: outputDS.getLabel()
                }];
        }
        return dataSets;
    }, [selectedRecords, outputDS, queryData, currentItem, records, widgetId]);
    // Memoize filtered records to prevent unnecessary re-renders that reset scroll position
    // This ensures the records prop only changes when the actual data changes, not just the array reference
    const filteredRecordsForList = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        return ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.filter((record) => !removedRecordIds.has(record.getId()))) ||
            ((records === null || records === void 0 ? void 0 : records.filter(record => !removedRecordIds.has(record.getId()))) || []);
    }, [queryData === null || queryData === void 0 ? void 0 : queryData.records, records, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    /**
     * Effect hook that runs when new query results arrive.
     * Resets removed records, expand state, and query data for the new results.
     * Also handles auto-selection of records when they first arrive.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Check if these are new records (different from what we last queried)
        // IMPORTANT: Compare against original query results, not selected results
        // This prevents removedRecordIds from being reset when records are removed
        const currentRecordIds = (records === null || records === void 0 ? void 0 : records.map(record => record.getId())) || [];
        const recordsChanged = currentRecordIds.length !== lastQueryRecordIdsRef.current.length ||
            currentRecordIds.some((id, index) => id !== lastQueryRecordIdsRef.current[index]);
        // Debug: Log when records prop changes
        debugLogger.log('RESULTS-MODE', {
            event: 'records-prop-changed',
            widgetId: widgetId,
            recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            willSetQueryData: records && records.length > 0,
            removedRecordIdsCount: removedRecordIds.size,
            hasSelectedRef: hasSelectedRef.current,
            recordsChanged: recordsChanged,
            lastQueryRecordIdsCount: lastQueryRecordIdsRef.current.length,
            currentRecordIdsCount: currentRecordIds.length
        });
        // IMPORTANT: Only reset removed records if this is truly a NEW query with different records
        // Don't reset if records are the same (just a re-render or lazy load)
        if (recordsChanged) {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-truly-changed-resetting-removed',
                widgetId: widgetId,
                oldRecordIdsCount: lastQueryRecordIdsRef.current.length,
                newRecordIdsCount: currentRecordIds.length
            });
            setRemovedRecordIds(new Set());
            // Update the original query record IDs ref
            lastQueryRecordIdsRef.current = currentRecordIds;
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-not-changed-preserving-removed',
                widgetId: widgetId,
                recordIdsCount: currentRecordIds.length,
                removedRecordIdsCount: removedRecordIds.size
            });
        }
        // NOTE: Don't reset expandAll here - it's handled by the queryItem-change useEffect
        // Resetting it here causes the Expand/Collapse button to flip back when records are removed
        setQueryData({
            records,
            page: 1
        });
        // Only auto-select records if:
        // 1. We have records and outputDS
        // 2. We haven't already selected these records (hasSelectedRef is false)
        // 3. OR the records have actually changed (new query results)
        // 4. AND we don't have any removed records (to prevent re-selecting removed ones)
        if (records && records.length > 0 && outputDS &&
            (!hasSelectedRef.current || recordsChanged) &&
            removedRecordIds.size === 0) {
            const recordIds = records.map(record => record.getId());
            const fdr = records;
            (() => __awaiter(this, void 0, void 0, function* () {
                try {
                    setSelectionError(null); // Clear previous errors
                    yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                    hasSelectedRef.current = true; // Mark as selected
                    lastSelectedRecordsRef.current = recordIds; // Store the IDs we selected
                    lastSelectedFeatureRecordsRef.current = fdr; // Store the full records for potential restoration
                    // Notify Widget and HelperSimple of selection change
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.dispatchSelectionEvent)(widgetId, recordIds, outputDS, queryItem.configId, eventManager);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-query-result',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }))();
        }
        else if (recordsChanged && records && records.length === 0) {
            // If records were cleared, reset the selection flag
            hasSelectedRef.current = false;
            lastSelectedRecordsRef.current = [];
            setSelectionError(null); // Clear errors when clearing records
        }
        else if (removedRecordIds.size > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'skipping-reselection-due-to-removed-records',
                widgetId: widgetId,
                removedRecordIdsCount: removedRecordIds.size,
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                hasSelectedRef: hasSelectedRef.current,
                recordsChanged: recordsChanged
            });
        }
    }, [records, outputDS, widgetId, queryItem.configId, queryItem.resultExpandByDefault, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear selection when resultSelectMode changed
        if (outputDS) {
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.publishSelectionMessage)(widgetId, [], outputDS, true);
        }
    }, [queryItem.resultSelectMode, outputDS, widgetId, useGraphicsLayerForHighlight, graphicsLayer]);
    // Update expandAll when queryItem changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        const newExpandAll = (_a = queryItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false;
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-reset-by-queryItem-change',
            widgetId,
            queryItemConfigId: queryItem.configId,
            resultExpandByDefault: queryItem.resultExpandByDefault,
            newExpandAll,
            timestamp: Date.now()
        });
        setExpandAll(newExpandAll);
        // Reset individual expansion states when query changes
        setItemExpandStates(new Map());
    }, [queryItem.configId]);
    /**
     * Monitor origin data source selection changes to detect when other widgets (like map identify)
     * clear our selections. Enhanced with identify popup detection for testing scenarios.
     * Watches the origin data source's selection state directly via polling.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (!outputDS)
            return;
        const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (!originDS)
            return;
        const originDSId = originDS.id;
        let previousSelectedIds = [];
        let identifyPopupWasOpen = false;
        let lastLogTime = 0;
        const LOG_THROTTLE_MS = 1000; // Throttle logs to once per second
        // Initial check
        previousSelectedIds = originDS.getSelectedRecordIds() || [];
        identifyPopupWasOpen = isIdentifyPopupOpen();
        // Watch for selection changes on the origin data source
        const checkSelection = () => {
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            const ourExpectedIds = lastSelectedRecordsRef.current;
            const hasOurSelection = ourExpectedIds.length > 0;
            const identifyPopupIsOpen = isIdentifyPopupOpen();
            // Detect if selection was cleared or changed externally
            const wasCleared = previousSelectedIds.length > 0 && currentSelectedIds.length === 0;
            const wasChanged = previousSelectedIds.length > 0 &&
                (currentSelectedIds.length !== previousSelectedIds.length ||
                    !currentSelectedIds.every(id => previousSelectedIds.includes(id)));
            // NEW: Detect if selection was added (went from empty to having records)
            const wasAdded = previousSelectedIds.length === 0 && currentSelectedIds.length > 0;
            // Track identify popup state changes
            const identifyPopupJustOpened = !identifyPopupWasOpen && identifyPopupIsOpen;
            const identifyPopupJustClosed = identifyPopupWasOpen && !identifyPopupIsOpen;
            const identifyPopupStillOpen = identifyPopupWasOpen && identifyPopupIsOpen;
            // Log identify popup state changes
            const now = Date.now();
            if (identifyPopupJustOpened || identifyPopupJustClosed) {
                debugLogger.log('SELECTION', {
                    event: identifyPopupJustOpened ? 'identify-popup-opened' : 'identify-popup-closed',
                    originDSId,
                    ourSelectionCount: ourExpectedIds.length,
                    currentSelectionCount: currentSelectedIds.length,
                    timestamp: new Date().toISOString()
                });
                // If identify popup just closed and selection was cleared, dispatch restore event
                if (identifyPopupJustClosed && wasCleared && hasOurSelection && ourExpectedIds.length > 0) {
                    const restoreEvent = new CustomEvent(RESTORE_ON_IDENTIFY_CLOSE_EVENT, {
                        detail: {
                            widgetId,
                            recordIds: ourExpectedIds,
                            outputDsId: outputDS.id,
                            queryItemConfigId: queryItem.configId
                        },
                        bubbles: true,
                        cancelable: true
                    });
                    window.dispatchEvent(restoreEvent);
                    debugLogger.log('SELECTION', {
                        event: 'identify-popup-closed-restore-requested',
                        widgetId,
                        recordCount: ourExpectedIds.length,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    });
                }
            }
            // Log ALL selection changes (not just when we have our own selection)
            if (wasCleared || wasChanged || wasAdded) {
                // Check if this matches our expected selection
                const matchesOurSelection = hasOurSelection &&
                    ourExpectedIds.length === currentSelectedIds.length &&
                    ourExpectedIds.every(id => currentSelectedIds.includes(id));
                // Determine what would happen (for testing/logging)
                const wouldRestore = wasCleared && identifyPopupIsOpen && hasOurSelection && ourExpectedIds.length > 0;
                // Determine scenario
                let scenario = 'Unknown';
                if (wasAdded && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 4: Another widget selected records (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 5: Another widget changed selection (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 2: Query  Identify (selection changed, not cleared)  Would NOT restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget  Would NOT restore';
                }
                else if (wasCleared && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 1: Query  Identify  Would restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget (cleared)  Would NOT restore';
                }
                else if (wasAdded && hasOurSelection) {
                    scenario = matchesOurSelection
                        ? 'Our widget selected records'
                        : 'Another widget selected different records';
                }
                // Log detection with identify popup state (throttled)
                if (now - lastLogTime > LOG_THROTTLE_MS) {
                    debugLogger.log('SELECTION', {
                        event: wasCleared ? 'selection-cleared' : wasChanged ? 'selection-changed' : 'selection-added',
                        originDSId,
                        ourExpectedCount: ourExpectedIds.length,
                        previousSelectedCount: previousSelectedIds.length,
                        currentSelectedCount: currentSelectedIds.length,
                        wasCleared,
                        wasChanged,
                        wasAdded,
                        hasOurSelection,
                        matchesOurSelection,
                        identifyPopupIsOpen,
                        identifyPopupJustOpened,
                        identifyPopupStillOpen,
                        identifyPopupJustClosed,
                        wouldRestore,
                        ourExpectedIds: ourExpectedIds.slice(0, 5),
                        previousSelectedIds: previousSelectedIds.slice(0, 5),
                        currentSelectedIds: currentSelectedIds.slice(0, 5),
                        timestamp: new Date().toISOString(),
                        note: wouldRestore
                            ? 'Would restore selection (cleared + identify popup open)'
                            : identifyPopupIsOpen && wasChanged
                                ? 'Identify popup open but selection changed (not cleared) - would not restore'
                                : wasCleared && !identifyPopupIsOpen
                                    ? 'Selection cleared, checking if identify popup opens...'
                                    : wasAdded
                                        ? hasOurSelection && matchesOurSelection
                                            ? 'Our widget selected records'
                                            : hasOurSelection && !matchesOurSelection
                                                ? 'Another widget selected different records'
                                                : 'Selection added (by another widget or external source)'
                                        : 'No identify popup detected - would not restore'
                    });
                    lastLogTime = now;
                }
            }
            previousSelectedIds = [...currentSelectedIds];
            identifyPopupWasOpen = identifyPopupIsOpen;
        };
        // Check periodically (every 500ms)
        const intervalId = setInterval(checkSelection, 500);
        return () => {
            clearInterval(intervalId);
        };
    }, [outputDS]);
    /**
     * Clears all results. Resets local state and delegates to parent's clearResult method.
     */
    const clearResults = () => __awaiter(this, void 0, void 0, function* () {
        // Log hash state before clearing
        const hashBefore = window.location.hash.substring(1);
        const urlParamsBefore = new URLSearchParams(hashBefore);
        const hashParamsBefore = {};
        urlParamsBefore.forEach((value, key) => {
            hashParamsBefore[key] = value;
        });
        debugLogger.log('HASH', {
            event: 'clearResults-called',
            widgetId,
            hashBefore: hashBefore,
            hashParamsBefore: hashParamsBefore,
            hashParamsCount: Object.keys(hashParamsBefore).length,
            timestamp: Date.now()
        });
        // Reset local selection flags
        hasSelectedRef.current = false;
        lastSelectedRecordsRef.current = [];
        // Reset local query data state
        setQueryData(null);
        setRemovedRecordIds(new Set());
        // Clear error state when clearing results
        setSelectionError(null);
        // Delegate to parent's clearResult method (via onNavBack) which handles
        // clearing selection from map, publishing messages, etc.
        yield onNavBack(true);
        // Log hash state after clearing (with delay to catch async updates)
        setTimeout(() => {
            const hashAfter = window.location.hash.substring(1);
            const urlParamsAfter = new URLSearchParams(hashAfter);
            const hashParamsAfter = {};
            urlParamsAfter.forEach((value, key) => {
                hashParamsAfter[key] = value;
            });
            debugLogger.log('HASH', {
                event: 'clearResults-completed',
                widgetId,
                hashBefore: hashBefore,
                hashAfter: hashAfter,
                hashParamsBefore: hashParamsBefore,
                hashParamsAfter: hashParamsAfter,
                hashParamsRemoved: Object.keys(hashParamsBefore).length - Object.keys(hashParamsAfter).length,
                hashParamsCountBefore: Object.keys(hashParamsBefore).length,
                hashParamsCountAfter: Object.keys(hashParamsAfter).length,
                stillHasHashParams: Object.keys(hashParamsAfter).length > 0,
                timestamp: Date.now()
            });
        }, 100);
    });
    const handleRenderDone = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(({ dataItems, pageSize, page }) => {
        debugLogger.log('RESULTS-MODE', {
            event: 'handleRenderDone-called',
            widgetId,
            queryItemConfigId: queryItem.configId,
            dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
            pageSize,
            page,
            timestamp: Date.now()
        });
        // Use ref to get latest removedRecordIds (avoids stale closure issues with lazy loading)
        const currentRemovedIds = removedRecordIdsRef.current;
        // Filter out removed records FIRST - before any selection logic
        // This ensures removed records stay removed even during lazy loading
        const filteredItems = (dataItems === null || dataItems === void 0 ? void 0 : dataItems.filter(item => !currentRemovedIds.has(item.getId()))) || [];
        // Check if queryData has actually changed before updating state
        // This prevents unnecessary re-renders that reset scroll position
        const currentRecords = (queryData === null || queryData === void 0 ? void 0 : queryData.records) || [];
        const currentRecordIds = currentRecords.map(r => r.getId()).sort();
        const newRecordIds = filteredItems.map(r => r.getId()).sort();
        const dataChanged = currentRecordIds.length !== newRecordIds.length ||
            !currentRecordIds.every((id, idx) => id === newRecordIds[idx]) ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.pageSize) !== pageSize ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.page) !== page;
        // Only update state if data has actually changed
        if (dataChanged) {
            setQueryData({
                records: filteredItems,
                pageSize,
                page
            });
        }
        // Only select records that are NOT removed
        // IMPORTANT: Only re-select if the selection has actually changed to avoid resetting scroll position
        if (filteredItems && filteredItems.length > 0 && outputDS) {
            const recordIds = filteredItems.map(record => record.getId());
            const fdr = filteredItems;
            // Check what's currently selected to avoid unnecessary re-selection (which resets scroll)
            const currentlySelectedIds = outputDS.getSelectedRecordIds() || [];
            const selectionChanged = currentlySelectedIds.length !== recordIds.length ||
                !recordIds.every(id => currentlySelectedIds.includes(id));
            // Only select if the selection has actually changed
            if (selectionChanged) {
                try {
                    setSelectionError(null); // Clear previous errors
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
                    debugLogger.log('RESULTS-MODE', {
                        event: 'handleRenderDone-selecting-filtered-records',
                        widgetId: widgetId,
                        dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                        filteredItemsCount: filteredItems.length,
                        removedRecordIdsCount: currentRemovedIds.size,
                        selectionChanged: true,
                        currentlySelectedCount: currentlySelectedIds.length,
                        newSelectionCount: recordIds.length
                    });
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-handleRenderDone',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'handleRenderDone-skipping-reselection',
                    widgetId: widgetId,
                    dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                    filteredItemsCount: filteredItems.length,
                    removedRecordIdsCount: currentRemovedIds.size,
                    reason: 'selection-unchanged',
                    currentlySelectedCount: currentlySelectedIds.length
                });
            }
        }
    }, [outputDS, widgetId, queryData]);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(outputDS === null || outputDS === void 0 ? void 0 : outputDS.id);
        const dsRecords = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        const selectedIds = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
        // Capture records prop before using it (to avoid shadowing)
        const recordsProp = records;
        // Debug: Log what handleDataSourceInfoChange sees
        debugLogger.log('RESULTS-MODE', {
            event: 'handleDataSourceInfoChange-fired',
            widgetId: widgetId,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            dsId: ds === null || ds === void 0 ? void 0 : ds.id,
            selectedRecordsFromDS: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
            selectedIdsFromDS: selectedIds.length,
            currentSelectedRecordsState: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            recordsPropCount: (recordsProp === null || recordsProp === void 0 ? void 0 : recordsProp.length) || 0,
            removedRecordIdsCount: removedRecordIds.size,
            timestamp: Date.now()
        });
        // If we have records in the prop (accumulated records) but DS shows 0 selected,
        // and we currently have selectedRecords, this is likely a query switch in "Add to" mode
        // where re-selection hasn't happened yet. Don't clear selectedRecords - wait for re-selection.
        if (recordsProp && recordsProp.length > 0 && selectedIds.length === 0 && selectedRecords && selectedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-clear-during-query-switch',
                widgetId: widgetId,
                reason: 'waiting-for-reselection',
                recordsPropCount: recordsProp.length,
                currentSelectedRecordsCount: selectedRecords.length
            });
            return; // Skip updating - re-selection is coming
        }
        // IMPORTANT: Filter out removed records from DS selection before comparing/syncing
        // This prevents removed records from being re-added when scrolling triggers this callback
        const filteredDsRecords = (_b = dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.filter((record) => !removedRecordIds.has(record.getId()))) !== null && _b !== void 0 ? _b : [];
        const filteredSelectedIds = selectedIds.filter(id => !removedRecordIds.has(id));
        // If DS has more selected than our state, but the difference is entirely removed records, don't sync
        if (filteredSelectedIds.length === ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0) && selectedIds.length > filteredSelectedIds.length) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-sync-due-to-removed-records',
                widgetId: widgetId,
                reason: 'ds-selection-includes-removed-records',
                dsSelectedCount: selectedIds.length,
                filteredCount: filteredSelectedIds.length,
                componentStateCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                removedRecordIdsCount: removedRecordIds.size
            });
            return; // Skip syncing - the mismatch is due to removed records
        }
        let shouldUpdate = false;
        if (filteredSelectedIds.length !== (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length)) {
            shouldUpdate = true;
        }
        else { // equal length
            shouldUpdate = filteredSelectedIds.some(id => {
                const target = selectedRecords.find((item) => item.getId() === id);
                return target == null;
            });
        }
        if (shouldUpdate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                note: 'filtered-out-removed-records'
            });
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                oldSelectedIds: (selectedRecords || []).map(r => r.getId()).slice(0, 5),
                newSelectedIds: filteredSelectedIds.slice(0, 5),
                note: 'filtered-out-removed-records',
                timestamp: Date.now()
            });
            setSelectedRecords(filteredDsRecords);
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-update',
                widgetId: widgetId,
                reason: 'no-change-detected',
                timestamp: Date.now()
            });
        }
    }, [outputDS === null || outputDS === void 0 ? void 0 : outputDS.id, selectedRecords, widgetId, records, removedRecordIds]);
    /**
     * Generates the tip message showing how many features are displayed.
     * Filters out removed records to show accurate counts.
     *
     * @returns Formatted string like "Features displayed: 118 / 121"
     */
    const getTipMessage = () => {
        if (queryData && queryData.records) {
            // Filter out removed records for display count
            const displayedRecords = queryData.records.filter((record) => !removedRecordIds.has(record.getId()));
            const displayedCount = displayedRecords.length;
            // FORCED: Always SimpleList, so always use simple display format
            return `${getI18nMessage('featuresDisplayed')}: ${displayedCount} / ${resultCount}`;
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
        }
        return '';
    };
    /**
     * Toggles expand/collapse state for all result items.
     * When toggled, all result items will be expanded or collapsed together.
     * Updates individual item expansion states in the map to maintain state when items are removed.
     */
    const toggleExpandAll = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setExpandAll(prev => {
            const newValue = !prev;
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'toggleExpandAll-clicked',
                widgetId,
                previousValue: prev,
                newValue,
                timestamp: Date.now()
            });
            // Update all current items in the map with the new expansion state
            setItemExpandStates(prevMap => {
                const newMap = new Map(prevMap);
                // Get all current record IDs from filtered records
                const allRecordIds = filteredRecordsForList.map(r => r.getId());
                allRecordIds.forEach(id => {
                    newMap.set(id, newValue);
                });
                debugLogger.log('EXPAND-COLLAPSE', {
                    event: 'itemExpandStates-updated',
                    widgetId,
                    newValue,
                    updatedCount: allRecordIds.length,
                    recordIds: allRecordIds.slice(0, 10), // Log first 10 IDs
                    timestamp: Date.now()
                });
                return newMap;
            });
            return newValue;
        });
    }, [widgetId, filteredRecordsForList]);
    const resultUseOutputDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
            dataSourceId: queryItem.outputDataSourceId,
            mainDataSourceId: queryItem.outputDataSourceId
        });
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.outputDataSourceId]);
    const handleEscape = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    }, []);
    // Keep records selected and zoom to clicked record
    // Records remain selected as long as they're in the results
    // Clicking a record always zooms to it on the map (this behavior is always enabled)
    const toggleSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        // Ensure the clicked record is selected (it should already be, but ensure it)
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        const dataId = data.getId();
        // If this record isn't already selected, add it to the selection
        if (!selectedIds.includes(dataId)) {
            const updatedSelectedDatas = [...selectedDatas, data];
            const recordIds = updatedSelectedDatas.map(record => record.getId());
            // Select records and publish selection message using utility function
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
        }
        // Zoom to the clicked record with padding (always enabled - user wants to keep this behavior)
        // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
        if (!mapView && !useGraphicsLayerForHighlight) {
            debugLogger.log('BUG', {
                bugId: 'BUG-GRAPHICS-001',
                category: 'GRAPHICS',
                event: 'zoom-operation-failed-graphics-layer-disabled',
                widgetId,
                operation: 'result-item-click-zoom',
                recordId: data.getId(),
                description: 'Zoom operation attempted on result item click but mapView is unavailable because useGraphicsLayerForHighlight is disabled',
                workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                targetResolution: 'r019.0'
            });
        }
        zoomToRecords([data]).catch(error => {
            // Silently handle errors - zoom is non-critical
        });
    }, [outputDS, widgetId, zoomToRecords]);
    /**
     * Removes a record from the results and selection.
     * If removing the last record, automatically clears all results
     * by calling the trash can logic (same as clicking Clear button).
     * This ensures the UI doesn't show "Features displayed: 0 / 1" when all results are removed.
     *
     * @param data - The feature data record to remove
     */
    const removeRecord = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        const dataId = data.getId();
        const currentExpandAll = expandAll;
        // Log hash state when removing individual record
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        const hashParams = {};
        urlParams.forEach((value, key) => {
            hashParams[key] = value;
        });
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'removeRecord-started',
            widgetId,
            removedRecordId: dataId,
            currentExpandAll,
            timestamp: Date.now()
        });
        debugLogger.log('HASH', {
            event: 'removeRecord-called',
            widgetId,
            removedRecordId: dataId,
            hash: hash,
            hashParams: hashParams,
            hashParamsCount: Object.keys(hashParams).length,
            timestamp: Date.now()
        });
        // Remove from expansion states map
        setItemExpandStates(prevMap => {
            const newMap = new Map(prevMap);
            newMap.delete(dataId);
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'itemExpandStates-cleaned-up',
                widgetId,
                removedRecordId: dataId,
                remainingCount: newMap.size,
                timestamp: Date.now()
            });
            return newMap;
        });
        // Add to removed records set
        setRemovedRecordIds(prev => {
            var _a, _b;
            const newSet = new Set(prev).add(dataId);
            // If all records are now removed, clear everything by calling trash can logic
            // IMPORTANT: Compare against actual displayed records count, not resultCount
            // resultCount only reflects the latest query, but in "Add to" mode we display accumulated records
            // Use queryData.records.length (before filtering) as the source of truth for displayed records
            // Fall back to accumulatedRecords.length if in accumulation mode, or resultCount as last resort
            let currentDisplayedCount = ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            if (currentDisplayedCount === 0) {
                // If queryData doesn't have records yet, check if we're in accumulation mode
                const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
                    resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
                if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                    currentDisplayedCount = accumulatedRecords.length;
                }
                else {
                    // Last resort: use resultCount (but this might be incorrect in accumulation mode)
                    currentDisplayedCount = resultCount;
                }
            }
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-checking-all-removed',
                widgetId,
                removedRecordIdsSize: newSet.size,
                currentDisplayedCount,
                resultCount,
                queryDataRecordsCount: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                resultsMode,
                willNavigateBack: newSet.size === currentDisplayedCount && currentDisplayedCount > 0,
                timestamp: Date.now()
            });
            if (newSet.size === currentDisplayedCount && currentDisplayedCount > 0) {
                // All displayed records removed - clear everything (same as clicking trash can button)
                onNavBack(true);
                return newSet;
            }
            return newSet;
        });
        // Update queryData to filter out the removed record
        setQueryData(prevData => {
            if (!prevData)
                return prevData;
            const filteredRecords = prevData.records.filter((record) => record.getId() !== dataId);
            return Object.assign(Object.assign({}, prevData), { records: filteredRecords });
        });
        // ALWAYS remove from origin data source selections (same as Remove mode)
        // This properly removes records from the map selection, handling single or multiple origin sources
        // Also removes graphics from graphics layer if using graphics layer highlighting
        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_15__.removeRecordsFromOriginSelections)(widgetId, [data], outputDS, useGraphicsLayerForHighlight, graphicsLayer);
        // DIAGNOSTIC LOGGING: Full state BEFORE removal
        const outputDSSelectedBefore = outputDS.getSelectedRecords() || [];
        const outputDSSelectedIdsBefore = outputDSSelectedBefore.map(r => r.getId());
        const accumulatedRecordsIdsBefore = (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.map(r => r.getId())) || [];
        const graphicsLayerIdsBefore = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.map(g => { var _a, _b, _c; return ((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.OBJECTID) || ((_b = g.attributes) === null || _b === void 0 ? void 0 : _b.id) || ((_c = g.attributes) === null || _c === void 0 ? void 0 : _c.FID); })) || [];
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-before-state',
            widgetId,
            removedRecordId: dataId,
            outputDSSelectedCount: outputDSSelectedBefore.length,
            outputDSSelectedIds: outputDSSelectedIdsBefore,
            accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
            accumulatedRecordsIds: accumulatedRecordsIdsBefore,
            graphicsLayerCount: ((_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.length) || 0,
            graphicsLayerIds: graphicsLayerIdsBefore,
            allSourcesMatch: outputDSSelectedIdsBefore.length === accumulatedRecordsIdsBefore.length &&
                outputDSSelectedIdsBefore.length === graphicsLayerIdsBefore.length &&
                JSON.stringify(outputDSSelectedIdsBefore.sort()) === JSON.stringify(accumulatedRecordsIdsBefore.sort()),
            timestamp: Date.now()
        });
        // Update outputDS selection
        const selectedDatas = (_c = outputDS.getSelectedRecords()) !== null && _c !== void 0 ? _c : [];
        const updatedSelectedDatas = selectedDatas.filter(record => record.getId() !== dataId);
        const recordIds = updatedSelectedDatas.map(record => record.getId());
        // DEBUG: Log state fragmentation after removal
        debugLogger.log('RESULTS-MODE', {
            event: 'removeRecord-state-fragmentation-debug',
            widgetId,
            removedRecordId: dataId,
            removedRecordIdsCount: removedRecordIds.size + 1, // +1 because we just added it
            outputDSSelectedBeforeRemoval: selectedDatas.length,
            outputDSSelectedAfterRemoval: updatedSelectedDatas.length,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            queryDataRecordsCount: ((_d = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _d === void 0 ? void 0 : _d.length) || 0,
            accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
            resultsMode,
            note: 'verify-if-recordsProp-contains-removed-record',
            timestamp: Date.now()
        });
        // Update outputDS selection
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, updatedSelectedDatas);
        }
        // IMPORTANT: Publish custom event so widget can update lastSelection state
        // This ensures restoration restores the correct (updated) count
        const originDS = (_e = outputDS.getOriginDataSources()) === null || _e === void 0 ? void 0 : _e[0];
        const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
        const selectionEvent = new CustomEvent('querysimple-selection-changed', {
            detail: {
                widgetId,
                recordIds, // Updated record IDs (with removed record excluded)
                dataSourceId,
                outputDsId: outputDS.id,
                queryItemConfigId: queryItem.configId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(selectionEvent);
        // DIAGNOSTIC LOGGING: Full state AFTER removal (before sync)
        const outputDSSelectedAfter = outputDS.getSelectedRecords() || [];
        const outputDSSelectedIdsAfter = outputDSSelectedAfter.map(r => r.getId());
        const graphicsLayerIdsAfter = ((_f = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _f === void 0 ? void 0 : _f.map(g => { var _a, _b, _c; return ((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.OBJECTID) || ((_b = g.attributes) === null || _b === void 0 ? void 0 : _b.id) || ((_c = g.attributes) === null || _c === void 0 ? void 0 : _c.FID); })) || [];
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-after-state-before-sync',
            widgetId,
            removedRecordId: dataId,
            outputDSSelectedCount: outputDSSelectedAfter.length,
            outputDSSelectedIds: outputDSSelectedIdsAfter,
            graphicsLayerCount: ((_g = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _g === void 0 ? void 0 : _g.length) || 0,
            graphicsLayerIds: graphicsLayerIdsAfter,
            removedFromOutputDS: outputDSSelectedIdsAfter.length < outputDSSelectedIdsBefore.length,
            removedFromGraphics: graphicsLayerIdsAfter.length < graphicsLayerIdsBefore.length,
            timestamp: Date.now()
        });
        // FIX (r018.68): Sync accumulatedRecords with outputDS.getSelectedRecords() as single source of truth
        // This ensures immediate sync when X button is clicked - no lazy syncing
        // outputDS.getSelectedRecords() is the authoritative source that stays in sync with removals
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
            resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        if (isAccumulationMode && onAccumulatedRecordsChange) {
            // Get the actual selected records from outputDS (single source of truth)
            // This is called AFTER outputDS.selectRecordsByIds() above, so it reflects the removal
            const actuallySelectedRecords = outputDS.getSelectedRecords() || [];
            // Sync accumulatedRecords with what's actually selected
            // This ensures removed records are immediately excluded from accumulatedRecords
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                // Build a Set of actually selected IDs for fast lookup
                const actuallySelectedIds = new Set(actuallySelectedRecords.map(r => r.getId()));
                // Filter accumulatedRecords to only include records that are actually selected
                const syncedRecords = accumulatedRecords.filter(record => actuallySelectedIds.has(record.getId()));
                const syncedRecordsIds = syncedRecords.map(r => r.getId());
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-immediate-sync-with-outputds',
                    widgetId,
                    removedRecordId: dataId,
                    accumulatedRecordsCountBefore: accumulatedRecords.length,
                    accumulatedRecordsIdsBefore: accumulatedRecordsIdsBefore,
                    actuallySelectedCount: actuallySelectedRecords.length,
                    actuallySelectedIds: outputDSSelectedIdsAfter,
                    syncedRecordsCount: syncedRecords.length,
                    syncedRecordsIds: syncedRecordsIds,
                    recordsRemoved: accumulatedRecords.length - syncedRecords.length,
                    removedIds: accumulatedRecordsIdsBefore.filter(id => !syncedRecordsIds.includes(id)),
                    note: 'immediate-sync-with-outputds-getSelectedRecords',
                    timestamp: Date.now()
                });
                // Update accumulatedRecords to match reality (immediate sync, not lazy)
                onAccumulatedRecordsChange(syncedRecords);
                // DIAGNOSTIC LOGGING: Full state AFTER sync
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-removal-after-sync-state',
                    widgetId,
                    removedRecordId: dataId,
                    accumulatedRecordsCountAfter: syncedRecords.length,
                    accumulatedRecordsIdsAfter: syncedRecordsIds,
                    outputDSSelectedCount: outputDSSelectedAfter.length,
                    outputDSSelectedIds: outputDSSelectedIdsAfter,
                    graphicsLayerCount: ((_h = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _h === void 0 ? void 0 : _h.length) || 0,
                    graphicsLayerIds: graphicsLayerIdsAfter,
                    allSourcesMatch: syncedRecordsIds.length === outputDSSelectedIdsAfter.length &&
                        syncedRecordsIds.length === graphicsLayerIdsAfter.length &&
                        JSON.stringify(syncedRecordsIds.sort()) === JSON.stringify(outputDSSelectedIdsAfter.sort()),
                    timestamp: Date.now()
                });
            }
            else if (actuallySelectedRecords.length > 0) {
                // If accumulatedRecords is empty but outputDS has selection, sync it
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-syncing-empty-accumulated-with-outputds',
                    widgetId,
                    removedRecordId: dataId,
                    actuallySelectedCount: actuallySelectedRecords.length,
                    note: 'accumulatedRecords-was-empty-syncing-from-outputds',
                    timestamp: Date.now()
                });
                onAccumulatedRecordsChange(actuallySelectedRecords);
            }
            else {
                // Both are empty - ensure accumulatedRecords is empty
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-both-empty-syncing',
                    widgetId,
                    removedRecordId: dataId,
                    note: 'both-accumulatedRecords-and-outputds-are-empty',
                    timestamp: Date.now()
                });
                onAccumulatedRecordsChange([]);
            }
        }
        // Log after removeRecord completes to check if expandAll changed
        setTimeout(() => {
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-completed',
                widgetId,
                removedRecordId: dataId,
                expandAllBefore: currentExpandAll,
                expandAllAfter: expandAll,
                expandAllChanged: currentExpandAll !== expandAll,
                expandByDefaultProp: expandAll, // What will be passed to SimpleList
                timestamp: Date.now()
            });
        }, 0);
    }, [outputDS, widgetId, resultCount, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, queryItem.configId, expandAll]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result h-100', css: resultStyle, role: 'listbox', "aria-label": getI18nMessage('results'), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: resultUseOutputDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding: 0 16px; margin-top: 8px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_16__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result__header d-flex align-items-center mx-4', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { "aria-label": getI18nMessage('back'), ref: backBtnRef, className: 'p-0 mr-2', size: 'sm', variant: 'text', color: 'inherit', icon: true, onClick: () => { onNavBack(); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__.ArrowLeftOutlined, { autoFlip: true }) }), (_b = currentItem.resultsLabel) !== null && _b !== void 0 ? _b : getI18nMessage('results'), ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, size: 'sm', variant: 'text', color: 'inherit', onClick: clearResults, "aria-label": getI18nMessage('clearResult'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: iconMap.toolDelete }) }) }), enableDataAction && outputDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `width: 1px; height: 16px; background-color: var(--sys-color-divider-input);` }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionList, { widgetId: widgetId, dataSets: actionDataSets, listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionListStyle.Dropdown, buttonSize: 'sm', buttonType: 'tertiary', extraActions: extraActions })] }))] }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-container mt-1', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-info mb-2 px-4 d-flex align-items-center justify-content-between', role: 'alert', "aria-live": 'polite', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: getTipMessage() }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), placement: 'top', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, onClick: toggleExpandAll, "aria-label": expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), children: expandAll ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__.CollapseAllOutlined, {}) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__.ExpandAllOutlined, {}) }) }) })] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_simple_list__WEBPACK_IMPORTED_MODULE_7__.SimpleList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, records: filteredRecordsForList, direction: direction, onEscape: handleEscape, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll, itemExpandStates: itemExpandStates, removedRecordIds: removedRecordIds, onRenderDone: handleRenderDone }, 'simple'))] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskContext: () => (/* binding */ QueryTaskContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    resetSymbol: null
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskForm: () => (/* binding */ QueryTaskForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-spatial-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");

/** @jsx jsx */











const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__.createQuerySimpleDebugLogger)();



/**
 * Event-Driven Hash Parameter Execution Pattern
 *
 * CRITICAL: This is the ONLY execution path for hash-triggered queries.
 *
 * Flow:
 * 1. Hash value set in state as STRING (e.g., "5568900000")
 * 2. DOM manipulation triggers SqlExpressionRuntime to process the value
 * 3. SqlExpressionRuntime converts string  array format [{value: "...", label: "..."}]
 * 4. handleSqlExprObjChange detects conversion  dispatches QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT
 * 5. Event listener in query-task.tsx executes query (OR handleSqlExprObjChange calls applyQuery directly)
 *
 * WHY THIS PATTERN EXISTS:
 * - SqlExpressionRuntime ONLY fires onChange when value is converted to array format
 * - Queries REQUIRE array format - executing with string format returns unfiltered results (1000 records)
 * - We MUST wait for conversion before executing queries
 *
 * ANTI-PATTERN TO AVOID:
 * - DO NOT add useEffect hooks that execute queries based on string values
 * - DO NOT execute queries before QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT is dispatched
 * - DO NOT circumvent the event-driven flow with early execution checks
 *
 * If you need to execute a query, wait for the conversion event or call applyQuery()
 * AFTER handleSqlExprObjChange has detected the conversion and dispatched the event.
 */
const QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT = 'querysimple-hash-value-converted';
const getFormStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    .form-title {
      color: var(--sys-color-surface-paper-text);
      font-weight: 500;
      font-size: 0.8125rem;
      line-height: 1.5;
      margin-top: 0 !important;
    }
    .query-form__content {
      flex: 1 1 ${isAutoHeight ? 'auto' : 'auto'};
      max-height: ${isAutoHeight ? '61.8vh' : 'none'};
      overflow: auto;
      padding-bottom: 0;
    }
    .query-form__actions {
      flex-shrink: 0;
      margin-top: 0;
      padding-top: 4px;
    }
  `;
};
function QueryTaskForm(props) {
    var _a;
    const { widgetId, configId, outputDS, spatialFilterEnabled, datasourceReady, onFormSubmit, dataActionFilter, initialInputValue, onHashParameterUsed, queryItemShortId, activeTab, onTabChange } = props;
    const preDataActionFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.usePrevious(dataActionFilter);
    const queryItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.queryItems.find(item => item.configId === configId);
    });
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_8__["default"]);
    const [resetSymbol, setResetSymbol] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Runtime zoom preference - initialized with config value, can be overridden by user
    const [runtimeZoomToSelected, setRuntimeZoomToSelected] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    // Sync runtime zoom preference when query item changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setRuntimeZoomToSelected((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected, queryItem === null || queryItem === void 0 ? void 0 : queryItem.configId]);
    // const [dataSource, setDataSource] = React.useState<DataSource>(null)
    const { useAttributeFilter, useSpatialFilter, spatialFilterTypes, sqlExprObj, spatialMapWidgetIds, spatialInteractiveCreateToolTypes, spatialRelationUseDataSources, spatialIncludeRuntimeData, spatialRelations, spatialRelationEnableBuffer, spatialRelationBufferDistance, spatialRelationBufferUnit, spatialInteractiveEnableBuffer, spatialInteractiveBufferDistance, spatialInteractiveBufferUnit, attributeFilterLabel = getI18nMessage('attributeFilter'), spatialFilterLabel = getI18nMessage('spatialFilter'), attributeFilterDesc, spatialFilterDesc } = currentItem;
    const [attributeFilterSqlExprObj, setAttributeFilterSqlExprObj] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(sqlExprObj);
    // Ref to track current SQL expression for synchronous access in applyQuery
    // This ensures hash values are immediately available when Apply is clicked
    const attributeFilterSqlExprObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(sqlExprObj);
    const spatialFilterObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const spatialRelationRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(_config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect);
    const bufferRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const applyButtonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const formContentRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_10__.useAutoHeight)();
    const showClauseNumber = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef((0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj));
    const initialValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track which configId we've set the value for
    const lastValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track the last value that was set
    const hashTriggeredRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false); // Track if query was triggered via hash parameter
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track previous configId to detect query switches
    const [isTypingValid, setIsTypingValid] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    // Monitor focus and input events within the query form
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleFocus = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                setIsTypingValid((0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val));
                debugLogger.log('FORM', {
                    event: 'input-focused',
                    configId,
                    tagName: target.tagName,
                    type: target.type,
                    value: val
                });
            }
        };
        const handleInput = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val);
                setIsTypingValid(isValid);
                debugLogger.log('FORM', {
                    event: 'input-typing',
                    configId,
                    value: val,
                    isTypingValid: isValid
                });
            }
        };
        const handleFocusOut = (e) => {
            // Small delay to allow state to catch up
            setTimeout(() => {
                setIsTypingValid(false);
            }, 50);
        };
        const container = formContentRef.current;
        if (container) {
            container.addEventListener('focusin', handleFocus);
            container.addEventListener('input', handleInput);
            container.addEventListener('focusout', handleFocusOut);
        }
        return () => {
            if (container) {
                container.removeEventListener('focusin', handleFocus);
                container.removeEventListener('input', handleInput);
                container.removeEventListener('focusout', handleFocusOut);
            }
        };
    }, [configId]);
    // Check if any attribute filter input is valid
    const isInputValid = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        // If the user is currently typing something valid, the form is valid
        if (isTypingValid) {
            debugLogger.log('FORM', {
                event: 'validation-check-instant',
                configId,
                isValid: true
            });
            return true;
        }
        if (!(attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) || attributeFilterSqlExprObj.parts.length === 0) {
            return true; // If no parts, we assume it's valid (e.g. spatial-only query)
        }
        // Check if at least one SINGLE part has a valid value
        const hasValidValue = attributeFilterSqlExprObj.parts.some(part => {
            var _a, _b, _c, _d;
            // Accessing Immutable structures requires care. If dot notation fails, 
            // the framework components might be using .get() or other methods.
            // We'll be inclusive here: if it's not a SINGLE part, we treat it as valid.
            if (part.type === 'SINGLE') {
                const val = (_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value;
                const source = (_b = part.valueOptions) === null || _b === void 0 ? void 0 : _b.source;
                // If the source is NOT 'USER_INPUT', it's likely a list/dropdown (UNIQUE_VALUES, FIELD_VALUE)
                // We also check for part.dataSource which is common for list-based selections
                // We treat these as "List" types which are exempted from the empty-string rule.
                const isList = (source && source !== 'USER_INPUT') || ((_c = part.dataSource) === null || _c === void 0 ? void 0 : _c.source);
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val, !!isList);
                debugLogger.log('FORM', {
                    event: 'validation-check-detail',
                    configId,
                    partType: part.type,
                    source,
                    hasDataSource: !!part.dataSource,
                    dataSourceSource: (_d = part.dataSource) === null || _d === void 0 ? void 0 : _d.source,
                    isList: !!isList,
                    value: val,
                    isValid
                });
                debugLogger.log('FORM', {
                    event: 'validation-check',
                    configId,
                    partType: part.type,
                    source,
                    isList,
                    value: val,
                    valueType: typeof val,
                    isValid
                });
                return isValid;
            }
            return true;
        });
        return hasValidValue;
    }, [attributeFilterSqlExprObj, configId, isTypingValid]);
    const originDS = outputDS === null || outputDS === void 0 ? void 0 : outputDS.getOriginDataSources()[0];
    // Track configId changes (query switches)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('FORM', {
            event: 'configId-changed',
            configId,
            previousConfigId: initialValueSetRef.current,
            initialInputValue,
            timestamp: Date.now()
        });
    }, [configId, initialInputValue, datasourceReady, outputDS, widgetId, hashTriggeredRef]);
    /**
     * Sets the input value from URL hash parameters when:
     * 1. Datasource is ready
     * 2. We have an initialInputValue from URL hash
     * 3. We haven't already set it for this configId, OR the value has changed
     *
     * Uses both React state updates and DOM manipulation to ensure the value
     * is properly set in SqlExpressionRuntime's internal state.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v;
        debugLogger.log('FORM', {
            event: 'initialInputValue-prop-received',
            configId,
            initialInputValue,
            datasourceReady,
            hasSqlExprObj: !!sqlExprObj,
            sqlExprObjPartsLength: (_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length,
            initialValueSetRef: initialValueSetRef.current,
            willProcess: datasourceReady && initialInputValue && ((_b = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _b === void 0 ? void 0 : _b.length) > 0,
            timestamp: Date.now()
        });
        // Reset flag if configId changed (switched to different query)
        if (initialValueSetRef.current !== null && initialValueSetRef.current !== configId) {
            initialValueSetRef.current = null;
            lastValueSetRef.current = null;
            hashTriggeredRef.current = false; // Reset hash trigger flag when switching queries
            debugLogger.log('FORM', {
                event: 'hashTriggeredRef-reset',
                configId,
                reason: 'switching-queries',
                timestamp: Date.now()
            });
            setIsTypingValid(false); // Reset typing validation
        }
        // Check if value has changed for the same configId
        const valueChanged = lastValueSetRef.current !== null &&
            lastValueSetRef.current !== initialInputValue &&
            initialValueSetRef.current === configId;
        // Set the value if:
        // - We haven't set it for this configId yet, OR
        // - The value has changed for the same configId (hash parameter updated)
        const shouldSetValue = datasourceReady &&
            initialInputValue &&
            ((_c = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _c === void 0 ? void 0 : _c.length) > 0 &&
            (initialValueSetRef.current !== configId || valueChanged);
        if (shouldSetValue) {
            // Ensure Query tab is active before setting hash value
            // This ensures SqlExpressionRuntime is visible and can process the value
            if (activeTab !== 'query' && onTabChange) {
                debugLogger.log('FORM', {
                    event: 'hash-value-setting-switching-to-query-tab',
                    configId,
                    initialInputValue,
                    currentTab: activeTab,
                    note: 'Switching to Query tab before setting hash value to ensure SqlExpressionRuntime can process it'
                });
                onTabChange('query');
                // Return early - useEffect will run again when activeTab becomes 'query'
                return;
            }
            debugLogger.log('FORM', {
                event: 'hash-value-setting-start',
                configId,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                valueChanged,
                hashTriggeredRefBefore: hashTriggeredRef.current,
                sqlExprObjPartsLength: (_d = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _d === void 0 ? void 0 : _d.length,
                activeTab,
                timestamp: Date.now()
            });
            // Set hashTriggeredRef IMMEDIATELY when setting hash value
            // This ensures handleSqlExprObjChange can detect hash-triggered conversions
            hashTriggeredRef.current = true;
            debugLogger.log('FORM', {
                event: 'hashTriggeredRef-set-true',
                configId,
                initialInputValue,
                timestamp: Date.now()
            });
            const firstPart = sqlExprObj.parts[0];
            // Check if the first part is a SINGLE clause (not a SqlClauseSet)
            if (firstPart && 'type' in firstPart && firstPart.type === 'SINGLE' && 'valueOptions' in firstPart) {
                // Update the expression object with the initial value
                const updated = sqlExprObj.setIn(['parts', '0', 'valueOptions', 'value'], initialInputValue);
                debugLogger.log('FORM', {
                    event: 'hash-value-setting-react-state',
                    configId,
                    initialInputValue,
                    previousStateValue: (_g = (_f = (_e = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.valueOptions) === null || _g === void 0 ? void 0 : _g.value,
                    newStateValue: (_k = (_j = (_h = updated === null || updated === void 0 ? void 0 : updated.parts) === null || _h === void 0 ? void 0 : _h[0]) === null || _j === void 0 ? void 0 : _j.valueOptions) === null || _k === void 0 ? void 0 : _k.value,
                    willCallSetState: true,
                    note: 'Setting value in React state - SqlExpressionRuntime should receive via expression prop'
                });
                setAttributeFilterSqlExprObj(updated);
                // Update ref immediately for synchronous access in applyQuery
                attributeFilterSqlExprObjRef.current = updated;
                debugLogger.log('FORM', {
                    event: 'hash-value-ref-updated',
                    configId,
                    initialInputValue,
                    refValueAfterUpdate: (_p = (_o = (_m = (_l = attributeFilterSqlExprObjRef.current) === null || _l === void 0 ? void 0 : _l.parts) === null || _m === void 0 ? void 0 : _m[0]) === null || _o === void 0 ? void 0 : _o.valueOptions) === null || _p === void 0 ? void 0 : _p.value,
                    timestamp: Date.now()
                });
                // Update clause number for the updated expression
                showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(updated);
                initialValueSetRef.current = configId;
                lastValueSetRef.current = initialInputValue;
                // Also set the value directly on the input element after a delay to ensure component is rendered
                // This is necessary because SqlExpressionRuntime may not sync from the expression prop alone
                const timeoutId = setTimeout(() => {
                    var _a;
                    // Find the input element within SqlExpressionRuntime
                    // Use data-widgetid (standard ExB attribute) to isolate the correct widget instance
                    const formElement = ((_a = document.querySelector(`[data-widgetid="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.querySelector('.query-form')) ||
                        document.querySelector(`.widget-runtime[data-widgetid="${widgetId}"]`) ||
                        document.querySelector('.query-form');
                    debugLogger.log('FORM', {
                        event: 'hash-value-dom-manipulation-start',
                        configId,
                        initialInputValue,
                        formElementFound: !!formElement,
                        widgetId,
                        selector1: `[data-widgetid="${widgetId}"] .query-form`,
                        selector2: `.widget-runtime[data-widgetid="${widgetId}"]`,
                        selector3: '.query-form',
                        timestamp: Date.now()
                    });
                    if (formElement) {
                        // Look for text input elements
                        const textInputs = formElement.querySelectorAll('input[type="text"]');
                        debugLogger.log('FORM', {
                            event: 'hash-value-dom-manipulation-inputs-found',
                            configId,
                            initialInputValue,
                            inputsFound: textInputs.length,
                            formElementTag: formElement.tagName,
                            formElementClass: formElement.className,
                            timestamp: Date.now()
                        });
                        let inputsUpdated = 0;
                        textInputs.forEach((input, index) => {
                            var _a, _b;
                            // Update the value if input is empty OR if the value has changed (hash parameter updated)
                            const shouldUpdate = !input.value ||
                                input.value.trim() === '' ||
                                input.value !== initialInputValue;
                            debugLogger.log('FORM', {
                                event: 'hash-value-dom-manipulation-input-check',
                                configId,
                                initialInputValue,
                                inputIndex: index,
                                currentInputValue: input.value,
                                inputId: input.id,
                                inputName: input.name,
                                inputParentTag: (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.tagName,
                                shouldUpdate,
                                timestamp: Date.now()
                            });
                            if (shouldUpdate) {
                                // Focus the input first
                                input.focus();
                                // Set the value
                                input.value = initialInputValue;
                                debugLogger.log('FORM', {
                                    event: 'hash-value-dom-manipulation-input-value-set',
                                    configId,
                                    initialInputValue,
                                    inputIndex: index,
                                    valueAfterSet: input.value,
                                    isFocused: document.activeElement === input,
                                    timestamp: Date.now()
                                });
                                // Create and dispatch input event with proper properties
                                const inputEvent = new Event('input', { bubbles: true, cancelable: true });
                                Object.defineProperty(inputEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(inputEvent);
                                // Create and dispatch change event
                                const changeEvent = new Event('change', { bubbles: true, cancelable: true });
                                Object.defineProperty(changeEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(changeEvent);
                                // Also try React's synthetic event approach using native value setter
                                const nativeInputValueSetter = (_b = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value')) === null || _b === void 0 ? void 0 : _b.set;
                                if (nativeInputValueSetter) {
                                    nativeInputValueSetter.call(input, initialInputValue);
                                    const reactEvent = new Event('input', { bubbles: true });
                                    input.dispatchEvent(reactEvent);
                                }
                                debugLogger.log('FORM', {
                                    event: 'hash-value-dom-manipulation-events-dispatched',
                                    configId,
                                    initialInputValue,
                                    inputIndex: index,
                                    inputEventDispatched: true,
                                    changeEventDispatched: true,
                                    reactEventDispatched: !!nativeInputValueSetter,
                                    timestamp: Date.now()
                                });
                                // Blur to trigger any validation or state updates
                                input.blur();
                                inputsUpdated++;
                            }
                        });
                        // Hash-triggered queries: DOM manipulation triggers SqlExpressionRuntime onChange
                        // handleSqlExprObjChange detects conversion and fires QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT
                        // Event listener in query-task.tsx executes query directly - no Apply button click needed
                        debugLogger.log('FORM', {
                            event: 'hash-value-dom-manipulation-complete',
                            configId,
                            initialInputValue,
                            inputsFound: textInputs.length,
                            inputsUpdated,
                            note: 'DOM manipulation complete - SqlExpressionRuntime onChange should fire',
                            timestamp: Date.now()
                        });
                    }
                    else {
                        debugLogger.log('FORM', {
                            event: 'hash-value-dom-manipulation-failed',
                            configId,
                            initialInputValue,
                            reason: 'formElement-not-found',
                            widgetId,
                            timestamp: Date.now()
                        });
                    }
                }, 500); // Longer delay to ensure component is fully rendered
                return () => clearTimeout(timeoutId);
            }
        }
        // The sqlExprObj.parts may change but the displaySQL is the same
        if (!sqlExprObj) {
            showClauseNumber.current = 0;
            setAttributeFilterSqlExprObj(null);
            attributeFilterSqlExprObjRef.current = null;
            debugLogger.log('FORM', {
                event: 'sqlExprObj-cleared',
                configId,
                timestamp: Date.now()
            });
        }
        else {
            showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
            // Check if we already have a value set (from user input or hash)
            const currentValue = (_s = (_r = (_q = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _q === void 0 ? void 0 : _q[0]) === null || _r === void 0 ? void 0 : _r.valueOptions) === null || _s === void 0 ? void 0 : _s.value;
            const baseValue = (_v = (_u = (_t = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _t === void 0 ? void 0 : _t[0]) === null || _u === void 0 ? void 0 : _u.valueOptions) === null || _v === void 0 ? void 0 : _v.value;
            const hasValueSet = currentValue !== undefined && currentValue !== null && currentValue !== '';
            const configIdChanged = previousConfigIdRef.current !== null && previousConfigIdRef.current !== configId;
            // Only update if:
            // 1. We haven't set a value yet (no value in current state), OR
            // 2. configId changed (switching queries - reset to base sqlExprObj)
            // Otherwise, preserve the existing value as a visual record
            if (!hasValueSet || configIdChanged) {
                setAttributeFilterSqlExprObj(sqlExprObj);
                attributeFilterSqlExprObjRef.current = sqlExprObj;
                debugLogger.log('FORM', {
                    event: 'sqlExprObj-updated-ref',
                    configId,
                    previousConfigId: previousConfigIdRef.current,
                    initialInputValue,
                    initialValueSetRef: initialValueSetRef.current,
                    hasValueSet,
                    configIdChanged,
                    previousValue: currentValue,
                    newValue: baseValue,
                    reason: configIdChanged ? 'configId-changed-resetting' : 'no-value-set-initializing',
                    timestamp: Date.now()
                });
            }
            else {
                debugLogger.log('FORM', {
                    event: 'sqlExprObj-skipped-ref-update',
                    configId,
                    previousConfigId: previousConfigIdRef.current,
                    initialInputValue,
                    initialValueSetRef: initialValueSetRef.current,
                    currentValue,
                    baseValue,
                    reason: 'value-already-set-preserving-as-visual-record',
                    note: 'Skipping update to preserve user-entered or hash-set value as visual record',
                    timestamp: Date.now()
                });
            }
            // Update previousConfigIdRef for next comparison
            previousConfigIdRef.current = configId;
        }
    }, [sqlExprObj, initialInputValue, datasourceReady, configId, widgetId, onHashParameterUsed, queryItemShortId, activeTab, onTabChange]);
    // Keep ref in sync with state changes (for SqlExpressionRuntime updates)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        attributeFilterSqlExprObjRef.current = attributeFilterSqlExprObj;
        // Log when state changes - this is what SqlExpressionRuntime receives via expression prop
        debugLogger.log('FORM', {
            event: 'attributeFilterSqlExprObj-state-changed',
            configId,
            stateValue: (_c = (_b = (_a = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value,
            stateValueType: typeof ((_f = (_e = (_d = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.valueOptions) === null || _f === void 0 ? void 0 : _f.value),
            isArray: Array.isArray((_j = (_h = (_g = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _g === void 0 ? void 0 : _g[0]) === null || _h === void 0 ? void 0 : _h.valueOptions) === null || _j === void 0 ? void 0 : _j.value),
            hashTriggeredRef: hashTriggeredRef.current,
            initialInputValue,
            note: 'React state changed - SqlExpressionRuntime should receive this via expression prop'
        });
    }, [attributeFilterSqlExprObj, configId, initialInputValue]);
    const applyQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        // When the 'apply' button is clicked, it should clear the selection from the previous result list
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS);
        if (outputDS) {
            const originDs = outputDS.getOriginDataSources()[0];
            if (originDs) {
                const dataViewConfig = originDs.getDataViewConfig();
                const maximum = dataViewConfig === null || dataViewConfig === void 0 ? void 0 : dataViewConfig.maximum;
                if (maximum != null && maximum > 0) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(outputDS, outputDS.getDataSourceJson().setIn(['query', 'maximum'], maximum));
                }
            }
        }
        // Force zoom for hash-triggered queries, otherwise use runtime preference
        const zoomToUse = hashTriggeredRef.current ? true : runtimeZoomToSelected;
        // Sanitize user input before submission
        // Read from ref to get the latest value synchronously (including hash values)
        const currentSqlExprObj = attributeFilterSqlExprObjRef.current;
        const currentRefValue = (_c = (_b = (_a = currentSqlExprObj === null || currentSqlExprObj === void 0 ? void 0 : currentSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        debugLogger.log('FORM', {
            event: 'applyQuery-executing',
            configId,
            initialInputValue,
            currentRefValue,
            refHasValue: !!currentRefValue,
            hashTriggered: hashTriggeredRef.current,
            timestamp: Date.now()
        });
        const sanitizedSqlExprObj = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.sanitizeSqlExpression)(currentSqlExprObj);
        // Log the sanitized expression to see if value was preserved
        const sanitizedValue = (_f = (_e = (_d = sanitizedSqlExprObj === null || sanitizedSqlExprObj === void 0 ? void 0 : sanitizedSqlExprObj.parts) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.valueOptions) === null || _f === void 0 ? void 0 : _f.value;
        debugLogger.log('FORM', {
            event: 'applyQuery-after-sanitize',
            configId,
            currentRefValue,
            sanitizedValue,
            valuesMatch: currentRefValue === sanitizedValue,
            sanitizedValueType: typeof sanitizedValue,
            currentRefValueType: typeof currentRefValue,
            isArrayCurrent: Array.isArray(currentRefValue),
            isArraySanitized: Array.isArray(sanitizedValue),
            timestamp: Date.now()
        });
        let rel = spatialRelationRef.current;
        if (((_g = spatialFilterObjRef.current) === null || _g === void 0 ? void 0 : _g.geometry) && rel == null) {
            rel = _config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect;
        }
        if (Array.isArray((_h = spatialFilterObjRef.current) === null || _h === void 0 ? void 0 : _h.geometry)) {
            if (spatialFilterObjRef.current.geometry.length === 1) {
                onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry: spatialFilterObjRef.current.geometry[0], relation: rel, buffer: bufferRef.current }), zoomToUse);
            }
            else {
                (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)([
                    'esri/geometry/operators/unionOperator'
                ]).then(modules => {
                    const operator = modules[0];
                    const geometry = operator.executeMany(spatialFilterObjRef.current.geometry);
                    onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry, relation: rel, buffer: bufferRef.current }), zoomToUse);
                });
            }
        }
        else {
            onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { relation: rel, buffer: bufferRef.current }), zoomToUse);
        }
        // Reset hashTriggeredRef after use
        hashTriggeredRef.current = false;
        debugLogger.log('FORM', {
            event: 'hashTriggeredRef-reset-after-apply',
            configId,
            timestamp: Date.now()
        });
    }, [onFormSubmit, outputDS, runtimeZoomToSelected]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((event) => {
        if (event.key === 'Enter' && datasourceReady && isInputValid) {
            event.preventDefault();
            // Find the active input field
            const activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT' && activeElement.type === 'text') {
                // Force blur to trigger SqlExpressionRuntime's input processing
                activeElement.blur();
                // Wait for blur processing, then click the Apply button
                // This uses the exact same code path as clicking the button manually
                setTimeout(() => {
                    if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                        applyButtonRef.current.click();
                    }
                    else {
                        applyQuery();
                    }
                }, 200);
            }
            else {
                // Not in an input field, safe to apply immediately
                if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                    applyButtonRef.current.click();
                }
                else {
                    applyQuery();
                }
            }
        }
    }, [datasourceReady, applyQuery, isInputValid]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d;
        if (!dataActionFilter)
            return;
        if (dataActionFilter.where !== (preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where)) {
            // Log state when dataActionFilter changes (query switch)
            const currentRefValue = (_d = (_c = (_b = (_a = attributeFilterSqlExprObjRef.current) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.valueOptions) === null || _d === void 0 ? void 0 : _d.value;
            const hasPendingHashValue = initialInputValue &&
                (initialValueSetRef.current !== configId ||
                    currentRefValue !== initialInputValue);
            debugLogger.log('FORM', {
                event: 'dataActionFilter-changed-auto-trigger',
                configId,
                previousWhere: preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where,
                newWhere: dataActionFilter.where,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                currentRefValue,
                hasPendingHashValue,
                willCallApplyQuery: !hasPendingHashValue,
                timestamp: Date.now()
            });
            applyQuery();
        }
    }, [dataActionFilter, preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where, applyQuery, initialInputValue, configId]);
    const resetQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        // 1. reset attribute filter
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
        setAttributeFilterSqlExprObj(sqlExprObj);
        // 2. reset spatial filter
        setResetSymbol(Symbol());
    }, [sqlExprObj]);
    const handleSqlExprObjChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlObj) => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        // LOG AT THE VERY START
        const sqlObjValue = (_c = (_b = (_a = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        const previousRefValue = (_g = (_f = (_e = (_d = attributeFilterSqlExprObjRef.current) === null || _d === void 0 ? void 0 : _d.parts) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.valueOptions) === null || _g === void 0 ? void 0 : _g.value;
        const previousStateValue = (_k = (_j = (_h = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _h === void 0 ? void 0 : _h[0]) === null || _j === void 0 ? void 0 : _j.valueOptions) === null || _k === void 0 ? void 0 : _k.value;
        // Check if this is from user typing or prop change
        const isFromUserTyping = typeof previousRefValue === 'string' &&
            typeof sqlObjValue === 'object' &&
            Array.isArray(sqlObjValue) &&
            ((_l = sqlObjValue[0]) === null || _l === void 0 ? void 0 : _l.value) === previousRefValue;
        const isFromPropChange = JSON.stringify(previousStateValue) === JSON.stringify(sqlObjValue);
        debugLogger.log('FORM', {
            event: 'handleSqlExprObjChange-called',
            configId,
            sqlObjExists: !!sqlObj,
            initialInputValue,
            hashTriggeredRef: hashTriggeredRef.current,
            sqlObjValue,
            sqlObjValueType: typeof sqlObjValue,
            sqlObjIsArray: Array.isArray(sqlObjValue),
            previousRefValue,
            previousStateValue,
            isFromUserTyping,
            isFromPropChange,
            triggerSource: isFromUserTyping ? 'user-typing' : (isFromPropChange ? 'prop-change' : 'unknown'),
            timestamp: Date.now()
        });
        const firstPart = (_m = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _m === void 0 ? void 0 : _m[0];
        const value = (firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' ? (_o = firstPart.valueOptions) === null || _o === void 0 ? void 0 : _o.value : 'not-single';
        debugLogger.log('FORM', {
            event: 'sql-expression-changed',
            configId,
            partsCount: ((_p = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _p === void 0 ? void 0 : _p.length) || 0,
            firstPartValue: value,
            hashTriggeredRefValue: hashTriggeredRef.current,
            initialInputValue: initialInputValue,
            isArrayFormat: Array.isArray(value),
            timestamp: Date.now()
        });
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlObj);
        setAttributeFilterSqlExprObj(sqlObj);
        // Check if this is a hash-triggered conversion (string -> array)
        // When hash value changes for same configId, SqlExpressionRuntime converts string to array format
        if ((firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' && ((_q = firstPart === null || firstPart === void 0 ? void 0 : firstPart.valueOptions) === null || _q === void 0 ? void 0 : _q.value)) {
            const value = firstPart.valueOptions.value;
            const isArrayFormat = Array.isArray(value);
            const hasInitialValue = initialInputValue && hashTriggeredRef.current;
            debugLogger.log('FORM', {
                event: 'sql-expression-changed-conversion-check',
                configId,
                isArrayFormat,
                hasInitialValue,
                hashTriggeredRefValue: hashTriggeredRef.current,
                initialInputValue,
                valueType: typeof value,
                value: Array.isArray(value) ? value : value,
                timestamp: Date.now()
            });
            // If value converted to array format AND this was hash-triggered, fire event
            if (isArrayFormat && hasInitialValue && initialInputValue) {
                const matchesHashValue = value.length > 0 && ((_r = value[0]) === null || _r === void 0 ? void 0 : _r.value) === initialInputValue;
                debugLogger.log('FORM', {
                    event: 'sql-expression-changed-matches-check',
                    configId,
                    matchesHashValue,
                    initialInputValue,
                    convertedValueFirstItem: (_s = value[0]) === null || _s === void 0 ? void 0 : _s.value,
                    timestamp: Date.now()
                });
                if (matchesHashValue) {
                    debugLogger.log('FORM', {
                        event: 'hash-value-converted-to-array',
                        configId,
                        initialInputValue,
                        convertedValue: value,
                        timestamp: Date.now()
                    });
                    // Fire custom event for query execution to wait on
                    const event = new CustomEvent(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, {
                        detail: {
                            configId,
                            widgetId,
                            initialInputValue,
                            convertedValue: value
                        },
                        bubbles: true
                    });
                    document.dispatchEvent(event);
                    debugLogger.log('FORM', {
                        event: 'hash-value-converted-event-dispatched',
                        configId,
                        widgetId,
                        timestamp: Date.now()
                    });
                    // EXECUTION POINT: Query execution happens HERE after conversion is confirmed
                    // This is the ONLY place where hash-triggered queries should execute
                    // The event QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT has been dispatched above
                    // This direct call handles the case where conversion happens synchronously
                    // The event listener in query-task.tsx handles the async case
                    if (hashTriggeredRef.current && datasourceReady && outputDS) {
                        debugLogger.log('FORM', {
                            event: 'hash-value-converted-executing-query-directly',
                            configId,
                            initialInputValue,
                            note: 'Conversion complete - executing query directly via applyQuery (event-driven pattern)',
                            timestamp: Date.now()
                        });
                        // Use setTimeout to ensure this happens after the current event loop
                        setTimeout(() => {
                            applyQuery();
                        }, 0);
                    }
                }
            }
        }
    }, [configId, initialInputValue, widgetId, datasourceReady, outputDS, applyQuery]);
    const handleSpatialFilterChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((filter) => {
        spatialFilterObjRef.current = filter;
    }, []);
    const handleRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((rel) => {
        spatialRelationRef.current = rel;
    }, []);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferRef.current = { distance, unit };
    }, []);
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // Debug logging for form rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        debugLogger.log('FORM', {
            event: 'form-render-check',
            configId,
            datasourceReady,
            useAttributeFilter,
            sqlExprObj: sqlExprObj ? 'exists' : 'null',
            sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            showAttributeFilter,
            originDS: originDS ? 'exists' : 'null',
            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'none',
            showSpatialFilter,
            isAutoHeight,
            outputDS: outputDS ? 'exists' : 'null'
        });
    }, [configId, datasourceReady, useAttributeFilter, sqlExprObj, showAttributeFilter, originDS, showSpatialFilter, isAutoHeight, outputDS]);
    // Log when form content should render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (showAttributeFilter && originDS) {
            debugLogger.log('FORM', {
                event: 'attribute-filter-ready',
                configId,
                originDSId: originDS.id,
                sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
                attributeFilterLabel,
                note: 'Input field should be visible'
            });
        }
        else {
            debugLogger.log('FORM', {
                event: 'attribute-filter-not-ready',
                configId,
                showAttributeFilter,
                originDS: originDS ? 'exists' : 'null',
                useAttributeFilter,
                sqlExprObj: sqlExprObj ? 'exists' : 'null',
                reason: !showAttributeFilter ? 'showAttributeFilter is false' : 'originDS is null'
            });
        }
    }, [showAttributeFilter, originDS, configId, sqlExprObj, useAttributeFilter, attributeFilterLabel]);
    // Check DOM visibility after render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (formContentRef.current) {
            const computedStyle = window.getComputedStyle(formContentRef.current);
            const rect = formContentRef.current.getBoundingClientRect();
            debugLogger.log('FORM', {
                event: 'form-content-dom-check',
                configId,
                exists: !!formContentRef.current,
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                height: computedStyle.height,
                maxHeight: computedStyle.maxHeight,
                flex: computedStyle.flex,
                flexBasis: computedStyle.flexBasis,
                rectHeight: rect.height,
                rectWidth: rect.width,
                isVisible: rect.height > 0 && rect.width > 0,
                parentHeight: ((_a = formContentRef.current.parentElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0
            });
        }
    }, [configId, showAttributeFilter, originDS]);
    // Log when SqlExpressionRuntime key changes (component remounts) OR expression prop changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c;
        const sqlExprRuntimeKey = `${configId}-${initialInputValue || 'none'}`;
        const expressionValue = (_c = (_b = (_a = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        debugLogger.log('FORM', {
            event: 'SqlExpressionRuntime-props-changed',
            configId,
            initialInputValue,
            sqlExprRuntimeKey,
            expressionValue,
            expressionValueType: typeof expressionValue,
            isArray: Array.isArray(expressionValue),
            hashTriggeredRef: hashTriggeredRef.current,
            originDSExists: !!originDS,
            note: 'SqlExpressionRuntime receiving new expression prop - will it fire onChange?',
            timestamp: Date.now()
        });
    }, [configId, initialInputValue, attributeFilterSqlExprObj, originDS]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_context__WEBPACK_IMPORTED_MODULE_12__.QueryTaskContext.Provider, { value: { resetSymbol }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form', css: getFormStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: formContentRef, className: 'query-form__content', onKeyDown: handleKeyDown, children: [showAttributeFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding-top: 2px;`, "aria-label": attributeFilterLabel, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title d-flex align-items-center', { 'd-none': !attributeFilterLabel && !attributeFilterDesc }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-top: 0;
                margin-bottom: 4px;
              `, children: [attributeFilterLabel && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: attributeFilterLabel }), attributeFilterDesc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: attributeFilterDesc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), originDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin: -10px 0px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: originDS, expression: attributeFilterSqlExprObj, onChange: handleSqlExprObjChange }, `${configId}-${initialInputValue || 'none'}`) }))] })), showAttributeFilter && showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr", { className: 'm-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `border: none; height: 1px; background-color: var(--sys-color-divider-secondary);` })), showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__.QueryTaskSpatialForm, { widgetId: widgetId, label: spatialFilterLabel, desc: spatialFilterDesc, filterTypes: spatialFilterTypes, mapWidgetIds: spatialMapWidgetIds, createToolTypes: spatialInteractiveCreateToolTypes, onFilterChange: handleSpatialFilterChange, onRelationChange: handleRelationChange, onBufferChange: handleBufferChange, spatialRelations: spatialRelations, dsEnableBuffer: spatialRelationEnableBuffer, dsBufferDistance: spatialRelationBufferDistance, dsBufferUnit: spatialRelationBufferUnit, drawEnableBuffer: spatialInteractiveEnableBuffer, drawBufferDistance: spatialInteractiveBufferDistance, drawBufferUnit: spatialInteractiveBufferUnit, useDataSources: spatialRelationUseDataSources, useRuntimeData: spatialIncludeRuntimeData }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form__actions px-4 d-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: runtimeZoomToSelected, onChange: (_, checked) => setRuntimeZoomToSelected(checked), className: 'mr-2' }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-auto', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `font-size: 0.875rem; color: var(--sys-color-text-primary);`, children: getI18nMessage('zoomToSelected') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: applyButtonRef, color: 'primary', className: 'ml-auto', disabled: !datasourceReady || !isInputValid, onClick: applyQuery, children: getI18nMessage('apply') }), (showClauseNumber.current > 0 || showSpatialFilter) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-2', onClick: resetQuery, children: getI18nMessage('reset') }))] })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskLabel: () => (/* binding */ QueryTaskLabel)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

/** @jsx jsx */


const textStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  font-weight: 500;
  font-size: 0.875rem;
`;
function QueryTaskLabel(props) {
    const { icon, name } = props;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center text-truncate', css: textStyle, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { className: 'query-task-icon mr-2', icon: icon.svg }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', title: name, children: name })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListInline: () => (/* binding */ TaskListInline)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");

/** @jsx jsx */






const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
const SPACE = 8;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  > div {
    margin-right: 8px;
  }
`;
// show task label and an arrow to the task content
function TaskListInline(props) {
    const { queryItems, widgetId, minSize, defaultSize, defaultPageSize, widgetLabel, wrap = false } = props;
    const containerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const containerWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const contentWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef({});
    const [numOfExpanded, setNumOfExpanded] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(queryItems.length);
    const [openedPopper, setOpenedPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(-1);
    const resizeObserverRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const adjustContent = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        let total = 0;
        for (let i = 0; i < numOfExpanded; i++) {
            const item = queryItems[i];
            const itemWidth = contentWidthRef.current[item.configId];
            if (itemWidth > 0) {
                total += itemWidth + SPACE;
                if (total >= containerWidthRef.current && numOfExpanded !== i) {
                    setNumOfExpanded(i);
                    return;
                }
            }
            else {
                return; // content width not ready
            }
        }
        setNumOfExpanded(queryItems.length);
    }, [numOfExpanded, queryItems]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (resizeObserverRef.current) {
            resizeObserverRef.current.disconnect();
        }
        // bind with the new event handler
        resizeObserverRef.current = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
            const width = Math.round(entries[0].contentRect.width);
            if (containerWidthRef.current !== width) {
                containerWidthRef.current = width;
                adjustContent();
            }
        }, 200));
        resizeObserverRef.current.observe(containerRef.current);
        return () => {
            resizeObserverRef.current.disconnect();
        };
    }, [adjustContent]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        var _a;
        containerWidthRef.current = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth;
        adjustContent();
    });
    const handleItemWidthChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, width) => {
        const queryItem = queryItems[index];
        if (contentWidthRef.current[queryItem.configId] !== width) {
            contentWidthRef.current[queryItem.configId] = width;
            adjustContent();
        }
    }, [queryItems, adjustContent]);
    const handlePopperOpenedChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, isOpen) => {
        if (isOpen) {
            setOpenedPopper(index);
        }
        else if (index === openedPopper) {
            // current popper is closed
            setOpenedPopper(-1);
        }
    }, [openedPopper]);
    const [expandedArray, nonExpandedArray] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const expandedArray = [];
        const nonExpandedArray = [];
        for (let i = 0; i < queryItems.length; i++) {
            if (i < numOfExpanded) {
                expandedArray.push(queryItems[i]);
            }
            else {
                nonExpandedArray.push(queryItems[i]);
            }
        }
        return [expandedArray, nonExpandedArray];
    }, [queryItems, numOfExpanded]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: containerRef, css: style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('runtime-query__query-list h-100 d-flex', { 'flex-wrap': wrap, 'align-content-start': wrap }), children: [expandedArray.map((queryItem, index) => {
                var _a;
                const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
                return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: index, icon: currentItem.icon, buttonType: 'default', label: currentItem.displayLabel ? currentItem.name : undefined, popperTitle: currentItem.name, onWidthChange: handleItemWidthChange, minSize: minSize, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== index, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: index, total: 1, isInPopper: true, queryItem: currentItem, wrappedInPopper: true, className: 'pb-4', defaultPageSize: defaultPageSize, initialInputValue: currentItem.shortId === ((_a = props.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) ? props.initialQueryValue.value : undefined, onHashParameterUsed: props.onHashParameterUsed, queryItemShortId: currentItem.shortId }) }, currentItem.configId);
            }), nonExpandedArray.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: expandedArray.length + 1, icon: iconMap.iconMore, minSize: minSize, buttonType: 'default', popperTitle: widgetLabel, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== expandedArray.length + 1, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_3__.QueryTaskList, { widgetId: widgetId, isInPopper: true, defaultPageSize: defaultPageSize, queryItems: nonExpandedArray, className: 'pb-4', initialQueryValue: props.initialQueryValue, onHashParameterUsed: props.onHashParameterUsed }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListPopperWrapper: () => (/* binding */ TaskListPopperWrapper)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */



const shiftOptions = { padding: 1 };
function TaskListPopperWrapper(props) {
    const { id, icon, label, forceClose, onOpenedChange, popperTitle, minSize, defaultSize, onWidthChange, buttonType = 'tertiary', children } = props;
    const iconRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const widthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const [isOpen, setIsOpen] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const [popperVersion, setPopperVersion] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const isMobile = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useCheckSmallBrowserSizeMode();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (forceClose) {
            setIsOpen(false);
        }
    }, [forceClose]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (typeof onWidthChange === 'function') {
            widthRef.current = Math.round(iconRef.current.clientWidth);
            onWidthChange(id, widthRef.current);
            const resizeObserver = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
                const width = Math.round(entries[0].contentRect.width);
                if (widthRef.current !== width) {
                    widthRef.current = width;
                    onWidthChange(id, width);
                }
            }, 200));
            resizeObserver.observe(iconRef.current);
            return () => {
                resizeObserver.disconnect();
            };
        }
    });
    const togglePopper = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        if (typeof onOpenedChange === 'function') {
            onOpenedChange(id, !isOpen);
        }
        setIsOpen(!isOpen);
        setPopperVersion(popperVersion + 1);
        if (isOpen) {
            setTimeout(() => {
                if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.isKeyboardMode)()) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(iconRef.current);
                }
            }, 200);
        }
    }, [id, isOpen, popperVersion, onOpenedChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'runtime-query__widget-popper', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { title: label, "aria-label": label, icon: true, size: 'sm', variant: buttonType === 'tertiary' ? 'text' : undefined, color: buttonType === 'tertiary' ? 'inherit' : undefined, type: buttonType === 'tertiary' ? undefined : buttonType, ref: iconRef, onClick: togglePopper, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, Object.assign({ size: 16 }, (typeof icon === 'string' ? { icon } : { icon: icon.svg, color: buttonType === 'tertiary' ? undefined : icon.properties.color }))), label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
            line-height: 1.2;
          `, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ 'ml-2': icon != null }), children: label })] }), isMobile
                ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.MobilePanel, { open: isOpen, title: popperTitle, onClose: togglePopper, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })
                : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FloatingPanel, { className: 'ui-unit-popper ui-unit-popper_k-arrangement-icon flex-grow-1', headerClassName: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS, open: isOpen, onHeaderClose: togglePopper, toggle: togglePopper, headerTitle: popperTitle, minSize: minSize, defaultSize: defaultSize, dragBounds: 'body', version: popperVersion, reference: iconRef, placement: 'bottom-start', shiftOptions: shiftOptions, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskList: () => (/* binding */ QueryTaskList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */





const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__.createQuerySimpleDebugLogger)();
// Helper function to sort queries by display order (lower numbers appear first)
// Queries without order maintain their original relative positions
function sortQueryItemsByOrder(queryItems) {
    // Handle null/undefined/empty cases
    if (!queryItems || queryItems.length === 0) {
        return queryItems || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
    }
    // Safely convert to regular array for sorting
    // Handle both ImmutableArray (has toArray method) and regular arrays
    const itemsArray = (queryItems && typeof queryItems.toArray === 'function')
        ? queryItems.toArray()
        : (Array.isArray(queryItems) ? queryItems : []);
    const itemsWithIndex = itemsArray.map((item, index) => ({ item, originalIndex: index }));
    itemsWithIndex.sort((a, b) => {
        var _a, _b;
        const orderA = (_a = a.item.order) !== null && _a !== void 0 ? _a : Infinity;
        const orderB = (_b = b.item.order) !== null && _b !== void 0 ? _b : Infinity;
        if (orderA !== orderB) {
            return orderA - orderB;
        }
        // If order is equal (both Infinity or same number), maintain original index order
        return a.originalIndex - b.originalIndex;
    });
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(itemsWithIndex.map(({ item }) => item));
}
// Helper function to group queries by groupId
const groupQueries = (queryItems) => {
    const groups = {};
    const ungrouped = [];
    const groupOrder = [];
    const groupIndexMap = {};
    // First pass: collect items in regular arrays
    const groupItemsMap = {};
    queryItems.forEach((item, index) => {
        if (item.groupId) {
            if (!groupItemsMap[item.groupId]) {
                groupItemsMap[item.groupId] = [];
                groups[item.groupId] = {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]),
                    displayName: item.groupDisplayName || item.name || `Group ${item.groupId}`,
                    icon: item.icon
                };
                groupIndexMap[item.groupId] = index;
                groupOrder.push(item.groupId);
            }
            groupItemsMap[item.groupId].push(item);
        }
        else {
            ungrouped.push({ item, index });
        }
    });
    // Second pass: convert regular arrays to ImmutableArrays
    Object.keys(groupItemsMap).forEach(groupId => {
        groups[groupId].items = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(groupItemsMap[groupId]);
    });
    return { groups, ungrouped, groupOrder };
};
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
function QueryTaskList(props) {
    const { queryItems, widgetId, defaultPageSize, isInPopper = false, className = '', initialQueryValue, shouldUseInitialQueryValueForSelection = false, onHashParameterUsed, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab, onTabChange, eventManager } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // Log when props are received
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-props-received',
            widgetId,
            props: {
                hasInitialQueryValue: !!initialQueryValue,
                initialQueryValueShortId: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId,
                initialQueryValueValue: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value,
                shouldUseInitialQueryValueForSelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'query-task-list-props-received',
            widgetId,
            hasInitialQueryValue: !!initialQueryValue,
            initialQueryValueShortId: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId,
            initialQueryValueValue: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value,
            shouldUseInitialQueryValueForSelection,
            timestamp: Date.now()
        });
    }, [initialQueryValue, shouldUseInitialQueryValueForSelection, widgetId]);
    // Sort queries by display order before grouping
    // Handle case where queryItems might be undefined/null or not an ImmutableArray
    const sortedQueryItems = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (!queryItems) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
        }
        return sortQueryItemsByOrder(queryItems);
    }, [queryItems]);
    const { groups, ungrouped, groupOrder } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => groupQueries(sortedQueryItems), [sortedQueryItems]);
    // Only use the prop initialQueryValue when HelperSimple explicitly opens the widget
    // QuerySimple should not autonomously react to initialQueryValue prop changes
    // HelperSimple is the orchestrator and sets shouldUseInitialQueryValueForSelection flag
    const effectiveInitialQueryValue = shouldUseInitialQueryValueForSelection ? initialQueryValue : undefined;
    // Log when effectiveInitialQueryValue is calculated
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-effectiveinitialqueryvalue-calculated',
            widgetId,
            calculation: {
                shouldUseInitialQueryValueForSelection,
                hasInitialQueryValue: !!initialQueryValue,
                effectiveResult: effectiveInitialQueryValue ? 'USE_INITIAL_QUERY_VALUE' : 'UNDEFINED',
                effectiveShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
                effectiveValue: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'effectiveInitialQueryValue-calculated',
            widgetId,
            shouldUseInitialQueryValueForSelection,
            hasInitialQueryValue: !!initialQueryValue,
            hasEffectiveInitialQueryValue: !!effectiveInitialQueryValue,
            effectiveShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
            effectiveValue: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value,
            timestamp: Date.now()
        });
    }, [effectiveInitialQueryValue, shouldUseInitialQueryValueForSelection, initialQueryValue, widgetId]);
    // Find the query item matching the shortId from URL hash
    const matchingQueryIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const shortId = effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId;
        if (!shortId) {
            return -1;
        }
        return sortedQueryItems.findIndex(item => item.shortId === shortId);
    }, [sortedQueryItems, effectiveInitialQueryValue]);
    // Determine which group/ungrouped index the matching query is at
    const getQuerySelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        if (matchingQueryIndex < 0)
            return null;
        const item = sortedQueryItems[matchingQueryIndex];
        if (item.groupId) {
            const groupItems = ((_a = groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.items) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
            const indexInGroup = groupItems.findIndex(q => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-in-group',
                groupId: item.groupId,
                indexInGroup: indexInGroup >= 0 ? indexInGroup : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'group', groupId: item.groupId, index: indexInGroup >= 0 ? indexInGroup : 0 };
        }
        else {
            // Ungrouped query
            const indexInUngrouped = ungrouped.findIndex(({ item: q }) => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-ungrouped',
                indexInUngrouped: indexInUngrouped >= 0 ? indexInUngrouped : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'ungrouped', index: indexInUngrouped >= 0 ? indexInUngrouped : 0 };
        }
    }, [matchingQueryIndex, sortedQueryItems, groups, ungrouped]);
    // Helper to determine default selection based on display order
    const getDefaultSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        if (getQuerySelection) {
            return getQuerySelection;
        }
        // No hash parameter - determine default based on display order
        // Compare first ungrouped query vs first query in first group
        const firstUngroupedOrder = ungrouped.length > 0 ? ((_a = ungrouped[0].item.order) !== null && _a !== void 0 ? _a : Infinity) : Infinity;
        const firstGroupOrder = groupOrder.length > 0 && ((_c = (_b = groups[groupOrder[0]]) === null || _b === void 0 ? void 0 : _b.items) === null || _c === void 0 ? void 0 : _c.length) > 0
            ? ((_d = groups[groupOrder[0]].items[0].order) !== null && _d !== void 0 ? _d : Infinity)
            : Infinity;
        // Select whichever has lower order (or first if equal)
        if (firstUngroupedOrder < firstGroupOrder) {
            return { type: 'ungrouped', index: 0 };
        }
        else if (firstGroupOrder < Infinity || groupOrder.length > 0) {
            return { type: 'group', groupId: groupOrder[0], index: 0 };
        }
        else if (ungrouped.length > 0) {
            return { type: 'ungrouped', index: 0 };
        }
        return null;
    }, [getQuerySelection, ungrouped, groups, groupOrder]);
    // Track selected query - initialize with matching query if found from URL hash, or default based on display order
    const [selectedGroupId, setSelectedGroupId] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection',
                groupId: getDefaultSelection.groupId,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.groupId;
        }
        return null;
    });
    const [selectedGroupQueryIndex, setSelectedGroupQueryIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-query-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    const [selectedUngroupedIndex, setSelectedUngroupedIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'ungrouped') {
            debugLogger.log('GROUP', {
                event: 'initial-ungrouped-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    // Update selection when HelperSimple explicitly opens widget with hash parameter
    // Only react when shouldUseInitialQueryValueForSelection is true (set by HelperSimple)
    // This prevents autonomous query selection when switching queries
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-selection-useeffect-check',
            widgetId,
            check: {
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                getQuerySelectionType: getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type,
                willUpdateSelection: shouldUseInitialQueryValueForSelection && !!getQuerySelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'query-selection-useeffect-check',
            widgetId,
            shouldUseInitialQueryValueForSelection,
            hasGetQuerySelection: !!getQuerySelection,
            getQuerySelectionType: getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type,
            willUpdateSelection: shouldUseInitialQueryValueForSelection && !!getQuerySelection,
            timestamp: Date.now()
        });
        if (shouldUseInitialQueryValueForSelection && getQuerySelection) {
            // Hash parameter matched - HelperSimple explicitly opened us with this hash
            debugLogger.log('HASH-EXEC', {
                event: 'querytasklist-selection-useeffect-updating',
                widgetId,
                selectionType: getQuerySelection.type,
                selectionDetails: getQuerySelection.type === 'group'
                    ? { groupId: getQuerySelection.groupId, index: getQuerySelection.index }
                    : { index: getQuerySelection.index },
                timestamp: Date.now()
            });
            if (getQuerySelection.type === 'group') {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-group-from-hash',
                    groupId: getQuerySelection.groupId,
                    index: getQuerySelection.index,
                    note: 'HelperSimple explicitly opened widget with hash parameter'
                });
                setSelectedGroupId(getQuerySelection.groupId);
                setSelectedGroupQueryIndex(getQuerySelection.index);
            }
            else {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-ungrouped-from-hash',
                    index: getQuerySelection.index,
                    note: 'HelperSimple explicitly opened widget with hash parameter'
                });
                setSelectedGroupId(null);
                setSelectedUngroupedIndex(getQuerySelection.index);
            }
        }
        else {
            debugLogger.log('HASH-EXEC', {
                event: 'querytasklist-selection-useeffect-skipped',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'flag-is-false' : 'no-query-selection',
                check: {
                    shouldUseInitialQueryValueForSelection,
                    hasGetQuerySelection: !!getQuerySelection
                },
                timestamp: Date.now()
            });
            debugLogger.log('GROUP', {
                event: 'query-selection-useeffect-skipped',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'flag-is-false' : 'no-query-selection',
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                timestamp: Date.now()
            });
        }
    }, [shouldUseInitialQueryValueForSelection, getQuerySelection, widgetId]);
    // Get the currently selected query item
    const getSelectedQueryItem = () => {
        // PRIORITY 1: Use current state selection
        // The state is initialized with the hash match (if present) or default order,
        // and updated via useEffect if the hash changes later.
        debugLogger.log('GROUP', {
            event: 'getSelectedQueryItem-state-selection',
            selectedGroupId,
            hasSelectedGroup: selectedGroupId && groups[selectedGroupId],
            selectedGroupQueryIndex,
            selectedUngroupedIndex,
            ungroupedLength: ungrouped.length,
            groupOrderLength: groupOrder.length,
            note: 'Using state selection (hash-aware)'
        });
        // If a group is selected, get query from that group
        if (selectedGroupId && groups[selectedGroupId]) {
            const groupItems = groups[selectedGroupId].items;
            if (groupItems.length > 0) {
                const idx = selectedGroupQueryIndex < groupItems.length ? selectedGroupQueryIndex : 0;
                const selectedItem = groupItems[idx];
                debugLogger.log('GROUP', {
                    event: 'selected-query-from-group',
                    groupId: selectedGroupId,
                    groupQueryIndex: idx,
                    queryItemConfigId: selectedItem.configId,
                    queryDisplayName: getQueryDisplayName(selectedItem)
                });
                return selectedItem;
            }
        }
        // Otherwise, get from ungrouped queries
        if (ungrouped.length > 0) {
            const idx = selectedUngroupedIndex < ungrouped.length ? selectedUngroupedIndex : 0;
            const selectedItem = ungrouped[idx].item;
            debugLogger.log('GROUP', {
                event: 'selected-query-from-ungrouped',
                ungroupedIndex: idx,
                queryItemConfigId: selectedItem.configId,
                queryDisplayName: getQueryDisplayName(selectedItem)
            });
            return selectedItem;
        }
        // Fallback to first query item
        debugLogger.log('GROUP', {
            event: 'selected-query-fallback',
            note: 'No groups or ungrouped queries, using first item'
        });
        return sortedQueryItems[0];
    };
    const selectedQueryItem = getSelectedQueryItem();
    const selectedQueryRealIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return sortedQueryItems.findIndex(q => q.configId === selectedQueryItem.configId);
    }, [sortedQueryItems, selectedQueryItem]);
    // If only one query total, don't show dropdown
    const showDropdown = sortedQueryItems.length > 1 || groupOrder.length > 0;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `runtime-query__query-list h-100 ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      display: flex;
      flex-direction: column;
      .query-selector {
        padding: 16px;
        border-bottom: 1px solid var(--sys-color-divider-secondary);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .query-selector-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--sys-color-text-primary);
        margin-bottom: 4px;
      }
      .query-selector select {
        width: 100%;
      }
      .query-task-container {
        flex: 1;
        overflow: auto;
      }
    `, children: selectedQueryItem && (() => {
            const willPassInitialInputValue = selectedQueryItem.shortId === (effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId);
            const initialInputValueToPass = willPassInitialInputValue ? effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value : undefined;
            debugLogger.log('GROUP', {
                event: 'initialInputValue-being-passed-to-querytask',
                widgetId,
                selectedQueryItemShortId: selectedQueryItem.shortId,
                selectedQueryItemConfigId: selectedQueryItem.configId,
                effectiveInitialQueryValueShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
                willPassInitialInputValue,
                initialInputValue: initialInputValueToPass,
                timestamp: Date.now()
            });
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `query-task-container ${isInPopper ? jimu_ui__WEBPACK_IMPORTED_MODULE_3__.FOCUSABLE_CONTAINER_CLASS : ''}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: selectedQueryRealIndex >= 0 ? selectedQueryRealIndex : 0, total: sortedQueryItems.length, queryItem: selectedQueryItem, isInPopper: isInPopper, initialInputValue: initialInputValueToPass, onHashParameterUsed: onHashParameterUsed, queryItems: sortedQueryItems, selectedQueryIndex: selectedUngroupedIndex, onQueryChange: (index) => setSelectedUngroupedIndex(index), 
                    // Grouping props
                    groups: groups, ungrouped: ungrouped, 
                    // Graphics layer props
                    useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, onInitializeGraphicsLayer: onInitializeGraphicsLayer, onClearGraphicsLayer: onClearGraphicsLayer, groupOrder: groupOrder, selectedGroupId: selectedGroupId, selectedGroupQueryIndex: selectedGroupQueryIndex, onGroupChange: (groupId) => setSelectedGroupId(groupId), onGroupQueryChange: (index) => setSelectedGroupQueryIndex(index), onUngroupedChange: (index) => setSelectedUngroupedIndex(index), resultsMode: resultsMode, onResultsModeChange: onResultsModeChange, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, activeTab: activeTab, onTabChange: onTabChange, eventManager: eventManager }) }));
        })() }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskSpatialForm: () => (/* binding */ QueryTaskSpatialForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-from-ds */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx");
/* harmony import */ var _geometry_from_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry-from-map */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx");
/* harmony import */ var _geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./geometry-from-draw */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");

/** @jsx jsx */








function QueryTaskSpatialForm(props) {
    var _a;
    const { label, desc, filterTypes, mapWidgetIds, onFilterChange, onRelationChange, onBufferChange, useDataSources, spatialRelations, useRuntimeData, dsEnableBuffer, dsBufferDistance, dsBufferUnit, drawEnableBuffer, drawBufferDistance, drawBufferUnit, createToolTypes, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // used to store the selection of the data source in order to update the filter when option changes
    const selectedGeometriesRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const mapExists = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        if ((mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.length) > 0) {
            const mapWidgetId = mapWidgetIds[0];
            return state.appConfig.widgets[mapWidgetId] != null;
        }
        return false;
    });
    const canUseMapFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return mapExists && ((filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent)) || (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode)));
    }, [filterTypes, mapExists]);
    const supportedFilterTypes = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [];
        if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData) {
            result.push({ value: 'data', label: getI18nMessage('featureFromDs') });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent))) {
            result.push({ value: 'map', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent}`) });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode))) {
            result.push({ value: 'draw', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode}`) });
        }
        return result;
    }, [canUseMapFilter, useDataSources, useRuntimeData, getI18nMessage, filterTypes]);
    const [currentFilterType, setCurrentFilterType] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // in order to avoid invalid option being selected
        if (currentFilterType !== 'none' && !supportedFilterTypes.find((item) => item.value === currentFilterType)) {
            setCurrentFilterType((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
        }
    }, [currentFilterType, supportedFilterTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear the relationship and buffer if filter type is not 'data'
        if (currentFilterType === 'map' || currentFilterType === 'draw' || currentFilterType === 'none') {
            onRelationChange(null);
            onBufferChange(0, _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters);
            onFilterChange({ geometry: null });
        }
        // no need to update the filter if the data source has selection since it will be updated in the handleSelectionChange method
        if (currentFilterType === 'data' && selectedGeometriesRef.current == null) {
            onFilterChange({ geometry: null });
        }
    }, [currentFilterType, onRelationChange, onBufferChange, onFilterChange]);
    const handleFilterTypeChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => { setCurrentFilterType(evt.target.value); }, []);
    const handleGeometryChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometry, layer, graphic, clearAfterApply) => {
        onFilterChange({ geometry, graphic, layer, clearAfterApply });
    }, [onFilterChange]);
    const handleSelectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometries) => {
        selectedGeometriesRef.current = geometries;
        onFilterChange({ geometry: geometries });
    }, [onFilterChange]);
    if (!((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData || canUseMapFilter)) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4 pb-4', "aria-label": label, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !label && !desc }), children: [label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: label }), desc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: desc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), supportedFilterTypes.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3', children: getI18nMessage('chooseFilterType') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterType'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `height: 32px;`, value: currentFilterType, onChange: handleFilterTypeChanged, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'none', children: "-" }, '-'), supportedFilterTypes.map(item => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item.value, children: item.label }, item.value))] })] })), currentFilterType === 'data' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__.GeometryFromDataSource, { enableBuffer: dsEnableBuffer, bufferDistance: dsBufferDistance, bufferUnit: dsBufferUnit, spatialRelations: spatialRelations, useDataSources: useDataSources, useRuntimeData: useRuntimeData, onSelectionChange: handleSelectionChange, onRelationChange: onRelationChange, onBufferChange: onBufferChange })), currentFilterType === 'map' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_map__WEBPACK_IMPORTED_MODULE_6__.GeometryFromMap, { mapWidgetIds: mapWidgetIds, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange })), currentFilterType === 'draw' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__.GeometryFromDraw, { enableBuffer: drawEnableBuffer, bufferDistance: drawBufferDistance, bufferUnit: drawBufferUnit, mapWidgetIds: mapWidgetIds, widgetId: widgetId, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange, onBufferChange: onBufferChange }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTask: () => (/* binding */ QueryTask)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_task_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx");
/* harmony import */ var _query_result__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-result */ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_label__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-label */ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx");
/* harmony import */ var _hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./hooks/use-zoom-to-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var _loading_result__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./loading-result */ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

/** @jsx jsx */


















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.createQuerySimpleDebugLogger)();
// Event fired when SqlExpressionRuntime converts hash value from string to array format
const QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT = 'querysimple-hash-value-converted';
// Event fired when a hash-triggered query execution completes successfully
// This allows HelperSimple to track which hash parameters have been executed
const QUERYSIMPLE_HASH_QUERY_EXECUTED_EVENT = 'querysimple-hash-query-executed';
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  &.wrapped .query-form {
    height: 100%;
  }
  .query-task__content {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-top: 8px;
    &:has(> .query-form__header > div:not(.d-none)), &:has(> .query-result) {
      padding-top: 16px;
    }
  }
  .query-form__header {
    display: flex;
    &.has-content {
      border-bottom: 1px solid var(--sys-color-divider-secondary);
      margin-bottom: 6px;
      padding-bottom: 8px;
    }
    .nav-action {
      flex: 1 1 0;
      overflow: hidden;
      display: flex;
      .jimu-btn {
        min-width: 26px;
      }
    }
    .result-menu {
      display: flex;
    }
  }
`;
function QueryTask(props) {
    var _a, _b, _c, _d, _e;
    const { queryItem, onNavBack, total, isInPopper = false, wrappedInPopper = false, className = '', index, initialInputValue, onHashParameterUsed, queryItems, selectedQueryIndex, onQueryChange, groups, ungrouped, groupOrder, selectedGroupId, selectedGroupQueryIndex, onGroupChange, onGroupQueryChange, onUngroupedChange, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab: propActiveTab, onTabChange: propOnTabChange, eventManager } = props, otherProps = __rest(props, ["queryItem", "onNavBack", "total", "isInPopper", "wrappedInPopper", "className", "index", "initialInputValue", "onHashParameterUsed", "queryItems", "selectedQueryIndex", "onQueryChange", "groups", "ungrouped", "groupOrder", "selectedGroupId", "selectedGroupQueryIndex", "onGroupChange", "onGroupQueryChange", "onUngroupedChange", "resultsMode", "onResultsModeChange", "accumulatedRecords", "onAccumulatedRecordsChange", "useGraphicsLayerForHighlight", "graphicsLayer", "mapView", "onInitializeGraphicsLayer", "onClearGraphicsLayer", "activeTab", "onTabChange", "eventManager"]);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_14__["default"]);
    const zoomToRecords = (0,_hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_10__.useZoomToRecords)(mapView);
    const [stage, setStage] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0); // 0 = form, 1 = results, 2 = loading
    const [internalActiveTab, setInternalActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState('query');
    // Log when initialInputValue prop is received
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytask-initialinputvalue-prop-received',
            widgetId: props.widgetId,
            queryItemConfigId: props.queryItem.configId,
            queryItemShortId: props.queryItemShortId,
            hasInitialInputValue: !!props.initialInputValue,
            initialInputValue: props.initialInputValue,
            timestamp: Date.now()
        });
    }, [props.initialInputValue, props.widgetId, props.queryItem.configId, props.queryItemShortId]);
    // Controlled tab state: use prop if provided, otherwise internal state
    const activeTab = propActiveTab || internalActiveTab;
    const setActiveTab = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab) => {
        if (propOnTabChange) {
            propOnTabChange(tab);
        }
        else {
            setInternalActiveTab(tab);
        }
    }, [propOnTabChange]);
    const [enabled, setEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const [resultCount, setResultCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    // Track if we've already selected records for the current query results
    const hasSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track query execution count to force QueryTaskResult remount on new queries
    const queryExecutionKeyRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const queryParamRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const recordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [outputDS, setOutputDS] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [spatialFilterEnabled, setSpatialFilterEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const attributeFilterSqlExprObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.sqlExprObj);
    const spatialFilterObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const clearResultBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const [dataActionFilter, setDataActionFilter] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.configId);
    // Track manual tab switches to prevent auto-switch useEffect from interfering
    const manualTabSwitchRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track when a query was just executed - only auto-switch after query execution completes
    const queryJustExecutedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Store the last runtime zoom override value from the form for use by Add to Map action
    const lastRuntimeZoomToSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Error states for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [zoomError, setZoomError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Store pending query when waiting for hash value conversion
    const pendingHashQueryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_QUERY_ITEM, queryItem);
    const { icon, name, displayLabel } = currentItem;
    const dsExists = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.useDataSourceExists)({ widgetId: props.widgetId, useDataSourceId: (_a = currentItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId });
    // Debug logging for tab content rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('TASK', {
            event: 'query-tab-content-render',
            activeTab,
            enabled,
            dsExists,
            dataSource: dataSource ? 'exists' : 'null',
            queryItemConfigId: queryItem.configId,
            note: 'Query tab content state check'
        });
    }, [activeTab, enabled, dsExists, dataSource, queryItem.configId]);
    // Debug logging for Tab children rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'query-tab-children-render',
                activeTab,
                queryItemConfigId: queryItem.configId,
                note: 'Query Tab children should be rendering'
            });
        }
    }, [activeTab, queryItem.configId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    // Get the pagination style from widget config (MultiPage or LazyLoad/Single-page)
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    // Get the initial page size for single-page (LazyLoad) results
    // This allows users to configure how many records are loaded initially when using single-page mode
    // Defaults to 100 if not configured
    const lazyLoadInitialPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.lazyLoadInitialPageSize;
    });
    // Watch for when results are ready and switch to Results tab
    // ONLY auto-switch when a query was just executed and results are loaded
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Don't auto-switch if user manually switched tabs
        if (manualTabSwitchRef.current) {
            debugLogger.log('TASK', {
                event: 'auto-switch-skipped',
                reason: 'manual-tab-switch-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                activeTab,
                resultCount,
                queryJustExecutedRef: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
            return;
        }
        // FORCED: Always use SimpleList - we're done with lazy loading issues
        // Records are available immediately, so we can switch as soon as resultCount > 0
        const isSimpleList = true;
        // ONLY auto-switch when:
        // 1. A query was just executed (queryJustExecutedRef.current === true)
        // 2. We have results (resultCount > 0)
        // 3. Records are actually loaded:
        //    - For SimpleList: resultCount > 0 is sufficient (records available immediately)
        //    - For LazyLoad: recordsRef.current must have data (wait for lazy loading)
        // 4. We're currently on the query tab (don't switch if already on results)
        const hasRecords = isSimpleList
            ? resultCount > 0
            : (recordsRef.current && recordsRef.current.length > 0);
        debugLogger.log('TASK', {
            event: 'auto-switch-check',
            widgetId: props.widgetId,
            queryItemConfigId: queryItem.configId,
            activeTab,
            resultCount,
            queryJustExecutedRef: queryJustExecutedRef.current,
            isSimpleList,
            pagingTypeInConfig,
            hasRecords,
            recordsRefLength: ((_a = recordsRef.current) === null || _a === void 0 ? void 0 : _a.length) || 0,
            manualTabSwitchRef: manualTabSwitchRef.current,
            willAutoSwitch: queryJustExecutedRef.current && resultCount > 0 && hasRecords && activeTab === 'query',
            timestamp: Date.now()
        });
        if (queryJustExecutedRef.current &&
            resultCount > 0 &&
            hasRecords &&
            activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'auto-switch-triggered',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                fromTab: activeTab,
                toTab: 'results',
                resultCount,
                timestamp: Date.now()
            });
            setActiveTab('results');
            queryJustExecutedRef.current = false; // Reset after switching
            debugLogger.log('TASK', {
                event: 'auto-switch-completed',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                queryJustExecutedRefReset: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
        }
    }, [resultCount, activeTab, pagingTypeInConfig]);
    // Verify dropdowns are synchronized with hash parameter when present
    // This is especially important for grouped queries where dropdowns need to be synchronized
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only verify if we have a hash parameter
        if (!initialInputValue || !queryItem.shortId) {
            return;
        }
        // Verify the current queryItem matches what we expect from hash parameter
        const expectedShortId = queryItem.shortId;
        const isGroupedQuery = queryItem.groupId !== null && queryItem.groupId !== undefined;
        // Check if dropdowns are correctly set for grouped queries
        if (isGroupedQuery) {
            const expectedGroupId = queryItem.groupId;
            const actualGroupId = selectedGroupId;
            const expectedQueryIndex = selectedGroupQueryIndex;
            if (expectedGroupId !== actualGroupId) {
                debugLogger.log('GROUP', {
                    event: 'dropdown-group-mismatch',
                    expectedGroupId,
                    actualGroupId,
                    queryItemShortId: expectedShortId,
                    warning: 'First dropdown may not be synchronized with hash parameter'
                });
            }
            else if (expectedQueryIndex !== undefined) {
                // Verify the query index within the group matches
                const groupItems = (_a = groups === null || groups === void 0 ? void 0 : groups[expectedGroupId]) === null || _a === void 0 ? void 0 : _a.items;
                if (groupItems && groupItems.length > expectedQueryIndex) {
                    const expectedQueryConfigId = (_b = groupItems[expectedQueryIndex]) === null || _b === void 0 ? void 0 : _b.configId;
                    const actualQueryConfigId = queryItem.configId;
                    if (expectedQueryConfigId !== actualQueryConfigId) {
                        debugLogger.log('GROUP', {
                            event: 'dropdown-query-index-mismatch',
                            expectedQueryConfigId,
                            actualQueryConfigId,
                            expectedQueryIndex,
                            queryItemShortId: expectedShortId,
                            warning: 'Second dropdown may not be synchronized with hash parameter'
                        });
                    }
                    else {
                        debugLogger.log('GROUP', {
                            event: 'dropdowns-synchronized',
                            queryItemShortId: expectedShortId,
                            groupId: expectedGroupId,
                            selectedGroupQueryIndex: expectedQueryIndex,
                            note: 'Dropdowns synchronized with hash parameter'
                        });
                    }
                }
            }
        }
        else {
            // Ungrouped query - verify it's selected
            debugLogger.log('GROUP', {
                event: 'dropdowns-synchronized-ungrouped',
                queryItemShortId: expectedShortId,
                note: 'Ungrouped query dropdown synchronized with hash parameter'
            });
        }
    }, [initialInputValue, queryItem.shortId, queryItem.groupId, queryItem.configId, selectedGroupId, selectedGroupQueryIndex, groups]);
    const useOutputDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
        dataSourceId: queryItem.outputDataSourceId,
        mainDataSourceId: queryItem.outputDataSourceId
    }), [queryItem.outputDataSourceId]);
    const updateDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        var _a, _b;
        const currentDs = ds !== null && ds !== void 0 ? ds : dataSource;
        // should disable spatial filter if the dataSource is an output ds and it already has spatial filter
        if ((_a = currentDs === null || currentDs === void 0 ? void 0 : currentDs.getDataSourceJson()) === null || _a === void 0 ? void 0 : _a.isOutputFromWidget) {
            const qDs = currentDs;
            const qParams = (_b = qDs.getCurrentQueryParams) === null || _b === void 0 ? void 0 : _b.call(qDs);
            if (qParams.geometry != null) {
                setSpatialFilterEnabled(false);
            }
            else {
                setSpatialFilterEnabled(true);
            }
        }
    }, [dataSource]);
    const handleStatusChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((enabled) => {
        setEnabled(enabled);
        updateDataSource();
    }, [updateDataSource]);
    const handleOutputDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info, preInfo) => {
        const outputId = queryItem.outputDataSourceId;
        const filter = (info === null || info === void 0 ? void 0 : info.widgetQueries) ? info.widgetQueries[`setFilter-${outputId}`] : null;
        if (filter == null) { // filter is null means there are incomplete queries, ignore this change
            return;
        }
        const preFilter = (preInfo === null || preInfo === void 0 ? void 0 : preInfo.widgetQueries) ? preInfo.widgetQueries[`setFilter-${outputId}`] : null;
        if ((filter === null || filter === void 0 ? void 0 : filter.where) !== (preFilter === null || preFilter === void 0 ? void 0 : preFilter.where)) {
            setDataActionFilter(filter);
        }
    }, [queryItem.outputDataSourceId]);
    const publishDataClearedMsg = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        if (!outputDS)
            return;
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordSetChangeMessage(props.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_1__.RecordSetChangeType.Remove, [outputDS.id]);
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        yield jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(props.widgetId, [], [outputDS.id]));
    }), [props.widgetId, outputDS]);
    /**
     * Clears all query results from the UI and map.
     * This is the single source of truth for clearing results.
     * It clears the records, resets the result count, clears selection from the map,
     * publishes a cleared message to the map, switches back to the Query tab,
     * and increments the query execution key to force QueryTaskResult to remount with fresh state.
     */
    const clearResult = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (reason = 'unknown') {
        debugLogger.log('TASK', {
            event: 'clearResult-called',
            widgetId: props.widgetId,
            hasOutputDS: !!outputDS,
            reason,
            timestamp: Date.now()
        });
        recordsRef.current = null;
        outputDS === null || outputDS === void 0 ? void 0 : outputDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady);
        setResultCount(0);
        // NOTE: Graphics layer clearing is now handled inside clearSelectionInDataSources
        // called below. We ensure this is awaited to prevent race conditions.
        // Clear selection directly from data source using utility function
        try {
            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.clearSelectionInDataSources)(props.widgetId, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            debugLogger.log('TASK', {
                event: 'clearResult-selection-cleared',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
        }
        catch (error) {
            debugLogger.log('TASK', {
                event: 'clearResult-selection-clear-failed',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                timestamp: Date.now()
            });
        }
        // Clear widget-level accumulated records when clearing results
        if (onAccumulatedRecordsChange) {
            onAccumulatedRecordsChange([]);
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-cleared-on-clear-results',
                widgetId: props.widgetId
            });
        }
        yield publishDataClearedMsg();
        // Switch back to Query tab when clearing results
        setActiveTab('query');
        setStage(0);
        hasSelectedRecordsRef.current = false; // Reset selection flag when clearing
        // Increment query execution key to force QueryTaskResult remount with fresh state
        queryExecutionKeyRef.current += 1;
        // Clear error states when clearing results
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'clearResult-complete',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
    }), [outputDS, publishDataClearedMsg, props.widgetId, queryItem.configId, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer]);
    /**
     * Handles data source creation when switching between query items.
     * When a new query item is selected (e.g., switching from Parcel to Major),
     * this clears old results to ensure all cleanup logic runs properly.
     *
     * @param ds - The newly created data source for the selected query item
     */
    const handleDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-start',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // In "Add to" and "Remove from" modes, preserve accumulated records and selection - don't clear
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'preserving-selection-on-query-switch-handleDataSourceCreated',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length
            });
            setDataSource(ds);
            updateDataSource(ds);
            setStage(0);
            setActiveTab('query');
            return; // Skip clearing - preserve selection
        }
        // For "New" mode, clear old results
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-clearing-results-for-new-mode',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
        yield clearResult('handleDataSourceCreated-new-mode');
        setDataSource(ds);
        updateDataSource(ds);
        setStage(0);
        setActiveTab('query'); // Return to Query tab when switching queries
    }), [updateDataSource, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const handleOutputDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
        setOutputDS(ds);
        // Detect query switch for logging
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        const oldConfigId = previousConfigIdRef.current;
        // VERIFICATION LOGGING: Track graphics layer state when switching queries
        if (isSwitchingQueries && (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)) {
            const graphicsCountBefore = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'handleOutputDataSourceCreated-query-switch-detected',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode,
                hasGraphicsLayer: !!graphicsLayer,
                graphicsCountBefore,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                useGraphicsLayerForHighlight,
                hasOnClearGraphicsLayer: !!onClearGraphicsLayer,
                timestamp: Date.now()
            });
        }
        // CHECK rootDataSource.map to see how framework accesses map view
        try {
            const originDataSources = ds.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (originDS) {
                const rootDS = originDS.getRootDataSource();
                if (rootDS) {
                    // Expose rootDS to window for console inspection
                    ;
                    window.__querySimpleRootDS = rootDS;
                    window.__querySimpleRootDSMap = rootDS.map;
                    window.__querySimpleOriginDS = originDS;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'check-root-datasource-map',
                        widgetId: props.widgetId,
                        outputDSId: ds.id,
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        hasRootDSMap: !!rootDS.map,
                        rootDSMapType: rootDS.map ? typeof rootDS.map : 'none',
                        rootDSMapId: ((_b = rootDS.map) === null || _b === void 0 ? void 0 : _b.id) || 'none',
                        hasRootDSMapView: !!((_c = rootDS.map) === null || _c === void 0 ? void 0 : _c.view),
                        hasRootDSMapViews: !!((_d = rootDS.map) === null || _d === void 0 ? void 0 : _d.views),
                        rootDSMapViewsLength: ((_f = (_e = rootDS.map) === null || _e === void 0 ? void 0 : _e.views) === null || _f === void 0 ? void 0 : _f.length) || 0,
                        // Log some map properties if it exists
                        rootDSMapKeys: rootDS.map ? Object.keys(rootDS.map).filter(key => !key.startsWith('_') &&
                            typeof rootDS.map[key] !== 'function').slice(0, 20) : [],
                        // Log that objects are available on window for console inspection
                        consoleInspection: 'Check window.__querySimpleRootDS, window.__querySimpleRootDSMap, window.__querySimpleOriginDS',
                        timestamp: Date.now()
                    });
                    // If map exists, check its view
                    const rootMap = rootDS.map;
                    if (rootMap) {
                        const view = rootMap.view ||
                            ((_h = (_g = rootMap.views) === null || _g === void 0 ? void 0 : _g.getItemAt) === null || _h === void 0 ? void 0 : _h.call(_g, 0)) ||
                            (((_j = rootMap.views) === null || _j === void 0 ? void 0 : _j.length) > 0 ? rootMap.views[0] : null);
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'check-root-datasource-map-view',
                            widgetId: props.widgetId,
                            hasView: !!view,
                            viewType: (view === null || view === void 0 ? void 0 : view.type) || 'none',
                            viewId: (view === null || view === void 0 ? void 0 : view.id) || 'none',
                            timestamp: Date.now()
                        });
                    }
                }
            }
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'check-root-datasource-map-error',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
        }
        // Initialize graphics layer lazily if enabled and not already initialized
        if (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) {
            yield onInitializeGraphicsLayer(ds);
            // After initialization, graphicsLayer and mapView props should be updated
            // But since props come from refs, we need to wait for widget re-render
            // For now, use the props that will be updated on next render
        }
        // If in "Add to" or "Remove from" mode and we have accumulated records, re-select them
        // This uses the same logic as after query completion - selectRecordsAndPublish
        // This ensures records are selected both on the map and in the Results tab
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            // VERIFICATION LOGGING: Graphics count before clearing
            const graphicsCountBeforeClear = ((_k = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _k === void 0 ? void 0 : _k.length) || 0;
            // FIX (r018.67): Clear graphics layer when switching queries to prevent stale graphics
            // from previous queries from persisting in the shared graphics layer
            if (useGraphicsLayerForHighlight && graphicsLayer && onClearGraphicsLayer) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'clearing-graphics-layer-before-reselection-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    graphicsCountBeforeClear,
                    timestamp: Date.now()
                });
                onClearGraphicsLayer();
                // VERIFICATION LOGGING: Graphics count after clearing
                const graphicsCountAfterClear = ((_l = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _l === void 0 ? void 0 : _l.length) || 0;
                debugLogger.log('RESULTS-MODE', {
                    event: 'graphics-layer-cleared-on-query-switch',
                    widgetId: props.widgetId,
                    graphicsCountBeforeClear,
                    graphicsCountAfterClear,
                    cleared: graphicsCountAfterClear === 0,
                    timestamp: Date.now()
                });
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'skipping-graphics-layer-clear-on-query-switch',
                    widgetId: props.widgetId,
                    reason: !useGraphicsLayerForHighlight ? 'useGraphicsLayerForHighlight-false' :
                        !graphicsLayer ? 'no-graphicsLayer' :
                            !onClearGraphicsLayer ? 'no-onClearGraphicsLayer' : 'unknown',
                    graphicsCountBeforeClear,
                    timestamp: Date.now()
                });
            }
            // Use a delay to ensure the DS is fully ready and graphics layer props are updated after widget re-render
            // If graphics layer was just initialized, wait a bit longer for props to update
            const delay = (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) ? 200 : 100;
            setTimeout(() => {
                var _a;
                const featureDS = ds;
                if (featureDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    // FIX (r018.67): Use outputDS.getSelectedRecords() as source of truth to sync accumulatedRecords
                    // This ensures removed records are not re-selected and are removed from accumulatedRecords
                    // We don't store removed records anywhere - they're permanently removed
                    const actuallySelectedRecords = featureDS.getSelectedRecords() || [];
                    // VERIFICATION LOGGING: Compare accumulatedRecords vs actually selected records
                    debugLogger.log('RESULTS-MODE', {
                        event: 'sync-check-before-reselection',
                        widgetId: props.widgetId,
                        accumulatedRecordsCount: accumulatedRecords.length,
                        actuallySelectedRecordsCount: actuallySelectedRecords.length,
                        accumulatedRecordIds: accumulatedRecords.map(r => r.getId()).slice(0, 10),
                        actuallySelectedIds: actuallySelectedRecords.map(r => r.getId()).slice(0, 10),
                        recordsOutOfSync: accumulatedRecords.length !== actuallySelectedRecords.length,
                        timestamp: Date.now()
                    });
                    // SYNC: If accumulatedRecords doesn't match what's actually selected, sync it
                    // This happens when records were manually removed but accumulatedRecords wasn't updated
                    let recordsToReselect = accumulatedRecords;
                    if (actuallySelectedRecords.length > 0 &&
                        actuallySelectedRecords.length !== accumulatedRecords.length) {
                        // Build a Set of actually selected IDs for fast lookup
                        const actuallySelectedIds = new Set(actuallySelectedRecords.map(r => r.getId()));
                        // Filter accumulatedRecords to only include records that are actually selected
                        recordsToReselect = accumulatedRecords.filter(record => actuallySelectedIds.has(record.getId()));
                        // Update accumulatedRecords to match reality (sync)
                        if (onAccumulatedRecordsChange) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'syncing-accumulated-records-to-actually-selected',
                                widgetId: props.widgetId,
                                accumulatedRecordsCountBefore: accumulatedRecords.length,
                                accumulatedRecordsCountAfter: recordsToReselect.length,
                                recordsRemoved: accumulatedRecords.length - recordsToReselect.length,
                                note: 'removed-records-permanently-deleted-from-accumulatedRecords',
                                timestamp: Date.now()
                            });
                            onAccumulatedRecordsChange(recordsToReselect);
                        }
                    }
                    else if (actuallySelectedRecords.length === 0 && accumulatedRecords.length > 0) {
                        // All records were removed - sync accumulatedRecords to empty
                        if (onAccumulatedRecordsChange) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'syncing-accumulated-records-to-empty',
                                widgetId: props.widgetId,
                                accumulatedRecordsCountBefore: accumulatedRecords.length,
                                note: 'all-records-removed-syncing-to-empty',
                                timestamp: Date.now()
                            });
                            onAccumulatedRecordsChange([]);
                            recordsToReselect = [];
                        }
                    }
                    // Only re-select if we have records to re-select
                    if (recordsToReselect.length > 0) {
                        const recordIds = recordsToReselect.map(record => record.getId());
                        // DIAGNOSTIC LOGGING: What we're about to re-select
                        debugLogger.log('RESULTS-MODE', {
                            event: 'query-switch-before-reselection',
                            widgetId: props.widgetId,
                            recordsToReselectCount: recordsToReselect.length,
                            recordsToReselectIds: recordIds,
                            outputDSId: featureDS.id,
                            graphicsLayerCountBefore: ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0,
                            timestamp: Date.now()
                        });
                        (() => __awaiter(this, void 0, void 0, function* () {
                            var _a;
                            try {
                                yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.selectRecordsAndPublish)(props.widgetId, featureDS, recordIds, recordsToReselect, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                                // Update recordsRef so results tab shows accumulated records
                                recordsRef.current = recordsToReselect;
                                setResultCount(recordsToReselect.length);
                                // VERIFICATION LOGGING: Graphics count after re-selection
                                const graphicsCountAfterReselection = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0;
                                debugLogger.log('RESULTS-MODE', {
                                    event: 're-selected-accumulated-records-after-query-switch',
                                    widgetId: props.widgetId,
                                    outputDSId: featureDS.id,
                                    recordsCount: recordsToReselect.length,
                                    graphicsCountAfterReselection,
                                    expectedGraphicsCount: recordsToReselect.length,
                                    graphicsMatch: graphicsCountAfterReselection === recordsToReselect.length,
                                    timestamp: Date.now()
                                });
                                // Verify what's actually selected in the DS after a delay
                                setTimeout(() => {
                                    var _a, _b, _c;
                                    const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(featureDS.id);
                                    const selectedInDS = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
                                    const selectedIdsInDS = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
                                    const finalGraphicsCount = ((_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.length) || 0;
                                    const finalGraphicsIds = ((_c = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _c === void 0 ? void 0 : _c.map(g => { var _a, _b, _c; return ((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.OBJECTID) || ((_b = g.attributes) === null || _b === void 0 ? void 0 : _b.id) || ((_c = g.attributes) === null || _c === void 0 ? void 0 : _c.FID); })) || [];
                                    debugLogger.log('RESULTS-MODE', {
                                        event: 'query-switch-after-reselection-full-state',
                                        widgetId: props.widgetId,
                                        outputDSId: featureDS.id,
                                        expectedCount: recordsToReselect.length,
                                        expectedIds: recordIds,
                                        actualSelectedInDS: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) || 0,
                                        actualSelectedIdsInDS: selectedIdsInDS,
                                        finalGraphicsCount,
                                        finalGraphicsIds,
                                        allSourcesMatch: selectedIdsInDS.length === recordsToReselect.length &&
                                            finalGraphicsCount === recordsToReselect.length &&
                                            JSON.stringify(selectedIdsInDS.sort()) === JSON.stringify(recordIds.sort()),
                                        timestamp: Date.now()
                                    });
                                }, 200);
                            }
                            catch (error) {
                                debugLogger.log('RESULTS-MODE', {
                                    event: 're-selection-failed-after-switch',
                                    widgetId: props.widgetId,
                                    error: error instanceof Error ? error.message : 'Unknown error',
                                    errorStack: error instanceof Error ? error.stack : undefined
                                });
                            }
                        }))();
                    }
                    else {
                        // No records to re-select - all were removed
                        recordsRef.current = [];
                        setResultCount(0);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'no-records-to-reselect-all-removed',
                            widgetId: props.widgetId,
                            outputDSId: featureDS.id,
                            accumulatedRecordsCountBefore: accumulatedRecords.length,
                            note: 'all-records-were-removed-no-reselection-needed',
                            timestamp: Date.now()
                        });
                    }
                }
            }, 100);
        }
    }), [resultsMode, accumulatedRecords, props.widgetId, useGraphicsLayerForHighlight, onInitializeGraphicsLayer, graphicsLayer, onClearGraphicsLayer, mapView, queryItem.configId, onAccumulatedRecordsChange]);
    // Clear results when query item changes (e.g., when new hash parameter triggers different query)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only clear if we're actually switching to a different query (not just re-rendering)
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        // Only clear results when switching queries if we're in "New" mode
        // In "Add to" and "Remove from" modes, we want to preserve accumulated records across query switches
        if (isSwitchingQueries && resultCount > 0 && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            // Store the old configId before updating
            const oldConfigId = previousConfigIdRef.current;
            // Update the ref to track the new query
            previousConfigIdRef.current = queryItem.configId;
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-results-on-query-switch-new-mode',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode
            });
            // Clear immediately when switching queries, but wrap in try-catch to handle
            // race conditions with feature info windows that might be rendering
            try {
                clearResult('query-item-switch-new-mode');
            }
            catch (error) {
                // Log for debugging but don't show to user (framework race condition)
                // The error is in framework code (feature-info.tsx), not our code
                // This can happen if feature-info.tsx is trying to appendChild to a DOM element
                // that gets removed when we clear selection
                debugLogger.log('TASK', {
                    event: 'clear-result-race-condition',
                    error: error instanceof Error ? error.message : String(error),
                    note: 'Likely race condition with feature-info.tsx'
                });
                if (true) {
                    console.warn('Error clearing results (likely race condition with feature info):', error);
                }
                // Don't set error state - this is expected in some scenarios
            }
        }
        else if (isSwitchingQueries) {
            // Store the old configId BEFORE updating the ref
            const oldConfigId = previousConfigIdRef.current;
            // DIAGNOSTIC LOGGING: Full state BEFORE sync
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                if (outputDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    const actuallySelectedRecordsBeforeSync = outputDS.getSelectedRecords() || [];
                    const accumulatedIds = accumulatedRecords.map(r => r.getId());
                    const actuallySelectedIdsBeforeSync = actuallySelectedRecordsBeforeSync.map(r => r.getId());
                    const graphicsLayerIds = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.map(g => { var _a, _b, _c; return ((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.OBJECTID) || ((_b = g.attributes) === null || _b === void 0 ? void 0 : _b.id) || ((_c = g.attributes) === null || _c === void 0 ? void 0 : _c.FID); })) || [];
                    debugLogger.log('RESULTS-MODE', {
                        event: 'query-switch-before-sync-full-state',
                        widgetId: props.widgetId,
                        oldConfigId,
                        newConfigId: queryItem.configId,
                        accumulatedRecordsCount: accumulatedRecords.length,
                        accumulatedIds: accumulatedIds,
                        outputDSSelectedCount: actuallySelectedRecordsBeforeSync.length,
                        outputDSSelectedIds: actuallySelectedIdsBeforeSync,
                        graphicsLayerCount: ((_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.length) || 0,
                        graphicsLayerIds: graphicsLayerIds,
                        recordsOutOfSync: accumulatedIds.length !== actuallySelectedIdsBeforeSync.length,
                        idsMatch: JSON.stringify(accumulatedIds.sort()) === JSON.stringify(actuallySelectedIdsBeforeSync.sort()),
                        timestamp: Date.now()
                    });
                }
            }
            // FIX (r018.70): Only sync accumulatedRecords when there are actually selected records that are a subset
            // This prevents clearing accumulatedRecords when switching to empty data sources during query switches
            // Only sync if records were manually removed (actuallySelected < accumulated), not during empty DS switches
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                if (outputDS && accumulatedRecords && accumulatedRecords.length > 0 && onAccumulatedRecordsChange) {
                    const actuallySelectedRecords = outputDS.getSelectedRecords() || [];
                    if (actuallySelectedRecords.length > 0 && actuallySelectedRecords.length < accumulatedRecords.length) {
                        // Build a Set of actually selected IDs for fast lookup
                        const actuallySelectedIdsSet = new Set(actuallySelectedRecords.map(r => r.getId()));
                        // Filter accumulatedRecords to only include records that are actually selected
                        const syncedRecords = accumulatedRecords.filter(record => actuallySelectedIdsSet.has(record.getId()));
                        const accumulatedIds = accumulatedRecords.map(r => r.getId());
                        const actuallySelectedIds = actuallySelectedRecords.map(r => r.getId());
                        const syncedIds = syncedRecords.map(r => r.getId());
                        const removedIds = accumulatedIds.filter(id => !syncedIds.includes(id));
                        debugLogger.log('RESULTS-MODE', {
                            event: 'syncing-accumulated-records-before-query-switch',
                            widgetId: props.widgetId,
                            oldConfigId,
                            newConfigId: queryItem.configId,
                            accumulatedRecordsCountBefore: accumulatedRecords.length,
                            accumulatedIdsBefore: accumulatedIds,
                            actuallySelectedCount: actuallySelectedRecords.length,
                            actuallySelectedIds: actuallySelectedIds,
                            syncedRecordsCount: syncedRecords.length,
                            syncedIds: syncedIds,
                            recordsRemoved: accumulatedRecords.length - syncedRecords.length,
                            removedIds: removedIds,
                            note: 'immediate-sync-before-query-switch',
                            timestamp: Date.now()
                        });
                        // Update accumulatedRecords to match reality (immediate sync, not lazy)
                        onAccumulatedRecordsChange(syncedRecords);
                        // DIAGNOSTIC LOGGING: Full state AFTER sync
                        debugLogger.log('RESULTS-MODE', {
                            event: 'query-switch-after-sync-full-state',
                            widgetId: props.widgetId,
                            oldConfigId,
                            newConfigId: queryItem.configId,
                            accumulatedRecordsCountAfter: syncedRecords.length,
                            accumulatedIdsAfter: syncedIds,
                            outputDSSelectedCount: actuallySelectedRecords.length,
                            outputDSSelectedIds: actuallySelectedIds,
                            timestamp: Date.now()
                        });
                    }
                    else {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'accumulated-records-already-in-sync-before-query-switch',
                            widgetId: props.widgetId,
                            oldConfigId,
                            newConfigId: queryItem.configId,
                            accumulatedRecordsCount: accumulatedRecords.length,
                            timestamp: Date.now()
                        });
                    }
                }
                debugLogger.log('RESULTS-MODE', {
                    event: 'preserving-accumulated-records-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    oldConfigId,
                    newConfigId: queryItem.configId,
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
                });
            }
            // Update the ref AFTER syncing
            previousConfigIdRef.current = queryItem.configId;
        }
    }, [queryItem.configId, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId, outputDS, onAccumulatedRecordsChange]);
    const navToForm = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
        if (clearResults) {
            // Use the centralized clearResult method instead of duplicating logic
            yield clearResult('navToForm-clearResults');
            return;
        }
        // Switch to query tab but don't clear results unless explicitly requested
        // Mark as manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab('query');
        // Reset the flag after a short delay
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Only change stage if we're clearing results
        // Otherwise, keep stage at 1 (results available) so results persist
        if (!clearResults && resultCount > 0) {
            setStage(1); // Keep results available
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
        });
    }), [clearResult, resultCount]);
    /**
     * Handles tab switching between Query and Results tabs.
     * Tab switching preserves results state - results remain visible and selected
     * when switching between tabs. Results are only cleared when explicitly
     * clicking the trash can button or when starting a new query.
     *
     * @param tab - The tab to switch to ('query' | 'results')
     * @param event - Optional mouse event to prevent default behavior
     */
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab, event) => {
        debugLogger.log('TASK', {
            event: 'tab-change',
            tab,
            currentTab: activeTab,
            resultCount,
            eventType: event === null || event === void 0 ? void 0 : event.type
        });
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        // Don't allow switching to results if there are no results
        if (tab === 'results' && resultCount === 0) {
            debugLogger.log('TASK', {
                event: 'tab-change-blocked',
                reason: 'no-results',
                tab,
                resultCount
            });
            return;
        }
        // Mark this as a manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab(tab);
        // Reset the flag after a short delay to allow the state update to complete
        // This prevents the auto-switch useEffect from immediately switching back
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Don't change stage here - just switch the view
        // Stage should remain at 1 (results available) when switching between tabs
    }, [resultCount, activeTab]);
    /**
     * Internal implementation of handleFormSubmit (without waiting logic)
     * This is called either directly or after hash value conversion
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmitInternal = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e;
        // Clear previous errors when starting a new query
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'handleFormSubmitInternal-executing',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // Store the runtime zoom override for use by Add to Map action
        lastRuntimeZoomToSelectedRef.current = runtimeZoomToSelected;
        attributeFilterSqlExprObj.current = sqlExpr;
        spatialFilterObj.current = spatialFilter;
        // Load the first page
        const featureDS = outputDS;
        // For "Add to" and "Remove from" modes, use widget-level accumulated records
        // These persist across query switches, unlike query-item-level records
        let existingRecordsForMerge = [];
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
            // Robust capture strategy:
            // 1. Try records from props (already merged by parent)
            // 2. Fallback to currently selected records in DS (captured during mode switch)
            const fromProp = accumulatedRecords || [];
            const fromDS = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
            existingRecordsForMerge = fromProp.length > 0 ? fromProp : fromDS;
            debugLogger.log('RESULTS-MODE', {
                event: 'captured-existing-records-diagnostic',
                widgetId: props.widgetId,
                resultsMode,
                fromPropCount: fromProp.length,
                fromDSCount: fromDS.length,
                finalCapturedCount: existingRecordsForMerge.length,
                firstRecordId: ((_b = (_a = existingRecordsForMerge[0]) === null || _a === void 0 ? void 0 : _a.getId) === null || _b === void 0 ? void 0 : _b.call(_a)) || 'none',
                allRecordIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                outputDSId: outputDS.id,
                timestamp: Date.now()
            });
        }
        // For "New" mode, clear old results and graphics layer
        // We call clearResult() directly and AWAIT it to ensure it's finished before query execution starts
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-clearing-results-for-new-mode',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
            yield clearResult('handleFormSubmit-new-mode');
        }
        // Set loading stage
        setStage(2);
        // FORCED: Always use SimpleList - fetch ALL records, not just a page
        // Use data source's max record count, or fall back to a large number (10000)
        const maxRecordCount = (_e = (_d = (_c = featureDS).getMaxRecordCount) === null || _d === void 0 ? void 0 : _d.call(_c)) !== null && _e !== void 0 ? _e : 10000;
        let pageSize = maxRecordCount;
        const queryParams = (0,_query_utils__WEBPACK_IMPORTED_MODULE_12__.generateQueryParams)(featureDS, sqlExpr, spatialFilter, currentItem, 1, pageSize);
        queryParamRef.current = queryParams;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-query',
            widgetId: props.widgetId,
            where: queryParams.where,
            resultsMode,
            timestamp: Date.now()
        });
        // Change output ds status to unloaded before use it to load count/records.
        featureDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        featureDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        let queryResultCount = 0; // Capture count from records to use in finally block
        const startTime = performance.now();
        debugLogger.log('TASK', {
            event: 'perf-query-chain-start',
            widgetId: props.widgetId,
            resultsMode,
            where: queryParams.where,
            timestamp: Date.now()
        });
        // PERFORMANCE OPTIMIZATION: Removed redundant executeCountQuery() round-trip.
        // Since we fetch ALL records (pageSize = maxRecordCount), we can just use records.length.
        featureDS.updateQueryParams(queryParamRef.current, props.widgetId);
        const fetchStartTime = performance.now();
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(props.widgetId, queryItem, featureDS, queryParamRef.current)
            .then((result) => __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c;
            const fetchDurationMs = Math.round(performance.now() - fetchStartTime);
            const processingStartTime = performance.now();
            queryResultCount = ((_a = result.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'query-execution-complete',
                widgetId: props.widgetId,
                resultsMode,
                recordsReturned: queryResultCount,
                fetchDurationMs,
                existingCapturedCount: existingRecordsForMerge.length,
                timestamp: Date.now()
            });
            let recordsToDisplay = result.records || [];
            let dsToUse = outputDS;
            // Handle "Add to" mode: merge new results with widget-level accumulated records
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection && result.records && result.records.length > 0) {
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-starting-merge-diagnostic',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        existingIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        newCount: result.records.length,
                        newIds: result.records.map((r) => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        timestamp: Date.now()
                    });
                    // Merge new query results with widget-level accumulated records
                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, // Use outputDS for key generation
                    result.records, existingRecordsForMerge // Use consistently captured records
                    );
                    recordsToDisplay = mergedRecords;
                    // DIAGNOSTIC LOGGING: Records being added to accumulatedRecords
                    const existingIds = existingRecordsForMerge.map(r => r.getId());
                    const newRecordIds = result.records.map(r => r.getId());
                    const mergedIds = mergedRecords.map(r => r.getId());
                    const addedIds = mergedIds.filter(id => !existingIds.includes(id));
                    const duplicateIds = newRecordIds.filter(id => existingIds.includes(id));
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-merge-complete-diagnostic',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        existingIds: existingIds,
                        newRecordsCount: result.records.length,
                        newRecordIds: newRecordIds,
                        mergedRecordsCount: mergedRecords.length,
                        mergedIds: mergedIds,
                        addedIds: addedIds,
                        duplicateIds: duplicateIds,
                        duplicatesFiltered: duplicateIds.length,
                        timestamp: Date.now()
                    });
                    // Update widget-level accumulated records so they persist across query switches
                    if (onAccumulatedRecordsChange) {
                        onAccumulatedRecordsChange(mergedRecords);
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to normal behavior on error
                    recordsToDisplay = result.records;
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                // Handle "Remove from" mode: remove matching records from widget-level accumulated records
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-starting-merge',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        removeCount: ((_b = result.records) === null || _b === void 0 ? void 0 : _b.length) || 0
                    });
                    // Check if we have accumulated records to remove from
                    if (existingRecordsForMerge.length === 0) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-accumulated-records',
                            widgetId: props.widgetId,
                            queryRecordsCount: ((_c = result.records) === null || _c === void 0 ? void 0 : _c.length) || 0,
                            note: 'No accumulated records to remove from - no-op'
                        });
                        // No accumulated records, so nothing to remove - show empty results
                        recordsToDisplay = [];
                    }
                    else if (result.records && result.records.length > 0) {
                        // Remove matching records from accumulated records
                        const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.removeResultsFromAccumulated)(outputDS, // Use outputDS for key generation
                        result.records, existingRecordsForMerge // Use consistently captured records
                        );
                        recordsToDisplay = remainingRecords;
                        // Update widget-level accumulated records
                        if (onAccumulatedRecordsChange) {
                            onAccumulatedRecordsChange(remainingRecords);
                        }
                        // Remove records from origin data source selections (map highlighting)
                        // Also removes graphics from graphics layer if using graphics layer highlighting
                        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.removeRecordsFromOriginSelections)(props.widgetId, result.records, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-complete',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            queryRecordsCount: result.records.length,
                            remainingRecordsCount: remainingRecords.length,
                            recordsRemoved: existingRecordsForMerge.length - remainingRecords.length,
                            outputDSId: outputDS.id,
                            widgetLevelRecordsUpdated: true,
                            originSelectionsUpdated: true
                        });
                        // If all records removed, auto-clear (consistent with user expectation)
                        if (remainingRecords.length === 0) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-all-records-removed',
                                widgetId: props.widgetId,
                                note: 'All accumulated records removed - auto-clearing'
                            });
                            // Clear widget-level accumulated records
                            if (onAccumulatedRecordsChange) {
                                onAccumulatedRecordsChange([]);
                            }
                        }
                    }
                    else {
                        // Query returned no results - nothing to remove
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-query-results',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            note: 'Query returned no results - no records to remove'
                        });
                        // Keep existing accumulated records displayed
                        recordsToDisplay = existingRecordsForMerge;
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to showing query results on error
                    recordsToDisplay = result.records || [];
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                // For "New" mode, clear widget-level accumulated records
                if (onAccumulatedRecordsChange) {
                    onAccumulatedRecordsChange([]);
                }
            }
            recordsRef.current = recordsToDisplay;
            // Reset selection flag for new query results
            hasSelectedRecordsRef.current = false;
            // Select records in the output DS
            // For "Add to" mode, select merged records
            // For "Remove from" mode, select remaining records (already updated via removeRecordsFromOriginSelections)
            // For "New" mode, select query results
            if (recordsToDisplay && recordsToDisplay.length > 0 && dsToUse) {
                const recordIdsToSelect = recordsToDisplay.map(record => record.getId());
                // For "Remove from" mode, selection was already updated via removeRecordsFromOriginSelections
                // But we still need to select in the outputDS for widget state consistency
                if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                    // Selection was already updated in origin DSs via removeRecordsFromOriginSelections
                    // Just update outputDS selection for widget state consistency
                    try {
                        if (typeof dsToUse.selectRecordsByIds === 'function') {
                            dsToUse.selectRecordsByIds(recordIdsToSelect, recordsToDisplay);
                        }
                        hasSelectedRecordsRef.current = true;
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-updated',
                            widgetId: props.widgetId,
                            recordCount: recordsToDisplay.length
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }
                else {
                    // For "Add to" and "New" modes, select records normally
                    setSelectionError(null) // Clear previous errors
                    ;
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.selectRecordsAndPublish)(props.widgetId, dsToUse, recordIdsToSelect, recordsToDisplay, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            hasSelectedRecordsRef.current = true; // Mark as selected
                            // Dispatch custom selection event so Widget state is updated immediately
                            // This is crucial for hash-based execution where QueryTask handles selection
                            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.dispatchSelectionEvent)(props.widgetId, recordIdsToSelect, dsToUse, queryItem.configId, eventManager);
                        }
                        catch (error) {
                            const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                            setSelectionError(errorMessage);
                            debugLogger.log('TASK', {
                                event: 'selection-failed',
                                error: errorMessage,
                                errorStack: error instanceof Error ? error.stack : undefined,
                                recordCount: recordIdsToSelect.length
                            });
                        }
                    }))();
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection && recordsToDisplay.length === 0) {
                // All records removed - clear selection
                ;
                (() => __awaiter(this, void 0, void 0, function* () {
                    try {
                        yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.clearSelectionInDataSources)(props.widgetId, dsToUse, useGraphicsLayerForHighlight, graphicsLayer);
                        hasSelectedRecordsRef.current = false;
                        // Notify Widget that selection is cleared
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.dispatchSelectionEvent)(props.widgetId, [], dsToUse, queryItem.configId, eventManager);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-all-records-removed-selection-cleared',
                            widgetId: props.widgetId
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-clear-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }))();
            }
            // Mark that query just executed BEFORE updating resultCount
            // This ensures the auto-switch useEffect sees queryJustExecutedRef.current === true
            queryJustExecutedRef.current = true;
            debugLogger.log('TASK', {
                event: 'query-executed-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                resultsMode,
                recordsToDisplayCount: recordsToDisplay.length,
                queryResultCount,
                timestamp: Date.now()
            });
            // Update result count FIRST (before any parent callbacks that might cause re-renders)
            // For "Add to" and "Remove from" modes, use accumulated/remaining count
            // For "New" mode, use query count
            const newResultCount = resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection
                ? recordsToDisplay.length
                : queryResultCount;
            setResultCount(newResultCount);
            // INSTANT UI FIX (The "Spinner Bypass"): 
            // Decouple the "Retrieving results..." spinner from asynchronous actions like zooming. 
            // By calling setStage(1) now, the user sees the result list immediately while 
            // the map animation continues in the background.
            setStage(1);
            debugLogger.log('TASK', {
                event: 'perf-processing-complete',
                widgetId: props.widgetId,
                processingDurationMs: Math.round(performance.now() - processingStartTime),
                totalChainDurationMs: Math.round(performance.now() - startTime),
                newResultCount,
                resultsMode,
                timestamp: Date.now()
            });
            // Zoom to records using shared zoom utility (consistent padding behavior)
            // Use runtime preference if provided, otherwise fall back to config setting (defaults to true)
            const shouldZoom = runtimeZoomToSelected !== undefined
                ? runtimeZoomToSelected
                : (queryItem.zoomToSelected !== false);
            // Use the output DS and merged records
            const recordsForZoom = recordsToDisplay || result.records;
            const dsForZoom = dsToUse || outputDS;
            if (recordsForZoom && recordsForZoom.length > 0 && dsForZoom && shouldZoom) {
                // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
                if (!mapView && !useGraphicsLayerForHighlight) {
                    debugLogger.log('BUG', {
                        bugId: 'BUG-GRAPHICS-001',
                        category: 'GRAPHICS',
                        event: 'zoom-operation-failed-graphics-layer-disabled',
                        widgetId: props.widgetId,
                        operation: 'query-result-zoom',
                        recordsCount: recordsForZoom.length,
                        description: 'Zoom operation attempted but mapView is unavailable because useGraphicsLayerForHighlight is disabled',
                        workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                        targetResolution: 'r019.0'
                    });
                }
                try {
                    yield zoomToRecords(recordsForZoom);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to zoom to features';
                    setZoomError(errorMessage);
                    debugLogger.log('ZOOM', {
                        event: 'zoom-goTo-error-query',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    if (true) {
                        console.error('Error executing zoomToRecords', error);
                    }
                }
            }
            // NOW call onHashParameterUsed AFTER all UI updates and zoom operations complete
            // This prevents the parent re-render from interrupting the promise chain
            // This prevents hash parameters from re-executing when switching queries
            if (initialInputValue && queryItem.shortId && onHashParameterUsed) {
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-calling-onhashparameterused',
                    widgetId: props.widgetId,
                    queryItemConfigId: props.queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    timestamp: Date.now()
                });
                debugLogger.log('TASK', {
                    event: 'hash-query-executed-notifying-parent',
                    widgetId: props.widgetId,
                    queryItemConfigId: queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    timestamp: Date.now()
                });
                onHashParameterUsed(queryItem.shortId);
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-onhashparameterused-called',
                    widgetId: props.widgetId,
                    queryItemConfigId: props.queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    timestamp: Date.now()
                });
                // Fire event to notify HelperSimple that hash query execution is complete
                // This allows HelperSimple to track which hash parameters have been executed
                // to prevent re-execution when switching queries
                const hashParam = `${queryItem.shortId}=${initialInputValue}`;
                const executedEvent = new CustomEvent(QUERYSIMPLE_HASH_QUERY_EXECUTED_EVENT, {
                    detail: {
                        widgetId: props.widgetId,
                        shortId: queryItem.shortId,
                        value: initialInputValue,
                        hashParam
                    },
                    bubbles: true,
                    cancelable: true
                });
                window.dispatchEvent(executedEvent);
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-hash-query-executed-event-dispatched',
                    widgetId: props.widgetId,
                    queryItemConfigId: queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    hashParam,
                    timestamp: Date.now()
                });
            }
            return Promise.resolve(true);
        }))
            .catch(error => {
            debugLogger.log('TASK', {
                event: 'query-chain-failed-diagnostic',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            setStage(1); // Return to results or form stage even on error
        })
            .finally(() => {
            if ((spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.layer) && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.clearAfterApply)) {
                spatialFilter.layer.removeAll();
            }
            // setStage(1) // Removed from here; now called in the main chain before background actions
        });
    }), [currentItem, queryItem, props.widgetId, outputDS, publishDataClearedMsg, clearResult, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, onClearGraphicsLayer, mapView, useGraphicsLayerForHighlight, zoomToRecords]);
    // Listen for hash value conversion event and execute pending query
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleHashValueConverted = (event) => {
            var _a, _b, _c, _d, _e, _f, _g;
            debugLogger.log('TASK', {
                event: 'hash-value-converted-event-received',
                widgetId: props.widgetId,
                eventWidgetId: (_a = event.detail) === null || _a === void 0 ? void 0 : _a.widgetId,
                eventConfigId: (_b = event.detail) === null || _b === void 0 ? void 0 : _b.configId,
                matchesWidget: ((_c = event.detail) === null || _c === void 0 ? void 0 : _c.widgetId) === props.widgetId,
                hasPendingQuery: !!pendingHashQueryRef.current,
                timestamp: Date.now()
            });
            // Only process events for this widget
            if (((_d = event.detail) === null || _d === void 0 ? void 0 : _d.widgetId) !== props.widgetId) {
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-event-ignored-wrong-widget',
                    widgetId: props.widgetId,
                    eventWidgetId: (_e = event.detail) === null || _e === void 0 ? void 0 : _e.widgetId,
                    timestamp: Date.now()
                });
                return;
            }
            if (pendingHashQueryRef.current) {
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-executing-pending-query',
                    widgetId: props.widgetId,
                    configId: event.detail.configId,
                    initialInputValue: event.detail.initialInputValue,
                    timestamp: Date.now()
                });
                const { sqlExpr, spatialFilter, runtimeZoomToSelected } = pendingHashQueryRef.current;
                pendingHashQueryRef.current = null;
                // Execute the pending query now that value is converted
                // Use setTimeout to ensure this happens after the current event loop
                setTimeout(() => {
                    handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
                }, 0);
            }
            else {
                // Conversion happened before handleFormSubmit was called
                // applyQuery() is called directly from handleSqlExprObjChange in query-task-form.tsx
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-event-received-no-pending-query',
                    widgetId: props.widgetId,
                    configId: (_f = event.detail) === null || _f === void 0 ? void 0 : _f.configId,
                    initialInputValue: (_g = event.detail) === null || _g === void 0 ? void 0 : _g.initialInputValue,
                    note: 'Conversion happened before handleFormSubmit - applyQuery() called directly from form component',
                    timestamp: Date.now()
                });
            }
        };
        document.addEventListener(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, handleHashValueConverted);
        return () => {
            document.removeEventListener(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, handleHashValueConverted);
        };
    }, [props.widgetId, handleFormSubmitInternal]);
    /**
     * Handles form submission when user clicks "Apply" button.
     * Checks if hash value needs conversion and waits for event if needed.
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmit = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c;
        // LOG AT THE VERY START - before any checks
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-called',
            widgetId: props.widgetId,
            sqlExprExists: !!sqlExpr,
            firstPartExists: !!((_a = sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.parts) === null || _a === void 0 ? void 0 : _a[0]),
            timestamp: Date.now()
        });
        // Check if this is a hash-triggered query with unconverted value (string format)
        const firstPart = (_b = sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.parts) === null || _b === void 0 ? void 0 : _b[0];
        const value = (firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' ? (_c = firstPart.valueOptions) === null || _c === void 0 ? void 0 : _c.value : null;
        const isStringValue = typeof value === 'string' && value.length > 0;
        const isArrayValue = Array.isArray(value) && value.length > 0;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-checking-conversion',
            widgetId: props.widgetId,
            initialInputValue,
            valueType: typeof value,
            isStringValue,
            isArrayValue,
            value: Array.isArray(value) ? value : value,
            willCheckWaitCondition: isStringValue && !isArrayValue && initialInputValue && value === initialInputValue,
            timestamp: Date.now()
        });
        // If value is string (not converted to array yet), wait for conversion event
        // This happens when hash value changes for same configId
        if (isStringValue && !isArrayValue && initialInputValue && value === initialInputValue) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-waiting-for-conversion',
                widgetId: props.widgetId,
                currentValue: value,
                initialInputValue,
                timestamp: Date.now()
            });
            // Store pending query
            pendingHashQueryRef.current = {
                sqlExpr,
                spatialFilter,
                runtimeZoomToSelected
            };
            // Set a timeout to prevent infinite waiting (fallback after 2 seconds)
            setTimeout(() => {
                if (pendingHashQueryRef.current) {
                    debugLogger.log('TASK', {
                        event: 'handleFormSubmit-conversion-timeout-executing-anyway',
                        widgetId: props.widgetId,
                        timestamp: Date.now()
                    });
                    const { sqlExpr, spatialFilter, runtimeZoomToSelected } = pendingHashQueryRef.current;
                    pendingHashQueryRef.current = null;
                    // Execute anyway (fallback)
                    handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
                }
            }, 2000);
            return; // Exit early, will execute when event fires
        }
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-immediately',
            widgetId: props.widgetId,
            reason: isStringValue ? 'not-hash-triggered' : (isArrayValue ? 'already-converted' : 'no-value'),
            valueType: typeof value,
            isStringValue,
            isArrayValue,
            timestamp: Date.now()
        });
        // Value is already converted or not hash-triggered, execute immediately
        handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
    }), [props.widgetId, initialInputValue, handleFormSubmitInternal]);
    const { useAttributeFilter, sqlExprObj, useSpatialFilter, spatialFilterTypes, spatialIncludeRuntimeData, spatialRelationUseDataSources } = currentItem;
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // DETECT SWITCH IN RENDER
    const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
    const isVirtualClearActive = isSwitchingQueries && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
    // Use these "effective" values for the UI
    const effectiveResultCount = isVirtualClearActive ? 0 : resultCount;
    const effectiveRecords = isVirtualClearActive ? [] : (recordsRef.current || []);
    // Create a unique key for the current query result set to help E2E tests detect fresh data
    const resultQueryKey = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return `${queryItem.configId}_${Date.now()}`;
    }, [queryItem.configId, resultCount]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task h-100', className, { wrapped: wrappedInPopper }), "data-result-query-key": resultQueryKey, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      ${style}
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useOutputDs, onDataSourceCreated: handleOutputDataSourceCreated, onDataSourceInfoChange: handleOutputDataSourceInfoChange }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { value: activeTab, onChange: (id) => handleTabChange(id), fill: true, type: 'underline', keepMount: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'query', title: getI18nMessage('queryTab'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'query'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
              padding-top: 0 !important;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-form__header mx-4 align-items-center', { 'in-popper': isInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              padding: 6px 0;
              padding-top: 8px;
              border-bottom: 1px solid var(--sys-color-divider-secondary);
              flex-shrink: 0;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('nav-action align-items-center', { 'd-none': wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1 1 0;
                overflow: hidden;
                display: flex;
                align-items: center;
                gap: 4px;
                .jimu-btn {
                  min-width: 26px;
                }
              `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 mr-2', { 'd-none': total === 1 || !onNavBack }), size: 'sm', type: 'tertiary', icon: true, onClick: onNavBack, "aria-label": getI18nMessage('back'), ref: backBtnRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_15__.ArrowLeftOutlined, { autoFlip: true }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_label__WEBPACK_IMPORTED_MODULE_9__.QueryTaskLabel, { icon: icon, name: displayLabel ? name : '' }), (() => {
                                                    var _a;
                                                    if (!queryItems || queryItems.length <= 1)
                                                        return null;
                                                    // Get current query's origin data source ID
                                                    const currentOriginDSId = (_a = queryItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId;
                                                    if (!currentOriginDSId)
                                                        return null;
                                                    // Find all queries from the same origin data source that have shortIds
                                                    const sameLayerQueries = queryItems.filter(item => {
                                                        var _a;
                                                        return ((_a = item.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId) === currentOriginDSId &&
                                                            item.shortId &&
                                                            item.shortId.trim() !== '';
                                                    });
                                                    // Only show info button if there are queries with shortIds
                                                    if (sameLayerQueries.length === 0)
                                                        return null;
                                                    // Build tooltip content
                                                    const queryLines = sameLayerQueries.map(item => {
                                                        const queryName = getQueryDisplayName(item);
                                                        return `${queryName}: #${item.shortId}=value or ?${item.shortId}=value`;
                                                    });
                                                    const tooltipTitle = `This layer can be searched using the shortIds ${sameLayerQueries.map(q => q.shortId).join(' and ')} using #shortId=value or ?shortId=value in the URL.\n\n${queryLines.join('\n')}`;
                                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: tooltipTitle, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": 'Hash parameter search information', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex-shrink: 0;
                        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }));
                                                })()] }), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: clearResultBtnRef, size: 'sm', type: 'tertiary', "aria-label": getI18nMessage('clearResult'), icon: true, className: 'ml-auto py-0', onClick: () => { clearResult('user-trash-click'); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__.TrashOutlined, {}) }) }))] }), (() => {
                                    // Only show dropdowns if multiple queries exist
                                    if (!queryItems || queryItems.length <= 1) {
                                        return null;
                                    }
                                    // Build flat list of all queries with their display info
                                    // For grouped queries, use group display name (only show once per group)
                                    const queryOptions = [];
                                    // Track which groups we've already added to avoid duplicates
                                    const addedGroups = new Set();
                                    queryItems.forEach((item, idx) => {
                                        var _a, _b, _c;
                                        if (item.groupId) {
                                            // For grouped queries, use group display name (only add once per group)
                                            if (!addedGroups.has(item.groupId)) {
                                                addedGroups.add(item.groupId);
                                                const groupDisplayName = ((_a = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.displayName) ||
                                                    ((_c = (_b = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _b === void 0 ? void 0 : _b.items[0]) === null || _c === void 0 ? void 0 : _c.name) ||
                                                    item.name ||
                                                    `Group ${item.groupId}`;
                                                queryOptions.push({
                                                    configId: item.configId,
                                                    displayName: groupDisplayName,
                                                    groupId: item.groupId,
                                                    index: idx
                                                });
                                            }
                                        }
                                        else {
                                            // Ungrouped query - use item.name for first dropdown (not searchAlias/jimuFieldName)
                                            queryOptions.push({
                                                configId: item.configId,
                                                displayName: item.name || getQueryDisplayName(item),
                                                groupId: null,
                                                index: idx
                                            });
                                        }
                                    });
                                    // Determine currently selected query
                                    const currentQueryItem = queryItem;
                                    const currentQueryGroupId = currentQueryItem.groupId || null;
                                    const isGroupedQuery = currentQueryGroupId !== null;
                                    // Find the option index for the current query
                                    const currentOptionIndex = queryOptions.findIndex(opt => {
                                        if (isGroupedQuery) {
                                            return opt.groupId === currentQueryGroupId;
                                        }
                                        else {
                                            return opt.configId === currentQueryItem.configId;
                                        }
                                    });
                                    debugLogger.log('GROUP', {
                                        event: 'rendering-dropdowns',
                                        totalQueries: queryItems.length,
                                        queryOptionsCount: queryOptions.length,
                                        currentQueryGroupId,
                                        isGroupedQuery,
                                        currentOptionIndex,
                                        selectedGroupId,
                                        selectedGroupQueryIndex,
                                        currentQueryConfigId: currentQueryItem.configId
                                    });
                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 4px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      font-size: 0.875rem;
                      font-weight: 500;
                      color: var(--sys-color-text-primary);
                      margin-bottom: 4px;
                      display: block;
                    `, children: getI18nMessage('searchLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: currentOptionIndex >= 0 ? currentOptionIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const optionIndex = parseInt(e.target.value);
                                                            const selectedOption = queryOptions[optionIndex];
                                                            debugLogger.log('GROUP', {
                                                                event: 'query-option-selected',
                                                                optionIndex,
                                                                selectedOption,
                                                                isGrouped: selectedOption.groupId !== null
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-layer-switch-new-mode');
                                                            }
                                                            if (selectedOption.groupId) {
                                                                // Grouped query selected - set group and first query in group
                                                                if (onGroupChange) {
                                                                    onGroupChange(selectedOption.groupId);
                                                                }
                                                                if (onGroupQueryChange) {
                                                                    onGroupQueryChange(0);
                                                                }
                                                            }
                                                            else {
                                                                // Ungrouped query selected - clear group selection
                                                                if (onGroupChange) {
                                                                    onGroupChange(null);
                                                                }
                                                                if (onUngroupedChange) {
                                                                    // Find the ungrouped index
                                                                    const ungroupedIndex = (_a = ungrouped === null || ungrouped === void 0 ? void 0 : ungrouped.findIndex(({ item }) => item.configId === selectedOption.configId)) !== null && _a !== void 0 ? _a : -1;
                                                                    if (ungroupedIndex >= 0) {
                                                                        onUngroupedChange(ungroupedIndex);
                                                                    }
                                                                    else {
                                                                        // Fallback: use the index from queryItems
                                                                        debugLogger.log('GROUP', {
                                                                            event: 'ungrouped-fallback-to-index',
                                                                            selectedOptionIndex: selectedOption.index
                                                                        });
                                                                        if (onQueryChange) {
                                                                            onQueryChange(selectedOption.index);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }), children: queryOptions.map((option, idx) => {
                                                            debugLogger.log('GROUP', {
                                                                event: 'rendering-query-option',
                                                                index: idx,
                                                                configId: option.configId,
                                                                displayName: option.displayName,
                                                                groupId: option.groupId
                                                            });
                                                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: option.displayName }, option.configId));
                                                        }) })] }), isGroupedQuery && currentQueryGroupId && groups && groups[currentQueryGroupId] && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      padding: 4px 16px;
                      flex-shrink: 0;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        margin-bottom: 4px;
                        display: block;
                      `, children: "Search Alias" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: selectedGroupQueryIndex !== undefined ? selectedGroupQueryIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const newIndex = parseInt(e.target.value);
                                                            debugLogger.log('GROUP', {
                                                                event: 'group-query-selected',
                                                                groupId: currentQueryGroupId,
                                                                groupQueryIndex: newIndex,
                                                                queryItemConfigId: (_a = groups[currentQueryGroupId].items[newIndex]) === null || _a === void 0 ? void 0 : _a.configId,
                                                                queryDisplayName: getQueryDisplayName(groups[currentQueryGroupId].items[newIndex])
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-alias-switch-new-mode');
                                                            }
                                                            if (onGroupQueryChange) {
                                                                onGroupQueryChange(newIndex);
                                                            }
                                                        }), children: groups[currentQueryGroupId].items.map((item, idx) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: getQueryDisplayName(item) }, item.configId))) })] }))] }));
                                })(), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 8px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "d-flex align-items-center", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      gap: 0.5rem;
                      flex-wrap: nowrap;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "title2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        white-space: nowrap;
                        flex-shrink: 0;
                      `, children: [getI18nMessage('results'), ":"] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: getI18nMessage('resultsModeDesc'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": getI18nMessage('resultsModeDesc'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `flex-shrink: 0;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: "radiogroup", "aria-label": getI18nMessage('resultsMode'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          display: flex;
                          gap: 4px;
                          align-items: stretch;
                          flex: 1;
                          min-width: 0;
                        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode: resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection, "aria-label": `${getI18nMessage('createNewResults')}: ${((_b = getI18nMessage('resultsModeDesc').split('\n')[1]) === null || _b === void 0 ? void 0 : _b.trim()) || ''}`, title: getI18nMessage('createNewResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeNew') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Add to" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                //
                                                                // SOURCE OF TRUTH ARCHITECTURE (r018.65):
                                                                // - outputDS.getSelectedRecords() is the SINGLE SOURCE OF TRUTH for current selection
                                                                //   It correctly filters out removed records and stays in sync with user actions
                                                                // - effectiveRecords (from recordsRef.current) contains stale query results that may
                                                                //   include removed records, so it should only be used as a fallback when outputDS
                                                                //   has no selection (e.g., during query execution before selection is applied)
                                                                // - This ensures removed records are never accidentally included in accumulatedRecords
                                                                // DEBUG: Log state before capture to verify assumptions
                                                                const effectiveRecordsCount = (effectiveRecords === null || effectiveRecords === void 0 ? void 0 : effectiveRecords.length) || 0;
                                                                const outputDSSelectedRecords = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
                                                                const outputDSSelectedCount = outputDSSelectedRecords.length;
                                                                const accumulatedRecordsCount = (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-before-capture',
                                                                    widgetId: props.widgetId,
                                                                    previousMode,
                                                                    newMode,
                                                                    effectiveRecordsCount,
                                                                    outputDSSelectedCount,
                                                                    accumulatedRecordsCount,
                                                                    outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                                                                    hasEffectiveRecords: effectiveRecords && effectiveRecords.length > 0,
                                                                    hasOutputDSSelected: outputDSSelectedRecords.length > 0,
                                                                    timestamp: Date.now()
                                                                });
                                                                // FIX (r018.65): Use outputDS.getSelectedRecords() as source of truth for mode switching
                                                                // This correctly filters out removed records, unlike effectiveRecords which contains stale data
                                                                // outputDS.getSelectedRecords() is the single source of truth that stays in sync with removals
                                                                const recordsToCapture = outputDSSelectedRecords.length > 0
                                                                    ? outputDSSelectedRecords
                                                                    : (effectiveRecords && effectiveRecords.length > 0
                                                                        ? effectiveRecords
                                                                        : []);
                                                                // DEBUG: Log which source was used
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-after-capture',
                                                                    widgetId: props.widgetId,
                                                                    recordsToCaptureCount: recordsToCapture.length,
                                                                    source: outputDSSelectedRecords.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                    effectiveRecordsCount,
                                                                    outputDSSelectedCount,
                                                                    timestamp: Date.now()
                                                                });
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection &&
                                                                    recordsToCapture.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, recordsToCapture, existingAccumulated);
                                                                    const existingIds = existingAccumulated.map(r => r.getId());
                                                                    const capturedIds = recordsToCapture.map(r => r.getId());
                                                                    const mergedIds = mergedRecords.map(r => r.getId());
                                                                    const addedIds = mergedIds.filter(id => !existingIds.includes(id));
                                                                    const duplicateIds = capturedIds.filter(id => existingIds.includes(id));
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCapture.length,
                                                                        capturedIds: capturedIds,
                                                                        effectiveRecordsCount,
                                                                        outputDSSelectedCount,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        existingIds: existingIds,
                                                                        mergedRecordsCount: mergedRecords.length,
                                                                        mergedIds: mergedIds,
                                                                        addedIds: addedIds,
                                                                        duplicateIds: duplicateIds,
                                                                        duplicatesFiltered: duplicateIds.length,
                                                                        sourceUsed: outputDSSelectedRecords.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                        note: 'outputDS.getSelectedRecords()-is-source-of-truth-filters-removed-records'
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection, "aria-label": `${getI18nMessage('addToCurrentResults')}: ${((_c = getI18nMessage('resultsModeDesc').split('\n')[2]) === null || _c === void 0 ? void 0 : _c.trim()) || ''}`, title: getI18nMessage('addToCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeAdd') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'primary' : 'default', disabled: !accumulatedRecords || accumulatedRecords.length === 0, onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Remove from" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                // (same pattern as "Add to" mode)
                                                                //
                                                                // SOURCE OF TRUTH ARCHITECTURE (r018.65):
                                                                // - outputDS.getSelectedRecords() is the SINGLE SOURCE OF TRUTH for current selection
                                                                //   It correctly filters out removed records and stays in sync with user actions
                                                                // - effectiveRecords (from recordsRef.current) contains stale query results that may
                                                                //   include removed records, so it should only be used as a fallback when outputDS
                                                                //   has no selection (e.g., during query execution before selection is applied)
                                                                // - This ensures removed records are never accidentally included in accumulatedRecords
                                                                // DEBUG: Log state before capture to verify assumptions
                                                                const effectiveRecordsCountForRemove = (effectiveRecords === null || effectiveRecords === void 0 ? void 0 : effectiveRecords.length) || 0;
                                                                const outputDSSelectedRecordsForRemove = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
                                                                const outputDSSelectedCountForRemove = outputDSSelectedRecordsForRemove.length;
                                                                const accumulatedRecordsCountForRemove = (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-before-capture-remove',
                                                                    widgetId: props.widgetId,
                                                                    previousMode,
                                                                    newMode,
                                                                    effectiveRecordsCount: effectiveRecordsCountForRemove,
                                                                    outputDSSelectedCount: outputDSSelectedCountForRemove,
                                                                    accumulatedRecordsCount: accumulatedRecordsCountForRemove,
                                                                    outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                                                                    hasEffectiveRecords: effectiveRecords && effectiveRecords.length > 0,
                                                                    hasOutputDSSelected: outputDSSelectedRecordsForRemove.length > 0,
                                                                    timestamp: Date.now()
                                                                });
                                                                // FIX (r018.65): Use outputDS.getSelectedRecords() as source of truth for mode switching
                                                                // This correctly filters out removed records, unlike effectiveRecords which contains stale data
                                                                // outputDS.getSelectedRecords() is the single source of truth that stays in sync with removals
                                                                const recordsToCaptureForRemove = outputDSSelectedRecordsForRemove.length > 0
                                                                    ? outputDSSelectedRecordsForRemove
                                                                    : (effectiveRecords && effectiveRecords.length > 0
                                                                        ? effectiveRecords
                                                                        : []);
                                                                // DEBUG: Log which source was used
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-after-capture-remove',
                                                                    widgetId: props.widgetId,
                                                                    recordsToCaptureCount: recordsToCaptureForRemove.length,
                                                                    source: outputDSSelectedRecordsForRemove.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                    effectiveRecordsCount: effectiveRecordsCountForRemove,
                                                                    outputDSSelectedCount: outputDSSelectedCountForRemove,
                                                                    timestamp: Date.now()
                                                                });
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection &&
                                                                    recordsToCaptureForRemove.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, recordsToCaptureForRemove, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch-to-remove',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCaptureForRemove.length,
                                                                        effectiveRecordsCount: effectiveRecordsCountForRemove,
                                                                        outputDSSelectedCount: outputDSSelectedCountForRemove,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length,
                                                                        sourceUsed: outputDSSelectedRecordsForRemove.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                        note: 'outputDS.getSelectedRecords()-is-source-of-truth-filters-removed-records'
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection, "aria-label": `${getI18nMessage('removeFromCurrentResults')}: ${((_d = getI18nMessage('resultsModeDesc').split('\n')[3]) === null || _d === void 0 ? void 0 : _d.trim()) || ''}`, title: (!accumulatedRecords || accumulatedRecords.length === 0)
                                                                ? getI18nMessage('resultsModeDisabledRemove')
                                                                : getI18nMessage('removeFromCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeRemove') })] })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `results-mode-description-${props.widgetId}`, className: "sr-only", "aria-live": "polite", role: "status", children: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection
                                                ? getI18nMessage('createNewResults')
                                                : resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection
                                                    ? getI18nMessage('addToCurrentResults')
                                                    : getI18nMessage('removeFromCurrentResults') })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
            `, children: [enabled && dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  min-height: 0;
                  overflow: hidden;
                `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_form__WEBPACK_IMPORTED_MODULE_6__.QueryTaskForm, Object.assign({}, otherProps, { configId: queryItem.configId, outputDS: outputDS, datasourceReady: dataSource != null, spatialFilterEnabled: spatialFilterEnabled, dataActionFilter: dataActionFilter, onFormSubmit: handleFormSubmit, initialInputValue: initialInputValue, onHashParameterUsed: onHashParameterUsed, queryItemShortId: queryItem.shortId, activeTab: activeTab, onTabChange: setActiveTab }), queryItem.configId) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.DataSourceTip, { widgetId: props.widgetId, useDataSource: queryItem.useDataSource, showMessage: true, onStatusChange: handleStatusChange, onDataSourceCreated: handleDataSourceCreated })] })] }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'results', title: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { children: [getI18nMessage('resultsTab'), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  margin-left: 6px;
                  font-size: 0.75rem;
                  opacity: 0.7;
                `, children: ["(", effectiveResultCount, ")"] }))] }), disabled: effectiveResultCount === 0, children: effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'results'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 0;
                height: 100%;
                padding-top: 0 !important;
              `, onClick: (e) => {
                                // Prevent clicks from bubbling up when Results tab is active
                                if (activeTab === 'results') {
                                    e.stopPropagation();
                                }
                            }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result__WEBPACK_IMPORTED_MODULE_7__.QueryTaskResult, { widgetId: props.widgetId, queryItem: queryItem, queryParams: queryParamRef.current, resultCount: effectiveResultCount, maxPerPage: (_e = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(dataSource), records: effectiveRecords, outputDS: outputDS, runtimeZoomToSelected: lastRuntimeZoomToSelectedRef.current, resultsMode: resultsMode, useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, eventManager: eventManager, onNavBack: (...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
                                    // Handle navigation from QueryTaskResult
                                    // If clearResults is true, clear everything and go to query tab
                                    // If false, just switch to query tab without clearing
                                    if (clearResults) {
                                        hasSelectedRecordsRef.current = false; // Reset flag when clearing
                                        yield navToForm(true);
                                    }
                                    else {
                                        // Just switch tabs, don't clear results
                                        // Mark as manual switch to prevent auto-switch useEffect from interfering
                                        manualTabSwitchRef.current = true;
                                        setActiveTab('query');
                                        // Reset the flag after a short delay
                                        setTimeout(() => {
                                            manualTabSwitchRef.current = false;
                                        }, 100);
                                    }
                                }) }, `${queryItem.configId}-${queryExecutionKeyRef.current}`) })) })] }), (selectionError || zoomError) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 0 16px;
          margin-top: 8px;
        `, children: [selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) })), zoomError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: zoomError, onDismiss: () => setZoomError(null) }))] })), stage === 2 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1000;
          background-color: rgba(255, 255, 255, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_loading_result__WEBPACK_IMPORTED_MODULE_16__.LoadingResult, {}) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-utils.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineFields: () => (/* binding */ combineFields),
/* harmony export */   executeCountQuery: () => (/* binding */ executeCountQuery),
/* harmony export */   executeQuery: () => (/* binding */ executeQuery),
/* harmony export */   generateQueryParams: () => (/* binding */ generateQueryParams),
/* harmony export */   getPopupTemplate: () => (/* binding */ getPopupTemplate),
/* harmony export */   isQueryInputValid: () => (/* binding */ isQueryInputValid),
/* harmony export */   sanitizeQueryInput: () => (/* binding */ sanitizeQueryInput),
/* harmony export */   sanitizeSqlExpression: () => (/* binding */ sanitizeSqlExpression)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared-code/common */ "./your-extensions/widgets/shared-code/common.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
function combineFields(resultDisplayFields, resultTitleExpression, idField) {
    const fields = new Set();
    resultDisplayFields === null || resultDisplayFields === void 0 ? void 0 : resultDisplayFields.forEach(item => fields.add(item));
    if (resultTitleExpression) {
        const templates = resultTitleExpression.match(/\{\w*\}/g);
        if ((templates === null || templates === void 0 ? void 0 : templates.length) > 0) {
            templates.forEach(item => fields.add(item.substring(1, item.length - 1)));
        }
    }
    if (idField) {
        fields.add(idField);
    }
    return Array.from(fields);
}
/**
 * Validates user input before query execution.
 * @param input - The raw user input (string, number, etc.)
 * @param isList - Optional flag indicating if the input is from a list/selector (lenient validation)
 * @returns boolean - true if input is valid, false otherwise
 */
function isQueryInputValid(input, isList = false) {
    // If it's a list-based selection (Unique Values, Field Values), 
    // we allow empty/null as it might represent "no filter" or the user 
    // intends to interact with the list.
    if (isList) {
        return true;
    }
    if (input === null || input === undefined) {
        return false;
    }
    // If it's a string, ensure it's not empty or just whitespace
    if (typeof input === 'string') {
        return input.trim() !== '';
    }
    // If it's an array (often used in unique values or multiple selection)
    if (Array.isArray(input)) {
        if (input.length === 0)
            return false;
        // Check if the first item is valid (usually {value: '...', label: '...'})
        const firstItem = input[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // If it's a jimu-core Immutable array
    if (input.asMutable && typeof input.toArray === 'function') {
        const arr = input.toArray();
        if (arr.length === 0)
            return false;
        const firstItem = arr[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // For other types (numbers, dates), if it exists, we count it as valid
    return true;
}
/**
 * Sanitizes user input for query tasks.
 * 1. Strips leading and trailing whitespace.
 * 2. Prevents basic SQL injection by escaping single quotes.
 * 3. Handles empty or whitespace-only strings.
 *
 * @param input - The raw user input string
 * @returns Sanitized string or null if input is empty
 */
function sanitizeQueryInput(input) {
    if (!input || typeof input !== 'string') {
        return null;
    }
    const trimmed = input.trim();
    if (trimmed === '') {
        return null;
    }
    // Basic SQL escaping: replace single quotes with double single quotes
    return trimmed.replace(/'/g, "''");
}
/**
 * Sanitizes all values within an IMSqlExpression object.
 *
 * @param sqlExpr - The raw SQL expression object
 * @returns A new sanitized IMSqlExpression object
 */
function sanitizeSqlExpression(sqlExpr) {
    if (!sqlExpr || !sqlExpr.parts) {
        return sqlExpr;
    }
    let sanitizedExpr = sqlExpr;
    sqlExpr.parts.forEach((part, index) => {
        var _a;
        if (part.type === 'SINGLE' && ((_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value) !== undefined) {
            const rawValue = part.valueOptions.value;
            // CASE 1: Simple String
            if (typeof rawValue === 'string') {
                const sanitizedValue = sanitizeQueryInput(rawValue);
                if (sanitizedValue !== rawValue) {
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedValue);
                }
            }
            // CASE 2: Array of objects (Unique Values / Dropdowns)
            // We must preserve the Immutable structure to avoid "asMutable" errors
            else if (Array.isArray(rawValue) || (rawValue && typeof rawValue.toArray === 'function')) {
                const isImmutable = typeof rawValue.toArray === 'function';
                const arr = isImmutable ? rawValue.toArray() : rawValue;
                let changed = false;
                const sanitizedArr = arr.map(item => {
                    if (item && typeof item === 'object' && 'value' in item && typeof item.value === 'string') {
                        const sanitizedVal = sanitizeQueryInput(item.value);
                        if (sanitizedVal !== item.value) {
                            changed = true;
                            return Object.assign(Object.assign({}, item), { value: sanitizedVal });
                        }
                    }
                    return item;
                });
                if (changed) {
                    // If it was Immutable, we should ideally use Immutable methods to update,
                    // but setIn on the top-level expression with a plain array/object 
                    // usually triggers the framework's auto-conversion.
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedArr);
                }
            }
        }
    });
    return sanitizedExpr;
}
function getPopupTemplate(outputDS, queryItem) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const { resultFieldsType, resultDisplayFields, resultTitleExpression = '' } = queryItem;
        const currentOriginDs = outputDS.getOriginDataSources()[0];
        const popupInfo = currentOriginDs.getPopupInfo();
        if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
            let fields;
            if (resultDisplayFields == null) {
                const fieldsInContent = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.getFieldInfosInPopupContent)(popupInfo);
                if (fieldsInContent.length > 0) {
                    const uniqueFields = new Set(fieldsInContent.map(ele => ele.fieldName));
                    fields = Array.from(uniqueFields);
                }
                else {
                    // return all fields by default
                    const allFieldsSchema = outputDS.getSchema();
                    fields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
                }
            }
            else {
                fields = resultDisplayFields.asMutable({ deep: true });
            }
            if (popupInfo) {
                const fieldInfos = [];
                fields.forEach(field => {
                    const fieldInfo = popupInfo.fieldInfos.find(fieldInfo => fieldInfo.fieldName === field);
                    if (fieldInfo) {
                        fieldInfo.visible = true;
                        fieldInfos.push(fieldInfo);
                    }
                    else {
                        fieldInfos.push({
                            fieldName: field,
                            label: field
                        });
                    }
                });
                return {
                    popupTemplate: {
                        fieldInfos,
                        content: [{
                                type: 'fields'
                            }],
                        title: resultTitleExpression
                    }
                };
            }
            return {
                popupTemplate: {
                    fieldInfos: fields.map(field => ({
                        fieldName: field,
                        label: field
                    })),
                    content: [{
                            type: 'fields'
                        }],
                    title: resultTitleExpression
                }
            };
        }
        // the source layer will provide popup info
        let layerObject;
        if (currentOriginDs.layer) {
            layerObject = currentOriginDs.layer;
        }
        else {
            layerObject = yield currentOriginDs.createJSAPILayerByDataSource();
        }
        if (layerObject) {
            yield layerObject.load();
        }
        return { defaultPopupTemplate: ((_a = layerObject === null || layerObject === void 0 ? void 0 : layerObject.associatedLayer) === null || _a === void 0 ? void 0 : _a.defaultPopupTemplate) || (layerObject === null || layerObject === void 0 ? void 0 : layerObject.defaultPopupTemplate) };
    });
}
function generateQueryParams(outputDS, sqlExpr, spatialFilter, queryItem, page, pageSize) {
    var _a, _b, _c, _d, _e;
    const currentQueryDsJson = outputDS.getDataSourceJson();
    const currentOriginDs = outputDS.getOriginDataSources()[0];
    const isLocalDs = currentQueryDsJson === null || currentQueryDsJson === void 0 ? void 0 : currentQueryDsJson.isDataInDataSourceInstance;
    if (isLocalDs) {
        outputDS.setSourceRecords(currentOriginDs.getSourceRecords());
    }
    const { useAttributeFilter, useSpatialFilter, sortOptions, resultFieldsType, resultDisplayFields, resultTitleExpression } = queryItem;
    // DETERMINE MINIMAL FIELDS (The "Field Shredder" Optimization)
    // To achieve performance parity with Web AppBuilder, we must avoid fetching every 
    // column in the database (* or all). We surgically request only the fields 
    // needed for the Title, the Attribute List, and the ID field.
    let outputFields = [];
    if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes && resultDisplayFields) {
        outputFields = combineFields(resultDisplayFields, resultTitleExpression || '', outputDS.getIdField());
    }
    else {
        // Popup mode: Get only visible fields from popup info
        const popupInfo = currentOriginDs.getPopupInfo();
        const fieldNames = Object.values((_a = currentOriginDs.getSchema().fields) !== null && _a !== void 0 ? _a : {}).map(f => f.name);
        const validFieldInfos = (_b = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) === null || _b === void 0 ? void 0 : _b.filter(fieldInfo => fieldInfo.visible !== false && fieldNames.includes(fieldInfo.fieldName));
        outputFields = (validFieldInfos === null || validFieldInfos === void 0 ? void 0 : validFieldInfos.map(fieldInfo => fieldInfo.fieldName)) || [];
        // Always ensure ID field is included
        const idField = outputDS.getIdField();
        if (idField && !outputFields.includes(idField)) {
            outputFields.push(idField);
        }
    }
    const mergedQueryParams = outputDS.mergeQueryParams((_c = currentOriginDs.getCurrentQueryParams()) !== null && _c !== void 0 ? _c : {}, {
        where: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpr, outputDS).sql : '1=1',
        sqlExpression: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? sqlExpr : null,
        // FORCE minimal fields here to override any framework "*" or "all"
        outFields: outputFields
    });
    // PERFORMANCE OPTIMIZATION: Universal SQL Optimizer
    // We normalize the user's input to UPPERCASE to ensure case-insensitivity while 
    // unwrapping any LOWER() function around the field name. This allows the database 
    // to use its attribute indexes (SARGable query).
    if (mergedQueryParams.where && mergedQueryParams.where.includes('LOWER(')) {
        const optimizedWhere = mergedQueryParams.where.replace(/LOWER\(([^)]+)\)\s*(=|LIKE)\s*'([^']*)'/gi, (match, field, operator, value) => {
            // Normalize both sides to UPPERCASE. This works for ANY field name.
            // We keep the field name "naked" so the index is used.
            return `${field} ${operator} '${value.toUpperCase()}'`;
        });
        if (optimizedWhere !== mergedQueryParams.where) {
            debugLogger.log('TASK', {
                event: 'sql-optimized',
                original: mergedQueryParams.where,
                optimized: optimizedWhere
            });
            mergedQueryParams.where = optimizedWhere;
        }
    }
    // compose query params for query
    const queryParams = Object.assign({ 
        // url: ds.url,
        returnGeometry: true, 
        /**
         * PERFORMANCE OPTIMIZATION: Force lower precision for all display queries.
         */
        maxAllowableOffset: 0.1, page, 
        // Limit pageSize to a sane default if not provided or too large
        pageSize: (pageSize && pageSize < 1000) ? pageSize : 1000 }, mergedQueryParams);
    // Final override to ensure no "*" leaks through from any merge operation
    if (!queryParams.outFields || queryParams.outFields.includes('*')) {
        queryParams.outFields = outputFields;
    }
    // Diagnostic log: Show exactly WHICH fields are being sent
    debugLogger.log('TASK', {
        event: 'requesting-data',
        fieldsCount: (_d = queryParams.outFields) === null || _d === void 0 ? void 0 : _d.length,
        fields: (_e = queryParams.outFields) === null || _e === void 0 ? void 0 : _e.join(', '),
        pageSize: queryParams.pageSize,
        offset: queryParams.maxAllowableOffset
    });
    if (useSpatialFilter && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.geometry)) {
        const { geometry, relation = _config__WEBPACK_IMPORTED_MODULE_1__.SpatialRelation.Intersect, buffer } = spatialFilter;
        const spatialQueryParams = {
            geometryType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(geometry.type),
            geometry: geometry.toJSON(),
            spatialRel: _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPISpatialRelToDsSpatialRel[relation],
            distance: buffer === null || buffer === void 0 ? void 0 : buffer.distance,
            units: (buffer === null || buffer === void 0 ? void 0 : buffer.unit) ? _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPIUnitToDsUnit[buffer.unit] : undefined
        };
        Object.assign(queryParams, spatialQueryParams);
    }
    if ((sortOptions === null || sortOptions === void 0 ? void 0 : sortOptions.length) > 0) {
        Object.assign(queryParams, {
            orderByFields: sortOptions.map(item => `${item.jimuFieldName} ${item.order}`)
        });
    }
    return queryParams;
}
function executeCountQuery(widgetId, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield outputDS.loadCount(queryParams, { widgetId, refresh: true });
        return result != null ? result : 0;
    });
}
function executeQuery(widgetId, queryItem, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const popupInfo = outputDS.getPopupInfo();
        const layerDefinition = outputDS.getLayerDefinition();
        const getDefaultFieldInfos = () => {
            var _a;
            return [
                { fieldName: (_a = layerDefinition === null || layerDefinition === void 0 ? void 0 : layerDefinition.objectIdField) !== null && _a !== void 0 ? _a : 'objectid', label: 'OBJECTID', tooltip: '', visible: true }
            ];
        };
        const fieldInfos = ((fieldInfos) => (fieldInfos.length ? fieldInfos : getDefaultFieldInfos()))(((popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) || []).filter((i) => i.visible));
        // const fields = outputDS.getSchema()?.fields
        // let selectedFieldNames
        // if (queryItem.resultFieldsType === FieldsType.SelectAttributes) {
        //   selectedFieldNames = [].concat(queryItem.resultDisplayFields, queryItem.resultTitleFields)
        // } else {
        //   selectedFieldNames = fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        // }
        // const selectedFieldJimuNames = fields
        //   ? Object.keys(fields).filter((jimuName) => selectedFieldNames.includes(fields[jimuName].name))
        //   : []
        // outputDS.setSelectedFields(selectedFieldJimuNames)
        const startTime = performance.now();
        let records = yield outputDS.load(queryParams, { widgetId });
        const fetchTime = performance.now() - startTime;
        if (records == null) {
            records = [];
        }
        const originDs = outputDS.getOriginDataSources()[0];
        const layerStartTime = performance.now();
        const layerObject = yield getLayerObject(originDs);
        const layerTime = performance.now() - layerStartTime;
        debugLogger.log('TASK', {
            event: 'query-complete',
            fetchTime: Math.round(fetchTime),
            layerTime: Math.round(layerTime),
            totalTime: Math.round(performance.now() - startTime),
            recordCount: records.length
        });
        records.forEach((record) => {
            const feature = record.feature;
            if (layerObject) {
                feature.sourceLayer = layerObject.associatedLayer || layerObject;
            }
            feature.layer = feature.sourceLayer;
        });
        const queryResult = {
            records,
            fields: fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        };
        // publish message
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordSetChangeMessage(widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.RecordSetChangeType.CreateUpdate, [{
                records: outputDS.getAllLoadedRecords(),
                fields: queryResult.fields,
                dataSource: outputDS,
                name: outputDS.id,
                label: outputDS.getLabel()
            }]);
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        return queryResult;
    });
}
function getLayerObject(dataSource) {
    return __awaiter(this, void 0, void 0, function* () {
        const layerObject = yield dataSource.createJSAPILayerByDataSource();
        // layerObject may be undefined if the data source is added by URL
        if (layerObject) {
            yield layerObject.load();
        }
        return layerObject;
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearAccumulatedResults: () => (/* binding */ clearAccumulatedResults),
/* harmony export */   createAccumulatedResultsDataSource: () => (/* binding */ createAccumulatedResultsDataSource),
/* harmony export */   getRecordKey: () => (/* binding */ getRecordKey),
/* harmony export */   mergeResultsIntoAccumulated: () => (/* binding */ mergeResultsIntoAccumulated),
/* harmony export */   removeRecordsFromOriginSelections: () => (/* binding */ removeRecordsFromOriginSelections),
/* harmony export */   removeResultsFromAccumulated: () => (/* binding */ removeResultsFromAccumulated)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/**
 * Utility functions for managing results accumulation in QuerySimple widget.
 * Handles "Add to" and "Remove from" modes for accumulating query results.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Generates a composite key for a record that includes both origin data source ID and objectId.
 * This ensures uniqueness across different layers that may have the same objectId.
 *
 * @param record - The feature data record
 * @param outputDS - The output data source containing the record
 * @returns Composite key string: `${originDSId}_${objectId}`
 */
function getRecordKey(record, outputDS) {
    var _a;
    const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
    const originDSId = (originDS === null || originDS === void 0 ? void 0 : originDS.id) || outputDS.id; // Fallback to outputDS if no origin
    const objectId = record.getId();
    const key = `${originDSId}_${objectId}`;
    debugLogger.log('RESULTS-MODE', {
        event: 'record-key-generated',
        originDSId,
        objectId,
        key,
        hasOriginDS: !!originDS
    });
    return key;
}
/**
 * Creates an accumulated results data source for storing merged query results.
 * This data source is widget-level and persists across multiple queries.
 *
 * @param widgetId - The widget ID
 * @param originDS - The origin data source to use as the base
 * @returns The created accumulated results data source
 */
function createAccumulatedResultsDataSource(widgetId, originDS) {
    return __awaiter(this, void 0, void 0, function* () {
        const accumulatedDSId = `${widgetId}_accumulated_results`;
        debugLogger.log('RESULTS-MODE', {
            event: 'creating-accumulated-ds',
            widgetId,
            accumulatedDSId,
            originDSId: originDS.id
        });
        // Check if data source already exists
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        let accumulatedDS = dsManager.getDataSource(accumulatedDSId);
        if (accumulatedDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-ds-already-exists',
                accumulatedDSId
            });
            return accumulatedDS;
        }
        // Get origin data source JSON to create output data source
        const originDataSourceJson = originDS.getDataSourceJson();
        // Create output data source JSON similar to how query items create output DS
        const outputDataSourceJson = {
            id: accumulatedDSId,
            label: 'Accumulated Results',
            type: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.type,
            geometryType: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.geometryType,
            url: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.url,
            itemId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.itemId,
            portalUrl: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.portalUrl,
            originDataSources: [{
                    dataSourceId: originDS.id,
                    mainDataSourceId: originDS.id,
                    rootDataSourceId: originDS.id
                }],
            layerId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.layerId,
            isDataInDataSourceInstance: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.isDataInDataSourceInstance,
            isOutputFromWidget: true
        };
        // Create the data source using DataSourceManager
        // Note: This follows the pattern from setting.tsx for creating output data sources
        accumulatedDS = dsManager.createDataSourceByDataSourceJson(outputDataSourceJson);
        // Set initial status
        accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        debugLogger.log('RESULTS-MODE', {
            event: 'accumulated-ds-created',
            accumulatedDSId,
            originDSId: originDS.id,
            status: accumulatedDS.getStatus()
        });
        return accumulatedDS;
    });
}
/**
 * Merges new query results with existing records.
 * Deduplicates records using composite keys (originDSId_objectId).
 *
 * This function merges new records with existing records that were captured
 * before the query executed. The caller is responsible for storing the merged
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param newRecords - New records to merge in
 * @param existingRecords - Existing records captured before query execution (optional, defaults to empty array)
 * @returns Array of all merged records (existing + new unique records)
 */
function mergeResultsIntoAccumulated(outputDS, newRecords, existingRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'merging-results-start',
        outputDSId: outputDS.id,
        existingRecordsCount: existingRecords.length,
        newRecordsCount: newRecords.length
    });
    // Build Set of existing record keys for fast lookup
    const existingKeys = new Set(existingRecords.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'existing-records-check',
        existingRecordsCount: existingRecords.length,
        existingKeysCount: existingKeys.size
    });
    // Filter new records to only include those not already in output DS
    const uniqueNewRecords = newRecords.filter(record => {
        const key = getRecordKey(record, outputDS);
        const isDuplicate = existingKeys.has(key);
        if (isDuplicate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'duplicate-record-skipped',
                key,
                objectId: record.getId()
            });
        }
        return !isDuplicate;
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'deduplication-complete',
        newRecordsCount: newRecords.length,
        uniqueNewRecordsCount: uniqueNewRecords.length,
        duplicatesSkipped: newRecords.length - uniqueNewRecords.length
    });
    // Merge records
    const mergedRecords = [...existingRecords, ...uniqueNewRecords];
    debugLogger.log('RESULTS-MODE', {
        event: 'merge-complete',
        totalRecordsAfterMerge: mergedRecords.length,
        existingCount: existingRecords.length,
        newUniqueCount: uniqueNewRecords.length
    });
    return mergedRecords;
}
/**
 * Removes matching records from widget-level accumulated records.
 * Matches records using composite keys (originDSId_objectId).
 *
 * This function removes records from existing accumulated records that were captured
 * before the query executed. The caller is responsible for storing the remaining
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param recordsToRemove - Records to remove (from query results)
 * @param existingAccumulatedRecords - Existing accumulated records captured before query execution (optional, defaults to empty array)
 * @returns Array of remaining records after removal
 */
function removeResultsFromAccumulated(outputDS, recordsToRemove, existingAccumulatedRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-results-start',
        outputDSId: outputDS.id,
        recordsToRemoveCount: recordsToRemove.length,
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length
    });
    // If no accumulated records, nothing to remove
    if (existingAccumulatedRecords.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-accumulated-records-to-remove',
            outputDSId: outputDS.id
        });
        return [];
    }
    // If no records to remove, return existing records unchanged
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove',
            outputDSId: outputDS.id,
            existingAccumulatedRecordsCount: existingAccumulatedRecords.length
        });
        return existingAccumulatedRecords;
    }
    // Build Set of keys to remove for fast lookup
    const removeKeys = new Set(recordsToRemove.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'remove-keys-built',
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length,
        removeKeysCount: removeKeys.size
    });
    // Filter out records that match keys to remove
    const remainingRecords = [];
    const removedRecords = [];
    existingAccumulatedRecords.forEach(record => {
        var _a, _b, _c, _d;
        const key = getRecordKey(record, outputDS);
        const shouldRemove = removeKeys.has(key);
        if (shouldRemove) {
            removedRecords.push(record);
            debugLogger.log('RESULTS-MODE', {
                event: 'record-marked-for-removal',
                key,
                objectId: record.getId(),
                originDSId: ((_d = (_c = (_b = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record)) === null || _b === void 0 ? void 0 : _b.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.id) || 'unknown'
            });
        }
        else {
            remainingRecords.push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removal-complete',
        recordsRemoved: removedRecords.length,
        remainingRecordsCount: remainingRecords.length,
        recordsToRemoveCount: recordsToRemove.length,
        matchedRecordsCount: removedRecords.length,
        unmatchedRecordsCount: recordsToRemove.length - removedRecords.length
    });
    return remainingRecords;
}
/**
 * Removes records from origin data source selections.
 * Groups records by their origin data source and updates each origin DS's selection separately.
 * This ensures map selection is updated correctly when records come from multiple origin layers.
 * Also removes graphics from graphics layer if using graphics layer highlighting.
 *
 * @param widgetId - The widget ID for publishing messages
 * @param recordsToRemove - Records to remove from selection
 * @param outputDS - The output data source (used for key generation)
 * @param useGraphicsLayer - Whether to remove graphics from graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function removeRecordsFromOriginSelections(widgetId, recordsToRemove, outputDS, useGraphicsLayer, graphicsLayer) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-start',
        widgetId,
        recordsToRemoveCount: recordsToRemove.length,
        outputDSId: outputDS.id,
        useGraphicsLayer: !!useGraphicsLayer,
        hasGraphicsLayer: !!graphicsLayer
    });
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove-from-selection',
            widgetId
        });
        return;
    }
    // Remove from graphics layer if using graphics layer highlighting
    if (useGraphicsLayer && graphicsLayer) {
        const recordIdsToRemove = recordsToRemove.map(record => record.getId());
        debugLogger.log('RESULTS-MODE', {
            event: 'removing-graphics-from-layer',
            widgetId,
            recordIdsCount: recordIdsToRemove.length,
            graphicsLayerId: graphicsLayer.id
        });
        (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__.removeHighlightGraphics)(graphicsLayer, recordIdsToRemove);
    }
    // Group records by their origin data source
    const recordsByOriginDS = new Map();
    recordsToRemove.forEach(record => {
        var _a, _b, _c;
        const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
        let originDS = null;
        if (recordDS) {
            originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
        }
        else {
            // Fallback: try to get origin from outputDS
            originDS = ((_c = outputDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || null;
        }
        if (originDS) {
            if (!recordsByOriginDS.has(originDS)) {
                recordsByOriginDS.set(originDS, []);
            }
            recordsByOriginDS.get(originDS).push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'records-grouped-by-origin',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        recordsByOriginDS: Array.from(recordsByOriginDS.entries()).map(([ds, records]) => ({
            originDSId: ds.id,
            recordCount: records.length
        }))
    });
    // For each origin DS, get current selection and remove matching records
    recordsByOriginDS.forEach((recordsToRemoveForOrigin, originDS) => {
        try {
            // Get current selected records from this origin DS
            const currentSelectedRecords = originDS.getSelectedRecords() || [];
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'processing-origin-ds-removal',
                widgetId,
                originDSId: originDS.id,
                currentSelectedCount: currentSelectedRecords.length,
                recordsToRemoveCount: recordsToRemoveForOrigin.length
            });
            // Build Set of IDs to remove for fast lookup
            const idsToRemove = new Set(recordsToRemoveForOrigin.map(record => record.getId()));
            // Filter out records that match IDs to remove
            const remainingRecords = currentSelectedRecords.filter(record => {
                const recordId = record.getId();
                return !idsToRemove.has(recordId);
            });
            const remainingIds = remainingRecords.map(record => record.getId());
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-filtered',
                widgetId,
                originDSId: originDS.id,
                removedCount: currentSelectedRecords.length - remainingRecords.length,
                remainingCount: remainingRecords.length
            });
            // Update selection in origin DS
            if (typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(remainingIds, remainingRecords);
            }
            // Publish selection change message for this origin DS
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, remainingRecords, [originDS.id]));
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-selection-updated',
                widgetId,
                originDSId: originDS.id,
                remainingRecordsCount: remainingRecords.length,
                messagePublished: true
            });
        }
        catch (error) {
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-error',
                widgetId,
                originDSId: originDS.id,
                error: error instanceof Error ? error.message : 'Unknown error',
                errorStack: error instanceof Error ? error.stack : undefined
            });
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-complete',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        totalRecordsRemoved: recordsToRemove.length
    });
}
/**
 * Clears all records from the accumulated results data source.
 *
 * @param accumulatedDS - The accumulated results data source to clear
 */
function clearAccumulatedResults(accumulatedDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'clearing-accumulated-results',
        accumulatedDSId: accumulatedDS.id
    });
    // Set status to NotReady to clear records
    accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    // Clear any loaded records if possible
    // Note: May need to use DataSourceManager methods depending on ExB API
    debugLogger.log('RESULTS-MODE', {
        event: 'accumulated-results-cleared',
        accumulatedDSId: accumulatedDS.id
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QUERYSIMPLE_SELECTION_EVENT: () => (/* binding */ QUERYSIMPLE_SELECTION_EVENT),
/* harmony export */   clearSelectionInDataSources: () => (/* binding */ clearSelectionInDataSources),
/* harmony export */   dispatchSelectionEvent: () => (/* binding */ dispatchSelectionEvent),
/* harmony export */   findClearResultsButton: () => (/* binding */ findClearResultsButton),
/* harmony export */   getOriginDataSource: () => (/* binding */ getOriginDataSource),
/* harmony export */   publishSelectionMessage: () => (/* binding */ publishSelectionMessage),
/* harmony export */   selectRecordsAndPublish: () => (/* binding */ selectRecordsAndPublish),
/* harmony export */   selectRecordsInDataSources: () => (/* binding */ selectRecordsInDataSources)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing feature selection in QuerySimple widget.
 * Consolidates repeated selection logic to follow DRY principles.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify Widget of selection changes.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
/**
 * Dispatches a custom selection event to the window so the main Widget can track state.
 *
 * @param widgetId - The widget ID
 * @param recordIds - Array of selected record IDs
 * @param outputDS - The output data source
 * @param queryItemConfigId - The config ID of the query that produced these results
 * @param eventManager - Optional EventManager instance for comparison logging (Chunk 7.1)
 */
function dispatchSelectionEvent(widgetId, recordIds, outputDS, queryItemConfigId, eventManager) {
    const originDS = getOriginDataSource(outputDS);
    const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
    debugLogger.log('TASK', {
        event: 'dispatchSelectionEvent',
        widgetId,
        recordCount: recordIds.length,
        outputDsId: outputDS.id,
        queryItemConfigId
    });
    // ============================================================================
    // OLD IMPLEMENTATION (parallel execution) - Chunk 7.1
    // ============================================================================
    const selectionEvent = new CustomEvent(QUERYSIMPLE_SELECTION_EVENT, {
        detail: {
            widgetId,
            recordIds,
            dataSourceId,
            outputDsId: outputDS.id,
            queryItemConfigId
        },
        bubbles: true,
        cancelable: true
    });
    window.dispatchEvent(selectionEvent);
    debugLogger.log('EVENTS', {
        event: 'old-implementation-selection-event-dispatched',
        widgetId,
        recordIdsCount: recordIds.length,
        dataSourceId,
        outputDsId: outputDS.id,
        queryItemConfigId,
        timestamp: Date.now()
    });
    // ============================================================================
    // NEW IMPLEMENTATION (parallel execution) - Chunk 7.1
    if (eventManager) {
        eventManager.dispatchSelectionEvent(widgetId, recordIds, dataSourceId, outputDS.id, queryItemConfigId);
    }
    // COMPARISON LOGGING
    if (eventManager) {
        debugLogger.log('CHUNK-7-COMPARE', {
            event: 'selection-event-dispatch-comparison',
            widgetId,
            oldImplementation: {
                method: 'window.dispatchEvent',
                recordIdsCount: recordIds.length,
                dataSourceId,
                outputDsId: outputDS.id,
                queryItemConfigId
            },
            newImplementation: {
                method: 'EventManager.dispatchSelectionEvent',
                recordIdsCount: recordIds.length,
                dataSourceId
            },
            match: true, // Both dispatch the same event
            timestamp: Date.now()
        });
    }
}
/**
 * Gets the origin data source from an output data source.
 * @param outputDS - The output data source
 * @returns The origin data source, or null if not available
 */
function getOriginDataSource(outputDS) {
    if (!outputDS)
        return null;
    // Try to get origin data sources
    const originDataSources = typeof outputDS.getOriginDataSources === 'function'
        ? outputDS.getOriginDataSources()
        : [];
    if (originDataSources && originDataSources.length > 0) {
        return originDataSources[0];
    }
    // If it doesn't have origin data sources, it might already be an origin data source
    // FeatureLayerDataSource should have a 'layer' property or 'getLayer' method
    if (outputDS.layer || outputDS.getLayer || outputDS.type === 'FeatureLayer') {
        return outputDS;
    }
    return null;
}
/**
 * Selects records in both the origin data source and output data source.
 * This is the standard pattern used throughout the widget for selection.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Optional array of FeatureDataRecord objects for proper highlighting
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsInDataSources(outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (outputDS, recordIds, records, useGraphicsLayer = false, graphicsLayer, mapView) {
        var _a, _b, _c, _d, _e, _f;
        if (!outputDS)
            return;
        const originDS = getOriginDataSource(outputDS);
        // If using graphics layer, add graphics for highlighting
        if (useGraphicsLayer && graphicsLayer && mapView && records && records.length > 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-graphics-layer',
                recordIdsCount: recordIds.length,
                recordsCount: records.length,
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.addHighlightGraphics)(graphicsLayer, records, mapView);
            // Still select in data source for state management (but layer selection won't show if layer is off)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        else {
            // Original behavior: use layer selection
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-layer-selection',
                recordIdsCount: recordIds.length,
                useGraphicsLayer,
                hasGraphicsLayer: !!graphicsLayer,
                hasMapView: !!mapView,
                timestamp: Date.now()
            });
            // Select in origin data source (the actual layer)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                // Log layer state right before selection to see what's available when selection works
                const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
                if (layer) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'selectRecordsByIds-layer-state',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        hasLayerMap: !!layer.map,
                        hasLayerView: !!layer.view,
                        hasLayerParent: !!layer.parent,
                        parentType: ((_c = layer.parent) === null || _c === void 0 ? void 0 : _c.type) || 'none',
                        parentHasMap: !!((_d = layer.parent) === null || _d === void 0 ? void 0 : _d.map),
                        parentHasView: !!((_e = layer.parent) === null || _e === void 0 ? void 0 : _e.view),
                        parentHasViews: !!((_f = layer.parent) === null || _f === void 0 ? void 0 : _f.views),
                        timestamp: Date.now()
                    });
                }
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        // Always update outputDS for widget's internal state
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, records);
        }
    });
}
/**
 * Clears the `data_s` parameter from the URL hash.
 * Experience Builder automatically adds `data_s` when selections are made,
 * but doesn't remove it when selections are cleared, causing "dirty hash" issues.
 *
 * This function ensures the hash is clean when selections are cleared.
 */
function clearDataSParameterFromHash() {
    const hash = window.location.hash.substring(1);
    if (!hash)
        return;
    const urlParams = new URLSearchParams(hash);
    if (urlParams.has('data_s')) {
        urlParams.delete('data_s');
        const newHash = urlParams.toString();
        debugLogger.log('HASH', {
            event: 'clearDataSParameterFromHash',
            hadDataS: true,
            newHash: newHash ? `#${newHash}` : '(empty)',
            timestamp: Date.now()
        });
        // Update the URL without triggering a reload
        // Always preserve pathname and query string, only update hash
        window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
    }
}
/**
 * Clears selection in both the origin data source and output data source.
 * Optionally clears graphics layer if using graphics layer mode.
 * Also clears the `data_s` parameter from the URL hash to prevent "dirty hash" issues.
 *
 * @param widgetId - The widget ID (needed to publish message)
 * @param outputDS - The output data source
 * @param useGraphicsLayer - Whether to clear graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function clearSelectionInDataSources(widgetId_1, outputDS_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, useGraphicsLayer = false, graphicsLayer) {
        // Clear graphics layer if using graphics layer mode
        if (useGraphicsLayer && graphicsLayer) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'clearSelectionInDataSources-clearing-graphics-layer',
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.clearGraphicsLayer)(graphicsLayer);
        }
        // Clear data source selection for state management
        yield selectRecordsInDataSources(outputDS, [], undefined, false);
        // Publish the empty selection message so the Map selection (blue boxes) clears
        if (outputDS) {
            publishSelectionMessage(widgetId, [], outputDS, true);
        }
        // Clear data_s parameter from hash to prevent dirty hash
        // Experience Builder adds data_s when selections are made but doesn't remove it when cleared
        clearDataSParameterFromHash();
    });
}
/**
 * Publishes a selection change message for the given records and data sources.
 *
 * @param widgetId - The widget ID
 * @param records - Array of FeatureDataRecord objects (empty array to clear)
 * @param outputDS - The output data source
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS = false) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    if (originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [originDS.id]));
    }
    else if (alsoPublishToOutputDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
    // Optionally publish to outputDS as well (for some edge cases)
    if (alsoPublishToOutputDS && originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
}
/**
 * Selects records and publishes the selection message in one call.
 * This is the most common pattern - selecting records and notifying the map.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Array of FeatureDataRecord objects for proper highlighting
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsAndPublish(widgetId_1, outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, recordIds, records, alsoPublishToOutputDS = false, useGraphicsLayer = false, graphicsLayer, mapView) {
        yield selectRecordsInDataSources(outputDS, recordIds, records, useGraphicsLayer, graphicsLayer, mapView);
        publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS);
    });
}
/**
 * Finds the "Clear results" button in the DOM.
 * Used when programmatically triggering the clear action.
 *
 * @returns The clear button element, or null if not found
 */
function findClearResultsButton() {
    // Hardened: Prioritize the one in the results header, fallback to any
    return (document.querySelector('.query-result__header button[aria-label="Clear results"]') ||
        document.querySelector('button[aria-label="Clear results"]'));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleList: () => (/* binding */ SimpleList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    flex: 1 1 ${isAutoHeight ? 'auto' : 0};
    overflow: auto;
    max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      flex-direction: column;
      .list-items {
        position: relative;
        flex-direction: column;
      }

      .feature-info-component {
        width: 100%;
      }

      .query-result-item + .query-result-item {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    .list-items {
      display: flex;
    }
  `;
};
function SimpleList(props) {
    const { widgetId, outputDS, queryItem, records, direction, onEscape, onSelectChange, onRemove, expandByDefault, itemExpandStates, removedRecordIds, onRenderDone } = props;
    const [popupTemplate, setPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_5__.useAutoHeight)();
    const resultContainerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    // Filter out removed records
    const filteredRecords = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (records === null || records === void 0 ? void 0 : records.filter(record => !(removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.has(record.getId())))) || [];
    }, [records, removedRecordIds]);
    // Notify parent when records are rendered (for auto-switch logic)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (onRenderDone && filteredRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'SimpleList-onRenderDone-called',
                widgetId,
                queryItemConfigId: queryItem.configId,
                filteredRecordsCount: filteredRecords.length,
                totalRecordsCount: records.length,
                removedRecordIdsCount: (removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.size) || 0,
                timestamp: Date.now()
            });
            onRenderDone({ dataItems: filteredRecords });
        }
    }, [filteredRecords, onRenderDone, widgetId, queryItem.configId, records.length, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_4__.getPopupTemplate)(outputDS, queryItem).then(rs => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_2__.ListDirection.Vertical }), css: getStyle(isAutoHeight), ref: resultContainerRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-items px-4 py-1', role: 'listbox', children: filteredRecords.map((dataItem) => {
                const recordId = dataItem.getId();
                // Use individual state from map if available, otherwise fall back to expandByDefault
                const individualExpandState = itemExpandStates === null || itemExpandStates === void 0 ? void 0 : itemExpandStates.get(recordId);
                const expandByDefaultValue = individualExpandState !== undefined ? individualExpandState : (expandByDefault !== null && expandByDefault !== void 0 ? expandByDefault : true);
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_3__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: expandByDefaultValue, onClick: onSelectChange, onRemove: onRemove }, recordId));
            }) }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'QuerySimple',
    reset: 'Reset',
    searchLayer: 'Search Layer',
    apply: 'Search',
    noDataAvailable: 'Error in loading data',
    noQueryItem: 'No query',
    newQueryHint: 'Add content by clicking the "{label}" button on the configuration panel',
    attributeFilter: 'Attribute filter',
    spatialFilter: 'Spatial filter',
    spatialFilterType_CurrentMapExtent: 'Current map extent',
    spatialFilterType_InteractiveDrawMode: 'Drawn graphic',
    results: 'Results',
    featuresDisplayed: 'Features displayed',
    clearResult: 'Clear results',
    checkResult: 'Check results',
    mapMustBeVisible: 'Map must be visible',
    chooseFilterType: 'Choose the filter type',
    chooseGeometryType: 'Choose the geometry type',
    clearDrawing: 'Clear the graphic when applying',
    featureFromDs: 'Selecting features from data source',
    featureFromMap: 'Geometries from a map',
    chooseFilterLayer: 'Choose a filter layer',
    selectedRecords: '{num} records are selected for the filter',
    spatialNotAvailable: 'Spatial filter is not available here.',
    spatialNotAvailableDesc: 'Spatial filter is not supported for a data source that already contains a spatial query.',
    preconfigured: 'Preconfigured',
    runtime: 'Runtime',
    selectLoaded: 'Select loaded',
    retrieving: 'Retrieving query results...',
    zoomToSelected: 'Zoom to selected',
    queryTab: 'Query',
    resultsTab: 'Results',
    expandAll: 'Expand all',
    collapseAll: 'Collapse all',
    addToMap: 'Add to map',
    resultsMode: 'Results mode',
    createNewResults: 'Create new results',
    addToCurrentResults: 'Add to current results',
    removeFromCurrentResults: 'Remove from current results',
    resultsModeDisabledRemove: 'Remove from current results (no accumulated results)',
    resultsModeDesc: 'Controls how query results are combined:\n New: Each query replaces previous results\n Add: New results are added to existing results\n Remove: Matching results are removed from existing results',
    resultsModeNew: 'New',
    resultsModeAdd: 'Add',
    resultsModeRemove: 'Remove'
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx":
/*!****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoHeight: () => (/* binding */ useAutoHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/** @jsx jsx */



function useAutoHeight() {
    const layoutInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_widget_context__WEBPACK_IMPORTED_MODULE_2__.QueryWidgetContext);
    let layoutId;
    let layoutItemId;
    if (layoutInfo.includes(':')) {
        const r = layoutInfo.split(':');
        layoutId = r[0];
        layoutItemId = r[1];
    }
    const isAuto = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c, _d;
        const layoutItem = (_b = (_a = state.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        return ((_d = (_c = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _c === void 0 ? void 0 : _c.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    });
    return isAuto;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-config.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getWidgetRuntimeDataMap: () => (/* binding */ getWidgetRuntimeDataMap)
/* harmony export */ });
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__);






const getWidgetRuntimeDataMap = () => ({
    iconMap: {
        iconQuery: __webpack_require__(/*! ../../icon.svg */ "./your-extensions/widgets/query-simple/icon.svg"),
        iconWarning: (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default()),
        iconError: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default()),
        arrowNavBack: (jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()),
        arrowRight: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        toolDelete: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        iconMore: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default())
    }
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryWidgetContext: () => (/* binding */ QueryWidgetContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryWidgetContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(null);


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   zoomToRecords: () => (/* binding */ zoomToRecords)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Shared zoom utilities for QuerySimple widget.
 *
 * Provides pure functions for zooming to feature records that can be used
 * by both React hooks and data actions.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
const DEFAULT_PADDING = {
    left: 50,
    right: 50,
    top: 50,
    bottom: 50
};
/**
 * Pure function to zoom to feature records with padding.
 *
 * Extracts geometries from records, calculates extent, and zooms the map view
 * using mapView.goTo() with configurable padding. Handles both single and
 * multiple geometries by calculating union extent when needed.
 *
 * @param mapView - The map view to zoom
 * @param records - Array of feature data records to zoom to
 * @param options - Optional zoom options including padding
 * @returns Promise that resolves when zoom completes
 */
function zoomToRecords(mapView, records, options) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b;
        if (!mapView || !records || records.length === 0) {
            return;
        }
        const padding = (options === null || options === void 0 ? void 0 : options.padding) || DEFAULT_PADDING;
        try {
            // Extract geometries from records
            const geometries = records
                .map(record => record.getJSAPIGeometry())
                .filter(geom => geom != null);
            if (geometries.length === 0) {
                return;
            }
            let extent = null;
            if (geometries.length === 1) {
                // Single geometry - get its extent
                extent = geometries[0].extent || ((_b = (_a = geometries[0]).getExtent) === null || _b === void 0 ? void 0 : _b.call(_a));
            }
            else {
                // Multiple geometries - calculate union extent
                const extents = geometries
                    .map(geom => { var _a, _b; return geom.extent || ((_b = (_a = geom).getExtent) === null || _b === void 0 ? void 0 : _b.call(_a)); })
                    .filter(e => e != null);
                if (extents.length > 0) {
                    extent = extents[0].clone();
                    for (let i = 1; i < extents.length; i++) {
                        extent = extent.union(extents[i]);
                    }
                }
            }
            if (extent) {
                yield mapView.goTo(extent, { padding });
            }
        }
        catch (error) {
            debugLogger.log('ZOOM', {
                event: 'zoom-goTo-error',
                error: error instanceof Error ? error.message : String(error),
                recordsCount: records.length
            });
            throw error;
        }
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.0.0',
                description: 'The first version.',
                upgrader: (oldConfig) => {
                    return oldConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version.ts":
/*!*************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WIDGET_VERSION: () => (/* binding */ WIDGET_VERSION)
/* harmony export */ });
/**
 * Widget version number.
 * Base version matches Experience Builder version (1.19.0).
 * Release number increments on major changes (001, 002, 003, ...).
 * Minor version increments on smaller fixes between major releases (r015.1, r015.2, ...).
 *
 * To increment:
 * - Major change: Update RELEASE_NUMBER (e.g., 015 -> 016) and reset MINOR_VERSION to 0
 * - Minor fix: Increment MINOR_VERSION (e.g., 1 -> 2) while keeping same RELEASE_NUMBER
 */
const BASE_VERSION = '1.19.0';
const RELEASE_NUMBER = '018'; // Increment on major changes (001, 002, 003, ...)
const MINOR_VERSION = '70'; // Increment on minor fixes between major releases (1, 2, 3, ...)
const WIDGET_VERSION = MINOR_VERSION && Number(MINOR_VERSION) > 0
    ? `${BASE_VERSION}-r${RELEASE_NUMBER}.${MINOR_VERSION}`
    : `${BASE_VERSION}-r${RELEASE_NUMBER}`;


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common.ts":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* reexport safe */ _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__.DataSourceTip),
/* harmony export */   DialogPanel: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.DialogPanel),
/* harmony export */   EntityStatusType: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.ErrorMessage),
/* harmony export */   StateHolder: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StateHolder),
/* harmony export */   StatusIndicator: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StatusIndicator),
/* harmony export */   createGetI18nMessage: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.createGetI18nMessage),
/* harmony export */   createHelperSimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createQuerySimpleDebugLogger),
/* harmony export */   getFieldInfosInPopupContent: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.toggleItemInArray),
/* harmony export */   useDataSourceExists: () => (/* reexport safe */ _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__.useDataSourceExists)
/* harmony export */ });
/* harmony import */ var _common_common_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common/common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common/utils */ "./your-extensions/widgets/shared-code/common/utils.tsx");
/* harmony import */ var _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common/use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");
/* harmony import */ var _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common/data-source-tip */ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx");
/* harmony import */ var _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common/debug-logger */ "./your-extensions/widgets/shared-code/common/debug-logger.ts");
/**
 * Shared common utilities and components for Experience Builder widgets
 *
 * This module exports common functionality that can be shared between
 * query-simple, helper-simple, and other custom widgets.
 *
 * This is the entry point for 'widgets/shared-code/common'
 */







/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/common-components.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/common-components.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DialogPanel: () => (/* binding */ DialogPanel),
/* harmony export */   EntityStatusType: () => (/* binding */ EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* binding */ ErrorMessage),
/* harmony export */   StateHolder: () => (/* binding */ StateHolder),
/* harmony export */   StatusIndicator: () => (/* binding */ StatusIndicator)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__);

/** @jsx jsx */




const { useState } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React;
/**
 * A simple Functional Component storing some States that are commonly used
 */
const StateHolder = (props) => {
    const { initState = {}, children } = props;
    const defaultStateMap = {
        visible: true,
        refContainer: null
    };
    const useStateMap = {
        visible: useState('visible' in initState ? initState.visible : defaultStateMap.visible),
        refContainer: useState('refContainer' in initState ? initState.refContainer : defaultStateMap.refContainer),
        customData: useState(Object.assign({}, initState.customData))
    };
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: children(useStateMap) });
};
/**
 * A dialog popup
 */
const DialogPanel = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, panelVisible, setPanelVisible, getI18nMessage, isModal = true, title = getI18nMessage('queryMessage'), bodyContent = '', hasHeader = true, hasFooter = true } = props;
    const toggle = () => { setPanelVisible(false); };
    const getContent = () => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [hasHeader &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.PanelHeader, { className: 'py-2', title: title, onClose: toggle }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalBody, { children: bodyContent }), hasFooter &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalFooter, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { onClick: toggle, children: getI18nMessage('ok') }) })] });
    const generalClassName = 'ui-unit-dialog-panel';
    const renderModalContent = () => {
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Modal, { className: generalClassName, isOpen: panelVisible, toggle: toggle, backdrop: 'static', children: getContent() }));
    };
    const renderNonModalContent = () => {
        const getStyle = () => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      &.ui-unit-dialog-panel.modal-dialog {
        margin: 0;
        width: 100%;
        .modal-content {
          background-color: ${theme.ref.palette.neutral[600]};
          color: ${theme.ref.palette.black};
          font-size: .75rem;
          font-weight: 400;
          border: none;
          .panel-header {
            font-size: .8125rem;
            padding: .625rem;
          }
          .modal-body {
            padding: 0 .625rem .75rem;
            white-space: normal;
          }
        }
      }
    `;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${generalClassName} modal-dialog ${panelVisible ? '' : 'collapse'}`, css: getStyle(), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'modal-content', children: getContent() }) }));
    };
    return isModal ? renderModalContent() : renderNonModalContent();
});
var EntityStatusType;
(function (EntityStatusType) {
    EntityStatusType["None"] = "";
    EntityStatusType["Init"] = "init";
    EntityStatusType["Loading"] = "loading";
    EntityStatusType["Loaded"] = "loaded";
    EntityStatusType["Warning"] = "warning";
    EntityStatusType["Error"] = "error";
})(EntityStatusType || (EntityStatusType = {}));
/**
 * An animatable icon representing status
 */
const StatusIndicator = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, className, title, statusType } = props;
    const getStyle = () => {
        var _a, _b, _c, _d;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    &.ui-unit-status-indicator {
      display: flex;
      &.ui-unit-status-indicator_status-type-loading {
        &:before {
          @keyframes loading {
            0% {transform: rotate(0deg); };
            100% {transform: rotate(360deg)};
          }
          content: '';
          width: 1rem;
          height: 1rem;
          display: block;
          border: 1px solid ${(_b = (_a = theme === null || theme === void 0 ? void 0 : theme.ref.palette) === null || _a === void 0 ? void 0 : _a.neutral) === null || _b === void 0 ? void 0 : _b[500]};
          border-radius: 50%;
          border-top: 1px solid ${(_d = (_c = theme === null || theme === void 0 ? void 0 : theme.sys.color) === null || _c === void 0 ? void 0 : _c.primary) === null || _d === void 0 ? void 0 : _d.main};
          box-sizing: border-box;
          animation: loading 2s infinite linear;
          margin-right: .25rem;
        }
      }
    }
  `;
    };
    return (statusType &&
        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${className !== null && className !== void 0 ? className : ''} ui-unit-status-indicator ui-unit-status-indicator_status-type-${statusType}`, title: title, css: getStyle() }));
});
/**
 * Simple error message component for displaying user-facing errors.
 * Use DataSourceTip for data source-related errors.
 */
const ErrorMessage = (props) => {
    const { error, className = '', onDismiss } = props;
    if (!error) {
        return null;
    }
    const errorStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    align-items: center;
    padding: 0.5rem;
    margin: 0.5rem 0;
    background-color: var(--sys-color-error-light);
    color: var(--sys-color-error-dark);
    border-radius: 4px;
    font-size: 0.875rem;
    gap: 0.5rem;
    
    .error-icon {
      flex-shrink: 0;
    }
    
    .error-text {
      flex: 1;
    }
    
    .error-dismiss {
      flex-shrink: 0;
      cursor: pointer;
      padding: 0.25rem;
      &:hover {
        opacity: 0.7;
      }
    }
  `;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: `error-message ${className}`, css: errorStyle, role: "alert", children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default()), className: "error-icon", size: "sm" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "error-text", children: error }), onDismiss && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", type: "tertiary", icon: true, onClick: onDismiss, className: "error-dismiss", "aria-label": "Dismiss error", children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (__webpack_require__(/*! jimu-icons/svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg")["default"]), size: "sm" }) }))] }));
};


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/data-source-tip.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* binding */ DataSourceTip)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _common_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _use_ds_exists__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");

/** @jsx jsx */






/**
 * Show icon and message if the data source doesn't work.
 * @param props
 * @returns
 */
function DataSourceTip(props) {
    var _a, _b, _c;
    const { widgetId, useDataSource, onStatusChange, onDataSourceCreated, showMessage = false } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages);
    const dsExists = (0,_use_ds_exists__WEBPACK_IMPORTED_MODULE_6__.useDataSourceExists)({ widgetId, useDataSourceId: useDataSource.dataSourceId });
    const [dsStatus, setDsStatus] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const handleDsInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info) => {
        if (info) {
            const { status, instanceStatus } = info;
            if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotCreated) {
                setDsStatus('creating');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.CreateError || status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.LoadError) {
                setDsStatus('error');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady) {
                setDsStatus('warning');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else {
                setDsStatus(null);
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(true);
            }
        }
    }, [onStatusChange]);
    const handleDsCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        setDataSource(ds);
        onDataSourceCreated === null || onDataSourceCreated === void 0 ? void 0 : onDataSourceCreated(ds);
    }, [onDataSourceCreated]);
    const handleDsCreateFailed = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setDataSource(null);
        setDsStatus('error');
        onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
    }, [onStatusChange]);
    let statusIcon;
    let statusMsg;
    let color;
    if (dsStatus === 'creating') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('loading');
    }
    else if (!dsExists || dsStatus === 'error') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('dataSourceCreateError');
        color = 'var(--sys-color-error-main)';
    }
    else if (dsStatus === 'warning') {
        let label = '';
        const originDs = (_a = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (originDs) {
            label = originDs.getLabel() || originDs.getDataSourceJson().sourceLabel;
        }
        else if (dataSource) {
            label = dataSource.getLabel() || dataSource.getDataSourceJson().label;
        }
        const widgetId = jimu_core__WEBPACK_IMPORTED_MODULE_1__.appConfigUtils.getWidgetIdByOutputDataSource(useDataSource);
        const appState = ((_b = window === null || window === void 0 ? void 0 : window.jimuConfig) === null || _b === void 0 ? void 0 : _b.isBuilder)
            ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState().appStateInBuilder
            : (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState();
        const widgetLabel = (_c = appState.appConfig.widgets[widgetId]) === null || _c === void 0 ? void 0 : _c.label;
        color = 'var(--sys-color-warning-dark)';
        statusIcon = (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default());
        statusMsg = getI18nMessage('outputDataIsNotGenerated', {
            outputDsLabel: label !== null && label !== void 0 ? label : '',
            sourceWidgetName: widgetLabel !== null && widgetLabel !== void 0 ? widgetLabel : ''
        });
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useDataSource, onDataSourceInfoChange: handleDsInfoChange, onDataSourceCreated: handleDsCreated, onCreateDataSourceFailed: handleDsCreateFailed })), dsStatus === 'creating' && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common_components__WEBPACK_IMPORTED_MODULE_3__.StatusIndicator, { statusType: _common_components__WEBPACK_IMPORTED_MODULE_3__.EntityStatusType.Loading, title: statusMsg }), (!dsExists || dsStatus === 'error' || dsStatus === 'warning') && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: statusMsg, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: statusIcon, color: color }) }) }), showMessage && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'status-message', children: statusMsg })] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/debug-logger.ts":
/*!********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/debug-logger.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createHelperSimpleDebugLogger: () => (/* binding */ createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* binding */ createQuerySimpleDebugLogger)
/* harmony export */ });
/**
 * Configurable debug logging utility for Experience Builder widgets
 *
 * Usage:
 * - Add ?debug=all to URL to see all debug logs
 * - Add ?debug=HASH,FORM to see specific feature logs
 * - Add ?debug=false to disable all debug logs
 *
 * Features (QuerySimple):
 * - BUG: Known bugs/issues (always logs, even if debug=false) - Use format: bugId, category, description
 * - HASH: Hash parameter processing
 * - FORM: Query form interactions
 * - TASK: Query task management
 * - ZOOM: Zoom behavior
 * - MAP-EXTENT: Map extent changes
 * - DATA-ACTION: Data action execution (Add to Map, etc.)
 * - GROUP: Query grouping and dropdown selection
 * - SELECTION: Selection detection and identify popup tracking
 * - WIDGET-STATE: Widget lifecycle events (open/close handshake)
 * - RESTORE: Selection restoration when widget opens
 * - RESULTS-MODE: Results management mode selection (Create new, Add to, Remove from)
 * - EXPAND-COLLAPSE: Expand/collapse state management for result items
 * - GRAPHICS-LAYER: Graphics layer highlighting (independent of layer visibility)
 * - EVENTS: Event listener setup/cleanup and custom event dispatching
 *
 * Temporary Migration Features (will be removed after migration complete):
 * - CHUNK-1-COMPARE: Chunk 1 (URL Parameter) comparison logs
 * - CHUNK-1-MISMATCH: Chunk 1 mismatch warnings
 * - CHUNK-2-COMPARE: Chunk 2 (Visibility) comparison logs
 * - CHUNK-2-MISMATCH: Chunk 2 mismatch warnings
 * - CHUNK-3-COMPARE: Chunk 3 (Selection/Restoration) comparison logs
 * - CHUNK-3-DECISION: Chunk 3 decision point logs
 * - CHUNK-3-FALLBACK: Chunk 3 fallback logic logs
 * - CHUNK-4-COMPARE: Chunk 4 (Graphics Layer) comparison logs
 * - CHUNK-5-COMPARE: Chunk 5 (Accumulated Records) comparison logs
 * - CHUNK-6-COMPARE: Chunk 6 (Map View) comparison logs
 * - CHUNK-6-MISMATCH: Chunk 6 mismatch warnings
 * - CHUNK-7-COMPARE: Chunk 7 (Events) comparison logs
 *
 * Features (HelperSimple):
 * - HASH: Hash parameter monitoring and widget opening
 * - SELECTION: Selection tracking from QuerySimple
 * - WIDGET-STATE: Widget state handshake (open/close events)
 * - RESTORE: Selection restoration attempts and results
 */
class DebugLogger {
    constructor(options) {
        this.enabledFeatures = new Set();
        this.initialized = false;
        this.widgetName = options.widgetName;
        this.features = options.features;
    }
    initialize() {
        if (this.initialized)
            return;
        // Check URL parameters (both current window and parent for iframes)
        let urlParams = new URLSearchParams(window.location.search);
        let debugValue = urlParams.get('debug');
        // If not found in current window, check parent (needed for ExB iframes)
        if (debugValue === null && window.parent !== window) {
            try {
                urlParams = new URLSearchParams(window.parent.location.search);
                debugValue = urlParams.get('debug');
            }
            catch (e) {
                // Cross-origin restriction might prevent access to parent location
            }
        }
        if (debugValue === 'false') {
            // Explicitly disabled
            this.initialized = true;
            return;
        }
        if (debugValue === 'all') {
            // Enable all features only if explicitly set to 'all'
            this.features.forEach(feature => {
                if (feature !== 'all' && feature !== 'false') {
                    this.enabledFeatures.add(feature);
                }
            });
            console.log(`[${this.widgetName}-DEBUG] Enabled ALL features:`, Array.from(this.enabledFeatures));
        }
        else if (debugValue !== null) {
            // Parse comma-separated feature list
            const requestedFeatures = debugValue.split(',').map(f => f.trim().toUpperCase());
            requestedFeatures.forEach(feature => {
                if (feature.toUpperCase() === 'ALL') {
                    // Enable all features for this widget
                    this.features.forEach(f => {
                        if (f !== 'all' && f !== 'false') {
                            this.enabledFeatures.add(f);
                        }
                    });
                }
                else if (this.features.includes(feature)) {
                    this.enabledFeatures.add(feature);
                }
            });
        }
        this.initialized = true;
    }
    isEnabled(feature) {
        this.initialize();
        // BUG level always enabled, regardless of debug switches (even if debug=false)
        if (feature === 'BUG') {
            return true;
        }
        if (this.enabledFeatures.has('all')) {
            return true;
        }
        return this.enabledFeatures.has(feature);
    }
    log(feature, data) {
        // BUG level always logs, even if debug=false
        if (feature === 'BUG') {
            const logData = Object.assign({ feature: 'BUG', bugId: data.bugId || 'UNKNOWN', category: data.category || 'GENERAL', timestamp: new Date().toISOString() }, data);
            // Use console.warn with emoji format to make bugs stand out
            console.warn(`[${this.widgetName.toUpperCase()}  BUG]`, JSON.stringify(logData, null, 2));
            return;
        }
        // Regular feature logging (existing behavior)
        if (!this.isEnabled(feature)) {
            return;
        }
        const logData = Object.assign({ feature, timestamp: new Date().toISOString() }, data);
        console.log(`[${this.widgetName.toUpperCase()}-${feature}]`, JSON.stringify(logData, null, 2));
    }
    getConfig() {
        this.initialize();
        const urlParams = new URLSearchParams(window.location.search);
        const debugValue = urlParams.get('debug');
        return {
            enabledFeatures: Array.from(this.enabledFeatures),
            debugValue
        };
    }
}
/**
 * Creates a debug logger instance for QuerySimple widget
 */
function createQuerySimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'QUERYSIMPLE',
        features: [
            'HASH', 'FORM', 'TASK', 'ZOOM', 'MAP-EXTENT', 'DATA-ACTION', 'GROUP',
            'SELECTION', 'WIDGET-STATE', 'RESTORE', 'RESULTS-MODE', 'EXPAND-COLLAPSE', 'GRAPHICS-LAYER', 'EVENTS',
            // Temporary migration features (will be removed after migration complete)
            'CHUNK-1-COMPARE', 'CHUNK-1-MISMATCH', 'CHUNK-2-COMPARE', 'CHUNK-2-MISMATCH', 'CHUNK-3-COMPARE', 'CHUNK-3-DECISION', 'CHUNK-3-FALLBACK',
            'CHUNK-4-COMPARE', 'CHUNK-5-COMPARE', 'CHUNK-6-COMPARE', 'CHUNK-6-MISMATCH', 'CHUNK-7-COMPARE'
        ]
    });
}
/**
 * Creates a debug logger instance for HelperSimple widget
 */
function createHelperSimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'HELPERSIMPLE',
        features: ['HASH', 'SELECTION', 'WIDGET-STATE', 'RESTORE']
    });
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx":
/*!**********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/use-ds-exists.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useDataSourceExists: () => (/* binding */ useDataSourceExists)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

function useDataSourceExists(props) {
    const { widgetId, useDataSourceId } = props;
    const exists = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        let appConfig;
        if (window.jimuConfig.isBuilder) {
            appConfig = state.appStateInBuilder.appConfig;
        }
        else {
            appConfig = state.appConfig;
        }
        const useDataSources = (_a = appConfig.widgets[widgetId].useDataSources) !== null && _a !== void 0 ? _a : [];
        return useDataSources.some(useDs => useDs.dataSourceId === useDataSourceId);
    });
    return exists;
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/utils.tsx":
/*!**************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/utils.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createGetI18nMessage: () => (/* binding */ createGetI18nMessage),
/* harmony export */   getFieldInfosInPopupContent: () => (/* binding */ getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* binding */ toggleItemInArray)
/* harmony export */ });
/**
 * Toggle items in an array
 */
const toggleItemInArray = (item, items = []) => items.includes(item) ? items.filter(i => i !== item) : [...items, item];
/**
 * A factory to create a function of getting i18n message
 */
function createGetI18nMessage(options) {
    const { intl, defaultMessages = {} } = options || {};
    const getI18nMessage = (id, options) => {
        const { messages, values } = options || {};
        return intl.formatMessage({ id, defaultMessage: (messages || defaultMessages)[id] }, values);
    };
    return getI18nMessage;
}
function getFieldInfosInPopupContent(popupInfo) {
    var _a;
    const result = [];
    if (((_a = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.popupElements) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        popupInfo.popupElements.forEach(element => {
            var _a;
            if (element.type === 'fields' && ((_a = element.fieldInfos) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                result.push(...element.fieldInfos);
            }
        });
    }
    return result;
}


/***/ }),

/***/ "@emotion/react/jsx-runtime":
/*!************************************!*\
  !*** external "jimu-core/emotion" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "react":
/*!**********************************!*\
  !*** external "jimu-core/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_react__;

/***/ }),

/***/ "widgets/shared-code/common":
/*!*********************************************!*\
  !*** external "widgets/shared-code/common" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/query-simple/src/version-manager.ts");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-list-inline */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");
/* harmony import */ var _hooks_use_url_consumption__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./hooks/use-url-consumption */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts");
/* harmony import */ var _hooks_use_widget_visibility__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./hooks/use-widget-visibility */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts");
/* harmony import */ var _hooks_use_map_view__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./hooks/use-map-view */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts");
/* harmony import */ var _hooks_use_graphics_layer__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./hooks/use-graphics-layer */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts");
/* harmony import */ var _hooks_use_accumulated_records__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./hooks/use-accumulated-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts");
/* harmony import */ var _hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./hooks/use-event-handling */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-event-handling.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */













// Chunk 1: URL Parameter Consumption Manager (r018.8)

// Chunk 2: Widget Visibility Engine Manager (r018.13) - Step 2.3: Switch to manager

// Chunk 6: Map View Management Manager (r018.14) - Step 6.1: Add manager without integration

// Chunk 4: Graphics Layer Management Manager (r018.24) - Step 4.2: Parallel execution

// Chunk 5: Accumulated Records Management Manager (r018.26) - Step 5.1: Add manager without integration

// Chunk 7: Event Handling Manager (r018.59) - Step 7.1: Create Event Manager

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__.createQuerySimpleDebugLogger)();
const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
// Event constants moved to EventManager (r018.59 - Chunk 7.1)
/**
 * QuerySimple Widget
 *
 * A high-performance query widget for ArcGIS Experience Builder that provides:
 * - Universal SQL optimization for database index usage
 * - Dual-mode deep linking (hash fragments and query strings)
 * - Results accumulation across multiple queries
 * - Selection persistence and restoration
 * - Graphics layer highlighting for map visualization
 *
 * Architecture:
 * This widget follows a "Hook & Shell" pattern where complex logic is extracted into
 * manager classes (UrlConsumptionManager, WidgetVisibilityManager, MapViewManager)
 * to keep the main widget class clean and maintainable.
 *
 * @since 1.19.0-r018.18
 * @see {@link UrlConsumptionManager} for URL parameter handling
 * @see {@link WidgetVisibilityManager} for panel visibility detection
 * @see {@link MapViewManager} for map view reference management
 */
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor() {
        super(...arguments);
        // Chunk 1: URL Parameter Consumption Manager (r018.8)
        this.urlConsumptionManager = new _hooks_use_url_consumption__WEBPACK_IMPORTED_MODULE_14__.UrlConsumptionManager();
        // Chunk 2: Widget Visibility Engine Manager (r018.13) - Step 2.3: Switch to manager
        this.visibilityManager = new _hooks_use_widget_visibility__WEBPACK_IMPORTED_MODULE_15__.WidgetVisibilityManager();
        // Refs must be declared before managers that use them
        this.widgetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.graphicsLayerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.mapViewRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        // Chunk 6: Map View Management Manager (r018.16) - Step 6.3: Switch to manager
        this.mapViewManager = new _hooks_use_map_view__WEBPACK_IMPORTED_MODULE_16__.MapViewManager(this.mapViewRef);
        // Chunk 4: Graphics Layer Management Manager (r018.24) - Step 4.2: Parallel execution
        this.graphicsLayerManager = new _hooks_use_graphics_layer__WEBPACK_IMPORTED_MODULE_17__.GraphicsLayerManager(this.graphicsLayerRef, this.mapViewRef);
        // Chunk 5: Accumulated Records Management Manager (r018.26) - Step 5.1: Add manager without integration
        this.accumulatedRecordsManager = new _hooks_use_accumulated_records__WEBPACK_IMPORTED_MODULE_18__.AccumulatedRecordsManager();
        // Chunk 7: Event Handling Manager (r018.59) - Step 7.1: Create Event Manager
        this.eventManager = new _hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__.EventManager();
        // Track processed hash parameters to prevent re-execution when switching queries
        // Key: "shortId:value" (e.g., "pin:2223059013")
        this.processedHashParamsRef = new Set();
        this.state = {
            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection, // Default mode
            activeTab: 'query'
        };
        /**
         * Handles tab change between "Query" and "Results" tabs.
         *
         * @param activeTab - The tab to switch to ('query' or 'results')
         *
         * @since 1.19.0-r017.0
         */
        this.handleTabChange = (activeTab) => {
            this.setState({ activeTab });
        };
        /**
         * Handles HelperSimple's open widget event.
         * QuerySimple should only process hash parameters when HelperSimple explicitly opens the widget.
         * This ensures HelperSimple remains the orchestrator and prevents autonomous hash processing.
         */
        this.handleOpenWidgetEvent = (event) => {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            const { id } = this.props;
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-handleopenwidgetevent-received',
                widgetId: id,
                eventWidgetId: (_a = event.detail) === null || _a === void 0 ? void 0 : _a.widgetId,
                matches: ((_b = event.detail) === null || _b === void 0 ? void 0 : _b.widgetId) === id,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.shortId,
                    initialQueryValueValue: (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.value,
                    processedHashParams: Array.from(this.processedHashParamsRef),
                    currentUrlHash: window.location.hash.substring(1)
                },
                timestamp: Date.now()
            });
            // Only process if this event is for our widget
            if (((_e = event.detail) === null || _e === void 0 ? void 0 : _e.widgetId) !== id) {
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-handleopenwidgetevent-ignored-wrong-widget',
                    widgetId: id,
                    eventWidgetId: (_f = event.detail) === null || _f === void 0 ? void 0 : _f.widgetId,
                    timestamp: Date.now()
                });
                return;
            }
            // NOTE: We don't check processed hashes here anymore
            // The check happens in onInitialValueFound after we know which shortId:value pair is being processed
            debugLogger.log('HASH', {
                event: 'open-widget-event-received-from-helpersimple',
                widgetId: id,
                timestamp: Date.now()
            });
            // Set flag to allow query-task-list to use initialQueryValue for selection
            // This ensures we only react to hash parameters when HelperSimple explicitly opens us
            // Using state instead of ref ensures React triggers re-render so query-task-list sees the change
            this.setState({ shouldUseInitialQueryValueForSelection: true }, () => {
                var _a, _b;
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-flag-set-true-state-updated',
                    widgetId: id,
                    newState: {
                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                        hasInitialQueryValue: !!this.state.initialQueryValue,
                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                    },
                    timestamp: Date.now()
                });
            });
            debugLogger.log('HASH', {
                event: 'shouldUseInitialQueryValueForSelection-flag-set-true',
                widgetId: id,
                flagValue: true,
                timestamp: Date.now()
            });
            // Now check URL parameters - HelperSimple has explicitly opened us
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-checkurlparameters-starting',
                widgetId: this.props.id,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_g = this.state.initialQueryValue) === null || _g === void 0 ? void 0 : _g.shortId,
                    initialQueryValueValue: (_h = this.state.initialQueryValue) === null || _h === void 0 ? void 0 : _h.value
                },
                timestamp: Date.now()
            });
            this.urlConsumptionManager.checkUrlParameters(this.props, this.state.resultsMode, {
                onInitialValueFound: (value) => {
                    var _a, _b, _c, _d, _e, _f, _g, _h;
                    debugLogger.log('HASH-EXEC', {
                        event: 'querysimple-oninitialvaluefound-called',
                        widgetId: this.props.id,
                        hasValue: !!value,
                        valueShortId: value === null || value === void 0 ? void 0 : value.shortId,
                        valueValue: value === null || value === void 0 ? void 0 : value.value,
                        currentState: {
                            shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                            hasInitialQueryValue: !!this.state.initialQueryValue,
                            initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                            initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                        },
                        timestamp: Date.now()
                    });
                    if (value) {
                        // Check if this specific shortId:value combination was already processed
                        const paramKey = `${value.shortId}:${value.value}`;
                        if (this.processedHashParamsRef.has(paramKey)) {
                            debugLogger.log('HASH-EXEC', {
                                event: 'querysimple-oninitialvaluefound-already-processed',
                                widgetId: this.props.id,
                                shortId: value.shortId,
                                value: value.value,
                                paramKey,
                                processedParams: Array.from(this.processedHashParamsRef),
                                timestamp: Date.now()
                            });
                            return;
                        }
                        // Only update if the value or shortId has changed to avoid unnecessary re-renders
                        const willUpdate = ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.shortId) !== value.shortId || ((_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.value) !== value.value;
                        debugLogger.log('HASH-EXEC', {
                            event: 'querysimple-oninitialvaluefound-will-update',
                            widgetId: this.props.id,
                            willUpdate,
                            previousShortId: (_e = this.state.initialQueryValue) === null || _e === void 0 ? void 0 : _e.shortId,
                            previousValue: (_f = this.state.initialQueryValue) === null || _f === void 0 ? void 0 : _f.value,
                            newShortId: value.shortId,
                            newValue: value.value,
                            timestamp: Date.now()
                        });
                        if (willUpdate) {
                            debugLogger.log('HASH', {
                                event: 'url-param-detected',
                                widgetId: this.props.id,
                                shortId: value.shortId,
                                value: value.value,
                                foundIn: 'manager',
                                triggeredBy: 'helpersimple-open-widget-event',
                                previousShortId: (_g = this.state.initialQueryValue) === null || _g === void 0 ? void 0 : _g.shortId,
                                previousValue: (_h = this.state.initialQueryValue) === null || _h === void 0 ? void 0 : _h.value,
                                timestamp: Date.now()
                            });
                            // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
                            // Using AccumulatedRecordsManager (r018.58)
                            const needsModeReset = this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                            const currentMode = this.state.resultsMode;
                            // Update initialQueryValue state
                            this.setState({
                                initialQueryValue: { shortId: value.shortId, value: value.value }
                            }, () => {
                                var _a, _b;
                                debugLogger.log('HASH-EXEC', {
                                    event: 'querysimple-initialqueryvalue-state-updated',
                                    widgetId: this.props.id,
                                    newState: {
                                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                                        hasInitialQueryValue: !!this.state.initialQueryValue,
                                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value,
                                        resultsMode: this.state.resultsMode
                                    },
                                    timestamp: Date.now()
                                });
                            });
                            // Reset mode via manager if needed
                            if (needsModeReset) {
                                const resetResult = this.accumulatedRecordsManager.resetModeOnHashDetection(this.props.id, currentMode);
                                // Update widget state from manager's return value
                                this.setState({
                                    resultsMode: resetResult.resultsMode,
                                    accumulatedRecords: resetResult.accumulatedRecords
                                });
                            }
                        }
                    }
                    else {
                        debugLogger.log('HASH-EXEC', {
                            event: 'querysimple-oninitialvaluefound-no-value-clearing',
                            widgetId: this.props.id,
                            hasCurrentInitialQueryValue: !!this.state.initialQueryValue,
                            timestamp: Date.now()
                        });
                        // No matching parameters found - clear state
                        if (this.state.initialQueryValue) {
                            this.setState({ initialQueryValue: undefined });
                        }
                    }
                },
                onModeResetNeeded: () => {
                    // Reset to New mode when hash parameter is detected
                    // Using AccumulatedRecordsManager (r018.58)
                    const currentMode = this.state.resultsMode;
                    const needsReset = currentMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                    if (needsReset) {
                        debugLogger.log('HASH', {
                            event: 'mode-reset-needed-on-hash-detection',
                            widgetId: this.props.id,
                            currentMode,
                            triggeredBy: 'helpersimple-open-widget-event',
                            timestamp: Date.now()
                        });
                        const resetResult = this.accumulatedRecordsManager.resetModeOnHashDetection(this.props.id, currentMode);
                        // Update widget state from manager's return value
                        this.setState({
                            resultsMode: resetResult.resultsMode,
                            accumulatedRecords: resetResult.accumulatedRecords
                        });
                    }
                }
            });
        };
        /**
         * Notifies HelperSimple widget of selection changes via custom event.
         *
         * This method dispatches a custom event that HelperSimple listens to for tracking
         * selection state. Called by QueryTaskResult component when user selects records.
         *
         * @param recordIds - Array of selected record IDs (objectIds from the feature layer)
         * @param dataSourceId - Optional data source ID for the selected records
         *
         * @since 1.19.0-r017.0
         */
        this.notifyHelperSimpleOfSelection = (recordIds, dataSourceId) => {
            const { id } = this.props;
            // ============================================================================
            // OLD IMPLEMENTATION (parallel execution) - Chunk 7.1
            // ============================================================================
            const oldEvent = new CustomEvent(_hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__.QUERYSIMPLE_SELECTION_EVENT, {
                detail: {
                    widgetId: id,
                    recordIds,
                    dataSourceId
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(oldEvent);
            debugLogger.log('EVENTS', {
                event: 'old-implementation-selection-event-dispatched',
                widgetId: id,
                recordIdsCount: recordIds.length,
                dataSourceId,
                timestamp: Date.now()
            });
            // ============================================================================
            // NEW IMPLEMENTATION (parallel execution) - Chunk 7.1
            // Note: This call is missing outputDsId and queryItemConfigId, but this method
            // is only used for notifying HelperSimple, not for setting lastSelection state.
            // The actual selection events come from query-task.tsx and query-result.tsx
            // which use dispatchSelectionEvent from selection-utils.ts
            this.eventManager.dispatchSelectionEvent(id, recordIds, dataSourceId);
            // COMPARISON LOGGING
            debugLogger.log('CHUNK-7-COMPARE', {
                event: 'selection-event-dispatch-comparison',
                widgetId: id,
                oldImplementation: {
                    method: 'window.dispatchEvent',
                    recordIdsCount: recordIds.length,
                    dataSourceId
                },
                newImplementation: {
                    method: 'EventManager.dispatchSelectionEvent',
                    recordIdsCount: recordIds.length,
                    dataSourceId
                },
                match: true, // Both dispatch the same event
                timestamp: Date.now()
            });
        };
        /**
         * Handles widget panel visibility changes from WidgetVisibilityManager.
         *
         * This method implements the selection restoration pattern:
         * - When panel opens: Restores selection to map if widget has accumulated records or last selection
         * - When panel closes: Clears selection from map (but preserves widget state for restoration)
         *
         * The restoration logic respects the current results mode:
         * - "Add to" / "Remove from" modes: Uses accumulated records for restoration
         * - "New" mode: Uses lastSelection state for restoration
         *
         * @param isVisible - True if widget panel is visible, false if hidden
         *
         * @since 1.19.0-r018.13 (Chunk 2: Manager implementation)
         * @see {@link WidgetVisibilityManager} for visibility detection implementation
         */
        this.handleVisibilityChange = (isVisible) => {
            var _a, _b, _c, _d;
            if (isVisible) {
                // When panel opens, check if we have selection to restore
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToRestore = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                    hasSelectionToRestore,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToRestore': hasSelectionToRestore,
                        'will-call-addSelectionToMap': hasSelectionToRestore
                    }
                });
                // Add selection to map if we have one
                if (hasSelectionToRestore) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-calling-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-true'
                    });
                    this.addSelectionToMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-skipping-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
            else {
                // When panel closes, clear selection from map only (keep widget state)
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToClear = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_d = this.state.lastSelection) === null || _d === void 0 ? void 0 : _d.recordIds.length) || 0,
                    hasSelectionToClear,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToClear': hasSelectionToClear,
                        'will-call-clearSelectionFromMap': hasSelectionToClear
                    }
                });
                if (hasSelectionToClear) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-calling-clearSelectionFromMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-true'
                    });
                    this.clearSelectionFromMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-no-selection-to-clear',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
        };
        /**
         * Handles map view change from JimuMapViewComponent.
         *
         * This method is called by JimuMapViewComponent when the map view becomes available
         * or changes. It delegates to MapViewManager for reference management and initializes
         * the graphics layer if enabled in widget configuration.
         *
         * @param jimuMapView - The JimuMapView instance from JimuMapViewComponent, or null if unavailable
         *
         * @since 1.19.0-r018.18 (Chunk 6: Manager implementation)
         * @see {@link MapViewManager} for map view reference management
         */
        this.handleJimuMapViewChanged = (jimuMapView) => {
            const { id, config } = this.props;
            // Manager implementation (r018.16 - Step 6.3: Switch to manager)
            this.mapViewManager.handleJimuMapViewChanged(jimuMapView, this.props, {
                onMapViewChange: (newJimuMapView) => {
                    // Get map view from manager
                    const newMapView = this.mapViewManager.getMapView();
                    // Chunk 4: Graphics layer initialization (r018.25 - Step 4.3: Remove old implementation)
                    // Initialize graphics layer if map view is available and graphics layer should be initialized
                    if (this.graphicsLayerManager.shouldInitialize(config, newMapView) && newMapView) {
                        // Use void to handle promise without blocking
                        void this.graphicsLayerManager.initialize(id, newMapView, {
                            onGraphicsLayerInitialized: (graphicsLayer) => {
                                // Update state to force re-render and update props
                                this.setState({ graphicsLayerInitialized: true });
                            }
                        });
                    }
                }
            });
        };
        /**
         * Initializes graphics layer lazily when output data source becomes available.
         *
         * This method is called by QueryTask component when an output data source is created.
         * It retrieves the map view from MapViewManager and initializes the graphics layer
         * using GraphicsLayerManager if not already initialized.
         *
         * @param outputDS - The output data source that was created
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.initializeFromOutputDS} for graphics layer initialization
         * @see {@link MapViewManager.getMapView} for map view retrieval
         */
        /**
         * Initializes graphics layer lazily when output data source becomes available.
         *
         * This method is called by QueryTask component when an output data source is created.
         * It retrieves the map view from MapViewManager and initializes the graphics layer
         * using GraphicsLayerManager if not already initialized.
         *
         * @param outputDS - The output data source that was created
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.initializeFromOutputDS} for graphics layer initialization
         * @see {@link MapViewManager.getMapView} for map view retrieval
         */
        this.initializeGraphicsLayerFromOutputDS = (outputDS) => __awaiter(this, void 0, void 0, function* () {
            const { id, config } = this.props;
            // Chunk 4: Graphics layer initialization (r018.25 - Step 4.3: Remove old implementation)
            // Use map view from manager if available
            const mapView = this.mapViewManager.getMapView() || this.mapViewRef.current;
            yield this.graphicsLayerManager.initializeFromOutputDS(id, config, outputDS, mapView, {
                onGraphicsLayerInitialized: (graphicsLayer) => {
                    this.setState({ graphicsLayerInitialized: true });
                }
            });
        });
        /**
         * Clears all graphics from the graphics layer if it exists.
         *
         * This method is called when clearing results or switching queries in "New" mode
         * to ensure graphics are removed from the map. It does not remove the graphics layer
         * itself, only clears its contents.
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.clearGraphics} for graphics clearing logic
         */
        this.clearGraphicsLayerIfExists = () => {
            const { config } = this.props;
            // Chunk 4: Graphics layer clearing (r018.25 - Step 4.3: Remove old implementation)
            this.graphicsLayerManager.clearGraphics(this.props.id, config);
        };
        /**
         * Handles selection change events from QueryTaskResult component.
         *
         * This method updates widget state when records are selected or deselected in the
         * results tab. It respects the current results mode:
         * - "Add to" / "Remove from" modes: Uses accumulated records count for restoration state
         * - "New" mode: Uses event record IDs for restoration state
         *
         * Also handles automatic mode reset: If selection is cleared in "Remove from" mode,
         * the mode is automatically reset to "New" since Remove mode requires selection to function.
         *
         * @param event - Custom event containing selection details (widgetId, recordIds, outputDsId, queryItemConfigId)
         *
         * @since 1.19.0-r017.0
         */
        this.handleSelectionChange = (event) => {
            var _a;
            const customEvent = event;
            const { id } = this.props;
            // Only track if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const hasSelection = customEvent.detail.recordIds && customEvent.detail.recordIds.length > 0;
            // If the panel is NOT visible, and we are receiving an EMPTY selection,
            // it's almost certainly our own 'clearSelectionFromMap' logic firing.
            // We should IGNORE this so we don't wipe out the lastSelection state.
            if (!this.state.isPanelVisible && !hasSelection) {
                debugLogger.log('RESTORE', {
                    event: 'handleSelectionChange-ignoring-empty-selection-while-panel-closed',
                    widgetId: id,
                    timestamp: Date.now()
                });
                return;
            }
            // In "Add to" or "Remove from" mode, use accumulated records count for restoration
            // The accumulated records are the source of truth for what should be restored
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            const accumulatedRecordsCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const selectionCount = isAccumulationMode && accumulatedRecordsCount > 0
                ? accumulatedRecordsCount
                : (hasSelection ? customEvent.detail.recordIds.length : 0);
            // If selection is cleared and we're in Remove mode, reset to NewSelection mode
            // Remove mode requires selection to function, so it should be disabled when selection is empty
            const shouldResetMode = !hasSelection &&
                selectionCount === 0 &&
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-updating-state',
                widgetId: id,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelectionFromEvent: hasSelection,
                accumulatedRecordsCountBefore: accumulatedRecordsCount,
                calculatedSelectionCount: selectionCount,
                'will-set-hasSelection': selectionCount > 0,
                'will-set-lastSelection': hasSelection && !!customEvent.detail.outputDsId && !!customEvent.detail.queryItemConfigId,
                'will-reset-mode': shouldResetMode,
                decisionLogic: {
                    'isAccumulationMode': isAccumulationMode,
                    'accumulatedRecordsCount > 0': accumulatedRecordsCount > 0,
                    'use-accumulated-count': isAccumulationMode && accumulatedRecordsCount > 0,
                    'use-event-count': !(isAccumulationMode && accumulatedRecordsCount > 0),
                    'should-reset-mode': shouldResetMode
                }
            });
            this.setState(Object.assign({ hasSelection: selectionCount > 0, selectionRecordCount: selectionCount, 
                // Store lastSelection for compatibility, but restoration will use accumulatedRecords in Add/Remove modes
                lastSelection: hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? {
                        recordIds: customEvent.detail.recordIds,
                        outputDsId: customEvent.detail.outputDsId,
                        queryItemConfigId: customEvent.detail.queryItemConfigId
                    }
                    : undefined }, (shouldResetMode ? {
                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                accumulatedRecords: [] // Also clear accumulated records when resetting mode
            } : {})));
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-state-updated',
                widgetId: id,
                'new-hasSelection': selectionCount > 0,
                'new-selectionRecordCount': selectionCount,
                'new-lastSelection-recordIds-count': hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? customEvent.detail.recordIds.length
                    : 0,
                'mode-reset': shouldResetMode,
                'new-mode': shouldResetMode ? _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection : this.state.resultsMode,
                'note': shouldResetMode
                    ? 'Mode reset to NewSelection because selection was cleared in Remove mode'
                    : 'lastSelection-only-contains-current-query-records-not-all-accumulated-records'
            });
        };
        /**
         * Handles restore request when identify popup closes.
         *
         * This method restores selection to the map after the identify popup closes and
         * selection was cleared. It only restores if the widget panel is currently open
         * (users can't see restored selection if widget is closed).
         *
         * Restoration logic:
         * - "Add to" / "Remove from" modes: Restores all accumulated records grouped by origin data source
         * - "New" mode: Restores lastSelection state
         *
         * @param event - Custom event containing selection details (widgetId, recordIds, outputDsId, queryItemConfigId)
         *
         * @since 1.19.0-r017.0
         * @see {@link RESTORE_ON_IDENTIFY_CLOSE_EVENT} for event name constant
         */
        this.handleRestoreOnIdentifyClose = (event) => {
            var _a, _b, _c;
            const customEvent = event;
            const { id } = this.props;
            // Only handle if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            // Use manager as source of truth for visibility (r018.13)
            const isWidgetOpen = this.visibilityManager.getIsPanelVisible();
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restore-requested',
                widgetId: id,
                isWidgetOpen,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelection: this.state.hasSelection || false,
                accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                hasLastSelection: !!this.state.lastSelection,
                lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                outputDsId: customEvent.detail.outputDsId,
                queryItemConfigId: customEvent.detail.queryItemConfigId
            });
            // Only restore if widget is open
            if (!isWidgetOpen) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-widget-closed',
                    widgetId: id,
                    recordCount: customEvent.detail.recordIds.length
                });
                return;
            }
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-found-accumulated-records',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode,
                    'condition-result': isAccumulationMode
                });
            }
            // In Add/Remove modes, check accumulated records instead of lastSelection
            if (isAccumulationMode) {
                if (!this.state.hasSelection || !this.state.accumulatedRecords || this.state.accumulatedRecords.length === 0) {
                    debugLogger.log('RESTORE', {
                        event: 'identify-popup-closed-restore-skipped-no-accumulated-records',
                        widgetId: id,
                        hasSelection: this.state.hasSelection,
                        accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                        'hypothesis': 'hasSelection-is-false-or-no-accumulated-records',
                        'maybe-hasSelection-should-be-based-on-accumulated-records': true
                    });
                    return;
                }
                // Restore all accumulated records (grouped by origin DS)
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restoring-accumulated-records',
                    widgetId: id,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length
                });
                this.addSelectionToMap();
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // For "New" mode, use original validation logic
            // Check if we have matching selection state
            if (!this.state.hasSelection || !this.state.lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-no-selection',
                    widgetId: id,
                    hasSelection: this.state.hasSelection,
                    hasLastSelection: !!this.state.lastSelection
                });
                return;
            }
            // Verify the outputDsId matches
            if (this.state.lastSelection.outputDsId !== customEvent.detail.outputDsId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-ds-mismatch',
                    widgetId: id,
                    ourOutputDsId: this.state.lastSelection.outputDsId,
                    requestedOutputDsId: customEvent.detail.outputDsId
                });
                return;
            }
            // Verify the queryItemConfigId matches (optional but good to check)
            if (this.state.lastSelection.queryItemConfigId !== customEvent.detail.queryItemConfigId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-query-mismatch',
                    widgetId: id,
                    ourQueryItemConfigId: this.state.lastSelection.queryItemConfigId,
                    requestedQueryItemConfigId: customEvent.detail.queryItemConfigId
                });
                return;
            }
            // Restore selection to map (reuse existing method)
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restoring-selection',
                widgetId: id,
                recordCount: customEvent.detail.recordIds.length,
                outputDsId: customEvent.detail.outputDsId
            });
            this.addSelectionToMap();
        };
        /**
         * Restores selection to the map when widget panel opens.
         *
         * This method is called by handleVisibilityChange when the panel becomes visible.
         * It restores previously selected records to the map based on the current results mode:
         *
         * - "Add to" / "Remove from" modes: Restores all accumulated records, grouped by origin data source
         * - "New" mode: Restores lastSelection state from the most recent query
         *
         * The restoration uses selectRecordsAndPublish utility which handles:
         * - Selecting records in origin data sources
         * - Adding graphics to graphics layer (if enabled)
         * - Publishing selection messages to other widgets
         * - Deduplication of records
         *
         * Note: This method does NOT zoom to the selection (unlike the "Add to Map" action).
         *
         * @since 1.19.0-r017.0
         * @see {@link selectRecordsAndPublish} utility function for selection logic
         */
        this.addSelectionToMap = () => {
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            debugLogger.log('RESTORE', {
                event: 'addSelectionToMap-called',
                widgetId: id,
                resultsMode,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                lastSelectionOutputDsId: lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.outputDsId
            });
            // In Add/Remove modes, use accumulated records for restoration
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            // Adding log to see if accumulatedRecords exist but we're not using them
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-found-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0,
                    'condition-result': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0
                });
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: 0,
                    'will-fallback-to-lastSelection': !!lastSelection
                });
            }
            if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restoring-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Restore selection for each origin data source
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    const recordIds = records.map(r => r.getId());
                    try {
                        // Use originDS directly (not outputDS) since records are selected in origin layers
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield selectRecordsAndPublish(id, originDS, recordIds, records, true, useGraphicsLayer, graphicsLayer, mapView);
                        }))();
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restored-origin-ds',
                            widgetId: id,
                            originDSId: originDS.id,
                            recordCount: records.length,
                            zoomExecuted: false
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restore-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error),
                            errorStack: error instanceof Error ? error.stack : undefined
                        });
                    }
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            // Or maybe we should always check accumulatedRecords first?
            if (accumulatedRecords && accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-lastSelection-exiting',
                    widgetId: id,
                    resultsMode,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-early-maybe-should-check-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            // Get records from output DS (same as Add to Map)
            const allRecords = outputDS.getAllLoadedRecords() || [];
            const recordsToSelect = allRecords.filter(record => lastSelection.recordIds.includes(record.getId()));
            if (recordsToSelect.length === 0) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-no-matching-records',
                    widgetId: id,
                    ourRecordCount: lastSelection.recordIds.length
                });
                return;
            }
            // Same logic as Add to Map action - selectRecordsAndPublish handles duplicate checking
            // Don't zoom when restoring on widget open (Add to Map action handles zoom for manual clicks)
            try {
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield selectRecordsAndPublish(id, outputDS, lastSelection.recordIds, recordsToSelect, true, useGraphicsLayer, graphicsLayer, mapView);
                }))();
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-selection-added-to-map',
                    widgetId: id,
                    recordCount: recordsToSelect.length,
                    zoomExecuted: false
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-add-to-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error)
                });
            }
        };
        /**
         * Handles results mode change from the mode dropdown in QueryTask component.
         *
         * This method is called when the user switches between "Create new", "Add to", or
         * "Remove from" modes. It performs the following actions:
         *
         * 1. Consumes hash parameters when switching to accumulation modes (prevents re-triggering)
         * 2. Clears accumulated records when switching to "New" mode
         * 3. Updates widget state with the new mode
         *
         * @param mode - The new selection type mode (NewSelection, AddToSelection, or RemoveFromSelection)
         *
         * @since 1.19.0-r017.0
         */
        this.handleResultsModeChange = (mode) => {
            var _a, _b;
            // Using AccumulatedRecordsManager (r018.58)
            const shouldConsumeHash = (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection) && !!((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId);
            const result = this.accumulatedRecordsManager.handleResultsModeChange(this.props.id, mode, shouldConsumeHash, (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId, this.removeHashParameter);
            // Update widget state from manager's return value
            this.setState({
                resultsMode: result.resultsMode,
                accumulatedRecords: result.accumulatedRecords
            });
        };
        /**
         * Removes a hash parameter from the URL when switching to accumulation modes.
         *
         * This method is called when switching to "Add to" or "Remove from" modes to consume
         * the deep link parameter. This prevents the hash parameter from re-triggering the query
         * when the widget re-renders.
         *
         * The URL is updated using history.replaceState to avoid page reload, and both pathname
         * and query string are preserved (e.g., debug parameters remain intact).
         *
         * @param shortId - The shortId parameter to remove from the URL hash
         *
         * @since 1.19.0-r017.0
         */
        this.removeHashParameter = (shortId) => {
            var _a;
            if (!shortId)
                return;
            const hash = window.location.hash.substring(1);
            const urlParams = new URLSearchParams(hash);
            if (urlParams.has(shortId)) {
                urlParams.delete(shortId);
                const newHash = urlParams.toString();
                debugLogger.log('HASH', {
                    event: 'removeHashParameter',
                    shortId,
                    newHash: newHash ? `#${newHash}` : '(empty)',
                    timestamp: Date.now()
                });
                // Update the URL without triggering a reload
                // Always preserve pathname and query string, only update hash
                window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
                // Also clear the state so it won't trigger again
                if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                    this.setState({ initialQueryValue: undefined });
                }
            }
        };
        this.handleAccumulatedRecordsChange = (records) => {
            // DIAGNOSTIC LOGGING: State change tracking
            const previousRecords = this.state.accumulatedRecords || [];
            const previousIds = previousRecords.map(r => r.getId());
            const newIds = records.map(r => r.getId());
            const addedIds = newIds.filter(id => !previousIds.includes(id));
            const removedIds = previousIds.filter(id => !newIds.includes(id));
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-state-change',
                widgetId: this.props.id,
                previousCount: previousRecords.length,
                previousIds: previousIds,
                newCount: records.length,
                newIds: newIds,
                addedIds: addedIds,
                removedIds: removedIds,
                resultsMode: this.state.resultsMode,
                timestamp: Date.now()
            });
            // Using AccumulatedRecordsManager (r018.58)
            this.accumulatedRecordsManager.handleAccumulatedRecordsChange(this.props.id, records);
            // If we're in Remove mode and all accumulated records are cleared, reset to NewSelection mode
            // Remove mode requires accumulated records to function, so it should be disabled when records are empty
            const shouldResetMode = records.length === 0 &&
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            this.setState(Object.assign({ accumulatedRecords: records }, (shouldResetMode ? {
                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection
            } : {})));
            if (shouldResetMode) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'mode-reset-on-accumulated-records-cleared',
                    widgetId: this.props.id,
                    previousMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection,
                    newMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                    reason: 'all-accumulated-records-cleared-in-remove-mode',
                    timestamp: Date.now()
                });
            }
        };
        /**
         * NOTE: No longer needed - we use existing output DS instead of creating new one.
         * Kept for reference but not used.
         */
        this.getOrCreateAccumulatedResultsDS = (originDS) => __awaiter(this, void 0, void 0, function* () {
            // This is no longer used - we merge records into existing output DS
            throw new Error('This method is deprecated - use existing output DS instead');
        });
        /**
         * Clears selection from the map while preserving widget's internal state.
         *
         * This method is called when the widget panel closes to remove selection from the map
         * (cleaning up the visual selection) while keeping the selection state in the widget
         * for restoration when the panel reopens.
         *
         * The method handles both "New" mode (lastSelection) and accumulation modes (accumulatedRecords).
         * It groups records by origin data source and clears selection from each origin data source,
         * ensuring multi-layer selections are properly cleared.
         *
         * Graphics layer is also cleared if enabled, and empty selection messages are published
         * to notify other widgets (like HelperSimple) that selection has been cleared.
         *
         * @since 1.19.0-r017.0
         * @see {@link clearSelectionInDataSources} utility function for clearing logic
         */
        this.clearSelectionFromMap = () => {
            var _a, _b;
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-called',
                widgetId: id,
                resultsMode,
                isAccumulationMode,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                selectionRecordCount: this.state.selectionRecordCount || 0,
                hasSelection: this.state.hasSelection || false
            });
            // Always clear graphics layer first when panel closes (if graphics layer is enabled)
            // This ensures visual selection is removed even if state is inconsistent
            if (this.props.config.useGraphicsLayerForHighlight && this.graphicsLayerRef.current) {
                this.graphicsLayerManager.clearGraphics(id, this.props.config);
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-graphics-layer-cleared',
                    widgetId: id,
                    graphicsLayerId: this.graphicsLayerRef.current.id
                });
            }
            // Always clear accumulated records if they exist (regardless of mode)
            // This handles the case where mode might have changed but records still exist
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-checking-accumulated-records',
                widgetId: id,
                'condition': 'accumulatedRecords && accumulatedRecords.length > 0',
                'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
            });
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'clear-found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'clear-found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'clear-could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clearing-accumulated-records-from-map',
                    widgetId: id,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Clear selection from each origin data source
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    try {
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                            debugLogger.log('RESTORE', {
                                event: 'panel-closed-cleared-origin-ds-selection',
                                widgetId: id,
                                originDSId: originDS.id,
                                recordCount: records.length,
                                usedGraphicsLayer: useGraphicsLayer
                            });
                        }))();
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-closed-clear-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error)
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-cleared-accumulated-records-returning',
                    widgetId: id,
                    'will-not-fallback-to-lastSelection': true
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we didn't enter the if block?
            // Or maybe we should always clear accumulated records if they exist?
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-accumulated-records-exist-but-not-clearing',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-condition-failed-why',
                    'condition-was': 'accumulatedRecords && accumulatedRecords.length > 0',
                    'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0)
                });
            }
            // If we have selection state but no lastSelection, we still need to clear
            // This handles the case where state is inconsistent (hasSelection=true but lastSelection=null)
            if (this.state.hasSelection && !lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-has-selection-but-no-lastSelection',
                    widgetId: id,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    note: 'will-attempt-to-clear-from-current-selection-state'
                });
                // Try to get the output DS from the most recent query
                // Find output DS for this widget (pattern: widget_{id}_output_*)
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                const allDataSources = Object.values(dsManager.getDataSources());
                const outputDS = allDataSources.find(ds => ds.id.startsWith(`widget_${id}_output_`));
                if (outputDS) {
                    const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
                    if (originDS) {
                        const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                        const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                        const graphicsLayer = this.graphicsLayerRef.current || undefined;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            try {
                                yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                                debugLogger.log('RESTORE', {
                                    event: 'panel-closed-cleared-selection-from-state',
                                    widgetId: id,
                                    originDSId: originDS.id,
                                    outputDSId: outputDS.id,
                                    usedGraphicsLayer: useGraphicsLayer
                                });
                            }
                            catch (error) {
                                debugLogger.log('RESTORE', {
                                    event: 'panel-closed-clear-from-state-failed',
                                    widgetId: id,
                                    originDSId: originDS.id,
                                    outputDSId: outputDS.id,
                                    error: error instanceof Error ? error.message : String(error)
                                });
                            }
                        }))();
                        return;
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'clearSelectionFromMap-no-origin-ds-found',
                            widgetId: id,
                            outputDSId: outputDS.id,
                            note: 'output-ds-found-but-no-origin-ds'
                        });
                    }
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'clearSelectionFromMap-no-output-ds-found',
                        widgetId: id,
                        note: 'could-not-find-output-ds-for-widget'
                    });
                }
            }
            // Fall back to original logic for "New" mode with lastSelection
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-no-lastSelection-exiting',
                    widgetId: id,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    hasSelection: this.state.hasSelection || false,
                    selectionRecordCount: this.state.selectionRecordCount || 0
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            try {
                // Get origin DS (the map layer)
                const originDS = (_b = outputDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0];
                if (!originDS) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-origin-ds-not-found',
                        widgetId: id,
                        outputDsId: lastSelection.outputDsId
                    });
                    return;
                }
                // Check current selection state before clearing
                const currentSelectedIds = originDS.getSelectedRecordIds() || [];
                const ourRecordIds = lastSelection.recordIds;
                const matchesOurSelection = ourRecordIds.length === currentSelectedIds.length &&
                    ourRecordIds.every(recordId => currentSelectedIds.includes(recordId));
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-map-selection',
                    widgetId: id,
                    ourRecordCount: ourRecordIds.length,
                    mapSelectedCount: currentSelectedIds.length,
                    matchesOurSelection,
                    ourRecordIds: ourRecordIds.slice(0, 5),
                    mapSelectedIds: currentSelectedIds.slice(0, 5)
                });
                // Use clearSelectionInDataSources utility which supports graphics layer
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-cleared-origin-ds-selection',
                        widgetId: id,
                        originDSId: originDS.id,
                        usedGraphicsLayer: useGraphicsLayer
                    });
                    // Verify selection was cleared
                    const afterClearIds = originDS.getSelectedRecordIds() || [];
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-selection-cleared-from-map',
                        widgetId: id,
                        recordCount: lastSelection.recordIds.length,
                        originDSId: originDS.id,
                        selectionAfterClear: afterClearIds.length,
                        verifiedCleared: afterClearIds.length === 0
                    });
                }))();
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clear-from-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
            }
        };
        /**
         * NOTIFY that a hash parameter has been used.
         * Previously this removed the hash from the URL, but per updated requirements,
         * user-entered hashes should remain in the URL.
         *
         * @param shortId - The shortId parameter that was used
         */
        this.handleHashParameterUsed = (shortId) => {
            var _a, _b;
            const { id } = this.props;
            const { initialQueryValue } = this.state;
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-handlehashparameterused-called',
                widgetId: id,
                shortId,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                    initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                },
                timestamp: Date.now()
            });
            // NOTE: Hash parameters are NOT cleared here - they persist in URL
            // Hash parameters are only consumed when switching to accumulation modes (Add/Remove)
            // to prevent re-triggering when the user manually switches modes
            debugLogger.log('HASH', {
                event: 'handleHashParameterUsed-notified',
                widgetId: id,
                shortId: shortId,
                currentInitialQueryValue: initialQueryValue,
                note: 'Hash parameter used but NOT cleared - hash remains in URL per user requirement',
                timestamp: Date.now()
            });
            // Track this shortId:value pair as processed to prevent re-execution when switching queries
            // This prevents HelperSimple from re-triggering the same parameter when switching queries
            if (initialQueryValue) {
                const paramKey = `${initialQueryValue.shortId}:${initialQueryValue.value}`;
                this.processedHashParamsRef.add(paramKey);
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-hashparam-tracked-as-processed',
                    widgetId: id,
                    shortId: initialQueryValue.shortId,
                    value: initialQueryValue.value,
                    paramKey,
                    processedParams: Array.from(this.processedHashParamsRef),
                    timestamp: Date.now()
                });
            }
            // ALWAYS clear both hash state values after execution
            // QuerySimple should not remember hash state after HelperSimple-driven execution completes
            // This prevents autonomous re-processing when switching queries
            // Using a single setState ensures atomic update and prevents race conditions
            this.setState({
                shouldUseInitialQueryValueForSelection: false,
                initialQueryValue: undefined
            }, () => {
                var _a, _b;
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-handlehashparameterused-state-cleared',
                    widgetId: id,
                    shortId,
                    newState: {
                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                        hasInitialQueryValue: !!this.state.initialQueryValue,
                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                    },
                    timestamp: Date.now()
                });
            });
            debugLogger.log('HASH', {
                event: 'shouldUseInitialQueryValueForSelection-flag-cleared',
                widgetId: id,
                shortId: shortId,
                flagValue: false,
                timestamp: Date.now()
            });
        };
    }
    componentDidMount() {
        var _a, _b;
        // Chunk 1: Manager implementation (r018.8 - switched to manager)
        // Setup manager (no autonomous URL checking - HelperSimple orchestrates)
        // NOTE: setup() is a no-op - callbacks are never called
        this.urlConsumptionManager.setup(this.props, this.state.resultsMode, {} // Empty callbacks - setup() is a no-op
        );
        // Listen for HelperSimple's open widget event
        // QuerySimple should only process hash parameters when HelperSimple explicitly opens the widget
        // This ensures HelperSimple remains the orchestrator
        // Note: Event listener setup moved to parallel execution section below (Chunk 7.1)
        debugLogger.log('HASH-EXEC', {
            event: 'querysimple-mounted-event-listener-setup',
            widgetId: this.props.id,
            currentState: {
                shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                hasInitialQueryValue: !!this.state.initialQueryValue,
                initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
            },
            timestamp: Date.now()
        });
        // Chunk 2: Manager implementation (r018.13 - Step 2.3: Switch to manager)
        if (this.widgetRef.current) {
            this.visibilityManager.setup(this.widgetRef.current, this.props, {
                onVisibilityChange: (isVisible) => {
                    // Update state
                    this.setState({ isPanelVisible: isVisible });
                    // Handle restoration logic
                    this.handleVisibilityChange(isVisible);
                }
            }, (isVisible) => {
                // Manager's internal state tracking callback
                // (no-op, restoration handled in onVisibilityChange)
            });
            // Notify mount via manager
            this.visibilityManager.notifyMount(this.props.id);
        }
        // Chunk 5: Initialize accumulated records manager state (r018.26 - Step 5.1: Add manager)
        // Sync manager state with widget state
        if (this.state.resultsMode) {
            this.accumulatedRecordsManager.handleResultsModeChange(this.props.id, this.state.resultsMode, false);
        }
        if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
            this.accumulatedRecordsManager.handleAccumulatedRecordsChange(this.props.id, this.state.accumulatedRecords);
        }
        // Set up callbacks for manager
        // Set up callbacks for manager (r018.57)
        // Note: Primary state updates come from manager return values in handleResultsModeChange/handleAccumulatedRecordsChange
        // These callbacks serve as backup/verification but shouldn't be needed since we update state directly from return values
        this.accumulatedRecordsManager.setCallbacks({
            onModeChange: (mode) => {
                // State is updated from handleResultsModeChange return value, so this is just a backup
                if (this.state.resultsMode !== mode) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'callback-onModeChange-state-sync',
                        widgetId: this.props.id,
                        callbackMode: mode,
                        currentStateMode: this.state.resultsMode,
                        note: 'State should already be synced from return value',
                        timestamp: Date.now()
                    });
                    this.setState({ resultsMode: mode });
                }
            },
            onAccumulatedRecordsChange: (records) => {
                var _a;
                // State is updated from handleAccumulatedRecordsChange, so this is just a backup
                const currentCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
                if (currentCount !== records.length) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'callback-onAccumulatedRecordsChange-state-sync',
                        widgetId: this.props.id,
                        callbackCount: records.length,
                        currentStateCount: currentCount,
                        note: 'State should already be synced from direct update',
                        timestamp: Date.now()
                    });
                    this.setState({ accumulatedRecords: records });
                }
            }
        });
        // ============================================================================
        // OLD IMPLEMENTATION (parallel execution) - Chunk 7.1
        // ============================================================================
        // Listen for HelperSimple orchestration events
        window.addEventListener(_hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__.OPEN_WIDGET_EVENT, this.handleOpenWidgetEvent);
        // Listen for selection changes from query-result
        window.addEventListener(_hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Listen for restore requests when identify popup closes
        window.addEventListener(_hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__.RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        debugLogger.log('EVENTS', {
            event: 'old-implementation-event-listeners-setup',
            widgetId: this.props.id,
            listenersRegistered: 3,
            timestamp: Date.now()
        });
        // ============================================================================
        // NEW IMPLEMENTATION (parallel execution) - Chunk 7.1
        this.eventManager.setHandlers({
            onOpenWidgetEvent: this.handleOpenWidgetEvent,
            onSelectionChange: this.handleSelectionChange,
            onRestoreOnIdentifyClose: this.handleRestoreOnIdentifyClose
        });
        this.eventManager.setup(this.props.id);
        // COMPARISON LOGGING
        debugLogger.log('CHUNK-7-COMPARE', {
            event: 'event-listeners-setup-comparison',
            widgetId: this.props.id,
            oldImplementation: {
                listenersRegistered: 3,
                setupMethod: 'window.addEventListener'
            },
            newImplementation: {
                listenersRegistered: 3,
                setupMethod: 'EventManager.setup',
                isSetup: this.eventManager.isSetup()
            },
            match: this.eventManager.isSetup() === true,
            timestamp: Date.now()
        });
        // Graphics layer will be initialized when map view becomes available via JimuMapViewComponent
    }
    componentWillUnmount() {
        // Chunk 1: Clean up manager (r018.8)
        this.urlConsumptionManager.cleanup();
        // ============================================================================
        // OLD IMPLEMENTATION (parallel execution) - Chunk 7.1
        // ============================================================================
        // Clean up HelperSimple open widget event listener
        window.removeEventListener(_hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__.OPEN_WIDGET_EVENT, this.handleOpenWidgetEvent);
        // Clean up selection change listener
        window.removeEventListener(_hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Clean up restore on identify close listener
        window.removeEventListener(_hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__.RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        debugLogger.log('EVENTS', {
            event: 'old-implementation-event-listeners-cleaned',
            widgetId: this.props.id,
            listenersRemoved: 3,
            timestamp: Date.now()
        });
        // ============================================================================
        // NEW IMPLEMENTATION (parallel execution) - Chunk 7.1
        const wasSetup = this.eventManager.isSetup();
        this.eventManager.cleanup(this.props.id);
        // COMPARISON LOGGING
        debugLogger.log('CHUNK-7-COMPARE', {
            event: 'event-listeners-cleanup-comparison',
            widgetId: this.props.id,
            oldImplementation: {
                listenersRemoved: 3,
                cleanupMethod: 'window.removeEventListener'
            },
            newImplementation: {
                wasSetup,
                cleanupMethod: 'EventManager.cleanup',
                isSetup: this.eventManager.isSetup()
            },
            match: this.eventManager.isSetup() === false,
            timestamp: Date.now()
        });
        // Chunk 2: Clean up manager (r018.13 - Step 2.3: Switch to manager)
        this.visibilityManager.cleanup();
        this.visibilityManager.notifyUnmount(this.props.id);
        // Chunk 4: Graphics layer cleanup (r018.25 - Step 4.3: Remove old implementation)
        this.graphicsLayerManager.cleanup(this.props.id);
        // Chunk 5: Clean up accumulated records manager (r018.26 - Step 5.1: Add manager)
        this.accumulatedRecordsManager.cleanup();
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-closed',
            widgetId: this.props.id,
            isOpen: false,
            timestamp: new Date().toISOString()
        });
    }
    componentDidUpdate(prevProps) {
        // QuerySimple no longer autonomously checks URL parameters
        // Only HelperSimple can trigger hash parameter processing via OPEN_WIDGET_EVENT
        // This ensures HelperSimple remains the orchestrator
        // Chunk 4: Graphics layer is now required (r018.25 - Step 4.3: Remove config change handling)
        // No need to handle config changes for graphics layer since it's always enabled
    }
    render() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        const { config, id, icon, label, layoutId, layoutItemId, controllerWidgetId } = this.props;
        const widgetLabel = this.props.intl.formatMessage({
            id: '_widgetLabel',
            defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]._widgetLabel
        });
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, { icon: iconMap.iconQuery, widgetId: this.props.id, name: widgetLabel });
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Popper && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__.TaskListPopperWrapper, { id: 0, icon: icon, popperTitle: label, minSize: (_c = (_b = config.sizeMap) === null || _b === void 0 ? void 0 : _b.arrangementIconPopper) === null || _c === void 0 ? void 0 : _c.minSize, defaultSize: (_e = (_d = config.sizeMap) === null || _d === void 0 ? void 0 : _d.arrangementIconPopper) === null || _e === void 0 ? void 0 : _e.defaultSize, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, isInPopper: true, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, className: 'pb-4', initialQueryValue: this.state.initialQueryValue, shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange, eventManager: this.eventManager }) }) }));
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Inline && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__.TaskListInline, { widgetId: id, widgetLabel: label, wrap: config.arrangeWrap, queryItems: config.queryItems, minSize: (_g = (_f = config.sizeMap) === null || _f === void 0 ? void 0 : _f.arrangementIconPopper) === null || _g === void 0 ? void 0 : _g.minSize, defaultSize: (_j = (_h = config.sizeMap) === null || _h === void 0 ? void 0 : _h.arrangementIconPopper) === null || _j === void 0 ? void 0 : _j.defaultSize, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed }) }));
        }
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Paper, { ref: this.widgetRef, variant: 'flat', className: 'jimu-widget runtime-query', "data-widgetid": id, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
        display: flex;
        flex-direction: column;
        height: 100%;
      `, children: [config.useGraphicsLayerForHighlight && config.highlightMapWidgetId && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__.JimuMapViewComponent, { useMapWidgetId: config.highlightMapWidgetId, onActiveViewChange: this.handleJimuMapViewChanged })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "widget-header", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px 16px;
          border-bottom: 1px solid var(--sys-color-divider-secondary);
          background-color: var(--sys-color-surface);
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "widget-title", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--sys-color-text-primary);
          `, children: label || widgetLabel }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            flex: 1;
            overflow: auto;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange, eventManager: this.eventManager }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 4px 12px;
            border-top: 1px solid var(--sys-color-divider-secondary);
            background-color: var(--sys-color-surface-paper);
            flex-shrink: 0;
            text-align: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              font-size: 0.75rem;
              color: var(--sys-color-text-tertiary);
              font-weight: 400;
              letter-spacing: 0.025em;
              display: inline-flex;
              align-items: center;
              gap: 4px;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex-shrink: 0;
                  opacity: 0.6;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-left: 6px;
                opacity: 0.5;
                font-size: 0.7rem;
              `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_13__.WIDGET_VERSION] })] }) })] })] }));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_7__.versionManager;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9xdWVyeS1zaW1wbGUvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFFVTtBQUVoRCxNQUFNLFVBQVUsR0FBRyxDQUFDLEtBQXdCLEVBQUUsRUFBRTtJQUNyRCxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRztJQUN0QixNQUFNLEVBQUUsU0FBUyxLQUFnQixLQUFLLEVBQWhCLE1BQU0sVUFBSyxLQUFLLEVBQWhDLGFBQXdCLENBQVE7SUFFdEMsTUFBTSxPQUFPLEdBQUcscURBQVUsQ0FBQywrQkFBK0IsRUFBRSxTQUFTLENBQUM7SUFDdEUsSUFBSSxDQUFDLEdBQUc7UUFBRSxPQUFPLHVGQUFLLFNBQVMsRUFBRSxPQUFPLElBQU0sTUFBYSxFQUFJO0lBQy9ELE9BQU8sZ0VBQUMsR0FBRyxrQkFBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSx5RUFBRyxJQUFNLE1BQU0sRUFBSTtBQUMxRCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1g0QztBQUVXO0FBRWpELE1BQU0sV0FBVyxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQ3RELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFP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QyxZQUFZLEdBQy9CLEdBQzBCLEdBQzFCLEVBRU4seUVBQUssR0FBRyxFQUFFLDhDQUFHOzs7Ozs7V0FNWixZQUNDLDJFQUFNLEdBQUcsRUFBRSw4Q0FBRzs7Ozs7Ozs7YUFRYixhQUVDLDBFQUNFLEtBQUssRUFBQyxJQUFJLEVBQ1YsTUFBTSxFQUFDLElBQUksRUFDWCxPQUFPLEVBQUMsV0FBVyxFQUNuQixJQUFJLEVBQUMsTUFBTSxFQUNYLE1BQU0sRUFBQyxjQUFjLEVBQ3JCLFdBQVcsRUFBQyxHQUFHLEVBQ2YsR0FBRyxFQUFFLDhDQUFHOzs7aUJBR1AsYUFFRCw4RUFBVSxNQUFNLEVBQUMsa0JBQWtCLEdBQUUsRUFDckMsOEVBQVUsTUFBTSxFQUFDLGVBQWUsR0FBRSxJQUM5Qiw4QkFFTiwyRUFBTSxHQUFHLEVBQUUsOENBQUc7Ozs7ZUFJYixrQkFDRyxxREFBYyxJQUNYLElBQ0YsR0FDSCxJQUNGLElBQ0EsQ0FDVDtJQUNILENBQUM7O0FBcmdFTSxxQkFBYyxHQUFHLDREQUFjO2lFQVhuQixNQUFNO0FBb2hFbkIsU0FBUywyQkFBMkIsQ0FBQyxHQUFHLElBQUkscUJBQXVCLEdBQUcsR0FBRyxFQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci90cmFzaC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21vcmUtaG9yaXpvbnRhbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvY2xvc2Uuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvZXJyb3Iuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mby5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL2ljb24uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kYXRhLWFjdGlvbnMvYWRkLXRvLW1hcC1hY3Rpb24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2RhdGEtYWN0aW9ucy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGF0YS1hY3Rpb25zL3pvb20tdG8tYWN0aW9uLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kZWZhdWx0LXF1ZXJ5LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL3pvb20tdG8uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYnVmZmVyLWlucHV0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tZHJhdy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLWRzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tbWFwLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dyYXBoaWNzLWxheWVyLXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLWFjY3VtdWxhdGVkLXJlY29yZHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ob29rcy91c2UtZXZlbnQtaGFuZGxpbmcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ob29rcy91c2UtZ3JhcGhpY3MtbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ob29rcy91c2UtbWFwLXZpZXcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ob29rcy91c2UtdXJsLWNvbnN1bXB0aW9uLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLXdpZGdldC12aXNpYmlsaXR5LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLXpvb20tdG8tcmVjb3Jkcy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2ludGVyYWN0aXZlLWRyYXctdG9vbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9sb2FkaW5nLXJlc3VsdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS1yZXN1bHQtaXRlbS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS1yZXN1bHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1jb250ZXh0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stZm9ybS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxhYmVsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC1pbmxpbmUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLXNwYXRpYWwtZm9ybS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcmVzdWx0cy1tYW5hZ2VtZW50LXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvc2VsZWN0aW9uLXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvc2ltcGxlLWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvdHJhbnNsYXRpb25zL2RlZmF1bHQudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS91c2VBdXRvSGVpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC1jb25maWcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS93aWRnZXQtY29udGV4dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS96b29tLXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3ZlcnNpb24tbWFuYWdlci50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy92ZXJzaW9uLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi9jb21tb24tY29tcG9uZW50cy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi9kYXRhLXNvdXJjZS10aXAudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24vZGVidWctbG9nZ2VyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24vdXNlLWRzLWV4aXN0cy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi91dGlscy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmUvZW1vdGlvblwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1hcmNnaXNcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXRoZW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZS9yZWFjdFwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwid2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb25cIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWNvcmUvbGliL3NldC1wdWJsaWMtcGF0aC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgRG93bkZpbGxlZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFJpZ2h0RmlsbGVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEFycm93TGVmdE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgQ29sbGFwc2VBbGxPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBFeHBhbmRBbGxPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFRyYXNoT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEluZm9PdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm0xNCA0LTYgOC02LTh6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTQgMiA4IDYtOCA2elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTIgN2ExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJtNSAxYTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMG02IDBhMSAxIDAgMSAxIDIgMCAxIDEgMCAwIDEtMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMTUgNy41YS41Mi41MiAwIDAgMS0uNTE2LjUyN0gyLjk3Nkw2LjQ3MyAxMS42YS41MzUuNTM1IDAgMCAxIDAgLjc0Ni41MS41MSAwIDAgMS0uNzMgMEwxIDcuNWw0Ljc0My00Ljg0NmEuNTEuNTEgMCAwIDEgLjczIDAgLjUzNS41MzUgMCAwIDEgMCAuNzQ2TDIuOTc2IDYuOTczaDExLjUwOGMuMjg1IDAgLjUxNi4yMzYuNTE2LjUyN1xcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTUuMDM2IDYuMTQ2YS41LjUgMCAwIDAtLjcwOCAwTDEuMTQ2IDkuMzI4YS41LjUgMCAxIDAgLjcwOC43MDhsMi4zMjgtMi4zMjlWMTQuNWgxVjcuNzA3bDIuMzI4IDIuMzI5YS41LjUgMCAxIDAgLjcwOC0uNzA4elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTQuMzI4IDE0LjM1NGEuNS41IDAgMCAwIC43MDggMGwzLjE4Mi0zLjE4MmEuNS41IDAgMSAwLS43MDgtLjcwOGwtMi4zMjggMi4zMjlWNmgtMXY2Ljc5M2wtMi4zMjgtMi4zMjhhLjUuNSAwIDEgMC0uNzA4LjcwN3pcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk00LjY1MyAxMy44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4TDEwLjI0IDggNC42NTMgMi44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4LjU0LjU0IDAgMCAxIC43MzggMGw1Ljk1NiA1LjVhLjQ4NS40ODUgMCAwIDEgMCAuNzA4bC01Ljk1NiA1LjVhLjU0LjU0IDAgMCAxLS43MzggMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTguNzQ1IDggNi4xIDYuMWEuNTI3LjUyNyAwIDEgMS0uNzQ1Ljc0Nkw4IDguNzQ2bC02LjEgNi4xYS41MjcuNTI3IDAgMSAxLS43NDYtLjc0Nmw2LjEtNi4xLTYuMS02LjFhLjUyNy41MjcgMCAwIDEgLjc0Ni0uNzQ2bDYuMSA2LjEgNi4xLTYuMWEuNTI3LjUyNyAwIDAgMSAuNzQ2Ljc0NnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNNiA2LjVhLjUuNSAwIDAgMSAxIDB2NmEuNS41IDAgMCAxLTEgMHpNOS41IDZhLjUuNSAwIDAgMC0uNS41djZhLjUuNSAwIDAgMCAxIDB2LTZhLjUuNSAwIDAgMC0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTExIDBINWExIDEgMCAwIDAtMSAxdjJILjVhLjUuNSAwIDAgMCAwIDFoMS42bC44MSAxMS4xYTEgMSAwIDAgMCAuOTk1LjloOC4xOWExIDEgMCAwIDAgLjk5NS0uOUwxMy45IDRoMS42YS41LjUgMCAwIDAgMC0xSDEyVjFhMSAxIDAgMCAwLTEtMW0wIDNWMUg1djJ6bTEuODk1IDFoLTkuNzlsLjggMTFoOC4xOXpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNE04IDRhLjkwNS45MDUgMCAwIDAtLjkuOTk1bC4zNSAzLjUwN2EuNTUyLjU1MiAwIDAgMCAxLjEgMGwuMzUtMy41MDdBLjkwNS45MDUgMCAwIDAgOCA0bTEgN2ExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk04IDUuNWExIDEgMCAxIDAgMC0yIDEgMSAwIDAgMCAwIDJNNi41IDcuNUEuNS41IDAgMCAxIDcgN2gxLjV2NC41aDFhLjUuNSAwIDAgMSAwIDFoLTNhLjUuNSAwIDAgMSAwLTFoMVY4SDdhLjUuNSAwIDAgMS0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAyLjEyNSAxNC4zMzQgMTRIMS42Njd6bS0uODgyLS40N2ExIDEgMCAwIDEgMS43NjUgMGw2LjMzMyAxMS44NzRBMSAxIDAgMCAxIDE0LjMzNCAxNUgxLjY2N2ExIDEgMCAwIDEtLjg4Mi0xLjQ3ek04IDQuODc0YS45MDUuOTA1IDAgMCAwLS45Ljk5NWwuMzUgMy41MDdhLjU1Mi41NTIgMCAwIDAgMS4xIDBMOC45IDUuODdhLjkwNS45MDUgMCAwIDAtLjktLjk5NW0xIDdhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDIwIDIwXFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNOC41IDNBNS41IDUuNSAwIDAgMSAxNCA4LjVhNS41IDUuNSAwIDAgMS0xLjI3MyAzLjUyN2w0LjA1MyA0LjA1NGEuNzUuNzUgMCAxIDEtMS4wNiAxLjA2bC00LjA1NC00LjA1M2E1LjUgNS41IDAgMCAxLTMuNTI3IDEuMjczIDUuNSA1LjUgMCAxIDEgMC0xMUg4LjV6bTAgMS41aC0uMzYxYTQgNCAwIDEgMCAwIDggNCA0IDAgMCAwIDAtOHpcXFwiPjwvcGF0aD48cmVjdCB3aWR0aD1cXFwiMTlcXFwiIGhlaWdodD1cXFwiMTlcXFwiIHg9XFxcIi41XFxcIiB5PVxcXCIuNVxcXCIgc3Ryb2tlPVxcXCIjMDAwXFxcIiByeD1cXFwiMS41XFxcIj48L3JlY3Q+PC9zdmc+XCIiLCJpbXBvcnQgdHlwZSB7IFNwYXRpYWxSZWxhdGlvbnNoaXAsIFVuaXRzIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHR5cGUgeyBJbW11dGFibGVPYmplY3QsIEltbXV0YWJsZUFycmF5LCBTcWxFeHByZXNzaW9uLCBVc2VEYXRhU291cmNlLCBJY29uUmVzdWx0LCBPcmRlckJ5T3B0aW9uIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBTaXplIH0gZnJvbSAnamltdS11aSdcblxuZXhwb3J0IGVudW0gQ3JlYXRlVG9vbFR5cGUge1xuICBQb2ludCA9ICdQb2ludCcsXG4gIFBvbHlsaW5lID0gJ1BvbHlsaW5lJyxcbiAgUG9seWdvbiA9ICdQb2x5Z29uJyxcbiAgUmVjdGFuZ2xlID0gJ1JlY3RhbmdsZScsXG4gIENpcmNsZSA9ICdDaXJjbGUnXG59XG5cbmV4cG9ydCBlbnVtIFNlbGVjdGlvblR5cGUge1xuICBOZXdTZWxlY3Rpb24gPSAnTkVXX1NFTEVDVElPTicsXG4gIEFkZFRvU2VsZWN0aW9uID0gJ0FERF9UT19DVVJSRU5UX1NFTEVDVElPTicsXG4gIFJlbW92ZUZyb21TZWxlY3Rpb24gPSAnUkVNT1ZFX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTdWJzZXRTZWxlY3Rpb24gPSAnU1VCU0VUX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTd2l0Y2hTZWxlY3Rpb24gPSAnU1dJVENIX0NVUlJFTlRfU0VMRUNUSU9OJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWVsZCB7XG4gIG5hbWU6IHN0cmluZ1xuICBhbGlhcz86IHN0cmluZ1xuICBsYWJlbD86IHN0cmluZ1xufVxuXG5leHBvcnQgZW51bSBRdWVyeUFycmFuZ2VUeXBlIHtcbiAgQmxvY2sgPSAnQkxPQ0snLFxuICBJbmxpbmUgPSAnSU5MSU5FJyxcbiAgUG9wcGVyID0gJ1BPUFBFUicsXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxGaWx0ZXJUeXBlIHtcbiAgQ3VycmVudE1hcEV4dGVudCA9ICdDdXJyZW50TWFwRXh0ZW50JyxcbiAgSW50ZXJhY3RpdmVEcmF3TW9kZSA9ICdJbnRlcmFjdGl2ZURyYXdNb2RlJyxcbiAgTm9uZSA9ICcnXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxSZWxhdGlvbiB7XG4gIEludGVyc2VjdCA9ICdpbnRlcnNlY3RzJyxcbiAgQ29udGFpbiA9ICdjb250YWlucycsXG4gIENyb3NzID0gJ2Nyb3NzZXMnLFxuICBFbnZlbG9wZUludGVyc2VjdCA9ICdlbnZlbG9wZS1pbnRlcnNlY3RzJyxcbiAgSW5kZXhJbnRlcnNlY3QgPSAnaW5kZXgtaW50ZXJzZWN0cycsXG4gIE92ZXJsYXAgPSAnb3ZlcmxhcHMnLFxuICBUb3VjaCA9ICd0b3VjaGVzJyxcbiAgV2l0aGluID0gJ3dpdGhpbicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3BhdGlhbEZpbHRlck9iaiB7XG4gIGdlb21ldHJ5OiBhbnlcbiAgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljXG4gIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhblxuICByZWxhdGlvbj86IFNwYXRpYWxSZWxhdGlvblxuICBidWZmZXI/OiB7IGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlIH1cbn1cblxuZXhwb3J0IGNvbnN0IG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsOiB7IFtrZXk6IHN0cmluZ106IFNwYXRpYWxSZWxhdGlvbnNoaXAgfSA9IHtcbiAgW1NwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5Db250YWluXTogJ2VzcmlTcGF0aWFsUmVsQ29udGFpbnMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkNyb3NzXTogJ2VzcmlTcGF0aWFsUmVsQ3Jvc3NlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uRW52ZWxvcGVJbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxFbnZlbG9wZUludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkluZGV4SW50ZXJzZWN0XTogJ2VzcmlTcGF0aWFsUmVsSW5kZXhJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5PdmVybGFwXTogJ2VzcmlTcGF0aWFsUmVsT3ZlcmxhcHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLlRvdWNoXTogJ2VzcmlTcGF0aWFsUmVsVG91Y2hlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uV2l0aGluXTogJ2VzcmlTcGF0aWFsUmVsV2l0aGluJ1xufVxuXG5leHBvcnQgZW51bSBVbml0VHlwZSB7XG4gIE1pbGVzID0gJ01pbGVzJyxcbiAgS2lsb21ldGVycyA9ICdLaWxvbWV0ZXJzJyxcbiAgRmVldCA9ICdGZWV0JyxcbiAgTWV0ZXJzID0gJ01ldGVycycsXG4gIE5hdXRpY2FsTWlsZXMgPSAnTmF1dGljYWxNaWxlcycsXG59XG5cbmV4cG9ydCBjb25zdCBtYXBKU0FQSVVuaXRUb0RzVW5pdDogeyBba2V5OiBzdHJpbmddOiBVbml0cyB9ID0ge1xuICBbVW5pdFR5cGUuTWlsZXNdOiAnZXNyaVNSVW5pdF9TdGF0dXRlTWlsZScsXG4gIFtVbml0VHlwZS5LaWxvbWV0ZXJzXTogJ2VzcmlTUlVuaXRfS2lsb21ldGVyJyxcbiAgW1VuaXRUeXBlLkZlZXRdOiAnZXNyaVNSVW5pdF9Gb290JyxcbiAgW1VuaXRUeXBlLk1ldGVyc106ICdlc3JpU1JVbml0X01ldGVyJyxcbiAgW1VuaXRUeXBlLk5hdXRpY2FsTWlsZXNdOiAnZXNyaVNSVW5pdF9OYXV0aWNhbE1pbGUnXG59XG5cbmV4cG9ydCBlbnVtIExpc3REaXJlY3Rpb24ge1xuICBIb3Jpem9udGFsID0gJ0hvcml6b250YWwnLFxuICBWZXJ0aWNhbCA9ICdWZXJ0aWNhbCcsXG59XG5cbmV4cG9ydCBlbnVtIFBhZ2luZ1R5cGUge1xuICBNdWx0aVBhZ2UgPSAnTXVsdGlQYWdlJyxcbiAgTGF6eUxvYWQgPSAnTGF6eUxvYWQnLFxuICBTaW1wbGUgPSAnU2ltcGxlJywgLy8gUmVuZGVyIGFsbCByZWNvcmRzIGF0IG9uY2UsIG5vIGxhenkgbG9hZGluZyBvciBwYWdpbmF0aW9uXG59XG5cbmV4cG9ydCBlbnVtIEZpZWxkc1R5cGUge1xuICBQb3B1cFNldHRpbmcgPSAnUG9wdXBTZXR0aW5nJyxcbiAgU2VsZWN0QXR0cmlidXRlcyA9ICdTZWxlY3RBdHRyaWJ1dGVzJyxcbn1cblxuZXhwb3J0IGVudW0gU29ydERpcmVjdGlvbiB7XG4gIEFzYyA9ICdBc2MnLFxuICBEZXNjID0gJ0Rlc2MnLFxufVxuXG5leHBvcnQgZW51bSBSZXN1bHRTZWxlY3RNb2RlIHtcbiAgU2luZ2xlID0gJ1NpbmdsZScsXG4gIE11bHRpcGxlID0gJ011bHRpcGxlJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTb3J0T3B0aW9uIHtcbiAgbmFtZTogc3RyaW5nXG4gIGRpcmVjdGlvbjogU29ydERpcmVjdGlvblxufVxuXG5leHBvcnQgZW51bSBTeW1ib2xUeXBlIHtcbiAgRGVmYXVsdFN5bWJvbCA9ICdEZWZhdWx0U3ltYm9sJyxcbiAgQ3VzdG9tU3ltYm9sID0gJ0N1c3RvbVN5bWJvbCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlJdGVtVHlwZSB7XG4gIGNvbmZpZ0lkOiBzdHJpbmdcbiAgaWNvbj86IEljb25SZXN1bHRcbiAgbmFtZT86IHN0cmluZ1xuICBkaXNwbGF5TGFiZWw/OiBib29sZWFuXG4gIHVzZURhdGFTb3VyY2U/OiBVc2VEYXRhU291cmNlXG4gIG91dHB1dERhdGFTb3VyY2VJZD86IHN0cmluZ1xuICB1c2VBdHRyaWJ1dGVGaWx0ZXI/OiBib29sZWFuXG4gIHVzZVNwYXRpYWxGaWx0ZXI/OiBib29sZWFuXG4gIGF0dHJpYnV0ZUZpbHRlckxhYmVsPzogc3RyaW5nXG4gIHNwYXRpYWxGaWx0ZXJMYWJlbD86IHN0cmluZ1xuICBhdHRyaWJ1dGVGaWx0ZXJEZXNjPzogc3RyaW5nXG4gIHNwYXRpYWxGaWx0ZXJEZXNjPzogc3RyaW5nXG4gIHJlc3VsdHNMYWJlbD86IHN0cmluZ1xuICBzcWxFeHByT2JqPzogU3FsRXhwcmVzc2lvblxuICBzcGF0aWFsTWFwV2lkZ2V0SWRzPzogc3RyaW5nW11cbiAgc3BhdGlhbEZpbHRlclR5cGVzPzogU3BhdGlhbEZpbHRlclR5cGVbXVxuICBzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXM/OiBDcmVhdGVUb29sVHlwZVtdXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcj86IGJvb2xlYW5cbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2U/OiBudW1iZXJcbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdD86IFVuaXRUeXBlXG4gIHNwYXRpYWxSZWxhdGlvbnM/OiBTcGF0aWFsUmVsYXRpb25bXVxuICBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz86IFVzZURhdGFTb3VyY2VbXVxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVTZWxlY3RUb29sPzogYm9vbGVhblxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXI/OiBib29sZWFuXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlPzogbnVtYmVyXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXQ/OiBVbml0VHlwZVxuICBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhPzogYm9vbGVhblxuICByZXN1bHRMaXN0RGlyZWN0aW9uPzogTGlzdERpcmVjdGlvblxuICByZXN1bHRQYWdpbmdTdHlsZT86IFBhZ2luZ1R5cGVcbiAgcmVzdWx0RmllbGRzVHlwZT86IEZpZWxkc1R5cGVcbiAgcmVzdWx0VGl0bGVGaWVsZHM/OiBzdHJpbmdbXVxuICByZXN1bHRUaXRsZUV4cHJlc3Npb24/OiBzdHJpbmdcbiAgcmVzdWx0RGlzcGxheUZpZWxkcz86IHN0cmluZ1tdXG4gIHJlc3VsdFN5bWJvbFR5cGU/OiBTeW1ib2xUeXBlXG4gIHJlc3VsdEN1c3RvbVN5bWJvbD86IGFueVxuICByZXN1bHRBbGxvd0NoYW5nZVN5bWJvbD86IGJvb2xlYW5cbiAgcmVzdWx0RXhwYW5kQnlEZWZhdWx0PzogYm9vbGVhblxuICByZXN1bHRTZWxlY3RNb2RlPzogUmVzdWx0U2VsZWN0TW9kZVxuICBhbGxvd0V4cG9ydD86IGJvb2xlYW5cbiAgc29ydE9wdGlvbnM/OiBPcmRlckJ5T3B0aW9uW11cbiAgaXRlbVNpemVNYXA/OiB7XG4gICAgYXJyYW5nZW1lbnRIb3Jpem9udGFsUG9wcGVyPzogU2l6ZU1hcFxuICB9XG4gIC8vIEdyb3VwaW5nIGZpZWxkc1xuICBncm91cElkPzogc3RyaW5nXG4gIGdyb3VwRGlzcGxheU5hbWU/OiBzdHJpbmdcbiAgc2VhcmNoQWxpYXM/OiBzdHJpbmdcbiAgc2hvcnRJZD86IHN0cmluZ1xuICB6b29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbiAgLy8gRGlzcGxheSBvcmRlciAobG93ZXIgbnVtYmVycyBhcHBlYXIgZmlyc3QsIG9wdGlvbmFsKVxuICBvcmRlcj86IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNpemVNYXAge1xuICBtaW5TaXplPzogU2l6ZVxuICBkZWZhdWx0U2l6ZT86IFNpemVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nQ29uZmlnIHtcbiAgcXVlcnlJdGVtcz86IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGFycmFuZ2VUeXBlOiBRdWVyeUFycmFuZ2VUeXBlXG4gIGFycmFuZ2VXcmFwPzogYm9vbGVhblxuICByZXN1bHRMaXN0RGlyZWN0aW9uPzogTGlzdERpcmVjdGlvblxuICByZXN1bHRQYWdpbmdTdHlsZT86IFBhZ2luZ1R5cGVcbiAgbGF6eUxvYWRJbml0aWFsUGFnZVNpemU/OiBudW1iZXJcbiAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodDogYm9vbGVhbiAvLyBVc2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAocmVxdWlyZWQgLSBpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KVxuICBoaWdobGlnaHRNYXBXaWRnZXRJZD86IHN0cmluZyAvLyBNYXAgd2lkZ2V0IElEIHRvIHVzZSBmb3IgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gIHNpemVNYXA/OiB7XG4gICAgYXJyYW5nZW1lbnRJY29uUG9wcGVyPzogU2l6ZU1hcFxuICB9XG59XG5cbmV4cG9ydCB0eXBlIElNQ29uZmlnID0gSW1tdXRhYmxlT2JqZWN0PFNldHRpbmdDb25maWc+XG5cblxuIiwiLyoqXG4gKiBDdXN0b20gXCJBZGQgdG8gTWFwXCIgZGF0YSBhY3Rpb24gZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIFxuICogVGhpcyBhY3Rpb24gcmVwbGFjZXMgdGhlIGZyYW1ld29yaydzIFwiU2hvdyBvbiBNYXBcIiBhY3Rpb24gd2l0aCBhIGN1c3RvbVxuICogaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MgKHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKS5cbiAqIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IGJlaGF2aW9yIHdpdGggcXVlcnkgcmVzdWx0cyBhbmQgcHJvcGVyIGludGVncmF0aW9uXG4gKiB3aXRoIHRoZSB3aWRnZXQncyBcIkNsZWFyIHJlc3VsdHNcIiBmdW5jdGlvbmFsaXR5LlxuICovXG5cbmltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgSW50bFNoYXBlLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB9IGZyb20gJy4uL3J1bnRpbWUvc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHR5cGUgeyBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcblxuLyoqXG4gKiBDcmVhdGVzIGEgY3VzdG9tIFwiQWRkIHRvIE1hcFwiIGRhdGEgYWN0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiBhbmQgZW5zdXJlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciB3aXRoIFF1ZXJ5U2ltcGxlJ3MgcXVlcnkgcmVzdWx0cyBieSB1c2luZyB0aGUgc2FtZSBzZWxlY3Rpb24gbWVjaGFuaXNtLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIHRoYXQgcHJvdmlkZXMgdGhpcyBhY3Rpb25cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIHNlbGVjdGlvbiBvbiB0aGUgb3JpZ2luIGxheWVyKVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcGFyYW0gcXVlcnlJdGVtIC0gT3B0aW9uYWwgcXVlcnkgaXRlbSBjb25maWd1cmF0aW9uIChmb3Igem9vbVRvU2VsZWN0ZWQgc2V0dGluZylcbiAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIHpvb20gb3ZlcnJpZGUgZnJvbSB0aGUgcXVlcnkgZm9ybVxuICogQHJldHVybnMgQSBEYXRhQWN0aW9uIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGJ5IERhdGFBY3Rpb25MaXN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZGRUb01hcEFjdGlvbihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UsXG4gIGludGw6IEludGxTaGFwZSxcbiAgcXVlcnlJdGVtPzogUXVlcnlJdGVtVHlwZSxcbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuKTogRGF0YUFjdGlvbiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGAke3dpZGdldElkfS1hZGRUb01hcGAsXG4gICAgbmFtZTogJ2FkZFRvTWFwJyxcbiAgICBsYWJlbDogaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdhZGRUb01hcCcsIGRlZmF1bHRNZXNzYWdlOiAnQWRkIHRvIG1hcCcgfSksXG4gICAgLy8gSWNvbiBtYXRjaGVzIHRoZSBmcmFtZXdvcmsncyBcIlNob3cgb24gTWFwXCIgYWN0aW9uIGZvciBjb25zaXN0ZW5jeVxuICAgIGljb246IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZycpLmRlZmF1bHQgfHwgcmVxdWlyZSgnLi4vcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnJyksXG4gICAgLy8gTm90ZTogSW5kZXggbWF5IG5vdCBjb250cm9sIHBvc2l0aW9uIGlmIGV4dHJhQWN0aW9ucyBhcmUgYWx3YXlzIGFwcGVuZGVkIGFmdGVyIGZyYW1ld29yayBhY3Rpb25zXG4gICAgaW5kZXg6IC0xMDAsXG4gICAgd2lkZ2V0SWQsXG4gICAgaW50bCxcbiAgICBzdXBwb3J0UHJvdmlkZXJXaWRnZXQ6IHRydWUsXG4gICAgXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIGFjdGlvbiBjYW4gcHJvY2VzcyB0aGUgZ2l2ZW4gZGF0YSBzZXRzLlxuICAgICAqIFN1cHBvcnRzIFJlY29yZHMgbGV2ZWwgYWN0aW9ucyB3aXRoIGZlYXR1cmUgZGF0YSByZWNvcmRzLlxuICAgICAqL1xuICAgIGlzU3VwcG9ydGVkOiBhc3luYyAoZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSwgZGF0YUxldmVsOiBEYXRhTGV2ZWwsIGFjdGlvbldpZGdldElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGFjdGlvbldpZGdldElkLFxuICAgICAgICBkYXRhTGV2ZWwsXG4gICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFNcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc3VwcG9ydCBSZWNvcmRzIGxldmVsIGFjdGlvbnNcbiAgICAgIGlmIChkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm90IFJlY29yZHMgbGV2ZWwnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBOZWVkIGF0IGxlYXN0IG9uZSBkYXRhIHNldCB3aXRoIHJlY29yZHNcbiAgICAgIGlmICghZGF0YVNldHMgfHwgZGF0YVNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZGF0YSBzZXRzJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWNvcmRzIGFuZCBvdXRwdXQgZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IGhhc1JlY29yZHMgPSBkYXRhU2V0cy5zb21lKGRzID0+IGRzLnJlY29yZHMgJiYgZHMucmVjb3Jkcy5sZW5ndGggPiAwKVxuICAgICAgY29uc3Qgc3VwcG9ydGVkID0gaGFzUmVjb3JkcyAmJiAhIW91dHB1dERTXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgcmVzdWx0OiBzdXBwb3J0ZWQsXG4gICAgICAgIGhhc1JlY29yZHMsXG4gICAgICAgIHJlY29yZHNDb3VudDogZGF0YVNldHMucmVkdWNlKChzdW0sIGRzKSA9PiBzdW0gKyAoZHMucmVjb3Jkcz8ubGVuZ3RoIHx8IDApLCAwKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIHN1cHBvcnRlZFxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGFjdGlvbiBieSBzZWxlY3RpbmcgcmVjb3JkcyB1c2luZyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLlxuICAgICAqL1xuICAgIG9uRXhlY3V0ZTogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgYWN0aW9uV2lkZ2V0SWQsXG4gICAgICAgIGRhdGFMZXZlbCxcbiAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREU1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKCFvdXRwdXREUyB8fCBkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogIW91dHB1dERTID8gJ05vIG91dHB1dERTJyA6ICdOb3QgUmVjb3JkcyBsZXZlbCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbGxlY3QgYWxsIHJlY29yZHMgZnJvbSBhbGwgZGF0YSBzZXRzXG4gICAgICBjb25zdCBhbGxSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgICAgIGRhdGFTZXRzLmZvckVhY2goZGF0YVNldCA9PiB7XG4gICAgICAgIGlmIChkYXRhU2V0LnJlY29yZHMgJiYgZGF0YVNldC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBGaWx0ZXIgdG8gb25seSBGZWF0dXJlRGF0YVJlY29yZCB0eXBlc1xuICAgICAgICAgIGNvbnN0IGZlYXR1cmVSZWNvcmRzID0gZGF0YVNldC5yZWNvcmRzLmZpbHRlcihcbiAgICAgICAgICAgIChyZWNvcmQpOiByZWNvcmQgaXMgRmVhdHVyZURhdGFSZWNvcmQgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcmVjb3JkICYmIHR5cGVvZiAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXRHZW9tZXRyeSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgICBhbGxSZWNvcmRzLnB1c2goLi4uZmVhdHVyZVJlY29yZHMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChhbGxSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICdObyBmZWF0dXJlIHJlY29yZHMgZm91bmQnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZXQgcmVjb3JkIElEc1xuICAgICAgY29uc3QgcmVjb3JkSWRzID0gYWxsUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGFsbFJlY29yZHMubGVuZ3RoLFxuICAgICAgICByZWNvcmRJZHM6IHJlY29yZElkcy5zbGljZSgwLCAxMCksIC8vIExvZyBmaXJzdCAxMCBJRHNcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWRcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVzZSBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzIC0gc2VsZWN0cyBvbiBvcmlnaW4gbGF5ZXIgYW5kIHB1Ymxpc2hlcyBzZWxlY3Rpb24gbWVzc2FnZXNcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IGJlaGF2aW9yIHdpdGggcXVlcnkgcmVzdWx0cyBhbmQgcHJvcGVyIGludGVncmF0aW9uIHdpdGggXCJDbGVhciByZXN1bHRzXCJcbiAgICAgIHRyeSB7XG4gICAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCBhbGxSZWNvcmRzLCB0cnVlKVxuICAgICAgICBcbiAgICAgICAgLy8gTm90ZTogWm9vbSBpcyBub3cgaGFuZGxlZCBieSB0aGUgc2VwYXJhdGUgXCJab29tIFRvXCIgYWN0aW9uIGluIHRoZSBEYXRhQWN0aW9uTGlzdFxuICAgICAgICAvLyBVc2VycyBjYW4gY2xpY2sgXCJab29tIFRvXCIgZnJvbSB0aGUgYWN0aW9uIG1lbnUgaWYgdGhleSB3YW50IHRvIHpvb20gdG8gc2VsZWN0ZWQgcmVjb3Jkc1xuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IHNlbGVjdGVkIHJlY29yZHMgYW5kIHB1Ymxpc2hlZCBzZWxlY3Rpb24gbWVzc2FnZSdcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIENsZWFudXAgbWV0aG9kIChyZXF1aXJlZCBieSBEYXRhQWN0aW9uIGludGVyZmFjZSlcbiAgICAgKi9cbiAgICBkZXN0cm95OiAoKTogdm9pZCA9PiB7XG4gICAgICAvLyBObyBjbGVhbnVwIG5lZWRlZFxuICAgIH1cbiAgfVxufVxuXG4iLCJpbXBvcnQgeyB0eXBlIERhdGFSZWNvcmRTZXQsIHR5cGUgRGF0YUFjdGlvbiwgRGF0YUxldmVsLCB0eXBlIERhdGFTb3VyY2UsIHR5cGUgSW50bFNoYXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgY3JlYXRlQWRkVG9NYXBBY3Rpb24gfSBmcm9tICcuL2FkZC10by1tYXAtYWN0aW9uJ1xuaW1wb3J0IHsgY3JlYXRlWm9vbVRvQWN0aW9uIH0gZnJvbSAnLi96b29tLXRvLWFjdGlvbidcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcblxuLyoqXG4gKiBRdWVyeVNpbXBsZSBDdXN0b20gRGF0YSBBY3Rpb25zXG4gKiBcbiAqIFJldHVybnMgY3VzdG9tIGRhdGEgYWN0aW9ucyBmb3IgdGhlIHdpZGdldC5cbiAqIEluY2x1ZGVzIGN1c3RvbSBcIlpvb20gVG9cIiBhbmQgXCJBZGQgdG8gTWFwXCIgYWN0aW9ucyB0aGF0IHVzZSBRdWVyeVNpbXBsZSdzIHByb2Nlc3Nlcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAobnVsbC91bmRlZmluZWQgaWYgbm90IGF2YWlsYWJsZSlcbiAqIEBwYXJhbSBtYXBWaWV3IC0gVGhlIG1hcCB2aWV3IChudWxsL3VuZGVmaW5lZCBpZiBub3QgYXZhaWxhYmxlKVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcGFyYW0gcXVlcnlJdGVtIC0gT3B0aW9uYWwgcXVlcnkgaXRlbSBjb25maWd1cmF0aW9uXG4gKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSB6b29tIG92ZXJyaWRlIGZyb20gdGhlIHF1ZXJ5IGZvcm1cbiAqIEByZXR1cm5zIEFycmF5IG9mIGN1c3RvbSBEYXRhQWN0aW9uIG9iamVjdHMgKGVtcHR5IGlmIGNvbmRpdGlvbnMgbm90IG1ldClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4dHJhQWN0aW9ucyhcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCB1bmRlZmluZWQsXG4gIGludGw6IEludGxTaGFwZSxcbiAgcXVlcnlJdGVtPzogUXVlcnlJdGVtVHlwZSxcbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuKTogRGF0YUFjdGlvbltdIHtcbiAgY29uc3QgYWN0aW9uczogRGF0YUFjdGlvbltdID0gW11cbiAgXG4gIC8vIEFkZCBcIlpvb20gVG9cIiBhY3Rpb24gaWYgd2UgaGF2ZSBtYXBWaWV3IGFuZCBpbnRsXG4gIGlmIChtYXBWaWV3ICYmIGludGwpIHtcbiAgICBhY3Rpb25zLnB1c2goY3JlYXRlWm9vbVRvQWN0aW9uKHdpZGdldElkLCBtYXBWaWV3LCBpbnRsKSlcbiAgfVxuICBcbiAgLy8gQWRkIFwiQWRkIHRvIE1hcFwiIGFjdGlvbiBpZiB3ZSBoYXZlIG91dHB1dERTIGFuZCBpbnRsXG4gIGlmIChvdXRwdXREUyAmJiBpbnRsKSB7XG4gICAgYWN0aW9ucy5wdXNoKGNyZWF0ZUFkZFRvTWFwQWN0aW9uKHdpZGdldElkLCBvdXRwdXREUywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpKVxuICB9XG4gIFxuICByZXR1cm4gYWN0aW9uc1xufVxuXG4iLCIvKipcbiAqIEN1c3RvbSBcIlpvb20gVG9cIiBkYXRhIGFjdGlvbiBmb3IgUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJab29tIFRvXCIgYWN0aW9uIHdpdGggYSBjdXN0b21cbiAqIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHpvb20gbG9naWMgKG1hcFZpZXcuZ29UbyB3aXRoIHBhZGRpbmcpLlxuICogVGhpcyBlbnN1cmVzIGNvbnNpc3RlbnQgem9vbSBiZWhhdmlvciB3aXRoIHByb3BlciBwYWRkaW5nLlxuICovXG5cbmltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgSW50bFNoYXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IHsgem9vbVRvUmVjb3JkcyB9IGZyb20gJy4uL3J1bnRpbWUvem9vbS11dGlscydcbmltcG9ydCB0eXBlIHsgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogQ3JlYXRlcyBhIGN1c3RvbSBcIlpvb20gVG9cIiBkYXRhIGFjdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyB6b29tIGxvZ2ljLlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJab29tIFRvXCIgYWN0aW9uIGFuZCBlbnN1cmVzIGNvbnNpc3RlbnRcbiAqIHpvb20gYmVoYXZpb3Igd2l0aCBwYWRkaW5nIHVzaW5nIG1hcFZpZXcuZ29UbygpLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIHRoYXQgcHJvdmlkZXMgdGhpcyBhY3Rpb25cbiAqIEBwYXJhbSBtYXBWaWV3IC0gVGhlIG1hcCB2aWV3IHRvIHpvb20gKE1hcFZpZXcgb3IgU2NlbmVWaWV3KVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcmV0dXJucyBBIERhdGFBY3Rpb24gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgYnkgRGF0YUFjdGlvbkxpc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVpvb21Ub0FjdGlvbihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgdW5kZWZpbmVkLFxuICBpbnRsOiBJbnRsU2hhcGVcbik6IERhdGFBY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIGlkOiBgJHt3aWRnZXRJZH0tem9vbVRvYCxcbiAgICBuYW1lOiAncXVlcnlTaW1wbGVab29tVG8nLCAvLyBVc2UgdW5pcXVlIG5hbWUgdG8gYXZvaWQgY29uZmxpY3Qgd2l0aCBmcmFtZXdvcmsgYWN0aW9uXG4gICAgbGFiZWw6IGludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnem9vbVRvU2VsZWN0ZWQnLCBkZWZhdWx0TWVzc2FnZTogJ1pvb20gdG8gc2VsZWN0ZWQnIH0pLFxuICAgIC8vIFVzZSB0aGUgc2FtZSBpY29uIGFzIHRoZSBmcmFtZXdvcmsncyB6b29tIGFjdGlvbiAoZnJvbSBFeEIgY29uZmlndXJhdGlvbiBwYWdlKVxuICAgIGljb246IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3pvb20tdG8uc3ZnJykuZGVmYXVsdCB8fCByZXF1aXJlKCcuLi9ydW50aW1lL2Fzc2V0cy9pY29ucy96b29tLXRvLnN2ZycpLFxuICAgIGluZGV4OiAtOTAsIC8vIFBvc2l0aW9uIGJlZm9yZSBBZGQgdG8gTWFwICgtMTAwKVxuICAgIHdpZGdldElkLFxuICAgIGludGwsXG4gICAgc3VwcG9ydFByb3ZpZGVyV2lkZ2V0OiB0cnVlLFxuICAgIFxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhpcyBhY3Rpb24gY2FuIHByb2Nlc3MgdGhlIGdpdmVuIGRhdGEgc2V0cy5cbiAgICAgKiBTdXBwb3J0cyBSZWNvcmRzIGxldmVsIGFjdGlvbnMgd2l0aCBmZWF0dXJlIGRhdGEgcmVjb3Jkcy5cbiAgICAgKi9cbiAgICBpc1N1cHBvcnRlZDogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICd6b29tVG8taXNTdXBwb3J0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgYWN0aW9uV2lkZ2V0SWQsXG4gICAgICAgIGRhdGFMZXZlbCxcbiAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIW1hcFZpZXdcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc3VwcG9ydCBSZWNvcmRzIGxldmVsIGFjdGlvbnNcbiAgICAgIGlmIChkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnem9vbVRvLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vdCBSZWNvcmRzIGxldmVsJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTmVlZCBhdCBsZWFzdCBvbmUgZGF0YSBzZXQgd2l0aCByZWNvcmRzIGFuZCBhIG1hcCB2aWV3XG4gICAgICBpZiAoIWRhdGFTZXRzIHx8IGRhdGFTZXRzLmxlbmd0aCA9PT0gMCB8fCAhbWFwVmlldykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1pc1N1cHBvcnRlZCcsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICFkYXRhU2V0cyB8fCBkYXRhU2V0cy5sZW5ndGggPT09IDAgPyAnTm8gZGF0YSBzZXRzJyA6ICdObyBtYXBWaWV3J1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWNvcmRzXG4gICAgICBjb25zdCBoYXNSZWNvcmRzID0gZGF0YVNldHMuc29tZShkcyA9PiBkcy5yZWNvcmRzICYmIGRzLnJlY29yZHMubGVuZ3RoID4gMClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnem9vbVRvLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgcmVzdWx0OiBoYXNSZWNvcmRzLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRhdGFTZXRzLnJlZHVjZSgoc3VtLCBkcykgPT4gc3VtICsgKGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwKSwgMClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVybiBoYXNSZWNvcmRzXG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgYWN0aW9uIGJ5IHpvb21pbmcgdG8gcmVjb3JkcyB1c2luZyB0aGUgc2hhcmVkIHpvb20gdXRpbGl0eS5cbiAgICAgKi9cbiAgICBvbkV4ZWN1dGU6IGFzeW5jIChkYXRhU2V0czogRGF0YVJlY29yZFNldFtdLCBkYXRhTGV2ZWw6IERhdGFMZXZlbCwgYWN0aW9uV2lkZ2V0SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnem9vbVRvLW9uRXhlY3V0ZScsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBhY3Rpb25XaWRnZXRJZCxcbiAgICAgICAgZGF0YUxldmVsLFxuICAgICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc01hcFZpZXc6ICEhbWFwVmlld1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKCFtYXBWaWV3IHx8IGRhdGFMZXZlbCAhPT0gRGF0YUxldmVsLlJlY29yZHMpIHtcbiAgICAgICAgLy8gQlVHLUdSQVBISUNTLTAwMTogWm9vbSBvcGVyYXRpb25zIGZhaWwgd2hlbiBncmFwaGljcyBsYXllciBpcyBkaXNhYmxlZFxuICAgICAgICBpZiAoIW1hcFZpZXcpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0JVRycsIHtcbiAgICAgICAgICAgIGJ1Z0lkOiAnQlVHLUdSQVBISUNTLTAwMScsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ0dSQVBISUNTJyxcbiAgICAgICAgICAgIGV2ZW50OiAnem9vbS1vcGVyYXRpb24tZmFpbGVkLWdyYXBoaWNzLWxheWVyLWRpc2FibGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgb3BlcmF0aW9uOiAnem9vbS10by1zZWxlY3RlZC1hY3Rpb24nLFxuICAgICAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdab29tIHRvIHNlbGVjdGVkIGFjdGlvbiBhdHRlbXB0ZWQgYnV0IG1hcFZpZXcgaXMgdW5hdmFpbGFibGUgKGxpa2VseSBiZWNhdXNlIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgaXMgZGlzYWJsZWQpJyxcbiAgICAgICAgICAgIHdvcmthcm91bmQ6ICdFbmFibGUgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBpbiB3aWRnZXQgc2V0dGluZ3MnLFxuICAgICAgICAgICAgdGFyZ2V0UmVzb2x1dGlvbjogJ3IwMTkuMCdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAhbWFwVmlldyA/ICdObyBtYXBWaWV3JyA6ICdOb3QgUmVjb3JkcyBsZXZlbCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbGxlY3QgYWxsIHJlY29yZHMgZnJvbSBhbGwgZGF0YSBzZXRzXG4gICAgICBjb25zdCBhbGxSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgICAgIGRhdGFTZXRzLmZvckVhY2goZGF0YVNldCA9PiB7XG4gICAgICAgIGlmIChkYXRhU2V0LnJlY29yZHMgJiYgZGF0YVNldC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBGaWx0ZXIgdG8gb25seSBGZWF0dXJlRGF0YVJlY29yZCB0eXBlc1xuICAgICAgICAgIGNvbnN0IGZlYXR1cmVSZWNvcmRzID0gZGF0YVNldC5yZWNvcmRzLmZpbHRlcihcbiAgICAgICAgICAgIChyZWNvcmQpOiByZWNvcmQgaXMgRmVhdHVyZURhdGFSZWNvcmQgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcmVjb3JkICYmIHR5cGVvZiAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXRHZW9tZXRyeSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgICBhbGxSZWNvcmRzLnB1c2goLi4uZmVhdHVyZVJlY29yZHMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChhbGxSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZmVhdHVyZSByZWNvcmRzIGZvdW5kJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVXNlIHRoZSBzaGFyZWQgem9vbSB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICAgIGF3YWl0IHpvb21Ub1JlY29yZHMobWFwVmlldywgYWxsUmVjb3JkcylcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnem9vbVRvLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgem9vbWVkIHRvIGZlYXR1cmVzJyxcbiAgICAgICAgICByZWNvcmRzQ291bnQ6IGFsbFJlY29yZHMubGVuZ3RoXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICd6b29tVG8tb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogQ2xlYW51cCBtZXRob2QgKHJlcXVpcmVkIGJ5IERhdGFBY3Rpb24gaW50ZXJmYWNlKVxuICAgICAqL1xuICAgIGRlc3Ryb3k6ICgpOiB2b2lkID0+IHtcbiAgICAgIC8vIE5vIGNsZWFudXAgbmVlZGVkXG4gICAgfVxuICB9XG59XG5cbiIsImltcG9ydCB7XG4gIHR5cGUgUXVlcnlJdGVtVHlwZSxcbiAgQ3JlYXRlVG9vbFR5cGUsXG4gIFVuaXRUeXBlLFxuICBTcGF0aWFsUmVsYXRpb24sXG4gIExpc3REaXJlY3Rpb24sXG4gIFBhZ2luZ1R5cGUsXG4gIEZpZWxkc1R5cGUsXG4gIFN5bWJvbFR5cGVcbn0gZnJvbSAnLi9jb25maWcnXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1FVRVJZX0lURU06IFBhcnRpYWw8UXVlcnlJdGVtVHlwZT4gPSB7XG4gIGljb246IG51bGwsXG4gIGRpc3BsYXlMYWJlbDogdHJ1ZSxcbiAgc3FsRXhwck9iajogbnVsbCxcbiAgdXNlQXR0cmlidXRlRmlsdGVyOiB0cnVlLFxuICB1c2VTcGF0aWFsRmlsdGVyOiB0cnVlLFxuICBzcGF0aWFsTWFwV2lkZ2V0SWRzOiBbXSxcbiAgc3BhdGlhbEZpbHRlclR5cGVzOiBbXSxcbiAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzOiBbXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9pbnQsXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9seWxpbmUsXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9seWdvbixcbiAgICBDcmVhdGVUb29sVHlwZS5SZWN0YW5nbGUsXG4gICAgQ3JlYXRlVG9vbFR5cGUuQ2lyY2xlXG4gIF0sXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcjogZmFsc2UsXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlOiAwLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJVbml0OiBVbml0VHlwZS5NZXRlcnMsXG4gIHNwYXRpYWxSZWxhdGlvbnM6IFtTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0XSxcbiAgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM6IFtdLFxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVTZWxlY3RUb29sOiBmYWxzZSxcbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyOiBmYWxzZSxcbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2U6IDAsXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXQ6IFVuaXRUeXBlLk1ldGVycyxcbiAgcmVzdWx0TGlzdERpcmVjdGlvbjogTGlzdERpcmVjdGlvbi5WZXJ0aWNhbCxcbiAgcmVzdWx0UGFnaW5nU3R5bGU6IFBhZ2luZ1R5cGUuTXVsdGlQYWdlLFxuICByZXN1bHRGaWVsZHNUeXBlOiBGaWVsZHNUeXBlLlBvcHVwU2V0dGluZyxcbiAgcmVzdWx0U3ltYm9sVHlwZTogU3ltYm9sVHlwZS5EZWZhdWx0U3ltYm9sLFxuICByZXN1bHRDdXN0b21TeW1ib2w6IHtcbiAgICBhbmdsZTogMCxcbiAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgb3V0bGluZToge1xuICAgICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgc3R5bGU6ICdlc3JpU0xTU29saWQnLFxuICAgICAgdHlwZTogJ2VzcmlTTFMnLFxuICAgICAgd2lkdGg6IDFcbiAgICB9LFxuICAgIHNpemU6IDYsXG4gICAgc3R5bGU6ICdlc3JpU01TQ2lyY2xlJyxcbiAgICB0eXBlOiAnZXNyaVNNUycsXG4gICAgeG9mZnNldDogMCxcbiAgICB5b2Zmc2V0OiAwXG4gIH0sXG4gIHJlc3VsdEFsbG93Q2hhbmdlU3ltYm9sOiBmYWxzZSxcbiAgYWxsb3dFeHBvcnQ6IGZhbHNlLFxuICBzb3J0T3B0aW9uczogW10sXG4gIHpvb21Ub1NlbGVjdGVkOiB0cnVlLFxuICBpdGVtU2l6ZU1hcDoge1xuICAgIGFycmFuZ2VtZW50SG9yaXpvbnRhbFBvcHBlcjoge1xuICAgICAgbWluU2l6ZTogeyB3aWR0aDogMzAwLCBoZWlnaHQ6IDMwMCB9LFxuICAgICAgZGVmYXVsdFNpemU6IHsgd2lkdGg6IDM2MCwgaGVpZ2h0OiA0ODAgfVxuICAgIH1cbiAgfVxufVxuXG5cbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMSAxdjE0aDE0VjF6bTkuMDgyIDEzYy0uMDA1LS4wMzctLjExMy0uMjc0LS4xMjItLjMwOWExLjUgMS41IDAgMCAwIC43MTgtMS4yNjcgMS4yIDEuMiAwIDAgMC0uMDUzLS4zNThjLjE1Mi0uMTc2LjI2My0uMzgzLjMyNi0uNjA3cS4wNDYuMDAzLjA5My4wMDNjLjMuMDAyLjU5My0uMDkxLjgzNi0uMjY2cS4wNi4wNjYuMTI2LjEyNGMuNDIuNDEyLjk3Ny42NTQgMS41NjQuNjhIMTR2MmgtMy45MThNMTQgMTFoLS40M2ExLjQ2IDEuNDYgMCAwIDEtLjkwNi0uNDMzYy0uMjY0LS4yMy0uMjU4LS43ODItLjYxNy0uNzgyLS40ODIgMC0uNTIuNjc3LTEuMDAzLjY3Ny0uMjE5IDAtLjM4LS4xNzctLjU5OS0uMTc3LS4xOTMgMC0uNDQ1LjEwMi0uNDQ1LjI5M3YuNTAyYzAgLjQyNC0uNTA2LjUwOC0uNTA2LjkzNCAwIC4xNzEuMTg0LjIzNi4xODQuNDEgMCAuNTgtLjg5My41MDItLjg5MyAxLjA4IDAgLjE5MS4yMTUuMzA1LjIxNS40ODZWMTRINi4zNzVxLjA4Ny0uMjQzLjA5LS41MDJjMC0uNTQ3LTEuMDQzLS4zOTMtMS4yMDctLjcyLS40MDctLjgxMy42OTMtMS4wMjIuNjkzLTEuNjczIDAtLjE2LS4wODItLjQ4OC0uMzM0LS41MTMtLjM1MS0uMDM1LS40NDMuMTU0LS43OTcuMTU0YS40MDYuNDA2IDAgMCAxLS40MzctLjM2YzAtLjM4Ni4zMDgtLjU2Ni4zMDgtLjk1MiAwLS4yNS0uMTAyLS4zOTMtLjEwMi0uNjQzYS42Mi42MiAwIDAgMSAuNTktLjY0M2MuMzIzIDAgLjQ2NC4yNjQuNjE4LjU0YS42NC42NCAwIDAgMCAuNjE3LjMwOGMuNDkgMCAuNzk4LS42MS43OTgtLjk3N2EuNDcuNDcgMCAwIDEgLjQzNy0uNDg4Yy4zNDcgMCAuNDc2LjM2LjgyNC4zNi41NyAwIC41NS0uNzU2IDEuMDUzLTEuMDMuNjE4LS4zMzIuNDM4LTEuMDUyLjM2LTEuNDQtLjAzMi0uMTY5LjI5LS41LjQ2NC0uNDg3LjcyLjA1LjQxMi0uNTQuNDEyLS44MjNxMC0uMDczLjAyMi0uMTQyYy4xMTEtLjMzMi41OTUtLjQzOC41OTUtLjgzNiAwLS4yODEtLjIzMy0uNDEtLjIzMy0uNjkzYS42NS42NSAwIDAgMSAuMjItLjQ0SDE0ek0yIDE0VjJoOC4yNzhjLS4wMTMuMDc3LS4xMzIuMzU2LS4xMzIuNDQgMCAuMTk0LjAzOC4zODcuMTEyLjU2N2ExLjYgMS42IDAgMCAwLS40MjIuNjQzIDEuNCAxLjQgMCAwIDAtLjA3NC40NDIgMS43IDEuNyAwIDAgMC0uNTM2LjQzIDEuMzIgMS4zMiAwIDAgMC0uMzIgMS4wOTFxLjA0Ni4yMDUuMDY2LjQxNGEyIDIgMCAwIDAtLjY0OS42NyAxLjQ2IDEuNDYgMCAwIDAtLjY3NC0uMTY2IDEuNDUgMS40NSAwIDAgMC0xLjM4MyAxLjA4NiAxLjQ0IDEuNDQgMCAwIDAtMS4wODYtLjQ2OSAxLjYyIDEuNjIgMCAwIDAtMS41OTEgMS42NDNjMCAuMjU0LjExMy4yOTMuMDg0LjU3NHMtLjI5LjUzNS0uMjkgMS4wMjJhMS4zNyAxLjM3IDAgMCAwIC45ODQgMS4yOSAxLjU4IDEuNTggMCAwIDAtLjAwMyAxLjU0OWMuMTQzLjI4Ni42MzYuNzc0LjUzNC43NzR6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiY3VycmVudENvbG9yXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0wIDEwLjVWMTJhMSAxIDAgMCAwIDEgMWgxLjV2LTFIMXYtMS41ek0yLjUgMUgxYTEgMSAwIDAgMC0xIDF2MS41aDFWMmgxLjV6TTAgOC41aDF2LTNIMHpNNC41IDF2MWgzVjF6bTUgMHYxSDExdjEuNWgxVjJhMSAxIDAgMCAwLTEtMXpNNi4zMTggMTMuNjgyYTQuNSA0LjUgMCAwIDAgNS45OTEuMzM0bDEuODQ4IDEuODQ4LjcwNy0uNzA3LTEuODQ3LTEuODQ4YTQuNSA0LjUgMCAxIDAtNi42OTkuMzczbS43MDctLjcwN2EzLjUgMy41IDAgMSAxIDQuOTUtNC45NSAzLjUgMy41IDAgMCAxLTQuOTUgNC45NU05IDEzdi0ySDd2LTFoMlY4aDF2MmgydjFoLTJ2MnpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAganN4LFxyXG4gIGhvb2tzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIE51bWVyaWNJbnB1dCwgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBkaXN0YW5jZTogbnVtYmVyXHJcbiAgdW5pdDogVW5pdFR5cGVcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBCdWZmZXJJbnB1dCAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBkaXN0YW5jZSA9IDAsIHVuaXQgPSBVbml0VHlwZS5NZXRlcnMsIG9uQnVmZmVyQ2hhbmdlIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oamltdVVJTWVzc2FnZXMsIGRlZmF1bHRNZXNzYWdlKVxyXG4gIGNvbnN0IFtkLCBzZXREXSA9IFJlYWN0LnVzZVN0YXRlKGRpc3RhbmNlKVxyXG4gIGNvbnN0IFt1LCBzZXRVXSA9IFJlYWN0LnVzZVN0YXRlKHVuaXQpXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxyXG4gICAgaWYgKGRpc3RhbmNlICE9PSBkKSB7XHJcbiAgICAgIHNldEQoZGlzdGFuY2UpXHJcbiAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAodW5pdCAhPT0gdSkge1xyXG4gICAgICBzZXRVKHVuaXQpXHJcbiAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICAgIH1cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXHJcbiAgfSwgW2Rpc3RhbmNlLCB1bml0XSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgc2V0RChkaXN0YW5jZSlcclxuICAgICAgc2V0VSh1bml0KVxyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgZGlzdGFuY2UsIHVuaXQsIG9uQnVmZmVyQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGlzdGFuY2VDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcclxuICAgIHNldEQodmFsdWUpXHJcbiAgfSwgW10pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURpc3RhbmNlQWNjZXB0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcclxuICAgIHNldEQodmFsdWUpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZSh2YWx1ZSwgdSlcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIHVdKVxyXG5cclxuICBjb25zdCBoYW5kbGVCdWZmZXJVbml0Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcclxuICAgIHNldFUoZS50YXJnZXQudmFsdWUpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZShkLCBlLnRhcmdldC52YWx1ZSlcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIGRdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICA8TnVtZXJpY0lucHV0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9XHJcbiAgICAgICAgY2xhc3NOYW1lPSdtci0xJ1xyXG4gICAgICAgIHZhbHVlPXtkfVxyXG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVEaXN0YW5jZUNoYW5nZX1cclxuICAgICAgICBvbkFjY2VwdFZhbHVlPXtoYW5kbGVEaXN0YW5jZUFjY2VwdGVkfVxyXG4gICAgICAvPlxyXG4gICAgICA8U2VsZWN0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3VuaXQnKX1cclxuICAgICAgICB2YWx1ZT17dX1cclxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlQnVmZmVyVW5pdENoYW5nZX1cclxuICAgICAgPlxyXG4gICAgICAgIHtPYmplY3QudmFsdWVzKFVuaXRUeXBlKS5tYXAoKHZhbHVlKSA9PiAoXHJcbiAgICAgICAgICA8b3B0aW9uIGtleT17dmFsdWV9IHZhbHVlPXt2YWx1ZX0+XHJcbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZShgdW5pdF8ke3ZhbHVlfWApfVxyXG4gICAgICAgICAgPC9vcHRpb24+XHJcbiAgICAgICAgKSl9XHJcbiAgICAgIDwvU2VsZWN0PlxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG4vLyBUaGlzIGZpbGUgaXMgZHVwbGljYXRlZCBmcm9tICcuLi8uLi8uLi8uLi9mZWF0dXJlLWluZm8vc3JjL3J1bnRpbWUvY29tcG9uZW50cy9mZWF0dXJlLWluZm8nXG5pbXBvcnQgeyBSZWFjdCwgY3NzLCBqc3gsIHR5cGUgRGF0YVNvdXJjZSwgaW5qZWN0SW50bCwgdHlwZSBJbnRsU2hhcGUsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgUmlnaHRGaWxsZWQgfSBmcm9tICdqaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodCdcbmltcG9ydCB7IERvd25GaWxsZWQgfSBmcm9tICdqaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgZW51bSBMb2FkU3RhdHVzIHtcbiAgUGVuZGluZyA9ICdQZW5kaW5nJyxcbiAgRnVsZmlsbGVkID0gJ0Z1bGZpbGxlZCcsXG4gIFJlamVjdGVkID0gJ1JlamVjdGVkJ1xufVxuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBkYXRhU291cmNlOiBEYXRhU291cmNlXG4gIGdyYXBoaWM6IF9fZXNyaS5HcmFwaGljXG4gIHBvcHVwVGVtcGxhdGU6IF9fZXNyaS5Qb3B1cFRlbXBsYXRlXG4gIGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBfX2VzcmkuUG9wdXBUZW1wbGF0ZVxuICB0b2dnbGFibGU/OiBib29sZWFuXG4gIGV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgbG9hZFN0YXR1czogTG9hZFN0YXR1c1xuICBzaG93Q29udGVudDogYm9vbGVhblxufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgLmVzcmktd2lkZ2V0X19oZWFkaW5nIHtcbiAgICBmb250LXNpemU6IDAuODc1cmVtICFpbXBvcnRhbnQ7XG4gICAgZm9udC13ZWlnaHQ6IDUwMCAhaW1wb3J0YW50O1xuICAgIG1hcmdpbjogMDtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gIH1cblxuICAuZXNyaS1mZWF0dXJlX19jb250ZW50LWVsZW1lbnQge1xuICAgIHBhZGRpbmc6IDA7XG4gIH1cblxuICAuamltdS1idG4uZXhwYW5kZWQge1xuICAgIGFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7XG4gIH1cbiAgXG4gIC8vIExhcmdlciBleHBhbmQvY29sbGFwc2UgYnV0dG9uIGZvciBiZXR0ZXIgdG91Y2ggdGFyZ2V0c1xuICAuamltdS1idG5bYXJpYS1sYWJlbCo9XCJleHBhbmRcIl0sXG4gIC5qaW11LWJ0blthcmlhLWxhYmVsKj1cImNvbGxhcHNlXCJdIHtcbiAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgbWluLWhlaWdodDogMzJweDtcbiAgICBwYWRkaW5nOiA2cHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICB9XG5cbiAgLmVzcmktZmVhdHVyZS5lc3JpLXdpZGdldCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIH1cbmBcblxuaW50ZXJmYWNlIEV4dHJhUHJvcHMge1xuICBpbnRsOiBJbnRsU2hhcGVcbn1cblxuY2xhc3MgRmVhdHVyZUluZm8gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFByb3BzICYgRXh0cmFQcm9wcywgU3RhdGU+IHtcbiAgcHJpdmF0ZSBGZWF0dXJlOiB0eXBlb2YgX19lc3JpLkZlYXR1cmVcbiAgcHJpdmF0ZSBmZWF0dXJlOiBfX2VzcmkuRmVhdHVyZVxuICBwcml2YXRlIHJlYWRvbmx5IGZlYXR1cmVDb250YWluZXI6IFJlYWN0LlJlZk9iamVjdDxIVE1MSW5wdXRFbGVtZW50IHwgbnVsbD5cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBleHBhbmRCeURlZmF1bHQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCByZWNvcmRJZCA9IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8uT0JKRUNUSUQgfHwgdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5vYmplY3RpZCB8fCAndW5rbm93bidcbiAgICBjb25zdCBpbml0aWFsU2hvd0NvbnRlbnQgPSAhdG9nZ2xhYmxlIHx8IGV4cGFuZEJ5RGVmYXVsdFxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgZXZlbnQ6ICdGZWF0dXJlSW5mby1jb25zdHJ1Y3RvcicsXG4gICAgICByZWNvcmRJZCxcbiAgICAgIHRvZ2dsYWJsZSxcbiAgICAgIGV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgIGluaXRpYWxTaG93Q29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5mZWF0dXJlQ29udGFpbmVyID0gUmVhY3QuY3JlYXRlUmVmKClcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2hvd0NvbnRlbnQ6IGluaXRpYWxTaG93Q29udGVudCxcbiAgICAgIGxvYWRTdGF0dXM6IExvYWRTdGF0dXMuUGVuZGluZ1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmUoKVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IFByb3BzKSB7XG4gICAgaWYgKHRoaXMuZmVhdHVyZSkge1xuICAgICAgaWYgKHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHxcbiAgICAgICAgcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5ncmFwaGljICE9PSB0aGlzLnByb3BzLmdyYXBoaWMpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95RmVhdHVyZSgpXG4gICAgICAgIHRoaXMuY3JlYXRlRmVhdHVyZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZlYXR1cmUudmlzaWJsZUVsZW1lbnRzID0gdGhpcy5nZXRWaXNpYmxlRWxlbWVudHMoKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTeW5jIGV4cGFuZEJ5RGVmYXVsdCBwcm9wIGNoYW5nZXMgKHdoZW4gdXNlciBjbGlja3MgRXhwYW5kIEFsbC9Db2xsYXBzZSBBbGwpXG4gICAgLy8gVGhpcyBlbnN1cmVzIGFsbCBpdGVtcyByZXNwZWN0IHRoZSBnbG9iYWwgZXhwYW5kL2NvbGxhcHNlIHN0YXRlXG4gICAgaWYgKHByZXZQcm9wcy5leHBhbmRCeURlZmF1bHQgIT09IHRoaXMucHJvcHMuZXhwYW5kQnlEZWZhdWx0KSB7XG4gICAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBleHBhbmRCeURlZmF1bHQgfSA9IHRoaXMucHJvcHNcbiAgICAgIGNvbnN0IHJlY29yZElkID0gdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5PQkpFQ1RJRCB8fCB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lm9iamVjdGlkIHx8ICd1bmtub3duJ1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICdleHBhbmRCeURlZmF1bHQtcHJvcC1jaGFuZ2VkJyxcbiAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgIHByZXZFeHBhbmRCeURlZmF1bHQ6IHByZXZQcm9wcy5leHBhbmRCeURlZmF1bHQsXG4gICAgICAgIG5ld0V4cGFuZEJ5RGVmYXVsdDogZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgICB0b2dnbGFibGUsXG4gICAgICAgIGN1cnJlbnRTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgd2lsbFVwZGF0ZVN0YXRlOiB0b2dnbGFibGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKHRvZ2dsYWJsZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd0NvbnRlbnQ6IGV4cGFuZEJ5RGVmYXVsdCB9LCAoKSA9PiB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgICAgICBldmVudDogJ0ZlYXR1cmVJbmZvLXN0YXRlLXVwZGF0ZWQnLFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICBuZXdTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIExvZyBhbGwgY29tcG9uZW50RGlkVXBkYXRlIGNhbGxzIHRvIHRyYWNrIHJlbW91bnRzXG4gICAgY29uc3QgcmVjb3JkSWQgPSB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lk9CSkVDVElEIHx8IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8ub2JqZWN0aWQgfHwgJ3Vua25vd24nXG4gICAgaWYgKHByZXZQcm9wcy5ncmFwaGljICE9PSB0aGlzLnByb3BzLmdyYXBoaWMgfHwgXG4gICAgICAgIHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHxcbiAgICAgICAgcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICdGZWF0dXJlSW5mby1wcm9wcy1jaGFuZ2VkLXJlY3JlYXRlJyxcbiAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgIGdyYXBoaWNDaGFuZ2VkOiBwcmV2UHJvcHMuZ3JhcGhpYyAhPT0gdGhpcy5wcm9wcy5ncmFwaGljLFxuICAgICAgICBwb3B1cFRlbXBsYXRlQ2hhbmdlZDogcHJldlByb3BzLnBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSxcbiAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGVDaGFuZ2VkOiBwcmV2UHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUsXG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdDogdGhpcy5wcm9wcy5leHBhbmRCeURlZmF1bHQsXG4gICAgICAgIGN1cnJlbnRTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lGZWF0dXJlICgpIHtcbiAgICB0aGlzLmZlYXR1cmUgJiYgIXRoaXMuZmVhdHVyZS5kZXN0cm95ZWQgJiYgdGhpcy5mZWF0dXJlLmRlc3Ryb3koKVxuICB9XG5cbiAgZ2V0VmlzaWJsZUVsZW1lbnRzICgpIHtcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBzaG93Q29udGVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IGV4cGFuZGVkID0gdG9nZ2xhYmxlID8gc2hvd0NvbnRlbnQgOiB0cnVlXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB0cnVlLFxuICAgICAgY29udGVudDoge1xuICAgICAgICBmaWVsZHM6IGV4cGFuZGVkLFxuICAgICAgICB0ZXh0OiBleHBhbmRlZCxcbiAgICAgICAgbWVkaWE6IGV4cGFuZGVkLFxuICAgICAgICBhdHRhY2htZW50czogZXhwYW5kZWRcbiAgICAgIH0sXG4gICAgICBsYXN0RWRpdGVkSW5mbzogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjcmVhdGVGZWF0dXJlICgpIHtcbiAgICBsZXQgZmVhdHVyZU1vZHVsZVByb21pc2VcbiAgICBpZiAodGhpcy5GZWF0dXJlKSB7XG4gICAgICBmZWF0dXJlTW9kdWxlUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGZlYXR1cmVNb2R1bGVQcm9taXNlID0gbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAgICdlc3JpL3dpZGdldHMvRmVhdHVyZSdcbiAgICAgIF0pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgIFtcbiAgICAgICAgICB0aGlzLkZlYXR1cmVcbiAgICAgICAgXSA9IG1vZHVsZXNcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBmZWF0dXJlTW9kdWxlUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIC8vIENoZWNrIGlmIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkIGJlZm9yZSB0cnlpbmcgdG8gYXBwZW5kXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIGVycm9ycyB3aGVuIGNvbXBvbmVudCB1bm1vdW50cyBkdXJpbmcgYXN5bmMgbW9kdWxlIGxvYWRpbmdcbiAgICAgIGlmICghdGhpcy5mZWF0dXJlQ29udGFpbmVyLmN1cnJlbnQpIHtcbiAgICAgICAgLy8gQ29tcG9uZW50IHdhcyB1bm1vdW50ZWQsIGFib3J0XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudCAmJiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdqaW11LXdpZGdldCdcbiAgICAgIHRoaXMuZmVhdHVyZUNvbnRhaW5lci5jdXJyZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcilcblxuICAgICAgY29uc3Qgb3JpZ2luRFMgPSB0aGlzLnByb3BzLmRhdGFTb3VyY2UuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICAgICAgY29uc3Qgcm9vdERhdGFTb3VyY2UgPSBvcmlnaW5EUz8uWzBdPy5nZXRSb290RGF0YVNvdXJjZSgpXG5cbiAgICAgIHRoaXMuZGVzdHJveUZlYXR1cmUoKVxuICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLnByb3BzLmdyYXBoaWMubGF5ZXIgYXMgX19lc3JpLkZlYXR1cmVMYXllclxuICAgICAgaWYgKHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSkge1xuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZVxuICAgICAgfSBlbHNlIGlmIChsYXllcikge1xuICAgICAgICAvLyBzZXQgcG9wdXBUZW1wbGF0ZSB3aXRoIGxheWVyJ3MgcG9wdXBUZW1wbGF0ZSBvciBkZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IGxheWVyLnBvcHVwVGVtcGxhdGUgPz8gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9wcy5ncmFwaGljLnBvcHVwVGVtcGxhdGUgPSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9XG4gICAgICBpZiAobGF5ZXIgJiYgIWxheWVyLnBvcHVwVGVtcGxhdGUpIHtcbiAgICAgICAgbGF5ZXIucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSB8fCB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9XG4gICAgICB0aGlzLmZlYXR1cmUgPSBuZXcgdGhpcy5GZWF0dXJlKHtcbiAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBzcGF0aWFsUmVmZXJlbmNlOiB0aGlzLnByb3BzLmRhdGFTb3VyY2U/LmxheWVyPy5zcGF0aWFsUmVmZXJlbmNlIHx8IG51bGwsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgbWFwOiByb290RGF0YVNvdXJjZT8ubWFwIHx8IG51bGwsXG4gICAgICAgIGdyYXBoaWM6IHRoaXMucHJvcHMuZ3JhcGhpYyxcbiAgICAgICAgdmlzaWJsZUVsZW1lbnRzOiB0aGlzLmdldFZpc2libGVFbGVtZW50cygpXG4gICAgICB9KVxuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGxvYWRTdGF0dXM6IExvYWRTdGF0dXMuRnVsZmlsbGVkIH0pXG4gICAgfSlcbiAgfVxuXG4gIHRvZ2dsZUV4cGFuZGVkID0gKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dDb250ZW50OiAhdGhpcy5zdGF0ZS5zaG93Q29udGVudCB9KVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBpbnRsIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBzaG93Q29udGVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmVhdHVyZS1pbmZvLWNvbXBvbmVudCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIHAtMScgY3NzPXtzdHlsZX0+XG4gICAgICAgIHt0b2dnbGFibGUgJiYgKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiBzaG93Q29udGVudCA/ICdjb2xsYXBzZScgOiAnZXhwYW5kJyB9KX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnamltdS1vdXRsaW5lLWluc2lkZSBmbGV4LXNocmluay0wJywgeyBleHBhbmRlZDogc2hvd0NvbnRlbnQgfSl9XG4gICAgICAgICAgICB2YXJpYW50PSd0ZXh0J1xuICAgICAgICAgICAgY29sb3I9J2luaGVyaXQnXG4gICAgICAgICAgICBpY29uXG4gICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRXhwYW5kZWR9XG4gICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgbWluLXdpZHRoOiAzMnB4O1xuICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICAgICAgICAgICAgICBwYWRkaW5nOiA2cHg7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7c2hvd0NvbnRlbnQgPyA8RG93bkZpbGxlZCBzaXplPSdtJy8+IDogPFJpZ2h0RmlsbGVkIHNpemU9J20nIGF1dG9GbGlwLz59XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LWdyb3ctMScgcmVmPXt0aGlzLmZlYXR1cmVDb250YWluZXJ9IC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgaW5qZWN0SW50bChGZWF0dXJlSW5mbylcblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIEltbXV0YWJsZUFycmF5LCBsb2Rhc2gsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZSwgdXRpbHMsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBKaW11TWFwVmlld0NvbXBvbmVudCwgdHlwZSBKaW11TWFwVmlldywgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xyXG5pbXBvcnQgeyBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgdHlwZSB7IENyZWF0ZVRvb2xUeXBlLCBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IHsgSW50ZXJhY3RpdmVEcmF3IH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS1kcmF3LXRvb2wnXHJcbmltcG9ydCB7IEJ1ZmZlcklucHV0IH0gZnJvbSAnLi9idWZmZXItaW5wdXQnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBlbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBidWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgYnVmZmVyVW5pdDogVW5pdFR5cGVcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbiAgb25HZW9tZXRyeUNoYW5nZTogKGdlb206IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21EcmF3IChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uR2VvbWV0cnlDaGFuZ2UsIGNyZWF0ZVRvb2xUeXBlcywgbWFwV2lkZ2V0SWRzLCBlbmFibGVCdWZmZXIsIGJ1ZmZlckRpc3RhbmNlLCBidWZmZXJVbml0LCBvbkJ1ZmZlckNoYW5nZSwgd2lkZ2V0SWQgfSA9IHByb3BzXHJcbiAgY29uc3QgW2ppbXVNYXBWaWV3LCBzZXRKaW11TWFwVmlld10gPSBSZWFjdC51c2VTdGF0ZTxKaW11TWFwVmlldz4obnVsbClcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGppbXVVSU1lc3NhZ2VzLCBkZWZhdWx0TWVzc2FnZSlcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcbiAgY29uc3QgZ2V0TGF5ZXJGdW5SZWYgPSBSZWFjdC51c2VSZWY8KCkgPT4gX19lc3JpLkdyYXBoaWNzTGF5ZXI+KG51bGwpXHJcbiAgY29uc3QgYnVmZmVyT3BlcmF0b3JSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLmJ1ZmZlck9wZXJhdG9yPihudWxsKVxyXG4gIGNvbnN0IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLmdlb2Rlc2ljQnVmZmVyT3BlcmF0b3I+KG51bGwpXHJcbiAgY29uc3QgZ2VvbWV0cnlTZXJ2aWNlUmVmID0gUmVhY3QudXNlUmVmPHsgZ2VvbWV0cnlTZXJ2aWNlOiBfX2VzcmkuZ2VvbWV0cnlTZXJ2aWNlLCBidWZmZXJQYXJhbWV0ZXJzOiB0eXBlb2YgX19lc3JpLkJ1ZmZlclBhcmFtZXRlcnMgfT4obnVsbClcclxuICBjb25zdCBnZW9tZXRyeVJlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuR2VvbWV0cnk+KG51bGwpXHJcbiAgY29uc3QgYnVmZmVyRGlzdGFuY2VSZWYgPSBSZWFjdC51c2VSZWYoYnVmZmVyRGlzdGFuY2UpXHJcbiAgY29uc3QgYnVmZmVyVW5pdFJlZiA9IFJlYWN0LnVzZVJlZihidWZmZXJVbml0KVxyXG4gIGNvbnN0IGJ1ZmZlcmVkR3JhcGhpY1JlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuR3JhcGhpYz4obnVsbClcclxuXHJcbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XHJcbiAgICBpZiAoZW5hYmxlQnVmZmVyKSB7XHJcbiAgICAgIC8vIFBhcmVudCBjb21wb25lbnQgcXVlcnktdGFzay1zcGF0aWFsLWZvcm0gd2lsbCByZXNldCBidWZmZXIgcGFyYW1ldGVyIHdoZW4gZmlsdGVyIHR5cGUgY2hhbmdlcyxcclxuICAgICAgLy8gc28gZGVmZXIgdGhlIGluaXQgYnVmZmVyIG9wdGlvbiBpbiBvcmRlciBub3QgdG8gYmUgb3ZlcnJpZGUgYnkgaXRzIHBhcmVudC5cclxuICAgICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcclxuICAgICAgICBvbkJ1ZmZlckNoYW5nZShidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdClcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xyXG4gICAgICAnZXNyaS9HcmFwaGljJ1xyXG4gICAgXSkudGhlbigobW9kdWxlcykgPT4ge1xyXG4gICAgICBjb25zdCBHcmFwaGljID0gbW9kdWxlc1swXVxyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudCA9IG5ldyBHcmFwaGljKHtcclxuICAgICAgICBzeW1ib2w6IHtcclxuICAgICAgICAgIHR5cGU6ICdzaW1wbGUtZmlsbCcsXHJcbiAgICAgICAgICBjb2xvcjogWzUxLCA1MSwgMjA0LCAwLjVdLFxyXG4gICAgICAgICAgc3R5bGU6ICdzb2xpZCcsXHJcbiAgICAgICAgICBvdXRsaW5lOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiBbNTEsIDUxLCAyMDQsIDAuOF0sXHJcbiAgICAgICAgICAgIHdpZHRoOiAxXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBjb25zdCBhcHBseUJ1ZmZlckVmZmVjdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmICghZ2VvbWV0cnlSZWYuY3VycmVudCB8fCAhZW5hYmxlQnVmZmVyIHx8IGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPT09IDApIHtcclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBudWxsXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSBlbmQgdXNlciB1c2VzIGEgcG9pbnQgb3IgbGluZSBxdWVyeSBnZW9tZXRyeSwgdGhlbiB0aGUgbmVnYXRpdmUgYnVmZmVyIHdpbGwgbm90IHdvcmsgKHNhbWUgZWZmZWN0IGFzIHRoZXJlIGlzIG5vIGJ1ZmZlcilcclxuICAgIGNvbnN0IGlzUG9pbnROZWdhdGl2ZUJ1ZmZlciA9IChnZW9tZXRyeVJlZi5jdXJyZW50Py50eXBlID09PSAncG9pbnQnIHx8IGdlb21ldHJ5UmVmLmN1cnJlbnQ/LnR5cGUgPT09ICdtdWx0aXBvaW50JykgJiYgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA8IDBcclxuICAgIGNvbnN0IGlzTGluZU5lZ2F0aXZlQnVmZmVyID0gZ2VvbWV0cnlSZWYuY3VycmVudD8udHlwZSA9PT0gJ3BvbHlsaW5lJyAmJiBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50IDwgMFxyXG4gICAgaWYgKGlzUG9pbnROZWdhdGl2ZUJ1ZmZlciB8fCBpc0xpbmVOZWdhdGl2ZUJ1ZmZlcikge1xyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IG51bGxcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZ2VvbWV0cnkgPSBnZW9tZXRyeVJlZi5jdXJyZW50XHJcbiAgICAvLyBodHRwczovL2RldmVsb3BlcnMuYXJjZ2lzLmNvbS9qYXZhc2NyaXB0L2xhdGVzdC9hcGktcmVmZXJlbmNlL2VzcmktZ2VvbWV0cnktZ2VvbWV0cnlFbmdpbmUuaHRtbCNidWZmZXJcclxuICAgIGlmIChnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc0dlb2dyYXBoaWMgJiYgIWdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UuaXNXR1M4NCkge1xyXG4gICAgICBjb25zdCBzZXJ2aWNlVXJsID0gdXRpbHMuZ2V0R2VvbWV0cnlTZXJ2aWNlKClcclxuICAgICAgaWYgKCFnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGNvbnN0IG1vZHVsZXMgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcclxuICAgICAgICAgICdlc3JpL3Jlc3QvZ2VvbWV0cnlTZXJ2aWNlJyxcclxuICAgICAgICAgICdlc3JpL3Jlc3Qvc3VwcG9ydC9CdWZmZXJQYXJhbWV0ZXJzJ1xyXG4gICAgICAgIF0pXHJcbiAgICAgICAgZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnQgPSB7XHJcbiAgICAgICAgICBnZW9tZXRyeVNlcnZpY2U6IG1vZHVsZXNbMF0sXHJcbiAgICAgICAgICBidWZmZXJQYXJhbWV0ZXJzOiBtb2R1bGVzWzFdXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHsgZ2VvbWV0cnlTZXJ2aWNlLCBidWZmZXJQYXJhbWV0ZXJzOiBCdWZmZXJQYXJhbWV0ZXJzIH0gPSBnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudFxyXG4gICAgICBjb25zdCBwb2x5Z29ucyA9IGF3YWl0IGdlb21ldHJ5U2VydmljZS5idWZmZXIoc2VydmljZVVybCwgbmV3IEJ1ZmZlclBhcmFtZXRlcnMoe1xyXG4gICAgICAgIGRpc3RhbmNlczogW2J1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnRdLFxyXG4gICAgICAgIHVuaXQ6IGxvZGFzaC5rZWJhYkNhc2UoYnVmZmVyVW5pdFJlZi5jdXJyZW50KSBhcyBhbnksXHJcbiAgICAgICAgZ2VvZGVzaWM6IHRydWUsXHJcbiAgICAgICAgYnVmZmVyU3BhdGlhbFJlZmVyZW5jZTogZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSxcclxuICAgICAgICBvdXRTcGF0aWFsUmVmZXJlbmNlOiBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLFxyXG4gICAgICAgIGdlb21ldHJpZXM6IFtnZW9tZXRyeV1cclxuICAgICAgfSkpXHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gcG9seWdvbnNbMF1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc1dHUzg0IHx8IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2U/LmlzV2ViTWVyY2F0b3IpIHtcclxuICAgICAgICBpZiAoIWdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50ID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlKCdlc3JpL2dlb21ldHJ5L29wZXJhdG9ycy9nZW9kZXNpY0J1ZmZlck9wZXJhdG9yJylcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuaXNMb2FkZWQoKSkge1xyXG4gICAgICAgICAgYXdhaXQgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmxvYWQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5leGVjdXRlKFxyXG4gICAgICAgICAgZ2VvbWV0cnkgYXMgX19lc3JpLkdlb21ldHJ5VW5pb24sXHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB1bml0OiBsb2Rhc2gua2ViYWJDYXNlKGJ1ZmZlclVuaXRSZWYuY3VycmVudCkgYXMgYW55XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICghYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZSgnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvYnVmZmVyT3BlcmF0b3InKVxyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IGJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuZXhlY3V0ZShcclxuICAgICAgICAgIGdlb21ldHJ5IGFzIF9fZXNyaS5HZW9tZXRyeVVuaW9uLFxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdW5pdDogbG9kYXNoLmtlYmFiQ2FzZShidWZmZXJVbml0UmVmLmN1cnJlbnQpIGFzIGFueVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFtlbmFibGVCdWZmZXJdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKS5yZW1vdmVBbGwoKVxyXG4gICAgICBvbkdlb21ldHJ5Q2hhbmdlKG51bGwpXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIG9uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XHJcbiAgICAvLyBjbGVhciBkcmF3aW5nIGdyYXBoaWNzIGJlZm9yZSBzd2l0Y2hpbmcgbWFwIHZpZXdcclxuICAgIGNvbnN0IGxheWVyID0gZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KClcclxuICAgIGlmIChsYXllcikge1xyXG4gICAgICBsYXllci5yZW1vdmVBbGwoKVxyXG4gICAgICBvbkdlb21ldHJ5Q2hhbmdlKG51bGwpXHJcbiAgICB9XHJcbiAgICBzZXRKaW11TWFwVmlldyhqaW11TWFwVmlldz8udmlldyAhPSBudWxsID8gamltdU1hcFZpZXcgOiBudWxsKVxyXG4gIH0sIFtvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlQnVmZmVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRpc3RhbmNlLCB1bml0KSA9PiB7XHJcbiAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50ID0gZGlzdGFuY2VcclxuICAgIGJ1ZmZlclVuaXRSZWYuY3VycmVudCA9IHVuaXRcclxuICAgIGFwcGx5QnVmZmVyRWZmZWN0KClcclxuICAgIG9uQnVmZmVyQ2hhbmdlKGRpc3RhbmNlLCB1bml0KVxyXG4gIH0sIFtvbkJ1ZmZlckNoYW5nZSwgYXBwbHlCdWZmZXJFZmZlY3RdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEcmF3RW5kID0gUmVhY3QudXNlQ2FsbGJhY2soKGdyYXBoaWMsIGdldExheWVyRnVuLCBjbGVhckFmdGVyQXBwbHkpID0+IHtcclxuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgPSBnZXRMYXllckZ1blxyXG4gICAgY29uc3QgbGF5ZXIgPSBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKVxyXG4gICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBnZW9tZXRyeSBpcyB0aGUgc2FtZSBhcyB0aGUgcHJldmlvdXMgb25lLCBvbmx5IHRoZSBjbGVhckFmdGVyQXBwbHkgaXMgY2hhbmdlZC5cclxuICAgIGlmIChnZW9tZXRyeVJlZi5jdXJyZW50ICE9PSBncmFwaGljPy5nZW9tZXRyeSkge1xyXG4gICAgICBnZW9tZXRyeVJlZi5jdXJyZW50ID0gZ3JhcGhpYz8uZ2VvbWV0cnlcclxuICAgICAgYXBwbHlCdWZmZXJFZmZlY3QoKS50aGVuKCgpID0+IHtcclxuICAgICAgICBpZiAoYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkpIHtcclxuICAgICAgICAgIGxheWVyPy5hZGQoYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgb25HZW9tZXRyeUNoYW5nZShncmFwaGljPy5nZW9tZXRyeSwgbGF5ZXIsIGdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseSlcclxuICB9LCBbb25HZW9tZXRyeUNoYW5nZSwgYXBwbHlCdWZmZXJFZmZlY3RdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICB7XHJcbiAgICAgICAgbWFwV2lkZ2V0SWRzPy5tYXAoKG1hcFdpZGdldElkLCB4KSA9PiAoXHJcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcclxuICAgICAgICAgICAga2V5PXt4fSB1c2VNYXBXaWRnZXRJZD17bWFwV2lkZ2V0SWR9IG9uQWN0aXZlVmlld0NoYW5nZT17aGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApKVxyXG4gICAgICB9XHJcbiAgICAgIHtqaW11TWFwVmlldz8udmlldyAmJiAoXHJcbiAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgPEludGVyYWN0aXZlRHJhd1xyXG4gICAgICAgICAgICBqaW11TWFwVmlldz17amltdU1hcFZpZXd9XHJcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cclxuICAgICAgICAgICAgdG9vbFR5cGVzPXtjcmVhdGVUb29sVHlwZXN9XHJcbiAgICAgICAgICAgIG9uRHJhd0VuZD17aGFuZGxlRHJhd0VuZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICB7ZW5hYmxlQnVmZmVyICYmIChcclxuICAgICAgICAgICAgPGRpdiByb2xlPSdncm91cCcgY2xhc3NOYW1lPSd0aXRsZTMnIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfSBjc3M9e2Nzc2BtYXJnaW4tdG9wOiAwLjc1cmVtO2B9PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlJz57Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBtdC0xJz5cclxuICAgICAgICAgICAgICAgIDxCdWZmZXJJbnB1dCBkaXN0YW5jZT17YnVmZmVyRGlzdGFuY2V9IHVuaXQ9e2J1ZmZlclVuaXR9IG9uQnVmZmVyQ2hhbmdlPXtoYW5kbGVCdWZmZXJDaGFuZ2V9Lz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICl9XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBSZWFjdFJlZHV4LFxyXG4gIGpzeCxcclxuICBjc3MsXHJcbiAgSW1tdXRhYmxlLFxyXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXHJcbiAgdHlwZSBVc2VEYXRhU291cmNlLFxyXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXHJcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXHJcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcclxuICBob29rcyxcclxuICB0eXBlIERhdGFTb3VyY2UsXHJcbiAgdHlwZSBJTVN0YXRlLFxyXG4gIERhdGFTb3VyY2VTdGF0dXNcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNlbGVjdCwgT3B0aW9uLCBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgeyBTcGF0aWFsUmVsYXRpb24sIHR5cGUgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCB7IEJ1ZmZlcklucHV0IH0gZnJvbSAnLi9idWZmZXItaW5wdXQnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5jb25zdCBtYXJnaW5TdHlsZSA9IGNzc2BtYXJnaW4tdG9wOiAwLjc1cmVtO2BcclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgc3BhdGlhbFJlbGF0aW9uczogSW1tdXRhYmxlQXJyYXk8U3BhdGlhbFJlbGF0aW9uPlxyXG4gIHVzZURhdGFTb3VyY2VzOiBJbW11dGFibGVBcnJheTxVc2VEYXRhU291cmNlPlxyXG4gIHVzZVJ1bnRpbWVEYXRhOiBib29sZWFuXHJcbiAgZW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgYnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGJ1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgb25TZWxlY3Rpb25DaGFuZ2U6IChnZW9tczogX19lc3JpLkdlb21ldHJ5W10pID0+IHZvaWRcclxuICBvblJlbGF0aW9uQ2hhbmdlOiAocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHZvaWRcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJ1bnRpbWVEYXRhU291cmNlICgpOiB7IFtkc0lkOiBzdHJpbmddOiBEYXRhU291cmNlIH0ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IHt9XHJcbiAgbGV0IG5vdEVtcHR5ID0gZmFsc2VcclxuICBjb25zdCBkc01hcCA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZXMoKVxyXG4gIE9iamVjdC5rZXlzKGRzTWFwKS5mb3JFYWNoKGRzSWQgPT4ge1xyXG4gICAgY29uc3QgZHMgPSBkc01hcFtkc0lkXVxyXG4gICAgLy8gb25seSBpbmNsdWRlIHRoZSBkcyB0aGF0IGhhcyBnZW9tZXRyeVxyXG4gICAgaWYgKGRzLmdldEdlb21ldHJ5VHlwZSgpICE9IG51bGwgJiYgIWRzLmlzSW5BcHBDb25maWcoKSAmJiBkcy5nZXRNYWluRGF0YVNvdXJjZSgpLmlkID09PSBkc0lkICYmICFkcy5nZXREYXRhU291cmNlSnNvbigpLmlzT3V0cHV0RnJvbVdpZGdldCkge1xyXG4gICAgICByZXN1bHRbZHNJZF0gPSBkc1xyXG4gICAgICBub3RFbXB0eSA9IHRydWVcclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4gbm90RW1wdHkgPyByZXN1bHQgOiBudWxsXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21EYXRhU291cmNlIChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uU2VsZWN0aW9uQ2hhbmdlLCB1c2VEYXRhU291cmNlcyA9IFtdLCB1c2VSdW50aW1lRGF0YSwgc3BhdGlhbFJlbGF0aW9ucywgZW5hYmxlQnVmZmVyLCBidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdCwgb25CdWZmZXJDaGFuZ2UsIG9uUmVsYXRpb25DaGFuZ2UgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihqaW11VUlNZXNzYWdlcywgZGVmYXVsdE1lc3NhZ2UpXHJcbiAgY29uc3QgW2N1cnJlbnREYXRhU291cmNlLCBzZXRDdXJyZW50RGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZSh1c2VEYXRhU291cmNlc1swXSlcclxuICBjb25zdCBbcnVudGltZURhdGFTb3VyY2UsIHNldFJ1bnRpbWVEYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KClcclxuICBjb25zdCBbY291bnQsIHNldENvdW50XSA9IFJlYWN0LnVzZVN0YXRlKDApXHJcbiAgY29uc3QgW2N1cnJlbnRSZWxhdGlvbiwgc2V0Q3VycmVudFJlbGF0aW9uXSA9IFJlYWN0LnVzZVN0YXRlKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcbiAgY29uc3QgdHJhbnNsYXRlID0gaG9va3MudXNlVHJhbnNsYXRpb24oKVxyXG5cclxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25PcHRpb25zOiBBcnJheTx7IHZhbHVlOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgfT4gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhTcGF0aWFsUmVsYXRpb24pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoe1xyXG4gICAgICB2YWx1ZSxcclxuICAgICAgbGFiZWw6IGdldEkxOG5NZXNzYWdlKGBzcGF0aWFsUmVsYXRpb25fJHtrZXl9YClcclxuICAgIH0pKVxyXG4gIH0sIFtnZXRJMThuTWVzc2FnZV0pXHJcblxyXG4gIGNvbnN0IGxvYWRlZFVzZURhdGFTb3VyY2VzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGNvbnN0IGxvYWRlZCA9IFtdXHJcbiAgICB1c2VEYXRhU291cmNlcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGlmIChzdGF0ZS5kYXRhU291cmNlc0luZm8/LltpdGVtLm1haW5EYXRhU291cmNlSWRdPy5pbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVkKSB7XHJcbiAgICAgICAgbG9hZGVkLnB1c2goaXRlbS5kYXRhU291cmNlSWQpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBpZiAobG9hZGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIGxvYWRlZC5qb2luKCcsJylcclxuICAgIH1cclxuICAgIHJldHVybiAnJ1xyXG4gIH0pXHJcblxyXG4gIGNvbnN0IG51bU9mRHMgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xyXG4gICAgaWYgKCF1c2VSdW50aW1lRGF0YSkge1xyXG4gICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlLmRhdGFTb3VyY2VzSW5mbyA/PyB7fSkuZmlsdGVyKGRzSWQgPT4gc3RhdGUuZGF0YVNvdXJjZXNJbmZvW2RzSWRdLmluc3RhbmNlU3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLkNyZWF0ZWQpLmxlbmd0aFxyXG4gIH0pXHJcblxyXG4gIGNvbnN0IHJ1bnRpbWVEYXRhU291cmNlcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgaWYgKG51bU9mRHMgPiAwKSB7XHJcbiAgICAgIHJldHVybiBnZXRSdW50aW1lRGF0YVNvdXJjZSgpXHJcbiAgICB9XHJcbiAgfSwgW251bU9mRHNdKVxyXG5cclxuICBjb25zdCBudW1PZlJ1bnRpbWVEcyA9IE9iamVjdC5rZXlzKHJ1bnRpbWVEYXRhU291cmNlcyA/PyB7fSkubGVuZ3RoXHJcblxyXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xyXG4gICAgaWYgKHNwYXRpYWxSZWxhdGlvbnM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShzcGF0aWFsUmVsYXRpb25zWzBdKVxyXG4gICAgfVxyXG4gICAgaWYgKGVuYWJsZUJ1ZmZlcikge1xyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdClcclxuICAgIH1cclxuICB9KVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBzZXRDdXJyZW50UmVsYXRpb24oc3BhdGlhbFJlbGF0aW9ucz8uWzBdKVxyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgb25SZWxhdGlvbkNoYW5nZSwgc3BhdGlhbFJlbGF0aW9uc10pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIXNwYXRpYWxSZWxhdGlvbnMpIHtcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKG51bGwpXHJcbiAgICB9IGVsc2UgaWYgKCFzcGF0aWFsUmVsYXRpb25zLmluY2x1ZGVzKGN1cnJlbnRSZWxhdGlvbikpIHtcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKHNwYXRpYWxSZWxhdGlvbnNbMF0pXHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2Uoc3BhdGlhbFJlbGF0aW9uc1swXSlcclxuICAgIH1cclxuICB9LCBbc3BhdGlhbFJlbGF0aW9ucywgY3VycmVudFJlbGF0aW9uLCBvblJlbGF0aW9uQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxyXG4gICAgKGRzSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBkcyA9IHVzZURhdGFTb3VyY2VzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uZGF0YVNvdXJjZUlkID09PSBkc0lkKVxyXG4gICAgICBzZXRDdXJyZW50RGF0YVNvdXJjZShJbW11dGFibGUoZHMpKVxyXG4gICAgICBzZXRSdW50aW1lRGF0YVNvdXJjZShudWxsKVxyXG4gICAgfSxcclxuICAgIFt1c2VEYXRhU291cmNlc11cclxuICApXHJcblxyXG4gIGNvbnN0IGhhbmRsZVJ1bnRpbWVEYXRhU291cmNlQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soXHJcbiAgICAoZHNJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGRzSWQpXHJcbiAgICAgIHNldFJ1bnRpbWVEYXRhU291cmNlKGRzKVxyXG4gICAgICBzZXRDdXJyZW50RGF0YVNvdXJjZShudWxsKVxyXG4gICAgfSxcclxuICAgIFtdXHJcbiAgKVxyXG5cclxuICBjb25zdCBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGN1cnJlbnREYXRhU291cmNlPy5kYXRhU291cmNlSWQgPz8gcnVudGltZURhdGFTb3VyY2U/LmlkKVxyXG4gICAgY29uc3QgcmVjb3JkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXHJcbiAgICBpZiAocmVjb3Jkcz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBnZW9tZXRyaWVzID0gcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gcmVjb3JkLmdldEpTQVBJR2VvbWV0cnkoKSlcclxuICAgICAgb25TZWxlY3Rpb25DaGFuZ2UoZ2VvbWV0cmllcylcclxuICAgICAgc2V0Q291bnQocmVjb3Jkcy5sZW5ndGgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvblNlbGVjdGlvbkNoYW5nZShudWxsKVxyXG4gICAgICBzZXRDb3VudCgwKVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkLCBydW50aW1lRGF0YVNvdXJjZT8uaWQsIG9uU2VsZWN0aW9uQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgZ2V0TGFiZWxPZlNwYXRpYWxSZWxhdGlvbiA9IChyZWxhdGlvbjogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICAgIHJldHVybiBzcGF0aWFsUmVsYXRpb25PcHRpb25zLmZpbmQoaXRlbSA9PiBpdGVtLnZhbHVlID09PSByZWxhdGlvbikubGFiZWxcclxuICB9XHJcblxyXG4gIGNvbnN0IGhhbmRsZVNwYXRpYWxSZWxhdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKGUgPT4ge1xyXG4gICAgc2V0Q3VycmVudFJlbGF0aW9uKGUudGFyZ2V0LnZhbHVlKVxyXG4gICAgb25SZWxhdGlvbkNoYW5nZShlLnRhcmdldC52YWx1ZSlcclxuICB9LCBbb25SZWxhdGlvbkNoYW5nZV0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2PlxyXG4gICAgICA8ZGl2IGNzcz17bWFyZ2luU3R5bGV9IGNsYXNzTmFtZT0ndGl0bGUzJz57Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlckxheWVyJyl9PC9kaXY+XHJcbiAgICAgIDxTZWxlY3RcclxuICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2hvb3NlRmlsdGVyTGF5ZXInKX1cclxuICAgICAgICB2YWx1ZT17Y3VycmVudERhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCA/PyBydW50aW1lRGF0YVNvdXJjZT8uaWR9XHJcbiAgICAgID5cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIHVzZURhdGFTb3VyY2VzLmxlbmd0aCA+IDAgJiYgPE9wdGlvbiBoZWFkZXI+e2dldEkxOG5NZXNzYWdlKCdwcmVjb25maWd1cmVkJyl9PC9PcHRpb24+fVxyXG4gICAgICAgIHt1c2VEYXRhU291cmNlcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGl0ZW0uZGF0YVNvdXJjZUlkKVxyXG4gICAgICAgICAgaWYgKGxvYWRlZFVzZURhdGFTb3VyY2VzLmluY2x1ZGVzKGl0ZW0uZGF0YVNvdXJjZUlkKSB8fCBkcz8uZ2V0TGFiZWwoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgIDxPcHRpb24ga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0gdmFsdWU9e2l0ZW0uZGF0YVNvdXJjZUlkfSBvbkNsaWNrPXsoKSA9PiB7IGhhbmRsZURhdGFTb3VyY2VDaGFuZ2UoaXRlbS5kYXRhU291cmNlSWQpIH19PlxyXG4gICAgICAgICAgICAgIHtkcz8uZ2V0TGFiZWwoKX1cclxuICAgICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfT5cclxuICAgICAgICAgICAgICB7dHJhbnNsYXRlKCdsb2FkaW5nJyl9XHJcbiAgICAgICAgICAgIDwvT3B0aW9uPlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0pfVxyXG4gICAgICAgIHtudW1PZlJ1bnRpbWVEcyA+IDAgJiYgdXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMCAmJiA8T3B0aW9uIGRpdmlkZXIvPn1cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIDxPcHRpb24gaGVhZGVyPntnZXRJMThuTWVzc2FnZSgncnVudGltZScpfTwvT3B0aW9uPn1cclxuICAgICAgICB7T2JqZWN0LmtleXMocnVudGltZURhdGFTb3VyY2VzID8/IHt9KS5tYXAoZHNJZCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkcyA9IHJ1bnRpbWVEYXRhU291cmNlc1tkc0lkXVxyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2RzSWR9IHZhbHVlPXtkc0lkfSBvbkNsaWNrPXsoKSA9PiB7IGhhbmRsZVJ1bnRpbWVEYXRhU291cmNlQ2hhbmdlKGRzSWQpIH19PlxyXG4gICAgICAgICAgICAgIHtkcy5nZXRMYWJlbCgpfVxyXG4gICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgIClcclxuICAgICAgICB9KX1cclxuICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdtdC0xIGZvbnQtaXRhbGljJyBjc3M9e2Nzc2Bjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItaGludCk7YH0+e2dldEkxOG5NZXNzYWdlKCdzZWxlY3RlZFJlY29yZHMnLCB7IG51bTogY291bnQgfSl9PC9kaXY+XHJcbiAgICAgIHtzcGF0aWFsUmVsYXRpb25zPy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2IGNzcz17bWFyZ2luU3R5bGV9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtdHJ1bmNhdGUgdGl0bGUzIG1iLTAnPntnZXRJMThuTWVzc2FnZSgncmVsYXRpb25zaGlwJyl9PC9kaXY+XHJcbiAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZWxhdGlvbnNoaXAnKX1cclxuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRSZWxhdGlvbn1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNwYXRpYWxSZWxhdGlvbkNoYW5nZX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3NwYXRpYWxSZWxhdGlvbnMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpdGVtfSB2YWx1ZT17aXRlbX0+e2dldExhYmVsT2ZTcGF0aWFsUmVsYXRpb24oaXRlbSl9PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9KX1cclxuICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICB7ZW5hYmxlQnVmZmVyICYmIChcclxuICAgICAgICA8ZGl2IHJvbGU9J2dyb3VwJyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX0gY3NzPXttYXJnaW5TdHlsZX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGl0bGUzIHRleHQtdHJ1bmNhdGUnPntnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX08L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggbXQtMSc+XHJcbiAgICAgICAgICAgIDxCdWZmZXJJbnB1dCBkaXN0YW5jZT17YnVmZmVyRGlzdGFuY2V9IHVuaXQ9e2J1ZmZlclVuaXR9IG9uQnVmZmVyQ2hhbmdlPXtvbkJ1ZmZlckNoYW5nZX0vPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IHVzZURhdGFTb3VyY2U9e2N1cnJlbnREYXRhU291cmNlfSBkYXRhU291cmNlPXtydW50aW1lRGF0YVNvdXJjZX0gb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2V9IC8+XHJcbiAgICAgIHt1c2VEYXRhU291cmNlcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIGRhdGFzb3VyY2UgaXMgY3JlYXRlZFxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfSB1c2VEYXRhU291cmNlPXtpdGVtfS8+XHJcbiAgICAgICAgKVxyXG4gICAgICB9KX1cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIGpzeCwgbG9hZEFyY0dJU0pTQVBJTW9kdWxlLCB0eXBlIEltbXV0YWJsZUFycmF5IH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBKaW11TWFwVmlld0NvbXBvbmVudCwgdHlwZSBKaW11TWFwVmlldywgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xyXG5pbXBvcnQgdHlwZSB7IENyZWF0ZVRvb2xUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgbWFwV2lkZ2V0SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBvbkdlb21ldHJ5Q2hhbmdlOiAoZ2VvbTogX19lc3JpLkdlb21ldHJ5LCBsYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLCBncmFwaGljPzogX19lc3JpLkdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdlb21ldHJ5RnJvbU1hcCAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvbkdlb21ldHJ5Q2hhbmdlLCBtYXBXaWRnZXRJZHMgfSA9IHByb3BzXHJcbiAgY29uc3QgW2ppbXVNYXBWaWV3LCBzZXRKaW11TWFwVmlld10gPSBSZWFjdC51c2VTdGF0ZTxKaW11TWFwVmlldz4obnVsbClcclxuICBjb25zdCBQb2x5Z29uUmVmID0gUmVhY3QudXNlUmVmPHR5cGVvZiBfX2VzcmkuUG9seWdvbj4obnVsbClcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChqaW11TWFwVmlldz8udmlldykge1xyXG4gICAgICBsZXQgaGFuZGxlcjogSUhhbmRsZVxyXG4gICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGUoJ2VzcmkvY29yZS9yZWFjdGl2ZVV0aWxzJykudGhlbigocmVhY3RpdmVVdGlsczogX19lc3JpLnJlYWN0aXZlVXRpbHMpID0+IHtcclxuICAgICAgICBoYW5kbGVyID0gcmVhY3RpdmVVdGlscy53YXRjaCgoKSA9PiBqaW11TWFwVmlldy52aWV3LmV4dGVudCwgKGV4dGVudDogX19lc3JpLkV4dGVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKFBvbHlnb25SZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKFBvbHlnb25SZWYuY3VycmVudC5mcm9tRXh0ZW50KGV4dGVudCkpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9nZW9tZXRyeS9Qb2x5Z29uJ10pLnRoZW4obW9kdWxlcyA9PiB7XHJcbiAgICAgICAgICAgICAgUG9seWdvblJlZi5jdXJyZW50ID0gbW9kdWxlc1swXVxyXG4gICAgICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoUG9seWdvblJlZi5jdXJyZW50LmZyb21FeHRlbnQoZXh0ZW50KSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIHNldCBpbml0aWFsIGV4dGVudFxyXG4gICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoamltdU1hcFZpZXcudmlldy5leHRlbnQpXHJcbiAgICAgIH0pXHJcbiAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgIGhhbmRsZXIucmVtb3ZlKClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbamltdU1hcFZpZXcsIG9uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XHJcbiAgICBzZXRKaW11TWFwVmlldyhqaW11TWFwVmlldz8udmlldyAhPSBudWxsID8gamltdU1hcFZpZXcgOiBudWxsKVxyXG4gIH0sIFtdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICB7XHJcbiAgICAgICAgbWFwV2lkZ2V0SWRzPy5tYXAoKG1hcFdpZGdldElkLCB4KSA9PiAoXHJcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcclxuICAgICAgICAgICAga2V5PXt4fSB1c2VNYXBXaWRnZXRJZD17bWFwV2lkZ2V0SWR9IG9uQWN0aXZlVmlld0NoYW5nZT17aGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApKVxyXG4gICAgICB9XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmcgaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogUHJvdmlkZXMgaGlnaGxpZ2h0aW5nIHRoYXQgd29ya3MgaW5kZXBlbmRlbnRseSBvZiBsYXllciB2aXNpYmlsaXR5LlxuICovXG5cbmltcG9ydCB0eXBlIHsgRGF0YVNvdXJjZSwgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBEYXRhU291cmNlTWFuYWdlciB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLy8gR2xvYmFsIHNlcXVlbmNlIGNvdW50ZXIgZm9yIGdyYXBoaWNzIG9wZXJhdGlvbnMgdG8gdHJhY2sgdGltaW5nIGFjcm9zcyBjYWxsc1xubGV0IG9wZXJhdGlvblNlcXVlbmNlID0gMFxuXG4vKipcbiAqIEdldHMgdGhlIG1hcCB2aWV3IGZyb20gYSBkYXRhIHNvdXJjZSdzIG9yaWdpbiBsYXllci5cbiAqIEFjY2Vzc2VzIHRoZSB2aWV3IHRocm91Z2ggdGhlIEZlYXR1cmVMYXllcidzIHZpZXcgcHJvcGVydHkuXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIChvciBhbnkgZGF0YSBzb3VyY2UpXG4gKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byBNYXBWaWV3IG9yIFNjZW5lVmlldywgb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UoXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZFxuKTogUHJvbWlzZTxfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsPiB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgaWYgKCFvdXRwdXREUykge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1uby1vdXRwdXREUycsXG4gICAgICBzZXEsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICB0cnkge1xuICAgIC8vIEdldCBvcmlnaW4gZGF0YSBzb3VyY2UgdG8gYWNjZXNzIHRoZSBsYXllclxuICAgIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VzID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICAgIGNvbnN0IG9yaWdpbkRTID0gb3JpZ2luRGF0YVNvdXJjZXM/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tb3JpZ2luRFMnLFxuICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICAvLyBBY2Nlc3MgdGhlIEZlYXR1cmVMYXllciBmcm9tIHRoZSBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IGxheWVyID0gKG9yaWdpbkRTIGFzIGFueSkubGF5ZXIgfHwgKG9yaWdpbkRTIGFzIGFueSkuZ2V0TGF5ZXI/LigpXG4gICAgaWYgKCFsYXllcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tbGF5ZXInLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICAvLyBMb2cgbGF5ZXIgcHJvcGVydGllcyB0byB1bmRlcnN0YW5kIHN0cnVjdHVyZVxuICAgIGNvbnN0IGxheWVyS2V5cyA9IE9iamVjdC5rZXlzKGxheWVyKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICB0eXBlb2YgKGxheWVyIGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICkuc2xpY2UoMCwgMjApIC8vIExpbWl0IHRvIGZpcnN0IDIwIHByb3BlcnRpZXNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtbGF5ZXItaW5zcGVjdGlvbicsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgbGF5ZXJUeXBlOiBsYXllci50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgIGxheWVyS2V5czogbGF5ZXJLZXlzLFxuICAgICAgaGFzTGF5ZXJNYXA6ICEhKGxheWVyIGFzIGFueSkubWFwLFxuICAgICAgaGFzTGF5ZXJWaWV3OiAhIShsYXllciBhcyBhbnkpLnZpZXcsXG4gICAgICBoYXNMYXllclBhcmVudDogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQsXG4gICAgICBsYXllck1hcFR5cGU6IChsYXllciBhcyBhbnkpLm1hcCA/IHR5cGVvZiAobGF5ZXIgYXMgYW55KS5tYXAgOiAnbm9uZScsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gQ2hlY2sgbGF5ZXIucGFyZW50IGZvciBtYXAvdmlldyBhY2Nlc3MgKHNpbmNlIGhhc0xheWVyUGFyZW50IGlzIHRydWUpXG4gICAgY29uc3QgcGFyZW50ID0gKGxheWVyIGFzIGFueSkucGFyZW50XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgLy8gTG9nIHBhcmVudCBwcm9wZXJ0aWVzXG4gICAgICBjb25zdCBwYXJlbnRLZXlzID0gT2JqZWN0LmtleXMocGFyZW50KS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgdHlwZW9mIChwYXJlbnQgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1sYXllci1wYXJlbnQtaW5zcGVjdGlvbicsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgcGFyZW50VHlwZTogcGFyZW50LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICBwYXJlbnRLZXlzOiBwYXJlbnRLZXlzLFxuICAgICAgICBoYXNQYXJlbnRNYXA6ICEhKHBhcmVudCBhcyBhbnkpLm1hcCxcbiAgICAgICAgaGFzUGFyZW50VmlldzogISEocGFyZW50IGFzIGFueSkudmlldyxcbiAgICAgICAgaGFzUGFyZW50Vmlld3M6ICEhKHBhcmVudCBhcyBhbnkpLnZpZXdzLFxuICAgICAgICBwYXJlbnRWaWV3c0xlbmd0aDogKHBhcmVudCBhcyBhbnkpLnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzUGFyZW50RXh0ZW50OiAhIShwYXJlbnQgYXMgYW55KS5leHRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCB2aWV3IGZyb20gcGFyZW50XG4gICAgICBpZiAoKHBhcmVudCBhcyBhbnkpLnZpZXcpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IChwYXJlbnQgYXMgYW55KS52aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLXBhcmVudC12aWV3JyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHZpZXdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCBtYXAgZnJvbSBwYXJlbnQgYW5kIHRoZW4gdmlld1xuICAgICAgY29uc3QgcGFyZW50TWFwID0gKHBhcmVudCBhcyBhbnkpLm1hcFxuICAgICAgaWYgKHBhcmVudE1hcCkge1xuICAgICAgICBjb25zdCB2aWV3ID0gcGFyZW50TWFwLnZpZXcgfHwgXG4gICAgICAgICAgICAgICAgICAgICAocGFyZW50TWFwLnZpZXdzPy5nZXRJdGVtQXQ/LigwKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgIChwYXJlbnRNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyBwYXJlbnRNYXAudmlld3NbMF0gOiBudWxsKVxuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1wYXJlbnQtbWFwJyxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIHZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUGFyZW50IG1pZ2h0IEJFIHRoZSB2aWV3IChjaGVjayBpZiBpdCBoYXMgdmlldy1saWtlIHByb3BlcnRpZXMpXG4gICAgICBpZiAocGFyZW50LnR5cGUgPT09ICdtYXAnIHx8IHBhcmVudC50eXBlID09PSAnc2NlbmUnIHx8IChwYXJlbnQgYXMgYW55KS5leHRlbnQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1wYXJlbnQtaXMtdmlldycsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgdmlld1R5cGU6IHBhcmVudC50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHBhcmVudCBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUcnkgbXVsdGlwbGUgYXBwcm9hY2hlcyB0byBnZXQgdGhlIHZpZXc6XG4gICAgLy8gMS4gTGF5ZXIgbWlnaHQgaGF2ZSBhIGRpcmVjdCB2aWV3IHByb3BlcnR5XG4gICAgaWYgKChsYXllciBhcyBhbnkpLnZpZXcpIHtcbiAgICAgIGNvbnN0IHZpZXcgPSAobGF5ZXIgYXMgYW55KS52aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItdmlldycsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiB2aWV3XG4gICAgfVxuXG4gICAgLy8gMi4gVHJ5IHRvIGdldCBtYXAgZnJvbSBsYXllciBhbmQgdGhlbiB2aWV3IGZyb20gbWFwXG4gICAgY29uc3QgbWFwID0gKGxheWVyIGFzIGFueSkubWFwIHx8IFxuICAgICAgICAgICAgICAgIChsYXllciBhcyBhbnkpLnBhcmVudD8ubWFwIHx8XG4gICAgICAgICAgICAgICAgKGxheWVyIGFzIGFueSkuX19tYXAgfHxcbiAgICAgICAgICAgICAgICAobGF5ZXIgYXMgYW55KS5fbWFwXG4gICAgXG4gICAgaWYgKG1hcCkge1xuICAgICAgLy8gTG9nIG1hcCBwcm9wZXJ0aWVzXG4gICAgICBjb25zdCBtYXBLZXlzID0gT2JqZWN0LmtleXMobWFwKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgdHlwZW9mIChtYXAgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1tYXAtZm91bmQnLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgIG1hcElkOiBtYXAuaWQgfHwgJ3Vua25vd24nLFxuICAgICAgICBtYXBLZXlzOiBtYXBLZXlzLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIW1hcC52aWV3LFxuICAgICAgICBoYXNNYXBWaWV3czogISEobWFwLnZpZXdzKSxcbiAgICAgICAgbWFwVmlld3NMZW5ndGg6IG1hcC52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgdmlldyA9IG1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3M/Lmxlbmd0aCA+IDAgPyBtYXAudmlld3NbMF0gOiBudWxsKSB8fFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3MgJiYgbWFwLnZpZXdzLmxlbmd0aCA+IDAgPyBtYXAudmlld3MuZ2V0SXRlbUF0KDApIDogbnVsbClcbiAgICAgIFxuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1tYXAnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzLiBUcnkgdG8gZ2V0IHJvb3QgZGF0YSBzb3VyY2UgYW5kIGFjY2VzcyBtYXAgZnJvbSB0aGVyZVxuICAgIGNvbnN0IHJvb3REUyA9IG9yaWdpbkRTLmdldFJvb3REYXRhU291cmNlKClcbiAgICBpZiAocm9vdERTKSB7XG4gICAgICBjb25zdCByb290TWFwID0gKHJvb3REUyBhcyBhbnkpLmdldE1hcD8uKCkgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgKHJvb3REUyBhcyBhbnkpLm1hcCB8fFxuICAgICAgICAgICAgICAgICAgICAgIChyb290RFMgYXMgYW55KS5fX21hcCB8fFxuICAgICAgICAgICAgICAgICAgICAgIChyb290RFMgYXMgYW55KS5fbWFwXG4gICAgICBcbiAgICAgIGlmIChyb290TWFwKSB7XG4gICAgICAgIC8vIExvZyByb290IG1hcCBwcm9wZXJ0aWVzXG4gICAgICAgIGNvbnN0IHJvb3RNYXBLZXlzID0gT2JqZWN0LmtleXMocm9vdE1hcCkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgICB0eXBlb2YgKHJvb3RNYXAgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkuc2xpY2UoMCwgMjApXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXJvb3QtbWFwLWZvdW5kJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgIHJvb3REU1R5cGU6IHJvb3REUy50eXBlLFxuICAgICAgICAgIHJvb3RNYXBJZDogcm9vdE1hcC5pZCB8fCAndW5rbm93bicsXG4gICAgICAgICAgcm9vdE1hcEtleXM6IHJvb3RNYXBLZXlzLFxuICAgICAgICAgIGhhc1Jvb3RNYXBWaWV3OiAhIXJvb3RNYXAudmlldyxcbiAgICAgICAgICBoYXNSb290TWFwVmlld3M6ICEhKHJvb3RNYXAudmlld3MpLFxuICAgICAgICAgIHJvb3RNYXBWaWV3c0xlbmd0aDogcm9vdE1hcC52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBjb25zdCB2aWV3ID0gcm9vdE1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyByb290TWFwLnZpZXdzWzBdIDogbnVsbCkgfHxcbiAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzICYmIHJvb3RNYXAudmlld3MubGVuZ3RoID4gMCA/IHJvb3RNYXAudmlld3MuZ2V0SXRlbUF0KDApIDogbnVsbClcbiAgICAgICAgXG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLXJvb3REUycsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIHZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIExvZyByb290IERTIHByb3BlcnRpZXMgdG8gc2VlIHdoYXQncyBhdmFpbGFibGVcbiAgICAgICAgY29uc3Qgcm9vdERTS2V5cyA9IE9iamVjdC5rZXlzKHJvb3REUykuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgICB0eXBlb2YgKHJvb3REUyBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICAgKS5zbGljZSgwLCAyMClcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utcm9vdC1kcy1pbnNwZWN0aW9uJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgIHJvb3REU1R5cGU6IHJvb3REUy50eXBlLFxuICAgICAgICAgIHJvb3REU0tleXM6IHJvb3REU0tleXMsXG4gICAgICAgICAgaGFzR2V0TWFwOiB0eXBlb2YgKHJvb3REUyBhcyBhbnkpLmdldE1hcCA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgICBoYXNNYXA6ICEhKHJvb3REUyBhcyBhbnkpLm1hcCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tdmlldycsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgaGFzTGF5ZXJNYXA6ICEhbWFwLFxuICAgICAgaGFzUm9vdERTOiAhIXJvb3REUyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtZXJyb3InLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vKipcbiAqIEdldHMgdGhlIGRlZmF1bHQgaGlnaGxpZ2h0IHN5bWJvbCBiYXNlZCBvbiBnZW9tZXRyeSB0eXBlLlxuICogVXNlcyB0aGUgbWFwJ3MgYWN0dWFsIGhpZ2hsaWdodCBjb2xvciBmcm9tIGhpZ2hsaWdodE9wdGlvbnMgdG8gbWF0Y2ggc3RhbmRhcmQgc2VsZWN0aW9uIGFwcGVhcmFuY2UuXG4gKi9cbmZ1bmN0aW9uIGdldERlZmF1bHRIaWdobGlnaHRTeW1ib2woXG4gIGdlb21ldHJ5VHlwZTogc3RyaW5nLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IF9fZXNyaS5TeW1ib2wge1xuICAvLyBHZXQgZGVmYXVsdCBoaWdobGlnaHQgY29sb3IgZnJvbSB2aWV3J3MgaGlnaGxpZ2h0T3B0aW9uc1xuICBjb25zdCBoaWdobGlnaHRPcHRpb25zID0gKG1hcFZpZXcuaGlnaGxpZ2h0T3B0aW9ucyB8fCB7fSkgYXMgX19lc3JpLkhpZ2hsaWdodE9wdGlvbnNcbiAgXG4gIC8vIEV4dHJhY3QgY29sb3IgLSBjb3VsZCBiZSBhcnJheSBbUixHLEIsQV0gb3IgQ29sb3Igb2JqZWN0XG4gIGxldCBoaWdobGlnaHRDb2xvcjogbnVtYmVyW10gfCBudWxsID0gbnVsbFxuICBcbiAgaWYgKGhpZ2hsaWdodE9wdGlvbnMuY29sb3IpIHtcbiAgICAvLyBJZiBpdCdzIGEgQ29sb3Igb2JqZWN0LCBjb252ZXJ0IHRvIGFycmF5XG4gICAgaWYgKHR5cGVvZiBoaWdobGlnaHRPcHRpb25zLmNvbG9yID09PSAnb2JqZWN0JyAmJiAndG9SZ2JhJyBpbiBoaWdobGlnaHRPcHRpb25zLmNvbG9yKSB7XG4gICAgICBoaWdobGlnaHRDb2xvciA9IChoaWdobGlnaHRPcHRpb25zLmNvbG9yIGFzIGFueSkudG9SZ2JhKClcbiAgICB9IFxuICAgIC8vIElmIGl0J3MgYWxyZWFkeSBhbiBhcnJheVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGlnaGxpZ2h0T3B0aW9ucy5jb2xvcikpIHtcbiAgICAgIGhpZ2hsaWdodENvbG9yID0gaGlnaGxpZ2h0T3B0aW9ucy5jb2xvclxuICAgIH1cbiAgfVxuICBcbiAgLy8gSWYgbm8gY29sb3IgaW4gaGlnaGxpZ2h0T3B0aW9ucywgdXNlIHRoZSBBcmNHSVMgZG9jdW1lbnRlZCBkZWZhdWx0OiBjeWFuIFswLCAyNTUsIDI1NV1cbiAgaWYgKCFoaWdobGlnaHRDb2xvcikge1xuICAgIGhpZ2hsaWdodENvbG9yID0gWzAsIDI1NSwgMjU1LCAxLjBdIC8vIEZ1bGwgb3BhY2l0eSBkZWZhdWx0XG4gIH1cbiAgXG4gIC8vIEVuc3VyZSB3ZSBoYXZlIDQgZWxlbWVudHMgW1IsIEcsIEIsIEFdXG4gIGNvbnN0IGJhc2VDb2xvciA9IGhpZ2hsaWdodENvbG9yLnNsaWNlKDAsIDMpXG4gIGNvbnN0IGJhc2VBbHBoYSA9IGhpZ2hsaWdodENvbG9yLmxlbmd0aCA+PSA0ID8gaGlnaGxpZ2h0Q29sb3JbM10gOiAxLjBcbiAgXG4gIC8vIEdldCBmaWxsIG9wYWNpdHkgZnJvbSBoaWdobGlnaHRPcHRpb25zIG9yIHVzZSBkZWZhdWx0XG4gIGNvbnN0IGZpbGxPcGFjaXR5ID0gaGlnaGxpZ2h0T3B0aW9ucy5maWxsT3BhY2l0eSAhPT0gdW5kZWZpbmVkIFxuICAgID8gaGlnaGxpZ2h0T3B0aW9ucy5maWxsT3BhY2l0eSBcbiAgICA6IDAuMjUgLy8gRGVmYXVsdCAyNSUgb3BhY2l0eSBmb3IgZmlsbFxuICBjb25zdCBmaWxsQ29sb3IgPSBbLi4uYmFzZUNvbG9yLCBmaWxsT3BhY2l0eV1cbiAgXG4gIC8vIEdldCBoYWxvIG9wYWNpdHkgb3IgdXNlIGRlZmF1bHQgLSBmb3Igb3V0bGluZXMgYW5kIGxpbmVzXG4gIGNvbnN0IGhhbG9PcGFjaXR5ID0gaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eSAhPT0gdW5kZWZpbmVkXG4gICAgPyBoaWdobGlnaHRPcHRpb25zLmhhbG9PcGFjaXR5XG4gICAgOiBiYXNlQWxwaGEgLy8gVXNlIHRoZSBjb2xvcidzIGFscGhhIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIDEuMFxuICBjb25zdCBvdXRsaW5lQ29sb3IgPSBbLi4uYmFzZUNvbG9yLCBoYWxvT3BhY2l0eV1cbiAgXG4gIC8vIEZvciBsaW5lcywgdXNlIGZ1bGwgb3BhY2l0eSB0byBlbnN1cmUgdmlzaWJpbGl0eVxuICBjb25zdCBsaW5lT3BhY2l0eSA9IGhpZ2hsaWdodE9wdGlvbnMuaGFsb09wYWNpdHkgIT09IHVuZGVmaW5lZFxuICAgID8gTWF0aC5tYXgoaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eSwgMC44KSAvLyBBdCBsZWFzdCA4MCUgb3BhY2l0eVxuICAgIDogYmFzZUFscGhhIC8vIFVzZSB0aGUgY29sb3IncyBhbHBoYSwgb3IgZGVmYXVsdCB0byAxLjBcbiAgY29uc3QgbGluZUNvbG9yID0gWy4uLmJhc2VDb2xvciwgbGluZU9wYWNpdHldXG4gIFxuICBzd2l0Y2ggKGdlb21ldHJ5VHlwZSkge1xuICAgIGNhc2UgJ3BvaW50JzpcbiAgICBjYXNlICdtdWx0aXBvaW50JzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzaW1wbGUtbWFya2VyJyxcbiAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgb3V0bGluZToge1xuICAgICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgICAgd2lkdGg6IDJcbiAgICAgICAgfSxcbiAgICAgICAgc2l6ZTogMTJcbiAgICAgIH0gYXMgdW5rbm93biBhcyBfX2VzcmkuU2ltcGxlTWFya2VyU3ltYm9sXG4gICAgICBcbiAgICBjYXNlICdwb2x5bGluZSc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLWxpbmUnLFxuICAgICAgICBjb2xvcjogbGluZUNvbG9yLCAvLyBVc2UgbGluZUNvbG9yIHdpdGggcHJvcGVyIG9wYWNpdHlcbiAgICAgICAgd2lkdGg6IDQgLy8gSW5jcmVhc2VkIHdpZHRoIGZvciB2aXNpYmlsaXR5XG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZUxpbmVTeW1ib2xcbiAgICAgIFxuICAgIGNhc2UgJ3BvbHlnb24nOlxuICAgIGNhc2UgJ211bHRpcG9seWdvbic6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLWZpbGwnLFxuICAgICAgICBjb2xvcjogZmlsbENvbG9yLFxuICAgICAgICBvdXRsaW5lOiB7XG4gICAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgICB3aWR0aDogMlxuICAgICAgICB9XG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZUZpbGxTeW1ib2xcbiAgICAgIFxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBGYWxsYmFjayB0byBwb2x5Z29uIHN5bWJvbFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NpbXBsZS1maWxsJyxcbiAgICAgICAgY29sb3I6IGZpbGxDb2xvcixcbiAgICAgICAgb3V0bGluZToge1xuICAgICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgICAgd2lkdGg6IDJcbiAgICAgICAgfVxuICAgICAgfSBhcyB1bmtub3duIGFzIF9fZXNyaS5TaW1wbGVGaWxsU3ltYm9sXG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIG9yIGdldHMgYW4gZXhpc3RpbmcgZ3JhcGhpY3MgbGF5ZXIgZm9yIHRoZSB3aWRnZXQuXG4gKiBVc2VzIGEgdW5pcXVlIElEIGJhc2VkIG9uIHdpZGdldCBJRCB0byBlbnN1cmUgb25lIGxheWVyIHBlciB3aWRnZXQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXIoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogUHJvbWlzZTxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+IHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBjb25zdCBsYXllcklkID0gYHF1ZXJ5c2ltcGxlLWhpZ2hsaWdodC0ke3dpZGdldElkfWBcbiAgXG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgbGF5ZXIgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ0xheWVyID0gbWFwVmlldy5tYXAubGF5ZXJzLmZpbmQobGF5ZXIgPT4gbGF5ZXIuaWQgPT09IGxheWVySWQpIGFzIF9fZXNyaS5HcmFwaGljc0xheWVyXG4gICAgaWYgKGV4aXN0aW5nTGF5ZXIpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLWZvdW5kLWV4aXN0aW5nJyxcbiAgICAgICAgc2VxLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbGF5ZXJJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGV4aXN0aW5nTGF5ZXJcbiAgICB9XG5cbiAgICAvLyBMb2FkIEdyYXBoaWNzTGF5ZXIgbW9kdWxlXG4gICAgY29uc3QgW0dyYXBoaWNzTGF5ZXJdID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2VzcmkvbGF5ZXJzL0dyYXBoaWNzTGF5ZXInXSlcbiAgICBcbiAgICAvLyBDcmVhdGUgbmV3IGdyYXBoaWNzIGxheWVyXG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IG5ldyBHcmFwaGljc0xheWVyKHtcbiAgICAgIGlkOiBsYXllcklkLFxuICAgICAgdGl0bGU6IGBRdWVyeVNpbXBsZSBIaWdobGlnaHRzICgke3dpZGdldElkfSlgLFxuICAgICAgbGlzdE1vZGU6ICdoaWRlJywgLy8gSGlkZSBmcm9tIGxheWVyIGxpc3RcbiAgICAgIHZpc2libGU6IHRydWVcbiAgICB9KVxuICAgIFxuICAgIC8vIEFkZCB0byBtYXBcbiAgICBtYXBWaWV3Lm1hcC5hZGQoZ3JhcGhpY3NMYXllcilcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXItY3JlYXRlZCcsXG4gICAgICBzZXEsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGxheWVySWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiBncmFwaGljc0xheWVyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLWVycm9yJyxcbiAgICAgIHNlcSxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbGF5ZXJJZCxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuLyoqXG4gKiBBZGRzIGhpZ2hsaWdodCBncmFwaGljcyB0byB0aGUgZ3JhcGhpY3MgbGF5ZXIgdXNpbmcgZGVmYXVsdCBtYXAgaGlnaGxpZ2h0IGNvbG9yLlxuICogTm90ZTogVGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIEdyYXBoaWNzTGF5ZXIgbW9kdWxlIGlzIGxvYWRlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEhpZ2hsaWdodEdyYXBoaWNzKFxuICBncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcixcbiAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIWdyYXBoaWNzTGF5ZXIgfHwgIXJlY29yZHMgfHwgcmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1za2lwcGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHJlYXNvbjogIWdyYXBoaWNzTGF5ZXIgPyAnbm8tZ3JhcGhpY3MtbGF5ZXInIDogJ25vLXJlY29yZHMnLFxuICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBMb2cgZXhpc3Rpbmcgc3RhdGUgQkVGT1JFIGFkZGluZyAtIHZlcmlmeSBhc3N1bXB0aW9uIGFib3V0IGR1cGxpY2F0ZXNcbiAgY29uc3QgZXhpc3RpbmdHcmFwaGljc0NvdW50ID0gZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGhcbiAgY29uc3QgZXhpc3RpbmdSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgZXhpc3RpbmdSZWNvcmRJZFNldCA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIFxuICBncmFwaGljc0xheWVyLmdyYXBoaWNzLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgY29uc3QgcmVjb3JkSWQgPSBncmFwaGljLmF0dHJpYnV0ZXM/LnJlY29yZElkXG4gICAgaWYgKHJlY29yZElkKSB7XG4gICAgICBleGlzdGluZ1JlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgZXhpc3RpbmdSZWNvcmRJZFNldC5hZGQocmVjb3JkSWQpXG4gICAgfVxuICB9KVxuXG4gIC8vIExvZyB3aGF0IHdlJ3JlIHRyeWluZyB0byBhZGRcbiAgY29uc3QgaW5jb21pbmdSZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtYmVmb3JlLWFkZCcsXG4gICAgc2VxLFxuICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICBleGlzdGluZ0dyYXBoaWNzQ291bnQsXG4gICAgZXhpc3RpbmdSZWNvcmRJZHM6IGV4aXN0aW5nUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSwgLy8gTGltaXQgdG8gZmlyc3QgMjAgZm9yIHJlYWRhYmlsaXR5XG4gICAgZXhpc3RpbmdSZWNvcmRJZHNDb3VudDogZXhpc3RpbmdSZWNvcmRJZHMubGVuZ3RoLFxuICAgIGluY29taW5nUmVjb3JkSWRzOiBpbmNvbWluZ1JlY29yZElkcy5zbGljZSgwLCAyMCksIC8vIExpbWl0IHRvIGZpcnN0IDIwXG4gICAgaW5jb21pbmdSZWNvcmRJZHNDb3VudDogaW5jb21pbmdSZWNvcmRJZHMubGVuZ3RoLFxuICAgIGR1cGxpY2F0ZVJlY29yZElkczogaW5jb21pbmdSZWNvcmRJZHMuZmlsdGVyKGlkID0+IGV4aXN0aW5nUmVjb3JkSWRTZXQuaGFzKGlkKSkuc2xpY2UoMCwgMjApLFxuICAgIGR1cGxpY2F0ZUNvdW50OiBpbmNvbWluZ1JlY29yZElkcy5maWx0ZXIoaWQgPT4gZXhpc3RpbmdSZWNvcmRJZFNldC5oYXMoaWQpKS5sZW5ndGgsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pXG5cbiAgLy8gTG9hZCBHcmFwaGljIG1vZHVsZVxuICBjb25zdCBbR3JhcGhpY10gPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9HcmFwaGljJ10pXG5cbiAgbGV0IGFkZGVkQ291bnQgPSAwXG4gIGxldCBza2lwcGVkQ291bnQgPSAwXG4gIGxldCBkdXBsaWNhdGVDb3VudCA9IDBcbiAgY29uc3QgYWRkZWRSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgY29uc3Qgc2tpcHBlZFJlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBjb25zdCBkdXBsaWNhdGVSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cblxuICByZWNvcmRzLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVjb3JkSWQgPSByZWNvcmQuZ2V0SWQoKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIHJlY29yZCBJRCBhbHJlYWR5IGV4aXN0cyBpbiBncmFwaGljcyBsYXllclxuICAgICAgaWYgKGV4aXN0aW5nUmVjb3JkSWRTZXQuaGFzKHJlY29yZElkKSkge1xuICAgICAgICBkdXBsaWNhdGVDb3VudCsrXG4gICAgICAgIGR1cGxpY2F0ZVJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtZHVwbGljYXRlLWRldGVjdGVkJyxcbiAgICAgICAgICBzZXEsXG4gICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gLy8gU2tpcCBhZGRpbmcgZHVwbGljYXRlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGdyYXBoaWMgPSByZWNvcmQuZmVhdHVyZSBhcyBfX2VzcmkuR3JhcGhpY1xuICAgICAgaWYgKCFncmFwaGljIHx8ICFncmFwaGljLmdlb21ldHJ5KSB7XG4gICAgICAgIHNraXBwZWRDb3VudCsrXG4gICAgICAgIHNraXBwZWRSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBnZW9tZXRyeSB0eXBlIGZyb20gZ3JhcGhpY1xuICAgICAgY29uc3QgZ2VvbWV0cnlUeXBlID0gZ3JhcGhpYy5nZW9tZXRyeS50eXBlXG5cbiAgICAgIC8vIENyZWF0ZSBzeW1ib2wgdXNpbmcgZGVmYXVsdCBoaWdobGlnaHQgY29sb3JcbiAgICAgIGNvbnN0IHN5bWJvbCA9IGdldERlZmF1bHRIaWdobGlnaHRTeW1ib2woZ2VvbWV0cnlUeXBlLCBtYXBWaWV3KVxuXG4gICAgICAvLyBDcmVhdGUgbmV3IGdyYXBoaWMgd2l0aCBoaWdobGlnaHQgc3ltYm9sXG4gICAgICBjb25zdCBoaWdobGlnaHRHcmFwaGljID0gbmV3IEdyYXBoaWMoe1xuICAgICAgICBnZW9tZXRyeTogZ3JhcGhpYy5nZW9tZXRyeSxcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICByZWNvcmRJZDogcmVjb3JkSWQsXG4gICAgICAgICAgc291cmNlOiAncXVlcnlzaW1wbGUtaGlnaGxpZ2h0JyxcbiAgICAgICAgICB3aWRnZXRJZDogZ3JhcGhpY3NMYXllci5pZC5yZXBsYWNlKCdxdWVyeXNpbXBsZS1oaWdobGlnaHQtJywgJycpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGdyYXBoaWNzTGF5ZXIuYWRkKGhpZ2hsaWdodEdyYXBoaWMpXG4gICAgICBhZGRlZENvdW50KytcbiAgICAgIGFkZGVkUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgICBcbiAgICAgIC8vIEFkZCB0byB0cmFja2luZyBzZXQgdG8gcHJldmVudCBkdXBsaWNhdGVzIHdpdGhpbiB0aGlzIGJhdGNoXG4gICAgICBleGlzdGluZ1JlY29yZElkU2V0LmFkZChyZWNvcmRJZClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgc2tpcHBlZENvdW50KytcbiAgICAgIHNraXBwZWRSZWNvcmRJZHMucHVzaChyZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtcmVjb3JkLWVycm9yJyxcbiAgICAgICAgc2VxLFxuICAgICAgICByZWNvcmRJZDogcmVjb3JkLmdldElkKCksXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiAgLy8gTG9nIGZpbmFsIHN0YXRlIEFGVEVSIGFkZGluZ1xuICBjb25zdCBmaW5hbEdyYXBoaWNzQ291bnQgPSBncmFwaGljc0xheWVyLmdyYXBoaWNzLmxlbmd0aFxuICBjb25zdCBmaW5hbFJlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBncmFwaGljc0xheWVyLmdyYXBoaWNzLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgY29uc3QgcmVjb3JkSWQgPSBncmFwaGljLmF0dHJpYnV0ZXM/LnJlY29yZElkXG4gICAgaWYgKHJlY29yZElkKSB7XG4gICAgICBmaW5hbFJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgIH1cbiAgfSlcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtY29tcGxldGUnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICBhZGRlZENvdW50LFxuICAgIHNraXBwZWRDb3VudCxcbiAgICBkdXBsaWNhdGVDb3VudCxcbiAgICBhZGRlZFJlY29yZElkczogYWRkZWRSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMFxuICAgIHNraXBwZWRSZWNvcmRJZHM6IHNraXBwZWRSZWNvcmRJZHMuc2xpY2UoMCwgMjApLFxuICAgIGR1cGxpY2F0ZVJlY29yZElkczogZHVwbGljYXRlUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSxcbiAgICBleGlzdGluZ0dyYXBoaWNzQ291bnQsXG4gICAgZmluYWxHcmFwaGljc0NvdW50LFxuICAgIGV4cGVjdGVkRmluYWxDb3VudDogZXhpc3RpbmdHcmFwaGljc0NvdW50ICsgYWRkZWRDb3VudCxcbiAgICBmaW5hbFJlY29yZElkczogZmluYWxSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMFxuICAgIGZpbmFsUmVjb3JkSWRzQ291bnQ6IGZpbmFsUmVjb3JkSWRzLmxlbmd0aCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGhpZ2hsaWdodCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllciBieSByZWNvcmQgSURzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MoXG4gIGdyYXBoaWNzTGF5ZXI6IF9fZXNyaS5HcmFwaGljc0xheWVyLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdXG4pOiB2b2lkIHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIWdyYXBoaWNzTGF5ZXIgfHwgIXJlY29yZElkcyB8fCByZWNvcmRJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3Mtc2tpcHBlZCcsXG4gICAgICBzZXEsXG4gICAgICByZWFzb246ICFncmFwaGljc0xheWVyID8gJ25vLWdyYXBoaWNzLWxheWVyJyA6ICduby1yZWNvcmQtaWRzJyxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IHJlY29yZElkU2V0ID0gbmV3IFNldChyZWNvcmRJZHMpXG4gIGxldCByZW1vdmVkQ291bnQgPSAwXG5cbiAgLy8gRmluZCBhbmQgcmVtb3ZlIGdyYXBoaWNzIG1hdGNoaW5nIHJlY29yZCBJRHNcbiAgY29uc3QgZ3JhcGhpY3NUb1JlbW92ZTogX19lc3JpLkdyYXBoaWNbXSA9IFtdXG4gIGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBjb25zdCByZWNvcmRJZCA9IGdyYXBoaWMuYXR0cmlidXRlcz8ucmVjb3JkSWRcbiAgICBpZiAocmVjb3JkSWQgJiYgcmVjb3JkSWRTZXQuaGFzKHJlY29yZElkKSkge1xuICAgICAgZ3JhcGhpY3NUb1JlbW92ZS5wdXNoKGdyYXBoaWMpXG4gICAgfVxuICB9KVxuXG4gIGdyYXBoaWNzVG9SZW1vdmUuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBncmFwaGljc0xheWVyLnJlbW92ZShncmFwaGljKVxuICAgIHJlbW92ZWRDb3VudCsrXG4gIH0pXG5cbiAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICBldmVudDogJ3JlbW92ZUhpZ2hsaWdodEdyYXBoaWNzLWNvbXBsZXRlJyxcbiAgICBzZXEsXG4gICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgIHJlbW92ZWRDb3VudCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcbn1cblxuLyoqXG4gKiBDbGVhcnMgYWxsIGhpZ2hsaWdodCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyR3JhcGhpY3NMYXllcihncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcik6IHZvaWQge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGlmICghZ3JhcGhpY3NMYXllcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NsZWFyR3JhcGhpY3NMYXllci1za2lwcGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHJlYXNvbjogJ25vLWdyYXBoaWNzLWxheWVyJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBncmFwaGljc0NvdW50ID0gZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGhcbiAgZ3JhcGhpY3NMYXllci5yZW1vdmVBbGwoKVxuXG4gIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgZXZlbnQ6ICdjbGVhckdyYXBoaWNzTGF5ZXItY29tcGxldGUnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgZ3JhcGhpY3NSZW1vdmVkOiBncmFwaGljc0NvdW50LFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICB9KVxufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGdyYXBoaWNzIGxheWVyIGZyb20gdGhlIG1hcCBhbmQgY2xlYW5zIHVwIHJlZmVyZW5jZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbnVwR3JhcGhpY3NMYXllcihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiB2b2lkIHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBjb25zdCBsYXllcklkID0gYHF1ZXJ5c2ltcGxlLWhpZ2hsaWdodC0ke3dpZGdldElkfWBcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IG1hcFZpZXcubWFwLmxheWVycy5maW5kKGxheWVyID0+IGxheWVyLmlkID09PSBsYXllcklkKSBhcyBfX2VzcmkuR3JhcGhpY3NMYXllclxuICAgIGlmIChncmFwaGljc0xheWVyKSB7XG4gICAgICAvLyBDbGVhciBhbGwgZ3JhcGhpY3MgZmlyc3RcbiAgICAgIGdyYXBoaWNzTGF5ZXIucmVtb3ZlQWxsKClcbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIGxheWVyIGZyb20gbWFwXG4gICAgICBtYXBWaWV3Lm1hcC5yZW1vdmUoZ3JhcGhpY3NMYXllcilcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhbnVwR3JhcGhpY3NMYXllci1jb21wbGV0ZScsXG4gICAgICAgIHNlcSxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGxheWVySWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhbnVwR3JhcGhpY3NMYXllci1ub3QtZm91bmQnLFxuICAgICAgICBzZXEsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBsYXllcklkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NsZWFudXBHcmFwaGljc0xheWVyLWVycm9yJyxcbiAgICAgIHNlcSxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbGF5ZXJJZCxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG59XG5cbiIsImltcG9ydCB7IHR5cGUgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5pbnRlcmZhY2UgQWNjdW11bGF0ZWRSZWNvcmRzQ2FsbGJhY2tzIHtcbiAgb25Nb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIGFjY3VtdWxhdGVkIHJlY29yZHMgYW5kIHJlc3VsdHMgbW9kZSBzdGF0ZS5cbiAqIFxuICogQ2VudHJhbGl6ZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBtYW5hZ2VtZW50IGxvZ2ljIGZvciB0aGUgd2lkZ2V0LlxuICogSGFuZGxlcyByZXN1bHRzIG1vZGUgY2hhbmdlcywgYWNjdW11bGF0ZWQgcmVjb3JkcyB1cGRhdGVzLCBhbmQgbW9kZSByZXNldCBsb2dpYy5cbiAqIFxuICogUGFydCBvZiBDaHVuayA1OiBBY2N1bXVsYXRlZCBSZWNvcmRzIE1hbmFnZW1lbnQgZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgQWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciB7XG4gIHByaXZhdGUgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUgPSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICBwcml2YXRlIGFjY3VtdWxhdGVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gIHByaXZhdGUgY2FsbGJhY2tzPzogQWNjdW11bGF0ZWRSZWNvcmRzQ2FsbGJhY2tzXG5cbiAgLyoqXG4gICAqIFNldHMgY2FsbGJhY2tzIGZvciBtb2RlIGNoYW5nZSBhbmQgYWNjdW11bGF0ZWQgcmVjb3JkcyBjaGFuZ2UgZXZlbnRzLlxuICAgKiBcbiAgICogQHBhcmFtIGNhbGxiYWNrcyAtIENhbGxiYWNrcyBmb3IgbW9kZSBjaGFuZ2UgYW5kIGFjY3VtdWxhdGVkIHJlY29yZHMgY2hhbmdlXG4gICAqL1xuICBzZXRDYWxsYmFja3MoY2FsbGJhY2tzOiBBY2N1bXVsYXRlZFJlY29yZHNDYWxsYmFja3MpOiB2b2lkIHtcbiAgICB0aGlzLmNhbGxiYWNrcyA9IGNhbGxiYWNrc1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgcmVzdWx0cyBtb2RlLlxuICAgKiBcbiAgICogQHJldHVybnMgQ3VycmVudCByZXN1bHRzIG1vZGVcbiAgICovXG4gIGdldFJlc3VsdHNNb2RlKCk6IFNlbGVjdGlvblR5cGUge1xuICAgIHJldHVybiB0aGlzLnJlc3VsdHNNb2RlXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBhY2N1bXVsYXRlZCByZWNvcmRzLlxuICAgKiBcbiAgICogQHJldHVybnMgQ3VycmVudCBhY2N1bXVsYXRlZCByZWNvcmRzIGFycmF5XG4gICAqL1xuICBnZXRBY2N1bXVsYXRlZFJlY29yZHMoKTogRmVhdHVyZURhdGFSZWNvcmRbXSB7XG4gICAgcmV0dXJuIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY291bnQgb2YgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAgICogXG4gICAqIEByZXR1cm5zIE51bWJlciBvZiBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAqL1xuICBnZXRBY2N1bXVsYXRlZFJlY29yZHNDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIHdpZGdldCBpcyBpbiBhY2N1bXVsYXRpb24gbW9kZSAoQWRkIHRvIG9yIFJlbW92ZSBmcm9tKS5cbiAgICogXG4gICAqIEByZXR1cm5zIFRydWUgaWYgaW4gYWNjdW11bGF0aW9uIG1vZGUsIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgaXNBY2N1bXVsYXRpb25Nb2RlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICB0aGlzLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlcmUgYXJlIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gICAqIFxuICAgKiBAcmV0dXJucyBUcnVlIGlmIGFjY3VtdWxhdGVkIHJlY29yZHMgZXhpc3QsIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyByZXN1bHRzIG1vZGUgY2hhbmdlLlxuICAgKiBcbiAgICogVXBkYXRlcyB0aGUgcmVzdWx0cyBtb2RlIGFuZCBvcHRpb25hbGx5IGNsZWFycyBhY2N1bXVsYXRlZCByZWNvcmRzIHdoZW4gc3dpdGNoaW5nXG4gICAqIHRvIFwiTmV3XCIgbW9kZS4gQWxzbyBoYW5kbGVzIGhhc2ggcGFyYW1ldGVyIGNvbnN1bXB0aW9uIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2Rlcy5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRCBmb3IgbG9nZ2luZ1xuICAgKiBAcGFyYW0gbW9kZSAtIE5ldyByZXN1bHRzIG1vZGVcbiAgICogQHBhcmFtIHNob3VsZENvbnN1bWVIYXNoIC0gV2hldGhlciB0byBjb25zdW1lIGhhc2ggcGFyYW1ldGVyIChmb3IgZGVlcCBsaW5raW5nKVxuICAgKiBAcGFyYW0gaGFzaFNob3J0SWQgLSBPcHRpb25hbCBzaG9ydElkIHRvIGNvbnN1bWUgZnJvbSBoYXNoXG4gICAqIEBwYXJhbSByZW1vdmVIYXNoUGFyYW1ldGVyIC0gT3B0aW9uYWwgY2FsbGJhY2sgdG8gcmVtb3ZlIGhhc2ggcGFyYW1ldGVyXG4gICAqL1xuICBoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZShcbiAgICB3aWRnZXRJZDogc3RyaW5nLFxuICAgIG1vZGU6IFNlbGVjdGlvblR5cGUsXG4gICAgc2hvdWxkQ29uc3VtZUhhc2g6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBoYXNoU2hvcnRJZD86IHN0cmluZyxcbiAgICByZW1vdmVIYXNoUGFyYW1ldGVyPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICApOiB7IHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLCBhY2N1bXVsYXRlZFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gfSB7XG4gICAgY29uc3QgcHJldmlvdXNNb2RlID0gdGhpcy5yZXN1bHRzTW9kZVxuICAgIGNvbnN0IGN1cnJlbnRBY2N1bXVsYXRlZENvdW50ID0gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UtdHJpZ2dlcmVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgbmV3TW9kZTogbW9kZSxcbiAgICAgIGN1cnJlbnRBY2N1bXVsYXRlZENvdW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIENvbnN1bWUgZGVlcCBsaW5rIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2Rlc1xuICAgIGlmIChzaG91bGRDb25zdW1lSGFzaCAmJiAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBtb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pKSB7XG4gICAgICBpZiAoaGFzaFNob3J0SWQgJiYgcmVtb3ZlSGFzaFBhcmFtZXRlcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdjb25zdW1pbmctaGFzaC1vbi1tb2RlLXN3aXRjaCcsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgbW9kZSxcbiAgICAgICAgICBzaG9ydElkOiBoYXNoU2hvcnRJZFxuICAgICAgICB9KVxuICAgICAgICByZW1vdmVIYXNoUGFyYW1ldGVyKGhhc2hTaG9ydElkKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHN3aXRjaGluZyB0byBcIk5ld1wiIG1vZGUsIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICBpZiAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtb24tbW9kZS1zd2l0Y2gnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcHJldmlvdXNNb2RlXG4gICAgICB9KVxuICAgICAgdGhpcy5yZXN1bHRzTW9kZSA9IG1vZGVcbiAgICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzID0gW11cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXN1bHRzTW9kZSA9IG1vZGVcbiAgICB9XG5cbiAgICAvLyBUcmlnZ2VyIGNhbGxiYWNrXG4gICAgaWYgKHRoaXMuY2FsbGJhY2tzPy5vbk1vZGVDaGFuZ2UpIHtcbiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uTW9kZUNoYW5nZSh0aGlzLnJlc3VsdHNNb2RlKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5yZXN1bHRzTW9kZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBhY2N1bXVsYXRlZCByZWNvcmRzIGNoYW5nZS5cbiAgICogXG4gICAqIFVwZGF0ZXMgdGhlIGFjY3VtdWxhdGVkIHJlY29yZHMgYXJyYXkuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSUQgZm9yIGxvZ2dpbmdcbiAgICogQHBhcmFtIHJlY29yZHMgLSBOZXcgYWNjdW11bGF0ZWQgcmVjb3JkcyBhcnJheVxuICAgKi9cbiAgaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHdpZGdldElkOiBzdHJpbmcsIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10pOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2aW91c0NvdW50ID0gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgY29uc3QgbmV3Q291bnQgPSByZWNvcmRzLmxlbmd0aFxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZS10cmlnZ2VyZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBwcmV2aW91c0NvdW50LFxuICAgICAgbmV3Q291bnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMgPSByZWNvcmRzXG5cbiAgICAvLyBUcmlnZ2VyIGNhbGxiYWNrXG4gICAgaWYgKHRoaXMuY2FsbGJhY2tzPy5vbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgdGhpcy5jYWxsYmFja3Mub25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UodGhpcy5hY2N1bXVsYXRlZFJlY29yZHMpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0cyBtb2RlIHRvIFwiTmV3IFNlbGVjdGlvblwiIGFuZCBjbGVhcnMgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAgICogXG4gICAqIENhbGxlZCB3aGVuIGhhc2ggcGFyYW1ldGVycyBhcmUgZGV0ZWN0ZWQgdG8gcmVzZXQgdGhlIHdpZGdldCB0byBhIGNsZWFuIHN0YXRlLlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEIGZvciBsb2dnaW5nXG4gICAqIEBwYXJhbSBjdXJyZW50TW9kZSAtIEN1cnJlbnQgbW9kZSBiZWZvcmUgcmVzZXRcbiAgICovXG4gIHJlc2V0TW9kZU9uSGFzaERldGVjdGlvbih3aWRnZXRJZDogc3RyaW5nLCBjdXJyZW50TW9kZTogU2VsZWN0aW9uVHlwZSk6IHsgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUsIGFjY3VtdWxhdGVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSB9IHtcbiAgICBpZiAoY3VycmVudE1vZGUgIT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnbW9kZS1yZXNldC1uZWVkZWQtb24taGFzaC1kZXRlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgY3VycmVudE1vZGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHRoaXMucmVzdWx0c01vZGUgPSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMgPSBbXVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5yZXN1bHRzTW9kZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIHRoZSBtYW5hZ2VyLlxuICAgKiBcbiAgICogUmVzZXRzIHN0YXRlIHRvIGluaXRpYWwgdmFsdWVzLlxuICAgKi9cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlc3VsdHNNb2RlID0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3JkcyA9IFtdXG4gICAgdGhpcy5jYWxsYmFja3MgPSB1bmRlZmluZWRcbiAgfVxufVxuXG4iLCJpbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogRXZlbnQgbmFtZSBjb25zdGFudHMgZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldCBldmVudHMuXG4gKi9cbmV4cG9ydCBjb25zdCBRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQgPSAncXVlcnlzaW1wbGUtc2VsZWN0aW9uLWNoYW5nZWQnXG5leHBvcnQgY29uc3QgUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCA9ICdxdWVyeXNpbXBsZS1yZXN0b3JlLW9uLWlkZW50aWZ5LWNsb3NlJ1xuZXhwb3J0IGNvbnN0IE9QRU5fV0lER0VUX0VWRU5UID0gJ2hlbHBlcnNpbXBsZS1vcGVuLXdpZGdldCdcblxuLyoqXG4gKiBFdmVudCBoYW5kbGVyIGNhbGxiYWNrcyBmb3IgRXZlbnRNYW5hZ2VyLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEV2ZW50SGFuZGxlcnMge1xuICBvbk9wZW5XaWRnZXRFdmVudD86IChldmVudDogQ3VzdG9tRXZlbnQpID0+IHZvaWRcbiAgb25TZWxlY3Rpb25DaGFuZ2U/OiAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkXG4gIG9uUmVzdG9yZU9uSWRlbnRpZnlDbG9zZT86IChldmVudDogRXZlbnQpID0+IHZvaWRcbn1cblxuLyoqXG4gKiBVdGlsaXR5IHRvIG1hbmFnZSBldmVudCBsaXN0ZW5lcnMgYW5kIGN1c3RvbSBldmVudCBkaXNwYXRjaGluZy5cbiAqIFxuICogQ2VudHJhbGl6ZXMgZXZlbnQgaGFuZGxpbmcgbG9naWMgZm9yIHRoZSB3aWRnZXQsIGluY2x1ZGluZzpcbiAqIC0gRXZlbnQgbGlzdGVuZXIgc2V0dXAvY2xlYW51cFxuICogLSBDdXN0b20gZXZlbnQgZGlzcGF0Y2hpbmdcbiAqIC0gRXZlbnQgaGFuZGxlciByZWdpc3RyYXRpb25cbiAqIFxuICogUGFydCBvZiBDaHVuayA3OiBFdmVudCBIYW5kbGluZyBleHRyYWN0aW9uLlxuICogXG4gKiBOb3RlOiBUaGlzIGlzIGEgdXRpbGl0eSBjbGFzcyAobm90IGEgaG9vaykgdG8gd29yayB3aXRoIGNsYXNzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBFdmVudE1hbmFnZXIge1xuICBwcml2YXRlIGhhbmRsZXJzPzogRXZlbnRIYW5kbGVyc1xuICBwcml2YXRlIGxpc3RlbmVyc1NldHVwOiBib29sZWFuID0gZmFsc2VcblxuICAvKipcbiAgICogU2V0cyBldmVudCBoYW5kbGVyIGNhbGxiYWNrcy5cbiAgICogXG4gICAqIEBwYXJhbSBoYW5kbGVycyAtIEV2ZW50IGhhbmRsZXIgY2FsbGJhY2tzXG4gICAqL1xuICBzZXRIYW5kbGVycyhoYW5kbGVyczogRXZlbnRIYW5kbGVycyk6IHZvaWQge1xuICAgIHRoaXMuaGFuZGxlcnMgPSBoYW5kbGVyc1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgYWxsIGV2ZW50IGxpc3RlbmVycy5cbiAgICogXG4gICAqIFJlZ2lzdGVycyBsaXN0ZW5lcnMgZm9yOlxuICAgKiAtIE9QRU5fV0lER0VUX0VWRU5UOiBIZWxwZXJTaW1wbGUgb3JjaGVzdHJhdGlvblxuICAgKiAtIFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVDogU2VsZWN0aW9uIGNoYW5nZXMgZnJvbSBRdWVyeVRhc2tSZXN1bHRcbiAgICogLSBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5UOiBSZXN0b3JlIHNlbGVjdGlvbiBhZnRlciBpZGVudGlmeSBwb3B1cCBjbG9zZXNcbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRCBmb3IgbG9nZ2luZ1xuICAgKi9cbiAgc2V0dXAod2lkZ2V0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxpc3RlbmVyc1NldHVwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VWRU5UUycsIHtcbiAgICAgICAgZXZlbnQ6ICdldmVudC1tYW5hZ2VyLXNldHVwLWFscmVhZHktc2V0dXAnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdFVkVOVFMnLCB7XG4gICAgICBldmVudDogJ2V2ZW50LW1hbmFnZXItc2V0dXAtc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gTGlzdGVuIGZvciBIZWxwZXJTaW1wbGUgb3JjaGVzdHJhdGlvbiBldmVudHNcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihPUEVOX1dJREdFVF9FVkVOVCwgdGhpcy5oYW5kbGVPcGVuV2lkZ2V0RXZlbnRCb3VuZClcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHNlbGVjdGlvbiBjaGFuZ2VzIGZyb20gcXVlcnktcmVzdWx0XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZUJvdW5kKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgcmVzdG9yZSByZXF1ZXN0cyB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlc1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQsIHRoaXMuaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZUJvdW5kKVxuXG4gICAgdGhpcy5saXN0ZW5lcnNTZXR1cCA9IHRydWVcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVZFTlRTJywge1xuICAgICAgZXZlbnQ6ICdldmVudC1tYW5hZ2VyLXNldHVwLWNvbXBsZXRlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbGlzdGVuZXJzUmVnaXN0ZXJlZDogMyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIGFsbCBldmVudCBsaXN0ZW5lcnMuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSUQgZm9yIGxvZ2dpbmdcbiAgICovXG4gIGNsZWFudXAod2lkZ2V0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnNTZXR1cCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdFVkVOVFMnLCB7XG4gICAgICAgIGV2ZW50OiAnZXZlbnQtbWFuYWdlci1jbGVhbnVwLW5vdC1zZXR1cCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VWRU5UUycsIHtcbiAgICAgIGV2ZW50OiAnZXZlbnQtbWFuYWdlci1jbGVhbnVwLXN0YXJ0JyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKE9QRU5fV0lER0VUX0VWRU5ULCB0aGlzLmhhbmRsZU9wZW5XaWRnZXRFdmVudEJvdW5kKVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwgdGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2VCb3VuZClcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5ULCB0aGlzLmhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2VCb3VuZClcblxuICAgIHRoaXMubGlzdGVuZXJzU2V0dXAgPSBmYWxzZVxuICAgIHRoaXMuaGFuZGxlcnMgPSB1bmRlZmluZWRcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVZFTlRTJywge1xuICAgICAgZXZlbnQ6ICdldmVudC1tYW5hZ2VyLWNsZWFudXAtY29tcGxldGUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYSBjdXN0b20gZXZlbnQgdG8gbm90aWZ5IEhlbHBlclNpbXBsZSBvZiBzZWxlY3Rpb24gY2hhbmdlcy5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRFxuICAgKiBAcGFyYW0gcmVjb3JkSWRzIC0gQXJyYXkgb2Ygc2VsZWN0ZWQgcmVjb3JkIElEc1xuICAgKiBAcGFyYW0gZGF0YVNvdXJjZUlkIC0gT3B0aW9uYWwgZGF0YSBzb3VyY2UgSURcbiAgICogQHBhcmFtIG91dHB1dERzSWQgLSBPdXRwdXQgZGF0YSBzb3VyY2UgSUQgKHJlcXVpcmVkIGZvciBsYXN0U2VsZWN0aW9uIHN0YXRlKVxuICAgKiBAcGFyYW0gcXVlcnlJdGVtQ29uZmlnSWQgLSBRdWVyeSBpdGVtIGNvbmZpZyBJRCAocmVxdWlyZWQgZm9yIGxhc3RTZWxlY3Rpb24gc3RhdGUpXG4gICAqL1xuICBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50KFxuICAgIHdpZGdldElkOiBzdHJpbmcsIFxuICAgIHJlY29yZElkczogc3RyaW5nW10sIFxuICAgIGRhdGFTb3VyY2VJZD86IHN0cmluZyxcbiAgICBvdXRwdXREc0lkPzogc3RyaW5nLFxuICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkPzogc3RyaW5nXG4gICk6IHZvaWQge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVZFTlRTJywge1xuICAgICAgZXZlbnQ6ICdldmVudC1tYW5hZ2VyLWRpc3BhdGNoLXNlbGVjdGlvbi1ldmVudCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgZGF0YVNvdXJjZUlkLFxuICAgICAgb3V0cHV0RHNJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZWNvcmRJZHMsXG4gICAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgICAgb3V0cHV0RHNJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VWRU5UUycsIHtcbiAgICAgIGV2ZW50OiAnZXZlbnQtbWFuYWdlci1zZWxlY3Rpb24tZXZlbnQtZGlzcGF0Y2hlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgZXZlbnQgbGlzdGVuZXJzIGFyZSBjdXJyZW50bHkgc2V0IHVwLlxuICAgKiBcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBsaXN0ZW5lcnMgYXJlIHNldCB1cCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuICBpc1NldHVwKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVyc1NldHVwXG4gIH1cblxuICAvKipcbiAgICogQm91bmQgZXZlbnQgaGFuZGxlciBmb3IgT1BFTl9XSURHRVRfRVZFTlQuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZU9wZW5XaWRnZXRFdmVudEJvdW5kID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgIGlmICh0aGlzLmhhbmRsZXJzPy5vbk9wZW5XaWRnZXRFdmVudCkge1xuICAgICAgdGhpcy5oYW5kbGVycy5vbk9wZW5XaWRnZXRFdmVudChldmVudCBhcyBDdXN0b21FdmVudClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQm91bmQgZXZlbnQgaGFuZGxlciBmb3IgUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVTZWxlY3Rpb25DaGFuZ2VCb3VuZCA9IChldmVudDogRXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy5oYW5kbGVycz8ub25TZWxlY3Rpb25DaGFuZ2UpIHtcbiAgICAgIHRoaXMuaGFuZGxlcnMub25TZWxlY3Rpb25DaGFuZ2UoZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJvdW5kIGV2ZW50IGhhbmRsZXIgZm9yIFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2VCb3VuZCA9IChldmVudDogRXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy5oYW5kbGVycz8ub25SZXN0b3JlT25JZGVudGlmeUNsb3NlKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzLm9uUmVzdG9yZU9uSWRlbnRpZnlDbG9zZShldmVudClcbiAgICB9XG4gIH1cbn1cblxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdHlwZSBBbGxXaWRnZXRQcm9wcywgdHlwZSBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZyB9IGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZU9yR2V0R3JhcGhpY3NMYXllciwgY2xlYW51cEdyYXBoaWNzTGF5ZXIgfSBmcm9tICcuLi9ncmFwaGljcy1sYXllci11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuaW50ZXJmYWNlIEdyYXBoaWNzTGF5ZXJDYWxsYmFja3Mge1xuICBvbkdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZD86IChncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcikgPT4gdm9pZFxuICBvbkdyYXBoaWNzTGF5ZXJDbGVhbmVkPzogKCkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIGdyYXBoaWNzIGxheWVyIGluaXRpYWxpemF0aW9uIGFuZCBjbGVhbnVwLlxuICogXG4gKiBDZW50cmFsaXplcyBncmFwaGljcyBsYXllciBtYW5hZ2VtZW50IGxvZ2ljIGZvciB0aGUgd2lkZ2V0LlxuICogSGFuZGxlcyBncmFwaGljcyBsYXllciBjcmVhdGlvbiwgaW5pdGlhbGl6YXRpb24sIGFuZCBjbGVhbnVwLlxuICogXG4gKiBQYXJ0IG9mIENodW5rIDQ6IEdyYXBoaWNzIExheWVyIE1hbmFnZW1lbnQgZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgR3JhcGhpY3NMYXllck1hbmFnZXIge1xuICBwcml2YXRlIGdyYXBoaWNzTGF5ZXJSZWY6IFJlYWN0LlJlZk9iamVjdDxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+XG4gIHByaXZhdGUgbWFwVmlld1JlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+XG5cbiAgY29uc3RydWN0b3IoXG4gICAgZ3JhcGhpY3NMYXllclJlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbD4sXG4gICAgbWFwVmlld1JlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+XG4gICkge1xuICAgIHRoaXMuZ3JhcGhpY3NMYXllclJlZiA9IGdyYXBoaWNzTGF5ZXJSZWZcbiAgICB0aGlzLm1hcFZpZXdSZWYgPSBtYXBWaWV3UmVmXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGdyYXBoaWNzIGxheWVyIGZvciBtYXAgaGlnaGxpZ2h0aW5nLlxuICAgKiBcbiAgICogQ3JlYXRlcyBvciByZXRyaWV2ZXMgYSBncmFwaGljcyBsYXllciBhbmQgYWRkcyBpdCB0byB0aGUgbWFwIHZpZXcuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSUQgZm9yIGdyYXBoaWNzIGxheWVyIG5hbWluZ1xuICAgKiBAcGFyYW0gbWFwVmlldyAtIFRoZSBBcmNHSVMgTWFwVmlldyBvciBTY2VuZVZpZXcgaW5zdGFuY2VcbiAgICogQHBhcmFtIGNhbGxiYWNrcyAtIE9wdGlvbmFsIGNhbGxiYWNrcyBmb3IgaW5pdGlhbGl6YXRpb24gZXZlbnRzXG4gICAqIFxuICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byB0aGUgZ3JhcGhpY3MgbGF5ZXIsIG9yIG51bGwgaWYgaW5pdGlhbGl6YXRpb24gZmFpbGVkXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplKFxuICAgIHdpZGdldElkOiBzdHJpbmcsXG4gICAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3LFxuICAgIGNhbGxiYWNrcz86IEdyYXBoaWNzTGF5ZXJDYWxsYmFja3NcbiAgKTogUHJvbWlzZTxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+IHtcbiAgICAvLyBDaHVuayA0OiBDb21wYXJpc29uIGxvZ2dpbmcgLSBuZXcgaW1wbGVtZW50YXRpb25cbiAgICBjb25zdCBuZXdTdGF0ZUJlZm9yZSA9IHtcbiAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQsXG4gICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5pZCB8fCBudWxsLFxuICAgICAgaGFzTWFwVmlldzogISF0aGlzLm1hcFZpZXdSZWYuY3VycmVudCxcbiAgICAgIHZpZXdUeXBlOiB0aGlzLm1hcFZpZXdSZWYuY3VycmVudD8udHlwZSB8fCBudWxsXG4gICAgfVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXItYmVmb3JlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICBtYXBWaWV3VHlwZTogbWFwVmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIG9yIGdldCBncmFwaGljcyBsYXllclxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IGF3YWl0IGNyZWF0ZU9yR2V0R3JhcGhpY3NMYXllcih3aWRnZXRJZCwgbWFwVmlldylcbiAgICAgIGlmICghZ3JhcGhpY3NMYXllcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllci1mYWlsZWQnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgICByZXN1bHQ6ICdmYWlsZWQnLFxuICAgICAgICAgICAgcmVhc29uOiAnZ3JhcGhpY3MtbGF5ZXItY3JlYXRpb24tZmFpbGVkJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cblxuICAgICAgLy8gU3RvcmUgcmVmZXJlbmNlc1xuICAgICAgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgPSBtYXBWaWV3XG4gICAgICB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCA9IGdyYXBoaWNzTGF5ZXJcblxuICAgICAgY29uc3QgbmV3U3RhdGVBZnRlciA9IHtcbiAgICAgICAgaGFzR3JhcGhpY3NMYXllcjogISF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCxcbiAgICAgICAgZ3JhcGhpY3NMYXllcklkOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudD8uaWQgfHwgbnVsbCxcbiAgICAgICAgaGFzTWFwVmlldzogISF0aGlzLm1hcFZpZXdSZWYuY3VycmVudCxcbiAgICAgICAgdmlld1R5cGU6IHRoaXMubWFwVmlld1JlZi5jdXJyZW50Py50eXBlIHx8IG51bGxcbiAgICAgIH1cblxuICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWluaXRpYWxpemVHcmFwaGljc0xheWVyLXN1Y2Nlc3MnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgc3RhdGVBZnRlcjogbmV3U3RhdGVBZnRlcixcbiAgICAgICAgICByZXN1bHQ6ICdzdWNjZXNzJyxcbiAgICAgICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICAgICAgdmlld1R5cGU6IG1hcFZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vIENhbGwgY2FsbGJhY2sgaWYgcHJvdmlkZWRcbiAgICAgIGlmIChjYWxsYmFja3M/Lm9uR3JhcGhpY3NMYXllckluaXRpYWxpemVkKSB7XG4gICAgICAgIGNhbGxiYWNrcy5vbkdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZChncmFwaGljc0xheWVyKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ3JhcGhpY3NMYXllclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXItZXJyb3InLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgcmVzdWx0OiAnZXJyb3InLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBncmFwaGljcyBsYXllciBsYXppbHkgd2hlbiBvdXRwdXQgZGF0YSBzb3VyY2UgYmVjb21lcyBhdmFpbGFibGUuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSURcbiAgICogQHBhcmFtIGNvbmZpZyAtIFdpZGdldCBjb25maWd1cmF0aW9uXG4gICAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgdGhhdCB3YXMgY3JlYXRlZFxuICAgKiBAcGFyYW0gbWFwVmlldyAtIE9wdGlvbmFsIG1hcCB2aWV3IChpZiBub3QgcHJvdmlkZWQsIHVzZXMgbWFwVmlld1JlZilcbiAgICogQHBhcmFtIGNhbGxiYWNrcyAtIE9wdGlvbmFsIGNhbGxiYWNrc1xuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZUZyb21PdXRwdXREUyhcbiAgICB3aWRnZXRJZDogc3RyaW5nLFxuICAgIGNvbmZpZzogSU1Db25maWcsXG4gICAgb3V0cHV0RFM6IERhdGFTb3VyY2UsXG4gICAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbCxcbiAgICBjYWxsYmFja3M/OiBHcmFwaGljc0xheWVyQ2FsbGJhY2tzXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIENodW5rIDQ6IENvbXBhcmlzb24gbG9nZ2luZyAtIG5ldyBpbXBsZW1lbnRhdGlvblxuICAgIGNvbnN0IG5ld1N0YXRlQmVmb3JlID0ge1xuICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodDogY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICBoYXNHcmFwaGljc0xheWVyOiAhIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudD8uaWQgfHwgbnVsbCxcbiAgICAgIGhhc01hcFZpZXc6ICEhdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZFxuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTLWJlZm9yZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBPbmx5IGluaXRpYWxpemUgaWYgZW5hYmxlZCBhbmQgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWRcbiAgICBpZiAoIWNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IHx8IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50KSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFMtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICByZXN1bHQ6ICdza2lwcGVkJyxcbiAgICAgICAgICByZWFzb246ICFjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCA/ICdub3QtZW5hYmxlZCcgOiAnYWxyZWFkeS1pbml0aWFsaXplZCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBVc2UgcHJvdmlkZWQgbWFwIHZpZXcgb3IgZ2V0IGZyb20gcmVmXG4gICAgY29uc3QgbWFwVmlld1RvVXNlID0gbWFwVmlldyB8fCB0aGlzLm1hcFZpZXdSZWYuY3VycmVudFxuICAgIGlmICghbWFwVmlld1RvVXNlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFMtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICByZXN1bHQ6ICdza2lwcGVkJyxcbiAgICAgICAgICByZWFzb246ICdtYXAtdmlldy1ub3QtYXZhaWxhYmxlLXlldCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIGdyYXBoaWNzIGxheWVyXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKHdpZGdldElkLCBtYXBWaWV3VG9Vc2UsIGNhbGxiYWNrcylcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgdGhlIGdyYXBoaWNzIGxheWVyLlxuICAgKiBcbiAgICogUmVtb3ZlcyB0aGUgZ3JhcGhpY3MgbGF5ZXIgZnJvbSB0aGUgbWFwIHZpZXcgYW5kIGNsZWFycyBpbnRlcm5hbCByZWZlcmVuY2VzLlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEXG4gICAqIEBwYXJhbSBjYWxsYmFja3MgLSBPcHRpb25hbCBjYWxsYmFja3NcbiAgICovXG4gIGNsZWFudXAoXG4gICAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgICBjYWxsYmFja3M/OiBHcmFwaGljc0xheWVyQ2FsbGJhY2tzXG4gICk6IHZvaWQge1xuICAgIC8vIENodW5rIDQ6IENvbXBhcmlzb24gbG9nZ2luZyAtIG5ldyBpbXBsZW1lbnRhdGlvblxuICAgIGNvbnN0IG5ld1N0YXRlQmVmb3JlID0ge1xuICAgICAgaGFzR3JhcGhpY3NMYXllcjogISF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCxcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQ/LmlkIHx8IG51bGwsXG4gICAgICBoYXNNYXBWaWV3OiAhIXRoaXMubWFwVmlld1JlZi5jdXJyZW50LFxuICAgICAgdmlld1R5cGU6IHRoaXMubWFwVmlld1JlZi5jdXJyZW50Py50eXBlIHx8IG51bGxcbiAgICB9XG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1jbGVhbnVwR3JhcGhpY3NMYXllci1iZWZvcmUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBtYXBWaWV3ID0gdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnRcbiAgICBpZiAobWFwVmlldykge1xuICAgICAgY2xlYW51cEdyYXBoaWNzTGF5ZXIod2lkZ2V0SWQsIG1hcFZpZXcpXG4gICAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50ID0gbnVsbFxuXG4gICAgICBjb25zdCBuZXdTdGF0ZUFmdGVyID0ge1xuICAgICAgICBoYXNHcmFwaGljc0xheWVyOiAhIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LFxuICAgICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5pZCB8fCBudWxsLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIXRoaXMubWFwVmlld1JlZi5jdXJyZW50LFxuICAgICAgICB2aWV3VHlwZTogdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQ/LnR5cGUgfHwgbnVsbFxuICAgICAgfVxuXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24tY2xlYW51cEdyYXBoaWNzTGF5ZXItY29tcGxldGUnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgc3RhdGVBZnRlcjogbmV3U3RhdGVBZnRlcixcbiAgICAgICAgICByZXN1bHQ6ICdjb21wbGV0ZScsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vIENhbGwgY2FsbGJhY2sgaWYgcHJvdmlkZWRcbiAgICAgIGlmIChjYWxsYmFja3M/Lm9uR3JhcGhpY3NMYXllckNsZWFuZWQpIHtcbiAgICAgICAgY2FsbGJhY2tzLm9uR3JhcGhpY3NMYXllckNsZWFuZWQoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24tY2xlYW51cEdyYXBoaWNzTGF5ZXItc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICByZXN1bHQ6ICdza2lwcGVkJyxcbiAgICAgICAgICByZWFzb246ICduby1tYXAtdmlldycsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgZ3JhcGhpY3MgZnJvbSB0aGUgZ3JhcGhpY3MgbGF5ZXIgaWYgaXQgZXhpc3RzLlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEIGZvciBsb2dnaW5nXG4gICAqIEBwYXJhbSBjb25maWcgLSBXaWRnZXQgY29uZmlndXJhdGlvblxuICAgKi9cbiAgY2xlYXJHcmFwaGljcyh3aWRnZXRJZDogc3RyaW5nLCBjb25maWc6IElNQ29uZmlnKTogdm9pZCB7XG4gICAgLy8gQ2h1bmsgNDogQ29tcGFyaXNvbiBsb2dnaW5nIC0gbmV3IGltcGxlbWVudGF0aW9uXG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50XG4gICAgY29uc3QgbmV3U3RhdGVCZWZvcmUgPSB7XG4gICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0OiBjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhZ3JhcGhpY3NMYXllcixcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllcj8uaWQgfHwgbnVsbCxcbiAgICAgIGdyYXBoaWNzQ291bnQ6IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzLmxlbmd0aCB8fCAwXG4gICAgfVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24tY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtYmVmb3JlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGlmIChjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBncmFwaGljc0xheWVyKSB7XG4gICAgICBjb25zdCB7IGNsZWFyR3JhcGhpY3NMYXllciB9ID0gcmVxdWlyZSgnLi4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnKVxuICAgICAgY2xlYXJHcmFwaGljc0xheWVyKGdyYXBoaWNzTGF5ZXIpXG4gICAgICBcbiAgICAgIGNvbnN0IG5ld1N0YXRlQWZ0ZXIgPSB7XG4gICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ6IGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICBoYXNHcmFwaGljc0xheWVyOiAhIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LFxuICAgICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5pZCB8fCBudWxsLFxuICAgICAgICBncmFwaGljc0NvdW50OiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudD8uZ3JhcGhpY3MubGVuZ3RoIHx8IDBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzLWNvbXBsZXRlJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHN0YXRlQWZ0ZXI6IG5ld1N0YXRlQWZ0ZXIsXG4gICAgICAgICAgcmVzdWx0OiAnY29tcGxldGUnLFxuICAgICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzLXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgcmVzdWx0OiAnc2tpcHBlZCcsXG4gICAgICAgICAgcmVhc29uOiAhY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgPyAnbm90LWVuYWJsZWQnIDogJ25vLWdyYXBoaWNzLWxheWVyJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBncmFwaGljcyBsYXllci5cbiAgICovXG4gIGdldEdyYXBoaWNzTGF5ZXIoKTogX19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnRcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgZ3JhcGhpY3MgbGF5ZXIgc2hvdWxkIGJlIGluaXRpYWxpemVkIGJhc2VkIG9uIGNvbmZpZyBhbmQgY3VycmVudCBzdGF0ZS5cbiAgICogXG4gICAqIEBwYXJhbSBjb25maWcgLSBXaWRnZXQgY29uZmlndXJhdGlvblxuICAgKiBAcGFyYW0gbWFwVmlldyAtIE1hcCB2aWV3IHRvIGNoZWNrXG4gICAqIEByZXR1cm5zIHRydWUgaWYgZ3JhcGhpY3MgbGF5ZXIgc2hvdWxkIGJlIGluaXRpYWxpemVkXG4gICAqL1xuICBzaG91bGRJbml0aWFsaXplKFxuICAgIGNvbmZpZzogSU1Db25maWcsXG4gICAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbFxuICApOiBib29sZWFuIHtcbiAgICByZXR1cm4gISEobWFwVmlldyAmJiBjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiAhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQpXG4gIH1cbn1cblxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdHlwZSBBbGxXaWRnZXRQcm9wcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgSU1Db25maWcgfSBmcm9tICcuLi8uLi9jb25maWcnXG5pbXBvcnQgeyB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmludGVyZmFjZSBNYXBWaWV3Q2FsbGJhY2tzIHtcbiAgb25NYXBWaWV3Q2hhbmdlPzogKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyB8IG51bGwpID0+IHZvaWRcbn1cblxuLyoqXG4gKiBVdGlsaXR5IHRvIG1hbmFnZSBtYXAgdmlldyByZWYgYW5kIHZpZXcgY2hhbmdlIGhhbmRsZXJzLlxuICogXG4gKiBDZW50cmFsaXplcyBtYXAgdmlldyBtYW5hZ2VtZW50IGxvZ2ljIGZvciB0aGUgd2lkZ2V0LlxuICogSGFuZGxlcyBKaW11TWFwVmlldyBjaGFuZ2VzIGFuZCBtYWludGFpbnMgcmVmcyBmb3IgbWFwIHZpZXcgYWNjZXNzLlxuICogXG4gKiBQYXJ0IG9mIENodW5rIDY6IE1hcCBWaWV3IE1hbmFnZW1lbnQgZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgTWFwVmlld01hbmFnZXIge1xuICBwcml2YXRlIG1hcFZpZXdSZWY6IFJlYWN0LlJlZk9iamVjdDxfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsPlxuICBwcml2YXRlIGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyB8IG51bGwgPSBudWxsXG5cbiAgY29uc3RydWN0b3IobWFwVmlld1JlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+KSB7XG4gICAgdGhpcy5tYXBWaWV3UmVmID0gbWFwVmlld1JlZlxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgSmltdU1hcFZpZXcgY2hhbmdlIGZyb20gSmltdU1hcFZpZXdDb21wb25lbnQuXG4gICAqIFVwZGF0ZXMgaW50ZXJuYWwgc3RhdGUgYW5kIGNhbGxzIGNhbGxiYWNrcy5cbiAgICovXG4gIGhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZChcbiAgICBqaW11TWFwVmlldzogSmltdU1hcFZpZXcgfCBudWxsLFxuICAgIHByb3BzOiBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4sXG4gICAgY2FsbGJhY2tzOiBNYXBWaWV3Q2FsbGJhY2tzXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHsgaWQgfSA9IHByb3BzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdNQVAtRVhURU5UJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgaGFzSmltdU1hcFZpZXc6ICEhamltdU1hcFZpZXcsXG4gICAgICBoYXNWaWV3OiAhIShqaW11TWFwVmlldz8udmlldyksXG4gICAgICB2aWV3VHlwZTogamltdU1hcFZpZXc/LnZpZXc/LnR5cGUgfHwgJ25vbmUnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBTdG9yZSBKaW11TWFwVmlldyBpbnRlcm5hbGx5XG4gICAgdGhpcy5qaW11TWFwVmlldyA9IGppbXVNYXBWaWV3XG4gICAgXG4gICAgLy8gVXBkYXRlIG1hcCB2aWV3IHJlZiBpZiB2aWV3IGlzIGF2YWlsYWJsZVxuICAgIGlmIChqaW11TWFwVmlldz8udmlldykge1xuICAgICAgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgPSBqaW11TWFwVmlldy52aWV3XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFwVmlld1JlZi5jdXJyZW50ID0gbnVsbFxuICAgIH1cbiAgICBcbiAgICAvLyBDYWxsIGNhbGxiYWNrIHRvIHVwZGF0ZSB3aWRnZXQgc3RhdGVcbiAgICBpZiAoY2FsbGJhY2tzLm9uTWFwVmlld0NoYW5nZSkge1xuICAgICAgY2FsbGJhY2tzLm9uTWFwVmlld0NoYW5nZShqaW11TWFwVmlldylcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBKaW11TWFwVmlldy5cbiAgICovXG4gIGdldEppbXVNYXBWaWV3KCk6IEppbXVNYXBWaWV3IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuamltdU1hcFZpZXdcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IG1hcCB2aWV3IGZyb20gcmVmLlxuICAgKi9cbiAgZ2V0TWFwVmlldygpOiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnRcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgbWFwIHZpZXcgcmVmZXJlbmNlcy5cbiAgICovXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgdGhpcy5qaW11TWFwVmlldyA9IG51bGxcbiAgfVxufVxuXG4iLCJpbXBvcnQgeyB0eXBlIEFsbFdpZGdldFByb3BzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZywgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuaW50ZXJmYWNlIFVybENvbnN1bXB0aW9uQ2FsbGJhY2tzIHtcbiAgb25Jbml0aWFsVmFsdWVGb3VuZDogKHZhbHVlOiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9IHwgdW5kZWZpbmVkKSA9PiB2b2lkXG4gIG9uTW9kZVJlc2V0TmVlZGVkPzogKCkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIFVSTCBwYXJhbWV0ZXIgY29uc3VtcHRpb24gYW5kIGRlZXAgbGlua2luZy5cbiAqIFxuICogSGFuZGxlcyBib3RoIEhhc2ggZnJhZ21lbnRzICgjKSBhbmQgUXVlcnkgU3RyaW5ncyAoPyksIHdpdGggSGFzaCB0YWtpbmcgcHJpb3JpdHkuXG4gKiBJbXBsZW1lbnRzIGF0b21pYyBjb25zdW1wdGlvbiB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzLlxuICogXG4gKiBQYXJ0IG9mIENodW5rIDE6IFVSTCBQYXJhbWV0ZXIgQ29uc3VtcHRpb24gZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgVXJsQ29uc3VtcHRpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSBsYXN0UHJvY2Vzc2VkSGFzaDogc3RyaW5nID0gJydcbiAgcHJpdmF0ZSBpc1Byb2Nlc3Npbmc6IGJvb2xlYW4gPSBmYWxzZVxuICBwcml2YXRlIGhhc2hDaGFuZ2VIYW5kbGVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbFxuXG4gIC8qKlxuICAgKiBDaGVja3MgVVJMIGZvciBoYXNoIGFuZCBxdWVyeSBzdHJpbmcgcGFyYW1ldGVycyBtYXRjaGluZyBjb25maWd1cmVkIHNob3J0SWRzLlxuICAgKiBIYXNoIHBhcmFtZXRlcnMgdGFrZSBwcmlvcml0eSBvdmVyIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzLlxuICAgKi9cbiAgY2hlY2tVcmxQYXJhbWV0ZXJzKFxuICAgIHByb3BzOiBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4sXG4gICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUsXG4gICAgY2FsbGJhY2tzOiBVcmxDb25zdW1wdGlvbkNhbGxiYWNrc1xuICApOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbmZpZywgaWQgfSA9IHByb3BzXG4gICAgY29uc3QgeyBvbkluaXRpYWxWYWx1ZUZvdW5kLCBvbk1vZGVSZXNldE5lZWRlZCB9ID0gY2FsbGJhY2tzXG5cbiAgICBpZiAoIWNvbmZpZy5xdWVyeUl0ZW1zPy5sZW5ndGgpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFByZXZlbnQgY29uY3VycmVudCBwcm9jZXNzaW5nXG4gICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBzaG9ydElkcyA9IGNvbmZpZy5xdWVyeUl0ZW1zXG4gICAgICAubWFwKGl0ZW0gPT4gaXRlbS5zaG9ydElkKVxuICAgICAgLmZpbHRlcihzaWQgPT4gc2lkICE9IG51bGwgJiYgc2lkLnRyaW0oKSAhPT0gJycpXG5cbiAgICBpZiAoc2hvcnRJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKVxuICAgIFxuICAgIC8vIFNraXAgaGFzaC1vbmx5IGlmIHdlJ3ZlIGFscmVhZHkgcHJvY2Vzc2VkIHRoaXMgZXhhY3QgaGFzaCBmcmFnbWVudFxuICAgIC8vIEJ1dCBhbHdheXMgY2hlY2sgcXVlcnkgc3RyaW5ncyAodGhleSBkb24ndCB0cmlnZ2VyIGhhc2hjaGFuZ2UgZXZlbnRzKVxuICAgIC8vIE9ubHkgc2tpcCBpZiB3ZSBoYXZlIGEgaGFzaCBmcmFnbWVudCBBTkQgd2UndmUgYWxyZWFkeSBwcm9jZXNzZWQgaXRcbiAgICBpZiAoaGFzaCAmJiB0aGlzLmxhc3RQcm9jZXNzZWRIYXNoID09PSBoYXNoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSB0cnVlXG4gICAgLy8gT25seSB1cGRhdGUgbGFzdFByb2Nlc3NlZEhhc2ggaWYgd2UgYWN0dWFsbHkgaGF2ZSBhIGhhc2ggZnJhZ21lbnRcbiAgICAvLyBRdWVyeSBzdHJpbmdzIGFyZSBhbHdheXMgY2hlY2tlZCAobm8gc2tpcCBsb2dpYyBmb3IgdGhlbSlcbiAgICBpZiAoaGFzaCkge1xuICAgICAgdGhpcy5sYXN0UHJvY2Vzc2VkSGFzaCA9IGhhc2hcbiAgICB9XG5cbiAgICBjb25zdCBoYXNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeSlcblxuICAgIGxldCBmb3VuZFNob3J0SWQ6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gICAgbGV0IGZvdW5kVmFsdWU6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gICAgbGV0IGZvdW5kSW46ICdoYXNoJyB8ICdxdWVyeScgfCBudWxsID0gbnVsbFxuXG4gICAgLy8gUFJJT1JJVFkgMTogSGFzaCBmcmFnbWVudHMgKGFsd2F5cyB3aW4pXG4gICAgZm9yIChjb25zdCBzaWQgb2Ygc2hvcnRJZHMpIHtcbiAgICAgIGlmIChoYXNoUGFyYW1zLmhhcyhzaWQpKSB7XG4gICAgICAgIGZvdW5kU2hvcnRJZCA9IHNpZFxuICAgICAgICBmb3VuZFZhbHVlID0gaGFzaFBhcmFtcy5nZXQoc2lkKVxuICAgICAgICBmb3VuZEluID0gJ2hhc2gnXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUFJJT1JJVFkgMjogUXVlcnkgc3RyaW5nIChpZiBubyBoYXNoIG1hdGNoKVxuICAgIGlmICghZm91bmRTaG9ydElkKSB7XG4gICAgICBmb3IgKGNvbnN0IHNpZCBvZiBzaG9ydElkcykge1xuICAgICAgICBpZiAocXVlcnlQYXJhbXMuaGFzKHNpZCkpIHtcbiAgICAgICAgICBmb3VuZFNob3J0SWQgPSBzaWRcbiAgICAgICAgICBmb3VuZFZhbHVlID0gcXVlcnlQYXJhbXMuZ2V0KHNpZClcbiAgICAgICAgICBmb3VuZEluID0gJ3F1ZXJ5J1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZm91bmRTaG9ydElkICYmIGZvdW5kVmFsdWUgIT09IG51bGwpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgZXZlbnQ6ICd1cmwtcGFyYW0tZGV0ZWN0ZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHNob3J0SWQ6IGZvdW5kU2hvcnRJZCxcbiAgICAgICAgdmFsdWU6IGZvdW5kVmFsdWUsXG4gICAgICAgIGZvdW5kSW4sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgd2hlbiBoYXNoIHBhcmFtZXRlciBpcyBkZXRlY3RlZCB0byBhdm9pZCBidWdzIHdpdGggYWNjdW11bGF0aW9uIG1vZGVzXG4gICAgICBpZiAocmVzdWx0c01vZGUgIT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uICYmIG9uTW9kZVJlc2V0TmVlZGVkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICBldmVudDogJ21vZGUtcmVzZXQtbmVlZGVkLW9uLWhhc2gtZGV0ZWN0aW9uJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgY3VycmVudE1vZGU6IHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBvbk1vZGVSZXNldE5lZWRlZCgpXG4gICAgICB9XG4gICAgICBcbiAgICAgIG9uSW5pdGlhbFZhbHVlRm91bmQoeyBzaG9ydElkOiBmb3VuZFNob3J0SWQsIHZhbHVlOiBmb3VuZFZhbHVlIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vIG1hdGNoaW5nIHBhcmFtZXRlcnMgZm91bmQgLSBjbGVhciBzdGF0ZVxuICAgICAgb25Jbml0aWFsVmFsdWVGb3VuZCh1bmRlZmluZWQpXG4gICAgfVxuICAgIFxuICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgaGFzaCBwYXJhbWV0ZXIgZnJvbSB0aGUgVVJMLlxuICAgKiBVc2VkIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2RlcyB0byBjb25zdW1lIHRoZSBkZWVwIGxpbmsuXG4gICAqL1xuICByZW1vdmVIYXNoUGFyYW1ldGVyKHNob3J0SWQ6IHN0cmluZywgd2lkZ2V0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghc2hvcnRJZCkgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgICBcbiAgICBpZiAodXJsUGFyYW1zLmhhcyhzaG9ydElkKSkge1xuICAgICAgdXJsUGFyYW1zLmRlbGV0ZShzaG9ydElkKVxuICAgICAgY29uc3QgbmV3SGFzaCA9IHVybFBhcmFtcy50b1N0cmluZygpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgZXZlbnQ6ICdyZW1vdmVIYXNoUGFyYW1ldGVyJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHNob3J0SWQsXG4gICAgICAgIG5ld0hhc2g6IG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJyhlbXB0eSknLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgVVJMIHdpdGhvdXQgdHJpZ2dlcmluZyBhIHJlbG9hZFxuICAgICAgLy8gQWx3YXlzIHByZXNlcnZlIHBhdGhuYW1lIGFuZCBxdWVyeSBzdHJpbmcsIG9ubHkgdXBkYXRlIGhhc2hcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyAobmV3SGFzaCA/IGAjJHtuZXdIYXNofWAgOiAnJylcbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gUmVzZXQgdHJhY2tpbmcgc28gaXQgY2FuIGJlIHByb2Nlc3NlZCBhZ2FpbiBpZiBuZWVkZWRcbiAgICAgIHRoaXMubGFzdFByb2Nlc3NlZEhhc2ggPSAnJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHRoZSBtYW5hZ2VyIChubyBhdXRvbm9tb3VzIFVSTCBjaGVja2luZykuXG4gICAqIFF1ZXJ5U2ltcGxlIHNob3VsZCBvbmx5IHByb2Nlc3MgaGFzaCBwYXJhbWV0ZXJzIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgdHJpZ2dlcnMgaXRcbiAgICogdmlhIE9QRU5fV0lER0VUX0VWRU5ULiBUaGlzIGVuc3VyZXMgSGVscGVyU2ltcGxlIHJlbWFpbnMgdGhlIG9yY2hlc3RyYXRvci5cbiAgICovXG4gIHNldHVwKFxuICAgIHByb3BzOiBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4sXG4gICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUsXG4gICAgY2FsbGJhY2tzOiBVcmxDb25zdW1wdGlvbkNhbGxiYWNrc1xuICApOiB2b2lkIHtcbiAgICAvLyBEbyBOT1QgYXV0b21hdGljYWxseSBjaGVjayBVUkwgcGFyYW1ldGVyc1xuICAgIC8vIERvIE5PVCBzZXQgdXAgaGFzaGNoYW5nZSBsaXN0ZW5lclxuICAgIC8vIFF1ZXJ5U2ltcGxlIHdpbGwgb25seSBwcm9jZXNzIGhhc2ggd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVucyB0aGUgd2lkZ2V0XG4gICAgLy8gVGhpcyBlbnN1cmVzIEhlbHBlclNpbXBsZSByZW1haW5zIHRoZSBvcmNoZXN0cmF0b3JcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgaGFzaCBjaGFuZ2UgbGlzdGVuZXIuXG4gICAqL1xuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc2hDaGFuZ2VIYW5kbGVyKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuaGFzaENoYW5nZUhhbmRsZXIpXG4gICAgICB0aGlzLmhhc2hDaGFuZ2VIYW5kbGVyID0gbnVsbFxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgdHlwZSBBbGxXaWRnZXRQcm9wcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgSU1Db25maWcgfSBmcm9tICcuLi8uLi9jb25maWcnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIFF1ZXJ5U2ltcGxlIHRvIG5vdGlmeSBIZWxwZXJTaW1wbGUgb2Ygd2lkZ2V0IG9wZW4vY2xvc2Ugc3RhdGUuXG4gKi9cbmNvbnN0IFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCA9ICdxdWVyeXNpbXBsZS13aWRnZXQtc3RhdGUtY2hhbmdlZCdcblxuaW50ZXJmYWNlIFZpc2liaWxpdHlDYWxsYmFja3Mge1xuICBvblZpc2liaWxpdHlDaGFuZ2U/OiAoaXNWaXNpYmxlOiBib29sZWFuKSA9PiB2b2lkXG59XG5cbi8qKlxuICogVXRpbGl0eSB0byBtYW5hZ2Ugd2lkZ2V0IHBhbmVsIHZpc2liaWxpdHkgZGV0ZWN0aW9uIGFuZCBIZWxwZXJTaW1wbGUgbm90aWZpY2F0aW9uLlxuICogXG4gKiBVc2VzIEludGVyc2VjdGlvbk9ic2VydmVyIGZvciBlZmZpY2llbnQgRE9NLWxldmVsIHZpc2liaWxpdHkgdHJhY2tpbmcuXG4gKiBGYWxscyBiYWNrIHRvIHBlcmlvZGljIGNoZWNraW5nIGlmIEludGVyc2VjdGlvbk9ic2VydmVyIGlzIG5vdCBhdmFpbGFibGUuXG4gKiBcbiAqIFBhcnQgb2YgQ2h1bmsgMjogV2lkZ2V0IFZpc2liaWxpdHkgRW5naW5lIGV4dHJhY3Rpb24uXG4gKiBcbiAqIE5vdGU6IFRoaXMgaXMgYSB1dGlsaXR5IGNsYXNzIChub3QgYSBob29rKSB0byB3b3JrIHdpdGggY2xhc3MgY29tcG9uZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFdpZGdldFZpc2liaWxpdHlNYW5hZ2VyIHtcbiAgcHJpdmF0ZSB2aXNpYmlsaXR5T2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSB2aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBpc1BhbmVsVmlzaWJsZTogYm9vbGVhbiA9IGZhbHNlXG4gIHByaXZhdGUgd2lkZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbFxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIHdpZGdldCBlbGVtZW50IGlzIGN1cnJlbnRseSB2aXNpYmxlLlxuICAgKiBGYWxsYmFjayBtZXRob2Qgd2hlbiBJbnRlcnNlY3Rpb25PYnNlcnZlciBpcyBub3QgYXZhaWxhYmxlLlxuICAgKi9cbiAgcHJpdmF0ZSBjaGVja1Zpc2liaWxpdHkoKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLndpZGdldEVsZW1lbnQpIHJldHVybiBmYWxzZVxuICAgIFxuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndpZGdldEVsZW1lbnRcbiAgICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpXG4gICAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBcbiAgICBjb25zdCBpc1Zpc2libGUgPSAoXG4gICAgICBzdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScgJiZcbiAgICAgIHN0eWxlLnZpc2liaWxpdHkgIT09ICdoaWRkZW4nICYmXG4gICAgICBzdHlsZS5vcGFjaXR5ICE9PSAnMCcgJiZcbiAgICAgIHJlY3Qud2lkdGggPiAwICYmXG4gICAgICByZWN0LmhlaWdodCA+IDAgJiZcbiAgICAgIHJlY3QudG9wIDwgd2luZG93LmlubmVySGVpZ2h0ICYmXG4gICAgICByZWN0LmJvdHRvbSA+IDAgJiZcbiAgICAgIHJlY3QubGVmdCA8IHdpbmRvdy5pbm5lcldpZHRoICYmXG4gICAgICByZWN0LnJpZ2h0ID4gMFxuICAgIClcbiAgICBcbiAgICByZXR1cm4gaXNWaXNpYmxlXG4gIH1cblxuICAvKipcbiAgICogTm90aWZpZXMgSGVscGVyU2ltcGxlIG9mIHBhbmVsIHZpc2liaWxpdHkgc3RhdGUgY2hhbmdlcy5cbiAgICovXG4gIHByaXZhdGUgbm90aWZ5SGVscGVyU2ltcGxlT2ZQYW5lbFN0YXRlKGlzVmlzaWJsZTogYm9vbGVhbiwgd2lkZ2V0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBpc09wZW46IGlzVmlzaWJsZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiBpc1Zpc2libGUgPyAncGFuZWwtb3BlbmVkJyA6ICdwYW5lbC1jbG9zZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBpc1Zpc2libGUsXG4gICAgICBtZXRob2Q6ICdub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIExvZ3MgdmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VzIGFuZCBjYWxscyBjYWxsYmFja3MuXG4gICAqL1xuICBwcml2YXRlIGxvZ1Zpc2liaWxpdHlDaGFuZ2UoXG4gICAgaXNWaXNpYmxlOiBib29sZWFuLFxuICAgIG1ldGhvZDogc3RyaW5nLFxuICAgIHdpZGdldElkOiBzdHJpbmcsXG4gICAgY2FsbGJhY2tzOiBWaXNpYmlsaXR5Q2FsbGJhY2tzXG4gICk6IHZvaWQge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6IGlzVmlzaWJsZSA/ICdwYW5lbC1vcGVuZWQnIDogJ3BhbmVsLWNsb3NlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGlzVmlzaWJsZSxcbiAgICAgIG1ldGhvZCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBOb3RpZnkgSGVscGVyU2ltcGxlXG4gICAgdGhpcy5ub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUoaXNWaXNpYmxlLCB3aWRnZXRJZClcbiAgICBcbiAgICAvLyBDYWxsIG9wdGlvbmFsIGNhbGxiYWNrXG4gICAgaWYgKGNhbGxiYWNrcy5vblZpc2liaWxpdHlDaGFuZ2UpIHtcbiAgICAgIGNhbGxiYWNrcy5vblZpc2liaWxpdHlDaGFuZ2UoaXNWaXNpYmxlKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHZpc2liaWxpdHkgZGV0ZWN0aW9uLlxuICAgKi9cbiAgc2V0dXAoXG4gICAgd2lkZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPixcbiAgICBjYWxsYmFja3M6IFZpc2liaWxpdHlDYWxsYmFja3MsXG4gICAgb25WaXNpYmlsaXR5U3RhdGVDaGFuZ2U6IChpc1Zpc2libGU6IGJvb2xlYW4pID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgeyBpZCB9ID0gcHJvcHNcbiAgICB0aGlzLndpZGdldEVsZW1lbnQgPSB3aWRnZXRFbGVtZW50XG5cbiAgICAvLyBXYWl0IGZvciBuZXh0IHRpY2sgdG8gZW5zdXJlIGVsZW1lbnQgaXMgcmVhZHlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghdGhpcy53aWRnZXRFbGVtZW50KSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAtZmFpbGVkJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgcmVhc29uOiAnd2lkZ2V0LWVsZW1lbnQtbm90LWF2YWlsYWJsZSdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndpZGdldEVsZW1lbnRcblxuICAgICAgLy8gTWV0aG9kIDE6IEludGVyc2VjdGlvbk9ic2VydmVyIChtb3N0IGVmZmljaWVudClcbiAgICAgIGlmICgnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdykge1xuICAgICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICAoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBlbnRyaWVzWzBdXG4gICAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSBlbnRyeS5pc0ludGVyc2VjdGluZyAmJiBlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+IDBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgc3RhdGUgY2hhbmdlZFxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQYW5lbFZpc2libGUgIT09IGlzVmlzaWJsZSkge1xuICAgICAgICAgICAgICB0aGlzLmlzUGFuZWxWaXNpYmxlID0gaXNWaXNpYmxlXG4gICAgICAgICAgICAgIHRoaXMubG9nVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGUsICdJbnRlcnNlY3Rpb25PYnNlcnZlcicsIGlkLCBjYWxsYmFja3MpXG4gICAgICAgICAgICAgIG9uVmlzaWJpbGl0eVN0YXRlQ2hhbmdlKGlzVmlzaWJsZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRocmVzaG9sZDogWzAsIDAuMSwgMS4wXSwgLy8gVHJpZ2dlciBhdCAwJSwgMTAlLCBhbmQgMTAwJSB2aXNpYmlsaXR5XG4gICAgICAgICAgICByb290TWFyZ2luOiAnMHB4J1xuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgICAgICBldmVudDogJ3Zpc2liaWxpdHktZGV0ZWN0aW9uLXNldHVwJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgbWV0aG9kOiAnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNZXRob2QgMjogRmFsbGJhY2sgdG8gcGVyaW9kaWMgY2hlY2tpbmdcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gdGhpcy5jaGVja1Zpc2liaWxpdHkoKVxuICAgICAgICAgIGlmICh0aGlzLmlzUGFuZWxWaXNpYmxlICE9PSBpc1Zpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuaXNQYW5lbFZpc2libGUgPSBpc1Zpc2libGVcbiAgICAgICAgICAgIHRoaXMubG9nVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGUsICdwZXJpb2RpYy1jaGVjaycsIGlkLCBjYWxsYmFja3MpXG4gICAgICAgICAgICBvblZpc2liaWxpdHlTdGF0ZUNoYW5nZShpc1Zpc2libGUpXG4gICAgICAgICAgfVxuICAgICAgICB9LCAyNTApIC8vIENoZWNrIGV2ZXJ5IDI1MG1zXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgICAgICBldmVudDogJ3Zpc2liaWxpdHktZGV0ZWN0aW9uLXNldHVwJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgbWV0aG9kOiAncGVyaW9kaWMtY2hlY2snXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSwgMTAwKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCB2aXNpYmlsaXR5IGRldGVjdGlvbiBvYnNlcnZlcnMvaW50ZXJ2YWxzLlxuICAgKi9cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAvLyBDbGVhbiB1cCBJbnRlcnNlY3Rpb25PYnNlcnZlclxuICAgIGlmICh0aGlzLnZpc2liaWxpdHlPYnNlcnZlcikge1xuICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlciA9IG51bGxcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgaW50ZXJ2YWxcbiAgICBpZiAodGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbCAhPT0gbnVsbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsKVxuICAgICAgdGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbCA9IG51bGxcbiAgICB9XG4gICAgXG4gICAgdGhpcy53aWRnZXRFbGVtZW50ID0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY3VycmVudCB2aXNpYmlsaXR5IHN0YXRlLlxuICAgKi9cbiAgZ2V0SXNQYW5lbFZpc2libGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNQYW5lbFZpc2libGVcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZmllcyBIZWxwZXJTaW1wbGUgb24gbW91bnQuXG4gICAqL1xuICBub3RpZnlNb3VudCh3aWRnZXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3Qgb3BlbkV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBpc09wZW46IHRydWVcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQob3BlbkV2ZW50KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6ICd3aWRnZXQtbW91bnRlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZmllcyBIZWxwZXJTaW1wbGUgb24gdW5tb3VudC5cbiAgICovXG4gIG5vdGlmeVVubW91bnQod2lkZ2V0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGNsb3NlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGlzT3BlbjogZmFsc2VcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoY2xvc2VFdmVudClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiAnd2lkZ2V0LXVubW91bnRlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgfVxufVxuIiwiLyoqXG4gKiBIb29rIGZvciB6b29taW5nIHRvIGZlYXR1cmUgcmVjb3JkcyB3aXRoIHBhZGRpbmcuXG4gKiBcbiAqIFdyYXBzIHRoZSBzaGFyZWQgem9vbVRvUmVjb3JkcyB1dGlsaXR5IGZ1bmN0aW9uIGluIGEgUmVhY3QgaG9vay5cbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgdHlwZSB7IEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgem9vbVRvUmVjb3JkcywgdHlwZSBab29tVG9SZWNvcmRzT3B0aW9ucyB9IGZyb20gJy4uL3pvb20tdXRpbHMnXG5cbi8qKlxuICogQ3VzdG9tIGhvb2sgdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdG8gem9vbSB0byByZWNvcmRzIHdpdGggcGFkZGluZy5cbiAqIFxuICogQHBhcmFtIG1hcFZpZXcgLSBUaGUgbWFwIHZpZXcgdG8gem9vbVxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHRha2VzIHJlY29yZHMgYW5kIG9wdGlvbmFsIHBhZGRpbmcsIGFuZCB6b29tcyB0byB0aGVtXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2Vab29tVG9SZWNvcmRzKFxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSwgb3B0aW9ucz86IFpvb21Ub1JlY29yZHNPcHRpb25zKSA9PiBQcm9taXNlPHZvaWQ+IHtcbiAgXG4gIHJldHVybiBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoXG4gICAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICBvcHRpb25zPzogWm9vbVRvUmVjb3Jkc09wdGlvbnNcbiAgKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgaWYgKCFtYXBWaWV3KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgYXdhaXQgem9vbVRvUmVjb3JkcyhtYXBWaWV3LCByZWNvcmRzLCBvcHRpb25zKVxuICB9LCBbbWFwVmlld10pXG59XG5cbi8vIFJlLWV4cG9ydCB0eXBlcyBmb3IgY29udmVuaWVuY2VcbmV4cG9ydCB0eXBlIHsgWm9vbVRvUmVjb3Jkc09wdGlvbnMgfSBmcm9tICcuLi96b29tLXV0aWxzJ1xuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIHR5cGUgSW1tdXRhYmxlQXJyYXksIG1vZHVsZUxvYWRlciwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgdHlwZSAqIGFzIGppbXVNYXAgZnJvbSAnamltdS11aS9hZHZhbmNlZC9tYXAnXG5pbXBvcnQgeyBDcmVhdGVUb29sVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IEVudGl0eVN0YXR1c1R5cGUsIFN0YXR1c0luZGljYXRvciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5leHBvcnQgaW50ZXJmYWNlIEludGVyYWN0aXZlRHJhd1Byb3BzIHtcbiAgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgdG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cbiAgb25EcmF3RW5kOiAoZ3JhcGhpYzogX19lc3JpLkdyYXBoaWMsIGdldExheWVyRnVuPywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4gdm9pZFxufVxuXG5jb25zdCBza2V0Y2hUb29sSW5mb01hcCA9IHtcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvaW50XTogeyBkcmF3VG9vbE5hbWU6ICdwb2ludCcsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcG9pbnQnLCB0b29sSW5kZXg6IDAgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvbHlsaW5lXTogeyBkcmF3VG9vbE5hbWU6ICdwb2x5bGluZScsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcG9seWxpbmUnLCB0b29sSW5kZXg6IDQgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvbHlnb25dOiB7IGRyYXdUb29sTmFtZTogJ3BvbHlnb24nLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvbHlnb24nLCB0b29sSW5kZXg6IDIgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlJlY3RhbmdsZV06IHtcbiAgICBkcmF3VG9vbE5hbWU6ICdyZWN0YW5nbGUnLFxuICAgIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tY2hlY2tib3gtdW5jaGVja2VkJyxcbiAgICB0b29sSW5kZXg6IDFcbiAgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLkNpcmNsZV06IHsgZHJhd1Rvb2xOYW1lOiAnY2lyY2xlJywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1yYWRpby11bmNoZWNrZWQnLCB0b29sSW5kZXg6IDMgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gSW50ZXJhY3RpdmVEcmF3IChwcm9wczogSW50ZXJhY3RpdmVEcmF3UHJvcHMpIHtcbiAgY29uc3QgeyB0b29sVHlwZXMgPSBbXSwgamltdU1hcFZpZXcsIG9uRHJhd0VuZCwgd2lkZ2V0SWQgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IFttYXBNb2R1bGUsIHNldE1hcE1vZHVsZV0gPSBSZWFjdC51c2VTdGF0ZTx0eXBlb2YgamltdU1hcD4obnVsbClcbiAgY29uc3QgZ2V0TGF5ZXJGdW5SZWYgPSBSZWFjdC51c2VSZWY8KCkgPT4gX19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBfX2VzcmkuTWFwTm90ZXNMYXllcj4obnVsbClcbiAgY29uc3QgZ3JhcGhpY1JlZiA9IFJlYWN0LnVzZVJlZihudWxsKVxuICBjb25zdCBbY2xlYXJBZnRlckFwcGx5LCBzZXRDbGVhckFmdGVyQXBwbHldID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG5cbiAgY29uc3QgdmlzaWJsZUVsZW1lbnRzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZVRvb2xzOiBPYmplY3QuZW50cmllcyhza2V0Y2hUb29sSW5mb01hcCkucmVkdWNlKFxuICAgICAgICAocmVzdWx0LCBba2V5LCB2YWx1ZV0pID0+ICh7IC4uLnJlc3VsdCwgW3ZhbHVlLmRyYXdUb29sTmFtZV06IHRvb2xUeXBlcy5pbmNsdWRlcyhrZXkgYXMgQ3JlYXRlVG9vbFR5cGUpIH0pLFxuICAgICAgICB7IHBvaW50OiBmYWxzZSB9XG4gICAgICApIGFzIGFueSxcbiAgICAgIHNlbGVjdGlvblRvb2xzOiB7XG4gICAgICAgICdsYXNzby1zZWxlY3Rpb24nOiBmYWxzZSxcbiAgICAgICAgJ3JlY3RhbmdsZS1zZWxlY3Rpb24nOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHNldHRpbmdzTWVudTogZmFsc2UsXG4gICAgICB1bmRvUmVkb01lbnU6IGZhbHNlLFxuICAgICAgZGVsZXRlQnV0dG9uOiB0cnVlXG4gICAgfVxuICB9LCBbdG9vbFR5cGVzXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBtb2R1bGVMb2FkZXIubG9hZE1vZHVsZTx0eXBlb2YgamltdU1hcD4oJ2ppbXUtdWkvYWR2YW5jZWQvbWFwJykudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBzZXRNYXBNb2R1bGUocmVzdWx0KVxuICAgIH0pXG4gIH0pXG5cbiAgY29uc3QgaGFuZGxlRHJhd1Rvb2xDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVEcmF3VG9vbHNSZWY6IGppbXVNYXAuSmltdURyYXdDcmVhdGVkRGVzY3JpcHRvcikgPT4ge1xuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgPSBqaW11RHJhd1Rvb2xzUmVmLmdldEdyYXBoaWNzTGF5ZXJcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlRHJhd1N0YXJ0ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgKChnZXRMYXllckZ1blJlZi5jdXJyZW50KSgpIGFzIF9fZXNyaS5HcmFwaGljc0xheWVyKS5yZW1vdmVBbGwoKVxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVEcmF3RW5kID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKGdyYXBoaWMpID0+IHtcbiAgICAgIGdyYXBoaWNSZWYuY3VycmVudCA9IGdyYXBoaWNcbiAgICAgIG9uRHJhd0VuZChncmFwaGljLCBnZXRMYXllckZ1blJlZi5jdXJyZW50LCBjbGVhckFmdGVyQXBwbHkpXG4gICAgfSxcbiAgICBbb25EcmF3RW5kLCBjbGVhckFmdGVyQXBwbHldXG4gIClcblxuICBjb25zdCBoYW5kbGVDbGVhcmVkID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGdyYXBoaWNSZWYuY3VycmVudCA9IG51bGxcbiAgICBvbkRyYXdFbmQobnVsbClcbiAgfSwgW29uRHJhd0VuZF0pXG5cbiAgY29uc3QgaGFuZGxlQ2xlYXJTZXR0aW5nQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBpZiAoZ3JhcGhpY1JlZi5jdXJyZW50KSB7XG4gICAgICBvbkRyYXdFbmQoZ3JhcGhpY1JlZi5jdXJyZW50LCBnZXRMYXllckZ1blJlZi5jdXJyZW50LCBlLnRhcmdldC5jaGVja2VkKVxuICAgIH1cbiAgICBzZXRDbGVhckFmdGVyQXBwbHkoZS50YXJnZXQuY2hlY2tlZClcbiAgfSwgW29uRHJhd0VuZF0pXG5cbiAgY29uc3QgSmltdURyYXcgPSBtYXBNb2R1bGU/LkppbXVEcmF3XG4gIGlmICghSmltdURyYXcpIHtcbiAgICByZXR1cm4gPFN0YXR1c0luZGljYXRvciBzdGF0dXNUeXBlPXtFbnRpdHlTdGF0dXNUeXBlLkxvYWRpbmd9IC8+XG4gIH1cbiAgY29uc3QgaXNBdmFpbGFibGUgPSBPYmplY3Qua2V5cyh2aXNpYmxlRWxlbWVudHMuY3JlYXRlVG9vbHMpLnNvbWUodG9vbE5hbWUgPT4gdmlzaWJsZUVsZW1lbnRzLmNyZWF0ZVRvb2xzW3Rvb2xOYW1lXSlcbiAgaWYgKCFpc0F2YWlsYWJsZSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPEppbXVEcmF3XG4gICAgICAgIGppbXVNYXBWaWV3PXtqaW11TWFwVmlld31cbiAgICAgICAgb3BlcmF0b3JXaWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgIGRpc2FibGVTeW1ib2xTZWxlY3RvclxuICAgICAgICBkcmF3aW5nT3B0aW9ucz17e1xuICAgICAgICAgIGNyZWF0aW9uTW9kZTogbWFwTW9kdWxlLkppbXVEcmF3Q3JlYXRpb25Nb2RlLlNpbmdsZSxcbiAgICAgICAgICB1cGRhdGVPbkdyYXBoaWNDbGljazogZmFsc2UsXG4gICAgICAgICAgdmlzaWJsZUVsZW1lbnRzOiB2aXNpYmxlRWxlbWVudHNcbiAgICAgICAgfX1cbiAgICAgICAgdWlPcHRpb25zPXt7XG4gICAgICAgICAgaXNIaWRlQm9yZGVyOiB0cnVlXG4gICAgICAgIH19XG4gICAgICAgIG9uSmltdURyYXdDcmVhdGVkPXtoYW5kbGVEcmF3VG9vbENyZWF0ZWR9XG4gICAgICAgIG9uRHJhd2luZ1N0YXJ0ZWQ9e2hhbmRsZURyYXdTdGFydH1cbiAgICAgICAgb25EcmF3aW5nRmluaXNoZWQ9e2hhbmRsZURyYXdFbmR9XG4gICAgICAgIG9uRHJhd2luZ0NsZWFyZWQ9e2hhbmRsZUNsZWFyZWR9XG4gICAgICAvPlxuICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgIDxDaGVja2JveCBjaGVja2VkPXtjbGVhckFmdGVyQXBwbHl9IG9uQ2hhbmdlPXtoYW5kbGVDbGVhclNldHRpbmdDaGFuZ2V9IGNsYXNzTmFtZT0nbXItMicgLz5cbiAgICAgICAge2dldEkxOG5NZXNzYWdlKCdjbGVhckRyYXdpbmcnKX1cbiAgICAgIDwvbGFiZWw+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7IFJlYWN0LCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExvYWRpbmcsIExvYWRpbmdUeXBlIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHN0eWxlZCB9IGZyb20gJ2ppbXUtdGhlbWUnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcblxuY29uc3QgUm9vdCA9IHN0eWxlZC5kaXZgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBib3R0b206IDA7XG4gIHJpZ2h0OiAwO1xuICBsZWZ0OiAwO1xuICB6LWluZGV4OiAyO1xuXG4gIC5sb2FkaW5nLWNvbnRlbnQge1xuICAgIC5sb2FkaW5nLXRpcCB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuICB9XG5gXG5leHBvcnQgZnVuY3Rpb24gTG9hZGluZ1Jlc3VsdCAoKSB7XG4gIGNvbnN0IHRyYW5zbGF0ZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICByZXR1cm4gKFxuICAgIDxSb290PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2xvYWRpbmctY29udGVudCB3LTEwMCBweC00IGQtZmxleCBmbGV4LWNvbHVtbiBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgIDxkaXYgcm9sZT0nYWxlcnQnIGFyaWEtbGl2ZT0nYXNzZXJ0aXZlJyBjbGFzc05hbWU9J3RleHQtcGFwZXInPlxuICAgICAgICAgIHt0cmFuc2xhdGUoJ3JldHJpZXZpbmcnKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxMb2FkaW5nIGNsYXNzTmFtZT0nbG9hZGluZy10aXAgbXQtOCcgdHlwZT17TG9hZGluZ1R5cGUuRG9udXR9Lz5cbiAgICAgIDwvZGl2PlxuICAgIDwvUm9vdD5cbiAgKVxufVxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGpzeCxcbiAgY3NzLFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgY2xhc3NOYW1lc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgVHJhc2hPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3RyYXNoJ1xuaW1wb3J0IEZlYXR1cmVJbmZvIGZyb20gJy4vY29tcG9uZW50cy9mZWF0dXJlLWluZm8nXG5pbXBvcnQgeyBMaXN0RGlyZWN0aW9uIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlc3VsdEl0ZW1Qcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcG9wdXBUZW1wbGF0ZTogYW55XG4gIGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBhbnlcbiAgZGF0YTogRmVhdHVyZURhdGFSZWNvcmRcbiAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZVxuICBleHBhbmRCeURlZmF1bHQ6IGJvb2xlYW5cbiAgb25DbGljazogKHJlY29yZDogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbiAgb25SZW1vdmU6IChyZWNvcmQ6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG59XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICBvdmVyZmxvdzogYXV0bztcbiAgZmxleC1mbG93OiByb3c7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZmxleC1zaHJpbms6IDA7XG4gIG1pbi1oZWlnaHQ6IDJyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgJi5zZWxlY3RlZCB7XG4gICAgb3V0bGluZTogMnB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pO1xuICB9XG4gIFxuICAucmVtb3ZlLWJ1dHRvbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gICAgei1pbmRleDogMTA7XG4gICAgb3BhY2l0eTogMC43O1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycztcbiAgICBcbiAgICAmOmhvdmVyIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICAgIFxuICAgIC8vIExhcmdlciB0b3VjaCB0YXJnZXQgZm9yIG1vYmlsZS9hY2Nlc3NpYmlsaXR5XG4gICAgbWluLXdpZHRoOiAzMnB4O1xuICAgIG1pbi1oZWlnaHQ6IDMycHg7XG4gIH1cbmBcblxuLyoqXG4gKiBRdWVyeVJlc3VsdEl0ZW0gY29tcG9uZW50IC0gZGlzcGxheXMgYSBzaW5nbGUgcXVlcnkgcmVzdWx0IHJlY29yZFxuICogRmVhdHVyZXM6XG4gKiAtIENsaWNraW5nIHRoZSBpdGVtIHpvb21zIHRvIHRoZSBmZWF0dXJlIG9uIHRoZSBtYXBcbiAqIC0gUmVtb3ZlIGJ1dHRvbiAodHJhc2ggaWNvbikgaW4gdXBwZXItcmlnaHQgY29ybmVyIHRvIHJlbW92ZSByZWNvcmQgZnJvbSByZXN1bHRzXG4gKiAtIFJlY29yZHMgYXJlIGV4cGFuZGVkIGJ5IGRlZmF1bHQgdG8gc2hvdyBmdWxsIGZlYXR1cmUgaW5mb3JtYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IFF1ZXJ5UmVzdWx0SXRlbSA9IChwcm9wczogUmVzdWx0SXRlbVByb3BzKSA9PiB7XG4gIGNvbnN0IHsgd2lkZ2V0SWQsIGRhdGEsIGRhdGFTb3VyY2UsIHBvcHVwVGVtcGxhdGUsIGRlZmF1bHRQb3B1cFRlbXBsYXRlLCBvbkNsaWNrLCBvblJlbW92ZSwgZXhwYW5kQnlEZWZhdWx0ID0gZmFsc2UgfSA9IHByb3BzXG4gIFxuICBjb25zdCByZWNvcmRJZCA9IGRhdGEuZ2V0SWQoKVxuICBcbiAgLy8gTG9nIHdoZW4gUXVlcnlSZXN1bHRJdGVtIHJlbmRlcnNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgIGV2ZW50OiAnUXVlcnlSZXN1bHRJdGVtLXJlbmRlcicsXG4gICAgICByZWNvcmRJZCxcbiAgICAgIGV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtyZWNvcmRJZCwgZXhwYW5kQnlEZWZhdWx0XSlcbiAgXG4gIC8vIENoZWNrIGlmIHRoaXMgcmVjb3JkIGlzIGN1cnJlbnRseSBzZWxlY3RlZFxuICBjb25zdCBzZWxlY3RlZCA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PlxuICAgIHN0YXRlLmRhdGFTb3VyY2VzSW5mbz8uW2RhdGFTb3VyY2UuaWRdPy5zZWxlY3RlZElkcz8uaW5jbHVkZXMoZGF0YS5nZXRJZCgpKVxuICApXG4gIFxuICAvLyBEZXRlcm1pbmUgaWYgbGlzdCBpcyBkaXNwbGF5ZWQgdmVydGljYWxseSAoYWZmZWN0cyBGZWF0dXJlSW5mbyBleHBhbmRhYmlsaXR5KVxuICBjb25zdCBpc1ZlcnRpY2FsQWxpZ24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0TGlzdERpcmVjdGlvbiAhPT0gTGlzdERpcmVjdGlvbi5Ib3Jpem9udGFsXG4gIH0pXG5cbiAgLy8gSGFuZGxlIGNsaWNraW5nIG9uIHRoZSByZXN1bHQgaXRlbSAtIHpvb21zIHRvIGZlYXR1cmUgb24gbWFwXG4gIGNvbnN0IGhhbmRsZUNsaWNrUmVzdWx0SXRlbSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgLy8gRG9uJ3QgdHJpZ2dlciB6b29tIGlmIGNsaWNraW5nIHRoZSByZW1vdmUgYnV0dG9uXG4gICAgaWYgKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnLnJlbW92ZS1idXR0b24nKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIG9uQ2xpY2soZGF0YSlcbiAgfSwgW29uQ2xpY2ssIGRhdGFdKVxuXG4gIC8vIEhhbmRsZSBjbGlja2luZyB0aGUgcmVtb3ZlIGJ1dHRvbiAtIHJlbW92ZXMgcmVjb3JkIGZyb20gcmVzdWx0cyBhbmQgc2VsZWN0aW9uXG4gIGNvbnN0IGhhbmRsZVJlbW92ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKSAvLyBQcmV2ZW50IHRyaWdnZXJpbmcgdGhlIGl0ZW0gY2xpY2sgaGFuZGxlclxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIG9uUmVtb3ZlKGRhdGEpXG4gIH0sIFtvblJlbW92ZSwgZGF0YV0pXG5cbiAgY29uc3Qgb25LZXlVcCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VudGVyJyB8fCBldnQua2V5ID09PSAnICcpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIGhhbmRsZUNsaWNrUmVzdWx0SXRlbShldnQgYXMgYW55KVxuICAgIH1cbiAgfSwgW2hhbmRsZUNsaWNrUmVzdWx0SXRlbV0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXJlc3VsdC1pdGVtJywgeyBzZWxlY3RlZCB9KX1cbiAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsaWNrUmVzdWx0SXRlbX1cbiAgICAgIG9uS2V5VXA9e29uS2V5VXB9XG4gICAgICBjc3M9e3N0eWxlfVxuICAgICAgcm9sZT0nb3B0aW9uJ1xuICAgICAgYXJpYS1zZWxlY3RlZD17c2VsZWN0ZWR9XG4gICAgICB0YWJJbmRleD17MH1cbiAgICA+XG4gICAgICA8RmVhdHVyZUluZm9cbiAgICAgICAgZ3JhcGhpYz17ZGF0YS5mZWF0dXJlIGFzIF9fZXNyaS5HcmFwaGljfVxuICAgICAgICBwb3B1cFRlbXBsYXRlPXtwb3B1cFRlbXBsYXRlfVxuICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZT17ZGVmYXVsdFBvcHVwVGVtcGxhdGV9XG4gICAgICAgIHRvZ2dsYWJsZT17aXNWZXJ0aWNhbEFsaWdufVxuICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEJ5RGVmYXVsdH1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YVNvdXJjZX1cbiAgICAgIC8+XG4gICAgICA8QnV0dG9uXG4gICAgICAgIGNsYXNzTmFtZT1cInJlbW92ZS1idXR0b25cIlxuICAgICAgICBpY29uXG4gICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgIHZhcmlhbnQ9XCJ0ZXh0XCJcbiAgICAgICAgY29sb3I9XCJpbmhlcml0XCJcbiAgICAgICAgb25DbGljaz17aGFuZGxlUmVtb3ZlfVxuICAgICAgICBhcmlhLWxhYmVsPVwiUmVtb3ZlIHJlY29yZFwiXG4gICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDZweDtcbiAgICAgICAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgYH1cbiAgICAgID5cbiAgICAgICAgPFRyYXNoT3V0bGluZWQgc2l6ZT17MTh9IC8+XG4gICAgICA8L0J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICBEYXRhU291cmNlQ29tcG9uZW50LFxuICBEYXRhU291cmNlTWFuYWdlcixcbiAgSW1tdXRhYmxlLFxuICBob29rcyxcbiAgTWVzc2FnZU1hbmFnZXIsXG4gIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCxcbiAgdHlwZSBEYXRhUmVjb3JkU2V0LFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlLFxuICBEYXRhQWN0aW9uTWFuYWdlcixcbiAgRGF0YUxldmVsLFxuICB1c2VJbnRsXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgSWNvbiwgVG9vbHRpcCwgRGF0YUFjdGlvbkxpc3QsIERhdGFBY3Rpb25MaXN0U3R5bGUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAgfSBmcm9tICcuL3dpZGdldC1jb25maWcnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIEZpZWxkc1R5cGUsIFBhZ2luZ1R5cGUsIExpc3REaXJlY3Rpb24sIFJlc3VsdFNlbGVjdE1vZGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IHVzZVpvb21Ub1JlY29yZHMgfSBmcm9tICcuL2hvb2tzL3VzZS16b29tLXRvLXJlY29yZHMnXG4vLyBGT1JDRUQ6IEFsd2F5cyBTaW1wbGVMaXN0IC0gTGF6eUxpc3QgYW5kIFBhZ2luZ0xpc3QgcmVtb3ZlZFxuaW1wb3J0IHsgU2ltcGxlTGlzdCB9IGZyb20gJy4vc2ltcGxlLWxpc3QnXG5pbXBvcnQgeyBjb21iaW5lRmllbGRzIH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcbmltcG9ydCB7IEFycm93TGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0J1xuaW1wb3J0IHsgRXhwYW5kQWxsT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwnXG5pbXBvcnQgeyBDb2xsYXBzZUFsbE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwnXG5pbXBvcnQgeyBnZXRFeHRyYUFjdGlvbnMgfSBmcm9tICcuLi9kYXRhLWFjdGlvbnMnXG5pbXBvcnQgeyBcbiAgc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMsIFxuICBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMsIFxuICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCxcbiAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2UsXG4gIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQgXG59IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZCwgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zIH0gZnJvbSAnLi9yZXN1bHRzLW1hbmFnZW1lbnQtdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5pbXBvcnQgeyBFcnJvck1lc3NhZ2UgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmNvbnN0IHsgaWNvbk1hcCB9ID0gZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAoKVxuXG4vKipcbiAqIEN1c3RvbSBldmVudCBuYW1lIGZvciByZXF1ZXN0aW5nIHJlc3RvcmF0aW9uIHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzLlxuICovXG5jb25zdCBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXJlc3RvcmUtb24taWRlbnRpZnktY2xvc2UnXG5cbi8qKlxuICogRGV0ZWN0cyBpZiBhbiBpZGVudGlmeSBwb3B1cCBpcyBjdXJyZW50bHkgdmlzaWJsZSBpbiB0aGUgRE9NLlxuICogVXNlcyB2ZXJpZmllZCBzZWxlY3RvcnMgYmFzZWQgb24gRXhwZXJpZW5jZSBCdWlsZGVyJ3MgaWRlbnRpZnkgcG9wdXAgc3RydWN0dXJlLlxuICogXG4gKiBAcmV0dXJucyB0cnVlIGlmIGlkZW50aWZ5IHBvcHVwIGlzIGRldGVjdGVkIGFuZCB2aXNpYmxlLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZnVuY3Rpb24gaXNJZGVudGlmeVBvcHVwT3BlbigpOiBib29sZWFuIHtcbiAgLy8gUHJpbWFyeSBzZWxlY3RvcjogLmVzcmktcG9wdXAgd2l0aCByb2xlPVwiZGlhbG9nXCJcbiAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXNyaS1wb3B1cFtyb2xlPVwiZGlhbG9nXCJdJylcbiAgXG4gIGlmICghcG9wdXApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgLy8gVmVyaWZ5IGl0J3MgdmlzaWJsZSAobm90IGhpZGRlbilcbiAgY29uc3QgYXJpYUhpZGRlbiA9IHBvcHVwLmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKVxuICBpZiAoYXJpYUhpZGRlbiA9PT0gJ3RydWUnKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIEFkZGl0aW9uYWwgY2hlY2s6IHZlcmlmeSBjb21wdXRlZCBzdHlsZSBzaG93cyBpdCdzIHZpc2libGVcbiAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShwb3B1cClcbiAgaWYgKHN0eWxlLmRpc3BsYXkgPT09ICdub25lJyB8fCBzdHlsZS52aXNpYmlsaXR5ID09PSAnaGlkZGVuJyB8fCBzdHlsZS5vcGFjaXR5ID09PSAnMCcpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgLy8gVmVyaWZ5IGl0IGNvbnRhaW5zIGVzcmktZmVhdHVyZXMgKGlkZW50aWZ5IHBvcHVwIHN0cnVjdHVyZSlcbiAgY29uc3QgaGFzRmVhdHVyZXMgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCcuZXNyaS1mZWF0dXJlcycpXG4gIGlmICghaGFzRmVhdHVyZXMpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgcmV0dXJuIHRydWVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tSZXN1bHRQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcmVzdWx0Q291bnQ6IG51bWJlclxuICBtYXhQZXJQYWdlOiBudW1iZXJcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4gIG91dHB1dERTOiBEYXRhU291cmNlXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4gIHJlY29yZHM6IERhdGFSZWNvcmRbXVxuICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4gIG9uTmF2QmFjazogKGNsZWFyUmVzdWx0cz86IGJvb2xlYW4pID0+IFByb21pc2U8dm9pZD4gfCB2b2lkXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdXG4gIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPzogKHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10pID0+IHZvaWRcbiAgZXZlbnRNYW5hZ2VyPzogaW1wb3J0KCcuL2hvb2tzL3VzZS1ldmVudC1oYW5kbGluZycpLkV2ZW50TWFuYWdlciAgLy8gQ2h1bmsgNy4xOiBFdmVudCBIYW5kbGluZyBNYW5hZ2VyXG59XG5cbmNvbnN0IHJlc3VsdFN0eWxlID0gY3NzYFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuXG4gIC5xdWVyeS1yZXN1bHRfX2hlYWRlciB7XG4gICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLXRleHQpO1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICBsaW5lLWhlaWdodDogMS41O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICB9XG5cbiAgLnF1ZXJ5LXJlc3VsdC1jb250YWluZXIge1xuICAgIGZsZXg6IDEgMSAwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBtaW4taGVpZ2h0OiAwO1xuICB9XG5cbiAgLnF1ZXJ5LXJlc3VsdC1pbmZvIHtcbiAgICBoZWlnaHQ6IDE4cHg7XG4gIH1cbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza1Jlc3VsdCAocHJvcHM6IFF1ZXJ5VGFza1Jlc3VsdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtLCBxdWVyeVBhcmFtcywgcmVzdWx0Q291bnQsIG1heFBlclBhZ2UsIHJlY29yZHMsIHdpZGdldElkLCBvdXRwdXREUywgcnVudGltZVpvb21Ub1NlbGVjdGVkLCBvbk5hdkJhY2ssIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyLCBtYXBWaWV3LCBldmVudE1hbmFnZXIgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IGludGwgPSB1c2VJbnRsKClcbiAgY29uc3Qgem9vbVRvUmVjb3JkcyA9IHVzZVpvb21Ub1JlY29yZHMobWFwVmlldylcbiAgY29uc3QgW3F1ZXJ5RGF0YSwgc2V0UXVlcnlEYXRhXSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IFtzZWxlY3RlZFJlY29yZHMsIHNldFNlbGVjdGVkUmVjb3Jkc10gPSBSZWFjdC51c2VTdGF0ZTxEYXRhUmVjb3JkW10+KFtdKVxuICBjb25zdCBbcmVtb3ZlZFJlY29yZElkcywgc2V0UmVtb3ZlZFJlY29yZElkc10gPSBSZWFjdC51c2VTdGF0ZTxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKVxuICBcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgW2V4cGFuZEFsbCwgc2V0RXhwYW5kQWxsXSA9IFJlYWN0LnVzZVN0YXRlKGN1cnJlbnRJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCA/PyBmYWxzZSlcbiAgLy8gVHJhY2sgaW5kaXZpZHVhbCBpdGVtIGV4cGFuc2lvbiBzdGF0ZXMgdG8gbWFpbnRhaW4gc3RhdGUgd2hlbiBpdGVtcyBhcmUgcmVtb3ZlZFxuICBjb25zdCBbaXRlbUV4cGFuZFN0YXRlcywgc2V0SXRlbUV4cGFuZFN0YXRlc10gPSBSZWFjdC51c2VTdGF0ZTxNYXA8c3RyaW5nLCBib29sZWFuPj4obmV3IE1hcCgpKVxuICBjb25zdCBiYWNrQnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIFxuICAvLyBUcmFjayBleHBhbmRBbGwgY2hhbmdlcyBmb3IgZGVidWdnaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2V4cGFuZEFsbC1zdGF0ZS1jaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgZXhwYW5kQWxsLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtleHBhbmRBbGwsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IHNlbGVjdGVkIHRoZXNlIHJlY29yZHMgdG8gcHJldmVudCByZS1zZWxlY3Rpb24gd2hlbiBzd2l0Y2hpbmcgdGFic1xuICBjb25zdCBoYXNTZWxlY3RlZFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgdGhlIGxhc3QgcmVjb3JkcyB3ZSBzZWxlY3RlZCB0byBkZXRlY3Qgd2hlbiBuZXcgcmVjb3JkcyBjb21lIGluXG4gIGNvbnN0IGxhc3RTZWxlY3RlZFJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nW10+KFtdKVxuICAvLyBUcmFjayB0aGUgb3JpZ2luYWwgcXVlcnkgcmVjb3JkIElEcyAobm90IHNlbGVjdGVkIElEcykgdG8gZGV0ZWN0IHdoZW4gcXVlcnkgcmVzdWx0cyBjaGFuZ2VcbiAgY29uc3QgbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZ1tdPihbXSlcbiAgLy8gVHJhY2sgdGhlIGxhc3Qgc2VsZWN0ZWQgRmVhdHVyZURhdGFSZWNvcmRzIGZvciByZXN0b3JhdGlvbiAoaWYgbmVlZGVkKVxuICBjb25zdCBsYXN0U2VsZWN0ZWRGZWF0dXJlUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxGZWF0dXJlRGF0YVJlY29yZFtdPihbXSlcbiAgLy8gUmVmIHRvIHRyYWNrIHJlbW92ZWRSZWNvcmRJZHMgZm9yIHVzZSBpbiBjYWxsYmFja3MgKGF2b2lkcyBzdGFsZSBjbG9zdXJlIGlzc3VlcylcbiAgY29uc3QgcmVtb3ZlZFJlY29yZElkc1JlZiA9IFJlYWN0LnVzZVJlZjxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKVxuICBcbiAgLy8gU3luYyByZWYgd2hlbmV2ZXIgcmVtb3ZlZFJlY29yZElkcyBzdGF0ZSBjaGFuZ2VzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVtb3ZlZFJlY29yZElkc1JlZi5jdXJyZW50ID0gcmVtb3ZlZFJlY29yZElkc1xuICB9LCBbcmVtb3ZlZFJlY29yZElkc10pXG4gIC8vIEVycm9yIHN0YXRlIGZvciB1c2VyLWZhY2luZyBlcnJvcnNcbiAgY29uc3QgW3NlbGVjdGlvbkVycm9yLCBzZXRTZWxlY3Rpb25FcnJvcl0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmc+KG51bGwpXG5cbiAgY29uc3QgZXh0cmFBY3Rpb25zID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGdldEV4dHJhQWN0aW9ucyh3aWRnZXRJZCwgb3V0cHV0RFMsIG1hcFZpZXcsIGludGwsIHF1ZXJ5SXRlbSwgcnVudGltZVpvb21Ub1NlbGVjdGVkKVxuICB9LCBbd2lkZ2V0SWQsIG91dHB1dERTLCBtYXBWaWV3LCBpbnRsLCBxdWVyeUl0ZW0sIHJ1bnRpbWVab29tVG9TZWxlY3RlZF0pXG5cbiAgY29uc3QgZW5hYmxlRGF0YUFjdGlvbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmVuYWJsZURhdGFBY3Rpb24gPz8gdHJ1ZVxuICB9KVxuXG4gIGNvbnN0IHBhZ2luZ1R5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRQYWdpbmdTdHlsZVxuICB9KVxuICBjb25zdCBkaXJlY3Rpb25UeXBlSW5Db25maWcgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0TGlzdERpcmVjdGlvblxuICB9KVxuICAvLyBGT1JDRSBTaW1wbGVMaXN0IC0gaWdub3JlIGNvbmZpZywgd2UncmUgZG9uZSB3aXRoIGxhenkgbG9hZGluZyBpc3N1ZXNcbiAgY29uc3QgcGFnaW5nVHlwZSA9IFBhZ2luZ1R5cGUuU2ltcGxlXG4gIGNvbnN0IGRpcmVjdGlvbiA9IGRpcmVjdGlvblR5cGVJbkNvbmZpZyA/PyBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsXG5cbiAgLy8gR3JvdXAgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2UgZm9yIERhdGFBY3Rpb25MaXN0XG4gIC8vIFRoaXMgZW5zdXJlcyBEYXRhQWN0aW9uTGlzdCByZWNvZ25pemVzIHJlY29yZHMgZXZlbiB3aGVuIHRoZXkgY29tZSBmcm9tIGRpZmZlcmVudCBxdWVyaWVzL29yaWdpbnNcbiAgY29uc3QgYWN0aW9uRGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIC8vIERlYnVnOiBMb2cgd2hhdCByZWNvcmRzIGFyZSBhdmFpbGFibGVcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtY2FsY3VsYXRpb24tc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgc2VsZWN0ZWRSZWNvcmRzQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBxdWVyeURhdGFSZWNvcmRzQ291bnQ6IHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTPy5pZCxcbiAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkczogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggPiAwLFxuICAgICAgaGFzUXVlcnlEYXRhUmVjb3JkczogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggPiAwLFxuICAgICAgaGFzUmVjb3Jkc1Byb3A6IHJlY29yZHM/Lmxlbmd0aCA+IDBcbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICAvLyBJbiBhY2N1bXVsYXRpb24gbW9kZXMgKEFkZC9SZW1vdmUpLCBwcmVmZXIgdGhlICdyZWNvcmRzJyBwcm9wICh0aGUgYWNjdW11bGF0ZWQgc2V0KVxuICAgIC8vIGJlY2F1c2Ugb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgd2lsbCBvbmx5IHJldHVybiByZWNvcmRzIHRoYXQgbWF0Y2ggdGhlIGN1cnJlbnQgcXVlcnkncyB3aGVyZSBjbGF1c2UuXG4gICAgY29uc3QgcmVjb3Jkc1RvVXNlID0gaXNBY2N1bXVsYXRpb25Nb2RlXG4gICAgICA/IChyZWNvcmRzIHx8IFtdKVxuICAgICAgOiAoc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggPiAwID8gc2VsZWN0ZWRSZWNvcmRzIDogKHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoID4gMCA/IHF1ZXJ5RGF0YS5yZWNvcmRzIDogKHJlY29yZHMgfHwgW10pKSlcbiAgICBcbiAgICAvLyBJZiBubyByZWNvcmRzLCByZXR1cm4gc2luZ2xlIERhdGFSZWNvcmRTZXQgd2l0aCBlbXB0eSByZWNvcmRzIHVzaW5nIG91dHB1dERTXG4gICAgaWYgKCFyZWNvcmRzVG9Vc2UgfHwgcmVjb3Jkc1RvVXNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZW1wdHlEYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICAgICAgdHlwZTogJ2xvYWRlZCcsXG4gICAgICAgIHJlY29yZHM6IFtdLFxuICAgICAgICBuYW1lOiBvdXRwdXREUz8uaWQsXG4gICAgICAgIGxhYmVsOiBvdXRwdXREUz8uZ2V0TGFiZWwoKVxuICAgICAgfVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtZW1wdHktcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgZGF0YVNldERhdGFTb3VyY2VJZDogZW1wdHlEYXRhU2V0LmRhdGFTb3VyY2U/LmlkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIFtlbXB0eURhdGFTZXRdXG4gICAgfVxuICAgIFxuICAgIC8vIEdyb3VwIHJlY29yZHMgYnkgdGhlaXIgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+KClcbiAgICBcbiAgICByZWNvcmRzVG9Vc2UuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgICAgY29uc3QgcmVjb3JkRFMgPSAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICBsZXQgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsID0gbnVsbFxuICAgICAgXG4gICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgb3JpZ2luRFMgPSByZWNvcmREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCByZWNvcmREU1xuICAgICAgfSBlbHNlIGlmIChvdXRwdXREUykge1xuICAgICAgICAvLyBGYWxsYmFjazogdXNlIG91dHB1dERTJ3Mgb3JpZ2luIGlmIHJlY29yZCBkb2Vzbid0IGhhdmUgZGF0YVNvdXJjZVxuICAgICAgICBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICAgIH1cbiAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKS5wdXNoKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIENyZWF0ZSBhIERhdGFSZWNvcmRTZXQgZm9yIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSA9IEFycmF5LmZyb20ocmVjb3Jkc0J5T3JpZ2luRFMuZW50cmllcygpKS5tYXAoKFtvcmlnaW5EUywgb3JpZ2luUmVjb3Jkc10pID0+IHtcbiAgICAgIGNvbnN0IGRhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICAgIGRhdGFTb3VyY2U6IG9yaWdpbkRTLCAvLyBVc2Ugb3JpZ2luIERTLCBub3Qgb3V0cHV0RFNcbiAgICAgICAgdHlwZTogJ3NlbGVjdGVkJyxcbiAgICAgICAgcmVjb3Jkczogb3JpZ2luUmVjb3JkcyxcbiAgICAgICAgbmFtZTogb3JpZ2luRFMuaWQsXG4gICAgICAgIGxhYmVsOiBvcmlnaW5EUy5nZXRMYWJlbCgpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZCBmaWVsZHMgaWYgbmVlZGVkICh1c2UgY3VycmVudEl0ZW0ncyBmaWVsZCBzZXR0aW5ncylcbiAgICAgIGlmIChjdXJyZW50SXRlbS5yZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMgJiYgY3VycmVudEl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcyAhPSBudWxsKSB7XG4gICAgICAgIGRhdGFTZXQuZmllbGRzID0gY29tYmluZUZpZWxkcyhjdXJyZW50SXRlbS5yZXN1bHREaXNwbGF5RmllbGRzLCBjdXJyZW50SXRlbS5yZXN1bHRUaXRsZUV4cHJlc3Npb24pXG4gICAgICB9IGVsc2UgaWYgKG9yaWdpbkRTICYmICdnZXRQb3B1cEluZm8nIGluIG9yaWdpbkRTKSB7XG4gICAgICAgIC8vIHVzZSBmaWVsZHMgaW4gcG9wdXAgdGVtcGxhdGUgZnJvbSBvcmlnaW4gRFNcbiAgICAgICAgY29uc3QgcG9wdXBJbmZvID0gb3JpZ2luRFMuZ2V0UG9wdXBJbmZvKClcbiAgICAgICAgaWYgKHBvcHVwSW5mbz8uZmllbGRJbmZvcykge1xuICAgICAgICAgIGRhdGFTZXQuZmllbGRzID0gcG9wdXBJbmZvLmZpZWxkSW5mb3MuZmlsdGVyKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby52aXNpYmxlKS5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YVNldFxuICAgIH0pXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGF0IHRoZSBmaW5hbCBkYXRhU2V0cyBjb250YWluXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2FjdGlvbkRhdGFTZXRzLWZpbmFsJyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzLmxlbmd0aCxcbiAgICAgIHRvdGFsUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9Vc2UubGVuZ3RoLFxuICAgICAgZGF0YVNldHNCeU9yaWdpbjogZGF0YVNldHMubWFwKGRzID0+ICh7XG4gICAgICAgIG9yaWdpbkRTSWQ6IGRzLmRhdGFTb3VyY2U/LmlkLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICB0eXBlOiBkcy50eXBlXG4gICAgICB9KSlcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIHdlIGNvdWxkbid0IGdyb3VwIGJ5IG9yaWdpbiAoc2hvdWxkbid0IGhhcHBlbiksIGZhbGxiYWNrIHRvIHNpbmdsZSBEYXRhUmVjb3JkU2V0IHdpdGggb3V0cHV0RFNcbiAgICBpZiAoZGF0YVNldHMubGVuZ3RoID09PSAwICYmIG91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1mYWxsYmFjay10by1vdXRwdXREUycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnY291bGQtbm90LWRldGVybWluZS1vcmlnaW4tZHMnXG4gICAgICB9KVxuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgICB0eXBlOiByZWNvcmRzVG9Vc2UubGVuZ3RoID4gMCA/ICdzZWxlY3RlZCcgOiAnbG9hZGVkJyxcbiAgICAgICAgcmVjb3JkczogcmVjb3Jkc1RvVXNlLFxuICAgICAgICBuYW1lOiBvdXRwdXREUy5pZCxcbiAgICAgICAgbGFiZWw6IG91dHB1dERTLmdldExhYmVsKClcbiAgICAgIH1dXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhU2V0c1xuICB9LCBbc2VsZWN0ZWRSZWNvcmRzLCBvdXRwdXREUywgcXVlcnlEYXRhLCBjdXJyZW50SXRlbSwgcmVjb3Jkcywgd2lkZ2V0SWRdKVxuXG4gIC8vIE1lbW9pemUgZmlsdGVyZWQgcmVjb3JkcyB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMgdGhhdCByZXNldCBzY3JvbGwgcG9zaXRpb25cbiAgLy8gVGhpcyBlbnN1cmVzIHRoZSByZWNvcmRzIHByb3Agb25seSBjaGFuZ2VzIHdoZW4gdGhlIGFjdHVhbCBkYXRhIGNoYW5nZXMsIG5vdCBqdXN0IHRoZSBhcnJheSByZWZlcmVuY2VcbiAgY29uc3QgZmlsdGVyZWRSZWNvcmRzRm9yTGlzdCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBxdWVyeURhdGE/LnJlY29yZHM/LmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCBcbiAgICAgICAgICAgKHJlY29yZHM/LmZpbHRlcihyZWNvcmQgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKSkgfHwgW10pXG4gIH0sIFtxdWVyeURhdGE/LnJlY29yZHMsIHJlY29yZHMsIHJlbW92ZWRSZWNvcmRJZHNdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIC8vIGZvY3VzIHRoZSBiYWNrIGJ1dHRvbiB3aGVuIGl0IGlzIHJlbmRlcmVkXG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9KVxuXG4gIC8qKlxuICAgKiBFZmZlY3QgaG9vayB0aGF0IHJ1bnMgd2hlbiBuZXcgcXVlcnkgcmVzdWx0cyBhcnJpdmUuXG4gICAqIFJlc2V0cyByZW1vdmVkIHJlY29yZHMsIGV4cGFuZCBzdGF0ZSwgYW5kIHF1ZXJ5IGRhdGEgZm9yIHRoZSBuZXcgcmVzdWx0cy5cbiAgICogQWxzbyBoYW5kbGVzIGF1dG8tc2VsZWN0aW9uIG9mIHJlY29yZHMgd2hlbiB0aGV5IGZpcnN0IGFycml2ZS5cbiAgICovXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQ2hlY2sgaWYgdGhlc2UgYXJlIG5ldyByZWNvcmRzIChkaWZmZXJlbnQgZnJvbSB3aGF0IHdlIGxhc3QgcXVlcmllZClcbiAgICAvLyBJTVBPUlRBTlQ6IENvbXBhcmUgYWdhaW5zdCBvcmlnaW5hbCBxdWVyeSByZXN1bHRzLCBub3Qgc2VsZWN0ZWQgcmVzdWx0c1xuICAgIC8vIFRoaXMgcHJldmVudHMgcmVtb3ZlZFJlY29yZElkcyBmcm9tIGJlaW5nIHJlc2V0IHdoZW4gcmVjb3JkcyBhcmUgcmVtb3ZlZFxuICAgIGNvbnN0IGN1cnJlbnRSZWNvcmRJZHMgPSByZWNvcmRzPy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKSB8fCBbXVxuICAgIGNvbnN0IHJlY29yZHNDaGFuZ2VkID0gY3VycmVudFJlY29yZElkcy5sZW5ndGggIT09IGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50Lmxlbmd0aCB8fFxuICAgICAgY3VycmVudFJlY29yZElkcy5zb21lKChpZCwgaW5kZXgpID0+IGlkICE9PSBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudFtpbmRleF0pXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGVuIHJlY29yZHMgcHJvcCBjaGFuZ2VzXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3JlY29yZHMtcHJvcC1jaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICB3aWxsU2V0UXVlcnlEYXRhOiByZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID4gMCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplLFxuICAgICAgaGFzU2VsZWN0ZWRSZWY6IGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQsXG4gICAgICByZWNvcmRzQ2hhbmdlZDogcmVjb3Jkc0NoYW5nZWQsXG4gICAgICBsYXN0UXVlcnlSZWNvcmRJZHNDb3VudDogbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQubGVuZ3RoLFxuICAgICAgY3VycmVudFJlY29yZElkc0NvdW50OiBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aFxuICAgIH0pXG4gICAgXG4gICAgLy8gSU1QT1JUQU5UOiBPbmx5IHJlc2V0IHJlbW92ZWQgcmVjb3JkcyBpZiB0aGlzIGlzIHRydWx5IGEgTkVXIHF1ZXJ5IHdpdGggZGlmZmVyZW50IHJlY29yZHNcbiAgICAvLyBEb24ndCByZXNldCBpZiByZWNvcmRzIGFyZSB0aGUgc2FtZSAoanVzdCBhIHJlLXJlbmRlciBvciBsYXp5IGxvYWQpXG4gICAgaWYgKHJlY29yZHNDaGFuZ2VkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZWNvcmRzLXRydWx5LWNoYW5nZWQtcmVzZXR0aW5nLXJlbW92ZWQnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIG9sZFJlY29yZElkc0NvdW50OiBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudC5sZW5ndGgsXG4gICAgICAgIG5ld1JlY29yZElkc0NvdW50OiBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIHNldFJlbW92ZWRSZWNvcmRJZHMobmV3IFNldCgpKVxuICAgICAgLy8gVXBkYXRlIHRoZSBvcmlnaW5hbCBxdWVyeSByZWNvcmQgSURzIHJlZlxuICAgICAgbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQgPSBjdXJyZW50UmVjb3JkSWRzXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlY29yZHMtbm90LWNoYW5nZWQtcHJlc2VydmluZy1yZW1vdmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWNvcmRJZHNDb3VudDogY3VycmVudFJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBOT1RFOiBEb24ndCByZXNldCBleHBhbmRBbGwgaGVyZSAtIGl0J3MgaGFuZGxlZCBieSB0aGUgcXVlcnlJdGVtLWNoYW5nZSB1c2VFZmZlY3RcbiAgICAvLyBSZXNldHRpbmcgaXQgaGVyZSBjYXVzZXMgdGhlIEV4cGFuZC9Db2xsYXBzZSBidXR0b24gdG8gZmxpcCBiYWNrIHdoZW4gcmVjb3JkcyBhcmUgcmVtb3ZlZFxuICAgIHNldFF1ZXJ5RGF0YSh7XG4gICAgICByZWNvcmRzLFxuICAgICAgcGFnZTogMVxuICAgIH0pXG4gICAgXG4gICAgLy8gT25seSBhdXRvLXNlbGVjdCByZWNvcmRzIGlmOlxuICAgIC8vIDEuIFdlIGhhdmUgcmVjb3JkcyBhbmQgb3V0cHV0RFNcbiAgICAvLyAyLiBXZSBoYXZlbid0IGFscmVhZHkgc2VsZWN0ZWQgdGhlc2UgcmVjb3JkcyAoaGFzU2VsZWN0ZWRSZWYgaXMgZmFsc2UpXG4gICAgLy8gMy4gT1IgdGhlIHJlY29yZHMgaGF2ZSBhY3R1YWxseSBjaGFuZ2VkIChuZXcgcXVlcnkgcmVzdWx0cylcbiAgICAvLyA0LiBBTkQgd2UgZG9uJ3QgaGF2ZSBhbnkgcmVtb3ZlZCByZWNvcmRzICh0byBwcmV2ZW50IHJlLXNlbGVjdGluZyByZW1vdmVkIG9uZXMpXG4gICAgaWYgKHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwICYmIG91dHB1dERTICYmIFxuICAgICAgICAoIWhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgfHwgcmVjb3Jkc0NoYW5nZWQpICYmIFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzLnNpemUgPT09IDApIHtcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IHJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGNvbnN0IGZkciA9IHJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgICAgXG4gICAgICAvLyBTZWxlY3QgcmVjb3JkcyBhbmQgcHVibGlzaCBzZWxlY3Rpb24gbWVzc2FnZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICAvLyBVc2UgYXN5bmMgSUlGRSBzaW5jZSB1c2VFZmZlY3QgY2FuJ3QgYmUgYXN5bmNcbiAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIHByZXZpb3VzIGVycm9yc1xuICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgICAgd2lkZ2V0SWQsIFxuICAgICAgICAgICAgb3V0cHV0RFMsIFxuICAgICAgICAgICAgcmVjb3JkSWRzLCBcbiAgICAgICAgICAgIGZkciwgXG4gICAgICAgICAgICBmYWxzZSwgXG4gICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBcbiAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXIsIFxuICAgICAgICAgICAgbWFwVmlld1xuICAgICAgICAgIClcbiAgICAgICAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gdHJ1ZSAvLyBNYXJrIGFzIHNlbGVjdGVkXG4gICAgICAgICAgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gcmVjb3JkSWRzIC8vIFN0b3JlIHRoZSBJRHMgd2Ugc2VsZWN0ZWRcbiAgICAgICAgICBsYXN0U2VsZWN0ZWRGZWF0dXJlUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmRyIC8vIFN0b3JlIHRoZSBmdWxsIHJlY29yZHMgZm9yIHBvdGVudGlhbCByZXN0b3JhdGlvblxuICAgICAgICAgIFxuICAgICAgICAgIC8vIE5vdGlmeSBXaWRnZXQgYW5kIEhlbHBlclNpbXBsZSBvZiBzZWxlY3Rpb24gY2hhbmdlXG4gICAgICAgICAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCh3aWRnZXRJZCwgcmVjb3JkSWRzLCBvdXRwdXREUywgcXVlcnlJdGVtLmNvbmZpZ0lkLCBldmVudE1hbmFnZXIpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQtcXVlcnktcmVzdWx0JyxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pKClcbiAgICB9IGVsc2UgaWYgKHJlY29yZHNDaGFuZ2VkICYmIHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIElmIHJlY29yZHMgd2VyZSBjbGVhcmVkLCByZXNldCB0aGUgc2VsZWN0aW9uIGZsYWdcbiAgICAgIGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gW11cbiAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIGVycm9ycyB3aGVuIGNsZWFyaW5nIHJlY29yZHNcbiAgICB9IGVsc2UgaWYgKHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3NraXBwaW5nLXJlc2VsZWN0aW9uLWR1ZS10by1yZW1vdmVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplLFxuICAgICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNTZWxlY3RlZFJlZjogaGFzU2VsZWN0ZWRSZWYuY3VycmVudCxcbiAgICAgICAgcmVjb3Jkc0NoYW5nZWQ6IHJlY29yZHNDaGFuZ2VkXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3JlY29yZHMsIG91dHB1dERTLCB3aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBxdWVyeUl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0LCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIGNsZWFyIHNlbGVjdGlvbiB3aGVuIHJlc3VsdFNlbGVjdE1vZGUgY2hhbmdlZFxuICAgIGlmIChvdXRwdXREUykge1xuICAgICAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKG91dHB1dERTLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyKVxuICAgICAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2Uod2lkZ2V0SWQsIFtdLCBvdXRwdXREUywgdHJ1ZSlcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0ucmVzdWx0U2VsZWN0TW9kZSwgb3V0cHV0RFMsIHdpZGdldElkLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyXSlcblxuICAvLyBVcGRhdGUgZXhwYW5kQWxsIHdoZW4gcXVlcnlJdGVtIGNoYW5nZXMgKGUuZy4sIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJpZXMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbmV3RXhwYW5kQWxsID0gcXVlcnlJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCA/PyBmYWxzZVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdleHBhbmRBbGwtcmVzZXQtYnktcXVlcnlJdGVtLWNoYW5nZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICByZXN1bHRFeHBhbmRCeURlZmF1bHQ6IHF1ZXJ5SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQsXG4gICAgICBuZXdFeHBhbmRBbGwsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHNldEV4cGFuZEFsbChuZXdFeHBhbmRBbGwpXG4gICAgLy8gUmVzZXQgaW5kaXZpZHVhbCBleHBhbnNpb24gc3RhdGVzIHdoZW4gcXVlcnkgY2hhbmdlc1xuICAgIHNldEl0ZW1FeHBhbmRTdGF0ZXMobmV3IE1hcCgpKVxuICB9LCBbcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICAvKipcbiAgICogTW9uaXRvciBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9uIGNoYW5nZXMgdG8gZGV0ZWN0IHdoZW4gb3RoZXIgd2lkZ2V0cyAobGlrZSBtYXAgaWRlbnRpZnkpXG4gICAqIGNsZWFyIG91ciBzZWxlY3Rpb25zLiBFbmhhbmNlZCB3aXRoIGlkZW50aWZ5IHBvcHVwIGRldGVjdGlvbiBmb3IgdGVzdGluZyBzY2VuYXJpb3MuXG4gICAqIFdhdGNoZXMgdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSdzIHNlbGVjdGlvbiBzdGF0ZSBkaXJlY3RseSB2aWEgcG9sbGluZy5cbiAgICovXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG5cbiAgICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgaWYgKCFvcmlnaW5EUykgcmV0dXJuXG5cbiAgICBjb25zdCBvcmlnaW5EU0lkID0gb3JpZ2luRFMuaWRcbiAgICBsZXQgcHJldmlvdXNTZWxlY3RlZElkczogc3RyaW5nW10gPSBbXVxuICAgIGxldCBpZGVudGlmeVBvcHVwV2FzT3BlbiA9IGZhbHNlXG4gICAgbGV0IGxhc3RMb2dUaW1lID0gMFxuICAgIGNvbnN0IExPR19USFJPVFRMRV9NUyA9IDEwMDAgLy8gVGhyb3R0bGUgbG9ncyB0byBvbmNlIHBlciBzZWNvbmRcbiAgICBcbiAgICAvLyBJbml0aWFsIGNoZWNrXG4gICAgcHJldmlvdXNTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICBpZGVudGlmeVBvcHVwV2FzT3BlbiA9IGlzSWRlbnRpZnlQb3B1cE9wZW4oKVxuXG4gICAgLy8gV2F0Y2ggZm9yIHNlbGVjdGlvbiBjaGFuZ2VzIG9uIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICBjb25zdCBjaGVja1NlbGVjdGlvbiA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IG91ckV4cGVjdGVkSWRzID0gbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50XG4gICAgICBjb25zdCBoYXNPdXJTZWxlY3Rpb24gPSBvdXJFeHBlY3RlZElkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwSXNPcGVuID0gaXNJZGVudGlmeVBvcHVwT3BlbigpXG4gICAgICBcbiAgICAgIC8vIERldGVjdCBpZiBzZWxlY3Rpb24gd2FzIGNsZWFyZWQgb3IgY2hhbmdlZCBleHRlcm5hbGx5XG4gICAgICBjb25zdCB3YXNDbGVhcmVkID0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggPiAwICYmIGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggPT09IDBcbiAgICAgIGNvbnN0IHdhc0NoYW5nZWQgPSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgIChjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoICE9PSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCB8fFxuICAgICAgICAgIWN1cnJlbnRTZWxlY3RlZElkcy5ldmVyeShpZCA9PiBwcmV2aW91c1NlbGVjdGVkSWRzLmluY2x1ZGVzKGlkKSkpXG4gICAgICBcbiAgICAgIC8vIE5FVzogRGV0ZWN0IGlmIHNlbGVjdGlvbiB3YXMgYWRkZWQgKHdlbnQgZnJvbSBlbXB0eSB0byBoYXZpbmcgcmVjb3JkcylcbiAgICAgIGNvbnN0IHdhc0FkZGVkID0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggPT09IDAgJiYgY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCA+IDBcbiAgICAgIFxuICAgICAgLy8gVHJhY2sgaWRlbnRpZnkgcG9wdXAgc3RhdGUgY2hhbmdlc1xuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQgPSAhaWRlbnRpZnlQb3B1cFdhc09wZW4gJiYgaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQgPSBpZGVudGlmeVBvcHVwV2FzT3BlbiAmJiAhaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cFN0aWxsT3BlbiA9IGlkZW50aWZ5UG9wdXBXYXNPcGVuICYmIGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgIFxuICAgICAgLy8gTG9nIGlkZW50aWZ5IHBvcHVwIHN0YXRlIGNoYW5nZXNcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgICAgIGlmIChpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCB8fCBpZGVudGlmeVBvcHVwSnVzdENsb3NlZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1NFTEVDVElPTicsIHtcbiAgICAgICAgICBldmVudDogaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQgPyAnaWRlbnRpZnktcG9wdXAtb3BlbmVkJyA6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQnLFxuICAgICAgICAgIG9yaWdpbkRTSWQsXG4gICAgICAgICAgb3VyU2VsZWN0aW9uQ291bnQ6IG91ckV4cGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICBjdXJyZW50U2VsZWN0aW9uQ291bnQ6IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIElmIGlkZW50aWZ5IHBvcHVwIGp1c3QgY2xvc2VkIGFuZCBzZWxlY3Rpb24gd2FzIGNsZWFyZWQsIGRpc3BhdGNoIHJlc3RvcmUgZXZlbnRcbiAgICAgICAgaWYgKGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkICYmIHdhc0NsZWFyZWQgJiYgaGFzT3VyU2VsZWN0aW9uICYmIG91ckV4cGVjdGVkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCByZXN0b3JlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgICByZWNvcmRJZHM6IG91ckV4cGVjdGVkSWRzLFxuICAgICAgICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChyZXN0b3JlRXZlbnQpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdTRUxFQ1RJT04nLCB7XG4gICAgICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXJlcXVlc3RlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgIHJlY29yZENvdW50OiBvdXJFeHBlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIExvZyBBTEwgc2VsZWN0aW9uIGNoYW5nZXMgKG5vdCBqdXN0IHdoZW4gd2UgaGF2ZSBvdXIgb3duIHNlbGVjdGlvbilcbiAgICAgIGlmICh3YXNDbGVhcmVkIHx8IHdhc0NoYW5nZWQgfHwgd2FzQWRkZWQpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBtYXRjaGVzIG91ciBleHBlY3RlZCBzZWxlY3Rpb25cbiAgICAgICAgY29uc3QgbWF0Y2hlc091clNlbGVjdGlvbiA9IGhhc091clNlbGVjdGlvbiAmJiBcbiAgICAgICAgICBvdXJFeHBlY3RlZElkcy5sZW5ndGggPT09IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggJiZcbiAgICAgICAgICBvdXJFeHBlY3RlZElkcy5ldmVyeShpZCA9PiBjdXJyZW50U2VsZWN0ZWRJZHMuaW5jbHVkZXMoaWQpKVxuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoYXQgd291bGQgaGFwcGVuIChmb3IgdGVzdGluZy9sb2dnaW5nKVxuICAgICAgICBjb25zdCB3b3VsZFJlc3RvcmUgPSB3YXNDbGVhcmVkICYmIGlkZW50aWZ5UG9wdXBJc09wZW4gJiYgaGFzT3VyU2VsZWN0aW9uICYmIG91ckV4cGVjdGVkSWRzLmxlbmd0aCA+IDBcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluZSBzY2VuYXJpb1xuICAgICAgICBsZXQgc2NlbmFyaW8gPSAnVW5rbm93bidcbiAgICAgICAgaWYgKHdhc0FkZGVkICYmICFoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9ICdURVNUIFNDRU5BUklPIDQ6IEFub3RoZXIgd2lkZ2V0IHNlbGVjdGVkIHJlY29yZHMgKHdlIGhhdmUgbm8gc2VsZWN0aW9uKSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNDaGFuZ2VkICYmICFtYXRjaGVzT3VyU2VsZWN0aW9uICYmICFoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9ICdURVNUIFNDRU5BUklPIDU6IEFub3RoZXIgd2lkZ2V0IGNoYW5nZWQgc2VsZWN0aW9uICh3ZSBoYXZlIG5vIHNlbGVjdGlvbiknXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQ2hhbmdlZCAmJiAhbWF0Y2hlc091clNlbGVjdGlvbiAmJiBoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9IGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgICAgICAgID8gJ1RFU1QgU0NFTkFSSU8gMjogUXVlcnkg4oaSIElkZW50aWZ5IChzZWxlY3Rpb24gY2hhbmdlZCwgbm90IGNsZWFyZWQpIOKGkiBXb3VsZCBOT1QgcmVzdG9yZSdcbiAgICAgICAgICAgIDogJ1RFU1QgU0NFTkFSSU8gMzogUXVlcnkg4oaSIEFub3RoZXIgUXVlcnlTaW1wbGUgd2lkZ2V0IOKGkiBXb3VsZCBOT1QgcmVzdG9yZSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNDbGVhcmVkICYmIGhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgICAgICAgPyAnVEVTVCBTQ0VOQVJJTyAxOiBRdWVyeSDihpIgSWRlbnRpZnkg4oaSIFdvdWxkIHJlc3RvcmUnXG4gICAgICAgICAgICA6ICdURVNUIFNDRU5BUklPIDM6IFF1ZXJ5IOKGkiBBbm90aGVyIFF1ZXJ5U2ltcGxlIHdpZGdldCAoY2xlYXJlZCkg4oaSIFdvdWxkIE5PVCByZXN0b3JlJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0FkZGVkICYmIGhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gbWF0Y2hlc091clNlbGVjdGlvblxuICAgICAgICAgICAgPyAnT3VyIHdpZGdldCBzZWxlY3RlZCByZWNvcmRzJ1xuICAgICAgICAgICAgOiAnQW5vdGhlciB3aWRnZXQgc2VsZWN0ZWQgZGlmZmVyZW50IHJlY29yZHMnXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIExvZyBkZXRlY3Rpb24gd2l0aCBpZGVudGlmeSBwb3B1cCBzdGF0ZSAodGhyb3R0bGVkKVxuICAgICAgICBpZiAobm93IC0gbGFzdExvZ1RpbWUgPiBMT0dfVEhST1RUTEVfTVMpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1NFTEVDVElPTicsIHtcbiAgICAgICAgICAgIGV2ZW50OiB3YXNDbGVhcmVkID8gJ3NlbGVjdGlvbi1jbGVhcmVkJyA6IHdhc0NoYW5nZWQgPyAnc2VsZWN0aW9uLWNoYW5nZWQnIDogJ3NlbGVjdGlvbi1hZGRlZCcsXG4gICAgICAgICAgICBvcmlnaW5EU0lkLFxuICAgICAgICAgICAgb3VyRXhwZWN0ZWRDb3VudDogb3VyRXhwZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZENvdW50OiBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgd2FzQ2xlYXJlZCxcbiAgICAgICAgICAgIHdhc0NoYW5nZWQsXG4gICAgICAgICAgICB3YXNBZGRlZCxcbiAgICAgICAgICAgIGhhc091clNlbGVjdGlvbixcbiAgICAgICAgICAgIG1hdGNoZXNPdXJTZWxlY3Rpb24sXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwSXNPcGVuLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQsXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwU3RpbGxPcGVuLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQsXG4gICAgICAgICAgICB3b3VsZFJlc3RvcmUsXG4gICAgICAgICAgICBvdXJFeHBlY3RlZElkczogb3VyRXhwZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkSWRzOiBwcmV2aW91c1NlbGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkSWRzOiBjdXJyZW50U2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIG5vdGU6IHdvdWxkUmVzdG9yZSBcbiAgICAgICAgICAgICAgPyAnV291bGQgcmVzdG9yZSBzZWxlY3Rpb24gKGNsZWFyZWQgKyBpZGVudGlmeSBwb3B1cCBvcGVuKSdcbiAgICAgICAgICAgICAgOiBpZGVudGlmeVBvcHVwSXNPcGVuICYmIHdhc0NoYW5nZWRcbiAgICAgICAgICAgICAgICA/ICdJZGVudGlmeSBwb3B1cCBvcGVuIGJ1dCBzZWxlY3Rpb24gY2hhbmdlZCAobm90IGNsZWFyZWQpIC0gd291bGQgbm90IHJlc3RvcmUnXG4gICAgICAgICAgICAgICAgOiB3YXNDbGVhcmVkICYmICFpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICAgICAgICAgICAgICA/ICdTZWxlY3Rpb24gY2xlYXJlZCwgY2hlY2tpbmcgaWYgaWRlbnRpZnkgcG9wdXAgb3BlbnMuLi4nXG4gICAgICAgICAgICAgICAgICA6IHdhc0FkZGVkXG4gICAgICAgICAgICAgICAgICAgID8gaGFzT3VyU2VsZWN0aW9uICYmIG1hdGNoZXNPdXJTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICA/ICdPdXIgd2lkZ2V0IHNlbGVjdGVkIHJlY29yZHMnXG4gICAgICAgICAgICAgICAgICAgICAgOiBoYXNPdXJTZWxlY3Rpb24gJiYgIW1hdGNoZXNPdXJTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ0Fub3RoZXIgd2lkZ2V0IHNlbGVjdGVkIGRpZmZlcmVudCByZWNvcmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnU2VsZWN0aW9uIGFkZGVkIChieSBhbm90aGVyIHdpZGdldCBvciBleHRlcm5hbCBzb3VyY2UpJ1xuICAgICAgICAgICAgICAgICAgICA6ICdObyBpZGVudGlmeSBwb3B1cCBkZXRlY3RlZCAtIHdvdWxkIG5vdCByZXN0b3JlJ1xuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgbGFzdExvZ1RpbWUgPSBub3dcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBwcmV2aW91c1NlbGVjdGVkSWRzID0gWy4uLmN1cnJlbnRTZWxlY3RlZElkc11cbiAgICAgIGlkZW50aWZ5UG9wdXBXYXNPcGVuID0gaWRlbnRpZnlQb3B1cElzT3BlblxuICAgIH1cblxuICAgIC8vIENoZWNrIHBlcmlvZGljYWxseSAoZXZlcnkgNTAwbXMpXG4gICAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGNoZWNrU2VsZWN0aW9uLCA1MDApXG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZClcbiAgICB9XG4gIH0sIFtvdXRwdXREU10pXG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgcmVzdWx0cy4gUmVzZXRzIGxvY2FsIHN0YXRlIGFuZCBkZWxlZ2F0ZXMgdG8gcGFyZW50J3MgY2xlYXJSZXN1bHQgbWV0aG9kLlxuICAgKi9cbiAgY29uc3QgY2xlYXJSZXN1bHRzID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIExvZyBoYXNoIHN0YXRlIGJlZm9yZSBjbGVhcmluZ1xuICAgIGNvbnN0IGhhc2hCZWZvcmUgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCB1cmxQYXJhbXNCZWZvcmUgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2hCZWZvcmUpXG4gICAgY29uc3QgaGFzaFBhcmFtc0JlZm9yZTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9XG4gICAgdXJsUGFyYW1zQmVmb3JlLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIGhhc2hQYXJhbXNCZWZvcmVba2V5XSA9IHZhbHVlXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2NsZWFyUmVzdWx0cy1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBoYXNoQmVmb3JlOiBoYXNoQmVmb3JlLFxuICAgICAgaGFzaFBhcmFtc0JlZm9yZTogaGFzaFBhcmFtc0JlZm9yZSxcbiAgICAgIGhhc2hQYXJhbXNDb3VudDogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0JlZm9yZSkubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBSZXNldCBsb2NhbCBzZWxlY3Rpb24gZmxhZ3NcbiAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBbXVxuICAgIC8vIFJlc2V0IGxvY2FsIHF1ZXJ5IGRhdGEgc3RhdGVcbiAgICBzZXRRdWVyeURhdGEobnVsbClcbiAgICBzZXRSZW1vdmVkUmVjb3JkSWRzKG5ldyBTZXQoKSlcbiAgICAvLyBDbGVhciBlcnJvciBzdGF0ZSB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKVxuICAgIC8vIERlbGVnYXRlIHRvIHBhcmVudCdzIGNsZWFyUmVzdWx0IG1ldGhvZCAodmlhIG9uTmF2QmFjaykgd2hpY2ggaGFuZGxlc1xuICAgIC8vIGNsZWFyaW5nIHNlbGVjdGlvbiBmcm9tIG1hcCwgcHVibGlzaGluZyBtZXNzYWdlcywgZXRjLlxuICAgIGF3YWl0IG9uTmF2QmFjayh0cnVlKVxuICAgIFxuICAgIC8vIExvZyBoYXNoIHN0YXRlIGFmdGVyIGNsZWFyaW5nICh3aXRoIGRlbGF5IHRvIGNhdGNoIGFzeW5jIHVwZGF0ZXMpXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBoYXNoQWZ0ZXIgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICAgIGNvbnN0IHVybFBhcmFtc0FmdGVyID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoQWZ0ZXIpXG4gICAgICBjb25zdCBoYXNoUGFyYW1zQWZ0ZXI6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuICAgICAgdXJsUGFyYW1zQWZ0ZXIuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICBoYXNoUGFyYW1zQWZ0ZXJba2V5XSA9IHZhbHVlXG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHRzLWNvbXBsZXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBoYXNoQmVmb3JlOiBoYXNoQmVmb3JlLFxuICAgICAgICBoYXNoQWZ0ZXI6IGhhc2hBZnRlcixcbiAgICAgICAgaGFzaFBhcmFtc0JlZm9yZTogaGFzaFBhcmFtc0JlZm9yZSxcbiAgICAgICAgaGFzaFBhcmFtc0FmdGVyOiBoYXNoUGFyYW1zQWZ0ZXIsXG4gICAgICAgIGhhc2hQYXJhbXNSZW1vdmVkOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQmVmb3JlKS5sZW5ndGggLSBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCxcbiAgICAgICAgaGFzaFBhcmFtc0NvdW50QmVmb3JlOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQmVmb3JlKS5sZW5ndGgsXG4gICAgICAgIGhhc2hQYXJhbXNDb3VudEFmdGVyOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCxcbiAgICAgICAgc3RpbGxIYXNIYXNoUGFyYW1zOiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQWZ0ZXIpLmxlbmd0aCA+IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9LCAxMDApXG4gIH1cblxuICBjb25zdCBoYW5kbGVSZW5kZXJEb25lID0gUmVhY3QudXNlQ2FsbGJhY2soKHsgZGF0YUl0ZW1zLCBwYWdlU2l6ZSwgcGFnZSB9KSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVJlbmRlckRvbmUtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIGRhdGFJdGVtc0NvdW50OiBkYXRhSXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgcGFnZVNpemUsXG4gICAgICBwYWdlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBVc2UgcmVmIHRvIGdldCBsYXRlc3QgcmVtb3ZlZFJlY29yZElkcyAoYXZvaWRzIHN0YWxlIGNsb3N1cmUgaXNzdWVzIHdpdGggbGF6eSBsb2FkaW5nKVxuICAgIGNvbnN0IGN1cnJlbnRSZW1vdmVkSWRzID0gcmVtb3ZlZFJlY29yZElkc1JlZi5jdXJyZW50XG4gICAgXG4gICAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHMgRklSU1QgLSBiZWZvcmUgYW55IHNlbGVjdGlvbiBsb2dpY1xuICAgIC8vIFRoaXMgZW5zdXJlcyByZW1vdmVkIHJlY29yZHMgc3RheSByZW1vdmVkIGV2ZW4gZHVyaW5nIGxhenkgbG9hZGluZ1xuICAgIGNvbnN0IGZpbHRlcmVkSXRlbXMgPSBkYXRhSXRlbXM/LmZpbHRlcihpdGVtID0+ICFjdXJyZW50UmVtb3ZlZElkcy5oYXMoaXRlbS5nZXRJZCgpKSkgfHwgW11cbiAgICBcbiAgICAvLyBDaGVjayBpZiBxdWVyeURhdGEgaGFzIGFjdHVhbGx5IGNoYW5nZWQgYmVmb3JlIHVwZGF0aW5nIHN0YXRlXG4gICAgLy8gVGhpcyBwcmV2ZW50cyB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzIHRoYXQgcmVzZXQgc2Nyb2xsIHBvc2l0aW9uXG4gICAgY29uc3QgY3VycmVudFJlY29yZHMgPSBxdWVyeURhdGE/LnJlY29yZHMgfHwgW11cbiAgICBjb25zdCBjdXJyZW50UmVjb3JkSWRzID0gY3VycmVudFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKS5zb3J0KClcbiAgICBjb25zdCBuZXdSZWNvcmRJZHMgPSBmaWx0ZXJlZEl0ZW1zLm1hcChyID0+IHIuZ2V0SWQoKSkuc29ydCgpXG4gICAgY29uc3QgZGF0YUNoYW5nZWQgPSBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aCAhPT0gbmV3UmVjb3JkSWRzLmxlbmd0aCB8fFxuICAgICAgIWN1cnJlbnRSZWNvcmRJZHMuZXZlcnkoKGlkLCBpZHgpID0+IGlkID09PSBuZXdSZWNvcmRJZHNbaWR4XSkgfHxcbiAgICAgIHF1ZXJ5RGF0YT8ucGFnZVNpemUgIT09IHBhZ2VTaXplIHx8XG4gICAgICBxdWVyeURhdGE/LnBhZ2UgIT09IHBhZ2VcbiAgICBcbiAgICAvLyBPbmx5IHVwZGF0ZSBzdGF0ZSBpZiBkYXRhIGhhcyBhY3R1YWxseSBjaGFuZ2VkXG4gICAgaWYgKGRhdGFDaGFuZ2VkKSB7XG4gICAgICBzZXRRdWVyeURhdGEoe1xuICAgICAgICByZWNvcmRzOiBmaWx0ZXJlZEl0ZW1zLFxuICAgICAgICBwYWdlU2l6ZSxcbiAgICAgICAgcGFnZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gT25seSBzZWxlY3QgcmVjb3JkcyB0aGF0IGFyZSBOT1QgcmVtb3ZlZFxuICAgIC8vIElNUE9SVEFOVDogT25seSByZS1zZWxlY3QgaWYgdGhlIHNlbGVjdGlvbiBoYXMgYWN0dWFsbHkgY2hhbmdlZCB0byBhdm9pZCByZXNldHRpbmcgc2Nyb2xsIHBvc2l0aW9uXG4gICAgaWYgKGZpbHRlcmVkSXRlbXMgJiYgZmlsdGVyZWRJdGVtcy5sZW5ndGggPiAwICYmIG91dHB1dERTKSB7XG4gICAgICBjb25zdCByZWNvcmRJZHMgPSBmaWx0ZXJlZEl0ZW1zLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBjb25zdCBmZHIgPSBmaWx0ZXJlZEl0ZW1zIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgd2hhdCdzIGN1cnJlbnRseSBzZWxlY3RlZCB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZS1zZWxlY3Rpb24gKHdoaWNoIHJlc2V0cyBzY3JvbGwpXG4gICAgICBjb25zdCBjdXJyZW50bHlTZWxlY3RlZElkcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IHNlbGVjdGlvbkNoYW5nZWQgPSBjdXJyZW50bHlTZWxlY3RlZElkcy5sZW5ndGggIT09IHJlY29yZElkcy5sZW5ndGggfHxcbiAgICAgICAgIXJlY29yZElkcy5ldmVyeShpZCA9PiBjdXJyZW50bHlTZWxlY3RlZElkcy5pbmNsdWRlcyhpZCkpXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc2VsZWN0IGlmIHRoZSBzZWxlY3Rpb24gaGFzIGFjdHVhbGx5IGNoYW5nZWRcbiAgICAgIGlmIChzZWxlY3Rpb25DaGFuZ2VkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzXG4gICAgICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2god2lkZ2V0SWQsIG91dHB1dERTLCByZWNvcmRJZHMsIGZkcilcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1zZWxlY3RpbmctZmlsdGVyZWQtcmVjb3JkcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIGZpbHRlcmVkSXRlbXNDb3VudDogZmlsdGVyZWRJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZW1vdmVkSWRzLnNpemUsXG4gICAgICAgICAgICBzZWxlY3Rpb25DaGFuZ2VkOiB0cnVlLFxuICAgICAgICAgICAgY3VycmVudGx5U2VsZWN0ZWRDb3VudDogY3VycmVudGx5U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgbmV3U2VsZWN0aW9uQ291bnQ6IHJlY29yZElkcy5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZWxlY3QgcXVlcnkgcmVzdWx0cydcbiAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tZmFpbGVkLWhhbmRsZVJlbmRlckRvbmUnLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYW5kbGVSZW5kZXJEb25lLXNraXBwaW5nLXJlc2VsZWN0aW9uJyxcbiAgICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgICAgZGF0YUl0ZW1zQ291bnQ6IGRhdGFJdGVtcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgZmlsdGVyZWRJdGVtc0NvdW50OiBmaWx0ZXJlZEl0ZW1zLmxlbmd0aCxcbiAgICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZW1vdmVkSWRzLnNpemUsXG4gICAgICAgICAgcmVhc29uOiAnc2VsZWN0aW9uLXVuY2hhbmdlZCcsXG4gICAgICAgICAgY3VycmVudGx5U2VsZWN0ZWRDb3VudDogY3VycmVudGx5U2VsZWN0ZWRJZHMubGVuZ3RoXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkLCBxdWVyeURhdGFdKVxuXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKG91dHB1dERTPy5pZClcbiAgICBjb25zdCBkc1JlY29yZHMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICBjb25zdCBzZWxlY3RlZElkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZElkcygpID8/IFtdXG4gICAgXG4gICAgLy8gQ2FwdHVyZSByZWNvcmRzIHByb3AgYmVmb3JlIHVzaW5nIGl0ICh0byBhdm9pZCBzaGFkb3dpbmcpXG4gICAgY29uc3QgcmVjb3Jkc1Byb3AgPSByZWNvcmRzXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGF0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlIHNlZXNcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UtZmlyZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFM/LmlkLFxuICAgICAgZHNJZDogZHM/LmlkLFxuICAgICAgc2VsZWN0ZWRSZWNvcmRzRnJvbURTOiBkc1JlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2VsZWN0ZWRJZHNGcm9tRFM6IHNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFJlY29yZHNTdGF0ZTogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHNQcm9wPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiB3ZSBoYXZlIHJlY29yZHMgaW4gdGhlIHByb3AgKGFjY3VtdWxhdGVkIHJlY29yZHMpIGJ1dCBEUyBzaG93cyAwIHNlbGVjdGVkLFxuICAgIC8vIGFuZCB3ZSBjdXJyZW50bHkgaGF2ZSBzZWxlY3RlZFJlY29yZHMsIHRoaXMgaXMgbGlrZWx5IGEgcXVlcnkgc3dpdGNoIGluIFwiQWRkIHRvXCIgbW9kZVxuICAgIC8vIHdoZXJlIHJlLXNlbGVjdGlvbiBoYXNuJ3QgaGFwcGVuZWQgeWV0LiBEb24ndCBjbGVhciBzZWxlY3RlZFJlY29yZHMgLSB3YWl0IGZvciByZS1zZWxlY3Rpb24uXG4gICAgaWYgKHJlY29yZHNQcm9wICYmIHJlY29yZHNQcm9wLmxlbmd0aCA+IDAgJiYgc2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwICYmIHNlbGVjdGVkUmVjb3JkcyAmJiBzZWxlY3RlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Utc2tpcHBpbmctY2xlYXItZHVyaW5nLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnd2FpdGluZy1mb3ItcmVzZWxlY3Rpb24nLFxuICAgICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzUHJvcC5sZW5ndGgsXG4gICAgICAgIGN1cnJlbnRTZWxlY3RlZFJlY29yZHNDb3VudDogc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIHJldHVybiAvLyBTa2lwIHVwZGF0aW5nIC0gcmUtc2VsZWN0aW9uIGlzIGNvbWluZ1xuICAgIH1cbiAgICBcbiAgICAvLyBJTVBPUlRBTlQ6IEZpbHRlciBvdXQgcmVtb3ZlZCByZWNvcmRzIGZyb20gRFMgc2VsZWN0aW9uIGJlZm9yZSBjb21wYXJpbmcvc3luY2luZ1xuICAgIC8vIFRoaXMgcHJldmVudHMgcmVtb3ZlZCByZWNvcmRzIGZyb20gYmVpbmcgcmUtYWRkZWQgd2hlbiBzY3JvbGxpbmcgdHJpZ2dlcnMgdGhpcyBjYWxsYmFja1xuICAgIGNvbnN0IGZpbHRlcmVkRHNSZWNvcmRzID0gZHNSZWNvcmRzPy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKSkgPz8gW11cbiAgICBjb25zdCBmaWx0ZXJlZFNlbGVjdGVkSWRzID0gc2VsZWN0ZWRJZHMuZmlsdGVyKGlkID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhpZCkpXG4gICAgXG4gICAgLy8gSWYgRFMgaGFzIG1vcmUgc2VsZWN0ZWQgdGhhbiBvdXIgc3RhdGUsIGJ1dCB0aGUgZGlmZmVyZW5jZSBpcyBlbnRpcmVseSByZW1vdmVkIHJlY29yZHMsIGRvbid0IHN5bmNcbiAgICBpZiAoZmlsdGVyZWRTZWxlY3RlZElkcy5sZW5ndGggPT09IChzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwKSAmJiBzZWxlY3RlZElkcy5sZW5ndGggPiBmaWx0ZXJlZFNlbGVjdGVkSWRzLmxlbmd0aCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Utc2tpcHBpbmctc3luYy1kdWUtdG8tcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWFzb246ICdkcy1zZWxlY3Rpb24taW5jbHVkZXMtcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgZHNTZWxlY3RlZENvdW50OiBzZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgIGZpbHRlcmVkQ291bnQ6IGZpbHRlcmVkU2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICBjb21wb25lbnRTdGF0ZUNvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZVxuICAgICAgfSlcbiAgICAgIHJldHVybiAvLyBTa2lwIHN5bmNpbmcgLSB0aGUgbWlzbWF0Y2ggaXMgZHVlIHRvIHJlbW92ZWQgcmVjb3Jkc1xuICAgIH1cbiAgICBcbiAgICBsZXQgc2hvdWxkVXBkYXRlID0gZmFsc2VcbiAgICBpZiAoZmlsdGVyZWRTZWxlY3RlZElkcy5sZW5ndGggIT09IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoKSB7XG4gICAgICBzaG91bGRVcGRhdGUgPSB0cnVlXG4gICAgfSBlbHNlIHsgLy8gZXF1YWwgbGVuZ3RoXG4gICAgICBzaG91bGRVcGRhdGUgPSBmaWx0ZXJlZFNlbGVjdGVkSWRzLnNvbWUoaWQgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBzZWxlY3RlZFJlY29yZHMuZmluZCgoaXRlbSkgPT4gaXRlbS5nZXRJZCgpID09PSBpZClcbiAgICAgICAgcmV0dXJuIHRhcmdldCA9PSBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS11cGRhdGluZy1zZWxlY3RlZFJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIG9sZENvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBuZXdDb3VudDogZmlsdGVyZWREc1JlY29yZHMubGVuZ3RoLFxuICAgICAgICBub3RlOiAnZmlsdGVyZWQtb3V0LXJlbW92ZWQtcmVjb3JkcydcbiAgICAgIH0pXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS11cGRhdGluZy1zZWxlY3RlZFJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIG9sZENvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBuZXdDb3VudDogZmlsdGVyZWREc1JlY29yZHMubGVuZ3RoLFxuICAgICAgICBvbGRTZWxlY3RlZElkczogKHNlbGVjdGVkUmVjb3JkcyB8fCBbXSkubWFwKHIgPT4gci5nZXRJZCgpKS5zbGljZSgwLCA1KSxcbiAgICAgICAgbmV3U2VsZWN0ZWRJZHM6IGZpbHRlcmVkU2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgIG5vdGU6ICdmaWx0ZXJlZC1vdXQtcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgc2V0U2VsZWN0ZWRSZWNvcmRzKGZpbHRlcmVkRHNSZWNvcmRzKVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS1za2lwcGluZy11cGRhdGUnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogJ25vLWNoYW5nZS1kZXRlY3RlZCcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtvdXRwdXREUz8uaWQsIHNlbGVjdGVkUmVjb3Jkcywgd2lkZ2V0SWQsIHJlY29yZHMsIHJlbW92ZWRSZWNvcmRJZHNdKVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgdGhlIHRpcCBtZXNzYWdlIHNob3dpbmcgaG93IG1hbnkgZmVhdHVyZXMgYXJlIGRpc3BsYXllZC5cbiAgICogRmlsdGVycyBvdXQgcmVtb3ZlZCByZWNvcmRzIHRvIHNob3cgYWNjdXJhdGUgY291bnRzLlxuICAgKiBcbiAgICogQHJldHVybnMgRm9ybWF0dGVkIHN0cmluZyBsaWtlIFwiRmVhdHVyZXMgZGlzcGxheWVkOiAxMTggLyAxMjFcIlxuICAgKi9cbiAgY29uc3QgZ2V0VGlwTWVzc2FnZSA9ICgpID0+IHtcbiAgICBpZiAocXVlcnlEYXRhICYmIHF1ZXJ5RGF0YS5yZWNvcmRzKSB7XG4gICAgICAvLyBGaWx0ZXIgb3V0IHJlbW92ZWQgcmVjb3JkcyBmb3IgZGlzcGxheSBjb3VudFxuICAgICAgY29uc3QgZGlzcGxheWVkUmVjb3JkcyA9IHF1ZXJ5RGF0YS5yZWNvcmRzLmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKVxuICAgICAgY29uc3QgZGlzcGxheWVkQ291bnQgPSBkaXNwbGF5ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgXG4gICAgICAvLyBGT1JDRUQ6IEFsd2F5cyBTaW1wbGVMaXN0LCBzbyBhbHdheXMgdXNlIHNpbXBsZSBkaXNwbGF5IGZvcm1hdFxuICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogJHtkaXNwbGF5ZWRDb3VudH0gLyAke3Jlc3VsdENvdW50fWBcbiAgICAgIGNvbnN0IHsgcGFnZSA9IDEsIHBhZ2VTaXplID0gZGVmYXVsdFBhZ2VTaXplIH0gPSBxdWVyeURhdGFcbiAgICAgIGNvbnN0IGZyb20gPSAocGFnZSAtIDEpICogcGFnZVNpemUgKyAxXG4gICAgICBjb25zdCB0byA9IGZyb20gKyBwYWdlU2l6ZSAtIDFcbiAgICAgIGlmIChyZXN1bHRDb3VudCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogJHtmcm9tfSAtICR7TWF0aC5taW4odG8sIGRpc3BsYXllZENvdW50KX0gLyAke3Jlc3VsdENvdW50fWBcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtnZXRJMThuTWVzc2FnZSgnZmVhdHVyZXNEaXNwbGF5ZWQnKX06IDAgLSAwIC8gMGBcbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlcyBleHBhbmQvY29sbGFwc2Ugc3RhdGUgZm9yIGFsbCByZXN1bHQgaXRlbXMuXG4gICAqIFdoZW4gdG9nZ2xlZCwgYWxsIHJlc3VsdCBpdGVtcyB3aWxsIGJlIGV4cGFuZGVkIG9yIGNvbGxhcHNlZCB0b2dldGhlci5cbiAgICogVXBkYXRlcyBpbmRpdmlkdWFsIGl0ZW0gZXhwYW5zaW9uIHN0YXRlcyBpbiB0aGUgbWFwIHRvIG1haW50YWluIHN0YXRlIHdoZW4gaXRlbXMgYXJlIHJlbW92ZWQuXG4gICAqL1xuICBjb25zdCB0b2dnbGVFeHBhbmRBbGwgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0RXhwYW5kQWxsKHByZXYgPT4ge1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSAhcHJldlxuICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgIGV2ZW50OiAndG9nZ2xlRXhwYW5kQWxsLWNsaWNrZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcHJldmlvdXNWYWx1ZTogcHJldixcbiAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGFsbCBjdXJyZW50IGl0ZW1zIGluIHRoZSBtYXAgd2l0aCB0aGUgbmV3IGV4cGFuc2lvbiBzdGF0ZVxuICAgICAgc2V0SXRlbUV4cGFuZFN0YXRlcyhwcmV2TWFwID0+IHtcbiAgICAgICAgY29uc3QgbmV3TWFwID0gbmV3IE1hcChwcmV2TWFwKVxuICAgICAgICAvLyBHZXQgYWxsIGN1cnJlbnQgcmVjb3JkIElEcyBmcm9tIGZpbHRlcmVkIHJlY29yZHNcbiAgICAgICAgY29uc3QgYWxsUmVjb3JkSWRzID0gZmlsdGVyZWRSZWNvcmRzRm9yTGlzdC5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgIGFsbFJlY29yZElkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICBuZXdNYXAuc2V0KGlkLCBuZXdWYWx1ZSlcbiAgICAgICAgfSlcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpdGVtRXhwYW5kU3RhdGVzLXVwZGF0ZWQnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgIHVwZGF0ZWRDb3VudDogYWxsUmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgICByZWNvcmRJZHM6IGFsbFJlY29yZElkcy5zbGljZSgwLCAxMCksIC8vIExvZyBmaXJzdCAxMCBJRHNcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIG5ld01hcFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIG5ld1ZhbHVlXG4gICAgfSlcbiAgfSwgW3dpZGdldElkLCBmaWx0ZXJlZFJlY29yZHNGb3JMaXN0XSlcblxuICBjb25zdCByZXN1bHRVc2VPdXRwdXREYXRhU291cmNlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIEltbXV0YWJsZSh7XG4gICAgICBkYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWQsXG4gICAgICBtYWluRGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgfSlcbiAgfSwgW3F1ZXJ5SXRlbT8ub3V0cHV0RGF0YVNvdXJjZUlkXSlcblxuICBjb25zdCBoYW5kbGVFc2NhcGUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9LCBbXSlcblxuICAvLyBLZWVwIHJlY29yZHMgc2VsZWN0ZWQgYW5kIHpvb20gdG8gY2xpY2tlZCByZWNvcmRcbiAgLy8gUmVjb3JkcyByZW1haW4gc2VsZWN0ZWQgYXMgbG9uZyBhcyB0aGV5J3JlIGluIHRoZSByZXN1bHRzXG4gIC8vIENsaWNraW5nIGEgcmVjb3JkIGFsd2F5cyB6b29tcyB0byBpdCBvbiB0aGUgbWFwICh0aGlzIGJlaGF2aW9yIGlzIGFsd2F5cyBlbmFibGVkKVxuICBjb25zdCB0b2dnbGVTZWxlY3Rpb24gPSBSZWFjdC51c2VDYWxsYmFjaygoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHtcbiAgICAvLyBFbnN1cmUgdGhlIGNsaWNrZWQgcmVjb3JkIGlzIHNlbGVjdGVkIChpdCBzaG91bGQgYWxyZWFkeSBiZSwgYnV0IGVuc3VyZSBpdClcbiAgICBjb25zdCBzZWxlY3RlZERhdGFzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgPz8gW11cbiAgICBjb25zdCBzZWxlY3RlZElkcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICBjb25zdCBkYXRhSWQgPSBkYXRhLmdldElkKClcbiAgICBcbiAgICAvLyBJZiB0aGlzIHJlY29yZCBpc24ndCBhbHJlYWR5IHNlbGVjdGVkLCBhZGQgaXQgdG8gdGhlIHNlbGVjdGlvblxuICAgIGlmICghc2VsZWN0ZWRJZHMuaW5jbHVkZXMoZGF0YUlkKSkge1xuICAgICAgY29uc3QgdXBkYXRlZFNlbGVjdGVkRGF0YXMgPSBbLi4uc2VsZWN0ZWREYXRhcywgZGF0YV1cbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IHVwZGF0ZWRTZWxlY3RlZERhdGFzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBcbiAgICAgIC8vIFNlbGVjdCByZWNvcmRzIGFuZCBwdWJsaXNoIHNlbGVjdGlvbiBtZXNzYWdlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCB1cGRhdGVkU2VsZWN0ZWREYXRhcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLCB0cnVlKVxuICAgIH1cbiAgICBcbiAgICAvLyBab29tIHRvIHRoZSBjbGlja2VkIHJlY29yZCB3aXRoIHBhZGRpbmcgKGFsd2F5cyBlbmFibGVkIC0gdXNlciB3YW50cyB0byBrZWVwIHRoaXMgYmVoYXZpb3IpXG4gICAgLy8gQlVHLUdSQVBISUNTLTAwMTogWm9vbSBvcGVyYXRpb25zIGZhaWwgd2hlbiBncmFwaGljcyBsYXllciBpcyBkaXNhYmxlZFxuICAgIGlmICghbWFwVmlldyAmJiAhdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdCVUcnLCB7XG4gICAgICAgIGJ1Z0lkOiAnQlVHLUdSQVBISUNTLTAwMScsXG4gICAgICAgIGNhdGVnb3J5OiAnR1JBUEhJQ1MnLFxuICAgICAgICBldmVudDogJ3pvb20tb3BlcmF0aW9uLWZhaWxlZC1ncmFwaGljcy1sYXllci1kaXNhYmxlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcGVyYXRpb246ICdyZXN1bHQtaXRlbS1jbGljay16b29tJyxcbiAgICAgICAgcmVjb3JkSWQ6IGRhdGEuZ2V0SWQoKSxcbiAgICAgICAgZGVzY3JpcHRpb246ICdab29tIG9wZXJhdGlvbiBhdHRlbXB0ZWQgb24gcmVzdWx0IGl0ZW0gY2xpY2sgYnV0IG1hcFZpZXcgaXMgdW5hdmFpbGFibGUgYmVjYXVzZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGlzIGRpc2FibGVkJyxcbiAgICAgICAgd29ya2Fyb3VuZDogJ0VuYWJsZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGluIHdpZGdldCBzZXR0aW5ncycsXG4gICAgICAgIHRhcmdldFJlc29sdXRpb246ICdyMDE5LjAnXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICB6b29tVG9SZWNvcmRzKFtkYXRhXSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgLy8gU2lsZW50bHkgaGFuZGxlIGVycm9ycyAtIHpvb20gaXMgbm9uLWNyaXRpY2FsXG4gICAgfSlcbiAgfSwgW291dHB1dERTLCB3aWRnZXRJZCwgem9vbVRvUmVjb3Jkc10pXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSByZWNvcmQgZnJvbSB0aGUgcmVzdWx0cyBhbmQgc2VsZWN0aW9uLlxuICAgKiBJZiByZW1vdmluZyB0aGUgbGFzdCByZWNvcmQsIGF1dG9tYXRpY2FsbHkgY2xlYXJzIGFsbCByZXN1bHRzXG4gICAqIGJ5IGNhbGxpbmcgdGhlIHRyYXNoIGNhbiBsb2dpYyAoc2FtZSBhcyBjbGlja2luZyBDbGVhciBidXR0b24pLlxuICAgKiBUaGlzIGVuc3VyZXMgdGhlIFVJIGRvZXNuJ3Qgc2hvdyBcIkZlYXR1cmVzIGRpc3BsYXllZDogMCAvIDFcIiB3aGVuIGFsbCByZXN1bHRzIGFyZSByZW1vdmVkLlxuICAgKiBcbiAgICogQHBhcmFtIGRhdGEgLSBUaGUgZmVhdHVyZSBkYXRhIHJlY29yZCB0byByZW1vdmVcbiAgICovXG4gIGNvbnN0IHJlbW92ZVJlY29yZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4ge1xuICAgIGNvbnN0IGRhdGFJZCA9IGRhdGEuZ2V0SWQoKVxuICAgIGNvbnN0IGN1cnJlbnRFeHBhbmRBbGwgPSBleHBhbmRBbGxcbiAgICBcbiAgICAvLyBMb2cgaGFzaCBzdGF0ZSB3aGVuIHJlbW92aW5nIGluZGl2aWR1YWwgcmVjb3JkXG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgICBjb25zdCBoYXNoUGFyYW1zOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge31cbiAgICB1cmxQYXJhbXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgaGFzaFBhcmFtc1trZXldID0gdmFsdWVcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtc3RhcnRlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgY3VycmVudEV4cGFuZEFsbCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICBoYXNoOiBoYXNoLFxuICAgICAgaGFzaFBhcmFtczogaGFzaFBhcmFtcyxcbiAgICAgIGhhc2hQYXJhbXNDb3VudDogT2JqZWN0LmtleXMoaGFzaFBhcmFtcykubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBSZW1vdmUgZnJvbSBleHBhbnNpb24gc3RhdGVzIG1hcFxuICAgIHNldEl0ZW1FeHBhbmRTdGF0ZXMocHJldk1hcCA9PiB7XG4gICAgICBjb25zdCBuZXdNYXAgPSBuZXcgTWFwKHByZXZNYXApXG4gICAgICBuZXdNYXAuZGVsZXRlKGRhdGFJZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICBldmVudDogJ2l0ZW1FeHBhbmRTdGF0ZXMtY2xlYW5lZC11cCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgcmVtYWluaW5nQ291bnQ6IG5ld01hcC5zaXplLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gbmV3TWFwXG4gICAgfSlcbiAgICBcbiAgICAvLyBBZGQgdG8gcmVtb3ZlZCByZWNvcmRzIHNldFxuICAgIHNldFJlbW92ZWRSZWNvcmRJZHMocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpLmFkZChkYXRhSWQpXG4gICAgICBcbiAgICAgIC8vIElmIGFsbCByZWNvcmRzIGFyZSBub3cgcmVtb3ZlZCwgY2xlYXIgZXZlcnl0aGluZyBieSBjYWxsaW5nIHRyYXNoIGNhbiBsb2dpY1xuICAgICAgLy8gSU1QT1JUQU5UOiBDb21wYXJlIGFnYWluc3QgYWN0dWFsIGRpc3BsYXllZCByZWNvcmRzIGNvdW50LCBub3QgcmVzdWx0Q291bnRcbiAgICAgIC8vIHJlc3VsdENvdW50IG9ubHkgcmVmbGVjdHMgdGhlIGxhdGVzdCBxdWVyeSwgYnV0IGluIFwiQWRkIHRvXCIgbW9kZSB3ZSBkaXNwbGF5IGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgIC8vIFVzZSBxdWVyeURhdGEucmVjb3Jkcy5sZW5ndGggKGJlZm9yZSBmaWx0ZXJpbmcpIGFzIHRoZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIGRpc3BsYXllZCByZWNvcmRzXG4gICAgICAvLyBGYWxsIGJhY2sgdG8gYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCBpZiBpbiBhY2N1bXVsYXRpb24gbW9kZSwgb3IgcmVzdWx0Q291bnQgYXMgbGFzdCByZXNvcnRcbiAgICAgIGxldCBjdXJyZW50RGlzcGxheWVkQ291bnQgPSBxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICBpZiAoY3VycmVudERpc3BsYXllZENvdW50ID09PSAwKSB7XG4gICAgICAgIC8vIElmIHF1ZXJ5RGF0YSBkb2Vzbid0IGhhdmUgcmVjb3JkcyB5ZXQsIGNoZWNrIGlmIHdlJ3JlIGluIGFjY3VtdWxhdGlvbiBtb2RlXG4gICAgICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICAgIGlmIChpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY3VycmVudERpc3BsYXllZENvdW50ID0gYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIExhc3QgcmVzb3J0OiB1c2UgcmVzdWx0Q291bnQgKGJ1dCB0aGlzIG1pZ2h0IGJlIGluY29ycmVjdCBpbiBhY2N1bXVsYXRpb24gbW9kZSlcbiAgICAgICAgICBjdXJyZW50RGlzcGxheWVkQ291bnQgPSByZXN1bHRDb3VudFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1jaGVja2luZy1hbGwtcmVtb3ZlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzU2l6ZTogbmV3U2V0LnNpemUsXG4gICAgICAgIGN1cnJlbnREaXNwbGF5ZWRDb3VudCxcbiAgICAgICAgcmVzdWx0Q291bnQsXG4gICAgICAgIHF1ZXJ5RGF0YVJlY29yZHNDb3VudDogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICB3aWxsTmF2aWdhdGVCYWNrOiBuZXdTZXQuc2l6ZSA9PT0gY3VycmVudERpc3BsYXllZENvdW50ICYmIGN1cnJlbnREaXNwbGF5ZWRDb3VudCA+IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKG5ld1NldC5zaXplID09PSBjdXJyZW50RGlzcGxheWVkQ291bnQgJiYgY3VycmVudERpc3BsYXllZENvdW50ID4gMCkge1xuICAgICAgICAvLyBBbGwgZGlzcGxheWVkIHJlY29yZHMgcmVtb3ZlZCAtIGNsZWFyIGV2ZXJ5dGhpbmcgKHNhbWUgYXMgY2xpY2tpbmcgdHJhc2ggY2FuIGJ1dHRvbilcbiAgICAgICAgb25OYXZCYWNrKHRydWUpXG4gICAgICAgIHJldHVybiBuZXdTZXRcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIG5ld1NldFxuICAgIH0pXG4gICAgXG4gICAgLy8gVXBkYXRlIHF1ZXJ5RGF0YSB0byBmaWx0ZXIgb3V0IHRoZSByZW1vdmVkIHJlY29yZFxuICAgIHNldFF1ZXJ5RGF0YShwcmV2RGF0YSA9PiB7XG4gICAgICBpZiAoIXByZXZEYXRhKSByZXR1cm4gcHJldkRhdGFcbiAgICAgIGNvbnN0IGZpbHRlcmVkUmVjb3JkcyA9IHByZXZEYXRhLnJlY29yZHMuZmlsdGVyKChyZWNvcmQ6IERhdGFSZWNvcmQpID0+IHJlY29yZC5nZXRJZCgpICE9PSBkYXRhSWQpXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5wcmV2RGF0YSxcbiAgICAgICAgcmVjb3JkczogZmlsdGVyZWRSZWNvcmRzXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBBTFdBWVMgcmVtb3ZlIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMgKHNhbWUgYXMgUmVtb3ZlIG1vZGUpXG4gICAgLy8gVGhpcyBwcm9wZXJseSByZW1vdmVzIHJlY29yZHMgZnJvbSB0aGUgbWFwIHNlbGVjdGlvbiwgaGFuZGxpbmcgc2luZ2xlIG9yIG11bHRpcGxlIG9yaWdpbiBzb3VyY2VzXG4gICAgLy8gQWxzbyByZW1vdmVzIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gICAgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKFxuICAgICAgd2lkZ2V0SWQsIFxuICAgICAgW2RhdGFdLCBcbiAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgZ3JhcGhpY3NMYXllclxuICAgIClcbiAgICBcbiAgICAvLyBESUFHTk9TVElDIExPR0dJTkc6IEZ1bGwgc3RhdGUgQkVGT1JFIHJlbW92YWxcbiAgICBjb25zdCBvdXRwdXREU1NlbGVjdGVkQmVmb3JlID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgIGNvbnN0IG91dHB1dERTU2VsZWN0ZWRJZHNCZWZvcmUgPSBvdXRwdXREU1NlbGVjdGVkQmVmb3JlLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICBjb25zdCBhY2N1bXVsYXRlZFJlY29yZHNJZHNCZWZvcmUgPSBhY2N1bXVsYXRlZFJlY29yZHM/Lm1hcChyID0+IHIuZ2V0SWQoKSkgfHwgW11cbiAgICBjb25zdCBncmFwaGljc0xheWVySWRzQmVmb3JlID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lm1hcChnID0+IGcuYXR0cmlidXRlcz8uT0JKRUNUSUQgfHwgZy5hdHRyaWJ1dGVzPy5pZCB8fCBnLmF0dHJpYnV0ZXM/LkZJRCkgfHwgW11cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1iZWZvcmUtc3RhdGUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudDogb3V0cHV0RFNTZWxlY3RlZEJlZm9yZS5sZW5ndGgsXG4gICAgICBvdXRwdXREU1NlbGVjdGVkSWRzOiBvdXRwdXREU1NlbGVjdGVkSWRzQmVmb3JlLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNJZHM6IGFjY3VtdWxhdGVkUmVjb3Jkc0lkc0JlZm9yZSxcbiAgICAgIGdyYXBoaWNzTGF5ZXJDb3VudDogZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgZ3JhcGhpY3NMYXllcklkczogZ3JhcGhpY3NMYXllcklkc0JlZm9yZSxcbiAgICAgIGFsbFNvdXJjZXNNYXRjaDogb3V0cHV0RFNTZWxlY3RlZElkc0JlZm9yZS5sZW5ndGggPT09IGFjY3VtdWxhdGVkUmVjb3Jkc0lkc0JlZm9yZS5sZW5ndGggJiYgXG4gICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRJZHNCZWZvcmUubGVuZ3RoID09PSBncmFwaGljc0xheWVySWRzQmVmb3JlLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShvdXRwdXREU1NlbGVjdGVkSWRzQmVmb3JlLnNvcnQoKSkgPT09IEpTT04uc3RyaW5naWZ5KGFjY3VtdWxhdGVkUmVjb3Jkc0lkc0JlZm9yZS5zb3J0KCkpLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgb3V0cHV0RFMgc2VsZWN0aW9uXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRhcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpID8/IFtdXG4gICAgY29uc3QgdXBkYXRlZFNlbGVjdGVkRGF0YXMgPSBzZWxlY3RlZERhdGFzLmZpbHRlcihyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkgIT09IGRhdGFJZClcbiAgICBjb25zdCByZWNvcmRJZHMgPSB1cGRhdGVkU2VsZWN0ZWREYXRhcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgIFxuICAgIC8vIERFQlVHOiBMb2cgc3RhdGUgZnJhZ21lbnRhdGlvbiBhZnRlciByZW1vdmFsXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1zdGF0ZS1mcmFnbWVudGF0aW9uLWRlYnVnJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSArIDEsIC8vICsxIGJlY2F1c2Ugd2UganVzdCBhZGRlZCBpdFxuICAgICAgb3V0cHV0RFNTZWxlY3RlZEJlZm9yZVJlbW92YWw6IHNlbGVjdGVkRGF0YXMubGVuZ3RoLFxuICAgICAgb3V0cHV0RFNTZWxlY3RlZEFmdGVyUmVtb3ZhbDogdXBkYXRlZFNlbGVjdGVkRGF0YXMubGVuZ3RoLFxuICAgICAgcmVjb3Jkc1Byb3BDb3VudDogcmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBxdWVyeURhdGFSZWNvcmRzQ291bnQ6IHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgbm90ZTogJ3ZlcmlmeS1pZi1yZWNvcmRzUHJvcC1jb250YWlucy1yZW1vdmVkLXJlY29yZCcsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFVwZGF0ZSBvdXRwdXREUyBzZWxlY3Rpb25cbiAgICBpZiAodHlwZW9mIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgdXBkYXRlZFNlbGVjdGVkRGF0YXMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICB9XG4gICAgXG4gICAgLy8gSU1QT1JUQU5UOiBQdWJsaXNoIGN1c3RvbSBldmVudCBzbyB3aWRnZXQgY2FuIHVwZGF0ZSBsYXN0U2VsZWN0aW9uIHN0YXRlXG4gICAgLy8gVGhpcyBlbnN1cmVzIHJlc3RvcmF0aW9uIHJlc3RvcmVzIHRoZSBjb3JyZWN0ICh1cGRhdGVkKSBjb3VudFxuICAgIGNvbnN0IG9yaWdpbkRTID0gKG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UpLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgY29uc3QgZGF0YVNvdXJjZUlkID0gb3JpZ2luRFM/LmlkXG4gICAgY29uc3Qgc2VsZWN0aW9uRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3F1ZXJ5c2ltcGxlLXNlbGVjdGlvbi1jaGFuZ2VkJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZWNvcmRJZHMsIC8vIFVwZGF0ZWQgcmVjb3JkIElEcyAod2l0aCByZW1vdmVkIHJlY29yZCBleGNsdWRlZClcbiAgICAgICAgZGF0YVNvdXJjZUlkLFxuICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChzZWxlY3Rpb25FdmVudClcbiAgICBcbiAgICAvLyBESUFHTk9TVElDIExPR0dJTkc6IEZ1bGwgc3RhdGUgQUZURVIgcmVtb3ZhbCAoYmVmb3JlIHN5bmMpXG4gICAgY29uc3Qgb3V0cHV0RFNTZWxlY3RlZEFmdGVyID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgIGNvbnN0IG91dHB1dERTU2VsZWN0ZWRJZHNBZnRlciA9IG91dHB1dERTU2VsZWN0ZWRBZnRlci5tYXAociA9PiByLmdldElkKCkpXG4gICAgY29uc3QgZ3JhcGhpY3NMYXllcklkc0FmdGVyID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lm1hcChnID0+IGcuYXR0cmlidXRlcz8uT0JKRUNUSUQgfHwgZy5hdHRyaWJ1dGVzPy5pZCB8fCBnLmF0dHJpYnV0ZXM/LkZJRCkgfHwgW11cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1hZnRlci1zdGF0ZS1iZWZvcmUtc3luYycsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgb3V0cHV0RFNTZWxlY3RlZENvdW50OiBvdXRwdXREU1NlbGVjdGVkQWZ0ZXIubGVuZ3RoLFxuICAgICAgb3V0cHV0RFNTZWxlY3RlZElkczogb3V0cHV0RFNTZWxlY3RlZElkc0FmdGVyLFxuICAgICAgZ3JhcGhpY3NMYXllckNvdW50OiBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBncmFwaGljc0xheWVySWRzOiBncmFwaGljc0xheWVySWRzQWZ0ZXIsXG4gICAgICByZW1vdmVkRnJvbU91dHB1dERTOiBvdXRwdXREU1NlbGVjdGVkSWRzQWZ0ZXIubGVuZ3RoIDwgb3V0cHV0RFNTZWxlY3RlZElkc0JlZm9yZS5sZW5ndGgsXG4gICAgICByZW1vdmVkRnJvbUdyYXBoaWNzOiBncmFwaGljc0xheWVySWRzQWZ0ZXIubGVuZ3RoIDwgZ3JhcGhpY3NMYXllcklkc0JlZm9yZS5sZW5ndGgsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC42OCk6IFN5bmMgYWNjdW11bGF0ZWRSZWNvcmRzIHdpdGggb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aFxuICAgIC8vIFRoaXMgZW5zdXJlcyBpbW1lZGlhdGUgc3luYyB3aGVuIFggYnV0dG9uIGlzIGNsaWNrZWQgLSBubyBsYXp5IHN5bmNpbmdcbiAgICAvLyBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBpcyB0aGUgYXV0aG9yaXRhdGl2ZSBzb3VyY2UgdGhhdCBzdGF5cyBpbiBzeW5jIHdpdGggcmVtb3ZhbHNcbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgaWYgKGlzQWNjdW11bGF0aW9uTW9kZSAmJiBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgLy8gR2V0IHRoZSBhY3R1YWwgc2VsZWN0ZWQgcmVjb3JkcyBmcm9tIG91dHB1dERTIChzaW5nbGUgc291cmNlIG9mIHRydXRoKVxuICAgICAgLy8gVGhpcyBpcyBjYWxsZWQgQUZURVIgb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzKCkgYWJvdmUsIHNvIGl0IHJlZmxlY3RzIHRoZSByZW1vdmFsXG4gICAgICBjb25zdCBhY3R1YWxseVNlbGVjdGVkUmVjb3JkcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW11cbiAgICAgIFxuICAgICAgLy8gU3luYyBhY2N1bXVsYXRlZFJlY29yZHMgd2l0aCB3aGF0J3MgYWN0dWFsbHkgc2VsZWN0ZWRcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyByZW1vdmVkIHJlY29yZHMgYXJlIGltbWVkaWF0ZWx5IGV4Y2x1ZGVkIGZyb20gYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIEJ1aWxkIGEgU2V0IG9mIGFjdHVhbGx5IHNlbGVjdGVkIElEcyBmb3IgZmFzdCBsb29rdXBcbiAgICAgICAgY29uc3QgYWN0dWFsbHlTZWxlY3RlZElkcyA9IG5ldyBTZXQoYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKSlcbiAgICAgICAgXG4gICAgICAgIC8vIEZpbHRlciBhY2N1bXVsYXRlZFJlY29yZHMgdG8gb25seSBpbmNsdWRlIHJlY29yZHMgdGhhdCBhcmUgYWN0dWFsbHkgc2VsZWN0ZWRcbiAgICAgICAgY29uc3Qgc3luY2VkUmVjb3JkcyA9IGFjY3VtdWxhdGVkUmVjb3Jkcy5maWx0ZXIocmVjb3JkID0+IFxuICAgICAgICAgIGFjdHVhbGx5U2VsZWN0ZWRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzeW5jZWRSZWNvcmRzSWRzID0gc3luY2VkUmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3gtYnV0dG9uLWltbWVkaWF0ZS1zeW5jLXdpdGgtb3V0cHV0ZHMnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QmVmb3JlOiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0lkc0JlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzSWRzQmVmb3JlLFxuICAgICAgICAgIGFjdHVhbGx5U2VsZWN0ZWRDb3VudDogYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIGFjdHVhbGx5U2VsZWN0ZWRJZHM6IG91dHB1dERTU2VsZWN0ZWRJZHNBZnRlcixcbiAgICAgICAgICBzeW5jZWRSZWNvcmRzQ291bnQ6IHN5bmNlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIHN5bmNlZFJlY29yZHNJZHM6IHN5bmNlZFJlY29yZHNJZHMsXG4gICAgICAgICAgcmVjb3Jkc1JlbW92ZWQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggLSBzeW5jZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICByZW1vdmVkSWRzOiBhY2N1bXVsYXRlZFJlY29yZHNJZHNCZWZvcmUuZmlsdGVyKGlkID0+ICFzeW5jZWRSZWNvcmRzSWRzLmluY2x1ZGVzKGlkKSksXG4gICAgICAgICAgbm90ZTogJ2ltbWVkaWF0ZS1zeW5jLXdpdGgtb3V0cHV0ZHMtZ2V0U2VsZWN0ZWRSZWNvcmRzJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBhY2N1bXVsYXRlZFJlY29yZHMgdG8gbWF0Y2ggcmVhbGl0eSAoaW1tZWRpYXRlIHN5bmMsIG5vdCBsYXp5KVxuICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShzeW5jZWRSZWNvcmRzKVxuICAgICAgICBcbiAgICAgICAgLy8gRElBR05PU1RJQyBMT0dHSU5HOiBGdWxsIHN0YXRlIEFGVEVSIHN5bmNcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmFsLWFmdGVyLXN5bmMtc3RhdGUnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QWZ0ZXI6IHN5bmNlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0lkc0FmdGVyOiBzeW5jZWRSZWNvcmRzSWRzLFxuICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudDogb3V0cHV0RFNTZWxlY3RlZEFmdGVyLmxlbmd0aCxcbiAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkSWRzOiBvdXRwdXREU1NlbGVjdGVkSWRzQWZ0ZXIsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllckNvdW50OiBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllcklkczogZ3JhcGhpY3NMYXllcklkc0FmdGVyLFxuICAgICAgICAgIGFsbFNvdXJjZXNNYXRjaDogc3luY2VkUmVjb3Jkc0lkcy5sZW5ndGggPT09IG91dHB1dERTU2VsZWN0ZWRJZHNBZnRlci5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bmNlZFJlY29yZHNJZHMubGVuZ3RoID09PSBncmFwaGljc0xheWVySWRzQWZ0ZXIubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShzeW5jZWRSZWNvcmRzSWRzLnNvcnQoKSkgPT09IEpTT04uc3RyaW5naWZ5KG91dHB1dERTU2VsZWN0ZWRJZHNBZnRlci5zb3J0KCkpLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmIChhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIElmIGFjY3VtdWxhdGVkUmVjb3JkcyBpcyBlbXB0eSBidXQgb3V0cHV0RFMgaGFzIHNlbGVjdGlvbiwgc3luYyBpdFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3gtYnV0dG9uLXN5bmNpbmctZW1wdHktYWNjdW11bGF0ZWQtd2l0aC1vdXRwdXRkcycsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZENvdW50OiBhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgbm90ZTogJ2FjY3VtdWxhdGVkUmVjb3Jkcy13YXMtZW1wdHktc3luY2luZy1mcm9tLW91dHB1dGRzJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCb3RoIGFyZSBlbXB0eSAtIGVuc3VyZSBhY2N1bXVsYXRlZFJlY29yZHMgaXMgZW1wdHlcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1ib3RoLWVtcHR5LXN5bmNpbmcnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICAgIG5vdGU6ICdib3RoLWFjY3VtdWxhdGVkUmVjb3Jkcy1hbmQtb3V0cHV0ZHMtYXJlLWVtcHR5JyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoW10pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIExvZyBhZnRlciByZW1vdmVSZWNvcmQgY29tcGxldGVzIHRvIGNoZWNrIGlmIGV4cGFuZEFsbCBjaGFuZ2VkXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtY29tcGxldGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICBleHBhbmRBbGxCZWZvcmU6IGN1cnJlbnRFeHBhbmRBbGwsXG4gICAgICAgIGV4cGFuZEFsbEFmdGVyOiBleHBhbmRBbGwsXG4gICAgICAgIGV4cGFuZEFsbENoYW5nZWQ6IGN1cnJlbnRFeHBhbmRBbGwgIT09IGV4cGFuZEFsbCxcbiAgICAgICAgZXhwYW5kQnlEZWZhdWx0UHJvcDogZXhwYW5kQWxsLCAvLyBXaGF0IHdpbGwgYmUgcGFzc2VkIHRvIFNpbXBsZUxpc3RcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0sIDApXG4gIH0sIFtvdXRwdXREUywgd2lkZ2V0SWQsIHJlc3VsdENvdW50LCBvbk5hdkJhY2ssIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCBxdWVyeUl0ZW0uY29uZmlnSWQsIGV4cGFuZEFsbF0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0IGgtMTAwJyBjc3M9e3Jlc3VsdFN0eWxlfSByb2xlPSdsaXN0Ym94JyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfT5cbiAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IHVzZURhdGFTb3VyY2U9e3Jlc3VsdFVzZU91dHB1dERhdGFTb3VyY2V9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlfSAvPlxuICAgICAgXG4gICAgICB7LyogRXJyb3IgTWVzc2FnZSAqL31cbiAgICAgIHtzZWxlY3Rpb25FcnJvciAmJiAoXG4gICAgICAgIDxkaXYgY3NzPXtjc3NgcGFkZGluZzogMCAxNnB4OyBtYXJnaW4tdG9wOiA4cHg7YH0+XG4gICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgIGVycm9yPXtzZWxlY3Rpb25FcnJvcn0gXG4gICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFNlbGVjdGlvbkVycm9yKG51bGwpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdF9faGVhZGVyIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgbXgtNCc+XG4gICAgICAgIDxCdXR0b24gYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2JhY2snKX0gcmVmPXtiYWNrQnRuUmVmfSBjbGFzc05hbWU9J3AtMCBtci0yJyBzaXplPSdzbScgdmFyaWFudD0ndGV4dCcgY29sb3I9J2luaGVyaXQnIGljb24gb25DbGljaz17KCkgPT4geyBvbk5hdkJhY2soKSB9fT5cbiAgICAgICAgICA8QXJyb3dMZWZ0T3V0bGluZWQgYXV0b0ZsaXAvPlxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAge2N1cnJlbnRJdGVtLnJlc3VsdHNMYWJlbCA/PyBnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfVxuICAgICAgICB7KFxuICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0gcGxhY2VtZW50PSdib3R0b20nPlxuICAgICAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT0nbWwtYXV0bycgaWNvbiBzaXplPSdzbScgdmFyaWFudD0ndGV4dCcgY29sb3I9J2luaGVyaXQnIG9uQ2xpY2s9e2NsZWFyUmVzdWx0c30gYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9PlxuICAgICAgICAgICAgICAgIDxJY29uIGljb249e2ljb25NYXAudG9vbERlbGV0ZX0gLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICB7LyogRGF0YSBhY3Rpb25zIGZpbHRlcmVkIHZpYSBtYW5pZmVzdC5qc29uIGV4Y2x1ZGVEYXRhQWN0aW9ucyAtIFNob3cgb24gTWFwLCBTZWxlY3QgTG9hZGVkLCBhbmQgQ2xlYXIgU2VsZWN0aW9uIGFyZSBleGNsdWRlZC5cbiAgICAgICAgICAgICAgICBDdXN0b20gXCJBZGQgdG8gTWFwXCIgYWN0aW9uIGlzIHByb3ZpZGVkIHZpYSBleHRyYUFjdGlvbnMgYW5kIHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy4gKi99XG4gICAgICAgICAgICB7ZW5hYmxlRGF0YUFjdGlvbiAmJiBvdXRwdXREUyAmJiAoXG4gICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYHdpZHRoOiAxcHg7IGhlaWdodDogMTZweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItaW5wdXQpO2B9PjwvZGl2PlxuICAgICAgICAgICAgICAgIDxEYXRhQWN0aW9uTGlzdFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICAgICAgZGF0YVNldHM9e2FjdGlvbkRhdGFTZXRzfVxuICAgICAgICAgICAgICAgICAgbGlzdFN0eWxlPXtEYXRhQWN0aW9uTGlzdFN0eWxlLkRyb3Bkb3dufVxuICAgICAgICAgICAgICAgICAgYnV0dG9uU2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICBidXR0b25UeXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgIGV4dHJhQWN0aW9ucz17ZXh0cmFBY3Rpb25zfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHQtY29udGFpbmVyIG10LTEnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0LWluZm8gbWItMiBweC00IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWJldHdlZW4nIHJvbGU9J2FsZXJ0JyBhcmlhLWxpdmU9J3BvbGl0ZSc+XG4gICAgICAgICAgPHNwYW4+e2dldFRpcE1lc3NhZ2UoKX08L3NwYW4+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2V4cGFuZEFsbCA/IGdldEkxOG5NZXNzYWdlKCdjb2xsYXBzZUFsbCcpIDogZ2V0STE4bk1lc3NhZ2UoJ2V4cGFuZEFsbCcpfSBwbGFjZW1lbnQ9J3RvcCc+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgb25DbGljaz17dG9nZ2xlRXhwYW5kQWxsfVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2V4cGFuZEFsbCA/IGdldEkxOG5NZXNzYWdlKCdjb2xsYXBzZUFsbCcpIDogZ2V0STE4bk1lc3NhZ2UoJ2V4cGFuZEFsbCcpfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2V4cGFuZEFsbCA/IDxDb2xsYXBzZUFsbE91dGxpbmVkIC8+IDogPEV4cGFuZEFsbE91dGxpbmVkIC8+fVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHsvKiBGT1JDRUQ6IEFsd2F5cyBTaW1wbGVMaXN0IC0gTGF6eUxvYWQgYW5kIE11bHRpUGFnZSByZW1vdmVkICovfVxuICAgICAgICB7cmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICA8U2ltcGxlTGlzdFxuICAgICAgICAgICAga2V5PSdzaW1wbGUnXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW09e3F1ZXJ5SXRlbX1cbiAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREUyBhcyBhbnl9XG4gICAgICAgICAgICByZWNvcmRzPXtmaWx0ZXJlZFJlY29yZHNGb3JMaXN0fVxuICAgICAgICAgICAgZGlyZWN0aW9uPXtkaXJlY3Rpb259XG4gICAgICAgICAgICBvbkVzY2FwZT17aGFuZGxlRXNjYXBlfVxuICAgICAgICAgICAgb25TZWxlY3RDaGFuZ2U9e3RvZ2dsZVNlbGVjdGlvbn1cbiAgICAgICAgICAgIG9uUmVtb3ZlPXtyZW1vdmVSZWNvcmR9XG4gICAgICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEFsbH1cbiAgICAgICAgICAgIGl0ZW1FeHBhbmRTdGF0ZXM9e2l0ZW1FeHBhbmRTdGF0ZXN9XG4gICAgICAgICAgICByZW1vdmVkUmVjb3JkSWRzPXtyZW1vdmVkUmVjb3JkSWRzfVxuICAgICAgICAgICAgb25SZW5kZXJEb25lPXtoYW5kbGVSZW5kZXJEb25lfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgUmVhY3QgfSBmcm9tICdqaW11LWNvcmUnXG5cbmV4cG9ydCBjb25zdCBRdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxRdWVyeVRhc2tDb250ZXh0UHJvcHM+KHtcbiAgcmVzZXRTeW1ib2w6IG51bGxcbn0pXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrQ29udGV4dFByb3BzIHtcbiAgcmVzZXRTeW1ib2w/OiBzeW1ib2wgLy8gdXNlZCB0byB0cmlnZ2VyIHJlc2V0IG9wZXJhdGlvblxufVxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBjbGFzc05hbWVzLFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgSU1TcWxFeHByZXNzaW9uLFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIFJlYWN0UmVkdXgsXG4gIGhvb2tzLFxuICBEYXRhU291cmNlTWFuYWdlcixcbiAgdHlwZSBTcWxRdWVyeVBhcmFtcyxcbiAgSW1tdXRhYmxlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgVG9vbHRpcCwgQ2hlY2tib3ggfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgU3FsRXhwcmVzc2lvblJ1bnRpbWUsIGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uIH0gZnJvbSAnamltdS11aS9iYXNpYy9zcWwtZXhwcmVzc2lvbi1ydW50aW1lJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIFNwYXRpYWxSZWxhdGlvbiwgdHlwZSBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcbmltcG9ydCB7IHNhbml0aXplU3FsRXhwcmVzc2lvbiwgaXNRdWVyeUlucHV0VmFsaWQgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBRdWVyeVRhc2tTcGF0aWFsRm9ybSB9IGZyb20gJy4vcXVlcnktdGFzay1zcGF0aWFsLWZvcm0nXG5pbXBvcnQgeyB1c2VBdXRvSGVpZ2h0IH0gZnJvbSAnLi91c2VBdXRvSGVpZ2h0J1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXG5pbXBvcnQgeyBJbmZvT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvJ1xuaW1wb3J0IHsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIH0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5cbi8qKlxuICogRXZlbnQtRHJpdmVuIEhhc2ggUGFyYW1ldGVyIEV4ZWN1dGlvbiBQYXR0ZXJuXG4gKiBcbiAqIENSSVRJQ0FMOiBUaGlzIGlzIHRoZSBPTkxZIGV4ZWN1dGlvbiBwYXRoIGZvciBoYXNoLXRyaWdnZXJlZCBxdWVyaWVzLlxuICogXG4gKiBGbG93OlxuICogMS4gSGFzaCB2YWx1ZSBzZXQgaW4gc3RhdGUgYXMgU1RSSU5HIChlLmcuLCBcIjU1Njg5MDAwMDBcIilcbiAqIDIuIERPTSBtYW5pcHVsYXRpb24gdHJpZ2dlcnMgU3FsRXhwcmVzc2lvblJ1bnRpbWUgdG8gcHJvY2VzcyB0aGUgdmFsdWVcbiAqIDMuIFNxbEV4cHJlc3Npb25SdW50aW1lIGNvbnZlcnRzIHN0cmluZyDihpIgYXJyYXkgZm9ybWF0IFt7dmFsdWU6IFwiLi4uXCIsIGxhYmVsOiBcIi4uLlwifV1cbiAqIDQuIGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgZGV0ZWN0cyBjb252ZXJzaW9uIOKGkiBkaXNwYXRjaGVzIFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5UXG4gKiA1LiBFdmVudCBsaXN0ZW5lciBpbiBxdWVyeS10YXNrLnRzeCBleGVjdXRlcyBxdWVyeSAoT1IgaGFuZGxlU3FsRXhwck9iakNoYW5nZSBjYWxscyBhcHBseVF1ZXJ5IGRpcmVjdGx5KVxuICogXG4gKiBXSFkgVEhJUyBQQVRURVJOIEVYSVNUUzpcbiAqIC0gU3FsRXhwcmVzc2lvblJ1bnRpbWUgT05MWSBmaXJlcyBvbkNoYW5nZSB3aGVuIHZhbHVlIGlzIGNvbnZlcnRlZCB0byBhcnJheSBmb3JtYXRcbiAqIC0gUXVlcmllcyBSRVFVSVJFIGFycmF5IGZvcm1hdCAtIGV4ZWN1dGluZyB3aXRoIHN0cmluZyBmb3JtYXQgcmV0dXJucyB1bmZpbHRlcmVkIHJlc3VsdHMgKDEwMDAgcmVjb3JkcylcbiAqIC0gV2UgTVVTVCB3YWl0IGZvciBjb252ZXJzaW9uIGJlZm9yZSBleGVjdXRpbmcgcXVlcmllc1xuICogXG4gKiBBTlRJLVBBVFRFUk4gVE8gQVZPSUQ6XG4gKiAtIERPIE5PVCBhZGQgdXNlRWZmZWN0IGhvb2tzIHRoYXQgZXhlY3V0ZSBxdWVyaWVzIGJhc2VkIG9uIHN0cmluZyB2YWx1ZXNcbiAqIC0gRE8gTk9UIGV4ZWN1dGUgcXVlcmllcyBiZWZvcmUgUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlQgaXMgZGlzcGF0Y2hlZFxuICogLSBETyBOT1QgY2lyY3VtdmVudCB0aGUgZXZlbnQtZHJpdmVuIGZsb3cgd2l0aCBlYXJseSBleGVjdXRpb24gY2hlY2tzXG4gKiBcbiAqIElmIHlvdSBuZWVkIHRvIGV4ZWN1dGUgYSBxdWVyeSwgd2FpdCBmb3IgdGhlIGNvbnZlcnNpb24gZXZlbnQgb3IgY2FsbCBhcHBseVF1ZXJ5KClcbiAqIEFGVEVSIGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgaGFzIGRldGVjdGVkIHRoZSBjb252ZXJzaW9uIGFuZCBkaXNwYXRjaGVkIHRoZSBldmVudC5cbiAqL1xuY29uc3QgUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlQgPSAncXVlcnlzaW1wbGUtaGFzaC12YWx1ZS1jb252ZXJ0ZWQnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrSXRlbVByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBjb25maWdJZDogc3RyaW5nXG4gIHNwYXRpYWxGaWx0ZXJFbmFibGVkOiBib29sZWFuXG4gIGRhdGFzb3VyY2VSZWFkeTogYm9vbGVhblxuICBvdXRwdXREUz86IERhdGFTb3VyY2VcbiAgb25Gb3JtU3VibWl0OiAoc3FsRXhwck9iajogSU1TcWxFeHByZXNzaW9uLCBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqLCB6b29tVG9TZWxlY3RlZD86IGJvb2xlYW4pID0+IHZvaWRcbiAgZGF0YUFjdGlvbkZpbHRlcj86IFNxbFF1ZXJ5UGFyYW1zXG4gIGluaXRpYWxJbnB1dFZhbHVlPzogc3RyaW5nXG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gIHF1ZXJ5SXRlbVNob3J0SWQ/OiBzdHJpbmdcbiAgYWN0aXZlVGFiPzogJ3F1ZXJ5JyB8ICdyZXN1bHRzJ1xuICBvblRhYkNoYW5nZT86ICh0YWI6ICdxdWVyeScgfCAncmVzdWx0cycpID0+IHZvaWRcbn1cblxuY29uc3QgZ2V0Rm9ybVN0eWxlID0gKGlzQXV0b0hlaWdodDogYm9vbGVhbikgPT4ge1xuICByZXR1cm4gY3NzYFxuICAgIGZsZXg6IDEgMSBhdXRvO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBtaW4taGVpZ2h0OiAwO1xuICAgIC5mb3JtLXRpdGxlIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlci10ZXh0KTtcbiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICBmb250LXNpemU6IDAuODEyNXJlbTtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICBtYXJnaW4tdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgfVxuICAgIC5xdWVyeS1mb3JtX19jb250ZW50IHtcbiAgICAgIGZsZXg6IDEgMSAke2lzQXV0b0hlaWdodCA/ICdhdXRvJyA6ICdhdXRvJ307XG4gICAgICBtYXgtaGVpZ2h0OiAke2lzQXV0b0hlaWdodCA/ICc2MS44dmgnIDogJ25vbmUnfTtcbiAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgcGFkZGluZy1ib3R0b206IDA7XG4gICAgfVxuICAgIC5xdWVyeS1mb3JtX19hY3Rpb25zIHtcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgIHBhZGRpbmctdG9wOiA0cHg7XG4gICAgfVxuICBgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tGb3JtIChwcm9wczogUXVlcnlUYXNrSXRlbVByb3BzKSB7XG4gIGNvbnN0IHsgd2lkZ2V0SWQsIGNvbmZpZ0lkLCBvdXRwdXREUywgc3BhdGlhbEZpbHRlckVuYWJsZWQsIGRhdGFzb3VyY2VSZWFkeSwgb25Gb3JtU3VibWl0LCBkYXRhQWN0aW9uRmlsdGVyLCBpbml0aWFsSW5wdXRWYWx1ZSwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcXVlcnlJdGVtU2hvcnRJZCwgYWN0aXZlVGFiLCBvblRhYkNoYW5nZSB9ID0gcHJvcHNcbiAgY29uc3QgcHJlRGF0YUFjdGlvbkZpbHRlciA9IGhvb2tzLnVzZVByZXZpb3VzKGRhdGFBY3Rpb25GaWx0ZXIpXG4gIGNvbnN0IHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+ID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnF1ZXJ5SXRlbXMuZmluZChpdGVtID0+IGl0ZW0uY29uZmlnSWQgPT09IGNvbmZpZ0lkKVxuICB9KVxuICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBbcmVzZXRTeW1ib2wsIHNldFJlc2V0U3ltYm9sXSA9IFJlYWN0LnVzZVN0YXRlPHN5bWJvbD4obnVsbClcbiAgLy8gUnVudGltZSB6b29tIHByZWZlcmVuY2UgLSBpbml0aWFsaXplZCB3aXRoIGNvbmZpZyB2YWx1ZSwgY2FuIGJlIG92ZXJyaWRkZW4gYnkgdXNlclxuICBjb25zdCBbcnVudGltZVpvb21Ub1NlbGVjdGVkLCBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWRdID0gUmVhY3QudXNlU3RhdGU8Ym9vbGVhbj4oXG4gICAgcXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCA/PyB0cnVlXG4gIClcblxuICAvLyBTeW5jIHJ1bnRpbWUgem9vbSBwcmVmZXJlbmNlIHdoZW4gcXVlcnkgaXRlbSBjaGFuZ2VzIChlLmcuLCBzd2l0Y2hpbmcgYmV0d2VlbiBxdWVyaWVzKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFJ1bnRpbWVab29tVG9TZWxlY3RlZChxdWVyeUl0ZW0/Lnpvb21Ub1NlbGVjdGVkID8/IHRydWUpXG4gIH0sIFtxdWVyeUl0ZW0/Lnpvb21Ub1NlbGVjdGVkLCBxdWVyeUl0ZW0/LmNvbmZpZ0lkXSlcblxuICAvLyBjb25zdCBbZGF0YVNvdXJjZSwgc2V0RGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPihudWxsKVxuICBjb25zdCB7XG4gICAgdXNlQXR0cmlidXRlRmlsdGVyLFxuICAgIHVzZVNwYXRpYWxGaWx0ZXIsXG4gICAgc3BhdGlhbEZpbHRlclR5cGVzLFxuICAgIHNxbEV4cHJPYmosXG4gICAgc3BhdGlhbE1hcFdpZGdldElkcyxcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXMsXG4gICAgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXMsXG4gICAgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSxcbiAgICBzcGF0aWFsUmVsYXRpb25zLFxuICAgIHNwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcixcbiAgICBzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZSxcbiAgICBzcGF0aWFsUmVsYXRpb25CdWZmZXJVbml0LFxuICAgIHNwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcixcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJEaXN0YW5jZSxcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJVbml0LFxuICAgIGF0dHJpYnV0ZUZpbHRlckxhYmVsID0gZ2V0STE4bk1lc3NhZ2UoJ2F0dHJpYnV0ZUZpbHRlcicpLFxuICAgIHNwYXRpYWxGaWx0ZXJMYWJlbCA9IGdldEkxOG5NZXNzYWdlKCdzcGF0aWFsRmlsdGVyJyksXG4gICAgYXR0cmlidXRlRmlsdGVyRGVzYyxcbiAgICBzcGF0aWFsRmlsdGVyRGVzY1xuICB9ID0gY3VycmVudEl0ZW1cbiAgY29uc3QgW2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpdID0gUmVhY3QudXNlU3RhdGU8SU1TcWxFeHByZXNzaW9uPihzcWxFeHByT2JqKVxuICAvLyBSZWYgdG8gdHJhY2sgY3VycmVudCBTUUwgZXhwcmVzc2lvbiBmb3Igc3luY2hyb25vdXMgYWNjZXNzIGluIGFwcGx5UXVlcnlcbiAgLy8gVGhpcyBlbnN1cmVzIGhhc2ggdmFsdWVzIGFyZSBpbW1lZGlhdGVseSBhdmFpbGFibGUgd2hlbiBBcHBseSBpcyBjbGlja2VkXG4gIGNvbnN0IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYgPSBSZWFjdC51c2VSZWY8SU1TcWxFeHByZXNzaW9uPihzcWxFeHByT2JqKVxuICBjb25zdCBzcGF0aWFsRmlsdGVyT2JqUmVmID0gUmVhY3QudXNlUmVmPFNwYXRpYWxGaWx0ZXJPYmo+KG51bGwpXG4gIGNvbnN0IHNwYXRpYWxSZWxhdGlvblJlZiA9IFJlYWN0LnVzZVJlZjxTcGF0aWFsUmVsYXRpb24+KFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3QpXG4gIGNvbnN0IGJ1ZmZlclJlZiA9IFJlYWN0LnVzZVJlZjx7IGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlIH0+KG51bGwpXG4gIGNvbnN0IGFwcGx5QnV0dG9uUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50PihudWxsKVxuICBjb25zdCBmb3JtQ29udGVudFJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcbiAgY29uc3QgaXNBdXRvSGVpZ2h0ID0gdXNlQXV0b0hlaWdodCgpXG4gIGNvbnN0IHNob3dDbGF1c2VOdW1iZXIgPSBSZWFjdC51c2VSZWYoZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iaikpXG4gIGNvbnN0IGluaXRpYWxWYWx1ZVNldFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKSAvLyBUcmFjayB3aGljaCBjb25maWdJZCB3ZSd2ZSBzZXQgdGhlIHZhbHVlIGZvclxuICBjb25zdCBsYXN0VmFsdWVTZXRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkgLy8gVHJhY2sgdGhlIGxhc3QgdmFsdWUgdGhhdCB3YXMgc2V0XG4gIGNvbnN0IGhhc2hUcmlnZ2VyZWRSZWYgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbj4oZmFsc2UpIC8vIFRyYWNrIGlmIHF1ZXJ5IHdhcyB0cmlnZ2VyZWQgdmlhIGhhc2ggcGFyYW1ldGVyXG4gIGNvbnN0IHByZXZpb3VzQ29uZmlnSWRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkgLy8gVHJhY2sgcHJldmlvdXMgY29uZmlnSWQgdG8gZGV0ZWN0IHF1ZXJ5IHN3aXRjaGVzXG4gIGNvbnN0IFtpc1R5cGluZ1ZhbGlkLCBzZXRJc1R5cGluZ1ZhbGlkXSA9IFJlYWN0LnVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKVxuXG4gIC8vIE1vbml0b3IgZm9jdXMgYW5kIGlucHV0IGV2ZW50cyB3aXRoaW4gdGhlIHF1ZXJ5IGZvcm1cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVGb2N1cyA9IChlOiBGb2N1c0V2ZW50KSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKHRhcmdldC50YWdOYW1lID09PSAnSU5QVVQnKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9ICh0YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWVcbiAgICAgICAgc2V0SXNUeXBpbmdWYWxpZChpc1F1ZXJ5SW5wdXRWYWxpZCh2YWwpKVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpbnB1dC1mb2N1c2VkJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICB0YWdOYW1lOiB0YXJnZXQudGFnTmFtZSxcbiAgICAgICAgICB0eXBlOiAodGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnR5cGUsXG4gICAgICAgICAgdmFsdWU6IHZhbFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUlucHV0ID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgICAgaWYgKHRhcmdldC50YWdOYW1lID09PSAnSU5QVVQnKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9ICh0YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWVcbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGlzUXVlcnlJbnB1dFZhbGlkKHZhbClcbiAgICAgICAgc2V0SXNUeXBpbmdWYWxpZChpc1ZhbGlkKVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpbnB1dC10eXBpbmcnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHZhbHVlOiB2YWwsXG4gICAgICAgICAgaXNUeXBpbmdWYWxpZDogaXNWYWxpZFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUZvY3VzT3V0ID0gKGU6IEZvY3VzRXZlbnQpID0+IHtcbiAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGFsbG93IHN0YXRlIHRvIGNhdGNoIHVwXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc2V0SXNUeXBpbmdWYWxpZChmYWxzZSlcbiAgICAgIH0sIDUwKVxuICAgIH1cblxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGZvcm1Db250ZW50UmVmLmN1cnJlbnRcbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGhhbmRsZUZvY3VzKVxuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaGFuZGxlSW5wdXQpXG4gICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBoYW5kbGVGb2N1c091dClcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGhhbmRsZUZvY3VzKVxuICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBoYW5kbGVJbnB1dClcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgaGFuZGxlRm9jdXNPdXQpXG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uZmlnSWRdKVxuXG4gIC8vIENoZWNrIGlmIGFueSBhdHRyaWJ1dGUgZmlsdGVyIGlucHV0IGlzIHZhbGlkXG4gIGNvbnN0IGlzSW5wdXRWYWxpZCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIC8vIElmIHRoZSB1c2VyIGlzIGN1cnJlbnRseSB0eXBpbmcgc29tZXRoaW5nIHZhbGlkLCB0aGUgZm9ybSBpcyB2YWxpZFxuICAgIGlmIChpc1R5cGluZ1ZhbGlkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAndmFsaWRhdGlvbi1jaGVjay1pbnN0YW50JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGlzVmFsaWQ6IHRydWVcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGlmICghYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHMgfHwgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iai5wYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0cnVlIC8vIElmIG5vIHBhcnRzLCB3ZSBhc3N1bWUgaXQncyB2YWxpZCAoZS5nLiBzcGF0aWFsLW9ubHkgcXVlcnkpXG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIGF0IGxlYXN0IG9uZSBTSU5HTEUgcGFydCBoYXMgYSB2YWxpZCB2YWx1ZVxuICAgIGNvbnN0IGhhc1ZhbGlkVmFsdWUgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLnBhcnRzLnNvbWUocGFydCA9PiB7XG4gICAgICAvLyBBY2Nlc3NpbmcgSW1tdXRhYmxlIHN0cnVjdHVyZXMgcmVxdWlyZXMgY2FyZS4gSWYgZG90IG5vdGF0aW9uIGZhaWxzLCBcbiAgICAgIC8vIHRoZSBmcmFtZXdvcmsgY29tcG9uZW50cyBtaWdodCBiZSB1c2luZyAuZ2V0KCkgb3Igb3RoZXIgbWV0aG9kcy5cbiAgICAgIC8vIFdlJ2xsIGJlIGluY2x1c2l2ZSBoZXJlOiBpZiBpdCdzIG5vdCBhIFNJTkdMRSBwYXJ0LCB3ZSB0cmVhdCBpdCBhcyB2YWxpZC5cbiAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdTSU5HTEUnKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHBhcnQudmFsdWVPcHRpb25zPy52YWx1ZVxuICAgICAgICBjb25zdCBzb3VyY2UgPSBwYXJ0LnZhbHVlT3B0aW9ucz8uc291cmNlXG4gICAgICAgIFxuICAgICAgICAvLyBJZiB0aGUgc291cmNlIGlzIE5PVCAnVVNFUl9JTlBVVCcsIGl0J3MgbGlrZWx5IGEgbGlzdC9kcm9wZG93biAoVU5JUVVFX1ZBTFVFUywgRklFTERfVkFMVUUpXG4gICAgICAgIC8vIFdlIGFsc28gY2hlY2sgZm9yIHBhcnQuZGF0YVNvdXJjZSB3aGljaCBpcyBjb21tb24gZm9yIGxpc3QtYmFzZWQgc2VsZWN0aW9uc1xuICAgICAgICAvLyBXZSB0cmVhdCB0aGVzZSBhcyBcIkxpc3RcIiB0eXBlcyB3aGljaCBhcmUgZXhlbXB0ZWQgZnJvbSB0aGUgZW1wdHktc3RyaW5nIHJ1bGUuXG4gICAgICAgIGNvbnN0IGlzTGlzdCA9IChzb3VyY2UgJiYgc291cmNlICE9PSAnVVNFUl9JTlBVVCcpIHx8IChwYXJ0LmRhdGFTb3VyY2U/LnNvdXJjZSlcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBpc1F1ZXJ5SW5wdXRWYWxpZCh2YWwsICEhaXNMaXN0KVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAndmFsaWRhdGlvbi1jaGVjay1kZXRhaWwnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHBhcnRUeXBlOiBwYXJ0LnR5cGUsXG4gICAgICAgICAgc291cmNlLFxuICAgICAgICAgIGhhc0RhdGFTb3VyY2U6ICEhcGFydC5kYXRhU291cmNlLFxuICAgICAgICAgIGRhdGFTb3VyY2VTb3VyY2U6IHBhcnQuZGF0YVNvdXJjZT8uc291cmNlLFxuICAgICAgICAgIGlzTGlzdDogISFpc0xpc3QsXG4gICAgICAgICAgdmFsdWU6IHZhbCxcbiAgICAgICAgICBpc1ZhbGlkXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2YWxpZGF0aW9uLWNoZWNrJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBwYXJ0VHlwZTogcGFydC50eXBlLFxuICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICBpc0xpc3QsXG4gICAgICAgICAgdmFsdWU6IHZhbCxcbiAgICAgICAgICB2YWx1ZVR5cGU6IHR5cGVvZiB2YWwsXG4gICAgICAgICAgaXNWYWxpZFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGlzVmFsaWRcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlIFxuICAgIH0pXG5cbiAgICByZXR1cm4gaGFzVmFsaWRWYWx1ZVxuICB9LCBbYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiwgY29uZmlnSWQsIGlzVHlwaW5nVmFsaWRdKVxuXG4gIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFM/LmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF1cblxuICAvLyBUcmFjayBjb25maWdJZCBjaGFuZ2VzIChxdWVyeSBzd2l0Y2hlcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2NvbmZpZ0lkLWNoYW5nZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBwcmV2aW91c0NvbmZpZ0lkOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW2NvbmZpZ0lkLCBpbml0aWFsSW5wdXRWYWx1ZSwgZGF0YXNvdXJjZVJlYWR5LCBvdXRwdXREUywgd2lkZ2V0SWQsIGhhc2hUcmlnZ2VyZWRSZWZdKVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBpbnB1dCB2YWx1ZSBmcm9tIFVSTCBoYXNoIHBhcmFtZXRlcnMgd2hlbjpcbiAgICogMS4gRGF0YXNvdXJjZSBpcyByZWFkeVxuICAgKiAyLiBXZSBoYXZlIGFuIGluaXRpYWxJbnB1dFZhbHVlIGZyb20gVVJMIGhhc2hcbiAgICogMy4gV2UgaGF2ZW4ndCBhbHJlYWR5IHNldCBpdCBmb3IgdGhpcyBjb25maWdJZCwgT1IgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAqIFxuICAgKiBVc2VzIGJvdGggUmVhY3Qgc3RhdGUgdXBkYXRlcyBhbmQgRE9NIG1hbmlwdWxhdGlvbiB0byBlbnN1cmUgdGhlIHZhbHVlXG4gICAqIGlzIHByb3Blcmx5IHNldCBpbiBTcWxFeHByZXNzaW9uUnVudGltZSdzIGludGVybmFsIHN0YXRlLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2luaXRpYWxJbnB1dFZhbHVlLXByb3AtcmVjZWl2ZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgIGhhc1NxbEV4cHJPYmo6ICEhc3FsRXhwck9iaixcbiAgICAgIHNxbEV4cHJPYmpQYXJ0c0xlbmd0aDogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCxcbiAgICAgIGluaXRpYWxWYWx1ZVNldFJlZjogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICB3aWxsUHJvY2VzczogZGF0YXNvdXJjZVJlYWR5ICYmIGluaXRpYWxJbnB1dFZhbHVlICYmIHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBSZXNldCBmbGFnIGlmIGNvbmZpZ0lkIGNoYW5nZWQgKHN3aXRjaGVkIHRvIGRpZmZlcmVudCBxdWVyeSlcbiAgICBpZiAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IG51bGwgJiYgaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkKSB7XG4gICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgaGFzaCB0cmlnZ2VyIGZsYWcgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2hhc2hUcmlnZ2VyZWRSZWYtcmVzZXQnLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgcmVhc29uOiAnc3dpdGNoaW5nLXF1ZXJpZXMnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBzZXRJc1R5cGluZ1ZhbGlkKGZhbHNlKSAvLyBSZXNldCB0eXBpbmcgdmFsaWRhdGlvblxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB2YWx1ZSBoYXMgY2hhbmdlZCBmb3IgdGhlIHNhbWUgY29uZmlnSWRcbiAgICBjb25zdCB2YWx1ZUNoYW5nZWQgPSBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gaW5pdGlhbElucHV0VmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9PT0gY29uZmlnSWRcbiAgICBcbiAgICAvLyBTZXQgdGhlIHZhbHVlIGlmOlxuICAgIC8vIC0gV2UgaGF2ZW4ndCBzZXQgaXQgZm9yIHRoaXMgY29uZmlnSWQgeWV0LCBPUlxuICAgIC8vIC0gVGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGZvciB0aGUgc2FtZSBjb25maWdJZCAoaGFzaCBwYXJhbWV0ZXIgdXBkYXRlZClcbiAgICBjb25zdCBzaG91bGRTZXRWYWx1ZSA9IGRhdGFzb3VyY2VSZWFkeSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgdmFsdWVDaGFuZ2VkKVxuICAgIFxuICAgIGlmIChzaG91bGRTZXRWYWx1ZSkge1xuICAgICAgLy8gRW5zdXJlIFF1ZXJ5IHRhYiBpcyBhY3RpdmUgYmVmb3JlIHNldHRpbmcgaGFzaCB2YWx1ZVxuICAgICAgLy8gVGhpcyBlbnN1cmVzIFNxbEV4cHJlc3Npb25SdW50aW1lIGlzIHZpc2libGUgYW5kIGNhbiBwcm9jZXNzIHRoZSB2YWx1ZVxuICAgICAgaWYgKGFjdGl2ZVRhYiAhPT0gJ3F1ZXJ5JyAmJiBvblRhYkNoYW5nZSkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLXNldHRpbmctc3dpdGNoaW5nLXRvLXF1ZXJ5LXRhYicsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgY3VycmVudFRhYjogYWN0aXZlVGFiLFxuICAgICAgICAgIG5vdGU6ICdTd2l0Y2hpbmcgdG8gUXVlcnkgdGFiIGJlZm9yZSBzZXR0aW5nIGhhc2ggdmFsdWUgdG8gZW5zdXJlIFNxbEV4cHJlc3Npb25SdW50aW1lIGNhbiBwcm9jZXNzIGl0J1xuICAgICAgICB9KVxuICAgICAgICBvblRhYkNoYW5nZSgncXVlcnknKVxuICAgICAgICAvLyBSZXR1cm4gZWFybHkgLSB1c2VFZmZlY3Qgd2lsbCBydW4gYWdhaW4gd2hlbiBhY3RpdmVUYWIgYmVjb21lcyAncXVlcnknXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1zZXR0aW5nLXN0YXJ0JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWY6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgICB2YWx1ZUNoYW5nZWQsXG4gICAgICAgIGhhc2hUcmlnZ2VyZWRSZWZCZWZvcmU6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgICAgc3FsRXhwck9ialBhcnRzTGVuZ3RoOiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoLFxuICAgICAgICBhY3RpdmVUYWIsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gU2V0IGhhc2hUcmlnZ2VyZWRSZWYgSU1NRURJQVRFTFkgd2hlbiBzZXR0aW5nIGhhc2ggdmFsdWVcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGNhbiBkZXRlY3QgaGFzaC10cmlnZ2VyZWQgY29udmVyc2lvbnNcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoVHJpZ2dlcmVkUmVmLXNldC10cnVlJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IGZpcnN0UGFydCA9IHNxbEV4cHJPYmoucGFydHNbMF1cbiAgICAgIC8vIENoZWNrIGlmIHRoZSBmaXJzdCBwYXJ0IGlzIGEgU0lOR0xFIGNsYXVzZSAobm90IGEgU3FsQ2xhdXNlU2V0KVxuICAgICAgaWYgKGZpcnN0UGFydCAmJiAndHlwZScgaW4gZmlyc3RQYXJ0ICYmIGZpcnN0UGFydC50eXBlID09PSAnU0lOR0xFJyAmJiAndmFsdWVPcHRpb25zJyBpbiBmaXJzdFBhcnQpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBleHByZXNzaW9uIG9iamVjdCB3aXRoIHRoZSBpbml0aWFsIHZhbHVlXG4gICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBzcWxFeHByT2JqLnNldEluKFsncGFydHMnLCAnMCcsICd2YWx1ZU9wdGlvbnMnLCAndmFsdWUnXSwgaW5pdGlhbElucHV0VmFsdWUpXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLXNldHRpbmctcmVhY3Qtc3RhdGUnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIHByZXZpb3VzU3RhdGVWYWx1ZTogYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSxcbiAgICAgICAgICBuZXdTdGF0ZVZhbHVlOiB1cGRhdGVkPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlLFxuICAgICAgICAgIHdpbGxDYWxsU2V0U3RhdGU6IHRydWUsXG4gICAgICAgICAgbm90ZTogJ1NldHRpbmcgdmFsdWUgaW4gUmVhY3Qgc3RhdGUgLSBTcWxFeHByZXNzaW9uUnVudGltZSBzaG91bGQgcmVjZWl2ZSB2aWEgZXhwcmVzc2lvbiBwcm9wJ1xuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaih1cGRhdGVkKVxuICAgICAgICAvLyBVcGRhdGUgcmVmIGltbWVkaWF0ZWx5IGZvciBzeW5jaHJvbm91cyBhY2Nlc3MgaW4gYXBwbHlRdWVyeVxuICAgICAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQgPSB1cGRhdGVkXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLXJlZi11cGRhdGVkJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICByZWZWYWx1ZUFmdGVyVXBkYXRlOiBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQ/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIC8vIFVwZGF0ZSBjbGF1c2UgbnVtYmVyIGZvciB0aGUgdXBkYXRlZCBleHByZXNzaW9uXG4gICAgICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHVwZGF0ZWQpXG4gICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID0gY29uZmlnSWRcbiAgICAgICAgbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgPSBpbml0aWFsSW5wdXRWYWx1ZVxuICAgICAgICBcbiAgICAgICAgLy8gQWxzbyBzZXQgdGhlIHZhbHVlIGRpcmVjdGx5IG9uIHRoZSBpbnB1dCBlbGVtZW50IGFmdGVyIGEgZGVsYXkgdG8gZW5zdXJlIGNvbXBvbmVudCBpcyByZW5kZXJlZFxuICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIFNxbEV4cHJlc3Npb25SdW50aW1lIG1heSBub3Qgc3luYyBmcm9tIHRoZSBleHByZXNzaW9uIHByb3AgYWxvbmVcbiAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgaW5wdXQgZWxlbWVudCB3aXRoaW4gU3FsRXhwcmVzc2lvblJ1bnRpbWVcbiAgICAgICAgICAvLyBVc2UgZGF0YS13aWRnZXRpZCAoc3RhbmRhcmQgRXhCIGF0dHJpYnV0ZSkgdG8gaXNvbGF0ZSB0aGUgY29ycmVjdCB3aWRnZXQgaW5zdGFuY2VcbiAgICAgICAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldGlkPVwiJHt3aWRnZXRJZH1cIl1gKT8ucXVlcnlTZWxlY3RvcignLnF1ZXJ5LWZvcm0nKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLndpZGdldC1ydW50aW1lW2RhdGEtd2lkZ2V0aWQ9XCIke3dpZGdldElkfVwiXWApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWVyeS1mb3JtJylcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtZG9tLW1hbmlwdWxhdGlvbi1zdGFydCcsXG4gICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgZm9ybUVsZW1lbnRGb3VuZDogISFmb3JtRWxlbWVudCxcbiAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgc2VsZWN0b3IxOiBgW2RhdGEtd2lkZ2V0aWQ9XCIke3dpZGdldElkfVwiXSAucXVlcnktZm9ybWAsXG4gICAgICAgICAgICBzZWxlY3RvcjI6IGAud2lkZ2V0LXJ1bnRpbWVbZGF0YS13aWRnZXRpZD1cIiR7d2lkZ2V0SWR9XCJdYCxcbiAgICAgICAgICAgIHNlbGVjdG9yMzogJy5xdWVyeS1mb3JtJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGZvcm1FbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBMb29rIGZvciB0ZXh0IGlucHV0IGVsZW1lbnRzXG4gICAgICAgICAgICBjb25zdCB0ZXh0SW5wdXRzID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1kb20tbWFuaXB1bGF0aW9uLWlucHV0cy1mb3VuZCcsXG4gICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgaW5wdXRzRm91bmQ6IHRleHRJbnB1dHMubGVuZ3RoLFxuICAgICAgICAgICAgICBmb3JtRWxlbWVudFRhZzogZm9ybUVsZW1lbnQudGFnTmFtZSxcbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnRDbGFzczogZm9ybUVsZW1lbnQuY2xhc3NOYW1lLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBpbnB1dHNVcGRhdGVkID0gMFxuICAgICAgICAgICAgdGV4dElucHV0cy5mb3JFYWNoKChpbnB1dDogSFRNTElucHV0RWxlbWVudCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHZhbHVlIGlmIGlucHV0IGlzIGVtcHR5IE9SIGlmIHRoZSB2YWx1ZSBoYXMgY2hhbmdlZCAoaGFzaCBwYXJhbWV0ZXIgdXBkYXRlZClcbiAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkVXBkYXRlID0gIWlucHV0LnZhbHVlIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlLnRyaW0oKSA9PT0gJycgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgIT09IGluaXRpYWxJbnB1dFZhbHVlXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWRvbS1tYW5pcHVsYXRpb24taW5wdXQtY2hlY2snLFxuICAgICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICAgIGlucHV0SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIGN1cnJlbnRJbnB1dFZhbHVlOiBpbnB1dC52YWx1ZSxcbiAgICAgICAgICAgICAgICBpbnB1dElkOiBpbnB1dC5pZCxcbiAgICAgICAgICAgICAgICBpbnB1dE5hbWU6IGlucHV0Lm5hbWUsXG4gICAgICAgICAgICAgICAgaW5wdXRQYXJlbnRUYWc6IGlucHV0LnBhcmVudEVsZW1lbnQ/LnRhZ05hbWUsXG4gICAgICAgICAgICAgICAgc2hvdWxkVXBkYXRlLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIC8vIEZvY3VzIHRoZSBpbnB1dCBmaXJzdFxuICAgICAgICAgICAgICAgIGlucHV0LmZvY3VzKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHZhbHVlXG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBpbml0aWFsSW5wdXRWYWx1ZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1kb20tbWFuaXB1bGF0aW9uLWlucHV0LXZhbHVlLXNldCcsXG4gICAgICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICAgICAgaW5wdXRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICB2YWx1ZUFmdGVyU2V0OiBpbnB1dC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgIGlzRm9jdXNlZDogZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gaW5wdXQsXG4gICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgZGlzcGF0Y2ggaW5wdXQgZXZlbnQgd2l0aCBwcm9wZXIgcHJvcGVydGllc1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGlucHV0RXZlbnQsICd0YXJnZXQnLCB7IHZhbHVlOiBpbnB1dCwgZW51bWVyYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQoaW5wdXRFdmVudClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRpc3BhdGNoIGNoYW5nZSBldmVudFxuICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5nZUV2ZW50ID0gbmV3IEV2ZW50KCdjaGFuZ2UnLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2hhbmdlRXZlbnQsICd0YXJnZXQnLCB7IHZhbHVlOiBpbnB1dCwgZW51bWVyYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQoY2hhbmdlRXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQWxzbyB0cnkgUmVhY3QncyBzeW50aGV0aWMgZXZlbnQgYXBwcm9hY2ggdXNpbmcgbmF0aXZlIHZhbHVlIHNldHRlclxuICAgICAgICAgICAgICAgIGNvbnN0IG5hdGl2ZUlucHV0VmFsdWVTZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHdpbmRvdy5IVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZSwgJ3ZhbHVlJyk/LnNldFxuICAgICAgICAgICAgICAgIGlmIChuYXRpdmVJbnB1dFZhbHVlU2V0dGVyKSB7XG4gICAgICAgICAgICAgICAgICBuYXRpdmVJbnB1dFZhbHVlU2V0dGVyLmNhbGwoaW5wdXQsIGluaXRpYWxJbnB1dFZhbHVlKVxuICAgICAgICAgICAgICAgICAgY29uc3QgcmVhY3RFdmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQocmVhY3RFdmVudClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWRvbS1tYW5pcHVsYXRpb24tZXZlbnRzLWRpc3BhdGNoZWQnLFxuICAgICAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgIGlucHV0SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgaW5wdXRFdmVudERpc3BhdGNoZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VFdmVudERpc3BhdGNoZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICByZWFjdEV2ZW50RGlzcGF0Y2hlZDogISFuYXRpdmVJbnB1dFZhbHVlU2V0dGVyLFxuICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBCbHVyIHRvIHRyaWdnZXIgYW55IHZhbGlkYXRpb24gb3Igc3RhdGUgdXBkYXRlc1xuICAgICAgICAgICAgICAgIGlucHV0LmJsdXIoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlucHV0c1VwZGF0ZWQrK1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYXNoLXRyaWdnZXJlZCBxdWVyaWVzOiBET00gbWFuaXB1bGF0aW9uIHRyaWdnZXJzIFNxbEV4cHJlc3Npb25SdW50aW1lIG9uQ2hhbmdlXG4gICAgICAgICAgICAvLyBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGRldGVjdHMgY29udmVyc2lvbiBhbmQgZmlyZXMgUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlRcbiAgICAgICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIGluIHF1ZXJ5LXRhc2sudHN4IGV4ZWN1dGVzIHF1ZXJ5IGRpcmVjdGx5IC0gbm8gQXBwbHkgYnV0dG9uIGNsaWNrIG5lZWRlZFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtZG9tLW1hbmlwdWxhdGlvbi1jb21wbGV0ZScsXG4gICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgaW5wdXRzRm91bmQ6IHRleHRJbnB1dHMubGVuZ3RoLFxuICAgICAgICAgICAgICBpbnB1dHNVcGRhdGVkLFxuICAgICAgICAgICAgICBub3RlOiAnRE9NIG1hbmlwdWxhdGlvbiBjb21wbGV0ZSAtIFNxbEV4cHJlc3Npb25SdW50aW1lIG9uQ2hhbmdlIHNob3VsZCBmaXJlJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1kb20tbWFuaXB1bGF0aW9uLWZhaWxlZCcsXG4gICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgcmVhc29uOiAnZm9ybUVsZW1lbnQtbm90LWZvdW5kJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDUwMCkgLy8gTG9uZ2VyIGRlbGF5IHRvIGVuc3VyZSBjb21wb25lbnQgaXMgZnVsbHkgcmVuZGVyZWRcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZW91dElkKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBUaGUgc3FsRXhwck9iai5wYXJ0cyBtYXkgY2hhbmdlIGJ1dCB0aGUgZGlzcGxheVNRTCBpcyB0aGUgc2FtZVxuICAgIGlmICghc3FsRXhwck9iaikge1xuICAgICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gMFxuICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihudWxsKVxuICAgICAgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnc3FsRXhwck9iai1jbGVhcmVkJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iailcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBoYXZlIGEgdmFsdWUgc2V0IChmcm9tIHVzZXIgaW5wdXQgb3IgaGFzaClcbiAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICAgIGNvbnN0IGJhc2VWYWx1ZSA9IHNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICAgIGNvbnN0IGhhc1ZhbHVlU2V0ID0gY3VycmVudFZhbHVlICE9PSB1bmRlZmluZWQgJiYgY3VycmVudFZhbHVlICE9PSBudWxsICYmIGN1cnJlbnRWYWx1ZSAhPT0gJydcbiAgICAgIGNvbnN0IGNvbmZpZ0lkQ2hhbmdlZCA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkXG4gICAgICBcbiAgICAgIC8vIE9ubHkgdXBkYXRlIGlmOlxuICAgICAgLy8gMS4gV2UgaGF2ZW4ndCBzZXQgYSB2YWx1ZSB5ZXQgKG5vIHZhbHVlIGluIGN1cnJlbnQgc3RhdGUpLCBPUlxuICAgICAgLy8gMi4gY29uZmlnSWQgY2hhbmdlZCAoc3dpdGNoaW5nIHF1ZXJpZXMgLSByZXNldCB0byBiYXNlIHNxbEV4cHJPYmopXG4gICAgICAvLyBPdGhlcndpc2UsIHByZXNlcnZlIHRoZSBleGlzdGluZyB2YWx1ZSBhcyBhIHZpc3VhbCByZWNvcmRcbiAgICAgIGlmICghaGFzVmFsdWVTZXQgfHwgY29uZmlnSWRDaGFuZ2VkKSB7XG4gICAgICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsRXhwck9iailcbiAgICAgICAgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50ID0gc3FsRXhwck9ialxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnc3FsRXhwck9iai11cGRhdGVkLXJlZicsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgcHJldmlvdXNDb25maWdJZDogcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50LFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZjogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICAgICAgaGFzVmFsdWVTZXQsXG4gICAgICAgICAgY29uZmlnSWRDaGFuZ2VkLFxuICAgICAgICAgIHByZXZpb3VzVmFsdWU6IGN1cnJlbnRWYWx1ZSxcbiAgICAgICAgICBuZXdWYWx1ZTogYmFzZVZhbHVlLFxuICAgICAgICAgIHJlYXNvbjogY29uZmlnSWRDaGFuZ2VkID8gJ2NvbmZpZ0lkLWNoYW5nZWQtcmVzZXR0aW5nJyA6ICduby12YWx1ZS1zZXQtaW5pdGlhbGl6aW5nJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ3NxbEV4cHJPYmotc2tpcHBlZC1yZWYtdXBkYXRlJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBwcmV2aW91c0NvbmZpZ0lkOiBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgICAgICBjdXJyZW50VmFsdWUsXG4gICAgICAgICAgYmFzZVZhbHVlLFxuICAgICAgICAgIHJlYXNvbjogJ3ZhbHVlLWFscmVhZHktc2V0LXByZXNlcnZpbmctYXMtdmlzdWFsLXJlY29yZCcsXG4gICAgICAgICAgbm90ZTogJ1NraXBwaW5nIHVwZGF0ZSB0byBwcmVzZXJ2ZSB1c2VyLWVudGVyZWQgb3IgaGFzaC1zZXQgdmFsdWUgYXMgdmlzdWFsIHJlY29yZCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBwcmV2aW91c0NvbmZpZ0lkUmVmIGZvciBuZXh0IGNvbXBhcmlzb25cbiAgICAgIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCA9IGNvbmZpZ0lkXG4gICAgfVxuICB9LCBbc3FsRXhwck9iaiwgaW5pdGlhbElucHV0VmFsdWUsIGRhdGFzb3VyY2VSZWFkeSwgY29uZmlnSWQsIHdpZGdldElkLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCBxdWVyeUl0ZW1TaG9ydElkLCBhY3RpdmVUYWIsIG9uVGFiQ2hhbmdlXSlcbiAgXG4gIC8vIEtlZXAgcmVmIGluIHN5bmMgd2l0aCBzdGF0ZSBjaGFuZ2VzIChmb3IgU3FsRXhwcmVzc2lvblJ1bnRpbWUgdXBkYXRlcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqXG4gICAgXG4gICAgLy8gTG9nIHdoZW4gc3RhdGUgY2hhbmdlcyAtIHRoaXMgaXMgd2hhdCBTcWxFeHByZXNzaW9uUnVudGltZSByZWNlaXZlcyB2aWEgZXhwcmVzc2lvbiBwcm9wXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLXN0YXRlLWNoYW5nZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBzdGF0ZVZhbHVlOiBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlLFxuICAgICAgc3RhdGVWYWx1ZVR5cGU6IHR5cGVvZiBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlLFxuICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheShhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlKSxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgbm90ZTogJ1JlYWN0IHN0YXRlIGNoYW5nZWQgLSBTcWxFeHByZXNzaW9uUnVudGltZSBzaG91bGQgcmVjZWl2ZSB0aGlzIHZpYSBleHByZXNzaW9uIHByb3AnXG4gICAgfSlcbiAgfSwgW2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIGNvbmZpZ0lkLCBpbml0aWFsSW5wdXRWYWx1ZV0pXG5cbiAgY29uc3QgYXBwbHlRdWVyeSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyBXaGVuIHRoZSAnYXBwbHknIGJ1dHRvbiBpcyBjbGlja2VkLCBpdCBzaG91bGQgY2xlYXIgdGhlIHNlbGVjdGlvbiBmcm9tIHRoZSBwcmV2aW91cyByZXN1bHQgbGlzdFxuICAgIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhvdXRwdXREUylcblxuICAgIGlmIChvdXRwdXREUykge1xuICAgICAgY29uc3Qgb3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIGlmIChvcmlnaW5Ecykge1xuICAgICAgICBjb25zdCBkYXRhVmlld0NvbmZpZyA9IG9yaWdpbkRzLmdldERhdGFWaWV3Q29uZmlnKClcbiAgICAgICAgY29uc3QgbWF4aW11bSA9IGRhdGFWaWV3Q29uZmlnPy5tYXhpbXVtXG4gICAgICAgIGlmIChtYXhpbXVtICE9IG51bGwgJiYgbWF4aW11bSA+IDApIHtcbiAgICAgICAgICBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZURhdGFTb3VyY2VCeURhdGFTb3VyY2VKc29uKFxuICAgICAgICAgICAgb3V0cHV0RFMsXG4gICAgICAgICAgICBvdXRwdXREUy5nZXREYXRhU291cmNlSnNvbigpLnNldEluKFsncXVlcnknLCAnbWF4aW11bSddLCBtYXhpbXVtKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvcmNlIHpvb20gZm9yIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXMsIG90aGVyd2lzZSB1c2UgcnVudGltZSBwcmVmZXJlbmNlXG4gICAgY29uc3Qgem9vbVRvVXNlID0gaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID8gdHJ1ZSA6IHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuXG4gICAgLy8gU2FuaXRpemUgdXNlciBpbnB1dCBiZWZvcmUgc3VibWlzc2lvblxuICAgIC8vIFJlYWQgZnJvbSByZWYgdG8gZ2V0IHRoZSBsYXRlc3QgdmFsdWUgc3luY2hyb25vdXNseSAoaW5jbHVkaW5nIGhhc2ggdmFsdWVzKVxuICAgIGNvbnN0IGN1cnJlbnRTcWxFeHByT2JqID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50XG4gICAgY29uc3QgY3VycmVudFJlZlZhbHVlID0gY3VycmVudFNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2FwcGx5UXVlcnktZXhlY3V0aW5nJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBjdXJyZW50UmVmVmFsdWUsXG4gICAgICByZWZIYXNWYWx1ZTogISFjdXJyZW50UmVmVmFsdWUsXG4gICAgICBoYXNoVHJpZ2dlcmVkOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IHNhbml0aXplZFNxbEV4cHJPYmogPSBzYW5pdGl6ZVNxbEV4cHJlc3Npb24oY3VycmVudFNxbEV4cHJPYmopXG4gICAgXG4gICAgLy8gTG9nIHRoZSBzYW5pdGl6ZWQgZXhwcmVzc2lvbiB0byBzZWUgaWYgdmFsdWUgd2FzIHByZXNlcnZlZFxuICAgIGNvbnN0IHNhbml0aXplZFZhbHVlID0gc2FuaXRpemVkU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnYXBwbHlRdWVyeS1hZnRlci1zYW5pdGl6ZScsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGN1cnJlbnRSZWZWYWx1ZSxcbiAgICAgIHNhbml0aXplZFZhbHVlLFxuICAgICAgdmFsdWVzTWF0Y2g6IGN1cnJlbnRSZWZWYWx1ZSA9PT0gc2FuaXRpemVkVmFsdWUsXG4gICAgICBzYW5pdGl6ZWRWYWx1ZVR5cGU6IHR5cGVvZiBzYW5pdGl6ZWRWYWx1ZSxcbiAgICAgIGN1cnJlbnRSZWZWYWx1ZVR5cGU6IHR5cGVvZiBjdXJyZW50UmVmVmFsdWUsXG4gICAgICBpc0FycmF5Q3VycmVudDogQXJyYXkuaXNBcnJheShjdXJyZW50UmVmVmFsdWUpLFxuICAgICAgaXNBcnJheVNhbml0aXplZDogQXJyYXkuaXNBcnJheShzYW5pdGl6ZWRWYWx1ZSksXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgbGV0IHJlbCA9IHNwYXRpYWxSZWxhdGlvblJlZi5jdXJyZW50XG4gICAgaWYgKHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudD8uZ2VvbWV0cnkgJiYgcmVsID09IG51bGwpIHtcbiAgICAgIHJlbCA9IFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Py5nZW9tZXRyeSkpIHtcbiAgICAgIGlmIChzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIG9uRm9ybVN1Ym1pdChzYW5pdGl6ZWRTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgZ2VvbWV0cnk6IHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudC5nZW9tZXRyeVswXSwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcbiAgICAgICAgICAnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvdW5pb25PcGVyYXRvcidcbiAgICAgICAgXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgICAgICBjb25zdCBvcGVyYXRvcjogKHR5cGVvZiBfX2VzcmkudW5pb25PcGVyYXRvcikgPSBtb2R1bGVzWzBdXG4gICAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBvcGVyYXRvci5leGVjdXRlTWFueShzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkpXG4gICAgICAgICAgb25Gb3JtU3VibWl0KHNhbml0aXplZFNxbEV4cHJPYmosIHsgLi4uc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50LCBnZW9tZXRyeSwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uRm9ybVN1Ym1pdChzYW5pdGl6ZWRTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgfVxuICAgIFxuICAgIC8vIFJlc2V0IGhhc2hUcmlnZ2VyZWRSZWYgYWZ0ZXIgdXNlXG4gICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2hhc2hUcmlnZ2VyZWRSZWYtcmVzZXQtYWZ0ZXItYXBwbHknLFxuICAgICAgY29uZmlnSWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbb25Gb3JtU3VibWl0LCBvdXRwdXREUywgcnVudGltZVpvb21Ub1NlbGVjdGVkXSlcblxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2ZW50OiBSZWFjdC5LZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJyAmJiBkYXRhc291cmNlUmVhZHkgJiYgaXNJbnB1dFZhbGlkKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBcbiAgICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSBpbnB1dCBmaWVsZFxuICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC50YWdOYW1lID09PSAnSU5QVVQnICYmIGFjdGl2ZUVsZW1lbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIC8vIEZvcmNlIGJsdXIgdG8gdHJpZ2dlciBTcWxFeHByZXNzaW9uUnVudGltZSdzIGlucHV0IHByb2Nlc3NpbmdcbiAgICAgICAgYWN0aXZlRWxlbWVudC5ibHVyKClcbiAgICAgICAgXG4gICAgICAgIC8vIFdhaXQgZm9yIGJsdXIgcHJvY2Vzc2luZywgdGhlbiBjbGljayB0aGUgQXBwbHkgYnV0dG9uXG4gICAgICAgIC8vIFRoaXMgdXNlcyB0aGUgZXhhY3Qgc2FtZSBjb2RlIHBhdGggYXMgY2xpY2tpbmcgdGhlIGJ1dHRvbiBtYW51YWxseVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5UXVlcnkoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgMjAwKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm90IGluIGFuIGlucHV0IGZpZWxkLCBzYWZlIHRvIGFwcGx5IGltbWVkaWF0ZWx5XG4gICAgICAgIGlmIChhcHBseUJ1dHRvblJlZi5jdXJyZW50ICYmICFhcHBseUJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkKSB7XG4gICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXBwbHlRdWVyeSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtkYXRhc291cmNlUmVhZHksIGFwcGx5UXVlcnksIGlzSW5wdXRWYWxpZF0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWRhdGFBY3Rpb25GaWx0ZXIpIHJldHVyblxuICAgIGlmIChkYXRhQWN0aW9uRmlsdGVyLndoZXJlICE9PSBwcmVEYXRhQWN0aW9uRmlsdGVyPy53aGVyZSkge1xuICAgICAgLy8gTG9nIHN0YXRlIHdoZW4gZGF0YUFjdGlvbkZpbHRlciBjaGFuZ2VzIChxdWVyeSBzd2l0Y2gpXG4gICAgICBjb25zdCBjdXJyZW50UmVmVmFsdWUgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQ/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICAgIGNvbnN0IGhhc1BlbmRpbmdIYXNoVmFsdWUgPSBpbml0aWFsSW5wdXRWYWx1ZSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmVmVmFsdWUgIT09IGluaXRpYWxJbnB1dFZhbHVlKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnZGF0YUFjdGlvbkZpbHRlci1jaGFuZ2VkLWF1dG8tdHJpZ2dlcicsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBwcmV2aW91c1doZXJlOiBwcmVEYXRhQWN0aW9uRmlsdGVyPy53aGVyZSxcbiAgICAgICAgbmV3V2hlcmU6IGRhdGFBY3Rpb25GaWx0ZXIud2hlcmUsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWY6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgICBjdXJyZW50UmVmVmFsdWUsXG4gICAgICAgIGhhc1BlbmRpbmdIYXNoVmFsdWUsXG4gICAgICAgIHdpbGxDYWxsQXBwbHlRdWVyeTogIWhhc1BlbmRpbmdIYXNoVmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgYXBwbHlRdWVyeSgpXG4gICAgfVxuICB9LCBbZGF0YUFjdGlvbkZpbHRlciwgcHJlRGF0YUFjdGlvbkZpbHRlcj8ud2hlcmUsIGFwcGx5UXVlcnksIGluaXRpYWxJbnB1dFZhbHVlLCBjb25maWdJZF0pXG5cbiAgY29uc3QgcmVzZXRRdWVyeSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyAxLiByZXNldCBhdHRyaWJ1dGUgZmlsdGVyXG4gICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iailcbiAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHNxbEV4cHJPYmopXG4gICAgLy8gMi4gcmVzZXQgc3BhdGlhbCBmaWx0ZXJcbiAgICBzZXRSZXNldFN5bWJvbChTeW1ib2woKSlcbiAgfSwgW3NxbEV4cHJPYmpdKVxuXG4gIGNvbnN0IGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoc3FsT2JqOiBJTVNxbEV4cHJlc3Npb24pID0+IHtcbiAgICAvLyBMT0cgQVQgVEhFIFZFUlkgU1RBUlRcbiAgICBjb25zdCBzcWxPYmpWYWx1ZSA9IHNxbE9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgIGNvbnN0IHByZXZpb3VzUmVmVmFsdWUgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQ/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICBjb25zdCBwcmV2aW91c1N0YXRlVmFsdWUgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBmcm9tIHVzZXIgdHlwaW5nIG9yIHByb3AgY2hhbmdlXG4gICAgY29uc3QgaXNGcm9tVXNlclR5cGluZyA9IHR5cGVvZiBwcmV2aW91c1JlZlZhbHVlID09PSAnc3RyaW5nJyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHNxbE9ialZhbHVlID09PSAnb2JqZWN0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShzcWxPYmpWYWx1ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsT2JqVmFsdWVbMF0/LnZhbHVlID09PSBwcmV2aW91c1JlZlZhbHVlXG4gICAgY29uc3QgaXNGcm9tUHJvcENoYW5nZSA9IEpTT04uc3RyaW5naWZ5KHByZXZpb3VzU3RhdGVWYWx1ZSkgPT09IEpTT04uc3RyaW5naWZ5KHNxbE9ialZhbHVlKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlU3FsRXhwck9iakNoYW5nZS1jYWxsZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBzcWxPYmpFeGlzdHM6ICEhc3FsT2JqLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICBzcWxPYmpWYWx1ZSxcbiAgICAgIHNxbE9ialZhbHVlVHlwZTogdHlwZW9mIHNxbE9ialZhbHVlLFxuICAgICAgc3FsT2JqSXNBcnJheTogQXJyYXkuaXNBcnJheShzcWxPYmpWYWx1ZSksXG4gICAgICBwcmV2aW91c1JlZlZhbHVlLFxuICAgICAgcHJldmlvdXNTdGF0ZVZhbHVlLFxuICAgICAgaXNGcm9tVXNlclR5cGluZyxcbiAgICAgIGlzRnJvbVByb3BDaGFuZ2UsXG4gICAgICB0cmlnZ2VyU291cmNlOiBpc0Zyb21Vc2VyVHlwaW5nID8gJ3VzZXItdHlwaW5nJyA6IChpc0Zyb21Qcm9wQ2hhbmdlID8gJ3Byb3AtY2hhbmdlJyA6ICd1bmtub3duJyksXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IGZpcnN0UGFydCA9IHNxbE9iaj8ucGFydHM/LlswXVxuICAgIGNvbnN0IHZhbHVlID0gZmlyc3RQYXJ0Py50eXBlID09PSAnU0lOR0xFJyA/IChmaXJzdFBhcnQgYXMgYW55KS52YWx1ZU9wdGlvbnM/LnZhbHVlIDogJ25vdC1zaW5nbGUnXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdzcWwtZXhwcmVzc2lvbi1jaGFuZ2VkJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgcGFydHNDb3VudDogc3FsT2JqPy5wYXJ0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICBmaXJzdFBhcnRWYWx1ZTogdmFsdWUsXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmVmFsdWU6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGlzQXJyYXlGb3JtYXQ6IEFycmF5LmlzQXJyYXkodmFsdWUpLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxPYmopXG4gICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihzcWxPYmopXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIGhhc2gtdHJpZ2dlcmVkIGNvbnZlcnNpb24gKHN0cmluZyAtPiBhcnJheSlcbiAgICAvLyBXaGVuIGhhc2ggdmFsdWUgY2hhbmdlcyBmb3Igc2FtZSBjb25maWdJZCwgU3FsRXhwcmVzc2lvblJ1bnRpbWUgY29udmVydHMgc3RyaW5nIHRvIGFycmF5IGZvcm1hdFxuICAgIGlmIChmaXJzdFBhcnQ/LnR5cGUgPT09ICdTSU5HTEUnICYmIGZpcnN0UGFydD8udmFsdWVPcHRpb25zPy52YWx1ZSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBmaXJzdFBhcnQudmFsdWVPcHRpb25zLnZhbHVlXG4gICAgICBjb25zdCBpc0FycmF5Rm9ybWF0ID0gQXJyYXkuaXNBcnJheSh2YWx1ZSlcbiAgICAgIGNvbnN0IGhhc0luaXRpYWxWYWx1ZSA9IGluaXRpYWxJbnB1dFZhbHVlICYmIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudFxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnc3FsLWV4cHJlc3Npb24tY2hhbmdlZC1jb252ZXJzaW9uLWNoZWNrJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGlzQXJyYXlGb3JtYXQsXG4gICAgICAgIGhhc0luaXRpYWxWYWx1ZSxcbiAgICAgICAgaGFzaFRyaWdnZXJlZFJlZlZhbHVlOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICB2YWx1ZVR5cGU6IHR5cGVvZiB2YWx1ZSxcbiAgICAgICAgdmFsdWU6IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiB2YWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBJZiB2YWx1ZSBjb252ZXJ0ZWQgdG8gYXJyYXkgZm9ybWF0IEFORCB0aGlzIHdhcyBoYXNoLXRyaWdnZXJlZCwgZmlyZSBldmVudFxuICAgICAgaWYgKGlzQXJyYXlGb3JtYXQgJiYgaGFzSW5pdGlhbFZhbHVlICYmIGluaXRpYWxJbnB1dFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXNIYXNoVmFsdWUgPSB2YWx1ZS5sZW5ndGggPiAwICYmIHZhbHVlWzBdPy52YWx1ZSA9PT0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ3NxbC1leHByZXNzaW9uLWNoYW5nZWQtbWF0Y2hlcy1jaGVjaycsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgbWF0Y2hlc0hhc2hWYWx1ZSxcbiAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICBjb252ZXJ0ZWRWYWx1ZUZpcnN0SXRlbTogdmFsdWVbMF0/LnZhbHVlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgaWYgKG1hdGNoZXNIYXNoVmFsdWUpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtY29udmVydGVkLXRvLWFycmF5JyxcbiAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICBjb252ZXJ0ZWRWYWx1ZTogdmFsdWUsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZpcmUgY3VzdG9tIGV2ZW50IGZvciBxdWVyeSBleGVjdXRpb24gdG8gd2FpdCBvblxuICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5ULCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgY29udmVydGVkVmFsdWU6IHZhbHVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtY29udmVydGVkLWV2ZW50LWRpc3BhdGNoZWQnLFxuICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRVhFQ1VUSU9OIFBPSU5UOiBRdWVyeSBleGVjdXRpb24gaGFwcGVucyBIRVJFIGFmdGVyIGNvbnZlcnNpb24gaXMgY29uZmlybWVkXG4gICAgICAgICAgLy8gVGhpcyBpcyB0aGUgT05MWSBwbGFjZSB3aGVyZSBoYXNoLXRyaWdnZXJlZCBxdWVyaWVzIHNob3VsZCBleGVjdXRlXG4gICAgICAgICAgLy8gVGhlIGV2ZW50IFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5UIGhhcyBiZWVuIGRpc3BhdGNoZWQgYWJvdmVcbiAgICAgICAgICAvLyBUaGlzIGRpcmVjdCBjYWxsIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmUgY29udmVyc2lvbiBoYXBwZW5zIHN5bmNocm9ub3VzbHlcbiAgICAgICAgICAvLyBUaGUgZXZlbnQgbGlzdGVuZXIgaW4gcXVlcnktdGFzay50c3ggaGFuZGxlcyB0aGUgYXN5bmMgY2FzZVxuICAgICAgICAgIGlmIChoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgJiYgZGF0YXNvdXJjZVJlYWR5ICYmIG91dHB1dERTKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXhlY3V0aW5nLXF1ZXJ5LWRpcmVjdGx5JyxcbiAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICBub3RlOiAnQ29udmVyc2lvbiBjb21wbGV0ZSAtIGV4ZWN1dGluZyBxdWVyeSBkaXJlY3RseSB2aWEgYXBwbHlRdWVyeSAoZXZlbnQtZHJpdmVuIHBhdHRlcm4pJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgdGhpcyBoYXBwZW5zIGFmdGVyIHRoZSBjdXJyZW50IGV2ZW50IGxvb3BcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBhcHBseVF1ZXJ5KClcbiAgICAgICAgICAgIH0sIDApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbY29uZmlnSWQsIGluaXRpYWxJbnB1dFZhbHVlLCB3aWRnZXRJZCwgZGF0YXNvdXJjZVJlYWR5LCBvdXRwdXREUywgYXBwbHlRdWVyeV0pXG5cbiAgY29uc3QgaGFuZGxlU3BhdGlhbEZpbHRlckNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChmaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmopID0+IHtcbiAgICBzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQgPSBmaWx0ZXJcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlUmVsYXRpb25DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHtcbiAgICBzcGF0aWFsUmVsYXRpb25SZWYuY3VycmVudCA9IHJlbFxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVCdWZmZXJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHtcbiAgICBidWZmZXJSZWYuY3VycmVudCA9IHsgZGlzdGFuY2UsIHVuaXQgfVxuICB9LCBbXSlcblxuICBjb25zdCBzaG93QXR0cmlidXRlRmlsdGVyID0gdXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHJPYmogIT0gbnVsbFxuICBjb25zdCBzaG93U3BhdGlhbEZpbHRlciA9IHNwYXRpYWxGaWx0ZXJFbmFibGVkICYmIHVzZVNwYXRpYWxGaWx0ZXIgJiYgKHNwYXRpYWxGaWx0ZXJUeXBlcy5sZW5ndGggPiAwIHx8IHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEgfHwgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDApXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgZm9ybSByZW5kZXJpbmdcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2Zvcm0tcmVuZGVyLWNoZWNrJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgZGF0YXNvdXJjZVJlYWR5LFxuICAgICAgdXNlQXR0cmlidXRlRmlsdGVyLFxuICAgICAgc3FsRXhwck9iajogc3FsRXhwck9iaiA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgc3FsRXhwck9ialBhcnRzOiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzaG93QXR0cmlidXRlRmlsdGVyLFxuICAgICAgb3JpZ2luRFM6IG9yaWdpbkRTID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUz8uaWQgfHwgJ25vbmUnLFxuICAgICAgc2hvd1NwYXRpYWxGaWx0ZXIsXG4gICAgICBpc0F1dG9IZWlnaHQsXG4gICAgICBvdXRwdXREUzogb3V0cHV0RFMgPyAnZXhpc3RzJyA6ICdudWxsJ1xuICAgIH0pXG4gIH0sIFtjb25maWdJZCwgZGF0YXNvdXJjZVJlYWR5LCB1c2VBdHRyaWJ1dGVGaWx0ZXIsIHNxbEV4cHJPYmosIHNob3dBdHRyaWJ1dGVGaWx0ZXIsIG9yaWdpbkRTLCBzaG93U3BhdGlhbEZpbHRlciwgaXNBdXRvSGVpZ2h0LCBvdXRwdXREU10pXG5cbiAgLy8gTG9nIHdoZW4gZm9ybSBjb250ZW50IHNob3VsZCByZW5kZXJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2hvd0F0dHJpYnV0ZUZpbHRlciAmJiBvcmlnaW5EUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2F0dHJpYnV0ZS1maWx0ZXItcmVhZHknLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHNxbEV4cHJPYmpQYXJ0czogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbCxcbiAgICAgICAgbm90ZTogJ0lucHV0IGZpZWxkIHNob3VsZCBiZSB2aXNpYmxlJ1xuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2F0dHJpYnV0ZS1maWx0ZXItbm90LXJlYWR5JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIHNob3dBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICAgIG9yaWdpbkRTOiBvcmlnaW5EUyA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgICB1c2VBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICAgIHNxbEV4cHJPYmo6IHNxbEV4cHJPYmogPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgICAgcmVhc29uOiAhc2hvd0F0dHJpYnV0ZUZpbHRlciA/ICdzaG93QXR0cmlidXRlRmlsdGVyIGlzIGZhbHNlJyA6ICdvcmlnaW5EUyBpcyBudWxsJ1xuICAgICAgfSlcbiAgICB9XG4gIH0sIFtzaG93QXR0cmlidXRlRmlsdGVyLCBvcmlnaW5EUywgY29uZmlnSWQsIHNxbEV4cHJPYmosIHVzZUF0dHJpYnV0ZUZpbHRlciwgYXR0cmlidXRlRmlsdGVyTGFiZWxdKVxuXG4gIC8vIENoZWNrIERPTSB2aXNpYmlsaXR5IGFmdGVyIHJlbmRlclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChmb3JtQ29udGVudFJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zdCBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZm9ybUNvbnRlbnRSZWYuY3VycmVudClcbiAgICAgIGNvbnN0IHJlY3QgPSBmb3JtQ29udGVudFJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnZm9ybS1jb250ZW50LWRvbS1jaGVjaycsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBleGlzdHM6ICEhZm9ybUNvbnRlbnRSZWYuY3VycmVudCxcbiAgICAgICAgZGlzcGxheTogY29tcHV0ZWRTdHlsZS5kaXNwbGF5LFxuICAgICAgICB2aXNpYmlsaXR5OiBjb21wdXRlZFN0eWxlLnZpc2liaWxpdHksXG4gICAgICAgIG9wYWNpdHk6IGNvbXB1dGVkU3R5bGUub3BhY2l0eSxcbiAgICAgICAgaGVpZ2h0OiBjb21wdXRlZFN0eWxlLmhlaWdodCxcbiAgICAgICAgbWF4SGVpZ2h0OiBjb21wdXRlZFN0eWxlLm1heEhlaWdodCxcbiAgICAgICAgZmxleDogY29tcHV0ZWRTdHlsZS5mbGV4LFxuICAgICAgICBmbGV4QmFzaXM6IGNvbXB1dGVkU3R5bGUuZmxleEJhc2lzLFxuICAgICAgICByZWN0SGVpZ2h0OiByZWN0LmhlaWdodCxcbiAgICAgICAgcmVjdFdpZHRoOiByZWN0LndpZHRoLFxuICAgICAgICBpc1Zpc2libGU6IHJlY3QuaGVpZ2h0ID4gMCAmJiByZWN0LndpZHRoID4gMCxcbiAgICAgICAgcGFyZW50SGVpZ2h0OiBmb3JtQ29udGVudFJlZi5jdXJyZW50LnBhcmVudEVsZW1lbnQ/LmNsaWVudEhlaWdodCB8fCAwXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2NvbmZpZ0lkLCBzaG93QXR0cmlidXRlRmlsdGVyLCBvcmlnaW5EU10pXG5cbiAgLy8gTG9nIHdoZW4gU3FsRXhwcmVzc2lvblJ1bnRpbWUga2V5IGNoYW5nZXMgKGNvbXBvbmVudCByZW1vdW50cykgT1IgZXhwcmVzc2lvbiBwcm9wIGNoYW5nZXNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzcWxFeHByUnVudGltZUtleSA9IGAke2NvbmZpZ0lkfS0ke2luaXRpYWxJbnB1dFZhbHVlIHx8ICdub25lJ31gXG4gICAgY29uc3QgZXhwcmVzc2lvblZhbHVlID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnU3FsRXhwcmVzc2lvblJ1bnRpbWUtcHJvcHMtY2hhbmdlZCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgc3FsRXhwclJ1bnRpbWVLZXksXG4gICAgICBleHByZXNzaW9uVmFsdWUsXG4gICAgICBleHByZXNzaW9uVmFsdWVUeXBlOiB0eXBlb2YgZXhwcmVzc2lvblZhbHVlLFxuICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheShleHByZXNzaW9uVmFsdWUpLFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZjogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgb3JpZ2luRFNFeGlzdHM6ICEhb3JpZ2luRFMsXG4gICAgICBub3RlOiAnU3FsRXhwcmVzc2lvblJ1bnRpbWUgcmVjZWl2aW5nIG5ldyBleHByZXNzaW9uIHByb3AgLSB3aWxsIGl0IGZpcmUgb25DaGFuZ2U/JyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtjb25maWdJZCwgaW5pdGlhbElucHV0VmFsdWUsIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIG9yaWdpbkRTXSlcblxuICByZXR1cm4gKFxuICAgIDxRdWVyeVRhc2tDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IHJlc2V0U3ltYm9sIH19PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LWZvcm0nIGNzcz17Z2V0Rm9ybVN0eWxlKGlzQXV0b0hlaWdodCl9PlxuICAgICAgICA8ZGl2IHJlZj17Zm9ybUNvbnRlbnRSZWZ9IGNsYXNzTmFtZT0ncXVlcnktZm9ybV9fY29udGVudCcgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufT5cbiAgICAgICAgICB7c2hvd0F0dHJpYnV0ZUZpbHRlciAmJiAoXG4gICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICByb2xlPSdncm91cCcgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0ncHgtNCcgXG4gICAgICAgICAgICAgIGNzcz17Y3NzYHBhZGRpbmctdG9wOiAycHg7YH1cbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YXR0cmlidXRlRmlsdGVyTGFiZWx9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmb3JtLXRpdGxlIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdkLW5vbmUnOiAhYXR0cmlidXRlRmlsdGVyTGFiZWwgJiYgIWF0dHJpYnV0ZUZpbHRlckRlc2MgfSl9IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB7YXR0cmlidXRlRmlsdGVyTGFiZWwgJiYgPGRpdiBjbGFzc05hbWU9J21yLTIgdGl0bGUyJz57YXR0cmlidXRlRmlsdGVyTGFiZWx9PC9kaXY+fVxuICAgICAgICAgICAgICAgIHthdHRyaWJ1dGVGaWx0ZXJEZXNjICYmIChcbiAgICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gdGl0bGU9e2F0dHJpYnV0ZUZpbHRlckRlc2N9PlxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyBpY29uIHR5cGU9J3RlcnRpYXJ5Jz48SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPjwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7b3JpZ2luRFMgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgbWFyZ2luOiAtMTBweCAwcHg7YH0+XG4gICAgICAgICAgICAgICAgICA8U3FsRXhwcmVzc2lvblJ1bnRpbWVcbiAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtjb25maWdJZH0tJHtpbml0aWFsSW5wdXRWYWx1ZSB8fCAnbm9uZSd9YH1cbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlPXtvcmlnaW5EU31cbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbj17YXR0cmlidXRlRmlsdGVyU3FsRXhwck9ian1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNxbEV4cHJPYmpDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7c2hvd0F0dHJpYnV0ZUZpbHRlciAmJiBzaG93U3BhdGlhbEZpbHRlciAmJiAoXG4gICAgICAgICAgICA8aHIgY2xhc3NOYW1lPSdtLTQnIGNzcz17Y3NzYGJvcmRlcjogbm9uZTsgaGVpZ2h0OiAxcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7YH0vPlxuICAgICAgICAgICl9XG4gICAgICAgICAge3Nob3dTcGF0aWFsRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxRdWVyeVRhc2tTcGF0aWFsRm9ybVxuICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgIGxhYmVsPXtzcGF0aWFsRmlsdGVyTGFiZWx9XG4gICAgICAgICAgICAgIGRlc2M9e3NwYXRpYWxGaWx0ZXJEZXNjfVxuICAgICAgICAgICAgICBmaWx0ZXJUeXBlcz17c3BhdGlhbEZpbHRlclR5cGVzfVxuICAgICAgICAgICAgICBtYXBXaWRnZXRJZHM9e3NwYXRpYWxNYXBXaWRnZXRJZHN9XG4gICAgICAgICAgICAgIGNyZWF0ZVRvb2xUeXBlcz17c3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzfVxuICAgICAgICAgICAgICBvbkZpbHRlckNoYW5nZT17aGFuZGxlU3BhdGlhbEZpbHRlckNoYW5nZX1cbiAgICAgICAgICAgICAgb25SZWxhdGlvbkNoYW5nZT17aGFuZGxlUmVsYXRpb25DaGFuZ2V9XG4gICAgICAgICAgICAgIG9uQnVmZmVyQ2hhbmdlPXtoYW5kbGVCdWZmZXJDaGFuZ2V9XG4gICAgICAgICAgICAgIHNwYXRpYWxSZWxhdGlvbnM9e3NwYXRpYWxSZWxhdGlvbnN9XG4gICAgICAgICAgICAgIGRzRW5hYmxlQnVmZmVyPXtzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXJ9XG4gICAgICAgICAgICAgIGRzQnVmZmVyRGlzdGFuY2U9e3NwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlfVxuICAgICAgICAgICAgICBkc0J1ZmZlclVuaXQ9e3NwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXR9XG4gICAgICAgICAgICAgIGRyYXdFbmFibGVCdWZmZXI9e3NwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcn1cbiAgICAgICAgICAgICAgZHJhd0J1ZmZlckRpc3RhbmNlPXtzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJEaXN0YW5jZX1cbiAgICAgICAgICAgICAgZHJhd0J1ZmZlclVuaXQ9e3NwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXR9XG4gICAgICAgICAgICAgIHVzZURhdGFTb3VyY2VzPXtzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlc31cbiAgICAgICAgICAgICAgdXNlUnVudGltZURhdGE9e3NwYXRpYWxJbmNsdWRlUnVudGltZURhdGF9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktZm9ybV9fYWN0aW9ucyBweC00IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgY2hlY2tlZD17cnVudGltZVpvb21Ub1NlbGVjdGVkfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhfLCBjaGVja2VkKSA9PiBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWQoY2hlY2tlZCl9XG4gICAgICAgICAgICBjbGFzc05hbWU9J21yLTInXG4gICAgICAgICAgLz5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21yLWF1dG8nIGNzcz17Y3NzYGZvbnQtc2l6ZTogMC44NzVyZW07IGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtgfT5cbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgnem9vbVRvU2VsZWN0ZWQnKX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPEJ1dHRvbiByZWY9e2FwcGx5QnV0dG9uUmVmfSBjb2xvcj0ncHJpbWFyeScgY2xhc3NOYW1lPSdtbC1hdXRvJyBkaXNhYmxlZD17IWRhdGFzb3VyY2VSZWFkeSB8fCAhaXNJbnB1dFZhbGlkfSBvbkNsaWNrPXthcHBseVF1ZXJ5fT5cbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgnYXBwbHknKX1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICB7KHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA+IDAgfHwgc2hvd1NwYXRpYWxGaWx0ZXIpICYmIChcbiAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdtbC0yJyBvbkNsaWNrPXtyZXNldFF1ZXJ5fT57Z2V0STE4bk1lc3NhZ2UoJ3Jlc2V0Jyl9PC9CdXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L1F1ZXJ5VGFza0NvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIHR5cGUgSWNvblJlc3VsdCwgdHlwZSBJbW11dGFibGVPYmplY3QgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBJY29uIH0gZnJvbSAnamltdS11aSdcblxuaW50ZXJmYWNlIENvbnRlbnRQcm9wcyB7XG4gIGljb24/OiBJY29uUmVzdWx0IHwgSW1tdXRhYmxlT2JqZWN0PEljb25SZXN1bHQ+XG4gIG5hbWU6IHN0cmluZ1xufVxuXG5jb25zdCB0ZXh0U3R5bGUgPSBjc3NgXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGZvbnQtc2l6ZTogMC44NzVyZW07XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tMYWJlbCAocHJvcHM6IENvbnRlbnRQcm9wcykge1xuICBjb25zdCB7IGljb24sIG5hbWUgfSA9IHByb3BzXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciB0ZXh0LXRydW5jYXRlJyBjc3M9e3RleHRTdHlsZX0+XG4gICAgICB7aWNvbiAmJiA8SWNvbiBjbGFzc05hbWU9J3F1ZXJ5LXRhc2staWNvbiBtci0yJyBpY29uPXtpY29uLnN2Z30gLz59XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZScgdGl0bGU9e25hbWV9PlxuICAgICAgICB7bmFtZX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSW1tdXRhYmxlQXJyYXksIGNsYXNzTmFtZXMsIGxvZGFzaCwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFNpemUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlUYXNrIH0gZnJvbSAnLi9xdWVyeS10YXNrJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGlzdCB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0J1xuaW1wb3J0IHsgVGFza0xpc3RQb3BwZXJXcmFwcGVyIH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QtcG9wcGVyLXdyYXBwZXInXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcblxuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB3aWRnZXRMYWJlbDogc3RyaW5nXG4gIHdyYXA6IGJvb2xlYW5cbiAgbWluU2l6ZTogU2l6ZVxuICBkZWZhdWx0U2l6ZTogU2l6ZVxuICBxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9XG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG59XG5cbmNvbnN0IFNQQUNFID0gOFxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgPiBkaXYge1xuICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICB9XG5gXG5cbi8vIHNob3cgdGFzayBsYWJlbCBhbmQgYW4gYXJyb3cgdG8gdGhlIHRhc2sgY29udGVudFxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tMaXN0SW5saW5lIChwcm9wczogUXVlcnlUYXNrTGlzdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtcywgd2lkZ2V0SWQsIG1pblNpemUsIGRlZmF1bHRTaXplLCBkZWZhdWx0UGFnZVNpemUsIHdpZGdldExhYmVsLCB3cmFwID0gZmFsc2UgfSA9IHByb3BzXG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBjb250YWluZXJXaWR0aFJlZiA9IFJlYWN0LnVzZVJlZjxudW1iZXI+KDApXG4gIGNvbnN0IGNvbnRlbnRXaWR0aFJlZiA9IFJlYWN0LnVzZVJlZjx7IFtrZXk6IHN0cmluZ106IG51bWJlciB9Pih7fSlcbiAgY29uc3QgW251bU9mRXhwYW5kZWQsIHNldE51bU9mRXhwYW5kZWRdID0gUmVhY3QudXNlU3RhdGUocXVlcnlJdGVtcy5sZW5ndGgpXG4gIGNvbnN0IFtvcGVuZWRQb3BwZXIsIHNldE9wZW5lZFBvcHBlcl0gPSBSZWFjdC51c2VTdGF0ZSgtMSlcbiAgY29uc3QgcmVzaXplT2JzZXJ2ZXJSZWYgPSBSZWFjdC51c2VSZWY8UmVzaXplT2JzZXJ2ZXI+KG51bGwpXG5cbiAgY29uc3QgYWRqdXN0Q29udGVudCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBsZXQgdG90YWwgPSAwXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1PZkV4cGFuZGVkOyBpKyspIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBxdWVyeUl0ZW1zW2ldXG4gICAgICBjb25zdCBpdGVtV2lkdGggPSBjb250ZW50V2lkdGhSZWYuY3VycmVudFtpdGVtLmNvbmZpZ0lkXVxuICAgICAgaWYgKGl0ZW1XaWR0aCA+IDApIHtcbiAgICAgICAgdG90YWwgKz0gaXRlbVdpZHRoICsgU1BBQ0VcbiAgICAgICAgaWYgKHRvdGFsID49IGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgJiYgbnVtT2ZFeHBhbmRlZCAhPT0gaSkge1xuICAgICAgICAgIHNldE51bU9mRXhwYW5kZWQoaSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC8vIGNvbnRlbnQgd2lkdGggbm90IHJlYWR5XG4gICAgICB9XG4gICAgfVxuICAgIHNldE51bU9mRXhwYW5kZWQocXVlcnlJdGVtcy5sZW5ndGgpXG4gIH0sIFtudW1PZkV4cGFuZGVkLCBxdWVyeUl0ZW1zXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZXNpemVPYnNlcnZlclJlZi5jdXJyZW50KSB7XG4gICAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgIH1cbiAgICAvLyBiaW5kIHdpdGggdGhlIG5ldyBldmVudCBoYW5kbGVyXG4gICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudCA9IG5ldyBSZXNpemVPYnNlcnZlcihsb2Rhc2gudGhyb3R0bGUoKGVudHJpZXMpID0+IHtcbiAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKVxuICAgICAgaWYgKGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgIT09IHdpZHRoKSB7XG4gICAgICAgIGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgPSB3aWR0aFxuICAgICAgICBhZGp1c3RDb250ZW50KClcbiAgICAgIH1cbiAgICB9LCAyMDApKVxuICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQub2JzZXJ2ZShjb250YWluZXJSZWYuY3VycmVudClcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgIH1cbiAgfSwgW2FkanVzdENvbnRlbnRdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgPSBjb250YWluZXJSZWYuY3VycmVudD8uY2xpZW50V2lkdGhcbiAgICBhZGp1c3RDb250ZW50KClcbiAgfSlcblxuICBjb25zdCBoYW5kbGVJdGVtV2lkdGhDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5kZXg6IG51bWJlciwgd2lkdGg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5SXRlbSA9IHF1ZXJ5SXRlbXNbaW5kZXhdXG4gICAgaWYgKGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W3F1ZXJ5SXRlbS5jb25maWdJZF0gIT09IHdpZHRoKSB7XG4gICAgICBjb250ZW50V2lkdGhSZWYuY3VycmVudFtxdWVyeUl0ZW0uY29uZmlnSWRdID0gd2lkdGhcbiAgICAgIGFkanVzdENvbnRlbnQoKVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbXMsIGFkanVzdENvbnRlbnRdKVxuXG4gIGNvbnN0IGhhbmRsZVBvcHBlck9wZW5lZENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyLCBpc09wZW46IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBzZXRPcGVuZWRQb3BwZXIoaW5kZXgpXG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gb3BlbmVkUG9wcGVyKSB7XG4gICAgICAvLyBjdXJyZW50IHBvcHBlciBpcyBjbG9zZWRcbiAgICAgIHNldE9wZW5lZFBvcHBlcigtMSlcbiAgICB9XG4gIH0sIFtvcGVuZWRQb3BwZXJdKVxuXG4gIGNvbnN0IFtleHBhbmRlZEFycmF5LCBub25FeHBhbmRlZEFycmF5XSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGV4cGFuZGVkQXJyYXkgPSBbXVxuICAgIGNvbnN0IG5vbkV4cGFuZGVkQXJyYXkgPSBbXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVlcnlJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgPCBudW1PZkV4cGFuZGVkKSB7XG4gICAgICAgIGV4cGFuZGVkQXJyYXkucHVzaChxdWVyeUl0ZW1zW2ldKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9uRXhwYW5kZWRBcnJheS5wdXNoKHF1ZXJ5SXRlbXNbaV0pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbZXhwYW5kZWRBcnJheSwgbm9uRXhwYW5kZWRBcnJheV1cbiAgfSwgW3F1ZXJ5SXRlbXMsIG51bU9mRXhwYW5kZWRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiByZWY9e2NvbnRhaW5lclJlZn0gY3NzPXtzdHlsZX0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdydW50aW1lLXF1ZXJ5X19xdWVyeS1saXN0IGgtMTAwIGQtZmxleCcsIHsgJ2ZsZXgtd3JhcCc6IHdyYXAsICdhbGlnbi1jb250ZW50LXN0YXJ0Jzogd3JhcCB9KX0+XG4gICAgICB7ZXhwYW5kZWRBcnJheS5tYXAoKHF1ZXJ5SXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgICAgICAgcmV0dXJuIDxUYXNrTGlzdFBvcHBlcldyYXBwZXJcbiAgICAgICAgICBpZD17aW5kZXh9XG4gICAgICAgICAga2V5PXtjdXJyZW50SXRlbS5jb25maWdJZH1cbiAgICAgICAgICBpY29uPXtjdXJyZW50SXRlbS5pY29ufVxuICAgICAgICAgIGJ1dHRvblR5cGU9J2RlZmF1bHQnXG4gICAgICAgICAgbGFiZWw9e2N1cnJlbnRJdGVtLmRpc3BsYXlMYWJlbCA/IGN1cnJlbnRJdGVtLm5hbWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgcG9wcGVyVGl0bGU9e2N1cnJlbnRJdGVtLm5hbWV9XG4gICAgICAgICAgb25XaWR0aENoYW5nZT17aGFuZGxlSXRlbVdpZHRoQ2hhbmdlfVxuICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgIG9uT3BlbmVkQ2hhbmdlPXtoYW5kbGVQb3BwZXJPcGVuZWRDaGFuZ2V9XG4gICAgICAgICAgZm9yY2VDbG9zZT17b3BlbmVkUG9wcGVyID49IDAgJiYgb3BlbmVkUG9wcGVyICE9PSBpbmRleH1cbiAgICAgICAgPlxuICAgICAgICAgIDxRdWVyeVRhc2tcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgIHRvdGFsPXsxfVxuICAgICAgICAgICAgaXNJblBvcHBlclxuICAgICAgICAgICAgcXVlcnlJdGVtPXtjdXJyZW50SXRlbX1cbiAgICAgICAgICAgIHdyYXBwZWRJblBvcHBlcj17dHJ1ZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0ncGItNCdcbiAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfVxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU9e2N1cnJlbnRJdGVtLnNob3J0SWQgPT09IHByb3BzLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID8gcHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWUudmFsdWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtwcm9wcy5vbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZD17Y3VycmVudEl0ZW0uc2hvcnRJZH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1Rhc2tMaXN0UG9wcGVyV3JhcHBlcj5cbiAgICAgIH0pfVxuXG4gICAgICB7bm9uRXhwYW5kZWRBcnJheS5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgIGlkPXtleHBhbmRlZEFycmF5Lmxlbmd0aCArIDF9XG4gICAgICAgICAgaWNvbj17aWNvbk1hcC5pY29uTW9yZX1cbiAgICAgICAgICBtaW5TaXplPXttaW5TaXplfVxuICAgICAgICAgIGJ1dHRvblR5cGU9J2RlZmF1bHQnXG4gICAgICAgICAgcG9wcGVyVGl0bGU9e3dpZGdldExhYmVsfVxuICAgICAgICAgIGRlZmF1bHRTaXplPXtkZWZhdWx0U2l6ZX1cbiAgICAgICAgICBvbk9wZW5lZENoYW5nZT17aGFuZGxlUG9wcGVyT3BlbmVkQ2hhbmdlfVxuICAgICAgICAgIGZvcmNlQ2xvc2U9e29wZW5lZFBvcHBlciA+PSAwICYmIG9wZW5lZFBvcHBlciAhPT0gZXhwYW5kZWRBcnJheS5sZW5ndGggKyAxfVxuICAgICAgICA+XG4gICAgICAgICAgPFF1ZXJ5VGFza0xpc3Qgd2lkZ2V0SWQ9e3dpZGdldElkfSBpc0luUG9wcGVyIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfSBxdWVyeUl0ZW1zPXtub25FeHBhbmRlZEFycmF5IGFzIGFueX0gY2xhc3NOYW1lPSdwYi00JyBpbml0aWFsUXVlcnlWYWx1ZT17cHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWV9IG9uSGFzaFBhcmFtZXRlclVzZWQ9e3Byb3BzLm9uSGFzaFBhcmFtZXRlclVzZWR9IC8+XG4gICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSWNvblJlc3VsdCwgdHlwZSBJbW11dGFibGVPYmplY3QsIGxvZGFzaCwgY2xhc3NOYW1lcywgaG9va3MsIGlzS2V5Ym9hcmRNb2RlLCBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgSWNvbiwgTW9iaWxlUGFuZWwsIHR5cGUgU2l6ZSwgdHlwZSBCdXR0b25UeXBlLCBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTLCBGbG9hdGluZ1BhbmVsLCB0eXBlIFNoaWZ0T3B0aW9ucyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBXSURHRVRfVkVSU0lPTiB9IGZyb20gJy4uL3ZlcnNpb24nXG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFza0xpc3RQb3BwZXJXcmFwcGVyUHJvcHMge1xuICBpZDogbnVtYmVyXG4gIGljb24/OiBzdHJpbmcgfCBJbW11dGFibGVPYmplY3Q8SWNvblJlc3VsdD5cbiAgbGFiZWw/OiBzdHJpbmdcbiAgZm9yY2VDbG9zZT86IGJvb2xlYW5cbiAgcG9wcGVyVGl0bGU/OiBzdHJpbmdcbiAgYnV0dG9uVHlwZT86IEJ1dHRvblR5cGVcbiAgb25XaWR0aENoYW5nZT86IChpZDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uT3BlbmVkQ2hhbmdlPzogKGlkOiBudW1iZXIsIGlzT3BlbjogYm9vbGVhbikgPT4gdm9pZFxuICBtaW5TaXplOiBTaXplXG4gIGRlZmF1bHRTaXplOiBTaXplXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdEVsZW1lbnQ8YW55PlxufVxuXG5jb25zdCBzaGlmdE9wdGlvbnM6IFNoaWZ0T3B0aW9ucyA9IHsgcGFkZGluZzogMSB9XG5cbmV4cG9ydCBmdW5jdGlvbiBUYXNrTGlzdFBvcHBlcldyYXBwZXIgKHByb3BzOiBUYXNrTGlzdFBvcHBlcldyYXBwZXJQcm9wcykge1xuICBjb25zdCB7IGlkLCBpY29uLCBsYWJlbCwgZm9yY2VDbG9zZSwgb25PcGVuZWRDaGFuZ2UsIHBvcHBlclRpdGxlLCBtaW5TaXplLCBkZWZhdWx0U2l6ZSwgb25XaWR0aENoYW5nZSwgYnV0dG9uVHlwZSA9ICd0ZXJ0aWFyeScsIGNoaWxkcmVuIH0gPSBwcm9wc1xuICBjb25zdCBpY29uUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IHdpZHRoUmVmID0gUmVhY3QudXNlUmVmKDApXG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW3BvcHBlclZlcnNpb24sIHNldFBvcHBlclZlcnNpb25dID0gUmVhY3QudXNlU3RhdGUoMClcbiAgY29uc3QgaXNNb2JpbGUgPSBob29rcy51c2VDaGVja1NtYWxsQnJvd3NlclNpemVNb2RlKClcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChmb3JjZUNsb3NlKSB7XG4gICAgICBzZXRJc09wZW4oZmFsc2UpXG4gICAgfVxuICB9LCBbZm9yY2VDbG9zZV0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBvbldpZHRoQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB3aWR0aFJlZi5jdXJyZW50ID0gTWF0aC5yb3VuZChpY29uUmVmLmN1cnJlbnQuY2xpZW50V2lkdGgpXG4gICAgICBvbldpZHRoQ2hhbmdlKGlkLCB3aWR0aFJlZi5jdXJyZW50KVxuICAgICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIobG9kYXNoLnRocm90dGxlKChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKVxuICAgICAgICBpZiAod2lkdGhSZWYuY3VycmVudCAhPT0gd2lkdGgpIHtcbiAgICAgICAgICB3aWR0aFJlZi5jdXJyZW50ID0gd2lkdGhcbiAgICAgICAgICBvbldpZHRoQ2hhbmdlKGlkLCB3aWR0aClcbiAgICAgICAgfVxuICAgICAgfSwgMjAwKSlcbiAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUoaWNvblJlZi5jdXJyZW50KVxuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KClcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgdG9nZ2xlUG9wcGVyID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygb25PcGVuZWRDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9uT3BlbmVkQ2hhbmdlKGlkLCAhaXNPcGVuKVxuICAgIH1cbiAgICBzZXRJc09wZW4oIWlzT3BlbilcbiAgICBzZXRQb3BwZXJWZXJzaW9uKHBvcHBlclZlcnNpb24gKyAxKVxuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoaXNLZXlib2FyZE1vZGUoKSkge1xuICAgICAgICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGljb25SZWYuY3VycmVudClcbiAgICAgICAgfVxuICAgICAgfSwgMjAwKVxuICAgIH1cbiAgfSwgW2lkLCBpc09wZW4sIHBvcHBlclZlcnNpb24sIG9uT3BlbmVkQ2hhbmdlXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdydW50aW1lLXF1ZXJ5X193aWRnZXQtcG9wcGVyJz5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgdGl0bGU9e2xhYmVsfVxuICAgICAgICBhcmlhLWxhYmVsPXtsYWJlbH1cbiAgICAgICAgaWNvbiBzaXplPSdzbSdcbiAgICAgICAgdmFyaWFudD17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/ICd0ZXh0JyA6IHVuZGVmaW5lZH1cbiAgICAgICAgY29sb3I9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyAnaW5oZXJpdCcgOiB1bmRlZmluZWR9XG4gICAgICAgIHR5cGU9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyB1bmRlZmluZWQgOiBidXR0b25UeXBlfVxuICAgICAgICByZWY9e2ljb25SZWZ9XG4gICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVBvcHBlcn1cbiAgICAgID5cbiAgICAgICAge2ljb24gJiYgPEljb25cbiAgICAgICAgICBzaXplPXsxNn1cbiAgICAgICAgICB7Li4uKHR5cGVvZiBpY29uID09PSAnc3RyaW5nJyA/IHsgaWNvbiB9IDogeyBpY29uOiBpY29uLnN2ZywgY29sb3I6IGJ1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyB1bmRlZmluZWQgOiBpY29uLnByb3BlcnRpZXMuY29sb3IgfSl9XG4gICAgICAgIC8+fVxuICAgICAgICB7bGFiZWwgJiYgPGRpdlxuICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gICAgICAgICAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDI7XG4gICAgICAgICAgICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsO1xuICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjI7XG4gICAgICAgICAgYH1cbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoeyAnbWwtMic6IGljb24gIT0gbnVsbCB9KX0+e2xhYmVsfTwvZGl2Pn1cbiAgICAgIDwvQnV0dG9uPlxuICAgICAge2lzTW9iaWxlXG4gICAgICAgID8gPE1vYmlsZVBhbmVsIG9wZW49e2lzT3Blbn0gdGl0bGU9e3BvcHBlclRpdGxlfSBvbkNsb3NlPXt0b2dnbGVQb3BwZXJ9PlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMXJlbTsgLyogU2NvcGVkIHBhZGRpbmcgdG8gc3BhY2UgY29udGVudCBmcm9tIGZvb3RlciAqL1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDEycHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICB7LyogQ29kZS9PcGVuIFNvdXJjZSBTeW1ib2wgKi99XG4gICAgICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGVcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvTW9iaWxlUGFuZWw+XG4gICAgICAgIDogPEZsb2F0aW5nUGFuZWxcbiAgICAgICAgICAgIGNsYXNzTmFtZT0ndWktdW5pdC1wb3BwZXIgdWktdW5pdC1wb3BwZXJfay1hcnJhbmdlbWVudC1pY29uIGZsZXgtZ3Jvdy0xJ1xuICAgICAgICAgICAgaGVhZGVyQ2xhc3NOYW1lPXtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTfVxuICAgICAgICAgICAgb3Blbj17aXNPcGVufVxuICAgICAgICAgICAgb25IZWFkZXJDbG9zZT17dG9nZ2xlUG9wcGVyfVxuICAgICAgICAgICAgdG9nZ2xlPXt0b2dnbGVQb3BwZXJ9XG4gICAgICAgICAgICBoZWFkZXJUaXRsZT17cG9wcGVyVGl0bGV9XG4gICAgICAgICAgICBtaW5TaXplPXttaW5TaXplfVxuICAgICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgICAgZHJhZ0JvdW5kcz0nYm9keSdcbiAgICAgICAgICAgIHZlcnNpb249e3BvcHBlclZlcnNpb259XG4gICAgICAgICAgICByZWZlcmVuY2U9e2ljb25SZWZ9XG4gICAgICAgICAgICBwbGFjZW1lbnQ9J2JvdHRvbS1zdGFydCdcbiAgICAgICAgICAgIHNoaWZ0T3B0aW9ucz17c2hpZnRPcHRpb25zfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDFyZW07IC8qIFNjb3BlZCBwYWRkaW5nIHRvIHNwYWNlIGNvbnRlbnQgZnJvbSBmb290ZXIgKi9cbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgey8qIFN0YXRpb25hcnkgZm9vdGVyICovfVxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyKTtcbiAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXRlcnRpYXJ5KTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIxNiAxOCAyMiAxMiAxNiA2XCIvPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiOCA2IDIgMTIgOCAxOFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgUXVlcnlTaW1wbGUgYnkgTWFwU2ltcGxlXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuN3JlbTtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L0Zsb2F0aW5nUGFuZWw+XG4gICAgICB9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIFJlYWN0LCB0eXBlIEltbXV0YWJsZUFycmF5LCBJbW11dGFibGUsIHR5cGUgSW1tdXRhYmxlT2JqZWN0LCBob29rcywgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBTZWxlY3QgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlLCBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlUYXNrIH0gZnJvbSAnLi9xdWVyeS10YXNrJ1xuaW1wb3J0IHsgRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTUyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgdHlwZSB7IEV2ZW50TWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLWV2ZW50LWhhbmRsaW5nJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0xpc3RQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgaXNJblBvcHBlcj86IGJvb2xlYW5cbiAgZGVmYXVsdFBhZ2VTaXplPzogbnVtYmVyXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH1cbiAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24/OiBib29sZWFuXG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBvblJlc3VsdHNNb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI/OiAob3V0cHV0RFM6IERhdGFTb3VyY2UpID0+IFByb21pc2U8dm9pZD5cbiAgb25DbGVhckdyYXBoaWNzTGF5ZXI/OiAoKSA9PiB2b2lkXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbiAgb25UYWJDaGFuZ2U/OiAodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB2b2lkXG4gIGV2ZW50TWFuYWdlcj86IEV2ZW50TWFuYWdlciAgLy8gQ2h1bmsgNy4xOiBFdmVudCBIYW5kbGluZyBNYW5hZ2VyXG59XG5cbmludGVyZmFjZSBHcm91cGVkUXVlcmllcyB7XG4gIGdyb3VwczogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9XG4gIHVuZ3JvdXBlZDogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT5cbiAgZ3JvdXBPcmRlcjogc3RyaW5nW11cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHNvcnQgcXVlcmllcyBieSBkaXNwbGF5IG9yZGVyIChsb3dlciBudW1iZXJzIGFwcGVhciBmaXJzdClcbi8vIFF1ZXJpZXMgd2l0aG91dCBvcmRlciBtYWludGFpbiB0aGVpciBvcmlnaW5hbCByZWxhdGl2ZSBwb3NpdGlvbnNcbmZ1bmN0aW9uIHNvcnRRdWVyeUl0ZW1zQnlPcmRlcihxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPik6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+IHtcbiAgLy8gSGFuZGxlIG51bGwvdW5kZWZpbmVkL2VtcHR5IGNhc2VzXG4gIGlmICghcXVlcnlJdGVtcyB8fCBxdWVyeUl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBxdWVyeUl0ZW1zIHx8IEltbXV0YWJsZShbXSlcbiAgfVxuICBcbiAgLy8gU2FmZWx5IGNvbnZlcnQgdG8gcmVndWxhciBhcnJheSBmb3Igc29ydGluZ1xuICAvLyBIYW5kbGUgYm90aCBJbW11dGFibGVBcnJheSAoaGFzIHRvQXJyYXkgbWV0aG9kKSBhbmQgcmVndWxhciBhcnJheXNcbiAgY29uc3QgaXRlbXNBcnJheSA9IChxdWVyeUl0ZW1zICYmIHR5cGVvZiBxdWVyeUl0ZW1zLnRvQXJyYXkgPT09ICdmdW5jdGlvbicpIFxuICAgID8gcXVlcnlJdGVtcy50b0FycmF5KCkgXG4gICAgOiAoQXJyYXkuaXNBcnJheShxdWVyeUl0ZW1zKSA/IHF1ZXJ5SXRlbXMgOiBbXSlcbiAgXG4gIGNvbnN0IGl0ZW1zV2l0aEluZGV4ID0gaXRlbXNBcnJheS5tYXAoKGl0ZW0sIGluZGV4KSA9PiAoeyBpdGVtLCBvcmlnaW5hbEluZGV4OiBpbmRleCB9KSlcbiAgaXRlbXNXaXRoSW5kZXguc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IG9yZGVyQSA9IGEuaXRlbS5vcmRlciA/PyBJbmZpbml0eVxuICAgIGNvbnN0IG9yZGVyQiA9IGIuaXRlbS5vcmRlciA/PyBJbmZpbml0eVxuICAgIGlmIChvcmRlckEgIT09IG9yZGVyQikge1xuICAgICAgcmV0dXJuIG9yZGVyQSAtIG9yZGVyQlxuICAgIH1cbiAgICAvLyBJZiBvcmRlciBpcyBlcXVhbCAoYm90aCBJbmZpbml0eSBvciBzYW1lIG51bWJlciksIG1haW50YWluIG9yaWdpbmFsIGluZGV4IG9yZGVyXG4gICAgcmV0dXJuIGEub3JpZ2luYWxJbmRleCAtIGIub3JpZ2luYWxJbmRleFxuICB9KVxuICByZXR1cm4gSW1tdXRhYmxlKGl0ZW1zV2l0aEluZGV4Lm1hcCgoeyBpdGVtIH0pID0+IGl0ZW0pKVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ3JvdXAgcXVlcmllcyBieSBncm91cElkXG5jb25zdCBncm91cFF1ZXJpZXMgPSAocXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4pOiBHcm91cGVkUXVlcmllcyA9PiB7XG4gIGNvbnN0IGdyb3VwczogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9ID0ge31cbiAgY29uc3QgdW5ncm91cGVkOiBBcnJheTx7IGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiwgaW5kZXg6IG51bWJlciB9PiA9IFtdXG4gIGNvbnN0IGdyb3VwT3JkZXI6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgZ3JvdXBJbmRleE1hcDogeyBbZ3JvdXBJZDogc3RyaW5nXTogbnVtYmVyIH0gPSB7fVxuICBcbiAgLy8gRmlyc3QgcGFzczogY29sbGVjdCBpdGVtcyBpbiByZWd1bGFyIGFycmF5c1xuICBjb25zdCBncm91cEl0ZW1zTWFwOiB7IFtncm91cElkOiBzdHJpbmddOiBRdWVyeUl0ZW1UeXBlW10gfSA9IHt9XG5cbiAgcXVlcnlJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGlmIChpdGVtLmdyb3VwSWQpIHtcbiAgICAgIGlmICghZ3JvdXBJdGVtc01hcFtpdGVtLmdyb3VwSWRdKSB7XG4gICAgICAgIGdyb3VwSXRlbXNNYXBbaXRlbS5ncm91cElkXSA9IFtdXG4gICAgICAgIGdyb3Vwc1tpdGVtLmdyb3VwSWRdID0ge1xuICAgICAgICAgIGl0ZW1zOiBJbW11dGFibGUoW10pLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiBpdGVtLmdyb3VwRGlzcGxheU5hbWUgfHwgaXRlbS5uYW1lIHx8IGBHcm91cCAke2l0ZW0uZ3JvdXBJZH1gLFxuICAgICAgICAgIGljb246IGl0ZW0uaWNvblxuICAgICAgICB9XG4gICAgICAgIGdyb3VwSW5kZXhNYXBbaXRlbS5ncm91cElkXSA9IGluZGV4XG4gICAgICAgIGdyb3VwT3JkZXIucHVzaChpdGVtLmdyb3VwSWQpXG4gICAgICB9XG4gICAgICBncm91cEl0ZW1zTWFwW2l0ZW0uZ3JvdXBJZF0ucHVzaChpdGVtKVxuICAgIH0gZWxzZSB7XG4gICAgICB1bmdyb3VwZWQucHVzaCh7IGl0ZW0sIGluZGV4IH0pXG4gICAgfVxuICB9KVxuXG4gIC8vIFNlY29uZCBwYXNzOiBjb252ZXJ0IHJlZ3VsYXIgYXJyYXlzIHRvIEltbXV0YWJsZUFycmF5c1xuICBPYmplY3Qua2V5cyhncm91cEl0ZW1zTWFwKS5mb3JFYWNoKGdyb3VwSWQgPT4ge1xuICAgIGdyb3Vwc1tncm91cElkXS5pdGVtcyA9IEltbXV0YWJsZShncm91cEl0ZW1zTWFwW2dyb3VwSWRdKVxuICB9KVxuXG4gIHJldHVybiB7IGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBkaXNwbGF5IG5hbWUgZm9yIHF1ZXJ5IGluIGRyb3Bkb3duXG4vLyBVc2VzOiBzZWFyY2hBbGlhcyB8fCBqaW11RmllbGROYW1lIHx8IGl0ZW0ubmFtZSB8fCBmYWxsYmFja1xuY29uc3QgZ2V0UXVlcnlEaXNwbGF5TmFtZSA9IChpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4pOiBzdHJpbmcgPT4ge1xuICAvLyBGaXJzdCBwcmlvcml0eTogc2VhcmNoQWxpYXMgaWYgc2V0XG4gIGlmIChpdGVtLnNlYXJjaEFsaWFzKSB7XG4gICAgcmV0dXJuIGl0ZW0uc2VhcmNoQWxpYXNcbiAgfVxuICBcbiAgLy8gU2Vjb25kIHByaW9yaXR5OiBmaWVsZCBuYW1lIGZyb20gU1FMIGV4cHJlc3Npb25cbiAgY29uc3QgamltdUZpZWxkTmFtZSA9IGl0ZW0uc3FsRXhwck9iaj8ucGFydHM/LlswXT8uamltdUZpZWxkTmFtZVxuICBpZiAoamltdUZpZWxkTmFtZSkge1xuICAgIHJldHVybiBqaW11RmllbGROYW1lXG4gIH1cbiAgXG4gIC8vIFRoaXJkIHByaW9yaXR5OiBpdGVtIG5hbWVcbiAgaWYgKGl0ZW0ubmFtZSkge1xuICAgIHJldHVybiBpdGVtLm5hbWVcbiAgfVxuICBcbiAgLy8gRmFsbGJhY2tcbiAgcmV0dXJuICdRdWVyeSdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza0xpc3QgKHByb3BzOiBRdWVyeVRhc2tMaXN0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW1zLCB3aWRnZXRJZCwgZGVmYXVsdFBhZ2VTaXplLCBpc0luUG9wcGVyID0gZmFsc2UsIGNsYXNzTmFtZSA9ICcnLCBpbml0aWFsUXVlcnlWYWx1ZSwgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gPSBmYWxzZSwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcmVzdWx0c01vZGUsIG9uUmVzdWx0c01vZGVDaGFuZ2UsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcsIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIsIG9uQ2xlYXJHcmFwaGljc0xheWVyLCBhY3RpdmVUYWIsIG9uVGFiQ2hhbmdlLCBldmVudE1hbmFnZXIgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2VzKVxuICBcbiAgLy8gTG9nIHdoZW4gcHJvcHMgYXJlIHJlY2VpdmVkXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5dGFza2xpc3QtcHJvcHMtcmVjZWl2ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBwcm9wczoge1xuICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISFpbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiBpbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvblxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAncXVlcnktdGFzay1saXN0LXByb3BzLXJlY2VpdmVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IGluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbaW5pdGlhbFF1ZXJ5VmFsdWUsIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLCB3aWRnZXRJZF0pXG4gIFxuICAvLyBTb3J0IHF1ZXJpZXMgYnkgZGlzcGxheSBvcmRlciBiZWZvcmUgZ3JvdXBpbmdcbiAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgcXVlcnlJdGVtcyBtaWdodCBiZSB1bmRlZmluZWQvbnVsbCBvciBub3QgYW4gSW1tdXRhYmxlQXJyYXlcbiAgY29uc3Qgc29ydGVkUXVlcnlJdGVtcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghcXVlcnlJdGVtcykge1xuICAgICAgcmV0dXJuIEltbXV0YWJsZShbXSlcbiAgICB9XG4gICAgcmV0dXJuIHNvcnRRdWVyeUl0ZW1zQnlPcmRlcihxdWVyeUl0ZW1zKVxuICB9LCBbcXVlcnlJdGVtc10pXG4gIFxuICBjb25zdCB7IGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyIH0gPSBSZWFjdC51c2VNZW1vKCgpID0+IGdyb3VwUXVlcmllcyhzb3J0ZWRRdWVyeUl0ZW1zKSwgW3NvcnRlZFF1ZXJ5SXRlbXNdKVxuICBcbiAgLy8gT25seSB1c2UgdGhlIHByb3AgaW5pdGlhbFF1ZXJ5VmFsdWUgd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVucyB0aGUgd2lkZ2V0XG4gIC8vIFF1ZXJ5U2ltcGxlIHNob3VsZCBub3QgYXV0b25vbW91c2x5IHJlYWN0IHRvIGluaXRpYWxRdWVyeVZhbHVlIHByb3AgY2hhbmdlc1xuICAvLyBIZWxwZXJTaW1wbGUgaXMgdGhlIG9yY2hlc3RyYXRvciBhbmQgc2V0cyBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiBmbGFnXG4gIGNvbnN0IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlID0gc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gPyBpbml0aWFsUXVlcnlWYWx1ZSA6IHVuZGVmaW5lZFxuICBcbiAgLy8gTG9nIHdoZW4gZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUgaXMgY2FsY3VsYXRlZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXRhc2tsaXN0LWVmZmVjdGl2ZWluaXRpYWxxdWVyeXZhbHVlLWNhbGN1bGF0ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBjYWxjdWxhdGlvbjoge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgIGVmZmVjdGl2ZVJlc3VsdDogZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUgPyAnVVNFX0lOSVRJQUxfUVVFUllfVkFMVUUnIDogJ1VOREVGSU5FRCcsXG4gICAgICAgIGVmZmVjdGl2ZVNob3J0SWQ6IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBlZmZlY3RpdmVWYWx1ZTogZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZS1jYWxjdWxhdGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISFpbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgIGhhc0VmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlOiAhIWVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgZWZmZWN0aXZlU2hvcnRJZDogZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICBlZmZlY3RpdmVWYWx1ZTogZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW2VmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlLCBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiwgaW5pdGlhbFF1ZXJ5VmFsdWUsIHdpZGdldElkXSlcblxuICAvLyBGaW5kIHRoZSBxdWVyeSBpdGVtIG1hdGNoaW5nIHRoZSBzaG9ydElkIGZyb20gVVJMIGhhc2hcbiAgY29uc3QgbWF0Y2hpbmdRdWVyeUluZGV4ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3Qgc2hvcnRJZCA9IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkXG4gICAgaWYgKCFzaG9ydElkKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgcmV0dXJuIHNvcnRlZFF1ZXJ5SXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5zaG9ydElkID09PSBzaG9ydElkKVxuICB9LCBbc29ydGVkUXVlcnlJdGVtcywgZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWVdKVxuICBcbiAgLy8gRGV0ZXJtaW5lIHdoaWNoIGdyb3VwL3VuZ3JvdXBlZCBpbmRleCB0aGUgbWF0Y2hpbmcgcXVlcnkgaXMgYXRcbiAgY29uc3QgZ2V0UXVlcnlTZWxlY3Rpb24gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAobWF0Y2hpbmdRdWVyeUluZGV4IDwgMCkgcmV0dXJuIG51bGxcbiAgICBcbiAgICBjb25zdCBpdGVtID0gc29ydGVkUXVlcnlJdGVtc1ttYXRjaGluZ1F1ZXJ5SW5kZXhdXG4gICAgaWYgKGl0ZW0uZ3JvdXBJZCkge1xuICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IGdyb3Vwc1tpdGVtLmdyb3VwSWRdPy5pdGVtcyB8fCBJbW11dGFibGUoW10pXG4gICAgICBjb25zdCBpbmRleEluR3JvdXAgPSBncm91cEl0ZW1zLmZpbmRJbmRleChxID0+IHEuY29uZmlnSWQgPT09IGl0ZW0uY29uZmlnSWQpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2hhc2gtcXVlcnktZm91bmQtaW4tZ3JvdXAnLFxuICAgICAgICBncm91cElkOiBpdGVtLmdyb3VwSWQsXG4gICAgICAgIGluZGV4SW5Hcm91cDogaW5kZXhJbkdyb3VwID49IDAgPyBpbmRleEluR3JvdXAgOiAwLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogaXRlbS5zaG9ydElkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgdHlwZTogJ2dyb3VwJyBhcyBjb25zdCwgZ3JvdXBJZDogaXRlbS5ncm91cElkLCBpbmRleDogaW5kZXhJbkdyb3VwID49IDAgPyBpbmRleEluR3JvdXAgOiAwIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5XG4gICAgICBjb25zdCBpbmRleEluVW5ncm91cGVkID0gdW5ncm91cGVkLmZpbmRJbmRleCgoeyBpdGVtOiBxIH0pID0+IHEuY29uZmlnSWQgPT09IGl0ZW0uY29uZmlnSWQpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2hhc2gtcXVlcnktZm91bmQtdW5ncm91cGVkJyxcbiAgICAgICAgaW5kZXhJblVuZ3JvdXBlZDogaW5kZXhJblVuZ3JvdXBlZCA+PSAwID8gaW5kZXhJblVuZ3JvdXBlZCA6IDAsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBpdGVtLnNob3J0SWRcbiAgICAgIH0pXG4gICAgICByZXR1cm4geyB0eXBlOiAndW5ncm91cGVkJyBhcyBjb25zdCwgaW5kZXg6IGluZGV4SW5Vbmdyb3VwZWQgPj0gMCA/IGluZGV4SW5Vbmdyb3VwZWQgOiAwIH1cbiAgICB9XG4gIH0sIFttYXRjaGluZ1F1ZXJ5SW5kZXgsIHNvcnRlZFF1ZXJ5SXRlbXMsIGdyb3VwcywgdW5ncm91cGVkXSlcbiAgXG4gIC8vIEhlbHBlciB0byBkZXRlcm1pbmUgZGVmYXVsdCBzZWxlY3Rpb24gYmFzZWQgb24gZGlzcGxheSBvcmRlclxuICBjb25zdCBnZXREZWZhdWx0U2VsZWN0aW9uID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGdldFF1ZXJ5U2VsZWN0aW9uKSB7XG4gICAgICByZXR1cm4gZ2V0UXVlcnlTZWxlY3Rpb25cbiAgICB9XG4gICAgXG4gICAgLy8gTm8gaGFzaCBwYXJhbWV0ZXIgLSBkZXRlcm1pbmUgZGVmYXVsdCBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyXG4gICAgLy8gQ29tcGFyZSBmaXJzdCB1bmdyb3VwZWQgcXVlcnkgdnMgZmlyc3QgcXVlcnkgaW4gZmlyc3QgZ3JvdXBcbiAgICBjb25zdCBmaXJzdFVuZ3JvdXBlZE9yZGVyID0gdW5ncm91cGVkLmxlbmd0aCA+IDAgPyAodW5ncm91cGVkWzBdLml0ZW0ub3JkZXIgPz8gSW5maW5pdHkpIDogSW5maW5pdHlcbiAgICBjb25zdCBmaXJzdEdyb3VwT3JkZXIgPSBncm91cE9yZGVyLmxlbmd0aCA+IDAgJiYgZ3JvdXBzW2dyb3VwT3JkZXJbMF1dPy5pdGVtcz8ubGVuZ3RoID4gMFxuICAgICAgPyAoZ3JvdXBzW2dyb3VwT3JkZXJbMF1dLml0ZW1zWzBdLm9yZGVyID8/IEluZmluaXR5KVxuICAgICAgOiBJbmZpbml0eVxuICAgIFxuICAgIC8vIFNlbGVjdCB3aGljaGV2ZXIgaGFzIGxvd2VyIG9yZGVyIChvciBmaXJzdCBpZiBlcXVhbClcbiAgICBpZiAoZmlyc3RVbmdyb3VwZWRPcmRlciA8IGZpcnN0R3JvdXBPcmRlcikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ3VuZ3JvdXBlZCcgYXMgY29uc3QsIGluZGV4OiAwIH1cbiAgICB9IGVsc2UgaWYgKGZpcnN0R3JvdXBPcmRlciA8IEluZmluaXR5IHx8IGdyb3VwT3JkZXIubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ2dyb3VwJyBhcyBjb25zdCwgZ3JvdXBJZDogZ3JvdXBPcmRlclswXSwgaW5kZXg6IDAgfVxuICAgIH0gZWxzZSBpZiAodW5ncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB7IHR5cGU6ICd1bmdyb3VwZWQnIGFzIGNvbnN0LCBpbmRleDogMCB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0sIFtnZXRRdWVyeVNlbGVjdGlvbiwgdW5ncm91cGVkLCBncm91cHMsIGdyb3VwT3JkZXJdKVxuICBcbiAgLy8gVHJhY2sgc2VsZWN0ZWQgcXVlcnkgLSBpbml0aWFsaXplIHdpdGggbWF0Y2hpbmcgcXVlcnkgaWYgZm91bmQgZnJvbSBVUkwgaGFzaCwgb3IgZGVmYXVsdCBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyXG4gIGNvbnN0IFtzZWxlY3RlZEdyb3VwSWQsIHNldFNlbGVjdGVkR3JvdXBJZF0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmcgfCBudWxsPigoKSA9PiB7XG4gICAgaWYgKGdldERlZmF1bHRTZWxlY3Rpb24/LnR5cGUgPT09ICdncm91cCcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbC1ncm91cC1zZWxlY3Rpb24nLFxuICAgICAgICBncm91cElkOiBnZXREZWZhdWx0U2VsZWN0aW9uLmdyb3VwSWQsXG4gICAgICAgIG5vdGU6IGdldFF1ZXJ5U2VsZWN0aW9uID8gJ0hhc2gtbWF0Y2hlZCcgOiAnRGVmYXVsdCBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyJ1xuICAgICAgfSlcbiAgICAgIHJldHVybiBnZXREZWZhdWx0U2VsZWN0aW9uLmdyb3VwSWRcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSlcbiAgY29uc3QgW3NlbGVjdGVkR3JvdXBRdWVyeUluZGV4LCBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleF0gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PiB7XG4gICAgaWYgKGdldERlZmF1bHRTZWxlY3Rpb24/LnR5cGUgPT09ICdncm91cCcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbC1ncm91cC1xdWVyeS1pbmRleCcsXG4gICAgICAgIGluZGV4OiBnZXREZWZhdWx0U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICBub3RlOiBnZXRRdWVyeVNlbGVjdGlvbiA/ICdIYXNoLW1hdGNoZWQnIDogJ0RlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlcidcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFNlbGVjdGlvbi5pbmRleFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9KVxuICBjb25zdCBbc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCwgc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleF0gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PiB7XG4gICAgaWYgKGdldERlZmF1bHRTZWxlY3Rpb24/LnR5cGUgPT09ICd1bmdyb3VwZWQnKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtdW5ncm91cGVkLWluZGV4JyxcbiAgICAgICAgaW5kZXg6IGdldERlZmF1bHRTZWxlY3Rpb24uaW5kZXgsXG4gICAgICAgIG5vdGU6IGdldFF1ZXJ5U2VsZWN0aW9uID8gJ0hhc2gtbWF0Y2hlZCcgOiAnRGVmYXVsdCBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyJ1xuICAgICAgfSlcbiAgICAgIHJldHVybiBnZXREZWZhdWx0U2VsZWN0aW9uLmluZGV4XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH0pXG4gIFxuICAvLyBVcGRhdGUgc2VsZWN0aW9uIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgd2lkZ2V0IHdpdGggaGFzaCBwYXJhbWV0ZXJcbiAgLy8gT25seSByZWFjdCB3aGVuIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uIGlzIHRydWUgKHNldCBieSBIZWxwZXJTaW1wbGUpXG4gIC8vIFRoaXMgcHJldmVudHMgYXV0b25vbW91cyBxdWVyeSBzZWxlY3Rpb24gd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXRhc2tsaXN0LXNlbGVjdGlvbi11c2VlZmZlY3QtY2hlY2snLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBjaGVjazoge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzR2V0UXVlcnlTZWxlY3Rpb246ICEhZ2V0UXVlcnlTZWxlY3Rpb24sXG4gICAgICAgIGdldFF1ZXJ5U2VsZWN0aW9uVHlwZTogZ2V0UXVlcnlTZWxlY3Rpb24/LnR5cGUsXG4gICAgICAgIHdpbGxVcGRhdGVTZWxlY3Rpb246IHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uICYmICEhZ2V0UXVlcnlTZWxlY3Rpb25cbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5LXNlbGVjdGlvbi11c2VlZmZlY3QtY2hlY2snLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgIGhhc0dldFF1ZXJ5U2VsZWN0aW9uOiAhIWdldFF1ZXJ5U2VsZWN0aW9uLFxuICAgICAgZ2V0UXVlcnlTZWxlY3Rpb25UeXBlOiBnZXRRdWVyeVNlbGVjdGlvbj8udHlwZSxcbiAgICAgIHdpbGxVcGRhdGVTZWxlY3Rpb246IHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uICYmICEhZ2V0UXVlcnlTZWxlY3Rpb24sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGlmIChzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiAmJiBnZXRRdWVyeVNlbGVjdGlvbikge1xuICAgICAgLy8gSGFzaCBwYXJhbWV0ZXIgbWF0Y2hlZCAtIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5lZCB1cyB3aXRoIHRoaXMgaGFzaFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnl0YXNrbGlzdC1zZWxlY3Rpb24tdXNlZWZmZWN0LXVwZGF0aW5nJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHNlbGVjdGlvblR5cGU6IGdldFF1ZXJ5U2VsZWN0aW9uLnR5cGUsXG4gICAgICAgIHNlbGVjdGlvbkRldGFpbHM6IGdldFF1ZXJ5U2VsZWN0aW9uLnR5cGUgPT09ICdncm91cCcgXG4gICAgICAgICAgPyB7IGdyb3VwSWQ6IGdldFF1ZXJ5U2VsZWN0aW9uLmdyb3VwSWQsIGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleCB9XG4gICAgICAgICAgOiB7IGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleCB9LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbi50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tY2hhbmdlZC10by1ncm91cC1mcm9tLWhhc2gnLFxuICAgICAgICAgIGdyb3VwSWQ6IGdldFF1ZXJ5U2VsZWN0aW9uLmdyb3VwSWQsXG4gICAgICAgICAgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICAgIG5vdGU6ICdIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVuZWQgd2lkZ2V0IHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgIH0pXG4gICAgICAgIHNldFNlbGVjdGVkR3JvdXBJZChnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkKVxuICAgICAgICBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleChnZXRRdWVyeVNlbGVjdGlvbi5pbmRleClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tY2hhbmdlZC10by11bmdyb3VwZWQtZnJvbS1oYXNoJyxcbiAgICAgICAgICBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgsXG4gICAgICAgICAgbm90ZTogJ0hlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5lZCB3aWRnZXQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgfSlcbiAgICAgICAgc2V0U2VsZWN0ZWRHcm91cElkKG51bGwpXG4gICAgICAgIHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5dGFza2xpc3Qtc2VsZWN0aW9uLXVzZWVmZmVjdC1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogIXNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uID8gJ2ZsYWctaXMtZmFsc2UnIDogJ25vLXF1ZXJ5LXNlbGVjdGlvbicsXG4gICAgICAgIGNoZWNrOiB7XG4gICAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgICAgaGFzR2V0UXVlcnlTZWxlY3Rpb246ICEhZ2V0UXVlcnlTZWxlY3Rpb25cbiAgICAgICAgfSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5LXNlbGVjdGlvbi11c2VlZmZlY3Qtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZWFzb246ICFzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiA/ICdmbGFnLWlzLWZhbHNlJyA6ICduby1xdWVyeS1zZWxlY3Rpb24nLFxuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzR2V0UXVlcnlTZWxlY3Rpb246ICEhZ2V0UXVlcnlTZWxlY3Rpb24sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiwgZ2V0UXVlcnlTZWxlY3Rpb24sIHdpZGdldElkXSlcbiAgXG4gIC8vIEdldCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHF1ZXJ5IGl0ZW1cbiAgY29uc3QgZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0gPSAoKTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+ID0+IHtcbiAgICAvLyBQUklPUklUWSAxOiBVc2UgY3VycmVudCBzdGF0ZSBzZWxlY3Rpb25cbiAgICAvLyBUaGUgc3RhdGUgaXMgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgaGFzaCBtYXRjaCAoaWYgcHJlc2VudCkgb3IgZGVmYXVsdCBvcmRlcixcbiAgICAvLyBhbmQgdXBkYXRlZCB2aWEgdXNlRWZmZWN0IGlmIHRoZSBoYXNoIGNoYW5nZXMgbGF0ZXIuXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAnZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0tc3RhdGUtc2VsZWN0aW9uJyxcbiAgICAgIHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgIGhhc1NlbGVjdGVkR3JvdXA6IHNlbGVjdGVkR3JvdXBJZCAmJiBncm91cHNbc2VsZWN0ZWRHcm91cElkXSxcbiAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LFxuICAgICAgc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCxcbiAgICAgIHVuZ3JvdXBlZExlbmd0aDogdW5ncm91cGVkLmxlbmd0aCxcbiAgICAgIGdyb3VwT3JkZXJMZW5ndGg6IGdyb3VwT3JkZXIubGVuZ3RoLFxuICAgICAgbm90ZTogJ1VzaW5nIHN0YXRlIHNlbGVjdGlvbiAoaGFzaC1hd2FyZSknXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiBhIGdyb3VwIGlzIHNlbGVjdGVkLCBnZXQgcXVlcnkgZnJvbSB0aGF0IGdyb3VwXG4gICAgaWYgKHNlbGVjdGVkR3JvdXBJZCAmJiBncm91cHNbc2VsZWN0ZWRHcm91cElkXSkge1xuICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdLml0ZW1zXG4gICAgICBpZiAoZ3JvdXBJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDwgZ3JvdXBJdGVtcy5sZW5ndGggPyBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCA6IDBcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gZ3JvdXBJdGVtc1tpZHhdXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3RlZC1xdWVyeS1mcm9tLWdyb3VwJyxcbiAgICAgICAgICBncm91cElkOiBzZWxlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgZ3JvdXBRdWVyeUluZGV4OiBpZHgsXG4gICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHNlbGVjdGVkSXRlbS5jb25maWdJZCxcbiAgICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKHNlbGVjdGVkSXRlbSlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBPdGhlcndpc2UsIGdldCBmcm9tIHVuZ3JvdXBlZCBxdWVyaWVzXG4gICAgaWYgKHVuZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpZHggPSBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4IDwgdW5ncm91cGVkLmxlbmd0aCA/IHNlbGVjdGVkVW5ncm91cGVkSW5kZXggOiAwXG4gICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB1bmdyb3VwZWRbaWR4XS5pdGVtXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ3NlbGVjdGVkLXF1ZXJ5LWZyb20tdW5ncm91cGVkJyxcbiAgICAgICAgdW5ncm91cGVkSW5kZXg6IGlkeCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHNlbGVjdGVkSXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlEaXNwbGF5TmFtZTogZ2V0UXVlcnlEaXNwbGF5TmFtZShzZWxlY3RlZEl0ZW0pXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbVxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byBmaXJzdCBxdWVyeSBpdGVtXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAnc2VsZWN0ZWQtcXVlcnktZmFsbGJhY2snLFxuICAgICAgbm90ZTogJ05vIGdyb3VwcyBvciB1bmdyb3VwZWQgcXVlcmllcywgdXNpbmcgZmlyc3QgaXRlbSdcbiAgICB9KVxuICAgIHJldHVybiBzb3J0ZWRRdWVyeUl0ZW1zWzBdXG4gIH1cbiAgXG4gIGNvbnN0IHNlbGVjdGVkUXVlcnlJdGVtID0gZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0oKVxuICBjb25zdCBzZWxlY3RlZFF1ZXJ5UmVhbEluZGV4ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHNvcnRlZFF1ZXJ5SXRlbXMuZmluZEluZGV4KHEgPT4gcS5jb25maWdJZCA9PT0gc2VsZWN0ZWRRdWVyeUl0ZW0uY29uZmlnSWQpXG4gIH0sIFtzb3J0ZWRRdWVyeUl0ZW1zLCBzZWxlY3RlZFF1ZXJ5SXRlbV0pXG4gIFxuICAvLyBJZiBvbmx5IG9uZSBxdWVyeSB0b3RhbCwgZG9uJ3Qgc2hvdyBkcm9wZG93blxuICBjb25zdCBzaG93RHJvcGRvd24gPSBzb3J0ZWRRdWVyeUl0ZW1zLmxlbmd0aCA+IDEgfHwgZ3JvdXBPcmRlci5sZW5ndGggPiAwXG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgcnVudGltZS1xdWVyeV9fcXVlcnktbGlzdCBoLTEwMCAke2NsYXNzTmFtZX1gfSBjc3M9e2Nzc2BcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgLnF1ZXJ5LXNlbGVjdG9yIHtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgfVxuICAgICAgLnF1ZXJ5LXNlbGVjdG9yLWxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICB9XG4gICAgICAucXVlcnktc2VsZWN0b3Igc2VsZWN0IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgICAucXVlcnktdGFzay1jb250YWluZXIge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIH1cbiAgICBgfT5cbiAgICAgIHsvKiBTZWFyY2ggTGF5ZXIgZHJvcGRvd24gbW92ZWQgdG8gUXVlcnlUYXNrIFF1ZXJ5IHRhYiBjb250ZW50ICovfVxuICAgICAgXG4gICAgICB7LyogU2hvdyBzZWxlY3RlZCBxdWVyeSBmb3JtIGRpcmVjdGx5IGJlbG93ICovfVxuICAgICAge3NlbGVjdGVkUXVlcnlJdGVtICYmICgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHdpbGxQYXNzSW5pdGlhbElucHV0VmFsdWUgPSBzZWxlY3RlZFF1ZXJ5SXRlbS5zaG9ydElkID09PSBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZFxuICAgICAgICBjb25zdCBpbml0aWFsSW5wdXRWYWx1ZVRvUGFzcyA9IHdpbGxQYXNzSW5pdGlhbElucHV0VmFsdWUgPyBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUgOiB1bmRlZmluZWRcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpbml0aWFsSW5wdXRWYWx1ZS1iZWluZy1wYXNzZWQtdG8tcXVlcnl0YXNrJyxcbiAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICBzZWxlY3RlZFF1ZXJ5SXRlbVNob3J0SWQ6IHNlbGVjdGVkUXVlcnlJdGVtLnNob3J0SWQsXG4gICAgICAgICAgc2VsZWN0ZWRRdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRRdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICB3aWxsUGFzc0luaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZVRvUGFzcyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BxdWVyeS10YXNrLWNvbnRhaW5lciAke2lzSW5Qb3BwZXIgPyBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTIDogJyd9YH0+XG4gICAgICAgICAgICA8UXVlcnlUYXNrXG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgaW5kZXg9e3NlbGVjdGVkUXVlcnlSZWFsSW5kZXggPj0gMCA/IHNlbGVjdGVkUXVlcnlSZWFsSW5kZXggOiAwfVxuICAgICAgICAgICAgICB0b3RhbD17c29ydGVkUXVlcnlJdGVtcy5sZW5ndGh9XG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbT17c2VsZWN0ZWRRdWVyeUl0ZW19XG4gICAgICAgICAgICAgIGlzSW5Qb3BwZXI9e2lzSW5Qb3BwZXJ9XG4gICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtpbml0aWFsSW5wdXRWYWx1ZVRvUGFzc31cbiAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17b25IYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e3NvcnRlZFF1ZXJ5SXRlbXN9XG4gICAgICAgICAgICBzZWxlY3RlZFF1ZXJ5SW5kZXg9e3NlbGVjdGVkVW5ncm91cGVkSW5kZXh9XG4gICAgICAgICAgICBvblF1ZXJ5Q2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgLy8gR3JvdXBpbmcgcHJvcHNcbiAgICAgICAgICAgIGdyb3Vwcz17Z3JvdXBzfVxuICAgICAgICAgICAgdW5ncm91cGVkPXt1bmdyb3VwZWR9XG4gICAgICAgICAgICAvLyBHcmFwaGljcyBsYXllciBwcm9wc1xuICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17dXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXI9e2dyYXBoaWNzTGF5ZXJ9XG4gICAgICAgICAgICBtYXBWaWV3PXttYXBWaWV3fVxuICAgICAgICAgICAgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcj17b25Jbml0aWFsaXplR3JhcGhpY3NMYXllcn1cbiAgICAgICAgICAgIG9uQ2xlYXJHcmFwaGljc0xheWVyPXtvbkNsZWFyR3JhcGhpY3NMYXllcn1cbiAgICAgICAgICAgIGdyb3VwT3JkZXI9e2dyb3VwT3JkZXJ9XG4gICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWQ9e3NlbGVjdGVkR3JvdXBJZH1cbiAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4PXtzZWxlY3RlZEdyb3VwUXVlcnlJbmRleH1cbiAgICAgICAgICAgIG9uR3JvdXBDaGFuZ2U9eyhncm91cElkKSA9PiBzZXRTZWxlY3RlZEdyb3VwSWQoZ3JvdXBJZCl9XG4gICAgICAgICAgICBvbkdyb3VwUXVlcnlDaGFuZ2U9eyhpbmRleCkgPT4gc2V0U2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgb25Vbmdyb3VwZWRDaGFuZ2U9eyhpbmRleCkgPT4gc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleChpbmRleCl9XG4gICAgICAgICAgICByZXN1bHRzTW9kZT17cmVzdWx0c01vZGV9XG4gICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlPXtvblJlc3VsdHNNb2RlQ2hhbmdlfVxuICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXthY2N1bXVsYXRlZFJlY29yZHN9XG4gICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17b25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICBhY3RpdmVUYWI9e2FjdGl2ZVRhYn1cbiAgICAgICAgICAgIG9uVGFiQ2hhbmdlPXtvblRhYkNoYW5nZX1cbiAgICAgICAgICAgIGV2ZW50TWFuYWdlcj17ZXZlbnRNYW5hZ2VyfVxuICAgICAgICAgICAgICAvLyBObyBvbk5hdkJhY2sgLSBubyBuYXZpZ2F0aW9uIG5lZWRlZFxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgICAgfSkoKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5cblxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCB0eXBlIElNU3RhdGUsIGpzeCwgY3NzLCBjbGFzc05hbWVzLCB0eXBlIEltbXV0YWJsZUFycmF5LCB0eXBlIFVzZURhdGFTb3VyY2UsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIFRvb2x0aXAsIEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IHR5cGUgQ3JlYXRlVG9vbFR5cGUsIFNwYXRpYWxGaWx0ZXJUeXBlLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIHR5cGUgU3BhdGlhbFJlbGF0aW9uLCBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURhdGFTb3VyY2UgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHMnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbU1hcCB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1tYXAnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURyYXcgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHJhdydcclxuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrSXRlbVByb3BzIHtcclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIGRlc2M6IHN0cmluZ1xyXG4gIGRzRW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgZHNCdWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgZHNCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIGRyYXdFbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBkcmF3QnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGRyYXdCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIHNwYXRpYWxSZWxhdGlvbnM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxSZWxhdGlvbj5cclxuICB1c2VEYXRhU291cmNlczogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT5cclxuICB1c2VSdW50aW1lRGF0YTogYm9vbGVhblxyXG4gIGZpbHRlclR5cGVzOiBJbW11dGFibGVBcnJheTxTcGF0aWFsRmlsdGVyVHlwZT5cclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICBjcmVhdGVUb29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxyXG4gIG9uRmlsdGVyQ2hhbmdlOiAoZmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqKSA9PiB2b2lkXHJcbiAgb25SZWxhdGlvbkNoYW5nZTogKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB2b2lkXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrU3BhdGlhbEZvcm0gKHByb3BzOiBRdWVyeVRhc2tJdGVtUHJvcHMpIHtcclxuICBjb25zdCB7XHJcbiAgICBsYWJlbCwgZGVzYywgZmlsdGVyVHlwZXMsIG1hcFdpZGdldElkcywgb25GaWx0ZXJDaGFuZ2UsIG9uUmVsYXRpb25DaGFuZ2UsIG9uQnVmZmVyQ2hhbmdlLCB1c2VEYXRhU291cmNlcywgc3BhdGlhbFJlbGF0aW9ucywgdXNlUnVudGltZURhdGEsXHJcbiAgICBkc0VuYWJsZUJ1ZmZlciwgZHNCdWZmZXJEaXN0YW5jZSwgZHNCdWZmZXJVbml0LCBkcmF3RW5hYmxlQnVmZmVyLCBkcmF3QnVmZmVyRGlzdGFuY2UsIGRyYXdCdWZmZXJVbml0LCBjcmVhdGVUb29sVHlwZXMsIHdpZGdldElkXHJcbiAgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcclxuICAvLyB1c2VkIHRvIHN0b3JlIHRoZSBzZWxlY3Rpb24gb2YgdGhlIGRhdGEgc291cmNlIGluIG9yZGVyIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIHdoZW4gb3B0aW9uIGNoYW5nZXNcclxuICBjb25zdCBzZWxlY3RlZEdlb21ldHJpZXNSZWYgPSBSZWFjdC51c2VSZWY8YW55PihudWxsKVxyXG4gIGNvbnN0IG1hcEV4aXN0cyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBpZiAobWFwV2lkZ2V0SWRzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IG1hcFdpZGdldElkID0gbWFwV2lkZ2V0SWRzWzBdXHJcbiAgICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1ttYXBXaWRnZXRJZF0gIT0gbnVsbFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfSlcclxuICBjb25zdCBjYW5Vc2VNYXBGaWx0ZXIgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBtYXBFeGlzdHMgJiYgKGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5DdXJyZW50TWFwRXh0ZW50KSB8fCBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpXHJcbiAgfSwgW2ZpbHRlclR5cGVzLCBtYXBFeGlzdHNdKVxyXG4gIGNvbnN0IHN1cHBvcnRlZEZpbHRlclR5cGVzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBbXVxyXG4gICAgaWYgKHVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwIHx8IHVzZVJ1bnRpbWVEYXRhKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdkYXRhJywgbGFiZWw6IGdldEkxOG5NZXNzYWdlKCdmZWF0dXJlRnJvbURzJykgfSlcclxuICAgIH1cclxuICAgIGlmIChjYW5Vc2VNYXBGaWx0ZXIgJiYgZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkN1cnJlbnRNYXBFeHRlbnQpKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdtYXAnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuQ3VycmVudE1hcEV4dGVudH1gKSB9KVxyXG4gICAgfVxyXG4gICAgaWYgKGNhblVzZU1hcEZpbHRlciAmJiBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ2RyYXcnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZX1gKSB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4gIH0sIFtjYW5Vc2VNYXBGaWx0ZXIsIHVzZURhdGFTb3VyY2VzLCB1c2VSdW50aW1lRGF0YSwgZ2V0STE4bk1lc3NhZ2UsIGZpbHRlclR5cGVzXSlcclxuXHJcbiAgY29uc3QgW2N1cnJlbnRGaWx0ZXJUeXBlLCBzZXRDdXJyZW50RmlsdGVyVHlwZV0gPSBSZWFjdC51c2VTdGF0ZShzdXBwb3J0ZWRGaWx0ZXJUeXBlcz8uWzBdPy52YWx1ZSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIGluIG9yZGVyIHRvIGF2b2lkIGludmFsaWQgb3B0aW9uIGJlaW5nIHNlbGVjdGVkXHJcbiAgICBpZiAoY3VycmVudEZpbHRlclR5cGUgIT09ICdub25lJyAmJiAhc3VwcG9ydGVkRmlsdGVyVHlwZXMuZmluZCgoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gY3VycmVudEZpbHRlclR5cGUpKSB7XHJcbiAgICAgIHNldEN1cnJlbnRGaWx0ZXJUeXBlKHN1cHBvcnRlZEZpbHRlclR5cGVzPy5bMF0/LnZhbHVlKVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RmlsdGVyVHlwZSwgc3VwcG9ydGVkRmlsdGVyVHlwZXNdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gY2xlYXIgdGhlIHJlbGF0aW9uc2hpcCBhbmQgYnVmZmVyIGlmIGZpbHRlciB0eXBlIGlzIG5vdCAnZGF0YSdcclxuICAgIGlmIChjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ21hcCcgfHwgY3VycmVudEZpbHRlclR5cGUgPT09ICdkcmF3JyB8fCBjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ25vbmUnKSB7XHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2UobnVsbClcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoMCwgVW5pdFR5cGUuTWV0ZXJzKVxyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgICAvLyBubyBuZWVkIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIGlmIHRoZSBkYXRhIHNvdXJjZSBoYXMgc2VsZWN0aW9uIHNpbmNlIGl0IHdpbGwgYmUgdXBkYXRlZCBpbiB0aGUgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIG1ldGhvZFxyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgc2VsZWN0ZWRHZW9tZXRyaWVzUmVmLmN1cnJlbnQgPT0gbnVsbCkge1xyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgfSwgW2N1cnJlbnRGaWx0ZXJUeXBlLCBvblJlbGF0aW9uQ2hhbmdlLCBvbkJ1ZmZlckNoYW5nZSwgb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHsgc2V0Q3VycmVudEZpbHRlclR5cGUoZXZ0LnRhcmdldC52YWx1ZSkgfSwgW10pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUdlb21ldHJ5Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGdlb21ldHJ5OiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4ge1xyXG4gICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeSwgZ3JhcGhpYywgbGF5ZXIsIGNsZWFyQWZ0ZXJBcHBseSB9KVxyXG4gIH0sIFtvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChnZW9tZXRyaWVzKSA9PiB7XHJcbiAgICBzZWxlY3RlZEdlb21ldHJpZXNSZWYuY3VycmVudCA9IGdlb21ldHJpZXNcclxuICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IGdlb21ldHJpZXMgfSlcclxuICB9LCBbb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBpZiAoISh1c2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMCB8fCB1c2VSdW50aW1lRGF0YSB8fCBjYW5Vc2VNYXBGaWx0ZXIpKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGNsYXNzTmFtZT0ncHgtNCBwYi00JyBhcmlhLWxhYmVsPXtsYWJlbH0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmb3JtLXRpdGxlIG15LTIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6ICFsYWJlbCAmJiAhZGVzYyB9KX0+XHJcbiAgICAgICAge2xhYmVsICYmIDxkaXYgY2xhc3NOYW1lPSdtci0yIHRpdGxlMic+e2xhYmVsfTwvZGl2Pn1cclxuICAgICAgICB7ZGVzYyAmJiAoXHJcbiAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXtkZXNjfT5cclxuICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeSc+XHJcbiAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpdGxlMyc+e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9PC9kaXY+XHJcbiAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9XHJcbiAgICAgICAgICAgIGNzcz17Y3NzYGhlaWdodDogMzJweDtgfVxyXG4gICAgICAgICAgICB2YWx1ZT17Y3VycmVudEZpbHRlclR5cGV9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZH1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPG9wdGlvbiBrZXk9Jy0nIHZhbHVlPSdub25lJz4tPC9vcHRpb24+XHJcbiAgICAgICAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5tYXAoaXRlbSA9PiA8b3B0aW9uIGtleT17aXRlbS52YWx1ZX0gdmFsdWU9e2l0ZW0udmFsdWV9PntpdGVtLmxhYmVsfTwvb3B0aW9uPil9XHJcbiAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgKFxyXG4gICAgICAgIDxHZW9tZXRyeUZyb21EYXRhU291cmNlXHJcbiAgICAgICAgICBlbmFibGVCdWZmZXI9e2RzRW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RzQnVmZmVyRGlzdGFuY2V9XHJcbiAgICAgICAgICBidWZmZXJVbml0PXtkc0J1ZmZlclVuaXR9XHJcbiAgICAgICAgICBzcGF0aWFsUmVsYXRpb25zPXtzcGF0aWFsUmVsYXRpb25zfVxyXG4gICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3VzZURhdGFTb3VyY2VzfVxyXG4gICAgICAgICAgdXNlUnVudGltZURhdGE9e3VzZVJ1bnRpbWVEYXRhfVxyXG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e2hhbmRsZVNlbGVjdGlvbkNoYW5nZX1cclxuICAgICAgICAgIG9uUmVsYXRpb25DaGFuZ2U9e29uUmVsYXRpb25DaGFuZ2V9XHJcbiAgICAgICAgICBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnbWFwJyAmJiAoXHJcbiAgICAgICAgPEdlb21ldHJ5RnJvbU1hcFxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICAgIHtjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RyYXcnICYmIChcclxuICAgICAgICA8R2VvbWV0cnlGcm9tRHJhd1xyXG4gICAgICAgICAgZW5hYmxlQnVmZmVyPXtkcmF3RW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RyYXdCdWZmZXJEaXN0YW5jZX1cclxuICAgICAgICAgIGJ1ZmZlclVuaXQ9e2RyYXdCdWZmZXJVbml0fVxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e29uQnVmZmVyQ2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIFVzZURhdGFTb3VyY2UsXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBjbGFzc05hbWVzLFxuICBDT05TVEFOVFMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBEYXRhUmVjb3JkU2V0LFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICBEYXRhU291cmNlU3RhdHVzLFxuICBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSxcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxuICBSZWNvcmRTZXRDaGFuZ2VUeXBlLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgTXV0YWJsZVN0b3JlTWFuYWdlcixcbiAgRGF0YUFjdGlvbk1hbmFnZXIsXG4gIERhdGFMZXZlbCxcbiAgdHlwZSBRdWVyaWFibGVEYXRhU291cmNlLFxuICB0eXBlIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zLFxuICBob29rcyxcbiAgbG9kYXNoLFxuICBEYXRhU291cmNlTWFuYWdlcixcbiAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MsIFRhYnMsIFRhYiwgU2VsZWN0IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IEluZm9PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8nXG5pbXBvcnQgeyBUcmFzaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gnXG5pbXBvcnQgeyBQYWdpbmdUeXBlLCB0eXBlIFF1ZXJ5SXRlbVR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5VGFza0Zvcm0gfSBmcm9tICcuL3F1ZXJ5LXRhc2stZm9ybSdcbmltcG9ydCB7IFF1ZXJ5VGFza1Jlc3VsdCB9IGZyb20gJy4vcXVlcnktcmVzdWx0J1xuaW1wb3J0IHsgRGF0YVNvdXJjZVRpcCwgdXNlRGF0YVNvdXJjZUV4aXN0cywgRXJyb3JNZXNzYWdlIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyBRdWVyeVRhc2tMYWJlbCB9IGZyb20gJy4vcXVlcnktdGFzay1sYWJlbCdcbmltcG9ydCB7IHVzZVpvb21Ub1JlY29yZHMgfSBmcm9tICcuL2hvb2tzL3VzZS16b29tLXRvLXJlY29yZHMnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBnZW5lcmF0ZVF1ZXJ5UGFyYW1zLCBleGVjdXRlUXVlcnksIGV4ZWN1dGVDb3VudFF1ZXJ5IH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZCwgcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZCwgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zIH0gZnJvbSAnLi9yZXN1bHRzLW1hbmFnZW1lbnQtdXRpbHMnXG5pbXBvcnQgeyBNZW51T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9tZW51J1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdCdcbmltcG9ydCB7IExvYWRpbmdSZXN1bHQgfSBmcm9tICcuL2xvYWRpbmctcmVzdWx0J1xuaW1wb3J0IHsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzLCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCwgZmluZENsZWFyUmVzdWx0c0J1dHRvbiwgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vLyBFdmVudCBmaXJlZCB3aGVuIFNxbEV4cHJlc3Npb25SdW50aW1lIGNvbnZlcnRzIGhhc2ggdmFsdWUgZnJvbSBzdHJpbmcgdG8gYXJyYXkgZm9ybWF0XG5jb25zdCBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCA9ICdxdWVyeXNpbXBsZS1oYXNoLXZhbHVlLWNvbnZlcnRlZCdcblxuLy8gRXZlbnQgZmlyZWQgd2hlbiBhIGhhc2gtdHJpZ2dlcmVkIHF1ZXJ5IGV4ZWN1dGlvbiBjb21wbGV0ZXMgc3VjY2Vzc2Z1bGx5XG4vLyBUaGlzIGFsbG93cyBIZWxwZXJTaW1wbGUgdG8gdHJhY2sgd2hpY2ggaGFzaCBwYXJhbWV0ZXJzIGhhdmUgYmVlbiBleGVjdXRlZFxuY29uc3QgUVVFUllTSU1QTEVfSEFTSF9RVUVSWV9FWEVDVVRFRF9FVkVOVCA9ICdxdWVyeXNpbXBsZS1oYXNoLXF1ZXJ5LWV4ZWN1dGVkJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza1Byb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBpbmRleDogbnVtYmVyXG4gIHRvdGFsOiBudW1iZXJcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgd3JhcHBlZEluUG9wcGVyPzogYm9vbGVhblxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgaXNJblBvcHBlcj86IGJvb2xlYW5cbiAgb25OYXZCYWNrPzogKCkgPT4gdm9pZFxuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG4gIC8vIFByb3BzIGZvciBTZWFyY2ggTGF5ZXIgZHJvcGRvd24gKHdoZW4gbXVsdGlwbGUgcXVlcmllcylcbiAgcXVlcnlJdGVtcz86IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIHNlbGVjdGVkUXVlcnlJbmRleD86IG51bWJlclxuICBvblF1ZXJ5Q2hhbmdlPzogKGluZGV4OiBudW1iZXIpID0+IHZvaWRcbiAgLy8gR3JvdXBpbmcgcHJvcHNcbiAgZ3JvdXBzPzogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9XG4gIHVuZ3JvdXBlZD86IEFycmF5PHsgaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LCBpbmRleDogbnVtYmVyIH0+XG4gIGdyb3VwT3JkZXI/OiBzdHJpbmdbXVxuICBzZWxlY3RlZEdyb3VwSWQ/OiBzdHJpbmcgfCBudWxsXG4gIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4PzogbnVtYmVyXG4gIG9uR3JvdXBDaGFuZ2U/OiAoZ3JvdXBJZDogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZFxuICBvbkdyb3VwUXVlcnlDaGFuZ2U/OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxuICBvblVuZ3JvdXBlZENoYW5nZT86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gIC8vIFJlc3VsdHMgbW9kZSBwcm9wc1xuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGVcbiAgb25SZXN1bHRzTW9kZUNoYW5nZT86IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB2b2lkXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxuICAvLyBHcmFwaGljcyBsYXllciBwcm9wc1xuICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PzogYm9vbGVhblxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPzogKG91dHB1dERTOiBEYXRhU291cmNlKSA9PiBQcm9taXNlPHZvaWQ+XG4gIG9uQ2xlYXJHcmFwaGljc0xheWVyPzogKCkgPT4gdm9pZFxuICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnXG4gIG9uVGFiQ2hhbmdlPzogKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4gdm9pZFxuICBldmVudE1hbmFnZXI/OiBpbXBvcnQoJy4vaG9va3MvdXNlLWV2ZW50LWhhbmRsaW5nJykuRXZlbnRNYW5hZ2VyICAvLyBDaHVuayA3LjE6IEV2ZW50IEhhbmRsaW5nIE1hbmFnZXJcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBkaXNwbGF5IG5hbWUgZm9yIHF1ZXJ5IGluIGRyb3Bkb3duXG4vLyBVc2VzOiBzZWFyY2hBbGlhcyB8fCBqaW11RmllbGROYW1lIHx8IGl0ZW0ubmFtZSB8fCBmYWxsYmFja1xuY29uc3QgZ2V0UXVlcnlEaXNwbGF5TmFtZSA9IChpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4pOiBzdHJpbmcgPT4ge1xuICAvLyBGaXJzdCBwcmlvcml0eTogc2VhcmNoQWxpYXMgaWYgc2V0XG4gIGlmIChpdGVtLnNlYXJjaEFsaWFzKSB7XG4gICAgcmV0dXJuIGl0ZW0uc2VhcmNoQWxpYXNcbiAgfVxuICBcbiAgLy8gU2Vjb25kIHByaW9yaXR5OiBmaWVsZCBuYW1lIGZyb20gU1FMIGV4cHJlc3Npb25cbiAgY29uc3QgamltdUZpZWxkTmFtZSA9IGl0ZW0uc3FsRXhwck9iaj8ucGFydHM/LlswXT8uamltdUZpZWxkTmFtZVxuICBpZiAoamltdUZpZWxkTmFtZSkge1xuICAgIHJldHVybiBqaW11RmllbGROYW1lXG4gIH1cbiAgXG4gIC8vIFRoaXJkIHByaW9yaXR5OiBpdGVtIG5hbWVcbiAgaWYgKGl0ZW0ubmFtZSkge1xuICAgIHJldHVybiBpdGVtLm5hbWVcbiAgfVxuICBcbiAgLy8gRmFsbGJhY2tcbiAgcmV0dXJuICdRdWVyeSdcbn1cblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gICYud3JhcHBlZCAucXVlcnktZm9ybSB7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG4gIC5xdWVyeS10YXNrX19jb250ZW50IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgcGFkZGluZy10b3A6IDhweDtcbiAgICAmOmhhcyg+IC5xdWVyeS1mb3JtX19oZWFkZXIgPiBkaXY6bm90KC5kLW5vbmUpKSwgJjpoYXMoPiAucXVlcnktcmVzdWx0KSB7XG4gICAgICBwYWRkaW5nLXRvcDogMTZweDtcbiAgICB9XG4gIH1cbiAgLnF1ZXJ5LWZvcm1fX2hlYWRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICAmLmhhcy1jb250ZW50IHtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgICB9XG4gICAgLm5hdi1hY3Rpb24ge1xuICAgICAgZmxleDogMSAxIDA7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIC5qaW11LWJ0biB7XG4gICAgICAgIG1pbi13aWR0aDogMjZweDtcbiAgICAgIH1cbiAgICB9XG4gICAgLnJlc3VsdC1tZW51IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgfVxuICB9XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2sgKHByb3BzOiBRdWVyeVRhc2tQcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5SXRlbSwgb25OYXZCYWNrLCB0b3RhbCwgaXNJblBvcHBlciA9IGZhbHNlLCB3cmFwcGVkSW5Qb3BwZXIgPSBmYWxzZSwgY2xhc3NOYW1lID0gJycsIGluZGV4LCBpbml0aWFsSW5wdXRWYWx1ZSwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcXVlcnlJdGVtcywgc2VsZWN0ZWRRdWVyeUluZGV4LCBvblF1ZXJ5Q2hhbmdlLCBncm91cHMsIHVuZ3JvdXBlZCwgZ3JvdXBPcmRlciwgc2VsZWN0ZWRHcm91cElkLCBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCwgb25Hcm91cENoYW5nZSwgb25Hcm91cFF1ZXJ5Q2hhbmdlLCBvblVuZ3JvdXBlZENoYW5nZSwgcmVzdWx0c01vZGUsIG9uUmVzdWx0c01vZGVDaGFuZ2UsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcsIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIsIG9uQ2xlYXJHcmFwaGljc0xheWVyLCBhY3RpdmVUYWI6IHByb3BBY3RpdmVUYWIsIG9uVGFiQ2hhbmdlOiBwcm9wT25UYWJDaGFuZ2UsIGV2ZW50TWFuYWdlciwgLi4ub3RoZXJQcm9wcyB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3Qgem9vbVRvUmVjb3JkcyA9IHVzZVpvb21Ub1JlY29yZHMobWFwVmlldylcbiAgY29uc3QgW3N0YWdlLCBzZXRTdGFnZV0gPSBSZWFjdC51c2VTdGF0ZSgwKSAvLyAwID0gZm9ybSwgMSA9IHJlc3VsdHMsIDIgPSBsb2FkaW5nXG4gIGNvbnN0IFtpbnRlcm5hbEFjdGl2ZVRhYiwgc2V0SW50ZXJuYWxBY3RpdmVUYWJdID0gUmVhY3QudXNlU3RhdGU8J3F1ZXJ5JyB8ICdyZXN1bHRzJz4oJ3F1ZXJ5JylcbiAgXG4gIC8vIExvZyB3aGVuIGluaXRpYWxJbnB1dFZhbHVlIHByb3AgaXMgcmVjZWl2ZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnl0YXNrLWluaXRpYWxpbnB1dHZhbHVlLXByb3AtcmVjZWl2ZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHByb3BzLnF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IHByb3BzLnF1ZXJ5SXRlbVNob3J0SWQsXG4gICAgICBoYXNJbml0aWFsSW5wdXRWYWx1ZTogISFwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSwgcHJvcHMud2lkZ2V0SWQsIHByb3BzLnF1ZXJ5SXRlbS5jb25maWdJZCwgcHJvcHMucXVlcnlJdGVtU2hvcnRJZF0pXG4gIFxuICAvLyBDb250cm9sbGVkIHRhYiBzdGF0ZTogdXNlIHByb3AgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBpbnRlcm5hbCBzdGF0ZVxuICBjb25zdCBhY3RpdmVUYWIgPSBwcm9wQWN0aXZlVGFiIHx8IGludGVybmFsQWN0aXZlVGFiXG4gIGNvbnN0IHNldEFjdGl2ZVRhYiA9IFJlYWN0LnVzZUNhbGxiYWNrKCh0YWI6ICdxdWVyeScgfCAncmVzdWx0cycpID0+IHtcbiAgICBpZiAocHJvcE9uVGFiQ2hhbmdlKSB7XG4gICAgICBwcm9wT25UYWJDaGFuZ2UodGFiKVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXRJbnRlcm5hbEFjdGl2ZVRhYih0YWIpXG4gICAgfVxuICB9LCBbcHJvcE9uVGFiQ2hhbmdlXSlcbiAgY29uc3QgW2VuYWJsZWQsIHNldEVuYWJsZWRdID0gUmVhY3QudXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgW3Jlc3VsdENvdW50LCBzZXRSZXN1bHRDb3VudF0gPSBSZWFjdC51c2VTdGF0ZSgwKVxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IHNlbGVjdGVkIHJlY29yZHMgZm9yIHRoZSBjdXJyZW50IHF1ZXJ5IHJlc3VsdHNcbiAgY29uc3QgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBUcmFjayBxdWVyeSBleGVjdXRpb24gY291bnQgdG8gZm9yY2UgUXVlcnlUYXNrUmVzdWx0IHJlbW91bnQgb24gbmV3IHF1ZXJpZXNcbiAgY29uc3QgcXVlcnlFeGVjdXRpb25LZXlSZWYgPSBSZWFjdC51c2VSZWYoMClcbiAgY29uc3QgcXVlcnlQYXJhbVJlZiA9IFJlYWN0LnVzZVJlZjxRdWVyeVBhcmFtcz4obnVsbClcbiAgY29uc3QgcmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxEYXRhUmVjb3JkW10+KG51bGwpXG4gIGNvbnN0IFtvdXRwdXREUywgc2V0T3V0cHV0RFNdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3QgW3NwYXRpYWxGaWx0ZXJFbmFibGVkLCBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZF0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqID0gUmVhY3QudXNlUmVmPElNU3FsRXhwcmVzc2lvbj4ocXVlcnlJdGVtLnNxbEV4cHJPYmopXG4gIGNvbnN0IHNwYXRpYWxGaWx0ZXJPYmogPSBSZWFjdC51c2VSZWYobnVsbClcbiAgY29uc3QgYmFja0J0blJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBjbGVhclJlc3VsdEJ0blJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBbZGF0YUFjdGlvbkZpbHRlciwgc2V0RGF0YUFjdGlvbkZpbHRlcl0gPSBSZWFjdC51c2VTdGF0ZShudWxsKVxuICBjb25zdCBwcmV2aW91c0NvbmZpZ0lkUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZz4ocXVlcnlJdGVtLmNvbmZpZ0lkKVxuICAvLyBUcmFjayBtYW51YWwgdGFiIHN3aXRjaGVzIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgY29uc3QgbWFudWFsVGFiU3dpdGNoUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBUcmFjayB3aGVuIGEgcXVlcnkgd2FzIGp1c3QgZXhlY3V0ZWQgLSBvbmx5IGF1dG8tc3dpdGNoIGFmdGVyIHF1ZXJ5IGV4ZWN1dGlvbiBjb21wbGV0ZXNcbiAgY29uc3QgcXVlcnlKdXN0RXhlY3V0ZWRSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFN0b3JlIHRoZSBsYXN0IHJ1bnRpbWUgem9vbSBvdmVycmlkZSB2YWx1ZSBmcm9tIHRoZSBmb3JtIGZvciB1c2UgYnkgQWRkIHRvIE1hcCBhY3Rpb25cbiAgY29uc3QgbGFzdFJ1bnRpbWVab29tVG9TZWxlY3RlZFJlZiA9IFJlYWN0LnVzZVJlZjxib29sZWFuIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpXG4gIC8vIEVycm9yIHN0YXRlcyBmb3IgdXNlci1mYWNpbmcgZXJyb3JzXG4gIGNvbnN0IFtzZWxlY3Rpb25FcnJvciwgc2V0U2VsZWN0aW9uRXJyb3JdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihudWxsKVxuICBjb25zdCBbem9vbUVycm9yLCBzZXRab29tRXJyb3JdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihudWxsKVxuICAvLyBTdG9yZSBwZW5kaW5nIHF1ZXJ5IHdoZW4gd2FpdGluZyBmb3IgaGFzaCB2YWx1ZSBjb252ZXJzaW9uXG4gIGNvbnN0IHBlbmRpbmdIYXNoUXVlcnlSZWYgPSBSZWFjdC51c2VSZWY8e1xuICAgIHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvblxuICAgIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmpcbiAgICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4gIH0gfCBudWxsPihudWxsKVxuXG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9RVUVSWV9JVEVNLCBxdWVyeUl0ZW0pXG4gIGNvbnN0IHsgaWNvbiwgbmFtZSwgZGlzcGxheUxhYmVsIH0gPSBjdXJyZW50SXRlbVxuICBjb25zdCBkc0V4aXN0czogYm9vbGVhbiA9IHVzZURhdGFTb3VyY2VFeGlzdHMoeyB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsIHVzZURhdGFTb3VyY2VJZDogY3VycmVudEl0ZW0udXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkIH0pXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgdGFiIGNvbnRlbnQgcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeS10YWItY29udGVudC1yZW5kZXInLFxuICAgICAgYWN0aXZlVGFiLFxuICAgICAgZW5hYmxlZCxcbiAgICAgIGRzRXhpc3RzLFxuICAgICAgZGF0YVNvdXJjZTogZGF0YVNvdXJjZSA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIG5vdGU6ICdRdWVyeSB0YWIgY29udGVudCBzdGF0ZSBjaGVjaydcbiAgICB9KVxuICB9LCBbYWN0aXZlVGFiLCBlbmFibGVkLCBkc0V4aXN0cywgZGF0YVNvdXJjZSwgcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICAvLyBEZWJ1ZyBsb2dnaW5nIGZvciBUYWIgY2hpbGRyZW4gcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5LXRhYi1jaGlsZHJlbi1yZW5kZXInLFxuICAgICAgICBhY3RpdmVUYWIsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIG5vdGU6ICdRdWVyeSBUYWIgY2hpbGRyZW4gc2hvdWxkIGJlIHJlbmRlcmluZydcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbYWN0aXZlVGFiLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIC8vIGZvY3VzIHRoZSBiYWNrIGJ1dHRvbiB3aGVuIGl0IGlzIHJlbmRlcmVkXG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9KVxuXG4gIC8vIEdldCB0aGUgcGFnaW5hdGlvbiBzdHlsZSBmcm9tIHdpZGdldCBjb25maWcgKE11bHRpUGFnZSBvciBMYXp5TG9hZC9TaW5nbGUtcGFnZSlcbiAgY29uc3QgcGFnaW5nVHlwZUluQ29uZmlnID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbcHJvcHMud2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdFBhZ2luZ1N0eWxlXG4gIH0pXG5cbiAgLy8gR2V0IHRoZSBpbml0aWFsIHBhZ2Ugc2l6ZSBmb3Igc2luZ2xlLXBhZ2UgKExhenlMb2FkKSByZXN1bHRzXG4gIC8vIFRoaXMgYWxsb3dzIHVzZXJzIHRvIGNvbmZpZ3VyZSBob3cgbWFueSByZWNvcmRzIGFyZSBsb2FkZWQgaW5pdGlhbGx5IHdoZW4gdXNpbmcgc2luZ2xlLXBhZ2UgbW9kZVxuICAvLyBEZWZhdWx0cyB0byAxMDAgaWYgbm90IGNvbmZpZ3VyZWRcbiAgY29uc3QgbGF6eUxvYWRJbml0aWFsUGFnZVNpemUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1twcm9wcy53aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcubGF6eUxvYWRJbml0aWFsUGFnZVNpemVcbiAgfSlcblxuXG4gIC8vIFdhdGNoIGZvciB3aGVuIHJlc3VsdHMgYXJlIHJlYWR5IGFuZCBzd2l0Y2ggdG8gUmVzdWx0cyB0YWJcbiAgLy8gT05MWSBhdXRvLXN3aXRjaCB3aGVuIGEgcXVlcnkgd2FzIGp1c3QgZXhlY3V0ZWQgYW5kIHJlc3VsdHMgYXJlIGxvYWRlZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIERvbid0IGF1dG8tc3dpdGNoIGlmIHVzZXIgbWFudWFsbHkgc3dpdGNoZWQgdGFic1xuICAgIGlmIChtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2F1dG8tc3dpdGNoLXNraXBwZWQnLFxuICAgICAgICByZWFzb246ICdtYW51YWwtdGFiLXN3aXRjaC1mbGFnLXNldCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgYWN0aXZlVGFiLFxuICAgICAgICByZXN1bHRDb3VudCxcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWY6IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBGT1JDRUQ6IEFsd2F5cyB1c2UgU2ltcGxlTGlzdCAtIHdlJ3JlIGRvbmUgd2l0aCBsYXp5IGxvYWRpbmcgaXNzdWVzXG4gICAgLy8gUmVjb3JkcyBhcmUgYXZhaWxhYmxlIGltbWVkaWF0ZWx5LCBzbyB3ZSBjYW4gc3dpdGNoIGFzIHNvb24gYXMgcmVzdWx0Q291bnQgPiAwXG4gICAgY29uc3QgaXNTaW1wbGVMaXN0ID0gdHJ1ZVxuICAgIFxuICAgIC8vIE9OTFkgYXV0by1zd2l0Y2ggd2hlbjpcbiAgICAvLyAxLiBBIHF1ZXJ5IHdhcyBqdXN0IGV4ZWN1dGVkIChxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ID09PSB0cnVlKVxuICAgIC8vIDIuIFdlIGhhdmUgcmVzdWx0cyAocmVzdWx0Q291bnQgPiAwKVxuICAgIC8vIDMuIFJlY29yZHMgYXJlIGFjdHVhbGx5IGxvYWRlZDpcbiAgICAvLyAgICAtIEZvciBTaW1wbGVMaXN0OiByZXN1bHRDb3VudCA+IDAgaXMgc3VmZmljaWVudCAocmVjb3JkcyBhdmFpbGFibGUgaW1tZWRpYXRlbHkpXG4gICAgLy8gICAgLSBGb3IgTGF6eUxvYWQ6IHJlY29yZHNSZWYuY3VycmVudCBtdXN0IGhhdmUgZGF0YSAod2FpdCBmb3IgbGF6eSBsb2FkaW5nKVxuICAgIC8vIDQuIFdlJ3JlIGN1cnJlbnRseSBvbiB0aGUgcXVlcnkgdGFiIChkb24ndCBzd2l0Y2ggaWYgYWxyZWFkeSBvbiByZXN1bHRzKVxuICAgIGNvbnN0IGhhc1JlY29yZHMgPSBpc1NpbXBsZUxpc3QgXG4gICAgICA/IHJlc3VsdENvdW50ID4gMCBcbiAgICAgIDogKHJlY29yZHNSZWYuY3VycmVudCAmJiByZWNvcmRzUmVmLmN1cnJlbnQubGVuZ3RoID4gMClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2F1dG8tc3dpdGNoLWNoZWNrJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICBhY3RpdmVUYWIsXG4gICAgICByZXN1bHRDb3VudCxcbiAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmOiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50LFxuICAgICAgaXNTaW1wbGVMaXN0LFxuICAgICAgcGFnaW5nVHlwZUluQ29uZmlnLFxuICAgICAgaGFzUmVjb3JkcyxcbiAgICAgIHJlY29yZHNSZWZMZW5ndGg6IHJlY29yZHNSZWYuY3VycmVudD8ubGVuZ3RoIHx8IDAsXG4gICAgICBtYW51YWxUYWJTd2l0Y2hSZWY6IG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50LFxuICAgICAgd2lsbEF1dG9Td2l0Y2g6IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgJiYgcmVzdWx0Q291bnQgPiAwICYmIGhhc1JlY29yZHMgJiYgYWN0aXZlVGFiID09PSAncXVlcnknLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBpZiAocXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCAmJiBcbiAgICAgICAgcmVzdWx0Q291bnQgPiAwICYmIFxuICAgICAgICBoYXNSZWNvcmRzICYmIFxuICAgICAgICBhY3RpdmVUYWIgPT09ICdxdWVyeScpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC10cmlnZ2VyZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGZyb21UYWI6IGFjdGl2ZVRhYixcbiAgICAgICAgdG9UYWI6ICdyZXN1bHRzJyxcbiAgICAgICAgcmVzdWx0Q291bnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHNldEFjdGl2ZVRhYigncmVzdWx0cycpXG4gICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgYWZ0ZXIgc3dpdGNoaW5nXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnYXV0by1zd2l0Y2gtY29tcGxldGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZlJlc2V0OiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbcmVzdWx0Q291bnQsIGFjdGl2ZVRhYiwgcGFnaW5nVHlwZUluQ29uZmlnXSlcblxuICAvLyBWZXJpZnkgZHJvcGRvd25zIGFyZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlciB3aGVuIHByZXNlbnRcbiAgLy8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgZ3JvdXBlZCBxdWVyaWVzIHdoZXJlIGRyb3Bkb3ducyBuZWVkIHRvIGJlIHN5bmNocm9uaXplZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgdmVyaWZ5IGlmIHdlIGhhdmUgYSBoYXNoIHBhcmFtZXRlclxuICAgIGlmICghaW5pdGlhbElucHV0VmFsdWUgfHwgIXF1ZXJ5SXRlbS5zaG9ydElkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRoZSBjdXJyZW50IHF1ZXJ5SXRlbSBtYXRjaGVzIHdoYXQgd2UgZXhwZWN0IGZyb20gaGFzaCBwYXJhbWV0ZXJcbiAgICBjb25zdCBleHBlY3RlZFNob3J0SWQgPSBxdWVyeUl0ZW0uc2hvcnRJZFxuICAgIGNvbnN0IGlzR3JvdXBlZFF1ZXJ5ID0gcXVlcnlJdGVtLmdyb3VwSWQgIT09IG51bGwgJiYgcXVlcnlJdGVtLmdyb3VwSWQgIT09IHVuZGVmaW5lZFxuICAgIFxuICAgIC8vIENoZWNrIGlmIGRyb3Bkb3ducyBhcmUgY29ycmVjdGx5IHNldCBmb3IgZ3JvdXBlZCBxdWVyaWVzXG4gICAgaWYgKGlzR3JvdXBlZFF1ZXJ5KSB7XG4gICAgICBjb25zdCBleHBlY3RlZEdyb3VwSWQgPSBxdWVyeUl0ZW0uZ3JvdXBJZFxuICAgICAgY29uc3QgYWN0dWFsR3JvdXBJZCA9IHNlbGVjdGVkR3JvdXBJZFxuICAgICAgY29uc3QgZXhwZWN0ZWRRdWVyeUluZGV4ID0gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXhcbiAgICAgIFxuICAgICAgaWYgKGV4cGVjdGVkR3JvdXBJZCAhPT0gYWN0dWFsR3JvdXBJZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnZHJvcGRvd24tZ3JvdXAtbWlzbWF0Y2gnLFxuICAgICAgICAgIGV4cGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICBhY3R1YWxHcm91cElkLFxuICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICB3YXJuaW5nOiAnRmlyc3QgZHJvcGRvd24gbWF5IG5vdCBiZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoZXhwZWN0ZWRRdWVyeUluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gVmVyaWZ5IHRoZSBxdWVyeSBpbmRleCB3aXRoaW4gdGhlIGdyb3VwIG1hdGNoZXNcbiAgICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IGdyb3Vwcz8uW2V4cGVjdGVkR3JvdXBJZF0/Lml0ZW1zXG4gICAgICAgIGlmIChncm91cEl0ZW1zICYmIGdyb3VwSXRlbXMubGVuZ3RoID4gZXhwZWN0ZWRRdWVyeUluZGV4KSB7XG4gICAgICAgICAgY29uc3QgZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkID0gZ3JvdXBJdGVtc1tleHBlY3RlZFF1ZXJ5SW5kZXhdPy5jb25maWdJZFxuICAgICAgICAgIGNvbnN0IGFjdHVhbFF1ZXJ5Q29uZmlnSWQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICBpZiAoZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkICE9PSBhY3R1YWxRdWVyeUNvbmZpZ0lkKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICBldmVudDogJ2Ryb3Bkb3duLXF1ZXJ5LWluZGV4LW1pc21hdGNoJyxcbiAgICAgICAgICAgICAgZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkLFxuICAgICAgICAgICAgICBhY3R1YWxRdWVyeUNvbmZpZ0lkLFxuICAgICAgICAgICAgICBleHBlY3RlZFF1ZXJ5SW5kZXgsXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICAgICAgd2FybmluZzogJ1NlY29uZCBkcm9wZG93biBtYXkgbm90IGJlIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdkcm9wZG93bnMtc3luY2hyb25pemVkJyxcbiAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICAgICAgICBncm91cElkOiBleHBlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4OiBleHBlY3RlZFF1ZXJ5SW5kZXgsXG4gICAgICAgICAgICAgIG5vdGU6ICdEcm9wZG93bnMgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVbmdyb3VwZWQgcXVlcnkgLSB2ZXJpZnkgaXQncyBzZWxlY3RlZFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdkcm9wZG93bnMtc3luY2hyb25pemVkLXVuZ3JvdXBlZCcsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgbm90ZTogJ1VuZ3JvdXBlZCBxdWVyeSBkcm9wZG93biBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbaW5pdGlhbElucHV0VmFsdWUsIHF1ZXJ5SXRlbS5zaG9ydElkLCBxdWVyeUl0ZW0uZ3JvdXBJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBzZWxlY3RlZEdyb3VwSWQsIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LCBncm91cHNdKVxuXG4gIGNvbnN0IHVzZU91dHB1dERzOiBJbW11dGFibGVPYmplY3Q8VXNlRGF0YVNvdXJjZT4gPSBSZWFjdC51c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBJbW11dGFibGUoe1xuICAgICAgICBkYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWQsXG4gICAgICAgIG1haW5EYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRcbiAgICAgIH0pLFxuICAgIFtxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXVxuICApXG5cbiAgY29uc3QgdXBkYXRlRGF0YVNvdXJjZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChkcz86IERhdGFTb3VyY2UpID0+IHtcbiAgICBjb25zdCBjdXJyZW50RHMgPSBkcyA/PyBkYXRhU291cmNlXG4gICAgLy8gc2hvdWxkIGRpc2FibGUgc3BhdGlhbCBmaWx0ZXIgaWYgdGhlIGRhdGFTb3VyY2UgaXMgYW4gb3V0cHV0IGRzIGFuZCBpdCBhbHJlYWR5IGhhcyBzcGF0aWFsIGZpbHRlclxuICAgIGlmIChjdXJyZW50RHM/LmdldERhdGFTb3VyY2VKc29uKCk/LmlzT3V0cHV0RnJvbVdpZGdldCkge1xuICAgICAgY29uc3QgcURzOiBRdWVyaWFibGVEYXRhU291cmNlID0gY3VycmVudERzIGFzIFF1ZXJpYWJsZURhdGFTb3VyY2VcbiAgICAgIGNvbnN0IHFQYXJhbXMgPSBxRHMuZ2V0Q3VycmVudFF1ZXJ5UGFyYW1zPy4oKSBhcyBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtc1xuICAgICAgaWYgKHFQYXJhbXMuZ2VvbWV0cnkgIT0gbnVsbCkge1xuICAgICAgICBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZChmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFNwYXRpYWxGaWx0ZXJFbmFibGVkKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9LCBbZGF0YVNvdXJjZV0pXG5cbiAgY29uc3QgaGFuZGxlU3RhdHVzQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGVuYWJsZWQ6IGJvb2xlYW4pID0+IHtcbiAgICBzZXRFbmFibGVkKGVuYWJsZWQpXG4gICAgdXBkYXRlRGF0YVNvdXJjZSgpXG4gIH0sIFt1cGRhdGVEYXRhU291cmNlXSlcblxuICBjb25zdCBoYW5kbGVPdXRwdXREYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmZvLCBwcmVJbmZvKSA9PiB7XG4gICAgY29uc3Qgb3V0cHV0SWQgPSBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgY29uc3QgZmlsdGVyID0gaW5mbz8ud2lkZ2V0UXVlcmllcyA/IGluZm8ud2lkZ2V0UXVlcmllc1tgc2V0RmlsdGVyLSR7b3V0cHV0SWR9YF0gOiBudWxsXG4gICAgaWYgKGZpbHRlciA9PSBudWxsKSB7IC8vIGZpbHRlciBpcyBudWxsIG1lYW5zIHRoZXJlIGFyZSBpbmNvbXBsZXRlIHF1ZXJpZXMsIGlnbm9yZSB0aGlzIGNoYW5nZVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHByZUZpbHRlciA9IHByZUluZm8/LndpZGdldFF1ZXJpZXMgPyBwcmVJbmZvLndpZGdldFF1ZXJpZXNbYHNldEZpbHRlci0ke291dHB1dElkfWBdIDogbnVsbFxuICAgIGlmIChmaWx0ZXI/LndoZXJlICE9PSBwcmVGaWx0ZXI/LndoZXJlKSB7XG4gICAgICBzZXREYXRhQWN0aW9uRmlsdGVyKGZpbHRlcilcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXSlcblxuICBjb25zdCBwdWJsaXNoRGF0YUNsZWFyZWRNc2cgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG4gICAgY29uc3QgZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UgPSBuZXcgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UocHJvcHMud2lkZ2V0SWQsIFJlY29yZFNldENoYW5nZVR5cGUuUmVtb3ZlLCBbb3V0cHV0RFMuaWRdKVxuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UpXG4gICAgYXdhaXQgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHByb3BzLndpZGdldElkLCBbXSwgW291dHB1dERTLmlkXSkpXG4gIH0sIFtwcm9wcy53aWRnZXRJZCwgb3V0cHV0RFNdKVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIHF1ZXJ5IHJlc3VsdHMgZnJvbSB0aGUgVUkgYW5kIG1hcC5cbiAgICogVGhpcyBpcyB0aGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCBmb3IgY2xlYXJpbmcgcmVzdWx0cy5cbiAgICogSXQgY2xlYXJzIHRoZSByZWNvcmRzLCByZXNldHMgdGhlIHJlc3VsdCBjb3VudCwgY2xlYXJzIHNlbGVjdGlvbiBmcm9tIHRoZSBtYXAsXG4gICAqIHB1Ymxpc2hlcyBhIGNsZWFyZWQgbWVzc2FnZSB0byB0aGUgbWFwLCBzd2l0Y2hlcyBiYWNrIHRvIHRoZSBRdWVyeSB0YWIsXG4gICAqIGFuZCBpbmNyZW1lbnRzIHRoZSBxdWVyeSBleGVjdXRpb24ga2V5IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCB0byByZW1vdW50IHdpdGggZnJlc2ggc3RhdGUuXG4gICAqL1xuICBjb25zdCBjbGVhclJlc3VsdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChyZWFzb246IHN0cmluZyA9ICd1bmtub3duJykgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTLFxuICAgICAgcmVhc29uLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIHJlY29yZHNSZWYuY3VycmVudCA9IG51bGxcbiAgICBvdXRwdXREUz8uc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gICAgc2V0UmVzdWx0Q291bnQoMClcbiAgICBcbiAgICAvLyBOT1RFOiBHcmFwaGljcyBsYXllciBjbGVhcmluZyBpcyBub3cgaGFuZGxlZCBpbnNpZGUgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzXG4gICAgLy8gY2FsbGVkIGJlbG93LiBXZSBlbnN1cmUgdGhpcyBpcyBhd2FpdGVkIHRvIHByZXZlbnQgcmFjZSBjb25kaXRpb25zLlxuICAgIFxuICAgIC8vIENsZWFyIHNlbGVjdGlvbiBkaXJlY3RseSBmcm9tIGRhdGEgc291cmNlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICB0cnkge1xuICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKHByb3BzLndpZGdldElkLCBvdXRwdXREUywgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcilcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdC1zZWxlY3Rpb24tY2xlYXJlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtc2VsZWN0aW9uLWNsZWFyLWZhaWxlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhciB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3JkcyB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1jbGVhcmVkLW9uLWNsZWFyLXJlc3VsdHMnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWRcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIGF3YWl0IHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZygpXG4gICAgLy8gU3dpdGNoIGJhY2sgdG8gUXVlcnkgdGFiIHdoZW4gY2xlYXJpbmcgcmVzdWx0c1xuICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgIHNldFN0YWdlKDApXG4gICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBzZWxlY3Rpb24gZmxhZyB3aGVuIGNsZWFyaW5nXG4gICAgLy8gSW5jcmVtZW50IHF1ZXJ5IGV4ZWN1dGlvbiBrZXkgdG8gZm9yY2UgUXVlcnlUYXNrUmVzdWx0IHJlbW91bnQgd2l0aCBmcmVzaCBzdGF0ZVxuICAgIHF1ZXJ5RXhlY3V0aW9uS2V5UmVmLmN1cnJlbnQgKz0gMVxuICAgIC8vIENsZWFyIGVycm9yIHN0YXRlcyB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKVxuICAgIHNldFpvb21FcnJvcihudWxsKVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdC1jb21wbGV0ZScsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbb3V0cHV0RFMsIHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZywgcHJvcHMud2lkZ2V0SWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXJdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGRhdGEgc291cmNlIGNyZWF0aW9uIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gcXVlcnkgaXRlbXMuXG4gICAqIFdoZW4gYSBuZXcgcXVlcnkgaXRlbSBpcyBzZWxlY3RlZCAoZS5nLiwgc3dpdGNoaW5nIGZyb20gUGFyY2VsIHRvIE1ham9yKSxcbiAgICogdGhpcyBjbGVhcnMgb2xkIHJlc3VsdHMgdG8gZW5zdXJlIGFsbCBjbGVhbnVwIGxvZ2ljIHJ1bnMgcHJvcGVybHkuXG4gICAqIFxuICAgKiBAcGFyYW0gZHMgLSBUaGUgbmV3bHkgY3JlYXRlZCBkYXRhIHNvdXJjZSBmb3IgdGhlIHNlbGVjdGVkIHF1ZXJ5IGl0ZW1cbiAgICovXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKGRzOiBEYXRhU291cmNlKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlQ3JlYXRlZC1zdGFydCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBJbiBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHByZXNlcnZlIGFjY3VtdWxhdGVkIHJlY29yZHMgYW5kIHNlbGVjdGlvbiAtIGRvbid0IGNsZWFyXG4gICAgaWYgKChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSBcbiAgICAgICAgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdwcmVzZXJ2aW5nLXNlbGVjdGlvbi1vbi1xdWVyeS1zd2l0Y2gtaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgc2V0RGF0YVNvdXJjZShkcylcbiAgICAgIHVwZGF0ZURhdGFTb3VyY2UoZHMpXG4gICAgICBzZXRTdGFnZSgwKVxuICAgICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgICByZXR1cm4gLy8gU2tpcCBjbGVhcmluZyAtIHByZXNlcnZlIHNlbGVjdGlvblxuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBjbGVhciBvbGQgcmVzdWx0c1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQtY2xlYXJpbmctcmVzdWx0cy1mb3ItbmV3LW1vZGUnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBhd2FpdCBjbGVhclJlc3VsdCgnaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQtbmV3LW1vZGUnKVxuXG4gICAgc2V0RGF0YVNvdXJjZShkcylcbiAgICB1cGRhdGVEYXRhU291cmNlKGRzKVxuICAgIHNldFN0YWdlKDApXG4gICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpIC8vIFJldHVybiB0byBRdWVyeSB0YWIgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICB9LCBbdXBkYXRlRGF0YVNvdXJjZSwgY2xlYXJSZXN1bHQsIHJlc3VsdENvdW50LCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBwcm9wcy53aWRnZXRJZF0pXG5cbiAgY29uc3QgaGFuZGxlT3V0cHV0RGF0YVNvdXJjZUNyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoZHM6IERhdGFTb3VyY2UpID0+IHtcbiAgICBzZXRPdXRwdXREUyhkcylcbiAgICBcbiAgICAvLyBEZXRlY3QgcXVlcnkgc3dpdGNoIGZvciBsb2dnaW5nXG4gICAgY29uc3QgaXNTd2l0Y2hpbmdRdWVyaWVzID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ICE9PSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICBjb25zdCBvbGRDb25maWdJZCA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudFxuICAgIFxuICAgIC8vIFZFUklGSUNBVElPTiBMT0dHSU5HOiBUcmFjayBncmFwaGljcyBsYXllciBzdGF0ZSB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gICAgaWYgKGlzU3dpdGNoaW5nUXVlcmllcyAmJiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IGdyYXBoaWNzQ291bnRCZWZvcmUgPSBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZU91dHB1dERhdGFTb3VyY2VDcmVhdGVkLXF1ZXJ5LXN3aXRjaC1kZXRlY3RlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXIsXG4gICAgICAgIGdyYXBoaWNzQ291bnRCZWZvcmUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgIGhhc09uQ2xlYXJHcmFwaGljc0xheWVyOiAhIW9uQ2xlYXJHcmFwaGljc0xheWVyLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIENIRUNLIHJvb3REYXRhU291cmNlLm1hcCB0byBzZWUgaG93IGZyYW1ld29yayBhY2Nlc3NlcyBtYXAgdmlld1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcmlnaW5EYXRhU291cmNlcyA9IGRzLmdldE9yaWdpbkRhdGFTb3VyY2VzKClcbiAgICAgIGNvbnN0IG9yaWdpbkRTID0gb3JpZ2luRGF0YVNvdXJjZXM/LlswXVxuICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgIGNvbnN0IHJvb3REUyA9IG9yaWdpbkRTLmdldFJvb3REYXRhU291cmNlKClcbiAgICAgICAgaWYgKHJvb3REUykge1xuICAgICAgICAgIC8vIEV4cG9zZSByb290RFMgdG8gd2luZG93IGZvciBjb25zb2xlIGluc3BlY3Rpb25cbiAgICAgICAgICA7KHdpbmRvdyBhcyBhbnkpLl9fcXVlcnlTaW1wbGVSb290RFMgPSByb290RFNcbiAgICAgICAgICA7KHdpbmRvdyBhcyBhbnkpLl9fcXVlcnlTaW1wbGVSb290RFNNYXAgPSAocm9vdERTIGFzIGFueSkubWFwXG4gICAgICAgICAgOyh3aW5kb3cgYXMgYW55KS5fX3F1ZXJ5U2ltcGxlT3JpZ2luRFMgPSBvcmlnaW5EU1xuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICBldmVudDogJ2NoZWNrLXJvb3QtZGF0YXNvdXJjZS1tYXAnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgb3V0cHV0RFNJZDogZHMuaWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgICByb290RFNUeXBlOiByb290RFMudHlwZSxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcDogISEocm9vdERTIGFzIGFueSkubWFwLFxuICAgICAgICAgICAgcm9vdERTTWFwVHlwZTogKHJvb3REUyBhcyBhbnkpLm1hcCA/IHR5cGVvZiAocm9vdERTIGFzIGFueSkubWFwIDogJ25vbmUnLFxuICAgICAgICAgICAgcm9vdERTTWFwSWQ6IChyb290RFMgYXMgYW55KS5tYXA/LmlkIHx8ICdub25lJyxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcFZpZXc6ICEhKHJvb3REUyBhcyBhbnkpLm1hcD8udmlldyxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcFZpZXdzOiAhIShyb290RFMgYXMgYW55KS5tYXA/LnZpZXdzLFxuICAgICAgICAgICAgcm9vdERTTWFwVmlld3NMZW5ndGg6IChyb290RFMgYXMgYW55KS5tYXA/LnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIC8vIExvZyBzb21lIG1hcCBwcm9wZXJ0aWVzIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgcm9vdERTTWFwS2V5czogKHJvb3REUyBhcyBhbnkpLm1hcCA/IE9iamVjdC5rZXlzKChyb290RFMgYXMgYW55KS5tYXApLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICAgICAgICB0eXBlb2YgKHJvb3REUyBhcyBhbnkpLm1hcFtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICApLnNsaWNlKDAsIDIwKSA6IFtdLFxuICAgICAgICAgICAgLy8gTG9nIHRoYXQgb2JqZWN0cyBhcmUgYXZhaWxhYmxlIG9uIHdpbmRvdyBmb3IgY29uc29sZSBpbnNwZWN0aW9uXG4gICAgICAgICAgICBjb25zb2xlSW5zcGVjdGlvbjogJ0NoZWNrIHdpbmRvdy5fX3F1ZXJ5U2ltcGxlUm9vdERTLCB3aW5kb3cuX19xdWVyeVNpbXBsZVJvb3REU01hcCwgd2luZG93Ll9fcXVlcnlTaW1wbGVPcmlnaW5EUycsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIG1hcCBleGlzdHMsIGNoZWNrIGl0cyB2aWV3XG4gICAgICAgICAgY29uc3Qgcm9vdE1hcCA9IChyb290RFMgYXMgYW55KS5tYXBcbiAgICAgICAgICBpZiAocm9vdE1hcCkge1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IHJvb3RNYXAudmlldyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cz8uZ2V0SXRlbUF0Py4oMCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyByb290TWFwLnZpZXdzWzBdIDogbnVsbClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdjaGVjay1yb290LWRhdGFzb3VyY2UtbWFwLXZpZXcnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGhhc1ZpZXc6ICEhdmlldyxcbiAgICAgICAgICAgICAgdmlld1R5cGU6IHZpZXc/LnR5cGUgfHwgJ25vbmUnLFxuICAgICAgICAgICAgICB2aWV3SWQ6IHZpZXc/LmlkIHx8ICdub25lJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NoZWNrLXJvb3QtZGF0YXNvdXJjZS1tYXAtZXJyb3InLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGdyYXBoaWNzIGxheWVyIGxhemlseSBpZiBlbmFibGVkIGFuZCBub3QgYWxyZWFkeSBpbml0aWFsaXplZFxuICAgIGlmICh1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgIGF3YWl0IG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIoZHMpXG4gICAgICAvLyBBZnRlciBpbml0aWFsaXphdGlvbiwgZ3JhcGhpY3NMYXllciBhbmQgbWFwVmlldyBwcm9wcyBzaG91bGQgYmUgdXBkYXRlZFxuICAgICAgLy8gQnV0IHNpbmNlIHByb3BzIGNvbWUgZnJvbSByZWZzLCB3ZSBuZWVkIHRvIHdhaXQgZm9yIHdpZGdldCByZS1yZW5kZXJcbiAgICAgIC8vIEZvciBub3csIHVzZSB0aGUgcHJvcHMgdGhhdCB3aWxsIGJlIHVwZGF0ZWQgb24gbmV4dCByZW5kZXJcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgaW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSBhbmQgd2UgaGF2ZSBhY2N1bXVsYXRlZCByZWNvcmRzLCByZS1zZWxlY3QgdGhlbVxuICAgIC8vIFRoaXMgdXNlcyB0aGUgc2FtZSBsb2dpYyBhcyBhZnRlciBxdWVyeSBjb21wbGV0aW9uIC0gc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2hcbiAgICAvLyBUaGlzIGVuc3VyZXMgcmVjb3JkcyBhcmUgc2VsZWN0ZWQgYm90aCBvbiB0aGUgbWFwIGFuZCBpbiB0aGUgUmVzdWx0cyB0YWJcbiAgICBpZiAoKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIFxuICAgICAgICAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIFZFUklGSUNBVElPTiBMT0dHSU5HOiBHcmFwaGljcyBjb3VudCBiZWZvcmUgY2xlYXJpbmdcbiAgICAgIGNvbnN0IGdyYXBoaWNzQ291bnRCZWZvcmVDbGVhciA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMFxuICAgICAgXG4gICAgICAvLyBGSVggKHIwMTguNjcpOiBDbGVhciBncmFwaGljcyBsYXllciB3aGVuIHN3aXRjaGluZyBxdWVyaWVzIHRvIHByZXZlbnQgc3RhbGUgZ3JhcGhpY3NcbiAgICAgIC8vIGZyb20gcHJldmlvdXMgcXVlcmllcyBmcm9tIHBlcnNpc3RpbmcgaW4gdGhlIHNoYXJlZCBncmFwaGljcyBsYXllclxuICAgICAgaWYgKHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgZ3JhcGhpY3NMYXllciAmJiBvbkNsZWFyR3JhcGhpY3NMYXllcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ2NsZWFyaW5nLWdyYXBoaWNzLWxheWVyLWJlZm9yZS1yZXNlbGVjdGlvbi1vbi1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICBncmFwaGljc0NvdW50QmVmb3JlQ2xlYXIsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIG9uQ2xlYXJHcmFwaGljc0xheWVyKClcbiAgICAgICAgXG4gICAgICAgIC8vIFZFUklGSUNBVElPTiBMT0dHSU5HOiBHcmFwaGljcyBjb3VudCBhZnRlciBjbGVhcmluZ1xuICAgICAgICBjb25zdCBncmFwaGljc0NvdW50QWZ0ZXJDbGVhciA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ2dyYXBoaWNzLWxheWVyLWNsZWFyZWQtb24tcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgZ3JhcGhpY3NDb3VudEJlZm9yZUNsZWFyLFxuICAgICAgICAgIGdyYXBoaWNzQ291bnRBZnRlckNsZWFyLFxuICAgICAgICAgIGNsZWFyZWQ6IGdyYXBoaWNzQ291bnRBZnRlckNsZWFyID09PSAwLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdza2lwcGluZy1ncmFwaGljcy1sYXllci1jbGVhci1vbi1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICByZWFzb246ICF1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ID8gJ3VzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQtZmFsc2UnIDogXG4gICAgICAgICAgICAgICAgICAhZ3JhcGhpY3NMYXllciA/ICduby1ncmFwaGljc0xheWVyJyA6IFxuICAgICAgICAgICAgICAgICAgIW9uQ2xlYXJHcmFwaGljc0xheWVyID8gJ25vLW9uQ2xlYXJHcmFwaGljc0xheWVyJyA6ICd1bmtub3duJyxcbiAgICAgICAgICBncmFwaGljc0NvdW50QmVmb3JlQ2xlYXIsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVzZSBhIGRlbGF5IHRvIGVuc3VyZSB0aGUgRFMgaXMgZnVsbHkgcmVhZHkgYW5kIGdyYXBoaWNzIGxheWVyIHByb3BzIGFyZSB1cGRhdGVkIGFmdGVyIHdpZGdldCByZS1yZW5kZXJcbiAgICAgIC8vIElmIGdyYXBoaWNzIGxheWVyIHdhcyBqdXN0IGluaXRpYWxpemVkLCB3YWl0IGEgYml0IGxvbmdlciBmb3IgcHJvcHMgdG8gdXBkYXRlXG4gICAgICBjb25zdCBkZWxheSA9ICh1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIpID8gMjAwIDogMTAwXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgZmVhdHVyZURTID0gZHMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICBpZiAoZmVhdHVyZURTICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIEZJWCAocjAxOC42Nyk6IFVzZSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBzb3VyY2Ugb2YgdHJ1dGggdG8gc3luYyBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgcmVtb3ZlZCByZWNvcmRzIGFyZSBub3QgcmUtc2VsZWN0ZWQgYW5kIGFyZSByZW1vdmVkIGZyb20gYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgLy8gV2UgZG9uJ3Qgc3RvcmUgcmVtb3ZlZCByZWNvcmRzIGFueXdoZXJlIC0gdGhleSdyZSBwZXJtYW5lbnRseSByZW1vdmVkXG4gICAgICAgICAgY29uc3QgYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMgPSBmZWF0dXJlRFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFZFUklGSUNBVElPTiBMT0dHSU5HOiBDb21wYXJlIGFjY3VtdWxhdGVkUmVjb3JkcyB2cyBhY3R1YWxseSBzZWxlY3RlZCByZWNvcmRzXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3N5bmMtY2hlY2stYmVmb3JlLXJlc2VsZWN0aW9uJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZFJlY29yZHNDb3VudDogYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRJZHM6IGFjY3VtdWxhdGVkUmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgICAgIGFjdHVhbGx5U2VsZWN0ZWRJZHM6IGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSkuc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgcmVjb3Jkc091dE9mU3luYzogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCAhPT0gYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTWU5DOiBJZiBhY2N1bXVsYXRlZFJlY29yZHMgZG9lc24ndCBtYXRjaCB3aGF0J3MgYWN0dWFsbHkgc2VsZWN0ZWQsIHN5bmMgaXRcbiAgICAgICAgICAvLyBUaGlzIGhhcHBlbnMgd2hlbiByZWNvcmRzIHdlcmUgbWFudWFsbHkgcmVtb3ZlZCBidXQgYWNjdW11bGF0ZWRSZWNvcmRzIHdhc24ndCB1cGRhdGVkXG4gICAgICAgICAgbGV0IHJlY29yZHNUb1Jlc2VsZWN0ID0gYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgaWYgKGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgICAgICAgIGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCAhPT0gYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gQnVpbGQgYSBTZXQgb2YgYWN0dWFsbHkgc2VsZWN0ZWQgSURzIGZvciBmYXN0IGxvb2t1cFxuICAgICAgICAgICAgY29uc3QgYWN0dWFsbHlTZWxlY3RlZElkcyA9IG5ldyBTZXQoYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmlsdGVyIGFjY3VtdWxhdGVkUmVjb3JkcyB0byBvbmx5IGluY2x1ZGUgcmVjb3JkcyB0aGF0IGFyZSBhY3R1YWxseSBzZWxlY3RlZFxuICAgICAgICAgICAgcmVjb3Jkc1RvUmVzZWxlY3QgPSBhY2N1bXVsYXRlZFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiBcbiAgICAgICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZElkcy5oYXMocmVjb3JkLmdldElkKCkpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBhY2N1bXVsYXRlZFJlY29yZHMgdG8gbWF0Y2ggcmVhbGl0eSAoc3luYylcbiAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3N5bmNpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy10by1hY3R1YWxseS1zZWxlY3RlZCcsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QmVmb3JlOiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QWZ0ZXI6IHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICByZWNvcmRzUmVtb3ZlZDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCAtIHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICBub3RlOiAncmVtb3ZlZC1yZWNvcmRzLXBlcm1hbmVudGx5LWRlbGV0ZWQtZnJvbS1hY2N1bXVsYXRlZFJlY29yZHMnLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShyZWNvcmRzVG9SZXNlbGVjdClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMCAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gQWxsIHJlY29yZHMgd2VyZSByZW1vdmVkIC0gc3luYyBhY2N1bXVsYXRlZFJlY29yZHMgdG8gZW1wdHlcbiAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3N5bmNpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy10by1lbXB0eScsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QmVmb3JlOiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG5vdGU6ICdhbGwtcmVjb3Jkcy1yZW1vdmVkLXN5bmNpbmctdG8tZW1wdHknLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShbXSlcbiAgICAgICAgICAgICAgcmVjb3Jkc1RvUmVzZWxlY3QgPSBbXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBPbmx5IHJlLXNlbGVjdCBpZiB3ZSBoYXZlIHJlY29yZHMgdG8gcmUtc2VsZWN0XG4gICAgICAgICAgaWYgKHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZElkcyA9IHJlY29yZHNUb1Jlc2VsZWN0Lm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERJQUdOT1NUSUMgTE9HR0lORzogV2hhdCB3ZSdyZSBhYm91dCB0byByZS1zZWxlY3RcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1iZWZvcmUtcmVzZWxlY3Rpb24nLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIHJlY29yZHNUb1Jlc2VsZWN0Q291bnQ6IHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgcmVjb3Jkc1RvUmVzZWxlY3RJZHM6IHJlY29yZElkcyxcbiAgICAgICAgICAgICAgb3V0cHV0RFNJZDogZmVhdHVyZURTLmlkLFxuICAgICAgICAgICAgICBncmFwaGljc0xheWVyQ291bnRCZWZvcmU6IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVc2UgdGhlIHNhbWUgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggdGhhdCdzIHVzZWQgYWZ0ZXIgcXVlcnkgY29tcGxldGlvblxuICAgICAgICAgICAgLy8gVGhpcyB3aWxsIHNlbGVjdCByZWNvcmRzIG9uIHRoZSBtYXAgYW5kIHRyaWdnZXIgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2VcbiAgICAgICAgICAgIC8vIGluIHF1ZXJ5LXJlc3VsdC50c3ggdG8gdXBkYXRlIHNlbGVjdGVkUmVjb3JkcyBzdGF0ZSBmb3IgdGhlIFJlc3VsdHMgdGFiXG4gICAgICAgICAgICAvLyBVc2UgZ3JhcGhpY3MgbGF5ZXIgaWYgZW5hYmxlZCAocHJvcHMgc2hvdWxkIGJlIHVwZGF0ZWQgYWZ0ZXIgd2lkZ2V0IHJlLXJlbmRlcilcbiAgICAgICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlRFMsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZElkcyxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvUmVzZWxlY3QsXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyLFxuICAgICAgICAgICAgICAgICAgICBtYXBWaWV3XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcmVjb3Jkc1JlZiBzbyByZXN1bHRzIHRhYiBzaG93cyBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgICAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSByZWNvcmRzVG9SZXNlbGVjdFxuICAgICAgICAgICAgICAgICAgc2V0UmVzdWx0Q291bnQocmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQVRJT04gTE9HR0lORzogR3JhcGhpY3MgY291bnQgYWZ0ZXIgcmUtc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICBjb25zdCBncmFwaGljc0NvdW50QWZ0ZXJSZXNlbGVjdGlvbiA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZS1zZWxlY3RlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLWFmdGVyLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogZmVhdHVyZURTLmlkLFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGhpY3NDb3VudEFmdGVyUmVzZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkR3JhcGhpY3NDb3VudDogcmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBncmFwaGljc01hdGNoOiBncmFwaGljc0NvdW50QWZ0ZXJSZXNlbGVjdGlvbiA9PT0gcmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIFZlcmlmeSB3aGF0J3MgYWN0dWFsbHkgc2VsZWN0ZWQgaW4gdGhlIERTIGFmdGVyIGEgZGVsYXlcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShmZWF0dXJlRFMuaWQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5EUyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZElkc0luRFMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSA/PyBbXVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbEdyYXBoaWNzQ291bnQgPSBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxHcmFwaGljc0lkcyA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5tYXAoZyA9PiBnLmF0dHJpYnV0ZXM/Lk9CSkVDVElEIHx8IGcuYXR0cmlidXRlcz8uaWQgfHwgZy5hdHRyaWJ1dGVzPy5GSUQpIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1hZnRlci1yZXNlbGVjdGlvbi1mdWxsLXN0YXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogZmVhdHVyZURTLmlkLFxuICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkQ291bnQ6IHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZElkczogcmVjb3JkSWRzLFxuICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbFNlbGVjdGVkSW5EUzogc2VsZWN0ZWRJbkRTPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxTZWxlY3RlZElkc0luRFM6IHNlbGVjdGVkSWRzSW5EUyxcbiAgICAgICAgICAgICAgICAgICAgICBmaW5hbEdyYXBoaWNzQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgZmluYWxHcmFwaGljc0lkcyxcbiAgICAgICAgICAgICAgICAgICAgICBhbGxTb3VyY2VzTWF0Y2g6IHNlbGVjdGVkSWRzSW5EUy5sZW5ndGggPT09IHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxHcmFwaGljc0NvdW50ID09PSByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHNlbGVjdGVkSWRzSW5EUy5zb3J0KCkpID09PSBKU09OLnN0cmluZ2lmeShyZWNvcmRJZHMuc29ydCgpKSxcbiAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH0sIDIwMClcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAncmUtc2VsZWN0aW9uLWZhaWxlZC1hZnRlci1zd2l0Y2gnLFxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSkoKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBObyByZWNvcmRzIHRvIHJlLXNlbGVjdCAtIGFsbCB3ZXJlIHJlbW92ZWRcbiAgICAgICAgICAgIHJlY29yZHNSZWYuY3VycmVudCA9IFtdXG4gICAgICAgICAgICBzZXRSZXN1bHRDb3VudCgwKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICduby1yZWNvcmRzLXRvLXJlc2VsZWN0LWFsbC1yZW1vdmVkJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBvdXRwdXREU0lkOiBmZWF0dXJlRFMuaWQsXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QmVmb3JlOiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBub3RlOiAnYWxsLXJlY29yZHMtd2VyZS1yZW1vdmVkLW5vLXJlc2VsZWN0aW9uLW5lZWRlZCcsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMClcbiAgICB9XG4gIH0sIFtyZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBwcm9wcy53aWRnZXRJZCwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllciwgb25DbGVhckdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcsIHF1ZXJ5SXRlbS5jb25maWdJZCwgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2VdKVxuXG4gIC8vIENsZWFyIHJlc3VsdHMgd2hlbiBxdWVyeSBpdGVtIGNoYW5nZXMgKGUuZy4sIHdoZW4gbmV3IGhhc2ggcGFyYW1ldGVyIHRyaWdnZXJzIGRpZmZlcmVudCBxdWVyeSlcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IGNsZWFyIGlmIHdlJ3JlIGFjdHVhbGx5IHN3aXRjaGluZyB0byBhIGRpZmZlcmVudCBxdWVyeSAobm90IGp1c3QgcmUtcmVuZGVyaW5nKVxuICAgIGNvbnN0IGlzU3dpdGNoaW5nUXVlcmllcyA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCAhPT0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgXG4gICAgLy8gT25seSBjbGVhciByZXN1bHRzIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXMgaWYgd2UncmUgaW4gXCJOZXdcIiBtb2RlXG4gICAgLy8gSW4gXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB3ZSB3YW50IHRvIHByZXNlcnZlIGFjY3VtdWxhdGVkIHJlY29yZHMgYWNyb3NzIHF1ZXJ5IHN3aXRjaGVzXG4gICAgaWYgKGlzU3dpdGNoaW5nUXVlcmllcyAmJiByZXN1bHRDb3VudCA+IDAgJiYgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAvLyBTdG9yZSB0aGUgb2xkIGNvbmZpZ0lkIGJlZm9yZSB1cGRhdGluZ1xuICAgICAgY29uc3Qgb2xkQ29uZmlnSWQgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnRcbiAgICAgIC8vIFVwZGF0ZSB0aGUgcmVmIHRvIHRyYWNrIHRoZSBuZXcgcXVlcnlcbiAgICAgIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhcmluZy1yZXN1bHRzLW9uLXF1ZXJ5LXN3aXRjaC1uZXctbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHJlc3VsdHNNb2RlXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBDbGVhciBpbW1lZGlhdGVseSB3aGVuIHN3aXRjaGluZyBxdWVyaWVzLCBidXQgd3JhcCBpbiB0cnktY2F0Y2ggdG8gaGFuZGxlXG4gICAgICAvLyByYWNlIGNvbmRpdGlvbnMgd2l0aCBmZWF0dXJlIGluZm8gd2luZG93cyB0aGF0IG1pZ2h0IGJlIHJlbmRlcmluZ1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2xlYXJSZXN1bHQoJ3F1ZXJ5LWl0ZW0tc3dpdGNoLW5ldy1tb2RlJylcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIExvZyBmb3IgZGVidWdnaW5nIGJ1dCBkb24ndCBzaG93IHRvIHVzZXIgKGZyYW1ld29yayByYWNlIGNvbmRpdGlvbilcbiAgICAgICAgLy8gVGhlIGVycm9yIGlzIGluIGZyYW1ld29yayBjb2RlIChmZWF0dXJlLWluZm8udHN4KSwgbm90IG91ciBjb2RlXG4gICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiBmZWF0dXJlLWluZm8udHN4IGlzIHRyeWluZyB0byBhcHBlbmRDaGlsZCB0byBhIERPTSBlbGVtZW50XG4gICAgICAgIC8vIHRoYXQgZ2V0cyByZW1vdmVkIHdoZW4gd2UgY2xlYXIgc2VsZWN0aW9uXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ2NsZWFyLXJlc3VsdC1yYWNlLWNvbmRpdGlvbicsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBub3RlOiAnTGlrZWx5IHJhY2UgY29uZGl0aW9uIHdpdGggZmVhdHVyZS1pbmZvLnRzeCdcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBjbGVhcmluZyByZXN1bHRzIChsaWtlbHkgcmFjZSBjb25kaXRpb24gd2l0aCBmZWF0dXJlIGluZm8pOicsIGVycm9yKVxuICAgICAgICB9XG4gICAgICAgIC8vIERvbid0IHNldCBlcnJvciBzdGF0ZSAtIHRoaXMgaXMgZXhwZWN0ZWQgaW4gc29tZSBzY2VuYXJpb3NcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzU3dpdGNoaW5nUXVlcmllcykge1xuICAgICAgLy8gU3RvcmUgdGhlIG9sZCBjb25maWdJZCBCRUZPUkUgdXBkYXRpbmcgdGhlIHJlZlxuICAgICAgY29uc3Qgb2xkQ29uZmlnSWQgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnRcbiAgICAgIFxuICAgICAgLy8gRElBR05PU1RJQyBMT0dHSU5HOiBGdWxsIHN0YXRlIEJFRk9SRSBzeW5jXG4gICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICBpZiAob3V0cHV0RFMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgYWN0dWFsbHlTZWxlY3RlZFJlY29yZHNCZWZvcmVTeW5jID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgICAgIGNvbnN0IGFjY3VtdWxhdGVkSWRzID0gYWNjdW11bGF0ZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICBjb25zdCBhY3R1YWxseVNlbGVjdGVkSWRzQmVmb3JlU3luYyA9IGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzQmVmb3JlU3luYy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgICAgY29uc3QgZ3JhcGhpY3NMYXllcklkcyA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5tYXAoZyA9PiBnLmF0dHJpYnV0ZXM/Lk9CSkVDVElEIHx8IGcuYXR0cmlidXRlcz8uaWQgfHwgZy5hdHRyaWJ1dGVzPy5GSUQpIHx8IFtdXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1iZWZvcmUtc3luYy1mdWxsLXN0YXRlJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIG9sZENvbmZpZ0lkLFxuICAgICAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgYWNjdW11bGF0ZWRJZHM6IGFjY3VtdWxhdGVkSWRzLFxuICAgICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZENvdW50OiBhY3R1YWxseVNlbGVjdGVkUmVjb3Jkc0JlZm9yZVN5bmMubGVuZ3RoLFxuICAgICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZElkczogYWN0dWFsbHlTZWxlY3RlZElkc0JlZm9yZVN5bmMsXG4gICAgICAgICAgICBncmFwaGljc0xheWVyQ291bnQ6IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXJJZHM6IGdyYXBoaWNzTGF5ZXJJZHMsXG4gICAgICAgICAgICByZWNvcmRzT3V0T2ZTeW5jOiBhY2N1bXVsYXRlZElkcy5sZW5ndGggIT09IGFjdHVhbGx5U2VsZWN0ZWRJZHNCZWZvcmVTeW5jLmxlbmd0aCxcbiAgICAgICAgICAgIGlkc01hdGNoOiBKU09OLnN0cmluZ2lmeShhY2N1bXVsYXRlZElkcy5zb3J0KCkpID09PSBKU09OLnN0cmluZ2lmeShhY3R1YWxseVNlbGVjdGVkSWRzQmVmb3JlU3luYy5zb3J0KCkpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGSVggKHIwMTguNzApOiBPbmx5IHN5bmMgYWNjdW11bGF0ZWRSZWNvcmRzIHdoZW4gdGhlcmUgYXJlIGFjdHVhbGx5IHNlbGVjdGVkIHJlY29yZHMgdGhhdCBhcmUgYSBzdWJzZXRcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgY2xlYXJpbmcgYWNjdW11bGF0ZWRSZWNvcmRzIHdoZW4gc3dpdGNoaW5nIHRvIGVtcHR5IGRhdGEgc291cmNlcyBkdXJpbmcgcXVlcnkgc3dpdGNoZXNcbiAgICAgIC8vIE9ubHkgc3luYyBpZiByZWNvcmRzIHdlcmUgbWFudWFsbHkgcmVtb3ZlZCAoYWN0dWFsbHlTZWxlY3RlZCA8IGFjY3VtdWxhdGVkKSwgbm90IGR1cmluZyBlbXB0eSBEUyBzd2l0Y2hlc1xuICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgICAgaWYgKG91dHB1dERTICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCAmJiBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgIGNvbnN0IGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPiAwICYmIGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA8IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEJ1aWxkIGEgU2V0IG9mIGFjdHVhbGx5IHNlbGVjdGVkIElEcyBmb3IgZmFzdCBsb29rdXBcbiAgICAgICAgICAgIGNvbnN0IGFjdHVhbGx5U2VsZWN0ZWRJZHNTZXQgPSBuZXcgU2V0KGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSkpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpbHRlciBhY2N1bXVsYXRlZFJlY29yZHMgdG8gb25seSBpbmNsdWRlIHJlY29yZHMgdGhhdCBhcmUgYWN0dWFsbHkgc2VsZWN0ZWRcbiAgICAgICAgICAgIGNvbnN0IHN5bmNlZFJlY29yZHMgPSBhY2N1bXVsYXRlZFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiBcbiAgICAgICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZElkc1NldC5oYXMocmVjb3JkLmdldElkKCkpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGFjY3VtdWxhdGVkSWRzID0gYWNjdW11bGF0ZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgIGNvbnN0IGFjdHVhbGx5U2VsZWN0ZWRJZHMgPSBhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgICAgICBjb25zdCBzeW5jZWRJZHMgPSBzeW5jZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZWRJZHMgPSBhY2N1bXVsYXRlZElkcy5maWx0ZXIoaWQgPT4gIXN5bmNlZElkcy5pbmNsdWRlcyhpZCkpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3N5bmNpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1iZWZvcmUtcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBvbGRDb25maWdJZCxcbiAgICAgICAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRCZWZvcmU6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkSWRzQmVmb3JlOiBhY2N1bXVsYXRlZElkcyxcbiAgICAgICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZENvdW50OiBhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIGFjdHVhbGx5U2VsZWN0ZWRJZHM6IGFjdHVhbGx5U2VsZWN0ZWRJZHMsXG4gICAgICAgICAgICAgIHN5bmNlZFJlY29yZHNDb3VudDogc3luY2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHN5bmNlZElkczogc3luY2VkSWRzLFxuICAgICAgICAgICAgICByZWNvcmRzUmVtb3ZlZDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCAtIHN5bmNlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICByZW1vdmVkSWRzOiByZW1vdmVkSWRzLFxuICAgICAgICAgICAgICBub3RlOiAnaW1tZWRpYXRlLXN5bmMtYmVmb3JlLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIGFjY3VtdWxhdGVkUmVjb3JkcyB0byBtYXRjaCByZWFsaXR5IChpbW1lZGlhdGUgc3luYywgbm90IGxhenkpXG4gICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShzeW5jZWRSZWNvcmRzKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBESUFHTk9TVElDIExPR0dJTkc6IEZ1bGwgc3RhdGUgQUZURVIgc3luY1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncXVlcnktc3dpdGNoLWFmdGVyLXN5bmMtZnVsbC1zdGF0ZScsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QWZ0ZXI6IHN5bmNlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZElkc0FmdGVyOiBzeW5jZWRJZHMsXG4gICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudDogYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkSWRzOiBhY3R1YWxseVNlbGVjdGVkSWRzLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FjY3VtdWxhdGVkLXJlY29yZHMtYWxyZWFkeS1pbi1zeW5jLWJlZm9yZS1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIG9sZENvbmZpZ0lkLFxuICAgICAgICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwcmVzZXJ2aW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtb24tcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHJlZiBBRlRFUiBzeW5jaW5nXG4gICAgICBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0uY29uZmlnSWQsIGNsZWFyUmVzdWx0LCByZXN1bHRDb3VudCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcHJvcHMud2lkZ2V0SWQsIG91dHB1dERTLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZV0pXG5cbiAgY29uc3QgbmF2VG9Gb3JtID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKGNsZWFyUmVzdWx0cyA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKGNsZWFyUmVzdWx0cykge1xuICAgICAgLy8gVXNlIHRoZSBjZW50cmFsaXplZCBjbGVhclJlc3VsdCBtZXRob2QgaW5zdGVhZCBvZiBkdXBsaWNhdGluZyBsb2dpY1xuICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ25hdlRvRm9ybS1jbGVhclJlc3VsdHMnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIC8vIFN3aXRjaCB0byBxdWVyeSB0YWIgYnV0IGRvbid0IGNsZWFyIHJlc3VsdHMgdW5sZXNzIGV4cGxpY2l0bHkgcmVxdWVzdGVkXG4gICAgLy8gTWFyayBhcyBtYW51YWwgc3dpdGNoIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICAvLyBSZXNldCB0aGUgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgfSwgMTAwKVxuICAgIC8vIE9ubHkgY2hhbmdlIHN0YWdlIGlmIHdlJ3JlIGNsZWFyaW5nIHJlc3VsdHNcbiAgICAvLyBPdGhlcndpc2UsIGtlZXAgc3RhZ2UgYXQgMSAocmVzdWx0cyBhdmFpbGFibGUpIHNvIHJlc3VsdHMgcGVyc2lzdFxuICAgIGlmICghY2xlYXJSZXN1bHRzICYmIHJlc3VsdENvdW50ID4gMCkge1xuICAgICAgc2V0U3RhZ2UoMSkgLy8gS2VlcCByZXN1bHRzIGF2YWlsYWJsZVxuICAgIH1cbiAgICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xuICAgICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICAgIH0pXG4gIH0sIFtjbGVhclJlc3VsdCwgcmVzdWx0Q291bnRdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRhYiBzd2l0Y2hpbmcgYmV0d2VlbiBRdWVyeSBhbmQgUmVzdWx0cyB0YWJzLlxuICAgKiBUYWIgc3dpdGNoaW5nIHByZXNlcnZlcyByZXN1bHRzIHN0YXRlIC0gcmVzdWx0cyByZW1haW4gdmlzaWJsZSBhbmQgc2VsZWN0ZWRcbiAgICogd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiB0YWJzLiBSZXN1bHRzIGFyZSBvbmx5IGNsZWFyZWQgd2hlbiBleHBsaWNpdGx5XG4gICAqIGNsaWNraW5nIHRoZSB0cmFzaCBjYW4gYnV0dG9uIG9yIHdoZW4gc3RhcnRpbmcgYSBuZXcgcXVlcnkuXG4gICAqIFxuICAgKiBAcGFyYW0gdGFiIC0gVGhlIHRhYiB0byBzd2l0Y2ggdG8gKCdxdWVyeScgfCAncmVzdWx0cycpXG4gICAqIEBwYXJhbSBldmVudCAtIE9wdGlvbmFsIG1vdXNlIGV2ZW50IHRvIHByZXZlbnQgZGVmYXVsdCBiZWhhdmlvclxuICAgKi9cbiAgY29uc3QgaGFuZGxlVGFiQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJywgZXZlbnQ/OiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICd0YWItY2hhbmdlJyxcbiAgICAgIHRhYixcbiAgICAgIGN1cnJlbnRUYWI6IGFjdGl2ZVRhYixcbiAgICAgIHJlc3VsdENvdW50LFxuICAgICAgZXZlbnRUeXBlOiBldmVudD8udHlwZVxuICAgIH0pXG4gICAgXG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIH1cbiAgICAvLyBEb24ndCBhbGxvdyBzd2l0Y2hpbmcgdG8gcmVzdWx0cyBpZiB0aGVyZSBhcmUgbm8gcmVzdWx0c1xuICAgIGlmICh0YWIgPT09ICdyZXN1bHRzJyAmJiByZXN1bHRDb3VudCA9PT0gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ3RhYi1jaGFuZ2UtYmxvY2tlZCcsXG4gICAgICAgIHJlYXNvbjogJ25vLXJlc3VsdHMnLFxuICAgICAgICB0YWIsXG4gICAgICAgIHJlc3VsdENvdW50XG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIE1hcmsgdGhpcyBhcyBhIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgIHNldEFjdGl2ZVRhYih0YWIpXG4gICAgXG4gICAgLy8gUmVzZXQgdGhlIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheSB0byBhbGxvdyB0aGUgc3RhdGUgdXBkYXRlIHRvIGNvbXBsZXRlXG4gICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW1tZWRpYXRlbHkgc3dpdGNoaW5nIGJhY2tcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICB9LCAxMDApXG4gICAgXG4gICAgLy8gRG9uJ3QgY2hhbmdlIHN0YWdlIGhlcmUgLSBqdXN0IHN3aXRjaCB0aGUgdmlld1xuICAgIC8vIFN0YWdlIHNob3VsZCByZW1haW4gYXQgMSAocmVzdWx0cyBhdmFpbGFibGUpIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gdGFic1xuICB9LCBbcmVzdWx0Q291bnQsIGFjdGl2ZVRhYl0pXG5cbiAgLyoqXG4gICAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGhhbmRsZUZvcm1TdWJtaXQgKHdpdGhvdXQgd2FpdGluZyBsb2dpYylcbiAgICogVGhpcyBpcyBjYWxsZWQgZWl0aGVyIGRpcmVjdGx5IG9yIGFmdGVyIGhhc2ggdmFsdWUgY29udmVyc2lvblxuICAgKiBcbiAgICogQHBhcmFtIHNxbEV4cHIgLSBUaGUgU1FMIGV4cHJlc3Npb24gZm9yIGF0dHJpYnV0ZSBmaWx0ZXJpbmdcbiAgICogQHBhcmFtIHNwYXRpYWxGaWx0ZXIgLSBUaGUgc3BhdGlhbCBmaWx0ZXIgb2JqZWN0XG4gICAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIG92ZXJyaWRlIGZvciB6b29tLXRvLXNlbGVjdGVkIGJlaGF2aW9yXG4gICAqL1xuICBjb25zdCBoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWwgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uLCBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB7XG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzIHdoZW4gc3RhcnRpbmcgYSBuZXcgcXVlcnlcbiAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKVxuICAgIHNldFpvb21FcnJvcihudWxsKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdEludGVybmFsLWV4ZWN1dGluZycsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBTdG9yZSB0aGUgcnVudGltZSB6b29tIG92ZXJyaWRlIGZvciB1c2UgYnkgQWRkIHRvIE1hcCBhY3Rpb25cbiAgICBsYXN0UnVudGltZVpvb21Ub1NlbGVjdGVkUmVmLmN1cnJlbnQgPSBydW50aW1lWm9vbVRvU2VsZWN0ZWRcbiAgICBcbiAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLmN1cnJlbnQgPSBzcWxFeHByXG4gICAgc3BhdGlhbEZpbHRlck9iai5jdXJyZW50ID0gc3BhdGlhbEZpbHRlclxuICAgIC8vIExvYWQgdGhlIGZpcnN0IHBhZ2VcbiAgICBjb25zdCBmZWF0dXJlRFMgPSBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgdXNlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgLy8gVGhlc2UgcGVyc2lzdCBhY3Jvc3MgcXVlcnkgc3dpdGNoZXMsIHVubGlrZSBxdWVyeS1pdGVtLWxldmVsIHJlY29yZHNcbiAgICBsZXQgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2U6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAvLyBSb2J1c3QgY2FwdHVyZSBzdHJhdGVneTpcbiAgICAgIC8vIDEuIFRyeSByZWNvcmRzIGZyb20gcHJvcHMgKGFscmVhZHkgbWVyZ2VkIGJ5IHBhcmVudClcbiAgICAgIC8vIDIuIEZhbGxiYWNrIHRvIGN1cnJlbnRseSBzZWxlY3RlZCByZWNvcmRzIGluIERTIChjYXB0dXJlZCBkdXJpbmcgbW9kZSBzd2l0Y2gpXG4gICAgICBjb25zdCBmcm9tUHJvcCA9IGFjY3VtdWxhdGVkUmVjb3JkcyB8fCBbXVxuICAgICAgY29uc3QgZnJvbURTID0gb3V0cHV0RFM/LmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW11cbiAgICAgIFxuICAgICAgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UgPSBmcm9tUHJvcC5sZW5ndGggPiAwID8gZnJvbVByb3AgOiBmcm9tRFNcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2FwdHVyZWQtZXhpc3RpbmctcmVjb3Jkcy1kaWFnbm9zdGljJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgZnJvbVByb3BDb3VudDogZnJvbVByb3AubGVuZ3RoLFxuICAgICAgICBmcm9tRFNDb3VudDogZnJvbURTLmxlbmd0aCxcbiAgICAgICAgZmluYWxDYXB0dXJlZENvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgIGZpcnN0UmVjb3JkSWQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlWzBdPy5nZXRJZD8uKCkgfHwgJ25vbmUnLFxuICAgICAgICBhbGxSZWNvcmRJZHM6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLm1hcChyID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCAxMCksXG4gICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIGNsZWFyIG9sZCByZXN1bHRzIGFuZCBncmFwaGljcyBsYXllclxuICAgIC8vIFdlIGNhbGwgY2xlYXJSZXN1bHQoKSBkaXJlY3RseSBhbmQgQVdBSVQgaXQgdG8gZW5zdXJlIGl0J3MgZmluaXNoZWQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbiBzdGFydHNcbiAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1jbGVhcmluZy1yZXN1bHRzLWZvci1uZXctbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2hhbmRsZUZvcm1TdWJtaXQtbmV3LW1vZGUnKVxuICAgIH1cbiAgICBcbiAgICAvLyBTZXQgbG9hZGluZyBzdGFnZVxuICAgIHNldFN0YWdlKDIpXG4gICAgXG4gICAgLy8gRk9SQ0VEOiBBbHdheXMgdXNlIFNpbXBsZUxpc3QgLSBmZXRjaCBBTEwgcmVjb3Jkcywgbm90IGp1c3QgYSBwYWdlXG4gICAgLy8gVXNlIGRhdGEgc291cmNlJ3MgbWF4IHJlY29yZCBjb3VudCwgb3IgZmFsbCBiYWNrIHRvIGEgbGFyZ2UgbnVtYmVyICgxMDAwMClcbiAgICBjb25zdCBtYXhSZWNvcmRDb3VudCA9IChmZWF0dXJlRFMgYXMgYW55KS5nZXRNYXhSZWNvcmRDb3VudD8uKCkgPz8gMTAwMDBcbiAgICBsZXQgcGFnZVNpemUgPSBtYXhSZWNvcmRDb3VudFxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gZ2VuZXJhdGVRdWVyeVBhcmFtcyhmZWF0dXJlRFMsIHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIGN1cnJlbnRJdGVtLCAxLCBwYWdlU2l6ZSlcbiAgICBxdWVyeVBhcmFtUmVmLmN1cnJlbnQgPSBxdWVyeVBhcmFtc1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1leGVjdXRpbmctcXVlcnknLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgd2hlcmU6IHF1ZXJ5UGFyYW1zLndoZXJlLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIC8vIENoYW5nZSBvdXRwdXQgZHMgc3RhdHVzIHRvIHVubG9hZGVkIGJlZm9yZSB1c2UgaXQgdG8gbG9hZCBjb3VudC9yZWNvcmRzLlxuICAgIGZlYXR1cmVEUy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5VbmxvYWRlZClcbiAgICBmZWF0dXJlRFMuc2V0Q291bnRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5VbmxvYWRlZClcbiAgICBsZXQgcXVlcnlSZXN1bHRDb3VudCA9IDAgLy8gQ2FwdHVyZSBjb3VudCBmcm9tIHJlY29yZHMgdG8gdXNlIGluIGZpbmFsbHkgYmxvY2tcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAncGVyZi1xdWVyeS1jaGFpbi1zdGFydCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHdoZXJlOiBxdWVyeVBhcmFtcy53aGVyZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBQRVJGT1JNQU5DRSBPUFRJTUlaQVRJT046IFJlbW92ZWQgcmVkdW5kYW50IGV4ZWN1dGVDb3VudFF1ZXJ5KCkgcm91bmQtdHJpcC5cbiAgICAvLyBTaW5jZSB3ZSBmZXRjaCBBTEwgcmVjb3JkcyAocGFnZVNpemUgPSBtYXhSZWNvcmRDb3VudCksIHdlIGNhbiBqdXN0IHVzZSByZWNvcmRzLmxlbmd0aC5cbiAgICBmZWF0dXJlRFMudXBkYXRlUXVlcnlQYXJhbXMocXVlcnlQYXJhbVJlZi5jdXJyZW50LCBwcm9wcy53aWRnZXRJZClcbiAgICBcbiAgICBjb25zdCBmZXRjaFN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgZXhlY3V0ZVF1ZXJ5KHByb3BzLndpZGdldElkLCBxdWVyeUl0ZW0sIGZlYXR1cmVEUywgcXVlcnlQYXJhbVJlZi5jdXJyZW50KVxuICAgICAgLnRoZW4oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaER1cmF0aW9uTXMgPSBNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpIC0gZmV0Y2hTdGFydFRpbWUpXG4gICAgICAgIGNvbnN0IHByb2Nlc3NpbmdTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgICBcbiAgICAgICAgcXVlcnlSZXN1bHRDb3VudCA9IHJlc3VsdC5yZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdxdWVyeS1leGVjdXRpb24tY29tcGxldGUnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICByZWNvcmRzUmV0dXJuZWQ6IHF1ZXJ5UmVzdWx0Q291bnQsXG4gICAgICAgICAgZmV0Y2hEdXJhdGlvbk1zLFxuICAgICAgICAgIGV4aXN0aW5nQ2FwdHVyZWRDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuXG4gICAgICAgIGxldCByZWNvcmRzVG9EaXNwbGF5ID0gcmVzdWx0LnJlY29yZHMgfHwgW11cbiAgICAgICAgbGV0IGRzVG9Vc2UgPSBvdXRwdXREU1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIFwiQWRkIHRvXCIgbW9kZTogbWVyZ2UgbmV3IHJlc3VsdHMgd2l0aCB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gJiYgcmVzdWx0LnJlY29yZHMgJiYgcmVzdWx0LnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdhZGQtbW9kZS1zdGFydGluZy1tZXJnZS1kaWFnbm9zdGljJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBleGlzdGluZ0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgIGV4aXN0aW5nSWRzOiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5tYXAociA9PiByLmdldElkPy4oKSkuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICAgIG5ld0NvdW50OiByZXN1bHQucmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIG5ld0lkczogcmVzdWx0LnJlY29yZHMubWFwKChyOiBhbnkpID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gTWVyZ2UgbmV3IHF1ZXJ5IHJlc3VsdHMgd2l0aCB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgY29uc3QgbWVyZ2VkUmVjb3JkcyA9IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZChcbiAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgLy8gVXNlIG91dHB1dERTIGZvciBrZXkgZ2VuZXJhdGlvblxuICAgICAgICAgICAgICByZXN1bHQucmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICBleGlzdGluZ1JlY29yZHNGb3JNZXJnZSAvLyBVc2UgY29uc2lzdGVudGx5IGNhcHR1cmVkIHJlY29yZHNcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IG1lcmdlZFJlY29yZHNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRElBR05PU1RJQyBMT0dHSU5HOiBSZWNvcmRzIGJlaW5nIGFkZGVkIHRvIGFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJZHMgPSBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgICAgICBjb25zdCBuZXdSZWNvcmRJZHMgPSByZXN1bHQucmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgICAgICBjb25zdCBtZXJnZWRJZHMgPSBtZXJnZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgIGNvbnN0IGFkZGVkSWRzID0gbWVyZ2VkSWRzLmZpbHRlcihpZCA9PiAhZXhpc3RpbmdJZHMuaW5jbHVkZXMoaWQpKVxuICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlSWRzID0gbmV3UmVjb3JkSWRzLmZpbHRlcihpZCA9PiBleGlzdGluZ0lkcy5pbmNsdWRlcyhpZCkpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FkZC1tb2RlLW1lcmdlLWNvbXBsZXRlLWRpYWdub3N0aWMnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGV4aXN0aW5nQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdJZHM6IGV4aXN0aW5nSWRzLFxuICAgICAgICAgICAgICBuZXdSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbmV3UmVjb3JkSWRzOiBuZXdSZWNvcmRJZHMsXG4gICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIG1lcmdlZElkczogbWVyZ2VkSWRzLFxuICAgICAgICAgICAgICBhZGRlZElkczogYWRkZWRJZHMsXG4gICAgICAgICAgICAgIGR1cGxpY2F0ZUlkczogZHVwbGljYXRlSWRzLFxuICAgICAgICAgICAgICBkdXBsaWNhdGVzRmlsdGVyZWQ6IGR1cGxpY2F0ZUlkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzIHNvIHRoZXkgcGVyc2lzdCBhY3Jvc3MgcXVlcnkgc3dpdGNoZXNcbiAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShtZXJnZWRSZWNvcmRzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdhZGQtbW9kZS1lcnJvcicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gbm9ybWFsIGJlaGF2aW9yIG9uIGVycm9yXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVzdWx0LnJlY29yZHNcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICAgIC8vIEhhbmRsZSBcIlJlbW92ZSBmcm9tXCIgbW9kZTogcmVtb3ZlIG1hdGNoaW5nIHJlY29yZHMgZnJvbSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1zdGFydGluZy1tZXJnZScsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICByZW1vdmVDb3VudDogcmVzdWx0LnJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIHRvIHJlbW92ZSBmcm9tXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIHF1ZXJ5UmVjb3Jkc0NvdW50OiByZXN1bHQucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgbm90ZTogJ05vIGFjY3VtdWxhdGVkIHJlY29yZHMgdG8gcmVtb3ZlIGZyb20gLSBuby1vcCdcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLy8gTm8gYWNjdW11bGF0ZWQgcmVjb3Jkcywgc28gbm90aGluZyB0byByZW1vdmUgLSBzaG93IGVtcHR5IHJlc3VsdHNcbiAgICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IFtdXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5yZWNvcmRzICYmIHJlc3VsdC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIG1hdGNoaW5nIHJlY29yZHMgZnJvbSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1JlY29yZHMgPSByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIC8vIFVzZSBvdXRwdXREUyBmb3Iga2V5IGdlbmVyYXRpb25cbiAgICAgICAgICAgICAgICByZXN1bHQucmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlIC8vIFVzZSBjb25zaXN0ZW50bHkgY2FwdHVyZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVtYWluaW5nUmVjb3Jkc1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gVXBkYXRlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHJlbWFpbmluZ1JlY29yZHMpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFJlbW92ZSByZWNvcmRzIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMgKG1hcCBoaWdobGlnaHRpbmcpXG4gICAgICAgICAgICAgIC8vIEFsc28gcmVtb3ZlcyBncmFwaGljcyBmcm9tIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZ1xuICAgICAgICAgICAgICByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMoXG4gICAgICAgICAgICAgICAgcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgcmVzdWx0LnJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllclxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWNvbXBsZXRlJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHF1ZXJ5UmVjb3Jkc0NvdW50OiByZXN1bHQucmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICByZWNvcmRzUmVtb3ZlZDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoIC0gcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgICAgICAgICAgd2lkZ2V0TGV2ZWxSZWNvcmRzVXBkYXRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvcmlnaW5TZWxlY3Rpb25zVXBkYXRlZDogdHJ1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gSWYgYWxsIHJlY29yZHMgcmVtb3ZlZCwgYXV0by1jbGVhciAoY29uc2lzdGVudCB3aXRoIHVzZXIgZXhwZWN0YXRpb24pXG4gICAgICAgICAgICAgIGlmIChyZW1haW5pbmdSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1hbGwtcmVjb3Jkcy1yZW1vdmVkJyxcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIG5vdGU6ICdBbGwgYWNjdW11bGF0ZWQgcmVjb3JkcyByZW1vdmVkIC0gYXV0by1jbGVhcmluZydcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC8vIENsZWFyIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShbXSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFF1ZXJ5IHJldHVybmVkIG5vIHJlc3VsdHMgLSBub3RoaW5nIHRvIHJlbW92ZVxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLW5vLXF1ZXJ5LXJlc3VsdHMnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgbm90ZTogJ1F1ZXJ5IHJldHVybmVkIG5vIHJlc3VsdHMgLSBubyByZWNvcmRzIHRvIHJlbW92ZSdcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLy8gS2VlcCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGRpc3BsYXllZFxuICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtZXJyb3InLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gRmFsbCBiYWNrIHRvIHNob3dpbmcgcXVlcnkgcmVzdWx0cyBvbiBlcnJvclxuICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IHJlc3VsdC5yZWNvcmRzIHx8IFtdXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIGNsZWFyIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShbXSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJlY29yZHNSZWYuY3VycmVudCA9IHJlY29yZHNUb0Rpc3BsYXlcbiAgICAgICAgLy8gUmVzZXQgc2VsZWN0aW9uIGZsYWcgZm9yIG5ldyBxdWVyeSByZXN1bHRzXG4gICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgXG4gICAgICAgIC8vIFNlbGVjdCByZWNvcmRzIGluIHRoZSBvdXRwdXQgRFNcbiAgICAgICAgLy8gRm9yIFwiQWRkIHRvXCIgbW9kZSwgc2VsZWN0IG1lcmdlZCByZWNvcmRzXG4gICAgICAgIC8vIEZvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSwgc2VsZWN0IHJlbWFpbmluZyByZWNvcmRzIChhbHJlYWR5IHVwZGF0ZWQgdmlhIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucylcbiAgICAgICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgc2VsZWN0IHF1ZXJ5IHJlc3VsdHNcbiAgICAgICAgaWYgKHJlY29yZHNUb0Rpc3BsYXkgJiYgcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGggPiAwICYmIGRzVG9Vc2UpIHtcbiAgICAgICAgICBjb25zdCByZWNvcmRJZHNUb1NlbGVjdCA9IHJlY29yZHNUb0Rpc3BsYXkubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUsIHNlbGVjdGlvbiB3YXMgYWxyZWFkeSB1cGRhdGVkIHZpYSByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnNcbiAgICAgICAgICAvLyBCdXQgd2Ugc3RpbGwgbmVlZCB0byBzZWxlY3QgaW4gdGhlIG91dHB1dERTIGZvciB3aWRnZXQgc3RhdGUgY29uc2lzdGVuY3lcbiAgICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICAgICAgLy8gU2VsZWN0aW9uIHdhcyBhbHJlYWR5IHVwZGF0ZWQgaW4gb3JpZ2luIERTcyB2aWEgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zXG4gICAgICAgICAgICAvLyBKdXN0IHVwZGF0ZSBvdXRwdXREUyBzZWxlY3Rpb24gZm9yIHdpZGdldCBzdGF0ZSBjb25zaXN0ZW5jeVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkc1RvVXNlLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGRzVG9Vc2Uuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkc1RvU2VsZWN0LCByZWNvcmRzVG9EaXNwbGF5IGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtb3V0cHV0LWRzLXNlbGVjdGlvbi11cGRhdGVkJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLW91dHB1dC1kcy1zZWxlY3Rpb24tZXJyb3InLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiTmV3XCIgbW9kZXMsIHNlbGVjdCByZWNvcmRzIG5vcm1hbGx5XG4gICAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgICAgICAgICAgcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICBkc1RvVXNlLFxuICAgICAgICAgICAgICAgICAgcmVjb3JkSWRzVG9TZWxlY3QsXG4gICAgICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5IGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyLFxuICAgICAgICAgICAgICAgICAgbWFwVmlld1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IHRydWUgLy8gTWFyayBhcyBzZWxlY3RlZFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIERpc3BhdGNoIGN1c3RvbSBzZWxlY3Rpb24gZXZlbnQgc28gV2lkZ2V0IHN0YXRlIGlzIHVwZGF0ZWQgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGNydWNpYWwgZm9yIGhhc2gtYmFzZWQgZXhlY3V0aW9uIHdoZXJlIFF1ZXJ5VGFzayBoYW5kbGVzIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQocHJvcHMud2lkZ2V0SWQsIHJlY29yZElkc1RvU2VsZWN0LCBkc1RvVXNlLCBxdWVyeUl0ZW0uY29uZmlnSWQsIGV2ZW50TWFuYWdlcilcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VsZWN0IHF1ZXJ5IHJlc3VsdHMnXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWZhaWxlZCcsXG4gICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZElkc1RvU2VsZWN0Lmxlbmd0aFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKClcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiAmJiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIC8vIEFsbCByZWNvcmRzIHJlbW92ZWQgLSBjbGVhciBzZWxlY3Rpb25cbiAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF3YWl0IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhwcm9wcy53aWRnZXRJZCwgZHNUb1VzZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcilcbiAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gTm90aWZ5IFdpZGdldCB0aGF0IHNlbGVjdGlvbiBpcyBjbGVhcmVkXG4gICAgICAgICAgICAgIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQocHJvcHMud2lkZ2V0SWQsIFtdLCBkc1RvVXNlLCBxdWVyeUl0ZW0uY29uZmlnSWQsIGV2ZW50TWFuYWdlcilcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtYWxsLXJlY29yZHMtcmVtb3ZlZC1zZWxlY3Rpb24tY2xlYXJlZCcsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWNsZWFyLXNlbGVjdGlvbi1lcnJvcicsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTWFyayB0aGF0IHF1ZXJ5IGp1c3QgZXhlY3V0ZWQgQkVGT1JFIHVwZGF0aW5nIHJlc3VsdENvdW50XG4gICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IHNlZXMgcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9PT0gdHJ1ZVxuICAgICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdxdWVyeS1leGVjdXRlZC1mbGFnLXNldCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheUNvdW50OiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aCxcbiAgICAgICAgICBxdWVyeVJlc3VsdENvdW50LFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIHJlc3VsdCBjb3VudCBGSVJTVCAoYmVmb3JlIGFueSBwYXJlbnQgY2FsbGJhY2tzIHRoYXQgbWlnaHQgY2F1c2UgcmUtcmVuZGVycylcbiAgICAgICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgdXNlIGFjY3VtdWxhdGVkL3JlbWFpbmluZyBjb3VudFxuICAgICAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCB1c2UgcXVlcnkgY291bnRcbiAgICAgICAgY29uc3QgbmV3UmVzdWx0Q291bnQgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICAgICAgPyByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aFxuICAgICAgICAgIDogcXVlcnlSZXN1bHRDb3VudFxuICAgICAgICBcbiAgICAgICAgc2V0UmVzdWx0Q291bnQobmV3UmVzdWx0Q291bnQpXG4gICAgICAgIFxuICAgICAgICAvLyBJTlNUQU5UIFVJIEZJWCAoVGhlIFwiU3Bpbm5lciBCeXBhc3NcIik6IFxuICAgICAgICAvLyBEZWNvdXBsZSB0aGUgXCJSZXRyaWV2aW5nIHJlc3VsdHMuLi5cIiBzcGlubmVyIGZyb20gYXN5bmNocm9ub3VzIGFjdGlvbnMgbGlrZSB6b29taW5nLiBcbiAgICAgICAgLy8gQnkgY2FsbGluZyBzZXRTdGFnZSgxKSBub3csIHRoZSB1c2VyIHNlZXMgdGhlIHJlc3VsdCBsaXN0IGltbWVkaWF0ZWx5IHdoaWxlIFxuICAgICAgICAvLyB0aGUgbWFwIGFuaW1hdGlvbiBjb250aW51ZXMgaW4gdGhlIGJhY2tncm91bmQuXG4gICAgICAgIHNldFN0YWdlKDEpIFxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAncGVyZi1wcm9jZXNzaW5nLWNvbXBsZXRlJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgcHJvY2Vzc2luZ0R1cmF0aW9uTXM6IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBwcm9jZXNzaW5nU3RhcnRUaW1lKSxcbiAgICAgICAgICB0b3RhbENoYWluRHVyYXRpb25NczogTWF0aC5yb3VuZChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSksXG4gICAgICAgICAgbmV3UmVzdWx0Q291bnQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gWm9vbSB0byByZWNvcmRzIHVzaW5nIHNoYXJlZCB6b29tIHV0aWxpdHkgKGNvbnNpc3RlbnQgcGFkZGluZyBiZWhhdmlvcilcbiAgICAgICAgLy8gVXNlIHJ1bnRpbWUgcHJlZmVyZW5jZSBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBjb25maWcgc2V0dGluZyAoZGVmYXVsdHMgdG8gdHJ1ZSlcbiAgICAgICAgY29uc3Qgc2hvdWxkWm9vbSA9IHJ1bnRpbWVab29tVG9TZWxlY3RlZCAhPT0gdW5kZWZpbmVkIFxuICAgICAgICAgID8gcnVudGltZVpvb21Ub1NlbGVjdGVkIFxuICAgICAgICAgIDogKHF1ZXJ5SXRlbS56b29tVG9TZWxlY3RlZCAhPT0gZmFsc2UpXG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgdGhlIG91dHB1dCBEUyBhbmQgbWVyZ2VkIHJlY29yZHNcbiAgICAgICAgY29uc3QgcmVjb3Jkc0Zvclpvb20gPSByZWNvcmRzVG9EaXNwbGF5IHx8IHJlc3VsdC5yZWNvcmRzXG4gICAgICAgIGNvbnN0IGRzRm9yWm9vbSA9IGRzVG9Vc2UgfHwgb3V0cHV0RFNcbiAgICAgICAgXG4gICAgICAgIGlmIChyZWNvcmRzRm9yWm9vbSAmJiByZWNvcmRzRm9yWm9vbS5sZW5ndGggPiAwICYmIGRzRm9yWm9vbSAmJiBzaG91bGRab29tKSB7XG4gICAgICAgICAgLy8gQlVHLUdSQVBISUNTLTAwMTogWm9vbSBvcGVyYXRpb25zIGZhaWwgd2hlbiBncmFwaGljcyBsYXllciBpcyBkaXNhYmxlZFxuICAgICAgICAgIGlmICghbWFwVmlldyAmJiAhdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdCVUcnLCB7XG4gICAgICAgICAgICAgIGJ1Z0lkOiAnQlVHLUdSQVBISUNTLTAwMScsXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiAnR1JBUEhJQ1MnLFxuICAgICAgICAgICAgICBldmVudDogJ3pvb20tb3BlcmF0aW9uLWZhaWxlZC1ncmFwaGljcy1sYXllci1kaXNhYmxlZCcsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgb3BlcmF0aW9uOiAncXVlcnktcmVzdWx0LXpvb20nLFxuICAgICAgICAgICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHNGb3Jab29tLmxlbmd0aCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdab29tIG9wZXJhdGlvbiBhdHRlbXB0ZWQgYnV0IG1hcFZpZXcgaXMgdW5hdmFpbGFibGUgYmVjYXVzZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGlzIGRpc2FibGVkJyxcbiAgICAgICAgICAgICAgd29ya2Fyb3VuZDogJ0VuYWJsZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGluIHdpZGdldCBzZXR0aW5ncycsXG4gICAgICAgICAgICAgIHRhcmdldFJlc29sdXRpb246ICdyMDE5LjAnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgem9vbVRvUmVjb3JkcyhyZWNvcmRzRm9yWm9vbSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gem9vbSB0byBmZWF0dXJlcydcbiAgICAgICAgICAgIHNldFpvb21FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1pPT00nLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnem9vbS1nb1RvLWVycm9yLXF1ZXJ5JyxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyB6b29tVG9SZWNvcmRzJywgZXJyb3IpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBOT1cgY2FsbCBvbkhhc2hQYXJhbWV0ZXJVc2VkIEFGVEVSIGFsbCBVSSB1cGRhdGVzIGFuZCB6b29tIG9wZXJhdGlvbnMgY29tcGxldGVcbiAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgcGFyZW50IHJlLXJlbmRlciBmcm9tIGludGVycnVwdGluZyB0aGUgcHJvbWlzZSBjaGFpblxuICAgICAgICAvLyBUaGlzIHByZXZlbnRzIGhhc2ggcGFyYW1ldGVycyBmcm9tIHJlLWV4ZWN1dGluZyB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gICAgICAgIGlmIChpbml0aWFsSW5wdXRWYWx1ZSAmJiBxdWVyeUl0ZW0uc2hvcnRJZCAmJiBvbkhhc2hQYXJhbWV0ZXJVc2VkKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgICAgICBldmVudDogJ3F1ZXJ5dGFzay1jYWxsaW5nLW9uaGFzaHBhcmFtZXRlcnVzZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHByb3BzLnF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IHF1ZXJ5SXRlbS5zaG9ydElkLFxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC1xdWVyeS1leGVjdXRlZC1ub3RpZnlpbmctcGFyZW50JyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBxdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkKHF1ZXJ5SXRlbS5zaG9ydElkKVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXRhc2stb25oYXNocGFyYW1ldGVydXNlZC1jYWxsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHByb3BzLnF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IHF1ZXJ5SXRlbS5zaG9ydElkLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGaXJlIGV2ZW50IHRvIG5vdGlmeSBIZWxwZXJTaW1wbGUgdGhhdCBoYXNoIHF1ZXJ5IGV4ZWN1dGlvbiBpcyBjb21wbGV0ZVxuICAgICAgICAgIC8vIFRoaXMgYWxsb3dzIEhlbHBlclNpbXBsZSB0byB0cmFjayB3aGljaCBoYXNoIHBhcmFtZXRlcnMgaGF2ZSBiZWVuIGV4ZWN1dGVkXG4gICAgICAgICAgLy8gdG8gcHJldmVudCByZS1leGVjdXRpb24gd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgICAgICAgIGNvbnN0IGhhc2hQYXJhbSA9IGAke3F1ZXJ5SXRlbS5zaG9ydElkfT0ke2luaXRpYWxJbnB1dFZhbHVlfWBcbiAgICAgICAgICBjb25zdCBleGVjdXRlZEV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX0hBU0hfUVVFUllfRVhFQ1VURURfRVZFTlQsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIHNob3J0SWQ6IHF1ZXJ5SXRlbS5zaG9ydElkLFxuICAgICAgICAgICAgICB2YWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgIGhhc2hQYXJhbVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChleGVjdXRlZEV2ZW50KVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXRhc2staGFzaC1xdWVyeS1leGVjdXRlZC1ldmVudC1kaXNwYXRjaGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBxdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgaGFzaFBhcmFtLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3F1ZXJ5LWNoYWluLWZhaWxlZC1kaWFnbm9zdGljJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHNldFN0YWdlKDEpIC8vIFJldHVybiB0byByZXN1bHRzIG9yIGZvcm0gc3RhZ2UgZXZlbiBvbiBlcnJvclxuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgaWYgKHNwYXRpYWxGaWx0ZXI/LmxheWVyICYmIHNwYXRpYWxGaWx0ZXI/LmNsZWFyQWZ0ZXJBcHBseSkge1xuICAgICAgICAgIHNwYXRpYWxGaWx0ZXIubGF5ZXIucmVtb3ZlQWxsKClcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXRTdGFnZSgxKSAvLyBSZW1vdmVkIGZyb20gaGVyZTsgbm93IGNhbGxlZCBpbiB0aGUgbWFpbiBjaGFpbiBiZWZvcmUgYmFja2dyb3VuZCBhY3Rpb25zXG4gICAgICB9KVxuICB9LCBbY3VycmVudEl0ZW0sIHF1ZXJ5SXRlbSwgcHJvcHMud2lkZ2V0SWQsIG91dHB1dERTLCBwdWJsaXNoRGF0YUNsZWFyZWRNc2csIGNsZWFyUmVzdWx0LCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgb25DbGVhckdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIHpvb21Ub1JlY29yZHNdKVxuXG4gIC8vIExpc3RlbiBmb3IgaGFzaCB2YWx1ZSBjb252ZXJzaW9uIGV2ZW50IGFuZCBleGVjdXRlIHBlbmRpbmcgcXVlcnlcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVIYXNoVmFsdWVDb252ZXJ0ZWQgPSAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXZlbnQtcmVjZWl2ZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGV2ZW50V2lkZ2V0SWQ6IGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQsXG4gICAgICAgIGV2ZW50Q29uZmlnSWQ6IGV2ZW50LmRldGFpbD8uY29uZmlnSWQsXG4gICAgICAgIG1hdGNoZXNXaWRnZXQ6IGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQgPT09IHByb3BzLndpZGdldElkLFxuICAgICAgICBoYXNQZW5kaW5nUXVlcnk6ICEhcGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIE9ubHkgcHJvY2VzcyBldmVudHMgZm9yIHRoaXMgd2lkZ2V0XG4gICAgICBpZiAoZXZlbnQuZGV0YWlsPy53aWRnZXRJZCAhPT0gcHJvcHMud2lkZ2V0SWQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXZlbnQtaWdub3JlZC13cm9uZy13aWRnZXQnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBldmVudFdpZGdldElkOiBldmVudC5kZXRhaWw/LndpZGdldElkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWNvbnZlcnRlZC1leGVjdXRpbmctcGVuZGluZy1xdWVyeScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIGNvbmZpZ0lkOiBldmVudC5kZXRhaWwuY29uZmlnSWQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU6IGV2ZW50LmRldGFpbC5pbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHsgc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgcnVudGltZVpvb21Ub1NlbGVjdGVkIH0gPSBwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnRcbiAgICAgICAgcGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgICBcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgcGVuZGluZyBxdWVyeSBub3cgdGhhdCB2YWx1ZSBpcyBjb252ZXJ0ZWRcbiAgICAgICAgLy8gVXNlIHNldFRpbWVvdXQgdG8gZW5zdXJlIHRoaXMgaGFwcGVucyBhZnRlciB0aGUgY3VycmVudCBldmVudCBsb29wXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbChzcWxFeHByLCBzcGF0aWFsRmlsdGVyLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXG4gICAgICAgIH0sIDApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDb252ZXJzaW9uIGhhcHBlbmVkIGJlZm9yZSBoYW5kbGVGb3JtU3VibWl0IHdhcyBjYWxsZWRcbiAgICAgICAgLy8gYXBwbHlRdWVyeSgpIGlzIGNhbGxlZCBkaXJlY3RseSBmcm9tIGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgaW4gcXVlcnktdGFzay1mb3JtLnRzeFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWNvbnZlcnRlZC1ldmVudC1yZWNlaXZlZC1uby1wZW5kaW5nLXF1ZXJ5JyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgY29uZmlnSWQ6IGV2ZW50LmRldGFpbD8uY29uZmlnSWQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU6IGV2ZW50LmRldGFpbD8uaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgbm90ZTogJ0NvbnZlcnNpb24gaGFwcGVuZWQgYmVmb3JlIGhhbmRsZUZvcm1TdWJtaXQgLSBhcHBseVF1ZXJ5KCkgY2FsbGVkIGRpcmVjdGx5IGZyb20gZm9ybSBjb21wb25lbnQnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5ULCBoYW5kbGVIYXNoVmFsdWVDb252ZXJ0ZWQgYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCwgaGFuZGxlSGFzaFZhbHVlQ29udmVydGVkIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgfVxuICB9LCBbcHJvcHMud2lkZ2V0SWQsIGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbF0pXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgZm9ybSBzdWJtaXNzaW9uIHdoZW4gdXNlciBjbGlja3MgXCJBcHBseVwiIGJ1dHRvbi5cbiAgICogQ2hlY2tzIGlmIGhhc2ggdmFsdWUgbmVlZHMgY29udmVyc2lvbiBhbmQgd2FpdHMgZm9yIGV2ZW50IGlmIG5lZWRlZC5cbiAgICogXG4gICAqIEBwYXJhbSBzcWxFeHByIC0gVGhlIFNRTCBleHByZXNzaW9uIGZvciBhdHRyaWJ1dGUgZmlsdGVyaW5nXG4gICAqIEBwYXJhbSBzcGF0aWFsRmlsdGVyIC0gVGhlIHNwYXRpYWwgZmlsdGVyIG9iamVjdFxuICAgKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSBvdmVycmlkZSBmb3Igem9vbS10by1zZWxlY3RlZCBiZWhhdmlvclxuICAgKi9cbiAgY29uc3QgaGFuZGxlRm9ybVN1Ym1pdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24sIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmosIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW4pID0+IHtcbiAgICAvLyBMT0cgQVQgVEhFIFZFUlkgU1RBUlQgLSBiZWZvcmUgYW55IGNoZWNrc1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgc3FsRXhwckV4aXN0czogISFzcWxFeHByLFxuICAgICAgZmlyc3RQYXJ0RXhpc3RzOiAhIXNxbEV4cHI/LnBhcnRzPy5bMF0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBoYXNoLXRyaWdnZXJlZCBxdWVyeSB3aXRoIHVuY29udmVydGVkIHZhbHVlIChzdHJpbmcgZm9ybWF0KVxuICAgIGNvbnN0IGZpcnN0UGFydCA9IHNxbEV4cHI/LnBhcnRzPy5bMF1cbiAgICBjb25zdCB2YWx1ZSA9IGZpcnN0UGFydD8udHlwZSA9PT0gJ1NJTkdMRScgPyAoZmlyc3RQYXJ0IGFzIGFueSkudmFsdWVPcHRpb25zPy52YWx1ZSA6IG51bGxcbiAgICBjb25zdCBpc1N0cmluZ1ZhbHVlID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5sZW5ndGggPiAwXG4gICAgY29uc3QgaXNBcnJheVZhbHVlID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID4gMFxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1jaGVja2luZy1jb252ZXJzaW9uJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgdmFsdWVUeXBlOiB0eXBlb2YgdmFsdWUsXG4gICAgICBpc1N0cmluZ1ZhbHVlLFxuICAgICAgaXNBcnJheVZhbHVlLFxuICAgICAgdmFsdWU6IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiB2YWx1ZSxcbiAgICAgIHdpbGxDaGVja1dhaXRDb25kaXRpb246IGlzU3RyaW5nVmFsdWUgJiYgIWlzQXJyYXlWYWx1ZSAmJiBpbml0aWFsSW5wdXRWYWx1ZSAmJiB2YWx1ZSA9PT0gaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIHZhbHVlIGlzIHN0cmluZyAobm90IGNvbnZlcnRlZCB0byBhcnJheSB5ZXQpLCB3YWl0IGZvciBjb252ZXJzaW9uIGV2ZW50XG4gICAgLy8gVGhpcyBoYXBwZW5zIHdoZW4gaGFzaCB2YWx1ZSBjaGFuZ2VzIGZvciBzYW1lIGNvbmZpZ0lkXG4gICAgaWYgKGlzU3RyaW5nVmFsdWUgJiYgIWlzQXJyYXlWYWx1ZSAmJiBpbml0aWFsSW5wdXRWYWx1ZSAmJiB2YWx1ZSA9PT0gaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LXdhaXRpbmctZm9yLWNvbnZlcnNpb24nLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGN1cnJlbnRWYWx1ZTogdmFsdWUsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFN0b3JlIHBlbmRpbmcgcXVlcnlcbiAgICAgIHBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudCA9IHtcbiAgICAgICAgc3FsRXhwcixcbiAgICAgICAgc3BhdGlhbEZpbHRlcixcbiAgICAgICAgcnVudGltZVpvb21Ub1NlbGVjdGVkXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNldCBhIHRpbWVvdXQgdG8gcHJldmVudCBpbmZpbml0ZSB3YWl0aW5nIChmYWxsYmFjayBhZnRlciAyIHNlY29uZHMpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudCkge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1jb252ZXJzaW9uLXRpbWVvdXQtZXhlY3V0aW5nLWFueXdheScsXG4gICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHsgc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgcnVudGltZVpvb21Ub1NlbGVjdGVkIH0gPSBwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnRcbiAgICAgICAgICBwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRXhlY3V0ZSBhbnl3YXkgKGZhbGxiYWNrKVxuICAgICAgICAgIGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbChzcWxFeHByLCBzcGF0aWFsRmlsdGVyLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXG4gICAgICAgIH1cbiAgICAgIH0sIDIwMDApXG4gICAgICBcbiAgICAgIHJldHVybiAvLyBFeGl0IGVhcmx5LCB3aWxsIGV4ZWN1dGUgd2hlbiBldmVudCBmaXJlc1xuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXQtZXhlY3V0aW5nLWltbWVkaWF0ZWx5JyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlYXNvbjogaXNTdHJpbmdWYWx1ZSA/ICdub3QtaGFzaC10cmlnZ2VyZWQnIDogKGlzQXJyYXlWYWx1ZSA/ICdhbHJlYWR5LWNvbnZlcnRlZCcgOiAnbm8tdmFsdWUnKSxcbiAgICAgIHZhbHVlVHlwZTogdHlwZW9mIHZhbHVlLFxuICAgICAgaXNTdHJpbmdWYWx1ZSxcbiAgICAgIGlzQXJyYXlWYWx1ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gVmFsdWUgaXMgYWxyZWFkeSBjb252ZXJ0ZWQgb3Igbm90IGhhc2gtdHJpZ2dlcmVkLCBleGVjdXRlIGltbWVkaWF0ZWx5XG4gICAgaGFuZGxlRm9ybVN1Ym1pdEludGVybmFsKHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIHJ1bnRpbWVab29tVG9TZWxlY3RlZClcbiAgfSwgW3Byb3BzLndpZGdldElkLCBpbml0aWFsSW5wdXRWYWx1ZSwgaGFuZGxlRm9ybVN1Ym1pdEludGVybmFsXSlcblxuICBjb25zdCB7IHVzZUF0dHJpYnV0ZUZpbHRlciwgc3FsRXhwck9iaiwgdXNlU3BhdGlhbEZpbHRlciwgc3BhdGlhbEZpbHRlclR5cGVzLCBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhLCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlc30gPSBjdXJyZW50SXRlbVxuICBjb25zdCBzaG93QXR0cmlidXRlRmlsdGVyID0gdXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHJPYmogIT0gbnVsbFxuICBjb25zdCBzaG93U3BhdGlhbEZpbHRlciA9IHNwYXRpYWxGaWx0ZXJFbmFibGVkICYmIHVzZVNwYXRpYWxGaWx0ZXIgJiYgKHNwYXRpYWxGaWx0ZXJUeXBlcy5sZW5ndGggPiAwIHx8IHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEgfHwgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDApXG5cbiAgLy8gREVURUNUIFNXSVRDSCBJTiBSRU5ERVJcbiAgY29uc3QgaXNTd2l0Y2hpbmdRdWVyaWVzID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ICE9PSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgY29uc3QgaXNWaXJ0dWFsQ2xlYXJBY3RpdmUgPSBpc1N3aXRjaGluZ1F1ZXJpZXMgJiYgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gIFxuICAvLyBVc2UgdGhlc2UgXCJlZmZlY3RpdmVcIiB2YWx1ZXMgZm9yIHRoZSBVSVxuICBjb25zdCBlZmZlY3RpdmVSZXN1bHRDb3VudCA9IGlzVmlydHVhbENsZWFyQWN0aXZlID8gMCA6IHJlc3VsdENvdW50XG4gIGNvbnN0IGVmZmVjdGl2ZVJlY29yZHMgPSBpc1ZpcnR1YWxDbGVhckFjdGl2ZSA/IFtdIDogKHJlY29yZHNSZWYuY3VycmVudCB8fCBbXSlcblxuICAvLyBDcmVhdGUgYSB1bmlxdWUga2V5IGZvciB0aGUgY3VycmVudCBxdWVyeSByZXN1bHQgc2V0IHRvIGhlbHAgRTJFIHRlc3RzIGRldGVjdCBmcmVzaCBkYXRhXG4gIGNvbnN0IHJlc3VsdFF1ZXJ5S2V5ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGAke3F1ZXJ5SXRlbS5jb25maWdJZH1fJHtEYXRlLm5vdygpfWBcbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZCwgcmVzdWx0Q291bnRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXRhc2sgaC0xMDAnLCBjbGFzc05hbWUsIHsgd3JhcHBlZDogd3JhcHBlZEluUG9wcGVyIH0pfSBcbiAgICAgIGRhdGEtcmVzdWx0LXF1ZXJ5LWtleT17cmVzdWx0UXVlcnlLZXl9XG4gICAgICBjc3M9e2Nzc2BcbiAgICAgICR7c3R5bGV9XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgYH0+XG4gICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCB1c2VEYXRhU291cmNlPXt1c2VPdXRwdXREc30gb25EYXRhU291cmNlQ3JlYXRlZD17aGFuZGxlT3V0cHV0RGF0YVNvdXJjZUNyZWF0ZWR9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZU91dHB1dERhdGFTb3VyY2VJbmZvQ2hhbmdlfS8+XG4gICAgICBcbiAgICAgIHsvKiBUYWIgTmF2aWdhdGlvbiAtIE1vdmVkIHRvIHRvcCAqL31cbiAgICAgIDxUYWJzXG4gICAgICAgIHZhbHVlPXthY3RpdmVUYWJ9XG4gICAgICAgIG9uQ2hhbmdlPXsoaWQpID0+IGhhbmRsZVRhYkNoYW5nZShpZCBhcyAncXVlcnknIHwgJ3Jlc3VsdHMnKX1cbiAgICAgICAgZmlsbD17dHJ1ZX1cbiAgICAgICAgdHlwZT0ndW5kZXJsaW5lJ1xuICAgICAgICBrZWVwTW91bnQ9e3RydWV9XG4gICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgYH1cbiAgICAgID5cbiAgICAgICAgPFRhYlxuICAgICAgICAgIGlkPSdxdWVyeSdcbiAgICAgICAgICB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ3F1ZXJ5VGFiJyl9XG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrX19jb250ZW50Jywge1xuICAgICAgICAgICAgICBbRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU106IGlzSW5Qb3BwZXIgJiYgYWN0aXZlVGFiID09PSAncXVlcnknXG4gICAgICAgICAgICB9KX0gXG4gICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIEhlYWRlciB3aXRoIGJhY2sgYnV0dG9uIGFuZCBxdWVyeSBsYWJlbCAtIFF1ZXJ5IHRhYiBvbmx5ICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LWZvcm1fX2hlYWRlciBteC00IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2luLXBvcHBlcic6IGlzSW5Qb3BwZXIgfSl9IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBwYWRkaW5nOiA2cHggMDtcbiAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDhweDtcbiAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCduYXYtYWN0aW9uIGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6IHdyYXBwZWRJblBvcHBlciB9KX0gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMSAxIDA7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgLmppbXUtYnRuIHtcbiAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMjZweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncC0wIG1yLTInLCB7ICdkLW5vbmUnOiB0b3RhbCA9PT0gMSB8fCAhb25OYXZCYWNrIH0pfVxuICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uTmF2QmFja31cbiAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdiYWNrJyl9XG4gICAgICAgICAgICAgICAgICByZWY9e2JhY2tCdG5SZWZ9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPEFycm93TGVmdE91dGxpbmVkIGF1dG9GbGlwLz5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8UXVlcnlUYXNrTGFiZWwgaWNvbj17aWNvbn0gbmFtZT17ZGlzcGxheUxhYmVsID8gbmFtZSA6ICcnfSAvPlxuICAgICAgICAgICAgICAgIHsvKiBIYXNoIHBhcmFtZXRlciBpbmZvIGJ1dHRvbiAtIHNob3dzIHF1ZXJpZXMgZnJvbSBzYW1lIGxheWVyIHdpdGggc2hvcnRJZHMgKi99XG4gICAgICAgICAgICAgICAgeygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5SXRlbXMgfHwgcXVlcnlJdGVtcy5sZW5ndGggPD0gMSkgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgcXVlcnkncyBvcmlnaW4gZGF0YSBzb3VyY2UgSURcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPcmlnaW5EU0lkID0gcXVlcnlJdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRPcmlnaW5EU0lkKSByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBGaW5kIGFsbCBxdWVyaWVzIGZyb20gdGhlIHNhbWUgb3JpZ2luIGRhdGEgc291cmNlIHRoYXQgaGF2ZSBzaG9ydElkc1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc2FtZUxheWVyUXVlcmllcyA9IHF1ZXJ5SXRlbXMuZmlsdGVyKGl0ZW0gPT4gXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkID09PSBjdXJyZW50T3JpZ2luRFNJZCAmJiBcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG9ydElkICYmIFxuICAgICAgICAgICAgICAgICAgICBpdGVtLnNob3J0SWQudHJpbSgpICE9PSAnJ1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgaW5mbyBidXR0b24gaWYgdGhlcmUgYXJlIHF1ZXJpZXMgd2l0aCBzaG9ydElkc1xuICAgICAgICAgICAgICAgICAgaWYgKHNhbWVMYXllclF1ZXJpZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBCdWlsZCB0b29sdGlwIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5TGluZXMgPSBzYW1lTGF5ZXJRdWVyaWVzLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXVlcnlOYW1lID0gZ2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7cXVlcnlOYW1lfTogIyR7aXRlbS5zaG9ydElkfT12YWx1ZSBvciA/JHtpdGVtLnNob3J0SWR9PXZhbHVlYFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgY29uc3QgdG9vbHRpcFRpdGxlID0gYFRoaXMgbGF5ZXIgY2FuIGJlIHNlYXJjaGVkIHVzaW5nIHRoZSBzaG9ydElkcyAke3NhbWVMYXllclF1ZXJpZXMubWFwKHEgPT4gcS5zaG9ydElkKS5qb2luKCcgYW5kICcpfSB1c2luZyAjc2hvcnRJZD12YWx1ZSBvciA/c2hvcnRJZD12YWx1ZSBpbiB0aGUgVVJMLlxcblxcbiR7cXVlcnlMaW5lcy5qb2luKCdcXG4nKX1gXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxUb29sdGlwIFxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tJyBcbiAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3Rvb2x0aXBUaXRsZX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPSdzbScgXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uIFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nSGFzaCBwYXJhbWV0ZXIgc2VhcmNoIGluZm9ybWF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0gcGxhY2VtZW50PSdib3R0b20nPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICByZWY9e2NsZWFyUmVzdWx0QnRuUmVmfVxuICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfVxuICAgICAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbWwtYXV0byBweS0wJ1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IGNsZWFyUmVzdWx0KCd1c2VyLXRyYXNoLWNsaWNrJykgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRyYXNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgey8qIFNlYXJjaCBMYXllciAvIEdyb3VwIGRyb3Bkb3ducyAtIHNob3cgYmFzZWQgb24gZ3JvdXBpbmcgKi99XG4gICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgLy8gT25seSBzaG93IGRyb3Bkb3ducyBpZiBtdWx0aXBsZSBxdWVyaWVzIGV4aXN0XG4gICAgICAgICAgICAgIGlmICghcXVlcnlJdGVtcyB8fCBxdWVyeUl0ZW1zLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQnVpbGQgZmxhdCBsaXN0IG9mIGFsbCBxdWVyaWVzIHdpdGggdGhlaXIgZGlzcGxheSBpbmZvXG4gICAgICAgICAgICAgIC8vIEZvciBncm91cGVkIHF1ZXJpZXMsIHVzZSBncm91cCBkaXNwbGF5IG5hbWUgKG9ubHkgc2hvdyBvbmNlIHBlciBncm91cClcbiAgICAgICAgICAgICAgY29uc3QgcXVlcnlPcHRpb25zOiBBcnJheTx7XG4gICAgICAgICAgICAgICAgY29uZmlnSWQ6IHN0cmluZ1xuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmdcbiAgICAgICAgICAgICAgICBncm91cElkOiBzdHJpbmcgfCBudWxsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlclxuICAgICAgICAgICAgICB9PiA9IFtdXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBUcmFjayB3aGljaCBncm91cHMgd2UndmUgYWxyZWFkeSBhZGRlZCB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgICAgICAgIGNvbnN0IGFkZGVkR3JvdXBzID0gbmV3IFNldDxzdHJpbmc+KClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbXMuZm9yRWFjaCgoaXRlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgICAgLy8gRm9yIGdyb3VwZWQgcXVlcmllcywgdXNlIGdyb3VwIGRpc3BsYXkgbmFtZSAob25seSBhZGQgb25jZSBwZXIgZ3JvdXApXG4gICAgICAgICAgICAgICAgICBpZiAoIWFkZGVkR3JvdXBzLmhhcyhpdGVtLmdyb3VwSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZGVkR3JvdXBzLmFkZChpdGVtLmdyb3VwSWQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwRGlzcGxheU5hbWUgPSBncm91cHM/LltpdGVtLmdyb3VwSWRdPy5kaXNwbGF5TmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cHM/LltpdGVtLmdyb3VwSWRdPy5pdGVtc1swXT8ubmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEdyb3VwICR7aXRlbS5ncm91cElkfWBcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBncm91cERpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSAtIHVzZSBpdGVtLm5hbWUgZm9yIGZpcnN0IGRyb3Bkb3duIChub3Qgc2VhcmNoQWxpYXMvamltdUZpZWxkTmFtZSlcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBpdGVtLm5hbWUgfHwgZ2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKSxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgY3VycmVudGx5IHNlbGVjdGVkIHF1ZXJ5XG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRRdWVyeUl0ZW0gPSBxdWVyeUl0ZW1cbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFF1ZXJ5R3JvdXBJZCA9IGN1cnJlbnRRdWVyeUl0ZW0uZ3JvdXBJZCB8fCBudWxsXG4gICAgICAgICAgICAgIGNvbnN0IGlzR3JvdXBlZFF1ZXJ5ID0gY3VycmVudFF1ZXJ5R3JvdXBJZCAhPT0gbnVsbFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRmluZCB0aGUgb3B0aW9uIGluZGV4IGZvciB0aGUgY3VycmVudCBxdWVyeVxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50T3B0aW9uSW5kZXggPSBxdWVyeU9wdGlvbnMuZmluZEluZGV4KG9wdCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzR3JvdXBlZFF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0Lmdyb3VwSWQgPT09IGN1cnJlbnRRdWVyeUdyb3VwSWRcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdC5jb25maWdJZCA9PT0gY3VycmVudFF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW5kZXJpbmctZHJvcGRvd25zJyxcbiAgICAgICAgICAgICAgICB0b3RhbFF1ZXJpZXM6IHF1ZXJ5SXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9uc0NvdW50OiBxdWVyeU9wdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWVyeUdyb3VwSWQsXG4gICAgICAgICAgICAgICAgaXNHcm91cGVkUXVlcnksXG4gICAgICAgICAgICAgICAgY3VycmVudE9wdGlvbkluZGV4LFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCxcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVlcnlDb25maWdJZDogY3VycmVudFF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICB7LyogRmlyc3QgRHJvcGRvd246IEFsbCBxdWVyaWVzICovfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdzZWFyY2hMYXllcicpfVxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IFxuICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRPcHRpb25JbmRleCA+PSAwID8gY3VycmVudE9wdGlvbkluZGV4IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17YXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IHF1ZXJ5T3B0aW9uc1tvcHRpb25JbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1vcHRpb24tc2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzR3JvdXBlZDogc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZCAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU1RBUlQgQ0xFQVJJTkcgSU1NRURJQVRFTFkgSUYgU1dJVENISU5HXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFyUmVzdWx0KCdkcm9wZG93bi1sYXllci1zd2l0Y2gtbmV3LW1vZGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHcm91cGVkIHF1ZXJ5IHNlbGVjdGVkIC0gc2V0IGdyb3VwIGFuZCBmaXJzdCBxdWVyeSBpbiBncm91cFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBDaGFuZ2Uoc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cFF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlKDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSBzZWxlY3RlZCAtIGNsZWFyIGdyb3VwIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBDaGFuZ2UobnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Vbmdyb3VwZWRDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSB1bmdyb3VwZWQgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmdyb3VwZWRJbmRleCA9IHVuZ3JvdXBlZD8uZmluZEluZGV4KCh7IGl0ZW0gfSkgPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbmZpZ0lkID09PSBzZWxlY3RlZE9wdGlvbi5jb25maWdJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgPz8gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5ncm91cGVkSW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Vbmdyb3VwZWRDaGFuZ2UodW5ncm91cGVkSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiB1c2UgdGhlIGluZGV4IGZyb20gcXVlcnlJdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICd1bmdyb3VwZWQtZmFsbGJhY2stdG8taW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbkluZGV4OiBzZWxlY3RlZE9wdGlvbi5pbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUXVlcnlDaGFuZ2Uoc2VsZWN0ZWRPcHRpb24uaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtxdWVyeU9wdGlvbnMubWFwKChvcHRpb24sIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW5kZXJpbmctcXVlcnktb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IG9wdGlvbi5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IG9wdGlvbi5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogb3B0aW9uLmdyb3VwSWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17b3B0aW9uLmNvbmZpZ0lkfSB2YWx1ZT17aWR4fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9uLmRpc3BsYXlOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgey8qIFNlY29uZCBEcm9wZG93bjogUXVlcmllcyB3aXRoaW4gc2VsZWN0ZWQgZ3JvdXAgKG9ubHkgaWYgZ3JvdXBlZCBxdWVyeSBzZWxlY3RlZCkgKi99XG4gICAgICAgICAgICAgICAgICB7aXNHcm91cGVkUXVlcnkgJiYgY3VycmVudFF1ZXJ5R3JvdXBJZCAmJiBncm91cHMgJiYgZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTZweDtcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIFNlYXJjaCBBbGlhc1xuICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggIT09IHVuZGVmaW5lZCA/IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXthc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJbmRleCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnZ3JvdXAtcXVlcnktc2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGN1cnJlbnRRdWVyeUdyb3VwSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBRdWVyeUluZGV4OiBuZXdJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zW25ld0luZGV4XT8uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlEaXNwbGF5TmFtZTogZ2V0UXVlcnlEaXNwbGF5TmFtZShncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0uaXRlbXNbbmV3SW5kZXhdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNUQVJUIENMRUFSSU5HIElNTUVESUFURUxZIElGIFNXSVRDSElOR1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2Ryb3Bkb3duLWFsaWFzLXN3aXRjaC1uZXctbW9kZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cFF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlKG5ld0luZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0uaXRlbXMubWFwKChpdGVtLCBpZHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2l0ZW0uY29uZmlnSWR9IHZhbHVlPXtpZHh9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRRdWVyeURpc3BsYXlOYW1lKGl0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIFJlc3VsdHMgTW9kZSBCdXR0b24gR3JvdXAgLSBBbHdheXMgc2hvdywgcmVnYXJkbGVzcyBvZiBxdWVyeSBjb3VudCAqL31cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBnYXA6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgey8qIFJlc3VsdHMgbGFiZWwgYW5kIGluZm8gYnV0dG9uICovfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGl0bGUyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfTpcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeScgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpfSBjc3M9e2Nzc2BmbGV4LXNocmluazogMDtgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICB7LyogTW9kZSBidXR0b25zICovfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwicmFkaW9ncm91cFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gPyAnY29udGFpbmVkJyA6ICdvdXRsaW5lZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNb2RlID0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGU6IHJlc3VsdHNNb2RlIHx8IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVzdWx0c01vZGVDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlKG5ld01vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake2dldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJyl9OiAke2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKS5zcGxpdCgnXFxuJylbMV0/LnRyaW0oKSB8fCAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZU5ldycpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNNb2RlID0gcmVzdWx0c01vZGUgfHwgU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnYnV0dG9uLW1vZGUtY2hhbmdlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHN3aXRjaGluZyBGUk9NIFwiTmV3XCIgVE8gXCJBZGQgdG9cIiBtb2RlIGFuZCB3ZSBoYXZlIGN1cnJlbnQgcmVzdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2UgdGhlbSB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgYmVmb3JlIGNoYW5naW5nIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU09VUkNFIE9GIFRSVVRIIEFSQ0hJVEVDVFVSRSAocjAxOC42NSk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgaXMgdGhlIFNJTkdMRSBTT1VSQ0UgT0YgVFJVVEggZm9yIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgSXQgY29ycmVjdGx5IGZpbHRlcnMgb3V0IHJlbW92ZWQgcmVjb3JkcyBhbmQgc3RheXMgaW4gc3luYyB3aXRoIHVzZXIgYWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtIGVmZmVjdGl2ZVJlY29yZHMgKGZyb20gcmVjb3Jkc1JlZi5jdXJyZW50KSBjb250YWlucyBzdGFsZSBxdWVyeSByZXN1bHRzIHRoYXQgbWF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgaW5jbHVkZSByZW1vdmVkIHJlY29yZHMsIHNvIGl0IHNob3VsZCBvbmx5IGJlIHVzZWQgYXMgYSBmYWxsYmFjayB3aGVuIG91dHB1dERTXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgaGFzIG5vIHNlbGVjdGlvbiAoZS5nLiwgZHVyaW5nIHF1ZXJ5IGV4ZWN1dGlvbiBiZWZvcmUgc2VsZWN0aW9uIGlzIGFwcGxpZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gVGhpcyBlbnN1cmVzIHJlbW92ZWQgcmVjb3JkcyBhcmUgbmV2ZXIgYWNjaWRlbnRhbGx5IGluY2x1ZGVkIGluIGFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVCVUc6IExvZyBzdGF0ZSBiZWZvcmUgY2FwdHVyZSB0byB2ZXJpZnkgYXNzdW1wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWZmZWN0aXZlUmVjb3Jkc0NvdW50ID0gZWZmZWN0aXZlUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0RFNTZWxlY3RlZFJlY29yZHMgPSBvdXRwdXREUz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXREU1NlbGVjdGVkQ291bnQgPSBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPSBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ21vZGUtc3dpdGNoLWRlYnVnLWJlZm9yZS1jYXB0dXJlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlUmVjb3Jkc0NvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUz8uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRWZmZWN0aXZlUmVjb3JkczogZWZmZWN0aXZlUmVjb3JkcyAmJiBlZmZlY3RpdmVSZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzT3V0cHV0RFNTZWxlY3RlZDogb3V0cHV0RFNTZWxlY3RlZFJlY29yZHMubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZJWCAocjAxOC42NSk6IFVzZSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBzb3VyY2Ugb2YgdHJ1dGggZm9yIG1vZGUgc3dpdGNoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY29ycmVjdGx5IGZpbHRlcnMgb3V0IHJlbW92ZWQgcmVjb3JkcywgdW5saWtlIGVmZmVjdGl2ZVJlY29yZHMgd2hpY2ggY29udGFpbnMgc3RhbGUgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBpcyB0aGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCB0aGF0IHN0YXlzIGluIHN5bmMgd2l0aCByZW1vdmFsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRzVG9DYXB0dXJlID0gb3V0cHV0RFNTZWxlY3RlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gb3V0cHV0RFNTZWxlY3RlZFJlY29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZWZmZWN0aXZlUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVCVUc6IExvZyB3aGljaCBzb3VyY2Ugd2FzIHVzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdtb2RlLXN3aXRjaC1kZWJ1Zy1hZnRlci1jYXB0dXJlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUNvdW50OiByZWNvcmRzVG9DYXB0dXJlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgPyAnb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCknIDogKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwID8gJ2VmZmVjdGl2ZVJlY29yZHMnIDogJ25vbmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVSZWNvcmRzQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZENvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZS5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0FjY3VtdWxhdGVkID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgY3VycmVudCByZXN1bHRzIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJZHMgPSBleGlzdGluZ0FjY3VtdWxhdGVkLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXB0dXJlZElkcyA9IHJlY29yZHNUb0NhcHR1cmUubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZElkcyA9IG1lcmdlZFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkSWRzID0gbWVyZ2VkSWRzLmZpbHRlcihpZCA9PiAhZXhpc3RpbmdJZHMuaW5jbHVkZXMoaWQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1cGxpY2F0ZUlkcyA9IGNhcHR1cmVkSWRzLmZpbHRlcihpZCA9PiBleGlzdGluZ0lkcy5pbmNsdWRlcyhpZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NhcHR1cmluZy1jdXJyZW50LXJlc3VsdHMtb24tbW9kZS1zd2l0Y2gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVkUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9DYXB0dXJlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVkSWRzOiBjYXB0dXJlZElkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVmZmVjdGl2ZVJlY29yZHNDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0lkczogZXhpc3RpbmdJZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWNvcmRzQ291bnQ6IG1lcmdlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkSWRzOiBtZXJnZWRJZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZElkczogYWRkZWRJZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXBsaWNhdGVJZHM6IGR1cGxpY2F0ZUlkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cGxpY2F0ZXNGaWx0ZXJlZDogZHVwbGljYXRlSWRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVVzZWQ6IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgPyAnb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCknIDogKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwID8gJ2VmZmVjdGl2ZVJlY29yZHMnIDogJ25vbmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGU6ICdvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKS1pcy1zb3VyY2Utb2YtdHJ1dGgtZmlsdGVycy1yZW1vdmVkLXJlY29yZHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShtZXJnZWRSZWNvcmRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25SZXN1bHRzTW9kZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2UobmV3TW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzJdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVBZGQnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFhY2N1bXVsYXRlZFJlY29yZHMgfHwgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c01vZGUgPSByZXN1bHRzTW9kZSB8fCBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3dpdGNoaW5nIEZST00gXCJOZXdcIiBUTyBcIlJlbW92ZSBmcm9tXCIgbW9kZSBhbmQgd2UgaGF2ZSBjdXJyZW50IHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHRoZW0gd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGJlZm9yZSBjaGFuZ2luZyBtb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChzYW1lIHBhdHRlcm4gYXMgXCJBZGQgdG9cIiBtb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTT1VSQ0UgT0YgVFJVVEggQVJDSElURUNUVVJFIChyMDE4LjY1KTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBpcyB0aGUgU0lOR0xFIFNPVVJDRSBPRiBUUlVUSCBmb3IgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBJdCBjb3JyZWN0bHkgZmlsdGVycyBvdXQgcmVtb3ZlZCByZWNvcmRzIGFuZCBzdGF5cyBpbiBzeW5jIHdpdGggdXNlciBhY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gZWZmZWN0aXZlUmVjb3JkcyAoZnJvbSByZWNvcmRzUmVmLmN1cnJlbnQpIGNvbnRhaW5zIHN0YWxlIHF1ZXJ5IHJlc3VsdHMgdGhhdCBtYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBpbmNsdWRlIHJlbW92ZWQgcmVjb3Jkcywgc28gaXQgc2hvdWxkIG9ubHkgYmUgdXNlZCBhcyBhIGZhbGxiYWNrIHdoZW4gb3V0cHV0RFNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBoYXMgbm8gc2VsZWN0aW9uIChlLmcuLCBkdXJpbmcgcXVlcnkgZXhlY3V0aW9uIGJlZm9yZSBzZWxlY3Rpb24gaXMgYXBwbGllZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBUaGlzIGVuc3VyZXMgcmVtb3ZlZCByZWNvcmRzIGFyZSBuZXZlciBhY2NpZGVudGFsbHkgaW5jbHVkZWQgaW4gYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUJVRzogTG9nIHN0YXRlIGJlZm9yZSBjYXB0dXJlIHRvIHZlcmlmeSBhc3N1bXB0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlZmZlY3RpdmVSZWNvcmRzQ291bnRGb3JSZW1vdmUgPSBlZmZlY3RpdmVSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZSA9IG91dHB1dERTPy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dERTU2VsZWN0ZWRDb3VudEZvclJlbW92ZSA9IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzRm9yUmVtb3ZlLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEZvclJlbW92ZSA9IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnbW9kZS1zd2l0Y2gtZGVidWctYmVmb3JlLWNhcHR1cmUtcmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlUmVjb3Jkc0NvdW50OiBlZmZlY3RpdmVSZWNvcmRzQ291bnRGb3JSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZENvdW50OiBvdXRwdXREU1NlbGVjdGVkQ291bnRGb3JSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50Rm9yUmVtb3ZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTPy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNFZmZlY3RpdmVSZWNvcmRzOiBlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNPdXRwdXREU1NlbGVjdGVkOiBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZS5sZW5ndGggPiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYIChyMDE4LjY1KTogVXNlIG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIHNvdXJjZSBvZiB0cnV0aCBmb3IgbW9kZSBzd2l0Y2hpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjb3JyZWN0bHkgZmlsdGVycyBvdXQgcmVtb3ZlZCByZWNvcmRzLCB1bmxpa2UgZWZmZWN0aXZlUmVjb3JkcyB3aGljaCBjb250YWlucyBzdGFsZSBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpIGlzIHRoZSBzaW5nbGUgc291cmNlIG9mIHRydXRoIHRoYXQgc3RheXMgaW4gc3luYyB3aXRoIHJlbW92YWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUgPSBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZS5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChlZmZlY3RpdmVSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUJVRzogTG9nIHdoaWNoIHNvdXJjZSB3YXMgdXNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ21vZGUtc3dpdGNoLWRlYnVnLWFmdGVyLWNhcHR1cmUtcmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUNvdW50OiByZWNvcmRzVG9DYXB0dXJlRm9yUmVtb3ZlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzRm9yUmVtb3ZlLmxlbmd0aCA+IDAgPyAnb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCknIDogKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwID8gJ2VmZmVjdGl2ZVJlY29yZHMnIDogJ25vbmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVSZWNvcmRzQ291bnQ6IGVmZmVjdGl2ZVJlY29yZHNDb3VudEZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkQ291bnQ6IG91dHB1dERTU2VsZWN0ZWRDb3VudEZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZS5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0FjY3VtdWxhdGVkID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgY3VycmVudCByZXN1bHRzIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NhcHR1cmluZy1jdXJyZW50LXJlc3VsdHMtb24tbW9kZS1zd2l0Y2gtdG8tcmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlZFJlY29yZHNDb3VudDogcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVSZWNvcmRzQ291bnQ6IGVmZmVjdGl2ZVJlY29yZHNDb3VudEZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudDogb3V0cHV0RFNTZWxlY3RlZENvdW50Rm9yUmVtb3ZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZENvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VVc2VkOiBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZS5sZW5ndGggPiAwID8gJ291dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpJyA6IChlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCA/ICdlZmZlY3RpdmVSZWNvcmRzJyA6ICdub25lJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RlOiAnb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCktaXMtc291cmNlLW9mLXRydXRoLWZpbHRlcnMtcmVtb3ZlZC1yZWNvcmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UobWVyZ2VkUmVjb3JkcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVzdWx0c01vZGVDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlKG5ld01vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtnZXRJMThuTWVzc2FnZSgncmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzJyl9OiAke2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKS5zcGxpdCgnXFxuJylbM10/LnRyaW0oKSB8fCAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9eyghYWNjdW11bGF0ZWRSZWNvcmRzIHx8IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIFxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURpc2FibGVkUmVtb3ZlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRJMThuTWVzc2FnZSgncmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZVJlbW92ZScpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICBpZD17YHJlc3VsdHMtbW9kZS1kZXNjcmlwdGlvbi0ke3Byb3BzLndpZGdldElkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3Itb25seVwiXG4gICAgICAgICAgICAgICAgICAgICAgYXJpYS1saXZlPVwicG9saXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICByb2xlPVwic3RhdHVzXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGdldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgID8gZ2V0STE4bk1lc3NhZ2UoJ2FkZFRvQ3VycmVudFJlc3VsdHMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRJMThuTWVzc2FnZSgncmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzJylcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIHtlbmFibGVkICYmIGRzRXhpc3RzICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICA8UXVlcnlUYXNrRm9ybVxuICAgICAgICAgICAgICAgICAgICBrZXk9e3F1ZXJ5SXRlbS5jb25maWdJZH1cbiAgICAgICAgICAgICAgICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkPXtxdWVyeUl0ZW0uY29uZmlnSWR9XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZVJlYWR5PXtkYXRhU291cmNlICE9IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIHNwYXRpYWxGaWx0ZXJFbmFibGVkPXtzcGF0aWFsRmlsdGVyRW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YUFjdGlvbkZpbHRlciA9IHtkYXRhQWN0aW9uRmlsdGVyfVxuICAgICAgICAgICAgICAgICAgICBvbkZvcm1TdWJtaXQ9e2hhbmRsZUZvcm1TdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtpbml0aWFsSW5wdXRWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17b25IYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZD17cXVlcnlJdGVtLnNob3J0SWR9XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17YWN0aXZlVGFifVxuICAgICAgICAgICAgICAgICAgICBvblRhYkNoYW5nZT17c2V0QWN0aXZlVGFifVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPERhdGFTb3VyY2VUaXBcbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17cHJvcHMud2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgdXNlRGF0YVNvdXJjZT17cXVlcnlJdGVtLnVzZURhdGFTb3VyY2V9XG4gICAgICAgICAgICAgICAgc2hvd01lc3NhZ2U9e3RydWV9XG4gICAgICAgICAgICAgICAgb25TdGF0dXNDaGFuZ2U9e2hhbmRsZVN0YXR1c0NoYW5nZX1cbiAgICAgICAgICAgICAgICBvbkRhdGFTb3VyY2VDcmVhdGVkPXtoYW5kbGVEYXRhU291cmNlQ3JlYXRlZH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L1RhYj5cbiAgICAgICAgPFRhYlxuICAgICAgICAgIGlkPSdyZXN1bHRzJ1xuICAgICAgICAgIHRpdGxlPXtcbiAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNUYWInKX1cbiAgICAgICAgICAgICAge2VmZmVjdGl2ZVJlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgKHtlZmZlY3RpdmVSZXN1bHRDb3VudH0pXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIH1cbiAgICAgICAgICBkaXNhYmxlZD17ZWZmZWN0aXZlUmVzdWx0Q291bnQgPT09IDB9XG4gICAgICAgID5cbiAgICAgICAgICB7ZWZmZWN0aXZlUmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktdGFza19fY29udGVudCcsIHtcbiAgICAgICAgICAgICAgICBbRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU106IGlzSW5Qb3BwZXIgJiYgYWN0aXZlVGFiID09PSAncmVzdWx0cydcbiAgICAgICAgICAgICAgfSl9IFxuICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nLXRvcDogMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgY2xpY2tzIGZyb20gYnViYmxpbmcgdXAgd2hlbiBSZXN1bHRzIHRhYiBpcyBhY3RpdmVcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVGFiID09PSAncmVzdWx0cycpIHtcbiAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxRdWVyeVRhc2tSZXN1bHRcbiAgICAgICAgICAgICAgICBrZXk9e2Ake3F1ZXJ5SXRlbS5jb25maWdJZH0tJHtxdWVyeUV4ZWN1dGlvbktleVJlZi5jdXJyZW50fWB9XG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3Byb3BzLndpZGdldElkfVxuICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbT17cXVlcnlJdGVtfVxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zPXtxdWVyeVBhcmFtUmVmLmN1cnJlbnR9XG4gICAgICAgICAgICAgICAgcmVzdWx0Q291bnQ9e2VmZmVjdGl2ZVJlc3VsdENvdW50fVxuICAgICAgICAgICAgICAgIG1heFBlclBhZ2U9eyhkYXRhU291cmNlIGFzIFF1ZXJpYWJsZURhdGFTb3VyY2UpPy5nZXRNYXhSZWNvcmRDb3VudD8uKCl9XG4gICAgICAgICAgICAgICAgcmVjb3Jkcz17ZWZmZWN0aXZlUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvdXRwdXREUz17b3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgcnVudGltZVpvb21Ub1NlbGVjdGVkPXtsYXN0UnVudGltZVpvb21Ub1NlbGVjdGVkUmVmLmN1cnJlbnR9XG4gICAgICAgICAgICAgICAgcmVzdWx0c01vZGU9e3Jlc3VsdHNNb2RlfVxuICAgICAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ9e3VzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHR9XG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcj17Z3JhcGhpY3NMYXllcn1cbiAgICAgICAgICAgICAgICBtYXBWaWV3PXttYXBWaWV3fVxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcz17YWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXtvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgICAgICBldmVudE1hbmFnZXI9e2V2ZW50TWFuYWdlcn1cbiAgICAgICAgICAgICAgICBvbk5hdkJhY2s9e2FzeW5jIChjbGVhclJlc3VsdHMgPSBmYWxzZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG5hdmlnYXRpb24gZnJvbSBRdWVyeVRhc2tSZXN1bHRcbiAgICAgICAgICAgICAgICAgIC8vIElmIGNsZWFyUmVzdWx0cyBpcyB0cnVlLCBjbGVhciBldmVyeXRoaW5nIGFuZCBnbyB0byBxdWVyeSB0YWJcbiAgICAgICAgICAgICAgICAgIC8vIElmIGZhbHNlLCBqdXN0IHN3aXRjaCB0byBxdWVyeSB0YWIgd2l0aG91dCBjbGVhcmluZ1xuICAgICAgICAgICAgICAgICAgaWYgKGNsZWFyUmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IGZsYWcgd2hlbiBjbGVhcmluZ1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuYXZUb0Zvcm0odHJ1ZSlcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEp1c3Qgc3dpdGNoIHRhYnMsIGRvbid0IGNsZWFyIHJlc3VsdHNcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBhcyBtYW51YWwgc3dpdGNoIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgICAgICAgICAgICAgICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L1RhYj5cbiAgICAgIDwvVGFicz5cblxuICAgICAgey8qIEVycm9yIE1lc3NhZ2VzICovfVxuICAgICAgeyhzZWxlY3Rpb25FcnJvciB8fCB6b29tRXJyb3IpICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICBwYWRkaW5nOiAwIDE2cHg7XG4gICAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICBgfT5cbiAgICAgICAgICB7c2VsZWN0aW9uRXJyb3IgJiYgKFxuICAgICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgICAgZXJyb3I9e3NlbGVjdGlvbkVycm9yfSBcbiAgICAgICAgICAgICAgb25EaXNtaXNzPXsoKSA9PiBzZXRTZWxlY3Rpb25FcnJvcihudWxsKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7em9vbUVycm9yICYmIChcbiAgICAgICAgICAgIDxFcnJvck1lc3NhZ2UgXG4gICAgICAgICAgICAgIGVycm9yPXt6b29tRXJyb3J9IFxuICAgICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFpvb21FcnJvcihudWxsKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogTG9hZGluZyBJbmRpY2F0b3IgLSBvdmVybGF5cyBvbiB0b3Agb2YgdGFicyAqL31cbiAgICAgIHtzdGFnZSA9PT0gMiAmJiAoXG4gICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgICB6LWluZGV4OiAxMDAwO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGB9PlxuICAgICAgICAgIDxMb2FkaW5nUmVzdWx0IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHtcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBJTVNxbEV4cHJlc3Npb24sXG4gIHR5cGUgRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMsXG4gIE1lc3NhZ2VNYW5hZ2VyLFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlLFxuICBSZWNvcmRTZXRDaGFuZ2VUeXBlLFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICBkYXRhU291cmNlVXRpbHNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBJRmllbGRJbmZvIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCBTcGF0aWFsUmVsYXRpb24sIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgRmllbGRzVHlwZSwgbWFwSlNBUElVbml0VG9Ec1VuaXQsIG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgZ2V0RmllbGRJbmZvc0luUG9wdXBDb250ZW50LCBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgZnVuY3Rpb24gY29tYmluZUZpZWxkcyAocmVzdWx0RGlzcGxheUZpZWxkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPiwgcmVzdWx0VGl0bGVFeHByZXNzaW9uOiBzdHJpbmcsIGlkRmllbGQ/OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGZpZWxkcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIHJlc3VsdERpc3BsYXlGaWVsZHM/LmZvckVhY2goaXRlbSA9PiBmaWVsZHMuYWRkKGl0ZW0pKVxuICBpZiAocmVzdWx0VGl0bGVFeHByZXNzaW9uKSB7XG4gICAgY29uc3QgdGVtcGxhdGVzID0gcmVzdWx0VGl0bGVFeHByZXNzaW9uLm1hdGNoKC9cXHtcXHcqXFx9L2cpXG4gICAgaWYgKHRlbXBsYXRlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgdGVtcGxhdGVzLmZvckVhY2goaXRlbSA9PiBmaWVsZHMuYWRkKGl0ZW0uc3Vic3RyaW5nKDEsIGl0ZW0ubGVuZ3RoIC0gMSkpKVxuICAgIH1cbiAgfVxuICBpZiAoaWRGaWVsZCkge1xuICAgIGZpZWxkcy5hZGQoaWRGaWVsZClcbiAgfVxuICByZXR1cm4gQXJyYXkuZnJvbShmaWVsZHMpXG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHVzZXIgaW5wdXQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAqIEBwYXJhbSBpbnB1dCAtIFRoZSByYXcgdXNlciBpbnB1dCAoc3RyaW5nLCBudW1iZXIsIGV0Yy4pXG4gKiBAcGFyYW0gaXNMaXN0IC0gT3B0aW9uYWwgZmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBpbnB1dCBpcyBmcm9tIGEgbGlzdC9zZWxlY3RvciAobGVuaWVudCB2YWxpZGF0aW9uKVxuICogQHJldHVybnMgYm9vbGVhbiAtIHRydWUgaWYgaW5wdXQgaXMgdmFsaWQsIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNRdWVyeUlucHV0VmFsaWQgKGlucHV0OiBhbnksIGlzTGlzdDogYm9vbGVhbiA9IGZhbHNlKTogYm9vbGVhbiB7XG4gIC8vIElmIGl0J3MgYSBsaXN0LWJhc2VkIHNlbGVjdGlvbiAoVW5pcXVlIFZhbHVlcywgRmllbGQgVmFsdWVzKSwgXG4gIC8vIHdlIGFsbG93IGVtcHR5L251bGwgYXMgaXQgbWlnaHQgcmVwcmVzZW50IFwibm8gZmlsdGVyXCIgb3IgdGhlIHVzZXIgXG4gIC8vIGludGVuZHMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgbGlzdC5cbiAgaWYgKGlzTGlzdCkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBpZiAoaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBJZiBpdCdzIGEgc3RyaW5nLCBlbnN1cmUgaXQncyBub3QgZW1wdHkgb3IganVzdCB3aGl0ZXNwYWNlXG4gIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGlucHV0LnRyaW0oKSAhPT0gJydcbiAgfVxuXG4gIC8vIElmIGl0J3MgYW4gYXJyYXkgKG9mdGVuIHVzZWQgaW4gdW5pcXVlIHZhbHVlcyBvciBtdWx0aXBsZSBzZWxlY3Rpb24pXG4gIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgIGlmIChpbnB1dC5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZVxuICAgIC8vIENoZWNrIGlmIHRoZSBmaXJzdCBpdGVtIGlzIHZhbGlkICh1c3VhbGx5IHt2YWx1ZTogJy4uLicsIGxhYmVsOiAnLi4uJ30pXG4gICAgY29uc3QgZmlyc3RJdGVtID0gaW5wdXRbMF1cbiAgICBpZiAoZmlyc3RJdGVtICYmIHR5cGVvZiBmaXJzdEl0ZW0gPT09ICdvYmplY3QnICYmICd2YWx1ZScgaW4gZmlyc3RJdGVtKSB7XG4gICAgICByZXR1cm4gaXNRdWVyeUlucHV0VmFsaWQoZmlyc3RJdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgLy8gSWYgaXQncyBhIGppbXUtY29yZSBJbW11dGFibGUgYXJyYXlcbiAgaWYgKGlucHV0LmFzTXV0YWJsZSAmJiB0eXBlb2YgaW5wdXQudG9BcnJheSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnN0IGFyciA9IGlucHV0LnRvQXJyYXkoKVxuICAgIGlmIChhcnIubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2VcbiAgICBjb25zdCBmaXJzdEl0ZW0gPSBhcnJbMF1cbiAgICBpZiAoZmlyc3RJdGVtICYmIHR5cGVvZiBmaXJzdEl0ZW0gPT09ICdvYmplY3QnICYmICd2YWx1ZScgaW4gZmlyc3RJdGVtKSB7XG4gICAgICByZXR1cm4gaXNRdWVyeUlucHV0VmFsaWQoZmlyc3RJdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIFxuICAvLyBGb3Igb3RoZXIgdHlwZXMgKG51bWJlcnMsIGRhdGVzKSwgaWYgaXQgZXhpc3RzLCB3ZSBjb3VudCBpdCBhcyB2YWxpZFxuICByZXR1cm4gdHJ1ZVxufVxuXG4vKipcbiAqIFNhbml0aXplcyB1c2VyIGlucHV0IGZvciBxdWVyeSB0YXNrcy5cbiAqIDEuIFN0cmlwcyBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLlxuICogMi4gUHJldmVudHMgYmFzaWMgU1FMIGluamVjdGlvbiBieSBlc2NhcGluZyBzaW5nbGUgcXVvdGVzLlxuICogMy4gSGFuZGxlcyBlbXB0eSBvciB3aGl0ZXNwYWNlLW9ubHkgc3RyaW5ncy5cbiAqIFxuICogQHBhcmFtIGlucHV0IC0gVGhlIHJhdyB1c2VyIGlucHV0IHN0cmluZ1xuICogQHJldHVybnMgU2FuaXRpemVkIHN0cmluZyBvciBudWxsIGlmIGlucHV0IGlzIGVtcHR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVF1ZXJ5SW5wdXQgKGlucHV0OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICghaW5wdXQgfHwgdHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgXG4gIGNvbnN0IHRyaW1tZWQgPSBpbnB1dC50cmltKClcbiAgaWYgKHRyaW1tZWQgPT09ICcnKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBcbiAgLy8gQmFzaWMgU1FMIGVzY2FwaW5nOiByZXBsYWNlIHNpbmdsZSBxdW90ZXMgd2l0aCBkb3VibGUgc2luZ2xlIHF1b3Rlc1xuICByZXR1cm4gdHJpbW1lZC5yZXBsYWNlKC8nL2csIFwiJydcIilcbn1cblxuLyoqXG4gKiBTYW5pdGl6ZXMgYWxsIHZhbHVlcyB3aXRoaW4gYW4gSU1TcWxFeHByZXNzaW9uIG9iamVjdC5cbiAqIFxuICogQHBhcmFtIHNxbEV4cHIgLSBUaGUgcmF3IFNRTCBleHByZXNzaW9uIG9iamVjdFxuICogQHJldHVybnMgQSBuZXcgc2FuaXRpemVkIElNU3FsRXhwcmVzc2lvbiBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplU3FsRXhwcmVzc2lvbiAoc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uKTogSU1TcWxFeHByZXNzaW9uIHtcbiAgaWYgKCFzcWxFeHByIHx8ICFzcWxFeHByLnBhcnRzKSB7XG4gICAgcmV0dXJuIHNxbEV4cHJcbiAgfVxuXG4gIGxldCBzYW5pdGl6ZWRFeHByID0gc3FsRXhwclxuICBzcWxFeHByLnBhcnRzLmZvckVhY2goKHBhcnQsIGluZGV4KSA9PiB7XG4gICAgaWYgKHBhcnQudHlwZSA9PT0gJ1NJTkdMRScgJiYgcGFydC52YWx1ZU9wdGlvbnM/LnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHJhd1ZhbHVlID0gcGFydC52YWx1ZU9wdGlvbnMudmFsdWVcbiAgICAgIFxuICAgICAgLy8gQ0FTRSAxOiBTaW1wbGUgU3RyaW5nXG4gICAgICBpZiAodHlwZW9mIHJhd1ZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBzYW5pdGl6ZWRWYWx1ZSA9IHNhbml0aXplUXVlcnlJbnB1dChyYXdWYWx1ZSlcbiAgICAgICAgaWYgKHNhbml0aXplZFZhbHVlICE9PSByYXdWYWx1ZSkge1xuICAgICAgICAgIHNhbml0aXplZEV4cHIgPSBzYW5pdGl6ZWRFeHByLnNldEluKFsncGFydHMnLCBpbmRleCwgJ3ZhbHVlT3B0aW9ucycsICd2YWx1ZSddLCBzYW5pdGl6ZWRWYWx1ZSlcbiAgICAgICAgfVxuICAgICAgfSBcbiAgICAgIC8vIENBU0UgMjogQXJyYXkgb2Ygb2JqZWN0cyAoVW5pcXVlIFZhbHVlcyAvIERyb3Bkb3ducylcbiAgICAgIC8vIFdlIG11c3QgcHJlc2VydmUgdGhlIEltbXV0YWJsZSBzdHJ1Y3R1cmUgdG8gYXZvaWQgXCJhc011dGFibGVcIiBlcnJvcnNcbiAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocmF3VmFsdWUpIHx8IChyYXdWYWx1ZSAmJiB0eXBlb2YgKHJhd1ZhbHVlIGFzIGFueSkudG9BcnJheSA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgY29uc3QgaXNJbW11dGFibGUgPSB0eXBlb2YgKHJhd1ZhbHVlIGFzIGFueSkudG9BcnJheSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICBjb25zdCBhcnIgPSBpc0ltbXV0YWJsZSA/IChyYXdWYWx1ZSBhcyBhbnkpLnRvQXJyYXkoKSA6IChyYXdWYWx1ZSBhcyBhbnlbXSlcbiAgICAgICAgXG4gICAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgICAgY29uc3Qgc2FuaXRpemVkQXJyID0gYXJyLm1hcChpdGVtID0+IHtcbiAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgJ3ZhbHVlJyBpbiBpdGVtICYmIHR5cGVvZiBpdGVtLnZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uc3Qgc2FuaXRpemVkVmFsID0gc2FuaXRpemVRdWVyeUlucHV0KGl0ZW0udmFsdWUpXG4gICAgICAgICAgICBpZiAoc2FuaXRpemVkVmFsICE9PSBpdGVtLnZhbHVlKSB7XG4gICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgICAgIHJldHVybiB7IC4uLml0ZW0sIHZhbHVlOiBzYW5pdGl6ZWRWYWwgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAvLyBJZiBpdCB3YXMgSW1tdXRhYmxlLCB3ZSBzaG91bGQgaWRlYWxseSB1c2UgSW1tdXRhYmxlIG1ldGhvZHMgdG8gdXBkYXRlLFxuICAgICAgICAgIC8vIGJ1dCBzZXRJbiBvbiB0aGUgdG9wLWxldmVsIGV4cHJlc3Npb24gd2l0aCBhIHBsYWluIGFycmF5L29iamVjdCBcbiAgICAgICAgICAvLyB1c3VhbGx5IHRyaWdnZXJzIHRoZSBmcmFtZXdvcmsncyBhdXRvLWNvbnZlcnNpb24uXG4gICAgICAgICAgc2FuaXRpemVkRXhwciA9IHNhbml0aXplZEV4cHIuc2V0SW4oWydwYXJ0cycsIGluZGV4LCAndmFsdWVPcHRpb25zJywgJ3ZhbHVlJ10sIHNhbml0aXplZEFycilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4gc2FuaXRpemVkRXhwclxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UG9wdXBUZW1wbGF0ZSAoXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuKTogUHJvbWlzZTx7IHBvcHVwVGVtcGxhdGU/OiBfX2VzcmkuUG9wdXBUZW1wbGF0ZSwgZGVmYXVsdFBvcHVwVGVtcGxhdGU/OiBfX2VzcmkuUG9wdXBUZW1wbGF0ZSB9PiB7XG4gIGNvbnN0IHsgcmVzdWx0RmllbGRzVHlwZSwgcmVzdWx0RGlzcGxheUZpZWxkcywgcmVzdWx0VGl0bGVFeHByZXNzaW9uID0gJycgfSA9IHF1ZXJ5SXRlbVxuICBjb25zdCBjdXJyZW50T3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgY29uc3QgcG9wdXBJbmZvID0gY3VycmVudE9yaWdpbkRzLmdldFBvcHVwSW5mbygpXG5cbiAgaWYgKHJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcykge1xuICAgIGxldCBmaWVsZHM6IHN0cmluZ1tdXG4gICAgaWYgKHJlc3VsdERpc3BsYXlGaWVsZHMgPT0gbnVsbCkge1xuICAgICAgY29uc3QgZmllbGRzSW5Db250ZW50ID0gZ2V0RmllbGRJbmZvc0luUG9wdXBDb250ZW50KHBvcHVwSW5mbylcbiAgICAgIGlmIChmaWVsZHNJbkNvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB1bmlxdWVGaWVsZHMgPSBuZXcgU2V0KGZpZWxkc0luQ29udGVudC5tYXAoZWxlID0+IGVsZS5maWVsZE5hbWUpKVxuICAgICAgICBmaWVsZHMgPSBBcnJheS5mcm9tKHVuaXF1ZUZpZWxkcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJldHVybiBhbGwgZmllbGRzIGJ5IGRlZmF1bHRcbiAgICAgICAgY29uc3QgYWxsRmllbGRzU2NoZW1hID0gb3V0cHV0RFMuZ2V0U2NoZW1hKClcbiAgICAgICAgZmllbGRzID0gYWxsRmllbGRzU2NoZW1hPy5maWVsZHMgPyBPYmplY3QudmFsdWVzKGFsbEZpZWxkc1NjaGVtYS5maWVsZHMpLm1hcChmaWVsZCA9PiBmaWVsZC5qaW11TmFtZSkgOiBbXVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmaWVsZHMgPSByZXN1bHREaXNwbGF5RmllbGRzLmFzTXV0YWJsZSh7IGRlZXA6IHRydWUgfSlcbiAgICB9XG4gICAgaWYgKHBvcHVwSW5mbykge1xuICAgICAgY29uc3QgZmllbGRJbmZvcyA9IFtdXG4gICAgICBmaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgIGNvbnN0IGZpZWxkSW5mbyA9IHBvcHVwSW5mby5maWVsZEluZm9zLmZpbmQoZmllbGRJbmZvID0+IGZpZWxkSW5mby5maWVsZE5hbWUgPT09IGZpZWxkKVxuICAgICAgICBpZiAoZmllbGRJbmZvKSB7XG4gICAgICAgICAgZmllbGRJbmZvLnZpc2libGUgPSB0cnVlXG4gICAgICAgICAgZmllbGRJbmZvcy5wdXNoKGZpZWxkSW5mbylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaWVsZEluZm9zLnB1c2goe1xuICAgICAgICAgICAgZmllbGROYW1lOiBmaWVsZCxcbiAgICAgICAgICAgIGxhYmVsOiBmaWVsZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwb3B1cFRlbXBsYXRlOiB7XG4gICAgICAgICAgZmllbGRJbmZvcyxcbiAgICAgICAgICBjb250ZW50OiBbe1xuICAgICAgICAgICAgdHlwZTogJ2ZpZWxkcydcbiAgICAgICAgICB9XSxcbiAgICAgICAgICB0aXRsZTogcmVzdWx0VGl0bGVFeHByZXNzaW9uXG4gICAgICAgIH1cbiAgICAgIH0gYXMgYW55XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBwb3B1cFRlbXBsYXRlOiB7XG4gICAgICAgIGZpZWxkSW5mb3M6IGZpZWxkcy5tYXAoZmllbGQgPT4gKHtcbiAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkLFxuICAgICAgICAgIGxhYmVsOiBmaWVsZFxuICAgICAgICB9KSksXG4gICAgICAgIGNvbnRlbnQ6IFt7XG4gICAgICAgICAgdHlwZTogJ2ZpZWxkcydcbiAgICAgICAgfV0sXG4gICAgICAgIHRpdGxlOiByZXN1bHRUaXRsZUV4cHJlc3Npb25cbiAgICAgIH0gYXMgYW55XG4gICAgfVxuICB9XG4gIC8vIHRoZSBzb3VyY2UgbGF5ZXIgd2lsbCBwcm92aWRlIHBvcHVwIGluZm9cbiAgbGV0IGxheWVyT2JqZWN0XG4gIGlmIChjdXJyZW50T3JpZ2luRHMubGF5ZXIpIHtcbiAgICBsYXllck9iamVjdCA9IGN1cnJlbnRPcmlnaW5Ecy5sYXllclxuICB9IGVsc2Uge1xuICAgIGxheWVyT2JqZWN0ID0gYXdhaXQgY3VycmVudE9yaWdpbkRzLmNyZWF0ZUpTQVBJTGF5ZXJCeURhdGFTb3VyY2UoKVxuICB9XG4gIGlmIChsYXllck9iamVjdCkge1xuICAgIGF3YWl0IGxheWVyT2JqZWN0LmxvYWQoKVxuICB9XG4gIHJldHVybiB7IGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBsYXllck9iamVjdD8uYXNzb2NpYXRlZExheWVyPy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB8fCBsYXllck9iamVjdD8uZGVmYXVsdFBvcHVwVGVtcGxhdGUgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVRdWVyeVBhcmFtcyAoXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24sXG4gIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmosXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LFxuICBwYWdlOiBudW1iZXIsXG4gIHBhZ2VTaXplOiBudW1iZXJcbik6IFF1ZXJ5UGFyYW1zIHtcbiAgY29uc3QgY3VycmVudFF1ZXJ5RHNKc29uID0gb3V0cHV0RFMuZ2V0RGF0YVNvdXJjZUpzb24oKVxuICBjb25zdCBjdXJyZW50T3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgY29uc3QgaXNMb2NhbERzID0gY3VycmVudFF1ZXJ5RHNKc29uPy5pc0RhdGFJbkRhdGFTb3VyY2VJbnN0YW5jZVxuICBpZiAoaXNMb2NhbERzKSB7XG4gICAgb3V0cHV0RFMuc2V0U291cmNlUmVjb3JkcyhjdXJyZW50T3JpZ2luRHMuZ2V0U291cmNlUmVjb3JkcygpKVxuICB9XG5cbiAgY29uc3QgeyB1c2VBdHRyaWJ1dGVGaWx0ZXIsIHVzZVNwYXRpYWxGaWx0ZXIsIHNvcnRPcHRpb25zLCByZXN1bHRGaWVsZHNUeXBlLCByZXN1bHREaXNwbGF5RmllbGRzLCByZXN1bHRUaXRsZUV4cHJlc3Npb24gfSA9IHF1ZXJ5SXRlbVxuICBcbiAgLy8gREVURVJNSU5FIE1JTklNQUwgRklFTERTIChUaGUgXCJGaWVsZCBTaHJlZGRlclwiIE9wdGltaXphdGlvbilcbiAgLy8gVG8gYWNoaWV2ZSBwZXJmb3JtYW5jZSBwYXJpdHkgd2l0aCBXZWIgQXBwQnVpbGRlciwgd2UgbXVzdCBhdm9pZCBmZXRjaGluZyBldmVyeSBcbiAgLy8gY29sdW1uIGluIHRoZSBkYXRhYmFzZSAoKiBvciBhbGwpLiBXZSBzdXJnaWNhbGx5IHJlcXVlc3Qgb25seSB0aGUgZmllbGRzIFxuICAvLyBuZWVkZWQgZm9yIHRoZSBUaXRsZSwgdGhlIEF0dHJpYnV0ZSBMaXN0LCBhbmQgdGhlIElEIGZpZWxkLlxuICBsZXQgb3V0cHV0RmllbGRzOiBzdHJpbmdbXSA9IFtdXG4gIGlmIChyZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMgJiYgcmVzdWx0RGlzcGxheUZpZWxkcykge1xuICAgIG91dHB1dEZpZWxkcyA9IGNvbWJpbmVGaWVsZHMocmVzdWx0RGlzcGxheUZpZWxkcyBhcyBhbnksIHJlc3VsdFRpdGxlRXhwcmVzc2lvbiB8fCAnJywgb3V0cHV0RFMuZ2V0SWRGaWVsZCgpKVxuICB9IGVsc2Uge1xuICAgIC8vIFBvcHVwIG1vZGU6IEdldCBvbmx5IHZpc2libGUgZmllbGRzIGZyb20gcG9wdXAgaW5mb1xuICAgIGNvbnN0IHBvcHVwSW5mbyA9IGN1cnJlbnRPcmlnaW5Ecy5nZXRQb3B1cEluZm8oKVxuICAgIGNvbnN0IGZpZWxkTmFtZXMgPSBPYmplY3QudmFsdWVzKGN1cnJlbnRPcmlnaW5Ecy5nZXRTY2hlbWEoKS5maWVsZHMgPz8ge30pLm1hcChmID0+IGYubmFtZSlcbiAgICBjb25zdCB2YWxpZEZpZWxkSW5mb3MgPSBwb3B1cEluZm8/LmZpZWxkSW5mb3M/LmZpbHRlcihmaWVsZEluZm8gPT4gZmllbGRJbmZvLnZpc2libGUgIT09IGZhbHNlICYmIGZpZWxkTmFtZXMuaW5jbHVkZXMoZmllbGRJbmZvLmZpZWxkTmFtZSkpXG4gICAgb3V0cHV0RmllbGRzID0gdmFsaWRGaWVsZEluZm9zPy5tYXAoZmllbGRJbmZvID0+IGZpZWxkSW5mby5maWVsZE5hbWUpIHx8IFtdXG4gICAgXG4gICAgLy8gQWx3YXlzIGVuc3VyZSBJRCBmaWVsZCBpcyBpbmNsdWRlZFxuICAgIGNvbnN0IGlkRmllbGQgPSBvdXRwdXREUy5nZXRJZEZpZWxkKClcbiAgICBpZiAoaWRGaWVsZCAmJiAhb3V0cHV0RmllbGRzLmluY2x1ZGVzKGlkRmllbGQpKSB7XG4gICAgICBvdXRwdXRGaWVsZHMucHVzaChpZEZpZWxkKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG1lcmdlZFF1ZXJ5UGFyYW1zID0gb3V0cHV0RFMubWVyZ2VRdWVyeVBhcmFtcyhjdXJyZW50T3JpZ2luRHMuZ2V0Q3VycmVudFF1ZXJ5UGFyYW1zKCkgPz8ge30sIHtcbiAgICB3aGVyZTogKHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByPy5zcWwpID8gZGF0YVNvdXJjZVV0aWxzLmdldEFyY0dJU1NRTChzcWxFeHByLCBvdXRwdXREUykuc3FsIDogJzE9MScsXG4gICAgc3FsRXhwcmVzc2lvbjogKHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByPy5zcWwpID8gc3FsRXhwciA6IG51bGwsXG4gICAgLy8gRk9SQ0UgbWluaW1hbCBmaWVsZHMgaGVyZSB0byBvdmVycmlkZSBhbnkgZnJhbWV3b3JrIFwiKlwiIG9yIFwiYWxsXCJcbiAgICBvdXRGaWVsZHM6IG91dHB1dEZpZWxkc1xuICB9IGFzIGFueSlcblxuICAvLyBQRVJGT1JNQU5DRSBPUFRJTUlaQVRJT046IFVuaXZlcnNhbCBTUUwgT3B0aW1pemVyXG4gIC8vIFdlIG5vcm1hbGl6ZSB0aGUgdXNlcidzIGlucHV0IHRvIFVQUEVSQ0FTRSB0byBlbnN1cmUgY2FzZS1pbnNlbnNpdGl2aXR5IHdoaWxlIFxuICAvLyB1bndyYXBwaW5nIGFueSBMT1dFUigpIGZ1bmN0aW9uIGFyb3VuZCB0aGUgZmllbGQgbmFtZS4gVGhpcyBhbGxvd3MgdGhlIGRhdGFiYXNlIFxuICAvLyB0byB1c2UgaXRzIGF0dHJpYnV0ZSBpbmRleGVzIChTQVJHYWJsZSBxdWVyeSkuXG4gIGlmIChtZXJnZWRRdWVyeVBhcmFtcy53aGVyZSAmJiBtZXJnZWRRdWVyeVBhcmFtcy53aGVyZS5pbmNsdWRlcygnTE9XRVIoJykpIHtcbiAgICBjb25zdCBvcHRpbWl6ZWRXaGVyZSA9IG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlLnJlcGxhY2UoL0xPV0VSXFwoKFteKV0rKVxcKVxccyooPXxMSUtFKVxccyonKFteJ10qKScvZ2ksIChtYXRjaCwgZmllbGQsIG9wZXJhdG9yLCB2YWx1ZSkgPT4ge1xuICAgICAgLy8gTm9ybWFsaXplIGJvdGggc2lkZXMgdG8gVVBQRVJDQVNFLiBUaGlzIHdvcmtzIGZvciBBTlkgZmllbGQgbmFtZS5cbiAgICAgIC8vIFdlIGtlZXAgdGhlIGZpZWxkIG5hbWUgXCJuYWtlZFwiIHNvIHRoZSBpbmRleCBpcyB1c2VkLlxuICAgICAgcmV0dXJuIGAke2ZpZWxkfSAke29wZXJhdG9yfSAnJHt2YWx1ZS50b1VwcGVyQ2FzZSgpfSdgXG4gICAgfSlcbiAgICBcbiAgICBpZiAob3B0aW1pemVkV2hlcmUgIT09IG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnc3FsLW9wdGltaXplZCcsXG4gICAgICAgIG9yaWdpbmFsOiBtZXJnZWRRdWVyeVBhcmFtcy53aGVyZSxcbiAgICAgICAgb3B0aW1pemVkOiBvcHRpbWl6ZWRXaGVyZVxuICAgICAgfSlcbiAgICAgIG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlID0gb3B0aW1pemVkV2hlcmVcbiAgICB9XG4gIH1cblxuICAvLyBjb21wb3NlIHF1ZXJ5IHBhcmFtcyBmb3IgcXVlcnlcbiAgY29uc3QgcXVlcnlQYXJhbXM6IEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zID0ge1xuICAgIC8vIHVybDogZHMudXJsLFxuICAgIHJldHVybkdlb21ldHJ5OiB0cnVlLFxuICAgIC8qKiBcbiAgICAgKiBQRVJGT1JNQU5DRSBPUFRJTUlaQVRJT046IEZvcmNlIGxvd2VyIHByZWNpc2lvbiBmb3IgYWxsIGRpc3BsYXkgcXVlcmllcy5cbiAgICAgKi9cbiAgICBtYXhBbGxvd2FibGVPZmZzZXQ6IDAuMSwgXG4gICAgcGFnZSxcbiAgICAvLyBMaW1pdCBwYWdlU2l6ZSB0byBhIHNhbmUgZGVmYXVsdCBpZiBub3QgcHJvdmlkZWQgb3IgdG9vIGxhcmdlXG4gICAgcGFnZVNpemU6IChwYWdlU2l6ZSAmJiBwYWdlU2l6ZSA8IDEwMDApID8gcGFnZVNpemUgOiAxMDAwLFxuICAgIC4uLm1lcmdlZFF1ZXJ5UGFyYW1zXG4gIH1cblxuICAvLyBGaW5hbCBvdmVycmlkZSB0byBlbnN1cmUgbm8gXCIqXCIgbGVha3MgdGhyb3VnaCBmcm9tIGFueSBtZXJnZSBvcGVyYXRpb25cbiAgaWYgKCFxdWVyeVBhcmFtcy5vdXRGaWVsZHMgfHwgcXVlcnlQYXJhbXMub3V0RmllbGRzLmluY2x1ZGVzKCcqJykpIHtcbiAgICBxdWVyeVBhcmFtcy5vdXRGaWVsZHMgPSBvdXRwdXRGaWVsZHNcbiAgfVxuXG4gIC8vIERpYWdub3N0aWMgbG9nOiBTaG93IGV4YWN0bHkgV0hJQ0ggZmllbGRzIGFyZSBiZWluZyBzZW50XG4gIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICBldmVudDogJ3JlcXVlc3RpbmctZGF0YScsXG4gICAgZmllbGRzQ291bnQ6IHF1ZXJ5UGFyYW1zLm91dEZpZWxkcz8ubGVuZ3RoLFxuICAgIGZpZWxkczogcXVlcnlQYXJhbXMub3V0RmllbGRzPy5qb2luKCcsICcpLFxuICAgIHBhZ2VTaXplOiBxdWVyeVBhcmFtcy5wYWdlU2l6ZSxcbiAgICBvZmZzZXQ6IHF1ZXJ5UGFyYW1zLm1heEFsbG93YWJsZU9mZnNldFxuICB9KVxuXG4gIGlmICh1c2VTcGF0aWFsRmlsdGVyICYmIHNwYXRpYWxGaWx0ZXI/Lmdlb21ldHJ5KSB7XG4gICAgY29uc3QgeyBnZW9tZXRyeSwgcmVsYXRpb24gPSBTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0LCBidWZmZXIgfSA9IHNwYXRpYWxGaWx0ZXJcblxuICAgIGNvbnN0IHNwYXRpYWxRdWVyeVBhcmFtczogRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMgPSB7XG4gICAgICBnZW9tZXRyeVR5cGU6IGRhdGFTb3VyY2VVdGlscy5jaGFuZ2VKU0FQSUdlb21ldHJ5VHlwZVRvUmVzdEFQSUdlb21ldHJ5VHlwZShnZW9tZXRyeS50eXBlKSxcbiAgICAgIGdlb21ldHJ5OiBnZW9tZXRyeS50b0pTT04oKSxcbiAgICAgIHNwYXRpYWxSZWw6IG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsW3JlbGF0aW9uXSxcbiAgICAgIGRpc3RhbmNlOiBidWZmZXI/LmRpc3RhbmNlLFxuICAgICAgdW5pdHM6IGJ1ZmZlcj8udW5pdCA/IG1hcEpTQVBJVW5pdFRvRHNVbml0W2J1ZmZlci51bml0XSA6IHVuZGVmaW5lZFxuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHF1ZXJ5UGFyYW1zLCBzcGF0aWFsUXVlcnlQYXJhbXMpXG4gIH1cblxuICBpZiAoc29ydE9wdGlvbnM/Lmxlbmd0aCA+IDApIHtcbiAgICBPYmplY3QuYXNzaWduKHF1ZXJ5UGFyYW1zLCB7XG4gICAgICBvcmRlckJ5RmllbGRzOiBzb3J0T3B0aW9ucy5tYXAoaXRlbSA9PiBgJHtpdGVtLmppbXVGaWVsZE5hbWV9ICR7aXRlbS5vcmRlcn1gKVxuICAgIH0pXG4gIH1cblxuICByZXR1cm4gcXVlcnlQYXJhbXNcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVDb3VudFF1ZXJ5IChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHF1ZXJ5UGFyYW1zOiBRdWVyeVBhcmFtc1xuKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3V0cHV0RFMubG9hZENvdW50KHF1ZXJ5UGFyYW1zLCB7IHdpZGdldElkLCByZWZyZXNoOiB0cnVlIH0pXG4gIHJldHVybiByZXN1bHQgIT0gbnVsbCA/IHJlc3VsdCA6IDBcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVRdWVyeSAoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4pOiBQcm9taXNlPHsgcmVjb3Jkcz86IERhdGFSZWNvcmRbXSwgZmllbGRzPzogc3RyaW5nW10gfT4ge1xuICBjb25zdCBwb3B1cEluZm8gPSBvdXRwdXREUy5nZXRQb3B1cEluZm8oKVxuXG4gIGNvbnN0IGxheWVyRGVmaW5pdGlvbiA9IG91dHB1dERTLmdldExheWVyRGVmaW5pdGlvbigpXG4gIGNvbnN0IGdldERlZmF1bHRGaWVsZEluZm9zID0gKCkgPT5cbiAgICBbXG4gICAgICB7IGZpZWxkTmFtZTogbGF5ZXJEZWZpbml0aW9uPy5vYmplY3RJZEZpZWxkID8/ICdvYmplY3RpZCcsIGxhYmVsOiAnT0JKRUNUSUQnLCB0b29sdGlwOiAnJywgdmlzaWJsZTogdHJ1ZSB9XG4gICAgXSBhcyBJRmllbGRJbmZvW11cbiAgY29uc3QgZmllbGRJbmZvcyA9ICgoZmllbGRJbmZvcykgPT4gKGZpZWxkSW5mb3MubGVuZ3RoID8gZmllbGRJbmZvcyA6IGdldERlZmF1bHRGaWVsZEluZm9zKCkpKShcbiAgICAocG9wdXBJbmZvPy5maWVsZEluZm9zIHx8IFtdKS5maWx0ZXIoKGkpID0+IGkudmlzaWJsZSlcbiAgKVxuICAvLyBjb25zdCBmaWVsZHMgPSBvdXRwdXREUy5nZXRTY2hlbWEoKT8uZmllbGRzXG4gIC8vIGxldCBzZWxlY3RlZEZpZWxkTmFtZXNcbiAgLy8gaWYgKHF1ZXJ5SXRlbS5yZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMpIHtcbiAgLy8gICBzZWxlY3RlZEZpZWxkTmFtZXMgPSBbXS5jb25jYXQocXVlcnlJdGVtLnJlc3VsdERpc3BsYXlGaWVsZHMsIHF1ZXJ5SXRlbS5yZXN1bHRUaXRsZUZpZWxkcylcbiAgLy8gfSBlbHNlIHtcbiAgLy8gICBzZWxlY3RlZEZpZWxkTmFtZXMgPSBmaWVsZEluZm9zLm1hcCgoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICAvLyB9XG4gIC8vIGNvbnN0IHNlbGVjdGVkRmllbGRKaW11TmFtZXMgPSBmaWVsZHNcbiAgLy8gICA/IE9iamVjdC5rZXlzKGZpZWxkcykuZmlsdGVyKChqaW11TmFtZSkgPT4gc2VsZWN0ZWRGaWVsZE5hbWVzLmluY2x1ZGVzKGZpZWxkc1tqaW11TmFtZV0ubmFtZSkpXG4gIC8vICAgOiBbXVxuICAvLyBvdXRwdXREUy5zZXRTZWxlY3RlZEZpZWxkcyhzZWxlY3RlZEZpZWxkSmltdU5hbWVzKVxuICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICBsZXQgcmVjb3JkcyA9IGF3YWl0IG91dHB1dERTLmxvYWQocXVlcnlQYXJhbXMsIHsgd2lkZ2V0SWQgfSlcbiAgY29uc3QgZmV0Y2hUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgXG4gIGlmIChyZWNvcmRzID09IG51bGwpIHtcbiAgICByZWNvcmRzID0gW11cbiAgfVxuICBjb25zdCBvcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBcbiAgY29uc3QgbGF5ZXJTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICBjb25zdCBsYXllck9iamVjdCA9IGF3YWl0IGdldExheWVyT2JqZWN0KG9yaWdpbkRzKVxuICBjb25zdCBsYXllclRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGxheWVyU3RhcnRUaW1lXG5cbiAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgIGV2ZW50OiAncXVlcnktY29tcGxldGUnLFxuICAgIGZldGNoVGltZTogTWF0aC5yb3VuZChmZXRjaFRpbWUpLFxuICAgIGxheWVyVGltZTogTWF0aC5yb3VuZChsYXllclRpbWUpLFxuICAgIHRvdGFsVGltZTogTWF0aC5yb3VuZChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSksXG4gICAgcmVjb3JkQ291bnQ6IHJlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICByZWNvcmRzLmZvckVhY2goKHJlY29yZCkgPT4ge1xuICAgIGNvbnN0IGZlYXR1cmUgPSAocmVjb3JkIGFzIGFueSkuZmVhdHVyZVxuICAgIGlmIChsYXllck9iamVjdCkge1xuICAgICAgZmVhdHVyZS5zb3VyY2VMYXllciA9IChsYXllck9iamVjdCBhcyBhbnkpLmFzc29jaWF0ZWRMYXllciB8fCBsYXllck9iamVjdFxuICAgIH1cbiAgICBmZWF0dXJlLmxheWVyID0gZmVhdHVyZS5zb3VyY2VMYXllclxuICB9KVxuICBjb25zdCBxdWVyeVJlc3VsdCA9IHtcbiAgICByZWNvcmRzLFxuICAgIGZpZWxkczogZmllbGRJbmZvcy5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgfVxuXG4gIC8vIHB1Ymxpc2ggbWVzc2FnZVxuICBjb25zdCBkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSA9IG5ldyBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgUmVjb3JkU2V0Q2hhbmdlVHlwZS5DcmVhdGVVcGRhdGUsIFt7XG4gICAgcmVjb3Jkczogb3V0cHV0RFMuZ2V0QWxsTG9hZGVkUmVjb3JkcygpLFxuICAgIGZpZWxkczogcXVlcnlSZXN1bHQuZmllbGRzLFxuICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgIG5hbWU6IG91dHB1dERTLmlkLFxuICAgIGxhYmVsOiBvdXRwdXREUy5nZXRMYWJlbCgpXG4gIH1dKVxuICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKVxuXG4gIHJldHVybiBxdWVyeVJlc3VsdFxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRMYXllck9iamVjdCAoZGF0YVNvdXJjZTogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSkge1xuICBjb25zdCBsYXllck9iamVjdCA9IGF3YWl0IGRhdGFTb3VyY2UuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpIGFzIF9fZXNyaS5MYXllclxuICAvLyBsYXllck9iamVjdCBtYXkgYmUgdW5kZWZpbmVkIGlmIHRoZSBkYXRhIHNvdXJjZSBpcyBhZGRlZCBieSBVUkxcbiAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgYXdhaXQgbGF5ZXJPYmplY3QubG9hZCgpXG4gIH1cbiAgcmV0dXJuIGxheWVyT2JqZWN0XG59XG5cblxuIiwiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgcmVzdWx0cyBhY2N1bXVsYXRpb24gaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogSGFuZGxlcyBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMgZm9yIGFjY3VtdWxhdGluZyBxdWVyeSByZXN1bHRzLlxuICovXG5cbmltcG9ydCB0eXBlIHsgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQsIERhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBEYXRhU291cmNlTWFuYWdlciwgRGF0YVNvdXJjZVN0YXR1cywgTWVzc2FnZU1hbmFnZXIsIERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLCBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyByZW1vdmVIaWdobGlnaHRHcmFwaGljcyB9IGZyb20gJy4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogR2VuZXJhdGVzIGEgY29tcG9zaXRlIGtleSBmb3IgYSByZWNvcmQgdGhhdCBpbmNsdWRlcyBib3RoIG9yaWdpbiBkYXRhIHNvdXJjZSBJRCBhbmQgb2JqZWN0SWQuXG4gKiBUaGlzIGVuc3VyZXMgdW5pcXVlbmVzcyBhY3Jvc3MgZGlmZmVyZW50IGxheWVycyB0aGF0IG1heSBoYXZlIHRoZSBzYW1lIG9iamVjdElkLlxuICogXG4gKiBAcGFyYW0gcmVjb3JkIC0gVGhlIGZlYXR1cmUgZGF0YSByZWNvcmRcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgY29udGFpbmluZyB0aGUgcmVjb3JkXG4gKiBAcmV0dXJucyBDb21wb3NpdGUga2V5IHN0cmluZzogYCR7b3JpZ2luRFNJZH1fJHtvYmplY3RJZH1gXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWNvcmRLZXkoXG4gIHJlY29yZDogRmVhdHVyZURhdGFSZWNvcmQsXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiBzdHJpbmcge1xuICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIGNvbnN0IG9yaWdpbkRTSWQgPSBvcmlnaW5EUz8uaWQgfHwgb3V0cHV0RFMuaWQgLy8gRmFsbGJhY2sgdG8gb3V0cHV0RFMgaWYgbm8gb3JpZ2luXG4gIGNvbnN0IG9iamVjdElkID0gcmVjb3JkLmdldElkKClcbiAgY29uc3Qga2V5ID0gYCR7b3JpZ2luRFNJZH1fJHtvYmplY3RJZH1gXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlY29yZC1rZXktZ2VuZXJhdGVkJyxcbiAgICBvcmlnaW5EU0lkLFxuICAgIG9iamVjdElkLFxuICAgIGtleSxcbiAgICBoYXNPcmlnaW5EUzogISFvcmlnaW5EU1xuICB9KVxuICBcbiAgcmV0dXJuIGtleVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZSBmb3Igc3RvcmluZyBtZXJnZWQgcXVlcnkgcmVzdWx0cy5cbiAqIFRoaXMgZGF0YSBzb3VyY2UgaXMgd2lkZ2V0LWxldmVsIGFuZCBwZXJzaXN0cyBhY3Jvc3MgbXVsdGlwbGUgcXVlcmllcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG9yaWdpbkRTIC0gVGhlIG9yaWdpbiBkYXRhIHNvdXJjZSB0byB1c2UgYXMgdGhlIGJhc2VcbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFjY3VtdWxhdGVkUmVzdWx0c0RhdGFTb3VyY2UoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiBQcm9taXNlPEZlYXR1cmVMYXllckRhdGFTb3VyY2U+IHtcbiAgY29uc3QgYWNjdW11bGF0ZWREU0lkID0gYCR7d2lkZ2V0SWR9X2FjY3VtdWxhdGVkX3Jlc3VsdHNgXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2NyZWF0aW5nLWFjY3VtdWxhdGVkLWRzJyxcbiAgICB3aWRnZXRJZCxcbiAgICBhY2N1bXVsYXRlZERTSWQsXG4gICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWRcbiAgfSlcbiAgXG4gIC8vIENoZWNrIGlmIGRhdGEgc291cmNlIGFscmVhZHkgZXhpc3RzXG4gIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgbGV0IGFjY3VtdWxhdGVkRFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShhY2N1bXVsYXRlZERTSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgXG4gIGlmIChhY2N1bXVsYXRlZERTKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2FjY3VtdWxhdGVkLWRzLWFscmVhZHktZXhpc3RzJyxcbiAgICAgIGFjY3VtdWxhdGVkRFNJZFxuICAgIH0pXG4gICAgcmV0dXJuIGFjY3VtdWxhdGVkRFNcbiAgfVxuICBcbiAgLy8gR2V0IG9yaWdpbiBkYXRhIHNvdXJjZSBKU09OIHRvIGNyZWF0ZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAgY29uc3Qgb3JpZ2luRGF0YVNvdXJjZUpzb24gPSBvcmlnaW5EUy5nZXREYXRhU291cmNlSnNvbigpXG4gIFxuICAvLyBDcmVhdGUgb3V0cHV0IGRhdGEgc291cmNlIEpTT04gc2ltaWxhciB0byBob3cgcXVlcnkgaXRlbXMgY3JlYXRlIG91dHB1dCBEU1xuICBjb25zdCBvdXRwdXREYXRhU291cmNlSnNvbiA9IHtcbiAgICBpZDogYWNjdW11bGF0ZWREU0lkLFxuICAgIGxhYmVsOiAnQWNjdW11bGF0ZWQgUmVzdWx0cycsXG4gICAgdHlwZTogb3JpZ2luRGF0YVNvdXJjZUpzb24/LnR5cGUsXG4gICAgZ2VvbWV0cnlUeXBlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8uZ2VvbWV0cnlUeXBlLFxuICAgIHVybDogb3JpZ2luRGF0YVNvdXJjZUpzb24/LnVybCxcbiAgICBpdGVtSWQ6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5pdGVtSWQsXG4gICAgcG9ydGFsVXJsOiBvcmlnaW5EYXRhU291cmNlSnNvbj8ucG9ydGFsVXJsLFxuICAgIG9yaWdpbkRhdGFTb3VyY2VzOiBbe1xuICAgICAgZGF0YVNvdXJjZUlkOiBvcmlnaW5EUy5pZCxcbiAgICAgIG1haW5EYXRhU291cmNlSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgcm9vdERhdGFTb3VyY2VJZDogb3JpZ2luRFMuaWRcbiAgICB9XSxcbiAgICBsYXllcklkOiBvcmlnaW5EYXRhU291cmNlSnNvbj8ubGF5ZXJJZCxcbiAgICBpc0RhdGFJbkRhdGFTb3VyY2VJbnN0YW5jZTogb3JpZ2luRGF0YVNvdXJjZUpzb24/LmlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlLFxuICAgIGlzT3V0cHV0RnJvbVdpZGdldDogdHJ1ZVxuICB9XG4gIFxuICAvLyBDcmVhdGUgdGhlIGRhdGEgc291cmNlIHVzaW5nIERhdGFTb3VyY2VNYW5hZ2VyXG4gIC8vIE5vdGU6IFRoaXMgZm9sbG93cyB0aGUgcGF0dGVybiBmcm9tIHNldHRpbmcudHN4IGZvciBjcmVhdGluZyBvdXRwdXQgZGF0YSBzb3VyY2VzXG4gIGFjY3VtdWxhdGVkRFMgPSBkc01hbmFnZXIuY3JlYXRlRGF0YVNvdXJjZUJ5RGF0YVNvdXJjZUpzb24ob3V0cHV0RGF0YVNvdXJjZUpzb24pIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgXG4gIC8vIFNldCBpbml0aWFsIHN0YXR1c1xuICBhY2N1bXVsYXRlZERTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBhY2N1bXVsYXRlZERTLnNldENvdW50U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2FjY3VtdWxhdGVkLWRzLWNyZWF0ZWQnLFxuICAgIGFjY3VtdWxhdGVkRFNJZCxcbiAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICBzdGF0dXM6IGFjY3VtdWxhdGVkRFMuZ2V0U3RhdHVzKClcbiAgfSlcbiAgXG4gIHJldHVybiBhY2N1bXVsYXRlZERTXG59XG5cbi8qKlxuICogTWVyZ2VzIG5ldyBxdWVyeSByZXN1bHRzIHdpdGggZXhpc3RpbmcgcmVjb3Jkcy5cbiAqIERlZHVwbGljYXRlcyByZWNvcmRzIHVzaW5nIGNvbXBvc2l0ZSBrZXlzIChvcmlnaW5EU0lkX29iamVjdElkKS5cbiAqIFxuICogVGhpcyBmdW5jdGlvbiBtZXJnZXMgbmV3IHJlY29yZHMgd2l0aCBleGlzdGluZyByZWNvcmRzIHRoYXQgd2VyZSBjYXB0dXJlZFxuICogYmVmb3JlIHRoZSBxdWVyeSBleGVjdXRlZC4gVGhlIGNhbGxlciBpcyByZXNwb25zaWJsZSBmb3Igc3RvcmluZyB0aGUgbWVyZ2VkXG4gKiByZWNvcmRzICh0eXBpY2FsbHkgaW4gcmVjb3Jkc1JlZiBvciBzdGF0ZSkuXG4gKiBcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIGtleSBnZW5lcmF0aW9uKVxuICogQHBhcmFtIG5ld1JlY29yZHMgLSBOZXcgcmVjb3JkcyB0byBtZXJnZSBpblxuICogQHBhcmFtIGV4aXN0aW5nUmVjb3JkcyAtIEV4aXN0aW5nIHJlY29yZHMgY2FwdHVyZWQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbiAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIGVtcHR5IGFycmF5KVxuICogQHJldHVybnMgQXJyYXkgb2YgYWxsIG1lcmdlZCByZWNvcmRzIChleGlzdGluZyArIG5ldyB1bmlxdWUgcmVjb3JkcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIG5ld1JlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIGV4aXN0aW5nUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4pOiBGZWF0dXJlRGF0YVJlY29yZFtdIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdtZXJnaW5nLXJlc3VsdHMtc3RhcnQnLFxuICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgIGV4aXN0aW5nUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHMubGVuZ3RoLFxuICAgIG5ld1JlY29yZHNDb3VudDogbmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIEJ1aWxkIFNldCBvZiBleGlzdGluZyByZWNvcmQga2V5cyBmb3IgZmFzdCBsb29rdXBcbiAgY29uc3QgZXhpc3RpbmdLZXlzID0gbmV3IFNldChcbiAgICBleGlzdGluZ1JlY29yZHMubWFwKHJlY29yZCA9PiBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUykpXG4gIClcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnZXhpc3RpbmctcmVjb3Jkcy1jaGVjaycsXG4gICAgZXhpc3RpbmdSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgZXhpc3RpbmdLZXlzQ291bnQ6IGV4aXN0aW5nS2V5cy5zaXplXG4gIH0pXG4gIFxuICAvLyBGaWx0ZXIgbmV3IHJlY29yZHMgdG8gb25seSBpbmNsdWRlIHRob3NlIG5vdCBhbHJlYWR5IGluIG91dHB1dCBEU1xuICBjb25zdCB1bmlxdWVOZXdSZWNvcmRzID0gbmV3UmVjb3Jkcy5maWx0ZXIocmVjb3JkID0+IHtcbiAgICBjb25zdCBrZXkgPSBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUylcbiAgICBjb25zdCBpc0R1cGxpY2F0ZSA9IGV4aXN0aW5nS2V5cy5oYXMoa2V5KVxuICAgIFxuICAgIGlmIChpc0R1cGxpY2F0ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnZHVwbGljYXRlLXJlY29yZC1za2lwcGVkJyxcbiAgICAgICAga2V5LFxuICAgICAgICBvYmplY3RJZDogcmVjb3JkLmdldElkKClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIHJldHVybiAhaXNEdXBsaWNhdGVcbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnZGVkdXBsaWNhdGlvbi1jb21wbGV0ZScsXG4gICAgbmV3UmVjb3Jkc0NvdW50OiBuZXdSZWNvcmRzLmxlbmd0aCxcbiAgICB1bmlxdWVOZXdSZWNvcmRzQ291bnQ6IHVuaXF1ZU5ld1JlY29yZHMubGVuZ3RoLFxuICAgIGR1cGxpY2F0ZXNTa2lwcGVkOiBuZXdSZWNvcmRzLmxlbmd0aCAtIHVuaXF1ZU5ld1JlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBNZXJnZSByZWNvcmRzXG4gIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBbLi4uZXhpc3RpbmdSZWNvcmRzLCAuLi51bmlxdWVOZXdSZWNvcmRzXVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdtZXJnZS1jb21wbGV0ZScsXG4gICAgdG90YWxSZWNvcmRzQWZ0ZXJNZXJnZTogbWVyZ2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgZXhpc3RpbmdDb3VudDogZXhpc3RpbmdSZWNvcmRzLmxlbmd0aCxcbiAgICBuZXdVbmlxdWVDb3VudDogdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIHJldHVybiBtZXJnZWRSZWNvcmRzXG59XG5cbi8qKlxuICogUmVtb3ZlcyBtYXRjaGluZyByZWNvcmRzIGZyb20gd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gKiBNYXRjaGVzIHJlY29yZHMgdXNpbmcgY29tcG9zaXRlIGtleXMgKG9yaWdpbkRTSWRfb2JqZWN0SWQpLlxuICogXG4gKiBUaGlzIGZ1bmN0aW9uIHJlbW92ZXMgcmVjb3JkcyBmcm9tIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgdGhhdCB3ZXJlIGNhcHR1cmVkXG4gKiBiZWZvcmUgdGhlIHF1ZXJ5IGV4ZWN1dGVkLiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciBzdG9yaW5nIHRoZSByZW1haW5pbmdcbiAqIHJlY29yZHMgKHR5cGljYWxseSBpbiByZWNvcmRzUmVmIG9yIHN0YXRlKS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKiBAcGFyYW0gcmVjb3Jkc1RvUmVtb3ZlIC0gUmVjb3JkcyB0byByZW1vdmUgKGZyb20gcXVlcnkgcmVzdWx0cylcbiAqIEBwYXJhbSBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3JkcyAtIEV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgY2FwdHVyZWQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbiAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIGVtcHR5IGFycmF5KVxuICogQHJldHVybnMgQXJyYXkgb2YgcmVtYWluaW5nIHJlY29yZHMgYWZ0ZXIgcmVtb3ZhbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHJlY29yZHNUb1JlbW92ZTogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuKTogRmVhdHVyZURhdGFSZWNvcmRbXSB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZpbmctcmVzdWx0cy1zdGFydCcsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBJZiBubyBhY2N1bXVsYXRlZCByZWNvcmRzLCBub3RoaW5nIHRvIHJlbW92ZVxuICBpZiAoZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLWFjY3VtdWxhdGVkLXJlY29yZHMtdG8tcmVtb3ZlJyxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkXG4gICAgfSlcbiAgICByZXR1cm4gW11cbiAgfVxuICBcbiAgLy8gSWYgbm8gcmVjb3JkcyB0byByZW1vdmUsIHJldHVybiBleGlzdGluZyByZWNvcmRzIHVuY2hhbmdlZFxuICBpZiAocmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICduby1yZWNvcmRzLXRvLXJlbW92ZScsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgIH0pXG4gICAgcmV0dXJuIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzXG4gIH1cbiAgXG4gIC8vIEJ1aWxkIFNldCBvZiBrZXlzIHRvIHJlbW92ZSBmb3IgZmFzdCBsb29rdXBcbiAgY29uc3QgcmVtb3ZlS2V5cyA9IG5ldyBTZXQoXG4gICAgcmVjb3Jkc1RvUmVtb3ZlLm1hcChyZWNvcmQgPT4gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpKVxuICApXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92ZS1rZXlzLWJ1aWx0JyxcbiAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgcmVtb3ZlS2V5c0NvdW50OiByZW1vdmVLZXlzLnNpemVcbiAgfSlcbiAgXG4gIC8vIEZpbHRlciBvdXQgcmVjb3JkcyB0aGF0IG1hdGNoIGtleXMgdG8gcmVtb3ZlXG4gIGNvbnN0IHJlbWFpbmluZ1JlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICBjb25zdCByZW1vdmVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gIFxuICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgY29uc3Qga2V5ID0gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpXG4gICAgY29uc3Qgc2hvdWxkUmVtb3ZlID0gcmVtb3ZlS2V5cy5oYXMoa2V5KVxuICAgIFxuICAgIGlmIChzaG91bGRSZW1vdmUpIHtcbiAgICAgIHJlbW92ZWRSZWNvcmRzLnB1c2gocmVjb3JkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVjb3JkLW1hcmtlZC1mb3ItcmVtb3ZhbCcsXG4gICAgICAgIGtleSxcbiAgICAgICAgb2JqZWN0SWQ6IHJlY29yZC5nZXRJZCgpLFxuICAgICAgICBvcmlnaW5EU0lkOiAocmVjb3JkLmdldERhdGFTb3VyY2U/LigpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UpPy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0/LmlkIHx8ICd1bmtub3duJ1xuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtYWluaW5nUmVjb3Jkcy5wdXNoKHJlY29yZClcbiAgICB9XG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92YWwtY29tcGxldGUnLFxuICAgIHJlY29yZHNSZW1vdmVkOiByZW1vdmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICBtYXRjaGVkUmVjb3Jkc0NvdW50OiByZW1vdmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgdW5tYXRjaGVkUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoIC0gcmVtb3ZlZFJlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICByZXR1cm4gcmVtYWluaW5nUmVjb3Jkc1xufVxuXG4vKipcbiAqIFJlbW92ZXMgcmVjb3JkcyBmcm9tIG9yaWdpbiBkYXRhIHNvdXJjZSBzZWxlY3Rpb25zLlxuICogR3JvdXBzIHJlY29yZHMgYnkgdGhlaXIgb3JpZ2luIGRhdGEgc291cmNlIGFuZCB1cGRhdGVzIGVhY2ggb3JpZ2luIERTJ3Mgc2VsZWN0aW9uIHNlcGFyYXRlbHkuXG4gKiBUaGlzIGVuc3VyZXMgbWFwIHNlbGVjdGlvbiBpcyB1cGRhdGVkIGNvcnJlY3RseSB3aGVuIHJlY29yZHMgY29tZSBmcm9tIG11bHRpcGxlIG9yaWdpbiBsYXllcnMuXG4gKiBBbHNvIHJlbW92ZXMgZ3JhcGhpY3MgZnJvbSBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmcuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSUQgZm9yIHB1Ymxpc2hpbmcgbWVzc2FnZXNcbiAqIEBwYXJhbSByZWNvcmRzVG9SZW1vdmUgLSBSZWNvcmRzIHRvIHJlbW92ZSBmcm9tIHNlbGVjdGlvblxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKiBAcGFyYW0gdXNlR3JhcGhpY3NMYXllciAtIFdoZXRoZXIgdG8gcmVtb3ZlIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXIgKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIGdyYXBoaWNzTGF5ZXIgLSBHcmFwaGljcyBsYXllciBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICByZWNvcmRzVG9SZW1vdmU6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICB1c2VHcmFwaGljc0xheWVyPzogYm9vbGVhbixcbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4pOiB2b2lkIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmluZy1yZWNvcmRzLWZyb20tb3JpZ2luLXNlbGVjdGlvbnMtc3RhcnQnLFxuICAgIHdpZGdldElkLFxuICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoLFxuICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgIHVzZUdyYXBoaWNzTGF5ZXI6ICEhdXNlR3JhcGhpY3NMYXllcixcbiAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXJcbiAgfSlcbiAgXG4gIGlmIChyZWNvcmRzVG9SZW1vdmUubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLXJlY29yZHMtdG8tcmVtb3ZlLWZyb20tc2VsZWN0aW9uJyxcbiAgICAgIHdpZGdldElkXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuICBcbiAgLy8gUmVtb3ZlIGZyb20gZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gIGlmICh1c2VHcmFwaGljc0xheWVyICYmIGdyYXBoaWNzTGF5ZXIpIHtcbiAgICBjb25zdCByZWNvcmRJZHNUb1JlbW92ZSA9IHJlY29yZHNUb1JlbW92ZS5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmluZy1ncmFwaGljcy1mcm9tLWxheWVyJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZFxuICAgIH0pXG4gICAgcmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MoZ3JhcGhpY3NMYXllciwgcmVjb3JkSWRzVG9SZW1vdmUpXG4gIH1cbiAgXG4gIC8vIEdyb3VwIHJlY29yZHMgYnkgdGhlaXIgb3JpZ2luIGRhdGEgc291cmNlXG4gIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gIFxuICByZWNvcmRzVG9SZW1vdmUuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgIGNvbnN0IHJlY29yZERTID0gcmVjb3JkLmdldERhdGFTb3VyY2U/LigpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBsZXQgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsID0gbnVsbFxuICAgIFxuICAgIGlmIChyZWNvcmREUykge1xuICAgICAgb3JpZ2luRFMgPSByZWNvcmREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCByZWNvcmREU1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjazogdHJ5IHRvIGdldCBvcmlnaW4gZnJvbSBvdXRwdXREU1xuICAgICAgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBudWxsXG4gICAgfVxuICAgIFxuICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgaWYgKCFyZWNvcmRzQnlPcmlnaW5EUy5oYXMob3JpZ2luRFMpKSB7XG4gICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICB9XG4gICAgICByZWNvcmRzQnlPcmlnaW5EUy5nZXQob3JpZ2luRFMpIS5wdXNoKHJlY29yZClcbiAgICB9XG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlY29yZHMtZ3JvdXBlZC1ieS1vcmlnaW4nLFxuICAgIHdpZGdldElkLFxuICAgIG9yaWdpbkRTQ291bnQ6IHJlY29yZHNCeU9yaWdpbkRTLnNpemUsXG4gICAgcmVjb3Jkc0J5T3JpZ2luRFM6IEFycmF5LmZyb20ocmVjb3Jkc0J5T3JpZ2luRFMuZW50cmllcygpKS5tYXAoKFtkcywgcmVjb3Jkc10pID0+ICh7XG4gICAgICBvcmlnaW5EU0lkOiBkcy5pZCxcbiAgICAgIHJlY29yZENvdW50OiByZWNvcmRzLmxlbmd0aFxuICAgIH0pKVxuICB9KVxuICBcbiAgLy8gRm9yIGVhY2ggb3JpZ2luIERTLCBnZXQgY3VycmVudCBzZWxlY3Rpb24gYW5kIHJlbW92ZSBtYXRjaGluZyByZWNvcmRzXG4gIHJlY29yZHNCeU9yaWdpbkRTLmZvckVhY2goKHJlY29yZHNUb1JlbW92ZUZvck9yaWdpbiwgb3JpZ2luRFMpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGN1cnJlbnQgc2VsZWN0ZWQgcmVjb3JkcyBmcm9tIHRoaXMgb3JpZ2luIERTXG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgfHwgW11cbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncHJvY2Vzc2luZy1vcmlnaW4tZHMtcmVtb3ZhbCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgY3VycmVudFNlbGVjdGVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlRm9yT3JpZ2luLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQnVpbGQgU2V0IG9mIElEcyB0byByZW1vdmUgZm9yIGZhc3QgbG9va3VwXG4gICAgICBjb25zdCBpZHNUb1JlbW92ZSA9IG5ldyBTZXQoXG4gICAgICAgIHJlY29yZHNUb1JlbW92ZUZvck9yaWdpbi5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBGaWx0ZXIgb3V0IHJlY29yZHMgdGhhdCBtYXRjaCBJRHMgdG8gcmVtb3ZlXG4gICAgICBjb25zdCByZW1haW5pbmdSZWNvcmRzID0gY3VycmVudFNlbGVjdGVkUmVjb3Jkcy5maWx0ZXIocmVjb3JkID0+IHtcbiAgICAgICAgY29uc3QgcmVjb3JkSWQgPSByZWNvcmQuZ2V0SWQoKVxuICAgICAgICByZXR1cm4gIWlkc1RvUmVtb3ZlLmhhcyhyZWNvcmRJZClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IHJlbWFpbmluZ0lkcyA9IHJlbWFpbmluZ1JlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnb3JpZ2luLWRzLXJlbW92YWwtZmlsdGVyZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHJlbW92ZWRDb3VudDogY3VycmVudFNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggLSByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVtYWluaW5nQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgc2VsZWN0aW9uIGluIG9yaWdpbiBEU1xuICAgICAgaWYgKHR5cGVvZiBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlbWFpbmluZ0lkcywgcmVtYWluaW5nUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQdWJsaXNoIHNlbGVjdGlvbiBjaGFuZ2UgbWVzc2FnZSBmb3IgdGhpcyBvcmlnaW4gRFNcbiAgICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlbWFpbmluZ1JlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSwgW29yaWdpbkRTLmlkXSlcbiAgICAgIClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnb3JpZ2luLWRzLXNlbGVjdGlvbi11cGRhdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICBtZXNzYWdlUHVibGlzaGVkOiB0cnVlXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdvcmlnaW4tZHMtcmVtb3ZhbC1lcnJvcicsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgIH0pXG4gICAgfVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmluZy1yZWNvcmRzLWZyb20tb3JpZ2luLXNlbGVjdGlvbnMtY29tcGxldGUnLFxuICAgIHdpZGdldElkLFxuICAgIG9yaWdpbkRTQ291bnQ6IHJlY29yZHNCeU9yaWdpbkRTLnNpemUsXG4gICAgdG90YWxSZWNvcmRzUmVtb3ZlZDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aFxuICB9KVxufVxuXG4vKipcbiAqIENsZWFycyBhbGwgcmVjb3JkcyBmcm9tIHRoZSBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlLlxuICogXG4gKiBAcGFyYW0gYWNjdW11bGF0ZWREUyAtIFRoZSBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlIHRvIGNsZWFyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckFjY3VtdWxhdGVkUmVzdWx0cyhcbiAgYWNjdW11bGF0ZWREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuKTogdm9pZCB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnY2xlYXJpbmctYWNjdW11bGF0ZWQtcmVzdWx0cycsXG4gICAgYWNjdW11bGF0ZWREU0lkOiBhY2N1bXVsYXRlZERTLmlkXG4gIH0pXG4gIFxuICAvLyBTZXQgc3RhdHVzIHRvIE5vdFJlYWR5IHRvIGNsZWFyIHJlY29yZHNcbiAgYWNjdW11bGF0ZWREUy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgYWNjdW11bGF0ZWREUy5zZXRDb3VudFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBcbiAgLy8gQ2xlYXIgYW55IGxvYWRlZCByZWNvcmRzIGlmIHBvc3NpYmxlXG4gIC8vIE5vdGU6IE1heSBuZWVkIHRvIHVzZSBEYXRhU291cmNlTWFuYWdlciBtZXRob2RzIGRlcGVuZGluZyBvbiBFeEIgQVBJXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2FjY3VtdWxhdGVkLXJlc3VsdHMtY2xlYXJlZCcsXG4gICAgYWNjdW11bGF0ZWREU0lkOiBhY2N1bXVsYXRlZERTLmlkXG4gIH0pXG59XG5cbiIsIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGZlYXR1cmUgc2VsZWN0aW9uIGluIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIENvbnNvbGlkYXRlcyByZXBlYXRlZCBzZWxlY3Rpb24gbG9naWMgdG8gZm9sbG93IERSWSBwcmluY2lwbGVzLlxuICovXG5cbmltcG9ydCB0eXBlIHsgRGF0YVNvdXJjZSwgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgYWRkSGlnaGxpZ2h0R3JhcGhpY3MgYXMgYWRkR3JhcGhpY3NMYXllckdyYXBoaWNzLCBjbGVhckdyYXBoaWNzTGF5ZXIgfSBmcm9tICcuL2dyYXBoaWNzLWxheWVyLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IHR5cGUgeyBFdmVudE1hbmFnZXIgfSBmcm9tICcuL2hvb2tzL3VzZS1ldmVudC1oYW5kbGluZydcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgUXVlcnlTaW1wbGUgdG8gbm90aWZ5IFdpZGdldCBvZiBzZWxlY3Rpb24gY2hhbmdlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCA9ICdxdWVyeXNpbXBsZS1zZWxlY3Rpb24tY2hhbmdlZCdcblxuLyoqXG4gKiBEaXNwYXRjaGVzIGEgY3VzdG9tIHNlbGVjdGlvbiBldmVudCB0byB0aGUgd2luZG93IHNvIHRoZSBtYWluIFdpZGdldCBjYW4gdHJhY2sgc3RhdGUuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiBzZWxlY3RlZCByZWNvcmQgSURzXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gcXVlcnlJdGVtQ29uZmlnSWQgLSBUaGUgY29uZmlnIElEIG9mIHRoZSBxdWVyeSB0aGF0IHByb2R1Y2VkIHRoZXNlIHJlc3VsdHNcbiAqIEBwYXJhbSBldmVudE1hbmFnZXIgLSBPcHRpb25hbCBFdmVudE1hbmFnZXIgaW5zdGFuY2UgZm9yIGNvbXBhcmlzb24gbG9nZ2luZyAoQ2h1bmsgNy4xKVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzcGF0Y2hTZWxlY3Rpb25FdmVudChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcmVjb3JkSWRzOiBzdHJpbmdbXSxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UsXG4gIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcsXG4gIGV2ZW50TWFuYWdlcj86IEV2ZW50TWFuYWdlclxuKTogdm9pZCB7XG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgY29uc3QgZGF0YVNvdXJjZUlkID0gb3JpZ2luRFM/LmlkXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgZXZlbnQ6ICdkaXNwYXRjaFNlbGVjdGlvbkV2ZW50JyxcbiAgICB3aWRnZXRJZCxcbiAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICBxdWVyeUl0ZW1Db25maWdJZFxuICB9KVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gT0xEIElNUExFTUVOVEFUSU9OIChwYXJhbGxlbCBleGVjdXRpb24pIC0gQ2h1bmsgNy4xXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgY29uc3Qgc2VsZWN0aW9uRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB7XG4gICAgZGV0YWlsOiB7XG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlY29yZElkcyxcbiAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWRcbiAgICB9LFxuICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgY2FuY2VsYWJsZTogdHJ1ZVxuICB9KVxuICB3aW5kb3cuZGlzcGF0Y2hFdmVudChzZWxlY3Rpb25FdmVudClcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnRVZFTlRTJywge1xuICAgIGV2ZW50OiAnb2xkLWltcGxlbWVudGF0aW9uLXNlbGVjdGlvbi1ldmVudC1kaXNwYXRjaGVkJyxcbiAgICB3aWRnZXRJZCxcbiAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICBkYXRhU291cmNlSWQsXG4gICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgcXVlcnlJdGVtQ29uZmlnSWQsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvLyBORVcgSU1QTEVNRU5UQVRJT04gKHBhcmFsbGVsIGV4ZWN1dGlvbikgLSBDaHVuayA3LjFcbiAgaWYgKGV2ZW50TWFuYWdlcikge1xuICAgIGV2ZW50TWFuYWdlci5kaXNwYXRjaFNlbGVjdGlvbkV2ZW50KHdpZGdldElkLCByZWNvcmRJZHMsIGRhdGFTb3VyY2VJZCwgb3V0cHV0RFMuaWQsIHF1ZXJ5SXRlbUNvbmZpZ0lkKVxuICB9XG5cbiAgLy8gQ09NUEFSSVNPTiBMT0dHSU5HXG4gIGlmIChldmVudE1hbmFnZXIpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTctQ09NUEFSRScsIHtcbiAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWV2ZW50LWRpc3BhdGNoLWNvbXBhcmlzb24nLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBvbGRJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICBtZXRob2Q6ICd3aW5kb3cuZGlzcGF0Y2hFdmVudCcsXG4gICAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICBkYXRhU291cmNlSWQsXG4gICAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZFxuICAgICAgfSxcbiAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgIG1ldGhvZDogJ0V2ZW50TWFuYWdlci5kaXNwYXRjaFNlbGVjdGlvbkV2ZW50JyxcbiAgICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgIGRhdGFTb3VyY2VJZFxuICAgICAgfSxcbiAgICAgIG1hdGNoOiB0cnVlLCAvLyBCb3RoIGRpc3BhdGNoIHRoZSBzYW1lIGV2ZW50XG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG59XG5cbi8qKlxuICogR2V0cyB0aGUgb3JpZ2luIGRhdGEgc291cmNlIGZyb20gYW4gb3V0cHV0IGRhdGEgc291cmNlLlxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHJldHVybnMgVGhlIG9yaWdpbiBkYXRhIHNvdXJjZSwgb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcmlnaW5EYXRhU291cmNlKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWRcbik6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsIHtcbiAgaWYgKCFvdXRwdXREUykgcmV0dXJuIG51bGxcbiAgXG4gIC8vIFRyeSB0byBnZXQgb3JpZ2luIGRhdGEgc291cmNlc1xuICBjb25zdCBvcmlnaW5EYXRhU291cmNlcyA9IHR5cGVvZiBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcyA9PT0gJ2Z1bmN0aW9uJyBcbiAgICA/IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCkgXG4gICAgOiBbXVxuICAgIFxuICBpZiAob3JpZ2luRGF0YVNvdXJjZXMgJiYgb3JpZ2luRGF0YVNvdXJjZXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBvcmlnaW5EYXRhU291cmNlc1swXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIH1cbiAgXG4gIC8vIElmIGl0IGRvZXNuJ3QgaGF2ZSBvcmlnaW4gZGF0YSBzb3VyY2VzLCBpdCBtaWdodCBhbHJlYWR5IGJlIGFuIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAvLyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHNob3VsZCBoYXZlIGEgJ2xheWVyJyBwcm9wZXJ0eSBvciAnZ2V0TGF5ZXInIG1ldGhvZFxuICBpZiAoKG91dHB1dERTIGFzIGFueSkubGF5ZXIgfHwgKG91dHB1dERTIGFzIGFueSkuZ2V0TGF5ZXIgfHwgKG91dHB1dERTIGFzIGFueSkudHlwZSA9PT0gJ0ZlYXR1cmVMYXllcicpIHtcbiAgICByZXR1cm4gb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICB9XG4gIFxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIFNlbGVjdHMgcmVjb3JkcyBpbiBib3RoIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIFRoaXMgaXMgdGhlIHN0YW5kYXJkIHBhdHRlcm4gdXNlZCB0aHJvdWdob3V0IHRoZSB3aWRnZXQgZm9yIHNlbGVjdGlvbi5cbiAqIE9wdGlvbmFsbHkgdXNlcyBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHJlY29yZCBJRHMgdG8gc2VsZWN0XG4gKiBAcGFyYW0gcmVjb3JkcyAtIE9wdGlvbmFsIGFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgZm9yIHByb3BlciBoaWdobGlnaHRpbmdcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byB1c2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKiBAcGFyYW0gbWFwVmlldyAtIE1hcCB2aWV3IGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICByZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgXG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgXG4gIC8vIElmIHVzaW5nIGdyYXBoaWNzIGxheWVyLCBhZGQgZ3JhcGhpY3MgZm9yIGhpZ2hsaWdodGluZ1xuICBpZiAodXNlR3JhcGhpY3NMYXllciAmJiBncmFwaGljc0xheWVyICYmIG1hcFZpZXcgJiYgcmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcy11c2luZy1ncmFwaGljcy1sYXllcicsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGF3YWl0IGFkZEdyYXBoaWNzTGF5ZXJHcmFwaGljcyhncmFwaGljc0xheWVyLCByZWNvcmRzLCBtYXBWaWV3KVxuICAgIFxuICAgIC8vIFN0aWxsIHNlbGVjdCBpbiBkYXRhIHNvdXJjZSBmb3Igc3RhdGUgbWFuYWdlbWVudCAoYnV0IGxheWVyIHNlbGVjdGlvbiB3b24ndCBzaG93IGlmIGxheWVyIGlzIG9mZilcbiAgICBpZiAob3JpZ2luRFMgJiYgdHlwZW9mIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgcmVjb3JkcylcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gT3JpZ2luYWwgYmVoYXZpb3I6IHVzZSBsYXllciBzZWxlY3Rpb25cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcy11c2luZy1sYXllci1zZWxlY3Rpb24nLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICB1c2VHcmFwaGljc0xheWVyLFxuICAgICAgaGFzR3JhcGhpY3NMYXllcjogISFncmFwaGljc0xheWVyLFxuICAgICAgaGFzTWFwVmlldzogISFtYXBWaWV3LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBTZWxlY3QgaW4gb3JpZ2luIGRhdGEgc291cmNlICh0aGUgYWN0dWFsIGxheWVyKVxuICAgIGlmIChvcmlnaW5EUyAmJiB0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBMb2cgbGF5ZXIgc3RhdGUgcmlnaHQgYmVmb3JlIHNlbGVjdGlvbiB0byBzZWUgd2hhdCdzIGF2YWlsYWJsZSB3aGVuIHNlbGVjdGlvbiB3b3Jrc1xuICAgICAgY29uc3QgbGF5ZXIgPSAob3JpZ2luRFMgYXMgYW55KS5sYXllciB8fCAob3JpZ2luRFMgYXMgYW55KS5nZXRMYXllcj8uKClcbiAgICAgIGlmIChsYXllcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0UmVjb3Jkc0J5SWRzLWxheWVyLXN0YXRlJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICBoYXNMYXllck1hcDogISEobGF5ZXIgYXMgYW55KS5tYXAsXG4gICAgICAgICAgaGFzTGF5ZXJWaWV3OiAhIShsYXllciBhcyBhbnkpLnZpZXcsXG4gICAgICAgICAgaGFzTGF5ZXJQYXJlbnQ6ICEhKGxheWVyIGFzIGFueSkucGFyZW50LFxuICAgICAgICAgIHBhcmVudFR5cGU6IChsYXllciBhcyBhbnkpLnBhcmVudD8udHlwZSB8fCAnbm9uZScsXG4gICAgICAgICAgcGFyZW50SGFzTWFwOiAhIShsYXllciBhcyBhbnkpLnBhcmVudD8ubWFwLFxuICAgICAgICAgIHBhcmVudEhhc1ZpZXc6ICEhKGxheWVyIGFzIGFueSkucGFyZW50Py52aWV3LFxuICAgICAgICAgIHBhcmVudEhhc1ZpZXdzOiAhIShsYXllciBhcyBhbnkpLnBhcmVudD8udmlld3MsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gICAgfVxuICB9XG4gIFxuICAvLyBBbHdheXMgdXBkYXRlIG91dHB1dERTIGZvciB3aWRnZXQncyBpbnRlcm5hbCBzdGF0ZVxuICBpZiAodHlwZW9mIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGBkYXRhX3NgIHBhcmFtZXRlciBmcm9tIHRoZSBVUkwgaGFzaC5cbiAqIEV4cGVyaWVuY2UgQnVpbGRlciBhdXRvbWF0aWNhbGx5IGFkZHMgYGRhdGFfc2Agd2hlbiBzZWxlY3Rpb25zIGFyZSBtYWRlLFxuICogYnV0IGRvZXNuJ3QgcmVtb3ZlIGl0IHdoZW4gc2VsZWN0aW9ucyBhcmUgY2xlYXJlZCwgY2F1c2luZyBcImRpcnR5IGhhc2hcIiBpc3N1ZXMuXG4gKiBcbiAqIFRoaXMgZnVuY3Rpb24gZW5zdXJlcyB0aGUgaGFzaCBpcyBjbGVhbiB3aGVuIHNlbGVjdGlvbnMgYXJlIGNsZWFyZWQuXG4gKi9cbmZ1bmN0aW9uIGNsZWFyRGF0YVNQYXJhbWV0ZXJGcm9tSGFzaCgpOiB2b2lkIHtcbiAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICBpZiAoIWhhc2gpIHJldHVyblxuICBcbiAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICBcbiAgaWYgKHVybFBhcmFtcy5oYXMoJ2RhdGFfcycpKSB7XG4gICAgdXJsUGFyYW1zLmRlbGV0ZSgnZGF0YV9zJylcbiAgICBjb25zdCBuZXdIYXNoID0gdXJsUGFyYW1zLnRvU3RyaW5nKClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2NsZWFyRGF0YVNQYXJhbWV0ZXJGcm9tSGFzaCcsXG4gICAgICBoYWREYXRhUzogdHJ1ZSxcbiAgICAgIG5ld0hhc2g6IG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJyhlbXB0eSknLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIFVSTCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZWxvYWRcbiAgICAvLyBBbHdheXMgcHJlc2VydmUgcGF0aG5hbWUgYW5kIHF1ZXJ5IHN0cmluZywgb25seSB1cGRhdGUgaGFzaFxuICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgXG4gICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgKG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJycpXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogQ2xlYXJzIHNlbGVjdGlvbiBpbiBib3RoIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIE9wdGlvbmFsbHkgY2xlYXJzIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIG1vZGUuXG4gKiBBbHNvIGNsZWFycyB0aGUgYGRhdGFfc2AgcGFyYW1ldGVyIGZyb20gdGhlIFVSTCBoYXNoIHRvIHByZXZlbnQgXCJkaXJ0eSBoYXNoXCIgaXNzdWVzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIChuZWVkZWQgdG8gcHVibGlzaCBtZXNzYWdlKVxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHVzZUdyYXBoaWNzTGF5ZXIgLSBXaGV0aGVyIHRvIGNsZWFyIGdyYXBoaWNzIGxheWVyIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSBncmFwaGljc0xheWVyIC0gR3JhcGhpY3MgbGF5ZXIgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyAoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbik6IFByb21pc2U8dm9pZD4ge1xuICAvLyBDbGVhciBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBtb2RlXG4gIGlmICh1c2VHcmFwaGljc0xheWVyICYmIGdyYXBoaWNzTGF5ZXIpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMtY2xlYXJpbmctZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBjbGVhckdyYXBoaWNzTGF5ZXIoZ3JhcGhpY3NMYXllcilcbiAgfVxuXG4gIC8vIENsZWFyIGRhdGEgc291cmNlIHNlbGVjdGlvbiBmb3Igc3RhdGUgbWFuYWdlbWVudFxuICBhd2FpdCBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhvdXRwdXREUywgW10sIHVuZGVmaW5lZCwgZmFsc2UpXG5cbiAgLy8gUHVibGlzaCB0aGUgZW1wdHkgc2VsZWN0aW9uIG1lc3NhZ2Ugc28gdGhlIE1hcCBzZWxlY3Rpb24gKGJsdWUgYm94ZXMpIGNsZWFyc1xuICBpZiAob3V0cHV0RFMpIHtcbiAgICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgW10sIG91dHB1dERTLCB0cnVlKVxuICB9XG4gIFxuICAvLyBDbGVhciBkYXRhX3MgcGFyYW1ldGVyIGZyb20gaGFzaCB0byBwcmV2ZW50IGRpcnR5IGhhc2hcbiAgLy8gRXhwZXJpZW5jZSBCdWlsZGVyIGFkZHMgZGF0YV9zIHdoZW4gc2VsZWN0aW9ucyBhcmUgbWFkZSBidXQgZG9lc24ndCByZW1vdmUgaXQgd2hlbiBjbGVhcmVkXG4gIGNsZWFyRGF0YVNQYXJhbWV0ZXJGcm9tSGFzaCgpXG59XG5cbi8qKlxuICogUHVibGlzaGVzIGEgc2VsZWN0aW9uIGNoYW5nZSBtZXNzYWdlIGZvciB0aGUgZ2l2ZW4gcmVjb3JkcyBhbmQgZGF0YSBzb3VyY2VzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgKGVtcHR5IGFycmF5IHRvIGNsZWFyKVxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIGFsc29QdWJsaXNoVG9PdXRwdXREUyAtIFdoZXRoZXIgdG8gYWxzbyBwdWJsaXNoIGEgbWVzc2FnZSBmb3Igb3V0cHV0RFMgKGRlZmF1bHQ6IGZhbHNlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2UoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgYWxzb1B1Ymxpc2hUb091dHB1dERTOiBib29sZWFuID0gZmFsc2Vcbik6IHZvaWQge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgXG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgXG4gIGlmIChvcmlnaW5EUykge1xuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBbb3JpZ2luRFMuaWRdKVxuICAgIClcbiAgfSBlbHNlIGlmIChhbHNvUHVibGlzaFRvT3V0cHV0RFMpIHtcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3JkcywgW291dHB1dERTLmlkXSlcbiAgICApXG4gIH1cbiAgXG4gIC8vIE9wdGlvbmFsbHkgcHVibGlzaCB0byBvdXRwdXREUyBhcyB3ZWxsIChmb3Igc29tZSBlZGdlIGNhc2VzKVxuICBpZiAoYWxzb1B1Ymxpc2hUb091dHB1dERTICYmIG9yaWdpbkRTKSB7XG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIFtvdXRwdXREUy5pZF0pXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogU2VsZWN0cyByZWNvcmRzIGFuZCBwdWJsaXNoZXMgdGhlIHNlbGVjdGlvbiBtZXNzYWdlIGluIG9uZSBjYWxsLlxuICogVGhpcyBpcyB0aGUgbW9zdCBjb21tb24gcGF0dGVybiAtIHNlbGVjdGluZyByZWNvcmRzIGFuZCBub3RpZnlpbmcgdGhlIG1hcC5cbiAqIE9wdGlvbmFsbHkgdXNlcyBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHJlY29yZCBJRHMgdG8gc2VsZWN0XG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgZm9yIHByb3BlciBoaWdobGlnaHRpbmdcbiAqIEBwYXJhbSBhbHNvUHVibGlzaFRvT3V0cHV0RFMgLSBXaGV0aGVyIHRvIGFsc28gcHVibGlzaCBhIG1lc3NhZ2UgZm9yIG91dHB1dERTIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byB1c2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKiBAcGFyYW0gbWFwVmlldyAtIE1hcCB2aWV3IGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBhbHNvUHVibGlzaFRvT3V0cHV0RFM6IGJvb2xlYW4gPSBmYWxzZSxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhvdXRwdXREUywgcmVjb3JkSWRzLCByZWNvcmRzLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3Jkcywgb3V0cHV0RFMsIGFsc29QdWJsaXNoVG9PdXRwdXREUylcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgXCJDbGVhciByZXN1bHRzXCIgYnV0dG9uIGluIHRoZSBET00uXG4gKiBVc2VkIHdoZW4gcHJvZ3JhbW1hdGljYWxseSB0cmlnZ2VyaW5nIHRoZSBjbGVhciBhY3Rpb24uXG4gKiBcbiAqIEByZXR1cm5zIFRoZSBjbGVhciBidXR0b24gZWxlbWVudCwgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRDbGVhclJlc3VsdHNCdXR0b24oKTogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsIHtcbiAgLy8gSGFyZGVuZWQ6IFByaW9yaXRpemUgdGhlIG9uZSBpbiB0aGUgcmVzdWx0cyBoZWFkZXIsIGZhbGxiYWNrIHRvIGFueVxuICByZXR1cm4gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWVyeS1yZXN1bHRfX2hlYWRlciBidXR0b25bYXJpYS1sYWJlbD1cIkNsZWFyIHJlc3VsdHNcIl0nKSB8fCBcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b25bYXJpYS1sYWJlbD1cIkNsZWFyIHJlc3VsdHNcIl0nKSkgYXMgSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsXG59XG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBjbGFzc05hbWVzLFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmRcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCBMaXN0RGlyZWN0aW9uIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlSZXN1bHRJdGVtIH0gZnJvbSAnLi9xdWVyeS1yZXN1bHQtaXRlbSdcbmltcG9ydCB7IGdldFBvcHVwVGVtcGxhdGUgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgdXNlQXV0b0hlaWdodCB9IGZyb20gJy4vdXNlQXV0b0hlaWdodCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBTaW1wbGVMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIHJlY29yZHM6IERhdGFSZWNvcmRbXVxuICBkaXJlY3Rpb246IExpc3REaXJlY3Rpb25cbiAgb25Fc2NhcGU6ICgpID0+IHZvaWRcbiAgb25TZWxlY3RDaGFuZ2U6IChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxuICBvblJlbW92ZTogKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIGV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbiAgaXRlbUV4cGFuZFN0YXRlcz86IE1hcDxzdHJpbmcsIGJvb2xlYW4+XG4gIHJlbW92ZWRSZWNvcmRJZHM/OiBTZXQ8c3RyaW5nPlxuICBvblJlbmRlckRvbmU/OiAob3B0aW9uczogeyBkYXRhSXRlbXM6IGFueVtdIH0pID0+IHZvaWRcbn1cblxuY29uc3QgZ2V0U3R5bGUgPSAoaXNBdXRvSGVpZ2h0OiBib29sZWFuKSA9PiB7XG4gIHJldHVybiBjc3NgXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAwfTtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBtYXgtaGVpZ2h0OiAke2lzQXV0b0hlaWdodCA/ICdjYWxjKDYxLjh2aCAtIDEwMHB4KScgOiAnbm9uZSd9O1xuXG4gICAgLnF1ZXJ5LXJlc3VsdC1pdGVtICsgLnF1ZXJ5LXJlc3VsdC1pdGVtIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAwLjVyZW07XG4gICAgICBtYXJnaW4tdG9wOiAwO1xuICAgIH1cblxuICAgICYudmVydGljYWwge1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIC5saXN0LWl0ZW1zIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICAuZmVhdHVyZS1pbmZvLWNvbXBvbmVudCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAucXVlcnktcmVzdWx0LWl0ZW0gKyAucXVlcnktcmVzdWx0LWl0ZW0ge1xuICAgICAgICBtYXJnaW4tbGVmdDogMDtcbiAgICAgICAgbWFyZ2luLXRvcDogMC41cmVtO1xuICAgICAgfVxuICAgIH1cbiAgICAubGlzdC1pdGVtcyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gU2ltcGxlTGlzdCAocHJvcHM6IFNpbXBsZUxpc3RQcm9wcykge1xuICBjb25zdCB7XG4gICAgd2lkZ2V0SWQsXG4gICAgb3V0cHV0RFMsXG4gICAgcXVlcnlJdGVtLFxuICAgIHJlY29yZHMsXG4gICAgZGlyZWN0aW9uLFxuICAgIG9uRXNjYXBlLFxuICAgIG9uU2VsZWN0Q2hhbmdlLFxuICAgIG9uUmVtb3ZlLFxuICAgIGV4cGFuZEJ5RGVmYXVsdCxcbiAgICBpdGVtRXhwYW5kU3RhdGVzLFxuICAgIHJlbW92ZWRSZWNvcmRJZHMsXG4gICAgb25SZW5kZXJEb25lXG4gIH0gPSBwcm9wc1xuICBcbiAgY29uc3QgW3BvcHVwVGVtcGxhdGUsIHNldFBvcHVwVGVtcGxhdGVdID0gUmVhY3QudXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IFtkZWZhdWx0UG9wdXBUZW1wbGF0ZSwgc2V0RGVmYXVsdFBvcHVwVGVtcGxhdGVdID0gUmVhY3QudXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IGlzQXV0b0hlaWdodCA9IHVzZUF1dG9IZWlnaHQoKVxuICBjb25zdCByZXN1bHRDb250YWluZXJSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG5cbiAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHNcbiAgY29uc3QgZmlsdGVyZWRSZWNvcmRzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHJlY29yZHM/LmZpbHRlcihyZWNvcmQgPT4gIXJlbW92ZWRSZWNvcmRJZHM/LmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IFtdXG4gIH0sIFtyZWNvcmRzLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICAvLyBOb3RpZnkgcGFyZW50IHdoZW4gcmVjb3JkcyBhcmUgcmVuZGVyZWQgKGZvciBhdXRvLXN3aXRjaCBsb2dpYylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAob25SZW5kZXJEb25lICYmIGZpbHRlcmVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdTaW1wbGVMaXN0LW9uUmVuZGVyRG9uZS1jYWxsZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgZmlsdGVyZWRSZWNvcmRzQ291bnQ6IGZpbHRlcmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHRvdGFsUmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzPy5zaXplIHx8IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIG9uUmVuZGVyRG9uZSh7IGRhdGFJdGVtczogZmlsdGVyZWRSZWNvcmRzIH0pXG4gICAgfVxuICB9LCBbZmlsdGVyZWRSZWNvcmRzLCBvblJlbmRlckRvbmUsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIHJlY29yZHMubGVuZ3RoLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGdldFBvcHVwVGVtcGxhdGUob3V0cHV0RFMsIHF1ZXJ5SXRlbSkudGhlbihycyA9PiB7XG4gICAgICBzZXRQb3B1cFRlbXBsYXRlKHJzLnBvcHVwVGVtcGxhdGUpXG4gICAgICBzZXREZWZhdWx0UG9wdXBUZW1wbGF0ZShycy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSlcbiAgICB9KVxuICB9LCBbb3V0cHV0RFMsIHF1ZXJ5SXRlbV0pXG5cbiAgY29uc3QgaGFuZGxlS2V5VXAgPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIG9uRXNjYXBlKClcbiAgICB9XG4gIH0sIFtvbkVzY2FwZV0pXG5cbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJyAnKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IFxuICAgICAgb25LZXlVcD17aGFuZGxlS2V5VXB9IFxuICAgICAgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufSBcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyh7IHZlcnRpY2FsOiBkaXJlY3Rpb24gPT09IExpc3REaXJlY3Rpb24uVmVydGljYWwgfSl9IFxuICAgICAgY3NzPXtnZXRTdHlsZShpc0F1dG9IZWlnaHQpfVxuICAgICAgcmVmPXtyZXN1bHRDb250YWluZXJSZWZ9XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2xpc3QtaXRlbXMgcHgtNCBweS0xJyByb2xlPSdsaXN0Ym94Jz5cbiAgICAgICAge2ZpbHRlcmVkUmVjb3Jkcy5tYXAoKGRhdGFJdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkSWQgPSBkYXRhSXRlbS5nZXRJZCgpXG4gICAgICAgICAgLy8gVXNlIGluZGl2aWR1YWwgc3RhdGUgZnJvbSBtYXAgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIGV4cGFuZEJ5RGVmYXVsdFxuICAgICAgICAgIGNvbnN0IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSA9IGl0ZW1FeHBhbmRTdGF0ZXM/LmdldChyZWNvcmRJZClcbiAgICAgICAgICBjb25zdCBleHBhbmRCeURlZmF1bHRWYWx1ZSA9IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSAhPT0gdW5kZWZpbmVkID8gaW5kaXZpZHVhbEV4cGFuZFN0YXRlIDogKGV4cGFuZEJ5RGVmYXVsdCA/PyB0cnVlKVxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8UXVlcnlSZXN1bHRJdGVtXG4gICAgICAgICAgICAgIGtleT17cmVjb3JkSWR9XG4gICAgICAgICAgICAgIGRhdGE9e2RhdGFJdGVtIGFzIEZlYXR1cmVEYXRhUmVjb3JkfVxuICAgICAgICAgICAgICBkYXRhU291cmNlPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICBwb3B1cFRlbXBsYXRlPXtwb3B1cFRlbXBsYXRlfVxuICAgICAgICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZT17ZGVmYXVsdFBvcHVwVGVtcGxhdGV9XG4gICAgICAgICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQnlEZWZhdWx0VmFsdWV9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e29uU2VsZWN0Q2hhbmdlfVxuICAgICAgICAgICAgICBvblJlbW92ZT17b25SZW1vdmV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIClcbiAgICAgICAgfSl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIF93aWRnZXRMYWJlbDogJ1F1ZXJ5U2ltcGxlJyxcbiAgcmVzZXQ6ICdSZXNldCcsXG4gIHNlYXJjaExheWVyOiAnU2VhcmNoIExheWVyJyxcbiAgYXBwbHk6ICdTZWFyY2gnLFxuICBub0RhdGFBdmFpbGFibGU6ICdFcnJvciBpbiBsb2FkaW5nIGRhdGEnLFxuICBub1F1ZXJ5SXRlbTogJ05vIHF1ZXJ5JyxcbiAgbmV3UXVlcnlIaW50OiAnQWRkIGNvbnRlbnQgYnkgY2xpY2tpbmcgdGhlIFwie2xhYmVsfVwiIGJ1dHRvbiBvbiB0aGUgY29uZmlndXJhdGlvbiBwYW5lbCcsXG4gIGF0dHJpYnV0ZUZpbHRlcjogJ0F0dHJpYnV0ZSBmaWx0ZXInLFxuICBzcGF0aWFsRmlsdGVyOiAnU3BhdGlhbCBmaWx0ZXInLFxuICBzcGF0aWFsRmlsdGVyVHlwZV9DdXJyZW50TWFwRXh0ZW50OiAnQ3VycmVudCBtYXAgZXh0ZW50JyxcbiAgc3BhdGlhbEZpbHRlclR5cGVfSW50ZXJhY3RpdmVEcmF3TW9kZTogJ0RyYXduIGdyYXBoaWMnLFxuICByZXN1bHRzOiAnUmVzdWx0cycsXG4gIGZlYXR1cmVzRGlzcGxheWVkOiAnRmVhdHVyZXMgZGlzcGxheWVkJyxcbiAgY2xlYXJSZXN1bHQ6ICdDbGVhciByZXN1bHRzJyxcbiAgY2hlY2tSZXN1bHQ6ICdDaGVjayByZXN1bHRzJyxcbiAgbWFwTXVzdEJlVmlzaWJsZTogJ01hcCBtdXN0IGJlIHZpc2libGUnLFxuICBjaG9vc2VGaWx0ZXJUeXBlOiAnQ2hvb3NlIHRoZSBmaWx0ZXIgdHlwZScsXG4gIGNob29zZUdlb21ldHJ5VHlwZTogJ0Nob29zZSB0aGUgZ2VvbWV0cnkgdHlwZScsXG4gIGNsZWFyRHJhd2luZzogJ0NsZWFyIHRoZSBncmFwaGljIHdoZW4gYXBwbHlpbmcnLFxuICBmZWF0dXJlRnJvbURzOiAnU2VsZWN0aW5nIGZlYXR1cmVzIGZyb20gZGF0YSBzb3VyY2UnLFxuICBmZWF0dXJlRnJvbU1hcDogJ0dlb21ldHJpZXMgZnJvbSBhIG1hcCcsXG4gIGNob29zZUZpbHRlckxheWVyOiAnQ2hvb3NlIGEgZmlsdGVyIGxheWVyJyxcbiAgc2VsZWN0ZWRSZWNvcmRzOiAne251bX0gcmVjb3JkcyBhcmUgc2VsZWN0ZWQgZm9yIHRoZSBmaWx0ZXInLFxuICBzcGF0aWFsTm90QXZhaWxhYmxlOiAnU3BhdGlhbCBmaWx0ZXIgaXMgbm90IGF2YWlsYWJsZSBoZXJlLicsXG4gIHNwYXRpYWxOb3RBdmFpbGFibGVEZXNjOiAnU3BhdGlhbCBmaWx0ZXIgaXMgbm90IHN1cHBvcnRlZCBmb3IgYSBkYXRhIHNvdXJjZSB0aGF0IGFscmVhZHkgY29udGFpbnMgYSBzcGF0aWFsIHF1ZXJ5LicsXG4gIHByZWNvbmZpZ3VyZWQ6ICdQcmVjb25maWd1cmVkJyxcbiAgcnVudGltZTogJ1J1bnRpbWUnLFxuICBzZWxlY3RMb2FkZWQ6ICdTZWxlY3QgbG9hZGVkJyxcbiAgcmV0cmlldmluZzogJ1JldHJpZXZpbmcgcXVlcnkgcmVzdWx0cy4uLicsXG4gIHpvb21Ub1NlbGVjdGVkOiAnWm9vbSB0byBzZWxlY3RlZCcsXG4gIHF1ZXJ5VGFiOiAnUXVlcnknLFxuICByZXN1bHRzVGFiOiAnUmVzdWx0cycsXG4gIGV4cGFuZEFsbDogJ0V4cGFuZCBhbGwnLFxuICBjb2xsYXBzZUFsbDogJ0NvbGxhcHNlIGFsbCcsXG4gIGFkZFRvTWFwOiAnQWRkIHRvIG1hcCcsXG4gIHJlc3VsdHNNb2RlOiAnUmVzdWx0cyBtb2RlJyxcbiAgY3JlYXRlTmV3UmVzdWx0czogJ0NyZWF0ZSBuZXcgcmVzdWx0cycsXG4gIGFkZFRvQ3VycmVudFJlc3VsdHM6ICdBZGQgdG8gY3VycmVudCByZXN1bHRzJyxcbiAgcmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzOiAnUmVtb3ZlIGZyb20gY3VycmVudCByZXN1bHRzJyxcbiAgcmVzdWx0c01vZGVEaXNhYmxlZFJlbW92ZTogJ1JlbW92ZSBmcm9tIGN1cnJlbnQgcmVzdWx0cyAobm8gYWNjdW11bGF0ZWQgcmVzdWx0cyknLFxuICByZXN1bHRzTW9kZURlc2M6ICdDb250cm9scyBob3cgcXVlcnkgcmVzdWx0cyBhcmUgY29tYmluZWQ6XFxu4oCiIE5ldzogRWFjaCBxdWVyeSByZXBsYWNlcyBwcmV2aW91cyByZXN1bHRzXFxu4oCiIEFkZDogTmV3IHJlc3VsdHMgYXJlIGFkZGVkIHRvIGV4aXN0aW5nIHJlc3VsdHNcXG7igKIgUmVtb3ZlOiBNYXRjaGluZyByZXN1bHRzIGFyZSByZW1vdmVkIGZyb20gZXhpc3RpbmcgcmVzdWx0cycsXG4gIHJlc3VsdHNNb2RlTmV3OiAnTmV3JyxcbiAgcmVzdWx0c01vZGVBZGQ6ICdBZGQnLFxuICByZXN1bHRzTW9kZVJlbW92ZTogJ1JlbW92ZSdcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCB0eXBlIElNU3RhdGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBMYXlvdXRJdGVtU2l6ZU1vZGVzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgUXVlcnlXaWRnZXRDb250ZXh0IH0gZnJvbSAnLi93aWRnZXQtY29udGV4dCdcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUF1dG9IZWlnaHQgKCkge1xuICBjb25zdCBsYXlvdXRJbmZvID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVdpZGdldENvbnRleHQpXG4gIGxldCBsYXlvdXRJZFxuICBsZXQgbGF5b3V0SXRlbUlkXG4gIGlmIChsYXlvdXRJbmZvLmluY2x1ZGVzKCc6JykpIHtcbiAgICBjb25zdCByID0gbGF5b3V0SW5mby5zcGxpdCgnOicpXG4gICAgbGF5b3V0SWQgPSByWzBdXG4gICAgbGF5b3V0SXRlbUlkID0gclsxXVxuICB9XG4gIGNvbnN0IGlzQXV0byA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXT8uY29udGVudD8uW2xheW91dEl0ZW1JZF1cbiAgICByZXR1cm4gbGF5b3V0SXRlbT8uc2V0dGluZz8uYXV0b1Byb3BzPy5oZWlnaHQgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuICB9KVxuXG4gIHJldHVybiBpc0F1dG9cbn1cblxuXG4iLCJpbXBvcnQgaWNvbldhcm5pbmcgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcuc3ZnJ1xuaW1wb3J0IGljb25FcnJvciBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvZXJyb3Iuc3ZnJ1xuaW1wb3J0IGFycm93TmF2QmFjayBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnN2ZydcbmltcG9ydCBhcnJvd1JpZ2h0IGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZydcbmltcG9ydCB0b29sRGVsZXRlIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmcnXG5pbXBvcnQgaWNvbk1vcmUgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vbW9yZS1ob3Jpem9udGFsLnN2ZydcblxuZXhwb3J0IGNvbnN0IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwID0gKCkgPT4gKHtcbiAgaWNvbk1hcDoge1xuICAgIGljb25RdWVyeTogcmVxdWlyZSgnLi4vLi4vaWNvbi5zdmcnKSxcbiAgICBpY29uV2FybmluZyxcbiAgICBpY29uRXJyb3IsXG4gICAgYXJyb3dOYXZCYWNrLFxuICAgIGFycm93UmlnaHQsXG4gICAgdG9vbERlbGV0ZSxcbiAgICBpY29uTW9yZVxuICB9XG59KVxuXG5cblxuIiwiaW1wb3J0IHsgUmVhY3QgfSBmcm9tICdqaW11LWNvcmUnXG5cbmV4cG9ydCBjb25zdCBRdWVyeVdpZGdldENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PHN0cmluZz4obnVsbClcblxuXG4iLCIvKipcbiAqIFNoYXJlZCB6b29tIHV0aWxpdGllcyBmb3IgUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogXG4gKiBQcm92aWRlcyBwdXJlIGZ1bmN0aW9ucyBmb3Igem9vbWluZyB0byBmZWF0dXJlIHJlY29yZHMgdGhhdCBjYW4gYmUgdXNlZFxuICogYnkgYm90aCBSZWFjdCBob29rcyBhbmQgZGF0YSBhY3Rpb25zLlxuICovXG5cbmltcG9ydCB0eXBlIHsgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgWm9vbVRvUmVjb3Jkc09wdGlvbnMge1xuICBwYWRkaW5nPzoge1xuICAgIGxlZnQ6IG51bWJlclxuICAgIHJpZ2h0OiBudW1iZXJcbiAgICB0b3A6IG51bWJlclxuICAgIGJvdHRvbTogbnVtYmVyXG4gIH1cbn1cblxuY29uc3QgREVGQVVMVF9QQURESU5HID0ge1xuICBsZWZ0OiA1MCxcbiAgcmlnaHQ6IDUwLFxuICB0b3A6IDUwLFxuICBib3R0b206IDUwXG59XG5cbi8qKlxuICogUHVyZSBmdW5jdGlvbiB0byB6b29tIHRvIGZlYXR1cmUgcmVjb3JkcyB3aXRoIHBhZGRpbmcuXG4gKiBcbiAqIEV4dHJhY3RzIGdlb21ldHJpZXMgZnJvbSByZWNvcmRzLCBjYWxjdWxhdGVzIGV4dGVudCwgYW5kIHpvb21zIHRoZSBtYXAgdmlld1xuICogdXNpbmcgbWFwVmlldy5nb1RvKCkgd2l0aCBjb25maWd1cmFibGUgcGFkZGluZy4gSGFuZGxlcyBib3RoIHNpbmdsZSBhbmRcbiAqIG11bHRpcGxlIGdlb21ldHJpZXMgYnkgY2FsY3VsYXRpbmcgdW5pb24gZXh0ZW50IHdoZW4gbmVlZGVkLlxuICogXG4gKiBAcGFyYW0gbWFwVmlldyAtIFRoZSBtYXAgdmlldyB0byB6b29tXG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIGZlYXR1cmUgZGF0YSByZWNvcmRzIHRvIHpvb20gdG9cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgem9vbSBvcHRpb25zIGluY2x1ZGluZyBwYWRkaW5nXG4gKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB6b29tIGNvbXBsZXRlc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gem9vbVRvUmVjb3JkcyhcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3LFxuICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBvcHRpb25zPzogWm9vbVRvUmVjb3Jkc09wdGlvbnNcbik6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIW1hcFZpZXcgfHwgIXJlY29yZHMgfHwgcmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IHBhZGRpbmcgPSBvcHRpb25zPy5wYWRkaW5nIHx8IERFRkFVTFRfUEFERElOR1xuXG4gIHRyeSB7XG4gICAgLy8gRXh0cmFjdCBnZW9tZXRyaWVzIGZyb20gcmVjb3Jkc1xuICAgIGNvbnN0IGdlb21ldHJpZXMgPSByZWNvcmRzXG4gICAgICAubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SlNBUElHZW9tZXRyeSgpKVxuICAgICAgLmZpbHRlcihnZW9tID0+IGdlb20gIT0gbnVsbClcbiAgICBcbiAgICBpZiAoZ2VvbWV0cmllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCBleHRlbnQ6IF9fZXNyaS5FeHRlbnQgfCBudWxsID0gbnVsbFxuICAgIFxuICAgIGlmIChnZW9tZXRyaWVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gU2luZ2xlIGdlb21ldHJ5IC0gZ2V0IGl0cyBleHRlbnRcbiAgICAgIGV4dGVudCA9IGdlb21ldHJpZXNbMF0uZXh0ZW50IHx8IChnZW9tZXRyaWVzWzBdIGFzIGFueSkuZ2V0RXh0ZW50Py4oKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNdWx0aXBsZSBnZW9tZXRyaWVzIC0gY2FsY3VsYXRlIHVuaW9uIGV4dGVudFxuICAgICAgY29uc3QgZXh0ZW50cyA9IGdlb21ldHJpZXNcbiAgICAgICAgLm1hcChnZW9tID0+IGdlb20uZXh0ZW50IHx8IChnZW9tIGFzIGFueSkuZ2V0RXh0ZW50Py4oKSlcbiAgICAgICAgLmZpbHRlcihlID0+IGUgIT0gbnVsbClcbiAgICAgIFxuICAgICAgaWYgKGV4dGVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICBleHRlbnQgPSBleHRlbnRzWzBdLmNsb25lKClcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBleHRlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZXh0ZW50ID0gZXh0ZW50LnVuaW9uKGV4dGVudHNbaV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKGV4dGVudCkge1xuICAgICAgYXdhaXQgbWFwVmlldy5nb1RvKGV4dGVudCwgeyBwYWRkaW5nIH0pXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnWk9PTScsIHtcbiAgICAgIGV2ZW50OiAnem9vbS1nb1RvLWVycm9yJyxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHMubGVuZ3RoXG4gICAgfSlcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cblxuXG5cbiIsImltcG9ydCB7IEJhc2VWZXJzaW9uTWFuYWdlciB9IGZyb20gJ2ppbXUtY29yZSdcblxuY2xhc3MgVmVyc2lvbk1hbmFnZXIgZXh0ZW5kcyBCYXNlVmVyc2lvbk1hbmFnZXIge1xuICB2ZXJzaW9ucyA9IFt7XG4gICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICBkZXNjcmlwdGlvbjogJ1RoZSBmaXJzdCB2ZXJzaW9uLicsXG4gICAgdXBncmFkZXI6IChvbGRDb25maWcpID0+IHtcbiAgICAgIHJldHVybiBvbGRDb25maWdcbiAgICB9XG4gIH1dXG59XG5cbmV4cG9ydCBjb25zdCB2ZXJzaW9uTWFuYWdlciA9IG5ldyBWZXJzaW9uTWFuYWdlcigpXG5cblxuXG4iLCIvKipcbiAqIFdpZGdldCB2ZXJzaW9uIG51bWJlci5cbiAqIEJhc2UgdmVyc2lvbiBtYXRjaGVzIEV4cGVyaWVuY2UgQnVpbGRlciB2ZXJzaW9uICgxLjE5LjApLlxuICogUmVsZWFzZSBudW1iZXIgaW5jcmVtZW50cyBvbiBtYWpvciBjaGFuZ2VzICgwMDEsIDAwMiwgMDAzLCAuLi4pLlxuICogTWlub3IgdmVyc2lvbiBpbmNyZW1lbnRzIG9uIHNtYWxsZXIgZml4ZXMgYmV0d2VlbiBtYWpvciByZWxlYXNlcyAocjAxNS4xLCByMDE1LjIsIC4uLikuXG4gKiBcbiAqIFRvIGluY3JlbWVudDpcbiAqIC0gTWFqb3IgY2hhbmdlOiBVcGRhdGUgUkVMRUFTRV9OVU1CRVIgKGUuZy4sIDAxNSAtPiAwMTYpIGFuZCByZXNldCBNSU5PUl9WRVJTSU9OIHRvIDBcbiAqIC0gTWlub3IgZml4OiBJbmNyZW1lbnQgTUlOT1JfVkVSU0lPTiAoZS5nLiwgMSAtPiAyKSB3aGlsZSBrZWVwaW5nIHNhbWUgUkVMRUFTRV9OVU1CRVJcbiAqL1xuY29uc3QgQkFTRV9WRVJTSU9OID0gJzEuMTkuMCdcbmNvbnN0IFJFTEVBU0VfTlVNQkVSID0gJzAxOCcgLy8gSW5jcmVtZW50IG9uIG1ham9yIGNoYW5nZXMgKDAwMSwgMDAyLCAwMDMsIC4uLilcbmNvbnN0IE1JTk9SX1ZFUlNJT04gPSAnNzAnIC8vIEluY3JlbWVudCBvbiBtaW5vciBmaXhlcyBiZXR3ZWVuIG1ham9yIHJlbGVhc2VzICgxLCAyLCAzLCAuLi4pXG5cbmV4cG9ydCBjb25zdCBXSURHRVRfVkVSU0lPTiA9IE1JTk9SX1ZFUlNJT04gJiYgTnVtYmVyKE1JTk9SX1ZFUlNJT04pID4gMFxuICA/IGAke0JBU0VfVkVSU0lPTn0tciR7UkVMRUFTRV9OVU1CRVJ9LiR7TUlOT1JfVkVSU0lPTn1gXG4gIDogYCR7QkFTRV9WRVJTSU9OfS1yJHtSRUxFQVNFX05VTUJFUn1gXG5cbiIsIi8qKlxuICogU2hhcmVkIGNvbW1vbiB1dGlsaXRpZXMgYW5kIGNvbXBvbmVudHMgZm9yIEV4cGVyaWVuY2UgQnVpbGRlciB3aWRnZXRzXG4gKiBcbiAqIFRoaXMgbW9kdWxlIGV4cG9ydHMgY29tbW9uIGZ1bmN0aW9uYWxpdHkgdGhhdCBjYW4gYmUgc2hhcmVkIGJldHdlZW5cbiAqIHF1ZXJ5LXNpbXBsZSwgaGVscGVyLXNpbXBsZSwgYW5kIG90aGVyIGN1c3RvbSB3aWRnZXRzLlxuICogXG4gKiBUaGlzIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vY29tbW9uL2NvbW1vbi1jb21wb25lbnRzJ1xuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vdXRpbHMnXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi91c2UtZHMtZXhpc3RzJ1xuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vZGF0YS1zb3VyY2UtdGlwJ1xuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vZGVidWctbG9nZ2VyJ1xuXG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwganN4LCBjc3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIE1vZGFsLCBNb2RhbEJvZHksIE1vZGFsRm9vdGVyLCBQYW5lbEhlYWRlciwgSWNvbiwgdHlwZSBUaGVtZVByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHdpdGhUaGVtZSB9IGZyb20gJ2ppbXUtdGhlbWUnXG5pbXBvcnQgaWNvbkVycm9yIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmcnXG5jb25zdCB7IHVzZVN0YXRlIH0gPSBSZWFjdFxuXG4vKipcbiAqIEEgc2ltcGxlIEZ1bmN0aW9uYWwgQ29tcG9uZW50IHN0b3Jpbmcgc29tZSBTdGF0ZXMgdGhhdCBhcmUgY29tbW9ubHkgdXNlZFxuICovXG5leHBvcnQgY29uc3QgU3RhdGVIb2xkZXIgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyBpbml0U3RhdGUgPSB7fSwgY2hpbGRyZW4gfSA9IHByb3BzXG4gIGNvbnN0IGRlZmF1bHRTdGF0ZU1hcCA9IHtcbiAgICB2aXNpYmxlOiB0cnVlLFxuICAgIHJlZkNvbnRhaW5lcjogbnVsbFxuICB9XG4gIGNvbnN0IHVzZVN0YXRlTWFwID0ge1xuICAgIHZpc2libGU6IHVzZVN0YXRlKCd2aXNpYmxlJyBpbiBpbml0U3RhdGUgPyBpbml0U3RhdGUudmlzaWJsZSA6IGRlZmF1bHRTdGF0ZU1hcC52aXNpYmxlKSxcbiAgICByZWZDb250YWluZXI6IHVzZVN0YXRlKCdyZWZDb250YWluZXInIGluIGluaXRTdGF0ZSA/IGluaXRTdGF0ZS5yZWZDb250YWluZXIgOiBkZWZhdWx0U3RhdGVNYXAucmVmQ29udGFpbmVyKSxcbiAgICBjdXN0b21EYXRhOiB1c2VTdGF0ZSh7IC4uLmluaXRTdGF0ZS5jdXN0b21EYXRhIH0pXG4gIH1cbiAgcmV0dXJuIDxSZWFjdC5GcmFnbWVudD57Y2hpbGRyZW4odXNlU3RhdGVNYXApfTwvUmVhY3QuRnJhZ21lbnQ+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlhbG9nUGFuZWxQcm9wcyB7XG4gIHBhbmVsVmlzaWJsZTogYm9vbGVhblxuICBzZXRQYW5lbFZpc2libGU6ICh2aXNpYmxlOiBib29sZWFuKSA9PiB2b2lkXG4gIGdldEkxOG5NZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gYW55XG4gIGlzTW9kYWw/OiBib29sZWFuXG4gIHRpdGxlPzogYW55XG4gIGJvZHlDb250ZW50PzogYW55XG4gIGhhc0hlYWRlcj86IGJvb2xlYW5cbiAgaGFzRm9vdGVyPzogYm9vbGVhblxufVxuXG4vKipcbiAqIEEgZGlhbG9nIHBvcHVwXG4gKi9cbmV4cG9ydCBjb25zdCBEaWFsb2dQYW5lbCA9IHdpdGhUaGVtZSgocHJvcHM6IERpYWxvZ1BhbmVsUHJvcHMgJiBUaGVtZVByb3BzKSA9PiB7XG4gIGNvbnN0IHsgdGhlbWUsIHBhbmVsVmlzaWJsZSwgc2V0UGFuZWxWaXNpYmxlLCBnZXRJMThuTWVzc2FnZSwgaXNNb2RhbCA9IHRydWUsIHRpdGxlID0gZ2V0STE4bk1lc3NhZ2UoJ3F1ZXJ5TWVzc2FnZScpLCBib2R5Q29udGVudCA9ICcnLCBoYXNIZWFkZXIgPSB0cnVlLCBoYXNGb290ZXIgPSB0cnVlIH0gPSBwcm9wc1xuICBjb25zdCB0b2dnbGUgPSAoKSA9PiB7IHNldFBhbmVsVmlzaWJsZShmYWxzZSkgfVxuICBjb25zdCBnZXRDb250ZW50ID0gKCkgPT4gPFJlYWN0LkZyYWdtZW50PlxuICAgIHtcbiAgICAgIGhhc0hlYWRlciAmJlxuICAgICAgICA8UGFuZWxIZWFkZXIgY2xhc3NOYW1lPSdweS0yJyB0aXRsZT17dGl0bGV9IG9uQ2xvc2U9e3RvZ2dsZX0gLz5cbiAgICB9XG4gICAgPE1vZGFsQm9keT57Ym9keUNvbnRlbnR9PC9Nb2RhbEJvZHk+XG4gICAge1xuICAgICAgaGFzRm9vdGVyICYmXG4gICAgICAgIDxNb2RhbEZvb3Rlcj5cbiAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZX0+e2dldEkxOG5NZXNzYWdlKCdvaycpfTwvQnV0dG9uPlxuICAgICAgICA8L01vZGFsRm9vdGVyPlxuICAgIH1cbiAgPC9SZWFjdC5GcmFnbWVudD5cbiAgY29uc3QgZ2VuZXJhbENsYXNzTmFtZSA9ICd1aS11bml0LWRpYWxvZy1wYW5lbCdcbiAgY29uc3QgcmVuZGVyTW9kYWxDb250ZW50ID0gKCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICA8TW9kYWwgY2xhc3NOYW1lPXtnZW5lcmFsQ2xhc3NOYW1lfSBpc09wZW49e3BhbmVsVmlzaWJsZX0gdG9nZ2xlPXt0b2dnbGV9IGJhY2tkcm9wPSdzdGF0aWMnPlxuICAgICAgICB7Z2V0Q29udGVudCgpfVxuICAgICAgPC9Nb2RhbD5cbiAgICApXG4gIH1cbiAgY29uc3QgcmVuZGVyTm9uTW9kYWxDb250ZW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IGdldFN0eWxlID0gKCkgPT4gY3NzYFxuICAgICAgJi51aS11bml0LWRpYWxvZy1wYW5lbC5tb2RhbC1kaWFsb2cge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAubW9kYWwtY29udGVudCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5yZWYucGFsZXR0ZS5uZXV0cmFsWzYwMF19O1xuICAgICAgICAgIGNvbG9yOiAke3RoZW1lLnJlZi5wYWxldHRlLmJsYWNrfTtcbiAgICAgICAgICBmb250LXNpemU6IC43NXJlbTtcbiAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAucGFuZWwtaGVhZGVyIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogLjgxMjVyZW07XG4gICAgICAgICAgICBwYWRkaW5nOiAuNjI1cmVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICAubW9kYWwtYm9keSB7XG4gICAgICAgICAgICBwYWRkaW5nOiAwIC42MjVyZW0gLjc1cmVtO1xuICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtnZW5lcmFsQ2xhc3NOYW1lfSBtb2RhbC1kaWFsb2cgJHtwYW5lbFZpc2libGUgPyAnJyA6ICdjb2xsYXBzZSd9YH0gY3NzPXtnZXRTdHlsZSgpfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWNvbnRlbnQnPlxuICAgICAgICAgIHtnZXRDb250ZW50KCl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG4gIHJldHVybiBpc01vZGFsID8gcmVuZGVyTW9kYWxDb250ZW50KCkgOiByZW5kZXJOb25Nb2RhbENvbnRlbnQoKVxufSlcblxuZXhwb3J0IGVudW0gRW50aXR5U3RhdHVzVHlwZSB7XG4gIE5vbmUgPSAnJyxcbiAgSW5pdCA9ICdpbml0JyxcbiAgTG9hZGluZyA9ICdsb2FkaW5nJyxcbiAgTG9hZGVkID0gJ2xvYWRlZCcsXG4gIFdhcm5pbmcgPSAnd2FybmluZycsXG4gIEVycm9yID0gJ2Vycm9yJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGF0dXNJbmRpY2F0b3JQcm9wcyB7XG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBzdGF0dXNUeXBlPzogRW50aXR5U3RhdHVzVHlwZVxuICB0aXRsZT86IHN0cmluZ1xufVxuXG4vKipcbiAqIEFuIGFuaW1hdGFibGUgaWNvbiByZXByZXNlbnRpbmcgc3RhdHVzXG4gKi9cbmV4cG9ydCBjb25zdCBTdGF0dXNJbmRpY2F0b3IgPSB3aXRoVGhlbWUoKHByb3BzOiBTdGF0dXNJbmRpY2F0b3JQcm9wcyAmIFRoZW1lUHJvcHMpID0+IHtcbiAgY29uc3QgeyB0aGVtZSwgY2xhc3NOYW1lLCB0aXRsZSwgc3RhdHVzVHlwZSB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0U3R5bGUgPSAoKSA9PiBjc3NgXG4gICAgJi51aS11bml0LXN0YXR1cy1pbmRpY2F0b3Ige1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICYudWktdW5pdC1zdGF0dXMtaW5kaWNhdG9yX3N0YXR1cy10eXBlLWxvYWRpbmcge1xuICAgICAgICAmOmJlZm9yZSB7XG4gICAgICAgICAgQGtleWZyYW1lcyBsb2FkaW5nIHtcbiAgICAgICAgICAgIDAlIHt0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfTtcbiAgICAgICAgICAgIDEwMCUge3RyYW5zZm9ybTogcm90YXRlKDM2MGRlZyl9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICB3aWR0aDogMXJlbTtcbiAgICAgICAgICBoZWlnaHQ6IDFyZW07XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgJHt0aGVtZT8ucmVmLnBhbGV0dGU/Lm5ldXRyYWw/Lls1MDBdfTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICR7dGhlbWU/LnN5cy5jb2xvcj8ucHJpbWFyeT8ubWFpbn07XG4gICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICBhbmltYXRpb246IGxvYWRpbmcgMnMgaW5maW5pdGUgbGluZWFyO1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogLjI1cmVtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICBgXG4gIHJldHVybiAoXG4gICAgc3RhdHVzVHlwZSAmJlxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2NsYXNzTmFtZSA/PyAnJ30gdWktdW5pdC1zdGF0dXMtaW5kaWNhdG9yIHVpLXVuaXQtc3RhdHVzLWluZGljYXRvcl9zdGF0dXMtdHlwZS0ke3N0YXR1c1R5cGV9YH0gdGl0bGU9e3RpdGxlfSBjc3M9e2dldFN0eWxlKCl9IC8+XG4gIClcbn0pXG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JNZXNzYWdlUHJvcHMge1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbFxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgb25EaXNtaXNzPzogKCkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFNpbXBsZSBlcnJvciBtZXNzYWdlIGNvbXBvbmVudCBmb3IgZGlzcGxheWluZyB1c2VyLWZhY2luZyBlcnJvcnMuXG4gKiBVc2UgRGF0YVNvdXJjZVRpcCBmb3IgZGF0YSBzb3VyY2UtcmVsYXRlZCBlcnJvcnMuXG4gKi9cbmV4cG9ydCBjb25zdCBFcnJvck1lc3NhZ2UgPSAocHJvcHM6IEVycm9yTWVzc2FnZVByb3BzKSA9PiB7XG4gIGNvbnN0IHsgZXJyb3IsIGNsYXNzTmFtZSA9ICcnLCBvbkRpc21pc3MgfSA9IHByb3BzXG4gIFxuICBpZiAoIWVycm9yKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBcbiAgY29uc3QgZXJyb3JTdHlsZSA9IGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcGFkZGluZzogMC41cmVtO1xuICAgIG1hcmdpbjogMC41cmVtIDA7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWVycm9yLWxpZ2h0KTtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLWVycm9yLWRhcmspO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgIGdhcDogMC41cmVtO1xuICAgIFxuICAgIC5lcnJvci1pY29uIHtcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIH1cbiAgICBcbiAgICAuZXJyb3ItdGV4dCB7XG4gICAgICBmbGV4OiAxO1xuICAgIH1cbiAgICBcbiAgICAuZXJyb3ItZGlzbWlzcyB7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIHBhZGRpbmc6IDAuMjVyZW07XG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgfVxuICAgIH1cbiAgYFxuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17YGVycm9yLW1lc3NhZ2UgJHtjbGFzc05hbWV9YH0gY3NzPXtlcnJvclN0eWxlfSByb2xlPVwiYWxlcnRcIj5cbiAgICAgIDxJY29uIGljb249e2ljb25FcnJvcn0gY2xhc3NOYW1lPVwiZXJyb3ItaWNvblwiIHNpemU9XCJzbVwiIC8+XG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJlcnJvci10ZXh0XCI+e2Vycm9yfTwvc3Bhbj5cbiAgICAgIHtvbkRpc21pc3MgJiYgKFxuICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgIHNpemU9XCJzbVwiIFxuICAgICAgICAgIHR5cGU9XCJ0ZXJ0aWFyeVwiIFxuICAgICAgICAgIGljb24gXG4gICAgICAgICAgb25DbGljaz17b25EaXNtaXNzfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImVycm9yLWRpc21pc3NcIlxuICAgICAgICAgIGFyaWEtbGFiZWw9XCJEaXNtaXNzIGVycm9yXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxJY29uIGljb249e3JlcXVpcmUoJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9jbG9zZS5zdmcnKS5kZWZhdWx0fSBzaXplPVwic21cIiAvPlxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgZ2V0QXBwU3RvcmUsXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBVc2VEYXRhU291cmNlLFxuICBhcHBDb25maWdVdGlscyxcbiAgdHlwZSBJTURhdGFTb3VyY2VJbmZvLFxuICBEYXRhU291cmNlU3RhdHVzLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgaG9va3Ncbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgSWNvbiwgVG9vbHRpcCwgQnV0dG9uLCBkZWZhdWx0TWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgRW50aXR5U3RhdHVzVHlwZSwgU3RhdHVzSW5kaWNhdG9yIH0gZnJvbSAnLi9jb21tb24tY29tcG9uZW50cydcbmltcG9ydCBpY29uV2FybmluZyBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvd2FybmluZy5zdmcnXG5pbXBvcnQgaWNvbkVycm9yIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmcnXG5pbXBvcnQgeyB1c2VEYXRhU291cmNlRXhpc3RzIH0gZnJvbSAnLi91c2UtZHMtZXhpc3RzJ1xuXG5pbnRlcmZhY2UgQ29udGVudFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB1c2VEYXRhU291cmNlOiBJbW11dGFibGVPYmplY3Q8VXNlRGF0YVNvdXJjZT5cbiAgb25TdGF0dXNDaGFuZ2U/OiAoZW5hYmxlZDogYm9vbGVhbikgPT4gdm9pZFxuICBvbkRhdGFTb3VyY2VDcmVhdGVkPzogKGRzOiBEYXRhU291cmNlKSA9PiB2b2lkXG4gIHNob3dNZXNzYWdlPzogYm9vbGVhblxufVxuXG4vKipcbiAqIFNob3cgaWNvbiBhbmQgbWVzc2FnZSBpZiB0aGUgZGF0YSBzb3VyY2UgZG9lc24ndCB3b3JrLlxuICogQHBhcmFtIHByb3BzXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gRGF0YVNvdXJjZVRpcCAocHJvcHM6IENvbnRlbnRQcm9wcykge1xuICBjb25zdCB7IHdpZGdldElkLCB1c2VEYXRhU291cmNlLCBvblN0YXR1c0NoYW5nZSwgb25EYXRhU291cmNlQ3JlYXRlZCwgc2hvd01lc3NhZ2UgPSBmYWxzZSB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZXMpXG4gIGNvbnN0IGRzRXhpc3RzOiBib29sZWFuID0gdXNlRGF0YVNvdXJjZUV4aXN0cyh7IHdpZGdldElkLCB1c2VEYXRhU291cmNlSWQ6IHVzZURhdGFTb3VyY2UuZGF0YVNvdXJjZUlkIH0pXG4gIGNvbnN0IFtkc1N0YXR1cywgc2V0RHNTdGF0dXNdID0gUmVhY3QudXNlU3RhdGU8J2Vycm9yJyB8ICd3YXJuaW5nJyB8ICdjcmVhdGluZyc+KG51bGwpXG4gIGNvbnN0IFtkYXRhU291cmNlLCBzZXREYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG5cbiAgY29uc3QgaGFuZGxlRHNJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZm86IElNRGF0YVNvdXJjZUluZm8pID0+IHtcbiAgICBpZiAoaW5mbykge1xuICAgICAgY29uc3QgeyBzdGF0dXMsIGluc3RhbmNlU3RhdHVzIH0gPSBpbmZvXG4gICAgICBpZiAoaW5zdGFuY2VTdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuTm90Q3JlYXRlZCkge1xuICAgICAgICBzZXREc1N0YXR1cygnY3JlYXRpbmcnKVxuICAgICAgICBvblN0YXR1c0NoYW5nZT8uKGZhbHNlKVxuICAgICAgfSBlbHNlIGlmIChpbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVFcnJvciB8fCBzdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuTG9hZEVycm9yKSB7XG4gICAgICAgIHNldERzU3RhdHVzKCdlcnJvcicpXG4gICAgICAgIG9uU3RhdHVzQ2hhbmdlPy4oZmFsc2UpXG4gICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSkge1xuICAgICAgICBzZXREc1N0YXR1cygnd2FybmluZycpXG4gICAgICAgIG9uU3RhdHVzQ2hhbmdlPy4oZmFsc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXREc1N0YXR1cyhudWxsKVxuICAgICAgICBvblN0YXR1c0NoYW5nZT8uKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9LCBbb25TdGF0dXNDaGFuZ2VdKVxuXG4gIGNvbnN0IGhhbmRsZURzQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChkczogRGF0YVNvdXJjZSkgPT4ge1xuICAgIHNldERhdGFTb3VyY2UoZHMpXG4gICAgb25EYXRhU291cmNlQ3JlYXRlZD8uKGRzKVxuICB9LCBbb25EYXRhU291cmNlQ3JlYXRlZF0pXG5cbiAgY29uc3QgaGFuZGxlRHNDcmVhdGVGYWlsZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0RGF0YVNvdXJjZShudWxsKVxuICAgIHNldERzU3RhdHVzKCdlcnJvcicpXG4gICAgb25TdGF0dXNDaGFuZ2U/LihmYWxzZSlcbiAgfSwgW29uU3RhdHVzQ2hhbmdlXSlcblxuICBsZXQgc3RhdHVzSWNvblxuICBsZXQgc3RhdHVzTXNnXG4gIGxldCBjb2xvclxuICBpZiAoZHNTdGF0dXMgPT09ICdjcmVhdGluZycpIHtcbiAgICBzdGF0dXNJY29uID0gaWNvbkVycm9yXG4gICAgc3RhdHVzTXNnID0gZ2V0STE4bk1lc3NhZ2UoJ2xvYWRpbmcnKVxuICB9IGVsc2UgaWYgKCFkc0V4aXN0cyB8fCBkc1N0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgIHN0YXR1c0ljb24gPSBpY29uRXJyb3JcbiAgICBzdGF0dXNNc2cgPSBnZXRJMThuTWVzc2FnZSgnZGF0YVNvdXJjZUNyZWF0ZUVycm9yJylcbiAgICBjb2xvciA9ICd2YXIoLS1zeXMtY29sb3ItZXJyb3ItbWFpbiknXG4gIH0gZWxzZSBpZiAoZHNTdGF0dXMgPT09ICd3YXJuaW5nJykge1xuICAgIGxldCBsYWJlbCA9ICcnXG4gICAgY29uc3Qgb3JpZ2luRHMgPSBkYXRhU291cmNlPy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF1cbiAgICBpZiAob3JpZ2luRHMpIHtcbiAgICAgIGxhYmVsID0gb3JpZ2luRHMuZ2V0TGFiZWwoKSB8fCBvcmlnaW5Ecy5nZXREYXRhU291cmNlSnNvbigpLnNvdXJjZUxhYmVsXG4gICAgfSBlbHNlIGlmIChkYXRhU291cmNlKSB7XG4gICAgICBsYWJlbCA9IGRhdGFTb3VyY2UuZ2V0TGFiZWwoKSB8fCBkYXRhU291cmNlLmdldERhdGFTb3VyY2VKc29uKCkubGFiZWxcbiAgICB9XG5cbiAgICBjb25zdCB3aWRnZXRJZCA9IGFwcENvbmZpZ1V0aWxzLmdldFdpZGdldElkQnlPdXRwdXREYXRhU291cmNlKHVzZURhdGFTb3VyY2UpXG4gICAgY29uc3QgYXBwU3RhdGUgPSB3aW5kb3c/LmppbXVDb25maWc/LmlzQnVpbGRlclxuICAgICAgPyBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwU3RhdGVJbkJ1aWxkZXJcbiAgICAgIDogZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpXG4gICAgY29uc3Qgd2lkZ2V0TGFiZWwgPSBhcHBTdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF0/LmxhYmVsXG5cbiAgICBjb2xvciA9ICd2YXIoLS1zeXMtY29sb3Itd2FybmluZy1kYXJrKSdcbiAgICBzdGF0dXNJY29uID0gaWNvbldhcm5pbmdcbiAgICBzdGF0dXNNc2cgPSBnZXRJMThuTWVzc2FnZSgnb3V0cHV0RGF0YUlzTm90R2VuZXJhdGVkJywge1xuICAgICAgb3V0cHV0RHNMYWJlbDogbGFiZWwgPz8gJycsXG4gICAgICBzb3VyY2VXaWRnZXROYW1lOiB3aWRnZXRMYWJlbCA/PyAnJ1xuICAgIH0pXG4gIH1cbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICB7ZHNFeGlzdHMgJiYgKFxuICAgICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudFxuICAgICAgICAgIHVzZURhdGFTb3VyY2U9e3VzZURhdGFTb3VyY2V9XG4gICAgICAgICAgb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRHNJbmZvQ2hhbmdlfVxuICAgICAgICAgIG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZURzQ3JlYXRlZH1cbiAgICAgICAgICBvbkNyZWF0ZURhdGFTb3VyY2VGYWlsZWQ9e2hhbmRsZURzQ3JlYXRlRmFpbGVkfVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICAgIHtkc1N0YXR1cyA9PT0gJ2NyZWF0aW5nJyAmJiA8U3RhdHVzSW5kaWNhdG9yIHN0YXR1c1R5cGU9e0VudGl0eVN0YXR1c1R5cGUuTG9hZGluZ30gdGl0bGU9e3N0YXR1c01zZ30gLz59XG4gICAgICB7KCFkc0V4aXN0cyB8fCBkc1N0YXR1cyA9PT0gJ2Vycm9yJyB8fCBkc1N0YXR1cyA9PT0gJ3dhcm5pbmcnKSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17c3RhdHVzTXNnfT5cbiAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIHR5cGU9J3RlcnRpYXJ5JyBpY29uPjxJY29uIGljb249e3N0YXR1c0ljb259IGNvbG9yPXtjb2xvcn0gLz48L0J1dHRvbj5cbiAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAge3Nob3dNZXNzYWdlICYmIDxkaXYgY2xhc3NOYW1lPSdzdGF0dXMtbWVzc2FnZSc+e3N0YXR1c01zZ308L2Rpdj59XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApXG59XG5cblxuXG4iLCIvKipcbiAqIENvbmZpZ3VyYWJsZSBkZWJ1ZyBsb2dnaW5nIHV0aWxpdHkgZm9yIEV4cGVyaWVuY2UgQnVpbGRlciB3aWRnZXRzXG4gKiBcbiAqIFVzYWdlOlxuICogLSBBZGQgP2RlYnVnPWFsbCB0byBVUkwgdG8gc2VlIGFsbCBkZWJ1ZyBsb2dzXG4gKiAtIEFkZCA/ZGVidWc9SEFTSCxGT1JNIHRvIHNlZSBzcGVjaWZpYyBmZWF0dXJlIGxvZ3NcbiAqIC0gQWRkID9kZWJ1Zz1mYWxzZSB0byBkaXNhYmxlIGFsbCBkZWJ1ZyBsb2dzXG4gKiBcbiAqIEZlYXR1cmVzIChRdWVyeVNpbXBsZSk6XG4gKiAtIEJVRzogS25vd24gYnVncy9pc3N1ZXMgKGFsd2F5cyBsb2dzLCBldmVuIGlmIGRlYnVnPWZhbHNlKSAtIFVzZSBmb3JtYXQ6IGJ1Z0lkLCBjYXRlZ29yeSwgZGVzY3JpcHRpb25cbiAqIC0gSEFTSDogSGFzaCBwYXJhbWV0ZXIgcHJvY2Vzc2luZ1xuICogLSBGT1JNOiBRdWVyeSBmb3JtIGludGVyYWN0aW9uc1xuICogLSBUQVNLOiBRdWVyeSB0YXNrIG1hbmFnZW1lbnRcbiAqIC0gWk9PTTogWm9vbSBiZWhhdmlvclxuICogLSBNQVAtRVhURU5UOiBNYXAgZXh0ZW50IGNoYW5nZXNcbiAqIC0gREFUQS1BQ1RJT046IERhdGEgYWN0aW9uIGV4ZWN1dGlvbiAoQWRkIHRvIE1hcCwgZXRjLilcbiAqIC0gR1JPVVA6IFF1ZXJ5IGdyb3VwaW5nIGFuZCBkcm9wZG93biBzZWxlY3Rpb25cbiAqIC0gU0VMRUNUSU9OOiBTZWxlY3Rpb24gZGV0ZWN0aW9uIGFuZCBpZGVudGlmeSBwb3B1cCB0cmFja2luZ1xuICogLSBXSURHRVQtU1RBVEU6IFdpZGdldCBsaWZlY3ljbGUgZXZlbnRzIChvcGVuL2Nsb3NlIGhhbmRzaGFrZSlcbiAqIC0gUkVTVE9SRTogU2VsZWN0aW9uIHJlc3RvcmF0aW9uIHdoZW4gd2lkZ2V0IG9wZW5zXG4gKiAtIFJFU1VMVFMtTU9ERTogUmVzdWx0cyBtYW5hZ2VtZW50IG1vZGUgc2VsZWN0aW9uIChDcmVhdGUgbmV3LCBBZGQgdG8sIFJlbW92ZSBmcm9tKVxuICogLSBFWFBBTkQtQ09MTEFQU0U6IEV4cGFuZC9jb2xsYXBzZSBzdGF0ZSBtYW5hZ2VtZW50IGZvciByZXN1bHQgaXRlbXNcbiAqIC0gR1JBUEhJQ1MtTEFZRVI6IEdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZyAoaW5kZXBlbmRlbnQgb2YgbGF5ZXIgdmlzaWJpbGl0eSlcbiAqIC0gRVZFTlRTOiBFdmVudCBsaXN0ZW5lciBzZXR1cC9jbGVhbnVwIGFuZCBjdXN0b20gZXZlbnQgZGlzcGF0Y2hpbmdcbiAqIFxuICogVGVtcG9yYXJ5IE1pZ3JhdGlvbiBGZWF0dXJlcyAod2lsbCBiZSByZW1vdmVkIGFmdGVyIG1pZ3JhdGlvbiBjb21wbGV0ZSk6XG4gKiAtIENIVU5LLTEtQ09NUEFSRTogQ2h1bmsgMSAoVVJMIFBhcmFtZXRlcikgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTEtTUlTTUFUQ0g6IENodW5rIDEgbWlzbWF0Y2ggd2FybmluZ3NcbiAqIC0gQ0hVTkstMi1DT01QQVJFOiBDaHVuayAyIChWaXNpYmlsaXR5KSBjb21wYXJpc29uIGxvZ3NcbiAqIC0gQ0hVTkstMi1NSVNNQVRDSDogQ2h1bmsgMiBtaXNtYXRjaCB3YXJuaW5nc1xuICogLSBDSFVOSy0zLUNPTVBBUkU6IENodW5rIDMgKFNlbGVjdGlvbi9SZXN0b3JhdGlvbikgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTMtREVDSVNJT046IENodW5rIDMgZGVjaXNpb24gcG9pbnQgbG9nc1xuICogLSBDSFVOSy0zLUZBTExCQUNLOiBDaHVuayAzIGZhbGxiYWNrIGxvZ2ljIGxvZ3NcbiAqIC0gQ0hVTkstNC1DT01QQVJFOiBDaHVuayA0IChHcmFwaGljcyBMYXllcikgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTUtQ09NUEFSRTogQ2h1bmsgNSAoQWNjdW11bGF0ZWQgUmVjb3JkcykgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTYtQ09NUEFSRTogQ2h1bmsgNiAoTWFwIFZpZXcpIGNvbXBhcmlzb24gbG9nc1xuICogLSBDSFVOSy02LU1JU01BVENIOiBDaHVuayA2IG1pc21hdGNoIHdhcm5pbmdzXG4gKiAtIENIVU5LLTctQ09NUEFSRTogQ2h1bmsgNyAoRXZlbnRzKSBjb21wYXJpc29uIGxvZ3NcbiAqIFxuICogRmVhdHVyZXMgKEhlbHBlclNpbXBsZSk6XG4gKiAtIEhBU0g6IEhhc2ggcGFyYW1ldGVyIG1vbml0b3JpbmcgYW5kIHdpZGdldCBvcGVuaW5nXG4gKiAtIFNFTEVDVElPTjogU2VsZWN0aW9uIHRyYWNraW5nIGZyb20gUXVlcnlTaW1wbGVcbiAqIC0gV0lER0VULVNUQVRFOiBXaWRnZXQgc3RhdGUgaGFuZHNoYWtlIChvcGVuL2Nsb3NlIGV2ZW50cylcbiAqIC0gUkVTVE9SRTogU2VsZWN0aW9uIHJlc3RvcmF0aW9uIGF0dGVtcHRzIGFuZCByZXN1bHRzXG4gKi9cblxudHlwZSBEZWJ1Z0ZlYXR1cmUgPSAnQlVHJyB8ICdIQVNIJyB8ICdIQVNILUVYRUMnIHwgJ0ZPUk0nIHwgJ1RBU0snIHwgJ1pPT00nIHwgJ01BUC1FWFRFTlQnIHwgJ0RBVEEtQUNUSU9OJyB8ICdHUk9VUCcgfCAnU0VMRUNUSU9OJyB8ICdXSURHRVQtU1RBVEUnIHwgJ1JFU1RPUkUnIHwgJ1JFU1VMVFMtTU9ERScgfCAnRVhQQU5ELUNPTExBUFNFJyB8ICdHUkFQSElDUy1MQVlFUicgfCAnRVZFTlRTJyB8ICdDSFVOSy0xLUNPTVBBUkUnIHwgJ0NIVU5LLTEtTUlTTUFUQ0gnIHwgJ0NIVU5LLTItQ09NUEFSRScgfCAnQ0hVTkstMi1NSVNNQVRDSCcgfCAnQ0hVTkstMy1DT01QQVJFJyB8ICdDSFVOSy0zLURFQ0lTSU9OJyB8ICdDSFVOSy0zLUZBTExCQUNLJyB8ICdDSFVOSy00LUNPTVBBUkUnIHwgJ0NIVU5LLTUtQ09NUEFSRScgfCAnQ0hVTkstNi1DT01QQVJFJyB8ICdDSFVOSy02LU1JU01BVENIJyB8ICdDSFVOSy03LUNPTVBBUkUnIHwgJ2FsbCcgfCAnZmFsc2UnXG5cbmludGVyZmFjZSBEZWJ1Z0xvZ2dlck9wdGlvbnMge1xuICB3aWRnZXROYW1lOiBzdHJpbmdcbiAgZmVhdHVyZXM6IERlYnVnRmVhdHVyZVtdXG59XG5cbmNsYXNzIERlYnVnTG9nZ2VyIHtcbiAgcHJpdmF0ZSBlbmFibGVkRmVhdHVyZXM6IFNldDxEZWJ1Z0ZlYXR1cmU+ID0gbmV3IFNldCgpXG4gIHByaXZhdGUgaW5pdGlhbGl6ZWQgPSBmYWxzZVxuICBwcml2YXRlIHdpZGdldE5hbWU6IHN0cmluZ1xuICBwcml2YXRlIGZlYXR1cmVzOiBEZWJ1Z0ZlYXR1cmVbXVxuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IERlYnVnTG9nZ2VyT3B0aW9ucykge1xuICAgIHRoaXMud2lkZ2V0TmFtZSA9IG9wdGlvbnMud2lkZ2V0TmFtZVxuICAgIHRoaXMuZmVhdHVyZXMgPSBvcHRpb25zLmZlYXR1cmVzXG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHJldHVyblxuXG4gICAgLy8gQ2hlY2sgVVJMIHBhcmFtZXRlcnMgKGJvdGggY3VycmVudCB3aW5kb3cgYW5kIHBhcmVudCBmb3IgaWZyYW1lcylcbiAgICBsZXQgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgIGxldCBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuXG4gICAgLy8gSWYgbm90IGZvdW5kIGluIGN1cnJlbnQgd2luZG93LCBjaGVjayBwYXJlbnQgKG5lZWRlZCBmb3IgRXhCIGlmcmFtZXMpXG4gICAgaWYgKGRlYnVnVmFsdWUgPT09IG51bGwgJiYgd2luZG93LnBhcmVudCAhPT0gd2luZG93KSB7XG4gICAgICB0cnkge1xuICAgICAgICB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5wYXJlbnQubG9jYXRpb24uc2VhcmNoKVxuICAgICAgICBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBDcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb24gbWlnaHQgcHJldmVudCBhY2Nlc3MgdG8gcGFyZW50IGxvY2F0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlYnVnVmFsdWUgPT09ICdmYWxzZScpIHtcbiAgICAgIC8vIEV4cGxpY2l0bHkgZGlzYWJsZWRcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZGVidWdWYWx1ZSA9PT0gJ2FsbCcpIHtcbiAgICAgIC8vIEVuYWJsZSBhbGwgZmVhdHVyZXMgb25seSBpZiBleHBsaWNpdGx5IHNldCB0byAnYWxsJ1xuICAgICAgdGhpcy5mZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICBpZiAoZmVhdHVyZSAhPT0gJ2FsbCcgJiYgZmVhdHVyZSAhPT0gJ2ZhbHNlJykge1xuICAgICAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZChmZWF0dXJlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgY29uc29sZS5sb2coYFske3RoaXMud2lkZ2V0TmFtZX0tREVCVUddIEVuYWJsZWQgQUxMIGZlYXR1cmVzOmAsIEFycmF5LmZyb20odGhpcy5lbmFibGVkRmVhdHVyZXMpKVxuICAgIH0gZWxzZSBpZiAoZGVidWdWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgLy8gUGFyc2UgY29tbWEtc2VwYXJhdGVkIGZlYXR1cmUgbGlzdFxuICAgICAgY29uc3QgcmVxdWVzdGVkRmVhdHVyZXMgPSBkZWJ1Z1ZhbHVlLnNwbGl0KCcsJykubWFwKGYgPT4gZi50cmltKCkudG9VcHBlckNhc2UoKSBhcyBEZWJ1Z0ZlYXR1cmUpXG4gICAgICByZXF1ZXN0ZWRGZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICBpZiAoZmVhdHVyZS50b1VwcGVyQ2FzZSgpID09PSAnQUxMJykge1xuICAgICAgICAgIC8vIEVuYWJsZSBhbGwgZmVhdHVyZXMgZm9yIHRoaXMgd2lkZ2V0XG4gICAgICAgICAgdGhpcy5mZWF0dXJlcy5mb3JFYWNoKGYgPT4ge1xuICAgICAgICAgICAgaWYgKGYgIT09ICdhbGwnICYmIGYgIT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKGYpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZlYXR1cmVzLmluY2x1ZGVzKGZlYXR1cmUpKSB7XG4gICAgICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKGZlYXR1cmUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWVcbiAgfVxuXG4gIHByaXZhdGUgaXNFbmFibGVkKGZlYXR1cmU6IERlYnVnRmVhdHVyZSk6IGJvb2xlYW4ge1xuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gICAgXG4gICAgLy8gQlVHIGxldmVsIGFsd2F5cyBlbmFibGVkLCByZWdhcmRsZXNzIG9mIGRlYnVnIHN3aXRjaGVzIChldmVuIGlmIGRlYnVnPWZhbHNlKVxuICAgIGlmIChmZWF0dXJlID09PSAnQlVHJykge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuZW5hYmxlZEZlYXR1cmVzLmhhcygnYWxsJykpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aGlzLmVuYWJsZWRGZWF0dXJlcy5oYXMoZmVhdHVyZSlcbiAgfVxuXG4gIGxvZyhmZWF0dXJlOiBEZWJ1Z0ZlYXR1cmUsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIC8vIEJVRyBsZXZlbCBhbHdheXMgbG9ncywgZXZlbiBpZiBkZWJ1Zz1mYWxzZVxuICAgIGlmIChmZWF0dXJlID09PSAnQlVHJykge1xuICAgICAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICAgICAgZmVhdHVyZTogJ0JVRycsXG4gICAgICAgIGJ1Z0lkOiBkYXRhLmJ1Z0lkIHx8ICdVTktOT1dOJyxcbiAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0dFTkVSQUwnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgLi4uZGF0YVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVc2UgY29uc29sZS53YXJuIHdpdGggZW1vamkgZm9ybWF0IHRvIG1ha2UgYnVncyBzdGFuZCBvdXRcbiAgICAgIGNvbnNvbGUud2FybihgWyR7dGhpcy53aWRnZXROYW1lLnRvVXBwZXJDYXNlKCl9IOKaoO+4jyBCVUddYCwgSlNPTi5zdHJpbmdpZnkobG9nRGF0YSwgbnVsbCwgMikpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gUmVndWxhciBmZWF0dXJlIGxvZ2dpbmcgKGV4aXN0aW5nIGJlaGF2aW9yKVxuICAgIGlmICghdGhpcy5pc0VuYWJsZWQoZmVhdHVyZSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgICBmZWF0dXJlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAuLi5kYXRhXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFske3RoaXMud2lkZ2V0TmFtZS50b1VwcGVyQ2FzZSgpfS0ke2ZlYXR1cmV9XWAsIEpTT04uc3RyaW5naWZ5KGxvZ0RhdGEsIG51bGwsIDIpKVxuICB9XG5cbiAgZ2V0Q29uZmlnKCk6IHsgZW5hYmxlZEZlYXR1cmVzOiBzdHJpbmdbXSwgZGVidWdWYWx1ZTogc3RyaW5nIHwgbnVsbCB9IHtcbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICAgIFxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBjb25zdCBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBlbmFibGVkRmVhdHVyZXM6IEFycmF5LmZyb20odGhpcy5lbmFibGVkRmVhdHVyZXMpLFxuICAgICAgZGVidWdWYWx1ZVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJ1ZyBsb2dnZXIgaW5zdGFuY2UgZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpIHtcbiAgcmV0dXJuIG5ldyBEZWJ1Z0xvZ2dlcih7XG4gICAgd2lkZ2V0TmFtZTogJ1FVRVJZU0lNUExFJyxcbiAgICBmZWF0dXJlczogW1xuICAgICAgJ0hBU0gnLCAnRk9STScsICdUQVNLJywgJ1pPT00nLCAnTUFQLUVYVEVOVCcsICdEQVRBLUFDVElPTicsICdHUk9VUCcsIFxuICAgICAgJ1NFTEVDVElPTicsICdXSURHRVQtU1RBVEUnLCAnUkVTVE9SRScsICdSRVNVTFRTLU1PREUnLCAnRVhQQU5ELUNPTExBUFNFJywgJ0dSQVBISUNTLUxBWUVSJywgJ0VWRU5UUycsXG4gICAgICAvLyBUZW1wb3JhcnkgbWlncmF0aW9uIGZlYXR1cmVzICh3aWxsIGJlIHJlbW92ZWQgYWZ0ZXIgbWlncmF0aW9uIGNvbXBsZXRlKVxuICAgICAgJ0NIVU5LLTEtQ09NUEFSRScsICdDSFVOSy0xLU1JU01BVENIJywgJ0NIVU5LLTItQ09NUEFSRScsICdDSFVOSy0yLU1JU01BVENIJywgJ0NIVU5LLTMtQ09NUEFSRScsICdDSFVOSy0zLURFQ0lTSU9OJywgJ0NIVU5LLTMtRkFMTEJBQ0snLFxuICAgICAgJ0NIVU5LLTQtQ09NUEFSRScsICdDSFVOSy01LUNPTVBBUkUnLCAnQ0hVTkstNi1DT01QQVJFJywgJ0NIVU5LLTYtTUlTTUFUQ0gnLCAnQ0hVTkstNy1DT01QQVJFJ1xuICAgIF1cbiAgfSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVidWcgbG9nZ2VyIGluc3RhbmNlIGZvciBIZWxwZXJTaW1wbGUgd2lkZ2V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIZWxwZXJTaW1wbGVEZWJ1Z0xvZ2dlcigpIHtcbiAgcmV0dXJuIG5ldyBEZWJ1Z0xvZ2dlcih7XG4gICAgd2lkZ2V0TmFtZTogJ0hFTFBFUlNJTVBMRScsXG4gICAgZmVhdHVyZXM6IFsnSEFTSCcsICdTRUxFQ1RJT04nLCAnV0lER0VULVNUQVRFJywgJ1JFU1RPUkUnXVxuICB9KVxufVxuXG4iLCJpbXBvcnQge1xuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgSU1BcHBDb25maWdcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW50ZXJmYWNlIFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB1c2VEYXRhU291cmNlSWQ6IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlRGF0YVNvdXJjZUV4aXN0cyAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgd2lkZ2V0SWQsIHVzZURhdGFTb3VyY2VJZCB9ID0gcHJvcHNcblxuICBjb25zdCBleGlzdHM6IGJvb2xlYW4gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGxldCBhcHBDb25maWc6IElNQXBwQ29uZmlnXG4gICAgaWYgKHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlcikge1xuICAgICAgYXBwQ29uZmlnID0gc3RhdGUuYXBwU3RhdGVJbkJ1aWxkZXIuYXBwQ29uZmlnXG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcENvbmZpZyA9IHN0YXRlLmFwcENvbmZpZ1xuICAgIH1cbiAgICBjb25zdCB1c2VEYXRhU291cmNlcyA9IGFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXS51c2VEYXRhU291cmNlcyA/PyBbXVxuICAgIHJldHVybiB1c2VEYXRhU291cmNlcy5zb21lKHVzZURzID0+IHVzZURzLmRhdGFTb3VyY2VJZCA9PT0gdXNlRGF0YVNvdXJjZUlkKVxuICB9KVxuXG4gIHJldHVybiBleGlzdHNcbn1cblxuXG5cbiIsImltcG9ydCB0eXBlIHsgSVBvcHVwSW5mbyB9IGZyb20gJ0Blc3JpL2FyY2dpcy1yZXN0LWZlYXR1cmUtc2VydmljZSdcbmltcG9ydCB0eXBlIHsgSW50bFNoYXBlLCBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuXG4vKipcbiAqIFRvZ2dsZSBpdGVtcyBpbiBhbiBhcnJheVxuICovXG5leHBvcnQgY29uc3QgdG9nZ2xlSXRlbUluQXJyYXkgPSAoaXRlbSwgaXRlbXMgPSBbXSkgPT4gaXRlbXMuaW5jbHVkZXMoaXRlbSkgPyBpdGVtcy5maWx0ZXIoaSA9PiBpICE9PSBpdGVtKSA6IFsuLi5pdGVtcywgaXRlbV1cblxuZXhwb3J0IGludGVyZmFjZSBEYXRhU291cmNlTWFwIHtcbiAgW2RhdGFTb3VyY2VJZDogc3RyaW5nXTogRGF0YVNvdXJjZVxufVxuXG5leHBvcnQgdHlwZSBHZXRJMThuTWVzc2FnZVR5cGUgPSAoaWQ6IHN0cmluZywgb3B0aW9ucz86IHsgbWVzc2FnZXM/OiBhbnksIHZhbHVlcz86IGFueSB9KSA9PiBzdHJpbmdcbi8qKlxuICogQSBmYWN0b3J5IHRvIGNyZWF0ZSBhIGZ1bmN0aW9uIG9mIGdldHRpbmcgaTE4biBtZXNzYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHZXRJMThuTWVzc2FnZSAob3B0aW9uczogeyBpbnRsOiBJbnRsU2hhcGUsIGRlZmF1bHRNZXNzYWdlcz86IGFueSB9KSB7XG4gIGNvbnN0IHsgaW50bCwgZGVmYXVsdE1lc3NhZ2VzID0ge30gfSA9IG9wdGlvbnMgfHwge31cbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2U6IEdldEkxOG5NZXNzYWdlVHlwZSA9IChpZCwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgbWVzc2FnZXMsIHZhbHVlcyB9ID0gb3B0aW9ucyB8fCB7fVxuICAgIHJldHVybiBpbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZCwgZGVmYXVsdE1lc3NhZ2U6IChtZXNzYWdlcyB8fCBkZWZhdWx0TWVzc2FnZXMpW2lkXSB9LCB2YWx1ZXMpXG4gIH1cbiAgcmV0dXJuIGdldEkxOG5NZXNzYWdlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQgKHBvcHVwSW5mbzogSVBvcHVwSW5mbykge1xuICBjb25zdCByZXN1bHQgPSBbXVxuICBpZiAocG9wdXBJbmZvPy5wb3B1cEVsZW1lbnRzPy5sZW5ndGggPiAwKSB7XG4gICAgcG9wdXBJbmZvLnBvcHVwRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICdmaWVsZHMnICYmIGVsZW1lbnQuZmllbGRJbmZvcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICByZXN1bHQucHVzaCguLi5lbGVtZW50LmZpZWxkSW5mb3MpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuICByZXR1cm4gcmVzdWx0XG59XG5cblxuXG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfX2Vtb3Rpb25fcmVhY3RfanN4X3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9hcmNnaXNfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9jb3JlX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfbGF5b3V0c19sYXlvdXRfcnVudGltZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3RoZW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdWlfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9iYXNpY19zcWxfZXhwcmVzc2lvbl9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3JlYWN0X187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3dpZGdldHNfc2hhcmVkX2NvZGVfY29tbW9uX187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiLyoqXHJcbiAqIFdlYnBhY2sgd2lsbCByZXBsYWNlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHdpdGggX193ZWJwYWNrX3JlcXVpcmVfXy5wIHRvIHNldCB0aGUgcHVibGljIHBhdGggZHluYW1pY2FsbHkuXHJcbiAqIFRoZSByZWFzb24gd2h5IHdlIGNhbid0IHNldCB0aGUgcHVibGljUGF0aCBpbiB3ZWJwYWNrIGNvbmZpZyBpczogd2UgY2hhbmdlIHRoZSBwdWJsaWNQYXRoIHdoZW4gZG93bmxvYWQuXHJcbiAqICovXHJcbl9fd2VicGFja19wdWJsaWNfcGF0aF9fID0gd2luZG93LmppbXVDb25maWcuYmFzZVVybFxyXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcywgdHlwZSBBbGxXaWRnZXRQcm9wcywgRGF0YVNvdXJjZU1hbmFnZXIsIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCwgTWVzc2FnZU1hbmFnZXIsIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSwgdHlwZSBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgUGFwZXIsIFdpZGdldFBsYWNlaG9sZGVyIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHR5cGUgSU1Db25maWcsIFF1ZXJ5QXJyYW5nZVR5cGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IEppbXVNYXBWaWV3Q29tcG9uZW50LCB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5cbmltcG9ydCB7IHZlcnNpb25NYW5hZ2VyIH0gZnJvbSAnLi4vdmVyc2lvbi1tYW5hZ2VyJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGlzdCB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0J1xuaW1wb3J0IHsgVGFza0xpc3RJbmxpbmUgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1pbmxpbmUnXG5pbXBvcnQgeyBUYXNrTGlzdFBvcHBlcldyYXBwZXIgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1wb3BwZXItd3JhcHBlcidcbmltcG9ydCB7IFF1ZXJ5V2lkZ2V0Q29udGV4dCB9IGZyb20gJy4vd2lkZ2V0LWNvbnRleHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyBXSURHRVRfVkVSU0lPTiB9IGZyb20gJy4uL3ZlcnNpb24nXG4vLyBDaHVuayAxOiBVUkwgUGFyYW1ldGVyIENvbnN1bXB0aW9uIE1hbmFnZXIgKHIwMTguOClcbmltcG9ydCB7IFVybENvbnN1bXB0aW9uTWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLXVybC1jb25zdW1wdGlvbidcbi8vIENodW5rIDI6IFdpZGdldCBWaXNpYmlsaXR5IEVuZ2luZSBNYW5hZ2VyIChyMDE4LjEzKSAtIFN0ZXAgMi4zOiBTd2l0Y2ggdG8gbWFuYWdlclxuaW1wb3J0IHsgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIgfSBmcm9tICcuL2hvb2tzL3VzZS13aWRnZXQtdmlzaWJpbGl0eSdcbi8vIENodW5rIDY6IE1hcCBWaWV3IE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4xNCkgLSBTdGVwIDYuMTogQWRkIG1hbmFnZXIgd2l0aG91dCBpbnRlZ3JhdGlvblxuaW1wb3J0IHsgTWFwVmlld01hbmFnZXIgfSBmcm9tICcuL2hvb2tzL3VzZS1tYXAtdmlldydcbi8vIENodW5rIDQ6IEdyYXBoaWNzIExheWVyIE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4yNCkgLSBTdGVwIDQuMjogUGFyYWxsZWwgZXhlY3V0aW9uXG5pbXBvcnQgeyBHcmFwaGljc0xheWVyTWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLWdyYXBoaWNzLWxheWVyJ1xuLy8gQ2h1bmsgNTogQWNjdW11bGF0ZWQgUmVjb3JkcyBNYW5hZ2VtZW50IE1hbmFnZXIgKHIwMTguMjYpIC0gU3RlcCA1LjE6IEFkZCBtYW5hZ2VyIHdpdGhvdXQgaW50ZWdyYXRpb25cbmltcG9ydCB7IEFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIgfSBmcm9tICcuL2hvb2tzL3VzZS1hY2N1bXVsYXRlZC1yZWNvcmRzJ1xuLy8gQ2h1bmsgNzogRXZlbnQgSGFuZGxpbmcgTWFuYWdlciAocjAxOC41OSkgLSBTdGVwIDcuMTogQ3JlYXRlIEV2ZW50IE1hbmFnZXJcbmltcG9ydCB7IEV2ZW50TWFuYWdlciwgT1BFTl9XSURHRVRfRVZFTlQsIFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwgUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCB9IGZyb20gJy4vaG9va3MvdXNlLWV2ZW50LWhhbmRsaW5nJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbi8vIEV2ZW50IGNvbnN0YW50cyBtb3ZlZCB0byBFdmVudE1hbmFnZXIgKHIwMTguNTkgLSBDaHVuayA3LjEpXG5cbi8qKlxuICogUXVlcnlTaW1wbGUgV2lkZ2V0XG4gKiBcbiAqIEEgaGlnaC1wZXJmb3JtYW5jZSBxdWVyeSB3aWRnZXQgZm9yIEFyY0dJUyBFeHBlcmllbmNlIEJ1aWxkZXIgdGhhdCBwcm92aWRlczpcbiAqIC0gVW5pdmVyc2FsIFNRTCBvcHRpbWl6YXRpb24gZm9yIGRhdGFiYXNlIGluZGV4IHVzYWdlXG4gKiAtIER1YWwtbW9kZSBkZWVwIGxpbmtpbmcgKGhhc2ggZnJhZ21lbnRzIGFuZCBxdWVyeSBzdHJpbmdzKVxuICogLSBSZXN1bHRzIGFjY3VtdWxhdGlvbiBhY3Jvc3MgbXVsdGlwbGUgcXVlcmllc1xuICogLSBTZWxlY3Rpb24gcGVyc2lzdGVuY2UgYW5kIHJlc3RvcmF0aW9uXG4gKiAtIEdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZyBmb3IgbWFwIHZpc3VhbGl6YXRpb25cbiAqIFxuICogQXJjaGl0ZWN0dXJlOlxuICogVGhpcyB3aWRnZXQgZm9sbG93cyBhIFwiSG9vayAmIFNoZWxsXCIgcGF0dGVybiB3aGVyZSBjb21wbGV4IGxvZ2ljIGlzIGV4dHJhY3RlZCBpbnRvXG4gKiBtYW5hZ2VyIGNsYXNzZXMgKFVybENvbnN1bXB0aW9uTWFuYWdlciwgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIsIE1hcFZpZXdNYW5hZ2VyKVxuICogdG8ga2VlcCB0aGUgbWFpbiB3aWRnZXQgY2xhc3MgY2xlYW4gYW5kIG1haW50YWluYWJsZS5cbiAqIFxuICogQHNpbmNlIDEuMTkuMC1yMDE4LjE4XG4gKiBAc2VlIHtAbGluayBVcmxDb25zdW1wdGlvbk1hbmFnZXJ9IGZvciBVUkwgcGFyYW1ldGVyIGhhbmRsaW5nXG4gKiBAc2VlIHtAbGluayBXaWRnZXRWaXNpYmlsaXR5TWFuYWdlcn0gZm9yIHBhbmVsIHZpc2liaWxpdHkgZGV0ZWN0aW9uXG4gKiBAc2VlIHtAbGluayBNYXBWaWV3TWFuYWdlcn0gZm9yIG1hcCB2aWV3IHJlZmVyZW5jZSBtYW5hZ2VtZW50XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpZGdldCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8QWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+LCB7IFxuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0sIFxuICBpc1BhbmVsVmlzaWJsZT86IGJvb2xlYW4sIFxuICBoYXNTZWxlY3Rpb24/OiBib29sZWFuLCBcbiAgc2VsZWN0aW9uUmVjb3JkQ291bnQ/OiBudW1iZXIsIFxuICBsYXN0U2VsZWN0aW9uPzogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSwgXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZSwgXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW10sIFxuICBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ/OiBib29sZWFuLCBcbiAgYWN0aXZlVGFiPzogJ3F1ZXJ5JyB8ICdyZXN1bHRzJ1xufT4ge1xuICBzdGF0aWMgdmVyc2lvbk1hbmFnZXIgPSB2ZXJzaW9uTWFuYWdlclxuICAvLyBDaHVuayAxOiBVUkwgUGFyYW1ldGVyIENvbnN1bXB0aW9uIE1hbmFnZXIgKHIwMTguOClcbiAgcHJpdmF0ZSB1cmxDb25zdW1wdGlvbk1hbmFnZXIgPSBuZXcgVXJsQ29uc3VtcHRpb25NYW5hZ2VyKClcbiAgLy8gQ2h1bmsgMjogV2lkZ2V0IFZpc2liaWxpdHkgRW5naW5lIE1hbmFnZXIgKHIwMTguMTMpIC0gU3RlcCAyLjM6IFN3aXRjaCB0byBtYW5hZ2VyXG4gIHByaXZhdGUgdmlzaWJpbGl0eU1hbmFnZXIgPSBuZXcgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIoKVxuICBcbiAgLy8gUmVmcyBtdXN0IGJlIGRlY2xhcmVkIGJlZm9yZSBtYW5hZ2VycyB0aGF0IHVzZSB0aGVtXG4gIHByaXZhdGUgd2lkZ2V0UmVmID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpXG4gIHByaXZhdGUgZ3JhcGhpY3NMYXllclJlZiA9IFJlYWN0LmNyZWF0ZVJlZjxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+KClcbiAgcHJpdmF0ZSBtYXBWaWV3UmVmID0gUmVhY3QuY3JlYXRlUmVmPF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+KClcbiAgXG4gIC8vIENodW5rIDY6IE1hcCBWaWV3IE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4xNikgLSBTdGVwIDYuMzogU3dpdGNoIHRvIG1hbmFnZXJcbiAgcHJpdmF0ZSBtYXBWaWV3TWFuYWdlciA9IG5ldyBNYXBWaWV3TWFuYWdlcih0aGlzLm1hcFZpZXdSZWYpXG4gIC8vIENodW5rIDQ6IEdyYXBoaWNzIExheWVyIE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4yNCkgLSBTdGVwIDQuMjogUGFyYWxsZWwgZXhlY3V0aW9uXG4gIHByaXZhdGUgZ3JhcGhpY3NMYXllck1hbmFnZXIgPSBuZXcgR3JhcGhpY3NMYXllck1hbmFnZXIodGhpcy5ncmFwaGljc0xheWVyUmVmLCB0aGlzLm1hcFZpZXdSZWYpXG4gIC8vIENodW5rIDU6IEFjY3VtdWxhdGVkIFJlY29yZHMgTWFuYWdlbWVudCBNYW5hZ2VyIChyMDE4LjI2KSAtIFN0ZXAgNS4xOiBBZGQgbWFuYWdlciB3aXRob3V0IGludGVncmF0aW9uXG4gIHByaXZhdGUgYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciA9IG5ldyBBY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyKClcbiAgLy8gQ2h1bmsgNzogRXZlbnQgSGFuZGxpbmcgTWFuYWdlciAocjAxOC41OSkgLSBTdGVwIDcuMTogQ3JlYXRlIEV2ZW50IE1hbmFnZXJcbiAgcHJpdmF0ZSBldmVudE1hbmFnZXIgPSBuZXcgRXZlbnRNYW5hZ2VyKClcbiAgXG4gIC8vIFRyYWNrIHByb2Nlc3NlZCBoYXNoIHBhcmFtZXRlcnMgdG8gcHJldmVudCByZS1leGVjdXRpb24gd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAvLyBLZXk6IFwic2hvcnRJZDp2YWx1ZVwiIChlLmcuLCBcInBpbjoyMjIzMDU5MDEzXCIpXG4gIHByaXZhdGUgcHJvY2Vzc2VkSGFzaFBhcmFtc1JlZiA9IG5ldyBTZXQ8c3RyaW5nPigpXG5cbiAgc3RhdGU6IHsgXG4gICAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9LCBcbiAgICBpc1BhbmVsVmlzaWJsZT86IGJvb2xlYW4sIFxuICAgIGhhc1NlbGVjdGlvbj86IGJvb2xlYW4sIFxuICAgIHNlbGVjdGlvblJlY29yZENvdW50PzogbnVtYmVyLCBcbiAgICBsYXN0U2VsZWN0aW9uPzogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSwgXG4gICAgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlLCBcbiAgICBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdLCBcbiAgICBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ/OiBib29sZWFuLCBcbiAgICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnLFxuICAgIC8vIFRyYWNrIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgd2lkZ2V0IC0gb25seSB0aGVuIHNob3VsZCBxdWVyeS10YXNrLWxpc3QgdXNlIGluaXRpYWxRdWVyeVZhbHVlIGZvciBzZWxlY3Rpb25cbiAgICAvLyBVc2luZyBzdGF0ZSBpbnN0ZWFkIG9mIHJlZiBlbnN1cmVzIFJlYWN0IHRyaWdnZXJzIHJlLXJlbmRlcnMgd2hlbiBmbGFnIGNoYW5nZXNcbiAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbj86IGJvb2xlYW5cbiAgfSA9IHtcbiAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sIC8vIERlZmF1bHQgbW9kZVxuICAgIGFjdGl2ZVRhYjogJ3F1ZXJ5J1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGFiIGNoYW5nZSBiZXR3ZWVuIFwiUXVlcnlcIiBhbmQgXCJSZXN1bHRzXCIgdGFicy5cbiAgICogXG4gICAqIEBwYXJhbSBhY3RpdmVUYWIgLSBUaGUgdGFiIHRvIHN3aXRjaCB0byAoJ3F1ZXJ5JyBvciAncmVzdWx0cycpXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKi9cbiAgaGFuZGxlVGFiQ2hhbmdlID0gKGFjdGl2ZVRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBhY3RpdmVUYWIgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIEhlbHBlclNpbXBsZSdzIG9wZW4gd2lkZ2V0IGV2ZW50LlxuICAgKiBRdWVyeVNpbXBsZSBzaG91bGQgb25seSBwcm9jZXNzIGhhc2ggcGFyYW1ldGVycyB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5zIHRoZSB3aWRnZXQuXG4gICAqIFRoaXMgZW5zdXJlcyBIZWxwZXJTaW1wbGUgcmVtYWlucyB0aGUgb3JjaGVzdHJhdG9yIGFuZCBwcmV2ZW50cyBhdXRvbm9tb3VzIGhhc2ggcHJvY2Vzc2luZy5cbiAgICovXG4gIGhhbmRsZU9wZW5XaWRnZXRFdmVudCA9IChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWhhbmRsZW9wZW53aWRnZXRldmVudC1yZWNlaXZlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBldmVudFdpZGdldElkOiBldmVudC5kZXRhaWw/LndpZGdldElkLFxuICAgICAgbWF0Y2hlczogZXZlbnQuZGV0YWlsPy53aWRnZXRJZCA9PT0gaWQsXG4gICAgICBjdXJyZW50U3RhdGU6IHtcbiAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICAgIHByb2Nlc3NlZEhhc2hQYXJhbXM6IEFycmF5LmZyb20odGhpcy5wcm9jZXNzZWRIYXNoUGFyYW1zUmVmKSxcbiAgICAgICAgY3VycmVudFVybEhhc2g6IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gT25seSBwcm9jZXNzIGlmIHRoaXMgZXZlbnQgaXMgZm9yIG91ciB3aWRnZXRcbiAgICBpZiAoZXZlbnQuZGV0YWlsPy53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWhhbmRsZW9wZW53aWRnZXRldmVudC1pZ25vcmVkLXdyb25nLXdpZGdldCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgZXZlbnRXaWRnZXRJZDogZXZlbnQuZGV0YWlsPy53aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIE5PVEU6IFdlIGRvbid0IGNoZWNrIHByb2Nlc3NlZCBoYXNoZXMgaGVyZSBhbnltb3JlXG4gICAgLy8gVGhlIGNoZWNrIGhhcHBlbnMgaW4gb25Jbml0aWFsVmFsdWVGb3VuZCBhZnRlciB3ZSBrbm93IHdoaWNoIHNob3J0SWQ6dmFsdWUgcGFpciBpcyBiZWluZyBwcm9jZXNzZWRcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ29wZW4td2lkZ2V0LWV2ZW50LXJlY2VpdmVkLWZyb20taGVscGVyc2ltcGxlJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gU2V0IGZsYWcgdG8gYWxsb3cgcXVlcnktdGFzay1saXN0IHRvIHVzZSBpbml0aWFsUXVlcnlWYWx1ZSBmb3Igc2VsZWN0aW9uXG4gICAgLy8gVGhpcyBlbnN1cmVzIHdlIG9ubHkgcmVhY3QgdG8gaGFzaCBwYXJhbWV0ZXJzIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgdXNcbiAgICAvLyBVc2luZyBzdGF0ZSBpbnN0ZWFkIG9mIHJlZiBlbnN1cmVzIFJlYWN0IHRyaWdnZXJzIHJlLXJlbmRlciBzbyBxdWVyeS10YXNrLWxpc3Qgc2VlcyB0aGUgY2hhbmdlXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0cnVlIH0sICgpID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWZsYWctc2V0LXRydWUtc3RhdGUtdXBkYXRlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgbmV3U3RhdGU6IHtcbiAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgICB9LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ3Nob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLWZsYWctc2V0LXRydWUnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgZmxhZ1ZhbHVlOiB0cnVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBOb3cgY2hlY2sgVVJMIHBhcmFtZXRlcnMgLSBIZWxwZXJTaW1wbGUgaGFzIGV4cGxpY2l0bHkgb3BlbmVkIHVzXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWNoZWNrdXJscGFyYW1ldGVycy1zdGFydGluZycsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy51cmxDb25zdW1wdGlvbk1hbmFnZXIuY2hlY2tVcmxQYXJhbWV0ZXJzKFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICB7XG4gICAgICAgIG9uSW5pdGlhbFZhbHVlRm91bmQ6ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1vbmluaXRpYWx2YWx1ZWZvdW5kLWNhbGxlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgIGhhc1ZhbHVlOiAhIXZhbHVlLFxuICAgICAgICAgICAgdmFsdWVTaG9ydElkOiB2YWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICAgIHZhbHVlVmFsdWU6IHZhbHVlPy52YWx1ZSxcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIHNwZWNpZmljIHNob3J0SWQ6dmFsdWUgY29tYmluYXRpb24gd2FzIGFscmVhZHkgcHJvY2Vzc2VkXG4gICAgICAgICAgICBjb25zdCBwYXJhbUtleSA9IGAke3ZhbHVlLnNob3J0SWR9OiR7dmFsdWUudmFsdWV9YFxuICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc2VkSGFzaFBhcmFtc1JlZi5oYXMocGFyYW1LZXkpKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtb25pbml0aWFsdmFsdWVmb3VuZC1hbHJlYWR5LXByb2Nlc3NlZCcsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgc2hvcnRJZDogdmFsdWUuc2hvcnRJZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICAgICAgICAgICAgcGFyYW1LZXksXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkUGFyYW1zOiBBcnJheS5mcm9tKHRoaXMucHJvY2Vzc2VkSGFzaFBhcmFtc1JlZiksXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB0aGUgdmFsdWUgb3Igc2hvcnRJZCBoYXMgY2hhbmdlZCB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzXG4gICAgICAgICAgICBjb25zdCB3aWxsVXBkYXRlID0gdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCAhPT0gdmFsdWUuc2hvcnRJZCB8fCB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSAhPT0gdmFsdWUudmFsdWVcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtb25pbml0aWFsdmFsdWVmb3VuZC13aWxsLXVwZGF0ZScsXG4gICAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICB3aWxsVXBkYXRlLFxuICAgICAgICAgICAgICBwcmV2aW91c1Nob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgICAgIHByZXZpb3VzVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICAgICAgICBuZXdTaG9ydElkOiB2YWx1ZS5zaG9ydElkLFxuICAgICAgICAgICAgICBuZXdWYWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHdpbGxVcGRhdGUpIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAndXJsLXBhcmFtLWRldGVjdGVkJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgICBzaG9ydElkOiB2YWx1ZS5zaG9ydElkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICBmb3VuZEluOiAnbWFuYWdlcicsXG4gICAgICAgICAgICAgICAgdHJpZ2dlcmVkQnk6ICdoZWxwZXJzaW1wbGUtb3Blbi13aWRnZXQtZXZlbnQnLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFJlc2V0IHRvIE5ldyBtb2RlIHdoZW4gaGFzaCBwYXJhbWV0ZXIgaXMgZGV0ZWN0ZWQgdG8gYXZvaWQgYnVncyB3aXRoIGFjY3VtdWxhdGlvbiBtb2Rlc1xuICAgICAgICAgICAgICAvLyBVc2luZyBBY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyIChyMDE4LjU4KVxuICAgICAgICAgICAgICBjb25zdCBuZWVkc01vZGVSZXNldCA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgIT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRNb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gVXBkYXRlIGluaXRpYWxRdWVyeVZhbHVlIHN0YXRlXG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZTogeyBzaG9ydElkOiB2YWx1ZS5zaG9ydElkLCB2YWx1ZTogdmFsdWUudmFsdWUgfVxuICAgICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWluaXRpYWxxdWVyeXZhbHVlLXN0YXRlLXVwZGF0ZWQnLFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgICBuZXdTdGF0ZToge1xuICAgICAgICAgICAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGVcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgIC8vIFJlc2V0IG1vZGUgdmlhIG1hbmFnZXIgaWYgbmVlZGVkXG4gICAgICAgICAgICAgIGlmIChuZWVkc01vZGVSZXNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc2V0UmVzdWx0ID0gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLnJlc2V0TW9kZU9uSGFzaERldGVjdGlvbihcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgICBjdXJyZW50TW9kZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgd2lkZ2V0IHN0YXRlIGZyb20gbWFuYWdlcidzIHJldHVybiB2YWx1ZVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGU6IHJlc2V0UmVzdWx0LnJlc3VsdHNNb2RlLFxuICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiByZXNldFJlc3VsdC5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLW9uaW5pdGlhbHZhbHVlZm91bmQtbm8tdmFsdWUtY2xlYXJpbmcnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgaGFzQ3VycmVudEluaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIE5vIG1hdGNoaW5nIHBhcmFtZXRlcnMgZm91bmQgLSBjbGVhciBzdGF0ZVxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWQgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uTW9kZVJlc2V0TmVlZGVkOiAoKSA9PiB7XG4gICAgICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgd2hlbiBoYXNoIHBhcmFtZXRlciBpcyBkZXRlY3RlZFxuICAgICAgICAgIC8vIFVzaW5nIEFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIgKHIwMTguNTgpXG4gICAgICAgICAgY29uc3QgY3VycmVudE1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlXG4gICAgICAgICAgY29uc3QgbmVlZHNSZXNldCA9IGN1cnJlbnRNb2RlICE9PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChuZWVkc1Jlc2V0KSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnbW9kZS1yZXNldC1uZWVkZWQtb24taGFzaC1kZXRlY3Rpb24nLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgY3VycmVudE1vZGUsXG4gICAgICAgICAgICAgIHRyaWdnZXJlZEJ5OiAnaGVscGVyc2ltcGxlLW9wZW4td2lkZ2V0LWV2ZW50JyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXNldFJlc3VsdCA9IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5yZXNldE1vZGVPbkhhc2hEZXRlY3Rpb24oXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgIGN1cnJlbnRNb2RlXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB3aWRnZXQgc3RhdGUgZnJvbSBtYW5hZ2VyJ3MgcmV0dXJuIHZhbHVlXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgcmVzdWx0c01vZGU6IHJlc2V0UmVzdWx0LnJlc3VsdHNNb2RlLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IHJlc2V0UmVzdWx0LmFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAvLyBDaHVuayAxOiBNYW5hZ2VyIGltcGxlbWVudGF0aW9uIChyMDE4LjggLSBzd2l0Y2hlZCB0byBtYW5hZ2VyKVxuICAgIC8vIFNldHVwIG1hbmFnZXIgKG5vIGF1dG9ub21vdXMgVVJMIGNoZWNraW5nIC0gSGVscGVyU2ltcGxlIG9yY2hlc3RyYXRlcylcbiAgICAvLyBOT1RFOiBzZXR1cCgpIGlzIGEgbm8tb3AgLSBjYWxsYmFja3MgYXJlIG5ldmVyIGNhbGxlZFxuICAgIHRoaXMudXJsQ29uc3VtcHRpb25NYW5hZ2VyLnNldHVwKFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICB7fSAvLyBFbXB0eSBjYWxsYmFja3MgLSBzZXR1cCgpIGlzIGEgbm8tb3BcbiAgICApXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciBIZWxwZXJTaW1wbGUncyBvcGVuIHdpZGdldCBldmVudFxuICAgIC8vIFF1ZXJ5U2ltcGxlIHNob3VsZCBvbmx5IHByb2Nlc3MgaGFzaCBwYXJhbWV0ZXJzIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgdGhlIHdpZGdldFxuICAgIC8vIFRoaXMgZW5zdXJlcyBIZWxwZXJTaW1wbGUgcmVtYWlucyB0aGUgb3JjaGVzdHJhdG9yXG4gICAgLy8gTm90ZTogRXZlbnQgbGlzdGVuZXIgc2V0dXAgbW92ZWQgdG8gcGFyYWxsZWwgZXhlY3V0aW9uIHNlY3Rpb24gYmVsb3cgKENodW5rIDcuMSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtbW91bnRlZC1ldmVudC1saXN0ZW5lci1zZXR1cCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ2h1bmsgMjogTWFuYWdlciBpbXBsZW1lbnRhdGlvbiAocjAxOC4xMyAtIFN0ZXAgMi4zOiBTd2l0Y2ggdG8gbWFuYWdlcilcbiAgICBpZiAodGhpcy53aWRnZXRSZWYuY3VycmVudCkge1xuICAgICAgdGhpcy52aXNpYmlsaXR5TWFuYWdlci5zZXR1cChcbiAgICAgICAgdGhpcy53aWRnZXRSZWYuY3VycmVudCxcbiAgICAgICAgdGhpcy5wcm9wcyxcbiAgICAgICAge1xuICAgICAgICAgIG9uVmlzaWJpbGl0eUNoYW5nZTogKGlzVmlzaWJsZSkgPT4ge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHN0YXRlXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNQYW5lbFZpc2libGU6IGlzVmlzaWJsZSB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYW5kbGUgcmVzdG9yYXRpb24gbG9naWNcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGUpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAoaXNWaXNpYmxlKSA9PiB7XG4gICAgICAgICAgLy8gTWFuYWdlcidzIGludGVybmFsIHN0YXRlIHRyYWNraW5nIGNhbGxiYWNrXG4gICAgICAgICAgLy8gKG5vLW9wLCByZXN0b3JhdGlvbiBoYW5kbGVkIGluIG9uVmlzaWJpbGl0eUNoYW5nZSlcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBOb3RpZnkgbW91bnQgdmlhIG1hbmFnZXJcbiAgICAgIHRoaXMudmlzaWJpbGl0eU1hbmFnZXIubm90aWZ5TW91bnQodGhpcy5wcm9wcy5pZClcbiAgICB9XG5cbiAgICAvLyBDaHVuayA1OiBJbml0aWFsaXplIGFjY3VtdWxhdGVkIHJlY29yZHMgbWFuYWdlciBzdGF0ZSAocjAxOC4yNiAtIFN0ZXAgNS4xOiBBZGQgbWFuYWdlcilcbiAgICAvLyBTeW5jIG1hbmFnZXIgc3RhdGUgd2l0aCB3aWRnZXQgc3RhdGVcbiAgICBpZiAodGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSkge1xuICAgICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLmhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlKFxuICAgICAgICB0aGlzLnByb3BzLmlkLFxuICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBmYWxzZVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShcbiAgICAgICAgdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgIClcbiAgICB9XG4gICAgXG4gICAgLy8gU2V0IHVwIGNhbGxiYWNrcyBmb3IgbWFuYWdlclxuICAgIC8vIFNldCB1cCBjYWxsYmFja3MgZm9yIG1hbmFnZXIgKHIwMTguNTcpXG4gICAgLy8gTm90ZTogUHJpbWFyeSBzdGF0ZSB1cGRhdGVzIGNvbWUgZnJvbSBtYW5hZ2VyIHJldHVybiB2YWx1ZXMgaW4gaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UvaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlXG4gICAgLy8gVGhlc2UgY2FsbGJhY2tzIHNlcnZlIGFzIGJhY2t1cC92ZXJpZmljYXRpb24gYnV0IHNob3VsZG4ndCBiZSBuZWVkZWQgc2luY2Ugd2UgdXBkYXRlIHN0YXRlIGRpcmVjdGx5IGZyb20gcmV0dXJuIHZhbHVlc1xuICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5zZXRDYWxsYmFja3Moe1xuICAgICAgb25Nb2RlQ2hhbmdlOiAobW9kZSkgPT4ge1xuICAgICAgICAvLyBTdGF0ZSBpcyB1cGRhdGVkIGZyb20gaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UgcmV0dXJuIHZhbHVlLCBzbyB0aGlzIGlzIGp1c3QgYSBiYWNrdXBcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucmVzdWx0c01vZGUgIT09IG1vZGUpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2FsbGJhY2stb25Nb2RlQ2hhbmdlLXN0YXRlLXN5bmMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICBjYWxsYmFja01vZGU6IG1vZGUsXG4gICAgICAgICAgICBjdXJyZW50U3RhdGVNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICAgICAgbm90ZTogJ1N0YXRlIHNob3VsZCBhbHJlYWR5IGJlIHN5bmNlZCBmcm9tIHJldHVybiB2YWx1ZScsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZXN1bHRzTW9kZTogbW9kZSB9KVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U6IChyZWNvcmRzKSA9PiB7XG4gICAgICAgIC8vIFN0YXRlIGlzIHVwZGF0ZWQgZnJvbSBoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHNvIHRoaXMgaXMganVzdCBhIGJhY2t1cFxuICAgICAgICBjb25zdCBjdXJyZW50Q291bnQgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgaWYgKGN1cnJlbnRDb3VudCAhPT0gcmVjb3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2FsbGJhY2stb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2Utc3RhdGUtc3luYycsXG4gICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgIGNhbGxiYWNrQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgY3VycmVudFN0YXRlQ291bnQ6IGN1cnJlbnRDb3VudCxcbiAgICAgICAgICAgIG5vdGU6ICdTdGF0ZSBzaG91bGQgYWxyZWFkeSBiZSBzeW5jZWQgZnJvbSBkaXJlY3QgdXBkYXRlJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGFjY3VtdWxhdGVkUmVjb3JkczogcmVjb3JkcyB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gT0xEIElNUExFTUVOVEFUSU9OIChwYXJhbGxlbCBleGVjdXRpb24pIC0gQ2h1bmsgNy4xXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIExpc3RlbiBmb3IgSGVscGVyU2ltcGxlIG9yY2hlc3RyYXRpb24gZXZlbnRzXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoT1BFTl9XSURHRVRfRVZFTlQsIHRoaXMuaGFuZGxlT3BlbldpZGdldEV2ZW50KVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3Igc2VsZWN0aW9uIGNoYW5nZXMgZnJvbSBxdWVyeS1yZXN1bHRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQsIHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciByZXN0b3JlIHJlcXVlc3RzIHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwgdGhpcy5oYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdFVkVOVFMnLCB7XG4gICAgICBldmVudDogJ29sZC1pbXBsZW1lbnRhdGlvbi1ldmVudC1saXN0ZW5lcnMtc2V0dXAnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBsaXN0ZW5lcnNSZWdpc3RlcmVkOiAzLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvLyBORVcgSU1QTEVNRU5UQVRJT04gKHBhcmFsbGVsIGV4ZWN1dGlvbikgLSBDaHVuayA3LjFcbiAgICB0aGlzLmV2ZW50TWFuYWdlci5zZXRIYW5kbGVycyh7XG4gICAgICBvbk9wZW5XaWRnZXRFdmVudDogdGhpcy5oYW5kbGVPcGVuV2lkZ2V0RXZlbnQsXG4gICAgICBvblNlbGVjdGlvbkNoYW5nZTogdGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2UsXG4gICAgICBvblJlc3RvcmVPbklkZW50aWZ5Q2xvc2U6IHRoaXMuaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5ldmVudE1hbmFnZXIuc2V0dXAodGhpcy5wcm9wcy5pZClcblxuICAgIC8vIENPTVBBUklTT04gTE9HR0lOR1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNy1DT01QQVJFJywge1xuICAgICAgZXZlbnQ6ICdldmVudC1saXN0ZW5lcnMtc2V0dXAtY29tcGFyaXNvbicsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIG9sZEltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgIGxpc3RlbmVyc1JlZ2lzdGVyZWQ6IDMsXG4gICAgICAgIHNldHVwTWV0aG9kOiAnd2luZG93LmFkZEV2ZW50TGlzdGVuZXInXG4gICAgICB9LFxuICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgbGlzdGVuZXJzUmVnaXN0ZXJlZDogMyxcbiAgICAgICAgc2V0dXBNZXRob2Q6ICdFdmVudE1hbmFnZXIuc2V0dXAnLFxuICAgICAgICBpc1NldHVwOiB0aGlzLmV2ZW50TWFuYWdlci5pc1NldHVwKClcbiAgICAgIH0sXG4gICAgICBtYXRjaDogdGhpcy5ldmVudE1hbmFnZXIuaXNTZXR1cCgpID09PSB0cnVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBHcmFwaGljcyBsYXllciB3aWxsIGJlIGluaXRpYWxpemVkIHdoZW4gbWFwIHZpZXcgYmVjb21lcyBhdmFpbGFibGUgdmlhIEppbXVNYXBWaWV3Q29tcG9uZW50XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAvLyBDaHVuayAxOiBDbGVhbiB1cCBtYW5hZ2VyIChyMDE4LjgpXG4gICAgdGhpcy51cmxDb25zdW1wdGlvbk1hbmFnZXIuY2xlYW51cCgpXG4gICAgXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIE9MRCBJTVBMRU1FTlRBVElPTiAocGFyYWxsZWwgZXhlY3V0aW9uKSAtIENodW5rIDcuMVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBDbGVhbiB1cCBIZWxwZXJTaW1wbGUgb3BlbiB3aWRnZXQgZXZlbnQgbGlzdGVuZXJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihPUEVOX1dJREdFVF9FVkVOVCwgdGhpcy5oYW5kbGVPcGVuV2lkZ2V0RXZlbnQpXG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgc2VsZWN0aW9uIGNoYW5nZSBsaXN0ZW5lclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwgdGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2UgYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBcbiAgICAvLyBDbGVhbiB1cCByZXN0b3JlIG9uIGlkZW50aWZ5IGNsb3NlIGxpc3RlbmVyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwgdGhpcy5oYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdFVkVOVFMnLCB7XG4gICAgICBldmVudDogJ29sZC1pbXBsZW1lbnRhdGlvbi1ldmVudC1saXN0ZW5lcnMtY2xlYW5lZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGxpc3RlbmVyc1JlbW92ZWQ6IDMsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8vIE5FVyBJTVBMRU1FTlRBVElPTiAocGFyYWxsZWwgZXhlY3V0aW9uKSAtIENodW5rIDcuMVxuICAgIGNvbnN0IHdhc1NldHVwID0gdGhpcy5ldmVudE1hbmFnZXIuaXNTZXR1cCgpXG4gICAgdGhpcy5ldmVudE1hbmFnZXIuY2xlYW51cCh0aGlzLnByb3BzLmlkKVxuXG4gICAgLy8gQ09NUEFSSVNPTiBMT0dHSU5HXG4gICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy03LUNPTVBBUkUnLCB7XG4gICAgICBldmVudDogJ2V2ZW50LWxpc3RlbmVycy1jbGVhbnVwLWNvbXBhcmlzb24nLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBvbGRJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICBsaXN0ZW5lcnNSZW1vdmVkOiAzLFxuICAgICAgICBjbGVhbnVwTWV0aG9kOiAnd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXInXG4gICAgICB9LFxuICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgd2FzU2V0dXAsXG4gICAgICAgIGNsZWFudXBNZXRob2Q6ICdFdmVudE1hbmFnZXIuY2xlYW51cCcsXG4gICAgICAgIGlzU2V0dXA6IHRoaXMuZXZlbnRNYW5hZ2VyLmlzU2V0dXAoKVxuICAgICAgfSxcbiAgICAgIG1hdGNoOiB0aGlzLmV2ZW50TWFuYWdlci5pc1NldHVwKCkgPT09IGZhbHNlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBDaHVuayAyOiBDbGVhbiB1cCBtYW5hZ2VyIChyMDE4LjEzIC0gU3RlcCAyLjM6IFN3aXRjaCB0byBtYW5hZ2VyKVxuICAgIHRoaXMudmlzaWJpbGl0eU1hbmFnZXIuY2xlYW51cCgpXG4gICAgdGhpcy52aXNpYmlsaXR5TWFuYWdlci5ub3RpZnlVbm1vdW50KHRoaXMucHJvcHMuaWQpXG4gICAgXG4gICAgLy8gQ2h1bmsgNDogR3JhcGhpY3MgbGF5ZXIgY2xlYW51cCAocjAxOC4yNSAtIFN0ZXAgNC4zOiBSZW1vdmUgb2xkIGltcGxlbWVudGF0aW9uKVxuICAgIHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIuY2xlYW51cCh0aGlzLnByb3BzLmlkKVxuICAgIFxuICAgIC8vIENodW5rIDU6IENsZWFuIHVwIGFjY3VtdWxhdGVkIHJlY29yZHMgbWFuYWdlciAocjAxOC4yNiAtIFN0ZXAgNS4xOiBBZGQgbWFuYWdlcilcbiAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIuY2xlYW51cCgpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICBldmVudDogJ3dpZGdldC1jbG9zZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogQWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+KSB7XG4gICAgLy8gUXVlcnlTaW1wbGUgbm8gbG9uZ2VyIGF1dG9ub21vdXNseSBjaGVja3MgVVJMIHBhcmFtZXRlcnNcbiAgICAvLyBPbmx5IEhlbHBlclNpbXBsZSBjYW4gdHJpZ2dlciBoYXNoIHBhcmFtZXRlciBwcm9jZXNzaW5nIHZpYSBPUEVOX1dJREdFVF9FVkVOVFxuICAgIC8vIFRoaXMgZW5zdXJlcyBIZWxwZXJTaW1wbGUgcmVtYWlucyB0aGUgb3JjaGVzdHJhdG9yXG4gICAgXG4gICAgLy8gQ2h1bmsgNDogR3JhcGhpY3MgbGF5ZXIgaXMgbm93IHJlcXVpcmVkIChyMDE4LjI1IC0gU3RlcCA0LjM6IFJlbW92ZSBjb25maWcgY2hhbmdlIGhhbmRsaW5nKVxuICAgIC8vIE5vIG5lZWQgdG8gaGFuZGxlIGNvbmZpZyBjaGFuZ2VzIGZvciBncmFwaGljcyBsYXllciBzaW5jZSBpdCdzIGFsd2F5cyBlbmFibGVkXG4gIH1cblxuICAvKipcbiAgICogTm90aWZpZXMgSGVscGVyU2ltcGxlIHdpZGdldCBvZiBzZWxlY3Rpb24gY2hhbmdlcyB2aWEgY3VzdG9tIGV2ZW50LlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgZGlzcGF0Y2hlcyBhIGN1c3RvbSBldmVudCB0aGF0IEhlbHBlclNpbXBsZSBsaXN0ZW5zIHRvIGZvciB0cmFja2luZ1xuICAgKiBzZWxlY3Rpb24gc3RhdGUuIENhbGxlZCBieSBRdWVyeVRhc2tSZXN1bHQgY29tcG9uZW50IHdoZW4gdXNlciBzZWxlY3RzIHJlY29yZHMuXG4gICAqIFxuICAgKiBAcGFyYW0gcmVjb3JkSWRzIC0gQXJyYXkgb2Ygc2VsZWN0ZWQgcmVjb3JkIElEcyAob2JqZWN0SWRzIGZyb20gdGhlIGZlYXR1cmUgbGF5ZXIpXG4gICAqIEBwYXJhbSBkYXRhU291cmNlSWQgLSBPcHRpb25hbCBkYXRhIHNvdXJjZSBJRCBmb3IgdGhlIHNlbGVjdGVkIHJlY29yZHNcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqL1xuICBub3RpZnlIZWxwZXJTaW1wbGVPZlNlbGVjdGlvbiA9IChyZWNvcmRJZHM6IHN0cmluZ1tdLCBkYXRhU291cmNlSWQ/OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIE9MRCBJTVBMRU1FTlRBVElPTiAocGFyYWxsZWwgZXhlY3V0aW9uKSAtIENodW5rIDcuMVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBjb25zdCBvbGRFdmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlY29yZElkcyxcbiAgICAgICAgZGF0YVNvdXJjZUlkXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG9sZEV2ZW50KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVZFTlRTJywge1xuICAgICAgZXZlbnQ6ICdvbGQtaW1wbGVtZW50YXRpb24tc2VsZWN0aW9uLWV2ZW50LWRpc3BhdGNoZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICBkYXRhU291cmNlSWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8vIE5FVyBJTVBMRU1FTlRBVElPTiAocGFyYWxsZWwgZXhlY3V0aW9uKSAtIENodW5rIDcuMVxuICAgIC8vIE5vdGU6IFRoaXMgY2FsbCBpcyBtaXNzaW5nIG91dHB1dERzSWQgYW5kIHF1ZXJ5SXRlbUNvbmZpZ0lkLCBidXQgdGhpcyBtZXRob2RcbiAgICAvLyBpcyBvbmx5IHVzZWQgZm9yIG5vdGlmeWluZyBIZWxwZXJTaW1wbGUsIG5vdCBmb3Igc2V0dGluZyBsYXN0U2VsZWN0aW9uIHN0YXRlLlxuICAgIC8vIFRoZSBhY3R1YWwgc2VsZWN0aW9uIGV2ZW50cyBjb21lIGZyb20gcXVlcnktdGFzay50c3ggYW5kIHF1ZXJ5LXJlc3VsdC50c3hcbiAgICAvLyB3aGljaCB1c2UgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCBmcm9tIHNlbGVjdGlvbi11dGlscy50c1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyLmRpc3BhdGNoU2VsZWN0aW9uRXZlbnQoaWQsIHJlY29yZElkcywgZGF0YVNvdXJjZUlkKVxuXG4gICAgLy8gQ09NUEFSSVNPTiBMT0dHSU5HXG4gICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy03LUNPTVBBUkUnLCB7XG4gICAgICBldmVudDogJ3NlbGVjdGlvbi1ldmVudC1kaXNwYXRjaC1jb21wYXJpc29uJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIG9sZEltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgIG1ldGhvZDogJ3dpbmRvdy5kaXNwYXRjaEV2ZW50JyxcbiAgICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgIGRhdGFTb3VyY2VJZFxuICAgICAgfSxcbiAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgIG1ldGhvZDogJ0V2ZW50TWFuYWdlci5kaXNwYXRjaFNlbGVjdGlvbkV2ZW50JyxcbiAgICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgIGRhdGFTb3VyY2VJZFxuICAgICAgfSxcbiAgICAgIG1hdGNoOiB0cnVlLCAvLyBCb3RoIGRpc3BhdGNoIHRoZSBzYW1lIGV2ZW50XG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgd2lkZ2V0IHBhbmVsIHZpc2liaWxpdHkgY2hhbmdlcyBmcm9tIFdpZGdldFZpc2liaWxpdHlNYW5hZ2VyLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaW1wbGVtZW50cyB0aGUgc2VsZWN0aW9uIHJlc3RvcmF0aW9uIHBhdHRlcm46XG4gICAqIC0gV2hlbiBwYW5lbCBvcGVuczogUmVzdG9yZXMgc2VsZWN0aW9uIHRvIG1hcCBpZiB3aWRnZXQgaGFzIGFjY3VtdWxhdGVkIHJlY29yZHMgb3IgbGFzdCBzZWxlY3Rpb25cbiAgICogLSBXaGVuIHBhbmVsIGNsb3NlczogQ2xlYXJzIHNlbGVjdGlvbiBmcm9tIG1hcCAoYnV0IHByZXNlcnZlcyB3aWRnZXQgc3RhdGUgZm9yIHJlc3RvcmF0aW9uKVxuICAgKiBcbiAgICogVGhlIHJlc3RvcmF0aW9uIGxvZ2ljIHJlc3BlY3RzIHRoZSBjdXJyZW50IHJlc3VsdHMgbW9kZTpcbiAgICogLSBcIkFkZCB0b1wiIC8gXCJSZW1vdmUgZnJvbVwiIG1vZGVzOiBVc2VzIGFjY3VtdWxhdGVkIHJlY29yZHMgZm9yIHJlc3RvcmF0aW9uXG4gICAqIC0gXCJOZXdcIiBtb2RlOiBVc2VzIGxhc3RTZWxlY3Rpb24gc3RhdGUgZm9yIHJlc3RvcmF0aW9uXG4gICAqIFxuICAgKiBAcGFyYW0gaXNWaXNpYmxlIC0gVHJ1ZSBpZiB3aWRnZXQgcGFuZWwgaXMgdmlzaWJsZSwgZmFsc2UgaWYgaGlkZGVuXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTguMTMgKENodW5rIDI6IE1hbmFnZXIgaW1wbGVtZW50YXRpb24pXG4gICAqIEBzZWUge0BsaW5rIFdpZGdldFZpc2liaWxpdHlNYW5hZ2VyfSBmb3IgdmlzaWJpbGl0eSBkZXRlY3Rpb24gaW1wbGVtZW50YXRpb25cbiAgICovXG4gIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UgPSAoaXNWaXNpYmxlOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgLy8gV2hlbiBwYW5lbCBvcGVucywgY2hlY2sgaWYgd2UgaGF2ZSBzZWxlY3Rpb24gdG8gcmVzdG9yZVxuICAgICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgY29uc3QgaGFzQWNjdW11bGF0ZWRSZWNvcmRzID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uU3RhdGUgPSB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZVxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uVG9SZXN0b3JlID0gaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICA/IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyBcbiAgICAgICAgOiBoYXNTZWxlY3Rpb25TdGF0ZVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWNoZWNraW5nLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBoYXNTZWxlY3Rpb246IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDAsXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLFxuICAgICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUsXG4gICAgICAgIGRlY2lzaW9uTG9naWM6IHtcbiAgICAgICAgICAnaXNBY2N1bXVsYXRpb25Nb2RlJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAgICdoYXNBY2N1bXVsYXRlZFJlY29yZHMnOiBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgICAgJ2hhc1NlbGVjdGlvblN0YXRlJzogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgICAgJ2NhbGN1bGF0ZWQtaGFzU2VsZWN0aW9uVG9SZXN0b3JlJzogaGFzU2VsZWN0aW9uVG9SZXN0b3JlLFxuICAgICAgICAgICd3aWxsLWNhbGwtYWRkU2VsZWN0aW9uVG9NYXAnOiBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQWRkIHNlbGVjdGlvbiB0byBtYXAgaWYgd2UgaGF2ZSBvbmVcbiAgICAgIGlmIChoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWNhbGxpbmctYWRkU2VsZWN0aW9uVG9NYXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvUmVzdG9yZS1pcy10cnVlJ1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1za2lwcGluZy1hZGRTZWxlY3Rpb25Ub01hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9SZXN0b3JlLWlzLWZhbHNlJyxcbiAgICAgICAgICB3aHk6IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgICAgID8gJ25vLWFjY3VtdWxhdGVkLXJlY29yZHMnIFxuICAgICAgICAgICAgOiAnbm8taGFzU2VsZWN0aW9uLXN0YXRlJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXaGVuIHBhbmVsIGNsb3NlcywgY2xlYXIgc2VsZWN0aW9uIGZyb20gbWFwIG9ubHkgKGtlZXAgd2lkZ2V0IHN0YXRlKVxuICAgICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgY29uc3QgaGFzQWNjdW11bGF0ZWRSZWNvcmRzID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uU3RhdGUgPSB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZVxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uVG9DbGVhciA9IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgPyBoYXNBY2N1bXVsYXRlZFJlY29yZHMgXG4gICAgICAgIDogaGFzU2VsZWN0aW9uU3RhdGVcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jaGVja2luZy1zZWxlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5zZWxlY3Rpb25SZWNvcmRDb3VudCB8fCAwLFxuICAgICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgICAgbGFzdFNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzU2VsZWN0aW9uVG9DbGVhcixcbiAgICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAgICdpc0FjY3VtdWxhdGlvbk1vZGUnOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICAgJ2hhc0FjY3VtdWxhdGVkUmVjb3Jkcyc6IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgICAnaGFzU2VsZWN0aW9uU3RhdGUnOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgICAnY2FsY3VsYXRlZC1oYXNTZWxlY3Rpb25Ub0NsZWFyJzogaGFzU2VsZWN0aW9uVG9DbGVhcixcbiAgICAgICAgICAnd2lsbC1jYWxsLWNsZWFyU2VsZWN0aW9uRnJvbU1hcCc6IGhhc1NlbGVjdGlvblRvQ2xlYXJcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKGhhc1NlbGVjdGlvblRvQ2xlYXIpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNhbGxpbmctY2xlYXJTZWxlY3Rpb25Gcm9tTWFwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub0NsZWFyLWlzLXRydWUnXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb25Gcm9tTWFwKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1uby1zZWxlY3Rpb24tdG8tY2xlYXInLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvQ2xlYXItaXMtZmFsc2UnLFxuICAgICAgICAgIHdoeTogaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICAgICAgPyAnbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycgXG4gICAgICAgICAgICA6ICduby1oYXNTZWxlY3Rpb24tc3RhdGUnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgbWFwIHZpZXcgY2hhbmdlIGZyb20gSmltdU1hcFZpZXdDb21wb25lbnQuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgSmltdU1hcFZpZXdDb21wb25lbnQgd2hlbiB0aGUgbWFwIHZpZXcgYmVjb21lcyBhdmFpbGFibGVcbiAgICogb3IgY2hhbmdlcy4gSXQgZGVsZWdhdGVzIHRvIE1hcFZpZXdNYW5hZ2VyIGZvciByZWZlcmVuY2UgbWFuYWdlbWVudCBhbmQgaW5pdGlhbGl6ZXNcbiAgICogdGhlIGdyYXBoaWNzIGxheWVyIGlmIGVuYWJsZWQgaW4gd2lkZ2V0IGNvbmZpZ3VyYXRpb24uXG4gICAqIFxuICAgKiBAcGFyYW0gamltdU1hcFZpZXcgLSBUaGUgSmltdU1hcFZpZXcgaW5zdGFuY2UgZnJvbSBKaW11TWFwVmlld0NvbXBvbmVudCwgb3IgbnVsbCBpZiB1bmF2YWlsYWJsZVxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE4LjE4IChDaHVuayA2OiBNYW5hZ2VyIGltcGxlbWVudGF0aW9uKVxuICAgKiBAc2VlIHtAbGluayBNYXBWaWV3TWFuYWdlcn0gZm9yIG1hcCB2aWV3IHJlZmVyZW5jZSBtYW5hZ2VtZW50XG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZCA9IChqaW11TWFwVmlldzogSmltdU1hcFZpZXcgfCBudWxsKSA9PiB7XG4gICAgY29uc3QgeyBpZCwgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gTWFuYWdlciBpbXBsZW1lbnRhdGlvbiAocjAxOC4xNiAtIFN0ZXAgNi4zOiBTd2l0Y2ggdG8gbWFuYWdlcilcbiAgICB0aGlzLm1hcFZpZXdNYW5hZ2VyLmhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZChcbiAgICAgIGppbXVNYXBWaWV3LFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICAgIHtcbiAgICAgICAgb25NYXBWaWV3Q2hhbmdlOiAobmV3SmltdU1hcFZpZXcpID0+IHtcbiAgICAgICAgICAvLyBHZXQgbWFwIHZpZXcgZnJvbSBtYW5hZ2VyXG4gICAgICAgICAgY29uc3QgbmV3TWFwVmlldyA9IHRoaXMubWFwVmlld01hbmFnZXIuZ2V0TWFwVmlldygpXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2h1bmsgNDogR3JhcGhpY3MgbGF5ZXIgaW5pdGlhbGl6YXRpb24gKHIwMTguMjUgLSBTdGVwIDQuMzogUmVtb3ZlIG9sZCBpbXBsZW1lbnRhdGlvbilcbiAgICAgICAgICAvLyBJbml0aWFsaXplIGdyYXBoaWNzIGxheWVyIGlmIG1hcCB2aWV3IGlzIGF2YWlsYWJsZSBhbmQgZ3JhcGhpY3MgbGF5ZXIgc2hvdWxkIGJlIGluaXRpYWxpemVkXG4gICAgICAgICAgaWYgKHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIuc2hvdWxkSW5pdGlhbGl6ZShjb25maWcsIG5ld01hcFZpZXcpICYmIG5ld01hcFZpZXcpIHtcbiAgICAgICAgICAgIC8vIFVzZSB2b2lkIHRvIGhhbmRsZSBwcm9taXNlIHdpdGhvdXQgYmxvY2tpbmdcbiAgICAgICAgICAgIHZvaWQgdGhpcy5ncmFwaGljc0xheWVyTWFuYWdlci5pbml0aWFsaXplKGlkLCBuZXdNYXBWaWV3LCB7XG4gICAgICAgICAgICAgIG9uR3JhcGhpY3NMYXllckluaXRpYWxpemVkOiAoZ3JhcGhpY3NMYXllcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzdGF0ZSB0byBmb3JjZSByZS1yZW5kZXIgYW5kIHVwZGF0ZSBwcm9wc1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgZ3JhcGhpY3MgbGF5ZXIgbGF6aWx5IHdoZW4gb3V0cHV0IGRhdGEgc291cmNlIGJlY29tZXMgYXZhaWxhYmxlLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IFF1ZXJ5VGFzayBjb21wb25lbnQgd2hlbiBhbiBvdXRwdXQgZGF0YSBzb3VyY2UgaXMgY3JlYXRlZC5cbiAgICogSXQgcmV0cmlldmVzIHRoZSBtYXAgdmlldyBmcm9tIE1hcFZpZXdNYW5hZ2VyIGFuZCBpbml0aWFsaXplcyB0aGUgZ3JhcGhpY3MgbGF5ZXJcbiAgICogdXNpbmcgR3JhcGhpY3NMYXllck1hbmFnZXIgaWYgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWQuXG4gICAqIFxuICAgKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIHRoYXQgd2FzIGNyZWF0ZWRcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqIEBzZWUge0BsaW5rIEdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmluaXRpYWxpemVGcm9tT3V0cHV0RFN9IGZvciBncmFwaGljcyBsYXllciBpbml0aWFsaXphdGlvblxuICAgKiBAc2VlIHtAbGluayBNYXBWaWV3TWFuYWdlci5nZXRNYXBWaWV3fSBmb3IgbWFwIHZpZXcgcmV0cmlldmFsXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBncmFwaGljcyBsYXllciBsYXppbHkgd2hlbiBvdXRwdXQgZGF0YSBzb3VyY2UgYmVjb21lcyBhdmFpbGFibGUuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgUXVlcnlUYXNrIGNvbXBvbmVudCB3aGVuIGFuIG91dHB1dCBkYXRhIHNvdXJjZSBpcyBjcmVhdGVkLlxuICAgKiBJdCByZXRyaWV2ZXMgdGhlIG1hcCB2aWV3IGZyb20gTWFwVmlld01hbmFnZXIgYW5kIGluaXRpYWxpemVzIHRoZSBncmFwaGljcyBsYXllclxuICAgKiB1c2luZyBHcmFwaGljc0xheWVyTWFuYWdlciBpZiBub3QgYWxyZWFkeSBpbml0aWFsaXplZC5cbiAgICogXG4gICAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgdGhhdCB3YXMgY3JlYXRlZFxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICogQHNlZSB7QGxpbmsgR3JhcGhpY3NMYXllck1hbmFnZXIuaW5pdGlhbGl6ZUZyb21PdXRwdXREU30gZm9yIGdyYXBoaWNzIGxheWVyIGluaXRpYWxpemF0aW9uXG4gICAqIEBzZWUge0BsaW5rIE1hcFZpZXdNYW5hZ2VyLmdldE1hcFZpZXd9IGZvciBtYXAgdmlldyByZXRyaWV2YWxcbiAgICovXG4gIHB1YmxpYyBpbml0aWFsaXplR3JhcGhpY3NMYXllckZyb21PdXRwdXREUyA9IGFzeW5jIChvdXRwdXREUzogRGF0YVNvdXJjZSkgPT4ge1xuICAgIGNvbnN0IHsgaWQsIGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIENodW5rIDQ6IEdyYXBoaWNzIGxheWVyIGluaXRpYWxpemF0aW9uIChyMDE4LjI1IC0gU3RlcCA0LjM6IFJlbW92ZSBvbGQgaW1wbGVtZW50YXRpb24pXG4gICAgLy8gVXNlIG1hcCB2aWV3IGZyb20gbWFuYWdlciBpZiBhdmFpbGFibGVcbiAgICBjb25zdCBtYXBWaWV3ID0gdGhpcy5tYXBWaWV3TWFuYWdlci5nZXRNYXBWaWV3KCkgfHwgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnRcbiAgICBcbiAgICBhd2FpdCB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmluaXRpYWxpemVGcm9tT3V0cHV0RFMoXG4gICAgICBpZCxcbiAgICAgIGNvbmZpZyxcbiAgICAgIG91dHB1dERTLFxuICAgICAgbWFwVmlldyxcbiAgICAgIHtcbiAgICAgICAgb25HcmFwaGljc0xheWVySW5pdGlhbGl6ZWQ6IChncmFwaGljc0xheWVyKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZDogdHJ1ZSB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKVxuICB9XG5cblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllciBpZiBpdCBleGlzdHMuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2hlbiBjbGVhcmluZyByZXN1bHRzIG9yIHN3aXRjaGluZyBxdWVyaWVzIGluIFwiTmV3XCIgbW9kZVxuICAgKiB0byBlbnN1cmUgZ3JhcGhpY3MgYXJlIHJlbW92ZWQgZnJvbSB0aGUgbWFwLiBJdCBkb2VzIG5vdCByZW1vdmUgdGhlIGdyYXBoaWNzIGxheWVyXG4gICAqIGl0c2VsZiwgb25seSBjbGVhcnMgaXRzIGNvbnRlbnRzLlxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICogQHNlZSB7QGxpbmsgR3JhcGhpY3NMYXllck1hbmFnZXIuY2xlYXJHcmFwaGljc30gZm9yIGdyYXBoaWNzIGNsZWFyaW5nIGxvZ2ljXG4gICAqL1xuICBwdWJsaWMgY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBDaHVuayA0OiBHcmFwaGljcyBsYXllciBjbGVhcmluZyAocjAxOC4yNSAtIFN0ZXAgNC4zOiBSZW1vdmUgb2xkIGltcGxlbWVudGF0aW9uKVxuICAgIHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIuY2xlYXJHcmFwaGljcyh0aGlzLnByb3BzLmlkLCBjb25maWcpXG4gIH1cblxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHNlbGVjdGlvbiBjaGFuZ2UgZXZlbnRzIGZyb20gUXVlcnlUYXNrUmVzdWx0IGNvbXBvbmVudC5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIHVwZGF0ZXMgd2lkZ2V0IHN0YXRlIHdoZW4gcmVjb3JkcyBhcmUgc2VsZWN0ZWQgb3IgZGVzZWxlY3RlZCBpbiB0aGVcbiAgICogcmVzdWx0cyB0YWIuIEl0IHJlc3BlY3RzIHRoZSBjdXJyZW50IHJlc3VsdHMgbW9kZTpcbiAgICogLSBcIkFkZCB0b1wiIC8gXCJSZW1vdmUgZnJvbVwiIG1vZGVzOiBVc2VzIGFjY3VtdWxhdGVkIHJlY29yZHMgY291bnQgZm9yIHJlc3RvcmF0aW9uIHN0YXRlXG4gICAqIC0gXCJOZXdcIiBtb2RlOiBVc2VzIGV2ZW50IHJlY29yZCBJRHMgZm9yIHJlc3RvcmF0aW9uIHN0YXRlXG4gICAqIFxuICAgKiBBbHNvIGhhbmRsZXMgYXV0b21hdGljIG1vZGUgcmVzZXQ6IElmIHNlbGVjdGlvbiBpcyBjbGVhcmVkIGluIFwiUmVtb3ZlIGZyb21cIiBtb2RlLFxuICAgKiB0aGUgbW9kZSBpcyBhdXRvbWF0aWNhbGx5IHJlc2V0IHRvIFwiTmV3XCIgc2luY2UgUmVtb3ZlIG1vZGUgcmVxdWlyZXMgc2VsZWN0aW9uIHRvIGZ1bmN0aW9uLlxuICAgKiBcbiAgICogQHBhcmFtIGV2ZW50IC0gQ3VzdG9tIGV2ZW50IGNvbnRhaW5pbmcgc2VsZWN0aW9uIGRldGFpbHMgKHdpZGdldElkLCByZWNvcmRJZHMsIG91dHB1dERzSWQsIHF1ZXJ5SXRlbUNvbmZpZ0lkKVxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICovXG4gIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IChldmVudDogRXZlbnQpID0+IHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50PHsgd2lkZ2V0SWQ6IHN0cmluZywgcmVjb3JkSWRzOiBzdHJpbmdbXSwgZGF0YVNvdXJjZUlkPzogc3RyaW5nLCBvdXRwdXREc0lkPzogc3RyaW5nLCBxdWVyeUl0ZW1Db25maWdJZD86IHN0cmluZyB9PlxuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBPbmx5IHRyYWNrIGlmIHRoaXMgaXMgZm9yIG91ciB3aWRnZXRcbiAgICBpZiAoY3VzdG9tRXZlbnQuZGV0YWlsLndpZGdldElkICE9PSBpZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGhhc1NlbGVjdGlvbiA9IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMgJiYgY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGggPiAwXG4gICAgXG4gICAgLy8gSWYgdGhlIHBhbmVsIGlzIE5PVCB2aXNpYmxlLCBhbmQgd2UgYXJlIHJlY2VpdmluZyBhbiBFTVBUWSBzZWxlY3Rpb24sXG4gICAgLy8gaXQncyBhbG1vc3QgY2VydGFpbmx5IG91ciBvd24gJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcCcgbG9naWMgZmlyaW5nLlxuICAgIC8vIFdlIHNob3VsZCBJR05PUkUgdGhpcyBzbyB3ZSBkb24ndCB3aXBlIG91dCB0aGUgbGFzdFNlbGVjdGlvbiBzdGF0ZS5cbiAgICBpZiAoIXRoaXMuc3RhdGUuaXNQYW5lbFZpc2libGUgJiYgIWhhc1NlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS1pZ25vcmluZy1lbXB0eS1zZWxlY3Rpb24td2hpbGUtcGFuZWwtY2xvc2VkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSwgdXNlIGFjY3VtdWxhdGVkIHJlY29yZHMgY291bnQgZm9yIHJlc3RvcmF0aW9uXG4gICAgLy8gVGhlIGFjY3VtdWxhdGVkIHJlY29yZHMgYXJlIHRoZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIHdoYXQgc2hvdWxkIGJlIHJlc3RvcmVkXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBjb25zdCBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA9IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgIGNvbnN0IHNlbGVjdGlvbkNvdW50ID0gaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMFxuICAgICAgPyBhY2N1bXVsYXRlZFJlY29yZHNDb3VudFxuICAgICAgOiAoaGFzU2VsZWN0aW9uID8gY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGggOiAwKVxuICAgIFxuICAgIC8vIElmIHNlbGVjdGlvbiBpcyBjbGVhcmVkIGFuZCB3ZSdyZSBpbiBSZW1vdmUgbW9kZSwgcmVzZXQgdG8gTmV3U2VsZWN0aW9uIG1vZGVcbiAgICAvLyBSZW1vdmUgbW9kZSByZXF1aXJlcyBzZWxlY3Rpb24gdG8gZnVuY3Rpb24sIHNvIGl0IHNob3VsZCBiZSBkaXNhYmxlZCB3aGVuIHNlbGVjdGlvbiBpcyBlbXB0eVxuICAgIGNvbnN0IHNob3VsZFJlc2V0TW9kZSA9ICFoYXNTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uQ291bnQgPT09IDAgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVTZWxlY3Rpb25DaGFuZ2UtdXBkYXRpbmctc3RhdGUnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICBldmVudFJlY29yZElkc0NvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIGhhc1NlbGVjdGlvbkZyb21FdmVudDogaGFzU2VsZWN0aW9uLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRCZWZvcmU6IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50LFxuICAgICAgY2FsY3VsYXRlZFNlbGVjdGlvbkNvdW50OiBzZWxlY3Rpb25Db3VudCxcbiAgICAgICd3aWxsLXNldC1oYXNTZWxlY3Rpb24nOiBzZWxlY3Rpb25Db3VudCA+IDAsXG4gICAgICAnd2lsbC1zZXQtbGFzdFNlbGVjdGlvbic6IGhhc1NlbGVjdGlvbiAmJiAhIWN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkICYmICEhY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkLFxuICAgICAgJ3dpbGwtcmVzZXQtbW9kZSc6IHNob3VsZFJlc2V0TW9kZSxcbiAgICAgIGRlY2lzaW9uTG9naWM6IHtcbiAgICAgICAgJ2lzQWNjdW11bGF0aW9uTW9kZSc6IGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgJ2FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCc6IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCxcbiAgICAgICAgJ3VzZS1hY2N1bXVsYXRlZC1jb3VudCc6IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDAsXG4gICAgICAgICd1c2UtZXZlbnQtY291bnQnOiAhKGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDApLFxuICAgICAgICAnc2hvdWxkLXJlc2V0LW1vZGUnOiBzaG91bGRSZXNldE1vZGVcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaGFzU2VsZWN0aW9uOiBzZWxlY3Rpb25Db3VudCA+IDAsXG4gICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogc2VsZWN0aW9uQ291bnQsXG4gICAgICAvLyBTdG9yZSBsYXN0U2VsZWN0aW9uIGZvciBjb21wYXRpYmlsaXR5LCBidXQgcmVzdG9yYXRpb24gd2lsbCB1c2UgYWNjdW11bGF0ZWRSZWNvcmRzIGluIEFkZC9SZW1vdmUgbW9kZXNcbiAgICAgIGxhc3RTZWxlY3Rpb246IGhhc1NlbGVjdGlvbiAmJiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCAmJiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICByZWNvcmRJZHM6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMsXG4gICAgICAgICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgLy8gUmVzZXQgbW9kZSB0byBOZXdTZWxlY3Rpb24gaWYgc2VsZWN0aW9uIGlzIGNsZWFyZWQgaW4gUmVtb3ZlIG1vZGVcbiAgICAgIC4uLihzaG91bGRSZXNldE1vZGUgPyB7XG4gICAgICAgIHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbixcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiBbXSAvLyBBbHNvIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHMgd2hlbiByZXNldHRpbmcgbW9kZVxuICAgICAgfSA6IHt9KVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVTZWxlY3Rpb25DaGFuZ2Utc3RhdGUtdXBkYXRlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAnbmV3LWhhc1NlbGVjdGlvbic6IHNlbGVjdGlvbkNvdW50ID4gMCxcbiAgICAgICduZXctc2VsZWN0aW9uUmVjb3JkQ291bnQnOiBzZWxlY3Rpb25Db3VudCxcbiAgICAgICduZXctbGFzdFNlbGVjdGlvbi1yZWNvcmRJZHMtY291bnQnOiBoYXNTZWxlY3Rpb24gJiYgY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQgJiYgY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgICAgID8gY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGhcbiAgICAgICAgOiAwLFxuICAgICAgJ21vZGUtcmVzZXQnOiBzaG91bGRSZXNldE1vZGUsXG4gICAgICAnbmV3LW1vZGUnOiBzaG91bGRSZXNldE1vZGUgPyBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiA6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAnbm90ZSc6IHNob3VsZFJlc2V0TW9kZSBcbiAgICAgICAgPyAnTW9kZSByZXNldCB0byBOZXdTZWxlY3Rpb24gYmVjYXVzZSBzZWxlY3Rpb24gd2FzIGNsZWFyZWQgaW4gUmVtb3ZlIG1vZGUnXG4gICAgICAgIDogJ2xhc3RTZWxlY3Rpb24tb25seS1jb250YWlucy1jdXJyZW50LXF1ZXJ5LXJlY29yZHMtbm90LWFsbC1hY2N1bXVsYXRlZC1yZWNvcmRzJ1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyByZXN0b3JlIHJlcXVlc3Qgd2hlbiBpZGVudGlmeSBwb3B1cCBjbG9zZXMuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCByZXN0b3JlcyBzZWxlY3Rpb24gdG8gdGhlIG1hcCBhZnRlciB0aGUgaWRlbnRpZnkgcG9wdXAgY2xvc2VzIGFuZFxuICAgKiBzZWxlY3Rpb24gd2FzIGNsZWFyZWQuIEl0IG9ubHkgcmVzdG9yZXMgaWYgdGhlIHdpZGdldCBwYW5lbCBpcyBjdXJyZW50bHkgb3BlblxuICAgKiAodXNlcnMgY2FuJ3Qgc2VlIHJlc3RvcmVkIHNlbGVjdGlvbiBpZiB3aWRnZXQgaXMgY2xvc2VkKS5cbiAgICogXG4gICAqIFJlc3RvcmF0aW9uIGxvZ2ljOlxuICAgKiAtIFwiQWRkIHRvXCIgLyBcIlJlbW92ZSBmcm9tXCIgbW9kZXM6IFJlc3RvcmVzIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzIGdyb3VwZWQgYnkgb3JpZ2luIGRhdGEgc291cmNlXG4gICAqIC0gXCJOZXdcIiBtb2RlOiBSZXN0b3JlcyBsYXN0U2VsZWN0aW9uIHN0YXRlXG4gICAqIFxuICAgKiBAcGFyYW0gZXZlbnQgLSBDdXN0b20gZXZlbnQgY29udGFpbmluZyBzZWxlY3Rpb24gZGV0YWlscyAod2lkZ2V0SWQsIHJlY29yZElkcywgb3V0cHV0RHNJZCwgcXVlcnlJdGVtQ29uZmlnSWQpXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKiBAc2VlIHtAbGluayBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5UfSBmb3IgZXZlbnQgbmFtZSBjb25zdGFudFxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ8eyBcbiAgICAgIHdpZGdldElkOiBzdHJpbmcsIFxuICAgICAgcmVjb3JkSWRzOiBzdHJpbmdbXSwgXG4gICAgICBvdXRwdXREc0lkOiBzdHJpbmcsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nXG4gICAgfT5cbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gT25seSBoYW5kbGUgaWYgdGhpcyBpcyBmb3Igb3VyIHdpZGdldFxuICAgIGlmIChjdXN0b21FdmVudC5kZXRhaWwud2lkZ2V0SWQgIT09IGlkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVXNlIG1hbmFnZXIgYXMgc291cmNlIG9mIHRydXRoIGZvciB2aXNpYmlsaXR5IChyMDE4LjEzKVxuICAgIGNvbnN0IGlzV2lkZ2V0T3BlbiA9IHRoaXMudmlzaWJpbGl0eU1hbmFnZXIuZ2V0SXNQYW5lbFZpc2libGUoKVxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1yZXF1ZXN0ZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgaXNXaWRnZXRPcGVuLFxuICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICBldmVudFJlY29yZElkc0NvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIGhhc1NlbGVjdGlvbjogdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gfHwgZmFsc2UsXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24sXG4gICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgb3V0cHV0RHNJZDogY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgfSlcbiAgICBcbiAgICAvLyBPbmx5IHJlc3RvcmUgaWYgd2lkZ2V0IGlzIG9wZW5cbiAgICBpZiAoIWlzV2lkZ2V0T3Blbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtd2lkZ2V0LWNsb3NlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVjb3JkQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IFNob3VsZCBhbHdheXMgY2hlY2sgYWNjdW11bGF0ZWRSZWNvcmRzIGZpcnN0LCByZWdhcmRsZXNzIG9mIG1vZGVcbiAgICBpZiAodGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1mb3VuZC1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnc2hvdWxkLXVzZS1hY2N1bXVsYXRlZCc6IHRydWUsXG4gICAgICAgICdjdXJyZW50LWNvbmRpdGlvbi1jaGVjayc6IGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgJ2NvbmRpdGlvbi1yZXN1bHQnOiBpc0FjY3VtdWxhdGlvbk1vZGVcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEluIEFkZC9SZW1vdmUgbW9kZXMsIGNoZWNrIGFjY3VtdWxhdGVkIHJlY29yZHMgaW5zdGVhZCBvZiBsYXN0U2VsZWN0aW9uXG4gICAgaWYgKGlzQWNjdW11bGF0aW9uTW9kZSkge1xuICAgICAgaWYgKCF0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCAhdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgfHwgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIGhhc1NlbGVjdGlvbjogdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24sXG4gICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAnaHlwb3RoZXNpcyc6ICdoYXNTZWxlY3Rpb24taXMtZmFsc2Utb3Itbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgICAgJ21heWJlLWhhc1NlbGVjdGlvbi1zaG91bGQtYmUtYmFzZWQtb24tYWNjdW11bGF0ZWQtcmVjb3Jkcyc6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFJlc3RvcmUgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgKGdyb3VwZWQgYnkgb3JpZ2luIERTKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JpbmctYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgdGhpcy5hZGRTZWxlY3Rpb25Ub01hcCgpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogTWF5YmUgYWNjdW11bGF0ZWRSZWNvcmRzIGV4aXN0IGJ1dCB3ZSdyZSBub3QgaW4gYWNjdW11bGF0aW9uIG1vZGU/XG4gICAgaWYgKHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzICYmIHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgJiYgIWlzQWNjdW11bGF0aW9uTW9kZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1ub3QtYWNjdW11bGF0aW9uLW1vZGUnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ2FjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW1vZGUtaXMtbm90LWFkZC1vci1yZW1vdmUnLFxuICAgICAgICAnc2hvdWxkLXdlLXN0aWxsLXVzZS10aGVtJzogJ05FRURTLUlOVkVTVElHQVRJT04nXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCB1c2Ugb3JpZ2luYWwgdmFsaWRhdGlvbiBsb2dpY1xuICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgbWF0Y2hpbmcgc2VsZWN0aW9uIHN0YXRlXG4gICAgaWYgKCF0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCAhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1uby1zZWxlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGhhc1NlbGVjdGlvbjogdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24sXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgb3V0cHV0RHNJZCBtYXRjaGVzXG4gICAgaWYgKHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkICE9PSBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtZHMtbWlzbWF0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91ck91dHB1dERzSWQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkLFxuICAgICAgICByZXF1ZXN0ZWRPdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgdGhlIHF1ZXJ5SXRlbUNvbmZpZ0lkIG1hdGNoZXMgKG9wdGlvbmFsIGJ1dCBnb29kIHRvIGNoZWNrKVxuICAgIGlmICh0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24ucXVlcnlJdGVtQ29uZmlnSWQgIT09IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtcXVlcnktbWlzbWF0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91clF1ZXJ5SXRlbUNvbmZpZ0lkOiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24ucXVlcnlJdGVtQ29uZmlnSWQsXG4gICAgICAgIHJlcXVlc3RlZFF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gUmVzdG9yZSBzZWxlY3Rpb24gdG8gbWFwIChyZXVzZSBleGlzdGluZyBtZXRob2QpXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yaW5nLXNlbGVjdGlvbicsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICByZWNvcmRDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGgsXG4gICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZFxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5hZGRTZWxlY3Rpb25Ub01hcCgpXG4gIH1cblxuICAvKipcbiAgICogUmVzdG9yZXMgc2VsZWN0aW9uIHRvIHRoZSBtYXAgd2hlbiB3aWRnZXQgcGFuZWwgb3BlbnMuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSB3aGVuIHRoZSBwYW5lbCBiZWNvbWVzIHZpc2libGUuXG4gICAqIEl0IHJlc3RvcmVzIHByZXZpb3VzbHkgc2VsZWN0ZWQgcmVjb3JkcyB0byB0aGUgbWFwIGJhc2VkIG9uIHRoZSBjdXJyZW50IHJlc3VsdHMgbW9kZTpcbiAgICogXG4gICAqIC0gXCJBZGQgdG9cIiAvIFwiUmVtb3ZlIGZyb21cIiBtb2RlczogUmVzdG9yZXMgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMsIGdyb3VwZWQgYnkgb3JpZ2luIGRhdGEgc291cmNlXG4gICAqIC0gXCJOZXdcIiBtb2RlOiBSZXN0b3JlcyBsYXN0U2VsZWN0aW9uIHN0YXRlIGZyb20gdGhlIG1vc3QgcmVjZW50IHF1ZXJ5XG4gICAqIFxuICAgKiBUaGUgcmVzdG9yYXRpb24gdXNlcyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB1dGlsaXR5IHdoaWNoIGhhbmRsZXM6XG4gICAqIC0gU2VsZWN0aW5nIHJlY29yZHMgaW4gb3JpZ2luIGRhdGEgc291cmNlc1xuICAgKiAtIEFkZGluZyBncmFwaGljcyB0byBncmFwaGljcyBsYXllciAoaWYgZW5hYmxlZClcbiAgICogLSBQdWJsaXNoaW5nIHNlbGVjdGlvbiBtZXNzYWdlcyB0byBvdGhlciB3aWRnZXRzXG4gICAqIC0gRGVkdXBsaWNhdGlvbiBvZiByZWNvcmRzXG4gICAqIFxuICAgKiBOb3RlOiBUaGlzIG1ldGhvZCBkb2VzIE5PVCB6b29tIHRvIHRoZSBzZWxlY3Rpb24gKHVubGlrZSB0aGUgXCJBZGQgdG8gTWFwXCIgYWN0aW9uKS5cbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqIEBzZWUge0BsaW5rIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNofSB1dGlsaXR5IGZ1bmN0aW9uIGZvciBzZWxlY3Rpb24gbG9naWNcbiAgICovXG4gIHByaXZhdGUgYWRkU2VsZWN0aW9uVG9NYXAgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBsYXN0U2VsZWN0aW9uLCBhY2N1bXVsYXRlZFJlY29yZHMsIHJlc3VsdHNNb2RlIH0gPSB0aGlzLnN0YXRlXG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnYWRkU2VsZWN0aW9uVG9NYXAtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIWxhc3RTZWxlY3Rpb24sXG4gICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IGxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgIGxhc3RTZWxlY3Rpb25PdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uPy5vdXRwdXREc0lkXG4gICAgfSlcbiAgICBcbiAgICAvLyBJbiBBZGQvUmVtb3ZlIG1vZGVzLCB1c2UgYWNjdW11bGF0ZWQgcmVjb3JkcyBmb3IgcmVzdG9yYXRpb25cbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBTaG91bGQgYWx3YXlzIGNoZWNrIGFjY3VtdWxhdGVkUmVjb3JkcyBmaXJzdCwgcmVnYXJkbGVzcyBvZiBtb2RlXG4gICAgLy8gQWRkaW5nIGxvZyB0byBzZWUgaWYgYWNjdW11bGF0ZWRSZWNvcmRzIGV4aXN0IGJ1dCB3ZSdyZSBub3QgdXNpbmcgdGhlbVxuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1mb3VuZC1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ3Nob3VsZC11c2UtYWNjdW11bGF0ZWQnOiB0cnVlLFxuICAgICAgICAnY3VycmVudC1jb25kaXRpb24tY2hlY2snOiBpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDBcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogMCxcbiAgICAgICAgJ3dpbGwtZmFsbGJhY2stdG8tbGFzdFNlbGVjdGlvbic6ICEhbGFzdFNlbGVjdGlvblxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgaWYgKGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEdyb3VwIGFjY3VtdWxhdGVkIHJlY29yZHMgYnkgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICAgICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgICAgXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHMuZm9yRWFjaCgocmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZC5nZXRJZCgpXG4gICAgICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgICAgIFxuICAgICAgICAvLyBNZXRob2QgMTogVHJ5IHRvIGdldCBmcm9tIHJlY29yZC5nZXREYXRhU291cmNlKClcbiAgICAgICAgY29uc3QgcmVjb3JkRFMgPSByZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdmb3VuZC1vcmlnaW4tZHMtZnJvbS1yZWNvcmQtZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUz8uaWQgfHwgJ251bGwnLFxuICAgICAgICAgICAgbWV0aG9kOiAncmVjb3JkLmdldERhdGFTb3VyY2UoKSdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBNZXRob2QgMjogSWYgdGhhdCBmYWlsZWQsIHNlYXJjaCBhbGwgZGF0YSBzb3VyY2VzIGZvciBhIHJlY29yZCB3aXRoIG1hdGNoaW5nIElEXG4gICAgICAgIGlmICghb3JpZ2luRFMpIHtcbiAgICAgICAgICBjb25zdCBkc01hcCA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlcygpXG4gICAgICAgICAgY29uc3QgYWxsRGF0YVNvdXJjZXMgPSBPYmplY3QudmFsdWVzKGRzTWFwKVxuICAgICAgICAgIFxuICAgICAgICAgIGZvciAoY29uc3QgZHMgb2YgYWxsRGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIGJ5IGNoZWNraW5nIGZvciBnZXRBbGxMb2FkZWRSZWNvcmRzIG1ldGhvZFxuICAgICAgICAgICAgaWYgKGRzICYmIHR5cGVvZiAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBEUyBoYXMgdGhlIHJlY29yZFxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJlY29yZHMgPSAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzKCkgfHwgW11cbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGluZ1JlY29yZCA9IGFsbFJlY29yZHMuZmluZCgocjogRmVhdHVyZURhdGFSZWNvcmQpID0+IHIuZ2V0SWQoKSA9PT0gcmVjb3JkSWQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBGb3VuZCB0aGUgcmVjb3JkIC0gZ2V0IG9yaWdpbiBEUyBmcm9tIHRoaXMgRFNcbiAgICAgICAgICAgICAgICAgIG9yaWdpbkRTID0gKGRzIGFzIGFueSkuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgZHMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnZm91bmQtb3JpZ2luLWRzLXZpYS1zZWFyY2gnLFxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdzZWFyY2hlZC1hbGwtZGF0YS1zb3VyY2VzJyxcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoZWREU0lkOiBkcy5pZFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIHNlYXJjaGluZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICAgICAgfVxuICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykhLnB1c2gocmVjb3JkKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY291bGQtbm90LWZpbmQtb3JpZ2luLWRzLWZvci1yZWNvcmQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICB3YXJuaW5nOiAncmVjb3JkLXdpbGwtYmUtc2tpcHBlZCdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXJlc3RvcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG9yaWdpbkRTQ291bnQ6IHJlY29yZHNCeU9yaWdpbkRTLnNpemVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFJlc3RvcmUgc2VsZWN0aW9uIGZvciBlYWNoIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgICAgY29uc3QgeyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB9ID0gcmVxdWlyZSgnLi9zZWxlY3Rpb24tdXRpbHMnKVxuICAgICAgY29uc3QgdXNlR3JhcGhpY3NMYXllciA9IHRoaXMucHJvcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHRcbiAgICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWRcbiAgICAgIGNvbnN0IG1hcFZpZXcgPSB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCB8fCB1bmRlZmluZWRcbiAgICAgIFxuICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZm9yRWFjaCgocmVjb3Jkcywgb3JpZ2luRFMpID0+IHtcbiAgICAgICAgY29uc3QgcmVjb3JkSWRzID0gcmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVXNlIG9yaWdpbkRTIGRpcmVjdGx5IChub3Qgb3V0cHV0RFMpIHNpbmNlIHJlY29yZHMgYXJlIHNlbGVjdGVkIGluIG9yaWdpbiBsYXllcnNcbiAgICAgICAgICAvLyBVc2UgYXN5bmMgSUlGRSBzaW5jZSBmb3JFYWNoIGNhbGxiYWNrIGNhbid0IGJlIGFzeW5jXG4gICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChpZCwgb3JpZ2luRFMsIHJlY29yZElkcywgcmVjb3JkcywgdHJ1ZSwgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllciwgbWFwVmlldylcbiAgICAgICAgICB9KSgpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yZWQtb3JpZ2luLWRzJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgem9vbUV4ZWN1dGVkOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yZS1vcmlnaW4tZHMtZmFpbGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBNYXliZSBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCBpbiBhY2N1bXVsYXRpb24gbW9kZT9cbiAgICAvLyBPciBtYXliZSB3ZSBzaG91bGQgYWx3YXlzIGNoZWNrIGFjY3VtdWxhdGVkUmVjb3JkcyBmaXJzdD9cbiAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwICYmICFpc0FjY3VtdWxhdGlvbk1vZGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1hY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1ub3QtYWNjdW11bGF0aW9uLW1vZGUnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnaHlwb3RoZXNpcyc6ICdhY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1tb2RlLWlzLW5vdC1hZGQtb3ItcmVtb3ZlJyxcbiAgICAgICAgJ3Nob3VsZC13ZS1zdGlsbC11c2UtdGhlbSc6ICdORUVEUy1JTlZFU1RJR0FUSU9OJ1xuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbCBiYWNrIHRvIG9yaWdpbmFsIGxvZ2ljIGZvciBcIk5ld1wiIG1vZGVcbiAgICBpZiAoIWxhc3RTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1uby1sYXN0U2VsZWN0aW9uLWV4aXRpbmcnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAnaHlwb3RoZXNpcyc6ICduby1sYXN0U2VsZWN0aW9uLXNvLWV4aXRpbmctZWFybHktbWF5YmUtc2hvdWxkLWNoZWNrLWFjY3VtdWxhdGVkLXJlY29yZHMtZmlyc3QnXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNvbnN0IG91dHB1dERTID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2UobGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgaWYgKCFvdXRwdXREUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1vdXRwdXQtZHMtbm90LWZvdW5kJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uLm91dHB1dERzSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBHZXQgcmVjb3JkcyBmcm9tIG91dHB1dCBEUyAoc2FtZSBhcyBBZGQgdG8gTWFwKVxuICAgIGNvbnN0IGFsbFJlY29yZHMgPSBvdXRwdXREUy5nZXRBbGxMb2FkZWRSZWNvcmRzKCkgfHwgW11cbiAgICBjb25zdCByZWNvcmRzVG9TZWxlY3QgPSBhbGxSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4gXG4gICAgICBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5pbmNsdWRlcyhyZWNvcmQuZ2V0SWQoKSlcbiAgICApIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICBcbiAgICBpZiAocmVjb3Jkc1RvU2VsZWN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1uby1tYXRjaGluZy1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXJSZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gU2FtZSBsb2dpYyBhcyBBZGQgdG8gTWFwIGFjdGlvbiAtIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIGhhbmRsZXMgZHVwbGljYXRlIGNoZWNraW5nXG4gICAgLy8gRG9uJ3Qgem9vbSB3aGVuIHJlc3RvcmluZyBvbiB3aWRnZXQgb3BlbiAoQWRkIHRvIE1hcCBhY3Rpb24gaGFuZGxlcyB6b29tIGZvciBtYW51YWwgY2xpY2tzKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIH0gPSByZXF1aXJlKCcuL3NlbGVjdGlvbi11dGlscycpXG4gICAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgY29uc3QgbWFwVmlldyA9IHRoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKGlkLCBvdXRwdXREUywgbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMsIHJlY29yZHNUb1NlbGVjdCwgdHJ1ZSwgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllciwgbWFwVmlldylcbiAgICAgIH0pKClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1zZWxlY3Rpb24tYWRkZWQtdG8tbWFwJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkc1RvU2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgem9vbUV4ZWN1dGVkOiBmYWxzZVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1hZGQtdG8tbWFwLWZhaWxlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyByZXN1bHRzIG1vZGUgY2hhbmdlIGZyb20gdGhlIG1vZGUgZHJvcGRvd24gaW4gUXVlcnlUYXNrIGNvbXBvbmVudC5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHN3aXRjaGVzIGJldHdlZW4gXCJDcmVhdGUgbmV3XCIsIFwiQWRkIHRvXCIsIG9yXG4gICAqIFwiUmVtb3ZlIGZyb21cIiBtb2Rlcy4gSXQgcGVyZm9ybXMgdGhlIGZvbGxvd2luZyBhY3Rpb25zOlxuICAgKiBcbiAgICogMS4gQ29uc3VtZXMgaGFzaCBwYXJhbWV0ZXJzIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2RlcyAocHJldmVudHMgcmUtdHJpZ2dlcmluZylcbiAgICogMi4gQ2xlYXJzIGFjY3VtdWxhdGVkIHJlY29yZHMgd2hlbiBzd2l0Y2hpbmcgdG8gXCJOZXdcIiBtb2RlXG4gICAqIDMuIFVwZGF0ZXMgd2lkZ2V0IHN0YXRlIHdpdGggdGhlIG5ldyBtb2RlXG4gICAqIFxuICAgKiBAcGFyYW0gbW9kZSAtIFRoZSBuZXcgc2VsZWN0aW9uIHR5cGUgbW9kZSAoTmV3U2VsZWN0aW9uLCBBZGRUb1NlbGVjdGlvbiwgb3IgUmVtb3ZlRnJvbVNlbGVjdGlvbilcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlID0gKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHtcbiAgICAvLyBVc2luZyBBY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyIChyMDE4LjU4KVxuICAgIGNvbnN0IHNob3VsZENvbnN1bWVIYXNoID0gKG1vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgbW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSAmJiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWRcbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIuaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UoXG4gICAgICB0aGlzLnByb3BzLmlkLFxuICAgICAgbW9kZSxcbiAgICAgIHNob3VsZENvbnN1bWVIYXNoLFxuICAgICAgdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgIHRoaXMucmVtb3ZlSGFzaFBhcmFtZXRlclxuICAgIClcblxuICAgIC8vIFVwZGF0ZSB3aWRnZXQgc3RhdGUgZnJvbSBtYW5hZ2VyJ3MgcmV0dXJuIHZhbHVlXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICByZXN1bHRzTW9kZTogcmVzdWx0LnJlc3VsdHNNb2RlLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiByZXN1bHQuYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgaGFzaCBwYXJhbWV0ZXIgZnJvbSB0aGUgVVJMIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2Rlcy5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHN3aXRjaGluZyB0byBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlcyB0byBjb25zdW1lXG4gICAqIHRoZSBkZWVwIGxpbmsgcGFyYW1ldGVyLiBUaGlzIHByZXZlbnRzIHRoZSBoYXNoIHBhcmFtZXRlciBmcm9tIHJlLXRyaWdnZXJpbmcgdGhlIHF1ZXJ5XG4gICAqIHdoZW4gdGhlIHdpZGdldCByZS1yZW5kZXJzLlxuICAgKiBcbiAgICogVGhlIFVSTCBpcyB1cGRhdGVkIHVzaW5nIGhpc3RvcnkucmVwbGFjZVN0YXRlIHRvIGF2b2lkIHBhZ2UgcmVsb2FkLCBhbmQgYm90aCBwYXRobmFtZVxuICAgKiBhbmQgcXVlcnkgc3RyaW5nIGFyZSBwcmVzZXJ2ZWQgKGUuZy4sIGRlYnVnIHBhcmFtZXRlcnMgcmVtYWluIGludGFjdCkuXG4gICAqIFxuICAgKiBAcGFyYW0gc2hvcnRJZCAtIFRoZSBzaG9ydElkIHBhcmFtZXRlciB0byByZW1vdmUgZnJvbSB0aGUgVVJMIGhhc2hcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqL1xuICBwcml2YXRlIHJlbW92ZUhhc2hQYXJhbWV0ZXIgPSAoc2hvcnRJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFzaG9ydElkKSByZXR1cm5cbiAgICBcbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIFxuICAgIGlmICh1cmxQYXJhbXMuaGFzKHNob3J0SWQpKSB7XG4gICAgICB1cmxQYXJhbXMuZGVsZXRlKHNob3J0SWQpXG4gICAgICBjb25zdCBuZXdIYXNoID0gdXJsUGFyYW1zLnRvU3RyaW5nKClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZUhhc2hQYXJhbWV0ZXInLFxuICAgICAgICBzaG9ydElkLFxuICAgICAgICBuZXdIYXNoOiBuZXdIYXNoID8gYCMke25ld0hhc2h9YCA6ICcoZW1wdHkpJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIFVSTCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZWxvYWRcbiAgICAgIC8vIEFsd2F5cyBwcmVzZXJ2ZSBwYXRobmFtZSBhbmQgcXVlcnkgc3RyaW5nLCBvbmx5IHVwZGF0ZSBoYXNoXG4gICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgJycsIFxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgKG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJycpXG4gICAgICApXG4gICAgICBcbiAgICAgIC8vIEFsc28gY2xlYXIgdGhlIHN0YXRlIHNvIGl0IHdvbid0IHRyaWdnZXIgYWdhaW5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID09PSBzaG9ydElkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbml0aWFsUXVlcnlWYWx1ZTogdW5kZWZpbmVkIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UgPSAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4ge1xuICAgIC8vIERJQUdOT1NUSUMgTE9HR0lORzogU3RhdGUgY2hhbmdlIHRyYWNraW5nXG4gICAgY29uc3QgcHJldmlvdXNSZWNvcmRzID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgfHwgW11cbiAgICBjb25zdCBwcmV2aW91c0lkcyA9IHByZXZpb3VzUmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgY29uc3QgbmV3SWRzID0gcmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgY29uc3QgYWRkZWRJZHMgPSBuZXdJZHMuZmlsdGVyKGlkID0+ICFwcmV2aW91c0lkcy5pbmNsdWRlcyhpZCkpXG4gICAgY29uc3QgcmVtb3ZlZElkcyA9IHByZXZpb3VzSWRzLmZpbHRlcihpZCA9PiAhbmV3SWRzLmluY2x1ZGVzKGlkKSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1zdGF0ZS1jaGFuZ2UnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBwcmV2aW91c0NvdW50OiBwcmV2aW91c1JlY29yZHMubGVuZ3RoLFxuICAgICAgcHJldmlvdXNJZHM6IHByZXZpb3VzSWRzLFxuICAgICAgbmV3Q291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgbmV3SWRzOiBuZXdJZHMsXG4gICAgICBhZGRlZElkczogYWRkZWRJZHMsXG4gICAgICByZW1vdmVkSWRzOiByZW1vdmVkSWRzLFxuICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFVzaW5nIEFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIgKHIwMTguNTgpXG4gICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSh0aGlzLnByb3BzLmlkLCByZWNvcmRzKVxuXG4gICAgLy8gSWYgd2UncmUgaW4gUmVtb3ZlIG1vZGUgYW5kIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzIGFyZSBjbGVhcmVkLCByZXNldCB0byBOZXdTZWxlY3Rpb24gbW9kZVxuICAgIC8vIFJlbW92ZSBtb2RlIHJlcXVpcmVzIGFjY3VtdWxhdGVkIHJlY29yZHMgdG8gZnVuY3Rpb24sIHNvIGl0IHNob3VsZCBiZSBkaXNhYmxlZCB3aGVuIHJlY29yZHMgYXJlIGVtcHR5XG4gICAgY29uc3Qgc2hvdWxkUmVzZXRNb2RlID0gcmVjb3Jkcy5sZW5ndGggPT09IDAgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cblxuICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogcmVjb3JkcyxcbiAgICAgIC8vIFJlc2V0IG1vZGUgdG8gTmV3U2VsZWN0aW9uIGlmIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzIGNsZWFyZWQgaW4gUmVtb3ZlIG1vZGVcbiAgICAgIC4uLihzaG91bGRSZXNldE1vZGUgPyB7XG4gICAgICAgIHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgfSA6IHt9KVxuICAgIH0pXG5cbiAgICBpZiAoc2hvdWxkUmVzZXRNb2RlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdtb2RlLXJlc2V0LW9uLWFjY3VtdWxhdGVkLXJlY29yZHMtY2xlYXJlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBwcmV2aW91c01vZGU6IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbixcbiAgICAgICAgbmV3TW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sXG4gICAgICAgIHJlYXNvbjogJ2FsbC1hY2N1bXVsYXRlZC1yZWNvcmRzLWNsZWFyZWQtaW4tcmVtb3ZlLW1vZGUnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5PVEU6IE5vIGxvbmdlciBuZWVkZWQgLSB3ZSB1c2UgZXhpc3Rpbmcgb3V0cHV0IERTIGluc3RlYWQgb2YgY3JlYXRpbmcgbmV3IG9uZS5cbiAgICogS2VwdCBmb3IgcmVmZXJlbmNlIGJ1dCBub3QgdXNlZC5cbiAgICovXG4gIHByaXZhdGUgZ2V0T3JDcmVhdGVBY2N1bXVsYXRlZFJlc3VsdHNEUyA9IGFzeW5jIChvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSk6IFByb21pc2U8RmVhdHVyZUxheWVyRGF0YVNvdXJjZT4gPT4ge1xuICAgIC8vIFRoaXMgaXMgbm8gbG9uZ2VyIHVzZWQgLSB3ZSBtZXJnZSByZWNvcmRzIGludG8gZXhpc3Rpbmcgb3V0cHV0IERTXG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIG1ldGhvZCBpcyBkZXByZWNhdGVkIC0gdXNlIGV4aXN0aW5nIG91dHB1dCBEUyBpbnN0ZWFkJylcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgc2VsZWN0aW9uIGZyb20gdGhlIG1hcCB3aGlsZSBwcmVzZXJ2aW5nIHdpZGdldCdzIGludGVybmFsIHN0YXRlLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gdGhlIHdpZGdldCBwYW5lbCBjbG9zZXMgdG8gcmVtb3ZlIHNlbGVjdGlvbiBmcm9tIHRoZSBtYXBcbiAgICogKGNsZWFuaW5nIHVwIHRoZSB2aXN1YWwgc2VsZWN0aW9uKSB3aGlsZSBrZWVwaW5nIHRoZSBzZWxlY3Rpb24gc3RhdGUgaW4gdGhlIHdpZGdldFxuICAgKiBmb3IgcmVzdG9yYXRpb24gd2hlbiB0aGUgcGFuZWwgcmVvcGVucy5cbiAgICogXG4gICAqIFRoZSBtZXRob2QgaGFuZGxlcyBib3RoIFwiTmV3XCIgbW9kZSAobGFzdFNlbGVjdGlvbikgYW5kIGFjY3VtdWxhdGlvbiBtb2RlcyAoYWNjdW11bGF0ZWRSZWNvcmRzKS5cbiAgICogSXQgZ3JvdXBzIHJlY29yZHMgYnkgb3JpZ2luIGRhdGEgc291cmNlIGFuZCBjbGVhcnMgc2VsZWN0aW9uIGZyb20gZWFjaCBvcmlnaW4gZGF0YSBzb3VyY2UsXG4gICAqIGVuc3VyaW5nIG11bHRpLWxheWVyIHNlbGVjdGlvbnMgYXJlIHByb3Blcmx5IGNsZWFyZWQuXG4gICAqIFxuICAgKiBHcmFwaGljcyBsYXllciBpcyBhbHNvIGNsZWFyZWQgaWYgZW5hYmxlZCwgYW5kIGVtcHR5IHNlbGVjdGlvbiBtZXNzYWdlcyBhcmUgcHVibGlzaGVkXG4gICAqIHRvIG5vdGlmeSBvdGhlciB3aWRnZXRzIChsaWtlIEhlbHBlclNpbXBsZSkgdGhhdCBzZWxlY3Rpb24gaGFzIGJlZW4gY2xlYXJlZC5cbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqIEBzZWUge0BsaW5rIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlc30gdXRpbGl0eSBmdW5jdGlvbiBmb3IgY2xlYXJpbmcgbG9naWNcbiAgICovXG4gIHByaXZhdGUgY2xlYXJTZWxlY3Rpb25Gcm9tTWFwID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgbGFzdFNlbGVjdGlvbiwgYWNjdW11bGF0ZWRSZWNvcmRzLCByZXN1bHRzTW9kZSB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISFsYXN0U2VsZWN0aW9uLFxuICAgICAgbGFzdFNlbGVjdGlvblJlY29yZENvdW50OiBsYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDAsXG4gICAgICBoYXNTZWxlY3Rpb246IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlXG4gICAgfSlcbiAgICBcbiAgICAvLyBBbHdheXMgY2xlYXIgZ3JhcGhpY3MgbGF5ZXIgZmlyc3Qgd2hlbiBwYW5lbCBjbG9zZXMgKGlmIGdyYXBoaWNzIGxheWVyIGlzIGVuYWJsZWQpXG4gICAgLy8gVGhpcyBlbnN1cmVzIHZpc3VhbCBzZWxlY3Rpb24gaXMgcmVtb3ZlZCBldmVuIGlmIHN0YXRlIGlzIGluY29uc2lzdGVudFxuICAgIGlmICh0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50KSB7XG4gICAgICB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmNsZWFyR3JhcGhpY3MoaWQsIHRoaXMucHJvcHMuY29uZmlnKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1ncmFwaGljcy1sYXllci1jbGVhcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LmlkXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBBbHdheXMgY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyBpZiB0aGV5IGV4aXN0IChyZWdhcmRsZXNzIG9mIG1vZGUpXG4gICAgLy8gVGhpcyBoYW5kbGVzIHRoZSBjYXNlIHdoZXJlIG1vZGUgbWlnaHQgaGF2ZSBjaGFuZ2VkIGJ1dCByZWNvcmRzIHN0aWxsIGV4aXN0XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtY2hlY2tpbmctYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAnY29uZGl0aW9uJzogJ2FjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCcsXG4gICAgICAnY29uZGl0aW9uLXJlc3VsdCc6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgIH0pXG4gICAgXG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gR3JvdXAgYWNjdW11bGF0ZWQgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gICAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgICBcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAxOiBUcnkgdG8gZ2V0IGZyb20gcmVjb3JkLmdldERhdGFTb3VyY2UoKVxuICAgICAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2NsZWFyLWZvdW5kLW9yaWdpbi1kcy1mcm9tLXJlY29yZC1kcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbnVsbCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdyZWNvcmQuZ2V0RGF0YVNvdXJjZSgpJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAyOiBJZiB0aGF0IGZhaWxlZCwgc2VhcmNoIGFsbCBkYXRhIHNvdXJjZXMgZm9yIGEgcmVjb3JkIHdpdGggbWF0Y2hpbmcgSURcbiAgICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICAgIGNvbnN0IGRzTWFwID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2VzKClcbiAgICAgICAgICBjb25zdCBhbGxEYXRhU291cmNlcyA9IE9iamVjdC52YWx1ZXMoZHNNYXApXG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCBkcyBvZiBhbGxEYXRhU291cmNlcykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgYnkgY2hlY2tpbmcgZm9yIGdldEFsbExvYWRlZFJlY29yZHMgbWV0aG9kXG4gICAgICAgICAgICBpZiAoZHMgJiYgdHlwZW9mIChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIERTIGhhcyB0aGUgcmVjb3JkXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmVjb3JkcyA9IChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gYWxsUmVjb3Jkcy5maW5kKChyOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gci5nZXRJZCgpID09PSByZWNvcmRJZClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIHRoZSByZWNvcmQgLSBnZXQgb3JpZ2luIERTIGZyb20gdGhpcyBEU1xuICAgICAgICAgICAgICAgICAgb3JpZ2luRFMgPSAoZHMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1mb3VuZC1vcmlnaW4tZHMtdmlhLXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NlYXJjaGVkLWFsbC1kYXRhLXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hlZERTSWQ6IGRzLmlkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1jb3VsZC1ub3QtZmluZC1vcmlnaW4tZHMtZm9yLXJlY29yZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIHdhcm5pbmc6ICdyZWNvcmQtd2lsbC1iZS1za2lwcGVkJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2xlYXJpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1mcm9tLW1hcCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG9yaWdpbkRTQ291bnQ6IHJlY29yZHNCeU9yaWdpbkRTLnNpemVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIENsZWFyIHNlbGVjdGlvbiBmcm9tIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9ID0gcmVxdWlyZSgnLi9zZWxlY3Rpb24tdXRpbHMnKVxuICAgICAgY29uc3QgdXNlR3JhcGhpY3NMYXllciA9IHRoaXMucHJvcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHRcbiAgICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWRcbiAgICAgIFxuICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZm9yRWFjaCgocmVjb3Jkcywgb3JpZ2luRFMpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBVc2UgYXN5bmMgSUlGRSBzaW5jZSBmb3JFYWNoIGNhbGxiYWNrIGNhbid0IGJlIGFzeW5jXG4gICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMoaWQsIG9yaWdpbkRTLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyZWQtb3JpZ2luLWRzLXNlbGVjdGlvbicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgdXNlZEdyYXBoaWNzTGF5ZXI6IHVzZUdyYXBoaWNzTGF5ZXJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSkoKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyLW9yaWdpbi1kcy1mYWlsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1jbGVhcmVkLWFjY3VtdWxhdGVkLXJlY29yZHMtcmV0dXJuaW5nJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAnd2lsbC1ub3QtZmFsbGJhY2stdG8tbGFzdFNlbGVjdGlvbic6IHRydWVcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogTWF5YmUgYWNjdW11bGF0ZWRSZWNvcmRzIGV4aXN0IGJ1dCB3ZSBkaWRuJ3QgZW50ZXIgdGhlIGlmIGJsb2NrP1xuICAgIC8vIE9yIG1heWJlIHdlIHNob3VsZCBhbHdheXMgY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyBpZiB0aGV5IGV4aXN0P1xuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbm90LWNsZWFyaW5nJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtY29uZGl0aW9uLWZhaWxlZC13aHknLFxuICAgICAgICAnY29uZGl0aW9uLXdhcyc6ICdhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAnLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIElmIHdlIGhhdmUgc2VsZWN0aW9uIHN0YXRlIGJ1dCBubyBsYXN0U2VsZWN0aW9uLCB3ZSBzdGlsbCBuZWVkIHRvIGNsZWFyXG4gICAgLy8gVGhpcyBoYW5kbGVzIHRoZSBjYXNlIHdoZXJlIHN0YXRlIGlzIGluY29uc2lzdGVudCAoaGFzU2VsZWN0aW9uPXRydWUgYnV0IGxhc3RTZWxlY3Rpb249bnVsbClcbiAgICBpZiAodGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gJiYgIWxhc3RTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtaGFzLXNlbGVjdGlvbi1idXQtbm8tbGFzdFNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUuc2VsZWN0aW9uUmVjb3JkQ291bnQgfHwgMCxcbiAgICAgICAgbm90ZTogJ3dpbGwtYXR0ZW1wdC10by1jbGVhci1mcm9tLWN1cnJlbnQtc2VsZWN0aW9uLXN0YXRlJ1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCB0aGUgb3V0cHV0IERTIGZyb20gdGhlIG1vc3QgcmVjZW50IHF1ZXJ5XG4gICAgICAvLyBGaW5kIG91dHB1dCBEUyBmb3IgdGhpcyB3aWRnZXQgKHBhdHRlcm46IHdpZGdldF97aWR9X291dHB1dF8qKVxuICAgICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgICAgY29uc3QgYWxsRGF0YVNvdXJjZXMgPSBPYmplY3QudmFsdWVzKGRzTWFuYWdlci5nZXREYXRhU291cmNlcygpKVxuICAgICAgY29uc3Qgb3V0cHV0RFMgPSBhbGxEYXRhU291cmNlcy5maW5kKGRzID0+IFxuICAgICAgICBkcy5pZC5zdGFydHNXaXRoKGB3aWRnZXRfJHtpZH1fb3V0cHV0X2ApXG4gICAgICApIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIFxuICAgICAgaWYgKG91dHB1dERTKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgICAgY29uc3QgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgICAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgICAgICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWRcbiAgICAgICAgICBcbiAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF3YWl0IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhpZCwgb3JpZ2luRFMsIHVzZUdyYXBoaWNzTGF5ZXIsIGdyYXBoaWNzTGF5ZXIpXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmVkLXNlbGVjdGlvbi1mcm9tLXN0YXRlJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgICAgICAgICAgdXNlZEdyYXBoaWNzTGF5ZXI6IHVzZUdyYXBoaWNzTGF5ZXJcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhci1mcm9tLXN0YXRlLWZhaWxlZCcsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSgpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtbm8tb3JpZ2luLWRzLWZvdW5kJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgbm90ZTogJ291dHB1dC1kcy1mb3VuZC1idXQtbm8tb3JpZ2luLWRzJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1uby1vdXRwdXQtZHMtZm91bmQnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBub3RlOiAnY291bGQtbm90LWZpbmQtb3V0cHV0LWRzLWZvci13aWRnZXQnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGwgYmFjayB0byBvcmlnaW5hbCBsb2dpYyBmb3IgXCJOZXdcIiBtb2RlIHdpdGggbGFzdFNlbGVjdGlvblxuICAgIGlmICghbGFzdFNlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1uby1sYXN0U2VsZWN0aW9uLWV4aXRpbmcnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc1NlbGVjdGlvbjogdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gfHwgZmFsc2UsXG4gICAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDBcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3Qgb3V0cHV0RFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShsYXN0U2VsZWN0aW9uLm91dHB1dERzSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICBpZiAoIW91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLW91dHB1dC1kcy1ub3QtZm91bmQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgb3JpZ2luIERTICh0aGUgbWFwIGxheWVyKVxuICAgICAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgXG4gICAgICBpZiAoIW9yaWdpbkRTKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1vcmlnaW4tZHMtbm90LWZvdW5kJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgb3V0cHV0RHNJZDogbGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBjdXJyZW50IHNlbGVjdGlvbiBzdGF0ZSBiZWZvcmUgY2xlYXJpbmdcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IG91clJlY29yZElkcyA9IGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzXG4gICAgICBjb25zdCBtYXRjaGVzT3VyU2VsZWN0aW9uID0gb3VyUmVjb3JkSWRzLmxlbmd0aCA9PT0gY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCAmJlxuICAgICAgICBvdXJSZWNvcmRJZHMuZXZlcnkocmVjb3JkSWQgPT4gY3VycmVudFNlbGVjdGVkSWRzLmluY2x1ZGVzKHJlY29yZElkKSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jaGVja2luZy1tYXAtc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXJSZWNvcmRDb3VudDogb3VyUmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgbWFwU2VsZWN0ZWRDb3VudDogY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgbWF0Y2hlc091clNlbGVjdGlvbixcbiAgICAgICAgb3VyUmVjb3JkSWRzOiBvdXJSZWNvcmRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgIG1hcFNlbGVjdGVkSWRzOiBjdXJyZW50U2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSlcbiAgICAgIH0pXG5cbiAgICAgIC8vIFVzZSBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgdXRpbGl0eSB3aGljaCBzdXBwb3J0cyBncmFwaGljcyBsYXllclxuICAgICAgY29uc3QgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSB0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICBcbiAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMoaWQsIG9yaWdpbkRTLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyZWQtb3JpZ2luLWRzLXNlbGVjdGlvbicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIHVzZWRHcmFwaGljc0xheWVyOiB1c2VHcmFwaGljc0xheWVyXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBWZXJpZnkgc2VsZWN0aW9uIHdhcyBjbGVhcmVkXG4gICAgICAgIGNvbnN0IGFmdGVyQ2xlYXJJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1zZWxlY3Rpb24tY2xlYXJlZC1mcm9tLW1hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIHJlY29yZENvdW50OiBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgc2VsZWN0aW9uQWZ0ZXJDbGVhcjogYWZ0ZXJDbGVhcklkcy5sZW5ndGgsXG4gICAgICAgICAgdmVyaWZpZWRDbGVhcmVkOiBhZnRlckNsZWFySWRzLmxlbmd0aCA9PT0gMFxuICAgICAgICB9KVxuICAgICAgfSkoKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyLWZyb20tbWFwLWZhaWxlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIE5PVElGWSB0aGF0IGEgaGFzaCBwYXJhbWV0ZXIgaGFzIGJlZW4gdXNlZC5cbiAgICogUHJldmlvdXNseSB0aGlzIHJlbW92ZWQgdGhlIGhhc2ggZnJvbSB0aGUgVVJMLCBidXQgcGVyIHVwZGF0ZWQgcmVxdWlyZW1lbnRzLFxuICAgKiB1c2VyLWVudGVyZWQgaGFzaGVzIHNob3VsZCByZW1haW4gaW4gdGhlIFVSTC5cbiAgICogXG4gICAqIEBwYXJhbSBzaG9ydElkIC0gVGhlIHNob3J0SWQgcGFyYW1ldGVyIHRoYXQgd2FzIHVzZWRcbiAgICovXG4gIGhhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkID0gKHNob3J0SWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IGluaXRpYWxRdWVyeVZhbHVlIH0gPSB0aGlzLnN0YXRlXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWhhbmRsZWhhc2hwYXJhbWV0ZXJ1c2VkLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBzaG9ydElkLFxuICAgICAgY3VycmVudFN0YXRlOiB7XG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBOT1RFOiBIYXNoIHBhcmFtZXRlcnMgYXJlIE5PVCBjbGVhcmVkIGhlcmUgLSB0aGV5IHBlcnNpc3QgaW4gVVJMXG4gICAgLy8gSGFzaCBwYXJhbWV0ZXJzIGFyZSBvbmx5IGNvbnN1bWVkIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2RlcyAoQWRkL1JlbW92ZSlcbiAgICAvLyB0byBwcmV2ZW50IHJlLXRyaWdnZXJpbmcgd2hlbiB0aGUgdXNlciBtYW51YWxseSBzd2l0Y2hlcyBtb2Rlc1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlSGFzaFBhcmFtZXRlclVzZWQtbm90aWZpZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgc2hvcnRJZDogc2hvcnRJZCxcbiAgICAgIGN1cnJlbnRJbml0aWFsUXVlcnlWYWx1ZTogaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICBub3RlOiAnSGFzaCBwYXJhbWV0ZXIgdXNlZCBidXQgTk9UIGNsZWFyZWQgLSBoYXNoIHJlbWFpbnMgaW4gVVJMIHBlciB1c2VyIHJlcXVpcmVtZW50JyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBUcmFjayB0aGlzIHNob3J0SWQ6dmFsdWUgcGFpciBhcyBwcm9jZXNzZWQgdG8gcHJldmVudCByZS1leGVjdXRpb24gd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgIC8vIFRoaXMgcHJldmVudHMgSGVscGVyU2ltcGxlIGZyb20gcmUtdHJpZ2dlcmluZyB0aGUgc2FtZSBwYXJhbWV0ZXIgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgIGlmIChpbml0aWFsUXVlcnlWYWx1ZSkge1xuICAgICAgY29uc3QgcGFyYW1LZXkgPSBgJHtpbml0aWFsUXVlcnlWYWx1ZS5zaG9ydElkfToke2luaXRpYWxRdWVyeVZhbHVlLnZhbHVlfWBcbiAgICAgIHRoaXMucHJvY2Vzc2VkSGFzaFBhcmFtc1JlZi5hZGQocGFyYW1LZXkpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1oYXNocGFyYW0tdHJhY2tlZC1hcy1wcm9jZXNzZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHNob3J0SWQ6IGluaXRpYWxRdWVyeVZhbHVlLnNob3J0SWQsXG4gICAgICAgIHZhbHVlOiBpbml0aWFsUXVlcnlWYWx1ZS52YWx1ZSxcbiAgICAgICAgcGFyYW1LZXksXG4gICAgICAgIHByb2Nlc3NlZFBhcmFtczogQXJyYXkuZnJvbSh0aGlzLnByb2Nlc3NlZEhhc2hQYXJhbXNSZWYpLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEFMV0FZUyBjbGVhciBib3RoIGhhc2ggc3RhdGUgdmFsdWVzIGFmdGVyIGV4ZWN1dGlvblxuICAgIC8vIFF1ZXJ5U2ltcGxlIHNob3VsZCBub3QgcmVtZW1iZXIgaGFzaCBzdGF0ZSBhZnRlciBIZWxwZXJTaW1wbGUtZHJpdmVuIGV4ZWN1dGlvbiBjb21wbGV0ZXNcbiAgICAvLyBUaGlzIHByZXZlbnRzIGF1dG9ub21vdXMgcmUtcHJvY2Vzc2luZyB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gICAgLy8gVXNpbmcgYSBzaW5nbGUgc2V0U3RhdGUgZW5zdXJlcyBhdG9taWMgdXBkYXRlIGFuZCBwcmV2ZW50cyByYWNlIGNvbmRpdGlvbnNcbiAgICB0aGlzLnNldFN0YXRlKHsgXG4gICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogZmFsc2UsXG4gICAgICBpbml0aWFsUXVlcnlWYWx1ZTogdW5kZWZpbmVkXG4gICAgfSwgKCkgPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtaGFuZGxlaGFzaHBhcmFtZXRlcnVzZWQtc3RhdGUtY2xlYXJlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgc2hvcnRJZCxcbiAgICAgICAgbmV3U3RhdGU6IHtcbiAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgICB9LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ3Nob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLWZsYWctY2xlYXJlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBzaG9ydElkOiBzaG9ydElkLFxuICAgICAgZmxhZ1ZhbHVlOiBmYWxzZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH1cblxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyBjb25maWcsIGlkLCBpY29uLCBsYWJlbCwgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgY29udHJvbGxlcldpZGdldElkIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3Qgd2lkZ2V0TGFiZWwgPSB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7XG4gICAgICBpZDogJ193aWRnZXRMYWJlbCcsXG4gICAgICBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLl93aWRnZXRMYWJlbFxuICAgIH0pXG4gICAgaWYgKCFjb25maWcucXVlcnlJdGVtcz8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gPFdpZGdldFBsYWNlaG9sZGVyIGljb249e2ljb25NYXAuaWNvblF1ZXJ5fSB3aWRnZXRJZD17dGhpcy5wcm9wcy5pZH0gbmFtZT17d2lkZ2V0TGFiZWx9IC8+XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5hcnJhbmdlVHlwZSA9PT0gUXVlcnlBcnJhbmdlVHlwZS5Qb3BwZXIgJiYgIWNvbnRyb2xsZXJXaWRnZXRJZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFF1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17YCR7bGF5b3V0SWR9OiR7bGF5b3V0SXRlbUlkfWB9PlxuICAgICAgICAgIDxUYXNrTGlzdFBvcHBlcldyYXBwZXJcbiAgICAgICAgICAgIGlkPXswfVxuICAgICAgICAgICAgaWNvbj17aWNvbn1cbiAgICAgICAgICAgIHBvcHBlclRpdGxlPXtsYWJlbH1cbiAgICAgICAgICAgIG1pblNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/Lm1pblNpemV9XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8uZGVmYXVsdFNpemV9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgICA8UXVlcnlUYXNrTGlzdCBcbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17aWR9IFxuICAgICAgICAgICAgICAgIGlzSW5Qb3BwZXIgXG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtcz17Y29uZmlnLnF1ZXJ5SXRlbXN9IFxuICAgICAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX0gXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwYi00JyBcbiAgICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZT17dGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZX0gXG4gICAgICAgICAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb249e3RoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17dGhpcy5oYW5kbGVIYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgICAgICByZXN1bHRzTW9kZT17dGhpcy5zdGF0ZS5yZXN1bHRzTW9kZX1cbiAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlPXt0aGlzLmhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcz17dGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHN9XG4gICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e3RoaXMuaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ9e2NvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0fVxuICAgICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXI9e3RoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICBtYXBWaWV3PXt0aGlzLm1hcFZpZXdSZWYuY3VycmVudCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcj17dGhpcy5pbml0aWFsaXplR3JhcGhpY3NMYXllckZyb21PdXRwdXREU31cbiAgICAgICAgICAgICAgICBvbkNsZWFyR3JhcGhpY3NMYXllcj17dGhpcy5jbGVhckdyYXBoaWNzTGF5ZXJJZkV4aXN0c31cbiAgICAgICAgICAgICAgICBhY3RpdmVUYWI9e3RoaXMuc3RhdGUuYWN0aXZlVGFifVxuICAgICAgICAgICAgICAgIG9uVGFiQ2hhbmdlPXt0aGlzLmhhbmRsZVRhYkNoYW5nZX1cbiAgICAgICAgICAgICAgICBldmVudE1hbmFnZXI9e3RoaXMuZXZlbnRNYW5hZ2VyfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmFycmFuZ2VUeXBlID09PSBRdWVyeUFycmFuZ2VUeXBlLklubGluZSAmJiAhY29udHJvbGxlcldpZGdldElkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgPFRhc2tMaXN0SW5saW5lXG4gICAgICAgICAgICB3aWRnZXRJZD17aWR9XG4gICAgICAgICAgICB3aWRnZXRMYWJlbD17bGFiZWx9XG4gICAgICAgICAgICB3cmFwPXtjb25maWcuYXJyYW5nZVdyYXB9XG4gICAgICAgICAgICBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc31cbiAgICAgICAgICAgIG1pblNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/Lm1pblNpemV9XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8uZGVmYXVsdFNpemV9XG4gICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZT17dGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZX1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMuaGFuZGxlSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9RdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXI+XG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYXBlciByZWY9e3RoaXMud2lkZ2V0UmVmfSB2YXJpYW50PSdmbGF0JyBjbGFzc05hbWU9J2ppbXUtd2lkZ2V0IHJ1bnRpbWUtcXVlcnknIGRhdGEtd2lkZ2V0aWQ9e2lkfSBjc3M9e2Nzc2BcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgYH0+XG4gICAgICAgIHsvKiBIaWRkZW4gSmltdU1hcFZpZXdDb21wb25lbnQgdG8gZ2V0IG1hcCB2aWV3IGZvciBncmFwaGljcyBsYXllciAqL31cbiAgICAgICAgey8qIFVzZXMgZXhwbGljaXQgbWFwIHdpZGdldCBJRCBmcm9tIGNvbmZpZyAod2lkZ2V0LWxldmVsIGJpbmRpbmcpICovfVxuICAgICAgICB7Y29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgY29uZmlnLmhpZ2hsaWdodE1hcFdpZGdldElkICYmIChcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcbiAgICAgICAgICAgIHVzZU1hcFdpZGdldElkPXtjb25maWcuaGlnaGxpZ2h0TWFwV2lkZ2V0SWR9XG4gICAgICAgICAgICBvbkFjdGl2ZVZpZXdDaGFuZ2U9e3RoaXMuaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2lkZ2V0LWhlYWRlclwiIGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDZweCAxNnB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlKTtcbiAgICAgICAgYH0+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cIndpZGdldC10aXRsZVwiIGNzcz17Y3NzYFxuICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIHtsYWJlbCB8fCB3aWRnZXRMYWJlbH1cbiAgICAgICAgICA8L2gzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBgfT5cbiAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICAgIGB9PlxuICAgICAgICAgICAgPFF1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17YCR7bGF5b3V0SWR9OiR7bGF5b3V0SXRlbUlkfWB9PlxuICAgICAgICAgICAgICA8UXVlcnlUYXNrTGlzdCBcbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17aWR9IFxuICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfSBcbiAgICAgICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9IFxuICAgICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlPXt0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlfSBcbiAgICAgICAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbj17dGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXt0aGlzLmhhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXt0aGlzLnN0YXRlLnJlc3VsdHNNb2RlfVxuICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2U9e3RoaXMuaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXt0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17dGhpcy5oYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17Y29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHR9XG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcj17dGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG1hcFZpZXc9e3RoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPXt0aGlzLmluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTfVxuICAgICAgICAgICAgICAgIG9uQ2xlYXJHcmFwaGljc0xheWVyPXt0aGlzLmNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzfVxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17dGhpcy5zdGF0ZS5hY3RpdmVUYWJ9XG4gICAgICAgICAgICAgICAgb25UYWJDaGFuZ2U9e3RoaXMuaGFuZGxlVGFiQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGV2ZW50TWFuYWdlcj17dGhpcy5ldmVudE1hbmFnZXJ9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGVcbiAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1BhcGVyPlxuICAgIClcbiAgfVxufVxuXG5cbiBleHBvcnQgZnVuY3Rpb24gX19zZXRfd2VicGFja19wdWJsaWNfcGF0aF9fKHVybCkgeyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyA9IHVybCB9Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9