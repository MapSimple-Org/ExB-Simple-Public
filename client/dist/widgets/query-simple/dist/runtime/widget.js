System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/sql-expression-runtime","widgets/shared-code/common","jimu-layouts/layout-runtime","jimu-theme"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/filled/directional/down.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/filled/directional/down.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownFilled: () => (/* binding */ DownFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/down.svg */ "./jimu-icons/svg/filled/directional/down.svg");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/filled/directional/right.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/filled/directional/right.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightFilled: () => (/* binding */ RightFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/right.svg */ "./jimu-icons/svg/filled/directional/right.svg");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowLeftOutlined: () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/collapse-all.tsx":
/*!**********************************************************!*\
  !*** ./jimu-icons/outlined/directional/collapse-all.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollapseAllOutlined: () => (/* binding */ CollapseAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/collapse-all.svg */ "./jimu-icons/svg/outlined/directional/collapse-all.svg");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CollapseAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/expand-all.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/expand-all.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExpandAllOutlined: () => (/* binding */ ExpandAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/expand-all.svg */ "./jimu-icons/svg/outlined/directional/expand-all.svg");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ExpandAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/close.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/close.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CloseOutlined: () => (/* binding */ CloseOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CloseOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/trash.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TrashOutlined: () => (/* binding */ TrashOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/svg/filled/directional/down.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/down.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m14 4-6 8-6-8z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/directional/right.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/right.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m4 2 8 6-8 6z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/collapse-all.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/collapse-all.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/expand-all.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/expand-all.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/error.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/error.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/icon.svg":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/query-simple/icon.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" d=\"M8.5 3A5.5 5.5 0 0 1 14 8.5a5.5 5.5 0 0 1-1.273 3.527l4.053 4.054a.75.75 0 1 1-1.06 1.06l-4.054-4.053a5.5 5.5 0 0 1-3.527 1.273 5.5 5.5 0 1 1 0-11H8.5zm0 1.5h-.361a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\"></path><rect width=\"19\" height=\"19\" x=\".5\" y=\".5\" stroke=\"#000\" rx=\"1.5\"></rect></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/config.ts":
/*!************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateToolType: () => (/* binding */ CreateToolType),
/* harmony export */   FieldsType: () => (/* binding */ FieldsType),
/* harmony export */   ListDirection: () => (/* binding */ ListDirection),
/* harmony export */   PagingType: () => (/* binding */ PagingType),
/* harmony export */   QueryArrangeType: () => (/* binding */ QueryArrangeType),
/* harmony export */   ResultSelectMode: () => (/* binding */ ResultSelectMode),
/* harmony export */   SelectionType: () => (/* binding */ SelectionType),
/* harmony export */   SortDirection: () => (/* binding */ SortDirection),
/* harmony export */   SpatialFilterType: () => (/* binding */ SpatialFilterType),
/* harmony export */   SpatialRelation: () => (/* binding */ SpatialRelation),
/* harmony export */   SymbolType: () => (/* binding */ SymbolType),
/* harmony export */   UnitType: () => (/* binding */ UnitType),
/* harmony export */   mapJSAPISpatialRelToDsSpatialRel: () => (/* binding */ mapJSAPISpatialRelToDsSpatialRel),
/* harmony export */   mapJSAPIUnitToDsUnit: () => (/* binding */ mapJSAPIUnitToDsUnit)
/* harmony export */ });
var CreateToolType;
(function (CreateToolType) {
    CreateToolType["Point"] = "Point";
    CreateToolType["Polyline"] = "Polyline";
    CreateToolType["Polygon"] = "Polygon";
    CreateToolType["Rectangle"] = "Rectangle";
    CreateToolType["Circle"] = "Circle";
})(CreateToolType || (CreateToolType = {}));
var SelectionType;
(function (SelectionType) {
    SelectionType["NewSelection"] = "NEW_SELECTION";
    SelectionType["AddToSelection"] = "ADD_TO_CURRENT_SELECTION";
    SelectionType["RemoveFromSelection"] = "REMOVE_FROM_CURRENT_SELECTION";
    SelectionType["SubsetSelection"] = "SUBSET_FROM_CURRENT_SELECTION";
    SelectionType["SwitchSelection"] = "SWITCH_CURRENT_SELECTION";
})(SelectionType || (SelectionType = {}));
var QueryArrangeType;
(function (QueryArrangeType) {
    QueryArrangeType["Block"] = "BLOCK";
    QueryArrangeType["Inline"] = "INLINE";
    QueryArrangeType["Popper"] = "POPPER";
})(QueryArrangeType || (QueryArrangeType = {}));
var SpatialFilterType;
(function (SpatialFilterType) {
    SpatialFilterType["CurrentMapExtent"] = "CurrentMapExtent";
    SpatialFilterType["InteractiveDrawMode"] = "InteractiveDrawMode";
    SpatialFilterType["None"] = "";
})(SpatialFilterType || (SpatialFilterType = {}));
var SpatialRelation;
(function (SpatialRelation) {
    SpatialRelation["Intersect"] = "intersects";
    SpatialRelation["Contain"] = "contains";
    SpatialRelation["Cross"] = "crosses";
    SpatialRelation["EnvelopeIntersect"] = "envelope-intersects";
    SpatialRelation["IndexIntersect"] = "index-intersects";
    SpatialRelation["Overlap"] = "overlaps";
    SpatialRelation["Touch"] = "touches";
    SpatialRelation["Within"] = "within";
})(SpatialRelation || (SpatialRelation = {}));
const mapJSAPISpatialRelToDsSpatialRel = {
    [SpatialRelation.Intersect]: 'esriSpatialRelIntersects',
    [SpatialRelation.Contain]: 'esriSpatialRelContains',
    [SpatialRelation.Cross]: 'esriSpatialRelCrosses',
    [SpatialRelation.EnvelopeIntersect]: 'esriSpatialRelEnvelopeIntersects',
    [SpatialRelation.IndexIntersect]: 'esriSpatialRelIndexIntersects',
    [SpatialRelation.Overlap]: 'esriSpatialRelOverlaps',
    [SpatialRelation.Touch]: 'esriSpatialRelTouches',
    [SpatialRelation.Within]: 'esriSpatialRelWithin'
};
var UnitType;
(function (UnitType) {
    UnitType["Miles"] = "Miles";
    UnitType["Kilometers"] = "Kilometers";
    UnitType["Feet"] = "Feet";
    UnitType["Meters"] = "Meters";
    UnitType["NauticalMiles"] = "NauticalMiles";
})(UnitType || (UnitType = {}));
const mapJSAPIUnitToDsUnit = {
    [UnitType.Miles]: 'esriSRUnit_StatuteMile',
    [UnitType.Kilometers]: 'esriSRUnit_Kilometer',
    [UnitType.Feet]: 'esriSRUnit_Foot',
    [UnitType.Meters]: 'esriSRUnit_Meter',
    [UnitType.NauticalMiles]: 'esriSRUnit_NauticalMile'
};
var ListDirection;
(function (ListDirection) {
    ListDirection["Horizontal"] = "Horizontal";
    ListDirection["Vertical"] = "Vertical";
})(ListDirection || (ListDirection = {}));
var PagingType;
(function (PagingType) {
    PagingType["MultiPage"] = "MultiPage";
    PagingType["LazyLoad"] = "LazyLoad";
})(PagingType || (PagingType = {}));
var FieldsType;
(function (FieldsType) {
    FieldsType["PopupSetting"] = "PopupSetting";
    FieldsType["SelectAttributes"] = "SelectAttributes";
})(FieldsType || (FieldsType = {}));
var SortDirection;
(function (SortDirection) {
    SortDirection["Asc"] = "Asc";
    SortDirection["Desc"] = "Desc";
})(SortDirection || (SortDirection = {}));
var ResultSelectMode;
(function (ResultSelectMode) {
    ResultSelectMode["Single"] = "Single";
    ResultSelectMode["Multiple"] = "Multiple";
})(ResultSelectMode || (ResultSelectMode = {}));
var SymbolType;
(function (SymbolType) {
    SymbolType["DefaultSymbol"] = "DefaultSymbol";
    SymbolType["CustomSymbol"] = "CustomSymbol";
})(SymbolType || (SymbolType = {}));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAddToMapAction: () => (/* binding */ createAddToMapAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Custom "Add to Map" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Show on Map" action with a custom
 * implementation that uses QuerySimple's selection process (selectRecordsAndPublish).
 * This ensures consistent behavior with query results and proper integration
 * with the widget's "Clear results" functionality.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Add to Map" data action that uses QuerySimple's selection process.
 *
 * This action replaces the framework's "Show on Map" action and ensures consistent
 * behavior with QuerySimple's query results by using the same selection mechanism.
 *
 * @param widgetId - The widget ID that provides this action
 * @param outputDS - The output data source (used for selection on the origin layer)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration (for zoomToSelected setting)
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns A DataAction object that can be used by DataActionList
 */
function createAddToMapAction(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    return {
        id: `${widgetId}-addToMap`,
        name: 'addToMap',
        label: intl.formatMessage({ id: 'addToMap', defaultMessage: 'Add to map' }),
        // Icon matches the framework's "Show on Map" action for consistency
        icon: (__webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg"),
        // Note: Index may not control position if extraActions are always appended after framework actions
        index: -100,
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records
            if (!dataSets || dataSets.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'No data sets'
                });
                return false;
            }
            // Check if we have records and output data source
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            const supported = hasRecords && !!outputDS;
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                result: supported,
                hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return supported;
        }),
        /**
         * Executes the action by selecting records using QuerySimple's selection process.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            if (!outputDS || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: !outputDS ? 'No outputDS' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            // Get record IDs
            const recordIds = allRecords.map(record => record.getId());
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                recordsCount: allRecords.length,
                recordIds: recordIds.slice(0, 10), // Log first 10 IDs
                outputDSId: outputDS.id
            });
            // Use QuerySimple's selection process - selects on origin layer and publishes selection messages
            // This ensures consistent behavior with query results and proper integration with "Clear results"
            try {
                (0,_runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, allRecords, true);
                // Determine zoom behavior: runtime override takes precedence, then queryItem config, defaults to true
                const shouldZoom = runtimeZoomToSelected !== undefined
                    ? runtimeZoomToSelected
                    : ((queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== false);
                if (shouldZoom && allRecords.length > 0) {
                    const zoomDataSet = {
                        dataSource: outputDS,
                        records: allRecords,
                        name: outputDS.getLabel()
                    };
                    // Find and execute the zoomToFeature action from available framework actions
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().getSupportedActions(widgetId, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records)
                        .then(actionCategories => {
                        // Search through all action categories to find zoomToFeature action
                        let zoomAction = null;
                        for (const category in actionCategories) {
                            const actions = actionCategories[category];
                            zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature') || null;
                            if (zoomAction)
                                break;
                        }
                        if (zoomAction) {
                            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().executeDataAction(zoomAction, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records, widgetId);
                        }
                    })
                        .catch(error => {
                        debugLogger.log('DATA-ACTION', {
                            action: 'addToMap-onExecute-zoom',
                            error: error instanceof Error ? error.message : String(error)
                        });
                    });
                }
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: true,
                    message: 'Successfully selected records and published selection message',
                    zoomExecuted: shouldZoom
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                console.error('Error executing Add to Map action:', error);
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/index.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getExtraActions: () => (/* binding */ getExtraActions)
/* harmony export */ });
/* harmony import */ var _add_to_map_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-to-map-action */ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx");

/**
 * QuerySimple Custom Data Actions
 *
 * Returns custom data actions for the widget.
 * Includes a custom "Add to Map" action that uses QuerySimple's selection process.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source (null/undefined if not available)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns Array of custom DataAction objects (empty if conditions not met)
 */
function getExtraActions(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    // Only create the action if we have both an output data source and intl object
    if (outputDS && intl) {
        return [(0,_add_to_map_action__WEBPACK_IMPORTED_MODULE_0__.createAddToMapAction)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected)];
    }
    return [];
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/default-query-item.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/default-query-item.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_QUERY_ITEM: () => (/* binding */ DEFAULT_QUERY_ITEM)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/query-simple/src/config.ts");

const DEFAULT_QUERY_ITEM = {
    icon: null,
    displayLabel: true,
    sqlExprObj: null,
    useAttributeFilter: true,
    useSpatialFilter: true,
    spatialMapWidgetIds: [],
    spatialFilterTypes: [],
    spatialInteractiveCreateToolTypes: [
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Point,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polyline,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polygon,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Rectangle,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Circle
    ],
    spatialInteractiveEnableBuffer: false,
    spatialInteractiveBufferDistance: 0,
    spatialInteractiveBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    spatialRelations: [_config__WEBPACK_IMPORTED_MODULE_0__.SpatialRelation.Intersect],
    spatialRelationUseDataSources: [],
    spatialRelationEnableSelectTool: false,
    spatialRelationEnableBuffer: false,
    spatialRelationBufferDistance: 0,
    spatialRelationBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    resultListDirection: _config__WEBPACK_IMPORTED_MODULE_0__.ListDirection.Vertical,
    resultPagingStyle: _config__WEBPACK_IMPORTED_MODULE_0__.PagingType.MultiPage,
    resultFieldsType: _config__WEBPACK_IMPORTED_MODULE_0__.FieldsType.PopupSetting,
    resultSymbolType: _config__WEBPACK_IMPORTED_MODULE_0__.SymbolType.DefaultSymbol,
    resultCustomSymbol: {
        angle: 0,
        color: [255, 255, 255, 255],
        outline: {
            color: [255, 255, 255, 255],
            style: 'esriSLSSolid',
            type: 'esriSLS',
            width: 1
        },
        size: 6,
        style: 'esriSMSCircle',
        type: 'esriSMS',
        xoffset: 0,
        yoffset: 0
    },
    resultAllowChangeSymbol: false,
    allowExport: false,
    sortOptions: [],
    zoomToSelected: true,
    itemSizeMap: {
        arrangementHorizontalPopper: {
            minSize: { width: 300, height: 300 },
            defaultSize: { width: 360, height: 480 }
        }
    }
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferInput: () => (/* binding */ BufferInput)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */





function BufferInput(props) {
    const { distance = 0, unit = _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters, onBufferChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const [d, setD] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(distance);
    const [u, setU] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(unit);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_5__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        let changed = false;
        if (distance !== d) {
            setD(distance);
            changed = true;
        }
        if (unit !== u) {
            setU(unit);
            changed = true;
        }
        if (changed) {
            onBufferChange(distance, unit);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [distance, unit]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setD(distance);
            setU(unit);
            onBufferChange(distance, unit);
        }
    }, [queryTaskContext.resetSymbol, distance, unit, onBufferChange]);
    const handleDistanceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
    }, []);
    const handleDistanceAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
        onBufferChange(value, u);
    }, [onBufferChange, u]);
    const handleBufferUnitChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        setU(e.target.value);
        onBufferChange(d, e.target.value);
    }, [onBufferChange, d]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": getI18nMessage('theBufferDistance'), className: 'mr-1', value: d, onChange: handleDistanceChange, onAcceptValue: handleDistanceAccepted }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('unit'), value: u, onChange: handleBufferUnitChange, children: Object.values(_config__WEBPACK_IMPORTED_MODULE_3__.UnitType).map((value) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: value, children: getI18nMessage(`unit_${value}`) }, value))) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadStatus: () => (/* binding */ LoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/filled/directional/right */ "./jimu-icons/filled/directional/right.tsx");
/* harmony import */ var jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/filled/directional/down */ "./jimu-icons/filled/directional/down.tsx");

/** @jsx jsx */
// This file is duplicated from '../../../../feature-info/src/runtime/components/feature-info'





var LoadStatus;
(function (LoadStatus) {
    LoadStatus["Pending"] = "Pending";
    LoadStatus["Fulfilled"] = "Fulfilled";
    LoadStatus["Rejected"] = "Rejected";
})(LoadStatus || (LoadStatus = {}));
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  border: 1px solid var(--sys-color-divider-secondary);
  .esri-widget__heading {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    margin: 0;
    color: var(--sys-color-surface-paper-text);
  }

  .esri-feature__content-element {
    padding: 0;
  }

  .jimu-btn.expanded {
    align-self: flex-start;
  }

  .esri-feature.esri-widget {
    background-color: transparent;
  }
`;
class FeatureInfo extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor(props) {
        super(props);
        this.toggleExpanded = (e) => {
            e.stopPropagation();
            this.setState({ showContent: !this.state.showContent });
        };
        const { togglable = false, expandByDefault } = this.props;
        this.featureContainer = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.state = {
            showContent: !togglable || expandByDefault,
            loadStatus: LoadStatus.Pending
        };
    }
    componentDidMount() {
        this.createFeature();
    }
    componentDidUpdate(prevProps) {
        if (this.feature) {
            if (prevProps.popupTemplate !== this.props.popupTemplate ||
                prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate ||
                prevProps.graphic !== this.props.graphic) {
                this.destroyFeature();
                this.createFeature();
            }
            else {
                this.feature.visibleElements = this.getVisibleElements();
            }
        }
    }
    destroyFeature() {
        this.feature && !this.feature.destroyed && this.feature.destroy();
    }
    getVisibleElements() {
        const { togglable = false } = this.props;
        const { showContent } = this.state;
        const expanded = togglable ? showContent : true;
        return {
            title: true,
            content: {
                fields: expanded,
                text: expanded,
                media: expanded,
                attachments: expanded
            },
            lastEditedInfo: false
        };
    }
    createFeature() {
        let featureModulePromise;
        if (this.Feature) {
            featureModulePromise = Promise.resolve();
        }
        else {
            featureModulePromise = (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Feature'
            ]).then(modules => {
                [
                    this.Feature
                ] = modules;
            });
        }
        return featureModulePromise.then(() => {
            var _a, _b, _c, _d;
            const container = document && document.createElement('div');
            container.className = 'jimu-widget';
            this.featureContainer.current.appendChild(container);
            const originDS = this.props.dataSource.getOriginDataSources();
            const rootDataSource = (_a = originDS === null || originDS === void 0 ? void 0 : originDS[0]) === null || _a === void 0 ? void 0 : _a.getRootDataSource();
            this.destroyFeature();
            const layer = this.props.graphic.layer;
            if (this.props.popupTemplate) {
                this.props.graphic.popupTemplate = this.props.popupTemplate;
            }
            else if (layer) {
                // set popupTemplate with layer's popupTemplate or defaultPopupTemplate
                this.props.graphic.popupTemplate = (_b = layer.popupTemplate) !== null && _b !== void 0 ? _b : this.props.defaultPopupTemplate;
            }
            else {
                this.props.graphic.popupTemplate = this.props.defaultPopupTemplate;
            }
            if (layer && !layer.popupTemplate) {
                layer.popupTemplate = this.props.popupTemplate || this.props.defaultPopupTemplate;
            }
            this.feature = new this.Feature({
                container: container,
                defaultPopupTemplateEnabled: true,
                // @ts-expect-error
                spatialReference: ((_d = (_c = this.props.dataSource) === null || _c === void 0 ? void 0 : _c.layer) === null || _d === void 0 ? void 0 : _d.spatialReference) || null,
                // @ts-expect-error
                map: (rootDataSource === null || rootDataSource === void 0 ? void 0 : rootDataSource.map) || null,
                graphic: this.props.graphic,
                visibleElements: this.getVisibleElements()
            });
        }).then(() => {
            this.setState({ loadStatus: LoadStatus.Fulfilled });
        });
    }
    render() {
        const { togglable = false, intl } = this.props;
        const { showContent } = this.state;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'feature-info-component d-flex align-items-center p-2', css: style, children: [togglable && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { "aria-label": intl.formatMessage({ id: showContent ? 'collapse' : 'expand' }), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 jimu-outline-inside flex-shrink-0', { expanded: showContent }), variant: 'text', color: 'inherit', icon: true, size: 'sm', onClick: this.toggleExpanded, children: showContent ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__.DownFilled, { size: 's' }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__.RightFilled, { size: 's', autoFlip: true }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1', ref: this.featureContainer })] }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(FeatureInfo));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDraw: () => (/* binding */ GeometryFromDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-draw-tool */ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







function GeometryFromDraw(props) {
    const { onGeometryChange, createToolTypes, mapWidgetIds, enableBuffer, bufferDistance, bufferUnit, onBufferChange, widgetId } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_7__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geodesicBufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryServiceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferDistanceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferDistance);
    const bufferUnitRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferUnit);
    const bufferedGraphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (enableBuffer) {
            // Parent component query-task-spatial-form will reset buffer parameter when filter type changes,
            // so defer the init buffer option in order not to be override by its parent.
            jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
                onBufferChange(bufferDistance, bufferUnit);
            });
        }
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
            'esri/Graphic'
        ]).then((modules) => {
            const Graphic = modules[0];
            bufferedGraphicRef.current = new Graphic({
                symbol: {
                    type: 'simple-fill',
                    color: [51, 51, 204, 0.5],
                    style: 'solid',
                    outline: {
                        color: [51, 51, 204, 0.8],
                        width: 1
                    }
                }
            });
        });
    });
    const applyBufferEffect = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        if (!geometryRef.current || !enableBuffer || bufferDistanceRef.current === 0) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        // If the end user uses a point or line query geometry, then the negative buffer will not work (same effect as there is no buffer)
        const isPointNegativeBuffer = (((_a = geometryRef.current) === null || _a === void 0 ? void 0 : _a.type) === 'point' || ((_b = geometryRef.current) === null || _b === void 0 ? void 0 : _b.type) === 'multipoint') && bufferDistanceRef.current < 0;
        const isLineNegativeBuffer = ((_c = geometryRef.current) === null || _c === void 0 ? void 0 : _c.type) === 'polyline' && bufferDistanceRef.current < 0;
        if (isPointNegativeBuffer || isLineNegativeBuffer) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        const geometry = geometryRef.current;
        // https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html#buffer
        if (((_d = geometry.spatialReference) === null || _d === void 0 ? void 0 : _d.isGeographic) && !geometry.spatialReference.isWGS84) {
            const serviceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getGeometryService();
            if (!geometryServiceRef.current) {
                const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                    'esri/rest/geometryService',
                    'esri/rest/support/BufferParameters'
                ]);
                geometryServiceRef.current = {
                    geometryService: modules[0],
                    bufferParameters: modules[1]
                };
            }
            const { geometryService, bufferParameters: BufferParameters } = geometryServiceRef.current;
            const polygons = yield geometryService.buffer(serviceUrl, new BufferParameters({
                distances: [bufferDistanceRef.current],
                unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current),
                geodesic: true,
                bufferSpatialReference: geometry.spatialReference,
                outSpatialReference: geometry.spatialReference,
                geometries: [geometry]
            }));
            bufferedGraphicRef.current.geometry = polygons[0];
        }
        else {
            if (((_e = geometry.spatialReference) === null || _e === void 0 ? void 0 : _e.isWGS84) || ((_f = geometry.spatialReference) === null || _f === void 0 ? void 0 : _f.isWebMercator)) {
                if (!geodesicBufferOperatorRef.current) {
                    geodesicBufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/geodesicBufferOperator');
                }
                if (!geodesicBufferOperatorRef.current.isLoaded()) {
                    yield geodesicBufferOperatorRef.current.load();
                }
                bufferedGraphicRef.current.geometry = geodesicBufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
            else {
                if (!bufferOperatorRef.current) {
                    bufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/bufferOperator');
                }
                bufferedGraphicRef.current.geometry = bufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
        }
    }), [enableBuffer]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            getLayerFunRef.current && getLayerFunRef.current().removeAll();
            onGeometryChange(null);
        }
    }, [queryTaskContext.resetSymbol, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        // clear drawing graphics before switching map view
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        if (layer) {
            layer.removeAll();
            onGeometryChange(null);
        }
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, [onGeometryChange]);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferDistanceRef.current = distance;
        bufferUnitRef.current = unit;
        applyBufferEffect();
        onBufferChange(distance, unit);
    }, [onBufferChange, applyBufferEffect]);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic, getLayerFun, clearAfterApply) => {
        getLayerFunRef.current = getLayerFun;
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        // it's possible that the geometry is the same as the previous one, only the clearAfterApply is changed.
        if (geometryRef.current !== (graphic === null || graphic === void 0 ? void 0 : graphic.geometry)) {
            geometryRef.current = graphic === null || graphic === void 0 ? void 0 : graphic.geometry;
            applyBufferEffect().then(() => {
                if (bufferedGraphicRef.current.geometry) {
                    layer === null || layer === void 0 ? void 0 : layer.add(bufferedGraphicRef.current);
                }
            });
        }
        onGeometryChange(graphic === null || graphic === void 0 ? void 0 : graphic.geometry, layer, graphic, clearAfterApply);
    }, [onGeometryChange, applyBufferEffect]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))), (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__.InteractiveDraw, { jimuMapView: jimuMapView, widgetId: widgetId, toolTypes: createToolTypes, onDrawEnd: handleDrawEnd }), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'title3', "aria-label": getI18nMessage('theBufferDistance'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_5__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: handleBufferChange }) })] }))] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDataSource: () => (/* binding */ GeometryFromDataSource)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */






const marginStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`;
function getRuntimeDataSource() {
    const result = {};
    let notEmpty = false;
    const dsMap = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSources();
    Object.keys(dsMap).forEach(dsId => {
        const ds = dsMap[dsId];
        // only include the ds that has geometry
        if (ds.getGeometryType() != null && !ds.isInAppConfig() && ds.getMainDataSource().id === dsId && !ds.getDataSourceJson().isOutputFromWidget) {
            result[dsId] = ds;
            notEmpty = true;
        }
    });
    return notEmpty ? result : null;
}
function GeometryFromDataSource(props) {
    var _a;
    const { onSelectionChange, useDataSources = [], useRuntimeData, spatialRelations, enableBuffer, bufferDistance, bufferUnit, onBufferChange, onRelationChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [currentDataSource, setCurrentDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(useDataSources[0]);
    const [runtimeDataSource, setRuntimeDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [count, setCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const [currentRelation, setCurrentRelation] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_6__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation();
    const spatialRelationOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return Object.entries(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialRelation).map(([key, value]) => ({
            value,
            label: getI18nMessage(`spatialRelation_${key}`)
        }));
    }, [getI18nMessage]);
    const loadedUseDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const loaded = [];
        useDataSources.forEach((item) => {
            var _a, _b;
            if (((_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[item.mainDataSourceId]) === null || _b === void 0 ? void 0 : _b.instanceStatus) === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created) {
                loaded.push(item.dataSourceId);
            }
        });
        if (loaded.length > 0) {
            return loaded.join(',');
        }
        return '';
    });
    const numOfDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        if (!useRuntimeData) {
            return 0;
        }
        return Object.keys((_a = state.dataSourcesInfo) !== null && _a !== void 0 ? _a : {}).filter(dsId => state.dataSourcesInfo[dsId].instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created).length;
    });
    const runtimeDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (numOfDs > 0) {
            return getRuntimeDataSource();
        }
    }, [numOfDs]);
    const numOfRuntimeDs = Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).length;
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if ((spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0) {
            onRelationChange(spatialRelations[0]);
        }
        if (enableBuffer) {
            onBufferChange(bufferDistance, bufferUnit);
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setCurrentRelation(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
            onRelationChange(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
        }
    }, [queryTaskContext.resetSymbol, onRelationChange, spatialRelations]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!spatialRelations) {
            setCurrentRelation(null);
        }
        else if (!spatialRelations.includes(currentRelation)) {
            setCurrentRelation(spatialRelations[0]);
            onRelationChange(spatialRelations[0]);
        }
    }, [spatialRelations, currentRelation, onRelationChange]);
    const handleDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = useDataSources.find((item) => item.dataSourceId === dsId);
        setCurrentDataSource((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(ds));
        setRuntimeDataSource(null);
    }, [useDataSources]);
    const handleRuntimeDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(dsId);
        setRuntimeDataSource(ds);
        setCurrentDataSource(null);
    }, []);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource((_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        if ((records === null || records === void 0 ? void 0 : records.length) > 0) {
            const geometries = records.map((record) => record.getJSAPIGeometry());
            onSelectionChange(geometries);
            setCount(records.length);
        }
        else {
            onSelectionChange(null);
            setCount(0);
        }
    }, [currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId, runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, onSelectionChange]);
    const getLabelOfSpatialRelation = (relation) => {
        return spatialRelationOptions.find(item => item.value === relation).label;
    };
    const handleSpatialRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(e => {
        setCurrentRelation(e.target.value);
        onRelationChange(e.target.value);
    }, [onRelationChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: marginStyle, className: 'title3', children: getI18nMessage('chooseFilterLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterLayer'), value: (_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, children: [numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('preconfigured') }), useDataSources.map((item) => {
                        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(item.dataSourceId);
                        if (loadedUseDataSources.includes(item.dataSourceId) || (ds === null || ds === void 0 ? void 0 : ds.getLabel())) {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: item.dataSourceId, onClick: () => { handleDataSourceChange(item.dataSourceId); }, children: ds === null || ds === void 0 ? void 0 : ds.getLabel() }, item.dataSourceId));
                        }
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { children: translate('loading') }, item.dataSourceId));
                    }), numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { divider: true }), numOfRuntimeDs > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('runtime') }), Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).map(dsId => {
                        const ds = runtimeDataSources[dsId];
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: dsId, onClick: () => { handleRuntimeDataSourceChange(dsId); }, children: ds.getLabel() }, dsId));
                    })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-1 font-italic', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `color: var(--sys-color-surface-paper-hint);`, children: getI18nMessage('selectedRecords', { num: count }) }), (spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate title3 mb-0', children: getI18nMessage('relationship') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('relationship'), value: currentRelation, onChange: handleSpatialRelationChange, children: spatialRelations.map((item) => {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item, children: getLabelOfSpatialRelation(item) }, item));
                        }) })] })), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', "aria-label": getI18nMessage('theBufferDistance'), css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3 text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_4__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: onBufferChange }) })] })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: currentDataSource, dataSource: runtimeDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), useDataSources.map((item) => {
                // make sure the datasource is created
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: item }, item.dataSourceId));
            })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromMap: () => (/* binding */ GeometryFromMap)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");

/** @jsx jsx */


function GeometryFromMap(props) {
    const { onGeometryChange, mapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const PolygonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            let handler;
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/core/reactiveUtils').then((reactiveUtils) => {
                handler = reactiveUtils.watch(() => jimuMapView.view.extent, (extent) => {
                    if (PolygonRef.current) {
                        onGeometryChange(PolygonRef.current.fromExtent(extent));
                    }
                    else {
                        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/geometry/Polygon']).then(modules => {
                            PolygonRef.current = modules[0];
                            onGeometryChange(PolygonRef.current.fromExtent(extent));
                        });
                    }
                });
                // set initial extent
                onGeometryChange(jimuMapView.view.extent);
            });
            return () => {
                if (handler) {
                    handler.remove();
                }
            };
        }
    }, [jimuMapView, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveDraw: () => (/* binding */ InteractiveDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");

/** @jsx jsx */





const sketchToolInfoMap = {
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Point]: { drawToolName: 'point', esriClassName: 'esri-icon-point', toolIndex: 0 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polyline]: { drawToolName: 'polyline', esriClassName: 'esri-icon-polyline', toolIndex: 4 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polygon]: { drawToolName: 'polygon', esriClassName: 'esri-icon-polygon', toolIndex: 2 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Rectangle]: {
        drawToolName: 'rectangle',
        esriClassName: 'esri-icon-checkbox-unchecked',
        toolIndex: 1
    },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Circle]: { drawToolName: 'circle', esriClassName: 'esri-icon-radio-unchecked', toolIndex: 3 }
};
function InteractiveDraw(props) {
    const { toolTypes = [], jimuMapView, onDrawEnd, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [mapModule, setMapModule] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const graphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [clearAfterApply, setClearAfterApply] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const visibleElements = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return {
            createTools: Object.entries(sketchToolInfoMap).reduce((result, [key, value]) => (Object.assign(Object.assign({}, result), { [value.drawToolName]: toolTypes.includes(key) })), { point: false }),
            selectionTools: {
                'lasso-selection': false,
                'rectangle-selection': false
            },
            settingsMenu: false,
            undoRedoMenu: false,
            deleteButton: true
        };
    }, [toolTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.moduleLoader.loadModule('jimu-ui/advanced/map').then((result) => {
            setMapModule(result);
        });
    });
    const handleDrawToolCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuDrawToolsRef) => {
        getLayerFunRef.current = jimuDrawToolsRef.getGraphicsLayer;
    }, []);
    const handleDrawStart = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        getLayerFunRef.current && (getLayerFunRef.current)().removeAll();
    }, []);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic) => {
        graphicRef.current = graphic;
        onDrawEnd(graphic, getLayerFunRef.current, clearAfterApply);
    }, [onDrawEnd, clearAfterApply]);
    const handleCleared = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        graphicRef.current = null;
        onDrawEnd(null);
    }, [onDrawEnd]);
    const handleClearSettingChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        if (graphicRef.current) {
            onDrawEnd(graphicRef.current, getLayerFunRef.current, e.target.checked);
        }
        setClearAfterApply(e.target.checked);
    }, [onDrawEnd]);
    const JimuDraw = mapModule === null || mapModule === void 0 ? void 0 : mapModule.JimuDraw;
    if (!JimuDraw) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.StatusIndicator, { statusType: widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading });
    }
    const isAvailable = Object.keys(visibleElements.createTools).some(toolName => visibleElements.createTools[toolName]);
    if (!isAvailable) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JimuDraw, { jimuMapView: jimuMapView, operatorWidgetId: widgetId, disableSymbolSelector: true, drawingOptions: {
                    creationMode: mapModule.JimuDrawCreationMode.Single,
                    updateOnGraphicClick: false,
                    visibleElements: visibleElements
                }, uiOptions: {
                    isHideBorder: true
                }, onJimuDrawCreated: handleDrawToolCreated, onDrawingStarted: handleDrawStart, onDrawingFinished: handleDrawEnd, onDrawingCleared: handleCleared }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: clearAfterApply, onChange: handleClearSettingChange, className: 'mr-2' }), getI18nMessage('clearDrawing')] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/lazy-list.tsx":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/lazy-list.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LazyList: () => (/* binding */ LazyList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







const { useRef, useState } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React;
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    flex: 1 1 ${isAutoHeight ? 'auto' : 0};
    overflow: auto;
    max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      flex-direction: column;
      .list-items {
        position: relative;
        flex-direction: column;
      }

      .feature-info-component {
        width: 100%;
      }

      .query-result-item + .query-result-item {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    .list-items {
      display: flex;
    }
    .lazyload-detector {
      height: 2px;
      width: 2px;
      opacity: 0;
    }
  `;
};
function LazyList(props) {
    const { widgetId, outputDS, queryParams, resultCount, records, queryItem, direction, onRenderDone, onEscape, onSelectChange, onRemove, defaultPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.CONSTANTS.DEFAULT_QUERY_PAGE_SIZE } = props;
    const [dataItems, setDataItems] = useState(records);
    const [popupTemplate, setPopupTemplate] = useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = useState();
    const [loadStatus, setLoadStatus] = useState(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Init);
    const dataItemsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useLatest(dataItems);
    const resultCountRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useLatest(resultCount);
    const loadStatusRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useLatest(loadStatus);
    const allDataItemsLoadedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useLatest((dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) === resultCount);
    const pageRef = useRef(0);
    const resultContainerRef = useRef(undefined);
    const el = useRef(null);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_7__.useAutoHeight)();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        pageRef.current = 1;
        resultContainerRef.current.scrollTop = 0;
        setDataItems(records);
    }, [records]);
    const loadByPages = () => __awaiter(this, void 0, void 0, function* () {
        if (allDataItemsLoadedRef.current || loadStatusRef.current === widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading) {
            return;
        }
        pageRef.current = pageRef.current + 1;
        setLoadStatus(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading);
        if (!queryParams.pageSize) {
            queryParams.pageSize = defaultPageSize;
        }
        const { records } = yield (0,_query_utils__WEBPACK_IMPORTED_MODULE_6__.executeQuery)(widgetId, queryItem, outputDS, Object.assign(Object.assign({}, queryParams), { page: pageRef.current }));
        if (resultCountRef.current > 0 && dataItemsRef.current.length + records.length >= resultCountRef.current) {
            allDataItemsLoadedRef.current = true;
        }
        const updatedItems = dataItemsRef.current.concat(records);
        setDataItems(updatedItems);
        onRenderDone === null || onRenderDone === void 0 ? void 0 : onRenderDone({
            dataItems: outputDS.getAllLoadedRecords()
        });
        setLoadStatus(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loaded);
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_6__.getPopupTemplate)(outputDS, queryItem).then((rs) => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        const elLoadDetector = el === null || el === void 0 ? void 0 : el.current;
        if (elLoadDetector) {
            const observer = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting) {
                    loadByPages();
                }
            });
            observer === null || observer === void 0 ? void 0 : observer.observe(elLoadDetector);
            return () => {
                observer === null || observer === void 0 ? void 0 : observer.disconnect();
            };
        }
    });
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_3__.ListDirection.Vertical }), css: getStyle(isAutoHeight), ref: resultContainerRef, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-items px-4 py-1', role: 'listbox', children: dataItems === null || dataItems === void 0 ? void 0 : dataItems.map((dataItem) => {
                    var _a;
                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_5__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: (_a = props.expandByDefault) !== null && _a !== void 0 ? _a : true, onClick: onSelectChange, onRemove: onRemove }, dataItem.getId()));
                }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: el, className: 'lazyload-detector', children: "\u00A0" }), loadStatus === widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingResult: () => (/* binding */ LoadingResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");





const Root = jimu_theme__WEBPACK_IMPORTED_MODULE_3__.styled.div `
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 2;

  .loading-content {
    .loading-tip {
      position: relative;
    }
  }
`;
function LoadingResult() {
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'loading-content w-100 px-4 d-flex flex-column justify-content-center align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { role: 'alert', "aria-live": 'assertive', className: 'text-paper', children: translate('retrieving') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { className: 'loading-tip mt-8', type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/paging-list.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/paging-list.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PagingList: () => (/* binding */ PagingList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







const { useRef, useState } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React;
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;

    .list_items {
      flex: 1 1 ${isAutoHeight ? 'auto' : 0};
      max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};
      overflow: auto;
      display: flex;
      flex-direction: row;
    }

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      .list_items {
        flex-direction: column;
      }
      .feature-info-component {
        width: 100%;
      }
      .query-result-item + .query-result-item {
        margin-top: 0.5rem;
        margin-left: 0;
      }
    }
    .page-size-selector {
      width: auto;
    }

    .query-editable-select {
      .jimu-numeric-input {
        width: 60px;
      }
    }
  `;
};
function PagingList(props) {
    const { widgetId, outputDS, queryItem, queryParams, resultCount, records, onRenderDone, onSelectChange, onRemove, direction, onEscape, defaultPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.CONSTANTS.DEFAULT_QUERY_PAGE_SIZE } = props;
    const [dataItems, setDataItems] = useState(records);
    const [popupTemplate, setPopupTemplate] = useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = useState();
    const [loadStatus, setLoadStatus] = useState(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Init);
    const pageRef = useRef(1);
    const pageSizeRef = useRef(defaultPageSize);
    const [pageSize, setPageSize] = useState(defaultPageSize);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_7__.useAutoHeight)();
    const pageSizeOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [defaultPageSize];
        if (Math.round(defaultPageSize / 2) !== result[0]) {
            result.push(Math.round(defaultPageSize / 2));
        }
        if (Math.round(defaultPageSize / 5) !== result[1]) {
            result.push(Math.round(defaultPageSize / 5));
        }
        return result.reverse();
    }, [defaultPageSize]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        pageRef.current = 1;
        setDataItems(records);
        setPageSize(pageSizeRef.current);
    }, [records]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_6__.getPopupTemplate)(outputDS, queryItem).then(rs => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    const loadByPages = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((currentPage, size) => __awaiter(this, void 0, void 0, function* () {
        pageRef.current = currentPage;
        setLoadStatus(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading);
        const result = yield (0,_query_utils__WEBPACK_IMPORTED_MODULE_6__.executeQuery)(widgetId, queryItem, outputDS, Object.assign(Object.assign({}, queryParams), { page: currentPage, pageSize: size }));
        setDataItems(result.records);
        onRenderDone === null || onRenderDone === void 0 ? void 0 : onRenderDone({
            dataItems: outputDS.getAllLoadedRecords(),
            pageSize: size,
            page: pageRef.current
        });
        setLoadStatus(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loaded);
    }), [onRenderDone, outputDS, queryItem, queryParams, widgetId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (defaultPageSize !== pageSizeRef.current) {
            if (defaultPageSize < pageSizeRef.current) {
                setDataItems(dataItems.slice(0, defaultPageSize));
            }
            else {
                loadByPages(1, defaultPageSize);
            }
            pageSizeRef.current = defaultPageSize;
            setPageSize(defaultPageSize);
        }
    }, [defaultPageSize, dataItems, loadByPages]);
    const handlePageSizeChange = (size) => {
        if (size > 0) {
            setPageSize(size);
            loadByPages(1, size);
        }
    };
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_3__.ListDirection.Vertical }), css: getStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list_items mb-2 px-4 py-1', role: 'listbox', children: dataItems === null || dataItems === void 0 ? void 0 : dataItems.map((dataItem) => {
                    var _a;
                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_5__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: (_a = props.expandByDefault) !== null && _a !== void 0 ? _a : true, onClick: onSelectChange, onRemove: onRemove }, dataItem.getId()));
                }) }), loadStatus === widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex justify-content-between align-items-center px-4', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Pagination, { className: 'd-flex justify-content-end', disabled: loadStatus === widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading, current: pageRef.current, totalPage: Math.ceil(resultCount / pageSize), onChangePage: (pageNum) => loadByPages(pageNum, pageSize), pageSize: pageSize, maxPageSize: 1000, pageSizeOptions: pageSizeOptions, onPageSizeChange: handlePageSizeChange, showSizeChanger: true }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryResultItem: () => (/* binding */ QueryResultItem)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/close */ "./jimu-icons/outlined/editor/close.tsx");
/* harmony import */ var _components_feature_info__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/feature-info */ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");

/** @jsx jsx */





const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  overflow: auto;
  flex-flow: row;
  cursor: pointer;
  flex-shrink: 0;
  min-height: 2rem;
  position: relative;
  &.selected {
    outline: 2px solid var(--sys-color-primary-main);
  }
  
  .remove-button {
    position: absolute;
    top: 4px;
    right: 4px;
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
  }
`;
/**
 * QueryResultItem component - displays a single query result record
 * Features:
 * - Clicking the item zooms to the feature on the map
 * - Remove button (X) in upper-right corner to remove record from results
 * - Records are expanded by default to show full feature information
 */
const QueryResultItem = (props) => {
    const { widgetId, data, dataSource, popupTemplate, defaultPopupTemplate, onClick, onRemove, expandByDefault = false } = props;
    // Check if this record is currently selected
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[dataSource.id]) === null || _b === void 0 ? void 0 : _b.selectedIds) === null || _c === void 0 ? void 0 : _c.includes(data.getId()); });
    // Determine if list is displayed vertically (affects FeatureInfo expandability)
    const isVerticalAlign = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection !== _config__WEBPACK_IMPORTED_MODULE_5__.ListDirection.Horizontal;
    });
    // Handle clicking on the result item - zooms to feature on map
    const handleClickResultItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        // Don't trigger zoom if clicking the remove button
        if (e.target.closest('.remove-button')) {
            return;
        }
        onClick(data);
    }, [onClick, data]);
    // Handle clicking the remove button - removes record from results and selection
    const handleRemove = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        e.stopPropagation(); // Prevent triggering the item click handler
        e.preventDefault();
        onRemove(data);
    }, [onRemove, data]);
    const onKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Enter' || evt.key === ' ') {
            evt.preventDefault();
            evt.stopPropagation();
            handleClickResultItem(evt);
        }
    }, [handleClickResultItem]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-result-item', { selected }), onClick: handleClickResultItem, onKeyUp: onKeyUp, css: style, role: 'option', "aria-selected": selected, tabIndex: 0, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_feature_info__WEBPACK_IMPORTED_MODULE_4__["default"], { graphic: data.feature, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, togglable: isVerticalAlign, expandByDefault: expandByDefault, dataSource: dataSource }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: "remove-button", icon: true, size: "sm", variant: "text", color: "inherit", onClick: handleRemove, "aria-label": "Remove record", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 4px;
          min-width: auto;
          width: 20px;
          height: 20px;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_3__.CloseOutlined, { size: 14 }) })] }));
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskResult: () => (/* binding */ QueryTaskResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _lazy_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lazy-list */ "./your-extensions/widgets/query-simple/src/runtime/lazy-list.tsx");
/* harmony import */ var _paging_list__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./paging-list */ "./your-extensions/widgets/query-simple/src/runtime/paging-list.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/directional/expand-all */ "./jimu-icons/outlined/directional/expand-all.tsx");
/* harmony import */ var jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/directional/collapse-all */ "./jimu-icons/outlined/directional/collapse-all.tsx");
/* harmony import */ var _data_actions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../data-actions */ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_3__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Detects if an identify popup is currently visible in the DOM.
 * Uses verified selectors based on Experience Builder's identify popup structure.
 *
 * @returns true if identify popup is detected and visible, false otherwise
 */
function isIdentifyPopupOpen() {
    // Primary selector: .esri-popup with role="dialog"
    const popup = document.querySelector('.esri-popup[role="dialog"]');
    if (!popup) {
        return false;
    }
    // Verify it's visible (not hidden)
    const ariaHidden = popup.getAttribute('aria-hidden');
    if (ariaHidden === 'true') {
        return false;
    }
    // Additional check: verify computed style shows it's visible
    const style = window.getComputedStyle(popup);
    if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
        return false;
    }
    // Verify it contains esri-features (identify popup structure)
    const hasFeatures = popup.querySelector('.esri-features');
    if (!hasFeatures) {
        return false;
    }
    return true;
}
const resultStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  display: flex;
  flex-direction: column;

  .query-result__header {
    color: var(--sys-color-surface-paper-text);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: 1.5;
    border-bottom: 1px solid var(--sys-color-divider-secondary);
    margin-bottom: 6px;
    padding-bottom: 8px;
  }

  .query-result-container {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    overflow: auto;
    min-height: 0;
  }

  .query-result-info {
    height: 18px;
  }
`;
function QueryTaskResult(props) {
    var _a, _b, _c, _d;
    const { queryItem, queryParams, resultCount, maxPerPage, records, defaultPageSize, widgetId, outputDS, runtimeZoomToSelected, onNavBack } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const intl = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
    const [queryData, setQueryData] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [selectedRecords, setSelectedRecords] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState([]);
    const [removedRecordIds, setRemovedRecordIds] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Set());
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_QUERY_ITEM, queryItem);
    const [expandAll, setExpandAll] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Track if we've already selected these records to prevent re-selection when switching tabs
    const hasSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track the last records we selected to detect when new records come in
    const lastSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the last selected FeatureDataRecords for restoration (if needed)
    const lastSelectedFeatureRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Error state for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const extraActions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,_data_actions__WEBPACK_IMPORTED_MODULE_13__.getExtraActions)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected);
    }, [widgetId, outputDS, intl, queryItem, runtimeZoomToSelected]);
    const enableDataAction = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_a = widgetJson.enableDataAction) !== null && _a !== void 0 ? _a : true;
    });
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    const directionTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection;
    });
    const pagingType = pagingTypeInConfig !== null && pagingTypeInConfig !== void 0 ? pagingTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.MultiPage;
    const direction = directionTypeInConfig !== null && directionTypeInConfig !== void 0 ? directionTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.ListDirection.Vertical;
    // Group records by origin data source for DataActionList
    // This ensures DataActionList recognizes records even when they come from different queries/origins
    const actionDataSets = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        // Debug: Log what records are available
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-calculation-start',
            widgetId: widgetId,
            selectedRecordsCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            queryDataRecordsCount: ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            hasSelectedRecords: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0,
            hasQueryDataRecords: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) > 0,
            hasRecordsProp: (records === null || records === void 0 ? void 0 : records.length) > 0
        });
        const recordsToUse = (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0
            ? selectedRecords
            : (((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.length) > 0 ? queryData.records : (records || []));
        // If no records, return single DataRecordSet with empty records using outputDS
        if (!recordsToUse || recordsToUse.length === 0) {
            const emptyDataSet = {
                dataSource: outputDS,
                type: 'loaded',
                records: [],
                name: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                label: outputDS === null || outputDS === void 0 ? void 0 : outputDS.getLabel()
            };
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-empty-records',
                widgetId: widgetId,
                dataSetDataSourceId: (_d = emptyDataSet.dataSource) === null || _d === void 0 ? void 0 : _d.id
            });
            return [emptyDataSet];
        }
        // Group records by their origin data source
        const recordsByOriginDS = new Map();
        recordsToUse.forEach(record => {
            var _a, _b, _c, _d;
            const recordDS = (_b = (_a = record).getDataSource) === null || _b === void 0 ? void 0 : _b.call(_a);
            let originDS = null;
            if (recordDS) {
                originDS = ((_c = recordDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
            }
            else if (outputDS) {
                // Fallback: use outputDS's origin if record doesn't have dataSource
                originDS = ((_d = outputDS.getOriginDataSources()) === null || _d === void 0 ? void 0 : _d[0]) || outputDS;
            }
            if (originDS) {
                if (!recordsByOriginDS.has(originDS)) {
                    recordsByOriginDS.set(originDS, []);
                }
                recordsByOriginDS.get(originDS).push(record);
            }
        });
        // Create a DataRecordSet for each origin data source
        const dataSets = Array.from(recordsByOriginDS.entries()).map(([originDS, originRecords]) => {
            const dataSet = {
                dataSource: originDS, // Use origin DS, not outputDS
                type: 'selected',
                records: originRecords,
                name: originDS.id,
                label: originDS.getLabel()
            };
            // Add fields if needed (use currentItem's field settings)
            if (currentItem.resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_4__.FieldsType.SelectAttributes && currentItem.resultDisplayFields != null) {
                dataSet.fields = (0,_query_utils__WEBPACK_IMPORTED_MODULE_8__.combineFields)(currentItem.resultDisplayFields, currentItem.resultTitleExpression);
            }
            else if (originDS && 'getPopupInfo' in originDS) {
                // use fields in popup template from origin DS
                const popupInfo = originDS.getPopupInfo();
                if (popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) {
                    dataSet.fields = popupInfo.fieldInfos.filter((fieldInfo) => fieldInfo.visible).map((fieldInfo) => fieldInfo.fieldName);
                }
            }
            return dataSet;
        });
        // Debug: Log what the final dataSets contain
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-final',
            widgetId: widgetId,
            dataSetsCount: dataSets.length,
            totalRecordsCount: recordsToUse.length,
            dataSetsByOrigin: dataSets.map(ds => {
                var _a, _b;
                return ({
                    originDSId: (_a = ds.dataSource) === null || _a === void 0 ? void 0 : _a.id,
                    recordsCount: ((_b = ds.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                    type: ds.type
                });
            })
        });
        // If we couldn't group by origin (shouldn't happen), fallback to single DataRecordSet with outputDS
        if (dataSets.length === 0 && outputDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-fallback-to-outputDS',
                widgetId: widgetId,
                reason: 'could-not-determine-origin-ds'
            });
            return [{
                    dataSource: outputDS,
                    type: recordsToUse.length > 0 ? 'selected' : 'loaded',
                    records: recordsToUse,
                    name: outputDS.id,
                    label: outputDS.getLabel()
                }];
        }
        return dataSets;
    }, [selectedRecords, outputDS, queryData, currentItem, records, widgetId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    /**
     * Effect hook that runs when new query results arrive.
     * Resets removed records, expand state, and query data for the new results.
     * Also handles auto-selection of records when they first arrive.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Debug: Log when records prop changes
        debugLogger.log('RESULTS-MODE', {
            event: 'records-prop-changed',
            widgetId: widgetId,
            recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            willSetQueryData: records && records.length > 0
        });
        // Reset removed records when new query results come in
        setRemovedRecordIds(new Set());
        // Reset expand all to queryItem's resultExpandByDefault setting
        setExpandAll((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
        setQueryData({
            records,
            pageSize: defaultPageSize,
            page: 1
        });
        // Check if these are new records (different from what we last selected)
        const currentRecordIds = (records === null || records === void 0 ? void 0 : records.map(record => record.getId())) || [];
        const recordsChanged = currentRecordIds.length !== lastSelectedRecordsRef.current.length ||
            currentRecordIds.some((id, index) => id !== lastSelectedRecordsRef.current[index]);
        // Only auto-select records if:
        // 1. We have records and outputDS
        // 2. We haven't already selected these records (hasSelectedRef is false)
        // 3. OR the records have actually changed (new query results)
        if (records && records.length > 0 && outputDS && (!hasSelectedRef.current || recordsChanged)) {
            const recordIds = records.map(record => record.getId());
            const fdr = records;
            // Select records and publish selection message using utility function
            try {
                setSelectionError(null); // Clear previous errors
                (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
                hasSelectedRef.current = true; // Mark as selected
                lastSelectedRecordsRef.current = recordIds; // Store the IDs we selected
                lastSelectedFeatureRecordsRef.current = fdr; // Store the full records for potential restoration
                // Notify HelperSimple of selection change
                const originDS = (_b = outputDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0];
                const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
                const selectionEvent = new CustomEvent('querysimple-selection-changed', {
                    detail: {
                        widgetId,
                        recordIds,
                        dataSourceId,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    },
                    bubbles: true,
                    cancelable: true
                });
                window.dispatchEvent(selectionEvent);
            }
            catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                setSelectionError(errorMessage);
                debugLogger.log('TASK', {
                    event: 'selection-failed-query-result',
                    error: errorMessage,
                    errorStack: error instanceof Error ? error.stack : undefined,
                    recordCount: recordIds.length
                });
            }
        }
        else if (recordsChanged && records && records.length === 0) {
            // If records were cleared, reset the selection flag
            hasSelectedRef.current = false;
            lastSelectedRecordsRef.current = [];
            setSelectionError(null); // Clear errors when clearing records
        }
    }, [records, defaultPageSize, outputDS, widgetId, queryItem.configId, queryItem.resultExpandByDefault]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear selection when resultSelectMode changed
        if (outputDS) {
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS);
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.publishSelectionMessage)(widgetId, [], outputDS, true);
        }
    }, [queryItem.resultSelectMode, outputDS, widgetId]);
    // Update expandAll when queryItem changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setExpandAll((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    }, [queryItem.configId, queryItem.resultExpandByDefault]);
    /**
     * Monitor origin data source selection changes to detect when other widgets (like map identify)
     * clear our selections. Enhanced with identify popup detection for testing scenarios.
     * Watches the origin data source's selection state directly via polling.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (!outputDS)
            return;
        const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (!originDS)
            return;
        const originDSId = originDS.id;
        let previousSelectedIds = [];
        let identifyPopupWasOpen = false;
        let lastLogTime = 0;
        const LOG_THROTTLE_MS = 1000; // Throttle logs to once per second
        // Initial check
        previousSelectedIds = originDS.getSelectedRecordIds() || [];
        identifyPopupWasOpen = isIdentifyPopupOpen();
        // Watch for selection changes on the origin data source
        const checkSelection = () => {
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            const ourExpectedIds = lastSelectedRecordsRef.current;
            const hasOurSelection = ourExpectedIds.length > 0;
            const identifyPopupIsOpen = isIdentifyPopupOpen();
            // Detect if selection was cleared or changed externally
            const wasCleared = previousSelectedIds.length > 0 && currentSelectedIds.length === 0;
            const wasChanged = previousSelectedIds.length > 0 &&
                (currentSelectedIds.length !== previousSelectedIds.length ||
                    !currentSelectedIds.every(id => previousSelectedIds.includes(id)));
            // NEW: Detect if selection was added (went from empty to having records)
            const wasAdded = previousSelectedIds.length === 0 && currentSelectedIds.length > 0;
            // Track identify popup state changes
            const identifyPopupJustOpened = !identifyPopupWasOpen && identifyPopupIsOpen;
            const identifyPopupJustClosed = identifyPopupWasOpen && !identifyPopupIsOpen;
            const identifyPopupStillOpen = identifyPopupWasOpen && identifyPopupIsOpen;
            // Log identify popup state changes
            const now = Date.now();
            if (identifyPopupJustOpened || identifyPopupJustClosed) {
                debugLogger.log('SELECTION', {
                    event: identifyPopupJustOpened ? 'identify-popup-opened' : 'identify-popup-closed',
                    originDSId,
                    ourSelectionCount: ourExpectedIds.length,
                    currentSelectionCount: currentSelectedIds.length,
                    timestamp: new Date().toISOString()
                });
                // If identify popup just closed and selection was cleared, dispatch restore event
                if (identifyPopupJustClosed && wasCleared && hasOurSelection && ourExpectedIds.length > 0) {
                    const restoreEvent = new CustomEvent(RESTORE_ON_IDENTIFY_CLOSE_EVENT, {
                        detail: {
                            widgetId,
                            recordIds: ourExpectedIds,
                            outputDsId: outputDS.id,
                            queryItemConfigId: queryItem.configId
                        },
                        bubbles: true,
                        cancelable: true
                    });
                    window.dispatchEvent(restoreEvent);
                    debugLogger.log('SELECTION', {
                        event: 'identify-popup-closed-restore-requested',
                        widgetId,
                        recordCount: ourExpectedIds.length,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    });
                }
            }
            // Log ALL selection changes (not just when we have our own selection)
            if (wasCleared || wasChanged || wasAdded) {
                // Check if this matches our expected selection
                const matchesOurSelection = hasOurSelection &&
                    ourExpectedIds.length === currentSelectedIds.length &&
                    ourExpectedIds.every(id => currentSelectedIds.includes(id));
                // Determine what would happen (for testing/logging)
                const wouldRestore = wasCleared && identifyPopupIsOpen && hasOurSelection && ourExpectedIds.length > 0;
                // Determine scenario
                let scenario = 'Unknown';
                if (wasAdded && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 4: Another widget selected records (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 5: Another widget changed selection (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 2: Query  Identify (selection changed, not cleared)  Would NOT restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget  Would NOT restore';
                }
                else if (wasCleared && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 1: Query  Identify  Would restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget (cleared)  Would NOT restore';
                }
                else if (wasAdded && hasOurSelection) {
                    scenario = matchesOurSelection
                        ? 'Our widget selected records'
                        : 'Another widget selected different records';
                }
                // Log detection with identify popup state (throttled)
                if (now - lastLogTime > LOG_THROTTLE_MS) {
                    debugLogger.log('SELECTION', {
                        event: wasCleared ? 'selection-cleared' : wasChanged ? 'selection-changed' : 'selection-added',
                        originDSId,
                        ourExpectedCount: ourExpectedIds.length,
                        previousSelectedCount: previousSelectedIds.length,
                        currentSelectedCount: currentSelectedIds.length,
                        wasCleared,
                        wasChanged,
                        wasAdded,
                        hasOurSelection,
                        matchesOurSelection,
                        identifyPopupIsOpen,
                        identifyPopupJustOpened,
                        identifyPopupStillOpen,
                        identifyPopupJustClosed,
                        wouldRestore,
                        ourExpectedIds: ourExpectedIds.slice(0, 5),
                        previousSelectedIds: previousSelectedIds.slice(0, 5),
                        currentSelectedIds: currentSelectedIds.slice(0, 5),
                        timestamp: new Date().toISOString(),
                        note: wouldRestore
                            ? 'Would restore selection (cleared + identify popup open)'
                            : identifyPopupIsOpen && wasChanged
                                ? 'Identify popup open but selection changed (not cleared) - would not restore'
                                : wasCleared && !identifyPopupIsOpen
                                    ? 'Selection cleared, checking if identify popup opens...'
                                    : wasAdded
                                        ? hasOurSelection && matchesOurSelection
                                            ? 'Our widget selected records'
                                            : hasOurSelection && !matchesOurSelection
                                                ? 'Another widget selected different records'
                                                : 'Selection added (by another widget or external source)'
                                        : 'No identify popup detected - would not restore'
                    });
                    lastLogTime = now;
                }
            }
            previousSelectedIds = [...currentSelectedIds];
            identifyPopupWasOpen = identifyPopupIsOpen;
        };
        // Check periodically (every 500ms)
        const intervalId = setInterval(checkSelection, 500);
        return () => {
            clearInterval(intervalId);
        };
    }, [outputDS]);
    /**
     * Clears all results. Resets local state and delegates to parent's clearResult method.
     */
    const clearResults = () => {
        // Reset local selection flags
        hasSelectedRef.current = false;
        lastSelectedRecordsRef.current = [];
        // Reset local query data state
        setQueryData(null);
        setRemovedRecordIds(new Set());
        // Clear error state when clearing results
        setSelectionError(null);
        // Delegate to parent's clearResult method (via onNavBack) which handles
        // clearing selection from map, publishing messages, etc.
        onNavBack(true);
    };
    const handleRenderDone = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(({ dataItems, pageSize, page }) => {
        // Filter out removed records - check if dataItems exists first
        const filteredItems = (dataItems === null || dataItems === void 0 ? void 0 : dataItems.filter(item => !removedRecordIds.has(item.getId()))) || [];
        setQueryData({
            records: filteredItems,
            pageSize,
            page
        });
        // Ensure all loaded records remain selected (for lazy loading)
        // This keeps records selected as they're loaded incrementally
        if (filteredItems && filteredItems.length > 0 && outputDS) {
            const recordIds = filteredItems.map(record => record.getId());
            const fdr = filteredItems;
            // Select all records and publish selection message using utility function
            try {
                setSelectionError(null); // Clear previous errors
                (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
            }
            catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                setSelectionError(errorMessage);
                debugLogger.log('TASK', {
                    event: 'selection-failed-handleRenderDone',
                    error: errorMessage,
                    errorStack: error instanceof Error ? error.stack : undefined,
                    recordCount: recordIds.length
                });
            }
        }
    }, [outputDS, widgetId, removedRecordIds]);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(outputDS === null || outputDS === void 0 ? void 0 : outputDS.id);
        const dsRecords = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        const selectedIds = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
        // Capture records prop before using it (to avoid shadowing)
        const recordsProp = records;
        // Debug: Log what handleDataSourceInfoChange sees
        debugLogger.log('RESULTS-MODE', {
            event: 'handleDataSourceInfoChange-fired',
            widgetId: widgetId,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            dsId: ds === null || ds === void 0 ? void 0 : ds.id,
            selectedRecordsFromDS: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
            selectedIdsFromDS: selectedIds.length,
            currentSelectedRecordsState: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            recordsPropCount: (recordsProp === null || recordsProp === void 0 ? void 0 : recordsProp.length) || 0
        });
        // If we have records in the prop (accumulated records) but DS shows 0 selected,
        // and we currently have selectedRecords, this is likely a query switch in "Add to" mode
        // where re-selection hasn't happened yet. Don't clear selectedRecords - wait for re-selection.
        if (recordsProp && recordsProp.length > 0 && selectedIds.length === 0 && selectedRecords && selectedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-clear-during-query-switch',
                widgetId: widgetId,
                reason: 'waiting-for-reselection',
                recordsPropCount: recordsProp.length,
                currentSelectedRecordsCount: selectedRecords.length
            });
            return; // Skip updating - re-selection is coming
        }
        let shouldUpdate = false;
        if (selectedIds.length !== (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length)) {
            shouldUpdate = true;
        }
        else { // equal length
            shouldUpdate = selectedIds.some(id => {
                const target = selectedRecords.find((item) => item.getId() === id);
                return target == null;
            });
        }
        if (shouldUpdate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0
            });
            setSelectedRecords(dsRecords);
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-update',
                widgetId: widgetId,
                reason: 'no-change-detected'
            });
        }
    }, [outputDS === null || outputDS === void 0 ? void 0 : outputDS.id, selectedRecords, widgetId, records]);
    /**
     * Generates the tip message showing how many features are displayed.
     * Filters out removed records to show accurate counts.
     *
     * @returns Formatted string like "Features displayed: 118 / 121"
     */
    const getTipMessage = () => {
        if (queryData && queryData.records) {
            // Filter out removed records for display count
            const displayedRecords = queryData.records.filter((record) => !removedRecordIds.has(record.getId()));
            const displayedCount = displayedRecords.length;
            if (pagingType === _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.LazyLoad) {
                return `${getI18nMessage('featuresDisplayed')}: ${displayedCount} / ${resultCount}`;
            }
            const { page = 1, pageSize = defaultPageSize } = queryData;
            const from = (page - 1) * pageSize + 1;
            const to = from + pageSize - 1;
            if (resultCount > 0) {
                return `${getI18nMessage('featuresDisplayed')}: ${from} - ${Math.min(to, displayedCount)} / ${resultCount}`;
            }
            return `${getI18nMessage('featuresDisplayed')}: 0 - 0 / 0`;
        }
        return '';
    };
    /**
     * Toggles expand/collapse state for all result items.
     * When toggled, all result items will be expanded or collapsed together.
     */
    const toggleExpandAll = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setExpandAll(prev => !prev);
    }, []);
    const resultUseOutputDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
            dataSourceId: queryItem.outputDataSourceId,
            mainDataSourceId: queryItem.outputDataSourceId
        });
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.outputDataSourceId]);
    const handleEscape = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    }, []);
    // Keep records selected and zoom to clicked record
    // Records remain selected as long as they're in the results
    // Clicking a record always zooms to it on the map (this behavior is always enabled)
    const toggleSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        // Ensure the clicked record is selected (it should already be, but ensure it)
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        const dataId = data.getId();
        // If this record isn't already selected, add it to the selection
        if (!selectedIds.includes(dataId)) {
            const updatedSelectedDatas = [...selectedDatas, data];
            const recordIds = updatedSelectedDatas.map(record => record.getId());
            // Select records and publish selection message using utility function
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
        }
        // Zoom to the clicked record using data actions (always enabled - user wants to keep this behavior)
        const dataSet = {
            dataSource: outputDS,
            records: [data],
            type: 'selected',
            name: outputDS.getLabel()
        };
        // Get available data actions and find the zoomToFeature action
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
            .then(actionCategories => {
            // Look for zoomToFeature action in any category
            let zoomAction = null;
            for (const category in actionCategories) {
                const actions = actionCategories[category];
                zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                if (zoomAction)
                    break;
            }
            if (zoomAction) {
                // Execute the zoom action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, widgetId);
            }
        })
            .catch(error => {
            // Silently handle errors
        });
    }, [outputDS, widgetId]);
    /**
     * Removes a record from the results and selection.
     * If removing the last record, automatically clears all results
     * by calling the trash can logic (same as clicking Clear button).
     * This ensures the UI doesn't show "Features displayed: 0 / 1" when all results are removed.
     *
     * @param data - The feature data record to remove
     */
    const removeRecord = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        const dataId = data.getId();
        // Add to removed records set
        setRemovedRecordIds(prev => {
            const newSet = new Set(prev).add(dataId);
            // If all records are now removed, clear everything by calling trash can logic
            // Check: if the new set size equals the total result count, all records are removed
            if (newSet.size === resultCount) {
                // All records removed - clear everything (same as clicking trash can button)
                onNavBack(true);
                return newSet;
            }
            return newSet;
        });
        // Update queryData to filter out the removed record
        setQueryData(prevData => {
            if (!prevData)
                return prevData;
            const filteredRecords = prevData.records.filter((record) => record.getId() !== dataId);
            return Object.assign(Object.assign({}, prevData), { records: filteredRecords });
        });
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        // Remove the record from selection
        const updatedSelectedDatas = selectedDatas.filter(record => record.getId() !== dataId);
        const recordIds = updatedSelectedDatas.map(record => record.getId());
        // Update selection on the origin layer and publish message using utility function
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
    }, [outputDS, widgetId, resultCount, onNavBack]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result h-100', css: resultStyle, role: 'listbox', "aria-label": getI18nMessage('results'), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: resultUseOutputDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding: 0 16px; margin-top: 8px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result__header d-flex align-items-center mx-4', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { "aria-label": getI18nMessage('back'), ref: backBtnRef, className: 'p-0 mr-2', size: 'sm', variant: 'text', color: 'inherit', icon: true, onClick: () => { onNavBack(); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__.ArrowLeftOutlined, { autoFlip: true }) }), (_b = currentItem.resultsLabel) !== null && _b !== void 0 ? _b : getI18nMessage('results'), ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, size: 'sm', variant: 'text', color: 'inherit', onClick: clearResults, "aria-label": getI18nMessage('clearResult'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: iconMap.toolDelete }) }) }), enableDataAction && outputDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `width: 1px; height: 16px; background-color: var(--sys-color-divider-input);` }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionList, { widgetId: widgetId, dataSets: actionDataSets, listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionListStyle.Dropdown, buttonSize: 'sm', buttonType: 'tertiary', extraActions: extraActions })] }))] }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-container mt-1', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-info mb-2 px-4 d-flex align-items-center justify-content-between', role: 'alert', "aria-live": 'polite', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: getTipMessage() }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), placement: 'top', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, onClick: toggleExpandAll, "aria-label": expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), children: expandAll ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__.CollapseAllOutlined, {}) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__.ExpandAllOutlined, {}) }) })] }), pagingType === _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.LazyLoad && resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_lazy_list__WEBPACK_IMPORTED_MODULE_6__.LazyList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, queryParams: queryParams, resultCount: resultCount, records: ((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.filter((record) => !removedRecordIds.has(record.getId()))) || ((records === null || records === void 0 ? void 0 : records.filter(record => !removedRecordIds.has(record.getId()))) || []), direction: direction, onRenderDone: handleRenderDone, onEscape: handleEscape, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll }, `lazy-${expandAll}`)), pagingType === _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.MultiPage && resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_paging_list__WEBPACK_IMPORTED_MODULE_7__.PagingList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, queryParams: queryParams, resultCount: resultCount, maxPerPage: maxPerPage, records: ((_d = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _d === void 0 ? void 0 : _d.filter((record) => !removedRecordIds.has(record.getId()))) || ((records === null || records === void 0 ? void 0 : records.filter(record => !removedRecordIds.has(record.getId()))) || []), direction: direction, onRenderDone: handleRenderDone, onEscape: handleEscape, defaultPageSize: defaultPageSize, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll }, `paging-${expandAll}`))] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskContext: () => (/* binding */ QueryTaskContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    resetSymbol: null
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskForm: () => (/* binding */ QueryTaskForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_spatial_form__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-spatial-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");

/** @jsx jsx */










const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_10__.createQuerySimpleDebugLogger)();



const getFormStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    .form-title {
      color: var(--sys-color-surface-paper-text);
      font-weight: 500;
      font-size: 0.8125rem;
      line-height: 1.5;
      margin-top: 0 !important;
    }
    .query-form__content {
      flex: 1 1 ${isAutoHeight ? 'auto' : 'auto'};
      max-height: ${isAutoHeight ? '61.8vh' : 'none'};
      overflow: auto;
      padding-bottom: 0;
    }
    .query-form__actions {
      flex-shrink: 0;
      margin-top: 0;
      padding-top: 4px;
    }
  `;
};
function QueryTaskForm(props) {
    var _a;
    const { widgetId, configId, outputDS, spatialFilterEnabled, datasourceReady, onFormSubmit, dataActionFilter, initialInputValue, onHashParameterUsed, queryItemShortId } = props;
    const preDataActionFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.usePrevious(dataActionFilter);
    const queryItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.queryItems.find(item => item.configId === configId);
    });
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_7__["default"]);
    const [resetSymbol, setResetSymbol] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Runtime zoom preference - initialized with config value, can be overridden by user
    const [runtimeZoomToSelected, setRuntimeZoomToSelected] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    // Sync runtime zoom preference when query item changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setRuntimeZoomToSelected((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected, queryItem === null || queryItem === void 0 ? void 0 : queryItem.configId]);
    // const [dataSource, setDataSource] = React.useState<DataSource>(null)
    const { useAttributeFilter, useSpatialFilter, spatialFilterTypes, sqlExprObj, spatialMapWidgetIds, spatialInteractiveCreateToolTypes, spatialRelationUseDataSources, spatialIncludeRuntimeData, spatialRelations, spatialRelationEnableBuffer, spatialRelationBufferDistance, spatialRelationBufferUnit, spatialInteractiveEnableBuffer, spatialInteractiveBufferDistance, spatialInteractiveBufferUnit, attributeFilterLabel = getI18nMessage('attributeFilter'), spatialFilterLabel = getI18nMessage('spatialFilter'), attributeFilterDesc, spatialFilterDesc } = currentItem;
    const [attributeFilterSqlExprObj, setAttributeFilterSqlExprObj] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(sqlExprObj);
    const spatialFilterObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const spatialRelationRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(_config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect);
    const bufferRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const applyButtonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_9__.useAutoHeight)();
    const showClauseNumber = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef((0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj));
    const initialValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track which configId we've set the value for
    const lastValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track the last value that was set
    const hashTriggeredRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false); // Track if query was triggered via hash parameter
    const originDS = outputDS === null || outputDS === void 0 ? void 0 : outputDS.getOriginDataSources()[0];
    /**
     * Sets the input value from URL hash parameters when:
     * 1. Datasource is ready
     * 2. We have an initialInputValue from URL hash
     * 3. We haven't already set it for this configId, OR the value has changed
     *
     * Uses both React state updates and DOM manipulation to ensure the value
     * is properly set in SqlExpressionRuntime's internal state.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Reset flag if configId changed (switched to different query)
        if (initialValueSetRef.current !== null && initialValueSetRef.current !== configId) {
            initialValueSetRef.current = null;
            lastValueSetRef.current = null;
            hashTriggeredRef.current = false; // Reset hash trigger flag when switching queries
        }
        // Check if value has changed for the same configId
        const valueChanged = lastValueSetRef.current !== null &&
            lastValueSetRef.current !== initialInputValue &&
            initialValueSetRef.current === configId;
        // Set the value if:
        // - We haven't set it for this configId yet, OR
        // - The value has changed for the same configId (hash parameter updated)
        const shouldSetValue = datasourceReady &&
            initialInputValue &&
            ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) > 0 &&
            (initialValueSetRef.current !== configId || valueChanged);
        if (shouldSetValue) {
            const firstPart = sqlExprObj.parts[0];
            // Check if the first part is a SINGLE clause (not a SqlClauseSet)
            if (firstPart && 'type' in firstPart && firstPart.type === 'SINGLE' && 'valueOptions' in firstPart) {
                // Update the expression object with the initial value
                const updated = sqlExprObj.setIn(['parts', '0', 'valueOptions', 'value'], initialInputValue);
                setAttributeFilterSqlExprObj(updated);
                // Update clause number for the updated expression
                showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(updated);
                initialValueSetRef.current = configId;
                lastValueSetRef.current = initialInputValue;
                // Also set the value directly on the input element after a delay to ensure component is rendered
                // This is necessary because SqlExpressionRuntime may not sync from the expression prop alone
                const timeoutId = setTimeout(() => {
                    var _a;
                    // Find the input element within SqlExpressionRuntime
                    const formElement = ((_a = document.querySelector(`[data-widget-id="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.closest('.query-form')) ||
                        document.querySelector('.query-form');
                    if (formElement) {
                        // Look for text input elements
                        const textInputs = formElement.querySelectorAll('input[type="text"]');
                        textInputs.forEach((input) => {
                            var _a;
                            // Update the value if input is empty OR if the value has changed (hash parameter updated)
                            const shouldUpdate = !input.value ||
                                input.value.trim() === '' ||
                                input.value !== initialInputValue;
                            if (shouldUpdate) {
                                // Focus the input first
                                input.focus();
                                // Set the value
                                input.value = initialInputValue;
                                // Create and dispatch input event with proper properties
                                const inputEvent = new Event('input', { bubbles: true, cancelable: true });
                                Object.defineProperty(inputEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(inputEvent);
                                // Create and dispatch change event
                                const changeEvent = new Event('change', { bubbles: true, cancelable: true });
                                Object.defineProperty(changeEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(changeEvent);
                                // Also try React's synthetic event approach using native value setter
                                const nativeInputValueSetter = (_a = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value')) === null || _a === void 0 ? void 0 : _a.set;
                                if (nativeInputValueSetter) {
                                    nativeInputValueSetter.call(input, initialInputValue);
                                    const reactEvent = new Event('input', { bubbles: true });
                                    input.dispatchEvent(reactEvent);
                                }
                                // Blur to trigger any validation or state updates
                                input.blur();
                            }
                        });
                        // After setting values and blurring, verify input value is set before triggering Apply button
                        setTimeout(() => {
                            var _a;
                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                // VERIFICATION: Ensure input value is actually set before executing query
                                // This is especially important for grouped queries where dropdowns need to be synchronized first
                                const formElement = ((_a = document.querySelector(`[data-widget-id="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.closest('.query-form')) ||
                                    document.querySelector('.query-form');
                                if (formElement && initialInputValue) {
                                    const textInputs = formElement.querySelectorAll('input[type="text"]');
                                    let inputValueSet = false;
                                    textInputs.forEach((input) => {
                                        if (input.value === initialInputValue) {
                                            inputValueSet = true;
                                        }
                                    });
                                    if (!inputValueSet) {
                                        debugLogger.log('FORM', {
                                            event: 'input-value-not-set-retrying',
                                            expectedValue: initialInputValue,
                                            queryItemShortId,
                                            action: 'will-retry-after-delay',
                                            note: 'Input value not set, retrying to ensure synchronization'
                                        });
                                        // Retry after a short delay to allow state to sync
                                        setTimeout(() => {
                                            // Recursively call verifyAndApply if needed, but limit retries
                                            // For now, just retry once more
                                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                                hashTriggeredRef.current = true;
                                                // Remove hash parameter from URL before Apply is triggered
                                                if (onHashParameterUsed && queryItemShortId) {
                                                    onHashParameterUsed(queryItemShortId);
                                                }
                                                // Auto-trigger Apply button
                                                applyButtonRef.current.click();
                                            }
                                        }, 300);
                                        return; // Exit early, will retry
                                    }
                                }
                                // Input value is set correctly, proceed with execution
                                debugLogger.log('FORM', {
                                    event: 'input-value-verified',
                                    expectedValue: initialInputValue,
                                    queryItemShortId,
                                    note: 'Input value verified, proceeding with query execution'
                                });
                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                hashTriggeredRef.current = true;
                                // Remove hash parameter from URL before Apply is triggered to prevent re-execution
                                if (onHashParameterUsed && queryItemShortId) {
                                    onHashParameterUsed(queryItemShortId);
                                }
                                // Auto-trigger Apply button to execute the query with the populated value
                                applyButtonRef.current.click();
                            }
                        }, 200); // Small delay after blur to ensure state is synced
                    }
                }, 500); // Longer delay to ensure component is fully rendered
                return () => clearTimeout(timeoutId);
            }
        }
        // The sqlExprObj.parts may change but the displaySQL is the same
        if (!sqlExprObj) {
            showClauseNumber.current = 0;
            setAttributeFilterSqlExprObj(null);
        }
        else {
            showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
            // Only update if we haven't set the initial value for this configId yet, or if we don't have an initial value
            if (initialValueSetRef.current !== configId || !initialInputValue) {
                setAttributeFilterSqlExprObj(sqlExprObj);
            }
        }
    }, [sqlExprObj, initialInputValue, datasourceReady, configId, widgetId, onHashParameterUsed, queryItemShortId]);
    const applyQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        // When the 'apply' button is clicked, it should clear the selection from the previous result list
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.clearSelectionInDataSources)(outputDS);
        if (outputDS) {
            const originDs = outputDS.getOriginDataSources()[0];
            if (originDs) {
                const dataViewConfig = originDs.getDataViewConfig();
                const maximum = dataViewConfig === null || dataViewConfig === void 0 ? void 0 : dataViewConfig.maximum;
                if (maximum != null && maximum > 0) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(outputDS, outputDS.getDataSourceJson().setIn(['query', 'maximum'], maximum));
                }
            }
        }
        // Force zoom for hash-triggered queries, otherwise use runtime preference
        const zoomToUse = hashTriggeredRef.current ? true : runtimeZoomToSelected;
        let rel = spatialRelationRef.current;
        if (((_a = spatialFilterObjRef.current) === null || _a === void 0 ? void 0 : _a.geometry) && rel == null) {
            rel = _config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect;
        }
        if (Array.isArray((_b = spatialFilterObjRef.current) === null || _b === void 0 ? void 0 : _b.geometry)) {
            if (spatialFilterObjRef.current.geometry.length === 1) {
                onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry: spatialFilterObjRef.current.geometry[0], relation: rel, buffer: bufferRef.current }), zoomToUse);
            }
            else {
                (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)([
                    'esri/geometry/operators/unionOperator'
                ]).then(modules => {
                    const operator = modules[0];
                    const geometry = operator.executeMany(spatialFilterObjRef.current.geometry);
                    onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry, relation: rel, buffer: bufferRef.current }), zoomToUse);
                });
            }
        }
        else {
            onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { relation: rel, buffer: bufferRef.current }), zoomToUse);
        }
        // Reset hashTriggeredRef after use
        hashTriggeredRef.current = false;
    }, [onFormSubmit, outputDS, attributeFilterSqlExprObj, runtimeZoomToSelected]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((event) => {
        if (event.key === 'Enter' && datasourceReady) {
            event.preventDefault();
            // Find the active input field
            const activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT' && activeElement.type === 'text') {
                // Force blur to trigger SqlExpressionRuntime's input processing
                activeElement.blur();
                // Wait for blur processing, then click the Apply button
                // This uses the exact same code path as clicking the button manually
                setTimeout(() => {
                    if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                        applyButtonRef.current.click();
                    }
                    else {
                        applyQuery();
                    }
                }, 200);
            }
            else {
                // Not in an input field, safe to apply immediately
                if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                    applyButtonRef.current.click();
                }
                else {
                    applyQuery();
                }
            }
        }
    }, [datasourceReady, applyQuery]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!dataActionFilter)
            return;
        if (dataActionFilter.where !== (preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where)) {
            applyQuery();
        }
    }, [dataActionFilter, preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where, applyQuery]);
    const resetQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        // 1. reset attribute filter
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
        setAttributeFilterSqlExprObj(sqlExprObj);
        // 2. reset spatial filter
        setResetSymbol(Symbol());
    }, [sqlExprObj]);
    const handleSqlExprObjChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlObj) => {
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlObj);
        setAttributeFilterSqlExprObj(sqlObj);
    }, []);
    const handleSpatialFilterChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((filter) => {
        spatialFilterObjRef.current = filter;
    }, []);
    const handleRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((rel) => {
        spatialRelationRef.current = rel;
    }, []);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferRef.current = { distance, unit };
    }, []);
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // Debug logging for form rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        debugLogger.log('FORM', {
            event: 'form-render-check',
            configId,
            datasourceReady,
            useAttributeFilter,
            sqlExprObj: sqlExprObj ? 'exists' : 'null',
            sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            showAttributeFilter,
            originDS: originDS ? 'exists' : 'null',
            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'none',
            showSpatialFilter,
            isAutoHeight,
            outputDS: outputDS ? 'exists' : 'null'
        });
    }, [configId, datasourceReady, useAttributeFilter, sqlExprObj, showAttributeFilter, originDS, showSpatialFilter, isAutoHeight, outputDS]);
    // Log when form content should render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (showAttributeFilter && originDS) {
            debugLogger.log('FORM', {
                event: 'attribute-filter-ready',
                configId,
                originDSId: originDS.id,
                sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
                attributeFilterLabel,
                note: 'Input field should be visible'
            });
        }
        else {
            debugLogger.log('FORM', {
                event: 'attribute-filter-not-ready',
                configId,
                showAttributeFilter,
                originDS: originDS ? 'exists' : 'null',
                useAttributeFilter,
                sqlExprObj: sqlExprObj ? 'exists' : 'null',
                reason: !showAttributeFilter ? 'showAttributeFilter is false' : 'originDS is null'
            });
        }
    }, [showAttributeFilter, originDS, configId, sqlExprObj, useAttributeFilter, attributeFilterLabel]);
    // Check DOM visibility after render
    const formContentRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (formContentRef.current) {
            const computedStyle = window.getComputedStyle(formContentRef.current);
            const rect = formContentRef.current.getBoundingClientRect();
            debugLogger.log('FORM', {
                event: 'form-content-dom-check',
                configId,
                exists: !!formContentRef.current,
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                height: computedStyle.height,
                maxHeight: computedStyle.maxHeight,
                flex: computedStyle.flex,
                flexBasis: computedStyle.flexBasis,
                rectHeight: rect.height,
                rectWidth: rect.width,
                isVisible: rect.height > 0 && rect.width > 0,
                parentHeight: ((_a = formContentRef.current.parentElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0
            });
        }
    }, [configId, showAttributeFilter, originDS]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_context__WEBPACK_IMPORTED_MODULE_11__.QueryTaskContext.Provider, { value: { resetSymbol }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form', css: getFormStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: formContentRef, className: 'query-form__content', onKeyDown: handleKeyDown, children: [showAttributeFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding-top: 4px;`, "aria-label": attributeFilterLabel, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !attributeFilterLabel && !attributeFilterDesc }), children: [attributeFilterLabel && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: attributeFilterLabel }), attributeFilterDesc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: attributeFilterDesc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_12__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), originDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: originDS, expression: attributeFilterSqlExprObj, onChange: handleSqlExprObjChange }, `${configId}-${initialInputValue || 'default'}`))] })), showAttributeFilter && showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr", { className: 'm-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `border: none; height: 1px; background-color: var(--sys-color-divider-secondary);` })), showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_spatial_form__WEBPACK_IMPORTED_MODULE_8__.QueryTaskSpatialForm, { widgetId: widgetId, label: spatialFilterLabel, desc: spatialFilterDesc, filterTypes: spatialFilterTypes, mapWidgetIds: spatialMapWidgetIds, createToolTypes: spatialInteractiveCreateToolTypes, onFilterChange: handleSpatialFilterChange, onRelationChange: handleRelationChange, onBufferChange: handleBufferChange, spatialRelations: spatialRelations, dsEnableBuffer: spatialRelationEnableBuffer, dsBufferDistance: spatialRelationBufferDistance, dsBufferUnit: spatialRelationBufferUnit, drawEnableBuffer: spatialInteractiveEnableBuffer, drawBufferDistance: spatialInteractiveBufferDistance, drawBufferUnit: spatialInteractiveBufferUnit, useDataSources: spatialRelationUseDataSources, useRuntimeData: spatialIncludeRuntimeData }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form__actions px-4 d-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: runtimeZoomToSelected, onChange: (_, checked) => setRuntimeZoomToSelected(checked), className: 'mr-2' }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-auto', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `font-size: 0.875rem; color: var(--sys-color-text-primary);`, children: getI18nMessage('zoomToSelected') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: applyButtonRef, color: 'primary', className: 'ml-auto', disabled: !datasourceReady, onClick: applyQuery, children: getI18nMessage('apply') }), (showClauseNumber.current > 0 || showSpatialFilter) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-2', onClick: resetQuery, children: getI18nMessage('reset') }))] })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskLabel: () => (/* binding */ QueryTaskLabel)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

/** @jsx jsx */


const textStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  font-weight: 500;
  font-size: 0.875rem;
`;
function QueryTaskLabel(props) {
    const { icon, name } = props;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center text-truncate', css: textStyle, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { className: 'query-task-icon mr-2', icon: icon.svg }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', title: name, children: name })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListInline: () => (/* binding */ TaskListInline)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");

/** @jsx jsx */






const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
const SPACE = 8;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  > div {
    margin-right: 8px;
  }
`;
// show task label and an arrow to the task content
function TaskListInline(props) {
    const { queryItems, widgetId, minSize, defaultSize, defaultPageSize, widgetLabel, wrap = false } = props;
    const containerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const containerWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const contentWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef({});
    const [numOfExpanded, setNumOfExpanded] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(queryItems.length);
    const [openedPopper, setOpenedPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(-1);
    const resizeObserverRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const adjustContent = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        let total = 0;
        for (let i = 0; i < numOfExpanded; i++) {
            const item = queryItems[i];
            const itemWidth = contentWidthRef.current[item.configId];
            if (itemWidth > 0) {
                total += itemWidth + SPACE;
                if (total >= containerWidthRef.current && numOfExpanded !== i) {
                    setNumOfExpanded(i);
                    return;
                }
            }
            else {
                return; // content width not ready
            }
        }
        setNumOfExpanded(queryItems.length);
    }, [numOfExpanded, queryItems]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (resizeObserverRef.current) {
            resizeObserverRef.current.disconnect();
        }
        // bind with the new event handler
        resizeObserverRef.current = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
            const width = Math.round(entries[0].contentRect.width);
            if (containerWidthRef.current !== width) {
                containerWidthRef.current = width;
                adjustContent();
            }
        }, 200));
        resizeObserverRef.current.observe(containerRef.current);
        return () => {
            resizeObserverRef.current.disconnect();
        };
    }, [adjustContent]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        var _a;
        containerWidthRef.current = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth;
        adjustContent();
    });
    const handleItemWidthChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, width) => {
        const queryItem = queryItems[index];
        if (contentWidthRef.current[queryItem.configId] !== width) {
            contentWidthRef.current[queryItem.configId] = width;
            adjustContent();
        }
    }, [queryItems, adjustContent]);
    const handlePopperOpenedChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, isOpen) => {
        if (isOpen) {
            setOpenedPopper(index);
        }
        else if (index === openedPopper) {
            // current popper is closed
            setOpenedPopper(-1);
        }
    }, [openedPopper]);
    const [expandedArray, nonExpandedArray] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const expandedArray = [];
        const nonExpandedArray = [];
        for (let i = 0; i < queryItems.length; i++) {
            if (i < numOfExpanded) {
                expandedArray.push(queryItems[i]);
            }
            else {
                nonExpandedArray.push(queryItems[i]);
            }
        }
        return [expandedArray, nonExpandedArray];
    }, [queryItems, numOfExpanded]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: containerRef, css: style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('runtime-query__query-list h-100 d-flex', { 'flex-wrap': wrap, 'align-content-start': wrap }), children: [expandedArray.map((queryItem, index) => {
                var _a;
                const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
                return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: index, icon: currentItem.icon, buttonType: 'default', label: currentItem.displayLabel ? currentItem.name : undefined, popperTitle: currentItem.name, onWidthChange: handleItemWidthChange, minSize: minSize, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== index, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: index, total: 1, isInPopper: true, queryItem: currentItem, wrappedInPopper: true, className: 'pb-4', defaultPageSize: defaultPageSize, initialInputValue: currentItem.shortId === ((_a = props.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) ? props.initialQueryValue.value : undefined, onHashParameterUsed: props.onHashParameterUsed, queryItemShortId: currentItem.shortId }) }, currentItem.configId);
            }), nonExpandedArray.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: expandedArray.length + 1, icon: iconMap.iconMore, minSize: minSize, buttonType: 'default', popperTitle: widgetLabel, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== expandedArray.length + 1, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_3__.QueryTaskList, { widgetId: widgetId, isInPopper: true, defaultPageSize: defaultPageSize, queryItems: nonExpandedArray, className: 'pb-4', initialQueryValue: props.initialQueryValue, onHashParameterUsed: props.onHashParameterUsed }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListPopperWrapper: () => (/* binding */ TaskListPopperWrapper)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */



const shiftOptions = { padding: 1 };
function TaskListPopperWrapper(props) {
    const { id, icon, label, forceClose, onOpenedChange, popperTitle, minSize, defaultSize, onWidthChange, buttonType = 'tertiary', children } = props;
    const iconRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const widthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const [isOpen, setIsOpen] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const [popperVersion, setPopperVersion] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const isMobile = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useCheckSmallBrowserSizeMode();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (forceClose) {
            setIsOpen(false);
        }
    }, [forceClose]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (typeof onWidthChange === 'function') {
            widthRef.current = Math.round(iconRef.current.clientWidth);
            onWidthChange(id, widthRef.current);
            const resizeObserver = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
                const width = Math.round(entries[0].contentRect.width);
                if (widthRef.current !== width) {
                    widthRef.current = width;
                    onWidthChange(id, width);
                }
            }, 200));
            resizeObserver.observe(iconRef.current);
            return () => {
                resizeObserver.disconnect();
            };
        }
    });
    const togglePopper = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        if (typeof onOpenedChange === 'function') {
            onOpenedChange(id, !isOpen);
        }
        setIsOpen(!isOpen);
        setPopperVersion(popperVersion + 1);
        if (isOpen) {
            setTimeout(() => {
                if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.isKeyboardMode)()) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(iconRef.current);
                }
            }, 200);
        }
    }, [id, isOpen, popperVersion, onOpenedChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'runtime-query__widget-popper', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { title: label, "aria-label": label, icon: true, size: 'sm', variant: buttonType === 'tertiary' ? 'text' : undefined, color: buttonType === 'tertiary' ? 'inherit' : undefined, type: buttonType === 'tertiary' ? undefined : buttonType, ref: iconRef, onClick: togglePopper, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, Object.assign({ size: 16 }, (typeof icon === 'string' ? { icon } : { icon: icon.svg, color: buttonType === 'tertiary' ? undefined : icon.properties.color }))), label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
            line-height: 1.2;
          `, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ 'ml-2': icon != null }), children: label })] }), isMobile
                ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.MobilePanel, { open: isOpen, title: popperTitle, onClose: togglePopper, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple.org", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })
                : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FloatingPanel, { className: 'ui-unit-popper ui-unit-popper_k-arrangement-icon flex-grow-1', headerClassName: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS, open: isOpen, onHeaderClose: togglePopper, toggle: togglePopper, headerTitle: popperTitle, minSize: minSize, defaultSize: defaultSize, dragBounds: 'body', version: popperVersion, reference: iconRef, placement: 'bottom-start', shiftOptions: shiftOptions, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple.org", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskList: () => (/* binding */ QueryTaskList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */





const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__.createQuerySimpleDebugLogger)();
// Helper function to group queries by groupId
const groupQueries = (queryItems) => {
    const groups = {};
    const ungrouped = [];
    const groupOrder = [];
    const groupIndexMap = {};
    // First pass: collect items in regular arrays
    const groupItemsMap = {};
    queryItems.forEach((item, index) => {
        if (item.groupId) {
            if (!groupItemsMap[item.groupId]) {
                groupItemsMap[item.groupId] = [];
                groups[item.groupId] = {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]),
                    displayName: item.groupDisplayName || item.name || `Group ${item.groupId}`,
                    icon: item.icon
                };
                groupIndexMap[item.groupId] = index;
                groupOrder.push(item.groupId);
            }
            groupItemsMap[item.groupId].push(item);
        }
        else {
            ungrouped.push({ item, index });
        }
    });
    // Second pass: convert regular arrays to ImmutableArrays
    Object.keys(groupItemsMap).forEach(groupId => {
        groups[groupId].items = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(groupItemsMap[groupId]);
    });
    return { groups, ungrouped, groupOrder };
};
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
function QueryTaskList(props) {
    const { queryItems, widgetId, defaultPageSize, isInPopper = false, className = '', initialQueryValue, onHashParameterUsed, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const { groups, ungrouped, groupOrder } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => groupQueries(queryItems), [queryItems]);
    // Find the query item matching the initialQueryValue shortId from URL hash
    const matchingQueryIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (!(initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId)) {
            return -1;
        }
        return queryItems.findIndex(item => item.shortId === initialQueryValue.shortId);
    }, [queryItems, initialQueryValue]);
    // Determine which group/ungrouped index the matching query is at
    const getQuerySelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        if (matchingQueryIndex < 0)
            return null;
        const item = queryItems[matchingQueryIndex];
        if (item.groupId) {
            const groupItems = ((_a = groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.items) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
            const indexInGroup = groupItems.findIndex(q => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-in-group',
                groupId: item.groupId,
                indexInGroup: indexInGroup >= 0 ? indexInGroup : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'group', groupId: item.groupId, index: indexInGroup >= 0 ? indexInGroup : 0 };
        }
        else {
            // Ungrouped query
            const indexInUngrouped = ungrouped.findIndex(({ item: q }) => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-ungrouped',
                indexInUngrouped: indexInUngrouped >= 0 ? indexInUngrouped : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'ungrouped', index: indexInUngrouped >= 0 ? indexInUngrouped : 0 };
        }
    }, [matchingQueryIndex, queryItems, groups, ungrouped]);
    // Track selected query - initialize with matching query if found from URL hash
    const [selectedGroupId, setSelectedGroupId] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection',
                groupId: getQuerySelection.groupId
            });
            return getQuerySelection.groupId;
        }
        // Default to first group if groups exist and no hash parameter
        if (groupOrder.length > 0) {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection-default',
                groupId: groupOrder[0],
                note: 'No hash parameter, defaulting to first group'
            });
            return groupOrder[0];
        }
        return null;
    });
    const [selectedGroupQueryIndex, setSelectedGroupQueryIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-query-index',
                index: getQuerySelection.index
            });
            return getQuerySelection.index;
        }
        return 0;
    });
    const [selectedUngroupedIndex, setSelectedUngroupedIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type) === 'ungrouped') {
            debugLogger.log('GROUP', {
                event: 'initial-ungrouped-index',
                index: getQuerySelection.index
            });
            return getQuerySelection.index;
        }
        return 0;
    });
    // Update selection when initialQueryValue changes (e.g., when URL hash is detected)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (getQuerySelection) {
            if (getQuerySelection.type === 'group') {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-group',
                    groupId: getQuerySelection.groupId,
                    index: getQuerySelection.index
                });
                setSelectedGroupId(getQuerySelection.groupId);
                setSelectedGroupQueryIndex(getQuerySelection.index);
            }
            else {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-ungrouped',
                    index: getQuerySelection.index
                });
                setSelectedGroupId(null);
                setSelectedUngroupedIndex(getQuerySelection.index);
            }
        }
        else {
            // No hash parameter - ensure we have a default selection
            // If groups exist, default to first group (already handled in useState initializer)
            // But if no groups and we have ungrouped, ensure selectedUngroupedIndex is set
            if (groupOrder.length === 0 && ungrouped.length > 0) {
                debugLogger.log('GROUP', {
                    event: 'no-hash-parameter-default-ungrouped',
                    defaultIndex: 0
                });
                setSelectedUngroupedIndex(0);
            }
        }
    }, [getQuerySelection, groupOrder.length, ungrouped.length]);
    // Get the currently selected query item
    const getSelectedQueryItem = () => {
        // PRIORITY 1: If hash parameter matches a query, use that directly
        // This ensures we always use the hash-matched query, regardless of state timing
        // This is critical for grouped queries where dropdowns need to be synchronized
        if (getQuerySelection && matchingQueryIndex >= 0) {
            const hashMatchedItem = queryItems[matchingQueryIndex];
            debugLogger.log('GROUP', {
                event: 'getSelectedQueryItem-hash-match',
                shortId: hashMatchedItem.shortId,
                groupId: hashMatchedItem.groupId,
                configId: hashMatchedItem.configId,
                isGrouped: !!hashMatchedItem.groupId,
                matchingQueryIndex,
                note: 'Using hash-matched query (highest priority)'
            });
            return hashMatchedItem;
        }
        // PRIORITY 2: Otherwise use current state selection
        debugLogger.log('GROUP', {
            event: 'getSelectedQueryItem-state-selection',
            selectedGroupId,
            hasSelectedGroup: selectedGroupId && groups[selectedGroupId],
            selectedGroupQueryIndex,
            selectedUngroupedIndex,
            ungroupedLength: ungrouped.length,
            groupOrderLength: groupOrder.length,
            note: 'No hash parameter, using state selection'
        });
        // If a group is selected, get query from that group
        if (selectedGroupId && groups[selectedGroupId]) {
            const groupItems = groups[selectedGroupId].items;
            if (groupItems.length > 0) {
                const idx = selectedGroupQueryIndex < groupItems.length ? selectedGroupQueryIndex : 0;
                const selectedItem = groupItems[idx];
                debugLogger.log('GROUP', {
                    event: 'selected-query-from-group',
                    groupId: selectedGroupId,
                    groupQueryIndex: idx,
                    queryItemConfigId: selectedItem.configId,
                    queryDisplayName: getQueryDisplayName(selectedItem)
                });
                return selectedItem;
            }
        }
        // Otherwise, get from ungrouped queries
        if (ungrouped.length > 0) {
            const idx = selectedUngroupedIndex < ungrouped.length ? selectedUngroupedIndex : 0;
            const selectedItem = ungrouped[idx].item;
            debugLogger.log('GROUP', {
                event: 'selected-query-from-ungrouped',
                ungroupedIndex: idx,
                queryItemConfigId: selectedItem.configId,
                queryDisplayName: getQueryDisplayName(selectedItem)
            });
            return selectedItem;
        }
        // Fallback to first query item
        debugLogger.log('GROUP', {
            event: 'selected-query-fallback',
            note: 'No groups or ungrouped queries, using first item'
        });
        return queryItems[0];
    };
    const selectedQueryItem = getSelectedQueryItem();
    const selectedQueryRealIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return queryItems.findIndex(q => q.configId === selectedQueryItem.configId);
    }, [queryItems, selectedQueryItem]);
    // If only one query total, don't show dropdown
    const showDropdown = queryItems.length > 1 || groupOrder.length > 0;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `runtime-query__query-list h-100 ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      display: flex;
      flex-direction: column;
      .query-selector {
        padding: 16px;
        border-bottom: 1px solid var(--sys-color-divider-secondary);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .query-selector-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--sys-color-text-primary);
        margin-bottom: 4px;
      }
      .query-selector select {
        width: 100%;
      }
      .query-task-container {
        flex: 1;
        overflow: auto;
      }
    `, children: selectedQueryItem && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `query-task-container ${isInPopper ? jimu_ui__WEBPACK_IMPORTED_MODULE_3__.FOCUSABLE_CONTAINER_CLASS : ''}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: selectedQueryRealIndex >= 0 ? selectedQueryRealIndex : 0, total: queryItems.length, queryItem: selectedQueryItem, defaultPageSize: defaultPageSize, isInPopper: isInPopper, initialInputValue: selectedQueryItem.shortId === (initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId) ? initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value : undefined, onHashParameterUsed: onHashParameterUsed, queryItems: queryItems, selectedQueryIndex: selectedUngroupedIndex, onQueryChange: (index) => setSelectedUngroupedIndex(index), 
                // Grouping props
                groups: groups, ungrouped: ungrouped, groupOrder: groupOrder, selectedGroupId: selectedGroupId, selectedGroupQueryIndex: selectedGroupQueryIndex, onGroupChange: (groupId) => setSelectedGroupId(groupId), onGroupQueryChange: (index) => setSelectedGroupQueryIndex(index), onUngroupedChange: (index) => setSelectedUngroupedIndex(index), resultsMode: resultsMode, onResultsModeChange: onResultsModeChange, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange }) })) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskSpatialForm: () => (/* binding */ QueryTaskSpatialForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-from-ds */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx");
/* harmony import */ var _geometry_from_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry-from-map */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx");
/* harmony import */ var _geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./geometry-from-draw */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");

/** @jsx jsx */








function QueryTaskSpatialForm(props) {
    var _a;
    const { label, desc, filterTypes, mapWidgetIds, onFilterChange, onRelationChange, onBufferChange, useDataSources, spatialRelations, useRuntimeData, dsEnableBuffer, dsBufferDistance, dsBufferUnit, drawEnableBuffer, drawBufferDistance, drawBufferUnit, createToolTypes, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // used to store the selection of the data source in order to update the filter when option changes
    const selectedGeometriesRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const mapExists = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        if ((mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.length) > 0) {
            const mapWidgetId = mapWidgetIds[0];
            return state.appConfig.widgets[mapWidgetId] != null;
        }
        return false;
    });
    const canUseMapFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return mapExists && ((filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent)) || (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode)));
    }, [filterTypes, mapExists]);
    const supportedFilterTypes = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [];
        if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData) {
            result.push({ value: 'data', label: getI18nMessage('featureFromDs') });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent))) {
            result.push({ value: 'map', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent}`) });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode))) {
            result.push({ value: 'draw', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode}`) });
        }
        return result;
    }, [canUseMapFilter, useDataSources, useRuntimeData, getI18nMessage, filterTypes]);
    const [currentFilterType, setCurrentFilterType] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // in order to avoid invalid option being selected
        if (currentFilterType !== 'none' && !supportedFilterTypes.find((item) => item.value === currentFilterType)) {
            setCurrentFilterType((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
        }
    }, [currentFilterType, supportedFilterTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear the relationship and buffer if filter type is not 'data'
        if (currentFilterType === 'map' || currentFilterType === 'draw' || currentFilterType === 'none') {
            onRelationChange(null);
            onBufferChange(0, _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters);
            onFilterChange({ geometry: null });
        }
        // no need to update the filter if the data source has selection since it will be updated in the handleSelectionChange method
        if (currentFilterType === 'data' && selectedGeometriesRef.current == null) {
            onFilterChange({ geometry: null });
        }
    }, [currentFilterType, onRelationChange, onBufferChange, onFilterChange]);
    const handleFilterTypeChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => { setCurrentFilterType(evt.target.value); }, []);
    const handleGeometryChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometry, layer, graphic, clearAfterApply) => {
        onFilterChange({ geometry, graphic, layer, clearAfterApply });
    }, [onFilterChange]);
    const handleSelectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometries) => {
        selectedGeometriesRef.current = geometries;
        onFilterChange({ geometry: geometries });
    }, [onFilterChange]);
    if (!((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData || canUseMapFilter)) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4 pb-4', "aria-label": label, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !label && !desc }), children: [label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: label }), desc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: desc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), supportedFilterTypes.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3', children: getI18nMessage('chooseFilterType') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterType'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `height: 32px;`, value: currentFilterType, onChange: handleFilterTypeChanged, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'none', children: "-" }, '-'), supportedFilterTypes.map(item => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item.value, children: item.label }, item.value))] })] })), currentFilterType === 'data' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__.GeometryFromDataSource, { enableBuffer: dsEnableBuffer, bufferDistance: dsBufferDistance, bufferUnit: dsBufferUnit, spatialRelations: spatialRelations, useDataSources: useDataSources, useRuntimeData: useRuntimeData, onSelectionChange: handleSelectionChange, onRelationChange: onRelationChange, onBufferChange: onBufferChange })), currentFilterType === 'map' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_map__WEBPACK_IMPORTED_MODULE_6__.GeometryFromMap, { mapWidgetIds: mapWidgetIds, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange })), currentFilterType === 'draw' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__.GeometryFromDraw, { enableBuffer: drawEnableBuffer, bufferDistance: drawBufferDistance, bufferUnit: drawBufferUnit, mapWidgetIds: mapWidgetIds, widgetId: widgetId, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange, onBufferChange: onBufferChange }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTask: () => (/* binding */ QueryTask)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_task_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx");
/* harmony import */ var _query_result__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-result */ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_label__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-label */ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var _loading_result__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./loading-result */ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

/** @jsx jsx */

















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.createQuerySimpleDebugLogger)();
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  &.wrapped .query-form {
    height: 100%;
  }
  .query-task__content {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-top: 8px;
    &:has(> .query-form__header > div:not(.d-none)), &:has(> .query-result) {
      padding-top: 16px;
    }
  }
  .query-form__header {
    display: flex;
    &.has-content {
      border-bottom: 1px solid var(--sys-color-divider-secondary);
      margin-bottom: 6px;
      padding-bottom: 8px;
    }
    .nav-action {
      flex: 1 1 0;
      overflow: hidden;
      display: flex;
      .jimu-btn {
        min-width: 26px;
      }
    }
    .result-menu {
      display: flex;
    }
  }
`;
function QueryTask(props) {
    var _a, _b, _c, _d, _e;
    const { queryItem, onNavBack, total, isInPopper = false, defaultPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.CONSTANTS.DEFAULT_QUERY_PAGE_SIZE, wrappedInPopper = false, className = '', index, initialInputValue, onHashParameterUsed, queryItems, selectedQueryIndex, onQueryChange, groups, ungrouped, groupOrder, selectedGroupId, selectedGroupQueryIndex, onGroupChange, onGroupQueryChange, onUngroupedChange, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange } = props, otherProps = __rest(props, ["queryItem", "onNavBack", "total", "isInPopper", "defaultPageSize", "wrappedInPopper", "className", "index", "initialInputValue", "onHashParameterUsed", "queryItems", "selectedQueryIndex", "onQueryChange", "groups", "ungrouped", "groupOrder", "selectedGroupId", "selectedGroupQueryIndex", "onGroupChange", "onGroupQueryChange", "onUngroupedChange", "resultsMode", "onResultsModeChange", "accumulatedRecords", "onAccumulatedRecordsChange"]);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_13__["default"]);
    const [stage, setStage] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0); // 0 = form, 1 = results, 2 = loading
    const [activeTab, setActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState('query');
    const [enabled, setEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const [resultCount, setResultCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    // Track if we've already selected records for the current query results
    const hasSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track query execution count to force QueryTaskResult remount on new queries
    const queryExecutionKeyRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const queryParamRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const recordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [outputDS, setOutputDS] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [spatialFilterEnabled, setSpatialFilterEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const attributeFilterSqlExprObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.sqlExprObj);
    const spatialFilterObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const clearResultBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const [dataActionFilter, setDataActionFilter] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.configId);
    // Track manual tab switches to prevent auto-switch useEffect from interfering
    const manualTabSwitchRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Store the last runtime zoom override value from the form for use by Add to Map action
    const lastRuntimeZoomToSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Error states for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [zoomError, setZoomError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_10__.DEFAULT_QUERY_ITEM, queryItem);
    const { icon, name, displayLabel } = currentItem;
    const dsExists = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.useDataSourceExists)({ widgetId: props.widgetId, useDataSourceId: (_a = currentItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId });
    // Debug logging for tab content rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('TASK', {
            event: 'query-tab-content-render',
            activeTab,
            enabled,
            dsExists,
            dataSource: dataSource ? 'exists' : 'null',
            queryItemConfigId: queryItem.configId,
            note: 'Query tab content state check'
        });
    }, [activeTab, enabled, dsExists, dataSource, queryItem.configId]);
    // Debug logging for Tab children rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'query-tab-children-render',
                activeTab,
                queryItemConfigId: queryItem.configId,
                note: 'Query Tab children should be rendering'
            });
        }
    }, [activeTab, queryItem.configId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    // Get the pagination style from widget config (MultiPage or LazyLoad/Single-page)
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    // Get the initial page size for single-page (LazyLoad) results
    // This allows users to configure how many records are loaded initially when using single-page mode
    // Defaults to 100 if not configured
    const lazyLoadInitialPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.lazyLoadInitialPageSize;
    });
    // Watch for when results are ready and switch to Results tab
    // This ensures we wait for React to render results, not just for the query to complete
    // This approach matches the behavior of manual input where results are rendered before tab switch
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Don't auto-switch if user manually switched tabs
        if (manualTabSwitchRef.current) {
            return;
        }
        // Only switch tabs if:
        // 1. We have results (resultCount > 0)
        // 2. Records are actually loaded (recordsRef.current has data)
        // 3. We're in results stage (stage === 1)
        // 4. We're currently on the query tab (don't switch if already on results)
        if (resultCount > 0 && recordsRef.current && recordsRef.current.length > 0 && stage === 1 && activeTab === 'query') {
            setActiveTab('results');
        }
    }, [resultCount, stage, activeTab]);
    // Verify dropdowns are synchronized with hash parameter when present
    // This is especially important for grouped queries where dropdowns need to be synchronized
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only verify if we have a hash parameter
        if (!initialInputValue || !queryItem.shortId) {
            return;
        }
        // Verify the current queryItem matches what we expect from hash parameter
        const expectedShortId = queryItem.shortId;
        const isGroupedQuery = queryItem.groupId !== null && queryItem.groupId !== undefined;
        // Check if dropdowns are correctly set for grouped queries
        if (isGroupedQuery) {
            const expectedGroupId = queryItem.groupId;
            const actualGroupId = selectedGroupId;
            const expectedQueryIndex = selectedGroupQueryIndex;
            if (expectedGroupId !== actualGroupId) {
                debugLogger.log('GROUP', {
                    event: 'dropdown-group-mismatch',
                    expectedGroupId,
                    actualGroupId,
                    queryItemShortId: expectedShortId,
                    warning: 'First dropdown may not be synchronized with hash parameter'
                });
            }
            else if (expectedQueryIndex !== undefined) {
                // Verify the query index within the group matches
                const groupItems = (_a = groups === null || groups === void 0 ? void 0 : groups[expectedGroupId]) === null || _a === void 0 ? void 0 : _a.items;
                if (groupItems && groupItems.length > expectedQueryIndex) {
                    const expectedQueryConfigId = (_b = groupItems[expectedQueryIndex]) === null || _b === void 0 ? void 0 : _b.configId;
                    const actualQueryConfigId = queryItem.configId;
                    if (expectedQueryConfigId !== actualQueryConfigId) {
                        debugLogger.log('GROUP', {
                            event: 'dropdown-query-index-mismatch',
                            expectedQueryConfigId,
                            actualQueryConfigId,
                            expectedQueryIndex,
                            queryItemShortId: expectedShortId,
                            warning: 'Second dropdown may not be synchronized with hash parameter'
                        });
                    }
                    else {
                        debugLogger.log('GROUP', {
                            event: 'dropdowns-synchronized',
                            queryItemShortId: expectedShortId,
                            groupId: expectedGroupId,
                            selectedGroupQueryIndex: expectedQueryIndex,
                            note: 'Dropdowns synchronized with hash parameter'
                        });
                    }
                }
            }
        }
        else {
            // Ungrouped query - verify it's selected
            debugLogger.log('GROUP', {
                event: 'dropdowns-synchronized-ungrouped',
                queryItemShortId: expectedShortId,
                note: 'Ungrouped query dropdown synchronized with hash parameter'
            });
        }
    }, [initialInputValue, queryItem.shortId, queryItem.groupId, queryItem.configId, selectedGroupId, selectedGroupQueryIndex, groups]);
    const useOutputDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
        dataSourceId: queryItem.outputDataSourceId,
        mainDataSourceId: queryItem.outputDataSourceId
    }), [queryItem.outputDataSourceId]);
    const updateDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        var _a, _b;
        const currentDs = ds !== null && ds !== void 0 ? ds : dataSource;
        // should disable spatial filter if the dataSource is an output ds and it already has spatial filter
        if ((_a = currentDs === null || currentDs === void 0 ? void 0 : currentDs.getDataSourceJson()) === null || _a === void 0 ? void 0 : _a.isOutputFromWidget) {
            const qDs = currentDs;
            const qParams = (_b = qDs.getCurrentQueryParams) === null || _b === void 0 ? void 0 : _b.call(qDs);
            if (qParams.geometry != null) {
                setSpatialFilterEnabled(false);
            }
            else {
                setSpatialFilterEnabled(true);
            }
        }
    }, [dataSource]);
    const handleStatusChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((enabled) => {
        setEnabled(enabled);
        updateDataSource();
    }, [updateDataSource]);
    const handleOutputDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info, preInfo) => {
        const outputId = queryItem.outputDataSourceId;
        const filter = (info === null || info === void 0 ? void 0 : info.widgetQueries) ? info.widgetQueries[`setFilter-${outputId}`] : null;
        if (filter == null) { // filter is null means there are incomplete queries, ignore this change
            return;
        }
        const preFilter = (preInfo === null || preInfo === void 0 ? void 0 : preInfo.widgetQueries) ? preInfo.widgetQueries[`setFilter-${outputId}`] : null;
        if ((filter === null || filter === void 0 ? void 0 : filter.where) !== (preFilter === null || preFilter === void 0 ? void 0 : preFilter.where)) {
            setDataActionFilter(filter);
        }
    }, [queryItem.outputDataSourceId]);
    const publishDataClearedMsg = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        if (!outputDS)
            return;
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordSetChangeMessage(props.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_1__.RecordSetChangeType.Remove, [outputDS.id]);
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        yield jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(props.widgetId, [], [outputDS.id]));
    }), [props.widgetId, outputDS]);
    /**
     * Clears all query results from the UI and map.
     * This is the single source of truth for clearing results.
     * It clears the records, resets the result count, clears selection from the map,
     * publishes a cleared message to the map, switches back to the Query tab,
     * and increments the query execution key to force QueryTaskResult to remount with fresh state.
     */
    const clearResult = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        recordsRef.current = null;
        outputDS === null || outputDS === void 0 ? void 0 : outputDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady);
        setResultCount(0);
        // Clear selection directly from data source using utility function
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.clearSelectionInDataSources)(outputDS);
        // Clear widget-level accumulated records when clearing results
        if (onAccumulatedRecordsChange) {
            onAccumulatedRecordsChange([]);
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-cleared-on-clear-results',
                widgetId: props.widgetId
            });
        }
        publishDataClearedMsg();
        // Switch back to Query tab when clearing results
        setActiveTab('query');
        setStage(0);
        hasSelectedRecordsRef.current = false; // Reset selection flag when clearing
        // Increment query execution key to force QueryTaskResult remount with fresh state
        queryExecutionKeyRef.current += 1;
        // Clear error states when clearing results
        setSelectionError(null);
        setZoomError(null);
    }, [outputDS, publishDataClearedMsg, props.widgetId, queryItem.configId, onAccumulatedRecordsChange]);
    /**
     * Handles data source creation when switching between query items.
     * When a new query item is selected (e.g., switching from Parcel to Major),
     * this clears old results by programmatically clicking the trash can button
     * to ensure all cleanup logic runs properly.
     *
     * @param ds - The newly created data source for the selected query item
     */
    const handleDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        // In "Add to" and "Remove from" modes, preserve accumulated records and selection - don't clear
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'preserving-selection-on-query-switch-handleDataSourceCreated',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length
            });
            setDataSource(ds);
            updateDataSource(ds);
            setStage(0);
            setActiveTab('query');
            return; // Skip clearing - preserve selection
        }
        // For "New" mode, clear old results as before
        let clearButton = clearResultBtnRef.current;
        if (!clearButton) {
            clearButton = (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.findClearResultsButton)();
        }
        if (clearButton && resultCount > 0) {
            clearButton.click();
        }
        else {
            clearResult();
        }
        setDataSource(ds);
        updateDataSource(ds);
        setStage(0);
        setActiveTab('query'); // Return to Query tab when switching queries
    }, [updateDataSource, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const handleOutputDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        setOutputDS(ds);
        // If in "Add to" or "Remove from" mode and we have accumulated records, re-select them
        // This uses the same logic as after query completion - selectRecordsAndPublish
        // This ensures records are selected both on the map and in the Results tab
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            // Use a small delay to ensure the DS is fully ready
            setTimeout(() => {
                const featureDS = ds;
                if (featureDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    const recordIds = accumulatedRecords.map(record => record.getId());
                    try {
                        // Use the same selectRecordsAndPublish that's used after query completion
                        // This will select records on the map and trigger handleDataSourceInfoChange
                        // in query-result.tsx to update selectedRecords state for the Results tab
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.selectRecordsAndPublish)(props.widgetId, featureDS, recordIds, accumulatedRecords);
                        // Update recordsRef so results tab shows accumulated records
                        recordsRef.current = accumulatedRecords;
                        setResultCount(accumulatedRecords.length);
                        debugLogger.log('RESULTS-MODE', {
                            event: 're-selected-accumulated-records-after-query-switch',
                            widgetId: props.widgetId,
                            outputDSId: featureDS.id,
                            recordsCount: accumulatedRecords.length
                        });
                        // Verify what's actually selected in the DS after a delay
                        setTimeout(() => {
                            var _a;
                            const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(featureDS.id);
                            const selectedInDS = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
                            const selectedIdsInDS = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
                            debugLogger.log('RESULTS-MODE', {
                                event: 'verify-records-after-reselection',
                                widgetId: props.widgetId,
                                outputDSId: featureDS.id,
                                expectedCount: accumulatedRecords.length,
                                actualSelectedInDS: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) || 0,
                                selectedIdsInDS: selectedIdsInDS.length,
                                recordsMatch: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) === accumulatedRecords.length
                            });
                        }, 200);
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 're-selection-failed-after-switch',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error',
                            errorStack: error instanceof Error ? error.stack : undefined
                        });
                    }
                }
            }, 100);
        }
    }, [resultsMode, accumulatedRecords, props.widgetId]);
    // Clear results when query item changes (e.g., when new hash parameter triggers different query)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Only clear if we're actually switching to a different query (not just re-rendering)
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        // Only clear results when switching queries if we're in "New" mode
        // In "Add to" and "Remove from" modes, we want to preserve accumulated records across query switches
        if (isSwitchingQueries && resultCount > 0 && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            // Store the old configId before updating
            const oldConfigId = previousConfigIdRef.current;
            // Update the ref to track the new query
            previousConfigIdRef.current = queryItem.configId;
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-results-on-query-switch-new-mode',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode
            });
            // Clear immediately when switching queries, but wrap in try-catch to handle
            // race conditions with feature info windows that might be rendering
            try {
                clearResult();
            }
            catch (error) {
                // Log for debugging but don't show to user (framework race condition)
                // The error is in framework code (feature-info.tsx), not our code
                // This can happen if feature-info.tsx is trying to appendChild to a DOM element
                // that gets removed when we clear selection
                debugLogger.log('TASK', {
                    event: 'clear-result-race-condition',
                    error: error instanceof Error ? error.message : String(error),
                    note: 'Likely race condition with feature-info.tsx'
                });
                if (true) {
                    console.warn('Error clearing results (likely race condition with feature info):', error);
                }
                // Don't set error state - this is expected in some scenarios
            }
        }
        else if (isSwitchingQueries) {
            // Just update the ref - don't clear results if in "Add to" or "Remove from" mode or no results
            previousConfigIdRef.current = queryItem.configId;
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'preserving-accumulated-records-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    oldConfigId: previousConfigIdRef.current,
                    newConfigId: queryItem.configId,
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
                });
            }
        }
    }, [queryItem.configId, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const navToForm = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((clearResults = false) => {
        if (clearResults) {
            // Use the centralized clearResult method instead of duplicating logic
            clearResult();
            return;
        }
        // Switch to query tab but don't clear results unless explicitly requested
        // Mark as manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab('query');
        // Reset the flag after a short delay
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Only change stage if we're clearing results
        // Otherwise, keep stage at 1 (results available) so results persist
        if (!clearResults && resultCount > 0) {
            setStage(1); // Keep results available
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
        });
    }, [clearResult, resultCount]);
    /**
     * Handles tab switching between Query and Results tabs.
     * Tab switching preserves results state - results remain visible and selected
     * when switching between tabs. Results are only cleared when explicitly
     * clicking the trash can button or when starting a new query.
     *
     * @param tab - The tab to switch to ('query' | 'results')
     * @param event - Optional mouse event to prevent default behavior
     */
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab, event) => {
        debugLogger.log('TASK', {
            event: 'tab-change',
            tab,
            currentTab: activeTab,
            resultCount,
            eventType: event === null || event === void 0 ? void 0 : event.type
        });
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        // Don't allow switching to results if there are no results
        if (tab === 'results' && resultCount === 0) {
            debugLogger.log('TASK', {
                event: 'tab-change-blocked',
                reason: 'no-results',
                tab,
                resultCount
            });
            return;
        }
        // Mark this as a manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab(tab);
        // Reset the flag after a short delay to allow the state update to complete
        // This prevents the auto-switch useEffect from immediately switching back
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Don't change stage here - just switch the view
        // Stage should remain at 1 (results available) when switching between tabs
    }, [resultCount, activeTab]);
    /**
     * Handles form submission when user clicks "Apply" button.
     * Clears old results (if any) by programmatically clicking the trash can button,
     * then executes the query with the provided SQL expression and spatial filter.
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmit = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        // Clear previous errors when starting a new query
        setSelectionError(null);
        setZoomError(null);
        // Store the runtime zoom override for use by Add to Map action
        lastRuntimeZoomToSelectedRef.current = runtimeZoomToSelected;
        attributeFilterSqlExprObj.current = sqlExpr;
        spatialFilterObj.current = spatialFilter;
        // Load the first page
        const featureDS = outputDS;
        // For "Add to" and "Remove from" modes, use widget-level accumulated records
        // These persist across query switches, unlike query-item-level records
        let existingRecordsForMerge = [];
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
            existingRecordsForMerge = accumulatedRecords || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'using-widget-level-accumulated-records',
                widgetId: props.widgetId,
                resultsMode,
                existingRecordsCount: existingRecordsForMerge.length,
                outputDSId: outputDS.id
            });
        }
        // For "New" mode, clear old results by programmatically clicking the trash can button
        // For "Add to" and "Remove from" modes, we keep accumulated results, so skip clearing
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection && clearResultBtnRef.current) {
            clearResultBtnRef.current.click();
            // Small delay to ensure the click handler completes before proceeding
            yield new Promise(resolve => setTimeout(resolve, 0));
        }
        // Set loading stage
        setStage(2);
        // For "New" mode, clear data cleared message
        // For "Add to" and "Remove from" modes, skip clearing to preserve existing records
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            yield publishDataClearedMsg();
        }
        // Determine page size based on pagination style
        // For single-page (LazyLoad) mode, use the configured initial page size (defaults to 100)
        // For multi-page mode, use the default page size from props
        let pageSize = defaultPageSize;
        if (pagingTypeInConfig === _config__WEBPACK_IMPORTED_MODULE_5__.PagingType.LazyLoad) {
            // Use configured lazy load initial page size, falling back to 100 if not set
            pageSize = lazyLoadInitialPageSize !== null && lazyLoadInitialPageSize !== void 0 ? lazyLoadInitialPageSize : 100;
        }
        const queryParams = (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.generateQueryParams)(featureDS, sqlExpr, spatialFilter, currentItem, 1, pageSize);
        queryParamRef.current = queryParams;
        // Change output ds status to unloaded before use it to load count/records.
        featureDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        featureDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        let queryResultCount = 0; // Capture count from promise chain to use in finally block
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.executeCountQuery)(props.widgetId, featureDS, queryParams)
            .then((count) => {
            queryResultCount = count; // Store count for use in finally block
            setResultCount(count);
            // update ds in order to execute query
            featureDS.updateQueryParams(queryParamRef.current, props.widgetId);
            return (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.executeQuery)(props.widgetId, queryItem, featureDS, queryParamRef.current);
        })
            .then((result) => __awaiter(this, void 0, void 0, function* () {
            var _a;
            let recordsToDisplay = result.records;
            let dsToUse = outputDS;
            // Handle "Add to" mode: merge new results with widget-level accumulated records
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection && result.records && result.records.length > 0) {
                try {
                    // Merge new query results with widget-level accumulated records
                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, // Use outputDS for key generation
                    result.records, existingRecordsForMerge // Widget-level accumulated records
                    );
                    recordsToDisplay = mergedRecords;
                    // Update widget-level accumulated records so they persist across query switches
                    if (onAccumulatedRecordsChange) {
                        onAccumulatedRecordsChange(mergedRecords);
                    }
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-merge-complete',
                        widgetId: props.widgetId,
                        existingRecordsCount: existingRecordsForMerge.length,
                        newRecordsCount: result.records.length,
                        mergedRecordsCount: mergedRecords.length,
                        outputDSId: outputDS.id,
                        widgetLevelRecordsUpdated: true
                    });
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to normal behavior on error
                    recordsToDisplay = result.records;
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                // Handle "Remove from" mode: remove matching records from widget-level accumulated records
                try {
                    // Check if we have accumulated records to remove from
                    if (existingRecordsForMerge.length === 0) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-accumulated-records',
                            widgetId: props.widgetId,
                            queryRecordsCount: ((_a = result.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
                            note: 'No accumulated records to remove from - no-op'
                        });
                        // No accumulated records, so nothing to remove - show empty results
                        recordsToDisplay = [];
                    }
                    else if (result.records && result.records.length > 0) {
                        // Remove matching records from accumulated records
                        const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.removeResultsFromAccumulated)(outputDS, // Use outputDS for key generation
                        result.records, existingRecordsForMerge // Widget-level accumulated records
                        );
                        recordsToDisplay = remainingRecords;
                        // Update widget-level accumulated records
                        if (onAccumulatedRecordsChange) {
                            onAccumulatedRecordsChange(remainingRecords);
                        }
                        // Remove records from origin data source selections (map highlighting)
                        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.removeRecordsFromOriginSelections)(props.widgetId, result.records, outputDS);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-complete',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            queryRecordsCount: result.records.length,
                            remainingRecordsCount: remainingRecords.length,
                            recordsRemoved: existingRecordsForMerge.length - remainingRecords.length,
                            outputDSId: outputDS.id,
                            widgetLevelRecordsUpdated: true,
                            originSelectionsUpdated: true
                        });
                        // If all records removed, auto-clear (consistent with user expectation)
                        if (remainingRecords.length === 0) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-all-records-removed',
                                widgetId: props.widgetId,
                                note: 'All accumulated records removed - auto-clearing'
                            });
                            // Clear widget-level accumulated records
                            if (onAccumulatedRecordsChange) {
                                onAccumulatedRecordsChange([]);
                            }
                        }
                    }
                    else {
                        // Query returned no results - nothing to remove
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-query-results',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            note: 'Query returned no results - no records to remove'
                        });
                        // Keep existing accumulated records displayed
                        recordsToDisplay = existingRecordsForMerge;
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to showing query results on error
                    recordsToDisplay = result.records || [];
                    console.error('Error in remove mode:', error);
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                // For "New" mode, clear widget-level accumulated records
                if (onAccumulatedRecordsChange) {
                    onAccumulatedRecordsChange([]);
                }
            }
            recordsRef.current = recordsToDisplay;
            // Reset selection flag for new query results
            hasSelectedRecordsRef.current = false;
            // Select records in the output DS
            // For "Add to" mode, select merged records
            // For "Remove from" mode, select remaining records (already updated via removeRecordsFromOriginSelections)
            // For "New" mode, select query results
            if (recordsToDisplay && recordsToDisplay.length > 0 && dsToUse) {
                const recordIdsToSelect = recordsToDisplay.map(record => record.getId());
                // For "Remove from" mode, selection was already updated via removeRecordsFromOriginSelections
                // But we still need to select in the outputDS for widget state consistency
                if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                    // Selection was already updated in origin DSs via removeRecordsFromOriginSelections
                    // Just update outputDS selection for widget state consistency
                    try {
                        if (typeof dsToUse.selectRecordsByIds === 'function') {
                            dsToUse.selectRecordsByIds(recordIdsToSelect, recordsToDisplay);
                        }
                        hasSelectedRecordsRef.current = true;
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-updated',
                            widgetId: props.widgetId,
                            recordCount: recordsToDisplay.length
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }
                else {
                    // For "Add to" and "New" modes, select records normally
                    try {
                        setSelectionError(null); // Clear previous errors
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.selectRecordsAndPublish)(props.widgetId, dsToUse, recordIdsToSelect, recordsToDisplay);
                        hasSelectedRecordsRef.current = true; // Mark as selected
                    }
                    catch (error) {
                        const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                        setSelectionError(errorMessage);
                        debugLogger.log('TASK', {
                            event: 'selection-failed',
                            error: errorMessage,
                            errorStack: error instanceof Error ? error.stack : undefined,
                            recordCount: recordIdsToSelect.length
                        });
                        console.error('Error publishing selection message', error);
                    }
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection && recordsToDisplay.length === 0) {
                // All records removed - clear selection
                try {
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.clearSelectionInDataSources)(dsToUse);
                    hasSelectedRecordsRef.current = false;
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-all-records-removed-selection-cleared',
                        widgetId: props.widgetId
                    });
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-clear-selection-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error'
                    });
                }
            }
            // Update result count
            // For "Add to" and "Remove from" modes, use accumulated/remaining count
            // For "New" mode, use query count
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                setResultCount(recordsToDisplay.length);
            }
            else {
                setResultCount(queryResultCount);
            }
            // Trigger the existing zoomToFeature data action (same as clicking "Zoom To" in the menu)
            // Use runtime preference if provided, otherwise fall back to config setting (defaults to true)
            const shouldZoom = runtimeZoomToSelected !== undefined
                ? runtimeZoomToSelected
                : (queryItem.zoomToSelected !== false);
            // Use the output DS and merged records
            const recordsForZoom = recordsToDisplay || result.records;
            const dsForZoom = dsToUse || outputDS;
            if (recordsForZoom && recordsForZoom.length > 0 && dsForZoom && shouldZoom) {
                // Create a data set from the appropriate data source and records
                const dataSet = {
                    dataSource: dsForZoom,
                    records: recordsForZoom,
                    name: dsForZoom.getLabel()
                };
                // Get available data actions and find the zoomToFeature action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(props.widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
                    .then(actionCategories => {
                    // Look for zoomToFeature action in any category
                    let zoomAction = null;
                    for (const category in actionCategories) {
                        const actions = actionCategories[category];
                        zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                        if (zoomAction)
                            break;
                    }
                    if (zoomAction) {
                        // Execute the same zoom action that works when clicked manually
                        return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, props.widgetId);
                    }
                    else {
                        return Promise.resolve(false);
                    }
                })
                    .catch(error => {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to zoom to features';
                    setZoomError(errorMessage);
                    debugLogger.log('ZOOM', {
                        event: 'zoom-action-failed',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    if (true) {
                        console.error('Error executing zoomToFeature data action', error);
                    }
                    return Promise.resolve(false);
                });
            }
            return Promise.resolve(true);
        }))
            .finally(() => {
            if ((spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.layer) && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.clearAfterApply)) {
                spatialFilter.layer.removeAll();
            }
            setStage(1);
            // Tab switching is now handled by useEffect that watches for resultCount, recordsRef.current, and stage
            // This ensures we wait for React to actually render results before switching tabs
            // This matches the behavior of manual input where results are rendered before tab switch
        });
    }), [currentItem, queryItem, props.widgetId, outputDS, defaultPageSize, pagingTypeInConfig, lazyLoadInitialPageSize, publishDataClearedMsg, clearResult, resultsMode, accumulatedRecords, onAccumulatedRecordsChange]);
    const { useAttributeFilter, sqlExprObj, useSpatialFilter, spatialFilterTypes, spatialIncludeRuntimeData, spatialRelationUseDataSources } = currentItem;
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task h-100', className, { wrapped: wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      ${style}
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useOutputDs, onDataSourceCreated: handleOutputDataSourceCreated, onDataSourceInfoChange: handleOutputDataSourceInfoChange }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { value: activeTab, onChange: (id) => handleTabChange(id), fill: true, type: 'underline', keepMount: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'query', title: getI18nMessage('queryTab'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'query'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
              padding-top: 0 !important;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-form__header mx-4 align-items-center', { 'in-popper': isInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              padding: 6px 0;
              padding-top: 8px;
              border-bottom: 1px solid var(--sys-color-divider-secondary);
              flex-shrink: 0;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('nav-action align-items-center', { 'd-none': wrappedInPopper }), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 mr-2', { 'd-none': total === 1 || !onNavBack }), size: 'sm', type: 'tertiary', icon: true, onClick: onNavBack, "aria-label": getI18nMessage('back'), ref: backBtnRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_14__.ArrowLeftOutlined, { autoFlip: true }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_label__WEBPACK_IMPORTED_MODULE_9__.QueryTaskLabel, { icon: icon, name: displayLabel ? name : '' })] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: clearResultBtnRef, size: 'sm', type: 'tertiary', "aria-label": getI18nMessage('clearResult'), icon: true, className: 'ml-auto py-0', onClick: clearResult, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__.TrashOutlined, {}) }) }))] }), (() => {
                                    // Only show dropdowns if multiple queries exist
                                    if (!queryItems || queryItems.length <= 1) {
                                        return null;
                                    }
                                    // Build flat list of all queries with their display info
                                    // For grouped queries, use group display name (only show once per group)
                                    const queryOptions = [];
                                    // Track which groups we've already added to avoid duplicates
                                    const addedGroups = new Set();
                                    queryItems.forEach((item, idx) => {
                                        var _a, _b, _c;
                                        if (item.groupId) {
                                            // For grouped queries, use group display name (only add once per group)
                                            if (!addedGroups.has(item.groupId)) {
                                                addedGroups.add(item.groupId);
                                                const groupDisplayName = ((_a = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.displayName) ||
                                                    ((_c = (_b = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _b === void 0 ? void 0 : _b.items[0]) === null || _c === void 0 ? void 0 : _c.name) ||
                                                    item.name ||
                                                    `Group ${item.groupId}`;
                                                queryOptions.push({
                                                    configId: item.configId,
                                                    displayName: groupDisplayName,
                                                    groupId: item.groupId,
                                                    index: idx
                                                });
                                            }
                                        }
                                        else {
                                            // Ungrouped query - use item.name for first dropdown (not searchAlias/jimuFieldName)
                                            queryOptions.push({
                                                configId: item.configId,
                                                displayName: item.name || getQueryDisplayName(item),
                                                groupId: null,
                                                index: idx
                                            });
                                        }
                                    });
                                    // Determine currently selected query
                                    const currentQueryItem = queryItem;
                                    const currentQueryGroupId = currentQueryItem.groupId || null;
                                    const isGroupedQuery = currentQueryGroupId !== null;
                                    // Find the option index for the current query
                                    const currentOptionIndex = queryOptions.findIndex(opt => {
                                        if (isGroupedQuery) {
                                            return opt.groupId === currentQueryGroupId;
                                        }
                                        else {
                                            return opt.configId === currentQueryItem.configId;
                                        }
                                    });
                                    debugLogger.log('GROUP', {
                                        event: 'rendering-dropdowns',
                                        totalQueries: queryItems.length,
                                        queryOptionsCount: queryOptions.length,
                                        currentQueryGroupId,
                                        isGroupedQuery,
                                        currentOptionIndex,
                                        selectedGroupId,
                                        selectedGroupQueryIndex,
                                        currentQueryConfigId: currentQueryItem.configId
                                    });
                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 4px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      font-size: 0.875rem;
                      font-weight: 500;
                      color: var(--sys-color-text-primary);
                      margin-bottom: 4px;
                      display: block;
                    `, children: getI18nMessage('searchLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: currentOptionIndex >= 0 ? currentOptionIndex : 0, onChange: (e) => {
                                                            var _a;
                                                            const optionIndex = parseInt(e.target.value);
                                                            const selectedOption = queryOptions[optionIndex];
                                                            debugLogger.log('GROUP', {
                                                                event: 'query-option-selected',
                                                                optionIndex,
                                                                selectedOption,
                                                                isGrouped: selectedOption.groupId !== null
                                                            });
                                                            if (selectedOption.groupId) {
                                                                // Grouped query selected - set group and first query in group
                                                                if (onGroupChange) {
                                                                    onGroupChange(selectedOption.groupId);
                                                                }
                                                                if (onGroupQueryChange) {
                                                                    onGroupQueryChange(0);
                                                                }
                                                            }
                                                            else {
                                                                // Ungrouped query selected - clear group selection
                                                                if (onGroupChange) {
                                                                    onGroupChange(null);
                                                                }
                                                                if (onUngroupedChange) {
                                                                    // Find the ungrouped index
                                                                    const ungroupedIndex = (_a = ungrouped === null || ungrouped === void 0 ? void 0 : ungrouped.findIndex(({ item }) => item.configId === selectedOption.configId)) !== null && _a !== void 0 ? _a : -1;
                                                                    if (ungroupedIndex >= 0) {
                                                                        onUngroupedChange(ungroupedIndex);
                                                                    }
                                                                    else {
                                                                        // Fallback: use the index from queryItems
                                                                        debugLogger.log('GROUP', {
                                                                            event: 'ungrouped-fallback-to-index',
                                                                            selectedOptionIndex: selectedOption.index
                                                                        });
                                                                        if (onQueryChange) {
                                                                            onQueryChange(selectedOption.index);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, children: queryOptions.map((option, idx) => {
                                                            debugLogger.log('GROUP', {
                                                                event: 'rendering-query-option',
                                                                index: idx,
                                                                configId: option.configId,
                                                                displayName: option.displayName,
                                                                groupId: option.groupId
                                                            });
                                                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: option.displayName }, option.configId));
                                                        }) })] }), isGroupedQuery && currentQueryGroupId && groups && groups[currentQueryGroupId] && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      padding: 4px 16px;
                      flex-shrink: 0;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        margin-bottom: 4px;
                        display: block;
                      `, children: "Search Alias" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: selectedGroupQueryIndex !== undefined ? selectedGroupQueryIndex : 0, onChange: (e) => {
                                                            var _a;
                                                            const newIndex = parseInt(e.target.value);
                                                            debugLogger.log('GROUP', {
                                                                event: 'group-query-selected',
                                                                groupId: currentQueryGroupId,
                                                                groupQueryIndex: newIndex,
                                                                queryItemConfigId: (_a = groups[currentQueryGroupId].items[newIndex]) === null || _a === void 0 ? void 0 : _a.configId,
                                                                queryDisplayName: getQueryDisplayName(groups[currentQueryGroupId].items[newIndex])
                                                            });
                                                            if (onGroupQueryChange) {
                                                                onGroupQueryChange(newIndex);
                                                            }
                                                        }, children: groups[currentQueryGroupId].items.map((item, idx) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: getQueryDisplayName(item) }, item.configId))) })] }))] }));
                                })(), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 4px 16px 4px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "d-flex align-items-center mb-1", children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "mr-2 title2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                      `, children: [getI18nMessage('results'), ":"] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: getI18nMessage('resultsModeDesc'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": getI18nMessage('resultsModeDesc'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: "radiogroup", "aria-label": getI18nMessage('resultsMode'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        display: flex;
                        gap: 4px;
                        align-items: stretch;
                      `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'primary' : 'default', onClick: () => {
                                                        const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                        debugLogger.log('RESULTS-MODE', {
                                                            event: 'button-mode-changed',
                                                            widgetId: props.widgetId,
                                                            queryItemConfigId: queryItem.configId,
                                                            previousMode: resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                            newMode,
                                                            timestamp: new Date().toISOString()
                                                        });
                                                        if (onResultsModeChange) {
                                                            onResultsModeChange(newMode);
                                                        }
                                                    }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection, "aria-label": `${getI18nMessage('createNewResults')}: ${((_b = getI18nMessage('resultsModeDesc').split('\n')[1]) === null || _b === void 0 ? void 0 : _b.trim()) || ''}`, title: getI18nMessage('createNewResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeNew') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'primary' : 'default', onClick: () => {
                                                        const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection;
                                                        const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                        debugLogger.log('RESULTS-MODE', {
                                                            event: 'button-mode-changed',
                                                            widgetId: props.widgetId,
                                                            queryItemConfigId: queryItem.configId,
                                                            previousMode,
                                                            newMode,
                                                            timestamp: new Date().toISOString()
                                                        });
                                                        // If switching FROM "New" TO "Add to" mode and we have current results,
                                                        // merge them with existing accumulated records before changing mode
                                                        if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                            newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection &&
                                                            recordsRef.current &&
                                                            recordsRef.current.length > 0 &&
                                                            outputDS &&
                                                            onAccumulatedRecordsChange) {
                                                            const currentRecords = recordsRef.current;
                                                            const existingAccumulated = accumulatedRecords || [];
                                                            // Merge current results with existing accumulated records
                                                            const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, currentRecords, existingAccumulated);
                                                            debugLogger.log('RESULTS-MODE', {
                                                                event: 'capturing-current-results-on-mode-switch',
                                                                widgetId: props.widgetId,
                                                                previousMode,
                                                                newMode,
                                                                currentRecordsCount: currentRecords.length,
                                                                existingAccumulatedCount: existingAccumulated.length,
                                                                mergedRecordsCount: mergedRecords.length
                                                            });
                                                            onAccumulatedRecordsChange(mergedRecords);
                                                        }
                                                        if (onResultsModeChange) {
                                                            onResultsModeChange(newMode);
                                                        }
                                                    }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection, "aria-label": `${getI18nMessage('addToCurrentResults')}: ${((_c = getI18nMessage('resultsModeDesc').split('\n')[2]) === null || _c === void 0 ? void 0 : _c.trim()) || ''}`, title: getI18nMessage('addToCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeAdd') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'primary' : 'default', disabled: !accumulatedRecords || accumulatedRecords.length === 0, onClick: () => {
                                                        const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
                                                        const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                        debugLogger.log('RESULTS-MODE', {
                                                            event: 'button-mode-changed',
                                                            widgetId: props.widgetId,
                                                            queryItemConfigId: queryItem.configId,
                                                            previousMode,
                                                            newMode,
                                                            accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                                                            timestamp: new Date().toISOString()
                                                        });
                                                        // If switching FROM "New" TO "Remove from" mode and we have current results,
                                                        // merge them with existing accumulated records before changing mode
                                                        // (same pattern as "Add to" mode)
                                                        if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                            newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection &&
                                                            recordsRef.current &&
                                                            recordsRef.current.length > 0 &&
                                                            outputDS &&
                                                            onAccumulatedRecordsChange) {
                                                            const currentRecords = recordsRef.current;
                                                            const existingAccumulated = accumulatedRecords || [];
                                                            // Merge current results with existing accumulated records
                                                            const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, currentRecords, existingAccumulated);
                                                            debugLogger.log('RESULTS-MODE', {
                                                                event: 'capturing-current-results-on-mode-switch-to-remove',
                                                                widgetId: props.widgetId,
                                                                previousMode,
                                                                newMode,
                                                                currentRecordsCount: currentRecords.length,
                                                                existingAccumulatedCount: existingAccumulated.length,
                                                                mergedRecordsCount: mergedRecords.length
                                                            });
                                                            onAccumulatedRecordsChange(mergedRecords);
                                                        }
                                                        if (onResultsModeChange) {
                                                            onResultsModeChange(newMode);
                                                        }
                                                    }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection, "aria-label": `${getI18nMessage('removeFromCurrentResults')}: ${((_d = getI18nMessage('resultsModeDesc').split('\n')[3]) === null || _d === void 0 ? void 0 : _d.trim()) || ''}`, title: (!accumulatedRecords || accumulatedRecords.length === 0)
                                                        ? getI18nMessage('resultsModeDisabledRemove')
                                                        : getI18nMessage('removeFromCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeRemove') })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `results-mode-description-${props.widgetId}`, className: "sr-only", "aria-live": "polite", role: "status", children: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection
                                                ? getI18nMessage('createNewResults')
                                                : resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection
                                                    ? getI18nMessage('addToCurrentResults')
                                                    : getI18nMessage('removeFromCurrentResults') })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
            `, children: [enabled && dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  min-height: 0;
                  overflow: hidden;
                `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_form__WEBPACK_IMPORTED_MODULE_6__.QueryTaskForm, Object.assign({}, otherProps, { configId: queryItem.configId, outputDS: outputDS, datasourceReady: dataSource != null, spatialFilterEnabled: spatialFilterEnabled, dataActionFilter: dataActionFilter, onFormSubmit: handleFormSubmit, initialInputValue: initialInputValue, onHashParameterUsed: onHashParameterUsed, queryItemShortId: queryItem.shortId })) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.DataSourceTip, { widgetId: props.widgetId, useDataSource: queryItem.useDataSource, showMessage: true, onStatusChange: handleStatusChange, onDataSourceCreated: handleDataSourceCreated })] })] }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'results', title: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { children: [getI18nMessage('resultsTab'), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  margin-left: 6px;
                  font-size: 0.75rem;
                  opacity: 0.7;
                `, children: ["(", resultCount, ")"] }))] }), disabled: resultCount === 0, children: resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'results'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 0;
                height: 100%;
                padding-top: 0 !important;
              `, onClick: (e) => {
                                // Prevent clicks from bubbling up when Results tab is active
                                if (activeTab === 'results') {
                                    e.stopPropagation();
                                }
                            }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result__WEBPACK_IMPORTED_MODULE_7__.QueryTaskResult, { widgetId: props.widgetId, queryItem: queryItem, queryParams: queryParamRef.current, resultCount: resultCount, maxPerPage: (_e = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(dataSource), records: recordsRef.current, defaultPageSize: defaultPageSize, outputDS: outputDS, runtimeZoomToSelected: lastRuntimeZoomToSelectedRef.current, onNavBack: (clearResults = false) => {
                                    // Handle navigation from QueryTaskResult
                                    // If clearResults is true, clear everything and go to query tab
                                    // If false, just switch to query tab without clearing
                                    if (clearResults) {
                                        hasSelectedRecordsRef.current = false; // Reset flag when clearing
                                        navToForm(true);
                                    }
                                    else {
                                        // Just switch tabs, don't clear results
                                        // Mark as manual switch to prevent auto-switch useEffect from interfering
                                        manualTabSwitchRef.current = true;
                                        setActiveTab('query');
                                        // Reset the flag after a short delay
                                        setTimeout(() => {
                                            manualTabSwitchRef.current = false;
                                        }, 100);
                                    }
                                } }, `${queryItem.configId}-${queryExecutionKeyRef.current}`) })) })] }), (selectionError || zoomError) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 0 16px;
          margin-top: 8px;
        `, children: [selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) })), zoomError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: zoomError, onDismiss: () => setZoomError(null) }))] })), stage === 2 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1000;
          background-color: rgba(255, 255, 255, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_loading_result__WEBPACK_IMPORTED_MODULE_15__.LoadingResult, {}) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-utils.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineFields: () => (/* binding */ combineFields),
/* harmony export */   executeCountQuery: () => (/* binding */ executeCountQuery),
/* harmony export */   executeQuery: () => (/* binding */ executeQuery),
/* harmony export */   generateQueryParams: () => (/* binding */ generateQueryParams),
/* harmony export */   getPopupTemplate: () => (/* binding */ getPopupTemplate)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



function combineFields(resultDisplayFields, resultTitleExpression, idField) {
    const fields = new Set();
    resultDisplayFields === null || resultDisplayFields === void 0 ? void 0 : resultDisplayFields.forEach(item => fields.add(item));
    if (resultTitleExpression) {
        const templates = resultTitleExpression.match(/\{\w*\}/g);
        if ((templates === null || templates === void 0 ? void 0 : templates.length) > 0) {
            templates.forEach(item => fields.add(item.substring(1, item.length - 1)));
        }
    }
    if (idField) {
        fields.add(idField);
    }
    return Array.from(fields);
}
function getPopupTemplate(outputDS, queryItem) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const { resultFieldsType, resultDisplayFields, resultTitleExpression = '' } = queryItem;
        const currentOriginDs = outputDS.getOriginDataSources()[0];
        const popupInfo = currentOriginDs.getPopupInfo();
        if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
            let fields;
            if (resultDisplayFields == null) {
                const fieldsInContent = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.getFieldInfosInPopupContent)(popupInfo);
                if (fieldsInContent.length > 0) {
                    const uniqueFields = new Set(fieldsInContent.map(ele => ele.fieldName));
                    fields = Array.from(uniqueFields);
                }
                else {
                    // return all fields by default
                    const allFieldsSchema = outputDS.getSchema();
                    fields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
                }
            }
            else {
                fields = resultDisplayFields.asMutable({ deep: true });
            }
            if (popupInfo) {
                const fieldInfos = [];
                fields.forEach(field => {
                    const fieldInfo = popupInfo.fieldInfos.find(fieldInfo => fieldInfo.fieldName === field);
                    if (fieldInfo) {
                        fieldInfo.visible = true;
                        fieldInfos.push(fieldInfo);
                    }
                    else {
                        fieldInfos.push({
                            fieldName: field,
                            label: field
                        });
                    }
                });
                return {
                    popupTemplate: {
                        fieldInfos,
                        content: [{
                                type: 'fields'
                            }],
                        title: resultTitleExpression
                    }
                };
            }
            return {
                popupTemplate: {
                    fieldInfos: fields.map(field => ({
                        fieldName: field,
                        label: field
                    })),
                    content: [{
                            type: 'fields'
                        }],
                    title: resultTitleExpression
                }
            };
        }
        // the source layer will provide popup info
        let layerObject;
        if (currentOriginDs.layer) {
            layerObject = currentOriginDs.layer;
        }
        else {
            layerObject = yield currentOriginDs.createJSAPILayerByDataSource();
        }
        if (layerObject) {
            yield layerObject.load();
        }
        return { defaultPopupTemplate: ((_a = layerObject === null || layerObject === void 0 ? void 0 : layerObject.associatedLayer) === null || _a === void 0 ? void 0 : _a.defaultPopupTemplate) || (layerObject === null || layerObject === void 0 ? void 0 : layerObject.defaultPopupTemplate) };
    });
}
function generateQueryParams(outputDS, sqlExpr, spatialFilter, queryItem, page, pageSize) {
    var _a, _b, _c;
    const currentQueryDsJson = outputDS.getDataSourceJson();
    const currentOriginDs = outputDS.getOriginDataSources()[0];
    const isLocalDs = currentQueryDsJson === null || currentQueryDsJson === void 0 ? void 0 : currentQueryDsJson.isDataInDataSourceInstance;
    if (isLocalDs) {
        outputDS.setSourceRecords(currentOriginDs.getSourceRecords());
    }
    const { useAttributeFilter, useSpatialFilter, sortOptions, resultFieldsType, resultDisplayFields, resultTitleExpression } = queryItem;
    let outputFields = resultDisplayFields;
    if (resultDisplayFields == null) {
        // return all fields by default
        const allFieldsSchema = outputDS.getSchema();
        outputFields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
    }
    const mergedQueryParams = outputDS.mergeQueryParams((_a = currentOriginDs.getCurrentQueryParams()) !== null && _a !== void 0 ? _a : {}, {
        where: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpr, outputDS).sql : '1=1',
        sqlExpression: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? sqlExpr : null
    });
    // compose query params for query
    const queryParams = Object.assign({ 
        // url: ds.url,
        returnGeometry: true, page,
        pageSize }, mergedQueryParams);
    if (useSpatialFilter && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.geometry)) {
        const { geometry, relation = _config__WEBPACK_IMPORTED_MODULE_1__.SpatialRelation.Intersect, buffer } = spatialFilter;
        const spatialQueryParams = {
            geometryType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(geometry.type),
            geometry: geometry.toJSON(),
            spatialRel: _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPISpatialRelToDsSpatialRel[relation],
            distance: buffer === null || buffer === void 0 ? void 0 : buffer.distance,
            units: (buffer === null || buffer === void 0 ? void 0 : buffer.unit) ? _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPIUnitToDsUnit[buffer.unit] : undefined
        };
        Object.assign(queryParams, spatialQueryParams);
    }
    if ((sortOptions === null || sortOptions === void 0 ? void 0 : sortOptions.length) > 0) {
        Object.assign(queryParams, {
            orderByFields: sortOptions.map(item => `${item.jimuFieldName} ${item.order}`)
        });
    }
    if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
        const fields = combineFields(outputFields, resultTitleExpression, outputDS.getIdField());
        Object.assign(queryParams, {
            outFields: fields
        });
    }
    else {
        // use popup setting
        const popupInfo = currentOriginDs.getPopupInfo();
        // popupInfo may have expressions in its fieldInfos
        const fieldNames = Object.values((_b = currentOriginDs.getSchema().fields) !== null && _b !== void 0 ? _b : {}).map(f => f.name);
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-boolean-literal-compare
        const validFieldInfos = (_c = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) === null || _c === void 0 ? void 0 : _c.filter(fieldInfo => fieldInfo.visible !== false && fieldNames.includes(fieldInfo.fieldName));
        Object.assign(queryParams, {
            outFields: validFieldInfos === null || validFieldInfos === void 0 ? void 0 : validFieldInfos.map(fieldInfo => fieldInfo.fieldName)
        });
    }
    return queryParams;
}
function executeCountQuery(widgetId, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield outputDS.loadCount(queryParams, { widgetId, refresh: true });
        return result != null ? result : 0;
    });
}
function executeQuery(widgetId, queryItem, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const popupInfo = outputDS.getPopupInfo();
        const layerDefinition = outputDS.getLayerDefinition();
        const getDefaultFieldInfos = () => {
            var _a;
            return [
                { fieldName: (_a = layerDefinition === null || layerDefinition === void 0 ? void 0 : layerDefinition.objectIdField) !== null && _a !== void 0 ? _a : 'objectid', label: 'OBJECTID', tooltip: '', visible: true }
            ];
        };
        const fieldInfos = ((fieldInfos) => (fieldInfos.length ? fieldInfos : getDefaultFieldInfos()))(((popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) || []).filter((i) => i.visible));
        // const fields = outputDS.getSchema()?.fields
        // let selectedFieldNames
        // if (queryItem.resultFieldsType === FieldsType.SelectAttributes) {
        //   selectedFieldNames = [].concat(queryItem.resultDisplayFields, queryItem.resultTitleFields)
        // } else {
        //   selectedFieldNames = fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        // }
        // const selectedFieldJimuNames = fields
        //   ? Object.keys(fields).filter((jimuName) => selectedFieldNames.includes(fields[jimuName].name))
        //   : []
        // outputDS.setSelectedFields(selectedFieldJimuNames)
        let records = yield outputDS.load(queryParams, { widgetId });
        if (records == null) {
            records = [];
        }
        const originDs = outputDS.getOriginDataSources()[0];
        const layerObject = yield getLayerObject(originDs);
        records.forEach((record) => {
            const feature = record.feature;
            if (layerObject) {
                feature.sourceLayer = layerObject.associatedLayer || layerObject;
            }
            feature.layer = feature.sourceLayer;
        });
        const queryResult = {
            records,
            fields: fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        };
        // publish message
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordSetChangeMessage(widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.RecordSetChangeType.CreateUpdate, [{
                records: outputDS.getAllLoadedRecords(),
                fields: queryResult.fields,
                dataSource: outputDS,
                name: outputDS.id,
                label: outputDS.getLabel()
            }]);
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        return queryResult;
    });
}
function getLayerObject(dataSource) {
    return __awaiter(this, void 0, void 0, function* () {
        const layerObject = yield dataSource.createJSAPILayerByDataSource();
        // layerObject may be undefined if the data source is added by URL
        if (layerObject) {
            yield layerObject.load();
        }
        return layerObject;
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearAccumulatedResults: () => (/* binding */ clearAccumulatedResults),
/* harmony export */   createAccumulatedResultsDataSource: () => (/* binding */ createAccumulatedResultsDataSource),
/* harmony export */   getRecordKey: () => (/* binding */ getRecordKey),
/* harmony export */   mergeResultsIntoAccumulated: () => (/* binding */ mergeResultsIntoAccumulated),
/* harmony export */   removeRecordsFromOriginSelections: () => (/* binding */ removeRecordsFromOriginSelections),
/* harmony export */   removeResultsFromAccumulated: () => (/* binding */ removeResultsFromAccumulated)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing results accumulation in QuerySimple widget.
 * Handles "Add to" and "Remove from" modes for accumulating query results.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Generates a composite key for a record that includes both origin data source ID and objectId.
 * This ensures uniqueness across different layers that may have the same objectId.
 *
 * @param record - The feature data record
 * @param outputDS - The output data source containing the record
 * @returns Composite key string: `${originDSId}_${objectId}`
 */
function getRecordKey(record, outputDS) {
    var _a;
    const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
    const originDSId = (originDS === null || originDS === void 0 ? void 0 : originDS.id) || outputDS.id; // Fallback to outputDS if no origin
    const objectId = record.getId();
    const key = `${originDSId}_${objectId}`;
    debugLogger.log('RESULTS-MODE', {
        event: 'record-key-generated',
        originDSId,
        objectId,
        key,
        hasOriginDS: !!originDS
    });
    return key;
}
/**
 * Creates an accumulated results data source for storing merged query results.
 * This data source is widget-level and persists across multiple queries.
 *
 * @param widgetId - The widget ID
 * @param originDS - The origin data source to use as the base
 * @returns The created accumulated results data source
 */
function createAccumulatedResultsDataSource(widgetId, originDS) {
    return __awaiter(this, void 0, void 0, function* () {
        const accumulatedDSId = `${widgetId}_accumulated_results`;
        debugLogger.log('RESULTS-MODE', {
            event: 'creating-accumulated-ds',
            widgetId,
            accumulatedDSId,
            originDSId: originDS.id
        });
        // Check if data source already exists
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        let accumulatedDS = dsManager.getDataSource(accumulatedDSId);
        if (accumulatedDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-ds-already-exists',
                accumulatedDSId
            });
            return accumulatedDS;
        }
        // Get origin data source JSON to create output data source
        const originDataSourceJson = originDS.getDataSourceJson();
        // Create output data source JSON similar to how query items create output DS
        const outputDataSourceJson = {
            id: accumulatedDSId,
            label: 'Accumulated Results',
            type: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.type,
            geometryType: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.geometryType,
            url: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.url,
            itemId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.itemId,
            portalUrl: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.portalUrl,
            originDataSources: [{
                    dataSourceId: originDS.id,
                    mainDataSourceId: originDS.id,
                    rootDataSourceId: originDS.id
                }],
            layerId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.layerId,
            isDataInDataSourceInstance: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.isDataInDataSourceInstance,
            isOutputFromWidget: true
        };
        // Create the data source using DataSourceManager
        // Note: This follows the pattern from setting.tsx for creating output data sources
        accumulatedDS = dsManager.createDataSourceByDataSourceJson(outputDataSourceJson);
        // Set initial status
        accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        debugLogger.log('RESULTS-MODE', {
            event: 'accumulated-ds-created',
            accumulatedDSId,
            originDSId: originDS.id,
            status: accumulatedDS.getStatus()
        });
        return accumulatedDS;
    });
}
/**
 * Merges new query results with existing records.
 * Deduplicates records using composite keys (originDSId_objectId).
 *
 * This function merges new records with existing records that were captured
 * before the query executed. The caller is responsible for storing the merged
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param newRecords - New records to merge in
 * @param existingRecords - Existing records captured before query execution (optional, defaults to empty array)
 * @returns Array of all merged records (existing + new unique records)
 */
function mergeResultsIntoAccumulated(outputDS, newRecords, existingRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'merging-results-start',
        outputDSId: outputDS.id,
        existingRecordsCount: existingRecords.length,
        newRecordsCount: newRecords.length
    });
    // Build Set of existing record keys for fast lookup
    const existingKeys = new Set(existingRecords.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'existing-records-check',
        existingRecordsCount: existingRecords.length,
        existingKeysCount: existingKeys.size
    });
    // Filter new records to only include those not already in output DS
    const uniqueNewRecords = newRecords.filter(record => {
        const key = getRecordKey(record, outputDS);
        const isDuplicate = existingKeys.has(key);
        if (isDuplicate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'duplicate-record-skipped',
                key,
                objectId: record.getId()
            });
        }
        return !isDuplicate;
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'deduplication-complete',
        newRecordsCount: newRecords.length,
        uniqueNewRecordsCount: uniqueNewRecords.length,
        duplicatesSkipped: newRecords.length - uniqueNewRecords.length
    });
    // Merge records
    const mergedRecords = [...existingRecords, ...uniqueNewRecords];
    debugLogger.log('RESULTS-MODE', {
        event: 'merge-complete',
        totalRecordsAfterMerge: mergedRecords.length,
        existingCount: existingRecords.length,
        newUniqueCount: uniqueNewRecords.length
    });
    return mergedRecords;
}
/**
 * Removes matching records from widget-level accumulated records.
 * Matches records using composite keys (originDSId_objectId).
 *
 * This function removes records from existing accumulated records that were captured
 * before the query executed. The caller is responsible for storing the remaining
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param recordsToRemove - Records to remove (from query results)
 * @param existingAccumulatedRecords - Existing accumulated records captured before query execution (optional, defaults to empty array)
 * @returns Array of remaining records after removal
 */
function removeResultsFromAccumulated(outputDS, recordsToRemove, existingAccumulatedRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-results-start',
        outputDSId: outputDS.id,
        recordsToRemoveCount: recordsToRemove.length,
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length
    });
    // If no accumulated records, nothing to remove
    if (existingAccumulatedRecords.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-accumulated-records-to-remove',
            outputDSId: outputDS.id
        });
        return [];
    }
    // If no records to remove, return existing records unchanged
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove',
            outputDSId: outputDS.id,
            existingAccumulatedRecordsCount: existingAccumulatedRecords.length
        });
        return existingAccumulatedRecords;
    }
    // Build Set of keys to remove for fast lookup
    const removeKeys = new Set(recordsToRemove.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'remove-keys-built',
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length,
        removeKeysCount: removeKeys.size
    });
    // Filter out records that match keys to remove
    const remainingRecords = [];
    const removedRecords = [];
    existingAccumulatedRecords.forEach(record => {
        var _a, _b, _c, _d;
        const key = getRecordKey(record, outputDS);
        const shouldRemove = removeKeys.has(key);
        if (shouldRemove) {
            removedRecords.push(record);
            debugLogger.log('RESULTS-MODE', {
                event: 'record-marked-for-removal',
                key,
                objectId: record.getId(),
                originDSId: ((_d = (_c = (_b = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record)) === null || _b === void 0 ? void 0 : _b.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.id) || 'unknown'
            });
        }
        else {
            remainingRecords.push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removal-complete',
        recordsRemoved: removedRecords.length,
        remainingRecordsCount: remainingRecords.length,
        recordsToRemoveCount: recordsToRemove.length,
        matchedRecordsCount: removedRecords.length,
        unmatchedRecordsCount: recordsToRemove.length - removedRecords.length
    });
    return remainingRecords;
}
/**
 * Removes records from origin data source selections.
 * Groups records by their origin data source and updates each origin DS's selection separately.
 * This ensures map selection is updated correctly when records come from multiple origin layers.
 *
 * @param widgetId - The widget ID for publishing messages
 * @param recordsToRemove - Records to remove from selection
 * @param outputDS - The output data source (used for key generation)
 */
function removeRecordsFromOriginSelections(widgetId, recordsToRemove, outputDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-start',
        widgetId,
        recordsToRemoveCount: recordsToRemove.length,
        outputDSId: outputDS.id
    });
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove-from-selection',
            widgetId
        });
        return;
    }
    // Group records by their origin data source
    const recordsByOriginDS = new Map();
    recordsToRemove.forEach(record => {
        var _a, _b, _c;
        const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
        let originDS = null;
        if (recordDS) {
            originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
        }
        else {
            // Fallback: try to get origin from outputDS
            originDS = ((_c = outputDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || null;
        }
        if (originDS) {
            if (!recordsByOriginDS.has(originDS)) {
                recordsByOriginDS.set(originDS, []);
            }
            recordsByOriginDS.get(originDS).push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'records-grouped-by-origin',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        recordsByOriginDS: Array.from(recordsByOriginDS.entries()).map(([ds, records]) => ({
            originDSId: ds.id,
            recordCount: records.length
        }))
    });
    // For each origin DS, get current selection and remove matching records
    recordsByOriginDS.forEach((recordsToRemoveForOrigin, originDS) => {
        try {
            // Get current selected records from this origin DS
            const currentSelectedRecords = originDS.getSelectedRecords() || [];
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'processing-origin-ds-removal',
                widgetId,
                originDSId: originDS.id,
                currentSelectedCount: currentSelectedRecords.length,
                recordsToRemoveCount: recordsToRemoveForOrigin.length
            });
            // Build Set of IDs to remove for fast lookup
            const idsToRemove = new Set(recordsToRemoveForOrigin.map(record => record.getId()));
            // Filter out records that match IDs to remove
            const remainingRecords = currentSelectedRecords.filter(record => {
                const recordId = record.getId();
                return !idsToRemove.has(recordId);
            });
            const remainingIds = remainingRecords.map(record => record.getId());
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-filtered',
                widgetId,
                originDSId: originDS.id,
                removedCount: currentSelectedRecords.length - remainingRecords.length,
                remainingCount: remainingRecords.length
            });
            // Update selection in origin DS
            if (typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(remainingIds, remainingRecords);
            }
            // Publish selection change message for this origin DS
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, remainingRecords, [originDS.id]));
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-selection-updated',
                widgetId,
                originDSId: originDS.id,
                remainingRecordsCount: remainingRecords.length,
                messagePublished: true
            });
        }
        catch (error) {
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-error',
                widgetId,
                originDSId: originDS.id,
                error: error instanceof Error ? error.message : 'Unknown error',
                errorStack: error instanceof Error ? error.stack : undefined
            });
            console.error(`Error removing records from origin DS ${originDS.id}:`, error);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-complete',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        totalRecordsRemoved: recordsToRemove.length
    });
}
/**
 * Clears all records from the accumulated results data source.
 *
 * @param accumulatedDS - The accumulated results data source to clear
 */
function clearAccumulatedResults(accumulatedDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'clearing-accumulated-results',
        accumulatedDSId: accumulatedDS.id
    });
    // Set status to NotReady to clear records
    accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    // Clear any loaded records if possible
    // Note: May need to use DataSourceManager methods depending on ExB API
    debugLogger.log('RESULTS-MODE', {
        event: 'accumulated-results-cleared',
        accumulatedDSId: accumulatedDS.id
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearSelectionInDataSources: () => (/* binding */ clearSelectionInDataSources),
/* harmony export */   findClearResultsButton: () => (/* binding */ findClearResultsButton),
/* harmony export */   getOriginDataSource: () => (/* binding */ getOriginDataSource),
/* harmony export */   publishSelectionMessage: () => (/* binding */ publishSelectionMessage),
/* harmony export */   selectRecordsAndPublish: () => (/* binding */ selectRecordsAndPublish),
/* harmony export */   selectRecordsInDataSources: () => (/* binding */ selectRecordsInDataSources)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/**
 * Utility functions for managing feature selection in QuerySimple widget.
 * Consolidates repeated selection logic to follow DRY principles.
 */

/**
 * Gets the origin data source from an output data source.
 * @param outputDS - The output data source
 * @returns The origin data source, or null if not available
 */
function getOriginDataSource(outputDS) {
    if (!outputDS)
        return null;
    const originDataSources = outputDS.getOriginDataSources();
    return (originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0]) || null;
}
/**
 * Selects records in both the origin data source and output data source.
 * This is the standard pattern used throughout the widget for selection.
 *
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Optional array of FeatureDataRecord objects for proper highlighting
 */
function selectRecordsInDataSources(outputDS, recordIds, records) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    // Select in origin data source (the actual layer)
    if (originDS && typeof originDS.selectRecordsByIds === 'function') {
        originDS.selectRecordsByIds(recordIds, records);
    }
    // Also select in outputDS for widget's internal state
    if (typeof outputDS.selectRecordsByIds === 'function') {
        outputDS.selectRecordsByIds(recordIds, records);
    }
}
/**
 * Clears selection in both the origin data source and output data source.
 *
 * @param outputDS - The output data source
 */
function clearSelectionInDataSources(outputDS) {
    selectRecordsInDataSources(outputDS, []);
}
/**
 * Publishes a selection change message for the given records and data sources.
 *
 * @param widgetId - The widget ID
 * @param records - Array of FeatureDataRecord objects (empty array to clear)
 * @param outputDS - The output data source
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS = false) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    if (originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [originDS.id]));
    }
    else if (alsoPublishToOutputDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
    // Optionally publish to outputDS as well (for some edge cases)
    if (alsoPublishToOutputDS && originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
}
/**
 * Selects records and publishes the selection message in one call.
 * This is the most common pattern - selecting records and notifying the map.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Array of FeatureDataRecord objects for proper highlighting
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function selectRecordsAndPublish(widgetId, outputDS, recordIds, records, alsoPublishToOutputDS = false) {
    selectRecordsInDataSources(outputDS, recordIds, records);
    publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS);
}
/**
 * Finds the "Clear results" button in the DOM.
 * Used when programmatically triggering the clear action.
 *
 * @returns The clear button element, or null if not found
 */
function findClearResultsButton() {
    return document.querySelector('button[aria-label="Clear results"]');
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'QuerySimple',
    reset: 'Reset',
    searchLayer: 'Search Layer',
    apply: 'Search',
    noDataAvailable: 'Error in loading data',
    noQueryItem: 'No query',
    newQueryHint: 'Add content by clicking the "{label}" button on the configuration panel',
    attributeFilter: 'Attribute filter',
    spatialFilter: 'Spatial filter',
    spatialFilterType_CurrentMapExtent: 'Current map extent',
    spatialFilterType_InteractiveDrawMode: 'Drawn graphic',
    results: 'Results',
    featuresDisplayed: 'Features displayed',
    clearResult: 'Clear results',
    checkResult: 'Check results',
    mapMustBeVisible: 'Map must be visible',
    chooseFilterType: 'Choose the filter type',
    chooseGeometryType: 'Choose the geometry type',
    clearDrawing: 'Clear the graphic when applying',
    featureFromDs: 'Selecting features from data source',
    featureFromMap: 'Geometries from a map',
    chooseFilterLayer: 'Choose a filter layer',
    selectedRecords: '{num} records are selected for the filter',
    spatialNotAvailable: 'Spatial filter is not available here.',
    spatialNotAvailableDesc: 'Spatial filter is not supported for a data source that already contains a spatial query.',
    preconfigured: 'Preconfigured',
    runtime: 'Runtime',
    selectLoaded: 'Select loaded',
    retrieving: 'Retrieving query results...',
    zoomToSelected: 'Zoom to selected',
    queryTab: 'Query',
    resultsTab: 'Results',
    expandAll: 'Expand all',
    collapseAll: 'Collapse all',
    addToMap: 'Add to map',
    resultsMode: 'Results mode',
    createNewResults: 'Create new results',
    addToCurrentResults: 'Add to current results',
    removeFromCurrentResults: 'Remove from current results',
    resultsModeDisabledRemove: 'Remove from current results (no accumulated results)',
    resultsModeDesc: 'Controls how query results are combined:\n New: Each query replaces previous results\n Add: New results are added to existing results\n Remove: Matching results are removed from existing results',
    resultsModeNew: 'New',
    resultsModeAdd: 'Add',
    resultsModeRemove: 'Remove'
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx":
/*!****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoHeight: () => (/* binding */ useAutoHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/** @jsx jsx */



function useAutoHeight() {
    const layoutInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_widget_context__WEBPACK_IMPORTED_MODULE_2__.QueryWidgetContext);
    let layoutId;
    let layoutItemId;
    if (layoutInfo.includes(':')) {
        const r = layoutInfo.split(':');
        layoutId = r[0];
        layoutItemId = r[1];
    }
    const isAuto = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c, _d;
        const layoutItem = (_b = (_a = state.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        return ((_d = (_c = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _c === void 0 ? void 0 : _c.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    });
    return isAuto;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-config.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getWidgetRuntimeDataMap: () => (/* binding */ getWidgetRuntimeDataMap)
/* harmony export */ });
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__);






const getWidgetRuntimeDataMap = () => ({
    iconMap: {
        iconQuery: __webpack_require__(/*! ../../icon.svg */ "./your-extensions/widgets/query-simple/icon.svg"),
        iconWarning: (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default()),
        iconError: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default()),
        arrowNavBack: (jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()),
        arrowRight: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        toolDelete: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        iconMore: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default())
    }
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryWidgetContext: () => (/* binding */ QueryWidgetContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryWidgetContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(null);


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.0.0',
                description: 'The first version.',
                upgrader: (oldConfig) => {
                    return oldConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version.ts":
/*!*************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WIDGET_VERSION: () => (/* binding */ WIDGET_VERSION)
/* harmony export */ });
/**
 * Widget version number.
 * Update this when releasing a new version of the widget.
 * This version is displayed in the widget footer for user reference.
 */
const WIDGET_VERSION = '1.19.0';


/***/ }),

/***/ "@emotion/react/jsx-runtime":
/*!************************************!*\
  !*** external "jimu-core/emotion" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "widgets/shared-code/common":
/*!*********************************************!*\
  !*** external "widgets/shared-code/common" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/query-simple/src/version-manager.ts");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_inline__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-list-inline */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */











const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for QuerySimple to notify HelperSimple of selection changes.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
/**
 * Custom event name for QuerySimple to notify HelperSimple of widget open/close state.
 */
const QUERYSIMPLE_WIDGET_STATE_EVENT = 'querysimple-widget-state-changed';
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.state = {
            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection // Default mode
        };
        this.widgetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.visibilityObserver = null;
        this.visibilityCheckInterval = null;
        /**
         * Notifies HelperSimple of selection changes.
         * Called by QueryTaskResult when selection is made.
         *
         * @param recordIds - Array of selected record IDs
         * @param dataSourceId - Optional data source ID
         */
        this.notifyHelperSimpleOfSelection = (recordIds, dataSourceId) => {
            const { id } = this.props;
            const event = new CustomEvent(QUERYSIMPLE_SELECTION_EVENT, {
                detail: {
                    widgetId: id,
                    recordIds,
                    dataSourceId
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * Sets up visibility detection to track when the widget panel is open/closed.
         * Uses IntersectionObserver if available, falls back to periodic checking.
         */
        this.setupVisibilityDetection = () => {
            // Wait for next tick to ensure ref is set
            setTimeout(() => {
                if (!this.widgetRef.current) {
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup-failed',
                        widgetId: this.props.id,
                        reason: 'widget-ref-not-available'
                    });
                    return;
                }
                const element = this.widgetRef.current;
                // Method 1: IntersectionObserver (most efficient)
                if ('IntersectionObserver' in window) {
                    this.visibilityObserver = new IntersectionObserver((entries) => {
                        const entry = entries[0];
                        const isVisible = entry.isIntersecting && entry.intersectionRatio > 0;
                        // Only log if state changed
                        if (this.state.isPanelVisible !== isVisible) {
                            this.setState({ isPanelVisible: isVisible });
                            this.logVisibilityChange(isVisible, 'IntersectionObserver');
                            this.notifyHelperSimpleOfPanelState(isVisible);
                        }
                    }, {
                        threshold: [0, 0.1, 1.0], // Trigger at 0%, 10%, and 100% visibility
                        rootMargin: '0px'
                    });
                    this.visibilityObserver.observe(element);
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup',
                        widgetId: this.props.id,
                        method: 'IntersectionObserver'
                    });
                }
                else {
                    // Method 2: Fallback to periodic checking
                    this.visibilityCheckInterval = window.setInterval(() => {
                        const isVisible = this.checkVisibility();
                        if (this.state.isPanelVisible !== isVisible) {
                            this.setState({ isPanelVisible: isVisible });
                            this.logVisibilityChange(isVisible, 'periodic-check');
                            this.notifyHelperSimpleOfPanelState(isVisible);
                        }
                    }, 250); // Check every 250ms
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup',
                        widgetId: this.props.id,
                        method: 'periodic-check'
                    });
                }
            }, 100);
        };
        /**
         * Cleans up visibility detection observers/intervals.
         */
        this.cleanupVisibilityDetection = () => {
            if (this.visibilityObserver) {
                this.visibilityObserver.disconnect();
                this.visibilityObserver = null;
            }
            if (this.visibilityCheckInterval !== null) {
                clearInterval(this.visibilityCheckInterval);
                this.visibilityCheckInterval = null;
            }
        };
        /**
         * Checks if the widget element is currently visible.
         * Fallback method when IntersectionObserver is not available.
         */
        this.checkVisibility = () => {
            if (!this.widgetRef.current)
                return false;
            const element = this.widgetRef.current;
            const style = window.getComputedStyle(element);
            const rect = element.getBoundingClientRect();
            const isVisible = (style.display !== 'none' &&
                style.visibility !== 'hidden' &&
                style.opacity !== '0' &&
                rect.width > 0 &&
                rect.height > 0 &&
                rect.top < window.innerHeight &&
                rect.bottom > 0 &&
                rect.left < window.innerWidth &&
                rect.right > 0);
            return isVisible;
        };
        /**
         * Tracks selection changes from query-result.
         * In "Add to" or "Remove from" modes, uses accumulated records count for restoration.
         */
        this.handleSelectionChange = (event) => {
            var _a;
            const customEvent = event;
            const { id } = this.props;
            // Only track if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const hasSelection = customEvent.detail.recordIds && customEvent.detail.recordIds.length > 0;
            // In "Add to" or "Remove from" mode, use accumulated records count for restoration
            // The accumulated records are the source of truth for what should be restored
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            const accumulatedRecordsCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const selectionCount = isAccumulationMode && accumulatedRecordsCount > 0
                ? accumulatedRecordsCount
                : (hasSelection ? customEvent.detail.recordIds.length : 0);
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-updating-state',
                widgetId: id,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelectionFromEvent: hasSelection,
                accumulatedRecordsCountBefore: accumulatedRecordsCount,
                calculatedSelectionCount: selectionCount,
                'will-set-hasSelection': selectionCount > 0,
                'will-set-lastSelection': hasSelection && !!customEvent.detail.outputDsId && !!customEvent.detail.queryItemConfigId,
                decisionLogic: {
                    'isAccumulationMode': isAccumulationMode,
                    'accumulatedRecordsCount > 0': accumulatedRecordsCount > 0,
                    'use-accumulated-count': isAccumulationMode && accumulatedRecordsCount > 0,
                    'use-event-count': !(isAccumulationMode && accumulatedRecordsCount > 0)
                }
            });
            this.setState({
                hasSelection: selectionCount > 0,
                selectionRecordCount: selectionCount,
                // Store lastSelection for compatibility, but restoration will use accumulatedRecords in Add/Remove modes
                lastSelection: hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? {
                        recordIds: customEvent.detail.recordIds,
                        outputDsId: customEvent.detail.outputDsId,
                        queryItemConfigId: customEvent.detail.queryItemConfigId
                    }
                    : undefined
            });
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-state-updated',
                widgetId: id,
                'new-hasSelection': selectionCount > 0,
                'new-selectionRecordCount': selectionCount,
                'new-lastSelection-recordIds-count': hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? customEvent.detail.recordIds.length
                    : 0,
                'note': 'lastSelection-only-contains-current-query-records-not-all-accumulated-records'
            });
        };
        /**
         * Handles restore request when identify popup closes.
         * Only restores if widget panel is open.
         * In "Add to" or "Remove from" modes, restores all accumulated records.
         */
        this.handleRestoreOnIdentifyClose = (event) => {
            var _a, _b, _c;
            const customEvent = event;
            const { id } = this.props;
            // Only handle if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const isWidgetOpen = this.state.isPanelVisible === true;
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restore-requested',
                widgetId: id,
                isWidgetOpen,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelection: this.state.hasSelection || false,
                accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                hasLastSelection: !!this.state.lastSelection,
                lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                outputDsId: customEvent.detail.outputDsId,
                queryItemConfigId: customEvent.detail.queryItemConfigId
            });
            // Only restore if widget is open
            if (!isWidgetOpen) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-widget-closed',
                    widgetId: id,
                    recordCount: customEvent.detail.recordIds.length
                });
                return;
            }
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-found-accumulated-records',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode,
                    'condition-result': isAccumulationMode
                });
            }
            // In Add/Remove modes, check accumulated records instead of lastSelection
            if (isAccumulationMode) {
                if (!this.state.hasSelection || !this.state.accumulatedRecords || this.state.accumulatedRecords.length === 0) {
                    debugLogger.log('RESTORE', {
                        event: 'identify-popup-closed-restore-skipped-no-accumulated-records',
                        widgetId: id,
                        hasSelection: this.state.hasSelection,
                        accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                        'hypothesis': 'hasSelection-is-false-or-no-accumulated-records',
                        'maybe-hasSelection-should-be-based-on-accumulated-records': true
                    });
                    return;
                }
                // Restore all accumulated records (grouped by origin DS)
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restoring-accumulated-records',
                    widgetId: id,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length
                });
                this.addSelectionToMap();
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // For "New" mode, use original validation logic
            // Check if we have matching selection state
            if (!this.state.hasSelection || !this.state.lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-no-selection',
                    widgetId: id,
                    hasSelection: this.state.hasSelection,
                    hasLastSelection: !!this.state.lastSelection
                });
                return;
            }
            // Verify the outputDsId matches
            if (this.state.lastSelection.outputDsId !== customEvent.detail.outputDsId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-ds-mismatch',
                    widgetId: id,
                    ourOutputDsId: this.state.lastSelection.outputDsId,
                    requestedOutputDsId: customEvent.detail.outputDsId
                });
                return;
            }
            // Verify the queryItemConfigId matches (optional but good to check)
            if (this.state.lastSelection.queryItemConfigId !== customEvent.detail.queryItemConfigId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-query-mismatch',
                    widgetId: id,
                    ourQueryItemConfigId: this.state.lastSelection.queryItemConfigId,
                    requestedQueryItemConfigId: customEvent.detail.queryItemConfigId
                });
                return;
            }
            // Restore selection to map (reuse existing method)
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restoring-selection',
                widgetId: id,
                recordCount: customEvent.detail.recordIds.length,
                outputDsId: customEvent.detail.outputDsId
            });
            this.addSelectionToMap();
        };
        /**
         * Adds selection to map when widget opens (reuses Add to Map logic).
         * In "Add to" or "Remove from" modes, restores all accumulated records grouped by origin data source.
         */
        this.addSelectionToMap = () => {
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            debugLogger.log('RESTORE', {
                event: 'addSelectionToMap-called',
                widgetId: id,
                resultsMode,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                lastSelectionOutputDsId: lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.outputDsId
            });
            // In Add/Remove modes, use accumulated records for restoration
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            // Adding log to see if accumulatedRecords exist but we're not using them
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-found-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0,
                    'condition-result': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0
                });
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: 0,
                    'will-fallback-to-lastSelection': !!lastSelection
                });
            }
            if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restoring-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Restore selection for each origin data source
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                recordsByOriginDS.forEach((records, originDS) => {
                    const recordIds = records.map(r => r.getId());
                    try {
                        // Use originDS directly (not outputDS) since records are selected in origin layers
                        selectRecordsAndPublish(id, originDS, recordIds, records, true);
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restored-origin-ds',
                            widgetId: id,
                            originDSId: originDS.id,
                            recordCount: records.length,
                            zoomExecuted: false
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restore-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error),
                            errorStack: error instanceof Error ? error.stack : undefined
                        });
                    }
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            // Or maybe we should always check accumulatedRecords first?
            if (accumulatedRecords && accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-lastSelection-exiting',
                    widgetId: id,
                    resultsMode,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-early-maybe-should-check-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            // Get records from output DS (same as Add to Map)
            const allRecords = outputDS.getAllLoadedRecords() || [];
            const recordsToSelect = allRecords.filter(record => lastSelection.recordIds.includes(record.getId()));
            if (recordsToSelect.length === 0) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-no-matching-records',
                    widgetId: id,
                    ourRecordCount: lastSelection.recordIds.length
                });
                return;
            }
            // Same logic as Add to Map action - selectRecordsAndPublish handles duplicate checking
            // Don't zoom when restoring on widget open (Add to Map action handles zoom for manual clicks)
            try {
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                selectRecordsAndPublish(id, outputDS, lastSelection.recordIds, recordsToSelect, true);
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-selection-added-to-map',
                    widgetId: id,
                    recordCount: recordsToSelect.length,
                    zoomExecuted: false
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-add-to-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error)
                });
            }
        };
        /**
         * Handles results mode change from dropdown.
         * Updates widget state and logs the change for debugging.
         */
        this.handleResultsModeChange = (mode) => {
            debugLogger.log('RESULTS-MODE', {
                event: 'mode-changed',
                widgetId: this.props.id,
                previousMode: this.state.resultsMode,
                newMode: mode,
                timestamp: new Date().toISOString()
            });
            // If switching to "New" mode, clear accumulated records
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'clearing-accumulated-records-on-mode-switch',
                    widgetId: this.props.id,
                    previousMode: this.state.resultsMode
                });
                this.setState({ resultsMode: mode, accumulatedRecords: [] });
            }
            else {
                this.setState({ resultsMode: mode });
            }
        };
        this.handleAccumulatedRecordsChange = (records) => {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-updated',
                widgetId: this.props.id,
                recordsCount: records.length
            });
            this.setState({ accumulatedRecords: records });
        };
        /**
         * NOTE: No longer needed - we use existing output DS instead of creating new one.
         * Kept for reference but not used.
         */
        this.getOrCreateAccumulatedResultsDS = (originDS) => __awaiter(this, void 0, void 0, function* () {
            // This is no longer used - we merge records into existing output DS
            throw new Error('This method is deprecated - use existing output DS instead');
        });
        /**
         * Clears selection from map only (keeps selection in widget's internal state).
         * Called when widget panel closes to remove selection from map while preserving widget state.
         * Always clears accumulated records if they exist, regardless of current mode.
         */
        this.clearSelectionFromMap = () => {
            var _a;
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-called',
                widgetId: id,
                resultsMode,
                isAccumulationMode,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                selectionRecordCount: this.state.selectionRecordCount || 0
            });
            // Always clear accumulated records if they exist (regardless of mode)
            // This handles the case where mode might have changed but records still exist
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-checking-accumulated-records',
                widgetId: id,
                'condition': 'accumulatedRecords && accumulatedRecords.length > 0',
                'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
            });
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'clear-found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'clear-found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'clear-could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clearing-accumulated-records-from-map',
                    widgetId: id,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Clear selection from each origin data source
                recordsByOriginDS.forEach((records, originDS) => {
                    try {
                        if (typeof originDS.selectRecordsByIds === 'function') {
                            // Clear selection from originDS (map) only
                            originDS.selectRecordsByIds([], []);
                            // Publish clear message so map knows to clear
                            jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(id, [], [originDS.id]));
                            debugLogger.log('RESTORE', {
                                event: 'panel-closed-cleared-origin-ds-selection',
                                widgetId: id,
                                originDSId: originDS.id,
                                recordCount: records.length
                            });
                        }
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-closed-clear-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error)
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-cleared-accumulated-records-returning',
                    widgetId: id,
                    'will-not-fallback-to-lastSelection': true
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we didn't enter the if block?
            // Or maybe we should always clear accumulated records if they exist?
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-accumulated-records-exist-but-not-clearing',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-condition-failed-why',
                    'condition-was': 'accumulatedRecords && accumulatedRecords.length > 0',
                    'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0)
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-no-lastSelection-exiting',
                    widgetId: id,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-maybe-should-have-cleared-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            try {
                // Get origin DS (the map layer)
                const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
                if (!originDS) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-origin-ds-not-found',
                        widgetId: id,
                        outputDsId: lastSelection.outputDsId
                    });
                    return;
                }
                // Check current selection state before clearing
                const currentSelectedIds = originDS.getSelectedRecordIds() || [];
                const ourRecordIds = lastSelection.recordIds;
                const matchesOurSelection = ourRecordIds.length === currentSelectedIds.length &&
                    ourRecordIds.every(recordId => currentSelectedIds.includes(recordId));
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-map-selection',
                    widgetId: id,
                    ourRecordCount: ourRecordIds.length,
                    mapSelectedCount: currentSelectedIds.length,
                    matchesOurSelection,
                    ourRecordIds: ourRecordIds.slice(0, 5),
                    mapSelectedIds: currentSelectedIds.slice(0, 5)
                });
                if (typeof originDS.selectRecordsByIds === 'function') {
                    // Clear selection from originDS (map) only - don't touch outputDS (widget state)
                    originDS.selectRecordsByIds([], []);
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-cleared-origin-ds-selection',
                        widgetId: id,
                        originDSId: originDS.id
                    });
                    // Publish clear message so map knows to clear
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(id, [], [originDS.id]));
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-published-clear-message',
                        widgetId: id,
                        originDSId: originDS.id
                    });
                    // Verify selection was cleared
                    const afterClearIds = originDS.getSelectedRecordIds() || [];
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-selection-cleared-from-map',
                        widgetId: id,
                        recordCount: lastSelection.recordIds.length,
                        originDSId: originDS.id,
                        selectionAfterClear: afterClearIds.length,
                        verifiedCleared: afterClearIds.length === 0
                    });
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-origin-ds-no-select-method',
                        widgetId: id,
                        originDSId: originDS.id,
                        hasSelectMethod: typeof originDS.selectRecordsByIds === 'function'
                    });
                }
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clear-from-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
            }
        };
        /**
         * Logs visibility state changes.
         */
        this.logVisibilityChange = (isVisible, method) => {
            var _a, _b, _c, _d;
            debugLogger.log('WIDGET-STATE', {
                event: isVisible ? 'panel-opened' : 'panel-closed',
                widgetId: this.props.id,
                isVisible,
                method,
                timestamp: new Date().toISOString()
            });
            if (isVisible) {
                // When panel opens, check if we have selection to restore
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToRestore = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                    hasSelectionToRestore,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToRestore': hasSelectionToRestore,
                        'will-call-addSelectionToMap': hasSelectionToRestore
                    }
                });
                // Add selection to map if we have one
                if (hasSelectionToRestore) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-calling-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-true'
                    });
                    this.addSelectionToMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-skipping-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
            else {
                // When panel closes, clear selection from map only (keep widget state)
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToClear = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_d = this.state.lastSelection) === null || _d === void 0 ? void 0 : _d.recordIds.length) || 0,
                    hasSelectionToClear,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToClear': hasSelectionToClear,
                        'will-call-clearSelectionFromMap': hasSelectionToClear
                    }
                });
                if (hasSelectionToClear) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-calling-clearSelectionFromMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-true'
                    });
                    this.clearSelectionFromMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-no-selection-to-clear',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
        };
        /**
         * Notifies HelperSimple of panel visibility state changes.
         */
        this.notifyHelperSimpleOfPanelState = (isVisible) => {
            const event = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
                detail: {
                    widgetId: this.props.id,
                    isOpen: isVisible
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * Removes a hash parameter from the URL after it has been used to populate a query.
         * This prevents the parameter from being re-applied when switching between queries.
         */
        this.removeHashParameter = (shortId) => {
            var _a;
            const hash = window.location.hash.substring(1);
            if (!hash) {
                return;
            }
            const urlParams = new URLSearchParams(hash);
            if (urlParams.has(shortId)) {
                const value = urlParams.get(shortId);
                urlParams.delete(shortId);
                const newHash = urlParams.toString();
                // Update URL without triggering navigation
                // If no hash params remain, remove hash entirely, otherwise keep the hash
                const newUrl = newHash
                    ? `${window.location.pathname}${window.location.search}#${newHash}`
                    : `${window.location.pathname}${window.location.search}`;
                debugLogger.log('HASH', {
                    event: 'hash-removed',
                    widgetId: this.props.id,
                    shortId: shortId,
                    value: value,
                    newHash: newHash,
                    newUrl: newUrl
                });
                window.history.replaceState(null, '', newUrl);
                // Clear the state so it won't trigger again
                if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                    this.setState({ initialQueryValue: undefined });
                }
            }
        };
        /**
         * Checks the URL hash parameters for any shortIds that match query items.
         * If found, stores the value to be used to auto-populate and execute the query.
         * Experience Builder uses hash-based URL parameters (e.g., #pin=2223059013).
         *
         * This method prioritizes the first matching shortId found in the query items order.
         * If multiple hash parameters exist, only the first match is used.
         */
        this.checkQueryStringForShortIds = () => {
            var _a, _b, _c, _d, _e;
            const { config } = this.props;
            if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
                return;
            }
            // Extract all shortIds from query items
            const shortIds = config.queryItems
                .map(item => item.shortId)
                .filter(shortId => shortId != null && shortId.trim() !== '');
            if (shortIds.length === 0) {
                return;
            }
            // Get URL hash fragment parameters (ExB uses # for params)
            const hash = window.location.hash.substring(1); // Remove the #
            const urlParams = new URLSearchParams(hash);
            // Log hash check for debugging
            debugLogger.log('HASH', {
                event: 'hash-check',
                widgetId: this.props.id,
                hash: hash,
                availableShortIds: shortIds,
                currentState: this.state.initialQueryValue
            });
            // Find the first matching shortId (prioritize first match in query items order)
            // This ensures we only set state once per check and maintains consistent behavior
            for (const shortId of shortIds) {
                if (urlParams.has(shortId)) {
                    const value = urlParams.get(shortId);
                    // Only update if the value has changed to avoid unnecessary re-renders
                    if (((_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId) !== shortId || ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.value) !== value) {
                        debugLogger.log('HASH', {
                            event: 'hash-detected',
                            widgetId: this.props.id,
                            shortId: shortId,
                            value: value,
                            previousShortId: (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.shortId,
                            previousValue: (_e = this.state.initialQueryValue) === null || _e === void 0 ? void 0 : _e.value
                        });
                        // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
                        const needsModeReset = this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                        this.setState(Object.assign({ initialQueryValue: { shortId, value } }, (needsModeReset ? {
                            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                            accumulatedRecords: []
                        } : {})));
                        if (needsModeReset) {
                            debugLogger.log('HASH', {
                                event: 'hash-reset-mode-to-new',
                                widgetId: this.props.id,
                                previousMode: this.state.resultsMode,
                                reason: 'hash-parameter-detected'
                            });
                        }
                    }
                    else {
                        debugLogger.log('HASH', {
                            event: 'hash-skipped',
                            widgetId: this.props.id,
                            shortId: shortId,
                            value: value,
                            reason: 'value-unchanged'
                        });
                    }
                    return; // Exit after first match
                }
            }
            // If no hash parameters match any shortId, clear the state
            // This handles cases where hash parameters were removed
            if (this.state.initialQueryValue) {
                debugLogger.log('HASH', {
                    event: 'hash-cleared',
                    widgetId: this.props.id,
                    previousShortId: this.state.initialQueryValue.shortId,
                    previousValue: this.state.initialQueryValue.value,
                    reason: 'no-matching-hash-params'
                });
                this.setState({ initialQueryValue: undefined });
            }
        };
    }
    componentDidMount() {
        this.checkQueryStringForShortIds();
        // Listen for hash changes to detect when hash parameters are updated
        // This is needed when HelperSimple opens the widget with a hash parameter
        // or when hash parameters change while the widget is already mounted
        window.addEventListener('hashchange', this.checkQueryStringForShortIds);
        // Set up visibility detection
        this.setupVisibilityDetection();
        // Listen for selection changes from query-result
        window.addEventListener(QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Listen for restore requests when identify popup closes
        window.addEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Notify HelperSimple that this widget is now open
        const openEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId: this.props.id,
                isOpen: true
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(openEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-opened',
            widgetId: this.props.id,
            isOpen: true,
            timestamp: new Date().toISOString()
        });
        // Also check after a short delay to catch cases where hash was already present
        // when widget was opened (e.g., by HelperSimple opening the widget)
        setTimeout(() => {
            this.checkQueryStringForShortIds();
        }, 100);
    }
    componentWillUnmount() {
        // Clean up hashchange listener
        window.removeEventListener('hashchange', this.checkQueryStringForShortIds);
        // Clean up selection change listener
        window.removeEventListener(QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Clean up restore on identify close listener
        window.removeEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Clean up visibility detection
        this.cleanupVisibilityDetection();
        // Notify HelperSimple that this widget is now closed
        const closeEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId: this.props.id,
                isOpen: false
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(closeEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-closed',
            widgetId: this.props.id,
            isOpen: false,
            timestamp: new Date().toISOString()
        });
    }
    componentDidUpdate(prevProps) {
        if (prevProps.config.queryItems !== this.props.config.queryItems) {
            this.checkQueryStringForShortIds();
        }
    }
    render() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        const { config, id, icon, label, layoutId, layoutItemId, controllerWidgetId } = this.props;
        const widgetLabel = this.props.intl.formatMessage({
            id: '_widgetLabel',
            defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]._widgetLabel
        });
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, { icon: iconMap.iconQuery, widgetId: this.props.id, name: widgetLabel });
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Popper && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_10__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_9__.TaskListPopperWrapper, { id: 0, icon: icon, popperTitle: label, minSize: (_c = (_b = config.sizeMap) === null || _b === void 0 ? void 0 : _b.arrangementIconPopper) === null || _c === void 0 ? void 0 : _c.minSize, defaultSize: (_e = (_d = config.sizeMap) === null || _d === void 0 ? void 0 : _d.arrangementIconPopper) === null || _e === void 0 ? void 0 : _e.defaultSize, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_7__.QueryTaskList, { widgetId: id, isInPopper: true, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, className: 'pb-4', initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.removeHashParameter, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange }) }) }));
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Inline && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_10__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_inline__WEBPACK_IMPORTED_MODULE_8__.TaskListInline, { widgetId: id, widgetLabel: label, wrap: config.arrangeWrap, queryItems: config.queryItems, minSize: (_g = (_f = config.sizeMap) === null || _f === void 0 ? void 0 : _f.arrangementIconPopper) === null || _g === void 0 ? void 0 : _g.minSize, defaultSize: (_j = (_h = config.sizeMap) === null || _h === void 0 ? void 0 : _h.arrangementIconPopper) === null || _j === void 0 ? void 0 : _j.defaultSize, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.removeHashParameter }) }));
        }
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Paper, { ref: this.widgetRef, variant: 'flat', className: 'jimu-widget runtime-query', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
        display: flex;
        flex-direction: column;
        height: 100%;
      `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "widget-header", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px 16px;
          border-bottom: 1px solid var(--sys-color-divider-secondary);
          background-color: var(--sys-color-surface);
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "widget-title", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--sys-color-text-primary);
          `, children: label || widgetLabel }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            flex: 1;
            overflow: auto;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_10__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_7__.QueryTaskList, { widgetId: id, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.removeHashParameter, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 4px 12px;
            border-top: 1px solid var(--sys-color-divider-secondary);
            background-color: var(--sys-color-surface-paper);
            flex-shrink: 0;
            text-align: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              font-size: 0.75rem;
              color: var(--sys-color-text-tertiary);
              font-weight: 400;
              letter-spacing: 0.025em;
              display: inline-flex;
              align-items: center;
              gap: 4px;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex-shrink: 0;
                  opacity: 0.6;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple.org", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-left: 6px;
                opacity: 0.5;
                font-size: 0.7rem;
              `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_12__.WIDGET_VERSION] })] }) })] })] }));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_6__.versionManager;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9xdWVyeS1zaW1wbGUvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2QztBQUVVO0FBRWhELE1BQU0sVUFBVSxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQ3JELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLHlFQUFHLElBQU0sTUFBTSxFQUFJO0FBQzFELENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWDRDO0FBRVc7QUFFakQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxLQUF3QixFQUFFLEVBQUU7SUFDdEQsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUc7SUFDdEIsTUFBTSxFQUFFLFNBQVMsS0FBZ0IsS0FBSyxFQUFoQixNQUFNLFVBQUssS0FBSyxFQUFoQyxhQUF3QixDQUFRO0lBRXRDLE1BQU0sT0FBTyxHQUFHLHFEQUFVLENBQUMsK0JBQStCLEVBQUUsU0FBUyxDQUFDO0lBQ3RFLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTyx1RkFBSyxTQUFTLEVBQUUsT0FBTyxJQUFNLE1BQWEsRUFBSTtJQUMvRCxPQUFPLGdFQUFDLEdBQUcsa0JBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxH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SCxJQUNGLElBQ0EsQ0FDVDtJQUNILENBQUM7O0FBMTJDTSxxQkFBYyxHQUFHLDREQUFjO2lFQURuQixNQUFNO0FBKzJDbkIsU0FBUywyQkFBMkIsQ0FBQyxHQUFHLElBQUkscUJBQXVCLEdBQUcsR0FBRyxFQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci9jbG9zZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mby50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vbW9yZS1ob3Jpem9udGFsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9jbG9zZS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvaWNvbi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvY29uZmlnLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2RhdGEtYWN0aW9ucy9hZGQtdG8tbWFwLWFjdGlvbi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGF0YS1hY3Rpb25zL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kZWZhdWx0LXF1ZXJ5LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYnVmZmVyLWlucHV0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tZHJhdy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLWRzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tbWFwLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2ludGVyYWN0aXZlLWRyYXctdG9vbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9sYXp5LWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvbG9hZGluZy1yZXN1bHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcGFnaW5nLWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktcmVzdWx0LWl0ZW0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktcmVzdWx0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stY29udGV4dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWZvcm0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1sYWJlbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxpc3QtaW5saW5lLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC1wb3BwZXItd3JhcHBlci50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1zcGF0aWFsLWZvcm0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3Jlc3VsdHMtbWFuYWdlbWVudC11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3NlbGVjdGlvbi11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3RyYW5zbGF0aW9ucy9kZWZhdWx0LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvdXNlQXV0b0hlaWdodC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS93aWRnZXQtY29uZmlnLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvd2lkZ2V0LWNvbnRleHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3ZlcnNpb24tbWFuYWdlci50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy92ZXJzaW9uLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlL2Vtb3Rpb25cIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtYXJjZ2lzXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS10aGVtZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS11aVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS11aS9iYXNpYy9zcWwtZXhwcmVzc2lvbi1ydW50aW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJ3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vblwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtY29yZS9saWIvc2V0LXB1YmxpYy1wYXRoLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvd2lkZ2V0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBEb3duRmlsbGVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgUmlnaHRGaWxsZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgQXJyb3dMZWZ0T3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBDb2xsYXBzZUFsbE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEV4cGFuZEFsbE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9jbG9zZS5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgQ2xvc2VPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFRyYXNoT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEluZm9PdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm0xNCA0LTYgOC02LTh6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTQgMiA4IDYtOCA2elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTIgN2ExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJtNSAxYTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMG02IDBhMSAxIDAgMSAxIDIgMCAxIDEgMCAwIDEtMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMTUgNy41YS41Mi41MiAwIDAgMS0uNTE2LjUyN0gyLjk3Nkw2LjQ3MyAxMS42YS41MzUuNTM1IDAgMCAxIDAgLjc0Ni41MS41MSAwIDAgMS0uNzMgMEwxIDcuNWw0Ljc0My00Ljg0NmEuNTEuNTEgMCAwIDEgLjczIDAgLjUzNS41MzUgMCAwIDEgMCAuNzQ2TDIuOTc2IDYuOTczaDExLjUwOGMuMjg1IDAgLjUxNi4yMzYuNTE2LjUyN1xcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTUuMDM2IDYuMTQ2YS41LjUgMCAwIDAtLjcwOCAwTDEuMTQ2IDkuMzI4YS41LjUgMCAxIDAgLjcwOC43MDhsMi4zMjgtMi4zMjlWMTQuNWgxVjcuNzA3bDIuMzI4IDIuMzI5YS41LjUgMCAxIDAgLjcwOC0uNzA4elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTQuMzI4IDE0LjM1NGEuNS41IDAgMCAwIC43MDggMGwzLjE4Mi0zLjE4MmEuNS41IDAgMSAwLS43MDgtLjcwOGwtMi4zMjggMi4zMjlWNmgtMXY2Ljc5M2wtMi4zMjgtMi4zMjhhLjUuNSAwIDEgMC0uNzA4LjcwN3pcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk00LjY1MyAxMy44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4TDEwLjI0IDggNC42NTMgMi44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4LjU0LjU0IDAgMCAxIC43MzggMGw1Ljk1NiA1LjVhLjQ4NS40ODUgMCAwIDEgMCAuNzA4bC01Ljk1NiA1LjVhLjU0LjU0IDAgMCAxLS43MzggMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTguNzQ1IDggNi4xIDYuMWEuNTI3LjUyNyAwIDEgMS0uNzQ1Ljc0Nkw4IDguNzQ2bC02LjEgNi4xYS41MjcuNTI3IDAgMSAxLS43NDYtLjc0Nmw2LjEtNi4xLTYuMS02LjFhLjUyNy41MjcgMCAwIDEgLjc0Ni0uNzQ2bDYuMSA2LjEgNi4xLTYuMWEuNTI3LjUyNyAwIDAgMSAuNzQ2Ljc0NnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNNiA2LjVhLjUuNSAwIDAgMSAxIDB2NmEuNS41IDAgMCAxLTEgMHpNOS41IDZhLjUuNSAwIDAgMC0uNS41djZhLjUuNSAwIDAgMCAxIDB2LTZhLjUuNSAwIDAgMC0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTExIDBINWExIDEgMCAwIDAtMSAxdjJILjVhLjUuNSAwIDAgMCAwIDFoMS42bC44MSAxMS4xYTEgMSAwIDAgMCAuOTk1LjloOC4xOWExIDEgMCAwIDAgLjk5NS0uOUwxMy45IDRoMS42YS41LjUgMCAwIDAgMC0xSDEyVjFhMSAxIDAgMCAwLTEtMW0wIDNWMUg1djJ6bTEuODk1IDFoLTkuNzlsLjggMTFoOC4xOXpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNE04IDRhLjkwNS45MDUgMCAwIDAtLjkuOTk1bC4zNSAzLjUwN2EuNTUyLjU1MiAwIDAgMCAxLjEgMGwuMzUtMy41MDdBLjkwNS45MDUgMCAwIDAgOCA0bTEgN2ExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk04IDUuNWExIDEgMCAxIDAgMC0yIDEgMSAwIDAgMCAwIDJNNi41IDcuNUEuNS41IDAgMCAxIDcgN2gxLjV2NC41aDFhLjUuNSAwIDAgMSAwIDFoLTNhLjUuNSAwIDAgMSAwLTFoMVY4SDdhLjUuNSAwIDAgMS0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAyLjEyNSAxNC4zMzQgMTRIMS42Njd6bS0uODgyLS40N2ExIDEgMCAwIDEgMS43NjUgMGw2LjMzMyAxMS44NzRBMSAxIDAgMCAxIDE0LjMzNCAxNUgxLjY2N2ExIDEgMCAwIDEtLjg4Mi0xLjQ3ek04IDQuODc0YS45MDUuOTA1IDAgMCAwLS45Ljk5NWwuMzUgMy41MDdhLjU1Mi41NTIgMCAwIDAgMS4xIDBMOC45IDUuODdhLjkwNS45MDUgMCAwIDAtLjktLjk5NW0xIDdhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDIwIDIwXFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNOC41IDNBNS41IDUuNSAwIDAgMSAxNCA4LjVhNS41IDUuNSAwIDAgMS0xLjI3MyAzLjUyN2w0LjA1MyA0LjA1NGEuNzUuNzUgMCAxIDEtMS4wNiAxLjA2bC00LjA1NC00LjA1M2E1LjUgNS41IDAgMCAxLTMuNTI3IDEuMjczIDUuNSA1LjUgMCAxIDEgMC0xMUg4LjV6bTAgMS41aC0uMzYxYTQgNCAwIDEgMCAwIDggNCA0IDAgMCAwIDAtOHpcXFwiPjwvcGF0aD48cmVjdCB3aWR0aD1cXFwiMTlcXFwiIGhlaWdodD1cXFwiMTlcXFwiIHg9XFxcIi41XFxcIiB5PVxcXCIuNVxcXCIgc3Ryb2tlPVxcXCIjMDAwXFxcIiByeD1cXFwiMS41XFxcIj48L3JlY3Q+PC9zdmc+XCIiLCJpbXBvcnQgdHlwZSB7IFNwYXRpYWxSZWxhdGlvbnNoaXAsIFVuaXRzIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHR5cGUgeyBJbW11dGFibGVPYmplY3QsIEltbXV0YWJsZUFycmF5LCBTcWxFeHByZXNzaW9uLCBVc2VEYXRhU291cmNlLCBJY29uUmVzdWx0LCBPcmRlckJ5T3B0aW9uIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBTaXplIH0gZnJvbSAnamltdS11aSdcblxuZXhwb3J0IGVudW0gQ3JlYXRlVG9vbFR5cGUge1xuICBQb2ludCA9ICdQb2ludCcsXG4gIFBvbHlsaW5lID0gJ1BvbHlsaW5lJyxcbiAgUG9seWdvbiA9ICdQb2x5Z29uJyxcbiAgUmVjdGFuZ2xlID0gJ1JlY3RhbmdsZScsXG4gIENpcmNsZSA9ICdDaXJjbGUnXG59XG5cbmV4cG9ydCBlbnVtIFNlbGVjdGlvblR5cGUge1xuICBOZXdTZWxlY3Rpb24gPSAnTkVXX1NFTEVDVElPTicsXG4gIEFkZFRvU2VsZWN0aW9uID0gJ0FERF9UT19DVVJSRU5UX1NFTEVDVElPTicsXG4gIFJlbW92ZUZyb21TZWxlY3Rpb24gPSAnUkVNT1ZFX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTdWJzZXRTZWxlY3Rpb24gPSAnU1VCU0VUX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTd2l0Y2hTZWxlY3Rpb24gPSAnU1dJVENIX0NVUlJFTlRfU0VMRUNUSU9OJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWVsZCB7XG4gIG5hbWU6IHN0cmluZ1xuICBhbGlhcz86IHN0cmluZ1xuICBsYWJlbD86IHN0cmluZ1xufVxuXG5leHBvcnQgZW51bSBRdWVyeUFycmFuZ2VUeXBlIHtcbiAgQmxvY2sgPSAnQkxPQ0snLFxuICBJbmxpbmUgPSAnSU5MSU5FJyxcbiAgUG9wcGVyID0gJ1BPUFBFUicsXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxGaWx0ZXJUeXBlIHtcbiAgQ3VycmVudE1hcEV4dGVudCA9ICdDdXJyZW50TWFwRXh0ZW50JyxcbiAgSW50ZXJhY3RpdmVEcmF3TW9kZSA9ICdJbnRlcmFjdGl2ZURyYXdNb2RlJyxcbiAgTm9uZSA9ICcnXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxSZWxhdGlvbiB7XG4gIEludGVyc2VjdCA9ICdpbnRlcnNlY3RzJyxcbiAgQ29udGFpbiA9ICdjb250YWlucycsXG4gIENyb3NzID0gJ2Nyb3NzZXMnLFxuICBFbnZlbG9wZUludGVyc2VjdCA9ICdlbnZlbG9wZS1pbnRlcnNlY3RzJyxcbiAgSW5kZXhJbnRlcnNlY3QgPSAnaW5kZXgtaW50ZXJzZWN0cycsXG4gIE92ZXJsYXAgPSAnb3ZlcmxhcHMnLFxuICBUb3VjaCA9ICd0b3VjaGVzJyxcbiAgV2l0aGluID0gJ3dpdGhpbicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3BhdGlhbEZpbHRlck9iaiB7XG4gIGdlb21ldHJ5OiBhbnlcbiAgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljXG4gIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhblxuICByZWxhdGlvbj86IFNwYXRpYWxSZWxhdGlvblxuICBidWZmZXI/OiB7IGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlIH1cbn1cblxuZXhwb3J0IGNvbnN0IG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsOiB7IFtrZXk6IHN0cmluZ106IFNwYXRpYWxSZWxhdGlvbnNoaXAgfSA9IHtcbiAgW1NwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5Db250YWluXTogJ2VzcmlTcGF0aWFsUmVsQ29udGFpbnMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkNyb3NzXTogJ2VzcmlTcGF0aWFsUmVsQ3Jvc3NlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uRW52ZWxvcGVJbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxFbnZlbG9wZUludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkluZGV4SW50ZXJzZWN0XTogJ2VzcmlTcGF0aWFsUmVsSW5kZXhJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5PdmVybGFwXTogJ2VzcmlTcGF0aWFsUmVsT3ZlcmxhcHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLlRvdWNoXTogJ2VzcmlTcGF0aWFsUmVsVG91Y2hlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uV2l0aGluXTogJ2VzcmlTcGF0aWFsUmVsV2l0aGluJ1xufVxuXG5leHBvcnQgZW51bSBVbml0VHlwZSB7XG4gIE1pbGVzID0gJ01pbGVzJyxcbiAgS2lsb21ldGVycyA9ICdLaWxvbWV0ZXJzJyxcbiAgRmVldCA9ICdGZWV0JyxcbiAgTWV0ZXJzID0gJ01ldGVycycsXG4gIE5hdXRpY2FsTWlsZXMgPSAnTmF1dGljYWxNaWxlcycsXG59XG5cbmV4cG9ydCBjb25zdCBtYXBKU0FQSVVuaXRUb0RzVW5pdDogeyBba2V5OiBzdHJpbmddOiBVbml0cyB9ID0ge1xuICBbVW5pdFR5cGUuTWlsZXNdOiAnZXNyaVNSVW5pdF9TdGF0dXRlTWlsZScsXG4gIFtVbml0VHlwZS5LaWxvbWV0ZXJzXTogJ2VzcmlTUlVuaXRfS2lsb21ldGVyJyxcbiAgW1VuaXRUeXBlLkZlZXRdOiAnZXNyaVNSVW5pdF9Gb290JyxcbiAgW1VuaXRUeXBlLk1ldGVyc106ICdlc3JpU1JVbml0X01ldGVyJyxcbiAgW1VuaXRUeXBlLk5hdXRpY2FsTWlsZXNdOiAnZXNyaVNSVW5pdF9OYXV0aWNhbE1pbGUnXG59XG5cbmV4cG9ydCBlbnVtIExpc3REaXJlY3Rpb24ge1xuICBIb3Jpem9udGFsID0gJ0hvcml6b250YWwnLFxuICBWZXJ0aWNhbCA9ICdWZXJ0aWNhbCcsXG59XG5cbmV4cG9ydCBlbnVtIFBhZ2luZ1R5cGUge1xuICBNdWx0aVBhZ2UgPSAnTXVsdGlQYWdlJyxcbiAgTGF6eUxvYWQgPSAnTGF6eUxvYWQnLFxufVxuXG5leHBvcnQgZW51bSBGaWVsZHNUeXBlIHtcbiAgUG9wdXBTZXR0aW5nID0gJ1BvcHVwU2V0dGluZycsXG4gIFNlbGVjdEF0dHJpYnV0ZXMgPSAnU2VsZWN0QXR0cmlidXRlcycsXG59XG5cbmV4cG9ydCBlbnVtIFNvcnREaXJlY3Rpb24ge1xuICBBc2MgPSAnQXNjJyxcbiAgRGVzYyA9ICdEZXNjJyxcbn1cblxuZXhwb3J0IGVudW0gUmVzdWx0U2VsZWN0TW9kZSB7XG4gIFNpbmdsZSA9ICdTaW5nbGUnLFxuICBNdWx0aXBsZSA9ICdNdWx0aXBsZScsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU29ydE9wdGlvbiB7XG4gIG5hbWU6IHN0cmluZ1xuICBkaXJlY3Rpb246IFNvcnREaXJlY3Rpb25cbn1cblxuZXhwb3J0IGVudW0gU3ltYm9sVHlwZSB7XG4gIERlZmF1bHRTeW1ib2wgPSAnRGVmYXVsdFN5bWJvbCcsXG4gIEN1c3RvbVN5bWJvbCA9ICdDdXN0b21TeW1ib2wnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5SXRlbVR5cGUge1xuICBjb25maWdJZDogc3RyaW5nXG4gIGljb24/OiBJY29uUmVzdWx0XG4gIG5hbWU/OiBzdHJpbmdcbiAgZGlzcGxheUxhYmVsPzogYm9vbGVhblxuICB1c2VEYXRhU291cmNlPzogVXNlRGF0YVNvdXJjZVxuICBvdXRwdXREYXRhU291cmNlSWQ/OiBzdHJpbmdcbiAgdXNlQXR0cmlidXRlRmlsdGVyPzogYm9vbGVhblxuICB1c2VTcGF0aWFsRmlsdGVyPzogYm9vbGVhblxuICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbD86IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyTGFiZWw/OiBzdHJpbmdcbiAgYXR0cmlidXRlRmlsdGVyRGVzYz86IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyRGVzYz86IHN0cmluZ1xuICByZXN1bHRzTGFiZWw/OiBzdHJpbmdcbiAgc3FsRXhwck9iaj86IFNxbEV4cHJlc3Npb25cbiAgc3BhdGlhbE1hcFdpZGdldElkcz86IHN0cmluZ1tdXG4gIHNwYXRpYWxGaWx0ZXJUeXBlcz86IFNwYXRpYWxGaWx0ZXJUeXBlW11cbiAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzPzogQ3JlYXRlVG9vbFR5cGVbXVxuICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXI/OiBib29sZWFuXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlPzogbnVtYmVyXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXQ/OiBVbml0VHlwZVxuICBzcGF0aWFsUmVsYXRpb25zPzogU3BhdGlhbFJlbGF0aW9uW11cbiAgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM/OiBVc2VEYXRhU291cmNlW11cbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlU2VsZWN0VG9vbD86IGJvb2xlYW5cbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyPzogYm9vbGVhblxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZT86IG51bWJlclxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJVbml0PzogVW5pdFR5cGVcbiAgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YT86IGJvb2xlYW5cbiAgcmVzdWx0TGlzdERpcmVjdGlvbj86IExpc3REaXJlY3Rpb25cbiAgcmVzdWx0UGFnaW5nU3R5bGU/OiBQYWdpbmdUeXBlXG4gIHJlc3VsdEZpZWxkc1R5cGU/OiBGaWVsZHNUeXBlXG4gIHJlc3VsdFRpdGxlRmllbGRzPzogc3RyaW5nW11cbiAgcmVzdWx0VGl0bGVFeHByZXNzaW9uPzogc3RyaW5nXG4gIHJlc3VsdERpc3BsYXlGaWVsZHM/OiBzdHJpbmdbXVxuICByZXN1bHRTeW1ib2xUeXBlPzogU3ltYm9sVHlwZVxuICByZXN1bHRDdXN0b21TeW1ib2w/OiBhbnlcbiAgcmVzdWx0QWxsb3dDaGFuZ2VTeW1ib2w/OiBib29sZWFuXG4gIHJlc3VsdEV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbiAgcmVzdWx0U2VsZWN0TW9kZT86IFJlc3VsdFNlbGVjdE1vZGVcbiAgYWxsb3dFeHBvcnQ/OiBib29sZWFuXG4gIHNvcnRPcHRpb25zPzogT3JkZXJCeU9wdGlvbltdXG4gIGl0ZW1TaXplTWFwPzoge1xuICAgIGFycmFuZ2VtZW50SG9yaXpvbnRhbFBvcHBlcj86IFNpemVNYXBcbiAgfVxuICAvLyBHcm91cGluZyBmaWVsZHNcbiAgZ3JvdXBJZD86IHN0cmluZ1xuICBncm91cERpc3BsYXlOYW1lPzogc3RyaW5nXG4gIHNlYXJjaEFsaWFzPzogc3RyaW5nXG4gIHNob3J0SWQ/OiBzdHJpbmdcbiAgem9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2l6ZU1hcCB7XG4gIG1pblNpemU/OiBTaXplXG4gIGRlZmF1bHRTaXplPzogU2l6ZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdDb25maWcge1xuICBxdWVyeUl0ZW1zPzogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgYXJyYW5nZVR5cGU6IFF1ZXJ5QXJyYW5nZVR5cGVcbiAgYXJyYW5nZVdyYXA/OiBib29sZWFuXG4gIHJlc3VsdExpc3REaXJlY3Rpb24/OiBMaXN0RGlyZWN0aW9uXG4gIHJlc3VsdFBhZ2luZ1N0eWxlPzogUGFnaW5nVHlwZVxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgbGF6eUxvYWRJbml0aWFsUGFnZVNpemU/OiBudW1iZXJcbiAgc2l6ZU1hcD86IHtcbiAgICBhcnJhbmdlbWVudEljb25Qb3BwZXI/OiBTaXplTWFwXG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgSU1Db25maWcgPSBJbW11dGFibGVPYmplY3Q8U2V0dGluZ0NvbmZpZz5cblxuXG4iLCIvKipcbiAqIEN1c3RvbSBcIkFkZCB0byBNYXBcIiBkYXRhIGFjdGlvbiBmb3IgUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiB3aXRoIGEgY3VzdG9tXG4gKiBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2VzcyAoc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2gpLlxuICogVGhpcyBlbnN1cmVzIGNvbnNpc3RlbnQgYmVoYXZpb3Igd2l0aCBxdWVyeSByZXN1bHRzIGFuZCBwcm9wZXIgaW50ZWdyYXRpb25cbiAqIHdpdGggdGhlIHdpZGdldCdzIFwiQ2xlYXIgcmVzdWx0c1wiIGZ1bmN0aW9uYWxpdHkuXG4gKi9cblxuaW1wb3J0IHsgdHlwZSBEYXRhUmVjb3JkU2V0LCB0eXBlIERhdGFBY3Rpb24sIERhdGFMZXZlbCwgdHlwZSBJbnRsU2hhcGUsIERhdGFBY3Rpb25NYW5hZ2VyLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB9IGZyb20gJy4uL3J1bnRpbWUvc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHR5cGUgeyBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcblxuLyoqXG4gKiBDcmVhdGVzIGEgY3VzdG9tIFwiQWRkIHRvIE1hcFwiIGRhdGEgYWN0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiBhbmQgZW5zdXJlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciB3aXRoIFF1ZXJ5U2ltcGxlJ3MgcXVlcnkgcmVzdWx0cyBieSB1c2luZyB0aGUgc2FtZSBzZWxlY3Rpb24gbWVjaGFuaXNtLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIHRoYXQgcHJvdmlkZXMgdGhpcyBhY3Rpb25cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIHNlbGVjdGlvbiBvbiB0aGUgb3JpZ2luIGxheWVyKVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcGFyYW0gcXVlcnlJdGVtIC0gT3B0aW9uYWwgcXVlcnkgaXRlbSBjb25maWd1cmF0aW9uIChmb3Igem9vbVRvU2VsZWN0ZWQgc2V0dGluZylcbiAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIHpvb20gb3ZlcnJpZGUgZnJvbSB0aGUgcXVlcnkgZm9ybVxuICogQHJldHVybnMgQSBEYXRhQWN0aW9uIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGJ5IERhdGFBY3Rpb25MaXN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZGRUb01hcEFjdGlvbihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UsXG4gIGludGw6IEludGxTaGFwZSxcbiAgcXVlcnlJdGVtPzogUXVlcnlJdGVtVHlwZSxcbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuKTogRGF0YUFjdGlvbiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGAke3dpZGdldElkfS1hZGRUb01hcGAsXG4gICAgbmFtZTogJ2FkZFRvTWFwJyxcbiAgICBsYWJlbDogaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdhZGRUb01hcCcsIGRlZmF1bHRNZXNzYWdlOiAnQWRkIHRvIG1hcCcgfSksXG4gICAgLy8gSWNvbiBtYXRjaGVzIHRoZSBmcmFtZXdvcmsncyBcIlNob3cgb24gTWFwXCIgYWN0aW9uIGZvciBjb25zaXN0ZW5jeVxuICAgIGljb246IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZycpLmRlZmF1bHQgfHwgcmVxdWlyZSgnLi4vcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnJyksXG4gICAgLy8gTm90ZTogSW5kZXggbWF5IG5vdCBjb250cm9sIHBvc2l0aW9uIGlmIGV4dHJhQWN0aW9ucyBhcmUgYWx3YXlzIGFwcGVuZGVkIGFmdGVyIGZyYW1ld29yayBhY3Rpb25zXG4gICAgaW5kZXg6IC0xMDAsXG4gICAgd2lkZ2V0SWQsXG4gICAgaW50bCxcbiAgICBzdXBwb3J0UHJvdmlkZXJXaWRnZXQ6IHRydWUsXG4gICAgXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIGFjdGlvbiBjYW4gcHJvY2VzcyB0aGUgZ2l2ZW4gZGF0YSBzZXRzLlxuICAgICAqIFN1cHBvcnRzIFJlY29yZHMgbGV2ZWwgYWN0aW9ucyB3aXRoIGZlYXR1cmUgZGF0YSByZWNvcmRzLlxuICAgICAqL1xuICAgIGlzU3VwcG9ydGVkOiBhc3luYyAoZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSwgZGF0YUxldmVsOiBEYXRhTGV2ZWwsIGFjdGlvbldpZGdldElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGFjdGlvbldpZGdldElkLFxuICAgICAgICBkYXRhTGV2ZWwsXG4gICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFNcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc3VwcG9ydCBSZWNvcmRzIGxldmVsIGFjdGlvbnNcbiAgICAgIGlmIChkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm90IFJlY29yZHMgbGV2ZWwnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBOZWVkIGF0IGxlYXN0IG9uZSBkYXRhIHNldCB3aXRoIHJlY29yZHNcbiAgICAgIGlmICghZGF0YVNldHMgfHwgZGF0YVNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZGF0YSBzZXRzJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWNvcmRzIGFuZCBvdXRwdXQgZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IGhhc1JlY29yZHMgPSBkYXRhU2V0cy5zb21lKGRzID0+IGRzLnJlY29yZHMgJiYgZHMucmVjb3Jkcy5sZW5ndGggPiAwKVxuICAgICAgY29uc3Qgc3VwcG9ydGVkID0gaGFzUmVjb3JkcyAmJiAhIW91dHB1dERTXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgcmVzdWx0OiBzdXBwb3J0ZWQsXG4gICAgICAgIGhhc1JlY29yZHMsXG4gICAgICAgIHJlY29yZHNDb3VudDogZGF0YVNldHMucmVkdWNlKChzdW0sIGRzKSA9PiBzdW0gKyAoZHMucmVjb3Jkcz8ubGVuZ3RoIHx8IDApLCAwKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIHN1cHBvcnRlZFxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGFjdGlvbiBieSBzZWxlY3RpbmcgcmVjb3JkcyB1c2luZyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLlxuICAgICAqL1xuICAgIG9uRXhlY3V0ZTogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgYWN0aW9uV2lkZ2V0SWQsXG4gICAgICAgIGRhdGFMZXZlbCxcbiAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREU1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKCFvdXRwdXREUyB8fCBkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogIW91dHB1dERTID8gJ05vIG91dHB1dERTJyA6ICdOb3QgUmVjb3JkcyBsZXZlbCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbGxlY3QgYWxsIHJlY29yZHMgZnJvbSBhbGwgZGF0YSBzZXRzXG4gICAgICBjb25zdCBhbGxSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgICAgIGRhdGFTZXRzLmZvckVhY2goZGF0YVNldCA9PiB7XG4gICAgICAgIGlmIChkYXRhU2V0LnJlY29yZHMgJiYgZGF0YVNldC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBGaWx0ZXIgdG8gb25seSBGZWF0dXJlRGF0YVJlY29yZCB0eXBlc1xuICAgICAgICAgIGNvbnN0IGZlYXR1cmVSZWNvcmRzID0gZGF0YVNldC5yZWNvcmRzLmZpbHRlcihcbiAgICAgICAgICAgIChyZWNvcmQpOiByZWNvcmQgaXMgRmVhdHVyZURhdGFSZWNvcmQgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcmVjb3JkICYmIHR5cGVvZiAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXRHZW9tZXRyeSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgICBhbGxSZWNvcmRzLnB1c2goLi4uZmVhdHVyZVJlY29yZHMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChhbGxSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICdObyBmZWF0dXJlIHJlY29yZHMgZm91bmQnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZXQgcmVjb3JkIElEc1xuICAgICAgY29uc3QgcmVjb3JkSWRzID0gYWxsUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGFsbFJlY29yZHMubGVuZ3RoLFxuICAgICAgICByZWNvcmRJZHM6IHJlY29yZElkcy5zbGljZSgwLCAxMCksIC8vIExvZyBmaXJzdCAxMCBJRHNcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWRcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVzZSBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzIC0gc2VsZWN0cyBvbiBvcmlnaW4gbGF5ZXIgYW5kIHB1Ymxpc2hlcyBzZWxlY3Rpb24gbWVzc2FnZXNcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IGJlaGF2aW9yIHdpdGggcXVlcnkgcmVzdWx0cyBhbmQgcHJvcGVyIGludGVncmF0aW9uIHdpdGggXCJDbGVhciByZXN1bHRzXCJcbiAgICAgIHRyeSB7XG4gICAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCBhbGxSZWNvcmRzLCB0cnVlKVxuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHpvb20gYmVoYXZpb3I6IHJ1bnRpbWUgb3ZlcnJpZGUgdGFrZXMgcHJlY2VkZW5jZSwgdGhlbiBxdWVyeUl0ZW0gY29uZmlnLCBkZWZhdWx0cyB0byB0cnVlXG4gICAgICAgIGNvbnN0IHNob3VsZFpvb20gPSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCBcbiAgICAgICAgICA/IHJ1bnRpbWVab29tVG9TZWxlY3RlZCBcbiAgICAgICAgICA6IChxdWVyeUl0ZW0/Lnpvb21Ub1NlbGVjdGVkICE9PSBmYWxzZSlcbiAgICAgICAgXG4gICAgICAgIGlmIChzaG91bGRab29tICYmIGFsbFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHpvb21EYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICAgICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgICAgICAgICByZWNvcmRzOiBhbGxSZWNvcmRzLFxuICAgICAgICAgICAgbmFtZTogb3V0cHV0RFMuZ2V0TGFiZWwoKVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGaW5kIGFuZCBleGVjdXRlIHRoZSB6b29tVG9GZWF0dXJlIGFjdGlvbiBmcm9tIGF2YWlsYWJsZSBmcmFtZXdvcmsgYWN0aW9uc1xuICAgICAgICAgIERhdGFBY3Rpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0U3VwcG9ydGVkQWN0aW9ucyh3aWRnZXRJZCwgW3pvb21EYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMpXG4gICAgICAgICAgICAudGhlbihhY3Rpb25DYXRlZ29yaWVzID0+IHtcbiAgICAgICAgICAgICAgLy8gU2VhcmNoIHRocm91Z2ggYWxsIGFjdGlvbiBjYXRlZ29yaWVzIHRvIGZpbmQgem9vbVRvRmVhdHVyZSBhY3Rpb25cbiAgICAgICAgICAgICAgbGV0IHpvb21BY3Rpb246IERhdGFBY3Rpb24gfCBudWxsID0gbnVsbFxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IGluIGFjdGlvbkNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25zID0gYWN0aW9uQ2F0ZWdvcmllc1tjYXRlZ29yeV1cbiAgICAgICAgICAgICAgICB6b29tQWN0aW9uID0gYWN0aW9ucy5maW5kKChhY3Rpb246IERhdGFBY3Rpb24pID0+IFxuICAgICAgICAgICAgICAgICAgYWN0aW9uLm5hbWUgPT09ICd6b29tVG9GZWF0dXJlJyB8fCBhY3Rpb24uaWQgPT09ICd6b29tVG9GZWF0dXJlJ1xuICAgICAgICAgICAgICAgICkgfHwgbnVsbFxuICAgICAgICAgICAgICAgIGlmICh6b29tQWN0aW9uKSBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoem9vbUFjdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmV4ZWN1dGVEYXRhQWN0aW9uKHpvb21BY3Rpb24sIFt6b29tRGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzLCB3aWRnZXRJZClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlLXpvb20nLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBzZWxlY3RlZCByZWNvcmRzIGFuZCBwdWJsaXNoZWQgc2VsZWN0aW9uIG1lc3NhZ2UnLFxuICAgICAgICAgIHpvb21FeGVjdXRlZDogc2hvdWxkWm9vbVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyBBZGQgdG8gTWFwIGFjdGlvbjonLCBlcnJvcilcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBDbGVhbnVwIG1ldGhvZCAocmVxdWlyZWQgYnkgRGF0YUFjdGlvbiBpbnRlcmZhY2UpXG4gICAgICovXG4gICAgZGVzdHJveTogKCk6IHZvaWQgPT4ge1xuICAgICAgLy8gTm8gY2xlYW51cCBuZWVkZWRcbiAgICB9XG4gIH1cbn1cblxuIiwiaW1wb3J0IHsgdHlwZSBEYXRhUmVjb3JkU2V0LCB0eXBlIERhdGFBY3Rpb24sIERhdGFMZXZlbCwgdHlwZSBEYXRhU291cmNlLCB0eXBlIEludGxTaGFwZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGNyZWF0ZUFkZFRvTWFwQWN0aW9uIH0gZnJvbSAnLi9hZGQtdG8tbWFwLWFjdGlvbidcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcblxuLyoqXG4gKiBRdWVyeVNpbXBsZSBDdXN0b20gRGF0YSBBY3Rpb25zXG4gKiBcbiAqIFJldHVybnMgY3VzdG9tIGRhdGEgYWN0aW9ucyBmb3IgdGhlIHdpZGdldC5cbiAqIEluY2x1ZGVzIGEgY3VzdG9tIFwiQWRkIHRvIE1hcFwiIGFjdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAobnVsbC91bmRlZmluZWQgaWYgbm90IGF2YWlsYWJsZSlcbiAqIEBwYXJhbSBpbnRsIC0gVGhlIEludGwgb2JqZWN0IGZvciBpbnRlcm5hdGlvbmFsaXphdGlvblxuICogQHBhcmFtIHF1ZXJ5SXRlbSAtIE9wdGlvbmFsIHF1ZXJ5IGl0ZW0gY29uZmlndXJhdGlvblxuICogQHBhcmFtIHJ1bnRpbWVab29tVG9TZWxlY3RlZCAtIE9wdGlvbmFsIHJ1bnRpbWUgem9vbSBvdmVycmlkZSBmcm9tIHRoZSBxdWVyeSBmb3JtXG4gKiBAcmV0dXJucyBBcnJheSBvZiBjdXN0b20gRGF0YUFjdGlvbiBvYmplY3RzIChlbXB0eSBpZiBjb25kaXRpb25zIG5vdCBtZXQpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHRyYUFjdGlvbnMgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGludGw6IEludGxTaGFwZSxcbiAgcXVlcnlJdGVtPzogUXVlcnlJdGVtVHlwZSxcbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuKTogRGF0YUFjdGlvbltdIHtcbiAgLy8gT25seSBjcmVhdGUgdGhlIGFjdGlvbiBpZiB3ZSBoYXZlIGJvdGggYW4gb3V0cHV0IGRhdGEgc291cmNlIGFuZCBpbnRsIG9iamVjdFxuICBpZiAob3V0cHV0RFMgJiYgaW50bCkge1xuICAgIHJldHVybiBbY3JlYXRlQWRkVG9NYXBBY3Rpb24od2lkZ2V0SWQsIG91dHB1dERTLCBpbnRsLCBxdWVyeUl0ZW0sIHJ1bnRpbWVab29tVG9TZWxlY3RlZCldXG4gIH1cbiAgXG4gIHJldHVybiBbXVxufVxuXG4iLCJpbXBvcnQge1xuICB0eXBlIFF1ZXJ5SXRlbVR5cGUsXG4gIENyZWF0ZVRvb2xUeXBlLFxuICBVbml0VHlwZSxcbiAgU3BhdGlhbFJlbGF0aW9uLFxuICBMaXN0RGlyZWN0aW9uLFxuICBQYWdpbmdUeXBlLFxuICBGaWVsZHNUeXBlLFxuICBTeW1ib2xUeXBlXG59IGZyb20gJy4vY29uZmlnJ1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9RVUVSWV9JVEVNOiBQYXJ0aWFsPFF1ZXJ5SXRlbVR5cGU+ID0ge1xuICBpY29uOiBudWxsLFxuICBkaXNwbGF5TGFiZWw6IHRydWUsXG4gIHNxbEV4cHJPYmo6IG51bGwsXG4gIHVzZUF0dHJpYnV0ZUZpbHRlcjogdHJ1ZSxcbiAgdXNlU3BhdGlhbEZpbHRlcjogdHJ1ZSxcbiAgc3BhdGlhbE1hcFdpZGdldElkczogW10sXG4gIHNwYXRpYWxGaWx0ZXJUeXBlczogW10sXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUNyZWF0ZVRvb2xUeXBlczogW1xuICAgIENyZWF0ZVRvb2xUeXBlLlBvaW50LFxuICAgIENyZWF0ZVRvb2xUeXBlLlBvbHlsaW5lLFxuICAgIENyZWF0ZVRvb2xUeXBlLlBvbHlnb24sXG4gICAgQ3JlYXRlVG9vbFR5cGUuUmVjdGFuZ2xlLFxuICAgIENyZWF0ZVRvb2xUeXBlLkNpcmNsZVxuICBdLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXI6IGZhbHNlLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJEaXN0YW5jZTogMCxcbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdDogVW5pdFR5cGUuTWV0ZXJzLFxuICBzcGF0aWFsUmVsYXRpb25zOiBbU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdF0sXG4gIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzOiBbXSxcbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlU2VsZWN0VG9vbDogZmFsc2UsXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcjogZmFsc2UsXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlOiAwLFxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJVbml0OiBVbml0VHlwZS5NZXRlcnMsXG4gIHJlc3VsdExpc3REaXJlY3Rpb246IExpc3REaXJlY3Rpb24uVmVydGljYWwsXG4gIHJlc3VsdFBhZ2luZ1N0eWxlOiBQYWdpbmdUeXBlLk11bHRpUGFnZSxcbiAgcmVzdWx0RmllbGRzVHlwZTogRmllbGRzVHlwZS5Qb3B1cFNldHRpbmcsXG4gIHJlc3VsdFN5bWJvbFR5cGU6IFN5bWJvbFR5cGUuRGVmYXVsdFN5bWJvbCxcbiAgcmVzdWx0Q3VzdG9tU3ltYm9sOiB7XG4gICAgYW5nbGU6IDAsXG4gICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgIG91dGxpbmU6IHtcbiAgICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgIHN0eWxlOiAnZXNyaVNMU1NvbGlkJyxcbiAgICAgIHR5cGU6ICdlc3JpU0xTJyxcbiAgICAgIHdpZHRoOiAxXG4gICAgfSxcbiAgICBzaXplOiA2LFxuICAgIHN0eWxlOiAnZXNyaVNNU0NpcmNsZScsXG4gICAgdHlwZTogJ2VzcmlTTVMnLFxuICAgIHhvZmZzZXQ6IDAsXG4gICAgeW9mZnNldDogMFxuICB9LFxuICByZXN1bHRBbGxvd0NoYW5nZVN5bWJvbDogZmFsc2UsXG4gIGFsbG93RXhwb3J0OiBmYWxzZSxcbiAgc29ydE9wdGlvbnM6IFtdLFxuICB6b29tVG9TZWxlY3RlZDogdHJ1ZSxcbiAgaXRlbVNpemVNYXA6IHtcbiAgICBhcnJhbmdlbWVudEhvcml6b250YWxQb3BwZXI6IHtcbiAgICAgIG1pblNpemU6IHsgd2lkdGg6IDMwMCwgaGVpZ2h0OiAzMDAgfSxcbiAgICAgIGRlZmF1bHRTaXplOiB7IHdpZHRoOiAzNjAsIGhlaWdodDogNDgwIH1cbiAgICB9XG4gIH1cbn1cblxuXG4iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTEgMXYxNGgxNFYxem05LjA4MiAxM2MtLjAwNS0uMDM3LS4xMTMtLjI3NC0uMTIyLS4zMDlhMS41IDEuNSAwIDAgMCAuNzE4LTEuMjY3IDEuMiAxLjIgMCAwIDAtLjA1My0uMzU4Yy4xNTItLjE3Ni4yNjMtLjM4My4zMjYtLjYwN3EuMDQ2LjAwMy4wOTMuMDAzYy4zLjAwMi41OTMtLjA5MS44MzYtLjI2NnEuMDYuMDY2LjEyNi4xMjRjLjQyLjQxMi45NzcuNjU0IDEuNTY0LjY4SDE0djJoLTMuOTE4TTE0IDExaC0uNDNhMS40NiAxLjQ2IDAgMCAxLS45MDYtLjQzM2MtLjI2NC0uMjMtLjI1OC0uNzgyLS42MTctLjc4Mi0uNDgyIDAtLjUyLjY3Ny0xLjAwMy42NzctLjIxOSAwLS4zOC0uMTc3LS41OTktLjE3Ny0uMTkzIDAtLjQ0NS4xMDItLjQ0NS4yOTN2LjUwMmMwIC40MjQtLjUwNi41MDgtLjUwNi45MzQgMCAuMTcxLjE4NC4yMzYuMTg0LjQxIDAgLjU4LS44OTMuNTAyLS44OTMgMS4wOCAwIC4xOTEuMjE1LjMwNS4yMTUuNDg2VjE0SDYuMzc1cS4wODctLjI0My4wOS0uNTAyYzAtLjU0Ny0xLjA0My0uMzkzLTEuMjA3LS43Mi0uNDA3LS44MTMuNjkzLTEuMDIyLjY5My0xLjY3MyAwLS4xNi0uMDgyLS40ODgtLjMzNC0uNTEzLS4zNTEtLjAzNS0uNDQzLjE1NC0uNzk3LjE1NGEuNDA2LjQwNiAwIDAgMS0uNDM3LS4zNmMwLS4zODYuMzA4LS41NjYuMzA4LS45NTIgMC0uMjUtLjEwMi0uMzkzLS4xMDItLjY0M2EuNjIuNjIgMCAwIDEgLjU5LS42NDNjLjMyMyAwIC40NjQuMjY0LjYxOC41NGEuNjQuNjQgMCAwIDAgLjYxNy4zMDhjLjQ5IDAgLjc5OC0uNjEuNzk4LS45NzdhLjQ3LjQ3IDAgMCAxIC40MzctLjQ4OGMuMzQ3IDAgLjQ3Ni4zNi44MjQuMzYuNTcgMCAuNTUtLjc1NiAxLjA1My0xLjAzLjYxOC0uMzMyLjQzOC0xLjA1Mi4zNi0xLjQ0LS4wMzItLjE2OS4yOS0uNS40NjQtLjQ4Ny43Mi4wNS40MTItLjU0LjQxMi0uODIzcTAtLjA3My4wMjItLjE0MmMuMTExLS4zMzIuNTk1LS40MzguNTk1LS44MzYgMC0uMjgxLS4yMzMtLjQxLS4yMzMtLjY5M2EuNjUuNjUgMCAwIDEgLjIyLS40NEgxNHpNMiAxNFYyaDguMjc4Yy0uMDEzLjA3Ny0uMTMyLjM1Ni0uMTMyLjQ0IDAgLjE5NC4wMzguMzg3LjExMi41NjdhMS42IDEuNiAwIDAgMC0uNDIyLjY0MyAxLjQgMS40IDAgMCAwLS4wNzQuNDQyIDEuNyAxLjcgMCAwIDAtLjUzNi40MyAxLjMyIDEuMzIgMCAwIDAtLjMyIDEuMDkxcS4wNDYuMjA1LjA2Ni40MTRhMiAyIDAgMCAwLS42NDkuNjcgMS40NiAxLjQ2IDAgMCAwLS42NzQtLjE2NiAxLjQ1IDEuNDUgMCAwIDAtMS4zODMgMS4wODYgMS40NCAxLjQ0IDAgMCAwLTEuMDg2LS40NjkgMS42MiAxLjYyIDAgMCAwLTEuNTkxIDEuNjQzYzAgLjI1NC4xMTMuMjkzLjA4NC41NzRzLS4yOS41MzUtLjI5IDEuMDIyYTEuMzcgMS4zNyAwIDAgMCAuOTg0IDEuMjkgMS41OCAxLjU4IDAgMCAwLS4wMDMgMS41NDljLjE0My4yODYuNjM2Ljc3NC41MzQuNzc0elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAganN4LFxyXG4gIGhvb2tzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIE51bWVyaWNJbnB1dCwgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBkaXN0YW5jZTogbnVtYmVyXHJcbiAgdW5pdDogVW5pdFR5cGVcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBCdWZmZXJJbnB1dCAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBkaXN0YW5jZSA9IDAsIHVuaXQgPSBVbml0VHlwZS5NZXRlcnMsIG9uQnVmZmVyQ2hhbmdlIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oamltdVVJTWVzc2FnZXMsIGRlZmF1bHRNZXNzYWdlKVxyXG4gIGNvbnN0IFtkLCBzZXREXSA9IFJlYWN0LnVzZVN0YXRlKGRpc3RhbmNlKVxyXG4gIGNvbnN0IFt1LCBzZXRVXSA9IFJlYWN0LnVzZVN0YXRlKHVuaXQpXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxyXG4gICAgaWYgKGRpc3RhbmNlICE9PSBkKSB7XHJcbiAgICAgIHNldEQoZGlzdGFuY2UpXHJcbiAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAodW5pdCAhPT0gdSkge1xyXG4gICAgICBzZXRVKHVuaXQpXHJcbiAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICAgIH1cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXHJcbiAgfSwgW2Rpc3RhbmNlLCB1bml0XSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgc2V0RChkaXN0YW5jZSlcclxuICAgICAgc2V0VSh1bml0KVxyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgZGlzdGFuY2UsIHVuaXQsIG9uQnVmZmVyQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGlzdGFuY2VDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcclxuICAgIHNldEQodmFsdWUpXHJcbiAgfSwgW10pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURpc3RhbmNlQWNjZXB0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcclxuICAgIHNldEQodmFsdWUpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZSh2YWx1ZSwgdSlcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIHVdKVxyXG5cclxuICBjb25zdCBoYW5kbGVCdWZmZXJVbml0Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcclxuICAgIHNldFUoZS50YXJnZXQudmFsdWUpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZShkLCBlLnRhcmdldC52YWx1ZSlcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIGRdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICA8TnVtZXJpY0lucHV0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9XHJcbiAgICAgICAgY2xhc3NOYW1lPSdtci0xJ1xyXG4gICAgICAgIHZhbHVlPXtkfVxyXG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVEaXN0YW5jZUNoYW5nZX1cclxuICAgICAgICBvbkFjY2VwdFZhbHVlPXtoYW5kbGVEaXN0YW5jZUFjY2VwdGVkfVxyXG4gICAgICAvPlxyXG4gICAgICA8U2VsZWN0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3VuaXQnKX1cclxuICAgICAgICB2YWx1ZT17dX1cclxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlQnVmZmVyVW5pdENoYW5nZX1cclxuICAgICAgPlxyXG4gICAgICAgIHtPYmplY3QudmFsdWVzKFVuaXRUeXBlKS5tYXAoKHZhbHVlKSA9PiAoXHJcbiAgICAgICAgICA8b3B0aW9uIGtleT17dmFsdWV9IHZhbHVlPXt2YWx1ZX0+XHJcbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZShgdW5pdF8ke3ZhbHVlfWApfVxyXG4gICAgICAgICAgPC9vcHRpb24+XHJcbiAgICAgICAgKSl9XHJcbiAgICAgIDwvU2VsZWN0PlxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG4vLyBUaGlzIGZpbGUgaXMgZHVwbGljYXRlZCBmcm9tICcuLi8uLi8uLi8uLi9mZWF0dXJlLWluZm8vc3JjL3J1bnRpbWUvY29tcG9uZW50cy9mZWF0dXJlLWluZm8nXG5pbXBvcnQgeyBSZWFjdCwgY3NzLCBqc3gsIHR5cGUgRGF0YVNvdXJjZSwgaW5qZWN0SW50bCwgdHlwZSBJbnRsU2hhcGUsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgUmlnaHRGaWxsZWQgfSBmcm9tICdqaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodCdcbmltcG9ydCB7IERvd25GaWxsZWQgfSBmcm9tICdqaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duJ1xuXG5leHBvcnQgZW51bSBMb2FkU3RhdHVzIHtcbiAgUGVuZGluZyA9ICdQZW5kaW5nJyxcbiAgRnVsZmlsbGVkID0gJ0Z1bGZpbGxlZCcsXG4gIFJlamVjdGVkID0gJ1JlamVjdGVkJ1xufVxuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBkYXRhU291cmNlOiBEYXRhU291cmNlXG4gIGdyYXBoaWM6IF9fZXNyaS5HcmFwaGljXG4gIHBvcHVwVGVtcGxhdGU6IF9fZXNyaS5Qb3B1cFRlbXBsYXRlXG4gIGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBfX2VzcmkuUG9wdXBUZW1wbGF0ZVxuICB0b2dnbGFibGU/OiBib29sZWFuXG4gIGV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgbG9hZFN0YXR1czogTG9hZFN0YXR1c1xuICBzaG93Q29udGVudDogYm9vbGVhblxufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgLmVzcmktd2lkZ2V0X19oZWFkaW5nIHtcbiAgICBmb250LXNpemU6IDAuODc1cmVtICFpbXBvcnRhbnQ7XG4gICAgZm9udC13ZWlnaHQ6IDUwMCAhaW1wb3J0YW50O1xuICAgIG1hcmdpbjogMDtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gIH1cblxuICAuZXNyaS1mZWF0dXJlX19jb250ZW50LWVsZW1lbnQge1xuICAgIHBhZGRpbmc6IDA7XG4gIH1cblxuICAuamltdS1idG4uZXhwYW5kZWQge1xuICAgIGFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7XG4gIH1cblxuICAuZXNyaS1mZWF0dXJlLmVzcmktd2lkZ2V0IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgfVxuYFxuXG5pbnRlcmZhY2UgRXh0cmFQcm9wcyB7XG4gIGludGw6IEludGxTaGFwZVxufVxuXG5jbGFzcyBGZWF0dXJlSW5mbyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHMgJiBFeHRyYVByb3BzLCBTdGF0ZT4ge1xuICBwcml2YXRlIEZlYXR1cmU6IHR5cGVvZiBfX2VzcmkuRmVhdHVyZVxuICBwcml2YXRlIGZlYXR1cmU6IF9fZXNyaS5GZWF0dXJlXG4gIHByaXZhdGUgcmVhZG9ubHkgZmVhdHVyZUNvbnRhaW5lcjogUmVhY3QuUmVmT2JqZWN0PEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsPlxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIGNvbnN0IHsgdG9nZ2xhYmxlID0gZmFsc2UsIGV4cGFuZEJ5RGVmYXVsdCB9ID0gdGhpcy5wcm9wc1xuICAgIHRoaXMuZmVhdHVyZUNvbnRhaW5lciA9IFJlYWN0LmNyZWF0ZVJlZigpXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHNob3dDb250ZW50OiAhdG9nZ2xhYmxlIHx8IGV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgIGxvYWRTdGF0dXM6IExvYWRTdGF0dXMuUGVuZGluZ1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmUoKVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IFByb3BzKSB7XG4gICAgaWYgKHRoaXMuZmVhdHVyZSkge1xuICAgICAgaWYgKHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHxcbiAgICAgICAgcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5ncmFwaGljICE9PSB0aGlzLnByb3BzLmdyYXBoaWMpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95RmVhdHVyZSgpXG4gICAgICAgIHRoaXMuY3JlYXRlRmVhdHVyZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZlYXR1cmUudmlzaWJsZUVsZW1lbnRzID0gdGhpcy5nZXRWaXNpYmxlRWxlbWVudHMoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lGZWF0dXJlICgpIHtcbiAgICB0aGlzLmZlYXR1cmUgJiYgIXRoaXMuZmVhdHVyZS5kZXN0cm95ZWQgJiYgdGhpcy5mZWF0dXJlLmRlc3Ryb3koKVxuICB9XG5cbiAgZ2V0VmlzaWJsZUVsZW1lbnRzICgpIHtcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBzaG93Q29udGVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IGV4cGFuZGVkID0gdG9nZ2xhYmxlID8gc2hvd0NvbnRlbnQgOiB0cnVlXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB0cnVlLFxuICAgICAgY29udGVudDoge1xuICAgICAgICBmaWVsZHM6IGV4cGFuZGVkLFxuICAgICAgICB0ZXh0OiBleHBhbmRlZCxcbiAgICAgICAgbWVkaWE6IGV4cGFuZGVkLFxuICAgICAgICBhdHRhY2htZW50czogZXhwYW5kZWRcbiAgICAgIH0sXG4gICAgICBsYXN0RWRpdGVkSW5mbzogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjcmVhdGVGZWF0dXJlICgpIHtcbiAgICBsZXQgZmVhdHVyZU1vZHVsZVByb21pc2VcbiAgICBpZiAodGhpcy5GZWF0dXJlKSB7XG4gICAgICBmZWF0dXJlTW9kdWxlUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGZlYXR1cmVNb2R1bGVQcm9taXNlID0gbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAgICdlc3JpL3dpZGdldHMvRmVhdHVyZSdcbiAgICAgIF0pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgIFtcbiAgICAgICAgICB0aGlzLkZlYXR1cmVcbiAgICAgICAgXSA9IG1vZHVsZXNcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBmZWF0dXJlTW9kdWxlUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50ICYmIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ2ppbXUtd2lkZ2V0J1xuICAgICAgdGhpcy5mZWF0dXJlQ29udGFpbmVyLmN1cnJlbnQuYXBwZW5kQ2hpbGQoY29udGFpbmVyKVxuXG4gICAgICBjb25zdCBvcmlnaW5EUyA9IHRoaXMucHJvcHMuZGF0YVNvdXJjZS5nZXRPcmlnaW5EYXRhU291cmNlcygpXG4gICAgICBjb25zdCByb290RGF0YVNvdXJjZSA9IG9yaWdpbkRTPy5bMF0/LmdldFJvb3REYXRhU291cmNlKClcblxuICAgICAgdGhpcy5kZXN0cm95RmVhdHVyZSgpXG4gICAgICBjb25zdCBsYXllciA9IHRoaXMucHJvcHMuZ3JhcGhpYy5sYXllciBhcyBfX2VzcmkuRmVhdHVyZUxheWVyXG4gICAgICBpZiAodGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMucHJvcHMuZ3JhcGhpYy5wb3B1cFRlbXBsYXRlID0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlXG4gICAgICB9IGVsc2UgaWYgKGxheWVyKSB7XG4gICAgICAgIC8vIHNldCBwb3B1cFRlbXBsYXRlIHdpdGggbGF5ZXIncyBwb3B1cFRlbXBsYXRlIG9yIGRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICAgIHRoaXMucHJvcHMuZ3JhcGhpYy5wb3B1cFRlbXBsYXRlID0gbGF5ZXIucG9wdXBUZW1wbGF0ZSA/PyB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgIH1cbiAgICAgIGlmIChsYXllciAmJiAhbGF5ZXIucG9wdXBUZW1wbGF0ZSkge1xuICAgICAgICBsYXllci5wb3B1cFRlbXBsYXRlID0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlIHx8IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgIH1cbiAgICAgIHRoaXMuZmVhdHVyZSA9IG5ldyB0aGlzLkZlYXR1cmUoe1xuICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGVFbmFibGVkOiB0cnVlLFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgIHNwYXRpYWxSZWZlcmVuY2U6IHRoaXMucHJvcHMuZGF0YVNvdXJjZT8ubGF5ZXI/LnNwYXRpYWxSZWZlcmVuY2UgfHwgbnVsbCxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBtYXA6IHJvb3REYXRhU291cmNlPy5tYXAgfHwgbnVsbCxcbiAgICAgICAgZ3JhcGhpYzogdGhpcy5wcm9wcy5ncmFwaGljLFxuICAgICAgICB2aXNpYmxlRWxlbWVudHM6IHRoaXMuZ2V0VmlzaWJsZUVsZW1lbnRzKClcbiAgICAgIH0pXG4gICAgfSkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgbG9hZFN0YXR1czogTG9hZFN0YXR1cy5GdWxmaWxsZWQgfSlcbiAgICB9KVxuICB9XG5cbiAgdG9nZ2xlRXhwYW5kZWQgPSAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB0aGlzLnNldFN0YXRlKHsgc2hvd0NvbnRlbnQ6ICF0aGlzLnN0YXRlLnNob3dDb250ZW50IH0pXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgdG9nZ2xhYmxlID0gZmFsc2UsIGludGwgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IHNob3dDb250ZW50IH0gPSB0aGlzLnN0YXRlXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmZWF0dXJlLWluZm8tY29tcG9uZW50IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgcC0yJyBjc3M9e3N0eWxlfT5cbiAgICAgICAge3RvZ2dsYWJsZSAmJiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgYXJpYS1sYWJlbD17aW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6IHNob3dDb250ZW50ID8gJ2NvbGxhcHNlJyA6ICdleHBhbmQnIH0pfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdwLTAgamltdS1vdXRsaW5lLWluc2lkZSBmbGV4LXNocmluay0wJywgeyBleHBhbmRlZDogc2hvd0NvbnRlbnQgfSl9XG4gICAgICAgICAgICB2YXJpYW50PSd0ZXh0J1xuICAgICAgICAgICAgY29sb3I9J2luaGVyaXQnXG4gICAgICAgICAgICBpY29uXG4gICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRXhwYW5kZWR9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3Nob3dDb250ZW50ID8gPERvd25GaWxsZWQgc2l6ZT0ncycvPiA6IDxSaWdodEZpbGxlZCBzaXplPSdzJyBhdXRvRmxpcC8+fVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC1ncm93LTEnIHJlZj17dGhpcy5mZWF0dXJlQ29udGFpbmVyfSAvPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGluamVjdEludGwoRmVhdHVyZUluZm8pXG5cblxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcywgdHlwZSBJbW11dGFibGVBcnJheSwgbG9kYXNoLCBsb2FkQXJjR0lTSlNBUElNb2R1bGUsIHV0aWxzLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcclxuaW1wb3J0IHsgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHR5cGUgeyBDcmVhdGVUb29sVHlwZSwgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCB7IEludGVyYWN0aXZlRHJhdyB9IGZyb20gJy4vaW50ZXJhY3RpdmUtZHJhdy10b29sJ1xyXG5pbXBvcnQgeyBCdWZmZXJJbnB1dCB9IGZyb20gJy4vYnVmZmVyLWlucHV0J1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgbWFwV2lkZ2V0SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XHJcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xyXG4gIGNyZWF0ZVRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XHJcbiAgZW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgYnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGJ1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG4gIG9uR2VvbWV0cnlDaGFuZ2U6IChnZW9tOiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2VvbWV0cnlGcm9tRHJhdyAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvbkdlb21ldHJ5Q2hhbmdlLCBjcmVhdGVUb29sVHlwZXMsIG1hcFdpZGdldElkcywgZW5hYmxlQnVmZmVyLCBidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdCwgb25CdWZmZXJDaGFuZ2UsIHdpZGdldElkIH0gPSBwcm9wc1xyXG4gIGNvbnN0IFtqaW11TWFwVmlldywgc2V0SmltdU1hcFZpZXddID0gUmVhY3QudXNlU3RhdGU8SmltdU1hcFZpZXc+KG51bGwpXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihqaW11VUlNZXNzYWdlcywgZGVmYXVsdE1lc3NhZ2UpXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG4gIGNvbnN0IGdldExheWVyRnVuUmVmID0gUmVhY3QudXNlUmVmPCgpID0+IF9fZXNyaS5HcmFwaGljc0xheWVyPihudWxsKVxyXG4gIGNvbnN0IGJ1ZmZlck9wZXJhdG9yUmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5idWZmZXJPcGVyYXRvcj4obnVsbClcclxuICBjb25zdCBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5nZW9kZXNpY0J1ZmZlck9wZXJhdG9yPihudWxsKVxyXG4gIGNvbnN0IGdlb21ldHJ5U2VydmljZVJlZiA9IFJlYWN0LnVzZVJlZjx7IGdlb21ldHJ5U2VydmljZTogX19lc3JpLmdlb21ldHJ5U2VydmljZSwgYnVmZmVyUGFyYW1ldGVyczogdHlwZW9mIF9fZXNyaS5CdWZmZXJQYXJhbWV0ZXJzIH0+KG51bGwpXHJcbiAgY29uc3QgZ2VvbWV0cnlSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLkdlb21ldHJ5PihudWxsKVxyXG4gIGNvbnN0IGJ1ZmZlckRpc3RhbmNlUmVmID0gUmVhY3QudXNlUmVmKGJ1ZmZlckRpc3RhbmNlKVxyXG4gIGNvbnN0IGJ1ZmZlclVuaXRSZWYgPSBSZWFjdC51c2VSZWYoYnVmZmVyVW5pdClcclxuICBjb25zdCBidWZmZXJlZEdyYXBoaWNSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLkdyYXBoaWM+KG51bGwpXHJcblxyXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xyXG4gICAgaWYgKGVuYWJsZUJ1ZmZlcikge1xyXG4gICAgICAvLyBQYXJlbnQgY29tcG9uZW50IHF1ZXJ5LXRhc2stc3BhdGlhbC1mb3JtIHdpbGwgcmVzZXQgYnVmZmVyIHBhcmFtZXRlciB3aGVuIGZpbHRlciB0eXBlIGNoYW5nZXMsXHJcbiAgICAgIC8vIHNvIGRlZmVyIHRoZSBpbml0IGJ1ZmZlciBvcHRpb24gaW4gb3JkZXIgbm90IHRvIGJlIG92ZXJyaWRlIGJ5IGl0cyBwYXJlbnQuXHJcbiAgICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XHJcbiAgICAgICAgb25CdWZmZXJDaGFuZ2UoYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcclxuICAgICAgJ2VzcmkvR3JhcGhpYydcclxuICAgIF0pLnRoZW4oKG1vZHVsZXMpID0+IHtcclxuICAgICAgY29uc3QgR3JhcGhpYyA9IG1vZHVsZXNbMF1cclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQgPSBuZXcgR3JhcGhpYyh7XHJcbiAgICAgICAgc3ltYm9sOiB7XHJcbiAgICAgICAgICB0eXBlOiAnc2ltcGxlLWZpbGwnLFxyXG4gICAgICAgICAgY29sb3I6IFs1MSwgNTEsIDIwNCwgMC41XSxcclxuICAgICAgICAgIHN0eWxlOiAnc29saWQnLFxyXG4gICAgICAgICAgb3V0bGluZToge1xyXG4gICAgICAgICAgICBjb2xvcjogWzUxLCA1MSwgMjA0LCAwLjhdLFxyXG4gICAgICAgICAgICB3aWR0aDogMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgYXBwbHlCdWZmZXJFZmZlY3QgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWdlb21ldHJ5UmVmLmN1cnJlbnQgfHwgIWVuYWJsZUJ1ZmZlciB8fCBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50ID09PSAwKSB7XHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gbnVsbFxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGUgZW5kIHVzZXIgdXNlcyBhIHBvaW50IG9yIGxpbmUgcXVlcnkgZ2VvbWV0cnksIHRoZW4gdGhlIG5lZ2F0aXZlIGJ1ZmZlciB3aWxsIG5vdCB3b3JrIChzYW1lIGVmZmVjdCBhcyB0aGVyZSBpcyBubyBidWZmZXIpXHJcbiAgICBjb25zdCBpc1BvaW50TmVnYXRpdmVCdWZmZXIgPSAoZ2VvbWV0cnlSZWYuY3VycmVudD8udHlwZSA9PT0gJ3BvaW50JyB8fCBnZW9tZXRyeVJlZi5jdXJyZW50Py50eXBlID09PSAnbXVsdGlwb2ludCcpICYmIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPCAwXHJcbiAgICBjb25zdCBpc0xpbmVOZWdhdGl2ZUJ1ZmZlciA9IGdlb21ldHJ5UmVmLmN1cnJlbnQ/LnR5cGUgPT09ICdwb2x5bGluZScgJiYgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA8IDBcclxuICAgIGlmIChpc1BvaW50TmVnYXRpdmVCdWZmZXIgfHwgaXNMaW5lTmVnYXRpdmVCdWZmZXIpIHtcclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBudWxsXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGdlb21ldHJ5ID0gZ2VvbWV0cnlSZWYuY3VycmVudFxyXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmFyY2dpcy5jb20vamF2YXNjcmlwdC9sYXRlc3QvYXBpLXJlZmVyZW5jZS9lc3JpLWdlb21ldHJ5LWdlb21ldHJ5RW5naW5lLmh0bWwjYnVmZmVyXHJcbiAgICBpZiAoZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT8uaXNHZW9ncmFwaGljICYmICFnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLmlzV0dTODQpIHtcclxuICAgICAgY29uc3Qgc2VydmljZVVybCA9IHV0aWxzLmdldEdlb21ldHJ5U2VydmljZSgpXHJcbiAgICAgIGlmICghZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBjb25zdCBtb2R1bGVzID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXHJcbiAgICAgICAgICAnZXNyaS9yZXN0L2dlb21ldHJ5U2VydmljZScsXHJcbiAgICAgICAgICAnZXNyaS9yZXN0L3N1cHBvcnQvQnVmZmVyUGFyYW1ldGVycydcclxuICAgICAgICBdKVxyXG4gICAgICAgIGdlb21ldHJ5U2VydmljZVJlZi5jdXJyZW50ID0ge1xyXG4gICAgICAgICAgZ2VvbWV0cnlTZXJ2aWNlOiBtb2R1bGVzWzBdLFxyXG4gICAgICAgICAgYnVmZmVyUGFyYW1ldGVyczogbW9kdWxlc1sxXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zdCB7IGdlb21ldHJ5U2VydmljZSwgYnVmZmVyUGFyYW1ldGVyczogQnVmZmVyUGFyYW1ldGVycyB9ID0gZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnRcclxuICAgICAgY29uc3QgcG9seWdvbnMgPSBhd2FpdCBnZW9tZXRyeVNlcnZpY2UuYnVmZmVyKHNlcnZpY2VVcmwsIG5ldyBCdWZmZXJQYXJhbWV0ZXJzKHtcclxuICAgICAgICBkaXN0YW5jZXM6IFtidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50XSxcclxuICAgICAgICB1bml0OiBsb2Rhc2gua2ViYWJDYXNlKGJ1ZmZlclVuaXRSZWYuY3VycmVudCkgYXMgYW55LFxyXG4gICAgICAgIGdlb2Rlc2ljOiB0cnVlLFxyXG4gICAgICAgIGJ1ZmZlclNwYXRpYWxSZWZlcmVuY2U6IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UsXHJcbiAgICAgICAgb3V0U3BhdGlhbFJlZmVyZW5jZTogZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSxcclxuICAgICAgICBnZW9tZXRyaWVzOiBbZ2VvbWV0cnldXHJcbiAgICAgIH0pKVxyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IHBvbHlnb25zWzBdXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT8uaXNXR1M4NCB8fCBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc1dlYk1lcmNhdG9yKSB7XHJcbiAgICAgICAgaWYgKCFnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZSgnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvZ2VvZGVzaWNCdWZmZXJPcGVyYXRvcicpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmlzTG9hZGVkKCkpIHtcclxuICAgICAgICAgIGF3YWl0IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5sb2FkKClcclxuICAgICAgICB9XHJcbiAgICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuZXhlY3V0ZShcclxuICAgICAgICAgIGdlb21ldHJ5IGFzIF9fZXNyaS5HZW9tZXRyeVVuaW9uLFxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdW5pdDogbG9kYXNoLmtlYmFiQ2FzZShidWZmZXJVbml0UmVmLmN1cnJlbnQpIGFzIGFueVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIWJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGUoJ2VzcmkvZ2VvbWV0cnkvb3BlcmF0b3JzL2J1ZmZlck9wZXJhdG9yJylcclxuICAgICAgICB9XHJcbiAgICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBidWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmV4ZWN1dGUoXHJcbiAgICAgICAgICBnZW9tZXRyeSBhcyBfX2VzcmkuR2VvbWV0cnlVbmlvbixcclxuICAgICAgICAgIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHVuaXQ6IGxvZGFzaC5rZWJhYkNhc2UoYnVmZmVyVW5pdFJlZi5jdXJyZW50KSBhcyBhbnlcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbZW5hYmxlQnVmZmVyXSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KCkucmVtb3ZlQWxsKClcclxuICAgICAgb25HZW9tZXRyeUNoYW5nZShudWxsKVxyXG4gICAgfVxyXG4gIH0sIFtxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sLCBvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykgPT4ge1xyXG4gICAgLy8gY2xlYXIgZHJhd2luZyBncmFwaGljcyBiZWZvcmUgc3dpdGNoaW5nIG1hcCB2aWV3XHJcbiAgICBjb25zdCBsYXllciA9IGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCgpXHJcbiAgICBpZiAobGF5ZXIpIHtcclxuICAgICAgbGF5ZXIucmVtb3ZlQWxsKClcclxuICAgICAgb25HZW9tZXRyeUNoYW5nZShudWxsKVxyXG4gICAgfVxyXG4gICAgc2V0SmltdU1hcFZpZXcoamltdU1hcFZpZXc/LnZpZXcgIT0gbnVsbCA/IGppbXVNYXBWaWV3IDogbnVsbClcclxuICB9LCBbb25HZW9tZXRyeUNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUJ1ZmZlckNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChkaXN0YW5jZSwgdW5pdCkgPT4ge1xyXG4gICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA9IGRpc3RhbmNlXHJcbiAgICBidWZmZXJVbml0UmVmLmN1cnJlbnQgPSB1bml0XHJcbiAgICBhcHBseUJ1ZmZlckVmZmVjdCgpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIGFwcGx5QnVmZmVyRWZmZWN0XSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRHJhd0VuZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChncmFwaGljLCBnZXRMYXllckZ1biwgY2xlYXJBZnRlckFwcGx5KSA9PiB7XHJcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ID0gZ2V0TGF5ZXJGdW5cclxuICAgIGNvbnN0IGxheWVyID0gZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KClcclxuICAgIC8vIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgZ2VvbWV0cnkgaXMgdGhlIHNhbWUgYXMgdGhlIHByZXZpb3VzIG9uZSwgb25seSB0aGUgY2xlYXJBZnRlckFwcGx5IGlzIGNoYW5nZWQuXHJcbiAgICBpZiAoZ2VvbWV0cnlSZWYuY3VycmVudCAhPT0gZ3JhcGhpYz8uZ2VvbWV0cnkpIHtcclxuICAgICAgZ2VvbWV0cnlSZWYuY3VycmVudCA9IGdyYXBoaWM/Lmdlb21ldHJ5XHJcbiAgICAgIGFwcGx5QnVmZmVyRWZmZWN0KCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgaWYgKGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5KSB7XHJcbiAgICAgICAgICBsYXllcj8uYWRkKGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50KVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIG9uR2VvbWV0cnlDaGFuZ2UoZ3JhcGhpYz8uZ2VvbWV0cnksIGxheWVyLCBncmFwaGljLCBjbGVhckFmdGVyQXBwbHkpXHJcbiAgfSwgW29uR2VvbWV0cnlDaGFuZ2UsIGFwcGx5QnVmZmVyRWZmZWN0XSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAge1xyXG4gICAgICAgIG1hcFdpZGdldElkcz8ubWFwKChtYXBXaWRnZXRJZCwgeCkgPT4gKFxyXG4gICAgICAgICAgPEppbXVNYXBWaWV3Q29tcG9uZW50XHJcbiAgICAgICAgICAgIGtleT17eH0gdXNlTWFwV2lkZ2V0SWQ9e21hcFdpZGdldElkfSBvbkFjdGl2ZVZpZXdDaGFuZ2U9e2hhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSlcclxuICAgICAgfVxyXG4gICAgICB7amltdU1hcFZpZXc/LnZpZXcgJiYgKFxyXG4gICAgICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAgICAgIDxJbnRlcmFjdGl2ZURyYXdcclxuICAgICAgICAgICAgamltdU1hcFZpZXc9e2ppbXVNYXBWaWV3fVxyXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XHJcbiAgICAgICAgICAgIHRvb2xUeXBlcz17Y3JlYXRlVG9vbFR5cGVzfVxyXG4gICAgICAgICAgICBvbkRyYXdFbmQ9e2hhbmRsZURyYXdFbmR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAge2VuYWJsZUJ1ZmZlciAmJiAoXHJcbiAgICAgICAgICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGNsYXNzTmFtZT0ndGl0bGUzJyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX0gY3NzPXtjc3NgbWFyZ2luLXRvcDogMC43NXJlbTtgfT5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZSc+e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfTwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggbXQtMSc+XHJcbiAgICAgICAgICAgICAgICA8QnVmZmVySW5wdXQgZGlzdGFuY2U9e2J1ZmZlckRpc3RhbmNlfSB1bml0PXtidWZmZXJVbml0fSBvbkJ1ZmZlckNoYW5nZT17aGFuZGxlQnVmZmVyQ2hhbmdlfS8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICApfVxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAgUmVhY3RSZWR1eCxcclxuICBqc3gsXHJcbiAgY3NzLFxyXG4gIEltbXV0YWJsZSxcclxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxyXG4gIHR5cGUgVXNlRGF0YVNvdXJjZSxcclxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxyXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxyXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXHJcbiAgaG9va3MsXHJcbiAgdHlwZSBEYXRhU291cmNlLFxyXG4gIHR5cGUgSU1TdGF0ZSxcclxuICBEYXRhU291cmNlU3RhdHVzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIE9wdGlvbiwgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgeyBCdWZmZXJJbnB1dCB9IGZyb20gJy4vYnVmZmVyLWlucHV0J1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuY29uc3QgbWFyZ2luU3R5bGUgPSBjc3NgbWFyZ2luLXRvcDogMC43NXJlbTtgXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNwYXRpYWxSZWxhdGlvbnM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxSZWxhdGlvbj5cclxuICB1c2VEYXRhU291cmNlczogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT5cclxuICB1c2VSdW50aW1lRGF0YTogYm9vbGVhblxyXG4gIGVuYWJsZUJ1ZmZlcjogYm9vbGVhblxyXG4gIGJ1ZmZlckRpc3RhbmNlOiBudW1iZXJcclxuICBidWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIG9uU2VsZWN0aW9uQ2hhbmdlOiAoZ2VvbXM6IF9fZXNyaS5HZW9tZXRyeVtdKSA9PiB2b2lkXHJcbiAgb25SZWxhdGlvbkNoYW5nZTogKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB2b2lkXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSdW50aW1lRGF0YVNvdXJjZSAoKTogeyBbZHNJZDogc3RyaW5nXTogRGF0YVNvdXJjZSB9IHtcclxuICBjb25zdCByZXN1bHQgPSB7fVxyXG4gIGxldCBub3RFbXB0eSA9IGZhbHNlXHJcbiAgY29uc3QgZHNNYXAgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2VzKClcclxuICBPYmplY3Qua2V5cyhkc01hcCkuZm9yRWFjaChkc0lkID0+IHtcclxuICAgIGNvbnN0IGRzID0gZHNNYXBbZHNJZF1cclxuICAgIC8vIG9ubHkgaW5jbHVkZSB0aGUgZHMgdGhhdCBoYXMgZ2VvbWV0cnlcclxuICAgIGlmIChkcy5nZXRHZW9tZXRyeVR5cGUoKSAhPSBudWxsICYmICFkcy5pc0luQXBwQ29uZmlnKCkgJiYgZHMuZ2V0TWFpbkRhdGFTb3VyY2UoKS5pZCA9PT0gZHNJZCAmJiAhZHMuZ2V0RGF0YVNvdXJjZUpzb24oKS5pc091dHB1dEZyb21XaWRnZXQpIHtcclxuICAgICAgcmVzdWx0W2RzSWRdID0gZHNcclxuICAgICAgbm90RW1wdHkgPSB0cnVlXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIG5vdEVtcHR5ID8gcmVzdWx0IDogbnVsbFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2VvbWV0cnlGcm9tRGF0YVNvdXJjZSAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvblNlbGVjdGlvbkNoYW5nZSwgdXNlRGF0YVNvdXJjZXMgPSBbXSwgdXNlUnVudGltZURhdGEsIHNwYXRpYWxSZWxhdGlvbnMsIGVuYWJsZUJ1ZmZlciwgYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQsIG9uQnVmZmVyQ2hhbmdlLCBvblJlbGF0aW9uQ2hhbmdlIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oamltdVVJTWVzc2FnZXMsIGRlZmF1bHRNZXNzYWdlKVxyXG4gIGNvbnN0IFtjdXJyZW50RGF0YVNvdXJjZSwgc2V0Q3VycmVudERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGUodXNlRGF0YVNvdXJjZXNbMF0pXHJcbiAgY29uc3QgW3J1bnRpbWVEYXRhU291cmNlLCBzZXRSdW50aW1lRGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPigpXHJcbiAgY29uc3QgW2NvdW50LCBzZXRDb3VudF0gPSBSZWFjdC51c2VTdGF0ZSgwKVxyXG4gIGNvbnN0IFtjdXJyZW50UmVsYXRpb24sIHNldEN1cnJlbnRSZWxhdGlvbl0gPSBSZWFjdC51c2VTdGF0ZShzcGF0aWFsUmVsYXRpb25zPy5bMF0pXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG4gIGNvbnN0IHRyYW5zbGF0ZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKClcclxuXHJcbiAgY29uc3Qgc3BhdGlhbFJlbGF0aW9uT3B0aW9uczogQXJyYXk8eyB2YWx1ZTogc3RyaW5nLCBsYWJlbDogc3RyaW5nIH0+ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoU3BhdGlhbFJlbGF0aW9uKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gKHtcclxuICAgICAgdmFsdWUsXHJcbiAgICAgIGxhYmVsOiBnZXRJMThuTWVzc2FnZShgc3BhdGlhbFJlbGF0aW9uXyR7a2V5fWApXHJcbiAgICB9KSlcclxuICB9LCBbZ2V0STE4bk1lc3NhZ2VdKVxyXG5cclxuICBjb25zdCBsb2FkZWRVc2VEYXRhU291cmNlcyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBjb25zdCBsb2FkZWQgPSBbXVxyXG4gICAgdXNlRGF0YVNvdXJjZXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBpZiAoc3RhdGUuZGF0YVNvdXJjZXNJbmZvPy5baXRlbS5tYWluRGF0YVNvdXJjZUlkXT8uaW5zdGFuY2VTdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuQ3JlYXRlZCkge1xyXG4gICAgICAgIGxvYWRlZC5wdXNoKGl0ZW0uZGF0YVNvdXJjZUlkKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgaWYgKGxvYWRlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiBsb2FkZWQuam9pbignLCcpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gJydcclxuICB9KVxyXG5cclxuICBjb25zdCBudW1PZkRzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGlmICghdXNlUnVudGltZURhdGEpIHtcclxuICAgICAgcmV0dXJuIDBcclxuICAgIH1cclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhzdGF0ZS5kYXRhU291cmNlc0luZm8gPz8ge30pLmZpbHRlcihkc0lkID0+IHN0YXRlLmRhdGFTb3VyY2VzSW5mb1tkc0lkXS5pbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVkKS5sZW5ndGhcclxuICB9KVxyXG5cclxuICBjb25zdCBydW50aW1lRGF0YVNvdXJjZXMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIGlmIChudW1PZkRzID4gMCkge1xyXG4gICAgICByZXR1cm4gZ2V0UnVudGltZURhdGFTb3VyY2UoKVxyXG4gICAgfVxyXG4gIH0sIFtudW1PZkRzXSlcclxuXHJcbiAgY29uc3QgbnVtT2ZSdW50aW1lRHMgPSBPYmplY3Qua2V5cyhydW50aW1lRGF0YVNvdXJjZXMgPz8ge30pLmxlbmd0aFxyXG5cclxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcclxuICAgIGlmIChzcGF0aWFsUmVsYXRpb25zPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2Uoc3BhdGlhbFJlbGF0aW9uc1swXSlcclxuICAgIH1cclxuICAgIGlmIChlbmFibGVCdWZmZXIpIHtcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQpXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShzcGF0aWFsUmVsYXRpb25zPy5bMF0pXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIG9uUmVsYXRpb25DaGFuZ2UsIHNwYXRpYWxSZWxhdGlvbnNdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFzcGF0aWFsUmVsYXRpb25zKSB7XHJcbiAgICAgIHNldEN1cnJlbnRSZWxhdGlvbihudWxsKVxyXG4gICAgfSBlbHNlIGlmICghc3BhdGlhbFJlbGF0aW9ucy5pbmNsdWRlcyhjdXJyZW50UmVsYXRpb24pKSB7XHJcbiAgICAgIHNldEN1cnJlbnRSZWxhdGlvbihzcGF0aWFsUmVsYXRpb25zWzBdKVxyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKHNwYXRpYWxSZWxhdGlvbnNbMF0pXHJcbiAgICB9XHJcbiAgfSwgW3NwYXRpYWxSZWxhdGlvbnMsIGN1cnJlbnRSZWxhdGlvbiwgb25SZWxhdGlvbkNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhcclxuICAgIChkc0lkOiBzdHJpbmcpID0+IHtcclxuICAgICAgY29uc3QgZHMgPSB1c2VEYXRhU291cmNlcy5maW5kKChpdGVtKSA9PiBpdGVtLmRhdGFTb3VyY2VJZCA9PT0gZHNJZClcclxuICAgICAgc2V0Q3VycmVudERhdGFTb3VyY2UoSW1tdXRhYmxlKGRzKSlcclxuICAgICAgc2V0UnVudGltZURhdGFTb3VyY2UobnVsbClcclxuICAgIH0sXHJcbiAgICBbdXNlRGF0YVNvdXJjZXNdXHJcbiAgKVxyXG5cclxuICBjb25zdCBoYW5kbGVSdW50aW1lRGF0YVNvdXJjZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxyXG4gICAgKGRzSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShkc0lkKVxyXG4gICAgICBzZXRSdW50aW1lRGF0YVNvdXJjZShkcylcclxuICAgICAgc2V0Q3VycmVudERhdGFTb3VyY2UobnVsbClcclxuICAgIH0sXHJcbiAgICBbXVxyXG4gIClcclxuXHJcbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShjdXJyZW50RGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkID8/IHJ1bnRpbWVEYXRhU291cmNlPy5pZClcclxuICAgIGNvbnN0IHJlY29yZHMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxyXG4gICAgaWYgKHJlY29yZHM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgZ2VvbWV0cmllcyA9IHJlY29yZHMubWFwKChyZWNvcmQpID0+IHJlY29yZC5nZXRKU0FQSUdlb21ldHJ5KCkpXHJcbiAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlKGdlb21ldHJpZXMpXHJcbiAgICAgIHNldENvdW50KHJlY29yZHMubGVuZ3RoKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb25TZWxlY3Rpb25DaGFuZ2UobnVsbClcclxuICAgICAgc2V0Q291bnQoMClcclxuICAgIH1cclxuICB9LCBbY3VycmVudERhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCwgcnVudGltZURhdGFTb3VyY2U/LmlkLCBvblNlbGVjdGlvbkNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGdldExhYmVsT2ZTcGF0aWFsUmVsYXRpb24gPSAocmVsYXRpb246IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcbiAgICByZXR1cm4gc3BhdGlhbFJlbGF0aW9uT3B0aW9ucy5maW5kKGl0ZW0gPT4gaXRlbS52YWx1ZSA9PT0gcmVsYXRpb24pLmxhYmVsXHJcbiAgfVxyXG5cclxuICBjb25zdCBoYW5kbGVTcGF0aWFsUmVsYXRpb25DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhlID0+IHtcclxuICAgIHNldEN1cnJlbnRSZWxhdGlvbihlLnRhcmdldC52YWx1ZSlcclxuICAgIG9uUmVsYXRpb25DaGFuZ2UoZS50YXJnZXQudmFsdWUpXHJcbiAgfSwgW29uUmVsYXRpb25DaGFuZ2VdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdj5cclxuICAgICAgPGRpdiBjc3M9e21hcmdpblN0eWxlfSBjbGFzc05hbWU9J3RpdGxlMyc+e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJMYXllcicpfTwvZGl2PlxyXG4gICAgICA8U2VsZWN0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlckxheWVyJyl9XHJcbiAgICAgICAgdmFsdWU9e2N1cnJlbnREYXRhU291cmNlPy5kYXRhU291cmNlSWQgPz8gcnVudGltZURhdGFTb3VyY2U/LmlkfVxyXG4gICAgICA+XHJcbiAgICAgICAge251bU9mUnVudGltZURzID4gMCAmJiB1c2VEYXRhU291cmNlcy5sZW5ndGggPiAwICYmIDxPcHRpb24gaGVhZGVyPntnZXRJMThuTWVzc2FnZSgncHJlY29uZmlndXJlZCcpfTwvT3B0aW9uPn1cclxuICAgICAgICB7dXNlRGF0YVNvdXJjZXMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShpdGVtLmRhdGFTb3VyY2VJZClcclxuICAgICAgICAgIGlmIChsb2FkZWRVc2VEYXRhU291cmNlcy5pbmNsdWRlcyhpdGVtLmRhdGFTb3VyY2VJZCkgfHwgZHM/LmdldExhYmVsKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICA8T3B0aW9uIGtleT17aXRlbS5kYXRhU291cmNlSWR9IHZhbHVlPXtpdGVtLmRhdGFTb3VyY2VJZH0gb25DbGljaz17KCkgPT4geyBoYW5kbGVEYXRhU291cmNlQ2hhbmdlKGl0ZW0uZGF0YVNvdXJjZUlkKSB9fT5cclxuICAgICAgICAgICAgICB7ZHM/LmdldExhYmVsKCl9XHJcbiAgICAgICAgICAgICAgPC9PcHRpb24+XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxPcHRpb24ga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0+XHJcbiAgICAgICAgICAgICAge3RyYW5zbGF0ZSgnbG9hZGluZycpfVxyXG4gICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgIClcclxuICAgICAgICB9KX1cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIHVzZURhdGFTb3VyY2VzLmxlbmd0aCA+IDAgJiYgPE9wdGlvbiBkaXZpZGVyLz59XHJcbiAgICAgICAge251bU9mUnVudGltZURzID4gMCAmJiA8T3B0aW9uIGhlYWRlcj57Z2V0STE4bk1lc3NhZ2UoJ3J1bnRpbWUnKX08L09wdGlvbj59XHJcbiAgICAgICAge09iamVjdC5rZXlzKHJ1bnRpbWVEYXRhU291cmNlcyA/PyB7fSkubWFwKGRzSWQgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZHMgPSBydW50aW1lRGF0YVNvdXJjZXNbZHNJZF1cclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxPcHRpb24ga2V5PXtkc0lkfSB2YWx1ZT17ZHNJZH0gb25DbGljaz17KCkgPT4geyBoYW5kbGVSdW50aW1lRGF0YVNvdXJjZUNoYW5nZShkc0lkKSB9fT5cclxuICAgICAgICAgICAgICB7ZHMuZ2V0TGFiZWwoKX1cclxuICAgICAgICAgICAgPC9PcHRpb24+XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfSl9XHJcbiAgICAgIDwvU2VsZWN0PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbXQtMSBmb250LWl0YWxpYycgY3NzPXtjc3NgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLWhpbnQpO2B9PntnZXRJMThuTWVzc2FnZSgnc2VsZWN0ZWRSZWNvcmRzJywgeyBudW06IGNvdW50IH0pfTwvZGl2PlxyXG4gICAgICB7c3BhdGlhbFJlbGF0aW9ucz8ubGVuZ3RoID4gMCAmJiAoXHJcbiAgICAgICAgPGRpdiBjc3M9e21hcmdpblN0eWxlfT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlIHRpdGxlMyBtYi0wJz57Z2V0STE4bk1lc3NhZ2UoJ3JlbGF0aW9uc2hpcCcpfTwvZGl2PlxyXG4gICAgICAgICAgPFNlbGVjdFxyXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVsYXRpb25zaGlwJyl9XHJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50UmVsYXRpb259XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTcGF0aWFsUmVsYXRpb25DaGFuZ2V9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtzcGF0aWFsUmVsYXRpb25zLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aXRlbX0gdmFsdWU9e2l0ZW19PntnZXRMYWJlbE9mU3BhdGlhbFJlbGF0aW9uKGl0ZW0pfTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAge2VuYWJsZUJ1ZmZlciAmJiAoXHJcbiAgICAgICAgPGRpdiByb2xlPSdncm91cCcgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9IGNzcz17bWFyZ2luU3R5bGV9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpdGxlMyB0ZXh0LXRydW5jYXRlJz57Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IG10LTEnPlxyXG4gICAgICAgICAgICA8QnVmZmVySW5wdXQgZGlzdGFuY2U9e2J1ZmZlckRpc3RhbmNlfSB1bml0PXtidWZmZXJVbml0fSBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9Lz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCB1c2VEYXRhU291cmNlPXtjdXJyZW50RGF0YVNvdXJjZX0gZGF0YVNvdXJjZT17cnVudGltZURhdGFTb3VyY2V9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlfSAvPlxyXG4gICAgICB7dXNlRGF0YVNvdXJjZXMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBkYXRhc291cmNlIGlzIGNyZWF0ZWRcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0gdXNlRGF0YVNvdXJjZT17aXRlbX0vPlxyXG4gICAgICAgIClcclxuICAgICAgfSl9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBqc3gsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZSwgdHlwZSBJbW11dGFibGVBcnJheSB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcclxuaW1wb3J0IHR5cGUgeyBDcmVhdGVUb29sVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIG1hcFdpZGdldElkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxyXG4gIGNyZWF0ZVRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XHJcbiAgb25HZW9tZXRyeUNoYW5nZTogKGdlb206IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21NYXAgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgb25HZW9tZXRyeUNoYW5nZSwgbWFwV2lkZ2V0SWRzIH0gPSBwcm9wc1xyXG4gIGNvbnN0IFtqaW11TWFwVmlldywgc2V0SmltdU1hcFZpZXddID0gUmVhY3QudXNlU3RhdGU8SmltdU1hcFZpZXc+KG51bGwpXHJcbiAgY29uc3QgUG9seWdvblJlZiA9IFJlYWN0LnVzZVJlZjx0eXBlb2YgX19lc3JpLlBvbHlnb24+KG51bGwpXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoamltdU1hcFZpZXc/LnZpZXcpIHtcclxuICAgICAgbGV0IGhhbmRsZXI6IElIYW5kbGVcclxuICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlKCdlc3JpL2NvcmUvcmVhY3RpdmVVdGlscycpLnRoZW4oKHJlYWN0aXZlVXRpbHM6IF9fZXNyaS5yZWFjdGl2ZVV0aWxzKSA9PiB7XHJcbiAgICAgICAgaGFuZGxlciA9IHJlYWN0aXZlVXRpbHMud2F0Y2goKCkgPT4gamltdU1hcFZpZXcudmlldy5leHRlbnQsIChleHRlbnQ6IF9fZXNyaS5FeHRlbnQpID0+IHtcclxuICAgICAgICAgIGlmIChQb2x5Z29uUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgb25HZW9tZXRyeUNoYW5nZShQb2x5Z29uUmVmLmN1cnJlbnQuZnJvbUV4dGVudChleHRlbnQpKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2VzcmkvZ2VvbWV0cnkvUG9seWdvbiddKS50aGVuKG1vZHVsZXMgPT4ge1xyXG4gICAgICAgICAgICAgIFBvbHlnb25SZWYuY3VycmVudCA9IG1vZHVsZXNbMF1cclxuICAgICAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKFBvbHlnb25SZWYuY3VycmVudC5mcm9tRXh0ZW50KGV4dGVudCkpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvLyBzZXQgaW5pdGlhbCBleHRlbnRcclxuICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKGppbXVNYXBWaWV3LnZpZXcuZXh0ZW50KVxyXG4gICAgICB9KVxyXG4gICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICBoYW5kbGVyLnJlbW92ZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgW2ppbXVNYXBWaWV3LCBvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykgPT4ge1xyXG4gICAgc2V0SmltdU1hcFZpZXcoamltdU1hcFZpZXc/LnZpZXcgIT0gbnVsbCA/IGppbXVNYXBWaWV3IDogbnVsbClcclxuICB9LCBbXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAge1xyXG4gICAgICAgIG1hcFdpZGdldElkcz8ubWFwKChtYXBXaWRnZXRJZCwgeCkgPT4gKFxyXG4gICAgICAgICAgPEppbXVNYXBWaWV3Q29tcG9uZW50XHJcbiAgICAgICAgICAgIGtleT17eH0gdXNlTWFwV2lkZ2V0SWQ9e21hcFdpZGdldElkfSBvbkFjdGl2ZVZpZXdDaGFuZ2U9e2hhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSlcclxuICAgICAgfVxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwganN4LCB0eXBlIEltbXV0YWJsZUFycmF5LCBtb2R1bGVMb2FkZXIsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBKaW11TWFwVmlldyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHR5cGUgKiBhcyBqaW11TWFwIGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvbWFwJ1xuaW1wb3J0IHsgQ3JlYXRlVG9vbFR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBFbnRpdHlTdGF0dXNUeXBlLCBTdGF0dXNJbmRpY2F0b3IgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuZXhwb3J0IGludGVyZmFjZSBJbnRlcmFjdGl2ZURyYXdQcm9wcyB7XG4gIGppbXVNYXBWaWV3OiBKaW11TWFwVmlld1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XG4gIG9uRHJhd0VuZDogKGdyYXBoaWM6IF9fZXNyaS5HcmFwaGljLCBnZXRMYXllckZ1bj8sIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHZvaWRcbn1cblxuY29uc3Qgc2tldGNoVG9vbEluZm9NYXAgPSB7XG4gIFtDcmVhdGVUb29sVHlwZS5Qb2ludF06IHsgZHJhd1Rvb2xOYW1lOiAncG9pbnQnLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvaW50JywgdG9vbEluZGV4OiAwIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5Qb2x5bGluZV06IHsgZHJhd1Rvb2xOYW1lOiAncG9seWxpbmUnLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvbHlsaW5lJywgdG9vbEluZGV4OiA0IH0sXG4gIFtDcmVhdGVUb29sVHlwZS5Qb2x5Z29uXTogeyBkcmF3VG9vbE5hbWU6ICdwb2x5Z29uJywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1wb2x5Z29uJywgdG9vbEluZGV4OiAyIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5SZWN0YW5nbGVdOiB7XG4gICAgZHJhd1Rvb2xOYW1lOiAncmVjdGFuZ2xlJyxcbiAgICBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLWNoZWNrYm94LXVuY2hlY2tlZCcsXG4gICAgdG9vbEluZGV4OiAxXG4gIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5DaXJjbGVdOiB7IGRyYXdUb29sTmFtZTogJ2NpcmNsZScsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcmFkaW8tdW5jaGVja2VkJywgdG9vbEluZGV4OiAzIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEludGVyYWN0aXZlRHJhdyAocHJvcHM6IEludGVyYWN0aXZlRHJhd1Byb3BzKSB7XG4gIGNvbnN0IHsgdG9vbFR5cGVzID0gW10sIGppbXVNYXBWaWV3LCBvbkRyYXdFbmQsIHdpZGdldElkIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBbbWFwTW9kdWxlLCBzZXRNYXBNb2R1bGVdID0gUmVhY3QudXNlU3RhdGU8dHlwZW9mIGppbXVNYXA+KG51bGwpXG4gIGNvbnN0IGdldExheWVyRnVuUmVmID0gUmVhY3QudXNlUmVmPCgpID0+IF9fZXNyaS5HcmFwaGljc0xheWVyIHwgX19lc3JpLk1hcE5vdGVzTGF5ZXI+KG51bGwpXG4gIGNvbnN0IGdyYXBoaWNSZWYgPSBSZWFjdC51c2VSZWYobnVsbClcbiAgY29uc3QgW2NsZWFyQWZ0ZXJBcHBseSwgc2V0Q2xlYXJBZnRlckFwcGx5XSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuXG4gIGNvbnN0IHZpc2libGVFbGVtZW50cyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBjcmVhdGVUb29sczogT2JqZWN0LmVudHJpZXMoc2tldGNoVG9vbEluZm9NYXApLnJlZHVjZShcbiAgICAgICAgKHJlc3VsdCwgW2tleSwgdmFsdWVdKSA9PiAoeyAuLi5yZXN1bHQsIFt2YWx1ZS5kcmF3VG9vbE5hbWVdOiB0b29sVHlwZXMuaW5jbHVkZXMoa2V5IGFzIENyZWF0ZVRvb2xUeXBlKSB9KSxcbiAgICAgICAgeyBwb2ludDogZmFsc2UgfVxuICAgICAgKSBhcyBhbnksXG4gICAgICBzZWxlY3Rpb25Ub29sczoge1xuICAgICAgICAnbGFzc28tc2VsZWN0aW9uJzogZmFsc2UsXG4gICAgICAgICdyZWN0YW5nbGUtc2VsZWN0aW9uJzogZmFsc2VcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nc01lbnU6IGZhbHNlLFxuICAgICAgdW5kb1JlZG9NZW51OiBmYWxzZSxcbiAgICAgIGRlbGV0ZUJ1dHRvbjogdHJ1ZVxuICAgIH1cbiAgfSwgW3Rvb2xUeXBlc10pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgbW9kdWxlTG9hZGVyLmxvYWRNb2R1bGU8dHlwZW9mIGppbXVNYXA+KCdqaW11LXVpL2FkdmFuY2VkL21hcCcpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgc2V0TWFwTW9kdWxlKHJlc3VsdClcbiAgICB9KVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZURyYXdUb29sQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChqaW11RHJhd1Rvb2xzUmVmOiBqaW11TWFwLkppbXVEcmF3Q3JlYXRlZERlc2NyaXB0b3IpID0+IHtcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ID0gamltdURyYXdUb29sc1JlZi5nZXRHcmFwaGljc0xheWVyXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZURyYXdTdGFydCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmICgoZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCkoKSBhcyBfX2VzcmkuR3JhcGhpY3NMYXllcikucmVtb3ZlQWxsKClcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlRHJhd0VuZCA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChncmFwaGljKSA9PiB7XG4gICAgICBncmFwaGljUmVmLmN1cnJlbnQgPSBncmFwaGljXG4gICAgICBvbkRyYXdFbmQoZ3JhcGhpYywgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCwgY2xlYXJBZnRlckFwcGx5KVxuICAgIH0sXG4gICAgW29uRHJhd0VuZCwgY2xlYXJBZnRlckFwcGx5XVxuICApXG5cbiAgY29uc3QgaGFuZGxlQ2xlYXJlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBncmFwaGljUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgb25EcmF3RW5kKG51bGwpXG4gIH0sIFtvbkRyYXdFbmRdKVxuXG4gIGNvbnN0IGhhbmRsZUNsZWFyU2V0dGluZ0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgaWYgKGdyYXBoaWNSZWYuY3VycmVudCkge1xuICAgICAgb25EcmF3RW5kKGdyYXBoaWNSZWYuY3VycmVudCwgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCwgZS50YXJnZXQuY2hlY2tlZClcbiAgICB9XG4gICAgc2V0Q2xlYXJBZnRlckFwcGx5KGUudGFyZ2V0LmNoZWNrZWQpXG4gIH0sIFtvbkRyYXdFbmRdKVxuXG4gIGNvbnN0IEppbXVEcmF3ID0gbWFwTW9kdWxlPy5KaW11RHJhd1xuICBpZiAoIUppbXVEcmF3KSB7XG4gICAgcmV0dXJuIDxTdGF0dXNJbmRpY2F0b3Igc3RhdHVzVHlwZT17RW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nfSAvPlxuICB9XG4gIGNvbnN0IGlzQXZhaWxhYmxlID0gT2JqZWN0LmtleXModmlzaWJsZUVsZW1lbnRzLmNyZWF0ZVRvb2xzKS5zb21lKHRvb2xOYW1lID0+IHZpc2libGVFbGVtZW50cy5jcmVhdGVUb29sc1t0b29sTmFtZV0pXG4gIGlmICghaXNBdmFpbGFibGUpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxKaW11RHJhd1xuICAgICAgICBqaW11TWFwVmlldz17amltdU1hcFZpZXd9XG4gICAgICAgIG9wZXJhdG9yV2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICBkaXNhYmxlU3ltYm9sU2VsZWN0b3JcbiAgICAgICAgZHJhd2luZ09wdGlvbnM9e3tcbiAgICAgICAgICBjcmVhdGlvbk1vZGU6IG1hcE1vZHVsZS5KaW11RHJhd0NyZWF0aW9uTW9kZS5TaW5nbGUsXG4gICAgICAgICAgdXBkYXRlT25HcmFwaGljQ2xpY2s6IGZhbHNlLFxuICAgICAgICAgIHZpc2libGVFbGVtZW50czogdmlzaWJsZUVsZW1lbnRzXG4gICAgICAgIH19XG4gICAgICAgIHVpT3B0aW9ucz17e1xuICAgICAgICAgIGlzSGlkZUJvcmRlcjogdHJ1ZVxuICAgICAgICB9fVxuICAgICAgICBvbkppbXVEcmF3Q3JlYXRlZD17aGFuZGxlRHJhd1Rvb2xDcmVhdGVkfVxuICAgICAgICBvbkRyYXdpbmdTdGFydGVkPXtoYW5kbGVEcmF3U3RhcnR9XG4gICAgICAgIG9uRHJhd2luZ0ZpbmlzaGVkPXtoYW5kbGVEcmF3RW5kfVxuICAgICAgICBvbkRyYXdpbmdDbGVhcmVkPXtoYW5kbGVDbGVhcmVkfVxuICAgICAgLz5cbiAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICA8Q2hlY2tib3ggY2hlY2tlZD17Y2xlYXJBZnRlckFwcGx5fSBvbkNoYW5nZT17aGFuZGxlQ2xlYXJTZXR0aW5nQ2hhbmdlfSBjbGFzc05hbWU9J21yLTInIC8+XG4gICAgICAgIHtnZXRJMThuTWVzc2FnZSgnY2xlYXJEcmF3aW5nJyl9XG4gICAgICA8L2xhYmVsPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgQ09OU1RBTlRTLFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXG4gIGNsYXNzTmFtZXMsXG4gIGhvb2tzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExvYWRpbmcsIExvYWRpbmdUeXBlIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgTGlzdERpcmVjdGlvbiB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IEVudGl0eVN0YXR1c1R5cGUgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IFF1ZXJ5UmVzdWx0SXRlbSB9IGZyb20gJy4vcXVlcnktcmVzdWx0LWl0ZW0nXG5pbXBvcnQgeyBleGVjdXRlUXVlcnksIGdldFBvcHVwVGVtcGxhdGUgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgdXNlQXV0b0hlaWdodCB9IGZyb20gJy4vdXNlQXV0b0hlaWdodCdcblxuY29uc3QgeyB1c2VSZWYsIHVzZVN0YXRlIH0gPSBSZWFjdFxuXG5leHBvcnQgaW50ZXJmYWNlIExhenlMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIHJlc3VsdENvdW50OiBudW1iZXJcbiAgcmVjb3JkczogRGF0YVJlY29yZFtdXG4gIHF1ZXJ5UGFyYW1zOiBRdWVyeVBhcmFtc1xuICAvKiogV2hldGhlciByZXN1bHQgaXRlbXMgc2hvdWxkIGJlIGV4cGFuZGVkIGJ5IGRlZmF1bHQuIENvbnRyb2xsZWQgYnkgZXhwYW5kL2NvbGxhcHNlIGFsbCBidXR0b24uICovXG4gIGV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbiAgZGlyZWN0aW9uOiBMaXN0RGlyZWN0aW9uXG4gIG9uRXNjYXBlOiAoKSA9PiB2b2lkXG4gIGRlZmF1bHRQYWdlU2l6ZT86IG51bWJlclxuICBvblJlbmRlckRvbmU/OiAob3B0aW9uczogeyBkYXRhSXRlbXM6IGFueVtdIH0pID0+IHZvaWRcbiAgb25TZWxlY3RDaGFuZ2U6IChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxuICBvblJlbW92ZTogKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG59XG5cbmNvbnN0IGdldFN0eWxlID0gKGlzQXV0b0hlaWdodDogYm9vbGVhbikgPT4ge1xuICByZXR1cm4gY3NzYFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleDogMSAxICR7aXNBdXRvSGVpZ2h0ID8gJ2F1dG8nIDogMH07XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgbWF4LWhlaWdodDogJHtpc0F1dG9IZWlnaHQgPyAnY2FsYyg2MS44dmggLSAxMDBweCknIDogJ25vbmUnfTtcblxuICAgIC5xdWVyeS1yZXN1bHQtaXRlbSArIC5xdWVyeS1yZXN1bHQtaXRlbSB7XG4gICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICB9XG5cbiAgICAmLnZlcnRpY2FsIHtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAubGlzdC1pdGVtcyB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIH1cblxuICAgICAgLmZlYXR1cmUtaW5mby1jb21wb25lbnQge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLnF1ZXJ5LXJlc3VsdC1pdGVtICsgLnF1ZXJ5LXJlc3VsdC1pdGVtIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgIG1hcmdpbi10b3A6IDAuNXJlbTtcbiAgICAgIH1cbiAgICB9XG4gICAgLmxpc3QtaXRlbXMge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICB9XG4gICAgLmxhenlsb2FkLWRldGVjdG9yIHtcbiAgICAgIGhlaWdodDogMnB4O1xuICAgICAgd2lkdGg6IDJweDtcbiAgICAgIG9wYWNpdHk6IDA7XG4gICAgfVxuICBgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBMYXp5TGlzdCAocHJvcHM6IExhenlMaXN0UHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHdpZGdldElkLFxuICAgIG91dHB1dERTLFxuICAgIHF1ZXJ5UGFyYW1zLFxuICAgIHJlc3VsdENvdW50LFxuICAgIHJlY29yZHMsXG4gICAgcXVlcnlJdGVtLFxuICAgIGRpcmVjdGlvbixcbiAgICBvblJlbmRlckRvbmUsXG4gICAgb25Fc2NhcGUsXG4gICAgb25TZWxlY3RDaGFuZ2UsXG4gICAgb25SZW1vdmUsXG4gICAgZGVmYXVsdFBhZ2VTaXplID0gQ09OU1RBTlRTLkRFRkFVTFRfUVVFUllfUEFHRV9TSVpFXG4gIH0gPSBwcm9wc1xuICBjb25zdCBbZGF0YUl0ZW1zLCBzZXREYXRhSXRlbXNdID0gdXNlU3RhdGUocmVjb3JkcylcbiAgY29uc3QgW3BvcHVwVGVtcGxhdGUsIHNldFBvcHVwVGVtcGxhdGVdID0gdXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IFtkZWZhdWx0UG9wdXBUZW1wbGF0ZSwgc2V0RGVmYXVsdFBvcHVwVGVtcGxhdGVdID0gdXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IFtsb2FkU3RhdHVzLCBzZXRMb2FkU3RhdHVzXSA9IHVzZVN0YXRlPEVudGl0eVN0YXR1c1R5cGU+KEVudGl0eVN0YXR1c1R5cGUuSW5pdClcbiAgY29uc3QgZGF0YUl0ZW1zUmVmID0gaG9va3MudXNlTGF0ZXN0KGRhdGFJdGVtcylcbiAgY29uc3QgcmVzdWx0Q291bnRSZWYgPSBob29rcy51c2VMYXRlc3QocmVzdWx0Q291bnQpXG4gIGNvbnN0IGxvYWRTdGF0dXNSZWYgPSBob29rcy51c2VMYXRlc3QobG9hZFN0YXR1cylcbiAgY29uc3QgYWxsRGF0YUl0ZW1zTG9hZGVkUmVmID0gaG9va3MudXNlTGF0ZXN0KGRhdGFJdGVtcz8ubGVuZ3RoID09PSByZXN1bHRDb3VudClcbiAgY29uc3QgcGFnZVJlZiA9IHVzZVJlZigwKVxuICBjb25zdCByZXN1bHRDb250YWluZXJSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3QgZWwgPSB1c2VSZWYobnVsbClcbiAgY29uc3QgaXNBdXRvSGVpZ2h0ID0gdXNlQXV0b0hlaWdodCgpXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBwYWdlUmVmLmN1cnJlbnQgPSAxXG4gICAgcmVzdWx0Q29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsVG9wID0gMFxuICAgIHNldERhdGFJdGVtcyhyZWNvcmRzKVxuICB9LCBbcmVjb3Jkc10pXG5cbiAgY29uc3QgbG9hZEJ5UGFnZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKGFsbERhdGFJdGVtc0xvYWRlZFJlZi5jdXJyZW50IHx8IGxvYWRTdGF0dXNSZWYuY3VycmVudCA9PT0gRW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgcGFnZVJlZi5jdXJyZW50ID0gcGFnZVJlZi5jdXJyZW50ICsgMVxuICAgIHNldExvYWRTdGF0dXMoRW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nKVxuXG4gICAgaWYgKCFxdWVyeVBhcmFtcy5wYWdlU2l6ZSkge1xuICAgICAgcXVlcnlQYXJhbXMucGFnZVNpemUgPSBkZWZhdWx0UGFnZVNpemVcbiAgICB9XG4gICAgY29uc3QgeyByZWNvcmRzIH0gPSBhd2FpdCBleGVjdXRlUXVlcnkod2lkZ2V0SWQsIHF1ZXJ5SXRlbSwgb3V0cHV0RFMsIHtcbiAgICAgIC4uLnF1ZXJ5UGFyYW1zLFxuICAgICAgcGFnZTogcGFnZVJlZi5jdXJyZW50XG4gICAgfSlcbiAgICBpZiAocmVzdWx0Q291bnRSZWYuY3VycmVudCA+IDAgJiYgZGF0YUl0ZW1zUmVmLmN1cnJlbnQubGVuZ3RoICsgcmVjb3Jkcy5sZW5ndGggPj0gcmVzdWx0Q291bnRSZWYuY3VycmVudCkge1xuICAgICAgYWxsRGF0YUl0ZW1zTG9hZGVkUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZWRJdGVtcyA9IGRhdGFJdGVtc1JlZi5jdXJyZW50LmNvbmNhdChyZWNvcmRzKVxuICAgIHNldERhdGFJdGVtcyh1cGRhdGVkSXRlbXMpXG4gICAgb25SZW5kZXJEb25lPy4oe1xuICAgICAgZGF0YUl0ZW1zOiBvdXRwdXREUy5nZXRBbGxMb2FkZWRSZWNvcmRzKClcbiAgICB9KVxuICAgIHNldExvYWRTdGF0dXMoRW50aXR5U3RhdHVzVHlwZS5Mb2FkZWQpXG4gIH1cblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGdldFBvcHVwVGVtcGxhdGUob3V0cHV0RFMsIHF1ZXJ5SXRlbSkudGhlbigocnMpID0+IHtcbiAgICAgIHNldFBvcHVwVGVtcGxhdGUocnMucG9wdXBUZW1wbGF0ZSlcbiAgICAgIHNldERlZmF1bHRQb3B1cFRlbXBsYXRlKHJzLmRlZmF1bHRQb3B1cFRlbXBsYXRlKVxuICAgIH0pXG4gIH0sIFtvdXRwdXREUywgcXVlcnlJdGVtXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBjb25zdCBlbExvYWREZXRlY3RvciA9IGVsPy5jdXJyZW50XG4gICAgaWYgKGVsTG9hZERldGVjdG9yKSB7XG4gICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgICBpZiAoZW50cmllc1swXS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgIGxvYWRCeVBhZ2VzKClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIG9ic2VydmVyPy5vYnNlcnZlKGVsTG9hZERldGVjdG9yKVxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgb2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCBoYW5kbGVLZXlVcCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgb25Fc2NhcGUoKVxuICAgIH1cbiAgfSwgW29uRXNjYXBlXSlcblxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnICcpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuICB9LCBbXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgb25LZXlVcD17aGFuZGxlS2V5VXB9IG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKHsgdmVydGljYWw6IGRpcmVjdGlvbiA9PT0gTGlzdERpcmVjdGlvbi5WZXJ0aWNhbCB9KX0gY3NzPXtnZXRTdHlsZShpc0F1dG9IZWlnaHQpfSByZWY9e3Jlc3VsdENvbnRhaW5lclJlZn0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbGlzdC1pdGVtcyBweC00IHB5LTEnIHJvbGU9J2xpc3Rib3gnPlxuICAgICAgICB7ZGF0YUl0ZW1zPy5tYXAoKGRhdGFJdGVtKSA9PiAoXG4gICAgICAgICAgPFF1ZXJ5UmVzdWx0SXRlbVxuICAgICAgICAgICAga2V5PXtkYXRhSXRlbS5nZXRJZCgpfVxuICAgICAgICAgICAgZGF0YT17ZGF0YUl0ZW0gYXMgRmVhdHVyZURhdGFSZWNvcmR9XG4gICAgICAgICAgICBkYXRhU291cmNlPXtvdXRwdXREU31cbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIHBvcHVwVGVtcGxhdGU9e3BvcHVwVGVtcGxhdGV9XG4gICAgICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZT17ZGVmYXVsdFBvcHVwVGVtcGxhdGV9XG4gICAgICAgICAgICBleHBhbmRCeURlZmF1bHQ9e3Byb3BzLmV4cGFuZEJ5RGVmYXVsdCA/PyB0cnVlfVxuICAgICAgICAgICAgb25DbGljaz17b25TZWxlY3RDaGFuZ2V9XG4gICAgICAgICAgICBvblJlbW92ZT17b25SZW1vdmV9XG4gICAgICAgICAgLz5cbiAgICAgICAgKSl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgcmVmPXtlbH0gY2xhc3NOYW1lPSdsYXp5bG9hZC1kZXRlY3Rvcic+XG4gICAgICAgICZuYnNwO1xuICAgICAgPC9kaXY+XG4gICAgICB7bG9hZFN0YXR1cyA9PT0gRW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nICYmIDxMb2FkaW5nIHR5cGU9e0xvYWRpbmdUeXBlLkRvbnV0fSAvPn1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTG9hZGluZywgTG9hZGluZ1R5cGUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgc3R5bGVkIH0gZnJvbSAnamltdS10aGVtZSdcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuXG5jb25zdCBSb290ID0gc3R5bGVkLmRpdmBcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgcmlnaHQ6IDA7XG4gIGxlZnQ6IDA7XG4gIHotaW5kZXg6IDI7XG5cbiAgLmxvYWRpbmctY29udGVudCB7XG4gICAgLmxvYWRpbmctdGlwIHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gIH1cbmBcbmV4cG9ydCBmdW5jdGlvbiBMb2FkaW5nUmVzdWx0ICgpIHtcbiAgY29uc3QgdHJhbnNsYXRlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIHJldHVybiAoXG4gICAgPFJvb3Q+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbG9hZGluZy1jb250ZW50IHctMTAwIHB4LTQgZC1mbGV4IGZsZXgtY29sdW1uIGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgPGRpdiByb2xlPSdhbGVydCcgYXJpYS1saXZlPSdhc3NlcnRpdmUnIGNsYXNzTmFtZT0ndGV4dC1wYXBlcic+XG4gICAgICAgICAge3RyYW5zbGF0ZSgncmV0cmlldmluZycpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPExvYWRpbmcgY2xhc3NOYW1lPSdsb2FkaW5nLXRpcCBtdC04JyB0eXBlPXtMb2FkaW5nVHlwZS5Eb251dH0vPlxuICAgICAgPC9kaXY+XG4gICAgPC9Sb290PlxuICApXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIGNsYXNzTmFtZXMsXG4gIENPTlNUQU5UUyxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxuICB0eXBlIFF1ZXJ5UGFyYW1zXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFBhZ2luYXRpb24sIExvYWRpbmcsIExvYWRpbmdUeXBlIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IExpc3REaXJlY3Rpb24sIHR5cGUgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IEVudGl0eVN0YXR1c1R5cGUgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IFF1ZXJ5UmVzdWx0SXRlbSB9IGZyb20gJy4vcXVlcnktcmVzdWx0LWl0ZW0nXG5pbXBvcnQgeyBleGVjdXRlUXVlcnksIGdldFBvcHVwVGVtcGxhdGUgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgdXNlQXV0b0hlaWdodCB9IGZyb20gJy4vdXNlQXV0b0hlaWdodCdcblxuY29uc3QgeyB1c2VSZWYsIHVzZVN0YXRlIH0gPSBSZWFjdFxuXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2luZ0xpc3RQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgcmVzdWx0Q291bnQ6IG51bWJlclxuICBtYXhQZXJQYWdlOiBudW1iZXJcbiAgcmVjb3JkczogRGF0YVJlY29yZFtdXG4gIHF1ZXJ5UGFyYW1zOiBRdWVyeVBhcmFtc1xuICAvKiogV2hldGhlciByZXN1bHQgaXRlbXMgc2hvdWxkIGJlIGV4cGFuZGVkIGJ5IGRlZmF1bHQuIENvbnRyb2xsZWQgYnkgZXhwYW5kL2NvbGxhcHNlIGFsbCBidXR0b24uICovXG4gIGV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbiAgb25Fc2NhcGU6ICgpID0+IHZvaWRcbiAgZGlyZWN0aW9uPzogTGlzdERpcmVjdGlvblxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgb25SZW5kZXJEb25lPzogKG9wdGlvbnM6IHsgZGF0YUl0ZW1zOiBhbnlbXSwgcGFnZVNpemU/OiBudW1iZXIsIHBhZ2U/OiBudW1iZXIgfSkgPT4gdm9pZFxuICBvblNlbGVjdENoYW5nZTogKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIG9uUmVtb3ZlOiAoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbn1cblxuY29uc3QgZ2V0U3R5bGUgPSAoaXNBdXRvSGVpZ2h0OiBib29sZWFuKSA9PiB7XG4gIHJldHVybiBjc3NgXG4gICAgZmxleDogMSAxIGF1dG87XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuXG4gICAgLmxpc3RfaXRlbXMge1xuICAgICAgZmxleDogMSAxICR7aXNBdXRvSGVpZ2h0ID8gJ2F1dG8nIDogMH07XG4gICAgICBtYXgtaGVpZ2h0OiAke2lzQXV0b0hlaWdodCA/ICdjYWxjKDYxLjh2aCAtIDEwMHB4KScgOiAnbm9uZSd9O1xuICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICB9XG5cbiAgICAucXVlcnktcmVzdWx0LWl0ZW0gKyAucXVlcnktcmVzdWx0LWl0ZW0ge1xuICAgICAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgfVxuXG4gICAgJi52ZXJ0aWNhbCB7XG4gICAgICAubGlzdF9pdGVtcyB7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG4gICAgICAuZmVhdHVyZS1pbmZvLWNvbXBvbmVudCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuICAgICAgLnF1ZXJ5LXJlc3VsdC1pdGVtICsgLnF1ZXJ5LXJlc3VsdC1pdGVtIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMC41cmVtO1xuICAgICAgICBtYXJnaW4tbGVmdDogMDtcbiAgICAgIH1cbiAgICB9XG4gICAgLnBhZ2Utc2l6ZS1zZWxlY3RvciB7XG4gICAgICB3aWR0aDogYXV0bztcbiAgICB9XG5cbiAgICAucXVlcnktZWRpdGFibGUtc2VsZWN0IHtcbiAgICAgIC5qaW11LW51bWVyaWMtaW5wdXQge1xuICAgICAgICB3aWR0aDogNjBweDtcbiAgICAgIH1cbiAgICB9XG4gIGBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFBhZ2luZ0xpc3QgKHByb3BzOiBQYWdpbmdMaXN0UHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHdpZGdldElkLFxuICAgIG91dHB1dERTLFxuICAgIHF1ZXJ5SXRlbSxcbiAgICBxdWVyeVBhcmFtcyxcbiAgICByZXN1bHRDb3VudCxcbiAgICByZWNvcmRzLFxuICAgIG9uUmVuZGVyRG9uZSxcbiAgICBvblNlbGVjdENoYW5nZSxcbiAgICBvblJlbW92ZSxcbiAgICBkaXJlY3Rpb24sXG4gICAgb25Fc2NhcGUsXG4gICAgZGVmYXVsdFBhZ2VTaXplID0gQ09OU1RBTlRTLkRFRkFVTFRfUVVFUllfUEFHRV9TSVpFXG4gIH0gPSBwcm9wc1xuICBjb25zdCBbZGF0YUl0ZW1zLCBzZXREYXRhSXRlbXNdID0gdXNlU3RhdGUocmVjb3JkcylcbiAgY29uc3QgW3BvcHVwVGVtcGxhdGUsIHNldFBvcHVwVGVtcGxhdGVdID0gdXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IFtkZWZhdWx0UG9wdXBUZW1wbGF0ZSwgc2V0RGVmYXVsdFBvcHVwVGVtcGxhdGVdID0gdXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IFtsb2FkU3RhdHVzLCBzZXRMb2FkU3RhdHVzXSA9IHVzZVN0YXRlPEVudGl0eVN0YXR1c1R5cGU+KEVudGl0eVN0YXR1c1R5cGUuSW5pdClcbiAgY29uc3QgcGFnZVJlZiA9IHVzZVJlZigxKVxuICBjb25zdCBwYWdlU2l6ZVJlZiA9IHVzZVJlZihkZWZhdWx0UGFnZVNpemUpXG4gIGNvbnN0IFtwYWdlU2l6ZSwgc2V0UGFnZVNpemVdID0gdXNlU3RhdGUoZGVmYXVsdFBhZ2VTaXplKVxuICBjb25zdCBpc0F1dG9IZWlnaHQgPSB1c2VBdXRvSGVpZ2h0KClcblxuICBjb25zdCBwYWdlU2l6ZU9wdGlvbnMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBbZGVmYXVsdFBhZ2VTaXplXVxuICAgIGlmIChNYXRoLnJvdW5kKGRlZmF1bHRQYWdlU2l6ZSAvIDIpICE9PSByZXN1bHRbMF0pIHtcbiAgICAgIHJlc3VsdC5wdXNoKE1hdGgucm91bmQoZGVmYXVsdFBhZ2VTaXplIC8gMikpXG4gICAgfVxuICAgIGlmIChNYXRoLnJvdW5kKGRlZmF1bHRQYWdlU2l6ZSAvIDUpICE9PSByZXN1bHRbMV0pIHtcbiAgICAgIHJlc3VsdC5wdXNoKE1hdGgucm91bmQoZGVmYXVsdFBhZ2VTaXplIC8gNSkpXG4gICAgfVxuICAgIHJldHVybiByZXN1bHQucmV2ZXJzZSgpXG4gIH0sIFtkZWZhdWx0UGFnZVNpemVdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcGFnZVJlZi5jdXJyZW50ID0gMVxuICAgIHNldERhdGFJdGVtcyhyZWNvcmRzKVxuICAgIHNldFBhZ2VTaXplKHBhZ2VTaXplUmVmLmN1cnJlbnQpXG4gIH0sIFtyZWNvcmRzXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGdldFBvcHVwVGVtcGxhdGUob3V0cHV0RFMsIHF1ZXJ5SXRlbSkudGhlbihycyA9PiB7XG4gICAgICBzZXRQb3B1cFRlbXBsYXRlKHJzLnBvcHVwVGVtcGxhdGUpXG4gICAgICBzZXREZWZhdWx0UG9wdXBUZW1wbGF0ZShycy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSlcbiAgICB9KVxuICB9LCBbb3V0cHV0RFMsIHF1ZXJ5SXRlbV0pXG5cbiAgY29uc3QgbG9hZEJ5UGFnZXMgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoY3VycmVudFBhZ2U6IG51bWJlciwgc2l6ZTogbnVtYmVyKSA9PiB7XG4gICAgcGFnZVJlZi5jdXJyZW50ID0gY3VycmVudFBhZ2VcbiAgICBzZXRMb2FkU3RhdHVzKEVudGl0eVN0YXR1c1R5cGUuTG9hZGluZylcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjdXRlUXVlcnkod2lkZ2V0SWQsIHF1ZXJ5SXRlbSwgb3V0cHV0RFMsIHsgLi4ucXVlcnlQYXJhbXMsIHBhZ2U6IGN1cnJlbnRQYWdlLCBwYWdlU2l6ZTogc2l6ZSB9KVxuICAgIHNldERhdGFJdGVtcyhyZXN1bHQucmVjb3JkcylcbiAgICBvblJlbmRlckRvbmU/Lih7XG4gICAgICBkYXRhSXRlbXM6IG91dHB1dERTLmdldEFsbExvYWRlZFJlY29yZHMoKSxcbiAgICAgIHBhZ2VTaXplOiBzaXplLFxuICAgICAgcGFnZTogcGFnZVJlZi5jdXJyZW50XG4gICAgfSlcbiAgICBzZXRMb2FkU3RhdHVzKEVudGl0eVN0YXR1c1R5cGUuTG9hZGVkKVxuICB9LCBbb25SZW5kZXJEb25lLCBvdXRwdXREUywgcXVlcnlJdGVtLCBxdWVyeVBhcmFtcywgd2lkZ2V0SWRdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRlZmF1bHRQYWdlU2l6ZSAhPT0gcGFnZVNpemVSZWYuY3VycmVudCkge1xuICAgICAgaWYgKGRlZmF1bHRQYWdlU2l6ZSA8IHBhZ2VTaXplUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgc2V0RGF0YUl0ZW1zKGRhdGFJdGVtcy5zbGljZSgwLCBkZWZhdWx0UGFnZVNpemUpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9hZEJ5UGFnZXMoMSwgZGVmYXVsdFBhZ2VTaXplKVxuICAgICAgfVxuICAgICAgcGFnZVNpemVSZWYuY3VycmVudCA9IGRlZmF1bHRQYWdlU2l6ZVxuICAgICAgc2V0UGFnZVNpemUoZGVmYXVsdFBhZ2VTaXplKVxuICAgIH1cbiAgfSwgW2RlZmF1bHRQYWdlU2l6ZSwgZGF0YUl0ZW1zLCBsb2FkQnlQYWdlc10pXG5cbiAgY29uc3QgaGFuZGxlUGFnZVNpemVDaGFuZ2UgPSAoc2l6ZTogbnVtYmVyKSA9PiB7XG4gICAgaWYgKHNpemUgPiAwKSB7XG4gICAgICBzZXRQYWdlU2l6ZShzaXplKVxuICAgICAgbG9hZEJ5UGFnZXMoMSwgc2l6ZSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVLZXlVcCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgb25Fc2NhcGUoKVxuICAgIH1cbiAgfSwgW29uRXNjYXBlXSlcblxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnICcpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuICB9LCBbXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgb25LZXlVcD17aGFuZGxlS2V5VXB9IG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKHsgdmVydGljYWw6IGRpcmVjdGlvbiA9PT0gTGlzdERpcmVjdGlvbi5WZXJ0aWNhbCB9KX0gY3NzPXtnZXRTdHlsZShpc0F1dG9IZWlnaHQpfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsaXN0X2l0ZW1zIG1iLTIgcHgtNCBweS0xJyByb2xlPSdsaXN0Ym94Jz5cbiAgICAgICAge2RhdGFJdGVtcz8ubWFwKChkYXRhSXRlbSkgPT4gKFxuICAgICAgICAgIDxRdWVyeVJlc3VsdEl0ZW1cbiAgICAgICAgICAgIGtleT17ZGF0YUl0ZW0uZ2V0SWQoKX1cbiAgICAgICAgICAgIGRhdGE9e2RhdGFJdGVtIGFzIEZlYXR1cmVEYXRhUmVjb3JkfVxuICAgICAgICAgICAgZGF0YVNvdXJjZT17b3V0cHV0RFN9XG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICBwb3B1cFRlbXBsYXRlPXtwb3B1cFRlbXBsYXRlfVxuICAgICAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGU9e2RlZmF1bHRQb3B1cFRlbXBsYXRlfVxuICAgICAgICAgICAgZXhwYW5kQnlEZWZhdWx0PXtwcm9wcy5leHBhbmRCeURlZmF1bHQgPz8gdHJ1ZX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e29uU2VsZWN0Q2hhbmdlfVxuICAgICAgICAgICAgb25SZW1vdmU9e29uUmVtb3ZlfVxuICAgICAgICAgIC8+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgICB7bG9hZFN0YXR1cyA9PT0gRW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nICYmIDxMb2FkaW5nIHR5cGU9e0xvYWRpbmdUeXBlLkRvbnV0fS8+fVxuICAgICAge3Jlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyIHB4LTQnPlxuICAgICAgICAgIDxQYWdpbmF0aW9uXG4gICAgICAgICAgICBjbGFzc05hbWU9J2QtZmxleCBqdXN0aWZ5LWNvbnRlbnQtZW5kJ1xuICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRTdGF0dXMgPT09IEVudGl0eVN0YXR1c1R5cGUuTG9hZGluZ31cbiAgICAgICAgICAgIGN1cnJlbnQ9e3BhZ2VSZWYuY3VycmVudH1cbiAgICAgICAgICAgIHRvdGFsUGFnZT17TWF0aC5jZWlsKHJlc3VsdENvdW50IC8gcGFnZVNpemUpfVxuICAgICAgICAgICAgb25DaGFuZ2VQYWdlPXsocGFnZU51bSkgPT4gbG9hZEJ5UGFnZXMocGFnZU51bSwgcGFnZVNpemUpfVxuICAgICAgICAgICAgcGFnZVNpemU9e3BhZ2VTaXplfVxuICAgICAgICAgICAgbWF4UGFnZVNpemU9ezEwMDB9XG4gICAgICAgICAgICBwYWdlU2l6ZU9wdGlvbnM9e3BhZ2VTaXplT3B0aW9uc31cbiAgICAgICAgICAgIG9uUGFnZVNpemVDaGFuZ2U9e2hhbmRsZVBhZ2VTaXplQ2hhbmdlfVxuICAgICAgICAgICAgc2hvd1NpemVDaGFuZ2VyXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxuICB0eXBlIElNU3RhdGUsXG4gIGNsYXNzTmFtZXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IENsb3NlT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9jbG9zZSdcbmltcG9ydCBGZWF0dXJlSW5mbyBmcm9tICcuL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvJ1xuaW1wb3J0IHsgTGlzdERpcmVjdGlvbiB9IGZyb20gJy4uL2NvbmZpZydcblxuZXhwb3J0IGludGVyZmFjZSBSZXN1bHRJdGVtUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHBvcHVwVGVtcGxhdGU6IGFueVxuICBkZWZhdWx0UG9wdXBUZW1wbGF0ZTogYW55XG4gIGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkXG4gIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VcbiAgZXhwYW5kQnlEZWZhdWx0OiBib29sZWFuXG4gIG9uQ2xpY2s6IChyZWNvcmQ6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIG9uUmVtb3ZlOiAocmVjb3JkOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIGZsZXgtZmxvdzogcm93O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBtaW4taGVpZ2h0OiAycmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICYuc2VsZWN0ZWQge1xuICAgIG91dGxpbmU6IDJweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKTtcbiAgfVxuICBcbiAgLnJlbW92ZS1idXR0b24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDRweDtcbiAgICByaWdodDogNHB4O1xuICAgIHotaW5kZXg6IDEwO1xuICAgIG9wYWNpdHk6IDAuNztcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnM7XG4gICAgXG4gICAgJjpob3ZlciB7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgIH1cbiAgfVxuYFxuXG4vKipcbiAqIFF1ZXJ5UmVzdWx0SXRlbSBjb21wb25lbnQgLSBkaXNwbGF5cyBhIHNpbmdsZSBxdWVyeSByZXN1bHQgcmVjb3JkXG4gKiBGZWF0dXJlczpcbiAqIC0gQ2xpY2tpbmcgdGhlIGl0ZW0gem9vbXMgdG8gdGhlIGZlYXR1cmUgb24gdGhlIG1hcFxuICogLSBSZW1vdmUgYnV0dG9uIChYKSBpbiB1cHBlci1yaWdodCBjb3JuZXIgdG8gcmVtb3ZlIHJlY29yZCBmcm9tIHJlc3VsdHNcbiAqIC0gUmVjb3JkcyBhcmUgZXhwYW5kZWQgYnkgZGVmYXVsdCB0byBzaG93IGZ1bGwgZmVhdHVyZSBpbmZvcm1hdGlvblxuICovXG5leHBvcnQgY29uc3QgUXVlcnlSZXN1bHRJdGVtID0gKHByb3BzOiBSZXN1bHRJdGVtUHJvcHMpID0+IHtcbiAgY29uc3QgeyB3aWRnZXRJZCwgZGF0YSwgZGF0YVNvdXJjZSwgcG9wdXBUZW1wbGF0ZSwgZGVmYXVsdFBvcHVwVGVtcGxhdGUsIG9uQ2xpY2ssIG9uUmVtb3ZlLCBleHBhbmRCeURlZmF1bHQgPSBmYWxzZSB9ID0gcHJvcHNcbiAgXG4gIC8vIENoZWNrIGlmIHRoaXMgcmVjb3JkIGlzIGN1cnJlbnRseSBzZWxlY3RlZFxuICBjb25zdCBzZWxlY3RlZCA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PlxuICAgIHN0YXRlLmRhdGFTb3VyY2VzSW5mbz8uW2RhdGFTb3VyY2UuaWRdPy5zZWxlY3RlZElkcz8uaW5jbHVkZXMoZGF0YS5nZXRJZCgpKVxuICApXG4gIFxuICAvLyBEZXRlcm1pbmUgaWYgbGlzdCBpcyBkaXNwbGF5ZWQgdmVydGljYWxseSAoYWZmZWN0cyBGZWF0dXJlSW5mbyBleHBhbmRhYmlsaXR5KVxuICBjb25zdCBpc1ZlcnRpY2FsQWxpZ24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0TGlzdERpcmVjdGlvbiAhPT0gTGlzdERpcmVjdGlvbi5Ib3Jpem9udGFsXG4gIH0pXG5cbiAgLy8gSGFuZGxlIGNsaWNraW5nIG9uIHRoZSByZXN1bHQgaXRlbSAtIHpvb21zIHRvIGZlYXR1cmUgb24gbWFwXG4gIGNvbnN0IGhhbmRsZUNsaWNrUmVzdWx0SXRlbSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgLy8gRG9uJ3QgdHJpZ2dlciB6b29tIGlmIGNsaWNraW5nIHRoZSByZW1vdmUgYnV0dG9uXG4gICAgaWYgKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnLnJlbW92ZS1idXR0b24nKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIG9uQ2xpY2soZGF0YSlcbiAgfSwgW29uQ2xpY2ssIGRhdGFdKVxuXG4gIC8vIEhhbmRsZSBjbGlja2luZyB0aGUgcmVtb3ZlIGJ1dHRvbiAtIHJlbW92ZXMgcmVjb3JkIGZyb20gcmVzdWx0cyBhbmQgc2VsZWN0aW9uXG4gIGNvbnN0IGhhbmRsZVJlbW92ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKSAvLyBQcmV2ZW50IHRyaWdnZXJpbmcgdGhlIGl0ZW0gY2xpY2sgaGFuZGxlclxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIG9uUmVtb3ZlKGRhdGEpXG4gIH0sIFtvblJlbW92ZSwgZGF0YV0pXG5cbiAgY29uc3Qgb25LZXlVcCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VudGVyJyB8fCBldnQua2V5ID09PSAnICcpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIGhhbmRsZUNsaWNrUmVzdWx0SXRlbShldnQgYXMgYW55KVxuICAgIH1cbiAgfSwgW2hhbmRsZUNsaWNrUmVzdWx0SXRlbV0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXJlc3VsdC1pdGVtJywgeyBzZWxlY3RlZCB9KX1cbiAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsaWNrUmVzdWx0SXRlbX1cbiAgICAgIG9uS2V5VXA9e29uS2V5VXB9XG4gICAgICBjc3M9e3N0eWxlfVxuICAgICAgcm9sZT0nb3B0aW9uJ1xuICAgICAgYXJpYS1zZWxlY3RlZD17c2VsZWN0ZWR9XG4gICAgICB0YWJJbmRleD17MH1cbiAgICA+XG4gICAgICA8RmVhdHVyZUluZm9cbiAgICAgICAgZ3JhcGhpYz17ZGF0YS5mZWF0dXJlIGFzIF9fZXNyaS5HcmFwaGljfVxuICAgICAgICBwb3B1cFRlbXBsYXRlPXtwb3B1cFRlbXBsYXRlfVxuICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZT17ZGVmYXVsdFBvcHVwVGVtcGxhdGV9XG4gICAgICAgIHRvZ2dsYWJsZT17aXNWZXJ0aWNhbEFsaWdufVxuICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEJ5RGVmYXVsdH1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YVNvdXJjZX1cbiAgICAgIC8+XG4gICAgICA8QnV0dG9uXG4gICAgICAgIGNsYXNzTmFtZT1cInJlbW92ZS1idXR0b25cIlxuICAgICAgICBpY29uXG4gICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgIHZhcmlhbnQ9XCJ0ZXh0XCJcbiAgICAgICAgY29sb3I9XCJpbmhlcml0XCJcbiAgICAgICAgb25DbGljaz17aGFuZGxlUmVtb3ZlfVxuICAgICAgICBhcmlhLWxhYmVsPVwiUmVtb3ZlIHJlY29yZFwiXG4gICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgICAgICBtaW4td2lkdGg6IGF1dG87XG4gICAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgICBgfVxuICAgICAgPlxuICAgICAgICA8Q2xvc2VPdXRsaW5lZCBzaXplPXsxNH0gLz5cbiAgICAgIDwvQnV0dG9uPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICBJbW11dGFibGUsXG4gIGhvb2tzLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxuICB0eXBlIERhdGFSZWNvcmRTZXQsXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUsXG4gIERhdGFBY3Rpb25NYW5hZ2VyLFxuICBEYXRhTGV2ZWwsXG4gIHVzZUludGxcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uLCBUb29sdGlwLCBEYXRhQWN0aW9uTGlzdCwgRGF0YUFjdGlvbkxpc3RTdHlsZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgRmllbGRzVHlwZSwgUGFnaW5nVHlwZSwgTGlzdERpcmVjdGlvbiwgUmVzdWx0U2VsZWN0TW9kZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuaW1wb3J0IHsgTGF6eUxpc3QgfSBmcm9tICcuL2xhenktbGlzdCdcbmltcG9ydCB7IFBhZ2luZ0xpc3QgfSBmcm9tICcuL3BhZ2luZy1saXN0J1xuaW1wb3J0IHsgY29tYmluZUZpZWxkcyB9IGZyb20gJy4vcXVlcnktdXRpbHMnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdCdcbmltcG9ydCB7IEV4cGFuZEFsbE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsJ1xuaW1wb3J0IHsgQ29sbGFwc2VBbGxPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsJ1xuaW1wb3J0IHsgZ2V0RXh0cmFBY3Rpb25zIH0gZnJvbSAnLi4vZGF0YS1hY3Rpb25zJ1xuaW1wb3J0IHsgXG4gIHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzLCBcbiAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzLCBcbiAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2gsXG4gIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlIFxufSBmcm9tICcuL3NlbGVjdGlvbi11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcbmltcG9ydCB7IEVycm9yTWVzc2FnZSB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIHJlcXVlc3RpbmcgcmVzdG9yYXRpb24gd2hlbiBpZGVudGlmeSBwb3B1cCBjbG9zZXMuXG4gKi9cbmNvbnN0IFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQgPSAncXVlcnlzaW1wbGUtcmVzdG9yZS1vbi1pZGVudGlmeS1jbG9zZSdcblxuLyoqXG4gKiBEZXRlY3RzIGlmIGFuIGlkZW50aWZ5IHBvcHVwIGlzIGN1cnJlbnRseSB2aXNpYmxlIGluIHRoZSBET00uXG4gKiBVc2VzIHZlcmlmaWVkIHNlbGVjdG9ycyBiYXNlZCBvbiBFeHBlcmllbmNlIEJ1aWxkZXIncyBpZGVudGlmeSBwb3B1cCBzdHJ1Y3R1cmUuXG4gKiBcbiAqIEByZXR1cm5zIHRydWUgaWYgaWRlbnRpZnkgcG9wdXAgaXMgZGV0ZWN0ZWQgYW5kIHZpc2libGUsIGZhbHNlIG90aGVyd2lzZVxuICovXG5mdW5jdGlvbiBpc0lkZW50aWZ5UG9wdXBPcGVuKCk6IGJvb2xlYW4ge1xuICAvLyBQcmltYXJ5IHNlbGVjdG9yOiAuZXNyaS1wb3B1cCB3aXRoIHJvbGU9XCJkaWFsb2dcIlxuICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lc3JpLXBvcHVwW3JvbGU9XCJkaWFsb2dcIl0nKVxuICBcbiAgaWYgKCFwb3B1cCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBWZXJpZnkgaXQncyB2aXNpYmxlIChub3QgaGlkZGVuKVxuICBjb25zdCBhcmlhSGlkZGVuID0gcG9wdXAuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpXG4gIGlmIChhcmlhSGlkZGVuID09PSAndHJ1ZScpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgLy8gQWRkaXRpb25hbCBjaGVjazogdmVyaWZ5IGNvbXB1dGVkIHN0eWxlIHNob3dzIGl0J3MgdmlzaWJsZVxuICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBvcHVwKVxuICBpZiAoc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnIHx8IHN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nIHx8IHN0eWxlLm9wYWNpdHkgPT09ICcwJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBWZXJpZnkgaXQgY29udGFpbnMgZXNyaS1mZWF0dXJlcyAoaWRlbnRpZnkgcG9wdXAgc3RydWN0dXJlKVxuICBjb25zdCBoYXNGZWF0dXJlcyA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5lc3JpLWZlYXR1cmVzJylcbiAgaWYgKCFoYXNGZWF0dXJlcykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFzUmVzdWx0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHJlc3VsdENvdW50OiBudW1iZXJcbiAgbWF4UGVyUGFnZTogbnVtYmVyXG4gIHF1ZXJ5UGFyYW1zOiBRdWVyeVBhcmFtc1xuICBvdXRwdXREUzogRGF0YVNvdXJjZVxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICBkZWZhdWx0UGFnZVNpemU6IG51bWJlclxuICByZWNvcmRzOiBEYXRhUmVjb3JkW11cbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuICBvbk5hdkJhY2s6IChjbGVhclJlc3VsdHM/OiBib29sZWFuKSA9PiB2b2lkXG59XG5cbmNvbnN0IHJlc3VsdFN0eWxlID0gY3NzYFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuXG4gIC5xdWVyeS1yZXN1bHRfX2hlYWRlciB7XG4gICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLXRleHQpO1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICBsaW5lLWhlaWdodDogMS41O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICB9XG5cbiAgLnF1ZXJ5LXJlc3VsdC1jb250YWluZXIge1xuICAgIGZsZXg6IDEgMSAwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBtaW4taGVpZ2h0OiAwO1xuICB9XG5cbiAgLnF1ZXJ5LXJlc3VsdC1pbmZvIHtcbiAgICBoZWlnaHQ6IDE4cHg7XG4gIH1cbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza1Jlc3VsdCAocHJvcHM6IFF1ZXJ5VGFzUmVzdWx0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW0sIHF1ZXJ5UGFyYW1zLCByZXN1bHRDb3VudCwgbWF4UGVyUGFnZSwgcmVjb3JkcywgZGVmYXVsdFBhZ2VTaXplLCB3aWRnZXRJZCwgb3V0cHV0RFMsIHJ1bnRpbWVab29tVG9TZWxlY3RlZCwgb25OYXZCYWNrIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBpbnRsID0gdXNlSW50bCgpXG4gIGNvbnN0IFtxdWVyeURhdGEsIHNldFF1ZXJ5RGF0YV0gPSBSZWFjdC51c2VTdGF0ZShudWxsKVxuICBjb25zdCBbc2VsZWN0ZWRSZWNvcmRzLCBzZXRTZWxlY3RlZFJlY29yZHNdID0gUmVhY3QudXNlU3RhdGU8RGF0YVJlY29yZFtdPihbXSlcbiAgY29uc3QgW3JlbW92ZWRSZWNvcmRJZHMsIHNldFJlbW92ZWRSZWNvcmRJZHNdID0gUmVhY3QudXNlU3RhdGU8U2V0PHN0cmluZz4+KG5ldyBTZXQoKSlcbiAgXG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9RVUVSWV9JVEVNLCBxdWVyeUl0ZW0pXG4gIGNvbnN0IFtleHBhbmRBbGwsIHNldEV4cGFuZEFsbF0gPSBSZWFjdC51c2VTdGF0ZShjdXJyZW50SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQgPz8gZmFsc2UpXG4gIGNvbnN0IGJhY2tCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgLy8gVHJhY2sgaWYgd2UndmUgYWxyZWFkeSBzZWxlY3RlZCB0aGVzZSByZWNvcmRzIHRvIHByZXZlbnQgcmUtc2VsZWN0aW9uIHdoZW4gc3dpdGNoaW5nIHRhYnNcbiAgY29uc3QgaGFzU2VsZWN0ZWRSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFRyYWNrIHRoZSBsYXN0IHJlY29yZHMgd2Ugc2VsZWN0ZWQgdG8gZGV0ZWN0IHdoZW4gbmV3IHJlY29yZHMgY29tZSBpblxuICBjb25zdCBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZ1tdPihbXSlcbiAgLy8gVHJhY2sgdGhlIGxhc3Qgc2VsZWN0ZWQgRmVhdHVyZURhdGFSZWNvcmRzIGZvciByZXN0b3JhdGlvbiAoaWYgbmVlZGVkKVxuICBjb25zdCBsYXN0U2VsZWN0ZWRGZWF0dXJlUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxGZWF0dXJlRGF0YVJlY29yZFtdPihbXSlcbiAgLy8gRXJyb3Igc3RhdGUgZm9yIHVzZXItZmFjaW5nIGVycm9yc1xuICBjb25zdCBbc2VsZWN0aW9uRXJyb3IsIHNldFNlbGVjdGlvbkVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcblxuICBjb25zdCBleHRyYUFjdGlvbnMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZ2V0RXh0cmFBY3Rpb25zKHdpZGdldElkLCBvdXRwdXREUywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXG4gIH0sIFt3aWRnZXRJZCwgb3V0cHV0RFMsIGludGwsIHF1ZXJ5SXRlbSwgcnVudGltZVpvb21Ub1NlbGVjdGVkXSlcblxuICBjb25zdCBlbmFibGVEYXRhQWN0aW9uID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uZW5hYmxlRGF0YUFjdGlvbiA/PyB0cnVlXG4gIH0pXG5cbiAgY29uc3QgcGFnaW5nVHlwZUluQ29uZmlnID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdFBhZ2luZ1N0eWxlXG4gIH0pXG4gIGNvbnN0IGRpcmVjdGlvblR5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRMaXN0RGlyZWN0aW9uXG4gIH0pXG4gIGNvbnN0IHBhZ2luZ1R5cGUgPSBwYWdpbmdUeXBlSW5Db25maWcgPz8gUGFnaW5nVHlwZS5NdWx0aVBhZ2VcbiAgY29uc3QgZGlyZWN0aW9uID0gZGlyZWN0aW9uVHlwZUluQ29uZmlnID8/IExpc3REaXJlY3Rpb24uVmVydGljYWxcblxuICAvLyBHcm91cCByZWNvcmRzIGJ5IG9yaWdpbiBkYXRhIHNvdXJjZSBmb3IgRGF0YUFjdGlvbkxpc3RcbiAgLy8gVGhpcyBlbnN1cmVzIERhdGFBY3Rpb25MaXN0IHJlY29nbml6ZXMgcmVjb3JkcyBldmVuIHdoZW4gdGhleSBjb21lIGZyb20gZGlmZmVyZW50IHF1ZXJpZXMvb3JpZ2luc1xuICBjb25zdCBhY3Rpb25EYXRhU2V0czogRGF0YVJlY29yZFNldFtdID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgLy8gRGVidWc6IExvZyB3aGF0IHJlY29yZHMgYXJlIGF2YWlsYWJsZVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1jYWxjdWxhdGlvbi1zdGFydCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICBzZWxlY3RlZFJlY29yZHNDb3VudDogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHF1ZXJ5RGF0YVJlY29yZHNDb3VudDogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFM/LmlkLFxuICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzOiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCA+IDAsXG4gICAgICBoYXNRdWVyeURhdGFSZWNvcmRzOiBxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCA+IDAsXG4gICAgICBoYXNSZWNvcmRzUHJvcDogcmVjb3Jkcz8ubGVuZ3RoID4gMFxuICAgIH0pXG4gICAgXG4gICAgY29uc3QgcmVjb3Jkc1RvVXNlID0gc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggPiAwIFxuICAgICAgPyBzZWxlY3RlZFJlY29yZHMgXG4gICAgICA6IChxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCA+IDAgPyBxdWVyeURhdGEucmVjb3JkcyA6IChyZWNvcmRzIHx8IFtdKSlcbiAgICBcbiAgICAvLyBJZiBubyByZWNvcmRzLCByZXR1cm4gc2luZ2xlIERhdGFSZWNvcmRTZXQgd2l0aCBlbXB0eSByZWNvcmRzIHVzaW5nIG91dHB1dERTXG4gICAgaWYgKCFyZWNvcmRzVG9Vc2UgfHwgcmVjb3Jkc1RvVXNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZW1wdHlEYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICAgICAgdHlwZTogJ2xvYWRlZCcsXG4gICAgICAgIHJlY29yZHM6IFtdLFxuICAgICAgICBuYW1lOiBvdXRwdXREUz8uaWQsXG4gICAgICAgIGxhYmVsOiBvdXRwdXREUz8uZ2V0TGFiZWwoKVxuICAgICAgfVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtZW1wdHktcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgZGF0YVNldERhdGFTb3VyY2VJZDogZW1wdHlEYXRhU2V0LmRhdGFTb3VyY2U/LmlkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIFtlbXB0eURhdGFTZXRdXG4gICAgfVxuICAgIFxuICAgIC8vIEdyb3VwIHJlY29yZHMgYnkgdGhlaXIgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+KClcbiAgICBcbiAgICByZWNvcmRzVG9Vc2UuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgICAgY29uc3QgcmVjb3JkRFMgPSAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICBsZXQgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsID0gbnVsbFxuICAgICAgXG4gICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgb3JpZ2luRFMgPSByZWNvcmREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCByZWNvcmREU1xuICAgICAgfSBlbHNlIGlmIChvdXRwdXREUykge1xuICAgICAgICAvLyBGYWxsYmFjazogdXNlIG91dHB1dERTJ3Mgb3JpZ2luIGlmIHJlY29yZCBkb2Vzbid0IGhhdmUgZGF0YVNvdXJjZVxuICAgICAgICBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICAgIH1cbiAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKS5wdXNoKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIENyZWF0ZSBhIERhdGFSZWNvcmRTZXQgZm9yIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSA9IEFycmF5LmZyb20ocmVjb3Jkc0J5T3JpZ2luRFMuZW50cmllcygpKS5tYXAoKFtvcmlnaW5EUywgb3JpZ2luUmVjb3Jkc10pID0+IHtcbiAgICAgIGNvbnN0IGRhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICAgIGRhdGFTb3VyY2U6IG9yaWdpbkRTLCAvLyBVc2Ugb3JpZ2luIERTLCBub3Qgb3V0cHV0RFNcbiAgICAgICAgdHlwZTogJ3NlbGVjdGVkJyxcbiAgICAgICAgcmVjb3Jkczogb3JpZ2luUmVjb3JkcyxcbiAgICAgICAgbmFtZTogb3JpZ2luRFMuaWQsXG4gICAgICAgIGxhYmVsOiBvcmlnaW5EUy5nZXRMYWJlbCgpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZCBmaWVsZHMgaWYgbmVlZGVkICh1c2UgY3VycmVudEl0ZW0ncyBmaWVsZCBzZXR0aW5ncylcbiAgICAgIGlmIChjdXJyZW50SXRlbS5yZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMgJiYgY3VycmVudEl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcyAhPSBudWxsKSB7XG4gICAgICAgIGRhdGFTZXQuZmllbGRzID0gY29tYmluZUZpZWxkcyhjdXJyZW50SXRlbS5yZXN1bHREaXNwbGF5RmllbGRzLCBjdXJyZW50SXRlbS5yZXN1bHRUaXRsZUV4cHJlc3Npb24pXG4gICAgICB9IGVsc2UgaWYgKG9yaWdpbkRTICYmICdnZXRQb3B1cEluZm8nIGluIG9yaWdpbkRTKSB7XG4gICAgICAgIC8vIHVzZSBmaWVsZHMgaW4gcG9wdXAgdGVtcGxhdGUgZnJvbSBvcmlnaW4gRFNcbiAgICAgICAgY29uc3QgcG9wdXBJbmZvID0gb3JpZ2luRFMuZ2V0UG9wdXBJbmZvKClcbiAgICAgICAgaWYgKHBvcHVwSW5mbz8uZmllbGRJbmZvcykge1xuICAgICAgICAgIGRhdGFTZXQuZmllbGRzID0gcG9wdXBJbmZvLmZpZWxkSW5mb3MuZmlsdGVyKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby52aXNpYmxlKS5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YVNldFxuICAgIH0pXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGF0IHRoZSBmaW5hbCBkYXRhU2V0cyBjb250YWluXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2FjdGlvbkRhdGFTZXRzLWZpbmFsJyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzLmxlbmd0aCxcbiAgICAgIHRvdGFsUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9Vc2UubGVuZ3RoLFxuICAgICAgZGF0YVNldHNCeU9yaWdpbjogZGF0YVNldHMubWFwKGRzID0+ICh7XG4gICAgICAgIG9yaWdpbkRTSWQ6IGRzLmRhdGFTb3VyY2U/LmlkLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICB0eXBlOiBkcy50eXBlXG4gICAgICB9KSlcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIHdlIGNvdWxkbid0IGdyb3VwIGJ5IG9yaWdpbiAoc2hvdWxkbid0IGhhcHBlbiksIGZhbGxiYWNrIHRvIHNpbmdsZSBEYXRhUmVjb3JkU2V0IHdpdGggb3V0cHV0RFNcbiAgICBpZiAoZGF0YVNldHMubGVuZ3RoID09PSAwICYmIG91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1mYWxsYmFjay10by1vdXRwdXREUycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnY291bGQtbm90LWRldGVybWluZS1vcmlnaW4tZHMnXG4gICAgICB9KVxuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgICB0eXBlOiByZWNvcmRzVG9Vc2UubGVuZ3RoID4gMCA/ICdzZWxlY3RlZCcgOiAnbG9hZGVkJyxcbiAgICAgICAgcmVjb3JkczogcmVjb3Jkc1RvVXNlLFxuICAgICAgICBuYW1lOiBvdXRwdXREUy5pZCxcbiAgICAgICAgbGFiZWw6IG91dHB1dERTLmdldExhYmVsKClcbiAgICAgIH1dXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhU2V0c1xuICB9LCBbc2VsZWN0ZWRSZWNvcmRzLCBvdXRwdXREUywgcXVlcnlEYXRhLCBjdXJyZW50SXRlbSwgcmVjb3Jkcywgd2lkZ2V0SWRdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIC8vIGZvY3VzIHRoZSBiYWNrIGJ1dHRvbiB3aGVuIGl0IGlzIHJlbmRlcmVkXG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9KVxuXG4gIC8qKlxuICAgKiBFZmZlY3QgaG9vayB0aGF0IHJ1bnMgd2hlbiBuZXcgcXVlcnkgcmVzdWx0cyBhcnJpdmUuXG4gICAqIFJlc2V0cyByZW1vdmVkIHJlY29yZHMsIGV4cGFuZCBzdGF0ZSwgYW5kIHF1ZXJ5IGRhdGEgZm9yIHRoZSBuZXcgcmVzdWx0cy5cbiAgICogQWxzbyBoYW5kbGVzIGF1dG8tc2VsZWN0aW9uIG9mIHJlY29yZHMgd2hlbiB0aGV5IGZpcnN0IGFycml2ZS5cbiAgICovXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gRGVidWc6IExvZyB3aGVuIHJlY29yZHMgcHJvcCBjaGFuZ2VzXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3JlY29yZHMtcHJvcC1jaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICB3aWxsU2V0UXVlcnlEYXRhOiByZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID4gMFxuICAgIH0pXG4gICAgXG4gICAgLy8gUmVzZXQgcmVtb3ZlZCByZWNvcmRzIHdoZW4gbmV3IHF1ZXJ5IHJlc3VsdHMgY29tZSBpblxuICAgIHNldFJlbW92ZWRSZWNvcmRJZHMobmV3IFNldCgpKVxuICAgIC8vIFJlc2V0IGV4cGFuZCBhbGwgdG8gcXVlcnlJdGVtJ3MgcmVzdWx0RXhwYW5kQnlEZWZhdWx0IHNldHRpbmdcbiAgICBzZXRFeHBhbmRBbGwoY3VycmVudEl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0ID8/IGZhbHNlKVxuICAgIHNldFF1ZXJ5RGF0YSh7XG4gICAgICByZWNvcmRzLFxuICAgICAgcGFnZVNpemU6IGRlZmF1bHRQYWdlU2l6ZSxcbiAgICAgIHBhZ2U6IDFcbiAgICB9KVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoZXNlIGFyZSBuZXcgcmVjb3JkcyAoZGlmZmVyZW50IGZyb20gd2hhdCB3ZSBsYXN0IHNlbGVjdGVkKVxuICAgIGNvbnN0IGN1cnJlbnRSZWNvcmRJZHMgPSByZWNvcmRzPy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKSB8fCBbXVxuICAgIGNvbnN0IHJlY29yZHNDaGFuZ2VkID0gY3VycmVudFJlY29yZElkcy5sZW5ndGggIT09IGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudC5sZW5ndGggfHxcbiAgICAgIGN1cnJlbnRSZWNvcmRJZHMuc29tZSgoaWQsIGluZGV4KSA9PiBpZCAhPT0gbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50W2luZGV4XSlcbiAgICBcbiAgICAvLyBPbmx5IGF1dG8tc2VsZWN0IHJlY29yZHMgaWY6XG4gICAgLy8gMS4gV2UgaGF2ZSByZWNvcmRzIGFuZCBvdXRwdXREU1xuICAgIC8vIDIuIFdlIGhhdmVuJ3QgYWxyZWFkeSBzZWxlY3RlZCB0aGVzZSByZWNvcmRzIChoYXNTZWxlY3RlZFJlZiBpcyBmYWxzZSlcbiAgICAvLyAzLiBPUiB0aGUgcmVjb3JkcyBoYXZlIGFjdHVhbGx5IGNoYW5nZWQgKG5ldyBxdWVyeSByZXN1bHRzKVxuICAgIGlmIChyZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID4gMCAmJiBvdXRwdXREUyAmJiAoIWhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgfHwgcmVjb3Jkc0NoYW5nZWQpKSB7XG4gICAgICBjb25zdCByZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBjb25zdCBmZHIgPSByZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICAgIFxuICAgICAgLy8gU2VsZWN0IHJlY29yZHMgYW5kIHB1Ymxpc2ggc2VsZWN0aW9uIG1lc3NhZ2UgdXNpbmcgdXRpbGl0eSBmdW5jdGlvblxuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzXG4gICAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCBmZHIpXG4gICAgICAgIGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgPSB0cnVlIC8vIE1hcmsgYXMgc2VsZWN0ZWRcbiAgICAgICAgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gcmVjb3JkSWRzIC8vIFN0b3JlIHRoZSBJRHMgd2Ugc2VsZWN0ZWRcbiAgICAgICAgbGFzdFNlbGVjdGVkRmVhdHVyZVJlY29yZHNSZWYuY3VycmVudCA9IGZkciAvLyBTdG9yZSB0aGUgZnVsbCByZWNvcmRzIGZvciBwb3RlbnRpYWwgcmVzdG9yYXRpb25cbiAgICAgICAgXG4gICAgICAgIC8vIE5vdGlmeSBIZWxwZXJTaW1wbGUgb2Ygc2VsZWN0aW9uIGNoYW5nZVxuICAgICAgICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGNvbnN0IGRhdGFTb3VyY2VJZCA9IG9yaWdpbkRTPy5pZFxuICAgICAgICBjb25zdCBzZWxlY3Rpb25FdmVudCA9IG5ldyBDdXN0b21FdmVudCgncXVlcnlzaW1wbGUtc2VsZWN0aW9uLWNoYW5nZWQnLCB7XG4gICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgIHJlY29yZElkcyxcbiAgICAgICAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgICAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHNlbGVjdGlvbkV2ZW50KVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQtcXVlcnktcmVzdWx0JyxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVjb3Jkc0NoYW5nZWQgJiYgcmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gSWYgcmVjb3JkcyB3ZXJlIGNsZWFyZWQsIHJlc2V0IHRoZSBzZWxlY3Rpb24gZmxhZ1xuICAgICAgaGFzU2VsZWN0ZWRSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBbXVxuICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgZXJyb3JzIHdoZW4gY2xlYXJpbmcgcmVjb3Jkc1xuICAgIH1cbiAgfSwgW3JlY29yZHMsIGRlZmF1bHRQYWdlU2l6ZSwgb3V0cHV0RFMsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIHF1ZXJ5SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHRdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gY2xlYXIgc2VsZWN0aW9uIHdoZW4gcmVzdWx0U2VsZWN0TW9kZSBjaGFuZ2VkXG4gICAgaWYgKG91dHB1dERTKSB7XG4gICAgICBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMob3V0cHV0RFMpXG4gICAgICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgW10sIG91dHB1dERTLCB0cnVlKVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbS5yZXN1bHRTZWxlY3RNb2RlLCBvdXRwdXREUywgd2lkZ2V0SWRdKVxuXG4gIC8vIFVwZGF0ZSBleHBhbmRBbGwgd2hlbiBxdWVyeUl0ZW0gY2hhbmdlcyAoZS5nLiwgc3dpdGNoaW5nIGJldHdlZW4gcXVlcmllcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRFeHBhbmRBbGwoY3VycmVudEl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0ID8/IGZhbHNlKVxuICB9LCBbcXVlcnlJdGVtLmNvbmZpZ0lkLCBxdWVyeUl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0XSlcblxuICAvKipcbiAgICogTW9uaXRvciBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9uIGNoYW5nZXMgdG8gZGV0ZWN0IHdoZW4gb3RoZXIgd2lkZ2V0cyAobGlrZSBtYXAgaWRlbnRpZnkpXG4gICAqIGNsZWFyIG91ciBzZWxlY3Rpb25zLiBFbmhhbmNlZCB3aXRoIGlkZW50aWZ5IHBvcHVwIGRldGVjdGlvbiBmb3IgdGVzdGluZyBzY2VuYXJpb3MuXG4gICAqIFdhdGNoZXMgdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSdzIHNlbGVjdGlvbiBzdGF0ZSBkaXJlY3RseSB2aWEgcG9sbGluZy5cbiAgICovXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG5cbiAgICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgaWYgKCFvcmlnaW5EUykgcmV0dXJuXG5cbiAgICBjb25zdCBvcmlnaW5EU0lkID0gb3JpZ2luRFMuaWRcbiAgICBsZXQgcHJldmlvdXNTZWxlY3RlZElkczogc3RyaW5nW10gPSBbXVxuICAgIGxldCBpZGVudGlmeVBvcHVwV2FzT3BlbiA9IGZhbHNlXG4gICAgbGV0IGxhc3RMb2dUaW1lID0gMFxuICAgIGNvbnN0IExPR19USFJPVFRMRV9NUyA9IDEwMDAgLy8gVGhyb3R0bGUgbG9ncyB0byBvbmNlIHBlciBzZWNvbmRcbiAgICBcbiAgICAvLyBJbml0aWFsIGNoZWNrXG4gICAgcHJldmlvdXNTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICBpZGVudGlmeVBvcHVwV2FzT3BlbiA9IGlzSWRlbnRpZnlQb3B1cE9wZW4oKVxuXG4gICAgLy8gV2F0Y2ggZm9yIHNlbGVjdGlvbiBjaGFuZ2VzIG9uIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICBjb25zdCBjaGVja1NlbGVjdGlvbiA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IG91ckV4cGVjdGVkSWRzID0gbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50XG4gICAgICBjb25zdCBoYXNPdXJTZWxlY3Rpb24gPSBvdXJFeHBlY3RlZElkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwSXNPcGVuID0gaXNJZGVudGlmeVBvcHVwT3BlbigpXG4gICAgICBcbiAgICAgIC8vIERldGVjdCBpZiBzZWxlY3Rpb24gd2FzIGNsZWFyZWQgb3IgY2hhbmdlZCBleHRlcm5hbGx5XG4gICAgICBjb25zdCB3YXNDbGVhcmVkID0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggPiAwICYmIGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggPT09IDBcbiAgICAgIGNvbnN0IHdhc0NoYW5nZWQgPSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgIChjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoICE9PSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCB8fFxuICAgICAgICAgIWN1cnJlbnRTZWxlY3RlZElkcy5ldmVyeShpZCA9PiBwcmV2aW91c1NlbGVjdGVkSWRzLmluY2x1ZGVzKGlkKSkpXG4gICAgICBcbiAgICAgIC8vIE5FVzogRGV0ZWN0IGlmIHNlbGVjdGlvbiB3YXMgYWRkZWQgKHdlbnQgZnJvbSBlbXB0eSB0byBoYXZpbmcgcmVjb3JkcylcbiAgICAgIGNvbnN0IHdhc0FkZGVkID0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggPT09IDAgJiYgY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCA+IDBcbiAgICAgIFxuICAgICAgLy8gVHJhY2sgaWRlbnRpZnkgcG9wdXAgc3RhdGUgY2hhbmdlc1xuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQgPSAhaWRlbnRpZnlQb3B1cFdhc09wZW4gJiYgaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQgPSBpZGVudGlmeVBvcHVwV2FzT3BlbiAmJiAhaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cFN0aWxsT3BlbiA9IGlkZW50aWZ5UG9wdXBXYXNPcGVuICYmIGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgIFxuICAgICAgLy8gTG9nIGlkZW50aWZ5IHBvcHVwIHN0YXRlIGNoYW5nZXNcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgICAgIGlmIChpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCB8fCBpZGVudGlmeVBvcHVwSnVzdENsb3NlZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1NFTEVDVElPTicsIHtcbiAgICAgICAgICBldmVudDogaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQgPyAnaWRlbnRpZnktcG9wdXAtb3BlbmVkJyA6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQnLFxuICAgICAgICAgIG9yaWdpbkRTSWQsXG4gICAgICAgICAgb3VyU2VsZWN0aW9uQ291bnQ6IG91ckV4cGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICBjdXJyZW50U2VsZWN0aW9uQ291bnQ6IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIElmIGlkZW50aWZ5IHBvcHVwIGp1c3QgY2xvc2VkIGFuZCBzZWxlY3Rpb24gd2FzIGNsZWFyZWQsIGRpc3BhdGNoIHJlc3RvcmUgZXZlbnRcbiAgICAgICAgaWYgKGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkICYmIHdhc0NsZWFyZWQgJiYgaGFzT3VyU2VsZWN0aW9uICYmIG91ckV4cGVjdGVkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCByZXN0b3JlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgICByZWNvcmRJZHM6IG91ckV4cGVjdGVkSWRzLFxuICAgICAgICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChyZXN0b3JlRXZlbnQpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdTRUxFQ1RJT04nLCB7XG4gICAgICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXJlcXVlc3RlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgIHJlY29yZENvdW50OiBvdXJFeHBlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIExvZyBBTEwgc2VsZWN0aW9uIGNoYW5nZXMgKG5vdCBqdXN0IHdoZW4gd2UgaGF2ZSBvdXIgb3duIHNlbGVjdGlvbilcbiAgICAgIGlmICh3YXNDbGVhcmVkIHx8IHdhc0NoYW5nZWQgfHwgd2FzQWRkZWQpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBtYXRjaGVzIG91ciBleHBlY3RlZCBzZWxlY3Rpb25cbiAgICAgICAgY29uc3QgbWF0Y2hlc091clNlbGVjdGlvbiA9IGhhc091clNlbGVjdGlvbiAmJiBcbiAgICAgICAgICBvdXJFeHBlY3RlZElkcy5sZW5ndGggPT09IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggJiZcbiAgICAgICAgICBvdXJFeHBlY3RlZElkcy5ldmVyeShpZCA9PiBjdXJyZW50U2VsZWN0ZWRJZHMuaW5jbHVkZXMoaWQpKVxuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoYXQgd291bGQgaGFwcGVuIChmb3IgdGVzdGluZy9sb2dnaW5nKVxuICAgICAgICBjb25zdCB3b3VsZFJlc3RvcmUgPSB3YXNDbGVhcmVkICYmIGlkZW50aWZ5UG9wdXBJc09wZW4gJiYgaGFzT3VyU2VsZWN0aW9uICYmIG91ckV4cGVjdGVkSWRzLmxlbmd0aCA+IDBcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluZSBzY2VuYXJpb1xuICAgICAgICBsZXQgc2NlbmFyaW8gPSAnVW5rbm93bidcbiAgICAgICAgaWYgKHdhc0FkZGVkICYmICFoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9ICdURVNUIFNDRU5BUklPIDQ6IEFub3RoZXIgd2lkZ2V0IHNlbGVjdGVkIHJlY29yZHMgKHdlIGhhdmUgbm8gc2VsZWN0aW9uKSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNDaGFuZ2VkICYmICFtYXRjaGVzT3VyU2VsZWN0aW9uICYmICFoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9ICdURVNUIFNDRU5BUklPIDU6IEFub3RoZXIgd2lkZ2V0IGNoYW5nZWQgc2VsZWN0aW9uICh3ZSBoYXZlIG5vIHNlbGVjdGlvbiknXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQ2hhbmdlZCAmJiAhbWF0Y2hlc091clNlbGVjdGlvbiAmJiBoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9IGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgICAgICAgID8gJ1RFU1QgU0NFTkFSSU8gMjogUXVlcnkg4oaSIElkZW50aWZ5IChzZWxlY3Rpb24gY2hhbmdlZCwgbm90IGNsZWFyZWQpIOKGkiBXb3VsZCBOT1QgcmVzdG9yZSdcbiAgICAgICAgICAgIDogJ1RFU1QgU0NFTkFSSU8gMzogUXVlcnkg4oaSIEFub3RoZXIgUXVlcnlTaW1wbGUgd2lkZ2V0IOKGkiBXb3VsZCBOT1QgcmVzdG9yZSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNDbGVhcmVkICYmIGhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgICAgICAgPyAnVEVTVCBTQ0VOQVJJTyAxOiBRdWVyeSDihpIgSWRlbnRpZnkg4oaSIFdvdWxkIHJlc3RvcmUnXG4gICAgICAgICAgICA6ICdURVNUIFNDRU5BUklPIDM6IFF1ZXJ5IOKGkiBBbm90aGVyIFF1ZXJ5U2ltcGxlIHdpZGdldCAoY2xlYXJlZCkg4oaSIFdvdWxkIE5PVCByZXN0b3JlJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0FkZGVkICYmIGhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gbWF0Y2hlc091clNlbGVjdGlvblxuICAgICAgICAgICAgPyAnT3VyIHdpZGdldCBzZWxlY3RlZCByZWNvcmRzJ1xuICAgICAgICAgICAgOiAnQW5vdGhlciB3aWRnZXQgc2VsZWN0ZWQgZGlmZmVyZW50IHJlY29yZHMnXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIExvZyBkZXRlY3Rpb24gd2l0aCBpZGVudGlmeSBwb3B1cCBzdGF0ZSAodGhyb3R0bGVkKVxuICAgICAgICBpZiAobm93IC0gbGFzdExvZ1RpbWUgPiBMT0dfVEhST1RUTEVfTVMpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1NFTEVDVElPTicsIHtcbiAgICAgICAgICAgIGV2ZW50OiB3YXNDbGVhcmVkID8gJ3NlbGVjdGlvbi1jbGVhcmVkJyA6IHdhc0NoYW5nZWQgPyAnc2VsZWN0aW9uLWNoYW5nZWQnIDogJ3NlbGVjdGlvbi1hZGRlZCcsXG4gICAgICAgICAgICBvcmlnaW5EU0lkLFxuICAgICAgICAgICAgb3VyRXhwZWN0ZWRDb3VudDogb3VyRXhwZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZENvdW50OiBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgd2FzQ2xlYXJlZCxcbiAgICAgICAgICAgIHdhc0NoYW5nZWQsXG4gICAgICAgICAgICB3YXNBZGRlZCxcbiAgICAgICAgICAgIGhhc091clNlbGVjdGlvbixcbiAgICAgICAgICAgIG1hdGNoZXNPdXJTZWxlY3Rpb24sXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwSXNPcGVuLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQsXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwU3RpbGxPcGVuLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQsXG4gICAgICAgICAgICB3b3VsZFJlc3RvcmUsXG4gICAgICAgICAgICBvdXJFeHBlY3RlZElkczogb3VyRXhwZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkSWRzOiBwcmV2aW91c1NlbGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkSWRzOiBjdXJyZW50U2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIG5vdGU6IHdvdWxkUmVzdG9yZSBcbiAgICAgICAgICAgICAgPyAnV291bGQgcmVzdG9yZSBzZWxlY3Rpb24gKGNsZWFyZWQgKyBpZGVudGlmeSBwb3B1cCBvcGVuKSdcbiAgICAgICAgICAgICAgOiBpZGVudGlmeVBvcHVwSXNPcGVuICYmIHdhc0NoYW5nZWRcbiAgICAgICAgICAgICAgICA/ICdJZGVudGlmeSBwb3B1cCBvcGVuIGJ1dCBzZWxlY3Rpb24gY2hhbmdlZCAobm90IGNsZWFyZWQpIC0gd291bGQgbm90IHJlc3RvcmUnXG4gICAgICAgICAgICAgICAgOiB3YXNDbGVhcmVkICYmICFpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICAgICAgICAgICAgICA/ICdTZWxlY3Rpb24gY2xlYXJlZCwgY2hlY2tpbmcgaWYgaWRlbnRpZnkgcG9wdXAgb3BlbnMuLi4nXG4gICAgICAgICAgICAgICAgICA6IHdhc0FkZGVkXG4gICAgICAgICAgICAgICAgICAgID8gaGFzT3VyU2VsZWN0aW9uICYmIG1hdGNoZXNPdXJTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICA/ICdPdXIgd2lkZ2V0IHNlbGVjdGVkIHJlY29yZHMnXG4gICAgICAgICAgICAgICAgICAgICAgOiBoYXNPdXJTZWxlY3Rpb24gJiYgIW1hdGNoZXNPdXJTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ0Fub3RoZXIgd2lkZ2V0IHNlbGVjdGVkIGRpZmZlcmVudCByZWNvcmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnU2VsZWN0aW9uIGFkZGVkIChieSBhbm90aGVyIHdpZGdldCBvciBleHRlcm5hbCBzb3VyY2UpJ1xuICAgICAgICAgICAgICAgICAgICA6ICdObyBpZGVudGlmeSBwb3B1cCBkZXRlY3RlZCAtIHdvdWxkIG5vdCByZXN0b3JlJ1xuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgbGFzdExvZ1RpbWUgPSBub3dcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBwcmV2aW91c1NlbGVjdGVkSWRzID0gWy4uLmN1cnJlbnRTZWxlY3RlZElkc11cbiAgICAgIGlkZW50aWZ5UG9wdXBXYXNPcGVuID0gaWRlbnRpZnlQb3B1cElzT3BlblxuICAgIH1cblxuICAgIC8vIENoZWNrIHBlcmlvZGljYWxseSAoZXZlcnkgNTAwbXMpXG4gICAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGNoZWNrU2VsZWN0aW9uLCA1MDApXG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZClcbiAgICB9XG4gIH0sIFtvdXRwdXREU10pXG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgcmVzdWx0cy4gUmVzZXRzIGxvY2FsIHN0YXRlIGFuZCBkZWxlZ2F0ZXMgdG8gcGFyZW50J3MgY2xlYXJSZXN1bHQgbWV0aG9kLlxuICAgKi9cbiAgY29uc3QgY2xlYXJSZXN1bHRzID0gKCkgPT4ge1xuICAgIC8vIFJlc2V0IGxvY2FsIHNlbGVjdGlvbiBmbGFnc1xuICAgIGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IFtdXG4gICAgLy8gUmVzZXQgbG9jYWwgcXVlcnkgZGF0YSBzdGF0ZVxuICAgIHNldFF1ZXJ5RGF0YShudWxsKVxuICAgIHNldFJlbW92ZWRSZWNvcmRJZHMobmV3IFNldCgpKVxuICAgIC8vIENsZWFyIGVycm9yIHN0YXRlIHdoZW4gY2xlYXJpbmcgcmVzdWx0c1xuICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpXG4gICAgLy8gRGVsZWdhdGUgdG8gcGFyZW50J3MgY2xlYXJSZXN1bHQgbWV0aG9kICh2aWEgb25OYXZCYWNrKSB3aGljaCBoYW5kbGVzXG4gICAgLy8gY2xlYXJpbmcgc2VsZWN0aW9uIGZyb20gbWFwLCBwdWJsaXNoaW5nIG1lc3NhZ2VzLCBldGMuXG4gICAgb25OYXZCYWNrKHRydWUpXG4gIH1cblxuICBjb25zdCBoYW5kbGVSZW5kZXJEb25lID0gUmVhY3QudXNlQ2FsbGJhY2soKHsgZGF0YUl0ZW1zLCBwYWdlU2l6ZSwgcGFnZSB9KSA9PiB7XG4gICAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHMgLSBjaGVjayBpZiBkYXRhSXRlbXMgZXhpc3RzIGZpcnN0XG4gICAgY29uc3QgZmlsdGVyZWRJdGVtcyA9IGRhdGFJdGVtcz8uZmlsdGVyKGl0ZW0gPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKGl0ZW0uZ2V0SWQoKSkpIHx8IFtdXG4gICAgXG4gICAgc2V0UXVlcnlEYXRhKHtcbiAgICAgIHJlY29yZHM6IGZpbHRlcmVkSXRlbXMsXG4gICAgICBwYWdlU2l6ZSxcbiAgICAgIHBhZ2VcbiAgICB9KVxuICAgIFxuICAgIC8vIEVuc3VyZSBhbGwgbG9hZGVkIHJlY29yZHMgcmVtYWluIHNlbGVjdGVkIChmb3IgbGF6eSBsb2FkaW5nKVxuICAgIC8vIFRoaXMga2VlcHMgcmVjb3JkcyBzZWxlY3RlZCBhcyB0aGV5J3JlIGxvYWRlZCBpbmNyZW1lbnRhbGx5XG4gICAgaWYgKGZpbHRlcmVkSXRlbXMgJiYgZmlsdGVyZWRJdGVtcy5sZW5ndGggPiAwICYmIG91dHB1dERTKSB7XG4gICAgICBjb25zdCByZWNvcmRJZHMgPSBmaWx0ZXJlZEl0ZW1zLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBjb25zdCBmZHIgPSBmaWx0ZXJlZEl0ZW1zIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICAgIFxuICAgICAgLy8gU2VsZWN0IGFsbCByZWNvcmRzIGFuZCBwdWJsaXNoIHNlbGVjdGlvbiBtZXNzYWdlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICAgIHRyeSB7XG4gICAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIHByZXZpb3VzIGVycm9yc1xuICAgICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCh3aWRnZXRJZCwgb3V0cHV0RFMsIHJlY29yZElkcywgZmRyKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQtaGFuZGxlUmVuZGVyRG9uZScsXG4gICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZElkcy5sZW5ndGhcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtvdXRwdXREUywgd2lkZ2V0SWQsIHJlbW92ZWRSZWNvcmRJZHNdKVxuXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKG91dHB1dERTPy5pZClcbiAgICBjb25zdCBkc1JlY29yZHMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICBjb25zdCBzZWxlY3RlZElkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZElkcygpID8/IFtdXG4gICAgXG4gICAgLy8gQ2FwdHVyZSByZWNvcmRzIHByb3AgYmVmb3JlIHVzaW5nIGl0ICh0byBhdm9pZCBzaGFkb3dpbmcpXG4gICAgY29uc3QgcmVjb3Jkc1Byb3AgPSByZWNvcmRzXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGF0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlIHNlZXNcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UtZmlyZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFM/LmlkLFxuICAgICAgZHNJZDogZHM/LmlkLFxuICAgICAgc2VsZWN0ZWRSZWNvcmRzRnJvbURTOiBkc1JlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2VsZWN0ZWRJZHNGcm9tRFM6IHNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFJlY29yZHNTdGF0ZTogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHNQcm9wPy5sZW5ndGggfHwgMFxuICAgIH0pXG4gICAgXG4gICAgLy8gSWYgd2UgaGF2ZSByZWNvcmRzIGluIHRoZSBwcm9wIChhY2N1bXVsYXRlZCByZWNvcmRzKSBidXQgRFMgc2hvd3MgMCBzZWxlY3RlZCxcbiAgICAvLyBhbmQgd2UgY3VycmVudGx5IGhhdmUgc2VsZWN0ZWRSZWNvcmRzLCB0aGlzIGlzIGxpa2VseSBhIHF1ZXJ5IHN3aXRjaCBpbiBcIkFkZCB0b1wiIG1vZGVcbiAgICAvLyB3aGVyZSByZS1zZWxlY3Rpb24gaGFzbid0IGhhcHBlbmVkIHlldC4gRG9uJ3QgY2xlYXIgc2VsZWN0ZWRSZWNvcmRzIC0gd2FpdCBmb3IgcmUtc2VsZWN0aW9uLlxuICAgIGlmIChyZWNvcmRzUHJvcCAmJiByZWNvcmRzUHJvcC5sZW5ndGggPiAwICYmIHNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMCAmJiBzZWxlY3RlZFJlY29yZHMgJiYgc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXNraXBwaW5nLWNsZWFyLWR1cmluZy1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogJ3dhaXRpbmctZm9yLXJlc2VsZWN0aW9uJyxcbiAgICAgICAgcmVjb3Jkc1Byb3BDb3VudDogcmVjb3Jkc1Byb3AubGVuZ3RoLFxuICAgICAgICBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm4gLy8gU2tpcCB1cGRhdGluZyAtIHJlLXNlbGVjdGlvbiBpcyBjb21pbmdcbiAgICB9XG4gICAgXG4gICAgbGV0IHNob3VsZFVwZGF0ZSA9IGZhbHNlXG4gICAgaWYgKHNlbGVjdGVkSWRzLmxlbmd0aCAhPT0gc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGgpIHtcbiAgICAgIHNob3VsZFVwZGF0ZSA9IHRydWVcbiAgICB9IGVsc2UgeyAvLyBlcXVhbCBsZW5ndGhcbiAgICAgIHNob3VsZFVwZGF0ZSA9IHNlbGVjdGVkSWRzLnNvbWUoaWQgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBzZWxlY3RlZFJlY29yZHMuZmluZCgoaXRlbSkgPT4gaXRlbS5nZXRJZCgpID09PSBpZClcbiAgICAgICAgcmV0dXJuIHRhcmdldCA9PSBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS11cGRhdGluZy1zZWxlY3RlZFJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIG9sZENvdW50OiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBuZXdDb3VudDogZHNSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgfSlcbiAgICAgIHNldFNlbGVjdGVkUmVjb3Jkcyhkc1JlY29yZHMpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXNraXBwaW5nLXVwZGF0ZScsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnbm8tY2hhbmdlLWRldGVjdGVkJ1xuICAgICAgfSlcbiAgICB9XG4gIH0sIFtvdXRwdXREUz8uaWQsIHNlbGVjdGVkUmVjb3Jkcywgd2lkZ2V0SWQsIHJlY29yZHNdKVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgdGhlIHRpcCBtZXNzYWdlIHNob3dpbmcgaG93IG1hbnkgZmVhdHVyZXMgYXJlIGRpc3BsYXllZC5cbiAgICogRmlsdGVycyBvdXQgcmVtb3ZlZCByZWNvcmRzIHRvIHNob3cgYWNjdXJhdGUgY291bnRzLlxuICAgKiBcbiAgICogQHJldHVybnMgRm9ybWF0dGVkIHN0cmluZyBsaWtlIFwiRmVhdHVyZXMgZGlzcGxheWVkOiAxMTggLyAxMjFcIlxuICAgKi9cbiAgY29uc3QgZ2V0VGlwTWVzc2FnZSA9ICgpID0+IHtcbiAgICBpZiAocXVlcnlEYXRhICYmIHF1ZXJ5RGF0YS5yZWNvcmRzKSB7XG4gICAgICAvLyBGaWx0ZXIgb3V0IHJlbW92ZWQgcmVjb3JkcyBmb3IgZGlzcGxheSBjb3VudFxuICAgICAgY29uc3QgZGlzcGxheWVkUmVjb3JkcyA9IHF1ZXJ5RGF0YS5yZWNvcmRzLmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKVxuICAgICAgY29uc3QgZGlzcGxheWVkQ291bnQgPSBkaXNwbGF5ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgXG4gICAgICBpZiAocGFnaW5nVHlwZSA9PT0gUGFnaW5nVHlwZS5MYXp5TG9hZCkge1xuICAgICAgICByZXR1cm4gYCR7Z2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVzRGlzcGxheWVkJyl9OiAke2Rpc3BsYXllZENvdW50fSAvICR7cmVzdWx0Q291bnR9YFxuICAgICAgfVxuICAgICAgY29uc3QgeyBwYWdlID0gMSwgcGFnZVNpemUgPSBkZWZhdWx0UGFnZVNpemUgfSA9IHF1ZXJ5RGF0YVxuICAgICAgY29uc3QgZnJvbSA9IChwYWdlIC0gMSkgKiBwYWdlU2l6ZSArIDFcbiAgICAgIGNvbnN0IHRvID0gZnJvbSArIHBhZ2VTaXplIC0gMVxuICAgICAgaWYgKHJlc3VsdENvdW50ID4gMCkge1xuICAgICAgICByZXR1cm4gYCR7Z2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVzRGlzcGxheWVkJyl9OiAke2Zyb219IC0gJHtNYXRoLm1pbih0bywgZGlzcGxheWVkQ291bnQpfSAvICR7cmVzdWx0Q291bnR9YFxuICAgICAgfVxuICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogMCAtIDAgLyAwYFxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIGV4cGFuZC9jb2xsYXBzZSBzdGF0ZSBmb3IgYWxsIHJlc3VsdCBpdGVtcy5cbiAgICogV2hlbiB0b2dnbGVkLCBhbGwgcmVzdWx0IGl0ZW1zIHdpbGwgYmUgZXhwYW5kZWQgb3IgY29sbGFwc2VkIHRvZ2V0aGVyLlxuICAgKi9cbiAgY29uc3QgdG9nZ2xlRXhwYW5kQWxsID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldEV4cGFuZEFsbChwcmV2ID0+ICFwcmV2KVxuICB9LCBbXSlcblxuICBjb25zdCByZXN1bHRVc2VPdXRwdXREYXRhU291cmNlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIEltbXV0YWJsZSh7XG4gICAgICBkYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWQsXG4gICAgICBtYWluRGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgfSlcbiAgfSwgW3F1ZXJ5SXRlbT8ub3V0cHV0RGF0YVNvdXJjZUlkXSlcblxuICBjb25zdCBoYW5kbGVFc2NhcGUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9LCBbXSlcblxuICAvLyBLZWVwIHJlY29yZHMgc2VsZWN0ZWQgYW5kIHpvb20gdG8gY2xpY2tlZCByZWNvcmRcbiAgLy8gUmVjb3JkcyByZW1haW4gc2VsZWN0ZWQgYXMgbG9uZyBhcyB0aGV5J3JlIGluIHRoZSByZXN1bHRzXG4gIC8vIENsaWNraW5nIGEgcmVjb3JkIGFsd2F5cyB6b29tcyB0byBpdCBvbiB0aGUgbWFwICh0aGlzIGJlaGF2aW9yIGlzIGFsd2F5cyBlbmFibGVkKVxuICBjb25zdCB0b2dnbGVTZWxlY3Rpb24gPSBSZWFjdC51c2VDYWxsYmFjaygoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHtcbiAgICAvLyBFbnN1cmUgdGhlIGNsaWNrZWQgcmVjb3JkIGlzIHNlbGVjdGVkIChpdCBzaG91bGQgYWxyZWFkeSBiZSwgYnV0IGVuc3VyZSBpdClcbiAgICBjb25zdCBzZWxlY3RlZERhdGFzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgPz8gW11cbiAgICBjb25zdCBzZWxlY3RlZElkcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICBjb25zdCBkYXRhSWQgPSBkYXRhLmdldElkKClcbiAgICBcbiAgICAvLyBJZiB0aGlzIHJlY29yZCBpc24ndCBhbHJlYWR5IHNlbGVjdGVkLCBhZGQgaXQgdG8gdGhlIHNlbGVjdGlvblxuICAgIGlmICghc2VsZWN0ZWRJZHMuaW5jbHVkZXMoZGF0YUlkKSkge1xuICAgICAgY29uc3QgdXBkYXRlZFNlbGVjdGVkRGF0YXMgPSBbLi4uc2VsZWN0ZWREYXRhcywgZGF0YV1cbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IHVwZGF0ZWRTZWxlY3RlZERhdGFzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBcbiAgICAgIC8vIFNlbGVjdCByZWNvcmRzIGFuZCBwdWJsaXNoIHNlbGVjdGlvbiBtZXNzYWdlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCB1cGRhdGVkU2VsZWN0ZWREYXRhcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLCB0cnVlKVxuICAgIH1cbiAgICBcbiAgICAvLyBab29tIHRvIHRoZSBjbGlja2VkIHJlY29yZCB1c2luZyBkYXRhIGFjdGlvbnMgKGFsd2F5cyBlbmFibGVkIC0gdXNlciB3YW50cyB0byBrZWVwIHRoaXMgYmVoYXZpb3IpXG4gICAgY29uc3QgZGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgcmVjb3JkczogW2RhdGFdLFxuICAgICAgdHlwZTogJ3NlbGVjdGVkJyxcbiAgICAgIG5hbWU6IG91dHB1dERTLmdldExhYmVsKClcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IGF2YWlsYWJsZSBkYXRhIGFjdGlvbnMgYW5kIGZpbmQgdGhlIHpvb21Ub0ZlYXR1cmUgYWN0aW9uXG4gICAgRGF0YUFjdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRTdXBwb3J0ZWRBY3Rpb25zKHdpZGdldElkLCBbZGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzKVxuICAgICAgLnRoZW4oYWN0aW9uQ2F0ZWdvcmllcyA9PiB7XG4gICAgICAgIC8vIExvb2sgZm9yIHpvb21Ub0ZlYXR1cmUgYWN0aW9uIGluIGFueSBjYXRlZ29yeVxuICAgICAgICBsZXQgem9vbUFjdGlvbjogYW55ID0gbnVsbFxuICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IGluIGFjdGlvbkNhdGVnb3JpZXMpIHtcbiAgICAgICAgICBjb25zdCBhY3Rpb25zID0gYWN0aW9uQ2F0ZWdvcmllc1tjYXRlZ29yeV1cbiAgICAgICAgICB6b29tQWN0aW9uID0gYWN0aW9ucy5maW5kKChhY3Rpb246IGFueSkgPT4gYWN0aW9uLm5hbWUgPT09ICd6b29tVG9GZWF0dXJlJyB8fCBhY3Rpb24uaWQgPT09ICd6b29tVG9GZWF0dXJlJylcbiAgICAgICAgICBpZiAoem9vbUFjdGlvbikgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh6b29tQWN0aW9uKSB7XG4gICAgICAgICAgLy8gRXhlY3V0ZSB0aGUgem9vbSBhY3Rpb25cbiAgICAgICAgICByZXR1cm4gRGF0YUFjdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5leGVjdXRlRGF0YUFjdGlvbih6b29tQWN0aW9uLCBbZGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzLCB3aWRnZXRJZClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIC8vIFNpbGVudGx5IGhhbmRsZSBlcnJvcnNcbiAgICAgIH0pXG4gIH0sIFtvdXRwdXREUywgd2lkZ2V0SWRdKVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgcmVjb3JkIGZyb20gdGhlIHJlc3VsdHMgYW5kIHNlbGVjdGlvbi5cbiAgICogSWYgcmVtb3ZpbmcgdGhlIGxhc3QgcmVjb3JkLCBhdXRvbWF0aWNhbGx5IGNsZWFycyBhbGwgcmVzdWx0c1xuICAgKiBieSBjYWxsaW5nIHRoZSB0cmFzaCBjYW4gbG9naWMgKHNhbWUgYXMgY2xpY2tpbmcgQ2xlYXIgYnV0dG9uKS5cbiAgICogVGhpcyBlbnN1cmVzIHRoZSBVSSBkb2Vzbid0IHNob3cgXCJGZWF0dXJlcyBkaXNwbGF5ZWQ6IDAgLyAxXCIgd2hlbiBhbGwgcmVzdWx0cyBhcmUgcmVtb3ZlZC5cbiAgICogXG4gICAqIEBwYXJhbSBkYXRhIC0gVGhlIGZlYXR1cmUgZGF0YSByZWNvcmQgdG8gcmVtb3ZlXG4gICAqL1xuICBjb25zdCByZW1vdmVSZWNvcmQgPSBSZWFjdC51c2VDYWxsYmFjaygoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHtcbiAgICBjb25zdCBkYXRhSWQgPSBkYXRhLmdldElkKClcbiAgICBcbiAgICAvLyBBZGQgdG8gcmVtb3ZlZCByZWNvcmRzIHNldFxuICAgIHNldFJlbW92ZWRSZWNvcmRJZHMocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpLmFkZChkYXRhSWQpXG4gICAgICBcbiAgICAgIC8vIElmIGFsbCByZWNvcmRzIGFyZSBub3cgcmVtb3ZlZCwgY2xlYXIgZXZlcnl0aGluZyBieSBjYWxsaW5nIHRyYXNoIGNhbiBsb2dpY1xuICAgICAgLy8gQ2hlY2s6IGlmIHRoZSBuZXcgc2V0IHNpemUgZXF1YWxzIHRoZSB0b3RhbCByZXN1bHQgY291bnQsIGFsbCByZWNvcmRzIGFyZSByZW1vdmVkXG4gICAgICBpZiAobmV3U2V0LnNpemUgPT09IHJlc3VsdENvdW50KSB7XG4gICAgICAgIC8vIEFsbCByZWNvcmRzIHJlbW92ZWQgLSBjbGVhciBldmVyeXRoaW5nIChzYW1lIGFzIGNsaWNraW5nIHRyYXNoIGNhbiBidXR0b24pXG4gICAgICAgIG9uTmF2QmFjayh0cnVlKVxuICAgICAgICByZXR1cm4gbmV3U2V0XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBuZXdTZXRcbiAgICB9KVxuICAgIFxuICAgIC8vIFVwZGF0ZSBxdWVyeURhdGEgdG8gZmlsdGVyIG91dCB0aGUgcmVtb3ZlZCByZWNvcmRcbiAgICBzZXRRdWVyeURhdGEocHJldkRhdGEgPT4ge1xuICAgICAgaWYgKCFwcmV2RGF0YSkgcmV0dXJuIHByZXZEYXRhXG4gICAgICBjb25zdCBmaWx0ZXJlZFJlY29yZHMgPSBwcmV2RGF0YS5yZWNvcmRzLmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiByZWNvcmQuZ2V0SWQoKSAhPT0gZGF0YUlkKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucHJldkRhdGEsXG4gICAgICAgIHJlY29yZHM6IGZpbHRlcmVkUmVjb3Jkc1xuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRhcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpID8/IFtdXG4gICAgY29uc3Qgc2VsZWN0ZWRJZHMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZElkcygpID8/IFtdXG4gICAgXG4gICAgLy8gUmVtb3ZlIHRoZSByZWNvcmQgZnJvbSBzZWxlY3Rpb25cbiAgICBjb25zdCB1cGRhdGVkU2VsZWN0ZWREYXRhcyA9IHNlbGVjdGVkRGF0YXMuZmlsdGVyKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSAhPT0gZGF0YUlkKVxuICAgIGNvbnN0IHJlY29yZElkcyA9IHVwZGF0ZWRTZWxlY3RlZERhdGFzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgXG4gICAgLy8gVXBkYXRlIHNlbGVjdGlvbiBvbiB0aGUgb3JpZ2luIGxheWVyIGFuZCBwdWJsaXNoIG1lc3NhZ2UgdXNpbmcgdXRpbGl0eSBmdW5jdGlvblxuICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCB1cGRhdGVkU2VsZWN0ZWREYXRhcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLCB0cnVlKVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkLCByZXN1bHRDb3VudCwgb25OYXZCYWNrXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHQgaC0xMDAnIGNzcz17cmVzdWx0U3R5bGV9IHJvbGU9J2xpc3Rib3gnIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzJyl9PlxuICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17cmVzdWx0VXNlT3V0cHV0RGF0YVNvdXJjZX0gb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2V9IC8+XG4gICAgICBcbiAgICAgIHsvKiBFcnJvciBNZXNzYWdlICovfVxuICAgICAge3NlbGVjdGlvbkVycm9yICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BwYWRkaW5nOiAwIDE2cHg7IG1hcmdpbi10b3A6IDhweDtgfT5cbiAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgZXJyb3I9e3NlbGVjdGlvbkVycm9yfSBcbiAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0U2VsZWN0aW9uRXJyb3IobnVsbCl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0X19oZWFkZXIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBteC00Jz5cbiAgICAgICAgPEJ1dHRvbiBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnYmFjaycpfSByZWY9e2JhY2tCdG5SZWZ9IGNsYXNzTmFtZT0ncC0wIG1yLTInIHNpemU9J3NtJyB2YXJpYW50PSd0ZXh0JyBjb2xvcj0naW5oZXJpdCcgaWNvbiBvbkNsaWNrPXsoKSA9PiB7IG9uTmF2QmFjaygpIH19PlxuICAgICAgICAgIDxBcnJvd0xlZnRPdXRsaW5lZCBhdXRvRmxpcC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgICB7Y3VycmVudEl0ZW0ucmVzdWx0c0xhYmVsID8/IGdldEkxOG5NZXNzYWdlKCdyZXN1bHRzJyl9XG4gICAgICAgIHsoXG4gICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfSBwbGFjZW1lbnQ9J2JvdHRvbSc+XG4gICAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdtbC1hdXRvJyBpY29uIHNpemU9J3NtJyB2YXJpYW50PSd0ZXh0JyBjb2xvcj0naW5oZXJpdCcgb25DbGljaz17Y2xlYXJSZXN1bHRzfSBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0+XG4gICAgICAgICAgICAgICAgPEljb24gaWNvbj17aWNvbk1hcC50b29sRGVsZXRlfSAvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgIHsvKiBEYXRhIGFjdGlvbnMgZmlsdGVyZWQgdmlhIG1hbmlmZXN0Lmpzb24gZXhjbHVkZURhdGFBY3Rpb25zIC0gU2hvdyBvbiBNYXAsIFNlbGVjdCBMb2FkZWQsIGFuZCBDbGVhciBTZWxlY3Rpb24gYXJlIGV4Y2x1ZGVkLlxuICAgICAgICAgICAgICAgIEN1c3RvbSBcIkFkZCB0byBNYXBcIiBhY3Rpb24gaXMgcHJvdmlkZWQgdmlhIGV4dHJhQWN0aW9ucyBhbmQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLiAqL31cbiAgICAgICAgICAgIHtlbmFibGVEYXRhQWN0aW9uICYmIG91dHB1dERTICYmIChcbiAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3Ngd2lkdGg6IDFweDsgaGVpZ2h0OiAxNnB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1pbnB1dCk7YH0+PC9kaXY+XG4gICAgICAgICAgICAgICAgPERhdGFBY3Rpb25MaXN0XG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgICBkYXRhU2V0cz17YWN0aW9uRGF0YVNldHN9XG4gICAgICAgICAgICAgICAgICBsaXN0U3R5bGU9e0RhdGFBY3Rpb25MaXN0U3R5bGUuRHJvcGRvd259XG4gICAgICAgICAgICAgICAgICBidXR0b25TaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgIGJ1dHRvblR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICAgICAgZXh0cmFBY3Rpb25zPXtleHRyYUFjdGlvbnN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdC1jb250YWluZXIgbXQtMSc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHQtaW5mbyBtYi0yIHB4LTQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtYmV0d2Vlbicgcm9sZT0nYWxlcnQnIGFyaWEtbGl2ZT0ncG9saXRlJz5cbiAgICAgICAgICA8c3Bhbj57Z2V0VGlwTWVzc2FnZSgpfTwvc3Bhbj5cbiAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17ZXhwYW5kQWxsID8gZ2V0STE4bk1lc3NhZ2UoJ2NvbGxhcHNlQWxsJykgOiBnZXRJMThuTWVzc2FnZSgnZXhwYW5kQWxsJyl9IHBsYWNlbWVudD0ndG9wJz5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZUV4cGFuZEFsbH1cbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD17ZXhwYW5kQWxsID8gZ2V0STE4bk1lc3NhZ2UoJ2NvbGxhcHNlQWxsJykgOiBnZXRJMThuTWVzc2FnZSgnZXhwYW5kQWxsJyl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtleHBhbmRBbGwgPyA8Q29sbGFwc2VBbGxPdXRsaW5lZCAvPiA6IDxFeHBhbmRBbGxPdXRsaW5lZCAvPn1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtwYWdpbmdUeXBlID09PSBQYWdpbmdUeXBlLkxhenlMb2FkICYmIHJlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgPExhenlMaXN0XG4gICAgICAgICAgICBrZXk9e2BsYXp5LSR7ZXhwYW5kQWxsfWB9XG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW09e3F1ZXJ5SXRlbX1cbiAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREUyBhcyBhbnl9XG4gICAgICAgICAgICBxdWVyeVBhcmFtcz17cXVlcnlQYXJhbXN9XG4gICAgICAgICAgICByZXN1bHRDb3VudD17cmVzdWx0Q291bnR9XG4gICAgICAgICAgICByZWNvcmRzPXtxdWVyeURhdGE/LnJlY29yZHM/LmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCAocmVjb3Jkcz8uZmlsdGVyKHJlY29yZCA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCBbXSl9XG4gICAgICAgICAgICBkaXJlY3Rpb249e2RpcmVjdGlvbn1cbiAgICAgICAgICAgIG9uUmVuZGVyRG9uZT17aGFuZGxlUmVuZGVyRG9uZX1cbiAgICAgICAgICAgIG9uRXNjYXBlPXtoYW5kbGVFc2NhcGV9XG4gICAgICAgICAgICBvblNlbGVjdENoYW5nZT17dG9nZ2xlU2VsZWN0aW9ufVxuICAgICAgICAgICAgb25SZW1vdmU9e3JlbW92ZVJlY29yZH1cbiAgICAgICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQWxsfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIHtwYWdpbmdUeXBlID09PSBQYWdpbmdUeXBlLk11bHRpUGFnZSAmJiByZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgIDxQYWdpbmdMaXN0XG4gICAgICAgICAgICBrZXk9e2BwYWdpbmctJHtleHBhbmRBbGx9YH1cbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbT17cXVlcnlJdGVtfVxuICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTIGFzIGFueX1cbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zPXtxdWVyeVBhcmFtc31cbiAgICAgICAgICAgIHJlc3VsdENvdW50PXtyZXN1bHRDb3VudH1cbiAgICAgICAgICAgIG1heFBlclBhZ2U9e21heFBlclBhZ2V9XG4gICAgICAgICAgICByZWNvcmRzPXtxdWVyeURhdGE/LnJlY29yZHM/LmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCAocmVjb3Jkcz8uZmlsdGVyKHJlY29yZCA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCBbXSl9XG4gICAgICAgICAgICBkaXJlY3Rpb249e2RpcmVjdGlvbn1cbiAgICAgICAgICAgIG9uUmVuZGVyRG9uZT17aGFuZGxlUmVuZGVyRG9uZX1cbiAgICAgICAgICAgIG9uRXNjYXBlPXtoYW5kbGVFc2NhcGV9XG4gICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2RlZmF1bHRQYWdlU2l6ZX1cbiAgICAgICAgICAgIG9uU2VsZWN0Q2hhbmdlPXt0b2dnbGVTZWxlY3Rpb259XG4gICAgICAgICAgICBvblJlbW92ZT17cmVtb3ZlUmVjb3JkfVxuICAgICAgICAgICAgZXhwYW5kQnlEZWZhdWx0PXtleHBhbmRBbGx9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgeyBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IFF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PFF1ZXJ5VGFza0NvbnRleHRQcm9wcz4oe1xuICByZXNldFN5bWJvbDogbnVsbFxufSlcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tDb250ZXh0UHJvcHMge1xuICByZXNldFN5bWJvbD86IHN5bWJvbCAvLyB1c2VkIHRvIHRyaWdnZXIgcmVzZXQgb3BlcmF0aW9uXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIGNsYXNzTmFtZXMsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBJTVNxbEV4cHJlc3Npb24sXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgUmVhY3RSZWR1eCxcbiAgaG9va3MsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICB0eXBlIFNxbFF1ZXJ5UGFyYW1zLFxuICBJbW11dGFibGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBUb29sdGlwLCBDaGVja2JveCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBTcWxFeHByZXNzaW9uUnVudGltZSwgZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24gfSBmcm9tICdqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWUnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9JVEVNIH0gZnJvbSAnLi4vZGVmYXVsdC1xdWVyeS1pdGVtJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBRdWVyeVRhc2tTcGF0aWFsRm9ybSB9IGZyb20gJy4vcXVlcnktdGFzay1zcGF0aWFsLWZvcm0nXG5pbXBvcnQgeyB1c2VBdXRvSGVpZ2h0IH0gZnJvbSAnLi91c2VBdXRvSGVpZ2h0J1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcbmltcG9ydCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0l0ZW1Qcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgY29uZmlnSWQ6IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyRW5hYmxlZDogYm9vbGVhblxuICBkYXRhc291cmNlUmVhZHk6IGJvb2xlYW5cbiAgb3V0cHV0RFM/OiBEYXRhU291cmNlXG4gIG9uRm9ybVN1Ym1pdDogKHNxbEV4cHJPYmo6IElNU3FsRXhwcmVzc2lvbiwgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaiwgem9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB2b2lkXG4gIGRhdGFBY3Rpb25GaWx0ZXI/OiBTcWxRdWVyeVBhcmFtc1xuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG59XG5cbmNvbnN0IGdldEZvcm1TdHlsZSA9IChpc0F1dG9IZWlnaHQ6IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgbWluLWhlaWdodDogMDtcbiAgICAuZm9ybS10aXRsZSB7XG4gICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgZm9udC1zaXplOiAwLjgxMjVyZW07XG4gICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fY29udGVudCB7XG4gICAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAnYXV0byd9O1xuICAgICAgbWF4LWhlaWdodDogJHtpc0F1dG9IZWlnaHQgPyAnNjEuOHZoJyA6ICdub25lJ307XG4gICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIHBhZGRpbmctYm90dG9tOiAwO1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fYWN0aW9ucyB7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICBwYWRkaW5nLXRvcDogNHB4O1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrRm9ybSAocHJvcHM6IFF1ZXJ5VGFza0l0ZW1Qcm9wcykge1xuICBjb25zdCB7IHdpZGdldElkLCBjb25maWdJZCwgb3V0cHV0RFMsIHNwYXRpYWxGaWx0ZXJFbmFibGVkLCBkYXRhc291cmNlUmVhZHksIG9uRm9ybVN1Ym1pdCwgZGF0YUFjdGlvbkZpbHRlciwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbVNob3J0SWQgfSA9IHByb3BzXG4gIGNvbnN0IHByZURhdGFBY3Rpb25GaWx0ZXIgPSBob29rcy51c2VQcmV2aW91cyhkYXRhQWN0aW9uRmlsdGVyKVxuICBjb25zdCBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5xdWVyeUl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmNvbmZpZ0lkID09PSBjb25maWdJZClcbiAgfSlcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW3Jlc2V0U3ltYm9sLCBzZXRSZXNldFN5bWJvbF0gPSBSZWFjdC51c2VTdGF0ZTxzeW1ib2w+KG51bGwpXG4gIC8vIFJ1bnRpbWUgem9vbSBwcmVmZXJlbmNlIC0gaW5pdGlhbGl6ZWQgd2l0aCBjb25maWcgdmFsdWUsIGNhbiBiZSBvdmVycmlkZGVuIGJ5IHVzZXJcbiAgY29uc3QgW3J1bnRpbWVab29tVG9TZWxlY3RlZCwgc2V0UnVudGltZVpvb21Ub1NlbGVjdGVkXSA9IFJlYWN0LnVzZVN0YXRlPGJvb2xlYW4+KFxuICAgIHF1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQgPz8gdHJ1ZVxuICApXG5cbiAgLy8gU3luYyBydW50aW1lIHpvb20gcHJlZmVyZW5jZSB3aGVuIHF1ZXJ5IGl0ZW0gY2hhbmdlcyAoZS5nLiwgc3dpdGNoaW5nIGJldHdlZW4gcXVlcmllcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWQocXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCA/PyB0cnVlKVxuICB9LCBbcXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCwgcXVlcnlJdGVtPy5jb25maWdJZF0pXG5cbiAgLy8gY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3Qge1xuICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICB1c2VTcGF0aWFsRmlsdGVyLFxuICAgIHNwYXRpYWxGaWx0ZXJUeXBlcyxcbiAgICBzcWxFeHByT2JqLFxuICAgIHNwYXRpYWxNYXBXaWRnZXRJZHMsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzLFxuICAgIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzLFxuICAgIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsXG4gICAgc3BhdGlhbFJlbGF0aW9ucyxcbiAgICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdCxcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdCxcbiAgICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbCA9IGdldEkxOG5NZXNzYWdlKCdhdHRyaWJ1dGVGaWx0ZXInKSxcbiAgICBzcGF0aWFsRmlsdGVyTGFiZWwgPSBnZXRJMThuTWVzc2FnZSgnc3BhdGlhbEZpbHRlcicpLFxuICAgIGF0dHJpYnV0ZUZpbHRlckRlc2MsXG4gICAgc3BhdGlhbEZpbHRlckRlc2NcbiAgfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IFthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqXSA9IFJlYWN0LnVzZVN0YXRlPElNU3FsRXhwcmVzc2lvbj4oc3FsRXhwck9iailcbiAgY29uc3Qgc3BhdGlhbEZpbHRlck9ialJlZiA9IFJlYWN0LnVzZVJlZjxTcGF0aWFsRmlsdGVyT2JqPihudWxsKVxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25SZWYgPSBSZWFjdC51c2VSZWY8U3BhdGlhbFJlbGF0aW9uPihTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0KVxuICBjb25zdCBidWZmZXJSZWYgPSBSZWFjdC51c2VSZWY8eyBkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSB9PihudWxsKVxuICBjb25zdCBhcHBseUJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3QgaXNBdXRvSGVpZ2h0ID0gdXNlQXV0b0hlaWdodCgpXG4gIGNvbnN0IHNob3dDbGF1c2VOdW1iZXIgPSBSZWFjdC51c2VSZWYoZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iaikpXG4gIGNvbnN0IGluaXRpYWxWYWx1ZVNldFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKSAvLyBUcmFjayB3aGljaCBjb25maWdJZCB3ZSd2ZSBzZXQgdGhlIHZhbHVlIGZvclxuICBjb25zdCBsYXN0VmFsdWVTZXRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkgLy8gVHJhY2sgdGhlIGxhc3QgdmFsdWUgdGhhdCB3YXMgc2V0XG4gIGNvbnN0IGhhc2hUcmlnZ2VyZWRSZWYgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbj4oZmFsc2UpIC8vIFRyYWNrIGlmIHF1ZXJ5IHdhcyB0cmlnZ2VyZWQgdmlhIGhhc2ggcGFyYW1ldGVyXG5cbiAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUz8uZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBpbnB1dCB2YWx1ZSBmcm9tIFVSTCBoYXNoIHBhcmFtZXRlcnMgd2hlbjpcbiAgICogMS4gRGF0YXNvdXJjZSBpcyByZWFkeVxuICAgKiAyLiBXZSBoYXZlIGFuIGluaXRpYWxJbnB1dFZhbHVlIGZyb20gVVJMIGhhc2hcbiAgICogMy4gV2UgaGF2ZW4ndCBhbHJlYWR5IHNldCBpdCBmb3IgdGhpcyBjb25maWdJZCwgT1IgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAqIFxuICAgKiBVc2VzIGJvdGggUmVhY3Qgc3RhdGUgdXBkYXRlcyBhbmQgRE9NIG1hbmlwdWxhdGlvbiB0byBlbnN1cmUgdGhlIHZhbHVlXG4gICAqIGlzIHByb3Blcmx5IHNldCBpbiBTcWxFeHByZXNzaW9uUnVudGltZSdzIGludGVybmFsIHN0YXRlLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBSZXNldCBmbGFnIGlmIGNvbmZpZ0lkIGNoYW5nZWQgKHN3aXRjaGVkIHRvIGRpZmZlcmVudCBxdWVyeSlcbiAgICBpZiAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IG51bGwgJiYgaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkKSB7XG4gICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgaGFzaCB0cmlnZ2VyIGZsYWcgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB2YWx1ZSBoYXMgY2hhbmdlZCBmb3IgdGhlIHNhbWUgY29uZmlnSWRcbiAgICBjb25zdCB2YWx1ZUNoYW5nZWQgPSBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gaW5pdGlhbElucHV0VmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9PT0gY29uZmlnSWRcbiAgICBcbiAgICAvLyBTZXQgdGhlIHZhbHVlIGlmOlxuICAgIC8vIC0gV2UgaGF2ZW4ndCBzZXQgaXQgZm9yIHRoaXMgY29uZmlnSWQgeWV0LCBPUlxuICAgIC8vIC0gVGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGZvciB0aGUgc2FtZSBjb25maWdJZCAoaGFzaCBwYXJhbWV0ZXIgdXBkYXRlZClcbiAgICBjb25zdCBzaG91bGRTZXRWYWx1ZSA9IGRhdGFzb3VyY2VSZWFkeSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgdmFsdWVDaGFuZ2VkKVxuICAgIFxuICAgIGlmIChzaG91bGRTZXRWYWx1ZSkge1xuICAgICAgY29uc3QgZmlyc3RQYXJ0ID0gc3FsRXhwck9iai5wYXJ0c1swXVxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IHBhcnQgaXMgYSBTSU5HTEUgY2xhdXNlIChub3QgYSBTcWxDbGF1c2VTZXQpXG4gICAgICBpZiAoZmlyc3RQYXJ0ICYmICd0eXBlJyBpbiBmaXJzdFBhcnQgJiYgZmlyc3RQYXJ0LnR5cGUgPT09ICdTSU5HTEUnICYmICd2YWx1ZU9wdGlvbnMnIGluIGZpcnN0UGFydCkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGV4cHJlc3Npb24gb2JqZWN0IHdpdGggdGhlIGluaXRpYWwgdmFsdWVcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHNxbEV4cHJPYmouc2V0SW4oWydwYXJ0cycsICcwJywgJ3ZhbHVlT3B0aW9ucycsICd2YWx1ZSddLCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaih1cGRhdGVkKVxuICAgICAgICAvLyBVcGRhdGUgY2xhdXNlIG51bWJlciBmb3IgdGhlIHVwZGF0ZWQgZXhwcmVzc2lvblxuICAgICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbih1cGRhdGVkKVxuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IGNvbmZpZ0lkXG4gICAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgXG4gICAgICAgIC8vIEFsc28gc2V0IHRoZSB2YWx1ZSBkaXJlY3RseSBvbiB0aGUgaW5wdXQgZWxlbWVudCBhZnRlciBhIGRlbGF5IHRvIGVuc3VyZSBjb21wb25lbnQgaXMgcmVuZGVyZWRcbiAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBTcWxFeHByZXNzaW9uUnVudGltZSBtYXkgbm90IHN5bmMgZnJvbSB0aGUgZXhwcmVzc2lvbiBwcm9wIGFsb25lXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIEZpbmQgdGhlIGlucHV0IGVsZW1lbnQgd2l0aGluIFNxbEV4cHJlc3Npb25SdW50aW1lXG4gICAgICAgICAgY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS13aWRnZXQtaWQ9XCIke3dpZGdldElkfVwiXWApPy5jbG9zZXN0KCcucXVlcnktZm9ybScpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVlcnktZm9ybScpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGZvcm1FbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBMb29rIGZvciB0ZXh0IGlucHV0IGVsZW1lbnRzXG4gICAgICAgICAgICBjb25zdCB0ZXh0SW5wdXRzID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ZXh0SW5wdXRzLmZvckVhY2goKGlucHV0OiBIVE1MSW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWUgaWYgaW5wdXQgaXMgZW1wdHkgT1IgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIChoYXNoIHBhcmFtZXRlciB1cGRhdGVkKVxuICAgICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGUgPSAhaW5wdXQudmFsdWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUudHJpbSgpID09PSAnJyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSAhPT0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBGb2N1cyB0aGUgaW5wdXQgZmlyc3RcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZVxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRpc3BhdGNoIGlucHV0IGV2ZW50IHdpdGggcHJvcGVyIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dEV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnB1dEV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGlucHV0RXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkaXNwYXRjaCBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VFdmVudCA9IG5ldyBFdmVudCgnY2hhbmdlJywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNoYW5nZUV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFsc28gdHJ5IFJlYWN0J3Mgc3ludGhldGljIGV2ZW50IGFwcHJvYWNoIHVzaW5nIG5hdGl2ZSB2YWx1ZSBzZXR0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBuYXRpdmVJbnB1dFZhbHVlU2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUsICd2YWx1ZScpPy5zZXRcbiAgICAgICAgICAgICAgICBpZiAobmF0aXZlSW5wdXRWYWx1ZVNldHRlcikge1xuICAgICAgICAgICAgICAgICAgbmF0aXZlSW5wdXRWYWx1ZVNldHRlci5jYWxsKGlucHV0LCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWN0RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KHJlYWN0RXZlbnQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsdXIgdG8gdHJpZ2dlciBhbnkgdmFsaWRhdGlvbiBvciBzdGF0ZSB1cGRhdGVzXG4gICAgICAgICAgICAgICAgaW5wdXQuYmx1cigpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFmdGVyIHNldHRpbmcgdmFsdWVzIGFuZCBibHVycmluZywgdmVyaWZ5IGlucHV0IHZhbHVlIGlzIHNldCBiZWZvcmUgdHJpZ2dlcmluZyBBcHBseSBidXR0b25cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCAmJiBkYXRhc291cmNlUmVhZHkpIHtcbiAgICAgICAgICAgICAgICAvLyBWRVJJRklDQVRJT046IEVuc3VyZSBpbnB1dCB2YWx1ZSBpcyBhY3R1YWxseSBzZXQgYmVmb3JlIGV4ZWN1dGluZyBxdWVyeVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGdyb3VwZWQgcXVlcmllcyB3aGVyZSBkcm9wZG93bnMgbmVlZCB0byBiZSBzeW5jaHJvbml6ZWQgZmlyc3RcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldC1pZD1cIiR7d2lkZ2V0SWR9XCJdYCk/LmNsb3Nlc3QoJy5xdWVyeS1mb3JtJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWVyeS1mb3JtJylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZm9ybUVsZW1lbnQgJiYgaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRJbnB1dHMgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpXG4gICAgICAgICAgICAgICAgICBsZXQgaW5wdXRWYWx1ZVNldCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHRleHRJbnB1dHMuZm9yRWFjaCgoaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlID09PSBpbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWVTZXQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmICghaW5wdXRWYWx1ZVNldCkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdpbnB1dC12YWx1ZS1ub3Qtc2V0LXJldHJ5aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZFZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkLFxuICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3dpbGwtcmV0cnktYWZ0ZXItZGVsYXknLFxuICAgICAgICAgICAgICAgICAgICAgIG5vdGU6ICdJbnB1dCB2YWx1ZSBub3Qgc2V0LCByZXRyeWluZyB0byBlbnN1cmUgc3luY2hyb25pemF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAvLyBSZXRyeSBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IHN0YXRlIHRvIHN5bmNcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgY2FsbCB2ZXJpZnlBbmRBcHBseSBpZiBuZWVkZWQsIGJ1dCBsaW1pdCByZXRyaWVzXG4gICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIG5vdywganVzdCByZXRyeSBvbmNlIG1vcmVcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCAmJiBkYXRhc291cmNlUmVhZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBoYXNoVHJpZ2dlcmVkUmVmIHRvIGZvcmNlIHpvb20gZm9yIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGhhc2ggcGFyYW1ldGVyIGZyb20gVVJMIGJlZm9yZSBBcHBseSBpcyB0cmlnZ2VyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkhhc2hQYXJhbWV0ZXJVc2VkICYmIHF1ZXJ5SXRlbVNob3J0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZChxdWVyeUl0ZW1TaG9ydElkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdXRvLXRyaWdnZXIgQXBwbHkgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseUJ1dHRvblJlZi5jdXJyZW50LmNsaWNrKClcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC8vIEV4aXQgZWFybHksIHdpbGwgcmV0cnlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSW5wdXQgdmFsdWUgaXMgc2V0IGNvcnJlY3RseSwgcHJvY2VlZCB3aXRoIGV4ZWN1dGlvblxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAnaW5wdXQtdmFsdWUtdmVyaWZpZWQnLFxuICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRWYWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkLFxuICAgICAgICAgICAgICAgICAgbm90ZTogJ0lucHV0IHZhbHVlIHZlcmlmaWVkLCBwcm9jZWVkaW5nIHdpdGggcXVlcnkgZXhlY3V0aW9uJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0IGhhc2hUcmlnZ2VyZWRSZWYgdG8gZm9yY2Ugem9vbSBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllc1xuICAgICAgICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgaGFzaCBwYXJhbWV0ZXIgZnJvbSBVUkwgYmVmb3JlIEFwcGx5IGlzIHRyaWdnZXJlZCB0byBwcmV2ZW50IHJlLWV4ZWN1dGlvblxuICAgICAgICAgICAgICAgIGlmIChvbkhhc2hQYXJhbWV0ZXJVc2VkICYmIHF1ZXJ5SXRlbVNob3J0SWQpIHtcbiAgICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQocXVlcnlJdGVtU2hvcnRJZClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBdXRvLXRyaWdnZXIgQXBwbHkgYnV0dG9uIHRvIGV4ZWN1dGUgdGhlIHF1ZXJ5IHdpdGggdGhlIHBvcHVsYXRlZCB2YWx1ZVxuICAgICAgICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAyMDApIC8vIFNtYWxsIGRlbGF5IGFmdGVyIGJsdXIgdG8gZW5zdXJlIHN0YXRlIGlzIHN5bmNlZFxuICAgICAgICAgIH1cbiAgICAgICAgfSwgNTAwKSAvLyBMb25nZXIgZGVsYXkgdG8gZW5zdXJlIGNvbXBvbmVudCBpcyBmdWxseSByZW5kZXJlZFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFRoZSBzcWxFeHByT2JqLnBhcnRzIG1heSBjaGFuZ2UgYnV0IHRoZSBkaXNwbGF5U1FMIGlzIHRoZSBzYW1lXG4gICAgaWYgKCFzcWxFeHByT2JqKSB7XG4gICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSAwXG4gICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKG51bGwpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbEV4cHJPYmopXG4gICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB3ZSBoYXZlbid0IHNldCB0aGUgaW5pdGlhbCB2YWx1ZSBmb3IgdGhpcyBjb25maWdJZCB5ZXQsIG9yIGlmIHdlIGRvbid0IGhhdmUgYW4gaW5pdGlhbCB2YWx1ZVxuICAgICAgaWYgKGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBjb25maWdJZCB8fCAhaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihzcWxFeHByT2JqKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW3NxbEV4cHJPYmosIGluaXRpYWxJbnB1dFZhbHVlLCBkYXRhc291cmNlUmVhZHksIGNvbmZpZ0lkLCB3aWRnZXRJZCwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcXVlcnlJdGVtU2hvcnRJZF0pXG5cbiAgY29uc3QgYXBwbHlRdWVyeSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyBXaGVuIHRoZSAnYXBwbHknIGJ1dHRvbiBpcyBjbGlja2VkLCBpdCBzaG91bGQgY2xlYXIgdGhlIHNlbGVjdGlvbiBmcm9tIHRoZSBwcmV2aW91cyByZXN1bHQgbGlzdFxuICAgIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhvdXRwdXREUylcblxuICAgIGlmIChvdXRwdXREUykge1xuICAgICAgY29uc3Qgb3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIGlmIChvcmlnaW5Ecykge1xuICAgICAgICBjb25zdCBkYXRhVmlld0NvbmZpZyA9IG9yaWdpbkRzLmdldERhdGFWaWV3Q29uZmlnKClcbiAgICAgICAgY29uc3QgbWF4aW11bSA9IGRhdGFWaWV3Q29uZmlnPy5tYXhpbXVtXG4gICAgICAgIGlmIChtYXhpbXVtICE9IG51bGwgJiYgbWF4aW11bSA+IDApIHtcbiAgICAgICAgICBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZURhdGFTb3VyY2VCeURhdGFTb3VyY2VKc29uKFxuICAgICAgICAgICAgb3V0cHV0RFMsXG4gICAgICAgICAgICBvdXRwdXREUy5nZXREYXRhU291cmNlSnNvbigpLnNldEluKFsncXVlcnknLCAnbWF4aW11bSddLCBtYXhpbXVtKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvcmNlIHpvb20gZm9yIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXMsIG90aGVyd2lzZSB1c2UgcnVudGltZSBwcmVmZXJlbmNlXG4gICAgY29uc3Qgem9vbVRvVXNlID0gaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID8gdHJ1ZSA6IHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuXG4gICAgbGV0IHJlbCA9IHNwYXRpYWxSZWxhdGlvblJlZi5jdXJyZW50XG4gICAgaWYgKHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudD8uZ2VvbWV0cnkgJiYgcmVsID09IG51bGwpIHtcbiAgICAgIHJlbCA9IFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Py5nZW9tZXRyeSkpIHtcbiAgICAgIGlmIChzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIG9uRm9ybVN1Ym1pdChhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgZ2VvbWV0cnk6IHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudC5nZW9tZXRyeVswXSwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcbiAgICAgICAgICAnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvdW5pb25PcGVyYXRvcidcbiAgICAgICAgXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgICAgICBjb25zdCBvcGVyYXRvcjogKHR5cGVvZiBfX2VzcmkudW5pb25PcGVyYXRvcikgPSBtb2R1bGVzWzBdXG4gICAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBvcGVyYXRvci5leGVjdXRlTWFueShzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkpXG4gICAgICAgICAgb25Gb3JtU3VibWl0KGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIHsgLi4uc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50LCBnZW9tZXRyeSwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uRm9ybVN1Ym1pdChhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgfVxuICAgIFxuICAgIC8vIFJlc2V0IGhhc2hUcmlnZ2VyZWRSZWYgYWZ0ZXIgdXNlXG4gICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgfSwgW29uRm9ybVN1Ym1pdCwgb3V0cHV0RFMsIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIHJ1bnRpbWVab29tVG9TZWxlY3RlZF0pXG5cbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKChldmVudDogUmVhY3QuS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicgJiYgZGF0YXNvdXJjZVJlYWR5KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBcbiAgICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSBpbnB1dCBmaWVsZFxuICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC50YWdOYW1lID09PSAnSU5QVVQnICYmIGFjdGl2ZUVsZW1lbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIC8vIEZvcmNlIGJsdXIgdG8gdHJpZ2dlciBTcWxFeHByZXNzaW9uUnVudGltZSdzIGlucHV0IHByb2Nlc3NpbmdcbiAgICAgICAgYWN0aXZlRWxlbWVudC5ibHVyKClcbiAgICAgICAgXG4gICAgICAgIC8vIFdhaXQgZm9yIGJsdXIgcHJvY2Vzc2luZywgdGhlbiBjbGljayB0aGUgQXBwbHkgYnV0dG9uXG4gICAgICAgIC8vIFRoaXMgdXNlcyB0aGUgZXhhY3Qgc2FtZSBjb2RlIHBhdGggYXMgY2xpY2tpbmcgdGhlIGJ1dHRvbiBtYW51YWxseVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5UXVlcnkoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgMjAwKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm90IGluIGFuIGlucHV0IGZpZWxkLCBzYWZlIHRvIGFwcGx5IGltbWVkaWF0ZWx5XG4gICAgICAgIGlmIChhcHBseUJ1dHRvblJlZi5jdXJyZW50ICYmICFhcHBseUJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkKSB7XG4gICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXBwbHlRdWVyeSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtkYXRhc291cmNlUmVhZHksIGFwcGx5UXVlcnldKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFkYXRhQWN0aW9uRmlsdGVyKSByZXR1cm5cbiAgICBpZiAoZGF0YUFjdGlvbkZpbHRlci53aGVyZSAhPT0gcHJlRGF0YUFjdGlvbkZpbHRlcj8ud2hlcmUpIHtcbiAgICAgIGFwcGx5UXVlcnkoKVxuICAgIH1cbiAgfSwgW2RhdGFBY3Rpb25GaWx0ZXIsIHByZURhdGFBY3Rpb25GaWx0ZXI/LndoZXJlLCBhcHBseVF1ZXJ5XSlcblxuICBjb25zdCByZXNldFF1ZXJ5ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIDEuIHJlc2V0IGF0dHJpYnV0ZSBmaWx0ZXJcbiAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxFeHByT2JqKVxuICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsRXhwck9iailcbiAgICAvLyAyLiByZXNldCBzcGF0aWFsIGZpbHRlclxuICAgIHNldFJlc2V0U3ltYm9sKFN5bWJvbCgpKVxuICB9LCBbc3FsRXhwck9ial0pXG5cbiAgY29uc3QgaGFuZGxlU3FsRXhwck9iakNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChzcWxPYmo6IElNU3FsRXhwcmVzc2lvbikgPT4ge1xuICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbE9iailcbiAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHNxbE9iailcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlU3BhdGlhbEZpbHRlckNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChmaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmopID0+IHtcbiAgICBzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQgPSBmaWx0ZXJcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlUmVsYXRpb25DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHtcbiAgICBzcGF0aWFsUmVsYXRpb25SZWYuY3VycmVudCA9IHJlbFxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVCdWZmZXJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHtcbiAgICBidWZmZXJSZWYuY3VycmVudCA9IHsgZGlzdGFuY2UsIHVuaXQgfVxuICB9LCBbXSlcblxuICBjb25zdCBzaG93QXR0cmlidXRlRmlsdGVyID0gdXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHJPYmogIT0gbnVsbFxuICBjb25zdCBzaG93U3BhdGlhbEZpbHRlciA9IHNwYXRpYWxGaWx0ZXJFbmFibGVkICYmIHVzZVNwYXRpYWxGaWx0ZXIgJiYgKHNwYXRpYWxGaWx0ZXJUeXBlcy5sZW5ndGggPiAwIHx8IHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEgfHwgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDApXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgZm9ybSByZW5kZXJpbmdcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2Zvcm0tcmVuZGVyLWNoZWNrJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgZGF0YXNvdXJjZVJlYWR5LFxuICAgICAgdXNlQXR0cmlidXRlRmlsdGVyLFxuICAgICAgc3FsRXhwck9iajogc3FsRXhwck9iaiA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgc3FsRXhwck9ialBhcnRzOiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzaG93QXR0cmlidXRlRmlsdGVyLFxuICAgICAgb3JpZ2luRFM6IG9yaWdpbkRTID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUz8uaWQgfHwgJ25vbmUnLFxuICAgICAgc2hvd1NwYXRpYWxGaWx0ZXIsXG4gICAgICBpc0F1dG9IZWlnaHQsXG4gICAgICBvdXRwdXREUzogb3V0cHV0RFMgPyAnZXhpc3RzJyA6ICdudWxsJ1xuICAgIH0pXG4gIH0sIFtjb25maWdJZCwgZGF0YXNvdXJjZVJlYWR5LCB1c2VBdHRyaWJ1dGVGaWx0ZXIsIHNxbEV4cHJPYmosIHNob3dBdHRyaWJ1dGVGaWx0ZXIsIG9yaWdpbkRTLCBzaG93U3BhdGlhbEZpbHRlciwgaXNBdXRvSGVpZ2h0LCBvdXRwdXREU10pXG5cbiAgLy8gTG9nIHdoZW4gZm9ybSBjb250ZW50IHNob3VsZCByZW5kZXJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2hvd0F0dHJpYnV0ZUZpbHRlciAmJiBvcmlnaW5EUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2F0dHJpYnV0ZS1maWx0ZXItcmVhZHknLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHNxbEV4cHJPYmpQYXJ0czogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbCxcbiAgICAgICAgbm90ZTogJ0lucHV0IGZpZWxkIHNob3VsZCBiZSB2aXNpYmxlJ1xuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2F0dHJpYnV0ZS1maWx0ZXItbm90LXJlYWR5JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIHNob3dBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICAgIG9yaWdpbkRTOiBvcmlnaW5EUyA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgICB1c2VBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICAgIHNxbEV4cHJPYmo6IHNxbEV4cHJPYmogPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgICAgcmVhc29uOiAhc2hvd0F0dHJpYnV0ZUZpbHRlciA/ICdzaG93QXR0cmlidXRlRmlsdGVyIGlzIGZhbHNlJyA6ICdvcmlnaW5EUyBpcyBudWxsJ1xuICAgICAgfSlcbiAgICB9XG4gIH0sIFtzaG93QXR0cmlidXRlRmlsdGVyLCBvcmlnaW5EUywgY29uZmlnSWQsIHNxbEV4cHJPYmosIHVzZUF0dHJpYnV0ZUZpbHRlciwgYXR0cmlidXRlRmlsdGVyTGFiZWxdKVxuXG4gIC8vIENoZWNrIERPTSB2aXNpYmlsaXR5IGFmdGVyIHJlbmRlclxuICBjb25zdCBmb3JtQ29udGVudFJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZm9ybUNvbnRlbnRSZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZvcm1Db250ZW50UmVmLmN1cnJlbnQpXG4gICAgICBjb25zdCByZWN0ID0gZm9ybUNvbnRlbnRSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2Zvcm0tY29udGVudC1kb20tY2hlY2snLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgZXhpc3RzOiAhIWZvcm1Db250ZW50UmVmLmN1cnJlbnQsXG4gICAgICAgIGRpc3BsYXk6IGNvbXB1dGVkU3R5bGUuZGlzcGxheSxcbiAgICAgICAgdmlzaWJpbGl0eTogY29tcHV0ZWRTdHlsZS52aXNpYmlsaXR5LFxuICAgICAgICBvcGFjaXR5OiBjb21wdXRlZFN0eWxlLm9wYWNpdHksXG4gICAgICAgIGhlaWdodDogY29tcHV0ZWRTdHlsZS5oZWlnaHQsXG4gICAgICAgIG1heEhlaWdodDogY29tcHV0ZWRTdHlsZS5tYXhIZWlnaHQsXG4gICAgICAgIGZsZXg6IGNvbXB1dGVkU3R5bGUuZmxleCxcbiAgICAgICAgZmxleEJhc2lzOiBjb21wdXRlZFN0eWxlLmZsZXhCYXNpcyxcbiAgICAgICAgcmVjdEhlaWdodDogcmVjdC5oZWlnaHQsXG4gICAgICAgIHJlY3RXaWR0aDogcmVjdC53aWR0aCxcbiAgICAgICAgaXNWaXNpYmxlOiByZWN0LmhlaWdodCA+IDAgJiYgcmVjdC53aWR0aCA+IDAsXG4gICAgICAgIHBhcmVudEhlaWdodDogZm9ybUNvbnRlbnRSZWYuY3VycmVudC5wYXJlbnRFbGVtZW50Py5jbGllbnRIZWlnaHQgfHwgMFxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtjb25maWdJZCwgc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFNdKVxuXG4gIHJldHVybiAoXG4gICAgPFF1ZXJ5VGFza0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgcmVzZXRTeW1ib2wgfX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktZm9ybScgY3NzPXtnZXRGb3JtU3R5bGUoaXNBdXRvSGVpZ2h0KX0+XG4gICAgICAgIDxkaXYgcmVmPXtmb3JtQ29udGVudFJlZn0gY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19jb250ZW50JyBvbktleURvd249e2hhbmRsZUtleURvd259PlxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgIHJvbGU9J2dyb3VwJyBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdweC00JyBcbiAgICAgICAgICAgICAgY3NzPXtjc3NgcGFkZGluZy10b3A6IDRweDtgfVxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPXthdHRyaWJ1dGVGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2Zvcm0tdGl0bGUgbXktMiBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJywgeyAnZC1ub25lJzogIWF0dHJpYnV0ZUZpbHRlckxhYmVsICYmICFhdHRyaWJ1dGVGaWx0ZXJEZXNjIH0pfT5cbiAgICAgICAgICAgICAgICB7YXR0cmlidXRlRmlsdGVyTGFiZWwgJiYgPGRpdiBjbGFzc05hbWU9J21yLTIgdGl0bGUyJz57YXR0cmlidXRlRmlsdGVyTGFiZWx9PC9kaXY+fVxuICAgICAgICAgICAgICAgIHthdHRyaWJ1dGVGaWx0ZXJEZXNjICYmIChcbiAgICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gdGl0bGU9e2F0dHJpYnV0ZUZpbHRlckRlc2N9PlxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyBpY29uIHR5cGU9J3RlcnRpYXJ5Jz48SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPjwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7b3JpZ2luRFMgJiYgKFxuICAgICAgICAgICAgICAgIDxTcWxFeHByZXNzaW9uUnVudGltZVxuICAgICAgICAgICAgICAgICAga2V5PXtgJHtjb25maWdJZH0tJHtpbml0aWFsSW5wdXRWYWx1ZSB8fCAnZGVmYXVsdCd9YH1cbiAgICAgICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e29yaWdpbkRTfVxuICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbj17YXR0cmlidXRlRmlsdGVyU3FsRXhwck9ian1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTcWxFeHByT2JqQ2hhbmdlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIHNob3dTcGF0aWFsRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxociBjbGFzc05hbWU9J20tNCcgY3NzPXtjc3NgYm9yZGVyOiBub25lOyBoZWlnaHQ6IDFweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtgfS8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7c2hvd1NwYXRpYWxGaWx0ZXIgJiYgKFxuICAgICAgICAgICAgPFF1ZXJ5VGFza1NwYXRpYWxGb3JtXG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgbGFiZWw9e3NwYXRpYWxGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgICAgZGVzYz17c3BhdGlhbEZpbHRlckRlc2N9XG4gICAgICAgICAgICAgIGZpbHRlclR5cGVzPXtzcGF0aWFsRmlsdGVyVHlwZXN9XG4gICAgICAgICAgICAgIG1hcFdpZGdldElkcz17c3BhdGlhbE1hcFdpZGdldElkc31cbiAgICAgICAgICAgICAgY3JlYXRlVG9vbFR5cGVzPXtzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXN9XG4gICAgICAgICAgICAgIG9uRmlsdGVyQ2hhbmdlPXtoYW5kbGVTcGF0aWFsRmlsdGVyQ2hhbmdlfVxuICAgICAgICAgICAgICBvblJlbGF0aW9uQ2hhbmdlPXtoYW5kbGVSZWxhdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e2hhbmRsZUJ1ZmZlckNoYW5nZX1cbiAgICAgICAgICAgICAgc3BhdGlhbFJlbGF0aW9ucz17c3BhdGlhbFJlbGF0aW9uc31cbiAgICAgICAgICAgICAgZHNFbmFibGVCdWZmZXI9e3NwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcn1cbiAgICAgICAgICAgICAgZHNCdWZmZXJEaXN0YW5jZT17c3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2V9XG4gICAgICAgICAgICAgIGRzQnVmZmVyVW5pdD17c3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgZHJhd0VuYWJsZUJ1ZmZlcj17c3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyRGlzdGFuY2U9e3NwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyVW5pdD17c3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3NwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfVxuICAgICAgICAgICAgICB1c2VSdW50aW1lRGF0YT17c3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19hY3Rpb25zIHB4LTQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICBjaGVja2VkPXtydW50aW1lWm9vbVRvU2VsZWN0ZWR9XG4gICAgICAgICAgICBvbkNoYW5nZT17KF8sIGNoZWNrZWQpID0+IHNldFJ1bnRpbWVab29tVG9TZWxlY3RlZChjaGVja2VkKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbXItMidcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbXItYXV0bycgY3NzPXtjc3NgZm9udC1zaXplOiAwLjg3NXJlbTsgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO2B9PlxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCd6b29tVG9TZWxlY3RlZCcpfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8QnV0dG9uIHJlZj17YXBwbHlCdXR0b25SZWZ9IGNvbG9yPSdwcmltYXJ5JyBjbGFzc05hbWU9J21sLWF1dG8nIGRpc2FibGVkPXshZGF0YXNvdXJjZVJlYWR5fSBvbkNsaWNrPXthcHBseVF1ZXJ5fT5cbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgnYXBwbHknKX1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICB7KHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA+IDAgfHwgc2hvd1NwYXRpYWxGaWx0ZXIpICYmIChcbiAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdtbC0yJyBvbkNsaWNrPXtyZXNldFF1ZXJ5fT57Z2V0STE4bk1lc3NhZ2UoJ3Jlc2V0Jyl9PC9CdXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L1F1ZXJ5VGFza0NvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIHR5cGUgSWNvblJlc3VsdCwgdHlwZSBJbW11dGFibGVPYmplY3QgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBJY29uIH0gZnJvbSAnamltdS11aSdcblxuaW50ZXJmYWNlIENvbnRlbnRQcm9wcyB7XG4gIGljb24/OiBJY29uUmVzdWx0IHwgSW1tdXRhYmxlT2JqZWN0PEljb25SZXN1bHQ+XG4gIG5hbWU6IHN0cmluZ1xufVxuXG5jb25zdCB0ZXh0U3R5bGUgPSBjc3NgXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGZvbnQtc2l6ZTogMC44NzVyZW07XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tMYWJlbCAocHJvcHM6IENvbnRlbnRQcm9wcykge1xuICBjb25zdCB7IGljb24sIG5hbWUgfSA9IHByb3BzXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciB0ZXh0LXRydW5jYXRlJyBjc3M9e3RleHRTdHlsZX0+XG4gICAgICB7aWNvbiAmJiA8SWNvbiBjbGFzc05hbWU9J3F1ZXJ5LXRhc2staWNvbiBtci0yJyBpY29uPXtpY29uLnN2Z30gLz59XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZScgdGl0bGU9e25hbWV9PlxuICAgICAgICB7bmFtZX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSW1tdXRhYmxlQXJyYXksIGNsYXNzTmFtZXMsIGxvZGFzaCwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFNpemUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlUYXNrIH0gZnJvbSAnLi9xdWVyeS10YXNrJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGlzdCB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0J1xuaW1wb3J0IHsgVGFza0xpc3RQb3BwZXJXcmFwcGVyIH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QtcG9wcGVyLXdyYXBwZXInXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcblxuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB3aWRnZXRMYWJlbDogc3RyaW5nXG4gIHdyYXA6IGJvb2xlYW5cbiAgbWluU2l6ZTogU2l6ZVxuICBkZWZhdWx0U2l6ZTogU2l6ZVxuICBxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9XG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG59XG5cbmNvbnN0IFNQQUNFID0gOFxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgPiBkaXYge1xuICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICB9XG5gXG5cbi8vIHNob3cgdGFzayBsYWJlbCBhbmQgYW4gYXJyb3cgdG8gdGhlIHRhc2sgY29udGVudFxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tMaXN0SW5saW5lIChwcm9wczogUXVlcnlUYXNrTGlzdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtcywgd2lkZ2V0SWQsIG1pblNpemUsIGRlZmF1bHRTaXplLCBkZWZhdWx0UGFnZVNpemUsIHdpZGdldExhYmVsLCB3cmFwID0gZmFsc2UgfSA9IHByb3BzXG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBjb250YWluZXJXaWR0aFJlZiA9IFJlYWN0LnVzZVJlZjxudW1iZXI+KDApXG4gIGNvbnN0IGNvbnRlbnRXaWR0aFJlZiA9IFJlYWN0LnVzZVJlZjx7IFtrZXk6IHN0cmluZ106IG51bWJlciB9Pih7fSlcbiAgY29uc3QgW251bU9mRXhwYW5kZWQsIHNldE51bU9mRXhwYW5kZWRdID0gUmVhY3QudXNlU3RhdGUocXVlcnlJdGVtcy5sZW5ndGgpXG4gIGNvbnN0IFtvcGVuZWRQb3BwZXIsIHNldE9wZW5lZFBvcHBlcl0gPSBSZWFjdC51c2VTdGF0ZSgtMSlcbiAgY29uc3QgcmVzaXplT2JzZXJ2ZXJSZWYgPSBSZWFjdC51c2VSZWY8UmVzaXplT2JzZXJ2ZXI+KG51bGwpXG5cbiAgY29uc3QgYWRqdXN0Q29udGVudCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBsZXQgdG90YWwgPSAwXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1PZkV4cGFuZGVkOyBpKyspIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBxdWVyeUl0ZW1zW2ldXG4gICAgICBjb25zdCBpdGVtV2lkdGggPSBjb250ZW50V2lkdGhSZWYuY3VycmVudFtpdGVtLmNvbmZpZ0lkXVxuICAgICAgaWYgKGl0ZW1XaWR0aCA+IDApIHtcbiAgICAgICAgdG90YWwgKz0gaXRlbVdpZHRoICsgU1BBQ0VcbiAgICAgICAgaWYgKHRvdGFsID49IGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgJiYgbnVtT2ZFeHBhbmRlZCAhPT0gaSkge1xuICAgICAgICAgIHNldE51bU9mRXhwYW5kZWQoaSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC8vIGNvbnRlbnQgd2lkdGggbm90IHJlYWR5XG4gICAgICB9XG4gICAgfVxuICAgIHNldE51bU9mRXhwYW5kZWQocXVlcnlJdGVtcy5sZW5ndGgpXG4gIH0sIFtudW1PZkV4cGFuZGVkLCBxdWVyeUl0ZW1zXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZXNpemVPYnNlcnZlclJlZi5jdXJyZW50KSB7XG4gICAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgIH1cbiAgICAvLyBiaW5kIHdpdGggdGhlIG5ldyBldmVudCBoYW5kbGVyXG4gICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudCA9IG5ldyBSZXNpemVPYnNlcnZlcihsb2Rhc2gudGhyb3R0bGUoKGVudHJpZXMpID0+IHtcbiAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKVxuICAgICAgaWYgKGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgIT09IHdpZHRoKSB7XG4gICAgICAgIGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgPSB3aWR0aFxuICAgICAgICBhZGp1c3RDb250ZW50KClcbiAgICAgIH1cbiAgICB9LCAyMDApKVxuICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQub2JzZXJ2ZShjb250YWluZXJSZWYuY3VycmVudClcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgIH1cbiAgfSwgW2FkanVzdENvbnRlbnRdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgPSBjb250YWluZXJSZWYuY3VycmVudD8uY2xpZW50V2lkdGhcbiAgICBhZGp1c3RDb250ZW50KClcbiAgfSlcblxuICBjb25zdCBoYW5kbGVJdGVtV2lkdGhDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5kZXg6IG51bWJlciwgd2lkdGg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5SXRlbSA9IHF1ZXJ5SXRlbXNbaW5kZXhdXG4gICAgaWYgKGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W3F1ZXJ5SXRlbS5jb25maWdJZF0gIT09IHdpZHRoKSB7XG4gICAgICBjb250ZW50V2lkdGhSZWYuY3VycmVudFtxdWVyeUl0ZW0uY29uZmlnSWRdID0gd2lkdGhcbiAgICAgIGFkanVzdENvbnRlbnQoKVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbXMsIGFkanVzdENvbnRlbnRdKVxuXG4gIGNvbnN0IGhhbmRsZVBvcHBlck9wZW5lZENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyLCBpc09wZW46IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBzZXRPcGVuZWRQb3BwZXIoaW5kZXgpXG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gb3BlbmVkUG9wcGVyKSB7XG4gICAgICAvLyBjdXJyZW50IHBvcHBlciBpcyBjbG9zZWRcbiAgICAgIHNldE9wZW5lZFBvcHBlcigtMSlcbiAgICB9XG4gIH0sIFtvcGVuZWRQb3BwZXJdKVxuXG4gIGNvbnN0IFtleHBhbmRlZEFycmF5LCBub25FeHBhbmRlZEFycmF5XSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGV4cGFuZGVkQXJyYXkgPSBbXVxuICAgIGNvbnN0IG5vbkV4cGFuZGVkQXJyYXkgPSBbXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVlcnlJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgPCBudW1PZkV4cGFuZGVkKSB7XG4gICAgICAgIGV4cGFuZGVkQXJyYXkucHVzaChxdWVyeUl0ZW1zW2ldKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9uRXhwYW5kZWRBcnJheS5wdXNoKHF1ZXJ5SXRlbXNbaV0pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbZXhwYW5kZWRBcnJheSwgbm9uRXhwYW5kZWRBcnJheV1cbiAgfSwgW3F1ZXJ5SXRlbXMsIG51bU9mRXhwYW5kZWRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiByZWY9e2NvbnRhaW5lclJlZn0gY3NzPXtzdHlsZX0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdydW50aW1lLXF1ZXJ5X19xdWVyeS1saXN0IGgtMTAwIGQtZmxleCcsIHsgJ2ZsZXgtd3JhcCc6IHdyYXAsICdhbGlnbi1jb250ZW50LXN0YXJ0Jzogd3JhcCB9KX0+XG4gICAgICB7ZXhwYW5kZWRBcnJheS5tYXAoKHF1ZXJ5SXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgICAgICAgcmV0dXJuIDxUYXNrTGlzdFBvcHBlcldyYXBwZXJcbiAgICAgICAgICBpZD17aW5kZXh9XG4gICAgICAgICAga2V5PXtjdXJyZW50SXRlbS5jb25maWdJZH1cbiAgICAgICAgICBpY29uPXtjdXJyZW50SXRlbS5pY29ufVxuICAgICAgICAgIGJ1dHRvblR5cGU9J2RlZmF1bHQnXG4gICAgICAgICAgbGFiZWw9e2N1cnJlbnRJdGVtLmRpc3BsYXlMYWJlbCA/IGN1cnJlbnRJdGVtLm5hbWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgcG9wcGVyVGl0bGU9e2N1cnJlbnRJdGVtLm5hbWV9XG4gICAgICAgICAgb25XaWR0aENoYW5nZT17aGFuZGxlSXRlbVdpZHRoQ2hhbmdlfVxuICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgIG9uT3BlbmVkQ2hhbmdlPXtoYW5kbGVQb3BwZXJPcGVuZWRDaGFuZ2V9XG4gICAgICAgICAgZm9yY2VDbG9zZT17b3BlbmVkUG9wcGVyID49IDAgJiYgb3BlbmVkUG9wcGVyICE9PSBpbmRleH1cbiAgICAgICAgPlxuICAgICAgICAgIDxRdWVyeVRhc2tcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgIHRvdGFsPXsxfVxuICAgICAgICAgICAgaXNJblBvcHBlclxuICAgICAgICAgICAgcXVlcnlJdGVtPXtjdXJyZW50SXRlbX1cbiAgICAgICAgICAgIHdyYXBwZWRJblBvcHBlcj17dHJ1ZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0ncGItNCdcbiAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfVxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU9e2N1cnJlbnRJdGVtLnNob3J0SWQgPT09IHByb3BzLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID8gcHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWUudmFsdWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtwcm9wcy5vbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZD17Y3VycmVudEl0ZW0uc2hvcnRJZH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1Rhc2tMaXN0UG9wcGVyV3JhcHBlcj5cbiAgICAgIH0pfVxuXG4gICAgICB7bm9uRXhwYW5kZWRBcnJheS5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgIGlkPXtleHBhbmRlZEFycmF5Lmxlbmd0aCArIDF9XG4gICAgICAgICAgaWNvbj17aWNvbk1hcC5pY29uTW9yZX1cbiAgICAgICAgICBtaW5TaXplPXttaW5TaXplfVxuICAgICAgICAgIGJ1dHRvblR5cGU9J2RlZmF1bHQnXG4gICAgICAgICAgcG9wcGVyVGl0bGU9e3dpZGdldExhYmVsfVxuICAgICAgICAgIGRlZmF1bHRTaXplPXtkZWZhdWx0U2l6ZX1cbiAgICAgICAgICBvbk9wZW5lZENoYW5nZT17aGFuZGxlUG9wcGVyT3BlbmVkQ2hhbmdlfVxuICAgICAgICAgIGZvcmNlQ2xvc2U9e29wZW5lZFBvcHBlciA+PSAwICYmIG9wZW5lZFBvcHBlciAhPT0gZXhwYW5kZWRBcnJheS5sZW5ndGggKyAxfVxuICAgICAgICA+XG4gICAgICAgICAgPFF1ZXJ5VGFza0xpc3Qgd2lkZ2V0SWQ9e3dpZGdldElkfSBpc0luUG9wcGVyIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfSBxdWVyeUl0ZW1zPXtub25FeHBhbmRlZEFycmF5IGFzIGFueX0gY2xhc3NOYW1lPSdwYi00JyBpbml0aWFsUXVlcnlWYWx1ZT17cHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWV9IG9uSGFzaFBhcmFtZXRlclVzZWQ9e3Byb3BzLm9uSGFzaFBhcmFtZXRlclVzZWR9IC8+XG4gICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSWNvblJlc3VsdCwgdHlwZSBJbW11dGFibGVPYmplY3QsIGxvZGFzaCwgY2xhc3NOYW1lcywgaG9va3MsIGlzS2V5Ym9hcmRNb2RlLCBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgSWNvbiwgTW9iaWxlUGFuZWwsIHR5cGUgU2l6ZSwgdHlwZSBCdXR0b25UeXBlLCBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTLCBGbG9hdGluZ1BhbmVsLCB0eXBlIFNoaWZ0T3B0aW9ucyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBXSURHRVRfVkVSU0lPTiB9IGZyb20gJy4uL3ZlcnNpb24nXG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFza0xpc3RQb3BwZXJXcmFwcGVyUHJvcHMge1xuICBpZDogbnVtYmVyXG4gIGljb24/OiBzdHJpbmcgfCBJbW11dGFibGVPYmplY3Q8SWNvblJlc3VsdD5cbiAgbGFiZWw/OiBzdHJpbmdcbiAgZm9yY2VDbG9zZT86IGJvb2xlYW5cbiAgcG9wcGVyVGl0bGU/OiBzdHJpbmdcbiAgYnV0dG9uVHlwZT86IEJ1dHRvblR5cGVcbiAgb25XaWR0aENoYW5nZT86IChpZDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uT3BlbmVkQ2hhbmdlPzogKGlkOiBudW1iZXIsIGlzT3BlbjogYm9vbGVhbikgPT4gdm9pZFxuICBtaW5TaXplOiBTaXplXG4gIGRlZmF1bHRTaXplOiBTaXplXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdEVsZW1lbnQ8YW55PlxufVxuXG5jb25zdCBzaGlmdE9wdGlvbnM6IFNoaWZ0T3B0aW9ucyA9IHsgcGFkZGluZzogMSB9XG5cbmV4cG9ydCBmdW5jdGlvbiBUYXNrTGlzdFBvcHBlcldyYXBwZXIgKHByb3BzOiBUYXNrTGlzdFBvcHBlcldyYXBwZXJQcm9wcykge1xuICBjb25zdCB7IGlkLCBpY29uLCBsYWJlbCwgZm9yY2VDbG9zZSwgb25PcGVuZWRDaGFuZ2UsIHBvcHBlclRpdGxlLCBtaW5TaXplLCBkZWZhdWx0U2l6ZSwgb25XaWR0aENoYW5nZSwgYnV0dG9uVHlwZSA9ICd0ZXJ0aWFyeScsIGNoaWxkcmVuIH0gPSBwcm9wc1xuICBjb25zdCBpY29uUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IHdpZHRoUmVmID0gUmVhY3QudXNlUmVmKDApXG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW3BvcHBlclZlcnNpb24sIHNldFBvcHBlclZlcnNpb25dID0gUmVhY3QudXNlU3RhdGUoMClcbiAgY29uc3QgaXNNb2JpbGUgPSBob29rcy51c2VDaGVja1NtYWxsQnJvd3NlclNpemVNb2RlKClcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChmb3JjZUNsb3NlKSB7XG4gICAgICBzZXRJc09wZW4oZmFsc2UpXG4gICAgfVxuICB9LCBbZm9yY2VDbG9zZV0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBvbldpZHRoQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB3aWR0aFJlZi5jdXJyZW50ID0gTWF0aC5yb3VuZChpY29uUmVmLmN1cnJlbnQuY2xpZW50V2lkdGgpXG4gICAgICBvbldpZHRoQ2hhbmdlKGlkLCB3aWR0aFJlZi5jdXJyZW50KVxuICAgICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIobG9kYXNoLnRocm90dGxlKChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKVxuICAgICAgICBpZiAod2lkdGhSZWYuY3VycmVudCAhPT0gd2lkdGgpIHtcbiAgICAgICAgICB3aWR0aFJlZi5jdXJyZW50ID0gd2lkdGhcbiAgICAgICAgICBvbldpZHRoQ2hhbmdlKGlkLCB3aWR0aClcbiAgICAgICAgfVxuICAgICAgfSwgMjAwKSlcbiAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUoaWNvblJlZi5jdXJyZW50KVxuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KClcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgdG9nZ2xlUG9wcGVyID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygb25PcGVuZWRDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9uT3BlbmVkQ2hhbmdlKGlkLCAhaXNPcGVuKVxuICAgIH1cbiAgICBzZXRJc09wZW4oIWlzT3BlbilcbiAgICBzZXRQb3BwZXJWZXJzaW9uKHBvcHBlclZlcnNpb24gKyAxKVxuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoaXNLZXlib2FyZE1vZGUoKSkge1xuICAgICAgICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGljb25SZWYuY3VycmVudClcbiAgICAgICAgfVxuICAgICAgfSwgMjAwKVxuICAgIH1cbiAgfSwgW2lkLCBpc09wZW4sIHBvcHBlclZlcnNpb24sIG9uT3BlbmVkQ2hhbmdlXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdydW50aW1lLXF1ZXJ5X193aWRnZXQtcG9wcGVyJz5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgdGl0bGU9e2xhYmVsfVxuICAgICAgICBhcmlhLWxhYmVsPXtsYWJlbH1cbiAgICAgICAgaWNvbiBzaXplPSdzbSdcbiAgICAgICAgdmFyaWFudD17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/ICd0ZXh0JyA6IHVuZGVmaW5lZH1cbiAgICAgICAgY29sb3I9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyAnaW5oZXJpdCcgOiB1bmRlZmluZWR9XG4gICAgICAgIHR5cGU9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyB1bmRlZmluZWQgOiBidXR0b25UeXBlfVxuICAgICAgICByZWY9e2ljb25SZWZ9XG4gICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVBvcHBlcn1cbiAgICAgID5cbiAgICAgICAge2ljb24gJiYgPEljb25cbiAgICAgICAgICBzaXplPXsxNn1cbiAgICAgICAgICB7Li4uKHR5cGVvZiBpY29uID09PSAnc3RyaW5nJyA/IHsgaWNvbiB9IDogeyBpY29uOiBpY29uLnN2ZywgY29sb3I6IGJ1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyB1bmRlZmluZWQgOiBpY29uLnByb3BlcnRpZXMuY29sb3IgfSl9XG4gICAgICAgIC8+fVxuICAgICAgICB7bGFiZWwgJiYgPGRpdlxuICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gICAgICAgICAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDI7XG4gICAgICAgICAgICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsO1xuICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjI7XG4gICAgICAgICAgYH1cbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoeyAnbWwtMic6IGljb24gIT0gbnVsbCB9KX0+e2xhYmVsfTwvZGl2Pn1cbiAgICAgIDwvQnV0dG9uPlxuICAgICAge2lzTW9iaWxlXG4gICAgICAgID8gPE1vYmlsZVBhbmVsIG9wZW49e2lzT3Blbn0gdGl0bGU9e3BvcHBlclRpdGxlfSBvbkNsb3NlPXt0b2dnbGVQb3BwZXJ9PlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMXJlbTsgLyogU2NvcGVkIHBhZGRpbmcgdG8gc3BhY2UgY29udGVudCBmcm9tIGZvb3RlciAqL1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDEycHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICB7LyogQ29kZS9PcGVuIFNvdXJjZSBTeW1ib2wgKi99XG4gICAgICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGUub3JnXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuN3JlbTtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L01vYmlsZVBhbmVsPlxuICAgICAgICA6IDxGbG9hdGluZ1BhbmVsXG4gICAgICAgICAgICBjbGFzc05hbWU9J3VpLXVuaXQtcG9wcGVyIHVpLXVuaXQtcG9wcGVyX2stYXJyYW5nZW1lbnQtaWNvbiBmbGV4LWdyb3ctMSdcbiAgICAgICAgICAgIGhlYWRlckNsYXNzTmFtZT17Rk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU31cbiAgICAgICAgICAgIG9wZW49e2lzT3Blbn1cbiAgICAgICAgICAgIG9uSGVhZGVyQ2xvc2U9e3RvZ2dsZVBvcHBlcn1cbiAgICAgICAgICAgIHRvZ2dsZT17dG9nZ2xlUG9wcGVyfVxuICAgICAgICAgICAgaGVhZGVyVGl0bGU9e3BvcHBlclRpdGxlfVxuICAgICAgICAgICAgbWluU2l6ZT17bWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtkZWZhdWx0U2l6ZX1cbiAgICAgICAgICAgIGRyYWdCb3VuZHM9J2JvZHknXG4gICAgICAgICAgICB2ZXJzaW9uPXtwb3BwZXJWZXJzaW9ufVxuICAgICAgICAgICAgcmVmZXJlbmNlPXtpY29uUmVmfVxuICAgICAgICAgICAgcGxhY2VtZW50PSdib3R0b20tc3RhcnQnXG4gICAgICAgICAgICBzaGlmdE9wdGlvbnM9e3NoaWZ0T3B0aW9uc31cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxcmVtOyAvKiBTY29wZWQgcGFkZGluZyB0byBzcGFjZSBjb250ZW50IGZyb20gZm9vdGVyICovXG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsvKiBTdGF0aW9uYXJ5IGZvb3RlciAqL31cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuMDI1ZW07XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgICAgIDxzdmcgXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTYgMTggMjIgMTIgMTYgNlwiLz5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIFF1ZXJ5U2ltcGxlIGJ5IE1hcFNpbXBsZS5vcmdcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvRmxvYXRpbmdQYW5lbD5cbiAgICAgIH1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSW1tdXRhYmxlQXJyYXksIEltbXV0YWJsZSwgdHlwZSBJbW11dGFibGVPYmplY3QsIGhvb2tzLCB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBTZWxlY3QgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlLCBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlUYXNrIH0gZnJvbSAnLi9xdWVyeS10YXNrJ1xuaW1wb3J0IHsgRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTUyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBpc0luUG9wcGVyPzogYm9vbGVhblxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIGluaXRpYWxRdWVyeVZhbHVlPzogeyBzaG9ydElkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfVxuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGVcbiAgb25SZXN1bHRzTW9kZUNoYW5nZT86IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB2b2lkXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxufVxuXG5pbnRlcmZhY2UgR3JvdXBlZFF1ZXJpZXMge1xuICBncm91cHM6IHsgW2dyb3VwSWQ6IHN0cmluZ106IHsgaXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+LCBkaXNwbGF5TmFtZTogc3RyaW5nLCBpY29uPzogYW55IH0gfVxuICB1bmdyb3VwZWQ6IEFycmF5PHsgaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LCBpbmRleDogbnVtYmVyIH0+XG4gIGdyb3VwT3JkZXI6IHN0cmluZ1tdXG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBncm91cCBxdWVyaWVzIGJ5IGdyb3VwSWRcbmNvbnN0IGdyb3VwUXVlcmllcyA9IChxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPik6IEdyb3VwZWRRdWVyaWVzID0+IHtcbiAgY29uc3QgZ3JvdXBzOiB7IFtncm91cElkOiBzdHJpbmddOiB7IGl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPiwgZGlzcGxheU5hbWU6IHN0cmluZywgaWNvbj86IGFueSB9IH0gPSB7fVxuICBjb25zdCB1bmdyb3VwZWQ6IEFycmF5PHsgaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LCBpbmRleDogbnVtYmVyIH0+ID0gW11cbiAgY29uc3QgZ3JvdXBPcmRlcjogc3RyaW5nW10gPSBbXVxuICBjb25zdCBncm91cEluZGV4TWFwOiB7IFtncm91cElkOiBzdHJpbmddOiBudW1iZXIgfSA9IHt9XG4gIFxuICAvLyBGaXJzdCBwYXNzOiBjb2xsZWN0IGl0ZW1zIGluIHJlZ3VsYXIgYXJyYXlzXG4gIGNvbnN0IGdyb3VwSXRlbXNNYXA6IHsgW2dyb3VwSWQ6IHN0cmluZ106IFF1ZXJ5SXRlbVR5cGVbXSB9ID0ge31cblxuICBxdWVyeUl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgaWYgKGl0ZW0uZ3JvdXBJZCkge1xuICAgICAgaWYgKCFncm91cEl0ZW1zTWFwW2l0ZW0uZ3JvdXBJZF0pIHtcbiAgICAgICAgZ3JvdXBJdGVtc01hcFtpdGVtLmdyb3VwSWRdID0gW11cbiAgICAgICAgZ3JvdXBzW2l0ZW0uZ3JvdXBJZF0gPSB7XG4gICAgICAgICAgaXRlbXM6IEltbXV0YWJsZShbXSksXG4gICAgICAgICAgZGlzcGxheU5hbWU6IGl0ZW0uZ3JvdXBEaXNwbGF5TmFtZSB8fCBpdGVtLm5hbWUgfHwgYEdyb3VwICR7aXRlbS5ncm91cElkfWAsXG4gICAgICAgICAgaWNvbjogaXRlbS5pY29uXG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXBJbmRleE1hcFtpdGVtLmdyb3VwSWRdID0gaW5kZXhcbiAgICAgICAgZ3JvdXBPcmRlci5wdXNoKGl0ZW0uZ3JvdXBJZClcbiAgICAgIH1cbiAgICAgIGdyb3VwSXRlbXNNYXBbaXRlbS5ncm91cElkXS5wdXNoKGl0ZW0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHVuZ3JvdXBlZC5wdXNoKHsgaXRlbSwgaW5kZXggfSlcbiAgICB9XG4gIH0pXG5cbiAgLy8gU2Vjb25kIHBhc3M6IGNvbnZlcnQgcmVndWxhciBhcnJheXMgdG8gSW1tdXRhYmxlQXJyYXlzXG4gIE9iamVjdC5rZXlzKGdyb3VwSXRlbXNNYXApLmZvckVhY2goZ3JvdXBJZCA9PiB7XG4gICAgZ3JvdXBzW2dyb3VwSWRdLml0ZW1zID0gSW1tdXRhYmxlKGdyb3VwSXRlbXNNYXBbZ3JvdXBJZF0pXG4gIH0pXG5cbiAgcmV0dXJuIHsgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGRpc3BsYXkgbmFtZSBmb3IgcXVlcnkgaW4gZHJvcGRvd25cbi8vIFVzZXM6IHNlYXJjaEFsaWFzIHx8IGppbXVGaWVsZE5hbWUgfHwgaXRlbS5uYW1lIHx8IGZhbGxiYWNrXG5jb25zdCBnZXRRdWVyeURpc3BsYXlOYW1lID0gKGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPik6IHN0cmluZyA9PiB7XG4gIC8vIEZpcnN0IHByaW9yaXR5OiBzZWFyY2hBbGlhcyBpZiBzZXRcbiAgaWYgKGl0ZW0uc2VhcmNoQWxpYXMpIHtcbiAgICByZXR1cm4gaXRlbS5zZWFyY2hBbGlhc1xuICB9XG4gIFxuICAvLyBTZWNvbmQgcHJpb3JpdHk6IGZpZWxkIG5hbWUgZnJvbSBTUUwgZXhwcmVzc2lvblxuICBjb25zdCBqaW11RmllbGROYW1lID0gaXRlbS5zcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy5qaW11RmllbGROYW1lXG4gIGlmIChqaW11RmllbGROYW1lKSB7XG4gICAgcmV0dXJuIGppbXVGaWVsZE5hbWVcbiAgfVxuICBcbiAgLy8gVGhpcmQgcHJpb3JpdHk6IGl0ZW0gbmFtZVxuICBpZiAoaXRlbS5uYW1lKSB7XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG4gIFxuICAvLyBGYWxsYmFja1xuICByZXR1cm4gJ1F1ZXJ5J1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrTGlzdCAocHJvcHM6IFF1ZXJ5VGFza0xpc3RQcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5SXRlbXMsIHdpZGdldElkLCBkZWZhdWx0UGFnZVNpemUsIGlzSW5Qb3BwZXIgPSBmYWxzZSwgY2xhc3NOYW1lID0gJycsIGluaXRpYWxRdWVyeVZhbHVlLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCByZXN1bHRzTW9kZSwgb25SZXN1bHRzTW9kZUNoYW5nZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZXMpXG4gIFxuICBjb25zdCB7IGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyIH0gPSBSZWFjdC51c2VNZW1vKCgpID0+IGdyb3VwUXVlcmllcyhxdWVyeUl0ZW1zKSwgW3F1ZXJ5SXRlbXNdKVxuICBcbiAgLy8gRmluZCB0aGUgcXVlcnkgaXRlbSBtYXRjaGluZyB0aGUgaW5pdGlhbFF1ZXJ5VmFsdWUgc2hvcnRJZCBmcm9tIFVSTCBoYXNoXG4gIGNvbnN0IG1hdGNoaW5nUXVlcnlJbmRleCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQpIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cbiAgICByZXR1cm4gcXVlcnlJdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLnNob3J0SWQgPT09IGluaXRpYWxRdWVyeVZhbHVlLnNob3J0SWQpXG4gIH0sIFtxdWVyeUl0ZW1zLCBpbml0aWFsUXVlcnlWYWx1ZV0pXG4gIFxuICAvLyBEZXRlcm1pbmUgd2hpY2ggZ3JvdXAvdW5ncm91cGVkIGluZGV4IHRoZSBtYXRjaGluZyBxdWVyeSBpcyBhdFxuICBjb25zdCBnZXRRdWVyeVNlbGVjdGlvbiA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChtYXRjaGluZ1F1ZXJ5SW5kZXggPCAwKSByZXR1cm4gbnVsbFxuICAgIFxuICAgIGNvbnN0IGl0ZW0gPSBxdWVyeUl0ZW1zW21hdGNoaW5nUXVlcnlJbmRleF1cbiAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzW2l0ZW0uZ3JvdXBJZF0/Lml0ZW1zIHx8IEltbXV0YWJsZShbXSlcbiAgICAgIGNvbnN0IGluZGV4SW5Hcm91cCA9IGdyb3VwSXRlbXMuZmluZEluZGV4KHEgPT4gcS5jb25maWdJZCA9PT0gaXRlbS5jb25maWdJZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1xdWVyeS1mb3VuZC1pbi1ncm91cCcsXG4gICAgICAgIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgaW5kZXhJbkdyb3VwOiBpbmRleEluR3JvdXAgPj0gMCA/IGluZGV4SW5Hcm91cCA6IDAsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBpdGVtLnNob3J0SWRcbiAgICAgIH0pXG4gICAgICByZXR1cm4geyB0eXBlOiAnZ3JvdXAnIGFzIGNvbnN0LCBncm91cElkOiBpdGVtLmdyb3VwSWQsIGluZGV4OiBpbmRleEluR3JvdXAgPj0gMCA/IGluZGV4SW5Hcm91cCA6IDAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVbmdyb3VwZWQgcXVlcnlcbiAgICAgIGNvbnN0IGluZGV4SW5Vbmdyb3VwZWQgPSB1bmdyb3VwZWQuZmluZEluZGV4KCh7IGl0ZW06IHEgfSkgPT4gcS5jb25maWdJZCA9PT0gaXRlbS5jb25maWdJZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1xdWVyeS1mb3VuZC11bmdyb3VwZWQnLFxuICAgICAgICBpbmRleEluVW5ncm91cGVkOiBpbmRleEluVW5ncm91cGVkID49IDAgPyBpbmRleEluVW5ncm91cGVkIDogMCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGl0ZW0uc2hvcnRJZFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7IHR5cGU6ICd1bmdyb3VwZWQnIGFzIGNvbnN0LCBpbmRleDogaW5kZXhJblVuZ3JvdXBlZCA+PSAwID8gaW5kZXhJblVuZ3JvdXBlZCA6IDAgfVxuICAgIH1cbiAgfSwgW21hdGNoaW5nUXVlcnlJbmRleCwgcXVlcnlJdGVtcywgZ3JvdXBzLCB1bmdyb3VwZWRdKVxuICBcbiAgLy8gVHJhY2sgc2VsZWN0ZWQgcXVlcnkgLSBpbml0aWFsaXplIHdpdGggbWF0Y2hpbmcgcXVlcnkgaWYgZm91bmQgZnJvbSBVUkwgaGFzaFxuICBjb25zdCBbc2VsZWN0ZWRHcm91cElkLCBzZXRTZWxlY3RlZEdyb3VwSWRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4oKCkgPT4ge1xuICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbj8udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLWdyb3VwLXNlbGVjdGlvbicsXG4gICAgICAgIGdyb3VwSWQ6IGdldFF1ZXJ5U2VsZWN0aW9uLmdyb3VwSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ2V0UXVlcnlTZWxlY3Rpb24uZ3JvdXBJZFxuICAgIH1cbiAgICAvLyBEZWZhdWx0IHRvIGZpcnN0IGdyb3VwIGlmIGdyb3VwcyBleGlzdCBhbmQgbm8gaGFzaCBwYXJhbWV0ZXJcbiAgICBpZiAoZ3JvdXBPcmRlci5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtZ3JvdXAtc2VsZWN0aW9uLWRlZmF1bHQnLFxuICAgICAgICBncm91cElkOiBncm91cE9yZGVyWzBdLFxuICAgICAgICBub3RlOiAnTm8gaGFzaCBwYXJhbWV0ZXIsIGRlZmF1bHRpbmcgdG8gZmlyc3QgZ3JvdXAnXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdyb3VwT3JkZXJbMF1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSlcbiAgY29uc3QgW3NlbGVjdGVkR3JvdXBRdWVyeUluZGV4LCBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleF0gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PiB7XG4gICAgaWYgKGdldFF1ZXJ5U2VsZWN0aW9uPy50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtZ3JvdXAtcXVlcnktaW5kZXgnLFxuICAgICAgICBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXhcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfSlcbiAgY29uc3QgW3NlbGVjdGVkVW5ncm91cGVkSW5kZXgsIHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXhdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4ge1xuICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbj8udHlwZSA9PT0gJ3VuZ3JvdXBlZCcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbC11bmdyb3VwZWQtaW5kZXgnLFxuICAgICAgICBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXhcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfSlcbiAgXG4gIC8vIFVwZGF0ZSBzZWxlY3Rpb24gd2hlbiBpbml0aWFsUXVlcnlWYWx1ZSBjaGFuZ2VzIChlLmcuLCB3aGVuIFVSTCBoYXNoIGlzIGRldGVjdGVkKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbikge1xuICAgICAgaWYgKGdldFF1ZXJ5U2VsZWN0aW9uLnR5cGUgPT09ICdncm91cCcpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1jaGFuZ2VkLXRvLWdyb3VwJyxcbiAgICAgICAgICBncm91cElkOiBnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkLFxuICAgICAgICAgIGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleFxuICAgICAgICB9KVxuICAgICAgICBzZXRTZWxlY3RlZEdyb3VwSWQoZ2V0UXVlcnlTZWxlY3Rpb24uZ3JvdXBJZClcbiAgICAgICAgc2V0U2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgoZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWNoYW5nZWQtdG8tdW5ncm91cGVkJyxcbiAgICAgICAgICBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXhcbiAgICAgICAgfSlcbiAgICAgICAgc2V0U2VsZWN0ZWRHcm91cElkKG51bGwpXG4gICAgICAgIHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vIGhhc2ggcGFyYW1ldGVyIC0gZW5zdXJlIHdlIGhhdmUgYSBkZWZhdWx0IHNlbGVjdGlvblxuICAgICAgLy8gSWYgZ3JvdXBzIGV4aXN0LCBkZWZhdWx0IHRvIGZpcnN0IGdyb3VwIChhbHJlYWR5IGhhbmRsZWQgaW4gdXNlU3RhdGUgaW5pdGlhbGl6ZXIpXG4gICAgICAvLyBCdXQgaWYgbm8gZ3JvdXBzIGFuZCB3ZSBoYXZlIHVuZ3JvdXBlZCwgZW5zdXJlIHNlbGVjdGVkVW5ncm91cGVkSW5kZXggaXMgc2V0XG4gICAgICBpZiAoZ3JvdXBPcmRlci5sZW5ndGggPT09IDAgJiYgdW5ncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ25vLWhhc2gtcGFyYW1ldGVyLWRlZmF1bHQtdW5ncm91cGVkJyxcbiAgICAgICAgICBkZWZhdWx0SW5kZXg6IDBcbiAgICAgICAgfSlcbiAgICAgICAgc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleCgwKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2dldFF1ZXJ5U2VsZWN0aW9uLCBncm91cE9yZGVyLmxlbmd0aCwgdW5ncm91cGVkLmxlbmd0aF0pXG4gIFxuICAvLyBHZXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBxdWVyeSBpdGVtXG4gIGNvbnN0IGdldFNlbGVjdGVkUXVlcnlJdGVtID0gKCk6IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiA9PiB7XG4gICAgLy8gUFJJT1JJVFkgMTogSWYgaGFzaCBwYXJhbWV0ZXIgbWF0Y2hlcyBhIHF1ZXJ5LCB1c2UgdGhhdCBkaXJlY3RseVxuICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBhbHdheXMgdXNlIHRoZSBoYXNoLW1hdGNoZWQgcXVlcnksIHJlZ2FyZGxlc3Mgb2Ygc3RhdGUgdGltaW5nXG4gICAgLy8gVGhpcyBpcyBjcml0aWNhbCBmb3IgZ3JvdXBlZCBxdWVyaWVzIHdoZXJlIGRyb3Bkb3ducyBuZWVkIHRvIGJlIHN5bmNocm9uaXplZFxuICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbiAmJiBtYXRjaGluZ1F1ZXJ5SW5kZXggPj0gMCkge1xuICAgICAgY29uc3QgaGFzaE1hdGNoZWRJdGVtID0gcXVlcnlJdGVtc1ttYXRjaGluZ1F1ZXJ5SW5kZXhdXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2dldFNlbGVjdGVkUXVlcnlJdGVtLWhhc2gtbWF0Y2gnLFxuICAgICAgICBzaG9ydElkOiBoYXNoTWF0Y2hlZEl0ZW0uc2hvcnRJZCxcbiAgICAgICAgZ3JvdXBJZDogaGFzaE1hdGNoZWRJdGVtLmdyb3VwSWQsXG4gICAgICAgIGNvbmZpZ0lkOiBoYXNoTWF0Y2hlZEl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGlzR3JvdXBlZDogISFoYXNoTWF0Y2hlZEl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgbWF0Y2hpbmdRdWVyeUluZGV4LFxuICAgICAgICBub3RlOiAnVXNpbmcgaGFzaC1tYXRjaGVkIHF1ZXJ5IChoaWdoZXN0IHByaW9yaXR5KSdcbiAgICAgIH0pXG4gICAgICByZXR1cm4gaGFzaE1hdGNoZWRJdGVtXG4gICAgfVxuICAgIFxuICAgIC8vIFBSSU9SSVRZIDI6IE90aGVyd2lzZSB1c2UgY3VycmVudCBzdGF0ZSBzZWxlY3Rpb25cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdnZXRTZWxlY3RlZFF1ZXJ5SXRlbS1zdGF0ZS1zZWxlY3Rpb24nLFxuICAgICAgc2VsZWN0ZWRHcm91cElkLFxuICAgICAgaGFzU2VsZWN0ZWRHcm91cDogc2VsZWN0ZWRHcm91cElkICYmIGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdLFxuICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsXG4gICAgICBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4LFxuICAgICAgdW5ncm91cGVkTGVuZ3RoOiB1bmdyb3VwZWQubGVuZ3RoLFxuICAgICAgZ3JvdXBPcmRlckxlbmd0aDogZ3JvdXBPcmRlci5sZW5ndGgsXG4gICAgICBub3RlOiAnTm8gaGFzaCBwYXJhbWV0ZXIsIHVzaW5nIHN0YXRlIHNlbGVjdGlvbidcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIGEgZ3JvdXAgaXMgc2VsZWN0ZWQsIGdldCBxdWVyeSBmcm9tIHRoYXQgZ3JvdXBcbiAgICBpZiAoc2VsZWN0ZWRHcm91cElkICYmIGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdKSB7XG4gICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzW3NlbGVjdGVkR3JvdXBJZF0uaXRlbXNcbiAgICAgIGlmIChncm91cEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgaWR4ID0gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggPCBncm91cEl0ZW1zLmxlbmd0aCA/IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDogMFxuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSBncm91cEl0ZW1zW2lkeF1cbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGVkLXF1ZXJ5LWZyb20tZ3JvdXAnLFxuICAgICAgICAgIGdyb3VwSWQ6IHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICBncm91cFF1ZXJ5SW5kZXg6IGlkeCxcbiAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIHF1ZXJ5RGlzcGxheU5hbWU6IGdldFF1ZXJ5RGlzcGxheU5hbWUoc2VsZWN0ZWRJdGVtKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIE90aGVyd2lzZSwgZ2V0IGZyb20gdW5ncm91cGVkIHF1ZXJpZXNcbiAgICBpZiAodW5ncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGlkeCA9IHNlbGVjdGVkVW5ncm91cGVkSW5kZXggPCB1bmdyb3VwZWQubGVuZ3RoID8gc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCA6IDBcbiAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVuZ3JvdXBlZFtpZHhdLml0ZW1cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnc2VsZWN0ZWQtcXVlcnktZnJvbS11bmdyb3VwZWQnLFxuICAgICAgICB1bmdyb3VwZWRJbmRleDogaWR4LFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKHNlbGVjdGVkSXRlbSlcbiAgICAgIH0pXG4gICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtXG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvIGZpcnN0IHF1ZXJ5IGl0ZW1cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RlZC1xdWVyeS1mYWxsYmFjaycsXG4gICAgICBub3RlOiAnTm8gZ3JvdXBzIG9yIHVuZ3JvdXBlZCBxdWVyaWVzLCB1c2luZyBmaXJzdCBpdGVtJ1xuICAgIH0pXG4gICAgcmV0dXJuIHF1ZXJ5SXRlbXNbMF1cbiAgfVxuICBcbiAgY29uc3Qgc2VsZWN0ZWRRdWVyeUl0ZW0gPSBnZXRTZWxlY3RlZFF1ZXJ5SXRlbSgpXG4gIGNvbnN0IHNlbGVjdGVkUXVlcnlSZWFsSW5kZXggPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gcXVlcnlJdGVtcy5maW5kSW5kZXgocSA9PiBxLmNvbmZpZ0lkID09PSBzZWxlY3RlZFF1ZXJ5SXRlbS5jb25maWdJZClcbiAgfSwgW3F1ZXJ5SXRlbXMsIHNlbGVjdGVkUXVlcnlJdGVtXSlcbiAgXG4gIC8vIElmIG9ubHkgb25lIHF1ZXJ5IHRvdGFsLCBkb24ndCBzaG93IGRyb3Bkb3duXG4gIGNvbnN0IHNob3dEcm9wZG93biA9IHF1ZXJ5SXRlbXMubGVuZ3RoID4gMSB8fCBncm91cE9yZGVyLmxlbmd0aCA+IDBcbiAgXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2BydW50aW1lLXF1ZXJ5X19xdWVyeS1saXN0IGgtMTAwICR7Y2xhc3NOYW1lfWB9IGNzcz17Y3NzYFxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAucXVlcnktc2VsZWN0b3Ige1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG4gICAgICAucXVlcnktc2VsZWN0b3ItbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS1zZWxlY3RvciBzZWxlY3Qge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS10YXNrLWNvbnRhaW5lciB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgfVxuICAgIGB9PlxuICAgICAgey8qIFNlYXJjaCBMYXllciBkcm9wZG93biBtb3ZlZCB0byBRdWVyeVRhc2sgUXVlcnkgdGFiIGNvbnRlbnQgKi99XG4gICAgICBcbiAgICAgIHsvKiBTaG93IHNlbGVjdGVkIHF1ZXJ5IGZvcm0gZGlyZWN0bHkgYmVsb3cgKi99XG4gICAgICB7c2VsZWN0ZWRRdWVyeUl0ZW0gJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHF1ZXJ5LXRhc2stY29udGFpbmVyICR7aXNJblBvcHBlciA/IEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MgOiAnJ31gfT5cbiAgICAgICAgICA8UXVlcnlUYXNrXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICBpbmRleD17c2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA+PSAwID8gc2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA6IDB9XG4gICAgICAgICAgICB0b3RhbD17cXVlcnlJdGVtcy5sZW5ndGh9XG4gICAgICAgICAgICBxdWVyeUl0ZW09e3NlbGVjdGVkUXVlcnlJdGVtfVxuICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtkZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICBpc0luUG9wcGVyPXtpc0luUG9wcGVyfVxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU9e3NlbGVjdGVkUXVlcnlJdGVtLnNob3J0SWQgPT09IGluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID8gaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17b25IYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e3F1ZXJ5SXRlbXN9XG4gICAgICAgICAgICBzZWxlY3RlZFF1ZXJ5SW5kZXg9e3NlbGVjdGVkVW5ncm91cGVkSW5kZXh9XG4gICAgICAgICAgICBvblF1ZXJ5Q2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgLy8gR3JvdXBpbmcgcHJvcHNcbiAgICAgICAgICAgIGdyb3Vwcz17Z3JvdXBzfVxuICAgICAgICAgICAgdW5ncm91cGVkPXt1bmdyb3VwZWR9XG4gICAgICAgICAgICBncm91cE9yZGVyPXtncm91cE9yZGVyfVxuICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkPXtzZWxlY3RlZEdyb3VwSWR9XG4gICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleD17c2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXh9XG4gICAgICAgICAgICBvbkdyb3VwQ2hhbmdlPXsoZ3JvdXBJZCkgPT4gc2V0U2VsZWN0ZWRHcm91cElkKGdyb3VwSWQpfVxuICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkR3JvdXBRdWVyeUluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIG9uVW5ncm91cGVkQ2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgcmVzdWx0c01vZGU9e3Jlc3VsdHNNb2RlfVxuICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17b25SZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcz17YWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e29uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgLy8gTm8gb25OYXZCYWNrIC0gbm8gbmF2aWdhdGlvbiBuZWVkZWRcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlLCBqc3gsIGNzcywgY2xhc3NOYW1lcywgdHlwZSBJbW11dGFibGVBcnJheSwgdHlwZSBVc2VEYXRhU291cmNlLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU2VsZWN0LCBUb29sdGlwLCBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgeyB0eXBlIENyZWF0ZVRvb2xUeXBlLCBTcGF0aWFsRmlsdGVyVHlwZSwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCB0eXBlIFNwYXRpYWxSZWxhdGlvbiwgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBHZW9tZXRyeUZyb21EYXRhU291cmNlIH0gZnJvbSAnLi9nZW9tZXRyeS1mcm9tLWRzJ1xyXG5pbXBvcnQgeyBHZW9tZXRyeUZyb21NYXAgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tbWFwJ1xyXG5pbXBvcnQgeyBHZW9tZXRyeUZyb21EcmF3IH0gZnJvbSAnLi9nZW9tZXRyeS1mcm9tLWRyYXcnXHJcbmltcG9ydCB7IEluZm9PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8nXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0l0ZW1Qcm9wcyB7XHJcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xyXG4gIGxhYmVsOiBzdHJpbmdcclxuICBkZXNjOiBzdHJpbmdcclxuICBkc0VuYWJsZUJ1ZmZlcjogYm9vbGVhblxyXG4gIGRzQnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGRzQnVmZmVyVW5pdDogVW5pdFR5cGVcclxuICBkcmF3RW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgZHJhd0J1ZmZlckRpc3RhbmNlOiBudW1iZXJcclxuICBkcmF3QnVmZmVyVW5pdDogVW5pdFR5cGVcclxuICBzcGF0aWFsUmVsYXRpb25zOiBJbW11dGFibGVBcnJheTxTcGF0aWFsUmVsYXRpb24+XHJcbiAgdXNlRGF0YVNvdXJjZXM6IEltbXV0YWJsZUFycmF5PFVzZURhdGFTb3VyY2U+XHJcbiAgdXNlUnVudGltZURhdGE6IGJvb2xlYW5cclxuICBmaWx0ZXJUeXBlczogSW1tdXRhYmxlQXJyYXk8U3BhdGlhbEZpbHRlclR5cGU+XHJcbiAgbWFwV2lkZ2V0SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBvbkZpbHRlckNoYW5nZTogKGZpbHRlcjogU3BhdGlhbEZpbHRlck9iaikgPT4gdm9pZFxyXG4gIG9uUmVsYXRpb25DaGFuZ2U6IChyZWw6IFNwYXRpYWxSZWxhdGlvbikgPT4gdm9pZFxyXG4gIG9uQnVmZmVyQ2hhbmdlOiAoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza1NwYXRpYWxGb3JtIChwcm9wczogUXVlcnlUYXNrSXRlbVByb3BzKSB7XHJcbiAgY29uc3Qge1xyXG4gICAgbGFiZWwsIGRlc2MsIGZpbHRlclR5cGVzLCBtYXBXaWRnZXRJZHMsIG9uRmlsdGVyQ2hhbmdlLCBvblJlbGF0aW9uQ2hhbmdlLCBvbkJ1ZmZlckNoYW5nZSwgdXNlRGF0YVNvdXJjZXMsIHNwYXRpYWxSZWxhdGlvbnMsIHVzZVJ1bnRpbWVEYXRhLFxyXG4gICAgZHNFbmFibGVCdWZmZXIsIGRzQnVmZmVyRGlzdGFuY2UsIGRzQnVmZmVyVW5pdCwgZHJhd0VuYWJsZUJ1ZmZlciwgZHJhd0J1ZmZlckRpc3RhbmNlLCBkcmF3QnVmZmVyVW5pdCwgY3JlYXRlVG9vbFR5cGVzLCB3aWRnZXRJZFxyXG4gIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXHJcbiAgLy8gdXNlZCB0byBzdG9yZSB0aGUgc2VsZWN0aW9uIG9mIHRoZSBkYXRhIHNvdXJjZSBpbiBvcmRlciB0byB1cGRhdGUgdGhlIGZpbHRlciB3aGVuIG9wdGlvbiBjaGFuZ2VzXHJcbiAgY29uc3Qgc2VsZWN0ZWRHZW9tZXRyaWVzUmVmID0gUmVhY3QudXNlUmVmPGFueT4obnVsbClcclxuICBjb25zdCBtYXBFeGlzdHMgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xyXG4gICAgaWYgKG1hcFdpZGdldElkcz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBtYXBXaWRnZXRJZCA9IG1hcFdpZGdldElkc1swXVxyXG4gICAgICByZXR1cm4gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbbWFwV2lkZ2V0SWRdICE9IG51bGxcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH0pXHJcbiAgY29uc3QgY2FuVXNlTWFwRmlsdGVyID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICByZXR1cm4gbWFwRXhpc3RzICYmIChmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuQ3VycmVudE1hcEV4dGVudCkgfHwgZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkludGVyYWN0aXZlRHJhd01vZGUpKVxyXG4gIH0sIFtmaWx0ZXJUeXBlcywgbWFwRXhpc3RzXSlcclxuICBjb25zdCBzdXBwb3J0ZWRGaWx0ZXJUeXBlcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gW11cclxuICAgIGlmICh1c2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMCB8fCB1c2VSdW50aW1lRGF0YSkge1xyXG4gICAgICByZXN1bHQucHVzaCh7IHZhbHVlOiAnZGF0YScsIGxhYmVsOiBnZXRJMThuTWVzc2FnZSgnZmVhdHVyZUZyb21EcycpIH0pXHJcbiAgICB9XHJcbiAgICBpZiAoY2FuVXNlTWFwRmlsdGVyICYmIGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5DdXJyZW50TWFwRXh0ZW50KSkge1xyXG4gICAgICByZXN1bHQucHVzaCh7IHZhbHVlOiAnbWFwJywgbGFiZWw6IGdldEkxOG5NZXNzYWdlKGBzcGF0aWFsRmlsdGVyVHlwZV8ke1NwYXRpYWxGaWx0ZXJUeXBlLkN1cnJlbnRNYXBFeHRlbnR9YCkgfSlcclxuICAgIH1cclxuICAgIGlmIChjYW5Vc2VNYXBGaWx0ZXIgJiYgZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkludGVyYWN0aXZlRHJhd01vZGUpKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdkcmF3JywgbGFiZWw6IGdldEkxOG5NZXNzYWdlKGBzcGF0aWFsRmlsdGVyVHlwZV8ke1NwYXRpYWxGaWx0ZXJUeXBlLkludGVyYWN0aXZlRHJhd01vZGV9YCkgfSlcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHRcclxuICB9LCBbY2FuVXNlTWFwRmlsdGVyLCB1c2VEYXRhU291cmNlcywgdXNlUnVudGltZURhdGEsIGdldEkxOG5NZXNzYWdlLCBmaWx0ZXJUeXBlc10pXHJcblxyXG4gIGNvbnN0IFtjdXJyZW50RmlsdGVyVHlwZSwgc2V0Q3VycmVudEZpbHRlclR5cGVdID0gUmVhY3QudXNlU3RhdGUoc3VwcG9ydGVkRmlsdGVyVHlwZXM/LlswXT8udmFsdWUpXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBpbiBvcmRlciB0byBhdm9pZCBpbnZhbGlkIG9wdGlvbiBiZWluZyBzZWxlY3RlZFxyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJUeXBlICE9PSAnbm9uZScgJiYgIXN1cHBvcnRlZEZpbHRlclR5cGVzLmZpbmQoKGl0ZW0pID0+IGl0ZW0udmFsdWUgPT09IGN1cnJlbnRGaWx0ZXJUeXBlKSkge1xyXG4gICAgICBzZXRDdXJyZW50RmlsdGVyVHlwZShzdXBwb3J0ZWRGaWx0ZXJUeXBlcz8uWzBdPy52YWx1ZSlcclxuICAgIH1cclxuICB9LCBbY3VycmVudEZpbHRlclR5cGUsIHN1cHBvcnRlZEZpbHRlclR5cGVzXSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIGNsZWFyIHRoZSByZWxhdGlvbnNoaXAgYW5kIGJ1ZmZlciBpZiBmaWx0ZXIgdHlwZSBpcyBub3QgJ2RhdGEnXHJcbiAgICBpZiAoY3VycmVudEZpbHRlclR5cGUgPT09ICdtYXAnIHx8IGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnZHJhdycgfHwgY3VycmVudEZpbHRlclR5cGUgPT09ICdub25lJykge1xyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKG51bGwpXHJcbiAgICAgIG9uQnVmZmVyQ2hhbmdlKDAsIFVuaXRUeXBlLk1ldGVycylcclxuICAgICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeTogbnVsbCB9KVxyXG4gICAgfVxyXG4gICAgLy8gbm8gbmVlZCB0byB1cGRhdGUgdGhlIGZpbHRlciBpZiB0aGUgZGF0YSBzb3VyY2UgaGFzIHNlbGVjdGlvbiBzaW5jZSBpdCB3aWxsIGJlIHVwZGF0ZWQgaW4gdGhlIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSBtZXRob2RcclxuICAgIGlmIChjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RhdGEnICYmIHNlbGVjdGVkR2VvbWV0cmllc1JlZi5jdXJyZW50ID09IG51bGwpIHtcclxuICAgICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeTogbnVsbCB9KVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RmlsdGVyVHlwZSwgb25SZWxhdGlvbkNoYW5nZSwgb25CdWZmZXJDaGFuZ2UsIG9uRmlsdGVyQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRmlsdGVyVHlwZUNoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7IHNldEN1cnJlbnRGaWx0ZXJUeXBlKGV2dC50YXJnZXQudmFsdWUpIH0sIFtdKVxyXG5cclxuICBjb25zdCBoYW5kbGVHZW9tZXRyeUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChnZW9tZXRyeTogX19lc3JpLkdlb21ldHJ5LCBsYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLCBncmFwaGljPzogX19lc3JpLkdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHtcclxuICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnksIGdyYXBoaWMsIGxheWVyLCBjbGVhckFmdGVyQXBwbHkgfSlcclxuICB9LCBbb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZ2VvbWV0cmllcykgPT4ge1xyXG4gICAgc2VsZWN0ZWRHZW9tZXRyaWVzUmVmLmN1cnJlbnQgPSBnZW9tZXRyaWVzXHJcbiAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBnZW9tZXRyaWVzIH0pXHJcbiAgfSwgW29uRmlsdGVyQ2hhbmdlXSlcclxuXHJcbiAgaWYgKCEodXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDAgfHwgdXNlUnVudGltZURhdGEgfHwgY2FuVXNlTWFwRmlsdGVyKSkge1xyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IHJvbGU9J2dyb3VwJyBjbGFzc05hbWU9J3B4LTQgcGItNCcgYXJpYS1sYWJlbD17bGFiZWx9PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZm9ybS10aXRsZSBteS0yIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdkLW5vbmUnOiAhbGFiZWwgJiYgIWRlc2MgfSl9PlxyXG4gICAgICAgIHtsYWJlbCAmJiA8ZGl2IGNsYXNzTmFtZT0nbXItMiB0aXRsZTInPntsYWJlbH08L2Rpdj59XHJcbiAgICAgICAge2Rlc2MgJiYgKFxyXG4gICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIGNzcz17Y3NzYHdoaXRlLXNwYWNlOiBwcmUtbGluZTtgfSB0aXRsZT17ZGVzY30+XHJcbiAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIGljb24gdHlwZT0ndGVydGlhcnknPlxyXG4gICAgICAgICAgICAgIDxJbmZvT3V0bGluZWQgY29sb3I9J3ZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pJyBzaXplPSdzJy8+XHJcbiAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICB7c3VwcG9ydGVkRmlsdGVyVHlwZXMubGVuZ3RoID4gMCAmJiAoXHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0aXRsZTMnPntnZXRJMThuTWVzc2FnZSgnY2hvb3NlRmlsdGVyVHlwZScpfTwvZGl2PlxyXG4gICAgICAgICAgPFNlbGVjdFxyXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2hvb3NlRmlsdGVyVHlwZScpfVxyXG4gICAgICAgICAgICBjc3M9e2Nzc2BoZWlnaHQ6IDMycHg7YH1cclxuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRGaWx0ZXJUeXBlfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlRmlsdGVyVHlwZUNoYW5nZWR9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxvcHRpb24ga2V5PSctJyB2YWx1ZT0nbm9uZSc+LTwvb3B0aW9uPlxyXG4gICAgICAgICAgICB7c3VwcG9ydGVkRmlsdGVyVHlwZXMubWFwKGl0ZW0gPT4gPG9wdGlvbiBrZXk9e2l0ZW0udmFsdWV9IHZhbHVlPXtpdGVtLnZhbHVlfT57aXRlbS5sYWJlbH08L29wdGlvbj4pfVxyXG4gICAgICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICAgIHtjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RhdGEnICYmIChcclxuICAgICAgICA8R2VvbWV0cnlGcm9tRGF0YVNvdXJjZVxyXG4gICAgICAgICAgZW5hYmxlQnVmZmVyPXtkc0VuYWJsZUJ1ZmZlcn1cclxuICAgICAgICAgIGJ1ZmZlckRpc3RhbmNlPXtkc0J1ZmZlckRpc3RhbmNlfVxyXG4gICAgICAgICAgYnVmZmVyVW5pdD17ZHNCdWZmZXJVbml0fVxyXG4gICAgICAgICAgc3BhdGlhbFJlbGF0aW9ucz17c3BhdGlhbFJlbGF0aW9uc31cclxuICAgICAgICAgIHVzZURhdGFTb3VyY2VzPXt1c2VEYXRhU291cmNlc31cclxuICAgICAgICAgIHVzZVJ1bnRpbWVEYXRhPXt1c2VSdW50aW1lRGF0YX1cclxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtoYW5kbGVTZWxlY3Rpb25DaGFuZ2V9XHJcbiAgICAgICAgICBvblJlbGF0aW9uQ2hhbmdlPXtvblJlbGF0aW9uQ2hhbmdlfVxyXG4gICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e29uQnVmZmVyQ2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICAgIHtjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ21hcCcgJiYgKFxyXG4gICAgICAgIDxHZW9tZXRyeUZyb21NYXBcclxuICAgICAgICAgIG1hcFdpZGdldElkcz17bWFwV2lkZ2V0SWRzfVxyXG4gICAgICAgICAgY3JlYXRlVG9vbFR5cGVzPXtjcmVhdGVUb29sVHlwZXN9XHJcbiAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlPXtoYW5kbGVHZW9tZXRyeUNoYW5nZX1cclxuICAgICAgICAvPlxyXG4gICAgICApfVxyXG4gICAgICB7Y3VycmVudEZpbHRlclR5cGUgPT09ICdkcmF3JyAmJiAoXHJcbiAgICAgICAgPEdlb21ldHJ5RnJvbURyYXdcclxuICAgICAgICAgIGVuYWJsZUJ1ZmZlcj17ZHJhd0VuYWJsZUJ1ZmZlcn1cclxuICAgICAgICAgIGJ1ZmZlckRpc3RhbmNlPXtkcmF3QnVmZmVyRGlzdGFuY2V9XHJcbiAgICAgICAgICBidWZmZXJVbml0PXtkcmF3QnVmZmVyVW5pdH1cclxuICAgICAgICAgIG1hcFdpZGdldElkcz17bWFwV2lkZ2V0SWRzfVxyXG4gICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxyXG4gICAgICAgICAgY3JlYXRlVG9vbFR5cGVzPXtjcmVhdGVUb29sVHlwZXN9XHJcbiAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlPXtoYW5kbGVHZW9tZXRyeUNoYW5nZX1cclxuICAgICAgICAgIG9uQnVmZmVyQ2hhbmdlPXtvbkJ1ZmZlckNoYW5nZX1cclxuICAgICAgICAvPlxyXG4gICAgICApfVxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBJbW11dGFibGVBcnJheSxcbiAgdHlwZSBJTVNxbEV4cHJlc3Npb24sXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBVc2VEYXRhU291cmNlLFxuICBJbW11dGFibGUsXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgY2xhc3NOYW1lcyxcbiAgQ09OU1RBTlRTLFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgRGF0YVJlY29yZFNldCxcbiAgdHlwZSBRdWVyeVBhcmFtcyxcbiAgRGF0YVNvdXJjZVN0YXR1cyxcbiAgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UsXG4gIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSxcbiAgUmVjb3JkU2V0Q2hhbmdlVHlwZSxcbiAgTWVzc2FnZU1hbmFnZXIsXG4gIE11dGFibGVTdG9yZU1hbmFnZXIsXG4gIERhdGFBY3Rpb25NYW5hZ2VyLFxuICBEYXRhTGV2ZWwsXG4gIHR5cGUgUXVlcmlhYmxlRGF0YVNvdXJjZSxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyxcbiAgaG9va3MsXG4gIGxvZGFzaCxcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXG4gIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlLFxuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmRcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBUb29sdGlwLCBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTLCBUYWJzLCBUYWIsIFNlbGVjdCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBJbmZvT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvJ1xuaW1wb3J0IHsgVHJhc2hPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3RyYXNoJ1xuaW1wb3J0IHsgUGFnaW5nVHlwZSwgdHlwZSBRdWVyeUl0ZW1UeXBlLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVRhc2tGb3JtIH0gZnJvbSAnLi9xdWVyeS10YXNrLWZvcm0nXG5pbXBvcnQgeyBRdWVyeVRhc2tSZXN1bHQgfSBmcm9tICcuL3F1ZXJ5LXJlc3VsdCdcbmltcG9ydCB7IERhdGFTb3VyY2VUaXAsIHVzZURhdGFTb3VyY2VFeGlzdHMsIEVycm9yTWVzc2FnZSB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGFiZWwgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGFiZWwnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBnZW5lcmF0ZVF1ZXJ5UGFyYW1zLCBleGVjdXRlUXVlcnksIGV4ZWN1dGVDb3VudFF1ZXJ5IH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZCwgcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZCwgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zIH0gZnJvbSAnLi9yZXN1bHRzLW1hbmFnZW1lbnQtdXRpbHMnXG5pbXBvcnQgeyBNZW51T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9tZW51J1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdCdcbmltcG9ydCB7IExvYWRpbmdSZXN1bHQgfSBmcm9tICcuL2xvYWRpbmctcmVzdWx0J1xuaW1wb3J0IHsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzLCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCwgZmluZENsZWFyUmVzdWx0c0J1dHRvbiB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza1Byb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBpbmRleDogbnVtYmVyXG4gIHRvdGFsOiBudW1iZXJcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgZGVmYXVsdFBhZ2VTaXplPzogbnVtYmVyXG4gIHdyYXBwZWRJblBvcHBlcj86IGJvb2xlYW5cbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIGlzSW5Qb3BwZXI/OiBib29sZWFuXG4gIG9uTmF2QmFjaz86ICgpID0+IHZvaWRcbiAgaW5pdGlhbElucHV0VmFsdWU/OiBzdHJpbmdcbiAgb25IYXNoUGFyYW1ldGVyVXNlZD86IChzaG9ydElkOiBzdHJpbmcpID0+IHZvaWRcbiAgcXVlcnlJdGVtU2hvcnRJZD86IHN0cmluZ1xuICAvLyBQcm9wcyBmb3IgU2VhcmNoIExheWVyIGRyb3Bkb3duICh3aGVuIG11bHRpcGxlIHF1ZXJpZXMpXG4gIHF1ZXJ5SXRlbXM/OiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBzZWxlY3RlZFF1ZXJ5SW5kZXg/OiBudW1iZXJcbiAgb25RdWVyeUNoYW5nZT86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gIC8vIEdyb3VwaW5nIHByb3BzXG4gIGdyb3Vwcz86IHsgW2dyb3VwSWQ6IHN0cmluZ106IHsgaXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+LCBkaXNwbGF5TmFtZTogc3RyaW5nLCBpY29uPzogYW55IH0gfVxuICB1bmdyb3VwZWQ/OiBBcnJheTx7IGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiwgaW5kZXg6IG51bWJlciB9PlxuICBncm91cE9yZGVyPzogc3RyaW5nW11cbiAgc2VsZWN0ZWRHcm91cElkPzogc3RyaW5nIHwgbnVsbFxuICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleD86IG51bWJlclxuICBvbkdyb3VwQ2hhbmdlPzogKGdyb3VwSWQ6IHN0cmluZyB8IG51bGwpID0+IHZvaWRcbiAgb25Hcm91cFF1ZXJ5Q2hhbmdlPzogKGluZGV4OiBudW1iZXIpID0+IHZvaWRcbiAgb25Vbmdyb3VwZWRDaGFuZ2U/OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxuICAvLyBSZXN1bHRzIG1vZGUgcHJvcHNcbiAgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlXG4gIG9uUmVzdWx0c01vZGVDaGFuZ2U/OiAobW9kZTogU2VsZWN0aW9uVHlwZSkgPT4gdm9pZFxuICBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdXG4gIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPzogKHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10pID0+IHZvaWRcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBkaXNwbGF5IG5hbWUgZm9yIHF1ZXJ5IGluIGRyb3Bkb3duXG4vLyBVc2VzOiBzZWFyY2hBbGlhcyB8fCBqaW11RmllbGROYW1lIHx8IGl0ZW0ubmFtZSB8fCBmYWxsYmFja1xuY29uc3QgZ2V0UXVlcnlEaXNwbGF5TmFtZSA9IChpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4pOiBzdHJpbmcgPT4ge1xuICAvLyBGaXJzdCBwcmlvcml0eTogc2VhcmNoQWxpYXMgaWYgc2V0XG4gIGlmIChpdGVtLnNlYXJjaEFsaWFzKSB7XG4gICAgcmV0dXJuIGl0ZW0uc2VhcmNoQWxpYXNcbiAgfVxuICBcbiAgLy8gU2Vjb25kIHByaW9yaXR5OiBmaWVsZCBuYW1lIGZyb20gU1FMIGV4cHJlc3Npb25cbiAgY29uc3QgamltdUZpZWxkTmFtZSA9IGl0ZW0uc3FsRXhwck9iaj8ucGFydHM/LlswXT8uamltdUZpZWxkTmFtZVxuICBpZiAoamltdUZpZWxkTmFtZSkge1xuICAgIHJldHVybiBqaW11RmllbGROYW1lXG4gIH1cbiAgXG4gIC8vIFRoaXJkIHByaW9yaXR5OiBpdGVtIG5hbWVcbiAgaWYgKGl0ZW0ubmFtZSkge1xuICAgIHJldHVybiBpdGVtLm5hbWVcbiAgfVxuICBcbiAgLy8gRmFsbGJhY2tcbiAgcmV0dXJuICdRdWVyeSdcbn1cblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gICYud3JhcHBlZCAucXVlcnktZm9ybSB7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG4gIC5xdWVyeS10YXNrX19jb250ZW50IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgcGFkZGluZy10b3A6IDhweDtcbiAgICAmOmhhcyg+IC5xdWVyeS1mb3JtX19oZWFkZXIgPiBkaXY6bm90KC5kLW5vbmUpKSwgJjpoYXMoPiAucXVlcnktcmVzdWx0KSB7XG4gICAgICBwYWRkaW5nLXRvcDogMTZweDtcbiAgICB9XG4gIH1cbiAgLnF1ZXJ5LWZvcm1fX2hlYWRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICAmLmhhcy1jb250ZW50IHtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgICB9XG4gICAgLm5hdi1hY3Rpb24ge1xuICAgICAgZmxleDogMSAxIDA7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIC5qaW11LWJ0biB7XG4gICAgICAgIG1pbi13aWR0aDogMjZweDtcbiAgICAgIH1cbiAgICB9XG4gICAgLnJlc3VsdC1tZW51IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgfVxuICB9XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2sgKHByb3BzOiBRdWVyeVRhc2tQcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5SXRlbSwgb25OYXZCYWNrLCB0b3RhbCwgaXNJblBvcHBlciA9IGZhbHNlLCBkZWZhdWx0UGFnZVNpemUgPSBDT05TVEFOVFMuREVGQVVMVF9RVUVSWV9QQUdFX1NJWkUsIHdyYXBwZWRJblBvcHBlciA9IGZhbHNlLCBjbGFzc05hbWUgPSAnJywgaW5kZXgsIGluaXRpYWxJbnB1dFZhbHVlLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCBxdWVyeUl0ZW1zLCBzZWxlY3RlZFF1ZXJ5SW5kZXgsIG9uUXVlcnlDaGFuZ2UsIGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyLCBzZWxlY3RlZEdyb3VwSWQsIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LCBvbkdyb3VwQ2hhbmdlLCBvbkdyb3VwUXVlcnlDaGFuZ2UsIG9uVW5ncm91cGVkQ2hhbmdlLCByZXN1bHRzTW9kZSwgb25SZXN1bHRzTW9kZUNoYW5nZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgLi4ub3RoZXJQcm9wcyB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW3N0YWdlLCBzZXRTdGFnZV0gPSBSZWFjdC51c2VTdGF0ZSgwKSAvLyAwID0gZm9ybSwgMSA9IHJlc3VsdHMsIDIgPSBsb2FkaW5nXG4gIGNvbnN0IFthY3RpdmVUYWIsIHNldEFjdGl2ZVRhYl0gPSBSZWFjdC51c2VTdGF0ZTwncXVlcnknIHwgJ3Jlc3VsdHMnPigncXVlcnknKVxuICBjb25zdCBbZW5hYmxlZCwgc2V0RW5hYmxlZF0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBbcmVzdWx0Q291bnQsIHNldFJlc3VsdENvdW50XSA9IFJlYWN0LnVzZVN0YXRlKDApXG4gIC8vIFRyYWNrIGlmIHdlJ3ZlIGFscmVhZHkgc2VsZWN0ZWQgcmVjb3JkcyBmb3IgdGhlIGN1cnJlbnQgcXVlcnkgcmVzdWx0c1xuICBjb25zdCBoYXNTZWxlY3RlZFJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFRyYWNrIHF1ZXJ5IGV4ZWN1dGlvbiBjb3VudCB0byBmb3JjZSBRdWVyeVRhc2tSZXN1bHQgcmVtb3VudCBvbiBuZXcgcXVlcmllc1xuICBjb25zdCBxdWVyeUV4ZWN1dGlvbktleVJlZiA9IFJlYWN0LnVzZVJlZigwKVxuICBjb25zdCBxdWVyeVBhcmFtUmVmID0gUmVhY3QudXNlUmVmPFF1ZXJ5UGFyYW1zPihudWxsKVxuICBjb25zdCByZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmPERhdGFSZWNvcmRbXT4obnVsbClcbiAgY29uc3QgW291dHB1dERTLCBzZXRPdXRwdXREU10gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPihudWxsKVxuICBjb25zdCBbZGF0YVNvdXJjZSwgc2V0RGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPihudWxsKVxuICBjb25zdCBbc3BhdGlhbEZpbHRlckVuYWJsZWQsIHNldFNwYXRpYWxGaWx0ZXJFbmFibGVkXSA9IFJlYWN0LnVzZVN0YXRlKHRydWUpXG4gIGNvbnN0IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmogPSBSZWFjdC51c2VSZWY8SU1TcWxFeHByZXNzaW9uPihxdWVyeUl0ZW0uc3FsRXhwck9iailcbiAgY29uc3Qgc3BhdGlhbEZpbHRlck9iaiA9IFJlYWN0LnVzZVJlZihudWxsKVxuICBjb25zdCBiYWNrQnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IGNsZWFyUmVzdWx0QnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IFtkYXRhQWN0aW9uRmlsdGVyLCBzZXREYXRhQWN0aW9uRmlsdGVyXSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IHByZXZpb3VzQ29uZmlnSWRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nPihxdWVyeUl0ZW0uY29uZmlnSWQpXG4gIC8vIFRyYWNrIG1hbnVhbCB0YWIgc3dpdGNoZXMgdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICBjb25zdCBtYW51YWxUYWJTd2l0Y2hSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFN0b3JlIHRoZSBsYXN0IHJ1bnRpbWUgem9vbSBvdmVycmlkZSB2YWx1ZSBmcm9tIHRoZSBmb3JtIGZvciB1c2UgYnkgQWRkIHRvIE1hcCBhY3Rpb25cbiAgY29uc3QgbGFzdFJ1bnRpbWVab29tVG9TZWxlY3RlZFJlZiA9IFJlYWN0LnVzZVJlZjxib29sZWFuIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpXG4gIC8vIEVycm9yIHN0YXRlcyBmb3IgdXNlci1mYWNpbmcgZXJyb3JzXG4gIGNvbnN0IFtzZWxlY3Rpb25FcnJvciwgc2V0U2VsZWN0aW9uRXJyb3JdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihudWxsKVxuICBjb25zdCBbem9vbUVycm9yLCBzZXRab29tRXJyb3JdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihudWxsKVxuXG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9RVUVSWV9JVEVNLCBxdWVyeUl0ZW0pXG4gIGNvbnN0IHsgaWNvbiwgbmFtZSwgZGlzcGxheUxhYmVsIH0gPSBjdXJyZW50SXRlbVxuICBjb25zdCBkc0V4aXN0czogYm9vbGVhbiA9IHVzZURhdGFTb3VyY2VFeGlzdHMoeyB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsIHVzZURhdGFTb3VyY2VJZDogY3VycmVudEl0ZW0udXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkIH0pXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgdGFiIGNvbnRlbnQgcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeS10YWItY29udGVudC1yZW5kZXInLFxuICAgICAgYWN0aXZlVGFiLFxuICAgICAgZW5hYmxlZCxcbiAgICAgIGRzRXhpc3RzLFxuICAgICAgZGF0YVNvdXJjZTogZGF0YVNvdXJjZSA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIG5vdGU6ICdRdWVyeSB0YWIgY29udGVudCBzdGF0ZSBjaGVjaydcbiAgICB9KVxuICB9LCBbYWN0aXZlVGFiLCBlbmFibGVkLCBkc0V4aXN0cywgZGF0YVNvdXJjZSwgcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICAvLyBEZWJ1ZyBsb2dnaW5nIGZvciBUYWIgY2hpbGRyZW4gcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5LXRhYi1jaGlsZHJlbi1yZW5kZXInLFxuICAgICAgICBhY3RpdmVUYWIsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIG5vdGU6ICdRdWVyeSBUYWIgY2hpbGRyZW4gc2hvdWxkIGJlIHJlbmRlcmluZydcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbYWN0aXZlVGFiLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIC8vIGZvY3VzIHRoZSBiYWNrIGJ1dHRvbiB3aGVuIGl0IGlzIHJlbmRlcmVkXG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9KVxuXG4gIC8vIEdldCB0aGUgcGFnaW5hdGlvbiBzdHlsZSBmcm9tIHdpZGdldCBjb25maWcgKE11bHRpUGFnZSBvciBMYXp5TG9hZC9TaW5nbGUtcGFnZSlcbiAgY29uc3QgcGFnaW5nVHlwZUluQ29uZmlnID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbcHJvcHMud2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdFBhZ2luZ1N0eWxlXG4gIH0pXG5cbiAgLy8gR2V0IHRoZSBpbml0aWFsIHBhZ2Ugc2l6ZSBmb3Igc2luZ2xlLXBhZ2UgKExhenlMb2FkKSByZXN1bHRzXG4gIC8vIFRoaXMgYWxsb3dzIHVzZXJzIHRvIGNvbmZpZ3VyZSBob3cgbWFueSByZWNvcmRzIGFyZSBsb2FkZWQgaW5pdGlhbGx5IHdoZW4gdXNpbmcgc2luZ2xlLXBhZ2UgbW9kZVxuICAvLyBEZWZhdWx0cyB0byAxMDAgaWYgbm90IGNvbmZpZ3VyZWRcbiAgY29uc3QgbGF6eUxvYWRJbml0aWFsUGFnZVNpemUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1twcm9wcy53aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcubGF6eUxvYWRJbml0aWFsUGFnZVNpemVcbiAgfSlcblxuXG4gIC8vIFdhdGNoIGZvciB3aGVuIHJlc3VsdHMgYXJlIHJlYWR5IGFuZCBzd2l0Y2ggdG8gUmVzdWx0cyB0YWJcbiAgLy8gVGhpcyBlbnN1cmVzIHdlIHdhaXQgZm9yIFJlYWN0IHRvIHJlbmRlciByZXN1bHRzLCBub3QganVzdCBmb3IgdGhlIHF1ZXJ5IHRvIGNvbXBsZXRlXG4gIC8vIFRoaXMgYXBwcm9hY2ggbWF0Y2hlcyB0aGUgYmVoYXZpb3Igb2YgbWFudWFsIGlucHV0IHdoZXJlIHJlc3VsdHMgYXJlIHJlbmRlcmVkIGJlZm9yZSB0YWIgc3dpdGNoXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gRG9uJ3QgYXV0by1zd2l0Y2ggaWYgdXNlciBtYW51YWxseSBzd2l0Y2hlZCB0YWJzXG4gICAgaWYgKG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gT25seSBzd2l0Y2ggdGFicyBpZjpcbiAgICAvLyAxLiBXZSBoYXZlIHJlc3VsdHMgKHJlc3VsdENvdW50ID4gMClcbiAgICAvLyAyLiBSZWNvcmRzIGFyZSBhY3R1YWxseSBsb2FkZWQgKHJlY29yZHNSZWYuY3VycmVudCBoYXMgZGF0YSlcbiAgICAvLyAzLiBXZSdyZSBpbiByZXN1bHRzIHN0YWdlIChzdGFnZSA9PT0gMSlcbiAgICAvLyA0LiBXZSdyZSBjdXJyZW50bHkgb24gdGhlIHF1ZXJ5IHRhYiAoZG9uJ3Qgc3dpdGNoIGlmIGFscmVhZHkgb24gcmVzdWx0cylcbiAgICBpZiAocmVzdWx0Q291bnQgPiAwICYmIHJlY29yZHNSZWYuY3VycmVudCAmJiByZWNvcmRzUmVmLmN1cnJlbnQubGVuZ3RoID4gMCAmJiBzdGFnZSA9PT0gMSAmJiBhY3RpdmVUYWIgPT09ICdxdWVyeScpIHtcbiAgICAgIHNldEFjdGl2ZVRhYigncmVzdWx0cycpXG4gICAgfVxuICB9LCBbcmVzdWx0Q291bnQsIHN0YWdlLCBhY3RpdmVUYWJdKVxuXG4gIC8vIFZlcmlmeSBkcm9wZG93bnMgYXJlIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyIHdoZW4gcHJlc2VudFxuICAvLyBUaGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IGZvciBncm91cGVkIHF1ZXJpZXMgd2hlcmUgZHJvcGRvd25zIG5lZWQgdG8gYmUgc3luY2hyb25pemVkXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gT25seSB2ZXJpZnkgaWYgd2UgaGF2ZSBhIGhhc2ggcGFyYW1ldGVyXG4gICAgaWYgKCFpbml0aWFsSW5wdXRWYWx1ZSB8fCAhcXVlcnlJdGVtLnNob3J0SWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgdGhlIGN1cnJlbnQgcXVlcnlJdGVtIG1hdGNoZXMgd2hhdCB3ZSBleHBlY3QgZnJvbSBoYXNoIHBhcmFtZXRlclxuICAgIGNvbnN0IGV4cGVjdGVkU2hvcnRJZCA9IHF1ZXJ5SXRlbS5zaG9ydElkXG4gICAgY29uc3QgaXNHcm91cGVkUXVlcnkgPSBxdWVyeUl0ZW0uZ3JvdXBJZCAhPT0gbnVsbCAmJiBxdWVyeUl0ZW0uZ3JvdXBJZCAhPT0gdW5kZWZpbmVkXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgZHJvcGRvd25zIGFyZSBjb3JyZWN0bHkgc2V0IGZvciBncm91cGVkIHF1ZXJpZXNcbiAgICBpZiAoaXNHcm91cGVkUXVlcnkpIHtcbiAgICAgIGNvbnN0IGV4cGVjdGVkR3JvdXBJZCA9IHF1ZXJ5SXRlbS5ncm91cElkXG4gICAgICBjb25zdCBhY3R1YWxHcm91cElkID0gc2VsZWN0ZWRHcm91cElkXG4gICAgICBjb25zdCBleHBlY3RlZFF1ZXJ5SW5kZXggPSBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleFxuICAgICAgXG4gICAgICBpZiAoZXhwZWN0ZWRHcm91cElkICE9PSBhY3R1YWxHcm91cElkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdkcm9wZG93bi1ncm91cC1taXNtYXRjaCcsXG4gICAgICAgICAgZXhwZWN0ZWRHcm91cElkLFxuICAgICAgICAgIGFjdHVhbEdyb3VwSWQsXG4gICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICAgIHdhcm5pbmc6ICdGaXJzdCBkcm9wZG93biBtYXkgbm90IGJlIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmIChleHBlY3RlZFF1ZXJ5SW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBWZXJpZnkgdGhlIHF1ZXJ5IGluZGV4IHdpdGhpbiB0aGUgZ3JvdXAgbWF0Y2hlc1xuICAgICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzPy5bZXhwZWN0ZWRHcm91cElkXT8uaXRlbXNcbiAgICAgICAgaWYgKGdyb3VwSXRlbXMgJiYgZ3JvdXBJdGVtcy5sZW5ndGggPiBleHBlY3RlZFF1ZXJ5SW5kZXgpIHtcbiAgICAgICAgICBjb25zdCBleHBlY3RlZFF1ZXJ5Q29uZmlnSWQgPSBncm91cEl0ZW1zW2V4cGVjdGVkUXVlcnlJbmRleF0/LmNvbmZpZ0lkXG4gICAgICAgICAgY29uc3QgYWN0dWFsUXVlcnlDb25maWdJZCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgIGlmIChleHBlY3RlZFF1ZXJ5Q29uZmlnSWQgIT09IGFjdHVhbFF1ZXJ5Q29uZmlnSWQpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnZHJvcGRvd24tcXVlcnktaW5kZXgtbWlzbWF0Y2gnLFxuICAgICAgICAgICAgICBleHBlY3RlZFF1ZXJ5Q29uZmlnSWQsXG4gICAgICAgICAgICAgIGFjdHVhbFF1ZXJ5Q29uZmlnSWQsXG4gICAgICAgICAgICAgIGV4cGVjdGVkUXVlcnlJbmRleCxcbiAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICAgICAgICB3YXJuaW5nOiAnU2Vjb25kIGRyb3Bkb3duIG1heSBub3QgYmUgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICBldmVudDogJ2Ryb3Bkb3ducy1zeW5jaHJvbml6ZWQnLFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgICAgICAgIGdyb3VwSWQ6IGV4cGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXg6IGV4cGVjdGVkUXVlcnlJbmRleCxcbiAgICAgICAgICAgICAgbm90ZTogJ0Ryb3Bkb3ducyBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSAtIHZlcmlmeSBpdCdzIHNlbGVjdGVkXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2Ryb3Bkb3ducy1zeW5jaHJvbml6ZWQtdW5ncm91cGVkJyxcbiAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICBub3RlOiAnVW5ncm91cGVkIHF1ZXJ5IGRyb3Bkb3duIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgfSlcbiAgICB9XG4gIH0sIFtpbml0aWFsSW5wdXRWYWx1ZSwgcXVlcnlJdGVtLnNob3J0SWQsIHF1ZXJ5SXRlbS5ncm91cElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIHNlbGVjdGVkR3JvdXBJZCwgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIGdyb3Vwc10pXG5cbiAgY29uc3QgdXNlT3V0cHV0RHM6IEltbXV0YWJsZU9iamVjdDxVc2VEYXRhU291cmNlPiA9IFJlYWN0LnVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIEltbXV0YWJsZSh7XG4gICAgICAgIGRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZCxcbiAgICAgICAgbWFpbkRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZFxuICAgICAgfSksXG4gICAgW3F1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRdXG4gIClcblxuICBjb25zdCB1cGRhdGVEYXRhU291cmNlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRzPzogRGF0YVNvdXJjZSkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnREcyA9IGRzID8/IGRhdGFTb3VyY2VcbiAgICAvLyBzaG91bGQgZGlzYWJsZSBzcGF0aWFsIGZpbHRlciBpZiB0aGUgZGF0YVNvdXJjZSBpcyBhbiBvdXRwdXQgZHMgYW5kIGl0IGFscmVhZHkgaGFzIHNwYXRpYWwgZmlsdGVyXG4gICAgaWYgKGN1cnJlbnREcz8uZ2V0RGF0YVNvdXJjZUpzb24oKT8uaXNPdXRwdXRGcm9tV2lkZ2V0KSB7XG4gICAgICBjb25zdCBxRHM6IFF1ZXJpYWJsZURhdGFTb3VyY2UgPSBjdXJyZW50RHMgYXMgUXVlcmlhYmxlRGF0YVNvdXJjZVxuICAgICAgY29uc3QgcVBhcmFtcyA9IHFEcy5nZXRDdXJyZW50UXVlcnlQYXJhbXM/LigpIGFzIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zXG4gICAgICBpZiAocVBhcmFtcy5nZW9tZXRyeSAhPSBudWxsKSB7XG4gICAgICAgIHNldFNwYXRpYWxGaWx0ZXJFbmFibGVkKGZhbHNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0U3BhdGlhbEZpbHRlckVuYWJsZWQodHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtkYXRhU291cmNlXSlcblxuICBjb25zdCBoYW5kbGVTdGF0dXNDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZW5hYmxlZDogYm9vbGVhbikgPT4ge1xuICAgIHNldEVuYWJsZWQoZW5hYmxlZClcbiAgICB1cGRhdGVEYXRhU291cmNlKClcbiAgfSwgW3VwZGF0ZURhdGFTb3VyY2VdKVxuXG4gIGNvbnN0IGhhbmRsZU91dHB1dERhdGFTb3VyY2VJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZm8sIHByZUluZm8pID0+IHtcbiAgICBjb25zdCBvdXRwdXRJZCA9IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRcbiAgICBjb25zdCBmaWx0ZXIgPSBpbmZvPy53aWRnZXRRdWVyaWVzID8gaW5mby53aWRnZXRRdWVyaWVzW2BzZXRGaWx0ZXItJHtvdXRwdXRJZH1gXSA6IG51bGxcbiAgICBpZiAoZmlsdGVyID09IG51bGwpIHsgLy8gZmlsdGVyIGlzIG51bGwgbWVhbnMgdGhlcmUgYXJlIGluY29tcGxldGUgcXVlcmllcywgaWdub3JlIHRoaXMgY2hhbmdlXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgcHJlRmlsdGVyID0gcHJlSW5mbz8ud2lkZ2V0UXVlcmllcyA/IHByZUluZm8ud2lkZ2V0UXVlcmllc1tgc2V0RmlsdGVyLSR7b3V0cHV0SWR9YF0gOiBudWxsXG4gICAgaWYgKGZpbHRlcj8ud2hlcmUgIT09IHByZUZpbHRlcj8ud2hlcmUpIHtcbiAgICAgIHNldERhdGFBY3Rpb25GaWx0ZXIoZmlsdGVyKVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRdKVxuXG4gIGNvbnN0IHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZyA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgICBjb25zdCBkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSA9IG5ldyBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZShwcm9wcy53aWRnZXRJZCwgUmVjb3JkU2V0Q2hhbmdlVHlwZS5SZW1vdmUsIFtvdXRwdXREUy5pZF0pXG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSlcbiAgICBhd2FpdCBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UocHJvcHMud2lkZ2V0SWQsIFtdLCBbb3V0cHV0RFMuaWRdKSlcbiAgfSwgW3Byb3BzLndpZGdldElkLCBvdXRwdXREU10pXG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgcXVlcnkgcmVzdWx0cyBmcm9tIHRoZSBVSSBhbmQgbWFwLlxuICAgKiBUaGlzIGlzIHRoZSBzaW5nbGUgc291cmNlIG9mIHRydXRoIGZvciBjbGVhcmluZyByZXN1bHRzLlxuICAgKiBJdCBjbGVhcnMgdGhlIHJlY29yZHMsIHJlc2V0cyB0aGUgcmVzdWx0IGNvdW50LCBjbGVhcnMgc2VsZWN0aW9uIGZyb20gdGhlIG1hcCxcbiAgICogcHVibGlzaGVzIGEgY2xlYXJlZCBtZXNzYWdlIHRvIHRoZSBtYXAsIHN3aXRjaGVzIGJhY2sgdG8gdGhlIFF1ZXJ5IHRhYixcbiAgICogYW5kIGluY3JlbWVudHMgdGhlIHF1ZXJ5IGV4ZWN1dGlvbiBrZXkgdG8gZm9yY2UgUXVlcnlUYXNrUmVzdWx0IHRvIHJlbW91bnQgd2l0aCBmcmVzaCBzdGF0ZS5cbiAgICovXG4gIGNvbnN0IGNsZWFyUmVzdWx0ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJlY29yZHNSZWYuY3VycmVudCA9IG51bGxcbiAgICBvdXRwdXREUz8uc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gICAgc2V0UmVzdWx0Q291bnQoMClcbiAgICBcbiAgICAvLyBDbGVhciBzZWxlY3Rpb24gZGlyZWN0bHkgZnJvbSBkYXRhIHNvdXJjZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKG91dHB1dERTKVxuICAgIFxuICAgIC8vIENsZWFyIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzIHdoZW4gY2xlYXJpbmcgcmVzdWx0c1xuICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoW10pXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1yZWNvcmRzLWNsZWFyZWQtb24tY2xlYXItcmVzdWx0cycsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZFxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcHVibGlzaERhdGFDbGVhcmVkTXNnKClcbiAgICAvLyBTd2l0Y2ggYmFjayB0byBRdWVyeSB0YWIgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgc2V0U3RhZ2UoMClcbiAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IHNlbGVjdGlvbiBmbGFnIHdoZW4gY2xlYXJpbmdcbiAgICAvLyBJbmNyZW1lbnQgcXVlcnkgZXhlY3V0aW9uIGtleSB0byBmb3JjZSBRdWVyeVRhc2tSZXN1bHQgcmVtb3VudCB3aXRoIGZyZXNoIHN0YXRlXG4gICAgcXVlcnlFeGVjdXRpb25LZXlSZWYuY3VycmVudCArPSAxXG4gICAgLy8gQ2xlYXIgZXJyb3Igc3RhdGVzIHdoZW4gY2xlYXJpbmcgcmVzdWx0c1xuICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpXG4gICAgc2V0Wm9vbUVycm9yKG51bGwpXG4gIH0sIFtvdXRwdXREUywgcHVibGlzaERhdGFDbGVhcmVkTXNnLCBwcm9wcy53aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZV0pXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgZGF0YSBzb3VyY2UgY3JlYXRpb24gd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiBxdWVyeSBpdGVtcy5cbiAgICogV2hlbiBhIG5ldyBxdWVyeSBpdGVtIGlzIHNlbGVjdGVkIChlLmcuLCBzd2l0Y2hpbmcgZnJvbSBQYXJjZWwgdG8gTWFqb3IpLFxuICAgKiB0aGlzIGNsZWFycyBvbGQgcmVzdWx0cyBieSBwcm9ncmFtbWF0aWNhbGx5IGNsaWNraW5nIHRoZSB0cmFzaCBjYW4gYnV0dG9uXG4gICAqIHRvIGVuc3VyZSBhbGwgY2xlYW51cCBsb2dpYyBydW5zIHByb3Blcmx5LlxuICAgKiBcbiAgICogQHBhcmFtIGRzIC0gVGhlIG5ld2x5IGNyZWF0ZWQgZGF0YSBzb3VyY2UgZm9yIHRoZSBzZWxlY3RlZCBxdWVyeSBpdGVtXG4gICAqL1xuICBjb25zdCBoYW5kbGVEYXRhU291cmNlQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChkczogRGF0YVNvdXJjZSkgPT4ge1xuICAgIC8vIEluIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgcHJlc2VydmUgYWNjdW11bGF0ZWQgcmVjb3JkcyBhbmQgc2VsZWN0aW9uIC0gZG9uJ3QgY2xlYXJcbiAgICBpZiAoKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIFxuICAgICAgICAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3ByZXNlcnZpbmctc2VsZWN0aW9uLW9uLXF1ZXJ5LXN3aXRjaC1oYW5kbGVEYXRhU291cmNlQ3JlYXRlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICBzZXREYXRhU291cmNlKGRzKVxuICAgICAgdXBkYXRlRGF0YVNvdXJjZShkcylcbiAgICAgIHNldFN0YWdlKDApXG4gICAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICAgIHJldHVybiAvLyBTa2lwIGNsZWFyaW5nIC0gcHJlc2VydmUgc2VsZWN0aW9uXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIGNsZWFyIG9sZCByZXN1bHRzIGFzIGJlZm9yZVxuICAgIGxldCBjbGVhckJ1dHRvbiA9IGNsZWFyUmVzdWx0QnRuUmVmLmN1cnJlbnRcbiAgICBpZiAoIWNsZWFyQnV0dG9uKSB7XG4gICAgICBjbGVhckJ1dHRvbiA9IGZpbmRDbGVhclJlc3VsdHNCdXR0b24oKVxuICAgIH1cbiAgICBcbiAgICBpZiAoY2xlYXJCdXR0b24gJiYgcmVzdWx0Q291bnQgPiAwKSB7XG4gICAgICBjbGVhckJ1dHRvbi5jbGljaygpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNsZWFyUmVzdWx0KClcbiAgICB9XG4gICAgc2V0RGF0YVNvdXJjZShkcylcbiAgICB1cGRhdGVEYXRhU291cmNlKGRzKVxuICAgIHNldFN0YWdlKDApXG4gICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpIC8vIFJldHVybiB0byBRdWVyeSB0YWIgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICB9LCBbdXBkYXRlRGF0YVNvdXJjZSwgY2xlYXJSZXN1bHQsIHJlc3VsdENvdW50LCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBwcm9wcy53aWRnZXRJZF0pXG5cbiAgY29uc3QgaGFuZGxlT3V0cHV0RGF0YVNvdXJjZUNyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoZHM6IERhdGFTb3VyY2UpID0+IHtcbiAgICBzZXRPdXRwdXREUyhkcylcbiAgICBcbiAgICAvLyBJZiBpbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlIGFuZCB3ZSBoYXZlIGFjY3VtdWxhdGVkIHJlY29yZHMsIHJlLXNlbGVjdCB0aGVtXG4gICAgLy8gVGhpcyB1c2VzIHRoZSBzYW1lIGxvZ2ljIGFzIGFmdGVyIHF1ZXJ5IGNvbXBsZXRpb24gLSBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaFxuICAgIC8vIFRoaXMgZW5zdXJlcyByZWNvcmRzIGFyZSBzZWxlY3RlZCBib3RoIG9uIHRoZSBtYXAgYW5kIGluIHRoZSBSZXN1bHRzIHRhYlxuICAgIGlmICgocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikgXG4gICAgICAgICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gVXNlIGEgc21hbGwgZGVsYXkgdG8gZW5zdXJlIHRoZSBEUyBpcyBmdWxseSByZWFkeVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVEUyA9IGRzIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgICAgaWYgKGZlYXR1cmVEUyAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCByZWNvcmRJZHMgPSBhY2N1bXVsYXRlZFJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVXNlIHRoZSBzYW1lIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIHRoYXQncyB1c2VkIGFmdGVyIHF1ZXJ5IGNvbXBsZXRpb25cbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBzZWxlY3QgcmVjb3JkcyBvbiB0aGUgbWFwIGFuZCB0cmlnZ2VyIGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlXG4gICAgICAgICAgICAvLyBpbiBxdWVyeS1yZXN1bHQudHN4IHRvIHVwZGF0ZSBzZWxlY3RlZFJlY29yZHMgc3RhdGUgZm9yIHRoZSBSZXN1bHRzIHRhYlxuICAgICAgICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICAgIHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBmZWF0dXJlRFMsXG4gICAgICAgICAgICAgIHJlY29yZElkcyxcbiAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSByZWNvcmRzUmVmIHNvIHJlc3VsdHMgdGFiIHNob3dzIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgIHJlY29yZHNSZWYuY3VycmVudCA9IGFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgICAgc2V0UmVzdWx0Q291bnQoYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncmUtc2VsZWN0ZWQtYWNjdW11bGF0ZWQtcmVjb3Jkcy1hZnRlci1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIG91dHB1dERTSWQ6IGZlYXR1cmVEUy5pZCxcbiAgICAgICAgICAgICAgcmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBWZXJpZnkgd2hhdCdzIGFjdHVhbGx5IHNlbGVjdGVkIGluIHRoZSBEUyBhZnRlciBhIGRlbGF5XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2UoZmVhdHVyZURTLmlkKVxuICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZEluRFMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJZHNJbkRTID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAndmVyaWZ5LXJlY29yZHMtYWZ0ZXItcmVzZWxlY3Rpb24nLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBmZWF0dXJlRFMuaWQsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWRDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBhY3R1YWxTZWxlY3RlZEluRFM6IHNlbGVjdGVkSW5EUz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJZHNJbkRTOiBzZWxlY3RlZElkc0luRFMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHJlY29yZHNNYXRjaDogc2VsZWN0ZWRJbkRTPy5sZW5ndGggPT09IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sIDIwMClcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncmUtc2VsZWN0aW9uLWZhaWxlZC1hZnRlci1zd2l0Y2gnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgMTAwKVxuICAgIH1cbiAgfSwgW3Jlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIHByb3BzLndpZGdldElkXSlcblxuICAvLyBDbGVhciByZXN1bHRzIHdoZW4gcXVlcnkgaXRlbSBjaGFuZ2VzIChlLmcuLCB3aGVuIG5ldyBoYXNoIHBhcmFtZXRlciB0cmlnZ2VycyBkaWZmZXJlbnQgcXVlcnkpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gT25seSBjbGVhciBpZiB3ZSdyZSBhY3R1YWxseSBzd2l0Y2hpbmcgdG8gYSBkaWZmZXJlbnQgcXVlcnkgKG5vdCBqdXN0IHJlLXJlbmRlcmluZylcbiAgICBjb25zdCBpc1N3aXRjaGluZ1F1ZXJpZXMgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgIT09IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgIFxuICAgIC8vIE9ubHkgY2xlYXIgcmVzdWx0cyB3aGVuIHN3aXRjaGluZyBxdWVyaWVzIGlmIHdlJ3JlIGluIFwiTmV3XCIgbW9kZVxuICAgIC8vIEluIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2Rlcywgd2Ugd2FudCB0byBwcmVzZXJ2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFjcm9zcyBxdWVyeSBzd2l0Y2hlc1xuICAgIGlmIChpc1N3aXRjaGluZ1F1ZXJpZXMgJiYgcmVzdWx0Q291bnQgPiAwICYmIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgLy8gU3RvcmUgdGhlIG9sZCBjb25maWdJZCBiZWZvcmUgdXBkYXRpbmdcbiAgICAgIGNvbnN0IG9sZENvbmZpZ0lkID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50XG4gICAgICAvLyBVcGRhdGUgdGhlIHJlZiB0byB0cmFjayB0aGUgbmV3IHF1ZXJ5XG4gICAgICBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJpbmctcmVzdWx0cy1vbi1xdWVyeS1zd2l0Y2gtbmV3LW1vZGUnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIG9sZENvbmZpZ0lkLFxuICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICByZXN1bHRzTW9kZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgaW1tZWRpYXRlbHkgd2hlbiBzd2l0Y2hpbmcgcXVlcmllcywgYnV0IHdyYXAgaW4gdHJ5LWNhdGNoIHRvIGhhbmRsZVxuICAgICAgLy8gcmFjZSBjb25kaXRpb25zIHdpdGggZmVhdHVyZSBpbmZvIHdpbmRvd3MgdGhhdCBtaWdodCBiZSByZW5kZXJpbmdcbiAgICAgIHRyeSB7XG4gICAgICAgIGNsZWFyUmVzdWx0KClcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIExvZyBmb3IgZGVidWdnaW5nIGJ1dCBkb24ndCBzaG93IHRvIHVzZXIgKGZyYW1ld29yayByYWNlIGNvbmRpdGlvbilcbiAgICAgICAgLy8gVGhlIGVycm9yIGlzIGluIGZyYW1ld29yayBjb2RlIChmZWF0dXJlLWluZm8udHN4KSwgbm90IG91ciBjb2RlXG4gICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiBmZWF0dXJlLWluZm8udHN4IGlzIHRyeWluZyB0byBhcHBlbmRDaGlsZCB0byBhIERPTSBlbGVtZW50XG4gICAgICAgIC8vIHRoYXQgZ2V0cyByZW1vdmVkIHdoZW4gd2UgY2xlYXIgc2VsZWN0aW9uXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ2NsZWFyLXJlc3VsdC1yYWNlLWNvbmRpdGlvbicsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBub3RlOiAnTGlrZWx5IHJhY2UgY29uZGl0aW9uIHdpdGggZmVhdHVyZS1pbmZvLnRzeCdcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBjbGVhcmluZyByZXN1bHRzIChsaWtlbHkgcmFjZSBjb25kaXRpb24gd2l0aCBmZWF0dXJlIGluZm8pOicsIGVycm9yKVxuICAgICAgICB9XG4gICAgICAgIC8vIERvbid0IHNldCBlcnJvciBzdGF0ZSAtIHRoaXMgaXMgZXhwZWN0ZWQgaW4gc29tZSBzY2VuYXJpb3NcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzU3dpdGNoaW5nUXVlcmllcykge1xuICAgICAgLy8gSnVzdCB1cGRhdGUgdGhlIHJlZiAtIGRvbid0IGNsZWFyIHJlc3VsdHMgaWYgaW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSBvciBubyByZXN1bHRzXG4gICAgICBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwcmVzZXJ2aW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtb24tcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgb2xkQ29uZmlnSWQ6IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCxcbiAgICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LCBbcXVlcnlJdGVtLmNvbmZpZ0lkLCBjbGVhclJlc3VsdCwgcmVzdWx0Q291bnQsIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIHByb3BzLndpZGdldElkXSlcblxuICBjb25zdCBuYXZUb0Zvcm0gPSBSZWFjdC51c2VDYWxsYmFjaygoY2xlYXJSZXN1bHRzID0gZmFsc2UpID0+IHtcbiAgICBpZiAoY2xlYXJSZXN1bHRzKSB7XG4gICAgICAvLyBVc2UgdGhlIGNlbnRyYWxpemVkIGNsZWFyUmVzdWx0IG1ldGhvZCBpbnN0ZWFkIG9mIGR1cGxpY2F0aW5nIGxvZ2ljXG4gICAgICBjbGVhclJlc3VsdCgpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgLy8gU3dpdGNoIHRvIHF1ZXJ5IHRhYiBidXQgZG9uJ3QgY2xlYXIgcmVzdWx0cyB1bmxlc3MgZXhwbGljaXRseSByZXF1ZXN0ZWRcbiAgICAvLyBNYXJrIGFzIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICB9LCAxMDApXG4gICAgLy8gT25seSBjaGFuZ2Ugc3RhZ2UgaWYgd2UncmUgY2xlYXJpbmcgcmVzdWx0c1xuICAgIC8vIE90aGVyd2lzZSwga2VlcCBzdGFnZSBhdCAxIChyZXN1bHRzIGF2YWlsYWJsZSkgc28gcmVzdWx0cyBwZXJzaXN0XG4gICAgaWYgKCFjbGVhclJlc3VsdHMgJiYgcmVzdWx0Q291bnQgPiAwKSB7XG4gICAgICBzZXRTdGFnZSgxKSAvLyBLZWVwIHJlc3VsdHMgYXZhaWxhYmxlXG4gICAgfVxuICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XG4gICAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gICAgfSlcbiAgfSwgW2NsZWFyUmVzdWx0LCByZXN1bHRDb3VudF0pXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGFiIHN3aXRjaGluZyBiZXR3ZWVuIFF1ZXJ5IGFuZCBSZXN1bHRzIHRhYnMuXG4gICAqIFRhYiBzd2l0Y2hpbmcgcHJlc2VydmVzIHJlc3VsdHMgc3RhdGUgLSByZXN1bHRzIHJlbWFpbiB2aXNpYmxlIGFuZCBzZWxlY3RlZFxuICAgKiB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHRhYnMuIFJlc3VsdHMgYXJlIG9ubHkgY2xlYXJlZCB3aGVuIGV4cGxpY2l0bHlcbiAgICogY2xpY2tpbmcgdGhlIHRyYXNoIGNhbiBidXR0b24gb3Igd2hlbiBzdGFydGluZyBhIG5ldyBxdWVyeS5cbiAgICogXG4gICAqIEBwYXJhbSB0YWIgLSBUaGUgdGFiIHRvIHN3aXRjaCB0byAoJ3F1ZXJ5JyB8ICdyZXN1bHRzJylcbiAgICogQHBhcmFtIGV2ZW50IC0gT3B0aW9uYWwgbW91c2UgZXZlbnQgdG8gcHJldmVudCBkZWZhdWx0IGJlaGF2aW9yXG4gICAqL1xuICBjb25zdCBoYW5kbGVUYWJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnLCBldmVudD86IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ3RhYi1jaGFuZ2UnLFxuICAgICAgdGFiLFxuICAgICAgY3VycmVudFRhYjogYWN0aXZlVGFiLFxuICAgICAgcmVzdWx0Q291bnQsXG4gICAgICBldmVudFR5cGU6IGV2ZW50Py50eXBlXG4gICAgfSlcbiAgICBcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgfVxuICAgIC8vIERvbid0IGFsbG93IHN3aXRjaGluZyB0byByZXN1bHRzIGlmIHRoZXJlIGFyZSBubyByZXN1bHRzXG4gICAgaWYgKHRhYiA9PT0gJ3Jlc3VsdHMnICYmIHJlc3VsdENvdW50ID09PSAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAndGFiLWNoYW5nZS1ibG9ja2VkJyxcbiAgICAgICAgcmVhc29uOiAnbm8tcmVzdWx0cycsXG4gICAgICAgIHRhYixcbiAgICAgICAgcmVzdWx0Q291bnRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gTWFyayB0aGlzIGFzIGEgbWFudWFsIHN3aXRjaCB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgc2V0QWN0aXZlVGFiKHRhYilcbiAgICBcbiAgICAvLyBSZXNldCB0aGUgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IHRoZSBzdGF0ZSB1cGRhdGUgdG8gY29tcGxldGVcbiAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbW1lZGlhdGVseSBzd2l0Y2hpbmcgYmFja1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIH0sIDEwMClcbiAgICBcbiAgICAvLyBEb24ndCBjaGFuZ2Ugc3RhZ2UgaGVyZSAtIGp1c3Qgc3dpdGNoIHRoZSB2aWV3XG4gICAgLy8gU3RhZ2Ugc2hvdWxkIHJlbWFpbiBhdCAxIChyZXN1bHRzIGF2YWlsYWJsZSkgd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiB0YWJzXG4gIH0sIFtyZXN1bHRDb3VudCwgYWN0aXZlVGFiXSlcblxuICAvKipcbiAgICogSGFuZGxlcyBmb3JtIHN1Ym1pc3Npb24gd2hlbiB1c2VyIGNsaWNrcyBcIkFwcGx5XCIgYnV0dG9uLlxuICAgKiBDbGVhcnMgb2xkIHJlc3VsdHMgKGlmIGFueSkgYnkgcHJvZ3JhbW1hdGljYWxseSBjbGlja2luZyB0aGUgdHJhc2ggY2FuIGJ1dHRvbixcbiAgICogdGhlbiBleGVjdXRlcyB0aGUgcXVlcnkgd2l0aCB0aGUgcHJvdmlkZWQgU1FMIGV4cHJlc3Npb24gYW5kIHNwYXRpYWwgZmlsdGVyLlxuICAgKiBcbiAgICogQHBhcmFtIHNxbEV4cHIgLSBUaGUgU1FMIGV4cHJlc3Npb24gZm9yIGF0dHJpYnV0ZSBmaWx0ZXJpbmdcbiAgICogQHBhcmFtIHNwYXRpYWxGaWx0ZXIgLSBUaGUgc3BhdGlhbCBmaWx0ZXIgb2JqZWN0XG4gICAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIG92ZXJyaWRlIGZvciB6b29tLXRvLXNlbGVjdGVkIGJlaGF2aW9yXG4gICAqL1xuICBjb25zdCBoYW5kbGVGb3JtU3VibWl0ID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvbiwgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaiwgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhbikgPT4ge1xuICAgIC8vIENsZWFyIHByZXZpb3VzIGVycm9ycyB3aGVuIHN0YXJ0aW5nIGEgbmV3IHF1ZXJ5XG4gICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbClcbiAgICBzZXRab29tRXJyb3IobnVsbClcbiAgICBcbiAgICAvLyBTdG9yZSB0aGUgcnVudGltZSB6b29tIG92ZXJyaWRlIGZvciB1c2UgYnkgQWRkIHRvIE1hcCBhY3Rpb25cbiAgICBsYXN0UnVudGltZVpvb21Ub1NlbGVjdGVkUmVmLmN1cnJlbnQgPSBydW50aW1lWm9vbVRvU2VsZWN0ZWRcbiAgICBcbiAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLmN1cnJlbnQgPSBzcWxFeHByXG4gICAgc3BhdGlhbEZpbHRlck9iai5jdXJyZW50ID0gc3BhdGlhbEZpbHRlclxuICAgIC8vIExvYWQgdGhlIGZpcnN0IHBhZ2VcbiAgICBjb25zdCBmZWF0dXJlRFMgPSBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgdXNlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgLy8gVGhlc2UgcGVyc2lzdCBhY3Jvc3MgcXVlcnkgc3dpdGNoZXMsIHVubGlrZSBxdWVyeS1pdGVtLWxldmVsIHJlY29yZHNcbiAgICBsZXQgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2U6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICBleGlzdGluZ1JlY29yZHNGb3JNZXJnZSA9IGFjY3VtdWxhdGVkUmVjb3JkcyB8fCBbXVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAndXNpbmctd2lkZ2V0LWxldmVsLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBleGlzdGluZ1JlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZFxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgb2xkIHJlc3VsdHMgYnkgcHJvZ3JhbW1hdGljYWxseSBjbGlja2luZyB0aGUgdHJhc2ggY2FuIGJ1dHRvblxuICAgIC8vIEZvciBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHdlIGtlZXAgYWNjdW11bGF0ZWQgcmVzdWx0cywgc28gc2tpcCBjbGVhcmluZ1xuICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gJiYgY2xlYXJSZXN1bHRCdG5SZWYuY3VycmVudCkge1xuICAgICAgY2xlYXJSZXN1bHRCdG5SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgdGhlIGNsaWNrIGhhbmRsZXIgY29tcGxldGVzIGJlZm9yZSBwcm9jZWVkaW5nXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpXG4gICAgfVxuICAgIFxuICAgIC8vIFNldCBsb2FkaW5nIHN0YWdlXG4gICAgc2V0U3RhZ2UoMilcbiAgICBcbiAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBjbGVhciBkYXRhIGNsZWFyZWQgbWVzc2FnZVxuICAgIC8vIEZvciBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHNraXAgY2xlYXJpbmcgdG8gcHJlc2VydmUgZXhpc3RpbmcgcmVjb3Jkc1xuICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIGF3YWl0IHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZygpXG4gICAgfVxuICAgIFxuICAgIC8vIERldGVybWluZSBwYWdlIHNpemUgYmFzZWQgb24gcGFnaW5hdGlvbiBzdHlsZVxuICAgIC8vIEZvciBzaW5nbGUtcGFnZSAoTGF6eUxvYWQpIG1vZGUsIHVzZSB0aGUgY29uZmlndXJlZCBpbml0aWFsIHBhZ2Ugc2l6ZSAoZGVmYXVsdHMgdG8gMTAwKVxuICAgIC8vIEZvciBtdWx0aS1wYWdlIG1vZGUsIHVzZSB0aGUgZGVmYXVsdCBwYWdlIHNpemUgZnJvbSBwcm9wc1xuICAgIGxldCBwYWdlU2l6ZSA9IGRlZmF1bHRQYWdlU2l6ZVxuICAgIGlmIChwYWdpbmdUeXBlSW5Db25maWcgPT09IFBhZ2luZ1R5cGUuTGF6eUxvYWQpIHtcbiAgICAgIC8vIFVzZSBjb25maWd1cmVkIGxhenkgbG9hZCBpbml0aWFsIHBhZ2Ugc2l6ZSwgZmFsbGluZyBiYWNrIHRvIDEwMCBpZiBub3Qgc2V0XG4gICAgICBwYWdlU2l6ZSA9IGxhenlMb2FkSW5pdGlhbFBhZ2VTaXplID8/IDEwMFxuICAgIH1cbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IGdlbmVyYXRlUXVlcnlQYXJhbXMoZmVhdHVyZURTLCBzcWxFeHByLCBzcGF0aWFsRmlsdGVyLCBjdXJyZW50SXRlbSwgMSwgcGFnZVNpemUpXG4gICAgcXVlcnlQYXJhbVJlZi5jdXJyZW50ID0gcXVlcnlQYXJhbXNcbiAgICAvLyBDaGFuZ2Ugb3V0cHV0IGRzIHN0YXR1cyB0byB1bmxvYWRlZCBiZWZvcmUgdXNlIGl0IHRvIGxvYWQgY291bnQvcmVjb3Jkcy5cbiAgICBmZWF0dXJlRFMuc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuVW5sb2FkZWQpXG4gICAgZmVhdHVyZURTLnNldENvdW50U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuVW5sb2FkZWQpXG4gICAgbGV0IHF1ZXJ5UmVzdWx0Q291bnQgPSAwIC8vIENhcHR1cmUgY291bnQgZnJvbSBwcm9taXNlIGNoYWluIHRvIHVzZSBpbiBmaW5hbGx5IGJsb2NrXG4gICAgZXhlY3V0ZUNvdW50UXVlcnkocHJvcHMud2lkZ2V0SWQsIGZlYXR1cmVEUywgcXVlcnlQYXJhbXMpXG4gICAgICAudGhlbigoY291bnQpID0+IHtcbiAgICAgICAgcXVlcnlSZXN1bHRDb3VudCA9IGNvdW50IC8vIFN0b3JlIGNvdW50IGZvciB1c2UgaW4gZmluYWxseSBibG9ja1xuICAgICAgICBzZXRSZXN1bHRDb3VudChjb3VudClcbiAgICAgICAgLy8gdXBkYXRlIGRzIGluIG9yZGVyIHRvIGV4ZWN1dGUgcXVlcnlcbiAgICAgICAgZmVhdHVyZURTLnVwZGF0ZVF1ZXJ5UGFyYW1zKHF1ZXJ5UGFyYW1SZWYuY3VycmVudCwgcHJvcHMud2lkZ2V0SWQpXG4gICAgICAgIHJldHVybiBleGVjdXRlUXVlcnkocHJvcHMud2lkZ2V0SWQsIHF1ZXJ5SXRlbSwgZmVhdHVyZURTLCBxdWVyeVBhcmFtUmVmLmN1cnJlbnQpXG4gICAgICB9KVxuICAgICAgLnRoZW4oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICBsZXQgcmVjb3Jkc1RvRGlzcGxheSA9IHJlc3VsdC5yZWNvcmRzXG4gICAgICAgIGxldCBkc1RvVXNlID0gb3V0cHV0RFNcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBcIkFkZCB0b1wiIG1vZGU6IG1lcmdlIG5ldyByZXN1bHRzIHdpdGggd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uICYmIHJlc3VsdC5yZWNvcmRzICYmIHJlc3VsdC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gTWVyZ2UgbmV3IHF1ZXJ5IHJlc3VsdHMgd2l0aCB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgY29uc3QgbWVyZ2VkUmVjb3JkcyA9IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZChcbiAgICAgICAgICAgICAgb3V0cHV0RFMsIC8vIFVzZSBvdXRwdXREUyBmb3Iga2V5IGdlbmVyYXRpb25cbiAgICAgICAgICAgICAgcmVzdWx0LnJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UgLy8gV2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IG1lcmdlZFJlY29yZHNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzIHNvIHRoZXkgcGVyc2lzdCBhY3Jvc3MgcXVlcnkgc3dpdGNoZXNcbiAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShtZXJnZWRSZWNvcmRzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdhZGQtbW9kZS1tZXJnZS1jb21wbGV0ZScsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgbmV3UmVjb3Jkc0NvdW50OiByZXN1bHQucmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgICB3aWRnZXRMZXZlbFJlY29yZHNVcGRhdGVkOiB0cnVlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdhZGQtbW9kZS1lcnJvcicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gbm9ybWFsIGJlaGF2aW9yIG9uIGVycm9yXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVzdWx0LnJlY29yZHNcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICAgIC8vIEhhbmRsZSBcIlJlbW92ZSBmcm9tXCIgbW9kZTogcmVtb3ZlIG1hdGNoaW5nIHJlY29yZHMgZnJvbSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFjY3VtdWxhdGVkIHJlY29yZHMgdG8gcmVtb3ZlIGZyb21cbiAgICAgICAgICAgIGlmIChleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgcXVlcnlSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICBub3RlOiAnTm8gYWNjdW11bGF0ZWQgcmVjb3JkcyB0byByZW1vdmUgZnJvbSAtIG5vLW9wJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAvLyBObyBhY2N1bXVsYXRlZCByZWNvcmRzLCBzbyBub3RoaW5nIHRvIHJlbW92ZSAtIHNob3cgZW1wdHkgcmVzdWx0c1xuICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gW11cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnJlY29yZHMgJiYgcmVzdWx0LnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAvLyBSZW1vdmUgbWF0Y2hpbmcgcmVjb3JkcyBmcm9tIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nUmVjb3JkcyA9IHJlbW92ZVJlc3VsdHNGcm9tQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgb3V0cHV0RFMsIC8vIFVzZSBvdXRwdXREUyBmb3Iga2V5IGdlbmVyYXRpb25cbiAgICAgICAgICAgICAgICByZXN1bHQucmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlIC8vIFdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSByZW1haW5pbmdSZWNvcmRzXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBVcGRhdGUgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UocmVtYWluaW5nUmVjb3JkcylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHJlY29yZHMgZnJvbSBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9ucyAobWFwIGhpZ2hsaWdodGluZylcbiAgICAgICAgICAgICAgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKFxuICAgICAgICAgICAgICAgIHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIHJlc3VsdC5yZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgICAgb3V0cHV0RFNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1jb21wbGV0ZScsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBxdWVyeVJlY29yZHNDb3VudDogcmVzdWx0LnJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHJlbWFpbmluZ1JlY29yZHNDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcmVjb3Jkc1JlbW92ZWQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCAtIHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgICAgIHdpZGdldExldmVsUmVjb3Jkc1VwZGF0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgb3JpZ2luU2VsZWN0aW9uc1VwZGF0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIElmIGFsbCByZWNvcmRzIHJlbW92ZWQsIGF1dG8tY2xlYXIgKGNvbnNpc3RlbnQgd2l0aCB1c2VyIGV4cGVjdGF0aW9uKVxuICAgICAgICAgICAgICBpZiAocmVtYWluaW5nUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtYWxsLXJlY29yZHMtcmVtb3ZlZCcsXG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICBub3RlOiAnQWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgcmVtb3ZlZCAtIGF1dG8tY2xlYXJpbmcnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAvLyBDbGVhciB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoW10pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBRdWVyeSByZXR1cm5lZCBubyByZXN1bHRzIC0gbm90aGluZyB0byByZW1vdmVcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1uby1xdWVyeS1yZXN1bHRzJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG5vdGU6ICdRdWVyeSByZXR1cm5lZCBubyByZXN1bHRzIC0gbm8gcmVjb3JkcyB0byByZW1vdmUnXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC8vIEtlZXAgZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyBkaXNwbGF5ZWRcbiAgICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWVycm9yJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byBzaG93aW5nIHF1ZXJ5IHJlc3VsdHMgb24gZXJyb3JcbiAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSByZXN1bHQucmVjb3JkcyB8fCBbXVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gcmVtb3ZlIG1vZGU6JywgZXJyb3IpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIGNsZWFyIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShbXSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJlY29yZHNSZWYuY3VycmVudCA9IHJlY29yZHNUb0Rpc3BsYXlcbiAgICAgICAgLy8gUmVzZXQgc2VsZWN0aW9uIGZsYWcgZm9yIG5ldyBxdWVyeSByZXN1bHRzXG4gICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgXG4gICAgICAgIC8vIFNlbGVjdCByZWNvcmRzIGluIHRoZSBvdXRwdXQgRFNcbiAgICAgICAgLy8gRm9yIFwiQWRkIHRvXCIgbW9kZSwgc2VsZWN0IG1lcmdlZCByZWNvcmRzXG4gICAgICAgIC8vIEZvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSwgc2VsZWN0IHJlbWFpbmluZyByZWNvcmRzIChhbHJlYWR5IHVwZGF0ZWQgdmlhIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucylcbiAgICAgICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgc2VsZWN0IHF1ZXJ5IHJlc3VsdHNcbiAgICAgICAgaWYgKHJlY29yZHNUb0Rpc3BsYXkgJiYgcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGggPiAwICYmIGRzVG9Vc2UpIHtcbiAgICAgICAgICBjb25zdCByZWNvcmRJZHNUb1NlbGVjdCA9IHJlY29yZHNUb0Rpc3BsYXkubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUsIHNlbGVjdGlvbiB3YXMgYWxyZWFkeSB1cGRhdGVkIHZpYSByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnNcbiAgICAgICAgICAvLyBCdXQgd2Ugc3RpbGwgbmVlZCB0byBzZWxlY3QgaW4gdGhlIG91dHB1dERTIGZvciB3aWRnZXQgc3RhdGUgY29uc2lzdGVuY3lcbiAgICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICAgICAgLy8gU2VsZWN0aW9uIHdhcyBhbHJlYWR5IHVwZGF0ZWQgaW4gb3JpZ2luIERTcyB2aWEgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zXG4gICAgICAgICAgICAvLyBKdXN0IHVwZGF0ZSBvdXRwdXREUyBzZWxlY3Rpb24gZm9yIHdpZGdldCBzdGF0ZSBjb25zaXN0ZW5jeVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkc1RvVXNlLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGRzVG9Vc2Uuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkc1RvU2VsZWN0LCByZWNvcmRzVG9EaXNwbGF5IGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtb3V0cHV0LWRzLXNlbGVjdGlvbi11cGRhdGVkJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLW91dHB1dC1kcy1zZWxlY3Rpb24tZXJyb3InLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiTmV3XCIgbW9kZXMsIHNlbGVjdCByZWNvcmRzIG5vcm1hbGx5XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICAgICAgcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZHNUb1VzZSxcbiAgICAgICAgICAgICAgICByZWNvcmRJZHNUb1NlbGVjdCxcbiAgICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5IGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IHRydWUgLy8gTWFyayBhcyBzZWxlY3RlZFxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQnLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRJZHNUb1NlbGVjdC5sZW5ndGhcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHVibGlzaGluZyBzZWxlY3Rpb24gbWVzc2FnZScsIGVycm9yKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uICYmIHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgLy8gQWxsIHJlY29yZHMgcmVtb3ZlZCAtIGNsZWFyIHNlbGVjdGlvblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMoZHNUb1VzZSlcbiAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWFsbC1yZWNvcmRzLXJlbW92ZWQtc2VsZWN0aW9uLWNsZWFyZWQnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWNsZWFyLXNlbGVjdGlvbi1lcnJvcicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIHJlc3VsdCBjb3VudFxuICAgICAgICAvLyBGb3IgXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB1c2UgYWNjdW11bGF0ZWQvcmVtYWluaW5nIGNvdW50XG4gICAgICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIHVzZSBxdWVyeSBjb3VudFxuICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICAgIHNldFJlc3VsdENvdW50KHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFJlc3VsdENvdW50KHF1ZXJ5UmVzdWx0Q291bnQpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBleGlzdGluZyB6b29tVG9GZWF0dXJlIGRhdGEgYWN0aW9uIChzYW1lIGFzIGNsaWNraW5nIFwiWm9vbSBUb1wiIGluIHRoZSBtZW51KVxuICAgICAgICAvLyBVc2UgcnVudGltZSBwcmVmZXJlbmNlIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIGNvbmZpZyBzZXR0aW5nIChkZWZhdWx0cyB0byB0cnVlKVxuICAgICAgICBjb25zdCBzaG91bGRab29tID0gcnVudGltZVpvb21Ub1NlbGVjdGVkICE9PSB1bmRlZmluZWQgXG4gICAgICAgICAgPyBydW50aW1lWm9vbVRvU2VsZWN0ZWQgXG4gICAgICAgICAgOiAocXVlcnlJdGVtLnpvb21Ub1NlbGVjdGVkICE9PSBmYWxzZSlcbiAgICAgICAgXG4gICAgICAgIC8vIFVzZSB0aGUgb3V0cHV0IERTIGFuZCBtZXJnZWQgcmVjb3Jkc1xuICAgICAgICBjb25zdCByZWNvcmRzRm9yWm9vbSA9IHJlY29yZHNUb0Rpc3BsYXkgfHwgcmVzdWx0LnJlY29yZHNcbiAgICAgICAgY29uc3QgZHNGb3Jab29tID0gZHNUb1VzZSB8fCBvdXRwdXREU1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlY29yZHNGb3Jab29tICYmIHJlY29yZHNGb3Jab29tLmxlbmd0aCA+IDAgJiYgZHNGb3Jab29tICYmIHNob3VsZFpvb20pIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYSBkYXRhIHNldCBmcm9tIHRoZSBhcHByb3ByaWF0ZSBkYXRhIHNvdXJjZSBhbmQgcmVjb3Jkc1xuICAgICAgICAgIGNvbnN0IGRhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICAgICAgICBkYXRhU291cmNlOiBkc0Zvclpvb20sXG4gICAgICAgICAgICByZWNvcmRzOiByZWNvcmRzRm9yWm9vbSxcbiAgICAgICAgICAgIG5hbWU6IGRzRm9yWm9vbS5nZXRMYWJlbCgpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gR2V0IGF2YWlsYWJsZSBkYXRhIGFjdGlvbnMgYW5kIGZpbmQgdGhlIHpvb21Ub0ZlYXR1cmUgYWN0aW9uXG4gICAgICAgICAgcmV0dXJuIERhdGFBY3Rpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0U3VwcG9ydGVkQWN0aW9ucyhwcm9wcy53aWRnZXRJZCwgW2RhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3JkcylcbiAgICAgICAgICAgIC50aGVuKGFjdGlvbkNhdGVnb3JpZXMgPT4ge1xuICAgICAgICAgICAgICAvLyBMb29rIGZvciB6b29tVG9GZWF0dXJlIGFjdGlvbiBpbiBhbnkgY2F0ZWdvcnlcbiAgICAgICAgICAgICAgbGV0IHpvb21BY3Rpb246IGFueSA9IG51bGxcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBpbiBhY3Rpb25DYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9ucyA9IGFjdGlvbkNhdGVnb3JpZXNbY2F0ZWdvcnldXG4gICAgICAgICAgICAgICAgem9vbUFjdGlvbiA9IGFjdGlvbnMuZmluZCgoYWN0aW9uOiBhbnkpID0+IGFjdGlvbi5uYW1lID09PSAnem9vbVRvRmVhdHVyZScgfHwgYWN0aW9uLmlkID09PSAnem9vbVRvRmVhdHVyZScpXG4gICAgICAgICAgICAgICAgaWYgKHpvb21BY3Rpb24pIGJyZWFrXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoem9vbUFjdGlvbikge1xuICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgdGhlIHNhbWUgem9vbSBhY3Rpb24gdGhhdCB3b3JrcyB3aGVuIGNsaWNrZWQgbWFudWFsbHlcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YUFjdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5leGVjdXRlRGF0YUFjdGlvbih6b29tQWN0aW9uLCBbZGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzLCBwcm9wcy53aWRnZXRJZClcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHpvb20gdG8gZmVhdHVyZXMnXG4gICAgICAgICAgICAgIHNldFpvb21FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnWk9PTScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3pvb20tYWN0aW9uLWZhaWxlZCcsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXhlY3V0aW5nIHpvb21Ub0ZlYXR1cmUgZGF0YSBhY3Rpb24nLCBlcnJvcilcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpXG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBpZiAoc3BhdGlhbEZpbHRlcj8ubGF5ZXIgJiYgc3BhdGlhbEZpbHRlcj8uY2xlYXJBZnRlckFwcGx5KSB7XG4gICAgICAgICAgc3BhdGlhbEZpbHRlci5sYXllci5yZW1vdmVBbGwoKVxuICAgICAgICB9XG4gICAgICAgIHNldFN0YWdlKDEpXG4gICAgICAgIC8vIFRhYiBzd2l0Y2hpbmcgaXMgbm93IGhhbmRsZWQgYnkgdXNlRWZmZWN0IHRoYXQgd2F0Y2hlcyBmb3IgcmVzdWx0Q291bnQsIHJlY29yZHNSZWYuY3VycmVudCwgYW5kIHN0YWdlXG4gICAgICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSB3YWl0IGZvciBSZWFjdCB0byBhY3R1YWxseSByZW5kZXIgcmVzdWx0cyBiZWZvcmUgc3dpdGNoaW5nIHRhYnNcbiAgICAgICAgLy8gVGhpcyBtYXRjaGVzIHRoZSBiZWhhdmlvciBvZiBtYW51YWwgaW5wdXQgd2hlcmUgcmVzdWx0cyBhcmUgcmVuZGVyZWQgYmVmb3JlIHRhYiBzd2l0Y2hcbiAgICAgIH0pXG4gIH0sIFtjdXJyZW50SXRlbSwgcXVlcnlJdGVtLCBwcm9wcy53aWRnZXRJZCwgb3V0cHV0RFMsIGRlZmF1bHRQYWdlU2l6ZSwgcGFnaW5nVHlwZUluQ29uZmlnLCBsYXp5TG9hZEluaXRpYWxQYWdlU2l6ZSwgcHVibGlzaERhdGFDbGVhcmVkTXNnLCBjbGVhclJlc3VsdCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2VdKVxuXG4gIGNvbnN0IHsgdXNlQXR0cmlidXRlRmlsdGVyLCBzcWxFeHByT2JqLCB1c2VTcGF0aWFsRmlsdGVyLCBzcGF0aWFsRmlsdGVyVHlwZXMsIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IHNob3dBdHRyaWJ1dGVGaWx0ZXIgPSB1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwck9iaiAhPSBudWxsXG4gIGNvbnN0IHNob3dTcGF0aWFsRmlsdGVyID0gc3BhdGlhbEZpbHRlckVuYWJsZWQgJiYgdXNlU3BhdGlhbEZpbHRlciAmJiAoc3BhdGlhbEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgfHwgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSB8fCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMClcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrIGgtMTAwJywgY2xhc3NOYW1lLCB7IHdyYXBwZWQ6IHdyYXBwZWRJblBvcHBlciB9KX0gY3NzPXtjc3NgXG4gICAgICAke3N0eWxlfVxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGB9PlxuICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17dXNlT3V0cHV0RHN9IG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZU91dHB1dERhdGFTb3VyY2VDcmVhdGVkfSBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVPdXRwdXREYXRhU291cmNlSW5mb0NoYW5nZX0vPlxuICAgICAgXG4gICAgICB7LyogVGFiIE5hdmlnYXRpb24gLSBNb3ZlZCB0byB0b3AgKi99XG4gICAgICA8VGFic1xuICAgICAgICB2YWx1ZT17YWN0aXZlVGFifVxuICAgICAgICBvbkNoYW5nZT17KGlkKSA9PiBoYW5kbGVUYWJDaGFuZ2UoaWQgYXMgJ3F1ZXJ5JyB8ICdyZXN1bHRzJyl9XG4gICAgICAgIGZpbGw9e3RydWV9XG4gICAgICAgIHR5cGU9J3VuZGVybGluZSdcbiAgICAgICAga2VlcE1vdW50PXt0cnVlfVxuICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIGB9XG4gICAgICA+XG4gICAgICAgIDxUYWJcbiAgICAgICAgICBpZD0ncXVlcnknXG4gICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdxdWVyeVRhYicpfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktdGFza19fY29udGVudCcsIHtcbiAgICAgICAgICAgICAgW0ZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1NdOiBpc0luUG9wcGVyICYmIGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5J1xuICAgICAgICAgICAgfSl9IFxuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICBgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHsvKiBIZWFkZXIgd2l0aCBiYWNrIGJ1dHRvbiBhbmQgcXVlcnkgbGFiZWwgLSBRdWVyeSB0YWIgb25seSAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS1mb3JtX19oZWFkZXIgbXgtNCBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdpbi1wb3BwZXInOiBpc0luUG9wcGVyIH0pfSBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgcGFkZGluZzogNnB4IDA7XG4gICAgICAgICAgICAgIHBhZGRpbmctdG9wOiA4cHg7XG4gICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbmF2LWFjdGlvbiBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdkLW5vbmUnOiB3cmFwcGVkSW5Qb3BwZXIgfSl9PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncC0wIG1yLTInLCB7ICdkLW5vbmUnOiB0b3RhbCA9PT0gMSB8fCAhb25OYXZCYWNrIH0pfVxuICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uTmF2QmFja31cbiAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdiYWNrJyl9XG4gICAgICAgICAgICAgICAgICByZWY9e2JhY2tCdG5SZWZ9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPEFycm93TGVmdE91dGxpbmVkIGF1dG9GbGlwLz5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8UXVlcnlUYXNrTGFiZWwgaWNvbj17aWNvbn0gbmFtZT17ZGlzcGxheUxhYmVsID8gbmFtZSA6ICcnfSAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge3Jlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfSBwbGFjZW1lbnQ9J2JvdHRvbSc+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHJlZj17Y2xlYXJSZXN1bHRCdG5SZWZ9XG4gICAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9XG4gICAgICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtbC1hdXRvIHB5LTAnXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2NsZWFyUmVzdWx0fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhc2hPdXRsaW5lZCAvPlxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7LyogU2VhcmNoIExheWVyIC8gR3JvdXAgZHJvcGRvd25zIC0gc2hvdyBiYXNlZCBvbiBncm91cGluZyAqL31cbiAgICAgICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgZHJvcGRvd25zIGlmIG11bHRpcGxlIHF1ZXJpZXMgZXhpc3RcbiAgICAgICAgICAgICAgaWYgKCFxdWVyeUl0ZW1zIHx8IHF1ZXJ5SXRlbXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBCdWlsZCBmbGF0IGxpc3Qgb2YgYWxsIHF1ZXJpZXMgd2l0aCB0aGVpciBkaXNwbGF5IGluZm9cbiAgICAgICAgICAgICAgLy8gRm9yIGdyb3VwZWQgcXVlcmllcywgdXNlIGdyb3VwIGRpc3BsYXkgbmFtZSAob25seSBzaG93IG9uY2UgcGVyIGdyb3VwKVxuICAgICAgICAgICAgICBjb25zdCBxdWVyeU9wdGlvbnM6IEFycmF5PHtcbiAgICAgICAgICAgICAgICBjb25maWdJZDogc3RyaW5nXG4gICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xuICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHN0cmluZyB8IG51bGxcbiAgICAgICAgICAgICAgICBpbmRleDogbnVtYmVyXG4gICAgICAgICAgICAgIH0+ID0gW11cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFRyYWNrIHdoaWNoIGdyb3VwcyB3ZSd2ZSBhbHJlYWR5IGFkZGVkIHRvIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgICAgY29uc3QgYWRkZWRHcm91cHMgPSBuZXcgU2V0PHN0cmluZz4oKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcXVlcnlJdGVtcy5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBGb3IgZ3JvdXBlZCBxdWVyaWVzLCB1c2UgZ3JvdXAgZGlzcGxheSBuYW1lIChvbmx5IGFkZCBvbmNlIHBlciBncm91cClcbiAgICAgICAgICAgICAgICAgIGlmICghYWRkZWRHcm91cHMuaGFzKGl0ZW0uZ3JvdXBJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRHcm91cHMuYWRkKGl0ZW0uZ3JvdXBJZClcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBEaXNwbGF5TmFtZSA9IGdyb3Vwcz8uW2l0ZW0uZ3JvdXBJZF0/LmRpc3BsYXlOYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3Vwcz8uW2l0ZW0uZ3JvdXBJZF0/Lml0ZW1zWzBdPy5uYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ubmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgR3JvdXAgJHtpdGVtLmdyb3VwSWR9YFxuICAgICAgICAgICAgICAgICAgICBxdWVyeU9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGdyb3VwRGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogaXRlbS5ncm91cElkLFxuICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHhcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5IC0gdXNlIGl0ZW0ubmFtZSBmb3IgZmlyc3QgZHJvcGRvd24gKG5vdCBzZWFyY2hBbGlhcy9qaW11RmllbGROYW1lKVxuICAgICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBjb25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGl0ZW0ubmFtZSB8fCBnZXRRdWVyeURpc3BsYXlOYW1lKGl0ZW0pLFxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERldGVybWluZSBjdXJyZW50bHkgc2VsZWN0ZWQgcXVlcnlcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFF1ZXJ5SXRlbSA9IHF1ZXJ5SXRlbVxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UXVlcnlHcm91cElkID0gY3VycmVudFF1ZXJ5SXRlbS5ncm91cElkIHx8IG51bGxcbiAgICAgICAgICAgICAgY29uc3QgaXNHcm91cGVkUXVlcnkgPSBjdXJyZW50UXVlcnlHcm91cElkICE9PSBudWxsXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBvcHRpb24gaW5kZXggZm9yIHRoZSBjdXJyZW50IHF1ZXJ5XG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPcHRpb25JbmRleCA9IHF1ZXJ5T3B0aW9ucy5maW5kSW5kZXgob3B0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNHcm91cGVkUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBvcHQuZ3JvdXBJZCA9PT0gY3VycmVudFF1ZXJ5R3JvdXBJZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0LmNvbmZpZ0lkID09PSBjdXJyZW50UXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbmRlcmluZy1kcm9wZG93bnMnLFxuICAgICAgICAgICAgICAgIHRvdGFsUXVlcmllczogcXVlcnlJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zQ291bnQ6IHF1ZXJ5T3B0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXJ5R3JvdXBJZCxcbiAgICAgICAgICAgICAgICBpc0dyb3VwZWRRdWVyeSxcbiAgICAgICAgICAgICAgICBjdXJyZW50T3B0aW9uSW5kZXgsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LFxuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWVyeUNvbmZpZ0lkOiBjdXJyZW50UXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICB7LyogRmlyc3QgRHJvcGRvd246IEFsbCBxdWVyaWVzICovfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdzZWFyY2hMYXllcicpfVxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IFxuICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRPcHRpb25JbmRleCA+PSAwID8gY3VycmVudE9wdGlvbkluZGV4IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IHF1ZXJ5T3B0aW9uc1tvcHRpb25JbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1vcHRpb24tc2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzR3JvdXBlZDogc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZCAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JvdXBlZCBxdWVyeSBzZWxlY3RlZCAtIHNldCBncm91cCBhbmQgZmlyc3QgcXVlcnkgaW4gZ3JvdXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwQ2hhbmdlKHNlbGVjdGVkT3B0aW9uLmdyb3VwSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBRdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZSgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmdyb3VwZWQgcXVlcnkgc2VsZWN0ZWQgLSBjbGVhciBncm91cCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwQ2hhbmdlKG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uVW5ncm91cGVkQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdW5ncm91cGVkIGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdW5ncm91cGVkSW5kZXggPSB1bmdyb3VwZWQ/LmZpbmRJbmRleCgoeyBpdGVtIH0pID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jb25maWdJZCA9PT0gc2VsZWN0ZWRPcHRpb24uY29uZmlnSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApID8/IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuZ3JvdXBlZEluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVW5ncm91cGVkQ2hhbmdlKHVuZ3JvdXBlZEluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjazogdXNlIHRoZSBpbmRleCBmcm9tIHF1ZXJ5SXRlbXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAndW5ncm91cGVkLWZhbGxiYWNrLXRvLWluZGV4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb25JbmRleDogc2VsZWN0ZWRPcHRpb24uaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25RdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblF1ZXJ5Q2hhbmdlKHNlbGVjdGVkT3B0aW9uLmluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7cXVlcnlPcHRpb25zLm1hcCgob3B0aW9uLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAncmVuZGVyaW5nLXF1ZXJ5LW9wdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBvcHRpb24uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBvcHRpb24uZGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG9wdGlvbi5ncm91cElkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e29wdGlvbi5jb25maWdJZH0gdmFsdWU9e2lkeH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge29wdGlvbi5kaXNwbGF5TmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsvKiBTZWNvbmQgRHJvcGRvd246IFF1ZXJpZXMgd2l0aGluIHNlbGVjdGVkIGdyb3VwIChvbmx5IGlmIGdyb3VwZWQgcXVlcnkgc2VsZWN0ZWQpICovfVxuICAgICAgICAgICAgICAgICAge2lzR3JvdXBlZFF1ZXJ5ICYmIGN1cnJlbnRRdWVyeUdyb3VwSWQgJiYgZ3JvdXBzICYmIGdyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgICBTZWFyY2ggQWxpYXNcbiAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QgXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlbGVjdGVkR3JvdXBRdWVyeUluZGV4ICE9PSB1bmRlZmluZWQgPyBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SW5kZXggPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2dyb3VwLXF1ZXJ5LXNlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBjdXJyZW50UXVlcnlHcm91cElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwUXVlcnlJbmRleDogbmV3SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGdyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXS5pdGVtc1tuZXdJbmRleF0/LmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5RGlzcGxheU5hbWU6IGdldFF1ZXJ5RGlzcGxheU5hbWUoZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zW25ld0luZGV4XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBRdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZShuZXdJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zLm1hcCgoaXRlbSwgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpdGVtLmNvbmZpZ0lkfSB2YWx1ZT17aWR4fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7LyogUmVzdWx0cyBNb2RlIEJ1dHRvbiBHcm91cCAtIEFsd2F5cyBzaG93LCByZWdhcmRsZXNzIG9mIHF1ZXJ5IGNvdW50ICovfVxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDE2cHggNHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtci0yIHRpdGxlMlwiIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHMnKX06XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIGNzcz17Y3NzYHdoaXRlLXNwYWNlOiBwcmUtbGluZTtgfSB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIGljb24gdHlwZT0ndGVydGlhcnknIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbmZvT3V0bGluZWQgY29sb3I9J3ZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pJyBzaXplPSdzJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJyYWRpb2dyb3VwXCJcbiAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGUnKX1cbiAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xuICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uID8gJ2NvbnRhaW5lZCcgOiAnb3V0bGluZWQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnYnV0dG9uLW1vZGUtY2hhbmdlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlOiByZXN1bHRzTW9kZSB8fCBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblJlc3VsdHNNb2RlQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZShuZXdNb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtnZXRJMThuTWVzc2FnZSgnY3JlYXRlTmV3UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzFdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY3JlYXRlTmV3UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVOZXcnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gPyAnY29udGFpbmVkJyA6ICdvdXRsaW5lZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gPyAncHJpbWFyeScgOiAnZGVmYXVsdCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld01vZGUgPSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzTW9kZSA9IHJlc3VsdHNNb2RlIHx8IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2J1dHRvbi1tb2RlLWNoYW5nZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBzd2l0Y2hpbmcgRlJPTSBcIk5ld1wiIFRPIFwiQWRkIHRvXCIgbW9kZSBhbmQgd2UgaGF2ZSBjdXJyZW50IHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHRoZW0gd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGJlZm9yZSBjaGFuZ2luZyBtb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1JlZi5jdXJyZW50ICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1JlZi5jdXJyZW50Lmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSZWNvcmRzID0gcmVjb3Jkc1JlZi5jdXJyZW50IGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0FjY3VtdWxhdGVkID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgY3VycmVudCByZXN1bHRzIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjYXB0dXJpbmctY3VycmVudC1yZXN1bHRzLW9uLW1vZGUtc3dpdGNoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmVjb3Jkc0NvdW50OiBjdXJyZW50UmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWQubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUmVjb3Jkc0NvdW50OiBtZXJnZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UobWVyZ2VkUmVjb3JkcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVzdWx0c01vZGVDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlKG5ld01vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YCR7Z2V0STE4bk1lc3NhZ2UoJ2FkZFRvQ3VycmVudFJlc3VsdHMnKX06ICR7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpLnNwbGl0KCdcXG4nKVsyXT8udHJpbSgpIHx8ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ2FkZFRvQ3VycmVudFJlc3VsdHMnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlQWRkJyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24gPyAnY29udGFpbmVkJyA6ICdvdXRsaW5lZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshYWNjdW11bGF0ZWRSZWNvcmRzIHx8IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld01vZGUgPSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNNb2RlID0gcmVzdWx0c01vZGUgfHwgU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnYnV0dG9uLW1vZGUtY2hhbmdlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHN3aXRjaGluZyBGUk9NIFwiTmV3XCIgVE8gXCJSZW1vdmUgZnJvbVwiIG1vZGUgYW5kIHdlIGhhdmUgY3VycmVudCByZXN1bHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtZXJnZSB0aGVtIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyBiZWZvcmUgY2hhbmdpbmcgbW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAoc2FtZSBwYXR0ZXJuIGFzIFwiQWRkIHRvXCIgbW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNSZWYuY3VycmVudCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNSZWYuY3VycmVudC5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UmVjb3JkcyA9IHJlY29yZHNSZWYuY3VycmVudCBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBY2N1bXVsYXRlZCA9IGFjY3VtdWxhdGVkUmVjb3JkcyB8fCBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1lcmdlIGN1cnJlbnQgcmVzdWx0cyB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRSZWNvcmRzID0gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnY2FwdHVyaW5nLWN1cnJlbnQtcmVzdWx0cy1vbi1tb2RlLXN3aXRjaC10by1yZW1vdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRzQ291bnQ6IGN1cnJlbnRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWNvcmRzQ291bnQ6IG1lcmdlZFJlY29yZHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShtZXJnZWRSZWNvcmRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25SZXN1bHRzTW9kZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2UobmV3TW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake2dldEkxOG5NZXNzYWdlKCdyZW1vdmVGcm9tQ3VycmVudFJlc3VsdHMnKX06ICR7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpLnNwbGl0KCdcXG4nKVszXT8udHJpbSgpIHx8ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17KCFhY2N1bXVsYXRlZFJlY29yZHMgfHwgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMCkgXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGlzYWJsZWRSZW1vdmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGdldEkxOG5NZXNzYWdlKCdyZW1vdmVGcm9tQ3VycmVudFJlc3VsdHMnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlUmVtb3ZlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICAgIGlkPXtgcmVzdWx0cy1tb2RlLWRlc2NyaXB0aW9uLSR7cHJvcHMud2lkZ2V0SWR9YH1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzci1vbmx5XCJcbiAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxpdmU9XCJwb2xpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJzdGF0dXNcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gZ2V0STE4bk1lc3NhZ2UoJ2NyZWF0ZU5ld1Jlc3VsdHMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGdldEkxOG5NZXNzYWdlKCdyZW1vdmVGcm9tQ3VycmVudFJlc3VsdHMnKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAge2VuYWJsZWQgJiYgZHNFeGlzdHMgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgIDxRdWVyeVRhc2tGb3JtXG4gICAgICAgICAgICAgICAgICAgIHsuLi5vdGhlclByb3BzfVxuICAgICAgICAgICAgICAgICAgICBjb25maWdJZD17cXVlcnlJdGVtLmNvbmZpZ0lkfVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXREUz17b3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgICAgIGRhdGFzb3VyY2VSZWFkeT17ZGF0YVNvdXJjZSAhPSBudWxsfVxuICAgICAgICAgICAgICAgICAgICBzcGF0aWFsRmlsdGVyRW5hYmxlZD17c3BhdGlhbEZpbHRlckVuYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgIGRhdGFBY3Rpb25GaWx0ZXIgPSB7ZGF0YUFjdGlvbkZpbHRlcn1cbiAgICAgICAgICAgICAgICAgICAgb25Gb3JtU3VibWl0PXtoYW5kbGVGb3JtU3VibWl0fVxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZT17aW5pdGlhbElucHV0VmFsdWV9XG4gICAgICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e29uSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ9e3F1ZXJ5SXRlbS5zaG9ydElkfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPERhdGFTb3VyY2VUaXBcbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17cHJvcHMud2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgdXNlRGF0YVNvdXJjZT17cXVlcnlJdGVtLnVzZURhdGFTb3VyY2V9XG4gICAgICAgICAgICAgICAgc2hvd01lc3NhZ2U9e3RydWV9XG4gICAgICAgICAgICAgICAgb25TdGF0dXNDaGFuZ2U9e2hhbmRsZVN0YXR1c0NoYW5nZX1cbiAgICAgICAgICAgICAgICBvbkRhdGFTb3VyY2VDcmVhdGVkPXtoYW5kbGVEYXRhU291cmNlQ3JlYXRlZH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L1RhYj5cbiAgICAgICAgPFRhYlxuICAgICAgICAgIGlkPSdyZXN1bHRzJ1xuICAgICAgICAgIHRpdGxlPXtcbiAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNUYWInKX1cbiAgICAgICAgICAgICAge3Jlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgKHtyZXN1bHRDb3VudH0pXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIH1cbiAgICAgICAgICBkaXNhYmxlZD17cmVzdWx0Q291bnQgPT09IDB9XG4gICAgICAgID5cbiAgICAgICAgICB7cmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktdGFza19fY29udGVudCcsIHtcbiAgICAgICAgICAgICAgICBbRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU106IGlzSW5Qb3BwZXIgJiYgYWN0aXZlVGFiID09PSAncmVzdWx0cydcbiAgICAgICAgICAgICAgfSl9IFxuICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nLXRvcDogMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgY2xpY2tzIGZyb20gYnViYmxpbmcgdXAgd2hlbiBSZXN1bHRzIHRhYiBpcyBhY3RpdmVcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVGFiID09PSAncmVzdWx0cycpIHtcbiAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxRdWVyeVRhc2tSZXN1bHRcbiAgICAgICAgICAgICAgICBrZXk9e2Ake3F1ZXJ5SXRlbS5jb25maWdJZH0tJHtxdWVyeUV4ZWN1dGlvbktleVJlZi5jdXJyZW50fWB9XG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3Byb3BzLndpZGdldElkfVxuICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbT17cXVlcnlJdGVtfVxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zPXtxdWVyeVBhcmFtUmVmLmN1cnJlbnR9XG4gICAgICAgICAgICAgICAgcmVzdWx0Q291bnQ9e3Jlc3VsdENvdW50fVxuICAgICAgICAgICAgICAgIG1heFBlclBhZ2U9eyhkYXRhU291cmNlIGFzIFF1ZXJpYWJsZURhdGFTb3VyY2UpPy5nZXRNYXhSZWNvcmRDb3VudD8uKCl9XG4gICAgICAgICAgICAgICAgcmVjb3Jkcz17cmVjb3Jkc1JlZi5jdXJyZW50fVxuICAgICAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfVxuICAgICAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ9e2xhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYuY3VycmVudH1cbiAgICAgICAgICAgICAgICBvbk5hdkJhY2s9eyhjbGVhclJlc3VsdHMgPSBmYWxzZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG5hdmlnYXRpb24gZnJvbSBRdWVyeVRhc2tSZXN1bHRcbiAgICAgICAgICAgICAgICAgIC8vIElmIGNsZWFyUmVzdWx0cyBpcyB0cnVlLCBjbGVhciBldmVyeXRoaW5nIGFuZCBnbyB0byBxdWVyeSB0YWJcbiAgICAgICAgICAgICAgICAgIC8vIElmIGZhbHNlLCBqdXN0IHN3aXRjaCB0byBxdWVyeSB0YWIgd2l0aG91dCBjbGVhcmluZ1xuICAgICAgICAgICAgICAgICAgaWYgKGNsZWFyUmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IGZsYWcgd2hlbiBjbGVhcmluZ1xuICAgICAgICAgICAgICAgICAgICBuYXZUb0Zvcm0odHJ1ZSlcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEp1c3Qgc3dpdGNoIHRhYnMsIGRvbid0IGNsZWFyIHJlc3VsdHNcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBhcyBtYW51YWwgc3dpdGNoIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgICAgICAgICAgICAgICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L1RhYj5cbiAgICAgIDwvVGFicz5cblxuICAgICAgey8qIEVycm9yIE1lc3NhZ2VzICovfVxuICAgICAgeyhzZWxlY3Rpb25FcnJvciB8fCB6b29tRXJyb3IpICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICBwYWRkaW5nOiAwIDE2cHg7XG4gICAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICBgfT5cbiAgICAgICAgICB7c2VsZWN0aW9uRXJyb3IgJiYgKFxuICAgICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgICAgZXJyb3I9e3NlbGVjdGlvbkVycm9yfSBcbiAgICAgICAgICAgICAgb25EaXNtaXNzPXsoKSA9PiBzZXRTZWxlY3Rpb25FcnJvcihudWxsKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7em9vbUVycm9yICYmIChcbiAgICAgICAgICAgIDxFcnJvck1lc3NhZ2UgXG4gICAgICAgICAgICAgIGVycm9yPXt6b29tRXJyb3J9IFxuICAgICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFpvb21FcnJvcihudWxsKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogTG9hZGluZyBJbmRpY2F0b3IgLSBvdmVybGF5cyBvbiB0b3Agb2YgdGFicyAqL31cbiAgICAgIHtzdGFnZSA9PT0gMiAmJiAoXG4gICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgICB6LWluZGV4OiAxMDAwO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGB9PlxuICAgICAgICAgIDxMb2FkaW5nUmVzdWx0IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHtcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBJTVNxbEV4cHJlc3Npb24sXG4gIHR5cGUgRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMsXG4gIE1lc3NhZ2VNYW5hZ2VyLFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlLFxuICBSZWNvcmRTZXRDaGFuZ2VUeXBlLFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICBkYXRhU291cmNlVXRpbHNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBJRmllbGRJbmZvIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCBTcGF0aWFsUmVsYXRpb24sIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgRmllbGRzVHlwZSwgbWFwSlNBUElVbml0VG9Ec1VuaXQsIG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgZ2V0RmllbGRJbmZvc0luUG9wdXBDb250ZW50IH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmV4cG9ydCBmdW5jdGlvbiBjb21iaW5lRmllbGRzIChyZXN1bHREaXNwbGF5RmllbGRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+LCByZXN1bHRUaXRsZUV4cHJlc3Npb246IHN0cmluZywgaWRGaWVsZD86IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgZmllbGRzID0gbmV3IFNldDxzdHJpbmc+KClcbiAgcmVzdWx0RGlzcGxheUZpZWxkcz8uZm9yRWFjaChpdGVtID0+IGZpZWxkcy5hZGQoaXRlbSkpXG4gIGlmIChyZXN1bHRUaXRsZUV4cHJlc3Npb24pIHtcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSByZXN1bHRUaXRsZUV4cHJlc3Npb24ubWF0Y2goL1xce1xcdypcXH0vZylcbiAgICBpZiAodGVtcGxhdGVzPy5sZW5ndGggPiAwKSB7XG4gICAgICB0ZW1wbGF0ZXMuZm9yRWFjaChpdGVtID0+IGZpZWxkcy5hZGQoaXRlbS5zdWJzdHJpbmcoMSwgaXRlbS5sZW5ndGggLSAxKSkpXG4gICAgfVxuICB9XG4gIGlmIChpZEZpZWxkKSB7XG4gICAgZmllbGRzLmFkZChpZEZpZWxkKVxuICB9XG4gIHJldHVybiBBcnJheS5mcm9tKGZpZWxkcylcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBvcHVwVGVtcGxhdGUgKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbik6IFByb21pc2U8eyBwb3B1cFRlbXBsYXRlPzogX19lc3JpLlBvcHVwVGVtcGxhdGUsIGRlZmF1bHRQb3B1cFRlbXBsYXRlPzogX19lc3JpLlBvcHVwVGVtcGxhdGUgfT4ge1xuICBjb25zdCB7IHJlc3VsdEZpZWxkc1R5cGUsIHJlc3VsdERpc3BsYXlGaWVsZHMsIHJlc3VsdFRpdGxlRXhwcmVzc2lvbiA9ICcnIH0gPSBxdWVyeUl0ZW1cbiAgY29uc3QgY3VycmVudE9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIGNvbnN0IHBvcHVwSW5mbyA9IGN1cnJlbnRPcmlnaW5Ecy5nZXRQb3B1cEluZm8oKVxuXG4gIGlmIChyZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMpIHtcbiAgICBsZXQgZmllbGRzOiBzdHJpbmdbXVxuICAgIGlmIChyZXN1bHREaXNwbGF5RmllbGRzID09IG51bGwpIHtcbiAgICAgIGNvbnN0IGZpZWxkc0luQ29udGVudCA9IGdldEZpZWxkSW5mb3NJblBvcHVwQ29udGVudChwb3B1cEluZm8pXG4gICAgICBpZiAoZmllbGRzSW5Db250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdW5pcXVlRmllbGRzID0gbmV3IFNldChmaWVsZHNJbkNvbnRlbnQubWFwKGVsZSA9PiBlbGUuZmllbGROYW1lKSlcbiAgICAgICAgZmllbGRzID0gQXJyYXkuZnJvbSh1bmlxdWVGaWVsZHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyByZXR1cm4gYWxsIGZpZWxkcyBieSBkZWZhdWx0XG4gICAgICAgIGNvbnN0IGFsbEZpZWxkc1NjaGVtYSA9IG91dHB1dERTLmdldFNjaGVtYSgpXG4gICAgICAgIGZpZWxkcyA9IGFsbEZpZWxkc1NjaGVtYT8uZmllbGRzID8gT2JqZWN0LnZhbHVlcyhhbGxGaWVsZHNTY2hlbWEuZmllbGRzKS5tYXAoZmllbGQgPT4gZmllbGQuamltdU5hbWUpIDogW11cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZmllbGRzID0gcmVzdWx0RGlzcGxheUZpZWxkcy5hc011dGFibGUoeyBkZWVwOiB0cnVlIH0pXG4gICAgfVxuICAgIGlmIChwb3B1cEluZm8pIHtcbiAgICAgIGNvbnN0IGZpZWxkSW5mb3MgPSBbXVxuICAgICAgZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgICBjb25zdCBmaWVsZEluZm8gPSBwb3B1cEluZm8uZmllbGRJbmZvcy5maW5kKGZpZWxkSW5mbyA9PiBmaWVsZEluZm8uZmllbGROYW1lID09PSBmaWVsZClcbiAgICAgICAgaWYgKGZpZWxkSW5mbykge1xuICAgICAgICAgIGZpZWxkSW5mby52aXNpYmxlID0gdHJ1ZVxuICAgICAgICAgIGZpZWxkSW5mb3MucHVzaChmaWVsZEluZm8pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmllbGRJbmZvcy5wdXNoKHtcbiAgICAgICAgICAgIGZpZWxkTmFtZTogZmllbGQsXG4gICAgICAgICAgICBsYWJlbDogZmllbGRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcG9wdXBUZW1wbGF0ZToge1xuICAgICAgICAgIGZpZWxkSW5mb3MsXG4gICAgICAgICAgY29udGVudDogW3tcbiAgICAgICAgICAgIHR5cGU6ICdmaWVsZHMnXG4gICAgICAgICAgfV0sXG4gICAgICAgICAgdGl0bGU6IHJlc3VsdFRpdGxlRXhwcmVzc2lvblxuICAgICAgICB9XG4gICAgICB9IGFzIGFueVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcG9wdXBUZW1wbGF0ZToge1xuICAgICAgICBmaWVsZEluZm9zOiBmaWVsZHMubWFwKGZpZWxkID0+ICh7XG4gICAgICAgICAgZmllbGROYW1lOiBmaWVsZCxcbiAgICAgICAgICBsYWJlbDogZmllbGRcbiAgICAgICAgfSkpLFxuICAgICAgICBjb250ZW50OiBbe1xuICAgICAgICAgIHR5cGU6ICdmaWVsZHMnXG4gICAgICAgIH1dLFxuICAgICAgICB0aXRsZTogcmVzdWx0VGl0bGVFeHByZXNzaW9uXG4gICAgICB9IGFzIGFueVxuICAgIH1cbiAgfVxuICAvLyB0aGUgc291cmNlIGxheWVyIHdpbGwgcHJvdmlkZSBwb3B1cCBpbmZvXG4gIGxldCBsYXllck9iamVjdFxuICBpZiAoY3VycmVudE9yaWdpbkRzLmxheWVyKSB7XG4gICAgbGF5ZXJPYmplY3QgPSBjdXJyZW50T3JpZ2luRHMubGF5ZXJcbiAgfSBlbHNlIHtcbiAgICBsYXllck9iamVjdCA9IGF3YWl0IGN1cnJlbnRPcmlnaW5Ecy5jcmVhdGVKU0FQSUxheWVyQnlEYXRhU291cmNlKClcbiAgfVxuICBpZiAobGF5ZXJPYmplY3QpIHtcbiAgICBhd2FpdCBsYXllck9iamVjdC5sb2FkKClcbiAgfVxuICByZXR1cm4geyBkZWZhdWx0UG9wdXBUZW1wbGF0ZTogbGF5ZXJPYmplY3Q/LmFzc29jaWF0ZWRMYXllcj8uZGVmYXVsdFBvcHVwVGVtcGxhdGUgfHwgbGF5ZXJPYmplY3Q/LmRlZmF1bHRQb3B1cFRlbXBsYXRlIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUXVlcnlQYXJhbXMgKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uLFxuICBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqLFxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPixcbiAgcGFnZTogbnVtYmVyLFxuICBwYWdlU2l6ZTogbnVtYmVyXG4pOiBRdWVyeVBhcmFtcyB7XG4gIGNvbnN0IGN1cnJlbnRRdWVyeURzSnNvbiA9IG91dHB1dERTLmdldERhdGFTb3VyY2VKc29uKClcbiAgY29uc3QgY3VycmVudE9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIGNvbnN0IGlzTG9jYWxEcyA9IGN1cnJlbnRRdWVyeURzSnNvbj8uaXNEYXRhSW5EYXRhU291cmNlSW5zdGFuY2VcbiAgaWYgKGlzTG9jYWxEcykge1xuICAgIG91dHB1dERTLnNldFNvdXJjZVJlY29yZHMoY3VycmVudE9yaWdpbkRzLmdldFNvdXJjZVJlY29yZHMoKSlcbiAgfVxuXG4gIGNvbnN0IHsgdXNlQXR0cmlidXRlRmlsdGVyLCB1c2VTcGF0aWFsRmlsdGVyLCBzb3J0T3B0aW9ucywgcmVzdWx0RmllbGRzVHlwZSwgcmVzdWx0RGlzcGxheUZpZWxkcywgcmVzdWx0VGl0bGVFeHByZXNzaW9uIH0gPSBxdWVyeUl0ZW1cbiAgbGV0IG91dHB1dEZpZWxkczogc3RyaW5nW10gfCBJbW11dGFibGVBcnJheTxzdHJpbmc+ID0gcmVzdWx0RGlzcGxheUZpZWxkc1xuICBpZiAocmVzdWx0RGlzcGxheUZpZWxkcyA9PSBudWxsKSB7XG4gICAgLy8gcmV0dXJuIGFsbCBmaWVsZHMgYnkgZGVmYXVsdFxuICAgIGNvbnN0IGFsbEZpZWxkc1NjaGVtYSA9IG91dHB1dERTLmdldFNjaGVtYSgpXG4gICAgb3V0cHV0RmllbGRzID0gYWxsRmllbGRzU2NoZW1hPy5maWVsZHMgPyBPYmplY3QudmFsdWVzKGFsbEZpZWxkc1NjaGVtYS5maWVsZHMpLm1hcChmaWVsZCA9PiBmaWVsZC5qaW11TmFtZSkgOiBbXVxuICB9XG4gIGNvbnN0IG1lcmdlZFF1ZXJ5UGFyYW1zID0gb3V0cHV0RFMubWVyZ2VRdWVyeVBhcmFtcyhjdXJyZW50T3JpZ2luRHMuZ2V0Q3VycmVudFF1ZXJ5UGFyYW1zKCkgPz8ge30sIHtcbiAgICB3aGVyZTogKHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByPy5zcWwpID8gZGF0YVNvdXJjZVV0aWxzLmdldEFyY0dJU1NRTChzcWxFeHByLCBvdXRwdXREUykuc3FsIDogJzE9MScsXG4gICAgc3FsRXhwcmVzc2lvbjogKHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByPy5zcWwpID8gc3FsRXhwciA6IG51bGxcbiAgfSBhcyBhbnkpXG5cbiAgLy8gY29tcG9zZSBxdWVyeSBwYXJhbXMgZm9yIHF1ZXJ5XG4gIGNvbnN0IHF1ZXJ5UGFyYW1zOiBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyA9IHtcbiAgICAvLyB1cmw6IGRzLnVybCxcbiAgICByZXR1cm5HZW9tZXRyeTogdHJ1ZSxcbiAgICBwYWdlLFxuICAgIHBhZ2VTaXplLFxuICAgIC4uLm1lcmdlZFF1ZXJ5UGFyYW1zXG4gIH1cbiAgaWYgKHVzZVNwYXRpYWxGaWx0ZXIgJiYgc3BhdGlhbEZpbHRlcj8uZ2VvbWV0cnkpIHtcbiAgICBjb25zdCB7IGdlb21ldHJ5LCByZWxhdGlvbiA9IFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3QsIGJ1ZmZlciB9ID0gc3BhdGlhbEZpbHRlclxuXG4gICAgY29uc3Qgc3BhdGlhbFF1ZXJ5UGFyYW1zOiBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyA9IHtcbiAgICAgIGdlb21ldHJ5VHlwZTogZGF0YVNvdXJjZVV0aWxzLmNoYW5nZUpTQVBJR2VvbWV0cnlUeXBlVG9SZXN0QVBJR2VvbWV0cnlUeXBlKGdlb21ldHJ5LnR5cGUpLFxuICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LnRvSlNPTigpLFxuICAgICAgc3BhdGlhbFJlbDogbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWxbcmVsYXRpb25dLFxuICAgICAgZGlzdGFuY2U6IGJ1ZmZlcj8uZGlzdGFuY2UsXG4gICAgICB1bml0czogYnVmZmVyPy51bml0ID8gbWFwSlNBUElVbml0VG9Ec1VuaXRbYnVmZmVyLnVuaXRdIDogdW5kZWZpbmVkXG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHNwYXRpYWxRdWVyeVBhcmFtcylcbiAgfVxuXG4gIGlmIChzb3J0T3B0aW9ucz8ubGVuZ3RoID4gMCkge1xuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHtcbiAgICAgIG9yZGVyQnlGaWVsZHM6IHNvcnRPcHRpb25zLm1hcChpdGVtID0+IGAke2l0ZW0uamltdUZpZWxkTmFtZX0gJHtpdGVtLm9yZGVyfWApXG4gICAgfSlcbiAgfVxuXG4gIGlmIChyZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMpIHtcbiAgICBjb25zdCBmaWVsZHMgPSBjb21iaW5lRmllbGRzKG91dHB1dEZpZWxkcyBhcyBhbnksIHJlc3VsdFRpdGxlRXhwcmVzc2lvbiwgb3V0cHV0RFMuZ2V0SWRGaWVsZCgpKVxuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHtcbiAgICAgIG91dEZpZWxkczogZmllbGRzXG4gICAgfSlcbiAgfSBlbHNlIHtcbiAgICAvLyB1c2UgcG9wdXAgc2V0dGluZ1xuICAgIGNvbnN0IHBvcHVwSW5mbyA9IGN1cnJlbnRPcmlnaW5Ecy5nZXRQb3B1cEluZm8oKVxuICAgIC8vIHBvcHVwSW5mbyBtYXkgaGF2ZSBleHByZXNzaW9ucyBpbiBpdHMgZmllbGRJbmZvc1xuICAgIGNvbnN0IGZpZWxkTmFtZXMgPSBPYmplY3QudmFsdWVzKGN1cnJlbnRPcmlnaW5Ecy5nZXRTY2hlbWEoKS5maWVsZHMgPz8ge30pLm1hcChmID0+IGYubmFtZSlcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWJvb2xlYW4tbGl0ZXJhbC1jb21wYXJlXG4gICAgY29uc3QgdmFsaWRGaWVsZEluZm9zID0gcG9wdXBJbmZvPy5maWVsZEluZm9zPy5maWx0ZXIoZmllbGRJbmZvID0+IGZpZWxkSW5mby52aXNpYmxlICE9PSBmYWxzZSAmJiBmaWVsZE5hbWVzLmluY2x1ZGVzKGZpZWxkSW5mby5maWVsZE5hbWUpKVxuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHtcbiAgICAgIG91dEZpZWxkczogdmFsaWRGaWVsZEluZm9zPy5tYXAoZmllbGRJbmZvID0+IGZpZWxkSW5mby5maWVsZE5hbWUpXG4gICAgfSlcbiAgfVxuICByZXR1cm4gcXVlcnlQYXJhbXNcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVDb3VudFF1ZXJ5IChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHF1ZXJ5UGFyYW1zOiBRdWVyeVBhcmFtc1xuKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3V0cHV0RFMubG9hZENvdW50KHF1ZXJ5UGFyYW1zLCB7IHdpZGdldElkLCByZWZyZXNoOiB0cnVlIH0pXG4gIHJldHVybiByZXN1bHQgIT0gbnVsbCA/IHJlc3VsdCA6IDBcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVRdWVyeSAoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4pOiBQcm9taXNlPHsgcmVjb3Jkcz86IERhdGFSZWNvcmRbXSwgZmllbGRzPzogc3RyaW5nW10gfT4ge1xuICBjb25zdCBwb3B1cEluZm8gPSBvdXRwdXREUy5nZXRQb3B1cEluZm8oKVxuXG4gIGNvbnN0IGxheWVyRGVmaW5pdGlvbiA9IG91dHB1dERTLmdldExheWVyRGVmaW5pdGlvbigpXG4gIGNvbnN0IGdldERlZmF1bHRGaWVsZEluZm9zID0gKCkgPT5cbiAgICBbXG4gICAgICB7IGZpZWxkTmFtZTogbGF5ZXJEZWZpbml0aW9uPy5vYmplY3RJZEZpZWxkID8/ICdvYmplY3RpZCcsIGxhYmVsOiAnT0JKRUNUSUQnLCB0b29sdGlwOiAnJywgdmlzaWJsZTogdHJ1ZSB9XG4gICAgXSBhcyBJRmllbGRJbmZvW11cbiAgY29uc3QgZmllbGRJbmZvcyA9ICgoZmllbGRJbmZvcykgPT4gKGZpZWxkSW5mb3MubGVuZ3RoID8gZmllbGRJbmZvcyA6IGdldERlZmF1bHRGaWVsZEluZm9zKCkpKShcbiAgICAocG9wdXBJbmZvPy5maWVsZEluZm9zIHx8IFtdKS5maWx0ZXIoKGkpID0+IGkudmlzaWJsZSlcbiAgKVxuICAvLyBjb25zdCBmaWVsZHMgPSBvdXRwdXREUy5nZXRTY2hlbWEoKT8uZmllbGRzXG4gIC8vIGxldCBzZWxlY3RlZEZpZWxkTmFtZXNcbiAgLy8gaWYgKHF1ZXJ5SXRlbS5yZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMpIHtcbiAgLy8gICBzZWxlY3RlZEZpZWxkTmFtZXMgPSBbXS5jb25jYXQocXVlcnlJdGVtLnJlc3VsdERpc3BsYXlGaWVsZHMsIHF1ZXJ5SXRlbS5yZXN1bHRUaXRsZUZpZWxkcylcbiAgLy8gfSBlbHNlIHtcbiAgLy8gICBzZWxlY3RlZEZpZWxkTmFtZXMgPSBmaWVsZEluZm9zLm1hcCgoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICAvLyB9XG4gIC8vIGNvbnN0IHNlbGVjdGVkRmllbGRKaW11TmFtZXMgPSBmaWVsZHNcbiAgLy8gICA/IE9iamVjdC5rZXlzKGZpZWxkcykuZmlsdGVyKChqaW11TmFtZSkgPT4gc2VsZWN0ZWRGaWVsZE5hbWVzLmluY2x1ZGVzKGZpZWxkc1tqaW11TmFtZV0ubmFtZSkpXG4gIC8vICAgOiBbXVxuICAvLyBvdXRwdXREUy5zZXRTZWxlY3RlZEZpZWxkcyhzZWxlY3RlZEZpZWxkSmltdU5hbWVzKVxuICBsZXQgcmVjb3JkcyA9IGF3YWl0IG91dHB1dERTLmxvYWQocXVlcnlQYXJhbXMsIHsgd2lkZ2V0SWQgfSlcbiAgaWYgKHJlY29yZHMgPT0gbnVsbCkge1xuICAgIHJlY29yZHMgPSBbXVxuICB9XG4gIGNvbnN0IG9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIGNvbnN0IGxheWVyT2JqZWN0ID0gYXdhaXQgZ2V0TGF5ZXJPYmplY3Qob3JpZ2luRHMpXG4gIHJlY29yZHMuZm9yRWFjaCgocmVjb3JkKSA9PiB7XG4gICAgY29uc3QgZmVhdHVyZSA9IChyZWNvcmQgYXMgYW55KS5mZWF0dXJlXG4gICAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgICBmZWF0dXJlLnNvdXJjZUxheWVyID0gKGxheWVyT2JqZWN0IGFzIGFueSkuYXNzb2NpYXRlZExheWVyIHx8IGxheWVyT2JqZWN0XG4gICAgfVxuICAgIGZlYXR1cmUubGF5ZXIgPSBmZWF0dXJlLnNvdXJjZUxheWVyXG4gIH0pXG4gIGNvbnN0IHF1ZXJ5UmVzdWx0ID0ge1xuICAgIHJlY29yZHMsXG4gICAgZmllbGRzOiBmaWVsZEluZm9zLm1hcCgoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICB9XG5cbiAgLy8gcHVibGlzaCBtZXNzYWdlXG4gIGNvbnN0IGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlID0gbmV3IERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKHdpZGdldElkLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLkNyZWF0ZVVwZGF0ZSwgW3tcbiAgICByZWNvcmRzOiBvdXRwdXREUy5nZXRBbGxMb2FkZWRSZWNvcmRzKCksXG4gICAgZmllbGRzOiBxdWVyeVJlc3VsdC5maWVsZHMsXG4gICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgbmFtZTogb3V0cHV0RFMuaWQsXG4gICAgbGFiZWw6IG91dHB1dERTLmdldExhYmVsKClcbiAgfV0pXG4gIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UpXG5cbiAgcmV0dXJuIHF1ZXJ5UmVzdWx0XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldExheWVyT2JqZWN0IChkYXRhU291cmNlOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKSB7XG4gIGNvbnN0IGxheWVyT2JqZWN0ID0gYXdhaXQgZGF0YVNvdXJjZS5jcmVhdGVKU0FQSUxheWVyQnlEYXRhU291cmNlKCkgYXMgX19lc3JpLkxheWVyXG4gIC8vIGxheWVyT2JqZWN0IG1heSBiZSB1bmRlZmluZWQgaWYgdGhlIGRhdGEgc291cmNlIGlzIGFkZGVkIGJ5IFVSTFxuICBpZiAobGF5ZXJPYmplY3QpIHtcbiAgICBhd2FpdCBsYXllck9iamVjdC5sb2FkKClcbiAgfVxuICByZXR1cm4gbGF5ZXJPYmplY3Rcbn1cblxuXG4iLCIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyByZXN1bHRzIGFjY3VtdWxhdGlvbiBpbiBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBIYW5kbGVzIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcyBmb3IgYWNjdW11bGF0aW5nIHF1ZXJ5IHJlc3VsdHMuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZCwgRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IERhdGFTb3VyY2VNYW5hZ2VyLCBEYXRhU291cmNlU3RhdHVzLCBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UsIFJlY29yZFNldENoYW5nZVR5cGUsIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBjb21wb3NpdGUga2V5IGZvciBhIHJlY29yZCB0aGF0IGluY2x1ZGVzIGJvdGggb3JpZ2luIGRhdGEgc291cmNlIElEIGFuZCBvYmplY3RJZC5cbiAqIFRoaXMgZW5zdXJlcyB1bmlxdWVuZXNzIGFjcm9zcyBkaWZmZXJlbnQgbGF5ZXJzIHRoYXQgbWF5IGhhdmUgdGhlIHNhbWUgb2JqZWN0SWQuXG4gKiBcbiAqIEBwYXJhbSByZWNvcmQgLSBUaGUgZmVhdHVyZSBkYXRhIHJlY29yZFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSBjb250YWluaW5nIHRoZSByZWNvcmRcbiAqIEByZXR1cm5zIENvbXBvc2l0ZSBrZXkgc3RyaW5nOiBgJHtvcmlnaW5EU0lkfV8ke29iamVjdElkfWBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlY29yZEtleShcbiAgcmVjb3JkOiBGZWF0dXJlRGF0YVJlY29yZCxcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IHN0cmluZyB7XG4gIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgY29uc3Qgb3JpZ2luRFNJZCA9IG9yaWdpbkRTPy5pZCB8fCBvdXRwdXREUy5pZCAvLyBGYWxsYmFjayB0byBvdXRwdXREUyBpZiBubyBvcmlnaW5cbiAgY29uc3Qgb2JqZWN0SWQgPSByZWNvcmQuZ2V0SWQoKVxuICBjb25zdCBrZXkgPSBgJHtvcmlnaW5EU0lkfV8ke29iamVjdElkfWBcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVjb3JkLWtleS1nZW5lcmF0ZWQnLFxuICAgIG9yaWdpbkRTSWQsXG4gICAgb2JqZWN0SWQsXG4gICAga2V5LFxuICAgIGhhc09yaWdpbkRTOiAhIW9yaWdpbkRTXG4gIH0pXG4gIFxuICByZXR1cm4ga2V5XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlIGZvciBzdG9yaW5nIG1lcmdlZCBxdWVyeSByZXN1bHRzLlxuICogVGhpcyBkYXRhIHNvdXJjZSBpcyB3aWRnZXQtbGV2ZWwgYW5kIHBlcnNpc3RzIGFjcm9zcyBtdWx0aXBsZSBxdWVyaWVzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gb3JpZ2luRFMgLSBUaGUgb3JpZ2luIGRhdGEgc291cmNlIHRvIHVzZSBhcyB0aGUgYmFzZVxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQWNjdW11bGF0ZWRSZXN1bHRzRGF0YVNvdXJjZShcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IFByb21pc2U8RmVhdHVyZUxheWVyRGF0YVNvdXJjZT4ge1xuICBjb25zdCBhY2N1bXVsYXRlZERTSWQgPSBgJHt3aWRnZXRJZH1fYWNjdW11bGF0ZWRfcmVzdWx0c2BcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnY3JlYXRpbmctYWNjdW11bGF0ZWQtZHMnLFxuICAgIHdpZGdldElkLFxuICAgIGFjY3VtdWxhdGVkRFNJZCxcbiAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZFxuICB9KVxuICBcbiAgLy8gQ2hlY2sgaWYgZGF0YSBzb3VyY2UgYWxyZWFkeSBleGlzdHNcbiAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICBsZXQgYWNjdW11bGF0ZWREUyA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlKGFjY3VtdWxhdGVkRFNJZCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBcbiAgaWYgKGFjY3VtdWxhdGVkRFMpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtZHMtYWxyZWFkeS1leGlzdHMnLFxuICAgICAgYWNjdW11bGF0ZWREU0lkXG4gICAgfSlcbiAgICByZXR1cm4gYWNjdW11bGF0ZWREU1xuICB9XG4gIFxuICAvLyBHZXQgb3JpZ2luIGRhdGEgc291cmNlIEpTT04gdG8gY3JlYXRlIG91dHB1dCBkYXRhIHNvdXJjZVxuICBjb25zdCBvcmlnaW5EYXRhU291cmNlSnNvbiA9IG9yaWdpbkRTLmdldERhdGFTb3VyY2VKc29uKClcbiAgXG4gIC8vIENyZWF0ZSBvdXRwdXQgZGF0YSBzb3VyY2UgSlNPTiBzaW1pbGFyIHRvIGhvdyBxdWVyeSBpdGVtcyBjcmVhdGUgb3V0cHV0IERTXG4gIGNvbnN0IG91dHB1dERhdGFTb3VyY2VKc29uID0ge1xuICAgIGlkOiBhY2N1bXVsYXRlZERTSWQsXG4gICAgbGFiZWw6ICdBY2N1bXVsYXRlZCBSZXN1bHRzJyxcbiAgICB0eXBlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8udHlwZSxcbiAgICBnZW9tZXRyeVR5cGU6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5nZW9tZXRyeVR5cGUsXG4gICAgdXJsOiBvcmlnaW5EYXRhU291cmNlSnNvbj8udXJsLFxuICAgIGl0ZW1JZDogb3JpZ2luRGF0YVNvdXJjZUpzb24/Lml0ZW1JZCxcbiAgICBwb3J0YWxVcmw6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5wb3J0YWxVcmwsXG4gICAgb3JpZ2luRGF0YVNvdXJjZXM6IFt7XG4gICAgICBkYXRhU291cmNlSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgbWFpbkRhdGFTb3VyY2VJZDogb3JpZ2luRFMuaWQsXG4gICAgICByb290RGF0YVNvdXJjZUlkOiBvcmlnaW5EUy5pZFxuICAgIH1dLFxuICAgIGxheWVySWQ6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5sYXllcklkLFxuICAgIGlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8uaXNEYXRhSW5EYXRhU291cmNlSW5zdGFuY2UsXG4gICAgaXNPdXRwdXRGcm9tV2lkZ2V0OiB0cnVlXG4gIH1cbiAgXG4gIC8vIENyZWF0ZSB0aGUgZGF0YSBzb3VyY2UgdXNpbmcgRGF0YVNvdXJjZU1hbmFnZXJcbiAgLy8gTm90ZTogVGhpcyBmb2xsb3dzIHRoZSBwYXR0ZXJuIGZyb20gc2V0dGluZy50c3ggZm9yIGNyZWF0aW5nIG91dHB1dCBkYXRhIHNvdXJjZXNcbiAgYWNjdW11bGF0ZWREUyA9IGRzTWFuYWdlci5jcmVhdGVEYXRhU291cmNlQnlEYXRhU291cmNlSnNvbihvdXRwdXREYXRhU291cmNlSnNvbikgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBcbiAgLy8gU2V0IGluaXRpYWwgc3RhdHVzXG4gIGFjY3VtdWxhdGVkRFMuc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIGFjY3VtdWxhdGVkRFMuc2V0Q291bnRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtZHMtY3JlYXRlZCcsXG4gICAgYWNjdW11bGF0ZWREU0lkLFxuICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgIHN0YXR1czogYWNjdW11bGF0ZWREUy5nZXRTdGF0dXMoKVxuICB9KVxuICBcbiAgcmV0dXJuIGFjY3VtdWxhdGVkRFNcbn1cblxuLyoqXG4gKiBNZXJnZXMgbmV3IHF1ZXJ5IHJlc3VsdHMgd2l0aCBleGlzdGluZyByZWNvcmRzLlxuICogRGVkdXBsaWNhdGVzIHJlY29yZHMgdXNpbmcgY29tcG9zaXRlIGtleXMgKG9yaWdpbkRTSWRfb2JqZWN0SWQpLlxuICogXG4gKiBUaGlzIGZ1bmN0aW9uIG1lcmdlcyBuZXcgcmVjb3JkcyB3aXRoIGV4aXN0aW5nIHJlY29yZHMgdGhhdCB3ZXJlIGNhcHR1cmVkXG4gKiBiZWZvcmUgdGhlIHF1ZXJ5IGV4ZWN1dGVkLiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciBzdG9yaW5nIHRoZSBtZXJnZWRcbiAqIHJlY29yZHMgKHR5cGljYWxseSBpbiByZWNvcmRzUmVmIG9yIHN0YXRlKS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKiBAcGFyYW0gbmV3UmVjb3JkcyAtIE5ldyByZWNvcmRzIHRvIG1lcmdlIGluXG4gKiBAcGFyYW0gZXhpc3RpbmdSZWNvcmRzIC0gRXhpc3RpbmcgcmVjb3JkcyBjYXB0dXJlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIChvcHRpb25hbCwgZGVmYXVsdHMgdG8gZW1wdHkgYXJyYXkpXG4gKiBAcmV0dXJucyBBcnJheSBvZiBhbGwgbWVyZ2VkIHJlY29yZHMgKGV4aXN0aW5nICsgbmV3IHVuaXF1ZSByZWNvcmRzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgbmV3UmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgZXhpc3RpbmdSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbik6IEZlYXR1cmVEYXRhUmVjb3JkW10ge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ21lcmdpbmctcmVzdWx0cy1zdGFydCcsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgZXhpc3RpbmdSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgbmV3UmVjb3Jkc0NvdW50OiBuZXdSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgLy8gQnVpbGQgU2V0IG9mIGV4aXN0aW5nIHJlY29yZCBrZXlzIGZvciBmYXN0IGxvb2t1cFxuICBjb25zdCBleGlzdGluZ0tleXMgPSBuZXcgU2V0KFxuICAgIGV4aXN0aW5nUmVjb3Jkcy5tYXAocmVjb3JkID0+IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKSlcbiAgKVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdleGlzdGluZy1yZWNvcmRzLWNoZWNrJyxcbiAgICBleGlzdGluZ1JlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzLmxlbmd0aCxcbiAgICBleGlzdGluZ0tleXNDb3VudDogZXhpc3RpbmdLZXlzLnNpemVcbiAgfSlcbiAgXG4gIC8vIEZpbHRlciBuZXcgcmVjb3JkcyB0byBvbmx5IGluY2x1ZGUgdGhvc2Ugbm90IGFscmVhZHkgaW4gb3V0cHV0IERTXG4gIGNvbnN0IHVuaXF1ZU5ld1JlY29yZHMgPSBuZXdSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4ge1xuICAgIGNvbnN0IGtleSA9IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKVxuICAgIGNvbnN0IGlzRHVwbGljYXRlID0gZXhpc3RpbmdLZXlzLmhhcyhrZXkpXG4gICAgXG4gICAgaWYgKGlzRHVwbGljYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdkdXBsaWNhdGUtcmVjb3JkLXNraXBwZWQnLFxuICAgICAgICBrZXksXG4gICAgICAgIG9iamVjdElkOiByZWNvcmQuZ2V0SWQoKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuICFpc0R1cGxpY2F0ZVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdkZWR1cGxpY2F0aW9uLWNvbXBsZXRlJyxcbiAgICBuZXdSZWNvcmRzQ291bnQ6IG5ld1JlY29yZHMubGVuZ3RoLFxuICAgIHVuaXF1ZU5ld1JlY29yZHNDb3VudDogdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGgsXG4gICAgZHVwbGljYXRlc1NraXBwZWQ6IG5ld1JlY29yZHMubGVuZ3RoIC0gdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIE1lcmdlIHJlY29yZHNcbiAgY29uc3QgbWVyZ2VkUmVjb3JkcyA9IFsuLi5leGlzdGluZ1JlY29yZHMsIC4uLnVuaXF1ZU5ld1JlY29yZHNdXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ21lcmdlLWNvbXBsZXRlJyxcbiAgICB0b3RhbFJlY29yZHNBZnRlck1lcmdlOiBtZXJnZWRSZWNvcmRzLmxlbmd0aCxcbiAgICBleGlzdGluZ0NvdW50OiBleGlzdGluZ1JlY29yZHMubGVuZ3RoLFxuICAgIG5ld1VuaXF1ZUNvdW50OiB1bmlxdWVOZXdSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgcmV0dXJuIG1lcmdlZFJlY29yZHNcbn1cblxuLyoqXG4gKiBSZW1vdmVzIG1hdGNoaW5nIHJlY29yZHMgZnJvbSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAqIE1hdGNoZXMgcmVjb3JkcyB1c2luZyBjb21wb3NpdGUga2V5cyAob3JpZ2luRFNJZF9vYmplY3RJZCkuXG4gKiBcbiAqIFRoaXMgZnVuY3Rpb24gcmVtb3ZlcyByZWNvcmRzIGZyb20gZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyB0aGF0IHdlcmUgY2FwdHVyZWRcbiAqIGJlZm9yZSB0aGUgcXVlcnkgZXhlY3V0ZWQuIFRoZSBjYWxsZXIgaXMgcmVzcG9uc2libGUgZm9yIHN0b3JpbmcgdGhlIHJlbWFpbmluZ1xuICogcmVjb3JkcyAodHlwaWNhbGx5IGluIHJlY29yZHNSZWYgb3Igc3RhdGUpLlxuICogXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBrZXkgZ2VuZXJhdGlvbilcbiAqIEBwYXJhbSByZWNvcmRzVG9SZW1vdmUgLSBSZWNvcmRzIHRvIHJlbW92ZSAoZnJvbSBxdWVyeSByZXN1bHRzKVxuICogQHBhcmFtIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzIC0gRXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyBjYXB0dXJlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIChvcHRpb25hbCwgZGVmYXVsdHMgdG8gZW1wdHkgYXJyYXkpXG4gKiBAcmV0dXJucyBBcnJheSBvZiByZW1haW5pbmcgcmVjb3JkcyBhZnRlciByZW1vdmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcmVjb3Jkc1RvUmVtb3ZlOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4pOiBGZWF0dXJlRGF0YVJlY29yZFtdIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmluZy1yZXN1bHRzLXN0YXJ0JyxcbiAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIElmIG5vIGFjY3VtdWxhdGVkIHJlY29yZHMsIG5vdGhpbmcgdG8gcmVtb3ZlXG4gIGlmIChleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnbm8tYWNjdW11bGF0ZWQtcmVjb3Jkcy10by1yZW1vdmUnLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWRcbiAgICB9KVxuICAgIHJldHVybiBbXVxuICB9XG4gIFxuICAvLyBJZiBubyByZWNvcmRzIHRvIHJlbW92ZSwgcmV0dXJuIGV4aXN0aW5nIHJlY29yZHMgdW5jaGFuZ2VkXG4gIGlmIChyZWNvcmRzVG9SZW1vdmUubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLXJlY29yZHMtdG8tcmVtb3ZlJyxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgfSlcbiAgICByZXR1cm4gZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNcbiAgfVxuICBcbiAgLy8gQnVpbGQgU2V0IG9mIGtleXMgdG8gcmVtb3ZlIGZvciBmYXN0IGxvb2t1cFxuICBjb25zdCByZW1vdmVLZXlzID0gbmV3IFNldChcbiAgICByZWNvcmRzVG9SZW1vdmUubWFwKHJlY29yZCA9PiBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUykpXG4gIClcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZlLWtleXMtYnVpbHQnLFxuICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICByZW1vdmVLZXlzQ291bnQ6IHJlbW92ZUtleXMuc2l6ZVxuICB9KVxuICBcbiAgLy8gRmlsdGVyIG91dCByZWNvcmRzIHRoYXQgbWF0Y2gga2V5cyB0byByZW1vdmVcbiAgY29uc3QgcmVtYWluaW5nUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gIGNvbnN0IHJlbW92ZWRSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgXG4gIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICBjb25zdCBrZXkgPSBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUylcbiAgICBjb25zdCBzaG91bGRSZW1vdmUgPSByZW1vdmVLZXlzLmhhcyhrZXkpXG4gICAgXG4gICAgaWYgKHNob3VsZFJlbW92ZSkge1xuICAgICAgcmVtb3ZlZFJlY29yZHMucHVzaChyZWNvcmQpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZWNvcmQtbWFya2VkLWZvci1yZW1vdmFsJyxcbiAgICAgICAga2V5LFxuICAgICAgICBvYmplY3RJZDogcmVjb3JkLmdldElkKCksXG4gICAgICAgIG9yaWdpbkRTSWQ6IChyZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSk/LmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXT8uaWQgfHwgJ3Vua25vd24nXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZW1haW5pbmdSZWNvcmRzLnB1c2gocmVjb3JkKVxuICAgIH1cbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZhbC1jb21wbGV0ZScsXG4gICAgcmVjb3Jkc1JlbW92ZWQ6IHJlbW92ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoLFxuICAgIG1hdGNoZWRSZWNvcmRzQ291bnQ6IHJlbW92ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICB1bm1hdGNoZWRSZWNvcmRzQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGggLSByZW1vdmVkUmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIHJldHVybiByZW1haW5pbmdSZWNvcmRzXG59XG5cbi8qKlxuICogUmVtb3ZlcyByZWNvcmRzIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMuXG4gKiBHcm91cHMgcmVjb3JkcyBieSB0aGVpciBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIHVwZGF0ZXMgZWFjaCBvcmlnaW4gRFMncyBzZWxlY3Rpb24gc2VwYXJhdGVseS5cbiAqIFRoaXMgZW5zdXJlcyBtYXAgc2VsZWN0aW9uIGlzIHVwZGF0ZWQgY29ycmVjdGx5IHdoZW4gcmVjb3JkcyBjb21lIGZyb20gbXVsdGlwbGUgb3JpZ2luIGxheWVycy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRCBmb3IgcHVibGlzaGluZyBtZXNzYWdlc1xuICogQHBhcmFtIHJlY29yZHNUb1JlbW92ZSAtIFJlY29yZHMgdG8gcmVtb3ZlIGZyb20gc2VsZWN0aW9uXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBrZXkgZ2VuZXJhdGlvbilcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyhcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcmVjb3Jkc1RvUmVtb3ZlOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuKTogdm9pZCB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZpbmctcmVjb3Jkcy1mcm9tLW9yaWdpbi1zZWxlY3Rpb25zLXN0YXJ0JyxcbiAgICB3aWRnZXRJZCxcbiAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZFxuICB9KVxuICBcbiAgaWYgKHJlY29yZHNUb1JlbW92ZS5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnbm8tcmVjb3Jkcy10by1yZW1vdmUtZnJvbS1zZWxlY3Rpb24nLFxuICAgICAgd2lkZ2V0SWRcbiAgICB9KVxuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBHcm91cCByZWNvcmRzIGJ5IHRoZWlyIG9yaWdpbiBkYXRhIHNvdXJjZVxuICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICBcbiAgcmVjb3Jkc1RvUmVtb3ZlLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICBcbiAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2s6IHRyeSB0byBnZXQgb3JpZ2luIGZyb20gb3V0cHV0RFNcbiAgICAgIG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgbnVsbFxuICAgIH1cbiAgICBcbiAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5zZXQob3JpZ2luRFMsIFtdKVxuICAgICAgfVxuICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgfVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZWNvcmRzLWdyb3VwZWQtYnktb3JpZ2luJyxcbiAgICB3aWRnZXRJZCxcbiAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplLFxuICAgIHJlY29yZHNCeU9yaWdpbkRTOiBBcnJheS5mcm9tKHJlY29yZHNCeU9yaWdpbkRTLmVudHJpZXMoKSkubWFwKChbZHMsIHJlY29yZHNdKSA9PiAoe1xuICAgICAgb3JpZ2luRFNJZDogZHMuaWQsXG4gICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgICB9KSlcbiAgfSlcbiAgXG4gIC8vIEZvciBlYWNoIG9yaWdpbiBEUywgZ2V0IGN1cnJlbnQgc2VsZWN0aW9uIGFuZCByZW1vdmUgbWF0Y2hpbmcgcmVjb3Jkc1xuICByZWNvcmRzQnlPcmlnaW5EUy5mb3JFYWNoKChyZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4sIG9yaWdpbkRTKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBjdXJyZW50IHNlbGVjdGVkIHJlY29yZHMgZnJvbSB0aGlzIG9yaWdpbiBEU1xuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkUmVjb3JkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkcygpIHx8IFtdXG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3Byb2Nlc3Npbmctb3JpZ2luLWRzLXJlbW92YWwnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGN1cnJlbnRTZWxlY3RlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZUZvck9yaWdpbi5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIEJ1aWxkIFNldCBvZiBJRHMgdG8gcmVtb3ZlIGZvciBmYXN0IGxvb2t1cFxuICAgICAgY29uc3QgaWRzVG9SZW1vdmUgPSBuZXcgU2V0KFxuICAgICAgICByZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4ubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gRmlsdGVyIG91dCByZWNvcmRzIHRoYXQgbWF0Y2ggSURzIHRvIHJlbW92ZVxuICAgICAgY29uc3QgcmVtYWluaW5nUmVjb3JkcyA9IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgcmV0dXJuICFpZHNUb1JlbW92ZS5oYXMocmVjb3JkSWQpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCByZW1haW5pbmdJZHMgPSByZW1haW5pbmdSZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1yZW1vdmFsLWZpbHRlcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICByZW1vdmVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMubGVuZ3RoIC0gcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlbWFpbmluZ0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvbiBpbiBvcmlnaW4gRFNcbiAgICAgIGlmICh0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhyZW1haW5pbmdJZHMsIHJlbWFpbmluZ1JlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUHVibGlzaCBzZWxlY3Rpb24gY2hhbmdlIG1lc3NhZ2UgZm9yIHRoaXMgb3JpZ2luIERTXG4gICAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZW1haW5pbmdSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sIFtvcmlnaW5EUy5pZF0pXG4gICAgICApXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1zZWxlY3Rpb24tdXBkYXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgbWVzc2FnZVB1Ymxpc2hlZDogdHJ1ZVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnb3JpZ2luLWRzLXJlbW92YWwtZXJyb3InLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICB9KVxuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVtb3ZpbmcgcmVjb3JkcyBmcm9tIG9yaWdpbiBEUyAke29yaWdpbkRTLmlkfTpgLCBlcnJvcilcbiAgICB9XG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92aW5nLXJlY29yZHMtZnJvbS1vcmlnaW4tc2VsZWN0aW9ucy1jb21wbGV0ZScsXG4gICAgd2lkZ2V0SWQsXG4gICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZSxcbiAgICB0b3RhbFJlY29yZHNSZW1vdmVkOiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoXG4gIH0pXG59XG5cbi8qKlxuICogQ2xlYXJzIGFsbCByZWNvcmRzIGZyb20gdGhlIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2UuXG4gKiBcbiAqIEBwYXJhbSBhY2N1bXVsYXRlZERTIC0gVGhlIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2UgdG8gY2xlYXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQWNjdW11bGF0ZWRSZXN1bHRzKFxuICBhY2N1bXVsYXRlZERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiB2b2lkIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdjbGVhcmluZy1hY2N1bXVsYXRlZC1yZXN1bHRzJyxcbiAgICBhY2N1bXVsYXRlZERTSWQ6IGFjY3VtdWxhdGVkRFMuaWRcbiAgfSlcbiAgXG4gIC8vIFNldCBzdGF0dXMgdG8gTm90UmVhZHkgdG8gY2xlYXIgcmVjb3Jkc1xuICBhY2N1bXVsYXRlZERTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBhY2N1bXVsYXRlZERTLnNldENvdW50U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIFxuICAvLyBDbGVhciBhbnkgbG9hZGVkIHJlY29yZHMgaWYgcG9zc2libGVcbiAgLy8gTm90ZTogTWF5IG5lZWQgdG8gdXNlIERhdGFTb3VyY2VNYW5hZ2VyIG1ldGhvZHMgZGVwZW5kaW5nIG9uIEV4QiBBUElcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtcmVzdWx0cy1jbGVhcmVkJyxcbiAgICBhY2N1bXVsYXRlZERTSWQ6IGFjY3VtdWxhdGVkRFMuaWRcbiAgfSlcbn1cblxuIiwiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZmVhdHVyZSBzZWxlY3Rpb24gaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogQ29uc29saWRhdGVzIHJlcGVhdGVkIHNlbGVjdGlvbiBsb2dpYyB0byBmb2xsb3cgRFJZIHByaW5jaXBsZXMuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBEYXRhU291cmNlLCBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IE1lc3NhZ2VNYW5hZ2VyLCBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UgfSBmcm9tICdqaW11LWNvcmUnXG5cbi8qKlxuICogR2V0cyB0aGUgb3JpZ2luIGRhdGEgc291cmNlIGZyb20gYW4gb3V0cHV0IGRhdGEgc291cmNlLlxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHJldHVybnMgVGhlIG9yaWdpbiBkYXRhIHNvdXJjZSwgb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcmlnaW5EYXRhU291cmNlKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWRcbik6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsIHtcbiAgaWYgKCFvdXRwdXREUykgcmV0dXJuIG51bGxcbiAgY29uc3Qgb3JpZ2luRGF0YVNvdXJjZXMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpXG4gIHJldHVybiBvcmlnaW5EYXRhU291cmNlcz8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgbnVsbFxufVxuXG4vKipcbiAqIFNlbGVjdHMgcmVjb3JkcyBpbiBib3RoIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIFRoaXMgaXMgdGhlIHN0YW5kYXJkIHBhdHRlcm4gdXNlZCB0aHJvdWdob3V0IHRoZSB3aWRnZXQgZm9yIHNlbGVjdGlvbi5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHJlY29yZCBJRHMgdG8gc2VsZWN0XG4gKiBAcGFyYW0gcmVjb3JkcyAtIE9wdGlvbmFsIGFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgZm9yIHByb3BlciBoaWdobGlnaHRpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHJlY29yZElkczogc3RyaW5nW10sXG4gIHJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdXG4pOiB2b2lkIHtcbiAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG4gIFxuICBjb25zdCBvcmlnaW5EUyA9IGdldE9yaWdpbkRhdGFTb3VyY2Uob3V0cHV0RFMpXG4gIFxuICAvLyBTZWxlY3QgaW4gb3JpZ2luIGRhdGEgc291cmNlICh0aGUgYWN0dWFsIGxheWVyKVxuICBpZiAob3JpZ2luRFMgJiYgdHlwZW9mIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gIH1cbiAgXG4gIC8vIEFsc28gc2VsZWN0IGluIG91dHB1dERTIGZvciB3aWRnZXQncyBpbnRlcm5hbCBzdGF0ZVxuICBpZiAodHlwZW9mIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhcnMgc2VsZWN0aW9uIGluIGJvdGggdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSBhbmQgb3V0cHV0IGRhdGEgc291cmNlLlxuICogXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMoXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZFxuKTogdm9pZCB7XG4gIHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzKG91dHB1dERTLCBbXSlcbn1cblxuLyoqXG4gKiBQdWJsaXNoZXMgYSBzZWxlY3Rpb24gY2hhbmdlIG1lc3NhZ2UgZm9yIHRoZSBnaXZlbiByZWNvcmRzIGFuZCBkYXRhIHNvdXJjZXMuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSByZWNvcmRzIC0gQXJyYXkgb2YgRmVhdHVyZURhdGFSZWNvcmQgb2JqZWN0cyAoZW1wdHkgYXJyYXkgdG8gY2xlYXIpXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gYWxzb1B1Ymxpc2hUb091dHB1dERTIC0gV2hldGhlciB0byBhbHNvIHB1Ymxpc2ggYSBtZXNzYWdlIGZvciBvdXRwdXREUyAoZGVmYXVsdDogZmFsc2UpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZShcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBhbHNvUHVibGlzaFRvT3V0cHV0RFM6IGJvb2xlYW4gPSBmYWxzZVxuKTogdm9pZCB7XG4gIGlmICghb3V0cHV0RFMpIHJldHVyblxuICBcbiAgY29uc3Qgb3JpZ2luRFMgPSBnZXRPcmlnaW5EYXRhU291cmNlKG91dHB1dERTKVxuICBcbiAgaWYgKG9yaWdpbkRTKSB7XG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIFtvcmlnaW5EUy5pZF0pXG4gICAgKVxuICB9IGVsc2UgaWYgKGFsc29QdWJsaXNoVG9PdXRwdXREUykge1xuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBbb3V0cHV0RFMuaWRdKVxuICAgIClcbiAgfVxuICBcbiAgLy8gT3B0aW9uYWxseSBwdWJsaXNoIHRvIG91dHB1dERTIGFzIHdlbGwgKGZvciBzb21lIGVkZ2UgY2FzZXMpXG4gIGlmIChhbHNvUHVibGlzaFRvT3V0cHV0RFMgJiYgb3JpZ2luRFMpIHtcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3JkcywgW291dHB1dERTLmlkXSlcbiAgICApXG4gIH1cbn1cblxuLyoqXG4gKiBTZWxlY3RzIHJlY29yZHMgYW5kIHB1Ymxpc2hlcyB0aGUgc2VsZWN0aW9uIG1lc3NhZ2UgaW4gb25lIGNhbGwuXG4gKiBUaGlzIGlzIHRoZSBtb3N0IGNvbW1vbiBwYXR0ZXJuIC0gc2VsZWN0aW5nIHJlY29yZHMgYW5kIG5vdGlmeWluZyB0aGUgbWFwLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gcmVjb3JkSWRzIC0gQXJyYXkgb2YgcmVjb3JkIElEcyB0byBzZWxlY3RcbiAqIEBwYXJhbSByZWNvcmRzIC0gQXJyYXkgb2YgRmVhdHVyZURhdGFSZWNvcmQgb2JqZWN0cyBmb3IgcHJvcGVyIGhpZ2hsaWdodGluZ1xuICogQHBhcmFtIGFsc29QdWJsaXNoVG9PdXRwdXREUyAtIFdoZXRoZXIgdG8gYWxzbyBwdWJsaXNoIGEgbWVzc2FnZSBmb3Igb3V0cHV0RFMgKGRlZmF1bHQ6IGZhbHNlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgcmVjb3JkSWRzOiBzdHJpbmdbXSxcbiAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgYWxzb1B1Ymxpc2hUb091dHB1dERTOiBib29sZWFuID0gZmFsc2Vcbik6IHZvaWQge1xuICBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhvdXRwdXREUywgcmVjb3JkSWRzLCByZWNvcmRzKVxuICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3Jkcywgb3V0cHV0RFMsIGFsc29QdWJsaXNoVG9PdXRwdXREUylcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgXCJDbGVhciByZXN1bHRzXCIgYnV0dG9uIGluIHRoZSBET00uXG4gKiBVc2VkIHdoZW4gcHJvZ3JhbW1hdGljYWxseSB0cmlnZ2VyaW5nIHRoZSBjbGVhciBhY3Rpb24uXG4gKiBcbiAqIEByZXR1cm5zIFRoZSBjbGVhciBidXR0b24gZWxlbWVudCwgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRDbGVhclJlc3VsdHNCdXR0b24oKTogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsIHtcbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblthcmlhLWxhYmVsPVwiQ2xlYXIgcmVzdWx0c1wiXScpIGFzIEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbFxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIF93aWRnZXRMYWJlbDogJ1F1ZXJ5U2ltcGxlJyxcbiAgcmVzZXQ6ICdSZXNldCcsXG4gIHNlYXJjaExheWVyOiAnU2VhcmNoIExheWVyJyxcbiAgYXBwbHk6ICdTZWFyY2gnLFxuICBub0RhdGFBdmFpbGFibGU6ICdFcnJvciBpbiBsb2FkaW5nIGRhdGEnLFxuICBub1F1ZXJ5SXRlbTogJ05vIHF1ZXJ5JyxcbiAgbmV3UXVlcnlIaW50OiAnQWRkIGNvbnRlbnQgYnkgY2xpY2tpbmcgdGhlIFwie2xhYmVsfVwiIGJ1dHRvbiBvbiB0aGUgY29uZmlndXJhdGlvbiBwYW5lbCcsXG4gIGF0dHJpYnV0ZUZpbHRlcjogJ0F0dHJpYnV0ZSBmaWx0ZXInLFxuICBzcGF0aWFsRmlsdGVyOiAnU3BhdGlhbCBmaWx0ZXInLFxuICBzcGF0aWFsRmlsdGVyVHlwZV9DdXJyZW50TWFwRXh0ZW50OiAnQ3VycmVudCBtYXAgZXh0ZW50JyxcbiAgc3BhdGlhbEZpbHRlclR5cGVfSW50ZXJhY3RpdmVEcmF3TW9kZTogJ0RyYXduIGdyYXBoaWMnLFxuICByZXN1bHRzOiAnUmVzdWx0cycsXG4gIGZlYXR1cmVzRGlzcGxheWVkOiAnRmVhdHVyZXMgZGlzcGxheWVkJyxcbiAgY2xlYXJSZXN1bHQ6ICdDbGVhciByZXN1bHRzJyxcbiAgY2hlY2tSZXN1bHQ6ICdDaGVjayByZXN1bHRzJyxcbiAgbWFwTXVzdEJlVmlzaWJsZTogJ01hcCBtdXN0IGJlIHZpc2libGUnLFxuICBjaG9vc2VGaWx0ZXJUeXBlOiAnQ2hvb3NlIHRoZSBmaWx0ZXIgdHlwZScsXG4gIGNob29zZUdlb21ldHJ5VHlwZTogJ0Nob29zZSB0aGUgZ2VvbWV0cnkgdHlwZScsXG4gIGNsZWFyRHJhd2luZzogJ0NsZWFyIHRoZSBncmFwaGljIHdoZW4gYXBwbHlpbmcnLFxuICBmZWF0dXJlRnJvbURzOiAnU2VsZWN0aW5nIGZlYXR1cmVzIGZyb20gZGF0YSBzb3VyY2UnLFxuICBmZWF0dXJlRnJvbU1hcDogJ0dlb21ldHJpZXMgZnJvbSBhIG1hcCcsXG4gIGNob29zZUZpbHRlckxheWVyOiAnQ2hvb3NlIGEgZmlsdGVyIGxheWVyJyxcbiAgc2VsZWN0ZWRSZWNvcmRzOiAne251bX0gcmVjb3JkcyBhcmUgc2VsZWN0ZWQgZm9yIHRoZSBmaWx0ZXInLFxuICBzcGF0aWFsTm90QXZhaWxhYmxlOiAnU3BhdGlhbCBmaWx0ZXIgaXMgbm90IGF2YWlsYWJsZSBoZXJlLicsXG4gIHNwYXRpYWxOb3RBdmFpbGFibGVEZXNjOiAnU3BhdGlhbCBmaWx0ZXIgaXMgbm90IHN1cHBvcnRlZCBmb3IgYSBkYXRhIHNvdXJjZSB0aGF0IGFscmVhZHkgY29udGFpbnMgYSBzcGF0aWFsIHF1ZXJ5LicsXG4gIHByZWNvbmZpZ3VyZWQ6ICdQcmVjb25maWd1cmVkJyxcbiAgcnVudGltZTogJ1J1bnRpbWUnLFxuICBzZWxlY3RMb2FkZWQ6ICdTZWxlY3QgbG9hZGVkJyxcbiAgcmV0cmlldmluZzogJ1JldHJpZXZpbmcgcXVlcnkgcmVzdWx0cy4uLicsXG4gIHpvb21Ub1NlbGVjdGVkOiAnWm9vbSB0byBzZWxlY3RlZCcsXG4gIHF1ZXJ5VGFiOiAnUXVlcnknLFxuICByZXN1bHRzVGFiOiAnUmVzdWx0cycsXG4gIGV4cGFuZEFsbDogJ0V4cGFuZCBhbGwnLFxuICBjb2xsYXBzZUFsbDogJ0NvbGxhcHNlIGFsbCcsXG4gIGFkZFRvTWFwOiAnQWRkIHRvIG1hcCcsXG4gIHJlc3VsdHNNb2RlOiAnUmVzdWx0cyBtb2RlJyxcbiAgY3JlYXRlTmV3UmVzdWx0czogJ0NyZWF0ZSBuZXcgcmVzdWx0cycsXG4gIGFkZFRvQ3VycmVudFJlc3VsdHM6ICdBZGQgdG8gY3VycmVudCByZXN1bHRzJyxcbiAgcmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzOiAnUmVtb3ZlIGZyb20gY3VycmVudCByZXN1bHRzJyxcbiAgcmVzdWx0c01vZGVEaXNhYmxlZFJlbW92ZTogJ1JlbW92ZSBmcm9tIGN1cnJlbnQgcmVzdWx0cyAobm8gYWNjdW11bGF0ZWQgcmVzdWx0cyknLFxuICByZXN1bHRzTW9kZURlc2M6ICdDb250cm9scyBob3cgcXVlcnkgcmVzdWx0cyBhcmUgY29tYmluZWQ6XFxu4oCiIE5ldzogRWFjaCBxdWVyeSByZXBsYWNlcyBwcmV2aW91cyByZXN1bHRzXFxu4oCiIEFkZDogTmV3IHJlc3VsdHMgYXJlIGFkZGVkIHRvIGV4aXN0aW5nIHJlc3VsdHNcXG7igKIgUmVtb3ZlOiBNYXRjaGluZyByZXN1bHRzIGFyZSByZW1vdmVkIGZyb20gZXhpc3RpbmcgcmVzdWx0cycsXG4gIHJlc3VsdHNNb2RlTmV3OiAnTmV3JyxcbiAgcmVzdWx0c01vZGVBZGQ6ICdBZGQnLFxuICByZXN1bHRzTW9kZVJlbW92ZTogJ1JlbW92ZSdcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCB0eXBlIElNU3RhdGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBMYXlvdXRJdGVtU2l6ZU1vZGVzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgUXVlcnlXaWRnZXRDb250ZXh0IH0gZnJvbSAnLi93aWRnZXQtY29udGV4dCdcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUF1dG9IZWlnaHQgKCkge1xuICBjb25zdCBsYXlvdXRJbmZvID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVdpZGdldENvbnRleHQpXG4gIGxldCBsYXlvdXRJZFxuICBsZXQgbGF5b3V0SXRlbUlkXG4gIGlmIChsYXlvdXRJbmZvLmluY2x1ZGVzKCc6JykpIHtcbiAgICBjb25zdCByID0gbGF5b3V0SW5mby5zcGxpdCgnOicpXG4gICAgbGF5b3V0SWQgPSByWzBdXG4gICAgbGF5b3V0SXRlbUlkID0gclsxXVxuICB9XG4gIGNvbnN0IGlzQXV0byA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXT8uY29udGVudD8uW2xheW91dEl0ZW1JZF1cbiAgICByZXR1cm4gbGF5b3V0SXRlbT8uc2V0dGluZz8uYXV0b1Byb3BzPy5oZWlnaHQgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuICB9KVxuXG4gIHJldHVybiBpc0F1dG9cbn1cblxuXG4iLCJpbXBvcnQgaWNvbldhcm5pbmcgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcuc3ZnJ1xuaW1wb3J0IGljb25FcnJvciBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvZXJyb3Iuc3ZnJ1xuaW1wb3J0IGFycm93TmF2QmFjayBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnN2ZydcbmltcG9ydCBhcnJvd1JpZ2h0IGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZydcbmltcG9ydCB0b29sRGVsZXRlIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmcnXG5pbXBvcnQgaWNvbk1vcmUgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vbW9yZS1ob3Jpem9udGFsLnN2ZydcblxuZXhwb3J0IGNvbnN0IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwID0gKCkgPT4gKHtcbiAgaWNvbk1hcDoge1xuICAgIGljb25RdWVyeTogcmVxdWlyZSgnLi4vLi4vaWNvbi5zdmcnKSxcbiAgICBpY29uV2FybmluZyxcbiAgICBpY29uRXJyb3IsXG4gICAgYXJyb3dOYXZCYWNrLFxuICAgIGFycm93UmlnaHQsXG4gICAgdG9vbERlbGV0ZSxcbiAgICBpY29uTW9yZVxuICB9XG59KVxuXG5cblxuIiwiaW1wb3J0IHsgUmVhY3QgfSBmcm9tICdqaW11LWNvcmUnXG5cbmV4cG9ydCBjb25zdCBRdWVyeVdpZGdldENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PHN0cmluZz4obnVsbClcblxuXG4iLCJpbXBvcnQgeyBCYXNlVmVyc2lvbk1hbmFnZXIgfSBmcm9tICdqaW11LWNvcmUnXG5cbmNsYXNzIFZlcnNpb25NYW5hZ2VyIGV4dGVuZHMgQmFzZVZlcnNpb25NYW5hZ2VyIHtcbiAgdmVyc2lvbnMgPSBbe1xuICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgZGVzY3JpcHRpb246ICdUaGUgZmlyc3QgdmVyc2lvbi4nLFxuICAgIHVwZ3JhZGVyOiAob2xkQ29uZmlnKSA9PiB7XG4gICAgICByZXR1cm4gb2xkQ29uZmlnXG4gICAgfVxuICB9XVxufVxuXG5leHBvcnQgY29uc3QgdmVyc2lvbk1hbmFnZXIgPSBuZXcgVmVyc2lvbk1hbmFnZXIoKVxuXG5cblxuIiwiLyoqXG4gKiBXaWRnZXQgdmVyc2lvbiBudW1iZXIuXG4gKiBVcGRhdGUgdGhpcyB3aGVuIHJlbGVhc2luZyBhIG5ldyB2ZXJzaW9uIG9mIHRoZSB3aWRnZXQuXG4gKiBUaGlzIHZlcnNpb24gaXMgZGlzcGxheWVkIGluIHRoZSB3aWRnZXQgZm9vdGVyIGZvciB1c2VyIHJlZmVyZW5jZS5cbiAqL1xuZXhwb3J0IGNvbnN0IFdJREdFVF9WRVJTSU9OID0gJzEuMTkuMCdcblxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX19lbW90aW9uX3JlYWN0X2pzeF9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfYXJjZ2lzX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfY29yZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2xheW91dHNfbGF5b3V0X3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV90aGVtZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdWlfYmFzaWNfc3FsX2V4cHJlc3Npb25fcnVudGltZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV93aWRnZXRzX3NoYXJlZF9jb2RlX2NvbW1vbl9fOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8qKlxyXG4gKiBXZWJwYWNrIHdpbGwgcmVwbGFjZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB3aXRoIF9fd2VicGFja19yZXF1aXJlX18ucCB0byBzZXQgdGhlIHB1YmxpYyBwYXRoIGR5bmFtaWNhbGx5LlxyXG4gKiBUaGUgcmVhc29uIHdoeSB3ZSBjYW4ndCBzZXQgdGhlIHB1YmxpY1BhdGggaW4gd2VicGFjayBjb25maWcgaXM6IHdlIGNoYW5nZSB0aGUgcHVibGljUGF0aCB3aGVuIGRvd25sb2FkLlxyXG4gKiAqL1xyXG5fX3dlYnBhY2tfcHVibGljX3BhdGhfXyA9IHdpbmRvdy5qaW11Q29uZmlnLmJhc2VVcmxcclxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwganN4LCBjc3MsIHR5cGUgQWxsV2lkZ2V0UHJvcHMsIERhdGFTb3VyY2VNYW5hZ2VyLCB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsIE1lc3NhZ2VNYW5hZ2VyLCBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBQYXBlciwgV2lkZ2V0UGxhY2Vob2xkZXIgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZywgUXVlcnlBcnJhbmdlVHlwZSwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuXG5pbXBvcnQgeyB2ZXJzaW9uTWFuYWdlciB9IGZyb20gJy4uL3ZlcnNpb24tbWFuYWdlcidcbmltcG9ydCB7IFF1ZXJ5VGFza0xpc3QgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdCdcbmltcG9ydCB7IFRhc2tMaXN0SW5saW5lIH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QtaW5saW5lJ1xuaW1wb3J0IHsgVGFza0xpc3RQb3BwZXJXcmFwcGVyIH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QtcG9wcGVyLXdyYXBwZXInXG5pbXBvcnQgeyBRdWVyeVdpZGdldENvbnRleHQgfSBmcm9tICcuL3dpZGdldC1jb250ZXh0J1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHsgV0lER0VUX1ZFUlNJT04gfSBmcm9tICcuLi92ZXJzaW9uJ1xuXG5jb25zdCB7IGljb25NYXAgfSA9IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgUXVlcnlTaW1wbGUgdG8gbm90aWZ5IEhlbHBlclNpbXBsZSBvZiBzZWxlY3Rpb24gY2hhbmdlcy5cbiAqL1xuY29uc3QgUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXNlbGVjdGlvbi1jaGFuZ2VkJ1xuXG4vKipcbiAqIEN1c3RvbSBldmVudCBuYW1lIGZvciBRdWVyeVNpbXBsZSB0byBub3RpZnkgSGVscGVyU2ltcGxlIG9mIHdpZGdldCBvcGVuL2Nsb3NlIHN0YXRlLlxuICovXG5jb25zdCBRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQgPSAncXVlcnlzaW1wbGUtd2lkZ2V0LXN0YXRlLWNoYW5nZWQnXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIHJlcXVlc3RpbmcgcmVzdG9yYXRpb24gd2hlbiBpZGVudGlmeSBwb3B1cCBjbG9zZXMuXG4gKi9cbmNvbnN0IFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQgPSAncXVlcnlzaW1wbGUtcmVzdG9yZS1vbi1pZGVudGlmeS1jbG9zZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2lkZ2V0IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4sIHsgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9LCBpc1BhbmVsVmlzaWJsZT86IGJvb2xlYW4sIGhhc1NlbGVjdGlvbj86IGJvb2xlYW4sIHNlbGVjdGlvblJlY29yZENvdW50PzogbnVtYmVyLCBsYXN0U2VsZWN0aW9uPzogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSwgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlLCBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdIH0+IHtcbiAgc3RhdGljIHZlcnNpb25NYW5hZ2VyID0gdmVyc2lvbk1hbmFnZXJcblxuICBzdGF0ZTogeyBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0sIGlzUGFuZWxWaXNpYmxlPzogYm9vbGVhbiwgaGFzU2VsZWN0aW9uPzogYm9vbGVhbiwgc2VsZWN0aW9uUmVjb3JkQ291bnQ/OiBudW1iZXIsIGxhc3RTZWxlY3Rpb24/OiB7IHJlY29yZElkczogc3RyaW5nW10sIG91dHB1dERzSWQ6IHN0cmluZywgcXVlcnlJdGVtQ29uZmlnSWQ6IHN0cmluZyB9LCByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGUsIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW10gfSA9IHtcbiAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gLy8gRGVmYXVsdCBtb2RlXG4gIH1cbiAgcHJpdmF0ZSB3aWRnZXRSZWYgPSBSZWFjdC5jcmVhdGVSZWY8SFRNTERpdkVsZW1lbnQ+KClcbiAgcHJpdmF0ZSB2aXNpYmlsaXR5T2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSB2aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGxcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcygpXG4gICAgLy8gTGlzdGVuIGZvciBoYXNoIGNoYW5nZXMgdG8gZGV0ZWN0IHdoZW4gaGFzaCBwYXJhbWV0ZXJzIGFyZSB1cGRhdGVkXG4gICAgLy8gVGhpcyBpcyBuZWVkZWQgd2hlbiBIZWxwZXJTaW1wbGUgb3BlbnMgdGhlIHdpZGdldCB3aXRoIGEgaGFzaCBwYXJhbWV0ZXJcbiAgICAvLyBvciB3aGVuIGhhc2ggcGFyYW1ldGVycyBjaGFuZ2Ugd2hpbGUgdGhlIHdpZGdldCBpcyBhbHJlYWR5IG1vdW50ZWRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzKVxuICAgIFxuICAgIC8vIFNldCB1cCB2aXNpYmlsaXR5IGRldGVjdGlvblxuICAgIHRoaXMuc2V0dXBWaXNpYmlsaXR5RGV0ZWN0aW9uKClcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHNlbGVjdGlvbiBjaGFuZ2VzIGZyb20gcXVlcnktcmVzdWx0XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgcmVzdG9yZSByZXF1ZXN0cyB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlc1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQsIHRoaXMuaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIE5vdGlmeSBIZWxwZXJTaW1wbGUgdGhhdCB0aGlzIHdpZGdldCBpcyBub3cgb3BlblxuICAgIGNvbnN0IG9wZW5FdmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgaXNPcGVuOiB0cnVlXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG9wZW5FdmVudClcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiAnd2lkZ2V0LW9wZW5lZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGlzT3BlbjogdHJ1ZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBBbHNvIGNoZWNrIGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gY2F0Y2ggY2FzZXMgd2hlcmUgaGFzaCB3YXMgYWxyZWFkeSBwcmVzZW50XG4gICAgLy8gd2hlbiB3aWRnZXQgd2FzIG9wZW5lZCAoZS5nLiwgYnkgSGVscGVyU2ltcGxlIG9wZW5pbmcgdGhlIHdpZGdldClcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzKClcbiAgICB9LCAxMDApXG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAvLyBDbGVhbiB1cCBoYXNoY2hhbmdlIGxpc3RlbmVyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcylcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBzZWxlY3Rpb24gY2hhbmdlIGxpc3RlbmVyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIENsZWFuIHVwIHJlc3RvcmUgb24gaWRlbnRpZnkgY2xvc2UgbGlzdGVuZXJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5ULCB0aGlzLmhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2UgYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBcbiAgICAvLyBDbGVhbiB1cCB2aXNpYmlsaXR5IGRldGVjdGlvblxuICAgIHRoaXMuY2xlYW51cFZpc2liaWxpdHlEZXRlY3Rpb24oKVxuICAgIFxuICAgIC8vIE5vdGlmeSBIZWxwZXJTaW1wbGUgdGhhdCB0aGlzIHdpZGdldCBpcyBub3cgY2xvc2VkXG4gICAgY29uc3QgY2xvc2VFdmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgaXNPcGVuOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChjbG9zZUV2ZW50KVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6ICd3aWRnZXQtY2xvc2VkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPikge1xuICAgIGlmIChwcmV2UHJvcHMuY29uZmlnLnF1ZXJ5SXRlbXMgIT09IHRoaXMucHJvcHMuY29uZmlnLnF1ZXJ5SXRlbXMpIHtcbiAgICAgIHRoaXMuY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzKClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTm90aWZpZXMgSGVscGVyU2ltcGxlIG9mIHNlbGVjdGlvbiBjaGFuZ2VzLlxuICAgKiBDYWxsZWQgYnkgUXVlcnlUYXNrUmVzdWx0IHdoZW4gc2VsZWN0aW9uIGlzIG1hZGUuXG4gICAqIFxuICAgKiBAcGFyYW0gcmVjb3JkSWRzIC0gQXJyYXkgb2Ygc2VsZWN0ZWQgcmVjb3JkIElEc1xuICAgKiBAcGFyYW0gZGF0YVNvdXJjZUlkIC0gT3B0aW9uYWwgZGF0YSBzb3VyY2UgSURcbiAgICovXG4gIG5vdGlmeUhlbHBlclNpbXBsZU9mU2VsZWN0aW9uID0gKHJlY29yZElkczogc3RyaW5nW10sIGRhdGFTb3VyY2VJZD86IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlY29yZElkcyxcbiAgICAgICAgZGF0YVNvdXJjZUlkXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdmlzaWJpbGl0eSBkZXRlY3Rpb24gdG8gdHJhY2sgd2hlbiB0aGUgd2lkZ2V0IHBhbmVsIGlzIG9wZW4vY2xvc2VkLlxuICAgKiBVc2VzIEludGVyc2VjdGlvbk9ic2VydmVyIGlmIGF2YWlsYWJsZSwgZmFsbHMgYmFjayB0byBwZXJpb2RpYyBjaGVja2luZy5cbiAgICovXG4gIHNldHVwVmlzaWJpbGl0eURldGVjdGlvbiA9ICgpID0+IHtcbiAgICAvLyBXYWl0IGZvciBuZXh0IHRpY2sgdG8gZW5zdXJlIHJlZiBpcyBzZXRcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghdGhpcy53aWRnZXRSZWYuY3VycmVudCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgICAgICBldmVudDogJ3Zpc2liaWxpdHktZGV0ZWN0aW9uLXNldHVwLWZhaWxlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnd2lkZ2V0LXJlZi1ub3QtYXZhaWxhYmxlJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMud2lkZ2V0UmVmLmN1cnJlbnRcblxuICAgICAgLy8gTWV0aG9kIDE6IEludGVyc2VjdGlvbk9ic2VydmVyIChtb3N0IGVmZmljaWVudClcbiAgICAgIGlmICgnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdykge1xuICAgICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICAoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBlbnRyaWVzWzBdXG4gICAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSBlbnRyeS5pc0ludGVyc2VjdGluZyAmJiBlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+IDBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gT25seSBsb2cgaWYgc3RhdGUgY2hhbmdlZFxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNQYW5lbFZpc2libGUgIT09IGlzVmlzaWJsZSkge1xuICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNQYW5lbFZpc2libGU6IGlzVmlzaWJsZSB9KVxuICAgICAgICAgICAgICB0aGlzLmxvZ1Zpc2liaWxpdHlDaGFuZ2UoaXNWaXNpYmxlLCAnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInKVxuICAgICAgICAgICAgICB0aGlzLm5vdGlmeUhlbHBlclNpbXBsZU9mUGFuZWxTdGF0ZShpc1Zpc2libGUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aHJlc2hvbGQ6IFswLCAwLjEsIDEuMF0sIC8vIFRyaWdnZXIgYXQgMCUsIDEwJSwgYW5kIDEwMCUgdmlzaWJpbGl0eVxuICAgICAgICAgICAgcm9vdE1hcmdpbjogJzBweCdcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyLm9ic2VydmUoZWxlbWVudClcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2aXNpYmlsaXR5LWRldGVjdGlvbi1zZXR1cCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgbWV0aG9kOiAnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNZXRob2QgMjogRmFsbGJhY2sgdG8gcGVyaW9kaWMgY2hlY2tpbmdcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gdGhpcy5jaGVja1Zpc2liaWxpdHkoKVxuICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmlzUGFuZWxWaXNpYmxlICE9PSBpc1Zpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc1BhbmVsVmlzaWJsZTogaXNWaXNpYmxlIH0pXG4gICAgICAgICAgICB0aGlzLmxvZ1Zpc2liaWxpdHlDaGFuZ2UoaXNWaXNpYmxlLCAncGVyaW9kaWMtY2hlY2snKVxuICAgICAgICAgICAgdGhpcy5ub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUoaXNWaXNpYmxlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgMjUwKSAvLyBDaGVjayBldmVyeSAyNTBtc1xuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2aXNpYmlsaXR5LWRldGVjdGlvbi1zZXR1cCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgbWV0aG9kOiAncGVyaW9kaWMtY2hlY2snXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSwgMTAwKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCB2aXNpYmlsaXR5IGRldGVjdGlvbiBvYnNlcnZlcnMvaW50ZXJ2YWxzLlxuICAgKi9cbiAgY2xlYW51cFZpc2liaWxpdHlEZXRlY3Rpb24gPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMudmlzaWJpbGl0eU9ic2VydmVyKSB7XG4gICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlci5kaXNjb25uZWN0KClcbiAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyID0gbnVsbFxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbCAhPT0gbnVsbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsKVxuICAgICAgdGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbCA9IG51bGxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSB3aWRnZXQgZWxlbWVudCBpcyBjdXJyZW50bHkgdmlzaWJsZS5cbiAgICogRmFsbGJhY2sgbWV0aG9kIHdoZW4gSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaXMgbm90IGF2YWlsYWJsZS5cbiAgICovXG4gIGNoZWNrVmlzaWJpbGl0eSA9ICgpOiBib29sZWFuID0+IHtcbiAgICBpZiAoIXRoaXMud2lkZ2V0UmVmLmN1cnJlbnQpIHJldHVybiBmYWxzZVxuICAgIFxuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndpZGdldFJlZi5jdXJyZW50XG4gICAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KVxuICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgXG4gICAgY29uc3QgaXNWaXNpYmxlID0gKFxuICAgICAgc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnICYmXG4gICAgICBzdHlsZS52aXNpYmlsaXR5ICE9PSAnaGlkZGVuJyAmJlxuICAgICAgc3R5bGUub3BhY2l0eSAhPT0gJzAnICYmXG4gICAgICByZWN0LndpZHRoID4gMCAmJlxuICAgICAgcmVjdC5oZWlnaHQgPiAwICYmXG4gICAgICByZWN0LnRvcCA8IHdpbmRvdy5pbm5lckhlaWdodCAmJlxuICAgICAgcmVjdC5ib3R0b20gPiAwICYmXG4gICAgICByZWN0LmxlZnQgPCB3aW5kb3cuaW5uZXJXaWR0aCAmJlxuICAgICAgcmVjdC5yaWdodCA+IDBcbiAgICApXG4gICAgXG4gICAgcmV0dXJuIGlzVmlzaWJsZVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYWNrcyBzZWxlY3Rpb24gY2hhbmdlcyBmcm9tIHF1ZXJ5LXJlc3VsdC5cbiAgICogSW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHVzZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBjb3VudCBmb3IgcmVzdG9yYXRpb24uXG4gICAqL1xuICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudDx7IHdpZGdldElkOiBzdHJpbmcsIHJlY29yZElkczogc3RyaW5nW10sIGRhdGFTb3VyY2VJZD86IHN0cmluZywgb3V0cHV0RHNJZD86IHN0cmluZywgcXVlcnlJdGVtQ29uZmlnSWQ/OiBzdHJpbmcgfT5cbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gT25seSB0cmFjayBpZiB0aGlzIGlzIGZvciBvdXIgd2lkZ2V0XG4gICAgaWYgKGN1c3RvbUV2ZW50LmRldGFpbC53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zdCBoYXNTZWxlY3Rpb24gPSBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzICYmIGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoID4gMFxuICAgIFxuICAgIC8vIEluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUsIHVzZSBhY2N1bXVsYXRlZCByZWNvcmRzIGNvdW50IGZvciByZXN0b3JhdGlvblxuICAgIC8vIFRoZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFyZSB0aGUgc291cmNlIG9mIHRydXRoIGZvciB3aGF0IHNob3VsZCBiZSByZXN0b3JlZFxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgY29uc3QgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICBjb25zdCBzZWxlY3Rpb25Db3VudCA9IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDBcbiAgICAgID8gYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRcbiAgICAgIDogKGhhc1NlbGVjdGlvbiA/IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoIDogMClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS11cGRhdGluZy1zdGF0ZScsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGV2ZW50UmVjb3JkSWRzQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgaGFzU2VsZWN0aW9uRnJvbUV2ZW50OiBoYXNTZWxlY3Rpb24sXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEJlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQsXG4gICAgICBjYWxjdWxhdGVkU2VsZWN0aW9uQ291bnQ6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgJ3dpbGwtc2V0LWhhc1NlbGVjdGlvbic6IHNlbGVjdGlvbkNvdW50ID4gMCxcbiAgICAgICd3aWxsLXNldC1sYXN0U2VsZWN0aW9uJzogaGFzU2VsZWN0aW9uICYmICEhY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQgJiYgISFjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWQsXG4gICAgICBkZWNpc2lvbkxvZ2ljOiB7XG4gICAgICAgICdpc0FjY3VtdWxhdGlvbk1vZGUnOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICdhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDAnOiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDAsXG4gICAgICAgICd1c2UtYWNjdW11bGF0ZWQtY291bnQnOiBpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwLFxuICAgICAgICAndXNlLWV2ZW50LWNvdW50JzogIShpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBoYXNTZWxlY3Rpb246IHNlbGVjdGlvbkNvdW50ID4gMCxcbiAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiBzZWxlY3Rpb25Db3VudCxcbiAgICAgIC8vIFN0b3JlIGxhc3RTZWxlY3Rpb24gZm9yIGNvbXBhdGliaWxpdHksIGJ1dCByZXN0b3JhdGlvbiB3aWxsIHVzZSBhY2N1bXVsYXRlZFJlY29yZHMgaW4gQWRkL1JlbW92ZSBtb2Rlc1xuICAgICAgbGFzdFNlbGVjdGlvbjogaGFzU2VsZWN0aW9uICYmIGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkICYmIGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHJlY29yZElkczogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcyxcbiAgICAgICAgICAgIG91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICAgIH1cbiAgICAgICAgOiB1bmRlZmluZWRcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlU2VsZWN0aW9uQ2hhbmdlLXN0YXRlLXVwZGF0ZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgJ25ldy1oYXNTZWxlY3Rpb24nOiBzZWxlY3Rpb25Db3VudCA+IDAsXG4gICAgICAnbmV3LXNlbGVjdGlvblJlY29yZENvdW50Jzogc2VsZWN0aW9uQ291bnQsXG4gICAgICAnbmV3LWxhc3RTZWxlY3Rpb24tcmVjb3JkSWRzLWNvdW50JzogaGFzU2VsZWN0aW9uICYmIGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkICYmIGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICA/IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgIDogMCxcbiAgICAgICdub3RlJzogJ2xhc3RTZWxlY3Rpb24tb25seS1jb250YWlucy1jdXJyZW50LXF1ZXJ5LXJlY29yZHMtbm90LWFsbC1hY2N1bXVsYXRlZC1yZWNvcmRzJ1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyByZXN0b3JlIHJlcXVlc3Qgd2hlbiBpZGVudGlmeSBwb3B1cCBjbG9zZXMuXG4gICAqIE9ubHkgcmVzdG9yZXMgaWYgd2lkZ2V0IHBhbmVsIGlzIG9wZW4uXG4gICAqIEluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCByZXN0b3JlcyBhbGwgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZSA9IChldmVudDogRXZlbnQpID0+IHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50PHsgXG4gICAgICB3aWRnZXRJZDogc3RyaW5nLCBcbiAgICAgIHJlY29yZElkczogc3RyaW5nW10sIFxuICAgICAgb3V0cHV0RHNJZDogc3RyaW5nLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHN0cmluZ1xuICAgIH0+XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIE9ubHkgaGFuZGxlIGlmIHRoaXMgaXMgZm9yIG91ciB3aWRnZXRcbiAgICBpZiAoY3VzdG9tRXZlbnQuZGV0YWlsLndpZGdldElkICE9PSBpZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGlzV2lkZ2V0T3BlbiA9IHRoaXMuc3RhdGUuaXNQYW5lbFZpc2libGUgPT09IHRydWVcbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtcmVxdWVzdGVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIGlzV2lkZ2V0T3BlbixcbiAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgZXZlbnRSZWNvcmRJZHNDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGgsXG4gICAgICBoYXNTZWxlY3Rpb246IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLFxuICAgICAgbGFzdFNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgIG91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgIH0pXG4gICAgXG4gICAgLy8gT25seSByZXN0b3JlIGlmIHdpZGdldCBpcyBvcGVuXG4gICAgaWYgKCFpc1dpZGdldE9wZW4pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLXdpZGdldC1jbG9zZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlY29yZENvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBTaG91bGQgYWx3YXlzIGNoZWNrIGFjY3VtdWxhdGVkUmVjb3JkcyBmaXJzdCwgcmVnYXJkbGVzcyBvZiBtb2RlXG4gICAgaWYgKHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzICYmIHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtZm91bmQtYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ3Nob3VsZC11c2UtYWNjdW11bGF0ZWQnOiB0cnVlLFxuICAgICAgICAnY3VycmVudC1jb25kaXRpb24tY2hlY2snOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICdjb25kaXRpb24tcmVzdWx0JzogaXNBY2N1bXVsYXRpb25Nb2RlXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBJbiBBZGQvUmVtb3ZlIG1vZGVzLCBjaGVjayBhY2N1bXVsYXRlZCByZWNvcmRzIGluc3RlYWQgb2YgbGFzdFNlbGVjdGlvblxuICAgIGlmIChpc0FjY3VtdWxhdGlvbk1vZGUpIHtcbiAgICAgIGlmICghdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gfHwgIXRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzIHx8IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBoYXNTZWxlY3Rpb246IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgJ2h5cG90aGVzaXMnOiAnaGFzU2VsZWN0aW9uLWlzLWZhbHNlLW9yLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICAgICdtYXliZS1oYXNTZWxlY3Rpb24tc2hvdWxkLWJlLWJhc2VkLW9uLWFjY3VtdWxhdGVkLXJlY29yZHMnOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZXN0b3JlIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzIChncm91cGVkIGJ5IG9yaWdpbiBEUylcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHRoaXMuYWRkU2VsZWN0aW9uVG9NYXAoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IE1heWJlIGFjY3VtdWxhdGVkUmVjb3JkcyBleGlzdCBidXQgd2UncmUgbm90IGluIGFjY3VtdWxhdGlvbiBtb2RlP1xuICAgIGlmICh0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwICYmICFpc0FjY3VtdWxhdGlvbk1vZGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbm90LWFjY3VtdWxhdGlvbi1tb2RlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnaHlwb3RoZXNpcyc6ICdhY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1tb2RlLWlzLW5vdC1hZGQtb3ItcmVtb3ZlJyxcbiAgICAgICAgJ3Nob3VsZC13ZS1zdGlsbC11c2UtdGhlbSc6ICdORUVEUy1JTlZFU1RJR0FUSU9OJ1xuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgdXNlIG9yaWdpbmFsIHZhbGlkYXRpb24gbG9naWNcbiAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIG1hdGNoaW5nIHNlbGVjdGlvbiBzdGF0ZVxuICAgIGlmICghdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gfHwgIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtbm8tc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBoYXNTZWxlY3Rpb246IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uLFxuICAgICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvblxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgdGhlIG91dHB1dERzSWQgbWF0Y2hlc1xuICAgIGlmICh0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZCAhPT0gY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLWRzLW1pc21hdGNoJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXJPdXRwdXREc0lkOiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZCxcbiAgICAgICAgcmVxdWVzdGVkT3V0cHV0RHNJZDogY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRoZSBxdWVyeUl0ZW1Db25maWdJZCBtYXRjaGVzIChvcHRpb25hbCBidXQgZ29vZCB0byBjaGVjaylcbiAgICBpZiAodGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLnF1ZXJ5SXRlbUNvbmZpZ0lkICE9PSBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLXF1ZXJ5LW1pc21hdGNoJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXJRdWVyeUl0ZW1Db25maWdJZDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLnF1ZXJ5SXRlbUNvbmZpZ0lkLFxuICAgICAgICByZXF1ZXN0ZWRRdWVyeUl0ZW1Db25maWdJZDogY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFJlc3RvcmUgc2VsZWN0aW9uIHRvIG1hcCAocmV1c2UgZXhpc3RpbmcgbWV0aG9kKVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmluZy1zZWxlY3Rpb24nLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVjb3JkQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgb3V0cHV0RHNJZDogY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWRcbiAgICB9KVxuICAgIFxuICAgIHRoaXMuYWRkU2VsZWN0aW9uVG9NYXAoKVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgc2VsZWN0aW9uIHRvIG1hcCB3aGVuIHdpZGdldCBvcGVucyAocmV1c2VzIEFkZCB0byBNYXAgbG9naWMpLlxuICAgKiBJbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgcmVzdG9yZXMgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgZ3JvdXBlZCBieSBvcmlnaW4gZGF0YSBzb3VyY2UuXG4gICAqL1xuICBwcml2YXRlIGFkZFNlbGVjdGlvblRvTWFwID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgbGFzdFNlbGVjdGlvbiwgYWNjdW11bGF0ZWRSZWNvcmRzLCByZXN1bHRzTW9kZSB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISFsYXN0U2VsZWN0aW9uLFxuICAgICAgbGFzdFNlbGVjdGlvblJlY29yZENvdW50OiBsYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICBsYXN0U2VsZWN0aW9uT3V0cHV0RHNJZDogbGFzdFNlbGVjdGlvbj8ub3V0cHV0RHNJZFxuICAgIH0pXG4gICAgXG4gICAgLy8gSW4gQWRkL1JlbW92ZSBtb2RlcywgdXNlIGFjY3VtdWxhdGVkIHJlY29yZHMgZm9yIHJlc3RvcmF0aW9uXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogU2hvdWxkIGFsd2F5cyBjaGVjayBhY2N1bXVsYXRlZFJlY29yZHMgZmlyc3QsIHJlZ2FyZGxlc3Mgb2YgbW9kZVxuICAgIC8vIEFkZGluZyBsb2cgdG8gc2VlIGlmIGFjY3VtdWxhdGVkUmVjb3JkcyBleGlzdCBidXQgd2UncmUgbm90IHVzaW5nIHRoZW1cbiAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWRkU2VsZWN0aW9uVG9NYXAtZm91bmQtYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdzaG91bGQtdXNlLWFjY3VtdWxhdGVkJzogdHJ1ZSxcbiAgICAgICAgJ2N1cnJlbnQtY29uZGl0aW9uLWNoZWNrJzogaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCxcbiAgICAgICAgJ2NvbmRpdGlvbi1yZXN1bHQnOiBpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWRkU2VsZWN0aW9uVG9NYXAtbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IDAsXG4gICAgICAgICd3aWxsLWZhbGxiYWNrLXRvLWxhc3RTZWxlY3Rpb24nOiAhIWxhc3RTZWxlY3Rpb25cbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIGlmIChpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBHcm91cCBhY2N1bXVsYXRlZCByZWNvcmRzIGJ5IG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgICAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+KClcbiAgICAgIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgICAgIFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzLmZvckVhY2goKHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgcmVjb3JkSWQgPSByZWNvcmQuZ2V0SWQoKVxuICAgICAgICBsZXQgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsID0gbnVsbFxuICAgICAgICBcbiAgICAgICAgLy8gTWV0aG9kIDE6IFRyeSB0byBnZXQgZnJvbSByZWNvcmQuZ2V0RGF0YVNvdXJjZSgpXG4gICAgICAgIGNvbnN0IHJlY29yZERTID0gcmVjb3JkLmdldERhdGFTb3VyY2U/LigpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgICAgaWYgKHJlY29yZERTKSB7XG4gICAgICAgICAgb3JpZ2luRFMgPSByZWNvcmREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCByZWNvcmREU1xuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnZm91bmQtb3JpZ2luLWRzLWZyb20tcmVjb3JkLWRzJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFM/LmlkIHx8ICdudWxsJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ3JlY29yZC5nZXREYXRhU291cmNlKCknXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTWV0aG9kIDI6IElmIHRoYXQgZmFpbGVkLCBzZWFyY2ggYWxsIGRhdGEgc291cmNlcyBmb3IgYSByZWNvcmQgd2l0aCBtYXRjaGluZyBJRFxuICAgICAgICBpZiAoIW9yaWdpbkRTKSB7XG4gICAgICAgICAgY29uc3QgZHNNYXAgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZXMoKVxuICAgICAgICAgIGNvbnN0IGFsbERhdGFTb3VyY2VzID0gT2JqZWN0LnZhbHVlcyhkc01hcClcbiAgICAgICAgICBcbiAgICAgICAgICBmb3IgKGNvbnN0IGRzIG9mIGFsbERhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSBieSBjaGVja2luZyBmb3IgZ2V0QWxsTG9hZGVkUmVjb3JkcyBtZXRob2RcbiAgICAgICAgICAgIGlmIChkcyAmJiB0eXBlb2YgKGRzIGFzIGFueSkuZ2V0QWxsTG9hZGVkUmVjb3JkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgRFMgaGFzIHRoZSByZWNvcmRcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxSZWNvcmRzID0gKGRzIGFzIGFueSkuZ2V0QWxsTG9hZGVkUmVjb3JkcygpIHx8IFtdXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdSZWNvcmQgPSBhbGxSZWNvcmRzLmZpbmQoKHI6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiByLmdldElkKCkgPT09IHJlY29yZElkKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChtYXRjaGluZ1JlY29yZCkge1xuICAgICAgICAgICAgICAgICAgLy8gRm91bmQgdGhlIHJlY29yZCAtIGdldCBvcmlnaW4gRFMgZnJvbSB0aGlzIERTXG4gICAgICAgICAgICAgICAgICBvcmlnaW5EUyA9IChkcyBhcyBhbnkpLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IGRzIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogJ2ZvdW5kLW9yaWdpbi1kcy12aWEtc2VhcmNoJyxcbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnc2VhcmNoZWQtYWxsLWRhdGEtc291cmNlcycsXG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaGVkRFNJZDogZHMuaWRcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBDb250aW51ZSBzZWFyY2hpbmdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgICAgaWYgKCFyZWNvcmRzQnlPcmlnaW5EUy5oYXMob3JpZ2luRFMpKSB7XG4gICAgICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5zZXQob3JpZ2luRFMsIFtdKVxuICAgICAgICAgIH1cbiAgICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5nZXQob3JpZ2luRFMpIS5wdXNoKHJlY29yZClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2NvdWxkLW5vdC1maW5kLW9yaWdpbi1kcy1mb3ItcmVjb3JkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgICAgd2FybmluZzogJ3JlY29yZC13aWxsLWJlLXNraXBwZWQnXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JpbmctYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBSZXN0b3JlIHNlbGVjdGlvbiBmb3IgZWFjaCBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IHsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmZvckVhY2goKHJlY29yZHMsIG9yaWdpbkRTKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkcyA9IHJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFVzZSBvcmlnaW5EUyBkaXJlY3RseSAobm90IG91dHB1dERTKSBzaW5jZSByZWNvcmRzIGFyZSBzZWxlY3RlZCBpbiBvcmlnaW4gbGF5ZXJzXG4gICAgICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goaWQsIG9yaWdpbkRTLCByZWNvcmRJZHMsIHJlY29yZHMsIHRydWUpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yZWQtb3JpZ2luLWRzJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgem9vbUV4ZWN1dGVkOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yZS1vcmlnaW4tZHMtZmFpbGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBNYXliZSBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCBpbiBhY2N1bXVsYXRpb24gbW9kZT9cbiAgICAvLyBPciBtYXliZSB3ZSBzaG91bGQgYWx3YXlzIGNoZWNrIGFjY3VtdWxhdGVkUmVjb3JkcyBmaXJzdD9cbiAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwICYmICFpc0FjY3VtdWxhdGlvbk1vZGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1hY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1ub3QtYWNjdW11bGF0aW9uLW1vZGUnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnaHlwb3RoZXNpcyc6ICdhY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1tb2RlLWlzLW5vdC1hZGQtb3ItcmVtb3ZlJyxcbiAgICAgICAgJ3Nob3VsZC13ZS1zdGlsbC11c2UtdGhlbSc6ICdORUVEUy1JTlZFU1RJR0FUSU9OJ1xuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbCBiYWNrIHRvIG9yaWdpbmFsIGxvZ2ljIGZvciBcIk5ld1wiIG1vZGVcbiAgICBpZiAoIWxhc3RTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1uby1sYXN0U2VsZWN0aW9uLWV4aXRpbmcnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAnaHlwb3RoZXNpcyc6ICduby1sYXN0U2VsZWN0aW9uLXNvLWV4aXRpbmctZWFybHktbWF5YmUtc2hvdWxkLWNoZWNrLWFjY3VtdWxhdGVkLXJlY29yZHMtZmlyc3QnXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNvbnN0IG91dHB1dERTID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2UobGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgaWYgKCFvdXRwdXREUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1vdXRwdXQtZHMtbm90LWZvdW5kJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uLm91dHB1dERzSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBHZXQgcmVjb3JkcyBmcm9tIG91dHB1dCBEUyAoc2FtZSBhcyBBZGQgdG8gTWFwKVxuICAgIGNvbnN0IGFsbFJlY29yZHMgPSBvdXRwdXREUy5nZXRBbGxMb2FkZWRSZWNvcmRzKCkgfHwgW11cbiAgICBjb25zdCByZWNvcmRzVG9TZWxlY3QgPSBhbGxSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4gXG4gICAgICBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5pbmNsdWRlcyhyZWNvcmQuZ2V0SWQoKSlcbiAgICApIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICBcbiAgICBpZiAocmVjb3Jkc1RvU2VsZWN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1uby1tYXRjaGluZy1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXJSZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gU2FtZSBsb2dpYyBhcyBBZGQgdG8gTWFwIGFjdGlvbiAtIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIGhhbmRsZXMgZHVwbGljYXRlIGNoZWNraW5nXG4gICAgLy8gRG9uJ3Qgem9vbSB3aGVuIHJlc3RvcmluZyBvbiB3aWRnZXQgb3BlbiAoQWRkIHRvIE1hcCBhY3Rpb24gaGFuZGxlcyB6b29tIGZvciBtYW51YWwgY2xpY2tzKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIH0gPSByZXF1aXJlKCcuL3NlbGVjdGlvbi11dGlscycpXG4gICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChpZCwgb3V0cHV0RFMsIGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzLCByZWNvcmRzVG9TZWxlY3QsIHRydWUpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtc2VsZWN0aW9uLWFkZGVkLXRvLW1hcCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHNUb1NlbGVjdC5sZW5ndGgsXG4gICAgICAgIHpvb21FeGVjdXRlZDogZmFsc2VcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtYWRkLXRvLW1hcC1mYWlsZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgcmVzdWx0cyBtb2RlIGNoYW5nZSBmcm9tIGRyb3Bkb3duLlxuICAgKiBVcGRhdGVzIHdpZGdldCBzdGF0ZSBhbmQgbG9ncyB0aGUgY2hhbmdlIGZvciBkZWJ1Z2dpbmcuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlID0gKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnbW9kZS1jaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgcHJldmlvdXNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgbmV3TW9kZTogbW9kZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiBzd2l0Y2hpbmcgdG8gXCJOZXdcIiBtb2RlLCBjbGVhciBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgaWYgKG1vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzLW9uLW1vZGUtc3dpdGNoJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHByZXZpb3VzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZVxuICAgICAgfSlcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyByZXN1bHRzTW9kZTogbW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzOiBbXSB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgcmVzdWx0c01vZGU6IG1vZGUgfSlcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSA9IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2FjY3VtdWxhdGVkLXJlY29yZHMtdXBkYXRlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoeyBhY2N1bXVsYXRlZFJlY29yZHM6IHJlY29yZHMgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBOT1RFOiBObyBsb25nZXIgbmVlZGVkIC0gd2UgdXNlIGV4aXN0aW5nIG91dHB1dCBEUyBpbnN0ZWFkIG9mIGNyZWF0aW5nIG5ldyBvbmUuXG4gICAqIEtlcHQgZm9yIHJlZmVyZW5jZSBidXQgbm90IHVzZWQuXG4gICAqL1xuICBwcml2YXRlIGdldE9yQ3JlYXRlQWNjdW11bGF0ZWRSZXN1bHRzRFMgPSBhc3luYyAob3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UpOiBQcm9taXNlPEZlYXR1cmVMYXllckRhdGFTb3VyY2U+ID0+IHtcbiAgICAvLyBUaGlzIGlzIG5vIGxvbmdlciB1c2VkIC0gd2UgbWVyZ2UgcmVjb3JkcyBpbnRvIGV4aXN0aW5nIG91dHB1dCBEU1xuICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZCAtIHVzZSBleGlzdGluZyBvdXRwdXQgRFMgaW5zdGVhZCcpXG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHNlbGVjdGlvbiBmcm9tIG1hcCBvbmx5IChrZWVwcyBzZWxlY3Rpb24gaW4gd2lkZ2V0J3MgaW50ZXJuYWwgc3RhdGUpLlxuICAgKiBDYWxsZWQgd2hlbiB3aWRnZXQgcGFuZWwgY2xvc2VzIHRvIHJlbW92ZSBzZWxlY3Rpb24gZnJvbSBtYXAgd2hpbGUgcHJlc2VydmluZyB3aWRnZXQgc3RhdGUuXG4gICAqIEFsd2F5cyBjbGVhcnMgYWNjdW11bGF0ZWQgcmVjb3JkcyBpZiB0aGV5IGV4aXN0LCByZWdhcmRsZXNzIG9mIGN1cnJlbnQgbW9kZS5cbiAgICovXG4gIHByaXZhdGUgY2xlYXJTZWxlY3Rpb25Gcm9tTWFwID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgbGFzdFNlbGVjdGlvbiwgYWNjdW11bGF0ZWRSZWNvcmRzLCByZXN1bHRzTW9kZSB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISFsYXN0U2VsZWN0aW9uLFxuICAgICAgbGFzdFNlbGVjdGlvblJlY29yZENvdW50OiBsYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDBcbiAgICB9KVxuICAgIFxuICAgIC8vIEFsd2F5cyBjbGVhciBhY2N1bXVsYXRlZCByZWNvcmRzIGlmIHRoZXkgZXhpc3QgKHJlZ2FyZGxlc3Mgb2YgbW9kZSlcbiAgICAvLyBUaGlzIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmUgbW9kZSBtaWdodCBoYXZlIGNoYW5nZWQgYnV0IHJlY29yZHMgc3RpbGwgZXhpc3RcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1jaGVja2luZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICdjb25kaXRpb24nOiAnYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwJyxcbiAgICAgICdjb25kaXRpb24tcmVzdWx0JzogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgfSlcbiAgICBcbiAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBHcm91cCBhY2N1bXVsYXRlZCByZWNvcmRzIGJ5IG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgICAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+KClcbiAgICAgIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgICAgIFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzLmZvckVhY2goKHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgcmVjb3JkSWQgPSByZWNvcmQuZ2V0SWQoKVxuICAgICAgICBsZXQgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsID0gbnVsbFxuICAgICAgICBcbiAgICAgICAgLy8gTWV0aG9kIDE6IFRyeSB0byBnZXQgZnJvbSByZWNvcmQuZ2V0RGF0YVNvdXJjZSgpXG4gICAgICAgIGNvbnN0IHJlY29yZERTID0gcmVjb3JkLmdldERhdGFTb3VyY2U/LigpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgICAgaWYgKHJlY29yZERTKSB7XG4gICAgICAgICAgb3JpZ2luRFMgPSByZWNvcmREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCByZWNvcmREU1xuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2xlYXItZm91bmQtb3JpZ2luLWRzLWZyb20tcmVjb3JkLWRzJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFM/LmlkIHx8ICdudWxsJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ3JlY29yZC5nZXREYXRhU291cmNlKCknXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTWV0aG9kIDI6IElmIHRoYXQgZmFpbGVkLCBzZWFyY2ggYWxsIGRhdGEgc291cmNlcyBmb3IgYSByZWNvcmQgd2l0aCBtYXRjaGluZyBJRFxuICAgICAgICBpZiAoIW9yaWdpbkRTKSB7XG4gICAgICAgICAgY29uc3QgZHNNYXAgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZXMoKVxuICAgICAgICAgIGNvbnN0IGFsbERhdGFTb3VyY2VzID0gT2JqZWN0LnZhbHVlcyhkc01hcClcbiAgICAgICAgICBcbiAgICAgICAgICBmb3IgKGNvbnN0IGRzIG9mIGFsbERhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSBieSBjaGVja2luZyBmb3IgZ2V0QWxsTG9hZGVkUmVjb3JkcyBtZXRob2RcbiAgICAgICAgICAgIGlmIChkcyAmJiB0eXBlb2YgKGRzIGFzIGFueSkuZ2V0QWxsTG9hZGVkUmVjb3JkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgRFMgaGFzIHRoZSByZWNvcmRcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxSZWNvcmRzID0gKGRzIGFzIGFueSkuZ2V0QWxsTG9hZGVkUmVjb3JkcygpIHx8IFtdXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdSZWNvcmQgPSBhbGxSZWNvcmRzLmZpbmQoKHI6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiByLmdldElkKCkgPT09IHJlY29yZElkKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChtYXRjaGluZ1JlY29yZCkge1xuICAgICAgICAgICAgICAgICAgLy8gRm91bmQgdGhlIHJlY29yZCAtIGdldCBvcmlnaW4gRFMgZnJvbSB0aGlzIERTXG4gICAgICAgICAgICAgICAgICBvcmlnaW5EUyA9IChkcyBhcyBhbnkpLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IGRzIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NsZWFyLWZvdW5kLW9yaWdpbi1kcy12aWEtc2VhcmNoJyxcbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnc2VhcmNoZWQtYWxsLWRhdGEtc291cmNlcycsXG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaGVkRFNJZDogZHMuaWRcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBDb250aW51ZSBzZWFyY2hpbmdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgICAgaWYgKCFyZWNvcmRzQnlPcmlnaW5EUy5oYXMob3JpZ2luRFMpKSB7XG4gICAgICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5zZXQob3JpZ2luRFMsIFtdKVxuICAgICAgICAgIH1cbiAgICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5nZXQob3JpZ2luRFMpIS5wdXNoKHJlY29yZClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2NsZWFyLWNvdWxkLW5vdC1maW5kLW9yaWdpbi1kcy1mb3ItcmVjb3JkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgICAgd2FybmluZzogJ3JlY29yZC13aWxsLWJlLXNraXBwZWQnXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzLWZyb20tbWFwJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgc2VsZWN0aW9uIGZyb20gZWFjaCBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmZvckVhY2goKHJlY29yZHMsIG9yaWdpbkRTKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIENsZWFyIHNlbGVjdGlvbiBmcm9tIG9yaWdpbkRTIChtYXApIG9ubHlcbiAgICAgICAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhbXSwgW10pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFB1Ymxpc2ggY2xlYXIgbWVzc2FnZSBzbyBtYXAga25vd3MgdG8gY2xlYXJcbiAgICAgICAgICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICAgICAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UoaWQsIFtdLCBbb3JpZ2luRFMuaWRdKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyZWQtb3JpZ2luLWRzLXNlbGVjdGlvbicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzLmxlbmd0aFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2xlYXItb3JpZ2luLWRzLWZhaWxlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLWNsZWFyZWQtYWNjdW11bGF0ZWQtcmVjb3Jkcy1yZXR1cm5pbmcnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICd3aWxsLW5vdC1mYWxsYmFjay10by1sYXN0U2VsZWN0aW9uJzogdHJ1ZVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBNYXliZSBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlIGRpZG4ndCBlbnRlciB0aGUgaWYgYmxvY2s/XG4gICAgLy8gT3IgbWF5YmUgd2Ugc2hvdWxkIGFsd2F5cyBjbGVhciBhY2N1bXVsYXRlZCByZWNvcmRzIGlmIHRoZXkgZXhpc3Q/XG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1hY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1ub3QtY2xlYXJpbmcnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnaHlwb3RoZXNpcyc6ICdhY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1jb25kaXRpb24tZmFpbGVkLXdoeScsXG4gICAgICAgICdjb25kaXRpb24td2FzJzogJ2FjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCcsXG4gICAgICAgICdjb25kaXRpb24tcmVzdWx0JzogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbCBiYWNrIHRvIG9yaWdpbmFsIGxvZ2ljIGZvciBcIk5ld1wiIG1vZGVcbiAgICBpZiAoIWxhc3RTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtbm8tbGFzdFNlbGVjdGlvbi1leGl0aW5nJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAnaHlwb3RoZXNpcyc6ICduby1sYXN0U2VsZWN0aW9uLXNvLWV4aXRpbmctbWF5YmUtc2hvdWxkLWhhdmUtY2xlYXJlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLWZpcnN0J1xuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgICBjb25zdCBvdXRwdXREUyA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlKGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIFxuICAgIGlmICghb3V0cHV0RFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtb3V0cHV0LWRzLW5vdC1mb3VuZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3V0cHV0RHNJZDogbGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBvcmlnaW4gRFMgKHRoZSBtYXAgbGF5ZXIpXG4gICAgICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICBcbiAgICAgIGlmICghb3JpZ2luRFMpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLW9yaWdpbi1kcy1ub3QtZm91bmQnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBvdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uLm91dHB1dERzSWRcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGN1cnJlbnQgc2VsZWN0aW9uIHN0YXRlIGJlZm9yZSBjbGVhcmluZ1xuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkSWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgY29uc3Qgb3VyUmVjb3JkSWRzID0gbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHNcbiAgICAgIGNvbnN0IG1hdGNoZXNPdXJTZWxlY3Rpb24gPSBvdXJSZWNvcmRJZHMubGVuZ3RoID09PSBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoICYmXG4gICAgICAgIG91clJlY29yZElkcy5ldmVyeShyZWNvcmRJZCA9PiBjdXJyZW50U2VsZWN0ZWRJZHMuaW5jbHVkZXMocmVjb3JkSWQpKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNoZWNraW5nLW1hcC1zZWxlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91clJlY29yZENvdW50OiBvdXJSZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICBtYXBTZWxlY3RlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICBtYXRjaGVzT3VyU2VsZWN0aW9uLFxuICAgICAgICBvdXJSZWNvcmRJZHM6IG91clJlY29yZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgbWFwU2VsZWN0ZWRJZHM6IGN1cnJlbnRTZWxlY3RlZElkcy5zbGljZSgwLCA1KVxuICAgICAgfSlcblxuICAgICAgaWYgKHR5cGVvZiBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gQ2xlYXIgc2VsZWN0aW9uIGZyb20gb3JpZ2luRFMgKG1hcCkgb25seSAtIGRvbid0IHRvdWNoIG91dHB1dERTICh3aWRnZXQgc3RhdGUpXG4gICAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhbXSwgW10pXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2xlYXJlZC1vcmlnaW4tZHMtc2VsZWN0aW9uJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWRcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFB1Ymxpc2ggY2xlYXIgbWVzc2FnZSBzbyBtYXAga25vd3MgdG8gY2xlYXJcbiAgICAgICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKGlkLCBbXSwgW29yaWdpbkRTLmlkXSlcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLXB1Ymxpc2hlZC1jbGVhci1tZXNzYWdlJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWRcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFZlcmlmeSBzZWxlY3Rpb24gd2FzIGNsZWFyZWRcbiAgICAgICAgY29uc3QgYWZ0ZXJDbGVhcklkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLXNlbGVjdGlvbi1jbGVhcmVkLWZyb20tbWFwJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgcmVjb3JkQ291bnQ6IGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBzZWxlY3Rpb25BZnRlckNsZWFyOiBhZnRlckNsZWFySWRzLmxlbmd0aCxcbiAgICAgICAgICB2ZXJpZmllZENsZWFyZWQ6IGFmdGVyQ2xlYXJJZHMubGVuZ3RoID09PSAwXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtb3JpZ2luLWRzLW5vLXNlbGVjdC1tZXRob2QnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBoYXNTZWxlY3RNZXRob2Q6IHR5cGVvZiBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbidcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhci1mcm9tLW1hcC1mYWlsZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9ncyB2aXNpYmlsaXR5IHN0YXRlIGNoYW5nZXMuXG4gICAqL1xuICBsb2dWaXNpYmlsaXR5Q2hhbmdlID0gKGlzVmlzaWJsZTogYm9vbGVhbiwgbWV0aG9kOiBzdHJpbmcpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiBpc1Zpc2libGUgPyAncGFuZWwtb3BlbmVkJyA6ICdwYW5lbC1jbG9zZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBpc1Zpc2libGUsXG4gICAgICBtZXRob2QsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG4gICAgXG4gICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgLy8gV2hlbiBwYW5lbCBvcGVucywgY2hlY2sgaWYgd2UgaGF2ZSBzZWxlY3Rpb24gdG8gcmVzdG9yZVxuICAgICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgY29uc3QgaGFzQWNjdW11bGF0ZWRSZWNvcmRzID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uU3RhdGUgPSB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZVxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uVG9SZXN0b3JlID0gaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICA/IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyBcbiAgICAgICAgOiBoYXNTZWxlY3Rpb25TdGF0ZVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWNoZWNraW5nLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBoYXNTZWxlY3Rpb246IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDAsXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLFxuICAgICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUsXG4gICAgICAgIGRlY2lzaW9uTG9naWM6IHtcbiAgICAgICAgICAnaXNBY2N1bXVsYXRpb25Nb2RlJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAgICdoYXNBY2N1bXVsYXRlZFJlY29yZHMnOiBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgICAgJ2hhc1NlbGVjdGlvblN0YXRlJzogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgICAgJ2NhbGN1bGF0ZWQtaGFzU2VsZWN0aW9uVG9SZXN0b3JlJzogaGFzU2VsZWN0aW9uVG9SZXN0b3JlLFxuICAgICAgICAgICd3aWxsLWNhbGwtYWRkU2VsZWN0aW9uVG9NYXAnOiBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQWRkIHNlbGVjdGlvbiB0byBtYXAgaWYgd2UgaGF2ZSBvbmVcbiAgICAgIGlmIChoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWNhbGxpbmctYWRkU2VsZWN0aW9uVG9NYXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvUmVzdG9yZS1pcy10cnVlJ1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1za2lwcGluZy1hZGRTZWxlY3Rpb25Ub01hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9SZXN0b3JlLWlzLWZhbHNlJyxcbiAgICAgICAgICB3aHk6IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgICAgID8gJ25vLWFjY3VtdWxhdGVkLXJlY29yZHMnIFxuICAgICAgICAgICAgOiAnbm8taGFzU2VsZWN0aW9uLXN0YXRlJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXaGVuIHBhbmVsIGNsb3NlcywgY2xlYXIgc2VsZWN0aW9uIGZyb20gbWFwIG9ubHkgKGtlZXAgd2lkZ2V0IHN0YXRlKVxuICAgICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgY29uc3QgaGFzQWNjdW11bGF0ZWRSZWNvcmRzID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uU3RhdGUgPSB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZVxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uVG9DbGVhciA9IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgPyBoYXNBY2N1bXVsYXRlZFJlY29yZHMgXG4gICAgICAgIDogaGFzU2VsZWN0aW9uU3RhdGVcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jaGVja2luZy1zZWxlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5zZWxlY3Rpb25SZWNvcmRDb3VudCB8fCAwLFxuICAgICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgICAgbGFzdFNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzU2VsZWN0aW9uVG9DbGVhcixcbiAgICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAgICdpc0FjY3VtdWxhdGlvbk1vZGUnOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICAgJ2hhc0FjY3VtdWxhdGVkUmVjb3Jkcyc6IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgICAnaGFzU2VsZWN0aW9uU3RhdGUnOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgICAnY2FsY3VsYXRlZC1oYXNTZWxlY3Rpb25Ub0NsZWFyJzogaGFzU2VsZWN0aW9uVG9DbGVhcixcbiAgICAgICAgICAnd2lsbC1jYWxsLWNsZWFyU2VsZWN0aW9uRnJvbU1hcCc6IGhhc1NlbGVjdGlvblRvQ2xlYXJcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKGhhc1NlbGVjdGlvblRvQ2xlYXIpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNhbGxpbmctY2xlYXJTZWxlY3Rpb25Gcm9tTWFwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub0NsZWFyLWlzLXRydWUnXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb25Gcm9tTWFwKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1uby1zZWxlY3Rpb24tdG8tY2xlYXInLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvQ2xlYXItaXMtZmFsc2UnLFxuICAgICAgICAgIHdoeTogaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICAgICAgPyAnbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycgXG4gICAgICAgICAgICA6ICduby1oYXNTZWxlY3Rpb24tc3RhdGUnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSBvZiBwYW5lbCB2aXNpYmlsaXR5IHN0YXRlIGNoYW5nZXMuXG4gICAqL1xuICBub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUgPSAoaXNWaXNpYmxlOiBib29sZWFuKSA9PiB7XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIGlzT3BlbjogaXNWaXNpYmxlXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBoYXNoIHBhcmFtZXRlciBmcm9tIHRoZSBVUkwgYWZ0ZXIgaXQgaGFzIGJlZW4gdXNlZCB0byBwb3B1bGF0ZSBhIHF1ZXJ5LlxuICAgKiBUaGlzIHByZXZlbnRzIHRoZSBwYXJhbWV0ZXIgZnJvbSBiZWluZyByZS1hcHBsaWVkIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gcXVlcmllcy5cbiAgICovXG4gIHJlbW92ZUhhc2hQYXJhbWV0ZXIgPSAoc2hvcnRJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgIGlmICghaGFzaCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgICBcbiAgICBpZiAodXJsUGFyYW1zLmhhcyhzaG9ydElkKSkge1xuICAgICAgY29uc3QgdmFsdWUgPSB1cmxQYXJhbXMuZ2V0KHNob3J0SWQpXG4gICAgICB1cmxQYXJhbXMuZGVsZXRlKHNob3J0SWQpXG4gICAgICBjb25zdCBuZXdIYXNoID0gdXJsUGFyYW1zLnRvU3RyaW5nKClcbiAgICAgIC8vIFVwZGF0ZSBVUkwgd2l0aG91dCB0cmlnZ2VyaW5nIG5hdmlnYXRpb25cbiAgICAgIC8vIElmIG5vIGhhc2ggcGFyYW1zIHJlbWFpbiwgcmVtb3ZlIGhhc2ggZW50aXJlbHksIG90aGVyd2lzZSBrZWVwIHRoZSBoYXNoXG4gICAgICBjb25zdCBuZXdVcmwgPSBuZXdIYXNoIFxuICAgICAgICA/IGAke3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZX0ke3dpbmRvdy5sb2NhdGlvbi5zZWFyY2h9IyR7bmV3SGFzaH1gIFxuICAgICAgICA6IGAke3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZX0ke3dpbmRvdy5sb2NhdGlvbi5zZWFyY2h9YFxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1yZW1vdmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHNob3J0SWQ6IHNob3J0SWQsXG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgbmV3SGFzaDogbmV3SGFzaCxcbiAgICAgICAgbmV3VXJsOiBuZXdVcmxcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgbmV3VXJsKVxuICAgICAgXG4gICAgICAvLyBDbGVhciB0aGUgc3RhdGUgc28gaXQgd29uJ3QgdHJpZ2dlciBhZ2FpblxuICAgICAgaWYgKHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgPT09IHNob3J0SWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWQgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHRoZSBVUkwgaGFzaCBwYXJhbWV0ZXJzIGZvciBhbnkgc2hvcnRJZHMgdGhhdCBtYXRjaCBxdWVyeSBpdGVtcy5cbiAgICogSWYgZm91bmQsIHN0b3JlcyB0aGUgdmFsdWUgdG8gYmUgdXNlZCB0byBhdXRvLXBvcHVsYXRlIGFuZCBleGVjdXRlIHRoZSBxdWVyeS5cbiAgICogRXhwZXJpZW5jZSBCdWlsZGVyIHVzZXMgaGFzaC1iYXNlZCBVUkwgcGFyYW1ldGVycyAoZS5nLiwgI3Bpbj0yMjIzMDU5MDEzKS5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIHByaW9yaXRpemVzIHRoZSBmaXJzdCBtYXRjaGluZyBzaG9ydElkIGZvdW5kIGluIHRoZSBxdWVyeSBpdGVtcyBvcmRlci5cbiAgICogSWYgbXVsdGlwbGUgaGFzaCBwYXJhbWV0ZXJzIGV4aXN0LCBvbmx5IHRoZSBmaXJzdCBtYXRjaCBpcyB1c2VkLlxuICAgKi9cbiAgY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKCFjb25maWcucXVlcnlJdGVtcz8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IGFsbCBzaG9ydElkcyBmcm9tIHF1ZXJ5IGl0ZW1zXG4gICAgY29uc3Qgc2hvcnRJZHMgPSBjb25maWcucXVlcnlJdGVtc1xuICAgICAgLm1hcChpdGVtID0+IGl0ZW0uc2hvcnRJZClcbiAgICAgIC5maWx0ZXIoc2hvcnRJZCA9PiBzaG9ydElkICE9IG51bGwgJiYgc2hvcnRJZC50cmltKCkgIT09ICcnKVxuXG4gICAgaWYgKHNob3J0SWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gR2V0IFVSTCBoYXNoIGZyYWdtZW50IHBhcmFtZXRlcnMgKEV4QiB1c2VzICMgZm9yIHBhcmFtcylcbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpIC8vIFJlbW92ZSB0aGUgI1xuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcblxuICAgIC8vIExvZyBoYXNoIGNoZWNrIGZvciBkZWJ1Z2dpbmdcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2hhc2gtY2hlY2snLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBoYXNoOiBoYXNoLFxuICAgICAgYXZhaWxhYmxlU2hvcnRJZHM6IHNob3J0SWRzLFxuICAgICAgY3VycmVudFN0YXRlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlXG4gICAgfSlcblxuICAgIC8vIEZpbmQgdGhlIGZpcnN0IG1hdGNoaW5nIHNob3J0SWQgKHByaW9yaXRpemUgZmlyc3QgbWF0Y2ggaW4gcXVlcnkgaXRlbXMgb3JkZXIpXG4gICAgLy8gVGhpcyBlbnN1cmVzIHdlIG9ubHkgc2V0IHN0YXRlIG9uY2UgcGVyIGNoZWNrIGFuZCBtYWludGFpbnMgY29uc2lzdGVudCBiZWhhdmlvclxuICAgIGZvciAoY29uc3Qgc2hvcnRJZCBvZiBzaG9ydElkcykge1xuICAgICAgaWYgKHVybFBhcmFtcy5oYXMoc2hvcnRJZCkpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB1cmxQYXJhbXMuZ2V0KHNob3J0SWQpXG4gICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHRoZSB2YWx1ZSBoYXMgY2hhbmdlZCB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkICE9PSBzaG9ydElkIHx8IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC1kZXRlY3RlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgIHNob3J0SWQ6IHNob3J0SWQsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBwcmV2aW91c1Nob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgICBwcmV2aW91c1ZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgd2hlbiBoYXNoIHBhcmFtZXRlciBpcyBkZXRlY3RlZCB0byBhdm9pZCBidWdzIHdpdGggYWNjdW11bGF0aW9uIG1vZGVzXG4gICAgICAgICAgY29uc3QgbmVlZHNNb2RlUmVzZXQgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlICE9PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgIFxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlOiB7IHNob3J0SWQsIHZhbHVlIH0sXG4gICAgICAgICAgICAvLyBSZXNldCB0byBOZXcgbW9kZSBhbmQgY2xlYXIgYWNjdW11bGF0ZWRSZWNvcmRzIChzYW1lIGFzIGhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlIGRvZXMpXG4gICAgICAgICAgICAuLi4obmVlZHNNb2RlUmVzZXQgPyB7IFxuICAgICAgICAgICAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogW11cbiAgICAgICAgICAgIH0gOiB7fSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChuZWVkc01vZGVSZXNldCkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgICBldmVudDogJ2hhc2gtcmVzZXQtbW9kZS10by1uZXcnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgcHJldmlvdXNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICAgICAgICByZWFzb246ICdoYXNoLXBhcmFtZXRlci1kZXRlY3RlZCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC1za2lwcGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgc2hvcnRJZDogc2hvcnRJZCxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHJlYXNvbjogJ3ZhbHVlLXVuY2hhbmdlZCdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAvLyBFeGl0IGFmdGVyIGZpcnN0IG1hdGNoXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgbm8gaGFzaCBwYXJhbWV0ZXJzIG1hdGNoIGFueSBzaG9ydElkLCBjbGVhciB0aGUgc3RhdGVcbiAgICAvLyBUaGlzIGhhbmRsZXMgY2FzZXMgd2hlcmUgaGFzaCBwYXJhbWV0ZXJzIHdlcmUgcmVtb3ZlZFxuICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1jbGVhcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHByZXZpb3VzU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZS5zaG9ydElkLFxuICAgICAgICBwcmV2aW91c1ZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLnZhbHVlLFxuICAgICAgICByZWFzb246ICduby1tYXRjaGluZy1oYXNoLXBhcmFtcydcbiAgICAgIH0pXG4gICAgICB0aGlzLnNldFN0YXRlKHsgaW5pdGlhbFF1ZXJ5VmFsdWU6IHVuZGVmaW5lZCB9KVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyBjb25maWcsIGlkLCBpY29uLCBsYWJlbCwgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgY29udHJvbGxlcldpZGdldElkIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3Qgd2lkZ2V0TGFiZWwgPSB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7XG4gICAgICBpZDogJ193aWRnZXRMYWJlbCcsXG4gICAgICBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLl93aWRnZXRMYWJlbFxuICAgIH0pXG4gICAgaWYgKCFjb25maWcucXVlcnlJdGVtcz8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gPFdpZGdldFBsYWNlaG9sZGVyIGljb249e2ljb25NYXAuaWNvblF1ZXJ5fSB3aWRnZXRJZD17dGhpcy5wcm9wcy5pZH0gbmFtZT17d2lkZ2V0TGFiZWx9IC8+XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5hcnJhbmdlVHlwZSA9PT0gUXVlcnlBcnJhbmdlVHlwZS5Qb3BwZXIgJiYgIWNvbnRyb2xsZXJXaWRnZXRJZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFF1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17YCR7bGF5b3V0SWR9OiR7bGF5b3V0SXRlbUlkfWB9PlxuICAgICAgICAgIDxUYXNrTGlzdFBvcHBlcldyYXBwZXJcbiAgICAgICAgICAgIGlkPXswfVxuICAgICAgICAgICAgaWNvbj17aWNvbn1cbiAgICAgICAgICAgIHBvcHBlclRpdGxlPXtsYWJlbH1cbiAgICAgICAgICAgIG1pblNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/Lm1pblNpemV9XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8uZGVmYXVsdFNpemV9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFF1ZXJ5VGFza0xpc3QgXG4gICAgICAgICAgICAgIHdpZGdldElkPXtpZH0gXG4gICAgICAgICAgICAgIGlzSW5Qb3BwZXIgXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfSBcbiAgICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtjb25maWcuZGVmYXVsdFBhZ2VTaXplfSBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwYi00JyBcbiAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9IFxuICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXt0aGlzLnJlbW92ZUhhc2hQYXJhbWV0ZXJ9XG4gICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXt0aGlzLnN0YXRlLnJlc3VsdHNNb2RlfVxuICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlPXt0aGlzLmhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlfVxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e3RoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17dGhpcy5oYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmFycmFuZ2VUeXBlID09PSBRdWVyeUFycmFuZ2VUeXBlLklubGluZSAmJiAhY29udHJvbGxlcldpZGdldElkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgPFRhc2tMaXN0SW5saW5lXG4gICAgICAgICAgICB3aWRnZXRJZD17aWR9XG4gICAgICAgICAgICB3aWRnZXRMYWJlbD17bGFiZWx9XG4gICAgICAgICAgICB3cmFwPXtjb25maWcuYXJyYW5nZVdyYXB9XG4gICAgICAgICAgICBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc31cbiAgICAgICAgICAgIG1pblNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/Lm1pblNpemV9XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8uZGVmYXVsdFNpemV9XG4gICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZT17dGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZX1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMucmVtb3ZlSGFzaFBhcmFtZXRlcn1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFBhcGVyIHJlZj17dGhpcy53aWRnZXRSZWZ9IHZhcmlhbnQ9J2ZsYXQnIGNsYXNzTmFtZT0namltdS13aWRnZXQgcnVudGltZS1xdWVyeScgY3NzPXtjc3NgXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGB9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndpZGdldC1oZWFkZXJcIiBjc3M9e2Nzc2BcbiAgICAgICAgICBwYWRkaW5nOiA2cHggMTZweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZSk7XG4gICAgICAgIGB9PlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ3aWRnZXQtdGl0bGVcIiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICB7bGFiZWwgfHwgd2lkZ2V0TGFiZWx9XG4gICAgICAgICAgPC9oMz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgYH0+XG4gICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza0xpc3QgXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e2lkfSBcbiAgICAgICAgICAgICAgICBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc30gXG4gICAgICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtjb25maWcuZGVmYXVsdFBhZ2VTaXplfSBcbiAgICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZT17dGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZX0gXG4gICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17dGhpcy5yZW1vdmVIYXNoUGFyYW1ldGVyfVxuICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXt0aGlzLnN0YXRlLnJlc3VsdHNNb2RlfVxuICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2U9e3RoaXMuaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXt0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17dGhpcy5oYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGUub3JnXG4gICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9QYXBlcj5cbiAgICApXG4gIH1cbn1cblxuXG4gZXhwb3J0IGZ1bmN0aW9uIF9fc2V0X3dlYnBhY2tfcHVibGljX3BhdGhfXyh1cmwpIHsgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB1cmwgfSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==