System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/sql-expression-runtime","jimu-theme","widgets/shared-code/common","jimu-layouts/layout-runtime","jimu-core/react","esri/geometry/Extent"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	var __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_react__ = {};
	var __WEBPACK_EXTERNAL_MODULE_esri_geometry_Extent__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_react__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_esri_geometry_Extent__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_react__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_esri_geometry_Extent__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/filled/directional/down.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/filled/directional/down.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownFilled: () => (/* binding */ DownFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/down.svg */ "./jimu-icons/svg/filled/directional/down.svg");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/filled/directional/right.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/filled/directional/right.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightFilled: () => (/* binding */ RightFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/right.svg */ "./jimu-icons/svg/filled/directional/right.svg");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowLeftOutlined: () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/collapse-all.tsx":
/*!**********************************************************!*\
  !*** ./jimu-icons/outlined/directional/collapse-all.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollapseAllOutlined: () => (/* binding */ CollapseAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/collapse-all.svg */ "./jimu-icons/svg/outlined/directional/collapse-all.svg");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CollapseAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/expand-all.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/expand-all.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExpandAllOutlined: () => (/* binding */ ExpandAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/expand-all.svg */ "./jimu-icons/svg/outlined/directional/expand-all.svg");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ExpandAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/trash.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TrashOutlined: () => (/* binding */ TrashOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/svg/filled/directional/down.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/down.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m14 4-6 8-6-8z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/directional/right.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/right.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m4 2 8 6-8 6z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/collapse-all.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/collapse-all.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/expand-all.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/expand-all.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/error.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/error.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/icon.svg":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/query-simple/icon.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" d=\"M8.5 3A5.5 5.5 0 0 1 14 8.5a5.5 5.5 0 0 1-1.273 3.527l4.053 4.054a.75.75 0 1 1-1.06 1.06l-4.054-4.053a5.5 5.5 0 0 1-3.527 1.273 5.5 5.5 0 1 1 0-11H8.5zm0 1.5h-.361a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\"></path><rect width=\"19\" height=\"19\" x=\".5\" y=\".5\" stroke=\"#000\" rx=\"1.5\"></rect></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/config.ts":
/*!************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateToolType: () => (/* binding */ CreateToolType),
/* harmony export */   FieldsType: () => (/* binding */ FieldsType),
/* harmony export */   ListDirection: () => (/* binding */ ListDirection),
/* harmony export */   PagingType: () => (/* binding */ PagingType),
/* harmony export */   QueryArrangeType: () => (/* binding */ QueryArrangeType),
/* harmony export */   ResultSelectMode: () => (/* binding */ ResultSelectMode),
/* harmony export */   SelectionType: () => (/* binding */ SelectionType),
/* harmony export */   SortDirection: () => (/* binding */ SortDirection),
/* harmony export */   SpatialFilterType: () => (/* binding */ SpatialFilterType),
/* harmony export */   SpatialRelation: () => (/* binding */ SpatialRelation),
/* harmony export */   SymbolType: () => (/* binding */ SymbolType),
/* harmony export */   UnitType: () => (/* binding */ UnitType),
/* harmony export */   mapJSAPISpatialRelToDsSpatialRel: () => (/* binding */ mapJSAPISpatialRelToDsSpatialRel),
/* harmony export */   mapJSAPIUnitToDsUnit: () => (/* binding */ mapJSAPIUnitToDsUnit)
/* harmony export */ });
var CreateToolType;
(function (CreateToolType) {
    CreateToolType["Point"] = "Point";
    CreateToolType["Polyline"] = "Polyline";
    CreateToolType["Polygon"] = "Polygon";
    CreateToolType["Rectangle"] = "Rectangle";
    CreateToolType["Circle"] = "Circle";
})(CreateToolType || (CreateToolType = {}));
var SelectionType;
(function (SelectionType) {
    SelectionType["NewSelection"] = "NEW_SELECTION";
    SelectionType["AddToSelection"] = "ADD_TO_CURRENT_SELECTION";
    SelectionType["RemoveFromSelection"] = "REMOVE_FROM_CURRENT_SELECTION";
    SelectionType["SubsetSelection"] = "SUBSET_FROM_CURRENT_SELECTION";
    SelectionType["SwitchSelection"] = "SWITCH_CURRENT_SELECTION";
})(SelectionType || (SelectionType = {}));
var QueryArrangeType;
(function (QueryArrangeType) {
    QueryArrangeType["Block"] = "BLOCK";
    QueryArrangeType["Inline"] = "INLINE";
    QueryArrangeType["Popper"] = "POPPER";
})(QueryArrangeType || (QueryArrangeType = {}));
var SpatialFilterType;
(function (SpatialFilterType) {
    SpatialFilterType["CurrentMapExtent"] = "CurrentMapExtent";
    SpatialFilterType["InteractiveDrawMode"] = "InteractiveDrawMode";
    SpatialFilterType["None"] = "";
})(SpatialFilterType || (SpatialFilterType = {}));
var SpatialRelation;
(function (SpatialRelation) {
    SpatialRelation["Intersect"] = "intersects";
    SpatialRelation["Contain"] = "contains";
    SpatialRelation["Cross"] = "crosses";
    SpatialRelation["EnvelopeIntersect"] = "envelope-intersects";
    SpatialRelation["IndexIntersect"] = "index-intersects";
    SpatialRelation["Overlap"] = "overlaps";
    SpatialRelation["Touch"] = "touches";
    SpatialRelation["Within"] = "within";
})(SpatialRelation || (SpatialRelation = {}));
const mapJSAPISpatialRelToDsSpatialRel = {
    [SpatialRelation.Intersect]: 'esriSpatialRelIntersects',
    [SpatialRelation.Contain]: 'esriSpatialRelContains',
    [SpatialRelation.Cross]: 'esriSpatialRelCrosses',
    [SpatialRelation.EnvelopeIntersect]: 'esriSpatialRelEnvelopeIntersects',
    [SpatialRelation.IndexIntersect]: 'esriSpatialRelIndexIntersects',
    [SpatialRelation.Overlap]: 'esriSpatialRelOverlaps',
    [SpatialRelation.Touch]: 'esriSpatialRelTouches',
    [SpatialRelation.Within]: 'esriSpatialRelWithin'
};
var UnitType;
(function (UnitType) {
    UnitType["Miles"] = "Miles";
    UnitType["Kilometers"] = "Kilometers";
    UnitType["Feet"] = "Feet";
    UnitType["Meters"] = "Meters";
    UnitType["NauticalMiles"] = "NauticalMiles";
})(UnitType || (UnitType = {}));
const mapJSAPIUnitToDsUnit = {
    [UnitType.Miles]: 'esriSRUnit_StatuteMile',
    [UnitType.Kilometers]: 'esriSRUnit_Kilometer',
    [UnitType.Feet]: 'esriSRUnit_Foot',
    [UnitType.Meters]: 'esriSRUnit_Meter',
    [UnitType.NauticalMiles]: 'esriSRUnit_NauticalMile'
};
var ListDirection;
(function (ListDirection) {
    ListDirection["Horizontal"] = "Horizontal";
    ListDirection["Vertical"] = "Vertical";
})(ListDirection || (ListDirection = {}));
var PagingType;
(function (PagingType) {
    PagingType["MultiPage"] = "MultiPage";
    PagingType["LazyLoad"] = "LazyLoad";
    PagingType["Simple"] = "Simple";
})(PagingType || (PagingType = {}));
var FieldsType;
(function (FieldsType) {
    FieldsType["PopupSetting"] = "PopupSetting";
    FieldsType["SelectAttributes"] = "SelectAttributes";
})(FieldsType || (FieldsType = {}));
var SortDirection;
(function (SortDirection) {
    SortDirection["Asc"] = "Asc";
    SortDirection["Desc"] = "Desc";
})(SortDirection || (SortDirection = {}));
var ResultSelectMode;
(function (ResultSelectMode) {
    ResultSelectMode["Single"] = "Single";
    ResultSelectMode["Multiple"] = "Multiple";
})(ResultSelectMode || (ResultSelectMode = {}));
var SymbolType;
(function (SymbolType) {
    SymbolType["DefaultSymbol"] = "DefaultSymbol";
    SymbolType["CustomSymbol"] = "CustomSymbol";
})(SymbolType || (SymbolType = {}));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAddToMapAction: () => (/* binding */ createAddToMapAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Custom "Add to Map" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Show on Map" action with a custom
 * implementation that uses QuerySimple's selection process (selectRecordsAndPublish).
 * This ensures consistent behavior with query results and proper integration
 * with the widget's "Clear results" functionality.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Add to Map" data action that uses QuerySimple's selection process.
 *
 * This action replaces the framework's "Show on Map" action and ensures consistent
 * behavior with QuerySimple's query results by using the same selection mechanism.
 *
 * @param widgetId - The widget ID that provides this action
 * @param outputDS - The output data source (used for selection on the origin layer)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration (for zoomToSelected setting)
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns A DataAction object that can be used by DataActionList
 */
function createAddToMapAction(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    return {
        id: `${widgetId}-addToMap`,
        name: 'addToMap',
        label: intl.formatMessage({ id: 'addToMap', defaultMessage: 'Add to map' }),
        // Icon matches the framework's "Show on Map" action for consistency
        icon: (__webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg"),
        // Note: Index may not control position if extraActions are always appended after framework actions
        index: -100,
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records
            if (!dataSets || dataSets.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'No data sets'
                });
                return false;
            }
            // Check if we have records and output data source
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            const supported = hasRecords && !!outputDS;
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                result: supported,
                hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return supported;
        }),
        /**
         * Executes the action by selecting records using QuerySimple's selection process.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            if (!outputDS || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: !outputDS ? 'No outputDS' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            // Get record IDs
            const recordIds = allRecords.map(record => record.getId());
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                recordsCount: allRecords.length,
                recordIds: recordIds.slice(0, 10), // Log first 10 IDs
                outputDSId: outputDS.id
            });
            // Use QuerySimple's selection process - selects on origin layer and publishes selection messages
            // This ensures consistent behavior with query results and proper integration with "Clear results"
            try {
                (0,_runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, allRecords, true);
                // Note: Zoom is now handled by the separate "Zoom To" action in the DataActionList
                // Users can click "Zoom To" from the action menu if they want to zoom to selected records
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: true,
                    message: 'Successfully selected records and published selection message'
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/index.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getExtraActions: () => (/* binding */ getExtraActions)
/* harmony export */ });
/* harmony import */ var _add_to_map_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-to-map-action */ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx");
/* harmony import */ var _zoom_to_action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./zoom-to-action */ "./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx");


/**
 * QuerySimple Custom Data Actions
 *
 * Returns custom data actions for the widget.
 * Includes custom "Zoom To" and "Add to Map" actions that use QuerySimple's processes.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source (null/undefined if not available)
 * @param mapView - The map view (null/undefined if not available)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns Array of custom DataAction objects (empty if conditions not met)
 */
function getExtraActions(widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected) {
    const actions = [];
    // Add "Zoom To" action if we have mapView and intl
    if (mapView && intl) {
        actions.push((0,_zoom_to_action__WEBPACK_IMPORTED_MODULE_1__.createZoomToAction)(widgetId, mapView, intl));
    }
    // Add "Add to Map" action if we have outputDS and intl
    if (outputDS && intl) {
        actions.push((0,_add_to_map_action__WEBPACK_IMPORTED_MODULE_0__.createAddToMapAction)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected));
    }
    return actions;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createZoomToAction: () => (/* binding */ createZoomToAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _runtime_zoom_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runtime/zoom-utils */ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts");
/**
 * Custom "Zoom To" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Zoom To" action with a custom
 * implementation that uses QuerySimple's zoom logic (mapView.goTo with padding).
 * This ensures consistent zoom behavior with proper padding.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Zoom To" data action that uses QuerySimple's zoom logic.
 *
 * This action replaces the framework's "Zoom To" action and ensures consistent
 * zoom behavior with padding using mapView.goTo().
 *
 * @param widgetId - The widget ID that provides this action
 * @param mapView - The map view to zoom (MapView or SceneView)
 * @param intl - The Intl object for internationalization
 * @returns A DataAction object that can be used by DataActionList
 */
function createZoomToAction(widgetId, mapView, intl) {
    return {
        id: `${widgetId}-zoomTo`,
        name: 'querySimpleZoomTo', // Use unique name to avoid conflict with framework action
        label: intl.formatMessage({ id: 'zoomToSelected', defaultMessage: 'Zoom to selected' }),
        // Use the same icon as the framework's zoom action (from ExB configuration page)
        icon: (__webpack_require__(/*! ../runtime/assets/icons/zoom-to.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/zoom-to.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg"),
        index: -90, // Position before Add to Map (-100)
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasMapView: !!mapView
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records and a map view
            if (!dataSets || dataSets.length === 0 || !mapView) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-isSupported',
                    result: false,
                    reason: !dataSets || dataSets.length === 0 ? 'No data sets' : 'No mapView'
                });
                return false;
            }
            // Check if we have records
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-isSupported',
                result: hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return hasRecords;
        }),
        /**
         * Executes the action by zooming to records using the shared zoom utility.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasMapView: !!mapView
            });
            if (!mapView || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
                if (!mapView) {
                    debugLogger.log('BUG', {
                        bugId: 'BUG-GRAPHICS-001',
                        category: 'GRAPHICS',
                        event: 'zoom-operation-failed-graphics-layer-disabled',
                        widgetId,
                        operation: 'zoom-to-selected-action',
                        dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                        description: 'Zoom to selected action attempted but mapView is unavailable (likely because useGraphicsLayerForHighlight is disabled)',
                        workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                        targetResolution: 'r019.0'
                    });
                }
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    reason: !mapView ? 'No mapView' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            try {
                // Use the shared zoom utility function
                yield (0,_runtime_zoom_utils__WEBPACK_IMPORTED_MODULE_2__.zoomToRecords)(mapView, allRecords);
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: true,
                    message: 'Successfully zoomed to features',
                    recordsCount: allRecords.length
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/default-query-item.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/default-query-item.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_QUERY_ITEM: () => (/* binding */ DEFAULT_QUERY_ITEM)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/query-simple/src/config.ts");

const DEFAULT_QUERY_ITEM = {
    icon: null,
    displayLabel: true,
    sqlExprObj: null,
    useAttributeFilter: true,
    useSpatialFilter: true,
    spatialMapWidgetIds: [],
    spatialFilterTypes: [],
    spatialInteractiveCreateToolTypes: [
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Point,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polyline,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polygon,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Rectangle,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Circle
    ],
    spatialInteractiveEnableBuffer: false,
    spatialInteractiveBufferDistance: 0,
    spatialInteractiveBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    spatialRelations: [_config__WEBPACK_IMPORTED_MODULE_0__.SpatialRelation.Intersect],
    spatialRelationUseDataSources: [],
    spatialRelationEnableSelectTool: false,
    spatialRelationEnableBuffer: false,
    spatialRelationBufferDistance: 0,
    spatialRelationBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    resultListDirection: _config__WEBPACK_IMPORTED_MODULE_0__.ListDirection.Vertical,
    resultPagingStyle: _config__WEBPACK_IMPORTED_MODULE_0__.PagingType.MultiPage,
    resultFieldsType: _config__WEBPACK_IMPORTED_MODULE_0__.FieldsType.PopupSetting,
    resultSymbolType: _config__WEBPACK_IMPORTED_MODULE_0__.SymbolType.DefaultSymbol,
    resultCustomSymbol: {
        angle: 0,
        color: [255, 255, 255, 255],
        outline: {
            color: [255, 255, 255, 255],
            style: 'esriSLSSolid',
            type: 'esriSLS',
            width: 1
        },
        size: 6,
        style: 'esriSMSCircle',
        type: 'esriSMS',
        xoffset: 0,
        yoffset: 0
    },
    resultAllowChangeSymbol: false,
    allowExport: false,
    sortOptions: [],
    zoomToSelected: true,
    itemSizeMap: {
        arrangementHorizontalPopper: {
            minSize: { width: 300, height: 300 },
            defaultSize: { width: 360, height: 480 }
        }
    }
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg":
/*!***********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg ***!
  \***********************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M0 10.5V12a1 1 0 0 0 1 1h1.5v-1H1v-1.5zM2.5 1H1a1 1 0 0 0-1 1v1.5h1V2h1.5zM0 8.5h1v-3H0zM4.5 1v1h3V1zm5 0v1H11v1.5h1V2a1 1 0 0 0-1-1zM6.318 13.682a4.5 4.5 0 0 0 5.991.334l1.848 1.848.707-.707-1.847-1.848a4.5 4.5 0 1 0-6.699.373m.707-.707a3.5 3.5 0 1 1 4.95-4.95 3.5 3.5 0 0 1-4.95 4.95M9 13v-2H7v-1h2V8h1v2h2v1h-2v2z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferInput: () => (/* binding */ BufferInput)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */





function BufferInput(props) {
    const { distance = 0, unit = _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters, onBufferChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const [d, setD] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(distance);
    const [u, setU] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(unit);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_5__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        let changed = false;
        if (distance !== d) {
            setD(distance);
            changed = true;
        }
        if (unit !== u) {
            setU(unit);
            changed = true;
        }
        if (changed) {
            onBufferChange(distance, unit);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [distance, unit]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setD(distance);
            setU(unit);
            onBufferChange(distance, unit);
        }
    }, [queryTaskContext.resetSymbol, distance, unit, onBufferChange]);
    const handleDistanceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
    }, []);
    const handleDistanceAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
        onBufferChange(value, u);
    }, [onBufferChange, u]);
    const handleBufferUnitChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        setU(e.target.value);
        onBufferChange(d, e.target.value);
    }, [onBufferChange, d]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": getI18nMessage('theBufferDistance'), className: 'mr-1', value: d, onChange: handleDistanceChange, onAcceptValue: handleDistanceAccepted }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('unit'), value: u, onChange: handleBufferUnitChange, children: Object.values(_config__WEBPACK_IMPORTED_MODULE_3__.UnitType).map((value) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: value, children: getI18nMessage(`unit_${value}`) }, value))) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadStatus: () => (/* binding */ LoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/filled/directional/right */ "./jimu-icons/filled/directional/right.tsx");
/* harmony import */ var jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/filled/directional/down */ "./jimu-icons/filled/directional/down.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */
// This file is duplicated from '../../../../feature-info/src/runtime/components/feature-info'






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
var LoadStatus;
(function (LoadStatus) {
    LoadStatus["Pending"] = "Pending";
    LoadStatus["Fulfilled"] = "Fulfilled";
    LoadStatus["Rejected"] = "Rejected";
})(LoadStatus || (LoadStatus = {}));
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  border: 1px solid var(--sys-color-divider-secondary);
  .esri-widget__heading {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    margin: 0;
    color: var(--sys-color-surface-paper-text);
  }

  .esri-feature__content-element {
    padding: 0;
  }

  .jimu-btn.expanded {
    align-self: flex-start;
  }
  
  // Larger expand/collapse button for better touch targets
  .jimu-btn[aria-label*="expand"],
  .jimu-btn[aria-label*="collapse"] {
    min-width: 32px;
    min-height: 32px;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .esri-feature.esri-widget {
    background-color: transparent;
  }
`;
class FeatureInfo extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor(props) {
        var _a, _b, _c, _d;
        super(props);
        this.toggleExpanded = (e) => {
            e.stopPropagation();
            this.setState({ showContent: !this.state.showContent });
        };
        const { togglable = false, expandByDefault } = this.props;
        const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
        const initialShowContent = !togglable || expandByDefault;
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'FeatureInfo-constructor',
            recordId,
            togglable,
            expandByDefault,
            initialShowContent,
            timestamp: Date.now()
        });
        this.featureContainer = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.state = {
            showContent: initialShowContent,
            loadStatus: LoadStatus.Pending
        };
    }
    componentDidMount() {
        this.createFeature();
    }
    componentDidUpdate(prevProps) {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        if (this.feature) {
            if (prevProps.popupTemplate !== this.props.popupTemplate ||
                prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate ||
                prevProps.graphic !== this.props.graphic) {
                this.destroyFeature();
                this.createFeature();
            }
            else {
                this.feature.visibleElements = this.getVisibleElements();
            }
        }
        // Sync expandByDefault prop changes (when user clicks Expand All/Collapse All)
        // This ensures all items respect the global expand/collapse state
        if (prevProps.expandByDefault !== this.props.expandByDefault) {
            const { togglable = false, expandByDefault } = this.props;
            const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'expandByDefault-prop-changed',
                recordId,
                prevExpandByDefault: prevProps.expandByDefault,
                newExpandByDefault: expandByDefault,
                togglable,
                currentShowContent: this.state.showContent,
                willUpdateState: togglable,
                timestamp: Date.now()
            });
            if (togglable) {
                this.setState({ showContent: expandByDefault }, () => {
                    debugLogger.log('EXPAND-COLLAPSE', {
                        event: 'FeatureInfo-state-updated',
                        recordId,
                        newShowContent: this.state.showContent,
                        timestamp: Date.now()
                    });
                });
            }
        }
        // Log all componentDidUpdate calls to track remounts
        const recordId = ((_f = (_e = this.props.graphic) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.OBJECTID) || ((_h = (_g = this.props.graphic) === null || _g === void 0 ? void 0 : _g.attributes) === null || _h === void 0 ? void 0 : _h.objectid) || 'unknown';
        if (prevProps.graphic !== this.props.graphic ||
            prevProps.popupTemplate !== this.props.popupTemplate ||
            prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate) {
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'FeatureInfo-props-changed-recreate',
                recordId,
                graphicChanged: prevProps.graphic !== this.props.graphic,
                popupTemplateChanged: prevProps.popupTemplate !== this.props.popupTemplate,
                defaultPopupTemplateChanged: prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate,
                expandByDefault: this.props.expandByDefault,
                currentShowContent: this.state.showContent,
                timestamp: Date.now()
            });
        }
    }
    destroyFeature() {
        this.feature && !this.feature.destroyed && this.feature.destroy();
    }
    getVisibleElements() {
        const { togglable = false } = this.props;
        const { showContent } = this.state;
        const expanded = togglable ? showContent : true;
        return {
            title: true,
            content: {
                fields: expanded,
                text: expanded,
                media: expanded,
                attachments: expanded
            },
            lastEditedInfo: false
        };
    }
    createFeature() {
        let featureModulePromise;
        if (this.Feature) {
            featureModulePromise = Promise.resolve();
        }
        else {
            featureModulePromise = (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Feature'
            ]).then(modules => {
                [
                    this.Feature
                ] = modules;
            });
        }
        return featureModulePromise.then(() => {
            var _a, _b, _c, _d;
            // Check if component is still mounted before trying to append
            // This prevents errors when component unmounts during async module loading
            if (!this.featureContainer.current) {
                // Component was unmounted, abort
                return;
            }
            const container = document && document.createElement('div');
            container.className = 'jimu-widget';
            this.featureContainer.current.appendChild(container);
            const originDS = this.props.dataSource.getOriginDataSources();
            const rootDataSource = (_a = originDS === null || originDS === void 0 ? void 0 : originDS[0]) === null || _a === void 0 ? void 0 : _a.getRootDataSource();
            this.destroyFeature();
            const layer = this.props.graphic.layer;
            if (this.props.popupTemplate) {
                this.props.graphic.popupTemplate = this.props.popupTemplate;
            }
            else if (layer) {
                // set popupTemplate with layer's popupTemplate or defaultPopupTemplate
                this.props.graphic.popupTemplate = (_b = layer.popupTemplate) !== null && _b !== void 0 ? _b : this.props.defaultPopupTemplate;
            }
            else {
                this.props.graphic.popupTemplate = this.props.defaultPopupTemplate;
            }
            if (layer && !layer.popupTemplate) {
                layer.popupTemplate = this.props.popupTemplate || this.props.defaultPopupTemplate;
            }
            this.feature = new this.Feature({
                container: container,
                defaultPopupTemplateEnabled: true,
                // @ts-expect-error
                spatialReference: ((_d = (_c = this.props.dataSource) === null || _c === void 0 ? void 0 : _c.layer) === null || _d === void 0 ? void 0 : _d.spatialReference) || null,
                // @ts-expect-error
                map: (rootDataSource === null || rootDataSource === void 0 ? void 0 : rootDataSource.map) || null,
                graphic: this.props.graphic,
                visibleElements: this.getVisibleElements()
            });
        }).then(() => {
            this.setState({ loadStatus: LoadStatus.Fulfilled });
        });
    }
    render() {
        const { togglable = false, intl } = this.props;
        const { showContent } = this.state;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'feature-info-component d-flex align-items-center p-1', css: style, children: [togglable && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { "aria-label": intl.formatMessage({ id: showContent ? 'collapse' : 'expand' }), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-outline-inside flex-shrink-0', { expanded: showContent }), variant: 'text', color: 'inherit', icon: true, size: 'sm', onClick: this.toggleExpanded, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              min-width: 32px;
              min-height: 32px;
              padding: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
            `, children: showContent ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__.DownFilled, { size: 'm' }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__.RightFilled, { size: 'm', autoFlip: true }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1', ref: this.featureContainer })] }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(FeatureInfo));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDraw: () => (/* binding */ GeometryFromDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-draw-tool */ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







function GeometryFromDraw(props) {
    const { onGeometryChange, createToolTypes, mapWidgetIds, enableBuffer, bufferDistance, bufferUnit, onBufferChange, widgetId } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_7__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geodesicBufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryServiceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferDistanceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferDistance);
    const bufferUnitRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferUnit);
    const bufferedGraphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (enableBuffer) {
            // Parent component query-task-spatial-form will reset buffer parameter when filter type changes,
            // so defer the init buffer option in order not to be override by its parent.
            jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
                onBufferChange(bufferDistance, bufferUnit);
            });
        }
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
            'esri/Graphic'
        ]).then((modules) => {
            const Graphic = modules[0];
            bufferedGraphicRef.current = new Graphic({
                symbol: {
                    type: 'simple-fill',
                    color: [51, 51, 204, 0.5],
                    style: 'solid',
                    outline: {
                        color: [51, 51, 204, 0.8],
                        width: 1
                    }
                }
            });
        });
    });
    const applyBufferEffect = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        if (!geometryRef.current || !enableBuffer || bufferDistanceRef.current === 0) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        // If the end user uses a point or line query geometry, then the negative buffer will not work (same effect as there is no buffer)
        const isPointNegativeBuffer = (((_a = geometryRef.current) === null || _a === void 0 ? void 0 : _a.type) === 'point' || ((_b = geometryRef.current) === null || _b === void 0 ? void 0 : _b.type) === 'multipoint') && bufferDistanceRef.current < 0;
        const isLineNegativeBuffer = ((_c = geometryRef.current) === null || _c === void 0 ? void 0 : _c.type) === 'polyline' && bufferDistanceRef.current < 0;
        if (isPointNegativeBuffer || isLineNegativeBuffer) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        const geometry = geometryRef.current;
        // https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html#buffer
        if (((_d = geometry.spatialReference) === null || _d === void 0 ? void 0 : _d.isGeographic) && !geometry.spatialReference.isWGS84) {
            const serviceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getGeometryService();
            if (!geometryServiceRef.current) {
                const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                    'esri/rest/geometryService',
                    'esri/rest/support/BufferParameters'
                ]);
                geometryServiceRef.current = {
                    geometryService: modules[0],
                    bufferParameters: modules[1]
                };
            }
            const { geometryService, bufferParameters: BufferParameters } = geometryServiceRef.current;
            const polygons = yield geometryService.buffer(serviceUrl, new BufferParameters({
                distances: [bufferDistanceRef.current],
                unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current),
                geodesic: true,
                bufferSpatialReference: geometry.spatialReference,
                outSpatialReference: geometry.spatialReference,
                geometries: [geometry]
            }));
            bufferedGraphicRef.current.geometry = polygons[0];
        }
        else {
            if (((_e = geometry.spatialReference) === null || _e === void 0 ? void 0 : _e.isWGS84) || ((_f = geometry.spatialReference) === null || _f === void 0 ? void 0 : _f.isWebMercator)) {
                if (!geodesicBufferOperatorRef.current) {
                    geodesicBufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/geodesicBufferOperator');
                }
                if (!geodesicBufferOperatorRef.current.isLoaded()) {
                    yield geodesicBufferOperatorRef.current.load();
                }
                bufferedGraphicRef.current.geometry = geodesicBufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
            else {
                if (!bufferOperatorRef.current) {
                    bufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/bufferOperator');
                }
                bufferedGraphicRef.current.geometry = bufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
        }
    }), [enableBuffer]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            getLayerFunRef.current && getLayerFunRef.current().removeAll();
            onGeometryChange(null);
        }
    }, [queryTaskContext.resetSymbol, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        // clear drawing graphics before switching map view
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        if (layer) {
            layer.removeAll();
            onGeometryChange(null);
        }
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, [onGeometryChange]);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferDistanceRef.current = distance;
        bufferUnitRef.current = unit;
        applyBufferEffect();
        onBufferChange(distance, unit);
    }, [onBufferChange, applyBufferEffect]);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic, getLayerFun, clearAfterApply) => {
        getLayerFunRef.current = getLayerFun;
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        // it's possible that the geometry is the same as the previous one, only the clearAfterApply is changed.
        if (geometryRef.current !== (graphic === null || graphic === void 0 ? void 0 : graphic.geometry)) {
            geometryRef.current = graphic === null || graphic === void 0 ? void 0 : graphic.geometry;
            applyBufferEffect().then(() => {
                if (bufferedGraphicRef.current.geometry) {
                    layer === null || layer === void 0 ? void 0 : layer.add(bufferedGraphicRef.current);
                }
            });
        }
        onGeometryChange(graphic === null || graphic === void 0 ? void 0 : graphic.geometry, layer, graphic, clearAfterApply);
    }, [onGeometryChange, applyBufferEffect]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))), (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__.InteractiveDraw, { jimuMapView: jimuMapView, widgetId: widgetId, toolTypes: createToolTypes, onDrawEnd: handleDrawEnd }), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'title3', "aria-label": getI18nMessage('theBufferDistance'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_5__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: handleBufferChange }) })] }))] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDataSource: () => (/* binding */ GeometryFromDataSource)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */






const marginStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`;
function getRuntimeDataSource() {
    const result = {};
    let notEmpty = false;
    const dsMap = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSources();
    Object.keys(dsMap).forEach(dsId => {
        const ds = dsMap[dsId];
        // only include the ds that has geometry
        if (ds.getGeometryType() != null && !ds.isInAppConfig() && ds.getMainDataSource().id === dsId && !ds.getDataSourceJson().isOutputFromWidget) {
            result[dsId] = ds;
            notEmpty = true;
        }
    });
    return notEmpty ? result : null;
}
function GeometryFromDataSource(props) {
    var _a;
    const { onSelectionChange, useDataSources = [], useRuntimeData, spatialRelations, enableBuffer, bufferDistance, bufferUnit, onBufferChange, onRelationChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [currentDataSource, setCurrentDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(useDataSources[0]);
    const [runtimeDataSource, setRuntimeDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [count, setCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const [currentRelation, setCurrentRelation] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_6__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation();
    const spatialRelationOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return Object.entries(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialRelation).map(([key, value]) => ({
            value,
            label: getI18nMessage(`spatialRelation_${key}`)
        }));
    }, [getI18nMessage]);
    const loadedUseDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const loaded = [];
        useDataSources.forEach((item) => {
            var _a, _b;
            if (((_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[item.mainDataSourceId]) === null || _b === void 0 ? void 0 : _b.instanceStatus) === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created) {
                loaded.push(item.dataSourceId);
            }
        });
        if (loaded.length > 0) {
            return loaded.join(',');
        }
        return '';
    });
    const numOfDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        if (!useRuntimeData) {
            return 0;
        }
        return Object.keys((_a = state.dataSourcesInfo) !== null && _a !== void 0 ? _a : {}).filter(dsId => state.dataSourcesInfo[dsId].instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created).length;
    });
    const runtimeDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (numOfDs > 0) {
            return getRuntimeDataSource();
        }
    }, [numOfDs]);
    const numOfRuntimeDs = Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).length;
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if ((spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0) {
            onRelationChange(spatialRelations[0]);
        }
        if (enableBuffer) {
            onBufferChange(bufferDistance, bufferUnit);
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setCurrentRelation(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
            onRelationChange(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
        }
    }, [queryTaskContext.resetSymbol, onRelationChange, spatialRelations]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!spatialRelations) {
            setCurrentRelation(null);
        }
        else if (!spatialRelations.includes(currentRelation)) {
            setCurrentRelation(spatialRelations[0]);
            onRelationChange(spatialRelations[0]);
        }
    }, [spatialRelations, currentRelation, onRelationChange]);
    const handleDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = useDataSources.find((item) => item.dataSourceId === dsId);
        setCurrentDataSource((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(ds));
        setRuntimeDataSource(null);
    }, [useDataSources]);
    const handleRuntimeDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(dsId);
        setRuntimeDataSource(ds);
        setCurrentDataSource(null);
    }, []);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource((_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        if ((records === null || records === void 0 ? void 0 : records.length) > 0) {
            const geometries = records.map((record) => record.getJSAPIGeometry());
            onSelectionChange(geometries);
            setCount(records.length);
        }
        else {
            onSelectionChange(null);
            setCount(0);
        }
    }, [currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId, runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, onSelectionChange]);
    const getLabelOfSpatialRelation = (relation) => {
        return spatialRelationOptions.find(item => item.value === relation).label;
    };
    const handleSpatialRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(e => {
        setCurrentRelation(e.target.value);
        onRelationChange(e.target.value);
    }, [onRelationChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: marginStyle, className: 'title3', children: getI18nMessage('chooseFilterLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterLayer'), value: (_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, children: [numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('preconfigured') }), useDataSources.map((item) => {
                        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(item.dataSourceId);
                        if (loadedUseDataSources.includes(item.dataSourceId) || (ds === null || ds === void 0 ? void 0 : ds.getLabel())) {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: item.dataSourceId, onClick: () => { handleDataSourceChange(item.dataSourceId); }, children: ds === null || ds === void 0 ? void 0 : ds.getLabel() }, item.dataSourceId));
                        }
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { children: translate('loading') }, item.dataSourceId));
                    }), numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { divider: true }), numOfRuntimeDs > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('runtime') }), Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).map(dsId => {
                        const ds = runtimeDataSources[dsId];
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: dsId, onClick: () => { handleRuntimeDataSourceChange(dsId); }, children: ds.getLabel() }, dsId));
                    })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-1 font-italic', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `color: var(--sys-color-surface-paper-hint);`, children: getI18nMessage('selectedRecords', { num: count }) }), (spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate title3 mb-0', children: getI18nMessage('relationship') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('relationship'), value: currentRelation, onChange: handleSpatialRelationChange, children: spatialRelations.map((item) => {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item, children: getLabelOfSpatialRelation(item) }, item));
                        }) })] })), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', "aria-label": getI18nMessage('theBufferDistance'), css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3 text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_4__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: onBufferChange }) })] })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: currentDataSource, dataSource: runtimeDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), useDataSources.map((item) => {
                // make sure the datasource is created
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: item }, item.dataSourceId));
            })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromMap: () => (/* binding */ GeometryFromMap)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");

/** @jsx jsx */


function GeometryFromMap(props) {
    const { onGeometryChange, mapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const PolygonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            let handler;
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/core/reactiveUtils').then((reactiveUtils) => {
                handler = reactiveUtils.watch(() => jimuMapView.view.extent, (extent) => {
                    if (PolygonRef.current) {
                        onGeometryChange(PolygonRef.current.fromExtent(extent));
                    }
                    else {
                        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/geometry/Polygon']).then(modules => {
                            PolygonRef.current = modules[0];
                            onGeometryChange(PolygonRef.current.fromExtent(extent));
                        });
                    }
                });
                // set initial extent
                onGeometryChange(jimuMapView.view.extent);
            });
            return () => {
                if (handler) {
                    handler.remove();
                }
            };
        }
    }, [jimuMapView, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addHighlightGraphics: () => (/* binding */ addHighlightGraphics),
/* harmony export */   cleanupGraphicsLayer: () => (/* binding */ cleanupGraphicsLayer),
/* harmony export */   clearGraphicsLayer: () => (/* binding */ clearGraphicsLayer),
/* harmony export */   createOrGetGraphicsLayer: () => (/* binding */ createOrGetGraphicsLayer),
/* harmony export */   getMapViewFromDataSource: () => (/* binding */ getMapViewFromDataSource),
/* harmony export */   removeHighlightGraphics: () => (/* binding */ removeHighlightGraphics)
/* harmony export */ });
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing graphics layer highlighting in QuerySimple widget.
 * Provides highlighting that works independently of layer visibility.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
// Global sequence counter for graphics operations to track timing across calls
let operationSequence = 0;
/**
 * Gets the map view from a data source's origin layer.
 * Accesses the view through the FeatureLayer's view property.
 * @param outputDS - The output data source (or any data source)
 * @returns Promise resolving to MapView or SceneView, or null if not available
 */
function getMapViewFromDataSource(outputDS) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        const seq = ++operationSequence;
        if (!outputDS) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-outputDS',
                seq,
                timestamp: Date.now()
            });
            return null;
        }
        try {
            // Get origin data source to access the layer
            const originDataSources = outputDS.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (!originDS) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-originDS',
                    outputDSId: outputDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Access the FeatureLayer from the data source
            const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
            if (!layer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-layer',
                    originDSId: originDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Log layer properties to understand structure
            const layerKeys = Object.keys(layer).filter(key => !key.startsWith('_') &&
                typeof layer[key] !== 'function').slice(0, 20); // Limit to first 20 properties
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-layer-inspection',
                originDSId: originDS.id,
                layerId: layer.id,
                layerType: layer.type || 'unknown',
                layerKeys: layerKeys,
                hasLayerMap: !!layer.map,
                hasLayerView: !!layer.view,
                hasLayerParent: !!layer.parent,
                layerMapType: layer.map ? typeof layer.map : 'none',
                timestamp: Date.now()
            });
            // Check layer.parent for map/view access (since hasLayerParent is true)
            const parent = layer.parent;
            if (parent) {
                // Log parent properties
                const parentKeys = Object.keys(parent).filter(key => !key.startsWith('_') &&
                    typeof parent[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-layer-parent-inspection',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    parentType: parent.type || 'unknown',
                    parentKeys: parentKeys,
                    hasParentMap: !!parent.map,
                    hasParentView: !!parent.view,
                    hasParentViews: !!parent.views,
                    parentViewsLength: ((_c = parent.views) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    hasParentExtent: !!parent.extent,
                    timestamp: Date.now()
                });
                // Try to get view from parent
                if (parent.view) {
                    const view = parent.view;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
                // Try to get map from parent and then view
                const parentMap = parent.map;
                if (parentMap) {
                    const view = parentMap.view ||
                        ((_e = (_d = parentMap.views) === null || _d === void 0 ? void 0 : _d.getItemAt) === null || _e === void 0 ? void 0 : _e.call(_d, 0)) ||
                        (((_f = parentMap.views) === null || _f === void 0 ? void 0 : _f.length) > 0 ? parentMap.views[0] : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-layer-parent-map',
                            originDSId: originDS.id,
                            layerId: layer.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                // Parent might BE the view (check if it has view-like properties)
                if (parent.type === 'map' || parent.type === 'scene' || parent.extent) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-is-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: parent.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return parent;
                }
            }
            // Try multiple approaches to get the view:
            // 1. Layer might have a direct view property
            if (layer.view) {
                const view = layer.view;
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-success-via-layer-view',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    viewType: view.type || 'unknown',
                    timestamp: Date.now()
                });
                return view;
            }
            // 2. Try to get map from layer and then view from map
            const map = layer.map ||
                ((_g = layer.parent) === null || _g === void 0 ? void 0 : _g.map) ||
                layer.__map ||
                layer._map;
            if (map) {
                // Log map properties
                const mapKeys = Object.keys(map).filter(key => !key.startsWith('_') &&
                    typeof map[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-map-found',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    mapId: map.id || 'unknown',
                    mapKeys: mapKeys,
                    hasMapView: !!map.view,
                    hasMapViews: !!(map.views),
                    mapViewsLength: ((_h = map.views) === null || _h === void 0 ? void 0 : _h.length) || 0,
                    timestamp: Date.now()
                });
                const view = map.view ||
                    ((_k = (_j = map.views) === null || _j === void 0 ? void 0 : _j.getItemAt) === null || _k === void 0 ? void 0 : _k.call(_j, 0)) ||
                    (((_l = map.views) === null || _l === void 0 ? void 0 : _l.length) > 0 ? map.views[0] : null) ||
                    (map.views && map.views.length > 0 ? map.views.getItemAt(0) : null);
                if (view) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-map',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
            }
            // 3. Try to get root data source and access map from there
            const rootDS = originDS.getRootDataSource();
            if (rootDS) {
                const rootMap = ((_o = (_m = rootDS).getMap) === null || _o === void 0 ? void 0 : _o.call(_m)) ||
                    rootDS.map ||
                    rootDS.__map ||
                    rootDS._map;
                if (rootMap) {
                    // Log root map properties
                    const rootMapKeys = Object.keys(rootMap).filter(key => !key.startsWith('_') &&
                        typeof rootMap[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-map-found',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootMapId: rootMap.id || 'unknown',
                        rootMapKeys: rootMapKeys,
                        hasRootMapView: !!rootMap.view,
                        hasRootMapViews: !!(rootMap.views),
                        rootMapViewsLength: ((_p = rootMap.views) === null || _p === void 0 ? void 0 : _p.length) || 0,
                        timestamp: Date.now()
                    });
                    const view = rootMap.view ||
                        ((_r = (_q = rootMap.views) === null || _q === void 0 ? void 0 : _q.getItemAt) === null || _r === void 0 ? void 0 : _r.call(_q, 0)) ||
                        (((_s = rootMap.views) === null || _s === void 0 ? void 0 : _s.length) > 0 ? rootMap.views[0] : null) ||
                        (rootMap.views && rootMap.views.length > 0 ? rootMap.views.getItemAt(0) : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-rootDS',
                            originDSId: originDS.id,
                            rootDSId: rootDS.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                else {
                    // Log root DS properties to see what's available
                    const rootDSKeys = Object.keys(rootDS).filter(key => !key.startsWith('_') &&
                        typeof rootDS[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-ds-inspection',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootDSKeys: rootDSKeys,
                        hasGetMap: typeof rootDS.getMap === 'function',
                        hasMap: !!rootDS.map,
                        timestamp: Date.now()
                    });
                }
            }
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-view',
                originDSId: originDS.id,
                layerId: layer.id,
                hasLayerMap: !!map,
                hasRootDS: !!rootDS,
                timestamp: Date.now()
            });
            return null;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-error',
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Gets the default highlight symbol based on geometry type.
 * Uses the map's actual highlight color from highlightOptions to match standard selection appearance.
 */
function getDefaultHighlightSymbol(geometryType, mapView) {
    // Get default highlight color from view's highlightOptions
    const highlightOptions = (mapView.highlightOptions || {});
    // Extract color - could be array [R,G,B,A] or Color object
    let highlightColor = null;
    if (highlightOptions.color) {
        // If it's a Color object, convert to array
        if (typeof highlightOptions.color === 'object' && 'toRgba' in highlightOptions.color) {
            highlightColor = highlightOptions.color.toRgba();
        }
        // If it's already an array
        else if (Array.isArray(highlightOptions.color)) {
            highlightColor = highlightOptions.color;
        }
    }
    // If no color in highlightOptions, use the ArcGIS documented default: cyan [0, 255, 255]
    if (!highlightColor) {
        highlightColor = [0, 255, 255, 1.0]; // Full opacity default
    }
    // Ensure we have 4 elements [R, G, B, A]
    const baseColor = highlightColor.slice(0, 3);
    const baseAlpha = highlightColor.length >= 4 ? highlightColor[3] : 1.0;
    // Get fill opacity from highlightOptions or use default
    const fillOpacity = highlightOptions.fillOpacity !== undefined
        ? highlightOptions.fillOpacity
        : 0.25; // Default 25% opacity for fill
    const fillColor = [...baseColor, fillOpacity];
    // Get halo opacity or use default - for outlines and lines
    const haloOpacity = highlightOptions.haloOpacity !== undefined
        ? highlightOptions.haloOpacity
        : baseAlpha; // Use the color's alpha if available, otherwise 1.0
    const outlineColor = [...baseColor, haloOpacity];
    // For lines, use full opacity to ensure visibility
    const lineOpacity = highlightOptions.haloOpacity !== undefined
        ? Math.max(highlightOptions.haloOpacity, 0.8) // At least 80% opacity
        : baseAlpha; // Use the color's alpha, or default to 1.0
    const lineColor = [...baseColor, lineOpacity];
    switch (geometryType) {
        case 'point':
        case 'multipoint':
            return {
                type: 'simple-marker',
                color: outlineColor,
                outline: {
                    color: outlineColor,
                    width: 2
                },
                size: 12
            };
        case 'polyline':
            return {
                type: 'simple-line',
                color: lineColor, // Use lineColor with proper opacity
                width: 4 // Increased width for visibility
            };
        case 'polygon':
        case 'multipolygon':
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
        default:
            // Fallback to polygon symbol
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
    }
}
/**
 * Creates or gets an existing graphics layer for the widget.
 * Uses a unique ID based on widget ID to ensure one layer per widget.
 */
function createOrGetGraphicsLayer(widgetId, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        const layerId = `querysimple-highlight-${widgetId}`;
        try {
            // Check if layer already exists
            const existingLayer = mapView.map.layers.find(layer => layer.id === layerId);
            if (existingLayer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'createOrGetGraphicsLayer-found-existing',
                    seq,
                    widgetId,
                    layerId,
                    timestamp: Date.now()
                });
                return existingLayer;
            }
            // Load GraphicsLayer module
            const [GraphicsLayer] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/layers/GraphicsLayer']);
            // Create new graphics layer
            const graphicsLayer = new GraphicsLayer({
                id: layerId,
                title: `QuerySimple Highlights (${widgetId})`,
                listMode: 'hide', // Hide from layer list
                visible: true
            });
            // Add to map
            mapView.map.add(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-created',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
            return graphicsLayer;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-error',
                seq,
                widgetId,
                layerId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Adds highlight graphics to the graphics layer using default map highlight color.
 * Note: This function should be called after GraphicsLayer module is loaded.
 */
function addHighlightGraphics(graphicsLayer, records, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        if (!graphicsLayer || !records || records.length === 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'addHighlightGraphics-skipped',
                seq,
                reason: !graphicsLayer ? 'no-graphics-layer' : 'no-records',
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                timestamp: Date.now()
            });
            return;
        }
        // Log existing state BEFORE adding - verify assumption about duplicates
        const existingGraphicsCount = graphicsLayer.graphics.length;
        const existingRecordIds = [];
        const existingRecordIdSet = new Set();
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                existingRecordIds.push(recordId);
                existingRecordIdSet.add(recordId);
            }
        });
        // Log what we're trying to add
        const incomingRecordIds = records.map(r => r.getId());
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-before-add',
            seq,
            graphicsLayerId: graphicsLayer.id,
            existingGraphicsCount,
            existingRecordIds: existingRecordIds.slice(0, 20), // Limit to first 20 for readability
            existingRecordIdsCount: existingRecordIds.length,
            incomingRecordIds: incomingRecordIds.slice(0, 20), // Limit to first 20
            incomingRecordIdsCount: incomingRecordIds.length,
            duplicateRecordIds: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).slice(0, 20),
            duplicateCount: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).length,
            timestamp: Date.now()
        });
        // Load Graphic module
        const [Graphic] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/Graphic']);
        let addedCount = 0;
        let skippedCount = 0;
        let duplicateCount = 0;
        const addedRecordIds = [];
        const skippedRecordIds = [];
        const duplicateRecordIds = [];
        records.forEach(record => {
            try {
                const recordId = record.getId();
                // Check if this record ID already exists in graphics layer
                if (existingRecordIdSet.has(recordId)) {
                    duplicateCount++;
                    duplicateRecordIds.push(recordId);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'addHighlightGraphics-duplicate-detected',
                        seq,
                        recordId,
                        graphicsLayerId: graphicsLayer.id,
                        timestamp: Date.now()
                    });
                    return; // Skip adding duplicate
                }
                const graphic = record.feature;
                if (!graphic || !graphic.geometry) {
                    skippedCount++;
                    skippedRecordIds.push(recordId);
                    return;
                }
                // Get geometry type from graphic
                const geometryType = graphic.geometry.type;
                // Create symbol using default highlight color
                const symbol = getDefaultHighlightSymbol(geometryType, mapView);
                // Create new graphic with highlight symbol
                const highlightGraphic = new Graphic({
                    geometry: graphic.geometry,
                    symbol: symbol,
                    attributes: {
                        recordId: recordId,
                        source: 'querysimple-highlight',
                        widgetId: graphicsLayer.id.replace('querysimple-highlight-', '')
                    }
                });
                graphicsLayer.add(highlightGraphic);
                addedCount++;
                addedRecordIds.push(recordId);
                // Add to tracking set to prevent duplicates within this batch
                existingRecordIdSet.add(recordId);
            }
            catch (error) {
                skippedCount++;
                skippedRecordIds.push(record.getId());
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'addHighlightGraphics-record-error',
                    seq,
                    recordId: record.getId(),
                    error: error instanceof Error ? error.message : String(error),
                    timestamp: Date.now()
                });
            }
        });
        // Log final state AFTER adding
        const finalGraphicsCount = graphicsLayer.graphics.length;
        const finalRecordIds = [];
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                finalRecordIds.push(recordId);
            }
        });
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-complete',
            seq,
            graphicsLayerId: graphicsLayer.id,
            recordsCount: records.length,
            addedCount,
            skippedCount,
            duplicateCount,
            addedRecordIds: addedRecordIds.slice(0, 20), // Limit to first 20
            skippedRecordIds: skippedRecordIds.slice(0, 20),
            duplicateRecordIds: duplicateRecordIds.slice(0, 20),
            existingGraphicsCount,
            finalGraphicsCount,
            expectedFinalCount: existingGraphicsCount + addedCount,
            finalRecordIds: finalRecordIds.slice(0, 20), // Limit to first 20
            finalRecordIdsCount: finalRecordIds.length,
            timestamp: Date.now()
        });
    });
}
/**
 * Removes highlight graphics from the graphics layer by record IDs.
 */
function removeHighlightGraphics(graphicsLayer, recordIds) {
    const seq = ++operationSequence;
    if (!graphicsLayer || !recordIds || recordIds.length === 0) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'removeHighlightGraphics-skipped',
            seq,
            reason: !graphicsLayer ? 'no-graphics-layer' : 'no-record-ids',
            recordIdsCount: (recordIds === null || recordIds === void 0 ? void 0 : recordIds.length) || 0,
            timestamp: Date.now()
        });
        return;
    }
    const recordIdSet = new Set(recordIds);
    let removedCount = 0;
    // Find and remove graphics matching record IDs
    const graphicsToRemove = [];
    graphicsLayer.graphics.forEach(graphic => {
        var _a;
        const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
        if (recordId && recordIdSet.has(recordId)) {
            graphicsToRemove.push(graphic);
        }
    });
    graphicsToRemove.forEach(graphic => {
        graphicsLayer.remove(graphic);
        removedCount++;
    });
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'removeHighlightGraphics-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        recordIdsCount: recordIds.length,
        removedCount,
        timestamp: Date.now()
    });
}
/**
 * Clears all highlight graphics from the graphics layer.
 */
function clearGraphicsLayer(graphicsLayer) {
    const seq = ++operationSequence;
    if (!graphicsLayer) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'clearGraphicsLayer-skipped',
            seq,
            reason: 'no-graphics-layer',
            timestamp: Date.now()
        });
        return;
    }
    const graphicsCount = graphicsLayer.graphics.length;
    graphicsLayer.removeAll();
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'clearGraphicsLayer-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        graphicsRemoved: graphicsCount,
        timestamp: Date.now()
    });
}
/**
 * Removes the graphics layer from the map and cleans up references.
 */
function cleanupGraphicsLayer(widgetId, mapView) {
    const seq = ++operationSequence;
    const layerId = `querysimple-highlight-${widgetId}`;
    try {
        const graphicsLayer = mapView.map.layers.find(layer => layer.id === layerId);
        if (graphicsLayer) {
            // Clear all graphics first
            graphicsLayer.removeAll();
            // Remove layer from map
            mapView.map.remove(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-complete',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
        else {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-not-found',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
    }
    catch (error) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'cleanupGraphicsLayer-error',
            seq,
            widgetId,
            layerId,
            error: error instanceof Error ? error.message : String(error),
            errorStack: error instanceof Error ? error.stack : undefined,
            timestamp: Date.now()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts":
/*!*******************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AccumulatedRecordsManager: () => (/* binding */ AccumulatedRecordsManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage accumulated records and results mode state.
 *
 * Centralizes accumulated records management logic for the widget.
 * Handles results mode changes, accumulated records updates, and mode reset logic.
 *
 * Part of Chunk 5: Accumulated Records Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class AccumulatedRecordsManager {
    constructor() {
        this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
        this.accumulatedRecords = [];
    }
    /**
     * Sets callbacks for mode change and accumulated records change events.
     *
     * @param callbacks - Callbacks for mode change and accumulated records change
     */
    setCallbacks(callbacks) {
        this.callbacks = callbacks;
    }
    /**
     * Gets the current results mode.
     *
     * @returns Current results mode
     */
    getResultsMode() {
        return this.resultsMode;
    }
    /**
     * Gets the current accumulated records.
     *
     * @returns Current accumulated records array
     */
    getAccumulatedRecords() {
        return this.accumulatedRecords;
    }
    /**
     * Gets the count of accumulated records.
     *
     * @returns Number of accumulated records
     */
    getAccumulatedRecordsCount() {
        return this.accumulatedRecords.length;
    }
    /**
     * Checks if the widget is in accumulation mode (Add to or Remove from).
     *
     * @returns True if in accumulation mode, false otherwise
     */
    isAccumulationMode() {
        return this.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection ||
            this.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
    }
    /**
     * Checks if there are accumulated records.
     *
     * @returns True if accumulated records exist, false otherwise
     */
    hasAccumulatedRecords() {
        return this.accumulatedRecords.length > 0;
    }
    /**
     * Handles results mode change.
     *
     * Updates the results mode and optionally clears accumulated records when switching
     * to "New" mode. Also handles hash parameter consumption when switching to accumulation modes.
     *
     * @param widgetId - Widget ID for logging
     * @param mode - New results mode
     * @param shouldConsumeHash - Whether to consume hash parameter (for deep linking)
     * @param hashShortId - Optional shortId to consume from hash
     * @param removeHashParameter - Optional callback to remove hash parameter
     */
    handleResultsModeChange(widgetId, mode, shouldConsumeHash = false, hashShortId, removeHashParameter) {
        var _a;
        const previousMode = this.resultsMode;
        const currentAccumulatedCount = this.accumulatedRecords.length;
        debugLogger.log('RESULTS-MODE', {
            event: 'handleResultsModeChange-triggered',
            widgetId,
            previousMode,
            newMode: mode,
            currentAccumulatedCount,
            timestamp: Date.now()
        });
        // Consume deep link when switching to accumulation modes
        if (shouldConsumeHash && (mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection)) {
            if (hashShortId && removeHashParameter) {
                debugLogger.log('HASH', {
                    event: 'consuming-hash-on-mode-switch',
                    widgetId,
                    mode,
                    shortId: hashShortId
                });
                removeHashParameter(hashShortId);
            }
        }
        // If switching to "New" mode, clear accumulated records
        if (mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection) {
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-accumulated-records-on-mode-switch',
                widgetId,
                previousMode
            });
            this.resultsMode = mode;
            this.accumulatedRecords = [];
        }
        else {
            this.resultsMode = mode;
        }
        // Trigger callback
        if ((_a = this.callbacks) === null || _a === void 0 ? void 0 : _a.onModeChange) {
            this.callbacks.onModeChange(this.resultsMode);
        }
        return {
            resultsMode: this.resultsMode,
            accumulatedRecords: this.accumulatedRecords
        };
    }
    /**
     * Handles accumulated records change.
     *
     * Updates the accumulated records array.
     *
     * @param widgetId - Widget ID for logging
     * @param records - New accumulated records array
     */
    handleAccumulatedRecordsChange(widgetId, records) {
        var _a;
        const previousCount = this.accumulatedRecords.length;
        const newCount = records.length;
        debugLogger.log('RESULTS-MODE', {
            event: 'handleAccumulatedRecordsChange-triggered',
            widgetId,
            previousCount,
            newCount,
            timestamp: Date.now()
        });
        this.accumulatedRecords = records;
        // Trigger callback
        if ((_a = this.callbacks) === null || _a === void 0 ? void 0 : _a.onAccumulatedRecordsChange) {
            this.callbacks.onAccumulatedRecordsChange(this.accumulatedRecords);
        }
    }
    /**
     * Resets mode to "New Selection" and clears accumulated records.
     *
     * Called when hash parameters are detected to reset the widget to a clean state.
     *
     * @param widgetId - Widget ID for logging
     * @param currentMode - Current mode before reset
     */
    resetModeOnHashDetection(widgetId, currentMode) {
        if (currentMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection) {
            debugLogger.log('HASH', {
                event: 'mode-reset-needed-on-hash-detection',
                widgetId,
                currentMode,
                timestamp: Date.now()
            });
            this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
            this.accumulatedRecords = [];
        }
        return {
            resultsMode: this.resultsMode,
            accumulatedRecords: this.accumulatedRecords
        };
    }
    /**
     * Cleans up the manager.
     *
     * Resets state to initial values.
     */
    cleanup() {
        this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
        this.accumulatedRecords = [];
        this.callbacks = undefined;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-event-handling.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-event-handling.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventManager: () => (/* binding */ EventManager),
/* harmony export */   OPEN_WIDGET_EVENT: () => (/* binding */ OPEN_WIDGET_EVENT),
/* harmony export */   QUERYSIMPLE_SELECTION_EVENT: () => (/* binding */ QUERYSIMPLE_SELECTION_EVENT),
/* harmony export */   RESTORE_ON_IDENTIFY_CLOSE_EVENT: () => (/* binding */ RESTORE_ON_IDENTIFY_CLOSE_EVENT)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Event name constants for QuerySimple widget events.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
const OPEN_WIDGET_EVENT = 'helpersimple-open-widget';
/**
 * Utility to manage event listeners and custom event dispatching.
 *
 * Centralizes event handling logic for the widget, including:
 * - Event listener setup/cleanup
 * - Custom event dispatching
 * - Event handler registration
 *
 * Part of Chunk 7: Event Handling extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class EventManager {
    constructor() {
        this.listenersSetup = false;
        /**
         * Bound event handler for OPEN_WIDGET_EVENT.
         */
        this.handleOpenWidgetEventBound = (event) => {
            var _a;
            if ((_a = this.handlers) === null || _a === void 0 ? void 0 : _a.onOpenWidgetEvent) {
                this.handlers.onOpenWidgetEvent(event);
            }
        };
        /**
         * Bound event handler for QUERYSIMPLE_SELECTION_EVENT.
         */
        this.handleSelectionChangeBound = (event) => {
            var _a;
            if ((_a = this.handlers) === null || _a === void 0 ? void 0 : _a.onSelectionChange) {
                this.handlers.onSelectionChange(event);
            }
        };
        /**
         * Bound event handler for RESTORE_ON_IDENTIFY_CLOSE_EVENT.
         */
        this.handleRestoreOnIdentifyCloseBound = (event) => {
            var _a;
            if ((_a = this.handlers) === null || _a === void 0 ? void 0 : _a.onRestoreOnIdentifyClose) {
                this.handlers.onRestoreOnIdentifyClose(event);
            }
        };
    }
    /**
     * Sets event handler callbacks.
     *
     * @param handlers - Event handler callbacks
     */
    setHandlers(handlers) {
        this.handlers = handlers;
    }
    /**
     * Sets up all event listeners.
     *
     * Registers listeners for:
     * - OPEN_WIDGET_EVENT: HelperSimple orchestration
     * - QUERYSIMPLE_SELECTION_EVENT: Selection changes from QueryTaskResult
     * - RESTORE_ON_IDENTIFY_CLOSE_EVENT: Restore selection after identify popup closes
     *
     * @param widgetId - Widget ID for logging
     */
    setup(widgetId) {
        if (this.listenersSetup) {
            debugLogger.log('EVENTS', {
                event: 'event-manager-setup-already-setup',
                widgetId,
                timestamp: Date.now()
            });
            return;
        }
        debugLogger.log('EVENTS', {
            event: 'event-manager-setup-start',
            widgetId,
            timestamp: Date.now()
        });
        // Listen for HelperSimple orchestration events
        window.addEventListener(OPEN_WIDGET_EVENT, this.handleOpenWidgetEventBound);
        // Listen for selection changes from query-result
        window.addEventListener(QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChangeBound);
        // Listen for restore requests when identify popup closes
        window.addEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyCloseBound);
        this.listenersSetup = true;
        debugLogger.log('EVENTS', {
            event: 'event-manager-setup-complete',
            widgetId,
            listenersRegistered: 3,
            timestamp: Date.now()
        });
    }
    /**
     * Cleans up all event listeners.
     *
     * @param widgetId - Widget ID for logging
     */
    cleanup(widgetId) {
        if (!this.listenersSetup) {
            debugLogger.log('EVENTS', {
                event: 'event-manager-cleanup-not-setup',
                widgetId,
                timestamp: Date.now()
            });
            return;
        }
        debugLogger.log('EVENTS', {
            event: 'event-manager-cleanup-start',
            widgetId,
            timestamp: Date.now()
        });
        window.removeEventListener(OPEN_WIDGET_EVENT, this.handleOpenWidgetEventBound);
        window.removeEventListener(QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChangeBound);
        window.removeEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyCloseBound);
        this.listenersSetup = false;
        this.handlers = undefined;
        debugLogger.log('EVENTS', {
            event: 'event-manager-cleanup-complete',
            widgetId,
            timestamp: Date.now()
        });
    }
    /**
     * Dispatches a custom event to notify HelperSimple of selection changes.
     *
     * @param widgetId - Widget ID
     * @param recordIds - Array of selected record IDs
     * @param dataSourceId - Optional data source ID
     * @param outputDsId - Output data source ID (required for lastSelection state)
     * @param queryItemConfigId - Query item config ID (required for lastSelection state)
     */
    dispatchSelectionEvent(widgetId, recordIds, dataSourceId, outputDsId, queryItemConfigId) {
        debugLogger.log('EVENTS', {
            event: 'event-manager-dispatch-selection-event',
            widgetId,
            recordIdsCount: recordIds.length,
            dataSourceId,
            outputDsId,
            queryItemConfigId,
            timestamp: Date.now()
        });
        const event = new CustomEvent(QUERYSIMPLE_SELECTION_EVENT, {
            detail: {
                widgetId,
                recordIds,
                dataSourceId,
                outputDsId,
                queryItemConfigId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(event);
        debugLogger.log('EVENTS', {
            event: 'event-manager-selection-event-dispatched',
            widgetId,
            recordIdsCount: recordIds.length,
            timestamp: Date.now()
        });
    }
    /**
     * Checks if event listeners are currently set up.
     *
     * @returns True if listeners are set up, false otherwise
     */
    isSetup() {
        return this.listenersSetup;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GraphicsLayerManager: () => (/* binding */ GraphicsLayerManager)
/* harmony export */ });
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage graphics layer initialization and cleanup.
 *
 * Centralizes graphics layer management logic for the widget.
 * Handles graphics layer creation, initialization, and cleanup.
 *
 * Part of Chunk 4: Graphics Layer Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class GraphicsLayerManager {
    constructor(graphicsLayerRef, mapViewRef) {
        this.graphicsLayerRef = graphicsLayerRef;
        this.mapViewRef = mapViewRef;
    }
    /**
     * Initializes the graphics layer for map highlighting.
     *
     * Creates or retrieves a graphics layer and adds it to the map view.
     *
     * @param widgetId - Widget ID for graphics layer naming
     * @param mapView - The ArcGIS MapView or SceneView instance
     * @param callbacks - Optional callbacks for initialization events
     *
     * @returns Promise resolving to the graphics layer, or null if initialization failed
     */
    initialize(widgetId, mapView, callbacks) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c, _d;
            // Chunk 4: Comparison logging - new implementation
            const newStateBefore = {
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                hasMapView: !!this.mapViewRef.current,
                viewType: ((_b = this.mapViewRef.current) === null || _b === void 0 ? void 0 : _b.type) || null
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-initializeGraphicsLayer-before',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    mapViewType: mapView.type || 'unknown',
                    timestamp: Date.now()
                }
            });
            try {
                // Create or get graphics layer
                const graphicsLayer = yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__.createOrGetGraphicsLayer)(widgetId, mapView);
                if (!graphicsLayer) {
                    debugLogger.log('CHUNK-4-COMPARE', {
                        event: 'new-implementation-initializeGraphicsLayer-failed',
                        widgetId,
                        newImplementation: {
                            stateBefore: newStateBefore,
                            result: 'failed',
                            reason: 'graphics-layer-creation-failed',
                            timestamp: Date.now()
                        }
                    });
                    return null;
                }
                // Store references
                this.mapViewRef.current = mapView;
                this.graphicsLayerRef.current = graphicsLayer;
                const newStateAfter = {
                    hasGraphicsLayer: !!this.graphicsLayerRef.current,
                    graphicsLayerId: ((_c = this.graphicsLayerRef.current) === null || _c === void 0 ? void 0 : _c.id) || null,
                    hasMapView: !!this.mapViewRef.current,
                    viewType: ((_d = this.mapViewRef.current) === null || _d === void 0 ? void 0 : _d.type) || null
                };
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayer-success',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        stateAfter: newStateAfter,
                        result: 'success',
                        graphicsLayerId: graphicsLayer.id,
                        viewType: mapView.type || 'unknown',
                        timestamp: Date.now()
                    }
                });
                // Call callback if provided
                if (callbacks === null || callbacks === void 0 ? void 0 : callbacks.onGraphicsLayerInitialized) {
                    callbacks.onGraphicsLayerInitialized(graphicsLayer);
                }
                return graphicsLayer;
            }
            catch (error) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayer-error',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'error',
                        error: error instanceof Error ? error.message : String(error),
                        timestamp: Date.now()
                    }
                });
                return null;
            }
        });
    }
    /**
     * Initializes graphics layer lazily when output data source becomes available.
     *
     * @param widgetId - Widget ID
     * @param config - Widget configuration
     * @param outputDS - The output data source that was created
     * @param mapView - Optional map view (if not provided, uses mapViewRef)
     * @param callbacks - Optional callbacks
     */
    initializeFromOutputDS(widgetId, config, outputDS, mapView, callbacks) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a;
            // Chunk 4: Comparison logging - new implementation
            const newStateBefore = {
                useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                hasMapView: !!this.mapViewRef.current,
                outputDSId: outputDS.id
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-initializeGraphicsLayerFromOutputDS-before',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    timestamp: Date.now()
                }
            });
            // Only initialize if enabled and not already initialized
            if (!config.useGraphicsLayerForHighlight || this.graphicsLayerRef.current) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'skipped',
                        reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'already-initialized',
                        timestamp: Date.now()
                    }
                });
                return;
            }
            // Use provided map view or get from ref
            const mapViewToUse = mapView || this.mapViewRef.current;
            if (!mapViewToUse) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'skipped',
                        reason: 'map-view-not-available-yet',
                        timestamp: Date.now()
                    }
                });
                return;
            }
            // Initialize graphics layer
            yield this.initialize(widgetId, mapViewToUse, callbacks);
        });
    }
    /**
     * Cleans up the graphics layer.
     *
     * Removes the graphics layer from the map view and clears internal references.
     *
     * @param widgetId - Widget ID
     * @param callbacks - Optional callbacks
     */
    cleanup(widgetId, callbacks) {
        var _a, _b, _c, _d;
        // Chunk 4: Comparison logging - new implementation
        const newStateBefore = {
            hasGraphicsLayer: !!this.graphicsLayerRef.current,
            graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
            hasMapView: !!this.mapViewRef.current,
            viewType: ((_b = this.mapViewRef.current) === null || _b === void 0 ? void 0 : _b.type) || null
        };
        debugLogger.log('CHUNK-4-COMPARE', {
            event: 'new-implementation-cleanupGraphicsLayer-before',
            widgetId,
            newImplementation: {
                stateBefore: newStateBefore,
                timestamp: Date.now()
            }
        });
        const mapView = this.mapViewRef.current;
        if (mapView) {
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__.cleanupGraphicsLayer)(widgetId, mapView);
            this.mapViewRef.current = null;
            this.graphicsLayerRef.current = null;
            const newStateAfter = {
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_c = this.graphicsLayerRef.current) === null || _c === void 0 ? void 0 : _c.id) || null,
                hasMapView: !!this.mapViewRef.current,
                viewType: ((_d = this.mapViewRef.current) === null || _d === void 0 ? void 0 : _d.type) || null
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-cleanupGraphicsLayer-complete',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    stateAfter: newStateAfter,
                    result: 'complete',
                    timestamp: Date.now()
                }
            });
            // Call callback if provided
            if (callbacks === null || callbacks === void 0 ? void 0 : callbacks.onGraphicsLayerCleaned) {
                callbacks.onGraphicsLayerCleaned();
            }
        }
        else {
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-cleanupGraphicsLayer-skipped',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    result: 'skipped',
                    reason: 'no-map-view',
                    timestamp: Date.now()
                }
            });
        }
    }
    /**
     * Clears all graphics from the graphics layer if it exists.
     *
     * @param widgetId - Widget ID for logging
     * @param config - Widget configuration
     */
    clearGraphics(widgetId, config) {
        var _a, _b;
        // Chunk 4: Comparison logging - new implementation
        const graphicsLayer = this.graphicsLayerRef.current;
        const newStateBefore = {
            useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
            hasGraphicsLayer: !!graphicsLayer,
            graphicsLayerId: (graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.id) || null,
            graphicsCount: (graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics.length) || 0
        };
        debugLogger.log('CHUNK-4-COMPARE', {
            event: 'new-implementation-clearGraphicsLayerIfExists-before',
            widgetId,
            newImplementation: {
                stateBefore: newStateBefore,
                timestamp: Date.now()
            }
        });
        if (config.useGraphicsLayerForHighlight && graphicsLayer) {
            const { clearGraphicsLayer } = __webpack_require__(/*! ../graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
            clearGraphicsLayer(graphicsLayer);
            const newStateAfter = {
                useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                graphicsCount: ((_b = this.graphicsLayerRef.current) === null || _b === void 0 ? void 0 : _b.graphics.length) || 0
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-clearGraphicsLayerIfExists-complete',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    stateAfter: newStateAfter,
                    result: 'complete',
                    graphicsLayerId: graphicsLayer.id,
                    timestamp: Date.now()
                }
            });
        }
        else {
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-clearGraphicsLayerIfExists-skipped',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    result: 'skipped',
                    reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'no-graphics-layer',
                    timestamp: Date.now()
                }
            });
        }
    }
    /**
     * Gets the current graphics layer.
     */
    getGraphicsLayer() {
        return this.graphicsLayerRef.current;
    }
    /**
     * Checks if graphics layer should be initialized based on config and current state.
     *
     * @param config - Widget configuration
     * @param mapView - Map view to check
     * @returns true if graphics layer should be initialized
     */
    shouldInitialize(config, mapView) {
        return !!(mapView && config.useGraphicsLayerForHighlight && !this.graphicsLayerRef.current);
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapViewManager: () => (/* binding */ MapViewManager)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage map view ref and view change handlers.
 *
 * Centralizes map view management logic for the widget.
 * Handles JimuMapView changes and maintains refs for map view access.
 *
 * Part of Chunk 6: Map View Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class MapViewManager {
    constructor(mapViewRef) {
        this.jimuMapView = null;
        this.mapViewRef = mapViewRef;
    }
    /**
     * Handles JimuMapView change from JimuMapViewComponent.
     * Updates internal state and calls callbacks.
     */
    handleJimuMapViewChanged(jimuMapView, props, callbacks) {
        var _a;
        const { id } = props;
        debugLogger.log('MAP-EXTENT', {
            event: 'handleJimuMapViewChanged',
            widgetId: id,
            hasJimuMapView: !!jimuMapView,
            hasView: !!(jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view),
            viewType: ((_a = jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) === null || _a === void 0 ? void 0 : _a.type) || 'none',
            timestamp: Date.now()
        });
        // Store JimuMapView internally
        this.jimuMapView = jimuMapView;
        // Update map view ref if view is available
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            this.mapViewRef.current = jimuMapView.view;
        }
        else {
            this.mapViewRef.current = null;
        }
        // Call callback to update widget state
        if (callbacks.onMapViewChange) {
            callbacks.onMapViewChange(jimuMapView);
        }
    }
    /**
     * Gets the current JimuMapView.
     */
    getJimuMapView() {
        return this.jimuMapView;
    }
    /**
     * Gets the current map view from ref.
     */
    getMapView() {
        return this.mapViewRef.current;
    }
    /**
     * Cleans up map view references.
     */
    cleanup() {
        this.mapViewRef.current = null;
        this.jimuMapView = null;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-selection-restoration.ts":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-selection-restoration.ts ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelectionRestorationManager: () => (/* binding */ SelectionRestorationManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Manager class for handling selection state tracking and restoration logic.
 *
 * This class centralizes the logic for:
 * - Section 3.1: Selection State Tracking (handleSelectionChange)
 * - Section 3.2: Panel Open/Close Restoration (addSelectionToMap, clearSelectionFromMap)
 * - Section 3.3: Map Identify Restoration (handleRestoreOnIdentifyClose)
 *
 * Part of Chunk 3: Selection & Restoration extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class SelectionRestorationManager {
    constructor(stateGetter, callbacks) {
        this.widgetId = '';
        this.stateGetter = stateGetter;
        this.callbacks = callbacks;
    }
    /**
     * Sets the widget ID. Should be called once in componentDidMount.
     * @param widgetId - The widget ID
     */
    setWidgetId(widgetId) {
        this.widgetId = widgetId;
    }
    // ============================================================================
    // Section 3.1: Selection State Tracking
    // ============================================================================
    /**
     * Handles selection change events from queries.
     *
     * This method:
     * 1. Ignores events not for this widget
     * 2. Ignores empty selections when panel is closed (to prevent state wipe)
     * 3. Calculates selection count (uses accumulated records in Add/Remove modes)
     * 4. Updates widget state: hasSelection, selectionRecordCount, lastSelection
     * 5. Resets mode to NewSelection if selection is cleared in Remove mode
     *
     * @param event - The selection change event
     */
    handleSelectionChange(event) {
        var _a;
        const customEvent = event;
        // Get current state
        const state = this.stateGetter();
        // ========================================================================
        // 1. Only track if this is for our widget
        // ========================================================================
        if (customEvent.detail.widgetId !== this.widgetId) {
            return;
        }
        // ========================================================================
        // 2. Ignore empty selections when panel is closed
        // ========================================================================
        const hasSelection = customEvent.detail.recordIds && customEvent.detail.recordIds.length > 0;
        if (!state.isPanelVisible && !hasSelection) {
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-ignoring-empty-selection-while-panel-closed',
                widgetId: this.widgetId,
                timestamp: Date.now()
            });
            return;
        }
        // ========================================================================
        // 3. Calculate selection count
        // ========================================================================
        // In "Add to" or "Remove from" mode, use accumulated records count
        const isAccumulationMode = state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection ||
            state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
        const accumulatedRecordsCount = ((_a = state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
        const selectionCount = isAccumulationMode && accumulatedRecordsCount > 0
            ? accumulatedRecordsCount
            : (hasSelection ? customEvent.detail.recordIds.length : 0);
        // ========================================================================
        // 4. Determine if mode should reset
        // ========================================================================
        // If selection is cleared in Remove mode, reset to NewSelection
        const shouldResetMode = !hasSelection &&
            selectionCount === 0 &&
            state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
        // ========================================================================
        // 5. Build new state
        // ========================================================================
        const newState = {
            hasSelection: selectionCount > 0,
            selectionRecordCount: selectionCount,
            // Store lastSelection for compatibility
            lastSelection: hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                ? {
                    recordIds: customEvent.detail.recordIds,
                    outputDsId: customEvent.detail.outputDsId,
                    queryItemConfigId: customEvent.detail.queryItemConfigId
                }
                : undefined
        };
        // Reset mode if needed
        if (shouldResetMode) {
            newState.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
            newState.accumulatedRecords = []; // Also clear accumulated records
        }
        // ========================================================================
        // 6. Log decision logic
        // ========================================================================
        debugLogger.log('RESTORE', {
            event: 'handleSelectionChange-updating-state',
            widgetId: this.widgetId,
            resultsMode: state.resultsMode,
            isAccumulationMode,
            eventRecordIdsCount: customEvent.detail.recordIds.length,
            hasSelectionFromEvent: hasSelection,
            accumulatedRecordsCountBefore: accumulatedRecordsCount,
            calculatedSelectionCount: selectionCount,
            'will-set-hasSelection': selectionCount > 0,
            'will-set-lastSelection': hasSelection && !!customEvent.detail.outputDsId && !!customEvent.detail.queryItemConfigId,
            'will-reset-mode': shouldResetMode,
            decisionLogic: {
                'isAccumulationMode': isAccumulationMode,
                'accumulatedRecordsCount > 0': accumulatedRecordsCount > 0,
                'use-accumulated-count': isAccumulationMode && accumulatedRecordsCount > 0,
                'use-event-count': !(isAccumulationMode && accumulatedRecordsCount > 0),
                'should-reset-mode': shouldResetMode
            }
        });
        // ========================================================================
        // 7. Update state via callback
        // ========================================================================
        this.callbacks.onStateUpdate(newState);
        // ========================================================================
        // 8. Log state AFTER update
        // ========================================================================
        debugLogger.log('RESTORE', {
            event: 'handleSelectionChange-state-updated',
            widgetId: this.widgetId,
            'new-hasSelection': selectionCount > 0,
            'new-selectionRecordCount': selectionCount,
            'new-lastSelection-recordIds-count': hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                ? customEvent.detail.recordIds.length
                : 0,
            'mode-reset': shouldResetMode,
            'new-mode': shouldResetMode ? _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection : state.resultsMode,
            'note': shouldResetMode
                ? 'Mode reset to NewSelection because selection was cleared in Remove mode'
                : 'lastSelection-only-contains-current-query-records-not-all-accumulated-records'
        });
    }
    // ============================================================================
    // Section 3.2: Panel Open/Close Restoration
    // ============================================================================
    /**
     * Restores selection to the map when the widget panel opens.
     *
     * This method:
     * 1. Checks if accumulated records exist (Add/Remove modes)
     * 2. Groups accumulated records by origin data source
     * 3. Calls selectRecordsAndPublish for each origin DS
     * 4. Falls back to lastSelection if no accumulated records
     *
     * @param deps - Runtime dependencies (graphics layer, map view, config)
     */
    addSelectionToMap(deps) {
        return __awaiter(this, void 0, void 0, function* () {
            const state = this.stateGetter();
            const { lastSelection, accumulatedRecords, resultsMode } = state;
            debugLogger.log('RESTORE', {
                event: 'addSelectionToMap-called',
                widgetId: this.widgetId,
                resultsMode,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                lastSelectionOutputDsId: lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.outputDsId
            });
            // In Add/Remove modes, use accumulated records for restoration
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
            // Check if we should use accumulated records
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-found-accumulated-records',
                    widgetId: this.widgetId,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'should-use-accumulated': true
                });
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-accumulated-records',
                    widgetId: this.widgetId,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: 0,
                    'will-fallback-to-lastSelection': !!lastSelection
                });
            }
            if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                yield this.restoreAccumulatedRecords(accumulatedRecords, deps);
            }
            else if (!isAccumulationMode && lastSelection && lastSelection.recordIds.length > 0) {
                // Fall back to lastSelection in New mode
                yield this.restoreLastSelection(lastSelection, deps);
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-selection-to-restore',
                    widgetId: this.widgetId,
                    resultsMode,
                    hasAccumulatedRecords: accumulatedRecords && accumulatedRecords.length > 0,
                    hasLastSelection: !!lastSelection
                });
            }
        });
    }
    /**
     * Helper: Restore accumulated records (grouped by origin DS)
     */
    restoreAccumulatedRecords(accumulatedRecords, deps) {
        return __awaiter(this, void 0, void 0, function* () {
            // Lazy-load dependencies
            const { DataSourceManager } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! jimu-core */ "jimu-core"));
            const { selectRecordsAndPublish } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts"));
            const recordsByOriginDS = new Map(); // Map<FeatureLayerDataSource, FeatureDataRecord[]>
            const dsManager = DataSourceManager.getInstance();
            // Group records by origin DS
            accumulatedRecords.forEach((record, index) => {
                var _a, _b, _c, _d, _e, _f;
                const recordId = record.getId();
                let originDS = null;
                // Method 1: Try to get from record.getDataSource()
                const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                if (recordDS) {
                    originDS = ((_c = (_b = recordDS.getOriginDataSources) === null || _b === void 0 ? void 0 : _b.call(recordDS)) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
                    debugLogger.log('RESTORE', {
                        event: 'found-origin-ds-from-record-ds',
                        widgetId: this.widgetId,
                        recordIndex: index,
                        recordId,
                        originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                        method: 'record.getDataSource()'
                    });
                }
                // Method 2: If that failed, search all data sources for a record with matching ID
                if (!originDS) {
                    const dsMap = dsManager.getDataSources();
                    const allDataSources = Object.values(dsMap);
                    for (const ds of allDataSources) {
                        // Check if this is a FeatureLayerDataSource
                        if (ds && typeof ds.getAllLoadedRecords === 'function') {
                            try {
                                const allRecords = ds.getAllLoadedRecords() || [];
                                const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                if (matchingRecord) {
                                    originDS = ((_f = (_e = (_d = ds).getOriginDataSources) === null || _e === void 0 ? void 0 : _e.call(_d)) === null || _f === void 0 ? void 0 : _f[0]) || ds;
                                    debugLogger.log('RESTORE', {
                                        event: 'found-origin-ds-via-search',
                                        widgetId: this.widgetId,
                                        recordIndex: index,
                                        recordId,
                                        originDSId: originDS.id,
                                        method: 'searched-all-data-sources',
                                        searchedDSId: ds.id
                                    });
                                    break;
                                }
                            }
                            catch (error) {
                                // Continue searching
                            }
                        }
                    }
                }
                if (originDS) {
                    if (!recordsByOriginDS.has(originDS)) {
                        recordsByOriginDS.set(originDS, []);
                    }
                    recordsByOriginDS.get(originDS).push(record);
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'could-not-find-origin-ds-for-record',
                        widgetId: this.widgetId,
                        recordIndex: index,
                        recordId,
                        warning: 'record-will-be-skipped'
                    });
                }
            });
            debugLogger.log('RESTORE', {
                event: 'panel-opened-restoring-accumulated-records',
                widgetId: this.widgetId,
                resultsMode: this.stateGetter().resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length,
                originDSCount: recordsByOriginDS.size
            });
            // Restore selection for each origin data source
            const useGraphicsLayer = deps.config.useGraphicsLayerForHighlight;
            const graphicsLayer = deps.graphicsLayerRef.current || undefined;
            const mapView = deps.mapViewRef.current || undefined;
            for (const [originDS, records] of recordsByOriginDS.entries()) {
                const recordIds = records.map(r => r.getId());
                try {
                    yield selectRecordsAndPublish(this.widgetId, originDS, recordIds, records, true, // alsoPublishToOutputDS
                    useGraphicsLayer, graphicsLayer, mapView);
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-restored-origin-ds',
                        widgetId: this.widgetId,
                        originDSId: originDS.id,
                        recordCount: records.length,
                        zoomExecuted: false
                    });
                }
                catch (error) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-restore-origin-ds-failed',
                        widgetId: this.widgetId,
                        originDSId: originDS.id,
                        error: error.message
                    });
                }
            }
        });
    }
    /**
     * Helper: Restore lastSelection (New mode)
     */
    restoreLastSelection(lastSelection, deps) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c;
            // Lazy-load dependencies
            const { DataSourceManager } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! jimu-core */ "jimu-core"));
            const { selectRecordsAndPublish } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts"));
            const dsManager = DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-outputDS-not-found',
                    widgetId: this.widgetId,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            // Get origin DS
            const originDS = ((_c = (_b = (_a = outputDS).getOriginDataSources) === null || _b === void 0 ? void 0 : _b.call(_a)) === null || _c === void 0 ? void 0 : _c[0]) || outputDS;
            // Get records
            const allRecords = outputDS.getAllLoadedRecords() || [];
            const recordsToRestore = allRecords.filter((r) => lastSelection.recordIds.includes(r.getId()));
            debugLogger.log('RESTORE', {
                event: 'panel-opened-restoring-lastSelection',
                widgetId: this.widgetId,
                outputDsId: lastSelection.outputDsId,
                recordIdsCount: lastSelection.recordIds.length,
                recordsFound: recordsToRestore.length
            });
            const useGraphicsLayer = deps.config.useGraphicsLayerForHighlight;
            const graphicsLayer = deps.graphicsLayerRef.current || undefined;
            const mapView = deps.mapViewRef.current || undefined;
            try {
                yield selectRecordsAndPublish(this.widgetId, originDS, lastSelection.recordIds, recordsToRestore, true, useGraphicsLayer, graphicsLayer, mapView);
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restored-lastSelection',
                    widgetId: this.widgetId,
                    originDSId: originDS.id,
                    recordCount: recordsToRestore.length
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restore-lastSelection-failed',
                    widgetId: this.widgetId,
                    error: error.message
                });
            }
        });
    }
    /**
     * Clears selection from the map when the widget panel closes.
     *
     * This method:
     * 1. Clears graphics layer (if enabled)
     * 2. Groups accumulated records by origin DS (if they exist)
     * 3. Clears selection from each origin DS
     * 4. Falls back to lastSelection if no accumulated records
     *
     * @param deps - Runtime dependencies (graphics layer, map view, config)
     */
    clearSelectionFromMap(deps) {
        return __awaiter(this, void 0, void 0, function* () {
            const state = this.stateGetter();
            const { lastSelection, accumulatedRecords, resultsMode } = state;
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-called',
                widgetId: this.widgetId,
                resultsMode,
                isAccumulationMode,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                selectionRecordCount: state.selectionRecordCount || 0,
                hasSelection: state.hasSelection || false
            });
            // Always clear graphics layer first when panel closes
            if (deps.config.useGraphicsLayerForHighlight && deps.graphicsLayerRef.current) {
                deps.graphicsLayerManager.clearGraphics(this.widgetId, deps.config);
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-graphics-layer-cleared',
                    widgetId: this.widgetId,
                    graphicsLayerId: deps.graphicsLayerRef.current.id
                });
            }
            // Always clear accumulated records if they exist
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-checking-accumulated-records',
                widgetId: this.widgetId,
                'condition': 'accumulatedRecords && accumulatedRecords.length > 0',
                'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
            });
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                yield this.clearAccumulatedRecords(accumulatedRecords, deps);
            }
            else if (lastSelection && lastSelection.recordIds.length > 0) {
                yield this.clearLastSelection(lastSelection, deps);
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-no-selection-to-clear',
                    widgetId: this.widgetId
                });
            }
        });
    }
    /**
     * Helper: Clear accumulated records (grouped by origin DS)
     */
    clearAccumulatedRecords(accumulatedRecords, deps) {
        return __awaiter(this, void 0, void 0, function* () {
            // Lazy-load dependencies
            const { DataSourceManager } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! jimu-core */ "jimu-core"));
            const { clearSelectionInDataSources } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts"));
            const recordsByOriginDS = new Map();
            const dsManager = DataSourceManager.getInstance();
            // Group records by origin DS (same logic as addSelectionToMap)
            accumulatedRecords.forEach((record, index) => {
                var _a, _b, _c, _d, _e, _f;
                const recordId = record.getId();
                let originDS = null;
                // Method 1: Try to get from record.getDataSource()
                const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                if (recordDS) {
                    originDS = ((_c = (_b = recordDS.getOriginDataSources) === null || _b === void 0 ? void 0 : _b.call(recordDS)) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
                    debugLogger.log('RESTORE', {
                        event: 'clear-found-origin-ds-from-record-ds',
                        widgetId: this.widgetId,
                        recordIndex: index,
                        recordId,
                        originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null'
                    });
                }
                // Method 2: Search all data sources
                if (!originDS) {
                    const dsMap = dsManager.getDataSources();
                    const allDataSources = Object.values(dsMap);
                    for (const ds of allDataSources) {
                        if (ds && typeof ds.getAllLoadedRecords === 'function') {
                            try {
                                const allRecords = ds.getAllLoadedRecords() || [];
                                const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                if (matchingRecord) {
                                    originDS = ((_f = (_e = (_d = ds).getOriginDataSources) === null || _e === void 0 ? void 0 : _e.call(_d)) === null || _f === void 0 ? void 0 : _f[0]) || ds;
                                    debugLogger.log('RESTORE', {
                                        event: 'clear-found-origin-ds-via-search',
                                        widgetId: this.widgetId,
                                        recordIndex: index,
                                        recordId,
                                        originDSId: originDS.id
                                    });
                                    break;
                                }
                            }
                            catch (error) {
                                // Continue searching
                            }
                        }
                    }
                }
                if (originDS) {
                    if (!recordsByOriginDS.has(originDS)) {
                        recordsByOriginDS.set(originDS, []);
                    }
                    recordsByOriginDS.get(originDS).push(record);
                }
            });
            debugLogger.log('RESTORE', {
                event: 'panel-closed-clearing-accumulated-records',
                widgetId: this.widgetId,
                accumulatedRecordsCount: accumulatedRecords.length,
                originDSCount: recordsByOriginDS.size
            });
            // Clear selection from each origin DS
            const useGraphicsLayer = deps.config.useGraphicsLayerForHighlight;
            const graphicsLayer = deps.graphicsLayerRef.current || undefined;
            for (const [originDS, records] of recordsByOriginDS.entries()) {
                try {
                    // Use clearSelectionInDataSources to properly publish empty selection message
                    // This clears the #data_s=... hash parameter
                    yield clearSelectionInDataSources(this.widgetId, originDS, useGraphicsLayer, graphicsLayer);
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-cleared-origin-ds',
                        widgetId: this.widgetId,
                        originDSId: originDS.id,
                        recordCount: records.length
                    });
                }
                catch (error) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-clear-origin-ds-failed',
                        widgetId: this.widgetId,
                        originDSId: originDS.id,
                        error: error.message
                    });
                }
            }
        });
    }
    /**
     * Helper: Clear lastSelection (New mode)
     */
    clearLastSelection(lastSelection, deps) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c;
            // Lazy-load dependencies
            const { DataSourceManager } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! jimu-core */ "jimu-core"));
            const { clearSelectionInDataSources } = yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts"));
            const dsManager = DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-outputDS-not-found',
                    widgetId: this.widgetId,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            const originDS = ((_c = (_b = (_a = outputDS).getOriginDataSources) === null || _b === void 0 ? void 0 : _b.call(_a)) === null || _c === void 0 ? void 0 : _c[0]) || outputDS;
            debugLogger.log('RESTORE', {
                event: 'panel-closed-clearing-lastSelection',
                widgetId: this.widgetId,
                outputDsId: lastSelection.outputDsId,
                originDSId: originDS.id
            });
            try {
                const useGraphicsLayer = deps.config.useGraphicsLayerForHighlight;
                const graphicsLayer = deps.graphicsLayerRef.current || undefined;
                // Use clearSelectionInDataSources to properly publish empty selection message
                // This clears the #data_s=... hash parameter
                yield clearSelectionInDataSources(this.widgetId, originDS, useGraphicsLayer, graphicsLayer);
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-cleared-lastSelection',
                    widgetId: this.widgetId,
                    originDSId: originDS.id
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clear-lastSelection-failed',
                    widgetId: this.widgetId,
                    error: error.message
                });
            }
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UrlConsumptionManager: () => (/* binding */ UrlConsumptionManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage URL parameter consumption and deep linking.
 *
 * Handles both Hash fragments (#) and Query Strings (?), with Hash taking priority.
 * Implements atomic consumption to prevent infinite loops.
 *
 * Part of Chunk 1: URL Parameter Consumption extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class UrlConsumptionManager {
    constructor() {
        this.lastProcessedHash = '';
        this.isProcessing = false;
        this.hashChangeHandler = null;
    }
    /**
     * Checks URL for hash and query string parameters matching configured shortIds.
     * Hash parameters take priority over query string parameters.
     */
    checkUrlParameters(props, resultsMode, callbacks) {
        var _a, _b;
        const { config, id } = props;
        const { onInitialValueFound, onModeResetNeeded } = callbacks;
        debugLogger.log('HASH-EXEC', {
            event: 'urlconsumption-checkurlparameters-entry',
            widgetId: id,
            hasQueryItems: !!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length),
            isProcessing: this.isProcessing,
            lastProcessedHash: this.lastProcessedHash,
            currentHash: window.location.hash.substring(1),
            timestamp: Date.now()
        });
        if (!((_b = config.queryItems) === null || _b === void 0 ? void 0 : _b.length)) {
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-exit-no-query-items',
                widgetId: id,
                timestamp: Date.now()
            });
            return;
        }
        // Prevent concurrent processing
        if (this.isProcessing) {
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-exit-already-processing',
                widgetId: id,
                timestamp: Date.now()
            });
            return;
        }
        const shortIds = config.queryItems
            .map(item => item.shortId)
            .filter(sid => sid != null && sid.trim() !== '');
        if (shortIds.length === 0) {
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-exit-no-shortids',
                widgetId: id,
                timestamp: Date.now()
            });
            return;
        }
        const hash = window.location.hash.substring(1);
        const query = window.location.search.substring(1);
        this.isProcessing = true;
        debugLogger.log('HASH-EXEC', {
            event: 'urlconsumption-parsing-params',
            widgetId: id,
            hash,
            query,
            shortIds,
            timestamp: Date.now()
        });
        const hashParams = new URLSearchParams(hash);
        const queryParams = new URLSearchParams(query);
        let foundShortId = null;
        let foundValue = null;
        let foundIn = null;
        // PRIORITY 1: Hash fragments (always win)
        for (const sid of shortIds) {
            if (hashParams.has(sid)) {
                foundShortId = sid;
                foundValue = hashParams.get(sid);
                foundIn = 'hash';
                break;
            }
        }
        // PRIORITY 2: Query string (if no hash match)
        if (!foundShortId) {
            for (const sid of shortIds) {
                if (queryParams.has(sid)) {
                    foundShortId = sid;
                    foundValue = queryParams.get(sid);
                    foundIn = 'query';
                    break;
                }
            }
        }
        debugLogger.log('HASH-EXEC', {
            event: 'urlconsumption-search-complete',
            widgetId: id,
            foundShortId,
            foundValue,
            foundIn,
            hasMatch: !!(foundShortId && foundValue !== null),
            timestamp: Date.now()
        });
        if (foundShortId && foundValue !== null) {
            // Track only the specific shortId parameter (e.g., "pin=2223059013")
            // NOT the entire hash string with data_s and other parameters
            const currentShortIdParam = `${foundShortId}=${foundValue}`;
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-checking-lastprocessedhash',
                widgetId: id,
                currentShortIdParam,
                lastProcessedHash: this.lastProcessedHash,
                willSkip: this.lastProcessedHash === currentShortIdParam,
                timestamp: Date.now()
            });
            // Skip if we've already processed this exact shortId parameter
            if (this.lastProcessedHash === currentShortIdParam) {
                debugLogger.log('HASH-EXEC', {
                    event: 'urlconsumption-exit-hash-already-processed',
                    widgetId: id,
                    currentShortIdParam,
                    lastProcessedHash: this.lastProcessedHash,
                    timestamp: Date.now()
                });
                this.isProcessing = false;
                return;
            }
            // Update lastProcessedHash to track this specific shortId parameter
            this.lastProcessedHash = currentShortIdParam;
            debugLogger.log('HASH', {
                event: 'url-param-detected',
                widgetId: id,
                shortId: foundShortId,
                value: foundValue,
                foundIn,
                timestamp: Date.now()
            });
            // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
            if (resultsMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection && onModeResetNeeded) {
                debugLogger.log('HASH', {
                    event: 'mode-reset-needed-on-hash-detection',
                    widgetId: id,
                    currentMode: resultsMode,
                    timestamp: Date.now()
                });
                onModeResetNeeded();
            }
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-calling-oninitialvaluefound',
                widgetId: id,
                shortId: foundShortId,
                value: foundValue,
                timestamp: Date.now()
            });
            onInitialValueFound({ shortId: foundShortId, value: foundValue });
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-oninitialvaluefound-returned',
                widgetId: id,
                timestamp: Date.now()
            });
        }
        else {
            debugLogger.log('HASH-EXEC', {
                event: 'urlconsumption-no-match-calling-oninitialvaluefound-undefined',
                widgetId: id,
                timestamp: Date.now()
            });
            // No matching parameters found - clear state
            onInitialValueFound(undefined);
        }
        this.isProcessing = false;
        debugLogger.log('HASH-EXEC', {
            event: 'urlconsumption-checkurlparameters-exit',
            widgetId: id,
            timestamp: Date.now()
        });
    }
    /**
     * Removes a hash parameter from the URL.
     * Used when switching to accumulation modes to consume the deep link.
     */
    removeHashParameter(shortId, widgetId) {
        if (!shortId)
            return;
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        if (urlParams.has(shortId)) {
            urlParams.delete(shortId);
            const newHash = urlParams.toString();
            debugLogger.log('HASH', {
                event: 'removeHashParameter',
                widgetId,
                shortId,
                newHash: newHash ? `#${newHash}` : '(empty)',
                timestamp: Date.now()
            });
            // Update the URL without triggering a reload
            // Always preserve pathname and query string, only update hash
            window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
            // Reset tracking so it can be processed again if needed
            this.lastProcessedHash = '';
        }
    }
    /**
     * Sets up the manager (no autonomous URL checking).
     * QuerySimple should only process hash parameters when HelperSimple explicitly triggers it
     * via OPEN_WIDGET_EVENT. This ensures HelperSimple remains the orchestrator.
     */
    setup(props, resultsMode, callbacks) {
        // Do NOT automatically check URL parameters
        // Do NOT set up hashchange listener
        // QuerySimple will only process hash when HelperSimple explicitly opens the widget
        // This ensures HelperSimple remains the orchestrator
    }
    /**
     * Cleans up hash change listener.
     */
    cleanup() {
        if (this.hashChangeHandler) {
            window.removeEventListener('hashchange', this.hashChangeHandler);
            this.hashChangeHandler = null;
        }
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts":
/*!*****************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WidgetVisibilityManager: () => (/* binding */ WidgetVisibilityManager)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify HelperSimple of widget open/close state.
 */
const QUERYSIMPLE_WIDGET_STATE_EVENT = 'querysimple-widget-state-changed';
/**
 * Utility to manage widget panel visibility detection and HelperSimple notification.
 *
 * Uses IntersectionObserver for efficient DOM-level visibility tracking.
 * Falls back to periodic checking if IntersectionObserver is not available.
 *
 * Part of Chunk 2: Widget Visibility Engine extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class WidgetVisibilityManager {
    constructor() {
        this.visibilityObserver = null;
        this.visibilityCheckInterval = null;
        this.isPanelVisible = false;
        this.widgetElement = null;
    }
    /**
     * Checks if the widget element is currently visible.
     * Fallback method when IntersectionObserver is not available.
     */
    checkVisibility() {
        if (!this.widgetElement)
            return false;
        const element = this.widgetElement;
        const style = window.getComputedStyle(element);
        const rect = element.getBoundingClientRect();
        const isVisible = (style.display !== 'none' &&
            style.visibility !== 'hidden' &&
            style.opacity !== '0' &&
            rect.width > 0 &&
            rect.height > 0 &&
            rect.top < window.innerHeight &&
            rect.bottom > 0 &&
            rect.left < window.innerWidth &&
            rect.right > 0);
        return isVisible;
    }
    /**
     * Notifies HelperSimple of panel visibility state changes.
     */
    notifyHelperSimpleOfPanelState(isVisible, widgetId) {
        const event = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: isVisible
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(event);
        debugLogger.log('WIDGET-STATE', {
            event: isVisible ? 'panel-opened' : 'panel-closed',
            widgetId,
            isVisible,
            method: 'notifyHelperSimpleOfPanelState',
            timestamp: new Date().toISOString()
        });
    }
    /**
     * Logs visibility state changes and calls callbacks.
     */
    logVisibilityChange(isVisible, method, widgetId, callbacks) {
        debugLogger.log('WIDGET-STATE', {
            event: isVisible ? 'panel-opened' : 'panel-closed',
            widgetId,
            isVisible,
            method,
            timestamp: new Date().toISOString()
        });
        // Notify HelperSimple
        this.notifyHelperSimpleOfPanelState(isVisible, widgetId);
        // Call optional callback
        if (callbacks.onVisibilityChange) {
            callbacks.onVisibilityChange(isVisible);
        }
    }
    /**
     * Sets up visibility detection.
     */
    setup(widgetElement, props, callbacks, onVisibilityStateChange) {
        const { id } = props;
        this.widgetElement = widgetElement;
        // Wait for next tick to ensure element is ready
        setTimeout(() => {
            if (!this.widgetElement) {
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup-failed',
                    widgetId: id,
                    reason: 'widget-element-not-available'
                });
                return;
            }
            const element = this.widgetElement;
            // Method 1: IntersectionObserver (most efficient)
            if ('IntersectionObserver' in window) {
                this.visibilityObserver = new IntersectionObserver((entries) => {
                    const entry = entries[0];
                    const isVisible = entry.isIntersecting && entry.intersectionRatio > 0;
                    // Only update if state changed
                    if (this.isPanelVisible !== isVisible) {
                        this.isPanelVisible = isVisible;
                        this.logVisibilityChange(isVisible, 'IntersectionObserver', id, callbacks);
                        onVisibilityStateChange(isVisible);
                    }
                }, {
                    threshold: [0, 0.1, 1.0], // Trigger at 0%, 10%, and 100% visibility
                    rootMargin: '0px'
                });
                this.visibilityObserver.observe(element);
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup',
                    widgetId: id,
                    method: 'IntersectionObserver'
                });
            }
            else {
                // Method 2: Fallback to periodic checking
                this.visibilityCheckInterval = window.setInterval(() => {
                    const isVisible = this.checkVisibility();
                    if (this.isPanelVisible !== isVisible) {
                        this.isPanelVisible = isVisible;
                        this.logVisibilityChange(isVisible, 'periodic-check', id, callbacks);
                        onVisibilityStateChange(isVisible);
                    }
                }, 250); // Check every 250ms
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup',
                    widgetId: id,
                    method: 'periodic-check'
                });
            }
        }, 100);
    }
    /**
     * Cleans up visibility detection observers/intervals.
     */
    cleanup() {
        // Clean up IntersectionObserver
        if (this.visibilityObserver) {
            this.visibilityObserver.disconnect();
            this.visibilityObserver = null;
        }
        // Clean up interval
        if (this.visibilityCheckInterval !== null) {
            clearInterval(this.visibilityCheckInterval);
            this.visibilityCheckInterval = null;
        }
        this.widgetElement = null;
    }
    /**
     * Gets current visibility state.
     */
    getIsPanelVisible() {
        return this.isPanelVisible;
    }
    /**
     * Notifies HelperSimple on mount.
     */
    notifyMount(widgetId) {
        const openEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: true
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(openEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-mounted',
            widgetId,
            timestamp: new Date().toISOString()
        });
    }
    /**
     * Notifies HelperSimple on unmount.
     */
    notifyUnmount(widgetId) {
        const closeEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: false
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(closeEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-unmounted',
            widgetId,
            timestamp: new Date().toISOString()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useZoomToRecords: () => (/* binding */ useZoomToRecords)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var _zoom_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../zoom-utils */ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts");
/**
 * Hook for zooming to feature records with padding.
 *
 * Wraps the shared zoomToRecords utility function in a React hook.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


/**
 * Custom hook that returns a function to zoom to records with padding.
 *
 * @param mapView - The map view to zoom
 * @returns A function that takes records and optional padding, and zooms to them
 */
function useZoomToRecords(mapView) {
    return react__WEBPACK_IMPORTED_MODULE_0__["default"].useCallback((records, options) => __awaiter(this, void 0, void 0, function* () {
        if (!mapView) {
            return;
        }
        yield (0,_zoom_utils__WEBPACK_IMPORTED_MODULE_1__.zoomToRecords)(mapView, records, options);
    }), [mapView]);
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveDraw: () => (/* binding */ InteractiveDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");

/** @jsx jsx */





const sketchToolInfoMap = {
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Point]: { drawToolName: 'point', esriClassName: 'esri-icon-point', toolIndex: 0 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polyline]: { drawToolName: 'polyline', esriClassName: 'esri-icon-polyline', toolIndex: 4 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polygon]: { drawToolName: 'polygon', esriClassName: 'esri-icon-polygon', toolIndex: 2 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Rectangle]: {
        drawToolName: 'rectangle',
        esriClassName: 'esri-icon-checkbox-unchecked',
        toolIndex: 1
    },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Circle]: { drawToolName: 'circle', esriClassName: 'esri-icon-radio-unchecked', toolIndex: 3 }
};
function InteractiveDraw(props) {
    const { toolTypes = [], jimuMapView, onDrawEnd, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [mapModule, setMapModule] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const graphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [clearAfterApply, setClearAfterApply] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const visibleElements = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return {
            createTools: Object.entries(sketchToolInfoMap).reduce((result, [key, value]) => (Object.assign(Object.assign({}, result), { [value.drawToolName]: toolTypes.includes(key) })), { point: false }),
            selectionTools: {
                'lasso-selection': false,
                'rectangle-selection': false
            },
            settingsMenu: false,
            undoRedoMenu: false,
            deleteButton: true
        };
    }, [toolTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.moduleLoader.loadModule('jimu-ui/advanced/map').then((result) => {
            setMapModule(result);
        });
    });
    const handleDrawToolCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuDrawToolsRef) => {
        getLayerFunRef.current = jimuDrawToolsRef.getGraphicsLayer;
    }, []);
    const handleDrawStart = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        getLayerFunRef.current && (getLayerFunRef.current)().removeAll();
    }, []);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic) => {
        graphicRef.current = graphic;
        onDrawEnd(graphic, getLayerFunRef.current, clearAfterApply);
    }, [onDrawEnd, clearAfterApply]);
    const handleCleared = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        graphicRef.current = null;
        onDrawEnd(null);
    }, [onDrawEnd]);
    const handleClearSettingChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        if (graphicRef.current) {
            onDrawEnd(graphicRef.current, getLayerFunRef.current, e.target.checked);
        }
        setClearAfterApply(e.target.checked);
    }, [onDrawEnd]);
    const JimuDraw = mapModule === null || mapModule === void 0 ? void 0 : mapModule.JimuDraw;
    if (!JimuDraw) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.StatusIndicator, { statusType: widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading });
    }
    const isAvailable = Object.keys(visibleElements.createTools).some(toolName => visibleElements.createTools[toolName]);
    if (!isAvailable) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JimuDraw, { jimuMapView: jimuMapView, operatorWidgetId: widgetId, disableSymbolSelector: true, drawingOptions: {
                    creationMode: mapModule.JimuDrawCreationMode.Single,
                    updateOnGraphicClick: false,
                    visibleElements: visibleElements
                }, uiOptions: {
                    isHideBorder: true
                }, onJimuDrawCreated: handleDrawToolCreated, onDrawingStarted: handleDrawStart, onDrawingFinished: handleDrawEnd, onDrawingCleared: handleCleared }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: clearAfterApply, onChange: handleClearSettingChange, className: 'mr-2' }), getI18nMessage('clearDrawing')] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingResult: () => (/* binding */ LoadingResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");





const Root = jimu_theme__WEBPACK_IMPORTED_MODULE_3__.styled.div `
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 2;

  .loading-content {
    .loading-tip {
      position: relative;
    }
  }
`;
function LoadingResult() {
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'loading-content w-100 px-4 d-flex flex-column justify-content-center align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { role: 'alert', "aria-live": 'assertive', className: 'text-paper', children: translate('retrieving') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { className: 'loading-tip mt-8', type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryResultItem: () => (/* binding */ QueryResultItem)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _components_feature_info__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/feature-info */ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  overflow: auto;
  flex-flow: row;
  cursor: pointer;
  flex-shrink: 0;
  min-height: 2rem;
  position: relative;
  
  /* Add right padding to prevent header text from running into trash button */
  padding-right: 44px;  /* 32px button width + 12px buffer */
  
  &.selected {
    outline: 2px solid var(--sys-color-primary-main);
  }
  
  .remove-button {
    position: absolute;
    top: 4px;
    right: 4px;
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
    
    // Larger touch target for mobile/accessibility
    min-width: 32px;
    min-height: 32px;
  }
  
  /* Ensure the FeatureInfo component respects the padding */
  .feature-info-component {
    width: 100%;
  }
  
  /* Make the header wrap if it's still too long */
  .esri-feature__title {
    word-wrap: break-word;
    overflow-wrap: break-word;
    padding-right: 8px;
  }
`;
/**
 * QueryResultItem component - displays a single query result record
 * Features:
 * - Clicking the item zooms to the feature on the map
 * - Remove button (trash icon) in upper-right corner to remove record from results
 * - Records are expanded by default to show full feature information
 */
const QueryResultItem = (props) => {
    const { widgetId, data, dataSource, popupTemplate, defaultPopupTemplate, onClick, onRemove, expandByDefault = false } = props;
    const recordId = data.getId();
    // Log when QueryResultItem renders
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'QueryResultItem-render',
            recordId,
            expandByDefault,
            timestamp: Date.now()
        });
    }, [recordId, expandByDefault]);
    // Check if this record is currently selected
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[dataSource.id]) === null || _b === void 0 ? void 0 : _b.selectedIds) === null || _c === void 0 ? void 0 : _c.includes(data.getId()); });
    // Determine if list is displayed vertically (affects FeatureInfo expandability)
    const isVerticalAlign = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection !== _config__WEBPACK_IMPORTED_MODULE_5__.ListDirection.Horizontal;
    });
    // Handle clicking on the result item - zooms to feature on map
    const handleClickResultItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        // Don't trigger zoom if clicking the remove button
        if (e.target.closest('.remove-button')) {
            return;
        }
        onClick(data);
    }, [onClick, data]);
    // Handle clicking the remove button - removes record from results and selection
    const handleRemove = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        e.stopPropagation(); // Prevent triggering the item click handler
        e.preventDefault();
        onRemove(data);
    }, [onRemove, data]);
    const onKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Enter' || evt.key === ' ') {
            evt.preventDefault();
            evt.stopPropagation();
            handleClickResultItem(evt);
        }
    }, [handleClickResultItem]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-result-item', { selected }), onClick: handleClickResultItem, onKeyUp: onKeyUp, css: style, role: 'option', "aria-selected": selected, tabIndex: 0, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_feature_info__WEBPACK_IMPORTED_MODULE_4__["default"], { graphic: data.feature, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, togglable: isVerticalAlign, expandByDefault: expandByDefault, dataSource: dataSource }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: "Remove result", placement: "bottom", children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: "remove-button", icon: true, size: "sm", variant: "text", color: "inherit", onClick: handleRemove, "aria-label": "Remove result", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 6px;
            min-width: 32px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__.TrashOutlined, { size: 18 }) }) })] }));
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskResult: () => (/* binding */ QueryTaskResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hooks/use-zoom-to-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts");
/* harmony import */ var _simple_list__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./simple-list */ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/directional/expand-all */ "./jimu-icons/outlined/directional/expand-all.tsx");
/* harmony import */ var jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/directional/collapse-all */ "./jimu-icons/outlined/directional/collapse-all.tsx");
/* harmony import */ var _data_actions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../data-actions */ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */






// FORCED: Always SimpleList - LazyList and PagingList removed











const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_17__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_3__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Detects if an identify popup is currently visible in the DOM.
 * Uses verified selectors based on Experience Builder's identify popup structure.
 *
 * @returns true if identify popup is detected and visible, false otherwise
 */
function isIdentifyPopupOpen() {
    // Primary selector: .esri-popup with role="dialog"
    const popup = document.querySelector('.esri-popup[role="dialog"]');
    if (!popup) {
        return false;
    }
    // Verify it's visible (not hidden)
    const ariaHidden = popup.getAttribute('aria-hidden');
    if (ariaHidden === 'true') {
        return false;
    }
    // Additional check: verify computed style shows it's visible
    const style = window.getComputedStyle(popup);
    if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
        return false;
    }
    // Verify it contains esri-features (identify popup structure)
    const hasFeatures = popup.querySelector('.esri-features');
    if (!hasFeatures) {
        return false;
    }
    return true;
}
const resultStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  display: flex;
  flex-direction: column;

  .query-result__header {
    color: var(--sys-color-surface-paper-text);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: 1.5;
    border-bottom: 1px solid var(--sys-color-divider-secondary);
    margin-bottom: 6px;
    padding-bottom: 8px;
  }

  .query-result-container {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    overflow: auto;
    min-height: 0;
  }

  .query-result-info {
    height: 18px;
  }
`;
function QueryTaskResult(props) {
    var _a, _b;
    const { queryItem, queryParams, resultCount, maxPerPage, records, widgetId, outputDS, runtimeZoomToSelected, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, eventManager, isQuerySwitchInProgressRef } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const intl = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
    const zoomToRecords = (0,_hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_6__.useZoomToRecords)(mapView);
    const [queryData, setQueryData] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [selectedRecords, setSelectedRecords] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState([]);
    // FIX (r018.94): Removed removedRecordIds state - no longer needed since records stay in sync
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_QUERY_ITEM, queryItem);
    const [expandAll, setExpandAll] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    // Track individual item expansion states to maintain state when items are removed
    const [itemExpandStates, setItemExpandStates] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Map());
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Track expandAll changes for debugging
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-state-changed',
            widgetId,
            expandAll,
            queryItemConfigId: queryItem.configId,
            timestamp: Date.now()
        });
    }, [expandAll, widgetId, queryItem.configId]);
    // Track if we've already selected these records to prevent re-selection when switching tabs
    const hasSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track the last records we selected to detect when new records come in
    const lastSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the original query record IDs (not selected IDs) to detect when query results change
    const lastQueryRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the last selected FeatureDataRecords for restoration (if needed)
    const lastSelectedFeatureRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // FIX (r018.94): Removed removedRecordIds ref - no longer needed
    // Error state for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const extraActions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,_data_actions__WEBPACK_IMPORTED_MODULE_13__.getExtraActions)(widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected);
    }, [widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected]);
    const enableDataAction = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_a = widgetJson.enableDataAction) !== null && _a !== void 0 ? _a : true;
    });
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    const directionTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection;
    });
    // FORCE SimpleList - ignore config, we're done with lazy loading issues
    const pagingType = _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.Simple;
    const direction = directionTypeInConfig !== null && directionTypeInConfig !== void 0 ? directionTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.ListDirection.Vertical;
    // Group records by origin data source for DataActionList
    // This ensures DataActionList recognizes records even when they come from different queries/origins
    const actionDataSets = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        // Debug: Log what records are available
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-calculation-start',
            widgetId: widgetId,
            selectedRecordsCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            queryDataRecordsCount: ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            hasSelectedRecords: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0,
            hasQueryDataRecords: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) > 0,
            hasRecordsProp: (records === null || records === void 0 ? void 0 : records.length) > 0
        });
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        // In accumulation modes (Add/Remove), prefer the 'records' prop (the accumulated set)
        // because outputDS.getSelectedRecords() will only return records that match the current query's where clause.
        const recordsToUse = isAccumulationMode
            ? (records || [])
            : ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0 ? selectedRecords : (((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.length) > 0 ? queryData.records : (records || [])));
        // If no records, return single DataRecordSet with empty records using outputDS
        if (!recordsToUse || recordsToUse.length === 0) {
            const emptyDataSet = {
                dataSource: outputDS,
                type: 'loaded',
                records: [],
                name: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                label: outputDS === null || outputDS === void 0 ? void 0 : outputDS.getLabel()
            };
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-empty-records',
                widgetId: widgetId,
                dataSetDataSourceId: (_d = emptyDataSet.dataSource) === null || _d === void 0 ? void 0 : _d.id
            });
            return [emptyDataSet];
        }
        // Group records by their origin data source
        const recordsByOriginDS = new Map();
        recordsToUse.forEach(record => {
            var _a, _b, _c, _d;
            const recordDS = (_b = (_a = record).getDataSource) === null || _b === void 0 ? void 0 : _b.call(_a);
            let originDS = null;
            if (recordDS) {
                originDS = ((_c = recordDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
            }
            else if (outputDS) {
                // Fallback: use outputDS's origin if record doesn't have dataSource
                originDS = ((_d = outputDS.getOriginDataSources()) === null || _d === void 0 ? void 0 : _d[0]) || outputDS;
            }
            if (originDS) {
                if (!recordsByOriginDS.has(originDS)) {
                    recordsByOriginDS.set(originDS, []);
                }
                recordsByOriginDS.get(originDS).push(record);
            }
        });
        // Create a DataRecordSet for each origin data source
        const dataSets = Array.from(recordsByOriginDS.entries()).map(([originDS, originRecords]) => {
            const dataSet = {
                dataSource: originDS, // Use origin DS, not outputDS
                type: 'selected',
                records: originRecords,
                name: originDS.id,
                label: originDS.getLabel()
            };
            // Add fields if needed (use currentItem's field settings)
            if (currentItem.resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_4__.FieldsType.SelectAttributes && currentItem.resultDisplayFields != null) {
                dataSet.fields = (0,_query_utils__WEBPACK_IMPORTED_MODULE_8__.combineFields)(currentItem.resultDisplayFields, currentItem.resultTitleExpression);
            }
            else if (originDS && 'getPopupInfo' in originDS) {
                // use fields in popup template from origin DS
                const popupInfo = originDS.getPopupInfo();
                if (popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) {
                    dataSet.fields = popupInfo.fieldInfos.filter((fieldInfo) => fieldInfo.visible).map((fieldInfo) => fieldInfo.fieldName);
                }
            }
            return dataSet;
        });
        // Debug: Log what the final dataSets contain
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-final',
            widgetId: widgetId,
            dataSetsCount: dataSets.length,
            totalRecordsCount: recordsToUse.length,
            dataSetsByOrigin: dataSets.map(ds => {
                var _a, _b;
                return ({
                    originDSId: (_a = ds.dataSource) === null || _a === void 0 ? void 0 : _a.id,
                    recordsCount: ((_b = ds.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                    type: ds.type
                });
            })
        });
        // If we couldn't group by origin (shouldn't happen), fallback to single DataRecordSet with outputDS
        if (dataSets.length === 0 && outputDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-fallback-to-outputDS',
                widgetId: widgetId,
                reason: 'could-not-determine-origin-ds'
            });
            return [{
                    dataSource: outputDS,
                    type: recordsToUse.length > 0 ? 'selected' : 'loaded',
                    records: recordsToUse,
                    name: outputDS.id,
                    label: outputDS.getLabel()
                }];
        }
        return dataSets;
    }, [selectedRecords, outputDS, queryData, currentItem, records, widgetId]);
    // FIX (r018.94): Simplified - no filtering needed since records are kept in sync
    // Memoize records to prevent unnecessary re-renders that reset scroll position
    // This ensures the records prop only changes when the actual data changes, not just the array reference
    const filteredRecordsForList = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (queryData === null || queryData === void 0 ? void 0 : queryData.records) || records || [];
    }, [queryData === null || queryData === void 0 ? void 0 : queryData.records, records]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    /**
     * Effect hook that runs when new query results arrive.
     * Resets removed records, expand state, and query data for the new results.
     * Also handles auto-selection of records when they first arrive.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Check if these are new records (different from what we last queried)
        // IMPORTANT: Compare against original query results, not selected results
        // This prevents removedRecordIds from being reset when records are removed
        const currentRecordIds = (records === null || records === void 0 ? void 0 : records.map(record => record.getId())) || [];
        const recordsChanged = currentRecordIds.length !== lastQueryRecordIdsRef.current.length ||
            currentRecordIds.some((id, index) => id !== lastQueryRecordIdsRef.current[index]);
        // FIX (r018.94): Simplified - no removedRecordIds tracking needed
        debugLogger.log('RESULTS-MODE', {
            event: 'records-prop-changed',
            widgetId: widgetId,
            recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            willSetQueryData: records && records.length > 0,
            hasSelectedRef: hasSelectedRef.current,
            recordsChanged: recordsChanged,
            lastQueryRecordIdsCount: lastQueryRecordIdsRef.current.length,
            currentRecordIdsCount: currentRecordIds.length,
            note: 'r018.94: Records stay in sync - no filtering needed',
            timestamp: Date.now()
        });
        // Update the original query record IDs ref
        if (recordsChanged) {
            lastQueryRecordIdsRef.current = currentRecordIds;
            debugLogger.log('RESULTS-MODE', {
                event: 'records-changed-ref-updated',
                widgetId: widgetId,
                newRecordIdsCount: currentRecordIds.length,
                timestamp: Date.now()
            });
        }
        // NOTE: Don't reset expandAll here - it's handled by the queryItem-change useEffect
        // Resetting it here causes the Expand/Collapse button to flip back when records are removed
        setQueryData({
            records,
            page: 1
        });
        // FIX (r018.94): Simplified - no removedRecordIds check needed
        // Only auto-select records if:
        // 1. We have records and outputDS
        // 2. We haven't already selected these records (hasSelectedRef is false)
        // 3. OR the records have actually changed (new query results)
        if (records && records.length > 0 && outputDS &&
            (!hasSelectedRef.current || recordsChanged)) {
            const recordIds = records.map(record => record.getId());
            const fdr = records;
            (() => __awaiter(this, void 0, void 0, function* () {
                try {
                    setSelectionError(null); // Clear previous errors
                    yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                    hasSelectedRef.current = true; // Mark as selected
                    lastSelectedRecordsRef.current = recordIds; // Store the IDs we selected
                    lastSelectedFeatureRecordsRef.current = fdr; // Store the full records for potential restoration
                    // Notify Widget and HelperSimple of selection change
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.dispatchSelectionEvent)(widgetId, recordIds, outputDS, queryItem.configId, eventManager);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-query-result',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }))();
        }
        else if (recordsChanged && records && records.length === 0) {
            // If records were cleared, reset the selection flag
            hasSelectedRef.current = false;
            lastSelectedRecordsRef.current = [];
            setSelectionError(null); // Clear errors when clearing records
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'auto-selection-skipped',
                widgetId: widgetId,
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                hasRecords: !!(records && records.length > 0),
                hasOutputDS: !!outputDS,
                hasSelectedRef: hasSelectedRef.current,
                recordsChanged: recordsChanged,
                timestamp: Date.now()
            });
        }
    }, [records, outputDS, widgetId, queryItem.configId, queryItem.resultExpandByDefault]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear selection when resultSelectMode changed
        if (outputDS) {
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.publishSelectionMessage)(widgetId, [], outputDS, true);
        }
    }, [queryItem.resultSelectMode, outputDS, widgetId, useGraphicsLayerForHighlight, graphicsLayer]);
    // Update expandAll when queryItem changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        const newExpandAll = (_a = queryItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false;
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-reset-by-queryItem-change',
            widgetId,
            queryItemConfigId: queryItem.configId,
            resultExpandByDefault: queryItem.resultExpandByDefault,
            newExpandAll,
            timestamp: Date.now()
        });
        setExpandAll(newExpandAll);
        // Reset individual expansion states when query changes
        setItemExpandStates(new Map());
    }, [queryItem.configId]);
    /**
     * Monitor origin data source selection changes to detect when other widgets (like map identify)
     * clear our selections. Enhanced with identify popup detection for testing scenarios.
     * Watches the origin data source's selection state directly via polling.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (!outputDS)
            return;
        const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (!originDS)
            return;
        const originDSId = originDS.id;
        let previousSelectedIds = [];
        let identifyPopupWasOpen = false;
        let lastLogTime = 0;
        const LOG_THROTTLE_MS = 1000; // Throttle logs to once per second
        // Initial check
        previousSelectedIds = originDS.getSelectedRecordIds() || [];
        identifyPopupWasOpen = isIdentifyPopupOpen();
        // Watch for selection changes on the origin data source
        const checkSelection = () => {
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            const ourExpectedIds = lastSelectedRecordsRef.current;
            const hasOurSelection = ourExpectedIds.length > 0;
            const identifyPopupIsOpen = isIdentifyPopupOpen();
            // Detect if selection was cleared or changed externally
            const wasCleared = previousSelectedIds.length > 0 && currentSelectedIds.length === 0;
            const wasChanged = previousSelectedIds.length > 0 &&
                (currentSelectedIds.length !== previousSelectedIds.length ||
                    !currentSelectedIds.every(id => previousSelectedIds.includes(id)));
            // NEW: Detect if selection was added (went from empty to having records)
            const wasAdded = previousSelectedIds.length === 0 && currentSelectedIds.length > 0;
            // Track identify popup state changes
            const identifyPopupJustOpened = !identifyPopupWasOpen && identifyPopupIsOpen;
            const identifyPopupJustClosed = identifyPopupWasOpen && !identifyPopupIsOpen;
            const identifyPopupStillOpen = identifyPopupWasOpen && identifyPopupIsOpen;
            // Log identify popup state changes
            const now = Date.now();
            if (identifyPopupJustOpened || identifyPopupJustClosed) {
                debugLogger.log('SELECTION', {
                    event: identifyPopupJustOpened ? 'identify-popup-opened' : 'identify-popup-closed',
                    originDSId,
                    ourSelectionCount: ourExpectedIds.length,
                    currentSelectionCount: currentSelectedIds.length,
                    timestamp: new Date().toISOString()
                });
                // If identify popup just closed and selection was cleared, dispatch restore event
                if (identifyPopupJustClosed && wasCleared && hasOurSelection && ourExpectedIds.length > 0) {
                    const restoreEvent = new CustomEvent(RESTORE_ON_IDENTIFY_CLOSE_EVENT, {
                        detail: {
                            widgetId,
                            recordIds: ourExpectedIds,
                            outputDsId: outputDS.id,
                            queryItemConfigId: queryItem.configId
                        },
                        bubbles: true,
                        cancelable: true
                    });
                    window.dispatchEvent(restoreEvent);
                    debugLogger.log('SELECTION', {
                        event: 'identify-popup-closed-restore-requested',
                        widgetId,
                        recordCount: ourExpectedIds.length,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    });
                }
            }
            // Log ALL selection changes (not just when we have our own selection)
            if (wasCleared || wasChanged || wasAdded) {
                // Check if this matches our expected selection
                const matchesOurSelection = hasOurSelection &&
                    ourExpectedIds.length === currentSelectedIds.length &&
                    ourExpectedIds.every(id => currentSelectedIds.includes(id));
                // Determine what would happen (for testing/logging)
                const wouldRestore = wasCleared && identifyPopupIsOpen && hasOurSelection && ourExpectedIds.length > 0;
                // Determine scenario
                let scenario = 'Unknown';
                if (wasAdded && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 4: Another widget selected records (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 5: Another widget changed selection (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 2: Query  Identify (selection changed, not cleared)  Would NOT restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget  Would NOT restore';
                }
                else if (wasCleared && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 1: Query  Identify  Would restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget (cleared)  Would NOT restore';
                }
                else if (wasAdded && hasOurSelection) {
                    scenario = matchesOurSelection
                        ? 'Our widget selected records'
                        : 'Another widget selected different records';
                }
                // Log detection with identify popup state (throttled)
                if (now - lastLogTime > LOG_THROTTLE_MS) {
                    debugLogger.log('SELECTION', {
                        event: wasCleared ? 'selection-cleared' : wasChanged ? 'selection-changed' : 'selection-added',
                        originDSId,
                        ourExpectedCount: ourExpectedIds.length,
                        previousSelectedCount: previousSelectedIds.length,
                        currentSelectedCount: currentSelectedIds.length,
                        wasCleared,
                        wasChanged,
                        wasAdded,
                        hasOurSelection,
                        matchesOurSelection,
                        identifyPopupIsOpen,
                        identifyPopupJustOpened,
                        identifyPopupStillOpen,
                        identifyPopupJustClosed,
                        wouldRestore,
                        ourExpectedIds: ourExpectedIds.slice(0, 5),
                        previousSelectedIds: previousSelectedIds.slice(0, 5),
                        currentSelectedIds: currentSelectedIds.slice(0, 5),
                        timestamp: new Date().toISOString(),
                        note: wouldRestore
                            ? 'Would restore selection (cleared + identify popup open)'
                            : identifyPopupIsOpen && wasChanged
                                ? 'Identify popup open but selection changed (not cleared) - would not restore'
                                : wasCleared && !identifyPopupIsOpen
                                    ? 'Selection cleared, checking if identify popup opens...'
                                    : wasAdded
                                        ? hasOurSelection && matchesOurSelection
                                            ? 'Our widget selected records'
                                            : hasOurSelection && !matchesOurSelection
                                                ? 'Another widget selected different records'
                                                : 'Selection added (by another widget or external source)'
                                        : 'No identify popup detected - would not restore'
                    });
                    lastLogTime = now;
                }
            }
            previousSelectedIds = [...currentSelectedIds];
            identifyPopupWasOpen = identifyPopupIsOpen;
        };
        // Check periodically (every 500ms)
        const intervalId = setInterval(checkSelection, 500);
        return () => {
            clearInterval(intervalId);
        };
    }, [outputDS]);
    /**
     * Clears all results. Resets local state and delegates to parent's clearResult method.
     */
    const clearResults = () => __awaiter(this, void 0, void 0, function* () {
        // Log hash state before clearing
        const hashBefore = window.location.hash.substring(1);
        const urlParamsBefore = new URLSearchParams(hashBefore);
        const hashParamsBefore = {};
        urlParamsBefore.forEach((value, key) => {
            hashParamsBefore[key] = value;
        });
        debugLogger.log('HASH', {
            event: 'clearResults-called',
            widgetId,
            hashBefore: hashBefore,
            hashParamsBefore: hashParamsBefore,
            hashParamsCount: Object.keys(hashParamsBefore).length,
            timestamp: Date.now()
        });
        // FIX (r018.97): Simplified - just delegate to parent's clearResult
        // Parent handles all cleanup: records, selection, graphics, hash, messages, etc.
        // Local state will be reset when component remounts with fresh results
        yield onNavBack(true);
        // Log hash state after clearing (with delay to catch async updates)
        setTimeout(() => {
            const hashAfter = window.location.hash.substring(1);
            const urlParamsAfter = new URLSearchParams(hashAfter);
            const hashParamsAfter = {};
            urlParamsAfter.forEach((value, key) => {
                hashParamsAfter[key] = value;
            });
            debugLogger.log('HASH', {
                event: 'clearResults-completed',
                widgetId,
                hashBefore: hashBefore,
                hashAfter: hashAfter,
                hashParamsBefore: hashParamsBefore,
                hashParamsAfter: hashParamsAfter,
                hashParamsRemoved: Object.keys(hashParamsBefore).length - Object.keys(hashParamsAfter).length,
                hashParamsCountBefore: Object.keys(hashParamsBefore).length,
                hashParamsCountAfter: Object.keys(hashParamsAfter).length,
                stillHasHashParams: Object.keys(hashParamsAfter).length > 0,
                timestamp: Date.now()
            });
        }, 100);
    });
    const handleRenderDone = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(({ dataItems, pageSize, page }) => {
        // FIX (r018.92): Skip handleRenderDone if a query switch is in progress
        // This prevents handleRenderDone from re-selecting full query results before the query switch
        // logic can clear the graphics layer and re-select only the accumulated records
        if (isQuerySwitchInProgressRef === null || isQuerySwitchInProgressRef === void 0 ? void 0 : isQuerySwitchInProgressRef.current) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleRenderDone-skipped-query-switch-in-progress',
                widgetId,
                queryItemConfigId: queryItem.configId,
                dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                resultsMode,
                timestamp: Date.now()
            });
            return;
        }
        debugLogger.log('RESULTS-MODE', {
            event: 'handleRenderDone-called',
            widgetId,
            queryItemConfigId: queryItem.configId,
            dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
            pageSize,
            page,
            resultsMode,
            accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
            timestamp: Date.now()
        });
        // FIX (r018.94): Simplified - no removedRecordIds filtering needed
        // Records prop is already filtered in Add/Remove mode
        // FIX (r018.89): When in Add/Remove mode, also filter to only include accumulated records
        // This prevents handleRenderDone from re-selecting the full query results after a query switch
        let filteredItems = dataItems || [];
        if (resultsMode !== _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.NEW_SELECTION && accumulatedRecords && accumulatedRecords.length > 0) {
            const accumulatedRecordIds = new Set(accumulatedRecords.map(r => r.getId()));
            const beforeFilterCount = filteredItems.length;
            filteredItems = filteredItems.filter(item => accumulatedRecordIds.has(item.getId()));
            debugLogger.log('RESULTS-MODE', {
                event: 'handleRenderDone-filtered-by-accumulated-records',
                widgetId,
                resultsMode,
                dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                afterAccumulatedFilter: filteredItems.length,
                accumulatedRecordsCount: accumulatedRecords.length,
                filtered: beforeFilterCount - filteredItems.length,
                note: 'r018.94: No removedRecordIds filter - records stay in sync',
                timestamp: Date.now()
            });
        }
        // Check if queryData has actually changed before updating state
        // This prevents unnecessary re-renders that reset scroll position
        const currentRecords = (queryData === null || queryData === void 0 ? void 0 : queryData.records) || [];
        const currentRecordIds = currentRecords.map(r => r.getId()).sort();
        const newRecordIds = filteredItems.map(r => r.getId()).sort();
        const dataChanged = currentRecordIds.length !== newRecordIds.length ||
            !currentRecordIds.every((id, idx) => id === newRecordIds[idx]) ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.pageSize) !== pageSize ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.page) !== page;
        // Only update state if data has actually changed
        if (dataChanged) {
            setQueryData({
                records: filteredItems,
                pageSize,
                page
            });
        }
        // Only select records that are NOT removed
        // IMPORTANT: Only re-select if the selection has actually changed to avoid resetting scroll position
        if (filteredItems && filteredItems.length > 0 && outputDS) {
            const recordIds = filteredItems.map(record => record.getId());
            const fdr = filteredItems;
            // Check what's currently selected to avoid unnecessary re-selection (which resets scroll)
            const currentlySelectedIds = outputDS.getSelectedRecordIds() || [];
            const selectionChanged = currentlySelectedIds.length !== recordIds.length ||
                !recordIds.every(id => currentlySelectedIds.includes(id));
            // Only select if the selection has actually changed
            if (selectionChanged) {
                // r018.78: Use async IIFE to properly await selection and pass graphics parameters
                ;
                (() => __awaiter(this, void 0, void 0, function* () {
                    try {
                        setSelectionError(null); // Clear previous errors
                        yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr, false, // alsoPublishToOutputDS
                        useGraphicsLayerForHighlight, graphicsLayer, mapView);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'handleRenderDone-selecting-filtered-records',
                            widgetId: widgetId,
                            dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                            filteredItemsCount: filteredItems.length,
                            selectionChanged: true,
                            currentlySelectedCount: currentlySelectedIds.length,
                            newSelectionCount: recordIds.length,
                            usedGraphicsLayer: useGraphicsLayerForHighlight,
                            note: 'r018.94: No removedRecordIds tracking',
                            timestamp: Date.now()
                        });
                    }
                    catch (error) {
                        const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                        setSelectionError(errorMessage);
                        debugLogger.log('TASK', {
                            event: 'selection-failed-handleRenderDone',
                            error: errorMessage,
                            errorStack: error instanceof Error ? error.stack : undefined,
                            recordCount: recordIds.length
                        });
                    }
                }))();
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'handleRenderDone-skipping-reselection',
                    widgetId: widgetId,
                    dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                    filteredItemsCount: filteredItems.length,
                    reason: 'selection-unchanged',
                    currentlySelectedCount: currentlySelectedIds.length,
                    note: 'r018.94: No removedRecordIds tracking',
                    timestamp: Date.now()
                });
            }
        }
    }, [outputDS, widgetId, queryData, resultsMode, accumulatedRecords]);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(outputDS === null || outputDS === void 0 ? void 0 : outputDS.id);
        const dsRecords = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        const selectedIds = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
        // Capture records prop before using it (to avoid shadowing)
        const recordsProp = records;
        // Debug: Log what handleDataSourceInfoChange sees
        debugLogger.log('RESULTS-MODE', {
            event: 'handleDataSourceInfoChange-fired',
            widgetId: widgetId,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            dsId: ds === null || ds === void 0 ? void 0 : ds.id,
            selectedRecordsFromDS: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
            selectedIdsFromDS: selectedIds.length,
            currentSelectedRecordsState: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            recordsPropCount: (recordsProp === null || recordsProp === void 0 ? void 0 : recordsProp.length) || 0,
            note: 'r018.94: No removedRecordIds tracking',
            timestamp: Date.now()
        });
        // If we have records in the prop (accumulated records) but DS shows 0 selected,
        // and we currently have selectedRecords, this is likely a query switch in "Add to" mode
        // where re-selection hasn't happened yet. Don't clear selectedRecords - wait for re-selection.
        if (recordsProp && recordsProp.length > 0 && selectedIds.length === 0 && selectedRecords && selectedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-clear-during-query-switch',
                widgetId: widgetId,
                reason: 'waiting-for-reselection',
                recordsPropCount: recordsProp.length,
                currentSelectedRecordsCount: selectedRecords.length
            });
            return; // Skip updating - re-selection is coming
        }
        // FIX (r018.94): Simplified - no removedRecordIds filtering needed
        // Records prop is already filtered in Add/Remove mode
        let shouldUpdate = false;
        if (selectedIds.length !== (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length)) {
            shouldUpdate = true;
        }
        else { // equal length
            shouldUpdate = selectedIds.some(id => {
                const target = selectedRecords.find((item) => item.getId() === id);
                return target == null;
            });
        }
        if (shouldUpdate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
                oldSelectedIds: (selectedRecords || []).map(r => r.getId()).slice(0, 5),
                newSelectedIds: selectedIds.slice(0, 5),
                note: 'r018.94: No removedRecordIds filtering',
                timestamp: Date.now()
            });
            setSelectedRecords(dsRecords || []);
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-update',
                widgetId: widgetId,
                reason: 'no-change-detected',
                timestamp: Date.now()
            });
        }
    }, [outputDS === null || outputDS === void 0 ? void 0 : outputDS.id, selectedRecords, widgetId, records]);
    /**
     * Generates the tip message showing how many features are displayed.
     * FIX (r018.94): Simplified - no filtering needed since records stay in sync
     *
     * @returns Formatted string like "Features displayed: 118 / 118"
     */
    const getTipMessage = () => {
        if (queryData && queryData.records) {
            // FIX (r018.94): No filtering needed - queryData.records is already filtered
            const displayedCount = queryData.records.length;
            // FIX (r018.83): Use displayedCount for both numerator and denominator
            // This ensures the count shows "118 / 118" after removing records, not "118 / 121"
            return `${getI18nMessage('featuresDisplayed')}: ${displayedCount} / ${displayedCount}`;
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
        }
        return '';
    };
    /**
     * Toggles expand/collapse state for all result items.
     * When toggled, all result items will be expanded or collapsed together.
     * Updates individual item expansion states in the map to maintain state when items are removed.
     */
    const toggleExpandAll = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setExpandAll(prev => {
            const newValue = !prev;
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'toggleExpandAll-clicked',
                widgetId,
                previousValue: prev,
                newValue,
                timestamp: Date.now()
            });
            // Update all current items in the map with the new expansion state
            setItemExpandStates(prevMap => {
                const newMap = new Map(prevMap);
                // Get all current record IDs from filtered records
                const allRecordIds = filteredRecordsForList.map(r => r.getId());
                allRecordIds.forEach(id => {
                    newMap.set(id, newValue);
                });
                debugLogger.log('EXPAND-COLLAPSE', {
                    event: 'itemExpandStates-updated',
                    widgetId,
                    newValue,
                    updatedCount: allRecordIds.length,
                    recordIds: allRecordIds.slice(0, 10), // Log first 10 IDs
                    timestamp: Date.now()
                });
                return newMap;
            });
            return newValue;
        });
    }, [widgetId, filteredRecordsForList]);
    const resultUseOutputDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
            dataSourceId: queryItem.outputDataSourceId,
            mainDataSourceId: queryItem.outputDataSourceId
        });
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.outputDataSourceId]);
    const handleEscape = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    }, []);
    // Keep records selected and zoom to clicked record
    // Records remain selected as long as they're in the results
    // Clicking a record always zooms to it on the map (this behavior is always enabled)
    const toggleSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        // Ensure the clicked record is selected (it should already be, but ensure it)
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        const dataId = data.getId();
        // If this record isn't already selected, add it to the selection
        if (!selectedIds.includes(dataId)) {
            const updatedSelectedDatas = [...selectedDatas, data];
            const recordIds = updatedSelectedDatas.map(record => record.getId());
            // Select records and publish selection message using utility function
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
        }
        // Zoom to the clicked record with padding (always enabled - user wants to keep this behavior)
        // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
        if (!mapView && !useGraphicsLayerForHighlight) {
            debugLogger.log('BUG', {
                bugId: 'BUG-GRAPHICS-001',
                category: 'GRAPHICS',
                event: 'zoom-operation-failed-graphics-layer-disabled',
                widgetId,
                operation: 'result-item-click-zoom',
                recordId: data.getId(),
                description: 'Zoom operation attempted on result item click but mapView is unavailable because useGraphicsLayerForHighlight is disabled',
                workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                targetResolution: 'r019.0'
            });
        }
        zoomToRecords([data]).catch(error => {
            // Silently handle errors - zoom is non-critical
        });
    }, [outputDS, widgetId, zoomToRecords]);
    /**
     * Removes a record from the results and selection.
     * If removing the last record, automatically clears all results
     * by calling the trash can logic (same as clicking Clear button).
     * This ensures the UI doesn't show "Features displayed: 0 / 1" when all results are removed.
     *
     * @param data - The feature data record to remove
     */
    const removeRecord = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;
        const dataId = data.getId();
        const currentExpandAll = expandAll;
        // Log hash state when removing individual record
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        const hashParams = {};
        urlParams.forEach((value, key) => {
            hashParams[key] = value;
        });
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'removeRecord-started',
            widgetId,
            removedRecordId: dataId,
            currentExpandAll,
            timestamp: Date.now()
        });
        debugLogger.log('HASH', {
            event: 'removeRecord-called',
            widgetId,
            removedRecordId: dataId,
            hash: hash,
            hashParams: hashParams,
            hashParamsCount: Object.keys(hashParams).length,
            timestamp: Date.now()
        });
        // SURGICAL HASH MODIFICATION: Remove the record ID from hash parameters
        // This makes the hash a precise representation of what should be selected
        const idParamKeys = ['id', 'pin', 'major', 'parcel', 'shortId']; // Common ID parameter names
        let hashModified = false;
        idParamKeys.forEach(paramKey => {
            if (urlParams.has(paramKey)) {
                const currentValue = urlParams.get(paramKey) || '';
                const ids = currentValue.split(',').map(id => id.trim()).filter(id => id);
                // Remove the specific record ID from this parameter
                const filteredIds = ids.filter(id => id !== dataId);
                if (filteredIds.length !== ids.length) {
                    // IDs were removed, update the parameter
                    if (filteredIds.length > 0) {
                        urlParams.set(paramKey, filteredIds.join(','));
                    }
                    else {
                        // No IDs left, remove the parameter entirely
                        urlParams.delete(paramKey);
                    }
                    hashModified = true;
                }
            }
        });
        // FIX (r018.84): SURGICAL HASH MODIFICATION FOR data_s PARAMETER
        // Experience Builder creates a new widget output ID instead of updating the existing one
        // We need to manually update the existing entry to prevent duplication
        if (urlParams.has('data_s')) {
            const dataS = urlParams.get('data_s') || '';
            const decodedDataS = decodeURIComponent(dataS);
            const selections = decodedDataS.split(',');
            // Extract widget number from widgetId (e.g., "widget_12" -> "12")
            const widgetMatch = widgetId.match(/widget_(\d+)/);
            if (widgetMatch) {
                const widgetNumber = widgetMatch[1];
                const widgetPattern = new RegExp(`widget_${widgetNumber}_output_\\d+`);
                // Find and update the selection entry for this widget
                let dataSModified = false;
                const updatedSelections = selections.map(selection => {
                    if (!selection.startsWith('id:')) {
                        return selection;
                    }
                    const idPart = selection.substring(3); // Remove "id:"
                    const colonIndex = idPart.lastIndexOf(':');
                    if (colonIndex === -1) {
                        return selection;
                    }
                    const dsIdPart = idPart.substring(0, colonIndex);
                    const recordIdsPart = idPart.substring(colonIndex + 1);
                    // Check if this matches our widget's output DS pattern
                    let matchesWidget = false;
                    if (dsIdPart.includes('~')) {
                        // Compound format: dataSource_*~widget_XX_output_*
                        const parts = dsIdPart.split('~');
                        matchesWidget = parts.some(part => part.match(widgetPattern));
                    }
                    else {
                        // Simple format: widget_XX_output_*
                        matchesWidget = dsIdPart.match(widgetPattern) !== null;
                    }
                    if (matchesWidget) {
                        // Remove the specific record ID from this entry
                        const recordIds = recordIdsPart.split(',').map(id => id.trim()).filter(id => id);
                        const filteredRecordIds = recordIds.filter(id => id !== dataId);
                        if (filteredRecordIds.length !== recordIds.length) {
                            dataSModified = true;
                            debugLogger.log('HASH', {
                                event: 'data_s-record-removed',
                                widgetId,
                                removedRecordId: dataId,
                                originalRecordCount: recordIds.length,
                                newRecordCount: filteredRecordIds.length,
                                dsIdPart,
                                timestamp: Date.now()
                            });
                            // If no records remain, return empty string (will be filtered out)
                            if (filteredRecordIds.length === 0) {
                                return '';
                            }
                            // Reconstruct the selection with updated record IDs
                            return `id:${dsIdPart}:${filteredRecordIds.join(',')}`;
                        }
                    }
                    return selection;
                }).filter(s => s); // Remove empty strings
                if (dataSModified) {
                    if (updatedSelections.length > 0) {
                        urlParams.set('data_s', encodeURIComponent(updatedSelections.join(',')));
                    }
                    else {
                        // No selections remain, remove data_s entirely
                        urlParams.delete('data_s');
                    }
                    hashModified = true;
                    debugLogger.log('HASH', {
                        event: 'data_s-surgically-modified',
                        widgetId,
                        removedRecordId: dataId,
                        originalSelectionCount: selections.length,
                        newSelectionCount: updatedSelections.length,
                        timestamp: Date.now()
                    });
                }
            }
        }
        if (hashModified) {
            // Update hash surgically
            const newHash = urlParams.toString();
            window.history.replaceState(null, '', `#${newHash}`);
            debugLogger.log('HASH', {
                event: 'hash-surgically-modified-id-removed',
                widgetId,
                removedRecordId: dataId,
                originalHash: hash,
                newHash: newHash,
                timestamp: Date.now()
            });
        }
        // FIX (r018.96): Removed manual removal tracking - no longer needed
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-updating-accumulated-records',
            widgetId,
            removedRecordId: dataId,
            note: 'r018.96: No manual removal tracking - duplicate detection handles this',
            timestamp: Date.now()
        });
        // Remove from expansion states map
        setItemExpandStates(prevMap => {
            const newMap = new Map(prevMap);
            newMap.delete(dataId);
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'itemExpandStates-cleaned-up',
                widgetId,
                removedRecordId: dataId,
                remainingCount: newMap.size,
                timestamp: Date.now()
            });
            return newMap;
        });
        // FIX (r018.94): Removed removedRecordIds tracking - queryData now updated directly
        // Update queryData to filter out the removed record
        setQueryData(prevData => {
            if (!prevData)
                return prevData;
            const filteredRecords = prevData.records.filter((record) => record.getId() !== dataId);
            debugLogger.log('RESULTS-MODE', {
                event: 'queryData-updated-after-removal',
                widgetId,
                removedRecordId: dataId,
                recordsCountBefore: prevData.records.length,
                recordsCountAfter: filteredRecords.length,
                timestamp: Date.now()
            });
            // FIX (r018.94): Check if this was the last record - if so, navigate back
            if (filteredRecords.length === 0 && prevData.records.length > 0) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'last-record-removed-navigating-back',
                    widgetId,
                    removedRecordId: dataId,
                    timestamp: Date.now()
                });
                // Use setTimeout to avoid setState during render
                setTimeout(() => onNavBack(true), 0);
            }
            return Object.assign(Object.assign({}, prevData), { records: filteredRecords });
        });
        // FIX (r018.85): DIAGNOSTIC - Graphics count BEFORE removeRecordsFromOriginSelections
        const graphicsCountBeforeOriginRemoval = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0;
        const graphicsIdsBeforeOriginRemoval = ((_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; }).slice(0, 10)) || [];
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-BEFORE-removeRecordsFromOriginSelections',
            widgetId,
            removedRecordId: dataId,
            graphicsCountBefore: graphicsCountBeforeOriginRemoval,
            graphicsIdsBefore: graphicsIdsBeforeOriginRemoval,
            willPassGraphicsLayer: false, // FIX: Changed to false to prevent graphics manipulation here
            timestamp: Date.now()
        });
        // ALWAYS remove from origin data source selections (same as Remove mode)
        // This properly removes records from the map selection, handling single or multiple origin sources
        // FIX (r018.85): DON'T pass graphics layer parameters here - let graphics be managed by selection sync
        // The previous behavior (passing graphicsLayer) was causing the count to jump from 124 to 136
        // because graphics were being removed here, then re-added during selection synchronization
        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_15__.removeRecordsFromOriginSelections)(widgetId, [data], outputDS
        // NOT passing useGraphicsLayerForHighlight or graphicsLayer
        // Graphics will be synced through normal selection flow
        );
        // FIX (r018.85): DIAGNOSTIC - Graphics count AFTER removeRecordsFromOriginSelections
        const graphicsCountAfterOriginRemoval = ((_c = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _c === void 0 ? void 0 : _c.length) || 0;
        const graphicsIdsAfterOriginRemoval = ((_d = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _d === void 0 ? void 0 : _d.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; }).slice(0, 10)) || [];
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-AFTER-removeRecordsFromOriginSelections',
            widgetId,
            removedRecordId: dataId,
            graphicsCountBefore: graphicsCountBeforeOriginRemoval,
            graphicsCountAfter: graphicsCountAfterOriginRemoval,
            graphicsIdsAfter: graphicsIdsAfterOriginRemoval,
            graphicsChanged: graphicsCountAfterOriginRemoval !== graphicsCountBeforeOriginRemoval,
            graphicsChangedBy: graphicsCountAfterOriginRemoval - graphicsCountBeforeOriginRemoval,
            expected: 'Graphics should NOT change here (no graphics layer params passed)',
            timestamp: Date.now()
        });
        // FIX (r018.91): DIAGNOSTIC - Check why manual graphics removal condition isn't met
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-checking-manual-graphics-removal-condition',
            widgetId,
            removedRecordId: dataId,
            useGraphicsLayerForHighlight: useGraphicsLayerForHighlight,
            hasGraphicsLayer: !!graphicsLayer,
            graphicsLayerId: graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.id,
            graphicsLayerGraphicsCount: ((_e = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _e === void 0 ? void 0 : _e.length) || 0,
            conditionWillPass: !!(useGraphicsLayerForHighlight && graphicsLayer),
            timestamp: Date.now()
        });
        // FIX (r018.90): Manually remove graphics from layer after removeRecordsFromOriginSelections
        // Since we don't pass graphics layer params to removeRecordsFromOriginSelections (to avoid 
        // the 136 duplicate issue), we need to manually remove the graphic here
        // This is safe now because r018.89 fixed the query switch re-selection issue
        if (useGraphicsLayerForHighlight && graphicsLayer) {
            const graphicsCountBeforeManualRemoval = graphicsLayer.graphics.length;
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removal-manual-graphics-sync-start',
                widgetId,
                removedRecordId: dataId,
                graphicsCountBefore: graphicsCountBeforeManualRemoval,
                timestamp: Date.now()
            });
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_16__.removeHighlightGraphics)(graphicsLayer, [dataId]);
            const graphicsCountAfterManualRemoval = graphicsLayer.graphics.length;
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removal-manual-graphics-sync-complete',
                widgetId,
                removedRecordId: dataId,
                graphicsCountBefore: graphicsCountBeforeManualRemoval,
                graphicsCountAfter: graphicsCountAfterManualRemoval,
                graphicsRemoved: graphicsCountBeforeManualRemoval - graphicsCountAfterManualRemoval,
                expectedRemoved: 1,
                removalMatches: (graphicsCountBeforeManualRemoval - graphicsCountAfterManualRemoval) === 1,
                timestamp: Date.now()
            });
        }
        else {
            // FIX (r018.91): Log when condition is NOT met to understand why
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removal-manual-graphics-removal-SKIPPED',
                widgetId,
                removedRecordId: dataId,
                reason: !useGraphicsLayerForHighlight ? 'useGraphicsLayerForHighlight is false' :
                    !graphicsLayer ? 'graphicsLayer is null/undefined' :
                        'unknown',
                useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!graphicsLayer,
                timestamp: Date.now()
            });
        }
        // DIAGNOSTIC LOGGING: Full state BEFORE removal
        const outputDSSelectedBefore = outputDS.getSelectedRecords() || [];
        const outputDSSelectedIdsBefore = outputDSSelectedBefore.map(r => r.getId());
        const accumulatedRecordsIdsBefore = (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.map(r => r.getId())) || [];
        // FIX (r018.81): Detailed graphics attribute inspection to understand why IDs are null
        const graphicsLayerIdsBefore = [];
        const firstFewGraphicsAttrs = [];
        (_f = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _f === void 0 ? void 0 : _f.forEach((g, index) => {
            var _a;
            if (index < 3) {
                // Log first 3 graphics' full attributes for diagnosis
                firstFewGraphicsAttrs.push({
                    index,
                    hasAttributes: !!g.attributes,
                    attributes: g.attributes,
                    attributeKeys: g.attributes ? Object.keys(g.attributes) : []
                });
            }
            graphicsLayerIdsBefore.push(((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId) || null);
        });
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-before-state',
            widgetId,
            removedRecordId: dataId,
            outputDSSelectedCount: outputDSSelectedBefore.length,
            outputDSSelectedIds: outputDSSelectedIdsBefore,
            accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
            accumulatedRecordsIds: accumulatedRecordsIdsBefore,
            graphicsLayerCount: ((_g = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _g === void 0 ? void 0 : _g.length) || 0,
            graphicsLayerIds: graphicsLayerIdsBefore.slice(0, 110),
            firstFewGraphicsAttrs, // NEW: inspect what attributes are actually there
            allSourcesMatch: outputDSSelectedIdsBefore.length === accumulatedRecordsIdsBefore.length &&
                outputDSSelectedIdsBefore.length === graphicsLayerIdsBefore.length &&
                JSON.stringify(outputDSSelectedIdsBefore.sort()) === JSON.stringify(accumulatedRecordsIdsBefore.sort()),
            timestamp: Date.now()
        });
        // Update outputDS selection
        const selectedDatas = (_h = outputDS.getSelectedRecords()) !== null && _h !== void 0 ? _h : [];
        const updatedSelectedDatas = selectedDatas.filter(record => record.getId() !== dataId);
        const recordIds = updatedSelectedDatas.map(record => record.getId());
        // DEBUG: Log state after removal
        debugLogger.log('RESULTS-MODE', {
            event: 'removeRecord-state-after-removal',
            widgetId,
            removedRecordId: dataId,
            outputDSSelectedBeforeRemoval: selectedDatas.length,
            outputDSSelectedAfterRemoval: updatedSelectedDatas.length,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            queryDataRecordsCount: ((_j = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _j === void 0 ? void 0 : _j.length) || 0,
            accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
            resultsMode,
            note: 'r018.94: Records stay in sync - no removedRecordIds tracking',
            timestamp: Date.now()
        });
        // Update outputDS selection
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, updatedSelectedDatas);
        }
        // IMPORTANT: Publish custom event so widget can update lastSelection state
        // This ensures restoration restores the correct (updated) count
        const originDS = (_k = outputDS.getOriginDataSources()) === null || _k === void 0 ? void 0 : _k[0];
        const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
        const selectionEvent = new CustomEvent('querysimple-selection-changed', {
            detail: {
                widgetId,
                recordIds, // Updated record IDs (with removed record excluded)
                dataSourceId,
                outputDsId: outputDS.id,
                queryItemConfigId: queryItem.configId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(selectionEvent);
        // DIAGNOSTIC LOGGING: Full state AFTER removal (before sync)
        const outputDSSelectedAfter = outputDS.getSelectedRecords() || [];
        const outputDSSelectedIdsAfter = outputDSSelectedAfter.map(r => r.getId());
        // FIX (r018.81): Detailed graphics attribute inspection to understand why IDs are null
        const graphicsLayerIdsAfter = [];
        const firstFewGraphicsAttrsAfter = [];
        (_l = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _l === void 0 ? void 0 : _l.forEach((g, index) => {
            var _a;
            if (index < 3) {
                // Log first 3 graphics' full attributes for diagnosis
                firstFewGraphicsAttrsAfter.push({
                    index,
                    hasAttributes: !!g.attributes,
                    attributes: g.attributes,
                    attributeKeys: g.attributes ? Object.keys(g.attributes) : []
                });
            }
            graphicsLayerIdsAfter.push(((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId) || null);
        });
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-after-state-before-sync',
            widgetId,
            removedRecordId: dataId,
            outputDSSelectedCount: outputDSSelectedAfter.length,
            outputDSSelectedIds: outputDSSelectedIdsAfter,
            graphicsLayerCount: ((_m = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _m === void 0 ? void 0 : _m.length) || 0,
            graphicsLayerIds: graphicsLayerIdsAfter.slice(0, 110),
            firstFewGraphicsAttrsAfter, // NEW: inspect what attributes are actually there
            removedFromOutputDS: outputDSSelectedIdsAfter.length < outputDSSelectedIdsBefore.length,
            removedFromGraphics: graphicsLayerIdsAfter.length < graphicsLayerIdsBefore.length,
            timestamp: Date.now()
        });
        // FIX (r018.97): Sync accumulatedRecords in ALL modes for universal tab count tracking
        // accumulatedRecords is now the single source of truth for displayed records across all modes
        // This ensures tab count updates correctly when records are removed in ANY mode (New, Add, Remove)
        if (onAccumulatedRecordsChange) {
            // Get the actual selected records from outputDS (single source of truth)
            // This is called AFTER outputDS.selectRecordsByIds() above, so it reflects the removal
            const actuallySelectedRecords = outputDS.getSelectedRecords() || [];
            // Sync accumulatedRecords with what's actually selected
            // This ensures removed records are immediately excluded from accumulatedRecords
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                // Build a Set of actually selected IDs for fast lookup
                const actuallySelectedIds = new Set(actuallySelectedRecords.map(r => r.getId()));
                // Filter accumulatedRecords to only include records that are actually selected
                const syncedRecords = accumulatedRecords.filter(record => actuallySelectedIds.has(record.getId()));
                const syncedRecordsIds = syncedRecords.map(r => r.getId());
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-immediate-sync-with-outputds',
                    widgetId,
                    resultsMode,
                    removedRecordId: dataId,
                    accumulatedRecordsCountBefore: accumulatedRecords.length,
                    accumulatedRecordsIdsBefore: accumulatedRecordsIdsBefore,
                    actuallySelectedCount: actuallySelectedRecords.length,
                    actuallySelectedIds: outputDSSelectedIdsAfter,
                    syncedRecordsCount: syncedRecords.length,
                    syncedRecordsIds: syncedRecordsIds,
                    recordsRemoved: accumulatedRecords.length - syncedRecords.length,
                    removedIds: accumulatedRecordsIdsBefore.filter(id => !syncedRecordsIds.includes(id)),
                    note: 'r018.97: immediate-sync-in-all-modes-for-universal-tab-count',
                    timestamp: Date.now()
                });
                // Update accumulatedRecords to match reality (immediate sync, not lazy)
                onAccumulatedRecordsChange(syncedRecords);
                // DIAGNOSTIC LOGGING: Full state AFTER sync
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-removal-after-sync-state',
                    widgetId,
                    removedRecordId: dataId,
                    accumulatedRecordsCountAfter: syncedRecords.length,
                    accumulatedRecordsIdsAfter: syncedRecordsIds,
                    outputDSSelectedCount: outputDSSelectedAfter.length,
                    outputDSSelectedIds: outputDSSelectedIdsAfter,
                    graphicsLayerCount: ((_o = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _o === void 0 ? void 0 : _o.length) || 0,
                    graphicsLayerIds: graphicsLayerIdsAfter,
                    allSourcesMatch: syncedRecordsIds.length === outputDSSelectedIdsAfter.length &&
                        syncedRecordsIds.length === graphicsLayerIdsAfter.length &&
                        JSON.stringify(syncedRecordsIds.sort()) === JSON.stringify(outputDSSelectedIdsAfter.sort()),
                    timestamp: Date.now()
                });
            }
            else if (actuallySelectedRecords.length > 0) {
                // If accumulatedRecords is empty but outputDS has selection, sync it
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-syncing-empty-accumulated-with-outputds',
                    widgetId,
                    removedRecordId: dataId,
                    actuallySelectedCount: actuallySelectedRecords.length,
                    note: 'accumulatedRecords-was-empty-syncing-from-outputds',
                    timestamp: Date.now()
                });
                onAccumulatedRecordsChange(actuallySelectedRecords);
            }
            else {
                // Both are empty - ensure accumulatedRecords is empty
                debugLogger.log('RESULTS-MODE', {
                    event: 'x-button-both-empty-syncing',
                    widgetId,
                    removedRecordId: dataId,
                    note: 'both-accumulatedRecords-and-outputds-are-empty',
                    timestamp: Date.now()
                });
                onAccumulatedRecordsChange([]);
            }
        }
        // FIX (r018.96): Removed manual modification flag - no longer needed
        debugLogger.log('RESULTS-MODE', {
            event: 'x-button-removal-complete',
            widgetId,
            removedRecordId: dataId,
            note: 'r018.96: No manual removal tracking needed',
            timestamp: Date.now()
        });
        // FIX (r018.85): FINAL DIAGNOSTIC - Graphics count after entire removal flow
        // This happens AFTER all sync logic, so we can see the final state
        setTimeout(() => {
            var _a, _b;
            const finalGraphicsCount = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const finalGraphicsIds = ((_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; })) || [];
            const finalGraphicsIdsSample = finalGraphicsIds.slice(0, 10);
            // Count duplicates in final graphics
            const graphicsIdCounts = new Map();
            finalGraphicsIds.forEach(id => {
                if (id) {
                    graphicsIdCounts.set(id, (graphicsIdCounts.get(id) || 0) + 1);
                }
            });
            const duplicateIds = Array.from(graphicsIdCounts.entries())
                .filter(([_, count]) => count > 1)
                .map(([id, count]) => ({ id, count }));
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removal-FINAL-graphics-state',
                widgetId,
                removedRecordId: dataId,
                graphicsCountBeforeEntireFlow: graphicsCountBeforeOriginRemoval,
                graphicsCountAfterEntireFlow: finalGraphicsCount,
                graphicsIdsSample: finalGraphicsIdsSample,
                graphicsChanged: finalGraphicsCount !== graphicsCountBeforeOriginRemoval,
                graphicsChangedBy: finalGraphicsCount - graphicsCountBeforeOriginRemoval,
                expectedChange: -1, // Should remove 1 graphic
                actualChange: finalGraphicsCount - graphicsCountBeforeOriginRemoval,
                changeMatches: (finalGraphicsCount - graphicsCountBeforeOriginRemoval) === -1,
                duplicateGraphicsDetected: duplicateIds.length > 0,
                duplicateGraphics: duplicateIds.slice(0, 5),
                totalDuplicates: duplicateIds.reduce((sum, { count }) => sum + (count - 1), 0),
                note: 'Final state after all removal and sync logic completes',
                timestamp: Date.now()
            });
        }, 100); // Small delay to ensure all async operations complete
        // Note: Hash parameters are preserved but hash-triggered queries are blocked
        // when manual modifications exist (handled in widget's handleOpenWidgetEvent)
        // Log after removeRecord completes to check if expandAll changed
        setTimeout(() => {
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-completed',
                widgetId,
                removedRecordId: dataId,
                expandAllBefore: currentExpandAll,
                expandAllAfter: expandAll,
                expandAllChanged: currentExpandAll !== expandAll,
                expandByDefaultProp: expandAll, // What will be passed to SimpleList
                timestamp: Date.now()
            });
        }, 0);
    }, [outputDS, widgetId, resultCount, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, queryItem.configId, expandAll]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result h-100', css: resultStyle, role: 'listbox', "aria-label": getI18nMessage('results'), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: resultUseOutputDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding: 0 16px; margin-top: 8px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_17__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result__header d-flex align-items-center mx-4', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { "aria-label": getI18nMessage('back'), ref: backBtnRef, className: 'p-0 mr-2', size: 'sm', variant: 'text', color: 'inherit', icon: true, onClick: () => { onNavBack(); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__.ArrowLeftOutlined, { autoFlip: true }) }), (_b = currentItem.resultsLabel) !== null && _b !== void 0 ? _b : getI18nMessage('results'), ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, size: 'sm', variant: 'text', color: 'inherit', onClick: clearResults, "aria-label": getI18nMessage('clearResult'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: iconMap.toolDelete }) }) }), enableDataAction && outputDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `width: 1px; height: 16px; background-color: var(--sys-color-divider-input);` }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionList, { widgetId: widgetId, dataSets: actionDataSets, listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionListStyle.Dropdown, buttonSize: 'sm', buttonType: 'tertiary', extraActions: extraActions })] }))] }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-container mt-1', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-info mb-2 px-4 d-flex align-items-center justify-content-between', role: 'alert', "aria-live": 'polite', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: getTipMessage() }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), placement: 'top', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, onClick: toggleExpandAll, "aria-label": expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), children: expandAll ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__.CollapseAllOutlined, {}) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__.ExpandAllOutlined, {}) }) }) })] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_simple_list__WEBPACK_IMPORTED_MODULE_7__.SimpleList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, records: filteredRecordsForList, direction: direction, onEscape: handleEscape, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll, itemExpandStates: itemExpandStates, onRenderDone: handleRenderDone }, 'simple'))] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskContext: () => (/* binding */ QueryTaskContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    resetSymbol: null
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskForm: () => (/* binding */ QueryTaskForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-spatial-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");

/** @jsx jsx */











const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__.createQuerySimpleDebugLogger)();



/**
 * Event-Driven Hash Parameter Execution Pattern
 *
 * CRITICAL: This is the ONLY execution path for hash-triggered queries.
 *
 * Flow:
 * 1. Hash value set in state as STRING (e.g., "5568900000")
 * 2. DOM manipulation triggers SqlExpressionRuntime to process the value
 * 3. SqlExpressionRuntime converts string  array format [{value: "...", label: "..."}]
 * 4. handleSqlExprObjChange detects conversion  dispatches QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT
 * 5. Event listener in query-task.tsx executes query (OR handleSqlExprObjChange calls applyQuery directly)
 *
 * WHY THIS PATTERN EXISTS:
 * - SqlExpressionRuntime ONLY fires onChange when value is converted to array format
 * - Queries REQUIRE array format - executing with string format returns unfiltered results (1000 records)
 * - We MUST wait for conversion before executing queries
 *
 * ANTI-PATTERN TO AVOID:
 * - DO NOT add useEffect hooks that execute queries based on string values
 * - DO NOT execute queries before QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT is dispatched
 * - DO NOT circumvent the event-driven flow with early execution checks
 *
 * If you need to execute a query, wait for the conversion event or call applyQuery()
 * AFTER handleSqlExprObjChange has detected the conversion and dispatched the event.
 */
const QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT = 'querysimple-hash-value-converted';
const getFormStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    .form-title {
      color: var(--sys-color-surface-paper-text);
      font-weight: 500;
      font-size: 0.8125rem;
      line-height: 1.5;
      margin-top: 0 !important;
    }
    .query-form__content {
      flex: 1 1 ${isAutoHeight ? 'auto' : 'auto'};
      max-height: ${isAutoHeight ? '61.8vh' : 'none'};
      overflow: auto;
      padding-bottom: 0;
    }
    .query-form__actions {
      flex-shrink: 0;
      margin-top: 0;
      padding-top: 4px;
    }
  `;
};
function QueryTaskForm(props) {
    var _a, _b, _c, _d;
    const { widgetId, configId, outputDS, spatialFilterEnabled, datasourceReady, onFormSubmit, dataActionFilter, initialInputValue, onHashParameterUsed, queryItemShortId, activeTab, onTabChange } = props;
    const preDataActionFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.usePrevious(dataActionFilter);
    const queryItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.queryItems.find(item => item.configId === configId);
    });
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_8__["default"]);
    const [resetSymbol, setResetSymbol] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Runtime zoom preference - initialized with config value, can be overridden by user
    const [runtimeZoomToSelected, setRuntimeZoomToSelected] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    // Sync runtime zoom preference when query item changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setRuntimeZoomToSelected((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected, queryItem === null || queryItem === void 0 ? void 0 : queryItem.configId]);
    // const [dataSource, setDataSource] = React.useState<DataSource>(null)
    const { useAttributeFilter, useSpatialFilter, spatialFilterTypes, sqlExprObj, spatialMapWidgetIds, spatialInteractiveCreateToolTypes, spatialRelationUseDataSources, spatialIncludeRuntimeData, spatialRelations, spatialRelationEnableBuffer, spatialRelationBufferDistance, spatialRelationBufferUnit, spatialInteractiveEnableBuffer, spatialInteractiveBufferDistance, spatialInteractiveBufferUnit, attributeFilterLabel = getI18nMessage('attributeFilter'), spatialFilterLabel = getI18nMessage('spatialFilter'), attributeFilterDesc, spatialFilterDesc } = currentItem;
    const [attributeFilterSqlExprObj, setAttributeFilterSqlExprObj] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(sqlExprObj);
    // Ref to track current SQL expression for synchronous access in applyQuery
    // This ensures hash values are immediately available when Apply is clicked
    const attributeFilterSqlExprObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(sqlExprObj);
    const spatialFilterObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const spatialRelationRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(_config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect);
    const bufferRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const applyButtonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const formContentRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const sqlExprRuntimeContainerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Container for SqlExpressionRuntime DOM manipulation
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_10__.useAutoHeight)();
    const showClauseNumber = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef((0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj));
    const initialValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track which configId we've set the value for
    const lastValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track the last value that was set
    const hashTriggeredRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false); // Track if query was triggered via hash parameter
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track previous configId to detect query switches
    const [isTypingValid, setIsTypingValid] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    // Monitor focus and input events within the query form
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleFocus = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                setIsTypingValid((0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val));
                debugLogger.log('FORM', {
                    event: 'input-focused',
                    configId,
                    tagName: target.tagName,
                    type: target.type,
                    value: val
                });
            }
        };
        const handleInput = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val);
                setIsTypingValid(isValid);
                debugLogger.log('FORM', {
                    event: 'input-typing',
                    configId,
                    value: val,
                    isTypingValid: isValid
                });
            }
        };
        const handleFocusOut = (e) => {
            // Small delay to allow state to catch up
            setTimeout(() => {
                setIsTypingValid(false);
            }, 50);
        };
        const container = formContentRef.current;
        if (container) {
            container.addEventListener('focusin', handleFocus);
            container.addEventListener('input', handleInput);
            container.addEventListener('focusout', handleFocusOut);
        }
        return () => {
            if (container) {
                container.removeEventListener('focusin', handleFocus);
                container.removeEventListener('input', handleInput);
                container.removeEventListener('focusout', handleFocusOut);
            }
        };
    }, [configId]);
    // Check if any attribute filter input is valid
    const isInputValid = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        // If the user is currently typing something valid, the form is valid
        if (isTypingValid) {
            debugLogger.log('FORM', {
                event: 'validation-check-instant',
                configId,
                isValid: true
            });
            return true;
        }
        if (!(attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) || attributeFilterSqlExprObj.parts.length === 0) {
            return true; // If no parts, we assume it's valid (e.g. spatial-only query)
        }
        // Check if at least one SINGLE part has a valid value
        const hasValidValue = attributeFilterSqlExprObj.parts.some(part => {
            var _a, _b, _c, _d;
            // Accessing Immutable structures requires care. If dot notation fails, 
            // the framework components might be using .get() or other methods.
            // We'll be inclusive here: if it's not a SINGLE part, we treat it as valid.
            if (part.type === 'SINGLE') {
                const val = (_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value;
                const source = (_b = part.valueOptions) === null || _b === void 0 ? void 0 : _b.source;
                // If the source is NOT 'USER_INPUT', it's likely a list/dropdown (UNIQUE_VALUES, FIELD_VALUE)
                // We also check for part.dataSource which is common for list-based selections
                // We treat these as "List" types which are exempted from the empty-string rule.
                const isList = (source && source !== 'USER_INPUT') || ((_c = part.dataSource) === null || _c === void 0 ? void 0 : _c.source);
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val, !!isList);
                debugLogger.log('FORM', {
                    event: 'validation-check-detail',
                    configId,
                    partType: part.type,
                    source,
                    hasDataSource: !!part.dataSource,
                    dataSourceSource: (_d = part.dataSource) === null || _d === void 0 ? void 0 : _d.source,
                    isList: !!isList,
                    value: val,
                    isValid
                });
                debugLogger.log('FORM', {
                    event: 'validation-check',
                    configId,
                    partType: part.type,
                    source,
                    isList,
                    value: val,
                    valueType: typeof val,
                    isValid
                });
                return isValid;
            }
            return true;
        });
        return hasValidValue;
    }, [attributeFilterSqlExprObj, configId, isTypingValid]);
    const originDS = outputDS === null || outputDS === void 0 ? void 0 : outputDS.getOriginDataSources()[0];
    // Track configId changes (query switches)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('FORM', {
            event: 'configId-changed',
            configId,
            previousConfigId: initialValueSetRef.current,
            initialInputValue,
            timestamp: Date.now()
        });
    }, [configId, initialInputValue, datasourceReady, outputDS, widgetId, hashTriggeredRef]);
    /**
     * Sets the input value from URL hash parameters when:
     * 1. Datasource is ready
     * 2. We have an initialInputValue from URL hash
     * 3. We haven't already set it for this configId, OR the value has changed
     *
     * Uses both React state updates and DOM manipulation to ensure the value
     * is properly set in SqlExpressionRuntime's internal state.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9;
        debugLogger.log('FORM', {
            event: 'initialInputValue-prop-received',
            configId,
            initialInputValue,
            datasourceReady,
            hasSqlExprObj: !!sqlExprObj,
            sqlExprObjPartsLength: (_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length,
            initialValueSetRef: initialValueSetRef.current,
            willProcess: datasourceReady && initialInputValue && ((_b = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _b === void 0 ? void 0 : _b.length) > 0,
            timestamp: Date.now()
        });
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'form-initialInputValue-received',
            configId,
            initialInputValue,
            datasourceReady,
            hasOutputDS: !!outputDS,
            hasSqlExprObj: !!sqlExprObj,
            sqlExprObjPartsLength: (_c = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _c === void 0 ? void 0 : _c.length,
            initialValueSetRef: initialValueSetRef.current,
            lastValueSetRef: lastValueSetRef.current,
            hashTriggeredRef: hashTriggeredRef.current,
            currentStateValue: (_f = (_e = (_d = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.valueOptions) === null || _f === void 0 ? void 0 : _f.value,
            willProcess: datasourceReady && outputDS && initialInputValue && ((_g = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _g === void 0 ? void 0 : _g.length) > 0,
            timestamp: Date.now()
        });
        // Reset flag if configId changed (switched to different query)
        if (initialValueSetRef.current !== null && initialValueSetRef.current !== configId) {
            initialValueSetRef.current = null;
            lastValueSetRef.current = null;
            hashTriggeredRef.current = false; // Reset hash trigger flag when switching queries
            debugLogger.log('FORM', {
                event: 'hashTriggeredRef-reset',
                configId,
                reason: 'switching-queries',
                timestamp: Date.now()
            });
            setIsTypingValid(false); // Reset typing validation
        }
        // Check if value has changed for the same configId
        const valueChanged = lastValueSetRef.current !== null &&
            lastValueSetRef.current !== initialInputValue &&
            initialValueSetRef.current === configId;
        // DIAGNOSTIC (r018.112): Prove hypothesis about shouldSetValue logic
        debugLogger.log('HASH-EXEC', {
            event: 'form-shouldSetValue-calculation',
            configId,
            initialInputValue,
            CONDITIONS: {
                datasourceReady,
                hasOutputDS: !!outputDS,
                hasInitialInputValue: !!initialInputValue,
                hasSqlExprObjParts: !!(((_h = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _h === void 0 ? void 0 : _h.length) > 0)
            },
            REFS: {
                initialValueSetRef: initialValueSetRef.current,
                lastValueSetRef: lastValueSetRef.current,
                previousConfigIdRef: previousConfigIdRef.current
            },
            LOGIC_BREAKDOWN: {
                'initialValueSetRef !== configId': initialValueSetRef.current !== configId,
                'lastValueSetRef !== null': lastValueSetRef.current !== null,
                'lastValueSetRef !== initialInputValue': lastValueSetRef.current !== initialInputValue,
                'initialValueSetRef === configId': initialValueSetRef.current === configId,
                'valueChanged (all 3 above AND)': valueChanged,
                'FINAL: configId-mismatch OR valueChanged': (initialValueSetRef.current !== configId || valueChanged)
            },
            BREAKDOWN_BASE_CONDITIONS: {
                datasourceReady,
                'has-initialInputValue': !!initialInputValue,
                'has-sqlExprObj-parts': !!(((_j = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _j === void 0 ? void 0 : _j.length) > 0),
                'ref-check': (initialValueSetRef.current !== configId || valueChanged),
                'baseConditions (all 4 AND)': (datasourceReady && initialInputValue && (((_k = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _k === void 0 ? void 0 : _k.length) > 0) && (initialValueSetRef.current !== configId || valueChanged))
            },
            timestamp: Date.now()
        });
        // Set the value if:
        // - We haven't set it for this configId yet, OR
        // - The value has changed for the same configId (hash parameter updated)
        // FIX (r018.112): Differentiate first load from mid-session hash changes
        // First load: Require outputDS to avoid race condition (r018.109)
        // Mid-session: Use old logic that worked before r018.109
        const isFirstLoad = initialValueSetRef.current === null;
        const baseConditions = datasourceReady &&
            initialInputValue &&
            ((_l = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _l === void 0 ? void 0 : _l.length) > 0 &&
            (initialValueSetRef.current !== configId || valueChanged);
        const shouldSetValue = isFirstLoad
            ? (baseConditions && !!outputDS) // First load: strict check (prevents race), !! forces boolean
            : baseConditions; // Mid-session: old logic (works fine)
        // DIAGNOSTIC (r018.112): Log final result
        debugLogger.log('HASH-EXEC', {
            event: 'form-shouldSetValue-result',
            configId,
            initialInputValue,
            isFirstLoad,
            shouldSetValue,
            reason: !shouldSetValue ?
                (!datasourceReady ? 'datasourceReady-false' :
                    !outputDS && isFirstLoad ? 'outputDS-null-on-first-load' :
                        !initialInputValue ? 'initialInputValue-null' :
                            !(((_m = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _m === void 0 ? void 0 : _m.length) > 0) ? 'no-sqlExprObj-parts' :
                                'ref-conditions-not-met') : 'all-conditions-met',
            timestamp: Date.now()
        });
        if (shouldSetValue) {
            // FIX (r018.113): Remove tab switch logic - SqlExpressionRuntime works regardless of active tab
            // Setting value in React state is sufficient; onChange will fire when component processes it
            debugLogger.log('FORM', {
                event: 'hash-value-setting-start',
                configId,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                valueChanged,
                hashTriggeredRefBefore: hashTriggeredRef.current,
                sqlExprObjPartsLength: (_o = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _o === void 0 ? void 0 : _o.length,
                activeTab,
                timestamp: Date.now()
            });
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'form-hash-value-setting-start',
                configId,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                lastValueSetRef: lastValueSetRef.current,
                valueChanged,
                hashTriggeredRefBefore: hashTriggeredRef.current,
                datasourceReady,
                hasOutputDS: !!outputDS,
                sqlExprObjPartsLength: (_p = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _p === void 0 ? void 0 : _p.length,
                activeTab,
                timestamp: Date.now()
            });
            // Set hashTriggeredRef IMMEDIATELY when setting hash value
            // This ensures handleSqlExprObjChange can detect hash-triggered conversions
            hashTriggeredRef.current = true;
            debugLogger.log('FORM', {
                event: 'hashTriggeredRef-set-true',
                configId,
                initialInputValue,
                timestamp: Date.now()
            });
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'form-hashTriggeredRef-set-true',
                configId,
                initialInputValue,
                hashTriggeredRefAfter: hashTriggeredRef.current,
                timestamp: Date.now()
            });
            const firstPart = sqlExprObj.parts[0];
            // Check if the first part is a SINGLE clause (not a SqlClauseSet)
            if (firstPart && 'type' in firstPart && firstPart.type === 'SINGLE' && 'valueOptions' in firstPart) {
                // Update the expression object with the initial value
                const updated = sqlExprObj.setIn(['parts', '0', 'valueOptions', 'value'], initialInputValue);
                debugLogger.log('FORM', {
                    event: 'hash-value-setting-react-state',
                    configId,
                    initialInputValue,
                    previousStateValue: (_s = (_r = (_q = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _q === void 0 ? void 0 : _q[0]) === null || _r === void 0 ? void 0 : _r.valueOptions) === null || _s === void 0 ? void 0 : _s.value,
                    newStateValue: (_v = (_u = (_t = updated === null || updated === void 0 ? void 0 : updated.parts) === null || _t === void 0 ? void 0 : _t[0]) === null || _u === void 0 ? void 0 : _u.valueOptions) === null || _v === void 0 ? void 0 : _v.value,
                    willCallSetState: true,
                    note: 'Setting value in React state - SqlExpressionRuntime should receive via expression prop'
                });
                setAttributeFilterSqlExprObj(updated);
                // Update ref immediately for synchronous access in applyQuery
                attributeFilterSqlExprObjRef.current = updated;
                debugLogger.log('FORM', {
                    event: 'hash-value-ref-updated',
                    configId,
                    initialInputValue,
                    refValueAfterUpdate: (_z = (_y = (_x = (_w = attributeFilterSqlExprObjRef.current) === null || _w === void 0 ? void 0 : _w.parts) === null || _x === void 0 ? void 0 : _x[0]) === null || _y === void 0 ? void 0 : _y.valueOptions) === null || _z === void 0 ? void 0 : _z.value,
                    timestamp: Date.now()
                });
                // Update clause number for the updated expression
                showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(updated);
                // FIX (r018.113): Set tracking refs immediately after setting React state
                // These refs prevent re-setting the same value and track what we've processed
                initialValueSetRef.current = configId;
                lastValueSetRef.current = initialInputValue;
                // FIX (r018.123): MutationObserver will watch for input field and populate it using focus/blur cycle
                // The flow is: setState  SqlExpressionRuntime remounts  MutationObserver detects input[type="text"]  
                // focus  set value  dispatch events  blur  SqlExpressionRuntime.onChange fires naturally 
                // handleSqlExprObjChange detects stringarray conversion  fires QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT 
                // query-task.tsx event listener executes query (event-driven pattern from r018.108)
                debugLogger.log('FORM', {
                    event: 'hash-value-state-set-awaiting-dom-population',
                    configId,
                    initialInputValue,
                    hashTriggeredRef: hashTriggeredRef.current,
                    note: 'Value set in React state - MutationObserver will populate input[type="text"] using focus/blur cycle',
                    timestamp: Date.now()
                });
            }
        }
        // The sqlExprObj.parts may change but the displaySQL is the same
        if (!sqlExprObj) {
            showClauseNumber.current = 0;
            setAttributeFilterSqlExprObj(null);
            attributeFilterSqlExprObjRef.current = null;
            debugLogger.log('FORM', {
                event: 'sqlExprObj-cleared',
                configId,
                timestamp: Date.now()
            });
        }
        else {
            showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
            // Check if we already have a value set (from user input or hash)
            const currentValue = (_2 = (_1 = (_0 = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _0 === void 0 ? void 0 : _0[0]) === null || _1 === void 0 ? void 0 : _1.valueOptions) === null || _2 === void 0 ? void 0 : _2.value;
            const refValue = (_6 = (_5 = (_4 = (_3 = attributeFilterSqlExprObjRef.current) === null || _3 === void 0 ? void 0 : _3.parts) === null || _4 === void 0 ? void 0 : _4[0]) === null || _5 === void 0 ? void 0 : _5.valueOptions) === null || _6 === void 0 ? void 0 : _6.value;
            const baseValue = (_9 = (_8 = (_7 = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _7 === void 0 ? void 0 : _7[0]) === null || _8 === void 0 ? void 0 : _8.valueOptions) === null || _9 === void 0 ? void 0 : _9.value;
            const hasValueSet = currentValue !== undefined && currentValue !== null && currentValue !== '';
            const hasRefValue = refValue !== undefined && refValue !== null && refValue !== '';
            const configIdChanged = previousConfigIdRef.current !== null && previousConfigIdRef.current !== configId;
            const hashWasProcessed = initialValueSetRef.current === configId;
            // FIX (r018.115): Preserve hash-set values even after cleanup clears initialInputValue
            // Check both state AND ref for value presence (ref updates before state in same render)
            // Only update if:
            // 1. We haven't set a value yet (no value in current state OR ref), AND
            // 2. We haven't already processed a hash for this configId, OR
            // 3. configId changed (switching queries - reset to base sqlExprObj)
            // Otherwise, preserve the existing value as a visual record
            if ((!hasValueSet && !hasRefValue && !hashWasProcessed) || configIdChanged) {
                setAttributeFilterSqlExprObj(sqlExprObj);
                attributeFilterSqlExprObjRef.current = sqlExprObj;
                debugLogger.log('FORM', {
                    event: 'sqlExprObj-updated-ref',
                    configId,
                    previousConfigId: previousConfigIdRef.current,
                    initialInputValue,
                    initialValueSetRef: initialValueSetRef.current,
                    hasValueSet,
                    hasRefValue,
                    hashWasProcessed,
                    configIdChanged,
                    previousValue: currentValue,
                    refValue: refValue,
                    newValue: baseValue,
                    reason: configIdChanged ? 'configId-changed-resetting' : 'no-value-set-initializing',
                    timestamp: Date.now()
                });
            }
            else {
                debugLogger.log('FORM', {
                    event: 'sqlExprObj-skipped-ref-update',
                    configId,
                    previousConfigId: previousConfigIdRef.current,
                    initialInputValue,
                    initialValueSetRef: initialValueSetRef.current,
                    hasValueSet,
                    hasRefValue,
                    hashWasProcessed,
                    currentValue,
                    refValue,
                    baseValue,
                    reason: hashWasProcessed ? 'hash-value-already-processed-preserving' :
                        hasRefValue ? 'ref-value-already-set-preserving' :
                            'value-already-set-preserving-as-visual-record',
                    note: 'Skipping update to preserve user-entered or hash-set value as visual record',
                    timestamp: Date.now()
                });
            }
            // Update previousConfigIdRef for next comparison
            previousConfigIdRef.current = configId;
        }
    }, [sqlExprObj, initialInputValue, datasourceReady, outputDS, configId, widgetId, onHashParameterUsed, queryItemShortId, activeTab, onTabChange]);
    // Keep ref in sync with state changes (for SqlExpressionRuntime updates)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        attributeFilterSqlExprObjRef.current = attributeFilterSqlExprObj;
        // Log when state changes - this is what SqlExpressionRuntime receives via expression prop
        debugLogger.log('FORM', {
            event: 'attributeFilterSqlExprObj-state-changed',
            configId,
            stateValue: (_c = (_b = (_a = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value,
            stateValueType: typeof ((_f = (_e = (_d = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.valueOptions) === null || _f === void 0 ? void 0 : _f.value),
            isArray: Array.isArray((_j = (_h = (_g = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _g === void 0 ? void 0 : _g[0]) === null || _h === void 0 ? void 0 : _h.valueOptions) === null || _j === void 0 ? void 0 : _j.value),
            hashTriggeredRef: hashTriggeredRef.current,
            initialInputValue,
            note: 'React state changed - SqlExpressionRuntime should receive this via expression prop'
        });
    }, [attributeFilterSqlExprObj, configId, initialInputValue]);
    const applyQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'form-applyQuery-EXECUTING',
            configId,
            initialInputValue,
            hashTriggeredRef: hashTriggeredRef.current,
            runtimeZoomToSelected,
            willZoom: hashTriggeredRef.current ? true : runtimeZoomToSelected,
            currentValue: (_d = (_c = (_b = (_a = attributeFilterSqlExprObjRef.current) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.valueOptions) === null || _d === void 0 ? void 0 : _d.value,
            timestamp: Date.now()
        });
        // When the 'apply' button is clicked, it should clear the selection from the previous result list
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS);
        if (outputDS) {
            const originDs = outputDS.getOriginDataSources()[0];
            if (originDs) {
                const dataViewConfig = originDs.getDataViewConfig();
                const maximum = dataViewConfig === null || dataViewConfig === void 0 ? void 0 : dataViewConfig.maximum;
                if (maximum != null && maximum > 0) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(outputDS, outputDS.getDataSourceJson().setIn(['query', 'maximum'], maximum));
                }
            }
        }
        // Force zoom for hash-triggered queries, otherwise use runtime preference
        const zoomToUse = hashTriggeredRef.current ? true : runtimeZoomToSelected;
        // Sanitize user input before submission
        // Read from ref to get the latest value synchronously (including hash values)
        const currentSqlExprObj = attributeFilterSqlExprObjRef.current;
        const currentRefValue = (_g = (_f = (_e = currentSqlExprObj === null || currentSqlExprObj === void 0 ? void 0 : currentSqlExprObj.parts) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.valueOptions) === null || _g === void 0 ? void 0 : _g.value;
        debugLogger.log('FORM', {
            event: 'applyQuery-executing',
            configId,
            initialInputValue,
            currentRefValue,
            refHasValue: !!currentRefValue,
            hashTriggered: hashTriggeredRef.current,
            timestamp: Date.now()
        });
        const sanitizedSqlExprObj = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.sanitizeSqlExpression)(currentSqlExprObj);
        // Log the sanitized expression to see if value was preserved
        const sanitizedValue = (_k = (_j = (_h = sanitizedSqlExprObj === null || sanitizedSqlExprObj === void 0 ? void 0 : sanitizedSqlExprObj.parts) === null || _h === void 0 ? void 0 : _h[0]) === null || _j === void 0 ? void 0 : _j.valueOptions) === null || _k === void 0 ? void 0 : _k.value;
        debugLogger.log('FORM', {
            event: 'applyQuery-after-sanitize',
            configId,
            currentRefValue,
            sanitizedValue,
            valuesMatch: currentRefValue === sanitizedValue,
            sanitizedValueType: typeof sanitizedValue,
            currentRefValueType: typeof currentRefValue,
            isArrayCurrent: Array.isArray(currentRefValue),
            isArraySanitized: Array.isArray(sanitizedValue),
            timestamp: Date.now()
        });
        let rel = spatialRelationRef.current;
        if (((_l = spatialFilterObjRef.current) === null || _l === void 0 ? void 0 : _l.geometry) && rel == null) {
            rel = _config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect;
        }
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'form-about-to-call-onFormSubmit',
            configId,
            initialInputValue,
            sanitizedValue,
            hasSpatialGeometryArray: Array.isArray((_m = spatialFilterObjRef.current) === null || _m === void 0 ? void 0 : _m.geometry),
            spatialGeometryCount: Array.isArray((_o = spatialFilterObjRef.current) === null || _o === void 0 ? void 0 : _o.geometry) ? spatialFilterObjRef.current.geometry.length : 0,
            zoomToUse,
            timestamp: Date.now()
        });
        if (Array.isArray((_p = spatialFilterObjRef.current) === null || _p === void 0 ? void 0 : _p.geometry)) {
            if (spatialFilterObjRef.current.geometry.length === 1) {
                debugLogger.log('HASH-FIRST-LOAD', {
                    event: 'form-calling-onFormSubmit-single-geometry',
                    configId,
                    timestamp: Date.now()
                });
                onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry: spatialFilterObjRef.current.geometry[0], relation: rel, buffer: bufferRef.current }), zoomToUse);
            }
            else {
                debugLogger.log('HASH-FIRST-LOAD', {
                    event: 'form-calling-onFormSubmit-multiple-geometry-union',
                    configId,
                    timestamp: Date.now()
                });
                (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)([
                    'esri/geometry/operators/unionOperator'
                ]).then(modules => {
                    const operator = modules[0];
                    const geometry = operator.executeMany(spatialFilterObjRef.current.geometry);
                    onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry, relation: rel, buffer: bufferRef.current }), zoomToUse);
                });
            }
        }
        else {
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'form-calling-onFormSubmit-no-spatial-geometry',
                configId,
                timestamp: Date.now()
            });
            onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { relation: rel, buffer: bufferRef.current }), zoomToUse);
        }
        // Reset hashTriggeredRef after use
        hashTriggeredRef.current = false;
        debugLogger.log('FORM', {
            event: 'hashTriggeredRef-reset-after-apply',
            configId,
            timestamp: Date.now()
        });
    }, [onFormSubmit, outputDS, runtimeZoomToSelected]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((event) => {
        if (event.key === 'Enter' && datasourceReady && isInputValid) {
            event.preventDefault();
            // Find the active input field
            const activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT' && activeElement.type === 'text') {
                // Force blur to trigger SqlExpressionRuntime's input processing
                activeElement.blur();
                // Wait for blur processing, then click the Apply button
                // This uses the exact same code path as clicking the button manually
                setTimeout(() => {
                    if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                        applyButtonRef.current.click();
                    }
                    else {
                        applyQuery();
                    }
                }, 200);
            }
            else {
                // Not in an input field, safe to apply immediately
                if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                    applyButtonRef.current.click();
                }
                else {
                    applyQuery();
                }
            }
        }
    }, [datasourceReady, applyQuery, isInputValid]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d;
        if (!dataActionFilter)
            return;
        if (dataActionFilter.where !== (preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where)) {
            // Log state when dataActionFilter changes (query switch)
            const currentRefValue = (_d = (_c = (_b = (_a = attributeFilterSqlExprObjRef.current) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.valueOptions) === null || _d === void 0 ? void 0 : _d.value;
            const hasPendingHashValue = initialInputValue &&
                (initialValueSetRef.current !== configId ||
                    currentRefValue !== initialInputValue);
            debugLogger.log('FORM', {
                event: 'dataActionFilter-changed-auto-trigger',
                configId,
                previousWhere: preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where,
                newWhere: dataActionFilter.where,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                currentRefValue,
                hasPendingHashValue,
                willCallApplyQuery: !hasPendingHashValue,
                timestamp: Date.now()
            });
            applyQuery();
        }
    }, [dataActionFilter, preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where, applyQuery, initialInputValue, configId]);
    const resetQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        // 1. reset attribute filter
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
        setAttributeFilterSqlExprObj(sqlExprObj);
        // 2. reset spatial filter
        setResetSymbol(Symbol());
    }, [sqlExprObj]);
    const handleSqlExprObjChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlObj) => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        // LOG AT THE VERY START
        const sqlObjValue = (_c = (_b = (_a = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        const previousRefValue = (_g = (_f = (_e = (_d = attributeFilterSqlExprObjRef.current) === null || _d === void 0 ? void 0 : _d.parts) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.valueOptions) === null || _g === void 0 ? void 0 : _g.value;
        const previousStateValue = (_k = (_j = (_h = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _h === void 0 ? void 0 : _h[0]) === null || _j === void 0 ? void 0 : _j.valueOptions) === null || _k === void 0 ? void 0 : _k.value;
        // Check if this is from user typing or prop change
        const isFromUserTyping = typeof previousRefValue === 'string' &&
            typeof sqlObjValue === 'object' &&
            Array.isArray(sqlObjValue) &&
            ((_l = sqlObjValue[0]) === null || _l === void 0 ? void 0 : _l.value) === previousRefValue;
        const isFromPropChange = JSON.stringify(previousStateValue) === JSON.stringify(sqlObjValue);
        debugLogger.log('FORM', {
            event: 'handleSqlExprObjChange-called',
            configId,
            sqlObjExists: !!sqlObj,
            initialInputValue,
            hashTriggeredRef: hashTriggeredRef.current,
            sqlObjValue,
            sqlObjValueType: typeof sqlObjValue,
            sqlObjIsArray: Array.isArray(sqlObjValue),
            previousRefValue,
            previousStateValue,
            isFromUserTyping,
            isFromPropChange,
            triggerSource: isFromUserTyping ? 'user-typing' : (isFromPropChange ? 'prop-change' : 'unknown'),
            timestamp: Date.now()
        });
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'form-handleSqlExprObjChange-CALLED',
            configId,
            initialInputValue,
            hashTriggeredRef: hashTriggeredRef.current,
            datasourceReady,
            hasOutputDS: !!outputDS,
            sqlObjValue,
            sqlObjValueType: typeof sqlObjValue,
            isArray: Array.isArray(sqlObjValue),
            previousRefValue,
            previousRefValueType: typeof previousRefValue,
            valueChangedFromStringToArray: typeof previousRefValue === 'string' && Array.isArray(sqlObjValue),
            timestamp: Date.now()
        });
        const firstPart = (_m = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _m === void 0 ? void 0 : _m[0];
        const value = (firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' ? (_o = firstPart.valueOptions) === null || _o === void 0 ? void 0 : _o.value : 'not-single';
        debugLogger.log('FORM', {
            event: 'sql-expression-changed',
            configId,
            partsCount: ((_p = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _p === void 0 ? void 0 : _p.length) || 0,
            firstPartValue: value,
            hashTriggeredRefValue: hashTriggeredRef.current,
            initialInputValue: initialInputValue,
            isArrayFormat: Array.isArray(value),
            timestamp: Date.now()
        });
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlObj);
        setAttributeFilterSqlExprObj(sqlObj);
        // Check if this is a hash-triggered conversion (string -> array)
        // When hash value changes for same configId, SqlExpressionRuntime converts string to array format
        if ((firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' && ((_q = firstPart === null || firstPart === void 0 ? void 0 : firstPart.valueOptions) === null || _q === void 0 ? void 0 : _q.value)) {
            const value = firstPart.valueOptions.value;
            const isArrayFormat = Array.isArray(value);
            const hasInitialValue = initialInputValue && hashTriggeredRef.current;
            debugLogger.log('FORM', {
                event: 'sql-expression-changed-conversion-check',
                configId,
                isArrayFormat,
                hasInitialValue,
                hashTriggeredRefValue: hashTriggeredRef.current,
                initialInputValue,
                valueType: typeof value,
                value: Array.isArray(value) ? value : value,
                timestamp: Date.now()
            });
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'form-conversion-check',
                configId,
                isArrayFormat,
                hasInitialValue,
                hashTriggeredRef: hashTriggeredRef.current,
                initialInputValue,
                valueType: typeof value,
                isArray: Array.isArray(value),
                arrayLength: Array.isArray(value) ? value.length : 'n/a',
                firstItem: Array.isArray(value) && value.length > 0 ? value[0] : 'n/a',
                willCheckMatch: isArrayFormat && hasInitialValue && initialInputValue,
                timestamp: Date.now()
            });
            // If value converted to array format AND this was hash-triggered, fire event
            if (isArrayFormat && hasInitialValue && initialInputValue) {
                const matchesHashValue = value.length > 0 && ((_r = value[0]) === null || _r === void 0 ? void 0 : _r.value) === initialInputValue;
                debugLogger.log('FORM', {
                    event: 'sql-expression-changed-matches-check',
                    configId,
                    matchesHashValue,
                    initialInputValue,
                    convertedValueFirstItem: (_s = value[0]) === null || _s === void 0 ? void 0 : _s.value,
                    timestamp: Date.now()
                });
                if (matchesHashValue) {
                    debugLogger.log('FORM', {
                        event: 'hash-value-converted-to-array',
                        configId,
                        initialInputValue,
                        convertedValue: value,
                        timestamp: Date.now()
                    });
                    // Fire custom event for query execution to wait on
                    const event = new CustomEvent(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, {
                        detail: {
                            configId,
                            widgetId,
                            initialInputValue,
                            convertedValue: value
                        },
                        bubbles: true
                    });
                    document.dispatchEvent(event);
                    debugLogger.log('FORM', {
                        event: 'hash-value-converted-event-dispatched',
                        configId,
                        widgetId,
                        timestamp: Date.now()
                    });
                    // EXECUTION POINT: Query execution happens HERE after conversion is confirmed
                    // This is the ONLY place where hash-triggered queries should execute
                    // The event QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT has been dispatched above
                    // This direct call handles the case where conversion happens synchronously
                    // The event listener in query-task.tsx handles the async case
                    debugLogger.log('HASH-FIRST-LOAD', {
                        event: 'form-execution-decision-point',
                        configId,
                        initialInputValue,
                        conditionCheck: {
                            hashTriggeredRef: hashTriggeredRef.current,
                            datasourceReady,
                            hasOutputDS: !!outputDS,
                            allConditionsMet: !!(hashTriggeredRef.current && datasourceReady && outputDS)
                        },
                        willExecute: !!(hashTriggeredRef.current && datasourceReady && outputDS),
                        timestamp: Date.now()
                    });
                    if (hashTriggeredRef.current && datasourceReady && outputDS) {
                        debugLogger.log('FORM', {
                            event: 'hash-value-converted-executing-query-directly',
                            configId,
                            initialInputValue,
                            note: 'Conversion complete - executing query directly via applyQuery (event-driven pattern)',
                            timestamp: Date.now()
                        });
                        debugLogger.log('HASH-FIRST-LOAD', {
                            event: 'form-WILL-EXECUTE-applyQuery',
                            configId,
                            initialInputValue,
                            note: 'All conditions met - calling applyQuery after setTimeout(0)',
                            timestamp: Date.now()
                        });
                        // Use setTimeout to ensure this happens after the current event loop
                        setTimeout(() => {
                            debugLogger.log('HASH-FIRST-LOAD', {
                                event: 'form-applyQuery-CALLED',
                                configId,
                                initialInputValue,
                                timestamp: Date.now()
                            });
                            applyQuery();
                        }, 0);
                    }
                    else {
                        debugLogger.log('HASH-FIRST-LOAD', {
                            event: 'form-execution-SKIPPED',
                            configId,
                            initialInputValue,
                            reason: !hashTriggeredRef.current ? 'hashTriggeredRef is false' :
                                !datasourceReady ? 'datasourceReady is false' :
                                    !outputDS ? 'outputDS is null/undefined' :
                                        'unknown',
                            conditionStates: {
                                hashTriggeredRef: hashTriggeredRef.current,
                                datasourceReady,
                                hasOutputDS: !!outputDS
                            },
                            timestamp: Date.now()
                        });
                    }
                    // FIX (r018.125): Reset flag after conversion detection completes
                    // This allows the next hash change to trigger a new conversion cycle
                    hashTriggeredRef.current = false;
                    debugLogger.log('FORM', {
                        event: 'hash-triggered-ref-reset-after-conversion',
                        configId,
                        initialInputValue,
                        note: 'hashTriggeredRef reset to false after conversion detection complete',
                        timestamp: Date.now()
                    });
                }
            }
        }
    }, [configId, initialInputValue, widgetId, datasourceReady, outputDS, applyQuery]);
    const handleSpatialFilterChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((filter) => {
        spatialFilterObjRef.current = filter;
    }, []);
    const handleRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((rel) => {
        spatialRelationRef.current = rel;
    }, []);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferRef.current = { distance, unit };
    }, []);
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // Debug logging for form rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        debugLogger.log('FORM', {
            event: 'form-render-check',
            configId,
            datasourceReady,
            useAttributeFilter,
            sqlExprObj: sqlExprObj ? 'exists' : 'null',
            sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            showAttributeFilter,
            originDS: originDS ? 'exists' : 'null',
            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'none',
            showSpatialFilter,
            isAutoHeight,
            outputDS: outputDS ? 'exists' : 'null'
        });
    }, [configId, datasourceReady, useAttributeFilter, sqlExprObj, showAttributeFilter, originDS, showSpatialFilter, isAutoHeight, outputDS]);
    // Log when form content should render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (showAttributeFilter && originDS) {
            debugLogger.log('FORM', {
                event: 'attribute-filter-ready',
                configId,
                originDSId: originDS.id,
                sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
                attributeFilterLabel,
                note: 'Input field should be visible'
            });
        }
        else {
            debugLogger.log('FORM', {
                event: 'attribute-filter-not-ready',
                configId,
                showAttributeFilter,
                originDS: originDS ? 'exists' : 'null',
                useAttributeFilter,
                sqlExprObj: sqlExprObj ? 'exists' : 'null',
                reason: !showAttributeFilter ? 'showAttributeFilter is false' : 'originDS is null'
            });
        }
    }, [showAttributeFilter, originDS, configId, sqlExprObj, useAttributeFilter, attributeFilterLabel]);
    // Check DOM visibility after render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (formContentRef.current) {
            const computedStyle = window.getComputedStyle(formContentRef.current);
            const rect = formContentRef.current.getBoundingClientRect();
            debugLogger.log('FORM', {
                event: 'form-content-dom-check',
                configId,
                exists: !!formContentRef.current,
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                height: computedStyle.height,
                maxHeight: computedStyle.maxHeight,
                flex: computedStyle.flex,
                flexBasis: computedStyle.flexBasis,
                rectHeight: rect.height,
                rectWidth: rect.width,
                isVisible: rect.height > 0 && rect.width > 0,
                parentHeight: ((_a = formContentRef.current.parentElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0
            });
        }
    }, [configId, showAttributeFilter, originDS]);
    // Log when SqlExpressionRuntime key changes (component remounts) OR expression prop changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c;
        const expressionValue = (_c = (_b = (_a = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        const sqlExprRuntimeKey = `${configId}-${expressionValue || 'empty'}`;
        debugLogger.log('FORM', {
            event: 'SqlExpressionRuntime-props-changed',
            configId,
            initialInputValue,
            sqlExprRuntimeKey,
            expressionValue,
            expressionValueType: typeof expressionValue,
            isArray: Array.isArray(expressionValue),
            hashTriggeredRef: hashTriggeredRef.current,
            originDSExists: !!originDS,
            note: 'FIX (r018.123): Key uses configId + expressionValue to remount when value changes, not when initialInputValue clears',
            timestamp: Date.now()
        });
    }, [configId, initialInputValue, attributeFilterSqlExprObj, originDS]);
    // ============================================================================
    // DOM MANIPULATION FOR SqlExpressionRuntime (r018.122-128)
    // ============================================================================
    // 
    //  CRITICAL: DO NOT REMOVE THIS WORKAROUND 
    // 
    // WHY THIS IS NECESSARY:
    // 
    // SqlExpressionRuntime is a "black-box" ExB component that does NOT support
    // programmatic value population via its `expression` prop. This was discovered
    // through extensive testing (r018.108-128):
    // 
    // 1. Setting `expression` prop  Component does NOT populate its text field
    // 2. Changing `expression` prop  Component does NOT fire onChange event
    // 3. Using `key` prop to remount  Component still doesn't populate field
    // 
    // The component ONLY responds to actual DOM user interactions (focus, input, blur).
    // 
    // WHAT WE NEED TO ACHIEVE:
    // 
    // When a hash parameter arrives (e.g., #pin=2223059013), we need to:
    // 1. Populate the SqlExpressionRuntime text field with "2223059013"
    // 2. Trigger SqlExpressionRuntime's onChange handler
    // 3. Allow it to convert string  array format internally
    // 4. Execute the query with the correctly formatted value
    // 
    // THE SOLUTION:
    // 
    // Simulate user interaction by directly manipulating the DOM input field:
    // 
    // 1. MutationObserver watches for input[type="text"] to appear in DOM
    // 2. Double requestAnimationFrame ensures React has attached event handlers
    // 3. focus()  set value  dispatch events  blur()
    // 4. SqlExpressionRuntime.onChange fires naturally
    // 5. Internal stringarray conversion happens
    // 6. Query executes with correct array format
    // 
    // ALTERNATIVES ATTEMPTED (ALL FAILED):
    // 
    // -  Direct applyQuery() call  Wrong format (string instead of array)
    // -  Updating expression prop  Component ignores it
    // -  Key-based remount  Component doesn't populate from prop
    // -  Calling onChange manually  No access to internal state
    // 
    // TIMING REQUIREMENTS:
    // 
    // - MutationObserver: Event-driven detection when input appears
    // - Double RAF: Ensures React commit phase completes (handlers attached)
    // - focus/blur cycle: Triggers SqlExpressionRuntime's internal logic
    // 
    // MAINTENANCE NOTES:
    // 
    // - This workaround is REQUIRED for hash parameter execution
    // - If Esri updates SqlExpressionRuntime to support programmatic population, 
    //   this can be removed
    // - Tested extensively in r018.108-128 (see CURRENT_WORK.md)
    // - Debug switch: FORM (query-task-form events)
    // 
    // See: SQLEXPRESSION_RUNTIME_DOM_WORKAROUND.md for full details
    // 
    // ============================================================================
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!sqlExprRuntimeContainerRef.current || !originDS)
            return;
        // FIX (r018.124): Simplify - use initialInputValue (the hash parameter) directly
        // The old working code checked against initialInputValue, not expressionValue
        // This useEffect now depends on initialInputValue, so it re-runs for each hash change
        if (initialInputValue && hashTriggeredRef.current) {
            const container = sqlExprRuntimeContainerRef.current;
            debugLogger.log('FORM', {
                event: 'hash-dom-population-attempt',
                configId,
                initialInputValue,
                hasContainer: !!container,
                hashTriggeredRef: hashTriggeredRef.current,
                timestamp: Date.now()
            });
            // Function to populate the input field when found
            const populateInputField = (inputField) => {
                const currentValue = inputField.value;
                // FIX (r018.124): Use old working logic - update if empty OR different from initialInputValue
                const shouldUpdate = !currentValue ||
                    currentValue.trim() === '' ||
                    currentValue !== initialInputValue;
                debugLogger.log('FORM', {
                    event: 'hash-dom-input-found',
                    configId,
                    currentValue,
                    targetValue: initialInputValue,
                    shouldUpdate,
                    hashTriggeredRef: hashTriggeredRef.current,
                    inputType: inputField.type,
                    timestamp: Date.now()
                });
                if (shouldUpdate) {
                    // FIX (r018.125): Use double RAF to ensure SqlExpressionRuntime is fully initialized
                    // When MutationObserver finds the input, React may not have finished attaching event handlers
                    // Double RAF waits for browser paint + React commit phase to complete (event-driven, no setTimeout)
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            var _a;
                            debugLogger.log('FORM', {
                                event: 'hash-dom-starting-manipulation-after-raf',
                                configId,
                                value: initialInputValue,
                                note: 'Double RAF complete - SqlExpressionRuntime should be fully initialized',
                                timestamp: Date.now()
                            });
                            // Focus the input first (critical for React synthetic events)
                            inputField.focus();
                            debugLogger.log('FORM', {
                                event: 'hash-dom-input-focused',
                                configId,
                                value: initialInputValue,
                                isFocused: document.activeElement === inputField,
                                timestamp: Date.now()
                            });
                            // Set the value
                            inputField.value = String(initialInputValue);
                            debugLogger.log('FORM', {
                                event: 'hash-dom-value-set',
                                configId,
                                value: initialInputValue,
                                inputFieldValueAfter: inputField.value,
                                timestamp: Date.now()
                            });
                            // Dispatch input event with proper properties
                            const inputEvent = new Event('input', { bubbles: true, cancelable: true });
                            Object.defineProperty(inputEvent, 'target', { value: inputField, enumerable: true });
                            inputField.dispatchEvent(inputEvent);
                            // Dispatch change event
                            const changeEvent = new Event('change', { bubbles: true, cancelable: true });
                            Object.defineProperty(changeEvent, 'target', { value: inputField, enumerable: true });
                            inputField.dispatchEvent(changeEvent);
                            // Also use React's native value setter approach
                            const nativeInputValueSetter = (_a = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value')) === null || _a === void 0 ? void 0 : _a.set;
                            if (nativeInputValueSetter) {
                                nativeInputValueSetter.call(inputField, String(initialInputValue));
                                const reactEvent = new Event('input', { bubbles: true });
                                inputField.dispatchEvent(reactEvent);
                            }
                            debugLogger.log('FORM', {
                                event: 'hash-dom-events-dispatched',
                                configId,
                                value: initialInputValue,
                                inputEventDispatched: true,
                                changeEventDispatched: true,
                                reactEventDispatched: !!nativeInputValueSetter,
                                timestamp: Date.now()
                            });
                            // Blur to trigger any validation or state updates (critical for SqlExpressionRuntime.onChange)
                            inputField.blur();
                            debugLogger.log('FORM', {
                                event: 'hash-dom-value-populated',
                                configId,
                                value: initialInputValue,
                                note: 'DOM manipulation complete - SqlExpressionRuntime.onChange should fire and detect conversion',
                                timestamp: Date.now()
                            });
                            // FIX (r018.125): Don't reset flag here - blur() is async and triggers onChange
                            // The flag will be reset in handleSqlExprObjChange after conversion is detected
                            // Resetting it here causes onChange to see false and skip the conversion event
                        });
                    });
                }
            };
            // Try to find input field immediately (it might already exist)
            // SqlExpressionRuntime uses input[type="text"], not textarea
            const inputField = container.querySelector('input[type="text"]');
            if (inputField) {
                // Found it immediately - populate it
                debugLogger.log('FORM', {
                    event: 'hash-dom-input-found-immediately',
                    configId,
                    timestamp: Date.now()
                });
                populateInputField(inputField);
            }
            else {
                // Not found yet - use MutationObserver to watch for it (event-driven, no timers)
                debugLogger.log('FORM', {
                    event: 'hash-dom-input-not-found-watching',
                    configId,
                    note: 'Setting up MutationObserver to watch for input[type="text"] appearance',
                    timestamp: Date.now()
                });
                const observer = new MutationObserver(() => {
                    const inputField = container.querySelector('input[type="text"]');
                    if (inputField) {
                        debugLogger.log('FORM', {
                            event: 'hash-dom-input-appeared',
                            configId,
                            note: 'MutationObserver detected input[type="text"] in DOM',
                            timestamp: Date.now()
                        });
                        populateInputField(inputField);
                        observer.disconnect(); // Stop watching once we've found and populated it
                        debugLogger.log('FORM', {
                            event: 'hash-dom-observer-disconnected',
                            configId,
                            timestamp: Date.now()
                        });
                    }
                });
                // Watch for any child elements being added to the container
                observer.observe(container, {
                    childList: true, // Watch for children being added/removed
                    subtree: true // Watch the entire subtree
                });
                debugLogger.log('FORM', {
                    event: 'hash-dom-observer-started',
                    configId,
                    timestamp: Date.now()
                });
                // Cleanup: stop watching when component unmounts or dependencies change
                return () => {
                    observer.disconnect();
                    debugLogger.log('FORM', {
                        event: 'hash-dom-observer-cleanup',
                        configId,
                        timestamp: Date.now()
                    });
                };
            }
        }
    }, [attributeFilterSqlExprObj, originDS, configId, initialInputValue]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_context__WEBPACK_IMPORTED_MODULE_12__.QueryTaskContext.Provider, { value: { resetSymbol }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form', css: getFormStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: formContentRef, className: 'query-form__content', onKeyDown: handleKeyDown, children: [showAttributeFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding-top: 2px;`, "aria-label": attributeFilterLabel, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title d-flex align-items-center', { 'd-none': !attributeFilterLabel && !attributeFilterDesc }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-top: 0;
                margin-bottom: 4px;
              `, children: [attributeFilterLabel && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: attributeFilterLabel }), attributeFilterDesc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: attributeFilterDesc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), originDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: sqlExprRuntimeContainerRef, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin: -10px 0px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: originDS, expression: attributeFilterSqlExprObj, onChange: handleSqlExprObjChange }, `${configId}-${((_d = (_c = (_b = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.valueOptions) === null || _d === void 0 ? void 0 : _d.value) || 'empty'}`) }))] })), showAttributeFilter && showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr", { className: 'm-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `border: none; height: 1px; background-color: var(--sys-color-divider-secondary);` })), showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__.QueryTaskSpatialForm, { widgetId: widgetId, label: spatialFilterLabel, desc: spatialFilterDesc, filterTypes: spatialFilterTypes, mapWidgetIds: spatialMapWidgetIds, createToolTypes: spatialInteractiveCreateToolTypes, onFilterChange: handleSpatialFilterChange, onRelationChange: handleRelationChange, onBufferChange: handleBufferChange, spatialRelations: spatialRelations, dsEnableBuffer: spatialRelationEnableBuffer, dsBufferDistance: spatialRelationBufferDistance, dsBufferUnit: spatialRelationBufferUnit, drawEnableBuffer: spatialInteractiveEnableBuffer, drawBufferDistance: spatialInteractiveBufferDistance, drawBufferUnit: spatialInteractiveBufferUnit, useDataSources: spatialRelationUseDataSources, useRuntimeData: spatialIncludeRuntimeData }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form__actions px-4 d-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: runtimeZoomToSelected, onChange: (_, checked) => setRuntimeZoomToSelected(checked), className: 'mr-2' }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-auto', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `font-size: 0.875rem; color: var(--sys-color-text-primary);`, children: getI18nMessage('zoomToSelected') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: applyButtonRef, color: 'primary', className: 'ml-auto', disabled: !datasourceReady || !isInputValid, onClick: applyQuery, children: getI18nMessage('apply') }), (showClauseNumber.current > 0 || showSpatialFilter) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-2', onClick: resetQuery, children: getI18nMessage('reset') }))] })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskLabel: () => (/* binding */ QueryTaskLabel)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

/** @jsx jsx */


const textStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  font-weight: 500;
  font-size: 0.875rem;
`;
function QueryTaskLabel(props) {
    const { icon, name } = props;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center text-truncate', css: textStyle, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { className: 'query-task-icon mr-2', icon: icon.svg }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', title: name, children: name })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListInline: () => (/* binding */ TaskListInline)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");

/** @jsx jsx */






const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
const SPACE = 8;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  > div {
    margin-right: 8px;
  }
`;
// show task label and an arrow to the task content
function TaskListInline(props) {
    const { queryItems, widgetId, minSize, defaultSize, defaultPageSize, widgetLabel, wrap = false } = props;
    const containerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const containerWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const contentWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef({});
    const [numOfExpanded, setNumOfExpanded] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(queryItems.length);
    const [openedPopper, setOpenedPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(-1);
    const resizeObserverRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const adjustContent = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        let total = 0;
        for (let i = 0; i < numOfExpanded; i++) {
            const item = queryItems[i];
            const itemWidth = contentWidthRef.current[item.configId];
            if (itemWidth > 0) {
                total += itemWidth + SPACE;
                if (total >= containerWidthRef.current && numOfExpanded !== i) {
                    setNumOfExpanded(i);
                    return;
                }
            }
            else {
                return; // content width not ready
            }
        }
        setNumOfExpanded(queryItems.length);
    }, [numOfExpanded, queryItems]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (resizeObserverRef.current) {
            resizeObserverRef.current.disconnect();
        }
        // bind with the new event handler
        resizeObserverRef.current = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
            const width = Math.round(entries[0].contentRect.width);
            if (containerWidthRef.current !== width) {
                containerWidthRef.current = width;
                adjustContent();
            }
        }, 200));
        resizeObserverRef.current.observe(containerRef.current);
        return () => {
            resizeObserverRef.current.disconnect();
        };
    }, [adjustContent]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        var _a;
        containerWidthRef.current = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth;
        adjustContent();
    });
    const handleItemWidthChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, width) => {
        const queryItem = queryItems[index];
        if (contentWidthRef.current[queryItem.configId] !== width) {
            contentWidthRef.current[queryItem.configId] = width;
            adjustContent();
        }
    }, [queryItems, adjustContent]);
    const handlePopperOpenedChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, isOpen) => {
        if (isOpen) {
            setOpenedPopper(index);
        }
        else if (index === openedPopper) {
            // current popper is closed
            setOpenedPopper(-1);
        }
    }, [openedPopper]);
    const [expandedArray, nonExpandedArray] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const expandedArray = [];
        const nonExpandedArray = [];
        for (let i = 0; i < queryItems.length; i++) {
            if (i < numOfExpanded) {
                expandedArray.push(queryItems[i]);
            }
            else {
                nonExpandedArray.push(queryItems[i]);
            }
        }
        return [expandedArray, nonExpandedArray];
    }, [queryItems, numOfExpanded]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: containerRef, css: style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('runtime-query__query-list h-100 d-flex', { 'flex-wrap': wrap, 'align-content-start': wrap }), children: [expandedArray.map((queryItem, index) => {
                var _a;
                const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
                return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: index, icon: currentItem.icon, buttonType: 'default', label: currentItem.displayLabel ? currentItem.name : undefined, popperTitle: currentItem.name, onWidthChange: handleItemWidthChange, minSize: minSize, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== index, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: index, total: 1, isInPopper: true, queryItem: currentItem, wrappedInPopper: true, className: 'pb-4', defaultPageSize: defaultPageSize, initialInputValue: currentItem.shortId === ((_a = props.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) ? props.initialQueryValue.value : undefined, onHashParameterUsed: props.onHashParameterUsed, queryItemShortId: currentItem.shortId }) }, currentItem.configId);
            }), nonExpandedArray.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: expandedArray.length + 1, icon: iconMap.iconMore, minSize: minSize, buttonType: 'default', popperTitle: widgetLabel, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== expandedArray.length + 1, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_3__.QueryTaskList, { widgetId: widgetId, isInPopper: true, defaultPageSize: defaultPageSize, queryItems: nonExpandedArray, className: 'pb-4', initialQueryValue: props.initialQueryValue, onHashParameterUsed: props.onHashParameterUsed }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListPopperWrapper: () => (/* binding */ TaskListPopperWrapper)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */



const shiftOptions = { padding: 1 };
function TaskListPopperWrapper(props) {
    const { id, icon, label, forceClose, onOpenedChange, popperTitle, minSize, defaultSize, onWidthChange, buttonType = 'tertiary', children } = props;
    const iconRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const widthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const [isOpen, setIsOpen] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const [popperVersion, setPopperVersion] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const isMobile = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useCheckSmallBrowserSizeMode();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (forceClose) {
            setIsOpen(false);
        }
    }, [forceClose]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (typeof onWidthChange === 'function') {
            widthRef.current = Math.round(iconRef.current.clientWidth);
            onWidthChange(id, widthRef.current);
            const resizeObserver = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
                const width = Math.round(entries[0].contentRect.width);
                if (widthRef.current !== width) {
                    widthRef.current = width;
                    onWidthChange(id, width);
                }
            }, 200));
            resizeObserver.observe(iconRef.current);
            return () => {
                resizeObserver.disconnect();
            };
        }
    });
    const togglePopper = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        if (typeof onOpenedChange === 'function') {
            onOpenedChange(id, !isOpen);
        }
        setIsOpen(!isOpen);
        setPopperVersion(popperVersion + 1);
        if (isOpen) {
            setTimeout(() => {
                if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.isKeyboardMode)()) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(iconRef.current);
                }
            }, 200);
        }
    }, [id, isOpen, popperVersion, onOpenedChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'runtime-query__widget-popper', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { title: label, "aria-label": label, icon: true, size: 'sm', variant: buttonType === 'tertiary' ? 'text' : undefined, color: buttonType === 'tertiary' ? 'inherit' : undefined, type: buttonType === 'tertiary' ? undefined : buttonType, ref: iconRef, onClick: togglePopper, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, Object.assign({ size: 16 }, (typeof icon === 'string' ? { icon } : { icon: icon.svg, color: buttonType === 'tertiary' ? undefined : icon.properties.color }))), label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
            line-height: 1.2;
          `, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ 'ml-2': icon != null }), children: label })] }), isMobile
                ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.MobilePanel, { open: isOpen, title: popperTitle, onClose: togglePopper, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })
                : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FloatingPanel, { className: 'ui-unit-popper ui-unit-popper_k-arrangement-icon flex-grow-1', headerClassName: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS, open: isOpen, onHeaderClose: togglePopper, toggle: togglePopper, headerTitle: popperTitle, minSize: minSize, defaultSize: defaultSize, dragBounds: 'body', version: popperVersion, reference: iconRef, placement: 'bottom-start', shiftOptions: shiftOptions, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskList: () => (/* binding */ QueryTaskList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */





const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__.createQuerySimpleDebugLogger)();
// Helper function to sort queries by display order (lower numbers appear first)
// Queries without order maintain their original relative positions
function sortQueryItemsByOrder(queryItems) {
    // Handle null/undefined/empty cases
    if (!queryItems || queryItems.length === 0) {
        return queryItems || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
    }
    // Safely convert to regular array for sorting
    // Handle both ImmutableArray (has toArray method) and regular arrays
    const itemsArray = (queryItems && typeof queryItems.toArray === 'function')
        ? queryItems.toArray()
        : (Array.isArray(queryItems) ? queryItems : []);
    const itemsWithIndex = itemsArray.map((item, index) => ({ item, originalIndex: index }));
    itemsWithIndex.sort((a, b) => {
        var _a, _b;
        const orderA = (_a = a.item.order) !== null && _a !== void 0 ? _a : Infinity;
        const orderB = (_b = b.item.order) !== null && _b !== void 0 ? _b : Infinity;
        if (orderA !== orderB) {
            return orderA - orderB;
        }
        // If order is equal (both Infinity or same number), maintain original index order
        return a.originalIndex - b.originalIndex;
    });
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(itemsWithIndex.map(({ item }) => item));
}
// Helper function to group queries by groupId
const groupQueries = (queryItems) => {
    const groups = {};
    const ungrouped = [];
    const groupOrder = [];
    const groupIndexMap = {};
    // First pass: collect items in regular arrays
    const groupItemsMap = {};
    queryItems.forEach((item, index) => {
        if (item.groupId) {
            if (!groupItemsMap[item.groupId]) {
                groupItemsMap[item.groupId] = [];
                groups[item.groupId] = {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]),
                    displayName: item.groupDisplayName || item.name || `Group ${item.groupId}`,
                    icon: item.icon
                };
                groupIndexMap[item.groupId] = index;
                groupOrder.push(item.groupId);
            }
            groupItemsMap[item.groupId].push(item);
        }
        else {
            ungrouped.push({ item, index });
        }
    });
    // Second pass: convert regular arrays to ImmutableArrays
    Object.keys(groupItemsMap).forEach(groupId => {
        groups[groupId].items = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(groupItemsMap[groupId]);
    });
    return { groups, ungrouped, groupOrder };
};
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
function QueryTaskList(props) {
    const { queryItems, widgetId, defaultPageSize, isInPopper = false, className = '', initialQueryValue, shouldUseInitialQueryValueForSelection = false, onHashParameterUsed, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab, onTabChange, eventManager } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // Log when props are received
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-props-received',
            widgetId,
            props: {
                hasInitialQueryValue: !!initialQueryValue,
                initialQueryValueShortId: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId,
                initialQueryValueValue: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value,
                shouldUseInitialQueryValueForSelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'query-task-list-props-received',
            widgetId,
            hasInitialQueryValue: !!initialQueryValue,
            initialQueryValueShortId: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId,
            initialQueryValueValue: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value,
            shouldUseInitialQueryValueForSelection,
            timestamp: Date.now()
        });
    }, [initialQueryValue, shouldUseInitialQueryValueForSelection, widgetId]);
    // Sort queries by display order before grouping
    // Handle case where queryItems might be undefined/null or not an ImmutableArray
    const sortedQueryItems = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (!queryItems) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
        }
        return sortQueryItemsByOrder(queryItems);
    }, [queryItems]);
    const { groups, ungrouped, groupOrder } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => groupQueries(sortedQueryItems), [sortedQueryItems]);
    // Only use the prop initialQueryValue when HelperSimple explicitly opens the widget
    // QuerySimple should not autonomously react to initialQueryValue prop changes
    // HelperSimple is the orchestrator and sets shouldUseInitialQueryValueForSelection flag
    const effectiveInitialQueryValue = shouldUseInitialQueryValueForSelection ? initialQueryValue : undefined;
    // Log when effectiveInitialQueryValue is calculated
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-effectiveinitialqueryvalue-calculated',
            widgetId,
            calculation: {
                shouldUseInitialQueryValueForSelection,
                hasInitialQueryValue: !!initialQueryValue,
                effectiveResult: effectiveInitialQueryValue ? 'USE_INITIAL_QUERY_VALUE' : 'UNDEFINED',
                effectiveShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
                effectiveValue: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'effectiveInitialQueryValue-calculated',
            widgetId,
            shouldUseInitialQueryValueForSelection,
            hasInitialQueryValue: !!initialQueryValue,
            hasEffectiveInitialQueryValue: !!effectiveInitialQueryValue,
            effectiveShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
            effectiveValue: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value,
            timestamp: Date.now()
        });
    }, [effectiveInitialQueryValue, shouldUseInitialQueryValueForSelection, initialQueryValue, widgetId]);
    // Find the query item matching the shortId from URL hash
    const matchingQueryIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const shortId = effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId;
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'matchingQueryIndex-calculation-start',
            widgetId,
            hasEffectiveInitialQueryValue: !!effectiveInitialQueryValue,
            shortIdToMatch: shortId,
            sortedQueryItemsCount: (sortedQueryItems === null || sortedQueryItems === void 0 ? void 0 : sortedQueryItems.length) || 0,
            sortedQueryItemsShortIds: sortedQueryItems ? [...sortedQueryItems.map(item => item.shortId)] : [],
            timestamp: Date.now()
        });
        if (!shortId) {
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'matchingQueryIndex-no-shortid',
                widgetId,
                result: -1,
                reason: 'No shortId in effectiveInitialQueryValue',
                timestamp: Date.now()
            });
            return -1;
        }
        const foundIndex = sortedQueryItems.findIndex(item => item.shortId === shortId);
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'matchingQueryIndex-calculation-complete',
            widgetId,
            shortIdToMatch: shortId,
            foundIndex,
            matchFound: foundIndex >= 0,
            matchedItem: foundIndex >= 0 ? {
                configId: sortedQueryItems[foundIndex].configId,
                shortId: sortedQueryItems[foundIndex].shortId,
                label: sortedQueryItems[foundIndex].label
            } : null,
            timestamp: Date.now()
        });
        return foundIndex;
    }, [sortedQueryItems, effectiveInitialQueryValue, widgetId]);
    // Determine which group/ungrouped index the matching query is at
    const getQuerySelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'getQuerySelection-calculation-start',
            widgetId,
            matchingQueryIndex,
            hasMatch: matchingQueryIndex >= 0,
            timestamp: Date.now()
        });
        if (matchingQueryIndex < 0) {
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'getQuerySelection-no-match',
                widgetId,
                result: null,
                reason: 'matchingQueryIndex is negative',
                timestamp: Date.now()
            });
            return null;
        }
        const item = sortedQueryItems[matchingQueryIndex];
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'getQuerySelection-matched-item',
            widgetId,
            matchedItem: {
                configId: item.configId,
                shortId: item.shortId,
                label: item.label,
                groupId: item.groupId,
                hasGroup: !!item.groupId
            },
            timestamp: Date.now()
        });
        if (item.groupId) {
            const groupItems = ((_a = groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.items) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
            const indexInGroup = groupItems.findIndex(q => q.configId === item.configId);
            const result = { type: 'group', groupId: item.groupId, index: indexInGroup >= 0 ? indexInGroup : 0 };
            debugLogger.log('GROUP', {
                event: 'hash-query-found-in-group',
                groupId: item.groupId,
                indexInGroup: indexInGroup >= 0 ? indexInGroup : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'getQuerySelection-returning-group',
                widgetId,
                result,
                timestamp: Date.now()
            });
            return result;
        }
        else {
            // Ungrouped query
            const indexInUngrouped = ungrouped.findIndex(({ item: q }) => q.configId === item.configId);
            const result = { type: 'ungrouped', index: indexInUngrouped >= 0 ? indexInUngrouped : 0 };
            debugLogger.log('GROUP', {
                event: 'hash-query-found-ungrouped',
                indexInUngrouped: indexInUngrouped >= 0 ? indexInUngrouped : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'getQuerySelection-returning-ungrouped',
                widgetId,
                result,
                timestamp: Date.now()
            });
            return result;
        }
    }, [matchingQueryIndex, sortedQueryItems, groups, ungrouped, widgetId]);
    // Helper to determine default selection based on display order
    const getDefaultSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        if (getQuerySelection) {
            return getQuerySelection;
        }
        // No hash parameter - determine default based on display order
        // Compare first ungrouped query vs first query in first group
        const firstUngroupedOrder = ungrouped.length > 0 ? ((_a = ungrouped[0].item.order) !== null && _a !== void 0 ? _a : Infinity) : Infinity;
        const firstGroupOrder = groupOrder.length > 0 && ((_c = (_b = groups[groupOrder[0]]) === null || _b === void 0 ? void 0 : _b.items) === null || _c === void 0 ? void 0 : _c.length) > 0
            ? ((_d = groups[groupOrder[0]].items[0].order) !== null && _d !== void 0 ? _d : Infinity)
            : Infinity;
        // Select whichever has lower order (or first if equal)
        if (firstUngroupedOrder < firstGroupOrder) {
            return { type: 'ungrouped', index: 0 };
        }
        else if (firstGroupOrder < Infinity || groupOrder.length > 0) {
            return { type: 'group', groupId: groupOrder[0], index: 0 };
        }
        else if (ungrouped.length > 0) {
            return { type: 'ungrouped', index: 0 };
        }
        return null;
    }, [getQuerySelection, ungrouped, groups, groupOrder]);
    // Track selected query - initialize with matching query if found from URL hash, or default based on display order
    const [selectedGroupId, setSelectedGroupId] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection',
                groupId: getDefaultSelection.groupId,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.groupId;
        }
        return null;
    });
    const [selectedGroupQueryIndex, setSelectedGroupQueryIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-query-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    const [selectedUngroupedIndex, setSelectedUngroupedIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'ungrouped') {
            debugLogger.log('GROUP', {
                event: 'initial-ungrouped-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    // Update selection when HelperSimple explicitly opens widget with hash parameter
    // Only react when shouldUseInitialQueryValueForSelection is true (set by HelperSimple)
    // This prevents autonomous query selection when switching queries
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-FIRST-LOAD', {
            event: 'EXECUTION-USEEFFECT-TRIGGERED',
            widgetId,
            criticalConditions: {
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                getQuerySelectionValue: getQuerySelection,
                hasEffectiveInitialQueryValue: !!effectiveInitialQueryValue,
                effectiveInitialQueryValue,
                matchingQueryIndex,
                conditionsMet: shouldUseInitialQueryValueForSelection && !!getQuerySelection,
                WILL_EXECUTE_QUERY: shouldUseInitialQueryValueForSelection && !!getQuerySelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-selection-useeffect-check',
            widgetId,
            check: {
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                getQuerySelectionType: getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type,
                willUpdateSelection: shouldUseInitialQueryValueForSelection && !!getQuerySelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'query-selection-useeffect-check',
            widgetId,
            shouldUseInitialQueryValueForSelection,
            hasGetQuerySelection: !!getQuerySelection,
            getQuerySelectionType: getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type,
            willUpdateSelection: shouldUseInitialQueryValueForSelection && !!getQuerySelection,
            timestamp: Date.now()
        });
        if (shouldUseInitialQueryValueForSelection && getQuerySelection) {
            // Hash parameter matched - HelperSimple explicitly opened us with this hash
            debugLogger.log('HASH-EXEC', {
                event: 'querytasklist-selection-useeffect-updating',
                widgetId,
                selectionType: getQuerySelection.type,
                selectionDetails: getQuerySelection.type === 'group'
                    ? { groupId: getQuerySelection.groupId, index: getQuerySelection.index }
                    : { index: getQuerySelection.index },
                timestamp: Date.now()
            });
            if (getQuerySelection.type === 'group') {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-group-from-hash',
                    groupId: getQuerySelection.groupId,
                    index: getQuerySelection.index,
                    note: 'HelperSimple explicitly opened widget with hash parameter'
                });
                setSelectedGroupId(getQuerySelection.groupId);
                setSelectedGroupQueryIndex(getQuerySelection.index);
            }
            else {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-ungrouped-from-hash',
                    index: getQuerySelection.index,
                    note: 'HelperSimple explicitly opened widget with hash parameter'
                });
                setSelectedGroupId(null);
                setSelectedUngroupedIndex(getQuerySelection.index);
            }
        }
        else {
            debugLogger.log('HASH-FIRST-LOAD', {
                event: 'EXECUTION-SKIPPED',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'FLAG_IS_FALSE' : 'NO_QUERY_SELECTION',
                detailedDiagnostic: {
                    shouldUseInitialQueryValueForSelection,
                    hasGetQuerySelection: !!getQuerySelection,
                    getQuerySelectionValue: getQuerySelection,
                    hasEffectiveInitialQueryValue: !!effectiveInitialQueryValue,
                    effectiveInitialQueryValue,
                    matchingQueryIndex,
                    sortedQueryItemsCount: (sortedQueryItems === null || sortedQueryItems === void 0 ? void 0 : sortedQueryItems.length) || 0,
                    possibleCauses: !shouldUseInitialQueryValueForSelection
                        ? ['HelperSimple did not set the flag', 'Widget opened without hash parameter']
                        : ['matchingQueryIndex returned -1', 'shortId did not match any query', 'queryItems not loaded yet']
                },
                timestamp: Date.now()
            });
            debugLogger.log('HASH-EXEC', {
                event: 'querytasklist-selection-useeffect-skipped',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'flag-is-false' : 'no-query-selection',
                check: {
                    shouldUseInitialQueryValueForSelection,
                    hasGetQuerySelection: !!getQuerySelection
                },
                timestamp: Date.now()
            });
            debugLogger.log('GROUP', {
                event: 'query-selection-useeffect-skipped',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'flag-is-false' : 'no-query-selection',
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                timestamp: Date.now()
            });
        }
    }, [shouldUseInitialQueryValueForSelection, getQuerySelection, widgetId, effectiveInitialQueryValue, matchingQueryIndex, sortedQueryItems]);
    // Get the currently selected query item
    const getSelectedQueryItem = () => {
        // PRIORITY 1: Use current state selection
        // The state is initialized with the hash match (if present) or default order,
        // and updated via useEffect if the hash changes later.
        debugLogger.log('GROUP', {
            event: 'getSelectedQueryItem-state-selection',
            selectedGroupId,
            hasSelectedGroup: selectedGroupId && groups[selectedGroupId],
            selectedGroupQueryIndex,
            selectedUngroupedIndex,
            ungroupedLength: ungrouped.length,
            groupOrderLength: groupOrder.length,
            note: 'Using state selection (hash-aware)'
        });
        // If a group is selected, get query from that group
        if (selectedGroupId && groups[selectedGroupId]) {
            const groupItems = groups[selectedGroupId].items;
            if (groupItems.length > 0) {
                const idx = selectedGroupQueryIndex < groupItems.length ? selectedGroupQueryIndex : 0;
                const selectedItem = groupItems[idx];
                debugLogger.log('GROUP', {
                    event: 'selected-query-from-group',
                    groupId: selectedGroupId,
                    groupQueryIndex: idx,
                    queryItemConfigId: selectedItem.configId,
                    queryDisplayName: getQueryDisplayName(selectedItem)
                });
                return selectedItem;
            }
        }
        // Otherwise, get from ungrouped queries
        if (ungrouped.length > 0) {
            const idx = selectedUngroupedIndex < ungrouped.length ? selectedUngroupedIndex : 0;
            const selectedItem = ungrouped[idx].item;
            debugLogger.log('GROUP', {
                event: 'selected-query-from-ungrouped',
                ungroupedIndex: idx,
                queryItemConfigId: selectedItem.configId,
                queryDisplayName: getQueryDisplayName(selectedItem)
            });
            return selectedItem;
        }
        // Fallback to first query item
        debugLogger.log('GROUP', {
            event: 'selected-query-fallback',
            note: 'No groups or ungrouped queries, using first item'
        });
        return sortedQueryItems[0];
    };
    const selectedQueryItem = getSelectedQueryItem();
    const selectedQueryRealIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return sortedQueryItems.findIndex(q => q.configId === selectedQueryItem.configId);
    }, [sortedQueryItems, selectedQueryItem]);
    // If only one query total, don't show dropdown
    const showDropdown = sortedQueryItems.length > 1 || groupOrder.length > 0;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `runtime-query__query-list h-100 ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      display: flex;
      flex-direction: column;
      .query-selector {
        padding: 16px;
        border-bottom: 1px solid var(--sys-color-divider-secondary);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .query-selector-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--sys-color-text-primary);
        margin-bottom: 4px;
      }
      .query-selector select {
        width: 100%;
      }
      .query-task-container {
        flex: 1;
        overflow: auto;
      }
    `, children: selectedQueryItem && (() => {
            const willPassInitialInputValue = selectedQueryItem.shortId === (effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId);
            const initialInputValueToPass = willPassInitialInputValue ? effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value : undefined;
            debugLogger.log('GROUP', {
                event: 'initialInputValue-being-passed-to-querytask',
                widgetId,
                selectedQueryItemShortId: selectedQueryItem.shortId,
                selectedQueryItemConfigId: selectedQueryItem.configId,
                effectiveInitialQueryValueShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
                willPassInitialInputValue,
                initialInputValue: initialInputValueToPass,
                timestamp: Date.now()
            });
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `query-task-container ${isInPopper ? jimu_ui__WEBPACK_IMPORTED_MODULE_3__.FOCUSABLE_CONTAINER_CLASS : ''}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: selectedQueryRealIndex >= 0 ? selectedQueryRealIndex : 0, total: sortedQueryItems.length, queryItem: selectedQueryItem, isInPopper: isInPopper, initialInputValue: initialInputValueToPass, onHashParameterUsed: onHashParameterUsed, queryItems: sortedQueryItems, selectedQueryIndex: selectedUngroupedIndex, onQueryChange: (index) => setSelectedUngroupedIndex(index), 
                    // Grouping props
                    groups: groups, ungrouped: ungrouped, 
                    // Graphics layer props
                    useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, onInitializeGraphicsLayer: onInitializeGraphicsLayer, onClearGraphicsLayer: onClearGraphicsLayer, groupOrder: groupOrder, selectedGroupId: selectedGroupId, selectedGroupQueryIndex: selectedGroupQueryIndex, onGroupChange: (groupId) => setSelectedGroupId(groupId), onGroupQueryChange: (index) => setSelectedGroupQueryIndex(index), onUngroupedChange: (index) => setSelectedUngroupedIndex(index), resultsMode: resultsMode, onResultsModeChange: onResultsModeChange, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, activeTab: activeTab, onTabChange: onTabChange, eventManager: eventManager }) }));
        })() }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskSpatialForm: () => (/* binding */ QueryTaskSpatialForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-from-ds */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx");
/* harmony import */ var _geometry_from_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry-from-map */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx");
/* harmony import */ var _geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./geometry-from-draw */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");

/** @jsx jsx */








function QueryTaskSpatialForm(props) {
    var _a;
    const { label, desc, filterTypes, mapWidgetIds, onFilterChange, onRelationChange, onBufferChange, useDataSources, spatialRelations, useRuntimeData, dsEnableBuffer, dsBufferDistance, dsBufferUnit, drawEnableBuffer, drawBufferDistance, drawBufferUnit, createToolTypes, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // used to store the selection of the data source in order to update the filter when option changes
    const selectedGeometriesRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const mapExists = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        if ((mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.length) > 0) {
            const mapWidgetId = mapWidgetIds[0];
            return state.appConfig.widgets[mapWidgetId] != null;
        }
        return false;
    });
    const canUseMapFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return mapExists && ((filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent)) || (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode)));
    }, [filterTypes, mapExists]);
    const supportedFilterTypes = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [];
        if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData) {
            result.push({ value: 'data', label: getI18nMessage('featureFromDs') });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent))) {
            result.push({ value: 'map', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent}`) });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode))) {
            result.push({ value: 'draw', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode}`) });
        }
        return result;
    }, [canUseMapFilter, useDataSources, useRuntimeData, getI18nMessage, filterTypes]);
    const [currentFilterType, setCurrentFilterType] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // in order to avoid invalid option being selected
        if (currentFilterType !== 'none' && !supportedFilterTypes.find((item) => item.value === currentFilterType)) {
            setCurrentFilterType((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
        }
    }, [currentFilterType, supportedFilterTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear the relationship and buffer if filter type is not 'data'
        if (currentFilterType === 'map' || currentFilterType === 'draw' || currentFilterType === 'none') {
            onRelationChange(null);
            onBufferChange(0, _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters);
            onFilterChange({ geometry: null });
        }
        // no need to update the filter if the data source has selection since it will be updated in the handleSelectionChange method
        if (currentFilterType === 'data' && selectedGeometriesRef.current == null) {
            onFilterChange({ geometry: null });
        }
    }, [currentFilterType, onRelationChange, onBufferChange, onFilterChange]);
    const handleFilterTypeChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => { setCurrentFilterType(evt.target.value); }, []);
    const handleGeometryChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometry, layer, graphic, clearAfterApply) => {
        onFilterChange({ geometry, graphic, layer, clearAfterApply });
    }, [onFilterChange]);
    const handleSelectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometries) => {
        selectedGeometriesRef.current = geometries;
        onFilterChange({ geometry: geometries });
    }, [onFilterChange]);
    if (!((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData || canUseMapFilter)) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4 pb-4', "aria-label": label, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !label && !desc }), children: [label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: label }), desc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: desc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), supportedFilterTypes.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3', children: getI18nMessage('chooseFilterType') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterType'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `height: 32px;`, value: currentFilterType, onChange: handleFilterTypeChanged, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'none', children: "-" }, '-'), supportedFilterTypes.map(item => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item.value, children: item.label }, item.value))] })] })), currentFilterType === 'data' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__.GeometryFromDataSource, { enableBuffer: dsEnableBuffer, bufferDistance: dsBufferDistance, bufferUnit: dsBufferUnit, spatialRelations: spatialRelations, useDataSources: useDataSources, useRuntimeData: useRuntimeData, onSelectionChange: handleSelectionChange, onRelationChange: onRelationChange, onBufferChange: onBufferChange })), currentFilterType === 'map' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_map__WEBPACK_IMPORTED_MODULE_6__.GeometryFromMap, { mapWidgetIds: mapWidgetIds, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange })), currentFilterType === 'draw' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__.GeometryFromDraw, { enableBuffer: drawEnableBuffer, bufferDistance: drawBufferDistance, bufferUnit: drawBufferUnit, mapWidgetIds: mapWidgetIds, widgetId: widgetId, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange, onBufferChange: onBufferChange }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTask: () => (/* binding */ QueryTask)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_task_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx");
/* harmony import */ var _query_result__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-result */ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_label__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-label */ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx");
/* harmony import */ var _hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./hooks/use-zoom-to-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var _loading_result__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./loading-result */ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

/** @jsx jsx */



















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.createQuerySimpleDebugLogger)();
// Event fired when SqlExpressionRuntime converts hash value from string to array format
const QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT = 'querysimple-hash-value-converted';
// Event fired when a hash-triggered query execution completes successfully
// This allows HelperSimple to track which hash parameters have been executed
const QUERYSIMPLE_HASH_QUERY_EXECUTED_EVENT = 'querysimple-hash-query-executed';
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  &.wrapped .query-form {
    height: 100%;
  }
  .query-task__content {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-top: 8px;
    &:has(> .query-form__header > div:not(.d-none)), &:has(> .query-result) {
      padding-top: 16px;
    }
  }
  .query-form__header {
    display: flex;
    &.has-content {
      border-bottom: 1px solid var(--sys-color-divider-secondary);
      margin-bottom: 6px;
      padding-bottom: 8px;
    }
    .nav-action {
      flex: 1 1 0;
      overflow: hidden;
      display: flex;
      .jimu-btn {
        min-width: 26px;
      }
    }
    .result-menu {
      display: flex;
    }
  }
`;
function QueryTask(props) {
    var _a, _b, _c, _d, _e;
    const { queryItem, onNavBack, total, isInPopper = false, wrappedInPopper = false, className = '', index, initialInputValue, onHashParameterUsed, queryItems, selectedQueryIndex, onQueryChange, groups, ungrouped, groupOrder, selectedGroupId, selectedGroupQueryIndex, onGroupChange, onGroupQueryChange, onUngroupedChange, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab: propActiveTab, onTabChange: propOnTabChange, eventManager } = props, otherProps = __rest(props, ["queryItem", "onNavBack", "total", "isInPopper", "wrappedInPopper", "className", "index", "initialInputValue", "onHashParameterUsed", "queryItems", "selectedQueryIndex", "onQueryChange", "groups", "ungrouped", "groupOrder", "selectedGroupId", "selectedGroupQueryIndex", "onGroupChange", "onGroupQueryChange", "onUngroupedChange", "resultsMode", "onResultsModeChange", "accumulatedRecords", "onAccumulatedRecordsChange", "useGraphicsLayerForHighlight", "graphicsLayer", "mapView", "onInitializeGraphicsLayer", "onClearGraphicsLayer", "activeTab", "onTabChange", "eventManager"]);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_15__["default"]);
    const zoomToRecords = (0,_hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_10__.useZoomToRecords)(mapView);
    const [stage, setStage] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0); // 0 = form, 1 = results, 2 = loading
    const [internalActiveTab, setInternalActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState('query');
    // Log when initialInputValue prop is received
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytask-initialinputvalue-prop-received',
            widgetId: props.widgetId,
            queryItemConfigId: props.queryItem.configId,
            queryItemShortId: props.queryItemShortId,
            hasInitialInputValue: !!props.initialInputValue,
            initialInputValue: props.initialInputValue,
            lastTabSwitchHash: lastTabSwitchHashRef.current,
            timestamp: Date.now()
        });
        // FIX (r018.128): Only switch tab ONCE per unique hash value
        // This prevents continuous re-switching that blocks auto-switch to Results tab
        if (props.initialInputValue && lastTabSwitchHashRef.current !== props.initialInputValue) {
            lastTabSwitchHashRef.current = props.initialInputValue;
            debugLogger.log('HASH-EXEC', {
                event: 'querytask-switching-to-query-tab-for-hash',
                widgetId: props.widgetId,
                initialInputValue: props.initialInputValue,
                currentActiveTab: propActiveTab || internalActiveTab,
                note: 'First time seeing this hash value - switching to Query tab',
                timestamp: Date.now()
            });
            if (propOnTabChange) {
                propOnTabChange('query');
            }
            else {
                setInternalActiveTab('query');
            }
        }
        else if (!props.initialInputValue && lastTabSwitchHashRef.current !== null) {
            // Reset ref when hash is cleared (allows same hash to trigger again later)
            debugLogger.log('HASH-EXEC', {
                event: 'querytask-resetting-tab-switch-tracking',
                widgetId: props.widgetId,
                previousHash: lastTabSwitchHashRef.current,
                note: 'Hash cleared - resetting tracking so same hash can trigger again',
                timestamp: Date.now()
            });
            lastTabSwitchHashRef.current = null;
        }
    }, [props.initialInputValue, props.widgetId, props.queryItem.configId, props.queryItemShortId, propOnTabChange, propActiveTab, internalActiveTab]);
    // Controlled tab state: use prop if provided, otherwise internal state
    const activeTab = propActiveTab || internalActiveTab;
    const setActiveTab = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab) => {
        if (propOnTabChange) {
            propOnTabChange(tab);
        }
        else {
            setInternalActiveTab(tab);
        }
    }, [propOnTabChange]);
    const [enabled, setEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const [resultCount, setResultCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    // FIX (r018.92): Track when a query switch is in progress to prevent handleRenderDone interference
    const isQuerySwitchInProgressRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track if we've already selected records for the current query results
    const hasSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // FIX (r018.128): Track which hash value we last switched tabs for to prevent continuous re-switching
    const lastTabSwitchHashRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    // Track query execution count to force QueryTaskResult remount on new queries
    const queryExecutionKeyRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const queryParamRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const recordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [outputDS, setOutputDS] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [spatialFilterEnabled, setSpatialFilterEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const attributeFilterSqlExprObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.sqlExprObj);
    const spatialFilterObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const clearResultBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const [dataActionFilter, setDataActionFilter] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.configId);
    // Track manual tab switches to prevent auto-switch useEffect from interfering
    const manualTabSwitchRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track when a query was just executed - only auto-switch after query execution completes
    const queryJustExecutedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Store the last runtime zoom override value from the form for use by Add to Map action
    const lastRuntimeZoomToSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Error states for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [zoomError, setZoomError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Store pending query when waiting for hash value conversion
    const pendingHashQueryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_QUERY_ITEM, queryItem);
    const { icon, name, displayLabel } = currentItem;
    const dsExists = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.useDataSourceExists)({ widgetId: props.widgetId, useDataSourceId: (_a = currentItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId });
    // Debug logging for tab content rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('TASK', {
            event: 'query-tab-content-render',
            activeTab,
            enabled,
            dsExists,
            dataSource: dataSource ? 'exists' : 'null',
            queryItemConfigId: queryItem.configId,
            note: 'Query tab content state check'
        });
    }, [activeTab, enabled, dsExists, dataSource, queryItem.configId]);
    // Debug logging for Tab children rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'query-tab-children-render',
                activeTab,
                queryItemConfigId: queryItem.configId,
                note: 'Query Tab children should be rendering'
            });
        }
    }, [activeTab, queryItem.configId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    // Get the pagination style from widget config (MultiPage or LazyLoad/Single-page)
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    // Get the initial page size for single-page (LazyLoad) results
    // This allows users to configure how many records are loaded initially when using single-page mode
    // Defaults to 100 if not configured
    const lazyLoadInitialPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.lazyLoadInitialPageSize;
    });
    // Watch for when results are ready and switch to Results tab
    // ONLY auto-switch when a query was just executed and results are loaded
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Don't auto-switch if user manually switched tabs
        if (manualTabSwitchRef.current) {
            debugLogger.log('TASK', {
                event: 'auto-switch-skipped',
                reason: 'manual-tab-switch-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                activeTab,
                resultCount,
                queryJustExecutedRef: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
            return;
        }
        // FORCED: Always use SimpleList - we're done with lazy loading issues
        // Records are available immediately, so we can switch as soon as resultCount > 0
        const isSimpleList = true;
        // ONLY auto-switch when:
        // 1. A query was just executed (queryJustExecutedRef.current === true)
        // 2. We have results (resultCount > 0)
        // 3. Records are actually loaded:
        //    - For SimpleList: resultCount > 0 is sufficient (records available immediately)
        //    - For LazyLoad: recordsRef.current must have data (wait for lazy loading)
        // 4. We're currently on the query tab (don't switch if already on results)
        const hasRecords = isSimpleList
            ? resultCount > 0
            : (recordsRef.current && recordsRef.current.length > 0);
        debugLogger.log('TASK', {
            event: 'auto-switch-check',
            widgetId: props.widgetId,
            queryItemConfigId: queryItem.configId,
            activeTab,
            resultCount,
            queryJustExecutedRef: queryJustExecutedRef.current,
            isSimpleList,
            pagingTypeInConfig,
            hasRecords,
            recordsRefLength: ((_a = recordsRef.current) === null || _a === void 0 ? void 0 : _a.length) || 0,
            manualTabSwitchRef: manualTabSwitchRef.current,
            willAutoSwitch: queryJustExecutedRef.current && resultCount > 0 && hasRecords && activeTab === 'query',
            timestamp: Date.now()
        });
        if (queryJustExecutedRef.current &&
            resultCount > 0 &&
            hasRecords &&
            activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'auto-switch-triggered',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                fromTab: activeTab,
                toTab: 'results',
                resultCount,
                timestamp: Date.now()
            });
            setActiveTab('results');
            queryJustExecutedRef.current = false; // Reset after switching
            debugLogger.log('TASK', {
                event: 'auto-switch-completed',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                queryJustExecutedRefReset: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
        }
    }, [resultCount, activeTab, pagingTypeInConfig]);
    // Verify dropdowns are synchronized with hash parameter when present
    // This is especially important for grouped queries where dropdowns need to be synchronized
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only verify if we have a hash parameter
        if (!initialInputValue || !queryItem.shortId) {
            return;
        }
        // Verify the current queryItem matches what we expect from hash parameter
        const expectedShortId = queryItem.shortId;
        const isGroupedQuery = queryItem.groupId !== null && queryItem.groupId !== undefined;
        // Check if dropdowns are correctly set for grouped queries
        if (isGroupedQuery) {
            const expectedGroupId = queryItem.groupId;
            const actualGroupId = selectedGroupId;
            const expectedQueryIndex = selectedGroupQueryIndex;
            if (expectedGroupId !== actualGroupId) {
                debugLogger.log('GROUP', {
                    event: 'dropdown-group-mismatch',
                    expectedGroupId,
                    actualGroupId,
                    queryItemShortId: expectedShortId,
                    warning: 'First dropdown may not be synchronized with hash parameter'
                });
            }
            else if (expectedQueryIndex !== undefined) {
                // Verify the query index within the group matches
                const groupItems = (_a = groups === null || groups === void 0 ? void 0 : groups[expectedGroupId]) === null || _a === void 0 ? void 0 : _a.items;
                if (groupItems && groupItems.length > expectedQueryIndex) {
                    const expectedQueryConfigId = (_b = groupItems[expectedQueryIndex]) === null || _b === void 0 ? void 0 : _b.configId;
                    const actualQueryConfigId = queryItem.configId;
                    if (expectedQueryConfigId !== actualQueryConfigId) {
                        debugLogger.log('GROUP', {
                            event: 'dropdown-query-index-mismatch',
                            expectedQueryConfigId,
                            actualQueryConfigId,
                            expectedQueryIndex,
                            queryItemShortId: expectedShortId,
                            warning: 'Second dropdown may not be synchronized with hash parameter'
                        });
                    }
                    else {
                        debugLogger.log('GROUP', {
                            event: 'dropdowns-synchronized',
                            queryItemShortId: expectedShortId,
                            groupId: expectedGroupId,
                            selectedGroupQueryIndex: expectedQueryIndex,
                            note: 'Dropdowns synchronized with hash parameter'
                        });
                    }
                }
            }
        }
        else {
            // Ungrouped query - verify it's selected
            debugLogger.log('GROUP', {
                event: 'dropdowns-synchronized-ungrouped',
                queryItemShortId: expectedShortId,
                note: 'Ungrouped query dropdown synchronized with hash parameter'
            });
        }
    }, [initialInputValue, queryItem.shortId, queryItem.groupId, queryItem.configId, selectedGroupId, selectedGroupQueryIndex, groups]);
    const useOutputDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
        dataSourceId: queryItem.outputDataSourceId,
        mainDataSourceId: queryItem.outputDataSourceId
    }), [queryItem.outputDataSourceId]);
    const updateDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        var _a, _b;
        const currentDs = ds !== null && ds !== void 0 ? ds : dataSource;
        // should disable spatial filter if the dataSource is an output ds and it already has spatial filter
        if ((_a = currentDs === null || currentDs === void 0 ? void 0 : currentDs.getDataSourceJson()) === null || _a === void 0 ? void 0 : _a.isOutputFromWidget) {
            const qDs = currentDs;
            const qParams = (_b = qDs.getCurrentQueryParams) === null || _b === void 0 ? void 0 : _b.call(qDs);
            if (qParams.geometry != null) {
                setSpatialFilterEnabled(false);
            }
            else {
                setSpatialFilterEnabled(true);
            }
        }
    }, [dataSource]);
    const handleStatusChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((enabled) => {
        setEnabled(enabled);
        updateDataSource();
    }, [updateDataSource]);
    const handleOutputDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info, preInfo) => {
        const outputId = queryItem.outputDataSourceId;
        const filter = (info === null || info === void 0 ? void 0 : info.widgetQueries) ? info.widgetQueries[`setFilter-${outputId}`] : null;
        if (filter == null) { // filter is null means there are incomplete queries, ignore this change
            return;
        }
        const preFilter = (preInfo === null || preInfo === void 0 ? void 0 : preInfo.widgetQueries) ? preInfo.widgetQueries[`setFilter-${outputId}`] : null;
        if ((filter === null || filter === void 0 ? void 0 : filter.where) !== (preFilter === null || preFilter === void 0 ? void 0 : preFilter.where)) {
            setDataActionFilter(filter);
        }
    }, [queryItem.outputDataSourceId]);
    const publishDataClearedMsg = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        if (!outputDS)
            return;
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordSetChangeMessage(props.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_1__.RecordSetChangeType.Remove, [outputDS.id]);
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        yield jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(props.widgetId, [], [outputDS.id]));
    }), [props.widgetId, outputDS]);
    /**
     * Clears all query results from the UI and map.
     * This is the single source of truth for clearing results.
     * It clears the records, resets the result count, clears selection from the map,
     * publishes a cleared message to the map, switches back to the Query tab,
     * and increments the query execution key to force QueryTaskResult to remount with fresh state.
     */
    const clearResult = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (reason = 'unknown') {
        debugLogger.log('TASK', {
            event: 'clearResult-called',
            widgetId: props.widgetId,
            hasOutputDS: !!outputDS,
            reason,
            timestamp: Date.now()
        });
        recordsRef.current = null;
        outputDS === null || outputDS === void 0 ? void 0 : outputDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady);
        setResultCount(0);
        // NOTE: Graphics layer clearing is now handled inside clearSelectionInDataSources
        // called below. We ensure this is awaited to prevent race conditions.
        // Clear selection directly from data source using utility function
        try {
            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.clearSelectionInDataSources)(props.widgetId, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            debugLogger.log('TASK', {
                event: 'clearResult-selection-cleared',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
        }
        catch (error) {
            debugLogger.log('TASK', {
                event: 'clearResult-selection-clear-failed',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                timestamp: Date.now()
            });
        }
        // Clear widget-level accumulated records when clearing results
        if (onAccumulatedRecordsChange) {
            onAccumulatedRecordsChange([]);
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-cleared-on-clear-results',
                widgetId: props.widgetId
            });
        }
        yield publishDataClearedMsg();
        // Switch back to Query tab when clearing results
        setActiveTab('query');
        setStage(0);
        hasSelectedRecordsRef.current = false; // Reset selection flag when clearing
        // Increment query execution key to force QueryTaskResult remount with fresh state
        queryExecutionKeyRef.current += 1;
        // Clear error states when clearing results
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'clearResult-complete',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
    }), [outputDS, publishDataClearedMsg, props.widgetId, queryItem.configId, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer]);
    /**
     * Handles data source creation when switching between query items.
     * When a new query item is selected (e.g., switching from Parcel to Major),
     * this clears old results to ensure all cleanup logic runs properly.
     *
     * @param ds - The newly created data source for the selected query item
     */
    const handleDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-start',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // In "Add to" and "Remove from" modes, preserve accumulated records and selection - don't clear
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'preserving-selection-on-query-switch-handleDataSourceCreated',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length
            });
            setDataSource(ds);
            updateDataSource(ds);
            setStage(0);
            setActiveTab('query');
            return; // Skip clearing - preserve selection
        }
        // For "New" mode, clear old results
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-clearing-results-for-new-mode',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
        yield clearResult('handleDataSourceCreated-new-mode');
        setDataSource(ds);
        updateDataSource(ds);
        setStage(0);
        setActiveTab('query'); // Return to Query tab when switching queries
    }), [updateDataSource, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const handleOutputDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
        setOutputDS(ds);
        // Detect query switch for logging
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        const oldConfigId = previousConfigIdRef.current;
        // FIX (r018.93): Set query switch flag IMMEDIATELY when query switch is detected
        // This prevents handleRenderDone from running before the query switch re-selection logic
        // The flag must be set BEFORE any rendering happens that could trigger handleRenderDone
        if (isSwitchingQueries && (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)) {
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                isQuerySwitchInProgressRef.current = true;
                debugLogger.log('RESULTS-MODE', {
                    event: 'query-switch-detected-setting-flag-early',
                    widgetId: props.widgetId,
                    oldConfigId,
                    newConfigId: queryItem.configId,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    flagSet: true,
                    timestamp: Date.now()
                });
            }
        }
        // VERIFICATION LOGGING: Track graphics layer state when switching queries
        if (isSwitchingQueries && (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)) {
            const graphicsCountBefore = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'handleOutputDataSourceCreated-query-switch-detected',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode,
                hasGraphicsLayer: !!graphicsLayer,
                graphicsCountBefore,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                useGraphicsLayerForHighlight,
                hasOnClearGraphicsLayer: !!onClearGraphicsLayer,
                isQuerySwitchFlagSet: isQuerySwitchInProgressRef.current,
                timestamp: Date.now()
            });
            // BUG LOGGING: Accumulated results format switch bug
            // Log whenever query switches with accumulated records (known bug - format will change)
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('BUG', {
                    bugId: 'BUG-ADD-MODE-001',
                    category: 'UI',
                    event: 'accumulated-results-format-switch',
                    widgetId: props.widgetId,
                    oldQueryConfigId: oldConfigId,
                    newQueryConfigId: queryItem.configId,
                    oldQueryName: 'Unknown (not tracked)', // We don't currently track which query created records
                    newQueryName: queryItem.name || queryItem.searchAlias || 'Unknown',
                    accumulatedRecordsCount: accumulatedRecords.length,
                    resultsMode,
                    description: 'Accumulated results will change to match new query\'s display format. Fields, layout, and styling will switch from original query\'s configuration to current query\'s configuration.',
                    impact: 'Results may show wrong fields or missing data. Makes ADD mode confusing for multi-query workflows.',
                    workaround: 'Use NEW_SELECTION mode instead of ADD_TO_SELECTION, or only accumulate results from the same query.',
                    targetResolution: 'TBD - Store original queryConfig with each record set',
                    documentation: 'docs/bugs/ACCUMULATED_RESULTS_FORMAT_SWITCH.md'
                });
            }
        }
        // CHECK rootDataSource.map to see how framework accesses map view
        try {
            const originDataSources = ds.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (originDS) {
                const rootDS = originDS.getRootDataSource();
                if (rootDS) {
                    // Expose rootDS to window for console inspection
                    ;
                    window.__querySimpleRootDS = rootDS;
                    window.__querySimpleRootDSMap = rootDS.map;
                    window.__querySimpleOriginDS = originDS;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'check-root-datasource-map',
                        widgetId: props.widgetId,
                        outputDSId: ds.id,
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        hasRootDSMap: !!rootDS.map,
                        rootDSMapType: rootDS.map ? typeof rootDS.map : 'none',
                        rootDSMapId: ((_b = rootDS.map) === null || _b === void 0 ? void 0 : _b.id) || 'none',
                        hasRootDSMapView: !!((_c = rootDS.map) === null || _c === void 0 ? void 0 : _c.view),
                        hasRootDSMapViews: !!((_d = rootDS.map) === null || _d === void 0 ? void 0 : _d.views),
                        rootDSMapViewsLength: ((_f = (_e = rootDS.map) === null || _e === void 0 ? void 0 : _e.views) === null || _f === void 0 ? void 0 : _f.length) || 0,
                        // Log some map properties if it exists
                        rootDSMapKeys: rootDS.map ? Object.keys(rootDS.map).filter(key => !key.startsWith('_') &&
                            typeof rootDS.map[key] !== 'function').slice(0, 20) : [],
                        // Log that objects are available on window for console inspection
                        consoleInspection: 'Check window.__querySimpleRootDS, window.__querySimpleRootDSMap, window.__querySimpleOriginDS',
                        timestamp: Date.now()
                    });
                    // If map exists, check its view
                    const rootMap = rootDS.map;
                    if (rootMap) {
                        const view = rootMap.view ||
                            ((_h = (_g = rootMap.views) === null || _g === void 0 ? void 0 : _g.getItemAt) === null || _h === void 0 ? void 0 : _h.call(_g, 0)) ||
                            (((_j = rootMap.views) === null || _j === void 0 ? void 0 : _j.length) > 0 ? rootMap.views[0] : null);
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'check-root-datasource-map-view',
                            widgetId: props.widgetId,
                            hasView: !!view,
                            viewType: (view === null || view === void 0 ? void 0 : view.type) || 'none',
                            viewId: (view === null || view === void 0 ? void 0 : view.id) || 'none',
                            timestamp: Date.now()
                        });
                    }
                }
            }
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'check-root-datasource-map-error',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
        }
        // Initialize graphics layer lazily if enabled and not already initialized
        if (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) {
            yield onInitializeGraphicsLayer(ds);
            // After initialization, graphicsLayer and mapView props should be updated
            // But since props come from refs, we need to wait for widget re-render
            // For now, use the props that will be updated on next render
        }
        // If in "Add to" or "Remove from" mode and we have accumulated records, re-select them
        // This uses the same logic as after query completion - selectRecordsAndPublish
        // This ensures records are selected both on the map and in the Results tab
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            // FIX (r018.93): Flag is now set earlier (at query switch detection) to prevent timing issues
            // Verify that the flag is already set
            debugLogger.log('RESULTS-MODE', {
                event: 'query-switch-reselection-starting',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length,
                isQuerySwitchFlagSet: isQuerySwitchInProgressRef.current,
                note: 'Flag should already be set from query switch detection',
                timestamp: Date.now()
            });
            // VERIFICATION LOGGING: Graphics count before clearing
            const graphicsCountBeforeClear = ((_k = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _k === void 0 ? void 0 : _k.length) || 0;
            // FIX (r018.67): Clear graphics layer when switching queries to prevent stale graphics
            // from previous queries from persisting in the shared graphics layer
            if (useGraphicsLayerForHighlight && graphicsLayer && onClearGraphicsLayer) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'clearing-graphics-layer-before-reselection-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    graphicsCountBeforeClear,
                    timestamp: Date.now()
                });
                onClearGraphicsLayer();
                // VERIFICATION LOGGING: Graphics count after clearing
                const graphicsCountAfterClear = ((_l = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _l === void 0 ? void 0 : _l.length) || 0;
                debugLogger.log('RESULTS-MODE', {
                    event: 'graphics-layer-cleared-on-query-switch',
                    widgetId: props.widgetId,
                    graphicsCountBeforeClear,
                    graphicsCountAfterClear,
                    cleared: graphicsCountAfterClear === 0,
                    timestamp: Date.now()
                });
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'skipping-graphics-layer-clear-on-query-switch',
                    widgetId: props.widgetId,
                    reason: !useGraphicsLayerForHighlight ? 'useGraphicsLayerForHighlight-false' :
                        !graphicsLayer ? 'no-graphicsLayer' :
                            !onClearGraphicsLayer ? 'no-onClearGraphicsLayer' : 'unknown',
                    graphicsCountBeforeClear,
                    timestamp: Date.now()
                });
            }
            // Use a delay to ensure the DS is fully ready and graphics layer props are updated after widget re-render
            // If graphics layer was just initialized, wait a bit longer for props to update
            const delay = (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) ? 200 : 100;
            setTimeout(() => {
                var _a;
                const featureDS = ds;
                if (featureDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    // FIX (r018.96): No filtering needed - accumulatedRecords is already the source of truth
                    // Duplicate detection in mergeResultsIntoAccumulated prevents duplicates
                    const recordsToReselect = accumulatedRecords;
                    // VERIFICATION LOGGING: Show records being reselected
                    debugLogger.log('RESULTS-MODE', {
                        event: 'query-switch-reselecting-accumulated-records',
                        widgetId: props.widgetId,
                        accumulatedRecordsCount: accumulatedRecords.length,
                        recordsToReselectCount: recordsToReselect.length,
                        recordsToReselectIds: recordsToReselect.map(r => r.getId()).slice(0, 10),
                        note: 'r018.96: Using accumulatedRecords directly - no manual removal tracking',
                        timestamp: Date.now()
                    });
                    // Update accumulatedRecords if filtering removed any records
                    if (recordsToReselect.length !== accumulatedRecords.length && onAccumulatedRecordsChange) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'syncing-accumulated-records-after-filtering-manually-removed',
                            widgetId: props.widgetId,
                            accumulatedRecordsCountBefore: accumulatedRecords.length,
                            accumulatedRecordsCountAfter: recordsToReselect.length,
                            recordsRemoved: accumulatedRecords.length - recordsToReselect.length,
                            note: 'Updating accumulatedRecords to exclude manually removed records',
                            timestamp: Date.now()
                        });
                        onAccumulatedRecordsChange(recordsToReselect);
                    }
                    // Only re-select if we have records to re-select
                    if (recordsToReselect.length > 0) {
                        const recordIds = recordsToReselect.map(record => record.getId());
                        // DIAGNOSTIC LOGGING: What we're about to re-select
                        debugLogger.log('RESULTS-MODE', {
                            event: 'query-switch-before-reselection',
                            widgetId: props.widgetId,
                            recordsToReselectCount: recordsToReselect.length,
                            recordsToReselectIds: recordIds,
                            outputDSId: featureDS.id,
                            graphicsLayerCountBefore: ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0,
                            timestamp: Date.now()
                        });
                        (() => __awaiter(this, void 0, void 0, function* () {
                            var _a;
                            try {
                                yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.selectRecordsAndPublish)(props.widgetId, featureDS, recordIds, recordsToReselect, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                                // FIX (r018.92): Clear the query switch flag after re-selection completes
                                isQuerySwitchInProgressRef.current = false;
                                debugLogger.log('RESULTS-MODE', {
                                    event: 'query-switch-completed-clearing-in-progress-flag',
                                    widgetId: props.widgetId,
                                    recordsReselected: recordIds.length,
                                    timestamp: Date.now()
                                });
                                // FIX (r018.86): Clean up duplicate widget output entries in data_s hash
                                // When switching queries, Experience Builder creates a new output DS with a new ID
                                // We need to remove all old widget output entries to prevent duplicates
                                const currentOutputDSId = featureDS.id;
                                const hash = window.location.hash.substring(1);
                                const urlParams = new URLSearchParams(hash);
                                if (urlParams.has('data_s')) {
                                    const dataS = urlParams.get('data_s') || '';
                                    const decodedDataS = decodeURIComponent(dataS);
                                    const selections = decodedDataS.split(',');
                                    // Extract widget number from widgetId (e.g., "widget_12" -> "12")
                                    const widgetMatch = props.widgetId.match(/widget_(\d+)/);
                                    if (widgetMatch) {
                                        const widgetNumber = widgetMatch[1];
                                        const widgetPattern = new RegExp(`widget_${widgetNumber}_output_(\\d+)`);
                                        // Find all widget output entries for this widget
                                        const widgetOutputEntries = [];
                                        selections.forEach(selection => {
                                            if (selection.startsWith('id:')) {
                                                const idPart = selection.substring(3);
                                                const colonIndex = idPart.lastIndexOf(':');
                                                if (colonIndex !== -1) {
                                                    const dsIdPart = idPart.substring(0, colonIndex);
                                                    const recordIdsPart = idPart.substring(colonIndex + 1);
                                                    const recordCount = recordIdsPart ? recordIdsPart.split(/[,+]/).filter(id => id).length : 0;
                                                    // Check if this matches our widget's output DS pattern
                                                    let outputIdMatch = null;
                                                    if (dsIdPart.includes('~')) {
                                                        // Compound format: dataSource_*~widget_XX_output_*
                                                        const parts = dsIdPart.split('~');
                                                        for (const part of parts) {
                                                            const match = part.match(widgetPattern);
                                                            if (match) {
                                                                outputIdMatch = match;
                                                                break;
                                                            }
                                                        }
                                                    }
                                                    else {
                                                        // Simple format: widget_XX_output_*
                                                        outputIdMatch = dsIdPart.match(widgetPattern);
                                                    }
                                                    if (outputIdMatch) {
                                                        const fullOutputId = outputIdMatch[0]; // e.g., "widget_12_output_28628683957324497"
                                                        widgetOutputEntries.push({ selection, outputId: fullOutputId, recordCount });
                                                    }
                                                }
                                            }
                                        });
                                        // If we have multiple entries for this widget, keep only the current one
                                        if (widgetOutputEntries.length > 1) {
                                            const currentOutputIdShort = currentOutputDSId.split('-').pop(); // Extract the numeric part
                                            debugLogger.log('HASH', {
                                                event: 'query-switch-multiple-widget-outputs-detected',
                                                widgetId: props.widgetId,
                                                totalWidgetOutputs: widgetOutputEntries.length,
                                                widgetOutputs: widgetOutputEntries.map(e => ({ outputId: e.outputId, recordCount: e.recordCount })),
                                                currentOutputDSId,
                                                currentOutputIdShort,
                                                timestamp: Date.now()
                                            });
                                            // Filter out all old widget output entries
                                            const updatedSelections = selections.filter(selection => {
                                                const matchingEntry = widgetOutputEntries.find(e => e.selection === selection);
                                                if (matchingEntry) {
                                                    // Keep only the entry matching the current output DS
                                                    const keepEntry = matchingEntry.outputId.includes(currentOutputIdShort || '');
                                                    if (!keepEntry) {
                                                        debugLogger.log('HASH', {
                                                            event: 'query-switch-removing-old-widget-output',
                                                            widgetId: props.widgetId,
                                                            removedOutputId: matchingEntry.outputId,
                                                            removedRecordCount: matchingEntry.recordCount,
                                                            currentOutputDSId,
                                                            timestamp: Date.now()
                                                        });
                                                    }
                                                    return keepEntry;
                                                }
                                                return true;
                                            });
                                            if (updatedSelections.length !== selections.length) {
                                                if (updatedSelections.length > 0) {
                                                    urlParams.set('data_s', encodeURIComponent(updatedSelections.join(',')));
                                                }
                                                else {
                                                    urlParams.delete('data_s');
                                                }
                                                window.location.hash = urlParams.toString();
                                                debugLogger.log('HASH', {
                                                    event: 'query-switch-cleaned-duplicate-widget-outputs',
                                                    widgetId: props.widgetId,
                                                    originalSelectionCount: selections.length,
                                                    newSelectionCount: updatedSelections.length,
                                                    entriesRemoved: selections.length - updatedSelections.length,
                                                    keptOutputDSId: currentOutputDSId,
                                                    keptRecordCount: recordsToReselect.length,
                                                    timestamp: Date.now()
                                                });
                                            }
                                        }
                                        else if (widgetOutputEntries.length === 1) {
                                            debugLogger.log('HASH', {
                                                event: 'query-switch-single-widget-output-found',
                                                widgetId: props.widgetId,
                                                outputId: widgetOutputEntries[0].outputId,
                                                recordCount: widgetOutputEntries[0].recordCount,
                                                expectedRecordCount: recordsToReselect.length,
                                                recordCountsMatch: widgetOutputEntries[0].recordCount === recordsToReselect.length,
                                                timestamp: Date.now()
                                            });
                                        }
                                    }
                                }
                                // Update recordsRef so results tab shows accumulated records
                                recordsRef.current = recordsToReselect;
                                setResultCount(recordsToReselect.length);
                                // VERIFICATION LOGGING: Graphics count after re-selection
                                const graphicsCountAfterReselection = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.length) || 0;
                                debugLogger.log('RESULTS-MODE', {
                                    event: 're-selected-accumulated-records-after-query-switch',
                                    widgetId: props.widgetId,
                                    outputDSId: featureDS.id,
                                    recordsCount: recordsToReselect.length,
                                    graphicsCountAfterReselection,
                                    expectedGraphicsCount: recordsToReselect.length,
                                    graphicsMatch: graphicsCountAfterReselection === recordsToReselect.length,
                                    timestamp: Date.now()
                                });
                                // Verify what's actually selected in the DS after a delay
                                setTimeout(() => {
                                    var _a, _b, _c;
                                    const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(featureDS.id);
                                    const selectedInDS = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
                                    const selectedIdsInDS = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
                                    const finalGraphicsCount = ((_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.length) || 0;
                                    // r018.78: Use 'recordId' attribute (not OBJECTID/id/FID) - that's how graphics-layer-utils stores them
                                    const finalGraphicsIds = ((_c = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _c === void 0 ? void 0 : _c.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; })) || [];
                                    debugLogger.log('RESULTS-MODE', {
                                        event: 'query-switch-after-reselection-full-state',
                                        widgetId: props.widgetId,
                                        outputDSId: featureDS.id,
                                        expectedCount: recordsToReselect.length,
                                        expectedIds: recordIds,
                                        actualSelectedInDS: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) || 0,
                                        actualSelectedIdsInDS: selectedIdsInDS,
                                        finalGraphicsCount,
                                        finalGraphicsIds,
                                        allSourcesMatch: selectedIdsInDS.length === recordsToReselect.length &&
                                            finalGraphicsCount === recordsToReselect.length &&
                                            JSON.stringify(selectedIdsInDS.sort()) === JSON.stringify(recordIds.sort()),
                                        timestamp: Date.now()
                                    });
                                }, 200);
                            }
                            catch (error) {
                                debugLogger.log('RESULTS-MODE', {
                                    event: 're-selection-failed-after-switch',
                                    widgetId: props.widgetId,
                                    error: error instanceof Error ? error.message : 'Unknown error',
                                    errorStack: error instanceof Error ? error.stack : undefined
                                });
                            }
                        }))();
                    }
                    else {
                        // No records to re-select - all were removed
                        recordsRef.current = [];
                        setResultCount(0);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'no-records-to-reselect-all-removed',
                            widgetId: props.widgetId,
                            outputDSId: featureDS.id,
                            accumulatedRecordsCountBefore: accumulatedRecords.length,
                            note: 'all-records-were-removed-no-reselection-needed',
                            timestamp: Date.now()
                        });
                    }
                }
            }, 100);
        }
    }), [resultsMode, accumulatedRecords, props.widgetId, useGraphicsLayerForHighlight, onInitializeGraphicsLayer, graphicsLayer, onClearGraphicsLayer, mapView, queryItem.configId, onAccumulatedRecordsChange]);
    // Clear results when query item changes (e.g., when new hash parameter triggers different query)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only clear if we're actually switching to a different query (not just re-rendering)
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        // Only clear results when switching queries if we're in "New" mode
        // In "Add to" and "Remove from" modes, we want to preserve accumulated records across query switches
        if (isSwitchingQueries && resultCount > 0 && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            // Store the old configId before updating
            const oldConfigId = previousConfigIdRef.current;
            // Update the ref to track the new query
            previousConfigIdRef.current = queryItem.configId;
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-results-on-query-switch-new-mode',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode
            });
            // Clear immediately when switching queries, but wrap in try-catch to handle
            // race conditions with feature info windows that might be rendering
            try {
                clearResult('query-item-switch-new-mode');
            }
            catch (error) {
                // Log for debugging but don't show to user (framework race condition)
                // The error is in framework code (feature-info.tsx), not our code
                // This can happen if feature-info.tsx is trying to appendChild to a DOM element
                // that gets removed when we clear selection
                debugLogger.log('TASK', {
                    event: 'clear-result-race-condition',
                    error: error instanceof Error ? error.message : String(error),
                    note: 'Likely race condition with feature-info.tsx'
                });
                if (true) {
                    console.warn('Error clearing results (likely race condition with feature info):', error);
                }
                // Don't set error state - this is expected in some scenarios
            }
        }
        else if (isSwitchingQueries) {
            // Store the old configId BEFORE updating the ref
            const oldConfigId = previousConfigIdRef.current;
            // DIAGNOSTIC LOGGING: Full state BEFORE sync
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                if (outputDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    const actuallySelectedRecordsBeforeSync = outputDS.getSelectedRecords() || [];
                    const accumulatedIds = accumulatedRecords.map(r => r.getId());
                    const actuallySelectedIdsBeforeSync = actuallySelectedRecordsBeforeSync.map(r => r.getId());
                    // r018.78: Use 'recordId' attribute - that's how graphics-layer-utils stores them
                    const graphicsLayerIds = ((_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; })) || [];
                    debugLogger.log('RESULTS-MODE', {
                        event: 'query-switch-before-sync-full-state',
                        widgetId: props.widgetId,
                        oldConfigId,
                        newConfigId: queryItem.configId,
                        accumulatedRecordsCount: accumulatedRecords.length,
                        accumulatedIds: accumulatedIds,
                        outputDSSelectedCount: actuallySelectedRecordsBeforeSync.length,
                        outputDSSelectedIds: actuallySelectedIdsBeforeSync,
                        graphicsLayerCount: ((_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.length) || 0,
                        graphicsLayerIds: graphicsLayerIds,
                        recordsOutOfSync: accumulatedIds.length !== actuallySelectedIdsBeforeSync.length,
                        idsMatch: JSON.stringify(accumulatedIds.sort()) === JSON.stringify(actuallySelectedIdsBeforeSync.sort()),
                        timestamp: Date.now()
                    });
                }
            }
            // FIX (r018.70): Only sync accumulatedRecords when there are actually selected records that are a subset
            // This prevents clearing accumulatedRecords when switching to empty data sources during query switches
            // Only sync if records were manually removed (actuallySelected < accumulated), not during empty DS switches
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                if (outputDS && accumulatedRecords && accumulatedRecords.length > 0 && onAccumulatedRecordsChange) {
                    const actuallySelectedRecords = outputDS.getSelectedRecords() || [];
                    if (actuallySelectedRecords.length > 0 && actuallySelectedRecords.length < accumulatedRecords.length) {
                        // Build a Set of actually selected IDs for fast lookup
                        const actuallySelectedIdsSet = new Set(actuallySelectedRecords.map(r => r.getId()));
                        // Filter accumulatedRecords to only include records that are actually selected
                        const syncedRecords = accumulatedRecords.filter(record => actuallySelectedIdsSet.has(record.getId()));
                        const accumulatedIds = accumulatedRecords.map(r => r.getId());
                        const actuallySelectedIds = actuallySelectedRecords.map(r => r.getId());
                        const syncedIds = syncedRecords.map(r => r.getId());
                        const removedIds = accumulatedIds.filter(id => !syncedIds.includes(id));
                        debugLogger.log('RESULTS-MODE', {
                            event: 'syncing-accumulated-records-before-query-switch',
                            widgetId: props.widgetId,
                            oldConfigId,
                            newConfigId: queryItem.configId,
                            accumulatedRecordsCountBefore: accumulatedRecords.length,
                            accumulatedIdsBefore: accumulatedIds,
                            actuallySelectedCount: actuallySelectedRecords.length,
                            actuallySelectedIds: actuallySelectedIds,
                            syncedRecordsCount: syncedRecords.length,
                            syncedIds: syncedIds,
                            recordsRemoved: accumulatedRecords.length - syncedRecords.length,
                            removedIds: removedIds,
                            note: 'immediate-sync-before-query-switch',
                            timestamp: Date.now()
                        });
                        // Update accumulatedRecords to match reality (immediate sync, not lazy)
                        onAccumulatedRecordsChange(syncedRecords);
                        // DIAGNOSTIC LOGGING: Full state AFTER sync
                        debugLogger.log('RESULTS-MODE', {
                            event: 'query-switch-after-sync-full-state',
                            widgetId: props.widgetId,
                            oldConfigId,
                            newConfigId: queryItem.configId,
                            accumulatedRecordsCountAfter: syncedRecords.length,
                            accumulatedIdsAfter: syncedIds,
                            outputDSSelectedCount: actuallySelectedRecords.length,
                            outputDSSelectedIds: actuallySelectedIds,
                            timestamp: Date.now()
                        });
                    }
                    else {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'accumulated-records-already-in-sync-before-query-switch',
                            widgetId: props.widgetId,
                            oldConfigId,
                            newConfigId: queryItem.configId,
                            accumulatedRecordsCount: accumulatedRecords.length,
                            timestamp: Date.now()
                        });
                    }
                }
                debugLogger.log('RESULTS-MODE', {
                    event: 'preserving-accumulated-records-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    oldConfigId,
                    newConfigId: queryItem.configId,
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
                });
            }
            // Update the ref AFTER syncing
            previousConfigIdRef.current = queryItem.configId;
        }
    }, [queryItem.configId, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId, outputDS, onAccumulatedRecordsChange]);
    const navToForm = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
        if (clearResults) {
            // Use the centralized clearResult method instead of duplicating logic
            yield clearResult('navToForm-clearResults');
            return;
        }
        // Switch to query tab but don't clear results unless explicitly requested
        // Mark as manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab('query');
        // Reset the flag after a short delay
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Only change stage if we're clearing results
        // Otherwise, keep stage at 1 (results available) so results persist
        if (!clearResults && resultCount > 0) {
            setStage(1); // Keep results available
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
        });
    }), [clearResult, resultCount]);
    /**
     * Handles tab switching between Query and Results tabs.
     * Tab switching preserves results state - results remain visible and selected
     * when switching between tabs. Results are only cleared when explicitly
     * clicking the trash can button or when starting a new query.
     *
     * @param tab - The tab to switch to ('query' | 'results')
     * @param event - Optional mouse event to prevent default behavior
     */
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab, event) => {
        debugLogger.log('TASK', {
            event: 'tab-change',
            tab,
            currentTab: activeTab,
            resultCount,
            eventType: event === null || event === void 0 ? void 0 : event.type
        });
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        // Don't allow switching to results if there are no results
        if (tab === 'results' && resultCount === 0) {
            debugLogger.log('TASK', {
                event: 'tab-change-blocked',
                reason: 'no-results',
                tab,
                resultCount
            });
            return;
        }
        // Mark this as a manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab(tab);
        // Reset the flag after a short delay to allow the state update to complete
        // This prevents the auto-switch useEffect from immediately switching back
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Don't change stage here - just switch the view
        // Stage should remain at 1 (results available) when switching between tabs
    }, [resultCount, activeTab]);
    /**
     * Internal implementation of handleFormSubmit (without waiting logic)
     * This is called either directly or after hash value conversion
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmitInternal = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        // Clear previous errors when starting a new query
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'handleFormSubmitInternal-executing',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // Store the runtime zoom override for use by Add to Map action
        lastRuntimeZoomToSelectedRef.current = runtimeZoomToSelected;
        attributeFilterSqlExprObj.current = sqlExpr;
        spatialFilterObj.current = spatialFilter;
        // Load the first page
        const featureDS = outputDS;
        // For "Add to" and "Remove from" modes, use widget-level accumulated records
        // These persist across query switches, unlike query-item-level records
        let existingRecordsForMerge = [];
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
            // Robust capture strategy:
            // 1. Try records from props (already merged by parent)
            // 2. Fallback to currently selected records in DS (captured during mode switch)
            const fromProp = accumulatedRecords || [];
            const fromDS = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
            // Diagnostic: Capture existing records from both sources
            debugLogger.log('RESULTS-MODE', {
                event: 'capture-existing-records-detailed',
                widgetId: props.widgetId,
                queryItemId: (_a = props.queryItem) === null || _a === void 0 ? void 0 : _a.id,
                fromPropCount: fromProp.length,
                fromPropIds: fromProp.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                fromDSCount: fromDS.length,
                fromDSIds: fromDS.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                resultsMode,
                timestamp: Date.now()
            });
            existingRecordsForMerge = fromProp.length > 0 ? fromProp : fromDS;
            // Diagnostic: Final existing records selected
            debugLogger.log('RESULTS-MODE', {
                event: 'final-existing-records-selected',
                widgetId: props.widgetId,
                finalCount: existingRecordsForMerge.length,
                finalIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                source: fromProp.length > 0 ? 'accumulatedRecords-prop' : 'outputDS-getSelectedRecords',
                timestamp: Date.now()
            });
            debugLogger.log('RESULTS-MODE', {
                event: 'captured-existing-records-diagnostic',
                widgetId: props.widgetId,
                resultsMode,
                fromPropCount: fromProp.length,
                fromDSCount: fromDS.length,
                finalCapturedCount: existingRecordsForMerge.length,
                firstRecordId: ((_c = (_b = existingRecordsForMerge[0]) === null || _b === void 0 ? void 0 : _b.getId) === null || _c === void 0 ? void 0 : _c.call(_b)) || 'none',
                allRecordIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                outputDSId: outputDS.id,
                timestamp: Date.now()
            });
        }
        // For "New" mode, clear old results and graphics layer
        // We call clearResult() directly and AWAIT it to ensure it's finished before query execution starts
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-clearing-results-for-new-mode',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
            yield clearResult('handleFormSubmit-new-mode');
        }
        // Set loading stage
        setStage(2);
        // FORCED: Always use SimpleList - fetch ALL records, not just a page
        // Use data source's max record count, or fall back to a large number (10000)
        const maxRecordCount = (_f = (_e = (_d = featureDS).getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(_d)) !== null && _f !== void 0 ? _f : 10000;
        let pageSize = maxRecordCount;
        const queryParams = (0,_query_utils__WEBPACK_IMPORTED_MODULE_12__.generateQueryParams)(featureDS, sqlExpr, spatialFilter, currentItem, 1, pageSize);
        queryParamRef.current = queryParams;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-query',
            widgetId: props.widgetId,
            where: queryParams.where,
            resultsMode,
            timestamp: Date.now()
        });
        // Change output ds status to unloaded before use it to load count/records.
        featureDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        featureDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        let queryResultCount = 0; // Capture count from records to use in finally block
        const startTime = performance.now();
        debugLogger.log('TASK', {
            event: 'perf-query-chain-start',
            widgetId: props.widgetId,
            resultsMode,
            where: queryParams.where,
            timestamp: Date.now()
        });
        // PERFORMANCE OPTIMIZATION: Removed redundant executeCountQuery() round-trip.
        // Since we fetch ALL records (pageSize = maxRecordCount), we can just use records.length.
        featureDS.updateQueryParams(queryParamRef.current, props.widgetId);
        const fetchStartTime = performance.now();
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(props.widgetId, queryItem, featureDS, queryParamRef.current)
            .then((result) => __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j;
            const fetchDurationMs = Math.round(performance.now() - fetchStartTime);
            const processingStartTime = performance.now();
            queryResultCount = ((_a = result.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'query-execution-complete',
                widgetId: props.widgetId,
                resultsMode,
                recordsReturned: queryResultCount,
                fetchDurationMs,
                existingCapturedCount: existingRecordsForMerge.length,
                timestamp: Date.now()
            });
            let recordsToDisplay = result.records || [];
            let dsToUse = outputDS;
            // Handle "Add to" mode: merge new results with widget-level accumulated records
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection && result.records && result.records.length > 0) {
                try {
                    // FIX (r018.96): No manual removal filtering needed
                    // Duplicate detection in mergeResultsIntoAccumulated handles preventing duplicates
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-starting-merge',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        existingIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        newRecordsCount: result.records.length,
                        newRecordIds: (_b = result.records) === null || _b === void 0 ? void 0 : _b.slice(0, 5).map((r) => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }),
                        note: 'r018.96: No manual removal filtering - duplicate detection handles this',
                        timestamp: Date.now()
                    });
                    // Merge new query results with widget-level accumulated records
                    // mergeResultsIntoAccumulated uses composite keys to prevent duplicates
                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, // Use outputDS for key generation
                    result.records, existingRecordsForMerge // Use consistently captured records
                    );
                    recordsToDisplay = mergedRecords;
                    // DIAGNOSTIC LOGGING: Records being added to accumulatedRecords
                    const existingIds = existingRecordsForMerge.map(r => r.getId());
                    const newRecordIds = result.records.map(r => r.getId());
                    const mergedIds = mergedRecords.map(r => r.getId());
                    const addedIds = mergedIds.filter(id => !existingIds.includes(id));
                    const duplicateIds = newRecordIds.filter(id => existingIds.includes(id));
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-merge-complete',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        existingIds: existingIds.slice(0, 10),
                        newRecordsCount: result.records.length,
                        newRecordIds: newRecordIds.slice(0, 10),
                        mergedRecordsCount: mergedRecords.length,
                        mergedIds: mergedIds.slice(0, 10),
                        addedIds: addedIds.slice(0, 10),
                        duplicateIds: duplicateIds.slice(0, 10),
                        duplicatesSkipped: duplicateIds.length,
                        recordsAdded: addedIds.length,
                        note: 'r018.96: No manual removal filtering - mergeResultsIntoAccumulated handles duplicates',
                        timestamp: Date.now()
                    });
                    // Update widget-level accumulated records so they persist across query switches
                    if (onAccumulatedRecordsChange) {
                        onAccumulatedRecordsChange(mergedRecords);
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined,
                        note: 'r018.96: Falling back to existing records on error',
                        timestamp: Date.now()
                    });
                    // Fall back to existing records on error
                    recordsToDisplay = existingRecordsForMerge;
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                // Handle "Remove from" mode: remove matching records from widget-level accumulated records
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-starting-merge',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        removeCount: ((_c = result.records) === null || _c === void 0 ? void 0 : _c.length) || 0
                    });
                    // Check if we have accumulated records to remove from
                    if (existingRecordsForMerge.length === 0) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-accumulated-records',
                            widgetId: props.widgetId,
                            queryRecordsCount: ((_d = result.records) === null || _d === void 0 ? void 0 : _d.length) || 0,
                            note: 'No accumulated records to remove from - no-op'
                        });
                        // No accumulated records, so nothing to remove - show empty results
                        recordsToDisplay = [];
                    }
                    else if (result.records && result.records.length > 0) {
                        // Remove matching records from accumulated records
                        const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.removeResultsFromAccumulated)(outputDS, // Use outputDS for key generation
                        result.records, existingRecordsForMerge // Use consistently captured records
                        );
                        recordsToDisplay = remainingRecords;
                        // Update widget-level accumulated records
                        if (onAccumulatedRecordsChange) {
                            onAccumulatedRecordsChange(remainingRecords);
                        }
                        // FIX (r018.86): DIAGNOSTIC - Graphics count BEFORE removeRecordsFromOriginSelections
                        const graphicsCountBeforeRemoveMode = ((_e = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _e === void 0 ? void 0 : _e.length) || 0;
                        const graphicsIdsBeforeRemoveMode = ((_f = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _f === void 0 ? void 0 : _f.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; }).slice(0, 10)) || [];
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-BEFORE-removeRecordsFromOriginSelections',
                            widgetId: props.widgetId,
                            recordsToRemoveCount: result.records.length,
                            recordsToRemoveIds: result.records.map(r => r.getId()).slice(0, 10),
                            graphicsCountBefore: graphicsCountBeforeRemoveMode,
                            graphicsIdsBefore: graphicsIdsBeforeRemoveMode,
                            timestamp: Date.now()
                        });
                        // Remove records from origin data source selections (map highlighting)
                        // FIX (r018.86): DON'T pass graphics layer parameters here - let graphics be managed by selection sync
                        // This matches the fix for X button removal (r018.85)
                        // Graphics will be synced through the normal selection flow after this operation
                        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.removeRecordsFromOriginSelections)(props.widgetId, result.records, outputDS
                        // NOT passing useGraphicsLayerForHighlight or graphicsLayer
                        // Graphics will be synced through normal selection flow
                        );
                        // FIX (r018.104): Manually remove graphics from graphics layer
                        // Similar to X button removal fix (r018.90), we need to explicitly remove graphics
                        // since removeRecordsFromOriginSelections doesn't receive graphics layer params
                        if (useGraphicsLayerForHighlight && graphicsLayer && result.records && result.records.length > 0) {
                            const removedRecordIds = result.records.map(r => r.getId());
                            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_14__.removeHighlightGraphics)(graphicsLayer, removedRecordIds);
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-manual-graphics-removal',
                                widgetId: props.widgetId,
                                graphicsCountBefore: graphicsCountBeforeRemoveMode,
                                graphicsCountAfter: ((_g = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _g === void 0 ? void 0 : _g.length) || 0,
                                removedRecordIdsCount: removedRecordIds.length,
                                removedRecordIds: removedRecordIds.slice(0, 10),
                                timestamp: Date.now()
                            });
                        }
                        // FIX (r018.86): DIAGNOSTIC - Graphics count AFTER removeRecordsFromOriginSelections
                        const graphicsCountAfterRemoveMode = ((_h = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _h === void 0 ? void 0 : _h.length) || 0;
                        const graphicsIdsAfterRemoveMode = ((_j = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _j === void 0 ? void 0 : _j.map(g => { var _a; return (_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId; }).slice(0, 10)) || [];
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-AFTER-removeRecordsFromOriginSelections',
                            widgetId: props.widgetId,
                            graphicsCountBefore: graphicsCountBeforeRemoveMode,
                            graphicsCountAfter: graphicsCountAfterRemoveMode,
                            graphicsIdsAfter: graphicsIdsAfterRemoveMode,
                            graphicsChanged: graphicsCountAfterRemoveMode !== graphicsCountBeforeRemoveMode,
                            graphicsChangedBy: graphicsCountAfterRemoveMode - graphicsCountBeforeRemoveMode,
                            expected: 'Graphics SHOULD NOW be removed (r018.104 fix)',
                            timestamp: Date.now()
                        });
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-complete',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            queryRecordsCount: result.records.length,
                            remainingRecordsCount: remainingRecords.length,
                            recordsRemoved: existingRecordsForMerge.length - remainingRecords.length,
                            outputDSId: outputDS.id,
                            widgetLevelRecordsUpdated: true,
                            originSelectionsUpdated: true
                        });
                        // If all records removed, auto-clear (consistent with user expectation)
                        if (remainingRecords.length === 0) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-all-records-removed',
                                widgetId: props.widgetId,
                                note: 'All accumulated records removed - auto-clearing'
                            });
                            // Clear widget-level accumulated records
                            if (onAccumulatedRecordsChange) {
                                onAccumulatedRecordsChange([]);
                            }
                        }
                    }
                    else {
                        // Query returned no results - nothing to remove
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-query-results',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            note: 'Query returned no results - no records to remove'
                        });
                        // Keep existing accumulated records displayed
                        recordsToDisplay = existingRecordsForMerge;
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to showing query results on error
                    recordsToDisplay = result.records || [];
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                // FIX (r018.97): For "New" mode, populate accumulatedRecords with query results
                // This ensures tab count updates correctly when records are removed in New mode
                if (onAccumulatedRecordsChange && recordsToDisplay && recordsToDisplay.length > 0) {
                    onAccumulatedRecordsChange(recordsToDisplay);
                    debugLogger.log('RESULTS-MODE', {
                        event: 'new-mode-populating-accumulated-records',
                        widgetId: props.widgetId,
                        recordsCount: recordsToDisplay.length,
                        note: 'r018.97: Populate accumulatedRecords in New mode for universal tab count',
                        timestamp: Date.now()
                    });
                }
                else if (onAccumulatedRecordsChange) {
                    // No results - clear accumulatedRecords
                    onAccumulatedRecordsChange([]);
                }
            }
            recordsRef.current = recordsToDisplay;
            // Reset selection flag for new query results
            hasSelectedRecordsRef.current = false;
            // Select records in the output DS
            // For "Add to" mode, select merged records
            // For "Remove from" mode, select remaining records (already updated via removeRecordsFromOriginSelections)
            // For "New" mode, select query results
            if (recordsToDisplay && recordsToDisplay.length > 0 && dsToUse) {
                const recordIdsToSelect = recordsToDisplay.map(record => record.getId());
                // For "Remove from" mode, selection was already updated via removeRecordsFromOriginSelections
                // But we still need to select in the outputDS for widget state consistency
                if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                    // Selection was already updated in origin DSs via removeRecordsFromOriginSelections
                    // Just update outputDS selection for widget state consistency
                    try {
                        if (typeof dsToUse.selectRecordsByIds === 'function') {
                            dsToUse.selectRecordsByIds(recordIdsToSelect, recordsToDisplay);
                        }
                        hasSelectedRecordsRef.current = true;
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-updated',
                            widgetId: props.widgetId,
                            recordCount: recordsToDisplay.length
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }
                else {
                    // For "Add to" and "New" modes, select records normally
                    setSelectionError(null) // Clear previous errors
                    ;
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.selectRecordsAndPublish)(props.widgetId, dsToUse, recordIdsToSelect, recordsToDisplay, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            hasSelectedRecordsRef.current = true; // Mark as selected
                            // Dispatch custom selection event so Widget state is updated immediately
                            // This is crucial for hash-based execution where QueryTask handles selection
                            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.dispatchSelectionEvent)(props.widgetId, recordIdsToSelect, dsToUse, queryItem.configId, eventManager);
                        }
                        catch (error) {
                            const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                            setSelectionError(errorMessage);
                            debugLogger.log('TASK', {
                                event: 'selection-failed',
                                error: errorMessage,
                                errorStack: error instanceof Error ? error.stack : undefined,
                                recordCount: recordIdsToSelect.length
                            });
                        }
                    }))();
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection && recordsToDisplay.length === 0) {
                // All records removed - clear selection
                ;
                (() => __awaiter(this, void 0, void 0, function* () {
                    try {
                        yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.clearSelectionInDataSources)(props.widgetId, dsToUse, useGraphicsLayerForHighlight, graphicsLayer);
                        hasSelectedRecordsRef.current = false;
                        // Notify Widget that selection is cleared
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_18__.dispatchSelectionEvent)(props.widgetId, [], dsToUse, queryItem.configId, eventManager);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-all-records-removed-selection-cleared',
                            widgetId: props.widgetId
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-clear-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }))();
            }
            // Mark that query just executed BEFORE updating resultCount
            // This ensures the auto-switch useEffect sees queryJustExecutedRef.current === true
            queryJustExecutedRef.current = true;
            debugLogger.log('TASK', {
                event: 'query-executed-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                resultsMode,
                recordsToDisplayCount: recordsToDisplay.length,
                queryResultCount,
                timestamp: Date.now()
            });
            // Update result count FIRST (before any parent callbacks that might cause re-renders)
            // For "Add to" and "Remove from" modes, use accumulated/remaining count
            // For "New" mode, use query count
            const newResultCount = resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection
                ? recordsToDisplay.length
                : queryResultCount;
            setResultCount(newResultCount);
            // INSTANT UI FIX (The "Spinner Bypass"): 
            // Decouple the "Retrieving results..." spinner from asynchronous actions like zooming. 
            // By calling setStage(1) now, the user sees the result list immediately while 
            // the map animation continues in the background.
            setStage(1);
            debugLogger.log('TASK', {
                event: 'perf-processing-complete',
                widgetId: props.widgetId,
                processingDurationMs: Math.round(performance.now() - processingStartTime),
                totalChainDurationMs: Math.round(performance.now() - startTime),
                newResultCount,
                resultsMode,
                timestamp: Date.now()
            });
            // Zoom to records using shared zoom utility (consistent padding behavior)
            // Use runtime preference if provided, otherwise fall back to config setting (defaults to true)
            const shouldZoom = runtimeZoomToSelected !== undefined
                ? runtimeZoomToSelected
                : (queryItem.zoomToSelected !== false);
            // Use the output DS and merged records
            const recordsForZoom = recordsToDisplay || result.records;
            const dsForZoom = dsToUse || outputDS;
            if (recordsForZoom && recordsForZoom.length > 0 && dsForZoom && shouldZoom) {
                // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
                if (!mapView && !useGraphicsLayerForHighlight) {
                    debugLogger.log('BUG', {
                        bugId: 'BUG-GRAPHICS-001',
                        category: 'GRAPHICS',
                        event: 'zoom-operation-failed-graphics-layer-disabled',
                        widgetId: props.widgetId,
                        operation: 'query-result-zoom',
                        recordsCount: recordsForZoom.length,
                        description: 'Zoom operation attempted but mapView is unavailable because useGraphicsLayerForHighlight is disabled',
                        workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                        targetResolution: 'r019.0'
                    });
                }
                try {
                    yield zoomToRecords(recordsForZoom);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to zoom to features';
                    setZoomError(errorMessage);
                    debugLogger.log('ZOOM', {
                        event: 'zoom-goTo-error-query',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    if (true) {
                        console.error('Error executing zoomToRecords', error);
                    }
                }
            }
            // NOW call onHashParameterUsed AFTER all UI updates and zoom operations complete
            // This prevents the parent re-render from interrupting the promise chain
            // This prevents hash parameters from re-executing when switching queries
            if (initialInputValue && queryItem.shortId && onHashParameterUsed) {
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-calling-onhashparameterused',
                    widgetId: props.widgetId,
                    queryItemConfigId: props.queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    timestamp: Date.now()
                });
                debugLogger.log('TASK', {
                    event: 'hash-query-executed-notifying-parent',
                    widgetId: props.widgetId,
                    queryItemConfigId: queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    timestamp: Date.now()
                });
                onHashParameterUsed(queryItem.shortId);
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-onhashparameterused-called',
                    widgetId: props.widgetId,
                    queryItemConfigId: props.queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    timestamp: Date.now()
                });
                // Fire event to notify HelperSimple that hash query execution is complete
                // This allows HelperSimple to track which hash parameters have been executed
                // to prevent re-execution when switching queries
                const hashParam = `${queryItem.shortId}=${initialInputValue}`;
                const executedEvent = new CustomEvent(QUERYSIMPLE_HASH_QUERY_EXECUTED_EVENT, {
                    detail: {
                        widgetId: props.widgetId,
                        shortId: queryItem.shortId,
                        value: initialInputValue,
                        hashParam
                    },
                    bubbles: true,
                    cancelable: true
                });
                window.dispatchEvent(executedEvent);
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-hash-query-executed-event-dispatched',
                    widgetId: props.widgetId,
                    queryItemConfigId: queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    hashParam,
                    timestamp: Date.now()
                });
            }
            return Promise.resolve(true);
        }))
            .catch(error => {
            debugLogger.log('TASK', {
                event: 'query-chain-failed-diagnostic',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            setStage(1); // Return to results or form stage even on error
        })
            .finally(() => {
            if ((spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.layer) && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.clearAfterApply)) {
                spatialFilter.layer.removeAll();
            }
            // setStage(1) // Removed from here; now called in the main chain before background actions
        });
    }), [currentItem, queryItem, props.widgetId, outputDS, publishDataClearedMsg, clearResult, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, onClearGraphicsLayer, mapView, useGraphicsLayerForHighlight, zoomToRecords]);
    // Listen for hash value conversion event and execute pending query
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleHashValueConverted = (event) => {
            var _a, _b, _c, _d, _e, _f, _g;
            debugLogger.log('TASK', {
                event: 'hash-value-converted-event-received',
                widgetId: props.widgetId,
                eventWidgetId: (_a = event.detail) === null || _a === void 0 ? void 0 : _a.widgetId,
                eventConfigId: (_b = event.detail) === null || _b === void 0 ? void 0 : _b.configId,
                matchesWidget: ((_c = event.detail) === null || _c === void 0 ? void 0 : _c.widgetId) === props.widgetId,
                hasPendingQuery: !!pendingHashQueryRef.current,
                timestamp: Date.now()
            });
            // Only process events for this widget
            if (((_d = event.detail) === null || _d === void 0 ? void 0 : _d.widgetId) !== props.widgetId) {
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-event-ignored-wrong-widget',
                    widgetId: props.widgetId,
                    eventWidgetId: (_e = event.detail) === null || _e === void 0 ? void 0 : _e.widgetId,
                    timestamp: Date.now()
                });
                return;
            }
            if (pendingHashQueryRef.current) {
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-executing-pending-query',
                    widgetId: props.widgetId,
                    configId: event.detail.configId,
                    initialInputValue: event.detail.initialInputValue,
                    timestamp: Date.now()
                });
                const { sqlExpr, spatialFilter, runtimeZoomToSelected } = pendingHashQueryRef.current;
                pendingHashQueryRef.current = null;
                // Execute the pending query now that value is converted
                // Use setTimeout to ensure this happens after the current event loop
                setTimeout(() => {
                    handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
                }, 0);
            }
            else {
                // Conversion happened before handleFormSubmit was called
                // applyQuery() is called directly from handleSqlExprObjChange in query-task-form.tsx
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-event-received-no-pending-query',
                    widgetId: props.widgetId,
                    configId: (_f = event.detail) === null || _f === void 0 ? void 0 : _f.configId,
                    initialInputValue: (_g = event.detail) === null || _g === void 0 ? void 0 : _g.initialInputValue,
                    note: 'Conversion happened before handleFormSubmit - applyQuery() called directly from form component',
                    timestamp: Date.now()
                });
            }
        };
        document.addEventListener(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, handleHashValueConverted);
        return () => {
            document.removeEventListener(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, handleHashValueConverted);
        };
    }, [props.widgetId, handleFormSubmitInternal]);
    /**
     * Handles form submission when user clicks "Apply" button.
     * Checks if hash value needs conversion and waits for event if needed.
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmit = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c;
        // LOG AT THE VERY START - before any checks
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-called',
            widgetId: props.widgetId,
            sqlExprExists: !!sqlExpr,
            firstPartExists: !!((_a = sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.parts) === null || _a === void 0 ? void 0 : _a[0]),
            timestamp: Date.now()
        });
        // Check if this is a hash-triggered query with unconverted value (string format)
        const firstPart = (_b = sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.parts) === null || _b === void 0 ? void 0 : _b[0];
        const value = (firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' ? (_c = firstPart.valueOptions) === null || _c === void 0 ? void 0 : _c.value : null;
        const isStringValue = typeof value === 'string' && value.length > 0;
        const isArrayValue = Array.isArray(value) && value.length > 0;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-checking-conversion',
            widgetId: props.widgetId,
            initialInputValue,
            valueType: typeof value,
            isStringValue,
            isArrayValue,
            value: Array.isArray(value) ? value : value,
            willCheckWaitCondition: isStringValue && !isArrayValue && initialInputValue && value === initialInputValue,
            timestamp: Date.now()
        });
        // If value is string (not converted to array yet), wait for conversion event
        // This happens when hash value changes for same configId
        if (isStringValue && !isArrayValue && initialInputValue && value === initialInputValue) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-waiting-for-conversion',
                widgetId: props.widgetId,
                currentValue: value,
                initialInputValue,
                timestamp: Date.now()
            });
            // Store pending query
            pendingHashQueryRef.current = {
                sqlExpr,
                spatialFilter,
                runtimeZoomToSelected
            };
            // Set a timeout to prevent infinite waiting (fallback after 2 seconds)
            setTimeout(() => {
                if (pendingHashQueryRef.current) {
                    debugLogger.log('TASK', {
                        event: 'handleFormSubmit-conversion-timeout-executing-anyway',
                        widgetId: props.widgetId,
                        timestamp: Date.now()
                    });
                    const { sqlExpr, spatialFilter, runtimeZoomToSelected } = pendingHashQueryRef.current;
                    pendingHashQueryRef.current = null;
                    // Execute anyway (fallback)
                    handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
                }
            }, 2000);
            return; // Exit early, will execute when event fires
        }
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-immediately',
            widgetId: props.widgetId,
            reason: isStringValue ? 'not-hash-triggered' : (isArrayValue ? 'already-converted' : 'no-value'),
            valueType: typeof value,
            isStringValue,
            isArrayValue,
            timestamp: Date.now()
        });
        // Value is already converted or not hash-triggered, execute immediately
        handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
    }), [props.widgetId, initialInputValue, handleFormSubmitInternal]);
    const { useAttributeFilter, sqlExprObj, useSpatialFilter, spatialFilterTypes, spatialIncludeRuntimeData, spatialRelationUseDataSources } = currentItem;
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // DETECT SWITCH IN RENDER
    const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
    const isVirtualClearActive = isSwitchingQueries && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
    // FIX (r018.97): Use accumulatedRecords as universal source of truth across ALL modes
    // This ensures tab count updates correctly when records are removed in ANY mode (New, Add, Remove)
    // accumulatedRecords is now synced in all modes (see query-result.tsx r018.97 fix)
    const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ||
        resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
    // Use these "effective" values for the UI
    // Prefer accumulatedRecords when available (synced in all modes), fallback to recordsRef for initial query results
    const effectiveRecords = isVirtualClearActive ? [] :
        (accumulatedRecords && accumulatedRecords.length > 0) ? accumulatedRecords :
            (recordsRef.current || []);
    // FIX (r018.95): Use effectiveRecords.length to reflect real-time count updates when records are removed
    const effectiveResultCount = isVirtualClearActive ? 0 : effectiveRecords.length;
    // DIAGNOSTIC: Log when we're using accumulatedRecords vs raw records
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (effectiveRecords.length > 0 || effectiveResultCount > 0) {
            const usingAccumulated = accumulatedRecords && accumulatedRecords.length > 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'effectiveRecords-calculation',
                widgetId: props.widgetId,
                resultsMode,
                isAccumulationMode,
                usingAccumulated,
                effectiveRecordsCount: effectiveRecords.length,
                effectiveResultCount,
                rawRecordsCount: ((_a = recordsRef.current) === null || _a === void 0 ? void 0 : _a.length) || 0,
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                tabCountWillShow: effectiveResultCount,
                note: usingAccumulated ? 'r018.97: Using accumulatedRecords (universal source of truth)' : 'Using raw query records (initial load)',
                timestamp: Date.now()
            });
        }
    }, [effectiveRecords, effectiveResultCount, isAccumulationMode, accumulatedRecords, resultsMode, props.widgetId]);
    // Create a unique key for the current query result set to help E2E tests detect fresh data
    const resultQueryKey = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return `${queryItem.configId}_${Date.now()}`;
    }, [queryItem.configId, resultCount]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task h-100', className, { wrapped: wrappedInPopper }), "data-result-query-key": resultQueryKey, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      ${style}
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useOutputDs, onDataSourceCreated: handleOutputDataSourceCreated, onDataSourceInfoChange: handleOutputDataSourceInfoChange }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { value: activeTab, onChange: (id) => handleTabChange(id), fill: true, type: 'underline', keepMount: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'query', title: getI18nMessage('queryTab'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'query'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
              padding-top: 0 !important;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-form__header mx-4 align-items-center', { 'in-popper': isInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              padding: 6px 0;
              padding-top: 8px;
              border-bottom: 1px solid var(--sys-color-divider-secondary);
              flex-shrink: 0;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('nav-action align-items-center', { 'd-none': wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1 1 0;
                overflow: hidden;
                display: flex;
                align-items: center;
                gap: 4px;
                .jimu-btn {
                  min-width: 26px;
                }
              `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 mr-2', { 'd-none': total === 1 || !onNavBack }), size: 'sm', type: 'tertiary', icon: true, onClick: onNavBack, "aria-label": getI18nMessage('back'), ref: backBtnRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_16__.ArrowLeftOutlined, { autoFlip: true }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_label__WEBPACK_IMPORTED_MODULE_9__.QueryTaskLabel, { icon: icon, name: displayLabel ? name : '' }), (() => {
                                                    var _a;
                                                    if (!queryItems || queryItems.length <= 1)
                                                        return null;
                                                    // Get current query's origin data source ID
                                                    const currentOriginDSId = (_a = queryItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId;
                                                    if (!currentOriginDSId)
                                                        return null;
                                                    // Find all queries from the same origin data source that have shortIds
                                                    const sameLayerQueries = queryItems.filter(item => {
                                                        var _a;
                                                        return ((_a = item.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId) === currentOriginDSId &&
                                                            item.shortId &&
                                                            item.shortId.trim() !== '';
                                                    });
                                                    // Only show info button if there are queries with shortIds
                                                    if (sameLayerQueries.length === 0)
                                                        return null;
                                                    // Build tooltip content
                                                    const queryLines = sameLayerQueries.map(item => {
                                                        const queryName = getQueryDisplayName(item);
                                                        return `${queryName}: #${item.shortId}=value or ?${item.shortId}=value`;
                                                    });
                                                    const tooltipTitle = `This layer can be searched using the shortIds ${sameLayerQueries.map(q => q.shortId).join(' and ')} using #shortId=value or ?shortId=value in the URL.\n\n${queryLines.join('\n')}`;
                                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: tooltipTitle, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": 'Hash parameter search information', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex-shrink: 0;
                        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }));
                                                })()] }), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: clearResultBtnRef, size: 'sm', type: 'tertiary', "aria-label": getI18nMessage('clearResult'), icon: true, className: 'ml-auto py-0', onClick: () => { clearResult('user-trash-click'); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__.TrashOutlined, {}) }) }))] }), (() => {
                                    // Only show dropdowns if multiple queries exist
                                    if (!queryItems || queryItems.length <= 1) {
                                        return null;
                                    }
                                    // Build flat list of all queries with their display info
                                    // For grouped queries, use group display name (only show once per group)
                                    const queryOptions = [];
                                    // Track which groups we've already added to avoid duplicates
                                    const addedGroups = new Set();
                                    queryItems.forEach((item, idx) => {
                                        var _a, _b, _c;
                                        if (item.groupId) {
                                            // For grouped queries, use group display name (only add once per group)
                                            if (!addedGroups.has(item.groupId)) {
                                                addedGroups.add(item.groupId);
                                                const groupDisplayName = ((_a = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.displayName) ||
                                                    ((_c = (_b = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _b === void 0 ? void 0 : _b.items[0]) === null || _c === void 0 ? void 0 : _c.name) ||
                                                    item.name ||
                                                    `Group ${item.groupId}`;
                                                queryOptions.push({
                                                    configId: item.configId,
                                                    displayName: groupDisplayName,
                                                    groupId: item.groupId,
                                                    index: idx
                                                });
                                            }
                                        }
                                        else {
                                            // Ungrouped query - use item.name for first dropdown (not searchAlias/jimuFieldName)
                                            queryOptions.push({
                                                configId: item.configId,
                                                displayName: item.name || getQueryDisplayName(item),
                                                groupId: null,
                                                index: idx
                                            });
                                        }
                                    });
                                    // Determine currently selected query
                                    const currentQueryItem = queryItem;
                                    const currentQueryGroupId = currentQueryItem.groupId || null;
                                    const isGroupedQuery = currentQueryGroupId !== null;
                                    // Find the option index for the current query
                                    const currentOptionIndex = queryOptions.findIndex(opt => {
                                        if (isGroupedQuery) {
                                            return opt.groupId === currentQueryGroupId;
                                        }
                                        else {
                                            return opt.configId === currentQueryItem.configId;
                                        }
                                    });
                                    debugLogger.log('GROUP', {
                                        event: 'rendering-dropdowns',
                                        totalQueries: queryItems.length,
                                        queryOptionsCount: queryOptions.length,
                                        currentQueryGroupId,
                                        isGroupedQuery,
                                        currentOptionIndex,
                                        selectedGroupId,
                                        selectedGroupQueryIndex,
                                        currentQueryConfigId: currentQueryItem.configId
                                    });
                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 4px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      font-size: 0.875rem;
                      font-weight: 500;
                      color: var(--sys-color-text-primary);
                      margin-bottom: 4px;
                      display: block;
                    `, children: getI18nMessage('searchLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: currentOptionIndex >= 0 ? currentOptionIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const optionIndex = parseInt(e.target.value);
                                                            const selectedOption = queryOptions[optionIndex];
                                                            debugLogger.log('GROUP', {
                                                                event: 'query-option-selected',
                                                                optionIndex,
                                                                selectedOption,
                                                                isGrouped: selectedOption.groupId !== null
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-layer-switch-new-mode');
                                                            }
                                                            if (selectedOption.groupId) {
                                                                // Grouped query selected - set group and first query in group
                                                                if (onGroupChange) {
                                                                    onGroupChange(selectedOption.groupId);
                                                                }
                                                                if (onGroupQueryChange) {
                                                                    onGroupQueryChange(0);
                                                                }
                                                            }
                                                            else {
                                                                // Ungrouped query selected - clear group selection
                                                                if (onGroupChange) {
                                                                    onGroupChange(null);
                                                                }
                                                                if (onUngroupedChange) {
                                                                    // Find the ungrouped index
                                                                    const ungroupedIndex = (_a = ungrouped === null || ungrouped === void 0 ? void 0 : ungrouped.findIndex(({ item }) => item.configId === selectedOption.configId)) !== null && _a !== void 0 ? _a : -1;
                                                                    if (ungroupedIndex >= 0) {
                                                                        onUngroupedChange(ungroupedIndex);
                                                                    }
                                                                    else {
                                                                        // Fallback: use the index from queryItems
                                                                        debugLogger.log('GROUP', {
                                                                            event: 'ungrouped-fallback-to-index',
                                                                            selectedOptionIndex: selectedOption.index
                                                                        });
                                                                        if (onQueryChange) {
                                                                            onQueryChange(selectedOption.index);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }), children: queryOptions.map((option, idx) => {
                                                            debugLogger.log('GROUP', {
                                                                event: 'rendering-query-option',
                                                                index: idx,
                                                                configId: option.configId,
                                                                displayName: option.displayName,
                                                                groupId: option.groupId
                                                            });
                                                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: option.displayName }, option.configId));
                                                        }) })] }), isGroupedQuery && currentQueryGroupId && groups && groups[currentQueryGroupId] && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      padding: 4px 16px;
                      flex-shrink: 0;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        margin-bottom: 4px;
                        display: block;
                      `, children: "Search Alias" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: selectedGroupQueryIndex !== undefined ? selectedGroupQueryIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const newIndex = parseInt(e.target.value);
                                                            debugLogger.log('GROUP', {
                                                                event: 'group-query-selected',
                                                                groupId: currentQueryGroupId,
                                                                groupQueryIndex: newIndex,
                                                                queryItemConfigId: (_a = groups[currentQueryGroupId].items[newIndex]) === null || _a === void 0 ? void 0 : _a.configId,
                                                                queryDisplayName: getQueryDisplayName(groups[currentQueryGroupId].items[newIndex])
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-alias-switch-new-mode');
                                                            }
                                                            if (onGroupQueryChange) {
                                                                onGroupQueryChange(newIndex);
                                                            }
                                                        }), children: groups[currentQueryGroupId].items.map((item, idx) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: getQueryDisplayName(item) }, item.configId))) })] }))] }));
                                })(), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 8px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "d-flex align-items-center", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      gap: 0.5rem;
                      flex-wrap: nowrap;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "title2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        white-space: nowrap;
                        flex-shrink: 0;
                      `, children: [getI18nMessage('results'), ":"] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: getI18nMessage('resultsModeDesc'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": getI18nMessage('resultsModeDesc'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `flex-shrink: 0;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: "radiogroup", "aria-label": getI18nMessage('resultsMode'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          display: flex;
                          gap: 4px;
                          align-items: stretch;
                          flex: 1;
                          min-width: 0;
                        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode: resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection, "aria-label": `${getI18nMessage('createNewResults')}: ${((_b = getI18nMessage('resultsModeDesc').split('\n')[1]) === null || _b === void 0 ? void 0 : _b.trim()) || ''}`, title: getI18nMessage('createNewResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeNew') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Add to" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                //
                                                                // SOURCE OF TRUTH ARCHITECTURE (r018.65):
                                                                // - outputDS.getSelectedRecords() is the SINGLE SOURCE OF TRUTH for current selection
                                                                //   It correctly filters out removed records and stays in sync with user actions
                                                                // - effectiveRecords (from recordsRef.current) contains stale query results that may
                                                                //   include removed records, so it should only be used as a fallback when outputDS
                                                                //   has no selection (e.g., during query execution before selection is applied)
                                                                // - This ensures removed records are never accidentally included in accumulatedRecords
                                                                // DEBUG: Log state before capture to verify assumptions
                                                                const effectiveRecordsCount = (effectiveRecords === null || effectiveRecords === void 0 ? void 0 : effectiveRecords.length) || 0;
                                                                const outputDSSelectedRecords = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
                                                                const outputDSSelectedCount = outputDSSelectedRecords.length;
                                                                const accumulatedRecordsCount = (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-before-capture',
                                                                    widgetId: props.widgetId,
                                                                    previousMode,
                                                                    newMode,
                                                                    effectiveRecordsCount,
                                                                    outputDSSelectedCount,
                                                                    accumulatedRecordsCount,
                                                                    outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                                                                    hasEffectiveRecords: effectiveRecords && effectiveRecords.length > 0,
                                                                    hasOutputDSSelected: outputDSSelectedRecords.length > 0,
                                                                    timestamp: Date.now()
                                                                });
                                                                // FIX (r018.65): Use outputDS.getSelectedRecords() as source of truth for mode switching
                                                                // This correctly filters out removed records, unlike effectiveRecords which contains stale data
                                                                // outputDS.getSelectedRecords() is the single source of truth that stays in sync with removals
                                                                const recordsToCapture = outputDSSelectedRecords.length > 0
                                                                    ? outputDSSelectedRecords
                                                                    : (effectiveRecords && effectiveRecords.length > 0
                                                                        ? effectiveRecords
                                                                        : []);
                                                                // DEBUG: Log which source was used
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-after-capture',
                                                                    widgetId: props.widgetId,
                                                                    recordsToCaptureCount: recordsToCapture.length,
                                                                    source: outputDSSelectedRecords.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                    effectiveRecordsCount,
                                                                    outputDSSelectedCount,
                                                                    timestamp: Date.now()
                                                                });
                                                                // DIAGNOSTIC: Check each condition individually (r018.78)
                                                                const conditionCheck = {
                                                                    previousModeIsNew: previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newModeIsAdd: newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection,
                                                                    hasRecordsToCapture: recordsToCapture.length > 0,
                                                                    hasOutputDS: !!outputDS,
                                                                    hasOnAccumulatedRecordsChange: !!onAccumulatedRecordsChange,
                                                                    previousMode: previousMode,
                                                                    newMode: newMode,
                                                                    recordsToCaptureLength: recordsToCapture.length
                                                                };
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-condition-check',
                                                                    widgetId: props.widgetId,
                                                                    conditions: conditionCheck,
                                                                    allConditionsMet: conditionCheck.previousModeIsNew &&
                                                                        conditionCheck.newModeIsAdd &&
                                                                        conditionCheck.hasRecordsToCapture &&
                                                                        conditionCheck.hasOutputDS &&
                                                                        conditionCheck.hasOnAccumulatedRecordsChange,
                                                                    timestamp: Date.now()
                                                                });
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection &&
                                                                    recordsToCapture.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, recordsToCapture, existingAccumulated);
                                                                    const existingIds = existingAccumulated.map(r => r.getId());
                                                                    const capturedIds = recordsToCapture.map(r => r.getId());
                                                                    const mergedIds = mergedRecords.map(r => r.getId());
                                                                    const addedIds = mergedIds.filter(id => !existingIds.includes(id));
                                                                    const duplicateIds = capturedIds.filter(id => existingIds.includes(id));
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCapture.length,
                                                                        capturedIds: capturedIds,
                                                                        effectiveRecordsCount,
                                                                        outputDSSelectedCount,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        existingIds: existingIds,
                                                                        mergedRecordsCount: mergedRecords.length,
                                                                        mergedIds: mergedIds,
                                                                        addedIds: addedIds,
                                                                        duplicateIds: duplicateIds,
                                                                        duplicatesFiltered: duplicateIds.length,
                                                                        sourceUsed: outputDSSelectedRecords.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                        note: 'outputDS.getSelectedRecords()-is-source-of-truth-filters-removed-records'
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                else {
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'mode-switch-merge-skipped',
                                                                        widgetId: props.widgetId,
                                                                        reason: 'condition-check-failed',
                                                                        conditions: conditionCheck,
                                                                        timestamp: Date.now()
                                                                    });
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection, "aria-label": `${getI18nMessage('addToCurrentResults')}: ${((_c = getI18nMessage('resultsModeDesc').split('\n')[2]) === null || _c === void 0 ? void 0 : _c.trim()) || ''}`, title: getI18nMessage('addToCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeAdd') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'primary' : 'default', disabled: !accumulatedRecords || accumulatedRecords.length === 0, onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Remove from" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                // (same pattern as "Add to" mode)
                                                                //
                                                                // SOURCE OF TRUTH ARCHITECTURE (r018.65):
                                                                // - outputDS.getSelectedRecords() is the SINGLE SOURCE OF TRUTH for current selection
                                                                //   It correctly filters out removed records and stays in sync with user actions
                                                                // - effectiveRecords (from recordsRef.current) contains stale query results that may
                                                                //   include removed records, so it should only be used as a fallback when outputDS
                                                                //   has no selection (e.g., during query execution before selection is applied)
                                                                // - This ensures removed records are never accidentally included in accumulatedRecords
                                                                // DEBUG: Log state before capture to verify assumptions
                                                                const effectiveRecordsCountForRemove = (effectiveRecords === null || effectiveRecords === void 0 ? void 0 : effectiveRecords.length) || 0;
                                                                const outputDSSelectedRecordsForRemove = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
                                                                const outputDSSelectedCountForRemove = outputDSSelectedRecordsForRemove.length;
                                                                const accumulatedRecordsCountForRemove = (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-before-capture-remove',
                                                                    widgetId: props.widgetId,
                                                                    previousMode,
                                                                    newMode,
                                                                    effectiveRecordsCount: effectiveRecordsCountForRemove,
                                                                    outputDSSelectedCount: outputDSSelectedCountForRemove,
                                                                    accumulatedRecordsCount: accumulatedRecordsCountForRemove,
                                                                    outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                                                                    hasEffectiveRecords: effectiveRecords && effectiveRecords.length > 0,
                                                                    hasOutputDSSelected: outputDSSelectedRecordsForRemove.length > 0,
                                                                    timestamp: Date.now()
                                                                });
                                                                // FIX (r018.65): Use outputDS.getSelectedRecords() as source of truth for mode switching
                                                                // This correctly filters out removed records, unlike effectiveRecords which contains stale data
                                                                // outputDS.getSelectedRecords() is the single source of truth that stays in sync with removals
                                                                const recordsToCaptureForRemove = outputDSSelectedRecordsForRemove.length > 0
                                                                    ? outputDSSelectedRecordsForRemove
                                                                    : (effectiveRecords && effectiveRecords.length > 0
                                                                        ? effectiveRecords
                                                                        : []);
                                                                // DEBUG: Log which source was used
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-debug-after-capture-remove',
                                                                    widgetId: props.widgetId,
                                                                    recordsToCaptureCount: recordsToCaptureForRemove.length,
                                                                    source: outputDSSelectedRecordsForRemove.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                    effectiveRecordsCount: effectiveRecordsCountForRemove,
                                                                    outputDSSelectedCount: outputDSSelectedCountForRemove,
                                                                    timestamp: Date.now()
                                                                });
                                                                // DIAGNOSTIC: Check each condition individually (r018.78)
                                                                const conditionCheckRemove = {
                                                                    previousModeIsNew: previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newModeIsRemove: newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection,
                                                                    hasRecordsToCapture: recordsToCaptureForRemove.length > 0,
                                                                    hasOutputDS: !!outputDS,
                                                                    hasOnAccumulatedRecordsChange: !!onAccumulatedRecordsChange,
                                                                    previousMode: previousMode,
                                                                    newMode: newMode,
                                                                    recordsToCaptureLength: recordsToCaptureForRemove.length
                                                                };
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'mode-switch-condition-check-remove',
                                                                    widgetId: props.widgetId,
                                                                    conditions: conditionCheckRemove,
                                                                    allConditionsMet: conditionCheckRemove.previousModeIsNew &&
                                                                        conditionCheckRemove.newModeIsRemove &&
                                                                        conditionCheckRemove.hasRecordsToCapture &&
                                                                        conditionCheckRemove.hasOutputDS &&
                                                                        conditionCheckRemove.hasOnAccumulatedRecordsChange,
                                                                    timestamp: Date.now()
                                                                });
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection &&
                                                                    recordsToCaptureForRemove.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, recordsToCaptureForRemove, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch-to-remove',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCaptureForRemove.length,
                                                                        effectiveRecordsCount: effectiveRecordsCountForRemove,
                                                                        outputDSSelectedCount: outputDSSelectedCountForRemove,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length,
                                                                        sourceUsed: outputDSSelectedRecordsForRemove.length > 0 ? 'outputDS.getSelectedRecords()' : (effectiveRecords && effectiveRecords.length > 0 ? 'effectiveRecords' : 'none'),
                                                                        note: 'outputDS.getSelectedRecords()-is-source-of-truth-filters-removed-records'
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                else {
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'mode-switch-merge-skipped-remove',
                                                                        widgetId: props.widgetId,
                                                                        reason: 'condition-check-failed',
                                                                        conditions: conditionCheckRemove,
                                                                        timestamp: Date.now()
                                                                    });
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection, "aria-label": `${getI18nMessage('removeFromCurrentResults')}: ${((_d = getI18nMessage('resultsModeDesc').split('\n')[3]) === null || _d === void 0 ? void 0 : _d.trim()) || ''}`, title: (!accumulatedRecords || accumulatedRecords.length === 0)
                                                                ? getI18nMessage('resultsModeDisabledRemove')
                                                                : getI18nMessage('removeFromCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeRemove') })] })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `results-mode-description-${props.widgetId}`, className: "sr-only", "aria-live": "polite", role: "status", children: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection
                                                ? getI18nMessage('createNewResults')
                                                : resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection
                                                    ? getI18nMessage('addToCurrentResults')
                                                    : getI18nMessage('removeFromCurrentResults') })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
            `, children: [enabled && dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  min-height: 0;
                  overflow: hidden;
                `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_form__WEBPACK_IMPORTED_MODULE_6__.QueryTaskForm, Object.assign({}, otherProps, { configId: queryItem.configId, outputDS: outputDS, datasourceReady: dataSource != null, spatialFilterEnabled: spatialFilterEnabled, dataActionFilter: dataActionFilter, onFormSubmit: handleFormSubmit, initialInputValue: initialInputValue, onHashParameterUsed: onHashParameterUsed, queryItemShortId: queryItem.shortId, activeTab: activeTab, onTabChange: setActiveTab }), queryItem.configId) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.DataSourceTip, { widgetId: props.widgetId, useDataSource: queryItem.useDataSource, showMessage: true, onStatusChange: handleStatusChange, onDataSourceCreated: handleDataSourceCreated })] })] }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'results', title: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { children: [getI18nMessage('resultsTab'), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  margin-left: 6px;
                  font-size: 0.75rem;
                  opacity: 0.7;
                `, children: ["(", effectiveResultCount, ")"] }))] }), disabled: effectiveResultCount === 0, children: effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'results'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 0;
                height: 100%;
                padding-top: 0 !important;
              `, onClick: (e) => {
                                // Prevent clicks from bubbling up when Results tab is active
                                if (activeTab === 'results') {
                                    e.stopPropagation();
                                }
                            }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result__WEBPACK_IMPORTED_MODULE_7__.QueryTaskResult, { widgetId: props.widgetId, queryItem: queryItem, queryParams: queryParamRef.current, resultCount: effectiveResultCount, maxPerPage: (_e = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(dataSource), records: effectiveRecords, outputDS: outputDS, runtimeZoomToSelected: lastRuntimeZoomToSelectedRef.current, resultsMode: resultsMode, useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, eventManager: eventManager, isQuerySwitchInProgressRef: isQuerySwitchInProgressRef, onNavBack: (...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
                                    // Handle navigation from QueryTaskResult
                                    // If clearResults is true, clear everything and go to query tab
                                    // If false, just switch to query tab without clearing
                                    if (clearResults) {
                                        hasSelectedRecordsRef.current = false; // Reset flag when clearing
                                        yield navToForm(true);
                                    }
                                    else {
                                        // Just switch tabs, don't clear results
                                        // Mark as manual switch to prevent auto-switch useEffect from interfering
                                        manualTabSwitchRef.current = true;
                                        setActiveTab('query');
                                        // Reset the flag after a short delay
                                        setTimeout(() => {
                                            manualTabSwitchRef.current = false;
                                        }, 100);
                                    }
                                }) }, `${queryItem.configId}-${queryExecutionKeyRef.current}`) })) })] }), (selectionError || zoomError) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 0 16px;
          margin-top: 8px;
        `, children: [selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) })), zoomError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: zoomError, onDismiss: () => setZoomError(null) }))] })), stage === 2 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1000;
          background-color: rgba(255, 255, 255, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_loading_result__WEBPACK_IMPORTED_MODULE_17__.LoadingResult, {}) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-utils.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineFields: () => (/* binding */ combineFields),
/* harmony export */   executeCountQuery: () => (/* binding */ executeCountQuery),
/* harmony export */   executeQuery: () => (/* binding */ executeQuery),
/* harmony export */   generateQueryParams: () => (/* binding */ generateQueryParams),
/* harmony export */   getPopupTemplate: () => (/* binding */ getPopupTemplate),
/* harmony export */   isQueryInputValid: () => (/* binding */ isQueryInputValid),
/* harmony export */   sanitizeQueryInput: () => (/* binding */ sanitizeQueryInput),
/* harmony export */   sanitizeSqlExpression: () => (/* binding */ sanitizeSqlExpression)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared-code/common */ "./your-extensions/widgets/shared-code/common.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
function combineFields(resultDisplayFields, resultTitleExpression, idField) {
    const fields = new Set();
    resultDisplayFields === null || resultDisplayFields === void 0 ? void 0 : resultDisplayFields.forEach(item => fields.add(item));
    if (resultTitleExpression) {
        const templates = resultTitleExpression.match(/\{\w*\}/g);
        if ((templates === null || templates === void 0 ? void 0 : templates.length) > 0) {
            templates.forEach(item => fields.add(item.substring(1, item.length - 1)));
        }
    }
    if (idField) {
        fields.add(idField);
    }
    return Array.from(fields);
}
/**
 * Validates user input before query execution.
 * @param input - The raw user input (string, number, etc.)
 * @param isList - Optional flag indicating if the input is from a list/selector (lenient validation)
 * @returns boolean - true if input is valid, false otherwise
 */
function isQueryInputValid(input, isList = false) {
    // If it's a list-based selection (Unique Values, Field Values), 
    // we allow empty/null as it might represent "no filter" or the user 
    // intends to interact with the list.
    if (isList) {
        return true;
    }
    if (input === null || input === undefined) {
        return false;
    }
    // If it's a string, ensure it's not empty or just whitespace
    if (typeof input === 'string') {
        return input.trim() !== '';
    }
    // If it's an array (often used in unique values or multiple selection)
    if (Array.isArray(input)) {
        if (input.length === 0)
            return false;
        // Check if the first item is valid (usually {value: '...', label: '...'})
        const firstItem = input[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // If it's a jimu-core Immutable array
    if (input.asMutable && typeof input.toArray === 'function') {
        const arr = input.toArray();
        if (arr.length === 0)
            return false;
        const firstItem = arr[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // For other types (numbers, dates), if it exists, we count it as valid
    return true;
}
/**
 * Sanitizes user input for query tasks.
 * 1. Strips leading and trailing whitespace.
 * 2. Prevents basic SQL injection by escaping single quotes.
 * 3. Handles empty or whitespace-only strings.
 *
 * @param input - The raw user input string
 * @returns Sanitized string or null if input is empty
 */
function sanitizeQueryInput(input) {
    if (!input || typeof input !== 'string') {
        return null;
    }
    const trimmed = input.trim();
    if (trimmed === '') {
        return null;
    }
    // Basic SQL escaping: replace single quotes with double single quotes
    return trimmed.replace(/'/g, "''");
}
/**
 * Sanitizes all values within an IMSqlExpression object.
 *
 * @param sqlExpr - The raw SQL expression object
 * @returns A new sanitized IMSqlExpression object
 */
function sanitizeSqlExpression(sqlExpr) {
    if (!sqlExpr || !sqlExpr.parts) {
        return sqlExpr;
    }
    let sanitizedExpr = sqlExpr;
    sqlExpr.parts.forEach((part, index) => {
        var _a;
        if (part.type === 'SINGLE' && ((_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value) !== undefined) {
            const rawValue = part.valueOptions.value;
            // CASE 1: Simple String
            if (typeof rawValue === 'string') {
                const sanitizedValue = sanitizeQueryInput(rawValue);
                if (sanitizedValue !== rawValue) {
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedValue);
                }
            }
            // CASE 2: Array of objects (Unique Values / Dropdowns)
            // We must preserve the Immutable structure to avoid "asMutable" errors
            else if (Array.isArray(rawValue) || (rawValue && typeof rawValue.toArray === 'function')) {
                const isImmutable = typeof rawValue.toArray === 'function';
                const arr = isImmutable ? rawValue.toArray() : rawValue;
                let changed = false;
                const sanitizedArr = arr.map(item => {
                    if (item && typeof item === 'object' && 'value' in item && typeof item.value === 'string') {
                        const sanitizedVal = sanitizeQueryInput(item.value);
                        if (sanitizedVal !== item.value) {
                            changed = true;
                            return Object.assign(Object.assign({}, item), { value: sanitizedVal });
                        }
                    }
                    return item;
                });
                if (changed) {
                    // If it was Immutable, we should ideally use Immutable methods to update,
                    // but setIn on the top-level expression with a plain array/object 
                    // usually triggers the framework's auto-conversion.
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedArr);
                }
            }
        }
    });
    return sanitizedExpr;
}
function getPopupTemplate(outputDS, queryItem) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const { resultFieldsType, resultDisplayFields, resultTitleExpression = '' } = queryItem;
        const currentOriginDs = outputDS.getOriginDataSources()[0];
        const popupInfo = currentOriginDs.getPopupInfo();
        if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
            let fields;
            if (resultDisplayFields == null) {
                const fieldsInContent = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.getFieldInfosInPopupContent)(popupInfo);
                if (fieldsInContent.length > 0) {
                    const uniqueFields = new Set(fieldsInContent.map(ele => ele.fieldName));
                    fields = Array.from(uniqueFields);
                }
                else {
                    // return all fields by default
                    const allFieldsSchema = outputDS.getSchema();
                    fields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
                }
            }
            else {
                fields = resultDisplayFields.asMutable({ deep: true });
            }
            if (popupInfo) {
                const fieldInfos = [];
                fields.forEach(field => {
                    const fieldInfo = popupInfo.fieldInfos.find(fieldInfo => fieldInfo.fieldName === field);
                    if (fieldInfo) {
                        fieldInfo.visible = true;
                        fieldInfos.push(fieldInfo);
                    }
                    else {
                        fieldInfos.push({
                            fieldName: field,
                            label: field
                        });
                    }
                });
                return {
                    popupTemplate: {
                        fieldInfos,
                        content: [{
                                type: 'fields'
                            }],
                        title: resultTitleExpression
                    }
                };
            }
            return {
                popupTemplate: {
                    fieldInfos: fields.map(field => ({
                        fieldName: field,
                        label: field
                    })),
                    content: [{
                            type: 'fields'
                        }],
                    title: resultTitleExpression
                }
            };
        }
        // the source layer will provide popup info
        let layerObject;
        if (currentOriginDs.layer) {
            layerObject = currentOriginDs.layer;
        }
        else {
            layerObject = yield currentOriginDs.createJSAPILayerByDataSource();
        }
        if (layerObject) {
            yield layerObject.load();
        }
        return { defaultPopupTemplate: ((_a = layerObject === null || layerObject === void 0 ? void 0 : layerObject.associatedLayer) === null || _a === void 0 ? void 0 : _a.defaultPopupTemplate) || (layerObject === null || layerObject === void 0 ? void 0 : layerObject.defaultPopupTemplate) };
    });
}
function generateQueryParams(outputDS, sqlExpr, spatialFilter, queryItem, page, pageSize) {
    var _a, _b, _c, _d, _e;
    const currentQueryDsJson = outputDS.getDataSourceJson();
    const currentOriginDs = outputDS.getOriginDataSources()[0];
    const isLocalDs = currentQueryDsJson === null || currentQueryDsJson === void 0 ? void 0 : currentQueryDsJson.isDataInDataSourceInstance;
    if (isLocalDs) {
        outputDS.setSourceRecords(currentOriginDs.getSourceRecords());
    }
    const { useAttributeFilter, useSpatialFilter, sortOptions, resultFieldsType, resultDisplayFields, resultTitleExpression } = queryItem;
    // DETERMINE MINIMAL FIELDS (The "Field Shredder" Optimization)
    // To achieve performance parity with Web AppBuilder, we must avoid fetching every 
    // column in the database (* or all). We surgically request only the fields 
    // needed for the Title, the Attribute List, and the ID field.
    let outputFields = [];
    if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes && resultDisplayFields) {
        outputFields = combineFields(resultDisplayFields, resultTitleExpression || '', outputDS.getIdField());
    }
    else {
        // Popup mode: Get only visible fields from popup info
        const popupInfo = currentOriginDs.getPopupInfo();
        const fieldNames = Object.values((_a = currentOriginDs.getSchema().fields) !== null && _a !== void 0 ? _a : {}).map(f => f.name);
        const validFieldInfos = (_b = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) === null || _b === void 0 ? void 0 : _b.filter(fieldInfo => fieldInfo.visible !== false && fieldNames.includes(fieldInfo.fieldName));
        outputFields = (validFieldInfos === null || validFieldInfos === void 0 ? void 0 : validFieldInfos.map(fieldInfo => fieldInfo.fieldName)) || [];
        // Always ensure ID field is included
        const idField = outputDS.getIdField();
        if (idField && !outputFields.includes(idField)) {
            outputFields.push(idField);
        }
    }
    const mergedQueryParams = outputDS.mergeQueryParams((_c = currentOriginDs.getCurrentQueryParams()) !== null && _c !== void 0 ? _c : {}, {
        where: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpr, outputDS).sql : '1=1',
        sqlExpression: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? sqlExpr : null,
        // FORCE minimal fields here to override any framework "*" or "all"
        outFields: outputFields
    });
    // PERFORMANCE OPTIMIZATION: Universal SQL Optimizer
    // We normalize the user's input to UPPERCASE to ensure case-insensitivity while 
    // unwrapping any LOWER() function around the field name. This allows the database 
    // to use its attribute indexes (SARGable query).
    if (mergedQueryParams.where && mergedQueryParams.where.includes('LOWER(')) {
        const optimizedWhere = mergedQueryParams.where.replace(/LOWER\(([^)]+)\)\s*(=|LIKE)\s*'([^']*)'/gi, (match, field, operator, value) => {
            // Normalize both sides to UPPERCASE. This works for ANY field name.
            // We keep the field name "naked" so the index is used.
            return `${field} ${operator} '${value.toUpperCase()}'`;
        });
        if (optimizedWhere !== mergedQueryParams.where) {
            debugLogger.log('TASK', {
                event: 'sql-optimized',
                original: mergedQueryParams.where,
                optimized: optimizedWhere
            });
            mergedQueryParams.where = optimizedWhere;
        }
    }
    // compose query params for query
    const queryParams = Object.assign({ 
        // url: ds.url,
        returnGeometry: true, 
        /**
         * PERFORMANCE OPTIMIZATION: Force lower precision for all display queries.
         */
        maxAllowableOffset: 0.1, page, 
        // Limit pageSize to a sane default if not provided or too large
        pageSize: (pageSize && pageSize < 1000) ? pageSize : 1000 }, mergedQueryParams);
    // Final override to ensure no "*" leaks through from any merge operation
    if (!queryParams.outFields || queryParams.outFields.includes('*')) {
        queryParams.outFields = outputFields;
    }
    // Diagnostic log: Show exactly WHICH fields are being sent
    debugLogger.log('TASK', {
        event: 'requesting-data',
        fieldsCount: (_d = queryParams.outFields) === null || _d === void 0 ? void 0 : _d.length,
        fields: (_e = queryParams.outFields) === null || _e === void 0 ? void 0 : _e.join(', '),
        pageSize: queryParams.pageSize,
        offset: queryParams.maxAllowableOffset
    });
    if (useSpatialFilter && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.geometry)) {
        const { geometry, relation = _config__WEBPACK_IMPORTED_MODULE_1__.SpatialRelation.Intersect, buffer } = spatialFilter;
        const spatialQueryParams = {
            geometryType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(geometry.type),
            geometry: geometry.toJSON(),
            spatialRel: _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPISpatialRelToDsSpatialRel[relation],
            distance: buffer === null || buffer === void 0 ? void 0 : buffer.distance,
            units: (buffer === null || buffer === void 0 ? void 0 : buffer.unit) ? _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPIUnitToDsUnit[buffer.unit] : undefined
        };
        Object.assign(queryParams, spatialQueryParams);
    }
    if ((sortOptions === null || sortOptions === void 0 ? void 0 : sortOptions.length) > 0) {
        Object.assign(queryParams, {
            orderByFields: sortOptions.map(item => `${item.jimuFieldName} ${item.order}`)
        });
    }
    return queryParams;
}
function executeCountQuery(widgetId, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield outputDS.loadCount(queryParams, { widgetId, refresh: true });
        return result != null ? result : 0;
    });
}
function executeQuery(widgetId, queryItem, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const popupInfo = outputDS.getPopupInfo();
        const layerDefinition = outputDS.getLayerDefinition();
        const getDefaultFieldInfos = () => {
            var _a;
            return [
                { fieldName: (_a = layerDefinition === null || layerDefinition === void 0 ? void 0 : layerDefinition.objectIdField) !== null && _a !== void 0 ? _a : 'objectid', label: 'OBJECTID', tooltip: '', visible: true }
            ];
        };
        const fieldInfos = ((fieldInfos) => (fieldInfos.length ? fieldInfos : getDefaultFieldInfos()))(((popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) || []).filter((i) => i.visible));
        // const fields = outputDS.getSchema()?.fields
        // let selectedFieldNames
        // if (queryItem.resultFieldsType === FieldsType.SelectAttributes) {
        //   selectedFieldNames = [].concat(queryItem.resultDisplayFields, queryItem.resultTitleFields)
        // } else {
        //   selectedFieldNames = fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        // }
        // const selectedFieldJimuNames = fields
        //   ? Object.keys(fields).filter((jimuName) => selectedFieldNames.includes(fields[jimuName].name))
        //   : []
        // outputDS.setSelectedFields(selectedFieldJimuNames)
        const startTime = performance.now();
        let records = yield outputDS.load(queryParams, { widgetId });
        const fetchTime = performance.now() - startTime;
        if (records == null) {
            records = [];
        }
        const originDs = outputDS.getOriginDataSources()[0];
        const layerStartTime = performance.now();
        const layerObject = yield getLayerObject(originDs);
        const layerTime = performance.now() - layerStartTime;
        debugLogger.log('TASK', {
            event: 'query-complete',
            fetchTime: Math.round(fetchTime),
            layerTime: Math.round(layerTime),
            totalTime: Math.round(performance.now() - startTime),
            recordCount: records.length
        });
        records.forEach((record) => {
            const feature = record.feature;
            if (layerObject) {
                feature.sourceLayer = layerObject.associatedLayer || layerObject;
            }
            feature.layer = feature.sourceLayer;
        });
        const queryResult = {
            records,
            fields: fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        };
        // publish message
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordSetChangeMessage(widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.RecordSetChangeType.CreateUpdate, [{
                records: outputDS.getAllLoadedRecords(),
                fields: queryResult.fields,
                dataSource: outputDS,
                name: outputDS.id,
                label: outputDS.getLabel()
            }]);
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        return queryResult;
    });
}
function getLayerObject(dataSource) {
    return __awaiter(this, void 0, void 0, function* () {
        const layerObject = yield dataSource.createJSAPILayerByDataSource();
        // layerObject may be undefined if the data source is added by URL
        if (layerObject) {
            yield layerObject.load();
        }
        return layerObject;
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearAccumulatedResults: () => (/* binding */ clearAccumulatedResults),
/* harmony export */   createAccumulatedResultsDataSource: () => (/* binding */ createAccumulatedResultsDataSource),
/* harmony export */   getRecordKey: () => (/* binding */ getRecordKey),
/* harmony export */   mergeResultsIntoAccumulated: () => (/* binding */ mergeResultsIntoAccumulated),
/* harmony export */   removeRecordsFromOriginSelections: () => (/* binding */ removeRecordsFromOriginSelections),
/* harmony export */   removeResultsFromAccumulated: () => (/* binding */ removeResultsFromAccumulated)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/**
 * Utility functions for managing results accumulation in QuerySimple widget.
 * Handles "Add to" and "Remove from" modes for accumulating query results.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Generates a composite key for a record that includes both origin data source ID and objectId.
 * This ensures uniqueness across different layers that may have the same objectId.
 *
 * @param record - The feature data record
 * @param outputDS - The output data source containing the record
 * @returns Composite key string: `${originDSId}_${objectId}`
 */
function getRecordKey(record, outputDS) {
    var _a;
    const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
    const originDSId = (originDS === null || originDS === void 0 ? void 0 : originDS.id) || outputDS.id; // Fallback to outputDS if no origin
    const objectId = record.getId();
    const key = `${originDSId}_${objectId}`;
    debugLogger.log('RESULTS-MODE', {
        event: 'record-key-generated',
        originDSId,
        objectId,
        key,
        hasOriginDS: !!originDS
    });
    return key;
}
/**
 * Creates an accumulated results data source for storing merged query results.
 * This data source is widget-level and persists across multiple queries.
 *
 * @param widgetId - The widget ID
 * @param originDS - The origin data source to use as the base
 * @returns The created accumulated results data source
 */
function createAccumulatedResultsDataSource(widgetId, originDS) {
    return __awaiter(this, void 0, void 0, function* () {
        const accumulatedDSId = `${widgetId}_accumulated_results`;
        debugLogger.log('RESULTS-MODE', {
            event: 'creating-accumulated-ds',
            widgetId,
            accumulatedDSId,
            originDSId: originDS.id
        });
        // Check if data source already exists
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        let accumulatedDS = dsManager.getDataSource(accumulatedDSId);
        if (accumulatedDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-ds-already-exists',
                accumulatedDSId
            });
            return accumulatedDS;
        }
        // Get origin data source JSON to create output data source
        const originDataSourceJson = originDS.getDataSourceJson();
        // Create output data source JSON similar to how query items create output DS
        const outputDataSourceJson = {
            id: accumulatedDSId,
            label: 'Accumulated Results',
            type: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.type,
            geometryType: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.geometryType,
            url: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.url,
            itemId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.itemId,
            portalUrl: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.portalUrl,
            originDataSources: [{
                    dataSourceId: originDS.id,
                    mainDataSourceId: originDS.id,
                    rootDataSourceId: originDS.id
                }],
            layerId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.layerId,
            isDataInDataSourceInstance: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.isDataInDataSourceInstance,
            isOutputFromWidget: true
        };
        // Create the data source using DataSourceManager
        // Note: This follows the pattern from setting.tsx for creating output data sources
        accumulatedDS = dsManager.createDataSourceByDataSourceJson(outputDataSourceJson);
        // Set initial status
        accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        debugLogger.log('RESULTS-MODE', {
            event: 'accumulated-ds-created',
            accumulatedDSId,
            originDSId: originDS.id,
            status: accumulatedDS.getStatus()
        });
        return accumulatedDS;
    });
}
/**
 * Merges new query results with existing records.
 * Deduplicates records using composite keys (originDSId_objectId).
 *
 * This function merges new records with existing records that were captured
 * before the query executed. The caller is responsible for storing the merged
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param newRecords - New records to merge in
 * @param existingRecords - Existing records captured before query execution (optional, defaults to empty array)
 * @returns Array of all merged records (existing + new unique records)
 */
function mergeResultsIntoAccumulated(outputDS, newRecords, existingRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'merging-results-start',
        outputDSId: outputDS.id,
        existingRecordsCount: existingRecords.length,
        newRecordsCount: newRecords.length
    });
    // Build Set of existing record keys for fast lookup
    const existingKeys = new Set(existingRecords.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'existing-records-check',
        existingRecordsCount: existingRecords.length,
        existingKeysCount: existingKeys.size
    });
    // Filter new records to only include those not already in output DS
    const uniqueNewRecords = newRecords.filter(record => {
        const key = getRecordKey(record, outputDS);
        const isDuplicate = existingKeys.has(key);
        if (isDuplicate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'duplicate-record-skipped',
                key,
                objectId: record.getId()
            });
        }
        return !isDuplicate;
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'deduplication-complete',
        newRecordsCount: newRecords.length,
        uniqueNewRecordsCount: uniqueNewRecords.length,
        duplicatesSkipped: newRecords.length - uniqueNewRecords.length
    });
    // Merge records
    const mergedRecords = [...existingRecords, ...uniqueNewRecords];
    debugLogger.log('RESULTS-MODE', {
        event: 'merge-complete',
        totalRecordsAfterMerge: mergedRecords.length,
        existingCount: existingRecords.length,
        newUniqueCount: uniqueNewRecords.length
    });
    return mergedRecords;
}
/**
 * Removes matching records from widget-level accumulated records.
 * Matches records using composite keys (originDSId_objectId).
 *
 * This function removes records from existing accumulated records that were captured
 * before the query executed. The caller is responsible for storing the remaining
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param recordsToRemove - Records to remove (from query results)
 * @param existingAccumulatedRecords - Existing accumulated records captured before query execution (optional, defaults to empty array)
 * @returns Array of remaining records after removal
 */
function removeResultsFromAccumulated(outputDS, recordsToRemove, existingAccumulatedRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-results-start',
        outputDSId: outputDS.id,
        recordsToRemoveCount: recordsToRemove.length,
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length
    });
    // If no accumulated records, nothing to remove
    if (existingAccumulatedRecords.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-accumulated-records-to-remove',
            outputDSId: outputDS.id
        });
        return [];
    }
    // If no records to remove, return existing records unchanged
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove',
            outputDSId: outputDS.id,
            existingAccumulatedRecordsCount: existingAccumulatedRecords.length
        });
        return existingAccumulatedRecords;
    }
    // Build Set of keys to remove for fast lookup
    const removeKeys = new Set(recordsToRemove.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'remove-keys-built',
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length,
        removeKeysCount: removeKeys.size
    });
    // Filter out records that match keys to remove
    const remainingRecords = [];
    const removedRecords = [];
    existingAccumulatedRecords.forEach(record => {
        var _a, _b, _c, _d;
        const key = getRecordKey(record, outputDS);
        const shouldRemove = removeKeys.has(key);
        if (shouldRemove) {
            removedRecords.push(record);
            debugLogger.log('RESULTS-MODE', {
                event: 'record-marked-for-removal',
                key,
                objectId: record.getId(),
                originDSId: ((_d = (_c = (_b = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record)) === null || _b === void 0 ? void 0 : _b.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.id) || 'unknown'
            });
        }
        else {
            remainingRecords.push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removal-complete',
        recordsRemoved: removedRecords.length,
        remainingRecordsCount: remainingRecords.length,
        recordsToRemoveCount: recordsToRemove.length,
        matchedRecordsCount: removedRecords.length,
        unmatchedRecordsCount: recordsToRemove.length - removedRecords.length
    });
    return remainingRecords;
}
/**
 * Removes records from origin data source selections.
 * Groups records by their origin data source and updates each origin DS's selection separately.
 * This ensures map selection is updated correctly when records come from multiple origin layers.
 * Also removes graphics from graphics layer if using graphics layer highlighting.
 *
 * @param widgetId - The widget ID for publishing messages
 * @param recordsToRemove - Records to remove from selection
 * @param outputDS - The output data source (used for key generation)
 * @param useGraphicsLayer - Whether to remove graphics from graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function removeRecordsFromOriginSelections(widgetId, recordsToRemove, outputDS, useGraphicsLayer, graphicsLayer) {
    var _a, _b;
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-start',
        widgetId,
        recordsToRemoveCount: recordsToRemove.length,
        outputDSId: outputDS.id,
        useGraphicsLayer: !!useGraphicsLayer,
        hasGraphicsLayer: !!graphicsLayer
    });
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove-from-selection',
            widgetId
        });
        return;
    }
    // Remove from graphics layer if using graphics layer highlighting
    if (useGraphicsLayer && graphicsLayer) {
        const recordIdsToRemove = recordsToRemove.map(record => record.getId());
        // FIX (r018.82): Capture TRUE "before" state BEFORE removing graphics
        const graphicsBeforeRemoval = [];
        const firstFewGraphicsAttrs = [];
        (_a = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _a === void 0 ? void 0 : _a.forEach((g, index) => {
            var _a;
            if (index < 3) {
                firstFewGraphicsAttrs.push({
                    index,
                    hasAttributes: !!g.attributes,
                    attributes: g.attributes,
                    attributeKeys: g.attributes ? Object.keys(g.attributes) : []
                });
            }
            graphicsBeforeRemoval.push(((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId) || null);
        });
        debugLogger.log('RESULTS-MODE', {
            event: 'removing-graphics-TRUE-BEFORE-state',
            widgetId,
            recordIdsToRemove,
            graphicsLayerCountBefore: graphicsLayer.graphics.length,
            graphicsLayerIdsBefore: graphicsBeforeRemoval.slice(0, 110),
            firstFewGraphicsAttrs,
            timestamp: Date.now()
        });
        (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__.removeHighlightGraphics)(graphicsLayer, recordIdsToRemove);
        // FIX (r018.82): Capture TRUE "after" state AFTER removing graphics
        const graphicsAfterRemoval = [];
        (_b = graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics) === null || _b === void 0 ? void 0 : _b.forEach((g) => {
            var _a;
            graphicsAfterRemoval.push(((_a = g.attributes) === null || _a === void 0 ? void 0 : _a.recordId) || null);
        });
        debugLogger.log('RESULTS-MODE', {
            event: 'removing-graphics-TRUE-AFTER-state',
            widgetId,
            graphicsLayerCountAfter: graphicsLayer.graphics.length,
            graphicsLayerIdsAfter: graphicsAfterRemoval.slice(0, 110),
            actuallyRemoved: graphicsBeforeRemoval.length - graphicsAfterRemoval.length,
            expectedToRemove: recordIdsToRemove.length,
            removalMatches: (graphicsBeforeRemoval.length - graphicsAfterRemoval.length) === recordIdsToRemove.length,
            timestamp: Date.now()
        });
    }
    // Group records by their origin data source
    const recordsByOriginDS = new Map();
    recordsToRemove.forEach(record => {
        var _a, _b, _c;
        const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
        let originDS = null;
        if (recordDS) {
            originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
        }
        else {
            // Fallback: try to get origin from outputDS
            originDS = ((_c = outputDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || null;
        }
        if (originDS) {
            if (!recordsByOriginDS.has(originDS)) {
                recordsByOriginDS.set(originDS, []);
            }
            recordsByOriginDS.get(originDS).push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'records-grouped-by-origin',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        recordsByOriginDS: Array.from(recordsByOriginDS.entries()).map(([ds, records]) => ({
            originDSId: ds.id,
            recordCount: records.length
        }))
    });
    // For each origin DS, get current selection and remove matching records
    recordsByOriginDS.forEach((recordsToRemoveForOrigin, originDS) => {
        try {
            // Get current selected records from this origin DS
            const currentSelectedRecords = originDS.getSelectedRecords() || [];
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'processing-origin-ds-removal',
                widgetId,
                originDSId: originDS.id,
                currentSelectedCount: currentSelectedRecords.length,
                recordsToRemoveCount: recordsToRemoveForOrigin.length
            });
            // Build Set of IDs to remove for fast lookup
            const idsToRemove = new Set(recordsToRemoveForOrigin.map(record => record.getId()));
            // Filter out records that match IDs to remove
            const remainingRecords = currentSelectedRecords.filter(record => {
                const recordId = record.getId();
                return !idsToRemove.has(recordId);
            });
            const remainingIds = remainingRecords.map(record => record.getId());
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-filtered',
                widgetId,
                originDSId: originDS.id,
                removedCount: currentSelectedRecords.length - remainingRecords.length,
                remainingCount: remainingRecords.length
            });
            // Update selection in origin DS
            if (typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(remainingIds, remainingRecords);
            }
            // Publish selection change message for this origin DS
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, remainingRecords, [originDS.id]));
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-selection-updated',
                widgetId,
                originDSId: originDS.id,
                remainingRecordsCount: remainingRecords.length,
                messagePublished: true
            });
        }
        catch (error) {
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-error',
                widgetId,
                originDSId: originDS.id,
                error: error instanceof Error ? error.message : 'Unknown error',
                errorStack: error instanceof Error ? error.stack : undefined
            });
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-complete',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        totalRecordsRemoved: recordsToRemove.length
    });
}
/**
 * Clears all records from the accumulated results data source.
 *
 * @param accumulatedDS - The accumulated results data source to clear
 */
function clearAccumulatedResults(accumulatedDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'clearing-accumulated-results',
        accumulatedDSId: accumulatedDS.id
    });
    // Set status to NotReady to clear records
    accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    // Clear any loaded records if possible
    // Note: May need to use DataSourceManager methods depending on ExB API
    debugLogger.log('RESULTS-MODE', {
        event: 'accumulated-results-cleared',
        accumulatedDSId: accumulatedDS.id
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QUERYSIMPLE_SELECTION_EVENT: () => (/* binding */ QUERYSIMPLE_SELECTION_EVENT),
/* harmony export */   clearSelectionInDataSources: () => (/* binding */ clearSelectionInDataSources),
/* harmony export */   dispatchSelectionEvent: () => (/* binding */ dispatchSelectionEvent),
/* harmony export */   findClearResultsButton: () => (/* binding */ findClearResultsButton),
/* harmony export */   getOriginDataSource: () => (/* binding */ getOriginDataSource),
/* harmony export */   publishSelectionMessage: () => (/* binding */ publishSelectionMessage),
/* harmony export */   selectRecordsAndPublish: () => (/* binding */ selectRecordsAndPublish),
/* harmony export */   selectRecordsInDataSources: () => (/* binding */ selectRecordsInDataSources)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing feature selection in QuerySimple widget.
 * Consolidates repeated selection logic to follow DRY principles.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify Widget of selection changes.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
/**
 * Dispatches a custom selection event to the window so the main Widget can track state.
 *
 * @param widgetId - The widget ID
 * @param recordIds - Array of selected record IDs
 * @param outputDS - The output data source
 * @param queryItemConfigId - The config ID of the query that produced these results
 * @param eventManager - Optional EventManager instance for comparison logging (Chunk 7.1)
 */
function dispatchSelectionEvent(widgetId, recordIds, outputDS, queryItemConfigId, eventManager) {
    const originDS = getOriginDataSource(outputDS);
    const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
    debugLogger.log('TASK', {
        event: 'dispatchSelectionEvent',
        widgetId,
        recordCount: recordIds.length,
        outputDsId: outputDS.id,
        queryItemConfigId
    });
    // Chunk 7: Dispatch selection event via EventManager (r018.59)
    if (eventManager) {
        eventManager.dispatchSelectionEvent(widgetId, recordIds, dataSourceId, outputDS.id, queryItemConfigId);
    }
}
/**
 * Gets the origin data source from an output data source.
 * @param outputDS - The output data source
 * @returns The origin data source, or null if not available
 */
function getOriginDataSource(outputDS) {
    if (!outputDS)
        return null;
    // Try to get origin data sources
    const originDataSources = typeof outputDS.getOriginDataSources === 'function'
        ? outputDS.getOriginDataSources()
        : [];
    if (originDataSources && originDataSources.length > 0) {
        return originDataSources[0];
    }
    // If it doesn't have origin data sources, it might already be an origin data source
    // FeatureLayerDataSource should have a 'layer' property or 'getLayer' method
    if (outputDS.layer || outputDS.getLayer || outputDS.type === 'FeatureLayer') {
        return outputDS;
    }
    return null;
}
/**
 * Selects records in both the origin data source and output data source.
 * This is the standard pattern used throughout the widget for selection.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Optional array of FeatureDataRecord objects for proper highlighting
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsInDataSources(outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (outputDS, recordIds, records, useGraphicsLayer = false, graphicsLayer, mapView) {
        var _a, _b, _c, _d, _e, _f;
        if (!outputDS)
            return;
        const originDS = getOriginDataSource(outputDS);
        // If using graphics layer, add graphics for highlighting
        if (useGraphicsLayer && graphicsLayer && mapView && records && records.length > 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-graphics-layer',
                recordIdsCount: recordIds.length,
                recordsCount: records.length,
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.addHighlightGraphics)(graphicsLayer, records, mapView);
            // Still select in data source for state management (but layer selection won't show if layer is off)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        else {
            // Original behavior: use layer selection
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-layer-selection',
                recordIdsCount: recordIds.length,
                useGraphicsLayer,
                hasGraphicsLayer: !!graphicsLayer,
                hasMapView: !!mapView,
                timestamp: Date.now()
            });
            // Select in origin data source (the actual layer)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                // Log layer state right before selection to see what's available when selection works
                const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
                if (layer) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'selectRecordsByIds-layer-state',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        hasLayerMap: !!layer.map,
                        hasLayerView: !!layer.view,
                        hasLayerParent: !!layer.parent,
                        parentType: ((_c = layer.parent) === null || _c === void 0 ? void 0 : _c.type) || 'none',
                        parentHasMap: !!((_d = layer.parent) === null || _d === void 0 ? void 0 : _d.map),
                        parentHasView: !!((_e = layer.parent) === null || _e === void 0 ? void 0 : _e.view),
                        parentHasViews: !!((_f = layer.parent) === null || _f === void 0 ? void 0 : _f.views),
                        timestamp: Date.now()
                    });
                }
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        // Always update outputDS for widget's internal state
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, records);
        }
    });
}
/**
 * Clears the `data_s` parameter from the URL hash.
 * Experience Builder automatically adds `data_s` when selections are made,
 * but doesn't remove it when selections are cleared, causing "dirty hash" issues.
 *
 * This function ensures the hash is clean when selections are cleared.
 */
function clearDataSParameterFromHash() {
    const hash = window.location.hash.substring(1);
    if (!hash)
        return;
    const urlParams = new URLSearchParams(hash);
    if (urlParams.has('data_s')) {
        urlParams.delete('data_s');
        const newHash = urlParams.toString();
        debugLogger.log('HASH', {
            event: 'clearDataSParameterFromHash',
            hadDataS: true,
            newHash: newHash ? `#${newHash}` : '(empty)',
            timestamp: Date.now()
        });
        // Update the URL without triggering a reload
        // Always preserve pathname and query string, only update hash
        window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
    }
}
/**
 * Clears selection in both the origin data source and output data source.
 * Optionally clears graphics layer if using graphics layer mode.
 * Also clears the `data_s` parameter from the URL hash to prevent "dirty hash" issues.
 *
 * @param widgetId - The widget ID (needed to publish message)
 * @param outputDS - The output data source
 * @param useGraphicsLayer - Whether to clear graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function clearSelectionInDataSources(widgetId_1, outputDS_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, useGraphicsLayer = false, graphicsLayer) {
        // Clear graphics layer if using graphics layer mode
        if (useGraphicsLayer && graphicsLayer) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'clearSelectionInDataSources-clearing-graphics-layer',
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.clearGraphicsLayer)(graphicsLayer);
        }
        // Clear data source selection for state management
        yield selectRecordsInDataSources(outputDS, [], undefined, false);
        // Publish the empty selection message so the Map selection (blue boxes) clears
        if (outputDS) {
            publishSelectionMessage(widgetId, [], outputDS, true);
        }
        // Clear data_s parameter from hash to prevent dirty hash
        // Experience Builder adds data_s when selections are made but doesn't remove it when cleared
        clearDataSParameterFromHash();
    });
}
/**
 * Publishes a selection change message for the given records and data sources.
 *
 * @param widgetId - The widget ID
 * @param records - Array of FeatureDataRecord objects (empty array to clear)
 * @param outputDS - The output data source
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS = false) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    if (originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [originDS.id]));
    }
    else if (alsoPublishToOutputDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
    // Optionally publish to outputDS as well (for some edge cases)
    if (alsoPublishToOutputDS && originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
}
/**
 * Selects records and publishes the selection message in one call.
 * This is the most common pattern - selecting records and notifying the map.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Array of FeatureDataRecord objects for proper highlighting
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsAndPublish(widgetId_1, outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, recordIds, records, alsoPublishToOutputDS = false, useGraphicsLayer = false, graphicsLayer, mapView) {
        yield selectRecordsInDataSources(outputDS, recordIds, records, useGraphicsLayer, graphicsLayer, mapView);
        publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS);
    });
}
/**
 * Finds the "Clear results" button in the DOM.
 * Used when programmatically triggering the clear action.
 *
 * @returns The clear button element, or null if not found
 */
function findClearResultsButton() {
    // Hardened: Prioritize the one in the results header, fallback to any
    return (document.querySelector('.query-result__header button[aria-label="Clear results"]') ||
        document.querySelector('button[aria-label="Clear results"]'));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleList: () => (/* binding */ SimpleList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    flex: 1 1 ${isAutoHeight ? 'auto' : 0};
    overflow: auto;
    max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      flex-direction: column;
      .list-items {
        position: relative;
        flex-direction: column;
      }

      .feature-info-component {
        width: 100%;
      }

      .query-result-item + .query-result-item {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    .list-items {
      display: flex;
    }
  `;
};
function SimpleList(props) {
    const { widgetId, outputDS, queryItem, records, direction, onEscape, onSelectChange, onRemove, expandByDefault, itemExpandStates, removedRecordIds, onRenderDone } = props;
    const [popupTemplate, setPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_5__.useAutoHeight)();
    const resultContainerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    // Filter out removed records
    const filteredRecords = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (records === null || records === void 0 ? void 0 : records.filter(record => !(removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.has(record.getId())))) || [];
    }, [records, removedRecordIds]);
    // Notify parent when records are rendered (for auto-switch logic)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (onRenderDone && filteredRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'SimpleList-onRenderDone-called',
                widgetId,
                queryItemConfigId: queryItem.configId,
                filteredRecordsCount: filteredRecords.length,
                totalRecordsCount: records.length,
                removedRecordIdsCount: (removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.size) || 0,
                timestamp: Date.now()
            });
            onRenderDone({ dataItems: filteredRecords });
        }
    }, [filteredRecords, onRenderDone, widgetId, queryItem.configId, records.length, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_4__.getPopupTemplate)(outputDS, queryItem).then(rs => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_2__.ListDirection.Vertical }), css: getStyle(isAutoHeight), ref: resultContainerRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-items px-4 py-1', role: 'listbox', children: filteredRecords.map((dataItem) => {
                const recordId = dataItem.getId();
                // Use individual state from map if available, otherwise fall back to expandByDefault
                const individualExpandState = itemExpandStates === null || itemExpandStates === void 0 ? void 0 : itemExpandStates.get(recordId);
                const expandByDefaultValue = individualExpandState !== undefined ? individualExpandState : (expandByDefault !== null && expandByDefault !== void 0 ? expandByDefault : true);
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_3__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: expandByDefaultValue, onClick: onSelectChange, onRemove: onRemove }, recordId));
            }) }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'QuerySimple',
    reset: 'Reset',
    searchLayer: 'Search Layer',
    apply: 'Search',
    noDataAvailable: 'Error in loading data',
    noQueryItem: 'No query',
    newQueryHint: 'Add content by clicking the "{label}" button on the configuration panel',
    attributeFilter: 'Attribute filter',
    spatialFilter: 'Spatial filter',
    spatialFilterType_CurrentMapExtent: 'Current map extent',
    spatialFilterType_InteractiveDrawMode: 'Drawn graphic',
    results: 'Results',
    featuresDisplayed: 'Features displayed',
    clearResult: 'Clear all results',
    checkResult: 'Check results',
    mapMustBeVisible: 'Map must be visible',
    chooseFilterType: 'Choose the filter type',
    chooseGeometryType: 'Choose the geometry type',
    clearDrawing: 'Clear the graphic when applying',
    featureFromDs: 'Selecting features from data source',
    featureFromMap: 'Geometries from a map',
    chooseFilterLayer: 'Choose a filter layer',
    selectedRecords: '{num} records are selected for the filter',
    spatialNotAvailable: 'Spatial filter is not available here.',
    spatialNotAvailableDesc: 'Spatial filter is not supported for a data source that already contains a spatial query.',
    preconfigured: 'Preconfigured',
    runtime: 'Runtime',
    selectLoaded: 'Select loaded',
    retrieving: 'Retrieving query results...',
    zoomToSelected: 'Zoom to selected',
    queryTab: 'Query',
    resultsTab: 'Results',
    expandAll: 'Expand all',
    collapseAll: 'Collapse all',
    addToMap: 'Add to map',
    resultsMode: 'Results mode',
    createNewResults: 'Create new results',
    addToCurrentResults: 'Add to current results',
    removeFromCurrentResults: 'Remove from current results',
    resultsModeDisabledRemove: 'Remove from current results (no accumulated results)',
    resultsModeDesc: 'Controls how query results are combined:\n New: Each query replaces previous results\n Add: New results are added to existing results\n Remove: Matching results are removed from existing results',
    resultsModeNew: 'New',
    resultsModeAdd: 'Add',
    resultsModeRemove: 'Remove'
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx":
/*!****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoHeight: () => (/* binding */ useAutoHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/** @jsx jsx */



function useAutoHeight() {
    const layoutInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_widget_context__WEBPACK_IMPORTED_MODULE_2__.QueryWidgetContext);
    let layoutId;
    let layoutItemId;
    if (layoutInfo.includes(':')) {
        const r = layoutInfo.split(':');
        layoutId = r[0];
        layoutItemId = r[1];
    }
    const isAuto = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c, _d;
        const layoutItem = (_b = (_a = state.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        return ((_d = (_c = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _c === void 0 ? void 0 : _c.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    });
    return isAuto;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-config.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getWidgetRuntimeDataMap: () => (/* binding */ getWidgetRuntimeDataMap)
/* harmony export */ });
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__);






const getWidgetRuntimeDataMap = () => ({
    iconMap: {
        iconQuery: __webpack_require__(/*! ../../icon.svg */ "./your-extensions/widgets/query-simple/icon.svg"),
        iconWarning: (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default()),
        iconError: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default()),
        arrowNavBack: (jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()),
        arrowRight: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        toolDelete: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        iconMore: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default())
    }
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryWidgetContext: () => (/* binding */ QueryWidgetContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryWidgetContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(null);


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   zoomToRecords: () => (/* binding */ zoomToRecords)
/* harmony export */ });
/* harmony import */ var esri_geometry_Extent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! esri/geometry/Extent */ "esri/geometry/Extent");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Shared zoom utilities for QuerySimple widget.
 *
 * Provides pure functions for zooming to feature records that can be used
 * by both React hooks and data actions.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
const DEFAULT_PADDING = {
    left: 50,
    right: 50,
    top: 50,
    bottom: 50
};
/**
 * Default buffer for single points or overlapping points (in feet).
 * This creates a 600ft x 600ft extent around point features.
 *
 * RATIONALE: 300ft radius provides good context for parcels, addresses,
 * and similar point features without zooming too close or too far.
 */
const DEFAULT_ZERO_AREA_BUFFER_FEET = 300;
/** Conversion factor: feet to meters */
const FEET_TO_METERS = 0.3048;
/**
 * Determines if the spatial reference uses meters (Web Mercator or other metric systems).
 *
 * This is critical for applying the correct buffer distance to zero-area extents.
 * Different coordinate systems use different units:
 * - Web Mercator (3857, 102100): Meters
 * - WGS84 Geographic (4326): Degrees (treated as metric for buffer calculation)
 * - State Plane zones (2225-2284): Feet
 *
 * @param spatialReference - The spatial reference to check
 * @returns true if the spatial reference uses meters, false if feet-based
 */
function isMetricSpatialReference(spatialReference) {
    // Web Mercator (most common): 3857 or 102100
    if (spatialReference.wkid === 3857 || spatialReference.wkid === 102100) {
        return true;
    }
    // WGS84 Geographic (degrees, but treat as metric for buffer calculation)
    if (spatialReference.wkid === 4326) {
        return true;
    }
    // For other spatial references, check the unit property if available
    // Most State Plane zones use feet (WKID 2227-2284, 2285-2287, etc.)
    // But this is a heuristic - ideally we'd check the actual unit
    const wkid = spatialReference.wkid;
    // Common US State Plane zones in feet (partial list)
    // California zones: 2225-2235 (feet), 2229 (feet)
    // This is not exhaustive, but covers common cases
    if (wkid >= 2225 && wkid <= 2284) {
        return false; // Likely feet-based State Plane
    }
    // Default to metric if uncertain
    return true;
}
/**
 * Expands a zero-area extent by a buffer distance.
 * Creates a new extent with the center point buffered by the specified distance.
 *
 * This handles the case where:
 * - A single point feature is selected (extent.width = 0, extent.height = 0)
 * - Multiple overlapping points are selected (union extent still has zero area)
 *
 * Without this expansion, mapView.goTo() would zoom to an unusable scale.
 *
 * @param extent - The zero-area extent to expand
 * @param bufferDistance - The distance to buffer in the spatial reference's units
 * @returns A new extent expanded by the buffer distance in all directions
 */
function expandZeroAreaExtent(extent, bufferDistance) {
    const centerX = (extent.xmin + extent.xmax) / 2;
    const centerY = (extent.ymin + extent.ymax) / 2;
    return extent.clone().set({
        xmin: centerX - bufferDistance,
        xmax: centerX + bufferDistance,
        ymin: centerY - bufferDistance,
        ymax: centerY + bufferDistance
    });
}
/**
 * Pure function to zoom to feature records with padding.
 *
 * Extracts geometries from records, calculates extent, and zooms the map view
 * using mapView.goTo() with configurable padding. Handles both single and
 * multiple geometries by calculating union extent when needed.
 *
 * GEOMETRY NORMALIZATION (r019.28):
 * Point geometries are normalized upstream (in query-task.tsx) to include
 * .extent property. This ensures all geometry types (points, multipoints,
 * polygons, polylines) have a consistent interface.
 *
 * ZERO-AREA EXTENT HANDLING (r019.23-r019.28):
 * When zooming to single points or overlapping points, the calculated extent
 * will have zero width/height. This function detects this condition and
 * expands the extent by 300 feet (default) in all directions to provide
 * useful context. The buffer distance is automatically converted to the
 * correct units based on the map's spatial reference:
 * - Web Mercator (3857/102100): Converts 300 feet  ~91.44 meters
 * - State Plane (feet-based): Uses 300 feet directly
 *
 * GEOMETRY TYPE SUPPORT:
 * - Single Points (point): Uses normalized .extent  Zero-area expansion applied
 * - Multipoints (multipoint): Uses native .extent  Zero-area expansion if overlapping
 * - Polygons/Polylines: Uses native .extent  Expansion only if degenerate
 *
 * This approach maintains the extent-based zoom strategy, ensuring the
 * padding from ZoomToRecordsOptions is still respected during mapView.goTo().
 *
 * DIAGNOSTIC LOGGING (r019.24):
 * Comprehensive logging throughout operation exposes geometry types, extent
 * calculations, zero-area detection, expansion math, and final goTo parameters.
 * Filter console by [QUERYSIMPLE-ZOOM] to see complete trace.
 *
 * @param mapView - The map view to zoom (2D or 3D)
 * @param records - Array of feature data records to zoom to
 * @param options - Optional zoom options including padding and zero-area buffer distance
 * @returns Promise that resolves when zoom completes
 *
 * @example
 * // Zoom to single point with default 300ft buffer
 * await zoomToRecords(mapView, [pointRecord])
 *
 * @example
 * // Zoom to polygon with custom padding
 * await zoomToRecords(mapView, [polygonRecord], {
 *   padding: { left: 100, right: 100, top: 100, bottom: 100 }
 * })
 *
 * @example
 * // Zoom to point with custom buffer (500ft instead of 300ft)
 * await zoomToRecords(mapView, [pointRecord], {
 *   zeroAreaBufferFeet: 500
 * })
 */
function zoomToRecords(mapView, records, options) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d;
        if (!mapView || !records || records.length === 0) {
            debugLogger.log('ZOOM', {
                event: 'zoom-early-exit',
                reason: !mapView ? 'no-mapView' : 'no-records',
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0
            });
            return;
        }
        const padding = (options === null || options === void 0 ? void 0 : options.padding) || DEFAULT_PADDING;
        const zeroAreaBufferFeet = (options === null || options === void 0 ? void 0 : options.zeroAreaBufferFeet) || DEFAULT_ZERO_AREA_BUFFER_FEET;
        debugLogger.log('ZOOM', {
            event: 'zoom-start',
            recordsCount: records.length,
            padding,
            zeroAreaBufferFeet,
            mapViewType: mapView.type,
            spatialReferenceWkid: (_a = mapView.spatialReference) === null || _a === void 0 ? void 0 : _a.wkid
        });
        try {
            // Extract geometries from records and calculate extents on-the-fly
            // Note: Point geometries in ArcGIS JS API have read-only .extent property (always null)
            // We create extent objects on-the-fly for points to avoid mutation errors
            const geometryData = records
                .map(record => {
                var _a, _b;
                const geom = record.getJSAPIGeometry();
                if (!geom)
                    return null;
                // For points without extent, create a zero-area extent on-the-fly
                if (geom.type === 'point' && !geom.extent) {
                    const pt = geom;
                    return {
                        geometry: geom,
                        extent: new esri_geometry_Extent__WEBPACK_IMPORTED_MODULE_0__["default"]({
                            xmin: pt.x,
                            xmax: pt.x,
                            ymin: pt.y,
                            ymax: pt.y,
                            spatialReference: pt.spatialReference
                        })
                    };
                }
                // For other geometry types, use existing extent
                return {
                    geometry: geom,
                    extent: geom.extent || ((_b = (_a = geom).getExtent) === null || _b === void 0 ? void 0 : _b.call(_a))
                };
            })
                .filter(item => item != null);
            debugLogger.log('ZOOM', {
                event: 'geometries-extracted',
                recordsCount: records.length,
                geometriesCount: geometryData.length,
                geometryTypes: geometryData.map(item => item.geometry.type)
            });
            if (geometryData.length === 0) {
                debugLogger.log('ZOOM', {
                    event: 'zoom-early-exit',
                    reason: 'no-geometries',
                    recordsCount: records.length
                });
                return;
            }
            let extent = null;
            if (geometryData.length === 1) {
                // Single geometry - use the calculated extent
                const item = geometryData[0];
                extent = item.extent;
                debugLogger.log('ZOOM', {
                    event: 'extent-calculated-single',
                    geometryType: item.geometry.type,
                    originalExtent: extent ? {
                        xmin: extent.xmin,
                        xmax: extent.xmax,
                        ymin: extent.ymin,
                        ymax: extent.ymax,
                        width: extent.width,
                        height: extent.height,
                        spatialReference: (_b = extent.spatialReference) === null || _b === void 0 ? void 0 : _b.wkid
                    } : null
                });
            }
            else {
                // Multiple geometries - calculate union extent
                // Note: Overlapping points will produce a zero-area extent
                // which will be expanded by the zero-area detection logic below
                const extents = geometryData
                    .map(item => item.extent)
                    .filter(e => e != null);
                if (extents.length > 0) {
                    extent = extents[0].clone();
                    for (let i = 1; i < extents.length; i++) {
                        extent = extent.union(extents[i]);
                    }
                }
                debugLogger.log('ZOOM', {
                    event: 'extent-calculated-union',
                    geometriesCount: geometryData.length,
                    extentsCount: extents.length,
                    originalExtent: extent ? {
                        xmin: extent.xmin,
                        xmax: extent.xmax,
                        ymin: extent.ymin,
                        ymax: extent.ymax,
                        width: extent.width,
                        height: extent.height,
                        spatialReference: (_c = extent.spatialReference) === null || _c === void 0 ? void 0 : _c.wkid
                    } : null
                });
            }
            if (extent) {
                // Check for zero-area extent (single point or overlapping points)
                // This condition triggers when extent.width === 0 OR extent.height === 0
                const isZeroArea = extent.width === 0 || extent.height === 0;
                debugLogger.log('ZOOM', {
                    event: 'zero-area-check',
                    isZeroArea,
                    extentWidth: extent.width,
                    extentHeight: extent.height
                });
                if (isZeroArea) {
                    // Determine buffer distance based on spatial reference
                    // Web Mercator uses meters, State Plane typically uses feet
                    const isMetric = isMetricSpatialReference(mapView.spatialReference);
                    const bufferDistance = isMetric
                        ? zeroAreaBufferFeet * FEET_TO_METERS // Convert feet to meters (~91.44m for 300ft)
                        : zeroAreaBufferFeet; // Use feet directly
                    const originalExtent = extent.clone();
                    // Expand the extent by the buffer distance in all directions
                    // This creates a square extent centered on the point(s)
                    extent = expandZeroAreaExtent(extent, bufferDistance);
                    debugLogger.log('ZOOM', {
                        event: 'zero-area-extent-expanded',
                        recordsCount: records.length,
                        bufferFeet: zeroAreaBufferFeet,
                        bufferDistance: bufferDistance,
                        spatialReferenceWkid: mapView.spatialReference.wkid,
                        isMetric: isMetric,
                        originalExtent: {
                            xmin: originalExtent.xmin,
                            xmax: originalExtent.xmax,
                            ymin: originalExtent.ymin,
                            ymax: originalExtent.ymax,
                            width: originalExtent.width,
                            height: originalExtent.height
                        },
                        expandedExtent: {
                            xmin: extent.xmin,
                            xmax: extent.xmax,
                            ymin: extent.ymin,
                            ymax: extent.ymax,
                            width: extent.width,
                            height: extent.height
                        }
                    });
                }
                // Zoom to the extent with padding
                // The padding from options is applied here, in addition to any zero-area expansion
                debugLogger.log('ZOOM', {
                    event: 'calling-mapView-goTo',
                    finalExtent: {
                        xmin: extent.xmin,
                        xmax: extent.xmax,
                        ymin: extent.ymin,
                        ymax: extent.ymax,
                        width: extent.width,
                        height: extent.height,
                        spatialReference: (_d = extent.spatialReference) === null || _d === void 0 ? void 0 : _d.wkid
                    },
                    padding
                });
                const goToResult = yield mapView.goTo(extent, { padding });
                debugLogger.log('ZOOM', {
                    event: 'mapView-goTo-complete',
                    success: true,
                    goToResult: goToResult ? 'returned-value' : 'no-return-value'
                });
            }
            else {
                debugLogger.log('ZOOM', {
                    event: 'zoom-skipped',
                    reason: 'no-extent-calculated'
                });
            }
        }
        catch (error) {
            debugLogger.log('ZOOM', {
                event: 'zoom-goTo-error',
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                recordsCount: records.length
            });
            throw error;
        }
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.0.0',
                description: 'The first version.',
                upgrader: (oldConfig) => {
                    return oldConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version.ts":
/*!*************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WIDGET_VERSION: () => (/* binding */ WIDGET_VERSION)
/* harmony export */ });
/**
 * Widget version number.
 * Base version matches Experience Builder version (1.19.0).
 * Release number increments on major changes (001, 002, 003, ...).
 * Minor version increments on smaller fixes between major releases (r015.1, r015.2, ...).
 *
 * To increment:
 * - Major change: Update RELEASE_NUMBER (e.g., 015 -> 016) and reset MINOR_VERSION to 0
 * - Minor fix: Increment MINOR_VERSION (e.g., 1 -> 2) while keeping same RELEASE_NUMBER
 */
const BASE_VERSION = '1.19.0';
const RELEASE_NUMBER = '019'; // Increment on major changes (001, 002, 003, ...)
const MINOR_VERSION = '31'; // Increment on minor fixes between major releases (1, 2, 3, ...)
const WIDGET_VERSION = MINOR_VERSION && Number(MINOR_VERSION) > 0
    ? `${BASE_VERSION}-r${RELEASE_NUMBER}.${MINOR_VERSION}`
    : `${BASE_VERSION}-r${RELEASE_NUMBER}`;


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common.ts":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* reexport safe */ _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__.DataSourceTip),
/* harmony export */   DialogPanel: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.DialogPanel),
/* harmony export */   EntityStatusType: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.ErrorMessage),
/* harmony export */   StateHolder: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StateHolder),
/* harmony export */   StatusIndicator: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StatusIndicator),
/* harmony export */   createGetI18nMessage: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.createGetI18nMessage),
/* harmony export */   createHelperSimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createQuerySimpleDebugLogger),
/* harmony export */   getFieldInfosInPopupContent: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.toggleItemInArray),
/* harmony export */   useDataSourceExists: () => (/* reexport safe */ _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__.useDataSourceExists)
/* harmony export */ });
/* harmony import */ var _common_common_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common/common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common/utils */ "./your-extensions/widgets/shared-code/common/utils.tsx");
/* harmony import */ var _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common/use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");
/* harmony import */ var _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common/data-source-tip */ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx");
/* harmony import */ var _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common/debug-logger */ "./your-extensions/widgets/shared-code/common/debug-logger.ts");
/**
 * Shared common utilities and components for Experience Builder widgets
 *
 * This module exports common functionality that can be shared between
 * query-simple, helper-simple, and other custom widgets.
 *
 * This is the entry point for 'widgets/shared-code/common'
 */







/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/common-components.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/common-components.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DialogPanel: () => (/* binding */ DialogPanel),
/* harmony export */   EntityStatusType: () => (/* binding */ EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* binding */ ErrorMessage),
/* harmony export */   StateHolder: () => (/* binding */ StateHolder),
/* harmony export */   StatusIndicator: () => (/* binding */ StatusIndicator)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__);

/** @jsx jsx */




const { useState } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React;
/**
 * A simple Functional Component storing some States that are commonly used
 */
const StateHolder = (props) => {
    const { initState = {}, children } = props;
    const defaultStateMap = {
        visible: true,
        refContainer: null
    };
    const useStateMap = {
        visible: useState('visible' in initState ? initState.visible : defaultStateMap.visible),
        refContainer: useState('refContainer' in initState ? initState.refContainer : defaultStateMap.refContainer),
        customData: useState(Object.assign({}, initState.customData))
    };
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: children(useStateMap) });
};
/**
 * A dialog popup
 */
const DialogPanel = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, panelVisible, setPanelVisible, getI18nMessage, isModal = true, title = getI18nMessage('queryMessage'), bodyContent = '', hasHeader = true, hasFooter = true } = props;
    const toggle = () => { setPanelVisible(false); };
    const getContent = () => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [hasHeader &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.PanelHeader, { className: 'py-2', title: title, onClose: toggle }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalBody, { children: bodyContent }), hasFooter &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalFooter, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { onClick: toggle, children: getI18nMessage('ok') }) })] });
    const generalClassName = 'ui-unit-dialog-panel';
    const renderModalContent = () => {
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Modal, { className: generalClassName, isOpen: panelVisible, toggle: toggle, backdrop: 'static', children: getContent() }));
    };
    const renderNonModalContent = () => {
        const getStyle = () => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      &.ui-unit-dialog-panel.modal-dialog {
        margin: 0;
        width: 100%;
        .modal-content {
          background-color: ${theme.ref.palette.neutral[600]};
          color: ${theme.ref.palette.black};
          font-size: .75rem;
          font-weight: 400;
          border: none;
          .panel-header {
            font-size: .8125rem;
            padding: .625rem;
          }
          .modal-body {
            padding: 0 .625rem .75rem;
            white-space: normal;
          }
        }
      }
    `;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${generalClassName} modal-dialog ${panelVisible ? '' : 'collapse'}`, css: getStyle(), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'modal-content', children: getContent() }) }));
    };
    return isModal ? renderModalContent() : renderNonModalContent();
});
var EntityStatusType;
(function (EntityStatusType) {
    EntityStatusType["None"] = "";
    EntityStatusType["Init"] = "init";
    EntityStatusType["Loading"] = "loading";
    EntityStatusType["Loaded"] = "loaded";
    EntityStatusType["Warning"] = "warning";
    EntityStatusType["Error"] = "error";
})(EntityStatusType || (EntityStatusType = {}));
/**
 * An animatable icon representing status
 */
const StatusIndicator = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, className, title, statusType } = props;
    const getStyle = () => {
        var _a, _b, _c, _d;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    &.ui-unit-status-indicator {
      display: flex;
      &.ui-unit-status-indicator_status-type-loading {
        &:before {
          @keyframes loading {
            0% {transform: rotate(0deg); };
            100% {transform: rotate(360deg)};
          }
          content: '';
          width: 1rem;
          height: 1rem;
          display: block;
          border: 1px solid ${(_b = (_a = theme === null || theme === void 0 ? void 0 : theme.ref.palette) === null || _a === void 0 ? void 0 : _a.neutral) === null || _b === void 0 ? void 0 : _b[500]};
          border-radius: 50%;
          border-top: 1px solid ${(_d = (_c = theme === null || theme === void 0 ? void 0 : theme.sys.color) === null || _c === void 0 ? void 0 : _c.primary) === null || _d === void 0 ? void 0 : _d.main};
          box-sizing: border-box;
          animation: loading 2s infinite linear;
          margin-right: .25rem;
        }
      }
    }
  `;
    };
    return (statusType &&
        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${className !== null && className !== void 0 ? className : ''} ui-unit-status-indicator ui-unit-status-indicator_status-type-${statusType}`, title: title, css: getStyle() }));
});
/**
 * Simple error message component for displaying user-facing errors.
 * Use DataSourceTip for data source-related errors.
 */
const ErrorMessage = (props) => {
    const { error, className = '', onDismiss } = props;
    if (!error) {
        return null;
    }
    const errorStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    align-items: center;
    padding: 0.5rem;
    margin: 0.5rem 0;
    background-color: var(--sys-color-error-light);
    color: var(--sys-color-error-dark);
    border-radius: 4px;
    font-size: 0.875rem;
    gap: 0.5rem;
    
    .error-icon {
      flex-shrink: 0;
    }
    
    .error-text {
      flex: 1;
    }
    
    .error-dismiss {
      flex-shrink: 0;
      cursor: pointer;
      padding: 0.25rem;
      &:hover {
        opacity: 0.7;
      }
    }
  `;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: `error-message ${className}`, css: errorStyle, role: "alert", children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default()), className: "error-icon", size: "sm" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "error-text", children: error }), onDismiss && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", type: "tertiary", icon: true, onClick: onDismiss, className: "error-dismiss", "aria-label": "Dismiss error", children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (__webpack_require__(/*! jimu-icons/svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg")["default"]), size: "sm" }) }))] }));
};


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/data-source-tip.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* binding */ DataSourceTip)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _common_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _use_ds_exists__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");

/** @jsx jsx */






/**
 * Show icon and message if the data source doesn't work.
 * @param props
 * @returns
 */
function DataSourceTip(props) {
    var _a, _b, _c;
    const { widgetId, useDataSource, onStatusChange, onDataSourceCreated, showMessage = false } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages);
    const dsExists = (0,_use_ds_exists__WEBPACK_IMPORTED_MODULE_6__.useDataSourceExists)({ widgetId, useDataSourceId: useDataSource.dataSourceId });
    const [dsStatus, setDsStatus] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const handleDsInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info) => {
        if (info) {
            const { status, instanceStatus } = info;
            if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotCreated) {
                setDsStatus('creating');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.CreateError || status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.LoadError) {
                setDsStatus('error');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady) {
                setDsStatus('warning');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else {
                setDsStatus(null);
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(true);
            }
        }
    }, [onStatusChange]);
    const handleDsCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        setDataSource(ds);
        onDataSourceCreated === null || onDataSourceCreated === void 0 ? void 0 : onDataSourceCreated(ds);
    }, [onDataSourceCreated]);
    const handleDsCreateFailed = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setDataSource(null);
        setDsStatus('error');
        onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
    }, [onStatusChange]);
    let statusIcon;
    let statusMsg;
    let color;
    if (dsStatus === 'creating') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('loading');
    }
    else if (!dsExists || dsStatus === 'error') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('dataSourceCreateError');
        color = 'var(--sys-color-error-main)';
    }
    else if (dsStatus === 'warning') {
        let label = '';
        const originDs = (_a = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (originDs) {
            label = originDs.getLabel() || originDs.getDataSourceJson().sourceLabel;
        }
        else if (dataSource) {
            label = dataSource.getLabel() || dataSource.getDataSourceJson().label;
        }
        const widgetId = jimu_core__WEBPACK_IMPORTED_MODULE_1__.appConfigUtils.getWidgetIdByOutputDataSource(useDataSource);
        const appState = ((_b = window === null || window === void 0 ? void 0 : window.jimuConfig) === null || _b === void 0 ? void 0 : _b.isBuilder)
            ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState().appStateInBuilder
            : (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState();
        const widgetLabel = (_c = appState.appConfig.widgets[widgetId]) === null || _c === void 0 ? void 0 : _c.label;
        color = 'var(--sys-color-warning-dark)';
        statusIcon = (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default());
        statusMsg = getI18nMessage('outputDataIsNotGenerated', {
            outputDsLabel: label !== null && label !== void 0 ? label : '',
            sourceWidgetName: widgetLabel !== null && widgetLabel !== void 0 ? widgetLabel : ''
        });
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useDataSource, onDataSourceInfoChange: handleDsInfoChange, onDataSourceCreated: handleDsCreated, onCreateDataSourceFailed: handleDsCreateFailed })), dsStatus === 'creating' && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common_components__WEBPACK_IMPORTED_MODULE_3__.StatusIndicator, { statusType: _common_components__WEBPACK_IMPORTED_MODULE_3__.EntityStatusType.Loading, title: statusMsg }), (!dsExists || dsStatus === 'error' || dsStatus === 'warning') && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: statusMsg, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: statusIcon, color: color }) }) }), showMessage && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'status-message', children: statusMsg })] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/debug-logger.ts":
/*!********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/debug-logger.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createHelperSimpleDebugLogger: () => (/* binding */ createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* binding */ createQuerySimpleDebugLogger)
/* harmony export */ });
/**
 * Configurable debug logging utility for Experience Builder widgets
 *
 * Usage:
 * - Add ?debug=all to URL to see all debug logs
 * - Add ?debug=HASH,FORM to see specific feature logs
 * - Add ?debug=false to disable all debug logs
 *
 * Features (QuerySimple):
 * - BUG: Known bugs/issues (always logs, even if debug=false) - Use format: bugId, category, description
 * - HASH: Hash parameter processing
 * - FORM: Query form interactions
 * - TASK: Query task management
 * - ZOOM: Zoom behavior
 * - MAP-EXTENT: Map extent changes
 * - DATA-ACTION: Data action execution (Add to Map, etc.)
 * - GROUP: Query grouping and dropdown selection
 * - SELECTION: Selection detection and identify popup tracking
 * - WIDGET-STATE: Widget lifecycle events (open/close handshake)
 * - RESTORE: Selection restoration when widget opens
 * - RESULTS-MODE: Results management mode selection (Create new, Add to, Remove from)
 * - EXPAND-COLLAPSE: Expand/collapse state management for result items
 * - GRAPHICS-LAYER: Graphics layer highlighting (independent of layer visibility)
 * - EVENTS: Event listener setup/cleanup and custom event dispatching
 *
 * Temporary Migration Features (will be removed after migration complete):
 * - CHUNK-1-COMPARE: Chunk 1 (URL Parameter) comparison logs
 * - CHUNK-1-MISMATCH: Chunk 1 mismatch warnings
 * - CHUNK-2-COMPARE: Chunk 2 (Visibility) comparison logs
 * - CHUNK-2-MISMATCH: Chunk 2 mismatch warnings
 * - CHUNK-3-COMPARE: Chunk 3 (Selection/Restoration) comparison logs
 * - CHUNK-3-DECISION: Chunk 3 decision point logs
 * - CHUNK-3-FALLBACK: Chunk 3 fallback logic logs
 * - CHUNK-4-COMPARE: Chunk 4 (Graphics Layer) comparison logs
 * - CHUNK-5-COMPARE: Chunk 5 (Accumulated Records) comparison logs
 * - CHUNK-6-COMPARE: Chunk 6 (Map View) comparison logs
 * - CHUNK-6-MISMATCH: Chunk 6 mismatch warnings
 *
 * Features (HelperSimple):
 * - HASH: Hash parameter monitoring and widget opening
 * - SELECTION: Selection tracking from QuerySimple
 * - WIDGET-STATE: Widget state handshake (open/close events)
 * - RESTORE: Selection restoration attempts and results
 */
class DebugLogger {
    constructor(options) {
        this.enabledFeatures = new Set();
        this.initialized = false;
        this.widgetName = options.widgetName;
        this.features = options.features;
    }
    initialize() {
        if (this.initialized)
            return;
        // Check URL parameters (both current window and parent for iframes)
        let urlParams = new URLSearchParams(window.location.search);
        let debugValue = urlParams.get('debug');
        // If not found in current window, check parent (needed for ExB iframes)
        if (debugValue === null && window.parent !== window) {
            try {
                urlParams = new URLSearchParams(window.parent.location.search);
                debugValue = urlParams.get('debug');
            }
            catch (e) {
                // Cross-origin restriction might prevent access to parent location
            }
        }
        if (debugValue === 'false') {
            // Explicitly disabled
            this.initialized = true;
            return;
        }
        if (debugValue === 'all') {
            // Enable all features only if explicitly set to 'all'
            this.features.forEach(feature => {
                if (feature !== 'all' && feature !== 'false') {
                    this.enabledFeatures.add(feature);
                }
            });
            console.log(`[${this.widgetName}-DEBUG] Enabled ALL features:`, Array.from(this.enabledFeatures));
        }
        else if (debugValue !== null) {
            // Parse comma-separated feature list
            const requestedFeatures = debugValue.split(',').map(f => f.trim().toUpperCase());
            requestedFeatures.forEach(feature => {
                if (feature.toUpperCase() === 'ALL') {
                    // Enable all features for this widget
                    this.features.forEach(f => {
                        if (f !== 'all' && f !== 'false') {
                            this.enabledFeatures.add(f);
                        }
                    });
                }
                else if (this.features.includes(feature)) {
                    this.enabledFeatures.add(feature);
                }
            });
        }
        this.initialized = true;
    }
    isEnabled(feature) {
        this.initialize();
        // BUG level always enabled, regardless of debug switches (even if debug=false)
        if (feature === 'BUG') {
            return true;
        }
        if (this.enabledFeatures.has('all')) {
            return true;
        }
        return this.enabledFeatures.has(feature);
    }
    log(feature, data) {
        // BUG level always logs, even if debug=false
        if (feature === 'BUG') {
            const logData = Object.assign({ feature: 'BUG', bugId: data.bugId || 'UNKNOWN', category: data.category || 'GENERAL', timestamp: new Date().toISOString() }, data);
            // Use console.warn with emoji format to make bugs stand out
            console.warn(`[${this.widgetName.toUpperCase()}  BUG]`, JSON.stringify(logData, null, 2));
            return;
        }
        // Regular feature logging (existing behavior)
        if (!this.isEnabled(feature)) {
            return;
        }
        const logData = Object.assign({ feature, timestamp: new Date().toISOString() }, data);
        console.log(`[${this.widgetName.toUpperCase()}-${feature}]`, JSON.stringify(logData, null, 2));
    }
    getConfig() {
        this.initialize();
        const urlParams = new URLSearchParams(window.location.search);
        const debugValue = urlParams.get('debug');
        return {
            enabledFeatures: Array.from(this.enabledFeatures),
            debugValue
        };
    }
}
/**
 * Creates a debug logger instance for QuerySimple widget
 */
function createQuerySimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'QUERYSIMPLE',
        features: [
            'HASH', 'HASH-EXEC', 'HASH-FIRST-LOAD', 'FORM', 'TASK', 'ZOOM', 'MAP-EXTENT', 'DATA-ACTION', 'GROUP',
            'SELECTION', 'WIDGET-STATE', 'RESTORE', 'RESULTS-MODE', 'EXPAND-COLLAPSE', 'GRAPHICS-LAYER', 'EVENTS',
            // Temporary migration features (will be removed after migration complete)
            'CHUNK-1-COMPARE', 'CHUNK-1-MISMATCH', 'CHUNK-2-COMPARE', 'CHUNK-2-MISMATCH', 'CHUNK-3-COMPARE', 'CHUNK-3-DECISION', 'CHUNK-3-FALLBACK',
            'CHUNK-4-COMPARE', 'CHUNK-5-COMPARE', 'CHUNK-6-COMPARE', 'CHUNK-6-MISMATCH'
        ]
    });
}
/**
 * Creates a debug logger instance for HelperSimple widget
 */
function createHelperSimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'HELPERSIMPLE',
        features: ['HASH', 'HASH-EXEC', 'SELECTION', 'WIDGET-STATE', 'RESTORE']
    });
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx":
/*!**********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/use-ds-exists.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useDataSourceExists: () => (/* binding */ useDataSourceExists)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

function useDataSourceExists(props) {
    const { widgetId, useDataSourceId } = props;
    const exists = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        let appConfig;
        if (window.jimuConfig.isBuilder) {
            appConfig = state.appStateInBuilder.appConfig;
        }
        else {
            appConfig = state.appConfig;
        }
        const useDataSources = (_a = appConfig.widgets[widgetId].useDataSources) !== null && _a !== void 0 ? _a : [];
        return useDataSources.some(useDs => useDs.dataSourceId === useDataSourceId);
    });
    return exists;
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/utils.tsx":
/*!**************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/utils.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createGetI18nMessage: () => (/* binding */ createGetI18nMessage),
/* harmony export */   getFieldInfosInPopupContent: () => (/* binding */ getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* binding */ toggleItemInArray)
/* harmony export */ });
/**
 * Toggle items in an array
 */
const toggleItemInArray = (item, items = []) => items.includes(item) ? items.filter(i => i !== item) : [...items, item];
/**
 * A factory to create a function of getting i18n message
 */
function createGetI18nMessage(options) {
    const { intl, defaultMessages = {} } = options || {};
    const getI18nMessage = (id, options) => {
        const { messages, values } = options || {};
        return intl.formatMessage({ id, defaultMessage: (messages || defaultMessages)[id] }, values);
    };
    return getI18nMessage;
}
function getFieldInfosInPopupContent(popupInfo) {
    var _a;
    const result = [];
    if (((_a = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.popupElements) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        popupInfo.popupElements.forEach(element => {
            var _a;
            if (element.type === 'fields' && ((_a = element.fieldInfos) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                result.push(...element.fieldInfos);
            }
        });
    }
    return result;
}


/***/ }),

/***/ "@emotion/react/jsx-runtime":
/*!************************************!*\
  !*** external "jimu-core/emotion" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__;

/***/ }),

/***/ "esri/geometry/Extent":
/*!***************************************!*\
  !*** external "esri/geometry/Extent" ***!
  \***************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_esri_geometry_Extent__;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "react":
/*!**********************************!*\
  !*** external "jimu-core/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_react__;

/***/ }),

/***/ "widgets/shared-code/common":
/*!*********************************************!*\
  !*** external "widgets/shared-code/common" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/query-simple/src/version-manager.ts");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-list-inline */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");
/* harmony import */ var _hooks_use_url_consumption__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./hooks/use-url-consumption */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts");
/* harmony import */ var _hooks_use_widget_visibility__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./hooks/use-widget-visibility */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts");
/* harmony import */ var _hooks_use_map_view__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./hooks/use-map-view */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts");
/* harmony import */ var _hooks_use_graphics_layer__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./hooks/use-graphics-layer */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts");
/* harmony import */ var _hooks_use_accumulated_records__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./hooks/use-accumulated-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts");
/* harmony import */ var _hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./hooks/use-event-handling */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-event-handling.ts");
/* harmony import */ var _hooks_use_selection_restoration__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./hooks/use-selection-restoration */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-selection-restoration.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */













// Chunk 1: URL Parameter Consumption Manager (r018.8)

// Chunk 2: Widget Visibility Engine Manager (r018.13) - Step 2.3: Switch to manager

// Chunk 6: Map View Management Manager (r018.14) - Step 6.1: Add manager without integration

// Chunk 4: Graphics Layer Management Manager (r018.24) - Step 4.2: Parallel execution

// Chunk 5: Accumulated Records Management Manager (r018.26) - Step 5.1: Add manager without integration

// Chunk 7: Event Handling Manager (r018.59) - Step 7.1: Create Event Manager

// Chunk 3: Selection & Restoration Manager (r019.1) - Section 3.1: Selection State Tracking

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__.createQuerySimpleDebugLogger)();
const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
// Event constants moved to EventManager (r018.59 - Chunk 7.1)
/**
 * QuerySimple Widget
 *
 * A high-performance query widget for ArcGIS Experience Builder that provides:
 * - Universal SQL optimization for database index usage
 * - Dual-mode deep linking (hash fragments and query strings)
 * - Results accumulation across multiple queries
 * - Selection persistence and restoration
 * - Graphics layer highlighting for map visualization
 *
 * Architecture:
 * This widget follows a "Hook & Shell" pattern where complex logic is extracted into
 * manager classes (UrlConsumptionManager, WidgetVisibilityManager, MapViewManager)
 * to keep the main widget class clean and maintainable.
 *
 * @since 1.19.0-r018.18
 * @see {@link UrlConsumptionManager} for URL parameter handling
 * @see {@link WidgetVisibilityManager} for panel visibility detection
 * @see {@link MapViewManager} for map view reference management
 */
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor() {
        super(...arguments);
        // Chunk 1: URL Parameter Consumption Manager (r018.8)
        this.urlConsumptionManager = new _hooks_use_url_consumption__WEBPACK_IMPORTED_MODULE_14__.UrlConsumptionManager();
        // Chunk 2: Widget Visibility Engine Manager (r018.13) - Step 2.3: Switch to manager
        this.visibilityManager = new _hooks_use_widget_visibility__WEBPACK_IMPORTED_MODULE_15__.WidgetVisibilityManager();
        // Refs must be declared before managers that use them
        this.widgetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.graphicsLayerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.mapViewRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        // Chunk 6: Map View Management Manager (r018.16) - Step 6.3: Switch to manager
        this.mapViewManager = new _hooks_use_map_view__WEBPACK_IMPORTED_MODULE_16__.MapViewManager(this.mapViewRef);
        // Chunk 4: Graphics Layer Management Manager (r018.24) - Step 4.2: Parallel execution
        this.graphicsLayerManager = new _hooks_use_graphics_layer__WEBPACK_IMPORTED_MODULE_17__.GraphicsLayerManager(this.graphicsLayerRef, this.mapViewRef);
        // Chunk 5: Accumulated Records Management Manager (r018.26) - Step 5.1: Add manager without integration
        this.accumulatedRecordsManager = new _hooks_use_accumulated_records__WEBPACK_IMPORTED_MODULE_18__.AccumulatedRecordsManager();
        // Chunk 7: Event Handling Manager (r018.59) - Step 7.1: Create Event Manager
        this.eventManager = new _hooks_use_event_handling__WEBPACK_IMPORTED_MODULE_19__.EventManager();
        // Chunk 3: Selection & Restoration Manager (r019.1) - Section 3.1: Selection State Tracking
        this.selectionRestorationManager = new _hooks_use_selection_restoration__WEBPACK_IMPORTED_MODULE_20__.SelectionRestorationManager(() => this.state, // stateGetter
        {
            onStateUpdate: (newState) => this.setState(newState)
        });
        this.state = {
            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection, // Default mode
            activeTab: 'query'
        };
        /**
         * Handles tab change between "Query" and "Results" tabs.
         *
         * @param activeTab - The tab to switch to ('query' or 'results')
         *
         * @since 1.19.0-r017.0
         */
        this.handleTabChange = (activeTab) => {
            this.setState({ activeTab });
        };
        /**
         * Resets the manual modifications flag when user starts fresh operations.
         * This allows hash-triggered queries to work again after explicit user actions.
         */
        this.resetManualModifications = () => {
            // FIX (r018.96): Removed manuallyRemovedRecordIds tracking - no longer needed
            // Duplicate detection in mergeResultsIntoAccumulated handles preventing duplicates
            const hasManualModifications = this.state.hasManualModifications;
            debugLogger.log('RESULTS-MODE', {
                event: 'reset-manual-modifications-check',
                widgetId: this.props.id,
                hasManualModifications,
                note: 'r018.96: No manuallyRemovedRecordIds tracking',
                timestamp: Date.now()
            });
            if (hasManualModifications) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'resetting-manual-modifications',
                    widgetId: this.props.id,
                    reason: 'user-started-fresh-operation',
                    hadManualModificationsFlag: hasManualModifications,
                    note: 'r018.96: No manuallyRemovedRecordIds to clear',
                    timestamp: Date.now()
                });
            }
        };
        /**
         * Handles HelperSimple's open widget event.
         * QuerySimple should only process hash parameters when HelperSimple explicitly opens the widget.
         * This ensures HelperSimple remains the orchestrator and prevents autonomous hash processing.
         */
        this.handleOpenWidgetEvent = (event) => {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            const { id } = this.props;
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-handleopenwidgetevent-received',
                widgetId: id,
                eventWidgetId: (_a = event.detail) === null || _a === void 0 ? void 0 : _a.widgetId,
                matches: ((_b = event.detail) === null || _b === void 0 ? void 0 : _b.widgetId) === id,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.shortId,
                    initialQueryValueValue: (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.value,
                    currentUrlHash: window.location.hash.substring(1),
                },
                timestamp: Date.now()
            });
            // With surgical hash modification, the hash already contains only desired record IDs
            // No need to block processing - the hash is now a precise representation of selection intent
            // Only process if this event is for our widget
            if (((_e = event.detail) === null || _e === void 0 ? void 0 : _e.widgetId) !== id) {
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-handleopenwidgetevent-ignored-wrong-widget',
                    widgetId: id,
                    eventWidgetId: (_f = event.detail) === null || _f === void 0 ? void 0 : _f.widgetId,
                    timestamp: Date.now()
                });
                return;
            }
            // NOTE: We don't check processed hashes here anymore
            // The check happens in onInitialValueFound after we know which shortId:value pair is being processed
            debugLogger.log('HASH', {
                event: 'open-widget-event-received-from-helpersimple',
                widgetId: id,
                timestamp: Date.now()
            });
            // Set flag to allow query-task-list to use initialQueryValue for selection
            // This ensures we only react to hash parameters when HelperSimple explicitly opens us
            // Using state instead of ref ensures React triggers re-render so query-task-list sees the change
            this.setState({ shouldUseInitialQueryValueForSelection: true }, () => {
                var _a, _b;
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-flag-set-true-state-updated',
                    widgetId: id,
                    newState: {
                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                        hasInitialQueryValue: !!this.state.initialQueryValue,
                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                    },
                    timestamp: Date.now()
                });
            });
            debugLogger.log('HASH', {
                event: 'shouldUseInitialQueryValueForSelection-flag-set-true',
                widgetId: id,
                flagValue: true,
                timestamp: Date.now()
            });
            // Now check URL parameters - HelperSimple has explicitly opened us
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-checkurlparameters-starting',
                widgetId: this.props.id,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_g = this.state.initialQueryValue) === null || _g === void 0 ? void 0 : _g.shortId,
                    initialQueryValueValue: (_h = this.state.initialQueryValue) === null || _h === void 0 ? void 0 : _h.value
                },
                timestamp: Date.now()
            });
            this.urlConsumptionManager.checkUrlParameters(this.props, this.state.resultsMode, {
                onInitialValueFound: (value) => {
                    var _a, _b, _c, _d, _e, _f, _g, _h;
                    debugLogger.log('HASH-EXEC', {
                        event: 'querysimple-oninitialvaluefound-called',
                        widgetId: this.props.id,
                        hasValue: !!value,
                        valueShortId: value === null || value === void 0 ? void 0 : value.shortId,
                        valueValue: value === null || value === void 0 ? void 0 : value.value,
                        currentState: {
                            shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                            hasInitialQueryValue: !!this.state.initialQueryValue,
                            initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                            initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                        },
                        timestamp: Date.now()
                    });
                    if (value) {
                        // Only update if the value or shortId has changed to avoid unnecessary re-renders
                        const willUpdate = ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.shortId) !== value.shortId || ((_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.value) !== value.value;
                        debugLogger.log('HASH-EXEC', {
                            event: 'querysimple-oninitialvaluefound-will-update',
                            widgetId: this.props.id,
                            willUpdate,
                            previousShortId: (_e = this.state.initialQueryValue) === null || _e === void 0 ? void 0 : _e.shortId,
                            previousValue: (_f = this.state.initialQueryValue) === null || _f === void 0 ? void 0 : _f.value,
                            newShortId: value.shortId,
                            newValue: value.value,
                            timestamp: Date.now()
                        });
                        if (willUpdate) {
                            debugLogger.log('HASH', {
                                event: 'url-param-detected',
                                widgetId: this.props.id,
                                shortId: value.shortId,
                                value: value.value,
                                foundIn: 'manager',
                                triggeredBy: 'helpersimple-open-widget-event',
                                previousShortId: (_g = this.state.initialQueryValue) === null || _g === void 0 ? void 0 : _g.shortId,
                                previousValue: (_h = this.state.initialQueryValue) === null || _h === void 0 ? void 0 : _h.value,
                                timestamp: Date.now()
                            });
                            // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
                            // Using AccumulatedRecordsManager (r018.58)
                            const needsModeReset = this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                            const currentMode = this.state.resultsMode;
                            // Update initialQueryValue state
                            this.setState({
                                initialQueryValue: { shortId: value.shortId, value: value.value }
                            }, () => {
                                var _a, _b;
                                debugLogger.log('HASH-EXEC', {
                                    event: 'querysimple-initialqueryvalue-state-updated',
                                    widgetId: this.props.id,
                                    newState: {
                                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                                        hasInitialQueryValue: !!this.state.initialQueryValue,
                                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value,
                                        resultsMode: this.state.resultsMode
                                    },
                                    timestamp: Date.now()
                                });
                            });
                            // Reset mode via manager if needed
                            if (needsModeReset) {
                                const resetResult = this.accumulatedRecordsManager.resetModeOnHashDetection(this.props.id, currentMode);
                                // Update widget state from manager's return value
                                this.setState({
                                    resultsMode: resetResult.resultsMode,
                                    accumulatedRecords: resetResult.accumulatedRecords
                                });
                            }
                        }
                    }
                    else {
                        debugLogger.log('HASH-EXEC', {
                            event: 'querysimple-oninitialvaluefound-no-value-clearing',
                            widgetId: this.props.id,
                            hasCurrentInitialQueryValue: !!this.state.initialQueryValue,
                            timestamp: Date.now()
                        });
                        // No matching parameters found - clear state
                        if (this.state.initialQueryValue) {
                            this.setState({ initialQueryValue: undefined });
                        }
                    }
                },
                onModeResetNeeded: () => {
                    // Reset to New mode when hash parameter is detected
                    // Using AccumulatedRecordsManager (r018.58)
                    const currentMode = this.state.resultsMode;
                    const needsReset = currentMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                    if (needsReset) {
                        debugLogger.log('HASH', {
                            event: 'mode-reset-needed-on-hash-detection',
                            widgetId: this.props.id,
                            currentMode,
                            triggeredBy: 'helpersimple-open-widget-event',
                            timestamp: Date.now()
                        });
                        const resetResult = this.accumulatedRecordsManager.resetModeOnHashDetection(this.props.id, currentMode);
                        // Update widget state from manager's return value
                        this.setState({
                            resultsMode: resetResult.resultsMode,
                            accumulatedRecords: resetResult.accumulatedRecords
                        });
                    }
                }
            });
        };
        /**
         * Notifies HelperSimple widget of selection changes via custom event.
         *
         * This method dispatches a custom event that HelperSimple listens to for tracking
         * selection state. Called by QueryTaskResult component when user selects records.
         *
         * @param recordIds - Array of selected record IDs (objectIds from the feature layer)
         * @param dataSourceId - Optional data source ID for the selected records
         *
         * @since 1.19.0-r017.0
         */
        this.notifyHelperSimpleOfSelection = (recordIds, dataSourceId) => {
            const { id } = this.props;
            // Chunk 7: Dispatch selection event via EventManager (r018.59)
            // Note: This call is missing outputDsId and queryItemConfigId, but this method
            // is only used for notifying HelperSimple, not for setting lastSelection state.
            // The actual selection events come from query-task.tsx and query-result.tsx
            // which use dispatchSelectionEvent from selection-utils.ts
            this.eventManager.dispatchSelectionEvent(id, recordIds, dataSourceId);
        };
        /**
         * Handles widget panel visibility changes from WidgetVisibilityManager.
         *
         * This method implements the selection restoration pattern:
         * - When panel opens: Restores selection to map if widget has accumulated records or last selection
         * - When panel closes: Clears selection from map (but preserves widget state for restoration)
         *
         * The restoration logic respects the current results mode:
         * - "Add to" / "Remove from" modes: Uses accumulated records for restoration
         * - "New" mode: Uses lastSelection state for restoration
         *
         * @param isVisible - True if widget panel is visible, false if hidden
         *
         * @since 1.19.0-r018.13 (Chunk 2: Manager implementation)
         * @see {@link WidgetVisibilityManager} for visibility detection implementation
         */
        this.handleVisibilityChange = (isVisible) => {
            var _a, _b, _c, _d;
            if (isVisible) {
                // When panel opens, check if we have selection to restore
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToRestore = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                    hasSelectionToRestore,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToRestore': hasSelectionToRestore,
                        'will-call-addSelectionToMap': hasSelectionToRestore
                    }
                });
                // Add selection to map if we have one
                if (hasSelectionToRestore) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-calling-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-true'
                    });
                    (() => __awaiter(this, void 0, void 0, function* () {
                        const deps = {
                            graphicsLayerRef: this.graphicsLayerRef,
                            mapViewRef: this.mapViewRef,
                            graphicsLayerManager: this.graphicsLayerManager,
                            config: this.props.config
                        };
                        yield this.selectionRestorationManager.addSelectionToMap(deps);
                    }))();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-skipping-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
            else {
                // When panel closes, clear selection from map only (keep widget state)
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToClear = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_d = this.state.lastSelection) === null || _d === void 0 ? void 0 : _d.recordIds.length) || 0,
                    hasSelectionToClear,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToClear': hasSelectionToClear,
                        'will-call-clearSelectionFromMap': hasSelectionToClear
                    }
                });
                if (hasSelectionToClear) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-calling-clearSelectionFromMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-true'
                    });
                    (() => __awaiter(this, void 0, void 0, function* () {
                        const deps = {
                            graphicsLayerRef: this.graphicsLayerRef,
                            mapViewRef: this.mapViewRef,
                            graphicsLayerManager: this.graphicsLayerManager,
                            config: this.props.config
                        };
                        yield this.selectionRestorationManager.clearSelectionFromMap(deps);
                    }))();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-no-selection-to-clear',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
        };
        /**
         * Handles map view change from JimuMapViewComponent.
         *
         * This method is called by JimuMapViewComponent when the map view becomes available
         * or changes. It delegates to MapViewManager for reference management and initializes
         * the graphics layer if enabled in widget configuration.
         *
         * @param jimuMapView - The JimuMapView instance from JimuMapViewComponent, or null if unavailable
         *
         * @since 1.19.0-r018.18 (Chunk 6: Manager implementation)
         * @see {@link MapViewManager} for map view reference management
         */
        this.handleJimuMapViewChanged = (jimuMapView) => {
            const { id, config } = this.props;
            // Manager implementation (r018.16 - Step 6.3: Switch to manager)
            this.mapViewManager.handleJimuMapViewChanged(jimuMapView, this.props, {
                onMapViewChange: (newJimuMapView) => {
                    // Get map view from manager
                    const newMapView = this.mapViewManager.getMapView();
                    // Chunk 4: Graphics layer initialization (r018.25 - Step 4.3: Remove old implementation)
                    // Initialize graphics layer if map view is available and graphics layer should be initialized
                    if (this.graphicsLayerManager.shouldInitialize(config, newMapView) && newMapView) {
                        // Use void to handle promise without blocking
                        void this.graphicsLayerManager.initialize(id, newMapView, {
                            onGraphicsLayerInitialized: (graphicsLayer) => {
                                // Update state to force re-render and update props
                                this.setState({ graphicsLayerInitialized: true });
                            }
                        });
                    }
                }
            });
        };
        /**
         * Initializes graphics layer lazily when output data source becomes available.
         *
         * This method is called by QueryTask component when an output data source is created.
         * It retrieves the map view from MapViewManager and initializes the graphics layer
         * using GraphicsLayerManager if not already initialized.
         *
         * @param outputDS - The output data source that was created
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.initializeFromOutputDS} for graphics layer initialization
         * @see {@link MapViewManager.getMapView} for map view retrieval
         */
        /**
         * Initializes graphics layer lazily when output data source becomes available.
         *
         * This method is called by QueryTask component when an output data source is created.
         * It retrieves the map view from MapViewManager and initializes the graphics layer
         * using GraphicsLayerManager if not already initialized.
         *
         * @param outputDS - The output data source that was created
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.initializeFromOutputDS} for graphics layer initialization
         * @see {@link MapViewManager.getMapView} for map view retrieval
         */
        this.initializeGraphicsLayerFromOutputDS = (outputDS) => __awaiter(this, void 0, void 0, function* () {
            const { id, config } = this.props;
            // Chunk 4: Graphics layer initialization (r018.25 - Step 4.3: Remove old implementation)
            // Use map view from manager if available
            const mapView = this.mapViewManager.getMapView() || this.mapViewRef.current;
            yield this.graphicsLayerManager.initializeFromOutputDS(id, config, outputDS, mapView, {
                onGraphicsLayerInitialized: (graphicsLayer) => {
                    this.setState({ graphicsLayerInitialized: true });
                }
            });
        });
        /**
         * Clears all graphics from the graphics layer if it exists.
         *
         * This method is called when clearing results or switching queries in "New" mode
         * to ensure graphics are removed from the map. It does not remove the graphics layer
         * itself, only clears its contents.
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.clearGraphics} for graphics clearing logic
         */
        this.clearGraphicsLayerIfExists = () => {
            const { config } = this.props;
            // Chunk 4: Graphics layer clearing (r018.25 - Step 4.3: Remove old implementation)
            this.graphicsLayerManager.clearGraphics(this.props.id, config);
        };
        /**
         * Handles selection change events from QueryTaskResult component.
         *
         * This method updates widget state when records are selected or deselected in the
         * results tab. It respects the current results mode:
         * - "Add to" / "Remove from" modes: Uses accumulated records count for restoration state
         * - "New" mode: Uses event record IDs for restoration state
         *
         * Also handles automatic mode reset: If selection is cleared in "Remove from" mode,
         * the mode is automatically reset to "New" since Remove mode requires selection to function.
         *
         * @param event - Custom event containing selection details (widgetId, recordIds, outputDsId, queryItemConfigId)
         *
         * @since 1.19.0-r017.0
         */
        /**
         * Handles restore request when identify popup closes.
         *
         * This method restores selection to the map after the identify popup closes and
         * selection was cleared. It only restores if the widget panel is currently open
         * (users can't see restored selection if widget is closed).
         *
         * Restoration logic:
         * - "Add to" / "Remove from" modes: Restores all accumulated records grouped by origin data source
         * - "New" mode: Restores lastSelection state
         *
         * @param event - Custom event containing selection details (widgetId, recordIds, outputDsId, queryItemConfigId)
         *
         * @since 1.19.0-r017.0
         * @see {@link RESTORE_ON_IDENTIFY_CLOSE_EVENT} for event name constant
         */
        this.handleRestoreOnIdentifyClose = (event) => {
            var _a, _b, _c;
            const customEvent = event;
            const { id } = this.props;
            // Only handle if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            // Use manager as source of truth for visibility (r018.13)
            const isWidgetOpen = this.visibilityManager.getIsPanelVisible();
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restore-requested',
                widgetId: id,
                isWidgetOpen,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelection: this.state.hasSelection || false,
                accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                hasLastSelection: !!this.state.lastSelection,
                lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                outputDsId: customEvent.detail.outputDsId,
                queryItemConfigId: customEvent.detail.queryItemConfigId
            });
            // Only restore if widget is open
            if (!isWidgetOpen) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-widget-closed',
                    widgetId: id,
                    recordCount: customEvent.detail.recordIds.length
                });
                return;
            }
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-found-accumulated-records',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode,
                    'condition-result': isAccumulationMode
                });
            }
            // In Add/Remove modes, check accumulated records instead of lastSelection
            if (isAccumulationMode) {
                if (!this.state.hasSelection || !this.state.accumulatedRecords || this.state.accumulatedRecords.length === 0) {
                    debugLogger.log('RESTORE', {
                        event: 'identify-popup-closed-restore-skipped-no-accumulated-records',
                        widgetId: id,
                        hasSelection: this.state.hasSelection,
                        accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                        'hypothesis': 'hasSelection-is-false-or-no-accumulated-records',
                        'maybe-hasSelection-should-be-based-on-accumulated-records': true
                    });
                    return;
                }
                // Restore all accumulated records (grouped by origin DS)
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restoring-accumulated-records',
                    widgetId: id,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length
                });
                (() => __awaiter(this, void 0, void 0, function* () {
                    const deps = {
                        graphicsLayerRef: this.graphicsLayerRef,
                        mapViewRef: this.mapViewRef,
                        graphicsLayerManager: this.graphicsLayerManager,
                        config: this.props.config
                    };
                    yield this.selectionRestorationManager.addSelectionToMap(deps);
                }))();
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // For "New" mode, use original validation logic
            // Check if we have matching selection state
            if (!this.state.hasSelection || !this.state.lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-no-selection',
                    widgetId: id,
                    hasSelection: this.state.hasSelection,
                    hasLastSelection: !!this.state.lastSelection
                });
                return;
            }
            // Verify the outputDsId matches
            if (this.state.lastSelection.outputDsId !== customEvent.detail.outputDsId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-ds-mismatch',
                    widgetId: id,
                    ourOutputDsId: this.state.lastSelection.outputDsId,
                    requestedOutputDsId: customEvent.detail.outputDsId
                });
                return;
            }
            // Verify the queryItemConfigId matches (optional but good to check)
            if (this.state.lastSelection.queryItemConfigId !== customEvent.detail.queryItemConfigId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-query-mismatch',
                    widgetId: id,
                    ourQueryItemConfigId: this.state.lastSelection.queryItemConfigId,
                    requestedQueryItemConfigId: customEvent.detail.queryItemConfigId
                });
                return;
            }
            // Restore selection to map (reuse existing method)
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restoring-selection',
                widgetId: id,
                recordCount: customEvent.detail.recordIds.length,
                outputDsId: customEvent.detail.outputDsId
            });
            (() => __awaiter(this, void 0, void 0, function* () {
                const deps = {
                    graphicsLayerRef: this.graphicsLayerRef,
                    mapViewRef: this.mapViewRef,
                    graphicsLayerManager: this.graphicsLayerManager,
                    config: this.props.config
                };
                yield this.selectionRestorationManager.addSelectionToMap(deps);
            }))();
        };
        // ============================================================================
        // r019.18: Removed addSelectionToMapParallel wrapper (27 lines)
        // r019.20: Removed clearSelectionFromMapParallel wrapper (27 lines)
        // All call sites now directly invoke SelectionRestorationManager methods
        // ============================================================================
        // ============================================================================
        // r019.15: Removed old addSelectionToMap implementation (272 lines)
        // Now fully handled by SelectionRestorationManager.addSelectionToMap()
        // ============================================================================
        /**
         * Handles results mode change from the mode dropdown in QueryTask component.
         *
         * This method is called when the user switches between "Create new", "Add to", or
         * "Remove from" modes. It performs the following actions:
         *
         * 1. Consumes hash parameters when switching to accumulation modes (prevents re-triggering)
         * 2. Clears accumulated records when switching to "New" mode
         * 3. Updates widget state with the new mode
         *
         * @param mode - The new selection type mode (NewSelection, AddToSelection, or RemoveFromSelection)
         *
         * @since 1.19.0-r017.0
         */
        this.handleResultsModeChange = (mode) => {
            var _a, _b;
            // Using AccumulatedRecordsManager (r018.58)
            const shouldConsumeHash = (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection) && !!((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId);
            const result = this.accumulatedRecordsManager.handleResultsModeChange(this.props.id, mode, shouldConsumeHash, (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId, this.removeHashParameter);
            // Reset manual modifications when switching to New Selection mode
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection && this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection) {
                this.resetManualModifications();
            }
            // Update widget state from manager's return value
            this.setState({
                resultsMode: result.resultsMode,
                accumulatedRecords: result.accumulatedRecords
            });
        };
        /**
         * Removes a hash parameter from the URL when switching to accumulation modes.
         *
         * This method is called when switching to "Add to" or "Remove from" modes to consume
         * the deep link parameter. This prevents the hash parameter from re-triggering the query
         * when the widget re-renders.
         *
         * The URL is updated using history.replaceState to avoid page reload, and both pathname
         * and query string are preserved (e.g., debug parameters remain intact).
         *
         * @param shortId - The shortId parameter to remove from the URL hash
         *
         * @since 1.19.0-r017.0
         */
        this.removeHashParameter = (shortId) => {
            var _a;
            if (!shortId)
                return;
            const hash = window.location.hash.substring(1);
            const urlParams = new URLSearchParams(hash);
            if (urlParams.has(shortId)) {
                urlParams.delete(shortId);
                const newHash = urlParams.toString();
                debugLogger.log('HASH', {
                    event: 'removeHashParameter',
                    shortId,
                    newHash: newHash ? `#${newHash}` : '(empty)',
                    timestamp: Date.now()
                });
                // Update the URL without triggering a reload
                // Always preserve pathname and query string, only update hash
                window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
                // Also clear the state so it won't trigger again
                if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                    this.setState({ initialQueryValue: undefined });
                }
            }
        };
        this.handleAccumulatedRecordsChange = (records) => {
            // DIAGNOSTIC LOGGING: State change tracking
            const previousRecords = this.state.accumulatedRecords || [];
            const previousIds = previousRecords.map(r => r.getId());
            const newIds = records.map(r => r.getId());
            const addedIds = newIds.filter(id => !previousIds.includes(id));
            const removedIds = previousIds.filter(id => !newIds.includes(id));
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-state-change',
                widgetId: this.props.id,
                previousCount: previousRecords.length,
                previousIds: previousIds,
                newCount: records.length,
                newIds: newIds,
                addedIds: addedIds,
                removedIds: removedIds,
                resultsMode: this.state.resultsMode,
                timestamp: Date.now()
            });
            // Using AccumulatedRecordsManager (r018.58)
            this.accumulatedRecordsManager.handleAccumulatedRecordsChange(this.props.id, records);
            // If we're in Remove mode and all accumulated records are cleared, reset to NewSelection mode
            // Remove mode requires accumulated records to function, so it should be disabled when records are empty
            const shouldResetMode = records.length === 0 &&
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            this.setState(Object.assign({ accumulatedRecords: records }, (shouldResetMode ? {
                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection
            } : {})));
            if (shouldResetMode) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'mode-reset-on-accumulated-records-cleared',
                    widgetId: this.props.id,
                    previousMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection,
                    newMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                    reason: 'all-accumulated-records-cleared-in-remove-mode',
                    timestamp: Date.now()
                });
            }
        };
        /**
         * NOTE: No longer needed - we use existing output DS instead of creating new one.
         * Kept for reference but not used.
         */
        this.getOrCreateAccumulatedResultsDS = (originDS) => __awaiter(this, void 0, void 0, function* () {
            // This is no longer used - we merge records into existing output DS
            throw new Error('This method is deprecated - use existing output DS instead');
        });
        // ============================================================================
        // r019.16: Removed old clearSelectionFromMap implementation (355 lines)
        // Now fully handled by SelectionRestorationManager.clearSelectionFromMap()
        // ============================================================================
        /**
         * NOTIFY that a hash parameter has been used.
         * Previously this removed the hash from the URL, but per updated requirements,
         * user-entered hashes should remain in the URL.
         *
         * @param shortId - The shortId parameter that was used
         */
        this.handleHashParameterUsed = (shortId) => {
            var _a, _b;
            const { id } = this.props;
            const { initialQueryValue } = this.state;
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-handlehashparameterused-called',
                widgetId: id,
                shortId,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                    initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                },
                timestamp: Date.now()
            });
            // NOTE: Hash parameters are NOT cleared here - they persist in URL
            // Hash parameters are only consumed when switching to accumulation modes (Add/Remove)
            // to prevent re-triggering when the user manually switches modes
            debugLogger.log('HASH', {
                event: 'handleHashParameterUsed-notified',
                widgetId: id,
                shortId: shortId,
                currentInitialQueryValue: initialQueryValue,
                note: 'Hash parameter used but NOT cleared - hash remains in URL per user requirement',
                timestamp: Date.now()
            });
            // ALWAYS clear both hash state values after execution
            // QuerySimple should not remember hash state after HelperSimple-driven execution completes
            // This prevents autonomous re-processing when switching queries
            // Using a single setState ensures atomic update and prevents race conditions
            this.setState({
                shouldUseInitialQueryValueForSelection: false,
                initialQueryValue: undefined
            }, () => {
                var _a, _b;
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-handlehashparameterused-state-cleared',
                    widgetId: id,
                    shortId,
                    newState: {
                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                        hasInitialQueryValue: !!this.state.initialQueryValue,
                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                    },
                    timestamp: Date.now()
                });
            });
            debugLogger.log('HASH', {
                event: 'shouldUseInitialQueryValueForSelection-flag-cleared',
                widgetId: id,
                shortId: shortId,
                flagValue: false,
                timestamp: Date.now()
            });
        };
    }
    componentDidMount() {
        var _a, _b;
        // Chunk 1: Manager implementation (r018.8 - switched to manager)
        // Setup manager (no autonomous URL checking - HelperSimple orchestrates)
        // NOTE: setup() is a no-op - callbacks are never called
        this.urlConsumptionManager.setup(this.props, this.state.resultsMode, {} // Empty callbacks - setup() is a no-op
        );
        // Listen for HelperSimple's open widget event
        // QuerySimple should only process hash parameters when HelperSimple explicitly opens the widget
        // This ensures HelperSimple remains the orchestrator
        // Note: Event listener setup moved to parallel execution section below (Chunk 7.1)
        debugLogger.log('HASH-EXEC', {
            event: 'querysimple-mounted-event-listener-setup',
            widgetId: this.props.id,
            currentState: {
                shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                hasInitialQueryValue: !!this.state.initialQueryValue,
                initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
            },
            timestamp: Date.now()
        });
        // Chunk 2: Manager implementation (r018.13 - Step 2.3: Switch to manager)
        if (this.widgetRef.current) {
            this.visibilityManager.setup(this.widgetRef.current, this.props, {
                onVisibilityChange: (isVisible) => {
                    // Update state
                    this.setState({ isPanelVisible: isVisible });
                    // Handle restoration logic
                    this.handleVisibilityChange(isVisible);
                }
            }, (isVisible) => {
                // Manager's internal state tracking callback
                // (no-op, restoration handled in onVisibilityChange)
            });
            // Notify mount via manager
            this.visibilityManager.notifyMount(this.props.id);
        }
        // Chunk 5: Initialize accumulated records manager state (r018.26 - Step 5.1: Add manager)
        // Sync manager state with widget state
        if (this.state.resultsMode) {
            this.accumulatedRecordsManager.handleResultsModeChange(this.props.id, this.state.resultsMode, false);
        }
        if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
            this.accumulatedRecordsManager.handleAccumulatedRecordsChange(this.props.id, this.state.accumulatedRecords);
        }
        // Set up callbacks for manager
        // Set up callbacks for manager (r018.57)
        // Note: Primary state updates come from manager return values in handleResultsModeChange/handleAccumulatedRecordsChange
        // These callbacks serve as backup/verification but shouldn't be needed since we update state directly from return values
        this.accumulatedRecordsManager.setCallbacks({
            onModeChange: (mode) => {
                // State is updated from handleResultsModeChange return value, so this is just a backup
                if (this.state.resultsMode !== mode) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'callback-onModeChange-state-sync',
                        widgetId: this.props.id,
                        callbackMode: mode,
                        currentStateMode: this.state.resultsMode,
                        note: 'State should already be synced from return value',
                        timestamp: Date.now()
                    });
                    this.setState({ resultsMode: mode });
                }
            },
            onAccumulatedRecordsChange: (records) => {
                var _a;
                // State is updated from handleAccumulatedRecordsChange, so this is just a backup
                const currentCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
                if (currentCount !== records.length) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'callback-onAccumulatedRecordsChange-state-sync',
                        widgetId: this.props.id,
                        callbackCount: records.length,
                        currentStateCount: currentCount,
                        note: 'State should already be synced from direct update',
                        timestamp: Date.now()
                    });
                    this.setState({ accumulatedRecords: records });
                }
            }
        });
        // Chunk 7: Event handling (r018.59 - Step 7.1: Add manager)
        this.eventManager.setHandlers({
            onOpenWidgetEvent: this.handleOpenWidgetEvent,
            // Chunk 3: Section 3.1 Step 3.1.5 (r019.5): Switch to manager implementation
            onSelectionChange: (event) => this.selectionRestorationManager.handleSelectionChange(event),
            onRestoreOnIdentifyClose: this.handleRestoreOnIdentifyClose
        });
        this.eventManager.setup(this.props.id);
        // Chunk 3: Selection & Restoration Manager (r019.2) - Section 3.1: Initialize widgetId
        this.selectionRestorationManager.setWidgetId(this.props.id);
        // Graphics layer will be initialized when map view becomes available via JimuMapViewComponent
    }
    componentWillUnmount() {
        // Chunk 1: Clean up manager (r018.8)
        this.urlConsumptionManager.cleanup();
        // Chunk 7: Event handling cleanup (r018.59 - Step 7.1: Add manager)
        this.eventManager.cleanup(this.props.id);
        // Chunk 2: Clean up manager (r018.13 - Step 2.3: Switch to manager)
        this.visibilityManager.cleanup();
        this.visibilityManager.notifyUnmount(this.props.id);
        // Chunk 4: Graphics layer cleanup (r018.25 - Step 4.3: Remove old implementation)
        this.graphicsLayerManager.cleanup(this.props.id);
        // Chunk 5: Clean up accumulated records manager (r018.26 - Step 5.1: Add manager)
        this.accumulatedRecordsManager.cleanup();
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-closed',
            widgetId: this.props.id,
            isOpen: false,
            timestamp: new Date().toISOString()
        });
    }
    componentDidUpdate(prevProps) {
        // QuerySimple no longer autonomously checks URL parameters
        // Only HelperSimple can trigger hash parameter processing via OPEN_WIDGET_EVENT
        // This ensures HelperSimple remains the orchestrator
        // Chunk 4: Graphics layer is now required (r018.25 - Step 4.3: Remove config change handling)
        // No need to handle config changes for graphics layer since it's always enabled
    }
    render() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        const { config, id, icon, label, layoutId, layoutItemId, controllerWidgetId } = this.props;
        const widgetLabel = this.props.intl.formatMessage({
            id: '_widgetLabel',
            defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]._widgetLabel
        });
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, { icon: iconMap.iconQuery, widgetId: this.props.id, name: widgetLabel });
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Popper && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__.TaskListPopperWrapper, { id: 0, icon: icon, popperTitle: label, minSize: (_c = (_b = config.sizeMap) === null || _b === void 0 ? void 0 : _b.arrangementIconPopper) === null || _c === void 0 ? void 0 : _c.minSize, defaultSize: (_e = (_d = config.sizeMap) === null || _d === void 0 ? void 0 : _d.arrangementIconPopper) === null || _e === void 0 ? void 0 : _e.defaultSize, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, isInPopper: true, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, className: 'pb-4', initialQueryValue: this.state.initialQueryValue, shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange, eventManager: this.eventManager }) }) }));
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Inline && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__.TaskListInline, { widgetId: id, widgetLabel: label, wrap: config.arrangeWrap, queryItems: config.queryItems, minSize: (_g = (_f = config.sizeMap) === null || _f === void 0 ? void 0 : _f.arrangementIconPopper) === null || _g === void 0 ? void 0 : _g.minSize, defaultSize: (_j = (_h = config.sizeMap) === null || _h === void 0 ? void 0 : _h.arrangementIconPopper) === null || _j === void 0 ? void 0 : _j.defaultSize, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed }) }));
        }
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Paper, { ref: this.widgetRef, variant: 'flat', className: 'jimu-widget runtime-query', "data-widgetid": id, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
        display: flex;
        flex-direction: column;
        height: 100%;
      `, children: [config.useGraphicsLayerForHighlight && config.highlightMapWidgetId && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__.JimuMapViewComponent, { useMapWidgetId: config.highlightMapWidgetId, onActiveViewChange: this.handleJimuMapViewChanged })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "widget-header", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px 16px;
          border-bottom: 1px solid var(--sys-color-divider-secondary);
          background-color: var(--sys-color-surface);
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "widget-title", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--sys-color-text-primary);
          `, children: label || widgetLabel }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            flex: 1;
            overflow: auto;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange, eventManager: this.eventManager }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 4px 12px;
            border-top: 1px solid var(--sys-color-divider-secondary);
            background-color: var(--sys-color-surface-paper);
            flex-shrink: 0;
            text-align: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              font-size: 0.75rem;
              color: var(--sys-color-text-tertiary);
              font-weight: 400;
              letter-spacing: 0.025em;
              display: inline-flex;
              align-items: center;
              gap: 4px;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex-shrink: 0;
                  opacity: 0.6;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-left: 6px;
                opacity: 0.5;
                font-size: 0.7rem;
              `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_13__.WIDGET_VERSION] })] }) })] })] }));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_7__.versionManager;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9xdWVyeS1zaW1wbGUvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZDO0FBRVU7QUFFaEQsTUFBTSxVQUFVLEdBQUcsQ0FBQyxLQUF3QixFQUFFLEVBQUU7SUFDckQsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUc7SUFDdEIsTUFBTSxFQUFFLFNBQVMsS0FBZ0IsS0FBSyxFQUFoQixNQUFNLFVBQUssS0FBSyxFQUFoQyxhQUF3QixDQUFRO0lBRXRDLE1BQU0sT0FBTyxHQUFHLHFEQUFVLENBQUMsK0JBQStCLEVBQUUsU0FBUyxDQUFDO0lBQ3RFLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTyx1RkFBSyxTQUFTLEVBQUUsT0FBTyxJQUFNLE1BQWEsRUFBSTtJQUMvRCxPQUFPLGdFQUFDLEdBQUcsa0JBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUseUVBQUcsSUFBTSxNQUFNLEVBQUk7QUFDMUQsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNYNEM7QUFFVztBQUVqRCxNQUFNLFdBQVcsR0FBRyxDQUFDLEtBQXdCLEVBQUUsRUFBRTtJQUN0RCxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRztJQUN0QixNQUFNLEVBQUUsU0FBUyxLQUFnQixLQUFLLEVBQWhCLE1BQU0sVUFBSyxLQUFLLEVBQWhDLGFBQXdCLENBQVE7SUFFdEMsTUFBTSxPQUFPLEdBQUcscURBQVUsQ0FBQywrQkFBK0IsRUFBRSxTQUFTLENBQUM7SUFDdEUsSUFBSSxDQUFDLEdBQUc7UUFBRSxPQUFPLHVGQUFLLFNBQVMsRUFBRSxPQUFPLElBQU0sTUFBYSxFQUFJO0lBQy9ELE9BQU8sZ0VBQUMsR0FBRyxrQkFBQyxTQUFTLEVB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RUFDekQsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxJQUFJLFNBQVMsRUFDN0MseUJBQXlCLEVBQUUsSUFBSSxDQUFDLG1DQUFtQyxFQUNuRSxvQkFBb0IsRUFBRSxJQUFJLENBQUMsMEJBQTBCLEVBQ3JELFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFDL0IsV0FBVyxFQUFFLElBQUksQ0FBQyxlQUFlLEVBQ2pDLFlBQVksRUFBRSxJQUFJLENBQUMsWUFBWSxHQUMvQixHQUMwQixHQUMxQixFQUVOLHlFQUFLLEdBQUcsRUFBRSw4Q0FBRzs7Ozs7O1dBTVosWUFDQywyRUFBTSxHQUFHLEVBQUUsOENBQUc7Ozs7Ozs7O2FBUWIsYUFFQywwRUFDRSxLQUFLLEVBQUMsSUFBSSxFQUNWLE1BQU0sRUFBQyxJQUFJLEVBQ1gsT0FBTyxFQUFDLFdBQVcsRUFDbkIsSUFBSSxFQUFDLE1BQU0sRUFDWCxNQUFNLEVBQUMsY0FBYyxFQUNyQixXQUFXLEVBQUMsR0FBRyxFQUNmLEdBQUcsRUFBRSw4Q0FBRzs7O2lCQUdQLGFBRUQsOEVBQVUsTUFBTSxFQUFDLGtCQUFrQixHQUFFLEVBQ3JDLDhFQUFVLE1BQU0sRUFBQyxlQUFlLEdBQUUsSUFDOUIsOEJBRU4sMkVBQU0sR0FBRyxFQUFFLDhDQUFHOzs7O2VBSWIsa0JBQ0cscURBQWMsSUFDWCxJQUNGLEdBQ0gsSUFDRixJQUNBLENBQ1Q7SUFDSCxDQUFDOztBQWp4Q00scUJBQWMsR0FBRyw0REFBYztpRUFYbkIsTUFBTTtBQWd5Q25CLFNBQVMsMkJBQTJCLENBQUMsR0FBRyxJQUFJLHFCQUF1QixHQUFHLEdBQUcsRUFBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL2Rvd24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL2Rvd24uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi9tb3JlLWhvcml6b250YWwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvZXhwYW5kLWFsbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2Nsb3NlLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvd2FybmluZy5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9pY29uLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9jb25maWcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGF0YS1hY3Rpb25zL2FkZC10by1tYXAtYWN0aW9uLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kYXRhLWFjdGlvbnMvaW5kZXgudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2RhdGEtYWN0aW9ucy96b29tLXRvLWFjdGlvbi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGVmYXVsdC1xdWVyeS1pdGVtLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2Fzc2V0cy9pY29ucy96b29tLXRvLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2J1ZmZlci1pbnB1dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9jb21wb25lbnRzL2ZlYXR1cmUtaW5mby50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLWRyYXcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvZ2VvbWV0cnktZnJvbS1kcy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLW1hcC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ncmFwaGljcy1sYXllci11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2hvb2tzL3VzZS1hY2N1bXVsYXRlZC1yZWNvcmRzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLWV2ZW50LWhhbmRsaW5nLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLWdyYXBoaWNzLWxheWVyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLW1hcC12aWV3LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLXNlbGVjdGlvbi1yZXN0b3JhdGlvbi50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2hvb2tzL3VzZS11cmwtY29uc3VtcHRpb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ob29rcy91c2Utd2lkZ2V0LXZpc2liaWxpdHkudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ob29rcy91c2Utem9vbS10by1yZWNvcmRzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaW50ZXJhY3RpdmUtZHJhdy10b29sLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2xvYWRpbmctcmVzdWx0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXJlc3VsdC1pdGVtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXJlc3VsdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWNvbnRleHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1mb3JtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGFiZWwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1saXN0LWlubGluZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxpc3QtcG9wcGVyLXdyYXBwZXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1saXN0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stc3BhdGlhbC1mb3JtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2sudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9yZXN1bHRzLW1hbmFnZW1lbnQtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9zZWxlY3Rpb24tdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9zaW1wbGUtbGlzdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS90cmFuc2xhdGlvbnMvZGVmYXVsdC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3VzZUF1dG9IZWlnaHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvd2lkZ2V0LWNvbmZpZy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC1jb250ZXh0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3pvb20tdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvdmVyc2lvbi1tYW5hZ2VyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3ZlcnNpb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uL2NvbW1vbi1jb21wb25lbnRzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uL2RhdGEtc291cmNlLXRpcC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi9kZWJ1Zy1sb2dnZXIudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbi91c2UtZHMtZXhpc3RzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uL3V0aWxzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZS9lbW90aW9uXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJlc3JpL2dlb21ldHJ5L0V4dGVudFwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1hcmNnaXNcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXRoZW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZS9yZWFjdFwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwid2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb25cIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWNvcmUvbGliL3NldC1wdWJsaWMtcGF0aC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgRG93bkZpbGxlZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFJpZ2h0RmlsbGVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEFycm93TGVmdE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgQ29sbGFwc2VBbGxPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBFeHBhbmRBbGxPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFRyYXNoT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEluZm9PdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm0xNCA0LTYgOC02LTh6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTQgMiA4IDYtOCA2elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTIgN2ExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJtNSAxYTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMG02IDBhMSAxIDAgMSAxIDIgMCAxIDEgMCAwIDEtMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMTUgNy41YS41Mi41MiAwIDAgMS0uNTE2LjUyN0gyLjk3Nkw2LjQ3MyAxMS42YS41MzUuNTM1IDAgMCAxIDAgLjc0Ni41MS41MSAwIDAgMS0uNzMgMEwxIDcuNWw0Ljc0My00Ljg0NmEuNTEuNTEgMCAwIDEgLjczIDAgLjUzNS41MzUgMCAwIDEgMCAuNzQ2TDIuOTc2IDYuOTczaDExLjUwOGMuMjg1IDAgLjUxNi4yMzYuNTE2LjUyN1xcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTUuMDM2IDYuMTQ2YS41LjUgMCAwIDAtLjcwOCAwTDEuMTQ2IDkuMzI4YS41LjUgMCAxIDAgLjcwOC43MDhsMi4zMjgtMi4zMjlWMTQuNWgxVjcuNzA3bDIuMzI4IDIuMzI5YS41LjUgMCAxIDAgLjcwOC0uNzA4elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTQuMzI4IDE0LjM1NGEuNS41IDAgMCAwIC43MDggMGwzLjE4Mi0zLjE4MmEuNS41IDAgMSAwLS43MDgtLjcwOGwtMi4zMjggMi4zMjlWNmgtMXY2Ljc5M2wtMi4zMjgtMi4zMjhhLjUuNSAwIDEgMC0uNzA4LjcwN3pcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk00LjY1MyAxMy44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4TDEwLjI0IDggNC42NTMgMi44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4LjU0LjU0IDAgMCAxIC43MzggMGw1Ljk1NiA1LjVhLjQ4NS40ODUgMCAwIDEgMCAuNzA4bC01Ljk1NiA1LjVhLjU0LjU0IDAgMCAxLS43MzggMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTguNzQ1IDggNi4xIDYuMWEuNTI3LjUyNyAwIDEgMS0uNzQ1Ljc0Nkw4IDguNzQ2bC02LjEgNi4xYS41MjcuNTI3IDAgMSAxLS43NDYtLjc0Nmw2LjEtNi4xLTYuMS02LjFhLjUyNy41MjcgMCAwIDEgLjc0Ni0uNzQ2bDYuMSA2LjEgNi4xLTYuMWEuNTI3LjUyNyAwIDAgMSAuNzQ2Ljc0NnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNNiA2LjVhLjUuNSAwIDAgMSAxIDB2NmEuNS41IDAgMCAxLTEgMHpNOS41IDZhLjUuNSAwIDAgMC0uNS41djZhLjUuNSAwIDAgMCAxIDB2LTZhLjUuNSAwIDAgMC0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTExIDBINWExIDEgMCAwIDAtMSAxdjJILjVhLjUuNSAwIDAgMCAwIDFoMS42bC44MSAxMS4xYTEgMSAwIDAgMCAuOTk1LjloOC4xOWExIDEgMCAwIDAgLjk5NS0uOUwxMy45IDRoMS42YS41LjUgMCAwIDAgMC0xSDEyVjFhMSAxIDAgMCAwLTEtMW0wIDNWMUg1djJ6bTEuODk1IDFoLTkuNzlsLjggMTFoOC4xOXpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNE04IDRhLjkwNS45MDUgMCAwIDAtLjkuOTk1bC4zNSAzLjUwN2EuNTUyLjU1MiAwIDAgMCAxLjEgMGwuMzUtMy41MDdBLjkwNS45MDUgMCAwIDAgOCA0bTEgN2ExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk04IDUuNWExIDEgMCAxIDAgMC0yIDEgMSAwIDAgMCAwIDJNNi41IDcuNUEuNS41IDAgMCAxIDcgN2gxLjV2NC41aDFhLjUuNSAwIDAgMSAwIDFoLTNhLjUuNSAwIDAgMSAwLTFoMVY4SDdhLjUuNSAwIDAgMS0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAyLjEyNSAxNC4zMzQgMTRIMS42Njd6bS0uODgyLS40N2ExIDEgMCAwIDEgMS43NjUgMGw2LjMzMyAxMS44NzRBMSAxIDAgMCAxIDE0LjMzNCAxNUgxLjY2N2ExIDEgMCAwIDEtLjg4Mi0xLjQ3ek04IDQuODc0YS45MDUuOTA1IDAgMCAwLS45Ljk5NWwuMzUgMy41MDdhLjU1Mi41NTIgMCAwIDAgMS4xIDBMOC45IDUuODdhLjkwNS45MDUgMCAwIDAtLjktLjk5NW0xIDdhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDIwIDIwXFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNOC41IDNBNS41IDUuNSAwIDAgMSAxNCA4LjVhNS41IDUuNSAwIDAgMS0xLjI3MyAzLjUyN2w0LjA1MyA0LjA1NGEuNzUuNzUgMCAxIDEtMS4wNiAxLjA2bC00LjA1NC00LjA1M2E1LjUgNS41IDAgMCAxLTMuNTI3IDEuMjczIDUuNSA1LjUgMCAxIDEgMC0xMUg4LjV6bTAgMS41aC0uMzYxYTQgNCAwIDEgMCAwIDggNCA0IDAgMCAwIDAtOHpcXFwiPjwvcGF0aD48cmVjdCB3aWR0aD1cXFwiMTlcXFwiIGhlaWdodD1cXFwiMTlcXFwiIHg9XFxcIi41XFxcIiB5PVxcXCIuNVxcXCIgc3Ryb2tlPVxcXCIjMDAwXFxcIiByeD1cXFwiMS41XFxcIj48L3JlY3Q+PC9zdmc+XCIiLCJpbXBvcnQgdHlwZSB7IFNwYXRpYWxSZWxhdGlvbnNoaXAsIFVuaXRzIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHR5cGUgeyBJbW11dGFibGVPYmplY3QsIEltbXV0YWJsZUFycmF5LCBTcWxFeHByZXNzaW9uLCBVc2VEYXRhU291cmNlLCBJY29uUmVzdWx0LCBPcmRlckJ5T3B0aW9uIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBTaXplIH0gZnJvbSAnamltdS11aSdcblxuZXhwb3J0IGVudW0gQ3JlYXRlVG9vbFR5cGUge1xuICBQb2ludCA9ICdQb2ludCcsXG4gIFBvbHlsaW5lID0gJ1BvbHlsaW5lJyxcbiAgUG9seWdvbiA9ICdQb2x5Z29uJyxcbiAgUmVjdGFuZ2xlID0gJ1JlY3RhbmdsZScsXG4gIENpcmNsZSA9ICdDaXJjbGUnXG59XG5cbmV4cG9ydCBlbnVtIFNlbGVjdGlvblR5cGUge1xuICBOZXdTZWxlY3Rpb24gPSAnTkVXX1NFTEVDVElPTicsXG4gIEFkZFRvU2VsZWN0aW9uID0gJ0FERF9UT19DVVJSRU5UX1NFTEVDVElPTicsXG4gIFJlbW92ZUZyb21TZWxlY3Rpb24gPSAnUkVNT1ZFX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTdWJzZXRTZWxlY3Rpb24gPSAnU1VCU0VUX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTd2l0Y2hTZWxlY3Rpb24gPSAnU1dJVENIX0NVUlJFTlRfU0VMRUNUSU9OJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWVsZCB7XG4gIG5hbWU6IHN0cmluZ1xuICBhbGlhcz86IHN0cmluZ1xuICBsYWJlbD86IHN0cmluZ1xufVxuXG5leHBvcnQgZW51bSBRdWVyeUFycmFuZ2VUeXBlIHtcbiAgQmxvY2sgPSAnQkxPQ0snLFxuICBJbmxpbmUgPSAnSU5MSU5FJyxcbiAgUG9wcGVyID0gJ1BPUFBFUicsXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxGaWx0ZXJUeXBlIHtcbiAgQ3VycmVudE1hcEV4dGVudCA9ICdDdXJyZW50TWFwRXh0ZW50JyxcbiAgSW50ZXJhY3RpdmVEcmF3TW9kZSA9ICdJbnRlcmFjdGl2ZURyYXdNb2RlJyxcbiAgTm9uZSA9ICcnXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxSZWxhdGlvbiB7XG4gIEludGVyc2VjdCA9ICdpbnRlcnNlY3RzJyxcbiAgQ29udGFpbiA9ICdjb250YWlucycsXG4gIENyb3NzID0gJ2Nyb3NzZXMnLFxuICBFbnZlbG9wZUludGVyc2VjdCA9ICdlbnZlbG9wZS1pbnRlcnNlY3RzJyxcbiAgSW5kZXhJbnRlcnNlY3QgPSAnaW5kZXgtaW50ZXJzZWN0cycsXG4gIE92ZXJsYXAgPSAnb3ZlcmxhcHMnLFxuICBUb3VjaCA9ICd0b3VjaGVzJyxcbiAgV2l0aGluID0gJ3dpdGhpbicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3BhdGlhbEZpbHRlck9iaiB7XG4gIGdlb21ldHJ5OiBhbnlcbiAgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljXG4gIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhblxuICByZWxhdGlvbj86IFNwYXRpYWxSZWxhdGlvblxuICBidWZmZXI/OiB7IGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlIH1cbn1cblxuZXhwb3J0IGNvbnN0IG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsOiB7IFtrZXk6IHN0cmluZ106IFNwYXRpYWxSZWxhdGlvbnNoaXAgfSA9IHtcbiAgW1NwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5Db250YWluXTogJ2VzcmlTcGF0aWFsUmVsQ29udGFpbnMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkNyb3NzXTogJ2VzcmlTcGF0aWFsUmVsQ3Jvc3NlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uRW52ZWxvcGVJbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxFbnZlbG9wZUludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkluZGV4SW50ZXJzZWN0XTogJ2VzcmlTcGF0aWFsUmVsSW5kZXhJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5PdmVybGFwXTogJ2VzcmlTcGF0aWFsUmVsT3ZlcmxhcHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLlRvdWNoXTogJ2VzcmlTcGF0aWFsUmVsVG91Y2hlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uV2l0aGluXTogJ2VzcmlTcGF0aWFsUmVsV2l0aGluJ1xufVxuXG5leHBvcnQgZW51bSBVbml0VHlwZSB7XG4gIE1pbGVzID0gJ01pbGVzJyxcbiAgS2lsb21ldGVycyA9ICdLaWxvbWV0ZXJzJyxcbiAgRmVldCA9ICdGZWV0JyxcbiAgTWV0ZXJzID0gJ01ldGVycycsXG4gIE5hdXRpY2FsTWlsZXMgPSAnTmF1dGljYWxNaWxlcycsXG59XG5cbmV4cG9ydCBjb25zdCBtYXBKU0FQSVVuaXRUb0RzVW5pdDogeyBba2V5OiBzdHJpbmddOiBVbml0cyB9ID0ge1xuICBbVW5pdFR5cGUuTWlsZXNdOiAnZXNyaVNSVW5pdF9TdGF0dXRlTWlsZScsXG4gIFtVbml0VHlwZS5LaWxvbWV0ZXJzXTogJ2VzcmlTUlVuaXRfS2lsb21ldGVyJyxcbiAgW1VuaXRUeXBlLkZlZXRdOiAnZXNyaVNSVW5pdF9Gb290JyxcbiAgW1VuaXRUeXBlLk1ldGVyc106ICdlc3JpU1JVbml0X01ldGVyJyxcbiAgW1VuaXRUeXBlLk5hdXRpY2FsTWlsZXNdOiAnZXNyaVNSVW5pdF9OYXV0aWNhbE1pbGUnXG59XG5cbmV4cG9ydCBlbnVtIExpc3REaXJlY3Rpb24ge1xuICBIb3Jpem9udGFsID0gJ0hvcml6b250YWwnLFxuICBWZXJ0aWNhbCA9ICdWZXJ0aWNhbCcsXG59XG5cbmV4cG9ydCBlbnVtIFBhZ2luZ1R5cGUge1xuICBNdWx0aVBhZ2UgPSAnTXVsdGlQYWdlJyxcbiAgTGF6eUxvYWQgPSAnTGF6eUxvYWQnLFxuICBTaW1wbGUgPSAnU2ltcGxlJywgLy8gUmVuZGVyIGFsbCByZWNvcmRzIGF0IG9uY2UsIG5vIGxhenkgbG9hZGluZyBvciBwYWdpbmF0aW9uXG59XG5cbmV4cG9ydCBlbnVtIEZpZWxkc1R5cGUge1xuICBQb3B1cFNldHRpbmcgPSAnUG9wdXBTZXR0aW5nJyxcbiAgU2VsZWN0QXR0cmlidXRlcyA9ICdTZWxlY3RBdHRyaWJ1dGVzJyxcbn1cblxuZXhwb3J0IGVudW0gU29ydERpcmVjdGlvbiB7XG4gIEFzYyA9ICdBc2MnLFxuICBEZXNjID0gJ0Rlc2MnLFxufVxuXG5leHBvcnQgZW51bSBSZXN1bHRTZWxlY3RNb2RlIHtcbiAgU2luZ2xlID0gJ1NpbmdsZScsXG4gIE11bHRpcGxlID0gJ011bHRpcGxlJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTb3J0T3B0aW9uIHtcbiAgbmFtZTogc3RyaW5nXG4gIGRpcmVjdGlvbjogU29ydERpcmVjdGlvblxufVxuXG5leHBvcnQgZW51bSBTeW1ib2xUeXBlIHtcbiAgRGVmYXVsdFN5bWJvbCA9ICdEZWZhdWx0U3ltYm9sJyxcbiAgQ3VzdG9tU3ltYm9sID0gJ0N1c3RvbVN5bWJvbCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlJdGVtVHlwZSB7XG4gIGNvbmZpZ0lkOiBzdHJpbmdcbiAgaWNvbj86IEljb25SZXN1bHRcbiAgbmFtZT86IHN0cmluZ1xuICBkaXNwbGF5TGFiZWw/OiBib29sZWFuXG4gIHVzZURhdGFTb3VyY2U/OiBVc2VEYXRhU291cmNlXG4gIG91dHB1dERhdGFTb3VyY2VJZD86IHN0cmluZ1xuICB1c2VBdHRyaWJ1dGVGaWx0ZXI/OiBib29sZWFuXG4gIHVzZVNwYXRpYWxGaWx0ZXI/OiBib29sZWFuXG4gIGF0dHJpYnV0ZUZpbHRlckxhYmVsPzogc3RyaW5nXG4gIHNwYXRpYWxGaWx0ZXJMYWJlbD86IHN0cmluZ1xuICBhdHRyaWJ1dGVGaWx0ZXJEZXNjPzogc3RyaW5nXG4gIHNwYXRpYWxGaWx0ZXJEZXNjPzogc3RyaW5nXG4gIHJlc3VsdHNMYWJlbD86IHN0cmluZ1xuICBzcWxFeHByT2JqPzogU3FsRXhwcmVzc2lvblxuICBzcGF0aWFsTWFwV2lkZ2V0SWRzPzogc3RyaW5nW11cbiAgc3BhdGlhbEZpbHRlclR5cGVzPzogU3BhdGlhbEZpbHRlclR5cGVbXVxuICBzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXM/OiBDcmVhdGVUb29sVHlwZVtdXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcj86IGJvb2xlYW5cbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2U/OiBudW1iZXJcbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdD86IFVuaXRUeXBlXG4gIHNwYXRpYWxSZWxhdGlvbnM/OiBTcGF0aWFsUmVsYXRpb25bXVxuICBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz86IFVzZURhdGFTb3VyY2VbXVxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVTZWxlY3RUb29sPzogYm9vbGVhblxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXI/OiBib29sZWFuXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlPzogbnVtYmVyXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXQ/OiBVbml0VHlwZVxuICBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhPzogYm9vbGVhblxuICByZXN1bHRMaXN0RGlyZWN0aW9uPzogTGlzdERpcmVjdGlvblxuICByZXN1bHRQYWdpbmdTdHlsZT86IFBhZ2luZ1R5cGVcbiAgcmVzdWx0RmllbGRzVHlwZT86IEZpZWxkc1R5cGVcbiAgcmVzdWx0VGl0bGVGaWVsZHM/OiBzdHJpbmdbXVxuICByZXN1bHRUaXRsZUV4cHJlc3Npb24/OiBzdHJpbmdcbiAgcmVzdWx0RGlzcGxheUZpZWxkcz86IHN0cmluZ1tdXG4gIHJlc3VsdFN5bWJvbFR5cGU/OiBTeW1ib2xUeXBlXG4gIHJlc3VsdEN1c3RvbVN5bWJvbD86IGFueVxuICByZXN1bHRBbGxvd0NoYW5nZVN5bWJvbD86IGJvb2xlYW5cbiAgcmVzdWx0RXhwYW5kQnlEZWZhdWx0PzogYm9vbGVhblxuICByZXN1bHRTZWxlY3RNb2RlPzogUmVzdWx0U2VsZWN0TW9kZVxuICBhbGxvd0V4cG9ydD86IGJvb2xlYW5cbiAgc29ydE9wdGlvbnM/OiBPcmRlckJ5T3B0aW9uW11cbiAgaXRlbVNpemVNYXA/OiB7XG4gICAgYXJyYW5nZW1lbnRIb3Jpem9udGFsUG9wcGVyPzogU2l6ZU1hcFxuICB9XG4gIC8vIEdyb3VwaW5nIGZpZWxkc1xuICBncm91cElkPzogc3RyaW5nXG4gIGdyb3VwRGlzcGxheU5hbWU/OiBzdHJpbmdcbiAgc2VhcmNoQWxpYXM/OiBzdHJpbmdcbiAgc2hvcnRJZD86IHN0cmluZ1xuICB6b29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbiAgLy8gRGlzcGxheSBvcmRlciAobG93ZXIgbnVtYmVycyBhcHBlYXIgZmlyc3QsIG9wdGlvbmFsKVxuICBvcmRlcj86IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNpemVNYXAge1xuICBtaW5TaXplPzogU2l6ZVxuICBkZWZhdWx0U2l6ZT86IFNpemVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nQ29uZmlnIHtcbiAgcXVlcnlJdGVtcz86IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGFycmFuZ2VUeXBlOiBRdWVyeUFycmFuZ2VUeXBlXG4gIGFycmFuZ2VXcmFwPzogYm9vbGVhblxuICByZXN1bHRMaXN0RGlyZWN0aW9uPzogTGlzdERpcmVjdGlvblxuICByZXN1bHRQYWdpbmdTdHlsZT86IFBhZ2luZ1R5cGVcbiAgbGF6eUxvYWRJbml0aWFsUGFnZVNpemU/OiBudW1iZXJcbiAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodDogYm9vbGVhbiAvLyBVc2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAocmVxdWlyZWQgLSBpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KVxuICBoaWdobGlnaHRNYXBXaWRnZXRJZD86IHN0cmluZyAvLyBNYXAgd2lkZ2V0IElEIHRvIHVzZSBmb3IgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gIHNpemVNYXA/OiB7XG4gICAgYXJyYW5nZW1lbnRJY29uUG9wcGVyPzogU2l6ZU1hcFxuICB9XG59XG5cbmV4cG9ydCB0eXBlIElNQ29uZmlnID0gSW1tdXRhYmxlT2JqZWN0PFNldHRpbmdDb25maWc+XG5cblxuIiwiLyoqXG4gKiBDdXN0b20gXCJBZGQgdG8gTWFwXCIgZGF0YSBhY3Rpb24gZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIFxuICogVGhpcyBhY3Rpb24gcmVwbGFjZXMgdGhlIGZyYW1ld29yaydzIFwiU2hvdyBvbiBNYXBcIiBhY3Rpb24gd2l0aCBhIGN1c3RvbVxuICogaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MgKHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKS5cbiAqIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IGJlaGF2aW9yIHdpdGggcXVlcnkgcmVzdWx0cyBhbmQgcHJvcGVyIGludGVncmF0aW9uXG4gKiB3aXRoIHRoZSB3aWRnZXQncyBcIkNsZWFyIHJlc3VsdHNcIiBmdW5jdGlvbmFsaXR5LlxuICovXG5cbmltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgSW50bFNoYXBlLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB9IGZyb20gJy4uL3J1bnRpbWUvc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHR5cGUgeyBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcblxuLyoqXG4gKiBDcmVhdGVzIGEgY3VzdG9tIFwiQWRkIHRvIE1hcFwiIGRhdGEgYWN0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiBhbmQgZW5zdXJlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciB3aXRoIFF1ZXJ5U2ltcGxlJ3MgcXVlcnkgcmVzdWx0cyBieSB1c2luZyB0aGUgc2FtZSBzZWxlY3Rpb24gbWVjaGFuaXNtLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIHRoYXQgcHJvdmlkZXMgdGhpcyBhY3Rpb25cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIHNlbGVjdGlvbiBvbiB0aGUgb3JpZ2luIGxheWVyKVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcGFyYW0gcXVlcnlJdGVtIC0gT3B0aW9uYWwgcXVlcnkgaXRlbSBjb25maWd1cmF0aW9uIChmb3Igem9vbVRvU2VsZWN0ZWQgc2V0dGluZylcbiAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIHpvb20gb3ZlcnJpZGUgZnJvbSB0aGUgcXVlcnkgZm9ybVxuICogQHJldHVybnMgQSBEYXRhQWN0aW9uIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGJ5IERhdGFBY3Rpb25MaXN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZGRUb01hcEFjdGlvbihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UsXG4gIGludGw6IEludGxTaGFwZSxcbiAgcXVlcnlJdGVtPzogUXVlcnlJdGVtVHlwZSxcbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuKTogRGF0YUFjdGlvbiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGAke3dpZGdldElkfS1hZGRUb01hcGAsXG4gICAgbmFtZTogJ2FkZFRvTWFwJyxcbiAgICBsYWJlbDogaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdhZGRUb01hcCcsIGRlZmF1bHRNZXNzYWdlOiAnQWRkIHRvIG1hcCcgfSksXG4gICAgLy8gSWNvbiBtYXRjaGVzIHRoZSBmcmFtZXdvcmsncyBcIlNob3cgb24gTWFwXCIgYWN0aW9uIGZvciBjb25zaXN0ZW5jeVxuICAgIGljb246IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZycpLmRlZmF1bHQgfHwgcmVxdWlyZSgnLi4vcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnJyksXG4gICAgLy8gTm90ZTogSW5kZXggbWF5IG5vdCBjb250cm9sIHBvc2l0aW9uIGlmIGV4dHJhQWN0aW9ucyBhcmUgYWx3YXlzIGFwcGVuZGVkIGFmdGVyIGZyYW1ld29yayBhY3Rpb25zXG4gICAgaW5kZXg6IC0xMDAsXG4gICAgd2lkZ2V0SWQsXG4gICAgaW50bCxcbiAgICBzdXBwb3J0UHJvdmlkZXJXaWRnZXQ6IHRydWUsXG4gICAgXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIGFjdGlvbiBjYW4gcHJvY2VzcyB0aGUgZ2l2ZW4gZGF0YSBzZXRzLlxuICAgICAqIFN1cHBvcnRzIFJlY29yZHMgbGV2ZWwgYWN0aW9ucyB3aXRoIGZlYXR1cmUgZGF0YSByZWNvcmRzLlxuICAgICAqL1xuICAgIGlzU3VwcG9ydGVkOiBhc3luYyAoZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSwgZGF0YUxldmVsOiBEYXRhTGV2ZWwsIGFjdGlvbldpZGdldElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGFjdGlvbldpZGdldElkLFxuICAgICAgICBkYXRhTGV2ZWwsXG4gICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFNcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc3VwcG9ydCBSZWNvcmRzIGxldmVsIGFjdGlvbnNcbiAgICAgIGlmIChkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm90IFJlY29yZHMgbGV2ZWwnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBOZWVkIGF0IGxlYXN0IG9uZSBkYXRhIHNldCB3aXRoIHJlY29yZHNcbiAgICAgIGlmICghZGF0YVNldHMgfHwgZGF0YVNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtaXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZGF0YSBzZXRzJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWNvcmRzIGFuZCBvdXRwdXQgZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IGhhc1JlY29yZHMgPSBkYXRhU2V0cy5zb21lKGRzID0+IGRzLnJlY29yZHMgJiYgZHMucmVjb3Jkcy5sZW5ndGggPiAwKVxuICAgICAgY29uc3Qgc3VwcG9ydGVkID0gaGFzUmVjb3JkcyAmJiAhIW91dHB1dERTXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgcmVzdWx0OiBzdXBwb3J0ZWQsXG4gICAgICAgIGhhc1JlY29yZHMsXG4gICAgICAgIHJlY29yZHNDb3VudDogZGF0YVNldHMucmVkdWNlKChzdW0sIGRzKSA9PiBzdW0gKyAoZHMucmVjb3Jkcz8ubGVuZ3RoIHx8IDApLCAwKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIHN1cHBvcnRlZFxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGFjdGlvbiBieSBzZWxlY3RpbmcgcmVjb3JkcyB1c2luZyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLlxuICAgICAqL1xuICAgIG9uRXhlY3V0ZTogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgYWN0aW9uV2lkZ2V0SWQsXG4gICAgICAgIGRhdGFMZXZlbCxcbiAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREU1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKCFvdXRwdXREUyB8fCBkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogIW91dHB1dERTID8gJ05vIG91dHB1dERTJyA6ICdOb3QgUmVjb3JkcyBsZXZlbCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbGxlY3QgYWxsIHJlY29yZHMgZnJvbSBhbGwgZGF0YSBzZXRzXG4gICAgICBjb25zdCBhbGxSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgICAgIGRhdGFTZXRzLmZvckVhY2goZGF0YVNldCA9PiB7XG4gICAgICAgIGlmIChkYXRhU2V0LnJlY29yZHMgJiYgZGF0YVNldC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBGaWx0ZXIgdG8gb25seSBGZWF0dXJlRGF0YVJlY29yZCB0eXBlc1xuICAgICAgICAgIGNvbnN0IGZlYXR1cmVSZWNvcmRzID0gZGF0YVNldC5yZWNvcmRzLmZpbHRlcihcbiAgICAgICAgICAgIChyZWNvcmQpOiByZWNvcmQgaXMgRmVhdHVyZURhdGFSZWNvcmQgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcmVjb3JkICYmIHR5cGVvZiAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXRHZW9tZXRyeSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgICBhbGxSZWNvcmRzLnB1c2goLi4uZmVhdHVyZVJlY29yZHMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChhbGxSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICdObyBmZWF0dXJlIHJlY29yZHMgZm91bmQnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZXQgcmVjb3JkIElEc1xuICAgICAgY29uc3QgcmVjb3JkSWRzID0gYWxsUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGFsbFJlY29yZHMubGVuZ3RoLFxuICAgICAgICByZWNvcmRJZHM6IHJlY29yZElkcy5zbGljZSgwLCAxMCksIC8vIExvZyBmaXJzdCAxMCBJRHNcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWRcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVzZSBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzIC0gc2VsZWN0cyBvbiBvcmlnaW4gbGF5ZXIgYW5kIHB1Ymxpc2hlcyBzZWxlY3Rpb24gbWVzc2FnZXNcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IGJlaGF2aW9yIHdpdGggcXVlcnkgcmVzdWx0cyBhbmQgcHJvcGVyIGludGVncmF0aW9uIHdpdGggXCJDbGVhciByZXN1bHRzXCJcbiAgICAgIHRyeSB7XG4gICAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCBhbGxSZWNvcmRzLCB0cnVlKVxuICAgICAgICBcbiAgICAgICAgLy8gTm90ZTogWm9vbSBpcyBub3cgaGFuZGxlZCBieSB0aGUgc2VwYXJhdGUgXCJab29tIFRvXCIgYWN0aW9uIGluIHRoZSBEYXRhQWN0aW9uTGlzdFxuICAgICAgICAvLyBVc2VycyBjYW4gY2xpY2sgXCJab29tIFRvXCIgZnJvbSB0aGUgYWN0aW9uIG1lbnUgaWYgdGhleSB3YW50IHRvIHpvb20gdG8gc2VsZWN0ZWQgcmVjb3Jkc1xuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IHNlbGVjdGVkIHJlY29yZHMgYW5kIHB1Ymxpc2hlZCBzZWxlY3Rpb24gbWVzc2FnZSdcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIENsZWFudXAgbWV0aG9kIChyZXF1aXJlZCBieSBEYXRhQWN0aW9uIGludGVyZmFjZSlcbiAgICAgKi9cbiAgICBkZXN0cm95OiAoKTogdm9pZCA9PiB7XG4gICAgICAvLyBObyBjbGVhbnVwIG5lZWRlZFxuICAgIH1cbiAgfVxufVxuXG4iLCJpbXBvcnQgeyB0eXBlIERhdGFSZWNvcmRTZXQsIHR5cGUgRGF0YUFjdGlvbiwgRGF0YUxldmVsLCB0eXBlIERhdGFTb3VyY2UsIHR5cGUgSW50bFNoYXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgY3JlYXRlQWRkVG9NYXBBY3Rpb24gfSBmcm9tICcuL2FkZC10by1tYXAtYWN0aW9uJ1xuaW1wb3J0IHsgY3JlYXRlWm9vbVRvQWN0aW9uIH0gZnJvbSAnLi96b29tLXRvLWFjdGlvbidcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcblxuLyoqXG4gKiBRdWVyeVNpbXBsZSBDdXN0b20gRGF0YSBBY3Rpb25zXG4gKiBcbiAqIFJldHVybnMgY3VzdG9tIGRhdGEgYWN0aW9ucyBmb3IgdGhlIHdpZGdldC5cbiAqIEluY2x1ZGVzIGN1c3RvbSBcIlpvb20gVG9cIiBhbmQgXCJBZGQgdG8gTWFwXCIgYWN0aW9ucyB0aGF0IHVzZSBRdWVyeVNpbXBsZSdzIHByb2Nlc3Nlcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAobnVsbC91bmRlZmluZWQgaWYgbm90IGF2YWlsYWJsZSlcbiAqIEBwYXJhbSBtYXBWaWV3IC0gVGhlIG1hcCB2aWV3IChudWxsL3VuZGVmaW5lZCBpZiBub3QgYXZhaWxhYmxlKVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcGFyYW0gcXVlcnlJdGVtIC0gT3B0aW9uYWwgcXVlcnkgaXRlbSBjb25maWd1cmF0aW9uXG4gKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSB6b29tIG92ZXJyaWRlIGZyb20gdGhlIHF1ZXJ5IGZvcm1cbiAqIEByZXR1cm5zIEFycmF5IG9mIGN1c3RvbSBEYXRhQWN0aW9uIG9iamVjdHMgKGVtcHR5IGlmIGNvbmRpdGlvbnMgbm90IG1ldClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4dHJhQWN0aW9ucyhcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCB1bmRlZmluZWQsXG4gIGludGw6IEludGxTaGFwZSxcbiAgcXVlcnlJdGVtPzogUXVlcnlJdGVtVHlwZSxcbiAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuKTogRGF0YUFjdGlvbltdIHtcbiAgY29uc3QgYWN0aW9uczogRGF0YUFjdGlvbltdID0gW11cbiAgXG4gIC8vIEFkZCBcIlpvb20gVG9cIiBhY3Rpb24gaWYgd2UgaGF2ZSBtYXBWaWV3IGFuZCBpbnRsXG4gIGlmIChtYXBWaWV3ICYmIGludGwpIHtcbiAgICBhY3Rpb25zLnB1c2goY3JlYXRlWm9vbVRvQWN0aW9uKHdpZGdldElkLCBtYXBWaWV3LCBpbnRsKSlcbiAgfVxuICBcbiAgLy8gQWRkIFwiQWRkIHRvIE1hcFwiIGFjdGlvbiBpZiB3ZSBoYXZlIG91dHB1dERTIGFuZCBpbnRsXG4gIGlmIChvdXRwdXREUyAmJiBpbnRsKSB7XG4gICAgYWN0aW9ucy5wdXNoKGNyZWF0ZUFkZFRvTWFwQWN0aW9uKHdpZGdldElkLCBvdXRwdXREUywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpKVxuICB9XG4gIFxuICByZXR1cm4gYWN0aW9uc1xufVxuXG4iLCIvKipcbiAqIEN1c3RvbSBcIlpvb20gVG9cIiBkYXRhIGFjdGlvbiBmb3IgUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJab29tIFRvXCIgYWN0aW9uIHdpdGggYSBjdXN0b21cbiAqIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHpvb20gbG9naWMgKG1hcFZpZXcuZ29UbyB3aXRoIHBhZGRpbmcpLlxuICogVGhpcyBlbnN1cmVzIGNvbnNpc3RlbnQgem9vbSBiZWhhdmlvciB3aXRoIHByb3BlciBwYWRkaW5nLlxuICovXG5cbmltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgSW50bFNoYXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IHsgem9vbVRvUmVjb3JkcyB9IGZyb20gJy4uL3J1bnRpbWUvem9vbS11dGlscydcbmltcG9ydCB0eXBlIHsgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogQ3JlYXRlcyBhIGN1c3RvbSBcIlpvb20gVG9cIiBkYXRhIGFjdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyB6b29tIGxvZ2ljLlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJab29tIFRvXCIgYWN0aW9uIGFuZCBlbnN1cmVzIGNvbnNpc3RlbnRcbiAqIHpvb20gYmVoYXZpb3Igd2l0aCBwYWRkaW5nIHVzaW5nIG1hcFZpZXcuZ29UbygpLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIHRoYXQgcHJvdmlkZXMgdGhpcyBhY3Rpb25cbiAqIEBwYXJhbSBtYXBWaWV3IC0gVGhlIG1hcCB2aWV3IHRvIHpvb20gKE1hcFZpZXcgb3IgU2NlbmVWaWV3KVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcmV0dXJucyBBIERhdGFBY3Rpb24gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgYnkgRGF0YUFjdGlvbkxpc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVpvb21Ub0FjdGlvbihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgdW5kZWZpbmVkLFxuICBpbnRsOiBJbnRsU2hhcGVcbik6IERhdGFBY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIGlkOiBgJHt3aWRnZXRJZH0tem9vbVRvYCxcbiAgICBuYW1lOiAncXVlcnlTaW1wbGVab29tVG8nLCAvLyBVc2UgdW5pcXVlIG5hbWUgdG8gYXZvaWQgY29uZmxpY3Qgd2l0aCBmcmFtZXdvcmsgYWN0aW9uXG4gICAgbGFiZWw6IGludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnem9vbVRvU2VsZWN0ZWQnLCBkZWZhdWx0TWVzc2FnZTogJ1pvb20gdG8gc2VsZWN0ZWQnIH0pLFxuICAgIC8vIFVzZSB0aGUgc2FtZSBpY29uIGFzIHRoZSBmcmFtZXdvcmsncyB6b29tIGFjdGlvbiAoZnJvbSBFeEIgY29uZmlndXJhdGlvbiBwYWdlKVxuICAgIGljb246IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3pvb20tdG8uc3ZnJykuZGVmYXVsdCB8fCByZXF1aXJlKCcuLi9ydW50aW1lL2Fzc2V0cy9pY29ucy96b29tLXRvLnN2ZycpLFxuICAgIGluZGV4OiAtOTAsIC8vIFBvc2l0aW9uIGJlZm9yZSBBZGQgdG8gTWFwICgtMTAwKVxuICAgIHdpZGdldElkLFxuICAgIGludGwsXG4gICAgc3VwcG9ydFByb3ZpZGVyV2lkZ2V0OiB0cnVlLFxuICAgIFxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhpcyBhY3Rpb24gY2FuIHByb2Nlc3MgdGhlIGdpdmVuIGRhdGEgc2V0cy5cbiAgICAgKiBTdXBwb3J0cyBSZWNvcmRzIGxldmVsIGFjdGlvbnMgd2l0aCBmZWF0dXJlIGRhdGEgcmVjb3Jkcy5cbiAgICAgKi9cbiAgICBpc1N1cHBvcnRlZDogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICd6b29tVG8taXNTdXBwb3J0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgYWN0aW9uV2lkZ2V0SWQsXG4gICAgICAgIGRhdGFMZXZlbCxcbiAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIW1hcFZpZXdcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc3VwcG9ydCBSZWNvcmRzIGxldmVsIGFjdGlvbnNcbiAgICAgIGlmIChkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnem9vbVRvLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vdCBSZWNvcmRzIGxldmVsJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTmVlZCBhdCBsZWFzdCBvbmUgZGF0YSBzZXQgd2l0aCByZWNvcmRzIGFuZCBhIG1hcCB2aWV3XG4gICAgICBpZiAoIWRhdGFTZXRzIHx8IGRhdGFTZXRzLmxlbmd0aCA9PT0gMCB8fCAhbWFwVmlldykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1pc1N1cHBvcnRlZCcsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICFkYXRhU2V0cyB8fCBkYXRhU2V0cy5sZW5ndGggPT09IDAgPyAnTm8gZGF0YSBzZXRzJyA6ICdObyBtYXBWaWV3J1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWNvcmRzXG4gICAgICBjb25zdCBoYXNSZWNvcmRzID0gZGF0YVNldHMuc29tZShkcyA9PiBkcy5yZWNvcmRzICYmIGRzLnJlY29yZHMubGVuZ3RoID4gMClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnem9vbVRvLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgcmVzdWx0OiBoYXNSZWNvcmRzLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRhdGFTZXRzLnJlZHVjZSgoc3VtLCBkcykgPT4gc3VtICsgKGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwKSwgMClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVybiBoYXNSZWNvcmRzXG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgYWN0aW9uIGJ5IHpvb21pbmcgdG8gcmVjb3JkcyB1c2luZyB0aGUgc2hhcmVkIHpvb20gdXRpbGl0eS5cbiAgICAgKi9cbiAgICBvbkV4ZWN1dGU6IGFzeW5jIChkYXRhU2V0czogRGF0YVJlY29yZFNldFtdLCBkYXRhTGV2ZWw6IERhdGFMZXZlbCwgYWN0aW9uV2lkZ2V0SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnem9vbVRvLW9uRXhlY3V0ZScsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBhY3Rpb25XaWRnZXRJZCxcbiAgICAgICAgZGF0YUxldmVsLFxuICAgICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc01hcFZpZXc6ICEhbWFwVmlld1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKCFtYXBWaWV3IHx8IGRhdGFMZXZlbCAhPT0gRGF0YUxldmVsLlJlY29yZHMpIHtcbiAgICAgICAgLy8gQlVHLUdSQVBISUNTLTAwMTogWm9vbSBvcGVyYXRpb25zIGZhaWwgd2hlbiBncmFwaGljcyBsYXllciBpcyBkaXNhYmxlZFxuICAgICAgICBpZiAoIW1hcFZpZXcpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0JVRycsIHtcbiAgICAgICAgICAgIGJ1Z0lkOiAnQlVHLUdSQVBISUNTLTAwMScsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ0dSQVBISUNTJyxcbiAgICAgICAgICAgIGV2ZW50OiAnem9vbS1vcGVyYXRpb24tZmFpbGVkLWdyYXBoaWNzLWxheWVyLWRpc2FibGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgb3BlcmF0aW9uOiAnem9vbS10by1zZWxlY3RlZC1hY3Rpb24nLFxuICAgICAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdab29tIHRvIHNlbGVjdGVkIGFjdGlvbiBhdHRlbXB0ZWQgYnV0IG1hcFZpZXcgaXMgdW5hdmFpbGFibGUgKGxpa2VseSBiZWNhdXNlIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgaXMgZGlzYWJsZWQpJyxcbiAgICAgICAgICAgIHdvcmthcm91bmQ6ICdFbmFibGUgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBpbiB3aWRnZXQgc2V0dGluZ3MnLFxuICAgICAgICAgICAgdGFyZ2V0UmVzb2x1dGlvbjogJ3IwMTkuMCdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAhbWFwVmlldyA/ICdObyBtYXBWaWV3JyA6ICdOb3QgUmVjb3JkcyBsZXZlbCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbGxlY3QgYWxsIHJlY29yZHMgZnJvbSBhbGwgZGF0YSBzZXRzXG4gICAgICBjb25zdCBhbGxSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgICAgIGRhdGFTZXRzLmZvckVhY2goZGF0YVNldCA9PiB7XG4gICAgICAgIGlmIChkYXRhU2V0LnJlY29yZHMgJiYgZGF0YVNldC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBGaWx0ZXIgdG8gb25seSBGZWF0dXJlRGF0YVJlY29yZCB0eXBlc1xuICAgICAgICAgIGNvbnN0IGZlYXR1cmVSZWNvcmRzID0gZGF0YVNldC5yZWNvcmRzLmZpbHRlcihcbiAgICAgICAgICAgIChyZWNvcmQpOiByZWNvcmQgaXMgRmVhdHVyZURhdGFSZWNvcmQgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcmVjb3JkICYmIHR5cGVvZiAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXRHZW9tZXRyeSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgICBhbGxSZWNvcmRzLnB1c2goLi4uZmVhdHVyZVJlY29yZHMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChhbGxSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZmVhdHVyZSByZWNvcmRzIGZvdW5kJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVXNlIHRoZSBzaGFyZWQgem9vbSB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICAgIGF3YWl0IHpvb21Ub1JlY29yZHMobWFwVmlldywgYWxsUmVjb3JkcylcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnem9vbVRvLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgem9vbWVkIHRvIGZlYXR1cmVzJyxcbiAgICAgICAgICByZWNvcmRzQ291bnQ6IGFsbFJlY29yZHMubGVuZ3RoXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICd6b29tVG8tb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogQ2xlYW51cCBtZXRob2QgKHJlcXVpcmVkIGJ5IERhdGFBY3Rpb24gaW50ZXJmYWNlKVxuICAgICAqL1xuICAgIGRlc3Ryb3k6ICgpOiB2b2lkID0+IHtcbiAgICAgIC8vIE5vIGNsZWFudXAgbmVlZGVkXG4gICAgfVxuICB9XG59XG5cbiIsImltcG9ydCB7XG4gIHR5cGUgUXVlcnlJdGVtVHlwZSxcbiAgQ3JlYXRlVG9vbFR5cGUsXG4gIFVuaXRUeXBlLFxuICBTcGF0aWFsUmVsYXRpb24sXG4gIExpc3REaXJlY3Rpb24sXG4gIFBhZ2luZ1R5cGUsXG4gIEZpZWxkc1R5cGUsXG4gIFN5bWJvbFR5cGVcbn0gZnJvbSAnLi9jb25maWcnXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1FVRVJZX0lURU06IFBhcnRpYWw8UXVlcnlJdGVtVHlwZT4gPSB7XG4gIGljb246IG51bGwsXG4gIGRpc3BsYXlMYWJlbDogdHJ1ZSxcbiAgc3FsRXhwck9iajogbnVsbCxcbiAgdXNlQXR0cmlidXRlRmlsdGVyOiB0cnVlLFxuICB1c2VTcGF0aWFsRmlsdGVyOiB0cnVlLFxuICBzcGF0aWFsTWFwV2lkZ2V0SWRzOiBbXSxcbiAgc3BhdGlhbEZpbHRlclR5cGVzOiBbXSxcbiAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzOiBbXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9pbnQsXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9seWxpbmUsXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9seWdvbixcbiAgICBDcmVhdGVUb29sVHlwZS5SZWN0YW5nbGUsXG4gICAgQ3JlYXRlVG9vbFR5cGUuQ2lyY2xlXG4gIF0sXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcjogZmFsc2UsXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlOiAwLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJVbml0OiBVbml0VHlwZS5NZXRlcnMsXG4gIHNwYXRpYWxSZWxhdGlvbnM6IFtTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0XSxcbiAgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM6IFtdLFxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVTZWxlY3RUb29sOiBmYWxzZSxcbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyOiBmYWxzZSxcbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2U6IDAsXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXQ6IFVuaXRUeXBlLk1ldGVycyxcbiAgcmVzdWx0TGlzdERpcmVjdGlvbjogTGlzdERpcmVjdGlvbi5WZXJ0aWNhbCxcbiAgcmVzdWx0UGFnaW5nU3R5bGU6IFBhZ2luZ1R5cGUuTXVsdGlQYWdlLFxuICByZXN1bHRGaWVsZHNUeXBlOiBGaWVsZHNUeXBlLlBvcHVwU2V0dGluZyxcbiAgcmVzdWx0U3ltYm9sVHlwZTogU3ltYm9sVHlwZS5EZWZhdWx0U3ltYm9sLFxuICByZXN1bHRDdXN0b21TeW1ib2w6IHtcbiAgICBhbmdsZTogMCxcbiAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgb3V0bGluZToge1xuICAgICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgc3R5bGU6ICdlc3JpU0xTU29saWQnLFxuICAgICAgdHlwZTogJ2VzcmlTTFMnLFxuICAgICAgd2lkdGg6IDFcbiAgICB9LFxuICAgIHNpemU6IDYsXG4gICAgc3R5bGU6ICdlc3JpU01TQ2lyY2xlJyxcbiAgICB0eXBlOiAnZXNyaVNNUycsXG4gICAgeG9mZnNldDogMCxcbiAgICB5b2Zmc2V0OiAwXG4gIH0sXG4gIHJlc3VsdEFsbG93Q2hhbmdlU3ltYm9sOiBmYWxzZSxcbiAgYWxsb3dFeHBvcnQ6IGZhbHNlLFxuICBzb3J0T3B0aW9uczogW10sXG4gIHpvb21Ub1NlbGVjdGVkOiB0cnVlLFxuICBpdGVtU2l6ZU1hcDoge1xuICAgIGFycmFuZ2VtZW50SG9yaXpvbnRhbFBvcHBlcjoge1xuICAgICAgbWluU2l6ZTogeyB3aWR0aDogMzAwLCBoZWlnaHQ6IDMwMCB9LFxuICAgICAgZGVmYXVsdFNpemU6IHsgd2lkdGg6IDM2MCwgaGVpZ2h0OiA0ODAgfVxuICAgIH1cbiAgfVxufVxuXG5cbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMSAxdjE0aDE0VjF6bTkuMDgyIDEzYy0uMDA1LS4wMzctLjExMy0uMjc0LS4xMjItLjMwOWExLjUgMS41IDAgMCAwIC43MTgtMS4yNjcgMS4yIDEuMiAwIDAgMC0uMDUzLS4zNThjLjE1Mi0uMTc2LjI2My0uMzgzLjMyNi0uNjA3cS4wNDYuMDAzLjA5My4wMDNjLjMuMDAyLjU5My0uMDkxLjgzNi0uMjY2cS4wNi4wNjYuMTI2LjEyNGMuNDIuNDEyLjk3Ny42NTQgMS41NjQuNjhIMTR2MmgtMy45MThNMTQgMTFoLS40M2ExLjQ2IDEuNDYgMCAwIDEtLjkwNi0uNDMzYy0uMjY0LS4yMy0uMjU4LS43ODItLjYxNy0uNzgyLS40ODIgMC0uNTIuNjc3LTEuMDAzLjY3Ny0uMjE5IDAtLjM4LS4xNzctLjU5OS0uMTc3LS4xOTMgMC0uNDQ1LjEwMi0uNDQ1LjI5M3YuNTAyYzAgLjQyNC0uNTA2LjUwOC0uNTA2LjkzNCAwIC4xNzEuMTg0LjIzNi4xODQuNDEgMCAuNTgtLjg5My41MDItLjg5MyAxLjA4IDAgLjE5MS4yMTUuMzA1LjIxNS40ODZWMTRINi4zNzVxLjA4Ny0uMjQzLjA5LS41MDJjMC0uNTQ3LTEuMDQzLS4zOTMtMS4yMDctLjcyLS40MDctLjgxMy42OTMtMS4wMjIuNjkzLTEuNjczIDAtLjE2LS4wODItLjQ4OC0uMzM0LS41MTMtLjM1MS0uMDM1LS40NDMuMTU0LS43OTcuMTU0YS40MDYuNDA2IDAgMCAxLS40MzctLjM2YzAtLjM4Ni4zMDgtLjU2Ni4zMDgtLjk1MiAwLS4yNS0uMTAyLS4zOTMtLjEwMi0uNjQzYS42Mi42MiAwIDAgMSAuNTktLjY0M2MuMzIzIDAgLjQ2NC4yNjQuNjE4LjU0YS42NC42NCAwIDAgMCAuNjE3LjMwOGMuNDkgMCAuNzk4LS42MS43OTgtLjk3N2EuNDcuNDcgMCAwIDEgLjQzNy0uNDg4Yy4zNDcgMCAuNDc2LjM2LjgyNC4zNi41NyAwIC41NS0uNzU2IDEuMDUzLTEuMDMuNjE4LS4zMzIuNDM4LTEuMDUyLjM2LTEuNDQtLjAzMi0uMTY5LjI5LS41LjQ2NC0uNDg3LjcyLjA1LjQxMi0uNTQuNDEyLS44MjNxMC0uMDczLjAyMi0uMTQyYy4xMTEtLjMzMi41OTUtLjQzOC41OTUtLjgzNiAwLS4yODEtLjIzMy0uNDEtLjIzMy0uNjkzYS42NS42NSAwIDAgMSAuMjItLjQ0SDE0ek0yIDE0VjJoOC4yNzhjLS4wMTMuMDc3LS4xMzIuMzU2LS4xMzIuNDQgMCAuMTk0LjAzOC4zODcuMTEyLjU2N2ExLjYgMS42IDAgMCAwLS40MjIuNjQzIDEuNCAxLjQgMCAwIDAtLjA3NC40NDIgMS43IDEuNyAwIDAgMC0uNTM2LjQzIDEuMzIgMS4zMiAwIDAgMC0uMzIgMS4wOTFxLjA0Ni4yMDUuMDY2LjQxNGEyIDIgMCAwIDAtLjY0OS42NyAxLjQ2IDEuNDYgMCAwIDAtLjY3NC0uMTY2IDEuNDUgMS40NSAwIDAgMC0xLjM4MyAxLjA4NiAxLjQ0IDEuNDQgMCAwIDAtMS4wODYtLjQ2OSAxLjYyIDEuNjIgMCAwIDAtMS41OTEgMS42NDNjMCAuMjU0LjExMy4yOTMuMDg0LjU3NHMtLjI5LjUzNS0uMjkgMS4wMjJhMS4zNyAxLjM3IDAgMCAwIC45ODQgMS4yOSAxLjU4IDEuNTggMCAwIDAtLjAwMyAxLjU0OWMuMTQzLjI4Ni42MzYuNzc0LjUzNC43NzR6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiY3VycmVudENvbG9yXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0wIDEwLjVWMTJhMSAxIDAgMCAwIDEgMWgxLjV2LTFIMXYtMS41ek0yLjUgMUgxYTEgMSAwIDAgMC0xIDF2MS41aDFWMmgxLjV6TTAgOC41aDF2LTNIMHpNNC41IDF2MWgzVjF6bTUgMHYxSDExdjEuNWgxVjJhMSAxIDAgMCAwLTEtMXpNNi4zMTggMTMuNjgyYTQuNSA0LjUgMCAwIDAgNS45OTEuMzM0bDEuODQ4IDEuODQ4LjcwNy0uNzA3LTEuODQ3LTEuODQ4YTQuNSA0LjUgMCAxIDAtNi42OTkuMzczbS43MDctLjcwN2EzLjUgMy41IDAgMSAxIDQuOTUtNC45NSAzLjUgMy41IDAgMCAxLTQuOTUgNC45NU05IDEzdi0ySDd2LTFoMlY4aDF2MmgydjFoLTJ2MnpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAganN4LFxyXG4gIGhvb2tzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIE51bWVyaWNJbnB1dCwgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBkaXN0YW5jZTogbnVtYmVyXHJcbiAgdW5pdDogVW5pdFR5cGVcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBCdWZmZXJJbnB1dCAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBkaXN0YW5jZSA9IDAsIHVuaXQgPSBVbml0VHlwZS5NZXRlcnMsIG9uQnVmZmVyQ2hhbmdlIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oamltdVVJTWVzc2FnZXMsIGRlZmF1bHRNZXNzYWdlKVxyXG4gIGNvbnN0IFtkLCBzZXREXSA9IFJlYWN0LnVzZVN0YXRlKGRpc3RhbmNlKVxyXG4gIGNvbnN0IFt1LCBzZXRVXSA9IFJlYWN0LnVzZVN0YXRlKHVuaXQpXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxyXG4gICAgaWYgKGRpc3RhbmNlICE9PSBkKSB7XHJcbiAgICAgIHNldEQoZGlzdGFuY2UpXHJcbiAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAodW5pdCAhPT0gdSkge1xyXG4gICAgICBzZXRVKHVuaXQpXHJcbiAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICAgIH1cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXHJcbiAgfSwgW2Rpc3RhbmNlLCB1bml0XSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgc2V0RChkaXN0YW5jZSlcclxuICAgICAgc2V0VSh1bml0KVxyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgZGlzdGFuY2UsIHVuaXQsIG9uQnVmZmVyQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGlzdGFuY2VDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcclxuICAgIHNldEQodmFsdWUpXHJcbiAgfSwgW10pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURpc3RhbmNlQWNjZXB0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcclxuICAgIHNldEQodmFsdWUpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZSh2YWx1ZSwgdSlcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIHVdKVxyXG5cclxuICBjb25zdCBoYW5kbGVCdWZmZXJVbml0Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcclxuICAgIHNldFUoZS50YXJnZXQudmFsdWUpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZShkLCBlLnRhcmdldC52YWx1ZSlcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIGRdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICA8TnVtZXJpY0lucHV0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9XHJcbiAgICAgICAgY2xhc3NOYW1lPSdtci0xJ1xyXG4gICAgICAgIHZhbHVlPXtkfVxyXG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVEaXN0YW5jZUNoYW5nZX1cclxuICAgICAgICBvbkFjY2VwdFZhbHVlPXtoYW5kbGVEaXN0YW5jZUFjY2VwdGVkfVxyXG4gICAgICAvPlxyXG4gICAgICA8U2VsZWN0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3VuaXQnKX1cclxuICAgICAgICB2YWx1ZT17dX1cclxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlQnVmZmVyVW5pdENoYW5nZX1cclxuICAgICAgPlxyXG4gICAgICAgIHtPYmplY3QudmFsdWVzKFVuaXRUeXBlKS5tYXAoKHZhbHVlKSA9PiAoXHJcbiAgICAgICAgICA8b3B0aW9uIGtleT17dmFsdWV9IHZhbHVlPXt2YWx1ZX0+XHJcbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZShgdW5pdF8ke3ZhbHVlfWApfVxyXG4gICAgICAgICAgPC9vcHRpb24+XHJcbiAgICAgICAgKSl9XHJcbiAgICAgIDwvU2VsZWN0PlxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG4vLyBUaGlzIGZpbGUgaXMgZHVwbGljYXRlZCBmcm9tICcuLi8uLi8uLi8uLi9mZWF0dXJlLWluZm8vc3JjL3J1bnRpbWUvY29tcG9uZW50cy9mZWF0dXJlLWluZm8nXG5pbXBvcnQgeyBSZWFjdCwgY3NzLCBqc3gsIHR5cGUgRGF0YVNvdXJjZSwgaW5qZWN0SW50bCwgdHlwZSBJbnRsU2hhcGUsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgUmlnaHRGaWxsZWQgfSBmcm9tICdqaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodCdcbmltcG9ydCB7IERvd25GaWxsZWQgfSBmcm9tICdqaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgZW51bSBMb2FkU3RhdHVzIHtcbiAgUGVuZGluZyA9ICdQZW5kaW5nJyxcbiAgRnVsZmlsbGVkID0gJ0Z1bGZpbGxlZCcsXG4gIFJlamVjdGVkID0gJ1JlamVjdGVkJ1xufVxuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBkYXRhU291cmNlOiBEYXRhU291cmNlXG4gIGdyYXBoaWM6IF9fZXNyaS5HcmFwaGljXG4gIHBvcHVwVGVtcGxhdGU6IF9fZXNyaS5Qb3B1cFRlbXBsYXRlXG4gIGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBfX2VzcmkuUG9wdXBUZW1wbGF0ZVxuICB0b2dnbGFibGU/OiBib29sZWFuXG4gIGV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgbG9hZFN0YXR1czogTG9hZFN0YXR1c1xuICBzaG93Q29udGVudDogYm9vbGVhblxufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgLmVzcmktd2lkZ2V0X19oZWFkaW5nIHtcbiAgICBmb250LXNpemU6IDAuODc1cmVtICFpbXBvcnRhbnQ7XG4gICAgZm9udC13ZWlnaHQ6IDUwMCAhaW1wb3J0YW50O1xuICAgIG1hcmdpbjogMDtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gIH1cblxuICAuZXNyaS1mZWF0dXJlX19jb250ZW50LWVsZW1lbnQge1xuICAgIHBhZGRpbmc6IDA7XG4gIH1cblxuICAuamltdS1idG4uZXhwYW5kZWQge1xuICAgIGFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7XG4gIH1cbiAgXG4gIC8vIExhcmdlciBleHBhbmQvY29sbGFwc2UgYnV0dG9uIGZvciBiZXR0ZXIgdG91Y2ggdGFyZ2V0c1xuICAuamltdS1idG5bYXJpYS1sYWJlbCo9XCJleHBhbmRcIl0sXG4gIC5qaW11LWJ0blthcmlhLWxhYmVsKj1cImNvbGxhcHNlXCJdIHtcbiAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgbWluLWhlaWdodDogMzJweDtcbiAgICBwYWRkaW5nOiA2cHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICB9XG5cbiAgLmVzcmktZmVhdHVyZS5lc3JpLXdpZGdldCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIH1cbmBcblxuaW50ZXJmYWNlIEV4dHJhUHJvcHMge1xuICBpbnRsOiBJbnRsU2hhcGVcbn1cblxuY2xhc3MgRmVhdHVyZUluZm8gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFByb3BzICYgRXh0cmFQcm9wcywgU3RhdGU+IHtcbiAgcHJpdmF0ZSBGZWF0dXJlOiB0eXBlb2YgX19lc3JpLkZlYXR1cmVcbiAgcHJpdmF0ZSBmZWF0dXJlOiBfX2VzcmkuRmVhdHVyZVxuICBwcml2YXRlIHJlYWRvbmx5IGZlYXR1cmVDb250YWluZXI6IFJlYWN0LlJlZk9iamVjdDxIVE1MSW5wdXRFbGVtZW50IHwgbnVsbD5cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBleHBhbmRCeURlZmF1bHQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCByZWNvcmRJZCA9IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8uT0JKRUNUSUQgfHwgdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5vYmplY3RpZCB8fCAndW5rbm93bidcbiAgICBjb25zdCBpbml0aWFsU2hvd0NvbnRlbnQgPSAhdG9nZ2xhYmxlIHx8IGV4cGFuZEJ5RGVmYXVsdFxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgZXZlbnQ6ICdGZWF0dXJlSW5mby1jb25zdHJ1Y3RvcicsXG4gICAgICByZWNvcmRJZCxcbiAgICAgIHRvZ2dsYWJsZSxcbiAgICAgIGV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgIGluaXRpYWxTaG93Q29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5mZWF0dXJlQ29udGFpbmVyID0gUmVhY3QuY3JlYXRlUmVmKClcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2hvd0NvbnRlbnQ6IGluaXRpYWxTaG93Q29udGVudCxcbiAgICAgIGxvYWRTdGF0dXM6IExvYWRTdGF0dXMuUGVuZGluZ1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmUoKVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IFByb3BzKSB7XG4gICAgaWYgKHRoaXMuZmVhdHVyZSkge1xuICAgICAgaWYgKHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHxcbiAgICAgICAgcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5ncmFwaGljICE9PSB0aGlzLnByb3BzLmdyYXBoaWMpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95RmVhdHVyZSgpXG4gICAgICAgIHRoaXMuY3JlYXRlRmVhdHVyZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZlYXR1cmUudmlzaWJsZUVsZW1lbnRzID0gdGhpcy5nZXRWaXNpYmxlRWxlbWVudHMoKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTeW5jIGV4cGFuZEJ5RGVmYXVsdCBwcm9wIGNoYW5nZXMgKHdoZW4gdXNlciBjbGlja3MgRXhwYW5kIEFsbC9Db2xsYXBzZSBBbGwpXG4gICAgLy8gVGhpcyBlbnN1cmVzIGFsbCBpdGVtcyByZXNwZWN0IHRoZSBnbG9iYWwgZXhwYW5kL2NvbGxhcHNlIHN0YXRlXG4gICAgaWYgKHByZXZQcm9wcy5leHBhbmRCeURlZmF1bHQgIT09IHRoaXMucHJvcHMuZXhwYW5kQnlEZWZhdWx0KSB7XG4gICAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBleHBhbmRCeURlZmF1bHQgfSA9IHRoaXMucHJvcHNcbiAgICAgIGNvbnN0IHJlY29yZElkID0gdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5PQkpFQ1RJRCB8fCB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lm9iamVjdGlkIHx8ICd1bmtub3duJ1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICdleHBhbmRCeURlZmF1bHQtcHJvcC1jaGFuZ2VkJyxcbiAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgIHByZXZFeHBhbmRCeURlZmF1bHQ6IHByZXZQcm9wcy5leHBhbmRCeURlZmF1bHQsXG4gICAgICAgIG5ld0V4cGFuZEJ5RGVmYXVsdDogZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgICB0b2dnbGFibGUsXG4gICAgICAgIGN1cnJlbnRTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgd2lsbFVwZGF0ZVN0YXRlOiB0b2dnbGFibGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKHRvZ2dsYWJsZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd0NvbnRlbnQ6IGV4cGFuZEJ5RGVmYXVsdCB9LCAoKSA9PiB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgICAgICBldmVudDogJ0ZlYXR1cmVJbmZvLXN0YXRlLXVwZGF0ZWQnLFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICBuZXdTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIExvZyBhbGwgY29tcG9uZW50RGlkVXBkYXRlIGNhbGxzIHRvIHRyYWNrIHJlbW91bnRzXG4gICAgY29uc3QgcmVjb3JkSWQgPSB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lk9CSkVDVElEIHx8IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8ub2JqZWN0aWQgfHwgJ3Vua25vd24nXG4gICAgaWYgKHByZXZQcm9wcy5ncmFwaGljICE9PSB0aGlzLnByb3BzLmdyYXBoaWMgfHwgXG4gICAgICAgIHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHxcbiAgICAgICAgcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICdGZWF0dXJlSW5mby1wcm9wcy1jaGFuZ2VkLXJlY3JlYXRlJyxcbiAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgIGdyYXBoaWNDaGFuZ2VkOiBwcmV2UHJvcHMuZ3JhcGhpYyAhPT0gdGhpcy5wcm9wcy5ncmFwaGljLFxuICAgICAgICBwb3B1cFRlbXBsYXRlQ2hhbmdlZDogcHJldlByb3BzLnBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSxcbiAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGVDaGFuZ2VkOiBwcmV2UHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUsXG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdDogdGhpcy5wcm9wcy5leHBhbmRCeURlZmF1bHQsXG4gICAgICAgIGN1cnJlbnRTaG93Q29udGVudDogdGhpcy5zdGF0ZS5zaG93Q29udGVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lGZWF0dXJlICgpIHtcbiAgICB0aGlzLmZlYXR1cmUgJiYgIXRoaXMuZmVhdHVyZS5kZXN0cm95ZWQgJiYgdGhpcy5mZWF0dXJlLmRlc3Ryb3koKVxuICB9XG5cbiAgZ2V0VmlzaWJsZUVsZW1lbnRzICgpIHtcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBzaG93Q29udGVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IGV4cGFuZGVkID0gdG9nZ2xhYmxlID8gc2hvd0NvbnRlbnQgOiB0cnVlXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB0cnVlLFxuICAgICAgY29udGVudDoge1xuICAgICAgICBmaWVsZHM6IGV4cGFuZGVkLFxuICAgICAgICB0ZXh0OiBleHBhbmRlZCxcbiAgICAgICAgbWVkaWE6IGV4cGFuZGVkLFxuICAgICAgICBhdHRhY2htZW50czogZXhwYW5kZWRcbiAgICAgIH0sXG4gICAgICBsYXN0RWRpdGVkSW5mbzogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjcmVhdGVGZWF0dXJlICgpIHtcbiAgICBsZXQgZmVhdHVyZU1vZHVsZVByb21pc2VcbiAgICBpZiAodGhpcy5GZWF0dXJlKSB7XG4gICAgICBmZWF0dXJlTW9kdWxlUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGZlYXR1cmVNb2R1bGVQcm9taXNlID0gbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAgICdlc3JpL3dpZGdldHMvRmVhdHVyZSdcbiAgICAgIF0pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgIFtcbiAgICAgICAgICB0aGlzLkZlYXR1cmVcbiAgICAgICAgXSA9IG1vZHVsZXNcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBmZWF0dXJlTW9kdWxlUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIC8vIENoZWNrIGlmIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkIGJlZm9yZSB0cnlpbmcgdG8gYXBwZW5kXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIGVycm9ycyB3aGVuIGNvbXBvbmVudCB1bm1vdW50cyBkdXJpbmcgYXN5bmMgbW9kdWxlIGxvYWRpbmdcbiAgICAgIGlmICghdGhpcy5mZWF0dXJlQ29udGFpbmVyLmN1cnJlbnQpIHtcbiAgICAgICAgLy8gQ29tcG9uZW50IHdhcyB1bm1vdW50ZWQsIGFib3J0XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudCAmJiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdqaW11LXdpZGdldCdcbiAgICAgIHRoaXMuZmVhdHVyZUNvbnRhaW5lci5jdXJyZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcilcblxuICAgICAgY29uc3Qgb3JpZ2luRFMgPSB0aGlzLnByb3BzLmRhdGFTb3VyY2UuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICAgICAgY29uc3Qgcm9vdERhdGFTb3VyY2UgPSBvcmlnaW5EUz8uWzBdPy5nZXRSb290RGF0YVNvdXJjZSgpXG5cbiAgICAgIHRoaXMuZGVzdHJveUZlYXR1cmUoKVxuICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLnByb3BzLmdyYXBoaWMubGF5ZXIgYXMgX19lc3JpLkZlYXR1cmVMYXllclxuICAgICAgaWYgKHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSkge1xuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZVxuICAgICAgfSBlbHNlIGlmIChsYXllcikge1xuICAgICAgICAvLyBzZXQgcG9wdXBUZW1wbGF0ZSB3aXRoIGxheWVyJ3MgcG9wdXBUZW1wbGF0ZSBvciBkZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IGxheWVyLnBvcHVwVGVtcGxhdGUgPz8gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9wcy5ncmFwaGljLnBvcHVwVGVtcGxhdGUgPSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9XG4gICAgICBpZiAobGF5ZXIgJiYgIWxheWVyLnBvcHVwVGVtcGxhdGUpIHtcbiAgICAgICAgbGF5ZXIucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSB8fCB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9XG4gICAgICB0aGlzLmZlYXR1cmUgPSBuZXcgdGhpcy5GZWF0dXJlKHtcbiAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBzcGF0aWFsUmVmZXJlbmNlOiB0aGlzLnByb3BzLmRhdGFTb3VyY2U/LmxheWVyPy5zcGF0aWFsUmVmZXJlbmNlIHx8IG51bGwsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgbWFwOiByb290RGF0YVNvdXJjZT8ubWFwIHx8IG51bGwsXG4gICAgICAgIGdyYXBoaWM6IHRoaXMucHJvcHMuZ3JhcGhpYyxcbiAgICAgICAgdmlzaWJsZUVsZW1lbnRzOiB0aGlzLmdldFZpc2libGVFbGVtZW50cygpXG4gICAgICB9KVxuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGxvYWRTdGF0dXM6IExvYWRTdGF0dXMuRnVsZmlsbGVkIH0pXG4gICAgfSlcbiAgfVxuXG4gIHRvZ2dsZUV4cGFuZGVkID0gKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dDb250ZW50OiAhdGhpcy5zdGF0ZS5zaG93Q29udGVudCB9KVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBpbnRsIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBzaG93Q29udGVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmVhdHVyZS1pbmZvLWNvbXBvbmVudCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIHAtMScgY3NzPXtzdHlsZX0+XG4gICAgICAgIHt0b2dnbGFibGUgJiYgKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiBzaG93Q29udGVudCA/ICdjb2xsYXBzZScgOiAnZXhwYW5kJyB9KX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnamltdS1vdXRsaW5lLWluc2lkZSBmbGV4LXNocmluay0wJywgeyBleHBhbmRlZDogc2hvd0NvbnRlbnQgfSl9XG4gICAgICAgICAgICB2YXJpYW50PSd0ZXh0J1xuICAgICAgICAgICAgY29sb3I9J2luaGVyaXQnXG4gICAgICAgICAgICBpY29uXG4gICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRXhwYW5kZWR9XG4gICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgbWluLXdpZHRoOiAzMnB4O1xuICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICAgICAgICAgICAgICBwYWRkaW5nOiA2cHg7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7c2hvd0NvbnRlbnQgPyA8RG93bkZpbGxlZCBzaXplPSdtJy8+IDogPFJpZ2h0RmlsbGVkIHNpemU9J20nIGF1dG9GbGlwLz59XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LWdyb3ctMScgcmVmPXt0aGlzLmZlYXR1cmVDb250YWluZXJ9IC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgaW5qZWN0SW50bChGZWF0dXJlSW5mbylcblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIEltbXV0YWJsZUFycmF5LCBsb2Rhc2gsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZSwgdXRpbHMsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBKaW11TWFwVmlld0NvbXBvbmVudCwgdHlwZSBKaW11TWFwVmlldywgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xyXG5pbXBvcnQgeyBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgdHlwZSB7IENyZWF0ZVRvb2xUeXBlLCBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IHsgSW50ZXJhY3RpdmVEcmF3IH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS1kcmF3LXRvb2wnXHJcbmltcG9ydCB7IEJ1ZmZlcklucHV0IH0gZnJvbSAnLi9idWZmZXItaW5wdXQnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBlbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBidWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgYnVmZmVyVW5pdDogVW5pdFR5cGVcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbiAgb25HZW9tZXRyeUNoYW5nZTogKGdlb206IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21EcmF3IChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uR2VvbWV0cnlDaGFuZ2UsIGNyZWF0ZVRvb2xUeXBlcywgbWFwV2lkZ2V0SWRzLCBlbmFibGVCdWZmZXIsIGJ1ZmZlckRpc3RhbmNlLCBidWZmZXJVbml0LCBvbkJ1ZmZlckNoYW5nZSwgd2lkZ2V0SWQgfSA9IHByb3BzXHJcbiAgY29uc3QgW2ppbXVNYXBWaWV3LCBzZXRKaW11TWFwVmlld10gPSBSZWFjdC51c2VTdGF0ZTxKaW11TWFwVmlldz4obnVsbClcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGppbXVVSU1lc3NhZ2VzLCBkZWZhdWx0TWVzc2FnZSlcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcbiAgY29uc3QgZ2V0TGF5ZXJGdW5SZWYgPSBSZWFjdC51c2VSZWY8KCkgPT4gX19lc3JpLkdyYXBoaWNzTGF5ZXI+KG51bGwpXHJcbiAgY29uc3QgYnVmZmVyT3BlcmF0b3JSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLmJ1ZmZlck9wZXJhdG9yPihudWxsKVxyXG4gIGNvbnN0IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLmdlb2Rlc2ljQnVmZmVyT3BlcmF0b3I+KG51bGwpXHJcbiAgY29uc3QgZ2VvbWV0cnlTZXJ2aWNlUmVmID0gUmVhY3QudXNlUmVmPHsgZ2VvbWV0cnlTZXJ2aWNlOiBfX2VzcmkuZ2VvbWV0cnlTZXJ2aWNlLCBidWZmZXJQYXJhbWV0ZXJzOiB0eXBlb2YgX19lc3JpLkJ1ZmZlclBhcmFtZXRlcnMgfT4obnVsbClcclxuICBjb25zdCBnZW9tZXRyeVJlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuR2VvbWV0cnk+KG51bGwpXHJcbiAgY29uc3QgYnVmZmVyRGlzdGFuY2VSZWYgPSBSZWFjdC51c2VSZWYoYnVmZmVyRGlzdGFuY2UpXHJcbiAgY29uc3QgYnVmZmVyVW5pdFJlZiA9IFJlYWN0LnVzZVJlZihidWZmZXJVbml0KVxyXG4gIGNvbnN0IGJ1ZmZlcmVkR3JhcGhpY1JlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuR3JhcGhpYz4obnVsbClcclxuXHJcbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XHJcbiAgICBpZiAoZW5hYmxlQnVmZmVyKSB7XHJcbiAgICAgIC8vIFBhcmVudCBjb21wb25lbnQgcXVlcnktdGFzay1zcGF0aWFsLWZvcm0gd2lsbCByZXNldCBidWZmZXIgcGFyYW1ldGVyIHdoZW4gZmlsdGVyIHR5cGUgY2hhbmdlcyxcclxuICAgICAgLy8gc28gZGVmZXIgdGhlIGluaXQgYnVmZmVyIG9wdGlvbiBpbiBvcmRlciBub3QgdG8gYmUgb3ZlcnJpZGUgYnkgaXRzIHBhcmVudC5cclxuICAgICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcclxuICAgICAgICBvbkJ1ZmZlckNoYW5nZShidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdClcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xyXG4gICAgICAnZXNyaS9HcmFwaGljJ1xyXG4gICAgXSkudGhlbigobW9kdWxlcykgPT4ge1xyXG4gICAgICBjb25zdCBHcmFwaGljID0gbW9kdWxlc1swXVxyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudCA9IG5ldyBHcmFwaGljKHtcclxuICAgICAgICBzeW1ib2w6IHtcclxuICAgICAgICAgIHR5cGU6ICdzaW1wbGUtZmlsbCcsXHJcbiAgICAgICAgICBjb2xvcjogWzUxLCA1MSwgMjA0LCAwLjVdLFxyXG4gICAgICAgICAgc3R5bGU6ICdzb2xpZCcsXHJcbiAgICAgICAgICBvdXRsaW5lOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiBbNTEsIDUxLCAyMDQsIDAuOF0sXHJcbiAgICAgICAgICAgIHdpZHRoOiAxXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBjb25zdCBhcHBseUJ1ZmZlckVmZmVjdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmICghZ2VvbWV0cnlSZWYuY3VycmVudCB8fCAhZW5hYmxlQnVmZmVyIHx8IGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPT09IDApIHtcclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBudWxsXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSBlbmQgdXNlciB1c2VzIGEgcG9pbnQgb3IgbGluZSBxdWVyeSBnZW9tZXRyeSwgdGhlbiB0aGUgbmVnYXRpdmUgYnVmZmVyIHdpbGwgbm90IHdvcmsgKHNhbWUgZWZmZWN0IGFzIHRoZXJlIGlzIG5vIGJ1ZmZlcilcclxuICAgIGNvbnN0IGlzUG9pbnROZWdhdGl2ZUJ1ZmZlciA9IChnZW9tZXRyeVJlZi5jdXJyZW50Py50eXBlID09PSAncG9pbnQnIHx8IGdlb21ldHJ5UmVmLmN1cnJlbnQ/LnR5cGUgPT09ICdtdWx0aXBvaW50JykgJiYgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA8IDBcclxuICAgIGNvbnN0IGlzTGluZU5lZ2F0aXZlQnVmZmVyID0gZ2VvbWV0cnlSZWYuY3VycmVudD8udHlwZSA9PT0gJ3BvbHlsaW5lJyAmJiBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50IDwgMFxyXG4gICAgaWYgKGlzUG9pbnROZWdhdGl2ZUJ1ZmZlciB8fCBpc0xpbmVOZWdhdGl2ZUJ1ZmZlcikge1xyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IG51bGxcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZ2VvbWV0cnkgPSBnZW9tZXRyeVJlZi5jdXJyZW50XHJcbiAgICAvLyBodHRwczovL2RldmVsb3BlcnMuYXJjZ2lzLmNvbS9qYXZhc2NyaXB0L2xhdGVzdC9hcGktcmVmZXJlbmNlL2VzcmktZ2VvbWV0cnktZ2VvbWV0cnlFbmdpbmUuaHRtbCNidWZmZXJcclxuICAgIGlmIChnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc0dlb2dyYXBoaWMgJiYgIWdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UuaXNXR1M4NCkge1xyXG4gICAgICBjb25zdCBzZXJ2aWNlVXJsID0gdXRpbHMuZ2V0R2VvbWV0cnlTZXJ2aWNlKClcclxuICAgICAgaWYgKCFnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGNvbnN0IG1vZHVsZXMgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcclxuICAgICAgICAgICdlc3JpL3Jlc3QvZ2VvbWV0cnlTZXJ2aWNlJyxcclxuICAgICAgICAgICdlc3JpL3Jlc3Qvc3VwcG9ydC9CdWZmZXJQYXJhbWV0ZXJzJ1xyXG4gICAgICAgIF0pXHJcbiAgICAgICAgZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnQgPSB7XHJcbiAgICAgICAgICBnZW9tZXRyeVNlcnZpY2U6IG1vZHVsZXNbMF0sXHJcbiAgICAgICAgICBidWZmZXJQYXJhbWV0ZXJzOiBtb2R1bGVzWzFdXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHsgZ2VvbWV0cnlTZXJ2aWNlLCBidWZmZXJQYXJhbWV0ZXJzOiBCdWZmZXJQYXJhbWV0ZXJzIH0gPSBnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudFxyXG4gICAgICBjb25zdCBwb2x5Z29ucyA9IGF3YWl0IGdlb21ldHJ5U2VydmljZS5idWZmZXIoc2VydmljZVVybCwgbmV3IEJ1ZmZlclBhcmFtZXRlcnMoe1xyXG4gICAgICAgIGRpc3RhbmNlczogW2J1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnRdLFxyXG4gICAgICAgIHVuaXQ6IGxvZGFzaC5rZWJhYkNhc2UoYnVmZmVyVW5pdFJlZi5jdXJyZW50KSBhcyBhbnksXHJcbiAgICAgICAgZ2VvZGVzaWM6IHRydWUsXHJcbiAgICAgICAgYnVmZmVyU3BhdGlhbFJlZmVyZW5jZTogZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSxcclxuICAgICAgICBvdXRTcGF0aWFsUmVmZXJlbmNlOiBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLFxyXG4gICAgICAgIGdlb21ldHJpZXM6IFtnZW9tZXRyeV1cclxuICAgICAgfSkpXHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gcG9seWdvbnNbMF1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc1dHUzg0IHx8IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2U/LmlzV2ViTWVyY2F0b3IpIHtcclxuICAgICAgICBpZiAoIWdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50ID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlKCdlc3JpL2dlb21ldHJ5L29wZXJhdG9ycy9nZW9kZXNpY0J1ZmZlck9wZXJhdG9yJylcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuaXNMb2FkZWQoKSkge1xyXG4gICAgICAgICAgYXdhaXQgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmxvYWQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5leGVjdXRlKFxyXG4gICAgICAgICAgZ2VvbWV0cnkgYXMgX19lc3JpLkdlb21ldHJ5VW5pb24sXHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB1bml0OiBsb2Rhc2gua2ViYWJDYXNlKGJ1ZmZlclVuaXRSZWYuY3VycmVudCkgYXMgYW55XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICghYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZSgnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvYnVmZmVyT3BlcmF0b3InKVxyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IGJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuZXhlY3V0ZShcclxuICAgICAgICAgIGdlb21ldHJ5IGFzIF9fZXNyaS5HZW9tZXRyeVVuaW9uLFxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdW5pdDogbG9kYXNoLmtlYmFiQ2FzZShidWZmZXJVbml0UmVmLmN1cnJlbnQpIGFzIGFueVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFtlbmFibGVCdWZmZXJdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKS5yZW1vdmVBbGwoKVxyXG4gICAgICBvbkdlb21ldHJ5Q2hhbmdlKG51bGwpXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIG9uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XHJcbiAgICAvLyBjbGVhciBkcmF3aW5nIGdyYXBoaWNzIGJlZm9yZSBzd2l0Y2hpbmcgbWFwIHZpZXdcclxuICAgIGNvbnN0IGxheWVyID0gZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KClcclxuICAgIGlmIChsYXllcikge1xyXG4gICAgICBsYXllci5yZW1vdmVBbGwoKVxyXG4gICAgICBvbkdlb21ldHJ5Q2hhbmdlKG51bGwpXHJcbiAgICB9XHJcbiAgICBzZXRKaW11TWFwVmlldyhqaW11TWFwVmlldz8udmlldyAhPSBudWxsID8gamltdU1hcFZpZXcgOiBudWxsKVxyXG4gIH0sIFtvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlQnVmZmVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRpc3RhbmNlLCB1bml0KSA9PiB7XHJcbiAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50ID0gZGlzdGFuY2VcclxuICAgIGJ1ZmZlclVuaXRSZWYuY3VycmVudCA9IHVuaXRcclxuICAgIGFwcGx5QnVmZmVyRWZmZWN0KClcclxuICAgIG9uQnVmZmVyQ2hhbmdlKGRpc3RhbmNlLCB1bml0KVxyXG4gIH0sIFtvbkJ1ZmZlckNoYW5nZSwgYXBwbHlCdWZmZXJFZmZlY3RdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEcmF3RW5kID0gUmVhY3QudXNlQ2FsbGJhY2soKGdyYXBoaWMsIGdldExheWVyRnVuLCBjbGVhckFmdGVyQXBwbHkpID0+IHtcclxuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgPSBnZXRMYXllckZ1blxyXG4gICAgY29uc3QgbGF5ZXIgPSBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKVxyXG4gICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBnZW9tZXRyeSBpcyB0aGUgc2FtZSBhcyB0aGUgcHJldmlvdXMgb25lLCBvbmx5IHRoZSBjbGVhckFmdGVyQXBwbHkgaXMgY2hhbmdlZC5cclxuICAgIGlmIChnZW9tZXRyeVJlZi5jdXJyZW50ICE9PSBncmFwaGljPy5nZW9tZXRyeSkge1xyXG4gICAgICBnZW9tZXRyeVJlZi5jdXJyZW50ID0gZ3JhcGhpYz8uZ2VvbWV0cnlcclxuICAgICAgYXBwbHlCdWZmZXJFZmZlY3QoKS50aGVuKCgpID0+IHtcclxuICAgICAgICBpZiAoYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkpIHtcclxuICAgICAgICAgIGxheWVyPy5hZGQoYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgb25HZW9tZXRyeUNoYW5nZShncmFwaGljPy5nZW9tZXRyeSwgbGF5ZXIsIGdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseSlcclxuICB9LCBbb25HZW9tZXRyeUNoYW5nZSwgYXBwbHlCdWZmZXJFZmZlY3RdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICB7XHJcbiAgICAgICAgbWFwV2lkZ2V0SWRzPy5tYXAoKG1hcFdpZGdldElkLCB4KSA9PiAoXHJcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcclxuICAgICAgICAgICAga2V5PXt4fSB1c2VNYXBXaWRnZXRJZD17bWFwV2lkZ2V0SWR9IG9uQWN0aXZlVmlld0NoYW5nZT17aGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApKVxyXG4gICAgICB9XHJcbiAgICAgIHtqaW11TWFwVmlldz8udmlldyAmJiAoXHJcbiAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgPEludGVyYWN0aXZlRHJhd1xyXG4gICAgICAgICAgICBqaW11TWFwVmlldz17amltdU1hcFZpZXd9XHJcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cclxuICAgICAgICAgICAgdG9vbFR5cGVzPXtjcmVhdGVUb29sVHlwZXN9XHJcbiAgICAgICAgICAgIG9uRHJhd0VuZD17aGFuZGxlRHJhd0VuZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICB7ZW5hYmxlQnVmZmVyICYmIChcclxuICAgICAgICAgICAgPGRpdiByb2xlPSdncm91cCcgY2xhc3NOYW1lPSd0aXRsZTMnIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfSBjc3M9e2Nzc2BtYXJnaW4tdG9wOiAwLjc1cmVtO2B9PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlJz57Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBtdC0xJz5cclxuICAgICAgICAgICAgICAgIDxCdWZmZXJJbnB1dCBkaXN0YW5jZT17YnVmZmVyRGlzdGFuY2V9IHVuaXQ9e2J1ZmZlclVuaXR9IG9uQnVmZmVyQ2hhbmdlPXtoYW5kbGVCdWZmZXJDaGFuZ2V9Lz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICl9XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBSZWFjdFJlZHV4LFxyXG4gIGpzeCxcclxuICBjc3MsXHJcbiAgSW1tdXRhYmxlLFxyXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXHJcbiAgdHlwZSBVc2VEYXRhU291cmNlLFxyXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXHJcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXHJcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcclxuICBob29rcyxcclxuICB0eXBlIERhdGFTb3VyY2UsXHJcbiAgdHlwZSBJTVN0YXRlLFxyXG4gIERhdGFTb3VyY2VTdGF0dXNcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNlbGVjdCwgT3B0aW9uLCBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgeyBTcGF0aWFsUmVsYXRpb24sIHR5cGUgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCB7IEJ1ZmZlcklucHV0IH0gZnJvbSAnLi9idWZmZXItaW5wdXQnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5jb25zdCBtYXJnaW5TdHlsZSA9IGNzc2BtYXJnaW4tdG9wOiAwLjc1cmVtO2BcclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgc3BhdGlhbFJlbGF0aW9uczogSW1tdXRhYmxlQXJyYXk8U3BhdGlhbFJlbGF0aW9uPlxyXG4gIHVzZURhdGFTb3VyY2VzOiBJbW11dGFibGVBcnJheTxVc2VEYXRhU291cmNlPlxyXG4gIHVzZVJ1bnRpbWVEYXRhOiBib29sZWFuXHJcbiAgZW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgYnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGJ1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgb25TZWxlY3Rpb25DaGFuZ2U6IChnZW9tczogX19lc3JpLkdlb21ldHJ5W10pID0+IHZvaWRcclxuICBvblJlbGF0aW9uQ2hhbmdlOiAocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHZvaWRcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJ1bnRpbWVEYXRhU291cmNlICgpOiB7IFtkc0lkOiBzdHJpbmddOiBEYXRhU291cmNlIH0ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IHt9XHJcbiAgbGV0IG5vdEVtcHR5ID0gZmFsc2VcclxuICBjb25zdCBkc01hcCA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZXMoKVxyXG4gIE9iamVjdC5rZXlzKGRzTWFwKS5mb3JFYWNoKGRzSWQgPT4ge1xyXG4gICAgY29uc3QgZHMgPSBkc01hcFtkc0lkXVxyXG4gICAgLy8gb25seSBpbmNsdWRlIHRoZSBkcyB0aGF0IGhhcyBnZW9tZXRyeVxyXG4gICAgaWYgKGRzLmdldEdlb21ldHJ5VHlwZSgpICE9IG51bGwgJiYgIWRzLmlzSW5BcHBDb25maWcoKSAmJiBkcy5nZXRNYWluRGF0YVNvdXJjZSgpLmlkID09PSBkc0lkICYmICFkcy5nZXREYXRhU291cmNlSnNvbigpLmlzT3V0cHV0RnJvbVdpZGdldCkge1xyXG4gICAgICByZXN1bHRbZHNJZF0gPSBkc1xyXG4gICAgICBub3RFbXB0eSA9IHRydWVcclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4gbm90RW1wdHkgPyByZXN1bHQgOiBudWxsXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21EYXRhU291cmNlIChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uU2VsZWN0aW9uQ2hhbmdlLCB1c2VEYXRhU291cmNlcyA9IFtdLCB1c2VSdW50aW1lRGF0YSwgc3BhdGlhbFJlbGF0aW9ucywgZW5hYmxlQnVmZmVyLCBidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdCwgb25CdWZmZXJDaGFuZ2UsIG9uUmVsYXRpb25DaGFuZ2UgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihqaW11VUlNZXNzYWdlcywgZGVmYXVsdE1lc3NhZ2UpXHJcbiAgY29uc3QgW2N1cnJlbnREYXRhU291cmNlLCBzZXRDdXJyZW50RGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZSh1c2VEYXRhU291cmNlc1swXSlcclxuICBjb25zdCBbcnVudGltZURhdGFTb3VyY2UsIHNldFJ1bnRpbWVEYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KClcclxuICBjb25zdCBbY291bnQsIHNldENvdW50XSA9IFJlYWN0LnVzZVN0YXRlKDApXHJcbiAgY29uc3QgW2N1cnJlbnRSZWxhdGlvbiwgc2V0Q3VycmVudFJlbGF0aW9uXSA9IFJlYWN0LnVzZVN0YXRlKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcbiAgY29uc3QgdHJhbnNsYXRlID0gaG9va3MudXNlVHJhbnNsYXRpb24oKVxyXG5cclxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25PcHRpb25zOiBBcnJheTx7IHZhbHVlOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgfT4gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhTcGF0aWFsUmVsYXRpb24pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoe1xyXG4gICAgICB2YWx1ZSxcclxuICAgICAgbGFiZWw6IGdldEkxOG5NZXNzYWdlKGBzcGF0aWFsUmVsYXRpb25fJHtrZXl9YClcclxuICAgIH0pKVxyXG4gIH0sIFtnZXRJMThuTWVzc2FnZV0pXHJcblxyXG4gIGNvbnN0IGxvYWRlZFVzZURhdGFTb3VyY2VzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGNvbnN0IGxvYWRlZCA9IFtdXHJcbiAgICB1c2VEYXRhU291cmNlcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGlmIChzdGF0ZS5kYXRhU291cmNlc0luZm8/LltpdGVtLm1haW5EYXRhU291cmNlSWRdPy5pbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVkKSB7XHJcbiAgICAgICAgbG9hZGVkLnB1c2goaXRlbS5kYXRhU291cmNlSWQpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBpZiAobG9hZGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIGxvYWRlZC5qb2luKCcsJylcclxuICAgIH1cclxuICAgIHJldHVybiAnJ1xyXG4gIH0pXHJcblxyXG4gIGNvbnN0IG51bU9mRHMgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xyXG4gICAgaWYgKCF1c2VSdW50aW1lRGF0YSkge1xyXG4gICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlLmRhdGFTb3VyY2VzSW5mbyA/PyB7fSkuZmlsdGVyKGRzSWQgPT4gc3RhdGUuZGF0YVNvdXJjZXNJbmZvW2RzSWRdLmluc3RhbmNlU3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLkNyZWF0ZWQpLmxlbmd0aFxyXG4gIH0pXHJcblxyXG4gIGNvbnN0IHJ1bnRpbWVEYXRhU291cmNlcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgaWYgKG51bU9mRHMgPiAwKSB7XHJcbiAgICAgIHJldHVybiBnZXRSdW50aW1lRGF0YVNvdXJjZSgpXHJcbiAgICB9XHJcbiAgfSwgW251bU9mRHNdKVxyXG5cclxuICBjb25zdCBudW1PZlJ1bnRpbWVEcyA9IE9iamVjdC5rZXlzKHJ1bnRpbWVEYXRhU291cmNlcyA/PyB7fSkubGVuZ3RoXHJcblxyXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xyXG4gICAgaWYgKHNwYXRpYWxSZWxhdGlvbnM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShzcGF0aWFsUmVsYXRpb25zWzBdKVxyXG4gICAgfVxyXG4gICAgaWYgKGVuYWJsZUJ1ZmZlcikge1xyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdClcclxuICAgIH1cclxuICB9KVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBzZXRDdXJyZW50UmVsYXRpb24oc3BhdGlhbFJlbGF0aW9ucz8uWzBdKVxyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgb25SZWxhdGlvbkNoYW5nZSwgc3BhdGlhbFJlbGF0aW9uc10pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIXNwYXRpYWxSZWxhdGlvbnMpIHtcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKG51bGwpXHJcbiAgICB9IGVsc2UgaWYgKCFzcGF0aWFsUmVsYXRpb25zLmluY2x1ZGVzKGN1cnJlbnRSZWxhdGlvbikpIHtcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKHNwYXRpYWxSZWxhdGlvbnNbMF0pXHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2Uoc3BhdGlhbFJlbGF0aW9uc1swXSlcclxuICAgIH1cclxuICB9LCBbc3BhdGlhbFJlbGF0aW9ucywgY3VycmVudFJlbGF0aW9uLCBvblJlbGF0aW9uQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxyXG4gICAgKGRzSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBkcyA9IHVzZURhdGFTb3VyY2VzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uZGF0YVNvdXJjZUlkID09PSBkc0lkKVxyXG4gICAgICBzZXRDdXJyZW50RGF0YVNvdXJjZShJbW11dGFibGUoZHMpKVxyXG4gICAgICBzZXRSdW50aW1lRGF0YVNvdXJjZShudWxsKVxyXG4gICAgfSxcclxuICAgIFt1c2VEYXRhU291cmNlc11cclxuICApXHJcblxyXG4gIGNvbnN0IGhhbmRsZVJ1bnRpbWVEYXRhU291cmNlQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soXHJcbiAgICAoZHNJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGRzSWQpXHJcbiAgICAgIHNldFJ1bnRpbWVEYXRhU291cmNlKGRzKVxyXG4gICAgICBzZXRDdXJyZW50RGF0YVNvdXJjZShudWxsKVxyXG4gICAgfSxcclxuICAgIFtdXHJcbiAgKVxyXG5cclxuICBjb25zdCBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGN1cnJlbnREYXRhU291cmNlPy5kYXRhU291cmNlSWQgPz8gcnVudGltZURhdGFTb3VyY2U/LmlkKVxyXG4gICAgY29uc3QgcmVjb3JkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXHJcbiAgICBpZiAocmVjb3Jkcz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBnZW9tZXRyaWVzID0gcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gcmVjb3JkLmdldEpTQVBJR2VvbWV0cnkoKSlcclxuICAgICAgb25TZWxlY3Rpb25DaGFuZ2UoZ2VvbWV0cmllcylcclxuICAgICAgc2V0Q291bnQocmVjb3Jkcy5sZW5ndGgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvblNlbGVjdGlvbkNoYW5nZShudWxsKVxyXG4gICAgICBzZXRDb3VudCgwKVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkLCBydW50aW1lRGF0YVNvdXJjZT8uaWQsIG9uU2VsZWN0aW9uQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgZ2V0TGFiZWxPZlNwYXRpYWxSZWxhdGlvbiA9IChyZWxhdGlvbjogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICAgIHJldHVybiBzcGF0aWFsUmVsYXRpb25PcHRpb25zLmZpbmQoaXRlbSA9PiBpdGVtLnZhbHVlID09PSByZWxhdGlvbikubGFiZWxcclxuICB9XHJcblxyXG4gIGNvbnN0IGhhbmRsZVNwYXRpYWxSZWxhdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKGUgPT4ge1xyXG4gICAgc2V0Q3VycmVudFJlbGF0aW9uKGUudGFyZ2V0LnZhbHVlKVxyXG4gICAgb25SZWxhdGlvbkNoYW5nZShlLnRhcmdldC52YWx1ZSlcclxuICB9LCBbb25SZWxhdGlvbkNoYW5nZV0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2PlxyXG4gICAgICA8ZGl2IGNzcz17bWFyZ2luU3R5bGV9IGNsYXNzTmFtZT0ndGl0bGUzJz57Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlckxheWVyJyl9PC9kaXY+XHJcbiAgICAgIDxTZWxlY3RcclxuICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2hvb3NlRmlsdGVyTGF5ZXInKX1cclxuICAgICAgICB2YWx1ZT17Y3VycmVudERhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCA/PyBydW50aW1lRGF0YVNvdXJjZT8uaWR9XHJcbiAgICAgID5cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIHVzZURhdGFTb3VyY2VzLmxlbmd0aCA+IDAgJiYgPE9wdGlvbiBoZWFkZXI+e2dldEkxOG5NZXNzYWdlKCdwcmVjb25maWd1cmVkJyl9PC9PcHRpb24+fVxyXG4gICAgICAgIHt1c2VEYXRhU291cmNlcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGl0ZW0uZGF0YVNvdXJjZUlkKVxyXG4gICAgICAgICAgaWYgKGxvYWRlZFVzZURhdGFTb3VyY2VzLmluY2x1ZGVzKGl0ZW0uZGF0YVNvdXJjZUlkKSB8fCBkcz8uZ2V0TGFiZWwoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgIDxPcHRpb24ga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0gdmFsdWU9e2l0ZW0uZGF0YVNvdXJjZUlkfSBvbkNsaWNrPXsoKSA9PiB7IGhhbmRsZURhdGFTb3VyY2VDaGFuZ2UoaXRlbS5kYXRhU291cmNlSWQpIH19PlxyXG4gICAgICAgICAgICAgIHtkcz8uZ2V0TGFiZWwoKX1cclxuICAgICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfT5cclxuICAgICAgICAgICAgICB7dHJhbnNsYXRlKCdsb2FkaW5nJyl9XHJcbiAgICAgICAgICAgIDwvT3B0aW9uPlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0pfVxyXG4gICAgICAgIHtudW1PZlJ1bnRpbWVEcyA+IDAgJiYgdXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMCAmJiA8T3B0aW9uIGRpdmlkZXIvPn1cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIDxPcHRpb24gaGVhZGVyPntnZXRJMThuTWVzc2FnZSgncnVudGltZScpfTwvT3B0aW9uPn1cclxuICAgICAgICB7T2JqZWN0LmtleXMocnVudGltZURhdGFTb3VyY2VzID8/IHt9KS5tYXAoZHNJZCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkcyA9IHJ1bnRpbWVEYXRhU291cmNlc1tkc0lkXVxyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2RzSWR9IHZhbHVlPXtkc0lkfSBvbkNsaWNrPXsoKSA9PiB7IGhhbmRsZVJ1bnRpbWVEYXRhU291cmNlQ2hhbmdlKGRzSWQpIH19PlxyXG4gICAgICAgICAgICAgIHtkcy5nZXRMYWJlbCgpfVxyXG4gICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgIClcclxuICAgICAgICB9KX1cclxuICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdtdC0xIGZvbnQtaXRhbGljJyBjc3M9e2Nzc2Bjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItaGludCk7YH0+e2dldEkxOG5NZXNzYWdlKCdzZWxlY3RlZFJlY29yZHMnLCB7IG51bTogY291bnQgfSl9PC9kaXY+XHJcbiAgICAgIHtzcGF0aWFsUmVsYXRpb25zPy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2IGNzcz17bWFyZ2luU3R5bGV9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtdHJ1bmNhdGUgdGl0bGUzIG1iLTAnPntnZXRJMThuTWVzc2FnZSgncmVsYXRpb25zaGlwJyl9PC9kaXY+XHJcbiAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZWxhdGlvbnNoaXAnKX1cclxuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRSZWxhdGlvbn1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNwYXRpYWxSZWxhdGlvbkNoYW5nZX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3NwYXRpYWxSZWxhdGlvbnMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpdGVtfSB2YWx1ZT17aXRlbX0+e2dldExhYmVsT2ZTcGF0aWFsUmVsYXRpb24oaXRlbSl9PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9KX1cclxuICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICB7ZW5hYmxlQnVmZmVyICYmIChcclxuICAgICAgICA8ZGl2IHJvbGU9J2dyb3VwJyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX0gY3NzPXttYXJnaW5TdHlsZX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGl0bGUzIHRleHQtdHJ1bmNhdGUnPntnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX08L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggbXQtMSc+XHJcbiAgICAgICAgICAgIDxCdWZmZXJJbnB1dCBkaXN0YW5jZT17YnVmZmVyRGlzdGFuY2V9IHVuaXQ9e2J1ZmZlclVuaXR9IG9uQnVmZmVyQ2hhbmdlPXtvbkJ1ZmZlckNoYW5nZX0vPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IHVzZURhdGFTb3VyY2U9e2N1cnJlbnREYXRhU291cmNlfSBkYXRhU291cmNlPXtydW50aW1lRGF0YVNvdXJjZX0gb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2V9IC8+XHJcbiAgICAgIHt1c2VEYXRhU291cmNlcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIGRhdGFzb3VyY2UgaXMgY3JlYXRlZFxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfSB1c2VEYXRhU291cmNlPXtpdGVtfS8+XHJcbiAgICAgICAgKVxyXG4gICAgICB9KX1cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIGpzeCwgbG9hZEFyY0dJU0pTQVBJTW9kdWxlLCB0eXBlIEltbXV0YWJsZUFycmF5IH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBKaW11TWFwVmlld0NvbXBvbmVudCwgdHlwZSBKaW11TWFwVmlldywgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xyXG5pbXBvcnQgdHlwZSB7IENyZWF0ZVRvb2xUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgbWFwV2lkZ2V0SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBvbkdlb21ldHJ5Q2hhbmdlOiAoZ2VvbTogX19lc3JpLkdlb21ldHJ5LCBsYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLCBncmFwaGljPzogX19lc3JpLkdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdlb21ldHJ5RnJvbU1hcCAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvbkdlb21ldHJ5Q2hhbmdlLCBtYXBXaWRnZXRJZHMgfSA9IHByb3BzXHJcbiAgY29uc3QgW2ppbXVNYXBWaWV3LCBzZXRKaW11TWFwVmlld10gPSBSZWFjdC51c2VTdGF0ZTxKaW11TWFwVmlldz4obnVsbClcclxuICBjb25zdCBQb2x5Z29uUmVmID0gUmVhY3QudXNlUmVmPHR5cGVvZiBfX2VzcmkuUG9seWdvbj4obnVsbClcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChqaW11TWFwVmlldz8udmlldykge1xyXG4gICAgICBsZXQgaGFuZGxlcjogSUhhbmRsZVxyXG4gICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGUoJ2VzcmkvY29yZS9yZWFjdGl2ZVV0aWxzJykudGhlbigocmVhY3RpdmVVdGlsczogX19lc3JpLnJlYWN0aXZlVXRpbHMpID0+IHtcclxuICAgICAgICBoYW5kbGVyID0gcmVhY3RpdmVVdGlscy53YXRjaCgoKSA9PiBqaW11TWFwVmlldy52aWV3LmV4dGVudCwgKGV4dGVudDogX19lc3JpLkV4dGVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKFBvbHlnb25SZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKFBvbHlnb25SZWYuY3VycmVudC5mcm9tRXh0ZW50KGV4dGVudCkpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9nZW9tZXRyeS9Qb2x5Z29uJ10pLnRoZW4obW9kdWxlcyA9PiB7XHJcbiAgICAgICAgICAgICAgUG9seWdvblJlZi5jdXJyZW50ID0gbW9kdWxlc1swXVxyXG4gICAgICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoUG9seWdvblJlZi5jdXJyZW50LmZyb21FeHRlbnQoZXh0ZW50KSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIHNldCBpbml0aWFsIGV4dGVudFxyXG4gICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoamltdU1hcFZpZXcudmlldy5leHRlbnQpXHJcbiAgICAgIH0pXHJcbiAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgIGhhbmRsZXIucmVtb3ZlKClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbamltdU1hcFZpZXcsIG9uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XHJcbiAgICBzZXRKaW11TWFwVmlldyhqaW11TWFwVmlldz8udmlldyAhPSBudWxsID8gamltdU1hcFZpZXcgOiBudWxsKVxyXG4gIH0sIFtdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICB7XHJcbiAgICAgICAgbWFwV2lkZ2V0SWRzPy5tYXAoKG1hcFdpZGdldElkLCB4KSA9PiAoXHJcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcclxuICAgICAgICAgICAga2V5PXt4fSB1c2VNYXBXaWRnZXRJZD17bWFwV2lkZ2V0SWR9IG9uQWN0aXZlVmlld0NoYW5nZT17aGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApKVxyXG4gICAgICB9XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmcgaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogUHJvdmlkZXMgaGlnaGxpZ2h0aW5nIHRoYXQgd29ya3MgaW5kZXBlbmRlbnRseSBvZiBsYXllciB2aXNpYmlsaXR5LlxuICovXG5cbmltcG9ydCB0eXBlIHsgRGF0YVNvdXJjZSwgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBEYXRhU291cmNlTWFuYWdlciB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLy8gR2xvYmFsIHNlcXVlbmNlIGNvdW50ZXIgZm9yIGdyYXBoaWNzIG9wZXJhdGlvbnMgdG8gdHJhY2sgdGltaW5nIGFjcm9zcyBjYWxsc1xubGV0IG9wZXJhdGlvblNlcXVlbmNlID0gMFxuXG4vKipcbiAqIEdldHMgdGhlIG1hcCB2aWV3IGZyb20gYSBkYXRhIHNvdXJjZSdzIG9yaWdpbiBsYXllci5cbiAqIEFjY2Vzc2VzIHRoZSB2aWV3IHRocm91Z2ggdGhlIEZlYXR1cmVMYXllcidzIHZpZXcgcHJvcGVydHkuXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIChvciBhbnkgZGF0YSBzb3VyY2UpXG4gKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byBNYXBWaWV3IG9yIFNjZW5lVmlldywgb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UoXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZFxuKTogUHJvbWlzZTxfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsPiB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgaWYgKCFvdXRwdXREUykge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1uby1vdXRwdXREUycsXG4gICAgICBzZXEsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICB0cnkge1xuICAgIC8vIEdldCBvcmlnaW4gZGF0YSBzb3VyY2UgdG8gYWNjZXNzIHRoZSBsYXllclxuICAgIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VzID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICAgIGNvbnN0IG9yaWdpbkRTID0gb3JpZ2luRGF0YVNvdXJjZXM/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tb3JpZ2luRFMnLFxuICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICAvLyBBY2Nlc3MgdGhlIEZlYXR1cmVMYXllciBmcm9tIHRoZSBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IGxheWVyID0gKG9yaWdpbkRTIGFzIGFueSkubGF5ZXIgfHwgKG9yaWdpbkRTIGFzIGFueSkuZ2V0TGF5ZXI/LigpXG4gICAgaWYgKCFsYXllcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tbGF5ZXInLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICAvLyBMb2cgbGF5ZXIgcHJvcGVydGllcyB0byB1bmRlcnN0YW5kIHN0cnVjdHVyZVxuICAgIGNvbnN0IGxheWVyS2V5cyA9IE9iamVjdC5rZXlzKGxheWVyKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICB0eXBlb2YgKGxheWVyIGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICkuc2xpY2UoMCwgMjApIC8vIExpbWl0IHRvIGZpcnN0IDIwIHByb3BlcnRpZXNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtbGF5ZXItaW5zcGVjdGlvbicsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgbGF5ZXJUeXBlOiBsYXllci50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgIGxheWVyS2V5czogbGF5ZXJLZXlzLFxuICAgICAgaGFzTGF5ZXJNYXA6ICEhKGxheWVyIGFzIGFueSkubWFwLFxuICAgICAgaGFzTGF5ZXJWaWV3OiAhIShsYXllciBhcyBhbnkpLnZpZXcsXG4gICAgICBoYXNMYXllclBhcmVudDogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQsXG4gICAgICBsYXllck1hcFR5cGU6IChsYXllciBhcyBhbnkpLm1hcCA/IHR5cGVvZiAobGF5ZXIgYXMgYW55KS5tYXAgOiAnbm9uZScsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gQ2hlY2sgbGF5ZXIucGFyZW50IGZvciBtYXAvdmlldyBhY2Nlc3MgKHNpbmNlIGhhc0xheWVyUGFyZW50IGlzIHRydWUpXG4gICAgY29uc3QgcGFyZW50ID0gKGxheWVyIGFzIGFueSkucGFyZW50XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgLy8gTG9nIHBhcmVudCBwcm9wZXJ0aWVzXG4gICAgICBjb25zdCBwYXJlbnRLZXlzID0gT2JqZWN0LmtleXMocGFyZW50KS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgdHlwZW9mIChwYXJlbnQgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1sYXllci1wYXJlbnQtaW5zcGVjdGlvbicsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgcGFyZW50VHlwZTogcGFyZW50LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICBwYXJlbnRLZXlzOiBwYXJlbnRLZXlzLFxuICAgICAgICBoYXNQYXJlbnRNYXA6ICEhKHBhcmVudCBhcyBhbnkpLm1hcCxcbiAgICAgICAgaGFzUGFyZW50VmlldzogISEocGFyZW50IGFzIGFueSkudmlldyxcbiAgICAgICAgaGFzUGFyZW50Vmlld3M6ICEhKHBhcmVudCBhcyBhbnkpLnZpZXdzLFxuICAgICAgICBwYXJlbnRWaWV3c0xlbmd0aDogKHBhcmVudCBhcyBhbnkpLnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzUGFyZW50RXh0ZW50OiAhIShwYXJlbnQgYXMgYW55KS5leHRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCB2aWV3IGZyb20gcGFyZW50XG4gICAgICBpZiAoKHBhcmVudCBhcyBhbnkpLnZpZXcpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IChwYXJlbnQgYXMgYW55KS52aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLXBhcmVudC12aWV3JyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHZpZXdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCBtYXAgZnJvbSBwYXJlbnQgYW5kIHRoZW4gdmlld1xuICAgICAgY29uc3QgcGFyZW50TWFwID0gKHBhcmVudCBhcyBhbnkpLm1hcFxuICAgICAgaWYgKHBhcmVudE1hcCkge1xuICAgICAgICBjb25zdCB2aWV3ID0gcGFyZW50TWFwLnZpZXcgfHwgXG4gICAgICAgICAgICAgICAgICAgICAocGFyZW50TWFwLnZpZXdzPy5nZXRJdGVtQXQ/LigwKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgIChwYXJlbnRNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyBwYXJlbnRNYXAudmlld3NbMF0gOiBudWxsKVxuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1wYXJlbnQtbWFwJyxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIHZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUGFyZW50IG1pZ2h0IEJFIHRoZSB2aWV3IChjaGVjayBpZiBpdCBoYXMgdmlldy1saWtlIHByb3BlcnRpZXMpXG4gICAgICBpZiAocGFyZW50LnR5cGUgPT09ICdtYXAnIHx8IHBhcmVudC50eXBlID09PSAnc2NlbmUnIHx8IChwYXJlbnQgYXMgYW55KS5leHRlbnQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1wYXJlbnQtaXMtdmlldycsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgdmlld1R5cGU6IHBhcmVudC50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHBhcmVudCBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUcnkgbXVsdGlwbGUgYXBwcm9hY2hlcyB0byBnZXQgdGhlIHZpZXc6XG4gICAgLy8gMS4gTGF5ZXIgbWlnaHQgaGF2ZSBhIGRpcmVjdCB2aWV3IHByb3BlcnR5XG4gICAgaWYgKChsYXllciBhcyBhbnkpLnZpZXcpIHtcbiAgICAgIGNvbnN0IHZpZXcgPSAobGF5ZXIgYXMgYW55KS52aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItdmlldycsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiB2aWV3XG4gICAgfVxuXG4gICAgLy8gMi4gVHJ5IHRvIGdldCBtYXAgZnJvbSBsYXllciBhbmQgdGhlbiB2aWV3IGZyb20gbWFwXG4gICAgY29uc3QgbWFwID0gKGxheWVyIGFzIGFueSkubWFwIHx8IFxuICAgICAgICAgICAgICAgIChsYXllciBhcyBhbnkpLnBhcmVudD8ubWFwIHx8XG4gICAgICAgICAgICAgICAgKGxheWVyIGFzIGFueSkuX19tYXAgfHxcbiAgICAgICAgICAgICAgICAobGF5ZXIgYXMgYW55KS5fbWFwXG4gICAgXG4gICAgaWYgKG1hcCkge1xuICAgICAgLy8gTG9nIG1hcCBwcm9wZXJ0aWVzXG4gICAgICBjb25zdCBtYXBLZXlzID0gT2JqZWN0LmtleXMobWFwKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgdHlwZW9mIChtYXAgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1tYXAtZm91bmQnLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgIG1hcElkOiBtYXAuaWQgfHwgJ3Vua25vd24nLFxuICAgICAgICBtYXBLZXlzOiBtYXBLZXlzLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIW1hcC52aWV3LFxuICAgICAgICBoYXNNYXBWaWV3czogISEobWFwLnZpZXdzKSxcbiAgICAgICAgbWFwVmlld3NMZW5ndGg6IG1hcC52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgdmlldyA9IG1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3M/Lmxlbmd0aCA+IDAgPyBtYXAudmlld3NbMF0gOiBudWxsKSB8fFxuICAgICAgICAgICAgICAgICAgIChtYXAudmlld3MgJiYgbWFwLnZpZXdzLmxlbmd0aCA+IDAgPyBtYXAudmlld3MuZ2V0SXRlbUF0KDApIDogbnVsbClcbiAgICAgIFxuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1tYXAnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzLiBUcnkgdG8gZ2V0IHJvb3QgZGF0YSBzb3VyY2UgYW5kIGFjY2VzcyBtYXAgZnJvbSB0aGVyZVxuICAgIGNvbnN0IHJvb3REUyA9IG9yaWdpbkRTLmdldFJvb3REYXRhU291cmNlKClcbiAgICBpZiAocm9vdERTKSB7XG4gICAgICBjb25zdCByb290TWFwID0gKHJvb3REUyBhcyBhbnkpLmdldE1hcD8uKCkgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgKHJvb3REUyBhcyBhbnkpLm1hcCB8fFxuICAgICAgICAgICAgICAgICAgICAgIChyb290RFMgYXMgYW55KS5fX21hcCB8fFxuICAgICAgICAgICAgICAgICAgICAgIChyb290RFMgYXMgYW55KS5fbWFwXG4gICAgICBcbiAgICAgIGlmIChyb290TWFwKSB7XG4gICAgICAgIC8vIExvZyByb290IG1hcCBwcm9wZXJ0aWVzXG4gICAgICAgIGNvbnN0IHJvb3RNYXBLZXlzID0gT2JqZWN0LmtleXMocm9vdE1hcCkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgICB0eXBlb2YgKHJvb3RNYXAgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkuc2xpY2UoMCwgMjApXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXJvb3QtbWFwLWZvdW5kJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgIHJvb3REU1R5cGU6IHJvb3REUy50eXBlLFxuICAgICAgICAgIHJvb3RNYXBJZDogcm9vdE1hcC5pZCB8fCAndW5rbm93bicsXG4gICAgICAgICAgcm9vdE1hcEtleXM6IHJvb3RNYXBLZXlzLFxuICAgICAgICAgIGhhc1Jvb3RNYXBWaWV3OiAhIXJvb3RNYXAudmlldyxcbiAgICAgICAgICBoYXNSb290TWFwVmlld3M6ICEhKHJvb3RNYXAudmlld3MpLFxuICAgICAgICAgIHJvb3RNYXBWaWV3c0xlbmd0aDogcm9vdE1hcC52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBjb25zdCB2aWV3ID0gcm9vdE1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyByb290TWFwLnZpZXdzWzBdIDogbnVsbCkgfHxcbiAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzICYmIHJvb3RNYXAudmlld3MubGVuZ3RoID4gMCA/IHJvb3RNYXAudmlld3MuZ2V0SXRlbUF0KDApIDogbnVsbClcbiAgICAgICAgXG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLXJvb3REUycsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIHZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIExvZyByb290IERTIHByb3BlcnRpZXMgdG8gc2VlIHdoYXQncyBhdmFpbGFibGVcbiAgICAgICAgY29uc3Qgcm9vdERTS2V5cyA9IE9iamVjdC5rZXlzKHJvb3REUykuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgICB0eXBlb2YgKHJvb3REUyBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICAgKS5zbGljZSgwLCAyMClcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utcm9vdC1kcy1pbnNwZWN0aW9uJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgIHJvb3REU1R5cGU6IHJvb3REUy50eXBlLFxuICAgICAgICAgIHJvb3REU0tleXM6IHJvb3REU0tleXMsXG4gICAgICAgICAgaGFzR2V0TWFwOiB0eXBlb2YgKHJvb3REUyBhcyBhbnkpLmdldE1hcCA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgICBoYXNNYXA6ICEhKHJvb3REUyBhcyBhbnkpLm1hcCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tdmlldycsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgaGFzTGF5ZXJNYXA6ICEhbWFwLFxuICAgICAgaGFzUm9vdERTOiAhIXJvb3REUyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtZXJyb3InLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vKipcbiAqIEdldHMgdGhlIGRlZmF1bHQgaGlnaGxpZ2h0IHN5bWJvbCBiYXNlZCBvbiBnZW9tZXRyeSB0eXBlLlxuICogVXNlcyB0aGUgbWFwJ3MgYWN0dWFsIGhpZ2hsaWdodCBjb2xvciBmcm9tIGhpZ2hsaWdodE9wdGlvbnMgdG8gbWF0Y2ggc3RhbmRhcmQgc2VsZWN0aW9uIGFwcGVhcmFuY2UuXG4gKi9cbmZ1bmN0aW9uIGdldERlZmF1bHRIaWdobGlnaHRTeW1ib2woXG4gIGdlb21ldHJ5VHlwZTogc3RyaW5nLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IF9fZXNyaS5TeW1ib2wge1xuICAvLyBHZXQgZGVmYXVsdCBoaWdobGlnaHQgY29sb3IgZnJvbSB2aWV3J3MgaGlnaGxpZ2h0T3B0aW9uc1xuICBjb25zdCBoaWdobGlnaHRPcHRpb25zID0gKG1hcFZpZXcuaGlnaGxpZ2h0T3B0aW9ucyB8fCB7fSkgYXMgX19lc3JpLkhpZ2hsaWdodE9wdGlvbnNcbiAgXG4gIC8vIEV4dHJhY3QgY29sb3IgLSBjb3VsZCBiZSBhcnJheSBbUixHLEIsQV0gb3IgQ29sb3Igb2JqZWN0XG4gIGxldCBoaWdobGlnaHRDb2xvcjogbnVtYmVyW10gfCBudWxsID0gbnVsbFxuICBcbiAgaWYgKGhpZ2hsaWdodE9wdGlvbnMuY29sb3IpIHtcbiAgICAvLyBJZiBpdCdzIGEgQ29sb3Igb2JqZWN0LCBjb252ZXJ0IHRvIGFycmF5XG4gICAgaWYgKHR5cGVvZiBoaWdobGlnaHRPcHRpb25zLmNvbG9yID09PSAnb2JqZWN0JyAmJiAndG9SZ2JhJyBpbiBoaWdobGlnaHRPcHRpb25zLmNvbG9yKSB7XG4gICAgICBoaWdobGlnaHRDb2xvciA9IChoaWdobGlnaHRPcHRpb25zLmNvbG9yIGFzIGFueSkudG9SZ2JhKClcbiAgICB9IFxuICAgIC8vIElmIGl0J3MgYWxyZWFkeSBhbiBhcnJheVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGlnaGxpZ2h0T3B0aW9ucy5jb2xvcikpIHtcbiAgICAgIGhpZ2hsaWdodENvbG9yID0gaGlnaGxpZ2h0T3B0aW9ucy5jb2xvclxuICAgIH1cbiAgfVxuICBcbiAgLy8gSWYgbm8gY29sb3IgaW4gaGlnaGxpZ2h0T3B0aW9ucywgdXNlIHRoZSBBcmNHSVMgZG9jdW1lbnRlZCBkZWZhdWx0OiBjeWFuIFswLCAyNTUsIDI1NV1cbiAgaWYgKCFoaWdobGlnaHRDb2xvcikge1xuICAgIGhpZ2hsaWdodENvbG9yID0gWzAsIDI1NSwgMjU1LCAxLjBdIC8vIEZ1bGwgb3BhY2l0eSBkZWZhdWx0XG4gIH1cbiAgXG4gIC8vIEVuc3VyZSB3ZSBoYXZlIDQgZWxlbWVudHMgW1IsIEcsIEIsIEFdXG4gIGNvbnN0IGJhc2VDb2xvciA9IGhpZ2hsaWdodENvbG9yLnNsaWNlKDAsIDMpXG4gIGNvbnN0IGJhc2VBbHBoYSA9IGhpZ2hsaWdodENvbG9yLmxlbmd0aCA+PSA0ID8gaGlnaGxpZ2h0Q29sb3JbM10gOiAxLjBcbiAgXG4gIC8vIEdldCBmaWxsIG9wYWNpdHkgZnJvbSBoaWdobGlnaHRPcHRpb25zIG9yIHVzZSBkZWZhdWx0XG4gIGNvbnN0IGZpbGxPcGFjaXR5ID0gaGlnaGxpZ2h0T3B0aW9ucy5maWxsT3BhY2l0eSAhPT0gdW5kZWZpbmVkIFxuICAgID8gaGlnaGxpZ2h0T3B0aW9ucy5maWxsT3BhY2l0eSBcbiAgICA6IDAuMjUgLy8gRGVmYXVsdCAyNSUgb3BhY2l0eSBmb3IgZmlsbFxuICBjb25zdCBmaWxsQ29sb3IgPSBbLi4uYmFzZUNvbG9yLCBmaWxsT3BhY2l0eV1cbiAgXG4gIC8vIEdldCBoYWxvIG9wYWNpdHkgb3IgdXNlIGRlZmF1bHQgLSBmb3Igb3V0bGluZXMgYW5kIGxpbmVzXG4gIGNvbnN0IGhhbG9PcGFjaXR5ID0gaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eSAhPT0gdW5kZWZpbmVkXG4gICAgPyBoaWdobGlnaHRPcHRpb25zLmhhbG9PcGFjaXR5XG4gICAgOiBiYXNlQWxwaGEgLy8gVXNlIHRoZSBjb2xvcidzIGFscGhhIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIDEuMFxuICBjb25zdCBvdXRsaW5lQ29sb3IgPSBbLi4uYmFzZUNvbG9yLCBoYWxvT3BhY2l0eV1cbiAgXG4gIC8vIEZvciBsaW5lcywgdXNlIGZ1bGwgb3BhY2l0eSB0byBlbnN1cmUgdmlzaWJpbGl0eVxuICBjb25zdCBsaW5lT3BhY2l0eSA9IGhpZ2hsaWdodE9wdGlvbnMuaGFsb09wYWNpdHkgIT09IHVuZGVmaW5lZFxuICAgID8gTWF0aC5tYXgoaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eSwgMC44KSAvLyBBdCBsZWFzdCA4MCUgb3BhY2l0eVxuICAgIDogYmFzZUFscGhhIC8vIFVzZSB0aGUgY29sb3IncyBhbHBoYSwgb3IgZGVmYXVsdCB0byAxLjBcbiAgY29uc3QgbGluZUNvbG9yID0gWy4uLmJhc2VDb2xvciwgbGluZU9wYWNpdHldXG4gIFxuICBzd2l0Y2ggKGdlb21ldHJ5VHlwZSkge1xuICAgIGNhc2UgJ3BvaW50JzpcbiAgICBjYXNlICdtdWx0aXBvaW50JzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzaW1wbGUtbWFya2VyJyxcbiAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgb3V0bGluZToge1xuICAgICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgICAgd2lkdGg6IDJcbiAgICAgICAgfSxcbiAgICAgICAgc2l6ZTogMTJcbiAgICAgIH0gYXMgdW5rbm93biBhcyBfX2VzcmkuU2ltcGxlTWFya2VyU3ltYm9sXG4gICAgICBcbiAgICBjYXNlICdwb2x5bGluZSc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLWxpbmUnLFxuICAgICAgICBjb2xvcjogbGluZUNvbG9yLCAvLyBVc2UgbGluZUNvbG9yIHdpdGggcHJvcGVyIG9wYWNpdHlcbiAgICAgICAgd2lkdGg6IDQgLy8gSW5jcmVhc2VkIHdpZHRoIGZvciB2aXNpYmlsaXR5XG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZUxpbmVTeW1ib2xcbiAgICAgIFxuICAgIGNhc2UgJ3BvbHlnb24nOlxuICAgIGNhc2UgJ211bHRpcG9seWdvbic6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLWZpbGwnLFxuICAgICAgICBjb2xvcjogZmlsbENvbG9yLFxuICAgICAgICBvdXRsaW5lOiB7XG4gICAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgICB3aWR0aDogMlxuICAgICAgICB9XG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZUZpbGxTeW1ib2xcbiAgICAgIFxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBGYWxsYmFjayB0byBwb2x5Z29uIHN5bWJvbFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NpbXBsZS1maWxsJyxcbiAgICAgICAgY29sb3I6IGZpbGxDb2xvcixcbiAgICAgICAgb3V0bGluZToge1xuICAgICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgICAgd2lkdGg6IDJcbiAgICAgICAgfVxuICAgICAgfSBhcyB1bmtub3duIGFzIF9fZXNyaS5TaW1wbGVGaWxsU3ltYm9sXG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIG9yIGdldHMgYW4gZXhpc3RpbmcgZ3JhcGhpY3MgbGF5ZXIgZm9yIHRoZSB3aWRnZXQuXG4gKiBVc2VzIGEgdW5pcXVlIElEIGJhc2VkIG9uIHdpZGdldCBJRCB0byBlbnN1cmUgb25lIGxheWVyIHBlciB3aWRnZXQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXIoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogUHJvbWlzZTxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+IHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBjb25zdCBsYXllcklkID0gYHF1ZXJ5c2ltcGxlLWhpZ2hsaWdodC0ke3dpZGdldElkfWBcbiAgXG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgbGF5ZXIgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ0xheWVyID0gbWFwVmlldy5tYXAubGF5ZXJzLmZpbmQobGF5ZXIgPT4gbGF5ZXIuaWQgPT09IGxheWVySWQpIGFzIF9fZXNyaS5HcmFwaGljc0xheWVyXG4gICAgaWYgKGV4aXN0aW5nTGF5ZXIpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLWZvdW5kLWV4aXN0aW5nJyxcbiAgICAgICAgc2VxLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbGF5ZXJJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGV4aXN0aW5nTGF5ZXJcbiAgICB9XG5cbiAgICAvLyBMb2FkIEdyYXBoaWNzTGF5ZXIgbW9kdWxlXG4gICAgY29uc3QgW0dyYXBoaWNzTGF5ZXJdID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2VzcmkvbGF5ZXJzL0dyYXBoaWNzTGF5ZXInXSlcbiAgICBcbiAgICAvLyBDcmVhdGUgbmV3IGdyYXBoaWNzIGxheWVyXG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IG5ldyBHcmFwaGljc0xheWVyKHtcbiAgICAgIGlkOiBsYXllcklkLFxuICAgICAgdGl0bGU6IGBRdWVyeVNpbXBsZSBIaWdobGlnaHRzICgke3dpZGdldElkfSlgLFxuICAgICAgbGlzdE1vZGU6ICdoaWRlJywgLy8gSGlkZSBmcm9tIGxheWVyIGxpc3RcbiAgICAgIHZpc2libGU6IHRydWVcbiAgICB9KVxuICAgIFxuICAgIC8vIEFkZCB0byBtYXBcbiAgICBtYXBWaWV3Lm1hcC5hZGQoZ3JhcGhpY3NMYXllcilcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXItY3JlYXRlZCcsXG4gICAgICBzZXEsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGxheWVySWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiBncmFwaGljc0xheWVyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLWVycm9yJyxcbiAgICAgIHNlcSxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbGF5ZXJJZCxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuLyoqXG4gKiBBZGRzIGhpZ2hsaWdodCBncmFwaGljcyB0byB0aGUgZ3JhcGhpY3MgbGF5ZXIgdXNpbmcgZGVmYXVsdCBtYXAgaGlnaGxpZ2h0IGNvbG9yLlxuICogTm90ZTogVGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIEdyYXBoaWNzTGF5ZXIgbW9kdWxlIGlzIGxvYWRlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEhpZ2hsaWdodEdyYXBoaWNzKFxuICBncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcixcbiAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIWdyYXBoaWNzTGF5ZXIgfHwgIXJlY29yZHMgfHwgcmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1za2lwcGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHJlYXNvbjogIWdyYXBoaWNzTGF5ZXIgPyAnbm8tZ3JhcGhpY3MtbGF5ZXInIDogJ25vLXJlY29yZHMnLFxuICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBMb2cgZXhpc3Rpbmcgc3RhdGUgQkVGT1JFIGFkZGluZyAtIHZlcmlmeSBhc3N1bXB0aW9uIGFib3V0IGR1cGxpY2F0ZXNcbiAgY29uc3QgZXhpc3RpbmdHcmFwaGljc0NvdW50ID0gZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGhcbiAgY29uc3QgZXhpc3RpbmdSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgZXhpc3RpbmdSZWNvcmRJZFNldCA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIFxuICBncmFwaGljc0xheWVyLmdyYXBoaWNzLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgY29uc3QgcmVjb3JkSWQgPSBncmFwaGljLmF0dHJpYnV0ZXM/LnJlY29yZElkXG4gICAgaWYgKHJlY29yZElkKSB7XG4gICAgICBleGlzdGluZ1JlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgZXhpc3RpbmdSZWNvcmRJZFNldC5hZGQocmVjb3JkSWQpXG4gICAgfVxuICB9KVxuXG4gIC8vIExvZyB3aGF0IHdlJ3JlIHRyeWluZyB0byBhZGRcbiAgY29uc3QgaW5jb21pbmdSZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtYmVmb3JlLWFkZCcsXG4gICAgc2VxLFxuICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICBleGlzdGluZ0dyYXBoaWNzQ291bnQsXG4gICAgZXhpc3RpbmdSZWNvcmRJZHM6IGV4aXN0aW5nUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSwgLy8gTGltaXQgdG8gZmlyc3QgMjAgZm9yIHJlYWRhYmlsaXR5XG4gICAgZXhpc3RpbmdSZWNvcmRJZHNDb3VudDogZXhpc3RpbmdSZWNvcmRJZHMubGVuZ3RoLFxuICAgIGluY29taW5nUmVjb3JkSWRzOiBpbmNvbWluZ1JlY29yZElkcy5zbGljZSgwLCAyMCksIC8vIExpbWl0IHRvIGZpcnN0IDIwXG4gICAgaW5jb21pbmdSZWNvcmRJZHNDb3VudDogaW5jb21pbmdSZWNvcmRJZHMubGVuZ3RoLFxuICAgIGR1cGxpY2F0ZVJlY29yZElkczogaW5jb21pbmdSZWNvcmRJZHMuZmlsdGVyKGlkID0+IGV4aXN0aW5nUmVjb3JkSWRTZXQuaGFzKGlkKSkuc2xpY2UoMCwgMjApLFxuICAgIGR1cGxpY2F0ZUNvdW50OiBpbmNvbWluZ1JlY29yZElkcy5maWx0ZXIoaWQgPT4gZXhpc3RpbmdSZWNvcmRJZFNldC5oYXMoaWQpKS5sZW5ndGgsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pXG5cbiAgLy8gTG9hZCBHcmFwaGljIG1vZHVsZVxuICBjb25zdCBbR3JhcGhpY10gPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9HcmFwaGljJ10pXG5cbiAgbGV0IGFkZGVkQ291bnQgPSAwXG4gIGxldCBza2lwcGVkQ291bnQgPSAwXG4gIGxldCBkdXBsaWNhdGVDb3VudCA9IDBcbiAgY29uc3QgYWRkZWRSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgY29uc3Qgc2tpcHBlZFJlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBjb25zdCBkdXBsaWNhdGVSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cblxuICByZWNvcmRzLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVjb3JkSWQgPSByZWNvcmQuZ2V0SWQoKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIHJlY29yZCBJRCBhbHJlYWR5IGV4aXN0cyBpbiBncmFwaGljcyBsYXllclxuICAgICAgaWYgKGV4aXN0aW5nUmVjb3JkSWRTZXQuaGFzKHJlY29yZElkKSkge1xuICAgICAgICBkdXBsaWNhdGVDb3VudCsrXG4gICAgICAgIGR1cGxpY2F0ZVJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtZHVwbGljYXRlLWRldGVjdGVkJyxcbiAgICAgICAgICBzZXEsXG4gICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gLy8gU2tpcCBhZGRpbmcgZHVwbGljYXRlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGdyYXBoaWMgPSByZWNvcmQuZmVhdHVyZSBhcyBfX2VzcmkuR3JhcGhpY1xuICAgICAgaWYgKCFncmFwaGljIHx8ICFncmFwaGljLmdlb21ldHJ5KSB7XG4gICAgICAgIHNraXBwZWRDb3VudCsrXG4gICAgICAgIHNraXBwZWRSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBnZW9tZXRyeSB0eXBlIGZyb20gZ3JhcGhpY1xuICAgICAgY29uc3QgZ2VvbWV0cnlUeXBlID0gZ3JhcGhpYy5nZW9tZXRyeS50eXBlXG5cbiAgICAgIC8vIENyZWF0ZSBzeW1ib2wgdXNpbmcgZGVmYXVsdCBoaWdobGlnaHQgY29sb3JcbiAgICAgIGNvbnN0IHN5bWJvbCA9IGdldERlZmF1bHRIaWdobGlnaHRTeW1ib2woZ2VvbWV0cnlUeXBlLCBtYXBWaWV3KVxuXG4gICAgICAvLyBDcmVhdGUgbmV3IGdyYXBoaWMgd2l0aCBoaWdobGlnaHQgc3ltYm9sXG4gICAgICBjb25zdCBoaWdobGlnaHRHcmFwaGljID0gbmV3IEdyYXBoaWMoe1xuICAgICAgICBnZW9tZXRyeTogZ3JhcGhpYy5nZW9tZXRyeSxcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICByZWNvcmRJZDogcmVjb3JkSWQsXG4gICAgICAgICAgc291cmNlOiAncXVlcnlzaW1wbGUtaGlnaGxpZ2h0JyxcbiAgICAgICAgICB3aWRnZXRJZDogZ3JhcGhpY3NMYXllci5pZC5yZXBsYWNlKCdxdWVyeXNpbXBsZS1oaWdobGlnaHQtJywgJycpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGdyYXBoaWNzTGF5ZXIuYWRkKGhpZ2hsaWdodEdyYXBoaWMpXG4gICAgICBhZGRlZENvdW50KytcbiAgICAgIGFkZGVkUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgICBcbiAgICAgIC8vIEFkZCB0byB0cmFja2luZyBzZXQgdG8gcHJldmVudCBkdXBsaWNhdGVzIHdpdGhpbiB0aGlzIGJhdGNoXG4gICAgICBleGlzdGluZ1JlY29yZElkU2V0LmFkZChyZWNvcmRJZClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgc2tpcHBlZENvdW50KytcbiAgICAgIHNraXBwZWRSZWNvcmRJZHMucHVzaChyZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtcmVjb3JkLWVycm9yJyxcbiAgICAgICAgc2VxLFxuICAgICAgICByZWNvcmRJZDogcmVjb3JkLmdldElkKCksXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiAgLy8gTG9nIGZpbmFsIHN0YXRlIEFGVEVSIGFkZGluZ1xuICBjb25zdCBmaW5hbEdyYXBoaWNzQ291bnQgPSBncmFwaGljc0xheWVyLmdyYXBoaWNzLmxlbmd0aFxuICBjb25zdCBmaW5hbFJlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBncmFwaGljc0xheWVyLmdyYXBoaWNzLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgY29uc3QgcmVjb3JkSWQgPSBncmFwaGljLmF0dHJpYnV0ZXM/LnJlY29yZElkXG4gICAgaWYgKHJlY29yZElkKSB7XG4gICAgICBmaW5hbFJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgIH1cbiAgfSlcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3MtY29tcGxldGUnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICBhZGRlZENvdW50LFxuICAgIHNraXBwZWRDb3VudCxcbiAgICBkdXBsaWNhdGVDb3VudCxcbiAgICBhZGRlZFJlY29yZElkczogYWRkZWRSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMFxuICAgIHNraXBwZWRSZWNvcmRJZHM6IHNraXBwZWRSZWNvcmRJZHMuc2xpY2UoMCwgMjApLFxuICAgIGR1cGxpY2F0ZVJlY29yZElkczogZHVwbGljYXRlUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSxcbiAgICBleGlzdGluZ0dyYXBoaWNzQ291bnQsXG4gICAgZmluYWxHcmFwaGljc0NvdW50LFxuICAgIGV4cGVjdGVkRmluYWxDb3VudDogZXhpc3RpbmdHcmFwaGljc0NvdW50ICsgYWRkZWRDb3VudCxcbiAgICBmaW5hbFJlY29yZElkczogZmluYWxSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMFxuICAgIGZpbmFsUmVjb3JkSWRzQ291bnQ6IGZpbmFsUmVjb3JkSWRzLmxlbmd0aCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGhpZ2hsaWdodCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllciBieSByZWNvcmQgSURzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MoXG4gIGdyYXBoaWNzTGF5ZXI6IF9fZXNyaS5HcmFwaGljc0xheWVyLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdXG4pOiB2b2lkIHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIWdyYXBoaWNzTGF5ZXIgfHwgIXJlY29yZElkcyB8fCByZWNvcmRJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3Mtc2tpcHBlZCcsXG4gICAgICBzZXEsXG4gICAgICByZWFzb246ICFncmFwaGljc0xheWVyID8gJ25vLWdyYXBoaWNzLWxheWVyJyA6ICduby1yZWNvcmQtaWRzJyxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IHJlY29yZElkU2V0ID0gbmV3IFNldChyZWNvcmRJZHMpXG4gIGxldCByZW1vdmVkQ291bnQgPSAwXG5cbiAgLy8gRmluZCBhbmQgcmVtb3ZlIGdyYXBoaWNzIG1hdGNoaW5nIHJlY29yZCBJRHNcbiAgY29uc3QgZ3JhcGhpY3NUb1JlbW92ZTogX19lc3JpLkdyYXBoaWNbXSA9IFtdXG4gIGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBjb25zdCByZWNvcmRJZCA9IGdyYXBoaWMuYXR0cmlidXRlcz8ucmVjb3JkSWRcbiAgICBpZiAocmVjb3JkSWQgJiYgcmVjb3JkSWRTZXQuaGFzKHJlY29yZElkKSkge1xuICAgICAgZ3JhcGhpY3NUb1JlbW92ZS5wdXNoKGdyYXBoaWMpXG4gICAgfVxuICB9KVxuXG4gIGdyYXBoaWNzVG9SZW1vdmUuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBncmFwaGljc0xheWVyLnJlbW92ZShncmFwaGljKVxuICAgIHJlbW92ZWRDb3VudCsrXG4gIH0pXG5cbiAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICBldmVudDogJ3JlbW92ZUhpZ2hsaWdodEdyYXBoaWNzLWNvbXBsZXRlJyxcbiAgICBzZXEsXG4gICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgIHJlbW92ZWRDb3VudCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcbn1cblxuLyoqXG4gKiBDbGVhcnMgYWxsIGhpZ2hsaWdodCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyR3JhcGhpY3NMYXllcihncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcik6IHZvaWQge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGlmICghZ3JhcGhpY3NMYXllcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NsZWFyR3JhcGhpY3NMYXllci1za2lwcGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHJlYXNvbjogJ25vLWdyYXBoaWNzLWxheWVyJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBncmFwaGljc0NvdW50ID0gZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGhcbiAgZ3JhcGhpY3NMYXllci5yZW1vdmVBbGwoKVxuXG4gIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgZXZlbnQ6ICdjbGVhckdyYXBoaWNzTGF5ZXItY29tcGxldGUnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgZ3JhcGhpY3NSZW1vdmVkOiBncmFwaGljc0NvdW50LFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICB9KVxufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGdyYXBoaWNzIGxheWVyIGZyb20gdGhlIG1hcCBhbmQgY2xlYW5zIHVwIHJlZmVyZW5jZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbnVwR3JhcGhpY3NMYXllcihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiB2b2lkIHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBjb25zdCBsYXllcklkID0gYHF1ZXJ5c2ltcGxlLWhpZ2hsaWdodC0ke3dpZGdldElkfWBcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IG1hcFZpZXcubWFwLmxheWVycy5maW5kKGxheWVyID0+IGxheWVyLmlkID09PSBsYXllcklkKSBhcyBfX2VzcmkuR3JhcGhpY3NMYXllclxuICAgIGlmIChncmFwaGljc0xheWVyKSB7XG4gICAgICAvLyBDbGVhciBhbGwgZ3JhcGhpY3MgZmlyc3RcbiAgICAgIGdyYXBoaWNzTGF5ZXIucmVtb3ZlQWxsKClcbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIGxheWVyIGZyb20gbWFwXG4gICAgICBtYXBWaWV3Lm1hcC5yZW1vdmUoZ3JhcGhpY3NMYXllcilcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhbnVwR3JhcGhpY3NMYXllci1jb21wbGV0ZScsXG4gICAgICAgIHNlcSxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGxheWVySWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhbnVwR3JhcGhpY3NMYXllci1ub3QtZm91bmQnLFxuICAgICAgICBzZXEsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBsYXllcklkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NsZWFudXBHcmFwaGljc0xheWVyLWVycm9yJyxcbiAgICAgIHNlcSxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbGF5ZXJJZCxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG59XG5cbiIsImltcG9ydCB7IHR5cGUgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5pbnRlcmZhY2UgQWNjdW11bGF0ZWRSZWNvcmRzQ2FsbGJhY2tzIHtcbiAgb25Nb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIGFjY3VtdWxhdGVkIHJlY29yZHMgYW5kIHJlc3VsdHMgbW9kZSBzdGF0ZS5cbiAqIFxuICogQ2VudHJhbGl6ZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBtYW5hZ2VtZW50IGxvZ2ljIGZvciB0aGUgd2lkZ2V0LlxuICogSGFuZGxlcyByZXN1bHRzIG1vZGUgY2hhbmdlcywgYWNjdW11bGF0ZWQgcmVjb3JkcyB1cGRhdGVzLCBhbmQgbW9kZSByZXNldCBsb2dpYy5cbiAqIFxuICogUGFydCBvZiBDaHVuayA1OiBBY2N1bXVsYXRlZCBSZWNvcmRzIE1hbmFnZW1lbnQgZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgQWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciB7XG4gIHByaXZhdGUgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUgPSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICBwcml2YXRlIGFjY3VtdWxhdGVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gIHByaXZhdGUgY2FsbGJhY2tzPzogQWNjdW11bGF0ZWRSZWNvcmRzQ2FsbGJhY2tzXG5cbiAgLyoqXG4gICAqIFNldHMgY2FsbGJhY2tzIGZvciBtb2RlIGNoYW5nZSBhbmQgYWNjdW11bGF0ZWQgcmVjb3JkcyBjaGFuZ2UgZXZlbnRzLlxuICAgKiBcbiAgICogQHBhcmFtIGNhbGxiYWNrcyAtIENhbGxiYWNrcyBmb3IgbW9kZSBjaGFuZ2UgYW5kIGFjY3VtdWxhdGVkIHJlY29yZHMgY2hhbmdlXG4gICAqL1xuICBzZXRDYWxsYmFja3MoY2FsbGJhY2tzOiBBY2N1bXVsYXRlZFJlY29yZHNDYWxsYmFja3MpOiB2b2lkIHtcbiAgICB0aGlzLmNhbGxiYWNrcyA9IGNhbGxiYWNrc1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgcmVzdWx0cyBtb2RlLlxuICAgKiBcbiAgICogQHJldHVybnMgQ3VycmVudCByZXN1bHRzIG1vZGVcbiAgICovXG4gIGdldFJlc3VsdHNNb2RlKCk6IFNlbGVjdGlvblR5cGUge1xuICAgIHJldHVybiB0aGlzLnJlc3VsdHNNb2RlXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBhY2N1bXVsYXRlZCByZWNvcmRzLlxuICAgKiBcbiAgICogQHJldHVybnMgQ3VycmVudCBhY2N1bXVsYXRlZCByZWNvcmRzIGFycmF5XG4gICAqL1xuICBnZXRBY2N1bXVsYXRlZFJlY29yZHMoKTogRmVhdHVyZURhdGFSZWNvcmRbXSB7XG4gICAgcmV0dXJuIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzXG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY291bnQgb2YgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAgICogXG4gICAqIEByZXR1cm5zIE51bWJlciBvZiBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAqL1xuICBnZXRBY2N1bXVsYXRlZFJlY29yZHNDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIHdpZGdldCBpcyBpbiBhY2N1bXVsYXRpb24gbW9kZSAoQWRkIHRvIG9yIFJlbW92ZSBmcm9tKS5cbiAgICogXG4gICAqIEByZXR1cm5zIFRydWUgaWYgaW4gYWNjdW11bGF0aW9uIG1vZGUsIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgaXNBY2N1bXVsYXRpb25Nb2RlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICB0aGlzLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlcmUgYXJlIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gICAqIFxuICAgKiBAcmV0dXJucyBUcnVlIGlmIGFjY3VtdWxhdGVkIHJlY29yZHMgZXhpc3QsIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyByZXN1bHRzIG1vZGUgY2hhbmdlLlxuICAgKiBcbiAgICogVXBkYXRlcyB0aGUgcmVzdWx0cyBtb2RlIGFuZCBvcHRpb25hbGx5IGNsZWFycyBhY2N1bXVsYXRlZCByZWNvcmRzIHdoZW4gc3dpdGNoaW5nXG4gICAqIHRvIFwiTmV3XCIgbW9kZS4gQWxzbyBoYW5kbGVzIGhhc2ggcGFyYW1ldGVyIGNvbnN1bXB0aW9uIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2Rlcy5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRCBmb3IgbG9nZ2luZ1xuICAgKiBAcGFyYW0gbW9kZSAtIE5ldyByZXN1bHRzIG1vZGVcbiAgICogQHBhcmFtIHNob3VsZENvbnN1bWVIYXNoIC0gV2hldGhlciB0byBjb25zdW1lIGhhc2ggcGFyYW1ldGVyIChmb3IgZGVlcCBsaW5raW5nKVxuICAgKiBAcGFyYW0gaGFzaFNob3J0SWQgLSBPcHRpb25hbCBzaG9ydElkIHRvIGNvbnN1bWUgZnJvbSBoYXNoXG4gICAqIEBwYXJhbSByZW1vdmVIYXNoUGFyYW1ldGVyIC0gT3B0aW9uYWwgY2FsbGJhY2sgdG8gcmVtb3ZlIGhhc2ggcGFyYW1ldGVyXG4gICAqL1xuICBoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZShcbiAgICB3aWRnZXRJZDogc3RyaW5nLFxuICAgIG1vZGU6IFNlbGVjdGlvblR5cGUsXG4gICAgc2hvdWxkQ29uc3VtZUhhc2g6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBoYXNoU2hvcnRJZD86IHN0cmluZyxcbiAgICByZW1vdmVIYXNoUGFyYW1ldGVyPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICApOiB7IHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLCBhY2N1bXVsYXRlZFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gfSB7XG4gICAgY29uc3QgcHJldmlvdXNNb2RlID0gdGhpcy5yZXN1bHRzTW9kZVxuICAgIGNvbnN0IGN1cnJlbnRBY2N1bXVsYXRlZENvdW50ID0gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UtdHJpZ2dlcmVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgbmV3TW9kZTogbW9kZSxcbiAgICAgIGN1cnJlbnRBY2N1bXVsYXRlZENvdW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIENvbnN1bWUgZGVlcCBsaW5rIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2Rlc1xuICAgIGlmIChzaG91bGRDb25zdW1lSGFzaCAmJiAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBtb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pKSB7XG4gICAgICBpZiAoaGFzaFNob3J0SWQgJiYgcmVtb3ZlSGFzaFBhcmFtZXRlcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdjb25zdW1pbmctaGFzaC1vbi1tb2RlLXN3aXRjaCcsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgbW9kZSxcbiAgICAgICAgICBzaG9ydElkOiBoYXNoU2hvcnRJZFxuICAgICAgICB9KVxuICAgICAgICByZW1vdmVIYXNoUGFyYW1ldGVyKGhhc2hTaG9ydElkKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHN3aXRjaGluZyB0byBcIk5ld1wiIG1vZGUsIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICBpZiAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtb24tbW9kZS1zd2l0Y2gnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcHJldmlvdXNNb2RlXG4gICAgICB9KVxuICAgICAgdGhpcy5yZXN1bHRzTW9kZSA9IG1vZGVcbiAgICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzID0gW11cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXN1bHRzTW9kZSA9IG1vZGVcbiAgICB9XG5cbiAgICAvLyBUcmlnZ2VyIGNhbGxiYWNrXG4gICAgaWYgKHRoaXMuY2FsbGJhY2tzPy5vbk1vZGVDaGFuZ2UpIHtcbiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uTW9kZUNoYW5nZSh0aGlzLnJlc3VsdHNNb2RlKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5yZXN1bHRzTW9kZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBhY2N1bXVsYXRlZCByZWNvcmRzIGNoYW5nZS5cbiAgICogXG4gICAqIFVwZGF0ZXMgdGhlIGFjY3VtdWxhdGVkIHJlY29yZHMgYXJyYXkuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSUQgZm9yIGxvZ2dpbmdcbiAgICogQHBhcmFtIHJlY29yZHMgLSBOZXcgYWNjdW11bGF0ZWQgcmVjb3JkcyBhcnJheVxuICAgKi9cbiAgaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHdpZGdldElkOiBzdHJpbmcsIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10pOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2aW91c0NvdW50ID0gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgY29uc3QgbmV3Q291bnQgPSByZWNvcmRzLmxlbmd0aFxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZS10cmlnZ2VyZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBwcmV2aW91c0NvdW50LFxuICAgICAgbmV3Q291bnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMgPSByZWNvcmRzXG5cbiAgICAvLyBUcmlnZ2VyIGNhbGxiYWNrXG4gICAgaWYgKHRoaXMuY2FsbGJhY2tzPy5vbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgdGhpcy5jYWxsYmFja3Mub25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UodGhpcy5hY2N1bXVsYXRlZFJlY29yZHMpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0cyBtb2RlIHRvIFwiTmV3IFNlbGVjdGlvblwiIGFuZCBjbGVhcnMgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAgICogXG4gICAqIENhbGxlZCB3aGVuIGhhc2ggcGFyYW1ldGVycyBhcmUgZGV0ZWN0ZWQgdG8gcmVzZXQgdGhlIHdpZGdldCB0byBhIGNsZWFuIHN0YXRlLlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEIGZvciBsb2dnaW5nXG4gICAqIEBwYXJhbSBjdXJyZW50TW9kZSAtIEN1cnJlbnQgbW9kZSBiZWZvcmUgcmVzZXRcbiAgICovXG4gIHJlc2V0TW9kZU9uSGFzaERldGVjdGlvbih3aWRnZXRJZDogc3RyaW5nLCBjdXJyZW50TW9kZTogU2VsZWN0aW9uVHlwZSk6IHsgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUsIGFjY3VtdWxhdGVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSB9IHtcbiAgICBpZiAoY3VycmVudE1vZGUgIT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnbW9kZS1yZXNldC1uZWVkZWQtb24taGFzaC1kZXRlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgY3VycmVudE1vZGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHRoaXMucmVzdWx0c01vZGUgPSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMgPSBbXVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5yZXN1bHRzTW9kZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIHRoZSBtYW5hZ2VyLlxuICAgKiBcbiAgICogUmVzZXRzIHN0YXRlIHRvIGluaXRpYWwgdmFsdWVzLlxuICAgKi9cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlc3VsdHNNb2RlID0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3JkcyA9IFtdXG4gICAgdGhpcy5jYWxsYmFja3MgPSB1bmRlZmluZWRcbiAgfVxufVxuXG5cbiIsImltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBFdmVudCBuYW1lIGNvbnN0YW50cyBmb3IgUXVlcnlTaW1wbGUgd2lkZ2V0IGV2ZW50cy5cbiAqL1xuZXhwb3J0IGNvbnN0IFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCA9ICdxdWVyeXNpbXBsZS1zZWxlY3Rpb24tY2hhbmdlZCdcbmV4cG9ydCBjb25zdCBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXJlc3RvcmUtb24taWRlbnRpZnktY2xvc2UnXG5leHBvcnQgY29uc3QgT1BFTl9XSURHRVRfRVZFTlQgPSAnaGVscGVyc2ltcGxlLW9wZW4td2lkZ2V0J1xuXG4vKipcbiAqIEV2ZW50IGhhbmRsZXIgY2FsbGJhY2tzIGZvciBFdmVudE1hbmFnZXIuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnRIYW5kbGVycyB7XG4gIG9uT3BlbldpZGdldEV2ZW50PzogKGV2ZW50OiBDdXN0b21FdmVudCkgPT4gdm9pZFxuICBvblNlbGVjdGlvbkNoYW5nZT86IChldmVudDogRXZlbnQpID0+IHZvaWRcbiAgb25SZXN0b3JlT25JZGVudGlmeUNsb3NlPzogKGV2ZW50OiBFdmVudCkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIGV2ZW50IGxpc3RlbmVycyBhbmQgY3VzdG9tIGV2ZW50IGRpc3BhdGNoaW5nLlxuICogXG4gKiBDZW50cmFsaXplcyBldmVudCBoYW5kbGluZyBsb2dpYyBmb3IgdGhlIHdpZGdldCwgaW5jbHVkaW5nOlxuICogLSBFdmVudCBsaXN0ZW5lciBzZXR1cC9jbGVhbnVwXG4gKiAtIEN1c3RvbSBldmVudCBkaXNwYXRjaGluZ1xuICogLSBFdmVudCBoYW5kbGVyIHJlZ2lzdHJhdGlvblxuICogXG4gKiBQYXJ0IG9mIENodW5rIDc6IEV2ZW50IEhhbmRsaW5nIGV4dHJhY3Rpb24uXG4gKiBcbiAqIE5vdGU6IFRoaXMgaXMgYSB1dGlsaXR5IGNsYXNzIChub3QgYSBob29rKSB0byB3b3JrIHdpdGggY2xhc3MgY29tcG9uZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIEV2ZW50TWFuYWdlciB7XG4gIHByaXZhdGUgaGFuZGxlcnM/OiBFdmVudEhhbmRsZXJzXG4gIHByaXZhdGUgbGlzdGVuZXJzU2V0dXA6IGJvb2xlYW4gPSBmYWxzZVxuXG4gIC8qKlxuICAgKiBTZXRzIGV2ZW50IGhhbmRsZXIgY2FsbGJhY2tzLlxuICAgKiBcbiAgICogQHBhcmFtIGhhbmRsZXJzIC0gRXZlbnQgaGFuZGxlciBjYWxsYmFja3NcbiAgICovXG4gIHNldEhhbmRsZXJzKGhhbmRsZXJzOiBFdmVudEhhbmRsZXJzKTogdm9pZCB7XG4gICAgdGhpcy5oYW5kbGVycyA9IGhhbmRsZXJzXG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCBhbGwgZXZlbnQgbGlzdGVuZXJzLlxuICAgKiBcbiAgICogUmVnaXN0ZXJzIGxpc3RlbmVycyBmb3I6XG4gICAqIC0gT1BFTl9XSURHRVRfRVZFTlQ6IEhlbHBlclNpbXBsZSBvcmNoZXN0cmF0aW9uXG4gICAqIC0gUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5UOiBTZWxlY3Rpb24gY2hhbmdlcyBmcm9tIFF1ZXJ5VGFza1Jlc3VsdFxuICAgKiAtIFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQ6IFJlc3RvcmUgc2VsZWN0aW9uIGFmdGVyIGlkZW50aWZ5IHBvcHVwIGNsb3Nlc1xuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEIGZvciBsb2dnaW5nXG4gICAqL1xuICBzZXR1cCh3aWRnZXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGlzdGVuZXJzU2V0dXApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVZFTlRTJywge1xuICAgICAgICBldmVudDogJ2V2ZW50LW1hbmFnZXItc2V0dXAtYWxyZWFkeS1zZXR1cCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VWRU5UUycsIHtcbiAgICAgIGV2ZW50OiAnZXZlbnQtbWFuYWdlci1zZXR1cC1zdGFydCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBMaXN0ZW4gZm9yIEhlbHBlclNpbXBsZSBvcmNoZXN0cmF0aW9uIGV2ZW50c1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKE9QRU5fV0lER0VUX0VWRU5ULCB0aGlzLmhhbmRsZU9wZW5XaWRnZXRFdmVudEJvdW5kKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3Igc2VsZWN0aW9uIGNoYW5nZXMgZnJvbSBxdWVyeS1yZXN1bHRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQsIHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlQm91bmQpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciByZXN0b3JlIHJlcXVlc3RzIHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwgdGhpcy5oYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlQm91bmQpXG5cbiAgICB0aGlzLmxpc3RlbmVyc1NldHVwID0gdHJ1ZVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdFVkVOVFMnLCB7XG4gICAgICBldmVudDogJ2V2ZW50LW1hbmFnZXItc2V0dXAtY29tcGxldGUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBsaXN0ZW5lcnNSZWdpc3RlcmVkOiAzLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgYWxsIGV2ZW50IGxpc3RlbmVycy5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRCBmb3IgbG9nZ2luZ1xuICAgKi9cbiAgY2xlYW51cCh3aWRnZXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmxpc3RlbmVyc1NldHVwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VWRU5UUycsIHtcbiAgICAgICAgZXZlbnQ6ICdldmVudC1tYW5hZ2VyLWNsZWFudXAtbm90LXNldHVwJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVZFTlRTJywge1xuICAgICAgZXZlbnQ6ICdldmVudC1tYW5hZ2VyLWNsZWFudXAtc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoT1BFTl9XSURHRVRfRVZFTlQsIHRoaXMuaGFuZGxlT3BlbldpZGdldEV2ZW50Qm91bmQpXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZUJvdW5kKVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQsIHRoaXMuaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZUJvdW5kKVxuXG4gICAgdGhpcy5saXN0ZW5lcnNTZXR1cCA9IGZhbHNlXG4gICAgdGhpcy5oYW5kbGVycyA9IHVuZGVmaW5lZFxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdFVkVOVFMnLCB7XG4gICAgICBldmVudDogJ2V2ZW50LW1hbmFnZXItY2xlYW51cC1jb21wbGV0ZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhIGN1c3RvbSBldmVudCB0byBub3RpZnkgSGVscGVyU2ltcGxlIG9mIHNlbGVjdGlvbiBjaGFuZ2VzLlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEXG4gICAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiBzZWxlY3RlZCByZWNvcmQgSURzXG4gICAqIEBwYXJhbSBkYXRhU291cmNlSWQgLSBPcHRpb25hbCBkYXRhIHNvdXJjZSBJRFxuICAgKiBAcGFyYW0gb3V0cHV0RHNJZCAtIE91dHB1dCBkYXRhIHNvdXJjZSBJRCAocmVxdWlyZWQgZm9yIGxhc3RTZWxlY3Rpb24gc3RhdGUpXG4gICAqIEBwYXJhbSBxdWVyeUl0ZW1Db25maWdJZCAtIFF1ZXJ5IGl0ZW0gY29uZmlnIElEIChyZXF1aXJlZCBmb3IgbGFzdFNlbGVjdGlvbiBzdGF0ZSlcbiAgICovXG4gIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQoXG4gICAgd2lkZ2V0SWQ6IHN0cmluZywgXG4gICAgcmVjb3JkSWRzOiBzdHJpbmdbXSwgXG4gICAgZGF0YVNvdXJjZUlkPzogc3RyaW5nLFxuICAgIG91dHB1dERzSWQ/OiBzdHJpbmcsXG4gICAgcXVlcnlJdGVtQ29uZmlnSWQ/OiBzdHJpbmdcbiAgKTogdm9pZCB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdFVkVOVFMnLCB7XG4gICAgICBldmVudDogJ2V2ZW50LW1hbmFnZXItZGlzcGF0Y2gtc2VsZWN0aW9uLWV2ZW50JyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICBkYXRhU291cmNlSWQsXG4gICAgICBvdXRwdXREc0lkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlY29yZElkcyxcbiAgICAgICAgZGF0YVNvdXJjZUlkLFxuICAgICAgICBvdXRwdXREc0lkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZFxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICBcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudClcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVZFTlRTJywge1xuICAgICAgZXZlbnQ6ICdldmVudC1tYW5hZ2VyLXNlbGVjdGlvbi1ldmVudC1kaXNwYXRjaGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBldmVudCBsaXN0ZW5lcnMgYXJlIGN1cnJlbnRseSBzZXQgdXAuXG4gICAqIFxuICAgKiBAcmV0dXJucyBUcnVlIGlmIGxpc3RlbmVycyBhcmUgc2V0IHVwLCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG4gIGlzU2V0dXAoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubGlzdGVuZXJzU2V0dXBcbiAgfVxuXG4gIC8qKlxuICAgKiBCb3VuZCBldmVudCBoYW5kbGVyIGZvciBPUEVOX1dJREdFVF9FVkVOVC5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlT3BlbldpZGdldEV2ZW50Qm91bmQgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgaWYgKHRoaXMuaGFuZGxlcnM/Lm9uT3BlbldpZGdldEV2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZXJzLm9uT3BlbldpZGdldEV2ZW50KGV2ZW50IGFzIEN1c3RvbUV2ZW50KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCb3VuZCBldmVudCBoYW5kbGVyIGZvciBRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVNlbGVjdGlvbkNoYW5nZUJvdW5kID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgIGlmICh0aGlzLmhhbmRsZXJzPy5vblNlbGVjdGlvbkNoYW5nZSkge1xuICAgICAgdGhpcy5oYW5kbGVycy5vblNlbGVjdGlvbkNoYW5nZShldmVudClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQm91bmQgZXZlbnQgaGFuZGxlciBmb3IgUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVC5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZUJvdW5kID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgIGlmICh0aGlzLmhhbmRsZXJzPy5vblJlc3RvcmVPbklkZW50aWZ5Q2xvc2UpIHtcbiAgICAgIHRoaXMuaGFuZGxlcnMub25SZXN0b3JlT25JZGVudGlmeUNsb3NlKGV2ZW50KVxuICAgIH1cbiAgfVxufVxuXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB0eXBlIEFsbFdpZGdldFByb3BzLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIElNQ29uZmlnIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xuaW1wb3J0IHsgY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLCBjbGVhbnVwR3JhcGhpY3NMYXllciB9IGZyb20gJy4uL2dyYXBoaWNzLWxheWVyLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5pbnRlcmZhY2UgR3JhcGhpY3NMYXllckNhbGxiYWNrcyB7XG4gIG9uR3JhcGhpY3NMYXllckluaXRpYWxpemVkPzogKGdyYXBoaWNzTGF5ZXI6IF9fZXNyaS5HcmFwaGljc0xheWVyKSA9PiB2b2lkXG4gIG9uR3JhcGhpY3NMYXllckNsZWFuZWQ/OiAoKSA9PiB2b2lkXG59XG5cbi8qKlxuICogVXRpbGl0eSB0byBtYW5hZ2UgZ3JhcGhpY3MgbGF5ZXIgaW5pdGlhbGl6YXRpb24gYW5kIGNsZWFudXAuXG4gKiBcbiAqIENlbnRyYWxpemVzIGdyYXBoaWNzIGxheWVyIG1hbmFnZW1lbnQgbG9naWMgZm9yIHRoZSB3aWRnZXQuXG4gKiBIYW5kbGVzIGdyYXBoaWNzIGxheWVyIGNyZWF0aW9uLCBpbml0aWFsaXphdGlvbiwgYW5kIGNsZWFudXAuXG4gKiBcbiAqIFBhcnQgb2YgQ2h1bmsgNDogR3JhcGhpY3MgTGF5ZXIgTWFuYWdlbWVudCBleHRyYWN0aW9uLlxuICogXG4gKiBOb3RlOiBUaGlzIGlzIGEgdXRpbGl0eSBjbGFzcyAobm90IGEgaG9vaykgdG8gd29yayB3aXRoIGNsYXNzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBHcmFwaGljc0xheWVyTWFuYWdlciB7XG4gIHByaXZhdGUgZ3JhcGhpY3NMYXllclJlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbD5cbiAgcHJpdmF0ZSBtYXBWaWV3UmVmOiBSZWFjdC5SZWZPYmplY3Q8X19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbD5cblxuICBjb25zdHJ1Y3RvcihcbiAgICBncmFwaGljc0xheWVyUmVmOiBSZWFjdC5SZWZPYmplY3Q8X19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBudWxsPixcbiAgICBtYXBWaWV3UmVmOiBSZWFjdC5SZWZPYmplY3Q8X19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbD5cbiAgKSB7XG4gICAgdGhpcy5ncmFwaGljc0xheWVyUmVmID0gZ3JhcGhpY3NMYXllclJlZlxuICAgIHRoaXMubWFwVmlld1JlZiA9IG1hcFZpZXdSZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgZ3JhcGhpY3MgbGF5ZXIgZm9yIG1hcCBoaWdobGlnaHRpbmcuXG4gICAqIFxuICAgKiBDcmVhdGVzIG9yIHJldHJpZXZlcyBhIGdyYXBoaWNzIGxheWVyIGFuZCBhZGRzIGl0IHRvIHRoZSBtYXAgdmlldy5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRCBmb3IgZ3JhcGhpY3MgbGF5ZXIgbmFtaW5nXG4gICAqIEBwYXJhbSBtYXBWaWV3IC0gVGhlIEFyY0dJUyBNYXBWaWV3IG9yIFNjZW5lVmlldyBpbnN0YW5jZVxuICAgKiBAcGFyYW0gY2FsbGJhY2tzIC0gT3B0aW9uYWwgY2FsbGJhY2tzIGZvciBpbml0aWFsaXphdGlvbiBldmVudHNcbiAgICogXG4gICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIHRoZSBncmFwaGljcyBsYXllciwgb3IgbnVsbCBpZiBpbml0aWFsaXphdGlvbiBmYWlsZWRcbiAgICovXG4gIGFzeW5jIGluaXRpYWxpemUoXG4gICAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcsXG4gICAgY2FsbGJhY2tzPzogR3JhcGhpY3NMYXllckNhbGxiYWNrc1xuICApOiBQcm9taXNlPF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbD4ge1xuICAgIC8vIENodW5rIDQ6IENvbXBhcmlzb24gbG9nZ2luZyAtIG5ldyBpbXBsZW1lbnRhdGlvblxuICAgIGNvbnN0IG5ld1N0YXRlQmVmb3JlID0ge1xuICAgICAgaGFzR3JhcGhpY3NMYXllcjogISF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCxcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQ/LmlkIHx8IG51bGwsXG4gICAgICBoYXNNYXBWaWV3OiAhIXRoaXMubWFwVmlld1JlZi5jdXJyZW50LFxuICAgICAgdmlld1R5cGU6IHRoaXMubWFwVmlld1JlZi5jdXJyZW50Py50eXBlIHx8IG51bGxcbiAgICB9XG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllci1iZWZvcmUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgIG1hcFZpZXdUeXBlOiBtYXBWaWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgb3IgZ2V0IGdyYXBoaWNzIGxheWVyXG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gYXdhaXQgY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyKHdpZGdldElkLCBtYXBWaWV3KVxuICAgICAgaWYgKCFncmFwaGljc0xheWVyKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWluaXRpYWxpemVHcmFwaGljc0xheWVyLWZhaWxlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICAgIHJlc3VsdDogJ2ZhaWxlZCcsXG4gICAgICAgICAgICByZWFzb246ICdncmFwaGljcy1sYXllci1jcmVhdGlvbi1mYWlsZWQnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuXG4gICAgICAvLyBTdG9yZSByZWZlcmVuY2VzXG4gICAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IG1hcFZpZXdcbiAgICAgIHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50ID0gZ3JhcGhpY3NMYXllclxuXG4gICAgICBjb25zdCBuZXdTdGF0ZUFmdGVyID0ge1xuICAgICAgICBoYXNHcmFwaGljc0xheWVyOiAhIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LFxuICAgICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5pZCB8fCBudWxsLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIXRoaXMubWFwVmlld1JlZi5jdXJyZW50LFxuICAgICAgICB2aWV3VHlwZTogdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQ/LnR5cGUgfHwgbnVsbFxuICAgICAgfVxuXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXItc3VjY2VzcycsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICBzdGF0ZUFmdGVyOiBuZXdTdGF0ZUFmdGVyLFxuICAgICAgICAgIHJlc3VsdDogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgICAgICB2aWV3VHlwZTogbWFwVmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLy8gQ2FsbCBjYWxsYmFjayBpZiBwcm92aWRlZFxuICAgICAgaWYgKGNhbGxiYWNrcz8ub25HcmFwaGljc0xheWVySW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgY2FsbGJhY2tzLm9uR3JhcGhpY3NMYXllckluaXRpYWxpemVkKGdyYXBoaWNzTGF5ZXIpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBncmFwaGljc0xheWVyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllci1lcnJvcicsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICByZXN1bHQ6ICdlcnJvcicsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIGdyYXBoaWNzIGxheWVyIGxhemlseSB3aGVuIG91dHB1dCBkYXRhIHNvdXJjZSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRFxuICAgKiBAcGFyYW0gY29uZmlnIC0gV2lkZ2V0IGNvbmZpZ3VyYXRpb25cbiAgICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSB0aGF0IHdhcyBjcmVhdGVkXG4gICAqIEBwYXJhbSBtYXBWaWV3IC0gT3B0aW9uYWwgbWFwIHZpZXcgKGlmIG5vdCBwcm92aWRlZCwgdXNlcyBtYXBWaWV3UmVmKVxuICAgKiBAcGFyYW0gY2FsbGJhY2tzIC0gT3B0aW9uYWwgY2FsbGJhY2tzXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplRnJvbU91dHB1dERTKFxuICAgIHdpZGdldElkOiBzdHJpbmcsXG4gICAgY29uZmlnOiBJTUNvbmZpZyxcbiAgICBvdXRwdXREUzogRGF0YVNvdXJjZSxcbiAgICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsLFxuICAgIGNhbGxiYWNrcz86IEdyYXBoaWNzTGF5ZXJDYWxsYmFja3NcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ2h1bmsgNDogQ29tcGFyaXNvbiBsb2dnaW5nIC0gbmV3IGltcGxlbWVudGF0aW9uXG4gICAgY29uc3QgbmV3U3RhdGVCZWZvcmUgPSB7XG4gICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0OiBjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQsXG4gICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5pZCB8fCBudWxsLFxuICAgICAgaGFzTWFwVmlldzogISF0aGlzLm1hcFZpZXdSZWYuY3VycmVudCxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkXG4gICAgfVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFMtYmVmb3JlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIE9ubHkgaW5pdGlhbGl6ZSBpZiBlbmFibGVkIGFuZCBub3QgYWxyZWFkeSBpbml0aWFsaXplZFxuICAgIGlmICghY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgfHwgdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllckZyb21PdXRwdXREUy1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHJlc3VsdDogJ3NraXBwZWQnLFxuICAgICAgICAgIHJlYXNvbjogIWNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ID8gJ25vdC1lbmFibGVkJyA6ICdhbHJlYWR5LWluaXRpYWxpemVkJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFVzZSBwcm92aWRlZCBtYXAgdmlldyBvciBnZXQgZnJvbSByZWZcbiAgICBjb25zdCBtYXBWaWV3VG9Vc2UgPSBtYXBWaWV3IHx8IHRoaXMubWFwVmlld1JlZi5jdXJyZW50XG4gICAgaWYgKCFtYXBWaWV3VG9Vc2UpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllckZyb21PdXRwdXREUy1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHJlc3VsdDogJ3NraXBwZWQnLFxuICAgICAgICAgIHJlYXNvbjogJ21hcC12aWV3LW5vdC1hdmFpbGFibGUteWV0JyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgZ3JhcGhpY3MgbGF5ZXJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUod2lkZ2V0SWQsIG1hcFZpZXdUb1VzZSwgY2FsbGJhY2tzKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCB0aGUgZ3JhcGhpY3MgbGF5ZXIuXG4gICAqIFxuICAgKiBSZW1vdmVzIHRoZSBncmFwaGljcyBsYXllciBmcm9tIHRoZSBtYXAgdmlldyBhbmQgY2xlYXJzIGludGVybmFsIHJlZmVyZW5jZXMuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSURcbiAgICogQHBhcmFtIGNhbGxiYWNrcyAtIE9wdGlvbmFsIGNhbGxiYWNrc1xuICAgKi9cbiAgY2xlYW51cChcbiAgICB3aWRnZXRJZDogc3RyaW5nLFxuICAgIGNhbGxiYWNrcz86IEdyYXBoaWNzTGF5ZXJDYWxsYmFja3NcbiAgKTogdm9pZCB7XG4gICAgLy8gQ2h1bmsgNDogQ29tcGFyaXNvbiBsb2dnaW5nIC0gbmV3IGltcGxlbWVudGF0aW9uXG4gICAgY29uc3QgbmV3U3RhdGVCZWZvcmUgPSB7XG4gICAgICBoYXNHcmFwaGljc0xheWVyOiAhIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudD8uaWQgfHwgbnVsbCxcbiAgICAgIGhhc01hcFZpZXc6ICEhdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQsXG4gICAgICB2aWV3VHlwZTogdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQ/LnR5cGUgfHwgbnVsbFxuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWNsZWFudXBHcmFwaGljc0xheWVyLWJlZm9yZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IG1hcFZpZXcgPSB0aGlzLm1hcFZpZXdSZWYuY3VycmVudFxuICAgIGlmIChtYXBWaWV3KSB7XG4gICAgICBjbGVhbnVwR3JhcGhpY3NMYXllcih3aWRnZXRJZCwgbWFwVmlldylcbiAgICAgIHRoaXMubWFwVmlld1JlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgPSBudWxsXG5cbiAgICAgIGNvbnN0IG5ld1N0YXRlQWZ0ZXIgPSB7XG4gICAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQsXG4gICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQ/LmlkIHx8IG51bGwsXG4gICAgICAgIGhhc01hcFZpZXc6ICEhdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQsXG4gICAgICAgIHZpZXdUeXBlOiB0aGlzLm1hcFZpZXdSZWYuY3VycmVudD8udHlwZSB8fCBudWxsXG4gICAgICB9XG5cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1jbGVhbnVwR3JhcGhpY3NMYXllci1jb21wbGV0ZScsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICBzdGF0ZUFmdGVyOiBuZXdTdGF0ZUFmdGVyLFxuICAgICAgICAgIHJlc3VsdDogJ2NvbXBsZXRlJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLy8gQ2FsbCBjYWxsYmFjayBpZiBwcm92aWRlZFxuICAgICAgaWYgKGNhbGxiYWNrcz8ub25HcmFwaGljc0xheWVyQ2xlYW5lZCkge1xuICAgICAgICBjYWxsYmFja3Mub25HcmFwaGljc0xheWVyQ2xlYW5lZCgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1jbGVhbnVwR3JhcGhpY3NMYXllci1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHJlc3VsdDogJ3NraXBwZWQnLFxuICAgICAgICAgIHJlYXNvbjogJ25vLW1hcC12aWV3JyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllciBpZiBpdCBleGlzdHMuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSUQgZm9yIGxvZ2dpbmdcbiAgICogQHBhcmFtIGNvbmZpZyAtIFdpZGdldCBjb25maWd1cmF0aW9uXG4gICAqL1xuICBjbGVhckdyYXBoaWNzKHdpZGdldElkOiBzdHJpbmcsIGNvbmZpZzogSU1Db25maWcpOiB2b2lkIHtcbiAgICAvLyBDaHVuayA0OiBDb21wYXJpc29uIGxvZ2dpbmcgLSBuZXcgaW1wbGVtZW50YXRpb25cbiAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnRcbiAgICBjb25zdCBuZXdTdGF0ZUJlZm9yZSA9IHtcbiAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ6IGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgaGFzR3JhcGhpY3NMYXllcjogISFncmFwaGljc0xheWVyLFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyPy5pZCB8fCBudWxsLFxuICAgICAgZ3JhcGhpY3NDb3VudDogZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3MubGVuZ3RoIHx8IDBcbiAgICB9XG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1jbGVhckdyYXBoaWNzTGF5ZXJJZkV4aXN0cy1iZWZvcmUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgaWYgKGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIGdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgIGNvbnN0IHsgY2xlYXJHcmFwaGljc0xheWVyIH0gPSByZXF1aXJlKCcuLi9ncmFwaGljcy1sYXllci11dGlscycpXG4gICAgICBjbGVhckdyYXBoaWNzTGF5ZXIoZ3JhcGhpY3NMYXllcilcbiAgICAgIFxuICAgICAgY29uc3QgbmV3U3RhdGVBZnRlciA9IHtcbiAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodDogY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQsXG4gICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQ/LmlkIHx8IG51bGwsXG4gICAgICAgIGdyYXBoaWNzQ291bnQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5ncmFwaGljcy5sZW5ndGggfHwgMFxuICAgICAgfVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24tY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtY29tcGxldGUnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgc3RhdGVBZnRlcjogbmV3U3RhdGVBZnRlcixcbiAgICAgICAgICByZXN1bHQ6ICdjb21wbGV0ZScsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24tY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICByZXN1bHQ6ICdza2lwcGVkJyxcbiAgICAgICAgICByZWFzb246ICFjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCA/ICdub3QtZW5hYmxlZCcgOiAnbm8tZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IGdyYXBoaWNzIGxheWVyLlxuICAgKi9cbiAgZ2V0R3JhcGhpY3NMYXllcigpOiBfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudFxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBncmFwaGljcyBsYXllciBzaG91bGQgYmUgaW5pdGlhbGl6ZWQgYmFzZWQgb24gY29uZmlnIGFuZCBjdXJyZW50IHN0YXRlLlxuICAgKiBcbiAgICogQHBhcmFtIGNvbmZpZyAtIFdpZGdldCBjb25maWd1cmF0aW9uXG4gICAqIEBwYXJhbSBtYXBWaWV3IC0gTWFwIHZpZXcgdG8gY2hlY2tcbiAgICogQHJldHVybnMgdHJ1ZSBpZiBncmFwaGljcyBsYXllciBzaG91bGQgYmUgaW5pdGlhbGl6ZWRcbiAgICovXG4gIHNob3VsZEluaXRpYWxpemUoXG4gICAgY29uZmlnOiBJTUNvbmZpZyxcbiAgICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsXG4gICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIShtYXBWaWV3ICYmIGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmICF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudClcbiAgfVxufVxuXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB0eXBlIEFsbFdpZGdldFByb3BzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZyB9IGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuaW50ZXJmYWNlIE1hcFZpZXdDYWxsYmFja3Mge1xuICBvbk1hcFZpZXdDaGFuZ2U/OiAoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3IHwgbnVsbCkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIG1hcCB2aWV3IHJlZiBhbmQgdmlldyBjaGFuZ2UgaGFuZGxlcnMuXG4gKiBcbiAqIENlbnRyYWxpemVzIG1hcCB2aWV3IG1hbmFnZW1lbnQgbG9naWMgZm9yIHRoZSB3aWRnZXQuXG4gKiBIYW5kbGVzIEppbXVNYXBWaWV3IGNoYW5nZXMgYW5kIG1haW50YWlucyByZWZzIGZvciBtYXAgdmlldyBhY2Nlc3MuXG4gKiBcbiAqIFBhcnQgb2YgQ2h1bmsgNjogTWFwIFZpZXcgTWFuYWdlbWVudCBleHRyYWN0aW9uLlxuICogXG4gKiBOb3RlOiBUaGlzIGlzIGEgdXRpbGl0eSBjbGFzcyAobm90IGEgaG9vaykgdG8gd29yayB3aXRoIGNsYXNzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXBWaWV3TWFuYWdlciB7XG4gIHByaXZhdGUgbWFwVmlld1JlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+XG4gIHByaXZhdGUgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3IHwgbnVsbCA9IG51bGxcblxuICBjb25zdHJ1Y3RvcihtYXBWaWV3UmVmOiBSZWFjdC5SZWZPYmplY3Q8X19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbD4pIHtcbiAgICB0aGlzLm1hcFZpZXdSZWYgPSBtYXBWaWV3UmVmXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBKaW11TWFwVmlldyBjaGFuZ2UgZnJvbSBKaW11TWFwVmlld0NvbXBvbmVudC5cbiAgICogVXBkYXRlcyBpbnRlcm5hbCBzdGF0ZSBhbmQgY2FsbHMgY2FsbGJhY2tzLlxuICAgKi9cbiAgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkKFxuICAgIGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyB8IG51bGwsXG4gICAgcHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPixcbiAgICBjYWxsYmFja3M6IE1hcFZpZXdDYWxsYmFja3NcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgeyBpZCB9ID0gcHJvcHNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ01BUC1FWFRFTlQnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBoYXNKaW11TWFwVmlldzogISFqaW11TWFwVmlldyxcbiAgICAgIGhhc1ZpZXc6ICEhKGppbXVNYXBWaWV3Py52aWV3KSxcbiAgICAgIHZpZXdUeXBlOiBqaW11TWFwVmlldz8udmlldz8udHlwZSB8fCAnbm9uZScsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFN0b3JlIEppbXVNYXBWaWV3IGludGVybmFsbHlcbiAgICB0aGlzLmppbXVNYXBWaWV3ID0gamltdU1hcFZpZXdcbiAgICBcbiAgICAvLyBVcGRhdGUgbWFwIHZpZXcgcmVmIGlmIHZpZXcgaXMgYXZhaWxhYmxlXG4gICAgaWYgKGppbXVNYXBWaWV3Py52aWV3KSB7XG4gICAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IGppbXVNYXBWaWV3LnZpZXdcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgfVxuICAgIFxuICAgIC8vIENhbGwgY2FsbGJhY2sgdG8gdXBkYXRlIHdpZGdldCBzdGF0ZVxuICAgIGlmIChjYWxsYmFja3Mub25NYXBWaWV3Q2hhbmdlKSB7XG4gICAgICBjYWxsYmFja3Mub25NYXBWaWV3Q2hhbmdlKGppbXVNYXBWaWV3KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IEppbXVNYXBWaWV3LlxuICAgKi9cbiAgZ2V0SmltdU1hcFZpZXcoKTogSmltdU1hcFZpZXcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5qaW11TWFwVmlld1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgbWFwIHZpZXcgZnJvbSByZWYuXG4gICAqL1xuICBnZXRNYXBWaWV3KCk6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLm1hcFZpZXdSZWYuY3VycmVudFxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCBtYXAgdmlldyByZWZlcmVuY2VzLlxuICAgKi9cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IG51bGxcbiAgICB0aGlzLmppbXVNYXBWaWV3ID0gbnVsbFxuICB9XG59XG5cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi8uLi9jb25maWcnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciB3aWRnZXQgc3RhdGUgdGhhdCByZWxhdGVzIHRvIHNlbGVjdGlvbiBhbmQgcmVzdG9yYXRpb24uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0aW9uUmVzdG9yYXRpb25TdGF0ZSB7XG4gIGhhc1NlbGVjdGlvbjogYm9vbGVhblxuICBzZWxlY3Rpb25SZWNvcmRDb3VudDogbnVtYmVyXG4gIGxhc3RTZWxlY3Rpb24/OiB7XG4gICAgcmVjb3JkSWRzOiBzdHJpbmdbXVxuICAgIG91dHB1dERzSWQ6IHN0cmluZ1xuICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmdcbiAgfVxuICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZVxuICBhY2N1bXVsYXRlZFJlY29yZHM/OiBBcnJheTx7XG4gICAgY29uZmlnSWQ6IHN0cmluZ1xuICAgIHJlY29yZDogYW55IC8vIEZlYXR1cmVEYXRhUmVjb3JkXG4gIH0+XG4gIGlzUGFuZWxWaXNpYmxlOiBib29sZWFuXG59XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBjYWxsYmFja3MgdG8gdXBkYXRlIHdpZGdldCBzdGF0ZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZWxlY3Rpb25SZXN0b3JhdGlvbkNhbGxiYWNrcyB7XG4gIG9uU3RhdGVVcGRhdGU6IChuZXdTdGF0ZTogUGFydGlhbDxTZWxlY3Rpb25SZXN0b3JhdGlvblN0YXRlPikgPT4gdm9pZFxufVxuXG4vKipcbiAqIERlcGVuZGVuY2llcyBuZWVkZWQgZm9yIHBhbmVsIHJlc3RvcmF0aW9uIG1ldGhvZHMuXG4gKiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBhc3NlZCBhdCBydW50aW1lIHdoZW4gY2FsbGluZyBhZGRTZWxlY3Rpb25Ub01hcC9jbGVhclNlbGVjdGlvbkZyb21NYXAuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVzdG9yYXRpb25EZXBlbmRlbmNpZXMge1xuICBncmFwaGljc0xheWVyUmVmOiB7IGN1cnJlbnQ6IF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbCB9XG4gIG1hcFZpZXdSZWY6IHsgY3VycmVudDogX19lc3JpLk1hcFZpZXcgfCBudWxsIH1cbiAgZ3JhcGhpY3NMYXllck1hbmFnZXI6IHtcbiAgICBjbGVhckdyYXBoaWNzOiAod2lkZ2V0SWQ6IHN0cmluZywgY29uZmlnOiBhbnkpID0+IHZvaWRcbiAgfVxuICBjb25maWc6IHtcbiAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0OiBib29sZWFuXG4gIH1cbn1cblxuLyoqXG4gKiBNYW5hZ2VyIGNsYXNzIGZvciBoYW5kbGluZyBzZWxlY3Rpb24gc3RhdGUgdHJhY2tpbmcgYW5kIHJlc3RvcmF0aW9uIGxvZ2ljLlxuICogXG4gKiBUaGlzIGNsYXNzIGNlbnRyYWxpemVzIHRoZSBsb2dpYyBmb3I6XG4gKiAtIFNlY3Rpb24gMy4xOiBTZWxlY3Rpb24gU3RhdGUgVHJhY2tpbmcgKGhhbmRsZVNlbGVjdGlvbkNoYW5nZSlcbiAqIC0gU2VjdGlvbiAzLjI6IFBhbmVsIE9wZW4vQ2xvc2UgUmVzdG9yYXRpb24gKGFkZFNlbGVjdGlvblRvTWFwLCBjbGVhclNlbGVjdGlvbkZyb21NYXApXG4gKiAtIFNlY3Rpb24gMy4zOiBNYXAgSWRlbnRpZnkgUmVzdG9yYXRpb24gKGhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2UpXG4gKiBcbiAqIFBhcnQgb2YgQ2h1bmsgMzogU2VsZWN0aW9uICYgUmVzdG9yYXRpb24gZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgU2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSB3aWRnZXRJZDogc3RyaW5nID0gJydcbiAgcHJpdmF0ZSBzdGF0ZUdldHRlcjogKCkgPT4gU2VsZWN0aW9uUmVzdG9yYXRpb25TdGF0ZVxuICBwcml2YXRlIGNhbGxiYWNrczogU2VsZWN0aW9uUmVzdG9yYXRpb25DYWxsYmFja3NcblxuICBjb25zdHJ1Y3RvcihcbiAgICBzdGF0ZUdldHRlcjogKCkgPT4gU2VsZWN0aW9uUmVzdG9yYXRpb25TdGF0ZSxcbiAgICBjYWxsYmFja3M6IFNlbGVjdGlvblJlc3RvcmF0aW9uQ2FsbGJhY2tzXG4gICkge1xuICAgIHRoaXMuc3RhdGVHZXR0ZXIgPSBzdGF0ZUdldHRlclxuICAgIHRoaXMuY2FsbGJhY2tzID0gY2FsbGJhY2tzXG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgd2lkZ2V0IElELiBTaG91bGQgYmUgY2FsbGVkIG9uY2UgaW4gY29tcG9uZW50RGlkTW91bnQuXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAgICovXG4gIHNldFdpZGdldElkKHdpZGdldElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLndpZGdldElkID0gd2lkZ2V0SWRcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gU2VjdGlvbiAzLjE6IFNlbGVjdGlvbiBTdGF0ZSBUcmFja2luZ1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgc2VsZWN0aW9uIGNoYW5nZSBldmVudHMgZnJvbSBxdWVyaWVzLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2Q6XG4gICAqIDEuIElnbm9yZXMgZXZlbnRzIG5vdCBmb3IgdGhpcyB3aWRnZXRcbiAgICogMi4gSWdub3JlcyBlbXB0eSBzZWxlY3Rpb25zIHdoZW4gcGFuZWwgaXMgY2xvc2VkICh0byBwcmV2ZW50IHN0YXRlIHdpcGUpXG4gICAqIDMuIENhbGN1bGF0ZXMgc2VsZWN0aW9uIGNvdW50ICh1c2VzIGFjY3VtdWxhdGVkIHJlY29yZHMgaW4gQWRkL1JlbW92ZSBtb2RlcylcbiAgICogNC4gVXBkYXRlcyB3aWRnZXQgc3RhdGU6IGhhc1NlbGVjdGlvbiwgc2VsZWN0aW9uUmVjb3JkQ291bnQsIGxhc3RTZWxlY3Rpb25cbiAgICogNS4gUmVzZXRzIG1vZGUgdG8gTmV3U2VsZWN0aW9uIGlmIHNlbGVjdGlvbiBpcyBjbGVhcmVkIGluIFJlbW92ZSBtb2RlXG4gICAqIFxuICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgc2VsZWN0aW9uIGNoYW5nZSBldmVudFxuICAgKi9cbiAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ8eyBcbiAgICAgIHdpZGdldElkOiBzdHJpbmdcbiAgICAgIHJlY29yZElkczogc3RyaW5nW11cbiAgICAgIGRhdGFTb3VyY2VJZD86IHN0cmluZ1xuICAgICAgb3V0cHV0RHNJZD86IHN0cmluZ1xuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ/OiBzdHJpbmcgXG4gICAgfT5cblxuICAgIC8vIEdldCBjdXJyZW50IHN0YXRlXG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnN0YXRlR2V0dGVyKClcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIDEuIE9ubHkgdHJhY2sgaWYgdGhpcyBpcyBmb3Igb3VyIHdpZGdldFxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGlmIChjdXN0b21FdmVudC5kZXRhaWwud2lkZ2V0SWQgIT09IHRoaXMud2lkZ2V0SWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIDIuIElnbm9yZSBlbXB0eSBzZWxlY3Rpb25zIHdoZW4gcGFuZWwgaXMgY2xvc2VkXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgY29uc3QgaGFzU2VsZWN0aW9uID0gY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcyAmJiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCA+IDBcblxuICAgIGlmICghc3RhdGUuaXNQYW5lbFZpc2libGUgJiYgIWhhc1NlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS1pZ25vcmluZy1lbXB0eS1zZWxlY3Rpb24td2hpbGUtcGFuZWwtY2xvc2VkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIDMuIENhbGN1bGF0ZSBzZWxlY3Rpb24gY291bnRcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBJbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCB1c2UgYWNjdW11bGF0ZWQgcmVjb3JkcyBjb3VudFxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBjb25zdCBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA9IHN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICBjb25zdCBzZWxlY3Rpb25Db3VudCA9IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDBcbiAgICAgID8gYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRcbiAgICAgIDogKGhhc1NlbGVjdGlvbiA/IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoIDogMClcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIDQuIERldGVybWluZSBpZiBtb2RlIHNob3VsZCByZXNldFxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIElmIHNlbGVjdGlvbiBpcyBjbGVhcmVkIGluIFJlbW92ZSBtb2RlLCByZXNldCB0byBOZXdTZWxlY3Rpb25cbiAgICBjb25zdCBzaG91bGRSZXNldE1vZGUgPSAhaGFzU2VsZWN0aW9uICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkNvdW50ID09PSAwICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIDUuIEJ1aWxkIG5ldyBzdGF0ZVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGNvbnN0IG5ld1N0YXRlOiBQYXJ0aWFsPFNlbGVjdGlvblJlc3RvcmF0aW9uU3RhdGU+ID0ge1xuICAgICAgaGFzU2VsZWN0aW9uOiBzZWxlY3Rpb25Db3VudCA+IDAsXG4gICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogc2VsZWN0aW9uQ291bnQsXG4gICAgICAvLyBTdG9yZSBsYXN0U2VsZWN0aW9uIGZvciBjb21wYXRpYmlsaXR5XG4gICAgICBsYXN0U2VsZWN0aW9uOiBoYXNTZWxlY3Rpb24gJiYgY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQgJiYgY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgICAgID8ge1xuICAgICAgICAgICAgcmVjb3JkSWRzOiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLFxuICAgICAgICAgICAgb3V0cHV0RHNJZDogY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZFxuICAgIH1cblxuICAgIC8vIFJlc2V0IG1vZGUgaWYgbmVlZGVkXG4gICAgaWYgKHNob3VsZFJlc2V0TW9kZSkge1xuICAgICAgbmV3U3RhdGUucmVzdWx0c01vZGUgPSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgbmV3U3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzID0gW10gLy8gQWxzbyBjbGVhciBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgfVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gNi4gTG9nIGRlY2lzaW9uIGxvZ2ljXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVTZWxlY3Rpb25DaGFuZ2UtdXBkYXRpbmctc3RhdGUnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZTogc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICBldmVudFJlY29yZElkc0NvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIGhhc1NlbGVjdGlvbkZyb21FdmVudDogaGFzU2VsZWN0aW9uLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRCZWZvcmU6IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50LFxuICAgICAgY2FsY3VsYXRlZFNlbGVjdGlvbkNvdW50OiBzZWxlY3Rpb25Db3VudCxcbiAgICAgICd3aWxsLXNldC1oYXNTZWxlY3Rpb24nOiBzZWxlY3Rpb25Db3VudCA+IDAsXG4gICAgICAnd2lsbC1zZXQtbGFzdFNlbGVjdGlvbic6IGhhc1NlbGVjdGlvbiAmJiAhIWN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkICYmICEhY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkLFxuICAgICAgJ3dpbGwtcmVzZXQtbW9kZSc6IHNob3VsZFJlc2V0TW9kZSxcbiAgICAgIGRlY2lzaW9uTG9naWM6IHtcbiAgICAgICAgJ2lzQWNjdW11bGF0aW9uTW9kZSc6IGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgJ2FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCc6IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCxcbiAgICAgICAgJ3VzZS1hY2N1bXVsYXRlZC1jb3VudCc6IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDAsXG4gICAgICAgICd1c2UtZXZlbnQtY291bnQnOiAhKGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDApLFxuICAgICAgICAnc2hvdWxkLXJlc2V0LW1vZGUnOiBzaG91bGRSZXNldE1vZGVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gNy4gVXBkYXRlIHN0YXRlIHZpYSBjYWxsYmFja1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIHRoaXMuY2FsbGJhY2tzLm9uU3RhdGVVcGRhdGUobmV3U3RhdGUpXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyA4LiBMb2cgc3RhdGUgQUZURVIgdXBkYXRlXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVTZWxlY3Rpb25DaGFuZ2Utc3RhdGUtdXBkYXRlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICduZXctaGFzU2VsZWN0aW9uJzogc2VsZWN0aW9uQ291bnQgPiAwLFxuICAgICAgJ25ldy1zZWxlY3Rpb25SZWNvcmRDb3VudCc6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgJ25ldy1sYXN0U2VsZWN0aW9uLXJlY29yZElkcy1jb3VudCc6IGhhc1NlbGVjdGlvbiAmJiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCAmJiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgICAgPyBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICA6IDAsXG4gICAgICAnbW9kZS1yZXNldCc6IHNob3VsZFJlc2V0TW9kZSxcbiAgICAgICduZXctbW9kZSc6IHNob3VsZFJlc2V0TW9kZSA/IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uIDogc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAnbm90ZSc6IHNob3VsZFJlc2V0TW9kZSBcbiAgICAgICAgPyAnTW9kZSByZXNldCB0byBOZXdTZWxlY3Rpb24gYmVjYXVzZSBzZWxlY3Rpb24gd2FzIGNsZWFyZWQgaW4gUmVtb3ZlIG1vZGUnXG4gICAgICAgIDogJ2xhc3RTZWxlY3Rpb24tb25seS1jb250YWlucy1jdXJyZW50LXF1ZXJ5LXJlY29yZHMtbm90LWFsbC1hY2N1bXVsYXRlZC1yZWNvcmRzJ1xuICAgIH0pXG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFNlY3Rpb24gMy4yOiBQYW5lbCBPcGVuL0Nsb3NlIFJlc3RvcmF0aW9uXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogUmVzdG9yZXMgc2VsZWN0aW9uIHRvIHRoZSBtYXAgd2hlbiB0aGUgd2lkZ2V0IHBhbmVsIG9wZW5zLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2Q6XG4gICAqIDEuIENoZWNrcyBpZiBhY2N1bXVsYXRlZCByZWNvcmRzIGV4aXN0IChBZGQvUmVtb3ZlIG1vZGVzKVxuICAgKiAyLiBHcm91cHMgYWNjdW11bGF0ZWQgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICogMy4gQ2FsbHMgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggZm9yIGVhY2ggb3JpZ2luIERTXG4gICAqIDQuIEZhbGxzIGJhY2sgdG8gbGFzdFNlbGVjdGlvbiBpZiBubyBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAqIFxuICAgKiBAcGFyYW0gZGVwcyAtIFJ1bnRpbWUgZGVwZW5kZW5jaWVzIChncmFwaGljcyBsYXllciwgbWFwIHZpZXcsIGNvbmZpZylcbiAgICovXG4gIGFzeW5jIGFkZFNlbGVjdGlvblRvTWFwKGRlcHM6IFJlc3RvcmF0aW9uRGVwZW5kZW5jaWVzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnN0YXRlR2V0dGVyKClcbiAgICBjb25zdCB7IGxhc3RTZWxlY3Rpb24sIGFjY3VtdWxhdGVkUmVjb3JkcywgcmVzdWx0c01vZGUgfSA9IHN0YXRlXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIWxhc3RTZWxlY3Rpb24sXG4gICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IGxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgIGxhc3RTZWxlY3Rpb25PdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uPy5vdXRwdXREc0lkXG4gICAgfSlcblxuICAgIC8vIEluIEFkZC9SZW1vdmUgbW9kZXMsIHVzZSBhY2N1bXVsYXRlZCByZWNvcmRzIGZvciByZXN0b3JhdGlvblxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuXG4gICAgLy8gQ2hlY2sgaWYgd2Ugc2hvdWxkIHVzZSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdzaG91bGQtdXNlLWFjY3VtdWxhdGVkJzogdHJ1ZVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IDAsXG4gICAgICAgICd3aWxsLWZhbGxiYWNrLXRvLWxhc3RTZWxlY3Rpb24nOiAhIWxhc3RTZWxlY3Rpb25cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEdyb3VwIGFjY3VtdWxhdGVkIHJlY29yZHMgYnkgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBhd2FpdCB0aGlzLnJlc3RvcmVBY2N1bXVsYXRlZFJlY29yZHMoYWNjdW11bGF0ZWRSZWNvcmRzLCBkZXBzKVxuICAgIH0gZWxzZSBpZiAoIWlzQWNjdW11bGF0aW9uTW9kZSAmJiBsYXN0U2VsZWN0aW9uICYmIGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEZhbGwgYmFjayB0byBsYXN0U2VsZWN0aW9uIGluIE5ldyBtb2RlXG4gICAgICBhd2FpdCB0aGlzLnJlc3RvcmVMYXN0U2VsZWN0aW9uKGxhc3RTZWxlY3Rpb24sIGRlcHMpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1uby1zZWxlY3Rpb24tdG8tcmVzdG9yZScsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhbGFzdFNlbGVjdGlvblxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyOiBSZXN0b3JlIGFjY3VtdWxhdGVkIHJlY29yZHMgKGdyb3VwZWQgYnkgb3JpZ2luIERTKVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyByZXN0b3JlQWNjdW11bGF0ZWRSZWNvcmRzKFxuICAgIGFjY3VtdWxhdGVkUmVjb3JkczogQXJyYXk8eyBjb25maWdJZDogc3RyaW5nLCByZWNvcmQ6IGFueSB9PixcbiAgICBkZXBzOiBSZXN0b3JhdGlvbkRlcGVuZGVuY2llc1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBMYXp5LWxvYWQgZGVwZW5kZW5jaWVzXG4gICAgY29uc3QgeyBEYXRhU291cmNlTWFuYWdlciB9ID0gYXdhaXQgaW1wb3J0KCdqaW11LWNvcmUnKVxuICAgIGNvbnN0IHsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggfSA9IGF3YWl0IGltcG9ydCgnLi4vc2VsZWN0aW9uLXV0aWxzJylcblxuICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxhbnksIGFueVtdPigpIC8vIE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPlxuICAgIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcblxuICAgIC8vIEdyb3VwIHJlY29yZHMgYnkgb3JpZ2luIERTXG4gICAgYWNjdW11bGF0ZWRSZWNvcmRzLmZvckVhY2goKHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgIGxldCBvcmlnaW5EUzogYW55IHwgbnVsbCA9IG51bGxcblxuICAgICAgLy8gTWV0aG9kIDE6IFRyeSB0byBnZXQgZnJvbSByZWNvcmQuZ2V0RGF0YVNvdXJjZSgpXG4gICAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKVxuICAgICAgaWYgKHJlY29yZERTKSB7XG4gICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXM/LigpPy5bMF0gfHwgcmVjb3JkRFNcblxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdmb3VuZC1vcmlnaW4tZHMtZnJvbS1yZWNvcmQtZHMnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUz8uaWQgfHwgJ251bGwnLFxuICAgICAgICAgIG1ldGhvZDogJ3JlY29yZC5nZXREYXRhU291cmNlKCknXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIE1ldGhvZCAyOiBJZiB0aGF0IGZhaWxlZCwgc2VhcmNoIGFsbCBkYXRhIHNvdXJjZXMgZm9yIGEgcmVjb3JkIHdpdGggbWF0Y2hpbmcgSURcbiAgICAgIGlmICghb3JpZ2luRFMpIHtcbiAgICAgICAgY29uc3QgZHNNYXAgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZXMoKVxuICAgICAgICBjb25zdCBhbGxEYXRhU291cmNlcyA9IE9iamVjdC52YWx1ZXMoZHNNYXApXG5cbiAgICAgICAgZm9yIChjb25zdCBkcyBvZiBhbGxEYXRhU291cmNlcykge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgICAgaWYgKGRzICYmIHR5cGVvZiAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCBhbGxSZWNvcmRzID0gKGRzIGFzIGFueSkuZ2V0QWxsTG9hZGVkUmVjb3JkcygpIHx8IFtdXG4gICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gYWxsUmVjb3Jkcy5maW5kKChyOiBhbnkpID0+IHIuZ2V0SWQoKSA9PT0gcmVjb3JkSWQpXG5cbiAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgb3JpZ2luRFMgPSAoZHMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcz8uKCk/LlswXSB8fCBkc1xuXG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdmb3VuZC1vcmlnaW4tZHMtdmlhLXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICdzZWFyY2hlZC1hbGwtZGF0YS1zb3VyY2VzJyxcbiAgICAgICAgICAgICAgICAgIHNlYXJjaGVkRFNJZDogZHMuaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIC8vIENvbnRpbnVlIHNlYXJjaGluZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgaWYgKCFyZWNvcmRzQnlPcmlnaW5EUy5oYXMob3JpZ2luRFMpKSB7XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgfVxuICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5nZXQob3JpZ2luRFMpIS5wdXNoKHJlY29yZClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ2NvdWxkLW5vdC1maW5kLW9yaWdpbi1kcy1mb3ItcmVjb3JkJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgd2FybmluZzogJ3JlY29yZC13aWxsLWJlLXNraXBwZWQnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXJlc3RvcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGVHZXR0ZXIoKS5yZXN1bHRzTW9kZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZVxuICAgIH0pXG5cbiAgICAvLyBSZXN0b3JlIHNlbGVjdGlvbiBmb3IgZWFjaCBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gZGVwcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSBkZXBzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWRcbiAgICBjb25zdCBtYXBWaWV3ID0gZGVwcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG5cbiAgICBmb3IgKGNvbnN0IFtvcmlnaW5EUywgcmVjb3Jkc10gb2YgcmVjb3Jkc0J5T3JpZ2luRFMuZW50cmllcygpKSB7XG4gICAgICBjb25zdCByZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgIHRoaXMud2lkZ2V0SWQsXG4gICAgICAgICAgb3JpZ2luRFMsXG4gICAgICAgICAgcmVjb3JkSWRzLFxuICAgICAgICAgIHJlY29yZHMsXG4gICAgICAgICAgdHJ1ZSwgLy8gYWxzb1B1Ymxpc2hUb091dHB1dERTXG4gICAgICAgICAgdXNlR3JhcGhpY3NMYXllcixcbiAgICAgICAgICBncmFwaGljc0xheWVyLFxuICAgICAgICAgIG1hcFZpZXdcbiAgICAgICAgKVxuXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlZC1vcmlnaW4tZHMnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICB6b29tRXhlY3V0ZWQ6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yZS1vcmlnaW4tZHMtZmFpbGVkJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXI6IFJlc3RvcmUgbGFzdFNlbGVjdGlvbiAoTmV3IG1vZGUpXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHJlc3RvcmVMYXN0U2VsZWN0aW9uKFxuICAgIGxhc3RTZWxlY3Rpb246IHsgcmVjb3JkSWRzOiBzdHJpbmdbXSwgb3V0cHV0RHNJZDogc3RyaW5nLCBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nIH0sXG4gICAgZGVwczogUmVzdG9yYXRpb25EZXBlbmRlbmNpZXNcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gTGF6eS1sb2FkIGRlcGVuZGVuY2llc1xuICAgIGNvbnN0IHsgRGF0YVNvdXJjZU1hbmFnZXIgfSA9IGF3YWl0IGltcG9ydCgnamltdS1jb3JlJylcbiAgICBjb25zdCB7IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3NlbGVjdGlvbi11dGlscycpXG5cbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3Qgb3V0cHV0RFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShsYXN0U2VsZWN0aW9uLm91dHB1dERzSWQpXG5cbiAgICBpZiAoIW91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLW91dHB1dERTLW5vdC1mb3VuZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICBvdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uLm91dHB1dERzSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBHZXQgb3JpZ2luIERTXG4gICAgY29uc3Qgb3JpZ2luRFMgPSAob3V0cHV0RFMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcz8uKCk/LlswXSB8fCBvdXRwdXREU1xuXG4gICAgLy8gR2V0IHJlY29yZHNcbiAgICBjb25zdCBhbGxSZWNvcmRzID0gKG91dHB1dERTIGFzIGFueSkuZ2V0QWxsTG9hZGVkUmVjb3JkcygpIHx8IFtdXG4gICAgY29uc3QgcmVjb3Jkc1RvUmVzdG9yZSA9IGFsbFJlY29yZHMuZmlsdGVyKChyOiBhbnkpID0+IFxuICAgICAgbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMuaW5jbHVkZXMoci5nZXRJZCgpKVxuICAgIClcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXJlc3RvcmluZy1sYXN0U2VsZWN0aW9uJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgb3V0cHV0RHNJZDogbGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIHJlY29yZHNGb3VuZDogcmVjb3Jkc1RvUmVzdG9yZS5sZW5ndGhcbiAgICB9KVxuXG4gICAgY29uc3QgdXNlR3JhcGhpY3NMYXllciA9IGRlcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHRcbiAgICBjb25zdCBncmFwaGljc0xheWVyID0gZGVwcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgY29uc3QgbWFwVmlldyA9IGRlcHMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICB0aGlzLndpZGdldElkLFxuICAgICAgICBvcmlnaW5EUyxcbiAgICAgICAgbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMsXG4gICAgICAgIHJlY29yZHNUb1Jlc3RvcmUsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHVzZUdyYXBoaWNzTGF5ZXIsXG4gICAgICAgIGdyYXBoaWNzTGF5ZXIsXG4gICAgICAgIG1hcFZpZXdcbiAgICAgIClcblxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlZC1sYXN0U2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkc1RvUmVzdG9yZS5sZW5ndGhcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yZS1sYXN0U2VsZWN0aW9uLWZhaWxlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHNlbGVjdGlvbiBmcm9tIHRoZSBtYXAgd2hlbiB0aGUgd2lkZ2V0IHBhbmVsIGNsb3Nlcy5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kOlxuICAgKiAxLiBDbGVhcnMgZ3JhcGhpY3MgbGF5ZXIgKGlmIGVuYWJsZWQpXG4gICAqIDIuIEdyb3VwcyBhY2N1bXVsYXRlZCByZWNvcmRzIGJ5IG9yaWdpbiBEUyAoaWYgdGhleSBleGlzdClcbiAgICogMy4gQ2xlYXJzIHNlbGVjdGlvbiBmcm9tIGVhY2ggb3JpZ2luIERTXG4gICAqIDQuIEZhbGxzIGJhY2sgdG8gbGFzdFNlbGVjdGlvbiBpZiBubyBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAqIFxuICAgKiBAcGFyYW0gZGVwcyAtIFJ1bnRpbWUgZGVwZW5kZW5jaWVzIChncmFwaGljcyBsYXllciwgbWFwIHZpZXcsIGNvbmZpZylcbiAgICovXG4gIGFzeW5jIGNsZWFyU2VsZWN0aW9uRnJvbU1hcChkZXBzOiBSZXN0b3JhdGlvbkRlcGVuZGVuY2llcyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZUdldHRlcigpXG4gICAgY29uc3QgeyBsYXN0U2VsZWN0aW9uLCBhY2N1bXVsYXRlZFJlY29yZHMsIHJlc3VsdHNNb2RlIH0gPSBzdGF0ZVxuXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIWxhc3RTZWxlY3Rpb24sXG4gICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IGxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDAsXG4gICAgICBoYXNTZWxlY3Rpb246IHN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZVxuICAgIH0pXG5cbiAgICAvLyBBbHdheXMgY2xlYXIgZ3JhcGhpY3MgbGF5ZXIgZmlyc3Qgd2hlbiBwYW5lbCBjbG9zZXNcbiAgICBpZiAoZGVwcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBkZXBzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCkge1xuICAgICAgZGVwcy5ncmFwaGljc0xheWVyTWFuYWdlci5jbGVhckdyYXBoaWNzKHRoaXMud2lkZ2V0SWQsIGRlcHMuY29uZmlnKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1ncmFwaGljcy1sYXllci1jbGVhcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZGVwcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQuaWRcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQWx3YXlzIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHMgaWYgdGhleSBleGlzdFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLWNoZWNraW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAnY29uZGl0aW9uJzogJ2FjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCcsXG4gICAgICAnY29uZGl0aW9uLXJlc3VsdCc6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgIH0pXG5cbiAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmNsZWFyQWNjdW11bGF0ZWRSZWNvcmRzKGFjY3VtdWxhdGVkUmVjb3JkcywgZGVwcylcbiAgICB9IGVsc2UgaWYgKGxhc3RTZWxlY3Rpb24gJiYgbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgdGhpcy5jbGVhckxhc3RTZWxlY3Rpb24obGFzdFNlbGVjdGlvbiwgZGVwcylcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1uby1zZWxlY3Rpb24tdG8tY2xlYXInLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyOiBDbGVhciBhY2N1bXVsYXRlZCByZWNvcmRzIChncm91cGVkIGJ5IG9yaWdpbiBEUylcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2xlYXJBY2N1bXVsYXRlZFJlY29yZHMoXG4gICAgYWNjdW11bGF0ZWRSZWNvcmRzOiBBcnJheTx7IGNvbmZpZ0lkOiBzdHJpbmcsIHJlY29yZDogYW55IH0+LFxuICAgIGRlcHM6IFJlc3RvcmF0aW9uRGVwZW5kZW5jaWVzXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIExhenktbG9hZCBkZXBlbmRlbmNpZXNcbiAgICBjb25zdCB7IERhdGFTb3VyY2VNYW5hZ2VyIH0gPSBhd2FpdCBpbXBvcnQoJ2ppbXUtY29yZScpXG4gICAgY29uc3QgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgfSA9IGF3YWl0IGltcG9ydCgnLi4vc2VsZWN0aW9uLXV0aWxzJylcblxuICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxhbnksIGFueVtdPigpXG4gICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuXG4gICAgLy8gR3JvdXAgcmVjb3JkcyBieSBvcmlnaW4gRFMgKHNhbWUgbG9naWMgYXMgYWRkU2VsZWN0aW9uVG9NYXApXG4gICAgYWNjdW11bGF0ZWRSZWNvcmRzLmZvckVhY2goKHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgIGxldCBvcmlnaW5EUzogYW55IHwgbnVsbCA9IG51bGxcblxuICAgICAgLy8gTWV0aG9kIDE6IFRyeSB0byBnZXQgZnJvbSByZWNvcmQuZ2V0RGF0YVNvdXJjZSgpXG4gICAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKVxuICAgICAgaWYgKHJlY29yZERTKSB7XG4gICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXM/LigpPy5bMF0gfHwgcmVjb3JkRFNcblxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdjbGVhci1mb3VuZC1vcmlnaW4tZHMtZnJvbS1yZWNvcmQtZHMnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUz8uaWQgfHwgJ251bGwnXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIE1ldGhvZCAyOiBTZWFyY2ggYWxsIGRhdGEgc291cmNlc1xuICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICBjb25zdCBkc01hcCA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlcygpXG4gICAgICAgIGNvbnN0IGFsbERhdGFTb3VyY2VzID0gT2JqZWN0LnZhbHVlcyhkc01hcClcblxuICAgICAgICBmb3IgKGNvbnN0IGRzIG9mIGFsbERhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgaWYgKGRzICYmIHR5cGVvZiAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCBhbGxSZWNvcmRzID0gKGRzIGFzIGFueSkuZ2V0QWxsTG9hZGVkUmVjb3JkcygpIHx8IFtdXG4gICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gYWxsUmVjb3Jkcy5maW5kKChyOiBhbnkpID0+IHIuZ2V0SWQoKSA9PT0gcmVjb3JkSWQpXG5cbiAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgb3JpZ2luRFMgPSAoZHMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcz8uKCk/LlswXSB8fCBkc1xuXG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1mb3VuZC1vcmlnaW4tZHMtdmlhLXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIC8vIENvbnRpbnVlIHNlYXJjaGluZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgaWYgKCFyZWNvcmRzQnlPcmlnaW5EUy5oYXMob3JpZ2luRFMpKSB7XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgfVxuICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5nZXQob3JpZ2luRFMpIS5wdXNoKHJlY29yZClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2xlYXJpbmctYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZVxuICAgIH0pXG5cbiAgICAvLyBDbGVhciBzZWxlY3Rpb24gZnJvbSBlYWNoIG9yaWdpbiBEU1xuICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSBkZXBzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IGRlcHMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuXG4gICAgZm9yIChjb25zdCBbb3JpZ2luRFMsIHJlY29yZHNdIG9mIHJlY29yZHNCeU9yaWdpbkRTLmVudHJpZXMoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVXNlIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB0byBwcm9wZXJseSBwdWJsaXNoIGVtcHR5IHNlbGVjdGlvbiBtZXNzYWdlXG4gICAgICAgIC8vIFRoaXMgY2xlYXJzIHRoZSAjZGF0YV9zPS4uLiBoYXNoIHBhcmFtZXRlclxuICAgICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMoXG4gICAgICAgICAgdGhpcy53aWRnZXRJZCxcbiAgICAgICAgICBvcmlnaW5EUyxcbiAgICAgICAgICB1c2VHcmFwaGljc0xheWVyLFxuICAgICAgICAgIGdyYXBoaWNzTGF5ZXJcbiAgICAgICAgKVxuXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmVkLW9yaWdpbi1kcycsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHMubGVuZ3RoXG4gICAgICAgIH0pXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2xlYXItb3JpZ2luLWRzLWZhaWxlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMud2lkZ2V0SWQsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyOiBDbGVhciBsYXN0U2VsZWN0aW9uIChOZXcgbW9kZSlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2xlYXJMYXN0U2VsZWN0aW9uKFxuICAgIGxhc3RTZWxlY3Rpb246IHsgcmVjb3JkSWRzOiBzdHJpbmdbXSwgb3V0cHV0RHNJZDogc3RyaW5nLCBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nIH0sXG4gICAgZGVwczogUmVzdG9yYXRpb25EZXBlbmRlbmNpZXNcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gTGF6eS1sb2FkIGRlcGVuZGVuY2llc1xuICAgIGNvbnN0IHsgRGF0YVNvdXJjZU1hbmFnZXIgfSA9IGF3YWl0IGltcG9ydCgnamltdS1jb3JlJylcbiAgICBjb25zdCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9ID0gYXdhaXQgaW1wb3J0KCcuLi9zZWxlY3Rpb24tdXRpbHMnKVxuXG4gICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNvbnN0IG91dHB1dERTID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2UobGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkKVxuXG4gICAgaWYgKCFvdXRwdXREUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1vdXRwdXREUy1ub3QtZm91bmQnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgICAgb3V0cHV0RHNJZDogbGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3Qgb3JpZ2luRFMgPSAob3V0cHV0RFMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcz8uKCk/LlswXSB8fCBvdXRwdXREU1xuXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2xlYXJpbmctbGFzdFNlbGVjdGlvbicsXG4gICAgICB3aWRnZXRJZDogdGhpcy53aWRnZXRJZCxcbiAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZCxcbiAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkXG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gZGVwcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IGRlcHMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuXG4gICAgICAvLyBVc2UgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIHRvIHByb3Blcmx5IHB1Ymxpc2ggZW1wdHkgc2VsZWN0aW9uIG1lc3NhZ2VcbiAgICAgIC8vIFRoaXMgY2xlYXJzIHRoZSAjZGF0YV9zPS4uLiBoYXNoIHBhcmFtZXRlclxuICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKFxuICAgICAgICB0aGlzLndpZGdldElkLFxuICAgICAgICBvcmlnaW5EUyxcbiAgICAgICAgdXNlR3JhcGhpY3NMYXllcixcbiAgICAgICAgZ3JhcGhpY3NMYXllclxuICAgICAgKVxuXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyZWQtbGFzdFNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZFxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhci1sYXN0U2VsZWN0aW9uLWZhaWxlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLndpZGdldElkLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFNlY3Rpb24gMy4zOiBNYXAgSWRlbnRpZnkgUmVzdG9yYXRpb25cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBUT0RPOiBJbXBsZW1lbnQgaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZSgpXG59XG4iLCJpbXBvcnQgeyB0eXBlIEFsbFdpZGdldFByb3BzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZywgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuaW50ZXJmYWNlIFVybENvbnN1bXB0aW9uQ2FsbGJhY2tzIHtcbiAgb25Jbml0aWFsVmFsdWVGb3VuZDogKHZhbHVlOiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9IHwgdW5kZWZpbmVkKSA9PiB2b2lkXG4gIG9uTW9kZVJlc2V0TmVlZGVkPzogKCkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIFVSTCBwYXJhbWV0ZXIgY29uc3VtcHRpb24gYW5kIGRlZXAgbGlua2luZy5cbiAqIFxuICogSGFuZGxlcyBib3RoIEhhc2ggZnJhZ21lbnRzICgjKSBhbmQgUXVlcnkgU3RyaW5ncyAoPyksIHdpdGggSGFzaCB0YWtpbmcgcHJpb3JpdHkuXG4gKiBJbXBsZW1lbnRzIGF0b21pYyBjb25zdW1wdGlvbiB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzLlxuICogXG4gKiBQYXJ0IG9mIENodW5rIDE6IFVSTCBQYXJhbWV0ZXIgQ29uc3VtcHRpb24gZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgVXJsQ29uc3VtcHRpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSBsYXN0UHJvY2Vzc2VkSGFzaDogc3RyaW5nID0gJydcbiAgcHJpdmF0ZSBpc1Byb2Nlc3Npbmc6IGJvb2xlYW4gPSBmYWxzZVxuICBwcml2YXRlIGhhc2hDaGFuZ2VIYW5kbGVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbFxuXG4gIC8qKlxuICAgKiBDaGVja3MgVVJMIGZvciBoYXNoIGFuZCBxdWVyeSBzdHJpbmcgcGFyYW1ldGVycyBtYXRjaGluZyBjb25maWd1cmVkIHNob3J0SWRzLlxuICAgKiBIYXNoIHBhcmFtZXRlcnMgdGFrZSBwcmlvcml0eSBvdmVyIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzLlxuICAgKi9cbiAgY2hlY2tVcmxQYXJhbWV0ZXJzKFxuICAgIHByb3BzOiBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4sXG4gICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUsXG4gICAgY2FsbGJhY2tzOiBVcmxDb25zdW1wdGlvbkNhbGxiYWNrc1xuICApOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbmZpZywgaWQgfSA9IHByb3BzXG4gICAgY29uc3QgeyBvbkluaXRpYWxWYWx1ZUZvdW5kLCBvbk1vZGVSZXNldE5lZWRlZCB9ID0gY2FsbGJhY2tzXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAndXJsY29uc3VtcHRpb24tY2hlY2t1cmxwYXJhbWV0ZXJzLWVudHJ5JyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIGhhc1F1ZXJ5SXRlbXM6ICEhY29uZmlnLnF1ZXJ5SXRlbXM/Lmxlbmd0aCxcbiAgICAgIGlzUHJvY2Vzc2luZzogdGhpcy5pc1Byb2Nlc3NpbmcsXG4gICAgICBsYXN0UHJvY2Vzc2VkSGFzaDogdGhpcy5sYXN0UHJvY2Vzc2VkSGFzaCxcbiAgICAgIGN1cnJlbnRIYXNoOiB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSksXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgaWYgKCFjb25maWcucXVlcnlJdGVtcz8ubGVuZ3RoKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgZXZlbnQ6ICd1cmxjb25zdW1wdGlvbi1leGl0LW5vLXF1ZXJ5LWl0ZW1zJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IGNvbmN1cnJlbnQgcHJvY2Vzc2luZ1xuICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAndXJsY29uc3VtcHRpb24tZXhpdC1hbHJlYWR5LXByb2Nlc3NpbmcnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHNob3J0SWRzID0gY29uZmlnLnF1ZXJ5SXRlbXNcbiAgICAgIC5tYXAoaXRlbSA9PiBpdGVtLnNob3J0SWQpXG4gICAgICAuZmlsdGVyKHNpZCA9PiBzaWQgIT0gbnVsbCAmJiBzaWQudHJpbSgpICE9PSAnJylcblxuICAgIGlmIChzaG9ydElkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3VybGNvbnN1bXB0aW9uLWV4aXQtbm8tc2hvcnRpZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCBxdWVyeSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpXG4gICAgXG4gICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSB0cnVlXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAndXJsY29uc3VtcHRpb24tcGFyc2luZy1wYXJhbXMnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgaGFzaCxcbiAgICAgIHF1ZXJ5LFxuICAgICAgc2hvcnRJZHMsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgY29uc3QgaGFzaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnkpXG5cbiAgICBsZXQgZm91bmRTaG9ydElkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICAgIGxldCBmb3VuZFZhbHVlOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICAgIGxldCBmb3VuZEluOiAnaGFzaCcgfCAncXVlcnknIHwgbnVsbCA9IG51bGxcblxuICAgIC8vIFBSSU9SSVRZIDE6IEhhc2ggZnJhZ21lbnRzIChhbHdheXMgd2luKVxuICAgIGZvciAoY29uc3Qgc2lkIG9mIHNob3J0SWRzKSB7XG4gICAgICBpZiAoaGFzaFBhcmFtcy5oYXMoc2lkKSkge1xuICAgICAgICBmb3VuZFNob3J0SWQgPSBzaWRcbiAgICAgICAgZm91bmRWYWx1ZSA9IGhhc2hQYXJhbXMuZ2V0KHNpZClcbiAgICAgICAgZm91bmRJbiA9ICdoYXNoJ1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFBSSU9SSVRZIDI6IFF1ZXJ5IHN0cmluZyAoaWYgbm8gaGFzaCBtYXRjaClcbiAgICBpZiAoIWZvdW5kU2hvcnRJZCkge1xuICAgICAgZm9yIChjb25zdCBzaWQgb2Ygc2hvcnRJZHMpIHtcbiAgICAgICAgaWYgKHF1ZXJ5UGFyYW1zLmhhcyhzaWQpKSB7XG4gICAgICAgICAgZm91bmRTaG9ydElkID0gc2lkXG4gICAgICAgICAgZm91bmRWYWx1ZSA9IHF1ZXJ5UGFyYW1zLmdldChzaWQpXG4gICAgICAgICAgZm91bmRJbiA9ICdxdWVyeSdcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3VybGNvbnN1bXB0aW9uLXNlYXJjaC1jb21wbGV0ZScsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBmb3VuZFNob3J0SWQsXG4gICAgICBmb3VuZFZhbHVlLFxuICAgICAgZm91bmRJbixcbiAgICAgIGhhc01hdGNoOiAhIShmb3VuZFNob3J0SWQgJiYgZm91bmRWYWx1ZSAhPT0gbnVsbCksXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgaWYgKGZvdW5kU2hvcnRJZCAmJiBmb3VuZFZhbHVlICE9PSBudWxsKSB7XG4gICAgICAvLyBUcmFjayBvbmx5IHRoZSBzcGVjaWZpYyBzaG9ydElkIHBhcmFtZXRlciAoZS5nLiwgXCJwaW49MjIyMzA1OTAxM1wiKVxuICAgICAgLy8gTk9UIHRoZSBlbnRpcmUgaGFzaCBzdHJpbmcgd2l0aCBkYXRhX3MgYW5kIG90aGVyIHBhcmFtZXRlcnNcbiAgICAgIGNvbnN0IGN1cnJlbnRTaG9ydElkUGFyYW0gPSBgJHtmb3VuZFNob3J0SWR9PSR7Zm91bmRWYWx1ZX1gXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3VybGNvbnN1bXB0aW9uLWNoZWNraW5nLWxhc3Rwcm9jZXNzZWRoYXNoJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBjdXJyZW50U2hvcnRJZFBhcmFtLFxuICAgICAgICBsYXN0UHJvY2Vzc2VkSGFzaDogdGhpcy5sYXN0UHJvY2Vzc2VkSGFzaCxcbiAgICAgICAgd2lsbFNraXA6IHRoaXMubGFzdFByb2Nlc3NlZEhhc2ggPT09IGN1cnJlbnRTaG9ydElkUGFyYW0sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gU2tpcCBpZiB3ZSd2ZSBhbHJlYWR5IHByb2Nlc3NlZCB0aGlzIGV4YWN0IHNob3J0SWQgcGFyYW1ldGVyXG4gICAgICBpZiAodGhpcy5sYXN0UHJvY2Vzc2VkSGFzaCA9PT0gY3VycmVudFNob3J0SWRQYXJhbSkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICBldmVudDogJ3VybGNvbnN1bXB0aW9uLWV4aXQtaGFzaC1hbHJlYWR5LXByb2Nlc3NlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIGN1cnJlbnRTaG9ydElkUGFyYW0sXG4gICAgICAgICAgbGFzdFByb2Nlc3NlZEhhc2g6IHRoaXMubGFzdFByb2Nlc3NlZEhhc2gsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2VcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBsYXN0UHJvY2Vzc2VkSGFzaCB0byB0cmFjayB0aGlzIHNwZWNpZmljIHNob3J0SWQgcGFyYW1ldGVyXG4gICAgICB0aGlzLmxhc3RQcm9jZXNzZWRIYXNoID0gY3VycmVudFNob3J0SWRQYXJhbVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ3VybC1wYXJhbS1kZXRlY3RlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgc2hvcnRJZDogZm91bmRTaG9ydElkLFxuICAgICAgICB2YWx1ZTogZm91bmRWYWx1ZSxcbiAgICAgICAgZm91bmRJbixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBSZXNldCB0byBOZXcgbW9kZSB3aGVuIGhhc2ggcGFyYW1ldGVyIGlzIGRldGVjdGVkIHRvIGF2b2lkIGJ1Z3Mgd2l0aCBhY2N1bXVsYXRpb24gbW9kZXNcbiAgICAgIGlmIChyZXN1bHRzTW9kZSAhPT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gJiYgb25Nb2RlUmVzZXROZWVkZWQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgIGV2ZW50OiAnbW9kZS1yZXNldC1uZWVkZWQtb24taGFzaC1kZXRlY3Rpb24nLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBjdXJyZW50TW9kZTogcmVzdWx0c01vZGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIG9uTW9kZVJlc2V0TmVlZGVkKClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAndXJsY29uc3VtcHRpb24tY2FsbGluZy1vbmluaXRpYWx2YWx1ZWZvdW5kJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBzaG9ydElkOiBmb3VuZFNob3J0SWQsXG4gICAgICAgIHZhbHVlOiBmb3VuZFZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIG9uSW5pdGlhbFZhbHVlRm91bmQoeyBzaG9ydElkOiBmb3VuZFNob3J0SWQsIHZhbHVlOiBmb3VuZFZhbHVlIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3VybGNvbnN1bXB0aW9uLW9uaW5pdGlhbHZhbHVlZm91bmQtcmV0dXJuZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAndXJsY29uc3VtcHRpb24tbm8tbWF0Y2gtY2FsbGluZy1vbmluaXRpYWx2YWx1ZWZvdW5kLXVuZGVmaW5lZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgLy8gTm8gbWF0Y2hpbmcgcGFyYW1ldGVycyBmb3VuZCAtIGNsZWFyIHN0YXRlXG4gICAgICBvbkluaXRpYWxWYWx1ZUZvdW5kKHVuZGVmaW5lZClcbiAgICB9XG4gICAgXG4gICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSBmYWxzZVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICd1cmxjb25zdW1wdGlvbi1jaGVja3VybHBhcmFtZXRlcnMtZXhpdCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBoYXNoIHBhcmFtZXRlciBmcm9tIHRoZSBVUkwuXG4gICAqIFVzZWQgd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzIHRvIGNvbnN1bWUgdGhlIGRlZXAgbGluay5cbiAgICovXG4gIHJlbW92ZUhhc2hQYXJhbWV0ZXIoc2hvcnRJZDogc3RyaW5nLCB3aWRnZXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCFzaG9ydElkKSByZXR1cm5cbiAgICBcbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIFxuICAgIGlmICh1cmxQYXJhbXMuaGFzKHNob3J0SWQpKSB7XG4gICAgICB1cmxQYXJhbXMuZGVsZXRlKHNob3J0SWQpXG4gICAgICBjb25zdCBuZXdIYXNoID0gdXJsUGFyYW1zLnRvU3RyaW5nKClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZUhhc2hQYXJhbWV0ZXInLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgc2hvcnRJZCxcbiAgICAgICAgbmV3SGFzaDogbmV3SGFzaCA/IGAjJHtuZXdIYXNofWAgOiAnKGVtcHR5KScsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHRoZSBVUkwgd2l0aG91dCB0cmlnZ2VyaW5nIGEgcmVsb2FkXG4gICAgICAvLyBBbHdheXMgcHJlc2VydmUgcGF0aG5hbWUgYW5kIHF1ZXJ5IHN0cmluZywgb25seSB1cGRhdGUgaGFzaFxuICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnLCBcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIChuZXdIYXNoID8gYCMke25ld0hhc2h9YCA6ICcnKVxuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBSZXNldCB0cmFja2luZyBzbyBpdCBjYW4gYmUgcHJvY2Vzc2VkIGFnYWluIGlmIG5lZWRlZFxuICAgICAgdGhpcy5sYXN0UHJvY2Vzc2VkSGFzaCA9ICcnXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIG1hbmFnZXIgKG5vIGF1dG9ub21vdXMgVVJMIGNoZWNraW5nKS5cbiAgICogUXVlcnlTaW1wbGUgc2hvdWxkIG9ubHkgcHJvY2VzcyBoYXNoIHBhcmFtZXRlcnMgd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSB0cmlnZ2VycyBpdFxuICAgKiB2aWEgT1BFTl9XSURHRVRfRVZFTlQuIFRoaXMgZW5zdXJlcyBIZWxwZXJTaW1wbGUgcmVtYWlucyB0aGUgb3JjaGVzdHJhdG9yLlxuICAgKi9cbiAgc2V0dXAoXG4gICAgcHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPixcbiAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZSxcbiAgICBjYWxsYmFja3M6IFVybENvbnN1bXB0aW9uQ2FsbGJhY2tzXG4gICk6IHZvaWQge1xuICAgIC8vIERvIE5PVCBhdXRvbWF0aWNhbGx5IGNoZWNrIFVSTCBwYXJhbWV0ZXJzXG4gICAgLy8gRG8gTk9UIHNldCB1cCBoYXNoY2hhbmdlIGxpc3RlbmVyXG4gICAgLy8gUXVlcnlTaW1wbGUgd2lsbCBvbmx5IHByb2Nlc3MgaGFzaCB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5zIHRoZSB3aWRnZXRcbiAgICAvLyBUaGlzIGVuc3VyZXMgSGVscGVyU2ltcGxlIHJlbWFpbnMgdGhlIG9yY2hlc3RyYXRvclxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCBoYXNoIGNoYW5nZSBsaXN0ZW5lci5cbiAgICovXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaGFzaENoYW5nZUhhbmRsZXIpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5oYXNoQ2hhbmdlSGFuZGxlcilcbiAgICAgIHRoaXMuaGFzaENoYW5nZUhhbmRsZXIgPSBudWxsXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyB0eXBlIEFsbFdpZGdldFByb3BzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZyB9IGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgUXVlcnlTaW1wbGUgdG8gbm90aWZ5IEhlbHBlclNpbXBsZSBvZiB3aWRnZXQgb3Blbi9jbG9zZSBzdGF0ZS5cbiAqL1xuY29uc3QgUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXdpZGdldC1zdGF0ZS1jaGFuZ2VkJ1xuXG5pbnRlcmZhY2UgVmlzaWJpbGl0eUNhbGxiYWNrcyB7XG4gIG9uVmlzaWJpbGl0eUNoYW5nZT86IChpc1Zpc2libGU6IGJvb2xlYW4pID0+IHZvaWRcbn1cblxuLyoqXG4gKiBVdGlsaXR5IHRvIG1hbmFnZSB3aWRnZXQgcGFuZWwgdmlzaWJpbGl0eSBkZXRlY3Rpb24gYW5kIEhlbHBlclNpbXBsZSBub3RpZmljYXRpb24uXG4gKiBcbiAqIFVzZXMgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgZm9yIGVmZmljaWVudCBET00tbGV2ZWwgdmlzaWJpbGl0eSB0cmFja2luZy5cbiAqIEZhbGxzIGJhY2sgdG8gcGVyaW9kaWMgY2hlY2tpbmcgaWYgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaXMgbm90IGF2YWlsYWJsZS5cbiAqIFxuICogUGFydCBvZiBDaHVuayAyOiBXaWRnZXQgVmlzaWJpbGl0eSBFbmdpbmUgZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIge1xuICBwcml2YXRlIHZpc2liaWxpdHlPYnNlcnZlcjogSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIHZpc2liaWxpdHlDaGVja0ludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbFxuICBwcml2YXRlIGlzUGFuZWxWaXNpYmxlOiBib29sZWFuID0gZmFsc2VcbiAgcHJpdmF0ZSB3aWRnZXRFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsXG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgd2lkZ2V0IGVsZW1lbnQgaXMgY3VycmVudGx5IHZpc2libGUuXG4gICAqIEZhbGxiYWNrIG1ldGhvZCB3aGVuIEludGVyc2VjdGlvbk9ic2VydmVyIGlzIG5vdCBhdmFpbGFibGUuXG4gICAqL1xuICBwcml2YXRlIGNoZWNrVmlzaWJpbGl0eSgpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMud2lkZ2V0RWxlbWVudCkgcmV0dXJuIGZhbHNlXG4gICAgXG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMud2lkZ2V0RWxlbWVudFxuICAgIGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudClcbiAgICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIFxuICAgIGNvbnN0IGlzVmlzaWJsZSA9IChcbiAgICAgIHN0eWxlLmRpc3BsYXkgIT09ICdub25lJyAmJlxuICAgICAgc3R5bGUudmlzaWJpbGl0eSAhPT0gJ2hpZGRlbicgJiZcbiAgICAgIHN0eWxlLm9wYWNpdHkgIT09ICcwJyAmJlxuICAgICAgcmVjdC53aWR0aCA+IDAgJiZcbiAgICAgIHJlY3QuaGVpZ2h0ID4gMCAmJlxuICAgICAgcmVjdC50b3AgPCB3aW5kb3cuaW5uZXJIZWlnaHQgJiZcbiAgICAgIHJlY3QuYm90dG9tID4gMCAmJlxuICAgICAgcmVjdC5sZWZ0IDwgd2luZG93LmlubmVyV2lkdGggJiZcbiAgICAgIHJlY3QucmlnaHQgPiAwXG4gICAgKVxuICAgIFxuICAgIHJldHVybiBpc1Zpc2libGVcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZmllcyBIZWxwZXJTaW1wbGUgb2YgcGFuZWwgdmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VzLlxuICAgKi9cbiAgcHJpdmF0ZSBub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUoaXNWaXNpYmxlOiBib29sZWFuLCB3aWRnZXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGlzT3BlbjogaXNWaXNpYmxlXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6IGlzVmlzaWJsZSA/ICdwYW5lbC1vcGVuZWQnIDogJ3BhbmVsLWNsb3NlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGlzVmlzaWJsZSxcbiAgICAgIG1ldGhvZDogJ25vdGlmeUhlbHBlclNpbXBsZU9mUGFuZWxTdGF0ZScsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogTG9ncyB2aXNpYmlsaXR5IHN0YXRlIGNoYW5nZXMgYW5kIGNhbGxzIGNhbGxiYWNrcy5cbiAgICovXG4gIHByaXZhdGUgbG9nVmlzaWJpbGl0eUNoYW5nZShcbiAgICBpc1Zpc2libGU6IGJvb2xlYW4sXG4gICAgbWV0aG9kOiBzdHJpbmcsXG4gICAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgICBjYWxsYmFja3M6IFZpc2liaWxpdHlDYWxsYmFja3NcbiAgKTogdm9pZCB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICBldmVudDogaXNWaXNpYmxlID8gJ3BhbmVsLW9wZW5lZCcgOiAncGFuZWwtY2xvc2VkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgaXNWaXNpYmxlLFxuICAgICAgbWV0aG9kLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICAgIFxuICAgIC8vIE5vdGlmeSBIZWxwZXJTaW1wbGVcbiAgICB0aGlzLm5vdGlmeUhlbHBlclNpbXBsZU9mUGFuZWxTdGF0ZShpc1Zpc2libGUsIHdpZGdldElkKVxuICAgIFxuICAgIC8vIENhbGwgb3B0aW9uYWwgY2FsbGJhY2tcbiAgICBpZiAoY2FsbGJhY2tzLm9uVmlzaWJpbGl0eUNoYW5nZSkge1xuICAgICAgY2FsbGJhY2tzLm9uVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGUpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdmlzaWJpbGl0eSBkZXRlY3Rpb24uXG4gICAqL1xuICBzZXR1cChcbiAgICB3aWRnZXRFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBwcm9wczogQWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+LFxuICAgIGNhbGxiYWNrczogVmlzaWJpbGl0eUNhbGxiYWNrcyxcbiAgICBvblZpc2liaWxpdHlTdGF0ZUNoYW5nZTogKGlzVmlzaWJsZTogYm9vbGVhbikgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb25zdCB7IGlkIH0gPSBwcm9wc1xuICAgIHRoaXMud2lkZ2V0RWxlbWVudCA9IHdpZGdldEVsZW1lbnRcblxuICAgIC8vIFdhaXQgZm9yIG5leHQgdGljayB0byBlbnN1cmUgZWxlbWVudCBpcyByZWFkeVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLndpZGdldEVsZW1lbnQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2aXNpYmlsaXR5LWRldGVjdGlvbi1zZXR1cC1mYWlsZWQnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICByZWFzb246ICd3aWRnZXQtZWxlbWVudC1ub3QtYXZhaWxhYmxlJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMud2lkZ2V0RWxlbWVudFxuXG4gICAgICAvLyBNZXRob2QgMTogSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgKG1vc3QgZWZmaWNpZW50KVxuICAgICAgaWYgKCdJbnRlcnNlY3Rpb25PYnNlcnZlcicgaW4gd2luZG93KSB7XG4gICAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IGVudHJpZXNbMF1cbiAgICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IGVudHJ5LmlzSW50ZXJzZWN0aW5nICYmIGVudHJ5LmludGVyc2VjdGlvblJhdGlvID4gMFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiBzdGF0ZSBjaGFuZ2VkXG4gICAgICAgICAgICBpZiAodGhpcy5pc1BhbmVsVmlzaWJsZSAhPT0gaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICAgIHRoaXMuaXNQYW5lbFZpc2libGUgPSBpc1Zpc2libGVcbiAgICAgICAgICAgICAgdGhpcy5sb2dWaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSwgJ0ludGVyc2VjdGlvbk9ic2VydmVyJywgaWQsIGNhbGxiYWNrcylcbiAgICAgICAgICAgICAgb25WaXNpYmlsaXR5U3RhdGVDaGFuZ2UoaXNWaXNpYmxlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGhyZXNob2xkOiBbMCwgMC4xLCAxLjBdLCAvLyBUcmlnZ2VyIGF0IDAlLCAxMCUsIGFuZCAxMDAlIHZpc2liaWxpdHlcbiAgICAgICAgICAgIHJvb3RNYXJnaW46ICcwcHgnXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBtZXRob2Q6ICdJbnRlcnNlY3Rpb25PYnNlcnZlcidcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE1ldGhvZCAyOiBGYWxsYmFjayB0byBwZXJpb2RpYyBjaGVja2luZ1xuICAgICAgICB0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSB0aGlzLmNoZWNrVmlzaWJpbGl0eSgpXG4gICAgICAgICAgaWYgKHRoaXMuaXNQYW5lbFZpc2libGUgIT09IGlzVmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5pc1BhbmVsVmlzaWJsZSA9IGlzVmlzaWJsZVxuICAgICAgICAgICAgdGhpcy5sb2dWaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSwgJ3BlcmlvZGljLWNoZWNrJywgaWQsIGNhbGxiYWNrcylcbiAgICAgICAgICAgIG9uVmlzaWJpbGl0eVN0YXRlQ2hhbmdlKGlzVmlzaWJsZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDI1MCkgLy8gQ2hlY2sgZXZlcnkgMjUwbXNcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBtZXRob2Q6ICdwZXJpb2RpYy1jaGVjaydcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LCAxMDApXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIHZpc2liaWxpdHkgZGV0ZWN0aW9uIG9ic2VydmVycy9pbnRlcnZhbHMuXG4gICAqL1xuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIC8vIENsZWFuIHVwIEludGVyc2VjdGlvbk9ic2VydmVyXG4gICAgaWYgKHRoaXMudmlzaWJpbGl0eU9ic2VydmVyKSB7XG4gICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlci5kaXNjb25uZWN0KClcbiAgICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmVyID0gbnVsbFxuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhbiB1cCBpbnRlcnZhbFxuICAgIGlmICh0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsICE9PSBudWxsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwpXG4gICAgICB0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsID0gbnVsbFxuICAgIH1cbiAgICBcbiAgICB0aGlzLndpZGdldEVsZW1lbnQgPSBudWxsXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjdXJyZW50IHZpc2liaWxpdHkgc3RhdGUuXG4gICAqL1xuICBnZXRJc1BhbmVsVmlzaWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc1BhbmVsVmlzaWJsZVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSBvbiBtb3VudC5cbiAgICovXG4gIG5vdGlmeU1vdW50KHdpZGdldElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBvcGVuRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGlzT3BlbjogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChvcGVuRXZlbnQpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICBldmVudDogJ3dpZGdldC1tb3VudGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSBvbiB1bm1vdW50LlxuICAgKi9cbiAgbm90aWZ5VW5tb3VudCh3aWRnZXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgY2xvc2VFdmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgaXNPcGVuOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChjbG9zZUV2ZW50KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6ICd3aWRnZXQtdW5tb3VudGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICB9XG59XG4iLCIvKipcbiAqIEhvb2sgZm9yIHpvb21pbmcgdG8gZmVhdHVyZSByZWNvcmRzIHdpdGggcGFkZGluZy5cbiAqIFxuICogV3JhcHMgdGhlIHNoYXJlZCB6b29tVG9SZWNvcmRzIHV0aWxpdHkgZnVuY3Rpb24gaW4gYSBSZWFjdCBob29rLlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB0eXBlIHsgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB6b29tVG9SZWNvcmRzLCB0eXBlIFpvb21Ub1JlY29yZHNPcHRpb25zIH0gZnJvbSAnLi4vem9vbS11dGlscydcblxuLyoqXG4gKiBDdXN0b20gaG9vayB0aGF0IHJldHVybnMgYSBmdW5jdGlvbiB0byB6b29tIHRvIHJlY29yZHMgd2l0aCBwYWRkaW5nLlxuICogXG4gKiBAcGFyYW0gbWFwVmlldyAtIFRoZSBtYXAgdmlldyB0byB6b29tXG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgcmVjb3JkcyBhbmQgb3B0aW9uYWwgcGFkZGluZywgYW5kIHpvb21zIHRvIHRoZW1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVpvb21Ub1JlY29yZHMoXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLCBvcHRpb25zPzogWm9vbVRvUmVjb3Jkc09wdGlvbnMpID0+IFByb21pc2U8dm9pZD4ge1xuICBcbiAgcmV0dXJuIFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChcbiAgICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgIG9wdGlvbnM/OiBab29tVG9SZWNvcmRzT3B0aW9uc1xuICApOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICBpZiAoIW1hcFZpZXcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBhd2FpdCB6b29tVG9SZWNvcmRzKG1hcFZpZXcsIHJlY29yZHMsIG9wdGlvbnMpXG4gIH0sIFttYXBWaWV3XSlcbn1cblxuLy8gUmUtZXhwb3J0IHR5cGVzIGZvciBjb252ZW5pZW5jZVxuZXhwb3J0IHR5cGUgeyBab29tVG9SZWNvcmRzT3B0aW9ucyB9IGZyb20gJy4uL3pvb20tdXRpbHMnXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgdHlwZSBJbW11dGFibGVBcnJheSwgbW9kdWxlTG9hZGVyLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IENoZWNrYm94IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB0eXBlIHsgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB0eXBlICogYXMgamltdU1hcCBmcm9tICdqaW11LXVpL2FkdmFuY2VkL21hcCdcbmltcG9ydCB7IENyZWF0ZVRvb2xUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgRW50aXR5U3RhdHVzVHlwZSwgU3RhdHVzSW5kaWNhdG9yIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmV4cG9ydCBpbnRlcmZhY2UgSW50ZXJhY3RpdmVEcmF3UHJvcHMge1xuICBqaW11TWFwVmlldzogSmltdU1hcFZpZXdcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB0b29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxuICBvbkRyYXdFbmQ6IChncmFwaGljOiBfX2VzcmkuR3JhcGhpYywgZ2V0TGF5ZXJGdW4/LCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXG59XG5cbmNvbnN0IHNrZXRjaFRvb2xJbmZvTWFwID0ge1xuICBbQ3JlYXRlVG9vbFR5cGUuUG9pbnRdOiB7IGRyYXdUb29sTmFtZTogJ3BvaW50JywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1wb2ludCcsIHRvb2xJbmRleDogMCB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuUG9seWxpbmVdOiB7IGRyYXdUb29sTmFtZTogJ3BvbHlsaW5lJywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1wb2x5bGluZScsIHRvb2xJbmRleDogNCB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuUG9seWdvbl06IHsgZHJhd1Rvb2xOYW1lOiAncG9seWdvbicsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcG9seWdvbicsIHRvb2xJbmRleDogMiB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuUmVjdGFuZ2xlXToge1xuICAgIGRyYXdUb29sTmFtZTogJ3JlY3RhbmdsZScsXG4gICAgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1jaGVja2JveC11bmNoZWNrZWQnLFxuICAgIHRvb2xJbmRleDogMVxuICB9LFxuICBbQ3JlYXRlVG9vbFR5cGUuQ2lyY2xlXTogeyBkcmF3VG9vbE5hbWU6ICdjaXJjbGUnLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXJhZGlvLXVuY2hlY2tlZCcsIHRvb2xJbmRleDogMyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnRlcmFjdGl2ZURyYXcgKHByb3BzOiBJbnRlcmFjdGl2ZURyYXdQcm9wcykge1xuICBjb25zdCB7IHRvb2xUeXBlcyA9IFtdLCBqaW11TWFwVmlldywgb25EcmF3RW5kLCB3aWRnZXRJZCB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW21hcE1vZHVsZSwgc2V0TWFwTW9kdWxlXSA9IFJlYWN0LnVzZVN0YXRlPHR5cGVvZiBqaW11TWFwPihudWxsKVxuICBjb25zdCBnZXRMYXllckZ1blJlZiA9IFJlYWN0LnVzZVJlZjwoKSA9PiBfX2VzcmkuR3JhcGhpY3NMYXllciB8IF9fZXNyaS5NYXBOb3Rlc0xheWVyPihudWxsKVxuICBjb25zdCBncmFwaGljUmVmID0gUmVhY3QudXNlUmVmKG51bGwpXG4gIGNvbnN0IFtjbGVhckFmdGVyQXBwbHksIHNldENsZWFyQWZ0ZXJBcHBseV0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCB2aXNpYmxlRWxlbWVudHMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlVG9vbHM6IE9iamVjdC5lbnRyaWVzKHNrZXRjaFRvb2xJbmZvTWFwKS5yZWR1Y2UoXG4gICAgICAgIChyZXN1bHQsIFtrZXksIHZhbHVlXSkgPT4gKHsgLi4ucmVzdWx0LCBbdmFsdWUuZHJhd1Rvb2xOYW1lXTogdG9vbFR5cGVzLmluY2x1ZGVzKGtleSBhcyBDcmVhdGVUb29sVHlwZSkgfSksXG4gICAgICAgIHsgcG9pbnQ6IGZhbHNlIH1cbiAgICAgICkgYXMgYW55LFxuICAgICAgc2VsZWN0aW9uVG9vbHM6IHtcbiAgICAgICAgJ2xhc3NvLXNlbGVjdGlvbic6IGZhbHNlLFxuICAgICAgICAncmVjdGFuZ2xlLXNlbGVjdGlvbic6IGZhbHNlXG4gICAgICB9LFxuICAgICAgc2V0dGluZ3NNZW51OiBmYWxzZSxcbiAgICAgIHVuZG9SZWRvTWVudTogZmFsc2UsXG4gICAgICBkZWxldGVCdXR0b246IHRydWVcbiAgICB9XG4gIH0sIFt0b29sVHlwZXNdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIG1vZHVsZUxvYWRlci5sb2FkTW9kdWxlPHR5cGVvZiBqaW11TWFwPignamltdS11aS9hZHZhbmNlZC9tYXAnKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIHNldE1hcE1vZHVsZShyZXN1bHQpXG4gICAgfSlcbiAgfSlcblxuICBjb25zdCBoYW5kbGVEcmF3VG9vbENyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdURyYXdUb29sc1JlZjogamltdU1hcC5KaW11RHJhd0NyZWF0ZWREZXNjcmlwdG9yKSA9PiB7XG4gICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCA9IGppbXVEcmF3VG9vbHNSZWYuZ2V0R3JhcGhpY3NMYXllclxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVEcmF3U3RhcnQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiAoKGdldExheWVyRnVuUmVmLmN1cnJlbnQpKCkgYXMgX19lc3JpLkdyYXBoaWNzTGF5ZXIpLnJlbW92ZUFsbCgpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZURyYXdFbmQgPSBSZWFjdC51c2VDYWxsYmFjayhcbiAgICAoZ3JhcGhpYykgPT4ge1xuICAgICAgZ3JhcGhpY1JlZi5jdXJyZW50ID0gZ3JhcGhpY1xuICAgICAgb25EcmF3RW5kKGdyYXBoaWMsIGdldExheWVyRnVuUmVmLmN1cnJlbnQsIGNsZWFyQWZ0ZXJBcHBseSlcbiAgICB9LFxuICAgIFtvbkRyYXdFbmQsIGNsZWFyQWZ0ZXJBcHBseV1cbiAgKVxuXG4gIGNvbnN0IGhhbmRsZUNsZWFyZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZ3JhcGhpY1JlZi5jdXJyZW50ID0gbnVsbFxuICAgIG9uRHJhd0VuZChudWxsKVxuICB9LCBbb25EcmF3RW5kXSlcblxuICBjb25zdCBoYW5kbGVDbGVhclNldHRpbmdDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGlmIChncmFwaGljUmVmLmN1cnJlbnQpIHtcbiAgICAgIG9uRHJhd0VuZChncmFwaGljUmVmLmN1cnJlbnQsIGdldExheWVyRnVuUmVmLmN1cnJlbnQsIGUudGFyZ2V0LmNoZWNrZWQpXG4gICAgfVxuICAgIHNldENsZWFyQWZ0ZXJBcHBseShlLnRhcmdldC5jaGVja2VkKVxuICB9LCBbb25EcmF3RW5kXSlcblxuICBjb25zdCBKaW11RHJhdyA9IG1hcE1vZHVsZT8uSmltdURyYXdcbiAgaWYgKCFKaW11RHJhdykge1xuICAgIHJldHVybiA8U3RhdHVzSW5kaWNhdG9yIHN0YXR1c1R5cGU9e0VudGl0eVN0YXR1c1R5cGUuTG9hZGluZ30gLz5cbiAgfVxuICBjb25zdCBpc0F2YWlsYWJsZSA9IE9iamVjdC5rZXlzKHZpc2libGVFbGVtZW50cy5jcmVhdGVUb29scykuc29tZSh0b29sTmFtZSA9PiB2aXNpYmxlRWxlbWVudHMuY3JlYXRlVG9vbHNbdG9vbE5hbWVdKVxuICBpZiAoIWlzQXZhaWxhYmxlKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8SmltdURyYXdcbiAgICAgICAgamltdU1hcFZpZXc9e2ppbXVNYXBWaWV3fVxuICAgICAgICBvcGVyYXRvcldpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgZGlzYWJsZVN5bWJvbFNlbGVjdG9yXG4gICAgICAgIGRyYXdpbmdPcHRpb25zPXt7XG4gICAgICAgICAgY3JlYXRpb25Nb2RlOiBtYXBNb2R1bGUuSmltdURyYXdDcmVhdGlvbk1vZGUuU2luZ2xlLFxuICAgICAgICAgIHVwZGF0ZU9uR3JhcGhpY0NsaWNrOiBmYWxzZSxcbiAgICAgICAgICB2aXNpYmxlRWxlbWVudHM6IHZpc2libGVFbGVtZW50c1xuICAgICAgICB9fVxuICAgICAgICB1aU9wdGlvbnM9e3tcbiAgICAgICAgICBpc0hpZGVCb3JkZXI6IHRydWVcbiAgICAgICAgfX1cbiAgICAgICAgb25KaW11RHJhd0NyZWF0ZWQ9e2hhbmRsZURyYXdUb29sQ3JlYXRlZH1cbiAgICAgICAgb25EcmF3aW5nU3RhcnRlZD17aGFuZGxlRHJhd1N0YXJ0fVxuICAgICAgICBvbkRyYXdpbmdGaW5pc2hlZD17aGFuZGxlRHJhd0VuZH1cbiAgICAgICAgb25EcmF3aW5nQ2xlYXJlZD17aGFuZGxlQ2xlYXJlZH1cbiAgICAgIC8+XG4gICAgICA8bGFiZWwgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgPENoZWNrYm94IGNoZWNrZWQ9e2NsZWFyQWZ0ZXJBcHBseX0gb25DaGFuZ2U9e2hhbmRsZUNsZWFyU2V0dGluZ0NoYW5nZX0gY2xhc3NOYW1lPSdtci0yJyAvPlxuICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyRHJhd2luZycpfVxuICAgICAgPC9sYWJlbD5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTG9hZGluZywgTG9hZGluZ1R5cGUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgc3R5bGVkIH0gZnJvbSAnamltdS10aGVtZSdcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuXG5jb25zdCBSb290ID0gc3R5bGVkLmRpdmBcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgcmlnaHQ6IDA7XG4gIGxlZnQ6IDA7XG4gIHotaW5kZXg6IDI7XG5cbiAgLmxvYWRpbmctY29udGVudCB7XG4gICAgLmxvYWRpbmctdGlwIHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gIH1cbmBcbmV4cG9ydCBmdW5jdGlvbiBMb2FkaW5nUmVzdWx0ICgpIHtcbiAgY29uc3QgdHJhbnNsYXRlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIHJldHVybiAoXG4gICAgPFJvb3Q+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbG9hZGluZy1jb250ZW50IHctMTAwIHB4LTQgZC1mbGV4IGZsZXgtY29sdW1uIGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgPGRpdiByb2xlPSdhbGVydCcgYXJpYS1saXZlPSdhc3NlcnRpdmUnIGNsYXNzTmFtZT0ndGV4dC1wYXBlcic+XG4gICAgICAgICAge3RyYW5zbGF0ZSgncmV0cmlldmluZycpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPExvYWRpbmcgY2xhc3NOYW1lPSdsb2FkaW5nLXRpcCBtdC04JyB0eXBlPXtMb2FkaW5nVHlwZS5Eb251dH0vPlxuICAgICAgPC9kaXY+XG4gICAgPC9Sb290PlxuICApXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAgUmVhY3RSZWR1eCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCxcbiAgdHlwZSBJTVN0YXRlLFxuICBjbGFzc05hbWVzXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgVG9vbHRpcCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBUcmFzaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gnXG5pbXBvcnQgRmVhdHVyZUluZm8gZnJvbSAnLi9jb21wb25lbnRzL2ZlYXR1cmUtaW5mbydcbmltcG9ydCB7IExpc3REaXJlY3Rpb24gfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVzdWx0SXRlbVByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBwb3B1cFRlbXBsYXRlOiBhbnlcbiAgZGVmYXVsdFBvcHVwVGVtcGxhdGU6IGFueVxuICBkYXRhOiBGZWF0dXJlRGF0YVJlY29yZFxuICBkYXRhU291cmNlOiBEYXRhU291cmNlXG4gIGV4cGFuZEJ5RGVmYXVsdDogYm9vbGVhblxuICBvbkNsaWNrOiAocmVjb3JkOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxuICBvblJlbW92ZTogKHJlY29yZDogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbn1cblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gIG92ZXJmbG93OiBhdXRvO1xuICBmbGV4LWZsb3c6IHJvdztcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmbGV4LXNocmluazogMDtcbiAgbWluLWhlaWdodDogMnJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBcbiAgLyogQWRkIHJpZ2h0IHBhZGRpbmcgdG8gcHJldmVudCBoZWFkZXIgdGV4dCBmcm9tIHJ1bm5pbmcgaW50byB0cmFzaCBidXR0b24gKi9cbiAgcGFkZGluZy1yaWdodDogNDRweDsgIC8qIDMycHggYnV0dG9uIHdpZHRoICsgMTJweCBidWZmZXIgKi9cbiAgXG4gICYuc2VsZWN0ZWQge1xuICAgIG91dGxpbmU6IDJweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKTtcbiAgfVxuICBcbiAgLnJlbW92ZS1idXR0b24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDRweDtcbiAgICByaWdodDogNHB4O1xuICAgIHotaW5kZXg6IDEwO1xuICAgIG9wYWNpdHk6IDAuNztcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnM7XG4gICAgXG4gICAgJjpob3ZlciB7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgIH1cbiAgICBcbiAgICAvLyBMYXJnZXIgdG91Y2ggdGFyZ2V0IGZvciBtb2JpbGUvYWNjZXNzaWJpbGl0eVxuICAgIG1pbi13aWR0aDogMzJweDtcbiAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICB9XG4gIFxuICAvKiBFbnN1cmUgdGhlIEZlYXR1cmVJbmZvIGNvbXBvbmVudCByZXNwZWN0cyB0aGUgcGFkZGluZyAqL1xuICAuZmVhdHVyZS1pbmZvLWNvbXBvbmVudCB7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cbiAgXG4gIC8qIE1ha2UgdGhlIGhlYWRlciB3cmFwIGlmIGl0J3Mgc3RpbGwgdG9vIGxvbmcgKi9cbiAgLmVzcmktZmVhdHVyZV9fdGl0bGUge1xuICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO1xuICAgIHBhZGRpbmctcmlnaHQ6IDhweDtcbiAgfVxuYFxuXG4vKipcbiAqIFF1ZXJ5UmVzdWx0SXRlbSBjb21wb25lbnQgLSBkaXNwbGF5cyBhIHNpbmdsZSBxdWVyeSByZXN1bHQgcmVjb3JkXG4gKiBGZWF0dXJlczpcbiAqIC0gQ2xpY2tpbmcgdGhlIGl0ZW0gem9vbXMgdG8gdGhlIGZlYXR1cmUgb24gdGhlIG1hcFxuICogLSBSZW1vdmUgYnV0dG9uICh0cmFzaCBpY29uKSBpbiB1cHBlci1yaWdodCBjb3JuZXIgdG8gcmVtb3ZlIHJlY29yZCBmcm9tIHJlc3VsdHNcbiAqIC0gUmVjb3JkcyBhcmUgZXhwYW5kZWQgYnkgZGVmYXVsdCB0byBzaG93IGZ1bGwgZmVhdHVyZSBpbmZvcm1hdGlvblxuICovXG5leHBvcnQgY29uc3QgUXVlcnlSZXN1bHRJdGVtID0gKHByb3BzOiBSZXN1bHRJdGVtUHJvcHMpID0+IHtcbiAgY29uc3QgeyB3aWRnZXRJZCwgZGF0YSwgZGF0YVNvdXJjZSwgcG9wdXBUZW1wbGF0ZSwgZGVmYXVsdFBvcHVwVGVtcGxhdGUsIG9uQ2xpY2ssIG9uUmVtb3ZlLCBleHBhbmRCeURlZmF1bHQgPSBmYWxzZSB9ID0gcHJvcHNcbiAgXG4gIGNvbnN0IHJlY29yZElkID0gZGF0YS5nZXRJZCgpXG4gIFxuICAvLyBMb2cgd2hlbiBRdWVyeVJlc3VsdEl0ZW0gcmVuZGVyc1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgZXZlbnQ6ICdRdWVyeVJlc3VsdEl0ZW0tcmVuZGVyJyxcbiAgICAgIHJlY29yZElkLFxuICAgICAgZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW3JlY29yZElkLCBleHBhbmRCeURlZmF1bHRdKVxuICBcbiAgLy8gQ2hlY2sgaWYgdGhpcyByZWNvcmQgaXMgY3VycmVudGx5IHNlbGVjdGVkXG4gIGNvbnN0IHNlbGVjdGVkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+XG4gICAgc3RhdGUuZGF0YVNvdXJjZXNJbmZvPy5bZGF0YVNvdXJjZS5pZF0/LnNlbGVjdGVkSWRzPy5pbmNsdWRlcyhkYXRhLmdldElkKCkpXG4gIClcbiAgXG4gIC8vIERldGVybWluZSBpZiBsaXN0IGlzIGRpc3BsYXllZCB2ZXJ0aWNhbGx5IChhZmZlY3RzIEZlYXR1cmVJbmZvIGV4cGFuZGFiaWxpdHkpXG4gIGNvbnN0IGlzVmVydGljYWxBbGlnbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRMaXN0RGlyZWN0aW9uICE9PSBMaXN0RGlyZWN0aW9uLkhvcml6b250YWxcbiAgfSlcblxuICAvLyBIYW5kbGUgY2xpY2tpbmcgb24gdGhlIHJlc3VsdCBpdGVtIC0gem9vbXMgdG8gZmVhdHVyZSBvbiBtYXBcbiAgY29uc3QgaGFuZGxlQ2xpY2tSZXN1bHRJdGVtID0gUmVhY3QudXNlQ2FsbGJhY2soKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICAvLyBEb24ndCB0cmlnZ2VyIHpvb20gaWYgY2xpY2tpbmcgdGhlIHJlbW92ZSBidXR0b25cbiAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCcucmVtb3ZlLWJ1dHRvbicpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgb25DbGljayhkYXRhKVxuICB9LCBbb25DbGljaywgZGF0YV0pXG5cbiAgLy8gSGFuZGxlIGNsaWNraW5nIHRoZSByZW1vdmUgYnV0dG9uIC0gcmVtb3ZlcyByZWNvcmQgZnJvbSByZXN1bHRzIGFuZCBzZWxlY3Rpb25cbiAgY29uc3QgaGFuZGxlUmVtb3ZlID0gUmVhY3QudXNlQ2FsbGJhY2soKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpIC8vIFByZXZlbnQgdHJpZ2dlcmluZyB0aGUgaXRlbSBjbGljayBoYW5kbGVyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgb25SZW1vdmUoZGF0YSlcbiAgfSwgW29uUmVtb3ZlLCBkYXRhXSlcblxuICBjb25zdCBvbktleVVwID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRW50ZXInIHx8IGV2dC5rZXkgPT09ICcgJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgaGFuZGxlQ2xpY2tSZXN1bHRJdGVtKGV2dCBhcyBhbnkpXG4gICAgfVxuICB9LCBbaGFuZGxlQ2xpY2tSZXN1bHRJdGVtXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktcmVzdWx0LWl0ZW0nLCB7IHNlbGVjdGVkIH0pfVxuICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2tSZXN1bHRJdGVtfVxuICAgICAgb25LZXlVcD17b25LZXlVcH1cbiAgICAgIGNzcz17c3R5bGV9XG4gICAgICByb2xlPSdvcHRpb24nXG4gICAgICBhcmlhLXNlbGVjdGVkPXtzZWxlY3RlZH1cbiAgICAgIHRhYkluZGV4PXswfVxuICAgID5cbiAgICAgIDxGZWF0dXJlSW5mb1xuICAgICAgICBncmFwaGljPXtkYXRhLmZlYXR1cmUgYXMgX19lc3JpLkdyYXBoaWN9XG4gICAgICAgIHBvcHVwVGVtcGxhdGU9e3BvcHVwVGVtcGxhdGV9XG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlPXtkZWZhdWx0UG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgdG9nZ2xhYmxlPXtpc1ZlcnRpY2FsQWxpZ259XG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQnlEZWZhdWx0fVxuICAgICAgICBkYXRhU291cmNlPXtkYXRhU291cmNlfVxuICAgICAgLz5cbiAgICAgIDxUb29sdGlwIHRpdGxlPVwiUmVtb3ZlIHJlc3VsdFwiIHBsYWNlbWVudD1cImJvdHRvbVwiPlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgY2xhc3NOYW1lPVwicmVtb3ZlLWJ1dHRvblwiXG4gICAgICAgICAgaWNvblxuICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgdmFyaWFudD1cInRleHRcIlxuICAgICAgICAgIGNvbG9yPVwiaW5oZXJpdFwiXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlUmVtb3ZlfVxuICAgICAgICAgIGFyaWEtbGFiZWw9XCJSZW1vdmUgcmVzdWx0XCJcbiAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgIHBhZGRpbmc6IDZweDtcbiAgICAgICAgICAgIG1pbi13aWR0aDogMzJweDtcbiAgICAgICAgICAgIHdpZHRoOiAzMnB4O1xuICAgICAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBgfVxuICAgICAgICA+XG4gICAgICAgICAgPFRyYXNoT3V0bGluZWQgc2l6ZT17MTh9IC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9Ub29sdGlwPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICBJbW11dGFibGUsXG4gIGhvb2tzLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxuICB0eXBlIERhdGFSZWNvcmRTZXQsXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUsXG4gIERhdGFBY3Rpb25NYW5hZ2VyLFxuICBEYXRhTGV2ZWwsXG4gIHVzZUludGxcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uLCBUb29sdGlwLCBEYXRhQWN0aW9uTGlzdCwgRGF0YUFjdGlvbkxpc3RTdHlsZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgRmllbGRzVHlwZSwgUGFnaW5nVHlwZSwgTGlzdERpcmVjdGlvbiwgUmVzdWx0U2VsZWN0TW9kZSwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuaW1wb3J0IHsgdXNlWm9vbVRvUmVjb3JkcyB9IGZyb20gJy4vaG9va3MvdXNlLXpvb20tdG8tcmVjb3Jkcydcbi8vIEZPUkNFRDogQWx3YXlzIFNpbXBsZUxpc3QgLSBMYXp5TGlzdCBhbmQgUGFnaW5nTGlzdCByZW1vdmVkXG5pbXBvcnQgeyBTaW1wbGVMaXN0IH0gZnJvbSAnLi9zaW1wbGUtbGlzdCdcbmltcG9ydCB7IGNvbWJpbmVGaWVsZHMgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9JVEVNIH0gZnJvbSAnLi4vZGVmYXVsdC1xdWVyeS1pdGVtJ1xuaW1wb3J0IHsgQXJyb3dMZWZ0T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQnXG5pbXBvcnQgeyBFeHBhbmRBbGxPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvZXhwYW5kLWFsbCdcbmltcG9ydCB7IENvbGxhcHNlQWxsT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbCdcbmltcG9ydCB7IGdldEV4dHJhQWN0aW9ucyB9IGZyb20gJy4uL2RhdGEtYWN0aW9ucydcbmltcG9ydCB7IFxuICBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcywgXG4gIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcywgXG4gIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoLFxuICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSxcbiAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCBcbn0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkLCByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMgfSBmcm9tICcuL3Jlc3VsdHMtbWFuYWdlbWVudC11dGlscydcbmltcG9ydCB7IHJlbW92ZUhpZ2hsaWdodEdyYXBoaWNzIH0gZnJvbSAnLi9ncmFwaGljcy1sYXllci11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcbmltcG9ydCB7IEVycm9yTWVzc2FnZSB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIHJlcXVlc3RpbmcgcmVzdG9yYXRpb24gd2hlbiBpZGVudGlmeSBwb3B1cCBjbG9zZXMuXG4gKi9cbmNvbnN0IFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQgPSAncXVlcnlzaW1wbGUtcmVzdG9yZS1vbi1pZGVudGlmeS1jbG9zZSdcblxuLyoqXG4gKiBEZXRlY3RzIGlmIGFuIGlkZW50aWZ5IHBvcHVwIGlzIGN1cnJlbnRseSB2aXNpYmxlIGluIHRoZSBET00uXG4gKiBVc2VzIHZlcmlmaWVkIHNlbGVjdG9ycyBiYXNlZCBvbiBFeHBlcmllbmNlIEJ1aWxkZXIncyBpZGVudGlmeSBwb3B1cCBzdHJ1Y3R1cmUuXG4gKiBcbiAqIEByZXR1cm5zIHRydWUgaWYgaWRlbnRpZnkgcG9wdXAgaXMgZGV0ZWN0ZWQgYW5kIHZpc2libGUsIGZhbHNlIG90aGVyd2lzZVxuICovXG5mdW5jdGlvbiBpc0lkZW50aWZ5UG9wdXBPcGVuKCk6IGJvb2xlYW4ge1xuICAvLyBQcmltYXJ5IHNlbGVjdG9yOiAuZXNyaS1wb3B1cCB3aXRoIHJvbGU9XCJkaWFsb2dcIlxuICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lc3JpLXBvcHVwW3JvbGU9XCJkaWFsb2dcIl0nKVxuICBcbiAgaWYgKCFwb3B1cCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBWZXJpZnkgaXQncyB2aXNpYmxlIChub3QgaGlkZGVuKVxuICBjb25zdCBhcmlhSGlkZGVuID0gcG9wdXAuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpXG4gIGlmIChhcmlhSGlkZGVuID09PSAndHJ1ZScpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgLy8gQWRkaXRpb25hbCBjaGVjazogdmVyaWZ5IGNvbXB1dGVkIHN0eWxlIHNob3dzIGl0J3MgdmlzaWJsZVxuICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBvcHVwKVxuICBpZiAoc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnIHx8IHN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nIHx8IHN0eWxlLm9wYWNpdHkgPT09ICcwJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBWZXJpZnkgaXQgY29udGFpbnMgZXNyaS1mZWF0dXJlcyAoaWRlbnRpZnkgcG9wdXAgc3RydWN0dXJlKVxuICBjb25zdCBoYXNGZWF0dXJlcyA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5lc3JpLWZlYXR1cmVzJylcbiAgaWYgKCFoYXNGZWF0dXJlcykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza1Jlc3VsdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICByZXN1bHRDb3VudDogbnVtYmVyXG4gIG1heFBlclBhZ2U6IG51bWJlclxuICBxdWVyeVBhcmFtczogUXVlcnlQYXJhbXNcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2VcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgcmVjb3JkczogRGF0YVJlY29yZFtdXG4gIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbiAgb25OYXZCYWNrOiAoY2xlYXJSZXN1bHRzPzogYm9vbGVhbikgPT4gUHJvbWlzZTx2b2lkPiB8IHZvaWRcbiAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD86IGJvb2xlYW5cbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxuICBldmVudE1hbmFnZXI/OiBpbXBvcnQoJy4vaG9va3MvdXNlLWV2ZW50LWhhbmRsaW5nJykuRXZlbnRNYW5hZ2VyICAvLyBDaHVuayA3LjE6IEV2ZW50IEhhbmRsaW5nIE1hbmFnZXJcbiAgLy8gRklYIChyMDE4Ljk2KTogUmVtb3ZlZCBvbk1hbnVhbFJlbW92YWwgLSBubyBsb25nZXIgbmVlZGVkXG4gIC8vIEZJWCAocjAxOC45Mik6IEZsYWcgdG8gdHJhY2sgd2hlbiBxdWVyeSBzd2l0Y2ggaXMgaW4gcHJvZ3Jlc3NcbiAgaXNRdWVyeVN3aXRjaEluUHJvZ3Jlc3NSZWY/OiBSZWFjdC5NdXRhYmxlUmVmT2JqZWN0PGJvb2xlYW4+XG59XG5cbmNvbnN0IHJlc3VsdFN0eWxlID0gY3NzYFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuXG4gIC5xdWVyeS1yZXN1bHRfX2hlYWRlciB7XG4gICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLXRleHQpO1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICBsaW5lLWhlaWdodDogMS41O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICB9XG5cbiAgLnF1ZXJ5LXJlc3VsdC1jb250YWluZXIge1xuICAgIGZsZXg6IDEgMSAwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBtaW4taGVpZ2h0OiAwO1xuICB9XG5cbiAgLnF1ZXJ5LXJlc3VsdC1pbmZvIHtcbiAgICBoZWlnaHQ6IDE4cHg7XG4gIH1cbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza1Jlc3VsdCAocHJvcHM6IFF1ZXJ5VGFza1Jlc3VsdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtLCBxdWVyeVBhcmFtcywgcmVzdWx0Q291bnQsIG1heFBlclBhZ2UsIHJlY29yZHMsIHdpZGdldElkLCBvdXRwdXREUywgcnVudGltZVpvb21Ub1NlbGVjdGVkLCBvbk5hdkJhY2ssIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyLCBtYXBWaWV3LCBldmVudE1hbmFnZXIsIGlzUXVlcnlTd2l0Y2hJblByb2dyZXNzUmVmIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBpbnRsID0gdXNlSW50bCgpXG4gIGNvbnN0IHpvb21Ub1JlY29yZHMgPSB1c2Vab29tVG9SZWNvcmRzKG1hcFZpZXcpXG4gIGNvbnN0IFtxdWVyeURhdGEsIHNldFF1ZXJ5RGF0YV0gPSBSZWFjdC51c2VTdGF0ZShudWxsKVxuICBjb25zdCBbc2VsZWN0ZWRSZWNvcmRzLCBzZXRTZWxlY3RlZFJlY29yZHNdID0gUmVhY3QudXNlU3RhdGU8RGF0YVJlY29yZFtdPihbXSlcbiAgLy8gRklYIChyMDE4Ljk0KTogUmVtb3ZlZCByZW1vdmVkUmVjb3JkSWRzIHN0YXRlIC0gbm8gbG9uZ2VyIG5lZWRlZCBzaW5jZSByZWNvcmRzIHN0YXkgaW4gc3luY1xuICBcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgW2V4cGFuZEFsbCwgc2V0RXhwYW5kQWxsXSA9IFJlYWN0LnVzZVN0YXRlKGN1cnJlbnRJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCA/PyBmYWxzZSlcbiAgLy8gVHJhY2sgaW5kaXZpZHVhbCBpdGVtIGV4cGFuc2lvbiBzdGF0ZXMgdG8gbWFpbnRhaW4gc3RhdGUgd2hlbiBpdGVtcyBhcmUgcmVtb3ZlZFxuICBjb25zdCBbaXRlbUV4cGFuZFN0YXRlcywgc2V0SXRlbUV4cGFuZFN0YXRlc10gPSBSZWFjdC51c2VTdGF0ZTxNYXA8c3RyaW5nLCBib29sZWFuPj4obmV3IE1hcCgpKVxuICBjb25zdCBiYWNrQnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIFxuICAvLyBUcmFjayBleHBhbmRBbGwgY2hhbmdlcyBmb3IgZGVidWdnaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2V4cGFuZEFsbC1zdGF0ZS1jaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgZXhwYW5kQWxsLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtleHBhbmRBbGwsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IHNlbGVjdGVkIHRoZXNlIHJlY29yZHMgdG8gcHJldmVudCByZS1zZWxlY3Rpb24gd2hlbiBzd2l0Y2hpbmcgdGFic1xuICBjb25zdCBoYXNTZWxlY3RlZFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgdGhlIGxhc3QgcmVjb3JkcyB3ZSBzZWxlY3RlZCB0byBkZXRlY3Qgd2hlbiBuZXcgcmVjb3JkcyBjb21lIGluXG4gIGNvbnN0IGxhc3RTZWxlY3RlZFJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nW10+KFtdKVxuICAvLyBUcmFjayB0aGUgb3JpZ2luYWwgcXVlcnkgcmVjb3JkIElEcyAobm90IHNlbGVjdGVkIElEcykgdG8gZGV0ZWN0IHdoZW4gcXVlcnkgcmVzdWx0cyBjaGFuZ2VcbiAgY29uc3QgbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZ1tdPihbXSlcbiAgLy8gVHJhY2sgdGhlIGxhc3Qgc2VsZWN0ZWQgRmVhdHVyZURhdGFSZWNvcmRzIGZvciByZXN0b3JhdGlvbiAoaWYgbmVlZGVkKVxuICBjb25zdCBsYXN0U2VsZWN0ZWRGZWF0dXJlUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxGZWF0dXJlRGF0YVJlY29yZFtdPihbXSlcbiAgLy8gRklYIChyMDE4Ljk0KTogUmVtb3ZlZCByZW1vdmVkUmVjb3JkSWRzIHJlZiAtIG5vIGxvbmdlciBuZWVkZWRcbiAgXG4gIC8vIEVycm9yIHN0YXRlIGZvciB1c2VyLWZhY2luZyBlcnJvcnNcbiAgY29uc3QgW3NlbGVjdGlvbkVycm9yLCBzZXRTZWxlY3Rpb25FcnJvcl0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmc+KG51bGwpXG5cbiAgY29uc3QgZXh0cmFBY3Rpb25zID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGdldEV4dHJhQWN0aW9ucyh3aWRnZXRJZCwgb3V0cHV0RFMsIG1hcFZpZXcsIGludGwsIHF1ZXJ5SXRlbSwgcnVudGltZVpvb21Ub1NlbGVjdGVkKVxuICB9LCBbd2lkZ2V0SWQsIG91dHB1dERTLCBtYXBWaWV3LCBpbnRsLCBxdWVyeUl0ZW0sIHJ1bnRpbWVab29tVG9TZWxlY3RlZF0pXG5cbiAgY29uc3QgZW5hYmxlRGF0YUFjdGlvbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmVuYWJsZURhdGFBY3Rpb24gPz8gdHJ1ZVxuICB9KVxuXG4gIGNvbnN0IHBhZ2luZ1R5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRQYWdpbmdTdHlsZVxuICB9KVxuICBjb25zdCBkaXJlY3Rpb25UeXBlSW5Db25maWcgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0TGlzdERpcmVjdGlvblxuICB9KVxuICAvLyBGT1JDRSBTaW1wbGVMaXN0IC0gaWdub3JlIGNvbmZpZywgd2UncmUgZG9uZSB3aXRoIGxhenkgbG9hZGluZyBpc3N1ZXNcbiAgY29uc3QgcGFnaW5nVHlwZSA9IFBhZ2luZ1R5cGUuU2ltcGxlXG4gIGNvbnN0IGRpcmVjdGlvbiA9IGRpcmVjdGlvblR5cGVJbkNvbmZpZyA/PyBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsXG5cbiAgLy8gR3JvdXAgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2UgZm9yIERhdGFBY3Rpb25MaXN0XG4gIC8vIFRoaXMgZW5zdXJlcyBEYXRhQWN0aW9uTGlzdCByZWNvZ25pemVzIHJlY29yZHMgZXZlbiB3aGVuIHRoZXkgY29tZSBmcm9tIGRpZmZlcmVudCBxdWVyaWVzL29yaWdpbnNcbiAgY29uc3QgYWN0aW9uRGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIC8vIERlYnVnOiBMb2cgd2hhdCByZWNvcmRzIGFyZSBhdmFpbGFibGVcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtY2FsY3VsYXRpb24tc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgc2VsZWN0ZWRSZWNvcmRzQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBxdWVyeURhdGFSZWNvcmRzQ291bnQ6IHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTPy5pZCxcbiAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkczogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggPiAwLFxuICAgICAgaGFzUXVlcnlEYXRhUmVjb3JkczogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggPiAwLFxuICAgICAgaGFzUmVjb3Jkc1Byb3A6IHJlY29yZHM/Lmxlbmd0aCA+IDBcbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICAvLyBJbiBhY2N1bXVsYXRpb24gbW9kZXMgKEFkZC9SZW1vdmUpLCBwcmVmZXIgdGhlICdyZWNvcmRzJyBwcm9wICh0aGUgYWNjdW11bGF0ZWQgc2V0KVxuICAgIC8vIGJlY2F1c2Ugb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgd2lsbCBvbmx5IHJldHVybiByZWNvcmRzIHRoYXQgbWF0Y2ggdGhlIGN1cnJlbnQgcXVlcnkncyB3aGVyZSBjbGF1c2UuXG4gICAgY29uc3QgcmVjb3Jkc1RvVXNlID0gaXNBY2N1bXVsYXRpb25Nb2RlXG4gICAgICA/IChyZWNvcmRzIHx8IFtdKVxuICAgICAgOiAoc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggPiAwID8gc2VsZWN0ZWRSZWNvcmRzIDogKHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoID4gMCA/IHF1ZXJ5RGF0YS5yZWNvcmRzIDogKHJlY29yZHMgfHwgW10pKSlcbiAgICBcbiAgICAvLyBJZiBubyByZWNvcmRzLCByZXR1cm4gc2luZ2xlIERhdGFSZWNvcmRTZXQgd2l0aCBlbXB0eSByZWNvcmRzIHVzaW5nIG91dHB1dERTXG4gICAgaWYgKCFyZWNvcmRzVG9Vc2UgfHwgcmVjb3Jkc1RvVXNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZW1wdHlEYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICAgICAgdHlwZTogJ2xvYWRlZCcsXG4gICAgICAgIHJlY29yZHM6IFtdLFxuICAgICAgICBuYW1lOiBvdXRwdXREUz8uaWQsXG4gICAgICAgIGxhYmVsOiBvdXRwdXREUz8uZ2V0TGFiZWwoKVxuICAgICAgfVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtZW1wdHktcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgZGF0YVNldERhdGFTb3VyY2VJZDogZW1wdHlEYXRhU2V0LmRhdGFTb3VyY2U/LmlkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIFtlbXB0eURhdGFTZXRdXG4gICAgfVxuICAgIFxuICAgIC8vIEdyb3VwIHJlY29yZHMgYnkgdGhlaXIgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+KClcbiAgICBcbiAgICByZWNvcmRzVG9Vc2UuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgICAgY29uc3QgcmVjb3JkRFMgPSAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICBsZXQgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsID0gbnVsbFxuICAgICAgXG4gICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgb3JpZ2luRFMgPSByZWNvcmREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCByZWNvcmREU1xuICAgICAgfSBlbHNlIGlmIChvdXRwdXREUykge1xuICAgICAgICAvLyBGYWxsYmFjazogdXNlIG91dHB1dERTJ3Mgb3JpZ2luIGlmIHJlY29yZCBkb2Vzbid0IGhhdmUgZGF0YVNvdXJjZVxuICAgICAgICBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICAgIH1cbiAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKS5wdXNoKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIENyZWF0ZSBhIERhdGFSZWNvcmRTZXQgZm9yIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSA9IEFycmF5LmZyb20ocmVjb3Jkc0J5T3JpZ2luRFMuZW50cmllcygpKS5tYXAoKFtvcmlnaW5EUywgb3JpZ2luUmVjb3Jkc10pID0+IHtcbiAgICAgIGNvbnN0IGRhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICAgIGRhdGFTb3VyY2U6IG9yaWdpbkRTLCAvLyBVc2Ugb3JpZ2luIERTLCBub3Qgb3V0cHV0RFNcbiAgICAgICAgdHlwZTogJ3NlbGVjdGVkJyxcbiAgICAgICAgcmVjb3Jkczogb3JpZ2luUmVjb3JkcyxcbiAgICAgICAgbmFtZTogb3JpZ2luRFMuaWQsXG4gICAgICAgIGxhYmVsOiBvcmlnaW5EUy5nZXRMYWJlbCgpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZCBmaWVsZHMgaWYgbmVlZGVkICh1c2UgY3VycmVudEl0ZW0ncyBmaWVsZCBzZXR0aW5ncylcbiAgICAgIGlmIChjdXJyZW50SXRlbS5yZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMgJiYgY3VycmVudEl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcyAhPSBudWxsKSB7XG4gICAgICAgIGRhdGFTZXQuZmllbGRzID0gY29tYmluZUZpZWxkcyhjdXJyZW50SXRlbS5yZXN1bHREaXNwbGF5RmllbGRzLCBjdXJyZW50SXRlbS5yZXN1bHRUaXRsZUV4cHJlc3Npb24pXG4gICAgICB9IGVsc2UgaWYgKG9yaWdpbkRTICYmICdnZXRQb3B1cEluZm8nIGluIG9yaWdpbkRTKSB7XG4gICAgICAgIC8vIHVzZSBmaWVsZHMgaW4gcG9wdXAgdGVtcGxhdGUgZnJvbSBvcmlnaW4gRFNcbiAgICAgICAgY29uc3QgcG9wdXBJbmZvID0gb3JpZ2luRFMuZ2V0UG9wdXBJbmZvKClcbiAgICAgICAgaWYgKHBvcHVwSW5mbz8uZmllbGRJbmZvcykge1xuICAgICAgICAgIGRhdGFTZXQuZmllbGRzID0gcG9wdXBJbmZvLmZpZWxkSW5mb3MuZmlsdGVyKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby52aXNpYmxlKS5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YVNldFxuICAgIH0pXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGF0IHRoZSBmaW5hbCBkYXRhU2V0cyBjb250YWluXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2FjdGlvbkRhdGFTZXRzLWZpbmFsJyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzLmxlbmd0aCxcbiAgICAgIHRvdGFsUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9Vc2UubGVuZ3RoLFxuICAgICAgZGF0YVNldHNCeU9yaWdpbjogZGF0YVNldHMubWFwKGRzID0+ICh7XG4gICAgICAgIG9yaWdpbkRTSWQ6IGRzLmRhdGFTb3VyY2U/LmlkLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICB0eXBlOiBkcy50eXBlXG4gICAgICB9KSlcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIHdlIGNvdWxkbid0IGdyb3VwIGJ5IG9yaWdpbiAoc2hvdWxkbid0IGhhcHBlbiksIGZhbGxiYWNrIHRvIHNpbmdsZSBEYXRhUmVjb3JkU2V0IHdpdGggb3V0cHV0RFNcbiAgICBpZiAoZGF0YVNldHMubGVuZ3RoID09PSAwICYmIG91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1mYWxsYmFjay10by1vdXRwdXREUycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnY291bGQtbm90LWRldGVybWluZS1vcmlnaW4tZHMnXG4gICAgICB9KVxuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgICB0eXBlOiByZWNvcmRzVG9Vc2UubGVuZ3RoID4gMCA/ICdzZWxlY3RlZCcgOiAnbG9hZGVkJyxcbiAgICAgICAgcmVjb3JkczogcmVjb3Jkc1RvVXNlLFxuICAgICAgICBuYW1lOiBvdXRwdXREUy5pZCxcbiAgICAgICAgbGFiZWw6IG91dHB1dERTLmdldExhYmVsKClcbiAgICAgIH1dXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhU2V0c1xuICB9LCBbc2VsZWN0ZWRSZWNvcmRzLCBvdXRwdXREUywgcXVlcnlEYXRhLCBjdXJyZW50SXRlbSwgcmVjb3Jkcywgd2lkZ2V0SWRdKVxuXG4gIC8vIEZJWCAocjAxOC45NCk6IFNpbXBsaWZpZWQgLSBubyBmaWx0ZXJpbmcgbmVlZGVkIHNpbmNlIHJlY29yZHMgYXJlIGtlcHQgaW4gc3luY1xuICAvLyBNZW1vaXplIHJlY29yZHMgdG8gcHJldmVudCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzIHRoYXQgcmVzZXQgc2Nyb2xsIHBvc2l0aW9uXG4gIC8vIFRoaXMgZW5zdXJlcyB0aGUgcmVjb3JkcyBwcm9wIG9ubHkgY2hhbmdlcyB3aGVuIHRoZSBhY3R1YWwgZGF0YSBjaGFuZ2VzLCBub3QganVzdCB0aGUgYXJyYXkgcmVmZXJlbmNlXG4gIGNvbnN0IGZpbHRlcmVkUmVjb3Jkc0Zvckxpc3QgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gcXVlcnlEYXRhPy5yZWNvcmRzIHx8IHJlY29yZHMgfHwgW11cbiAgfSwgW3F1ZXJ5RGF0YT8ucmVjb3JkcywgcmVjb3Jkc10pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgLy8gZm9jdXMgdGhlIGJhY2sgYnV0dG9uIHdoZW4gaXQgaXMgcmVuZGVyZWRcbiAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gIH0pXG5cbiAgLyoqXG4gICAqIEVmZmVjdCBob29rIHRoYXQgcnVucyB3aGVuIG5ldyBxdWVyeSByZXN1bHRzIGFycml2ZS5cbiAgICogUmVzZXRzIHJlbW92ZWQgcmVjb3JkcywgZXhwYW5kIHN0YXRlLCBhbmQgcXVlcnkgZGF0YSBmb3IgdGhlIG5ldyByZXN1bHRzLlxuICAgKiBBbHNvIGhhbmRsZXMgYXV0by1zZWxlY3Rpb24gb2YgcmVjb3JkcyB3aGVuIHRoZXkgZmlyc3QgYXJyaXZlLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayBpZiB0aGVzZSBhcmUgbmV3IHJlY29yZHMgKGRpZmZlcmVudCBmcm9tIHdoYXQgd2UgbGFzdCBxdWVyaWVkKVxuICAgIC8vIElNUE9SVEFOVDogQ29tcGFyZSBhZ2FpbnN0IG9yaWdpbmFsIHF1ZXJ5IHJlc3VsdHMsIG5vdCBzZWxlY3RlZCByZXN1bHRzXG4gICAgLy8gVGhpcyBwcmV2ZW50cyByZW1vdmVkUmVjb3JkSWRzIGZyb20gYmVpbmcgcmVzZXQgd2hlbiByZWNvcmRzIGFyZSByZW1vdmVkXG4gICAgY29uc3QgY3VycmVudFJlY29yZElkcyA9IHJlY29yZHM/Lm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpIHx8IFtdXG4gICAgY29uc3QgcmVjb3Jkc0NoYW5nZWQgPSBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aCAhPT0gbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQubGVuZ3RoIHx8XG4gICAgICBjdXJyZW50UmVjb3JkSWRzLnNvbWUoKGlkLCBpbmRleCkgPT4gaWQgIT09IGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50W2luZGV4XSlcbiAgICBcbiAgICAvLyBGSVggKHIwMTguOTQpOiBTaW1wbGlmaWVkIC0gbm8gcmVtb3ZlZFJlY29yZElkcyB0cmFja2luZyBuZWVkZWRcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAncmVjb3Jkcy1wcm9wLWNoYW5nZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHdpbGxTZXRRdWVyeURhdGE6IHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwLFxuICAgICAgaGFzU2VsZWN0ZWRSZWY6IGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQsXG4gICAgICByZWNvcmRzQ2hhbmdlZDogcmVjb3Jkc0NoYW5nZWQsXG4gICAgICBsYXN0UXVlcnlSZWNvcmRJZHNDb3VudDogbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQubGVuZ3RoLFxuICAgICAgY3VycmVudFJlY29yZElkc0NvdW50OiBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIG5vdGU6ICdyMDE4Ljk0OiBSZWNvcmRzIHN0YXkgaW4gc3luYyAtIG5vIGZpbHRlcmluZyBuZWVkZWQnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIG9yaWdpbmFsIHF1ZXJ5IHJlY29yZCBJRHMgcmVmXG4gICAgaWYgKHJlY29yZHNDaGFuZ2VkKSB7XG4gICAgICBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudCA9IGN1cnJlbnRSZWNvcmRJZHNcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlY29yZHMtY2hhbmdlZC1yZWYtdXBkYXRlZCcsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgbmV3UmVjb3JkSWRzQ291bnQ6IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIE5PVEU6IERvbid0IHJlc2V0IGV4cGFuZEFsbCBoZXJlIC0gaXQncyBoYW5kbGVkIGJ5IHRoZSBxdWVyeUl0ZW0tY2hhbmdlIHVzZUVmZmVjdFxuICAgIC8vIFJlc2V0dGluZyBpdCBoZXJlIGNhdXNlcyB0aGUgRXhwYW5kL0NvbGxhcHNlIGJ1dHRvbiB0byBmbGlwIGJhY2sgd2hlbiByZWNvcmRzIGFyZSByZW1vdmVkXG4gICAgc2V0UXVlcnlEYXRhKHtcbiAgICAgIHJlY29yZHMsXG4gICAgICBwYWdlOiAxXG4gICAgfSlcbiAgICBcbiAgICAvLyBGSVggKHIwMTguOTQpOiBTaW1wbGlmaWVkIC0gbm8gcmVtb3ZlZFJlY29yZElkcyBjaGVjayBuZWVkZWRcbiAgICAvLyBPbmx5IGF1dG8tc2VsZWN0IHJlY29yZHMgaWY6XG4gICAgLy8gMS4gV2UgaGF2ZSByZWNvcmRzIGFuZCBvdXRwdXREU1xuICAgIC8vIDIuIFdlIGhhdmVuJ3QgYWxyZWFkeSBzZWxlY3RlZCB0aGVzZSByZWNvcmRzIChoYXNTZWxlY3RlZFJlZiBpcyBmYWxzZSlcbiAgICAvLyAzLiBPUiB0aGUgcmVjb3JkcyBoYXZlIGFjdHVhbGx5IGNoYW5nZWQgKG5ldyBxdWVyeSByZXN1bHRzKVxuICAgIGlmIChyZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID4gMCAmJiBvdXRwdXREUyAmJiBcbiAgICAgICAgKCFoYXNTZWxlY3RlZFJlZi5jdXJyZW50IHx8IHJlY29yZHNDaGFuZ2VkKSkge1xuICAgICAgY29uc3QgcmVjb3JkSWRzID0gcmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgY29uc3QgZmRyID0gcmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXG4gICAgICBcbiAgICAgIC8vIFNlbGVjdCByZWNvcmRzIGFuZCBwdWJsaXNoIHNlbGVjdGlvbiBtZXNzYWdlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICAgIC8vIFVzZSBhc3luYyBJSUZFIHNpbmNlIHVzZUVmZmVjdCBjYW4ndCBiZSBhc3luY1xuICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzXG4gICAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICB3aWRnZXRJZCwgXG4gICAgICAgICAgICBvdXRwdXREUywgXG4gICAgICAgICAgICByZWNvcmRJZHMsIFxuICAgICAgICAgICAgZmRyLCBcbiAgICAgICAgICAgIGZhbHNlLCBcbiAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIFxuICAgICAgICAgICAgZ3JhcGhpY3NMYXllciwgXG4gICAgICAgICAgICBtYXBWaWV3XG4gICAgICAgICAgKVxuICAgICAgICAgIGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgPSB0cnVlIC8vIE1hcmsgYXMgc2VsZWN0ZWRcbiAgICAgICAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSByZWNvcmRJZHMgLy8gU3RvcmUgdGhlIElEcyB3ZSBzZWxlY3RlZFxuICAgICAgICAgIGxhc3RTZWxlY3RlZEZlYXR1cmVSZWNvcmRzUmVmLmN1cnJlbnQgPSBmZHIgLy8gU3RvcmUgdGhlIGZ1bGwgcmVjb3JkcyBmb3IgcG90ZW50aWFsIHJlc3RvcmF0aW9uXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTm90aWZ5IFdpZGdldCBhbmQgSGVscGVyU2ltcGxlIG9mIHNlbGVjdGlvbiBjaGFuZ2VcbiAgICAgICAgICBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50KHdpZGdldElkLCByZWNvcmRJZHMsIG91dHB1dERTLCBxdWVyeUl0ZW0uY29uZmlnSWQsIGV2ZW50TWFuYWdlcilcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VsZWN0IHF1ZXJ5IHJlc3VsdHMnXG4gICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWZhaWxlZC1xdWVyeS1yZXN1bHQnLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSkoKVxuICAgIH0gZWxzZSBpZiAocmVjb3Jkc0NoYW5nZWQgJiYgcmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gSWYgcmVjb3JkcyB3ZXJlIGNsZWFyZWQsIHJlc2V0IHRoZSBzZWxlY3Rpb24gZmxhZ1xuICAgICAgaGFzU2VsZWN0ZWRSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBbXVxuICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgZXJyb3JzIHdoZW4gY2xlYXJpbmcgcmVjb3Jkc1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhdXRvLXNlbGVjdGlvbi1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNSZWNvcmRzOiAhIShyZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTLFxuICAgICAgICBoYXNTZWxlY3RlZFJlZjogaGFzU2VsZWN0ZWRSZWYuY3VycmVudCxcbiAgICAgICAgcmVjb3Jkc0NoYW5nZWQ6IHJlY29yZHNDaGFuZ2VkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbcmVjb3Jkcywgb3V0cHV0RFMsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIHF1ZXJ5SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHRdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gY2xlYXIgc2VsZWN0aW9uIHdoZW4gcmVzdWx0U2VsZWN0TW9kZSBjaGFuZ2VkXG4gICAgaWYgKG91dHB1dERTKSB7XG4gICAgICBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMob3V0cHV0RFMsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIpXG4gICAgICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgW10sIG91dHB1dERTLCB0cnVlKVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbS5yZXN1bHRTZWxlY3RNb2RlLCBvdXRwdXREUywgd2lkZ2V0SWQsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXJdKVxuXG4gIC8vIFVwZGF0ZSBleHBhbmRBbGwgd2hlbiBxdWVyeUl0ZW0gY2hhbmdlcyAoZS5nLiwgc3dpdGNoaW5nIGJldHdlZW4gcXVlcmllcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBuZXdFeHBhbmRBbGwgPSBxdWVyeUl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0ID8/IGZhbHNlXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2V4cGFuZEFsbC1yZXNldC1ieS1xdWVyeUl0ZW0tY2hhbmdlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIHJlc3VsdEV4cGFuZEJ5RGVmYXVsdDogcXVlcnlJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgIG5ld0V4cGFuZEFsbCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgc2V0RXhwYW5kQWxsKG5ld0V4cGFuZEFsbClcbiAgICAvLyBSZXNldCBpbmRpdmlkdWFsIGV4cGFuc2lvbiBzdGF0ZXMgd2hlbiBxdWVyeSBjaGFuZ2VzXG4gICAgc2V0SXRlbUV4cGFuZFN0YXRlcyhuZXcgTWFwKCkpXG4gIH0sIFtxdWVyeUl0ZW0uY29uZmlnSWRdKVxuXG4gIC8qKlxuICAgKiBNb25pdG9yIG9yaWdpbiBkYXRhIHNvdXJjZSBzZWxlY3Rpb24gY2hhbmdlcyB0byBkZXRlY3Qgd2hlbiBvdGhlciB3aWRnZXRzIChsaWtlIG1hcCBpZGVudGlmeSlcbiAgICogY2xlYXIgb3VyIHNlbGVjdGlvbnMuIEVuaGFuY2VkIHdpdGggaWRlbnRpZnkgcG9wdXAgZGV0ZWN0aW9uIGZvciB0ZXN0aW5nIHNjZW5hcmlvcy5cbiAgICogV2F0Y2hlcyB0aGUgb3JpZ2luIGRhdGEgc291cmNlJ3Mgc2VsZWN0aW9uIHN0YXRlIGRpcmVjdGx5IHZpYSBwb2xsaW5nLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW91dHB1dERTKSByZXR1cm5cblxuICAgIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBpZiAoIW9yaWdpbkRTKSByZXR1cm5cblxuICAgIGNvbnN0IG9yaWdpbkRTSWQgPSBvcmlnaW5EUy5pZFxuICAgIGxldCBwcmV2aW91c1NlbGVjdGVkSWRzOiBzdHJpbmdbXSA9IFtdXG4gICAgbGV0IGlkZW50aWZ5UG9wdXBXYXNPcGVuID0gZmFsc2VcbiAgICBsZXQgbGFzdExvZ1RpbWUgPSAwXG4gICAgY29uc3QgTE9HX1RIUk9UVExFX01TID0gMTAwMCAvLyBUaHJvdHRsZSBsb2dzIHRvIG9uY2UgcGVyIHNlY29uZFxuICAgIFxuICAgIC8vIEluaXRpYWwgY2hlY2tcbiAgICBwcmV2aW91c1NlbGVjdGVkSWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgIGlkZW50aWZ5UG9wdXBXYXNPcGVuID0gaXNJZGVudGlmeVBvcHVwT3BlbigpXG5cbiAgICAvLyBXYXRjaCBmb3Igc2VsZWN0aW9uIGNoYW5nZXMgb24gdGhlIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IGNoZWNrU2VsZWN0aW9uID0gKCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkSWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgY29uc3Qgb3VyRXhwZWN0ZWRJZHMgPSBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnRcbiAgICAgIGNvbnN0IGhhc091clNlbGVjdGlvbiA9IG91ckV4cGVjdGVkSWRzLmxlbmd0aCA+IDBcbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBJc09wZW4gPSBpc0lkZW50aWZ5UG9wdXBPcGVuKClcbiAgICAgIFxuICAgICAgLy8gRGV0ZWN0IGlmIHNlbGVjdGlvbiB3YXMgY2xlYXJlZCBvciBjaGFuZ2VkIGV4dGVybmFsbHlcbiAgICAgIGNvbnN0IHdhc0NsZWFyZWQgPSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCA+IDAgJiYgY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMFxuICAgICAgY29uc3Qgd2FzQ2hhbmdlZCA9IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgKGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggIT09IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoIHx8XG4gICAgICAgICAhY3VycmVudFNlbGVjdGVkSWRzLmV2ZXJ5KGlkID0+IHByZXZpb3VzU2VsZWN0ZWRJZHMuaW5jbHVkZXMoaWQpKSlcbiAgICAgIFxuICAgICAgLy8gTkVXOiBEZXRlY3QgaWYgc2VsZWN0aW9uIHdhcyBhZGRlZCAod2VudCBmcm9tIGVtcHR5IHRvIGhhdmluZyByZWNvcmRzKVxuICAgICAgY29uc3Qgd2FzQWRkZWQgPSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMCAmJiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoID4gMFxuICAgICAgXG4gICAgICAvLyBUcmFjayBpZGVudGlmeSBwb3B1cCBzdGF0ZSBjaGFuZ2VzXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCA9ICFpZGVudGlmeVBvcHVwV2FzT3BlbiAmJiBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwSnVzdENsb3NlZCA9IGlkZW50aWZ5UG9wdXBXYXNPcGVuICYmICFpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwU3RpbGxPcGVuID0gaWRlbnRpZnlQb3B1cFdhc09wZW4gJiYgaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgXG4gICAgICAvLyBMb2cgaWRlbnRpZnkgcG9wdXAgc3RhdGUgY2hhbmdlc1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICAgICAgaWYgKGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkIHx8IGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnU0VMRUNUSU9OJywge1xuICAgICAgICAgIGV2ZW50OiBpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCA/ICdpZGVudGlmeS1wb3B1cC1vcGVuZWQnIDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZCcsXG4gICAgICAgICAgb3JpZ2luRFNJZCxcbiAgICAgICAgICBvdXJTZWxlY3Rpb25Db3VudDogb3VyRXhwZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgIGN1cnJlbnRTZWxlY3Rpb25Db3VudDogY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgaWRlbnRpZnkgcG9wdXAganVzdCBjbG9zZWQgYW5kIHNlbGVjdGlvbiB3YXMgY2xlYXJlZCwgZGlzcGF0Y2ggcmVzdG9yZSBldmVudFxuICAgICAgICBpZiAoaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQgJiYgd2FzQ2xlYXJlZCAmJiBoYXNPdXJTZWxlY3Rpb24gJiYgb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHJlc3RvcmVFdmVudCA9IG5ldyBDdXN0b21FdmVudChSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5ULCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICAgIHJlY29yZElkczogb3VyRXhwZWN0ZWRJZHMsXG4gICAgICAgICAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHJlc3RvcmVFdmVudClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1NFTEVDVElPTicsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtcmVxdWVzdGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgcmVjb3JkQ291bnQ6IG91ckV4cGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTG9nIEFMTCBzZWxlY3Rpb24gY2hhbmdlcyAobm90IGp1c3Qgd2hlbiB3ZSBoYXZlIG91ciBvd24gc2VsZWN0aW9uKVxuICAgICAgaWYgKHdhc0NsZWFyZWQgfHwgd2FzQ2hhbmdlZCB8fCB3YXNBZGRlZCkge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIG1hdGNoZXMgb3VyIGV4cGVjdGVkIHNlbGVjdGlvblxuICAgICAgICBjb25zdCBtYXRjaGVzT3VyU2VsZWN0aW9uID0gaGFzT3VyU2VsZWN0aW9uICYmIFxuICAgICAgICAgIG91ckV4cGVjdGVkSWRzLmxlbmd0aCA9PT0gY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCAmJlxuICAgICAgICAgIG91ckV4cGVjdGVkSWRzLmV2ZXJ5KGlkID0+IGN1cnJlbnRTZWxlY3RlZElkcy5pbmNsdWRlcyhpZCkpXG4gICAgICAgIFxuICAgICAgICAvLyBEZXRlcm1pbmUgd2hhdCB3b3VsZCBoYXBwZW4gKGZvciB0ZXN0aW5nL2xvZ2dpbmcpXG4gICAgICAgIGNvbnN0IHdvdWxkUmVzdG9yZSA9IHdhc0NsZWFyZWQgJiYgaWRlbnRpZnlQb3B1cElzT3BlbiAmJiBoYXNPdXJTZWxlY3Rpb24gJiYgb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID4gMFxuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHNjZW5hcmlvXG4gICAgICAgIGxldCBzY2VuYXJpbyA9ICdVbmtub3duJ1xuICAgICAgICBpZiAod2FzQWRkZWQgJiYgIWhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gJ1RFU1QgU0NFTkFSSU8gNDogQW5vdGhlciB3aWRnZXQgc2VsZWN0ZWQgcmVjb3JkcyAod2UgaGF2ZSBubyBzZWxlY3Rpb24pJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0NoYW5nZWQgJiYgIW1hdGNoZXNPdXJTZWxlY3Rpb24gJiYgIWhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gJ1RFU1QgU0NFTkFSSU8gNTogQW5vdGhlciB3aWRnZXQgY2hhbmdlZCBzZWxlY3Rpb24gKHdlIGhhdmUgbm8gc2VsZWN0aW9uKSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNDaGFuZ2VkICYmICFtYXRjaGVzT3VyU2VsZWN0aW9uICYmIGhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgICAgICAgPyAnVEVTVCBTQ0VOQVJJTyAyOiBRdWVyeSDihpIgSWRlbnRpZnkgKHNlbGVjdGlvbiBjaGFuZ2VkLCBub3QgY2xlYXJlZCkg4oaSIFdvdWxkIE5PVCByZXN0b3JlJ1xuICAgICAgICAgICAgOiAnVEVTVCBTQ0VOQVJJTyAzOiBRdWVyeSDihpIgQW5vdGhlciBRdWVyeVNpbXBsZSB3aWRnZXQg4oaSIFdvdWxkIE5PVCByZXN0b3JlJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0NsZWFyZWQgJiYgaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICAgICAgICA/ICdURVNUIFNDRU5BUklPIDE6IFF1ZXJ5IOKGkiBJZGVudGlmeSDihpIgV291bGQgcmVzdG9yZSdcbiAgICAgICAgICAgIDogJ1RFU1QgU0NFTkFSSU8gMzogUXVlcnkg4oaSIEFub3RoZXIgUXVlcnlTaW1wbGUgd2lkZ2V0IChjbGVhcmVkKSDihpIgV291bGQgTk9UIHJlc3RvcmUnXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQWRkZWQgJiYgaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSBtYXRjaGVzT3VyU2VsZWN0aW9uXG4gICAgICAgICAgICA/ICdPdXIgd2lkZ2V0IHNlbGVjdGVkIHJlY29yZHMnXG4gICAgICAgICAgICA6ICdBbm90aGVyIHdpZGdldCBzZWxlY3RlZCBkaWZmZXJlbnQgcmVjb3JkcydcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTG9nIGRldGVjdGlvbiB3aXRoIGlkZW50aWZ5IHBvcHVwIHN0YXRlICh0aHJvdHRsZWQpXG4gICAgICAgIGlmIChub3cgLSBsYXN0TG9nVGltZSA+IExPR19USFJPVFRMRV9NUykge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnU0VMRUNUSU9OJywge1xuICAgICAgICAgICAgZXZlbnQ6IHdhc0NsZWFyZWQgPyAnc2VsZWN0aW9uLWNsZWFyZWQnIDogd2FzQ2hhbmdlZCA/ICdzZWxlY3Rpb24tY2hhbmdlZCcgOiAnc2VsZWN0aW9uLWFkZGVkJyxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQsXG4gICAgICAgICAgICBvdXJFeHBlY3RlZENvdW50OiBvdXJFeHBlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkQ291bnQ6IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICB3YXNDbGVhcmVkLFxuICAgICAgICAgICAgd2FzQ2hhbmdlZCxcbiAgICAgICAgICAgIHdhc0FkZGVkLFxuICAgICAgICAgICAgaGFzT3VyU2VsZWN0aW9uLFxuICAgICAgICAgICAgbWF0Y2hlc091clNlbGVjdGlvbixcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBJc09wZW4sXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCxcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBTdGlsbE9wZW4sXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwSnVzdENsb3NlZCxcbiAgICAgICAgICAgIHdvdWxkUmVzdG9yZSxcbiAgICAgICAgICAgIG91ckV4cGVjdGVkSWRzOiBvdXJFeHBlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRJZHM6IHByZXZpb3VzU2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJZHM6IGN1cnJlbnRTZWxlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgbm90ZTogd291bGRSZXN0b3JlIFxuICAgICAgICAgICAgICA/ICdXb3VsZCByZXN0b3JlIHNlbGVjdGlvbiAoY2xlYXJlZCArIGlkZW50aWZ5IHBvcHVwIG9wZW4pJ1xuICAgICAgICAgICAgICA6IGlkZW50aWZ5UG9wdXBJc09wZW4gJiYgd2FzQ2hhbmdlZFxuICAgICAgICAgICAgICAgID8gJ0lkZW50aWZ5IHBvcHVwIG9wZW4gYnV0IHNlbGVjdGlvbiBjaGFuZ2VkIChub3QgY2xlYXJlZCkgLSB3b3VsZCBub3QgcmVzdG9yZSdcbiAgICAgICAgICAgICAgICA6IHdhc0NsZWFyZWQgJiYgIWlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgICAgICAgICAgICAgID8gJ1NlbGVjdGlvbiBjbGVhcmVkLCBjaGVja2luZyBpZiBpZGVudGlmeSBwb3B1cCBvcGVucy4uLidcbiAgICAgICAgICAgICAgICAgIDogd2FzQWRkZWRcbiAgICAgICAgICAgICAgICAgICAgPyBoYXNPdXJTZWxlY3Rpb24gJiYgbWF0Y2hlc091clNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgID8gJ091ciB3aWRnZXQgc2VsZWN0ZWQgcmVjb3JkcydcbiAgICAgICAgICAgICAgICAgICAgICA6IGhhc091clNlbGVjdGlvbiAmJiAhbWF0Y2hlc091clNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgPyAnQW5vdGhlciB3aWRnZXQgc2VsZWN0ZWQgZGlmZmVyZW50IHJlY29yZHMnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdTZWxlY3Rpb24gYWRkZWQgKGJ5IGFub3RoZXIgd2lkZ2V0IG9yIGV4dGVybmFsIHNvdXJjZSknXG4gICAgICAgICAgICAgICAgICAgIDogJ05vIGlkZW50aWZ5IHBvcHVwIGRldGVjdGVkIC0gd291bGQgbm90IHJlc3RvcmUnXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBsYXN0TG9nVGltZSA9IG5vd1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHByZXZpb3VzU2VsZWN0ZWRJZHMgPSBbLi4uY3VycmVudFNlbGVjdGVkSWRzXVxuICAgICAgaWRlbnRpZnlQb3B1cFdhc09wZW4gPSBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgcGVyaW9kaWNhbGx5IChldmVyeSA1MDBtcylcbiAgICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoY2hlY2tTZWxlY3Rpb24sIDUwMClcbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKVxuICAgIH1cbiAgfSwgW291dHB1dERTXSlcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCByZXN1bHRzLiBSZXNldHMgbG9jYWwgc3RhdGUgYW5kIGRlbGVnYXRlcyB0byBwYXJlbnQncyBjbGVhclJlc3VsdCBtZXRob2QuXG4gICAqL1xuICBjb25zdCBjbGVhclJlc3VsdHMgPSBhc3luYyAoKSA9PiB7XG4gICAgLy8gTG9nIGhhc2ggc3RhdGUgYmVmb3JlIGNsZWFyaW5nXG4gICAgY29uc3QgaGFzaEJlZm9yZSA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgIGNvbnN0IHVybFBhcmFtc0JlZm9yZSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaEJlZm9yZSlcbiAgICBjb25zdCBoYXNoUGFyYW1zQmVmb3JlOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge31cbiAgICB1cmxQYXJhbXNCZWZvcmUuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgaGFzaFBhcmFtc0JlZm9yZVtrZXldID0gdmFsdWVcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHRzLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGhhc2hCZWZvcmU6IGhhc2hCZWZvcmUsXG4gICAgICBoYXNoUGFyYW1zQmVmb3JlOiBoYXNoUGFyYW1zQmVmb3JlLFxuICAgICAgaGFzaFBhcmFtc0NvdW50OiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQmVmb3JlKS5sZW5ndGgsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC45Nyk6IFNpbXBsaWZpZWQgLSBqdXN0IGRlbGVnYXRlIHRvIHBhcmVudCdzIGNsZWFyUmVzdWx0XG4gICAgLy8gUGFyZW50IGhhbmRsZXMgYWxsIGNsZWFudXA6IHJlY29yZHMsIHNlbGVjdGlvbiwgZ3JhcGhpY3MsIGhhc2gsIG1lc3NhZ2VzLCBldGMuXG4gICAgLy8gTG9jYWwgc3RhdGUgd2lsbCBiZSByZXNldCB3aGVuIGNvbXBvbmVudCByZW1vdW50cyB3aXRoIGZyZXNoIHJlc3VsdHNcbiAgICBhd2FpdCBvbk5hdkJhY2sodHJ1ZSlcbiAgICBcbiAgICAvLyBMb2cgaGFzaCBzdGF0ZSBhZnRlciBjbGVhcmluZyAod2l0aCBkZWxheSB0byBjYXRjaCBhc3luYyB1cGRhdGVzKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgaGFzaEFmdGVyID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgICBjb25zdCB1cmxQYXJhbXNBZnRlciA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaEFmdGVyKVxuICAgICAgY29uc3QgaGFzaFBhcmFtc0FmdGVyOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge31cbiAgICAgIHVybFBhcmFtc0FmdGVyLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgaGFzaFBhcmFtc0FmdGVyW2tleV0gPSB2YWx1ZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ2NsZWFyUmVzdWx0cy1jb21wbGV0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgaGFzaEJlZm9yZTogaGFzaEJlZm9yZSxcbiAgICAgICAgaGFzaEFmdGVyOiBoYXNoQWZ0ZXIsXG4gICAgICAgIGhhc2hQYXJhbXNCZWZvcmU6IGhhc2hQYXJhbXNCZWZvcmUsXG4gICAgICAgIGhhc2hQYXJhbXNBZnRlcjogaGFzaFBhcmFtc0FmdGVyLFxuICAgICAgICBoYXNoUGFyYW1zUmVtb3ZlZDogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0JlZm9yZSkubGVuZ3RoIC0gT2JqZWN0LmtleXMoaGFzaFBhcmFtc0FmdGVyKS5sZW5ndGgsXG4gICAgICAgIGhhc2hQYXJhbXNDb3VudEJlZm9yZTogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0JlZm9yZSkubGVuZ3RoLFxuICAgICAgICBoYXNoUGFyYW1zQ291bnRBZnRlcjogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0FmdGVyKS5sZW5ndGgsXG4gICAgICAgIHN0aWxsSGFzSGFzaFBhcmFtczogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0FmdGVyKS5sZW5ndGggPiAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSwgMTAwKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlUmVuZGVyRG9uZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCh7IGRhdGFJdGVtcywgcGFnZVNpemUsIHBhZ2UgfSkgPT4ge1xuICAgIC8vIEZJWCAocjAxOC45Mik6IFNraXAgaGFuZGxlUmVuZGVyRG9uZSBpZiBhIHF1ZXJ5IHN3aXRjaCBpcyBpbiBwcm9ncmVzc1xuICAgIC8vIFRoaXMgcHJldmVudHMgaGFuZGxlUmVuZGVyRG9uZSBmcm9tIHJlLXNlbGVjdGluZyBmdWxsIHF1ZXJ5IHJlc3VsdHMgYmVmb3JlIHRoZSBxdWVyeSBzd2l0Y2hcbiAgICAvLyBsb2dpYyBjYW4gY2xlYXIgdGhlIGdyYXBoaWNzIGxheWVyIGFuZCByZS1zZWxlY3Qgb25seSB0aGUgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgIGlmIChpc1F1ZXJ5U3dpdGNoSW5Qcm9ncmVzc1JlZj8uY3VycmVudCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1za2lwcGVkLXF1ZXJ5LXN3aXRjaC1pbi1wcm9ncmVzcycsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgZGF0YUl0ZW1zQ291bnQ6IGRhdGFJdGVtcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBwYWdlU2l6ZSxcbiAgICAgIHBhZ2UsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBGSVggKHIwMTguOTQpOiBTaW1wbGlmaWVkIC0gbm8gcmVtb3ZlZFJlY29yZElkcyBmaWx0ZXJpbmcgbmVlZGVkXG4gICAgLy8gUmVjb3JkcyBwcm9wIGlzIGFscmVhZHkgZmlsdGVyZWQgaW4gQWRkL1JlbW92ZSBtb2RlXG4gICAgLy8gRklYIChyMDE4Ljg5KTogV2hlbiBpbiBBZGQvUmVtb3ZlIG1vZGUsIGFsc28gZmlsdGVyIHRvIG9ubHkgaW5jbHVkZSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgLy8gVGhpcyBwcmV2ZW50cyBoYW5kbGVSZW5kZXJEb25lIGZyb20gcmUtc2VsZWN0aW5nIHRoZSBmdWxsIHF1ZXJ5IHJlc3VsdHMgYWZ0ZXIgYSBxdWVyeSBzd2l0Y2hcbiAgICBsZXQgZmlsdGVyZWRJdGVtcyA9IGRhdGFJdGVtcyB8fCBbXVxuICAgIFxuICAgIGlmIChyZXN1bHRzTW9kZSAhPT0gU2VsZWN0aW9uVHlwZS5ORVdfU0VMRUNUSU9OICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYWNjdW11bGF0ZWRSZWNvcmRJZHMgPSBuZXcgU2V0KGFjY3VtdWxhdGVkUmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpKVxuICAgICAgY29uc3QgYmVmb3JlRmlsdGVyQ291bnQgPSBmaWx0ZXJlZEl0ZW1zLmxlbmd0aFxuICAgICAgZmlsdGVyZWRJdGVtcyA9IGZpbHRlcmVkSXRlbXMuZmlsdGVyKGl0ZW0gPT4gYWNjdW11bGF0ZWRSZWNvcmRJZHMuaGFzKGl0ZW0uZ2V0SWQoKSkpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZVJlbmRlckRvbmUtZmlsdGVyZWQtYnktYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgZGF0YUl0ZW1zQ291bnQ6IGRhdGFJdGVtcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGFmdGVyQWNjdW11bGF0ZWRGaWx0ZXI6IGZpbHRlcmVkSXRlbXMubGVuZ3RoLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgZmlsdGVyZWQ6IGJlZm9yZUZpbHRlckNvdW50IC0gZmlsdGVyZWRJdGVtcy5sZW5ndGgsXG4gICAgICAgIG5vdGU6ICdyMDE4Ljk0OiBObyByZW1vdmVkUmVjb3JkSWRzIGZpbHRlciAtIHJlY29yZHMgc3RheSBpbiBzeW5jJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiBxdWVyeURhdGEgaGFzIGFjdHVhbGx5IGNoYW5nZWQgYmVmb3JlIHVwZGF0aW5nIHN0YXRlXG4gICAgLy8gVGhpcyBwcmV2ZW50cyB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzIHRoYXQgcmVzZXQgc2Nyb2xsIHBvc2l0aW9uXG4gICAgY29uc3QgY3VycmVudFJlY29yZHMgPSBxdWVyeURhdGE/LnJlY29yZHMgfHwgW11cbiAgICBjb25zdCBjdXJyZW50UmVjb3JkSWRzID0gY3VycmVudFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKS5zb3J0KClcbiAgICBjb25zdCBuZXdSZWNvcmRJZHMgPSBmaWx0ZXJlZEl0ZW1zLm1hcChyID0+IHIuZ2V0SWQoKSkuc29ydCgpXG4gICAgY29uc3QgZGF0YUNoYW5nZWQgPSBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aCAhPT0gbmV3UmVjb3JkSWRzLmxlbmd0aCB8fFxuICAgICAgIWN1cnJlbnRSZWNvcmRJZHMuZXZlcnkoKGlkLCBpZHgpID0+IGlkID09PSBuZXdSZWNvcmRJZHNbaWR4XSkgfHxcbiAgICAgIHF1ZXJ5RGF0YT8ucGFnZVNpemUgIT09IHBhZ2VTaXplIHx8XG4gICAgICBxdWVyeURhdGE/LnBhZ2UgIT09IHBhZ2VcbiAgICBcbiAgICAvLyBPbmx5IHVwZGF0ZSBzdGF0ZSBpZiBkYXRhIGhhcyBhY3R1YWxseSBjaGFuZ2VkXG4gICAgaWYgKGRhdGFDaGFuZ2VkKSB7XG4gICAgICBzZXRRdWVyeURhdGEoe1xuICAgICAgICByZWNvcmRzOiBmaWx0ZXJlZEl0ZW1zLFxuICAgICAgICBwYWdlU2l6ZSxcbiAgICAgICAgcGFnZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gT25seSBzZWxlY3QgcmVjb3JkcyB0aGF0IGFyZSBOT1QgcmVtb3ZlZFxuICAgIC8vIElNUE9SVEFOVDogT25seSByZS1zZWxlY3QgaWYgdGhlIHNlbGVjdGlvbiBoYXMgYWN0dWFsbHkgY2hhbmdlZCB0byBhdm9pZCByZXNldHRpbmcgc2Nyb2xsIHBvc2l0aW9uXG4gICAgaWYgKGZpbHRlcmVkSXRlbXMgJiYgZmlsdGVyZWRJdGVtcy5sZW5ndGggPiAwICYmIG91dHB1dERTKSB7XG4gICAgICBjb25zdCByZWNvcmRJZHMgPSBmaWx0ZXJlZEl0ZW1zLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBjb25zdCBmZHIgPSBmaWx0ZXJlZEl0ZW1zIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgd2hhdCdzIGN1cnJlbnRseSBzZWxlY3RlZCB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZS1zZWxlY3Rpb24gKHdoaWNoIHJlc2V0cyBzY3JvbGwpXG4gICAgICBjb25zdCBjdXJyZW50bHlTZWxlY3RlZElkcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IHNlbGVjdGlvbkNoYW5nZWQgPSBjdXJyZW50bHlTZWxlY3RlZElkcy5sZW5ndGggIT09IHJlY29yZElkcy5sZW5ndGggfHxcbiAgICAgICAgIXJlY29yZElkcy5ldmVyeShpZCA9PiBjdXJyZW50bHlTZWxlY3RlZElkcy5pbmNsdWRlcyhpZCkpXG4gICAgICBcbiAgICAgIC8vIE9ubHkgc2VsZWN0IGlmIHRoZSBzZWxlY3Rpb24gaGFzIGFjdHVhbGx5IGNoYW5nZWRcbiAgICAgIGlmIChzZWxlY3Rpb25DaGFuZ2VkKSB7XG4gICAgICAgIC8vIHIwMTguNzg6IFVzZSBhc3luYyBJSUZFIHRvIHByb3Blcmx5IGF3YWl0IHNlbGVjdGlvbiBhbmQgcGFzcyBncmFwaGljcyBwYXJhbWV0ZXJzXG4gICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgICAgICB3aWRnZXRJZCwgXG4gICAgICAgICAgICAgIG91dHB1dERTLCBcbiAgICAgICAgICAgICAgcmVjb3JkSWRzLCBcbiAgICAgICAgICAgICAgZmRyLFxuICAgICAgICAgICAgICBmYWxzZSwgLy8gYWxzb1B1Ymxpc2hUb091dHB1dERTXG4gICAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXIsXG4gICAgICAgICAgICAgIG1hcFZpZXdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1zZWxlY3RpbmctZmlsdGVyZWQtcmVjb3JkcycsXG4gICAgICAgICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgICAgICAgZGF0YUl0ZW1zQ291bnQ6IGRhdGFJdGVtcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgIGZpbHRlcmVkSXRlbXNDb3VudDogZmlsdGVyZWRJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHNlbGVjdGlvbkNoYW5nZWQ6IHRydWUsXG4gICAgICAgICAgICAgIGN1cnJlbnRseVNlbGVjdGVkQ291bnQ6IGN1cnJlbnRseVNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbmV3U2VsZWN0aW9uQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHVzZWRHcmFwaGljc0xheWVyOiB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICAgICAgICBub3RlOiAncjAxOC45NDogTm8gcmVtb3ZlZFJlY29yZElkcyB0cmFja2luZycsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQtaGFuZGxlUmVuZGVyRG9uZScsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZElkcy5sZW5ndGhcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ2hhbmRsZVJlbmRlckRvbmUtc2tpcHBpbmctcmVzZWxlY3Rpb24nLFxuICAgICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICBmaWx0ZXJlZEl0ZW1zQ291bnQ6IGZpbHRlcmVkSXRlbXMubGVuZ3RoLFxuICAgICAgICAgIHJlYXNvbjogJ3NlbGVjdGlvbi11bmNoYW5nZWQnLFxuICAgICAgICAgIGN1cnJlbnRseVNlbGVjdGVkQ291bnQ6IGN1cnJlbnRseVNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICBub3RlOiAncjAxOC45NDogTm8gcmVtb3ZlZFJlY29yZElkcyB0cmFja2luZycsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkLCBxdWVyeURhdGEsIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHNdKVxuXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKG91dHB1dERTPy5pZClcbiAgICBjb25zdCBkc1JlY29yZHMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICBjb25zdCBzZWxlY3RlZElkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZElkcygpID8/IFtdXG4gICAgXG4gICAgLy8gQ2FwdHVyZSByZWNvcmRzIHByb3AgYmVmb3JlIHVzaW5nIGl0ICh0byBhdm9pZCBzaGFkb3dpbmcpXG4gICAgY29uc3QgcmVjb3Jkc1Byb3AgPSByZWNvcmRzXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGF0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlIHNlZXNcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UtZmlyZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFM/LmlkLFxuICAgICAgZHNJZDogZHM/LmlkLFxuICAgICAgc2VsZWN0ZWRSZWNvcmRzRnJvbURTOiBkc1JlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2VsZWN0ZWRJZHNGcm9tRFM6IHNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgIGN1cnJlbnRTZWxlY3RlZFJlY29yZHNTdGF0ZTogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHNQcm9wPy5sZW5ndGggfHwgMCxcbiAgICAgIG5vdGU6ICdyMDE4Ljk0OiBObyByZW1vdmVkUmVjb3JkSWRzIHRyYWNraW5nJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gSWYgd2UgaGF2ZSByZWNvcmRzIGluIHRoZSBwcm9wIChhY2N1bXVsYXRlZCByZWNvcmRzKSBidXQgRFMgc2hvd3MgMCBzZWxlY3RlZCxcbiAgICAvLyBhbmQgd2UgY3VycmVudGx5IGhhdmUgc2VsZWN0ZWRSZWNvcmRzLCB0aGlzIGlzIGxpa2VseSBhIHF1ZXJ5IHN3aXRjaCBpbiBcIkFkZCB0b1wiIG1vZGVcbiAgICAvLyB3aGVyZSByZS1zZWxlY3Rpb24gaGFzbid0IGhhcHBlbmVkIHlldC4gRG9uJ3QgY2xlYXIgc2VsZWN0ZWRSZWNvcmRzIC0gd2FpdCBmb3IgcmUtc2VsZWN0aW9uLlxuICAgIGlmIChyZWNvcmRzUHJvcCAmJiByZWNvcmRzUHJvcC5sZW5ndGggPiAwICYmIHNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMCAmJiBzZWxlY3RlZFJlY29yZHMgJiYgc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXNraXBwaW5nLWNsZWFyLWR1cmluZy1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogJ3dhaXRpbmctZm9yLXJlc2VsZWN0aW9uJyxcbiAgICAgICAgcmVjb3Jkc1Byb3BDb3VudDogcmVjb3Jkc1Byb3AubGVuZ3RoLFxuICAgICAgICBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm4gLy8gU2tpcCB1cGRhdGluZyAtIHJlLXNlbGVjdGlvbiBpcyBjb21pbmdcbiAgICB9XG4gICAgXG4gICAgLy8gRklYIChyMDE4Ljk0KTogU2ltcGxpZmllZCAtIG5vIHJlbW92ZWRSZWNvcmRJZHMgZmlsdGVyaW5nIG5lZWRlZFxuICAgIC8vIFJlY29yZHMgcHJvcCBpcyBhbHJlYWR5IGZpbHRlcmVkIGluIEFkZC9SZW1vdmUgbW9kZVxuICAgIGxldCBzaG91bGRVcGRhdGUgPSBmYWxzZVxuICAgIGlmIChzZWxlY3RlZElkcy5sZW5ndGggIT09IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoKSB7XG4gICAgICBzaG91bGRVcGRhdGUgPSB0cnVlXG4gICAgfSBlbHNlIHsgLy8gZXF1YWwgbGVuZ3RoXG4gICAgICBzaG91bGRVcGRhdGUgPSBzZWxlY3RlZElkcy5zb21lKGlkID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gc2VsZWN0ZWRSZWNvcmRzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uZ2V0SWQoKSA9PT0gaWQpXG4gICAgICAgIHJldHVybiB0YXJnZXQgPT0gbnVsbFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UtdXBkYXRpbmctc2VsZWN0ZWRSZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICBvbGRDb3VudDogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgbmV3Q291bnQ6IGRzUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIG9sZFNlbGVjdGVkSWRzOiAoc2VsZWN0ZWRSZWNvcmRzIHx8IFtdKS5tYXAociA9PiByLmdldElkKCkpLnNsaWNlKDAsIDUpLFxuICAgICAgICBuZXdTZWxlY3RlZElkczogc2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgIG5vdGU6ICdyMDE4Ljk0OiBObyByZW1vdmVkUmVjb3JkSWRzIGZpbHRlcmluZycsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHNldFNlbGVjdGVkUmVjb3Jkcyhkc1JlY29yZHMgfHwgW10pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXNraXBwaW5nLXVwZGF0ZScsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnbm8tY2hhbmdlLWRldGVjdGVkJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW291dHB1dERTPy5pZCwgc2VsZWN0ZWRSZWNvcmRzLCB3aWRnZXRJZCwgcmVjb3Jkc10pXG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyB0aGUgdGlwIG1lc3NhZ2Ugc2hvd2luZyBob3cgbWFueSBmZWF0dXJlcyBhcmUgZGlzcGxheWVkLlxuICAgKiBGSVggKHIwMTguOTQpOiBTaW1wbGlmaWVkIC0gbm8gZmlsdGVyaW5nIG5lZWRlZCBzaW5jZSByZWNvcmRzIHN0YXkgaW4gc3luY1xuICAgKiBcbiAgICogQHJldHVybnMgRm9ybWF0dGVkIHN0cmluZyBsaWtlIFwiRmVhdHVyZXMgZGlzcGxheWVkOiAxMTggLyAxMThcIlxuICAgKi9cbiAgY29uc3QgZ2V0VGlwTWVzc2FnZSA9ICgpID0+IHtcbiAgICBpZiAocXVlcnlEYXRhICYmIHF1ZXJ5RGF0YS5yZWNvcmRzKSB7XG4gICAgICAvLyBGSVggKHIwMTguOTQpOiBObyBmaWx0ZXJpbmcgbmVlZGVkIC0gcXVlcnlEYXRhLnJlY29yZHMgaXMgYWxyZWFkeSBmaWx0ZXJlZFxuICAgICAgY29uc3QgZGlzcGxheWVkQ291bnQgPSBxdWVyeURhdGEucmVjb3Jkcy5sZW5ndGhcbiAgICAgIFxuICAgICAgLy8gRklYIChyMDE4LjgzKTogVXNlIGRpc3BsYXllZENvdW50IGZvciBib3RoIG51bWVyYXRvciBhbmQgZGVub21pbmF0b3JcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgY291bnQgc2hvd3MgXCIxMTggLyAxMThcIiBhZnRlciByZW1vdmluZyByZWNvcmRzLCBub3QgXCIxMTggLyAxMjFcIlxuICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogJHtkaXNwbGF5ZWRDb3VudH0gLyAke2Rpc3BsYXllZENvdW50fWBcbiAgICAgIGNvbnN0IHsgcGFnZSA9IDEsIHBhZ2VTaXplID0gZGVmYXVsdFBhZ2VTaXplIH0gPSBxdWVyeURhdGFcbiAgICAgIGNvbnN0IGZyb20gPSAocGFnZSAtIDEpICogcGFnZVNpemUgKyAxXG4gICAgICBjb25zdCB0byA9IGZyb20gKyBwYWdlU2l6ZSAtIDFcbiAgICAgIGlmIChyZXN1bHRDb3VudCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogJHtmcm9tfSAtICR7TWF0aC5taW4odG8sIGRpc3BsYXllZENvdW50KX0gLyAke3Jlc3VsdENvdW50fWBcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtnZXRJMThuTWVzc2FnZSgnZmVhdHVyZXNEaXNwbGF5ZWQnKX06IDAgLSAwIC8gMGBcbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlcyBleHBhbmQvY29sbGFwc2Ugc3RhdGUgZm9yIGFsbCByZXN1bHQgaXRlbXMuXG4gICAqIFdoZW4gdG9nZ2xlZCwgYWxsIHJlc3VsdCBpdGVtcyB3aWxsIGJlIGV4cGFuZGVkIG9yIGNvbGxhcHNlZCB0b2dldGhlci5cbiAgICogVXBkYXRlcyBpbmRpdmlkdWFsIGl0ZW0gZXhwYW5zaW9uIHN0YXRlcyBpbiB0aGUgbWFwIHRvIG1haW50YWluIHN0YXRlIHdoZW4gaXRlbXMgYXJlIHJlbW92ZWQuXG4gICAqL1xuICBjb25zdCB0b2dnbGVFeHBhbmRBbGwgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0RXhwYW5kQWxsKHByZXYgPT4ge1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSAhcHJldlxuICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgIGV2ZW50OiAndG9nZ2xlRXhwYW5kQWxsLWNsaWNrZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcHJldmlvdXNWYWx1ZTogcHJldixcbiAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGFsbCBjdXJyZW50IGl0ZW1zIGluIHRoZSBtYXAgd2l0aCB0aGUgbmV3IGV4cGFuc2lvbiBzdGF0ZVxuICAgICAgc2V0SXRlbUV4cGFuZFN0YXRlcyhwcmV2TWFwID0+IHtcbiAgICAgICAgY29uc3QgbmV3TWFwID0gbmV3IE1hcChwcmV2TWFwKVxuICAgICAgICAvLyBHZXQgYWxsIGN1cnJlbnQgcmVjb3JkIElEcyBmcm9tIGZpbHRlcmVkIHJlY29yZHNcbiAgICAgICAgY29uc3QgYWxsUmVjb3JkSWRzID0gZmlsdGVyZWRSZWNvcmRzRm9yTGlzdC5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgIGFsbFJlY29yZElkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICBuZXdNYXAuc2V0KGlkLCBuZXdWYWx1ZSlcbiAgICAgICAgfSlcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpdGVtRXhwYW5kU3RhdGVzLXVwZGF0ZWQnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgIHVwZGF0ZWRDb3VudDogYWxsUmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgICByZWNvcmRJZHM6IGFsbFJlY29yZElkcy5zbGljZSgwLCAxMCksIC8vIExvZyBmaXJzdCAxMCBJRHNcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIG5ld01hcFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIG5ld1ZhbHVlXG4gICAgfSlcbiAgfSwgW3dpZGdldElkLCBmaWx0ZXJlZFJlY29yZHNGb3JMaXN0XSlcblxuICBjb25zdCByZXN1bHRVc2VPdXRwdXREYXRhU291cmNlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIEltbXV0YWJsZSh7XG4gICAgICBkYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWQsXG4gICAgICBtYWluRGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgfSlcbiAgfSwgW3F1ZXJ5SXRlbT8ub3V0cHV0RGF0YVNvdXJjZUlkXSlcblxuICBjb25zdCBoYW5kbGVFc2NhcGUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9LCBbXSlcblxuICAvLyBLZWVwIHJlY29yZHMgc2VsZWN0ZWQgYW5kIHpvb20gdG8gY2xpY2tlZCByZWNvcmRcbiAgLy8gUmVjb3JkcyByZW1haW4gc2VsZWN0ZWQgYXMgbG9uZyBhcyB0aGV5J3JlIGluIHRoZSByZXN1bHRzXG4gIC8vIENsaWNraW5nIGEgcmVjb3JkIGFsd2F5cyB6b29tcyB0byBpdCBvbiB0aGUgbWFwICh0aGlzIGJlaGF2aW9yIGlzIGFsd2F5cyBlbmFibGVkKVxuICBjb25zdCB0b2dnbGVTZWxlY3Rpb24gPSBSZWFjdC51c2VDYWxsYmFjaygoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHtcbiAgICAvLyBFbnN1cmUgdGhlIGNsaWNrZWQgcmVjb3JkIGlzIHNlbGVjdGVkIChpdCBzaG91bGQgYWxyZWFkeSBiZSwgYnV0IGVuc3VyZSBpdClcbiAgICBjb25zdCBzZWxlY3RlZERhdGFzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgPz8gW11cbiAgICBjb25zdCBzZWxlY3RlZElkcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICBjb25zdCBkYXRhSWQgPSBkYXRhLmdldElkKClcbiAgICBcbiAgICAvLyBJZiB0aGlzIHJlY29yZCBpc24ndCBhbHJlYWR5IHNlbGVjdGVkLCBhZGQgaXQgdG8gdGhlIHNlbGVjdGlvblxuICAgIGlmICghc2VsZWN0ZWRJZHMuaW5jbHVkZXMoZGF0YUlkKSkge1xuICAgICAgY29uc3QgdXBkYXRlZFNlbGVjdGVkRGF0YXMgPSBbLi4uc2VsZWN0ZWREYXRhcywgZGF0YV1cbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IHVwZGF0ZWRTZWxlY3RlZERhdGFzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBcbiAgICAgIC8vIFNlbGVjdCByZWNvcmRzIGFuZCBwdWJsaXNoIHNlbGVjdGlvbiBtZXNzYWdlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCB1cGRhdGVkU2VsZWN0ZWREYXRhcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLCB0cnVlKVxuICAgIH1cbiAgICBcbiAgICAvLyBab29tIHRvIHRoZSBjbGlja2VkIHJlY29yZCB3aXRoIHBhZGRpbmcgKGFsd2F5cyBlbmFibGVkIC0gdXNlciB3YW50cyB0byBrZWVwIHRoaXMgYmVoYXZpb3IpXG4gICAgLy8gQlVHLUdSQVBISUNTLTAwMTogWm9vbSBvcGVyYXRpb25zIGZhaWwgd2hlbiBncmFwaGljcyBsYXllciBpcyBkaXNhYmxlZFxuICAgIGlmICghbWFwVmlldyAmJiAhdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdCVUcnLCB7XG4gICAgICAgIGJ1Z0lkOiAnQlVHLUdSQVBISUNTLTAwMScsXG4gICAgICAgIGNhdGVnb3J5OiAnR1JBUEhJQ1MnLFxuICAgICAgICBldmVudDogJ3pvb20tb3BlcmF0aW9uLWZhaWxlZC1ncmFwaGljcy1sYXllci1kaXNhYmxlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcGVyYXRpb246ICdyZXN1bHQtaXRlbS1jbGljay16b29tJyxcbiAgICAgICAgcmVjb3JkSWQ6IGRhdGEuZ2V0SWQoKSxcbiAgICAgICAgZGVzY3JpcHRpb246ICdab29tIG9wZXJhdGlvbiBhdHRlbXB0ZWQgb24gcmVzdWx0IGl0ZW0gY2xpY2sgYnV0IG1hcFZpZXcgaXMgdW5hdmFpbGFibGUgYmVjYXVzZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGlzIGRpc2FibGVkJyxcbiAgICAgICAgd29ya2Fyb3VuZDogJ0VuYWJsZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGluIHdpZGdldCBzZXR0aW5ncycsXG4gICAgICAgIHRhcmdldFJlc29sdXRpb246ICdyMDE5LjAnXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICB6b29tVG9SZWNvcmRzKFtkYXRhXSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgLy8gU2lsZW50bHkgaGFuZGxlIGVycm9ycyAtIHpvb20gaXMgbm9uLWNyaXRpY2FsXG4gICAgfSlcbiAgfSwgW291dHB1dERTLCB3aWRnZXRJZCwgem9vbVRvUmVjb3Jkc10pXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSByZWNvcmQgZnJvbSB0aGUgcmVzdWx0cyBhbmQgc2VsZWN0aW9uLlxuICAgKiBJZiByZW1vdmluZyB0aGUgbGFzdCByZWNvcmQsIGF1dG9tYXRpY2FsbHkgY2xlYXJzIGFsbCByZXN1bHRzXG4gICAqIGJ5IGNhbGxpbmcgdGhlIHRyYXNoIGNhbiBsb2dpYyAoc2FtZSBhcyBjbGlja2luZyBDbGVhciBidXR0b24pLlxuICAgKiBUaGlzIGVuc3VyZXMgdGhlIFVJIGRvZXNuJ3Qgc2hvdyBcIkZlYXR1cmVzIGRpc3BsYXllZDogMCAvIDFcIiB3aGVuIGFsbCByZXN1bHRzIGFyZSByZW1vdmVkLlxuICAgKiBcbiAgICogQHBhcmFtIGRhdGEgLSBUaGUgZmVhdHVyZSBkYXRhIHJlY29yZCB0byByZW1vdmVcbiAgICovXG4gIGNvbnN0IHJlbW92ZVJlY29yZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4ge1xuICAgIGNvbnN0IGRhdGFJZCA9IGRhdGEuZ2V0SWQoKVxuICAgIGNvbnN0IGN1cnJlbnRFeHBhbmRBbGwgPSBleHBhbmRBbGxcbiAgICBcbiAgICAvLyBMb2cgaGFzaCBzdGF0ZSB3aGVuIHJlbW92aW5nIGluZGl2aWR1YWwgcmVjb3JkXG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgICBjb25zdCBoYXNoUGFyYW1zOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge31cbiAgICB1cmxQYXJhbXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgaGFzaFBhcmFtc1trZXldID0gdmFsdWVcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtc3RhcnRlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgY3VycmVudEV4cGFuZEFsbCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICBoYXNoOiBoYXNoLFxuICAgICAgaGFzaFBhcmFtczogaGFzaFBhcmFtcyxcbiAgICAgIGhhc2hQYXJhbXNDb3VudDogT2JqZWN0LmtleXMoaGFzaFBhcmFtcykubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIFNVUkdJQ0FMIEhBU0ggTU9ESUZJQ0FUSU9OOiBSZW1vdmUgdGhlIHJlY29yZCBJRCBmcm9tIGhhc2ggcGFyYW1ldGVyc1xuICAgIC8vIFRoaXMgbWFrZXMgdGhlIGhhc2ggYSBwcmVjaXNlIHJlcHJlc2VudGF0aW9uIG9mIHdoYXQgc2hvdWxkIGJlIHNlbGVjdGVkXG4gICAgY29uc3QgaWRQYXJhbUtleXMgPSBbJ2lkJywgJ3BpbicsICdtYWpvcicsICdwYXJjZWwnLCAnc2hvcnRJZCddIC8vIENvbW1vbiBJRCBwYXJhbWV0ZXIgbmFtZXNcbiAgICBsZXQgaGFzaE1vZGlmaWVkID0gZmFsc2VcblxuICAgIGlkUGFyYW1LZXlzLmZvckVhY2gocGFyYW1LZXkgPT4ge1xuICAgICAgaWYgKHVybFBhcmFtcy5oYXMocGFyYW1LZXkpKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHVybFBhcmFtcy5nZXQocGFyYW1LZXkpIHx8ICcnXG4gICAgICAgIGNvbnN0IGlkcyA9IGN1cnJlbnRWYWx1ZS5zcGxpdCgnLCcpLm1hcChpZCA9PiBpZC50cmltKCkpLmZpbHRlcihpZCA9PiBpZClcblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHNwZWNpZmljIHJlY29yZCBJRCBmcm9tIHRoaXMgcGFyYW1ldGVyXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkSWRzID0gaWRzLmZpbHRlcihpZCA9PiBpZCAhPT0gZGF0YUlkKVxuXG4gICAgICAgIGlmIChmaWx0ZXJlZElkcy5sZW5ndGggIT09IGlkcy5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBJRHMgd2VyZSByZW1vdmVkLCB1cGRhdGUgdGhlIHBhcmFtZXRlclxuICAgICAgICAgIGlmIChmaWx0ZXJlZElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB1cmxQYXJhbXMuc2V0KHBhcmFtS2V5LCBmaWx0ZXJlZElkcy5qb2luKCcsJykpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIElEcyBsZWZ0LCByZW1vdmUgdGhlIHBhcmFtZXRlciBlbnRpcmVseVxuICAgICAgICAgICAgdXJsUGFyYW1zLmRlbGV0ZShwYXJhbUtleSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaGFzaE1vZGlmaWVkID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIEZJWCAocjAxOC44NCk6IFNVUkdJQ0FMIEhBU0ggTU9ESUZJQ0FUSU9OIEZPUiBkYXRhX3MgUEFSQU1FVEVSXG4gICAgLy8gRXhwZXJpZW5jZSBCdWlsZGVyIGNyZWF0ZXMgYSBuZXcgd2lkZ2V0IG91dHB1dCBJRCBpbnN0ZWFkIG9mIHVwZGF0aW5nIHRoZSBleGlzdGluZyBvbmVcbiAgICAvLyBXZSBuZWVkIHRvIG1hbnVhbGx5IHVwZGF0ZSB0aGUgZXhpc3RpbmcgZW50cnkgdG8gcHJldmVudCBkdXBsaWNhdGlvblxuICAgIGlmICh1cmxQYXJhbXMuaGFzKCdkYXRhX3MnKSkge1xuICAgICAgY29uc3QgZGF0YVMgPSB1cmxQYXJhbXMuZ2V0KCdkYXRhX3MnKSB8fCAnJ1xuICAgICAgY29uc3QgZGVjb2RlZERhdGFTID0gZGVjb2RlVVJJQ29tcG9uZW50KGRhdGFTKVxuICAgICAgY29uc3Qgc2VsZWN0aW9ucyA9IGRlY29kZWREYXRhUy5zcGxpdCgnLCcpXG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3Qgd2lkZ2V0IG51bWJlciBmcm9tIHdpZGdldElkIChlLmcuLCBcIndpZGdldF8xMlwiIC0+IFwiMTJcIilcbiAgICAgIGNvbnN0IHdpZGdldE1hdGNoID0gd2lkZ2V0SWQubWF0Y2goL3dpZGdldF8oXFxkKykvKVxuICAgICAgaWYgKHdpZGdldE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IHdpZGdldE51bWJlciA9IHdpZGdldE1hdGNoWzFdXG4gICAgICAgIGNvbnN0IHdpZGdldFBhdHRlcm4gPSBuZXcgUmVnRXhwKGB3aWRnZXRfJHt3aWRnZXROdW1iZXJ9X291dHB1dF9cXFxcZCtgKVxuICAgICAgICBcbiAgICAgICAgLy8gRmluZCBhbmQgdXBkYXRlIHRoZSBzZWxlY3Rpb24gZW50cnkgZm9yIHRoaXMgd2lkZ2V0XG4gICAgICAgIGxldCBkYXRhU01vZGlmaWVkID0gZmFsc2VcbiAgICAgICAgY29uc3QgdXBkYXRlZFNlbGVjdGlvbnMgPSBzZWxlY3Rpb25zLm1hcChzZWxlY3Rpb24gPT4ge1xuICAgICAgICAgIGlmICghc2VsZWN0aW9uLnN0YXJ0c1dpdGgoJ2lkOicpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGlkUGFydCA9IHNlbGVjdGlvbi5zdWJzdHJpbmcoMykgLy8gUmVtb3ZlIFwiaWQ6XCJcbiAgICAgICAgICBjb25zdCBjb2xvbkluZGV4ID0gaWRQYXJ0Lmxhc3RJbmRleE9mKCc6JylcbiAgICAgICAgICBpZiAoY29sb25JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Rpb25cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgZHNJZFBhcnQgPSBpZFBhcnQuc3Vic3RyaW5nKDAsIGNvbG9uSW5kZXgpXG4gICAgICAgICAgY29uc3QgcmVjb3JkSWRzUGFydCA9IGlkUGFydC5zdWJzdHJpbmcoY29sb25JbmRleCArIDEpXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBtYXRjaGVzIG91ciB3aWRnZXQncyBvdXRwdXQgRFMgcGF0dGVyblxuICAgICAgICAgIGxldCBtYXRjaGVzV2lkZ2V0ID0gZmFsc2VcbiAgICAgICAgICBpZiAoZHNJZFBhcnQuaW5jbHVkZXMoJ34nKSkge1xuICAgICAgICAgICAgLy8gQ29tcG91bmQgZm9ybWF0OiBkYXRhU291cmNlXyp+d2lkZ2V0X1hYX291dHB1dF8qXG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRzSWRQYXJ0LnNwbGl0KCd+JylcbiAgICAgICAgICAgIG1hdGNoZXNXaWRnZXQgPSBwYXJ0cy5zb21lKHBhcnQgPT4gcGFydC5tYXRjaCh3aWRnZXRQYXR0ZXJuKSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2ltcGxlIGZvcm1hdDogd2lkZ2V0X1hYX291dHB1dF8qXG4gICAgICAgICAgICBtYXRjaGVzV2lkZ2V0ID0gZHNJZFBhcnQubWF0Y2god2lkZ2V0UGF0dGVybikgIT09IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKG1hdGNoZXNXaWRnZXQpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgc3BlY2lmaWMgcmVjb3JkIElEIGZyb20gdGhpcyBlbnRyeVxuICAgICAgICAgICAgY29uc3QgcmVjb3JkSWRzID0gcmVjb3JkSWRzUGFydC5zcGxpdCgnLCcpLm1hcChpZCA9PiBpZC50cmltKCkpLmZpbHRlcihpZCA9PiBpZClcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkUmVjb3JkSWRzID0gcmVjb3JkSWRzLmZpbHRlcihpZCA9PiBpZCAhPT0gZGF0YUlkKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZmlsdGVyZWRSZWNvcmRJZHMubGVuZ3RoICE9PSByZWNvcmRJZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGRhdGFTTW9kaWZpZWQgPSB0cnVlXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ2RhdGFfcy1yZWNvcmQtcmVtb3ZlZCcsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxSZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBuZXdSZWNvcmRDb3VudDogZmlsdGVyZWRSZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGRzSWRQYXJ0LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gSWYgbm8gcmVjb3JkcyByZW1haW4sIHJldHVybiBlbXB0eSBzdHJpbmcgKHdpbGwgYmUgZmlsdGVyZWQgb3V0KVxuICAgICAgICAgICAgICBpZiAoZmlsdGVyZWRSZWNvcmRJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFJlY29uc3RydWN0IHRoZSBzZWxlY3Rpb24gd2l0aCB1cGRhdGVkIHJlY29yZCBJRHNcbiAgICAgICAgICAgICAgcmV0dXJuIGBpZDoke2RzSWRQYXJ0fToke2ZpbHRlcmVkUmVjb3JkSWRzLmpvaW4oJywnKX1gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBzZWxlY3Rpb25cbiAgICAgICAgfSkuZmlsdGVyKHMgPT4gcykgLy8gUmVtb3ZlIGVtcHR5IHN0cmluZ3NcbiAgICAgICAgXG4gICAgICAgIGlmIChkYXRhU01vZGlmaWVkKSB7XG4gICAgICAgICAgaWYgKHVwZGF0ZWRTZWxlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHVybFBhcmFtcy5zZXQoJ2RhdGFfcycsIGVuY29kZVVSSUNvbXBvbmVudCh1cGRhdGVkU2VsZWN0aW9ucy5qb2luKCcsJykpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBObyBzZWxlY3Rpb25zIHJlbWFpbiwgcmVtb3ZlIGRhdGFfcyBlbnRpcmVseVxuICAgICAgICAgICAgdXJsUGFyYW1zLmRlbGV0ZSgnZGF0YV9zJylcbiAgICAgICAgICB9XG4gICAgICAgICAgaGFzaE1vZGlmaWVkID0gdHJ1ZVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnZGF0YV9zLXN1cmdpY2FsbHktbW9kaWZpZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgICAgIG9yaWdpbmFsU2VsZWN0aW9uQ291bnQ6IHNlbGVjdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgbmV3U2VsZWN0aW9uQ291bnQ6IHVwZGF0ZWRTZWxlY3Rpb25zLmxlbmd0aCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaGFzaE1vZGlmaWVkKSB7XG4gICAgICAvLyBVcGRhdGUgaGFzaCBzdXJnaWNhbGx5XG4gICAgICBjb25zdCBuZXdIYXNoID0gdXJsUGFyYW1zLnRvU3RyaW5nKClcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgYCMke25ld0hhc2h9YClcblxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ2hhc2gtc3VyZ2ljYWxseS1tb2RpZmllZC1pZC1yZW1vdmVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICBvcmlnaW5hbEhhc2g6IGhhc2gsXG4gICAgICAgIG5ld0hhc2g6IG5ld0hhc2gsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBGSVggKHIwMTguOTYpOiBSZW1vdmVkIG1hbnVhbCByZW1vdmFsIHRyYWNraW5nIC0gbm8gbG9uZ2VyIG5lZWRlZFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmFsLXVwZGF0aW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIG5vdGU6ICdyMDE4Ljk2OiBObyBtYW51YWwgcmVtb3ZhbCB0cmFja2luZyAtIGR1cGxpY2F0ZSBkZXRlY3Rpb24gaGFuZGxlcyB0aGlzJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBSZW1vdmUgZnJvbSBleHBhbnNpb24gc3RhdGVzIG1hcFxuICAgIHNldEl0ZW1FeHBhbmRTdGF0ZXMocHJldk1hcCA9PiB7XG4gICAgICBjb25zdCBuZXdNYXAgPSBuZXcgTWFwKHByZXZNYXApXG4gICAgICBuZXdNYXAuZGVsZXRlKGRhdGFJZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICBldmVudDogJ2l0ZW1FeHBhbmRTdGF0ZXMtY2xlYW5lZC11cCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgcmVtYWluaW5nQ291bnQ6IG5ld01hcC5zaXplLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gbmV3TWFwXG4gICAgfSlcbiAgICBcbiAgICAvLyBGSVggKHIwMTguOTQpOiBSZW1vdmVkIHJlbW92ZWRSZWNvcmRJZHMgdHJhY2tpbmcgLSBxdWVyeURhdGEgbm93IHVwZGF0ZWQgZGlyZWN0bHlcbiAgICAvLyBVcGRhdGUgcXVlcnlEYXRhIHRvIGZpbHRlciBvdXQgdGhlIHJlbW92ZWQgcmVjb3JkXG4gICAgc2V0UXVlcnlEYXRhKHByZXZEYXRhID0+IHtcbiAgICAgIGlmICghcHJldkRhdGEpIHJldHVybiBwcmV2RGF0YVxuICAgICAgY29uc3QgZmlsdGVyZWRSZWNvcmRzID0gcHJldkRhdGEucmVjb3Jkcy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gcmVjb3JkLmdldElkKCkgIT09IGRhdGFJZClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnlEYXRhLXVwZGF0ZWQtYWZ0ZXItcmVtb3ZhbCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgcmVjb3Jkc0NvdW50QmVmb3JlOiBwcmV2RGF0YS5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVjb3Jkc0NvdW50QWZ0ZXI6IGZpbHRlcmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gRklYIChyMDE4Ljk0KTogQ2hlY2sgaWYgdGhpcyB3YXMgdGhlIGxhc3QgcmVjb3JkIC0gaWYgc28sIG5hdmlnYXRlIGJhY2tcbiAgICAgIGlmIChmaWx0ZXJlZFJlY29yZHMubGVuZ3RoID09PSAwICYmIHByZXZEYXRhLnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ2xhc3QtcmVjb3JkLXJlbW92ZWQtbmF2aWdhdGluZy1iYWNrJyxcbiAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgLy8gVXNlIHNldFRpbWVvdXQgdG8gYXZvaWQgc2V0U3RhdGUgZHVyaW5nIHJlbmRlclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG9uTmF2QmFjayh0cnVlKSwgMClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucHJldkRhdGEsXG4gICAgICAgIHJlY29yZHM6IGZpbHRlcmVkUmVjb3Jkc1xuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gRklYIChyMDE4Ljg1KTogRElBR05PU1RJQyAtIEdyYXBoaWNzIGNvdW50IEJFRk9SRSByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnNcbiAgICBjb25zdCBncmFwaGljc0NvdW50QmVmb3JlT3JpZ2luUmVtb3ZhbCA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMFxuICAgIGNvbnN0IGdyYXBoaWNzSWRzQmVmb3JlT3JpZ2luUmVtb3ZhbCA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5tYXAoZyA9PiBnLmF0dHJpYnV0ZXM/LnJlY29yZElkKS5zbGljZSgwLCAxMCkgfHwgW11cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1CRUZPUkUtcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICBncmFwaGljc0NvdW50QmVmb3JlOiBncmFwaGljc0NvdW50QmVmb3JlT3JpZ2luUmVtb3ZhbCxcbiAgICAgIGdyYXBoaWNzSWRzQmVmb3JlOiBncmFwaGljc0lkc0JlZm9yZU9yaWdpblJlbW92YWwsXG4gICAgICB3aWxsUGFzc0dyYXBoaWNzTGF5ZXI6IGZhbHNlLCAvLyBGSVg6IENoYW5nZWQgdG8gZmFsc2UgdG8gcHJldmVudCBncmFwaGljcyBtYW5pcHVsYXRpb24gaGVyZVxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBBTFdBWVMgcmVtb3ZlIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMgKHNhbWUgYXMgUmVtb3ZlIG1vZGUpXG4gICAgLy8gVGhpcyBwcm9wZXJseSByZW1vdmVzIHJlY29yZHMgZnJvbSB0aGUgbWFwIHNlbGVjdGlvbiwgaGFuZGxpbmcgc2luZ2xlIG9yIG11bHRpcGxlIG9yaWdpbiBzb3VyY2VzXG4gICAgLy8gRklYIChyMDE4Ljg1KTogRE9OJ1QgcGFzcyBncmFwaGljcyBsYXllciBwYXJhbWV0ZXJzIGhlcmUgLSBsZXQgZ3JhcGhpY3MgYmUgbWFuYWdlZCBieSBzZWxlY3Rpb24gc3luY1xuICAgIC8vIFRoZSBwcmV2aW91cyBiZWhhdmlvciAocGFzc2luZyBncmFwaGljc0xheWVyKSB3YXMgY2F1c2luZyB0aGUgY291bnQgdG8ganVtcCBmcm9tIDEyNCB0byAxMzZcbiAgICAvLyBiZWNhdXNlIGdyYXBoaWNzIHdlcmUgYmVpbmcgcmVtb3ZlZCBoZXJlLCB0aGVuIHJlLWFkZGVkIGR1cmluZyBzZWxlY3Rpb24gc3luY2hyb25pemF0aW9uXG4gICAgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKFxuICAgICAgd2lkZ2V0SWQsIFxuICAgICAgW2RhdGFdLCBcbiAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIC8vIE5PVCBwYXNzaW5nIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgb3IgZ3JhcGhpY3NMYXllclxuICAgICAgLy8gR3JhcGhpY3Mgd2lsbCBiZSBzeW5jZWQgdGhyb3VnaCBub3JtYWwgc2VsZWN0aW9uIGZsb3dcbiAgICApXG4gICAgXG4gICAgLy8gRklYIChyMDE4Ljg1KTogRElBR05PU1RJQyAtIEdyYXBoaWNzIGNvdW50IEFGVEVSIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgIGNvbnN0IGdyYXBoaWNzQ291bnRBZnRlck9yaWdpblJlbW92YWwgPSBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubGVuZ3RoIHx8IDBcbiAgICBjb25zdCBncmFwaGljc0lkc0FmdGVyT3JpZ2luUmVtb3ZhbCA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5tYXAoZyA9PiBnLmF0dHJpYnV0ZXM/LnJlY29yZElkKS5zbGljZSgwLCAxMCkgfHwgW11cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1BRlRFUi1yZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIGdyYXBoaWNzQ291bnRCZWZvcmU6IGdyYXBoaWNzQ291bnRCZWZvcmVPcmlnaW5SZW1vdmFsLFxuICAgICAgZ3JhcGhpY3NDb3VudEFmdGVyOiBncmFwaGljc0NvdW50QWZ0ZXJPcmlnaW5SZW1vdmFsLFxuICAgICAgZ3JhcGhpY3NJZHNBZnRlcjogZ3JhcGhpY3NJZHNBZnRlck9yaWdpblJlbW92YWwsXG4gICAgICBncmFwaGljc0NoYW5nZWQ6IGdyYXBoaWNzQ291bnRBZnRlck9yaWdpblJlbW92YWwgIT09IGdyYXBoaWNzQ291bnRCZWZvcmVPcmlnaW5SZW1vdmFsLFxuICAgICAgZ3JhcGhpY3NDaGFuZ2VkQnk6IGdyYXBoaWNzQ291bnRBZnRlck9yaWdpblJlbW92YWwgLSBncmFwaGljc0NvdW50QmVmb3JlT3JpZ2luUmVtb3ZhbCxcbiAgICAgIGV4cGVjdGVkOiAnR3JhcGhpY3Mgc2hvdWxkIE5PVCBjaGFuZ2UgaGVyZSAobm8gZ3JhcGhpY3MgbGF5ZXIgcGFyYW1zIHBhc3NlZCknLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBGSVggKHIwMTguOTEpOiBESUFHTk9TVElDIC0gQ2hlY2sgd2h5IG1hbnVhbCBncmFwaGljcyByZW1vdmFsIGNvbmRpdGlvbiBpc24ndCBtZXRcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1jaGVja2luZy1tYW51YWwtZ3JhcGhpY3MtcmVtb3ZhbC1jb25kaXRpb24nLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ6IHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXIsXG4gICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXI/LmlkLFxuICAgICAgZ3JhcGhpY3NMYXllckdyYXBoaWNzQ291bnQ6IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMCxcbiAgICAgIGNvbmRpdGlvbldpbGxQYXNzOiAhISh1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIGdyYXBoaWNzTGF5ZXIpLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBGSVggKHIwMTguOTApOiBNYW51YWxseSByZW1vdmUgZ3JhcGhpY3MgZnJvbSBsYXllciBhZnRlciByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnNcbiAgICAvLyBTaW5jZSB3ZSBkb24ndCBwYXNzIGdyYXBoaWNzIGxheWVyIHBhcmFtcyB0byByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMgKHRvIGF2b2lkIFxuICAgIC8vIHRoZSAxMzYgZHVwbGljYXRlIGlzc3VlKSwgd2UgbmVlZCB0byBtYW51YWxseSByZW1vdmUgdGhlIGdyYXBoaWMgaGVyZVxuICAgIC8vIFRoaXMgaXMgc2FmZSBub3cgYmVjYXVzZSByMDE4Ljg5IGZpeGVkIHRoZSBxdWVyeSBzd2l0Y2ggcmUtc2VsZWN0aW9uIGlzc3VlXG4gICAgaWYgKHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgZ3JhcGhpY3NMYXllcikge1xuICAgICAgY29uc3QgZ3JhcGhpY3NDb3VudEJlZm9yZU1hbnVhbFJlbW92YWwgPSBncmFwaGljc0xheWVyLmdyYXBoaWNzLmxlbmd0aFxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1yZW1vdmFsLW1hbnVhbC1ncmFwaGljcy1zeW5jLXN0YXJ0JyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICBncmFwaGljc0NvdW50QmVmb3JlOiBncmFwaGljc0NvdW50QmVmb3JlTWFudWFsUmVtb3ZhbCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICByZW1vdmVIaWdobGlnaHRHcmFwaGljcyhncmFwaGljc0xheWVyLCBbZGF0YUlkXSlcbiAgICAgIFxuICAgICAgY29uc3QgZ3JhcGhpY3NDb3VudEFmdGVyTWFudWFsUmVtb3ZhbCA9IGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MubGVuZ3RoXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3gtYnV0dG9uLXJlbW92YWwtbWFudWFsLWdyYXBoaWNzLXN5bmMtY29tcGxldGUnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgIGdyYXBoaWNzQ291bnRCZWZvcmU6IGdyYXBoaWNzQ291bnRCZWZvcmVNYW51YWxSZW1vdmFsLFxuICAgICAgICBncmFwaGljc0NvdW50QWZ0ZXI6IGdyYXBoaWNzQ291bnRBZnRlck1hbnVhbFJlbW92YWwsXG4gICAgICAgIGdyYXBoaWNzUmVtb3ZlZDogZ3JhcGhpY3NDb3VudEJlZm9yZU1hbnVhbFJlbW92YWwgLSBncmFwaGljc0NvdW50QWZ0ZXJNYW51YWxSZW1vdmFsLFxuICAgICAgICBleHBlY3RlZFJlbW92ZWQ6IDEsXG4gICAgICAgIHJlbW92YWxNYXRjaGVzOiAoZ3JhcGhpY3NDb3VudEJlZm9yZU1hbnVhbFJlbW92YWwgLSBncmFwaGljc0NvdW50QWZ0ZXJNYW51YWxSZW1vdmFsKSA9PT0gMSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGSVggKHIwMTguOTEpOiBMb2cgd2hlbiBjb25kaXRpb24gaXMgTk9UIG1ldCB0byB1bmRlcnN0YW5kIHdoeVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1tYW51YWwtZ3JhcGhpY3MtcmVtb3ZhbC1TS0lQUEVEJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICByZWFzb246ICF1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ID8gJ3VzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgaXMgZmFsc2UnIDpcbiAgICAgICAgICAgICAgICAhZ3JhcGhpY3NMYXllciA/ICdncmFwaGljc0xheWVyIGlzIG51bGwvdW5kZWZpbmVkJyA6XG4gICAgICAgICAgICAgICAgJ3Vua25vd24nLFxuICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXIsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRElBR05PU1RJQyBMT0dHSU5HOiBGdWxsIHN0YXRlIEJFRk9SRSByZW1vdmFsXG4gICAgY29uc3Qgb3V0cHV0RFNTZWxlY3RlZEJlZm9yZSA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW11cbiAgICBjb25zdCBvdXRwdXREU1NlbGVjdGVkSWRzQmVmb3JlID0gb3V0cHV0RFNTZWxlY3RlZEJlZm9yZS5tYXAociA9PiByLmdldElkKCkpXG4gICAgY29uc3QgYWNjdW11bGF0ZWRSZWNvcmRzSWRzQmVmb3JlID0gYWNjdW11bGF0ZWRSZWNvcmRzPy5tYXAociA9PiByLmdldElkKCkpIHx8IFtdXG4gICAgXG4gICAgLy8gRklYIChyMDE4LjgxKTogRGV0YWlsZWQgZ3JhcGhpY3MgYXR0cmlidXRlIGluc3BlY3Rpb24gdG8gdW5kZXJzdGFuZCB3aHkgSURzIGFyZSBudWxsXG4gICAgY29uc3QgZ3JhcGhpY3NMYXllcklkc0JlZm9yZTogKHN0cmluZyB8IG51bGwpW10gPSBbXVxuICAgIGNvbnN0IGZpcnN0RmV3R3JhcGhpY3NBdHRyczogYW55W10gPSBbXVxuICAgIGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5mb3JFYWNoKChnLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGluZGV4IDwgMykge1xuICAgICAgICAvLyBMb2cgZmlyc3QgMyBncmFwaGljcycgZnVsbCBhdHRyaWJ1dGVzIGZvciBkaWFnbm9zaXNcbiAgICAgICAgZmlyc3RGZXdHcmFwaGljc0F0dHJzLnB1c2goe1xuICAgICAgICAgIGluZGV4LFxuICAgICAgICAgIGhhc0F0dHJpYnV0ZXM6ICEhZy5hdHRyaWJ1dGVzLFxuICAgICAgICAgIGF0dHJpYnV0ZXM6IGcuYXR0cmlidXRlcyxcbiAgICAgICAgICBhdHRyaWJ1dGVLZXlzOiBnLmF0dHJpYnV0ZXMgPyBPYmplY3Qua2V5cyhnLmF0dHJpYnV0ZXMpIDogW11cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGdyYXBoaWNzTGF5ZXJJZHNCZWZvcmUucHVzaChnLmF0dHJpYnV0ZXM/LnJlY29yZElkIHx8IG51bGwpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1iZWZvcmUtc3RhdGUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudDogb3V0cHV0RFNTZWxlY3RlZEJlZm9yZS5sZW5ndGgsXG4gICAgICBvdXRwdXREU1NlbGVjdGVkSWRzOiBvdXRwdXREU1NlbGVjdGVkSWRzQmVmb3JlLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNJZHM6IGFjY3VtdWxhdGVkUmVjb3Jkc0lkc0JlZm9yZSxcbiAgICAgIGdyYXBoaWNzTGF5ZXJDb3VudDogZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgZ3JhcGhpY3NMYXllcklkczogZ3JhcGhpY3NMYXllcklkc0JlZm9yZS5zbGljZSgwLCAxMTApLFxuICAgICAgZmlyc3RGZXdHcmFwaGljc0F0dHJzLCAvLyBORVc6IGluc3BlY3Qgd2hhdCBhdHRyaWJ1dGVzIGFyZSBhY3R1YWxseSB0aGVyZVxuICAgICAgYWxsU291cmNlc01hdGNoOiBvdXRwdXREU1NlbGVjdGVkSWRzQmVmb3JlLmxlbmd0aCA9PT0gYWNjdW11bGF0ZWRSZWNvcmRzSWRzQmVmb3JlLmxlbmd0aCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZElkc0JlZm9yZS5sZW5ndGggPT09IGdyYXBoaWNzTGF5ZXJJZHNCZWZvcmUubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG91dHB1dERTU2VsZWN0ZWRJZHNCZWZvcmUuc29ydCgpKSA9PT0gSlNPTi5zdHJpbmdpZnkoYWNjdW11bGF0ZWRSZWNvcmRzSWRzQmVmb3JlLnNvcnQoKSksXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFVwZGF0ZSBvdXRwdXREUyBzZWxlY3Rpb25cbiAgICBjb25zdCBzZWxlY3RlZERhdGFzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgPz8gW11cbiAgICBjb25zdCB1cGRhdGVkU2VsZWN0ZWREYXRhcyA9IHNlbGVjdGVkRGF0YXMuZmlsdGVyKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSAhPT0gZGF0YUlkKVxuICAgIGNvbnN0IHJlY29yZElkcyA9IHVwZGF0ZWRTZWxlY3RlZERhdGFzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgXG4gICAgLy8gREVCVUc6IExvZyBzdGF0ZSBhZnRlciByZW1vdmFsXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1zdGF0ZS1hZnRlci1yZW1vdmFsJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICBvdXRwdXREU1NlbGVjdGVkQmVmb3JlUmVtb3ZhbDogc2VsZWN0ZWREYXRhcy5sZW5ndGgsXG4gICAgICBvdXRwdXREU1NlbGVjdGVkQWZ0ZXJSZW1vdmFsOiB1cGRhdGVkU2VsZWN0ZWREYXRhcy5sZW5ndGgsXG4gICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHF1ZXJ5RGF0YVJlY29yZHNDb3VudDogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICBub3RlOiAncjAxOC45NDogUmVjb3JkcyBzdGF5IGluIHN5bmMgLSBubyByZW1vdmVkUmVjb3JkSWRzIHRyYWNraW5nJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gVXBkYXRlIG91dHB1dERTIHNlbGVjdGlvblxuICAgIGlmICh0eXBlb2Ygb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCB1cGRhdGVkU2VsZWN0ZWREYXRhcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgIH1cbiAgICBcbiAgICAvLyBJTVBPUlRBTlQ6IFB1Ymxpc2ggY3VzdG9tIGV2ZW50IHNvIHdpZGdldCBjYW4gdXBkYXRlIGxhc3RTZWxlY3Rpb24gc3RhdGVcbiAgICAvLyBUaGlzIGVuc3VyZXMgcmVzdG9yYXRpb24gcmVzdG9yZXMgdGhlIGNvcnJlY3QgKHVwZGF0ZWQpIGNvdW50XG4gICAgY29uc3Qgb3JpZ2luRFMgPSAob3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSkuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBjb25zdCBkYXRhU291cmNlSWQgPSBvcmlnaW5EUz8uaWRcbiAgICBjb25zdCBzZWxlY3Rpb25FdmVudCA9IG5ldyBDdXN0b21FdmVudCgncXVlcnlzaW1wbGUtc2VsZWN0aW9uLWNoYW5nZWQnLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlY29yZElkcywgLy8gVXBkYXRlZCByZWNvcmQgSURzICh3aXRoIHJlbW92ZWQgcmVjb3JkIGV4Y2x1ZGVkKVxuICAgICAgICBkYXRhU291cmNlSWQsXG4gICAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHNlbGVjdGlvbkV2ZW50KVxuICAgIFxuICAgIC8vIERJQUdOT1NUSUMgTE9HR0lORzogRnVsbCBzdGF0ZSBBRlRFUiByZW1vdmFsIChiZWZvcmUgc3luYylcbiAgICBjb25zdCBvdXRwdXREU1NlbGVjdGVkQWZ0ZXIgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdIHx8IFtdXG4gICAgY29uc3Qgb3V0cHV0RFNTZWxlY3RlZElkc0FmdGVyID0gb3V0cHV0RFNTZWxlY3RlZEFmdGVyLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICBcbiAgICAvLyBGSVggKHIwMTguODEpOiBEZXRhaWxlZCBncmFwaGljcyBhdHRyaWJ1dGUgaW5zcGVjdGlvbiB0byB1bmRlcnN0YW5kIHdoeSBJRHMgYXJlIG51bGxcbiAgICBjb25zdCBncmFwaGljc0xheWVySWRzQWZ0ZXI6IChzdHJpbmcgfCBudWxsKVtdID0gW11cbiAgICBjb25zdCBmaXJzdEZld0dyYXBoaWNzQXR0cnNBZnRlcjogYW55W10gPSBbXVxuICAgIGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5mb3JFYWNoKChnLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGluZGV4IDwgMykge1xuICAgICAgICAvLyBMb2cgZmlyc3QgMyBncmFwaGljcycgZnVsbCBhdHRyaWJ1dGVzIGZvciBkaWFnbm9zaXNcbiAgICAgICAgZmlyc3RGZXdHcmFwaGljc0F0dHJzQWZ0ZXIucHVzaCh7XG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgaGFzQXR0cmlidXRlczogISFnLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgYXR0cmlidXRlczogZy5hdHRyaWJ1dGVzLFxuICAgICAgICAgIGF0dHJpYnV0ZUtleXM6IGcuYXR0cmlidXRlcyA/IE9iamVjdC5rZXlzKGcuYXR0cmlidXRlcykgOiBbXVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZ3JhcGhpY3NMYXllcklkc0FmdGVyLnB1c2goZy5hdHRyaWJ1dGVzPy5yZWNvcmRJZCB8fCBudWxsKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3gtYnV0dG9uLXJlbW92YWwtYWZ0ZXItc3RhdGUtYmVmb3JlLXN5bmMnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudDogb3V0cHV0RFNTZWxlY3RlZEFmdGVyLmxlbmd0aCxcbiAgICAgIG91dHB1dERTU2VsZWN0ZWRJZHM6IG91dHB1dERTU2VsZWN0ZWRJZHNBZnRlcixcbiAgICAgIGdyYXBoaWNzTGF5ZXJDb3VudDogZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgZ3JhcGhpY3NMYXllcklkczogZ3JhcGhpY3NMYXllcklkc0FmdGVyLnNsaWNlKDAsIDExMCksXG4gICAgICBmaXJzdEZld0dyYXBoaWNzQXR0cnNBZnRlciwgLy8gTkVXOiBpbnNwZWN0IHdoYXQgYXR0cmlidXRlcyBhcmUgYWN0dWFsbHkgdGhlcmVcbiAgICAgIHJlbW92ZWRGcm9tT3V0cHV0RFM6IG91dHB1dERTU2VsZWN0ZWRJZHNBZnRlci5sZW5ndGggPCBvdXRwdXREU1NlbGVjdGVkSWRzQmVmb3JlLmxlbmd0aCxcbiAgICAgIHJlbW92ZWRGcm9tR3JhcGhpY3M6IGdyYXBoaWNzTGF5ZXJJZHNBZnRlci5sZW5ndGggPCBncmFwaGljc0xheWVySWRzQmVmb3JlLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gRklYIChyMDE4Ljk3KTogU3luYyBhY2N1bXVsYXRlZFJlY29yZHMgaW4gQUxMIG1vZGVzIGZvciB1bml2ZXJzYWwgdGFiIGNvdW50IHRyYWNraW5nXG4gICAgLy8gYWNjdW11bGF0ZWRSZWNvcmRzIGlzIG5vdyB0aGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCBmb3IgZGlzcGxheWVkIHJlY29yZHMgYWNyb3NzIGFsbCBtb2Rlc1xuICAgIC8vIFRoaXMgZW5zdXJlcyB0YWIgY291bnQgdXBkYXRlcyBjb3JyZWN0bHkgd2hlbiByZWNvcmRzIGFyZSByZW1vdmVkIGluIEFOWSBtb2RlIChOZXcsIEFkZCwgUmVtb3ZlKVxuICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgLy8gR2V0IHRoZSBhY3R1YWwgc2VsZWN0ZWQgcmVjb3JkcyBmcm9tIG91dHB1dERTIChzaW5nbGUgc291cmNlIG9mIHRydXRoKVxuICAgICAgLy8gVGhpcyBpcyBjYWxsZWQgQUZURVIgb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzKCkgYWJvdmUsIHNvIGl0IHJlZmxlY3RzIHRoZSByZW1vdmFsXG4gICAgICBjb25zdCBhY3R1YWxseVNlbGVjdGVkUmVjb3JkcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW11cbiAgICAgIFxuICAgICAgLy8gU3luYyBhY2N1bXVsYXRlZFJlY29yZHMgd2l0aCB3aGF0J3MgYWN0dWFsbHkgc2VsZWN0ZWRcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyByZW1vdmVkIHJlY29yZHMgYXJlIGltbWVkaWF0ZWx5IGV4Y2x1ZGVkIGZyb20gYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIEJ1aWxkIGEgU2V0IG9mIGFjdHVhbGx5IHNlbGVjdGVkIElEcyBmb3IgZmFzdCBsb29rdXBcbiAgICAgICAgY29uc3QgYWN0dWFsbHlTZWxlY3RlZElkcyA9IG5ldyBTZXQoYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKSlcbiAgICAgICAgXG4gICAgICAgIC8vIEZpbHRlciBhY2N1bXVsYXRlZFJlY29yZHMgdG8gb25seSBpbmNsdWRlIHJlY29yZHMgdGhhdCBhcmUgYWN0dWFsbHkgc2VsZWN0ZWRcbiAgICAgICAgY29uc3Qgc3luY2VkUmVjb3JkcyA9IGFjY3VtdWxhdGVkUmVjb3Jkcy5maWx0ZXIocmVjb3JkID0+IFxuICAgICAgICAgIGFjdHVhbGx5U2VsZWN0ZWRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzeW5jZWRSZWNvcmRzSWRzID0gc3luY2VkUmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3gtYnV0dG9uLWltbWVkaWF0ZS1zeW5jLXdpdGgtb3V0cHV0ZHMnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QmVmb3JlOiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0lkc0JlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzSWRzQmVmb3JlLFxuICAgICAgICAgIGFjdHVhbGx5U2VsZWN0ZWRDb3VudDogYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIGFjdHVhbGx5U2VsZWN0ZWRJZHM6IG91dHB1dERTU2VsZWN0ZWRJZHNBZnRlcixcbiAgICAgICAgICBzeW5jZWRSZWNvcmRzQ291bnQ6IHN5bmNlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIHN5bmNlZFJlY29yZHNJZHM6IHN5bmNlZFJlY29yZHNJZHMsXG4gICAgICAgICAgcmVjb3Jkc1JlbW92ZWQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggLSBzeW5jZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICByZW1vdmVkSWRzOiBhY2N1bXVsYXRlZFJlY29yZHNJZHNCZWZvcmUuZmlsdGVyKGlkID0+ICFzeW5jZWRSZWNvcmRzSWRzLmluY2x1ZGVzKGlkKSksXG4gICAgICAgICAgbm90ZTogJ3IwMTguOTc6IGltbWVkaWF0ZS1zeW5jLWluLWFsbC1tb2Rlcy1mb3ItdW5pdmVyc2FsLXRhYi1jb3VudCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgYWNjdW11bGF0ZWRSZWNvcmRzIHRvIG1hdGNoIHJlYWxpdHkgKGltbWVkaWF0ZSBzeW5jLCBub3QgbGF6eSlcbiAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2Uoc3luY2VkUmVjb3JkcylcbiAgICAgICAgXG4gICAgICAgIC8vIERJQUdOT1NUSUMgTE9HR0lORzogRnVsbCBzdGF0ZSBBRlRFUiBzeW5jXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1hZnRlci1zeW5jLXN0YXRlJyxcbiAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEFmdGVyOiBzeW5jZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNJZHNBZnRlcjogc3luY2VkUmVjb3Jkc0lkcyxcbiAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkQ291bnQ6IG91dHB1dERTU2VsZWN0ZWRBZnRlci5sZW5ndGgsXG4gICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZElkczogb3V0cHV0RFNTZWxlY3RlZElkc0FmdGVyLFxuICAgICAgICAgIGdyYXBoaWNzTGF5ZXJDb3VudDogZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIGdyYXBoaWNzTGF5ZXJJZHM6IGdyYXBoaWNzTGF5ZXJJZHNBZnRlcixcbiAgICAgICAgICBhbGxTb3VyY2VzTWF0Y2g6IHN5bmNlZFJlY29yZHNJZHMubGVuZ3RoID09PSBvdXRwdXREU1NlbGVjdGVkSWRzQWZ0ZXIubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBzeW5jZWRSZWNvcmRzSWRzLmxlbmd0aCA9PT0gZ3JhcGhpY3NMYXllcklkc0FmdGVyLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoc3luY2VkUmVjb3Jkc0lkcy5zb3J0KCkpID09PSBKU09OLnN0cmluZ2lmeShvdXRwdXREU1NlbGVjdGVkSWRzQWZ0ZXIuc29ydCgpKSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBJZiBhY2N1bXVsYXRlZFJlY29yZHMgaXMgZW1wdHkgYnV0IG91dHB1dERTIGhhcyBzZWxlY3Rpb24sIHN5bmMgaXRcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd4LWJ1dHRvbi1zeW5jaW5nLWVtcHR5LWFjY3VtdWxhdGVkLXdpdGgtb3V0cHV0ZHMnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICAgIGFjdHVhbGx5U2VsZWN0ZWRDb3VudDogYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIG5vdGU6ICdhY2N1bXVsYXRlZFJlY29yZHMtd2FzLWVtcHR5LXN5bmNpbmctZnJvbS1vdXRwdXRkcycsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQm90aCBhcmUgZW1wdHkgLSBlbnN1cmUgYWNjdW11bGF0ZWRSZWNvcmRzIGlzIGVtcHR5XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAneC1idXR0b24tYm90aC1lbXB0eS1zeW5jaW5nJyxcbiAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgICBub3RlOiAnYm90aC1hY2N1bXVsYXRlZFJlY29yZHMtYW5kLW91dHB1dGRzLWFyZS1lbXB0eScsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBGSVggKHIwMTguOTYpOiBSZW1vdmVkIG1hbnVhbCBtb2RpZmljYXRpb24gZmxhZyAtIG5vIGxvbmdlciBuZWVkZWRcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1jb21wbGV0ZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgbm90ZTogJ3IwMTguOTY6IE5vIG1hbnVhbCByZW1vdmFsIHRyYWNraW5nIG5lZWRlZCcsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIEZJWCAocjAxOC44NSk6IEZJTkFMIERJQUdOT1NUSUMgLSBHcmFwaGljcyBjb3VudCBhZnRlciBlbnRpcmUgcmVtb3ZhbCBmbG93XG4gICAgLy8gVGhpcyBoYXBwZW5zIEFGVEVSIGFsbCBzeW5jIGxvZ2ljLCBzbyB3ZSBjYW4gc2VlIHRoZSBmaW5hbCBzdGF0ZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgZmluYWxHcmFwaGljc0NvdW50ID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwXG4gICAgICBjb25zdCBmaW5hbEdyYXBoaWNzSWRzID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lm1hcChnID0+IGcuYXR0cmlidXRlcz8ucmVjb3JkSWQpIHx8IFtdXG4gICAgICBjb25zdCBmaW5hbEdyYXBoaWNzSWRzU2FtcGxlID0gZmluYWxHcmFwaGljc0lkcy5zbGljZSgwLCAxMClcbiAgICAgIFxuICAgICAgLy8gQ291bnQgZHVwbGljYXRlcyBpbiBmaW5hbCBncmFwaGljc1xuICAgICAgY29uc3QgZ3JhcGhpY3NJZENvdW50cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KClcbiAgICAgIGZpbmFsR3JhcGhpY3NJZHMuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgIGlmIChpZCkge1xuICAgICAgICAgIGdyYXBoaWNzSWRDb3VudHMuc2V0KGlkLCAoZ3JhcGhpY3NJZENvdW50cy5nZXQoaWQpIHx8IDApICsgMSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGNvbnN0IGR1cGxpY2F0ZUlkcyA9IEFycmF5LmZyb20oZ3JhcGhpY3NJZENvdW50cy5lbnRyaWVzKCkpXG4gICAgICAgIC5maWx0ZXIoKFtfLCBjb3VudF0pID0+IGNvdW50ID4gMSlcbiAgICAgICAgLm1hcCgoW2lkLCBjb3VudF0pID0+ICh7IGlkLCBjb3VudCB9KSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZhbC1GSU5BTC1ncmFwaGljcy1zdGF0ZScsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgZ3JhcGhpY3NDb3VudEJlZm9yZUVudGlyZUZsb3c6IGdyYXBoaWNzQ291bnRCZWZvcmVPcmlnaW5SZW1vdmFsLFxuICAgICAgICBncmFwaGljc0NvdW50QWZ0ZXJFbnRpcmVGbG93OiBmaW5hbEdyYXBoaWNzQ291bnQsXG4gICAgICAgIGdyYXBoaWNzSWRzU2FtcGxlOiBmaW5hbEdyYXBoaWNzSWRzU2FtcGxlLFxuICAgICAgICBncmFwaGljc0NoYW5nZWQ6IGZpbmFsR3JhcGhpY3NDb3VudCAhPT0gZ3JhcGhpY3NDb3VudEJlZm9yZU9yaWdpblJlbW92YWwsXG4gICAgICAgIGdyYXBoaWNzQ2hhbmdlZEJ5OiBmaW5hbEdyYXBoaWNzQ291bnQgLSBncmFwaGljc0NvdW50QmVmb3JlT3JpZ2luUmVtb3ZhbCxcbiAgICAgICAgZXhwZWN0ZWRDaGFuZ2U6IC0xLCAvLyBTaG91bGQgcmVtb3ZlIDEgZ3JhcGhpY1xuICAgICAgICBhY3R1YWxDaGFuZ2U6IGZpbmFsR3JhcGhpY3NDb3VudCAtIGdyYXBoaWNzQ291bnRCZWZvcmVPcmlnaW5SZW1vdmFsLFxuICAgICAgICBjaGFuZ2VNYXRjaGVzOiAoZmluYWxHcmFwaGljc0NvdW50IC0gZ3JhcGhpY3NDb3VudEJlZm9yZU9yaWdpblJlbW92YWwpID09PSAtMSxcbiAgICAgICAgZHVwbGljYXRlR3JhcGhpY3NEZXRlY3RlZDogZHVwbGljYXRlSWRzLmxlbmd0aCA+IDAsXG4gICAgICAgIGR1cGxpY2F0ZUdyYXBoaWNzOiBkdXBsaWNhdGVJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgIHRvdGFsRHVwbGljYXRlczogZHVwbGljYXRlSWRzLnJlZHVjZSgoc3VtLCB7IGNvdW50IH0pID0+IHN1bSArIChjb3VudCAtIDEpLCAwKSxcbiAgICAgICAgbm90ZTogJ0ZpbmFsIHN0YXRlIGFmdGVyIGFsbCByZW1vdmFsIGFuZCBzeW5jIGxvZ2ljIGNvbXBsZXRlcycsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9LCAxMDApIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBhbGwgYXN5bmMgb3BlcmF0aW9ucyBjb21wbGV0ZVxuXG4gICAgLy8gTm90ZTogSGFzaCBwYXJhbWV0ZXJzIGFyZSBwcmVzZXJ2ZWQgYnV0IGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXMgYXJlIGJsb2NrZWRcbiAgICAvLyB3aGVuIG1hbnVhbCBtb2RpZmljYXRpb25zIGV4aXN0IChoYW5kbGVkIGluIHdpZGdldCdzIGhhbmRsZU9wZW5XaWRnZXRFdmVudClcblxuICAgIC8vIExvZyBhZnRlciByZW1vdmVSZWNvcmQgY29tcGxldGVzIHRvIGNoZWNrIGlmIGV4cGFuZEFsbCBjaGFuZ2VkXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtY29tcGxldGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICBleHBhbmRBbGxCZWZvcmU6IGN1cnJlbnRFeHBhbmRBbGwsXG4gICAgICAgIGV4cGFuZEFsbEFmdGVyOiBleHBhbmRBbGwsXG4gICAgICAgIGV4cGFuZEFsbENoYW5nZWQ6IGN1cnJlbnRFeHBhbmRBbGwgIT09IGV4cGFuZEFsbCxcbiAgICAgICAgZXhwYW5kQnlEZWZhdWx0UHJvcDogZXhwYW5kQWxsLCAvLyBXaGF0IHdpbGwgYmUgcGFzc2VkIHRvIFNpbXBsZUxpc3RcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0sIDApXG4gIH0sIFtvdXRwdXREUywgd2lkZ2V0SWQsIHJlc3VsdENvdW50LCBvbk5hdkJhY2ssIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCBxdWVyeUl0ZW0uY29uZmlnSWQsIGV4cGFuZEFsbF0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0IGgtMTAwJyBjc3M9e3Jlc3VsdFN0eWxlfSByb2xlPSdsaXN0Ym94JyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfT5cbiAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IHVzZURhdGFTb3VyY2U9e3Jlc3VsdFVzZU91dHB1dERhdGFTb3VyY2V9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlfSAvPlxuICAgICAgXG4gICAgICB7LyogRXJyb3IgTWVzc2FnZSAqL31cbiAgICAgIHtzZWxlY3Rpb25FcnJvciAmJiAoXG4gICAgICAgIDxkaXYgY3NzPXtjc3NgcGFkZGluZzogMCAxNnB4OyBtYXJnaW4tdG9wOiA4cHg7YH0+XG4gICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgIGVycm9yPXtzZWxlY3Rpb25FcnJvcn0gXG4gICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFNlbGVjdGlvbkVycm9yKG51bGwpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdF9faGVhZGVyIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgbXgtNCc+XG4gICAgICAgIDxCdXR0b24gYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2JhY2snKX0gcmVmPXtiYWNrQnRuUmVmfSBjbGFzc05hbWU9J3AtMCBtci0yJyBzaXplPSdzbScgdmFyaWFudD0ndGV4dCcgY29sb3I9J2luaGVyaXQnIGljb24gb25DbGljaz17KCkgPT4geyBvbk5hdkJhY2soKSB9fT5cbiAgICAgICAgICA8QXJyb3dMZWZ0T3V0bGluZWQgYXV0b0ZsaXAvPlxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAge2N1cnJlbnRJdGVtLnJlc3VsdHNMYWJlbCA/PyBnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfVxuICAgICAgICB7KFxuICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0gcGxhY2VtZW50PSdib3R0b20nPlxuICAgICAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT0nbWwtYXV0bycgaWNvbiBzaXplPSdzbScgdmFyaWFudD0ndGV4dCcgY29sb3I9J2luaGVyaXQnIG9uQ2xpY2s9e2NsZWFyUmVzdWx0c30gYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9PlxuICAgICAgICAgICAgICAgIDxJY29uIGljb249e2ljb25NYXAudG9vbERlbGV0ZX0gLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICB7LyogRGF0YSBhY3Rpb25zIGZpbHRlcmVkIHZpYSBtYW5pZmVzdC5qc29uIGV4Y2x1ZGVEYXRhQWN0aW9ucyAtIFNob3cgb24gTWFwLCBTZWxlY3QgTG9hZGVkLCBhbmQgQ2xlYXIgU2VsZWN0aW9uIGFyZSBleGNsdWRlZC5cbiAgICAgICAgICAgICAgICBDdXN0b20gXCJBZGQgdG8gTWFwXCIgYWN0aW9uIGlzIHByb3ZpZGVkIHZpYSBleHRyYUFjdGlvbnMgYW5kIHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy4gKi99XG4gICAgICAgICAgICB7ZW5hYmxlRGF0YUFjdGlvbiAmJiBvdXRwdXREUyAmJiAoXG4gICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYHdpZHRoOiAxcHg7IGhlaWdodDogMTZweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItaW5wdXQpO2B9PjwvZGl2PlxuICAgICAgICAgICAgICAgIDxEYXRhQWN0aW9uTGlzdFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICAgICAgZGF0YVNldHM9e2FjdGlvbkRhdGFTZXRzfVxuICAgICAgICAgICAgICAgICAgbGlzdFN0eWxlPXtEYXRhQWN0aW9uTGlzdFN0eWxlLkRyb3Bkb3dufVxuICAgICAgICAgICAgICAgICAgYnV0dG9uU2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICBidXR0b25UeXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgIGV4dHJhQWN0aW9ucz17ZXh0cmFBY3Rpb25zfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHQtY29udGFpbmVyIG10LTEnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0LWluZm8gbWItMiBweC00IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWJldHdlZW4nIHJvbGU9J2FsZXJ0JyBhcmlhLWxpdmU9J3BvbGl0ZSc+XG4gICAgICAgICAgPHNwYW4+e2dldFRpcE1lc3NhZ2UoKX08L3NwYW4+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2V4cGFuZEFsbCA/IGdldEkxOG5NZXNzYWdlKCdjb2xsYXBzZUFsbCcpIDogZ2V0STE4bk1lc3NhZ2UoJ2V4cGFuZEFsbCcpfSBwbGFjZW1lbnQ9J3RvcCc+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgb25DbGljaz17dG9nZ2xlRXhwYW5kQWxsfVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2V4cGFuZEFsbCA/IGdldEkxOG5NZXNzYWdlKCdjb2xsYXBzZUFsbCcpIDogZ2V0STE4bk1lc3NhZ2UoJ2V4cGFuZEFsbCcpfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2V4cGFuZEFsbCA/IDxDb2xsYXBzZUFsbE91dGxpbmVkIC8+IDogPEV4cGFuZEFsbE91dGxpbmVkIC8+fVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHsvKiBGT1JDRUQ6IEFsd2F5cyBTaW1wbGVMaXN0IC0gTGF6eUxvYWQgYW5kIE11bHRpUGFnZSByZW1vdmVkICovfVxuICAgICAgICB7cmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICA8U2ltcGxlTGlzdFxuICAgICAgICAgICAga2V5PSdzaW1wbGUnXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW09e3F1ZXJ5SXRlbX1cbiAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREUyBhcyBhbnl9XG4gICAgICAgICAgICByZWNvcmRzPXtmaWx0ZXJlZFJlY29yZHNGb3JMaXN0fVxuICAgICAgICAgICAgZGlyZWN0aW9uPXtkaXJlY3Rpb259XG4gICAgICAgICAgICBvbkVzY2FwZT17aGFuZGxlRXNjYXBlfVxuICAgICAgICAgICAgb25TZWxlY3RDaGFuZ2U9e3RvZ2dsZVNlbGVjdGlvbn1cbiAgICAgICAgICAgIG9uUmVtb3ZlPXtyZW1vdmVSZWNvcmR9XG4gICAgICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEFsbH1cbiAgICAgICAgICAgIGl0ZW1FeHBhbmRTdGF0ZXM9e2l0ZW1FeHBhbmRTdGF0ZXN9XG4gICAgICAgICAgICBvblJlbmRlckRvbmU9e2hhbmRsZVJlbmRlckRvbmV9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgeyBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IFF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PFF1ZXJ5VGFza0NvbnRleHRQcm9wcz4oe1xuICByZXNldFN5bWJvbDogbnVsbFxufSlcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tDb250ZXh0UHJvcHMge1xuICByZXNldFN5bWJvbD86IHN5bWJvbCAvLyB1c2VkIHRvIHRyaWdnZXIgcmVzZXQgb3BlcmF0aW9uXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIGNsYXNzTmFtZXMsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBJTVNxbEV4cHJlc3Npb24sXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgUmVhY3RSZWR1eCxcbiAgaG9va3MsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICB0eXBlIFNxbFF1ZXJ5UGFyYW1zLFxuICBJbW11dGFibGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBUb29sdGlwLCBDaGVja2JveCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBTcWxFeHByZXNzaW9uUnVudGltZSwgZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24gfSBmcm9tICdqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWUnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9JVEVNIH0gZnJvbSAnLi4vZGVmYXVsdC1xdWVyeS1pdGVtJ1xuaW1wb3J0IHsgc2FuaXRpemVTcWxFeHByZXNzaW9uLCBpc1F1ZXJ5SW5wdXRWYWxpZCB9IGZyb20gJy4vcXVlcnktdXRpbHMnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IFF1ZXJ5VGFza1NwYXRpYWxGb3JtIH0gZnJvbSAnLi9xdWVyeS10YXNrLXNwYXRpYWwtZm9ybSdcbmltcG9ydCB7IHVzZUF1dG9IZWlnaHQgfSBmcm9tICcuL3VzZUF1dG9IZWlnaHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmltcG9ydCB7IFF1ZXJ5VGFza0NvbnRleHQgfSBmcm9tICcuL3F1ZXJ5LXRhc2stY29udGV4dCdcbmltcG9ydCB7IEluZm9PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8nXG5pbXBvcnQgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgfSBmcm9tICcuL3NlbGVjdGlvbi11dGlscydcblxuLyoqXG4gKiBFdmVudC1Ecml2ZW4gSGFzaCBQYXJhbWV0ZXIgRXhlY3V0aW9uIFBhdHRlcm5cbiAqIFxuICogQ1JJVElDQUw6IFRoaXMgaXMgdGhlIE9OTFkgZXhlY3V0aW9uIHBhdGggZm9yIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXMuXG4gKiBcbiAqIEZsb3c6XG4gKiAxLiBIYXNoIHZhbHVlIHNldCBpbiBzdGF0ZSBhcyBTVFJJTkcgKGUuZy4sIFwiNTU2ODkwMDAwMFwiKVxuICogMi4gRE9NIG1hbmlwdWxhdGlvbiB0cmlnZ2VycyBTcWxFeHByZXNzaW9uUnVudGltZSB0byBwcm9jZXNzIHRoZSB2YWx1ZVxuICogMy4gU3FsRXhwcmVzc2lvblJ1bnRpbWUgY29udmVydHMgc3RyaW5nIOKGkiBhcnJheSBmb3JtYXQgW3t2YWx1ZTogXCIuLi5cIiwgbGFiZWw6IFwiLi4uXCJ9XVxuICogNC4gaGFuZGxlU3FsRXhwck9iakNoYW5nZSBkZXRlY3RzIGNvbnZlcnNpb24g4oaSIGRpc3BhdGNoZXMgUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlRcbiAqIDUuIEV2ZW50IGxpc3RlbmVyIGluIHF1ZXJ5LXRhc2sudHN4IGV4ZWN1dGVzIHF1ZXJ5IChPUiBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGNhbGxzIGFwcGx5UXVlcnkgZGlyZWN0bHkpXG4gKiBcbiAqIFdIWSBUSElTIFBBVFRFUk4gRVhJU1RTOlxuICogLSBTcWxFeHByZXNzaW9uUnVudGltZSBPTkxZIGZpcmVzIG9uQ2hhbmdlIHdoZW4gdmFsdWUgaXMgY29udmVydGVkIHRvIGFycmF5IGZvcm1hdFxuICogLSBRdWVyaWVzIFJFUVVJUkUgYXJyYXkgZm9ybWF0IC0gZXhlY3V0aW5nIHdpdGggc3RyaW5nIGZvcm1hdCByZXR1cm5zIHVuZmlsdGVyZWQgcmVzdWx0cyAoMTAwMCByZWNvcmRzKVxuICogLSBXZSBNVVNUIHdhaXQgZm9yIGNvbnZlcnNpb24gYmVmb3JlIGV4ZWN1dGluZyBxdWVyaWVzXG4gKiBcbiAqIEFOVEktUEFUVEVSTiBUTyBBVk9JRDpcbiAqIC0gRE8gTk9UIGFkZCB1c2VFZmZlY3QgaG9va3MgdGhhdCBleGVjdXRlIHF1ZXJpZXMgYmFzZWQgb24gc3RyaW5nIHZhbHVlc1xuICogLSBETyBOT1QgZXhlY3V0ZSBxdWVyaWVzIGJlZm9yZSBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCBpcyBkaXNwYXRjaGVkXG4gKiAtIERPIE5PVCBjaXJjdW12ZW50IHRoZSBldmVudC1kcml2ZW4gZmxvdyB3aXRoIGVhcmx5IGV4ZWN1dGlvbiBjaGVja3NcbiAqIFxuICogSWYgeW91IG5lZWQgdG8gZXhlY3V0ZSBhIHF1ZXJ5LCB3YWl0IGZvciB0aGUgY29udmVyc2lvbiBldmVudCBvciBjYWxsIGFwcGx5UXVlcnkoKVxuICogQUZURVIgaGFuZGxlU3FsRXhwck9iakNoYW5nZSBoYXMgZGV0ZWN0ZWQgdGhlIGNvbnZlcnNpb24gYW5kIGRpc3BhdGNoZWQgdGhlIGV2ZW50LlxuICovXG5jb25zdCBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCA9ICdxdWVyeXNpbXBsZS1oYXNoLXZhbHVlLWNvbnZlcnRlZCdcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tJdGVtUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIGNvbmZpZ0lkOiBzdHJpbmdcbiAgc3BhdGlhbEZpbHRlckVuYWJsZWQ6IGJvb2xlYW5cbiAgZGF0YXNvdXJjZVJlYWR5OiBib29sZWFuXG4gIG91dHB1dERTPzogRGF0YVNvdXJjZVxuICBvbkZvcm1TdWJtaXQ6IChzcWxFeHByT2JqOiBJTVNxbEV4cHJlc3Npb24sIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmosIHpvb21Ub1NlbGVjdGVkPzogYm9vbGVhbikgPT4gdm9pZFxuICBkYXRhQWN0aW9uRmlsdGVyPzogU3FsUXVlcnlQYXJhbXNcbiAgaW5pdGlhbElucHV0VmFsdWU/OiBzdHJpbmdcbiAgb25IYXNoUGFyYW1ldGVyVXNlZD86IChzaG9ydElkOiBzdHJpbmcpID0+IHZvaWRcbiAgcXVlcnlJdGVtU2hvcnRJZD86IHN0cmluZ1xuICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnXG4gIG9uVGFiQ2hhbmdlPzogKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4gdm9pZFxufVxuXG5jb25zdCBnZXRGb3JtU3R5bGUgPSAoaXNBdXRvSGVpZ2h0OiBib29sZWFuKSA9PiB7XG4gIHJldHVybiBjc3NgXG4gICAgZmxleDogMSAxIGF1dG87XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgLmZvcm0tdGl0bGUge1xuICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLXRleHQpO1xuICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIGZvbnQtc2l6ZTogMC44MTI1cmVtO1xuICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgIG1hcmdpbi10b3A6IDAgIWltcG9ydGFudDtcbiAgICB9XG4gICAgLnF1ZXJ5LWZvcm1fX2NvbnRlbnQge1xuICAgICAgZmxleDogMSAxICR7aXNBdXRvSGVpZ2h0ID8gJ2F1dG8nIDogJ2F1dG8nfTtcbiAgICAgIG1heC1oZWlnaHQ6ICR7aXNBdXRvSGVpZ2h0ID8gJzYxLjh2aCcgOiAnbm9uZSd9O1xuICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICBwYWRkaW5nLWJvdHRvbTogMDtcbiAgICB9XG4gICAgLnF1ZXJ5LWZvcm1fX2FjdGlvbnMge1xuICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgcGFkZGluZy10b3A6IDRweDtcbiAgICB9XG4gIGBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza0Zvcm0gKHByb3BzOiBRdWVyeVRhc2tJdGVtUHJvcHMpIHtcbiAgY29uc3QgeyB3aWRnZXRJZCwgY29uZmlnSWQsIG91dHB1dERTLCBzcGF0aWFsRmlsdGVyRW5hYmxlZCwgZGF0YXNvdXJjZVJlYWR5LCBvbkZvcm1TdWJtaXQsIGRhdGFBY3Rpb25GaWx0ZXIsIGluaXRpYWxJbnB1dFZhbHVlLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCBxdWVyeUl0ZW1TaG9ydElkLCBhY3RpdmVUYWIsIG9uVGFiQ2hhbmdlIH0gPSBwcm9wc1xuICBjb25zdCBwcmVEYXRhQWN0aW9uRmlsdGVyID0gaG9va3MudXNlUHJldmlvdXMoZGF0YUFjdGlvbkZpbHRlcilcbiAgY29uc3QgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucXVlcnlJdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5jb25maWdJZCA9PT0gY29uZmlnSWQpXG4gIH0pXG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9RVUVSWV9JVEVNLCBxdWVyeUl0ZW0pXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IFtyZXNldFN5bWJvbCwgc2V0UmVzZXRTeW1ib2xdID0gUmVhY3QudXNlU3RhdGU8c3ltYm9sPihudWxsKVxuICAvLyBSdW50aW1lIHpvb20gcHJlZmVyZW5jZSAtIGluaXRpYWxpemVkIHdpdGggY29uZmlnIHZhbHVlLCBjYW4gYmUgb3ZlcnJpZGRlbiBieSB1c2VyXG4gIGNvbnN0IFtydW50aW1lWm9vbVRvU2VsZWN0ZWQsIHNldFJ1bnRpbWVab29tVG9TZWxlY3RlZF0gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPihcbiAgICBxdWVyeUl0ZW0/Lnpvb21Ub1NlbGVjdGVkID8/IHRydWVcbiAgKVxuXG4gIC8vIFN5bmMgcnVudGltZSB6b29tIHByZWZlcmVuY2Ugd2hlbiBxdWVyeSBpdGVtIGNoYW5nZXMgKGUuZy4sIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJpZXMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0UnVudGltZVpvb21Ub1NlbGVjdGVkKHF1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQgPz8gdHJ1ZSlcbiAgfSwgW3F1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQsIHF1ZXJ5SXRlbT8uY29uZmlnSWRdKVxuXG4gIC8vIGNvbnN0IFtkYXRhU291cmNlLCBzZXREYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG4gIGNvbnN0IHtcbiAgICB1c2VBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgdXNlU3BhdGlhbEZpbHRlcixcbiAgICBzcGF0aWFsRmlsdGVyVHlwZXMsXG4gICAgc3FsRXhwck9iaixcbiAgICBzcGF0aWFsTWFwV2lkZ2V0SWRzLFxuICAgIHNwYXRpYWxJbnRlcmFjdGl2ZUNyZWF0ZVRvb2xUeXBlcyxcbiAgICBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcyxcbiAgICBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhLFxuICAgIHNwYXRpYWxSZWxhdGlvbnMsXG4gICAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyLFxuICAgIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlLFxuICAgIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXQsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyLFxuICAgIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlLFxuICAgIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXQsXG4gICAgYXR0cmlidXRlRmlsdGVyTGFiZWwgPSBnZXRJMThuTWVzc2FnZSgnYXR0cmlidXRlRmlsdGVyJyksXG4gICAgc3BhdGlhbEZpbHRlckxhYmVsID0gZ2V0STE4bk1lc3NhZ2UoJ3NwYXRpYWxGaWx0ZXInKSxcbiAgICBhdHRyaWJ1dGVGaWx0ZXJEZXNjLFxuICAgIHNwYXRpYWxGaWx0ZXJEZXNjXG4gIH0gPSBjdXJyZW50SXRlbVxuICBjb25zdCBbYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiwgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9ial0gPSBSZWFjdC51c2VTdGF0ZTxJTVNxbEV4cHJlc3Npb24+KHNxbEV4cHJPYmopXG4gIC8vIFJlZiB0byB0cmFjayBjdXJyZW50IFNRTCBleHByZXNzaW9uIGZvciBzeW5jaHJvbm91cyBhY2Nlc3MgaW4gYXBwbHlRdWVyeVxuICAvLyBUaGlzIGVuc3VyZXMgaGFzaCB2YWx1ZXMgYXJlIGltbWVkaWF0ZWx5IGF2YWlsYWJsZSB3aGVuIEFwcGx5IGlzIGNsaWNrZWRcbiAgY29uc3QgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZiA9IFJlYWN0LnVzZVJlZjxJTVNxbEV4cHJlc3Npb24+KHNxbEV4cHJPYmopXG4gIGNvbnN0IHNwYXRpYWxGaWx0ZXJPYmpSZWYgPSBSZWFjdC51c2VSZWY8U3BhdGlhbEZpbHRlck9iaj4obnVsbClcbiAgY29uc3Qgc3BhdGlhbFJlbGF0aW9uUmVmID0gUmVhY3QudXNlUmVmPFNwYXRpYWxSZWxhdGlvbj4oU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdClcbiAgY29uc3QgYnVmZmVyUmVmID0gUmVhY3QudXNlUmVmPHsgZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUgfT4obnVsbClcbiAgY29uc3QgYXBwbHlCdXR0b25SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IGZvcm1Db250ZW50UmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICBjb25zdCBzcWxFeHByUnVudGltZUNvbnRhaW5lclJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCkgLy8gQ29udGFpbmVyIGZvciBTcWxFeHByZXNzaW9uUnVudGltZSBET00gbWFuaXB1bGF0aW9uXG4gIGNvbnN0IGlzQXV0b0hlaWdodCA9IHVzZUF1dG9IZWlnaHQoKVxuICBjb25zdCBzaG93Q2xhdXNlTnVtYmVyID0gUmVhY3QudXNlUmVmKGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbEV4cHJPYmopKVxuICBjb25zdCBpbml0aWFsVmFsdWVTZXRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkgLy8gVHJhY2sgd2hpY2ggY29uZmlnSWQgd2UndmUgc2V0IHRoZSB2YWx1ZSBmb3JcbiAgY29uc3QgbGFzdFZhbHVlU2V0UmVmID0gUmVhY3QudXNlUmVmPHN0cmluZyB8IG51bGw+KG51bGwpIC8vIFRyYWNrIHRoZSBsYXN0IHZhbHVlIHRoYXQgd2FzIHNldFxuICBjb25zdCBoYXNoVHJpZ2dlcmVkUmVmID0gUmVhY3QudXNlUmVmPGJvb2xlYW4+KGZhbHNlKSAvLyBUcmFjayBpZiBxdWVyeSB3YXMgdHJpZ2dlcmVkIHZpYSBoYXNoIHBhcmFtZXRlclxuICBjb25zdCBwcmV2aW91c0NvbmZpZ0lkUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZyB8IG51bGw+KG51bGwpIC8vIFRyYWNrIHByZXZpb3VzIGNvbmZpZ0lkIHRvIGRldGVjdCBxdWVyeSBzd2l0Y2hlc1xuICBjb25zdCBbaXNUeXBpbmdWYWxpZCwgc2V0SXNUeXBpbmdWYWxpZF0gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPihmYWxzZSlcblxuICAvLyBNb25pdG9yIGZvY3VzIGFuZCBpbnB1dCBldmVudHMgd2l0aGluIHRoZSBxdWVyeSBmb3JtXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlRm9jdXMgPSAoZTogRm9jdXNFdmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgICAgICBjb25zdCB2YWwgPSAodGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlXG4gICAgICAgIHNldElzVHlwaW5nVmFsaWQoaXNRdWVyeUlucHV0VmFsaWQodmFsKSlcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaW5wdXQtZm9jdXNlZCcsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgdGFnTmFtZTogdGFyZ2V0LnRhZ05hbWUsXG4gICAgICAgICAgdHlwZTogKHRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS50eXBlLFxuICAgICAgICAgIHZhbHVlOiB2YWxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVJbnB1dCA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgICAgICBjb25zdCB2YWwgPSAodGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlXG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBpc1F1ZXJ5SW5wdXRWYWxpZCh2YWwpXG4gICAgICAgIHNldElzVHlwaW5nVmFsaWQoaXNWYWxpZClcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaW5wdXQtdHlwaW5nJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICB2YWx1ZTogdmFsLFxuICAgICAgICAgIGlzVHlwaW5nVmFsaWQ6IGlzVmFsaWRcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVGb2N1c091dCA9IChlOiBGb2N1c0V2ZW50KSA9PiB7XG4gICAgICAvLyBTbWFsbCBkZWxheSB0byBhbGxvdyBzdGF0ZSB0byBjYXRjaCB1cFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNldElzVHlwaW5nVmFsaWQoZmFsc2UpXG4gICAgICB9LCA1MClcbiAgICB9XG5cbiAgICBjb25zdCBjb250YWluZXIgPSBmb3JtQ29udGVudFJlZi5jdXJyZW50XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBoYW5kbGVGb2N1cylcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGhhbmRsZUlucHV0KVxuICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgaGFuZGxlRm9jdXNPdXQpXG4gICAgfVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBoYW5kbGVGb2N1cylcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaGFuZGxlSW5wdXQpXG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGhhbmRsZUZvY3VzT3V0KVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2NvbmZpZ0lkXSlcblxuICAvLyBDaGVjayBpZiBhbnkgYXR0cmlidXRlIGZpbHRlciBpbnB1dCBpcyB2YWxpZFxuICBjb25zdCBpc0lucHV0VmFsaWQgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAvLyBJZiB0aGUgdXNlciBpcyBjdXJyZW50bHkgdHlwaW5nIHNvbWV0aGluZyB2YWxpZCwgdGhlIGZvcm0gaXMgdmFsaWRcbiAgICBpZiAoaXNUeXBpbmdWYWxpZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ3ZhbGlkYXRpb24tY2hlY2staW5zdGFudCcsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBpc1ZhbGlkOiB0cnVlXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBpZiAoIWF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzIHx8IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmoucGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZSAvLyBJZiBubyBwYXJ0cywgd2UgYXNzdW1lIGl0J3MgdmFsaWQgKGUuZy4gc3BhdGlhbC1vbmx5IHF1ZXJ5KVxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiBhdCBsZWFzdCBvbmUgU0lOR0xFIHBhcnQgaGFzIGEgdmFsaWQgdmFsdWVcbiAgICBjb25zdCBoYXNWYWxpZFZhbHVlID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iai5wYXJ0cy5zb21lKHBhcnQgPT4ge1xuICAgICAgLy8gQWNjZXNzaW5nIEltbXV0YWJsZSBzdHJ1Y3R1cmVzIHJlcXVpcmVzIGNhcmUuIElmIGRvdCBub3RhdGlvbiBmYWlscywgXG4gICAgICAvLyB0aGUgZnJhbWV3b3JrIGNvbXBvbmVudHMgbWlnaHQgYmUgdXNpbmcgLmdldCgpIG9yIG90aGVyIG1ldGhvZHMuXG4gICAgICAvLyBXZSdsbCBiZSBpbmNsdXNpdmUgaGVyZTogaWYgaXQncyBub3QgYSBTSU5HTEUgcGFydCwgd2UgdHJlYXQgaXQgYXMgdmFsaWQuXG4gICAgICBpZiAocGFydC50eXBlID09PSAnU0lOR0xFJykge1xuICAgICAgICBjb25zdCB2YWwgPSBwYXJ0LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICAgICAgY29uc3Qgc291cmNlID0gcGFydC52YWx1ZU9wdGlvbnM/LnNvdXJjZVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgdGhlIHNvdXJjZSBpcyBOT1QgJ1VTRVJfSU5QVVQnLCBpdCdzIGxpa2VseSBhIGxpc3QvZHJvcGRvd24gKFVOSVFVRV9WQUxVRVMsIEZJRUxEX1ZBTFVFKVxuICAgICAgICAvLyBXZSBhbHNvIGNoZWNrIGZvciBwYXJ0LmRhdGFTb3VyY2Ugd2hpY2ggaXMgY29tbW9uIGZvciBsaXN0LWJhc2VkIHNlbGVjdGlvbnNcbiAgICAgICAgLy8gV2UgdHJlYXQgdGhlc2UgYXMgXCJMaXN0XCIgdHlwZXMgd2hpY2ggYXJlIGV4ZW1wdGVkIGZyb20gdGhlIGVtcHR5LXN0cmluZyBydWxlLlxuICAgICAgICBjb25zdCBpc0xpc3QgPSAoc291cmNlICYmIHNvdXJjZSAhPT0gJ1VTRVJfSU5QVVQnKSB8fCAocGFydC5kYXRhU291cmNlPy5zb3VyY2UpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBpc1ZhbGlkID0gaXNRdWVyeUlucHV0VmFsaWQodmFsLCAhIWlzTGlzdClcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ3ZhbGlkYXRpb24tY2hlY2stZGV0YWlsJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBwYXJ0VHlwZTogcGFydC50eXBlLFxuICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICBoYXNEYXRhU291cmNlOiAhIXBhcnQuZGF0YVNvdXJjZSxcbiAgICAgICAgICBkYXRhU291cmNlU291cmNlOiBwYXJ0LmRhdGFTb3VyY2U/LnNvdXJjZSxcbiAgICAgICAgICBpc0xpc3Q6ICEhaXNMaXN0LFxuICAgICAgICAgIHZhbHVlOiB2YWwsXG4gICAgICAgICAgaXNWYWxpZFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAndmFsaWRhdGlvbi1jaGVjaycsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgcGFydFR5cGU6IHBhcnQudHlwZSxcbiAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgaXNMaXN0LFxuICAgICAgICAgIHZhbHVlOiB2YWwsXG4gICAgICAgICAgdmFsdWVUeXBlOiB0eXBlb2YgdmFsLFxuICAgICAgICAgIGlzVmFsaWRcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBpc1ZhbGlkXG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZSBcbiAgICB9KVxuXG4gICAgcmV0dXJuIGhhc1ZhbGlkVmFsdWVcbiAgfSwgW2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIGNvbmZpZ0lkLCBpc1R5cGluZ1ZhbGlkXSlcblxuICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTPy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdXG5cbiAgLy8gVHJhY2sgY29uZmlnSWQgY2hhbmdlcyAocXVlcnkgc3dpdGNoZXMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdjb25maWdJZC1jaGFuZ2VkJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgcHJldmlvdXNDb25maWdJZDogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtjb25maWdJZCwgaW5pdGlhbElucHV0VmFsdWUsIGRhdGFzb3VyY2VSZWFkeSwgb3V0cHV0RFMsIHdpZGdldElkLCBoYXNoVHJpZ2dlcmVkUmVmXSlcblxuICAvKipcbiAgICogU2V0cyB0aGUgaW5wdXQgdmFsdWUgZnJvbSBVUkwgaGFzaCBwYXJhbWV0ZXJzIHdoZW46XG4gICAqIDEuIERhdGFzb3VyY2UgaXMgcmVhZHlcbiAgICogMi4gV2UgaGF2ZSBhbiBpbml0aWFsSW5wdXRWYWx1ZSBmcm9tIFVSTCBoYXNoXG4gICAqIDMuIFdlIGhhdmVuJ3QgYWxyZWFkeSBzZXQgaXQgZm9yIHRoaXMgY29uZmlnSWQsIE9SIHRoZSB2YWx1ZSBoYXMgY2hhbmdlZFxuICAgKiBcbiAgICogVXNlcyBib3RoIFJlYWN0IHN0YXRlIHVwZGF0ZXMgYW5kIERPTSBtYW5pcHVsYXRpb24gdG8gZW5zdXJlIHRoZSB2YWx1ZVxuICAgKiBpcyBwcm9wZXJseSBzZXQgaW4gU3FsRXhwcmVzc2lvblJ1bnRpbWUncyBpbnRlcm5hbCBzdGF0ZS5cbiAgICovXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdpbml0aWFsSW5wdXRWYWx1ZS1wcm9wLXJlY2VpdmVkJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBkYXRhc291cmNlUmVhZHksXG4gICAgICBoYXNTcWxFeHByT2JqOiAhIXNxbEV4cHJPYmosXG4gICAgICBzcWxFeHByT2JqUGFydHNMZW5ndGg6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGgsXG4gICAgICBpbml0aWFsVmFsdWVTZXRSZWY6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgd2lsbFByb2Nlc3M6IGRhdGFzb3VyY2VSZWFkeSAmJiBpbml0aWFsSW5wdXRWYWx1ZSAmJiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoID4gMCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICBldmVudDogJ2Zvcm0taW5pdGlhbElucHV0VmFsdWUtcmVjZWl2ZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTLFxuICAgICAgaGFzU3FsRXhwck9iajogISFzcWxFeHByT2JqLFxuICAgICAgc3FsRXhwck9ialBhcnRzTGVuZ3RoOiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoLFxuICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgIGxhc3RWYWx1ZVNldFJlZjogbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICBjdXJyZW50U3RhdGVWYWx1ZTogYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSxcbiAgICAgIHdpbGxQcm9jZXNzOiBkYXRhc291cmNlUmVhZHkgJiYgb3V0cHV0RFMgJiYgaW5pdGlhbElucHV0VmFsdWUgJiYgc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCA+IDAsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFJlc2V0IGZsYWcgaWYgY29uZmlnSWQgY2hhbmdlZCAoc3dpdGNoZWQgdG8gZGlmZmVyZW50IHF1ZXJ5KVxuICAgIGlmIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQpIHtcbiAgICAgIGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBoYXNoIHRyaWdnZXIgZmxhZyB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaFRyaWdnZXJlZFJlZi1yZXNldCcsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICByZWFzb246ICdzd2l0Y2hpbmctcXVlcmllcycsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHNldElzVHlwaW5nVmFsaWQoZmFsc2UpIC8vIFJlc2V0IHR5cGluZyB2YWxpZGF0aW9uXG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHZhbHVlIGhhcyBjaGFuZ2VkIGZvciB0aGUgc2FtZSBjb25maWdJZFxuICAgIGNvbnN0IHZhbHVlQ2hhbmdlZCA9IGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBudWxsICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBpbml0aWFsSW5wdXRWYWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID09PSBjb25maWdJZFxuICAgIFxuICAgIC8vIERJQUdOT1NUSUMgKHIwMTguMTEyKTogUHJvdmUgaHlwb3RoZXNpcyBhYm91dCBzaG91bGRTZXRWYWx1ZSBsb2dpY1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdmb3JtLXNob3VsZFNldFZhbHVlLWNhbGN1bGF0aW9uJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBDT05ESVRJT05TOiB7XG4gICAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFMsXG4gICAgICAgIGhhc0luaXRpYWxJbnB1dFZhbHVlOiAhIWluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICBoYXNTcWxFeHByT2JqUGFydHM6ICEhKHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwKVxuICAgICAgfSxcbiAgICAgIFJFRlM6IHtcbiAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgICAgbGFzdFZhbHVlU2V0UmVmOiBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgICAgcHJldmlvdXNDb25maWdJZFJlZjogcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50XG4gICAgICB9LFxuICAgICAgTE9HSUNfQlJFQUtET1dOOiB7XG4gICAgICAgICdpbml0aWFsVmFsdWVTZXRSZWYgIT09IGNvbmZpZ0lkJzogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkLFxuICAgICAgICAnbGFzdFZhbHVlU2V0UmVmICE9PSBudWxsJzogbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IG51bGwsXG4gICAgICAgICdsYXN0VmFsdWVTZXRSZWYgIT09IGluaXRpYWxJbnB1dFZhbHVlJzogbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAnaW5pdGlhbFZhbHVlU2V0UmVmID09PSBjb25maWdJZCc6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID09PSBjb25maWdJZCxcbiAgICAgICAgJ3ZhbHVlQ2hhbmdlZCAoYWxsIDMgYWJvdmUgQU5EKSc6IHZhbHVlQ2hhbmdlZCxcbiAgICAgICAgJ0ZJTkFMOiBjb25maWdJZC1taXNtYXRjaCBPUiB2YWx1ZUNoYW5nZWQnOiAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkIHx8IHZhbHVlQ2hhbmdlZClcbiAgICAgIH0sXG4gICAgICBCUkVBS0RPV05fQkFTRV9DT05ESVRJT05TOiB7XG4gICAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgICAgJ2hhcy1pbml0aWFsSW5wdXRWYWx1ZSc6ICEhaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICdoYXMtc3FsRXhwck9iai1wYXJ0cyc6ICEhKHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwKSxcbiAgICAgICAgJ3JlZi1jaGVjayc6IChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgdmFsdWVDaGFuZ2VkKSxcbiAgICAgICAgJ2Jhc2VDb25kaXRpb25zIChhbGwgNCBBTkQpJzogKGRhdGFzb3VyY2VSZWFkeSAmJiBpbml0aWFsSW5wdXRWYWx1ZSAmJiAoc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCA+IDApICYmIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgdmFsdWVDaGFuZ2VkKSlcbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFNldCB0aGUgdmFsdWUgaWY6XG4gICAgLy8gLSBXZSBoYXZlbid0IHNldCBpdCBmb3IgdGhpcyBjb25maWdJZCB5ZXQsIE9SXG4gICAgLy8gLSBUaGUgdmFsdWUgaGFzIGNoYW5nZWQgZm9yIHRoZSBzYW1lIGNvbmZpZ0lkIChoYXNoIHBhcmFtZXRlciB1cGRhdGVkKVxuICAgIC8vIEZJWCAocjAxOC4xMTIpOiBEaWZmZXJlbnRpYXRlIGZpcnN0IGxvYWQgZnJvbSBtaWQtc2Vzc2lvbiBoYXNoIGNoYW5nZXNcbiAgICAvLyBGaXJzdCBsb2FkOiBSZXF1aXJlIG91dHB1dERTIHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uIChyMDE4LjEwOSlcbiAgICAvLyBNaWQtc2Vzc2lvbjogVXNlIG9sZCBsb2dpYyB0aGF0IHdvcmtlZCBiZWZvcmUgcjAxOC4xMDlcbiAgICBjb25zdCBpc0ZpcnN0TG9hZCA9IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID09PSBudWxsXG4gICAgY29uc3QgYmFzZUNvbmRpdGlvbnMgPSBkYXRhc291cmNlUmVhZHkgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkIHx8IHZhbHVlQ2hhbmdlZClcbiAgICBcbiAgICBjb25zdCBzaG91bGRTZXRWYWx1ZSA9IGlzRmlyc3RMb2FkIFxuICAgICAgPyAoYmFzZUNvbmRpdGlvbnMgJiYgISFvdXRwdXREUykgIC8vIEZpcnN0IGxvYWQ6IHN0cmljdCBjaGVjayAocHJldmVudHMgcmFjZSksICEhIGZvcmNlcyBib29sZWFuXG4gICAgICA6IGJhc2VDb25kaXRpb25zICAgICAgICAgICAgICAgICAgIC8vIE1pZC1zZXNzaW9uOiBvbGQgbG9naWMgKHdvcmtzIGZpbmUpXG4gICAgXG4gICAgLy8gRElBR05PU1RJQyAocjAxOC4xMTIpOiBMb2cgZmluYWwgcmVzdWx0XG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ2Zvcm0tc2hvdWxkU2V0VmFsdWUtcmVzdWx0JyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBpc0ZpcnN0TG9hZCxcbiAgICAgIHNob3VsZFNldFZhbHVlLFxuICAgICAgcmVhc29uOiAhc2hvdWxkU2V0VmFsdWUgPyBcbiAgICAgICAgKCFkYXRhc291cmNlUmVhZHkgPyAnZGF0YXNvdXJjZVJlYWR5LWZhbHNlJyA6XG4gICAgICAgICAhb3V0cHV0RFMgJiYgaXNGaXJzdExvYWQgPyAnb3V0cHV0RFMtbnVsbC1vbi1maXJzdC1sb2FkJyA6XG4gICAgICAgICAhaW5pdGlhbElucHV0VmFsdWUgPyAnaW5pdGlhbElucHV0VmFsdWUtbnVsbCcgOlxuICAgICAgICAgIShzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoID4gMCkgPyAnbm8tc3FsRXhwck9iai1wYXJ0cycgOlxuICAgICAgICAgJ3JlZi1jb25kaXRpb25zLW5vdC1tZXQnKSA6ICdhbGwtY29uZGl0aW9ucy1tZXQnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBpZiAoc2hvdWxkU2V0VmFsdWUpIHtcbiAgICAgIC8vIEZJWCAocjAxOC4xMTMpOiBSZW1vdmUgdGFiIHN3aXRjaCBsb2dpYyAtIFNxbEV4cHJlc3Npb25SdW50aW1lIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgYWN0aXZlIHRhYlxuICAgICAgLy8gU2V0dGluZyB2YWx1ZSBpbiBSZWFjdCBzdGF0ZSBpcyBzdWZmaWNpZW50OyBvbkNoYW5nZSB3aWxsIGZpcmUgd2hlbiBjb21wb25lbnQgcHJvY2Vzc2VzIGl0XG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLXNldHRpbmctc3RhcnQnLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZjogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICAgIHZhbHVlQ2hhbmdlZCxcbiAgICAgICAgaGFzaFRyaWdnZXJlZFJlZkJlZm9yZTogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgICBzcWxFeHByT2JqUGFydHNMZW5ndGg6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGgsXG4gICAgICAgIGFjdGl2ZVRhYixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgZXZlbnQ6ICdmb3JtLWhhc2gtdmFsdWUtc2V0dGluZy1zdGFydCcsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgICAgbGFzdFZhbHVlU2V0UmVmOiBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgICAgdmFsdWVDaGFuZ2VkLFxuICAgICAgICBoYXNoVHJpZ2dlcmVkUmVmQmVmb3JlOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFMsXG4gICAgICAgIHNxbEV4cHJPYmpQYXJ0c0xlbmd0aDogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCxcbiAgICAgICAgYWN0aXZlVGFiLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFNldCBoYXNoVHJpZ2dlcmVkUmVmIElNTUVESUFURUxZIHdoZW4gc2V0dGluZyBoYXNoIHZhbHVlXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgaGFuZGxlU3FsRXhwck9iakNoYW5nZSBjYW4gZGV0ZWN0IGhhc2gtdHJpZ2dlcmVkIGNvbnZlcnNpb25zXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaFRyaWdnZXJlZFJlZi1zZXQtdHJ1ZScsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgZXZlbnQ6ICdmb3JtLWhhc2hUcmlnZ2VyZWRSZWYtc2V0LXRydWUnLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIGhhc2hUcmlnZ2VyZWRSZWZBZnRlcjogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IGZpcnN0UGFydCA9IHNxbEV4cHJPYmoucGFydHNbMF1cbiAgICAgIC8vIENoZWNrIGlmIHRoZSBmaXJzdCBwYXJ0IGlzIGEgU0lOR0xFIGNsYXVzZSAobm90IGEgU3FsQ2xhdXNlU2V0KVxuICAgICAgaWYgKGZpcnN0UGFydCAmJiAndHlwZScgaW4gZmlyc3RQYXJ0ICYmIGZpcnN0UGFydC50eXBlID09PSAnU0lOR0xFJyAmJiAndmFsdWVPcHRpb25zJyBpbiBmaXJzdFBhcnQpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBleHByZXNzaW9uIG9iamVjdCB3aXRoIHRoZSBpbml0aWFsIHZhbHVlXG4gICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBzcWxFeHByT2JqLnNldEluKFsncGFydHMnLCAnMCcsICd2YWx1ZU9wdGlvbnMnLCAndmFsdWUnXSwgaW5pdGlhbElucHV0VmFsdWUpXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLXNldHRpbmctcmVhY3Qtc3RhdGUnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIHByZXZpb3VzU3RhdGVWYWx1ZTogYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSxcbiAgICAgICAgICBuZXdTdGF0ZVZhbHVlOiB1cGRhdGVkPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlLFxuICAgICAgICAgIHdpbGxDYWxsU2V0U3RhdGU6IHRydWUsXG4gICAgICAgICAgbm90ZTogJ1NldHRpbmcgdmFsdWUgaW4gUmVhY3Qgc3RhdGUgLSBTcWxFeHByZXNzaW9uUnVudGltZSBzaG91bGQgcmVjZWl2ZSB2aWEgZXhwcmVzc2lvbiBwcm9wJ1xuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaih1cGRhdGVkKVxuICAgICAgICAvLyBVcGRhdGUgcmVmIGltbWVkaWF0ZWx5IGZvciBzeW5jaHJvbm91cyBhY2Nlc3MgaW4gYXBwbHlRdWVyeVxuICAgICAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQgPSB1cGRhdGVkXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLXJlZi11cGRhdGVkJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICByZWZWYWx1ZUFmdGVyVXBkYXRlOiBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQ/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIC8vIFVwZGF0ZSBjbGF1c2UgbnVtYmVyIGZvciB0aGUgdXBkYXRlZCBleHByZXNzaW9uXG4gICAgICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHVwZGF0ZWQpXG4gICAgICAgIFxuICAgICAgICAvLyBGSVggKHIwMTguMTEzKTogU2V0IHRyYWNraW5nIHJlZnMgaW1tZWRpYXRlbHkgYWZ0ZXIgc2V0dGluZyBSZWFjdCBzdGF0ZVxuICAgICAgICAvLyBUaGVzZSByZWZzIHByZXZlbnQgcmUtc2V0dGluZyB0aGUgc2FtZSB2YWx1ZSBhbmQgdHJhY2sgd2hhdCB3ZSd2ZSBwcm9jZXNzZWRcbiAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgPSBjb25maWdJZFxuICAgICAgICBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCA9IGluaXRpYWxJbnB1dFZhbHVlXG4gICAgICAgIFxuICAgICAgICAvLyBGSVggKHIwMTguMTIzKTogTXV0YXRpb25PYnNlcnZlciB3aWxsIHdhdGNoIGZvciBpbnB1dCBmaWVsZCBhbmQgcG9wdWxhdGUgaXQgdXNpbmcgZm9jdXMvYmx1ciBjeWNsZVxuICAgICAgICAvLyBUaGUgZmxvdyBpczogc2V0U3RhdGUg4oaSIFNxbEV4cHJlc3Npb25SdW50aW1lIHJlbW91bnRzIOKGkiBNdXRhdGlvbk9ic2VydmVyIGRldGVjdHMgaW5wdXRbdHlwZT1cInRleHRcIl0g4oaSIFxuICAgICAgICAvLyBmb2N1cyDihpIgc2V0IHZhbHVlIOKGkiBkaXNwYXRjaCBldmVudHMg4oaSIGJsdXIg4oaSIFNxbEV4cHJlc3Npb25SdW50aW1lLm9uQ2hhbmdlIGZpcmVzIG5hdHVyYWxseSDihpJcbiAgICAgICAgLy8gaGFuZGxlU3FsRXhwck9iakNoYW5nZSBkZXRlY3RzIHN0cmluZ+KGkmFycmF5IGNvbnZlcnNpb24g4oaSIGZpcmVzIFFVRVJZU0lNUExFX0hBU0hfVkFMVUVfQ09OVkVSVEVEX0VWRU5UIOKGklxuICAgICAgICAvLyBxdWVyeS10YXNrLnRzeCBldmVudCBsaXN0ZW5lciBleGVjdXRlcyBxdWVyeSAoZXZlbnQtZHJpdmVuIHBhdHRlcm4gZnJvbSByMDE4LjEwOClcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1zdGF0ZS1zZXQtYXdhaXRpbmctZG9tLXBvcHVsYXRpb24nLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgICAgICBub3RlOiAnVmFsdWUgc2V0IGluIFJlYWN0IHN0YXRlIC0gTXV0YXRpb25PYnNlcnZlciB3aWxsIHBvcHVsYXRlIGlucHV0W3R5cGU9XCJ0ZXh0XCJdIHVzaW5nIGZvY3VzL2JsdXIgY3ljbGUnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBUaGUgc3FsRXhwck9iai5wYXJ0cyBtYXkgY2hhbmdlIGJ1dCB0aGUgZGlzcGxheVNRTCBpcyB0aGUgc2FtZVxuICAgIGlmICghc3FsRXhwck9iaikge1xuICAgICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gMFxuICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihudWxsKVxuICAgICAgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnc3FsRXhwck9iai1jbGVhcmVkJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iailcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBoYXZlIGEgdmFsdWUgc2V0IChmcm9tIHVzZXIgaW5wdXQgb3IgaGFzaClcbiAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICAgIGNvbnN0IHJlZlZhbHVlID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50Py5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgICBjb25zdCBiYXNlVmFsdWUgPSBzcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgICBjb25zdCBoYXNWYWx1ZVNldCA9IGN1cnJlbnRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRWYWx1ZSAhPT0gbnVsbCAmJiBjdXJyZW50VmFsdWUgIT09ICcnXG4gICAgICBjb25zdCBoYXNSZWZWYWx1ZSA9IHJlZlZhbHVlICE9PSB1bmRlZmluZWQgJiYgcmVmVmFsdWUgIT09IG51bGwgJiYgcmVmVmFsdWUgIT09ICcnXG4gICAgICBjb25zdCBjb25maWdJZENoYW5nZWQgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgIT09IG51bGwgJiYgcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ICE9PSBjb25maWdJZFxuICAgICAgY29uc3QgaGFzaFdhc1Byb2Nlc3NlZCA9IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID09PSBjb25maWdJZFxuICAgICAgXG4gICAgICAvLyBGSVggKHIwMTguMTE1KTogUHJlc2VydmUgaGFzaC1zZXQgdmFsdWVzIGV2ZW4gYWZ0ZXIgY2xlYW51cCBjbGVhcnMgaW5pdGlhbElucHV0VmFsdWVcbiAgICAgIC8vIENoZWNrIGJvdGggc3RhdGUgQU5EIHJlZiBmb3IgdmFsdWUgcHJlc2VuY2UgKHJlZiB1cGRhdGVzIGJlZm9yZSBzdGF0ZSBpbiBzYW1lIHJlbmRlcilcbiAgICAgIC8vIE9ubHkgdXBkYXRlIGlmOlxuICAgICAgLy8gMS4gV2UgaGF2ZW4ndCBzZXQgYSB2YWx1ZSB5ZXQgKG5vIHZhbHVlIGluIGN1cnJlbnQgc3RhdGUgT1IgcmVmKSwgQU5EXG4gICAgICAvLyAyLiBXZSBoYXZlbid0IGFscmVhZHkgcHJvY2Vzc2VkIGEgaGFzaCBmb3IgdGhpcyBjb25maWdJZCwgT1JcbiAgICAgIC8vIDMuIGNvbmZpZ0lkIGNoYW5nZWQgKHN3aXRjaGluZyBxdWVyaWVzIC0gcmVzZXQgdG8gYmFzZSBzcWxFeHByT2JqKVxuICAgICAgLy8gT3RoZXJ3aXNlLCBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgdmFsdWUgYXMgYSB2aXN1YWwgcmVjb3JkXG4gICAgICBpZiAoKCFoYXNWYWx1ZVNldCAmJiAhaGFzUmVmVmFsdWUgJiYgIWhhc2hXYXNQcm9jZXNzZWQpIHx8IGNvbmZpZ0lkQ2hhbmdlZCkge1xuICAgICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHNxbEV4cHJPYmopXG4gICAgICAgIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudCA9IHNxbEV4cHJPYmpcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ3NxbEV4cHJPYmotdXBkYXRlZC1yZWYnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHByZXZpb3VzQ29uZmlnSWQ6IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCxcbiAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWY6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgICAgIGhhc1ZhbHVlU2V0LFxuICAgICAgICAgIGhhc1JlZlZhbHVlLFxuICAgICAgICAgIGhhc2hXYXNQcm9jZXNzZWQsXG4gICAgICAgICAgY29uZmlnSWRDaGFuZ2VkLFxuICAgICAgICAgIHByZXZpb3VzVmFsdWU6IGN1cnJlbnRWYWx1ZSxcbiAgICAgICAgICByZWZWYWx1ZTogcmVmVmFsdWUsXG4gICAgICAgICAgbmV3VmFsdWU6IGJhc2VWYWx1ZSxcbiAgICAgICAgICByZWFzb246IGNvbmZpZ0lkQ2hhbmdlZCA/ICdjb25maWdJZC1jaGFuZ2VkLXJlc2V0dGluZycgOiAnbm8tdmFsdWUtc2V0LWluaXRpYWxpemluZycsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzcWxFeHByT2JqLXNraXBwZWQtcmVmLXVwZGF0ZScsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgcHJldmlvdXNDb25maWdJZDogcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50LFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZjogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICAgICAgaGFzVmFsdWVTZXQsXG4gICAgICAgICAgaGFzUmVmVmFsdWUsXG4gICAgICAgICAgaGFzaFdhc1Byb2Nlc3NlZCxcbiAgICAgICAgICBjdXJyZW50VmFsdWUsXG4gICAgICAgICAgcmVmVmFsdWUsXG4gICAgICAgICAgYmFzZVZhbHVlLFxuICAgICAgICAgIHJlYXNvbjogaGFzaFdhc1Byb2Nlc3NlZCA/ICdoYXNoLXZhbHVlLWFscmVhZHktcHJvY2Vzc2VkLXByZXNlcnZpbmcnIDogXG4gICAgICAgICAgICAgICAgICBoYXNSZWZWYWx1ZSA/ICdyZWYtdmFsdWUtYWxyZWFkeS1zZXQtcHJlc2VydmluZycgOlxuICAgICAgICAgICAgICAgICAgJ3ZhbHVlLWFscmVhZHktc2V0LXByZXNlcnZpbmctYXMtdmlzdWFsLXJlY29yZCcsXG4gICAgICAgICAgbm90ZTogJ1NraXBwaW5nIHVwZGF0ZSB0byBwcmVzZXJ2ZSB1c2VyLWVudGVyZWQgb3IgaGFzaC1zZXQgdmFsdWUgYXMgdmlzdWFsIHJlY29yZCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBwcmV2aW91c0NvbmZpZ0lkUmVmIGZvciBuZXh0IGNvbXBhcmlzb25cbiAgICAgIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCA9IGNvbmZpZ0lkXG4gICAgfVxuICB9LCBbc3FsRXhwck9iaiwgaW5pdGlhbElucHV0VmFsdWUsIGRhdGFzb3VyY2VSZWFkeSwgb3V0cHV0RFMsIGNvbmZpZ0lkLCB3aWRnZXRJZCwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcXVlcnlJdGVtU2hvcnRJZCwgYWN0aXZlVGFiLCBvblRhYkNoYW5nZV0pXG4gIFxuICAvLyBLZWVwIHJlZiBpbiBzeW5jIHdpdGggc3RhdGUgY2hhbmdlcyAoZm9yIFNxbEV4cHJlc3Npb25SdW50aW1lIHVwZGF0ZXMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZi5jdXJyZW50ID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialxuICAgIFxuICAgIC8vIExvZyB3aGVuIHN0YXRlIGNoYW5nZXMgLSB0aGlzIGlzIHdoYXQgU3FsRXhwcmVzc2lvblJ1bnRpbWUgcmVjZWl2ZXMgdmlhIGV4cHJlc3Npb24gcHJvcFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iai1zdGF0ZS1jaGFuZ2VkJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgc3RhdGVWYWx1ZTogYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSxcbiAgICAgIHN0YXRlVmFsdWVUeXBlOiB0eXBlb2YgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSxcbiAgICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSksXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIG5vdGU6ICdSZWFjdCBzdGF0ZSBjaGFuZ2VkIC0gU3FsRXhwcmVzc2lvblJ1bnRpbWUgc2hvdWxkIHJlY2VpdmUgdGhpcyB2aWEgZXhwcmVzc2lvbiBwcm9wJ1xuICAgIH0pXG4gIH0sIFthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBjb25maWdJZCwgaW5pdGlhbElucHV0VmFsdWVdKVxuXG4gIGNvbnN0IGFwcGx5UXVlcnkgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICBldmVudDogJ2Zvcm0tYXBwbHlRdWVyeS1FWEVDVVRJTkcnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIHJ1bnRpbWVab29tVG9TZWxlY3RlZCxcbiAgICAgIHdpbGxab29tOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPyB0cnVlIDogcnVudGltZVpvb21Ub1NlbGVjdGVkLFxuICAgICAgY3VycmVudFZhbHVlOiBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQ/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFdoZW4gdGhlICdhcHBseScgYnV0dG9uIGlzIGNsaWNrZWQsIGl0IHNob3VsZCBjbGVhciB0aGUgc2VsZWN0aW9uIGZyb20gdGhlIHByZXZpb3VzIHJlc3VsdCBsaXN0XG4gICAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKG91dHB1dERTKVxuXG4gICAgaWYgKG91dHB1dERTKSB7XG4gICAgICBjb25zdCBvcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgaWYgKG9yaWdpbkRzKSB7XG4gICAgICAgIGNvbnN0IGRhdGFWaWV3Q29uZmlnID0gb3JpZ2luRHMuZ2V0RGF0YVZpZXdDb25maWcoKVxuICAgICAgICBjb25zdCBtYXhpbXVtID0gZGF0YVZpZXdDb25maWc/Lm1heGltdW1cbiAgICAgICAgaWYgKG1heGltdW0gIT0gbnVsbCAmJiBtYXhpbXVtID4gMCkge1xuICAgICAgICAgIERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkudXBkYXRlRGF0YVNvdXJjZUJ5RGF0YVNvdXJjZUpzb24oXG4gICAgICAgICAgICBvdXRwdXREUyxcbiAgICAgICAgICAgIG91dHB1dERTLmdldERhdGFTb3VyY2VKc29uKCkuc2V0SW4oWydxdWVyeScsICdtYXhpbXVtJ10sIG1heGltdW0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9yY2Ugem9vbSBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllcywgb3RoZXJ3aXNlIHVzZSBydW50aW1lIHByZWZlcmVuY2VcbiAgICBjb25zdCB6b29tVG9Vc2UgPSBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPyB0cnVlIDogcnVudGltZVpvb21Ub1NlbGVjdGVkXG5cbiAgICAvLyBTYW5pdGl6ZSB1c2VyIGlucHV0IGJlZm9yZSBzdWJtaXNzaW9uXG4gICAgLy8gUmVhZCBmcm9tIHJlZiB0byBnZXQgdGhlIGxhdGVzdCB2YWx1ZSBzeW5jaHJvbm91c2x5IChpbmNsdWRpbmcgaGFzaCB2YWx1ZXMpXG4gICAgY29uc3QgY3VycmVudFNxbEV4cHJPYmogPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnRcbiAgICBjb25zdCBjdXJyZW50UmVmVmFsdWUgPSBjdXJyZW50U3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnYXBwbHlRdWVyeS1leGVjdXRpbmcnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGN1cnJlbnRSZWZWYWx1ZSxcbiAgICAgIHJlZkhhc1ZhbHVlOiAhIWN1cnJlbnRSZWZWYWx1ZSxcbiAgICAgIGhhc2hUcmlnZ2VyZWQ6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgY29uc3Qgc2FuaXRpemVkU3FsRXhwck9iaiA9IHNhbml0aXplU3FsRXhwcmVzc2lvbihjdXJyZW50U3FsRXhwck9iailcbiAgICBcbiAgICAvLyBMb2cgdGhlIHNhbml0aXplZCBleHByZXNzaW9uIHRvIHNlZSBpZiB2YWx1ZSB3YXMgcHJlc2VydmVkXG4gICAgY29uc3Qgc2FuaXRpemVkVmFsdWUgPSBzYW5pdGl6ZWRTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdhcHBseVF1ZXJ5LWFmdGVyLXNhbml0aXplJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgY3VycmVudFJlZlZhbHVlLFxuICAgICAgc2FuaXRpemVkVmFsdWUsXG4gICAgICB2YWx1ZXNNYXRjaDogY3VycmVudFJlZlZhbHVlID09PSBzYW5pdGl6ZWRWYWx1ZSxcbiAgICAgIHNhbml0aXplZFZhbHVlVHlwZTogdHlwZW9mIHNhbml0aXplZFZhbHVlLFxuICAgICAgY3VycmVudFJlZlZhbHVlVHlwZTogdHlwZW9mIGN1cnJlbnRSZWZWYWx1ZSxcbiAgICAgIGlzQXJyYXlDdXJyZW50OiBBcnJheS5pc0FycmF5KGN1cnJlbnRSZWZWYWx1ZSksXG4gICAgICBpc0FycmF5U2FuaXRpemVkOiBBcnJheS5pc0FycmF5KHNhbml0aXplZFZhbHVlKSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICBsZXQgcmVsID0gc3BhdGlhbFJlbGF0aW9uUmVmLmN1cnJlbnRcbiAgICBpZiAoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Py5nZW9tZXRyeSAmJiByZWwgPT0gbnVsbCkge1xuICAgICAgcmVsID0gU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdFxuICAgIH1cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgIGV2ZW50OiAnZm9ybS1hYm91dC10by1jYWxsLW9uRm9ybVN1Ym1pdCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgc2FuaXRpemVkVmFsdWUsXG4gICAgICBoYXNTcGF0aWFsR2VvbWV0cnlBcnJheTogQXJyYXkuaXNBcnJheShzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQ/Lmdlb21ldHJ5KSxcbiAgICAgIHNwYXRpYWxHZW9tZXRyeUNvdW50OiBBcnJheS5pc0FycmF5KHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudD8uZ2VvbWV0cnkpID8gc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Lmdlb21ldHJ5Lmxlbmd0aCA6IDAsXG4gICAgICB6b29tVG9Vc2UsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGlmIChBcnJheS5pc0FycmF5KHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudD8uZ2VvbWV0cnkpKSB7XG4gICAgICBpZiAoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Lmdlb21ldHJ5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgICBldmVudDogJ2Zvcm0tY2FsbGluZy1vbkZvcm1TdWJtaXQtc2luZ2xlLWdlb21ldHJ5JyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgb25Gb3JtU3VibWl0KHNhbml0aXplZFNxbEV4cHJPYmosIHsgLi4uc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50LCBnZW9tZXRyeTogc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Lmdlb21ldHJ5WzBdLCByZWxhdGlvbjogcmVsLCBidWZmZXI6IGJ1ZmZlclJlZi5jdXJyZW50IH0sIHpvb21Ub1VzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgICAgIGV2ZW50OiAnZm9ybS1jYWxsaW5nLW9uRm9ybVN1Ym1pdC1tdWx0aXBsZS1nZW9tZXRyeS11bmlvbicsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xuICAgICAgICAgICdlc3JpL2dlb21ldHJ5L29wZXJhdG9ycy91bmlvbk9wZXJhdG9yJ1xuICAgICAgICBdKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgICAgICAgIGNvbnN0IG9wZXJhdG9yOiAodHlwZW9mIF9fZXNyaS51bmlvbk9wZXJhdG9yKSA9IG1vZHVsZXNbMF1cbiAgICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG9wZXJhdG9yLmV4ZWN1dGVNYW55KHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudC5nZW9tZXRyeSlcbiAgICAgICAgICBvbkZvcm1TdWJtaXQoc2FuaXRpemVkU3FsRXhwck9iaiwgeyAuLi5zcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQsIGdlb21ldHJ5LCByZWxhdGlvbjogcmVsLCBidWZmZXI6IGJ1ZmZlclJlZi5jdXJyZW50IH0sIHpvb21Ub1VzZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICAgIGV2ZW50OiAnZm9ybS1jYWxsaW5nLW9uRm9ybVN1Ym1pdC1uby1zcGF0aWFsLWdlb21ldHJ5JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIG9uRm9ybVN1Ym1pdChzYW5pdGl6ZWRTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgfVxuICAgIFxuICAgIC8vIFJlc2V0IGhhc2hUcmlnZ2VyZWRSZWYgYWZ0ZXIgdXNlXG4gICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2hhc2hUcmlnZ2VyZWRSZWYtcmVzZXQtYWZ0ZXItYXBwbHknLFxuICAgICAgY29uZmlnSWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbb25Gb3JtU3VibWl0LCBvdXRwdXREUywgcnVudGltZVpvb21Ub1NlbGVjdGVkXSlcblxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2ZW50OiBSZWFjdC5LZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJyAmJiBkYXRhc291cmNlUmVhZHkgJiYgaXNJbnB1dFZhbGlkKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBcbiAgICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSBpbnB1dCBmaWVsZFxuICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC50YWdOYW1lID09PSAnSU5QVVQnICYmIGFjdGl2ZUVsZW1lbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIC8vIEZvcmNlIGJsdXIgdG8gdHJpZ2dlciBTcWxFeHByZXNzaW9uUnVudGltZSdzIGlucHV0IHByb2Nlc3NpbmdcbiAgICAgICAgYWN0aXZlRWxlbWVudC5ibHVyKClcbiAgICAgICAgXG4gICAgICAgIC8vIFdhaXQgZm9yIGJsdXIgcHJvY2Vzc2luZywgdGhlbiBjbGljayB0aGUgQXBwbHkgYnV0dG9uXG4gICAgICAgIC8vIFRoaXMgdXNlcyB0aGUgZXhhY3Qgc2FtZSBjb2RlIHBhdGggYXMgY2xpY2tpbmcgdGhlIGJ1dHRvbiBtYW51YWxseVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5UXVlcnkoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgMjAwKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm90IGluIGFuIGlucHV0IGZpZWxkLCBzYWZlIHRvIGFwcGx5IGltbWVkaWF0ZWx5XG4gICAgICAgIGlmIChhcHBseUJ1dHRvblJlZi5jdXJyZW50ICYmICFhcHBseUJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkKSB7XG4gICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXBwbHlRdWVyeSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtkYXRhc291cmNlUmVhZHksIGFwcGx5UXVlcnksIGlzSW5wdXRWYWxpZF0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWRhdGFBY3Rpb25GaWx0ZXIpIHJldHVyblxuICAgIGlmIChkYXRhQWN0aW9uRmlsdGVyLndoZXJlICE9PSBwcmVEYXRhQWN0aW9uRmlsdGVyPy53aGVyZSkge1xuICAgICAgLy8gTG9nIHN0YXRlIHdoZW4gZGF0YUFjdGlvbkZpbHRlciBjaGFuZ2VzIChxdWVyeSBzd2l0Y2gpXG4gICAgICBjb25zdCBjdXJyZW50UmVmVmFsdWUgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQ/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICAgIGNvbnN0IGhhc1BlbmRpbmdIYXNoVmFsdWUgPSBpbml0aWFsSW5wdXRWYWx1ZSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmVmVmFsdWUgIT09IGluaXRpYWxJbnB1dFZhbHVlKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnZGF0YUFjdGlvbkZpbHRlci1jaGFuZ2VkLWF1dG8tdHJpZ2dlcicsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBwcmV2aW91c1doZXJlOiBwcmVEYXRhQWN0aW9uRmlsdGVyPy53aGVyZSxcbiAgICAgICAgbmV3V2hlcmU6IGRhdGFBY3Rpb25GaWx0ZXIud2hlcmUsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWY6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgICBjdXJyZW50UmVmVmFsdWUsXG4gICAgICAgIGhhc1BlbmRpbmdIYXNoVmFsdWUsXG4gICAgICAgIHdpbGxDYWxsQXBwbHlRdWVyeTogIWhhc1BlbmRpbmdIYXNoVmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgYXBwbHlRdWVyeSgpXG4gICAgfVxuICB9LCBbZGF0YUFjdGlvbkZpbHRlciwgcHJlRGF0YUFjdGlvbkZpbHRlcj8ud2hlcmUsIGFwcGx5UXVlcnksIGluaXRpYWxJbnB1dFZhbHVlLCBjb25maWdJZF0pXG5cbiAgY29uc3QgcmVzZXRRdWVyeSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyAxLiByZXNldCBhdHRyaWJ1dGUgZmlsdGVyXG4gICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iailcbiAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHNxbEV4cHJPYmopXG4gICAgLy8gMi4gcmVzZXQgc3BhdGlhbCBmaWx0ZXJcbiAgICBzZXRSZXNldFN5bWJvbChTeW1ib2woKSlcbiAgfSwgW3NxbEV4cHJPYmpdKVxuXG4gIGNvbnN0IGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoc3FsT2JqOiBJTVNxbEV4cHJlc3Npb24pID0+IHtcbiAgICAvLyBMT0cgQVQgVEhFIFZFUlkgU1RBUlRcbiAgICBjb25zdCBzcWxPYmpWYWx1ZSA9IHNxbE9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgIGNvbnN0IHByZXZpb3VzUmVmVmFsdWUgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQ/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICBjb25zdCBwcmV2aW91c1N0YXRlVmFsdWUgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBmcm9tIHVzZXIgdHlwaW5nIG9yIHByb3AgY2hhbmdlXG4gICAgY29uc3QgaXNGcm9tVXNlclR5cGluZyA9IHR5cGVvZiBwcmV2aW91c1JlZlZhbHVlID09PSAnc3RyaW5nJyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHNxbE9ialZhbHVlID09PSAnb2JqZWN0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShzcWxPYmpWYWx1ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsT2JqVmFsdWVbMF0/LnZhbHVlID09PSBwcmV2aW91c1JlZlZhbHVlXG4gICAgY29uc3QgaXNGcm9tUHJvcENoYW5nZSA9IEpTT04uc3RyaW5naWZ5KHByZXZpb3VzU3RhdGVWYWx1ZSkgPT09IEpTT04uc3RyaW5naWZ5KHNxbE9ialZhbHVlKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlU3FsRXhwck9iakNoYW5nZS1jYWxsZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBzcWxPYmpFeGlzdHM6ICEhc3FsT2JqLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICBzcWxPYmpWYWx1ZSxcbiAgICAgIHNxbE9ialZhbHVlVHlwZTogdHlwZW9mIHNxbE9ialZhbHVlLFxuICAgICAgc3FsT2JqSXNBcnJheTogQXJyYXkuaXNBcnJheShzcWxPYmpWYWx1ZSksXG4gICAgICBwcmV2aW91c1JlZlZhbHVlLFxuICAgICAgcHJldmlvdXNTdGF0ZVZhbHVlLFxuICAgICAgaXNGcm9tVXNlclR5cGluZyxcbiAgICAgIGlzRnJvbVByb3BDaGFuZ2UsXG4gICAgICB0cmlnZ2VyU291cmNlOiBpc0Zyb21Vc2VyVHlwaW5nID8gJ3VzZXItdHlwaW5nJyA6IChpc0Zyb21Qcm9wQ2hhbmdlID8gJ3Byb3AtY2hhbmdlJyA6ICd1bmtub3duJyksXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgZXZlbnQ6ICdmb3JtLWhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UtQ0FMTEVEJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICBkYXRhc291cmNlUmVhZHksXG4gICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREUyxcbiAgICAgIHNxbE9ialZhbHVlLFxuICAgICAgc3FsT2JqVmFsdWVUeXBlOiB0eXBlb2Ygc3FsT2JqVmFsdWUsXG4gICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5KHNxbE9ialZhbHVlKSxcbiAgICAgIHByZXZpb3VzUmVmVmFsdWUsXG4gICAgICBwcmV2aW91c1JlZlZhbHVlVHlwZTogdHlwZW9mIHByZXZpb3VzUmVmVmFsdWUsXG4gICAgICB2YWx1ZUNoYW5nZWRGcm9tU3RyaW5nVG9BcnJheTogdHlwZW9mIHByZXZpb3VzUmVmVmFsdWUgPT09ICdzdHJpbmcnICYmIEFycmF5LmlzQXJyYXkoc3FsT2JqVmFsdWUpLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCBmaXJzdFBhcnQgPSBzcWxPYmo/LnBhcnRzPy5bMF1cbiAgICBjb25zdCB2YWx1ZSA9IGZpcnN0UGFydD8udHlwZSA9PT0gJ1NJTkdMRScgPyAoZmlyc3RQYXJ0IGFzIGFueSkudmFsdWVPcHRpb25zPy52YWx1ZSA6ICdub3Qtc2luZ2xlJ1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnc3FsLWV4cHJlc3Npb24tY2hhbmdlZCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIHBhcnRzQ291bnQ6IHNxbE9iaj8ucGFydHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgZmlyc3RQYXJ0VmFsdWU6IHZhbHVlLFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZlZhbHVlOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBpc0FycmF5Rm9ybWF0OiBBcnJheS5pc0FycmF5KHZhbHVlKSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsT2JqKVxuICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsT2JqKVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBoYXNoLXRyaWdnZXJlZCBjb252ZXJzaW9uIChzdHJpbmcgLT4gYXJyYXkpXG4gICAgLy8gV2hlbiBoYXNoIHZhbHVlIGNoYW5nZXMgZm9yIHNhbWUgY29uZmlnSWQsIFNxbEV4cHJlc3Npb25SdW50aW1lIGNvbnZlcnRzIHN0cmluZyB0byBhcnJheSBmb3JtYXRcbiAgICBpZiAoZmlyc3RQYXJ0Py50eXBlID09PSAnU0lOR0xFJyAmJiBmaXJzdFBhcnQ/LnZhbHVlT3B0aW9ucz8udmFsdWUpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZmlyc3RQYXJ0LnZhbHVlT3B0aW9ucy52YWx1ZVxuICAgICAgY29uc3QgaXNBcnJheUZvcm1hdCA9IEFycmF5LmlzQXJyYXkodmFsdWUpXG4gICAgICBjb25zdCBoYXNJbml0aWFsVmFsdWUgPSBpbml0aWFsSW5wdXRWYWx1ZSAmJiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnRcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ3NxbC1leHByZXNzaW9uLWNoYW5nZWQtY29udmVyc2lvbi1jaGVjaycsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBpc0FycmF5Rm9ybWF0LFxuICAgICAgICBoYXNJbml0aWFsVmFsdWUsXG4gICAgICAgIGhhc2hUcmlnZ2VyZWRSZWZWYWx1ZTogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgdmFsdWVUeXBlOiB0eXBlb2YgdmFsdWUsXG4gICAgICAgIHZhbHVlOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogdmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICAgIGV2ZW50OiAnZm9ybS1jb252ZXJzaW9uLWNoZWNrJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGlzQXJyYXlGb3JtYXQsXG4gICAgICAgIGhhc0luaXRpYWxWYWx1ZSxcbiAgICAgICAgaGFzaFRyaWdnZXJlZFJlZjogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgdmFsdWVUeXBlOiB0eXBlb2YgdmFsdWUsXG4gICAgICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkodmFsdWUpLFxuICAgICAgICBhcnJheUxlbmd0aDogQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5sZW5ndGggOiAnbi9hJyxcbiAgICAgICAgZmlyc3RJdGVtOiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPiAwID8gdmFsdWVbMF0gOiAnbi9hJyxcbiAgICAgICAgd2lsbENoZWNrTWF0Y2g6IGlzQXJyYXlGb3JtYXQgJiYgaGFzSW5pdGlhbFZhbHVlICYmIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIElmIHZhbHVlIGNvbnZlcnRlZCB0byBhcnJheSBmb3JtYXQgQU5EIHRoaXMgd2FzIGhhc2gtdHJpZ2dlcmVkLCBmaXJlIGV2ZW50XG4gICAgICBpZiAoaXNBcnJheUZvcm1hdCAmJiBoYXNJbml0aWFsVmFsdWUgJiYgaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlc0hhc2hWYWx1ZSA9IHZhbHVlLmxlbmd0aCA+IDAgJiYgdmFsdWVbMF0/LnZhbHVlID09PSBpbml0aWFsSW5wdXRWYWx1ZVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnc3FsLWV4cHJlc3Npb24tY2hhbmdlZC1tYXRjaGVzLWNoZWNrJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBtYXRjaGVzSGFzaFZhbHVlLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIGNvbnZlcnRlZFZhbHVlRmlyc3RJdGVtOiB2YWx1ZVswXT8udmFsdWUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBpZiAobWF0Y2hlc0hhc2hWYWx1ZSkge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtdG8tYXJyYXknLFxuICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgIGNvbnZlcnRlZFZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmlyZSBjdXN0b20gZXZlbnQgZm9yIHF1ZXJ5IGV4ZWN1dGlvbiB0byB3YWl0IG9uXG4gICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlQsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICBjb252ZXJ0ZWRWYWx1ZTogdmFsdWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXZlbnQtZGlzcGF0Y2hlZCcsXG4gICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBFWEVDVVRJT04gUE9JTlQ6IFF1ZXJ5IGV4ZWN1dGlvbiBoYXBwZW5zIEhFUkUgYWZ0ZXIgY29udmVyc2lvbiBpcyBjb25maXJtZWRcbiAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBPTkxZIHBsYWNlIHdoZXJlIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXMgc2hvdWxkIGV4ZWN1dGVcbiAgICAgICAgICAvLyBUaGUgZXZlbnQgUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlQgaGFzIGJlZW4gZGlzcGF0Y2hlZCBhYm92ZVxuICAgICAgICAgIC8vIFRoaXMgZGlyZWN0IGNhbGwgaGFuZGxlcyB0aGUgY2FzZSB3aGVyZSBjb252ZXJzaW9uIGhhcHBlbnMgc3luY2hyb25vdXNseVxuICAgICAgICAgIC8vIFRoZSBldmVudCBsaXN0ZW5lciBpbiBxdWVyeS10YXNrLnRzeCBoYW5kbGVzIHRoZSBhc3luYyBjYXNlXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICAgICAgICBldmVudDogJ2Zvcm0tZXhlY3V0aW9uLWRlY2lzaW9uLXBvaW50JyxcbiAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICBjb25kaXRpb25DaGVjazoge1xuICAgICAgICAgICAgICBoYXNoVHJpZ2dlcmVkUmVmOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICAgICAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgICAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFMsXG4gICAgICAgICAgICAgIGFsbENvbmRpdGlvbnNNZXQ6ICEhKGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCAmJiBkYXRhc291cmNlUmVhZHkgJiYgb3V0cHV0RFMpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgd2lsbEV4ZWN1dGU6ICEhKGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCAmJiBkYXRhc291cmNlUmVhZHkgJiYgb3V0cHV0RFMpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ICYmIGRhdGFzb3VyY2VSZWFkeSAmJiBvdXRwdXREUykge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtY29udmVydGVkLWV4ZWN1dGluZy1xdWVyeS1kaXJlY3RseScsXG4gICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgbm90ZTogJ0NvbnZlcnNpb24gY29tcGxldGUgLSBleGVjdXRpbmcgcXVlcnkgZGlyZWN0bHkgdmlhIGFwcGx5UXVlcnkgKGV2ZW50LWRyaXZlbiBwYXR0ZXJuKScsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnZm9ybS1XSUxMLUVYRUNVVEUtYXBwbHlRdWVyeScsXG4gICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgbm90ZTogJ0FsbCBjb25kaXRpb25zIG1ldCAtIGNhbGxpbmcgYXBwbHlRdWVyeSBhZnRlciBzZXRUaW1lb3V0KDApJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgdGhpcyBoYXBwZW5zIGFmdGVyIHRoZSBjdXJyZW50IGV2ZW50IGxvb3BcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ2Zvcm0tYXBwbHlRdWVyeS1DQUxMRUQnLFxuICAgICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBhcHBseVF1ZXJ5KClcbiAgICAgICAgICAgIH0sIDApXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgICAgICAgICBldmVudDogJ2Zvcm0tZXhlY3V0aW9uLVNLSVBQRUQnLFxuICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgIHJlYXNvbjogIWhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA/ICdoYXNoVHJpZ2dlcmVkUmVmIGlzIGZhbHNlJyA6XG4gICAgICAgICAgICAgICAgICAgICAgIWRhdGFzb3VyY2VSZWFkeSA/ICdkYXRhc291cmNlUmVhZHkgaXMgZmFsc2UnIDpcbiAgICAgICAgICAgICAgICAgICAgICAhb3V0cHV0RFMgPyAnb3V0cHV0RFMgaXMgbnVsbC91bmRlZmluZWQnIDpcbiAgICAgICAgICAgICAgICAgICAgICAndW5rbm93bicsXG4gICAgICAgICAgICAgIGNvbmRpdGlvblN0YXRlczoge1xuICAgICAgICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgICAgICAgICAgICBkYXRhc291cmNlUmVhZHksXG4gICAgICAgICAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFNcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGSVggKHIwMTguMTI1KTogUmVzZXQgZmxhZyBhZnRlciBjb252ZXJzaW9uIGRldGVjdGlvbiBjb21wbGV0ZXNcbiAgICAgICAgICAvLyBUaGlzIGFsbG93cyB0aGUgbmV4dCBoYXNoIGNoYW5nZSB0byB0cmlnZ2VyIGEgbmV3IGNvbnZlcnNpb24gY3ljbGVcbiAgICAgICAgICBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC10cmlnZ2VyZWQtcmVmLXJlc2V0LWFmdGVyLWNvbnZlcnNpb24nLFxuICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgIG5vdGU6ICdoYXNoVHJpZ2dlcmVkUmVmIHJlc2V0IHRvIGZhbHNlIGFmdGVyIGNvbnZlcnNpb24gZGV0ZWN0aW9uIGNvbXBsZXRlJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25maWdJZCwgaW5pdGlhbElucHV0VmFsdWUsIHdpZGdldElkLCBkYXRhc291cmNlUmVhZHksIG91dHB1dERTLCBhcHBseVF1ZXJ5XSlcblxuICBjb25zdCBoYW5kbGVTcGF0aWFsRmlsdGVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGZpbHRlcjogU3BhdGlhbEZpbHRlck9iaikgPT4ge1xuICAgIHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCA9IGZpbHRlclxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVSZWxhdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChyZWw6IFNwYXRpYWxSZWxhdGlvbikgPT4ge1xuICAgIHNwYXRpYWxSZWxhdGlvblJlZi5jdXJyZW50ID0gcmVsXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZUJ1ZmZlckNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4ge1xuICAgIGJ1ZmZlclJlZi5jdXJyZW50ID0geyBkaXN0YW5jZSwgdW5pdCB9XG4gIH0sIFtdKVxuXG4gIGNvbnN0IHNob3dBdHRyaWJ1dGVGaWx0ZXIgPSB1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwck9iaiAhPSBudWxsXG4gIGNvbnN0IHNob3dTcGF0aWFsRmlsdGVyID0gc3BhdGlhbEZpbHRlckVuYWJsZWQgJiYgdXNlU3BhdGlhbEZpbHRlciAmJiAoc3BhdGlhbEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgfHwgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSB8fCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMClcblxuICAvLyBEZWJ1ZyBsb2dnaW5nIGZvciBmb3JtIHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnZm9ybS1yZW5kZXItY2hlY2snLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBkYXRhc291cmNlUmVhZHksXG4gICAgICB1c2VBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICBzcWxFeHByT2JqOiBzcWxFeHByT2JqID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICBzcWxFeHByT2JqUGFydHM6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHNob3dBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICBvcmlnaW5EUzogb3JpZ2luRFMgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbm9uZScsXG4gICAgICBzaG93U3BhdGlhbEZpbHRlcixcbiAgICAgIGlzQXV0b0hlaWdodCxcbiAgICAgIG91dHB1dERTOiBvdXRwdXREUyA/ICdleGlzdHMnIDogJ251bGwnXG4gICAgfSlcbiAgfSwgW2NvbmZpZ0lkLCBkYXRhc291cmNlUmVhZHksIHVzZUF0dHJpYnV0ZUZpbHRlciwgc3FsRXhwck9iaiwgc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFMsIHNob3dTcGF0aWFsRmlsdGVyLCBpc0F1dG9IZWlnaHQsIG91dHB1dERTXSlcblxuICAvLyBMb2cgd2hlbiBmb3JtIGNvbnRlbnQgc2hvdWxkIHJlbmRlclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzaG93QXR0cmlidXRlRmlsdGVyICYmIG9yaWdpbkRTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnYXR0cmlidXRlLWZpbHRlci1yZWFkeScsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgc3FsRXhwck9ialBhcnRzOiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGF0dHJpYnV0ZUZpbHRlckxhYmVsLFxuICAgICAgICBub3RlOiAnSW5wdXQgZmllbGQgc2hvdWxkIGJlIHZpc2libGUnXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnYXR0cmlidXRlLWZpbHRlci1ub3QtcmVhZHknLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgc2hvd0F0dHJpYnV0ZUZpbHRlcixcbiAgICAgICAgb3JpZ2luRFM6IG9yaWdpbkRTID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICAgICAgc3FsRXhwck9iajogc3FsRXhwck9iaiA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgICByZWFzb246ICFzaG93QXR0cmlidXRlRmlsdGVyID8gJ3Nob3dBdHRyaWJ1dGVGaWx0ZXIgaXMgZmFsc2UnIDogJ29yaWdpbkRTIGlzIG51bGwnXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3Nob3dBdHRyaWJ1dGVGaWx0ZXIsIG9yaWdpbkRTLCBjb25maWdJZCwgc3FsRXhwck9iaiwgdXNlQXR0cmlidXRlRmlsdGVyLCBhdHRyaWJ1dGVGaWx0ZXJMYWJlbF0pXG5cbiAgLy8gQ2hlY2sgRE9NIHZpc2liaWxpdHkgYWZ0ZXIgcmVuZGVyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGZvcm1Db250ZW50UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShmb3JtQ29udGVudFJlZi5jdXJyZW50KVxuICAgICAgY29uc3QgcmVjdCA9IGZvcm1Db250ZW50UmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdmb3JtLWNvbnRlbnQtZG9tLWNoZWNrJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGV4aXN0czogISFmb3JtQ29udGVudFJlZi5jdXJyZW50LFxuICAgICAgICBkaXNwbGF5OiBjb21wdXRlZFN0eWxlLmRpc3BsYXksXG4gICAgICAgIHZpc2liaWxpdHk6IGNvbXB1dGVkU3R5bGUudmlzaWJpbGl0eSxcbiAgICAgICAgb3BhY2l0eTogY29tcHV0ZWRTdHlsZS5vcGFjaXR5LFxuICAgICAgICBoZWlnaHQ6IGNvbXB1dGVkU3R5bGUuaGVpZ2h0LFxuICAgICAgICBtYXhIZWlnaHQ6IGNvbXB1dGVkU3R5bGUubWF4SGVpZ2h0LFxuICAgICAgICBmbGV4OiBjb21wdXRlZFN0eWxlLmZsZXgsXG4gICAgICAgIGZsZXhCYXNpczogY29tcHV0ZWRTdHlsZS5mbGV4QmFzaXMsXG4gICAgICAgIHJlY3RIZWlnaHQ6IHJlY3QuaGVpZ2h0LFxuICAgICAgICByZWN0V2lkdGg6IHJlY3Qud2lkdGgsXG4gICAgICAgIGlzVmlzaWJsZTogcmVjdC5oZWlnaHQgPiAwICYmIHJlY3Qud2lkdGggPiAwLFxuICAgICAgICBwYXJlbnRIZWlnaHQ6IGZvcm1Db250ZW50UmVmLmN1cnJlbnQucGFyZW50RWxlbWVudD8uY2xpZW50SGVpZ2h0IHx8IDBcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbY29uZmlnSWQsIHNob3dBdHRyaWJ1dGVGaWx0ZXIsIG9yaWdpbkRTXSlcblxuICAvLyBMb2cgd2hlbiBTcWxFeHByZXNzaW9uUnVudGltZSBrZXkgY2hhbmdlcyAoY29tcG9uZW50IHJlbW91bnRzKSBPUiBleHByZXNzaW9uIHByb3AgY2hhbmdlc1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGV4cHJlc3Npb25WYWx1ZSA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICBjb25zdCBzcWxFeHByUnVudGltZUtleSA9IGAke2NvbmZpZ0lkfS0ke2V4cHJlc3Npb25WYWx1ZSB8fCAnZW1wdHknfWBcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ1NxbEV4cHJlc3Npb25SdW50aW1lLXByb3BzLWNoYW5nZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIHNxbEV4cHJSdW50aW1lS2V5LFxuICAgICAgZXhwcmVzc2lvblZhbHVlLFxuICAgICAgZXhwcmVzc2lvblZhbHVlVHlwZTogdHlwZW9mIGV4cHJlc3Npb25WYWx1ZSxcbiAgICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoZXhwcmVzc2lvblZhbHVlKSxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIG9yaWdpbkRTRXhpc3RzOiAhIW9yaWdpbkRTLFxuICAgICAgbm90ZTogJ0ZJWCAocjAxOC4xMjMpOiBLZXkgdXNlcyBjb25maWdJZCArIGV4cHJlc3Npb25WYWx1ZSB0byByZW1vdW50IHdoZW4gdmFsdWUgY2hhbmdlcywgbm90IHdoZW4gaW5pdGlhbElucHV0VmFsdWUgY2xlYXJzJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtjb25maWdJZCwgaW5pdGlhbElucHV0VmFsdWUsIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIG9yaWdpbkRTXSlcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIERPTSBNQU5JUFVMQVRJT04gRk9SIFNxbEV4cHJlc3Npb25SdW50aW1lIChyMDE4LjEyMi0xMjgpXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gXG4gIC8vIOKaoO+4jyBDUklUSUNBTDogRE8gTk9UIFJFTU9WRSBUSElTIFdPUktBUk9VTkQg4pqg77iPXG4gIC8vIFxuICAvLyBXSFkgVEhJUyBJUyBORUNFU1NBUlk6XG4gIC8vIFxuICAvLyBTcWxFeHByZXNzaW9uUnVudGltZSBpcyBhIFwiYmxhY2stYm94XCIgRXhCIGNvbXBvbmVudCB0aGF0IGRvZXMgTk9UIHN1cHBvcnRcbiAgLy8gcHJvZ3JhbW1hdGljIHZhbHVlIHBvcHVsYXRpb24gdmlhIGl0cyBgZXhwcmVzc2lvbmAgcHJvcC4gVGhpcyB3YXMgZGlzY292ZXJlZFxuICAvLyB0aHJvdWdoIGV4dGVuc2l2ZSB0ZXN0aW5nIChyMDE4LjEwOC0xMjgpOlxuICAvLyBcbiAgLy8gMS4gU2V0dGluZyBgZXhwcmVzc2lvbmAgcHJvcCDihpIgQ29tcG9uZW50IGRvZXMgTk9UIHBvcHVsYXRlIGl0cyB0ZXh0IGZpZWxkXG4gIC8vIDIuIENoYW5naW5nIGBleHByZXNzaW9uYCBwcm9wIOKGkiBDb21wb25lbnQgZG9lcyBOT1QgZmlyZSBvbkNoYW5nZSBldmVudFxuICAvLyAzLiBVc2luZyBga2V5YCBwcm9wIHRvIHJlbW91bnQg4oaSIENvbXBvbmVudCBzdGlsbCBkb2Vzbid0IHBvcHVsYXRlIGZpZWxkXG4gIC8vIFxuICAvLyBUaGUgY29tcG9uZW50IE9OTFkgcmVzcG9uZHMgdG8gYWN0dWFsIERPTSB1c2VyIGludGVyYWN0aW9ucyAoZm9jdXMsIGlucHV0LCBibHVyKS5cbiAgLy8gXG4gIC8vIFdIQVQgV0UgTkVFRCBUTyBBQ0hJRVZFOlxuICAvLyBcbiAgLy8gV2hlbiBhIGhhc2ggcGFyYW1ldGVyIGFycml2ZXMgKGUuZy4sICNwaW49MjIyMzA1OTAxMyksIHdlIG5lZWQgdG86XG4gIC8vIDEuIFBvcHVsYXRlIHRoZSBTcWxFeHByZXNzaW9uUnVudGltZSB0ZXh0IGZpZWxkIHdpdGggXCIyMjIzMDU5MDEzXCJcbiAgLy8gMi4gVHJpZ2dlciBTcWxFeHByZXNzaW9uUnVudGltZSdzIG9uQ2hhbmdlIGhhbmRsZXJcbiAgLy8gMy4gQWxsb3cgaXQgdG8gY29udmVydCBzdHJpbmcg4oaSIGFycmF5IGZvcm1hdCBpbnRlcm5hbGx5XG4gIC8vIDQuIEV4ZWN1dGUgdGhlIHF1ZXJ5IHdpdGggdGhlIGNvcnJlY3RseSBmb3JtYXR0ZWQgdmFsdWVcbiAgLy8gXG4gIC8vIFRIRSBTT0xVVElPTjpcbiAgLy8gXG4gIC8vIFNpbXVsYXRlIHVzZXIgaW50ZXJhY3Rpb24gYnkgZGlyZWN0bHkgbWFuaXB1bGF0aW5nIHRoZSBET00gaW5wdXQgZmllbGQ6XG4gIC8vIFxuICAvLyAxLiBNdXRhdGlvbk9ic2VydmVyIHdhdGNoZXMgZm9yIGlucHV0W3R5cGU9XCJ0ZXh0XCJdIHRvIGFwcGVhciBpbiBET01cbiAgLy8gMi4gRG91YmxlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBlbnN1cmVzIFJlYWN0IGhhcyBhdHRhY2hlZCBldmVudCBoYW5kbGVyc1xuICAvLyAzLiBmb2N1cygpIOKGkiBzZXQgdmFsdWUg4oaSIGRpc3BhdGNoIGV2ZW50cyDihpIgYmx1cigpXG4gIC8vIDQuIFNxbEV4cHJlc3Npb25SdW50aW1lLm9uQ2hhbmdlIGZpcmVzIG5hdHVyYWxseVxuICAvLyA1LiBJbnRlcm5hbCBzdHJpbmfihpJhcnJheSBjb252ZXJzaW9uIGhhcHBlbnNcbiAgLy8gNi4gUXVlcnkgZXhlY3V0ZXMgd2l0aCBjb3JyZWN0IGFycmF5IGZvcm1hdFxuICAvLyBcbiAgLy8gQUxURVJOQVRJVkVTIEFUVEVNUFRFRCAoQUxMIEZBSUxFRCk6XG4gIC8vIFxuICAvLyAtIOKdjCBEaXJlY3QgYXBwbHlRdWVyeSgpIGNhbGwg4oaSIFdyb25nIGZvcm1hdCAoc3RyaW5nIGluc3RlYWQgb2YgYXJyYXkpXG4gIC8vIC0g4p2MIFVwZGF0aW5nIGV4cHJlc3Npb24gcHJvcCDihpIgQ29tcG9uZW50IGlnbm9yZXMgaXRcbiAgLy8gLSDinYwgS2V5LWJhc2VkIHJlbW91bnQg4oaSIENvbXBvbmVudCBkb2Vzbid0IHBvcHVsYXRlIGZyb20gcHJvcFxuICAvLyAtIOKdjCBDYWxsaW5nIG9uQ2hhbmdlIG1hbnVhbGx5IOKGkiBObyBhY2Nlc3MgdG8gaW50ZXJuYWwgc3RhdGVcbiAgLy8gXG4gIC8vIFRJTUlORyBSRVFVSVJFTUVOVFM6XG4gIC8vIFxuICAvLyAtIE11dGF0aW9uT2JzZXJ2ZXI6IEV2ZW50LWRyaXZlbiBkZXRlY3Rpb24gd2hlbiBpbnB1dCBhcHBlYXJzXG4gIC8vIC0gRG91YmxlIFJBRjogRW5zdXJlcyBSZWFjdCBjb21taXQgcGhhc2UgY29tcGxldGVzIChoYW5kbGVycyBhdHRhY2hlZClcbiAgLy8gLSBmb2N1cy9ibHVyIGN5Y2xlOiBUcmlnZ2VycyBTcWxFeHByZXNzaW9uUnVudGltZSdzIGludGVybmFsIGxvZ2ljXG4gIC8vIFxuICAvLyBNQUlOVEVOQU5DRSBOT1RFUzpcbiAgLy8gXG4gIC8vIC0gVGhpcyB3b3JrYXJvdW5kIGlzIFJFUVVJUkVEIGZvciBoYXNoIHBhcmFtZXRlciBleGVjdXRpb25cbiAgLy8gLSBJZiBFc3JpIHVwZGF0ZXMgU3FsRXhwcmVzc2lvblJ1bnRpbWUgdG8gc3VwcG9ydCBwcm9ncmFtbWF0aWMgcG9wdWxhdGlvbiwgXG4gIC8vICAgdGhpcyBjYW4gYmUgcmVtb3ZlZFxuICAvLyAtIFRlc3RlZCBleHRlbnNpdmVseSBpbiByMDE4LjEwOC0xMjggKHNlZSBDVVJSRU5UX1dPUksubWQpXG4gIC8vIC0gRGVidWcgc3dpdGNoOiBGT1JNIChxdWVyeS10YXNrLWZvcm0gZXZlbnRzKVxuICAvLyBcbiAgLy8gU2VlOiBTUUxFWFBSRVNTSU9OX1JVTlRJTUVfRE9NX1dPUktBUk9VTkQubWQgZm9yIGZ1bGwgZGV0YWlsc1xuICAvLyBcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc3FsRXhwclJ1bnRpbWVDb250YWluZXJSZWYuY3VycmVudCB8fCAhb3JpZ2luRFMpIHJldHVyblxuICAgIFxuICAgIC8vIEZJWCAocjAxOC4xMjQpOiBTaW1wbGlmeSAtIHVzZSBpbml0aWFsSW5wdXRWYWx1ZSAodGhlIGhhc2ggcGFyYW1ldGVyKSBkaXJlY3RseVxuICAgIC8vIFRoZSBvbGQgd29ya2luZyBjb2RlIGNoZWNrZWQgYWdhaW5zdCBpbml0aWFsSW5wdXRWYWx1ZSwgbm90IGV4cHJlc3Npb25WYWx1ZVxuICAgIC8vIFRoaXMgdXNlRWZmZWN0IG5vdyBkZXBlbmRzIG9uIGluaXRpYWxJbnB1dFZhbHVlLCBzbyBpdCByZS1ydW5zIGZvciBlYWNoIGhhc2ggY2hhbmdlXG4gICAgaWYgKGluaXRpYWxJbnB1dFZhbHVlICYmIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgY29udGFpbmVyID0gc3FsRXhwclJ1bnRpbWVDb250YWluZXJSZWYuY3VycmVudFxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1kb20tcG9wdWxhdGlvbi1hdHRlbXB0JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICBoYXNDb250YWluZXI6ICEhY29udGFpbmVyLFxuICAgICAgICBoYXNoVHJpZ2dlcmVkUmVmOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gRnVuY3Rpb24gdG8gcG9wdWxhdGUgdGhlIGlucHV0IGZpZWxkIHdoZW4gZm91bmRcbiAgICAgIGNvbnN0IHBvcHVsYXRlSW5wdXRGaWVsZCA9IChpbnB1dEZpZWxkOiBIVE1MSW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGlucHV0RmllbGQudmFsdWVcbiAgICAgICAgXG4gICAgICAgIC8vIEZJWCAocjAxOC4xMjQpOiBVc2Ugb2xkIHdvcmtpbmcgbG9naWMgLSB1cGRhdGUgaWYgZW1wdHkgT1IgZGlmZmVyZW50IGZyb20gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgY29uc3Qgc2hvdWxkVXBkYXRlID0gIWN1cnJlbnRWYWx1ZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUudHJpbSgpID09PSAnJyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgIT09IGluaXRpYWxJbnB1dFZhbHVlXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLWRvbS1pbnB1dC1mb3VuZCcsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgY3VycmVudFZhbHVlLFxuICAgICAgICAgIHRhcmdldFZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICBzaG91bGRVcGRhdGUsXG4gICAgICAgICAgaGFzaFRyaWdnZXJlZFJlZjogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgICAgIGlucHV0VHlwZTogaW5wdXRGaWVsZC50eXBlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgICAgIC8vIEZJWCAocjAxOC4xMjUpOiBVc2UgZG91YmxlIFJBRiB0byBlbnN1cmUgU3FsRXhwcmVzc2lvblJ1bnRpbWUgaXMgZnVsbHkgaW5pdGlhbGl6ZWRcbiAgICAgICAgICAvLyBXaGVuIE11dGF0aW9uT2JzZXJ2ZXIgZmluZHMgdGhlIGlucHV0LCBSZWFjdCBtYXkgbm90IGhhdmUgZmluaXNoZWQgYXR0YWNoaW5nIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgICAgLy8gRG91YmxlIFJBRiB3YWl0cyBmb3IgYnJvd3NlciBwYWludCArIFJlYWN0IGNvbW1pdCBwaGFzZSB0byBjb21wbGV0ZSAoZXZlbnQtZHJpdmVuLCBubyBzZXRUaW1lb3V0KVxuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLWRvbS1zdGFydGluZy1tYW5pcHVsYXRpb24tYWZ0ZXItcmFmJyxcbiAgICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgbm90ZTogJ0RvdWJsZSBSQUYgY29tcGxldGUgLSBTcWxFeHByZXNzaW9uUnVudGltZSBzaG91bGQgYmUgZnVsbHkgaW5pdGlhbGl6ZWQnLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRm9jdXMgdGhlIGlucHV0IGZpcnN0IChjcml0aWNhbCBmb3IgUmVhY3Qgc3ludGhldGljIGV2ZW50cylcbiAgICAgICAgICAgICAgaW5wdXRGaWVsZC5mb2N1cygpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLWRvbS1pbnB1dC1mb2N1c2VkJyxcbiAgICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgaXNGb2N1c2VkOiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBpbnB1dEZpZWxkLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZVxuICAgICAgICAgICAgICBpbnB1dEZpZWxkLnZhbHVlID0gU3RyaW5nKGluaXRpYWxJbnB1dFZhbHVlKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAnaGFzaC1kb20tdmFsdWUtc2V0JyxcbiAgICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgaW5wdXRGaWVsZFZhbHVlQWZ0ZXI6IGlucHV0RmllbGQudmFsdWUsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEaXNwYXRjaCBpbnB1dCBldmVudCB3aXRoIHByb3BlciBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgIGNvbnN0IGlucHV0RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnB1dEV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXRGaWVsZCwgZW51bWVyYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICBpbnB1dEZpZWxkLmRpc3BhdGNoRXZlbnQoaW5wdXRFdmVudClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERpc3BhdGNoIGNoYW5nZSBldmVudFxuICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VFdmVudCA9IG5ldyBFdmVudCgnY2hhbmdlJywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjaGFuZ2VFdmVudCwgJ3RhcmdldCcsIHsgdmFsdWU6IGlucHV0RmllbGQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgaW5wdXRGaWVsZC5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQWxzbyB1c2UgUmVhY3QncyBuYXRpdmUgdmFsdWUgc2V0dGVyIGFwcHJvYWNoXG4gICAgICAgICAgICAgIGNvbnN0IG5hdGl2ZUlucHV0VmFsdWVTZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHdpbmRvdy5IVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZSwgJ3ZhbHVlJyk/LnNldFxuICAgICAgICAgICAgICBpZiAobmF0aXZlSW5wdXRWYWx1ZVNldHRlcikge1xuICAgICAgICAgICAgICAgIG5hdGl2ZUlucHV0VmFsdWVTZXR0ZXIuY2FsbChpbnB1dEZpZWxkLCBTdHJpbmcoaW5pdGlhbElucHV0VmFsdWUpKVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWN0RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgaW5wdXRGaWVsZC5kaXNwYXRjaEV2ZW50KHJlYWN0RXZlbnQpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ2hhc2gtZG9tLWV2ZW50cy1kaXNwYXRjaGVkJyxcbiAgICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgaW5wdXRFdmVudERpc3BhdGNoZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY2hhbmdlRXZlbnREaXNwYXRjaGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlYWN0RXZlbnREaXNwYXRjaGVkOiAhIW5hdGl2ZUlucHV0VmFsdWVTZXR0ZXIsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBCbHVyIHRvIHRyaWdnZXIgYW55IHZhbGlkYXRpb24gb3Igc3RhdGUgdXBkYXRlcyAoY3JpdGljYWwgZm9yIFNxbEV4cHJlc3Npb25SdW50aW1lLm9uQ2hhbmdlKVxuICAgICAgICAgICAgICBpbnB1dEZpZWxkLmJsdXIoKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAnaGFzaC1kb20tdmFsdWUtcG9wdWxhdGVkJyxcbiAgICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgbm90ZTogJ0RPTSBtYW5pcHVsYXRpb24gY29tcGxldGUgLSBTcWxFeHByZXNzaW9uUnVudGltZS5vbkNoYW5nZSBzaG91bGQgZmlyZSBhbmQgZGV0ZWN0IGNvbnZlcnNpb24nLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRklYIChyMDE4LjEyNSk6IERvbid0IHJlc2V0IGZsYWcgaGVyZSAtIGJsdXIoKSBpcyBhc3luYyBhbmQgdHJpZ2dlcnMgb25DaGFuZ2VcbiAgICAgICAgICAgICAgLy8gVGhlIGZsYWcgd2lsbCBiZSByZXNldCBpbiBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGFmdGVyIGNvbnZlcnNpb24gaXMgZGV0ZWN0ZWRcbiAgICAgICAgICAgICAgLy8gUmVzZXR0aW5nIGl0IGhlcmUgY2F1c2VzIG9uQ2hhbmdlIHRvIHNlZSBmYWxzZSBhbmQgc2tpcCB0aGUgY29udmVyc2lvbiBldmVudFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRyeSB0byBmaW5kIGlucHV0IGZpZWxkIGltbWVkaWF0ZWx5IChpdCBtaWdodCBhbHJlYWR5IGV4aXN0KVxuICAgICAgLy8gU3FsRXhwcmVzc2lvblJ1bnRpbWUgdXNlcyBpbnB1dFt0eXBlPVwidGV4dFwiXSwgbm90IHRleHRhcmVhXG4gICAgICBjb25zdCBpbnB1dEZpZWxkID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgXG4gICAgICBpZiAoaW5wdXRGaWVsZCkge1xuICAgICAgICAvLyBGb3VuZCBpdCBpbW1lZGlhdGVseSAtIHBvcHVsYXRlIGl0XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtZG9tLWlucHV0LWZvdW5kLWltbWVkaWF0ZWx5JyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcG9wdWxhdGVJbnB1dEZpZWxkKGlucHV0RmllbGQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3QgZm91bmQgeWV0IC0gdXNlIE11dGF0aW9uT2JzZXJ2ZXIgdG8gd2F0Y2ggZm9yIGl0IChldmVudC1kcml2ZW4sIG5vIHRpbWVycylcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC1kb20taW5wdXQtbm90LWZvdW5kLXdhdGNoaW5nJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBub3RlOiAnU2V0dGluZyB1cCBNdXRhdGlvbk9ic2VydmVyIHRvIHdhdGNoIGZvciBpbnB1dFt0eXBlPVwidGV4dFwiXSBhcHBlYXJhbmNlJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlucHV0RmllbGQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cInRleHRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICAgICAgaWYgKGlucHV0RmllbGQpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLWRvbS1pbnB1dC1hcHBlYXJlZCcsXG4gICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICBub3RlOiAnTXV0YXRpb25PYnNlcnZlciBkZXRlY3RlZCBpbnB1dFt0eXBlPVwidGV4dFwiXSBpbiBET00nLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBvcHVsYXRlSW5wdXRGaWVsZChpbnB1dEZpZWxkKVxuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpIC8vIFN0b3Agd2F0Y2hpbmcgb25jZSB3ZSd2ZSBmb3VuZCBhbmQgcG9wdWxhdGVkIGl0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLWRvbS1vYnNlcnZlci1kaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFdhdGNoIGZvciBhbnkgY2hpbGQgZWxlbWVudHMgYmVpbmcgYWRkZWQgdG8gdGhlIGNvbnRhaW5lclxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGNvbnRhaW5lciwge1xuICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSwgIC8vIFdhdGNoIGZvciBjaGlsZHJlbiBiZWluZyBhZGRlZC9yZW1vdmVkXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZSAgICAgLy8gV2F0Y2ggdGhlIGVudGlyZSBzdWJ0cmVlXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdoYXNoLWRvbS1vYnNlcnZlci1zdGFydGVkJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIENsZWFudXA6IHN0b3Agd2F0Y2hpbmcgd2hlbiBjb21wb25lbnQgdW5tb3VudHMgb3IgZGVwZW5kZW5jaWVzIGNoYW5nZVxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC1kb20tb2JzZXJ2ZXItY2xlYW51cCcsXG4gICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBvcmlnaW5EUywgY29uZmlnSWQsIGluaXRpYWxJbnB1dFZhbHVlXSlcblxuICByZXR1cm4gKFxuICAgIDxRdWVyeVRhc2tDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IHJlc2V0U3ltYm9sIH19PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LWZvcm0nIGNzcz17Z2V0Rm9ybVN0eWxlKGlzQXV0b0hlaWdodCl9PlxuICAgICAgICA8ZGl2IHJlZj17Zm9ybUNvbnRlbnRSZWZ9IGNsYXNzTmFtZT0ncXVlcnktZm9ybV9fY29udGVudCcgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufT5cbiAgICAgICAgICB7c2hvd0F0dHJpYnV0ZUZpbHRlciAmJiAoXG4gICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICByb2xlPSdncm91cCcgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0ncHgtNCcgXG4gICAgICAgICAgICAgIGNzcz17Y3NzYHBhZGRpbmctdG9wOiAycHg7YH1cbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YXR0cmlidXRlRmlsdGVyTGFiZWx9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmb3JtLXRpdGxlIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdkLW5vbmUnOiAhYXR0cmlidXRlRmlsdGVyTGFiZWwgJiYgIWF0dHJpYnV0ZUZpbHRlckRlc2MgfSl9IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB7YXR0cmlidXRlRmlsdGVyTGFiZWwgJiYgPGRpdiBjbGFzc05hbWU9J21yLTIgdGl0bGUyJz57YXR0cmlidXRlRmlsdGVyTGFiZWx9PC9kaXY+fVxuICAgICAgICAgICAgICAgIHthdHRyaWJ1dGVGaWx0ZXJEZXNjICYmIChcbiAgICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gdGl0bGU9e2F0dHJpYnV0ZUZpbHRlckRlc2N9PlxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyBpY29uIHR5cGU9J3RlcnRpYXJ5Jz48SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPjwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7b3JpZ2luRFMgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPXtzcWxFeHByUnVudGltZUNvbnRhaW5lclJlZn0gY3NzPXtjc3NgbWFyZ2luOiAtMTBweCAwcHg7YH0+XG4gICAgICAgICAgICAgICAgICA8U3FsRXhwcmVzc2lvblJ1bnRpbWVcbiAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtjb25maWdJZH0tJHthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlIHx8ICdlbXB0eSd9YH1cbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlPXtvcmlnaW5EU31cbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbj17YXR0cmlidXRlRmlsdGVyU3FsRXhwck9ian1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNxbEV4cHJPYmpDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7c2hvd0F0dHJpYnV0ZUZpbHRlciAmJiBzaG93U3BhdGlhbEZpbHRlciAmJiAoXG4gICAgICAgICAgICA8aHIgY2xhc3NOYW1lPSdtLTQnIGNzcz17Y3NzYGJvcmRlcjogbm9uZTsgaGVpZ2h0OiAxcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7YH0vPlxuICAgICAgICAgICl9XG4gICAgICAgICAge3Nob3dTcGF0aWFsRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxRdWVyeVRhc2tTcGF0aWFsRm9ybVxuICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgIGxhYmVsPXtzcGF0aWFsRmlsdGVyTGFiZWx9XG4gICAgICAgICAgICAgIGRlc2M9e3NwYXRpYWxGaWx0ZXJEZXNjfVxuICAgICAgICAgICAgICBmaWx0ZXJUeXBlcz17c3BhdGlhbEZpbHRlclR5cGVzfVxuICAgICAgICAgICAgICBtYXBXaWRnZXRJZHM9e3NwYXRpYWxNYXBXaWRnZXRJZHN9XG4gICAgICAgICAgICAgIGNyZWF0ZVRvb2xUeXBlcz17c3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzfVxuICAgICAgICAgICAgICBvbkZpbHRlckNoYW5nZT17aGFuZGxlU3BhdGlhbEZpbHRlckNoYW5nZX1cbiAgICAgICAgICAgICAgb25SZWxhdGlvbkNoYW5nZT17aGFuZGxlUmVsYXRpb25DaGFuZ2V9XG4gICAgICAgICAgICAgIG9uQnVmZmVyQ2hhbmdlPXtoYW5kbGVCdWZmZXJDaGFuZ2V9XG4gICAgICAgICAgICAgIHNwYXRpYWxSZWxhdGlvbnM9e3NwYXRpYWxSZWxhdGlvbnN9XG4gICAgICAgICAgICAgIGRzRW5hYmxlQnVmZmVyPXtzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXJ9XG4gICAgICAgICAgICAgIGRzQnVmZmVyRGlzdGFuY2U9e3NwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlfVxuICAgICAgICAgICAgICBkc0J1ZmZlclVuaXQ9e3NwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXR9XG4gICAgICAgICAgICAgIGRyYXdFbmFibGVCdWZmZXI9e3NwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcn1cbiAgICAgICAgICAgICAgZHJhd0J1ZmZlckRpc3RhbmNlPXtzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJEaXN0YW5jZX1cbiAgICAgICAgICAgICAgZHJhd0J1ZmZlclVuaXQ9e3NwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXR9XG4gICAgICAgICAgICAgIHVzZURhdGFTb3VyY2VzPXtzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlc31cbiAgICAgICAgICAgICAgdXNlUnVudGltZURhdGE9e3NwYXRpYWxJbmNsdWRlUnVudGltZURhdGF9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktZm9ybV9fYWN0aW9ucyBweC00IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgY2hlY2tlZD17cnVudGltZVpvb21Ub1NlbGVjdGVkfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhfLCBjaGVja2VkKSA9PiBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWQoY2hlY2tlZCl9XG4gICAgICAgICAgICBjbGFzc05hbWU9J21yLTInXG4gICAgICAgICAgLz5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21yLWF1dG8nIGNzcz17Y3NzYGZvbnQtc2l6ZTogMC44NzVyZW07IGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtgfT5cbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgnem9vbVRvU2VsZWN0ZWQnKX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPEJ1dHRvbiByZWY9e2FwcGx5QnV0dG9uUmVmfSBjb2xvcj0ncHJpbWFyeScgY2xhc3NOYW1lPSdtbC1hdXRvJyBkaXNhYmxlZD17IWRhdGFzb3VyY2VSZWFkeSB8fCAhaXNJbnB1dFZhbGlkfSBvbkNsaWNrPXthcHBseVF1ZXJ5fT5cbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgnYXBwbHknKX1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICB7KHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA+IDAgfHwgc2hvd1NwYXRpYWxGaWx0ZXIpICYmIChcbiAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdtbC0yJyBvbkNsaWNrPXtyZXNldFF1ZXJ5fT57Z2V0STE4bk1lc3NhZ2UoJ3Jlc2V0Jyl9PC9CdXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L1F1ZXJ5VGFza0NvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIHR5cGUgSWNvblJlc3VsdCwgdHlwZSBJbW11dGFibGVPYmplY3QgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBJY29uIH0gZnJvbSAnamltdS11aSdcblxuaW50ZXJmYWNlIENvbnRlbnRQcm9wcyB7XG4gIGljb24/OiBJY29uUmVzdWx0IHwgSW1tdXRhYmxlT2JqZWN0PEljb25SZXN1bHQ+XG4gIG5hbWU6IHN0cmluZ1xufVxuXG5jb25zdCB0ZXh0U3R5bGUgPSBjc3NgXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGZvbnQtc2l6ZTogMC44NzVyZW07XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tMYWJlbCAocHJvcHM6IENvbnRlbnRQcm9wcykge1xuICBjb25zdCB7IGljb24sIG5hbWUgfSA9IHByb3BzXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciB0ZXh0LXRydW5jYXRlJyBjc3M9e3RleHRTdHlsZX0+XG4gICAgICB7aWNvbiAmJiA8SWNvbiBjbGFzc05hbWU9J3F1ZXJ5LXRhc2staWNvbiBtci0yJyBpY29uPXtpY29uLnN2Z30gLz59XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZScgdGl0bGU9e25hbWV9PlxuICAgICAgICB7bmFtZX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSW1tdXRhYmxlQXJyYXksIGNsYXNzTmFtZXMsIGxvZGFzaCwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFNpemUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlUYXNrIH0gZnJvbSAnLi9xdWVyeS10YXNrJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGlzdCB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0J1xuaW1wb3J0IHsgVGFza0xpc3RQb3BwZXJXcmFwcGVyIH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QtcG9wcGVyLXdyYXBwZXInXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcblxuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB3aWRnZXRMYWJlbDogc3RyaW5nXG4gIHdyYXA6IGJvb2xlYW5cbiAgbWluU2l6ZTogU2l6ZVxuICBkZWZhdWx0U2l6ZTogU2l6ZVxuICBxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9XG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG59XG5cbmNvbnN0IFNQQUNFID0gOFxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgPiBkaXYge1xuICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICB9XG5gXG5cbi8vIHNob3cgdGFzayBsYWJlbCBhbmQgYW4gYXJyb3cgdG8gdGhlIHRhc2sgY29udGVudFxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tMaXN0SW5saW5lIChwcm9wczogUXVlcnlUYXNrTGlzdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtcywgd2lkZ2V0SWQsIG1pblNpemUsIGRlZmF1bHRTaXplLCBkZWZhdWx0UGFnZVNpemUsIHdpZGdldExhYmVsLCB3cmFwID0gZmFsc2UgfSA9IHByb3BzXG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBjb250YWluZXJXaWR0aFJlZiA9IFJlYWN0LnVzZVJlZjxudW1iZXI+KDApXG4gIGNvbnN0IGNvbnRlbnRXaWR0aFJlZiA9IFJlYWN0LnVzZVJlZjx7IFtrZXk6IHN0cmluZ106IG51bWJlciB9Pih7fSlcbiAgY29uc3QgW251bU9mRXhwYW5kZWQsIHNldE51bU9mRXhwYW5kZWRdID0gUmVhY3QudXNlU3RhdGUocXVlcnlJdGVtcy5sZW5ndGgpXG4gIGNvbnN0IFtvcGVuZWRQb3BwZXIsIHNldE9wZW5lZFBvcHBlcl0gPSBSZWFjdC51c2VTdGF0ZSgtMSlcbiAgY29uc3QgcmVzaXplT2JzZXJ2ZXJSZWYgPSBSZWFjdC51c2VSZWY8UmVzaXplT2JzZXJ2ZXI+KG51bGwpXG5cbiAgY29uc3QgYWRqdXN0Q29udGVudCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBsZXQgdG90YWwgPSAwXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1PZkV4cGFuZGVkOyBpKyspIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBxdWVyeUl0ZW1zW2ldXG4gICAgICBjb25zdCBpdGVtV2lkdGggPSBjb250ZW50V2lkdGhSZWYuY3VycmVudFtpdGVtLmNvbmZpZ0lkXVxuICAgICAgaWYgKGl0ZW1XaWR0aCA+IDApIHtcbiAgICAgICAgdG90YWwgKz0gaXRlbVdpZHRoICsgU1BBQ0VcbiAgICAgICAgaWYgKHRvdGFsID49IGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgJiYgbnVtT2ZFeHBhbmRlZCAhPT0gaSkge1xuICAgICAgICAgIHNldE51bU9mRXhwYW5kZWQoaSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC8vIGNvbnRlbnQgd2lkdGggbm90IHJlYWR5XG4gICAgICB9XG4gICAgfVxuICAgIHNldE51bU9mRXhwYW5kZWQocXVlcnlJdGVtcy5sZW5ndGgpXG4gIH0sIFtudW1PZkV4cGFuZGVkLCBxdWVyeUl0ZW1zXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZXNpemVPYnNlcnZlclJlZi5jdXJyZW50KSB7XG4gICAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgIH1cbiAgICAvLyBiaW5kIHdpdGggdGhlIG5ldyBldmVudCBoYW5kbGVyXG4gICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudCA9IG5ldyBSZXNpemVPYnNlcnZlcihsb2Rhc2gudGhyb3R0bGUoKGVudHJpZXMpID0+IHtcbiAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKVxuICAgICAgaWYgKGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgIT09IHdpZHRoKSB7XG4gICAgICAgIGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgPSB3aWR0aFxuICAgICAgICBhZGp1c3RDb250ZW50KClcbiAgICAgIH1cbiAgICB9LCAyMDApKVxuICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQub2JzZXJ2ZShjb250YWluZXJSZWYuY3VycmVudClcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgIH1cbiAgfSwgW2FkanVzdENvbnRlbnRdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgPSBjb250YWluZXJSZWYuY3VycmVudD8uY2xpZW50V2lkdGhcbiAgICBhZGp1c3RDb250ZW50KClcbiAgfSlcblxuICBjb25zdCBoYW5kbGVJdGVtV2lkdGhDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5kZXg6IG51bWJlciwgd2lkdGg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5SXRlbSA9IHF1ZXJ5SXRlbXNbaW5kZXhdXG4gICAgaWYgKGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W3F1ZXJ5SXRlbS5jb25maWdJZF0gIT09IHdpZHRoKSB7XG4gICAgICBjb250ZW50V2lkdGhSZWYuY3VycmVudFtxdWVyeUl0ZW0uY29uZmlnSWRdID0gd2lkdGhcbiAgICAgIGFkanVzdENvbnRlbnQoKVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbXMsIGFkanVzdENvbnRlbnRdKVxuXG4gIGNvbnN0IGhhbmRsZVBvcHBlck9wZW5lZENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyLCBpc09wZW46IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBzZXRPcGVuZWRQb3BwZXIoaW5kZXgpXG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gb3BlbmVkUG9wcGVyKSB7XG4gICAgICAvLyBjdXJyZW50IHBvcHBlciBpcyBjbG9zZWRcbiAgICAgIHNldE9wZW5lZFBvcHBlcigtMSlcbiAgICB9XG4gIH0sIFtvcGVuZWRQb3BwZXJdKVxuXG4gIGNvbnN0IFtleHBhbmRlZEFycmF5LCBub25FeHBhbmRlZEFycmF5XSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGV4cGFuZGVkQXJyYXkgPSBbXVxuICAgIGNvbnN0IG5vbkV4cGFuZGVkQXJyYXkgPSBbXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVlcnlJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgPCBudW1PZkV4cGFuZGVkKSB7XG4gICAgICAgIGV4cGFuZGVkQXJyYXkucHVzaChxdWVyeUl0ZW1zW2ldKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9uRXhwYW5kZWRBcnJheS5wdXNoKHF1ZXJ5SXRlbXNbaV0pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbZXhwYW5kZWRBcnJheSwgbm9uRXhwYW5kZWRBcnJheV1cbiAgfSwgW3F1ZXJ5SXRlbXMsIG51bU9mRXhwYW5kZWRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiByZWY9e2NvbnRhaW5lclJlZn0gY3NzPXtzdHlsZX0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdydW50aW1lLXF1ZXJ5X19xdWVyeS1saXN0IGgtMTAwIGQtZmxleCcsIHsgJ2ZsZXgtd3JhcCc6IHdyYXAsICdhbGlnbi1jb250ZW50LXN0YXJ0Jzogd3JhcCB9KX0+XG4gICAgICB7ZXhwYW5kZWRBcnJheS5tYXAoKHF1ZXJ5SXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgICAgICAgcmV0dXJuIDxUYXNrTGlzdFBvcHBlcldyYXBwZXJcbiAgICAgICAgICBpZD17aW5kZXh9XG4gICAgICAgICAga2V5PXtjdXJyZW50SXRlbS5jb25maWdJZH1cbiAgICAgICAgICBpY29uPXtjdXJyZW50SXRlbS5pY29ufVxuICAgICAgICAgIGJ1dHRvblR5cGU9J2RlZmF1bHQnXG4gICAgICAgICAgbGFiZWw9e2N1cnJlbnRJdGVtLmRpc3BsYXlMYWJlbCA/IGN1cnJlbnRJdGVtLm5hbWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgcG9wcGVyVGl0bGU9e2N1cnJlbnRJdGVtLm5hbWV9XG4gICAgICAgICAgb25XaWR0aENoYW5nZT17aGFuZGxlSXRlbVdpZHRoQ2hhbmdlfVxuICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgIG9uT3BlbmVkQ2hhbmdlPXtoYW5kbGVQb3BwZXJPcGVuZWRDaGFuZ2V9XG4gICAgICAgICAgZm9yY2VDbG9zZT17b3BlbmVkUG9wcGVyID49IDAgJiYgb3BlbmVkUG9wcGVyICE9PSBpbmRleH1cbiAgICAgICAgPlxuICAgICAgICAgIDxRdWVyeVRhc2tcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgIHRvdGFsPXsxfVxuICAgICAgICAgICAgaXNJblBvcHBlclxuICAgICAgICAgICAgcXVlcnlJdGVtPXtjdXJyZW50SXRlbX1cbiAgICAgICAgICAgIHdyYXBwZWRJblBvcHBlcj17dHJ1ZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0ncGItNCdcbiAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfVxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU9e2N1cnJlbnRJdGVtLnNob3J0SWQgPT09IHByb3BzLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID8gcHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWUudmFsdWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtwcm9wcy5vbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZD17Y3VycmVudEl0ZW0uc2hvcnRJZH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1Rhc2tMaXN0UG9wcGVyV3JhcHBlcj5cbiAgICAgIH0pfVxuXG4gICAgICB7bm9uRXhwYW5kZWRBcnJheS5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgIGlkPXtleHBhbmRlZEFycmF5Lmxlbmd0aCArIDF9XG4gICAgICAgICAgaWNvbj17aWNvbk1hcC5pY29uTW9yZX1cbiAgICAgICAgICBtaW5TaXplPXttaW5TaXplfVxuICAgICAgICAgIGJ1dHRvblR5cGU9J2RlZmF1bHQnXG4gICAgICAgICAgcG9wcGVyVGl0bGU9e3dpZGdldExhYmVsfVxuICAgICAgICAgIGRlZmF1bHRTaXplPXtkZWZhdWx0U2l6ZX1cbiAgICAgICAgICBvbk9wZW5lZENoYW5nZT17aGFuZGxlUG9wcGVyT3BlbmVkQ2hhbmdlfVxuICAgICAgICAgIGZvcmNlQ2xvc2U9e29wZW5lZFBvcHBlciA+PSAwICYmIG9wZW5lZFBvcHBlciAhPT0gZXhwYW5kZWRBcnJheS5sZW5ndGggKyAxfVxuICAgICAgICA+XG4gICAgICAgICAgPFF1ZXJ5VGFza0xpc3Qgd2lkZ2V0SWQ9e3dpZGdldElkfSBpc0luUG9wcGVyIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfSBxdWVyeUl0ZW1zPXtub25FeHBhbmRlZEFycmF5IGFzIGFueX0gY2xhc3NOYW1lPSdwYi00JyBpbml0aWFsUXVlcnlWYWx1ZT17cHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWV9IG9uSGFzaFBhcmFtZXRlclVzZWQ9e3Byb3BzLm9uSGFzaFBhcmFtZXRlclVzZWR9IC8+XG4gICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSWNvblJlc3VsdCwgdHlwZSBJbW11dGFibGVPYmplY3QsIGxvZGFzaCwgY2xhc3NOYW1lcywgaG9va3MsIGlzS2V5Ym9hcmRNb2RlLCBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgSWNvbiwgTW9iaWxlUGFuZWwsIHR5cGUgU2l6ZSwgdHlwZSBCdXR0b25UeXBlLCBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTLCBGbG9hdGluZ1BhbmVsLCB0eXBlIFNoaWZ0T3B0aW9ucyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBXSURHRVRfVkVSU0lPTiB9IGZyb20gJy4uL3ZlcnNpb24nXG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFza0xpc3RQb3BwZXJXcmFwcGVyUHJvcHMge1xuICBpZDogbnVtYmVyXG4gIGljb24/OiBzdHJpbmcgfCBJbW11dGFibGVPYmplY3Q8SWNvblJlc3VsdD5cbiAgbGFiZWw/OiBzdHJpbmdcbiAgZm9yY2VDbG9zZT86IGJvb2xlYW5cbiAgcG9wcGVyVGl0bGU/OiBzdHJpbmdcbiAgYnV0dG9uVHlwZT86IEJ1dHRvblR5cGVcbiAgb25XaWR0aENoYW5nZT86IChpZDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uT3BlbmVkQ2hhbmdlPzogKGlkOiBudW1iZXIsIGlzT3BlbjogYm9vbGVhbikgPT4gdm9pZFxuICBtaW5TaXplOiBTaXplXG4gIGRlZmF1bHRTaXplOiBTaXplXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdEVsZW1lbnQ8YW55PlxufVxuXG5jb25zdCBzaGlmdE9wdGlvbnM6IFNoaWZ0T3B0aW9ucyA9IHsgcGFkZGluZzogMSB9XG5cbmV4cG9ydCBmdW5jdGlvbiBUYXNrTGlzdFBvcHBlcldyYXBwZXIgKHByb3BzOiBUYXNrTGlzdFBvcHBlcldyYXBwZXJQcm9wcykge1xuICBjb25zdCB7IGlkLCBpY29uLCBsYWJlbCwgZm9yY2VDbG9zZSwgb25PcGVuZWRDaGFuZ2UsIHBvcHBlclRpdGxlLCBtaW5TaXplLCBkZWZhdWx0U2l6ZSwgb25XaWR0aENoYW5nZSwgYnV0dG9uVHlwZSA9ICd0ZXJ0aWFyeScsIGNoaWxkcmVuIH0gPSBwcm9wc1xuICBjb25zdCBpY29uUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IHdpZHRoUmVmID0gUmVhY3QudXNlUmVmKDApXG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW3BvcHBlclZlcnNpb24sIHNldFBvcHBlclZlcnNpb25dID0gUmVhY3QudXNlU3RhdGUoMClcbiAgY29uc3QgaXNNb2JpbGUgPSBob29rcy51c2VDaGVja1NtYWxsQnJvd3NlclNpemVNb2RlKClcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChmb3JjZUNsb3NlKSB7XG4gICAgICBzZXRJc09wZW4oZmFsc2UpXG4gICAgfVxuICB9LCBbZm9yY2VDbG9zZV0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBvbldpZHRoQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB3aWR0aFJlZi5jdXJyZW50ID0gTWF0aC5yb3VuZChpY29uUmVmLmN1cnJlbnQuY2xpZW50V2lkdGgpXG4gICAgICBvbldpZHRoQ2hhbmdlKGlkLCB3aWR0aFJlZi5jdXJyZW50KVxuICAgICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIobG9kYXNoLnRocm90dGxlKChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKVxuICAgICAgICBpZiAod2lkdGhSZWYuY3VycmVudCAhPT0gd2lkdGgpIHtcbiAgICAgICAgICB3aWR0aFJlZi5jdXJyZW50ID0gd2lkdGhcbiAgICAgICAgICBvbldpZHRoQ2hhbmdlKGlkLCB3aWR0aClcbiAgICAgICAgfVxuICAgICAgfSwgMjAwKSlcbiAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUoaWNvblJlZi5jdXJyZW50KVxuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KClcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgdG9nZ2xlUG9wcGVyID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygb25PcGVuZWRDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9uT3BlbmVkQ2hhbmdlKGlkLCAhaXNPcGVuKVxuICAgIH1cbiAgICBzZXRJc09wZW4oIWlzT3BlbilcbiAgICBzZXRQb3BwZXJWZXJzaW9uKHBvcHBlclZlcnNpb24gKyAxKVxuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoaXNLZXlib2FyZE1vZGUoKSkge1xuICAgICAgICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGljb25SZWYuY3VycmVudClcbiAgICAgICAgfVxuICAgICAgfSwgMjAwKVxuICAgIH1cbiAgfSwgW2lkLCBpc09wZW4sIHBvcHBlclZlcnNpb24sIG9uT3BlbmVkQ2hhbmdlXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdydW50aW1lLXF1ZXJ5X193aWRnZXQtcG9wcGVyJz5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgdGl0bGU9e2xhYmVsfVxuICAgICAgICBhcmlhLWxhYmVsPXtsYWJlbH1cbiAgICAgICAgaWNvbiBzaXplPSdzbSdcbiAgICAgICAgdmFyaWFudD17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/ICd0ZXh0JyA6IHVuZGVmaW5lZH1cbiAgICAgICAgY29sb3I9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyAnaW5oZXJpdCcgOiB1bmRlZmluZWR9XG4gICAgICAgIHR5cGU9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyB1bmRlZmluZWQgOiBidXR0b25UeXBlfVxuICAgICAgICByZWY9e2ljb25SZWZ9XG4gICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVBvcHBlcn1cbiAgICAgID5cbiAgICAgICAge2ljb24gJiYgPEljb25cbiAgICAgICAgICBzaXplPXsxNn1cbiAgICAgICAgICB7Li4uKHR5cGVvZiBpY29uID09PSAnc3RyaW5nJyA/IHsgaWNvbiB9IDogeyBpY29uOiBpY29uLnN2ZywgY29sb3I6IGJ1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyB1bmRlZmluZWQgOiBpY29uLnByb3BlcnRpZXMuY29sb3IgfSl9XG4gICAgICAgIC8+fVxuICAgICAgICB7bGFiZWwgJiYgPGRpdlxuICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gICAgICAgICAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDI7XG4gICAgICAgICAgICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsO1xuICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjI7XG4gICAgICAgICAgYH1cbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoeyAnbWwtMic6IGljb24gIT0gbnVsbCB9KX0+e2xhYmVsfTwvZGl2Pn1cbiAgICAgIDwvQnV0dG9uPlxuICAgICAge2lzTW9iaWxlXG4gICAgICAgID8gPE1vYmlsZVBhbmVsIG9wZW49e2lzT3Blbn0gdGl0bGU9e3BvcHBlclRpdGxlfSBvbkNsb3NlPXt0b2dnbGVQb3BwZXJ9PlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMXJlbTsgLyogU2NvcGVkIHBhZGRpbmcgdG8gc3BhY2UgY29udGVudCBmcm9tIGZvb3RlciAqL1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDEycHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICB7LyogQ29kZS9PcGVuIFNvdXJjZSBTeW1ib2wgKi99XG4gICAgICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGVcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvTW9iaWxlUGFuZWw+XG4gICAgICAgIDogPEZsb2F0aW5nUGFuZWxcbiAgICAgICAgICAgIGNsYXNzTmFtZT0ndWktdW5pdC1wb3BwZXIgdWktdW5pdC1wb3BwZXJfay1hcnJhbmdlbWVudC1pY29uIGZsZXgtZ3Jvdy0xJ1xuICAgICAgICAgICAgaGVhZGVyQ2xhc3NOYW1lPXtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTfVxuICAgICAgICAgICAgb3Blbj17aXNPcGVufVxuICAgICAgICAgICAgb25IZWFkZXJDbG9zZT17dG9nZ2xlUG9wcGVyfVxuICAgICAgICAgICAgdG9nZ2xlPXt0b2dnbGVQb3BwZXJ9XG4gICAgICAgICAgICBoZWFkZXJUaXRsZT17cG9wcGVyVGl0bGV9XG4gICAgICAgICAgICBtaW5TaXplPXttaW5TaXplfVxuICAgICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgICAgZHJhZ0JvdW5kcz0nYm9keSdcbiAgICAgICAgICAgIHZlcnNpb249e3BvcHBlclZlcnNpb259XG4gICAgICAgICAgICByZWZlcmVuY2U9e2ljb25SZWZ9XG4gICAgICAgICAgICBwbGFjZW1lbnQ9J2JvdHRvbS1zdGFydCdcbiAgICAgICAgICAgIHNoaWZ0T3B0aW9ucz17c2hpZnRPcHRpb25zfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDFyZW07IC8qIFNjb3BlZCBwYWRkaW5nIHRvIHNwYWNlIGNvbnRlbnQgZnJvbSBmb290ZXIgKi9cbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgey8qIFN0YXRpb25hcnkgZm9vdGVyICovfVxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyKTtcbiAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXRlcnRpYXJ5KTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIxNiAxOCAyMiAxMiAxNiA2XCIvPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiOCA2IDIgMTIgOCAxOFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgUXVlcnlTaW1wbGUgYnkgTWFwU2ltcGxlXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuN3JlbTtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L0Zsb2F0aW5nUGFuZWw+XG4gICAgICB9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIFJlYWN0LCB0eXBlIEltbXV0YWJsZUFycmF5LCBJbW11dGFibGUsIHR5cGUgSW1tdXRhYmxlT2JqZWN0LCBob29rcywgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBTZWxlY3QgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlLCBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlUYXNrIH0gZnJvbSAnLi9xdWVyeS10YXNrJ1xuaW1wb3J0IHsgRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTUyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgdHlwZSB7IEV2ZW50TWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLWV2ZW50LWhhbmRsaW5nJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0xpc3RQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgaXNJblBvcHBlcj86IGJvb2xlYW5cbiAgZGVmYXVsdFBhZ2VTaXplPzogbnVtYmVyXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH1cbiAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24/OiBib29sZWFuXG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBvblJlc3VsdHNNb2RlQ2hhbmdlPzogKG1vZGU6IFNlbGVjdGlvblR5cGUpID0+IHZvaWRcbiAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT86IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB2b2lkXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI/OiAob3V0cHV0RFM6IERhdGFTb3VyY2UpID0+IFByb21pc2U8dm9pZD5cbiAgb25DbGVhckdyYXBoaWNzTGF5ZXI/OiAoKSA9PiB2b2lkXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbiAgb25UYWJDaGFuZ2U/OiAodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB2b2lkXG4gIGV2ZW50TWFuYWdlcj86IEV2ZW50TWFuYWdlciAgLy8gQ2h1bmsgNy4xOiBFdmVudCBIYW5kbGluZyBNYW5hZ2VyXG4gIC8vIEZJWCAocjAxOC45Nik6IFJlbW92ZWQgbWFudWFsbHlSZW1vdmVkUmVjb3JkSWRzIGFuZCBvbk1hbnVhbFJlbW92YWwgLSBubyBsb25nZXIgbmVlZGVkXG59XG5cbmludGVyZmFjZSBHcm91cGVkUXVlcmllcyB7XG4gIGdyb3VwczogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9XG4gIHVuZ3JvdXBlZDogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT5cbiAgZ3JvdXBPcmRlcjogc3RyaW5nW11cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHNvcnQgcXVlcmllcyBieSBkaXNwbGF5IG9yZGVyIChsb3dlciBudW1iZXJzIGFwcGVhciBmaXJzdClcbi8vIFF1ZXJpZXMgd2l0aG91dCBvcmRlciBtYWludGFpbiB0aGVpciBvcmlnaW5hbCByZWxhdGl2ZSBwb3NpdGlvbnNcbmZ1bmN0aW9uIHNvcnRRdWVyeUl0ZW1zQnlPcmRlcihxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPik6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+IHtcbiAgLy8gSGFuZGxlIG51bGwvdW5kZWZpbmVkL2VtcHR5IGNhc2VzXG4gIGlmICghcXVlcnlJdGVtcyB8fCBxdWVyeUl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBxdWVyeUl0ZW1zIHx8IEltbXV0YWJsZShbXSlcbiAgfVxuICBcbiAgLy8gU2FmZWx5IGNvbnZlcnQgdG8gcmVndWxhciBhcnJheSBmb3Igc29ydGluZ1xuICAvLyBIYW5kbGUgYm90aCBJbW11dGFibGVBcnJheSAoaGFzIHRvQXJyYXkgbWV0aG9kKSBhbmQgcmVndWxhciBhcnJheXNcbiAgY29uc3QgaXRlbXNBcnJheSA9IChxdWVyeUl0ZW1zICYmIHR5cGVvZiBxdWVyeUl0ZW1zLnRvQXJyYXkgPT09ICdmdW5jdGlvbicpIFxuICAgID8gcXVlcnlJdGVtcy50b0FycmF5KCkgXG4gICAgOiAoQXJyYXkuaXNBcnJheShxdWVyeUl0ZW1zKSA/IHF1ZXJ5SXRlbXMgOiBbXSlcbiAgXG4gIGNvbnN0IGl0ZW1zV2l0aEluZGV4ID0gaXRlbXNBcnJheS5tYXAoKGl0ZW0sIGluZGV4KSA9PiAoeyBpdGVtLCBvcmlnaW5hbEluZGV4OiBpbmRleCB9KSlcbiAgaXRlbXNXaXRoSW5kZXguc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IG9yZGVyQSA9IGEuaXRlbS5vcmRlciA/PyBJbmZpbml0eVxuICAgIGNvbnN0IG9yZGVyQiA9IGIuaXRlbS5vcmRlciA/PyBJbmZpbml0eVxuICAgIGlmIChvcmRlckEgIT09IG9yZGVyQikge1xuICAgICAgcmV0dXJuIG9yZGVyQSAtIG9yZGVyQlxuICAgIH1cbiAgICAvLyBJZiBvcmRlciBpcyBlcXVhbCAoYm90aCBJbmZpbml0eSBvciBzYW1lIG51bWJlciksIG1haW50YWluIG9yaWdpbmFsIGluZGV4IG9yZGVyXG4gICAgcmV0dXJuIGEub3JpZ2luYWxJbmRleCAtIGIub3JpZ2luYWxJbmRleFxuICB9KVxuICByZXR1cm4gSW1tdXRhYmxlKGl0ZW1zV2l0aEluZGV4Lm1hcCgoeyBpdGVtIH0pID0+IGl0ZW0pKVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ3JvdXAgcXVlcmllcyBieSBncm91cElkXG5jb25zdCBncm91cFF1ZXJpZXMgPSAocXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4pOiBHcm91cGVkUXVlcmllcyA9PiB7XG4gIGNvbnN0IGdyb3VwczogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9ID0ge31cbiAgY29uc3QgdW5ncm91cGVkOiBBcnJheTx7IGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiwgaW5kZXg6IG51bWJlciB9PiA9IFtdXG4gIGNvbnN0IGdyb3VwT3JkZXI6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgZ3JvdXBJbmRleE1hcDogeyBbZ3JvdXBJZDogc3RyaW5nXTogbnVtYmVyIH0gPSB7fVxuICBcbiAgLy8gRmlyc3QgcGFzczogY29sbGVjdCBpdGVtcyBpbiByZWd1bGFyIGFycmF5c1xuICBjb25zdCBncm91cEl0ZW1zTWFwOiB7IFtncm91cElkOiBzdHJpbmddOiBRdWVyeUl0ZW1UeXBlW10gfSA9IHt9XG5cbiAgcXVlcnlJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGlmIChpdGVtLmdyb3VwSWQpIHtcbiAgICAgIGlmICghZ3JvdXBJdGVtc01hcFtpdGVtLmdyb3VwSWRdKSB7XG4gICAgICAgIGdyb3VwSXRlbXNNYXBbaXRlbS5ncm91cElkXSA9IFtdXG4gICAgICAgIGdyb3Vwc1tpdGVtLmdyb3VwSWRdID0ge1xuICAgICAgICAgIGl0ZW1zOiBJbW11dGFibGUoW10pLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiBpdGVtLmdyb3VwRGlzcGxheU5hbWUgfHwgaXRlbS5uYW1lIHx8IGBHcm91cCAke2l0ZW0uZ3JvdXBJZH1gLFxuICAgICAgICAgIGljb246IGl0ZW0uaWNvblxuICAgICAgICB9XG4gICAgICAgIGdyb3VwSW5kZXhNYXBbaXRlbS5ncm91cElkXSA9IGluZGV4XG4gICAgICAgIGdyb3VwT3JkZXIucHVzaChpdGVtLmdyb3VwSWQpXG4gICAgICB9XG4gICAgICBncm91cEl0ZW1zTWFwW2l0ZW0uZ3JvdXBJZF0ucHVzaChpdGVtKVxuICAgIH0gZWxzZSB7XG4gICAgICB1bmdyb3VwZWQucHVzaCh7IGl0ZW0sIGluZGV4IH0pXG4gICAgfVxuICB9KVxuXG4gIC8vIFNlY29uZCBwYXNzOiBjb252ZXJ0IHJlZ3VsYXIgYXJyYXlzIHRvIEltbXV0YWJsZUFycmF5c1xuICBPYmplY3Qua2V5cyhncm91cEl0ZW1zTWFwKS5mb3JFYWNoKGdyb3VwSWQgPT4ge1xuICAgIGdyb3Vwc1tncm91cElkXS5pdGVtcyA9IEltbXV0YWJsZShncm91cEl0ZW1zTWFwW2dyb3VwSWRdKVxuICB9KVxuXG4gIHJldHVybiB7IGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBkaXNwbGF5IG5hbWUgZm9yIHF1ZXJ5IGluIGRyb3Bkb3duXG4vLyBVc2VzOiBzZWFyY2hBbGlhcyB8fCBqaW11RmllbGROYW1lIHx8IGl0ZW0ubmFtZSB8fCBmYWxsYmFja1xuY29uc3QgZ2V0UXVlcnlEaXNwbGF5TmFtZSA9IChpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4pOiBzdHJpbmcgPT4ge1xuICAvLyBGaXJzdCBwcmlvcml0eTogc2VhcmNoQWxpYXMgaWYgc2V0XG4gIGlmIChpdGVtLnNlYXJjaEFsaWFzKSB7XG4gICAgcmV0dXJuIGl0ZW0uc2VhcmNoQWxpYXNcbiAgfVxuICBcbiAgLy8gU2Vjb25kIHByaW9yaXR5OiBmaWVsZCBuYW1lIGZyb20gU1FMIGV4cHJlc3Npb25cbiAgY29uc3QgamltdUZpZWxkTmFtZSA9IGl0ZW0uc3FsRXhwck9iaj8ucGFydHM/LlswXT8uamltdUZpZWxkTmFtZVxuICBpZiAoamltdUZpZWxkTmFtZSkge1xuICAgIHJldHVybiBqaW11RmllbGROYW1lXG4gIH1cbiAgXG4gIC8vIFRoaXJkIHByaW9yaXR5OiBpdGVtIG5hbWVcbiAgaWYgKGl0ZW0ubmFtZSkge1xuICAgIHJldHVybiBpdGVtLm5hbWVcbiAgfVxuICBcbiAgLy8gRmFsbGJhY2tcbiAgcmV0dXJuICdRdWVyeSdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza0xpc3QgKHByb3BzOiBRdWVyeVRhc2tMaXN0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW1zLCB3aWRnZXRJZCwgZGVmYXVsdFBhZ2VTaXplLCBpc0luUG9wcGVyID0gZmFsc2UsIGNsYXNzTmFtZSA9ICcnLCBpbml0aWFsUXVlcnlWYWx1ZSwgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gPSBmYWxzZSwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcmVzdWx0c01vZGUsIG9uUmVzdWx0c01vZGVDaGFuZ2UsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcsIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIsIG9uQ2xlYXJHcmFwaGljc0xheWVyLCBhY3RpdmVUYWIsIG9uVGFiQ2hhbmdlLCBldmVudE1hbmFnZXIgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2VzKVxuICBcbiAgLy8gTG9nIHdoZW4gcHJvcHMgYXJlIHJlY2VpdmVkXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5dGFza2xpc3QtcHJvcHMtcmVjZWl2ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBwcm9wczoge1xuICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISFpbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiBpbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvblxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAncXVlcnktdGFzay1saXN0LXByb3BzLXJlY2VpdmVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IGluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbaW5pdGlhbFF1ZXJ5VmFsdWUsIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLCB3aWRnZXRJZF0pXG4gIFxuICAvLyBTb3J0IHF1ZXJpZXMgYnkgZGlzcGxheSBvcmRlciBiZWZvcmUgZ3JvdXBpbmdcbiAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgcXVlcnlJdGVtcyBtaWdodCBiZSB1bmRlZmluZWQvbnVsbCBvciBub3QgYW4gSW1tdXRhYmxlQXJyYXlcbiAgY29uc3Qgc29ydGVkUXVlcnlJdGVtcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghcXVlcnlJdGVtcykge1xuICAgICAgcmV0dXJuIEltbXV0YWJsZShbXSlcbiAgICB9XG4gICAgcmV0dXJuIHNvcnRRdWVyeUl0ZW1zQnlPcmRlcihxdWVyeUl0ZW1zKVxuICB9LCBbcXVlcnlJdGVtc10pXG4gIFxuICBjb25zdCB7IGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyIH0gPSBSZWFjdC51c2VNZW1vKCgpID0+IGdyb3VwUXVlcmllcyhzb3J0ZWRRdWVyeUl0ZW1zKSwgW3NvcnRlZFF1ZXJ5SXRlbXNdKVxuICBcbiAgLy8gT25seSB1c2UgdGhlIHByb3AgaW5pdGlhbFF1ZXJ5VmFsdWUgd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVucyB0aGUgd2lkZ2V0XG4gIC8vIFF1ZXJ5U2ltcGxlIHNob3VsZCBub3QgYXV0b25vbW91c2x5IHJlYWN0IHRvIGluaXRpYWxRdWVyeVZhbHVlIHByb3AgY2hhbmdlc1xuICAvLyBIZWxwZXJTaW1wbGUgaXMgdGhlIG9yY2hlc3RyYXRvciBhbmQgc2V0cyBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiBmbGFnXG4gIGNvbnN0IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlID0gc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gPyBpbml0aWFsUXVlcnlWYWx1ZSA6IHVuZGVmaW5lZFxuICBcbiAgLy8gTG9nIHdoZW4gZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUgaXMgY2FsY3VsYXRlZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXRhc2tsaXN0LWVmZmVjdGl2ZWluaXRpYWxxdWVyeXZhbHVlLWNhbGN1bGF0ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBjYWxjdWxhdGlvbjoge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgIGVmZmVjdGl2ZVJlc3VsdDogZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUgPyAnVVNFX0lOSVRJQUxfUVVFUllfVkFMVUUnIDogJ1VOREVGSU5FRCcsXG4gICAgICAgIGVmZmVjdGl2ZVNob3J0SWQ6IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBlZmZlY3RpdmVWYWx1ZTogZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZS1jYWxjdWxhdGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISFpbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgIGhhc0VmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlOiAhIWVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgZWZmZWN0aXZlU2hvcnRJZDogZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICBlZmZlY3RpdmVWYWx1ZTogZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW2VmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlLCBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiwgaW5pdGlhbFF1ZXJ5VmFsdWUsIHdpZGdldElkXSlcblxuICAvLyBGaW5kIHRoZSBxdWVyeSBpdGVtIG1hdGNoaW5nIHRoZSBzaG9ydElkIGZyb20gVVJMIGhhc2hcbiAgY29uc3QgbWF0Y2hpbmdRdWVyeUluZGV4ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3Qgc2hvcnRJZCA9IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICBldmVudDogJ21hdGNoaW5nUXVlcnlJbmRleC1jYWxjdWxhdGlvbi1zdGFydCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGhhc0VmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlOiAhIWVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgc2hvcnRJZFRvTWF0Y2g6IHNob3J0SWQsXG4gICAgICBzb3J0ZWRRdWVyeUl0ZW1zQ291bnQ6IHNvcnRlZFF1ZXJ5SXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc29ydGVkUXVlcnlJdGVtc1Nob3J0SWRzOiBzb3J0ZWRRdWVyeUl0ZW1zID8gWy4uLnNvcnRlZFF1ZXJ5SXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5zaG9ydElkKV0gOiBbXSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgaWYgKCFzaG9ydElkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgZXZlbnQ6ICdtYXRjaGluZ1F1ZXJ5SW5kZXgtbm8tc2hvcnRpZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZXN1bHQ6IC0xLFxuICAgICAgICByZWFzb246ICdObyBzaG9ydElkIGluIGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGZvdW5kSW5kZXggPSBzb3J0ZWRRdWVyeUl0ZW1zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uc2hvcnRJZCA9PT0gc2hvcnRJZClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgIGV2ZW50OiAnbWF0Y2hpbmdRdWVyeUluZGV4LWNhbGN1bGF0aW9uLWNvbXBsZXRlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgc2hvcnRJZFRvTWF0Y2g6IHNob3J0SWQsXG4gICAgICBmb3VuZEluZGV4LFxuICAgICAgbWF0Y2hGb3VuZDogZm91bmRJbmRleCA+PSAwLFxuICAgICAgbWF0Y2hlZEl0ZW06IGZvdW5kSW5kZXggPj0gMCA/IHtcbiAgICAgICAgY29uZmlnSWQ6IHNvcnRlZFF1ZXJ5SXRlbXNbZm91bmRJbmRleF0uY29uZmlnSWQsXG4gICAgICAgIHNob3J0SWQ6IHNvcnRlZFF1ZXJ5SXRlbXNbZm91bmRJbmRleF0uc2hvcnRJZCxcbiAgICAgICAgbGFiZWw6IHNvcnRlZFF1ZXJ5SXRlbXNbZm91bmRJbmRleF0ubGFiZWxcbiAgICAgIH0gOiBudWxsLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICByZXR1cm4gZm91bmRJbmRleFxuICB9LCBbc29ydGVkUXVlcnlJdGVtcywgZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUsIHdpZGdldElkXSlcbiAgXG4gIC8vIERldGVybWluZSB3aGljaCBncm91cC91bmdyb3VwZWQgaW5kZXggdGhlIG1hdGNoaW5nIHF1ZXJ5IGlzIGF0XG4gIGNvbnN0IGdldFF1ZXJ5U2VsZWN0aW9uID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICBldmVudDogJ2dldFF1ZXJ5U2VsZWN0aW9uLWNhbGN1bGF0aW9uLXN0YXJ0JyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbWF0Y2hpbmdRdWVyeUluZGV4LFxuICAgICAgaGFzTWF0Y2g6IG1hdGNoaW5nUXVlcnlJbmRleCA+PSAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBpZiAobWF0Y2hpbmdRdWVyeUluZGV4IDwgMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0UXVlcnlTZWxlY3Rpb24tbm8tbWF0Y2gnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVzdWx0OiBudWxsLFxuICAgICAgICByZWFzb246ICdtYXRjaGluZ1F1ZXJ5SW5kZXggaXMgbmVnYXRpdmUnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICBcbiAgICBjb25zdCBpdGVtID0gc29ydGVkUXVlcnlJdGVtc1ttYXRjaGluZ1F1ZXJ5SW5kZXhdXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICBldmVudDogJ2dldFF1ZXJ5U2VsZWN0aW9uLW1hdGNoZWQtaXRlbScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIG1hdGNoZWRJdGVtOiB7XG4gICAgICAgIGNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICBzaG9ydElkOiBpdGVtLnNob3J0SWQsXG4gICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxuICAgICAgICBncm91cElkOiBpdGVtLmdyb3VwSWQsXG4gICAgICAgIGhhc0dyb3VwOiAhIWl0ZW0uZ3JvdXBJZFxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgaWYgKGl0ZW0uZ3JvdXBJZCkge1xuICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IGdyb3Vwc1tpdGVtLmdyb3VwSWRdPy5pdGVtcyB8fCBJbW11dGFibGUoW10pXG4gICAgICBjb25zdCBpbmRleEluR3JvdXAgPSBncm91cEl0ZW1zLmZpbmRJbmRleChxID0+IHEuY29uZmlnSWQgPT09IGl0ZW0uY29uZmlnSWQpXG4gICAgICBjb25zdCByZXN1bHQgPSB7IHR5cGU6ICdncm91cCcgYXMgY29uc3QsIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCwgaW5kZXg6IGluZGV4SW5Hcm91cCA+PSAwID8gaW5kZXhJbkdyb3VwIDogMCB9XG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1xdWVyeS1mb3VuZC1pbi1ncm91cCcsXG4gICAgICAgIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgaW5kZXhJbkdyb3VwOiBpbmRleEluR3JvdXAgPj0gMCA/IGluZGV4SW5Hcm91cCA6IDAsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBpdGVtLnNob3J0SWRcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgICBldmVudDogJ2dldFF1ZXJ5U2VsZWN0aW9uLXJldHVybmluZy1ncm91cCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZXN1bHQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVbmdyb3VwZWQgcXVlcnlcbiAgICAgIGNvbnN0IGluZGV4SW5Vbmdyb3VwZWQgPSB1bmdyb3VwZWQuZmluZEluZGV4KCh7IGl0ZW06IHEgfSkgPT4gcS5jb25maWdJZCA9PT0gaXRlbS5jb25maWdJZClcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHsgdHlwZTogJ3VuZ3JvdXBlZCcgYXMgY29uc3QsIGluZGV4OiBpbmRleEluVW5ncm91cGVkID49IDAgPyBpbmRleEluVW5ncm91cGVkIDogMCB9XG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1xdWVyeS1mb3VuZC11bmdyb3VwZWQnLFxuICAgICAgICBpbmRleEluVW5ncm91cGVkOiBpbmRleEluVW5ncm91cGVkID49IDAgPyBpbmRleEluVW5ncm91cGVkIDogMCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGl0ZW0uc2hvcnRJZFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUZJUlNULUxPQUQnLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0UXVlcnlTZWxlY3Rpb24tcmV0dXJuaW5nLXVuZ3JvdXBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZXN1bHQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgfSwgW21hdGNoaW5nUXVlcnlJbmRleCwgc29ydGVkUXVlcnlJdGVtcywgZ3JvdXBzLCB1bmdyb3VwZWQsIHdpZGdldElkXSlcbiAgXG4gIC8vIEhlbHBlciB0byBkZXRlcm1pbmUgZGVmYXVsdCBzZWxlY3Rpb24gYmFzZWQgb24gZGlzcGxheSBvcmRlclxuICBjb25zdCBnZXREZWZhdWx0U2VsZWN0aW9uID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGdldFF1ZXJ5U2VsZWN0aW9uKSB7XG4gICAgICByZXR1cm4gZ2V0UXVlcnlTZWxlY3Rpb25cbiAgICB9XG4gICAgXG4gICAgLy8gTm8gaGFzaCBwYXJhbWV0ZXIgLSBkZXRlcm1pbmUgZGVmYXVsdCBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyXG4gICAgLy8gQ29tcGFyZSBmaXJzdCB1bmdyb3VwZWQgcXVlcnkgdnMgZmlyc3QgcXVlcnkgaW4gZmlyc3QgZ3JvdXBcbiAgICBjb25zdCBmaXJzdFVuZ3JvdXBlZE9yZGVyID0gdW5ncm91cGVkLmxlbmd0aCA+IDAgPyAodW5ncm91cGVkWzBdLml0ZW0ub3JkZXIgPz8gSW5maW5pdHkpIDogSW5maW5pdHlcbiAgICBjb25zdCBmaXJzdEdyb3VwT3JkZXIgPSBncm91cE9yZGVyLmxlbmd0aCA+IDAgJiYgZ3JvdXBzW2dyb3VwT3JkZXJbMF1dPy5pdGVtcz8ubGVuZ3RoID4gMFxuICAgICAgPyAoZ3JvdXBzW2dyb3VwT3JkZXJbMF1dLml0ZW1zWzBdLm9yZGVyID8/IEluZmluaXR5KVxuICAgICAgOiBJbmZpbml0eVxuICAgIFxuICAgIC8vIFNlbGVjdCB3aGljaGV2ZXIgaGFzIGxvd2VyIG9yZGVyIChvciBmaXJzdCBpZiBlcXVhbClcbiAgICBpZiAoZmlyc3RVbmdyb3VwZWRPcmRlciA8IGZpcnN0R3JvdXBPcmRlcikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ3VuZ3JvdXBlZCcgYXMgY29uc3QsIGluZGV4OiAwIH1cbiAgICB9IGVsc2UgaWYgKGZpcnN0R3JvdXBPcmRlciA8IEluZmluaXR5IHx8IGdyb3VwT3JkZXIubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ2dyb3VwJyBhcyBjb25zdCwgZ3JvdXBJZDogZ3JvdXBPcmRlclswXSwgaW5kZXg6IDAgfVxuICAgIH0gZWxzZSBpZiAodW5ncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB7IHR5cGU6ICd1bmdyb3VwZWQnIGFzIGNvbnN0LCBpbmRleDogMCB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0sIFtnZXRRdWVyeVNlbGVjdGlvbiwgdW5ncm91cGVkLCBncm91cHMsIGdyb3VwT3JkZXJdKVxuICBcbiAgLy8gVHJhY2sgc2VsZWN0ZWQgcXVlcnkgLSBpbml0aWFsaXplIHdpdGggbWF0Y2hpbmcgcXVlcnkgaWYgZm91bmQgZnJvbSBVUkwgaGFzaCwgb3IgZGVmYXVsdCBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyXG4gIGNvbnN0IFtzZWxlY3RlZEdyb3VwSWQsIHNldFNlbGVjdGVkR3JvdXBJZF0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmcgfCBudWxsPigoKSA9PiB7XG4gICAgaWYgKGdldERlZmF1bHRTZWxlY3Rpb24/LnR5cGUgPT09ICdncm91cCcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbC1ncm91cC1zZWxlY3Rpb24nLFxuICAgICAgICBncm91cElkOiBnZXREZWZhdWx0U2VsZWN0aW9uLmdyb3VwSWQsXG4gICAgICAgIG5vdGU6IGdldFF1ZXJ5U2VsZWN0aW9uID8gJ0hhc2gtbWF0Y2hlZCcgOiAnRGVmYXVsdCBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyJ1xuICAgICAgfSlcbiAgICAgIHJldHVybiBnZXREZWZhdWx0U2VsZWN0aW9uLmdyb3VwSWRcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSlcbiAgY29uc3QgW3NlbGVjdGVkR3JvdXBRdWVyeUluZGV4LCBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleF0gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PiB7XG4gICAgaWYgKGdldERlZmF1bHRTZWxlY3Rpb24/LnR5cGUgPT09ICdncm91cCcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbC1ncm91cC1xdWVyeS1pbmRleCcsXG4gICAgICAgIGluZGV4OiBnZXREZWZhdWx0U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICBub3RlOiBnZXRRdWVyeVNlbGVjdGlvbiA/ICdIYXNoLW1hdGNoZWQnIDogJ0RlZmF1bHQgYmFzZWQgb24gZGlzcGxheSBvcmRlcidcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFNlbGVjdGlvbi5pbmRleFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9KVxuICBjb25zdCBbc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCwgc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleF0gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PiB7XG4gICAgaWYgKGdldERlZmF1bHRTZWxlY3Rpb24/LnR5cGUgPT09ICd1bmdyb3VwZWQnKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtdW5ncm91cGVkLWluZGV4JyxcbiAgICAgICAgaW5kZXg6IGdldERlZmF1bHRTZWxlY3Rpb24uaW5kZXgsXG4gICAgICAgIG5vdGU6IGdldFF1ZXJ5U2VsZWN0aW9uID8gJ0hhc2gtbWF0Y2hlZCcgOiAnRGVmYXVsdCBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyJ1xuICAgICAgfSlcbiAgICAgIHJldHVybiBnZXREZWZhdWx0U2VsZWN0aW9uLmluZGV4XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH0pXG4gIFxuICAvLyBVcGRhdGUgc2VsZWN0aW9uIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgd2lkZ2V0IHdpdGggaGFzaCBwYXJhbWV0ZXJcbiAgLy8gT25seSByZWFjdCB3aGVuIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uIGlzIHRydWUgKHNldCBieSBIZWxwZXJTaW1wbGUpXG4gIC8vIFRoaXMgcHJldmVudHMgYXV0b25vbW91cyBxdWVyeSBzZWxlY3Rpb24gd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1GSVJTVC1MT0FEJywge1xuICAgICAgZXZlbnQ6ICdFWEVDVVRJT04tVVNFRUZGRUNULVRSSUdHRVJFRCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGNyaXRpY2FsQ29uZGl0aW9uczoge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzR2V0UXVlcnlTZWxlY3Rpb246ICEhZ2V0UXVlcnlTZWxlY3Rpb24sXG4gICAgICAgIGdldFF1ZXJ5U2VsZWN0aW9uVmFsdWU6IGdldFF1ZXJ5U2VsZWN0aW9uLFxuICAgICAgICBoYXNFZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZTogISFlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgIG1hdGNoaW5nUXVlcnlJbmRleCxcbiAgICAgICAgY29uZGl0aW9uc01ldDogc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gJiYgISFnZXRRdWVyeVNlbGVjdGlvbixcbiAgICAgICAgV0lMTF9FWEVDVVRFX1FVRVJZOiBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiAmJiAhIWdldFF1ZXJ5U2VsZWN0aW9uXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnl0YXNrbGlzdC1zZWxlY3Rpb24tdXNlZWZmZWN0LWNoZWNrJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgY2hlY2s6IHtcbiAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgIGhhc0dldFF1ZXJ5U2VsZWN0aW9uOiAhIWdldFF1ZXJ5U2VsZWN0aW9uLFxuICAgICAgICBnZXRRdWVyeVNlbGVjdGlvblR5cGU6IGdldFF1ZXJ5U2VsZWN0aW9uPy50eXBlLFxuICAgICAgICB3aWxsVXBkYXRlU2VsZWN0aW9uOiBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiAmJiAhIWdldFF1ZXJ5U2VsZWN0aW9uXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeS1zZWxlY3Rpb24tdXNlZWZmZWN0LWNoZWNrJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICBoYXNHZXRRdWVyeVNlbGVjdGlvbjogISFnZXRRdWVyeVNlbGVjdGlvbixcbiAgICAgIGdldFF1ZXJ5U2VsZWN0aW9uVHlwZTogZ2V0UXVlcnlTZWxlY3Rpb24/LnR5cGUsXG4gICAgICB3aWxsVXBkYXRlU2VsZWN0aW9uOiBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiAmJiAhIWdldFF1ZXJ5U2VsZWN0aW9uLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBpZiAoc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gJiYgZ2V0UXVlcnlTZWxlY3Rpb24pIHtcbiAgICAgIC8vIEhhc2ggcGFyYW1ldGVyIG1hdGNoZWQgLSBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVuZWQgdXMgd2l0aCB0aGlzIGhhc2hcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5dGFza2xpc3Qtc2VsZWN0aW9uLXVzZWVmZmVjdC11cGRhdGluZycsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBzZWxlY3Rpb25UeXBlOiBnZXRRdWVyeVNlbGVjdGlvbi50eXBlLFxuICAgICAgICBzZWxlY3Rpb25EZXRhaWxzOiBnZXRRdWVyeVNlbGVjdGlvbi50eXBlID09PSAnZ3JvdXAnIFxuICAgICAgICAgID8geyBncm91cElkOiBnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkLCBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXggfVxuICAgICAgICAgIDogeyBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXggfSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWNoYW5nZWQtdG8tZ3JvdXAtZnJvbS1oYXNoJyxcbiAgICAgICAgICBncm91cElkOiBnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkLFxuICAgICAgICAgIGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleCxcbiAgICAgICAgICBub3RlOiAnSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbmVkIHdpZGdldCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICB9KVxuICAgICAgICBzZXRTZWxlY3RlZEdyb3VwSWQoZ2V0UXVlcnlTZWxlY3Rpb24uZ3JvdXBJZClcbiAgICAgICAgc2V0U2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgoZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWNoYW5nZWQtdG8tdW5ncm91cGVkLWZyb20taGFzaCcsXG4gICAgICAgICAgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICAgIG5vdGU6ICdIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVuZWQgd2lkZ2V0IHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgIH0pXG4gICAgICAgIHNldFNlbGVjdGVkR3JvdXBJZChudWxsKVxuICAgICAgICBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRklSU1QtTE9BRCcsIHtcbiAgICAgICAgZXZlbnQ6ICdFWEVDVVRJT04tU0tJUFBFRCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZWFzb246ICFzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiA/ICdGTEFHX0lTX0ZBTFNFJyA6ICdOT19RVUVSWV9TRUxFQ1RJT04nLFxuICAgICAgICBkZXRhaWxlZERpYWdub3N0aWM6IHtcbiAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICBoYXNHZXRRdWVyeVNlbGVjdGlvbjogISFnZXRRdWVyeVNlbGVjdGlvbixcbiAgICAgICAgICBnZXRRdWVyeVNlbGVjdGlvblZhbHVlOiBnZXRRdWVyeVNlbGVjdGlvbixcbiAgICAgICAgICBoYXNFZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZTogISFlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICBtYXRjaGluZ1F1ZXJ5SW5kZXgsXG4gICAgICAgICAgc29ydGVkUXVlcnlJdGVtc0NvdW50OiBzb3J0ZWRRdWVyeUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICBwb3NzaWJsZUNhdXNlczogIXNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uIFxuICAgICAgICAgICAgPyBbJ0hlbHBlclNpbXBsZSBkaWQgbm90IHNldCB0aGUgZmxhZycsICdXaWRnZXQgb3BlbmVkIHdpdGhvdXQgaGFzaCBwYXJhbWV0ZXInXVxuICAgICAgICAgICAgOiBbJ21hdGNoaW5nUXVlcnlJbmRleCByZXR1cm5lZCAtMScsICdzaG9ydElkIGRpZCBub3QgbWF0Y2ggYW55IHF1ZXJ5JywgJ3F1ZXJ5SXRlbXMgbm90IGxvYWRlZCB5ZXQnXVxuICAgICAgICB9LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5dGFza2xpc3Qtc2VsZWN0aW9uLXVzZWVmZmVjdC1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogIXNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uID8gJ2ZsYWctaXMtZmFsc2UnIDogJ25vLXF1ZXJ5LXNlbGVjdGlvbicsXG4gICAgICAgIGNoZWNrOiB7XG4gICAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgICAgaGFzR2V0UXVlcnlTZWxlY3Rpb246ICEhZ2V0UXVlcnlTZWxlY3Rpb25cbiAgICAgICAgfSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5LXNlbGVjdGlvbi11c2VlZmZlY3Qtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZWFzb246ICFzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiA/ICdmbGFnLWlzLWZhbHNlJyA6ICduby1xdWVyeS1zZWxlY3Rpb24nLFxuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzR2V0UXVlcnlTZWxlY3Rpb246ICEhZ2V0UXVlcnlTZWxlY3Rpb24sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiwgZ2V0UXVlcnlTZWxlY3Rpb24sIHdpZGdldElkLCBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSwgbWF0Y2hpbmdRdWVyeUluZGV4LCBzb3J0ZWRRdWVyeUl0ZW1zXSlcbiAgXG4gIC8vIEdldCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHF1ZXJ5IGl0ZW1cbiAgY29uc3QgZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0gPSAoKTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+ID0+IHtcbiAgICAvLyBQUklPUklUWSAxOiBVc2UgY3VycmVudCBzdGF0ZSBzZWxlY3Rpb25cbiAgICAvLyBUaGUgc3RhdGUgaXMgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgaGFzaCBtYXRjaCAoaWYgcHJlc2VudCkgb3IgZGVmYXVsdCBvcmRlcixcbiAgICAvLyBhbmQgdXBkYXRlZCB2aWEgdXNlRWZmZWN0IGlmIHRoZSBoYXNoIGNoYW5nZXMgbGF0ZXIuXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAnZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0tc3RhdGUtc2VsZWN0aW9uJyxcbiAgICAgIHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgIGhhc1NlbGVjdGVkR3JvdXA6IHNlbGVjdGVkR3JvdXBJZCAmJiBncm91cHNbc2VsZWN0ZWRHcm91cElkXSxcbiAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LFxuICAgICAgc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCxcbiAgICAgIHVuZ3JvdXBlZExlbmd0aDogdW5ncm91cGVkLmxlbmd0aCxcbiAgICAgIGdyb3VwT3JkZXJMZW5ndGg6IGdyb3VwT3JkZXIubGVuZ3RoLFxuICAgICAgbm90ZTogJ1VzaW5nIHN0YXRlIHNlbGVjdGlvbiAoaGFzaC1hd2FyZSknXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiBhIGdyb3VwIGlzIHNlbGVjdGVkLCBnZXQgcXVlcnkgZnJvbSB0aGF0IGdyb3VwXG4gICAgaWYgKHNlbGVjdGVkR3JvdXBJZCAmJiBncm91cHNbc2VsZWN0ZWRHcm91cElkXSkge1xuICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdLml0ZW1zXG4gICAgICBpZiAoZ3JvdXBJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDwgZ3JvdXBJdGVtcy5sZW5ndGggPyBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCA6IDBcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gZ3JvdXBJdGVtc1tpZHhdXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3RlZC1xdWVyeS1mcm9tLWdyb3VwJyxcbiAgICAgICAgICBncm91cElkOiBzZWxlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgZ3JvdXBRdWVyeUluZGV4OiBpZHgsXG4gICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHNlbGVjdGVkSXRlbS5jb25maWdJZCxcbiAgICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKHNlbGVjdGVkSXRlbSlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBPdGhlcndpc2UsIGdldCBmcm9tIHVuZ3JvdXBlZCBxdWVyaWVzXG4gICAgaWYgKHVuZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpZHggPSBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4IDwgdW5ncm91cGVkLmxlbmd0aCA/IHNlbGVjdGVkVW5ncm91cGVkSW5kZXggOiAwXG4gICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB1bmdyb3VwZWRbaWR4XS5pdGVtXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ3NlbGVjdGVkLXF1ZXJ5LWZyb20tdW5ncm91cGVkJyxcbiAgICAgICAgdW5ncm91cGVkSW5kZXg6IGlkeCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHNlbGVjdGVkSXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlEaXNwbGF5TmFtZTogZ2V0UXVlcnlEaXNwbGF5TmFtZShzZWxlY3RlZEl0ZW0pXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbVxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byBmaXJzdCBxdWVyeSBpdGVtXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAnc2VsZWN0ZWQtcXVlcnktZmFsbGJhY2snLFxuICAgICAgbm90ZTogJ05vIGdyb3VwcyBvciB1bmdyb3VwZWQgcXVlcmllcywgdXNpbmcgZmlyc3QgaXRlbSdcbiAgICB9KVxuICAgIHJldHVybiBzb3J0ZWRRdWVyeUl0ZW1zWzBdXG4gIH1cbiAgXG4gIGNvbnN0IHNlbGVjdGVkUXVlcnlJdGVtID0gZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0oKVxuICBjb25zdCBzZWxlY3RlZFF1ZXJ5UmVhbEluZGV4ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHNvcnRlZFF1ZXJ5SXRlbXMuZmluZEluZGV4KHEgPT4gcS5jb25maWdJZCA9PT0gc2VsZWN0ZWRRdWVyeUl0ZW0uY29uZmlnSWQpXG4gIH0sIFtzb3J0ZWRRdWVyeUl0ZW1zLCBzZWxlY3RlZFF1ZXJ5SXRlbV0pXG4gIFxuICAvLyBJZiBvbmx5IG9uZSBxdWVyeSB0b3RhbCwgZG9uJ3Qgc2hvdyBkcm9wZG93blxuICBjb25zdCBzaG93RHJvcGRvd24gPSBzb3J0ZWRRdWVyeUl0ZW1zLmxlbmd0aCA+IDEgfHwgZ3JvdXBPcmRlci5sZW5ndGggPiAwXG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgcnVudGltZS1xdWVyeV9fcXVlcnktbGlzdCBoLTEwMCAke2NsYXNzTmFtZX1gfSBjc3M9e2Nzc2BcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgLnF1ZXJ5LXNlbGVjdG9yIHtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgfVxuICAgICAgLnF1ZXJ5LXNlbGVjdG9yLWxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICB9XG4gICAgICAucXVlcnktc2VsZWN0b3Igc2VsZWN0IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgICAucXVlcnktdGFzay1jb250YWluZXIge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIH1cbiAgICBgfT5cbiAgICAgIHsvKiBTZWFyY2ggTGF5ZXIgZHJvcGRvd24gbW92ZWQgdG8gUXVlcnlUYXNrIFF1ZXJ5IHRhYiBjb250ZW50ICovfVxuICAgICAgXG4gICAgICB7LyogU2hvdyBzZWxlY3RlZCBxdWVyeSBmb3JtIGRpcmVjdGx5IGJlbG93ICovfVxuICAgICAge3NlbGVjdGVkUXVlcnlJdGVtICYmICgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHdpbGxQYXNzSW5pdGlhbElucHV0VmFsdWUgPSBzZWxlY3RlZFF1ZXJ5SXRlbS5zaG9ydElkID09PSBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZFxuICAgICAgICBjb25zdCBpbml0aWFsSW5wdXRWYWx1ZVRvUGFzcyA9IHdpbGxQYXNzSW5pdGlhbElucHV0VmFsdWUgPyBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUgOiB1bmRlZmluZWRcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpbml0aWFsSW5wdXRWYWx1ZS1iZWluZy1wYXNzZWQtdG8tcXVlcnl0YXNrJyxcbiAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICBzZWxlY3RlZFF1ZXJ5SXRlbVNob3J0SWQ6IHNlbGVjdGVkUXVlcnlJdGVtLnNob3J0SWQsXG4gICAgICAgICAgc2VsZWN0ZWRRdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRRdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICB3aWxsUGFzc0luaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZVRvUGFzcyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BxdWVyeS10YXNrLWNvbnRhaW5lciAke2lzSW5Qb3BwZXIgPyBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTIDogJyd9YH0+XG4gICAgICAgICAgICA8UXVlcnlUYXNrXG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgaW5kZXg9e3NlbGVjdGVkUXVlcnlSZWFsSW5kZXggPj0gMCA/IHNlbGVjdGVkUXVlcnlSZWFsSW5kZXggOiAwfVxuICAgICAgICAgICAgICB0b3RhbD17c29ydGVkUXVlcnlJdGVtcy5sZW5ndGh9XG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbT17c2VsZWN0ZWRRdWVyeUl0ZW19XG4gICAgICAgICAgICAgIGlzSW5Qb3BwZXI9e2lzSW5Qb3BwZXJ9XG4gICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtpbml0aWFsSW5wdXRWYWx1ZVRvUGFzc31cbiAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17b25IYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e3NvcnRlZFF1ZXJ5SXRlbXN9XG4gICAgICAgICAgICBzZWxlY3RlZFF1ZXJ5SW5kZXg9e3NlbGVjdGVkVW5ncm91cGVkSW5kZXh9XG4gICAgICAgICAgICBvblF1ZXJ5Q2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgLy8gR3JvdXBpbmcgcHJvcHNcbiAgICAgICAgICAgIGdyb3Vwcz17Z3JvdXBzfVxuICAgICAgICAgICAgdW5ncm91cGVkPXt1bmdyb3VwZWR9XG4gICAgICAgICAgICAvLyBHcmFwaGljcyBsYXllciBwcm9wc1xuICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17dXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXI9e2dyYXBoaWNzTGF5ZXJ9XG4gICAgICAgICAgICBtYXBWaWV3PXttYXBWaWV3fVxuICAgICAgICAgICAgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcj17b25Jbml0aWFsaXplR3JhcGhpY3NMYXllcn1cbiAgICAgICAgICAgIG9uQ2xlYXJHcmFwaGljc0xheWVyPXtvbkNsZWFyR3JhcGhpY3NMYXllcn1cbiAgICAgICAgICAgIGdyb3VwT3JkZXI9e2dyb3VwT3JkZXJ9XG4gICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWQ9e3NlbGVjdGVkR3JvdXBJZH1cbiAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4PXtzZWxlY3RlZEdyb3VwUXVlcnlJbmRleH1cbiAgICAgICAgICAgIG9uR3JvdXBDaGFuZ2U9eyhncm91cElkKSA9PiBzZXRTZWxlY3RlZEdyb3VwSWQoZ3JvdXBJZCl9XG4gICAgICAgICAgICBvbkdyb3VwUXVlcnlDaGFuZ2U9eyhpbmRleCkgPT4gc2V0U2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgb25Vbmdyb3VwZWRDaGFuZ2U9eyhpbmRleCkgPT4gc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleChpbmRleCl9XG4gICAgICAgICAgICByZXN1bHRzTW9kZT17cmVzdWx0c01vZGV9XG4gICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlPXtvblJlc3VsdHNNb2RlQ2hhbmdlfVxuICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXthY2N1bXVsYXRlZFJlY29yZHN9XG4gICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17b25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICBhY3RpdmVUYWI9e2FjdGl2ZVRhYn1cbiAgICAgICAgICAgIG9uVGFiQ2hhbmdlPXtvblRhYkNoYW5nZX1cbiAgICAgICAgICAgIGV2ZW50TWFuYWdlcj17ZXZlbnRNYW5hZ2VyfVxuICAgICAgICAgICAgICAvLyBObyBvbk5hdkJhY2sgLSBubyBuYXZpZ2F0aW9uIG5lZWRlZFxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgICAgfSkoKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5cblxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCB0eXBlIElNU3RhdGUsIGpzeCwgY3NzLCBjbGFzc05hbWVzLCB0eXBlIEltbXV0YWJsZUFycmF5LCB0eXBlIFVzZURhdGFTb3VyY2UsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIFRvb2x0aXAsIEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IHR5cGUgQ3JlYXRlVG9vbFR5cGUsIFNwYXRpYWxGaWx0ZXJUeXBlLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIHR5cGUgU3BhdGlhbFJlbGF0aW9uLCBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURhdGFTb3VyY2UgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHMnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbU1hcCB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1tYXAnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURyYXcgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHJhdydcclxuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrSXRlbVByb3BzIHtcclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIGRlc2M6IHN0cmluZ1xyXG4gIGRzRW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgZHNCdWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgZHNCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIGRyYXdFbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBkcmF3QnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGRyYXdCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIHNwYXRpYWxSZWxhdGlvbnM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxSZWxhdGlvbj5cclxuICB1c2VEYXRhU291cmNlczogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT5cclxuICB1c2VSdW50aW1lRGF0YTogYm9vbGVhblxyXG4gIGZpbHRlclR5cGVzOiBJbW11dGFibGVBcnJheTxTcGF0aWFsRmlsdGVyVHlwZT5cclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICBjcmVhdGVUb29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxyXG4gIG9uRmlsdGVyQ2hhbmdlOiAoZmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqKSA9PiB2b2lkXHJcbiAgb25SZWxhdGlvbkNoYW5nZTogKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB2b2lkXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrU3BhdGlhbEZvcm0gKHByb3BzOiBRdWVyeVRhc2tJdGVtUHJvcHMpIHtcclxuICBjb25zdCB7XHJcbiAgICBsYWJlbCwgZGVzYywgZmlsdGVyVHlwZXMsIG1hcFdpZGdldElkcywgb25GaWx0ZXJDaGFuZ2UsIG9uUmVsYXRpb25DaGFuZ2UsIG9uQnVmZmVyQ2hhbmdlLCB1c2VEYXRhU291cmNlcywgc3BhdGlhbFJlbGF0aW9ucywgdXNlUnVudGltZURhdGEsXHJcbiAgICBkc0VuYWJsZUJ1ZmZlciwgZHNCdWZmZXJEaXN0YW5jZSwgZHNCdWZmZXJVbml0LCBkcmF3RW5hYmxlQnVmZmVyLCBkcmF3QnVmZmVyRGlzdGFuY2UsIGRyYXdCdWZmZXJVbml0LCBjcmVhdGVUb29sVHlwZXMsIHdpZGdldElkXHJcbiAgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcclxuICAvLyB1c2VkIHRvIHN0b3JlIHRoZSBzZWxlY3Rpb24gb2YgdGhlIGRhdGEgc291cmNlIGluIG9yZGVyIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIHdoZW4gb3B0aW9uIGNoYW5nZXNcclxuICBjb25zdCBzZWxlY3RlZEdlb21ldHJpZXNSZWYgPSBSZWFjdC51c2VSZWY8YW55PihudWxsKVxyXG4gIGNvbnN0IG1hcEV4aXN0cyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBpZiAobWFwV2lkZ2V0SWRzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IG1hcFdpZGdldElkID0gbWFwV2lkZ2V0SWRzWzBdXHJcbiAgICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1ttYXBXaWRnZXRJZF0gIT0gbnVsbFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfSlcclxuICBjb25zdCBjYW5Vc2VNYXBGaWx0ZXIgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBtYXBFeGlzdHMgJiYgKGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5DdXJyZW50TWFwRXh0ZW50KSB8fCBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpXHJcbiAgfSwgW2ZpbHRlclR5cGVzLCBtYXBFeGlzdHNdKVxyXG4gIGNvbnN0IHN1cHBvcnRlZEZpbHRlclR5cGVzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBbXVxyXG4gICAgaWYgKHVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwIHx8IHVzZVJ1bnRpbWVEYXRhKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdkYXRhJywgbGFiZWw6IGdldEkxOG5NZXNzYWdlKCdmZWF0dXJlRnJvbURzJykgfSlcclxuICAgIH1cclxuICAgIGlmIChjYW5Vc2VNYXBGaWx0ZXIgJiYgZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkN1cnJlbnRNYXBFeHRlbnQpKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdtYXAnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuQ3VycmVudE1hcEV4dGVudH1gKSB9KVxyXG4gICAgfVxyXG4gICAgaWYgKGNhblVzZU1hcEZpbHRlciAmJiBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ2RyYXcnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZX1gKSB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4gIH0sIFtjYW5Vc2VNYXBGaWx0ZXIsIHVzZURhdGFTb3VyY2VzLCB1c2VSdW50aW1lRGF0YSwgZ2V0STE4bk1lc3NhZ2UsIGZpbHRlclR5cGVzXSlcclxuXHJcbiAgY29uc3QgW2N1cnJlbnRGaWx0ZXJUeXBlLCBzZXRDdXJyZW50RmlsdGVyVHlwZV0gPSBSZWFjdC51c2VTdGF0ZShzdXBwb3J0ZWRGaWx0ZXJUeXBlcz8uWzBdPy52YWx1ZSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIGluIG9yZGVyIHRvIGF2b2lkIGludmFsaWQgb3B0aW9uIGJlaW5nIHNlbGVjdGVkXHJcbiAgICBpZiAoY3VycmVudEZpbHRlclR5cGUgIT09ICdub25lJyAmJiAhc3VwcG9ydGVkRmlsdGVyVHlwZXMuZmluZCgoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gY3VycmVudEZpbHRlclR5cGUpKSB7XHJcbiAgICAgIHNldEN1cnJlbnRGaWx0ZXJUeXBlKHN1cHBvcnRlZEZpbHRlclR5cGVzPy5bMF0/LnZhbHVlKVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RmlsdGVyVHlwZSwgc3VwcG9ydGVkRmlsdGVyVHlwZXNdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gY2xlYXIgdGhlIHJlbGF0aW9uc2hpcCBhbmQgYnVmZmVyIGlmIGZpbHRlciB0eXBlIGlzIG5vdCAnZGF0YSdcclxuICAgIGlmIChjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ21hcCcgfHwgY3VycmVudEZpbHRlclR5cGUgPT09ICdkcmF3JyB8fCBjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ25vbmUnKSB7XHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2UobnVsbClcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoMCwgVW5pdFR5cGUuTWV0ZXJzKVxyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgICAvLyBubyBuZWVkIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIGlmIHRoZSBkYXRhIHNvdXJjZSBoYXMgc2VsZWN0aW9uIHNpbmNlIGl0IHdpbGwgYmUgdXBkYXRlZCBpbiB0aGUgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIG1ldGhvZFxyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgc2VsZWN0ZWRHZW9tZXRyaWVzUmVmLmN1cnJlbnQgPT0gbnVsbCkge1xyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgfSwgW2N1cnJlbnRGaWx0ZXJUeXBlLCBvblJlbGF0aW9uQ2hhbmdlLCBvbkJ1ZmZlckNoYW5nZSwgb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHsgc2V0Q3VycmVudEZpbHRlclR5cGUoZXZ0LnRhcmdldC52YWx1ZSkgfSwgW10pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUdlb21ldHJ5Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGdlb21ldHJ5OiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4ge1xyXG4gICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeSwgZ3JhcGhpYywgbGF5ZXIsIGNsZWFyQWZ0ZXJBcHBseSB9KVxyXG4gIH0sIFtvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChnZW9tZXRyaWVzKSA9PiB7XHJcbiAgICBzZWxlY3RlZEdlb21ldHJpZXNSZWYuY3VycmVudCA9IGdlb21ldHJpZXNcclxuICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IGdlb21ldHJpZXMgfSlcclxuICB9LCBbb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBpZiAoISh1c2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMCB8fCB1c2VSdW50aW1lRGF0YSB8fCBjYW5Vc2VNYXBGaWx0ZXIpKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGNsYXNzTmFtZT0ncHgtNCBwYi00JyBhcmlhLWxhYmVsPXtsYWJlbH0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmb3JtLXRpdGxlIG15LTIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6ICFsYWJlbCAmJiAhZGVzYyB9KX0+XHJcbiAgICAgICAge2xhYmVsICYmIDxkaXYgY2xhc3NOYW1lPSdtci0yIHRpdGxlMic+e2xhYmVsfTwvZGl2Pn1cclxuICAgICAgICB7ZGVzYyAmJiAoXHJcbiAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXtkZXNjfT5cclxuICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeSc+XHJcbiAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpdGxlMyc+e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9PC9kaXY+XHJcbiAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9XHJcbiAgICAgICAgICAgIGNzcz17Y3NzYGhlaWdodDogMzJweDtgfVxyXG4gICAgICAgICAgICB2YWx1ZT17Y3VycmVudEZpbHRlclR5cGV9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZH1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPG9wdGlvbiBrZXk9Jy0nIHZhbHVlPSdub25lJz4tPC9vcHRpb24+XHJcbiAgICAgICAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5tYXAoaXRlbSA9PiA8b3B0aW9uIGtleT17aXRlbS52YWx1ZX0gdmFsdWU9e2l0ZW0udmFsdWV9PntpdGVtLmxhYmVsfTwvb3B0aW9uPil9XHJcbiAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgKFxyXG4gICAgICAgIDxHZW9tZXRyeUZyb21EYXRhU291cmNlXHJcbiAgICAgICAgICBlbmFibGVCdWZmZXI9e2RzRW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RzQnVmZmVyRGlzdGFuY2V9XHJcbiAgICAgICAgICBidWZmZXJVbml0PXtkc0J1ZmZlclVuaXR9XHJcbiAgICAgICAgICBzcGF0aWFsUmVsYXRpb25zPXtzcGF0aWFsUmVsYXRpb25zfVxyXG4gICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3VzZURhdGFTb3VyY2VzfVxyXG4gICAgICAgICAgdXNlUnVudGltZURhdGE9e3VzZVJ1bnRpbWVEYXRhfVxyXG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e2hhbmRsZVNlbGVjdGlvbkNoYW5nZX1cclxuICAgICAgICAgIG9uUmVsYXRpb25DaGFuZ2U9e29uUmVsYXRpb25DaGFuZ2V9XHJcbiAgICAgICAgICBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnbWFwJyAmJiAoXHJcbiAgICAgICAgPEdlb21ldHJ5RnJvbU1hcFxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICAgIHtjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RyYXcnICYmIChcclxuICAgICAgICA8R2VvbWV0cnlGcm9tRHJhd1xyXG4gICAgICAgICAgZW5hYmxlQnVmZmVyPXtkcmF3RW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RyYXdCdWZmZXJEaXN0YW5jZX1cclxuICAgICAgICAgIGJ1ZmZlclVuaXQ9e2RyYXdCdWZmZXJVbml0fVxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e29uQnVmZmVyQ2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIFVzZURhdGFTb3VyY2UsXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBjbGFzc05hbWVzLFxuICBDT05TVEFOVFMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBEYXRhUmVjb3JkU2V0LFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICBEYXRhU291cmNlU3RhdHVzLFxuICBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSxcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxuICBSZWNvcmRTZXRDaGFuZ2VUeXBlLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgTXV0YWJsZVN0b3JlTWFuYWdlcixcbiAgRGF0YUFjdGlvbk1hbmFnZXIsXG4gIERhdGFMZXZlbCxcbiAgdHlwZSBRdWVyaWFibGVEYXRhU291cmNlLFxuICB0eXBlIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zLFxuICBob29rcyxcbiAgbG9kYXNoLFxuICBEYXRhU291cmNlTWFuYWdlcixcbiAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MsIFRhYnMsIFRhYiwgU2VsZWN0IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IEluZm9PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8nXG5pbXBvcnQgeyBUcmFzaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gnXG5pbXBvcnQgeyBQYWdpbmdUeXBlLCB0eXBlIFF1ZXJ5SXRlbVR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5VGFza0Zvcm0gfSBmcm9tICcuL3F1ZXJ5LXRhc2stZm9ybSdcbmltcG9ydCB7IFF1ZXJ5VGFza1Jlc3VsdCB9IGZyb20gJy4vcXVlcnktcmVzdWx0J1xuaW1wb3J0IHsgRGF0YVNvdXJjZVRpcCwgdXNlRGF0YVNvdXJjZUV4aXN0cywgRXJyb3JNZXNzYWdlIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyBRdWVyeVRhc2tMYWJlbCB9IGZyb20gJy4vcXVlcnktdGFzay1sYWJlbCdcbmltcG9ydCB7IHVzZVpvb21Ub1JlY29yZHMgfSBmcm9tICcuL2hvb2tzL3VzZS16b29tLXRvLXJlY29yZHMnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBnZW5lcmF0ZVF1ZXJ5UGFyYW1zLCBleGVjdXRlUXVlcnksIGV4ZWN1dGVDb3VudFF1ZXJ5IH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZCwgcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZCwgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zIH0gZnJvbSAnLi9yZXN1bHRzLW1hbmFnZW1lbnQtdXRpbHMnXG5pbXBvcnQgeyByZW1vdmVIaWdobGlnaHRHcmFwaGljcyB9IGZyb20gJy4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnXG5pbXBvcnQgeyBNZW51T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9tZW51J1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdCdcbmltcG9ydCB7IExvYWRpbmdSZXN1bHQgfSBmcm9tICcuL2xvYWRpbmctcmVzdWx0J1xuaW1wb3J0IHsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzLCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCwgZmluZENsZWFyUmVzdWx0c0J1dHRvbiwgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vLyBFdmVudCBmaXJlZCB3aGVuIFNxbEV4cHJlc3Npb25SdW50aW1lIGNvbnZlcnRzIGhhc2ggdmFsdWUgZnJvbSBzdHJpbmcgdG8gYXJyYXkgZm9ybWF0XG5jb25zdCBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCA9ICdxdWVyeXNpbXBsZS1oYXNoLXZhbHVlLWNvbnZlcnRlZCdcblxuLy8gRXZlbnQgZmlyZWQgd2hlbiBhIGhhc2gtdHJpZ2dlcmVkIHF1ZXJ5IGV4ZWN1dGlvbiBjb21wbGV0ZXMgc3VjY2Vzc2Z1bGx5XG4vLyBUaGlzIGFsbG93cyBIZWxwZXJTaW1wbGUgdG8gdHJhY2sgd2hpY2ggaGFzaCBwYXJhbWV0ZXJzIGhhdmUgYmVlbiBleGVjdXRlZFxuY29uc3QgUVVFUllTSU1QTEVfSEFTSF9RVUVSWV9FWEVDVVRFRF9FVkVOVCA9ICdxdWVyeXNpbXBsZS1oYXNoLXF1ZXJ5LWV4ZWN1dGVkJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza1Byb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBpbmRleDogbnVtYmVyXG4gIHRvdGFsOiBudW1iZXJcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgd3JhcHBlZEluUG9wcGVyPzogYm9vbGVhblxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgaXNJblBvcHBlcj86IGJvb2xlYW5cbiAgb25OYXZCYWNrPzogKCkgPT4gdm9pZFxuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG4gIC8vIFByb3BzIGZvciBTZWFyY2ggTGF5ZXIgZHJvcGRvd24gKHdoZW4gbXVsdGlwbGUgcXVlcmllcylcbiAgcXVlcnlJdGVtcz86IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIHNlbGVjdGVkUXVlcnlJbmRleD86IG51bWJlclxuICBvblF1ZXJ5Q2hhbmdlPzogKGluZGV4OiBudW1iZXIpID0+IHZvaWRcbiAgLy8gR3JvdXBpbmcgcHJvcHNcbiAgZ3JvdXBzPzogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9XG4gIHVuZ3JvdXBlZD86IEFycmF5PHsgaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LCBpbmRleDogbnVtYmVyIH0+XG4gIGdyb3VwT3JkZXI/OiBzdHJpbmdbXVxuICBzZWxlY3RlZEdyb3VwSWQ/OiBzdHJpbmcgfCBudWxsXG4gIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4PzogbnVtYmVyXG4gIG9uR3JvdXBDaGFuZ2U/OiAoZ3JvdXBJZDogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZFxuICBvbkdyb3VwUXVlcnlDaGFuZ2U/OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxuICBvblVuZ3JvdXBlZENoYW5nZT86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gIC8vIFJlc3VsdHMgbW9kZSBwcm9wc1xuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGVcbiAgb25SZXN1bHRzTW9kZUNoYW5nZT86IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB2b2lkXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxuICAvLyBHcmFwaGljcyBsYXllciBwcm9wc1xuICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PzogYm9vbGVhblxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPzogKG91dHB1dERTOiBEYXRhU291cmNlKSA9PiBQcm9taXNlPHZvaWQ+XG4gIG9uQ2xlYXJHcmFwaGljc0xheWVyPzogKCkgPT4gdm9pZFxuICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnXG4gIG9uVGFiQ2hhbmdlPzogKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4gdm9pZFxuICBldmVudE1hbmFnZXI/OiBpbXBvcnQoJy4vaG9va3MvdXNlLWV2ZW50LWhhbmRsaW5nJykuRXZlbnRNYW5hZ2VyICAvLyBDaHVuayA3LjE6IEV2ZW50IEhhbmRsaW5nIE1hbmFnZXJcbiAgLy8gRklYIChyMDE4Ljk2KTogUmVtb3ZlZCBtYW51YWxseVJlbW92ZWRSZWNvcmRJZHMgYW5kIG9uTWFudWFsUmVtb3ZhbCAtIG5vIGxvbmdlciBuZWVkZWRcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBkaXNwbGF5IG5hbWUgZm9yIHF1ZXJ5IGluIGRyb3Bkb3duXG4vLyBVc2VzOiBzZWFyY2hBbGlhcyB8fCBqaW11RmllbGROYW1lIHx8IGl0ZW0ubmFtZSB8fCBmYWxsYmFja1xuY29uc3QgZ2V0UXVlcnlEaXNwbGF5TmFtZSA9IChpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4pOiBzdHJpbmcgPT4ge1xuICAvLyBGaXJzdCBwcmlvcml0eTogc2VhcmNoQWxpYXMgaWYgc2V0XG4gIGlmIChpdGVtLnNlYXJjaEFsaWFzKSB7XG4gICAgcmV0dXJuIGl0ZW0uc2VhcmNoQWxpYXNcbiAgfVxuICBcbiAgLy8gU2Vjb25kIHByaW9yaXR5OiBmaWVsZCBuYW1lIGZyb20gU1FMIGV4cHJlc3Npb25cbiAgY29uc3QgamltdUZpZWxkTmFtZSA9IGl0ZW0uc3FsRXhwck9iaj8ucGFydHM/LlswXT8uamltdUZpZWxkTmFtZVxuICBpZiAoamltdUZpZWxkTmFtZSkge1xuICAgIHJldHVybiBqaW11RmllbGROYW1lXG4gIH1cbiAgXG4gIC8vIFRoaXJkIHByaW9yaXR5OiBpdGVtIG5hbWVcbiAgaWYgKGl0ZW0ubmFtZSkge1xuICAgIHJldHVybiBpdGVtLm5hbWVcbiAgfVxuICBcbiAgLy8gRmFsbGJhY2tcbiAgcmV0dXJuICdRdWVyeSdcbn1cblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gICYud3JhcHBlZCAucXVlcnktZm9ybSB7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG4gIC5xdWVyeS10YXNrX19jb250ZW50IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgcGFkZGluZy10b3A6IDhweDtcbiAgICAmOmhhcyg+IC5xdWVyeS1mb3JtX19oZWFkZXIgPiBkaXY6bm90KC5kLW5vbmUpKSwgJjpoYXMoPiAucXVlcnktcmVzdWx0KSB7XG4gICAgICBwYWRkaW5nLXRvcDogMTZweDtcbiAgICB9XG4gIH1cbiAgLnF1ZXJ5LWZvcm1fX2hlYWRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICAmLmhhcy1jb250ZW50IHtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgICB9XG4gICAgLm5hdi1hY3Rpb24ge1xuICAgICAgZmxleDogMSAxIDA7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIC5qaW11LWJ0biB7XG4gICAgICAgIG1pbi13aWR0aDogMjZweDtcbiAgICAgIH1cbiAgICB9XG4gICAgLnJlc3VsdC1tZW51IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgfVxuICB9XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2sgKHByb3BzOiBRdWVyeVRhc2tQcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5SXRlbSwgb25OYXZCYWNrLCB0b3RhbCwgaXNJblBvcHBlciA9IGZhbHNlLCB3cmFwcGVkSW5Qb3BwZXIgPSBmYWxzZSwgY2xhc3NOYW1lID0gJycsIGluZGV4LCBpbml0aWFsSW5wdXRWYWx1ZSwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcXVlcnlJdGVtcywgc2VsZWN0ZWRRdWVyeUluZGV4LCBvblF1ZXJ5Q2hhbmdlLCBncm91cHMsIHVuZ3JvdXBlZCwgZ3JvdXBPcmRlciwgc2VsZWN0ZWRHcm91cElkLCBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCwgb25Hcm91cENoYW5nZSwgb25Hcm91cFF1ZXJ5Q2hhbmdlLCBvblVuZ3JvdXBlZENoYW5nZSwgcmVzdWx0c01vZGUsIG9uUmVzdWx0c01vZGVDaGFuZ2UsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcsIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIsIG9uQ2xlYXJHcmFwaGljc0xheWVyLCBhY3RpdmVUYWI6IHByb3BBY3RpdmVUYWIsIG9uVGFiQ2hhbmdlOiBwcm9wT25UYWJDaGFuZ2UsIGV2ZW50TWFuYWdlciwgLi4ub3RoZXJQcm9wcyB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3Qgem9vbVRvUmVjb3JkcyA9IHVzZVpvb21Ub1JlY29yZHMobWFwVmlldylcbiAgY29uc3QgW3N0YWdlLCBzZXRTdGFnZV0gPSBSZWFjdC51c2VTdGF0ZSgwKSAvLyAwID0gZm9ybSwgMSA9IHJlc3VsdHMsIDIgPSBsb2FkaW5nXG4gIGNvbnN0IFtpbnRlcm5hbEFjdGl2ZVRhYiwgc2V0SW50ZXJuYWxBY3RpdmVUYWJdID0gUmVhY3QudXNlU3RhdGU8J3F1ZXJ5JyB8ICdyZXN1bHRzJz4oJ3F1ZXJ5JylcbiAgXG4gIC8vIExvZyB3aGVuIGluaXRpYWxJbnB1dFZhbHVlIHByb3AgaXMgcmVjZWl2ZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnl0YXNrLWluaXRpYWxpbnB1dHZhbHVlLXByb3AtcmVjZWl2ZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHByb3BzLnF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IHByb3BzLnF1ZXJ5SXRlbVNob3J0SWQsXG4gICAgICBoYXNJbml0aWFsSW5wdXRWYWx1ZTogISFwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGxhc3RUYWJTd2l0Y2hIYXNoOiBsYXN0VGFiU3dpdGNoSGFzaFJlZi5jdXJyZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBGSVggKHIwMTguMTI4KTogT25seSBzd2l0Y2ggdGFiIE9OQ0UgcGVyIHVuaXF1ZSBoYXNoIHZhbHVlXG4gICAgLy8gVGhpcyBwcmV2ZW50cyBjb250aW51b3VzIHJlLXN3aXRjaGluZyB0aGF0IGJsb2NrcyBhdXRvLXN3aXRjaCB0byBSZXN1bHRzIHRhYlxuICAgIGlmIChwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSAmJiBsYXN0VGFiU3dpdGNoSGFzaFJlZi5jdXJyZW50ICE9PSBwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgbGFzdFRhYlN3aXRjaEhhc2hSZWYuY3VycmVudCA9IHByb3BzLmluaXRpYWxJbnB1dFZhbHVlXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5dGFzay1zd2l0Y2hpbmctdG8tcXVlcnktdGFiLWZvci1oYXNoJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZTogcHJvcHMuaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIGN1cnJlbnRBY3RpdmVUYWI6IHByb3BBY3RpdmVUYWIgfHwgaW50ZXJuYWxBY3RpdmVUYWIsXG4gICAgICAgIG5vdGU6ICdGaXJzdCB0aW1lIHNlZWluZyB0aGlzIGhhc2ggdmFsdWUgLSBzd2l0Y2hpbmcgdG8gUXVlcnkgdGFiJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAocHJvcE9uVGFiQ2hhbmdlKSB7XG4gICAgICAgIHByb3BPblRhYkNoYW5nZSgncXVlcnknKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0SW50ZXJuYWxBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSAmJiBsYXN0VGFiU3dpdGNoSGFzaFJlZi5jdXJyZW50ICE9PSBudWxsKSB7XG4gICAgICAvLyBSZXNldCByZWYgd2hlbiBoYXNoIGlzIGNsZWFyZWQgKGFsbG93cyBzYW1lIGhhc2ggdG8gdHJpZ2dlciBhZ2FpbiBsYXRlcilcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5dGFzay1yZXNldHRpbmctdGFiLXN3aXRjaC10cmFja2luZycsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcHJldmlvdXNIYXNoOiBsYXN0VGFiU3dpdGNoSGFzaFJlZi5jdXJyZW50LFxuICAgICAgICBub3RlOiAnSGFzaCBjbGVhcmVkIC0gcmVzZXR0aW5nIHRyYWNraW5nIHNvIHNhbWUgaGFzaCBjYW4gdHJpZ2dlciBhZ2FpbicsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIGxhc3RUYWJTd2l0Y2hIYXNoUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgfVxuICB9LCBbcHJvcHMuaW5pdGlhbElucHV0VmFsdWUsIHByb3BzLndpZGdldElkLCBwcm9wcy5xdWVyeUl0ZW0uY29uZmlnSWQsIHByb3BzLnF1ZXJ5SXRlbVNob3J0SWQsIHByb3BPblRhYkNoYW5nZSwgcHJvcEFjdGl2ZVRhYiwgaW50ZXJuYWxBY3RpdmVUYWJdKVxuICBcbiAgLy8gQ29udHJvbGxlZCB0YWIgc3RhdGU6IHVzZSBwcm9wIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UgaW50ZXJuYWwgc3RhdGVcbiAgY29uc3QgYWN0aXZlVGFiID0gcHJvcEFjdGl2ZVRhYiB8fCBpbnRlcm5hbEFjdGl2ZVRhYlxuICBjb25zdCBzZXRBY3RpdmVUYWIgPSBSZWFjdC51c2VDYWxsYmFjaygodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB7XG4gICAgaWYgKHByb3BPblRhYkNoYW5nZSkge1xuICAgICAgcHJvcE9uVGFiQ2hhbmdlKHRhYilcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SW50ZXJuYWxBY3RpdmVUYWIodGFiKVxuICAgIH1cbiAgfSwgW3Byb3BPblRhYkNoYW5nZV0pXG4gIGNvbnN0IFtlbmFibGVkLCBzZXRFbmFibGVkXSA9IFJlYWN0LnVzZVN0YXRlKHRydWUpXG4gIGNvbnN0IFtyZXN1bHRDb3VudCwgc2V0UmVzdWx0Q291bnRdID0gUmVhY3QudXNlU3RhdGUoMClcbiAgLy8gRklYIChyMDE4LjkyKTogVHJhY2sgd2hlbiBhIHF1ZXJ5IHN3aXRjaCBpcyBpbiBwcm9ncmVzcyB0byBwcmV2ZW50IGhhbmRsZVJlbmRlckRvbmUgaW50ZXJmZXJlbmNlXG4gIGNvbnN0IGlzUXVlcnlTd2l0Y2hJblByb2dyZXNzUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IHNlbGVjdGVkIHJlY29yZHMgZm9yIHRoZSBjdXJyZW50IHF1ZXJ5IHJlc3VsdHNcbiAgY29uc3QgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBGSVggKHIwMTguMTI4KTogVHJhY2sgd2hpY2ggaGFzaCB2YWx1ZSB3ZSBsYXN0IHN3aXRjaGVkIHRhYnMgZm9yIHRvIHByZXZlbnQgY29udGludW91cyByZS1zd2l0Y2hpbmdcbiAgY29uc3QgbGFzdFRhYlN3aXRjaEhhc2hSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbClcbiAgLy8gVHJhY2sgcXVlcnkgZXhlY3V0aW9uIGNvdW50IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCByZW1vdW50IG9uIG5ldyBxdWVyaWVzXG4gIGNvbnN0IHF1ZXJ5RXhlY3V0aW9uS2V5UmVmID0gUmVhY3QudXNlUmVmKDApXG4gIGNvbnN0IHF1ZXJ5UGFyYW1SZWYgPSBSZWFjdC51c2VSZWY8UXVlcnlQYXJhbXM+KG51bGwpXG4gIGNvbnN0IHJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWY8RGF0YVJlY29yZFtdPihudWxsKVxuICBjb25zdCBbb3V0cHV0RFMsIHNldE91dHB1dERTXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG4gIGNvbnN0IFtkYXRhU291cmNlLCBzZXREYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG4gIGNvbnN0IFtzcGF0aWFsRmlsdGVyRW5hYmxlZCwgc2V0U3BhdGlhbEZpbHRlckVuYWJsZWRdID0gUmVhY3QudXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiA9IFJlYWN0LnVzZVJlZjxJTVNxbEV4cHJlc3Npb24+KHF1ZXJ5SXRlbS5zcWxFeHByT2JqKVxuICBjb25zdCBzcGF0aWFsRmlsdGVyT2JqID0gUmVhY3QudXNlUmVmKG51bGwpXG4gIGNvbnN0IGJhY2tCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3QgY2xlYXJSZXN1bHRCdG5SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3QgW2RhdGFBY3Rpb25GaWx0ZXIsIHNldERhdGFBY3Rpb25GaWx0ZXJdID0gUmVhY3QudXNlU3RhdGUobnVsbClcbiAgY29uc3QgcHJldmlvdXNDb25maWdJZFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmc+KHF1ZXJ5SXRlbS5jb25maWdJZClcbiAgLy8gVHJhY2sgbWFudWFsIHRhYiBzd2l0Y2hlcyB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gIGNvbnN0IG1hbnVhbFRhYlN3aXRjaFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgd2hlbiBhIHF1ZXJ5IHdhcyBqdXN0IGV4ZWN1dGVkIC0gb25seSBhdXRvLXN3aXRjaCBhZnRlciBxdWVyeSBleGVjdXRpb24gY29tcGxldGVzXG4gIGNvbnN0IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBTdG9yZSB0aGUgbGFzdCBydW50aW1lIHpvb20gb3ZlcnJpZGUgdmFsdWUgZnJvbSB0aGUgZm9ybSBmb3IgdXNlIGJ5IEFkZCB0byBNYXAgYWN0aW9uXG4gIGNvbnN0IGxhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbiB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKVxuICAvLyBFcnJvciBzdGF0ZXMgZm9yIHVzZXItZmFjaW5nIGVycm9yc1xuICBjb25zdCBbc2VsZWN0aW9uRXJyb3IsIHNldFNlbGVjdGlvbkVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcbiAgY29uc3QgW3pvb21FcnJvciwgc2V0Wm9vbUVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcbiAgLy8gU3RvcmUgcGVuZGluZyBxdWVyeSB3aGVuIHdhaXRpbmcgZm9yIGhhc2ggdmFsdWUgY29udmVyc2lvblxuICBjb25zdCBwZW5kaW5nSGFzaFF1ZXJ5UmVmID0gUmVhY3QudXNlUmVmPHtcbiAgICBzcWxFeHByOiBJTVNxbEV4cHJlc3Npb25cbiAgICBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqXG4gICAgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhblxuICB9IHwgbnVsbD4obnVsbClcblxuICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICBjb25zdCB7IGljb24sIG5hbWUsIGRpc3BsYXlMYWJlbCB9ID0gY3VycmVudEl0ZW1cbiAgY29uc3QgZHNFeGlzdHM6IGJvb2xlYW4gPSB1c2VEYXRhU291cmNlRXhpc3RzKHsgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLCB1c2VEYXRhU291cmNlSWQ6IGN1cnJlbnRJdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCB9KVxuXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIHRhYiBjb250ZW50IHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnktdGFiLWNvbnRlbnQtcmVuZGVyJyxcbiAgICAgIGFjdGl2ZVRhYixcbiAgICAgIGVuYWJsZWQsXG4gICAgICBkc0V4aXN0cyxcbiAgICAgIGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICBub3RlOiAnUXVlcnkgdGFiIGNvbnRlbnQgc3RhdGUgY2hlY2snXG4gICAgfSlcbiAgfSwgW2FjdGl2ZVRhYiwgZW5hYmxlZCwgZHNFeGlzdHMsIGRhdGFTb3VyY2UsIHF1ZXJ5SXRlbS5jb25maWdJZF0pXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgVGFiIGNoaWxkcmVuIHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhY3RpdmVUYWIgPT09ICdxdWVyeScpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeS10YWItY2hpbGRyZW4tcmVuZGVyJyxcbiAgICAgICAgYWN0aXZlVGFiLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBub3RlOiAnUXVlcnkgVGFiIGNoaWxkcmVuIHNob3VsZCBiZSByZW5kZXJpbmcnXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2FjdGl2ZVRhYiwgcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICAvLyBmb2N1cyB0aGUgYmFjayBidXR0b24gd2hlbiBpdCBpcyByZW5kZXJlZFxuICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgfSlcblxuICAvLyBHZXQgdGhlIHBhZ2luYXRpb24gc3R5bGUgZnJvbSB3aWRnZXQgY29uZmlnIChNdWx0aVBhZ2Ugb3IgTGF6eUxvYWQvU2luZ2xlLXBhZ2UpXG4gIGNvbnN0IHBhZ2luZ1R5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3Byb3BzLndpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRQYWdpbmdTdHlsZVxuICB9KVxuXG4gIC8vIEdldCB0aGUgaW5pdGlhbCBwYWdlIHNpemUgZm9yIHNpbmdsZS1wYWdlIChMYXp5TG9hZCkgcmVzdWx0c1xuICAvLyBUaGlzIGFsbG93cyB1c2VycyB0byBjb25maWd1cmUgaG93IG1hbnkgcmVjb3JkcyBhcmUgbG9hZGVkIGluaXRpYWxseSB3aGVuIHVzaW5nIHNpbmdsZS1wYWdlIG1vZGVcbiAgLy8gRGVmYXVsdHMgdG8gMTAwIGlmIG5vdCBjb25maWd1cmVkXG4gIGNvbnN0IGxhenlMb2FkSW5pdGlhbFBhZ2VTaXplID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbcHJvcHMud2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLmxhenlMb2FkSW5pdGlhbFBhZ2VTaXplXG4gIH0pXG5cblxuICAvLyBXYXRjaCBmb3Igd2hlbiByZXN1bHRzIGFyZSByZWFkeSBhbmQgc3dpdGNoIHRvIFJlc3VsdHMgdGFiXG4gIC8vIE9OTFkgYXV0by1zd2l0Y2ggd2hlbiBhIHF1ZXJ5IHdhcyBqdXN0IGV4ZWN1dGVkIGFuZCByZXN1bHRzIGFyZSBsb2FkZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBEb24ndCBhdXRvLXN3aXRjaCBpZiB1c2VyIG1hbnVhbGx5IHN3aXRjaGVkIHRhYnNcbiAgICBpZiAobWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC1za2lwcGVkJyxcbiAgICAgICAgcmVhc29uOiAnbWFudWFsLXRhYi1zd2l0Y2gtZmxhZy1zZXQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGFjdGl2ZVRhYixcbiAgICAgICAgcmVzdWx0Q291bnQsXG4gICAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmOiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gRk9SQ0VEOiBBbHdheXMgdXNlIFNpbXBsZUxpc3QgLSB3ZSdyZSBkb25lIHdpdGggbGF6eSBsb2FkaW5nIGlzc3Vlc1xuICAgIC8vIFJlY29yZHMgYXJlIGF2YWlsYWJsZSBpbW1lZGlhdGVseSwgc28gd2UgY2FuIHN3aXRjaCBhcyBzb29uIGFzIHJlc3VsdENvdW50ID4gMFxuICAgIGNvbnN0IGlzU2ltcGxlTGlzdCA9IHRydWVcbiAgICBcbiAgICAvLyBPTkxZIGF1dG8tc3dpdGNoIHdoZW46XG4gICAgLy8gMS4gQSBxdWVyeSB3YXMganVzdCBleGVjdXRlZCAocXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9PT0gdHJ1ZSlcbiAgICAvLyAyLiBXZSBoYXZlIHJlc3VsdHMgKHJlc3VsdENvdW50ID4gMClcbiAgICAvLyAzLiBSZWNvcmRzIGFyZSBhY3R1YWxseSBsb2FkZWQ6XG4gICAgLy8gICAgLSBGb3IgU2ltcGxlTGlzdDogcmVzdWx0Q291bnQgPiAwIGlzIHN1ZmZpY2llbnQgKHJlY29yZHMgYXZhaWxhYmxlIGltbWVkaWF0ZWx5KVxuICAgIC8vICAgIC0gRm9yIExhenlMb2FkOiByZWNvcmRzUmVmLmN1cnJlbnQgbXVzdCBoYXZlIGRhdGEgKHdhaXQgZm9yIGxhenkgbG9hZGluZylcbiAgICAvLyA0LiBXZSdyZSBjdXJyZW50bHkgb24gdGhlIHF1ZXJ5IHRhYiAoZG9uJ3Qgc3dpdGNoIGlmIGFscmVhZHkgb24gcmVzdWx0cylcbiAgICBjb25zdCBoYXNSZWNvcmRzID0gaXNTaW1wbGVMaXN0IFxuICAgICAgPyByZXN1bHRDb3VudCA+IDAgXG4gICAgICA6IChyZWNvcmRzUmVmLmN1cnJlbnQgJiYgcmVjb3Jkc1JlZi5jdXJyZW50Lmxlbmd0aCA+IDApXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC1jaGVjaycsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgYWN0aXZlVGFiLFxuICAgICAgcmVzdWx0Q291bnQsXG4gICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZjogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCxcbiAgICAgIGlzU2ltcGxlTGlzdCxcbiAgICAgIHBhZ2luZ1R5cGVJbkNvbmZpZyxcbiAgICAgIGhhc1JlY29yZHMsXG4gICAgICByZWNvcmRzUmVmTGVuZ3RoOiByZWNvcmRzUmVmLmN1cnJlbnQ/Lmxlbmd0aCB8fCAwLFxuICAgICAgbWFudWFsVGFiU3dpdGNoUmVmOiBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCxcbiAgICAgIHdpbGxBdXRvU3dpdGNoOiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ICYmIHJlc3VsdENvdW50ID4gMCAmJiBoYXNSZWNvcmRzICYmIGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5JyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgaWYgKHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgJiYgXG4gICAgICAgIHJlc3VsdENvdW50ID4gMCAmJiBcbiAgICAgICAgaGFzUmVjb3JkcyAmJiBcbiAgICAgICAgYWN0aXZlVGFiID09PSAncXVlcnknKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnYXV0by1zd2l0Y2gtdHJpZ2dlcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBmcm9tVGFiOiBhY3RpdmVUYWIsXG4gICAgICAgIHRvVGFiOiAncmVzdWx0cycsXG4gICAgICAgIHJlc3VsdENvdW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBzZXRBY3RpdmVUYWIoJ3Jlc3VsdHMnKVxuICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IGFmdGVyIHN3aXRjaGluZ1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2F1dG8tc3dpdGNoLWNvbXBsZXRlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWZSZXNldDogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3Jlc3VsdENvdW50LCBhY3RpdmVUYWIsIHBhZ2luZ1R5cGVJbkNvbmZpZ10pXG5cbiAgLy8gVmVyaWZ5IGRyb3Bkb3ducyBhcmUgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXIgd2hlbiBwcmVzZW50XG4gIC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGdyb3VwZWQgcXVlcmllcyB3aGVyZSBkcm9wZG93bnMgbmVlZCB0byBiZSBzeW5jaHJvbml6ZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IHZlcmlmeSBpZiB3ZSBoYXZlIGEgaGFzaCBwYXJhbWV0ZXJcbiAgICBpZiAoIWluaXRpYWxJbnB1dFZhbHVlIHx8ICFxdWVyeUl0ZW0uc2hvcnRJZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgY3VycmVudCBxdWVyeUl0ZW0gbWF0Y2hlcyB3aGF0IHdlIGV4cGVjdCBmcm9tIGhhc2ggcGFyYW1ldGVyXG4gICAgY29uc3QgZXhwZWN0ZWRTaG9ydElkID0gcXVlcnlJdGVtLnNob3J0SWRcbiAgICBjb25zdCBpc0dyb3VwZWRRdWVyeSA9IHF1ZXJ5SXRlbS5ncm91cElkICE9PSBudWxsICYmIHF1ZXJ5SXRlbS5ncm91cElkICE9PSB1bmRlZmluZWRcbiAgICBcbiAgICAvLyBDaGVjayBpZiBkcm9wZG93bnMgYXJlIGNvcnJlY3RseSBzZXQgZm9yIGdyb3VwZWQgcXVlcmllc1xuICAgIGlmIChpc0dyb3VwZWRRdWVyeSkge1xuICAgICAgY29uc3QgZXhwZWN0ZWRHcm91cElkID0gcXVlcnlJdGVtLmdyb3VwSWRcbiAgICAgIGNvbnN0IGFjdHVhbEdyb3VwSWQgPSBzZWxlY3RlZEdyb3VwSWRcbiAgICAgIGNvbnN0IGV4cGVjdGVkUXVlcnlJbmRleCA9IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4XG4gICAgICBcbiAgICAgIGlmIChleHBlY3RlZEdyb3VwSWQgIT09IGFjdHVhbEdyb3VwSWQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ2Ryb3Bkb3duLWdyb3VwLW1pc21hdGNoJyxcbiAgICAgICAgICBleHBlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgYWN0dWFsR3JvdXBJZCxcbiAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgICAgd2FybmluZzogJ0ZpcnN0IGRyb3Bkb3duIG1heSBub3QgYmUgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKGV4cGVjdGVkUXVlcnlJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIFZlcmlmeSB0aGUgcXVlcnkgaW5kZXggd2l0aGluIHRoZSBncm91cCBtYXRjaGVzXG4gICAgICAgIGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cHM/LltleHBlY3RlZEdyb3VwSWRdPy5pdGVtc1xuICAgICAgICBpZiAoZ3JvdXBJdGVtcyAmJiBncm91cEl0ZW1zLmxlbmd0aCA+IGV4cGVjdGVkUXVlcnlJbmRleCkge1xuICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUXVlcnlDb25maWdJZCA9IGdyb3VwSXRlbXNbZXhwZWN0ZWRRdWVyeUluZGV4XT8uY29uZmlnSWRcbiAgICAgICAgICBjb25zdCBhY3R1YWxRdWVyeUNvbmZpZ0lkID0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgaWYgKGV4cGVjdGVkUXVlcnlDb25maWdJZCAhPT0gYWN0dWFsUXVlcnlDb25maWdJZCkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdkcm9wZG93bi1xdWVyeS1pbmRleC1taXNtYXRjaCcsXG4gICAgICAgICAgICAgIGV4cGVjdGVkUXVlcnlDb25maWdJZCxcbiAgICAgICAgICAgICAgYWN0dWFsUXVlcnlDb25maWdJZCxcbiAgICAgICAgICAgICAgZXhwZWN0ZWRRdWVyeUluZGV4LFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgICAgICAgIHdhcm5pbmc6ICdTZWNvbmQgZHJvcGRvd24gbWF5IG5vdCBiZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnZHJvcGRvd25zLXN5bmNocm9uaXplZCcsXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICAgICAgZ3JvdXBJZDogZXhwZWN0ZWRHcm91cElkLFxuICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleDogZXhwZWN0ZWRRdWVyeUluZGV4LFxuICAgICAgICAgICAgICBub3RlOiAnRHJvcGRvd25zIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5IC0gdmVyaWZ5IGl0J3Mgc2VsZWN0ZWRcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnZHJvcGRvd25zLXN5bmNocm9uaXplZC11bmdyb3VwZWQnLFxuICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgIG5vdGU6ICdVbmdyb3VwZWQgcXVlcnkgZHJvcGRvd24gc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2luaXRpYWxJbnB1dFZhbHVlLCBxdWVyeUl0ZW0uc2hvcnRJZCwgcXVlcnlJdGVtLmdyb3VwSWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgc2VsZWN0ZWRHcm91cElkLCBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCwgZ3JvdXBzXSlcblxuICBjb25zdCB1c2VPdXRwdXREczogSW1tdXRhYmxlT2JqZWN0PFVzZURhdGFTb3VyY2U+ID0gUmVhY3QudXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgSW1tdXRhYmxlKHtcbiAgICAgICAgZGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkLFxuICAgICAgICBtYWluRGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgICB9KSxcbiAgICBbcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZF1cbiAgKVxuXG4gIGNvbnN0IHVwZGF0ZURhdGFTb3VyY2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZHM/OiBEYXRhU291cmNlKSA9PiB7XG4gICAgY29uc3QgY3VycmVudERzID0gZHMgPz8gZGF0YVNvdXJjZVxuICAgIC8vIHNob3VsZCBkaXNhYmxlIHNwYXRpYWwgZmlsdGVyIGlmIHRoZSBkYXRhU291cmNlIGlzIGFuIG91dHB1dCBkcyBhbmQgaXQgYWxyZWFkeSBoYXMgc3BhdGlhbCBmaWx0ZXJcbiAgICBpZiAoY3VycmVudERzPy5nZXREYXRhU291cmNlSnNvbigpPy5pc091dHB1dEZyb21XaWRnZXQpIHtcbiAgICAgIGNvbnN0IHFEczogUXVlcmlhYmxlRGF0YVNvdXJjZSA9IGN1cnJlbnREcyBhcyBRdWVyaWFibGVEYXRhU291cmNlXG4gICAgICBjb25zdCBxUGFyYW1zID0gcURzLmdldEN1cnJlbnRRdWVyeVBhcmFtcz8uKCkgYXMgRmVhdHVyZUxheWVyUXVlcnlQYXJhbXNcbiAgICAgIGlmIChxUGFyYW1zLmdlb21ldHJ5ICE9IG51bGwpIHtcbiAgICAgICAgc2V0U3BhdGlhbEZpbHRlckVuYWJsZWQoZmFsc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZCh0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2RhdGFTb3VyY2VdKVxuXG4gIGNvbnN0IGhhbmRsZVN0YXR1c0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlbmFibGVkOiBib29sZWFuKSA9PiB7XG4gICAgc2V0RW5hYmxlZChlbmFibGVkKVxuICAgIHVwZGF0ZURhdGFTb3VyY2UoKVxuICB9LCBbdXBkYXRlRGF0YVNvdXJjZV0pXG5cbiAgY29uc3QgaGFuZGxlT3V0cHV0RGF0YVNvdXJjZUluZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5mbywgcHJlSW5mbykgPT4ge1xuICAgIGNvbnN0IG91dHB1dElkID0gcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZFxuICAgIGNvbnN0IGZpbHRlciA9IGluZm8/LndpZGdldFF1ZXJpZXMgPyBpbmZvLndpZGdldFF1ZXJpZXNbYHNldEZpbHRlci0ke291dHB1dElkfWBdIDogbnVsbFxuICAgIGlmIChmaWx0ZXIgPT0gbnVsbCkgeyAvLyBmaWx0ZXIgaXMgbnVsbCBtZWFucyB0aGVyZSBhcmUgaW5jb21wbGV0ZSBxdWVyaWVzLCBpZ25vcmUgdGhpcyBjaGFuZ2VcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBwcmVGaWx0ZXIgPSBwcmVJbmZvPy53aWRnZXRRdWVyaWVzID8gcHJlSW5mby53aWRnZXRRdWVyaWVzW2BzZXRGaWx0ZXItJHtvdXRwdXRJZH1gXSA6IG51bGxcbiAgICBpZiAoZmlsdGVyPy53aGVyZSAhPT0gcHJlRmlsdGVyPy53aGVyZSkge1xuICAgICAgc2V0RGF0YUFjdGlvbkZpbHRlcihmaWx0ZXIpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZF0pXG5cbiAgY29uc3QgcHVibGlzaERhdGFDbGVhcmVkTXNnID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghb3V0cHV0RFMpIHJldHVyblxuICAgIGNvbnN0IGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlID0gbmV3IERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKHByb3BzLndpZGdldElkLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLlJlbW92ZSwgW291dHB1dERTLmlkXSlcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKVxuICAgIGF3YWl0IE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UobmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZShwcm9wcy53aWRnZXRJZCwgW10sIFtvdXRwdXREUy5pZF0pKVxuICB9LCBbcHJvcHMud2lkZ2V0SWQsIG91dHB1dERTXSlcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBxdWVyeSByZXN1bHRzIGZyb20gdGhlIFVJIGFuZCBtYXAuXG4gICAqIFRoaXMgaXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIGNsZWFyaW5nIHJlc3VsdHMuXG4gICAqIEl0IGNsZWFycyB0aGUgcmVjb3JkcywgcmVzZXRzIHRoZSByZXN1bHQgY291bnQsIGNsZWFycyBzZWxlY3Rpb24gZnJvbSB0aGUgbWFwLFxuICAgKiBwdWJsaXNoZXMgYSBjbGVhcmVkIG1lc3NhZ2UgdG8gdGhlIG1hcCwgc3dpdGNoZXMgYmFjayB0byB0aGUgUXVlcnkgdGFiLFxuICAgKiBhbmQgaW5jcmVtZW50cyB0aGUgcXVlcnkgZXhlY3V0aW9uIGtleSB0byBmb3JjZSBRdWVyeVRhc2tSZXN1bHQgdG8gcmVtb3VudCB3aXRoIGZyZXNoIHN0YXRlLlxuICAgKi9cbiAgY29uc3QgY2xlYXJSZXN1bHQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAocmVhc29uOiBzdHJpbmcgPSAndW5rbm93bicpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2NsZWFyUmVzdWx0LWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREUyxcbiAgICAgIHJlYXNvbixcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgb3V0cHV0RFM/LnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICAgIHNldFJlc3VsdENvdW50KDApXG4gICAgXG4gICAgLy8gTk9URTogR3JhcGhpY3MgbGF5ZXIgY2xlYXJpbmcgaXMgbm93IGhhbmRsZWQgaW5zaWRlIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlc1xuICAgIC8vIGNhbGxlZCBiZWxvdy4gV2UgZW5zdXJlIHRoaXMgaXMgYXdhaXRlZCB0byBwcmV2ZW50IHJhY2UgY29uZGl0aW9ucy5cbiAgICBcbiAgICAvLyBDbGVhciBzZWxlY3Rpb24gZGlyZWN0bHkgZnJvbSBkYXRhIHNvdXJjZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhwcm9wcy53aWRnZXRJZCwgb3V0cHV0RFMsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtc2VsZWN0aW9uLWNsZWFyZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2NsZWFyUmVzdWx0LXNlbGVjdGlvbi1jbGVhci1mYWlsZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHMgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShbXSlcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2FjY3VtdWxhdGVkLXJlY29yZHMtY2xlYXJlZC1vbi1jbGVhci1yZXN1bHRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBhd2FpdCBwdWJsaXNoRGF0YUNsZWFyZWRNc2coKVxuICAgIC8vIFN3aXRjaCBiYWNrIHRvIFF1ZXJ5IHRhYiB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICBzZXRTdGFnZSgwKVxuICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgc2VsZWN0aW9uIGZsYWcgd2hlbiBjbGVhcmluZ1xuICAgIC8vIEluY3JlbWVudCBxdWVyeSBleGVjdXRpb24ga2V5IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCByZW1vdW50IHdpdGggZnJlc2ggc3RhdGVcbiAgICBxdWVyeUV4ZWN1dGlvbktleVJlZi5jdXJyZW50ICs9IDFcbiAgICAvLyBDbGVhciBlcnJvciBzdGF0ZXMgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbClcbiAgICBzZXRab29tRXJyb3IobnVsbClcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtY29tcGxldGUnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW291dHB1dERTLCBwdWJsaXNoRGF0YUNsZWFyZWRNc2csIHByb3BzLndpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyXSlcblxuICAvKipcbiAgICogSGFuZGxlcyBkYXRhIHNvdXJjZSBjcmVhdGlvbiB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJ5IGl0ZW1zLlxuICAgKiBXaGVuIGEgbmV3IHF1ZXJ5IGl0ZW0gaXMgc2VsZWN0ZWQgKGUuZy4sIHN3aXRjaGluZyBmcm9tIFBhcmNlbCB0byBNYWpvciksXG4gICAqIHRoaXMgY2xlYXJzIG9sZCByZXN1bHRzIHRvIGVuc3VyZSBhbGwgY2xlYW51cCBsb2dpYyBydW5zIHByb3Blcmx5LlxuICAgKiBcbiAgICogQHBhcmFtIGRzIC0gVGhlIG5ld2x5IGNyZWF0ZWQgZGF0YSBzb3VyY2UgZm9yIHRoZSBzZWxlY3RlZCBxdWVyeSBpdGVtXG4gICAqL1xuICBjb25zdCBoYW5kbGVEYXRhU291cmNlQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChkczogRGF0YVNvdXJjZSkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQtc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gSW4gXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCBwcmVzZXJ2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFuZCBzZWxlY3Rpb24gLSBkb24ndCBjbGVhclxuICAgIGlmICgocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikgXG4gICAgICAgICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncHJlc2VydmluZy1zZWxlY3Rpb24tb24tcXVlcnktc3dpdGNoLWhhbmRsZURhdGFTb3VyY2VDcmVhdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHNldERhdGFTb3VyY2UoZHMpXG4gICAgICB1cGRhdGVEYXRhU291cmNlKGRzKVxuICAgICAgc2V0U3RhZ2UoMClcbiAgICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgICAgcmV0dXJuIC8vIFNraXAgY2xlYXJpbmcgLSBwcmVzZXJ2ZSBzZWxlY3Rpb25cbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgb2xkIHJlc3VsdHNcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkLWNsZWFyaW5nLXJlc3VsdHMtZm9yLW5ldy1tb2RlJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkLW5ldy1tb2RlJylcblxuICAgIHNldERhdGFTb3VyY2UoZHMpXG4gICAgdXBkYXRlRGF0YVNvdXJjZShkcylcbiAgICBzZXRTdGFnZSgwKVxuICAgIHNldEFjdGl2ZVRhYigncXVlcnknKSAvLyBSZXR1cm4gdG8gUXVlcnkgdGFiIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgfSwgW3VwZGF0ZURhdGFTb3VyY2UsIGNsZWFyUmVzdWx0LCByZXN1bHRDb3VudCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcHJvcHMud2lkZ2V0SWRdKVxuXG4gIGNvbnN0IGhhbmRsZU91dHB1dERhdGFTb3VyY2VDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKGRzOiBEYXRhU291cmNlKSA9PiB7XG4gICAgc2V0T3V0cHV0RFMoZHMpXG4gICAgXG4gICAgLy8gRGV0ZWN0IHF1ZXJ5IHN3aXRjaCBmb3IgbG9nZ2luZ1xuICAgIGNvbnN0IGlzU3dpdGNoaW5nUXVlcmllcyA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCAhPT0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgY29uc3Qgb2xkQ29uZmlnSWQgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnRcbiAgICBcbiAgICAvLyBGSVggKHIwMTguOTMpOiBTZXQgcXVlcnkgc3dpdGNoIGZsYWcgSU1NRURJQVRFTFkgd2hlbiBxdWVyeSBzd2l0Y2ggaXMgZGV0ZWN0ZWRcbiAgICAvLyBUaGlzIHByZXZlbnRzIGhhbmRsZVJlbmRlckRvbmUgZnJvbSBydW5uaW5nIGJlZm9yZSB0aGUgcXVlcnkgc3dpdGNoIHJlLXNlbGVjdGlvbiBsb2dpY1xuICAgIC8vIFRoZSBmbGFnIG11c3QgYmUgc2V0IEJFRk9SRSBhbnkgcmVuZGVyaW5nIGhhcHBlbnMgdGhhdCBjb3VsZCB0cmlnZ2VyIGhhbmRsZVJlbmRlckRvbmVcbiAgICBpZiAoaXNTd2l0Y2hpbmdRdWVyaWVzICYmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSkge1xuICAgICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBpc1F1ZXJ5U3dpdGNoSW5Qcm9ncmVzc1JlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdxdWVyeS1zd2l0Y2gtZGV0ZWN0ZWQtc2V0dGluZy1mbGFnLWVhcmx5JyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICBmbGFnU2V0OiB0cnVlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBWRVJJRklDQVRJT04gTE9HR0lORzogVHJhY2sgZ3JhcGhpY3MgbGF5ZXIgc3RhdGUgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgIGlmIChpc1N3aXRjaGluZ1F1ZXJpZXMgJiYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pKSB7XG4gICAgICBjb25zdCBncmFwaGljc0NvdW50QmVmb3JlID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVPdXRwdXREYXRhU291cmNlQ3JlYXRlZC1xdWVyeS1zd2l0Y2gtZGV0ZWN0ZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIG9sZENvbmZpZ0lkLFxuICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaGFzR3JhcGhpY3NMYXllcjogISFncmFwaGljc0xheWVyLFxuICAgICAgICBncmFwaGljc0NvdW50QmVmb3JlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICBoYXNPbkNsZWFyR3JhcGhpY3NMYXllcjogISFvbkNsZWFyR3JhcGhpY3NMYXllcixcbiAgICAgICAgaXNRdWVyeVN3aXRjaEZsYWdTZXQ6IGlzUXVlcnlTd2l0Y2hJblByb2dyZXNzUmVmLmN1cnJlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQlVHIExPR0dJTkc6IEFjY3VtdWxhdGVkIHJlc3VsdHMgZm9ybWF0IHN3aXRjaCBidWdcbiAgICAgIC8vIExvZyB3aGVuZXZlciBxdWVyeSBzd2l0Y2hlcyB3aXRoIGFjY3VtdWxhdGVkIHJlY29yZHMgKGtub3duIGJ1ZyAtIGZvcm1hdCB3aWxsIGNoYW5nZSlcbiAgICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdCVUcnLCB7XG4gICAgICAgICAgYnVnSWQ6ICdCVUctQURELU1PREUtMDAxJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ1VJJyxcbiAgICAgICAgICBldmVudDogJ2FjY3VtdWxhdGVkLXJlc3VsdHMtZm9ybWF0LXN3aXRjaCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIG9sZFF1ZXJ5Q29uZmlnSWQ6IG9sZENvbmZpZ0lkLFxuICAgICAgICAgIG5ld1F1ZXJ5Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICBvbGRRdWVyeU5hbWU6ICdVbmtub3duIChub3QgdHJhY2tlZCknLCAvLyBXZSBkb24ndCBjdXJyZW50bHkgdHJhY2sgd2hpY2ggcXVlcnkgY3JlYXRlZCByZWNvcmRzXG4gICAgICAgICAgbmV3UXVlcnlOYW1lOiBxdWVyeUl0ZW0ubmFtZSB8fCBxdWVyeUl0ZW0uc2VhcmNoQWxpYXMgfHwgJ1Vua25vd24nLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQWNjdW11bGF0ZWQgcmVzdWx0cyB3aWxsIGNoYW5nZSB0byBtYXRjaCBuZXcgcXVlcnlcXCdzIGRpc3BsYXkgZm9ybWF0LiBGaWVsZHMsIGxheW91dCwgYW5kIHN0eWxpbmcgd2lsbCBzd2l0Y2ggZnJvbSBvcmlnaW5hbCBxdWVyeVxcJ3MgY29uZmlndXJhdGlvbiB0byBjdXJyZW50IHF1ZXJ5XFwncyBjb25maWd1cmF0aW9uLicsXG4gICAgICAgICAgaW1wYWN0OiAnUmVzdWx0cyBtYXkgc2hvdyB3cm9uZyBmaWVsZHMgb3IgbWlzc2luZyBkYXRhLiBNYWtlcyBBREQgbW9kZSBjb25mdXNpbmcgZm9yIG11bHRpLXF1ZXJ5IHdvcmtmbG93cy4nLFxuICAgICAgICAgIHdvcmthcm91bmQ6ICdVc2UgTkVXX1NFTEVDVElPTiBtb2RlIGluc3RlYWQgb2YgQUREX1RPX1NFTEVDVElPTiwgb3Igb25seSBhY2N1bXVsYXRlIHJlc3VsdHMgZnJvbSB0aGUgc2FtZSBxdWVyeS4nLFxuICAgICAgICAgIHRhcmdldFJlc29sdXRpb246ICdUQkQgLSBTdG9yZSBvcmlnaW5hbCBxdWVyeUNvbmZpZyB3aXRoIGVhY2ggcmVjb3JkIHNldCcsXG4gICAgICAgICAgZG9jdW1lbnRhdGlvbjogJ2RvY3MvYnVncy9BQ0NVTVVMQVRFRF9SRVNVTFRTX0ZPUk1BVF9TV0lUQ0gubWQnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENIRUNLIHJvb3REYXRhU291cmNlLm1hcCB0byBzZWUgaG93IGZyYW1ld29yayBhY2Nlc3NlcyBtYXAgdmlld1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcmlnaW5EYXRhU291cmNlcyA9IGRzLmdldE9yaWdpbkRhdGFTb3VyY2VzKClcbiAgICAgIGNvbnN0IG9yaWdpbkRTID0gb3JpZ2luRGF0YVNvdXJjZXM/LlswXVxuICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgIGNvbnN0IHJvb3REUyA9IG9yaWdpbkRTLmdldFJvb3REYXRhU291cmNlKClcbiAgICAgICAgaWYgKHJvb3REUykge1xuICAgICAgICAgIC8vIEV4cG9zZSByb290RFMgdG8gd2luZG93IGZvciBjb25zb2xlIGluc3BlY3Rpb25cbiAgICAgICAgICA7KHdpbmRvdyBhcyBhbnkpLl9fcXVlcnlTaW1wbGVSb290RFMgPSByb290RFNcbiAgICAgICAgICA7KHdpbmRvdyBhcyBhbnkpLl9fcXVlcnlTaW1wbGVSb290RFNNYXAgPSAocm9vdERTIGFzIGFueSkubWFwXG4gICAgICAgICAgOyh3aW5kb3cgYXMgYW55KS5fX3F1ZXJ5U2ltcGxlT3JpZ2luRFMgPSBvcmlnaW5EU1xuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICBldmVudDogJ2NoZWNrLXJvb3QtZGF0YXNvdXJjZS1tYXAnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgb3V0cHV0RFNJZDogZHMuaWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgICByb290RFNUeXBlOiByb290RFMudHlwZSxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcDogISEocm9vdERTIGFzIGFueSkubWFwLFxuICAgICAgICAgICAgcm9vdERTTWFwVHlwZTogKHJvb3REUyBhcyBhbnkpLm1hcCA/IHR5cGVvZiAocm9vdERTIGFzIGFueSkubWFwIDogJ25vbmUnLFxuICAgICAgICAgICAgcm9vdERTTWFwSWQ6IChyb290RFMgYXMgYW55KS5tYXA/LmlkIHx8ICdub25lJyxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcFZpZXc6ICEhKHJvb3REUyBhcyBhbnkpLm1hcD8udmlldyxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcFZpZXdzOiAhIShyb290RFMgYXMgYW55KS5tYXA/LnZpZXdzLFxuICAgICAgICAgICAgcm9vdERTTWFwVmlld3NMZW5ndGg6IChyb290RFMgYXMgYW55KS5tYXA/LnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIC8vIExvZyBzb21lIG1hcCBwcm9wZXJ0aWVzIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgcm9vdERTTWFwS2V5czogKHJvb3REUyBhcyBhbnkpLm1hcCA/IE9iamVjdC5rZXlzKChyb290RFMgYXMgYW55KS5tYXApLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICAgICAgICB0eXBlb2YgKHJvb3REUyBhcyBhbnkpLm1hcFtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICApLnNsaWNlKDAsIDIwKSA6IFtdLFxuICAgICAgICAgICAgLy8gTG9nIHRoYXQgb2JqZWN0cyBhcmUgYXZhaWxhYmxlIG9uIHdpbmRvdyBmb3IgY29uc29sZSBpbnNwZWN0aW9uXG4gICAgICAgICAgICBjb25zb2xlSW5zcGVjdGlvbjogJ0NoZWNrIHdpbmRvdy5fX3F1ZXJ5U2ltcGxlUm9vdERTLCB3aW5kb3cuX19xdWVyeVNpbXBsZVJvb3REU01hcCwgd2luZG93Ll9fcXVlcnlTaW1wbGVPcmlnaW5EUycsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIG1hcCBleGlzdHMsIGNoZWNrIGl0cyB2aWV3XG4gICAgICAgICAgY29uc3Qgcm9vdE1hcCA9IChyb290RFMgYXMgYW55KS5tYXBcbiAgICAgICAgICBpZiAocm9vdE1hcCkge1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IHJvb3RNYXAudmlldyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cz8uZ2V0SXRlbUF0Py4oMCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyByb290TWFwLnZpZXdzWzBdIDogbnVsbClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdjaGVjay1yb290LWRhdGFzb3VyY2UtbWFwLXZpZXcnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGhhc1ZpZXc6ICEhdmlldyxcbiAgICAgICAgICAgICAgdmlld1R5cGU6IHZpZXc/LnR5cGUgfHwgJ25vbmUnLFxuICAgICAgICAgICAgICB2aWV3SWQ6IHZpZXc/LmlkIHx8ICdub25lJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NoZWNrLXJvb3QtZGF0YXNvdXJjZS1tYXAtZXJyb3InLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGdyYXBoaWNzIGxheWVyIGxhemlseSBpZiBlbmFibGVkIGFuZCBub3QgYWxyZWFkeSBpbml0aWFsaXplZFxuICAgIGlmICh1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgIGF3YWl0IG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIoZHMpXG4gICAgICAvLyBBZnRlciBpbml0aWFsaXphdGlvbiwgZ3JhcGhpY3NMYXllciBhbmQgbWFwVmlldyBwcm9wcyBzaG91bGQgYmUgdXBkYXRlZFxuICAgICAgLy8gQnV0IHNpbmNlIHByb3BzIGNvbWUgZnJvbSByZWZzLCB3ZSBuZWVkIHRvIHdhaXQgZm9yIHdpZGdldCByZS1yZW5kZXJcbiAgICAgIC8vIEZvciBub3csIHVzZSB0aGUgcHJvcHMgdGhhdCB3aWxsIGJlIHVwZGF0ZWQgb24gbmV4dCByZW5kZXJcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgaW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSBhbmQgd2UgaGF2ZSBhY2N1bXVsYXRlZCByZWNvcmRzLCByZS1zZWxlY3QgdGhlbVxuICAgIC8vIFRoaXMgdXNlcyB0aGUgc2FtZSBsb2dpYyBhcyBhZnRlciBxdWVyeSBjb21wbGV0aW9uIC0gc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2hcbiAgICAvLyBUaGlzIGVuc3VyZXMgcmVjb3JkcyBhcmUgc2VsZWN0ZWQgYm90aCBvbiB0aGUgbWFwIGFuZCBpbiB0aGUgUmVzdWx0cyB0YWJcbiAgICBpZiAoKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIFxuICAgICAgICAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIFxuICAgICAgLy8gRklYIChyMDE4LjkzKTogRmxhZyBpcyBub3cgc2V0IGVhcmxpZXIgKGF0IHF1ZXJ5IHN3aXRjaCBkZXRlY3Rpb24pIHRvIHByZXZlbnQgdGltaW5nIGlzc3Vlc1xuICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlIGZsYWcgaXMgYWxyZWFkeSBzZXRcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1yZXNlbGVjdGlvbi1zdGFydGluZycsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICBpc1F1ZXJ5U3dpdGNoRmxhZ1NldDogaXNRdWVyeVN3aXRjaEluUHJvZ3Jlc3NSZWYuY3VycmVudCxcbiAgICAgICAgbm90ZTogJ0ZsYWcgc2hvdWxkIGFscmVhZHkgYmUgc2V0IGZyb20gcXVlcnkgc3dpdGNoIGRldGVjdGlvbicsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVkVSSUZJQ0FUSU9OIExPR0dJTkc6IEdyYXBoaWNzIGNvdW50IGJlZm9yZSBjbGVhcmluZ1xuICAgICAgY29uc3QgZ3JhcGhpY3NDb3VudEJlZm9yZUNsZWFyID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwXG4gICAgICBcbiAgICAgIC8vIEZJWCAocjAxOC42Nyk6IENsZWFyIGdyYXBoaWNzIGxheWVyIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXMgdG8gcHJldmVudCBzdGFsZSBncmFwaGljc1xuICAgICAgLy8gZnJvbSBwcmV2aW91cyBxdWVyaWVzIGZyb20gcGVyc2lzdGluZyBpbiB0aGUgc2hhcmVkIGdyYXBoaWNzIGxheWVyXG4gICAgICBpZiAodXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBncmFwaGljc0xheWVyICYmIG9uQ2xlYXJHcmFwaGljc0xheWVyKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAnY2xlYXJpbmctZ3JhcGhpY3MtbGF5ZXItYmVmb3JlLXJlc2VsZWN0aW9uLW9uLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgIGdyYXBoaWNzQ291bnRCZWZvcmVDbGVhcixcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXIoKVxuICAgICAgICBcbiAgICAgICAgLy8gVkVSSUZJQ0FUSU9OIExPR0dJTkc6IEdyYXBoaWNzIGNvdW50IGFmdGVyIGNsZWFyaW5nXG4gICAgICAgIGNvbnN0IGdyYXBoaWNzQ291bnRBZnRlckNsZWFyID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAnZ3JhcGhpY3MtbGF5ZXItY2xlYXJlZC1vbi1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBncmFwaGljc0NvdW50QmVmb3JlQ2xlYXIsXG4gICAgICAgICAgZ3JhcGhpY3NDb3VudEFmdGVyQ2xlYXIsXG4gICAgICAgICAgY2xlYXJlZDogZ3JhcGhpY3NDb3VudEFmdGVyQ2xlYXIgPT09IDAsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3NraXBwaW5nLWdyYXBoaWNzLWxheWVyLWNsZWFyLW9uLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHJlYXNvbjogIXVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgPyAndXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodC1mYWxzZScgOiBcbiAgICAgICAgICAgICAgICAgICFncmFwaGljc0xheWVyID8gJ25vLWdyYXBoaWNzTGF5ZXInIDogXG4gICAgICAgICAgICAgICAgICAhb25DbGVhckdyYXBoaWNzTGF5ZXIgPyAnbm8tb25DbGVhckdyYXBoaWNzTGF5ZXInIDogJ3Vua25vd24nLFxuICAgICAgICAgIGdyYXBoaWNzQ291bnRCZWZvcmVDbGVhcixcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXNlIGEgZGVsYXkgdG8gZW5zdXJlIHRoZSBEUyBpcyBmdWxseSByZWFkeSBhbmQgZ3JhcGhpY3MgbGF5ZXIgcHJvcHMgYXJlIHVwZGF0ZWQgYWZ0ZXIgd2lkZ2V0IHJlLXJlbmRlclxuICAgICAgLy8gSWYgZ3JhcGhpY3MgbGF5ZXIgd2FzIGp1c3QgaW5pdGlhbGl6ZWQsIHdhaXQgYSBiaXQgbG9uZ2VyIGZvciBwcm9wcyB0byB1cGRhdGVcbiAgICAgIGNvbnN0IGRlbGF5ID0gKHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcikgPyAyMDAgOiAxMDBcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zdCBmZWF0dXJlRFMgPSBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChmZWF0dXJlRFMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gRklYIChyMDE4Ljk2KTogTm8gZmlsdGVyaW5nIG5lZWRlZCAtIGFjY3VtdWxhdGVkUmVjb3JkcyBpcyBhbHJlYWR5IHRoZSBzb3VyY2Ugb2YgdHJ1dGhcbiAgICAgICAgICAvLyBEdXBsaWNhdGUgZGV0ZWN0aW9uIGluIG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZCBwcmV2ZW50cyBkdXBsaWNhdGVzXG4gICAgICAgICAgY29uc3QgcmVjb3Jkc1RvUmVzZWxlY3QgPSBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWRVJJRklDQVRJT04gTE9HR0lORzogU2hvdyByZWNvcmRzIGJlaW5nIHJlc2VsZWN0ZWRcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncXVlcnktc3dpdGNoLXJlc2VsZWN0aW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICByZWNvcmRzVG9SZXNlbGVjdENvdW50OiByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGgsXG4gICAgICAgICAgICByZWNvcmRzVG9SZXNlbGVjdElkczogcmVjb3Jkc1RvUmVzZWxlY3QubWFwKHIgPT4gci5nZXRJZCgpKS5zbGljZSgwLCAxMCksXG4gICAgICAgICAgICBub3RlOiAncjAxOC45NjogVXNpbmcgYWNjdW11bGF0ZWRSZWNvcmRzIGRpcmVjdGx5IC0gbm8gbWFudWFsIHJlbW92YWwgdHJhY2tpbmcnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgYWNjdW11bGF0ZWRSZWNvcmRzIGlmIGZpbHRlcmluZyByZW1vdmVkIGFueSByZWNvcmRzXG4gICAgICAgICAgaWYgKHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCAhPT0gYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCAmJiBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnc3luY2luZy1hY2N1bXVsYXRlZC1yZWNvcmRzLWFmdGVyLWZpbHRlcmluZy1tYW51YWxseS1yZW1vdmVkJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEJlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRBZnRlcjogcmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoLFxuICAgICAgICAgICAgICByZWNvcmRzUmVtb3ZlZDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCAtIHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgbm90ZTogJ1VwZGF0aW5nIGFjY3VtdWxhdGVkUmVjb3JkcyB0byBleGNsdWRlIG1hbnVhbGx5IHJlbW92ZWQgcmVjb3JkcycsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHJlY29yZHNUb1Jlc2VsZWN0KVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBPbmx5IHJlLXNlbGVjdCBpZiB3ZSBoYXZlIHJlY29yZHMgdG8gcmUtc2VsZWN0XG4gICAgICAgICAgaWYgKHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZElkcyA9IHJlY29yZHNUb1Jlc2VsZWN0Lm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERJQUdOT1NUSUMgTE9HR0lORzogV2hhdCB3ZSdyZSBhYm91dCB0byByZS1zZWxlY3RcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1iZWZvcmUtcmVzZWxlY3Rpb24nLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIHJlY29yZHNUb1Jlc2VsZWN0Q291bnQ6IHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgcmVjb3Jkc1RvUmVzZWxlY3RJZHM6IHJlY29yZElkcyxcbiAgICAgICAgICAgICAgb3V0cHV0RFNJZDogZmVhdHVyZURTLmlkLFxuICAgICAgICAgICAgICBncmFwaGljc0xheWVyQ291bnRCZWZvcmU6IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVc2UgdGhlIHNhbWUgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggdGhhdCdzIHVzZWQgYWZ0ZXIgcXVlcnkgY29tcGxldGlvblxuICAgICAgICAgICAgLy8gVGhpcyB3aWxsIHNlbGVjdCByZWNvcmRzIG9uIHRoZSBtYXAgYW5kIHRyaWdnZXIgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2VcbiAgICAgICAgICAgIC8vIGluIHF1ZXJ5LXJlc3VsdC50c3ggdG8gdXBkYXRlIHNlbGVjdGVkUmVjb3JkcyBzdGF0ZSBmb3IgdGhlIFJlc3VsdHMgdGFiXG4gICAgICAgICAgICAvLyBVc2UgZ3JhcGhpY3MgbGF5ZXIgaWYgZW5hYmxlZCAocHJvcHMgc2hvdWxkIGJlIHVwZGF0ZWQgYWZ0ZXIgd2lkZ2V0IHJlLXJlbmRlcilcbiAgICAgICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlRFMsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZElkcyxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvUmVzZWxlY3QsXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyLFxuICAgICAgICAgICAgICAgICAgICBtYXBWaWV3XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBGSVggKHIwMTguOTIpOiBDbGVhciB0aGUgcXVlcnkgc3dpdGNoIGZsYWcgYWZ0ZXIgcmUtc2VsZWN0aW9uIGNvbXBsZXRlc1xuICAgICAgICAgICAgICAgICAgaXNRdWVyeVN3aXRjaEluUHJvZ3Jlc3NSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1jb21wbGV0ZWQtY2xlYXJpbmctaW4tcHJvZ3Jlc3MtZmxhZycsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1Jlc2VsZWN0ZWQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gRklYIChyMDE4Ljg2KTogQ2xlYW4gdXAgZHVwbGljYXRlIHdpZGdldCBvdXRwdXQgZW50cmllcyBpbiBkYXRhX3MgaGFzaFxuICAgICAgICAgICAgICAgICAgLy8gV2hlbiBzd2l0Y2hpbmcgcXVlcmllcywgRXhwZXJpZW5jZSBCdWlsZGVyIGNyZWF0ZXMgYSBuZXcgb3V0cHV0IERTIHdpdGggYSBuZXcgSURcbiAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gcmVtb3ZlIGFsbCBvbGQgd2lkZ2V0IG91dHB1dCBlbnRyaWVzIHRvIHByZXZlbnQgZHVwbGljYXRlc1xuICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE91dHB1dERTSWQgPSBmZWF0dXJlRFMuaWRcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKHVybFBhcmFtcy5oYXMoJ2RhdGFfcycpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFTID0gdXJsUGFyYW1zLmdldCgnZGF0YV9zJykgfHwgJydcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVjb2RlZERhdGFTID0gZGVjb2RlVVJJQ29tcG9uZW50KGRhdGFTKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3Rpb25zID0gZGVjb2RlZERhdGFTLnNwbGl0KCcsJylcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3Qgd2lkZ2V0IG51bWJlciBmcm9tIHdpZGdldElkIChlLmcuLCBcIndpZGdldF8xMlwiIC0+IFwiMTJcIilcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkZ2V0TWF0Y2ggPSBwcm9wcy53aWRnZXRJZC5tYXRjaCgvd2lkZ2V0XyhcXGQrKS8pXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aWRnZXRNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZGdldE51bWJlciA9IHdpZGdldE1hdGNoWzFdXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkZ2V0UGF0dGVybiA9IG5ldyBSZWdFeHAoYHdpZGdldF8ke3dpZGdldE51bWJlcn1fb3V0cHV0XyhcXFxcZCspYClcbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIGFsbCB3aWRnZXQgb3V0cHV0IGVudHJpZXMgZm9yIHRoaXMgd2lkZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkZ2V0T3V0cHV0RW50cmllczogQXJyYXk8e3NlbGVjdGlvbjogc3RyaW5nLCBvdXRwdXRJZDogc3RyaW5nLCByZWNvcmRDb3VudDogbnVtYmVyfT4gPSBbXVxuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbnMuZm9yRWFjaChzZWxlY3Rpb24gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5zdGFydHNXaXRoKCdpZDonKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZFBhcnQgPSBzZWxlY3Rpb24uc3Vic3RyaW5nKDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9uSW5kZXggPSBpZFBhcnQubGFzdEluZGV4T2YoJzonKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sb25JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkc0lkUGFydCA9IGlkUGFydC5zdWJzdHJpbmcoMCwgY29sb25JbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRJZHNQYXJ0ID0gaWRQYXJ0LnN1YnN0cmluZyhjb2xvbkluZGV4ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRDb3VudCA9IHJlY29yZElkc1BhcnQgPyByZWNvcmRJZHNQYXJ0LnNwbGl0KC9bLCtdLykuZmlsdGVyKGlkID0+IGlkKS5sZW5ndGggOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBtYXRjaGVzIG91ciB3aWRnZXQncyBvdXRwdXQgRFMgcGF0dGVyblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvdXRwdXRJZE1hdGNoOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHNJZFBhcnQuaW5jbHVkZXMoJ34nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcG91bmQgZm9ybWF0OiBkYXRhU291cmNlXyp+d2lkZ2V0X1hYX291dHB1dF8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRzSWRQYXJ0LnNwbGl0KCd+JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHBhcnQubWF0Y2god2lkZ2V0UGF0dGVybilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0SWRNYXRjaCA9IG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW1wbGUgZm9ybWF0OiB3aWRnZXRfWFhfb3V0cHV0XypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dElkTWF0Y2ggPSBkc0lkUGFydC5tYXRjaCh3aWRnZXRQYXR0ZXJuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0SWRNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVsbE91dHB1dElkID0gb3V0cHV0SWRNYXRjaFswXSAvLyBlLmcuLCBcIndpZGdldF8xMl9vdXRwdXRfMjg2Mjg2ODM5NTczMjQ0OTdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0T3V0cHV0RW50cmllcy5wdXNoKHsgc2VsZWN0aW9uLCBvdXRwdXRJZDogZnVsbE91dHB1dElkLCByZWNvcmRDb3VudCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBtdWx0aXBsZSBlbnRyaWVzIGZvciB0aGlzIHdpZGdldCwga2VlcCBvbmx5IHRoZSBjdXJyZW50IG9uZVxuICAgICAgICAgICAgICAgICAgICAgIGlmICh3aWRnZXRPdXRwdXRFbnRyaWVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPdXRwdXRJZFNob3J0ID0gY3VycmVudE91dHB1dERTSWQuc3BsaXQoJy0nKS5wb3AoKSAvLyBFeHRyYWN0IHRoZSBudW1lcmljIHBhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1tdWx0aXBsZS13aWRnZXQtb3V0cHV0cy1kZXRlY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxXaWRnZXRPdXRwdXRzOiB3aWRnZXRPdXRwdXRFbnRyaWVzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0T3V0cHV0czogd2lkZ2V0T3V0cHV0RW50cmllcy5tYXAoZSA9PiAoeyBvdXRwdXRJZDogZS5vdXRwdXRJZCwgcmVjb3JkQ291bnQ6IGUucmVjb3JkQ291bnQgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50T3V0cHV0RFNJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE91dHB1dElkU2hvcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBhbGwgb2xkIHdpZGdldCBvdXRwdXQgZW50cmllc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFNlbGVjdGlvbnMgPSBzZWxlY3Rpb25zLmZpbHRlcihzZWxlY3Rpb24gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGluZ0VudHJ5ID0gd2lkZ2V0T3V0cHV0RW50cmllcy5maW5kKGUgPT4gZS5zZWxlY3Rpb24gPT09IHNlbGVjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIG9ubHkgdGhlIGVudHJ5IG1hdGNoaW5nIHRoZSBjdXJyZW50IG91dHB1dCBEU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtlZXBFbnRyeSA9IG1hdGNoaW5nRW50cnkub3V0cHV0SWQuaW5jbHVkZXMoY3VycmVudE91dHB1dElkU2hvcnQgfHwgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFrZWVwRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1zd2l0Y2gtcmVtb3Zpbmctb2xkLXdpZGdldC1vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWRPdXRwdXRJZDogbWF0Y2hpbmdFbnRyeS5vdXRwdXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZFJlY29yZENvdW50OiBtYXRjaGluZ0VudHJ5LnJlY29yZENvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50T3V0cHV0RFNJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2VlcEVudHJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkU2VsZWN0aW9ucy5sZW5ndGggIT09IHNlbGVjdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkU2VsZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsUGFyYW1zLnNldCgnZGF0YV9zJywgZW5jb2RlVVJJQ29tcG9uZW50KHVwZGF0ZWRTZWxlY3Rpb25zLmpvaW4oJywnKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsUGFyYW1zLmRlbGV0ZSgnZGF0YV9zJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHVybFBhcmFtcy50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1zd2l0Y2gtY2xlYW5lZC1kdXBsaWNhdGUtd2lkZ2V0LW91dHB1dHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFNlbGVjdGlvbkNvdW50OiBzZWxlY3Rpb25zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTZWxlY3Rpb25Db3VudDogdXBkYXRlZFNlbGVjdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJpZXNSZW1vdmVkOiBzZWxlY3Rpb25zLmxlbmd0aCAtIHVwZGF0ZWRTZWxlY3Rpb25zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXB0T3V0cHV0RFNJZDogY3VycmVudE91dHB1dERTSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2VwdFJlY29yZENvdW50OiByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3aWRnZXRPdXRwdXRFbnRyaWVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1zaW5nbGUtd2lkZ2V0LW91dHB1dC1mb3VuZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0SWQ6IHdpZGdldE91dHB1dEVudHJpZXNbMF0ub3V0cHV0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZENvdW50OiB3aWRnZXRPdXRwdXRFbnRyaWVzWzBdLnJlY29yZENvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZFJlY29yZENvdW50OiByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZENvdW50c01hdGNoOiB3aWRnZXRPdXRwdXRFbnRyaWVzWzBdLnJlY29yZENvdW50ID09PSByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSByZWNvcmRzUmVmIHNvIHJlc3VsdHMgdGFiIHNob3dzIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICAgIHJlY29yZHNSZWYuY3VycmVudCA9IHJlY29yZHNUb1Jlc2VsZWN0XG4gICAgICAgICAgICAgICAgICBzZXRSZXN1bHRDb3VudChyZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBVElPTiBMT0dHSU5HOiBHcmFwaGljcyBjb3VudCBhZnRlciByZS1zZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGdyYXBoaWNzQ291bnRBZnRlclJlc2VsZWN0aW9uID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogJ3JlLXNlbGVjdGVkLWFjY3VtdWxhdGVkLXJlY29yZHMtYWZ0ZXItcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBmZWF0dXJlRFMuaWQsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkc1RvUmVzZWxlY3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBncmFwaGljc0NvdW50QWZ0ZXJSZXNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRHcmFwaGljc0NvdW50OiByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIGdyYXBoaWNzTWF0Y2g6IGdyYXBoaWNzQ291bnRBZnRlclJlc2VsZWN0aW9uID09PSByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHdoYXQncyBhY3R1YWxseSBzZWxlY3RlZCBpbiB0aGUgRFMgYWZ0ZXIgYSBkZWxheVxuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGZlYXR1cmVEUy5pZClcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbkRTID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSWRzSW5EUyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZElkcygpID8/IFtdXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsR3JhcGhpY3NDb3VudCA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5sZW5ndGggfHwgMFxuICAgICAgICAgICAgICAgICAgICAvLyByMDE4Ljc4OiBVc2UgJ3JlY29yZElkJyBhdHRyaWJ1dGUgKG5vdCBPQkpFQ1RJRC9pZC9GSUQpIC0gdGhhdCdzIGhvdyBncmFwaGljcy1sYXllci11dGlscyBzdG9yZXMgdGhlbVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbEdyYXBoaWNzSWRzID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lm1hcChnID0+IGcuYXR0cmlidXRlcz8ucmVjb3JkSWQpIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5LXN3aXRjaC1hZnRlci1yZXNlbGVjdGlvbi1mdWxsLXN0YXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogZmVhdHVyZURTLmlkLFxuICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkQ291bnQ6IHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZElkczogcmVjb3JkSWRzLFxuICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbFNlbGVjdGVkSW5EUzogc2VsZWN0ZWRJbkRTPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxTZWxlY3RlZElkc0luRFM6IHNlbGVjdGVkSWRzSW5EUyxcbiAgICAgICAgICAgICAgICAgICAgICBmaW5hbEdyYXBoaWNzQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgZmluYWxHcmFwaGljc0lkcyxcbiAgICAgICAgICAgICAgICAgICAgICBhbGxTb3VyY2VzTWF0Y2g6IHNlbGVjdGVkSWRzSW5EUy5sZW5ndGggPT09IHJlY29yZHNUb1Jlc2VsZWN0Lmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxHcmFwaGljc0NvdW50ID09PSByZWNvcmRzVG9SZXNlbGVjdC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHNlbGVjdGVkSWRzSW5EUy5zb3J0KCkpID09PSBKU09OLnN0cmluZ2lmeShyZWNvcmRJZHMuc29ydCgpKSxcbiAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH0sIDIwMClcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAncmUtc2VsZWN0aW9uLWZhaWxlZC1hZnRlci1zd2l0Y2gnLFxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSkoKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBObyByZWNvcmRzIHRvIHJlLXNlbGVjdCAtIGFsbCB3ZXJlIHJlbW92ZWRcbiAgICAgICAgICAgIHJlY29yZHNSZWYuY3VycmVudCA9IFtdXG4gICAgICAgICAgICBzZXRSZXN1bHRDb3VudCgwKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICduby1yZWNvcmRzLXRvLXJlc2VsZWN0LWFsbC1yZW1vdmVkJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBvdXRwdXREU0lkOiBmZWF0dXJlRFMuaWQsXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QmVmb3JlOiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBub3RlOiAnYWxsLXJlY29yZHMtd2VyZS1yZW1vdmVkLW5vLXJlc2VsZWN0aW9uLW5lZWRlZCcsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMClcbiAgICB9XG4gIH0sIFtyZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBwcm9wcy53aWRnZXRJZCwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllciwgb25DbGVhckdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcsIHF1ZXJ5SXRlbS5jb25maWdJZCwgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2VdKVxuXG4gIC8vIENsZWFyIHJlc3VsdHMgd2hlbiBxdWVyeSBpdGVtIGNoYW5nZXMgKGUuZy4sIHdoZW4gbmV3IGhhc2ggcGFyYW1ldGVyIHRyaWdnZXJzIGRpZmZlcmVudCBxdWVyeSlcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IGNsZWFyIGlmIHdlJ3JlIGFjdHVhbGx5IHN3aXRjaGluZyB0byBhIGRpZmZlcmVudCBxdWVyeSAobm90IGp1c3QgcmUtcmVuZGVyaW5nKVxuICAgIGNvbnN0IGlzU3dpdGNoaW5nUXVlcmllcyA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCAhPT0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgXG4gICAgLy8gT25seSBjbGVhciByZXN1bHRzIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXMgaWYgd2UncmUgaW4gXCJOZXdcIiBtb2RlXG4gICAgLy8gSW4gXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB3ZSB3YW50IHRvIHByZXNlcnZlIGFjY3VtdWxhdGVkIHJlY29yZHMgYWNyb3NzIHF1ZXJ5IHN3aXRjaGVzXG4gICAgaWYgKGlzU3dpdGNoaW5nUXVlcmllcyAmJiByZXN1bHRDb3VudCA+IDAgJiYgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAvLyBTdG9yZSB0aGUgb2xkIGNvbmZpZ0lkIGJlZm9yZSB1cGRhdGluZ1xuICAgICAgY29uc3Qgb2xkQ29uZmlnSWQgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnRcbiAgICAgIC8vIFVwZGF0ZSB0aGUgcmVmIHRvIHRyYWNrIHRoZSBuZXcgcXVlcnlcbiAgICAgIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhcmluZy1yZXN1bHRzLW9uLXF1ZXJ5LXN3aXRjaC1uZXctbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHJlc3VsdHNNb2RlXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBDbGVhciBpbW1lZGlhdGVseSB3aGVuIHN3aXRjaGluZyBxdWVyaWVzLCBidXQgd3JhcCBpbiB0cnktY2F0Y2ggdG8gaGFuZGxlXG4gICAgICAvLyByYWNlIGNvbmRpdGlvbnMgd2l0aCBmZWF0dXJlIGluZm8gd2luZG93cyB0aGF0IG1pZ2h0IGJlIHJlbmRlcmluZ1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2xlYXJSZXN1bHQoJ3F1ZXJ5LWl0ZW0tc3dpdGNoLW5ldy1tb2RlJylcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIExvZyBmb3IgZGVidWdnaW5nIGJ1dCBkb24ndCBzaG93IHRvIHVzZXIgKGZyYW1ld29yayByYWNlIGNvbmRpdGlvbilcbiAgICAgICAgLy8gVGhlIGVycm9yIGlzIGluIGZyYW1ld29yayBjb2RlIChmZWF0dXJlLWluZm8udHN4KSwgbm90IG91ciBjb2RlXG4gICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiBmZWF0dXJlLWluZm8udHN4IGlzIHRyeWluZyB0byBhcHBlbmRDaGlsZCB0byBhIERPTSBlbGVtZW50XG4gICAgICAgIC8vIHRoYXQgZ2V0cyByZW1vdmVkIHdoZW4gd2UgY2xlYXIgc2VsZWN0aW9uXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ2NsZWFyLXJlc3VsdC1yYWNlLWNvbmRpdGlvbicsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBub3RlOiAnTGlrZWx5IHJhY2UgY29uZGl0aW9uIHdpdGggZmVhdHVyZS1pbmZvLnRzeCdcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBjbGVhcmluZyByZXN1bHRzIChsaWtlbHkgcmFjZSBjb25kaXRpb24gd2l0aCBmZWF0dXJlIGluZm8pOicsIGVycm9yKVxuICAgICAgICB9XG4gICAgICAgIC8vIERvbid0IHNldCBlcnJvciBzdGF0ZSAtIHRoaXMgaXMgZXhwZWN0ZWQgaW4gc29tZSBzY2VuYXJpb3NcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzU3dpdGNoaW5nUXVlcmllcykge1xuICAgICAgLy8gU3RvcmUgdGhlIG9sZCBjb25maWdJZCBCRUZPUkUgdXBkYXRpbmcgdGhlIHJlZlxuICAgICAgY29uc3Qgb2xkQ29uZmlnSWQgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnRcbiAgICAgIFxuICAgICAgLy8gRElBR05PU1RJQyBMT0dHSU5HOiBGdWxsIHN0YXRlIEJFRk9SRSBzeW5jXG4gICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICBpZiAob3V0cHV0RFMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgYWN0dWFsbHlTZWxlY3RlZFJlY29yZHNCZWZvcmVTeW5jID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgICAgIGNvbnN0IGFjY3VtdWxhdGVkSWRzID0gYWNjdW11bGF0ZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICBjb25zdCBhY3R1YWxseVNlbGVjdGVkSWRzQmVmb3JlU3luYyA9IGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzQmVmb3JlU3luYy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgICAgLy8gcjAxOC43ODogVXNlICdyZWNvcmRJZCcgYXR0cmlidXRlIC0gdGhhdCdzIGhvdyBncmFwaGljcy1sYXllci11dGlscyBzdG9yZXMgdGhlbVxuICAgICAgICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXJJZHMgPSBncmFwaGljc0xheWVyPy5ncmFwaGljcz8ubWFwKGcgPT4gZy5hdHRyaWJ1dGVzPy5yZWNvcmRJZCkgfHwgW11cbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncXVlcnktc3dpdGNoLWJlZm9yZS1zeW5jLWZ1bGwtc3RhdGUnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICBhY2N1bXVsYXRlZElkczogYWNjdW11bGF0ZWRJZHMsXG4gICAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkQ291bnQ6IGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzQmVmb3JlU3luYy5sZW5ndGgsXG4gICAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkSWRzOiBhY3R1YWxseVNlbGVjdGVkSWRzQmVmb3JlU3luYyxcbiAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXJDb3VudDogZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgZ3JhcGhpY3NMYXllcklkczogZ3JhcGhpY3NMYXllcklkcyxcbiAgICAgICAgICAgIHJlY29yZHNPdXRPZlN5bmM6IGFjY3VtdWxhdGVkSWRzLmxlbmd0aCAhPT0gYWN0dWFsbHlTZWxlY3RlZElkc0JlZm9yZVN5bmMubGVuZ3RoLFxuICAgICAgICAgICAgaWRzTWF0Y2g6IEpTT04uc3RyaW5naWZ5KGFjY3VtdWxhdGVkSWRzLnNvcnQoKSkgPT09IEpTT04uc3RyaW5naWZ5KGFjdHVhbGx5U2VsZWN0ZWRJZHNCZWZvcmVTeW5jLnNvcnQoKSksXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZJWCAocjAxOC43MCk6IE9ubHkgc3luYyBhY2N1bXVsYXRlZFJlY29yZHMgd2hlbiB0aGVyZSBhcmUgYWN0dWFsbHkgc2VsZWN0ZWQgcmVjb3JkcyB0aGF0IGFyZSBhIHN1YnNldFxuICAgICAgLy8gVGhpcyBwcmV2ZW50cyBjbGVhcmluZyBhY2N1bXVsYXRlZFJlY29yZHMgd2hlbiBzd2l0Y2hpbmcgdG8gZW1wdHkgZGF0YSBzb3VyY2VzIGR1cmluZyBxdWVyeSBzd2l0Y2hlc1xuICAgICAgLy8gT25seSBzeW5jIGlmIHJlY29yZHMgd2VyZSBtYW51YWxseSByZW1vdmVkIChhY3R1YWxseVNlbGVjdGVkIDwgYWNjdW11bGF0ZWQpLCBub3QgZHVyaW5nIGVtcHR5IERTIHN3aXRjaGVzXG4gICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICBpZiAob3V0cHV0RFMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwICYmIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgY29uc3QgYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdIHx8IFtdXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgJiYgYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubGVuZ3RoIDwgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gQnVpbGQgYSBTZXQgb2YgYWN0dWFsbHkgc2VsZWN0ZWQgSURzIGZvciBmYXN0IGxvb2t1cFxuICAgICAgICAgICAgY29uc3QgYWN0dWFsbHlTZWxlY3RlZElkc1NldCA9IG5ldyBTZXQoYWN0dWFsbHlTZWxlY3RlZFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmlsdGVyIGFjY3VtdWxhdGVkUmVjb3JkcyB0byBvbmx5IGluY2x1ZGUgcmVjb3JkcyB0aGF0IGFyZSBhY3R1YWxseSBzZWxlY3RlZFxuICAgICAgICAgICAgY29uc3Qgc3luY2VkUmVjb3JkcyA9IGFjY3VtdWxhdGVkUmVjb3Jkcy5maWx0ZXIocmVjb3JkID0+IFxuICAgICAgICAgICAgICBhY3R1YWxseVNlbGVjdGVkSWRzU2V0LmhhcyhyZWNvcmQuZ2V0SWQoKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYWNjdW11bGF0ZWRJZHMgPSBhY2N1bXVsYXRlZFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICAgICAgY29uc3QgYWN0dWFsbHlTZWxlY3RlZElkcyA9IGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgIGNvbnN0IHN5bmNlZElkcyA9IHN5bmNlZFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICAgICAgY29uc3QgcmVtb3ZlZElkcyA9IGFjY3VtdWxhdGVkSWRzLmZpbHRlcihpZCA9PiAhc3luY2VkSWRzLmluY2x1ZGVzKGlkKSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnc3luY2luZy1hY2N1bXVsYXRlZC1yZWNvcmRzLWJlZm9yZS1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIG9sZENvbmZpZ0lkLFxuICAgICAgICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEJlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgYWNjdW11bGF0ZWRJZHNCZWZvcmU6IGFjY3VtdWxhdGVkSWRzLFxuICAgICAgICAgICAgICBhY3R1YWxseVNlbGVjdGVkQ291bnQ6IGFjdHVhbGx5U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgYWN0dWFsbHlTZWxlY3RlZElkczogYWN0dWFsbHlTZWxlY3RlZElkcyxcbiAgICAgICAgICAgICAgc3luY2VkUmVjb3Jkc0NvdW50OiBzeW5jZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgc3luY2VkSWRzOiBzeW5jZWRJZHMsXG4gICAgICAgICAgICAgIHJlY29yZHNSZW1vdmVkOiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoIC0gc3luY2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHJlbW92ZWRJZHM6IHJlbW92ZWRJZHMsXG4gICAgICAgICAgICAgIG5vdGU6ICdpbW1lZGlhdGUtc3luYy1iZWZvcmUtcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgYWNjdW11bGF0ZWRSZWNvcmRzIHRvIG1hdGNoIHJlYWxpdHkgKGltbWVkaWF0ZSBzeW5jLCBub3QgbGF6eSlcbiAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHN5bmNlZFJlY29yZHMpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERJQUdOT1NUSUMgTE9HR0lORzogRnVsbCBzdGF0ZSBBRlRFUiBzeW5jXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1zd2l0Y2gtYWZ0ZXItc3luYy1mdWxsLXN0YXRlJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBvbGRDb25maWdJZCxcbiAgICAgICAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRBZnRlcjogc3luY2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkSWRzQWZ0ZXI6IHN5bmNlZElkcyxcbiAgICAgICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZENvdW50OiBhY3R1YWxseVNlbGVjdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRJZHM6IGFjdHVhbGx5U2VsZWN0ZWRJZHMsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1hbHJlYWR5LWluLXN5bmMtYmVmb3JlLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3ByZXNlcnZpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1vbi1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICBvbGRDb25maWdJZCxcbiAgICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgcmVmIEFGVEVSIHN5bmNpbmdcbiAgICAgIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZCwgY2xlYXJSZXN1bHQsIHJlc3VsdENvdW50LCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBwcm9wcy53aWRnZXRJZCwgb3V0cHV0RFMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlXSlcblxuICBjb25zdCBuYXZUb0Zvcm0gPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoY2xlYXJSZXN1bHRzID0gZmFsc2UpID0+IHtcbiAgICBpZiAoY2xlYXJSZXN1bHRzKSB7XG4gICAgICAvLyBVc2UgdGhlIGNlbnRyYWxpemVkIGNsZWFyUmVzdWx0IG1ldGhvZCBpbnN0ZWFkIG9mIGR1cGxpY2F0aW5nIGxvZ2ljXG4gICAgICBhd2FpdCBjbGVhclJlc3VsdCgnbmF2VG9Gb3JtLWNsZWFyUmVzdWx0cycpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgLy8gU3dpdGNoIHRvIHF1ZXJ5IHRhYiBidXQgZG9uJ3QgY2xlYXIgcmVzdWx0cyB1bmxlc3MgZXhwbGljaXRseSByZXF1ZXN0ZWRcbiAgICAvLyBNYXJrIGFzIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICB9LCAxMDApXG4gICAgLy8gT25seSBjaGFuZ2Ugc3RhZ2UgaWYgd2UncmUgY2xlYXJpbmcgcmVzdWx0c1xuICAgIC8vIE90aGVyd2lzZSwga2VlcCBzdGFnZSBhdCAxIChyZXN1bHRzIGF2YWlsYWJsZSkgc28gcmVzdWx0cyBwZXJzaXN0XG4gICAgaWYgKCFjbGVhclJlc3VsdHMgJiYgcmVzdWx0Q291bnQgPiAwKSB7XG4gICAgICBzZXRTdGFnZSgxKSAvLyBLZWVwIHJlc3VsdHMgYXZhaWxhYmxlXG4gICAgfVxuICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XG4gICAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gICAgfSlcbiAgfSwgW2NsZWFyUmVzdWx0LCByZXN1bHRDb3VudF0pXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGFiIHN3aXRjaGluZyBiZXR3ZWVuIFF1ZXJ5IGFuZCBSZXN1bHRzIHRhYnMuXG4gICAqIFRhYiBzd2l0Y2hpbmcgcHJlc2VydmVzIHJlc3VsdHMgc3RhdGUgLSByZXN1bHRzIHJlbWFpbiB2aXNpYmxlIGFuZCBzZWxlY3RlZFxuICAgKiB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHRhYnMuIFJlc3VsdHMgYXJlIG9ubHkgY2xlYXJlZCB3aGVuIGV4cGxpY2l0bHlcbiAgICogY2xpY2tpbmcgdGhlIHRyYXNoIGNhbiBidXR0b24gb3Igd2hlbiBzdGFydGluZyBhIG5ldyBxdWVyeS5cbiAgICogXG4gICAqIEBwYXJhbSB0YWIgLSBUaGUgdGFiIHRvIHN3aXRjaCB0byAoJ3F1ZXJ5JyB8ICdyZXN1bHRzJylcbiAgICogQHBhcmFtIGV2ZW50IC0gT3B0aW9uYWwgbW91c2UgZXZlbnQgdG8gcHJldmVudCBkZWZhdWx0IGJlaGF2aW9yXG4gICAqL1xuICBjb25zdCBoYW5kbGVUYWJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnLCBldmVudD86IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ3RhYi1jaGFuZ2UnLFxuICAgICAgdGFiLFxuICAgICAgY3VycmVudFRhYjogYWN0aXZlVGFiLFxuICAgICAgcmVzdWx0Q291bnQsXG4gICAgICBldmVudFR5cGU6IGV2ZW50Py50eXBlXG4gICAgfSlcbiAgICBcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgfVxuICAgIC8vIERvbid0IGFsbG93IHN3aXRjaGluZyB0byByZXN1bHRzIGlmIHRoZXJlIGFyZSBubyByZXN1bHRzXG4gICAgaWYgKHRhYiA9PT0gJ3Jlc3VsdHMnICYmIHJlc3VsdENvdW50ID09PSAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAndGFiLWNoYW5nZS1ibG9ja2VkJyxcbiAgICAgICAgcmVhc29uOiAnbm8tcmVzdWx0cycsXG4gICAgICAgIHRhYixcbiAgICAgICAgcmVzdWx0Q291bnRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gTWFyayB0aGlzIGFzIGEgbWFudWFsIHN3aXRjaCB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgc2V0QWN0aXZlVGFiKHRhYilcbiAgICBcbiAgICAvLyBSZXNldCB0aGUgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IHRoZSBzdGF0ZSB1cGRhdGUgdG8gY29tcGxldGVcbiAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbW1lZGlhdGVseSBzd2l0Y2hpbmcgYmFja1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIH0sIDEwMClcbiAgICBcbiAgICAvLyBEb24ndCBjaGFuZ2Ugc3RhZ2UgaGVyZSAtIGp1c3Qgc3dpdGNoIHRoZSB2aWV3XG4gICAgLy8gU3RhZ2Ugc2hvdWxkIHJlbWFpbiBhdCAxIChyZXN1bHRzIGF2YWlsYWJsZSkgd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiB0YWJzXG4gIH0sIFtyZXN1bHRDb3VudCwgYWN0aXZlVGFiXSlcblxuICAvKipcbiAgICogSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgaGFuZGxlRm9ybVN1Ym1pdCAod2l0aG91dCB3YWl0aW5nIGxvZ2ljKVxuICAgKiBUaGlzIGlzIGNhbGxlZCBlaXRoZXIgZGlyZWN0bHkgb3IgYWZ0ZXIgaGFzaCB2YWx1ZSBjb252ZXJzaW9uXG4gICAqIFxuICAgKiBAcGFyYW0gc3FsRXhwciAtIFRoZSBTUUwgZXhwcmVzc2lvbiBmb3IgYXR0cmlidXRlIGZpbHRlcmluZ1xuICAgKiBAcGFyYW0gc3BhdGlhbEZpbHRlciAtIFRoZSBzcGF0aWFsIGZpbHRlciBvYmplY3RcbiAgICogQHBhcmFtIHJ1bnRpbWVab29tVG9TZWxlY3RlZCAtIE9wdGlvbmFsIHJ1bnRpbWUgb3ZlcnJpZGUgZm9yIHpvb20tdG8tc2VsZWN0ZWQgYmVoYXZpb3JcbiAgICovXG4gIGNvbnN0IGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24sIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmosIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW4pID0+IHtcbiAgICAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnMgd2hlbiBzdGFydGluZyBhIG5ldyBxdWVyeVxuICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpXG4gICAgc2V0Wm9vbUVycm9yKG51bGwpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWwtZXhlY3V0aW5nJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIFN0b3JlIHRoZSBydW50aW1lIHpvb20gb3ZlcnJpZGUgZm9yIHVzZSBieSBBZGQgdG8gTWFwIGFjdGlvblxuICAgIGxhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYuY3VycmVudCA9IHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuICAgIFxuICAgIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmouY3VycmVudCA9IHNxbEV4cHJcbiAgICBzcGF0aWFsRmlsdGVyT2JqLmN1cnJlbnQgPSBzcGF0aWFsRmlsdGVyXG4gICAgLy8gTG9hZCB0aGUgZmlyc3QgcGFnZVxuICAgIGNvbnN0IGZlYXR1cmVEUyA9IG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICAvLyBGb3IgXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB1c2Ugd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAvLyBUaGVzZSBwZXJzaXN0IGFjcm9zcyBxdWVyeSBzd2l0Y2hlcywgdW5saWtlIHF1ZXJ5LWl0ZW0tbGV2ZWwgcmVjb3Jkc1xuICAgIGxldCBleGlzdGluZ1JlY29yZHNGb3JNZXJnZTogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgIC8vIFJvYnVzdCBjYXB0dXJlIHN0cmF0ZWd5OlxuICAgICAgLy8gMS4gVHJ5IHJlY29yZHMgZnJvbSBwcm9wcyAoYWxyZWFkeSBtZXJnZWQgYnkgcGFyZW50KVxuICAgICAgLy8gMi4gRmFsbGJhY2sgdG8gY3VycmVudGx5IHNlbGVjdGVkIHJlY29yZHMgaW4gRFMgKGNhcHR1cmVkIGR1cmluZyBtb2RlIHN3aXRjaClcbiAgICAgIGNvbnN0IGZyb21Qcm9wID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICBjb25zdCBmcm9tRFMgPSBvdXRwdXREUz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgXG4gICAgICAvLyBEaWFnbm9zdGljOiBDYXB0dXJlIGV4aXN0aW5nIHJlY29yZHMgZnJvbSBib3RoIHNvdXJjZXNcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2NhcHR1cmUtZXhpc3RpbmctcmVjb3Jkcy1kZXRhaWxlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtSWQ6IHByb3BzLnF1ZXJ5SXRlbT8uaWQsXG4gICAgICAgIGZyb21Qcm9wQ291bnQ6IGZyb21Qcm9wLmxlbmd0aCxcbiAgICAgICAgZnJvbVByb3BJZHM6IGZyb21Qcm9wLm1hcChyID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCA1KSxcbiAgICAgICAgZnJvbURTQ291bnQ6IGZyb21EUy5sZW5ndGgsXG4gICAgICAgIGZyb21EU0lkczogZnJvbURTLm1hcChyID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCA1KSxcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFM/LmlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBleGlzdGluZ1JlY29yZHNGb3JNZXJnZSA9IGZyb21Qcm9wLmxlbmd0aCA+IDAgPyBmcm9tUHJvcCA6IGZyb21EU1xuICAgICAgXG4gICAgICAvLyBEaWFnbm9zdGljOiBGaW5hbCBleGlzdGluZyByZWNvcmRzIHNlbGVjdGVkXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdmaW5hbC1leGlzdGluZy1yZWNvcmRzLXNlbGVjdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBmaW5hbENvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgIGZpbmFsSWRzOiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5tYXAociA9PiByLmdldElkPy4oKSkuc2xpY2UoMCwgNSksXG4gICAgICAgIHNvdXJjZTogZnJvbVByb3AubGVuZ3RoID4gMCA/ICdhY2N1bXVsYXRlZFJlY29yZHMtcHJvcCcgOiAnb3V0cHV0RFMtZ2V0U2VsZWN0ZWRSZWNvcmRzJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjYXB0dXJlZC1leGlzdGluZy1yZWNvcmRzLWRpYWdub3N0aWMnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBmcm9tUHJvcENvdW50OiBmcm9tUHJvcC5sZW5ndGgsXG4gICAgICAgIGZyb21EU0NvdW50OiBmcm9tRFMubGVuZ3RoLFxuICAgICAgICBmaW5hbENhcHR1cmVkQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgZmlyc3RSZWNvcmRJZDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2VbMF0/LmdldElkPy4oKSB8fCAnbm9uZScsXG4gICAgICAgIGFsbFJlY29yZElkczogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubWFwKHIgPT4gci5nZXRJZD8uKCkpLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgb2xkIHJlc3VsdHMgYW5kIGdyYXBoaWNzIGxheWVyXG4gICAgLy8gV2UgY2FsbCBjbGVhclJlc3VsdCgpIGRpcmVjdGx5IGFuZCBBV0FJVCBpdCB0byBlbnN1cmUgaXQncyBmaW5pc2hlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIHN0YXJ0c1xuICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWNsZWFyaW5nLXJlc3VsdHMtZm9yLW5ldy1tb2RlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBhd2FpdCBjbGVhclJlc3VsdCgnaGFuZGxlRm9ybVN1Ym1pdC1uZXctbW9kZScpXG4gICAgfVxuICAgIFxuICAgIC8vIFNldCBsb2FkaW5nIHN0YWdlXG4gICAgc2V0U3RhZ2UoMilcbiAgICBcbiAgICAvLyBGT1JDRUQ6IEFsd2F5cyB1c2UgU2ltcGxlTGlzdCAtIGZldGNoIEFMTCByZWNvcmRzLCBub3QganVzdCBhIHBhZ2VcbiAgICAvLyBVc2UgZGF0YSBzb3VyY2UncyBtYXggcmVjb3JkIGNvdW50LCBvciBmYWxsIGJhY2sgdG8gYSBsYXJnZSBudW1iZXIgKDEwMDAwKVxuICAgIGNvbnN0IG1heFJlY29yZENvdW50ID0gKGZlYXR1cmVEUyBhcyBhbnkpLmdldE1heFJlY29yZENvdW50Py4oKSA/PyAxMDAwMFxuICAgIGxldCBwYWdlU2l6ZSA9IG1heFJlY29yZENvdW50XG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSBnZW5lcmF0ZVF1ZXJ5UGFyYW1zKGZlYXR1cmVEUywgc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgY3VycmVudEl0ZW0sIDEsIHBhZ2VTaXplKVxuICAgIHF1ZXJ5UGFyYW1SZWYuY3VycmVudCA9IHF1ZXJ5UGFyYW1zXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWV4ZWN1dGluZy1xdWVyeScsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICB3aGVyZTogcXVlcnlQYXJhbXMud2hlcmUsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgLy8gQ2hhbmdlIG91dHB1dCBkcyBzdGF0dXMgdG8gdW5sb2FkZWQgYmVmb3JlIHVzZSBpdCB0byBsb2FkIGNvdW50L3JlY29yZHMuXG4gICAgZmVhdHVyZURTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLlVubG9hZGVkKVxuICAgIGZlYXR1cmVEUy5zZXRDb3VudFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLlVubG9hZGVkKVxuICAgIGxldCBxdWVyeVJlc3VsdENvdW50ID0gMCAvLyBDYXB0dXJlIGNvdW50IGZyb20gcmVjb3JkcyB0byB1c2UgaW4gZmluYWxseSBibG9ja1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdwZXJmLXF1ZXJ5LWNoYWluLXN0YXJ0JyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgd2hlcmU6IHF1ZXJ5UGFyYW1zLndoZXJlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogUmVtb3ZlZCByZWR1bmRhbnQgZXhlY3V0ZUNvdW50UXVlcnkoKSByb3VuZC10cmlwLlxuICAgIC8vIFNpbmNlIHdlIGZldGNoIEFMTCByZWNvcmRzIChwYWdlU2l6ZSA9IG1heFJlY29yZENvdW50KSwgd2UgY2FuIGp1c3QgdXNlIHJlY29yZHMubGVuZ3RoLlxuICAgIGZlYXR1cmVEUy51cGRhdGVRdWVyeVBhcmFtcyhxdWVyeVBhcmFtUmVmLmN1cnJlbnQsIHByb3BzLndpZGdldElkKVxuICAgIFxuICAgIGNvbnN0IGZldGNoU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBleGVjdXRlUXVlcnkocHJvcHMud2lkZ2V0SWQsIHF1ZXJ5SXRlbSwgZmVhdHVyZURTLCBxdWVyeVBhcmFtUmVmLmN1cnJlbnQpXG4gICAgICAudGhlbihhc3luYyAocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZldGNoRHVyYXRpb25NcyA9IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBmZXRjaFN0YXJ0VGltZSlcbiAgICAgICAgY29uc3QgcHJvY2Vzc2luZ1N0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICAgIFxuICAgICAgICBxdWVyeVJlc3VsdENvdW50ID0gcmVzdWx0LnJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3F1ZXJ5LWV4ZWN1dGlvbi1jb21wbGV0ZScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHJlY29yZHNSZXR1cm5lZDogcXVlcnlSZXN1bHRDb3VudCxcbiAgICAgICAgICBmZXRjaER1cmF0aW9uTXMsXG4gICAgICAgICAgZXhpc3RpbmdDYXB0dXJlZENvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG5cbiAgICAgICAgbGV0IHJlY29yZHNUb0Rpc3BsYXkgPSByZXN1bHQucmVjb3JkcyB8fCBbXVxuICAgICAgICBsZXQgZHNUb1VzZSA9IG91dHB1dERTXG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgXCJBZGQgdG9cIiBtb2RlOiBtZXJnZSBuZXcgcmVzdWx0cyB3aXRoIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiAmJiByZXN1bHQucmVjb3JkcyAmJiByZXN1bHQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEZJWCAocjAxOC45Nik6IE5vIG1hbnVhbCByZW1vdmFsIGZpbHRlcmluZyBuZWVkZWRcbiAgICAgICAgICAgIC8vIER1cGxpY2F0ZSBkZXRlY3Rpb24gaW4gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkIGhhbmRsZXMgcHJldmVudGluZyBkdXBsaWNhdGVzXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdhZGQtbW9kZS1zdGFydGluZy1tZXJnZScsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICBleGlzdGluZ0lkczogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubWFwKHIgPT4gci5nZXRJZD8uKCkpLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgICBuZXdSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbmV3UmVjb3JkSWRzOiByZXN1bHQucmVjb3Jkcz8uc2xpY2UoMCwgNSkubWFwKChyOiBhbnkpID0+IHIuZ2V0SWQ/LigpKSxcbiAgICAgICAgICAgICAgbm90ZTogJ3IwMTguOTY6IE5vIG1hbnVhbCByZW1vdmFsIGZpbHRlcmluZyAtIGR1cGxpY2F0ZSBkZXRlY3Rpb24gaGFuZGxlcyB0aGlzJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAvLyBNZXJnZSBuZXcgcXVlcnkgcmVzdWx0cyB3aXRoIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAvLyBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQgdXNlcyBjb21wb3NpdGUga2V5cyB0byBwcmV2ZW50IGR1cGxpY2F0ZXNcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIC8vIFVzZSBvdXRwdXREUyBmb3Iga2V5IGdlbmVyYXRpb25cbiAgICAgICAgICAgICAgcmVzdWx0LnJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UgLy8gVXNlIGNvbnNpc3RlbnRseSBjYXB0dXJlZCByZWNvcmRzXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSBtZXJnZWRSZWNvcmRzXG5cbiAgICAgICAgICAgIC8vIERJQUdOT1NUSUMgTE9HR0lORzogUmVjb3JkcyBiZWluZyBhZGRlZCB0byBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSWRzID0gZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICAgICAgY29uc3QgbmV3UmVjb3JkSWRzID0gcmVzdWx0LnJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkSWRzID0gbWVyZ2VkUmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG4gICAgICAgICAgICBjb25zdCBhZGRlZElkcyA9IG1lcmdlZElkcy5maWx0ZXIoaWQgPT4gIWV4aXN0aW5nSWRzLmluY2x1ZGVzKGlkKSlcbiAgICAgICAgICAgIGNvbnN0IGR1cGxpY2F0ZUlkcyA9IG5ld1JlY29yZElkcy5maWx0ZXIoaWQgPT4gZXhpc3RpbmdJZHMuaW5jbHVkZXMoaWQpKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdhZGQtbW9kZS1tZXJnZS1jb21wbGV0ZScsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICBleGlzdGluZ0lkczogZXhpc3RpbmdJZHMuc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgICBuZXdSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbmV3UmVjb3JkSWRzOiBuZXdSZWNvcmRJZHMuc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgICBtZXJnZWRSZWNvcmRzQ291bnQ6IG1lcmdlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBtZXJnZWRJZHM6IG1lcmdlZElkcy5zbGljZSgwLCAxMCksXG4gICAgICAgICAgICAgIGFkZGVkSWRzOiBhZGRlZElkcy5zbGljZSgwLCAxMCksXG4gICAgICAgICAgICAgIGR1cGxpY2F0ZUlkczogZHVwbGljYXRlSWRzLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgICAgICAgZHVwbGljYXRlc1NraXBwZWQ6IGR1cGxpY2F0ZUlkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHJlY29yZHNBZGRlZDogYWRkZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBub3RlOiAncjAxOC45NjogTm8gbWFudWFsIHJlbW92YWwgZmlsdGVyaW5nIC0gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkIGhhbmRsZXMgZHVwbGljYXRlcycsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzIHNvIHRoZXkgcGVyc2lzdCBhY3Jvc3MgcXVlcnkgc3dpdGNoZXNcbiAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShtZXJnZWRSZWNvcmRzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdhZGQtbW9kZS1lcnJvcicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIG5vdGU6ICdyMDE4Ljk2OiBGYWxsaW5nIGJhY2sgdG8gZXhpc3RpbmcgcmVjb3JkcyBvbiBlcnJvcicsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byBleGlzdGluZyByZWNvcmRzIG9uIGVycm9yXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICAgIC8vIEhhbmRsZSBcIlJlbW92ZSBmcm9tXCIgbW9kZTogcmVtb3ZlIG1hdGNoaW5nIHJlY29yZHMgZnJvbSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1zdGFydGluZy1tZXJnZScsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICByZW1vdmVDb3VudDogcmVzdWx0LnJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIHRvIHJlbW92ZSBmcm9tXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIHF1ZXJ5UmVjb3Jkc0NvdW50OiByZXN1bHQucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgbm90ZTogJ05vIGFjY3VtdWxhdGVkIHJlY29yZHMgdG8gcmVtb3ZlIGZyb20gLSBuby1vcCdcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLy8gTm8gYWNjdW11bGF0ZWQgcmVjb3Jkcywgc28gbm90aGluZyB0byByZW1vdmUgLSBzaG93IGVtcHR5IHJlc3VsdHNcbiAgICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IFtdXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5yZWNvcmRzICYmIHJlc3VsdC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIG1hdGNoaW5nIHJlY29yZHMgZnJvbSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1JlY29yZHMgPSByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIC8vIFVzZSBvdXRwdXREUyBmb3Iga2V5IGdlbmVyYXRpb25cbiAgICAgICAgICAgICAgICByZXN1bHQucmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlIC8vIFVzZSBjb25zaXN0ZW50bHkgY2FwdHVyZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVtYWluaW5nUmVjb3Jkc1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gVXBkYXRlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHJlbWFpbmluZ1JlY29yZHMpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEZJWCAocjAxOC44Nik6IERJQUdOT1NUSUMgLSBHcmFwaGljcyBjb3VudCBCRUZPUkUgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zXG4gICAgICAgICAgICAgIGNvbnN0IGdyYXBoaWNzQ291bnRCZWZvcmVSZW1vdmVNb2RlID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgICAgIGNvbnN0IGdyYXBoaWNzSWRzQmVmb3JlUmVtb3ZlTW9kZSA9IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzPy5tYXAoZyA9PiBnLmF0dHJpYnV0ZXM/LnJlY29yZElkKS5zbGljZSgwLCAxMCkgfHwgW11cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtQkVGT1JFLXJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucycsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZXN1bHQucmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcmVjb3Jkc1RvUmVtb3ZlSWRzOiByZXN1bHQucmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgICAgICAgICBncmFwaGljc0NvdW50QmVmb3JlOiBncmFwaGljc0NvdW50QmVmb3JlUmVtb3ZlTW9kZSxcbiAgICAgICAgICAgICAgICBncmFwaGljc0lkc0JlZm9yZTogZ3JhcGhpY3NJZHNCZWZvcmVSZW1vdmVNb2RlLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHJlY29yZHMgZnJvbSBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9ucyAobWFwIGhpZ2hsaWdodGluZylcbiAgICAgICAgICAgICAgLy8gRklYIChyMDE4Ljg2KTogRE9OJ1QgcGFzcyBncmFwaGljcyBsYXllciBwYXJhbWV0ZXJzIGhlcmUgLSBsZXQgZ3JhcGhpY3MgYmUgbWFuYWdlZCBieSBzZWxlY3Rpb24gc3luY1xuICAgICAgICAgICAgICAvLyBUaGlzIG1hdGNoZXMgdGhlIGZpeCBmb3IgWCBidXR0b24gcmVtb3ZhbCAocjAxOC44NSlcbiAgICAgICAgICAgICAgLy8gR3JhcGhpY3Mgd2lsbCBiZSBzeW5jZWQgdGhyb3VnaCB0aGUgbm9ybWFsIHNlbGVjdGlvbiBmbG93IGFmdGVyIHRoaXMgb3BlcmF0aW9uXG4gICAgICAgICAgICAgIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyhcbiAgICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICByZXN1bHQucmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgICAgICAgICAgICAvLyBOT1QgcGFzc2luZyB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IG9yIGdyYXBoaWNzTGF5ZXJcbiAgICAgICAgICAgICAgICAvLyBHcmFwaGljcyB3aWxsIGJlIHN5bmNlZCB0aHJvdWdoIG5vcm1hbCBzZWxlY3Rpb24gZmxvd1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBGSVggKHIwMTguMTA0KTogTWFudWFsbHkgcmVtb3ZlIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXJcbiAgICAgICAgICAgICAgLy8gU2ltaWxhciB0byBYIGJ1dHRvbiByZW1vdmFsIGZpeCAocjAxOC45MCksIHdlIG5lZWQgdG8gZXhwbGljaXRseSByZW1vdmUgZ3JhcGhpY3NcbiAgICAgICAgICAgICAgLy8gc2luY2UgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zIGRvZXNuJ3QgcmVjZWl2ZSBncmFwaGljcyBsYXllciBwYXJhbXNcbiAgICAgICAgICAgICAgaWYgKHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgJiYgZ3JhcGhpY3NMYXllciAmJiByZXN1bHQucmVjb3JkcyAmJiByZXN1bHQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlZFJlY29yZElkcyA9IHJlc3VsdC5yZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgICAgICByZW1vdmVIaWdobGlnaHRHcmFwaGljcyhncmFwaGljc0xheWVyLCByZW1vdmVkUmVjb3JkSWRzKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1tYW51YWwtZ3JhcGhpY3MtcmVtb3ZhbCcsXG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICBncmFwaGljc0NvdW50QmVmb3JlOiBncmFwaGljc0NvdW50QmVmb3JlUmVtb3ZlTW9kZSxcbiAgICAgICAgICAgICAgICAgIGdyYXBoaWNzQ291bnRBZnRlcjogZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZHM6IHJlbW92ZWRSZWNvcmRJZHMuc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRklYIChyMDE4Ljg2KTogRElBR05PU1RJQyAtIEdyYXBoaWNzIGNvdW50IEFGVEVSIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgICAgICAgICAgICBjb25zdCBncmFwaGljc0NvdW50QWZ0ZXJSZW1vdmVNb2RlID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgICAgIGNvbnN0IGdyYXBoaWNzSWRzQWZ0ZXJSZW1vdmVNb2RlID0gZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/Lm1hcChnID0+IGcuYXR0cmlidXRlcz8ucmVjb3JkSWQpLnNsaWNlKDAsIDEwKSB8fCBbXVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1BRlRFUi1yZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBncmFwaGljc0NvdW50QmVmb3JlOiBncmFwaGljc0NvdW50QmVmb3JlUmVtb3ZlTW9kZSxcbiAgICAgICAgICAgICAgICBncmFwaGljc0NvdW50QWZ0ZXI6IGdyYXBoaWNzQ291bnRBZnRlclJlbW92ZU1vZGUsXG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NJZHNBZnRlcjogZ3JhcGhpY3NJZHNBZnRlclJlbW92ZU1vZGUsXG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NDaGFuZ2VkOiBncmFwaGljc0NvdW50QWZ0ZXJSZW1vdmVNb2RlICE9PSBncmFwaGljc0NvdW50QmVmb3JlUmVtb3ZlTW9kZSxcbiAgICAgICAgICAgICAgICBncmFwaGljc0NoYW5nZWRCeTogZ3JhcGhpY3NDb3VudEFmdGVyUmVtb3ZlTW9kZSAtIGdyYXBoaWNzQ291bnRCZWZvcmVSZW1vdmVNb2RlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiAnR3JhcGhpY3MgU0hPVUxEIE5PVyBiZSByZW1vdmVkIChyMDE4LjEwNCBmaXgpJyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtY29tcGxldGUnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcXVlcnlSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHJlY29yZHNSZW1vdmVkOiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGggLSByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgICAgICB3aWRnZXRMZXZlbFJlY29yZHNVcGRhdGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG9yaWdpblNlbGVjdGlvbnNVcGRhdGVkOiB0cnVlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBJZiBhbGwgcmVjb3JkcyByZW1vdmVkLCBhdXRvLWNsZWFyIChjb25zaXN0ZW50IHdpdGggdXNlciBleHBlY3RhdGlvbilcbiAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWFsbC1yZWNvcmRzLXJlbW92ZWQnLFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgbm90ZTogJ0FsbCBhY2N1bXVsYXRlZCByZWNvcmRzIHJlbW92ZWQgLSBhdXRvLWNsZWFyaW5nJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUXVlcnkgcmV0dXJuZWQgbm8gcmVzdWx0cyAtIG5vdGhpbmcgdG8gcmVtb3ZlXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtbm8tcXVlcnktcmVzdWx0cycsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBub3RlOiAnUXVlcnkgcmV0dXJuZWQgbm8gcmVzdWx0cyAtIG5vIHJlY29yZHMgdG8gcmVtb3ZlJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAvLyBLZWVwIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgZGlzcGxheWVkXG4gICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSBleGlzdGluZ1JlY29yZHNGb3JNZXJnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1lcnJvcicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gc2hvd2luZyBxdWVyeSByZXN1bHRzIG9uIGVycm9yXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVzdWx0LnJlY29yZHMgfHwgW11cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgLy8gRklYIChyMDE4Ljk3KTogRm9yIFwiTmV3XCIgbW9kZSwgcG9wdWxhdGUgYWNjdW11bGF0ZWRSZWNvcmRzIHdpdGggcXVlcnkgcmVzdWx0c1xuICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0YWIgY291bnQgdXBkYXRlcyBjb3JyZWN0bHkgd2hlbiByZWNvcmRzIGFyZSByZW1vdmVkIGluIE5ldyBtb2RlXG4gICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlICYmIHJlY29yZHNUb0Rpc3BsYXkgJiYgcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShyZWNvcmRzVG9EaXNwbGF5IGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICduZXctbW9kZS1wb3B1bGF0aW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGgsXG4gICAgICAgICAgICAgIG5vdGU6ICdyMDE4Ljk3OiBQb3B1bGF0ZSBhY2N1bXVsYXRlZFJlY29yZHMgaW4gTmV3IG1vZGUgZm9yIHVuaXZlcnNhbCB0YWIgY291bnQnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgLy8gTm8gcmVzdWx0cyAtIGNsZWFyIGFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoW10pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSByZWNvcmRzVG9EaXNwbGF5XG4gICAgICAgIC8vIFJlc2V0IHNlbGVjdGlvbiBmbGFnIGZvciBuZXcgcXVlcnkgcmVzdWx0c1xuICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICAgIFxuICAgICAgICAvLyBTZWxlY3QgcmVjb3JkcyBpbiB0aGUgb3V0cHV0IERTXG4gICAgICAgIC8vIEZvciBcIkFkZCB0b1wiIG1vZGUsIHNlbGVjdCBtZXJnZWQgcmVjb3Jkc1xuICAgICAgICAvLyBGb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUsIHNlbGVjdCByZW1haW5pbmcgcmVjb3JkcyAoYWxyZWFkeSB1cGRhdGVkIHZpYSByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMpXG4gICAgICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIHNlbGVjdCBxdWVyeSByZXN1bHRzXG4gICAgICAgIGlmIChyZWNvcmRzVG9EaXNwbGF5ICYmIHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoID4gMCAmJiBkc1RvVXNlKSB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkSWRzVG9TZWxlY3QgPSByZWNvcmRzVG9EaXNwbGF5Lm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRm9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCBzZWxlY3Rpb24gd2FzIGFscmVhZHkgdXBkYXRlZCB2aWEgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zXG4gICAgICAgICAgLy8gQnV0IHdlIHN0aWxsIG5lZWQgdG8gc2VsZWN0IGluIHRoZSBvdXRwdXREUyBmb3Igd2lkZ2V0IHN0YXRlIGNvbnNpc3RlbmN5XG4gICAgICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFNlbGVjdGlvbiB3YXMgYWxyZWFkeSB1cGRhdGVkIGluIG9yaWdpbiBEU3MgdmlhIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgICAgICAgICAgLy8gSnVzdCB1cGRhdGUgb3V0cHV0RFMgc2VsZWN0aW9uIGZvciB3aWRnZXQgc3RhdGUgY29uc2lzdGVuY3lcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZHNUb1VzZS5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBkc1RvVXNlLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHNUb1NlbGVjdCwgcmVjb3Jkc1RvRGlzcGxheSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLW91dHB1dC1kcy1zZWxlY3Rpb24tdXBkYXRlZCcsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1vdXRwdXQtZHMtc2VsZWN0aW9uLWVycm9yJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBcIkFkZCB0b1wiIGFuZCBcIk5ld1wiIG1vZGVzLCBzZWxlY3QgcmVjb3JkcyBub3JtYWxseVxuICAgICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzXG4gICAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChcbiAgICAgICAgICAgICAgICAgIHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgZHNUb1VzZSxcbiAgICAgICAgICAgICAgICAgIHJlY29yZElkc1RvU2VsZWN0LFxuICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcixcbiAgICAgICAgICAgICAgICAgIG1hcFZpZXdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSB0cnVlIC8vIE1hcmsgYXMgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBEaXNwYXRjaCBjdXN0b20gc2VsZWN0aW9uIGV2ZW50IHNvIFdpZGdldCBzdGF0ZSBpcyB1cGRhdGVkIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBjcnVjaWFsIGZvciBoYXNoLWJhc2VkIGV4ZWN1dGlvbiB3aGVyZSBRdWVyeVRhc2sgaGFuZGxlcyBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50KHByb3BzLndpZGdldElkLCByZWNvcmRJZHNUb1NlbGVjdCwgZHNUb1VzZSwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBldmVudE1hbmFnZXIpXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQnLFxuICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRJZHNUb1NlbGVjdC5sZW5ndGhcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSgpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24gJiYgcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAvLyBBbGwgcmVjb3JkcyByZW1vdmVkIC0gY2xlYXIgc2VsZWN0aW9uXG4gICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMocHJvcHMud2lkZ2V0SWQsIGRzVG9Vc2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIpXG4gICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIE5vdGlmeSBXaWRnZXQgdGhhdCBzZWxlY3Rpb24gaXMgY2xlYXJlZFxuICAgICAgICAgICAgICBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50KHByb3BzLndpZGdldElkLCBbXSwgZHNUb1VzZSwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBldmVudE1hbmFnZXIpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWFsbC1yZWNvcmRzLXJlbW92ZWQtc2VsZWN0aW9uLWNsZWFyZWQnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1jbGVhci1zZWxlY3Rpb24tZXJyb3InLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSgpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1hcmsgdGhhdCBxdWVyeSBqdXN0IGV4ZWN1dGVkIEJFRk9SRSB1cGRhdGluZyByZXN1bHRDb3VudFxuICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBzZWVzIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgPT09IHRydWVcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAncXVlcnktZXhlY3V0ZWQtZmxhZy1zZXQnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXlDb3VudDogcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGgsXG4gICAgICAgICAgcXVlcnlSZXN1bHRDb3VudCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSByZXN1bHQgY291bnQgRklSU1QgKGJlZm9yZSBhbnkgcGFyZW50IGNhbGxiYWNrcyB0aGF0IG1pZ2h0IGNhdXNlIHJlLXJlbmRlcnMpXG4gICAgICAgIC8vIEZvciBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHVzZSBhY2N1bXVsYXRlZC9yZW1haW5pbmcgY291bnRcbiAgICAgICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgdXNlIHF1ZXJ5IGNvdW50XG4gICAgICAgIGNvbnN0IG5ld1Jlc3VsdENvdW50ID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgICAgID8gcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGhcbiAgICAgICAgICA6IHF1ZXJ5UmVzdWx0Q291bnRcbiAgICAgICAgXG4gICAgICAgIHNldFJlc3VsdENvdW50KG5ld1Jlc3VsdENvdW50KVxuICAgICAgICBcbiAgICAgICAgLy8gSU5TVEFOVCBVSSBGSVggKFRoZSBcIlNwaW5uZXIgQnlwYXNzXCIpOiBcbiAgICAgICAgLy8gRGVjb3VwbGUgdGhlIFwiUmV0cmlldmluZyByZXN1bHRzLi4uXCIgc3Bpbm5lciBmcm9tIGFzeW5jaHJvbm91cyBhY3Rpb25zIGxpa2Ugem9vbWluZy4gXG4gICAgICAgIC8vIEJ5IGNhbGxpbmcgc2V0U3RhZ2UoMSkgbm93LCB0aGUgdXNlciBzZWVzIHRoZSByZXN1bHQgbGlzdCBpbW1lZGlhdGVseSB3aGlsZSBcbiAgICAgICAgLy8gdGhlIG1hcCBhbmltYXRpb24gY29udGludWVzIGluIHRoZSBiYWNrZ3JvdW5kLlxuICAgICAgICBzZXRTdGFnZSgxKSBcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3BlcmYtcHJvY2Vzc2luZy1jb21wbGV0ZScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHByb2Nlc3NpbmdEdXJhdGlvbk1zOiBNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvY2Vzc2luZ1N0YXJ0VGltZSksXG4gICAgICAgICAgdG90YWxDaGFpbkR1cmF0aW9uTXM6IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUpLFxuICAgICAgICAgIG5ld1Jlc3VsdENvdW50LFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIFpvb20gdG8gcmVjb3JkcyB1c2luZyBzaGFyZWQgem9vbSB1dGlsaXR5IChjb25zaXN0ZW50IHBhZGRpbmcgYmVoYXZpb3IpXG4gICAgICAgIC8vIFVzZSBydW50aW1lIHByZWZlcmVuY2UgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gY29uZmlnIHNldHRpbmcgKGRlZmF1bHRzIHRvIHRydWUpXG4gICAgICAgIGNvbnN0IHNob3VsZFpvb20gPSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCBcbiAgICAgICAgICA/IHJ1bnRpbWVab29tVG9TZWxlY3RlZCBcbiAgICAgICAgICA6IChxdWVyeUl0ZW0uem9vbVRvU2VsZWN0ZWQgIT09IGZhbHNlKVxuICAgICAgICBcbiAgICAgICAgLy8gVXNlIHRoZSBvdXRwdXQgRFMgYW5kIG1lcmdlZCByZWNvcmRzXG4gICAgICAgIGNvbnN0IHJlY29yZHNGb3Jab29tID0gcmVjb3Jkc1RvRGlzcGxheSB8fCByZXN1bHQucmVjb3Jkc1xuICAgICAgICBjb25zdCBkc0Zvclpvb20gPSBkc1RvVXNlIHx8IG91dHB1dERTXG4gICAgICAgIFxuICAgICAgICBpZiAocmVjb3Jkc0Zvclpvb20gJiYgcmVjb3Jkc0Zvclpvb20ubGVuZ3RoID4gMCAmJiBkc0Zvclpvb20gJiYgc2hvdWxkWm9vbSkge1xuICAgICAgICAgIC8vIEJVRy1HUkFQSElDUy0wMDE6IFpvb20gb3BlcmF0aW9ucyBmYWlsIHdoZW4gZ3JhcGhpY3MgbGF5ZXIgaXMgZGlzYWJsZWRcbiAgICAgICAgICBpZiAoIW1hcFZpZXcgJiYgIXVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQlVHJywge1xuICAgICAgICAgICAgICBidWdJZDogJ0JVRy1HUkFQSElDUy0wMDEnLFxuICAgICAgICAgICAgICBjYXRlZ29yeTogJ0dSQVBISUNTJyxcbiAgICAgICAgICAgICAgZXZlbnQ6ICd6b29tLW9wZXJhdGlvbi1mYWlsZWQtZ3JhcGhpY3MtbGF5ZXItZGlzYWJsZWQnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3F1ZXJ5LXJlc3VsdC16b29tJyxcbiAgICAgICAgICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzRm9yWm9vbS5sZW5ndGgsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnWm9vbSBvcGVyYXRpb24gYXR0ZW1wdGVkIGJ1dCBtYXBWaWV3IGlzIHVuYXZhaWxhYmxlIGJlY2F1c2UgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBpcyBkaXNhYmxlZCcsXG4gICAgICAgICAgICAgIHdvcmthcm91bmQ6ICdFbmFibGUgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBpbiB3aWRnZXQgc2V0dGluZ3MnLFxuICAgICAgICAgICAgICB0YXJnZXRSZXNvbHV0aW9uOiAncjAxOS4wJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHpvb21Ub1JlY29yZHMocmVjb3Jkc0Zvclpvb20gYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHpvb20gdG8gZmVhdHVyZXMnXG4gICAgICAgICAgICBzZXRab29tRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdaT09NJywge1xuICAgICAgICAgICAgICBldmVudDogJ3pvb20tZ29Uby1lcnJvci1xdWVyeScsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleGVjdXRpbmcgem9vbVRvUmVjb3JkcycsIGVycm9yKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTk9XIGNhbGwgb25IYXNoUGFyYW1ldGVyVXNlZCBBRlRFUiBhbGwgVUkgdXBkYXRlcyBhbmQgem9vbSBvcGVyYXRpb25zIGNvbXBsZXRlXG4gICAgICAgIC8vIFRoaXMgcHJldmVudHMgdGhlIHBhcmVudCByZS1yZW5kZXIgZnJvbSBpbnRlcnJ1cHRpbmcgdGhlIHByb21pc2UgY2hhaW5cbiAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyBoYXNoIHBhcmFtZXRlcnMgZnJvbSByZS1leGVjdXRpbmcgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgICAgICBpZiAoaW5pdGlhbElucHV0VmFsdWUgJiYgcXVlcnlJdGVtLnNob3J0SWQgJiYgb25IYXNoUGFyYW1ldGVyVXNlZCkge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXRhc2stY2FsbGluZy1vbmhhc2hwYXJhbWV0ZXJ1c2VkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBwcm9wcy5xdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBxdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhc2gtcXVlcnktZXhlY3V0ZWQtbm90aWZ5aW5nLXBhcmVudCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogcXVlcnlJdGVtLnNob3J0SWQsXG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZChxdWVyeUl0ZW0uc2hvcnRJZClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncXVlcnl0YXNrLW9uaGFzaHBhcmFtZXRlcnVzZWQtY2FsbGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBwcm9wcy5xdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBxdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmlyZSBldmVudCB0byBub3RpZnkgSGVscGVyU2ltcGxlIHRoYXQgaGFzaCBxdWVyeSBleGVjdXRpb24gaXMgY29tcGxldGVcbiAgICAgICAgICAvLyBUaGlzIGFsbG93cyBIZWxwZXJTaW1wbGUgdG8gdHJhY2sgd2hpY2ggaGFzaCBwYXJhbWV0ZXJzIGhhdmUgYmVlbiBleGVjdXRlZFxuICAgICAgICAgIC8vIHRvIHByZXZlbnQgcmUtZXhlY3V0aW9uIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgICAgICAgICBjb25zdCBoYXNoUGFyYW0gPSBgJHtxdWVyeUl0ZW0uc2hvcnRJZH09JHtpbml0aWFsSW5wdXRWYWx1ZX1gXG4gICAgICAgICAgY29uc3QgZXhlY3V0ZWRFdmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9IQVNIX1FVRVJZX0VYRUNVVEVEX0VWRU5ULCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBzaG9ydElkOiBxdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICAgICAgdmFsdWU6IGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICBoYXNoUGFyYW1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXhlY3V0ZWRFdmVudClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncXVlcnl0YXNrLWhhc2gtcXVlcnktZXhlY3V0ZWQtZXZlbnQtZGlzcGF0Y2hlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogcXVlcnlJdGVtLnNob3J0SWQsXG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgIGhhc2hQYXJhbSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSlcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdxdWVyeS1jaGFpbi1mYWlsZWQtZGlhZ25vc3RpYycsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBzZXRTdGFnZSgxKSAvLyBSZXR1cm4gdG8gcmVzdWx0cyBvciBmb3JtIHN0YWdlIGV2ZW4gb24gZXJyb3JcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGlmIChzcGF0aWFsRmlsdGVyPy5sYXllciAmJiBzcGF0aWFsRmlsdGVyPy5jbGVhckFmdGVyQXBwbHkpIHtcbiAgICAgICAgICBzcGF0aWFsRmlsdGVyLmxheWVyLnJlbW92ZUFsbCgpXG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0U3RhZ2UoMSkgLy8gUmVtb3ZlZCBmcm9tIGhlcmU7IG5vdyBjYWxsZWQgaW4gdGhlIG1haW4gY2hhaW4gYmVmb3JlIGJhY2tncm91bmQgYWN0aW9uc1xuICAgICAgfSlcbiAgfSwgW2N1cnJlbnRJdGVtLCBxdWVyeUl0ZW0sIHByb3BzLndpZGdldElkLCBvdXRwdXREUywgcHVibGlzaERhdGFDbGVhcmVkTXNnLCBjbGVhclJlc3VsdCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIG9uQ2xlYXJHcmFwaGljc0xheWVyLCBtYXBWaWV3LCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCB6b29tVG9SZWNvcmRzXSlcblxuICAvLyBMaXN0ZW4gZm9yIGhhc2ggdmFsdWUgY29udmVyc2lvbiBldmVudCBhbmQgZXhlY3V0ZSBwZW5kaW5nIHF1ZXJ5XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlSGFzaFZhbHVlQ29udmVydGVkID0gKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtY29udmVydGVkLWV2ZW50LXJlY2VpdmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBldmVudFdpZGdldElkOiBldmVudC5kZXRhaWw/LndpZGdldElkLFxuICAgICAgICBldmVudENvbmZpZ0lkOiBldmVudC5kZXRhaWw/LmNvbmZpZ0lkLFxuICAgICAgICBtYXRjaGVzV2lkZ2V0OiBldmVudC5kZXRhaWw/LndpZGdldElkID09PSBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgaGFzUGVuZGluZ1F1ZXJ5OiAhIXBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBPbmx5IHByb2Nlc3MgZXZlbnRzIGZvciB0aGlzIHdpZGdldFxuICAgICAgaWYgKGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQgIT09IHByb3BzLndpZGdldElkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtY29udmVydGVkLWV2ZW50LWlnbm9yZWQtd3Jvbmctd2lkZ2V0JyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgZXZlbnRXaWRnZXRJZDogZXZlbnQuZGV0YWlsPy53aWRnZXRJZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXhlY3V0aW5nLXBlbmRpbmctcXVlcnknLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBjb25maWdJZDogZXZlbnQuZGV0YWlsLmNvbmZpZ0lkLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBldmVudC5kZXRhaWwuaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBjb25zdCB7IHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIHJ1bnRpbWVab29tVG9TZWxlY3RlZCB9ID0gcGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50XG4gICAgICAgIHBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudCA9IG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIHBlbmRpbmcgcXVlcnkgbm93IHRoYXQgdmFsdWUgaXMgY29udmVydGVkXG4gICAgICAgIC8vIFVzZSBzZXRUaW1lb3V0IHRvIGVuc3VyZSB0aGlzIGhhcHBlbnMgYWZ0ZXIgdGhlIGN1cnJlbnQgZXZlbnQgbG9vcFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWwoc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgcnVudGltZVpvb21Ub1NlbGVjdGVkKVxuICAgICAgICB9LCAwKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ29udmVyc2lvbiBoYXBwZW5lZCBiZWZvcmUgaGFuZGxlRm9ybVN1Ym1pdCB3YXMgY2FsbGVkXG4gICAgICAgIC8vIGFwcGx5UXVlcnkoKSBpcyBjYWxsZWQgZGlyZWN0bHkgZnJvbSBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGluIHF1ZXJ5LXRhc2stZm9ybS50c3hcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXZlbnQtcmVjZWl2ZWQtbm8tcGVuZGluZy1xdWVyeScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIGNvbmZpZ0lkOiBldmVudC5kZXRhaWw/LmNvbmZpZ0lkLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBldmVudC5kZXRhaWw/LmluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIG5vdGU6ICdDb252ZXJzaW9uIGhhcHBlbmVkIGJlZm9yZSBoYW5kbGVGb3JtU3VibWl0IC0gYXBwbHlRdWVyeSgpIGNhbGxlZCBkaXJlY3RseSBmcm9tIGZvcm0gY29tcG9uZW50JyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCwgaGFuZGxlSGFzaFZhbHVlQ29udmVydGVkIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlQsIGhhbmRsZUhhc2hWYWx1ZUNvbnZlcnRlZCBhcyBFdmVudExpc3RlbmVyKVxuICAgIH1cbiAgfSwgW3Byb3BzLndpZGdldElkLCBoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWxdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGZvcm0gc3VibWlzc2lvbiB3aGVuIHVzZXIgY2xpY2tzIFwiQXBwbHlcIiBidXR0b24uXG4gICAqIENoZWNrcyBpZiBoYXNoIHZhbHVlIG5lZWRzIGNvbnZlcnNpb24gYW5kIHdhaXRzIGZvciBldmVudCBpZiBuZWVkZWQuXG4gICAqIFxuICAgKiBAcGFyYW0gc3FsRXhwciAtIFRoZSBTUUwgZXhwcmVzc2lvbiBmb3IgYXR0cmlidXRlIGZpbHRlcmluZ1xuICAgKiBAcGFyYW0gc3BhdGlhbEZpbHRlciAtIFRoZSBzcGF0aWFsIGZpbHRlciBvYmplY3RcbiAgICogQHBhcmFtIHJ1bnRpbWVab29tVG9TZWxlY3RlZCAtIE9wdGlvbmFsIHJ1bnRpbWUgb3ZlcnJpZGUgZm9yIHpvb20tdG8tc2VsZWN0ZWQgYmVoYXZpb3JcbiAgICovXG4gIGNvbnN0IGhhbmRsZUZvcm1TdWJtaXQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uLCBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB7XG4gICAgLy8gTE9HIEFUIFRIRSBWRVJZIFNUQVJUIC0gYmVmb3JlIGFueSBjaGVja3NcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXQtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHNxbEV4cHJFeGlzdHM6ICEhc3FsRXhwcixcbiAgICAgIGZpcnN0UGFydEV4aXN0czogISFzcWxFeHByPy5wYXJ0cz8uWzBdLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgaGFzaC10cmlnZ2VyZWQgcXVlcnkgd2l0aCB1bmNvbnZlcnRlZCB2YWx1ZSAoc3RyaW5nIGZvcm1hdClcbiAgICBjb25zdCBmaXJzdFBhcnQgPSBzcWxFeHByPy5wYXJ0cz8uWzBdXG4gICAgY29uc3QgdmFsdWUgPSBmaXJzdFBhcnQ/LnR5cGUgPT09ICdTSU5HTEUnID8gKGZpcnN0UGFydCBhcyBhbnkpLnZhbHVlT3B0aW9ucz8udmFsdWUgOiBudWxsXG4gICAgY29uc3QgaXNTdHJpbmdWYWx1ZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubGVuZ3RoID4gMFxuICAgIGNvbnN0IGlzQXJyYXlWYWx1ZSA9IEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA+IDBcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXQtY2hlY2tpbmctY29udmVyc2lvbicsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIHZhbHVlVHlwZTogdHlwZW9mIHZhbHVlLFxuICAgICAgaXNTdHJpbmdWYWx1ZSxcbiAgICAgIGlzQXJyYXlWYWx1ZSxcbiAgICAgIHZhbHVlOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogdmFsdWUsXG4gICAgICB3aWxsQ2hlY2tXYWl0Q29uZGl0aW9uOiBpc1N0cmluZ1ZhbHVlICYmICFpc0FycmF5VmFsdWUgJiYgaW5pdGlhbElucHV0VmFsdWUgJiYgdmFsdWUgPT09IGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiB2YWx1ZSBpcyBzdHJpbmcgKG5vdCBjb252ZXJ0ZWQgdG8gYXJyYXkgeWV0KSwgd2FpdCBmb3IgY29udmVyc2lvbiBldmVudFxuICAgIC8vIFRoaXMgaGFwcGVucyB3aGVuIGhhc2ggdmFsdWUgY2hhbmdlcyBmb3Igc2FtZSBjb25maWdJZFxuICAgIGlmIChpc1N0cmluZ1ZhbHVlICYmICFpc0FycmF5VmFsdWUgJiYgaW5pdGlhbElucHV0VmFsdWUgJiYgdmFsdWUgPT09IGluaXRpYWxJbnB1dFZhbHVlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC13YWl0aW5nLWZvci1jb252ZXJzaW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBjdXJyZW50VmFsdWU6IHZhbHVlLFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBTdG9yZSBwZW5kaW5nIHF1ZXJ5XG4gICAgICBwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnQgPSB7XG4gICAgICAgIHNxbEV4cHIsXG4gICAgICAgIHNwYXRpYWxGaWx0ZXIsXG4gICAgICAgIHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTZXQgYSB0aW1lb3V0IHRvIHByZXZlbnQgaW5maW5pdGUgd2FpdGluZyAoZmFsbGJhY2sgYWZ0ZXIgMiBzZWNvbmRzKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXQtY29udmVyc2lvbi10aW1lb3V0LWV4ZWN1dGluZy1hbnl3YXknLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCB7IHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIHJ1bnRpbWVab29tVG9TZWxlY3RlZCB9ID0gcGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50XG4gICAgICAgICAgcGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEV4ZWN1dGUgYW55d2F5IChmYWxsYmFjaylcbiAgICAgICAgICBoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWwoc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgcnVudGltZVpvb21Ub1NlbGVjdGVkKVxuICAgICAgICB9XG4gICAgICB9LCAyMDAwKVxuICAgICAgXG4gICAgICByZXR1cm4gLy8gRXhpdCBlYXJseSwgd2lsbCBleGVjdXRlIHdoZW4gZXZlbnQgZmlyZXNcbiAgICB9XG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWV4ZWN1dGluZy1pbW1lZGlhdGVseScsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICByZWFzb246IGlzU3RyaW5nVmFsdWUgPyAnbm90LWhhc2gtdHJpZ2dlcmVkJyA6IChpc0FycmF5VmFsdWUgPyAnYWxyZWFkeS1jb252ZXJ0ZWQnIDogJ25vLXZhbHVlJyksXG4gICAgICB2YWx1ZVR5cGU6IHR5cGVvZiB2YWx1ZSxcbiAgICAgIGlzU3RyaW5nVmFsdWUsXG4gICAgICBpc0FycmF5VmFsdWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFZhbHVlIGlzIGFscmVhZHkgY29udmVydGVkIG9yIG5vdCBoYXNoLXRyaWdnZXJlZCwgZXhlY3V0ZSBpbW1lZGlhdGVseVxuICAgIGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbChzcWxFeHByLCBzcGF0aWFsRmlsdGVyLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXG4gIH0sIFtwcm9wcy53aWRnZXRJZCwgaW5pdGlhbElucHV0VmFsdWUsIGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbF0pXG5cbiAgY29uc3QgeyB1c2VBdHRyaWJ1dGVGaWx0ZXIsIHNxbEV4cHJPYmosIHVzZVNwYXRpYWxGaWx0ZXIsIHNwYXRpYWxGaWx0ZXJUeXBlcywgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSwgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXN9ID0gY3VycmVudEl0ZW1cbiAgY29uc3Qgc2hvd0F0dHJpYnV0ZUZpbHRlciA9IHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByT2JqICE9IG51bGxcbiAgY29uc3Qgc2hvd1NwYXRpYWxGaWx0ZXIgPSBzcGF0aWFsRmlsdGVyRW5hYmxlZCAmJiB1c2VTcGF0aWFsRmlsdGVyICYmIChzcGF0aWFsRmlsdGVyVHlwZXMubGVuZ3RoID4gMCB8fCBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhIHx8IHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwKVxuXG4gIC8vIERFVEVDVCBTV0lUQ0ggSU4gUkVOREVSXG4gIGNvbnN0IGlzU3dpdGNoaW5nUXVlcmllcyA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCAhPT0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gIGNvbnN0IGlzVmlydHVhbENsZWFyQWN0aXZlID0gaXNTd2l0Y2hpbmdRdWVyaWVzICYmIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICBcbiAgLy8gRklYIChyMDE4Ljk3KTogVXNlIGFjY3VtdWxhdGVkUmVjb3JkcyBhcyB1bml2ZXJzYWwgc291cmNlIG9mIHRydXRoIGFjcm9zcyBBTEwgbW9kZXNcbiAgLy8gVGhpcyBlbnN1cmVzIHRhYiBjb3VudCB1cGRhdGVzIGNvcnJlY3RseSB3aGVuIHJlY29yZHMgYXJlIHJlbW92ZWQgaW4gQU5ZIG1vZGUgKE5ldywgQWRkLCBSZW1vdmUpXG4gIC8vIGFjY3VtdWxhdGVkUmVjb3JkcyBpcyBub3cgc3luY2VkIGluIGFsbCBtb2RlcyAoc2VlIHF1ZXJ5LXJlc3VsdC50c3ggcjAxOC45NyBmaXgpXG4gIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gIFxuICAvLyBVc2UgdGhlc2UgXCJlZmZlY3RpdmVcIiB2YWx1ZXMgZm9yIHRoZSBVSVxuICAvLyBQcmVmZXIgYWNjdW11bGF0ZWRSZWNvcmRzIHdoZW4gYXZhaWxhYmxlIChzeW5jZWQgaW4gYWxsIG1vZGVzKSwgZmFsbGJhY2sgdG8gcmVjb3Jkc1JlZiBmb3IgaW5pdGlhbCBxdWVyeSByZXN1bHRzXG4gIGNvbnN0IGVmZmVjdGl2ZVJlY29yZHMgPSBpc1ZpcnR1YWxDbGVhckFjdGl2ZSA/IFtdIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApID8gYWNjdW11bGF0ZWRSZWNvcmRzIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlY29yZHNSZWYuY3VycmVudCB8fCBbXSlcbiAgXG4gIC8vIEZJWCAocjAxOC45NSk6IFVzZSBlZmZlY3RpdmVSZWNvcmRzLmxlbmd0aCB0byByZWZsZWN0IHJlYWwtdGltZSBjb3VudCB1cGRhdGVzIHdoZW4gcmVjb3JkcyBhcmUgcmVtb3ZlZFxuICBjb25zdCBlZmZlY3RpdmVSZXN1bHRDb3VudCA9IGlzVmlydHVhbENsZWFyQWN0aXZlID8gMCA6IGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoXG4gIFxuICAvLyBESUFHTk9TVElDOiBMb2cgd2hlbiB3ZSdyZSB1c2luZyBhY2N1bXVsYXRlZFJlY29yZHMgdnMgcmF3IHJlY29yZHNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwIHx8IGVmZmVjdGl2ZVJlc3VsdENvdW50ID4gMCkge1xuICAgICAgY29uc3QgdXNpbmdBY2N1bXVsYXRlZCA9IGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnZWZmZWN0aXZlUmVjb3Jkcy1jYWxjdWxhdGlvbicsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgdXNpbmdBY2N1bXVsYXRlZCxcbiAgICAgICAgZWZmZWN0aXZlUmVjb3Jkc0NvdW50OiBlZmZlY3RpdmVSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgZWZmZWN0aXZlUmVzdWx0Q291bnQsXG4gICAgICAgIHJhd1JlY29yZHNDb3VudDogcmVjb3Jkc1JlZi5jdXJyZW50Py5sZW5ndGggfHwgMCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHRhYkNvdW50V2lsbFNob3c6IGVmZmVjdGl2ZVJlc3VsdENvdW50LFxuICAgICAgICBub3RlOiB1c2luZ0FjY3VtdWxhdGVkID8gJ3IwMTguOTc6IFVzaW5nIGFjY3VtdWxhdGVkUmVjb3JkcyAodW5pdmVyc2FsIHNvdXJjZSBvZiB0cnV0aCknIDogJ1VzaW5nIHJhdyBxdWVyeSByZWNvcmRzIChpbml0aWFsIGxvYWQpJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2VmZmVjdGl2ZVJlY29yZHMsIGVmZmVjdGl2ZVJlc3VsdENvdW50LCBpc0FjY3VtdWxhdGlvbk1vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcmVzdWx0c01vZGUsIHByb3BzLndpZGdldElkXSlcblxuICAvLyBDcmVhdGUgYSB1bmlxdWUga2V5IGZvciB0aGUgY3VycmVudCBxdWVyeSByZXN1bHQgc2V0IHRvIGhlbHAgRTJFIHRlc3RzIGRldGVjdCBmcmVzaCBkYXRhXG4gIGNvbnN0IHJlc3VsdFF1ZXJ5S2V5ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGAke3F1ZXJ5SXRlbS5jb25maWdJZH1fJHtEYXRlLm5vdygpfWBcbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZCwgcmVzdWx0Q291bnRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXRhc2sgaC0xMDAnLCBjbGFzc05hbWUsIHsgd3JhcHBlZDogd3JhcHBlZEluUG9wcGVyIH0pfSBcbiAgICAgIGRhdGEtcmVzdWx0LXF1ZXJ5LWtleT17cmVzdWx0UXVlcnlLZXl9XG4gICAgICBjc3M9e2Nzc2BcbiAgICAgICR7c3R5bGV9XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgYH0+XG4gICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCB1c2VEYXRhU291cmNlPXt1c2VPdXRwdXREc30gb25EYXRhU291cmNlQ3JlYXRlZD17aGFuZGxlT3V0cHV0RGF0YVNvdXJjZUNyZWF0ZWR9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZU91dHB1dERhdGFTb3VyY2VJbmZvQ2hhbmdlfS8+XG4gICAgICBcbiAgICAgIHsvKiBUYWIgTmF2aWdhdGlvbiAtIE1vdmVkIHRvIHRvcCAqL31cbiAgICAgIDxUYWJzXG4gICAgICAgIHZhbHVlPXthY3RpdmVUYWJ9XG4gICAgICAgIG9uQ2hhbmdlPXsoaWQpID0+IGhhbmRsZVRhYkNoYW5nZShpZCBhcyAncXVlcnknIHwgJ3Jlc3VsdHMnKX1cbiAgICAgICAgZmlsbD17dHJ1ZX1cbiAgICAgICAgdHlwZT0ndW5kZXJsaW5lJ1xuICAgICAgICBrZWVwTW91bnQ9e3RydWV9XG4gICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgYH1cbiAgICAgID5cbiAgICAgICAgPFRhYlxuICAgICAgICAgIGlkPSdxdWVyeSdcbiAgICAgICAgICB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ3F1ZXJ5VGFiJyl9XG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrX19jb250ZW50Jywge1xuICAgICAgICAgICAgICBbRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU106IGlzSW5Qb3BwZXIgJiYgYWN0aXZlVGFiID09PSAncXVlcnknXG4gICAgICAgICAgICB9KX0gXG4gICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIEhlYWRlciB3aXRoIGJhY2sgYnV0dG9uIGFuZCBxdWVyeSBsYWJlbCAtIFF1ZXJ5IHRhYiBvbmx5ICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LWZvcm1fX2hlYWRlciBteC00IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2luLXBvcHBlcic6IGlzSW5Qb3BwZXIgfSl9IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBwYWRkaW5nOiA2cHggMDtcbiAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDhweDtcbiAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCduYXYtYWN0aW9uIGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6IHdyYXBwZWRJblBvcHBlciB9KX0gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMSAxIDA7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgLmppbXUtYnRuIHtcbiAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMjZweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncC0wIG1yLTInLCB7ICdkLW5vbmUnOiB0b3RhbCA9PT0gMSB8fCAhb25OYXZCYWNrIH0pfVxuICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uTmF2QmFja31cbiAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdiYWNrJyl9XG4gICAgICAgICAgICAgICAgICByZWY9e2JhY2tCdG5SZWZ9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPEFycm93TGVmdE91dGxpbmVkIGF1dG9GbGlwLz5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8UXVlcnlUYXNrTGFiZWwgaWNvbj17aWNvbn0gbmFtZT17ZGlzcGxheUxhYmVsID8gbmFtZSA6ICcnfSAvPlxuICAgICAgICAgICAgICAgIHsvKiBIYXNoIHBhcmFtZXRlciBpbmZvIGJ1dHRvbiAtIHNob3dzIHF1ZXJpZXMgZnJvbSBzYW1lIGxheWVyIHdpdGggc2hvcnRJZHMgKi99XG4gICAgICAgICAgICAgICAgeygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5SXRlbXMgfHwgcXVlcnlJdGVtcy5sZW5ndGggPD0gMSkgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgcXVlcnkncyBvcmlnaW4gZGF0YSBzb3VyY2UgSURcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPcmlnaW5EU0lkID0gcXVlcnlJdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRPcmlnaW5EU0lkKSByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBGaW5kIGFsbCBxdWVyaWVzIGZyb20gdGhlIHNhbWUgb3JpZ2luIGRhdGEgc291cmNlIHRoYXQgaGF2ZSBzaG9ydElkc1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc2FtZUxheWVyUXVlcmllcyA9IHF1ZXJ5SXRlbXMuZmlsdGVyKGl0ZW0gPT4gXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkID09PSBjdXJyZW50T3JpZ2luRFNJZCAmJiBcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG9ydElkICYmIFxuICAgICAgICAgICAgICAgICAgICBpdGVtLnNob3J0SWQudHJpbSgpICE9PSAnJ1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgaW5mbyBidXR0b24gaWYgdGhlcmUgYXJlIHF1ZXJpZXMgd2l0aCBzaG9ydElkc1xuICAgICAgICAgICAgICAgICAgaWYgKHNhbWVMYXllclF1ZXJpZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBCdWlsZCB0b29sdGlwIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5TGluZXMgPSBzYW1lTGF5ZXJRdWVyaWVzLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXVlcnlOYW1lID0gZ2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7cXVlcnlOYW1lfTogIyR7aXRlbS5zaG9ydElkfT12YWx1ZSBvciA/JHtpdGVtLnNob3J0SWR9PXZhbHVlYFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgY29uc3QgdG9vbHRpcFRpdGxlID0gYFRoaXMgbGF5ZXIgY2FuIGJlIHNlYXJjaGVkIHVzaW5nIHRoZSBzaG9ydElkcyAke3NhbWVMYXllclF1ZXJpZXMubWFwKHEgPT4gcS5zaG9ydElkKS5qb2luKCcgYW5kICcpfSB1c2luZyAjc2hvcnRJZD12YWx1ZSBvciA/c2hvcnRJZD12YWx1ZSBpbiB0aGUgVVJMLlxcblxcbiR7cXVlcnlMaW5lcy5qb2luKCdcXG4nKX1gXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxUb29sdGlwIFxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tJyBcbiAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3Rvb2x0aXBUaXRsZX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPSdzbScgXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uIFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nSGFzaCBwYXJhbWV0ZXIgc2VhcmNoIGluZm9ybWF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0gcGxhY2VtZW50PSdib3R0b20nPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICByZWY9e2NsZWFyUmVzdWx0QnRuUmVmfVxuICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfVxuICAgICAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbWwtYXV0byBweS0wJ1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IGNsZWFyUmVzdWx0KCd1c2VyLXRyYXNoLWNsaWNrJykgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRyYXNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgey8qIFNlYXJjaCBMYXllciAvIEdyb3VwIGRyb3Bkb3ducyAtIHNob3cgYmFzZWQgb24gZ3JvdXBpbmcgKi99XG4gICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgLy8gT25seSBzaG93IGRyb3Bkb3ducyBpZiBtdWx0aXBsZSBxdWVyaWVzIGV4aXN0XG4gICAgICAgICAgICAgIGlmICghcXVlcnlJdGVtcyB8fCBxdWVyeUl0ZW1zLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQnVpbGQgZmxhdCBsaXN0IG9mIGFsbCBxdWVyaWVzIHdpdGggdGhlaXIgZGlzcGxheSBpbmZvXG4gICAgICAgICAgICAgIC8vIEZvciBncm91cGVkIHF1ZXJpZXMsIHVzZSBncm91cCBkaXNwbGF5IG5hbWUgKG9ubHkgc2hvdyBvbmNlIHBlciBncm91cClcbiAgICAgICAgICAgICAgY29uc3QgcXVlcnlPcHRpb25zOiBBcnJheTx7XG4gICAgICAgICAgICAgICAgY29uZmlnSWQ6IHN0cmluZ1xuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmdcbiAgICAgICAgICAgICAgICBncm91cElkOiBzdHJpbmcgfCBudWxsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlclxuICAgICAgICAgICAgICB9PiA9IFtdXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBUcmFjayB3aGljaCBncm91cHMgd2UndmUgYWxyZWFkeSBhZGRlZCB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgICAgICAgIGNvbnN0IGFkZGVkR3JvdXBzID0gbmV3IFNldDxzdHJpbmc+KClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbXMuZm9yRWFjaCgoaXRlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgICAgLy8gRm9yIGdyb3VwZWQgcXVlcmllcywgdXNlIGdyb3VwIGRpc3BsYXkgbmFtZSAob25seSBhZGQgb25jZSBwZXIgZ3JvdXApXG4gICAgICAgICAgICAgICAgICBpZiAoIWFkZGVkR3JvdXBzLmhhcyhpdGVtLmdyb3VwSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZGVkR3JvdXBzLmFkZChpdGVtLmdyb3VwSWQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwRGlzcGxheU5hbWUgPSBncm91cHM/LltpdGVtLmdyb3VwSWRdPy5kaXNwbGF5TmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cHM/LltpdGVtLmdyb3VwSWRdPy5pdGVtc1swXT8ubmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEdyb3VwICR7aXRlbS5ncm91cElkfWBcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBncm91cERpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSAtIHVzZSBpdGVtLm5hbWUgZm9yIGZpcnN0IGRyb3Bkb3duIChub3Qgc2VhcmNoQWxpYXMvamltdUZpZWxkTmFtZSlcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBpdGVtLm5hbWUgfHwgZ2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKSxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgY3VycmVudGx5IHNlbGVjdGVkIHF1ZXJ5XG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRRdWVyeUl0ZW0gPSBxdWVyeUl0ZW1cbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFF1ZXJ5R3JvdXBJZCA9IGN1cnJlbnRRdWVyeUl0ZW0uZ3JvdXBJZCB8fCBudWxsXG4gICAgICAgICAgICAgIGNvbnN0IGlzR3JvdXBlZFF1ZXJ5ID0gY3VycmVudFF1ZXJ5R3JvdXBJZCAhPT0gbnVsbFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRmluZCB0aGUgb3B0aW9uIGluZGV4IGZvciB0aGUgY3VycmVudCBxdWVyeVxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50T3B0aW9uSW5kZXggPSBxdWVyeU9wdGlvbnMuZmluZEluZGV4KG9wdCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzR3JvdXBlZFF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0Lmdyb3VwSWQgPT09IGN1cnJlbnRRdWVyeUdyb3VwSWRcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdC5jb25maWdJZCA9PT0gY3VycmVudFF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW5kZXJpbmctZHJvcGRvd25zJyxcbiAgICAgICAgICAgICAgICB0b3RhbFF1ZXJpZXM6IHF1ZXJ5SXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9uc0NvdW50OiBxdWVyeU9wdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWVyeUdyb3VwSWQsXG4gICAgICAgICAgICAgICAgaXNHcm91cGVkUXVlcnksXG4gICAgICAgICAgICAgICAgY3VycmVudE9wdGlvbkluZGV4LFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCxcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVlcnlDb25maWdJZDogY3VycmVudFF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICB7LyogRmlyc3QgRHJvcGRvd246IEFsbCBxdWVyaWVzICovfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdzZWFyY2hMYXllcicpfVxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IFxuICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRPcHRpb25JbmRleCA+PSAwID8gY3VycmVudE9wdGlvbkluZGV4IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17YXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IHF1ZXJ5T3B0aW9uc1tvcHRpb25JbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1vcHRpb24tc2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzR3JvdXBlZDogc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZCAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU1RBUlQgQ0xFQVJJTkcgSU1NRURJQVRFTFkgSUYgU1dJVENISU5HXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFyUmVzdWx0KCdkcm9wZG93bi1sYXllci1zd2l0Y2gtbmV3LW1vZGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHcm91cGVkIHF1ZXJ5IHNlbGVjdGVkIC0gc2V0IGdyb3VwIGFuZCBmaXJzdCBxdWVyeSBpbiBncm91cFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBDaGFuZ2Uoc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cFF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlKDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSBzZWxlY3RlZCAtIGNsZWFyIGdyb3VwIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBDaGFuZ2UobnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Vbmdyb3VwZWRDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSB1bmdyb3VwZWQgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmdyb3VwZWRJbmRleCA9IHVuZ3JvdXBlZD8uZmluZEluZGV4KCh7IGl0ZW0gfSkgPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbmZpZ0lkID09PSBzZWxlY3RlZE9wdGlvbi5jb25maWdJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgPz8gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5ncm91cGVkSW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Vbmdyb3VwZWRDaGFuZ2UodW5ncm91cGVkSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiB1c2UgdGhlIGluZGV4IGZyb20gcXVlcnlJdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICd1bmdyb3VwZWQtZmFsbGJhY2stdG8taW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbkluZGV4OiBzZWxlY3RlZE9wdGlvbi5pbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUXVlcnlDaGFuZ2Uoc2VsZWN0ZWRPcHRpb24uaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtxdWVyeU9wdGlvbnMubWFwKChvcHRpb24sIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW5kZXJpbmctcXVlcnktb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IG9wdGlvbi5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IG9wdGlvbi5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogb3B0aW9uLmdyb3VwSWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17b3B0aW9uLmNvbmZpZ0lkfSB2YWx1ZT17aWR4fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9uLmRpc3BsYXlOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgey8qIFNlY29uZCBEcm9wZG93bjogUXVlcmllcyB3aXRoaW4gc2VsZWN0ZWQgZ3JvdXAgKG9ubHkgaWYgZ3JvdXBlZCBxdWVyeSBzZWxlY3RlZCkgKi99XG4gICAgICAgICAgICAgICAgICB7aXNHcm91cGVkUXVlcnkgJiYgY3VycmVudFF1ZXJ5R3JvdXBJZCAmJiBncm91cHMgJiYgZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTZweDtcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIFNlYXJjaCBBbGlhc1xuICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggIT09IHVuZGVmaW5lZCA/IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXthc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJbmRleCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnZ3JvdXAtcXVlcnktc2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGN1cnJlbnRRdWVyeUdyb3VwSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBRdWVyeUluZGV4OiBuZXdJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zW25ld0luZGV4XT8uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlEaXNwbGF5TmFtZTogZ2V0UXVlcnlEaXNwbGF5TmFtZShncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0uaXRlbXNbbmV3SW5kZXhdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNUQVJUIENMRUFSSU5HIElNTUVESUFURUxZIElGIFNXSVRDSElOR1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2Ryb3Bkb3duLWFsaWFzLXN3aXRjaC1uZXctbW9kZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cFF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlKG5ld0luZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0uaXRlbXMubWFwKChpdGVtLCBpZHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2l0ZW0uY29uZmlnSWR9IHZhbHVlPXtpZHh9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRRdWVyeURpc3BsYXlOYW1lKGl0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIFJlc3VsdHMgTW9kZSBCdXR0b24gR3JvdXAgLSBBbHdheXMgc2hvdywgcmVnYXJkbGVzcyBvZiBxdWVyeSBjb3VudCAqL31cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBnYXA6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgey8qIFJlc3VsdHMgbGFiZWwgYW5kIGluZm8gYnV0dG9uICovfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGl0bGUyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfTpcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeScgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpfSBjc3M9e2Nzc2BmbGV4LXNocmluazogMDtgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICB7LyogTW9kZSBidXR0b25zICovfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwicmFkaW9ncm91cFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gPyAnY29udGFpbmVkJyA6ICdvdXRsaW5lZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNb2RlID0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGU6IHJlc3VsdHNNb2RlIHx8IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVzdWx0c01vZGVDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlKG5ld01vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake2dldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJyl9OiAke2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKS5zcGxpdCgnXFxuJylbMV0/LnRyaW0oKSB8fCAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZU5ldycpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNNb2RlID0gcmVzdWx0c01vZGUgfHwgU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnYnV0dG9uLW1vZGUtY2hhbmdlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHN3aXRjaGluZyBGUk9NIFwiTmV3XCIgVE8gXCJBZGQgdG9cIiBtb2RlIGFuZCB3ZSBoYXZlIGN1cnJlbnQgcmVzdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2UgdGhlbSB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgYmVmb3JlIGNoYW5naW5nIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU09VUkNFIE9GIFRSVVRIIEFSQ0hJVEVDVFVSRSAocjAxOC42NSk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgaXMgdGhlIFNJTkdMRSBTT1VSQ0UgT0YgVFJVVEggZm9yIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgSXQgY29ycmVjdGx5IGZpbHRlcnMgb3V0IHJlbW92ZWQgcmVjb3JkcyBhbmQgc3RheXMgaW4gc3luYyB3aXRoIHVzZXIgYWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtIGVmZmVjdGl2ZVJlY29yZHMgKGZyb20gcmVjb3Jkc1JlZi5jdXJyZW50KSBjb250YWlucyBzdGFsZSBxdWVyeSByZXN1bHRzIHRoYXQgbWF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgaW5jbHVkZSByZW1vdmVkIHJlY29yZHMsIHNvIGl0IHNob3VsZCBvbmx5IGJlIHVzZWQgYXMgYSBmYWxsYmFjayB3aGVuIG91dHB1dERTXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgaGFzIG5vIHNlbGVjdGlvbiAoZS5nLiwgZHVyaW5nIHF1ZXJ5IGV4ZWN1dGlvbiBiZWZvcmUgc2VsZWN0aW9uIGlzIGFwcGxpZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gVGhpcyBlbnN1cmVzIHJlbW92ZWQgcmVjb3JkcyBhcmUgbmV2ZXIgYWNjaWRlbnRhbGx5IGluY2x1ZGVkIGluIGFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVCVUc6IExvZyBzdGF0ZSBiZWZvcmUgY2FwdHVyZSB0byB2ZXJpZnkgYXNzdW1wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWZmZWN0aXZlUmVjb3Jkc0NvdW50ID0gZWZmZWN0aXZlUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0RFNTZWxlY3RlZFJlY29yZHMgPSBvdXRwdXREUz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXREU1NlbGVjdGVkQ291bnQgPSBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPSBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ21vZGUtc3dpdGNoLWRlYnVnLWJlZm9yZS1jYXB0dXJlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlUmVjb3Jkc0NvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUz8uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRWZmZWN0aXZlUmVjb3JkczogZWZmZWN0aXZlUmVjb3JkcyAmJiBlZmZlY3RpdmVSZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzT3V0cHV0RFNTZWxlY3RlZDogb3V0cHV0RFNTZWxlY3RlZFJlY29yZHMubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZJWCAocjAxOC42NSk6IFVzZSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBzb3VyY2Ugb2YgdHJ1dGggZm9yIG1vZGUgc3dpdGNoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY29ycmVjdGx5IGZpbHRlcnMgb3V0IHJlbW92ZWQgcmVjb3JkcywgdW5saWtlIGVmZmVjdGl2ZVJlY29yZHMgd2hpY2ggY29udGFpbnMgc3RhbGUgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBpcyB0aGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCB0aGF0IHN0YXlzIGluIHN5bmMgd2l0aCByZW1vdmFsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRzVG9DYXB0dXJlID0gb3V0cHV0RFNTZWxlY3RlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gb3V0cHV0RFNTZWxlY3RlZFJlY29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZWZmZWN0aXZlUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVCVUc6IExvZyB3aGljaCBzb3VyY2Ugd2FzIHVzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdtb2RlLXN3aXRjaC1kZWJ1Zy1hZnRlci1jYXB0dXJlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUNvdW50OiByZWNvcmRzVG9DYXB0dXJlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgPyAnb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCknIDogKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwID8gJ2VmZmVjdGl2ZVJlY29yZHMnIDogJ25vbmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVSZWNvcmRzQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZENvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERJQUdOT1NUSUM6IENoZWNrIGVhY2ggY29uZGl0aW9uIGluZGl2aWR1YWxseSAocjAxOC43OClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uQ2hlY2sgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlSXNOZXc6IHByZXZpb3VzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZUlzQWRkOiBuZXdNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1JlY29yZHNUb0NhcHR1cmU6IHJlY29yZHNUb0NhcHR1cmUubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREUyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNPbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZTogISFvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGU6IHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlOiBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmVMZW5ndGg6IHJlY29yZHNUb0NhcHR1cmUubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnbW9kZS1zd2l0Y2gtY29uZGl0aW9uLWNoZWNrJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uczogY29uZGl0aW9uQ2hlY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsQ29uZGl0aW9uc01ldDogY29uZGl0aW9uQ2hlY2sucHJldmlvdXNNb2RlSXNOZXcgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbkNoZWNrLm5ld01vZGVJc0FkZCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uQ2hlY2suaGFzUmVjb3Jkc1RvQ2FwdHVyZSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uQ2hlY2suaGFzT3V0cHV0RFMgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbkNoZWNrLmhhc09uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZS5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0FjY3VtdWxhdGVkID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgY3VycmVudCByZXN1bHRzIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJZHMgPSBleGlzdGluZ0FjY3VtdWxhdGVkLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXB0dXJlZElkcyA9IHJlY29yZHNUb0NhcHR1cmUubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZElkcyA9IG1lcmdlZFJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkSWRzID0gbWVyZ2VkSWRzLmZpbHRlcihpZCA9PiAhZXhpc3RpbmdJZHMuaW5jbHVkZXMoaWQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1cGxpY2F0ZUlkcyA9IGNhcHR1cmVkSWRzLmZpbHRlcihpZCA9PiBleGlzdGluZ0lkcy5pbmNsdWRlcyhpZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NhcHR1cmluZy1jdXJyZW50LXJlc3VsdHMtb24tbW9kZS1zd2l0Y2gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVkUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9DYXB0dXJlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVkSWRzOiBjYXB0dXJlZElkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVmZmVjdGl2ZVJlY29yZHNDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0lkczogZXhpc3RpbmdJZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWNvcmRzQ291bnQ6IG1lcmdlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkSWRzOiBtZXJnZWRJZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZElkczogYWRkZWRJZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXBsaWNhdGVJZHM6IGR1cGxpY2F0ZUlkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cGxpY2F0ZXNGaWx0ZXJlZDogZHVwbGljYXRlSWRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVVzZWQ6IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgPyAnb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCknIDogKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwID8gJ2VmZmVjdGl2ZVJlY29yZHMnIDogJ25vbmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGU6ICdvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKS1pcy1zb3VyY2Utb2YtdHJ1dGgtZmlsdGVycy1yZW1vdmVkLXJlY29yZHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShtZXJnZWRSZWNvcmRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdtb2RlLXN3aXRjaC1tZXJnZS1za2lwcGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogJ2NvbmRpdGlvbi1jaGVjay1mYWlsZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uczogY29uZGl0aW9uQ2hlY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25SZXN1bHRzTW9kZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2UobmV3TW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzJdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVBZGQnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFhY2N1bXVsYXRlZFJlY29yZHMgfHwgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c01vZGUgPSByZXN1bHRzTW9kZSB8fCBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3dpdGNoaW5nIEZST00gXCJOZXdcIiBUTyBcIlJlbW92ZSBmcm9tXCIgbW9kZSBhbmQgd2UgaGF2ZSBjdXJyZW50IHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHRoZW0gd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGJlZm9yZSBjaGFuZ2luZyBtb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChzYW1lIHBhdHRlcm4gYXMgXCJBZGQgdG9cIiBtb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTT1VSQ0UgT0YgVFJVVEggQVJDSElURUNUVVJFIChyMDE4LjY1KTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSBpcyB0aGUgU0lOR0xFIFNPVVJDRSBPRiBUUlVUSCBmb3IgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBJdCBjb3JyZWN0bHkgZmlsdGVycyBvdXQgcmVtb3ZlZCByZWNvcmRzIGFuZCBzdGF5cyBpbiBzeW5jIHdpdGggdXNlciBhY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gZWZmZWN0aXZlUmVjb3JkcyAoZnJvbSByZWNvcmRzUmVmLmN1cnJlbnQpIGNvbnRhaW5zIHN0YWxlIHF1ZXJ5IHJlc3VsdHMgdGhhdCBtYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBpbmNsdWRlIHJlbW92ZWQgcmVjb3Jkcywgc28gaXQgc2hvdWxkIG9ubHkgYmUgdXNlZCBhcyBhIGZhbGxiYWNrIHdoZW4gb3V0cHV0RFNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBoYXMgbm8gc2VsZWN0aW9uIChlLmcuLCBkdXJpbmcgcXVlcnkgZXhlY3V0aW9uIGJlZm9yZSBzZWxlY3Rpb24gaXMgYXBwbGllZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBUaGlzIGVuc3VyZXMgcmVtb3ZlZCByZWNvcmRzIGFyZSBuZXZlciBhY2NpZGVudGFsbHkgaW5jbHVkZWQgaW4gYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUJVRzogTG9nIHN0YXRlIGJlZm9yZSBjYXB0dXJlIHRvIHZlcmlmeSBhc3N1bXB0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlZmZlY3RpdmVSZWNvcmRzQ291bnRGb3JSZW1vdmUgPSBlZmZlY3RpdmVSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZSA9IG91dHB1dERTPy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dERTU2VsZWN0ZWRDb3VudEZvclJlbW92ZSA9IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzRm9yUmVtb3ZlLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEZvclJlbW92ZSA9IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnbW9kZS1zd2l0Y2gtZGVidWctYmVmb3JlLWNhcHR1cmUtcmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlUmVjb3Jkc0NvdW50OiBlZmZlY3RpdmVSZWNvcmRzQ291bnRGb3JSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFNTZWxlY3RlZENvdW50OiBvdXRwdXREU1NlbGVjdGVkQ291bnRGb3JSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50Rm9yUmVtb3ZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTPy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNFZmZlY3RpdmVSZWNvcmRzOiBlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNPdXRwdXREU1NlbGVjdGVkOiBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZS5sZW5ndGggPiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYIChyMDE4LjY1KTogVXNlIG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIHNvdXJjZSBvZiB0cnV0aCBmb3IgbW9kZSBzd2l0Y2hpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjb3JyZWN0bHkgZmlsdGVycyBvdXQgcmVtb3ZlZCByZWNvcmRzLCB1bmxpa2UgZWZmZWN0aXZlUmVjb3JkcyB3aGljaCBjb250YWlucyBzdGFsZSBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpIGlzIHRoZSBzaW5nbGUgc291cmNlIG9mIHRydXRoIHRoYXQgc3RheXMgaW4gc3luYyB3aXRoIHJlbW92YWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUgPSBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZS5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChlZmZlY3RpdmVSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUJVRzogTG9nIHdoaWNoIHNvdXJjZSB3YXMgdXNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ21vZGUtc3dpdGNoLWRlYnVnLWFmdGVyLWNhcHR1cmUtcmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUNvdW50OiByZWNvcmRzVG9DYXB0dXJlRm9yUmVtb3ZlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG91dHB1dERTU2VsZWN0ZWRSZWNvcmRzRm9yUmVtb3ZlLmxlbmd0aCA+IDAgPyAnb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCknIDogKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwID8gJ2VmZmVjdGl2ZVJlY29yZHMnIDogJ25vbmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVSZWNvcmRzQ291bnQ6IGVmZmVjdGl2ZVJlY29yZHNDb3VudEZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREU1NlbGVjdGVkQ291bnQ6IG91dHB1dERTU2VsZWN0ZWRDb3VudEZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBESUFHTk9TVElDOiBDaGVjayBlYWNoIGNvbmRpdGlvbiBpbmRpdmlkdWFsbHkgKHIwMTguNzgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbkNoZWNrUmVtb3ZlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZUlzTmV3OiBwcmV2aW91c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGVJc1JlbW92ZTogbmV3TW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1JlY29yZHNUb0NhcHR1cmU6IHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNPdXRwdXREUzogISFvdXRwdXREUyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNPbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZTogISFvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGU6IHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlOiBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmVMZW5ndGg6IHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnbW9kZS1zd2l0Y2gtY29uZGl0aW9uLWNoZWNrLXJlbW92ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbnM6IGNvbmRpdGlvbkNoZWNrUmVtb3ZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbENvbmRpdGlvbnNNZXQ6IGNvbmRpdGlvbkNoZWNrUmVtb3ZlLnByZXZpb3VzTW9kZUlzTmV3ICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25DaGVja1JlbW92ZS5uZXdNb2RlSXNSZW1vdmUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbkNoZWNrUmVtb3ZlLmhhc1JlY29yZHNUb0NhcHR1cmUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbkNoZWNrUmVtb3ZlLmhhc091dHB1dERTICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25DaGVja1JlbW92ZS5oYXNPbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZS5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0FjY3VtdWxhdGVkID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgY3VycmVudCByZXN1bHRzIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NhcHR1cmluZy1jdXJyZW50LXJlc3VsdHMtb24tbW9kZS1zd2l0Y2gtdG8tcmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlZFJlY29yZHNDb3VudDogcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVSZWNvcmRzQ291bnQ6IGVmZmVjdGl2ZVJlY29yZHNDb3VudEZvclJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTU2VsZWN0ZWRDb3VudDogb3V0cHV0RFNTZWxlY3RlZENvdW50Rm9yUmVtb3ZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZENvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VVc2VkOiBvdXRwdXREU1NlbGVjdGVkUmVjb3Jkc0ZvclJlbW92ZS5sZW5ndGggPiAwID8gJ291dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpJyA6IChlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCA/ICdlZmZlY3RpdmVSZWNvcmRzJyA6ICdub25lJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RlOiAnb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCktaXMtc291cmNlLW9mLXRydXRoLWZpbHRlcnMtcmVtb3ZlZC1yZWNvcmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UobWVyZ2VkUmVjb3JkcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnbW9kZS1zd2l0Y2gtbWVyZ2Utc2tpcHBlZC1yZW1vdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAnY29uZGl0aW9uLWNoZWNrLWZhaWxlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25zOiBjb25kaXRpb25DaGVja1JlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblJlc3VsdHNNb2RlQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZShuZXdNb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YCR7Z2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzNdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXsoIWFjY3VtdWxhdGVkUmVjb3JkcyB8fCBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEaXNhYmxlZFJlbW92ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVSZW1vdmUnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgaWQ9e2ByZXN1bHRzLW1vZGUtZGVzY3JpcHRpb24tJHtwcm9wcy53aWRnZXRJZH1gfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNyLW9ubHlcIlxuICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGl2ZT1cInBvbGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgcm9sZT1cInN0YXR1c1wiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRJMThuTWVzc2FnZSgnY3JlYXRlTmV3UmVzdWx0cycpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGdldEkxOG5NZXNzYWdlKCdhZGRUb0N1cnJlbnRSZXN1bHRzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICB7ZW5hYmxlZCAmJiBkc0V4aXN0cyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgPFF1ZXJ5VGFza0Zvcm1cbiAgICAgICAgICAgICAgICAgICAga2V5PXtxdWVyeUl0ZW0uY29uZmlnSWR9XG4gICAgICAgICAgICAgICAgICAgIHsuLi5vdGhlclByb3BzfVxuICAgICAgICAgICAgICAgICAgICBjb25maWdJZD17cXVlcnlJdGVtLmNvbmZpZ0lkfVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXREUz17b3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgICAgIGRhdGFzb3VyY2VSZWFkeT17ZGF0YVNvdXJjZSAhPSBudWxsfVxuICAgICAgICAgICAgICAgICAgICBzcGF0aWFsRmlsdGVyRW5hYmxlZD17c3BhdGlhbEZpbHRlckVuYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgIGRhdGFBY3Rpb25GaWx0ZXIgPSB7ZGF0YUFjdGlvbkZpbHRlcn1cbiAgICAgICAgICAgICAgICAgICAgb25Gb3JtU3VibWl0PXtoYW5kbGVGb3JtU3VibWl0fVxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZT17aW5pdGlhbElucHV0VmFsdWV9XG4gICAgICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e29uSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ9e3F1ZXJ5SXRlbS5zaG9ydElkfVxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVUYWI9e2FjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICAgICAgb25UYWJDaGFuZ2U9e3NldEFjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxEYXRhU291cmNlVGlwXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3Byb3BzLndpZGdldElkfVxuICAgICAgICAgICAgICAgIHVzZURhdGFTb3VyY2U9e3F1ZXJ5SXRlbS51c2VEYXRhU291cmNlfVxuICAgICAgICAgICAgICAgIHNob3dNZXNzYWdlPXt0cnVlfVxuICAgICAgICAgICAgICAgIG9uU3RhdHVzQ2hhbmdlPXtoYW5kbGVTdGF0dXNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgb25EYXRhU291cmNlQ3JlYXRlZD17aGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWR9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9UYWI+XG4gICAgICAgIDxUYWJcbiAgICAgICAgICBpZD0ncmVzdWx0cydcbiAgICAgICAgICB0aXRsZT17XG4gICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzVGFiJyl9XG4gICAgICAgICAgICAgIHtlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNztcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICh7ZWZmZWN0aXZlUmVzdWx0Q291bnR9KVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICB9XG4gICAgICAgICAgZGlzYWJsZWQ9e2VmZmVjdGl2ZVJlc3VsdENvdW50ID09PSAwfVxuICAgICAgICA+XG4gICAgICAgICAge2VmZmVjdGl2ZVJlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXRhc2tfX2NvbnRlbnQnLCB7XG4gICAgICAgICAgICAgICAgW0ZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1NdOiBpc0luUG9wcGVyICYmIGFjdGl2ZVRhYiA9PT0gJ3Jlc3VsdHMnXG4gICAgICAgICAgICAgIH0pfSBcbiAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IGNsaWNrcyBmcm9tIGJ1YmJsaW5nIHVwIHdoZW4gUmVzdWx0cyB0YWIgaXMgYWN0aXZlXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYiA9PT0gJ3Jlc3VsdHMnKSB7XG4gICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8UXVlcnlUYXNrUmVzdWx0XG4gICAgICAgICAgICAgICAga2V5PXtgJHtxdWVyeUl0ZW0uY29uZmlnSWR9LSR7cXVlcnlFeGVjdXRpb25LZXlSZWYuY3VycmVudH1gfVxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtwcm9wcy53aWRnZXRJZH1cbiAgICAgICAgICAgICAgICBxdWVyeUl0ZW09e3F1ZXJ5SXRlbX1cbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcz17cXVlcnlQYXJhbVJlZi5jdXJyZW50fVxuICAgICAgICAgICAgICAgIHJlc3VsdENvdW50PXtlZmZlY3RpdmVSZXN1bHRDb3VudH1cbiAgICAgICAgICAgICAgICBtYXhQZXJQYWdlPXsoZGF0YVNvdXJjZSBhcyBRdWVyaWFibGVEYXRhU291cmNlKT8uZ2V0TWF4UmVjb3JkQ291bnQ/LigpfVxuICAgICAgICAgICAgICAgIHJlY29yZHM9e2VmZmVjdGl2ZVJlY29yZHN9XG4gICAgICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTfVxuICAgICAgICAgICAgICAgIHJ1bnRpbWVab29tVG9TZWxlY3RlZD17bGFzdFJ1bnRpbWVab29tVG9TZWxlY3RlZFJlZi5jdXJyZW50fVxuICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlPXtyZXN1bHRzTW9kZX1cbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXt1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0fVxuICAgICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXI9e2dyYXBoaWNzTGF5ZXJ9XG4gICAgICAgICAgICAgICAgbWFwVmlldz17bWFwVmlld31cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e2FjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZT17b25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgZXZlbnRNYW5hZ2VyPXtldmVudE1hbmFnZXJ9XG4gICAgICAgICAgICAgICAgaXNRdWVyeVN3aXRjaEluUHJvZ3Jlc3NSZWY9e2lzUXVlcnlTd2l0Y2hJblByb2dyZXNzUmVmfVxuICAgICAgICAgICAgICAgIG9uTmF2QmFjaz17YXN5bmMgKGNsZWFyUmVzdWx0cyA9IGZhbHNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbmF2aWdhdGlvbiBmcm9tIFF1ZXJ5VGFza1Jlc3VsdFxuICAgICAgICAgICAgICAgICAgLy8gSWYgY2xlYXJSZXN1bHRzIGlzIHRydWUsIGNsZWFyIGV2ZXJ5dGhpbmcgYW5kIGdvIHRvIHF1ZXJ5IHRhYlxuICAgICAgICAgICAgICAgICAgLy8gSWYgZmFsc2UsIGp1c3Qgc3dpdGNoIHRvIHF1ZXJ5IHRhYiB3aXRob3V0IGNsZWFyaW5nXG4gICAgICAgICAgICAgICAgICBpZiAoY2xlYXJSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgZmxhZyB3aGVuIGNsZWFyaW5nXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5hdlRvRm9ybSh0cnVlKVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSnVzdCBzd2l0Y2ggdGFicywgZG9uJ3QgY2xlYXIgcmVzdWx0c1xuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGFzIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgICAgICAgICAgICAgICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXlcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvVGFiPlxuICAgICAgPC9UYWJzPlxuXG4gICAgICB7LyogRXJyb3IgTWVzc2FnZXMgKi99XG4gICAgICB7KHNlbGVjdGlvbkVycm9yIHx8IHpvb21FcnJvcikgJiYgKFxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDAgMTZweDtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgIGB9PlxuICAgICAgICAgIHtzZWxlY3Rpb25FcnJvciAmJiAoXG4gICAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgICBlcnJvcj17c2VsZWN0aW9uRXJyb3J9IFxuICAgICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFNlbGVjdGlvbkVycm9yKG51bGwpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHt6b29tRXJyb3IgJiYgKFxuICAgICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgICAgZXJyb3I9e3pvb21FcnJvcn0gXG4gICAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0Wm9vbUVycm9yKG51bGwpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBMb2FkaW5nIEluZGljYXRvciAtIG92ZXJsYXlzIG9uIHRvcCBvZiB0YWJzICovfVxuICAgICAge3N0YWdlID09PSAyICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICAgIHotaW5kZXg6IDEwMDA7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgYH0+XG4gICAgICAgICAgPExvYWRpbmdSZXN1bHQgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQge1xuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgdHlwZSBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyxcbiAgTWVzc2FnZU1hbmFnZXIsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UsXG4gIFJlY29yZFNldENoYW5nZVR5cGUsXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXG4gIGRhdGFTb3VyY2VVdGlsc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IElGaWVsZEluZm8gfSBmcm9tICdAZXNyaS9hcmNnaXMtcmVzdC1mZWF0dXJlLXNlcnZpY2UnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIFNwYXRpYWxSZWxhdGlvbiwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCBGaWVsZHNUeXBlLCBtYXBKU0FQSVVuaXRUb0RzVW5pdCwgbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWwgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQsIGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBmdW5jdGlvbiBjb21iaW5lRmllbGRzIChyZXN1bHREaXNwbGF5RmllbGRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+LCByZXN1bHRUaXRsZUV4cHJlc3Npb246IHN0cmluZywgaWRGaWVsZD86IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgZmllbGRzID0gbmV3IFNldDxzdHJpbmc+KClcbiAgcmVzdWx0RGlzcGxheUZpZWxkcz8uZm9yRWFjaChpdGVtID0+IGZpZWxkcy5hZGQoaXRlbSkpXG4gIGlmIChyZXN1bHRUaXRsZUV4cHJlc3Npb24pIHtcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSByZXN1bHRUaXRsZUV4cHJlc3Npb24ubWF0Y2goL1xce1xcdypcXH0vZylcbiAgICBpZiAodGVtcGxhdGVzPy5sZW5ndGggPiAwKSB7XG4gICAgICB0ZW1wbGF0ZXMuZm9yRWFjaChpdGVtID0+IGZpZWxkcy5hZGQoaXRlbS5zdWJzdHJpbmcoMSwgaXRlbS5sZW5ndGggLSAxKSkpXG4gICAgfVxuICB9XG4gIGlmIChpZEZpZWxkKSB7XG4gICAgZmllbGRzLmFkZChpZEZpZWxkKVxuICB9XG4gIHJldHVybiBBcnJheS5mcm9tKGZpZWxkcylcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdXNlciBpbnB1dCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uLlxuICogQHBhcmFtIGlucHV0IC0gVGhlIHJhdyB1c2VyIGlucHV0IChzdHJpbmcsIG51bWJlciwgZXRjLilcbiAqIEBwYXJhbSBpc0xpc3QgLSBPcHRpb25hbCBmbGFnIGluZGljYXRpbmcgaWYgdGhlIGlucHV0IGlzIGZyb20gYSBsaXN0L3NlbGVjdG9yIChsZW5pZW50IHZhbGlkYXRpb24pXG4gKiBAcmV0dXJucyBib29sZWFuIC0gdHJ1ZSBpZiBpbnB1dCBpcyB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1F1ZXJ5SW5wdXRWYWxpZCAoaW5wdXQ6IGFueSwgaXNMaXN0OiBib29sZWFuID0gZmFsc2UpOiBib29sZWFuIHtcbiAgLy8gSWYgaXQncyBhIGxpc3QtYmFzZWQgc2VsZWN0aW9uIChVbmlxdWUgVmFsdWVzLCBGaWVsZCBWYWx1ZXMpLCBcbiAgLy8gd2UgYWxsb3cgZW1wdHkvbnVsbCBhcyBpdCBtaWdodCByZXByZXNlbnQgXCJubyBmaWx0ZXJcIiBvciB0aGUgdXNlciBcbiAgLy8gaW50ZW5kcyB0byBpbnRlcmFjdCB3aXRoIHRoZSBsaXN0LlxuICBpZiAoaXNMaXN0KSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGlmIChpbnB1dCA9PT0gbnVsbCB8fCBpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIElmIGl0J3MgYSBzdHJpbmcsIGVuc3VyZSBpdCdzIG5vdCBlbXB0eSBvciBqdXN0IHdoaXRlc3BhY2VcbiAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gaW5wdXQudHJpbSgpICE9PSAnJ1xuICB9XG5cbiAgLy8gSWYgaXQncyBhbiBhcnJheSAob2Z0ZW4gdXNlZCBpbiB1bmlxdWUgdmFsdWVzIG9yIG11bHRpcGxlIHNlbGVjdGlvbilcbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgaWYgKGlucHV0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IGl0ZW0gaXMgdmFsaWQgKHVzdWFsbHkge3ZhbHVlOiAnLi4uJywgbGFiZWw6ICcuLi4nfSlcbiAgICBjb25zdCBmaXJzdEl0ZW0gPSBpbnB1dFswXVxuICAgIGlmIChmaXJzdEl0ZW0gJiYgdHlwZW9mIGZpcnN0SXRlbSA9PT0gJ29iamVjdCcgJiYgJ3ZhbHVlJyBpbiBmaXJzdEl0ZW0pIHtcbiAgICAgIHJldHVybiBpc1F1ZXJ5SW5wdXRWYWxpZChmaXJzdEl0ZW0udmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyBJZiBpdCdzIGEgamltdS1jb3JlIEltbXV0YWJsZSBhcnJheVxuICBpZiAoaW5wdXQuYXNNdXRhYmxlICYmIHR5cGVvZiBpbnB1dC50b0FycmF5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc3QgYXJyID0gaW5wdXQudG9BcnJheSgpXG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZVxuICAgIGNvbnN0IGZpcnN0SXRlbSA9IGFyclswXVxuICAgIGlmIChmaXJzdEl0ZW0gJiYgdHlwZW9mIGZpcnN0SXRlbSA9PT0gJ29iamVjdCcgJiYgJ3ZhbHVlJyBpbiBmaXJzdEl0ZW0pIHtcbiAgICAgIHJldHVybiBpc1F1ZXJ5SW5wdXRWYWxpZChmaXJzdEl0ZW0udmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgXG4gIC8vIEZvciBvdGhlciB0eXBlcyAobnVtYmVycywgZGF0ZXMpLCBpZiBpdCBleGlzdHMsIHdlIGNvdW50IGl0IGFzIHZhbGlkXG4gIHJldHVybiB0cnVlXG59XG5cbi8qKlxuICogU2FuaXRpemVzIHVzZXIgaW5wdXQgZm9yIHF1ZXJ5IHRhc2tzLlxuICogMS4gU3RyaXBzIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuXG4gKiAyLiBQcmV2ZW50cyBiYXNpYyBTUUwgaW5qZWN0aW9uIGJ5IGVzY2FwaW5nIHNpbmdsZSBxdW90ZXMuXG4gKiAzLiBIYW5kbGVzIGVtcHR5IG9yIHdoaXRlc3BhY2Utb25seSBzdHJpbmdzLlxuICogXG4gKiBAcGFyYW0gaW5wdXQgLSBUaGUgcmF3IHVzZXIgaW5wdXQgc3RyaW5nXG4gKiBAcmV0dXJucyBTYW5pdGl6ZWQgc3RyaW5nIG9yIG51bGwgaWYgaW5wdXQgaXMgZW1wdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplUXVlcnlJbnB1dCAoaW5wdXQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKCFpbnB1dCB8fCB0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBcbiAgY29uc3QgdHJpbW1lZCA9IGlucHV0LnRyaW0oKVxuICBpZiAodHJpbW1lZCA9PT0gJycpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICAvLyBCYXNpYyBTUUwgZXNjYXBpbmc6IHJlcGxhY2Ugc2luZ2xlIHF1b3RlcyB3aXRoIGRvdWJsZSBzaW5nbGUgcXVvdGVzXG4gIHJldHVybiB0cmltbWVkLnJlcGxhY2UoLycvZywgXCInJ1wiKVxufVxuXG4vKipcbiAqIFNhbml0aXplcyBhbGwgdmFsdWVzIHdpdGhpbiBhbiBJTVNxbEV4cHJlc3Npb24gb2JqZWN0LlxuICogXG4gKiBAcGFyYW0gc3FsRXhwciAtIFRoZSByYXcgU1FMIGV4cHJlc3Npb24gb2JqZWN0XG4gKiBAcmV0dXJucyBBIG5ldyBzYW5pdGl6ZWQgSU1TcWxFeHByZXNzaW9uIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVTcWxFeHByZXNzaW9uIChzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24pOiBJTVNxbEV4cHJlc3Npb24ge1xuICBpZiAoIXNxbEV4cHIgfHwgIXNxbEV4cHIucGFydHMpIHtcbiAgICByZXR1cm4gc3FsRXhwclxuICB9XG5cbiAgbGV0IHNhbml0aXplZEV4cHIgPSBzcWxFeHByXG4gIHNxbEV4cHIucGFydHMuZm9yRWFjaCgocGFydCwgaW5kZXgpID0+IHtcbiAgICBpZiAocGFydC50eXBlID09PSAnU0lOR0xFJyAmJiBwYXJ0LnZhbHVlT3B0aW9ucz8udmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgcmF3VmFsdWUgPSBwYXJ0LnZhbHVlT3B0aW9ucy52YWx1ZVxuICAgICAgXG4gICAgICAvLyBDQVNFIDE6IFNpbXBsZSBTdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgcmF3VmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnN0IHNhbml0aXplZFZhbHVlID0gc2FuaXRpemVRdWVyeUlucHV0KHJhd1ZhbHVlKVxuICAgICAgICBpZiAoc2FuaXRpemVkVmFsdWUgIT09IHJhd1ZhbHVlKSB7XG4gICAgICAgICAgc2FuaXRpemVkRXhwciA9IHNhbml0aXplZEV4cHIuc2V0SW4oWydwYXJ0cycsIGluZGV4LCAndmFsdWVPcHRpb25zJywgJ3ZhbHVlJ10sIHNhbml0aXplZFZhbHVlKVxuICAgICAgICB9XG4gICAgICB9IFxuICAgICAgLy8gQ0FTRSAyOiBBcnJheSBvZiBvYmplY3RzIChVbmlxdWUgVmFsdWVzIC8gRHJvcGRvd25zKVxuICAgICAgLy8gV2UgbXVzdCBwcmVzZXJ2ZSB0aGUgSW1tdXRhYmxlIHN0cnVjdHVyZSB0byBhdm9pZCBcImFzTXV0YWJsZVwiIGVycm9yc1xuICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyYXdWYWx1ZSkgfHwgKHJhd1ZhbHVlICYmIHR5cGVvZiAocmF3VmFsdWUgYXMgYW55KS50b0FycmF5ID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICBjb25zdCBpc0ltbXV0YWJsZSA9IHR5cGVvZiAocmF3VmFsdWUgYXMgYW55KS50b0FycmF5ID09PSAnZnVuY3Rpb24nXG4gICAgICAgIGNvbnN0IGFyciA9IGlzSW1tdXRhYmxlID8gKHJhd1ZhbHVlIGFzIGFueSkudG9BcnJheSgpIDogKHJhd1ZhbHVlIGFzIGFueVtdKVxuICAgICAgICBcbiAgICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgICBjb25zdCBzYW5pdGl6ZWRBcnIgPSBhcnIubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiAndmFsdWUnIGluIGl0ZW0gJiYgdHlwZW9mIGl0ZW0udmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWRWYWwgPSBzYW5pdGl6ZVF1ZXJ5SW5wdXQoaXRlbS52YWx1ZSlcbiAgICAgICAgICAgIGlmIChzYW5pdGl6ZWRWYWwgIT09IGl0ZW0udmFsdWUpIHtcbiAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uaXRlbSwgdmFsdWU6IHNhbml0aXplZFZhbCB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBpdGVtXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgIC8vIElmIGl0IHdhcyBJbW11dGFibGUsIHdlIHNob3VsZCBpZGVhbGx5IHVzZSBJbW11dGFibGUgbWV0aG9kcyB0byB1cGRhdGUsXG4gICAgICAgICAgLy8gYnV0IHNldEluIG9uIHRoZSB0b3AtbGV2ZWwgZXhwcmVzc2lvbiB3aXRoIGEgcGxhaW4gYXJyYXkvb2JqZWN0IFxuICAgICAgICAgIC8vIHVzdWFsbHkgdHJpZ2dlcnMgdGhlIGZyYW1ld29yaydzIGF1dG8tY29udmVyc2lvbi5cbiAgICAgICAgICBzYW5pdGl6ZWRFeHByID0gc2FuaXRpemVkRXhwci5zZXRJbihbJ3BhcnRzJywgaW5kZXgsICd2YWx1ZU9wdGlvbnMnLCAndmFsdWUnXSwgc2FuaXRpemVkQXJyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIHJldHVybiBzYW5pdGl6ZWRFeHByXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQb3B1cFRlbXBsYXRlIChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4pOiBQcm9taXNlPHsgcG9wdXBUZW1wbGF0ZT86IF9fZXNyaS5Qb3B1cFRlbXBsYXRlLCBkZWZhdWx0UG9wdXBUZW1wbGF0ZT86IF9fZXNyaS5Qb3B1cFRlbXBsYXRlIH0+IHtcbiAgY29uc3QgeyByZXN1bHRGaWVsZHNUeXBlLCByZXN1bHREaXNwbGF5RmllbGRzLCByZXN1bHRUaXRsZUV4cHJlc3Npb24gPSAnJyB9ID0gcXVlcnlJdGVtXG4gIGNvbnN0IGN1cnJlbnRPcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBwb3B1cEluZm8gPSBjdXJyZW50T3JpZ2luRHMuZ2V0UG9wdXBJbmZvKClcblxuICBpZiAocmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzKSB7XG4gICAgbGV0IGZpZWxkczogc3RyaW5nW11cbiAgICBpZiAocmVzdWx0RGlzcGxheUZpZWxkcyA9PSBudWxsKSB7XG4gICAgICBjb25zdCBmaWVsZHNJbkNvbnRlbnQgPSBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQocG9wdXBJbmZvKVxuICAgICAgaWYgKGZpZWxkc0luQ29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHVuaXF1ZUZpZWxkcyA9IG5ldyBTZXQoZmllbGRzSW5Db250ZW50Lm1hcChlbGUgPT4gZWxlLmZpZWxkTmFtZSkpXG4gICAgICAgIGZpZWxkcyA9IEFycmF5LmZyb20odW5pcXVlRmllbGRzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmV0dXJuIGFsbCBmaWVsZHMgYnkgZGVmYXVsdFxuICAgICAgICBjb25zdCBhbGxGaWVsZHNTY2hlbWEgPSBvdXRwdXREUy5nZXRTY2hlbWEoKVxuICAgICAgICBmaWVsZHMgPSBhbGxGaWVsZHNTY2hlbWE/LmZpZWxkcyA/IE9iamVjdC52YWx1ZXMoYWxsRmllbGRzU2NoZW1hLmZpZWxkcykubWFwKGZpZWxkID0+IGZpZWxkLmppbXVOYW1lKSA6IFtdXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpZWxkcyA9IHJlc3VsdERpc3BsYXlGaWVsZHMuYXNNdXRhYmxlKHsgZGVlcDogdHJ1ZSB9KVxuICAgIH1cbiAgICBpZiAocG9wdXBJbmZvKSB7XG4gICAgICBjb25zdCBmaWVsZEluZm9zID0gW11cbiAgICAgIGZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgY29uc3QgZmllbGRJbmZvID0gcG9wdXBJbmZvLmZpZWxkSW5mb3MuZmluZChmaWVsZEluZm8gPT4gZmllbGRJbmZvLmZpZWxkTmFtZSA9PT0gZmllbGQpXG4gICAgICAgIGlmIChmaWVsZEluZm8pIHtcbiAgICAgICAgICBmaWVsZEluZm8udmlzaWJsZSA9IHRydWVcbiAgICAgICAgICBmaWVsZEluZm9zLnB1c2goZmllbGRJbmZvKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpZWxkSW5mb3MucHVzaCh7XG4gICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkLFxuICAgICAgICAgICAgbGFiZWw6IGZpZWxkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgICBmaWVsZEluZm9zLFxuICAgICAgICAgIGNvbnRlbnQ6IFt7XG4gICAgICAgICAgICB0eXBlOiAnZmllbGRzJ1xuICAgICAgICAgIH1dLFxuICAgICAgICAgIHRpdGxlOiByZXN1bHRUaXRsZUV4cHJlc3Npb25cbiAgICAgICAgfVxuICAgICAgfSBhcyBhbnlcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgZmllbGRJbmZvczogZmllbGRzLm1hcChmaWVsZCA9PiAoe1xuICAgICAgICAgIGZpZWxkTmFtZTogZmllbGQsXG4gICAgICAgICAgbGFiZWw6IGZpZWxkXG4gICAgICAgIH0pKSxcbiAgICAgICAgY29udGVudDogW3tcbiAgICAgICAgICB0eXBlOiAnZmllbGRzJ1xuICAgICAgICB9XSxcbiAgICAgICAgdGl0bGU6IHJlc3VsdFRpdGxlRXhwcmVzc2lvblxuICAgICAgfSBhcyBhbnlcbiAgICB9XG4gIH1cbiAgLy8gdGhlIHNvdXJjZSBsYXllciB3aWxsIHByb3ZpZGUgcG9wdXAgaW5mb1xuICBsZXQgbGF5ZXJPYmplY3RcbiAgaWYgKGN1cnJlbnRPcmlnaW5Ecy5sYXllcikge1xuICAgIGxheWVyT2JqZWN0ID0gY3VycmVudE9yaWdpbkRzLmxheWVyXG4gIH0gZWxzZSB7XG4gICAgbGF5ZXJPYmplY3QgPSBhd2FpdCBjdXJyZW50T3JpZ2luRHMuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpXG4gIH1cbiAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgYXdhaXQgbGF5ZXJPYmplY3QubG9hZCgpXG4gIH1cbiAgcmV0dXJuIHsgZGVmYXVsdFBvcHVwVGVtcGxhdGU6IGxheWVyT2JqZWN0Py5hc3NvY2lhdGVkTGF5ZXI/LmRlZmF1bHRQb3B1cFRlbXBsYXRlIHx8IGxheWVyT2JqZWN0Py5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5UGFyYW1zIChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvbixcbiAgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaixcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sXG4gIHBhZ2U6IG51bWJlcixcbiAgcGFnZVNpemU6IG51bWJlclxuKTogUXVlcnlQYXJhbXMge1xuICBjb25zdCBjdXJyZW50UXVlcnlEc0pzb24gPSBvdXRwdXREUy5nZXREYXRhU291cmNlSnNvbigpXG4gIGNvbnN0IGN1cnJlbnRPcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBpc0xvY2FsRHMgPSBjdXJyZW50UXVlcnlEc0pzb24/LmlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlXG4gIGlmIChpc0xvY2FsRHMpIHtcbiAgICBvdXRwdXREUy5zZXRTb3VyY2VSZWNvcmRzKGN1cnJlbnRPcmlnaW5Ecy5nZXRTb3VyY2VSZWNvcmRzKCkpXG4gIH1cblxuICBjb25zdCB7IHVzZUF0dHJpYnV0ZUZpbHRlciwgdXNlU3BhdGlhbEZpbHRlciwgc29ydE9wdGlvbnMsIHJlc3VsdEZpZWxkc1R5cGUsIHJlc3VsdERpc3BsYXlGaWVsZHMsIHJlc3VsdFRpdGxlRXhwcmVzc2lvbiB9ID0gcXVlcnlJdGVtXG4gIFxuICAvLyBERVRFUk1JTkUgTUlOSU1BTCBGSUVMRFMgKFRoZSBcIkZpZWxkIFNocmVkZGVyXCIgT3B0aW1pemF0aW9uKVxuICAvLyBUbyBhY2hpZXZlIHBlcmZvcm1hbmNlIHBhcml0eSB3aXRoIFdlYiBBcHBCdWlsZGVyLCB3ZSBtdXN0IGF2b2lkIGZldGNoaW5nIGV2ZXJ5IFxuICAvLyBjb2x1bW4gaW4gdGhlIGRhdGFiYXNlICgqIG9yIGFsbCkuIFdlIHN1cmdpY2FsbHkgcmVxdWVzdCBvbmx5IHRoZSBmaWVsZHMgXG4gIC8vIG5lZWRlZCBmb3IgdGhlIFRpdGxlLCB0aGUgQXR0cmlidXRlIExpc3QsIGFuZCB0aGUgSUQgZmllbGQuXG4gIGxldCBvdXRwdXRGaWVsZHM6IHN0cmluZ1tdID0gW11cbiAgaWYgKHJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcyAmJiByZXN1bHREaXNwbGF5RmllbGRzKSB7XG4gICAgb3V0cHV0RmllbGRzID0gY29tYmluZUZpZWxkcyhyZXN1bHREaXNwbGF5RmllbGRzIGFzIGFueSwgcmVzdWx0VGl0bGVFeHByZXNzaW9uIHx8ICcnLCBvdXRwdXREUy5nZXRJZEZpZWxkKCkpXG4gIH0gZWxzZSB7XG4gICAgLy8gUG9wdXAgbW9kZTogR2V0IG9ubHkgdmlzaWJsZSBmaWVsZHMgZnJvbSBwb3B1cCBpbmZvXG4gICAgY29uc3QgcG9wdXBJbmZvID0gY3VycmVudE9yaWdpbkRzLmdldFBvcHVwSW5mbygpXG4gICAgY29uc3QgZmllbGROYW1lcyA9IE9iamVjdC52YWx1ZXMoY3VycmVudE9yaWdpbkRzLmdldFNjaGVtYSgpLmZpZWxkcyA/PyB7fSkubWFwKGYgPT4gZi5uYW1lKVxuICAgIGNvbnN0IHZhbGlkRmllbGRJbmZvcyA9IHBvcHVwSW5mbz8uZmllbGRJbmZvcz8uZmlsdGVyKGZpZWxkSW5mbyA9PiBmaWVsZEluZm8udmlzaWJsZSAhPT0gZmFsc2UgJiYgZmllbGROYW1lcy5pbmNsdWRlcyhmaWVsZEluZm8uZmllbGROYW1lKSlcbiAgICBvdXRwdXRGaWVsZHMgPSB2YWxpZEZpZWxkSW5mb3M/Lm1hcChmaWVsZEluZm8gPT4gZmllbGRJbmZvLmZpZWxkTmFtZSkgfHwgW11cbiAgICBcbiAgICAvLyBBbHdheXMgZW5zdXJlIElEIGZpZWxkIGlzIGluY2x1ZGVkXG4gICAgY29uc3QgaWRGaWVsZCA9IG91dHB1dERTLmdldElkRmllbGQoKVxuICAgIGlmIChpZEZpZWxkICYmICFvdXRwdXRGaWVsZHMuaW5jbHVkZXMoaWRGaWVsZCkpIHtcbiAgICAgIG91dHB1dEZpZWxkcy5wdXNoKGlkRmllbGQpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgbWVyZ2VkUXVlcnlQYXJhbXMgPSBvdXRwdXREUy5tZXJnZVF1ZXJ5UGFyYW1zKGN1cnJlbnRPcmlnaW5Ecy5nZXRDdXJyZW50UXVlcnlQYXJhbXMoKSA/PyB7fSwge1xuICAgIHdoZXJlOiAodXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHI/LnNxbCkgPyBkYXRhU291cmNlVXRpbHMuZ2V0QXJjR0lTU1FMKHNxbEV4cHIsIG91dHB1dERTKS5zcWwgOiAnMT0xJyxcbiAgICBzcWxFeHByZXNzaW9uOiAodXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHI/LnNxbCkgPyBzcWxFeHByIDogbnVsbCxcbiAgICAvLyBGT1JDRSBtaW5pbWFsIGZpZWxkcyBoZXJlIHRvIG92ZXJyaWRlIGFueSBmcmFtZXdvcmsgXCIqXCIgb3IgXCJhbGxcIlxuICAgIG91dEZpZWxkczogb3V0cHV0RmllbGRzXG4gIH0gYXMgYW55KVxuXG4gIC8vIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogVW5pdmVyc2FsIFNRTCBPcHRpbWl6ZXJcbiAgLy8gV2Ugbm9ybWFsaXplIHRoZSB1c2VyJ3MgaW5wdXQgdG8gVVBQRVJDQVNFIHRvIGVuc3VyZSBjYXNlLWluc2Vuc2l0aXZpdHkgd2hpbGUgXG4gIC8vIHVud3JhcHBpbmcgYW55IExPV0VSKCkgZnVuY3Rpb24gYXJvdW5kIHRoZSBmaWVsZCBuYW1lLiBUaGlzIGFsbG93cyB0aGUgZGF0YWJhc2UgXG4gIC8vIHRvIHVzZSBpdHMgYXR0cmlidXRlIGluZGV4ZXMgKFNBUkdhYmxlIHF1ZXJ5KS5cbiAgaWYgKG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlICYmIG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlLmluY2x1ZGVzKCdMT1dFUignKSkge1xuICAgIGNvbnN0IG9wdGltaXplZFdoZXJlID0gbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUucmVwbGFjZSgvTE9XRVJcXCgoW14pXSspXFwpXFxzKig9fExJS0UpXFxzKicoW14nXSopJy9naSwgKG1hdGNoLCBmaWVsZCwgb3BlcmF0b3IsIHZhbHVlKSA9PiB7XG4gICAgICAvLyBOb3JtYWxpemUgYm90aCBzaWRlcyB0byBVUFBFUkNBU0UuIFRoaXMgd29ya3MgZm9yIEFOWSBmaWVsZCBuYW1lLlxuICAgICAgLy8gV2Uga2VlcCB0aGUgZmllbGQgbmFtZSBcIm5ha2VkXCIgc28gdGhlIGluZGV4IGlzIHVzZWQuXG4gICAgICByZXR1cm4gYCR7ZmllbGR9ICR7b3BlcmF0b3J9ICcke3ZhbHVlLnRvVXBwZXJDYXNlKCl9J2BcbiAgICB9KVxuICAgIFxuICAgIGlmIChvcHRpbWl6ZWRXaGVyZSAhPT0gbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdzcWwtb3B0aW1pemVkJyxcbiAgICAgICAgb3JpZ2luYWw6IG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlLFxuICAgICAgICBvcHRpbWl6ZWQ6IG9wdGltaXplZFdoZXJlXG4gICAgICB9KVxuICAgICAgbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUgPSBvcHRpbWl6ZWRXaGVyZVxuICAgIH1cbiAgfVxuXG4gIC8vIGNvbXBvc2UgcXVlcnkgcGFyYW1zIGZvciBxdWVyeVxuICBjb25zdCBxdWVyeVBhcmFtczogRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMgPSB7XG4gICAgLy8gdXJsOiBkcy51cmwsXG4gICAgcmV0dXJuR2VvbWV0cnk6IHRydWUsXG4gICAgLyoqIFxuICAgICAqIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogRm9yY2UgbG93ZXIgcHJlY2lzaW9uIGZvciBhbGwgZGlzcGxheSBxdWVyaWVzLlxuICAgICAqL1xuICAgIG1heEFsbG93YWJsZU9mZnNldDogMC4xLCBcbiAgICBwYWdlLFxuICAgIC8vIExpbWl0IHBhZ2VTaXplIHRvIGEgc2FuZSBkZWZhdWx0IGlmIG5vdCBwcm92aWRlZCBvciB0b28gbGFyZ2VcbiAgICBwYWdlU2l6ZTogKHBhZ2VTaXplICYmIHBhZ2VTaXplIDwgMTAwMCkgPyBwYWdlU2l6ZSA6IDEwMDAsXG4gICAgLi4ubWVyZ2VkUXVlcnlQYXJhbXNcbiAgfVxuXG4gIC8vIEZpbmFsIG92ZXJyaWRlIHRvIGVuc3VyZSBubyBcIipcIiBsZWFrcyB0aHJvdWdoIGZyb20gYW55IG1lcmdlIG9wZXJhdGlvblxuICBpZiAoIXF1ZXJ5UGFyYW1zLm91dEZpZWxkcyB8fCBxdWVyeVBhcmFtcy5vdXRGaWVsZHMuaW5jbHVkZXMoJyonKSkge1xuICAgIHF1ZXJ5UGFyYW1zLm91dEZpZWxkcyA9IG91dHB1dEZpZWxkc1xuICB9XG5cbiAgLy8gRGlhZ25vc3RpYyBsb2c6IFNob3cgZXhhY3RseSBXSElDSCBmaWVsZHMgYXJlIGJlaW5nIHNlbnRcbiAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgIGV2ZW50OiAncmVxdWVzdGluZy1kYXRhJyxcbiAgICBmaWVsZHNDb3VudDogcXVlcnlQYXJhbXMub3V0RmllbGRzPy5sZW5ndGgsXG4gICAgZmllbGRzOiBxdWVyeVBhcmFtcy5vdXRGaWVsZHM/LmpvaW4oJywgJyksXG4gICAgcGFnZVNpemU6IHF1ZXJ5UGFyYW1zLnBhZ2VTaXplLFxuICAgIG9mZnNldDogcXVlcnlQYXJhbXMubWF4QWxsb3dhYmxlT2Zmc2V0XG4gIH0pXG5cbiAgaWYgKHVzZVNwYXRpYWxGaWx0ZXIgJiYgc3BhdGlhbEZpbHRlcj8uZ2VvbWV0cnkpIHtcbiAgICBjb25zdCB7IGdlb21ldHJ5LCByZWxhdGlvbiA9IFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3QsIGJ1ZmZlciB9ID0gc3BhdGlhbEZpbHRlclxuXG4gICAgY29uc3Qgc3BhdGlhbFF1ZXJ5UGFyYW1zOiBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyA9IHtcbiAgICAgIGdlb21ldHJ5VHlwZTogZGF0YVNvdXJjZVV0aWxzLmNoYW5nZUpTQVBJR2VvbWV0cnlUeXBlVG9SZXN0QVBJR2VvbWV0cnlUeXBlKGdlb21ldHJ5LnR5cGUpLFxuICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LnRvSlNPTigpLFxuICAgICAgc3BhdGlhbFJlbDogbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWxbcmVsYXRpb25dLFxuICAgICAgZGlzdGFuY2U6IGJ1ZmZlcj8uZGlzdGFuY2UsXG4gICAgICB1bml0czogYnVmZmVyPy51bml0ID8gbWFwSlNBUElVbml0VG9Ec1VuaXRbYnVmZmVyLnVuaXRdIDogdW5kZWZpbmVkXG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHNwYXRpYWxRdWVyeVBhcmFtcylcbiAgfVxuXG4gIGlmIChzb3J0T3B0aW9ucz8ubGVuZ3RoID4gMCkge1xuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHtcbiAgICAgIG9yZGVyQnlGaWVsZHM6IHNvcnRPcHRpb25zLm1hcChpdGVtID0+IGAke2l0ZW0uamltdUZpZWxkTmFtZX0gJHtpdGVtLm9yZGVyfWApXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiBxdWVyeVBhcmFtc1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvdW50UXVlcnkgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4pOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBvdXRwdXREUy5sb2FkQ291bnQocXVlcnlQYXJhbXMsIHsgd2lkZ2V0SWQsIHJlZnJlc2g6IHRydWUgfSlcbiAgcmV0dXJuIHJlc3VsdCAhPSBudWxsID8gcmVzdWx0IDogMFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVF1ZXJ5IChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBxdWVyeVBhcmFtczogUXVlcnlQYXJhbXNcbik6IFByb21pc2U8eyByZWNvcmRzPzogRGF0YVJlY29yZFtdLCBmaWVsZHM/OiBzdHJpbmdbXSB9PiB7XG4gIGNvbnN0IHBvcHVwSW5mbyA9IG91dHB1dERTLmdldFBvcHVwSW5mbygpXG5cbiAgY29uc3QgbGF5ZXJEZWZpbml0aW9uID0gb3V0cHV0RFMuZ2V0TGF5ZXJEZWZpbml0aW9uKClcbiAgY29uc3QgZ2V0RGVmYXVsdEZpZWxkSW5mb3MgPSAoKSA9PlxuICAgIFtcbiAgICAgIHsgZmllbGROYW1lOiBsYXllckRlZmluaXRpb24/Lm9iamVjdElkRmllbGQgPz8gJ29iamVjdGlkJywgbGFiZWw6ICdPQkpFQ1RJRCcsIHRvb2x0aXA6ICcnLCB2aXNpYmxlOiB0cnVlIH1cbiAgICBdIGFzIElGaWVsZEluZm9bXVxuICBjb25zdCBmaWVsZEluZm9zID0gKChmaWVsZEluZm9zKSA9PiAoZmllbGRJbmZvcy5sZW5ndGggPyBmaWVsZEluZm9zIDogZ2V0RGVmYXVsdEZpZWxkSW5mb3MoKSkpKFxuICAgIChwb3B1cEluZm8/LmZpZWxkSW5mb3MgfHwgW10pLmZpbHRlcigoaSkgPT4gaS52aXNpYmxlKVxuICApXG4gIC8vIGNvbnN0IGZpZWxkcyA9IG91dHB1dERTLmdldFNjaGVtYSgpPy5maWVsZHNcbiAgLy8gbGV0IHNlbGVjdGVkRmllbGROYW1lc1xuICAvLyBpZiAocXVlcnlJdGVtLnJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcykge1xuICAvLyAgIHNlbGVjdGVkRmllbGROYW1lcyA9IFtdLmNvbmNhdChxdWVyeUl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcywgcXVlcnlJdGVtLnJlc3VsdFRpdGxlRmllbGRzKVxuICAvLyB9IGVsc2Uge1xuICAvLyAgIHNlbGVjdGVkRmllbGROYW1lcyA9IGZpZWxkSW5mb3MubWFwKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby5maWVsZE5hbWUpXG4gIC8vIH1cbiAgLy8gY29uc3Qgc2VsZWN0ZWRGaWVsZEppbXVOYW1lcyA9IGZpZWxkc1xuICAvLyAgID8gT2JqZWN0LmtleXMoZmllbGRzKS5maWx0ZXIoKGppbXVOYW1lKSA9PiBzZWxlY3RlZEZpZWxkTmFtZXMuaW5jbHVkZXMoZmllbGRzW2ppbXVOYW1lXS5uYW1lKSlcbiAgLy8gICA6IFtdXG4gIC8vIG91dHB1dERTLnNldFNlbGVjdGVkRmllbGRzKHNlbGVjdGVkRmllbGRKaW11TmFtZXMpXG4gIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gIGxldCByZWNvcmRzID0gYXdhaXQgb3V0cHV0RFMubG9hZChxdWVyeVBhcmFtcywgeyB3aWRnZXRJZCB9KVxuICBjb25zdCBmZXRjaFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICBcbiAgaWYgKHJlY29yZHMgPT0gbnVsbCkge1xuICAgIHJlY29yZHMgPSBbXVxuICB9XG4gIGNvbnN0IG9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIFxuICBjb25zdCBsYXllclN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gIGNvbnN0IGxheWVyT2JqZWN0ID0gYXdhaXQgZ2V0TGF5ZXJPYmplY3Qob3JpZ2luRHMpXG4gIGNvbnN0IGxheWVyVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gbGF5ZXJTdGFydFRpbWVcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgZXZlbnQ6ICdxdWVyeS1jb21wbGV0ZScsXG4gICAgZmV0Y2hUaW1lOiBNYXRoLnJvdW5kKGZldGNoVGltZSksXG4gICAgbGF5ZXJUaW1lOiBNYXRoLnJvdW5kKGxheWVyVGltZSksXG4gICAgdG90YWxUaW1lOiBNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lKSxcbiAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIHJlY29yZHMuZm9yRWFjaCgocmVjb3JkKSA9PiB7XG4gICAgY29uc3QgZmVhdHVyZSA9IChyZWNvcmQgYXMgYW55KS5mZWF0dXJlXG4gICAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgICBmZWF0dXJlLnNvdXJjZUxheWVyID0gKGxheWVyT2JqZWN0IGFzIGFueSkuYXNzb2NpYXRlZExheWVyIHx8IGxheWVyT2JqZWN0XG4gICAgfVxuICAgIGZlYXR1cmUubGF5ZXIgPSBmZWF0dXJlLnNvdXJjZUxheWVyXG4gIH0pXG4gIGNvbnN0IHF1ZXJ5UmVzdWx0ID0ge1xuICAgIHJlY29yZHMsXG4gICAgZmllbGRzOiBmaWVsZEluZm9zLm1hcCgoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICB9XG5cbiAgLy8gcHVibGlzaCBtZXNzYWdlXG4gIGNvbnN0IGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlID0gbmV3IERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKHdpZGdldElkLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLkNyZWF0ZVVwZGF0ZSwgW3tcbiAgICByZWNvcmRzOiBvdXRwdXREUy5nZXRBbGxMb2FkZWRSZWNvcmRzKCksXG4gICAgZmllbGRzOiBxdWVyeVJlc3VsdC5maWVsZHMsXG4gICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgbmFtZTogb3V0cHV0RFMuaWQsXG4gICAgbGFiZWw6IG91dHB1dERTLmdldExhYmVsKClcbiAgfV0pXG4gIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UpXG5cbiAgcmV0dXJuIHF1ZXJ5UmVzdWx0XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldExheWVyT2JqZWN0IChkYXRhU291cmNlOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKSB7XG4gIGNvbnN0IGxheWVyT2JqZWN0ID0gYXdhaXQgZGF0YVNvdXJjZS5jcmVhdGVKU0FQSUxheWVyQnlEYXRhU291cmNlKCkgYXMgX19lc3JpLkxheWVyXG4gIC8vIGxheWVyT2JqZWN0IG1heSBiZSB1bmRlZmluZWQgaWYgdGhlIGRhdGEgc291cmNlIGlzIGFkZGVkIGJ5IFVSTFxuICBpZiAobGF5ZXJPYmplY3QpIHtcbiAgICBhd2FpdCBsYXllck9iamVjdC5sb2FkKClcbiAgfVxuICByZXR1cm4gbGF5ZXJPYmplY3Rcbn1cblxuXG4iLCIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyByZXN1bHRzIGFjY3VtdWxhdGlvbiBpbiBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBIYW5kbGVzIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcyBmb3IgYWNjdW11bGF0aW5nIHF1ZXJ5IHJlc3VsdHMuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZCwgRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IERhdGFTb3VyY2VNYW5hZ2VyLCBEYXRhU291cmNlU3RhdHVzLCBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UsIFJlY29yZFNldENoYW5nZVR5cGUsIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IHJlbW92ZUhpZ2hsaWdodEdyYXBoaWNzIH0gZnJvbSAnLi9ncmFwaGljcy1sYXllci11dGlscydcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBjb21wb3NpdGUga2V5IGZvciBhIHJlY29yZCB0aGF0IGluY2x1ZGVzIGJvdGggb3JpZ2luIGRhdGEgc291cmNlIElEIGFuZCBvYmplY3RJZC5cbiAqIFRoaXMgZW5zdXJlcyB1bmlxdWVuZXNzIGFjcm9zcyBkaWZmZXJlbnQgbGF5ZXJzIHRoYXQgbWF5IGhhdmUgdGhlIHNhbWUgb2JqZWN0SWQuXG4gKiBcbiAqIEBwYXJhbSByZWNvcmQgLSBUaGUgZmVhdHVyZSBkYXRhIHJlY29yZFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSBjb250YWluaW5nIHRoZSByZWNvcmRcbiAqIEByZXR1cm5zIENvbXBvc2l0ZSBrZXkgc3RyaW5nOiBgJHtvcmlnaW5EU0lkfV8ke29iamVjdElkfWBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlY29yZEtleShcbiAgcmVjb3JkOiBGZWF0dXJlRGF0YVJlY29yZCxcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IHN0cmluZyB7XG4gIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgY29uc3Qgb3JpZ2luRFNJZCA9IG9yaWdpbkRTPy5pZCB8fCBvdXRwdXREUy5pZCAvLyBGYWxsYmFjayB0byBvdXRwdXREUyBpZiBubyBvcmlnaW5cbiAgY29uc3Qgb2JqZWN0SWQgPSByZWNvcmQuZ2V0SWQoKVxuICBjb25zdCBrZXkgPSBgJHtvcmlnaW5EU0lkfV8ke29iamVjdElkfWBcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVjb3JkLWtleS1nZW5lcmF0ZWQnLFxuICAgIG9yaWdpbkRTSWQsXG4gICAgb2JqZWN0SWQsXG4gICAga2V5LFxuICAgIGhhc09yaWdpbkRTOiAhIW9yaWdpbkRTXG4gIH0pXG4gIFxuICByZXR1cm4ga2V5XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlIGZvciBzdG9yaW5nIG1lcmdlZCBxdWVyeSByZXN1bHRzLlxuICogVGhpcyBkYXRhIHNvdXJjZSBpcyB3aWRnZXQtbGV2ZWwgYW5kIHBlcnNpc3RzIGFjcm9zcyBtdWx0aXBsZSBxdWVyaWVzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gb3JpZ2luRFMgLSBUaGUgb3JpZ2luIGRhdGEgc291cmNlIHRvIHVzZSBhcyB0aGUgYmFzZVxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQWNjdW11bGF0ZWRSZXN1bHRzRGF0YVNvdXJjZShcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IFByb21pc2U8RmVhdHVyZUxheWVyRGF0YVNvdXJjZT4ge1xuICBjb25zdCBhY2N1bXVsYXRlZERTSWQgPSBgJHt3aWRnZXRJZH1fYWNjdW11bGF0ZWRfcmVzdWx0c2BcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnY3JlYXRpbmctYWNjdW11bGF0ZWQtZHMnLFxuICAgIHdpZGdldElkLFxuICAgIGFjY3VtdWxhdGVkRFNJZCxcbiAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZFxuICB9KVxuICBcbiAgLy8gQ2hlY2sgaWYgZGF0YSBzb3VyY2UgYWxyZWFkeSBleGlzdHNcbiAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICBsZXQgYWNjdW11bGF0ZWREUyA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlKGFjY3VtdWxhdGVkRFNJZCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBcbiAgaWYgKGFjY3VtdWxhdGVkRFMpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtZHMtYWxyZWFkeS1leGlzdHMnLFxuICAgICAgYWNjdW11bGF0ZWREU0lkXG4gICAgfSlcbiAgICByZXR1cm4gYWNjdW11bGF0ZWREU1xuICB9XG4gIFxuICAvLyBHZXQgb3JpZ2luIGRhdGEgc291cmNlIEpTT04gdG8gY3JlYXRlIG91dHB1dCBkYXRhIHNvdXJjZVxuICBjb25zdCBvcmlnaW5EYXRhU291cmNlSnNvbiA9IG9yaWdpbkRTLmdldERhdGFTb3VyY2VKc29uKClcbiAgXG4gIC8vIENyZWF0ZSBvdXRwdXQgZGF0YSBzb3VyY2UgSlNPTiBzaW1pbGFyIHRvIGhvdyBxdWVyeSBpdGVtcyBjcmVhdGUgb3V0cHV0IERTXG4gIGNvbnN0IG91dHB1dERhdGFTb3VyY2VKc29uID0ge1xuICAgIGlkOiBhY2N1bXVsYXRlZERTSWQsXG4gICAgbGFiZWw6ICdBY2N1bXVsYXRlZCBSZXN1bHRzJyxcbiAgICB0eXBlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8udHlwZSxcbiAgICBnZW9tZXRyeVR5cGU6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5nZW9tZXRyeVR5cGUsXG4gICAgdXJsOiBvcmlnaW5EYXRhU291cmNlSnNvbj8udXJsLFxuICAgIGl0ZW1JZDogb3JpZ2luRGF0YVNvdXJjZUpzb24/Lml0ZW1JZCxcbiAgICBwb3J0YWxVcmw6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5wb3J0YWxVcmwsXG4gICAgb3JpZ2luRGF0YVNvdXJjZXM6IFt7XG4gICAgICBkYXRhU291cmNlSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgbWFpbkRhdGFTb3VyY2VJZDogb3JpZ2luRFMuaWQsXG4gICAgICByb290RGF0YVNvdXJjZUlkOiBvcmlnaW5EUy5pZFxuICAgIH1dLFxuICAgIGxheWVySWQ6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5sYXllcklkLFxuICAgIGlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8uaXNEYXRhSW5EYXRhU291cmNlSW5zdGFuY2UsXG4gICAgaXNPdXRwdXRGcm9tV2lkZ2V0OiB0cnVlXG4gIH1cbiAgXG4gIC8vIENyZWF0ZSB0aGUgZGF0YSBzb3VyY2UgdXNpbmcgRGF0YVNvdXJjZU1hbmFnZXJcbiAgLy8gTm90ZTogVGhpcyBmb2xsb3dzIHRoZSBwYXR0ZXJuIGZyb20gc2V0dGluZy50c3ggZm9yIGNyZWF0aW5nIG91dHB1dCBkYXRhIHNvdXJjZXNcbiAgYWNjdW11bGF0ZWREUyA9IGRzTWFuYWdlci5jcmVhdGVEYXRhU291cmNlQnlEYXRhU291cmNlSnNvbihvdXRwdXREYXRhU291cmNlSnNvbikgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBcbiAgLy8gU2V0IGluaXRpYWwgc3RhdHVzXG4gIGFjY3VtdWxhdGVkRFMuc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIGFjY3VtdWxhdGVkRFMuc2V0Q291bnRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtZHMtY3JlYXRlZCcsXG4gICAgYWNjdW11bGF0ZWREU0lkLFxuICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgIHN0YXR1czogYWNjdW11bGF0ZWREUy5nZXRTdGF0dXMoKVxuICB9KVxuICBcbiAgcmV0dXJuIGFjY3VtdWxhdGVkRFNcbn1cblxuLyoqXG4gKiBNZXJnZXMgbmV3IHF1ZXJ5IHJlc3VsdHMgd2l0aCBleGlzdGluZyByZWNvcmRzLlxuICogRGVkdXBsaWNhdGVzIHJlY29yZHMgdXNpbmcgY29tcG9zaXRlIGtleXMgKG9yaWdpbkRTSWRfb2JqZWN0SWQpLlxuICogXG4gKiBUaGlzIGZ1bmN0aW9uIG1lcmdlcyBuZXcgcmVjb3JkcyB3aXRoIGV4aXN0aW5nIHJlY29yZHMgdGhhdCB3ZXJlIGNhcHR1cmVkXG4gKiBiZWZvcmUgdGhlIHF1ZXJ5IGV4ZWN1dGVkLiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciBzdG9yaW5nIHRoZSBtZXJnZWRcbiAqIHJlY29yZHMgKHR5cGljYWxseSBpbiByZWNvcmRzUmVmIG9yIHN0YXRlKS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKiBAcGFyYW0gbmV3UmVjb3JkcyAtIE5ldyByZWNvcmRzIHRvIG1lcmdlIGluXG4gKiBAcGFyYW0gZXhpc3RpbmdSZWNvcmRzIC0gRXhpc3RpbmcgcmVjb3JkcyBjYXB0dXJlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIChvcHRpb25hbCwgZGVmYXVsdHMgdG8gZW1wdHkgYXJyYXkpXG4gKiBAcmV0dXJucyBBcnJheSBvZiBhbGwgbWVyZ2VkIHJlY29yZHMgKGV4aXN0aW5nICsgbmV3IHVuaXF1ZSByZWNvcmRzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgbmV3UmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgZXhpc3RpbmdSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbik6IEZlYXR1cmVEYXRhUmVjb3JkW10ge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ21lcmdpbmctcmVzdWx0cy1zdGFydCcsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgZXhpc3RpbmdSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgbmV3UmVjb3Jkc0NvdW50OiBuZXdSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgLy8gQnVpbGQgU2V0IG9mIGV4aXN0aW5nIHJlY29yZCBrZXlzIGZvciBmYXN0IGxvb2t1cFxuICBjb25zdCBleGlzdGluZ0tleXMgPSBuZXcgU2V0KFxuICAgIGV4aXN0aW5nUmVjb3Jkcy5tYXAocmVjb3JkID0+IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKSlcbiAgKVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdleGlzdGluZy1yZWNvcmRzLWNoZWNrJyxcbiAgICBleGlzdGluZ1JlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzLmxlbmd0aCxcbiAgICBleGlzdGluZ0tleXNDb3VudDogZXhpc3RpbmdLZXlzLnNpemVcbiAgfSlcbiAgXG4gIC8vIEZpbHRlciBuZXcgcmVjb3JkcyB0byBvbmx5IGluY2x1ZGUgdGhvc2Ugbm90IGFscmVhZHkgaW4gb3V0cHV0IERTXG4gIGNvbnN0IHVuaXF1ZU5ld1JlY29yZHMgPSBuZXdSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4ge1xuICAgIGNvbnN0IGtleSA9IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKVxuICAgIGNvbnN0IGlzRHVwbGljYXRlID0gZXhpc3RpbmdLZXlzLmhhcyhrZXkpXG4gICAgXG4gICAgaWYgKGlzRHVwbGljYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdkdXBsaWNhdGUtcmVjb3JkLXNraXBwZWQnLFxuICAgICAgICBrZXksXG4gICAgICAgIG9iamVjdElkOiByZWNvcmQuZ2V0SWQoKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuICFpc0R1cGxpY2F0ZVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdkZWR1cGxpY2F0aW9uLWNvbXBsZXRlJyxcbiAgICBuZXdSZWNvcmRzQ291bnQ6IG5ld1JlY29yZHMubGVuZ3RoLFxuICAgIHVuaXF1ZU5ld1JlY29yZHNDb3VudDogdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGgsXG4gICAgZHVwbGljYXRlc1NraXBwZWQ6IG5ld1JlY29yZHMubGVuZ3RoIC0gdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIE1lcmdlIHJlY29yZHNcbiAgY29uc3QgbWVyZ2VkUmVjb3JkcyA9IFsuLi5leGlzdGluZ1JlY29yZHMsIC4uLnVuaXF1ZU5ld1JlY29yZHNdXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ21lcmdlLWNvbXBsZXRlJyxcbiAgICB0b3RhbFJlY29yZHNBZnRlck1lcmdlOiBtZXJnZWRSZWNvcmRzLmxlbmd0aCxcbiAgICBleGlzdGluZ0NvdW50OiBleGlzdGluZ1JlY29yZHMubGVuZ3RoLFxuICAgIG5ld1VuaXF1ZUNvdW50OiB1bmlxdWVOZXdSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgcmV0dXJuIG1lcmdlZFJlY29yZHNcbn1cblxuLyoqXG4gKiBSZW1vdmVzIG1hdGNoaW5nIHJlY29yZHMgZnJvbSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAqIE1hdGNoZXMgcmVjb3JkcyB1c2luZyBjb21wb3NpdGUga2V5cyAob3JpZ2luRFNJZF9vYmplY3RJZCkuXG4gKiBcbiAqIFRoaXMgZnVuY3Rpb24gcmVtb3ZlcyByZWNvcmRzIGZyb20gZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyB0aGF0IHdlcmUgY2FwdHVyZWRcbiAqIGJlZm9yZSB0aGUgcXVlcnkgZXhlY3V0ZWQuIFRoZSBjYWxsZXIgaXMgcmVzcG9uc2libGUgZm9yIHN0b3JpbmcgdGhlIHJlbWFpbmluZ1xuICogcmVjb3JkcyAodHlwaWNhbGx5IGluIHJlY29yZHNSZWYgb3Igc3RhdGUpLlxuICogXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBrZXkgZ2VuZXJhdGlvbilcbiAqIEBwYXJhbSByZWNvcmRzVG9SZW1vdmUgLSBSZWNvcmRzIHRvIHJlbW92ZSAoZnJvbSBxdWVyeSByZXN1bHRzKVxuICogQHBhcmFtIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzIC0gRXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyBjYXB0dXJlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIChvcHRpb25hbCwgZGVmYXVsdHMgdG8gZW1wdHkgYXJyYXkpXG4gKiBAcmV0dXJucyBBcnJheSBvZiByZW1haW5pbmcgcmVjb3JkcyBhZnRlciByZW1vdmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcmVjb3Jkc1RvUmVtb3ZlOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4pOiBGZWF0dXJlRGF0YVJlY29yZFtdIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmluZy1yZXN1bHRzLXN0YXJ0JyxcbiAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIElmIG5vIGFjY3VtdWxhdGVkIHJlY29yZHMsIG5vdGhpbmcgdG8gcmVtb3ZlXG4gIGlmIChleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnbm8tYWNjdW11bGF0ZWQtcmVjb3Jkcy10by1yZW1vdmUnLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWRcbiAgICB9KVxuICAgIHJldHVybiBbXVxuICB9XG4gIFxuICAvLyBJZiBubyByZWNvcmRzIHRvIHJlbW92ZSwgcmV0dXJuIGV4aXN0aW5nIHJlY29yZHMgdW5jaGFuZ2VkXG4gIGlmIChyZWNvcmRzVG9SZW1vdmUubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLXJlY29yZHMtdG8tcmVtb3ZlJyxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgfSlcbiAgICByZXR1cm4gZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNcbiAgfVxuICBcbiAgLy8gQnVpbGQgU2V0IG9mIGtleXMgdG8gcmVtb3ZlIGZvciBmYXN0IGxvb2t1cFxuICBjb25zdCByZW1vdmVLZXlzID0gbmV3IFNldChcbiAgICByZWNvcmRzVG9SZW1vdmUubWFwKHJlY29yZCA9PiBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUykpXG4gIClcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZlLWtleXMtYnVpbHQnLFxuICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICByZW1vdmVLZXlzQ291bnQ6IHJlbW92ZUtleXMuc2l6ZVxuICB9KVxuICBcbiAgLy8gRmlsdGVyIG91dCByZWNvcmRzIHRoYXQgbWF0Y2gga2V5cyB0byByZW1vdmVcbiAgY29uc3QgcmVtYWluaW5nUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gIGNvbnN0IHJlbW92ZWRSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgXG4gIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICBjb25zdCBrZXkgPSBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUylcbiAgICBjb25zdCBzaG91bGRSZW1vdmUgPSByZW1vdmVLZXlzLmhhcyhrZXkpXG4gICAgXG4gICAgaWYgKHNob3VsZFJlbW92ZSkge1xuICAgICAgcmVtb3ZlZFJlY29yZHMucHVzaChyZWNvcmQpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZWNvcmQtbWFya2VkLWZvci1yZW1vdmFsJyxcbiAgICAgICAga2V5LFxuICAgICAgICBvYmplY3RJZDogcmVjb3JkLmdldElkKCksXG4gICAgICAgIG9yaWdpbkRTSWQ6IChyZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSk/LmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXT8uaWQgfHwgJ3Vua25vd24nXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZW1haW5pbmdSZWNvcmRzLnB1c2gocmVjb3JkKVxuICAgIH1cbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZhbC1jb21wbGV0ZScsXG4gICAgcmVjb3Jkc1JlbW92ZWQ6IHJlbW92ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoLFxuICAgIG1hdGNoZWRSZWNvcmRzQ291bnQ6IHJlbW92ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICB1bm1hdGNoZWRSZWNvcmRzQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGggLSByZW1vdmVkUmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIHJldHVybiByZW1haW5pbmdSZWNvcmRzXG59XG5cbi8qKlxuICogUmVtb3ZlcyByZWNvcmRzIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMuXG4gKiBHcm91cHMgcmVjb3JkcyBieSB0aGVpciBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIHVwZGF0ZXMgZWFjaCBvcmlnaW4gRFMncyBzZWxlY3Rpb24gc2VwYXJhdGVseS5cbiAqIFRoaXMgZW5zdXJlcyBtYXAgc2VsZWN0aW9uIGlzIHVwZGF0ZWQgY29ycmVjdGx5IHdoZW4gcmVjb3JkcyBjb21lIGZyb20gbXVsdGlwbGUgb3JpZ2luIGxheWVycy5cbiAqIEFsc28gcmVtb3ZlcyBncmFwaGljcyBmcm9tIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRCBmb3IgcHVibGlzaGluZyBtZXNzYWdlc1xuICogQHBhcmFtIHJlY29yZHNUb1JlbW92ZSAtIFJlY29yZHMgdG8gcmVtb3ZlIGZyb20gc2VsZWN0aW9uXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBrZXkgZ2VuZXJhdGlvbilcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byByZW1vdmUgZ3JhcGhpY3MgZnJvbSBncmFwaGljcyBsYXllciAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZHNUb1JlbW92ZTogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHVzZUdyYXBoaWNzTGF5ZXI/OiBib29sZWFuLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbik6IHZvaWQge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92aW5nLXJlY29yZHMtZnJvbS1vcmlnaW4tc2VsZWN0aW9ucy1zdGFydCcsXG4gICAgd2lkZ2V0SWQsXG4gICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgdXNlR3JhcGhpY3NMYXllcjogISF1c2VHcmFwaGljc0xheWVyLFxuICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhZ3JhcGhpY3NMYXllclxuICB9KVxuICBcbiAgaWYgKHJlY29yZHNUb1JlbW92ZS5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnbm8tcmVjb3Jkcy10by1yZW1vdmUtZnJvbS1zZWxlY3Rpb24nLFxuICAgICAgd2lkZ2V0SWRcbiAgICB9KVxuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBSZW1vdmUgZnJvbSBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmdcbiAgaWYgKHVzZUdyYXBoaWNzTGF5ZXIgJiYgZ3JhcGhpY3NMYXllcikge1xuICAgIGNvbnN0IHJlY29yZElkc1RvUmVtb3ZlID0gcmVjb3Jkc1RvUmVtb3ZlLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgXG4gICAgLy8gRklYIChyMDE4LjgyKTogQ2FwdHVyZSBUUlVFIFwiYmVmb3JlXCIgc3RhdGUgQkVGT1JFIHJlbW92aW5nIGdyYXBoaWNzXG4gICAgY29uc3QgZ3JhcGhpY3NCZWZvcmVSZW1vdmFsOiAoc3RyaW5nIHwgbnVsbClbXSA9IFtdXG4gICAgY29uc3QgZmlyc3RGZXdHcmFwaGljc0F0dHJzOiBhbnlbXSA9IFtdXG4gICAgZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/LmZvckVhY2goKGcsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaW5kZXggPCAzKSB7XG4gICAgICAgIGZpcnN0RmV3R3JhcGhpY3NBdHRycy5wdXNoKHtcbiAgICAgICAgICBpbmRleCxcbiAgICAgICAgICBoYXNBdHRyaWJ1dGVzOiAhIWcuYXR0cmlidXRlcyxcbiAgICAgICAgICBhdHRyaWJ1dGVzOiBnLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgYXR0cmlidXRlS2V5czogZy5hdHRyaWJ1dGVzID8gT2JqZWN0LmtleXMoZy5hdHRyaWJ1dGVzKSA6IFtdXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBncmFwaGljc0JlZm9yZVJlbW92YWwucHVzaChnLmF0dHJpYnV0ZXM/LnJlY29yZElkIHx8IG51bGwpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZpbmctZ3JhcGhpY3MtVFJVRS1CRUZPUkUtc3RhdGUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZWNvcmRJZHNUb1JlbW92ZSxcbiAgICAgIGdyYXBoaWNzTGF5ZXJDb3VudEJlZm9yZTogZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGgsXG4gICAgICBncmFwaGljc0xheWVySWRzQmVmb3JlOiBncmFwaGljc0JlZm9yZVJlbW92YWwuc2xpY2UoMCwgMTEwKSxcbiAgICAgIGZpcnN0RmV3R3JhcGhpY3NBdHRycyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgcmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MoZ3JhcGhpY3NMYXllciwgcmVjb3JkSWRzVG9SZW1vdmUpXG4gICAgXG4gICAgLy8gRklYIChyMDE4LjgyKTogQ2FwdHVyZSBUUlVFIFwiYWZ0ZXJcIiBzdGF0ZSBBRlRFUiByZW1vdmluZyBncmFwaGljc1xuICAgIGNvbnN0IGdyYXBoaWNzQWZ0ZXJSZW1vdmFsOiAoc3RyaW5nIHwgbnVsbClbXSA9IFtdXG4gICAgZ3JhcGhpY3NMYXllcj8uZ3JhcGhpY3M/LmZvckVhY2goKGcpID0+IHtcbiAgICAgIGdyYXBoaWNzQWZ0ZXJSZW1vdmFsLnB1c2goZy5hdHRyaWJ1dGVzPy5yZWNvcmRJZCB8fCBudWxsKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3JlbW92aW5nLWdyYXBoaWNzLVRSVUUtQUZURVItc3RhdGUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBncmFwaGljc0xheWVyQ291bnRBZnRlcjogZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGgsXG4gICAgICBncmFwaGljc0xheWVySWRzQWZ0ZXI6IGdyYXBoaWNzQWZ0ZXJSZW1vdmFsLnNsaWNlKDAsIDExMCksXG4gICAgICBhY3R1YWxseVJlbW92ZWQ6IGdyYXBoaWNzQmVmb3JlUmVtb3ZhbC5sZW5ndGggLSBncmFwaGljc0FmdGVyUmVtb3ZhbC5sZW5ndGgsXG4gICAgICBleHBlY3RlZFRvUmVtb3ZlOiByZWNvcmRJZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgICByZW1vdmFsTWF0Y2hlczogKGdyYXBoaWNzQmVmb3JlUmVtb3ZhbC5sZW5ndGggLSBncmFwaGljc0FmdGVyUmVtb3ZhbC5sZW5ndGgpID09PSByZWNvcmRJZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG4gIFxuICAvLyBHcm91cCByZWNvcmRzIGJ5IHRoZWlyIG9yaWdpbiBkYXRhIHNvdXJjZVxuICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICBcbiAgcmVjb3Jkc1RvUmVtb3ZlLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICBcbiAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2s6IHRyeSB0byBnZXQgb3JpZ2luIGZyb20gb3V0cHV0RFNcbiAgICAgIG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgbnVsbFxuICAgIH1cbiAgICBcbiAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICByZWNvcmRzQnlPcmlnaW5EUy5zZXQob3JpZ2luRFMsIFtdKVxuICAgICAgfVxuICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgfVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZWNvcmRzLWdyb3VwZWQtYnktb3JpZ2luJyxcbiAgICB3aWRnZXRJZCxcbiAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplLFxuICAgIHJlY29yZHNCeU9yaWdpbkRTOiBBcnJheS5mcm9tKHJlY29yZHNCeU9yaWdpbkRTLmVudHJpZXMoKSkubWFwKChbZHMsIHJlY29yZHNdKSA9PiAoe1xuICAgICAgb3JpZ2luRFNJZDogZHMuaWQsXG4gICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgICB9KSlcbiAgfSlcbiAgXG4gIC8vIEZvciBlYWNoIG9yaWdpbiBEUywgZ2V0IGN1cnJlbnQgc2VsZWN0aW9uIGFuZCByZW1vdmUgbWF0Y2hpbmcgcmVjb3Jkc1xuICByZWNvcmRzQnlPcmlnaW5EUy5mb3JFYWNoKChyZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4sIG9yaWdpbkRTKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBjdXJyZW50IHNlbGVjdGVkIHJlY29yZHMgZnJvbSB0aGlzIG9yaWdpbiBEU1xuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkUmVjb3JkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkcygpIHx8IFtdXG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3Byb2Nlc3Npbmctb3JpZ2luLWRzLXJlbW92YWwnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGN1cnJlbnRTZWxlY3RlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZUZvck9yaWdpbi5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIEJ1aWxkIFNldCBvZiBJRHMgdG8gcmVtb3ZlIGZvciBmYXN0IGxvb2t1cFxuICAgICAgY29uc3QgaWRzVG9SZW1vdmUgPSBuZXcgU2V0KFxuICAgICAgICByZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4ubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gRmlsdGVyIG91dCByZWNvcmRzIHRoYXQgbWF0Y2ggSURzIHRvIHJlbW92ZVxuICAgICAgY29uc3QgcmVtYWluaW5nUmVjb3JkcyA9IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgcmV0dXJuICFpZHNUb1JlbW92ZS5oYXMocmVjb3JkSWQpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCByZW1haW5pbmdJZHMgPSByZW1haW5pbmdSZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1yZW1vdmFsLWZpbHRlcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICByZW1vdmVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMubGVuZ3RoIC0gcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlbWFpbmluZ0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvbiBpbiBvcmlnaW4gRFNcbiAgICAgIGlmICh0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhyZW1haW5pbmdJZHMsIHJlbWFpbmluZ1JlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUHVibGlzaCBzZWxlY3Rpb24gY2hhbmdlIG1lc3NhZ2UgZm9yIHRoaXMgb3JpZ2luIERTXG4gICAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZW1haW5pbmdSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sIFtvcmlnaW5EUy5pZF0pXG4gICAgICApXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1zZWxlY3Rpb24tdXBkYXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgbWVzc2FnZVB1Ymxpc2hlZDogdHJ1ZVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnb3JpZ2luLWRzLXJlbW92YWwtZXJyb3InLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICB9KVxuICAgIH1cbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZpbmctcmVjb3Jkcy1mcm9tLW9yaWdpbi1zZWxlY3Rpb25zLWNvbXBsZXRlJyxcbiAgICB3aWRnZXRJZCxcbiAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplLFxuICAgIHRvdGFsUmVjb3Jkc1JlbW92ZWQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGhcbiAgfSlcbn1cblxuLyoqXG4gKiBDbGVhcnMgYWxsIHJlY29yZHMgZnJvbSB0aGUgYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZS5cbiAqIFxuICogQHBhcmFtIGFjY3VtdWxhdGVkRFMgLSBUaGUgYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZSB0byBjbGVhclxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBY2N1bXVsYXRlZFJlc3VsdHMoXG4gIGFjY3VtdWxhdGVkRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IHZvaWQge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2NsZWFyaW5nLWFjY3VtdWxhdGVkLXJlc3VsdHMnLFxuICAgIGFjY3VtdWxhdGVkRFNJZDogYWNjdW11bGF0ZWREUy5pZFxuICB9KVxuICBcbiAgLy8gU2V0IHN0YXR1cyB0byBOb3RSZWFkeSB0byBjbGVhciByZWNvcmRzXG4gIGFjY3VtdWxhdGVkRFMuc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIGFjY3VtdWxhdGVkRFMuc2V0Q291bnRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgXG4gIC8vIENsZWFyIGFueSBsb2FkZWQgcmVjb3JkcyBpZiBwb3NzaWJsZVxuICAvLyBOb3RlOiBNYXkgbmVlZCB0byB1c2UgRGF0YVNvdXJjZU1hbmFnZXIgbWV0aG9kcyBkZXBlbmRpbmcgb24gRXhCIEFQSVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1yZXN1bHRzLWNsZWFyZWQnLFxuICAgIGFjY3VtdWxhdGVkRFNJZDogYWNjdW11bGF0ZWREUy5pZFxuICB9KVxufVxuXG4iLCIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBmZWF0dXJlIHNlbGVjdGlvbiBpbiBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBDb25zb2xpZGF0ZXMgcmVwZWF0ZWQgc2VsZWN0aW9uIGxvZ2ljIHRvIGZvbGxvdyBEUlkgcHJpbmNpcGxlcy5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IERhdGFTb3VyY2UsIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTWVzc2FnZU1hbmFnZXIsIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGFkZEhpZ2hsaWdodEdyYXBoaWNzIGFzIGFkZEdyYXBoaWNzTGF5ZXJHcmFwaGljcywgY2xlYXJHcmFwaGljc0xheWVyIH0gZnJvbSAnLi9ncmFwaGljcy1sYXllci11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB0eXBlIHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSAnLi9ob29rcy91c2UtZXZlbnQtaGFuZGxpbmcnXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIFF1ZXJ5U2ltcGxlIHRvIG5vdGlmeSBXaWRnZXQgb2Ygc2VsZWN0aW9uIGNoYW5nZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQgPSAncXVlcnlzaW1wbGUtc2VsZWN0aW9uLWNoYW5nZWQnXG5cbi8qKlxuICogRGlzcGF0Y2hlcyBhIGN1c3RvbSBzZWxlY3Rpb24gZXZlbnQgdG8gdGhlIHdpbmRvdyBzbyB0aGUgbWFpbiBXaWRnZXQgY2FuIHRyYWNrIHN0YXRlLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gcmVjb3JkSWRzIC0gQXJyYXkgb2Ygc2VsZWN0ZWQgcmVjb3JkIElEc1xuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHF1ZXJ5SXRlbUNvbmZpZ0lkIC0gVGhlIGNvbmZpZyBJRCBvZiB0aGUgcXVlcnkgdGhhdCBwcm9kdWNlZCB0aGVzZSByZXN1bHRzXG4gKiBAcGFyYW0gZXZlbnRNYW5hZ2VyIC0gT3B0aW9uYWwgRXZlbnRNYW5hZ2VyIGluc3RhbmNlIGZvciBjb21wYXJpc29uIGxvZ2dpbmcgKENodW5rIDcuMSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZElkczogc3RyaW5nW10sXG4gIG91dHB1dERTOiBEYXRhU291cmNlLFxuICBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nLFxuICBldmVudE1hbmFnZXI/OiBFdmVudE1hbmFnZXJcbik6IHZvaWQge1xuICBjb25zdCBvcmlnaW5EUyA9IGdldE9yaWdpbkRhdGFTb3VyY2Uob3V0cHV0RFMpXG4gIGNvbnN0IGRhdGFTb3VyY2VJZCA9IG9yaWdpbkRTPy5pZFxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgIGV2ZW50OiAnZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCcsXG4gICAgd2lkZ2V0SWQsXG4gICAgcmVjb3JkQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgcXVlcnlJdGVtQ29uZmlnSWRcbiAgfSlcblxuICAvLyBDaHVuayA3OiBEaXNwYXRjaCBzZWxlY3Rpb24gZXZlbnQgdmlhIEV2ZW50TWFuYWdlciAocjAxOC41OSlcbiAgaWYgKGV2ZW50TWFuYWdlcikge1xuICAgIGV2ZW50TWFuYWdlci5kaXNwYXRjaFNlbGVjdGlvbkV2ZW50KHdpZGdldElkLCByZWNvcmRJZHMsIGRhdGFTb3VyY2VJZCwgb3V0cHV0RFMuaWQsIHF1ZXJ5SXRlbUNvbmZpZ0lkKVxuICB9XG59XG5cbi8qKlxuICogR2V0cyB0aGUgb3JpZ2luIGRhdGEgc291cmNlIGZyb20gYW4gb3V0cHV0IGRhdGEgc291cmNlLlxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHJldHVybnMgVGhlIG9yaWdpbiBkYXRhIHNvdXJjZSwgb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcmlnaW5EYXRhU291cmNlKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWRcbik6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsIHtcbiAgaWYgKCFvdXRwdXREUykgcmV0dXJuIG51bGxcbiAgXG4gIC8vIFRyeSB0byBnZXQgb3JpZ2luIGRhdGEgc291cmNlc1xuICBjb25zdCBvcmlnaW5EYXRhU291cmNlcyA9IHR5cGVvZiBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcyA9PT0gJ2Z1bmN0aW9uJyBcbiAgICA/IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCkgXG4gICAgOiBbXVxuICAgIFxuICBpZiAob3JpZ2luRGF0YVNvdXJjZXMgJiYgb3JpZ2luRGF0YVNvdXJjZXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBvcmlnaW5EYXRhU291cmNlc1swXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIH1cbiAgXG4gIC8vIElmIGl0IGRvZXNuJ3QgaGF2ZSBvcmlnaW4gZGF0YSBzb3VyY2VzLCBpdCBtaWdodCBhbHJlYWR5IGJlIGFuIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAvLyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHNob3VsZCBoYXZlIGEgJ2xheWVyJyBwcm9wZXJ0eSBvciAnZ2V0TGF5ZXInIG1ldGhvZFxuICBpZiAoKG91dHB1dERTIGFzIGFueSkubGF5ZXIgfHwgKG91dHB1dERTIGFzIGFueSkuZ2V0TGF5ZXIgfHwgKG91dHB1dERTIGFzIGFueSkudHlwZSA9PT0gJ0ZlYXR1cmVMYXllcicpIHtcbiAgICByZXR1cm4gb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICB9XG4gIFxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIFNlbGVjdHMgcmVjb3JkcyBpbiBib3RoIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIFRoaXMgaXMgdGhlIHN0YW5kYXJkIHBhdHRlcm4gdXNlZCB0aHJvdWdob3V0IHRoZSB3aWRnZXQgZm9yIHNlbGVjdGlvbi5cbiAqIE9wdGlvbmFsbHkgdXNlcyBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHJlY29yZCBJRHMgdG8gc2VsZWN0XG4gKiBAcGFyYW0gcmVjb3JkcyAtIE9wdGlvbmFsIGFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgZm9yIHByb3BlciBoaWdobGlnaHRpbmdcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byB1c2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKiBAcGFyYW0gbWFwVmlldyAtIE1hcCB2aWV3IGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICByZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgXG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgXG4gIC8vIElmIHVzaW5nIGdyYXBoaWNzIGxheWVyLCBhZGQgZ3JhcGhpY3MgZm9yIGhpZ2hsaWdodGluZ1xuICBpZiAodXNlR3JhcGhpY3NMYXllciAmJiBncmFwaGljc0xheWVyICYmIG1hcFZpZXcgJiYgcmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcy11c2luZy1ncmFwaGljcy1sYXllcicsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGF3YWl0IGFkZEdyYXBoaWNzTGF5ZXJHcmFwaGljcyhncmFwaGljc0xheWVyLCByZWNvcmRzLCBtYXBWaWV3KVxuICAgIFxuICAgIC8vIFN0aWxsIHNlbGVjdCBpbiBkYXRhIHNvdXJjZSBmb3Igc3RhdGUgbWFuYWdlbWVudCAoYnV0IGxheWVyIHNlbGVjdGlvbiB3b24ndCBzaG93IGlmIGxheWVyIGlzIG9mZilcbiAgICBpZiAob3JpZ2luRFMgJiYgdHlwZW9mIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgcmVjb3JkcylcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gT3JpZ2luYWwgYmVoYXZpb3I6IHVzZSBsYXllciBzZWxlY3Rpb25cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcy11c2luZy1sYXllci1zZWxlY3Rpb24nLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICB1c2VHcmFwaGljc0xheWVyLFxuICAgICAgaGFzR3JhcGhpY3NMYXllcjogISFncmFwaGljc0xheWVyLFxuICAgICAgaGFzTWFwVmlldzogISFtYXBWaWV3LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBTZWxlY3QgaW4gb3JpZ2luIGRhdGEgc291cmNlICh0aGUgYWN0dWFsIGxheWVyKVxuICAgIGlmIChvcmlnaW5EUyAmJiB0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBMb2cgbGF5ZXIgc3RhdGUgcmlnaHQgYmVmb3JlIHNlbGVjdGlvbiB0byBzZWUgd2hhdCdzIGF2YWlsYWJsZSB3aGVuIHNlbGVjdGlvbiB3b3Jrc1xuICAgICAgY29uc3QgbGF5ZXIgPSAob3JpZ2luRFMgYXMgYW55KS5sYXllciB8fCAob3JpZ2luRFMgYXMgYW55KS5nZXRMYXllcj8uKClcbiAgICAgIGlmIChsYXllcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0UmVjb3Jkc0J5SWRzLWxheWVyLXN0YXRlJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICBoYXNMYXllck1hcDogISEobGF5ZXIgYXMgYW55KS5tYXAsXG4gICAgICAgICAgaGFzTGF5ZXJWaWV3OiAhIShsYXllciBhcyBhbnkpLnZpZXcsXG4gICAgICAgICAgaGFzTGF5ZXJQYXJlbnQ6ICEhKGxheWVyIGFzIGFueSkucGFyZW50LFxuICAgICAgICAgIHBhcmVudFR5cGU6IChsYXllciBhcyBhbnkpLnBhcmVudD8udHlwZSB8fCAnbm9uZScsXG4gICAgICAgICAgcGFyZW50SGFzTWFwOiAhIShsYXllciBhcyBhbnkpLnBhcmVudD8ubWFwLFxuICAgICAgICAgIHBhcmVudEhhc1ZpZXc6ICEhKGxheWVyIGFzIGFueSkucGFyZW50Py52aWV3LFxuICAgICAgICAgIHBhcmVudEhhc1ZpZXdzOiAhIShsYXllciBhcyBhbnkpLnBhcmVudD8udmlld3MsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gICAgfVxuICB9XG4gIFxuICAvLyBBbHdheXMgdXBkYXRlIG91dHB1dERTIGZvciB3aWRnZXQncyBpbnRlcm5hbCBzdGF0ZVxuICBpZiAodHlwZW9mIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGBkYXRhX3NgIHBhcmFtZXRlciBmcm9tIHRoZSBVUkwgaGFzaC5cbiAqIEV4cGVyaWVuY2UgQnVpbGRlciBhdXRvbWF0aWNhbGx5IGFkZHMgYGRhdGFfc2Agd2hlbiBzZWxlY3Rpb25zIGFyZSBtYWRlLFxuICogYnV0IGRvZXNuJ3QgcmVtb3ZlIGl0IHdoZW4gc2VsZWN0aW9ucyBhcmUgY2xlYXJlZCwgY2F1c2luZyBcImRpcnR5IGhhc2hcIiBpc3N1ZXMuXG4gKiBcbiAqIFRoaXMgZnVuY3Rpb24gZW5zdXJlcyB0aGUgaGFzaCBpcyBjbGVhbiB3aGVuIHNlbGVjdGlvbnMgYXJlIGNsZWFyZWQuXG4gKi9cbmZ1bmN0aW9uIGNsZWFyRGF0YVNQYXJhbWV0ZXJGcm9tSGFzaCgpOiB2b2lkIHtcbiAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICBpZiAoIWhhc2gpIHJldHVyblxuICBcbiAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICBcbiAgaWYgKHVybFBhcmFtcy5oYXMoJ2RhdGFfcycpKSB7XG4gICAgdXJsUGFyYW1zLmRlbGV0ZSgnZGF0YV9zJylcbiAgICBjb25zdCBuZXdIYXNoID0gdXJsUGFyYW1zLnRvU3RyaW5nKClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2NsZWFyRGF0YVNQYXJhbWV0ZXJGcm9tSGFzaCcsXG4gICAgICBoYWREYXRhUzogdHJ1ZSxcbiAgICAgIG5ld0hhc2g6IG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJyhlbXB0eSknLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIFVSTCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZWxvYWRcbiAgICAvLyBBbHdheXMgcHJlc2VydmUgcGF0aG5hbWUgYW5kIHF1ZXJ5IHN0cmluZywgb25seSB1cGRhdGUgaGFzaFxuICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgXG4gICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgKG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJycpXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogQ2xlYXJzIHNlbGVjdGlvbiBpbiBib3RoIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIE9wdGlvbmFsbHkgY2xlYXJzIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIG1vZGUuXG4gKiBBbHNvIGNsZWFycyB0aGUgYGRhdGFfc2AgcGFyYW1ldGVyIGZyb20gdGhlIFVSTCBoYXNoIHRvIHByZXZlbnQgXCJkaXJ0eSBoYXNoXCIgaXNzdWVzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIChuZWVkZWQgdG8gcHVibGlzaCBtZXNzYWdlKVxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHVzZUdyYXBoaWNzTGF5ZXIgLSBXaGV0aGVyIHRvIGNsZWFyIGdyYXBoaWNzIGxheWVyIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSBncmFwaGljc0xheWVyIC0gR3JhcGhpY3MgbGF5ZXIgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyAoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbik6IFByb21pc2U8dm9pZD4ge1xuICAvLyBDbGVhciBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBtb2RlXG4gIGlmICh1c2VHcmFwaGljc0xheWVyICYmIGdyYXBoaWNzTGF5ZXIpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMtY2xlYXJpbmctZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBjbGVhckdyYXBoaWNzTGF5ZXIoZ3JhcGhpY3NMYXllcilcbiAgfVxuXG4gIC8vIENsZWFyIGRhdGEgc291cmNlIHNlbGVjdGlvbiBmb3Igc3RhdGUgbWFuYWdlbWVudFxuICBhd2FpdCBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhvdXRwdXREUywgW10sIHVuZGVmaW5lZCwgZmFsc2UpXG5cbiAgLy8gUHVibGlzaCB0aGUgZW1wdHkgc2VsZWN0aW9uIG1lc3NhZ2Ugc28gdGhlIE1hcCBzZWxlY3Rpb24gKGJsdWUgYm94ZXMpIGNsZWFyc1xuICBpZiAob3V0cHV0RFMpIHtcbiAgICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgW10sIG91dHB1dERTLCB0cnVlKVxuICB9XG4gIFxuICAvLyBDbGVhciBkYXRhX3MgcGFyYW1ldGVyIGZyb20gaGFzaCB0byBwcmV2ZW50IGRpcnR5IGhhc2hcbiAgLy8gRXhwZXJpZW5jZSBCdWlsZGVyIGFkZHMgZGF0YV9zIHdoZW4gc2VsZWN0aW9ucyBhcmUgbWFkZSBidXQgZG9lc24ndCByZW1vdmUgaXQgd2hlbiBjbGVhcmVkXG4gIGNsZWFyRGF0YVNQYXJhbWV0ZXJGcm9tSGFzaCgpXG59XG5cbi8qKlxuICogUHVibGlzaGVzIGEgc2VsZWN0aW9uIGNoYW5nZSBtZXNzYWdlIGZvciB0aGUgZ2l2ZW4gcmVjb3JkcyBhbmQgZGF0YSBzb3VyY2VzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgKGVtcHR5IGFycmF5IHRvIGNsZWFyKVxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIGFsc29QdWJsaXNoVG9PdXRwdXREUyAtIFdoZXRoZXIgdG8gYWxzbyBwdWJsaXNoIGEgbWVzc2FnZSBmb3Igb3V0cHV0RFMgKGRlZmF1bHQ6IGZhbHNlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2UoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgYWxzb1B1Ymxpc2hUb091dHB1dERTOiBib29sZWFuID0gZmFsc2Vcbik6IHZvaWQge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgXG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgXG4gIGlmIChvcmlnaW5EUykge1xuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBbb3JpZ2luRFMuaWRdKVxuICAgIClcbiAgfSBlbHNlIGlmIChhbHNvUHVibGlzaFRvT3V0cHV0RFMpIHtcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3JkcywgW291dHB1dERTLmlkXSlcbiAgICApXG4gIH1cbiAgXG4gIC8vIE9wdGlvbmFsbHkgcHVibGlzaCB0byBvdXRwdXREUyBhcyB3ZWxsIChmb3Igc29tZSBlZGdlIGNhc2VzKVxuICBpZiAoYWxzb1B1Ymxpc2hUb091dHB1dERTICYmIG9yaWdpbkRTKSB7XG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIFtvdXRwdXREUy5pZF0pXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogU2VsZWN0cyByZWNvcmRzIGFuZCBwdWJsaXNoZXMgdGhlIHNlbGVjdGlvbiBtZXNzYWdlIGluIG9uZSBjYWxsLlxuICogVGhpcyBpcyB0aGUgbW9zdCBjb21tb24gcGF0dGVybiAtIHNlbGVjdGluZyByZWNvcmRzIGFuZCBub3RpZnlpbmcgdGhlIG1hcC5cbiAqIE9wdGlvbmFsbHkgdXNlcyBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHJlY29yZCBJRHMgdG8gc2VsZWN0XG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgZm9yIHByb3BlciBoaWdobGlnaHRpbmdcbiAqIEBwYXJhbSBhbHNvUHVibGlzaFRvT3V0cHV0RFMgLSBXaGV0aGVyIHRvIGFsc28gcHVibGlzaCBhIG1lc3NhZ2UgZm9yIG91dHB1dERTIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byB1c2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKiBAcGFyYW0gbWFwVmlldyAtIE1hcCB2aWV3IGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBhbHNvUHVibGlzaFRvT3V0cHV0RFM6IGJvb2xlYW4gPSBmYWxzZSxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhvdXRwdXREUywgcmVjb3JkSWRzLCByZWNvcmRzLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3Jkcywgb3V0cHV0RFMsIGFsc29QdWJsaXNoVG9PdXRwdXREUylcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgXCJDbGVhciByZXN1bHRzXCIgYnV0dG9uIGluIHRoZSBET00uXG4gKiBVc2VkIHdoZW4gcHJvZ3JhbW1hdGljYWxseSB0cmlnZ2VyaW5nIHRoZSBjbGVhciBhY3Rpb24uXG4gKiBcbiAqIEByZXR1cm5zIFRoZSBjbGVhciBidXR0b24gZWxlbWVudCwgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRDbGVhclJlc3VsdHNCdXR0b24oKTogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsIHtcbiAgLy8gSGFyZGVuZWQ6IFByaW9yaXRpemUgdGhlIG9uZSBpbiB0aGUgcmVzdWx0cyBoZWFkZXIsIGZhbGxiYWNrIHRvIGFueVxuICByZXR1cm4gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWVyeS1yZXN1bHRfX2hlYWRlciBidXR0b25bYXJpYS1sYWJlbD1cIkNsZWFyIHJlc3VsdHNcIl0nKSB8fCBcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b25bYXJpYS1sYWJlbD1cIkNsZWFyIHJlc3VsdHNcIl0nKSkgYXMgSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsXG59XG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBjbGFzc05hbWVzLFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmRcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCBMaXN0RGlyZWN0aW9uIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlSZXN1bHRJdGVtIH0gZnJvbSAnLi9xdWVyeS1yZXN1bHQtaXRlbSdcbmltcG9ydCB7IGdldFBvcHVwVGVtcGxhdGUgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgdXNlQXV0b0hlaWdodCB9IGZyb20gJy4vdXNlQXV0b0hlaWdodCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBTaW1wbGVMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIHJlY29yZHM6IERhdGFSZWNvcmRbXVxuICBkaXJlY3Rpb246IExpc3REaXJlY3Rpb25cbiAgb25Fc2NhcGU6ICgpID0+IHZvaWRcbiAgb25TZWxlY3RDaGFuZ2U6IChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxuICBvblJlbW92ZTogKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIGV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbiAgaXRlbUV4cGFuZFN0YXRlcz86IE1hcDxzdHJpbmcsIGJvb2xlYW4+XG4gIHJlbW92ZWRSZWNvcmRJZHM/OiBTZXQ8c3RyaW5nPlxuICBvblJlbmRlckRvbmU/OiAob3B0aW9uczogeyBkYXRhSXRlbXM6IGFueVtdIH0pID0+IHZvaWRcbn1cblxuY29uc3QgZ2V0U3R5bGUgPSAoaXNBdXRvSGVpZ2h0OiBib29sZWFuKSA9PiB7XG4gIHJldHVybiBjc3NgXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAwfTtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBtYXgtaGVpZ2h0OiAke2lzQXV0b0hlaWdodCA/ICdjYWxjKDYxLjh2aCAtIDEwMHB4KScgOiAnbm9uZSd9O1xuXG4gICAgLnF1ZXJ5LXJlc3VsdC1pdGVtICsgLnF1ZXJ5LXJlc3VsdC1pdGVtIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAwLjVyZW07XG4gICAgICBtYXJnaW4tdG9wOiAwO1xuICAgIH1cblxuICAgICYudmVydGljYWwge1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIC5saXN0LWl0ZW1zIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICAuZmVhdHVyZS1pbmZvLWNvbXBvbmVudCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAucXVlcnktcmVzdWx0LWl0ZW0gKyAucXVlcnktcmVzdWx0LWl0ZW0ge1xuICAgICAgICBtYXJnaW4tbGVmdDogMDtcbiAgICAgICAgbWFyZ2luLXRvcDogMC41cmVtO1xuICAgICAgfVxuICAgIH1cbiAgICAubGlzdC1pdGVtcyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gU2ltcGxlTGlzdCAocHJvcHM6IFNpbXBsZUxpc3RQcm9wcykge1xuICBjb25zdCB7XG4gICAgd2lkZ2V0SWQsXG4gICAgb3V0cHV0RFMsXG4gICAgcXVlcnlJdGVtLFxuICAgIHJlY29yZHMsXG4gICAgZGlyZWN0aW9uLFxuICAgIG9uRXNjYXBlLFxuICAgIG9uU2VsZWN0Q2hhbmdlLFxuICAgIG9uUmVtb3ZlLFxuICAgIGV4cGFuZEJ5RGVmYXVsdCxcbiAgICBpdGVtRXhwYW5kU3RhdGVzLFxuICAgIHJlbW92ZWRSZWNvcmRJZHMsXG4gICAgb25SZW5kZXJEb25lXG4gIH0gPSBwcm9wc1xuICBcbiAgY29uc3QgW3BvcHVwVGVtcGxhdGUsIHNldFBvcHVwVGVtcGxhdGVdID0gUmVhY3QudXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IFtkZWZhdWx0UG9wdXBUZW1wbGF0ZSwgc2V0RGVmYXVsdFBvcHVwVGVtcGxhdGVdID0gUmVhY3QudXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IGlzQXV0b0hlaWdodCA9IHVzZUF1dG9IZWlnaHQoKVxuICBjb25zdCByZXN1bHRDb250YWluZXJSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG5cbiAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHNcbiAgY29uc3QgZmlsdGVyZWRSZWNvcmRzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHJlY29yZHM/LmZpbHRlcihyZWNvcmQgPT4gIXJlbW92ZWRSZWNvcmRJZHM/LmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IFtdXG4gIH0sIFtyZWNvcmRzLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICAvLyBOb3RpZnkgcGFyZW50IHdoZW4gcmVjb3JkcyBhcmUgcmVuZGVyZWQgKGZvciBhdXRvLXN3aXRjaCBsb2dpYylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAob25SZW5kZXJEb25lICYmIGZpbHRlcmVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdTaW1wbGVMaXN0LW9uUmVuZGVyRG9uZS1jYWxsZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgZmlsdGVyZWRSZWNvcmRzQ291bnQ6IGZpbHRlcmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHRvdGFsUmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzPy5zaXplIHx8IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIG9uUmVuZGVyRG9uZSh7IGRhdGFJdGVtczogZmlsdGVyZWRSZWNvcmRzIH0pXG4gICAgfVxuICB9LCBbZmlsdGVyZWRSZWNvcmRzLCBvblJlbmRlckRvbmUsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIHJlY29yZHMubGVuZ3RoLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGdldFBvcHVwVGVtcGxhdGUob3V0cHV0RFMsIHF1ZXJ5SXRlbSkudGhlbihycyA9PiB7XG4gICAgICBzZXRQb3B1cFRlbXBsYXRlKHJzLnBvcHVwVGVtcGxhdGUpXG4gICAgICBzZXREZWZhdWx0UG9wdXBUZW1wbGF0ZShycy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSlcbiAgICB9KVxuICB9LCBbb3V0cHV0RFMsIHF1ZXJ5SXRlbV0pXG5cbiAgY29uc3QgaGFuZGxlS2V5VXAgPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIG9uRXNjYXBlKClcbiAgICB9XG4gIH0sIFtvbkVzY2FwZV0pXG5cbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJyAnKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IFxuICAgICAgb25LZXlVcD17aGFuZGxlS2V5VXB9IFxuICAgICAgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufSBcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyh7IHZlcnRpY2FsOiBkaXJlY3Rpb24gPT09IExpc3REaXJlY3Rpb24uVmVydGljYWwgfSl9IFxuICAgICAgY3NzPXtnZXRTdHlsZShpc0F1dG9IZWlnaHQpfVxuICAgICAgcmVmPXtyZXN1bHRDb250YWluZXJSZWZ9XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2xpc3QtaXRlbXMgcHgtNCBweS0xJyByb2xlPSdsaXN0Ym94Jz5cbiAgICAgICAge2ZpbHRlcmVkUmVjb3Jkcy5tYXAoKGRhdGFJdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkSWQgPSBkYXRhSXRlbS5nZXRJZCgpXG4gICAgICAgICAgLy8gVXNlIGluZGl2aWR1YWwgc3RhdGUgZnJvbSBtYXAgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIGV4cGFuZEJ5RGVmYXVsdFxuICAgICAgICAgIGNvbnN0IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSA9IGl0ZW1FeHBhbmRTdGF0ZXM/LmdldChyZWNvcmRJZClcbiAgICAgICAgICBjb25zdCBleHBhbmRCeURlZmF1bHRWYWx1ZSA9IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSAhPT0gdW5kZWZpbmVkID8gaW5kaXZpZHVhbEV4cGFuZFN0YXRlIDogKGV4cGFuZEJ5RGVmYXVsdCA/PyB0cnVlKVxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8UXVlcnlSZXN1bHRJdGVtXG4gICAgICAgICAgICAgIGtleT17cmVjb3JkSWR9XG4gICAgICAgICAgICAgIGRhdGE9e2RhdGFJdGVtIGFzIEZlYXR1cmVEYXRhUmVjb3JkfVxuICAgICAgICAgICAgICBkYXRhU291cmNlPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICBwb3B1cFRlbXBsYXRlPXtwb3B1cFRlbXBsYXRlfVxuICAgICAgICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZT17ZGVmYXVsdFBvcHVwVGVtcGxhdGV9XG4gICAgICAgICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQnlEZWZhdWx0VmFsdWV9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e29uU2VsZWN0Q2hhbmdlfVxuICAgICAgICAgICAgICBvblJlbW92ZT17b25SZW1vdmV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIClcbiAgICAgICAgfSl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIF93aWRnZXRMYWJlbDogJ1F1ZXJ5U2ltcGxlJyxcbiAgcmVzZXQ6ICdSZXNldCcsXG4gIHNlYXJjaExheWVyOiAnU2VhcmNoIExheWVyJyxcbiAgYXBwbHk6ICdTZWFyY2gnLFxuICBub0RhdGFBdmFpbGFibGU6ICdFcnJvciBpbiBsb2FkaW5nIGRhdGEnLFxuICBub1F1ZXJ5SXRlbTogJ05vIHF1ZXJ5JyxcbiAgbmV3UXVlcnlIaW50OiAnQWRkIGNvbnRlbnQgYnkgY2xpY2tpbmcgdGhlIFwie2xhYmVsfVwiIGJ1dHRvbiBvbiB0aGUgY29uZmlndXJhdGlvbiBwYW5lbCcsXG4gIGF0dHJpYnV0ZUZpbHRlcjogJ0F0dHJpYnV0ZSBmaWx0ZXInLFxuICBzcGF0aWFsRmlsdGVyOiAnU3BhdGlhbCBmaWx0ZXInLFxuICBzcGF0aWFsRmlsdGVyVHlwZV9DdXJyZW50TWFwRXh0ZW50OiAnQ3VycmVudCBtYXAgZXh0ZW50JyxcbiAgc3BhdGlhbEZpbHRlclR5cGVfSW50ZXJhY3RpdmVEcmF3TW9kZTogJ0RyYXduIGdyYXBoaWMnLFxuICByZXN1bHRzOiAnUmVzdWx0cycsXG4gIGZlYXR1cmVzRGlzcGxheWVkOiAnRmVhdHVyZXMgZGlzcGxheWVkJyxcbiAgY2xlYXJSZXN1bHQ6ICdDbGVhciBhbGwgcmVzdWx0cycsXG4gIGNoZWNrUmVzdWx0OiAnQ2hlY2sgcmVzdWx0cycsXG4gIG1hcE11c3RCZVZpc2libGU6ICdNYXAgbXVzdCBiZSB2aXNpYmxlJyxcbiAgY2hvb3NlRmlsdGVyVHlwZTogJ0Nob29zZSB0aGUgZmlsdGVyIHR5cGUnLFxuICBjaG9vc2VHZW9tZXRyeVR5cGU6ICdDaG9vc2UgdGhlIGdlb21ldHJ5IHR5cGUnLFxuICBjbGVhckRyYXdpbmc6ICdDbGVhciB0aGUgZ3JhcGhpYyB3aGVuIGFwcGx5aW5nJyxcbiAgZmVhdHVyZUZyb21EczogJ1NlbGVjdGluZyBmZWF0dXJlcyBmcm9tIGRhdGEgc291cmNlJyxcbiAgZmVhdHVyZUZyb21NYXA6ICdHZW9tZXRyaWVzIGZyb20gYSBtYXAnLFxuICBjaG9vc2VGaWx0ZXJMYXllcjogJ0Nob29zZSBhIGZpbHRlciBsYXllcicsXG4gIHNlbGVjdGVkUmVjb3JkczogJ3tudW19IHJlY29yZHMgYXJlIHNlbGVjdGVkIGZvciB0aGUgZmlsdGVyJyxcbiAgc3BhdGlhbE5vdEF2YWlsYWJsZTogJ1NwYXRpYWwgZmlsdGVyIGlzIG5vdCBhdmFpbGFibGUgaGVyZS4nLFxuICBzcGF0aWFsTm90QXZhaWxhYmxlRGVzYzogJ1NwYXRpYWwgZmlsdGVyIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIGEgZGF0YSBzb3VyY2UgdGhhdCBhbHJlYWR5IGNvbnRhaW5zIGEgc3BhdGlhbCBxdWVyeS4nLFxuICBwcmVjb25maWd1cmVkOiAnUHJlY29uZmlndXJlZCcsXG4gIHJ1bnRpbWU6ICdSdW50aW1lJyxcbiAgc2VsZWN0TG9hZGVkOiAnU2VsZWN0IGxvYWRlZCcsXG4gIHJldHJpZXZpbmc6ICdSZXRyaWV2aW5nIHF1ZXJ5IHJlc3VsdHMuLi4nLFxuICB6b29tVG9TZWxlY3RlZDogJ1pvb20gdG8gc2VsZWN0ZWQnLFxuICBxdWVyeVRhYjogJ1F1ZXJ5JyxcbiAgcmVzdWx0c1RhYjogJ1Jlc3VsdHMnLFxuICBleHBhbmRBbGw6ICdFeHBhbmQgYWxsJyxcbiAgY29sbGFwc2VBbGw6ICdDb2xsYXBzZSBhbGwnLFxuICBhZGRUb01hcDogJ0FkZCB0byBtYXAnLFxuICByZXN1bHRzTW9kZTogJ1Jlc3VsdHMgbW9kZScsXG4gIGNyZWF0ZU5ld1Jlc3VsdHM6ICdDcmVhdGUgbmV3IHJlc3VsdHMnLFxuICBhZGRUb0N1cnJlbnRSZXN1bHRzOiAnQWRkIHRvIGN1cnJlbnQgcmVzdWx0cycsXG4gIHJlbW92ZUZyb21DdXJyZW50UmVzdWx0czogJ1JlbW92ZSBmcm9tIGN1cnJlbnQgcmVzdWx0cycsXG4gIHJlc3VsdHNNb2RlRGlzYWJsZWRSZW1vdmU6ICdSZW1vdmUgZnJvbSBjdXJyZW50IHJlc3VsdHMgKG5vIGFjY3VtdWxhdGVkIHJlc3VsdHMpJyxcbiAgcmVzdWx0c01vZGVEZXNjOiAnQ29udHJvbHMgaG93IHF1ZXJ5IHJlc3VsdHMgYXJlIGNvbWJpbmVkOlxcbuKAoiBOZXc6IEVhY2ggcXVlcnkgcmVwbGFjZXMgcHJldmlvdXMgcmVzdWx0c1xcbuKAoiBBZGQ6IE5ldyByZXN1bHRzIGFyZSBhZGRlZCB0byBleGlzdGluZyByZXN1bHRzXFxu4oCiIFJlbW92ZTogTWF0Y2hpbmcgcmVzdWx0cyBhcmUgcmVtb3ZlZCBmcm9tIGV4aXN0aW5nIHJlc3VsdHMnLFxuICByZXN1bHRzTW9kZU5ldzogJ05ldycsXG4gIHJlc3VsdHNNb2RlQWRkOiAnQWRkJyxcbiAgcmVzdWx0c01vZGVSZW1vdmU6ICdSZW1vdmUnXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IFF1ZXJ5V2lkZ2V0Q29udGV4dCB9IGZyb20gJy4vd2lkZ2V0LWNvbnRleHQnXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VBdXRvSGVpZ2h0ICgpIHtcbiAgY29uc3QgbGF5b3V0SW5mbyA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlXaWRnZXRDb250ZXh0KVxuICBsZXQgbGF5b3V0SWRcbiAgbGV0IGxheW91dEl0ZW1JZFxuICBpZiAobGF5b3V0SW5mby5pbmNsdWRlcygnOicpKSB7XG4gICAgY29uc3QgciA9IGxheW91dEluZm8uc3BsaXQoJzonKVxuICAgIGxheW91dElkID0gclswXVxuICAgIGxheW91dEl0ZW1JZCA9IHJbMV1cbiAgfVxuICBjb25zdCBpc0F1dG8gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdXG4gICAgcmV0dXJuIGxheW91dEl0ZW0/LnNldHRpbmc/LmF1dG9Qcm9wcz8uaGVpZ2h0ID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG9cbiAgfSlcblxuICByZXR1cm4gaXNBdXRvXG59XG5cblxuIiwiaW1wb3J0IGljb25XYXJuaW5nIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZydcbmltcG9ydCBpY29uRXJyb3IgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZydcbmltcG9ydCBhcnJvd05hdkJhY2sgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmcnXG5pbXBvcnQgYXJyb3dSaWdodCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC5zdmcnXG5pbXBvcnQgdG9vbERlbGV0ZSBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xuaW1wb3J0IGljb25Nb3JlIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21vcmUtaG9yaXpvbnRhbC5zdmcnXG5cbmV4cG9ydCBjb25zdCBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCA9ICgpID0+ICh7XG4gIGljb25NYXA6IHtcbiAgICBpY29uUXVlcnk6IHJlcXVpcmUoJy4uLy4uL2ljb24uc3ZnJyksXG4gICAgaWNvbldhcm5pbmcsXG4gICAgaWNvbkVycm9yLFxuICAgIGFycm93TmF2QmFjayxcbiAgICBhcnJvd1JpZ2h0LFxuICAgIHRvb2xEZWxldGUsXG4gICAgaWNvbk1vcmVcbiAgfVxufSlcblxuXG5cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgUXVlcnlXaWRnZXRDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxzdHJpbmc+KG51bGwpXG5cblxuIiwiLyoqXG4gKiBTaGFyZWQgem9vbSB1dGlsaXRpZXMgZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIFxuICogUHJvdmlkZXMgcHVyZSBmdW5jdGlvbnMgZm9yIHpvb21pbmcgdG8gZmVhdHVyZSByZWNvcmRzIHRoYXQgY2FuIGJlIHVzZWRcbiAqIGJ5IGJvdGggUmVhY3QgaG9va3MgYW5kIGRhdGEgYWN0aW9ucy5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IEV4dGVudCBmcm9tICdlc3JpL2dlb21ldHJ5L0V4dGVudCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBab29tVG9SZWNvcmRzT3B0aW9ucyB7XG4gIHBhZGRpbmc/OiB7XG4gICAgbGVmdDogbnVtYmVyXG4gICAgcmlnaHQ6IG51bWJlclxuICAgIHRvcDogbnVtYmVyXG4gICAgYm90dG9tOiBudW1iZXJcbiAgfVxuICAvKiogXG4gICAqIEJ1ZmZlciBkaXN0YW5jZSBpbiBmZWV0IGZvciB6ZXJvLWFyZWEgZXh0ZW50cyAoZGVmYXVsdDogMzAwKS5cbiAgICogQXBwbGllZCB3aGVuIHpvb21pbmcgdG8gc2luZ2xlIHBvaW50cyBvciBvdmVybGFwcGluZyBwb2ludHMuXG4gICAqIFxuICAgKiBGVVRVUkU6IFRoaXMgd2lsbCBiZWNvbWUgY29uZmlndXJhYmxlIHZpYSB3aWRnZXQgc2V0dGluZ3MgdG8gYWxsb3dcbiAgICogYXV0aG9ycyB0byBjdXN0b21pemUgdGhlIHpvb20gbGV2ZWwgZm9yIHBvaW50IGZlYXR1cmVzLiBTZWUgVE9ETy5tZFxuICAgKiBzZWN0aW9uIFwiQ29uZmlndXJhYmxlIFBvaW50IFpvb20gQnVmZmVyXCIgZm9yIGltcGxlbWVudGF0aW9uIHBsYW4uXG4gICAqL1xuICB6ZXJvQXJlYUJ1ZmZlckZlZXQ/OiBudW1iZXJcbn1cblxuY29uc3QgREVGQVVMVF9QQURESU5HID0ge1xuICBsZWZ0OiA1MCxcbiAgcmlnaHQ6IDUwLFxuICB0b3A6IDUwLFxuICBib3R0b206IDUwXG59XG5cbi8qKiBcbiAqIERlZmF1bHQgYnVmZmVyIGZvciBzaW5nbGUgcG9pbnRzIG9yIG92ZXJsYXBwaW5nIHBvaW50cyAoaW4gZmVldCkuXG4gKiBUaGlzIGNyZWF0ZXMgYSA2MDBmdCB4IDYwMGZ0IGV4dGVudCBhcm91bmQgcG9pbnQgZmVhdHVyZXMuXG4gKiBcbiAqIFJBVElPTkFMRTogMzAwZnQgcmFkaXVzIHByb3ZpZGVzIGdvb2QgY29udGV4dCBmb3IgcGFyY2VscywgYWRkcmVzc2VzLFxuICogYW5kIHNpbWlsYXIgcG9pbnQgZmVhdHVyZXMgd2l0aG91dCB6b29taW5nIHRvbyBjbG9zZSBvciB0b28gZmFyLlxuICovXG5jb25zdCBERUZBVUxUX1pFUk9fQVJFQV9CVUZGRVJfRkVFVCA9IDMwMFxuXG4vKiogQ29udmVyc2lvbiBmYWN0b3I6IGZlZXQgdG8gbWV0ZXJzICovXG5jb25zdCBGRUVUX1RPX01FVEVSUyA9IDAuMzA0OFxuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIHNwYXRpYWwgcmVmZXJlbmNlIHVzZXMgbWV0ZXJzIChXZWIgTWVyY2F0b3Igb3Igb3RoZXIgbWV0cmljIHN5c3RlbXMpLlxuICogXG4gKiBUaGlzIGlzIGNyaXRpY2FsIGZvciBhcHBseWluZyB0aGUgY29ycmVjdCBidWZmZXIgZGlzdGFuY2UgdG8gemVyby1hcmVhIGV4dGVudHMuXG4gKiBEaWZmZXJlbnQgY29vcmRpbmF0ZSBzeXN0ZW1zIHVzZSBkaWZmZXJlbnQgdW5pdHM6XG4gKiAtIFdlYiBNZXJjYXRvciAoMzg1NywgMTAyMTAwKTogTWV0ZXJzXG4gKiAtIFdHUzg0IEdlb2dyYXBoaWMgKDQzMjYpOiBEZWdyZWVzICh0cmVhdGVkIGFzIG1ldHJpYyBmb3IgYnVmZmVyIGNhbGN1bGF0aW9uKVxuICogLSBTdGF0ZSBQbGFuZSB6b25lcyAoMjIyNS0yMjg0KTogRmVldFxuICogXG4gKiBAcGFyYW0gc3BhdGlhbFJlZmVyZW5jZSAtIFRoZSBzcGF0aWFsIHJlZmVyZW5jZSB0byBjaGVja1xuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgc3BhdGlhbCByZWZlcmVuY2UgdXNlcyBtZXRlcnMsIGZhbHNlIGlmIGZlZXQtYmFzZWRcbiAqL1xuZnVuY3Rpb24gaXNNZXRyaWNTcGF0aWFsUmVmZXJlbmNlKHNwYXRpYWxSZWZlcmVuY2U6IF9fZXNyaS5TcGF0aWFsUmVmZXJlbmNlKTogYm9vbGVhbiB7XG4gIC8vIFdlYiBNZXJjYXRvciAobW9zdCBjb21tb24pOiAzODU3IG9yIDEwMjEwMFxuICBpZiAoc3BhdGlhbFJlZmVyZW5jZS53a2lkID09PSAzODU3IHx8IHNwYXRpYWxSZWZlcmVuY2Uud2tpZCA9PT0gMTAyMTAwKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICBcbiAgLy8gV0dTODQgR2VvZ3JhcGhpYyAoZGVncmVlcywgYnV0IHRyZWF0IGFzIG1ldHJpYyBmb3IgYnVmZmVyIGNhbGN1bGF0aW9uKVxuICBpZiAoc3BhdGlhbFJlZmVyZW5jZS53a2lkID09PSA0MzI2KSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICBcbiAgLy8gRm9yIG90aGVyIHNwYXRpYWwgcmVmZXJlbmNlcywgY2hlY2sgdGhlIHVuaXQgcHJvcGVydHkgaWYgYXZhaWxhYmxlXG4gIC8vIE1vc3QgU3RhdGUgUGxhbmUgem9uZXMgdXNlIGZlZXQgKFdLSUQgMjIyNy0yMjg0LCAyMjg1LTIyODcsIGV0Yy4pXG4gIC8vIEJ1dCB0aGlzIGlzIGEgaGV1cmlzdGljIC0gaWRlYWxseSB3ZSdkIGNoZWNrIHRoZSBhY3R1YWwgdW5pdFxuICBjb25zdCB3a2lkID0gc3BhdGlhbFJlZmVyZW5jZS53a2lkXG4gIFxuICAvLyBDb21tb24gVVMgU3RhdGUgUGxhbmUgem9uZXMgaW4gZmVldCAocGFydGlhbCBsaXN0KVxuICAvLyBDYWxpZm9ybmlhIHpvbmVzOiAyMjI1LTIyMzUgKGZlZXQpLCAyMjI5IChmZWV0KVxuICAvLyBUaGlzIGlzIG5vdCBleGhhdXN0aXZlLCBidXQgY292ZXJzIGNvbW1vbiBjYXNlc1xuICBpZiAod2tpZCA+PSAyMjI1ICYmIHdraWQgPD0gMjI4NCkge1xuICAgIHJldHVybiBmYWxzZSAvLyBMaWtlbHkgZmVldC1iYXNlZCBTdGF0ZSBQbGFuZVxuICB9XG4gIFxuICAvLyBEZWZhdWx0IHRvIG1ldHJpYyBpZiB1bmNlcnRhaW5cbiAgcmV0dXJuIHRydWVcbn1cblxuLyoqXG4gKiBFeHBhbmRzIGEgemVyby1hcmVhIGV4dGVudCBieSBhIGJ1ZmZlciBkaXN0YW5jZS5cbiAqIENyZWF0ZXMgYSBuZXcgZXh0ZW50IHdpdGggdGhlIGNlbnRlciBwb2ludCBidWZmZXJlZCBieSB0aGUgc3BlY2lmaWVkIGRpc3RhbmNlLlxuICogXG4gKiBUaGlzIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmU6XG4gKiAtIEEgc2luZ2xlIHBvaW50IGZlYXR1cmUgaXMgc2VsZWN0ZWQgKGV4dGVudC53aWR0aCA9IDAsIGV4dGVudC5oZWlnaHQgPSAwKVxuICogLSBNdWx0aXBsZSBvdmVybGFwcGluZyBwb2ludHMgYXJlIHNlbGVjdGVkICh1bmlvbiBleHRlbnQgc3RpbGwgaGFzIHplcm8gYXJlYSlcbiAqIFxuICogV2l0aG91dCB0aGlzIGV4cGFuc2lvbiwgbWFwVmlldy5nb1RvKCkgd291bGQgem9vbSB0byBhbiB1bnVzYWJsZSBzY2FsZS5cbiAqIFxuICogQHBhcmFtIGV4dGVudCAtIFRoZSB6ZXJvLWFyZWEgZXh0ZW50IHRvIGV4cGFuZFxuICogQHBhcmFtIGJ1ZmZlckRpc3RhbmNlIC0gVGhlIGRpc3RhbmNlIHRvIGJ1ZmZlciBpbiB0aGUgc3BhdGlhbCByZWZlcmVuY2UncyB1bml0c1xuICogQHJldHVybnMgQSBuZXcgZXh0ZW50IGV4cGFuZGVkIGJ5IHRoZSBidWZmZXIgZGlzdGFuY2UgaW4gYWxsIGRpcmVjdGlvbnNcbiAqL1xuZnVuY3Rpb24gZXhwYW5kWmVyb0FyZWFFeHRlbnQoZXh0ZW50OiBfX2VzcmkuRXh0ZW50LCBidWZmZXJEaXN0YW5jZTogbnVtYmVyKTogX19lc3JpLkV4dGVudCB7XG4gIGNvbnN0IGNlbnRlclggPSAoZXh0ZW50LnhtaW4gKyBleHRlbnQueG1heCkgLyAyXG4gIGNvbnN0IGNlbnRlclkgPSAoZXh0ZW50LnltaW4gKyBleHRlbnQueW1heCkgLyAyXG4gIFxuICByZXR1cm4gZXh0ZW50LmNsb25lKCkuc2V0KHtcbiAgICB4bWluOiBjZW50ZXJYIC0gYnVmZmVyRGlzdGFuY2UsXG4gICAgeG1heDogY2VudGVyWCArIGJ1ZmZlckRpc3RhbmNlLFxuICAgIHltaW46IGNlbnRlclkgLSBidWZmZXJEaXN0YW5jZSxcbiAgICB5bWF4OiBjZW50ZXJZICsgYnVmZmVyRGlzdGFuY2VcbiAgfSlcbn1cblxuLyoqXG4gKiBQdXJlIGZ1bmN0aW9uIHRvIHpvb20gdG8gZmVhdHVyZSByZWNvcmRzIHdpdGggcGFkZGluZy5cbiAqIFxuICogRXh0cmFjdHMgZ2VvbWV0cmllcyBmcm9tIHJlY29yZHMsIGNhbGN1bGF0ZXMgZXh0ZW50LCBhbmQgem9vbXMgdGhlIG1hcCB2aWV3XG4gKiB1c2luZyBtYXBWaWV3LmdvVG8oKSB3aXRoIGNvbmZpZ3VyYWJsZSBwYWRkaW5nLiBIYW5kbGVzIGJvdGggc2luZ2xlIGFuZFxuICogbXVsdGlwbGUgZ2VvbWV0cmllcyBieSBjYWxjdWxhdGluZyB1bmlvbiBleHRlbnQgd2hlbiBuZWVkZWQuXG4gKiBcbiAqIEdFT01FVFJZIE5PUk1BTElaQVRJT04gKHIwMTkuMjgpOlxuICogUG9pbnQgZ2VvbWV0cmllcyBhcmUgbm9ybWFsaXplZCB1cHN0cmVhbSAoaW4gcXVlcnktdGFzay50c3gpIHRvIGluY2x1ZGVcbiAqIC5leHRlbnQgcHJvcGVydHkuIFRoaXMgZW5zdXJlcyBhbGwgZ2VvbWV0cnkgdHlwZXMgKHBvaW50cywgbXVsdGlwb2ludHMsXG4gKiBwb2x5Z29ucywgcG9seWxpbmVzKSBoYXZlIGEgY29uc2lzdGVudCBpbnRlcmZhY2UuXG4gKiBcbiAqIFpFUk8tQVJFQSBFWFRFTlQgSEFORExJTkcgKHIwMTkuMjMtcjAxOS4yOCk6XG4gKiBXaGVuIHpvb21pbmcgdG8gc2luZ2xlIHBvaW50cyBvciBvdmVybGFwcGluZyBwb2ludHMsIHRoZSBjYWxjdWxhdGVkIGV4dGVudFxuICogd2lsbCBoYXZlIHplcm8gd2lkdGgvaGVpZ2h0LiBUaGlzIGZ1bmN0aW9uIGRldGVjdHMgdGhpcyBjb25kaXRpb24gYW5kXG4gKiBleHBhbmRzIHRoZSBleHRlbnQgYnkgMzAwIGZlZXQgKGRlZmF1bHQpIGluIGFsbCBkaXJlY3Rpb25zIHRvIHByb3ZpZGVcbiAqIHVzZWZ1bCBjb250ZXh0LiBUaGUgYnVmZmVyIGRpc3RhbmNlIGlzIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIHRvIHRoZVxuICogY29ycmVjdCB1bml0cyBiYXNlZCBvbiB0aGUgbWFwJ3Mgc3BhdGlhbCByZWZlcmVuY2U6XG4gKiAtIFdlYiBNZXJjYXRvciAoMzg1Ny8xMDIxMDApOiBDb252ZXJ0cyAzMDAgZmVldCDihpIgfjkxLjQ0IG1ldGVyc1xuICogLSBTdGF0ZSBQbGFuZSAoZmVldC1iYXNlZCk6IFVzZXMgMzAwIGZlZXQgZGlyZWN0bHlcbiAqIFxuICogR0VPTUVUUlkgVFlQRSBTVVBQT1JUOlxuICogLSBTaW5nbGUgUG9pbnRzIChwb2ludCk6IFVzZXMgbm9ybWFsaXplZCAuZXh0ZW50IOKGkiBaZXJvLWFyZWEgZXhwYW5zaW9uIGFwcGxpZWRcbiAqIC0gTXVsdGlwb2ludHMgKG11bHRpcG9pbnQpOiBVc2VzIG5hdGl2ZSAuZXh0ZW50IOKGkiBaZXJvLWFyZWEgZXhwYW5zaW9uIGlmIG92ZXJsYXBwaW5nXG4gKiAtIFBvbHlnb25zL1BvbHlsaW5lczogVXNlcyBuYXRpdmUgLmV4dGVudCDihpIgRXhwYW5zaW9uIG9ubHkgaWYgZGVnZW5lcmF0ZVxuICogXG4gKiBUaGlzIGFwcHJvYWNoIG1haW50YWlucyB0aGUgZXh0ZW50LWJhc2VkIHpvb20gc3RyYXRlZ3ksIGVuc3VyaW5nIHRoZVxuICogcGFkZGluZyBmcm9tIFpvb21Ub1JlY29yZHNPcHRpb25zIGlzIHN0aWxsIHJlc3BlY3RlZCBkdXJpbmcgbWFwVmlldy5nb1RvKCkuXG4gKiBcbiAqIERJQUdOT1NUSUMgTE9HR0lORyAocjAxOS4yNCk6XG4gKiBDb21wcmVoZW5zaXZlIGxvZ2dpbmcgdGhyb3VnaG91dCBvcGVyYXRpb24gZXhwb3NlcyBnZW9tZXRyeSB0eXBlcywgZXh0ZW50XG4gKiBjYWxjdWxhdGlvbnMsIHplcm8tYXJlYSBkZXRlY3Rpb24sIGV4cGFuc2lvbiBtYXRoLCBhbmQgZmluYWwgZ29UbyBwYXJhbWV0ZXJzLlxuICogRmlsdGVyIGNvbnNvbGUgYnkgW1FVRVJZU0lNUExFLVpPT01dIHRvIHNlZSBjb21wbGV0ZSB0cmFjZS5cbiAqIFxuICogQHBhcmFtIG1hcFZpZXcgLSBUaGUgbWFwIHZpZXcgdG8gem9vbSAoMkQgb3IgM0QpXG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIGZlYXR1cmUgZGF0YSByZWNvcmRzIHRvIHpvb20gdG9cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgem9vbSBvcHRpb25zIGluY2x1ZGluZyBwYWRkaW5nIGFuZCB6ZXJvLWFyZWEgYnVmZmVyIGRpc3RhbmNlXG4gKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB6b29tIGNvbXBsZXRlc1xuICogXG4gKiBAZXhhbXBsZVxuICogLy8gWm9vbSB0byBzaW5nbGUgcG9pbnQgd2l0aCBkZWZhdWx0IDMwMGZ0IGJ1ZmZlclxuICogYXdhaXQgem9vbVRvUmVjb3JkcyhtYXBWaWV3LCBbcG9pbnRSZWNvcmRdKVxuICogXG4gKiBAZXhhbXBsZVxuICogLy8gWm9vbSB0byBwb2x5Z29uIHdpdGggY3VzdG9tIHBhZGRpbmdcbiAqIGF3YWl0IHpvb21Ub1JlY29yZHMobWFwVmlldywgW3BvbHlnb25SZWNvcmRdLCB7XG4gKiAgIHBhZGRpbmc6IHsgbGVmdDogMTAwLCByaWdodDogMTAwLCB0b3A6IDEwMCwgYm90dG9tOiAxMDAgfVxuICogfSlcbiAqIFxuICogQGV4YW1wbGVcbiAqIC8vIFpvb20gdG8gcG9pbnQgd2l0aCBjdXN0b20gYnVmZmVyICg1MDBmdCBpbnN0ZWFkIG9mIDMwMGZ0KVxuICogYXdhaXQgem9vbVRvUmVjb3JkcyhtYXBWaWV3LCBbcG9pbnRSZWNvcmRdLCB7XG4gKiAgIHplcm9BcmVhQnVmZmVyRmVldDogNTAwXG4gKiB9KVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gem9vbVRvUmVjb3JkcyhcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3LFxuICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBvcHRpb25zPzogWm9vbVRvUmVjb3Jkc09wdGlvbnNcbik6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIW1hcFZpZXcgfHwgIXJlY29yZHMgfHwgcmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1pPT00nLCB7XG4gICAgICBldmVudDogJ3pvb20tZWFybHktZXhpdCcsXG4gICAgICByZWFzb246ICFtYXBWaWV3ID8gJ25vLW1hcFZpZXcnIDogJ25vLXJlY29yZHMnLFxuICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBwYWRkaW5nID0gb3B0aW9ucz8ucGFkZGluZyB8fCBERUZBVUxUX1BBRERJTkdcbiAgY29uc3QgemVyb0FyZWFCdWZmZXJGZWV0ID0gb3B0aW9ucz8uemVyb0FyZWFCdWZmZXJGZWV0IHx8IERFRkFVTFRfWkVST19BUkVBX0JVRkZFUl9GRUVUXG5cbiAgZGVidWdMb2dnZXIubG9nKCdaT09NJywge1xuICAgIGV2ZW50OiAnem9vbS1zdGFydCcsXG4gICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICBwYWRkaW5nLFxuICAgIHplcm9BcmVhQnVmZmVyRmVldCxcbiAgICBtYXBWaWV3VHlwZTogbWFwVmlldy50eXBlLFxuICAgIHNwYXRpYWxSZWZlcmVuY2VXa2lkOiBtYXBWaWV3LnNwYXRpYWxSZWZlcmVuY2U/LndraWRcbiAgfSlcblxuICB0cnkge1xuICAgIC8vIEV4dHJhY3QgZ2VvbWV0cmllcyBmcm9tIHJlY29yZHMgYW5kIGNhbGN1bGF0ZSBleHRlbnRzIG9uLXRoZS1mbHlcbiAgICAvLyBOb3RlOiBQb2ludCBnZW9tZXRyaWVzIGluIEFyY0dJUyBKUyBBUEkgaGF2ZSByZWFkLW9ubHkgLmV4dGVudCBwcm9wZXJ0eSAoYWx3YXlzIG51bGwpXG4gICAgLy8gV2UgY3JlYXRlIGV4dGVudCBvYmplY3RzIG9uLXRoZS1mbHkgZm9yIHBvaW50cyB0byBhdm9pZCBtdXRhdGlvbiBlcnJvcnNcbiAgICBjb25zdCBnZW9tZXRyeURhdGEgPSByZWNvcmRzXG4gICAgICAubWFwKHJlY29yZCA9PiB7XG4gICAgICAgIGNvbnN0IGdlb20gPSByZWNvcmQuZ2V0SlNBUElHZW9tZXRyeSgpXG4gICAgICAgIGlmICghZ2VvbSkgcmV0dXJuIG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIEZvciBwb2ludHMgd2l0aG91dCBleHRlbnQsIGNyZWF0ZSBhIHplcm8tYXJlYSBleHRlbnQgb24tdGhlLWZseVxuICAgICAgICBpZiAoZ2VvbS50eXBlID09PSAncG9pbnQnICYmICFnZW9tLmV4dGVudCkge1xuICAgICAgICAgIGNvbnN0IHB0ID0gZ2VvbSBhcyBfX2VzcmkuUG9pbnRcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2VvbWV0cnk6IGdlb20sXG4gICAgICAgICAgICBleHRlbnQ6IG5ldyBFeHRlbnQoe1xuICAgICAgICAgICAgICB4bWluOiBwdC54LFxuICAgICAgICAgICAgICB4bWF4OiBwdC54LFxuICAgICAgICAgICAgICB5bWluOiBwdC55LFxuICAgICAgICAgICAgICB5bWF4OiBwdC55LFxuICAgICAgICAgICAgICBzcGF0aWFsUmVmZXJlbmNlOiBwdC5zcGF0aWFsUmVmZXJlbmNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRm9yIG90aGVyIGdlb21ldHJ5IHR5cGVzLCB1c2UgZXhpc3RpbmcgZXh0ZW50XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZ2VvbWV0cnk6IGdlb20sXG4gICAgICAgICAgZXh0ZW50OiBnZW9tLmV4dGVudCB8fCAoZ2VvbSBhcyBhbnkpLmdldEV4dGVudD8uKClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtICE9IG51bGwpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdaT09NJywge1xuICAgICAgZXZlbnQ6ICdnZW9tZXRyaWVzLWV4dHJhY3RlZCcsXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgZ2VvbWV0cmllc0NvdW50OiBnZW9tZXRyeURhdGEubGVuZ3RoLFxuICAgICAgZ2VvbWV0cnlUeXBlczogZ2VvbWV0cnlEYXRhLm1hcChpdGVtID0+IGl0ZW0uZ2VvbWV0cnkudHlwZSlcbiAgICB9KVxuICAgIFxuICAgIGlmIChnZW9tZXRyeURhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1pPT00nLCB7XG4gICAgICAgIGV2ZW50OiAnem9vbS1lYXJseS1leGl0JyxcbiAgICAgICAgcmVhc29uOiAnbm8tZ2VvbWV0cmllcycsXG4gICAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBsZXQgZXh0ZW50OiBfX2VzcmkuRXh0ZW50IHwgbnVsbCA9IG51bGxcbiAgICBcbiAgICBpZiAoZ2VvbWV0cnlEYXRhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gU2luZ2xlIGdlb21ldHJ5IC0gdXNlIHRoZSBjYWxjdWxhdGVkIGV4dGVudFxuICAgICAgY29uc3QgaXRlbSA9IGdlb21ldHJ5RGF0YVswXVxuICAgICAgZXh0ZW50ID0gaXRlbS5leHRlbnRcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdaT09NJywge1xuICAgICAgICBldmVudDogJ2V4dGVudC1jYWxjdWxhdGVkLXNpbmdsZScsXG4gICAgICAgIGdlb21ldHJ5VHlwZTogaXRlbS5nZW9tZXRyeS50eXBlLFxuICAgICAgICBvcmlnaW5hbEV4dGVudDogZXh0ZW50ID8ge1xuICAgICAgICAgIHhtaW46IGV4dGVudC54bWluLFxuICAgICAgICAgIHhtYXg6IGV4dGVudC54bWF4LFxuICAgICAgICAgIHltaW46IGV4dGVudC55bWluLFxuICAgICAgICAgIHltYXg6IGV4dGVudC55bWF4LFxuICAgICAgICAgIHdpZHRoOiBleHRlbnQud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiBleHRlbnQuaGVpZ2h0LFxuICAgICAgICAgIHNwYXRpYWxSZWZlcmVuY2U6IGV4dGVudC5zcGF0aWFsUmVmZXJlbmNlPy53a2lkXG4gICAgICAgIH0gOiBudWxsXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNdWx0aXBsZSBnZW9tZXRyaWVzIC0gY2FsY3VsYXRlIHVuaW9uIGV4dGVudFxuICAgICAgLy8gTm90ZTogT3ZlcmxhcHBpbmcgcG9pbnRzIHdpbGwgcHJvZHVjZSBhIHplcm8tYXJlYSBleHRlbnRcbiAgICAgIC8vIHdoaWNoIHdpbGwgYmUgZXhwYW5kZWQgYnkgdGhlIHplcm8tYXJlYSBkZXRlY3Rpb24gbG9naWMgYmVsb3dcbiAgICAgIGNvbnN0IGV4dGVudHMgPSBnZW9tZXRyeURhdGFcbiAgICAgICAgLm1hcChpdGVtID0+IGl0ZW0uZXh0ZW50KVxuICAgICAgICAuZmlsdGVyKGUgPT4gZSAhPSBudWxsKVxuICAgICAgXG4gICAgICBpZiAoZXh0ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGV4dGVudCA9IGV4dGVudHNbMF0uY2xvbmUoKVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGV4dGVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBleHRlbnQgPSBleHRlbnQudW5pb24oZXh0ZW50c1tpXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1pPT00nLCB7XG4gICAgICAgIGV2ZW50OiAnZXh0ZW50LWNhbGN1bGF0ZWQtdW5pb24nLFxuICAgICAgICBnZW9tZXRyaWVzQ291bnQ6IGdlb21ldHJ5RGF0YS5sZW5ndGgsXG4gICAgICAgIGV4dGVudHNDb3VudDogZXh0ZW50cy5sZW5ndGgsXG4gICAgICAgIG9yaWdpbmFsRXh0ZW50OiBleHRlbnQgPyB7XG4gICAgICAgICAgeG1pbjogZXh0ZW50LnhtaW4sXG4gICAgICAgICAgeG1heDogZXh0ZW50LnhtYXgsXG4gICAgICAgICAgeW1pbjogZXh0ZW50LnltaW4sXG4gICAgICAgICAgeW1heDogZXh0ZW50LnltYXgsXG4gICAgICAgICAgd2lkdGg6IGV4dGVudC53aWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IGV4dGVudC5oZWlnaHQsXG4gICAgICAgICAgc3BhdGlhbFJlZmVyZW5jZTogZXh0ZW50LnNwYXRpYWxSZWZlcmVuY2U/LndraWRcbiAgICAgICAgfSA6IG51bGxcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIGlmIChleHRlbnQpIHtcbiAgICAgIC8vIENoZWNrIGZvciB6ZXJvLWFyZWEgZXh0ZW50IChzaW5nbGUgcG9pbnQgb3Igb3ZlcmxhcHBpbmcgcG9pbnRzKVxuICAgICAgLy8gVGhpcyBjb25kaXRpb24gdHJpZ2dlcnMgd2hlbiBleHRlbnQud2lkdGggPT09IDAgT1IgZXh0ZW50LmhlaWdodCA9PT0gMFxuICAgICAgY29uc3QgaXNaZXJvQXJlYSA9IGV4dGVudC53aWR0aCA9PT0gMCB8fCBleHRlbnQuaGVpZ2h0ID09PSAwXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnWk9PTScsIHtcbiAgICAgICAgZXZlbnQ6ICd6ZXJvLWFyZWEtY2hlY2snLFxuICAgICAgICBpc1plcm9BcmVhLFxuICAgICAgICBleHRlbnRXaWR0aDogZXh0ZW50LndpZHRoLFxuICAgICAgICBleHRlbnRIZWlnaHQ6IGV4dGVudC5oZWlnaHRcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChpc1plcm9BcmVhKSB7XG4gICAgICAgIC8vIERldGVybWluZSBidWZmZXIgZGlzdGFuY2UgYmFzZWQgb24gc3BhdGlhbCByZWZlcmVuY2VcbiAgICAgICAgLy8gV2ViIE1lcmNhdG9yIHVzZXMgbWV0ZXJzLCBTdGF0ZSBQbGFuZSB0eXBpY2FsbHkgdXNlcyBmZWV0XG4gICAgICAgIGNvbnN0IGlzTWV0cmljID0gaXNNZXRyaWNTcGF0aWFsUmVmZXJlbmNlKG1hcFZpZXcuc3BhdGlhbFJlZmVyZW5jZSlcbiAgICAgICAgY29uc3QgYnVmZmVyRGlzdGFuY2UgPSBpc01ldHJpYyBcbiAgICAgICAgICA/IHplcm9BcmVhQnVmZmVyRmVldCAqIEZFRVRfVE9fTUVURVJTICAvLyBDb252ZXJ0IGZlZXQgdG8gbWV0ZXJzICh+OTEuNDRtIGZvciAzMDBmdClcbiAgICAgICAgICA6IHplcm9BcmVhQnVmZmVyRmVldCAgICAgICAgICAgICAgICAgICAgLy8gVXNlIGZlZXQgZGlyZWN0bHlcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRXh0ZW50ID0gZXh0ZW50LmNsb25lKClcbiAgICAgICAgXG4gICAgICAgIC8vIEV4cGFuZCB0aGUgZXh0ZW50IGJ5IHRoZSBidWZmZXIgZGlzdGFuY2UgaW4gYWxsIGRpcmVjdGlvbnNcbiAgICAgICAgLy8gVGhpcyBjcmVhdGVzIGEgc3F1YXJlIGV4dGVudCBjZW50ZXJlZCBvbiB0aGUgcG9pbnQocylcbiAgICAgICAgZXh0ZW50ID0gZXhwYW5kWmVyb0FyZWFFeHRlbnQoZXh0ZW50LCBidWZmZXJEaXN0YW5jZSlcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnWk9PTScsIHtcbiAgICAgICAgICBldmVudDogJ3plcm8tYXJlYS1leHRlbnQtZXhwYW5kZWQnLFxuICAgICAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgYnVmZmVyRmVldDogemVyb0FyZWFCdWZmZXJGZWV0LFxuICAgICAgICAgIGJ1ZmZlckRpc3RhbmNlOiBidWZmZXJEaXN0YW5jZSxcbiAgICAgICAgICBzcGF0aWFsUmVmZXJlbmNlV2tpZDogbWFwVmlldy5zcGF0aWFsUmVmZXJlbmNlLndraWQsXG4gICAgICAgICAgaXNNZXRyaWM6IGlzTWV0cmljLFxuICAgICAgICAgIG9yaWdpbmFsRXh0ZW50OiB7XG4gICAgICAgICAgICB4bWluOiBvcmlnaW5hbEV4dGVudC54bWluLFxuICAgICAgICAgICAgeG1heDogb3JpZ2luYWxFeHRlbnQueG1heCxcbiAgICAgICAgICAgIHltaW46IG9yaWdpbmFsRXh0ZW50LnltaW4sXG4gICAgICAgICAgICB5bWF4OiBvcmlnaW5hbEV4dGVudC55bWF4LFxuICAgICAgICAgICAgd2lkdGg6IG9yaWdpbmFsRXh0ZW50LndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBvcmlnaW5hbEV4dGVudC5oZWlnaHRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGV4cGFuZGVkRXh0ZW50OiB7XG4gICAgICAgICAgICB4bWluOiBleHRlbnQueG1pbixcbiAgICAgICAgICAgIHhtYXg6IGV4dGVudC54bWF4LFxuICAgICAgICAgICAgeW1pbjogZXh0ZW50LnltaW4sXG4gICAgICAgICAgICB5bWF4OiBleHRlbnQueW1heCxcbiAgICAgICAgICAgIHdpZHRoOiBleHRlbnQud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGV4dGVudC5oZWlnaHRcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFpvb20gdG8gdGhlIGV4dGVudCB3aXRoIHBhZGRpbmdcbiAgICAgIC8vIFRoZSBwYWRkaW5nIGZyb20gb3B0aW9ucyBpcyBhcHBsaWVkIGhlcmUsIGluIGFkZGl0aW9uIHRvIGFueSB6ZXJvLWFyZWEgZXhwYW5zaW9uXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1pPT00nLCB7XG4gICAgICAgIGV2ZW50OiAnY2FsbGluZy1tYXBWaWV3LWdvVG8nLFxuICAgICAgICBmaW5hbEV4dGVudDoge1xuICAgICAgICAgIHhtaW46IGV4dGVudC54bWluLFxuICAgICAgICAgIHhtYXg6IGV4dGVudC54bWF4LFxuICAgICAgICAgIHltaW46IGV4dGVudC55bWluLFxuICAgICAgICAgIHltYXg6IGV4dGVudC55bWF4LFxuICAgICAgICAgIHdpZHRoOiBleHRlbnQud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiBleHRlbnQuaGVpZ2h0LFxuICAgICAgICAgIHNwYXRpYWxSZWZlcmVuY2U6IGV4dGVudC5zcGF0aWFsUmVmZXJlbmNlPy53a2lkXG4gICAgICAgIH0sXG4gICAgICAgIHBhZGRpbmdcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IGdvVG9SZXN1bHQgPSBhd2FpdCBtYXBWaWV3LmdvVG8oZXh0ZW50LCB7IHBhZGRpbmcgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdaT09NJywge1xuICAgICAgICBldmVudDogJ21hcFZpZXctZ29Uby1jb21wbGV0ZScsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGdvVG9SZXN1bHQ6IGdvVG9SZXN1bHQgPyAncmV0dXJuZWQtdmFsdWUnIDogJ25vLXJldHVybi12YWx1ZSdcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnWk9PTScsIHtcbiAgICAgICAgZXZlbnQ6ICd6b29tLXNraXBwZWQnLFxuICAgICAgICByZWFzb246ICduby1leHRlbnQtY2FsY3VsYXRlZCdcbiAgICAgIH0pXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnWk9PTScsIHtcbiAgICAgIGV2ZW50OiAnem9vbS1nb1RvLWVycm9yJyxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHMubGVuZ3RoXG4gICAgfSlcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cblxuXG5cblxuIiwiaW1wb3J0IHsgQmFzZVZlcnNpb25NYW5hZ2VyIH0gZnJvbSAnamltdS1jb3JlJ1xuXG5jbGFzcyBWZXJzaW9uTWFuYWdlciBleHRlbmRzIEJhc2VWZXJzaW9uTWFuYWdlciB7XG4gIHZlcnNpb25zID0gW3tcbiAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgIGRlc2NyaXB0aW9uOiAnVGhlIGZpcnN0IHZlcnNpb24uJyxcbiAgICB1cGdyYWRlcjogKG9sZENvbmZpZykgPT4ge1xuICAgICAgcmV0dXJuIG9sZENvbmZpZ1xuICAgIH1cbiAgfV1cbn1cblxuZXhwb3J0IGNvbnN0IHZlcnNpb25NYW5hZ2VyID0gbmV3IFZlcnNpb25NYW5hZ2VyKClcblxuXG5cbiIsIi8qKlxuICogV2lkZ2V0IHZlcnNpb24gbnVtYmVyLlxuICogQmFzZSB2ZXJzaW9uIG1hdGNoZXMgRXhwZXJpZW5jZSBCdWlsZGVyIHZlcnNpb24gKDEuMTkuMCkuXG4gKiBSZWxlYXNlIG51bWJlciBpbmNyZW1lbnRzIG9uIG1ham9yIGNoYW5nZXMgKDAwMSwgMDAyLCAwMDMsIC4uLikuXG4gKiBNaW5vciB2ZXJzaW9uIGluY3JlbWVudHMgb24gc21hbGxlciBmaXhlcyBiZXR3ZWVuIG1ham9yIHJlbGVhc2VzIChyMDE1LjEsIHIwMTUuMiwgLi4uKS5cbiAqIFxuICogVG8gaW5jcmVtZW50OlxuICogLSBNYWpvciBjaGFuZ2U6IFVwZGF0ZSBSRUxFQVNFX05VTUJFUiAoZS5nLiwgMDE1IC0+IDAxNikgYW5kIHJlc2V0IE1JTk9SX1ZFUlNJT04gdG8gMFxuICogLSBNaW5vciBmaXg6IEluY3JlbWVudCBNSU5PUl9WRVJTSU9OIChlLmcuLCAxIC0+IDIpIHdoaWxlIGtlZXBpbmcgc2FtZSBSRUxFQVNFX05VTUJFUlxuICovXG5jb25zdCBCQVNFX1ZFUlNJT04gPSAnMS4xOS4wJ1xuY29uc3QgUkVMRUFTRV9OVU1CRVIgPSAnMDE5JyAvLyBJbmNyZW1lbnQgb24gbWFqb3IgY2hhbmdlcyAoMDAxLCAwMDIsIDAwMywgLi4uKVxuY29uc3QgTUlOT1JfVkVSU0lPTiA9ICczMScgLy8gSW5jcmVtZW50IG9uIG1pbm9yIGZpeGVzIGJldHdlZW4gbWFqb3IgcmVsZWFzZXMgKDEsIDIsIDMsIC4uLilcblxuZXhwb3J0IGNvbnN0IFdJREdFVF9WRVJTSU9OID0gTUlOT1JfVkVSU0lPTiAmJiBOdW1iZXIoTUlOT1JfVkVSU0lPTikgPiAwXG4gID8gYCR7QkFTRV9WRVJTSU9OfS1yJHtSRUxFQVNFX05VTUJFUn0uJHtNSU5PUl9WRVJTSU9OfWBcbiAgOiBgJHtCQVNFX1ZFUlNJT059LXIke1JFTEVBU0VfTlVNQkVSfWBcblxuIiwiLyoqXG4gKiBTaGFyZWQgY29tbW9uIHV0aWxpdGllcyBhbmQgY29tcG9uZW50cyBmb3IgRXhwZXJpZW5jZSBCdWlsZGVyIHdpZGdldHNcbiAqIFxuICogVGhpcyBtb2R1bGUgZXhwb3J0cyBjb21tb24gZnVuY3Rpb25hbGl0eSB0aGF0IGNhbiBiZSBzaGFyZWQgYmV0d2VlblxuICogcXVlcnktc2ltcGxlLCBoZWxwZXItc2ltcGxlLCBhbmQgb3RoZXIgY3VzdG9tIHdpZGdldHMuXG4gKiBcbiAqIFRoaXMgaXMgdGhlIGVudHJ5IHBvaW50IGZvciAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vY29tbW9uLWNvbXBvbmVudHMnXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi91dGlscydcbmV4cG9ydCAqIGZyb20gJy4vY29tbW9uL3VzZS1kcy1leGlzdHMnXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi9kYXRhLXNvdXJjZS10aXAnXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi9kZWJ1Zy1sb2dnZXInXG5cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgTW9kYWwsIE1vZGFsQm9keSwgTW9kYWxGb290ZXIsIFBhbmVsSGVhZGVyLCBJY29uLCB0eXBlIFRoZW1lUHJvcHMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgd2l0aFRoZW1lIH0gZnJvbSAnamltdS10aGVtZSdcbmltcG9ydCBpY29uRXJyb3IgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZydcbmNvbnN0IHsgdXNlU3RhdGUgfSA9IFJlYWN0XG5cbi8qKlxuICogQSBzaW1wbGUgRnVuY3Rpb25hbCBDb21wb25lbnQgc3RvcmluZyBzb21lIFN0YXRlcyB0aGF0IGFyZSBjb21tb25seSB1c2VkXG4gKi9cbmV4cG9ydCBjb25zdCBTdGF0ZUhvbGRlciA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7IGluaXRTdGF0ZSA9IHt9LCBjaGlsZHJlbiB9ID0gcHJvcHNcbiAgY29uc3QgZGVmYXVsdFN0YXRlTWFwID0ge1xuICAgIHZpc2libGU6IHRydWUsXG4gICAgcmVmQ29udGFpbmVyOiBudWxsXG4gIH1cbiAgY29uc3QgdXNlU3RhdGVNYXAgPSB7XG4gICAgdmlzaWJsZTogdXNlU3RhdGUoJ3Zpc2libGUnIGluIGluaXRTdGF0ZSA/IGluaXRTdGF0ZS52aXNpYmxlIDogZGVmYXVsdFN0YXRlTWFwLnZpc2libGUpLFxuICAgIHJlZkNvbnRhaW5lcjogdXNlU3RhdGUoJ3JlZkNvbnRhaW5lcicgaW4gaW5pdFN0YXRlID8gaW5pdFN0YXRlLnJlZkNvbnRhaW5lciA6IGRlZmF1bHRTdGF0ZU1hcC5yZWZDb250YWluZXIpLFxuICAgIGN1c3RvbURhdGE6IHVzZVN0YXRlKHsgLi4uaW5pdFN0YXRlLmN1c3RvbURhdGEgfSlcbiAgfVxuICByZXR1cm4gPFJlYWN0LkZyYWdtZW50PntjaGlsZHJlbih1c2VTdGF0ZU1hcCl9PC9SZWFjdC5GcmFnbWVudD5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBEaWFsb2dQYW5lbFByb3BzIHtcbiAgcGFuZWxWaXNpYmxlOiBib29sZWFuXG4gIHNldFBhbmVsVmlzaWJsZTogKHZpc2libGU6IGJvb2xlYW4pID0+IHZvaWRcbiAgZ2V0STE4bk1lc3NhZ2U6IChpZDogc3RyaW5nKSA9PiBhbnlcbiAgaXNNb2RhbD86IGJvb2xlYW5cbiAgdGl0bGU/OiBhbnlcbiAgYm9keUNvbnRlbnQ/OiBhbnlcbiAgaGFzSGVhZGVyPzogYm9vbGVhblxuICBoYXNGb290ZXI/OiBib29sZWFuXG59XG5cbi8qKlxuICogQSBkaWFsb2cgcG9wdXBcbiAqL1xuZXhwb3J0IGNvbnN0IERpYWxvZ1BhbmVsID0gd2l0aFRoZW1lKChwcm9wczogRGlhbG9nUGFuZWxQcm9wcyAmIFRoZW1lUHJvcHMpID0+IHtcbiAgY29uc3QgeyB0aGVtZSwgcGFuZWxWaXNpYmxlLCBzZXRQYW5lbFZpc2libGUsIGdldEkxOG5NZXNzYWdlLCBpc01vZGFsID0gdHJ1ZSwgdGl0bGUgPSBnZXRJMThuTWVzc2FnZSgncXVlcnlNZXNzYWdlJyksIGJvZHlDb250ZW50ID0gJycsIGhhc0hlYWRlciA9IHRydWUsIGhhc0Zvb3RlciA9IHRydWUgfSA9IHByb3BzXG4gIGNvbnN0IHRvZ2dsZSA9ICgpID0+IHsgc2V0UGFuZWxWaXNpYmxlKGZhbHNlKSB9XG4gIGNvbnN0IGdldENvbnRlbnQgPSAoKSA9PiA8UmVhY3QuRnJhZ21lbnQ+XG4gICAge1xuICAgICAgaGFzSGVhZGVyICYmXG4gICAgICAgIDxQYW5lbEhlYWRlciBjbGFzc05hbWU9J3B5LTInIHRpdGxlPXt0aXRsZX0gb25DbG9zZT17dG9nZ2xlfSAvPlxuICAgIH1cbiAgICA8TW9kYWxCb2R5Pntib2R5Q29udGVudH08L01vZGFsQm9keT5cbiAgICB7XG4gICAgICBoYXNGb290ZXIgJiZcbiAgICAgICAgPE1vZGFsRm9vdGVyPlxuICAgICAgICAgIDxCdXR0b24gb25DbGljaz17dG9nZ2xlfT57Z2V0STE4bk1lc3NhZ2UoJ29rJyl9PC9CdXR0b24+XG4gICAgICAgIDwvTW9kYWxGb290ZXI+XG4gICAgfVxuICA8L1JlYWN0LkZyYWdtZW50PlxuICBjb25zdCBnZW5lcmFsQ2xhc3NOYW1lID0gJ3VpLXVuaXQtZGlhbG9nLXBhbmVsJ1xuICBjb25zdCByZW5kZXJNb2RhbENvbnRlbnQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxNb2RhbCBjbGFzc05hbWU9e2dlbmVyYWxDbGFzc05hbWV9IGlzT3Blbj17cGFuZWxWaXNpYmxlfSB0b2dnbGU9e3RvZ2dsZX0gYmFja2Ryb3A9J3N0YXRpYyc+XG4gICAgICAgIHtnZXRDb250ZW50KCl9XG4gICAgICA8L01vZGFsPlxuICAgIClcbiAgfVxuICBjb25zdCByZW5kZXJOb25Nb2RhbENvbnRlbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgZ2V0U3R5bGUgPSAoKSA9PiBjc3NgXG4gICAgICAmLnVpLXVuaXQtZGlhbG9nLXBhbmVsLm1vZGFsLWRpYWxvZyB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIC5tb2RhbC1jb250ZW50IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLnJlZi5wYWxldHRlLm5ldXRyYWxbNjAwXX07XG4gICAgICAgICAgY29sb3I6ICR7dGhlbWUucmVmLnBhbGV0dGUuYmxhY2t9O1xuICAgICAgICAgIGZvbnQtc2l6ZTogLjc1cmVtO1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIC5wYW5lbC1oZWFkZXIge1xuICAgICAgICAgICAgZm9udC1zaXplOiAuODEyNXJlbTtcbiAgICAgICAgICAgIHBhZGRpbmc6IC42MjVyZW07XG4gICAgICAgICAgfVxuICAgICAgICAgIC5tb2RhbC1ib2R5IHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDAgLjYyNXJlbSAuNzVyZW07XG4gICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2dlbmVyYWxDbGFzc05hbWV9IG1vZGFsLWRpYWxvZyAke3BhbmVsVmlzaWJsZSA/ICcnIDogJ2NvbGxhcHNlJ31gfSBjc3M9e2dldFN0eWxlKCl9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbW9kYWwtY29udGVudCc+XG4gICAgICAgICAge2dldENvbnRlbnQoKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbiAgcmV0dXJuIGlzTW9kYWwgPyByZW5kZXJNb2RhbENvbnRlbnQoKSA6IHJlbmRlck5vbk1vZGFsQ29udGVudCgpXG59KVxuXG5leHBvcnQgZW51bSBFbnRpdHlTdGF0dXNUeXBlIHtcbiAgTm9uZSA9ICcnLFxuICBJbml0ID0gJ2luaXQnLFxuICBMb2FkaW5nID0gJ2xvYWRpbmcnLFxuICBMb2FkZWQgPSAnbG9hZGVkJyxcbiAgV2FybmluZyA9ICd3YXJuaW5nJyxcbiAgRXJyb3IgPSAnZXJyb3InLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXR1c0luZGljYXRvclByb3BzIHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIHN0YXR1c1R5cGU/OiBFbnRpdHlTdGF0dXNUeXBlXG4gIHRpdGxlPzogc3RyaW5nXG59XG5cbi8qKlxuICogQW4gYW5pbWF0YWJsZSBpY29uIHJlcHJlc2VudGluZyBzdGF0dXNcbiAqL1xuZXhwb3J0IGNvbnN0IFN0YXR1c0luZGljYXRvciA9IHdpdGhUaGVtZSgocHJvcHM6IFN0YXR1c0luZGljYXRvclByb3BzICYgVGhlbWVQcm9wcykgPT4ge1xuICBjb25zdCB7IHRoZW1lLCBjbGFzc05hbWUsIHRpdGxlLCBzdGF0dXNUeXBlIH0gPSBwcm9wc1xuICBjb25zdCBnZXRTdHlsZSA9ICgpID0+IGNzc2BcbiAgICAmLnVpLXVuaXQtc3RhdHVzLWluZGljYXRvciB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgJi51aS11bml0LXN0YXR1cy1pbmRpY2F0b3Jfc3RhdHVzLXR5cGUtbG9hZGluZyB7XG4gICAgICAgICY6YmVmb3JlIHtcbiAgICAgICAgICBAa2V5ZnJhbWVzIGxvYWRpbmcge1xuICAgICAgICAgICAgMCUge3RyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9O1xuICAgICAgICAgICAgMTAwJSB7dHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKX07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgIHdpZHRoOiAxcmVtO1xuICAgICAgICAgIGhlaWdodDogMXJlbTtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lPy5yZWYucGFsZXR0ZT8ubmV1dHJhbD8uWzUwMF19O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgJHt0aGVtZT8uc3lzLmNvbG9yPy5wcmltYXJ5Py5tYWlufTtcbiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICAgIGFuaW1hdGlvbjogbG9hZGluZyAycyBpbmZpbml0ZSBsaW5lYXI7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAuMjVyZW07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIGBcbiAgcmV0dXJuIChcbiAgICBzdGF0dXNUeXBlICYmXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7Y2xhc3NOYW1lID8/ICcnfSB1aS11bml0LXN0YXR1cy1pbmRpY2F0b3IgdWktdW5pdC1zdGF0dXMtaW5kaWNhdG9yX3N0YXR1cy10eXBlLSR7c3RhdHVzVHlwZX1gfSB0aXRsZT17dGl0bGV9IGNzcz17Z2V0U3R5bGUoKX0gLz5cbiAgKVxufSlcblxuZXhwb3J0IGludGVyZmFjZSBFcnJvck1lc3NhZ2VQcm9wcyB7XG4gIGVycm9yOiBzdHJpbmcgfCBudWxsXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBvbkRpc21pc3M/OiAoKSA9PiB2b2lkXG59XG5cbi8qKlxuICogU2ltcGxlIGVycm9yIG1lc3NhZ2UgY29tcG9uZW50IGZvciBkaXNwbGF5aW5nIHVzZXItZmFjaW5nIGVycm9ycy5cbiAqIFVzZSBEYXRhU291cmNlVGlwIGZvciBkYXRhIHNvdXJjZS1yZWxhdGVkIGVycm9ycy5cbiAqL1xuZXhwb3J0IGNvbnN0IEVycm9yTWVzc2FnZSA9IChwcm9wczogRXJyb3JNZXNzYWdlUHJvcHMpID0+IHtcbiAgY29uc3QgeyBlcnJvciwgY2xhc3NOYW1lID0gJycsIG9uRGlzbWlzcyB9ID0gcHJvcHNcbiAgXG4gIGlmICghZXJyb3IpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICBjb25zdCBlcnJvclN0eWxlID0gY3NzYFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgbWFyZ2luOiAwLjVyZW0gMDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3ItZXJyb3ItbGlnaHQpO1xuICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItZXJyb3ItZGFyayk7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgZ2FwOiAwLjVyZW07XG4gICAgXG4gICAgLmVycm9yLWljb24ge1xuICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgfVxuICAgIFxuICAgIC5lcnJvci10ZXh0IHtcbiAgICAgIGZsZXg6IDE7XG4gICAgfVxuICAgIFxuICAgIC5lcnJvci1kaXNtaXNzIHtcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgcGFkZGluZzogMC4yNXJlbTtcbiAgICAgICY6aG92ZXIge1xuICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICB9XG4gICAgfVxuICBgXG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgZXJyb3ItbWVzc2FnZSAke2NsYXNzTmFtZX1gfSBjc3M9e2Vycm9yU3R5bGV9IHJvbGU9XCJhbGVydFwiPlxuICAgICAgPEljb24gaWNvbj17aWNvbkVycm9yfSBjbGFzc05hbWU9XCJlcnJvci1pY29uXCIgc2l6ZT1cInNtXCIgLz5cbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImVycm9yLXRleHRcIj57ZXJyb3J9PC9zcGFuPlxuICAgICAge29uRGlzbWlzcyAmJiAoXG4gICAgICAgIDxCdXR0b24gXG4gICAgICAgICAgc2l6ZT1cInNtXCIgXG4gICAgICAgICAgdHlwZT1cInRlcnRpYXJ5XCIgXG4gICAgICAgICAgaWNvbiBcbiAgICAgICAgICBvbkNsaWNrPXtvbkRpc21pc3N9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiZXJyb3ItZGlzbWlzc1wiXG4gICAgICAgICAgYXJpYS1sYWJlbD1cIkRpc21pc3MgZXJyb3JcIlxuICAgICAgICA+XG4gICAgICAgICAgPEljb24gaWNvbj17cmVxdWlyZSgnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2Nsb3NlLnN2ZycpLmRlZmF1bHR9IHNpemU9XCJzbVwiIC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBnZXRBcHBTdG9yZSxcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIFVzZURhdGFTb3VyY2UsXG4gIGFwcENvbmZpZ1V0aWxzLFxuICB0eXBlIElNRGF0YVNvdXJjZUluZm8sXG4gIERhdGFTb3VyY2VTdGF0dXMsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICBob29rc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBJY29uLCBUb29sdGlwLCBCdXR0b24sIGRlZmF1bHRNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBFbnRpdHlTdGF0dXNUeXBlLCBTdGF0dXNJbmRpY2F0b3IgfSBmcm9tICcuL2NvbW1vbi1jb21wb25lbnRzJ1xuaW1wb3J0IGljb25XYXJuaW5nIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZydcbmltcG9ydCBpY29uRXJyb3IgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZydcbmltcG9ydCB7IHVzZURhdGFTb3VyY2VFeGlzdHMgfSBmcm9tICcuL3VzZS1kcy1leGlzdHMnXG5cbmludGVyZmFjZSBDb250ZW50UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHVzZURhdGFTb3VyY2U6IEltbXV0YWJsZU9iamVjdDxVc2VEYXRhU291cmNlPlxuICBvblN0YXR1c0NoYW5nZT86IChlbmFibGVkOiBib29sZWFuKSA9PiB2b2lkXG4gIG9uRGF0YVNvdXJjZUNyZWF0ZWQ/OiAoZHM6IERhdGFTb3VyY2UpID0+IHZvaWRcbiAgc2hvd01lc3NhZ2U/OiBib29sZWFuXG59XG5cbi8qKlxuICogU2hvdyBpY29uIGFuZCBtZXNzYWdlIGlmIHRoZSBkYXRhIHNvdXJjZSBkb2Vzbid0IHdvcmsuXG4gKiBAcGFyYW0gcHJvcHNcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBEYXRhU291cmNlVGlwIChwcm9wczogQ29udGVudFByb3BzKSB7XG4gIGNvbnN0IHsgd2lkZ2V0SWQsIHVzZURhdGFTb3VyY2UsIG9uU3RhdHVzQ2hhbmdlLCBvbkRhdGFTb3VyY2VDcmVhdGVkLCBzaG93TWVzc2FnZSA9IGZhbHNlIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlcylcbiAgY29uc3QgZHNFeGlzdHM6IGJvb2xlYW4gPSB1c2VEYXRhU291cmNlRXhpc3RzKHsgd2lkZ2V0SWQsIHVzZURhdGFTb3VyY2VJZDogdXNlRGF0YVNvdXJjZS5kYXRhU291cmNlSWQgfSlcbiAgY29uc3QgW2RzU3RhdHVzLCBzZXREc1N0YXR1c10gPSBSZWFjdC51c2VTdGF0ZTwnZXJyb3InIHwgJ3dhcm5pbmcnIHwgJ2NyZWF0aW5nJz4obnVsbClcbiAgY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcblxuICBjb25zdCBoYW5kbGVEc0luZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5mbzogSU1EYXRhU291cmNlSW5mbykgPT4ge1xuICAgIGlmIChpbmZvKSB7XG4gICAgICBjb25zdCB7IHN0YXR1cywgaW5zdGFuY2VTdGF0dXMgfSA9IGluZm9cbiAgICAgIGlmIChpbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Ob3RDcmVhdGVkKSB7XG4gICAgICAgIHNldERzU3RhdHVzKCdjcmVhdGluZycpXG4gICAgICAgIG9uU3RhdHVzQ2hhbmdlPy4oZmFsc2UpXG4gICAgICB9IGVsc2UgaWYgKGluc3RhbmNlU3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLkNyZWF0ZUVycm9yIHx8IHN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Mb2FkRXJyb3IpIHtcbiAgICAgICAgc2V0RHNTdGF0dXMoJ2Vycm9yJylcbiAgICAgICAgb25TdGF0dXNDaGFuZ2U/LihmYWxzZSlcbiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KSB7XG4gICAgICAgIHNldERzU3RhdHVzKCd3YXJuaW5nJylcbiAgICAgICAgb25TdGF0dXNDaGFuZ2U/LihmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldERzU3RhdHVzKG51bGwpXG4gICAgICAgIG9uU3RhdHVzQ2hhbmdlPy4odHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtvblN0YXR1c0NoYW5nZV0pXG5cbiAgY29uc3QgaGFuZGxlRHNDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKGRzOiBEYXRhU291cmNlKSA9PiB7XG4gICAgc2V0RGF0YVNvdXJjZShkcylcbiAgICBvbkRhdGFTb3VyY2VDcmVhdGVkPy4oZHMpXG4gIH0sIFtvbkRhdGFTb3VyY2VDcmVhdGVkXSlcblxuICBjb25zdCBoYW5kbGVEc0NyZWF0ZUZhaWxlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXREYXRhU291cmNlKG51bGwpXG4gICAgc2V0RHNTdGF0dXMoJ2Vycm9yJylcbiAgICBvblN0YXR1c0NoYW5nZT8uKGZhbHNlKVxuICB9LCBbb25TdGF0dXNDaGFuZ2VdKVxuXG4gIGxldCBzdGF0dXNJY29uXG4gIGxldCBzdGF0dXNNc2dcbiAgbGV0IGNvbG9yXG4gIGlmIChkc1N0YXR1cyA9PT0gJ2NyZWF0aW5nJykge1xuICAgIHN0YXR1c0ljb24gPSBpY29uRXJyb3JcbiAgICBzdGF0dXNNc2cgPSBnZXRJMThuTWVzc2FnZSgnbG9hZGluZycpXG4gIH0gZWxzZSBpZiAoIWRzRXhpc3RzIHx8IGRzU3RhdHVzID09PSAnZXJyb3InKSB7XG4gICAgc3RhdHVzSWNvbiA9IGljb25FcnJvclxuICAgIHN0YXR1c01zZyA9IGdldEkxOG5NZXNzYWdlKCdkYXRhU291cmNlQ3JlYXRlRXJyb3InKVxuICAgIGNvbG9yID0gJ3ZhcigtLXN5cy1jb2xvci1lcnJvci1tYWluKSdcbiAgfSBlbHNlIGlmIChkc1N0YXR1cyA9PT0gJ3dhcm5pbmcnKSB7XG4gICAgbGV0IGxhYmVsID0gJydcbiAgICBjb25zdCBvcmlnaW5EcyA9IGRhdGFTb3VyY2U/LmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXVxuICAgIGlmIChvcmlnaW5Ecykge1xuICAgICAgbGFiZWwgPSBvcmlnaW5Ecy5nZXRMYWJlbCgpIHx8IG9yaWdpbkRzLmdldERhdGFTb3VyY2VKc29uKCkuc291cmNlTGFiZWxcbiAgICB9IGVsc2UgaWYgKGRhdGFTb3VyY2UpIHtcbiAgICAgIGxhYmVsID0gZGF0YVNvdXJjZS5nZXRMYWJlbCgpIHx8IGRhdGFTb3VyY2UuZ2V0RGF0YVNvdXJjZUpzb24oKS5sYWJlbFxuICAgIH1cblxuICAgIGNvbnN0IHdpZGdldElkID0gYXBwQ29uZmlnVXRpbHMuZ2V0V2lkZ2V0SWRCeU91dHB1dERhdGFTb3VyY2UodXNlRGF0YVNvdXJjZSlcbiAgICBjb25zdCBhcHBTdGF0ZSA9IHdpbmRvdz8uamltdUNvbmZpZz8uaXNCdWlsZGVyXG4gICAgICA/IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlclxuICAgICAgOiBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKClcbiAgICBjb25zdCB3aWRnZXRMYWJlbCA9IGFwcFN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXT8ubGFiZWxcblxuICAgIGNvbG9yID0gJ3ZhcigtLXN5cy1jb2xvci13YXJuaW5nLWRhcmspJ1xuICAgIHN0YXR1c0ljb24gPSBpY29uV2FybmluZ1xuICAgIHN0YXR1c01zZyA9IGdldEkxOG5NZXNzYWdlKCdvdXRwdXREYXRhSXNOb3RHZW5lcmF0ZWQnLCB7XG4gICAgICBvdXRwdXREc0xhYmVsOiBsYWJlbCA/PyAnJyxcbiAgICAgIHNvdXJjZVdpZGdldE5hbWU6IHdpZGdldExhYmVsID8/ICcnXG4gICAgfSlcbiAgfVxuICByZXR1cm4gKFxuICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgIHtkc0V4aXN0cyAmJiAoXG4gICAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50XG4gICAgICAgICAgdXNlRGF0YVNvdXJjZT17dXNlRGF0YVNvdXJjZX1cbiAgICAgICAgICBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVEc0luZm9DaGFuZ2V9XG4gICAgICAgICAgb25EYXRhU291cmNlQ3JlYXRlZD17aGFuZGxlRHNDcmVhdGVkfVxuICAgICAgICAgIG9uQ3JlYXRlRGF0YVNvdXJjZUZhaWxlZD17aGFuZGxlRHNDcmVhdGVGYWlsZWR9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgICAge2RzU3RhdHVzID09PSAnY3JlYXRpbmcnICYmIDxTdGF0dXNJbmRpY2F0b3Igc3RhdHVzVHlwZT17RW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nfSB0aXRsZT17c3RhdHVzTXNnfSAvPn1cbiAgICAgIHsoIWRzRXhpc3RzIHx8IGRzU3RhdHVzID09PSAnZXJyb3InIHx8IGRzU3RhdHVzID09PSAnd2FybmluZycpICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtzdGF0dXNNc2d9PlxuICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgdHlwZT0ndGVydGlhcnknIGljb24+PEljb24gaWNvbj17c3RhdHVzSWNvbn0gY29sb3I9e2NvbG9yfSAvPjwvQnV0dG9uPlxuICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICB7c2hvd01lc3NhZ2UgJiYgPGRpdiBjbGFzc05hbWU9J3N0YXR1cy1tZXNzYWdlJz57c3RhdHVzTXNnfTwvZGl2Pn1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gIClcbn1cblxuXG5cbiIsIi8qKlxuICogQ29uZmlndXJhYmxlIGRlYnVnIGxvZ2dpbmcgdXRpbGl0eSBmb3IgRXhwZXJpZW5jZSBCdWlsZGVyIHdpZGdldHNcbiAqIFxuICogVXNhZ2U6XG4gKiAtIEFkZCA/ZGVidWc9YWxsIHRvIFVSTCB0byBzZWUgYWxsIGRlYnVnIGxvZ3NcbiAqIC0gQWRkID9kZWJ1Zz1IQVNILEZPUk0gdG8gc2VlIHNwZWNpZmljIGZlYXR1cmUgbG9nc1xuICogLSBBZGQgP2RlYnVnPWZhbHNlIHRvIGRpc2FibGUgYWxsIGRlYnVnIGxvZ3NcbiAqIFxuICogRmVhdHVyZXMgKFF1ZXJ5U2ltcGxlKTpcbiAqIC0gQlVHOiBLbm93biBidWdzL2lzc3VlcyAoYWx3YXlzIGxvZ3MsIGV2ZW4gaWYgZGVidWc9ZmFsc2UpIC0gVXNlIGZvcm1hdDogYnVnSWQsIGNhdGVnb3J5LCBkZXNjcmlwdGlvblxuICogLSBIQVNIOiBIYXNoIHBhcmFtZXRlciBwcm9jZXNzaW5nXG4gKiAtIEZPUk06IFF1ZXJ5IGZvcm0gaW50ZXJhY3Rpb25zXG4gKiAtIFRBU0s6IFF1ZXJ5IHRhc2sgbWFuYWdlbWVudFxuICogLSBaT09NOiBab29tIGJlaGF2aW9yXG4gKiAtIE1BUC1FWFRFTlQ6IE1hcCBleHRlbnQgY2hhbmdlc1xuICogLSBEQVRBLUFDVElPTjogRGF0YSBhY3Rpb24gZXhlY3V0aW9uIChBZGQgdG8gTWFwLCBldGMuKVxuICogLSBHUk9VUDogUXVlcnkgZ3JvdXBpbmcgYW5kIGRyb3Bkb3duIHNlbGVjdGlvblxuICogLSBTRUxFQ1RJT046IFNlbGVjdGlvbiBkZXRlY3Rpb24gYW5kIGlkZW50aWZ5IHBvcHVwIHRyYWNraW5nXG4gKiAtIFdJREdFVC1TVEFURTogV2lkZ2V0IGxpZmVjeWNsZSBldmVudHMgKG9wZW4vY2xvc2UgaGFuZHNoYWtlKVxuICogLSBSRVNUT1JFOiBTZWxlY3Rpb24gcmVzdG9yYXRpb24gd2hlbiB3aWRnZXQgb3BlbnNcbiAqIC0gUkVTVUxUUy1NT0RFOiBSZXN1bHRzIG1hbmFnZW1lbnQgbW9kZSBzZWxlY3Rpb24gKENyZWF0ZSBuZXcsIEFkZCB0bywgUmVtb3ZlIGZyb20pXG4gKiAtIEVYUEFORC1DT0xMQVBTRTogRXhwYW5kL2NvbGxhcHNlIHN0YXRlIG1hbmFnZW1lbnQgZm9yIHJlc3VsdCBpdGVtc1xuICogLSBHUkFQSElDUy1MQVlFUjogR3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KVxuICogLSBFVkVOVFM6IEV2ZW50IGxpc3RlbmVyIHNldHVwL2NsZWFudXAgYW5kIGN1c3RvbSBldmVudCBkaXNwYXRjaGluZ1xuICogXG4gKiBUZW1wb3JhcnkgTWlncmF0aW9uIEZlYXR1cmVzICh3aWxsIGJlIHJlbW92ZWQgYWZ0ZXIgbWlncmF0aW9uIGNvbXBsZXRlKTpcbiAqIC0gQ0hVTkstMS1DT01QQVJFOiBDaHVuayAxIChVUkwgUGFyYW1ldGVyKSBjb21wYXJpc29uIGxvZ3NcbiAqIC0gQ0hVTkstMS1NSVNNQVRDSDogQ2h1bmsgMSBtaXNtYXRjaCB3YXJuaW5nc1xuICogLSBDSFVOSy0yLUNPTVBBUkU6IENodW5rIDIgKFZpc2liaWxpdHkpIGNvbXBhcmlzb24gbG9nc1xuICogLSBDSFVOSy0yLU1JU01BVENIOiBDaHVuayAyIG1pc21hdGNoIHdhcm5pbmdzXG4gKiAtIENIVU5LLTMtQ09NUEFSRTogQ2h1bmsgMyAoU2VsZWN0aW9uL1Jlc3RvcmF0aW9uKSBjb21wYXJpc29uIGxvZ3NcbiAqIC0gQ0hVTkstMy1ERUNJU0lPTjogQ2h1bmsgMyBkZWNpc2lvbiBwb2ludCBsb2dzXG4gKiAtIENIVU5LLTMtRkFMTEJBQ0s6IENodW5rIDMgZmFsbGJhY2sgbG9naWMgbG9nc1xuICogLSBDSFVOSy00LUNPTVBBUkU6IENodW5rIDQgKEdyYXBoaWNzIExheWVyKSBjb21wYXJpc29uIGxvZ3NcbiAqIC0gQ0hVTkstNS1DT01QQVJFOiBDaHVuayA1IChBY2N1bXVsYXRlZCBSZWNvcmRzKSBjb21wYXJpc29uIGxvZ3NcbiAqIC0gQ0hVTkstNi1DT01QQVJFOiBDaHVuayA2IChNYXAgVmlldykgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTYtTUlTTUFUQ0g6IENodW5rIDYgbWlzbWF0Y2ggd2FybmluZ3NcbiAqIFxuICogRmVhdHVyZXMgKEhlbHBlclNpbXBsZSk6XG4gKiAtIEhBU0g6IEhhc2ggcGFyYW1ldGVyIG1vbml0b3JpbmcgYW5kIHdpZGdldCBvcGVuaW5nXG4gKiAtIFNFTEVDVElPTjogU2VsZWN0aW9uIHRyYWNraW5nIGZyb20gUXVlcnlTaW1wbGVcbiAqIC0gV0lER0VULVNUQVRFOiBXaWRnZXQgc3RhdGUgaGFuZHNoYWtlIChvcGVuL2Nsb3NlIGV2ZW50cylcbiAqIC0gUkVTVE9SRTogU2VsZWN0aW9uIHJlc3RvcmF0aW9uIGF0dGVtcHRzIGFuZCByZXN1bHRzXG4gKi9cblxudHlwZSBEZWJ1Z0ZlYXR1cmUgPSAnQlVHJyB8ICdIQVNIJyB8ICdIQVNILUVYRUMnIHwgJ0ZPUk0nIHwgJ1RBU0snIHwgJ1pPT00nIHwgJ01BUC1FWFRFTlQnIHwgJ0RBVEEtQUNUSU9OJyB8ICdHUk9VUCcgfCAnU0VMRUNUSU9OJyB8ICdXSURHRVQtU1RBVEUnIHwgJ1JFU1RPUkUnIHwgJ1JFU1RPUkUtQ09NUEFSRScgfCAnUkVTVUxUUy1NT0RFJyB8ICdFWFBBTkQtQ09MTEFQU0UnIHwgJ0dSQVBISUNTLUxBWUVSJyB8ICdFVkVOVFMnIHwgJ0NIVU5LLTEtQ09NUEFSRScgfCAnQ0hVTkstMS1NSVNNQVRDSCcgfCAnQ0hVTkstMi1DT01QQVJFJyB8ICdDSFVOSy0yLU1JU01BVENIJyB8ICdDSFVOSy0zLUNPTVBBUkUnIHwgJ0NIVU5LLTMtREVDSVNJT04nIHwgJ0NIVU5LLTMtRkFMTEJBQ0snIHwgJ0NIVU5LLTQtQ09NUEFSRScgfCAnQ0hVTkstNS1DT01QQVJFJyB8ICdDSFVOSy02LUNPTVBBUkUnIHwgJ0NIVU5LLTYtTUlTTUFUQ0gnIHwgJ2FsbCcgfCAnZmFsc2UnXG5cbmludGVyZmFjZSBEZWJ1Z0xvZ2dlck9wdGlvbnMge1xuICB3aWRnZXROYW1lOiBzdHJpbmdcbiAgZmVhdHVyZXM6IERlYnVnRmVhdHVyZVtdXG59XG5cbmNsYXNzIERlYnVnTG9nZ2VyIHtcbiAgcHJpdmF0ZSBlbmFibGVkRmVhdHVyZXM6IFNldDxEZWJ1Z0ZlYXR1cmU+ID0gbmV3IFNldCgpXG4gIHByaXZhdGUgaW5pdGlhbGl6ZWQgPSBmYWxzZVxuICBwcml2YXRlIHdpZGdldE5hbWU6IHN0cmluZ1xuICBwcml2YXRlIGZlYXR1cmVzOiBEZWJ1Z0ZlYXR1cmVbXVxuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IERlYnVnTG9nZ2VyT3B0aW9ucykge1xuICAgIHRoaXMud2lkZ2V0TmFtZSA9IG9wdGlvbnMud2lkZ2V0TmFtZVxuICAgIHRoaXMuZmVhdHVyZXMgPSBvcHRpb25zLmZlYXR1cmVzXG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHJldHVyblxuXG4gICAgLy8gQ2hlY2sgVVJMIHBhcmFtZXRlcnMgKGJvdGggY3VycmVudCB3aW5kb3cgYW5kIHBhcmVudCBmb3IgaWZyYW1lcylcbiAgICBsZXQgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgIGxldCBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuXG4gICAgLy8gSWYgbm90IGZvdW5kIGluIGN1cnJlbnQgd2luZG93LCBjaGVjayBwYXJlbnQgKG5lZWRlZCBmb3IgRXhCIGlmcmFtZXMpXG4gICAgaWYgKGRlYnVnVmFsdWUgPT09IG51bGwgJiYgd2luZG93LnBhcmVudCAhPT0gd2luZG93KSB7XG4gICAgICB0cnkge1xuICAgICAgICB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5wYXJlbnQubG9jYXRpb24uc2VhcmNoKVxuICAgICAgICBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBDcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb24gbWlnaHQgcHJldmVudCBhY2Nlc3MgdG8gcGFyZW50IGxvY2F0aW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlYnVnVmFsdWUgPT09ICdmYWxzZScpIHtcbiAgICAgIC8vIEV4cGxpY2l0bHkgZGlzYWJsZWRcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZGVidWdWYWx1ZSA9PT0gJ2FsbCcpIHtcbiAgICAgIC8vIEVuYWJsZSBhbGwgZmVhdHVyZXMgb25seSBpZiBleHBsaWNpdGx5IHNldCB0byAnYWxsJ1xuICAgICAgdGhpcy5mZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICBpZiAoZmVhdHVyZSAhPT0gJ2FsbCcgJiYgZmVhdHVyZSAhPT0gJ2ZhbHNlJykge1xuICAgICAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZChmZWF0dXJlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgY29uc29sZS5sb2coYFske3RoaXMud2lkZ2V0TmFtZX0tREVCVUddIEVuYWJsZWQgQUxMIGZlYXR1cmVzOmAsIEFycmF5LmZyb20odGhpcy5lbmFibGVkRmVhdHVyZXMpKVxuICAgIH0gZWxzZSBpZiAoZGVidWdWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgLy8gUGFyc2UgY29tbWEtc2VwYXJhdGVkIGZlYXR1cmUgbGlzdFxuICAgICAgY29uc3QgcmVxdWVzdGVkRmVhdHVyZXMgPSBkZWJ1Z1ZhbHVlLnNwbGl0KCcsJykubWFwKGYgPT4gZi50cmltKCkudG9VcHBlckNhc2UoKSBhcyBEZWJ1Z0ZlYXR1cmUpXG4gICAgICByZXF1ZXN0ZWRGZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICBpZiAoZmVhdHVyZS50b1VwcGVyQ2FzZSgpID09PSAnQUxMJykge1xuICAgICAgICAgIC8vIEVuYWJsZSBhbGwgZmVhdHVyZXMgZm9yIHRoaXMgd2lkZ2V0XG4gICAgICAgICAgdGhpcy5mZWF0dXJlcy5mb3JFYWNoKGYgPT4ge1xuICAgICAgICAgICAgaWYgKGYgIT09ICdhbGwnICYmIGYgIT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKGYpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZlYXR1cmVzLmluY2x1ZGVzKGZlYXR1cmUpKSB7XG4gICAgICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKGZlYXR1cmUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWVcbiAgfVxuXG4gIHByaXZhdGUgaXNFbmFibGVkKGZlYXR1cmU6IERlYnVnRmVhdHVyZSk6IGJvb2xlYW4ge1xuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gICAgXG4gICAgLy8gQlVHIGxldmVsIGFsd2F5cyBlbmFibGVkLCByZWdhcmRsZXNzIG9mIGRlYnVnIHN3aXRjaGVzIChldmVuIGlmIGRlYnVnPWZhbHNlKVxuICAgIGlmIChmZWF0dXJlID09PSAnQlVHJykge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuZW5hYmxlZEZlYXR1cmVzLmhhcygnYWxsJykpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aGlzLmVuYWJsZWRGZWF0dXJlcy5oYXMoZmVhdHVyZSlcbiAgfVxuXG4gIGxvZyhmZWF0dXJlOiBEZWJ1Z0ZlYXR1cmUsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIC8vIEJVRyBsZXZlbCBhbHdheXMgbG9ncywgZXZlbiBpZiBkZWJ1Zz1mYWxzZVxuICAgIGlmIChmZWF0dXJlID09PSAnQlVHJykge1xuICAgICAgY29uc3QgbG9nRGF0YSA9IHtcbiAgICAgICAgZmVhdHVyZTogJ0JVRycsXG4gICAgICAgIGJ1Z0lkOiBkYXRhLmJ1Z0lkIHx8ICdVTktOT1dOJyxcbiAgICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ0dFTkVSQUwnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgLi4uZGF0YVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVc2UgY29uc29sZS53YXJuIHdpdGggZW1vamkgZm9ybWF0IHRvIG1ha2UgYnVncyBzdGFuZCBvdXRcbiAgICAgIGNvbnNvbGUud2FybihgWyR7dGhpcy53aWRnZXROYW1lLnRvVXBwZXJDYXNlKCl9IOKaoO+4jyBCVUddYCwgSlNPTi5zdHJpbmdpZnkobG9nRGF0YSwgbnVsbCwgMikpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gUmVndWxhciBmZWF0dXJlIGxvZ2dpbmcgKGV4aXN0aW5nIGJlaGF2aW9yKVxuICAgIGlmICghdGhpcy5pc0VuYWJsZWQoZmVhdHVyZSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgICBmZWF0dXJlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAuLi5kYXRhXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFske3RoaXMud2lkZ2V0TmFtZS50b1VwcGVyQ2FzZSgpfS0ke2ZlYXR1cmV9XWAsIEpTT04uc3RyaW5naWZ5KGxvZ0RhdGEsIG51bGwsIDIpKVxuICB9XG5cbiAgZ2V0Q29uZmlnKCk6IHsgZW5hYmxlZEZlYXR1cmVzOiBzdHJpbmdbXSwgZGVidWdWYWx1ZTogc3RyaW5nIHwgbnVsbCB9IHtcbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICAgIFxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBjb25zdCBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBlbmFibGVkRmVhdHVyZXM6IEFycmF5LmZyb20odGhpcy5lbmFibGVkRmVhdHVyZXMpLFxuICAgICAgZGVidWdWYWx1ZVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJ1ZyBsb2dnZXIgaW5zdGFuY2UgZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpIHtcbiAgcmV0dXJuIG5ldyBEZWJ1Z0xvZ2dlcih7XG4gICAgd2lkZ2V0TmFtZTogJ1FVRVJZU0lNUExFJyxcbiAgICBmZWF0dXJlczogW1xuICAgICAgJ0hBU0gnLCAnSEFTSC1FWEVDJywgJ0hBU0gtRklSU1QtTE9BRCcsICdGT1JNJywgJ1RBU0snLCAnWk9PTScsICdNQVAtRVhURU5UJywgJ0RBVEEtQUNUSU9OJywgJ0dST1VQJywgXG4gICAgICAnU0VMRUNUSU9OJywgJ1dJREdFVC1TVEFURScsICdSRVNUT1JFJywgJ1JFU1VMVFMtTU9ERScsICdFWFBBTkQtQ09MTEFQU0UnLCAnR1JBUEhJQ1MtTEFZRVInLCAnRVZFTlRTJyxcbiAgICAgIC8vIFRlbXBvcmFyeSBtaWdyYXRpb24gZmVhdHVyZXMgKHdpbGwgYmUgcmVtb3ZlZCBhZnRlciBtaWdyYXRpb24gY29tcGxldGUpXG4gICAgICAnQ0hVTkstMS1DT01QQVJFJywgJ0NIVU5LLTEtTUlTTUFUQ0gnLCAnQ0hVTkstMi1DT01QQVJFJywgJ0NIVU5LLTItTUlTTUFUQ0gnLCAnQ0hVTkstMy1DT01QQVJFJywgJ0NIVU5LLTMtREVDSVNJT04nLCAnQ0hVTkstMy1GQUxMQkFDSycsXG4gICAgICAnQ0hVTkstNC1DT01QQVJFJywgJ0NIVU5LLTUtQ09NUEFSRScsICdDSFVOSy02LUNPTVBBUkUnLCAnQ0hVTkstNi1NSVNNQVRDSCdcbiAgICBdXG4gIH0pXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlYnVnIGxvZ2dlciBpbnN0YW5jZSBmb3IgSGVscGVyU2ltcGxlIHdpZGdldFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSGVscGVyU2ltcGxlRGVidWdMb2dnZXIoKSB7XG4gIHJldHVybiBuZXcgRGVidWdMb2dnZXIoe1xuICAgIHdpZGdldE5hbWU6ICdIRUxQRVJTSU1QTEUnLFxuICAgIGZlYXR1cmVzOiBbJ0hBU0gnLCAnSEFTSC1FWEVDJywgJ1NFTEVDVElPTicsICdXSURHRVQtU1RBVEUnLCAnUkVTVE9SRSddXG4gIH0pXG59XG5cbiIsImltcG9ydCB7XG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBJTUFwcENvbmZpZ1xufSBmcm9tICdqaW11LWNvcmUnXG5pbnRlcmZhY2UgUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHVzZURhdGFTb3VyY2VJZDogc3RyaW5nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEYXRhU291cmNlRXhpc3RzIChwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyB3aWRnZXRJZCwgdXNlRGF0YVNvdXJjZUlkIH0gPSBwcm9wc1xuXG4gIGNvbnN0IGV4aXN0czogYm9vbGVhbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgbGV0IGFwcENvbmZpZzogSU1BcHBDb25maWdcbiAgICBpZiAod2luZG93LmppbXVDb25maWcuaXNCdWlsZGVyKSB7XG4gICAgICBhcHBDb25maWcgPSBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlci5hcHBDb25maWdcbiAgICB9IGVsc2Uge1xuICAgICAgYXBwQ29uZmlnID0gc3RhdGUuYXBwQ29uZmlnXG4gICAgfVxuICAgIGNvbnN0IHVzZURhdGFTb3VyY2VzID0gYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdLnVzZURhdGFTb3VyY2VzID8/IFtdXG4gICAgcmV0dXJuIHVzZURhdGFTb3VyY2VzLnNvbWUodXNlRHMgPT4gdXNlRHMuZGF0YVNvdXJjZUlkID09PSB1c2VEYXRhU291cmNlSWQpXG4gIH0pXG5cbiAgcmV0dXJuIGV4aXN0c1xufVxuXG5cblxuIiwiaW1wb3J0IHR5cGUgeyBJUG9wdXBJbmZvIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHR5cGUgeyBJbnRsU2hhcGUsIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5cbi8qKlxuICogVG9nZ2xlIGl0ZW1zIGluIGFuIGFycmF5XG4gKi9cbmV4cG9ydCBjb25zdCB0b2dnbGVJdGVtSW5BcnJheSA9IChpdGVtLCBpdGVtcyA9IFtdKSA9PiBpdGVtcy5pbmNsdWRlcyhpdGVtKSA/IGl0ZW1zLmZpbHRlcihpID0+IGkgIT09IGl0ZW0pIDogWy4uLml0ZW1zLCBpdGVtXVxuXG5leHBvcnQgaW50ZXJmYWNlIERhdGFTb3VyY2VNYXAge1xuICBbZGF0YVNvdXJjZUlkOiBzdHJpbmddOiBEYXRhU291cmNlXG59XG5cbmV4cG9ydCB0eXBlIEdldEkxOG5NZXNzYWdlVHlwZSA9IChpZDogc3RyaW5nLCBvcHRpb25zPzogeyBtZXNzYWdlcz86IGFueSwgdmFsdWVzPzogYW55IH0pID0+IHN0cmluZ1xuLyoqXG4gKiBBIGZhY3RvcnkgdG8gY3JlYXRlIGEgZnVuY3Rpb24gb2YgZ2V0dGluZyBpMThuIG1lc3NhZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdldEkxOG5NZXNzYWdlIChvcHRpb25zOiB7IGludGw6IEludGxTaGFwZSwgZGVmYXVsdE1lc3NhZ2VzPzogYW55IH0pIHtcbiAgY29uc3QgeyBpbnRsLCBkZWZhdWx0TWVzc2FnZXMgPSB7fSB9ID0gb3B0aW9ucyB8fCB7fVxuICBjb25zdCBnZXRJMThuTWVzc2FnZTogR2V0STE4bk1lc3NhZ2VUeXBlID0gKGlkLCBvcHRpb25zKSA9PiB7XG4gICAgY29uc3QgeyBtZXNzYWdlcywgdmFsdWVzIH0gPSBvcHRpb25zIHx8IHt9XG4gICAgcmV0dXJuIGludGwuZm9ybWF0TWVzc2FnZSh7IGlkLCBkZWZhdWx0TWVzc2FnZTogKG1lc3NhZ2VzIHx8IGRlZmF1bHRNZXNzYWdlcylbaWRdIH0sIHZhbHVlcylcbiAgfVxuICByZXR1cm4gZ2V0STE4bk1lc3NhZ2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpZWxkSW5mb3NJblBvcHVwQ29udGVudCAocG9wdXBJbmZvOiBJUG9wdXBJbmZvKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdXG4gIGlmIChwb3B1cEluZm8/LnBvcHVwRWxlbWVudHM/Lmxlbmd0aCA+IDApIHtcbiAgICBwb3B1cEluZm8ucG9wdXBFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ2ZpZWxkcycgJiYgZWxlbWVudC5maWVsZEluZm9zPy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKC4uLmVsZW1lbnQuZmllbGRJbmZvcylcbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIHJldHVybiByZXN1bHRcbn1cblxuXG5cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fZW1vdGlvbl9yZWFjdF9qc3hfcnVudGltZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9lc3JpX2dlb21ldHJ5X0V4dGVudF9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2FyY2dpc19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2NvcmVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9sYXlvdXRzX2xheW91dF9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdGhlbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX2Jhc2ljX3NxbF9leHByZXNzaW9uX3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfcmVhY3RfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfd2lkZ2V0c19zaGFyZWRfY29kZV9jb21tb25fXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIvKipcclxuICogV2VicGFjayB3aWxsIHJlcGxhY2UgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gd2l0aCBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgdG8gc2V0IHRoZSBwdWJsaWMgcGF0aCBkeW5hbWljYWxseS5cclxuICogVGhlIHJlYXNvbiB3aHkgd2UgY2FuJ3Qgc2V0IHRoZSBwdWJsaWNQYXRoIGluIHdlYnBhY2sgY29uZmlnIGlzOiB3ZSBjaGFuZ2UgdGhlIHB1YmxpY1BhdGggd2hlbiBkb3dubG9hZC5cclxuICogKi9cclxuX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB3aW5kb3cuamltdUNvbmZpZy5iYXNlVXJsXHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIEFsbFdpZGdldFByb3BzLCBEYXRhU291cmNlTWFuYWdlciwgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLCBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBQYXBlciwgV2lkZ2V0UGxhY2Vob2xkZXIgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZywgUXVlcnlBcnJhbmdlVHlwZSwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcblxuaW1wb3J0IHsgdmVyc2lvbk1hbmFnZXIgfSBmcm9tICcuLi92ZXJzaW9uLW1hbmFnZXInXG5pbXBvcnQgeyBRdWVyeVRhc2tMaXN0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QnXG5pbXBvcnQgeyBUYXNrTGlzdElubGluZSB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LWlubGluZSdcbmltcG9ydCB7IFRhc2tMaXN0UG9wcGVyV3JhcHBlciB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyJ1xuaW1wb3J0IHsgUXVlcnlXaWRnZXRDb250ZXh0IH0gZnJvbSAnLi93aWRnZXQtY29udGV4dCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IFdJREdFVF9WRVJTSU9OIH0gZnJvbSAnLi4vdmVyc2lvbidcbi8vIENodW5rIDE6IFVSTCBQYXJhbWV0ZXIgQ29uc3VtcHRpb24gTWFuYWdlciAocjAxOC44KVxuaW1wb3J0IHsgVXJsQ29uc3VtcHRpb25NYW5hZ2VyIH0gZnJvbSAnLi9ob29rcy91c2UtdXJsLWNvbnN1bXB0aW9uJ1xuLy8gQ2h1bmsgMjogV2lkZ2V0IFZpc2liaWxpdHkgRW5naW5lIE1hbmFnZXIgKHIwMTguMTMpIC0gU3RlcCAyLjM6IFN3aXRjaCB0byBtYW5hZ2VyXG5pbXBvcnQgeyBXaWRnZXRWaXNpYmlsaXR5TWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLXdpZGdldC12aXNpYmlsaXR5J1xuLy8gQ2h1bmsgNjogTWFwIFZpZXcgTWFuYWdlbWVudCBNYW5hZ2VyIChyMDE4LjE0KSAtIFN0ZXAgNi4xOiBBZGQgbWFuYWdlciB3aXRob3V0IGludGVncmF0aW9uXG5pbXBvcnQgeyBNYXBWaWV3TWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLW1hcC12aWV3J1xuLy8gQ2h1bmsgNDogR3JhcGhpY3MgTGF5ZXIgTWFuYWdlbWVudCBNYW5hZ2VyIChyMDE4LjI0KSAtIFN0ZXAgNC4yOiBQYXJhbGxlbCBleGVjdXRpb25cbmltcG9ydCB7IEdyYXBoaWNzTGF5ZXJNYW5hZ2VyIH0gZnJvbSAnLi9ob29rcy91c2UtZ3JhcGhpY3MtbGF5ZXInXG4vLyBDaHVuayA1OiBBY2N1bXVsYXRlZCBSZWNvcmRzIE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4yNikgLSBTdGVwIDUuMTogQWRkIG1hbmFnZXIgd2l0aG91dCBpbnRlZ3JhdGlvblxuaW1wb3J0IHsgQWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLWFjY3VtdWxhdGVkLXJlY29yZHMnXG4vLyBDaHVuayA3OiBFdmVudCBIYW5kbGluZyBNYW5hZ2VyIChyMDE4LjU5KSAtIFN0ZXAgNy4xOiBDcmVhdGUgRXZlbnQgTWFuYWdlclxuaW1wb3J0IHsgRXZlbnRNYW5hZ2VyLCBPUEVOX1dJREdFVF9FVkVOVCwgUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5UIH0gZnJvbSAnLi9ob29rcy91c2UtZXZlbnQtaGFuZGxpbmcnXG4vLyBDaHVuayAzOiBTZWxlY3Rpb24gJiBSZXN0b3JhdGlvbiBNYW5hZ2VyIChyMDE5LjEpIC0gU2VjdGlvbiAzLjE6IFNlbGVjdGlvbiBTdGF0ZSBUcmFja2luZ1xuaW1wb3J0IHsgU2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyIH0gZnJvbSAnLi9ob29rcy91c2Utc2VsZWN0aW9uLXJlc3RvcmF0aW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbi8vIEV2ZW50IGNvbnN0YW50cyBtb3ZlZCB0byBFdmVudE1hbmFnZXIgKHIwMTguNTkgLSBDaHVuayA3LjEpXG5cbi8qKlxuICogUXVlcnlTaW1wbGUgV2lkZ2V0XG4gKiBcbiAqIEEgaGlnaC1wZXJmb3JtYW5jZSBxdWVyeSB3aWRnZXQgZm9yIEFyY0dJUyBFeHBlcmllbmNlIEJ1aWxkZXIgdGhhdCBwcm92aWRlczpcbiAqIC0gVW5pdmVyc2FsIFNRTCBvcHRpbWl6YXRpb24gZm9yIGRhdGFiYXNlIGluZGV4IHVzYWdlXG4gKiAtIER1YWwtbW9kZSBkZWVwIGxpbmtpbmcgKGhhc2ggZnJhZ21lbnRzIGFuZCBxdWVyeSBzdHJpbmdzKVxuICogLSBSZXN1bHRzIGFjY3VtdWxhdGlvbiBhY3Jvc3MgbXVsdGlwbGUgcXVlcmllc1xuICogLSBTZWxlY3Rpb24gcGVyc2lzdGVuY2UgYW5kIHJlc3RvcmF0aW9uXG4gKiAtIEdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZyBmb3IgbWFwIHZpc3VhbGl6YXRpb25cbiAqIFxuICogQXJjaGl0ZWN0dXJlOlxuICogVGhpcyB3aWRnZXQgZm9sbG93cyBhIFwiSG9vayAmIFNoZWxsXCIgcGF0dGVybiB3aGVyZSBjb21wbGV4IGxvZ2ljIGlzIGV4dHJhY3RlZCBpbnRvXG4gKiBtYW5hZ2VyIGNsYXNzZXMgKFVybENvbnN1bXB0aW9uTWFuYWdlciwgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIsIE1hcFZpZXdNYW5hZ2VyKVxuICogdG8ga2VlcCB0aGUgbWFpbiB3aWRnZXQgY2xhc3MgY2xlYW4gYW5kIG1haW50YWluYWJsZS5cbiAqIFxuICogQHNpbmNlIDEuMTkuMC1yMDE4LjE4XG4gKiBAc2VlIHtAbGluayBVcmxDb25zdW1wdGlvbk1hbmFnZXJ9IGZvciBVUkwgcGFyYW1ldGVyIGhhbmRsaW5nXG4gKiBAc2VlIHtAbGluayBXaWRnZXRWaXNpYmlsaXR5TWFuYWdlcn0gZm9yIHBhbmVsIHZpc2liaWxpdHkgZGV0ZWN0aW9uXG4gKiBAc2VlIHtAbGluayBNYXBWaWV3TWFuYWdlcn0gZm9yIG1hcCB2aWV3IHJlZmVyZW5jZSBtYW5hZ2VtZW50XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpZGdldCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8QWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+LCB7IFxuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0sIFxuICBpc1BhbmVsVmlzaWJsZT86IGJvb2xlYW4sIFxuICBoYXNTZWxlY3Rpb24/OiBib29sZWFuLCBcbiAgc2VsZWN0aW9uUmVjb3JkQ291bnQ/OiBudW1iZXIsIFxuICBsYXN0U2VsZWN0aW9uPzogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSwgXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZSwgXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW10sIFxuICBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ/OiBib29sZWFuLCBcbiAgYWN0aXZlVGFiPzogJ3F1ZXJ5JyB8ICdyZXN1bHRzJ1xufT4ge1xuICBzdGF0aWMgdmVyc2lvbk1hbmFnZXIgPSB2ZXJzaW9uTWFuYWdlclxuICAvLyBDaHVuayAxOiBVUkwgUGFyYW1ldGVyIENvbnN1bXB0aW9uIE1hbmFnZXIgKHIwMTguOClcbiAgcHJpdmF0ZSB1cmxDb25zdW1wdGlvbk1hbmFnZXIgPSBuZXcgVXJsQ29uc3VtcHRpb25NYW5hZ2VyKClcbiAgLy8gQ2h1bmsgMjogV2lkZ2V0IFZpc2liaWxpdHkgRW5naW5lIE1hbmFnZXIgKHIwMTguMTMpIC0gU3RlcCAyLjM6IFN3aXRjaCB0byBtYW5hZ2VyXG4gIHByaXZhdGUgdmlzaWJpbGl0eU1hbmFnZXIgPSBuZXcgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIoKVxuICBcbiAgLy8gUmVmcyBtdXN0IGJlIGRlY2xhcmVkIGJlZm9yZSBtYW5hZ2VycyB0aGF0IHVzZSB0aGVtXG4gIHByaXZhdGUgd2lkZ2V0UmVmID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpXG4gIHByaXZhdGUgZ3JhcGhpY3NMYXllclJlZiA9IFJlYWN0LmNyZWF0ZVJlZjxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+KClcbiAgcHJpdmF0ZSBtYXBWaWV3UmVmID0gUmVhY3QuY3JlYXRlUmVmPF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+KClcbiAgXG4gIC8vIENodW5rIDY6IE1hcCBWaWV3IE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4xNikgLSBTdGVwIDYuMzogU3dpdGNoIHRvIG1hbmFnZXJcbiAgcHJpdmF0ZSBtYXBWaWV3TWFuYWdlciA9IG5ldyBNYXBWaWV3TWFuYWdlcih0aGlzLm1hcFZpZXdSZWYpXG4gIC8vIENodW5rIDQ6IEdyYXBoaWNzIExheWVyIE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4yNCkgLSBTdGVwIDQuMjogUGFyYWxsZWwgZXhlY3V0aW9uXG4gIHByaXZhdGUgZ3JhcGhpY3NMYXllck1hbmFnZXIgPSBuZXcgR3JhcGhpY3NMYXllck1hbmFnZXIodGhpcy5ncmFwaGljc0xheWVyUmVmLCB0aGlzLm1hcFZpZXdSZWYpXG4gIC8vIENodW5rIDU6IEFjY3VtdWxhdGVkIFJlY29yZHMgTWFuYWdlbWVudCBNYW5hZ2VyIChyMDE4LjI2KSAtIFN0ZXAgNS4xOiBBZGQgbWFuYWdlciB3aXRob3V0IGludGVncmF0aW9uXG4gIHByaXZhdGUgYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciA9IG5ldyBBY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyKClcbiAgLy8gQ2h1bmsgNzogRXZlbnQgSGFuZGxpbmcgTWFuYWdlciAocjAxOC41OSkgLSBTdGVwIDcuMTogQ3JlYXRlIEV2ZW50IE1hbmFnZXJcbiAgcHJpdmF0ZSBldmVudE1hbmFnZXIgPSBuZXcgRXZlbnRNYW5hZ2VyKClcbiAgLy8gQ2h1bmsgMzogU2VsZWN0aW9uICYgUmVzdG9yYXRpb24gTWFuYWdlciAocjAxOS4xKSAtIFNlY3Rpb24gMy4xOiBTZWxlY3Rpb24gU3RhdGUgVHJhY2tpbmdcbiAgcHJpdmF0ZSBzZWxlY3Rpb25SZXN0b3JhdGlvbk1hbmFnZXIgPSBuZXcgU2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyKFxuICAgICgpID0+IHRoaXMuc3RhdGUsIC8vIHN0YXRlR2V0dGVyXG4gICAge1xuICAgICAgb25TdGF0ZVVwZGF0ZTogKG5ld1N0YXRlKSA9PiB0aGlzLnNldFN0YXRlKG5ld1N0YXRlIGFzIGFueSlcbiAgICB9XG4gIClcblxuICBzdGF0ZToge1xuICAgIGluaXRpYWxRdWVyeVZhbHVlPzogeyBzaG9ydElkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfSxcbiAgICBpc1BhbmVsVmlzaWJsZT86IGJvb2xlYW4sXG4gICAgaGFzU2VsZWN0aW9uPzogYm9vbGVhbixcbiAgICBzZWxlY3Rpb25SZWNvcmRDb3VudD86IG51bWJlcixcbiAgICBsYXN0U2VsZWN0aW9uPzogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSxcbiAgICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGUsXG4gICAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ/OiBib29sZWFuLFxuICAgIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cycsXG4gICAgLy8gVHJhY2sgd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVucyB3aWRnZXQgLSBvbmx5IHRoZW4gc2hvdWxkIHF1ZXJ5LXRhc2stbGlzdCB1c2UgaW5pdGlhbFF1ZXJ5VmFsdWUgZm9yIHNlbGVjdGlvblxuICAgIC8vIFVzaW5nIHN0YXRlIGluc3RlYWQgb2YgcmVmIGVuc3VyZXMgUmVhY3QgdHJpZ2dlcnMgcmUtcmVuZGVycyB3aGVuIGZsYWcgY2hhbmdlc1xuICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uPzogYm9vbGVhblxuICB9ID0ge1xuICAgIHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiwgLy8gRGVmYXVsdCBtb2RlXG4gICAgYWN0aXZlVGFiOiAncXVlcnknXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0YWIgY2hhbmdlIGJldHdlZW4gXCJRdWVyeVwiIGFuZCBcIlJlc3VsdHNcIiB0YWJzLlxuICAgKiBcbiAgICogQHBhcmFtIGFjdGl2ZVRhYiAtIFRoZSB0YWIgdG8gc3dpdGNoIHRvICgncXVlcnknIG9yICdyZXN1bHRzJylcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqL1xuICBoYW5kbGVUYWJDaGFuZ2UgPSAoYWN0aXZlVGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGFjdGl2ZVRhYiB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgbWFudWFsIG1vZGlmaWNhdGlvbnMgZmxhZyB3aGVuIHVzZXIgc3RhcnRzIGZyZXNoIG9wZXJhdGlvbnMuXG4gICAqIFRoaXMgYWxsb3dzIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXMgdG8gd29yayBhZ2FpbiBhZnRlciBleHBsaWNpdCB1c2VyIGFjdGlvbnMuXG4gICAqL1xuICByZXNldE1hbnVhbE1vZGlmaWNhdGlvbnMgPSAoKSA9PiB7XG4gICAgLy8gRklYIChyMDE4Ljk2KTogUmVtb3ZlZCBtYW51YWxseVJlbW92ZWRSZWNvcmRJZHMgdHJhY2tpbmcgLSBubyBsb25nZXIgbmVlZGVkXG4gICAgLy8gRHVwbGljYXRlIGRldGVjdGlvbiBpbiBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQgaGFuZGxlcyBwcmV2ZW50aW5nIGR1cGxpY2F0ZXNcbiAgICBjb25zdCBoYXNNYW51YWxNb2RpZmljYXRpb25zID0gdGhpcy5zdGF0ZS5oYXNNYW51YWxNb2RpZmljYXRpb25zXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAncmVzZXQtbWFudWFsLW1vZGlmaWNhdGlvbnMtY2hlY2snLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBoYXNNYW51YWxNb2RpZmljYXRpb25zLFxuICAgICAgbm90ZTogJ3IwMTguOTY6IE5vIG1hbnVhbGx5UmVtb3ZlZFJlY29yZElkcyB0cmFja2luZycsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgaWYgKGhhc01hbnVhbE1vZGlmaWNhdGlvbnMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3Jlc2V0dGluZy1tYW51YWwtbW9kaWZpY2F0aW9ucycsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICByZWFzb246ICd1c2VyLXN0YXJ0ZWQtZnJlc2gtb3BlcmF0aW9uJyxcbiAgICAgICAgaGFkTWFudWFsTW9kaWZpY2F0aW9uc0ZsYWc6IGhhc01hbnVhbE1vZGlmaWNhdGlvbnMsXG4gICAgICAgIG5vdGU6ICdyMDE4Ljk2OiBObyBtYW51YWxseVJlbW92ZWRSZWNvcmRJZHMgdG8gY2xlYXInLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgSGVscGVyU2ltcGxlJ3Mgb3BlbiB3aWRnZXQgZXZlbnQuXG4gICAqIFF1ZXJ5U2ltcGxlIHNob3VsZCBvbmx5IHByb2Nlc3MgaGFzaCBwYXJhbWV0ZXJzIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbnMgdGhlIHdpZGdldC5cbiAgICogVGhpcyBlbnN1cmVzIEhlbHBlclNpbXBsZSByZW1haW5zIHRoZSBvcmNoZXN0cmF0b3IgYW5kIHByZXZlbnRzIGF1dG9ub21vdXMgaGFzaCBwcm9jZXNzaW5nLlxuICAgKi9cbiAgaGFuZGxlT3BlbldpZGdldEV2ZW50ID0gKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1oYW5kbGVvcGVud2lkZ2V0ZXZlbnQtcmVjZWl2ZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgZXZlbnRXaWRnZXRJZDogZXZlbnQuZGV0YWlsPy53aWRnZXRJZCxcbiAgICAgIG1hdGNoZXM6IGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQgPT09IGlkLFxuICAgICAgY3VycmVudFN0YXRlOiB7XG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICBjdXJyZW50VXJsSGFzaDogd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpLFxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBXaXRoIHN1cmdpY2FsIGhhc2ggbW9kaWZpY2F0aW9uLCB0aGUgaGFzaCBhbHJlYWR5IGNvbnRhaW5zIG9ubHkgZGVzaXJlZCByZWNvcmQgSURzXG4gICAgLy8gTm8gbmVlZCB0byBibG9jayBwcm9jZXNzaW5nIC0gdGhlIGhhc2ggaXMgbm93IGEgcHJlY2lzZSByZXByZXNlbnRhdGlvbiBvZiBzZWxlY3Rpb24gaW50ZW50XG5cbiAgICAvLyBPbmx5IHByb2Nlc3MgaWYgdGhpcyBldmVudCBpcyBmb3Igb3VyIHdpZGdldFxuICAgIGlmIChldmVudC5kZXRhaWw/LndpZGdldElkICE9PSBpZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtaGFuZGxlb3BlbndpZGdldGV2ZW50LWlnbm9yZWQtd3Jvbmctd2lkZ2V0JyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBldmVudFdpZGdldElkOiBldmVudC5kZXRhaWw/LndpZGdldElkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gTk9URTogV2UgZG9uJ3QgY2hlY2sgcHJvY2Vzc2VkIGhhc2hlcyBoZXJlIGFueW1vcmVcbiAgICAvLyBUaGUgY2hlY2sgaGFwcGVucyBpbiBvbkluaXRpYWxWYWx1ZUZvdW5kIGFmdGVyIHdlIGtub3cgd2hpY2ggc2hvcnRJZDp2YWx1ZSBwYWlyIGlzIGJlaW5nIHByb2Nlc3NlZFxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgIGV2ZW50OiAnb3Blbi13aWRnZXQtZXZlbnQtcmVjZWl2ZWQtZnJvbS1oZWxwZXJzaW1wbGUnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBTZXQgZmxhZyB0byBhbGxvdyBxdWVyeS10YXNrLWxpc3QgdG8gdXNlIGluaXRpYWxRdWVyeVZhbHVlIGZvciBzZWxlY3Rpb25cbiAgICAvLyBUaGlzIGVuc3VyZXMgd2Ugb25seSByZWFjdCB0byBoYXNoIHBhcmFtZXRlcnMgd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVucyB1c1xuICAgIC8vIFVzaW5nIHN0YXRlIGluc3RlYWQgb2YgcmVmIGVuc3VyZXMgUmVhY3QgdHJpZ2dlcnMgcmUtcmVuZGVyIHNvIHF1ZXJ5LXRhc2stbGlzdCBzZWVzIHRoZSBjaGFuZ2VcbiAgICB0aGlzLnNldFN0YXRlKHsgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRydWUgfSwgKCkgPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtZmxhZy1zZXQtdHJ1ZS1zdGF0ZS11cGRhdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBuZXdTdGF0ZToge1xuICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgIGV2ZW50OiAnc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24tZmxhZy1zZXQtdHJ1ZScsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBmbGFnVmFsdWU6IHRydWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIE5vdyBjaGVjayBVUkwgcGFyYW1ldGVycyAtIEhlbHBlclNpbXBsZSBoYXMgZXhwbGljaXRseSBvcGVuZWQgdXNcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtY2hlY2t1cmxwYXJhbWV0ZXJzLXN0YXJ0aW5nJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgY3VycmVudFN0YXRlOiB7XG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLnVybENvbnN1bXB0aW9uTWFuYWdlci5jaGVja1VybFBhcmFtZXRlcnMoXG4gICAgICB0aGlzLnByb3BzLFxuICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIHtcbiAgICAgICAgb25Jbml0aWFsVmFsdWVGb3VuZDogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLW9uaW5pdGlhbHZhbHVlZm91bmQtY2FsbGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgaGFzVmFsdWU6ICEhdmFsdWUsXG4gICAgICAgICAgICB2YWx1ZVNob3J0SWQ6IHZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgICAgdmFsdWVWYWx1ZTogdmFsdWU/LnZhbHVlLFxuICAgICAgICAgICAgY3VycmVudFN0YXRlOiB7XG4gICAgICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHRoZSB2YWx1ZSBvciBzaG9ydElkIGhhcyBjaGFuZ2VkIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHJlLXJlbmRlcnNcbiAgICAgICAgICAgIGNvbnN0IHdpbGxVcGRhdGUgPSB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkICE9PSB2YWx1ZS5zaG9ydElkIHx8IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlICE9PSB2YWx1ZS52YWx1ZVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1vbmluaXRpYWx2YWx1ZWZvdW5kLXdpbGwtdXBkYXRlJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgIHdpbGxVcGRhdGUsXG4gICAgICAgICAgICAgIHByZXZpb3VzU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICAgICAgICAgIG5ld1Nob3J0SWQ6IHZhbHVlLnNob3J0SWQsXG4gICAgICAgICAgICAgIG5ld1ZhbHVlOiB2YWx1ZS52YWx1ZSxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAod2lsbFVwZGF0ZSkge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICd1cmwtcGFyYW0tZGV0ZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICAgIHNob3J0SWQ6IHZhbHVlLnNob3J0SWQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlLFxuICAgICAgICAgICAgICAgIGZvdW5kSW46ICdtYW5hZ2VyJyxcbiAgICAgICAgICAgICAgICB0cmlnZ2VyZWRCeTogJ2hlbHBlcnNpbXBsZS1vcGVuLXdpZGdldC1ldmVudCcsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgd2hlbiBoYXNoIHBhcmFtZXRlciBpcyBkZXRlY3RlZCB0byBhdm9pZCBidWdzIHdpdGggYWNjdW11bGF0aW9uIG1vZGVzXG4gICAgICAgICAgICAgIC8vIFVzaW5nIEFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIgKHIwMTguNTgpXG4gICAgICAgICAgICAgIGNvbnN0IG5lZWRzTW9kZVJlc2V0ID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSAhPT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudE1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBVcGRhdGUgaW5pdGlhbFF1ZXJ5VmFsdWUgc3RhdGVcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IFxuICAgICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlOiB7IHNob3J0SWQ6IHZhbHVlLnNob3J0SWQsIHZhbHVlOiB2YWx1ZS52YWx1ZSB9XG4gICAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtaW5pdGlhbHF1ZXJ5dmFsdWUtc3RhdGUtdXBkYXRlZCcsXG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgICAgIG5ld1N0YXRlOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgLy8gUmVzZXQgbW9kZSB2aWEgbWFuYWdlciBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgaWYgKG5lZWRzTW9kZVJlc2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzZXRSZXN1bHQgPSB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIucmVzZXRNb2RlT25IYXNoRGV0ZWN0aW9uKFxuICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRNb2RlXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB3aWRnZXQgc3RhdGUgZnJvbSBtYW5hZ2VyJ3MgcmV0dXJuIHZhbHVlXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZTogcmVzZXRSZXN1bHQucmVzdWx0c01vZGUsXG4gICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IHJlc2V0UmVzdWx0LmFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtb25pbml0aWFsdmFsdWVmb3VuZC1uby12YWx1ZS1jbGVhcmluZycsXG4gICAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICBoYXNDdXJyZW50SW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gTm8gbWF0Y2hpbmcgcGFyYW1ldGVycyBmb3VuZCAtIGNsZWFyIHN0YXRlXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSkge1xuICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaW5pdGlhbFF1ZXJ5VmFsdWU6IHVuZGVmaW5lZCB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25Nb2RlUmVzZXROZWVkZWQ6ICgpID0+IHtcbiAgICAgICAgICAvLyBSZXNldCB0byBOZXcgbW9kZSB3aGVuIGhhc2ggcGFyYW1ldGVyIGlzIGRldGVjdGVkXG4gICAgICAgICAgLy8gVXNpbmcgQWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciAocjAxOC41OClcbiAgICAgICAgICBjb25zdCBjdXJyZW50TW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGVcbiAgICAgICAgICBjb25zdCBuZWVkc1Jlc2V0ID0gY3VycmVudE1vZGUgIT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKG5lZWRzUmVzZXQpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdtb2RlLXJlc2V0LW5lZWRlZC1vbi1oYXNoLWRldGVjdGlvbicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICBjdXJyZW50TW9kZSxcbiAgICAgICAgICAgICAgdHJpZ2dlcmVkQnk6ICdoZWxwZXJzaW1wbGUtb3Blbi13aWRnZXQtZXZlbnQnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc2V0UmVzdWx0ID0gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLnJlc2V0TW9kZU9uSGFzaERldGVjdGlvbihcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgY3VycmVudE1vZGVcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHdpZGdldCBzdGF0ZSBmcm9tIG1hbmFnZXIncyByZXR1cm4gdmFsdWVcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICByZXN1bHRzTW9kZTogcmVzZXRSZXN1bHQucmVzdWx0c01vZGUsXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogcmVzZXRSZXN1bHQuYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vIENodW5rIDE6IE1hbmFnZXIgaW1wbGVtZW50YXRpb24gKHIwMTguOCAtIHN3aXRjaGVkIHRvIG1hbmFnZXIpXG4gICAgLy8gU2V0dXAgbWFuYWdlciAobm8gYXV0b25vbW91cyBVUkwgY2hlY2tpbmcgLSBIZWxwZXJTaW1wbGUgb3JjaGVzdHJhdGVzKVxuICAgIC8vIE5PVEU6IHNldHVwKCkgaXMgYSBuby1vcCAtIGNhbGxiYWNrcyBhcmUgbmV2ZXIgY2FsbGVkXG4gICAgdGhpcy51cmxDb25zdW1wdGlvbk1hbmFnZXIuc2V0dXAoXG4gICAgICB0aGlzLnByb3BzLFxuICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIHt9IC8vIEVtcHR5IGNhbGxiYWNrcyAtIHNldHVwKCkgaXMgYSBuby1vcFxuICAgIClcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIEhlbHBlclNpbXBsZSdzIG9wZW4gd2lkZ2V0IGV2ZW50XG4gICAgLy8gUXVlcnlTaW1wbGUgc2hvdWxkIG9ubHkgcHJvY2VzcyBoYXNoIHBhcmFtZXRlcnMgd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVucyB0aGUgd2lkZ2V0XG4gICAgLy8gVGhpcyBlbnN1cmVzIEhlbHBlclNpbXBsZSByZW1haW5zIHRoZSBvcmNoZXN0cmF0b3JcbiAgICAvLyBOb3RlOiBFdmVudCBsaXN0ZW5lciBzZXR1cCBtb3ZlZCB0byBwYXJhbGxlbCBleGVjdXRpb24gc2VjdGlvbiBiZWxvdyAoQ2h1bmsgNy4xKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1tb3VudGVkLWV2ZW50LWxpc3RlbmVyLXNldHVwJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgY3VycmVudFN0YXRlOiB7XG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBDaHVuayAyOiBNYW5hZ2VyIGltcGxlbWVudGF0aW9uIChyMDE4LjEzIC0gU3RlcCAyLjM6IFN3aXRjaCB0byBtYW5hZ2VyKVxuICAgIGlmICh0aGlzLndpZGdldFJlZi5jdXJyZW50KSB7XG4gICAgICB0aGlzLnZpc2liaWxpdHlNYW5hZ2VyLnNldHVwKFxuICAgICAgICB0aGlzLndpZGdldFJlZi5jdXJyZW50LFxuICAgICAgICB0aGlzLnByb3BzLFxuICAgICAgICB7XG4gICAgICAgICAgb25WaXNpYmlsaXR5Q2hhbmdlOiAoaXNWaXNpYmxlKSA9PiB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgc3RhdGVcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc1BhbmVsVmlzaWJsZTogaXNWaXNpYmxlIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEhhbmRsZSByZXN0b3JhdGlvbiBsb2dpY1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIChpc1Zpc2libGUpID0+IHtcbiAgICAgICAgICAvLyBNYW5hZ2VyJ3MgaW50ZXJuYWwgc3RhdGUgdHJhY2tpbmcgY2FsbGJhY2tcbiAgICAgICAgICAvLyAobm8tb3AsIHJlc3RvcmF0aW9uIGhhbmRsZWQgaW4gb25WaXNpYmlsaXR5Q2hhbmdlKVxuICAgICAgICB9XG4gICAgICApXG4gICAgICBcbiAgICAgIC8vIE5vdGlmeSBtb3VudCB2aWEgbWFuYWdlclxuICAgICAgdGhpcy52aXNpYmlsaXR5TWFuYWdlci5ub3RpZnlNb3VudCh0aGlzLnByb3BzLmlkKVxuICAgIH1cblxuICAgIC8vIENodW5rIDU6IEluaXRpYWxpemUgYWNjdW11bGF0ZWQgcmVjb3JkcyBtYW5hZ2VyIHN0YXRlIChyMDE4LjI2IC0gU3RlcCA1LjE6IEFkZCBtYW5hZ2VyKVxuICAgIC8vIFN5bmMgbWFuYWdlciBzdGF0ZSB3aXRoIHdpZGdldCBzdGF0ZVxuICAgIGlmICh0aGlzLnN0YXRlLnJlc3VsdHNNb2RlKSB7XG4gICAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIuaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UoXG4gICAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGZhbHNlXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIuaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFxuICAgICAgICB0aGlzLnByb3BzLmlkLFxuICAgICAgICB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkc1xuICAgICAgKVxuICAgIH1cbiAgICBcbiAgICAvLyBTZXQgdXAgY2FsbGJhY2tzIGZvciBtYW5hZ2VyXG4gICAgLy8gU2V0IHVwIGNhbGxiYWNrcyBmb3IgbWFuYWdlciAocjAxOC41NylcbiAgICAvLyBOb3RlOiBQcmltYXJ5IHN0YXRlIHVwZGF0ZXMgY29tZSBmcm9tIG1hbmFnZXIgcmV0dXJuIHZhbHVlcyBpbiBoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZS9oYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2VcbiAgICAvLyBUaGVzZSBjYWxsYmFja3Mgc2VydmUgYXMgYmFja3VwL3ZlcmlmaWNhdGlvbiBidXQgc2hvdWxkbid0IGJlIG5lZWRlZCBzaW5jZSB3ZSB1cGRhdGUgc3RhdGUgZGlyZWN0bHkgZnJvbSByZXR1cm4gdmFsdWVzXG4gICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLnNldENhbGxiYWNrcyh7XG4gICAgICBvbk1vZGVDaGFuZ2U6IChtb2RlKSA9PiB7XG4gICAgICAgIC8vIFN0YXRlIGlzIHVwZGF0ZWQgZnJvbSBoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZSByZXR1cm4gdmFsdWUsIHNvIHRoaXMgaXMganVzdCBhIGJhY2t1cFxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSAhPT0gbW9kZSkge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjYWxsYmFjay1vbk1vZGVDaGFuZ2Utc3RhdGUtc3luYycsXG4gICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgIGNhbGxiYWNrTW9kZTogbW9kZSxcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZU1vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgICAgICBub3RlOiAnU3RhdGUgc2hvdWxkIGFscmVhZHkgYmUgc3luY2VkIGZyb20gcmV0dXJuIHZhbHVlJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlc3VsdHNNb2RlOiBtb2RlIH0pXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZTogKHJlY29yZHMpID0+IHtcbiAgICAgICAgLy8gU3RhdGUgaXMgdXBkYXRlZCBmcm9tIGhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgc28gdGhpcyBpcyBqdXN0IGEgYmFja3VwXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICBpZiAoY3VycmVudENvdW50ICE9PSByZWNvcmRzLmxlbmd0aCkge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjYWxsYmFjay1vbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZS1zdGF0ZS1zeW5jJyxcbiAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgY2FsbGJhY2tDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICBjdXJyZW50U3RhdGVDb3VudDogY3VycmVudENvdW50LFxuICAgICAgICAgICAgbm90ZTogJ1N0YXRlIHNob3VsZCBhbHJlYWR5IGJlIHN5bmNlZCBmcm9tIGRpcmVjdCB1cGRhdGUnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgYWNjdW11bGF0ZWRSZWNvcmRzOiByZWNvcmRzIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIENodW5rIDc6IEV2ZW50IGhhbmRsaW5nIChyMDE4LjU5IC0gU3RlcCA3LjE6IEFkZCBtYW5hZ2VyKVxuICAgIHRoaXMuZXZlbnRNYW5hZ2VyLnNldEhhbmRsZXJzKHtcbiAgICAgIG9uT3BlbldpZGdldEV2ZW50OiB0aGlzLmhhbmRsZU9wZW5XaWRnZXRFdmVudCxcbiAgICAgIC8vIENodW5rIDM6IFNlY3Rpb24gMy4xIFN0ZXAgMy4xLjUgKHIwMTkuNSk6IFN3aXRjaCB0byBtYW5hZ2VyIGltcGxlbWVudGF0aW9uXG4gICAgICBvblNlbGVjdGlvbkNoYW5nZTogKGV2ZW50KSA9PiB0aGlzLnNlbGVjdGlvblJlc3RvcmF0aW9uTWFuYWdlci5oYW5kbGVTZWxlY3Rpb25DaGFuZ2UoZXZlbnQpLFxuICAgICAgb25SZXN0b3JlT25JZGVudGlmeUNsb3NlOiB0aGlzLmhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2VcbiAgICB9KVxuICAgIFxuICAgIHRoaXMuZXZlbnRNYW5hZ2VyLnNldHVwKHRoaXMucHJvcHMuaWQpXG4gICAgXG4gICAgLy8gQ2h1bmsgMzogU2VsZWN0aW9uICYgUmVzdG9yYXRpb24gTWFuYWdlciAocjAxOS4yKSAtIFNlY3Rpb24gMy4xOiBJbml0aWFsaXplIHdpZGdldElkXG4gICAgdGhpcy5zZWxlY3Rpb25SZXN0b3JhdGlvbk1hbmFnZXIuc2V0V2lkZ2V0SWQodGhpcy5wcm9wcy5pZClcbiAgICBcbiAgICAvLyBHcmFwaGljcyBsYXllciB3aWxsIGJlIGluaXRpYWxpemVkIHdoZW4gbWFwIHZpZXcgYmVjb21lcyBhdmFpbGFibGUgdmlhIEppbXVNYXBWaWV3Q29tcG9uZW50XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAvLyBDaHVuayAxOiBDbGVhbiB1cCBtYW5hZ2VyIChyMDE4LjgpXG4gICAgdGhpcy51cmxDb25zdW1wdGlvbk1hbmFnZXIuY2xlYW51cCgpXG4gICAgXG4gICAgLy8gQ2h1bmsgNzogRXZlbnQgaGFuZGxpbmcgY2xlYW51cCAocjAxOC41OSAtIFN0ZXAgNy4xOiBBZGQgbWFuYWdlcilcbiAgICB0aGlzLmV2ZW50TWFuYWdlci5jbGVhbnVwKHRoaXMucHJvcHMuaWQpXG4gICAgXG4gICAgLy8gQ2h1bmsgMjogQ2xlYW4gdXAgbWFuYWdlciAocjAxOC4xMyAtIFN0ZXAgMi4zOiBTd2l0Y2ggdG8gbWFuYWdlcilcbiAgICB0aGlzLnZpc2liaWxpdHlNYW5hZ2VyLmNsZWFudXAoKVxuICAgIHRoaXMudmlzaWJpbGl0eU1hbmFnZXIubm90aWZ5VW5tb3VudCh0aGlzLnByb3BzLmlkKVxuICAgIFxuICAgIC8vIENodW5rIDQ6IEdyYXBoaWNzIGxheWVyIGNsZWFudXAgKHIwMTguMjUgLSBTdGVwIDQuMzogUmVtb3ZlIG9sZCBpbXBsZW1lbnRhdGlvbilcbiAgICB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmNsZWFudXAodGhpcy5wcm9wcy5pZClcbiAgICBcbiAgICAvLyBDaHVuayA1OiBDbGVhbiB1cCBhY2N1bXVsYXRlZCByZWNvcmRzIG1hbmFnZXIgKHIwMTguMjYgLSBTdGVwIDUuMTogQWRkIG1hbmFnZXIpXG4gICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLmNsZWFudXAoKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6ICd3aWRnZXQtY2xvc2VkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPikge1xuICAgIC8vIFF1ZXJ5U2ltcGxlIG5vIGxvbmdlciBhdXRvbm9tb3VzbHkgY2hlY2tzIFVSTCBwYXJhbWV0ZXJzXG4gICAgLy8gT25seSBIZWxwZXJTaW1wbGUgY2FuIHRyaWdnZXIgaGFzaCBwYXJhbWV0ZXIgcHJvY2Vzc2luZyB2aWEgT1BFTl9XSURHRVRfRVZFTlRcbiAgICAvLyBUaGlzIGVuc3VyZXMgSGVscGVyU2ltcGxlIHJlbWFpbnMgdGhlIG9yY2hlc3RyYXRvclxuICAgIFxuICAgIC8vIENodW5rIDQ6IEdyYXBoaWNzIGxheWVyIGlzIG5vdyByZXF1aXJlZCAocjAxOC4yNSAtIFN0ZXAgNC4zOiBSZW1vdmUgY29uZmlnIGNoYW5nZSBoYW5kbGluZylcbiAgICAvLyBObyBuZWVkIHRvIGhhbmRsZSBjb25maWcgY2hhbmdlcyBmb3IgZ3JhcGhpY3MgbGF5ZXIgc2luY2UgaXQncyBhbHdheXMgZW5hYmxlZFxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSB3aWRnZXQgb2Ygc2VsZWN0aW9uIGNoYW5nZXMgdmlhIGN1c3RvbSBldmVudC5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGRpc3BhdGNoZXMgYSBjdXN0b20gZXZlbnQgdGhhdCBIZWxwZXJTaW1wbGUgbGlzdGVucyB0byBmb3IgdHJhY2tpbmdcbiAgICogc2VsZWN0aW9uIHN0YXRlLiBDYWxsZWQgYnkgUXVlcnlUYXNrUmVzdWx0IGNvbXBvbmVudCB3aGVuIHVzZXIgc2VsZWN0cyByZWNvcmRzLlxuICAgKiBcbiAgICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHNlbGVjdGVkIHJlY29yZCBJRHMgKG9iamVjdElkcyBmcm9tIHRoZSBmZWF0dXJlIGxheWVyKVxuICAgKiBAcGFyYW0gZGF0YVNvdXJjZUlkIC0gT3B0aW9uYWwgZGF0YSBzb3VyY2UgSUQgZm9yIHRoZSBzZWxlY3RlZCByZWNvcmRzXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKi9cbiAgbm90aWZ5SGVscGVyU2ltcGxlT2ZTZWxlY3Rpb24gPSAocmVjb3JkSWRzOiBzdHJpbmdbXSwgZGF0YVNvdXJjZUlkPzogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIENodW5rIDc6IERpc3BhdGNoIHNlbGVjdGlvbiBldmVudCB2aWEgRXZlbnRNYW5hZ2VyIChyMDE4LjU5KVxuICAgIC8vIE5vdGU6IFRoaXMgY2FsbCBpcyBtaXNzaW5nIG91dHB1dERzSWQgYW5kIHF1ZXJ5SXRlbUNvbmZpZ0lkLCBidXQgdGhpcyBtZXRob2RcbiAgICAvLyBpcyBvbmx5IHVzZWQgZm9yIG5vdGlmeWluZyBIZWxwZXJTaW1wbGUsIG5vdCBmb3Igc2V0dGluZyBsYXN0U2VsZWN0aW9uIHN0YXRlLlxuICAgIC8vIFRoZSBhY3R1YWwgc2VsZWN0aW9uIGV2ZW50cyBjb21lIGZyb20gcXVlcnktdGFzay50c3ggYW5kIHF1ZXJ5LXJlc3VsdC50c3hcbiAgICAvLyB3aGljaCB1c2UgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCBmcm9tIHNlbGVjdGlvbi11dGlscy50c1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyLmRpc3BhdGNoU2VsZWN0aW9uRXZlbnQoaWQsIHJlY29yZElkcywgZGF0YVNvdXJjZUlkKVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgd2lkZ2V0IHBhbmVsIHZpc2liaWxpdHkgY2hhbmdlcyBmcm9tIFdpZGdldFZpc2liaWxpdHlNYW5hZ2VyLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaW1wbGVtZW50cyB0aGUgc2VsZWN0aW9uIHJlc3RvcmF0aW9uIHBhdHRlcm46XG4gICAqIC0gV2hlbiBwYW5lbCBvcGVuczogUmVzdG9yZXMgc2VsZWN0aW9uIHRvIG1hcCBpZiB3aWRnZXQgaGFzIGFjY3VtdWxhdGVkIHJlY29yZHMgb3IgbGFzdCBzZWxlY3Rpb25cbiAgICogLSBXaGVuIHBhbmVsIGNsb3NlczogQ2xlYXJzIHNlbGVjdGlvbiBmcm9tIG1hcCAoYnV0IHByZXNlcnZlcyB3aWRnZXQgc3RhdGUgZm9yIHJlc3RvcmF0aW9uKVxuICAgKiBcbiAgICogVGhlIHJlc3RvcmF0aW9uIGxvZ2ljIHJlc3BlY3RzIHRoZSBjdXJyZW50IHJlc3VsdHMgbW9kZTpcbiAgICogLSBcIkFkZCB0b1wiIC8gXCJSZW1vdmUgZnJvbVwiIG1vZGVzOiBVc2VzIGFjY3VtdWxhdGVkIHJlY29yZHMgZm9yIHJlc3RvcmF0aW9uXG4gICAqIC0gXCJOZXdcIiBtb2RlOiBVc2VzIGxhc3RTZWxlY3Rpb24gc3RhdGUgZm9yIHJlc3RvcmF0aW9uXG4gICAqIFxuICAgKiBAcGFyYW0gaXNWaXNpYmxlIC0gVHJ1ZSBpZiB3aWRnZXQgcGFuZWwgaXMgdmlzaWJsZSwgZmFsc2UgaWYgaGlkZGVuXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTguMTMgKENodW5rIDI6IE1hbmFnZXIgaW1wbGVtZW50YXRpb24pXG4gICAqIEBzZWUge0BsaW5rIFdpZGdldFZpc2liaWxpdHlNYW5hZ2VyfSBmb3IgdmlzaWJpbGl0eSBkZXRlY3Rpb24gaW1wbGVtZW50YXRpb25cbiAgICovXG4gIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UgPSAoaXNWaXNpYmxlOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgLy8gV2hlbiBwYW5lbCBvcGVucywgY2hlY2sgaWYgd2UgaGF2ZSBzZWxlY3Rpb24gdG8gcmVzdG9yZVxuICAgICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgY29uc3QgaGFzQWNjdW11bGF0ZWRSZWNvcmRzID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uU3RhdGUgPSB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZVxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uVG9SZXN0b3JlID0gaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICA/IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyBcbiAgICAgICAgOiBoYXNTZWxlY3Rpb25TdGF0ZVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWNoZWNraW5nLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBoYXNTZWxlY3Rpb246IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDAsXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLFxuICAgICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUsXG4gICAgICAgIGRlY2lzaW9uTG9naWM6IHtcbiAgICAgICAgICAnaXNBY2N1bXVsYXRpb25Nb2RlJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAgICdoYXNBY2N1bXVsYXRlZFJlY29yZHMnOiBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgICAgJ2hhc1NlbGVjdGlvblN0YXRlJzogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgICAgJ2NhbGN1bGF0ZWQtaGFzU2VsZWN0aW9uVG9SZXN0b3JlJzogaGFzU2VsZWN0aW9uVG9SZXN0b3JlLFxuICAgICAgICAgICd3aWxsLWNhbGwtYWRkU2VsZWN0aW9uVG9NYXAnOiBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQWRkIHNlbGVjdGlvbiB0byBtYXAgaWYgd2UgaGF2ZSBvbmVcbiAgICAgIGlmIChoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWNhbGxpbmctYWRkU2VsZWN0aW9uVG9NYXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvUmVzdG9yZS1pcy10cnVlJ1xuICAgICAgICB9KVxuICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBkZXBzID0ge1xuICAgICAgICAgICAgZ3JhcGhpY3NMYXllclJlZjogdGhpcy5ncmFwaGljc0xheWVyUmVmLFxuICAgICAgICAgICAgbWFwVmlld1JlZjogdGhpcy5tYXBWaWV3UmVmLFxuICAgICAgICAgICAgZ3JhcGhpY3NMYXllck1hbmFnZXI6IHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMucHJvcHMuY29uZmlnXG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyLmFkZFNlbGVjdGlvblRvTWFwKGRlcHMpXG4gICAgICAgIH0pKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1za2lwcGluZy1hZGRTZWxlY3Rpb25Ub01hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9SZXN0b3JlLWlzLWZhbHNlJyxcbiAgICAgICAgICB3aHk6IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgICAgID8gJ25vLWFjY3VtdWxhdGVkLXJlY29yZHMnIFxuICAgICAgICAgICAgOiAnbm8taGFzU2VsZWN0aW9uLXN0YXRlJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXaGVuIHBhbmVsIGNsb3NlcywgY2xlYXIgc2VsZWN0aW9uIGZyb20gbWFwIG9ubHkgKGtlZXAgd2lkZ2V0IHN0YXRlKVxuICAgICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgY29uc3QgaGFzQWNjdW11bGF0ZWRSZWNvcmRzID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uU3RhdGUgPSB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZVxuICAgICAgY29uc3QgaGFzU2VsZWN0aW9uVG9DbGVhciA9IGlzQWNjdW11bGF0aW9uTW9kZSBcbiAgICAgICAgPyBoYXNBY2N1bXVsYXRlZFJlY29yZHMgXG4gICAgICAgIDogaGFzU2VsZWN0aW9uU3RhdGVcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jaGVja2luZy1zZWxlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5zZWxlY3Rpb25SZWNvcmRDb3VudCB8fCAwLFxuICAgICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgICAgbGFzdFNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzU2VsZWN0aW9uVG9DbGVhcixcbiAgICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAgICdpc0FjY3VtdWxhdGlvbk1vZGUnOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICAgJ2hhc0FjY3VtdWxhdGVkUmVjb3Jkcyc6IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgICAnaGFzU2VsZWN0aW9uU3RhdGUnOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgICAnY2FsY3VsYXRlZC1oYXNTZWxlY3Rpb25Ub0NsZWFyJzogaGFzU2VsZWN0aW9uVG9DbGVhcixcbiAgICAgICAgICAnd2lsbC1jYWxsLWNsZWFyU2VsZWN0aW9uRnJvbU1hcCc6IGhhc1NlbGVjdGlvblRvQ2xlYXJcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKGhhc1NlbGVjdGlvblRvQ2xlYXIpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNhbGxpbmctY2xlYXJTZWxlY3Rpb25Gcm9tTWFwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub0NsZWFyLWlzLXRydWUnXG4gICAgICAgIH0pXG4gICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlcHMgPSB7XG4gICAgICAgICAgICBncmFwaGljc0xheWVyUmVmOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYsXG4gICAgICAgICAgICBtYXBWaWV3UmVmOiB0aGlzLm1hcFZpZXdSZWYsXG4gICAgICAgICAgICBncmFwaGljc0xheWVyTWFuYWdlcjogdGhpcy5ncmFwaGljc0xheWVyTWFuYWdlcixcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5wcm9wcy5jb25maWdcbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZWxlY3Rpb25SZXN0b3JhdGlvbk1hbmFnZXIuY2xlYXJTZWxlY3Rpb25Gcm9tTWFwKGRlcHMpXG4gICAgICAgIH0pKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1uby1zZWxlY3Rpb24tdG8tY2xlYXInLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvQ2xlYXItaXMtZmFsc2UnLFxuICAgICAgICAgIHdoeTogaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICAgICAgPyAnbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycgXG4gICAgICAgICAgICA6ICduby1oYXNTZWxlY3Rpb24tc3RhdGUnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgbWFwIHZpZXcgY2hhbmdlIGZyb20gSmltdU1hcFZpZXdDb21wb25lbnQuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgSmltdU1hcFZpZXdDb21wb25lbnQgd2hlbiB0aGUgbWFwIHZpZXcgYmVjb21lcyBhdmFpbGFibGVcbiAgICogb3IgY2hhbmdlcy4gSXQgZGVsZWdhdGVzIHRvIE1hcFZpZXdNYW5hZ2VyIGZvciByZWZlcmVuY2UgbWFuYWdlbWVudCBhbmQgaW5pdGlhbGl6ZXNcbiAgICogdGhlIGdyYXBoaWNzIGxheWVyIGlmIGVuYWJsZWQgaW4gd2lkZ2V0IGNvbmZpZ3VyYXRpb24uXG4gICAqIFxuICAgKiBAcGFyYW0gamltdU1hcFZpZXcgLSBUaGUgSmltdU1hcFZpZXcgaW5zdGFuY2UgZnJvbSBKaW11TWFwVmlld0NvbXBvbmVudCwgb3IgbnVsbCBpZiB1bmF2YWlsYWJsZVxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE4LjE4IChDaHVuayA2OiBNYW5hZ2VyIGltcGxlbWVudGF0aW9uKVxuICAgKiBAc2VlIHtAbGluayBNYXBWaWV3TWFuYWdlcn0gZm9yIG1hcCB2aWV3IHJlZmVyZW5jZSBtYW5hZ2VtZW50XG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZCA9IChqaW11TWFwVmlldzogSmltdU1hcFZpZXcgfCBudWxsKSA9PiB7XG4gICAgY29uc3QgeyBpZCwgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gTWFuYWdlciBpbXBsZW1lbnRhdGlvbiAocjAxOC4xNiAtIFN0ZXAgNi4zOiBTd2l0Y2ggdG8gbWFuYWdlcilcbiAgICB0aGlzLm1hcFZpZXdNYW5hZ2VyLmhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZChcbiAgICAgIGppbXVNYXBWaWV3LFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICAgIHtcbiAgICAgICAgb25NYXBWaWV3Q2hhbmdlOiAobmV3SmltdU1hcFZpZXcpID0+IHtcbiAgICAgICAgICAvLyBHZXQgbWFwIHZpZXcgZnJvbSBtYW5hZ2VyXG4gICAgICAgICAgY29uc3QgbmV3TWFwVmlldyA9IHRoaXMubWFwVmlld01hbmFnZXIuZ2V0TWFwVmlldygpXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2h1bmsgNDogR3JhcGhpY3MgbGF5ZXIgaW5pdGlhbGl6YXRpb24gKHIwMTguMjUgLSBTdGVwIDQuMzogUmVtb3ZlIG9sZCBpbXBsZW1lbnRhdGlvbilcbiAgICAgICAgICAvLyBJbml0aWFsaXplIGdyYXBoaWNzIGxheWVyIGlmIG1hcCB2aWV3IGlzIGF2YWlsYWJsZSBhbmQgZ3JhcGhpY3MgbGF5ZXIgc2hvdWxkIGJlIGluaXRpYWxpemVkXG4gICAgICAgICAgaWYgKHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIuc2hvdWxkSW5pdGlhbGl6ZShjb25maWcsIG5ld01hcFZpZXcpICYmIG5ld01hcFZpZXcpIHtcbiAgICAgICAgICAgIC8vIFVzZSB2b2lkIHRvIGhhbmRsZSBwcm9taXNlIHdpdGhvdXQgYmxvY2tpbmdcbiAgICAgICAgICAgIHZvaWQgdGhpcy5ncmFwaGljc0xheWVyTWFuYWdlci5pbml0aWFsaXplKGlkLCBuZXdNYXBWaWV3LCB7XG4gICAgICAgICAgICAgIG9uR3JhcGhpY3NMYXllckluaXRpYWxpemVkOiAoZ3JhcGhpY3NMYXllcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzdGF0ZSB0byBmb3JjZSByZS1yZW5kZXIgYW5kIHVwZGF0ZSBwcm9wc1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgZ3JhcGhpY3MgbGF5ZXIgbGF6aWx5IHdoZW4gb3V0cHV0IGRhdGEgc291cmNlIGJlY29tZXMgYXZhaWxhYmxlLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IFF1ZXJ5VGFzayBjb21wb25lbnQgd2hlbiBhbiBvdXRwdXQgZGF0YSBzb3VyY2UgaXMgY3JlYXRlZC5cbiAgICogSXQgcmV0cmlldmVzIHRoZSBtYXAgdmlldyBmcm9tIE1hcFZpZXdNYW5hZ2VyIGFuZCBpbml0aWFsaXplcyB0aGUgZ3JhcGhpY3MgbGF5ZXJcbiAgICogdXNpbmcgR3JhcGhpY3NMYXllck1hbmFnZXIgaWYgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWQuXG4gICAqIFxuICAgKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIHRoYXQgd2FzIGNyZWF0ZWRcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqIEBzZWUge0BsaW5rIEdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmluaXRpYWxpemVGcm9tT3V0cHV0RFN9IGZvciBncmFwaGljcyBsYXllciBpbml0aWFsaXphdGlvblxuICAgKiBAc2VlIHtAbGluayBNYXBWaWV3TWFuYWdlci5nZXRNYXBWaWV3fSBmb3IgbWFwIHZpZXcgcmV0cmlldmFsXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBncmFwaGljcyBsYXllciBsYXppbHkgd2hlbiBvdXRwdXQgZGF0YSBzb3VyY2UgYmVjb21lcyBhdmFpbGFibGUuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgUXVlcnlUYXNrIGNvbXBvbmVudCB3aGVuIGFuIG91dHB1dCBkYXRhIHNvdXJjZSBpcyBjcmVhdGVkLlxuICAgKiBJdCByZXRyaWV2ZXMgdGhlIG1hcCB2aWV3IGZyb20gTWFwVmlld01hbmFnZXIgYW5kIGluaXRpYWxpemVzIHRoZSBncmFwaGljcyBsYXllclxuICAgKiB1c2luZyBHcmFwaGljc0xheWVyTWFuYWdlciBpZiBub3QgYWxyZWFkeSBpbml0aWFsaXplZC5cbiAgICogXG4gICAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgdGhhdCB3YXMgY3JlYXRlZFxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICogQHNlZSB7QGxpbmsgR3JhcGhpY3NMYXllck1hbmFnZXIuaW5pdGlhbGl6ZUZyb21PdXRwdXREU30gZm9yIGdyYXBoaWNzIGxheWVyIGluaXRpYWxpemF0aW9uXG4gICAqIEBzZWUge0BsaW5rIE1hcFZpZXdNYW5hZ2VyLmdldE1hcFZpZXd9IGZvciBtYXAgdmlldyByZXRyaWV2YWxcbiAgICovXG4gIHB1YmxpYyBpbml0aWFsaXplR3JhcGhpY3NMYXllckZyb21PdXRwdXREUyA9IGFzeW5jIChvdXRwdXREUzogRGF0YVNvdXJjZSkgPT4ge1xuICAgIGNvbnN0IHsgaWQsIGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIENodW5rIDQ6IEdyYXBoaWNzIGxheWVyIGluaXRpYWxpemF0aW9uIChyMDE4LjI1IC0gU3RlcCA0LjM6IFJlbW92ZSBvbGQgaW1wbGVtZW50YXRpb24pXG4gICAgLy8gVXNlIG1hcCB2aWV3IGZyb20gbWFuYWdlciBpZiBhdmFpbGFibGVcbiAgICBjb25zdCBtYXBWaWV3ID0gdGhpcy5tYXBWaWV3TWFuYWdlci5nZXRNYXBWaWV3KCkgfHwgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnRcbiAgICBcbiAgICBhd2FpdCB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmluaXRpYWxpemVGcm9tT3V0cHV0RFMoXG4gICAgICBpZCxcbiAgICAgIGNvbmZpZyxcbiAgICAgIG91dHB1dERTLFxuICAgICAgbWFwVmlldyxcbiAgICAgIHtcbiAgICAgICAgb25HcmFwaGljc0xheWVySW5pdGlhbGl6ZWQ6IChncmFwaGljc0xheWVyKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZDogdHJ1ZSB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKVxuICB9XG5cblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBncmFwaGljcyBmcm9tIHRoZSBncmFwaGljcyBsYXllciBpZiBpdCBleGlzdHMuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2hlbiBjbGVhcmluZyByZXN1bHRzIG9yIHN3aXRjaGluZyBxdWVyaWVzIGluIFwiTmV3XCIgbW9kZVxuICAgKiB0byBlbnN1cmUgZ3JhcGhpY3MgYXJlIHJlbW92ZWQgZnJvbSB0aGUgbWFwLiBJdCBkb2VzIG5vdCByZW1vdmUgdGhlIGdyYXBoaWNzIGxheWVyXG4gICAqIGl0c2VsZiwgb25seSBjbGVhcnMgaXRzIGNvbnRlbnRzLlxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICogQHNlZSB7QGxpbmsgR3JhcGhpY3NMYXllck1hbmFnZXIuY2xlYXJHcmFwaGljc30gZm9yIGdyYXBoaWNzIGNsZWFyaW5nIGxvZ2ljXG4gICAqL1xuICBwdWJsaWMgY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBDaHVuayA0OiBHcmFwaGljcyBsYXllciBjbGVhcmluZyAocjAxOC4yNSAtIFN0ZXAgNC4zOiBSZW1vdmUgb2xkIGltcGxlbWVudGF0aW9uKVxuICAgIHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIuY2xlYXJHcmFwaGljcyh0aGlzLnByb3BzLmlkLCBjb25maWcpXG4gIH1cblxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHNlbGVjdGlvbiBjaGFuZ2UgZXZlbnRzIGZyb20gUXVlcnlUYXNrUmVzdWx0IGNvbXBvbmVudC5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIHVwZGF0ZXMgd2lkZ2V0IHN0YXRlIHdoZW4gcmVjb3JkcyBhcmUgc2VsZWN0ZWQgb3IgZGVzZWxlY3RlZCBpbiB0aGVcbiAgICogcmVzdWx0cyB0YWIuIEl0IHJlc3BlY3RzIHRoZSBjdXJyZW50IHJlc3VsdHMgbW9kZTpcbiAgICogLSBcIkFkZCB0b1wiIC8gXCJSZW1vdmUgZnJvbVwiIG1vZGVzOiBVc2VzIGFjY3VtdWxhdGVkIHJlY29yZHMgY291bnQgZm9yIHJlc3RvcmF0aW9uIHN0YXRlXG4gICAqIC0gXCJOZXdcIiBtb2RlOiBVc2VzIGV2ZW50IHJlY29yZCBJRHMgZm9yIHJlc3RvcmF0aW9uIHN0YXRlXG4gICAqIFxuICAgKiBBbHNvIGhhbmRsZXMgYXV0b21hdGljIG1vZGUgcmVzZXQ6IElmIHNlbGVjdGlvbiBpcyBjbGVhcmVkIGluIFwiUmVtb3ZlIGZyb21cIiBtb2RlLFxuICAgKiB0aGUgbW9kZSBpcyBhdXRvbWF0aWNhbGx5IHJlc2V0IHRvIFwiTmV3XCIgc2luY2UgUmVtb3ZlIG1vZGUgcmVxdWlyZXMgc2VsZWN0aW9uIHRvIGZ1bmN0aW9uLlxuICAgKiBcbiAgICogQHBhcmFtIGV2ZW50IC0gQ3VzdG9tIGV2ZW50IGNvbnRhaW5pbmcgc2VsZWN0aW9uIGRldGFpbHMgKHdpZGdldElkLCByZWNvcmRJZHMsIG91dHB1dERzSWQsIHF1ZXJ5SXRlbUNvbmZpZ0lkKVxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICovXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgcmVzdG9yZSByZXF1ZXN0IHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgcmVzdG9yZXMgc2VsZWN0aW9uIHRvIHRoZSBtYXAgYWZ0ZXIgdGhlIGlkZW50aWZ5IHBvcHVwIGNsb3NlcyBhbmRcbiAgICogc2VsZWN0aW9uIHdhcyBjbGVhcmVkLiBJdCBvbmx5IHJlc3RvcmVzIGlmIHRoZSB3aWRnZXQgcGFuZWwgaXMgY3VycmVudGx5IG9wZW5cbiAgICogKHVzZXJzIGNhbid0IHNlZSByZXN0b3JlZCBzZWxlY3Rpb24gaWYgd2lkZ2V0IGlzIGNsb3NlZCkuXG4gICAqIFxuICAgKiBSZXN0b3JhdGlvbiBsb2dpYzpcbiAgICogLSBcIkFkZCB0b1wiIC8gXCJSZW1vdmUgZnJvbVwiIG1vZGVzOiBSZXN0b3JlcyBhbGwgYWNjdW11bGF0ZWQgcmVjb3JkcyBncm91cGVkIGJ5IG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgKiAtIFwiTmV3XCIgbW9kZTogUmVzdG9yZXMgbGFzdFNlbGVjdGlvbiBzdGF0ZVxuICAgKiBcbiAgICogQHBhcmFtIGV2ZW50IC0gQ3VzdG9tIGV2ZW50IGNvbnRhaW5pbmcgc2VsZWN0aW9uIGRldGFpbHMgKHdpZGdldElkLCByZWNvcmRJZHMsIG91dHB1dERzSWQsIHF1ZXJ5SXRlbUNvbmZpZ0lkKVxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICogQHNlZSB7QGxpbmsgUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVH0gZm9yIGV2ZW50IG5hbWUgY29uc3RhbnRcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZSA9IChldmVudDogRXZlbnQpID0+IHtcbiAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50PHsgXG4gICAgICB3aWRnZXRJZDogc3RyaW5nLCBcbiAgICAgIHJlY29yZElkczogc3RyaW5nW10sIFxuICAgICAgb3V0cHV0RHNJZDogc3RyaW5nLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHN0cmluZ1xuICAgIH0+XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIE9ubHkgaGFuZGxlIGlmIHRoaXMgaXMgZm9yIG91ciB3aWRnZXRcbiAgICBpZiAoY3VzdG9tRXZlbnQuZGV0YWlsLndpZGdldElkICE9PSBpZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFVzZSBtYW5hZ2VyIGFzIHNvdXJjZSBvZiB0cnV0aCBmb3IgdmlzaWJpbGl0eSAocjAxOC4xMylcbiAgICBjb25zdCBpc1dpZGdldE9wZW4gPSB0aGlzLnZpc2liaWxpdHlNYW5hZ2VyLmdldElzUGFuZWxWaXNpYmxlKClcbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtcmVxdWVzdGVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIGlzV2lkZ2V0T3BlbixcbiAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgZXZlbnRSZWNvcmRJZHNDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGgsXG4gICAgICBoYXNTZWxlY3Rpb246IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLFxuICAgICAgbGFzdFNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgIG91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgIH0pXG4gICAgXG4gICAgLy8gT25seSByZXN0b3JlIGlmIHdpZGdldCBpcyBvcGVuXG4gICAgaWYgKCFpc1dpZGdldE9wZW4pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLXdpZGdldC1jbG9zZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlY29yZENvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBTaG91bGQgYWx3YXlzIGNoZWNrIGFjY3VtdWxhdGVkUmVjb3JkcyBmaXJzdCwgcmVnYXJkbGVzcyBvZiBtb2RlXG4gICAgaWYgKHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzICYmIHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtZm91bmQtYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ3Nob3VsZC11c2UtYWNjdW11bGF0ZWQnOiB0cnVlLFxuICAgICAgICAnY3VycmVudC1jb25kaXRpb24tY2hlY2snOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICdjb25kaXRpb24tcmVzdWx0JzogaXNBY2N1bXVsYXRpb25Nb2RlXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBJbiBBZGQvUmVtb3ZlIG1vZGVzLCBjaGVjayBhY2N1bXVsYXRlZCByZWNvcmRzIGluc3RlYWQgb2YgbGFzdFNlbGVjdGlvblxuICAgIGlmIChpc0FjY3VtdWxhdGlvbk1vZGUpIHtcbiAgICAgIGlmICghdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24gfHwgIXRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzIHx8IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBoYXNTZWxlY3Rpb246IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgJ2h5cG90aGVzaXMnOiAnaGFzU2VsZWN0aW9uLWlzLWZhbHNlLW9yLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICAgICdtYXliZS1oYXNTZWxlY3Rpb24tc2hvdWxkLWJlLWJhc2VkLW9uLWFjY3VtdWxhdGVkLXJlY29yZHMnOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZXN0b3JlIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzIChncm91cGVkIGJ5IG9yaWdpbiBEUylcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBkZXBzID0ge1xuICAgICAgICAgIGdyYXBoaWNzTGF5ZXJSZWY6IHRoaXMuZ3JhcGhpY3NMYXllclJlZixcbiAgICAgICAgICBtYXBWaWV3UmVmOiB0aGlzLm1hcFZpZXdSZWYsXG4gICAgICAgICAgZ3JhcGhpY3NMYXllck1hbmFnZXI6IHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIsXG4gICAgICAgICAgY29uZmlnOiB0aGlzLnByb3BzLmNvbmZpZ1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyLmFkZFNlbGVjdGlvblRvTWFwKGRlcHMpXG4gICAgICB9KSgpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogTWF5YmUgYWNjdW11bGF0ZWRSZWNvcmRzIGV4aXN0IGJ1dCB3ZSdyZSBub3QgaW4gYWNjdW11bGF0aW9uIG1vZGU/XG4gICAgaWYgKHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzICYmIHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgJiYgIWlzQWNjdW11bGF0aW9uTW9kZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLWV4aXN0LWJ1dC1ub3QtYWNjdW11bGF0aW9uLW1vZGUnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ2FjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW1vZGUtaXMtbm90LWFkZC1vci1yZW1vdmUnLFxuICAgICAgICAnc2hvdWxkLXdlLXN0aWxsLXVzZS10aGVtJzogJ05FRURTLUlOVkVTVElHQVRJT04nXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCB1c2Ugb3JpZ2luYWwgdmFsaWRhdGlvbiBsb2dpY1xuICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgbWF0Y2hpbmcgc2VsZWN0aW9uIHN0YXRlXG4gICAgaWYgKCF0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCAhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1uby1zZWxlY3Rpb24nLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGhhc1NlbGVjdGlvbjogdGhpcy5zdGF0ZS5oYXNTZWxlY3Rpb24sXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgb3V0cHV0RHNJZCBtYXRjaGVzXG4gICAgaWYgKHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkICE9PSBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtZHMtbWlzbWF0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91ck91dHB1dERzSWQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkLFxuICAgICAgICByZXF1ZXN0ZWRPdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgdGhlIHF1ZXJ5SXRlbUNvbmZpZ0lkIG1hdGNoZXMgKG9wdGlvbmFsIGJ1dCBnb29kIHRvIGNoZWNrKVxuICAgIGlmICh0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24ucXVlcnlJdGVtQ29uZmlnSWQgIT09IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXNraXBwZWQtcXVlcnktbWlzbWF0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91clF1ZXJ5SXRlbUNvbmZpZ0lkOiB0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24ucXVlcnlJdGVtQ29uZmlnSWQsXG4gICAgICAgIHJlcXVlc3RlZFF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gUmVzdG9yZSBzZWxlY3Rpb24gdG8gbWFwIChyZXVzZSBleGlzdGluZyBtZXRob2QpXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yaW5nLXNlbGVjdGlvbicsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICByZWNvcmRDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGgsXG4gICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZFxuICAgIH0pXG4gICAgXG4gICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkZXBzID0ge1xuICAgICAgICBncmFwaGljc0xheWVyUmVmOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYsXG4gICAgICAgIG1hcFZpZXdSZWY6IHRoaXMubWFwVmlld1JlZixcbiAgICAgICAgZ3JhcGhpY3NMYXllck1hbmFnZXI6IHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIsXG4gICAgICAgIGNvbmZpZzogdGhpcy5wcm9wcy5jb25maWdcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuc2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyLmFkZFNlbGVjdGlvblRvTWFwKGRlcHMpXG4gICAgfSkoKVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyByMDE5LjE4OiBSZW1vdmVkIGFkZFNlbGVjdGlvblRvTWFwUGFyYWxsZWwgd3JhcHBlciAoMjcgbGluZXMpXG4gIC8vIHIwMTkuMjA6IFJlbW92ZWQgY2xlYXJTZWxlY3Rpb25Gcm9tTWFwUGFyYWxsZWwgd3JhcHBlciAoMjcgbGluZXMpXG4gIC8vIEFsbCBjYWxsIHNpdGVzIG5vdyBkaXJlY3RseSBpbnZva2UgU2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyIG1ldGhvZHNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gcjAxOS4xNTogUmVtb3ZlZCBvbGQgYWRkU2VsZWN0aW9uVG9NYXAgaW1wbGVtZW50YXRpb24gKDI3MiBsaW5lcylcbiAgLy8gTm93IGZ1bGx5IGhhbmRsZWQgYnkgU2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHJlc3VsdHMgbW9kZSBjaGFuZ2UgZnJvbSB0aGUgbW9kZSBkcm9wZG93biBpbiBRdWVyeVRhc2sgY29tcG9uZW50LlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgc3dpdGNoZXMgYmV0d2VlbiBcIkNyZWF0ZSBuZXdcIiwgXCJBZGQgdG9cIiwgb3JcbiAgICogXCJSZW1vdmUgZnJvbVwiIG1vZGVzLiBJdCBwZXJmb3JtcyB0aGUgZm9sbG93aW5nIGFjdGlvbnM6XG4gICAqIFxuICAgKiAxLiBDb25zdW1lcyBoYXNoIHBhcmFtZXRlcnMgd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzIChwcmV2ZW50cyByZS10cmlnZ2VyaW5nKVxuICAgKiAyLiBDbGVhcnMgYWNjdW11bGF0ZWQgcmVjb3JkcyB3aGVuIHN3aXRjaGluZyB0byBcIk5ld1wiIG1vZGVcbiAgICogMy4gVXBkYXRlcyB3aWRnZXQgc3RhdGUgd2l0aCB0aGUgbmV3IG1vZGVcbiAgICogXG4gICAqIEBwYXJhbSBtb2RlIC0gVGhlIG5ldyBzZWxlY3Rpb24gdHlwZSBtb2RlIChOZXdTZWxlY3Rpb24sIEFkZFRvU2VsZWN0aW9uLCBvciBSZW1vdmVGcm9tU2VsZWN0aW9uKVxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UgPSAobW9kZTogU2VsZWN0aW9uVHlwZSkgPT4ge1xuICAgIC8vIFVzaW5nIEFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIgKHIwMTguNTgpXG4gICAgY29uc3Qgc2hvdWxkQ29uc3VtZUhhc2ggPSAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBtb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pICYmICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZFxuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZShcbiAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICBtb2RlLFxuICAgICAgc2hvdWxkQ29uc3VtZUhhc2gsXG4gICAgICB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgdGhpcy5yZW1vdmVIYXNoUGFyYW1ldGVyXG4gICAgKVxuXG4gICAgLy8gUmVzZXQgbWFudWFsIG1vZGlmaWNhdGlvbnMgd2hlbiBzd2l0Y2hpbmcgdG8gTmV3IFNlbGVjdGlvbiBtb2RlXG4gICAgaWYgKG1vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uICYmIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgIT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICB0aGlzLnJlc2V0TWFudWFsTW9kaWZpY2F0aW9ucygpXG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHdpZGdldCBzdGF0ZSBmcm9tIG1hbmFnZXIncyByZXR1cm4gdmFsdWVcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHJlc3VsdHNNb2RlOiByZXN1bHQucmVzdWx0c01vZGUsXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IHJlc3VsdC5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBoYXNoIHBhcmFtZXRlciBmcm9tIHRoZSBVUkwgd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gc3dpdGNoaW5nIHRvIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGVzIHRvIGNvbnN1bWVcbiAgICogdGhlIGRlZXAgbGluayBwYXJhbWV0ZXIuIFRoaXMgcHJldmVudHMgdGhlIGhhc2ggcGFyYW1ldGVyIGZyb20gcmUtdHJpZ2dlcmluZyB0aGUgcXVlcnlcbiAgICogd2hlbiB0aGUgd2lkZ2V0IHJlLXJlbmRlcnMuXG4gICAqIFxuICAgKiBUaGUgVVJMIGlzIHVwZGF0ZWQgdXNpbmcgaGlzdG9yeS5yZXBsYWNlU3RhdGUgdG8gYXZvaWQgcGFnZSByZWxvYWQsIGFuZCBib3RoIHBhdGhuYW1lXG4gICAqIGFuZCBxdWVyeSBzdHJpbmcgYXJlIHByZXNlcnZlZCAoZS5nLiwgZGVidWcgcGFyYW1ldGVycyByZW1haW4gaW50YWN0KS5cbiAgICogXG4gICAqIEBwYXJhbSBzaG9ydElkIC0gVGhlIHNob3J0SWQgcGFyYW1ldGVyIHRvIHJlbW92ZSBmcm9tIHRoZSBVUkwgaGFzaFxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICovXG4gIHByaXZhdGUgcmVtb3ZlSGFzaFBhcmFtZXRlciA9IChzaG9ydElkOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXNob3J0SWQpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgXG4gICAgaWYgKHVybFBhcmFtcy5oYXMoc2hvcnRJZCkpIHtcbiAgICAgIHVybFBhcmFtcy5kZWxldGUoc2hvcnRJZClcbiAgICAgIGNvbnN0IG5ld0hhc2ggPSB1cmxQYXJhbXMudG9TdHJpbmcoKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAncmVtb3ZlSGFzaFBhcmFtZXRlcicsXG4gICAgICAgIHNob3J0SWQsXG4gICAgICAgIG5ld0hhc2g6IG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJyhlbXB0eSknLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgVVJMIHdpdGhvdXQgdHJpZ2dlcmluZyBhIHJlbG9hZFxuICAgICAgLy8gQWx3YXlzIHByZXNlcnZlIHBhdGhuYW1lIGFuZCBxdWVyeSBzdHJpbmcsIG9ubHkgdXBkYXRlIGhhc2hcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyAobmV3SGFzaCA/IGAjJHtuZXdIYXNofWAgOiAnJylcbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gQWxzbyBjbGVhciB0aGUgc3RhdGUgc28gaXQgd29uJ3QgdHJpZ2dlciBhZ2FpblxuICAgICAgaWYgKHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgPT09IHNob3J0SWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWQgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSA9IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB7XG4gICAgLy8gRElBR05PU1RJQyBMT0dHSU5HOiBTdGF0ZSBjaGFuZ2UgdHJhY2tpbmdcbiAgICBjb25zdCBwcmV2aW91c1JlY29yZHMgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyB8fCBbXVxuICAgIGNvbnN0IHByZXZpb3VzSWRzID0gcHJldmlvdXNSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICBjb25zdCBuZXdJZHMgPSByZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICBjb25zdCBhZGRlZElkcyA9IG5ld0lkcy5maWx0ZXIoaWQgPT4gIXByZXZpb3VzSWRzLmluY2x1ZGVzKGlkKSlcbiAgICBjb25zdCByZW1vdmVkSWRzID0gcHJldmlvdXNJZHMuZmlsdGVyKGlkID0+ICFuZXdJZHMuaW5jbHVkZXMoaWQpKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1yZWNvcmRzLXN0YXRlLWNoYW5nZScsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIHByZXZpb3VzQ291bnQ6IHByZXZpb3VzUmVjb3Jkcy5sZW5ndGgsXG4gICAgICBwcmV2aW91c0lkczogcHJldmlvdXNJZHMsXG4gICAgICBuZXdDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICBuZXdJZHM6IG5ld0lkcyxcbiAgICAgIGFkZGVkSWRzOiBhZGRlZElkcyxcbiAgICAgIHJlbW92ZWRJZHM6IHJlbW92ZWRJZHMsXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gVXNpbmcgQWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciAocjAxOC41OClcbiAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIuaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHRoaXMucHJvcHMuaWQsIHJlY29yZHMpXG5cbiAgICAvLyBJZiB3ZSdyZSBpbiBSZW1vdmUgbW9kZSBhbmQgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgYXJlIGNsZWFyZWQsIHJlc2V0IHRvIE5ld1NlbGVjdGlvbiBtb2RlXG4gICAgLy8gUmVtb3ZlIG1vZGUgcmVxdWlyZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyB0byBmdW5jdGlvbiwgc28gaXQgc2hvdWxkIGJlIGRpc2FibGVkIHdoZW4gcmVjb3JkcyBhcmUgZW1wdHlcbiAgICBjb25zdCBzaG91bGRSZXNldE1vZGUgPSByZWNvcmRzLmxlbmd0aCA9PT0gMCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7IFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiByZWNvcmRzLFxuICAgICAgLy8gUmVzZXQgbW9kZSB0byBOZXdTZWxlY3Rpb24gaWYgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgY2xlYXJlZCBpbiBSZW1vdmUgbW9kZVxuICAgICAgLi4uKHNob3VsZFJlc2V0TW9kZSA/IHtcbiAgICAgICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICB9IDoge30pXG4gICAgfSlcblxuICAgIGlmIChzaG91bGRSZXNldE1vZGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ21vZGUtcmVzZXQtb24tYWNjdW11bGF0ZWQtcmVjb3Jkcy1jbGVhcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHByZXZpb3VzTW9kZTogU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uLFxuICAgICAgICBuZXdNb2RlOiBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbixcbiAgICAgICAgcmVhc29uOiAnYWxsLWFjY3VtdWxhdGVkLXJlY29yZHMtY2xlYXJlZC1pbi1yZW1vdmUtbW9kZScsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTk9URTogTm8gbG9uZ2VyIG5lZWRlZCAtIHdlIHVzZSBleGlzdGluZyBvdXRwdXQgRFMgaW5zdGVhZCBvZiBjcmVhdGluZyBuZXcgb25lLlxuICAgKiBLZXB0IGZvciByZWZlcmVuY2UgYnV0IG5vdCB1c2VkLlxuICAgKi9cbiAgcHJpdmF0ZSBnZXRPckNyZWF0ZUFjY3VtdWxhdGVkUmVzdWx0c0RTID0gYXN5bmMgKG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKTogUHJvbWlzZTxGZWF0dXJlTGF5ZXJEYXRhU291cmNlPiA9PiB7XG4gICAgLy8gVGhpcyBpcyBubyBsb25nZXIgdXNlZCAtIHdlIG1lcmdlIHJlY29yZHMgaW50byBleGlzdGluZyBvdXRwdXQgRFNcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgLSB1c2UgZXhpc3Rpbmcgb3V0cHV0IERTIGluc3RlYWQnKVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyByMDE5LjE2OiBSZW1vdmVkIG9sZCBjbGVhclNlbGVjdGlvbkZyb21NYXAgaW1wbGVtZW50YXRpb24gKDM1NSBsaW5lcylcbiAgLy8gTm93IGZ1bGx5IGhhbmRsZWQgYnkgU2VsZWN0aW9uUmVzdG9yYXRpb25NYW5hZ2VyLmNsZWFyU2VsZWN0aW9uRnJvbU1hcCgpXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogTk9USUZZIHRoYXQgYSBoYXNoIHBhcmFtZXRlciBoYXMgYmVlbiB1c2VkLlxuICAgKiBQcmV2aW91c2x5IHRoaXMgcmVtb3ZlZCB0aGUgaGFzaCBmcm9tIHRoZSBVUkwsIGJ1dCBwZXIgdXBkYXRlZCByZXF1aXJlbWVudHMsXG4gICAqIHVzZXItZW50ZXJlZCBoYXNoZXMgc2hvdWxkIHJlbWFpbiBpbiB0aGUgVVJMLlxuICAgKiBcbiAgICogQHBhcmFtIHNob3J0SWQgLSBUaGUgc2hvcnRJZCBwYXJhbWV0ZXIgdGhhdCB3YXMgdXNlZFxuICAgKi9cbiAgaGFuZGxlSGFzaFBhcmFtZXRlclVzZWQgPSAoc2hvcnRJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgaW5pdGlhbFF1ZXJ5VmFsdWUgfSA9IHRoaXMuc3RhdGVcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtaGFuZGxlaGFzaHBhcmFtZXRlcnVzZWQtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHNob3J0SWQsXG4gICAgICBjdXJyZW50U3RhdGU6IHtcbiAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIE5PVEU6IEhhc2ggcGFyYW1ldGVycyBhcmUgTk9UIGNsZWFyZWQgaGVyZSAtIHRoZXkgcGVyc2lzdCBpbiBVUkxcbiAgICAvLyBIYXNoIHBhcmFtZXRlcnMgYXJlIG9ubHkgY29uc3VtZWQgd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzIChBZGQvUmVtb3ZlKVxuICAgIC8vIHRvIHByZXZlbnQgcmUtdHJpZ2dlcmluZyB3aGVuIHRoZSB1c2VyIG1hbnVhbGx5IHN3aXRjaGVzIG1vZGVzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVIYXNoUGFyYW1ldGVyVXNlZC1ub3RpZmllZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBzaG9ydElkOiBzaG9ydElkLFxuICAgICAgY3VycmVudEluaXRpYWxRdWVyeVZhbHVlOiBpbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgIG5vdGU6ICdIYXNoIHBhcmFtZXRlciB1c2VkIGJ1dCBOT1QgY2xlYXJlZCAtIGhhc2ggcmVtYWlucyBpbiBVUkwgcGVyIHVzZXIgcmVxdWlyZW1lbnQnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBBTFdBWVMgY2xlYXIgYm90aCBoYXNoIHN0YXRlIHZhbHVlcyBhZnRlciBleGVjdXRpb25cbiAgICAvLyBRdWVyeVNpbXBsZSBzaG91bGQgbm90IHJlbWVtYmVyIGhhc2ggc3RhdGUgYWZ0ZXIgSGVscGVyU2ltcGxlLWRyaXZlbiBleGVjdXRpb24gY29tcGxldGVzXG4gICAgLy8gVGhpcyBwcmV2ZW50cyBhdXRvbm9tb3VzIHJlLXByb2Nlc3Npbmcgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgIC8vIFVzaW5nIGEgc2luZ2xlIHNldFN0YXRlIGVuc3VyZXMgYXRvbWljIHVwZGF0ZSBhbmQgcHJldmVudHMgcmFjZSBjb25kaXRpb25zXG4gICAgdGhpcy5zZXRTdGF0ZSh7IFxuICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IGZhbHNlLFxuICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU6IHVuZGVmaW5lZFxuICAgIH0sICgpID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWhhbmRsZWhhc2hwYXJhbWV0ZXJ1c2VkLXN0YXRlLWNsZWFyZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHNob3J0SWQsXG4gICAgICAgIG5ld1N0YXRlOiB7XG4gICAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgICAgfSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbi1mbGFnLWNsZWFyZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgc2hvcnRJZDogc2hvcnRJZCxcbiAgICAgIGZsYWdWYWx1ZTogZmFsc2UsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG5cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgY29uZmlnLCBpZCwgaWNvbiwgbGFiZWwsIGxheW91dElkLCBsYXlvdXRJdGVtSWQsIGNvbnRyb2xsZXJXaWRnZXRJZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHdpZGdldExhYmVsID0gdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2Uoe1xuICAgICAgaWQ6ICdfd2lkZ2V0TGFiZWwnLFxuICAgICAgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5fd2lkZ2V0TGFiZWxcbiAgICB9KVxuICAgIGlmICghY29uZmlnLnF1ZXJ5SXRlbXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIDxXaWRnZXRQbGFjZWhvbGRlciBpY29uPXtpY29uTWFwLmljb25RdWVyeX0gd2lkZ2V0SWQ9e3RoaXMucHJvcHMuaWR9IG5hbWU9e3dpZGdldExhYmVsfSAvPlxuICAgIH1cblxuICAgIGlmIChjb25maWcuYXJyYW5nZVR5cGUgPT09IFF1ZXJ5QXJyYW5nZVR5cGUuUG9wcGVyICYmICFjb250cm9sbGVyV2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICA8VGFza0xpc3RQb3BwZXJXcmFwcGVyXG4gICAgICAgICAgICBpZD17MH1cbiAgICAgICAgICAgIGljb249e2ljb259XG4gICAgICAgICAgICBwb3BwZXJUaXRsZT17bGFiZWx9XG4gICAgICAgICAgICBtaW5TaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5taW5TaXplfVxuICAgICAgICAgICAgZGVmYXVsdFNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/LmRlZmF1bHRTaXplfVxuICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza0xpc3QgXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e2lkfSBcbiAgICAgICAgICAgICAgICBpc0luUG9wcGVyIFxuICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfSBcbiAgICAgICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9IFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncGItNCcgXG4gICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9IFxuICAgICAgICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uPXt0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMuaGFuZGxlSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICAgICAgcmVzdWx0c01vZGU9e3RoaXMuc3RhdGUucmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17dGhpcy5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e3RoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXt0aGlzLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXt0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgbWFwVmlldz17dGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI9e3RoaXMuaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXI9e3RoaXMuY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHN9XG4gICAgICAgICAgICAgICAgYWN0aXZlVGFiPXt0aGlzLnN0YXRlLmFjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICBvblRhYkNoYW5nZT17dGhpcy5oYW5kbGVUYWJDaGFuZ2V9XG4gICAgICAgICAgICAgICAgZXZlbnRNYW5hZ2VyPXt0aGlzLmV2ZW50TWFuYWdlcn1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L1Rhc2tMaXN0UG9wcGVyV3JhcHBlcj5cbiAgICAgICAgPC9RdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXI+XG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5hcnJhbmdlVHlwZSA9PT0gUXVlcnlBcnJhbmdlVHlwZS5JbmxpbmUgJiYgIWNvbnRyb2xsZXJXaWRnZXRJZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFF1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17YCR7bGF5b3V0SWR9OiR7bGF5b3V0SXRlbUlkfWB9PlxuICAgICAgICAgIDxUYXNrTGlzdElubGluZVxuICAgICAgICAgICAgd2lkZ2V0SWQ9e2lkfVxuICAgICAgICAgICAgd2lkZ2V0TGFiZWw9e2xhYmVsfVxuICAgICAgICAgICAgd3JhcD17Y29uZmlnLmFycmFuZ2VXcmFwfVxuICAgICAgICAgICAgcXVlcnlJdGVtcz17Y29uZmlnLnF1ZXJ5SXRlbXN9XG4gICAgICAgICAgICBtaW5TaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5taW5TaXplfVxuICAgICAgICAgICAgZGVmYXVsdFNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/LmRlZmF1bHRTaXplfVxuICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtjb25maWcuZGVmYXVsdFBhZ2VTaXplfVxuICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9XG4gICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXt0aGlzLmhhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvUXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8UGFwZXIgcmVmPXt0aGlzLndpZGdldFJlZn0gdmFyaWFudD0nZmxhdCcgY2xhc3NOYW1lPSdqaW11LXdpZGdldCBydW50aW1lLXF1ZXJ5JyBkYXRhLXdpZGdldGlkPXtpZH0gY3NzPXtjc3NgXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGB9PlxuICAgICAgICB7LyogSGlkZGVuIEppbXVNYXBWaWV3Q29tcG9uZW50IHRvIGdldCBtYXAgdmlldyBmb3IgZ3JhcGhpY3MgbGF5ZXIgKi99XG4gICAgICAgIHsvKiBVc2VzIGV4cGxpY2l0IG1hcCB3aWRnZXQgSUQgZnJvbSBjb25maWcgKHdpZGdldC1sZXZlbCBiaW5kaW5nKSAqL31cbiAgICAgICAge2NvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIGNvbmZpZy5oaWdobGlnaHRNYXBXaWRnZXRJZCAmJiAoXG4gICAgICAgICAgPEppbXVNYXBWaWV3Q29tcG9uZW50XG4gICAgICAgICAgICB1c2VNYXBXaWRnZXRJZD17Y29uZmlnLmhpZ2hsaWdodE1hcFdpZGdldElkfVxuICAgICAgICAgICAgb25BY3RpdmVWaWV3Q2hhbmdlPXt0aGlzLmhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndpZGdldC1oZWFkZXJcIiBjc3M9e2Nzc2BcbiAgICAgICAgICBwYWRkaW5nOiA2cHggMTZweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZSk7XG4gICAgICAgIGB9PlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ3aWRnZXQtdGl0bGVcIiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICB7bGFiZWwgfHwgd2lkZ2V0TGFiZWx9XG4gICAgICAgICAgPC9oMz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgYH0+XG4gICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza0xpc3QgXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e2lkfSBcbiAgICAgICAgICAgICAgICBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc30gXG4gICAgICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtjb25maWcuZGVmYXVsdFBhZ2VTaXplfSBcbiAgICAgICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZT17dGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZX0gXG4gICAgICAgICAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb249e3RoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17dGhpcy5oYW5kbGVIYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgICAgICByZXN1bHRzTW9kZT17dGhpcy5zdGF0ZS5yZXN1bHRzTW9kZX1cbiAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlPXt0aGlzLmhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcz17dGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHN9XG4gICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e3RoaXMuaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ9e2NvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0fVxuICAgICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXI9e3RoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICBtYXBWaWV3PXt0aGlzLm1hcFZpZXdSZWYuY3VycmVudCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcj17dGhpcy5pbml0aWFsaXplR3JhcGhpY3NMYXllckZyb21PdXRwdXREU31cbiAgICAgICAgICAgICAgICBvbkNsZWFyR3JhcGhpY3NMYXllcj17dGhpcy5jbGVhckdyYXBoaWNzTGF5ZXJJZkV4aXN0c31cbiAgICAgICAgICAgICAgICBhY3RpdmVUYWI9e3RoaXMuc3RhdGUuYWN0aXZlVGFifVxuICAgICAgICAgICAgICAgIG9uVGFiQ2hhbmdlPXt0aGlzLmhhbmRsZVRhYkNoYW5nZX1cbiAgICAgICAgICAgICAgICBldmVudE1hbmFnZXI9e3RoaXMuZXZlbnRNYW5hZ2VyfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9RdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgey8qIFN0YXRpb25hcnkgZm9vdGVyICovfVxuICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcbiAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgXG4gICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIxNiAxOCAyMiAxMiAxNiA2XCIvPlxuICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgUXVlcnlTaW1wbGUgYnkgTWFwU2ltcGxlXG4gICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9QYXBlcj5cbiAgICApXG4gIH1cbn1cblxuXG4gZXhwb3J0IGZ1bmN0aW9uIF9fc2V0X3dlYnBhY2tfcHVibGljX3BhdGhfXyh1cmwpIHsgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB1cmwgfSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==