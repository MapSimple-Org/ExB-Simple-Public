System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/sql-expression-runtime","widgets/shared-code/common","jimu-layouts/layout-runtime","jimu-theme"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/filled/directional/down.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/filled/directional/down.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownFilled: () => (/* binding */ DownFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/down.svg */ "./jimu-icons/svg/filled/directional/down.svg");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/filled/directional/right.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/filled/directional/right.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightFilled: () => (/* binding */ RightFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/right.svg */ "./jimu-icons/svg/filled/directional/right.svg");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowLeftOutlined: () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/collapse-all.tsx":
/*!**********************************************************!*\
  !*** ./jimu-icons/outlined/directional/collapse-all.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollapseAllOutlined: () => (/* binding */ CollapseAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/collapse-all.svg */ "./jimu-icons/svg/outlined/directional/collapse-all.svg");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CollapseAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/expand-all.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/expand-all.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExpandAllOutlined: () => (/* binding */ ExpandAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/expand-all.svg */ "./jimu-icons/svg/outlined/directional/expand-all.svg");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ExpandAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/close.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/close.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CloseOutlined: () => (/* binding */ CloseOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CloseOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/trash.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TrashOutlined: () => (/* binding */ TrashOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/svg/filled/directional/down.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/down.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m14 4-6 8-6-8z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/directional/right.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/right.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m4 2 8 6-8 6z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/collapse-all.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/collapse-all.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/expand-all.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/expand-all.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/error.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/error.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/icon.svg":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/query-simple/icon.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" d=\"M8.5 3A5.5 5.5 0 0 1 14 8.5a5.5 5.5 0 0 1-1.273 3.527l4.053 4.054a.75.75 0 1 1-1.06 1.06l-4.054-4.053a5.5 5.5 0 0 1-3.527 1.273 5.5 5.5 0 1 1 0-11H8.5zm0 1.5h-.361a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\"></path><rect width=\"19\" height=\"19\" x=\".5\" y=\".5\" stroke=\"#000\" rx=\"1.5\"></rect></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/config.ts":
/*!************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateToolType: () => (/* binding */ CreateToolType),
/* harmony export */   FieldsType: () => (/* binding */ FieldsType),
/* harmony export */   ListDirection: () => (/* binding */ ListDirection),
/* harmony export */   PagingType: () => (/* binding */ PagingType),
/* harmony export */   QueryArrangeType: () => (/* binding */ QueryArrangeType),
/* harmony export */   ResultSelectMode: () => (/* binding */ ResultSelectMode),
/* harmony export */   SelectionType: () => (/* binding */ SelectionType),
/* harmony export */   SortDirection: () => (/* binding */ SortDirection),
/* harmony export */   SpatialFilterType: () => (/* binding */ SpatialFilterType),
/* harmony export */   SpatialRelation: () => (/* binding */ SpatialRelation),
/* harmony export */   SymbolType: () => (/* binding */ SymbolType),
/* harmony export */   UnitType: () => (/* binding */ UnitType),
/* harmony export */   mapJSAPISpatialRelToDsSpatialRel: () => (/* binding */ mapJSAPISpatialRelToDsSpatialRel),
/* harmony export */   mapJSAPIUnitToDsUnit: () => (/* binding */ mapJSAPIUnitToDsUnit)
/* harmony export */ });
var CreateToolType;
(function (CreateToolType) {
    CreateToolType["Point"] = "Point";
    CreateToolType["Polyline"] = "Polyline";
    CreateToolType["Polygon"] = "Polygon";
    CreateToolType["Rectangle"] = "Rectangle";
    CreateToolType["Circle"] = "Circle";
})(CreateToolType || (CreateToolType = {}));
var SelectionType;
(function (SelectionType) {
    SelectionType["NewSelection"] = "NEW_SELECTION";
    SelectionType["AddToSelection"] = "ADD_TO_CURRENT_SELECTION";
    SelectionType["RemoveFromSelection"] = "REMOVE_FROM_CURRENT_SELECTION";
    SelectionType["SubsetSelection"] = "SUBSET_FROM_CURRENT_SELECTION";
    SelectionType["SwitchSelection"] = "SWITCH_CURRENT_SELECTION";
})(SelectionType || (SelectionType = {}));
var QueryArrangeType;
(function (QueryArrangeType) {
    QueryArrangeType["Block"] = "BLOCK";
    QueryArrangeType["Inline"] = "INLINE";
    QueryArrangeType["Popper"] = "POPPER";
})(QueryArrangeType || (QueryArrangeType = {}));
var SpatialFilterType;
(function (SpatialFilterType) {
    SpatialFilterType["CurrentMapExtent"] = "CurrentMapExtent";
    SpatialFilterType["InteractiveDrawMode"] = "InteractiveDrawMode";
    SpatialFilterType["None"] = "";
})(SpatialFilterType || (SpatialFilterType = {}));
var SpatialRelation;
(function (SpatialRelation) {
    SpatialRelation["Intersect"] = "intersects";
    SpatialRelation["Contain"] = "contains";
    SpatialRelation["Cross"] = "crosses";
    SpatialRelation["EnvelopeIntersect"] = "envelope-intersects";
    SpatialRelation["IndexIntersect"] = "index-intersects";
    SpatialRelation["Overlap"] = "overlaps";
    SpatialRelation["Touch"] = "touches";
    SpatialRelation["Within"] = "within";
})(SpatialRelation || (SpatialRelation = {}));
const mapJSAPISpatialRelToDsSpatialRel = {
    [SpatialRelation.Intersect]: 'esriSpatialRelIntersects',
    [SpatialRelation.Contain]: 'esriSpatialRelContains',
    [SpatialRelation.Cross]: 'esriSpatialRelCrosses',
    [SpatialRelation.EnvelopeIntersect]: 'esriSpatialRelEnvelopeIntersects',
    [SpatialRelation.IndexIntersect]: 'esriSpatialRelIndexIntersects',
    [SpatialRelation.Overlap]: 'esriSpatialRelOverlaps',
    [SpatialRelation.Touch]: 'esriSpatialRelTouches',
    [SpatialRelation.Within]: 'esriSpatialRelWithin'
};
var UnitType;
(function (UnitType) {
    UnitType["Miles"] = "Miles";
    UnitType["Kilometers"] = "Kilometers";
    UnitType["Feet"] = "Feet";
    UnitType["Meters"] = "Meters";
    UnitType["NauticalMiles"] = "NauticalMiles";
})(UnitType || (UnitType = {}));
const mapJSAPIUnitToDsUnit = {
    [UnitType.Miles]: 'esriSRUnit_StatuteMile',
    [UnitType.Kilometers]: 'esriSRUnit_Kilometer',
    [UnitType.Feet]: 'esriSRUnit_Foot',
    [UnitType.Meters]: 'esriSRUnit_Meter',
    [UnitType.NauticalMiles]: 'esriSRUnit_NauticalMile'
};
var ListDirection;
(function (ListDirection) {
    ListDirection["Horizontal"] = "Horizontal";
    ListDirection["Vertical"] = "Vertical";
})(ListDirection || (ListDirection = {}));
var PagingType;
(function (PagingType) {
    PagingType["MultiPage"] = "MultiPage";
    PagingType["LazyLoad"] = "LazyLoad";
})(PagingType || (PagingType = {}));
var FieldsType;
(function (FieldsType) {
    FieldsType["PopupSetting"] = "PopupSetting";
    FieldsType["SelectAttributes"] = "SelectAttributes";
})(FieldsType || (FieldsType = {}));
var SortDirection;
(function (SortDirection) {
    SortDirection["Asc"] = "Asc";
    SortDirection["Desc"] = "Desc";
})(SortDirection || (SortDirection = {}));
var ResultSelectMode;
(function (ResultSelectMode) {
    ResultSelectMode["Single"] = "Single";
    ResultSelectMode["Multiple"] = "Multiple";
})(ResultSelectMode || (ResultSelectMode = {}));
var SymbolType;
(function (SymbolType) {
    SymbolType["DefaultSymbol"] = "DefaultSymbol";
    SymbolType["CustomSymbol"] = "CustomSymbol";
})(SymbolType || (SymbolType = {}));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAddToMapAction: () => (/* binding */ createAddToMapAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runtime/debug-logger */ "./your-extensions/widgets/query-simple/src/runtime/debug-logger.ts");
/**
 * Custom "Add to Map" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Show on Map" action with a custom
 * implementation that uses QuerySimple's selection process (selectRecordsAndPublish).
 * This ensures consistent behavior with query results and proper integration
 * with the widget's "Clear results" functionality.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



/**
 * Creates a custom "Add to Map" data action that uses QuerySimple's selection process.
 *
 * This action replaces the framework's "Show on Map" action and ensures consistent
 * behavior with QuerySimple's query results by using the same selection mechanism.
 *
 * @param widgetId - The widget ID that provides this action
 * @param outputDS - The output data source (used for selection on the origin layer)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration (for zoomToSelected setting)
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns A DataAction object that can be used by DataActionList
 */
function createAddToMapAction(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    return {
        id: `${widgetId}-addToMap`,
        name: 'addToMap',
        label: intl.formatMessage({ id: 'addToMap', defaultMessage: 'Add to map' }),
        // Icon matches the framework's "Show on Map" action for consistency
        icon: (__webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg"),
        // Note: Index may not control position if extraActions are always appended after framework actions
        index: -100,
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__.debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__.debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records
            if (!dataSets || dataSets.length === 0) {
                _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__.debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'No data sets'
                });
                return false;
            }
            // Check if we have records and output data source
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            const supported = hasRecords && !!outputDS;
            _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__.debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                result: supported,
                hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return supported;
        }),
        /**
         * Executes the action by selecting records using QuerySimple's selection process.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__.debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            if (!outputDS || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__.debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: !outputDS ? 'No outputDS' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__.debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            // Get record IDs
            const recordIds = allRecords.map(record => record.getId());
            _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__.debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                recordsCount: allRecords.length,
                recordIds: recordIds.slice(0, 10), // Log first 10 IDs
                outputDSId: outputDS.id
            });
            // Use QuerySimple's selection process - selects on origin layer and publishes selection messages
            // This ensures consistent behavior with query results and proper integration with "Clear results"
            try {
                (0,_runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, allRecords, true);
                // Determine zoom behavior: runtime override takes precedence, then queryItem config, defaults to true
                const shouldZoom = runtimeZoomToSelected !== undefined
                    ? runtimeZoomToSelected
                    : ((queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== false);
                if (shouldZoom && allRecords.length > 0) {
                    const zoomDataSet = {
                        dataSource: outputDS,
                        records: allRecords,
                        name: outputDS.getLabel()
                    };
                    // Find and execute the zoomToFeature action from available framework actions
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().getSupportedActions(widgetId, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records)
                        .then(actionCategories => {
                        // Search through all action categories to find zoomToFeature action
                        let zoomAction = null;
                        for (const category in actionCategories) {
                            const actions = actionCategories[category];
                            zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature') || null;
                            if (zoomAction)
                                break;
                        }
                        if (zoomAction) {
                            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().executeDataAction(zoomAction, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records, widgetId);
                        }
                    })
                        .catch(error => {
                        _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__.debugLogger.log('DATA-ACTION', {
                            action: 'addToMap-onExecute-zoom',
                            error: error instanceof Error ? error.message : String(error)
                        });
                    });
                }
                _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__.debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: true,
                    message: 'Successfully selected records and published selection message',
                    zoomExecuted: shouldZoom
                });
                return true;
            }
            catch (error) {
                _runtime_debug_logger__WEBPACK_IMPORTED_MODULE_2__.debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                console.error('Error executing Add to Map action:', error);
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/index.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getExtraActions: () => (/* binding */ getExtraActions)
/* harmony export */ });
/* harmony import */ var _add_to_map_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-to-map-action */ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx");

/**
 * QuerySimple Custom Data Actions
 *
 * Returns custom data actions for the widget.
 * Includes a custom "Add to Map" action that uses QuerySimple's selection process.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source (null/undefined if not available)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns Array of custom DataAction objects (empty if conditions not met)
 */
function getExtraActions(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    // Only create the action if we have both an output data source and intl object
    if (outputDS && intl) {
        return [(0,_add_to_map_action__WEBPACK_IMPORTED_MODULE_0__.createAddToMapAction)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected)];
    }
    return [];
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/default-query-item.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/default-query-item.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_QUERY_ITEM: () => (/* binding */ DEFAULT_QUERY_ITEM)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/query-simple/src/config.ts");

const DEFAULT_QUERY_ITEM = {
    icon: null,
    displayLabel: true,
    sqlExprObj: null,
    useAttributeFilter: true,
    useSpatialFilter: true,
    spatialMapWidgetIds: [],
    spatialFilterTypes: [],
    spatialInteractiveCreateToolTypes: [
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Point,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polyline,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polygon,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Rectangle,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Circle
    ],
    spatialInteractiveEnableBuffer: false,
    spatialInteractiveBufferDistance: 0,
    spatialInteractiveBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    spatialRelations: [_config__WEBPACK_IMPORTED_MODULE_0__.SpatialRelation.Intersect],
    spatialRelationUseDataSources: [],
    spatialRelationEnableSelectTool: false,
    spatialRelationEnableBuffer: false,
    spatialRelationBufferDistance: 0,
    spatialRelationBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    resultListDirection: _config__WEBPACK_IMPORTED_MODULE_0__.ListDirection.Vertical,
    resultPagingStyle: _config__WEBPACK_IMPORTED_MODULE_0__.PagingType.MultiPage,
    resultFieldsType: _config__WEBPACK_IMPORTED_MODULE_0__.FieldsType.PopupSetting,
    resultSymbolType: _config__WEBPACK_IMPORTED_MODULE_0__.SymbolType.DefaultSymbol,
    resultCustomSymbol: {
        angle: 0,
        color: [255, 255, 255, 255],
        outline: {
            color: [255, 255, 255, 255],
            style: 'esriSLSSolid',
            type: 'esriSLS',
            width: 1
        },
        size: 6,
        style: 'esriSMSCircle',
        type: 'esriSMS',
        xoffset: 0,
        yoffset: 0
    },
    resultAllowChangeSymbol: false,
    allowExport: false,
    sortOptions: [],
    zoomToSelected: true,
    itemSizeMap: {
        arrangementHorizontalPopper: {
            minSize: { width: 300, height: 300 },
            defaultSize: { width: 360, height: 480 }
        }
    }
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferInput: () => (/* binding */ BufferInput)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */





function BufferInput(props) {
    const { distance = 0, unit = _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters, onBufferChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const [d, setD] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(distance);
    const [u, setU] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(unit);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_5__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        let changed = false;
        if (distance !== d) {
            setD(distance);
            changed = true;
        }
        if (unit !== u) {
            setU(unit);
            changed = true;
        }
        if (changed) {
            onBufferChange(distance, unit);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [distance, unit]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setD(distance);
            setU(unit);
            onBufferChange(distance, unit);
        }
    }, [queryTaskContext.resetSymbol, distance, unit, onBufferChange]);
    const handleDistanceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
    }, []);
    const handleDistanceAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
        onBufferChange(value, u);
    }, [onBufferChange, u]);
    const handleBufferUnitChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        setU(e.target.value);
        onBufferChange(d, e.target.value);
    }, [onBufferChange, d]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": getI18nMessage('theBufferDistance'), className: 'mr-1', value: d, onChange: handleDistanceChange, onAcceptValue: handleDistanceAccepted }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('unit'), value: u, onChange: handleBufferUnitChange, children: Object.values(_config__WEBPACK_IMPORTED_MODULE_3__.UnitType).map((value) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: value, children: getI18nMessage(`unit_${value}`) }, value))) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadStatus: () => (/* binding */ LoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/filled/directional/right */ "./jimu-icons/filled/directional/right.tsx");
/* harmony import */ var jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/filled/directional/down */ "./jimu-icons/filled/directional/down.tsx");

/** @jsx jsx */
// This file is duplicated from '../../../../feature-info/src/runtime/components/feature-info'





var LoadStatus;
(function (LoadStatus) {
    LoadStatus["Pending"] = "Pending";
    LoadStatus["Fulfilled"] = "Fulfilled";
    LoadStatus["Rejected"] = "Rejected";
})(LoadStatus || (LoadStatus = {}));
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  border: 1px solid var(--sys-color-divider-secondary);
  .esri-widget__heading {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    margin: 0;
    color: var(--sys-color-surface-paper-text);
  }

  .esri-feature__content-element {
    padding: 0;
  }

  .jimu-btn.expanded {
    align-self: flex-start;
  }

  .esri-feature.esri-widget {
    background-color: transparent;
  }
`;
class FeatureInfo extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor(props) {
        super(props);
        this.toggleExpanded = (e) => {
            e.stopPropagation();
            this.setState({ showContent: !this.state.showContent });
        };
        const { togglable = false, expandByDefault } = this.props;
        this.featureContainer = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.state = {
            showContent: !togglable || expandByDefault,
            loadStatus: LoadStatus.Pending
        };
    }
    componentDidMount() {
        this.createFeature();
    }
    componentDidUpdate(prevProps) {
        if (this.feature) {
            if (prevProps.popupTemplate !== this.props.popupTemplate ||
                prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate ||
                prevProps.graphic !== this.props.graphic) {
                this.destroyFeature();
                this.createFeature();
            }
            else {
                this.feature.visibleElements = this.getVisibleElements();
            }
        }
    }
    destroyFeature() {
        this.feature && !this.feature.destroyed && this.feature.destroy();
    }
    getVisibleElements() {
        const { togglable = false } = this.props;
        const { showContent } = this.state;
        const expanded = togglable ? showContent : true;
        return {
            title: true,
            content: {
                fields: expanded,
                text: expanded,
                media: expanded,
                attachments: expanded
            },
            lastEditedInfo: false
        };
    }
    createFeature() {
        let featureModulePromise;
        if (this.Feature) {
            featureModulePromise = Promise.resolve();
        }
        else {
            featureModulePromise = (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Feature'
            ]).then(modules => {
                [
                    this.Feature
                ] = modules;
            });
        }
        return featureModulePromise.then(() => {
            var _a, _b, _c, _d;
            const container = document && document.createElement('div');
            container.className = 'jimu-widget';
            this.featureContainer.current.appendChild(container);
            const originDS = this.props.dataSource.getOriginDataSources();
            const rootDataSource = (_a = originDS === null || originDS === void 0 ? void 0 : originDS[0]) === null || _a === void 0 ? void 0 : _a.getRootDataSource();
            this.destroyFeature();
            const layer = this.props.graphic.layer;
            if (this.props.popupTemplate) {
                this.props.graphic.popupTemplate = this.props.popupTemplate;
            }
            else if (layer) {
                // set popupTemplate with layer's popupTemplate or defaultPopupTemplate
                this.props.graphic.popupTemplate = (_b = layer.popupTemplate) !== null && _b !== void 0 ? _b : this.props.defaultPopupTemplate;
            }
            else {
                this.props.graphic.popupTemplate = this.props.defaultPopupTemplate;
            }
            if (layer && !layer.popupTemplate) {
                layer.popupTemplate = this.props.popupTemplate || this.props.defaultPopupTemplate;
            }
            this.feature = new this.Feature({
                container: container,
                defaultPopupTemplateEnabled: true,
                // @ts-expect-error
                spatialReference: ((_d = (_c = this.props.dataSource) === null || _c === void 0 ? void 0 : _c.layer) === null || _d === void 0 ? void 0 : _d.spatialReference) || null,
                // @ts-expect-error
                map: (rootDataSource === null || rootDataSource === void 0 ? void 0 : rootDataSource.map) || null,
                graphic: this.props.graphic,
                visibleElements: this.getVisibleElements()
            });
        }).then(() => {
            this.setState({ loadStatus: LoadStatus.Fulfilled });
        });
    }
    render() {
        const { togglable = false, intl } = this.props;
        const { showContent } = this.state;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'feature-info-component d-flex align-items-center p-2', css: style, children: [togglable && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { "aria-label": intl.formatMessage({ id: showContent ? 'collapse' : 'expand' }), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 jimu-outline-inside flex-shrink-0', { expanded: showContent }), variant: 'text', color: 'inherit', icon: true, size: 'sm', onClick: this.toggleExpanded, children: showContent ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__.DownFilled, { size: 's' }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__.RightFilled, { size: 's', autoFlip: true }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1', ref: this.featureContainer })] }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(FeatureInfo));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/debug-logger.ts":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/debug-logger.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   debugLogger: () => (/* binding */ debugLogger)
/* harmony export */ });
/**
 * Configurable debug logging utility for QuerySimple widget
 *
 * Usage:
 * - Add ?debug=all to URL to see all debug logs
 * - Add ?debug=HASH,FORM to see specific feature logs
 * - Add ?debug=false to disable all debug logs
 *
 * Features:
 * - HASH: Hash parameter processing
 * - FORM: Query form interactions
 * - TASK: Query task management
 * - ZOOM: Zoom behavior
 * - MAP-EXTENT: Map extent changes
 * - DATA-ACTION: Data action execution (Add to Map, etc.)
 * - GROUP: Query grouping and dropdown selection
 */
class DebugLogger {
    constructor() {
        this.enabledFeatures = new Set();
        this.initialized = false;
    }
    initialize() {
        if (this.initialized)
            return;
        // Check URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const debugValue = urlParams.get('debug');
        if (debugValue === 'false') {
            // Explicitly disabled
            this.initialized = true;
            return;
        }
        if (debugValue === 'all') {
            // Enable all features only if explicitly set to 'all'
            this.enabledFeatures.add('HASH');
            this.enabledFeatures.add('FORM');
            this.enabledFeatures.add('TASK');
            this.enabledFeatures.add('ZOOM');
            this.enabledFeatures.add('MAP-EXTENT');
            this.enabledFeatures.add('DATA-ACTION');
            this.enabledFeatures.add('GROUP');
        }
        else if (debugValue !== null) {
            // Parse comma-separated feature list
            const features = debugValue.split(',').map(f => f.trim().toUpperCase());
            features.forEach(feature => {
                if (feature === 'ALL') {
                    this.enabledFeatures.add('HASH');
                    this.enabledFeatures.add('FORM');
                    this.enabledFeatures.add('TASK');
                    this.enabledFeatures.add('ZOOM');
                    this.enabledFeatures.add('MAP-EXTENT');
                    this.enabledFeatures.add('DATA-ACTION');
                    this.enabledFeatures.add('GROUP');
                }
                else if (['HASH', 'FORM', 'TASK', 'ZOOM', 'MAP-EXTENT', 'DATA-ACTION', 'GROUP'].includes(feature)) {
                    this.enabledFeatures.add(feature);
                }
            });
        }
        this.initialized = true;
    }
    isEnabled(feature) {
        this.initialize();
        if (this.enabledFeatures.has('all')) {
            return true;
        }
        return this.enabledFeatures.has(feature);
    }
    log(feature, data) {
        if (!this.isEnabled(feature)) {
            return;
        }
        const logData = Object.assign({ feature, timestamp: new Date().toISOString() }, data);
        console.log(`[QUERYSIMPLE-${feature}]`, JSON.stringify(logData, null, 2));
    }
    getConfig() {
        this.initialize();
        const urlParams = new URLSearchParams(window.location.search);
        const debugValue = urlParams.get('debug');
        return {
            enabledFeatures: Array.from(this.enabledFeatures),
            debugValue
        };
    }
}
const debugLogger = new DebugLogger();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDraw: () => (/* binding */ GeometryFromDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-draw-tool */ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







function GeometryFromDraw(props) {
    const { onGeometryChange, createToolTypes, mapWidgetIds, enableBuffer, bufferDistance, bufferUnit, onBufferChange, widgetId } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_7__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geodesicBufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryServiceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferDistanceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferDistance);
    const bufferUnitRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferUnit);
    const bufferedGraphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (enableBuffer) {
            // Parent component query-task-spatial-form will reset buffer parameter when filter type changes,
            // so defer the init buffer option in order not to be override by its parent.
            jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
                onBufferChange(bufferDistance, bufferUnit);
            });
        }
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
            'esri/Graphic'
        ]).then((modules) => {
            const Graphic = modules[0];
            bufferedGraphicRef.current = new Graphic({
                symbol: {
                    type: 'simple-fill',
                    color: [51, 51, 204, 0.5],
                    style: 'solid',
                    outline: {
                        color: [51, 51, 204, 0.8],
                        width: 1
                    }
                }
            });
        });
    });
    const applyBufferEffect = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        if (!geometryRef.current || !enableBuffer || bufferDistanceRef.current === 0) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        // If the end user uses a point or line query geometry, then the negative buffer will not work (same effect as there is no buffer)
        const isPointNegativeBuffer = (((_a = geometryRef.current) === null || _a === void 0 ? void 0 : _a.type) === 'point' || ((_b = geometryRef.current) === null || _b === void 0 ? void 0 : _b.type) === 'multipoint') && bufferDistanceRef.current < 0;
        const isLineNegativeBuffer = ((_c = geometryRef.current) === null || _c === void 0 ? void 0 : _c.type) === 'polyline' && bufferDistanceRef.current < 0;
        if (isPointNegativeBuffer || isLineNegativeBuffer) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        const geometry = geometryRef.current;
        // https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html#buffer
        if (((_d = geometry.spatialReference) === null || _d === void 0 ? void 0 : _d.isGeographic) && !geometry.spatialReference.isWGS84) {
            const serviceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getGeometryService();
            if (!geometryServiceRef.current) {
                const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                    'esri/rest/geometryService',
                    'esri/rest/support/BufferParameters'
                ]);
                geometryServiceRef.current = {
                    geometryService: modules[0],
                    bufferParameters: modules[1]
                };
            }
            const { geometryService, bufferParameters: BufferParameters } = geometryServiceRef.current;
            const polygons = yield geometryService.buffer(serviceUrl, new BufferParameters({
                distances: [bufferDistanceRef.current],
                unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current),
                geodesic: true,
                bufferSpatialReference: geometry.spatialReference,
                outSpatialReference: geometry.spatialReference,
                geometries: [geometry]
            }));
            bufferedGraphicRef.current.geometry = polygons[0];
        }
        else {
            if (((_e = geometry.spatialReference) === null || _e === void 0 ? void 0 : _e.isWGS84) || ((_f = geometry.spatialReference) === null || _f === void 0 ? void 0 : _f.isWebMercator)) {
                if (!geodesicBufferOperatorRef.current) {
                    geodesicBufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/geodesicBufferOperator');
                }
                if (!geodesicBufferOperatorRef.current.isLoaded()) {
                    yield geodesicBufferOperatorRef.current.load();
                }
                bufferedGraphicRef.current.geometry = geodesicBufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
            else {
                if (!bufferOperatorRef.current) {
                    bufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/bufferOperator');
                }
                bufferedGraphicRef.current.geometry = bufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
        }
    }), [enableBuffer]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            getLayerFunRef.current && getLayerFunRef.current().removeAll();
            onGeometryChange(null);
        }
    }, [queryTaskContext.resetSymbol, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        // clear drawing graphics before switching map view
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        if (layer) {
            layer.removeAll();
            onGeometryChange(null);
        }
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, [onGeometryChange]);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferDistanceRef.current = distance;
        bufferUnitRef.current = unit;
        applyBufferEffect();
        onBufferChange(distance, unit);
    }, [onBufferChange, applyBufferEffect]);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic, getLayerFun, clearAfterApply) => {
        getLayerFunRef.current = getLayerFun;
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        // it's possible that the geometry is the same as the previous one, only the clearAfterApply is changed.
        if (geometryRef.current !== (graphic === null || graphic === void 0 ? void 0 : graphic.geometry)) {
            geometryRef.current = graphic === null || graphic === void 0 ? void 0 : graphic.geometry;
            applyBufferEffect().then(() => {
                if (bufferedGraphicRef.current.geometry) {
                    layer === null || layer === void 0 ? void 0 : layer.add(bufferedGraphicRef.current);
                }
            });
        }
        onGeometryChange(graphic === null || graphic === void 0 ? void 0 : graphic.geometry, layer, graphic, clearAfterApply);
    }, [onGeometryChange, applyBufferEffect]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))), (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__.InteractiveDraw, { jimuMapView: jimuMapView, widgetId: widgetId, toolTypes: createToolTypes, onDrawEnd: handleDrawEnd }), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'title3', "aria-label": getI18nMessage('theBufferDistance'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_5__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: handleBufferChange }) })] }))] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDataSource: () => (/* binding */ GeometryFromDataSource)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */






const marginStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`;
function getRuntimeDataSource() {
    const result = {};
    let notEmpty = false;
    const dsMap = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSources();
    Object.keys(dsMap).forEach(dsId => {
        const ds = dsMap[dsId];
        // only include the ds that has geometry
        if (ds.getGeometryType() != null && !ds.isInAppConfig() && ds.getMainDataSource().id === dsId && !ds.getDataSourceJson().isOutputFromWidget) {
            result[dsId] = ds;
            notEmpty = true;
        }
    });
    return notEmpty ? result : null;
}
function GeometryFromDataSource(props) {
    var _a;
    const { onSelectionChange, useDataSources = [], useRuntimeData, spatialRelations, enableBuffer, bufferDistance, bufferUnit, onBufferChange, onRelationChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [currentDataSource, setCurrentDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(useDataSources[0]);
    const [runtimeDataSource, setRuntimeDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [count, setCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const [currentRelation, setCurrentRelation] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_6__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation();
    const spatialRelationOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return Object.entries(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialRelation).map(([key, value]) => ({
            value,
            label: getI18nMessage(`spatialRelation_${key}`)
        }));
    }, [getI18nMessage]);
    const loadedUseDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const loaded = [];
        useDataSources.forEach((item) => {
            var _a, _b;
            if (((_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[item.mainDataSourceId]) === null || _b === void 0 ? void 0 : _b.instanceStatus) === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created) {
                loaded.push(item.dataSourceId);
            }
        });
        if (loaded.length > 0) {
            return loaded.join(',');
        }
        return '';
    });
    const numOfDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        if (!useRuntimeData) {
            return 0;
        }
        return Object.keys((_a = state.dataSourcesInfo) !== null && _a !== void 0 ? _a : {}).filter(dsId => state.dataSourcesInfo[dsId].instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created).length;
    });
    const runtimeDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (numOfDs > 0) {
            return getRuntimeDataSource();
        }
    }, [numOfDs]);
    const numOfRuntimeDs = Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).length;
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if ((spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0) {
            onRelationChange(spatialRelations[0]);
        }
        if (enableBuffer) {
            onBufferChange(bufferDistance, bufferUnit);
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setCurrentRelation(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
            onRelationChange(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
        }
    }, [queryTaskContext.resetSymbol, onRelationChange, spatialRelations]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!spatialRelations) {
            setCurrentRelation(null);
        }
        else if (!spatialRelations.includes(currentRelation)) {
            setCurrentRelation(spatialRelations[0]);
            onRelationChange(spatialRelations[0]);
        }
    }, [spatialRelations, currentRelation, onRelationChange]);
    const handleDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = useDataSources.find((item) => item.dataSourceId === dsId);
        setCurrentDataSource((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(ds));
        setRuntimeDataSource(null);
    }, [useDataSources]);
    const handleRuntimeDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(dsId);
        setRuntimeDataSource(ds);
        setCurrentDataSource(null);
    }, []);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource((_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        if ((records === null || records === void 0 ? void 0 : records.length) > 0) {
            const geometries = records.map((record) => record.getJSAPIGeometry());
            onSelectionChange(geometries);
            setCount(records.length);
        }
        else {
            onSelectionChange(null);
            setCount(0);
        }
    }, [currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId, runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, onSelectionChange]);
    const getLabelOfSpatialRelation = (relation) => {
        return spatialRelationOptions.find(item => item.value === relation).label;
    };
    const handleSpatialRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(e => {
        setCurrentRelation(e.target.value);
        onRelationChange(e.target.value);
    }, [onRelationChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: marginStyle, className: 'title3', children: getI18nMessage('chooseFilterLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterLayer'), value: (_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, children: [numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('preconfigured') }), useDataSources.map((item) => {
                        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(item.dataSourceId);
                        if (loadedUseDataSources.includes(item.dataSourceId) || (ds === null || ds === void 0 ? void 0 : ds.getLabel())) {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: item.dataSourceId, onClick: () => { handleDataSourceChange(item.dataSourceId); }, children: ds === null || ds === void 0 ? void 0 : ds.getLabel() }, item.dataSourceId));
                        }
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { children: translate('loading') }, item.dataSourceId));
                    }), numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { divider: true }), numOfRuntimeDs > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('runtime') }), Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).map(dsId => {
                        const ds = runtimeDataSources[dsId];
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: dsId, onClick: () => { handleRuntimeDataSourceChange(dsId); }, children: ds.getLabel() }, dsId));
                    })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-1 font-italic', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `color: var(--sys-color-surface-paper-hint);`, children: getI18nMessage('selectedRecords', { num: count }) }), (spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate title3 mb-0', children: getI18nMessage('relationship') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('relationship'), value: currentRelation, onChange: handleSpatialRelationChange, children: spatialRelations.map((item) => {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item, children: getLabelOfSpatialRelation(item) }, item));
                        }) })] })), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', "aria-label": getI18nMessage('theBufferDistance'), css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3 text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_4__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: onBufferChange }) })] })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: currentDataSource, dataSource: runtimeDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), useDataSources.map((item) => {
                // make sure the datasource is created
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: item }, item.dataSourceId));
            })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromMap: () => (/* binding */ GeometryFromMap)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");

/** @jsx jsx */


function GeometryFromMap(props) {
    const { onGeometryChange, mapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const PolygonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            let handler;
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/core/reactiveUtils').then((reactiveUtils) => {
                handler = reactiveUtils.watch(() => jimuMapView.view.extent, (extent) => {
                    if (PolygonRef.current) {
                        onGeometryChange(PolygonRef.current.fromExtent(extent));
                    }
                    else {
                        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/geometry/Polygon']).then(modules => {
                            PolygonRef.current = modules[0];
                            onGeometryChange(PolygonRef.current.fromExtent(extent));
                        });
                    }
                });
                // set initial extent
                onGeometryChange(jimuMapView.view.extent);
            });
            return () => {
                if (handler) {
                    handler.remove();
                }
            };
        }
    }, [jimuMapView, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveDraw: () => (/* binding */ InteractiveDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");

/** @jsx jsx */





const sketchToolInfoMap = {
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Point]: { drawToolName: 'point', esriClassName: 'esri-icon-point', toolIndex: 0 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polyline]: { drawToolName: 'polyline', esriClassName: 'esri-icon-polyline', toolIndex: 4 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polygon]: { drawToolName: 'polygon', esriClassName: 'esri-icon-polygon', toolIndex: 2 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Rectangle]: {
        drawToolName: 'rectangle',
        esriClassName: 'esri-icon-checkbox-unchecked',
        toolIndex: 1
    },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Circle]: { drawToolName: 'circle', esriClassName: 'esri-icon-radio-unchecked', toolIndex: 3 }
};
function InteractiveDraw(props) {
    const { toolTypes = [], jimuMapView, onDrawEnd, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [mapModule, setMapModule] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const graphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [clearAfterApply, setClearAfterApply] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const visibleElements = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return {
            createTools: Object.entries(sketchToolInfoMap).reduce((result, [key, value]) => (Object.assign(Object.assign({}, result), { [value.drawToolName]: toolTypes.includes(key) })), { point: false }),
            selectionTools: {
                'lasso-selection': false,
                'rectangle-selection': false
            },
            settingsMenu: false,
            undoRedoMenu: false,
            deleteButton: true
        };
    }, [toolTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.moduleLoader.loadModule('jimu-ui/advanced/map').then((result) => {
            setMapModule(result);
        });
    });
    const handleDrawToolCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuDrawToolsRef) => {
        getLayerFunRef.current = jimuDrawToolsRef.getGraphicsLayer;
    }, []);
    const handleDrawStart = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        getLayerFunRef.current && (getLayerFunRef.current)().removeAll();
    }, []);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic) => {
        graphicRef.current = graphic;
        onDrawEnd(graphic, getLayerFunRef.current, clearAfterApply);
    }, [onDrawEnd, clearAfterApply]);
    const handleCleared = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        graphicRef.current = null;
        onDrawEnd(null);
    }, [onDrawEnd]);
    const handleClearSettingChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        if (graphicRef.current) {
            onDrawEnd(graphicRef.current, getLayerFunRef.current, e.target.checked);
        }
        setClearAfterApply(e.target.checked);
    }, [onDrawEnd]);
    const JimuDraw = mapModule === null || mapModule === void 0 ? void 0 : mapModule.JimuDraw;
    if (!JimuDraw) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.StatusIndicator, { statusType: widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading });
    }
    const isAvailable = Object.keys(visibleElements.createTools).some(toolName => visibleElements.createTools[toolName]);
    if (!isAvailable) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JimuDraw, { jimuMapView: jimuMapView, operatorWidgetId: widgetId, disableSymbolSelector: true, drawingOptions: {
                    creationMode: mapModule.JimuDrawCreationMode.Single,
                    updateOnGraphicClick: false,
                    visibleElements: visibleElements
                }, uiOptions: {
                    isHideBorder: true
                }, onJimuDrawCreated: handleDrawToolCreated, onDrawingStarted: handleDrawStart, onDrawingFinished: handleDrawEnd, onDrawingCleared: handleCleared }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: clearAfterApply, onChange: handleClearSettingChange, className: 'mr-2' }), getI18nMessage('clearDrawing')] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/lazy-list.tsx":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/lazy-list.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LazyList: () => (/* binding */ LazyList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







const { useRef, useState } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React;
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    flex: 1 1 ${isAutoHeight ? 'auto' : 0};
    overflow: auto;
    max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      flex-direction: column;
      .list-items {
        position: relative;
        flex-direction: column;
      }

      .feature-info-component {
        width: 100%;
      }

      .query-result-item + .query-result-item {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    .list-items {
      display: flex;
    }
    .lazyload-detector {
      height: 2px;
      width: 2px;
      opacity: 0;
    }
  `;
};
function LazyList(props) {
    const { widgetId, outputDS, queryParams, resultCount, records, queryItem, direction, onRenderDone, onEscape, onSelectChange, onRemove, defaultPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.CONSTANTS.DEFAULT_QUERY_PAGE_SIZE } = props;
    const [dataItems, setDataItems] = useState(records);
    const [popupTemplate, setPopupTemplate] = useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = useState();
    const [loadStatus, setLoadStatus] = useState(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Init);
    const dataItemsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useLatest(dataItems);
    const resultCountRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useLatest(resultCount);
    const loadStatusRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useLatest(loadStatus);
    const allDataItemsLoadedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useLatest((dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) === resultCount);
    const pageRef = useRef(0);
    const resultContainerRef = useRef(undefined);
    const el = useRef(null);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_7__.useAutoHeight)();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        pageRef.current = 1;
        resultContainerRef.current.scrollTop = 0;
        setDataItems(records);
    }, [records]);
    const loadByPages = () => __awaiter(this, void 0, void 0, function* () {
        if (allDataItemsLoadedRef.current || loadStatusRef.current === widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading) {
            return;
        }
        pageRef.current = pageRef.current + 1;
        setLoadStatus(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading);
        if (!queryParams.pageSize) {
            queryParams.pageSize = defaultPageSize;
        }
        const { records } = yield (0,_query_utils__WEBPACK_IMPORTED_MODULE_6__.executeQuery)(widgetId, queryItem, outputDS, Object.assign(Object.assign({}, queryParams), { page: pageRef.current }));
        if (resultCountRef.current > 0 && dataItemsRef.current.length + records.length >= resultCountRef.current) {
            allDataItemsLoadedRef.current = true;
        }
        const updatedItems = dataItemsRef.current.concat(records);
        setDataItems(updatedItems);
        onRenderDone === null || onRenderDone === void 0 ? void 0 : onRenderDone({
            dataItems: outputDS.getAllLoadedRecords()
        });
        setLoadStatus(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loaded);
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_6__.getPopupTemplate)(outputDS, queryItem).then((rs) => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        const elLoadDetector = el === null || el === void 0 ? void 0 : el.current;
        if (elLoadDetector) {
            const observer = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting) {
                    loadByPages();
                }
            });
            observer === null || observer === void 0 ? void 0 : observer.observe(elLoadDetector);
            return () => {
                observer === null || observer === void 0 ? void 0 : observer.disconnect();
            };
        }
    });
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_3__.ListDirection.Vertical }), css: getStyle(isAutoHeight), ref: resultContainerRef, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-items px-4 py-1', role: 'listbox', children: dataItems === null || dataItems === void 0 ? void 0 : dataItems.map((dataItem) => {
                    var _a;
                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_5__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: (_a = props.expandByDefault) !== null && _a !== void 0 ? _a : true, onClick: onSelectChange, onRemove: onRemove }, dataItem.getId()));
                }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: el, className: 'lazyload-detector', children: "\u00A0" }), loadStatus === widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingResult: () => (/* binding */ LoadingResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");





const Root = jimu_theme__WEBPACK_IMPORTED_MODULE_3__.styled.div `
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 2;

  .loading-content {
    .loading-tip {
      position: relative;
    }
  }
`;
function LoadingResult() {
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'loading-content w-100 px-4 d-flex flex-column justify-content-center align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { role: 'alert', "aria-live": 'assertive', className: 'text-paper', children: translate('retrieving') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { className: 'loading-tip mt-8', type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/paging-list.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/paging-list.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PagingList: () => (/* binding */ PagingList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







const { useRef, useState } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React;
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;

    .list_items {
      flex: 1 1 ${isAutoHeight ? 'auto' : 0};
      max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};
      overflow: auto;
      display: flex;
      flex-direction: row;
    }

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      .list_items {
        flex-direction: column;
      }
      .feature-info-component {
        width: 100%;
      }
      .query-result-item + .query-result-item {
        margin-top: 0.5rem;
        margin-left: 0;
      }
    }
    .page-size-selector {
      width: auto;
    }

    .query-editable-select {
      .jimu-numeric-input {
        width: 60px;
      }
    }
  `;
};
function PagingList(props) {
    const { widgetId, outputDS, queryItem, queryParams, resultCount, records, onRenderDone, onSelectChange, onRemove, direction, onEscape, defaultPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.CONSTANTS.DEFAULT_QUERY_PAGE_SIZE } = props;
    const [dataItems, setDataItems] = useState(records);
    const [popupTemplate, setPopupTemplate] = useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = useState();
    const [loadStatus, setLoadStatus] = useState(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Init);
    const pageRef = useRef(1);
    const pageSizeRef = useRef(defaultPageSize);
    const [pageSize, setPageSize] = useState(defaultPageSize);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_7__.useAutoHeight)();
    const pageSizeOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [defaultPageSize];
        if (Math.round(defaultPageSize / 2) !== result[0]) {
            result.push(Math.round(defaultPageSize / 2));
        }
        if (Math.round(defaultPageSize / 5) !== result[1]) {
            result.push(Math.round(defaultPageSize / 5));
        }
        return result.reverse();
    }, [defaultPageSize]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        pageRef.current = 1;
        setDataItems(records);
        setPageSize(pageSizeRef.current);
    }, [records]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_6__.getPopupTemplate)(outputDS, queryItem).then(rs => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    const loadByPages = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((currentPage, size) => __awaiter(this, void 0, void 0, function* () {
        pageRef.current = currentPage;
        setLoadStatus(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading);
        const result = yield (0,_query_utils__WEBPACK_IMPORTED_MODULE_6__.executeQuery)(widgetId, queryItem, outputDS, Object.assign(Object.assign({}, queryParams), { page: currentPage, pageSize: size }));
        setDataItems(result.records);
        onRenderDone === null || onRenderDone === void 0 ? void 0 : onRenderDone({
            dataItems: outputDS.getAllLoadedRecords(),
            pageSize: size,
            page: pageRef.current
        });
        setLoadStatus(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loaded);
    }), [onRenderDone, outputDS, queryItem, queryParams, widgetId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (defaultPageSize !== pageSizeRef.current) {
            if (defaultPageSize < pageSizeRef.current) {
                setDataItems(dataItems.slice(0, defaultPageSize));
            }
            else {
                loadByPages(1, defaultPageSize);
            }
            pageSizeRef.current = defaultPageSize;
            setPageSize(defaultPageSize);
        }
    }, [defaultPageSize, dataItems, loadByPages]);
    const handlePageSizeChange = (size) => {
        if (size > 0) {
            setPageSize(size);
            loadByPages(1, size);
        }
    };
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_3__.ListDirection.Vertical }), css: getStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list_items mb-2 px-4 py-1', role: 'listbox', children: dataItems === null || dataItems === void 0 ? void 0 : dataItems.map((dataItem) => {
                    var _a;
                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_5__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: (_a = props.expandByDefault) !== null && _a !== void 0 ? _a : true, onClick: onSelectChange, onRemove: onRemove }, dataItem.getId()));
                }) }), loadStatus === widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex justify-content-between align-items-center px-4', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Pagination, { className: 'd-flex justify-content-end', disabled: loadStatus === widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading, current: pageRef.current, totalPage: Math.ceil(resultCount / pageSize), onChangePage: (pageNum) => loadByPages(pageNum, pageSize), pageSize: pageSize, maxPageSize: 1000, pageSizeOptions: pageSizeOptions, onPageSizeChange: handlePageSizeChange, showSizeChanger: true }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryResultItem: () => (/* binding */ QueryResultItem)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/close */ "./jimu-icons/outlined/editor/close.tsx");
/* harmony import */ var _components_feature_info__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/feature-info */ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");

/** @jsx jsx */





const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  overflow: auto;
  flex-flow: row;
  cursor: pointer;
  flex-shrink: 0;
  min-height: 2rem;
  position: relative;
  &.selected {
    outline: 2px solid var(--sys-color-primary-main);
  }
  
  .remove-button {
    position: absolute;
    top: 4px;
    right: 4px;
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
  }
`;
/**
 * QueryResultItem component - displays a single query result record
 * Features:
 * - Clicking the item zooms to the feature on the map
 * - Remove button (X) in upper-right corner to remove record from results
 * - Records are expanded by default to show full feature information
 */
const QueryResultItem = (props) => {
    const { widgetId, data, dataSource, popupTemplate, defaultPopupTemplate, onClick, onRemove, expandByDefault = false } = props;
    // Check if this record is currently selected
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[dataSource.id]) === null || _b === void 0 ? void 0 : _b.selectedIds) === null || _c === void 0 ? void 0 : _c.includes(data.getId()); });
    // Determine if list is displayed vertically (affects FeatureInfo expandability)
    const isVerticalAlign = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection !== _config__WEBPACK_IMPORTED_MODULE_5__.ListDirection.Horizontal;
    });
    // Handle clicking on the result item - zooms to feature on map
    const handleClickResultItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        // Don't trigger zoom if clicking the remove button
        if (e.target.closest('.remove-button')) {
            return;
        }
        onClick(data);
    }, [onClick, data]);
    // Handle clicking the remove button - removes record from results and selection
    const handleRemove = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        e.stopPropagation(); // Prevent triggering the item click handler
        e.preventDefault();
        onRemove(data);
    }, [onRemove, data]);
    const onKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Enter' || evt.key === ' ') {
            evt.preventDefault();
            evt.stopPropagation();
            handleClickResultItem(evt);
        }
    }, [handleClickResultItem]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-result-item', { selected }), onClick: handleClickResultItem, onKeyUp: onKeyUp, css: style, role: 'option', "aria-selected": selected, tabIndex: 0, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_feature_info__WEBPACK_IMPORTED_MODULE_4__["default"], { graphic: data.feature, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, togglable: isVerticalAlign, expandByDefault: expandByDefault, dataSource: dataSource }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: "remove-button", icon: true, size: "sm", variant: "text", color: "inherit", onClick: handleRemove, "aria-label": "Remove record", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 4px;
          min-width: auto;
          width: 20px;
          height: 20px;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_3__.CloseOutlined, { size: 14 }) })] }));
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskResult: () => (/* binding */ QueryTaskResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _lazy_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lazy-list */ "./your-extensions/widgets/query-simple/src/runtime/lazy-list.tsx");
/* harmony import */ var _paging_list__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./paging-list */ "./your-extensions/widgets/query-simple/src/runtime/paging-list.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/directional/expand-all */ "./jimu-icons/outlined/directional/expand-all.tsx");
/* harmony import */ var jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/directional/collapse-all */ "./jimu-icons/outlined/directional/collapse-all.tsx");
/* harmony import */ var _data_actions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../data-actions */ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _debug_logger__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./debug-logger */ "./your-extensions/widgets/query-simple/src/runtime/debug-logger.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */
















const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_3__.getWidgetRuntimeDataMap)();
const resultStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  display: flex;
  flex-direction: column;

  .query-result__header {
    color: var(--sys-color-surface-paper-text);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: 1.5;
    border-bottom: 1px solid var(--sys-color-divider-secondary);
    margin-bottom: 6px;
    padding-bottom: 8px;
  }

  .query-result-container {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    overflow: auto;
    min-height: 0;
  }

  .query-result-info {
    height: 18px;
  }
`;
function QueryTaskResult(props) {
    var _a, _b, _c, _d;
    const { queryItem, queryParams, resultCount, maxPerPage, records, defaultPageSize, widgetId, outputDS, runtimeZoomToSelected, onNavBack } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const intl = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
    const [queryData, setQueryData] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [selectedRecords, setSelectedRecords] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState([]);
    const [removedRecordIds, setRemovedRecordIds] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Set());
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_QUERY_ITEM, queryItem);
    const [expandAll, setExpandAll] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Track if we've already selected these records to prevent re-selection when switching tabs
    const hasSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track the last records we selected to detect when new records come in
    const lastSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Error state for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const extraActions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,_data_actions__WEBPACK_IMPORTED_MODULE_13__.getExtraActions)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected);
    }, [widgetId, outputDS, intl, queryItem, runtimeZoomToSelected]);
    const enableDataAction = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_a = widgetJson.enableDataAction) !== null && _a !== void 0 ? _a : true;
    });
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    const directionTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection;
    });
    const pagingType = pagingTypeInConfig !== null && pagingTypeInConfig !== void 0 ? pagingTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.MultiPage;
    const direction = directionTypeInConfig !== null && directionTypeInConfig !== void 0 ? directionTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.ListDirection.Vertical;
    const actionDataSet = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const dataSet = {
            dataSource: outputDS,
            type: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0 ? 'selected' : 'loaded',
            records: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0 ? selectedRecords : ((queryData === null || queryData === void 0 ? void 0 : queryData.records) || []),
            name: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            label: outputDS === null || outputDS === void 0 ? void 0 : outputDS.getLabel()
        };
        if (currentItem.resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_4__.FieldsType.SelectAttributes && currentItem.resultDisplayFields != null) {
            dataSet.fields = (0,_query_utils__WEBPACK_IMPORTED_MODULE_8__.combineFields)(currentItem.resultDisplayFields, currentItem.resultTitleExpression);
        }
        else if (outputDS && 'getPopupInfo' in outputDS) {
            // use fields in popup template
            const popupInfo = outputDS.getPopupInfo();
            if (popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) {
                dataSet.fields = popupInfo.fieldInfos.filter((fieldInfo) => fieldInfo.visible).map((fieldInfo) => fieldInfo.fieldName);
            }
        }
        return dataSet;
    }, [selectedRecords, outputDS, queryData, currentItem]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    /**
     * Effect hook that runs when new query results arrive.
     * Resets removed records, expand state, and query data for the new results.
     * Also handles auto-selection of records when they first arrive.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Reset removed records when new query results come in
        setRemovedRecordIds(new Set());
        // Reset expand all to queryItem's resultExpandByDefault setting
        setExpandAll((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
        setQueryData({
            records,
            pageSize: defaultPageSize,
            page: 1
        });
        // Check if these are new records (different from what we last selected)
        const currentRecordIds = (records === null || records === void 0 ? void 0 : records.map(record => record.getId())) || [];
        const recordsChanged = currentRecordIds.length !== lastSelectedRecordsRef.current.length ||
            currentRecordIds.some((id, index) => id !== lastSelectedRecordsRef.current[index]);
        // Only auto-select records if:
        // 1. We have records and outputDS
        // 2. We haven't already selected these records (hasSelectedRef is false)
        // 3. OR the records have actually changed (new query results)
        if (records && records.length > 0 && outputDS && (!hasSelectedRef.current || recordsChanged)) {
            const recordIds = records.map(record => record.getId());
            const fdr = records;
            // Select records and publish selection message using utility function
            try {
                setSelectionError(null); // Clear previous errors
                (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
                hasSelectedRef.current = true; // Mark as selected
                lastSelectedRecordsRef.current = recordIds; // Store the IDs we selected
            }
            catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                setSelectionError(errorMessage);
                _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('TASK', {
                    event: 'selection-failed-query-result',
                    error: errorMessage,
                    errorStack: error instanceof Error ? error.stack : undefined,
                    recordCount: recordIds.length
                });
                console.error('Error publishing selection message from query-result', error);
            }
        }
        else if (recordsChanged && records && records.length === 0) {
            // If records were cleared, reset the selection flag
            hasSelectedRef.current = false;
            lastSelectedRecordsRef.current = [];
            setSelectionError(null); // Clear errors when clearing records
        }
    }, [records, defaultPageSize, outputDS, widgetId, queryItem.configId, queryItem.resultExpandByDefault]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear selection when resultSelectMode changed
        if (outputDS) {
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS);
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.publishSelectionMessage)(widgetId, [], outputDS, true);
        }
    }, [queryItem.resultSelectMode, outputDS, widgetId]);
    // Update expandAll when queryItem changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setExpandAll((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    }, [queryItem.configId, queryItem.resultExpandByDefault]);
    /**
     * Clears all results. Resets local state and delegates to parent's clearResult method.
     */
    const clearResults = () => {
        // Reset local selection flags
        hasSelectedRef.current = false;
        lastSelectedRecordsRef.current = [];
        // Reset local query data state
        setQueryData(null);
        setRemovedRecordIds(new Set());
        // Clear error state when clearing results
        setSelectionError(null);
        // Delegate to parent's clearResult method (via onNavBack) which handles
        // clearing selection from map, publishing messages, etc.
        onNavBack(true);
    };
    const handleRenderDone = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(({ dataItems, pageSize, page }) => {
        // Filter out removed records - check if dataItems exists first
        const filteredItems = (dataItems === null || dataItems === void 0 ? void 0 : dataItems.filter(item => !removedRecordIds.has(item.getId()))) || [];
        setQueryData({
            records: filteredItems,
            pageSize,
            page
        });
        // Ensure all loaded records remain selected (for lazy loading)
        // This keeps records selected as they're loaded incrementally
        if (filteredItems && filteredItems.length > 0 && outputDS) {
            const recordIds = filteredItems.map(record => record.getId());
            const fdr = filteredItems;
            // Select all records and publish selection message using utility function
            try {
                setSelectionError(null); // Clear previous errors
                (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
            }
            catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                setSelectionError(errorMessage);
                _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('TASK', {
                    event: 'selection-failed-handleRenderDone',
                    error: errorMessage,
                    errorStack: error instanceof Error ? error.stack : undefined,
                    recordCount: recordIds.length
                });
                console.error('Error publishing selection message from handleRenderDone', error);
            }
        }
    }, [outputDS, widgetId, removedRecordIds]);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(outputDS === null || outputDS === void 0 ? void 0 : outputDS.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        const selectedIds = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
        let shouldUpdate = false;
        if (selectedIds.length !== (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length)) {
            shouldUpdate = true;
        }
        else { // equal length
            shouldUpdate = selectedIds.some(id => {
                const target = selectedRecords.find((item) => item.getId() === id);
                return target == null;
            });
        }
        if (shouldUpdate) {
            setSelectedRecords(records);
        }
    }, [outputDS === null || outputDS === void 0 ? void 0 : outputDS.id, selectedRecords]);
    /**
     * Generates the tip message showing how many features are displayed.
     * Filters out removed records to show accurate counts.
     *
     * @returns Formatted string like "Features displayed: 118 / 121"
     */
    const getTipMessage = () => {
        if (queryData && queryData.records) {
            // Filter out removed records for display count
            const displayedRecords = queryData.records.filter((record) => !removedRecordIds.has(record.getId()));
            const displayedCount = displayedRecords.length;
            if (pagingType === _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.LazyLoad) {
                return `${getI18nMessage('featuresDisplayed')}: ${displayedCount} / ${resultCount}`;
            }
            const { page = 1, pageSize = defaultPageSize } = queryData;
            const from = (page - 1) * pageSize + 1;
            const to = from + pageSize - 1;
            if (resultCount > 0) {
                return `${getI18nMessage('featuresDisplayed')}: ${from} - ${Math.min(to, displayedCount)} / ${resultCount}`;
            }
            return `${getI18nMessage('featuresDisplayed')}: 0 - 0 / 0`;
        }
        return '';
    };
    /**
     * Toggles expand/collapse state for all result items.
     * When toggled, all result items will be expanded or collapsed together.
     */
    const toggleExpandAll = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setExpandAll(prev => !prev);
    }, []);
    const resultUseOutputDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
            dataSourceId: queryItem.outputDataSourceId,
            mainDataSourceId: queryItem.outputDataSourceId
        });
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.outputDataSourceId]);
    const handleEscape = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    }, []);
    // Keep records selected and zoom to clicked record
    // Records remain selected as long as they're in the results
    // Clicking a record always zooms to it on the map (this behavior is always enabled)
    const toggleSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        // Ensure the clicked record is selected (it should already be, but ensure it)
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        const dataId = data.getId();
        // If this record isn't already selected, add it to the selection
        if (!selectedIds.includes(dataId)) {
            const updatedSelectedDatas = [...selectedDatas, data];
            const recordIds = updatedSelectedDatas.map(record => record.getId());
            // Select records and publish selection message using utility function
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
        }
        // Zoom to the clicked record using data actions (always enabled - user wants to keep this behavior)
        const dataSet = {
            dataSource: outputDS,
            records: [data],
            type: 'selected',
            name: outputDS.getLabel()
        };
        // Get available data actions and find the zoomToFeature action
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
            .then(actionCategories => {
            // Look for zoomToFeature action in any category
            let zoomAction = null;
            for (const category in actionCategories) {
                const actions = actionCategories[category];
                zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                if (zoomAction)
                    break;
            }
            if (zoomAction) {
                // Execute the zoom action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, widgetId);
            }
        })
            .catch(error => {
            // Silently handle errors
        });
    }, [outputDS, widgetId]);
    /**
     * Removes a record from the results and selection.
     * If removing the last record, automatically clears all results
     * by calling the trash can logic (same as clicking Clear button).
     * This ensures the UI doesn't show "Features displayed: 0 / 1" when all results are removed.
     *
     * @param data - The feature data record to remove
     */
    const removeRecord = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        const dataId = data.getId();
        // Add to removed records set
        setRemovedRecordIds(prev => {
            const newSet = new Set(prev).add(dataId);
            // If all records are now removed, clear everything by calling trash can logic
            // Check: if the new set size equals the total result count, all records are removed
            if (newSet.size === resultCount) {
                // All records removed - clear everything (same as clicking trash can button)
                onNavBack(true);
                return newSet;
            }
            return newSet;
        });
        // Update queryData to filter out the removed record
        setQueryData(prevData => {
            if (!prevData)
                return prevData;
            const filteredRecords = prevData.records.filter((record) => record.getId() !== dataId);
            return Object.assign(Object.assign({}, prevData), { records: filteredRecords });
        });
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        // Remove the record from selection
        const updatedSelectedDatas = selectedDatas.filter(record => record.getId() !== dataId);
        const recordIds = updatedSelectedDatas.map(record => record.getId());
        // Update selection on the origin layer and publish message using utility function
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
    }, [outputDS, widgetId, resultCount, onNavBack]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result h-100', css: resultStyle, role: 'listbox', "aria-label": getI18nMessage('results'), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: resultUseOutputDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding: 0 16px; margin-top: 8px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_16__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result__header d-flex align-items-center mx-4', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { "aria-label": getI18nMessage('back'), ref: backBtnRef, className: 'p-0 mr-2', size: 'sm', variant: 'text', color: 'inherit', icon: true, onClick: () => { onNavBack(); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__.ArrowLeftOutlined, { autoFlip: true }) }), (_b = currentItem.resultsLabel) !== null && _b !== void 0 ? _b : getI18nMessage('results'), ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, size: 'sm', variant: 'text', color: 'inherit', onClick: clearResults, "aria-label": getI18nMessage('clearResult'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: iconMap.toolDelete }) }) }), enableDataAction && outputDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `width: 1px; height: 16px; background-color: var(--sys-color-divider-input);` }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionList, { widgetId: widgetId, dataSets: [actionDataSet], listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionListStyle.Dropdown, buttonSize: 'sm', buttonType: 'tertiary', extraActions: extraActions })] }))] }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-container mt-1', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-info mb-2 px-4 d-flex align-items-center justify-content-between', role: 'alert', "aria-live": 'polite', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: getTipMessage() }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), placement: 'top', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, onClick: toggleExpandAll, "aria-label": expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), children: expandAll ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__.CollapseAllOutlined, {}) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__.ExpandAllOutlined, {}) }) })] }), pagingType === _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.LazyLoad && resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_lazy_list__WEBPACK_IMPORTED_MODULE_6__.LazyList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, queryParams: queryParams, resultCount: resultCount, records: ((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.filter((record) => !removedRecordIds.has(record.getId()))) || ((records === null || records === void 0 ? void 0 : records.filter(record => !removedRecordIds.has(record.getId()))) || []), direction: direction, onRenderDone: handleRenderDone, onEscape: handleEscape, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll }, `lazy-${expandAll}`)), pagingType === _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.MultiPage && resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_paging_list__WEBPACK_IMPORTED_MODULE_7__.PagingList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, queryParams: queryParams, resultCount: resultCount, maxPerPage: maxPerPage, records: ((_d = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _d === void 0 ? void 0 : _d.filter((record) => !removedRecordIds.has(record.getId()))) || ((records === null || records === void 0 ? void 0 : records.filter(record => !removedRecordIds.has(record.getId()))) || []), direction: direction, onRenderDone: handleRenderDone, onEscape: handleEscape, defaultPageSize: defaultPageSize, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll }, `paging-${expandAll}`))] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskContext: () => (/* binding */ QueryTaskContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    resetSymbol: null
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskForm: () => (/* binding */ QueryTaskForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_spatial_form__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-spatial-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var _debug_logger__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./debug-logger */ "./your-extensions/widgets/query-simple/src/runtime/debug-logger.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");

/** @jsx jsx */













const getFormStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    .form-title {
      color: var(--sys-color-surface-paper-text);
      font-weight: 500;
      font-size: 0.8125rem;
      line-height: 1.5;
      margin-top: 0 !important;
    }
    .query-form__content {
      flex: 1 1 ${isAutoHeight ? 'auto' : 'auto'};
      max-height: ${isAutoHeight ? '61.8vh' : 'none'};
      overflow: auto;
      padding-bottom: 0;
    }
    .query-form__actions {
      flex-shrink: 0;
      margin-top: 0;
      padding-top: 8px;
    }
  `;
};
function QueryTaskForm(props) {
    var _a;
    const { widgetId, configId, outputDS, spatialFilterEnabled, datasourceReady, onFormSubmit, dataActionFilter, initialInputValue, onHashParameterUsed, queryItemShortId } = props;
    const preDataActionFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.usePrevious(dataActionFilter);
    const queryItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.queryItems.find(item => item.configId === configId);
    });
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_7__["default"]);
    const [resetSymbol, setResetSymbol] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Runtime zoom preference - initialized with config value, can be overridden by user
    const [runtimeZoomToSelected, setRuntimeZoomToSelected] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    // Sync runtime zoom preference when query item changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setRuntimeZoomToSelected((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected, queryItem === null || queryItem === void 0 ? void 0 : queryItem.configId]);
    // const [dataSource, setDataSource] = React.useState<DataSource>(null)
    const { useAttributeFilter, useSpatialFilter, spatialFilterTypes, sqlExprObj, spatialMapWidgetIds, spatialInteractiveCreateToolTypes, spatialRelationUseDataSources, spatialIncludeRuntimeData, spatialRelations, spatialRelationEnableBuffer, spatialRelationBufferDistance, spatialRelationBufferUnit, spatialInteractiveEnableBuffer, spatialInteractiveBufferDistance, spatialInteractiveBufferUnit, attributeFilterLabel = getI18nMessage('attributeFilter'), spatialFilterLabel = getI18nMessage('spatialFilter'), attributeFilterDesc, spatialFilterDesc } = currentItem;
    const [attributeFilterSqlExprObj, setAttributeFilterSqlExprObj] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(sqlExprObj);
    const spatialFilterObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const spatialRelationRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(_config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect);
    const bufferRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const applyButtonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_9__.useAutoHeight)();
    const showClauseNumber = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef((0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj));
    const initialValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track which configId we've set the value for
    const lastValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track the last value that was set
    const hashTriggeredRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false); // Track if query was triggered via hash parameter
    const originDS = outputDS === null || outputDS === void 0 ? void 0 : outputDS.getOriginDataSources()[0];
    /**
     * Sets the input value from URL hash parameters when:
     * 1. Datasource is ready
     * 2. We have an initialInputValue from URL hash
     * 3. We haven't already set it for this configId, OR the value has changed
     *
     * Uses both React state updates and DOM manipulation to ensure the value
     * is properly set in SqlExpressionRuntime's internal state.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Reset flag if configId changed (switched to different query)
        if (initialValueSetRef.current !== null && initialValueSetRef.current !== configId) {
            initialValueSetRef.current = null;
            lastValueSetRef.current = null;
            hashTriggeredRef.current = false; // Reset hash trigger flag when switching queries
        }
        // Check if value has changed for the same configId
        const valueChanged = lastValueSetRef.current !== null &&
            lastValueSetRef.current !== initialInputValue &&
            initialValueSetRef.current === configId;
        // Set the value if:
        // - We haven't set it for this configId yet, OR
        // - The value has changed for the same configId (hash parameter updated)
        const shouldSetValue = datasourceReady &&
            initialInputValue &&
            ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) > 0 &&
            (initialValueSetRef.current !== configId || valueChanged);
        if (shouldSetValue) {
            const firstPart = sqlExprObj.parts[0];
            // Check if the first part is a SINGLE clause (not a SqlClauseSet)
            if (firstPart && 'type' in firstPart && firstPart.type === 'SINGLE' && 'valueOptions' in firstPart) {
                // Update the expression object with the initial value
                const updated = sqlExprObj.setIn(['parts', '0', 'valueOptions', 'value'], initialInputValue);
                setAttributeFilterSqlExprObj(updated);
                // Update clause number for the updated expression
                showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(updated);
                initialValueSetRef.current = configId;
                lastValueSetRef.current = initialInputValue;
                // Also set the value directly on the input element after a delay to ensure component is rendered
                // This is necessary because SqlExpressionRuntime may not sync from the expression prop alone
                const timeoutId = setTimeout(() => {
                    var _a;
                    // Find the input element within SqlExpressionRuntime
                    const formElement = ((_a = document.querySelector(`[data-widget-id="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.closest('.query-form')) ||
                        document.querySelector('.query-form');
                    if (formElement) {
                        // Look for text input elements
                        const textInputs = formElement.querySelectorAll('input[type="text"]');
                        textInputs.forEach((input) => {
                            var _a;
                            // Update the value if input is empty OR if the value has changed (hash parameter updated)
                            const shouldUpdate = !input.value ||
                                input.value.trim() === '' ||
                                input.value !== initialInputValue;
                            if (shouldUpdate) {
                                // Focus the input first
                                input.focus();
                                // Set the value
                                input.value = initialInputValue;
                                // Create and dispatch input event with proper properties
                                const inputEvent = new Event('input', { bubbles: true, cancelable: true });
                                Object.defineProperty(inputEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(inputEvent);
                                // Create and dispatch change event
                                const changeEvent = new Event('change', { bubbles: true, cancelable: true });
                                Object.defineProperty(changeEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(changeEvent);
                                // Also try React's synthetic event approach using native value setter
                                const nativeInputValueSetter = (_a = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value')) === null || _a === void 0 ? void 0 : _a.set;
                                if (nativeInputValueSetter) {
                                    nativeInputValueSetter.call(input, initialInputValue);
                                    const reactEvent = new Event('input', { bubbles: true });
                                    input.dispatchEvent(reactEvent);
                                }
                                // Blur to trigger any validation or state updates
                                input.blur();
                            }
                        });
                        // After setting values and blurring, verify input value is set before triggering Apply button
                        setTimeout(() => {
                            var _a;
                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                // VERIFICATION: Ensure input value is actually set before executing query
                                // This is especially important for grouped queries where dropdowns need to be synchronized first
                                const formElement = ((_a = document.querySelector(`[data-widget-id="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.closest('.query-form')) ||
                                    document.querySelector('.query-form');
                                if (formElement && initialInputValue) {
                                    const textInputs = formElement.querySelectorAll('input[type="text"]');
                                    let inputValueSet = false;
                                    textInputs.forEach((input) => {
                                        if (input.value === initialInputValue) {
                                            inputValueSet = true;
                                        }
                                    });
                                    if (!inputValueSet) {
                                        _debug_logger__WEBPACK_IMPORTED_MODULE_10__.debugLogger.log('FORM', {
                                            event: 'input-value-not-set-retrying',
                                            expectedValue: initialInputValue,
                                            queryItemShortId,
                                            action: 'will-retry-after-delay',
                                            note: 'Input value not set, retrying to ensure synchronization'
                                        });
                                        // Retry after a short delay to allow state to sync
                                        setTimeout(() => {
                                            // Recursively call verifyAndApply if needed, but limit retries
                                            // For now, just retry once more
                                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                                hashTriggeredRef.current = true;
                                                // Remove hash parameter from URL before Apply is triggered
                                                if (onHashParameterUsed && queryItemShortId) {
                                                    onHashParameterUsed(queryItemShortId);
                                                }
                                                // Auto-trigger Apply button
                                                applyButtonRef.current.click();
                                            }
                                        }, 300);
                                        return; // Exit early, will retry
                                    }
                                }
                                // Input value is set correctly, proceed with execution
                                _debug_logger__WEBPACK_IMPORTED_MODULE_10__.debugLogger.log('FORM', {
                                    event: 'input-value-verified',
                                    expectedValue: initialInputValue,
                                    queryItemShortId,
                                    note: 'Input value verified, proceeding with query execution'
                                });
                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                hashTriggeredRef.current = true;
                                // Remove hash parameter from URL before Apply is triggered to prevent re-execution
                                if (onHashParameterUsed && queryItemShortId) {
                                    onHashParameterUsed(queryItemShortId);
                                }
                                // Auto-trigger Apply button to execute the query with the populated value
                                applyButtonRef.current.click();
                            }
                        }, 200); // Small delay after blur to ensure state is synced
                    }
                }, 500); // Longer delay to ensure component is fully rendered
                return () => clearTimeout(timeoutId);
            }
        }
        // The sqlExprObj.parts may change but the displaySQL is the same
        if (!sqlExprObj) {
            showClauseNumber.current = 0;
            setAttributeFilterSqlExprObj(null);
        }
        else {
            showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
            // Only update if we haven't set the initial value for this configId yet, or if we don't have an initial value
            if (initialValueSetRef.current !== configId || !initialInputValue) {
                setAttributeFilterSqlExprObj(sqlExprObj);
            }
        }
    }, [sqlExprObj, initialInputValue, datasourceReady, configId, widgetId, onHashParameterUsed, queryItemShortId]);
    const applyQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        // When the 'apply' button is clicked, it should clear the selection from the previous result list
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.clearSelectionInDataSources)(outputDS);
        if (outputDS) {
            const originDs = outputDS.getOriginDataSources()[0];
            if (originDs) {
                const dataViewConfig = originDs.getDataViewConfig();
                const maximum = dataViewConfig === null || dataViewConfig === void 0 ? void 0 : dataViewConfig.maximum;
                if (maximum != null && maximum > 0) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(outputDS, outputDS.getDataSourceJson().setIn(['query', 'maximum'], maximum));
                }
            }
        }
        // Force zoom for hash-triggered queries, otherwise use runtime preference
        const zoomToUse = hashTriggeredRef.current ? true : runtimeZoomToSelected;
        let rel = spatialRelationRef.current;
        if (((_a = spatialFilterObjRef.current) === null || _a === void 0 ? void 0 : _a.geometry) && rel == null) {
            rel = _config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect;
        }
        if (Array.isArray((_b = spatialFilterObjRef.current) === null || _b === void 0 ? void 0 : _b.geometry)) {
            if (spatialFilterObjRef.current.geometry.length === 1) {
                onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry: spatialFilterObjRef.current.geometry[0], relation: rel, buffer: bufferRef.current }), zoomToUse);
            }
            else {
                (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)([
                    'esri/geometry/operators/unionOperator'
                ]).then(modules => {
                    const operator = modules[0];
                    const geometry = operator.executeMany(spatialFilterObjRef.current.geometry);
                    onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry, relation: rel, buffer: bufferRef.current }), zoomToUse);
                });
            }
        }
        else {
            onFormSubmit(attributeFilterSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { relation: rel, buffer: bufferRef.current }), zoomToUse);
        }
        // Reset hashTriggeredRef after use
        hashTriggeredRef.current = false;
    }, [onFormSubmit, outputDS, attributeFilterSqlExprObj, runtimeZoomToSelected]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((event) => {
        if (event.key === 'Enter' && datasourceReady) {
            event.preventDefault();
            // Find the active input field
            const activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT' && activeElement.type === 'text') {
                // Force blur to trigger SqlExpressionRuntime's input processing
                activeElement.blur();
                // Wait for blur processing, then click the Apply button
                // This uses the exact same code path as clicking the button manually
                setTimeout(() => {
                    if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                        applyButtonRef.current.click();
                    }
                    else {
                        applyQuery();
                    }
                }, 200);
            }
            else {
                // Not in an input field, safe to apply immediately
                if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                    applyButtonRef.current.click();
                }
                else {
                    applyQuery();
                }
            }
        }
    }, [datasourceReady, applyQuery]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!dataActionFilter)
            return;
        if (dataActionFilter.where !== (preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where)) {
            applyQuery();
        }
    }, [dataActionFilter, preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where, applyQuery]);
    const resetQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        // 1. reset attribute filter
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
        setAttributeFilterSqlExprObj(sqlExprObj);
        // 2. reset spatial filter
        setResetSymbol(Symbol());
    }, [sqlExprObj]);
    const handleSqlExprObjChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlObj) => {
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlObj);
        setAttributeFilterSqlExprObj(sqlObj);
    }, []);
    const handleSpatialFilterChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((filter) => {
        spatialFilterObjRef.current = filter;
    }, []);
    const handleRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((rel) => {
        spatialRelationRef.current = rel;
    }, []);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferRef.current = { distance, unit };
    }, []);
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // Debug logging for form rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        _debug_logger__WEBPACK_IMPORTED_MODULE_10__.debugLogger.log('FORM', {
            event: 'form-render-check',
            configId,
            datasourceReady,
            useAttributeFilter,
            sqlExprObj: sqlExprObj ? 'exists' : 'null',
            sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            showAttributeFilter,
            originDS: originDS ? 'exists' : 'null',
            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'none',
            showSpatialFilter,
            isAutoHeight,
            outputDS: outputDS ? 'exists' : 'null'
        });
    }, [configId, datasourceReady, useAttributeFilter, sqlExprObj, showAttributeFilter, originDS, showSpatialFilter, isAutoHeight, outputDS]);
    // Log when form content should render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (showAttributeFilter && originDS) {
            _debug_logger__WEBPACK_IMPORTED_MODULE_10__.debugLogger.log('FORM', {
                event: 'attribute-filter-ready',
                configId,
                originDSId: originDS.id,
                sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
                attributeFilterLabel,
                note: 'Input field should be visible'
            });
        }
        else {
            _debug_logger__WEBPACK_IMPORTED_MODULE_10__.debugLogger.log('FORM', {
                event: 'attribute-filter-not-ready',
                configId,
                showAttributeFilter,
                originDS: originDS ? 'exists' : 'null',
                useAttributeFilter,
                sqlExprObj: sqlExprObj ? 'exists' : 'null',
                reason: !showAttributeFilter ? 'showAttributeFilter is false' : 'originDS is null'
            });
        }
    }, [showAttributeFilter, originDS, configId, sqlExprObj, useAttributeFilter, attributeFilterLabel]);
    // Check DOM visibility after render
    const formContentRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (formContentRef.current) {
            const computedStyle = window.getComputedStyle(formContentRef.current);
            const rect = formContentRef.current.getBoundingClientRect();
            _debug_logger__WEBPACK_IMPORTED_MODULE_10__.debugLogger.log('FORM', {
                event: 'form-content-dom-check',
                configId,
                exists: !!formContentRef.current,
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                height: computedStyle.height,
                maxHeight: computedStyle.maxHeight,
                flex: computedStyle.flex,
                flexBasis: computedStyle.flexBasis,
                rectHeight: rect.height,
                rectWidth: rect.width,
                isVisible: rect.height > 0 && rect.width > 0,
                parentHeight: ((_a = formContentRef.current.parentElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0
            });
        }
    }, [configId, showAttributeFilter, originDS]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_context__WEBPACK_IMPORTED_MODULE_11__.QueryTaskContext.Provider, { value: { resetSymbol }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form', css: getFormStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: formContentRef, className: 'query-form__content', onKeyDown: handleKeyDown, children: [showAttributeFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding-top: 8px;`, "aria-label": attributeFilterLabel, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !attributeFilterLabel && !attributeFilterDesc }), children: [attributeFilterLabel && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: attributeFilterLabel }), attributeFilterDesc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: attributeFilterDesc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_12__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), originDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: originDS, expression: attributeFilterSqlExprObj, onChange: handleSqlExprObjChange }, `${configId}-${initialInputValue || 'default'}`))] })), showAttributeFilter && showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr", { className: 'm-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `border: none; height: 1px; background-color: var(--sys-color-divider-secondary);` })), showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_spatial_form__WEBPACK_IMPORTED_MODULE_8__.QueryTaskSpatialForm, { widgetId: widgetId, label: spatialFilterLabel, desc: spatialFilterDesc, filterTypes: spatialFilterTypes, mapWidgetIds: spatialMapWidgetIds, createToolTypes: spatialInteractiveCreateToolTypes, onFilterChange: handleSpatialFilterChange, onRelationChange: handleRelationChange, onBufferChange: handleBufferChange, spatialRelations: spatialRelations, dsEnableBuffer: spatialRelationEnableBuffer, dsBufferDistance: spatialRelationBufferDistance, dsBufferUnit: spatialRelationBufferUnit, drawEnableBuffer: spatialInteractiveEnableBuffer, drawBufferDistance: spatialInteractiveBufferDistance, drawBufferUnit: spatialInteractiveBufferUnit, useDataSources: spatialRelationUseDataSources, useRuntimeData: spatialIncludeRuntimeData }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form__actions px-4 d-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: runtimeZoomToSelected, onChange: (_, checked) => setRuntimeZoomToSelected(checked), className: 'mr-2' }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-auto', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `font-size: 0.875rem; color: var(--sys-color-text-primary);`, children: getI18nMessage('zoomToSelected') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: applyButtonRef, color: 'primary', className: 'ml-auto', disabled: !datasourceReady, onClick: applyQuery, children: getI18nMessage('apply') }), (showClauseNumber.current > 0 || showSpatialFilter) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-2', onClick: resetQuery, children: getI18nMessage('reset') }))] })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskLabel: () => (/* binding */ QueryTaskLabel)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

/** @jsx jsx */


const textStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  font-weight: 500;
  font-size: 0.875rem;
`;
function QueryTaskLabel(props) {
    const { icon, name } = props;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center text-truncate', css: textStyle, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { className: 'query-task-icon mr-2', icon: icon.svg }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', title: name, children: name })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListInline: () => (/* binding */ TaskListInline)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");

/** @jsx jsx */






const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
const SPACE = 8;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  > div {
    margin-right: 8px;
  }
`;
// show task label and an arrow to the task content
function TaskListInline(props) {
    const { queryItems, widgetId, minSize, defaultSize, defaultPageSize, widgetLabel, wrap = false } = props;
    const containerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const containerWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const contentWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef({});
    const [numOfExpanded, setNumOfExpanded] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(queryItems.length);
    const [openedPopper, setOpenedPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(-1);
    const resizeObserverRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const adjustContent = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        let total = 0;
        for (let i = 0; i < numOfExpanded; i++) {
            const item = queryItems[i];
            const itemWidth = contentWidthRef.current[item.configId];
            if (itemWidth > 0) {
                total += itemWidth + SPACE;
                if (total >= containerWidthRef.current && numOfExpanded !== i) {
                    setNumOfExpanded(i);
                    return;
                }
            }
            else {
                return; // content width not ready
            }
        }
        setNumOfExpanded(queryItems.length);
    }, [numOfExpanded, queryItems]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (resizeObserverRef.current) {
            resizeObserverRef.current.disconnect();
        }
        // bind with the new event handler
        resizeObserverRef.current = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
            const width = Math.round(entries[0].contentRect.width);
            if (containerWidthRef.current !== width) {
                containerWidthRef.current = width;
                adjustContent();
            }
        }, 200));
        resizeObserverRef.current.observe(containerRef.current);
        return () => {
            resizeObserverRef.current.disconnect();
        };
    }, [adjustContent]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        var _a;
        containerWidthRef.current = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth;
        adjustContent();
    });
    const handleItemWidthChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, width) => {
        const queryItem = queryItems[index];
        if (contentWidthRef.current[queryItem.configId] !== width) {
            contentWidthRef.current[queryItem.configId] = width;
            adjustContent();
        }
    }, [queryItems, adjustContent]);
    const handlePopperOpenedChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, isOpen) => {
        if (isOpen) {
            setOpenedPopper(index);
        }
        else if (index === openedPopper) {
            // current popper is closed
            setOpenedPopper(-1);
        }
    }, [openedPopper]);
    const [expandedArray, nonExpandedArray] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const expandedArray = [];
        const nonExpandedArray = [];
        for (let i = 0; i < queryItems.length; i++) {
            if (i < numOfExpanded) {
                expandedArray.push(queryItems[i]);
            }
            else {
                nonExpandedArray.push(queryItems[i]);
            }
        }
        return [expandedArray, nonExpandedArray];
    }, [queryItems, numOfExpanded]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: containerRef, css: style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('runtime-query__query-list h-100 d-flex', { 'flex-wrap': wrap, 'align-content-start': wrap }), children: [expandedArray.map((queryItem, index) => {
                var _a;
                const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
                return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: index, icon: currentItem.icon, buttonType: 'default', label: currentItem.displayLabel ? currentItem.name : undefined, popperTitle: currentItem.name, onWidthChange: handleItemWidthChange, minSize: minSize, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== index, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: index, total: 1, isInPopper: true, queryItem: currentItem, wrappedInPopper: true, className: 'pb-4', defaultPageSize: defaultPageSize, initialInputValue: currentItem.shortId === ((_a = props.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) ? props.initialQueryValue.value : undefined, onHashParameterUsed: props.onHashParameterUsed, queryItemShortId: currentItem.shortId }) }, currentItem.configId);
            }), nonExpandedArray.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: expandedArray.length + 1, icon: iconMap.iconMore, minSize: minSize, buttonType: 'default', popperTitle: widgetLabel, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== expandedArray.length + 1, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_3__.QueryTaskList, { widgetId: widgetId, isInPopper: true, defaultPageSize: defaultPageSize, queryItems: nonExpandedArray, className: 'pb-4', initialQueryValue: props.initialQueryValue, onHashParameterUsed: props.onHashParameterUsed }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListPopperWrapper: () => (/* binding */ TaskListPopperWrapper)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */



const shiftOptions = { padding: 1 };
function TaskListPopperWrapper(props) {
    const { id, icon, label, forceClose, onOpenedChange, popperTitle, minSize, defaultSize, onWidthChange, buttonType = 'tertiary', children } = props;
    const iconRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const widthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const [isOpen, setIsOpen] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const [popperVersion, setPopperVersion] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const isMobile = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useCheckSmallBrowserSizeMode();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (forceClose) {
            setIsOpen(false);
        }
    }, [forceClose]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (typeof onWidthChange === 'function') {
            widthRef.current = Math.round(iconRef.current.clientWidth);
            onWidthChange(id, widthRef.current);
            const resizeObserver = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
                const width = Math.round(entries[0].contentRect.width);
                if (widthRef.current !== width) {
                    widthRef.current = width;
                    onWidthChange(id, width);
                }
            }, 200));
            resizeObserver.observe(iconRef.current);
            return () => {
                resizeObserver.disconnect();
            };
        }
    });
    const togglePopper = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        if (typeof onOpenedChange === 'function') {
            onOpenedChange(id, !isOpen);
        }
        setIsOpen(!isOpen);
        setPopperVersion(popperVersion + 1);
        if (isOpen) {
            setTimeout(() => {
                if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.isKeyboardMode)()) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(iconRef.current);
                }
            }, 200);
        }
    }, [id, isOpen, popperVersion, onOpenedChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'runtime-query__widget-popper', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { title: label, "aria-label": label, icon: true, size: 'sm', variant: buttonType === 'tertiary' ? 'text' : undefined, color: buttonType === 'tertiary' ? 'inherit' : undefined, type: buttonType === 'tertiary' ? undefined : buttonType, ref: iconRef, onClick: togglePopper, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, Object.assign({ size: 16 }, (typeof icon === 'string' ? { icon } : { icon: icon.svg, color: buttonType === 'tertiary' ? undefined : icon.properties.color }))), label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
            line-height: 1.2;
          `, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ 'ml-2': icon != null }), children: label })] }), isMobile
                ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.MobilePanel, { open: isOpen, title: popperTitle, onClose: togglePopper, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple.org", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })
                : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FloatingPanel, { className: 'ui-unit-popper ui-unit-popper_k-arrangement-icon flex-grow-1', headerClassName: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS, open: isOpen, onHeaderClose: togglePopper, toggle: togglePopper, headerTitle: popperTitle, minSize: minSize, defaultSize: defaultSize, dragBounds: 'body', version: popperVersion, reference: iconRef, placement: 'bottom-start', shiftOptions: shiftOptions, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple.org", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskList: () => (/* binding */ QueryTaskList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _debug_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./debug-logger */ "./your-extensions/widgets/query-simple/src/runtime/debug-logger.ts");

/** @jsx jsx */





// Helper function to group queries by groupId
const groupQueries = (queryItems) => {
    const groups = {};
    const ungrouped = [];
    const groupOrder = [];
    const groupIndexMap = {};
    // First pass: collect items in regular arrays
    const groupItemsMap = {};
    queryItems.forEach((item, index) => {
        if (item.groupId) {
            if (!groupItemsMap[item.groupId]) {
                groupItemsMap[item.groupId] = [];
                groups[item.groupId] = {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]),
                    displayName: item.groupDisplayName || item.name || `Group ${item.groupId}`,
                    icon: item.icon
                };
                groupIndexMap[item.groupId] = index;
                groupOrder.push(item.groupId);
            }
            groupItemsMap[item.groupId].push(item);
        }
        else {
            ungrouped.push({ item, index });
        }
    });
    // Second pass: convert regular arrays to ImmutableArrays
    Object.keys(groupItemsMap).forEach(groupId => {
        groups[groupId].items = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(groupItemsMap[groupId]);
    });
    return { groups, ungrouped, groupOrder };
};
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
function QueryTaskList(props) {
    const { queryItems, widgetId, defaultPageSize, isInPopper = false, className = '', initialQueryValue, onHashParameterUsed } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const { groups, ungrouped, groupOrder } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => groupQueries(queryItems), [queryItems]);
    // Find the query item matching the initialQueryValue shortId from URL hash
    const matchingQueryIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (!(initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId)) {
            return -1;
        }
        return queryItems.findIndex(item => item.shortId === initialQueryValue.shortId);
    }, [queryItems, initialQueryValue]);
    // Determine which group/ungrouped index the matching query is at
    const getQuerySelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        if (matchingQueryIndex < 0)
            return null;
        const item = queryItems[matchingQueryIndex];
        if (item.groupId) {
            const groupItems = ((_a = groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.items) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
            const indexInGroup = groupItems.findIndex(q => q.configId === item.configId);
            _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                event: 'hash-query-found-in-group',
                groupId: item.groupId,
                indexInGroup: indexInGroup >= 0 ? indexInGroup : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'group', groupId: item.groupId, index: indexInGroup >= 0 ? indexInGroup : 0 };
        }
        else {
            // Ungrouped query
            const indexInUngrouped = ungrouped.findIndex(({ item: q }) => q.configId === item.configId);
            _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                event: 'hash-query-found-ungrouped',
                indexInUngrouped: indexInUngrouped >= 0 ? indexInUngrouped : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'ungrouped', index: indexInUngrouped >= 0 ? indexInUngrouped : 0 };
        }
    }, [matchingQueryIndex, queryItems, groups, ungrouped]);
    // Track selected query - initialize with matching query if found from URL hash
    const [selectedGroupId, setSelectedGroupId] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type) === 'group') {
            _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                event: 'initial-group-selection',
                groupId: getQuerySelection.groupId
            });
            return getQuerySelection.groupId;
        }
        // Default to first group if groups exist and no hash parameter
        if (groupOrder.length > 0) {
            _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                event: 'initial-group-selection-default',
                groupId: groupOrder[0],
                note: 'No hash parameter, defaulting to first group'
            });
            return groupOrder[0];
        }
        return null;
    });
    const [selectedGroupQueryIndex, setSelectedGroupQueryIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type) === 'group') {
            _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                event: 'initial-group-query-index',
                index: getQuerySelection.index
            });
            return getQuerySelection.index;
        }
        return 0;
    });
    const [selectedUngroupedIndex, setSelectedUngroupedIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type) === 'ungrouped') {
            _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                event: 'initial-ungrouped-index',
                index: getQuerySelection.index
            });
            return getQuerySelection.index;
        }
        return 0;
    });
    // Update selection when initialQueryValue changes (e.g., when URL hash is detected)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (getQuerySelection) {
            if (getQuerySelection.type === 'group') {
                _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                    event: 'selection-changed-to-group',
                    groupId: getQuerySelection.groupId,
                    index: getQuerySelection.index
                });
                setSelectedGroupId(getQuerySelection.groupId);
                setSelectedGroupQueryIndex(getQuerySelection.index);
            }
            else {
                _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                    event: 'selection-changed-to-ungrouped',
                    index: getQuerySelection.index
                });
                setSelectedGroupId(null);
                setSelectedUngroupedIndex(getQuerySelection.index);
            }
        }
        else {
            // No hash parameter - ensure we have a default selection
            // If groups exist, default to first group (already handled in useState initializer)
            // But if no groups and we have ungrouped, ensure selectedUngroupedIndex is set
            if (groupOrder.length === 0 && ungrouped.length > 0) {
                _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                    event: 'no-hash-parameter-default-ungrouped',
                    defaultIndex: 0
                });
                setSelectedUngroupedIndex(0);
            }
        }
    }, [getQuerySelection, groupOrder.length, ungrouped.length]);
    // Get the currently selected query item
    const getSelectedQueryItem = () => {
        // PRIORITY 1: If hash parameter matches a query, use that directly
        // This ensures we always use the hash-matched query, regardless of state timing
        // This is critical for grouped queries where dropdowns need to be synchronized
        if (getQuerySelection && matchingQueryIndex >= 0) {
            const hashMatchedItem = queryItems[matchingQueryIndex];
            _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                event: 'getSelectedQueryItem-hash-match',
                shortId: hashMatchedItem.shortId,
                groupId: hashMatchedItem.groupId,
                configId: hashMatchedItem.configId,
                isGrouped: !!hashMatchedItem.groupId,
                matchingQueryIndex,
                note: 'Using hash-matched query (highest priority)'
            });
            return hashMatchedItem;
        }
        // PRIORITY 2: Otherwise use current state selection
        _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
            event: 'getSelectedQueryItem-state-selection',
            selectedGroupId,
            hasSelectedGroup: selectedGroupId && groups[selectedGroupId],
            selectedGroupQueryIndex,
            selectedUngroupedIndex,
            ungroupedLength: ungrouped.length,
            groupOrderLength: groupOrder.length,
            note: 'No hash parameter, using state selection'
        });
        // If a group is selected, get query from that group
        if (selectedGroupId && groups[selectedGroupId]) {
            const groupItems = groups[selectedGroupId].items;
            if (groupItems.length > 0) {
                const idx = selectedGroupQueryIndex < groupItems.length ? selectedGroupQueryIndex : 0;
                const selectedItem = groupItems[idx];
                _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                    event: 'selected-query-from-group',
                    groupId: selectedGroupId,
                    groupQueryIndex: idx,
                    queryItemConfigId: selectedItem.configId,
                    queryDisplayName: getQueryDisplayName(selectedItem)
                });
                return selectedItem;
            }
        }
        // Otherwise, get from ungrouped queries
        if (ungrouped.length > 0) {
            const idx = selectedUngroupedIndex < ungrouped.length ? selectedUngroupedIndex : 0;
            const selectedItem = ungrouped[idx].item;
            _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
                event: 'selected-query-from-ungrouped',
                ungroupedIndex: idx,
                queryItemConfigId: selectedItem.configId,
                queryDisplayName: getQueryDisplayName(selectedItem)
            });
            return selectedItem;
        }
        // Fallback to first query item
        _debug_logger__WEBPACK_IMPORTED_MODULE_5__.debugLogger.log('GROUP', {
            event: 'selected-query-fallback',
            note: 'No groups or ungrouped queries, using first item'
        });
        return queryItems[0];
    };
    const selectedQueryItem = getSelectedQueryItem();
    const selectedQueryRealIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return queryItems.findIndex(q => q.configId === selectedQueryItem.configId);
    }, [queryItems, selectedQueryItem]);
    // If only one query total, don't show dropdown
    const showDropdown = queryItems.length > 1 || groupOrder.length > 0;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `runtime-query__query-list h-100 ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      display: flex;
      flex-direction: column;
      .query-selector {
        padding: 16px;
        border-bottom: 1px solid var(--sys-color-divider-secondary);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .query-selector-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--sys-color-text-primary);
        margin-bottom: 4px;
      }
      .query-selector select {
        width: 100%;
      }
      .query-task-container {
        flex: 1;
        overflow: auto;
      }
    `, children: selectedQueryItem && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `query-task-container ${isInPopper ? jimu_ui__WEBPACK_IMPORTED_MODULE_3__.FOCUSABLE_CONTAINER_CLASS : ''}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: selectedQueryRealIndex >= 0 ? selectedQueryRealIndex : 0, total: queryItems.length, queryItem: selectedQueryItem, defaultPageSize: defaultPageSize, isInPopper: isInPopper, initialInputValue: selectedQueryItem.shortId === (initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId) ? initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value : undefined, onHashParameterUsed: onHashParameterUsed, queryItems: queryItems, selectedQueryIndex: selectedUngroupedIndex, onQueryChange: (index) => setSelectedUngroupedIndex(index), 
                // Grouping props
                groups: groups, ungrouped: ungrouped, groupOrder: groupOrder, selectedGroupId: selectedGroupId, selectedGroupQueryIndex: selectedGroupQueryIndex, onGroupChange: (groupId) => setSelectedGroupId(groupId), onGroupQueryChange: (index) => setSelectedGroupQueryIndex(index), onUngroupedChange: (index) => setSelectedUngroupedIndex(index) }) })) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskSpatialForm: () => (/* binding */ QueryTaskSpatialForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-from-ds */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx");
/* harmony import */ var _geometry_from_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry-from-map */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx");
/* harmony import */ var _geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./geometry-from-draw */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");

/** @jsx jsx */








function QueryTaskSpatialForm(props) {
    var _a;
    const { label, desc, filterTypes, mapWidgetIds, onFilterChange, onRelationChange, onBufferChange, useDataSources, spatialRelations, useRuntimeData, dsEnableBuffer, dsBufferDistance, dsBufferUnit, drawEnableBuffer, drawBufferDistance, drawBufferUnit, createToolTypes, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // used to store the selection of the data source in order to update the filter when option changes
    const selectedGeometriesRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const mapExists = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        if ((mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.length) > 0) {
            const mapWidgetId = mapWidgetIds[0];
            return state.appConfig.widgets[mapWidgetId] != null;
        }
        return false;
    });
    const canUseMapFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return mapExists && ((filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent)) || (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode)));
    }, [filterTypes, mapExists]);
    const supportedFilterTypes = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [];
        if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData) {
            result.push({ value: 'data', label: getI18nMessage('featureFromDs') });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent))) {
            result.push({ value: 'map', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent}`) });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode))) {
            result.push({ value: 'draw', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode}`) });
        }
        return result;
    }, [canUseMapFilter, useDataSources, useRuntimeData, getI18nMessage, filterTypes]);
    const [currentFilterType, setCurrentFilterType] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // in order to avoid invalid option being selected
        if (currentFilterType !== 'none' && !supportedFilterTypes.find((item) => item.value === currentFilterType)) {
            setCurrentFilterType((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
        }
    }, [currentFilterType, supportedFilterTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear the relationship and buffer if filter type is not 'data'
        if (currentFilterType === 'map' || currentFilterType === 'draw' || currentFilterType === 'none') {
            onRelationChange(null);
            onBufferChange(0, _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters);
            onFilterChange({ geometry: null });
        }
        // no need to update the filter if the data source has selection since it will be updated in the handleSelectionChange method
        if (currentFilterType === 'data' && selectedGeometriesRef.current == null) {
            onFilterChange({ geometry: null });
        }
    }, [currentFilterType, onRelationChange, onBufferChange, onFilterChange]);
    const handleFilterTypeChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => { setCurrentFilterType(evt.target.value); }, []);
    const handleGeometryChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometry, layer, graphic, clearAfterApply) => {
        onFilterChange({ geometry, graphic, layer, clearAfterApply });
    }, [onFilterChange]);
    const handleSelectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometries) => {
        selectedGeometriesRef.current = geometries;
        onFilterChange({ geometry: geometries });
    }, [onFilterChange]);
    if (!((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData || canUseMapFilter)) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4 pb-4', "aria-label": label, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !label && !desc }), children: [label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: label }), desc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: desc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), supportedFilterTypes.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3', children: getI18nMessage('chooseFilterType') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterType'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `height: 32px;`, value: currentFilterType, onChange: handleFilterTypeChanged, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'none', children: "-" }, '-'), supportedFilterTypes.map(item => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item.value, children: item.label }, item.value))] })] })), currentFilterType === 'data' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__.GeometryFromDataSource, { enableBuffer: dsEnableBuffer, bufferDistance: dsBufferDistance, bufferUnit: dsBufferUnit, spatialRelations: spatialRelations, useDataSources: useDataSources, useRuntimeData: useRuntimeData, onSelectionChange: handleSelectionChange, onRelationChange: onRelationChange, onBufferChange: onBufferChange })), currentFilterType === 'map' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_map__WEBPACK_IMPORTED_MODULE_6__.GeometryFromMap, { mapWidgetIds: mapWidgetIds, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange })), currentFilterType === 'draw' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__.GeometryFromDraw, { enableBuffer: drawEnableBuffer, bufferDistance: drawBufferDistance, bufferUnit: drawBufferUnit, mapWidgetIds: mapWidgetIds, widgetId: widgetId, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange, onBufferChange: onBufferChange }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTask: () => (/* binding */ QueryTask)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_task_form__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx");
/* harmony import */ var _query_result__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-result */ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_label__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-label */ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var _loading_result__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./loading-result */ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _debug_logger__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./debug-logger */ "./your-extensions/widgets/query-simple/src/runtime/debug-logger.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

/** @jsx jsx */















// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  &.wrapped .query-form {
    height: 100%;
  }
  .query-task__content {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-top: 8px;
    &:has(> .query-form__header > div:not(.d-none)), &:has(> .query-result) {
      padding-top: 16px;
    }
  }
  .query-form__header {
    display: flex;
    &.has-content {
      border-bottom: 1px solid var(--sys-color-divider-secondary);
      margin-bottom: 6px;
      padding-bottom: 8px;
    }
    .nav-action {
      flex: 1 1 0;
      overflow: hidden;
      display: flex;
      .jimu-btn {
        min-width: 26px;
      }
    }
    .result-menu {
      display: flex;
    }
  }
`;
function QueryTask(props) {
    var _a, _b;
    const { queryItem, onNavBack, total, isInPopper = false, defaultPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.CONSTANTS.DEFAULT_QUERY_PAGE_SIZE, wrappedInPopper = false, className = '', index, initialInputValue, onHashParameterUsed, queryItems, selectedQueryIndex, onQueryChange, groups, ungrouped, groupOrder, selectedGroupId, selectedGroupQueryIndex, onGroupChange, onGroupQueryChange, onUngroupedChange } = props, otherProps = __rest(props, ["queryItem", "onNavBack", "total", "isInPopper", "defaultPageSize", "wrappedInPopper", "className", "index", "initialInputValue", "onHashParameterUsed", "queryItems", "selectedQueryIndex", "onQueryChange", "groups", "ungrouped", "groupOrder", "selectedGroupId", "selectedGroupQueryIndex", "onGroupChange", "onGroupQueryChange", "onUngroupedChange"]);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_11__["default"]);
    const [stage, setStage] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0); // 0 = form, 1 = results, 2 = loading
    const [activeTab, setActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState('query');
    const [enabled, setEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const [resultCount, setResultCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    // Track if we've already selected records for the current query results
    const hasSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track query execution count to force QueryTaskResult remount on new queries
    const queryExecutionKeyRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const queryParamRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const recordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [outputDS, setOutputDS] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [spatialFilterEnabled, setSpatialFilterEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const attributeFilterSqlExprObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.sqlExprObj);
    const spatialFilterObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const clearResultBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const [dataActionFilter, setDataActionFilter] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.configId);
    // Track manual tab switches to prevent auto-switch useEffect from interfering
    const manualTabSwitchRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Store the last runtime zoom override value from the form for use by Add to Map action
    const lastRuntimeZoomToSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Error states for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [zoomError, setZoomError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_QUERY_ITEM, queryItem);
    const { icon, name, displayLabel } = currentItem;
    const dsExists = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_7__.useDataSourceExists)({ widgetId: props.widgetId, useDataSourceId: (_a = currentItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId });
    // Debug logging for tab content rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('TASK', {
            event: 'query-tab-content-render',
            activeTab,
            enabled,
            dsExists,
            dataSource: dataSource ? 'exists' : 'null',
            queryItemConfigId: queryItem.configId,
            note: 'Query tab content state check'
        });
    }, [activeTab, enabled, dsExists, dataSource, queryItem.configId]);
    // Debug logging for Tab children rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (activeTab === 'query') {
            _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('TASK', {
                event: 'query-tab-children-render',
                activeTab,
                queryItemConfigId: queryItem.configId,
                note: 'Query Tab children should be rendering'
            });
        }
    }, [activeTab, queryItem.configId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    // Get the pagination style from widget config (MultiPage or LazyLoad/Single-page)
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    // Get the initial page size for single-page (LazyLoad) results
    // This allows users to configure how many records are loaded initially when using single-page mode
    // Defaults to 100 if not configured
    const lazyLoadInitialPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.lazyLoadInitialPageSize;
    });
    // Watch for when results are ready and switch to Results tab
    // This ensures we wait for React to render results, not just for the query to complete
    // This approach matches the behavior of manual input where results are rendered before tab switch
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Don't auto-switch if user manually switched tabs
        if (manualTabSwitchRef.current) {
            return;
        }
        // Only switch tabs if:
        // 1. We have results (resultCount > 0)
        // 2. Records are actually loaded (recordsRef.current has data)
        // 3. We're in results stage (stage === 1)
        // 4. We're currently on the query tab (don't switch if already on results)
        if (resultCount > 0 && recordsRef.current && recordsRef.current.length > 0 && stage === 1 && activeTab === 'query') {
            setActiveTab('results');
        }
    }, [resultCount, stage, activeTab]);
    // Verify dropdowns are synchronized with hash parameter when present
    // This is especially important for grouped queries where dropdowns need to be synchronized
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only verify if we have a hash parameter
        if (!initialInputValue || !queryItem.shortId) {
            return;
        }
        // Verify the current queryItem matches what we expect from hash parameter
        const expectedShortId = queryItem.shortId;
        const isGroupedQuery = queryItem.groupId !== null && queryItem.groupId !== undefined;
        // Check if dropdowns are correctly set for grouped queries
        if (isGroupedQuery) {
            const expectedGroupId = queryItem.groupId;
            const actualGroupId = selectedGroupId;
            const expectedQueryIndex = selectedGroupQueryIndex;
            if (expectedGroupId !== actualGroupId) {
                _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('GROUP', {
                    event: 'dropdown-group-mismatch',
                    expectedGroupId,
                    actualGroupId,
                    queryItemShortId: expectedShortId,
                    warning: 'First dropdown may not be synchronized with hash parameter'
                });
            }
            else if (expectedQueryIndex !== undefined) {
                // Verify the query index within the group matches
                const groupItems = (_a = groups === null || groups === void 0 ? void 0 : groups[expectedGroupId]) === null || _a === void 0 ? void 0 : _a.items;
                if (groupItems && groupItems.length > expectedQueryIndex) {
                    const expectedQueryConfigId = (_b = groupItems[expectedQueryIndex]) === null || _b === void 0 ? void 0 : _b.configId;
                    const actualQueryConfigId = queryItem.configId;
                    if (expectedQueryConfigId !== actualQueryConfigId) {
                        _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('GROUP', {
                            event: 'dropdown-query-index-mismatch',
                            expectedQueryConfigId,
                            actualQueryConfigId,
                            expectedQueryIndex,
                            queryItemShortId: expectedShortId,
                            warning: 'Second dropdown may not be synchronized with hash parameter'
                        });
                    }
                    else {
                        _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('GROUP', {
                            event: 'dropdowns-synchronized',
                            queryItemShortId: expectedShortId,
                            groupId: expectedGroupId,
                            selectedGroupQueryIndex: expectedQueryIndex,
                            note: 'Dropdowns synchronized with hash parameter'
                        });
                    }
                }
            }
        }
        else {
            // Ungrouped query - verify it's selected
            _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('GROUP', {
                event: 'dropdowns-synchronized-ungrouped',
                queryItemShortId: expectedShortId,
                note: 'Ungrouped query dropdown synchronized with hash parameter'
            });
        }
    }, [initialInputValue, queryItem.shortId, queryItem.groupId, queryItem.configId, selectedGroupId, selectedGroupQueryIndex, groups]);
    const useOutputDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
        dataSourceId: queryItem.outputDataSourceId,
        mainDataSourceId: queryItem.outputDataSourceId
    }), [queryItem.outputDataSourceId]);
    const updateDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        var _a, _b;
        const currentDs = ds !== null && ds !== void 0 ? ds : dataSource;
        // should disable spatial filter if the dataSource is an output ds and it already has spatial filter
        if ((_a = currentDs === null || currentDs === void 0 ? void 0 : currentDs.getDataSourceJson()) === null || _a === void 0 ? void 0 : _a.isOutputFromWidget) {
            const qDs = currentDs;
            const qParams = (_b = qDs.getCurrentQueryParams) === null || _b === void 0 ? void 0 : _b.call(qDs);
            if (qParams.geometry != null) {
                setSpatialFilterEnabled(false);
            }
            else {
                setSpatialFilterEnabled(true);
            }
        }
    }, [dataSource]);
    const handleStatusChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((enabled) => {
        setEnabled(enabled);
        updateDataSource();
    }, [updateDataSource]);
    const handleOutputDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info, preInfo) => {
        const outputId = queryItem.outputDataSourceId;
        const filter = (info === null || info === void 0 ? void 0 : info.widgetQueries) ? info.widgetQueries[`setFilter-${outputId}`] : null;
        if (filter == null) { // filter is null means there are incomplete queries, ignore this change
            return;
        }
        const preFilter = (preInfo === null || preInfo === void 0 ? void 0 : preInfo.widgetQueries) ? preInfo.widgetQueries[`setFilter-${outputId}`] : null;
        if ((filter === null || filter === void 0 ? void 0 : filter.where) !== (preFilter === null || preFilter === void 0 ? void 0 : preFilter.where)) {
            setDataActionFilter(filter);
        }
    }, [queryItem.outputDataSourceId]);
    const publishDataClearedMsg = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        if (!outputDS)
            return;
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordSetChangeMessage(props.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_1__.RecordSetChangeType.Remove, [outputDS.id]);
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        yield jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(props.widgetId, [], [outputDS.id]));
    }), [props.widgetId, outputDS]);
    /**
     * Clears all query results from the UI and map.
     * This is the single source of truth for clearing results.
     * It clears the records, resets the result count, clears selection from the map,
     * publishes a cleared message to the map, switches back to the Query tab,
     * and increments the query execution key to force QueryTaskResult to remount with fresh state.
     */
    const clearResult = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        recordsRef.current = null;
        outputDS === null || outputDS === void 0 ? void 0 : outputDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady);
        setResultCount(0);
        // Clear selection directly from data source using utility function
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS);
        publishDataClearedMsg();
        // Switch back to Query tab when clearing results
        setActiveTab('query');
        setStage(0);
        hasSelectedRecordsRef.current = false; // Reset selection flag when clearing
        // Increment query execution key to force QueryTaskResult remount with fresh state
        queryExecutionKeyRef.current += 1;
        // Clear error states when clearing results
        setSelectionError(null);
        setZoomError(null);
    }, [outputDS, publishDataClearedMsg, props.widgetId, queryItem.configId]);
    /**
     * Handles data source creation when switching between query items.
     * When a new query item is selected (e.g., switching from Parcel to Major),
     * this clears old results by programmatically clicking the trash can button
     * to ensure all cleanup logic runs properly.
     *
     * @param ds - The newly created data source for the selected query item
     */
    const handleDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        // Clear old results by programmatically clicking the trash can button when switching query items
        // Try ref first, then fall back to utility function if ref isn't set yet
        let clearButton = clearResultBtnRef.current;
        if (!clearButton) {
            // Try to find the button using utility function
            clearButton = (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.findClearResultsButton)();
        }
        // Click the button if it exists and there are results to clear
        // Otherwise, call clearResult() directly
        if (clearButton && resultCount > 0) {
            clearButton.click();
        }
        else {
            clearResult();
        }
        setDataSource(ds);
        updateDataSource(ds);
        setStage(0);
        setActiveTab('query'); // Return to Query tab when switching queries
    }, [updateDataSource, clearResult, resultCount]);
    const handleOutputDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        setOutputDS(ds);
    }, []);
    // Clear results when query item changes (e.g., when new hash parameter triggers different query)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Only clear if we're actually switching to a different query (not just re-rendering)
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        if (isSwitchingQueries && resultCount > 0) {
            // Store the old configId before updating
            const oldConfigId = previousConfigIdRef.current;
            // Update the ref to track the new query
            previousConfigIdRef.current = queryItem.configId;
            // Clear immediately when switching queries, but wrap in try-catch to handle
            // race conditions with feature info windows that might be rendering
            try {
                clearResult();
            }
            catch (error) {
                // Log for debugging but don't show to user (framework race condition)
                // The error is in framework code (feature-info.tsx), not our code
                // This can happen if feature-info.tsx is trying to appendChild to a DOM element
                // that gets removed when we clear selection
                _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('TASK', {
                    event: 'clear-result-race-condition',
                    error: error instanceof Error ? error.message : String(error),
                    note: 'Likely race condition with feature-info.tsx'
                });
                if (true) {
                    console.warn('Error clearing results (likely race condition with feature info):', error);
                }
                // Don't set error state - this is expected in some scenarios
            }
        }
        else if (isSwitchingQueries) {
            // Update ref even if no results to clear
            previousConfigIdRef.current = queryItem.configId;
        }
    }, [queryItem.configId, clearResult, resultCount]);
    const navToForm = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((clearResults = false) => {
        if (clearResults) {
            // Use the centralized clearResult method instead of duplicating logic
            clearResult();
            return;
        }
        // Switch to query tab but don't clear results unless explicitly requested
        // Mark as manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab('query');
        // Reset the flag after a short delay
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Only change stage if we're clearing results
        // Otherwise, keep stage at 1 (results available) so results persist
        if (!clearResults && resultCount > 0) {
            setStage(1); // Keep results available
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
        });
    }, [clearResult, resultCount]);
    /**
     * Handles tab switching between Query and Results tabs.
     * Tab switching preserves results state - results remain visible and selected
     * when switching between tabs. Results are only cleared when explicitly
     * clicking the trash can button or when starting a new query.
     *
     * @param tab - The tab to switch to ('query' | 'results')
     * @param event - Optional mouse event to prevent default behavior
     */
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab, event) => {
        _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('TASK', {
            event: 'tab-change',
            tab,
            currentTab: activeTab,
            resultCount,
            eventType: event === null || event === void 0 ? void 0 : event.type
        });
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        // Don't allow switching to results if there are no results
        if (tab === 'results' && resultCount === 0) {
            _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('TASK', {
                event: 'tab-change-blocked',
                reason: 'no-results',
                tab,
                resultCount
            });
            return;
        }
        // Mark this as a manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab(tab);
        // Reset the flag after a short delay to allow the state update to complete
        // This prevents the auto-switch useEffect from immediately switching back
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Don't change stage here - just switch the view
        // Stage should remain at 1 (results available) when switching between tabs
    }, [resultCount, activeTab]);
    /**
     * Handles form submission when user clicks "Apply" button.
     * Clears old results (if any) by programmatically clicking the trash can button,
     * then executes the query with the provided SQL expression and spatial filter.
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmit = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        // Clear previous errors when starting a new query
        setSelectionError(null);
        setZoomError(null);
        // Store the runtime zoom override for use by Add to Map action
        lastRuntimeZoomToSelectedRef.current = runtimeZoomToSelected;
        attributeFilterSqlExprObj.current = sqlExpr;
        spatialFilterObj.current = spatialFilter;
        // Load the first page
        const featureDS = outputDS;
        // Clear old results by programmatically clicking the trash can button when starting a new query
        // If the button exists, it means there are results to clear
        // This ensures we use the exact same logic without code duplication
        if (clearResultBtnRef.current) {
            clearResultBtnRef.current.click();
            // Small delay to ensure the click handler completes before proceeding
            yield new Promise(resolve => setTimeout(resolve, 0));
        }
        // Set loading stage
        setStage(2);
        yield publishDataClearedMsg();
        // Determine page size based on pagination style
        // For single-page (LazyLoad) mode, use the configured initial page size (defaults to 100)
        // For multi-page mode, use the default page size from props
        let pageSize = defaultPageSize;
        if (pagingTypeInConfig === _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.LazyLoad) {
            // Use configured lazy load initial page size, falling back to 100 if not set
            pageSize = lazyLoadInitialPageSize !== null && lazyLoadInitialPageSize !== void 0 ? lazyLoadInitialPageSize : 100;
        }
        const queryParams = (0,_query_utils__WEBPACK_IMPORTED_MODULE_10__.generateQueryParams)(featureDS, sqlExpr, spatialFilter, currentItem, 1, pageSize);
        queryParamRef.current = queryParams;
        // Change output ds status to unloaded before use it to load count/records.
        featureDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        featureDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        let queryResultCount = 0; // Capture count from promise chain to use in finally block
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_10__.executeCountQuery)(props.widgetId, featureDS, queryParams)
            .then((count) => {
            queryResultCount = count; // Store count for use in finally block
            setResultCount(count);
            // update ds in order to execute query
            featureDS.updateQueryParams(queryParamRef.current, props.widgetId);
            return (0,_query_utils__WEBPACK_IMPORTED_MODULE_10__.executeQuery)(props.widgetId, queryItem, featureDS, queryParamRef.current);
        })
            .then((result) => {
            recordsRef.current = result.records;
            // Reset selection flag for new query results
            hasSelectedRecordsRef.current = false;
            // Select query results in output data source - this tells the map to highlight features
            // This must happen BEFORE zoom to ensure selection is visible
            // Selection happens once when results first come back - not on every tab switch
            // This prevents duplicate selections and ensures features are only added to
            // the map's selection set once per query execution
            // Select records directly on the origin layer (parcel layer)
            if (result.records && result.records.length > 0 && outputDS) {
                const recordIds = result.records.map(record => record.getId());
                // Select records and publish selection message using utility function
                try {
                    setSelectionError(null); // Clear previous errors
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(props.widgetId, outputDS, recordIds, result.records);
                    hasSelectedRecordsRef.current = true; // Mark as selected
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('TASK', {
                        event: 'selection-failed',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                    console.error('Error publishing selection message', error);
                }
            }
            // Trigger the existing zoomToFeature data action (same as clicking "Zoom To" in the menu)
            // Use runtime preference if provided, otherwise fall back to config setting (defaults to true)
            const shouldZoom = runtimeZoomToSelected !== undefined
                ? runtimeZoomToSelected
                : (queryItem.zoomToSelected !== false);
            if (result.records && result.records.length > 0 && outputDS && shouldZoom) {
                // Create a data set from the output data source and selected records
                const dataSet = {
                    dataSource: outputDS,
                    records: result.records,
                    name: outputDS.getLabel()
                };
                // Get available data actions and find the zoomToFeature action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(props.widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
                    .then(actionCategories => {
                    // Look for zoomToFeature action in any category
                    let zoomAction = null;
                    for (const category in actionCategories) {
                        const actions = actionCategories[category];
                        zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                        if (zoomAction)
                            break;
                    }
                    if (zoomAction) {
                        // Execute the same zoom action that works when clicked manually
                        return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, props.widgetId);
                    }
                    else {
                        return Promise.resolve(false);
                    }
                })
                    .catch(error => {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to zoom to features';
                    setZoomError(errorMessage);
                    _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('ZOOM', {
                        event: 'zoom-action-failed',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    if (true) {
                        console.error('Error executing zoomToFeature data action', error);
                    }
                    return Promise.resolve(false);
                });
            }
            return Promise.resolve(true);
        })
            .finally(() => {
            if ((spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.layer) && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.clearAfterApply)) {
                spatialFilter.layer.removeAll();
            }
            setStage(1);
            // Tab switching is now handled by useEffect that watches for resultCount, recordsRef.current, and stage
            // This ensures we wait for React to actually render results before switching tabs
            // This matches the behavior of manual input where results are rendered before tab switch
        });
    }), [currentItem, queryItem, props.widgetId, outputDS, defaultPageSize, pagingTypeInConfig, lazyLoadInitialPageSize, publishDataClearedMsg, clearResult]);
    const { useAttributeFilter, sqlExprObj, useSpatialFilter, spatialFilterTypes, spatialIncludeRuntimeData, spatialRelationUseDataSources } = currentItem;
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task h-100', className, { wrapped: wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      ${style}
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useOutputDs, onDataSourceCreated: handleOutputDataSourceCreated, onDataSourceInfoChange: handleOutputDataSourceInfoChange }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { value: activeTab, onChange: (id) => handleTabChange(id), fill: true, type: 'underline', keepMount: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'query', title: getI18nMessage('queryTab'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'query'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
              padding-top: 0 !important;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-form__header mx-4 align-items-center', { 'in-popper': isInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              padding: 6px 0;
              padding-top: 8px;
              border-bottom: 1px solid var(--sys-color-divider-secondary);
              flex-shrink: 0;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('nav-action align-items-center', { 'd-none': wrappedInPopper }), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 mr-2', { 'd-none': total === 1 || !onNavBack }), size: 'sm', type: 'tertiary', icon: true, onClick: onNavBack, "aria-label": getI18nMessage('back'), ref: backBtnRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_12__.ArrowLeftOutlined, { autoFlip: true }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_label__WEBPACK_IMPORTED_MODULE_8__.QueryTaskLabel, { icon: icon, name: displayLabel ? name : '' })] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: clearResultBtnRef, size: 'sm', type: 'tertiary', "aria-label": getI18nMessage('clearResult'), icon: true, className: 'ml-auto py-0', onClick: clearResult, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__.TrashOutlined, {}) }) }))] }), (() => {
                                    // Only show dropdowns if multiple queries exist
                                    if (!queryItems || queryItems.length <= 1) {
                                        return null;
                                    }
                                    // Build flat list of all queries with their display info
                                    // For grouped queries, use group display name (only show once per group)
                                    const queryOptions = [];
                                    // Track which groups we've already added to avoid duplicates
                                    const addedGroups = new Set();
                                    queryItems.forEach((item, idx) => {
                                        var _a, _b, _c;
                                        if (item.groupId) {
                                            // For grouped queries, use group display name (only add once per group)
                                            if (!addedGroups.has(item.groupId)) {
                                                addedGroups.add(item.groupId);
                                                const groupDisplayName = ((_a = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.displayName) ||
                                                    ((_c = (_b = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _b === void 0 ? void 0 : _b.items[0]) === null || _c === void 0 ? void 0 : _c.name) ||
                                                    item.name ||
                                                    `Group ${item.groupId}`;
                                                queryOptions.push({
                                                    configId: item.configId,
                                                    displayName: groupDisplayName,
                                                    groupId: item.groupId,
                                                    index: idx
                                                });
                                            }
                                        }
                                        else {
                                            // Ungrouped query - use item.name for first dropdown (not searchAlias/jimuFieldName)
                                            queryOptions.push({
                                                configId: item.configId,
                                                displayName: item.name || getQueryDisplayName(item),
                                                groupId: null,
                                                index: idx
                                            });
                                        }
                                    });
                                    // Determine currently selected query
                                    const currentQueryItem = queryItem;
                                    const currentQueryGroupId = currentQueryItem.groupId || null;
                                    const isGroupedQuery = currentQueryGroupId !== null;
                                    // Find the option index for the current query
                                    const currentOptionIndex = queryOptions.findIndex(opt => {
                                        if (isGroupedQuery) {
                                            return opt.groupId === currentQueryGroupId;
                                        }
                                        else {
                                            return opt.configId === currentQueryItem.configId;
                                        }
                                    });
                                    _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('GROUP', {
                                        event: 'rendering-dropdowns',
                                        totalQueries: queryItems.length,
                                        queryOptionsCount: queryOptions.length,
                                        currentQueryGroupId,
                                        isGroupedQuery,
                                        currentOptionIndex,
                                        selectedGroupId,
                                        selectedGroupQueryIndex,
                                        currentQueryConfigId: currentQueryItem.configId
                                    });
                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 8px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      font-size: 0.875rem;
                      font-weight: 500;
                      color: var(--sys-color-text-primary);
                      margin-bottom: 8px;
                      display: block;
                    `, children: getI18nMessage('searchLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: currentOptionIndex >= 0 ? currentOptionIndex : 0, onChange: (e) => {
                                                            var _a;
                                                            const optionIndex = parseInt(e.target.value);
                                                            const selectedOption = queryOptions[optionIndex];
                                                            _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('GROUP', {
                                                                event: 'query-option-selected',
                                                                optionIndex,
                                                                selectedOption,
                                                                isGrouped: selectedOption.groupId !== null
                                                            });
                                                            if (selectedOption.groupId) {
                                                                // Grouped query selected - set group and first query in group
                                                                if (onGroupChange) {
                                                                    onGroupChange(selectedOption.groupId);
                                                                }
                                                                if (onGroupQueryChange) {
                                                                    onGroupQueryChange(0);
                                                                }
                                                            }
                                                            else {
                                                                // Ungrouped query selected - clear group selection
                                                                if (onGroupChange) {
                                                                    onGroupChange(null);
                                                                }
                                                                if (onUngroupedChange) {
                                                                    // Find the ungrouped index
                                                                    const ungroupedIndex = (_a = ungrouped === null || ungrouped === void 0 ? void 0 : ungrouped.findIndex(({ item }) => item.configId === selectedOption.configId)) !== null && _a !== void 0 ? _a : -1;
                                                                    if (ungroupedIndex >= 0) {
                                                                        onUngroupedChange(ungroupedIndex);
                                                                    }
                                                                    else {
                                                                        // Fallback: use the index from queryItems
                                                                        _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('GROUP', {
                                                                            event: 'ungrouped-fallback-to-index',
                                                                            selectedOptionIndex: selectedOption.index
                                                                        });
                                                                        if (onQueryChange) {
                                                                            onQueryChange(selectedOption.index);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, children: queryOptions.map((option, idx) => {
                                                            _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('GROUP', {
                                                                event: 'rendering-query-option',
                                                                index: idx,
                                                                configId: option.configId,
                                                                displayName: option.displayName,
                                                                groupId: option.groupId
                                                            });
                                                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: option.displayName }, option.configId));
                                                        }) })] }), isGroupedQuery && currentQueryGroupId && groups && groups[currentQueryGroupId] && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      padding: 8px 16px;
                      flex-shrink: 0;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        margin-bottom: 8px;
                        display: block;
                      `, children: "Search Alias" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: selectedGroupQueryIndex !== undefined ? selectedGroupQueryIndex : 0, onChange: (e) => {
                                                            var _a;
                                                            const newIndex = parseInt(e.target.value);
                                                            _debug_logger__WEBPACK_IMPORTED_MODULE_15__.debugLogger.log('GROUP', {
                                                                event: 'group-query-selected',
                                                                groupId: currentQueryGroupId,
                                                                groupQueryIndex: newIndex,
                                                                queryItemConfigId: (_a = groups[currentQueryGroupId].items[newIndex]) === null || _a === void 0 ? void 0 : _a.configId,
                                                                queryDisplayName: getQueryDisplayName(groups[currentQueryGroupId].items[newIndex])
                                                            });
                                                            if (onGroupQueryChange) {
                                                                onGroupQueryChange(newIndex);
                                                            }
                                                        }, children: groups[currentQueryGroupId].items.map((item, idx) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: getQueryDisplayName(item) }, item.configId))) })] }))] }));
                                })(), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
            `, children: [enabled && dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  min-height: 0;
                  overflow: hidden;
                `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_form__WEBPACK_IMPORTED_MODULE_5__.QueryTaskForm, Object.assign({}, otherProps, { configId: queryItem.configId, outputDS: outputDS, datasourceReady: dataSource != null, spatialFilterEnabled: spatialFilterEnabled, dataActionFilter: dataActionFilter, onFormSubmit: handleFormSubmit, initialInputValue: initialInputValue, onHashParameterUsed: onHashParameterUsed, queryItemShortId: queryItem.shortId })) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_7__.DataSourceTip, { widgetId: props.widgetId, useDataSource: queryItem.useDataSource, showMessage: true, onStatusChange: handleStatusChange, onDataSourceCreated: handleDataSourceCreated })] })] }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'results', title: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { children: [getI18nMessage('resultsTab'), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  margin-left: 6px;
                  font-size: 0.75rem;
                  opacity: 0.7;
                `, children: ["(", resultCount, ")"] }))] }), disabled: resultCount === 0, children: resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'results'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 0;
                height: 100%;
                padding-top: 0 !important;
              `, onClick: (e) => {
                                // Prevent clicks from bubbling up when Results tab is active
                                if (activeTab === 'results') {
                                    e.stopPropagation();
                                }
                            }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result__WEBPACK_IMPORTED_MODULE_6__.QueryTaskResult, { widgetId: props.widgetId, queryItem: queryItem, queryParams: queryParamRef.current, resultCount: resultCount, maxPerPage: (_b = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getMaxRecordCount) === null || _b === void 0 ? void 0 : _b.call(dataSource), records: recordsRef.current, defaultPageSize: defaultPageSize, outputDS: outputDS, runtimeZoomToSelected: lastRuntimeZoomToSelectedRef.current, onNavBack: (clearResults = false) => {
                                    // Handle navigation from QueryTaskResult
                                    // If clearResults is true, clear everything and go to query tab
                                    // If false, just switch to query tab without clearing
                                    if (clearResults) {
                                        hasSelectedRecordsRef.current = false; // Reset flag when clearing
                                        navToForm(true);
                                    }
                                    else {
                                        // Just switch tabs, don't clear results
                                        // Mark as manual switch to prevent auto-switch useEffect from interfering
                                        manualTabSwitchRef.current = true;
                                        setActiveTab('query');
                                        // Reset the flag after a short delay
                                        setTimeout(() => {
                                            manualTabSwitchRef.current = false;
                                        }, 100);
                                    }
                                } }, `${queryItem.configId}-${queryExecutionKeyRef.current}`) })) })] }), (selectionError || zoomError) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 0 16px;
          margin-top: 8px;
        `, children: [selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_7__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) })), zoomError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_7__.ErrorMessage, { error: zoomError, onDismiss: () => setZoomError(null) }))] })), stage === 2 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1000;
          background-color: rgba(255, 255, 255, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_loading_result__WEBPACK_IMPORTED_MODULE_13__.LoadingResult, {}) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-utils.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineFields: () => (/* binding */ combineFields),
/* harmony export */   executeCountQuery: () => (/* binding */ executeCountQuery),
/* harmony export */   executeQuery: () => (/* binding */ executeQuery),
/* harmony export */   generateQueryParams: () => (/* binding */ generateQueryParams),
/* harmony export */   getPopupTemplate: () => (/* binding */ getPopupTemplate)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



function combineFields(resultDisplayFields, resultTitleExpression, idField) {
    const fields = new Set();
    resultDisplayFields === null || resultDisplayFields === void 0 ? void 0 : resultDisplayFields.forEach(item => fields.add(item));
    if (resultTitleExpression) {
        const templates = resultTitleExpression.match(/\{\w*\}/g);
        if ((templates === null || templates === void 0 ? void 0 : templates.length) > 0) {
            templates.forEach(item => fields.add(item.substring(1, item.length - 1)));
        }
    }
    if (idField) {
        fields.add(idField);
    }
    return Array.from(fields);
}
function getPopupTemplate(outputDS, queryItem) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const { resultFieldsType, resultDisplayFields, resultTitleExpression = '' } = queryItem;
        const currentOriginDs = outputDS.getOriginDataSources()[0];
        const popupInfo = currentOriginDs.getPopupInfo();
        if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
            let fields;
            if (resultDisplayFields == null) {
                const fieldsInContent = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.getFieldInfosInPopupContent)(popupInfo);
                if (fieldsInContent.length > 0) {
                    const uniqueFields = new Set(fieldsInContent.map(ele => ele.fieldName));
                    fields = Array.from(uniqueFields);
                }
                else {
                    // return all fields by default
                    const allFieldsSchema = outputDS.getSchema();
                    fields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
                }
            }
            else {
                fields = resultDisplayFields.asMutable({ deep: true });
            }
            if (popupInfo) {
                const fieldInfos = [];
                fields.forEach(field => {
                    const fieldInfo = popupInfo.fieldInfos.find(fieldInfo => fieldInfo.fieldName === field);
                    if (fieldInfo) {
                        fieldInfo.visible = true;
                        fieldInfos.push(fieldInfo);
                    }
                    else {
                        fieldInfos.push({
                            fieldName: field,
                            label: field
                        });
                    }
                });
                return {
                    popupTemplate: {
                        fieldInfos,
                        content: [{
                                type: 'fields'
                            }],
                        title: resultTitleExpression
                    }
                };
            }
            return {
                popupTemplate: {
                    fieldInfos: fields.map(field => ({
                        fieldName: field,
                        label: field
                    })),
                    content: [{
                            type: 'fields'
                        }],
                    title: resultTitleExpression
                }
            };
        }
        // the source layer will provide popup info
        let layerObject;
        if (currentOriginDs.layer) {
            layerObject = currentOriginDs.layer;
        }
        else {
            layerObject = yield currentOriginDs.createJSAPILayerByDataSource();
        }
        if (layerObject) {
            yield layerObject.load();
        }
        return { defaultPopupTemplate: ((_a = layerObject === null || layerObject === void 0 ? void 0 : layerObject.associatedLayer) === null || _a === void 0 ? void 0 : _a.defaultPopupTemplate) || (layerObject === null || layerObject === void 0 ? void 0 : layerObject.defaultPopupTemplate) };
    });
}
function generateQueryParams(outputDS, sqlExpr, spatialFilter, queryItem, page, pageSize) {
    var _a, _b, _c;
    const currentQueryDsJson = outputDS.getDataSourceJson();
    const currentOriginDs = outputDS.getOriginDataSources()[0];
    const isLocalDs = currentQueryDsJson === null || currentQueryDsJson === void 0 ? void 0 : currentQueryDsJson.isDataInDataSourceInstance;
    if (isLocalDs) {
        outputDS.setSourceRecords(currentOriginDs.getSourceRecords());
    }
    const { useAttributeFilter, useSpatialFilter, sortOptions, resultFieldsType, resultDisplayFields, resultTitleExpression } = queryItem;
    let outputFields = resultDisplayFields;
    if (resultDisplayFields == null) {
        // return all fields by default
        const allFieldsSchema = outputDS.getSchema();
        outputFields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
    }
    const mergedQueryParams = outputDS.mergeQueryParams((_a = currentOriginDs.getCurrentQueryParams()) !== null && _a !== void 0 ? _a : {}, {
        where: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpr, outputDS).sql : '1=1',
        sqlExpression: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? sqlExpr : null
    });
    // compose query params for query
    const queryParams = Object.assign({ 
        // url: ds.url,
        returnGeometry: true, page,
        pageSize }, mergedQueryParams);
    if (useSpatialFilter && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.geometry)) {
        const { geometry, relation = _config__WEBPACK_IMPORTED_MODULE_1__.SpatialRelation.Intersect, buffer } = spatialFilter;
        const spatialQueryParams = {
            geometryType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(geometry.type),
            geometry: geometry.toJSON(),
            spatialRel: _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPISpatialRelToDsSpatialRel[relation],
            distance: buffer === null || buffer === void 0 ? void 0 : buffer.distance,
            units: (buffer === null || buffer === void 0 ? void 0 : buffer.unit) ? _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPIUnitToDsUnit[buffer.unit] : undefined
        };
        Object.assign(queryParams, spatialQueryParams);
    }
    if ((sortOptions === null || sortOptions === void 0 ? void 0 : sortOptions.length) > 0) {
        Object.assign(queryParams, {
            orderByFields: sortOptions.map(item => `${item.jimuFieldName} ${item.order}`)
        });
    }
    if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
        const fields = combineFields(outputFields, resultTitleExpression, outputDS.getIdField());
        Object.assign(queryParams, {
            outFields: fields
        });
    }
    else {
        // use popup setting
        const popupInfo = currentOriginDs.getPopupInfo();
        // popupInfo may have expressions in its fieldInfos
        const fieldNames = Object.values((_b = currentOriginDs.getSchema().fields) !== null && _b !== void 0 ? _b : {}).map(f => f.name);
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-boolean-literal-compare
        const validFieldInfos = (_c = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) === null || _c === void 0 ? void 0 : _c.filter(fieldInfo => fieldInfo.visible !== false && fieldNames.includes(fieldInfo.fieldName));
        Object.assign(queryParams, {
            outFields: validFieldInfos === null || validFieldInfos === void 0 ? void 0 : validFieldInfos.map(fieldInfo => fieldInfo.fieldName)
        });
    }
    return queryParams;
}
function executeCountQuery(widgetId, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield outputDS.loadCount(queryParams, { widgetId, refresh: true });
        return result != null ? result : 0;
    });
}
function executeQuery(widgetId, queryItem, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const popupInfo = outputDS.getPopupInfo();
        const layerDefinition = outputDS.getLayerDefinition();
        const getDefaultFieldInfos = () => {
            var _a;
            return [
                { fieldName: (_a = layerDefinition === null || layerDefinition === void 0 ? void 0 : layerDefinition.objectIdField) !== null && _a !== void 0 ? _a : 'objectid', label: 'OBJECTID', tooltip: '', visible: true }
            ];
        };
        const fieldInfos = ((fieldInfos) => (fieldInfos.length ? fieldInfos : getDefaultFieldInfos()))(((popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) || []).filter((i) => i.visible));
        // const fields = outputDS.getSchema()?.fields
        // let selectedFieldNames
        // if (queryItem.resultFieldsType === FieldsType.SelectAttributes) {
        //   selectedFieldNames = [].concat(queryItem.resultDisplayFields, queryItem.resultTitleFields)
        // } else {
        //   selectedFieldNames = fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        // }
        // const selectedFieldJimuNames = fields
        //   ? Object.keys(fields).filter((jimuName) => selectedFieldNames.includes(fields[jimuName].name))
        //   : []
        // outputDS.setSelectedFields(selectedFieldJimuNames)
        let records = yield outputDS.load(queryParams, { widgetId });
        if (records == null) {
            records = [];
        }
        const originDs = outputDS.getOriginDataSources()[0];
        const layerObject = yield getLayerObject(originDs);
        records.forEach((record) => {
            const feature = record.feature;
            if (layerObject) {
                feature.sourceLayer = layerObject.associatedLayer || layerObject;
            }
            feature.layer = feature.sourceLayer;
        });
        const queryResult = {
            records,
            fields: fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        };
        // publish message
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordSetChangeMessage(widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.RecordSetChangeType.CreateUpdate, [{
                records: outputDS.getAllLoadedRecords(),
                fields: queryResult.fields,
                dataSource: outputDS,
                name: outputDS.id,
                label: outputDS.getLabel()
            }]);
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        return queryResult;
    });
}
function getLayerObject(dataSource) {
    return __awaiter(this, void 0, void 0, function* () {
        const layerObject = yield dataSource.createJSAPILayerByDataSource();
        // layerObject may be undefined if the data source is added by URL
        if (layerObject) {
            yield layerObject.load();
        }
        return layerObject;
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearSelectionInDataSources: () => (/* binding */ clearSelectionInDataSources),
/* harmony export */   findClearResultsButton: () => (/* binding */ findClearResultsButton),
/* harmony export */   getOriginDataSource: () => (/* binding */ getOriginDataSource),
/* harmony export */   publishSelectionMessage: () => (/* binding */ publishSelectionMessage),
/* harmony export */   selectRecordsAndPublish: () => (/* binding */ selectRecordsAndPublish),
/* harmony export */   selectRecordsInDataSources: () => (/* binding */ selectRecordsInDataSources)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/**
 * Utility functions for managing feature selection in QuerySimple widget.
 * Consolidates repeated selection logic to follow DRY principles.
 */

/**
 * Gets the origin data source from an output data source.
 * @param outputDS - The output data source
 * @returns The origin data source, or null if not available
 */
function getOriginDataSource(outputDS) {
    if (!outputDS)
        return null;
    const originDataSources = outputDS.getOriginDataSources();
    return (originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0]) || null;
}
/**
 * Selects records in both the origin data source and output data source.
 * This is the standard pattern used throughout the widget for selection.
 *
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Optional array of FeatureDataRecord objects for proper highlighting
 */
function selectRecordsInDataSources(outputDS, recordIds, records) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    // Select in origin data source (the actual layer)
    if (originDS && typeof originDS.selectRecordsByIds === 'function') {
        originDS.selectRecordsByIds(recordIds, records);
    }
    // Also select in outputDS for widget's internal state
    if (typeof outputDS.selectRecordsByIds === 'function') {
        outputDS.selectRecordsByIds(recordIds, records);
    }
}
/**
 * Clears selection in both the origin data source and output data source.
 *
 * @param outputDS - The output data source
 */
function clearSelectionInDataSources(outputDS) {
    selectRecordsInDataSources(outputDS, []);
}
/**
 * Publishes a selection change message for the given records and data sources.
 *
 * @param widgetId - The widget ID
 * @param records - Array of FeatureDataRecord objects (empty array to clear)
 * @param outputDS - The output data source
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS = false) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    if (originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [originDS.id]));
    }
    else if (alsoPublishToOutputDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
    // Optionally publish to outputDS as well (for some edge cases)
    if (alsoPublishToOutputDS && originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
}
/**
 * Selects records and publishes the selection message in one call.
 * This is the most common pattern - selecting records and notifying the map.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Array of FeatureDataRecord objects for proper highlighting
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function selectRecordsAndPublish(widgetId, outputDS, recordIds, records, alsoPublishToOutputDS = false) {
    selectRecordsInDataSources(outputDS, recordIds, records);
    publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS);
}
/**
 * Finds the "Clear results" button in the DOM.
 * Used when programmatically triggering the clear action.
 *
 * @returns The clear button element, or null if not found
 */
function findClearResultsButton() {
    return document.querySelector('button[aria-label="Clear results"]');
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'QuerySimple',
    reset: 'Reset',
    searchLayer: 'Search Layer',
    apply: 'Search',
    noDataAvailable: 'Error in loading data',
    noQueryItem: 'No query',
    newQueryHint: 'Add content by clicking the "{label}" button on the configuration panel',
    attributeFilter: 'Attribute filter',
    spatialFilter: 'Spatial filter',
    spatialFilterType_CurrentMapExtent: 'Current map extent',
    spatialFilterType_InteractiveDrawMode: 'Drawn graphic',
    results: 'Results',
    featuresDisplayed: 'Features displayed',
    clearResult: 'Clear results',
    checkResult: 'Check results',
    mapMustBeVisible: 'Map must be visible',
    chooseFilterType: 'Choose the filter type',
    chooseGeometryType: 'Choose the geometry type',
    clearDrawing: 'Clear the graphic when applying',
    featureFromDs: 'Selecting features from data source',
    featureFromMap: 'Geometries from a map',
    chooseFilterLayer: 'Choose a filter layer',
    selectedRecords: '{num} records are selected for the filter',
    spatialNotAvailable: 'Spatial filter is not available here.',
    spatialNotAvailableDesc: 'Spatial filter is not supported for a data source that already contains a spatial query.',
    preconfigured: 'Preconfigured',
    runtime: 'Runtime',
    selectLoaded: 'Select loaded',
    retrieving: 'Retrieving query results...',
    zoomToSelected: 'Zoom to selected',
    queryTab: 'Query',
    resultsTab: 'Results',
    expandAll: 'Expand all',
    collapseAll: 'Collapse all',
    addToMap: 'Add to map'
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx":
/*!****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoHeight: () => (/* binding */ useAutoHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/** @jsx jsx */



function useAutoHeight() {
    const layoutInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_widget_context__WEBPACK_IMPORTED_MODULE_2__.QueryWidgetContext);
    let layoutId;
    let layoutItemId;
    if (layoutInfo.includes(':')) {
        const r = layoutInfo.split(':');
        layoutId = r[0];
        layoutItemId = r[1];
    }
    const isAuto = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c, _d;
        const layoutItem = (_b = (_a = state.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        return ((_d = (_c = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _c === void 0 ? void 0 : _c.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    });
    return isAuto;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-config.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getWidgetRuntimeDataMap: () => (/* binding */ getWidgetRuntimeDataMap)
/* harmony export */ });
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__);






const getWidgetRuntimeDataMap = () => ({
    iconMap: {
        iconQuery: __webpack_require__(/*! ../../icon.svg */ "./your-extensions/widgets/query-simple/icon.svg"),
        iconWarning: (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default()),
        iconError: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default()),
        arrowNavBack: (jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()),
        arrowRight: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        toolDelete: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        iconMore: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default())
    }
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryWidgetContext: () => (/* binding */ QueryWidgetContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryWidgetContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(null);


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.0.0',
                description: 'The first version.',
                upgrader: (oldConfig) => {
                    return oldConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version.ts":
/*!*************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WIDGET_VERSION: () => (/* binding */ WIDGET_VERSION)
/* harmony export */ });
/**
 * Widget version number.
 * Update this when releasing a new version of the widget.
 * This version is displayed in the widget footer for user reference.
 */
const WIDGET_VERSION = '1.19.0';


/***/ }),

/***/ "@emotion/react/jsx-runtime":
/*!************************************!*\
  !*** external "jimu-core/emotion" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "widgets/shared-code/common":
/*!*********************************************!*\
  !*** external "widgets/shared-code/common" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/query-simple/src/version-manager.ts");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_inline__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-list-inline */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/* harmony import */ var _debug_logger__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./debug-logger */ "./your-extensions/widgets/query-simple/src/runtime/debug-logger.ts");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */












const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.state = {};
        /**
         * Removes a hash parameter from the URL after it has been used to populate a query.
         * This prevents the parameter from being re-applied when switching between queries.
         */
        this.removeHashParameter = (shortId) => {
            var _a;
            const hash = window.location.hash.substring(1);
            if (!hash) {
                return;
            }
            const urlParams = new URLSearchParams(hash);
            if (urlParams.has(shortId)) {
                const value = urlParams.get(shortId);
                urlParams.delete(shortId);
                const newHash = urlParams.toString();
                // Update URL without triggering navigation
                // If no hash params remain, remove hash entirely, otherwise keep the hash
                const newUrl = newHash
                    ? `${window.location.pathname}${window.location.search}#${newHash}`
                    : `${window.location.pathname}${window.location.search}`;
                _debug_logger__WEBPACK_IMPORTED_MODULE_11__.debugLogger.log('HASH', {
                    event: 'hash-removed',
                    widgetId: this.props.id,
                    shortId: shortId,
                    value: value,
                    newHash: newHash,
                    newUrl: newUrl
                });
                window.history.replaceState(null, '', newUrl);
                // Clear the state so it won't trigger again
                if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                    this.setState({ initialQueryValue: undefined });
                }
            }
        };
        /**
         * Checks the URL hash parameters for any shortIds that match query items.
         * If found, stores the value to be used to auto-populate and execute the query.
         * Experience Builder uses hash-based URL parameters (e.g., #pin=2223059013).
         *
         * This method prioritizes the first matching shortId found in the query items order.
         * If multiple hash parameters exist, only the first match is used.
         */
        this.checkQueryStringForShortIds = () => {
            var _a, _b, _c, _d, _e;
            const { config } = this.props;
            if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
                return;
            }
            // Extract all shortIds from query items
            const shortIds = config.queryItems
                .map(item => item.shortId)
                .filter(shortId => shortId != null && shortId.trim() !== '');
            if (shortIds.length === 0) {
                return;
            }
            // Get URL hash fragment parameters (ExB uses # for params)
            const hash = window.location.hash.substring(1); // Remove the #
            const urlParams = new URLSearchParams(hash);
            // Log hash check for debugging
            _debug_logger__WEBPACK_IMPORTED_MODULE_11__.debugLogger.log('HASH', {
                event: 'hash-check',
                widgetId: this.props.id,
                hash: hash,
                availableShortIds: shortIds,
                currentState: this.state.initialQueryValue
            });
            // Find the first matching shortId (prioritize first match in query items order)
            // This ensures we only set state once per check and maintains consistent behavior
            for (const shortId of shortIds) {
                if (urlParams.has(shortId)) {
                    const value = urlParams.get(shortId);
                    // Only update if the value has changed to avoid unnecessary re-renders
                    if (((_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId) !== shortId || ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.value) !== value) {
                        _debug_logger__WEBPACK_IMPORTED_MODULE_11__.debugLogger.log('HASH', {
                            event: 'hash-detected',
                            widgetId: this.props.id,
                            shortId: shortId,
                            value: value,
                            previousShortId: (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.shortId,
                            previousValue: (_e = this.state.initialQueryValue) === null || _e === void 0 ? void 0 : _e.value
                        });
                        this.setState({ initialQueryValue: { shortId, value } });
                    }
                    else {
                        _debug_logger__WEBPACK_IMPORTED_MODULE_11__.debugLogger.log('HASH', {
                            event: 'hash-skipped',
                            widgetId: this.props.id,
                            shortId: shortId,
                            value: value,
                            reason: 'value-unchanged'
                        });
                    }
                    return; // Exit after first match
                }
            }
            // If no hash parameters match any shortId, clear the state
            // This handles cases where hash parameters were removed
            if (this.state.initialQueryValue) {
                _debug_logger__WEBPACK_IMPORTED_MODULE_11__.debugLogger.log('HASH', {
                    event: 'hash-cleared',
                    widgetId: this.props.id,
                    previousShortId: this.state.initialQueryValue.shortId,
                    previousValue: this.state.initialQueryValue.value,
                    reason: 'no-matching-hash-params'
                });
                this.setState({ initialQueryValue: undefined });
            }
        };
    }
    componentDidMount() {
        this.checkQueryStringForShortIds();
        // Listen for hash changes to detect when hash parameters are updated
        // This is needed when HelperSimple opens the widget with a hash parameter
        // or when hash parameters change while the widget is already mounted
        window.addEventListener('hashchange', this.checkQueryStringForShortIds);
        // Also check after a short delay to catch cases where hash was already present
        // when widget was opened (e.g., by HelperSimple opening the widget)
        setTimeout(() => {
            this.checkQueryStringForShortIds();
        }, 100);
    }
    componentWillUnmount() {
        // Clean up hashchange listener
        window.removeEventListener('hashchange', this.checkQueryStringForShortIds);
    }
    componentDidUpdate(prevProps) {
        if (prevProps.config.queryItems !== this.props.config.queryItems) {
            this.checkQueryStringForShortIds();
        }
    }
    render() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        const { config, id, icon, label, layoutId, layoutItemId, controllerWidgetId } = this.props;
        const widgetLabel = this.props.intl.formatMessage({
            id: '_widgetLabel',
            defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]._widgetLabel
        });
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, { icon: iconMap.iconQuery, widgetId: this.props.id, name: widgetLabel });
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Popper && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_10__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_9__.TaskListPopperWrapper, { id: 0, icon: icon, popperTitle: label, minSize: (_c = (_b = config.sizeMap) === null || _b === void 0 ? void 0 : _b.arrangementIconPopper) === null || _c === void 0 ? void 0 : _c.minSize, defaultSize: (_e = (_d = config.sizeMap) === null || _d === void 0 ? void 0 : _d.arrangementIconPopper) === null || _e === void 0 ? void 0 : _e.defaultSize, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_7__.QueryTaskList, { widgetId: id, isInPopper: true, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, className: 'pb-4', initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.removeHashParameter }) }) }));
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Inline && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_10__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_inline__WEBPACK_IMPORTED_MODULE_8__.TaskListInline, { widgetId: id, widgetLabel: label, wrap: config.arrangeWrap, queryItems: config.queryItems, minSize: (_g = (_f = config.sizeMap) === null || _f === void 0 ? void 0 : _f.arrangementIconPopper) === null || _g === void 0 ? void 0 : _g.minSize, defaultSize: (_j = (_h = config.sizeMap) === null || _h === void 0 ? void 0 : _h.arrangementIconPopper) === null || _j === void 0 ? void 0 : _j.defaultSize, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.removeHashParameter }) }));
        }
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Paper, { variant: 'flat', className: 'jimu-widget runtime-query', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
        display: flex;
        flex-direction: column;
        height: 100%;
      `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "widget-header", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px 16px;
          border-bottom: 1px solid var(--sys-color-divider-secondary);
          background-color: var(--sys-color-surface);
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "widget-title", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--sys-color-text-primary);
          `, children: label || widgetLabel }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            flex: 1;
            overflow: auto;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_10__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_7__.QueryTaskList, { widgetId: id, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.removeHashParameter }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 4px 12px;
            border-top: 1px solid var(--sys-color-divider-secondary);
            background-color: var(--sys-color-surface-paper);
            flex-shrink: 0;
            text-align: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              font-size: 0.75rem;
              color: var(--sys-color-text-tertiary);
              font-weight: 400;
              letter-spacing: 0.025em;
              display: inline-flex;
              align-items: center;
              gap: 4px;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex-shrink: 0;
                  opacity: 0.6;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple.org", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-left: 6px;
                opacity: 0.5;
                font-size: 0.7rem;
              `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_12__.WIDGET_VERSION] })] }) })] })] }));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_6__.versionManager;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9xdWVyeS1zaW1wbGUvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2QztBQUVVO0FBRWhELE1BQU0sVUFBVSxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQ3JELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLHlFQUFHLElBQU0sTUFBTSxFQUFJO0FBQzFELENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWDRDO0FBRVc7QUFFakQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxLQUF3QixFQUFFLEVBQUU7SUFDdEQsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUc7SUFDdEIsTUFBTSxFQUFFLFNBQVMsS0FBZ0IsS0FBSyxFQUFoQixNQUFNLFVBQUssS0FBSyxFQUFoQyxhQUF3QixDQUFRO0lBRXRDLE1BQU0sT0FBTyxHQUFHLHFEQUFVLENBQUMsK0JBQStCLEVBQUUsU0FBUyxDQUFDO0lBQ3RFLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTyx1RkFBSyxTQUFTLEVBQUUsT0FBTyxJQUFNLE1BQWEsRUFBSTtJQUMvRCxPQUFPLGdFQUFDLEdBQUcsa0JBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxH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SUFDQSxDQUNUO0lBQ0gsQ0FBQzs7QUFoUk0scUJBQWMsR0FBRyw0REFBYztpRUFEbkIsTUFBTTtBQXFSbkIsU0FBUywyQkFBMkIsQ0FBQyxHQUFHLElBQUkscUJBQXVCLEdBQUcsR0FBRyxFQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci9jbG9zZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mby50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vbW9yZS1ob3Jpem9udGFsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9jbG9zZS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvaWNvbi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvY29uZmlnLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2RhdGEtYWN0aW9ucy9hZGQtdG8tbWFwLWFjdGlvbi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGF0YS1hY3Rpb25zL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kZWZhdWx0LXF1ZXJ5LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYnVmZmVyLWlucHV0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2RlYnVnLWxvZ2dlci50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tZHJhdy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLWRzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tbWFwLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2ludGVyYWN0aXZlLWRyYXctdG9vbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9sYXp5LWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvbG9hZGluZy1yZXN1bHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcGFnaW5nLWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktcmVzdWx0LWl0ZW0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktcmVzdWx0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stY29udGV4dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWZvcm0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1sYWJlbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxpc3QtaW5saW5lLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC1wb3BwZXItd3JhcHBlci50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1zcGF0aWFsLWZvcm0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3NlbGVjdGlvbi11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3RyYW5zbGF0aW9ucy9kZWZhdWx0LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvdXNlQXV0b0hlaWdodC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS93aWRnZXQtY29uZmlnLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvd2lkZ2V0LWNvbnRleHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3ZlcnNpb24tbWFuYWdlci50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy92ZXJzaW9uLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlL2Vtb3Rpb25cIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtYXJjZ2lzXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS10aGVtZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS11aVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS11aS9iYXNpYy9zcWwtZXhwcmVzc2lvbi1ydW50aW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJ3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vblwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtY29yZS9saWIvc2V0LXB1YmxpYy1wYXRoLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvd2lkZ2V0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBEb3duRmlsbGVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgUmlnaHRGaWxsZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgQXJyb3dMZWZ0T3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBDb2xsYXBzZUFsbE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEV4cGFuZEFsbE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9jbG9zZS5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgQ2xvc2VPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFRyYXNoT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEluZm9PdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm0xNCA0LTYgOC02LTh6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTQgMiA4IDYtOCA2elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTIgN2ExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJtNSAxYTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMG02IDBhMSAxIDAgMSAxIDIgMCAxIDEgMCAwIDEtMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMTUgNy41YS41Mi41MiAwIDAgMS0uNTE2LjUyN0gyLjk3Nkw2LjQ3MyAxMS42YS41MzUuNTM1IDAgMCAxIDAgLjc0Ni41MS41MSAwIDAgMS0uNzMgMEwxIDcuNWw0Ljc0My00Ljg0NmEuNTEuNTEgMCAwIDEgLjczIDAgLjUzNS41MzUgMCAwIDEgMCAuNzQ2TDIuOTc2IDYuOTczaDExLjUwOGMuMjg1IDAgLjUxNi4yMzYuNTE2LjUyN1xcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTUuMDM2IDYuMTQ2YS41LjUgMCAwIDAtLjcwOCAwTDEuMTQ2IDkuMzI4YS41LjUgMCAxIDAgLjcwOC43MDhsMi4zMjgtMi4zMjlWMTQuNWgxVjcuNzA3bDIuMzI4IDIuMzI5YS41LjUgMCAxIDAgLjcwOC0uNzA4elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTQuMzI4IDE0LjM1NGEuNS41IDAgMCAwIC43MDggMGwzLjE4Mi0zLjE4MmEuNS41IDAgMSAwLS43MDgtLjcwOGwtMi4zMjggMi4zMjlWNmgtMXY2Ljc5M2wtMi4zMjgtMi4zMjhhLjUuNSAwIDEgMC0uNzA4LjcwN3pcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk00LjY1MyAxMy44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4TDEwLjI0IDggNC42NTMgMi44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4LjU0LjU0IDAgMCAxIC43MzggMGw1Ljk1NiA1LjVhLjQ4NS40ODUgMCAwIDEgMCAuNzA4bC01Ljk1NiA1LjVhLjU0LjU0IDAgMCAxLS43MzggMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTguNzQ1IDggNi4xIDYuMWEuNTI3LjUyNyAwIDEgMS0uNzQ1Ljc0Nkw4IDguNzQ2bC02LjEgNi4xYS41MjcuNTI3IDAgMSAxLS43NDYtLjc0Nmw2LjEtNi4xLTYuMS02LjFhLjUyNy41MjcgMCAwIDEgLjc0Ni0uNzQ2bDYuMSA2LjEgNi4xLTYuMWEuNTI3LjUyNyAwIDAgMSAuNzQ2Ljc0NnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNNiA2LjVhLjUuNSAwIDAgMSAxIDB2NmEuNS41IDAgMCAxLTEgMHpNOS41IDZhLjUuNSAwIDAgMC0uNS41djZhLjUuNSAwIDAgMCAxIDB2LTZhLjUuNSAwIDAgMC0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTExIDBINWExIDEgMCAwIDAtMSAxdjJILjVhLjUuNSAwIDAgMCAwIDFoMS42bC44MSAxMS4xYTEgMSAwIDAgMCAuOTk1LjloOC4xOWExIDEgMCAwIDAgLjk5NS0uOUwxMy45IDRoMS42YS41LjUgMCAwIDAgMC0xSDEyVjFhMSAxIDAgMCAwLTEtMW0wIDNWMUg1djJ6bTEuODk1IDFoLTkuNzlsLjggMTFoOC4xOXpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNE04IDRhLjkwNS45MDUgMCAwIDAtLjkuOTk1bC4zNSAzLjUwN2EuNTUyLjU1MiAwIDAgMCAxLjEgMGwuMzUtMy41MDdBLjkwNS45MDUgMCAwIDAgOCA0bTEgN2ExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk04IDUuNWExIDEgMCAxIDAgMC0yIDEgMSAwIDAgMCAwIDJNNi41IDcuNUEuNS41IDAgMCAxIDcgN2gxLjV2NC41aDFhLjUuNSAwIDAgMSAwIDFoLTNhLjUuNSAwIDAgMSAwLTFoMVY4SDdhLjUuNSAwIDAgMS0uNS0uNVxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMTZBOCA4IDAgMSAxIDggMGE4IDggMCAwIDEgMCAxNm0wLTFBNyA3IDAgMSAwIDggMWE3IDcgMCAwIDAgMCAxNFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNOCAyLjEyNSAxNC4zMzQgMTRIMS42Njd6bS0uODgyLS40N2ExIDEgMCAwIDEgMS43NjUgMGw2LjMzMyAxMS44NzRBMSAxIDAgMCAxIDE0LjMzNCAxNUgxLjY2N2ExIDEgMCAwIDEtLjg4Mi0xLjQ3ek04IDQuODc0YS45MDUuOTA1IDAgMCAwLS45Ljk5NWwuMzUgMy41MDdhLjU1Mi41NTIgMCAwIDAgMS4xIDBMOC45IDUuODdhLjkwNS45MDUgMCAwIDAtLjktLjk5NW0xIDdhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDIwIDIwXFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNOC41IDNBNS41IDUuNSAwIDAgMSAxNCA4LjVhNS41IDUuNSAwIDAgMS0xLjI3MyAzLjUyN2w0LjA1MyA0LjA1NGEuNzUuNzUgMCAxIDEtMS4wNiAxLjA2bC00LjA1NC00LjA1M2E1LjUgNS41IDAgMCAxLTMuNTI3IDEuMjczIDUuNSA1LjUgMCAxIDEgMC0xMUg4LjV6bTAgMS41aC0uMzYxYTQgNCAwIDEgMCAwIDggNCA0IDAgMCAwIDAtOHpcXFwiPjwvcGF0aD48cmVjdCB3aWR0aD1cXFwiMTlcXFwiIGhlaWdodD1cXFwiMTlcXFwiIHg9XFxcIi41XFxcIiB5PVxcXCIuNVxcXCIgc3Ryb2tlPVxcXCIjMDAwXFxcIiByeD1cXFwiMS41XFxcIj48L3JlY3Q+PC9zdmc+XCIiLCJpbXBvcnQgdHlwZSB7IFNwYXRpYWxSZWxhdGlvbnNoaXAsIFVuaXRzIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtZmVhdHVyZS1zZXJ2aWNlJ1xuaW1wb3J0IHR5cGUgeyBJbW11dGFibGVPYmplY3QsIEltbXV0YWJsZUFycmF5LCBTcWxFeHByZXNzaW9uLCBVc2VEYXRhU291cmNlLCBJY29uUmVzdWx0LCBPcmRlckJ5T3B0aW9uIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBTaXplIH0gZnJvbSAnamltdS11aSdcblxuZXhwb3J0IGVudW0gQ3JlYXRlVG9vbFR5cGUge1xuICBQb2ludCA9ICdQb2ludCcsXG4gIFBvbHlsaW5lID0gJ1BvbHlsaW5lJyxcbiAgUG9seWdvbiA9ICdQb2x5Z29uJyxcbiAgUmVjdGFuZ2xlID0gJ1JlY3RhbmdsZScsXG4gIENpcmNsZSA9ICdDaXJjbGUnXG59XG5cbmV4cG9ydCBlbnVtIFNlbGVjdGlvblR5cGUge1xuICBOZXdTZWxlY3Rpb24gPSAnTkVXX1NFTEVDVElPTicsXG4gIEFkZFRvU2VsZWN0aW9uID0gJ0FERF9UT19DVVJSRU5UX1NFTEVDVElPTicsXG4gIFJlbW92ZUZyb21TZWxlY3Rpb24gPSAnUkVNT1ZFX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTdWJzZXRTZWxlY3Rpb24gPSAnU1VCU0VUX0ZST01fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBTd2l0Y2hTZWxlY3Rpb24gPSAnU1dJVENIX0NVUlJFTlRfU0VMRUNUSU9OJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWVsZCB7XG4gIG5hbWU6IHN0cmluZ1xuICBhbGlhcz86IHN0cmluZ1xuICBsYWJlbD86IHN0cmluZ1xufVxuXG5leHBvcnQgZW51bSBRdWVyeUFycmFuZ2VUeXBlIHtcbiAgQmxvY2sgPSAnQkxPQ0snLFxuICBJbmxpbmUgPSAnSU5MSU5FJyxcbiAgUG9wcGVyID0gJ1BPUFBFUicsXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxGaWx0ZXJUeXBlIHtcbiAgQ3VycmVudE1hcEV4dGVudCA9ICdDdXJyZW50TWFwRXh0ZW50JyxcbiAgSW50ZXJhY3RpdmVEcmF3TW9kZSA9ICdJbnRlcmFjdGl2ZURyYXdNb2RlJyxcbiAgTm9uZSA9ICcnXG59XG5cbmV4cG9ydCBlbnVtIFNwYXRpYWxSZWxhdGlvbiB7XG4gIEludGVyc2VjdCA9ICdpbnRlcnNlY3RzJyxcbiAgQ29udGFpbiA9ICdjb250YWlucycsXG4gIENyb3NzID0gJ2Nyb3NzZXMnLFxuICBFbnZlbG9wZUludGVyc2VjdCA9ICdlbnZlbG9wZS1pbnRlcnNlY3RzJyxcbiAgSW5kZXhJbnRlcnNlY3QgPSAnaW5kZXgtaW50ZXJzZWN0cycsXG4gIE92ZXJsYXAgPSAnb3ZlcmxhcHMnLFxuICBUb3VjaCA9ICd0b3VjaGVzJyxcbiAgV2l0aGluID0gJ3dpdGhpbicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3BhdGlhbEZpbHRlck9iaiB7XG4gIGdlb21ldHJ5OiBhbnlcbiAgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljXG4gIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhblxuICByZWxhdGlvbj86IFNwYXRpYWxSZWxhdGlvblxuICBidWZmZXI/OiB7IGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlIH1cbn1cblxuZXhwb3J0IGNvbnN0IG1hcEpTQVBJU3BhdGlhbFJlbFRvRHNTcGF0aWFsUmVsOiB7IFtrZXk6IHN0cmluZ106IFNwYXRpYWxSZWxhdGlvbnNoaXAgfSA9IHtcbiAgW1NwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5Db250YWluXTogJ2VzcmlTcGF0aWFsUmVsQ29udGFpbnMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkNyb3NzXTogJ2VzcmlTcGF0aWFsUmVsQ3Jvc3NlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uRW52ZWxvcGVJbnRlcnNlY3RdOiAnZXNyaVNwYXRpYWxSZWxFbnZlbG9wZUludGVyc2VjdHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkluZGV4SW50ZXJzZWN0XTogJ2VzcmlTcGF0aWFsUmVsSW5kZXhJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5PdmVybGFwXTogJ2VzcmlTcGF0aWFsUmVsT3ZlcmxhcHMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLlRvdWNoXTogJ2VzcmlTcGF0aWFsUmVsVG91Y2hlcycsXG4gIFtTcGF0aWFsUmVsYXRpb24uV2l0aGluXTogJ2VzcmlTcGF0aWFsUmVsV2l0aGluJ1xufVxuXG5leHBvcnQgZW51bSBVbml0VHlwZSB7XG4gIE1pbGVzID0gJ01pbGVzJyxcbiAgS2lsb21ldGVycyA9ICdLaWxvbWV0ZXJzJyxcbiAgRmVldCA9ICdGZWV0JyxcbiAgTWV0ZXJzID0gJ01ldGVycycsXG4gIE5hdXRpY2FsTWlsZXMgPSAnTmF1dGljYWxNaWxlcycsXG59XG5cbmV4cG9ydCBjb25zdCBtYXBKU0FQSVVuaXRUb0RzVW5pdDogeyBba2V5OiBzdHJpbmddOiBVbml0cyB9ID0ge1xuICBbVW5pdFR5cGUuTWlsZXNdOiAnZXNyaVNSVW5pdF9TdGF0dXRlTWlsZScsXG4gIFtVbml0VHlwZS5LaWxvbWV0ZXJzXTogJ2VzcmlTUlVuaXRfS2lsb21ldGVyJyxcbiAgW1VuaXRUeXBlLkZlZXRdOiAnZXNyaVNSVW5pdF9Gb290JyxcbiAgW1VuaXRUeXBlLk1ldGVyc106ICdlc3JpU1JVbml0X01ldGVyJyxcbiAgW1VuaXRUeXBlLk5hdXRpY2FsTWlsZXNdOiAnZXNyaVNSVW5pdF9OYXV0aWNhbE1pbGUnXG59XG5cbmV4cG9ydCBlbnVtIExpc3REaXJlY3Rpb24ge1xuICBIb3Jpem9udGFsID0gJ0hvcml6b250YWwnLFxuICBWZXJ0aWNhbCA9ICdWZXJ0aWNhbCcsXG59XG5cbmV4cG9ydCBlbnVtIFBhZ2luZ1R5cGUge1xuICBNdWx0aVBhZ2UgPSAnTXVsdGlQYWdlJyxcbiAgTGF6eUxvYWQgPSAnTGF6eUxvYWQnLFxufVxuXG5leHBvcnQgZW51bSBGaWVsZHNUeXBlIHtcbiAgUG9wdXBTZXR0aW5nID0gJ1BvcHVwU2V0dGluZycsXG4gIFNlbGVjdEF0dHJpYnV0ZXMgPSAnU2VsZWN0QXR0cmlidXRlcycsXG59XG5cbmV4cG9ydCBlbnVtIFNvcnREaXJlY3Rpb24ge1xuICBBc2MgPSAnQXNjJyxcbiAgRGVzYyA9ICdEZXNjJyxcbn1cblxuZXhwb3J0IGVudW0gUmVzdWx0U2VsZWN0TW9kZSB7XG4gIFNpbmdsZSA9ICdTaW5nbGUnLFxuICBNdWx0aXBsZSA9ICdNdWx0aXBsZScsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU29ydE9wdGlvbiB7XG4gIG5hbWU6IHN0cmluZ1xuICBkaXJlY3Rpb246IFNvcnREaXJlY3Rpb25cbn1cblxuZXhwb3J0IGVudW0gU3ltYm9sVHlwZSB7XG4gIERlZmF1bHRTeW1ib2wgPSAnRGVmYXVsdFN5bWJvbCcsXG4gIEN1c3RvbVN5bWJvbCA9ICdDdXN0b21TeW1ib2wnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5SXRlbVR5cGUge1xuICBjb25maWdJZDogc3RyaW5nXG4gIGljb24/OiBJY29uUmVzdWx0XG4gIG5hbWU/OiBzdHJpbmdcbiAgZGlzcGxheUxhYmVsPzogYm9vbGVhblxuICB1c2VEYXRhU291cmNlPzogVXNlRGF0YVNvdXJjZVxuICBvdXRwdXREYXRhU291cmNlSWQ/OiBzdHJpbmdcbiAgdXNlQXR0cmlidXRlRmlsdGVyPzogYm9vbGVhblxuICB1c2VTcGF0aWFsRmlsdGVyPzogYm9vbGVhblxuICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbD86IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyTGFiZWw/OiBzdHJpbmdcbiAgYXR0cmlidXRlRmlsdGVyRGVzYz86IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyRGVzYz86IHN0cmluZ1xuICByZXN1bHRzTGFiZWw/OiBzdHJpbmdcbiAgc3FsRXhwck9iaj86IFNxbEV4cHJlc3Npb25cbiAgc3BhdGlhbE1hcFdpZGdldElkcz86IHN0cmluZ1tdXG4gIHNwYXRpYWxGaWx0ZXJUeXBlcz86IFNwYXRpYWxGaWx0ZXJUeXBlW11cbiAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzPzogQ3JlYXRlVG9vbFR5cGVbXVxuICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXI/OiBib29sZWFuXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlPzogbnVtYmVyXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXQ/OiBVbml0VHlwZVxuICBzcGF0aWFsUmVsYXRpb25zPzogU3BhdGlhbFJlbGF0aW9uW11cbiAgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM/OiBVc2VEYXRhU291cmNlW11cbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlU2VsZWN0VG9vbD86IGJvb2xlYW5cbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyPzogYm9vbGVhblxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZT86IG51bWJlclxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJVbml0PzogVW5pdFR5cGVcbiAgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YT86IGJvb2xlYW5cbiAgcmVzdWx0TGlzdERpcmVjdGlvbj86IExpc3REaXJlY3Rpb25cbiAgcmVzdWx0UGFnaW5nU3R5bGU/OiBQYWdpbmdUeXBlXG4gIHJlc3VsdEZpZWxkc1R5cGU/OiBGaWVsZHNUeXBlXG4gIHJlc3VsdFRpdGxlRmllbGRzPzogc3RyaW5nW11cbiAgcmVzdWx0VGl0bGVFeHByZXNzaW9uPzogc3RyaW5nXG4gIHJlc3VsdERpc3BsYXlGaWVsZHM/OiBzdHJpbmdbXVxuICByZXN1bHRTeW1ib2xUeXBlPzogU3ltYm9sVHlwZVxuICByZXN1bHRDdXN0b21TeW1ib2w/OiBhbnlcbiAgcmVzdWx0QWxsb3dDaGFuZ2VTeW1ib2w/OiBib29sZWFuXG4gIHJlc3VsdEV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbiAgcmVzdWx0U2VsZWN0TW9kZT86IFJlc3VsdFNlbGVjdE1vZGVcbiAgYWxsb3dFeHBvcnQ/OiBib29sZWFuXG4gIHNvcnRPcHRpb25zPzogT3JkZXJCeU9wdGlvbltdXG4gIGl0ZW1TaXplTWFwPzoge1xuICAgIGFycmFuZ2VtZW50SG9yaXpvbnRhbFBvcHBlcj86IFNpemVNYXBcbiAgfVxuICAvLyBHcm91cGluZyBmaWVsZHNcbiAgZ3JvdXBJZD86IHN0cmluZ1xuICBncm91cERpc3BsYXlOYW1lPzogc3RyaW5nXG4gIHNlYXJjaEFsaWFzPzogc3RyaW5nXG4gIHNob3J0SWQ/OiBzdHJpbmdcbiAgem9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2l6ZU1hcCB7XG4gIG1pblNpemU/OiBTaXplXG4gIGRlZmF1bHRTaXplPzogU2l6ZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdDb25maWcge1xuICBxdWVyeUl0ZW1zPzogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgYXJyYW5nZVR5cGU6IFF1ZXJ5QXJyYW5nZVR5cGVcbiAgYXJyYW5nZVdyYXA/OiBib29sZWFuXG4gIHJlc3VsdExpc3REaXJlY3Rpb24/OiBMaXN0RGlyZWN0aW9uXG4gIHJlc3VsdFBhZ2luZ1N0eWxlPzogUGFnaW5nVHlwZVxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgbGF6eUxvYWRJbml0aWFsUGFnZVNpemU/OiBudW1iZXJcbiAgc2l6ZU1hcD86IHtcbiAgICBhcnJhbmdlbWVudEljb25Qb3BwZXI/OiBTaXplTWFwXG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgSU1Db25maWcgPSBJbW11dGFibGVPYmplY3Q8U2V0dGluZ0NvbmZpZz5cblxuXG4iLCIvKipcbiAqIEN1c3RvbSBcIkFkZCB0byBNYXBcIiBkYXRhIGFjdGlvbiBmb3IgUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogXG4gKiBUaGlzIGFjdGlvbiByZXBsYWNlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiB3aXRoIGEgY3VzdG9tXG4gKiBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2VzcyAoc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2gpLlxuICogVGhpcyBlbnN1cmVzIGNvbnNpc3RlbnQgYmVoYXZpb3Igd2l0aCBxdWVyeSByZXN1bHRzIGFuZCBwcm9wZXIgaW50ZWdyYXRpb25cbiAqIHdpdGggdGhlIHdpZGdldCdzIFwiQ2xlYXIgcmVzdWx0c1wiIGZ1bmN0aW9uYWxpdHkuXG4gKi9cblxuaW1wb3J0IHsgdHlwZSBEYXRhUmVjb3JkU2V0LCB0eXBlIERhdGFBY3Rpb24sIERhdGFMZXZlbCwgdHlwZSBJbnRsU2hhcGUsIERhdGFBY3Rpb25NYW5hZ2VyLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB9IGZyb20gJy4uL3J1bnRpbWUvc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgZGVidWdMb2dnZXIgfSBmcm9tICcuLi9ydW50aW1lL2RlYnVnLWxvZ2dlcidcbmltcG9ydCB0eXBlIHsgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5cbi8qKlxuICogQ3JlYXRlcyBhIGN1c3RvbSBcIkFkZCB0byBNYXBcIiBkYXRhIGFjdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy5cbiAqIFxuICogVGhpcyBhY3Rpb24gcmVwbGFjZXMgdGhlIGZyYW1ld29yaydzIFwiU2hvdyBvbiBNYXBcIiBhY3Rpb24gYW5kIGVuc3VyZXMgY29uc2lzdGVudFxuICogYmVoYXZpb3Igd2l0aCBRdWVyeVNpbXBsZSdzIHF1ZXJ5IHJlc3VsdHMgYnkgdXNpbmcgdGhlIHNhbWUgc2VsZWN0aW9uIG1lY2hhbmlzbS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRCB0aGF0IHByb3ZpZGVzIHRoaXMgYWN0aW9uXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBzZWxlY3Rpb24gb24gdGhlIG9yaWdpbiBsYXllcilcbiAqIEBwYXJhbSBpbnRsIC0gVGhlIEludGwgb2JqZWN0IGZvciBpbnRlcm5hdGlvbmFsaXphdGlvblxuICogQHBhcmFtIHF1ZXJ5SXRlbSAtIE9wdGlvbmFsIHF1ZXJ5IGl0ZW0gY29uZmlndXJhdGlvbiAoZm9yIHpvb21Ub1NlbGVjdGVkIHNldHRpbmcpXG4gKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSB6b29tIG92ZXJyaWRlIGZyb20gdGhlIHF1ZXJ5IGZvcm1cbiAqIEByZXR1cm5zIEEgRGF0YUFjdGlvbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBieSBEYXRhQWN0aW9uTGlzdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWRkVG9NYXBBY3Rpb24oXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlLFxuICBpbnRsOiBJbnRsU2hhcGUsXG4gIHF1ZXJ5SXRlbT86IFF1ZXJ5SXRlbVR5cGUsXG4gIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbik6IERhdGFBY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIGlkOiBgJHt3aWRnZXRJZH0tYWRkVG9NYXBgLFxuICAgIG5hbWU6ICdhZGRUb01hcCcsXG4gICAgbGFiZWw6IGludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnYWRkVG9NYXAnLCBkZWZhdWx0TWVzc2FnZTogJ0FkZCB0byBtYXAnIH0pLFxuICAgIC8vIEljb24gbWF0Y2hlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiBmb3IgY29uc2lzdGVuY3lcbiAgICBpY29uOiByZXF1aXJlKCcuLi9ydW50aW1lL2Fzc2V0cy9pY29ucy9zaG93LW9uLW1hcC5zdmcnKS5kZWZhdWx0IHx8IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZycpLFxuICAgIC8vIE5vdGU6IEluZGV4IG1heSBub3QgY29udHJvbCBwb3NpdGlvbiBpZiBleHRyYUFjdGlvbnMgYXJlIGFsd2F5cyBhcHBlbmRlZCBhZnRlciBmcmFtZXdvcmsgYWN0aW9uc1xuICAgIGluZGV4OiAtMTAwLFxuICAgIHdpZGdldElkLFxuICAgIGludGwsXG4gICAgc3VwcG9ydFByb3ZpZGVyV2lkZ2V0OiB0cnVlLFxuICAgIFxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhpcyBhY3Rpb24gY2FuIHByb2Nlc3MgdGhlIGdpdmVuIGRhdGEgc2V0cy5cbiAgICAgKiBTdXBwb3J0cyBSZWNvcmRzIGxldmVsIGFjdGlvbnMgd2l0aCBmZWF0dXJlIGRhdGEgcmVjb3Jkcy5cbiAgICAgKi9cbiAgICBpc1N1cHBvcnRlZDogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBhY3Rpb25XaWRnZXRJZCxcbiAgICAgICAgZGF0YUxldmVsLFxuICAgICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBPbmx5IHN1cHBvcnQgUmVjb3JkcyBsZXZlbCBhY3Rpb25zXG4gICAgICBpZiAoZGF0YUxldmVsICE9PSBEYXRhTGV2ZWwuUmVjb3Jkcykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vdCBSZWNvcmRzIGxldmVsJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTmVlZCBhdCBsZWFzdCBvbmUgZGF0YSBzZXQgd2l0aCByZWNvcmRzXG4gICAgICBpZiAoIWRhdGFTZXRzIHx8IGRhdGFTZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vIGRhdGEgc2V0cydcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgcmVjb3JkcyBhbmQgb3V0cHV0IGRhdGEgc291cmNlXG4gICAgICBjb25zdCBoYXNSZWNvcmRzID0gZGF0YVNldHMuc29tZShkcyA9PiBkcy5yZWNvcmRzICYmIGRzLnJlY29yZHMubGVuZ3RoID4gMClcbiAgICAgIGNvbnN0IHN1cHBvcnRlZCA9IGhhc1JlY29yZHMgJiYgISFvdXRwdXREU1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgIHJlc3VsdDogc3VwcG9ydGVkLFxuICAgICAgICBoYXNSZWNvcmRzLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRhdGFTZXRzLnJlZHVjZSgoc3VtLCBkcykgPT4gc3VtICsgKGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwKSwgMClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVybiBzdXBwb3J0ZWRcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBhY3Rpb24gYnkgc2VsZWN0aW5nIHJlY29yZHMgdXNpbmcgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy5cbiAgICAgKi9cbiAgICBvbkV4ZWN1dGU6IGFzeW5jIChkYXRhU2V0czogRGF0YVJlY29yZFNldFtdLCBkYXRhTGV2ZWw6IERhdGFMZXZlbCwgYWN0aW9uV2lkZ2V0SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGFjdGlvbldpZGdldElkLFxuICAgICAgICBkYXRhTGV2ZWwsXG4gICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFNcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmICghb3V0cHV0RFMgfHwgZGF0YUxldmVsICE9PSBEYXRhTGV2ZWwuUmVjb3Jkcykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICFvdXRwdXREUyA/ICdObyBvdXRwdXREUycgOiAnTm90IFJlY29yZHMgbGV2ZWwnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDb2xsZWN0IGFsbCByZWNvcmRzIGZyb20gYWxsIGRhdGEgc2V0c1xuICAgICAgY29uc3QgYWxsUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gICAgICBkYXRhU2V0cy5mb3JFYWNoKGRhdGFTZXQgPT4ge1xuICAgICAgICBpZiAoZGF0YVNldC5yZWNvcmRzICYmIGRhdGFTZXQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gRmlsdGVyIHRvIG9ubHkgRmVhdHVyZURhdGFSZWNvcmQgdHlwZXNcbiAgICAgICAgICBjb25zdCBmZWF0dXJlUmVjb3JkcyA9IGRhdGFTZXQucmVjb3Jkcy5maWx0ZXIoXG4gICAgICAgICAgICAocmVjb3JkKTogcmVjb3JkIGlzIEZlYXR1cmVEYXRhUmVjb3JkID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlY29yZCAmJiB0eXBlb2YgKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZCkuZ2V0R2VvbWV0cnkgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApXG4gICAgICAgICAgYWxsUmVjb3Jkcy5wdXNoKC4uLmZlYXR1cmVSZWNvcmRzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoYWxsUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZmVhdHVyZSByZWNvcmRzIGZvdW5kJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gR2V0IHJlY29yZCBJRHNcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IGFsbFJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiBhbGxSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVjb3JkSWRzOiByZWNvcmRJZHMuc2xpY2UoMCwgMTApLCAvLyBMb2cgZmlyc3QgMTAgSURzXG4gICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVc2UgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2VzcyAtIHNlbGVjdHMgb24gb3JpZ2luIGxheWVyIGFuZCBwdWJsaXNoZXMgc2VsZWN0aW9uIG1lc3NhZ2VzXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgY29uc2lzdGVudCBiZWhhdmlvciB3aXRoIHF1ZXJ5IHJlc3VsdHMgYW5kIHByb3BlciBpbnRlZ3JhdGlvbiB3aXRoIFwiQ2xlYXIgcmVzdWx0c1wiXG4gICAgICB0cnkge1xuICAgICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCh3aWRnZXRJZCwgb3V0cHV0RFMsIHJlY29yZElkcywgYWxsUmVjb3JkcywgdHJ1ZSlcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluZSB6b29tIGJlaGF2aW9yOiBydW50aW1lIG92ZXJyaWRlIHRha2VzIHByZWNlZGVuY2UsIHRoZW4gcXVlcnlJdGVtIGNvbmZpZywgZGVmYXVsdHMgdG8gdHJ1ZVxuICAgICAgICBjb25zdCBzaG91bGRab29tID0gcnVudGltZVpvb21Ub1NlbGVjdGVkICE9PSB1bmRlZmluZWQgXG4gICAgICAgICAgPyBydW50aW1lWm9vbVRvU2VsZWN0ZWQgXG4gICAgICAgICAgOiAocXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCAhPT0gZmFsc2UpXG4gICAgICAgIFxuICAgICAgICBpZiAoc2hvdWxkWm9vbSAmJiBhbGxSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCB6b29tRGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgICAgICAgcmVjb3JkczogYWxsUmVjb3JkcyxcbiAgICAgICAgICAgIG5hbWU6IG91dHB1dERTLmdldExhYmVsKClcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmluZCBhbmQgZXhlY3V0ZSB0aGUgem9vbVRvRmVhdHVyZSBhY3Rpb24gZnJvbSBhdmFpbGFibGUgZnJhbWV3b3JrIGFjdGlvbnNcbiAgICAgICAgICBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN1cHBvcnRlZEFjdGlvbnMod2lkZ2V0SWQsIFt6b29tRGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzKVxuICAgICAgICAgICAgLnRoZW4oYWN0aW9uQ2F0ZWdvcmllcyA9PiB7XG4gICAgICAgICAgICAgIC8vIFNlYXJjaCB0aHJvdWdoIGFsbCBhY3Rpb24gY2F0ZWdvcmllcyB0byBmaW5kIHpvb21Ub0ZlYXR1cmUgYWN0aW9uXG4gICAgICAgICAgICAgIGxldCB6b29tQWN0aW9uOiBEYXRhQWN0aW9uIHwgbnVsbCA9IG51bGxcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBpbiBhY3Rpb25DYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9ucyA9IGFjdGlvbkNhdGVnb3JpZXNbY2F0ZWdvcnldXG4gICAgICAgICAgICAgICAgem9vbUFjdGlvbiA9IGFjdGlvbnMuZmluZCgoYWN0aW9uOiBEYXRhQWN0aW9uKSA9PiBcbiAgICAgICAgICAgICAgICAgIGFjdGlvbi5uYW1lID09PSAnem9vbVRvRmVhdHVyZScgfHwgYWN0aW9uLmlkID09PSAnem9vbVRvRmVhdHVyZSdcbiAgICAgICAgICAgICAgICApIHx8IG51bGxcbiAgICAgICAgICAgICAgICBpZiAoem9vbUFjdGlvbikgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKHpvb21BY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YUFjdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5leGVjdXRlRGF0YUFjdGlvbih6b29tQWN0aW9uLCBbem9vbURhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3Jkcywgd2lkZ2V0SWQpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZS16b29tJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgc2VsZWN0ZWQgcmVjb3JkcyBhbmQgcHVibGlzaGVkIHNlbGVjdGlvbiBtZXNzYWdlJyxcbiAgICAgICAgICB6b29tRXhlY3V0ZWQ6IHNob3VsZFpvb21cbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICB9KVxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleGVjdXRpbmcgQWRkIHRvIE1hcCBhY3Rpb246JywgZXJyb3IpXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogQ2xlYW51cCBtZXRob2QgKHJlcXVpcmVkIGJ5IERhdGFBY3Rpb24gaW50ZXJmYWNlKVxuICAgICAqL1xuICAgIGRlc3Ryb3k6ICgpOiB2b2lkID0+IHtcbiAgICAgIC8vIE5vIGNsZWFudXAgbmVlZGVkXG4gICAgfVxuICB9XG59XG5cbiIsImltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgRGF0YVNvdXJjZSwgdHlwZSBJbnRsU2hhcGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBjcmVhdGVBZGRUb01hcEFjdGlvbiB9IGZyb20gJy4vYWRkLXRvLW1hcC1hY3Rpb24nXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5cbi8qKlxuICogUXVlcnlTaW1wbGUgQ3VzdG9tIERhdGEgQWN0aW9uc1xuICogXG4gKiBSZXR1cm5zIGN1c3RvbSBkYXRhIGFjdGlvbnMgZm9yIHRoZSB3aWRnZXQuXG4gKiBJbmNsdWRlcyBhIGN1c3RvbSBcIkFkZCB0byBNYXBcIiBhY3Rpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKG51bGwvdW5kZWZpbmVkIGlmIG5vdCBhdmFpbGFibGUpXG4gKiBAcGFyYW0gaW50bCAtIFRoZSBJbnRsIG9iamVjdCBmb3IgaW50ZXJuYXRpb25hbGl6YXRpb25cbiAqIEBwYXJhbSBxdWVyeUl0ZW0gLSBPcHRpb25hbCBxdWVyeSBpdGVtIGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIHpvb20gb3ZlcnJpZGUgZnJvbSB0aGUgcXVlcnkgZm9ybVxuICogQHJldHVybnMgQXJyYXkgb2YgY3VzdG9tIERhdGFBY3Rpb24gb2JqZWN0cyAoZW1wdHkgaWYgY29uZGl0aW9ucyBub3QgbWV0KVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXh0cmFBY3Rpb25zIChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBpbnRsOiBJbnRsU2hhcGUsXG4gIHF1ZXJ5SXRlbT86IFF1ZXJ5SXRlbVR5cGUsXG4gIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbik6IERhdGFBY3Rpb25bXSB7XG4gIC8vIE9ubHkgY3JlYXRlIHRoZSBhY3Rpb24gaWYgd2UgaGF2ZSBib3RoIGFuIG91dHB1dCBkYXRhIHNvdXJjZSBhbmQgaW50bCBvYmplY3RcbiAgaWYgKG91dHB1dERTICYmIGludGwpIHtcbiAgICByZXR1cm4gW2NyZWF0ZUFkZFRvTWFwQWN0aW9uKHdpZGdldElkLCBvdXRwdXREUywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXVxuICB9XG4gIFxuICByZXR1cm4gW11cbn1cblxuIiwiaW1wb3J0IHtcbiAgdHlwZSBRdWVyeUl0ZW1UeXBlLFxuICBDcmVhdGVUb29sVHlwZSxcbiAgVW5pdFR5cGUsXG4gIFNwYXRpYWxSZWxhdGlvbixcbiAgTGlzdERpcmVjdGlvbixcbiAgUGFnaW5nVHlwZSxcbiAgRmllbGRzVHlwZSxcbiAgU3ltYm9sVHlwZVxufSBmcm9tICcuL2NvbmZpZydcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfUVVFUllfSVRFTTogUGFydGlhbDxRdWVyeUl0ZW1UeXBlPiA9IHtcbiAgaWNvbjogbnVsbCxcbiAgZGlzcGxheUxhYmVsOiB0cnVlLFxuICBzcWxFeHByT2JqOiBudWxsLFxuICB1c2VBdHRyaWJ1dGVGaWx0ZXI6IHRydWUsXG4gIHVzZVNwYXRpYWxGaWx0ZXI6IHRydWUsXG4gIHNwYXRpYWxNYXBXaWRnZXRJZHM6IFtdLFxuICBzcGF0aWFsRmlsdGVyVHlwZXM6IFtdLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXM6IFtcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2ludCxcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2x5bGluZSxcbiAgICBDcmVhdGVUb29sVHlwZS5Qb2x5Z29uLFxuICAgIENyZWF0ZVRvb2xUeXBlLlJlY3RhbmdsZSxcbiAgICBDcmVhdGVUb29sVHlwZS5DaXJjbGVcbiAgXSxcbiAgc3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyOiBmYWxzZSxcbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2U6IDAsXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXQ6IFVuaXRUeXBlLk1ldGVycyxcbiAgc3BhdGlhbFJlbGF0aW9uczogW1NwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RdLFxuICBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlczogW10sXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZVNlbGVjdFRvb2w6IGZhbHNlLFxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXI6IGZhbHNlLFxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZTogMCxcbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdDogVW5pdFR5cGUuTWV0ZXJzLFxuICByZXN1bHRMaXN0RGlyZWN0aW9uOiBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsLFxuICByZXN1bHRQYWdpbmdTdHlsZTogUGFnaW5nVHlwZS5NdWx0aVBhZ2UsXG4gIHJlc3VsdEZpZWxkc1R5cGU6IEZpZWxkc1R5cGUuUG9wdXBTZXR0aW5nLFxuICByZXN1bHRTeW1ib2xUeXBlOiBTeW1ib2xUeXBlLkRlZmF1bHRTeW1ib2wsXG4gIHJlc3VsdEN1c3RvbVN5bWJvbDoge1xuICAgIGFuZ2xlOiAwLFxuICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICBvdXRsaW5lOiB7XG4gICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICBzdHlsZTogJ2VzcmlTTFNTb2xpZCcsXG4gICAgICB0eXBlOiAnZXNyaVNMUycsXG4gICAgICB3aWR0aDogMVxuICAgIH0sXG4gICAgc2l6ZTogNixcbiAgICBzdHlsZTogJ2VzcmlTTVNDaXJjbGUnLFxuICAgIHR5cGU6ICdlc3JpU01TJyxcbiAgICB4b2Zmc2V0OiAwLFxuICAgIHlvZmZzZXQ6IDBcbiAgfSxcbiAgcmVzdWx0QWxsb3dDaGFuZ2VTeW1ib2w6IGZhbHNlLFxuICBhbGxvd0V4cG9ydDogZmFsc2UsXG4gIHNvcnRPcHRpb25zOiBbXSxcbiAgem9vbVRvU2VsZWN0ZWQ6IHRydWUsXG4gIGl0ZW1TaXplTWFwOiB7XG4gICAgYXJyYW5nZW1lbnRIb3Jpem9udGFsUG9wcGVyOiB7XG4gICAgICBtaW5TaXplOiB7IHdpZHRoOiAzMDAsIGhlaWdodDogMzAwIH0sXG4gICAgICBkZWZhdWx0U2l6ZTogeyB3aWR0aDogMzYwLCBoZWlnaHQ6IDQ4MCB9XG4gICAgfVxuICB9XG59XG5cblxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDF2MTRoMTRWMXptOS4wODIgMTNjLS4wMDUtLjAzNy0uMTEzLS4yNzQtLjEyMi0uMzA5YTEuNSAxLjUgMCAwIDAgLjcxOC0xLjI2NyAxLjIgMS4yIDAgMCAwLS4wNTMtLjM1OGMuMTUyLS4xNzYuMjYzLS4zODMuMzI2LS42MDdxLjA0Ni4wMDMuMDkzLjAwM2MuMy4wMDIuNTkzLS4wOTEuODM2LS4yNjZxLjA2LjA2Ni4xMjYuMTI0Yy40Mi40MTIuOTc3LjY1NCAxLjU2NC42OEgxNHYyaC0zLjkxOE0xNCAxMWgtLjQzYTEuNDYgMS40NiAwIDAgMS0uOTA2LS40MzNjLS4yNjQtLjIzLS4yNTgtLjc4Mi0uNjE3LS43ODItLjQ4MiAwLS41Mi42NzctMS4wMDMuNjc3LS4yMTkgMC0uMzgtLjE3Ny0uNTk5LS4xNzctLjE5MyAwLS40NDUuMTAyLS40NDUuMjkzdi41MDJjMCAuNDI0LS41MDYuNTA4LS41MDYuOTM0IDAgLjE3MS4xODQuMjM2LjE4NC40MSAwIC41OC0uODkzLjUwMi0uODkzIDEuMDggMCAuMTkxLjIxNS4zMDUuMjE1LjQ4NlYxNEg2LjM3NXEuMDg3LS4yNDMuMDktLjUwMmMwLS41NDctMS4wNDMtLjM5My0xLjIwNy0uNzItLjQwNy0uODEzLjY5My0xLjAyMi42OTMtMS42NzMgMC0uMTYtLjA4Mi0uNDg4LS4zMzQtLjUxMy0uMzUxLS4wMzUtLjQ0My4xNTQtLjc5Ny4xNTRhLjQwNi40MDYgMCAwIDEtLjQzNy0uMzZjMC0uMzg2LjMwOC0uNTY2LjMwOC0uOTUyIDAtLjI1LS4xMDItLjM5My0uMTAyLS42NDNhLjYyLjYyIDAgMCAxIC41OS0uNjQzYy4zMjMgMCAuNDY0LjI2NC42MTguNTRhLjY0LjY0IDAgMCAwIC42MTcuMzA4Yy40OSAwIC43OTgtLjYxLjc5OC0uOTc3YS40Ny40NyAwIDAgMSAuNDM3LS40ODhjLjM0NyAwIC40NzYuMzYuODI0LjM2LjU3IDAgLjU1LS43NTYgMS4wNTMtMS4wMy42MTgtLjMzMi40MzgtMS4wNTIuMzYtMS40NC0uMDMyLS4xNjkuMjktLjUuNDY0LS40ODcuNzIuMDUuNDEyLS41NC40MTItLjgyM3EwLS4wNzMuMDIyLS4xNDJjLjExMS0uMzMyLjU5NS0uNDM4LjU5NS0uODM2IDAtLjI4MS0uMjMzLS40MS0uMjMzLS42OTNhLjY1LjY1IDAgMCAxIC4yMi0uNDRIMTR6TTIgMTRWMmg4LjI3OGMtLjAxMy4wNzctLjEzMi4zNTYtLjEzMi40NCAwIC4xOTQuMDM4LjM4Ny4xMTIuNTY3YTEuNiAxLjYgMCAwIDAtLjQyMi42NDMgMS40IDEuNCAwIDAgMC0uMDc0LjQ0MiAxLjcgMS43IDAgMCAwLS41MzYuNDMgMS4zMiAxLjMyIDAgMCAwLS4zMiAxLjA5MXEuMDQ2LjIwNS4wNjYuNDE0YTIgMiAwIDAgMC0uNjQ5LjY3IDEuNDYgMS40NiAwIDAgMC0uNjc0LS4xNjYgMS40NSAxLjQ1IDAgMCAwLTEuMzgzIDEuMDg2IDEuNDQgMS40NCAwIDAgMC0xLjA4Ni0uNDY5IDEuNjIgMS42MiAwIDAgMC0xLjU5MSAxLjY0M2MwIC4yNTQuMTEzLjI5My4wODQuNTc0cy0uMjkuNTM1LS4yOSAxLjAyMmExLjM3IDEuMzcgMCAwIDAgLjk4NCAxLjI5IDEuNTggMS41OCAwIDAgMC0uMDAzIDEuNTQ5Yy4xNDMuMjg2LjYzNi43NzQuNTM0Ljc3NHpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQge1xyXG4gIFJlYWN0LFxyXG4gIGpzeCxcclxuICBob29rc1xyXG59IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU2VsZWN0LCBOdW1lcmljSW5wdXQsIGRlZmF1bHRNZXNzYWdlcyBhcyBqaW11VUlNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgZGlzdGFuY2U6IG51bWJlclxyXG4gIHVuaXQ6IFVuaXRUeXBlXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQnVmZmVySW5wdXQgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgZGlzdGFuY2UgPSAwLCB1bml0ID0gVW5pdFR5cGUuTWV0ZXJzLCBvbkJ1ZmZlckNoYW5nZSB9ID0gcHJvcHNcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGppbXVVSU1lc3NhZ2VzLCBkZWZhdWx0TWVzc2FnZSlcclxuICBjb25zdCBbZCwgc2V0RF0gPSBSZWFjdC51c2VTdGF0ZShkaXN0YW5jZSlcclxuICBjb25zdCBbdSwgc2V0VV0gPSBSZWFjdC51c2VTdGF0ZSh1bml0KVxyXG4gIGNvbnN0IHF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFF1ZXJ5VGFza0NvbnRleHQpXHJcbiAgY29uc3QgcmVzZXRTeW1ib2xSZWYgPSBSZWFjdC51c2VSZWYocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbClcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcclxuICAgIGlmIChkaXN0YW5jZSAhPT0gZCkge1xyXG4gICAgICBzZXREKGRpc3RhbmNlKVxyXG4gICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKHVuaXQgIT09IHUpIHtcclxuICAgICAgc2V0VSh1bml0KVxyXG4gICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKGNoYW5nZWQpIHtcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoZGlzdGFuY2UsIHVuaXQpXHJcbiAgICB9XHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xyXG4gIH0sIFtkaXN0YW5jZSwgdW5pdF0pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAmJiBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICE9PSByZXNldFN5bWJvbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQgPSBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sXHJcbiAgICAgIHNldEQoZGlzdGFuY2UpXHJcbiAgICAgIHNldFUodW5pdClcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoZGlzdGFuY2UsIHVuaXQpXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIGRpc3RhbmNlLCB1bml0LCBvbkJ1ZmZlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURpc3RhbmNlQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHZhbHVlKSA9PiB7XHJcbiAgICBzZXREKHZhbHVlKVxyXG4gIH0sIFtdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEaXN0YW5jZUFjY2VwdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKHZhbHVlKSA9PiB7XHJcbiAgICBzZXREKHZhbHVlKVxyXG4gICAgb25CdWZmZXJDaGFuZ2UodmFsdWUsIHUpXHJcbiAgfSwgW29uQnVmZmVyQ2hhbmdlLCB1XSlcclxuXHJcbiAgY29uc3QgaGFuZGxlQnVmZmVyVW5pdENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XHJcbiAgICBzZXRVKGUudGFyZ2V0LnZhbHVlKVxyXG4gICAgb25CdWZmZXJDaGFuZ2UoZCwgZS50YXJnZXQudmFsdWUpXHJcbiAgfSwgW29uQnVmZmVyQ2hhbmdlLCBkXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAgPE51bWVyaWNJbnB1dFxyXG4gICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfVxyXG4gICAgICAgIGNsYXNzTmFtZT0nbXItMSdcclxuICAgICAgICB2YWx1ZT17ZH1cclxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlRGlzdGFuY2VDaGFuZ2V9XHJcbiAgICAgICAgb25BY2NlcHRWYWx1ZT17aGFuZGxlRGlzdGFuY2VBY2NlcHRlZH1cclxuICAgICAgLz5cclxuICAgICAgPFNlbGVjdFxyXG4gICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd1bml0Jyl9XHJcbiAgICAgICAgdmFsdWU9e3V9XHJcbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUJ1ZmZlclVuaXRDaGFuZ2V9XHJcbiAgICAgID5cclxuICAgICAgICB7T2JqZWN0LnZhbHVlcyhVbml0VHlwZSkubWFwKCh2YWx1ZSkgPT4gKFxyXG4gICAgICAgICAgPG9wdGlvbiBrZXk9e3ZhbHVlfSB2YWx1ZT17dmFsdWV9PlxyXG4gICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoYHVuaXRfJHt2YWx1ZX1gKX1cclxuICAgICAgICAgIDwvb3B0aW9uPlxyXG4gICAgICAgICkpfVxyXG4gICAgICA8L1NlbGVjdD5cclxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgKVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuLy8gVGhpcyBmaWxlIGlzIGR1cGxpY2F0ZWQgZnJvbSAnLi4vLi4vLi4vLi4vZmVhdHVyZS1pbmZvL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvJ1xuaW1wb3J0IHsgUmVhY3QsIGNzcywganN4LCB0eXBlIERhdGFTb3VyY2UsIGluamVjdEludGwsIHR5cGUgSW50bFNoYXBlLCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFJpZ2h0RmlsbGVkIH0gZnJvbSAnamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQnXG5pbXBvcnQgeyBEb3duRmlsbGVkIH0gZnJvbSAnamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bidcblxuZXhwb3J0IGVudW0gTG9hZFN0YXR1cyB7XG4gIFBlbmRpbmcgPSAnUGVuZGluZycsXG4gIEZ1bGZpbGxlZCA9ICdGdWxmaWxsZWQnLFxuICBSZWplY3RlZCA9ICdSZWplY3RlZCdcbn1cblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZVxuICBncmFwaGljOiBfX2VzcmkuR3JhcGhpY1xuICBwb3B1cFRlbXBsYXRlOiBfX2VzcmkuUG9wdXBUZW1wbGF0ZVxuICBkZWZhdWx0UG9wdXBUZW1wbGF0ZTogX19lc3JpLlBvcHVwVGVtcGxhdGVcbiAgdG9nZ2xhYmxlPzogYm9vbGVhblxuICBleHBhbmRCeURlZmF1bHQ/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGxvYWRTdGF0dXM6IExvYWRTdGF0dXNcbiAgc2hvd0NvbnRlbnQ6IGJvb2xlYW5cbn1cblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gIC5lc3JpLXdpZGdldF9faGVhZGluZyB7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbSAhaW1wb3J0YW50O1xuICAgIGZvbnQtd2VpZ2h0OiA1MDAgIWltcG9ydGFudDtcbiAgICBtYXJnaW46IDA7XG4gICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLXRleHQpO1xuICB9XG5cbiAgLmVzcmktZmVhdHVyZV9fY29udGVudC1lbGVtZW50IHtcbiAgICBwYWRkaW5nOiAwO1xuICB9XG5cbiAgLmppbXUtYnRuLmV4cGFuZGVkIHtcbiAgICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0O1xuICB9XG5cbiAgLmVzcmktZmVhdHVyZS5lc3JpLXdpZGdldCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIH1cbmBcblxuaW50ZXJmYWNlIEV4dHJhUHJvcHMge1xuICBpbnRsOiBJbnRsU2hhcGVcbn1cblxuY2xhc3MgRmVhdHVyZUluZm8gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFByb3BzICYgRXh0cmFQcm9wcywgU3RhdGU+IHtcbiAgcHJpdmF0ZSBGZWF0dXJlOiB0eXBlb2YgX19lc3JpLkZlYXR1cmVcbiAgcHJpdmF0ZSBmZWF0dXJlOiBfX2VzcmkuRmVhdHVyZVxuICBwcml2YXRlIHJlYWRvbmx5IGZlYXR1cmVDb250YWluZXI6IFJlYWN0LlJlZk9iamVjdDxIVE1MSW5wdXRFbGVtZW50IHwgbnVsbD5cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBleHBhbmRCeURlZmF1bHQgfSA9IHRoaXMucHJvcHNcbiAgICB0aGlzLmZlYXR1cmVDb250YWluZXIgPSBSZWFjdC5jcmVhdGVSZWYoKVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzaG93Q29udGVudDogIXRvZ2dsYWJsZSB8fCBleHBhbmRCeURlZmF1bHQsXG4gICAgICBsb2FkU3RhdHVzOiBMb2FkU3RhdHVzLlBlbmRpbmdcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlKClcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAocHJldlByb3BzOiBQcm9wcykge1xuICAgIGlmICh0aGlzLmZlYXR1cmUpIHtcbiAgICAgIGlmIChwcmV2UHJvcHMucG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB8fFxuICAgICAgICBwcmV2UHJvcHMuZ3JhcGhpYyAhPT0gdGhpcy5wcm9wcy5ncmFwaGljKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveUZlYXR1cmUoKVxuICAgICAgICB0aGlzLmNyZWF0ZUZlYXR1cmUoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlLnZpc2libGVFbGVtZW50cyA9IHRoaXMuZ2V0VmlzaWJsZUVsZW1lbnRzKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkZXN0cm95RmVhdHVyZSAoKSB7XG4gICAgdGhpcy5mZWF0dXJlICYmICF0aGlzLmZlYXR1cmUuZGVzdHJveWVkICYmIHRoaXMuZmVhdHVyZS5kZXN0cm95KClcbiAgfVxuXG4gIGdldFZpc2libGVFbGVtZW50cyAoKSB7XG4gICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgc2hvd0NvbnRlbnQgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCBleHBhbmRlZCA9IHRvZ2dsYWJsZSA/IHNob3dDb250ZW50IDogdHJ1ZVxuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogdHJ1ZSxcbiAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgZmllbGRzOiBleHBhbmRlZCxcbiAgICAgICAgdGV4dDogZXhwYW5kZWQsXG4gICAgICAgIG1lZGlhOiBleHBhbmRlZCxcbiAgICAgICAgYXR0YWNobWVudHM6IGV4cGFuZGVkXG4gICAgICB9LFxuICAgICAgbGFzdEVkaXRlZEluZm86IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgY3JlYXRlRmVhdHVyZSAoKSB7XG4gICAgbGV0IGZlYXR1cmVNb2R1bGVQcm9taXNlXG4gICAgaWYgKHRoaXMuRmVhdHVyZSkge1xuICAgICAgZmVhdHVyZU1vZHVsZVByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKVxuICAgIH0gZWxzZSB7XG4gICAgICBmZWF0dXJlTW9kdWxlUHJvbWlzZSA9IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xuICAgICAgICAnZXNyaS93aWRnZXRzL0ZlYXR1cmUnXG4gICAgICBdKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgICAgICBbXG4gICAgICAgICAgdGhpcy5GZWF0dXJlXG4gICAgICAgIF0gPSBtb2R1bGVzXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gZmVhdHVyZU1vZHVsZVByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudCAmJiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdqaW11LXdpZGdldCdcbiAgICAgIHRoaXMuZmVhdHVyZUNvbnRhaW5lci5jdXJyZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcilcblxuICAgICAgY29uc3Qgb3JpZ2luRFMgPSB0aGlzLnByb3BzLmRhdGFTb3VyY2UuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICAgICAgY29uc3Qgcm9vdERhdGFTb3VyY2UgPSBvcmlnaW5EUz8uWzBdPy5nZXRSb290RGF0YVNvdXJjZSgpXG5cbiAgICAgIHRoaXMuZGVzdHJveUZlYXR1cmUoKVxuICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLnByb3BzLmdyYXBoaWMubGF5ZXIgYXMgX19lc3JpLkZlYXR1cmVMYXllclxuICAgICAgaWYgKHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSkge1xuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZVxuICAgICAgfSBlbHNlIGlmIChsYXllcikge1xuICAgICAgICAvLyBzZXQgcG9wdXBUZW1wbGF0ZSB3aXRoIGxheWVyJ3MgcG9wdXBUZW1wbGF0ZSBvciBkZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IGxheWVyLnBvcHVwVGVtcGxhdGUgPz8gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9wcy5ncmFwaGljLnBvcHVwVGVtcGxhdGUgPSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9XG4gICAgICBpZiAobGF5ZXIgJiYgIWxheWVyLnBvcHVwVGVtcGxhdGUpIHtcbiAgICAgICAgbGF5ZXIucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSB8fCB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9XG4gICAgICB0aGlzLmZlYXR1cmUgPSBuZXcgdGhpcy5GZWF0dXJlKHtcbiAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBzcGF0aWFsUmVmZXJlbmNlOiB0aGlzLnByb3BzLmRhdGFTb3VyY2U/LmxheWVyPy5zcGF0aWFsUmVmZXJlbmNlIHx8IG51bGwsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgbWFwOiByb290RGF0YVNvdXJjZT8ubWFwIHx8IG51bGwsXG4gICAgICAgIGdyYXBoaWM6IHRoaXMucHJvcHMuZ3JhcGhpYyxcbiAgICAgICAgdmlzaWJsZUVsZW1lbnRzOiB0aGlzLmdldFZpc2libGVFbGVtZW50cygpXG4gICAgICB9KVxuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGxvYWRTdGF0dXM6IExvYWRTdGF0dXMuRnVsZmlsbGVkIH0pXG4gICAgfSlcbiAgfVxuXG4gIHRvZ2dsZUV4cGFuZGVkID0gKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dDb250ZW50OiAhdGhpcy5zdGF0ZS5zaG93Q29udGVudCB9KVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IHRvZ2dsYWJsZSA9IGZhbHNlLCBpbnRsIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBzaG93Q29udGVudCB9ID0gdGhpcy5zdGF0ZVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmVhdHVyZS1pbmZvLWNvbXBvbmVudCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIHAtMicgY3NzPXtzdHlsZX0+XG4gICAgICAgIHt0b2dnbGFibGUgJiYgKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiBzaG93Q29udGVudCA/ICdjb2xsYXBzZScgOiAnZXhwYW5kJyB9KX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncC0wIGppbXUtb3V0bGluZS1pbnNpZGUgZmxleC1zaHJpbmstMCcsIHsgZXhwYW5kZWQ6IHNob3dDb250ZW50IH0pfVxuICAgICAgICAgICAgdmFyaWFudD0ndGV4dCdcbiAgICAgICAgICAgIGNvbG9yPSdpbmhlcml0J1xuICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZUV4cGFuZGVkfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtzaG93Q29udGVudCA/IDxEb3duRmlsbGVkIHNpemU9J3MnLz4gOiA8UmlnaHRGaWxsZWQgc2l6ZT0ncycgYXV0b0ZsaXAvPn1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtZ3Jvdy0xJyByZWY9e3RoaXMuZmVhdHVyZUNvbnRhaW5lcn0gLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBpbmplY3RJbnRsKEZlYXR1cmVJbmZvKVxuXG5cbiIsIi8qKlxuICogQ29uZmlndXJhYmxlIGRlYnVnIGxvZ2dpbmcgdXRpbGl0eSBmb3IgUXVlcnlTaW1wbGUgd2lkZ2V0XG4gKiBcbiAqIFVzYWdlOlxuICogLSBBZGQgP2RlYnVnPWFsbCB0byBVUkwgdG8gc2VlIGFsbCBkZWJ1ZyBsb2dzXG4gKiAtIEFkZCA/ZGVidWc9SEFTSCxGT1JNIHRvIHNlZSBzcGVjaWZpYyBmZWF0dXJlIGxvZ3NcbiAqIC0gQWRkID9kZWJ1Zz1mYWxzZSB0byBkaXNhYmxlIGFsbCBkZWJ1ZyBsb2dzXG4gKiBcbiAqIEZlYXR1cmVzOlxuICogLSBIQVNIOiBIYXNoIHBhcmFtZXRlciBwcm9jZXNzaW5nXG4gKiAtIEZPUk06IFF1ZXJ5IGZvcm0gaW50ZXJhY3Rpb25zXG4gKiAtIFRBU0s6IFF1ZXJ5IHRhc2sgbWFuYWdlbWVudFxuICogLSBaT09NOiBab29tIGJlaGF2aW9yXG4gKiAtIE1BUC1FWFRFTlQ6IE1hcCBleHRlbnQgY2hhbmdlc1xuICogLSBEQVRBLUFDVElPTjogRGF0YSBhY3Rpb24gZXhlY3V0aW9uIChBZGQgdG8gTWFwLCBldGMuKVxuICogLSBHUk9VUDogUXVlcnkgZ3JvdXBpbmcgYW5kIGRyb3Bkb3duIHNlbGVjdGlvblxuICovXG5cbnR5cGUgRGVidWdGZWF0dXJlID0gJ0hBU0gnIHwgJ0ZPUk0nIHwgJ1RBU0snIHwgJ1pPT00nIHwgJ01BUC1FWFRFTlQnIHwgJ0RBVEEtQUNUSU9OJyB8ICdHUk9VUCcgfCAnYWxsJyB8ICdmYWxzZSdcblxuY2xhc3MgRGVidWdMb2dnZXIge1xuICBwcml2YXRlIGVuYWJsZWRGZWF0dXJlczogU2V0PERlYnVnRmVhdHVyZT4gPSBuZXcgU2V0KClcbiAgcHJpdmF0ZSBpbml0aWFsaXplZCA9IGZhbHNlXG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSByZXR1cm5cblxuICAgIC8vIENoZWNrIFVSTCBwYXJhbWV0ZXJzXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKVxuICAgIGNvbnN0IGRlYnVnVmFsdWUgPSB1cmxQYXJhbXMuZ2V0KCdkZWJ1ZycpXG5cbiAgICBpZiAoZGVidWdWYWx1ZSA9PT0gJ2ZhbHNlJykge1xuICAgICAgLy8gRXhwbGljaXRseSBkaXNhYmxlZFxuICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWVcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChkZWJ1Z1ZhbHVlID09PSAnYWxsJykge1xuICAgICAgLy8gRW5hYmxlIGFsbCBmZWF0dXJlcyBvbmx5IGlmIGV4cGxpY2l0bHkgc2V0IHRvICdhbGwnXG4gICAgICB0aGlzLmVuYWJsZWRGZWF0dXJlcy5hZGQoJ0hBU0gnKVxuICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKCdGT1JNJylcbiAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZCgnVEFTSycpXG4gICAgICB0aGlzLmVuYWJsZWRGZWF0dXJlcy5hZGQoJ1pPT00nKVxuICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKCdNQVAtRVhURU5UJylcbiAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZCgnREFUQS1BQ1RJT04nKVxuICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKCdHUk9VUCcpXG4gICAgfSBlbHNlIGlmIChkZWJ1Z1ZhbHVlICE9PSBudWxsKSB7XG4gICAgICAvLyBQYXJzZSBjb21tYS1zZXBhcmF0ZWQgZmVhdHVyZSBsaXN0XG4gICAgICBjb25zdCBmZWF0dXJlcyA9IGRlYnVnVmFsdWUuc3BsaXQoJywnKS5tYXAoZiA9PiBmLnRyaW0oKS50b1VwcGVyQ2FzZSgpIGFzIERlYnVnRmVhdHVyZSlcbiAgICAgIGZlYXR1cmVzLmZvckVhY2goZmVhdHVyZSA9PiB7XG4gICAgICAgIGlmIChmZWF0dXJlID09PSAnQUxMJykge1xuICAgICAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZCgnSEFTSCcpXG4gICAgICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKCdGT1JNJylcbiAgICAgICAgICB0aGlzLmVuYWJsZWRGZWF0dXJlcy5hZGQoJ1RBU0snKVxuICAgICAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZCgnWk9PTScpXG4gICAgICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKCdNQVAtRVhURU5UJylcbiAgICAgICAgICB0aGlzLmVuYWJsZWRGZWF0dXJlcy5hZGQoJ0RBVEEtQUNUSU9OJylcbiAgICAgICAgICB0aGlzLmVuYWJsZWRGZWF0dXJlcy5hZGQoJ0dST1VQJylcbiAgICAgICAgfSBlbHNlIGlmIChbJ0hBU0gnLCAnRk9STScsICdUQVNLJywgJ1pPT00nLCAnTUFQLUVYVEVOVCcsICdEQVRBLUFDVElPTicsICdHUk9VUCddLmluY2x1ZGVzKGZlYXR1cmUpKSB7XG4gICAgICAgICAgdGhpcy5lbmFibGVkRmVhdHVyZXMuYWRkKGZlYXR1cmUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWVcbiAgfVxuXG4gIHByaXZhdGUgaXNFbmFibGVkKGZlYXR1cmU6IERlYnVnRmVhdHVyZSk6IGJvb2xlYW4ge1xuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gICAgXG4gICAgaWYgKHRoaXMuZW5hYmxlZEZlYXR1cmVzLmhhcygnYWxsJykpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aGlzLmVuYWJsZWRGZWF0dXJlcy5oYXMoZmVhdHVyZSlcbiAgfVxuXG4gIGxvZyhmZWF0dXJlOiBEZWJ1Z0ZlYXR1cmUsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0VuYWJsZWQoZmVhdHVyZSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgICBmZWF0dXJlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAuLi5kYXRhXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFtRVUVSWVNJTVBMRS0ke2ZlYXR1cmV9XWAsIEpTT04uc3RyaW5naWZ5KGxvZ0RhdGEsIG51bGwsIDIpKVxuICB9XG5cbiAgZ2V0Q29uZmlnKCk6IHsgZW5hYmxlZEZlYXR1cmVzOiBzdHJpbmdbXSwgZGVidWdWYWx1ZTogc3RyaW5nIHwgbnVsbCB9IHtcbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICAgIFxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBjb25zdCBkZWJ1Z1ZhbHVlID0gdXJsUGFyYW1zLmdldCgnZGVidWcnKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBlbmFibGVkRmVhdHVyZXM6IEFycmF5LmZyb20odGhpcy5lbmFibGVkRmVhdHVyZXMpLFxuICAgICAgZGVidWdWYWx1ZVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZGVidWdMb2dnZXIgPSBuZXcgRGVidWdMb2dnZXIoKVxuXG5cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIEltbXV0YWJsZUFycmF5LCBsb2Rhc2gsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZSwgdXRpbHMsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBKaW11TWFwVmlld0NvbXBvbmVudCwgdHlwZSBKaW11TWFwVmlldywgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xyXG5pbXBvcnQgeyBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgdHlwZSB7IENyZWF0ZVRvb2xUeXBlLCBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IHsgSW50ZXJhY3RpdmVEcmF3IH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS1kcmF3LXRvb2wnXHJcbmltcG9ydCB7IEJ1ZmZlcklucHV0IH0gZnJvbSAnLi9idWZmZXItaW5wdXQnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBlbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBidWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgYnVmZmVyVW5pdDogVW5pdFR5cGVcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbiAgb25HZW9tZXRyeUNoYW5nZTogKGdlb206IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21EcmF3IChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uR2VvbWV0cnlDaGFuZ2UsIGNyZWF0ZVRvb2xUeXBlcywgbWFwV2lkZ2V0SWRzLCBlbmFibGVCdWZmZXIsIGJ1ZmZlckRpc3RhbmNlLCBidWZmZXJVbml0LCBvbkJ1ZmZlckNoYW5nZSwgd2lkZ2V0SWQgfSA9IHByb3BzXHJcbiAgY29uc3QgW2ppbXVNYXBWaWV3LCBzZXRKaW11TWFwVmlld10gPSBSZWFjdC51c2VTdGF0ZTxKaW11TWFwVmlldz4obnVsbClcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGppbXVVSU1lc3NhZ2VzLCBkZWZhdWx0TWVzc2FnZSlcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcbiAgY29uc3QgZ2V0TGF5ZXJGdW5SZWYgPSBSZWFjdC51c2VSZWY8KCkgPT4gX19lc3JpLkdyYXBoaWNzTGF5ZXI+KG51bGwpXHJcbiAgY29uc3QgYnVmZmVyT3BlcmF0b3JSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLmJ1ZmZlck9wZXJhdG9yPihudWxsKVxyXG4gIGNvbnN0IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLmdlb2Rlc2ljQnVmZmVyT3BlcmF0b3I+KG51bGwpXHJcbiAgY29uc3QgZ2VvbWV0cnlTZXJ2aWNlUmVmID0gUmVhY3QudXNlUmVmPHsgZ2VvbWV0cnlTZXJ2aWNlOiBfX2VzcmkuZ2VvbWV0cnlTZXJ2aWNlLCBidWZmZXJQYXJhbWV0ZXJzOiB0eXBlb2YgX19lc3JpLkJ1ZmZlclBhcmFtZXRlcnMgfT4obnVsbClcclxuICBjb25zdCBnZW9tZXRyeVJlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuR2VvbWV0cnk+KG51bGwpXHJcbiAgY29uc3QgYnVmZmVyRGlzdGFuY2VSZWYgPSBSZWFjdC51c2VSZWYoYnVmZmVyRGlzdGFuY2UpXHJcbiAgY29uc3QgYnVmZmVyVW5pdFJlZiA9IFJlYWN0LnVzZVJlZihidWZmZXJVbml0KVxyXG4gIGNvbnN0IGJ1ZmZlcmVkR3JhcGhpY1JlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuR3JhcGhpYz4obnVsbClcclxuXHJcbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XHJcbiAgICBpZiAoZW5hYmxlQnVmZmVyKSB7XHJcbiAgICAgIC8vIFBhcmVudCBjb21wb25lbnQgcXVlcnktdGFzay1zcGF0aWFsLWZvcm0gd2lsbCByZXNldCBidWZmZXIgcGFyYW1ldGVyIHdoZW4gZmlsdGVyIHR5cGUgY2hhbmdlcyxcclxuICAgICAgLy8gc28gZGVmZXIgdGhlIGluaXQgYnVmZmVyIG9wdGlvbiBpbiBvcmRlciBub3QgdG8gYmUgb3ZlcnJpZGUgYnkgaXRzIHBhcmVudC5cclxuICAgICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcclxuICAgICAgICBvbkJ1ZmZlckNoYW5nZShidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdClcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xyXG4gICAgICAnZXNyaS9HcmFwaGljJ1xyXG4gICAgXSkudGhlbigobW9kdWxlcykgPT4ge1xyXG4gICAgICBjb25zdCBHcmFwaGljID0gbW9kdWxlc1swXVxyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudCA9IG5ldyBHcmFwaGljKHtcclxuICAgICAgICBzeW1ib2w6IHtcclxuICAgICAgICAgIHR5cGU6ICdzaW1wbGUtZmlsbCcsXHJcbiAgICAgICAgICBjb2xvcjogWzUxLCA1MSwgMjA0LCAwLjVdLFxyXG4gICAgICAgICAgc3R5bGU6ICdzb2xpZCcsXHJcbiAgICAgICAgICBvdXRsaW5lOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiBbNTEsIDUxLCAyMDQsIDAuOF0sXHJcbiAgICAgICAgICAgIHdpZHRoOiAxXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBjb25zdCBhcHBseUJ1ZmZlckVmZmVjdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmICghZ2VvbWV0cnlSZWYuY3VycmVudCB8fCAhZW5hYmxlQnVmZmVyIHx8IGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPT09IDApIHtcclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBudWxsXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSBlbmQgdXNlciB1c2VzIGEgcG9pbnQgb3IgbGluZSBxdWVyeSBnZW9tZXRyeSwgdGhlbiB0aGUgbmVnYXRpdmUgYnVmZmVyIHdpbGwgbm90IHdvcmsgKHNhbWUgZWZmZWN0IGFzIHRoZXJlIGlzIG5vIGJ1ZmZlcilcclxuICAgIGNvbnN0IGlzUG9pbnROZWdhdGl2ZUJ1ZmZlciA9IChnZW9tZXRyeVJlZi5jdXJyZW50Py50eXBlID09PSAncG9pbnQnIHx8IGdlb21ldHJ5UmVmLmN1cnJlbnQ/LnR5cGUgPT09ICdtdWx0aXBvaW50JykgJiYgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA8IDBcclxuICAgIGNvbnN0IGlzTGluZU5lZ2F0aXZlQnVmZmVyID0gZ2VvbWV0cnlSZWYuY3VycmVudD8udHlwZSA9PT0gJ3BvbHlsaW5lJyAmJiBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50IDwgMFxyXG4gICAgaWYgKGlzUG9pbnROZWdhdGl2ZUJ1ZmZlciB8fCBpc0xpbmVOZWdhdGl2ZUJ1ZmZlcikge1xyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IG51bGxcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZ2VvbWV0cnkgPSBnZW9tZXRyeVJlZi5jdXJyZW50XHJcbiAgICAvLyBodHRwczovL2RldmVsb3BlcnMuYXJjZ2lzLmNvbS9qYXZhc2NyaXB0L2xhdGVzdC9hcGktcmVmZXJlbmNlL2VzcmktZ2VvbWV0cnktZ2VvbWV0cnlFbmdpbmUuaHRtbCNidWZmZXJcclxuICAgIGlmIChnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc0dlb2dyYXBoaWMgJiYgIWdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UuaXNXR1M4NCkge1xyXG4gICAgICBjb25zdCBzZXJ2aWNlVXJsID0gdXRpbHMuZ2V0R2VvbWV0cnlTZXJ2aWNlKClcclxuICAgICAgaWYgKCFnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGNvbnN0IG1vZHVsZXMgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcclxuICAgICAgICAgICdlc3JpL3Jlc3QvZ2VvbWV0cnlTZXJ2aWNlJyxcclxuICAgICAgICAgICdlc3JpL3Jlc3Qvc3VwcG9ydC9CdWZmZXJQYXJhbWV0ZXJzJ1xyXG4gICAgICAgIF0pXHJcbiAgICAgICAgZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnQgPSB7XHJcbiAgICAgICAgICBnZW9tZXRyeVNlcnZpY2U6IG1vZHVsZXNbMF0sXHJcbiAgICAgICAgICBidWZmZXJQYXJhbWV0ZXJzOiBtb2R1bGVzWzFdXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHsgZ2VvbWV0cnlTZXJ2aWNlLCBidWZmZXJQYXJhbWV0ZXJzOiBCdWZmZXJQYXJhbWV0ZXJzIH0gPSBnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudFxyXG4gICAgICBjb25zdCBwb2x5Z29ucyA9IGF3YWl0IGdlb21ldHJ5U2VydmljZS5idWZmZXIoc2VydmljZVVybCwgbmV3IEJ1ZmZlclBhcmFtZXRlcnMoe1xyXG4gICAgICAgIGRpc3RhbmNlczogW2J1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnRdLFxyXG4gICAgICAgIHVuaXQ6IGxvZGFzaC5rZWJhYkNhc2UoYnVmZmVyVW5pdFJlZi5jdXJyZW50KSBhcyBhbnksXHJcbiAgICAgICAgZ2VvZGVzaWM6IHRydWUsXHJcbiAgICAgICAgYnVmZmVyU3BhdGlhbFJlZmVyZW5jZTogZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSxcclxuICAgICAgICBvdXRTcGF0aWFsUmVmZXJlbmNlOiBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLFxyXG4gICAgICAgIGdlb21ldHJpZXM6IFtnZW9tZXRyeV1cclxuICAgICAgfSkpXHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gcG9seWdvbnNbMF1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc1dHUzg0IHx8IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2U/LmlzV2ViTWVyY2F0b3IpIHtcclxuICAgICAgICBpZiAoIWdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50ID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlKCdlc3JpL2dlb21ldHJ5L29wZXJhdG9ycy9nZW9kZXNpY0J1ZmZlck9wZXJhdG9yJylcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuaXNMb2FkZWQoKSkge1xyXG4gICAgICAgICAgYXdhaXQgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmxvYWQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5leGVjdXRlKFxyXG4gICAgICAgICAgZ2VvbWV0cnkgYXMgX19lc3JpLkdlb21ldHJ5VW5pb24sXHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB1bml0OiBsb2Rhc2gua2ViYWJDYXNlKGJ1ZmZlclVuaXRSZWYuY3VycmVudCkgYXMgYW55XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICghYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZSgnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvYnVmZmVyT3BlcmF0b3InKVxyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IGJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuZXhlY3V0ZShcclxuICAgICAgICAgIGdlb21ldHJ5IGFzIF9fZXNyaS5HZW9tZXRyeVVuaW9uLFxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdW5pdDogbG9kYXNoLmtlYmFiQ2FzZShidWZmZXJVbml0UmVmLmN1cnJlbnQpIGFzIGFueVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFtlbmFibGVCdWZmZXJdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKS5yZW1vdmVBbGwoKVxyXG4gICAgICBvbkdlb21ldHJ5Q2hhbmdlKG51bGwpXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIG9uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XHJcbiAgICAvLyBjbGVhciBkcmF3aW5nIGdyYXBoaWNzIGJlZm9yZSBzd2l0Y2hpbmcgbWFwIHZpZXdcclxuICAgIGNvbnN0IGxheWVyID0gZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KClcclxuICAgIGlmIChsYXllcikge1xyXG4gICAgICBsYXllci5yZW1vdmVBbGwoKVxyXG4gICAgICBvbkdlb21ldHJ5Q2hhbmdlKG51bGwpXHJcbiAgICB9XHJcbiAgICBzZXRKaW11TWFwVmlldyhqaW11TWFwVmlldz8udmlldyAhPSBudWxsID8gamltdU1hcFZpZXcgOiBudWxsKVxyXG4gIH0sIFtvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlQnVmZmVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRpc3RhbmNlLCB1bml0KSA9PiB7XHJcbiAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50ID0gZGlzdGFuY2VcclxuICAgIGJ1ZmZlclVuaXRSZWYuY3VycmVudCA9IHVuaXRcclxuICAgIGFwcGx5QnVmZmVyRWZmZWN0KClcclxuICAgIG9uQnVmZmVyQ2hhbmdlKGRpc3RhbmNlLCB1bml0KVxyXG4gIH0sIFtvbkJ1ZmZlckNoYW5nZSwgYXBwbHlCdWZmZXJFZmZlY3RdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEcmF3RW5kID0gUmVhY3QudXNlQ2FsbGJhY2soKGdyYXBoaWMsIGdldExheWVyRnVuLCBjbGVhckFmdGVyQXBwbHkpID0+IHtcclxuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgPSBnZXRMYXllckZ1blxyXG4gICAgY29uc3QgbGF5ZXIgPSBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKVxyXG4gICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBnZW9tZXRyeSBpcyB0aGUgc2FtZSBhcyB0aGUgcHJldmlvdXMgb25lLCBvbmx5IHRoZSBjbGVhckFmdGVyQXBwbHkgaXMgY2hhbmdlZC5cclxuICAgIGlmIChnZW9tZXRyeVJlZi5jdXJyZW50ICE9PSBncmFwaGljPy5nZW9tZXRyeSkge1xyXG4gICAgICBnZW9tZXRyeVJlZi5jdXJyZW50ID0gZ3JhcGhpYz8uZ2VvbWV0cnlcclxuICAgICAgYXBwbHlCdWZmZXJFZmZlY3QoKS50aGVuKCgpID0+IHtcclxuICAgICAgICBpZiAoYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkpIHtcclxuICAgICAgICAgIGxheWVyPy5hZGQoYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgb25HZW9tZXRyeUNoYW5nZShncmFwaGljPy5nZW9tZXRyeSwgbGF5ZXIsIGdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseSlcclxuICB9LCBbb25HZW9tZXRyeUNoYW5nZSwgYXBwbHlCdWZmZXJFZmZlY3RdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICB7XHJcbiAgICAgICAgbWFwV2lkZ2V0SWRzPy5tYXAoKG1hcFdpZGdldElkLCB4KSA9PiAoXHJcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcclxuICAgICAgICAgICAga2V5PXt4fSB1c2VNYXBXaWRnZXRJZD17bWFwV2lkZ2V0SWR9IG9uQWN0aXZlVmlld0NoYW5nZT17aGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApKVxyXG4gICAgICB9XHJcbiAgICAgIHtqaW11TWFwVmlldz8udmlldyAmJiAoXHJcbiAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgPEludGVyYWN0aXZlRHJhd1xyXG4gICAgICAgICAgICBqaW11TWFwVmlldz17amltdU1hcFZpZXd9XHJcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cclxuICAgICAgICAgICAgdG9vbFR5cGVzPXtjcmVhdGVUb29sVHlwZXN9XHJcbiAgICAgICAgICAgIG9uRHJhd0VuZD17aGFuZGxlRHJhd0VuZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICB7ZW5hYmxlQnVmZmVyICYmIChcclxuICAgICAgICAgICAgPGRpdiByb2xlPSdncm91cCcgY2xhc3NOYW1lPSd0aXRsZTMnIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfSBjc3M9e2Nzc2BtYXJnaW4tdG9wOiAwLjc1cmVtO2B9PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlJz57Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBtdC0xJz5cclxuICAgICAgICAgICAgICAgIDxCdWZmZXJJbnB1dCBkaXN0YW5jZT17YnVmZmVyRGlzdGFuY2V9IHVuaXQ9e2J1ZmZlclVuaXR9IG9uQnVmZmVyQ2hhbmdlPXtoYW5kbGVCdWZmZXJDaGFuZ2V9Lz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICl9XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBSZWFjdFJlZHV4LFxyXG4gIGpzeCxcclxuICBjc3MsXHJcbiAgSW1tdXRhYmxlLFxyXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXHJcbiAgdHlwZSBVc2VEYXRhU291cmNlLFxyXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXHJcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXHJcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcclxuICBob29rcyxcclxuICB0eXBlIERhdGFTb3VyY2UsXHJcbiAgdHlwZSBJTVN0YXRlLFxyXG4gIERhdGFTb3VyY2VTdGF0dXNcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNlbGVjdCwgT3B0aW9uLCBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgeyBTcGF0aWFsUmVsYXRpb24sIHR5cGUgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCB7IEJ1ZmZlcklucHV0IH0gZnJvbSAnLi9idWZmZXItaW5wdXQnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBRdWVyeVRhc2tDb250ZXh0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWNvbnRleHQnXHJcblxyXG5jb25zdCBtYXJnaW5TdHlsZSA9IGNzc2BtYXJnaW4tdG9wOiAwLjc1cmVtO2BcclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgc3BhdGlhbFJlbGF0aW9uczogSW1tdXRhYmxlQXJyYXk8U3BhdGlhbFJlbGF0aW9uPlxyXG4gIHVzZURhdGFTb3VyY2VzOiBJbW11dGFibGVBcnJheTxVc2VEYXRhU291cmNlPlxyXG4gIHVzZVJ1bnRpbWVEYXRhOiBib29sZWFuXHJcbiAgZW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgYnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGJ1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgb25TZWxlY3Rpb25DaGFuZ2U6IChnZW9tczogX19lc3JpLkdlb21ldHJ5W10pID0+IHZvaWRcclxuICBvblJlbGF0aW9uQ2hhbmdlOiAocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHZvaWRcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJ1bnRpbWVEYXRhU291cmNlICgpOiB7IFtkc0lkOiBzdHJpbmddOiBEYXRhU291cmNlIH0ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IHt9XHJcbiAgbGV0IG5vdEVtcHR5ID0gZmFsc2VcclxuICBjb25zdCBkc01hcCA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZXMoKVxyXG4gIE9iamVjdC5rZXlzKGRzTWFwKS5mb3JFYWNoKGRzSWQgPT4ge1xyXG4gICAgY29uc3QgZHMgPSBkc01hcFtkc0lkXVxyXG4gICAgLy8gb25seSBpbmNsdWRlIHRoZSBkcyB0aGF0IGhhcyBnZW9tZXRyeVxyXG4gICAgaWYgKGRzLmdldEdlb21ldHJ5VHlwZSgpICE9IG51bGwgJiYgIWRzLmlzSW5BcHBDb25maWcoKSAmJiBkcy5nZXRNYWluRGF0YVNvdXJjZSgpLmlkID09PSBkc0lkICYmICFkcy5nZXREYXRhU291cmNlSnNvbigpLmlzT3V0cHV0RnJvbVdpZGdldCkge1xyXG4gICAgICByZXN1bHRbZHNJZF0gPSBkc1xyXG4gICAgICBub3RFbXB0eSA9IHRydWVcclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4gbm90RW1wdHkgPyByZXN1bHQgOiBudWxsXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21EYXRhU291cmNlIChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uU2VsZWN0aW9uQ2hhbmdlLCB1c2VEYXRhU291cmNlcyA9IFtdLCB1c2VSdW50aW1lRGF0YSwgc3BhdGlhbFJlbGF0aW9ucywgZW5hYmxlQnVmZmVyLCBidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdCwgb25CdWZmZXJDaGFuZ2UsIG9uUmVsYXRpb25DaGFuZ2UgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihqaW11VUlNZXNzYWdlcywgZGVmYXVsdE1lc3NhZ2UpXHJcbiAgY29uc3QgW2N1cnJlbnREYXRhU291cmNlLCBzZXRDdXJyZW50RGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZSh1c2VEYXRhU291cmNlc1swXSlcclxuICBjb25zdCBbcnVudGltZURhdGFTb3VyY2UsIHNldFJ1bnRpbWVEYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KClcclxuICBjb25zdCBbY291bnQsIHNldENvdW50XSA9IFJlYWN0LnVzZVN0YXRlKDApXHJcbiAgY29uc3QgW2N1cnJlbnRSZWxhdGlvbiwgc2V0Q3VycmVudFJlbGF0aW9uXSA9IFJlYWN0LnVzZVN0YXRlKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcbiAgY29uc3QgdHJhbnNsYXRlID0gaG9va3MudXNlVHJhbnNsYXRpb24oKVxyXG5cclxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25PcHRpb25zOiBBcnJheTx7IHZhbHVlOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgfT4gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhTcGF0aWFsUmVsYXRpb24pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoe1xyXG4gICAgICB2YWx1ZSxcclxuICAgICAgbGFiZWw6IGdldEkxOG5NZXNzYWdlKGBzcGF0aWFsUmVsYXRpb25fJHtrZXl9YClcclxuICAgIH0pKVxyXG4gIH0sIFtnZXRJMThuTWVzc2FnZV0pXHJcblxyXG4gIGNvbnN0IGxvYWRlZFVzZURhdGFTb3VyY2VzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGNvbnN0IGxvYWRlZCA9IFtdXHJcbiAgICB1c2VEYXRhU291cmNlcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGlmIChzdGF0ZS5kYXRhU291cmNlc0luZm8/LltpdGVtLm1haW5EYXRhU291cmNlSWRdPy5pbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVkKSB7XHJcbiAgICAgICAgbG9hZGVkLnB1c2goaXRlbS5kYXRhU291cmNlSWQpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBpZiAobG9hZGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIGxvYWRlZC5qb2luKCcsJylcclxuICAgIH1cclxuICAgIHJldHVybiAnJ1xyXG4gIH0pXHJcblxyXG4gIGNvbnN0IG51bU9mRHMgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xyXG4gICAgaWYgKCF1c2VSdW50aW1lRGF0YSkge1xyXG4gICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlLmRhdGFTb3VyY2VzSW5mbyA/PyB7fSkuZmlsdGVyKGRzSWQgPT4gc3RhdGUuZGF0YVNvdXJjZXNJbmZvW2RzSWRdLmluc3RhbmNlU3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLkNyZWF0ZWQpLmxlbmd0aFxyXG4gIH0pXHJcblxyXG4gIGNvbnN0IHJ1bnRpbWVEYXRhU291cmNlcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgaWYgKG51bU9mRHMgPiAwKSB7XHJcbiAgICAgIHJldHVybiBnZXRSdW50aW1lRGF0YVNvdXJjZSgpXHJcbiAgICB9XHJcbiAgfSwgW251bU9mRHNdKVxyXG5cclxuICBjb25zdCBudW1PZlJ1bnRpbWVEcyA9IE9iamVjdC5rZXlzKHJ1bnRpbWVEYXRhU291cmNlcyA/PyB7fSkubGVuZ3RoXHJcblxyXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xyXG4gICAgaWYgKHNwYXRpYWxSZWxhdGlvbnM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShzcGF0aWFsUmVsYXRpb25zWzBdKVxyXG4gICAgfVxyXG4gICAgaWYgKGVuYWJsZUJ1ZmZlcikge1xyXG4gICAgICBvbkJ1ZmZlckNoYW5nZShidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdClcclxuICAgIH1cclxuICB9KVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBzZXRDdXJyZW50UmVsYXRpb24oc3BhdGlhbFJlbGF0aW9ucz8uWzBdKVxyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgb25SZWxhdGlvbkNoYW5nZSwgc3BhdGlhbFJlbGF0aW9uc10pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIXNwYXRpYWxSZWxhdGlvbnMpIHtcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKG51bGwpXHJcbiAgICB9IGVsc2UgaWYgKCFzcGF0aWFsUmVsYXRpb25zLmluY2x1ZGVzKGN1cnJlbnRSZWxhdGlvbikpIHtcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKHNwYXRpYWxSZWxhdGlvbnNbMF0pXHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2Uoc3BhdGlhbFJlbGF0aW9uc1swXSlcclxuICAgIH1cclxuICB9LCBbc3BhdGlhbFJlbGF0aW9ucywgY3VycmVudFJlbGF0aW9uLCBvblJlbGF0aW9uQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxyXG4gICAgKGRzSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBkcyA9IHVzZURhdGFTb3VyY2VzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uZGF0YVNvdXJjZUlkID09PSBkc0lkKVxyXG4gICAgICBzZXRDdXJyZW50RGF0YVNvdXJjZShJbW11dGFibGUoZHMpKVxyXG4gICAgICBzZXRSdW50aW1lRGF0YVNvdXJjZShudWxsKVxyXG4gICAgfSxcclxuICAgIFt1c2VEYXRhU291cmNlc11cclxuICApXHJcblxyXG4gIGNvbnN0IGhhbmRsZVJ1bnRpbWVEYXRhU291cmNlQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soXHJcbiAgICAoZHNJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGRzSWQpXHJcbiAgICAgIHNldFJ1bnRpbWVEYXRhU291cmNlKGRzKVxyXG4gICAgICBzZXRDdXJyZW50RGF0YVNvdXJjZShudWxsKVxyXG4gICAgfSxcclxuICAgIFtdXHJcbiAgKVxyXG5cclxuICBjb25zdCBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGN1cnJlbnREYXRhU291cmNlPy5kYXRhU291cmNlSWQgPz8gcnVudGltZURhdGFTb3VyY2U/LmlkKVxyXG4gICAgY29uc3QgcmVjb3JkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXHJcbiAgICBpZiAocmVjb3Jkcz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBnZW9tZXRyaWVzID0gcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gcmVjb3JkLmdldEpTQVBJR2VvbWV0cnkoKSlcclxuICAgICAgb25TZWxlY3Rpb25DaGFuZ2UoZ2VvbWV0cmllcylcclxuICAgICAgc2V0Q291bnQocmVjb3Jkcy5sZW5ndGgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvblNlbGVjdGlvbkNoYW5nZShudWxsKVxyXG4gICAgICBzZXRDb3VudCgwKVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkLCBydW50aW1lRGF0YVNvdXJjZT8uaWQsIG9uU2VsZWN0aW9uQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgZ2V0TGFiZWxPZlNwYXRpYWxSZWxhdGlvbiA9IChyZWxhdGlvbjogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICAgIHJldHVybiBzcGF0aWFsUmVsYXRpb25PcHRpb25zLmZpbmQoaXRlbSA9PiBpdGVtLnZhbHVlID09PSByZWxhdGlvbikubGFiZWxcclxuICB9XHJcblxyXG4gIGNvbnN0IGhhbmRsZVNwYXRpYWxSZWxhdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKGUgPT4ge1xyXG4gICAgc2V0Q3VycmVudFJlbGF0aW9uKGUudGFyZ2V0LnZhbHVlKVxyXG4gICAgb25SZWxhdGlvbkNoYW5nZShlLnRhcmdldC52YWx1ZSlcclxuICB9LCBbb25SZWxhdGlvbkNoYW5nZV0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2PlxyXG4gICAgICA8ZGl2IGNzcz17bWFyZ2luU3R5bGV9IGNsYXNzTmFtZT0ndGl0bGUzJz57Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlckxheWVyJyl9PC9kaXY+XHJcbiAgICAgIDxTZWxlY3RcclxuICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2hvb3NlRmlsdGVyTGF5ZXInKX1cclxuICAgICAgICB2YWx1ZT17Y3VycmVudERhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCA/PyBydW50aW1lRGF0YVNvdXJjZT8uaWR9XHJcbiAgICAgID5cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIHVzZURhdGFTb3VyY2VzLmxlbmd0aCA+IDAgJiYgPE9wdGlvbiBoZWFkZXI+e2dldEkxOG5NZXNzYWdlKCdwcmVjb25maWd1cmVkJyl9PC9PcHRpb24+fVxyXG4gICAgICAgIHt1c2VEYXRhU291cmNlcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGl0ZW0uZGF0YVNvdXJjZUlkKVxyXG4gICAgICAgICAgaWYgKGxvYWRlZFVzZURhdGFTb3VyY2VzLmluY2x1ZGVzKGl0ZW0uZGF0YVNvdXJjZUlkKSB8fCBkcz8uZ2V0TGFiZWwoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgIDxPcHRpb24ga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0gdmFsdWU9e2l0ZW0uZGF0YVNvdXJjZUlkfSBvbkNsaWNrPXsoKSA9PiB7IGhhbmRsZURhdGFTb3VyY2VDaGFuZ2UoaXRlbS5kYXRhU291cmNlSWQpIH19PlxyXG4gICAgICAgICAgICAgIHtkcz8uZ2V0TGFiZWwoKX1cclxuICAgICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfT5cclxuICAgICAgICAgICAgICB7dHJhbnNsYXRlKCdsb2FkaW5nJyl9XHJcbiAgICAgICAgICAgIDwvT3B0aW9uPlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0pfVxyXG4gICAgICAgIHtudW1PZlJ1bnRpbWVEcyA+IDAgJiYgdXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMCAmJiA8T3B0aW9uIGRpdmlkZXIvPn1cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIDxPcHRpb24gaGVhZGVyPntnZXRJMThuTWVzc2FnZSgncnVudGltZScpfTwvT3B0aW9uPn1cclxuICAgICAgICB7T2JqZWN0LmtleXMocnVudGltZURhdGFTb3VyY2VzID8/IHt9KS5tYXAoZHNJZCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkcyA9IHJ1bnRpbWVEYXRhU291cmNlc1tkc0lkXVxyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2RzSWR9IHZhbHVlPXtkc0lkfSBvbkNsaWNrPXsoKSA9PiB7IGhhbmRsZVJ1bnRpbWVEYXRhU291cmNlQ2hhbmdlKGRzSWQpIH19PlxyXG4gICAgICAgICAgICAgIHtkcy5nZXRMYWJlbCgpfVxyXG4gICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgIClcclxuICAgICAgICB9KX1cclxuICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdtdC0xIGZvbnQtaXRhbGljJyBjc3M9e2Nzc2Bjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItaGludCk7YH0+e2dldEkxOG5NZXNzYWdlKCdzZWxlY3RlZFJlY29yZHMnLCB7IG51bTogY291bnQgfSl9PC9kaXY+XHJcbiAgICAgIHtzcGF0aWFsUmVsYXRpb25zPy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2IGNzcz17bWFyZ2luU3R5bGV9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtdHJ1bmNhdGUgdGl0bGUzIG1iLTAnPntnZXRJMThuTWVzc2FnZSgncmVsYXRpb25zaGlwJyl9PC9kaXY+XHJcbiAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZWxhdGlvbnNoaXAnKX1cclxuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRSZWxhdGlvbn1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNwYXRpYWxSZWxhdGlvbkNoYW5nZX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3NwYXRpYWxSZWxhdGlvbnMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpdGVtfSB2YWx1ZT17aXRlbX0+e2dldExhYmVsT2ZTcGF0aWFsUmVsYXRpb24oaXRlbSl9PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9KX1cclxuICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICB7ZW5hYmxlQnVmZmVyICYmIChcclxuICAgICAgICA8ZGl2IHJvbGU9J2dyb3VwJyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX0gY3NzPXttYXJnaW5TdHlsZX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGl0bGUzIHRleHQtdHJ1bmNhdGUnPntnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX08L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggbXQtMSc+XHJcbiAgICAgICAgICAgIDxCdWZmZXJJbnB1dCBkaXN0YW5jZT17YnVmZmVyRGlzdGFuY2V9IHVuaXQ9e2J1ZmZlclVuaXR9IG9uQnVmZmVyQ2hhbmdlPXtvbkJ1ZmZlckNoYW5nZX0vPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IHVzZURhdGFTb3VyY2U9e2N1cnJlbnREYXRhU291cmNlfSBkYXRhU291cmNlPXtydW50aW1lRGF0YVNvdXJjZX0gb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2V9IC8+XHJcbiAgICAgIHt1c2VEYXRhU291cmNlcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIGRhdGFzb3VyY2UgaXMgY3JlYXRlZFxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfSB1c2VEYXRhU291cmNlPXtpdGVtfS8+XHJcbiAgICAgICAgKVxyXG4gICAgICB9KX1cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIGpzeCwgbG9hZEFyY0dJU0pTQVBJTW9kdWxlLCB0eXBlIEltbXV0YWJsZUFycmF5IH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBKaW11TWFwVmlld0NvbXBvbmVudCwgdHlwZSBKaW11TWFwVmlldywgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xyXG5pbXBvcnQgdHlwZSB7IENyZWF0ZVRvb2xUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgbWFwV2lkZ2V0SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBvbkdlb21ldHJ5Q2hhbmdlOiAoZ2VvbTogX19lc3JpLkdlb21ldHJ5LCBsYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLCBncmFwaGljPzogX19lc3JpLkdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdlb21ldHJ5RnJvbU1hcCAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvbkdlb21ldHJ5Q2hhbmdlLCBtYXBXaWRnZXRJZHMgfSA9IHByb3BzXHJcbiAgY29uc3QgW2ppbXVNYXBWaWV3LCBzZXRKaW11TWFwVmlld10gPSBSZWFjdC51c2VTdGF0ZTxKaW11TWFwVmlldz4obnVsbClcclxuICBjb25zdCBQb2x5Z29uUmVmID0gUmVhY3QudXNlUmVmPHR5cGVvZiBfX2VzcmkuUG9seWdvbj4obnVsbClcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChqaW11TWFwVmlldz8udmlldykge1xyXG4gICAgICBsZXQgaGFuZGxlcjogSUhhbmRsZVxyXG4gICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGUoJ2VzcmkvY29yZS9yZWFjdGl2ZVV0aWxzJykudGhlbigocmVhY3RpdmVVdGlsczogX19lc3JpLnJlYWN0aXZlVXRpbHMpID0+IHtcclxuICAgICAgICBoYW5kbGVyID0gcmVhY3RpdmVVdGlscy53YXRjaCgoKSA9PiBqaW11TWFwVmlldy52aWV3LmV4dGVudCwgKGV4dGVudDogX19lc3JpLkV4dGVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKFBvbHlnb25SZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKFBvbHlnb25SZWYuY3VycmVudC5mcm9tRXh0ZW50KGV4dGVudCkpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9nZW9tZXRyeS9Qb2x5Z29uJ10pLnRoZW4obW9kdWxlcyA9PiB7XHJcbiAgICAgICAgICAgICAgUG9seWdvblJlZi5jdXJyZW50ID0gbW9kdWxlc1swXVxyXG4gICAgICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoUG9seWdvblJlZi5jdXJyZW50LmZyb21FeHRlbnQoZXh0ZW50KSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIHNldCBpbml0aWFsIGV4dGVudFxyXG4gICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoamltdU1hcFZpZXcudmlldy5leHRlbnQpXHJcbiAgICAgIH0pXHJcbiAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgIGhhbmRsZXIucmVtb3ZlKClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbamltdU1hcFZpZXcsIG9uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XHJcbiAgICBzZXRKaW11TWFwVmlldyhqaW11TWFwVmlldz8udmlldyAhPSBudWxsID8gamltdU1hcFZpZXcgOiBudWxsKVxyXG4gIH0sIFtdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICB7XHJcbiAgICAgICAgbWFwV2lkZ2V0SWRzPy5tYXAoKG1hcFdpZGdldElkLCB4KSA9PiAoXHJcbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnRcclxuICAgICAgICAgICAga2V5PXt4fSB1c2VNYXBXaWRnZXRJZD17bWFwV2lkZ2V0SWR9IG9uQWN0aXZlVmlld0NoYW5nZT17aGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApKVxyXG4gICAgICB9XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIHR5cGUgSW1tdXRhYmxlQXJyYXksIG1vZHVsZUxvYWRlciwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgdHlwZSAqIGFzIGppbXVNYXAgZnJvbSAnamltdS11aS9hZHZhbmNlZC9tYXAnXG5pbXBvcnQgeyBDcmVhdGVUb29sVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IEVudGl0eVN0YXR1c1R5cGUsIFN0YXR1c0luZGljYXRvciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5leHBvcnQgaW50ZXJmYWNlIEludGVyYWN0aXZlRHJhd1Byb3BzIHtcbiAgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgdG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cbiAgb25EcmF3RW5kOiAoZ3JhcGhpYzogX19lc3JpLkdyYXBoaWMsIGdldExheWVyRnVuPywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4gdm9pZFxufVxuXG5jb25zdCBza2V0Y2hUb29sSW5mb01hcCA9IHtcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvaW50XTogeyBkcmF3VG9vbE5hbWU6ICdwb2ludCcsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcG9pbnQnLCB0b29sSW5kZXg6IDAgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvbHlsaW5lXTogeyBkcmF3VG9vbE5hbWU6ICdwb2x5bGluZScsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcG9seWxpbmUnLCB0b29sSW5kZXg6IDQgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvbHlnb25dOiB7IGRyYXdUb29sTmFtZTogJ3BvbHlnb24nLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvbHlnb24nLCB0b29sSW5kZXg6IDIgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlJlY3RhbmdsZV06IHtcbiAgICBkcmF3VG9vbE5hbWU6ICdyZWN0YW5nbGUnLFxuICAgIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tY2hlY2tib3gtdW5jaGVja2VkJyxcbiAgICB0b29sSW5kZXg6IDFcbiAgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLkNpcmNsZV06IHsgZHJhd1Rvb2xOYW1lOiAnY2lyY2xlJywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1yYWRpby11bmNoZWNrZWQnLCB0b29sSW5kZXg6IDMgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gSW50ZXJhY3RpdmVEcmF3IChwcm9wczogSW50ZXJhY3RpdmVEcmF3UHJvcHMpIHtcbiAgY29uc3QgeyB0b29sVHlwZXMgPSBbXSwgamltdU1hcFZpZXcsIG9uRHJhd0VuZCwgd2lkZ2V0SWQgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IFttYXBNb2R1bGUsIHNldE1hcE1vZHVsZV0gPSBSZWFjdC51c2VTdGF0ZTx0eXBlb2YgamltdU1hcD4obnVsbClcbiAgY29uc3QgZ2V0TGF5ZXJGdW5SZWYgPSBSZWFjdC51c2VSZWY8KCkgPT4gX19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBfX2VzcmkuTWFwTm90ZXNMYXllcj4obnVsbClcbiAgY29uc3QgZ3JhcGhpY1JlZiA9IFJlYWN0LnVzZVJlZihudWxsKVxuICBjb25zdCBbY2xlYXJBZnRlckFwcGx5LCBzZXRDbGVhckFmdGVyQXBwbHldID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG5cbiAgY29uc3QgdmlzaWJsZUVsZW1lbnRzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZVRvb2xzOiBPYmplY3QuZW50cmllcyhza2V0Y2hUb29sSW5mb01hcCkucmVkdWNlKFxuICAgICAgICAocmVzdWx0LCBba2V5LCB2YWx1ZV0pID0+ICh7IC4uLnJlc3VsdCwgW3ZhbHVlLmRyYXdUb29sTmFtZV06IHRvb2xUeXBlcy5pbmNsdWRlcyhrZXkgYXMgQ3JlYXRlVG9vbFR5cGUpIH0pLFxuICAgICAgICB7IHBvaW50OiBmYWxzZSB9XG4gICAgICApIGFzIGFueSxcbiAgICAgIHNlbGVjdGlvblRvb2xzOiB7XG4gICAgICAgICdsYXNzby1zZWxlY3Rpb24nOiBmYWxzZSxcbiAgICAgICAgJ3JlY3RhbmdsZS1zZWxlY3Rpb24nOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHNldHRpbmdzTWVudTogZmFsc2UsXG4gICAgICB1bmRvUmVkb01lbnU6IGZhbHNlLFxuICAgICAgZGVsZXRlQnV0dG9uOiB0cnVlXG4gICAgfVxuICB9LCBbdG9vbFR5cGVzXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBtb2R1bGVMb2FkZXIubG9hZE1vZHVsZTx0eXBlb2YgamltdU1hcD4oJ2ppbXUtdWkvYWR2YW5jZWQvbWFwJykudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBzZXRNYXBNb2R1bGUocmVzdWx0KVxuICAgIH0pXG4gIH0pXG5cbiAgY29uc3QgaGFuZGxlRHJhd1Rvb2xDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVEcmF3VG9vbHNSZWY6IGppbXVNYXAuSmltdURyYXdDcmVhdGVkRGVzY3JpcHRvcikgPT4ge1xuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgPSBqaW11RHJhd1Rvb2xzUmVmLmdldEdyYXBoaWNzTGF5ZXJcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlRHJhd1N0YXJ0ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgKChnZXRMYXllckZ1blJlZi5jdXJyZW50KSgpIGFzIF9fZXNyaS5HcmFwaGljc0xheWVyKS5yZW1vdmVBbGwoKVxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVEcmF3RW5kID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKGdyYXBoaWMpID0+IHtcbiAgICAgIGdyYXBoaWNSZWYuY3VycmVudCA9IGdyYXBoaWNcbiAgICAgIG9uRHJhd0VuZChncmFwaGljLCBnZXRMYXllckZ1blJlZi5jdXJyZW50LCBjbGVhckFmdGVyQXBwbHkpXG4gICAgfSxcbiAgICBbb25EcmF3RW5kLCBjbGVhckFmdGVyQXBwbHldXG4gIClcblxuICBjb25zdCBoYW5kbGVDbGVhcmVkID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGdyYXBoaWNSZWYuY3VycmVudCA9IG51bGxcbiAgICBvbkRyYXdFbmQobnVsbClcbiAgfSwgW29uRHJhd0VuZF0pXG5cbiAgY29uc3QgaGFuZGxlQ2xlYXJTZXR0aW5nQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBpZiAoZ3JhcGhpY1JlZi5jdXJyZW50KSB7XG4gICAgICBvbkRyYXdFbmQoZ3JhcGhpY1JlZi5jdXJyZW50LCBnZXRMYXllckZ1blJlZi5jdXJyZW50LCBlLnRhcmdldC5jaGVja2VkKVxuICAgIH1cbiAgICBzZXRDbGVhckFmdGVyQXBwbHkoZS50YXJnZXQuY2hlY2tlZClcbiAgfSwgW29uRHJhd0VuZF0pXG5cbiAgY29uc3QgSmltdURyYXcgPSBtYXBNb2R1bGU/LkppbXVEcmF3XG4gIGlmICghSmltdURyYXcpIHtcbiAgICByZXR1cm4gPFN0YXR1c0luZGljYXRvciBzdGF0dXNUeXBlPXtFbnRpdHlTdGF0dXNUeXBlLkxvYWRpbmd9IC8+XG4gIH1cbiAgY29uc3QgaXNBdmFpbGFibGUgPSBPYmplY3Qua2V5cyh2aXNpYmxlRWxlbWVudHMuY3JlYXRlVG9vbHMpLnNvbWUodG9vbE5hbWUgPT4gdmlzaWJsZUVsZW1lbnRzLmNyZWF0ZVRvb2xzW3Rvb2xOYW1lXSlcbiAgaWYgKCFpc0F2YWlsYWJsZSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPEppbXVEcmF3XG4gICAgICAgIGppbXVNYXBWaWV3PXtqaW11TWFwVmlld31cbiAgICAgICAgb3BlcmF0b3JXaWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgIGRpc2FibGVTeW1ib2xTZWxlY3RvclxuICAgICAgICBkcmF3aW5nT3B0aW9ucz17e1xuICAgICAgICAgIGNyZWF0aW9uTW9kZTogbWFwTW9kdWxlLkppbXVEcmF3Q3JlYXRpb25Nb2RlLlNpbmdsZSxcbiAgICAgICAgICB1cGRhdGVPbkdyYXBoaWNDbGljazogZmFsc2UsXG4gICAgICAgICAgdmlzaWJsZUVsZW1lbnRzOiB2aXNpYmxlRWxlbWVudHNcbiAgICAgICAgfX1cbiAgICAgICAgdWlPcHRpb25zPXt7XG4gICAgICAgICAgaXNIaWRlQm9yZGVyOiB0cnVlXG4gICAgICAgIH19XG4gICAgICAgIG9uSmltdURyYXdDcmVhdGVkPXtoYW5kbGVEcmF3VG9vbENyZWF0ZWR9XG4gICAgICAgIG9uRHJhd2luZ1N0YXJ0ZWQ9e2hhbmRsZURyYXdTdGFydH1cbiAgICAgICAgb25EcmF3aW5nRmluaXNoZWQ9e2hhbmRsZURyYXdFbmR9XG4gICAgICAgIG9uRHJhd2luZ0NsZWFyZWQ9e2hhbmRsZUNsZWFyZWR9XG4gICAgICAvPlxuICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgIDxDaGVja2JveCBjaGVja2VkPXtjbGVhckFmdGVyQXBwbHl9IG9uQ2hhbmdlPXtoYW5kbGVDbGVhclNldHRpbmdDaGFuZ2V9IGNsYXNzTmFtZT0nbXItMicgLz5cbiAgICAgICAge2dldEkxOG5NZXNzYWdlKCdjbGVhckRyYXdpbmcnKX1cbiAgICAgIDwvbGFiZWw+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBDT05TVEFOVFMsXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCxcbiAgY2xhc3NOYW1lcyxcbiAgaG9va3Ncbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTG9hZGluZywgTG9hZGluZ1R5cGUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCBMaXN0RGlyZWN0aW9uIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgRW50aXR5U3RhdHVzVHlwZSB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IHsgUXVlcnlSZXN1bHRJdGVtIH0gZnJvbSAnLi9xdWVyeS1yZXN1bHQtaXRlbSdcbmltcG9ydCB7IGV4ZWN1dGVRdWVyeSwgZ2V0UG9wdXBUZW1wbGF0ZSB9IGZyb20gJy4vcXVlcnktdXRpbHMnXG5pbXBvcnQgeyB1c2VBdXRvSGVpZ2h0IH0gZnJvbSAnLi91c2VBdXRvSGVpZ2h0J1xuXG5jb25zdCB7IHVzZVJlZiwgdXNlU3RhdGUgfSA9IFJlYWN0XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGF6eUxpc3RQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgcmVzdWx0Q291bnQ6IG51bWJlclxuICByZWNvcmRzOiBEYXRhUmVjb3JkW11cbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4gIC8qKiBXaGV0aGVyIHJlc3VsdCBpdGVtcyBzaG91bGQgYmUgZXhwYW5kZWQgYnkgZGVmYXVsdC4gQ29udHJvbGxlZCBieSBleHBhbmQvY29sbGFwc2UgYWxsIGJ1dHRvbi4gKi9cbiAgZXhwYW5kQnlEZWZhdWx0PzogYm9vbGVhblxuICBkaXJlY3Rpb246IExpc3REaXJlY3Rpb25cbiAgb25Fc2NhcGU6ICgpID0+IHZvaWRcbiAgZGVmYXVsdFBhZ2VTaXplPzogbnVtYmVyXG4gIG9uUmVuZGVyRG9uZT86IChvcHRpb25zOiB7IGRhdGFJdGVtczogYW55W10gfSkgPT4gdm9pZFxuICBvblNlbGVjdENoYW5nZTogKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIG9uUmVtb3ZlOiAoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbn1cblxuY29uc3QgZ2V0U3R5bGUgPSAoaXNBdXRvSGVpZ2h0OiBib29sZWFuKSA9PiB7XG4gIHJldHVybiBjc3NgXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAwfTtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBtYXgtaGVpZ2h0OiAke2lzQXV0b0hlaWdodCA/ICdjYWxjKDYxLjh2aCAtIDEwMHB4KScgOiAnbm9uZSd9O1xuXG4gICAgLnF1ZXJ5LXJlc3VsdC1pdGVtICsgLnF1ZXJ5LXJlc3VsdC1pdGVtIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAwLjVyZW07XG4gICAgICBtYXJnaW4tdG9wOiAwO1xuICAgIH1cblxuICAgICYudmVydGljYWwge1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIC5saXN0LWl0ZW1zIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICAuZmVhdHVyZS1pbmZvLWNvbXBvbmVudCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAucXVlcnktcmVzdWx0LWl0ZW0gKyAucXVlcnktcmVzdWx0LWl0ZW0ge1xuICAgICAgICBtYXJnaW4tbGVmdDogMDtcbiAgICAgICAgbWFyZ2luLXRvcDogMC41cmVtO1xuICAgICAgfVxuICAgIH1cbiAgICAubGlzdC1pdGVtcyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgICAubGF6eWxvYWQtZGV0ZWN0b3Ige1xuICAgICAgaGVpZ2h0OiAycHg7XG4gICAgICB3aWR0aDogMnB4O1xuICAgICAgb3BhY2l0eTogMDtcbiAgICB9XG4gIGBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIExhenlMaXN0IChwcm9wczogTGF6eUxpc3RQcm9wcykge1xuICBjb25zdCB7XG4gICAgd2lkZ2V0SWQsXG4gICAgb3V0cHV0RFMsXG4gICAgcXVlcnlQYXJhbXMsXG4gICAgcmVzdWx0Q291bnQsXG4gICAgcmVjb3JkcyxcbiAgICBxdWVyeUl0ZW0sXG4gICAgZGlyZWN0aW9uLFxuICAgIG9uUmVuZGVyRG9uZSxcbiAgICBvbkVzY2FwZSxcbiAgICBvblNlbGVjdENoYW5nZSxcbiAgICBvblJlbW92ZSxcbiAgICBkZWZhdWx0UGFnZVNpemUgPSBDT05TVEFOVFMuREVGQVVMVF9RVUVSWV9QQUdFX1NJWkVcbiAgfSA9IHByb3BzXG4gIGNvbnN0IFtkYXRhSXRlbXMsIHNldERhdGFJdGVtc10gPSB1c2VTdGF0ZShyZWNvcmRzKVxuICBjb25zdCBbcG9wdXBUZW1wbGF0ZSwgc2V0UG9wdXBUZW1wbGF0ZV0gPSB1c2VTdGF0ZTxhbnk+KClcbiAgY29uc3QgW2RlZmF1bHRQb3B1cFRlbXBsYXRlLCBzZXREZWZhdWx0UG9wdXBUZW1wbGF0ZV0gPSB1c2VTdGF0ZTxhbnk+KClcbiAgY29uc3QgW2xvYWRTdGF0dXMsIHNldExvYWRTdGF0dXNdID0gdXNlU3RhdGU8RW50aXR5U3RhdHVzVHlwZT4oRW50aXR5U3RhdHVzVHlwZS5Jbml0KVxuICBjb25zdCBkYXRhSXRlbXNSZWYgPSBob29rcy51c2VMYXRlc3QoZGF0YUl0ZW1zKVxuICBjb25zdCByZXN1bHRDb3VudFJlZiA9IGhvb2tzLnVzZUxhdGVzdChyZXN1bHRDb3VudClcbiAgY29uc3QgbG9hZFN0YXR1c1JlZiA9IGhvb2tzLnVzZUxhdGVzdChsb2FkU3RhdHVzKVxuICBjb25zdCBhbGxEYXRhSXRlbXNMb2FkZWRSZWYgPSBob29rcy51c2VMYXRlc3QoZGF0YUl0ZW1zPy5sZW5ndGggPT09IHJlc3VsdENvdW50KVxuICBjb25zdCBwYWdlUmVmID0gdXNlUmVmKDApXG4gIGNvbnN0IHJlc3VsdENvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBlbCA9IHVzZVJlZihudWxsKVxuICBjb25zdCBpc0F1dG9IZWlnaHQgPSB1c2VBdXRvSGVpZ2h0KClcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHBhZ2VSZWYuY3VycmVudCA9IDFcbiAgICByZXN1bHRDb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxUb3AgPSAwXG4gICAgc2V0RGF0YUl0ZW1zKHJlY29yZHMpXG4gIH0sIFtyZWNvcmRzXSlcblxuICBjb25zdCBsb2FkQnlQYWdlcyA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoYWxsRGF0YUl0ZW1zTG9hZGVkUmVmLmN1cnJlbnQgfHwgbG9hZFN0YXR1c1JlZi5jdXJyZW50ID09PSBFbnRpdHlTdGF0dXNUeXBlLkxvYWRpbmcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBwYWdlUmVmLmN1cnJlbnQgPSBwYWdlUmVmLmN1cnJlbnQgKyAxXG4gICAgc2V0TG9hZFN0YXR1cyhFbnRpdHlTdGF0dXNUeXBlLkxvYWRpbmcpXG5cbiAgICBpZiAoIXF1ZXJ5UGFyYW1zLnBhZ2VTaXplKSB7XG4gICAgICBxdWVyeVBhcmFtcy5wYWdlU2l6ZSA9IGRlZmF1bHRQYWdlU2l6ZVxuICAgIH1cbiAgICBjb25zdCB7IHJlY29yZHMgfSA9IGF3YWl0IGV4ZWN1dGVRdWVyeSh3aWRnZXRJZCwgcXVlcnlJdGVtLCBvdXRwdXREUywge1xuICAgICAgLi4ucXVlcnlQYXJhbXMsXG4gICAgICBwYWdlOiBwYWdlUmVmLmN1cnJlbnRcbiAgICB9KVxuICAgIGlmIChyZXN1bHRDb3VudFJlZi5jdXJyZW50ID4gMCAmJiBkYXRhSXRlbXNSZWYuY3VycmVudC5sZW5ndGggKyByZWNvcmRzLmxlbmd0aCA+PSByZXN1bHRDb3VudFJlZi5jdXJyZW50KSB7XG4gICAgICBhbGxEYXRhSXRlbXNMb2FkZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlZEl0ZW1zID0gZGF0YUl0ZW1zUmVmLmN1cnJlbnQuY29uY2F0KHJlY29yZHMpXG4gICAgc2V0RGF0YUl0ZW1zKHVwZGF0ZWRJdGVtcylcbiAgICBvblJlbmRlckRvbmU/Lih7XG4gICAgICBkYXRhSXRlbXM6IG91dHB1dERTLmdldEFsbExvYWRlZFJlY29yZHMoKVxuICAgIH0pXG4gICAgc2V0TG9hZFN0YXR1cyhFbnRpdHlTdGF0dXNUeXBlLkxvYWRlZClcbiAgfVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZ2V0UG9wdXBUZW1wbGF0ZShvdXRwdXREUywgcXVlcnlJdGVtKS50aGVuKChycykgPT4ge1xuICAgICAgc2V0UG9wdXBUZW1wbGF0ZShycy5wb3B1cFRlbXBsYXRlKVxuICAgICAgc2V0RGVmYXVsdFBvcHVwVGVtcGxhdGUocnMuZGVmYXVsdFBvcHVwVGVtcGxhdGUpXG4gICAgfSlcbiAgfSwgW291dHB1dERTLCBxdWVyeUl0ZW1dKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGNvbnN0IGVsTG9hZERldGVjdG9yID0gZWw/LmN1cnJlbnRcbiAgICBpZiAoZWxMb2FkRGV0ZWN0b3IpIHtcbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGlmIChlbnRyaWVzWzBdLmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgbG9hZEJ5UGFnZXMoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgb2JzZXJ2ZXI/Lm9ic2VydmUoZWxMb2FkRGV0ZWN0b3IpXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBvYnNlcnZlcj8uZGlzY29ubmVjdCgpXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZUtleVVwID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBvbkVzY2FwZSgpXG4gICAgfVxuICB9LCBbb25Fc2NhcGVdKVxuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICcgJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICB9XG4gIH0sIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBvbktleVVwPXtoYW5kbGVLZXlVcH0gb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoeyB2ZXJ0aWNhbDogZGlyZWN0aW9uID09PSBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsIH0pfSBjc3M9e2dldFN0eWxlKGlzQXV0b0hlaWdodCl9IHJlZj17cmVzdWx0Q29udGFpbmVyUmVmfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsaXN0LWl0ZW1zIHB4LTQgcHktMScgcm9sZT0nbGlzdGJveCc+XG4gICAgICAgIHtkYXRhSXRlbXM/Lm1hcCgoZGF0YUl0ZW0pID0+IChcbiAgICAgICAgICA8UXVlcnlSZXN1bHRJdGVtXG4gICAgICAgICAgICBrZXk9e2RhdGFJdGVtLmdldElkKCl9XG4gICAgICAgICAgICBkYXRhPXtkYXRhSXRlbSBhcyBGZWF0dXJlRGF0YVJlY29yZH1cbiAgICAgICAgICAgIGRhdGFTb3VyY2U9e291dHB1dERTfVxuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgcG9wdXBUZW1wbGF0ZT17cG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlPXtkZWZhdWx0UG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17cHJvcHMuZXhwYW5kQnlEZWZhdWx0ID8/IHRydWV9XG4gICAgICAgICAgICBvbkNsaWNrPXtvblNlbGVjdENoYW5nZX1cbiAgICAgICAgICAgIG9uUmVtb3ZlPXtvblJlbW92ZX1cbiAgICAgICAgICAvPlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiByZWY9e2VsfSBjbGFzc05hbWU9J2xhenlsb2FkLWRldGVjdG9yJz5cbiAgICAgICAgJm5ic3A7XG4gICAgICA8L2Rpdj5cbiAgICAgIHtsb2FkU3RhdHVzID09PSBFbnRpdHlTdGF0dXNUeXBlLkxvYWRpbmcgJiYgPExvYWRpbmcgdHlwZT17TG9hZGluZ1R5cGUuRG9udXR9IC8+fVxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBMb2FkaW5nLCBMb2FkaW5nVHlwZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBzdHlsZWQgfSBmcm9tICdqaW11LXRoZW1lJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5cbmNvbnN0IFJvb3QgPSBzdHlsZWQuZGl2YFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICByaWdodDogMDtcbiAgbGVmdDogMDtcbiAgei1pbmRleDogMjtcblxuICAubG9hZGluZy1jb250ZW50IHtcbiAgICAubG9hZGluZy10aXAge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgfVxuYFxuZXhwb3J0IGZ1bmN0aW9uIExvYWRpbmdSZXN1bHQgKCkge1xuICBjb25zdCB0cmFuc2xhdGUgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgcmV0dXJuIChcbiAgICA8Um9vdD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsb2FkaW5nLWNvbnRlbnQgdy0xMDAgcHgtNCBkLWZsZXggZmxleC1jb2x1bW4ganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICA8ZGl2IHJvbGU9J2FsZXJ0JyBhcmlhLWxpdmU9J2Fzc2VydGl2ZScgY2xhc3NOYW1lPSd0ZXh0LXBhcGVyJz5cbiAgICAgICAgICB7dHJhbnNsYXRlKCdyZXRyaWV2aW5nJyl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8TG9hZGluZyBjbGFzc05hbWU9J2xvYWRpbmctdGlwIG10LTgnIHR5cGU9e0xvYWRpbmdUeXBlLkRvbnV0fS8+XG4gICAgICA8L2Rpdj5cbiAgICA8L1Jvb3Q+XG4gIClcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgY2xhc3NOYW1lcyxcbiAgQ09OU1RBTlRTLFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXG4gIHR5cGUgUXVlcnlQYXJhbXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgUGFnaW5hdGlvbiwgTG9hZGluZywgTG9hZGluZ1R5cGUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgTGlzdERpcmVjdGlvbiwgdHlwZSBRdWVyeUl0ZW1UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgRW50aXR5U3RhdHVzVHlwZSB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IHsgUXVlcnlSZXN1bHRJdGVtIH0gZnJvbSAnLi9xdWVyeS1yZXN1bHQtaXRlbSdcbmltcG9ydCB7IGV4ZWN1dGVRdWVyeSwgZ2V0UG9wdXBUZW1wbGF0ZSB9IGZyb20gJy4vcXVlcnktdXRpbHMnXG5pbXBvcnQgeyB1c2VBdXRvSGVpZ2h0IH0gZnJvbSAnLi91c2VBdXRvSGVpZ2h0J1xuXG5jb25zdCB7IHVzZVJlZiwgdXNlU3RhdGUgfSA9IFJlYWN0XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnaW5nTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICByZXN1bHRDb3VudDogbnVtYmVyXG4gIG1heFBlclBhZ2U6IG51bWJlclxuICByZWNvcmRzOiBEYXRhUmVjb3JkW11cbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4gIC8qKiBXaGV0aGVyIHJlc3VsdCBpdGVtcyBzaG91bGQgYmUgZXhwYW5kZWQgYnkgZGVmYXVsdC4gQ29udHJvbGxlZCBieSBleHBhbmQvY29sbGFwc2UgYWxsIGJ1dHRvbi4gKi9cbiAgZXhwYW5kQnlEZWZhdWx0PzogYm9vbGVhblxuICBvbkVzY2FwZTogKCkgPT4gdm9pZFxuICBkaXJlY3Rpb24/OiBMaXN0RGlyZWN0aW9uXG4gIGRlZmF1bHRQYWdlU2l6ZT86IG51bWJlclxuICBvblJlbmRlckRvbmU/OiAob3B0aW9uczogeyBkYXRhSXRlbXM6IGFueVtdLCBwYWdlU2l6ZT86IG51bWJlciwgcGFnZT86IG51bWJlciB9KSA9PiB2b2lkXG4gIG9uU2VsZWN0Q2hhbmdlOiAoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbiAgb25SZW1vdmU6IChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxufVxuXG5jb25zdCBnZXRTdHlsZSA9IChpc0F1dG9IZWlnaHQ6IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgICAubGlzdF9pdGVtcyB7XG4gICAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAwfTtcbiAgICAgIG1heC1oZWlnaHQ6ICR7aXNBdXRvSGVpZ2h0ID8gJ2NhbGMoNjEuOHZoIC0gMTAwcHgpJyA6ICdub25lJ307XG4gICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgIH1cblxuICAgIC5xdWVyeS1yZXN1bHQtaXRlbSArIC5xdWVyeS1yZXN1bHQtaXRlbSB7XG4gICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICB9XG5cbiAgICAmLnZlcnRpY2FsIHtcbiAgICAgIC5saXN0X2l0ZW1zIHtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIH1cbiAgICAgIC5mZWF0dXJlLWluZm8tY29tcG9uZW50IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgICAucXVlcnktcmVzdWx0LWl0ZW0gKyAucXVlcnktcmVzdWx0LWl0ZW0ge1xuICAgICAgICBtYXJnaW4tdG9wOiAwLjVyZW07XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAwO1xuICAgICAgfVxuICAgIH1cbiAgICAucGFnZS1zaXplLXNlbGVjdG9yIHtcbiAgICAgIHdpZHRoOiBhdXRvO1xuICAgIH1cblxuICAgIC5xdWVyeS1lZGl0YWJsZS1zZWxlY3Qge1xuICAgICAgLmppbXUtbnVtZXJpYy1pbnB1dCB7XG4gICAgICAgIHdpZHRoOiA2MHB4O1xuICAgICAgfVxuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gUGFnaW5nTGlzdCAocHJvcHM6IFBhZ2luZ0xpc3RQcm9wcykge1xuICBjb25zdCB7XG4gICAgd2lkZ2V0SWQsXG4gICAgb3V0cHV0RFMsXG4gICAgcXVlcnlJdGVtLFxuICAgIHF1ZXJ5UGFyYW1zLFxuICAgIHJlc3VsdENvdW50LFxuICAgIHJlY29yZHMsXG4gICAgb25SZW5kZXJEb25lLFxuICAgIG9uU2VsZWN0Q2hhbmdlLFxuICAgIG9uUmVtb3ZlLFxuICAgIGRpcmVjdGlvbixcbiAgICBvbkVzY2FwZSxcbiAgICBkZWZhdWx0UGFnZVNpemUgPSBDT05TVEFOVFMuREVGQVVMVF9RVUVSWV9QQUdFX1NJWkVcbiAgfSA9IHByb3BzXG4gIGNvbnN0IFtkYXRhSXRlbXMsIHNldERhdGFJdGVtc10gPSB1c2VTdGF0ZShyZWNvcmRzKVxuICBjb25zdCBbcG9wdXBUZW1wbGF0ZSwgc2V0UG9wdXBUZW1wbGF0ZV0gPSB1c2VTdGF0ZTxhbnk+KClcbiAgY29uc3QgW2RlZmF1bHRQb3B1cFRlbXBsYXRlLCBzZXREZWZhdWx0UG9wdXBUZW1wbGF0ZV0gPSB1c2VTdGF0ZTxhbnk+KClcbiAgY29uc3QgW2xvYWRTdGF0dXMsIHNldExvYWRTdGF0dXNdID0gdXNlU3RhdGU8RW50aXR5U3RhdHVzVHlwZT4oRW50aXR5U3RhdHVzVHlwZS5Jbml0KVxuICBjb25zdCBwYWdlUmVmID0gdXNlUmVmKDEpXG4gIGNvbnN0IHBhZ2VTaXplUmVmID0gdXNlUmVmKGRlZmF1bHRQYWdlU2l6ZSlcbiAgY29uc3QgW3BhZ2VTaXplLCBzZXRQYWdlU2l6ZV0gPSB1c2VTdGF0ZShkZWZhdWx0UGFnZVNpemUpXG4gIGNvbnN0IGlzQXV0b0hlaWdodCA9IHVzZUF1dG9IZWlnaHQoKVxuXG4gIGNvbnN0IHBhZ2VTaXplT3B0aW9ucyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtkZWZhdWx0UGFnZVNpemVdXG4gICAgaWYgKE1hdGgucm91bmQoZGVmYXVsdFBhZ2VTaXplIC8gMikgIT09IHJlc3VsdFswXSkge1xuICAgICAgcmVzdWx0LnB1c2goTWF0aC5yb3VuZChkZWZhdWx0UGFnZVNpemUgLyAyKSlcbiAgICB9XG4gICAgaWYgKE1hdGgucm91bmQoZGVmYXVsdFBhZ2VTaXplIC8gNSkgIT09IHJlc3VsdFsxXSkge1xuICAgICAgcmVzdWx0LnB1c2goTWF0aC5yb3VuZChkZWZhdWx0UGFnZVNpemUgLyA1KSlcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5yZXZlcnNlKClcbiAgfSwgW2RlZmF1bHRQYWdlU2l6ZV0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBwYWdlUmVmLmN1cnJlbnQgPSAxXG4gICAgc2V0RGF0YUl0ZW1zKHJlY29yZHMpXG4gICAgc2V0UGFnZVNpemUocGFnZVNpemVSZWYuY3VycmVudClcbiAgfSwgW3JlY29yZHNdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZ2V0UG9wdXBUZW1wbGF0ZShvdXRwdXREUywgcXVlcnlJdGVtKS50aGVuKHJzID0+IHtcbiAgICAgIHNldFBvcHVwVGVtcGxhdGUocnMucG9wdXBUZW1wbGF0ZSlcbiAgICAgIHNldERlZmF1bHRQb3B1cFRlbXBsYXRlKHJzLmRlZmF1bHRQb3B1cFRlbXBsYXRlKVxuICAgIH0pXG4gIH0sIFtvdXRwdXREUywgcXVlcnlJdGVtXSlcblxuICBjb25zdCBsb2FkQnlQYWdlcyA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChjdXJyZW50UGFnZTogbnVtYmVyLCBzaXplOiBudW1iZXIpID0+IHtcbiAgICBwYWdlUmVmLmN1cnJlbnQgPSBjdXJyZW50UGFnZVxuICAgIHNldExvYWRTdGF0dXMoRW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nKVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeSh3aWRnZXRJZCwgcXVlcnlJdGVtLCBvdXRwdXREUywgeyAuLi5xdWVyeVBhcmFtcywgcGFnZTogY3VycmVudFBhZ2UsIHBhZ2VTaXplOiBzaXplIH0pXG4gICAgc2V0RGF0YUl0ZW1zKHJlc3VsdC5yZWNvcmRzKVxuICAgIG9uUmVuZGVyRG9uZT8uKHtcbiAgICAgIGRhdGFJdGVtczogb3V0cHV0RFMuZ2V0QWxsTG9hZGVkUmVjb3JkcygpLFxuICAgICAgcGFnZVNpemU6IHNpemUsXG4gICAgICBwYWdlOiBwYWdlUmVmLmN1cnJlbnRcbiAgICB9KVxuICAgIHNldExvYWRTdGF0dXMoRW50aXR5U3RhdHVzVHlwZS5Mb2FkZWQpXG4gIH0sIFtvblJlbmRlckRvbmUsIG91dHB1dERTLCBxdWVyeUl0ZW0sIHF1ZXJ5UGFyYW1zLCB3aWRnZXRJZF0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZGVmYXVsdFBhZ2VTaXplICE9PSBwYWdlU2l6ZVJlZi5jdXJyZW50KSB7XG4gICAgICBpZiAoZGVmYXVsdFBhZ2VTaXplIDwgcGFnZVNpemVSZWYuY3VycmVudCkge1xuICAgICAgICBzZXREYXRhSXRlbXMoZGF0YUl0ZW1zLnNsaWNlKDAsIGRlZmF1bHRQYWdlU2l6ZSkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkQnlQYWdlcygxLCBkZWZhdWx0UGFnZVNpemUpXG4gICAgICB9XG4gICAgICBwYWdlU2l6ZVJlZi5jdXJyZW50ID0gZGVmYXVsdFBhZ2VTaXplXG4gICAgICBzZXRQYWdlU2l6ZShkZWZhdWx0UGFnZVNpemUpXG4gICAgfVxuICB9LCBbZGVmYXVsdFBhZ2VTaXplLCBkYXRhSXRlbXMsIGxvYWRCeVBhZ2VzXSlcblxuICBjb25zdCBoYW5kbGVQYWdlU2l6ZUNoYW5nZSA9IChzaXplOiBudW1iZXIpID0+IHtcbiAgICBpZiAoc2l6ZSA+IDApIHtcbiAgICAgIHNldFBhZ2VTaXplKHNpemUpXG4gICAgICBsb2FkQnlQYWdlcygxLCBzaXplKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUtleVVwID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBvbkVzY2FwZSgpXG4gICAgfVxuICB9LCBbb25Fc2NhcGVdKVxuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICcgJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICB9XG4gIH0sIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBvbktleVVwPXtoYW5kbGVLZXlVcH0gb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoeyB2ZXJ0aWNhbDogZGlyZWN0aW9uID09PSBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsIH0pfSBjc3M9e2dldFN0eWxlKGlzQXV0b0hlaWdodCl9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2xpc3RfaXRlbXMgbWItMiBweC00IHB5LTEnIHJvbGU9J2xpc3Rib3gnPlxuICAgICAgICB7ZGF0YUl0ZW1zPy5tYXAoKGRhdGFJdGVtKSA9PiAoXG4gICAgICAgICAgPFF1ZXJ5UmVzdWx0SXRlbVxuICAgICAgICAgICAga2V5PXtkYXRhSXRlbS5nZXRJZCgpfVxuICAgICAgICAgICAgZGF0YT17ZGF0YUl0ZW0gYXMgRmVhdHVyZURhdGFSZWNvcmR9XG4gICAgICAgICAgICBkYXRhU291cmNlPXtvdXRwdXREU31cbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIHBvcHVwVGVtcGxhdGU9e3BvcHVwVGVtcGxhdGV9XG4gICAgICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZT17ZGVmYXVsdFBvcHVwVGVtcGxhdGV9XG4gICAgICAgICAgICBleHBhbmRCeURlZmF1bHQ9e3Byb3BzLmV4cGFuZEJ5RGVmYXVsdCA/PyB0cnVlfVxuICAgICAgICAgICAgb25DbGljaz17b25TZWxlY3RDaGFuZ2V9XG4gICAgICAgICAgICBvblJlbW92ZT17b25SZW1vdmV9XG4gICAgICAgICAgLz5cbiAgICAgICAgKSl9XG4gICAgICA8L2Rpdj5cbiAgICAgIHtsb2FkU3RhdHVzID09PSBFbnRpdHlTdGF0dXNUeXBlLkxvYWRpbmcgJiYgPExvYWRpbmcgdHlwZT17TG9hZGluZ1R5cGUuRG9udXR9Lz59XG4gICAgICB7cmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBhbGlnbi1pdGVtcy1jZW50ZXIgcHgtNCc+XG4gICAgICAgICAgPFBhZ2luYXRpb25cbiAgICAgICAgICAgIGNsYXNzTmFtZT0nZC1mbGV4IGp1c3RpZnktY29udGVudC1lbmQnXG4gICAgICAgICAgICBkaXNhYmxlZD17bG9hZFN0YXR1cyA9PT0gRW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nfVxuICAgICAgICAgICAgY3VycmVudD17cGFnZVJlZi5jdXJyZW50fVxuICAgICAgICAgICAgdG90YWxQYWdlPXtNYXRoLmNlaWwocmVzdWx0Q291bnQgLyBwYWdlU2l6ZSl9XG4gICAgICAgICAgICBvbkNoYW5nZVBhZ2U9eyhwYWdlTnVtKSA9PiBsb2FkQnlQYWdlcyhwYWdlTnVtLCBwYWdlU2l6ZSl9XG4gICAgICAgICAgICBwYWdlU2l6ZT17cGFnZVNpemV9XG4gICAgICAgICAgICBtYXhQYWdlU2l6ZT17MTAwMH1cbiAgICAgICAgICAgIHBhZ2VTaXplT3B0aW9ucz17cGFnZVNpemVPcHRpb25zfVxuICAgICAgICAgICAgb25QYWdlU2l6ZUNoYW5nZT17aGFuZGxlUGFnZVNpemVDaGFuZ2V9XG4gICAgICAgICAgICBzaG93U2l6ZUNoYW5nZXJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGpzeCxcbiAgY3NzLFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgY2xhc3NOYW1lc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgQ2xvc2VPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL2Nsb3NlJ1xuaW1wb3J0IEZlYXR1cmVJbmZvIGZyb20gJy4vY29tcG9uZW50cy9mZWF0dXJlLWluZm8nXG5pbXBvcnQgeyBMaXN0RGlyZWN0aW9uIH0gZnJvbSAnLi4vY29uZmlnJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlc3VsdEl0ZW1Qcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcG9wdXBUZW1wbGF0ZTogYW55XG4gIGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBhbnlcbiAgZGF0YTogRmVhdHVyZURhdGFSZWNvcmRcbiAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZVxuICBleHBhbmRCeURlZmF1bHQ6IGJvb2xlYW5cbiAgb25DbGljazogKHJlY29yZDogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbiAgb25SZW1vdmU6IChyZWNvcmQ6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG59XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICBvdmVyZmxvdzogYXV0bztcbiAgZmxleC1mbG93OiByb3c7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZmxleC1zaHJpbms6IDA7XG4gIG1pbi1oZWlnaHQ6IDJyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgJi5zZWxlY3RlZCB7XG4gICAgb3V0bGluZTogMnB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pO1xuICB9XG4gIFxuICAucmVtb3ZlLWJ1dHRvbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gICAgei1pbmRleDogMTA7XG4gICAgb3BhY2l0eTogMC43O1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycztcbiAgICBcbiAgICAmOmhvdmVyIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICB9XG5gXG5cbi8qKlxuICogUXVlcnlSZXN1bHRJdGVtIGNvbXBvbmVudCAtIGRpc3BsYXlzIGEgc2luZ2xlIHF1ZXJ5IHJlc3VsdCByZWNvcmRcbiAqIEZlYXR1cmVzOlxuICogLSBDbGlja2luZyB0aGUgaXRlbSB6b29tcyB0byB0aGUgZmVhdHVyZSBvbiB0aGUgbWFwXG4gKiAtIFJlbW92ZSBidXR0b24gKFgpIGluIHVwcGVyLXJpZ2h0IGNvcm5lciB0byByZW1vdmUgcmVjb3JkIGZyb20gcmVzdWx0c1xuICogLSBSZWNvcmRzIGFyZSBleHBhbmRlZCBieSBkZWZhdWx0IHRvIHNob3cgZnVsbCBmZWF0dXJlIGluZm9ybWF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBRdWVyeVJlc3VsdEl0ZW0gPSAocHJvcHM6IFJlc3VsdEl0ZW1Qcm9wcykgPT4ge1xuICBjb25zdCB7IHdpZGdldElkLCBkYXRhLCBkYXRhU291cmNlLCBwb3B1cFRlbXBsYXRlLCBkZWZhdWx0UG9wdXBUZW1wbGF0ZSwgb25DbGljaywgb25SZW1vdmUsIGV4cGFuZEJ5RGVmYXVsdCA9IGZhbHNlIH0gPSBwcm9wc1xuICBcbiAgLy8gQ2hlY2sgaWYgdGhpcyByZWNvcmQgaXMgY3VycmVudGx5IHNlbGVjdGVkXG4gIGNvbnN0IHNlbGVjdGVkID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+XG4gICAgc3RhdGUuZGF0YVNvdXJjZXNJbmZvPy5bZGF0YVNvdXJjZS5pZF0/LnNlbGVjdGVkSWRzPy5pbmNsdWRlcyhkYXRhLmdldElkKCkpXG4gIClcbiAgXG4gIC8vIERldGVybWluZSBpZiBsaXN0IGlzIGRpc3BsYXllZCB2ZXJ0aWNhbGx5IChhZmZlY3RzIEZlYXR1cmVJbmZvIGV4cGFuZGFiaWxpdHkpXG4gIGNvbnN0IGlzVmVydGljYWxBbGlnbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRMaXN0RGlyZWN0aW9uICE9PSBMaXN0RGlyZWN0aW9uLkhvcml6b250YWxcbiAgfSlcblxuICAvLyBIYW5kbGUgY2xpY2tpbmcgb24gdGhlIHJlc3VsdCBpdGVtIC0gem9vbXMgdG8gZmVhdHVyZSBvbiBtYXBcbiAgY29uc3QgaGFuZGxlQ2xpY2tSZXN1bHRJdGVtID0gUmVhY3QudXNlQ2FsbGJhY2soKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICAvLyBEb24ndCB0cmlnZ2VyIHpvb20gaWYgY2xpY2tpbmcgdGhlIHJlbW92ZSBidXR0b25cbiAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCcucmVtb3ZlLWJ1dHRvbicpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgb25DbGljayhkYXRhKVxuICB9LCBbb25DbGljaywgZGF0YV0pXG5cbiAgLy8gSGFuZGxlIGNsaWNraW5nIHRoZSByZW1vdmUgYnV0dG9uIC0gcmVtb3ZlcyByZWNvcmQgZnJvbSByZXN1bHRzIGFuZCBzZWxlY3Rpb25cbiAgY29uc3QgaGFuZGxlUmVtb3ZlID0gUmVhY3QudXNlQ2FsbGJhY2soKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpIC8vIFByZXZlbnQgdHJpZ2dlcmluZyB0aGUgaXRlbSBjbGljayBoYW5kbGVyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgb25SZW1vdmUoZGF0YSlcbiAgfSwgW29uUmVtb3ZlLCBkYXRhXSlcblxuICBjb25zdCBvbktleVVwID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRW50ZXInIHx8IGV2dC5rZXkgPT09ICcgJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgaGFuZGxlQ2xpY2tSZXN1bHRJdGVtKGV2dCBhcyBhbnkpXG4gICAgfVxuICB9LCBbaGFuZGxlQ2xpY2tSZXN1bHRJdGVtXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktcmVzdWx0LWl0ZW0nLCB7IHNlbGVjdGVkIH0pfVxuICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2tSZXN1bHRJdGVtfVxuICAgICAgb25LZXlVcD17b25LZXlVcH1cbiAgICAgIGNzcz17c3R5bGV9XG4gICAgICByb2xlPSdvcHRpb24nXG4gICAgICBhcmlhLXNlbGVjdGVkPXtzZWxlY3RlZH1cbiAgICAgIHRhYkluZGV4PXswfVxuICAgID5cbiAgICAgIDxGZWF0dXJlSW5mb1xuICAgICAgICBncmFwaGljPXtkYXRhLmZlYXR1cmUgYXMgX19lc3JpLkdyYXBoaWN9XG4gICAgICAgIHBvcHVwVGVtcGxhdGU9e3BvcHVwVGVtcGxhdGV9XG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlPXtkZWZhdWx0UG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgdG9nZ2xhYmxlPXtpc1ZlcnRpY2FsQWxpZ259XG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQnlEZWZhdWx0fVxuICAgICAgICBkYXRhU291cmNlPXtkYXRhU291cmNlfVxuICAgICAgLz5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgY2xhc3NOYW1lPVwicmVtb3ZlLWJ1dHRvblwiXG4gICAgICAgIGljb25cbiAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgdmFyaWFudD1cInRleHRcIlxuICAgICAgICBjb2xvcj1cImluaGVyaXRcIlxuICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZW1vdmV9XG4gICAgICAgIGFyaWEtbGFiZWw9XCJSZW1vdmUgcmVjb3JkXCJcbiAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogNHB4O1xuICAgICAgICAgIG1pbi13aWR0aDogYXV0bztcbiAgICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICAgIGB9XG4gICAgICA+XG4gICAgICAgIDxDbG9zZU91dGxpbmVkIHNpemU9ezE0fSAvPlxuICAgICAgPC9CdXR0b24+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBRdWVyeVBhcmFtcyxcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXG4gIEltbXV0YWJsZSxcbiAgaG9va3MsXG4gIE1lc3NhZ2VNYW5hZ2VyLFxuICBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXG4gIHR5cGUgRGF0YVJlY29yZFNldCxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZSxcbiAgRGF0YUFjdGlvbk1hbmFnZXIsXG4gIERhdGFMZXZlbCxcbiAgdXNlSW50bFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIEljb24sIFRvb2x0aXAsIERhdGFBY3Rpb25MaXN0LCBEYXRhQWN0aW9uTGlzdFN0eWxlIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCBGaWVsZHNUeXBlLCBQYWdpbmdUeXBlLCBMaXN0RGlyZWN0aW9uLCBSZXN1bHRTZWxlY3RNb2RlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBMYXp5TGlzdCB9IGZyb20gJy4vbGF6eS1saXN0J1xuaW1wb3J0IHsgUGFnaW5nTGlzdCB9IGZyb20gJy4vcGFnaW5nLWxpc3QnXG5pbXBvcnQgeyBjb21iaW5lRmllbGRzIH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcbmltcG9ydCB7IEFycm93TGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0J1xuaW1wb3J0IHsgRXhwYW5kQWxsT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwnXG5pbXBvcnQgeyBDb2xsYXBzZUFsbE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwnXG5pbXBvcnQgeyBnZXRFeHRyYUFjdGlvbnMgfSBmcm9tICcuLi9kYXRhLWFjdGlvbnMnXG5pbXBvcnQgeyBcbiAgc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMsIFxuICBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMsIFxuICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCxcbiAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2UgXG59IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgZGVidWdMb2dnZXIgfSBmcm9tICcuL2RlYnVnLWxvZ2dlcidcbmltcG9ydCB7IEVycm9yTWVzc2FnZSB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNSZXN1bHRQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcmVzdWx0Q291bnQ6IG51bWJlclxuICBtYXhQZXJQYWdlOiBudW1iZXJcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4gIG91dHB1dERTOiBEYXRhU291cmNlXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4gIGRlZmF1bHRQYWdlU2l6ZTogbnVtYmVyXG4gIHJlY29yZHM6IERhdGFSZWNvcmRbXVxuICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4gIG9uTmF2QmFjazogKGNsZWFyUmVzdWx0cz86IGJvb2xlYW4pID0+IHZvaWRcbn1cblxuY29uc3QgcmVzdWx0U3R5bGUgPSBjc3NgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgLnF1ZXJ5LXJlc3VsdF9faGVhZGVyIHtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XG4gIH1cblxuICAucXVlcnktcmVzdWx0LWNvbnRhaW5lciB7XG4gICAgZmxleDogMSAxIDA7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIG1pbi1oZWlnaHQ6IDA7XG4gIH1cblxuICAucXVlcnktcmVzdWx0LWluZm8ge1xuICAgIGhlaWdodDogMThweDtcbiAgfVxuYFxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrUmVzdWx0IChwcm9wczogUXVlcnlUYXNSZXN1bHRQcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5SXRlbSwgcXVlcnlQYXJhbXMsIHJlc3VsdENvdW50LCBtYXhQZXJQYWdlLCByZWNvcmRzLCBkZWZhdWx0UGFnZVNpemUsIHdpZGdldElkLCBvdXRwdXREUywgcnVudGltZVpvb21Ub1NlbGVjdGVkLCBvbk5hdkJhY2sgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IGludGwgPSB1c2VJbnRsKClcbiAgY29uc3QgW3F1ZXJ5RGF0YSwgc2V0UXVlcnlEYXRhXSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IFtzZWxlY3RlZFJlY29yZHMsIHNldFNlbGVjdGVkUmVjb3Jkc10gPSBSZWFjdC51c2VTdGF0ZTxEYXRhUmVjb3JkW10+KFtdKVxuICBjb25zdCBbcmVtb3ZlZFJlY29yZElkcywgc2V0UmVtb3ZlZFJlY29yZElkc10gPSBSZWFjdC51c2VTdGF0ZTxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKVxuICBcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgW2V4cGFuZEFsbCwgc2V0RXhwYW5kQWxsXSA9IFJlYWN0LnVzZVN0YXRlKGN1cnJlbnRJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCA/PyBmYWxzZSlcbiAgY29uc3QgYmFja0J0blJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IHNlbGVjdGVkIHRoZXNlIHJlY29yZHMgdG8gcHJldmVudCByZS1zZWxlY3Rpb24gd2hlbiBzd2l0Y2hpbmcgdGFic1xuICBjb25zdCBoYXNTZWxlY3RlZFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgdGhlIGxhc3QgcmVjb3JkcyB3ZSBzZWxlY3RlZCB0byBkZXRlY3Qgd2hlbiBuZXcgcmVjb3JkcyBjb21lIGluXG4gIGNvbnN0IGxhc3RTZWxlY3RlZFJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nW10+KFtdKVxuICAvLyBFcnJvciBzdGF0ZSBmb3IgdXNlci1mYWNpbmcgZXJyb3JzXG4gIGNvbnN0IFtzZWxlY3Rpb25FcnJvciwgc2V0U2VsZWN0aW9uRXJyb3JdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihudWxsKVxuXG4gIGNvbnN0IGV4dHJhQWN0aW9ucyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBnZXRFeHRyYUFjdGlvbnMod2lkZ2V0SWQsIG91dHB1dERTLCBpbnRsLCBxdWVyeUl0ZW0sIHJ1bnRpbWVab29tVG9TZWxlY3RlZClcbiAgfSwgW3dpZGdldElkLCBvdXRwdXREUywgaW50bCwgcXVlcnlJdGVtLCBydW50aW1lWm9vbVRvU2VsZWN0ZWRdKVxuXG4gIGNvbnN0IGVuYWJsZURhdGFBY3Rpb24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5lbmFibGVEYXRhQWN0aW9uID8/IHRydWVcbiAgfSlcblxuICBjb25zdCBwYWdpbmdUeXBlSW5Db25maWcgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0UGFnaW5nU3R5bGVcbiAgfSlcbiAgY29uc3QgZGlyZWN0aW9uVHlwZUluQ29uZmlnID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdExpc3REaXJlY3Rpb25cbiAgfSlcbiAgY29uc3QgcGFnaW5nVHlwZSA9IHBhZ2luZ1R5cGVJbkNvbmZpZyA/PyBQYWdpbmdUeXBlLk11bHRpUGFnZVxuICBjb25zdCBkaXJlY3Rpb24gPSBkaXJlY3Rpb25UeXBlSW5Db25maWcgPz8gTGlzdERpcmVjdGlvbi5WZXJ0aWNhbFxuXG4gIGNvbnN0IGFjdGlvbkRhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBkYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgICB0eXBlOiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCA+IDAgPyAnc2VsZWN0ZWQnIDogJ2xvYWRlZCcsXG4gICAgICByZWNvcmRzOiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCA+IDAgPyBzZWxlY3RlZFJlY29yZHMgOiAocXVlcnlEYXRhPy5yZWNvcmRzIHx8IFtdKSxcbiAgICAgIG5hbWU6IG91dHB1dERTPy5pZCxcbiAgICAgIGxhYmVsOiBvdXRwdXREUz8uZ2V0TGFiZWwoKVxuICAgIH1cbiAgICBpZiAoY3VycmVudEl0ZW0ucmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzICYmIGN1cnJlbnRJdGVtLnJlc3VsdERpc3BsYXlGaWVsZHMgIT0gbnVsbCkge1xuICAgICAgZGF0YVNldC5maWVsZHMgPSBjb21iaW5lRmllbGRzKGN1cnJlbnRJdGVtLnJlc3VsdERpc3BsYXlGaWVsZHMsIGN1cnJlbnRJdGVtLnJlc3VsdFRpdGxlRXhwcmVzc2lvbilcbiAgICB9IGVsc2UgaWYgKG91dHB1dERTICYmICdnZXRQb3B1cEluZm8nIGluIG91dHB1dERTKSB7XG4gICAgICAvLyB1c2UgZmllbGRzIGluIHBvcHVwIHRlbXBsYXRlXG4gICAgICBjb25zdCBwb3B1cEluZm8gPSAob3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSkuZ2V0UG9wdXBJbmZvKClcbiAgICAgIGlmIChwb3B1cEluZm8/LmZpZWxkSW5mb3MpIHtcbiAgICAgICAgZGF0YVNldC5maWVsZHMgPSBwb3B1cEluZm8uZmllbGRJbmZvcy5maWx0ZXIoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLnZpc2libGUpLm1hcCgoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVNldFxuICB9LCBbc2VsZWN0ZWRSZWNvcmRzLCBvdXRwdXREUywgcXVlcnlEYXRhLCBjdXJyZW50SXRlbV0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgLy8gZm9jdXMgdGhlIGJhY2sgYnV0dG9uIHdoZW4gaXQgaXMgcmVuZGVyZWRcbiAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gIH0pXG5cbiAgLyoqXG4gICAqIEVmZmVjdCBob29rIHRoYXQgcnVucyB3aGVuIG5ldyBxdWVyeSByZXN1bHRzIGFycml2ZS5cbiAgICogUmVzZXRzIHJlbW92ZWQgcmVjb3JkcywgZXhwYW5kIHN0YXRlLCBhbmQgcXVlcnkgZGF0YSBmb3IgdGhlIG5ldyByZXN1bHRzLlxuICAgKiBBbHNvIGhhbmRsZXMgYXV0by1zZWxlY3Rpb24gb2YgcmVjb3JkcyB3aGVuIHRoZXkgZmlyc3QgYXJyaXZlLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBSZXNldCByZW1vdmVkIHJlY29yZHMgd2hlbiBuZXcgcXVlcnkgcmVzdWx0cyBjb21lIGluXG4gICAgc2V0UmVtb3ZlZFJlY29yZElkcyhuZXcgU2V0KCkpXG4gICAgLy8gUmVzZXQgZXhwYW5kIGFsbCB0byBxdWVyeUl0ZW0ncyByZXN1bHRFeHBhbmRCeURlZmF1bHQgc2V0dGluZ1xuICAgIHNldEV4cGFuZEFsbChjdXJyZW50SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQgPz8gZmFsc2UpXG4gICAgc2V0UXVlcnlEYXRhKHtcbiAgICAgIHJlY29yZHMsXG4gICAgICBwYWdlU2l6ZTogZGVmYXVsdFBhZ2VTaXplLFxuICAgICAgcGFnZTogMVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlc2UgYXJlIG5ldyByZWNvcmRzIChkaWZmZXJlbnQgZnJvbSB3aGF0IHdlIGxhc3Qgc2VsZWN0ZWQpXG4gICAgY29uc3QgY3VycmVudFJlY29yZElkcyA9IHJlY29yZHM/Lm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpIHx8IFtdXG4gICAgY29uc3QgcmVjb3Jkc0NoYW5nZWQgPSBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aCAhPT0gbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50Lmxlbmd0aCB8fFxuICAgICAgY3VycmVudFJlY29yZElkcy5zb21lKChpZCwgaW5kZXgpID0+IGlkICE9PSBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnRbaW5kZXhdKVxuICAgIFxuICAgIC8vIE9ubHkgYXV0by1zZWxlY3QgcmVjb3JkcyBpZjpcbiAgICAvLyAxLiBXZSBoYXZlIHJlY29yZHMgYW5kIG91dHB1dERTXG4gICAgLy8gMi4gV2UgaGF2ZW4ndCBhbHJlYWR5IHNlbGVjdGVkIHRoZXNlIHJlY29yZHMgKGhhc1NlbGVjdGVkUmVmIGlzIGZhbHNlKVxuICAgIC8vIDMuIE9SIHRoZSByZWNvcmRzIGhhdmUgYWN0dWFsbHkgY2hhbmdlZCAobmV3IHF1ZXJ5IHJlc3VsdHMpXG4gICAgaWYgKHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwICYmIG91dHB1dERTICYmICghaGFzU2VsZWN0ZWRSZWYuY3VycmVudCB8fCByZWNvcmRzQ2hhbmdlZCkpIHtcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IHJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGNvbnN0IGZkciA9IHJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgICAgXG4gICAgICAvLyBTZWxlY3QgcmVjb3JkcyBhbmQgcHVibGlzaCBzZWxlY3Rpb24gbWVzc2FnZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICB0cnkge1xuICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2god2lkZ2V0SWQsIG91dHB1dERTLCByZWNvcmRJZHMsIGZkcilcbiAgICAgICAgaGFzU2VsZWN0ZWRSZWYuY3VycmVudCA9IHRydWUgLy8gTWFyayBhcyBzZWxlY3RlZFxuICAgICAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSByZWNvcmRJZHMgLy8gU3RvcmUgdGhlIElEcyB3ZSBzZWxlY3RlZFxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQtcXVlcnktcmVzdWx0JyxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICB9KVxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwdWJsaXNoaW5nIHNlbGVjdGlvbiBtZXNzYWdlIGZyb20gcXVlcnktcmVzdWx0JywgZXJyb3IpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyZWNvcmRzQ2hhbmdlZCAmJiByZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBJZiByZWNvcmRzIHdlcmUgY2xlYXJlZCwgcmVzZXQgdGhlIHNlbGVjdGlvbiBmbGFnXG4gICAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgIGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IFtdXG4gICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBlcnJvcnMgd2hlbiBjbGVhcmluZyByZWNvcmRzXG4gICAgfVxuICB9LCBbcmVjb3JkcywgZGVmYXVsdFBhZ2VTaXplLCBvdXRwdXREUywgd2lkZ2V0SWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgcXVlcnlJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdF0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBjbGVhciBzZWxlY3Rpb24gd2hlbiByZXN1bHRTZWxlY3RNb2RlIGNoYW5nZWRcbiAgICBpZiAob3V0cHV0RFMpIHtcbiAgICAgIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhvdXRwdXREUylcbiAgICAgIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlKHdpZGdldElkLCBbXSwgb3V0cHV0RFMsIHRydWUpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtLnJlc3VsdFNlbGVjdE1vZGUsIG91dHB1dERTLCB3aWRnZXRJZF0pXG5cbiAgLy8gVXBkYXRlIGV4cGFuZEFsbCB3aGVuIHF1ZXJ5SXRlbSBjaGFuZ2VzIChlLmcuLCBzd2l0Y2hpbmcgYmV0d2VlbiBxdWVyaWVzKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldEV4cGFuZEFsbChjdXJyZW50SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQgPz8gZmFsc2UpXG4gIH0sIFtxdWVyeUl0ZW0uY29uZmlnSWQsIHF1ZXJ5SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHRdKVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIHJlc3VsdHMuIFJlc2V0cyBsb2NhbCBzdGF0ZSBhbmQgZGVsZWdhdGVzIHRvIHBhcmVudCdzIGNsZWFyUmVzdWx0IG1ldGhvZC5cbiAgICovXG4gIGNvbnN0IGNsZWFyUmVzdWx0cyA9ICgpID0+IHtcbiAgICAvLyBSZXNldCBsb2NhbCBzZWxlY3Rpb24gZmxhZ3NcbiAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBbXVxuICAgIC8vIFJlc2V0IGxvY2FsIHF1ZXJ5IGRhdGEgc3RhdGVcbiAgICBzZXRRdWVyeURhdGEobnVsbClcbiAgICBzZXRSZW1vdmVkUmVjb3JkSWRzKG5ldyBTZXQoKSlcbiAgICAvLyBDbGVhciBlcnJvciBzdGF0ZSB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKVxuICAgIC8vIERlbGVnYXRlIHRvIHBhcmVudCdzIGNsZWFyUmVzdWx0IG1ldGhvZCAodmlhIG9uTmF2QmFjaykgd2hpY2ggaGFuZGxlc1xuICAgIC8vIGNsZWFyaW5nIHNlbGVjdGlvbiBmcm9tIG1hcCwgcHVibGlzaGluZyBtZXNzYWdlcywgZXRjLlxuICAgIG9uTmF2QmFjayh0cnVlKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlUmVuZGVyRG9uZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCh7IGRhdGFJdGVtcywgcGFnZVNpemUsIHBhZ2UgfSkgPT4ge1xuICAgIC8vIEZpbHRlciBvdXQgcmVtb3ZlZCByZWNvcmRzIC0gY2hlY2sgaWYgZGF0YUl0ZW1zIGV4aXN0cyBmaXJzdFxuICAgIGNvbnN0IGZpbHRlcmVkSXRlbXMgPSBkYXRhSXRlbXM/LmZpbHRlcihpdGVtID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhpdGVtLmdldElkKCkpKSB8fCBbXVxuICAgIFxuICAgIHNldFF1ZXJ5RGF0YSh7XG4gICAgICByZWNvcmRzOiBmaWx0ZXJlZEl0ZW1zLFxuICAgICAgcGFnZVNpemUsXG4gICAgICBwYWdlXG4gICAgfSlcbiAgICBcbiAgICAvLyBFbnN1cmUgYWxsIGxvYWRlZCByZWNvcmRzIHJlbWFpbiBzZWxlY3RlZCAoZm9yIGxhenkgbG9hZGluZylcbiAgICAvLyBUaGlzIGtlZXBzIHJlY29yZHMgc2VsZWN0ZWQgYXMgdGhleSdyZSBsb2FkZWQgaW5jcmVtZW50YWxseVxuICAgIGlmIChmaWx0ZXJlZEl0ZW1zICYmIGZpbHRlcmVkSXRlbXMubGVuZ3RoID4gMCAmJiBvdXRwdXREUykge1xuICAgICAgY29uc3QgcmVjb3JkSWRzID0gZmlsdGVyZWRJdGVtcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgY29uc3QgZmRyID0gZmlsdGVyZWRJdGVtcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXG4gICAgICBcbiAgICAgIC8vIFNlbGVjdCBhbGwgcmVjb3JkcyBhbmQgcHVibGlzaCBzZWxlY3Rpb24gbWVzc2FnZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICB0cnkge1xuICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2god2lkZ2V0SWQsIG91dHB1dERTLCByZWNvcmRJZHMsIGZkcilcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZWxlY3QgcXVlcnkgcmVzdWx0cydcbiAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tZmFpbGVkLWhhbmRsZVJlbmRlckRvbmUnLFxuICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHB1Ymxpc2hpbmcgc2VsZWN0aW9uIG1lc3NhZ2UgZnJvbSBoYW5kbGVSZW5kZXJEb25lJywgZXJyb3IpXG4gICAgICB9XG4gICAgfVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICBjb25zdCBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShvdXRwdXREUz8uaWQpXG4gICAgY29uc3QgcmVjb3JkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgIGNvbnN0IHNlbGVjdGVkSWRzID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICBsZXQgc2hvdWxkVXBkYXRlID0gZmFsc2VcbiAgICBpZiAoc2VsZWN0ZWRJZHMubGVuZ3RoICE9PSBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCkge1xuICAgICAgc2hvdWxkVXBkYXRlID0gdHJ1ZVxuICAgIH0gZWxzZSB7IC8vIGVxdWFsIGxlbmd0aFxuICAgICAgc2hvdWxkVXBkYXRlID0gc2VsZWN0ZWRJZHMuc29tZShpZCA9PiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHNlbGVjdGVkUmVjb3Jkcy5maW5kKChpdGVtKSA9PiBpdGVtLmdldElkKCkgPT09IGlkKVxuICAgICAgICByZXR1cm4gdGFyZ2V0ID09IG51bGxcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgIHNldFNlbGVjdGVkUmVjb3JkcyhyZWNvcmRzKVxuICAgIH1cbiAgfSwgW291dHB1dERTPy5pZCwgc2VsZWN0ZWRSZWNvcmRzXSlcblxuICAvKipcbiAgICogR2VuZXJhdGVzIHRoZSB0aXAgbWVzc2FnZSBzaG93aW5nIGhvdyBtYW55IGZlYXR1cmVzIGFyZSBkaXNwbGF5ZWQuXG4gICAqIEZpbHRlcnMgb3V0IHJlbW92ZWQgcmVjb3JkcyB0byBzaG93IGFjY3VyYXRlIGNvdW50cy5cbiAgICogXG4gICAqIEByZXR1cm5zIEZvcm1hdHRlZCBzdHJpbmcgbGlrZSBcIkZlYXR1cmVzIGRpc3BsYXllZDogMTE4IC8gMTIxXCJcbiAgICovXG4gIGNvbnN0IGdldFRpcE1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgaWYgKHF1ZXJ5RGF0YSAmJiBxdWVyeURhdGEucmVjb3Jkcykge1xuICAgICAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHMgZm9yIGRpc3BsYXkgY291bnRcbiAgICAgIGNvbnN0IGRpc3BsYXllZFJlY29yZHMgPSBxdWVyeURhdGEucmVjb3Jkcy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKSlcbiAgICAgIGNvbnN0IGRpc3BsYXllZENvdW50ID0gZGlzcGxheWVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIFxuICAgICAgaWYgKHBhZ2luZ1R5cGUgPT09IFBhZ2luZ1R5cGUuTGF6eUxvYWQpIHtcbiAgICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogJHtkaXNwbGF5ZWRDb3VudH0gLyAke3Jlc3VsdENvdW50fWBcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgcGFnZSA9IDEsIHBhZ2VTaXplID0gZGVmYXVsdFBhZ2VTaXplIH0gPSBxdWVyeURhdGFcbiAgICAgIGNvbnN0IGZyb20gPSAocGFnZSAtIDEpICogcGFnZVNpemUgKyAxXG4gICAgICBjb25zdCB0byA9IGZyb20gKyBwYWdlU2l6ZSAtIDFcbiAgICAgIGlmIChyZXN1bHRDb3VudCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogJHtmcm9tfSAtICR7TWF0aC5taW4odG8sIGRpc3BsYXllZENvdW50KX0gLyAke3Jlc3VsdENvdW50fWBcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtnZXRJMThuTWVzc2FnZSgnZmVhdHVyZXNEaXNwbGF5ZWQnKX06IDAgLSAwIC8gMGBcbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlcyBleHBhbmQvY29sbGFwc2Ugc3RhdGUgZm9yIGFsbCByZXN1bHQgaXRlbXMuXG4gICAqIFdoZW4gdG9nZ2xlZCwgYWxsIHJlc3VsdCBpdGVtcyB3aWxsIGJlIGV4cGFuZGVkIG9yIGNvbGxhcHNlZCB0b2dldGhlci5cbiAgICovXG4gIGNvbnN0IHRvZ2dsZUV4cGFuZEFsbCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRFeHBhbmRBbGwocHJldiA9PiAhcHJldilcbiAgfSwgW10pXG5cbiAgY29uc3QgcmVzdWx0VXNlT3V0cHV0RGF0YVNvdXJjZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBJbW11dGFibGUoe1xuICAgICAgZGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkLFxuICAgICAgbWFpbkRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZFxuICAgIH0pXG4gIH0sIFtxdWVyeUl0ZW0/Lm91dHB1dERhdGFTb3VyY2VJZF0pXG5cbiAgY29uc3QgaGFuZGxlRXNjYXBlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgfSwgW10pXG5cbiAgLy8gS2VlcCByZWNvcmRzIHNlbGVjdGVkIGFuZCB6b29tIHRvIGNsaWNrZWQgcmVjb3JkXG4gIC8vIFJlY29yZHMgcmVtYWluIHNlbGVjdGVkIGFzIGxvbmcgYXMgdGhleSdyZSBpbiB0aGUgcmVzdWx0c1xuICAvLyBDbGlja2luZyBhIHJlY29yZCBhbHdheXMgem9vbXMgdG8gaXQgb24gdGhlIG1hcCAodGhpcyBiZWhhdmlvciBpcyBhbHdheXMgZW5hYmxlZClcbiAgY29uc3QgdG9nZ2xlU2VsZWN0aW9uID0gUmVhY3QudXNlQ2FsbGJhY2soKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB7XG4gICAgLy8gRW5zdXJlIHRoZSBjbGlja2VkIHJlY29yZCBpcyBzZWxlY3RlZCAoaXQgc2hvdWxkIGFscmVhZHkgYmUsIGJ1dCBlbnN1cmUgaXQpXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRhcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpID8/IFtdXG4gICAgY29uc3Qgc2VsZWN0ZWRJZHMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZElkcygpID8/IFtdXG4gICAgY29uc3QgZGF0YUlkID0gZGF0YS5nZXRJZCgpXG4gICAgXG4gICAgLy8gSWYgdGhpcyByZWNvcmQgaXNuJ3QgYWxyZWFkeSBzZWxlY3RlZCwgYWRkIGl0IHRvIHRoZSBzZWxlY3Rpb25cbiAgICBpZiAoIXNlbGVjdGVkSWRzLmluY2x1ZGVzKGRhdGFJZCkpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRTZWxlY3RlZERhdGFzID0gWy4uLnNlbGVjdGVkRGF0YXMsIGRhdGFdXG4gICAgICBjb25zdCByZWNvcmRJZHMgPSB1cGRhdGVkU2VsZWN0ZWREYXRhcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICAvLyBTZWxlY3QgcmVjb3JkcyBhbmQgcHVibGlzaCBzZWxlY3Rpb24gbWVzc2FnZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCh3aWRnZXRJZCwgb3V0cHV0RFMsIHJlY29yZElkcywgdXBkYXRlZFNlbGVjdGVkRGF0YXMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSwgdHJ1ZSlcbiAgICB9XG4gICAgXG4gICAgLy8gWm9vbSB0byB0aGUgY2xpY2tlZCByZWNvcmQgdXNpbmcgZGF0YSBhY3Rpb25zIChhbHdheXMgZW5hYmxlZCAtIHVzZXIgd2FudHMgdG8ga2VlcCB0aGlzIGJlaGF2aW9yKVxuICAgIGNvbnN0IGRhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICAgIHJlY29yZHM6IFtkYXRhXSxcbiAgICAgIHR5cGU6ICdzZWxlY3RlZCcsXG4gICAgICBuYW1lOiBvdXRwdXREUy5nZXRMYWJlbCgpXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBhdmFpbGFibGUgZGF0YSBhY3Rpb25zIGFuZCBmaW5kIHRoZSB6b29tVG9GZWF0dXJlIGFjdGlvblxuICAgIERhdGFBY3Rpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0U3VwcG9ydGVkQWN0aW9ucyh3aWRnZXRJZCwgW2RhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3JkcylcbiAgICAgIC50aGVuKGFjdGlvbkNhdGVnb3JpZXMgPT4ge1xuICAgICAgICAvLyBMb29rIGZvciB6b29tVG9GZWF0dXJlIGFjdGlvbiBpbiBhbnkgY2F0ZWdvcnlcbiAgICAgICAgbGV0IHpvb21BY3Rpb246IGFueSA9IG51bGxcbiAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBpbiBhY3Rpb25DYXRlZ29yaWVzKSB7XG4gICAgICAgICAgY29uc3QgYWN0aW9ucyA9IGFjdGlvbkNhdGVnb3JpZXNbY2F0ZWdvcnldXG4gICAgICAgICAgem9vbUFjdGlvbiA9IGFjdGlvbnMuZmluZCgoYWN0aW9uOiBhbnkpID0+IGFjdGlvbi5uYW1lID09PSAnem9vbVRvRmVhdHVyZScgfHwgYWN0aW9uLmlkID09PSAnem9vbVRvRmVhdHVyZScpXG4gICAgICAgICAgaWYgKHpvb21BY3Rpb24pIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoem9vbUFjdGlvbikge1xuICAgICAgICAgIC8vIEV4ZWN1dGUgdGhlIHpvb20gYWN0aW9uXG4gICAgICAgICAgcmV0dXJuIERhdGFBY3Rpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZXhlY3V0ZURhdGFBY3Rpb24oem9vbUFjdGlvbiwgW2RhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3Jkcywgd2lkZ2V0SWQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAvLyBTaWxlbnRseSBoYW5kbGUgZXJyb3JzXG4gICAgICB9KVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkXSlcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIHJlY29yZCBmcm9tIHRoZSByZXN1bHRzIGFuZCBzZWxlY3Rpb24uXG4gICAqIElmIHJlbW92aW5nIHRoZSBsYXN0IHJlY29yZCwgYXV0b21hdGljYWxseSBjbGVhcnMgYWxsIHJlc3VsdHNcbiAgICogYnkgY2FsbGluZyB0aGUgdHJhc2ggY2FuIGxvZ2ljIChzYW1lIGFzIGNsaWNraW5nIENsZWFyIGJ1dHRvbikuXG4gICAqIFRoaXMgZW5zdXJlcyB0aGUgVUkgZG9lc24ndCBzaG93IFwiRmVhdHVyZXMgZGlzcGxheWVkOiAwIC8gMVwiIHdoZW4gYWxsIHJlc3VsdHMgYXJlIHJlbW92ZWQuXG4gICAqIFxuICAgKiBAcGFyYW0gZGF0YSAtIFRoZSBmZWF0dXJlIGRhdGEgcmVjb3JkIHRvIHJlbW92ZVxuICAgKi9cbiAgY29uc3QgcmVtb3ZlUmVjb3JkID0gUmVhY3QudXNlQ2FsbGJhY2soKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB7XG4gICAgY29uc3QgZGF0YUlkID0gZGF0YS5nZXRJZCgpXG4gICAgXG4gICAgLy8gQWRkIHRvIHJlbW92ZWQgcmVjb3JkcyBzZXRcbiAgICBzZXRSZW1vdmVkUmVjb3JkSWRzKHByZXYgPT4ge1xuICAgICAgY29uc3QgbmV3U2V0ID0gbmV3IFNldChwcmV2KS5hZGQoZGF0YUlkKVxuICAgICAgXG4gICAgICAvLyBJZiBhbGwgcmVjb3JkcyBhcmUgbm93IHJlbW92ZWQsIGNsZWFyIGV2ZXJ5dGhpbmcgYnkgY2FsbGluZyB0cmFzaCBjYW4gbG9naWNcbiAgICAgIC8vIENoZWNrOiBpZiB0aGUgbmV3IHNldCBzaXplIGVxdWFscyB0aGUgdG90YWwgcmVzdWx0IGNvdW50LCBhbGwgcmVjb3JkcyBhcmUgcmVtb3ZlZFxuICAgICAgaWYgKG5ld1NldC5zaXplID09PSByZXN1bHRDb3VudCkge1xuICAgICAgICAvLyBBbGwgcmVjb3JkcyByZW1vdmVkIC0gY2xlYXIgZXZlcnl0aGluZyAoc2FtZSBhcyBjbGlja2luZyB0cmFzaCBjYW4gYnV0dG9uKVxuICAgICAgICBvbk5hdkJhY2sodHJ1ZSlcbiAgICAgICAgcmV0dXJuIG5ld1NldFxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gbmV3U2V0XG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgcXVlcnlEYXRhIHRvIGZpbHRlciBvdXQgdGhlIHJlbW92ZWQgcmVjb3JkXG4gICAgc2V0UXVlcnlEYXRhKHByZXZEYXRhID0+IHtcbiAgICAgIGlmICghcHJldkRhdGEpIHJldHVybiBwcmV2RGF0YVxuICAgICAgY29uc3QgZmlsdGVyZWRSZWNvcmRzID0gcHJldkRhdGEucmVjb3Jkcy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gcmVjb3JkLmdldElkKCkgIT09IGRhdGFJZClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnByZXZEYXRhLFxuICAgICAgICByZWNvcmRzOiBmaWx0ZXJlZFJlY29yZHNcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IHNlbGVjdGVkRGF0YXMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSA/PyBbXVxuICAgIGNvbnN0IHNlbGVjdGVkSWRzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSA/PyBbXVxuICAgIFxuICAgIC8vIFJlbW92ZSB0aGUgcmVjb3JkIGZyb20gc2VsZWN0aW9uXG4gICAgY29uc3QgdXBkYXRlZFNlbGVjdGVkRGF0YXMgPSBzZWxlY3RlZERhdGFzLmZpbHRlcihyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkgIT09IGRhdGFJZClcbiAgICBjb25zdCByZWNvcmRJZHMgPSB1cGRhdGVkU2VsZWN0ZWREYXRhcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBzZWxlY3Rpb24gb24gdGhlIG9yaWdpbiBsYXllciBhbmQgcHVibGlzaCBtZXNzYWdlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCh3aWRnZXRJZCwgb3V0cHV0RFMsIHJlY29yZElkcywgdXBkYXRlZFNlbGVjdGVkRGF0YXMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSwgdHJ1ZSlcbiAgfSwgW291dHB1dERTLCB3aWRnZXRJZCwgcmVzdWx0Q291bnQsIG9uTmF2QmFja10pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0IGgtMTAwJyBjc3M9e3Jlc3VsdFN0eWxlfSByb2xlPSdsaXN0Ym94JyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfT5cbiAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IHVzZURhdGFTb3VyY2U9e3Jlc3VsdFVzZU91dHB1dERhdGFTb3VyY2V9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlfSAvPlxuICAgICAgXG4gICAgICB7LyogRXJyb3IgTWVzc2FnZSAqL31cbiAgICAgIHtzZWxlY3Rpb25FcnJvciAmJiAoXG4gICAgICAgIDxkaXYgY3NzPXtjc3NgcGFkZGluZzogMCAxNnB4OyBtYXJnaW4tdG9wOiA4cHg7YH0+XG4gICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgIGVycm9yPXtzZWxlY3Rpb25FcnJvcn0gXG4gICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFNlbGVjdGlvbkVycm9yKG51bGwpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdF9faGVhZGVyIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgbXgtNCc+XG4gICAgICAgIDxCdXR0b24gYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2JhY2snKX0gcmVmPXtiYWNrQnRuUmVmfSBjbGFzc05hbWU9J3AtMCBtci0yJyBzaXplPSdzbScgdmFyaWFudD0ndGV4dCcgY29sb3I9J2luaGVyaXQnIGljb24gb25DbGljaz17KCkgPT4geyBvbk5hdkJhY2soKSB9fT5cbiAgICAgICAgICA8QXJyb3dMZWZ0T3V0bGluZWQgYXV0b0ZsaXAvPlxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAge2N1cnJlbnRJdGVtLnJlc3VsdHNMYWJlbCA/PyBnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfVxuICAgICAgICB7KFxuICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0gcGxhY2VtZW50PSdib3R0b20nPlxuICAgICAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT0nbWwtYXV0bycgaWNvbiBzaXplPSdzbScgdmFyaWFudD0ndGV4dCcgY29sb3I9J2luaGVyaXQnIG9uQ2xpY2s9e2NsZWFyUmVzdWx0c30gYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9PlxuICAgICAgICAgICAgICAgIDxJY29uIGljb249e2ljb25NYXAudG9vbERlbGV0ZX0gLz5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICB7LyogRGF0YSBhY3Rpb25zIGZpbHRlcmVkIHZpYSBtYW5pZmVzdC5qc29uIGV4Y2x1ZGVEYXRhQWN0aW9ucyAtIFNob3cgb24gTWFwLCBTZWxlY3QgTG9hZGVkLCBhbmQgQ2xlYXIgU2VsZWN0aW9uIGFyZSBleGNsdWRlZC5cbiAgICAgICAgICAgICAgICBDdXN0b20gXCJBZGQgdG8gTWFwXCIgYWN0aW9uIGlzIHByb3ZpZGVkIHZpYSBleHRyYUFjdGlvbnMgYW5kIHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy4gKi99XG4gICAgICAgICAgICB7ZW5hYmxlRGF0YUFjdGlvbiAmJiBvdXRwdXREUyAmJiAoXG4gICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYHdpZHRoOiAxcHg7IGhlaWdodDogMTZweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItaW5wdXQpO2B9PjwvZGl2PlxuICAgICAgICAgICAgICAgIDxEYXRhQWN0aW9uTGlzdFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICAgICAgZGF0YVNldHM9e1thY3Rpb25EYXRhU2V0XX1cbiAgICAgICAgICAgICAgICAgIGxpc3RTdHlsZT17RGF0YUFjdGlvbkxpc3RTdHlsZS5Ecm9wZG93bn1cbiAgICAgICAgICAgICAgICAgIGJ1dHRvblNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgYnV0dG9uVHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICBleHRyYUFjdGlvbnM9e2V4dHJhQWN0aW9uc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0LWNvbnRhaW5lciBtdC0xJz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdC1pbmZvIG1iLTIgcHgtNCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1iZXR3ZWVuJyByb2xlPSdhbGVydCcgYXJpYS1saXZlPSdwb2xpdGUnPlxuICAgICAgICAgIDxzcGFuPntnZXRUaXBNZXNzYWdlKCl9PC9zcGFuPlxuICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtleHBhbmRBbGwgPyBnZXRJMThuTWVzc2FnZSgnY29sbGFwc2VBbGwnKSA6IGdldEkxOG5NZXNzYWdlKCdleHBhbmRBbGwnKX0gcGxhY2VtZW50PSd0b3AnPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgb25DbGljaz17dG9nZ2xlRXhwYW5kQWxsfVxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtleHBhbmRBbGwgPyBnZXRJMThuTWVzc2FnZSgnY29sbGFwc2VBbGwnKSA6IGdldEkxOG5NZXNzYWdlKCdleHBhbmRBbGwnKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2V4cGFuZEFsbCA/IDxDb2xsYXBzZUFsbE91dGxpbmVkIC8+IDogPEV4cGFuZEFsbE91dGxpbmVkIC8+fVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge3BhZ2luZ1R5cGUgPT09IFBhZ2luZ1R5cGUuTGF6eUxvYWQgJiYgcmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICA8TGF6eUxpc3RcbiAgICAgICAgICAgIGtleT17YGxhenktJHtleHBhbmRBbGx9YH1cbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbT17cXVlcnlJdGVtfVxuICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTIGFzIGFueX1cbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zPXtxdWVyeVBhcmFtc31cbiAgICAgICAgICAgIHJlc3VsdENvdW50PXtyZXN1bHRDb3VudH1cbiAgICAgICAgICAgIHJlY29yZHM9e3F1ZXJ5RGF0YT8ucmVjb3Jkcz8uZmlsdGVyKChyZWNvcmQ6IERhdGFSZWNvcmQpID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IChyZWNvcmRzPy5maWx0ZXIocmVjb3JkID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IFtdKX1cbiAgICAgICAgICAgIGRpcmVjdGlvbj17ZGlyZWN0aW9ufVxuICAgICAgICAgICAgb25SZW5kZXJEb25lPXtoYW5kbGVSZW5kZXJEb25lfVxuICAgICAgICAgICAgb25Fc2NhcGU9e2hhbmRsZUVzY2FwZX1cbiAgICAgICAgICAgIG9uU2VsZWN0Q2hhbmdlPXt0b2dnbGVTZWxlY3Rpb259XG4gICAgICAgICAgICBvblJlbW92ZT17cmVtb3ZlUmVjb3JkfVxuICAgICAgICAgICAgZXhwYW5kQnlEZWZhdWx0PXtleHBhbmRBbGx9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAge3BhZ2luZ1R5cGUgPT09IFBhZ2luZ1R5cGUuTXVsdGlQYWdlICYmIHJlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgPFBhZ2luZ0xpc3RcbiAgICAgICAgICAgIGtleT17YHBhZ2luZy0ke2V4cGFuZEFsbH1gfVxuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgcXVlcnlJdGVtPXtxdWVyeUl0ZW19XG4gICAgICAgICAgICBvdXRwdXREUz17b3V0cHV0RFMgYXMgYW55fVxuICAgICAgICAgICAgcXVlcnlQYXJhbXM9e3F1ZXJ5UGFyYW1zfVxuICAgICAgICAgICAgcmVzdWx0Q291bnQ9e3Jlc3VsdENvdW50fVxuICAgICAgICAgICAgbWF4UGVyUGFnZT17bWF4UGVyUGFnZX1cbiAgICAgICAgICAgIHJlY29yZHM9e3F1ZXJ5RGF0YT8ucmVjb3Jkcz8uZmlsdGVyKChyZWNvcmQ6IERhdGFSZWNvcmQpID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IChyZWNvcmRzPy5maWx0ZXIocmVjb3JkID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IFtdKX1cbiAgICAgICAgICAgIGRpcmVjdGlvbj17ZGlyZWN0aW9ufVxuICAgICAgICAgICAgb25SZW5kZXJEb25lPXtoYW5kbGVSZW5kZXJEb25lfVxuICAgICAgICAgICAgb25Fc2NhcGU9e2hhbmRsZUVzY2FwZX1cbiAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfVxuICAgICAgICAgICAgb25TZWxlY3RDaGFuZ2U9e3RvZ2dsZVNlbGVjdGlvbn1cbiAgICAgICAgICAgIG9uUmVtb3ZlPXtyZW1vdmVSZWNvcmR9XG4gICAgICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEFsbH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgUXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8UXVlcnlUYXNrQ29udGV4dFByb3BzPih7XG4gIHJlc2V0U3ltYm9sOiBudWxsXG59KVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0NvbnRleHRQcm9wcyB7XG4gIHJlc2V0U3ltYm9sPzogc3ltYm9sIC8vIHVzZWQgdG8gdHJpZ2dlciByZXNldCBvcGVyYXRpb25cbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgY2xhc3NOYW1lcyxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBSZWFjdFJlZHV4LFxuICBob29rcyxcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXG4gIHR5cGUgU3FsUXVlcnlQYXJhbXMsXG4gIEltbXV0YWJsZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIENoZWNrYm94IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IFNxbEV4cHJlc3Npb25SdW50aW1lLCBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbiB9IGZyb20gJ2ppbXUtdWkvYmFzaWMvc3FsLWV4cHJlc3Npb24tcnVudGltZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCBTcGF0aWFsUmVsYXRpb24sIHR5cGUgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IFF1ZXJ5VGFza1NwYXRpYWxGb3JtIH0gZnJvbSAnLi9xdWVyeS10YXNrLXNwYXRpYWwtZm9ybSdcbmltcG9ydCB7IHVzZUF1dG9IZWlnaHQgfSBmcm9tICcuL3VzZUF1dG9IZWlnaHQnXG5pbXBvcnQgeyBkZWJ1Z0xvZ2dlciB9IGZyb20gJy4vZGVidWctbG9nZ2VyJ1xuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcbmltcG9ydCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0l0ZW1Qcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgY29uZmlnSWQ6IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyRW5hYmxlZDogYm9vbGVhblxuICBkYXRhc291cmNlUmVhZHk6IGJvb2xlYW5cbiAgb3V0cHV0RFM/OiBEYXRhU291cmNlXG4gIG9uRm9ybVN1Ym1pdDogKHNxbEV4cHJPYmo6IElNU3FsRXhwcmVzc2lvbiwgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaiwgem9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB2b2lkXG4gIGRhdGFBY3Rpb25GaWx0ZXI/OiBTcWxRdWVyeVBhcmFtc1xuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG59XG5cbmNvbnN0IGdldEZvcm1TdHlsZSA9IChpc0F1dG9IZWlnaHQ6IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgbWluLWhlaWdodDogMDtcbiAgICAuZm9ybS10aXRsZSB7XG4gICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgZm9udC1zaXplOiAwLjgxMjVyZW07XG4gICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fY29udGVudCB7XG4gICAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAnYXV0byd9O1xuICAgICAgbWF4LWhlaWdodDogJHtpc0F1dG9IZWlnaHQgPyAnNjEuOHZoJyA6ICdub25lJ307XG4gICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIHBhZGRpbmctYm90dG9tOiAwO1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fYWN0aW9ucyB7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICBwYWRkaW5nLXRvcDogOHB4O1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrRm9ybSAocHJvcHM6IFF1ZXJ5VGFza0l0ZW1Qcm9wcykge1xuICBjb25zdCB7IHdpZGdldElkLCBjb25maWdJZCwgb3V0cHV0RFMsIHNwYXRpYWxGaWx0ZXJFbmFibGVkLCBkYXRhc291cmNlUmVhZHksIG9uRm9ybVN1Ym1pdCwgZGF0YUFjdGlvbkZpbHRlciwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbVNob3J0SWQgfSA9IHByb3BzXG4gIGNvbnN0IHByZURhdGFBY3Rpb25GaWx0ZXIgPSBob29rcy51c2VQcmV2aW91cyhkYXRhQWN0aW9uRmlsdGVyKVxuICBjb25zdCBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5xdWVyeUl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmNvbmZpZ0lkID09PSBjb25maWdJZClcbiAgfSlcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW3Jlc2V0U3ltYm9sLCBzZXRSZXNldFN5bWJvbF0gPSBSZWFjdC51c2VTdGF0ZTxzeW1ib2w+KG51bGwpXG4gIC8vIFJ1bnRpbWUgem9vbSBwcmVmZXJlbmNlIC0gaW5pdGlhbGl6ZWQgd2l0aCBjb25maWcgdmFsdWUsIGNhbiBiZSBvdmVycmlkZGVuIGJ5IHVzZXJcbiAgY29uc3QgW3J1bnRpbWVab29tVG9TZWxlY3RlZCwgc2V0UnVudGltZVpvb21Ub1NlbGVjdGVkXSA9IFJlYWN0LnVzZVN0YXRlPGJvb2xlYW4+KFxuICAgIHF1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQgPz8gdHJ1ZVxuICApXG5cbiAgLy8gU3luYyBydW50aW1lIHpvb20gcHJlZmVyZW5jZSB3aGVuIHF1ZXJ5IGl0ZW0gY2hhbmdlcyAoZS5nLiwgc3dpdGNoaW5nIGJldHdlZW4gcXVlcmllcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWQocXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCA/PyB0cnVlKVxuICB9LCBbcXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCwgcXVlcnlJdGVtPy5jb25maWdJZF0pXG5cbiAgLy8gY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3Qge1xuICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICB1c2VTcGF0aWFsRmlsdGVyLFxuICAgIHNwYXRpYWxGaWx0ZXJUeXBlcyxcbiAgICBzcWxFeHByT2JqLFxuICAgIHNwYXRpYWxNYXBXaWRnZXRJZHMsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzLFxuICAgIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzLFxuICAgIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsXG4gICAgc3BhdGlhbFJlbGF0aW9ucyxcbiAgICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdCxcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdCxcbiAgICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbCA9IGdldEkxOG5NZXNzYWdlKCdhdHRyaWJ1dGVGaWx0ZXInKSxcbiAgICBzcGF0aWFsRmlsdGVyTGFiZWwgPSBnZXRJMThuTWVzc2FnZSgnc3BhdGlhbEZpbHRlcicpLFxuICAgIGF0dHJpYnV0ZUZpbHRlckRlc2MsXG4gICAgc3BhdGlhbEZpbHRlckRlc2NcbiAgfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IFthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqXSA9IFJlYWN0LnVzZVN0YXRlPElNU3FsRXhwcmVzc2lvbj4oc3FsRXhwck9iailcbiAgY29uc3Qgc3BhdGlhbEZpbHRlck9ialJlZiA9IFJlYWN0LnVzZVJlZjxTcGF0aWFsRmlsdGVyT2JqPihudWxsKVxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25SZWYgPSBSZWFjdC51c2VSZWY8U3BhdGlhbFJlbGF0aW9uPihTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0KVxuICBjb25zdCBidWZmZXJSZWYgPSBSZWFjdC51c2VSZWY8eyBkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSB9PihudWxsKVxuICBjb25zdCBhcHBseUJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3QgaXNBdXRvSGVpZ2h0ID0gdXNlQXV0b0hlaWdodCgpXG4gIGNvbnN0IHNob3dDbGF1c2VOdW1iZXIgPSBSZWFjdC51c2VSZWYoZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iaikpXG4gIGNvbnN0IGluaXRpYWxWYWx1ZVNldFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKSAvLyBUcmFjayB3aGljaCBjb25maWdJZCB3ZSd2ZSBzZXQgdGhlIHZhbHVlIGZvclxuICBjb25zdCBsYXN0VmFsdWVTZXRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkgLy8gVHJhY2sgdGhlIGxhc3QgdmFsdWUgdGhhdCB3YXMgc2V0XG4gIGNvbnN0IGhhc2hUcmlnZ2VyZWRSZWYgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbj4oZmFsc2UpIC8vIFRyYWNrIGlmIHF1ZXJ5IHdhcyB0cmlnZ2VyZWQgdmlhIGhhc2ggcGFyYW1ldGVyXG5cbiAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUz8uZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBpbnB1dCB2YWx1ZSBmcm9tIFVSTCBoYXNoIHBhcmFtZXRlcnMgd2hlbjpcbiAgICogMS4gRGF0YXNvdXJjZSBpcyByZWFkeVxuICAgKiAyLiBXZSBoYXZlIGFuIGluaXRpYWxJbnB1dFZhbHVlIGZyb20gVVJMIGhhc2hcbiAgICogMy4gV2UgaGF2ZW4ndCBhbHJlYWR5IHNldCBpdCBmb3IgdGhpcyBjb25maWdJZCwgT1IgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAqIFxuICAgKiBVc2VzIGJvdGggUmVhY3Qgc3RhdGUgdXBkYXRlcyBhbmQgRE9NIG1hbmlwdWxhdGlvbiB0byBlbnN1cmUgdGhlIHZhbHVlXG4gICAqIGlzIHByb3Blcmx5IHNldCBpbiBTcWxFeHByZXNzaW9uUnVudGltZSdzIGludGVybmFsIHN0YXRlLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBSZXNldCBmbGFnIGlmIGNvbmZpZ0lkIGNoYW5nZWQgKHN3aXRjaGVkIHRvIGRpZmZlcmVudCBxdWVyeSlcbiAgICBpZiAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IG51bGwgJiYgaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkKSB7XG4gICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgaGFzaCB0cmlnZ2VyIGZsYWcgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB2YWx1ZSBoYXMgY2hhbmdlZCBmb3IgdGhlIHNhbWUgY29uZmlnSWRcbiAgICBjb25zdCB2YWx1ZUNoYW5nZWQgPSBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gaW5pdGlhbElucHV0VmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9PT0gY29uZmlnSWRcbiAgICBcbiAgICAvLyBTZXQgdGhlIHZhbHVlIGlmOlxuICAgIC8vIC0gV2UgaGF2ZW4ndCBzZXQgaXQgZm9yIHRoaXMgY29uZmlnSWQgeWV0LCBPUlxuICAgIC8vIC0gVGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGZvciB0aGUgc2FtZSBjb25maWdJZCAoaGFzaCBwYXJhbWV0ZXIgdXBkYXRlZClcbiAgICBjb25zdCBzaG91bGRTZXRWYWx1ZSA9IGRhdGFzb3VyY2VSZWFkeSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgdmFsdWVDaGFuZ2VkKVxuICAgIFxuICAgIGlmIChzaG91bGRTZXRWYWx1ZSkge1xuICAgICAgY29uc3QgZmlyc3RQYXJ0ID0gc3FsRXhwck9iai5wYXJ0c1swXVxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IHBhcnQgaXMgYSBTSU5HTEUgY2xhdXNlIChub3QgYSBTcWxDbGF1c2VTZXQpXG4gICAgICBpZiAoZmlyc3RQYXJ0ICYmICd0eXBlJyBpbiBmaXJzdFBhcnQgJiYgZmlyc3RQYXJ0LnR5cGUgPT09ICdTSU5HTEUnICYmICd2YWx1ZU9wdGlvbnMnIGluIGZpcnN0UGFydCkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGV4cHJlc3Npb24gb2JqZWN0IHdpdGggdGhlIGluaXRpYWwgdmFsdWVcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHNxbEV4cHJPYmouc2V0SW4oWydwYXJ0cycsICcwJywgJ3ZhbHVlT3B0aW9ucycsICd2YWx1ZSddLCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaih1cGRhdGVkKVxuICAgICAgICAvLyBVcGRhdGUgY2xhdXNlIG51bWJlciBmb3IgdGhlIHVwZGF0ZWQgZXhwcmVzc2lvblxuICAgICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbih1cGRhdGVkKVxuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IGNvbmZpZ0lkXG4gICAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgXG4gICAgICAgIC8vIEFsc28gc2V0IHRoZSB2YWx1ZSBkaXJlY3RseSBvbiB0aGUgaW5wdXQgZWxlbWVudCBhZnRlciBhIGRlbGF5IHRvIGVuc3VyZSBjb21wb25lbnQgaXMgcmVuZGVyZWRcbiAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBTcWxFeHByZXNzaW9uUnVudGltZSBtYXkgbm90IHN5bmMgZnJvbSB0aGUgZXhwcmVzc2lvbiBwcm9wIGFsb25lXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIEZpbmQgdGhlIGlucHV0IGVsZW1lbnQgd2l0aGluIFNxbEV4cHJlc3Npb25SdW50aW1lXG4gICAgICAgICAgY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS13aWRnZXQtaWQ9XCIke3dpZGdldElkfVwiXWApPy5jbG9zZXN0KCcucXVlcnktZm9ybScpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVlcnktZm9ybScpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGZvcm1FbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBMb29rIGZvciB0ZXh0IGlucHV0IGVsZW1lbnRzXG4gICAgICAgICAgICBjb25zdCB0ZXh0SW5wdXRzID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ZXh0SW5wdXRzLmZvckVhY2goKGlucHV0OiBIVE1MSW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWUgaWYgaW5wdXQgaXMgZW1wdHkgT1IgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIChoYXNoIHBhcmFtZXRlciB1cGRhdGVkKVxuICAgICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGUgPSAhaW5wdXQudmFsdWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUudHJpbSgpID09PSAnJyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSAhPT0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBGb2N1cyB0aGUgaW5wdXQgZmlyc3RcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZVxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRpc3BhdGNoIGlucHV0IGV2ZW50IHdpdGggcHJvcGVyIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dEV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnB1dEV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGlucHV0RXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkaXNwYXRjaCBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VFdmVudCA9IG5ldyBFdmVudCgnY2hhbmdlJywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNoYW5nZUV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFsc28gdHJ5IFJlYWN0J3Mgc3ludGhldGljIGV2ZW50IGFwcHJvYWNoIHVzaW5nIG5hdGl2ZSB2YWx1ZSBzZXR0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBuYXRpdmVJbnB1dFZhbHVlU2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUsICd2YWx1ZScpPy5zZXRcbiAgICAgICAgICAgICAgICBpZiAobmF0aXZlSW5wdXRWYWx1ZVNldHRlcikge1xuICAgICAgICAgICAgICAgICAgbmF0aXZlSW5wdXRWYWx1ZVNldHRlci5jYWxsKGlucHV0LCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWN0RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KHJlYWN0RXZlbnQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsdXIgdG8gdHJpZ2dlciBhbnkgdmFsaWRhdGlvbiBvciBzdGF0ZSB1cGRhdGVzXG4gICAgICAgICAgICAgICAgaW5wdXQuYmx1cigpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFmdGVyIHNldHRpbmcgdmFsdWVzIGFuZCBibHVycmluZywgdmVyaWZ5IGlucHV0IHZhbHVlIGlzIHNldCBiZWZvcmUgdHJpZ2dlcmluZyBBcHBseSBidXR0b25cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCAmJiBkYXRhc291cmNlUmVhZHkpIHtcbiAgICAgICAgICAgICAgICAvLyBWRVJJRklDQVRJT046IEVuc3VyZSBpbnB1dCB2YWx1ZSBpcyBhY3R1YWxseSBzZXQgYmVmb3JlIGV4ZWN1dGluZyBxdWVyeVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGdyb3VwZWQgcXVlcmllcyB3aGVyZSBkcm9wZG93bnMgbmVlZCB0byBiZSBzeW5jaHJvbml6ZWQgZmlyc3RcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldC1pZD1cIiR7d2lkZ2V0SWR9XCJdYCk/LmNsb3Nlc3QoJy5xdWVyeS1mb3JtJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWVyeS1mb3JtJylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZm9ybUVsZW1lbnQgJiYgaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRJbnB1dHMgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpXG4gICAgICAgICAgICAgICAgICBsZXQgaW5wdXRWYWx1ZVNldCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHRleHRJbnB1dHMuZm9yRWFjaCgoaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlID09PSBpbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWVTZXQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmICghaW5wdXRWYWx1ZVNldCkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdpbnB1dC12YWx1ZS1ub3Qtc2V0LXJldHJ5aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZFZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkLFxuICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3dpbGwtcmV0cnktYWZ0ZXItZGVsYXknLFxuICAgICAgICAgICAgICAgICAgICAgIG5vdGU6ICdJbnB1dCB2YWx1ZSBub3Qgc2V0LCByZXRyeWluZyB0byBlbnN1cmUgc3luY2hyb25pemF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAvLyBSZXRyeSBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IHN0YXRlIHRvIHN5bmNcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgY2FsbCB2ZXJpZnlBbmRBcHBseSBpZiBuZWVkZWQsIGJ1dCBsaW1pdCByZXRyaWVzXG4gICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIG5vdywganVzdCByZXRyeSBvbmNlIG1vcmVcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCAmJiBkYXRhc291cmNlUmVhZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBoYXNoVHJpZ2dlcmVkUmVmIHRvIGZvcmNlIHpvb20gZm9yIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGhhc2ggcGFyYW1ldGVyIGZyb20gVVJMIGJlZm9yZSBBcHBseSBpcyB0cmlnZ2VyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkhhc2hQYXJhbWV0ZXJVc2VkICYmIHF1ZXJ5SXRlbVNob3J0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZChxdWVyeUl0ZW1TaG9ydElkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdXRvLXRyaWdnZXIgQXBwbHkgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseUJ1dHRvblJlZi5jdXJyZW50LmNsaWNrKClcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC8vIEV4aXQgZWFybHksIHdpbGwgcmV0cnlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSW5wdXQgdmFsdWUgaXMgc2V0IGNvcnJlY3RseSwgcHJvY2VlZCB3aXRoIGV4ZWN1dGlvblxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAnaW5wdXQtdmFsdWUtdmVyaWZpZWQnLFxuICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRWYWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkLFxuICAgICAgICAgICAgICAgICAgbm90ZTogJ0lucHV0IHZhbHVlIHZlcmlmaWVkLCBwcm9jZWVkaW5nIHdpdGggcXVlcnkgZXhlY3V0aW9uJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0IGhhc2hUcmlnZ2VyZWRSZWYgdG8gZm9yY2Ugem9vbSBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllc1xuICAgICAgICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgaGFzaCBwYXJhbWV0ZXIgZnJvbSBVUkwgYmVmb3JlIEFwcGx5IGlzIHRyaWdnZXJlZCB0byBwcmV2ZW50IHJlLWV4ZWN1dGlvblxuICAgICAgICAgICAgICAgIGlmIChvbkhhc2hQYXJhbWV0ZXJVc2VkICYmIHF1ZXJ5SXRlbVNob3J0SWQpIHtcbiAgICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQocXVlcnlJdGVtU2hvcnRJZClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBdXRvLXRyaWdnZXIgQXBwbHkgYnV0dG9uIHRvIGV4ZWN1dGUgdGhlIHF1ZXJ5IHdpdGggdGhlIHBvcHVsYXRlZCB2YWx1ZVxuICAgICAgICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAyMDApIC8vIFNtYWxsIGRlbGF5IGFmdGVyIGJsdXIgdG8gZW5zdXJlIHN0YXRlIGlzIHN5bmNlZFxuICAgICAgICAgIH1cbiAgICAgICAgfSwgNTAwKSAvLyBMb25nZXIgZGVsYXkgdG8gZW5zdXJlIGNvbXBvbmVudCBpcyBmdWxseSByZW5kZXJlZFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFRoZSBzcWxFeHByT2JqLnBhcnRzIG1heSBjaGFuZ2UgYnV0IHRoZSBkaXNwbGF5U1FMIGlzIHRoZSBzYW1lXG4gICAgaWYgKCFzcWxFeHByT2JqKSB7XG4gICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSAwXG4gICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKG51bGwpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbEV4cHJPYmopXG4gICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB3ZSBoYXZlbid0IHNldCB0aGUgaW5pdGlhbCB2YWx1ZSBmb3IgdGhpcyBjb25maWdJZCB5ZXQsIG9yIGlmIHdlIGRvbid0IGhhdmUgYW4gaW5pdGlhbCB2YWx1ZVxuICAgICAgaWYgKGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBjb25maWdJZCB8fCAhaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihzcWxFeHByT2JqKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW3NxbEV4cHJPYmosIGluaXRpYWxJbnB1dFZhbHVlLCBkYXRhc291cmNlUmVhZHksIGNvbmZpZ0lkLCB3aWRnZXRJZCwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcXVlcnlJdGVtU2hvcnRJZF0pXG5cbiAgY29uc3QgYXBwbHlRdWVyeSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyBXaGVuIHRoZSAnYXBwbHknIGJ1dHRvbiBpcyBjbGlja2VkLCBpdCBzaG91bGQgY2xlYXIgdGhlIHNlbGVjdGlvbiBmcm9tIHRoZSBwcmV2aW91cyByZXN1bHQgbGlzdFxuICAgIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhvdXRwdXREUylcblxuICAgIGlmIChvdXRwdXREUykge1xuICAgICAgY29uc3Qgb3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIGlmIChvcmlnaW5Ecykge1xuICAgICAgICBjb25zdCBkYXRhVmlld0NvbmZpZyA9IG9yaWdpbkRzLmdldERhdGFWaWV3Q29uZmlnKClcbiAgICAgICAgY29uc3QgbWF4aW11bSA9IGRhdGFWaWV3Q29uZmlnPy5tYXhpbXVtXG4gICAgICAgIGlmIChtYXhpbXVtICE9IG51bGwgJiYgbWF4aW11bSA+IDApIHtcbiAgICAgICAgICBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZURhdGFTb3VyY2VCeURhdGFTb3VyY2VKc29uKFxuICAgICAgICAgICAgb3V0cHV0RFMsXG4gICAgICAgICAgICBvdXRwdXREUy5nZXREYXRhU291cmNlSnNvbigpLnNldEluKFsncXVlcnknLCAnbWF4aW11bSddLCBtYXhpbXVtKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvcmNlIHpvb20gZm9yIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXMsIG90aGVyd2lzZSB1c2UgcnVudGltZSBwcmVmZXJlbmNlXG4gICAgY29uc3Qgem9vbVRvVXNlID0gaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID8gdHJ1ZSA6IHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuXG4gICAgbGV0IHJlbCA9IHNwYXRpYWxSZWxhdGlvblJlZi5jdXJyZW50XG4gICAgaWYgKHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudD8uZ2VvbWV0cnkgJiYgcmVsID09IG51bGwpIHtcbiAgICAgIHJlbCA9IFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3RcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Py5nZW9tZXRyeSkpIHtcbiAgICAgIGlmIChzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIG9uRm9ybVN1Ym1pdChhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgZ2VvbWV0cnk6IHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudC5nZW9tZXRyeVswXSwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcbiAgICAgICAgICAnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvdW5pb25PcGVyYXRvcidcbiAgICAgICAgXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgICAgICBjb25zdCBvcGVyYXRvcjogKHR5cGVvZiBfX2VzcmkudW5pb25PcGVyYXRvcikgPSBtb2R1bGVzWzBdXG4gICAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBvcGVyYXRvci5leGVjdXRlTWFueShzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnkpXG4gICAgICAgICAgb25Gb3JtU3VibWl0KGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIHsgLi4uc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50LCBnZW9tZXRyeSwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uRm9ybVN1Ym1pdChhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgcmVsYXRpb246IHJlbCwgYnVmZmVyOiBidWZmZXJSZWYuY3VycmVudCB9LCB6b29tVG9Vc2UpXG4gICAgfVxuICAgIFxuICAgIC8vIFJlc2V0IGhhc2hUcmlnZ2VyZWRSZWYgYWZ0ZXIgdXNlXG4gICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgfSwgW29uRm9ybVN1Ym1pdCwgb3V0cHV0RFMsIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmosIHJ1bnRpbWVab29tVG9TZWxlY3RlZF0pXG5cbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKChldmVudDogUmVhY3QuS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicgJiYgZGF0YXNvdXJjZVJlYWR5KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBcbiAgICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSBpbnB1dCBmaWVsZFxuICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgaWYgKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC50YWdOYW1lID09PSAnSU5QVVQnICYmIGFjdGl2ZUVsZW1lbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIC8vIEZvcmNlIGJsdXIgdG8gdHJpZ2dlciBTcWxFeHByZXNzaW9uUnVudGltZSdzIGlucHV0IHByb2Nlc3NpbmdcbiAgICAgICAgYWN0aXZlRWxlbWVudC5ibHVyKClcbiAgICAgICAgXG4gICAgICAgIC8vIFdhaXQgZm9yIGJsdXIgcHJvY2Vzc2luZywgdGhlbiBjbGljayB0aGUgQXBwbHkgYnV0dG9uXG4gICAgICAgIC8vIFRoaXMgdXNlcyB0aGUgZXhhY3Qgc2FtZSBjb2RlIHBhdGggYXMgY2xpY2tpbmcgdGhlIGJ1dHRvbiBtYW51YWxseVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5UXVlcnkoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgMjAwKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm90IGluIGFuIGlucHV0IGZpZWxkLCBzYWZlIHRvIGFwcGx5IGltbWVkaWF0ZWx5XG4gICAgICAgIGlmIChhcHBseUJ1dHRvblJlZi5jdXJyZW50ICYmICFhcHBseUJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkKSB7XG4gICAgICAgICAgYXBwbHlCdXR0b25SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXBwbHlRdWVyeSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtkYXRhc291cmNlUmVhZHksIGFwcGx5UXVlcnldKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFkYXRhQWN0aW9uRmlsdGVyKSByZXR1cm5cbiAgICBpZiAoZGF0YUFjdGlvbkZpbHRlci53aGVyZSAhPT0gcHJlRGF0YUFjdGlvbkZpbHRlcj8ud2hlcmUpIHtcbiAgICAgIGFwcGx5UXVlcnkoKVxuICAgIH1cbiAgfSwgW2RhdGFBY3Rpb25GaWx0ZXIsIHByZURhdGFBY3Rpb25GaWx0ZXI/LndoZXJlLCBhcHBseVF1ZXJ5XSlcblxuICBjb25zdCByZXNldFF1ZXJ5ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIDEuIHJlc2V0IGF0dHJpYnV0ZSBmaWx0ZXJcbiAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxFeHByT2JqKVxuICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsRXhwck9iailcbiAgICAvLyAyLiByZXNldCBzcGF0aWFsIGZpbHRlclxuICAgIHNldFJlc2V0U3ltYm9sKFN5bWJvbCgpKVxuICB9LCBbc3FsRXhwck9ial0pXG5cbiAgY29uc3QgaGFuZGxlU3FsRXhwck9iakNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChzcWxPYmo6IElNU3FsRXhwcmVzc2lvbikgPT4ge1xuICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbE9iailcbiAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHNxbE9iailcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlU3BhdGlhbEZpbHRlckNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChmaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmopID0+IHtcbiAgICBzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQgPSBmaWx0ZXJcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlUmVsYXRpb25DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHtcbiAgICBzcGF0aWFsUmVsYXRpb25SZWYuY3VycmVudCA9IHJlbFxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVCdWZmZXJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHtcbiAgICBidWZmZXJSZWYuY3VycmVudCA9IHsgZGlzdGFuY2UsIHVuaXQgfVxuICB9LCBbXSlcblxuICBjb25zdCBzaG93QXR0cmlidXRlRmlsdGVyID0gdXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHJPYmogIT0gbnVsbFxuICBjb25zdCBzaG93U3BhdGlhbEZpbHRlciA9IHNwYXRpYWxGaWx0ZXJFbmFibGVkICYmIHVzZVNwYXRpYWxGaWx0ZXIgJiYgKHNwYXRpYWxGaWx0ZXJUeXBlcy5sZW5ndGggPiAwIHx8IHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEgfHwgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDApXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgZm9ybSByZW5kZXJpbmdcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2Zvcm0tcmVuZGVyLWNoZWNrJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgZGF0YXNvdXJjZVJlYWR5LFxuICAgICAgdXNlQXR0cmlidXRlRmlsdGVyLFxuICAgICAgc3FsRXhwck9iajogc3FsRXhwck9iaiA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgc3FsRXhwck9ialBhcnRzOiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzaG93QXR0cmlidXRlRmlsdGVyLFxuICAgICAgb3JpZ2luRFM6IG9yaWdpbkRTID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUz8uaWQgfHwgJ25vbmUnLFxuICAgICAgc2hvd1NwYXRpYWxGaWx0ZXIsXG4gICAgICBpc0F1dG9IZWlnaHQsXG4gICAgICBvdXRwdXREUzogb3V0cHV0RFMgPyAnZXhpc3RzJyA6ICdudWxsJ1xuICAgIH0pXG4gIH0sIFtjb25maWdJZCwgZGF0YXNvdXJjZVJlYWR5LCB1c2VBdHRyaWJ1dGVGaWx0ZXIsIHNxbEV4cHJPYmosIHNob3dBdHRyaWJ1dGVGaWx0ZXIsIG9yaWdpbkRTLCBzaG93U3BhdGlhbEZpbHRlciwgaXNBdXRvSGVpZ2h0LCBvdXRwdXREU10pXG5cbiAgLy8gTG9nIHdoZW4gZm9ybSBjb250ZW50IHNob3VsZCByZW5kZXJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2hvd0F0dHJpYnV0ZUZpbHRlciAmJiBvcmlnaW5EUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2F0dHJpYnV0ZS1maWx0ZXItcmVhZHknLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHNxbEV4cHJPYmpQYXJ0czogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbCxcbiAgICAgICAgbm90ZTogJ0lucHV0IGZpZWxkIHNob3VsZCBiZSB2aXNpYmxlJ1xuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2F0dHJpYnV0ZS1maWx0ZXItbm90LXJlYWR5JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIHNob3dBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICAgIG9yaWdpbkRTOiBvcmlnaW5EUyA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgICB1c2VBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICAgIHNxbEV4cHJPYmo6IHNxbEV4cHJPYmogPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgICAgcmVhc29uOiAhc2hvd0F0dHJpYnV0ZUZpbHRlciA/ICdzaG93QXR0cmlidXRlRmlsdGVyIGlzIGZhbHNlJyA6ICdvcmlnaW5EUyBpcyBudWxsJ1xuICAgICAgfSlcbiAgICB9XG4gIH0sIFtzaG93QXR0cmlidXRlRmlsdGVyLCBvcmlnaW5EUywgY29uZmlnSWQsIHNxbEV4cHJPYmosIHVzZUF0dHJpYnV0ZUZpbHRlciwgYXR0cmlidXRlRmlsdGVyTGFiZWxdKVxuXG4gIC8vIENoZWNrIERPTSB2aXNpYmlsaXR5IGFmdGVyIHJlbmRlclxuICBjb25zdCBmb3JtQ29udGVudFJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZm9ybUNvbnRlbnRSZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZvcm1Db250ZW50UmVmLmN1cnJlbnQpXG4gICAgICBjb25zdCByZWN0ID0gZm9ybUNvbnRlbnRSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2Zvcm0tY29udGVudC1kb20tY2hlY2snLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgZXhpc3RzOiAhIWZvcm1Db250ZW50UmVmLmN1cnJlbnQsXG4gICAgICAgIGRpc3BsYXk6IGNvbXB1dGVkU3R5bGUuZGlzcGxheSxcbiAgICAgICAgdmlzaWJpbGl0eTogY29tcHV0ZWRTdHlsZS52aXNpYmlsaXR5LFxuICAgICAgICBvcGFjaXR5OiBjb21wdXRlZFN0eWxlLm9wYWNpdHksXG4gICAgICAgIGhlaWdodDogY29tcHV0ZWRTdHlsZS5oZWlnaHQsXG4gICAgICAgIG1heEhlaWdodDogY29tcHV0ZWRTdHlsZS5tYXhIZWlnaHQsXG4gICAgICAgIGZsZXg6IGNvbXB1dGVkU3R5bGUuZmxleCxcbiAgICAgICAgZmxleEJhc2lzOiBjb21wdXRlZFN0eWxlLmZsZXhCYXNpcyxcbiAgICAgICAgcmVjdEhlaWdodDogcmVjdC5oZWlnaHQsXG4gICAgICAgIHJlY3RXaWR0aDogcmVjdC53aWR0aCxcbiAgICAgICAgaXNWaXNpYmxlOiByZWN0LmhlaWdodCA+IDAgJiYgcmVjdC53aWR0aCA+IDAsXG4gICAgICAgIHBhcmVudEhlaWdodDogZm9ybUNvbnRlbnRSZWYuY3VycmVudC5wYXJlbnRFbGVtZW50Py5jbGllbnRIZWlnaHQgfHwgMFxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtjb25maWdJZCwgc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFNdKVxuXG4gIHJldHVybiAoXG4gICAgPFF1ZXJ5VGFza0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgcmVzZXRTeW1ib2wgfX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktZm9ybScgY3NzPXtnZXRGb3JtU3R5bGUoaXNBdXRvSGVpZ2h0KX0+XG4gICAgICAgIDxkaXYgcmVmPXtmb3JtQ29udGVudFJlZn0gY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19jb250ZW50JyBvbktleURvd249e2hhbmRsZUtleURvd259PlxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgIHJvbGU9J2dyb3VwJyBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdweC00JyBcbiAgICAgICAgICAgICAgY3NzPXtjc3NgcGFkZGluZy10b3A6IDhweDtgfVxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPXthdHRyaWJ1dGVGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2Zvcm0tdGl0bGUgbXktMiBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJywgeyAnZC1ub25lJzogIWF0dHJpYnV0ZUZpbHRlckxhYmVsICYmICFhdHRyaWJ1dGVGaWx0ZXJEZXNjIH0pfT5cbiAgICAgICAgICAgICAgICB7YXR0cmlidXRlRmlsdGVyTGFiZWwgJiYgPGRpdiBjbGFzc05hbWU9J21yLTIgdGl0bGUyJz57YXR0cmlidXRlRmlsdGVyTGFiZWx9PC9kaXY+fVxuICAgICAgICAgICAgICAgIHthdHRyaWJ1dGVGaWx0ZXJEZXNjICYmIChcbiAgICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gdGl0bGU9e2F0dHJpYnV0ZUZpbHRlckRlc2N9PlxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyBpY29uIHR5cGU9J3RlcnRpYXJ5Jz48SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPjwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7b3JpZ2luRFMgJiYgKFxuICAgICAgICAgICAgICAgIDxTcWxFeHByZXNzaW9uUnVudGltZVxuICAgICAgICAgICAgICAgICAga2V5PXtgJHtjb25maWdJZH0tJHtpbml0aWFsSW5wdXRWYWx1ZSB8fCAnZGVmYXVsdCd9YH1cbiAgICAgICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e29yaWdpbkRTfVxuICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbj17YXR0cmlidXRlRmlsdGVyU3FsRXhwck9ian1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTcWxFeHByT2JqQ2hhbmdlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIHNob3dTcGF0aWFsRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxociBjbGFzc05hbWU9J20tNCcgY3NzPXtjc3NgYm9yZGVyOiBub25lOyBoZWlnaHQ6IDFweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtgfS8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7c2hvd1NwYXRpYWxGaWx0ZXIgJiYgKFxuICAgICAgICAgICAgPFF1ZXJ5VGFza1NwYXRpYWxGb3JtXG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgbGFiZWw9e3NwYXRpYWxGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgICAgZGVzYz17c3BhdGlhbEZpbHRlckRlc2N9XG4gICAgICAgICAgICAgIGZpbHRlclR5cGVzPXtzcGF0aWFsRmlsdGVyVHlwZXN9XG4gICAgICAgICAgICAgIG1hcFdpZGdldElkcz17c3BhdGlhbE1hcFdpZGdldElkc31cbiAgICAgICAgICAgICAgY3JlYXRlVG9vbFR5cGVzPXtzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXN9XG4gICAgICAgICAgICAgIG9uRmlsdGVyQ2hhbmdlPXtoYW5kbGVTcGF0aWFsRmlsdGVyQ2hhbmdlfVxuICAgICAgICAgICAgICBvblJlbGF0aW9uQ2hhbmdlPXtoYW5kbGVSZWxhdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e2hhbmRsZUJ1ZmZlckNoYW5nZX1cbiAgICAgICAgICAgICAgc3BhdGlhbFJlbGF0aW9ucz17c3BhdGlhbFJlbGF0aW9uc31cbiAgICAgICAgICAgICAgZHNFbmFibGVCdWZmZXI9e3NwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcn1cbiAgICAgICAgICAgICAgZHNCdWZmZXJEaXN0YW5jZT17c3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2V9XG4gICAgICAgICAgICAgIGRzQnVmZmVyVW5pdD17c3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgZHJhd0VuYWJsZUJ1ZmZlcj17c3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyRGlzdGFuY2U9e3NwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyVW5pdD17c3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3NwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfVxuICAgICAgICAgICAgICB1c2VSdW50aW1lRGF0YT17c3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19hY3Rpb25zIHB4LTQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICBjaGVja2VkPXtydW50aW1lWm9vbVRvU2VsZWN0ZWR9XG4gICAgICAgICAgICBvbkNoYW5nZT17KF8sIGNoZWNrZWQpID0+IHNldFJ1bnRpbWVab29tVG9TZWxlY3RlZChjaGVja2VkKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbXItMidcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbXItYXV0bycgY3NzPXtjc3NgZm9udC1zaXplOiAwLjg3NXJlbTsgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO2B9PlxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCd6b29tVG9TZWxlY3RlZCcpfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8QnV0dG9uIHJlZj17YXBwbHlCdXR0b25SZWZ9IGNvbG9yPSdwcmltYXJ5JyBjbGFzc05hbWU9J21sLWF1dG8nIGRpc2FibGVkPXshZGF0YXNvdXJjZVJlYWR5fSBvbkNsaWNrPXthcHBseVF1ZXJ5fT5cbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgnYXBwbHknKX1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICB7KHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA+IDAgfHwgc2hvd1NwYXRpYWxGaWx0ZXIpICYmIChcbiAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdtbC0yJyBvbkNsaWNrPXtyZXNldFF1ZXJ5fT57Z2V0STE4bk1lc3NhZ2UoJ3Jlc2V0Jyl9PC9CdXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L1F1ZXJ5VGFza0NvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIHR5cGUgSWNvblJlc3VsdCwgdHlwZSBJbW11dGFibGVPYmplY3QgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBJY29uIH0gZnJvbSAnamltdS11aSdcblxuaW50ZXJmYWNlIENvbnRlbnRQcm9wcyB7XG4gIGljb24/OiBJY29uUmVzdWx0IHwgSW1tdXRhYmxlT2JqZWN0PEljb25SZXN1bHQ+XG4gIG5hbWU6IHN0cmluZ1xufVxuXG5jb25zdCB0ZXh0U3R5bGUgPSBjc3NgXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGZvbnQtc2l6ZTogMC44NzVyZW07XG5gXG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tMYWJlbCAocHJvcHM6IENvbnRlbnRQcm9wcykge1xuICBjb25zdCB7IGljb24sIG5hbWUgfSA9IHByb3BzXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciB0ZXh0LXRydW5jYXRlJyBjc3M9e3RleHRTdHlsZX0+XG4gICAgICB7aWNvbiAmJiA8SWNvbiBjbGFzc05hbWU9J3F1ZXJ5LXRhc2staWNvbiBtci0yJyBpY29uPXtpY29uLnN2Z30gLz59XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZScgdGl0bGU9e25hbWV9PlxuICAgICAgICB7bmFtZX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSW1tdXRhYmxlQXJyYXksIGNsYXNzTmFtZXMsIGxvZGFzaCwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFNpemUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlUYXNrIH0gZnJvbSAnLi9xdWVyeS10YXNrJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGlzdCB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0J1xuaW1wb3J0IHsgVGFza0xpc3RQb3BwZXJXcmFwcGVyIH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QtcG9wcGVyLXdyYXBwZXInXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcblxuY29uc3QgeyBpY29uTWFwIH0gPSBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCgpXG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrTGlzdFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB3aWRnZXRMYWJlbDogc3RyaW5nXG4gIHdyYXA6IGJvb2xlYW5cbiAgbWluU2l6ZTogU2l6ZVxuICBkZWZhdWx0U2l6ZTogU2l6ZVxuICBxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBkZWZhdWx0UGFnZVNpemU/OiBudW1iZXJcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9XG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG59XG5cbmNvbnN0IFNQQUNFID0gOFxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgPiBkaXYge1xuICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICB9XG5gXG5cbi8vIHNob3cgdGFzayBsYWJlbCBhbmQgYW4gYXJyb3cgdG8gdGhlIHRhc2sgY29udGVudFxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tMaXN0SW5saW5lIChwcm9wczogUXVlcnlUYXNrTGlzdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtcywgd2lkZ2V0SWQsIG1pblNpemUsIGRlZmF1bHRTaXplLCBkZWZhdWx0UGFnZVNpemUsIHdpZGdldExhYmVsLCB3cmFwID0gZmFsc2UgfSA9IHByb3BzXG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBjb250YWluZXJXaWR0aFJlZiA9IFJlYWN0LnVzZVJlZjxudW1iZXI+KDApXG4gIGNvbnN0IGNvbnRlbnRXaWR0aFJlZiA9IFJlYWN0LnVzZVJlZjx7IFtrZXk6IHN0cmluZ106IG51bWJlciB9Pih7fSlcbiAgY29uc3QgW251bU9mRXhwYW5kZWQsIHNldE51bU9mRXhwYW5kZWRdID0gUmVhY3QudXNlU3RhdGUocXVlcnlJdGVtcy5sZW5ndGgpXG4gIGNvbnN0IFtvcGVuZWRQb3BwZXIsIHNldE9wZW5lZFBvcHBlcl0gPSBSZWFjdC51c2VTdGF0ZSgtMSlcbiAgY29uc3QgcmVzaXplT2JzZXJ2ZXJSZWYgPSBSZWFjdC51c2VSZWY8UmVzaXplT2JzZXJ2ZXI+KG51bGwpXG5cbiAgY29uc3QgYWRqdXN0Q29udGVudCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBsZXQgdG90YWwgPSAwXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1PZkV4cGFuZGVkOyBpKyspIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBxdWVyeUl0ZW1zW2ldXG4gICAgICBjb25zdCBpdGVtV2lkdGggPSBjb250ZW50V2lkdGhSZWYuY3VycmVudFtpdGVtLmNvbmZpZ0lkXVxuICAgICAgaWYgKGl0ZW1XaWR0aCA+IDApIHtcbiAgICAgICAgdG90YWwgKz0gaXRlbVdpZHRoICsgU1BBQ0VcbiAgICAgICAgaWYgKHRvdGFsID49IGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgJiYgbnVtT2ZFeHBhbmRlZCAhPT0gaSkge1xuICAgICAgICAgIHNldE51bU9mRXhwYW5kZWQoaSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC8vIGNvbnRlbnQgd2lkdGggbm90IHJlYWR5XG4gICAgICB9XG4gICAgfVxuICAgIHNldE51bU9mRXhwYW5kZWQocXVlcnlJdGVtcy5sZW5ndGgpXG4gIH0sIFtudW1PZkV4cGFuZGVkLCBxdWVyeUl0ZW1zXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZXNpemVPYnNlcnZlclJlZi5jdXJyZW50KSB7XG4gICAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgIH1cbiAgICAvLyBiaW5kIHdpdGggdGhlIG5ldyBldmVudCBoYW5kbGVyXG4gICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudCA9IG5ldyBSZXNpemVPYnNlcnZlcihsb2Rhc2gudGhyb3R0bGUoKGVudHJpZXMpID0+IHtcbiAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKVxuICAgICAgaWYgKGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgIT09IHdpZHRoKSB7XG4gICAgICAgIGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgPSB3aWR0aFxuICAgICAgICBhZGp1c3RDb250ZW50KClcbiAgICAgIH1cbiAgICB9LCAyMDApKVxuICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQub2JzZXJ2ZShjb250YWluZXJSZWYuY3VycmVudClcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKVxuICAgIH1cbiAgfSwgW2FkanVzdENvbnRlbnRdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGNvbnRhaW5lcldpZHRoUmVmLmN1cnJlbnQgPSBjb250YWluZXJSZWYuY3VycmVudD8uY2xpZW50V2lkdGhcbiAgICBhZGp1c3RDb250ZW50KClcbiAgfSlcblxuICBjb25zdCBoYW5kbGVJdGVtV2lkdGhDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5kZXg6IG51bWJlciwgd2lkdGg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5SXRlbSA9IHF1ZXJ5SXRlbXNbaW5kZXhdXG4gICAgaWYgKGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W3F1ZXJ5SXRlbS5jb25maWdJZF0gIT09IHdpZHRoKSB7XG4gICAgICBjb250ZW50V2lkdGhSZWYuY3VycmVudFtxdWVyeUl0ZW0uY29uZmlnSWRdID0gd2lkdGhcbiAgICAgIGFkanVzdENvbnRlbnQoKVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbXMsIGFkanVzdENvbnRlbnRdKVxuXG4gIGNvbnN0IGhhbmRsZVBvcHBlck9wZW5lZENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyLCBpc09wZW46IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBzZXRPcGVuZWRQb3BwZXIoaW5kZXgpXG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gb3BlbmVkUG9wcGVyKSB7XG4gICAgICAvLyBjdXJyZW50IHBvcHBlciBpcyBjbG9zZWRcbiAgICAgIHNldE9wZW5lZFBvcHBlcigtMSlcbiAgICB9XG4gIH0sIFtvcGVuZWRQb3BwZXJdKVxuXG4gIGNvbnN0IFtleHBhbmRlZEFycmF5LCBub25FeHBhbmRlZEFycmF5XSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGV4cGFuZGVkQXJyYXkgPSBbXVxuICAgIGNvbnN0IG5vbkV4cGFuZGVkQXJyYXkgPSBbXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVlcnlJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgPCBudW1PZkV4cGFuZGVkKSB7XG4gICAgICAgIGV4cGFuZGVkQXJyYXkucHVzaChxdWVyeUl0ZW1zW2ldKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9uRXhwYW5kZWRBcnJheS5wdXNoKHF1ZXJ5SXRlbXNbaV0pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbZXhwYW5kZWRBcnJheSwgbm9uRXhwYW5kZWRBcnJheV1cbiAgfSwgW3F1ZXJ5SXRlbXMsIG51bU9mRXhwYW5kZWRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiByZWY9e2NvbnRhaW5lclJlZn0gY3NzPXtzdHlsZX0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdydW50aW1lLXF1ZXJ5X19xdWVyeS1saXN0IGgtMTAwIGQtZmxleCcsIHsgJ2ZsZXgtd3JhcCc6IHdyYXAsICdhbGlnbi1jb250ZW50LXN0YXJ0Jzogd3JhcCB9KX0+XG4gICAgICB7ZXhwYW5kZWRBcnJheS5tYXAoKHF1ZXJ5SXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgICAgICAgcmV0dXJuIDxUYXNrTGlzdFBvcHBlcldyYXBwZXJcbiAgICAgICAgICBpZD17aW5kZXh9XG4gICAgICAgICAga2V5PXtjdXJyZW50SXRlbS5jb25maWdJZH1cbiAgICAgICAgICBpY29uPXtjdXJyZW50SXRlbS5pY29ufVxuICAgICAgICAgIGJ1dHRvblR5cGU9J2RlZmF1bHQnXG4gICAgICAgICAgbGFiZWw9e2N1cnJlbnRJdGVtLmRpc3BsYXlMYWJlbCA/IGN1cnJlbnRJdGVtLm5hbWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgcG9wcGVyVGl0bGU9e2N1cnJlbnRJdGVtLm5hbWV9XG4gICAgICAgICAgb25XaWR0aENoYW5nZT17aGFuZGxlSXRlbVdpZHRoQ2hhbmdlfVxuICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgIG9uT3BlbmVkQ2hhbmdlPXtoYW5kbGVQb3BwZXJPcGVuZWRDaGFuZ2V9XG4gICAgICAgICAgZm9yY2VDbG9zZT17b3BlbmVkUG9wcGVyID49IDAgJiYgb3BlbmVkUG9wcGVyICE9PSBpbmRleH1cbiAgICAgICAgPlxuICAgICAgICAgIDxRdWVyeVRhc2tcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgIHRvdGFsPXsxfVxuICAgICAgICAgICAgaXNJblBvcHBlclxuICAgICAgICAgICAgcXVlcnlJdGVtPXtjdXJyZW50SXRlbX1cbiAgICAgICAgICAgIHdyYXBwZWRJblBvcHBlcj17dHJ1ZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0ncGItNCdcbiAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfVxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU9e2N1cnJlbnRJdGVtLnNob3J0SWQgPT09IHByb3BzLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID8gcHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWUudmFsdWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtwcm9wcy5vbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZD17Y3VycmVudEl0ZW0uc2hvcnRJZH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1Rhc2tMaXN0UG9wcGVyV3JhcHBlcj5cbiAgICAgIH0pfVxuXG4gICAgICB7bm9uRXhwYW5kZWRBcnJheS5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgIGlkPXtleHBhbmRlZEFycmF5Lmxlbmd0aCArIDF9XG4gICAgICAgICAgaWNvbj17aWNvbk1hcC5pY29uTW9yZX1cbiAgICAgICAgICBtaW5TaXplPXttaW5TaXplfVxuICAgICAgICAgIGJ1dHRvblR5cGU9J2RlZmF1bHQnXG4gICAgICAgICAgcG9wcGVyVGl0bGU9e3dpZGdldExhYmVsfVxuICAgICAgICAgIGRlZmF1bHRTaXplPXtkZWZhdWx0U2l6ZX1cbiAgICAgICAgICBvbk9wZW5lZENoYW5nZT17aGFuZGxlUG9wcGVyT3BlbmVkQ2hhbmdlfVxuICAgICAgICAgIGZvcmNlQ2xvc2U9e29wZW5lZFBvcHBlciA+PSAwICYmIG9wZW5lZFBvcHBlciAhPT0gZXhwYW5kZWRBcnJheS5sZW5ndGggKyAxfVxuICAgICAgICA+XG4gICAgICAgICAgPFF1ZXJ5VGFza0xpc3Qgd2lkZ2V0SWQ9e3dpZGdldElkfSBpc0luUG9wcGVyIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfSBxdWVyeUl0ZW1zPXtub25FeHBhbmRlZEFycmF5IGFzIGFueX0gY2xhc3NOYW1lPSdwYi00JyBpbml0aWFsUXVlcnlWYWx1ZT17cHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWV9IG9uSGFzaFBhcmFtZXRlclVzZWQ9e3Byb3BzLm9uSGFzaFBhcmFtZXRlclVzZWR9IC8+XG4gICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSWNvblJlc3VsdCwgdHlwZSBJbW11dGFibGVPYmplY3QsIGxvZGFzaCwgY2xhc3NOYW1lcywgaG9va3MsIGlzS2V5Ym9hcmRNb2RlLCBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgSWNvbiwgTW9iaWxlUGFuZWwsIHR5cGUgU2l6ZSwgdHlwZSBCdXR0b25UeXBlLCBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTLCBGbG9hdGluZ1BhbmVsLCB0eXBlIFNoaWZ0T3B0aW9ucyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBXSURHRVRfVkVSU0lPTiB9IGZyb20gJy4uL3ZlcnNpb24nXG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFza0xpc3RQb3BwZXJXcmFwcGVyUHJvcHMge1xuICBpZDogbnVtYmVyXG4gIGljb24/OiBzdHJpbmcgfCBJbW11dGFibGVPYmplY3Q8SWNvblJlc3VsdD5cbiAgbGFiZWw/OiBzdHJpbmdcbiAgZm9yY2VDbG9zZT86IGJvb2xlYW5cbiAgcG9wcGVyVGl0bGU/OiBzdHJpbmdcbiAgYnV0dG9uVHlwZT86IEJ1dHRvblR5cGVcbiAgb25XaWR0aENoYW5nZT86IChpZDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uT3BlbmVkQ2hhbmdlPzogKGlkOiBudW1iZXIsIGlzT3BlbjogYm9vbGVhbikgPT4gdm9pZFxuICBtaW5TaXplOiBTaXplXG4gIGRlZmF1bHRTaXplOiBTaXplXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdEVsZW1lbnQ8YW55PlxufVxuXG5jb25zdCBzaGlmdE9wdGlvbnM6IFNoaWZ0T3B0aW9ucyA9IHsgcGFkZGluZzogMSB9XG5cbmV4cG9ydCBmdW5jdGlvbiBUYXNrTGlzdFBvcHBlcldyYXBwZXIgKHByb3BzOiBUYXNrTGlzdFBvcHBlcldyYXBwZXJQcm9wcykge1xuICBjb25zdCB7IGlkLCBpY29uLCBsYWJlbCwgZm9yY2VDbG9zZSwgb25PcGVuZWRDaGFuZ2UsIHBvcHBlclRpdGxlLCBtaW5TaXplLCBkZWZhdWx0U2l6ZSwgb25XaWR0aENoYW5nZSwgYnV0dG9uVHlwZSA9ICd0ZXJ0aWFyeScsIGNoaWxkcmVuIH0gPSBwcm9wc1xuICBjb25zdCBpY29uUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IHdpZHRoUmVmID0gUmVhY3QudXNlUmVmKDApXG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW3BvcHBlclZlcnNpb24sIHNldFBvcHBlclZlcnNpb25dID0gUmVhY3QudXNlU3RhdGUoMClcbiAgY29uc3QgaXNNb2JpbGUgPSBob29rcy51c2VDaGVja1NtYWxsQnJvd3NlclNpemVNb2RlKClcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChmb3JjZUNsb3NlKSB7XG4gICAgICBzZXRJc09wZW4oZmFsc2UpXG4gICAgfVxuICB9LCBbZm9yY2VDbG9zZV0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBvbldpZHRoQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB3aWR0aFJlZi5jdXJyZW50ID0gTWF0aC5yb3VuZChpY29uUmVmLmN1cnJlbnQuY2xpZW50V2lkdGgpXG4gICAgICBvbldpZHRoQ2hhbmdlKGlkLCB3aWR0aFJlZi5jdXJyZW50KVxuICAgICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIobG9kYXNoLnRocm90dGxlKChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZChlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKVxuICAgICAgICBpZiAod2lkdGhSZWYuY3VycmVudCAhPT0gd2lkdGgpIHtcbiAgICAgICAgICB3aWR0aFJlZi5jdXJyZW50ID0gd2lkdGhcbiAgICAgICAgICBvbldpZHRoQ2hhbmdlKGlkLCB3aWR0aClcbiAgICAgICAgfVxuICAgICAgfSwgMjAwKSlcbiAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUoaWNvblJlZi5jdXJyZW50KVxuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KClcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgdG9nZ2xlUG9wcGVyID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygb25PcGVuZWRDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9uT3BlbmVkQ2hhbmdlKGlkLCAhaXNPcGVuKVxuICAgIH1cbiAgICBzZXRJc09wZW4oIWlzT3BlbilcbiAgICBzZXRQb3BwZXJWZXJzaW9uKHBvcHBlclZlcnNpb24gKyAxKVxuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoaXNLZXlib2FyZE1vZGUoKSkge1xuICAgICAgICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGljb25SZWYuY3VycmVudClcbiAgICAgICAgfVxuICAgICAgfSwgMjAwKVxuICAgIH1cbiAgfSwgW2lkLCBpc09wZW4sIHBvcHBlclZlcnNpb24sIG9uT3BlbmVkQ2hhbmdlXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdydW50aW1lLXF1ZXJ5X193aWRnZXQtcG9wcGVyJz5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgdGl0bGU9e2xhYmVsfVxuICAgICAgICBhcmlhLWxhYmVsPXtsYWJlbH1cbiAgICAgICAgaWNvbiBzaXplPSdzbSdcbiAgICAgICAgdmFyaWFudD17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/ICd0ZXh0JyA6IHVuZGVmaW5lZH1cbiAgICAgICAgY29sb3I9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyAnaW5oZXJpdCcgOiB1bmRlZmluZWR9XG4gICAgICAgIHR5cGU9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyB1bmRlZmluZWQgOiBidXR0b25UeXBlfVxuICAgICAgICByZWY9e2ljb25SZWZ9XG4gICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVBvcHBlcn1cbiAgICAgID5cbiAgICAgICAge2ljb24gJiYgPEljb25cbiAgICAgICAgICBzaXplPXsxNn1cbiAgICAgICAgICB7Li4uKHR5cGVvZiBpY29uID09PSAnc3RyaW5nJyA/IHsgaWNvbiB9IDogeyBpY29uOiBpY29uLnN2ZywgY29sb3I6IGJ1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyB1bmRlZmluZWQgOiBpY29uLnByb3BlcnRpZXMuY29sb3IgfSl9XG4gICAgICAgIC8+fVxuICAgICAgICB7bGFiZWwgJiYgPGRpdlxuICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gICAgICAgICAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDI7XG4gICAgICAgICAgICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsO1xuICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjI7XG4gICAgICAgICAgYH1cbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoeyAnbWwtMic6IGljb24gIT0gbnVsbCB9KX0+e2xhYmVsfTwvZGl2Pn1cbiAgICAgIDwvQnV0dG9uPlxuICAgICAge2lzTW9iaWxlXG4gICAgICAgID8gPE1vYmlsZVBhbmVsIG9wZW49e2lzT3Blbn0gdGl0bGU9e3BvcHBlclRpdGxlfSBvbkNsb3NlPXt0b2dnbGVQb3BwZXJ9PlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMXJlbTsgLyogU2NvcGVkIHBhZGRpbmcgdG8gc3BhY2UgY29udGVudCBmcm9tIGZvb3RlciAqL1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDEycHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICB7LyogQ29kZS9PcGVuIFNvdXJjZSBTeW1ib2wgKi99XG4gICAgICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGUub3JnXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuN3JlbTtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L01vYmlsZVBhbmVsPlxuICAgICAgICA6IDxGbG9hdGluZ1BhbmVsXG4gICAgICAgICAgICBjbGFzc05hbWU9J3VpLXVuaXQtcG9wcGVyIHVpLXVuaXQtcG9wcGVyX2stYXJyYW5nZW1lbnQtaWNvbiBmbGV4LWdyb3ctMSdcbiAgICAgICAgICAgIGhlYWRlckNsYXNzTmFtZT17Rk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU31cbiAgICAgICAgICAgIG9wZW49e2lzT3Blbn1cbiAgICAgICAgICAgIG9uSGVhZGVyQ2xvc2U9e3RvZ2dsZVBvcHBlcn1cbiAgICAgICAgICAgIHRvZ2dsZT17dG9nZ2xlUG9wcGVyfVxuICAgICAgICAgICAgaGVhZGVyVGl0bGU9e3BvcHBlclRpdGxlfVxuICAgICAgICAgICAgbWluU2l6ZT17bWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtkZWZhdWx0U2l6ZX1cbiAgICAgICAgICAgIGRyYWdCb3VuZHM9J2JvZHknXG4gICAgICAgICAgICB2ZXJzaW9uPXtwb3BwZXJWZXJzaW9ufVxuICAgICAgICAgICAgcmVmZXJlbmNlPXtpY29uUmVmfVxuICAgICAgICAgICAgcGxhY2VtZW50PSdib3R0b20tc3RhcnQnXG4gICAgICAgICAgICBzaGlmdE9wdGlvbnM9e3NoaWZ0T3B0aW9uc31cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxcmVtOyAvKiBTY29wZWQgcGFkZGluZyB0byBzcGFjZSBjb250ZW50IGZyb20gZm9vdGVyICovXG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsvKiBTdGF0aW9uYXJ5IGZvb3RlciAqL31cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuMDI1ZW07XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgICAgIDxzdmcgXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTYgMTggMjIgMTIgMTYgNlwiLz5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIFF1ZXJ5U2ltcGxlIGJ5IE1hcFNpbXBsZS5vcmdcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvRmxvYXRpbmdQYW5lbD5cbiAgICAgIH1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSW1tdXRhYmxlQXJyYXksIEltbXV0YWJsZSwgdHlwZSBJbW11dGFibGVPYmplY3QsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgU2VsZWN0IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5VGFzayB9IGZyb20gJy4vcXVlcnktdGFzaydcbmltcG9ydCB7IEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlcyBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuaW1wb3J0IHsgZGVidWdMb2dnZXIgfSBmcm9tICcuL2RlYnVnLWxvZ2dlcidcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGlzSW5Qb3BwZXI/OiBib29sZWFuXG4gIGRlZmF1bHRQYWdlU2l6ZT86IG51bWJlclxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9XG4gIG9uSGFzaFBhcmFtZXRlclVzZWQ/OiAoc2hvcnRJZDogc3RyaW5nKSA9PiB2b2lkXG59XG5cbmludGVyZmFjZSBHcm91cGVkUXVlcmllcyB7XG4gIGdyb3VwczogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9XG4gIHVuZ3JvdXBlZDogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT5cbiAgZ3JvdXBPcmRlcjogc3RyaW5nW11cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdyb3VwIHF1ZXJpZXMgYnkgZ3JvdXBJZFxuY29uc3QgZ3JvdXBRdWVyaWVzID0gKHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+KTogR3JvdXBlZFF1ZXJpZXMgPT4ge1xuICBjb25zdCBncm91cHM6IHsgW2dyb3VwSWQ6IHN0cmluZ106IHsgaXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+LCBkaXNwbGF5TmFtZTogc3RyaW5nLCBpY29uPzogYW55IH0gfSA9IHt9XG4gIGNvbnN0IHVuZ3JvdXBlZDogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT4gPSBbXVxuICBjb25zdCBncm91cE9yZGVyOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IGdyb3VwSW5kZXhNYXA6IHsgW2dyb3VwSWQ6IHN0cmluZ106IG51bWJlciB9ID0ge31cbiAgXG4gIC8vIEZpcnN0IHBhc3M6IGNvbGxlY3QgaXRlbXMgaW4gcmVndWxhciBhcnJheXNcbiAgY29uc3QgZ3JvdXBJdGVtc01hcDogeyBbZ3JvdXBJZDogc3RyaW5nXTogUXVlcnlJdGVtVHlwZVtdIH0gPSB7fVxuXG4gIHF1ZXJ5SXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICBpZiAoIWdyb3VwSXRlbXNNYXBbaXRlbS5ncm91cElkXSkge1xuICAgICAgICBncm91cEl0ZW1zTWFwW2l0ZW0uZ3JvdXBJZF0gPSBbXVxuICAgICAgICBncm91cHNbaXRlbS5ncm91cElkXSA9IHtcbiAgICAgICAgICBpdGVtczogSW1tdXRhYmxlKFtdKSxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogaXRlbS5ncm91cERpc3BsYXlOYW1lIHx8IGl0ZW0ubmFtZSB8fCBgR3JvdXAgJHtpdGVtLmdyb3VwSWR9YCxcbiAgICAgICAgICBpY29uOiBpdGVtLmljb25cbiAgICAgICAgfVxuICAgICAgICBncm91cEluZGV4TWFwW2l0ZW0uZ3JvdXBJZF0gPSBpbmRleFxuICAgICAgICBncm91cE9yZGVyLnB1c2goaXRlbS5ncm91cElkKVxuICAgICAgfVxuICAgICAgZ3JvdXBJdGVtc01hcFtpdGVtLmdyb3VwSWRdLnB1c2goaXRlbSlcbiAgICB9IGVsc2Uge1xuICAgICAgdW5ncm91cGVkLnB1c2goeyBpdGVtLCBpbmRleCB9KVxuICAgIH1cbiAgfSlcblxuICAvLyBTZWNvbmQgcGFzczogY29udmVydCByZWd1bGFyIGFycmF5cyB0byBJbW11dGFibGVBcnJheXNcbiAgT2JqZWN0LmtleXMoZ3JvdXBJdGVtc01hcCkuZm9yRWFjaChncm91cElkID0+IHtcbiAgICBncm91cHNbZ3JvdXBJZF0uaXRlbXMgPSBJbW11dGFibGUoZ3JvdXBJdGVtc01hcFtncm91cElkXSlcbiAgfSlcblxuICByZXR1cm4geyBncm91cHMsIHVuZ3JvdXBlZCwgZ3JvdXBPcmRlciB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZGlzcGxheSBuYW1lIGZvciBxdWVyeSBpbiBkcm9wZG93blxuLy8gVXNlczogc2VhcmNoQWxpYXMgfHwgamltdUZpZWxkTmFtZSB8fCBpdGVtLm5hbWUgfHwgZmFsbGJhY2tcbmNvbnN0IGdldFF1ZXJ5RGlzcGxheU5hbWUgPSAoaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+KTogc3RyaW5nID0+IHtcbiAgLy8gRmlyc3QgcHJpb3JpdHk6IHNlYXJjaEFsaWFzIGlmIHNldFxuICBpZiAoaXRlbS5zZWFyY2hBbGlhcykge1xuICAgIHJldHVybiBpdGVtLnNlYXJjaEFsaWFzXG4gIH1cbiAgXG4gIC8vIFNlY29uZCBwcmlvcml0eTogZmllbGQgbmFtZSBmcm9tIFNRTCBleHByZXNzaW9uXG4gIGNvbnN0IGppbXVGaWVsZE5hbWUgPSBpdGVtLnNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LmppbXVGaWVsZE5hbWVcbiAgaWYgKGppbXVGaWVsZE5hbWUpIHtcbiAgICByZXR1cm4gamltdUZpZWxkTmFtZVxuICB9XG4gIFxuICAvLyBUaGlyZCBwcmlvcml0eTogaXRlbSBuYW1lXG4gIGlmIChpdGVtLm5hbWUpIHtcbiAgICByZXR1cm4gaXRlbS5uYW1lXG4gIH1cbiAgXG4gIC8vIEZhbGxiYWNrXG4gIHJldHVybiAnUXVlcnknXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tMaXN0IChwcm9wczogUXVlcnlUYXNrTGlzdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtcywgd2lkZ2V0SWQsIGRlZmF1bHRQYWdlU2l6ZSwgaXNJblBvcHBlciA9IGZhbHNlLCBjbGFzc05hbWUgPSAnJywgaW5pdGlhbFF1ZXJ5VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2VzKVxuICBcbiAgY29uc3QgeyBncm91cHMsIHVuZ3JvdXBlZCwgZ3JvdXBPcmRlciB9ID0gUmVhY3QudXNlTWVtbygoKSA9PiBncm91cFF1ZXJpZXMocXVlcnlJdGVtcyksIFtxdWVyeUl0ZW1zXSlcbiAgXG4gIC8vIEZpbmQgdGhlIHF1ZXJ5IGl0ZW0gbWF0Y2hpbmcgdGhlIGluaXRpYWxRdWVyeVZhbHVlIHNob3J0SWQgZnJvbSBVUkwgaGFzaFxuICBjb25zdCBtYXRjaGluZ1F1ZXJ5SW5kZXggPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIWluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5SXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5zaG9ydElkID09PSBpbml0aWFsUXVlcnlWYWx1ZS5zaG9ydElkKVxuICB9LCBbcXVlcnlJdGVtcywgaW5pdGlhbFF1ZXJ5VmFsdWVdKVxuICBcbiAgLy8gRGV0ZXJtaW5lIHdoaWNoIGdyb3VwL3VuZ3JvdXBlZCBpbmRleCB0aGUgbWF0Y2hpbmcgcXVlcnkgaXMgYXRcbiAgY29uc3QgZ2V0UXVlcnlTZWxlY3Rpb24gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAobWF0Y2hpbmdRdWVyeUluZGV4IDwgMCkgcmV0dXJuIG51bGxcbiAgICBcbiAgICBjb25zdCBpdGVtID0gcXVlcnlJdGVtc1ttYXRjaGluZ1F1ZXJ5SW5kZXhdXG4gICAgaWYgKGl0ZW0uZ3JvdXBJZCkge1xuICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IGdyb3Vwc1tpdGVtLmdyb3VwSWRdPy5pdGVtcyB8fCBJbW11dGFibGUoW10pXG4gICAgICBjb25zdCBpbmRleEluR3JvdXAgPSBncm91cEl0ZW1zLmZpbmRJbmRleChxID0+IHEuY29uZmlnSWQgPT09IGl0ZW0uY29uZmlnSWQpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2hhc2gtcXVlcnktZm91bmQtaW4tZ3JvdXAnLFxuICAgICAgICBncm91cElkOiBpdGVtLmdyb3VwSWQsXG4gICAgICAgIGluZGV4SW5Hcm91cDogaW5kZXhJbkdyb3VwID49IDAgPyBpbmRleEluR3JvdXAgOiAwLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogaXRlbS5zaG9ydElkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgdHlwZTogJ2dyb3VwJyBhcyBjb25zdCwgZ3JvdXBJZDogaXRlbS5ncm91cElkLCBpbmRleDogaW5kZXhJbkdyb3VwID49IDAgPyBpbmRleEluR3JvdXAgOiAwIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5XG4gICAgICBjb25zdCBpbmRleEluVW5ncm91cGVkID0gdW5ncm91cGVkLmZpbmRJbmRleCgoeyBpdGVtOiBxIH0pID0+IHEuY29uZmlnSWQgPT09IGl0ZW0uY29uZmlnSWQpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2hhc2gtcXVlcnktZm91bmQtdW5ncm91cGVkJyxcbiAgICAgICAgaW5kZXhJblVuZ3JvdXBlZDogaW5kZXhJblVuZ3JvdXBlZCA+PSAwID8gaW5kZXhJblVuZ3JvdXBlZCA6IDAsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBpdGVtLnNob3J0SWRcbiAgICAgIH0pXG4gICAgICByZXR1cm4geyB0eXBlOiAndW5ncm91cGVkJyBhcyBjb25zdCwgaW5kZXg6IGluZGV4SW5Vbmdyb3VwZWQgPj0gMCA/IGluZGV4SW5Vbmdyb3VwZWQgOiAwIH1cbiAgICB9XG4gIH0sIFttYXRjaGluZ1F1ZXJ5SW5kZXgsIHF1ZXJ5SXRlbXMsIGdyb3VwcywgdW5ncm91cGVkXSlcbiAgXG4gIC8vIFRyYWNrIHNlbGVjdGVkIHF1ZXJ5IC0gaW5pdGlhbGl6ZSB3aXRoIG1hdGNoaW5nIHF1ZXJ5IGlmIGZvdW5kIGZyb20gVVJMIGhhc2hcbiAgY29uc3QgW3NlbGVjdGVkR3JvdXBJZCwgc2V0U2VsZWN0ZWRHcm91cElkXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZyB8IG51bGw+KCgpID0+IHtcbiAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24/LnR5cGUgPT09ICdncm91cCcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbC1ncm91cC1zZWxlY3Rpb24nLFxuICAgICAgICBncm91cElkOiBnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldFF1ZXJ5U2VsZWN0aW9uLmdyb3VwSWRcbiAgICB9XG4gICAgLy8gRGVmYXVsdCB0byBmaXJzdCBncm91cCBpZiBncm91cHMgZXhpc3QgYW5kIG5vIGhhc2ggcGFyYW1ldGVyXG4gICAgaWYgKGdyb3VwT3JkZXIubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLWdyb3VwLXNlbGVjdGlvbi1kZWZhdWx0JyxcbiAgICAgICAgZ3JvdXBJZDogZ3JvdXBPcmRlclswXSxcbiAgICAgICAgbm90ZTogJ05vIGhhc2ggcGFyYW1ldGVyLCBkZWZhdWx0aW5nIHRvIGZpcnN0IGdyb3VwJ1xuICAgICAgfSlcbiAgICAgIHJldHVybiBncm91cE9yZGVyWzBdXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0pXG4gIGNvbnN0IFtzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCwgc2V0U2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXhdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4ge1xuICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbj8udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLWdyb3VwLXF1ZXJ5LWluZGV4JyxcbiAgICAgICAgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4XG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH0pXG4gIGNvbnN0IFtzZWxlY3RlZFVuZ3JvdXBlZEluZGV4LCBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4XSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IHtcbiAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24/LnR5cGUgPT09ICd1bmdyb3VwZWQnKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWwtdW5ncm91cGVkLWluZGV4JyxcbiAgICAgICAgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4XG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH0pXG4gIFxuICAvLyBVcGRhdGUgc2VsZWN0aW9uIHdoZW4gaW5pdGlhbFF1ZXJ5VmFsdWUgY2hhbmdlcyAoZS5nLiwgd2hlbiBVUkwgaGFzaCBpcyBkZXRlY3RlZClcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24pIHtcbiAgICAgIGlmIChnZXRRdWVyeVNlbGVjdGlvbi50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tY2hhbmdlZC10by1ncm91cCcsXG4gICAgICAgICAgZ3JvdXBJZDogZ2V0UXVlcnlTZWxlY3Rpb24uZ3JvdXBJZCxcbiAgICAgICAgICBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXhcbiAgICAgICAgfSlcbiAgICAgICAgc2V0U2VsZWN0ZWRHcm91cElkKGdldFF1ZXJ5U2VsZWN0aW9uLmdyb3VwSWQpXG4gICAgICAgIHNldFNlbGVjdGVkR3JvdXBRdWVyeUluZGV4KGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1jaGFuZ2VkLXRvLXVuZ3JvdXBlZCcsXG4gICAgICAgICAgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4XG4gICAgICAgIH0pXG4gICAgICAgIHNldFNlbGVjdGVkR3JvdXBJZChudWxsKVxuICAgICAgICBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyBoYXNoIHBhcmFtZXRlciAtIGVuc3VyZSB3ZSBoYXZlIGEgZGVmYXVsdCBzZWxlY3Rpb25cbiAgICAgIC8vIElmIGdyb3VwcyBleGlzdCwgZGVmYXVsdCB0byBmaXJzdCBncm91cCAoYWxyZWFkeSBoYW5kbGVkIGluIHVzZVN0YXRlIGluaXRpYWxpemVyKVxuICAgICAgLy8gQnV0IGlmIG5vIGdyb3VwcyBhbmQgd2UgaGF2ZSB1bmdyb3VwZWQsIGVuc3VyZSBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4IGlzIHNldFxuICAgICAgaWYgKGdyb3VwT3JkZXIubGVuZ3RoID09PSAwICYmIHVuZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICduby1oYXNoLXBhcmFtZXRlci1kZWZhdWx0LXVuZ3JvdXBlZCcsXG4gICAgICAgICAgZGVmYXVsdEluZGV4OiAwXG4gICAgICAgIH0pXG4gICAgICAgIHNldFNlbGVjdGVkVW5ncm91cGVkSW5kZXgoMClcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtnZXRRdWVyeVNlbGVjdGlvbiwgZ3JvdXBPcmRlci5sZW5ndGgsIHVuZ3JvdXBlZC5sZW5ndGhdKVxuICBcbiAgLy8gR2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcXVlcnkgaXRlbVxuICBjb25zdCBnZXRTZWxlY3RlZFF1ZXJ5SXRlbSA9ICgpOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4gPT4ge1xuICAgIC8vIFBSSU9SSVRZIDE6IElmIGhhc2ggcGFyYW1ldGVyIG1hdGNoZXMgYSBxdWVyeSwgdXNlIHRoYXQgZGlyZWN0bHlcbiAgICAvLyBUaGlzIGVuc3VyZXMgd2UgYWx3YXlzIHVzZSB0aGUgaGFzaC1tYXRjaGVkIHF1ZXJ5LCByZWdhcmRsZXNzIG9mIHN0YXRlIHRpbWluZ1xuICAgIC8vIFRoaXMgaXMgY3JpdGljYWwgZm9yIGdyb3VwZWQgcXVlcmllcyB3aGVyZSBkcm9wZG93bnMgbmVlZCB0byBiZSBzeW5jaHJvbml6ZWRcbiAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24gJiYgbWF0Y2hpbmdRdWVyeUluZGV4ID49IDApIHtcbiAgICAgIGNvbnN0IGhhc2hNYXRjaGVkSXRlbSA9IHF1ZXJ5SXRlbXNbbWF0Y2hpbmdRdWVyeUluZGV4XVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRTZWxlY3RlZFF1ZXJ5SXRlbS1oYXNoLW1hdGNoJyxcbiAgICAgICAgc2hvcnRJZDogaGFzaE1hdGNoZWRJdGVtLnNob3J0SWQsXG4gICAgICAgIGdyb3VwSWQ6IGhhc2hNYXRjaGVkSXRlbS5ncm91cElkLFxuICAgICAgICBjb25maWdJZDogaGFzaE1hdGNoZWRJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBpc0dyb3VwZWQ6ICEhaGFzaE1hdGNoZWRJdGVtLmdyb3VwSWQsXG4gICAgICAgIG1hdGNoaW5nUXVlcnlJbmRleCxcbiAgICAgICAgbm90ZTogJ1VzaW5nIGhhc2gtbWF0Y2hlZCBxdWVyeSAoaGlnaGVzdCBwcmlvcml0eSknXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGhhc2hNYXRjaGVkSXRlbVxuICAgIH1cbiAgICBcbiAgICAvLyBQUklPUklUWSAyOiBPdGhlcndpc2UgdXNlIGN1cnJlbnQgc3RhdGUgc2VsZWN0aW9uXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAnZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0tc3RhdGUtc2VsZWN0aW9uJyxcbiAgICAgIHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgIGhhc1NlbGVjdGVkR3JvdXA6IHNlbGVjdGVkR3JvdXBJZCAmJiBncm91cHNbc2VsZWN0ZWRHcm91cElkXSxcbiAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LFxuICAgICAgc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCxcbiAgICAgIHVuZ3JvdXBlZExlbmd0aDogdW5ncm91cGVkLmxlbmd0aCxcbiAgICAgIGdyb3VwT3JkZXJMZW5ndGg6IGdyb3VwT3JkZXIubGVuZ3RoLFxuICAgICAgbm90ZTogJ05vIGhhc2ggcGFyYW1ldGVyLCB1c2luZyBzdGF0ZSBzZWxlY3Rpb24nXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiBhIGdyb3VwIGlzIHNlbGVjdGVkLCBnZXQgcXVlcnkgZnJvbSB0aGF0IGdyb3VwXG4gICAgaWYgKHNlbGVjdGVkR3JvdXBJZCAmJiBncm91cHNbc2VsZWN0ZWRHcm91cElkXSkge1xuICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdLml0ZW1zXG4gICAgICBpZiAoZ3JvdXBJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDwgZ3JvdXBJdGVtcy5sZW5ndGggPyBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCA6IDBcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gZ3JvdXBJdGVtc1tpZHhdXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3RlZC1xdWVyeS1mcm9tLWdyb3VwJyxcbiAgICAgICAgICBncm91cElkOiBzZWxlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgZ3JvdXBRdWVyeUluZGV4OiBpZHgsXG4gICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHNlbGVjdGVkSXRlbS5jb25maWdJZCxcbiAgICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKHNlbGVjdGVkSXRlbSlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBPdGhlcndpc2UsIGdldCBmcm9tIHVuZ3JvdXBlZCBxdWVyaWVzXG4gICAgaWYgKHVuZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpZHggPSBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4IDwgdW5ncm91cGVkLmxlbmd0aCA/IHNlbGVjdGVkVW5ncm91cGVkSW5kZXggOiAwXG4gICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB1bmdyb3VwZWRbaWR4XS5pdGVtXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ3NlbGVjdGVkLXF1ZXJ5LWZyb20tdW5ncm91cGVkJyxcbiAgICAgICAgdW5ncm91cGVkSW5kZXg6IGlkeCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHNlbGVjdGVkSXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlEaXNwbGF5TmFtZTogZ2V0UXVlcnlEaXNwbGF5TmFtZShzZWxlY3RlZEl0ZW0pXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbVxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byBmaXJzdCBxdWVyeSBpdGVtXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAnc2VsZWN0ZWQtcXVlcnktZmFsbGJhY2snLFxuICAgICAgbm90ZTogJ05vIGdyb3VwcyBvciB1bmdyb3VwZWQgcXVlcmllcywgdXNpbmcgZmlyc3QgaXRlbSdcbiAgICB9KVxuICAgIHJldHVybiBxdWVyeUl0ZW1zWzBdXG4gIH1cbiAgXG4gIGNvbnN0IHNlbGVjdGVkUXVlcnlJdGVtID0gZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0oKVxuICBjb25zdCBzZWxlY3RlZFF1ZXJ5UmVhbEluZGV4ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHF1ZXJ5SXRlbXMuZmluZEluZGV4KHEgPT4gcS5jb25maWdJZCA9PT0gc2VsZWN0ZWRRdWVyeUl0ZW0uY29uZmlnSWQpXG4gIH0sIFtxdWVyeUl0ZW1zLCBzZWxlY3RlZFF1ZXJ5SXRlbV0pXG4gIFxuICAvLyBJZiBvbmx5IG9uZSBxdWVyeSB0b3RhbCwgZG9uJ3Qgc2hvdyBkcm9wZG93blxuICBjb25zdCBzaG93RHJvcGRvd24gPSBxdWVyeUl0ZW1zLmxlbmd0aCA+IDEgfHwgZ3JvdXBPcmRlci5sZW5ndGggPiAwXG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgcnVudGltZS1xdWVyeV9fcXVlcnktbGlzdCBoLTEwMCAke2NsYXNzTmFtZX1gfSBjc3M9e2Nzc2BcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgLnF1ZXJ5LXNlbGVjdG9yIHtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgfVxuICAgICAgLnF1ZXJ5LXNlbGVjdG9yLWxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICB9XG4gICAgICAucXVlcnktc2VsZWN0b3Igc2VsZWN0IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgICAucXVlcnktdGFzay1jb250YWluZXIge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIH1cbiAgICBgfT5cbiAgICAgIHsvKiBTZWFyY2ggTGF5ZXIgZHJvcGRvd24gbW92ZWQgdG8gUXVlcnlUYXNrIFF1ZXJ5IHRhYiBjb250ZW50ICovfVxuICAgICAgXG4gICAgICB7LyogU2hvdyBzZWxlY3RlZCBxdWVyeSBmb3JtIGRpcmVjdGx5IGJlbG93ICovfVxuICAgICAge3NlbGVjdGVkUXVlcnlJdGVtICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BxdWVyeS10YXNrLWNvbnRhaW5lciAke2lzSW5Qb3BwZXIgPyBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTIDogJyd9YH0+XG4gICAgICAgICAgPFF1ZXJ5VGFza1xuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgaW5kZXg9e3NlbGVjdGVkUXVlcnlSZWFsSW5kZXggPj0gMCA/IHNlbGVjdGVkUXVlcnlSZWFsSW5kZXggOiAwfVxuICAgICAgICAgICAgdG90YWw9e3F1ZXJ5SXRlbXMubGVuZ3RofVxuICAgICAgICAgICAgcXVlcnlJdGVtPXtzZWxlY3RlZFF1ZXJ5SXRlbX1cbiAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17ZGVmYXVsdFBhZ2VTaXplfVxuICAgICAgICAgICAgaXNJblBvcHBlcj17aXNJblBvcHBlcn1cbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtzZWxlY3RlZFF1ZXJ5SXRlbS5zaG9ydElkID09PSBpbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCA/IGluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e29uSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW1zPXtxdWVyeUl0ZW1zfVxuICAgICAgICAgICAgc2VsZWN0ZWRRdWVyeUluZGV4PXtzZWxlY3RlZFVuZ3JvdXBlZEluZGV4fVxuICAgICAgICAgICAgb25RdWVyeUNoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIC8vIEdyb3VwaW5nIHByb3BzXG4gICAgICAgICAgICBncm91cHM9e2dyb3Vwc31cbiAgICAgICAgICAgIHVuZ3JvdXBlZD17dW5ncm91cGVkfVxuICAgICAgICAgICAgZ3JvdXBPcmRlcj17Z3JvdXBPcmRlcn1cbiAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZD17c2VsZWN0ZWRHcm91cElkfVxuICAgICAgICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXg9e3NlbGVjdGVkR3JvdXBRdWVyeUluZGV4fVxuICAgICAgICAgICAgb25Hcm91cENoYW5nZT17KGdyb3VwSWQpID0+IHNldFNlbGVjdGVkR3JvdXBJZChncm91cElkKX1cbiAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleChpbmRleCl9XG4gICAgICAgICAgICBvblVuZ3JvdXBlZENoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIC8vIE5vIG9uTmF2QmFjayAtIG5vIG5hdmlnYXRpb24gbmVlZGVkXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG5cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHsgUmVhY3QsIFJlYWN0UmVkdXgsIHR5cGUgSU1TdGF0ZSwganN4LCBjc3MsIGNsYXNzTmFtZXMsIHR5cGUgSW1tdXRhYmxlQXJyYXksIHR5cGUgVXNlRGF0YVNvdXJjZSwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNlbGVjdCwgVG9vbHRpcCwgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgdHlwZSBDcmVhdGVUb29sVHlwZSwgU3BhdGlhbEZpbHRlclR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgdHlwZSBTcGF0aWFsUmVsYXRpb24sIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgR2VvbWV0cnlGcm9tRGF0YVNvdXJjZSB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1kcydcclxuaW1wb3J0IHsgR2VvbWV0cnlGcm9tTWFwIH0gZnJvbSAnLi9nZW9tZXRyeS1mcm9tLW1hcCdcclxuaW1wb3J0IHsgR2VvbWV0cnlGcm9tRHJhdyB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1kcmF3J1xyXG5pbXBvcnQgeyBJbmZvT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tJdGVtUHJvcHMge1xyXG4gIHdpZGdldElkOiBzdHJpbmdcclxuICBsYWJlbDogc3RyaW5nXHJcbiAgZGVzYzogc3RyaW5nXHJcbiAgZHNFbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBkc0J1ZmZlckRpc3RhbmNlOiBudW1iZXJcclxuICBkc0J1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgZHJhd0VuYWJsZUJ1ZmZlcjogYm9vbGVhblxyXG4gIGRyYXdCdWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgZHJhd0J1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgc3BhdGlhbFJlbGF0aW9uczogSW1tdXRhYmxlQXJyYXk8U3BhdGlhbFJlbGF0aW9uPlxyXG4gIHVzZURhdGFTb3VyY2VzOiBJbW11dGFibGVBcnJheTxVc2VEYXRhU291cmNlPlxyXG4gIHVzZVJ1bnRpbWVEYXRhOiBib29sZWFuXHJcbiAgZmlsdGVyVHlwZXM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxGaWx0ZXJUeXBlPlxyXG4gIG1hcFdpZGdldElkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxyXG4gIGNyZWF0ZVRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XHJcbiAgb25GaWx0ZXJDaGFuZ2U6IChmaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmopID0+IHZvaWRcclxuICBvblJlbGF0aW9uQ2hhbmdlOiAocmVsOiBTcGF0aWFsUmVsYXRpb24pID0+IHZvaWRcclxuICBvbkJ1ZmZlckNoYW5nZTogKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tTcGF0aWFsRm9ybSAocHJvcHM6IFF1ZXJ5VGFza0l0ZW1Qcm9wcykge1xyXG4gIGNvbnN0IHtcclxuICAgIGxhYmVsLCBkZXNjLCBmaWx0ZXJUeXBlcywgbWFwV2lkZ2V0SWRzLCBvbkZpbHRlckNoYW5nZSwgb25SZWxhdGlvbkNoYW5nZSwgb25CdWZmZXJDaGFuZ2UsIHVzZURhdGFTb3VyY2VzLCBzcGF0aWFsUmVsYXRpb25zLCB1c2VSdW50aW1lRGF0YSxcclxuICAgIGRzRW5hYmxlQnVmZmVyLCBkc0J1ZmZlckRpc3RhbmNlLCBkc0J1ZmZlclVuaXQsIGRyYXdFbmFibGVCdWZmZXIsIGRyYXdCdWZmZXJEaXN0YW5jZSwgZHJhd0J1ZmZlclVuaXQsIGNyZWF0ZVRvb2xUeXBlcywgd2lkZ2V0SWRcclxuICB9ID0gcHJvcHNcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxyXG4gIC8vIHVzZWQgdG8gc3RvcmUgdGhlIHNlbGVjdGlvbiBvZiB0aGUgZGF0YSBzb3VyY2UgaW4gb3JkZXIgdG8gdXBkYXRlIHRoZSBmaWx0ZXIgd2hlbiBvcHRpb24gY2hhbmdlc1xyXG4gIGNvbnN0IHNlbGVjdGVkR2VvbWV0cmllc1JlZiA9IFJlYWN0LnVzZVJlZjxhbnk+KG51bGwpXHJcbiAgY29uc3QgbWFwRXhpc3RzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGlmIChtYXBXaWRnZXRJZHM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgbWFwV2lkZ2V0SWQgPSBtYXBXaWRnZXRJZHNbMF1cclxuICAgICAgcmV0dXJuIHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW21hcFdpZGdldElkXSAhPSBudWxsXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9KVxyXG4gIGNvbnN0IGNhblVzZU1hcEZpbHRlciA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgcmV0dXJuIG1hcEV4aXN0cyAmJiAoZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkN1cnJlbnRNYXBFeHRlbnQpIHx8IGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5JbnRlcmFjdGl2ZURyYXdNb2RlKSlcclxuICB9LCBbZmlsdGVyVHlwZXMsIG1hcEV4aXN0c10pXHJcbiAgY29uc3Qgc3VwcG9ydGVkRmlsdGVyVHlwZXMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IFtdXHJcbiAgICBpZiAodXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDAgfHwgdXNlUnVudGltZURhdGEpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ2RhdGEnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVGcm9tRHMnKSB9KVxyXG4gICAgfVxyXG4gICAgaWYgKGNhblVzZU1hcEZpbHRlciAmJiBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuQ3VycmVudE1hcEV4dGVudCkpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ21hcCcsIGxhYmVsOiBnZXRJMThuTWVzc2FnZShgc3BhdGlhbEZpbHRlclR5cGVfJHtTcGF0aWFsRmlsdGVyVHlwZS5DdXJyZW50TWFwRXh0ZW50fWApIH0pXHJcbiAgICB9XHJcbiAgICBpZiAoY2FuVXNlTWFwRmlsdGVyICYmIGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5JbnRlcmFjdGl2ZURyYXdNb2RlKSkge1xyXG4gICAgICByZXN1bHQucHVzaCh7IHZhbHVlOiAnZHJhdycsIGxhYmVsOiBnZXRJMThuTWVzc2FnZShgc3BhdGlhbEZpbHRlclR5cGVfJHtTcGF0aWFsRmlsdGVyVHlwZS5JbnRlcmFjdGl2ZURyYXdNb2RlfWApIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0XHJcbiAgfSwgW2NhblVzZU1hcEZpbHRlciwgdXNlRGF0YVNvdXJjZXMsIHVzZVJ1bnRpbWVEYXRhLCBnZXRJMThuTWVzc2FnZSwgZmlsdGVyVHlwZXNdKVxyXG5cclxuICBjb25zdCBbY3VycmVudEZpbHRlclR5cGUsIHNldEN1cnJlbnRGaWx0ZXJUeXBlXSA9IFJlYWN0LnVzZVN0YXRlKHN1cHBvcnRlZEZpbHRlclR5cGVzPy5bMF0/LnZhbHVlKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gaW4gb3JkZXIgdG8gYXZvaWQgaW52YWxpZCBvcHRpb24gYmVpbmcgc2VsZWN0ZWRcclxuICAgIGlmIChjdXJyZW50RmlsdGVyVHlwZSAhPT0gJ25vbmUnICYmICFzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5maW5kKChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSBjdXJyZW50RmlsdGVyVHlwZSkpIHtcclxuICAgICAgc2V0Q3VycmVudEZpbHRlclR5cGUoc3VwcG9ydGVkRmlsdGVyVHlwZXM/LlswXT8udmFsdWUpXHJcbiAgICB9XHJcbiAgfSwgW2N1cnJlbnRGaWx0ZXJUeXBlLCBzdXBwb3J0ZWRGaWx0ZXJUeXBlc10pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBjbGVhciB0aGUgcmVsYXRpb25zaGlwIGFuZCBidWZmZXIgaWYgZmlsdGVyIHR5cGUgaXMgbm90ICdkYXRhJ1xyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnbWFwJyB8fCBjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RyYXcnIHx8IGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnbm9uZScpIHtcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShudWxsKVxyXG4gICAgICBvbkJ1ZmZlckNoYW5nZSgwLCBVbml0VHlwZS5NZXRlcnMpXHJcbiAgICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IG51bGwgfSlcclxuICAgIH1cclxuICAgIC8vIG5vIG5lZWQgdG8gdXBkYXRlIHRoZSBmaWx0ZXIgaWYgdGhlIGRhdGEgc291cmNlIGhhcyBzZWxlY3Rpb24gc2luY2UgaXQgd2lsbCBiZSB1cGRhdGVkIGluIHRoZSBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UgbWV0aG9kXHJcbiAgICBpZiAoY3VycmVudEZpbHRlclR5cGUgPT09ICdkYXRhJyAmJiBzZWxlY3RlZEdlb21ldHJpZXNSZWYuY3VycmVudCA9PSBudWxsKSB7XHJcbiAgICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IG51bGwgfSlcclxuICAgIH1cclxuICB9LCBbY3VycmVudEZpbHRlclR5cGUsIG9uUmVsYXRpb25DaGFuZ2UsIG9uQnVmZmVyQ2hhbmdlLCBvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUZpbHRlclR5cGVDaGFuZ2VkID0gUmVhY3QudXNlQ2FsbGJhY2soKGV2dCkgPT4geyBzZXRDdXJyZW50RmlsdGVyVHlwZShldnQudGFyZ2V0LnZhbHVlKSB9LCBbXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlR2VvbWV0cnlDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZ2VvbWV0cnk6IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB7XHJcbiAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5LCBncmFwaGljLCBsYXllciwgY2xlYXJBZnRlckFwcGx5IH0pXHJcbiAgfSwgW29uRmlsdGVyQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGdlb21ldHJpZXMpID0+IHtcclxuICAgIHNlbGVjdGVkR2VvbWV0cmllc1JlZi5jdXJyZW50ID0gZ2VvbWV0cmllc1xyXG4gICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeTogZ2VvbWV0cmllcyB9KVxyXG4gIH0sIFtvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGlmICghKHVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwIHx8IHVzZVJ1bnRpbWVEYXRhIHx8IGNhblVzZU1hcEZpbHRlcikpIHtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiByb2xlPSdncm91cCcgY2xhc3NOYW1lPSdweC00IHBiLTQnIGFyaWEtbGFiZWw9e2xhYmVsfT5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2Zvcm0tdGl0bGUgbXktMiBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJywgeyAnZC1ub25lJzogIWxhYmVsICYmICFkZXNjIH0pfT5cclxuICAgICAgICB7bGFiZWwgJiYgPGRpdiBjbGFzc05hbWU9J21yLTIgdGl0bGUyJz57bGFiZWx9PC9kaXY+fVxyXG4gICAgICAgIHtkZXNjICYmIChcclxuICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gdGl0bGU9e2Rlc2N9PlxyXG4gICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyBpY29uIHR5cGU9J3RlcnRpYXJ5Jz5cclxuICAgICAgICAgICAgICA8SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPlxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIDwvVG9vbHRpcD5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAge3N1cHBvcnRlZEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGl0bGUzJz57Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlclR5cGUnKX08L2Rpdj5cclxuICAgICAgICAgIDxTZWxlY3RcclxuICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlclR5cGUnKX1cclxuICAgICAgICAgICAgY3NzPXtjc3NgaGVpZ2h0OiAzMnB4O2B9XHJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50RmlsdGVyVHlwZX1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUZpbHRlclR5cGVDaGFuZ2VkfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8b3B0aW9uIGtleT0nLScgdmFsdWU9J25vbmUnPi08L29wdGlvbj5cclxuICAgICAgICAgICAge3N1cHBvcnRlZEZpbHRlclR5cGVzLm1hcChpdGVtID0+IDxvcHRpb24ga2V5PXtpdGVtLnZhbHVlfSB2YWx1ZT17aXRlbS52YWx1ZX0+e2l0ZW0ubGFiZWx9PC9vcHRpb24+KX1cclxuICAgICAgICAgIDwvU2VsZWN0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICB7Y3VycmVudEZpbHRlclR5cGUgPT09ICdkYXRhJyAmJiAoXHJcbiAgICAgICAgPEdlb21ldHJ5RnJvbURhdGFTb3VyY2VcclxuICAgICAgICAgIGVuYWJsZUJ1ZmZlcj17ZHNFbmFibGVCdWZmZXJ9XHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZT17ZHNCdWZmZXJEaXN0YW5jZX1cclxuICAgICAgICAgIGJ1ZmZlclVuaXQ9e2RzQnVmZmVyVW5pdH1cclxuICAgICAgICAgIHNwYXRpYWxSZWxhdGlvbnM9e3NwYXRpYWxSZWxhdGlvbnN9XHJcbiAgICAgICAgICB1c2VEYXRhU291cmNlcz17dXNlRGF0YVNvdXJjZXN9XHJcbiAgICAgICAgICB1c2VSdW50aW1lRGF0YT17dXNlUnVudGltZURhdGF9XHJcbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17aGFuZGxlU2VsZWN0aW9uQ2hhbmdlfVxyXG4gICAgICAgICAgb25SZWxhdGlvbkNoYW5nZT17b25SZWxhdGlvbkNoYW5nZX1cclxuICAgICAgICAgIG9uQnVmZmVyQ2hhbmdlPXtvbkJ1ZmZlckNoYW5nZX1cclxuICAgICAgICAvPlxyXG4gICAgICApfVxyXG4gICAgICB7Y3VycmVudEZpbHRlclR5cGUgPT09ICdtYXAnICYmIChcclxuICAgICAgICA8R2VvbWV0cnlGcm9tTWFwXHJcbiAgICAgICAgICBtYXBXaWRnZXRJZHM9e21hcFdpZGdldElkc31cclxuICAgICAgICAgIGNyZWF0ZVRvb2xUeXBlcz17Y3JlYXRlVG9vbFR5cGVzfVxyXG4gICAgICAgICAgb25HZW9tZXRyeUNoYW5nZT17aGFuZGxlR2VvbWV0cnlDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnZHJhdycgJiYgKFxyXG4gICAgICAgIDxHZW9tZXRyeUZyb21EcmF3XHJcbiAgICAgICAgICBlbmFibGVCdWZmZXI9e2RyYXdFbmFibGVCdWZmZXJ9XHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZT17ZHJhd0J1ZmZlckRpc3RhbmNlfVxyXG4gICAgICAgICAgYnVmZmVyVW5pdD17ZHJhd0J1ZmZlclVuaXR9XHJcbiAgICAgICAgICBtYXBXaWRnZXRJZHM9e21hcFdpZGdldElkc31cclxuICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cclxuICAgICAgICAgIGNyZWF0ZVRvb2xUeXBlcz17Y3JlYXRlVG9vbFR5cGVzfVxyXG4gICAgICAgICAgb25HZW9tZXRyeUNoYW5nZT17aGFuZGxlR2VvbWV0cnlDaGFuZ2V9XHJcbiAgICAgICAgICBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXG4gIHR5cGUgSU1TcWxFeHByZXNzaW9uLFxuICBEYXRhU291cmNlQ29tcG9uZW50LFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgVXNlRGF0YVNvdXJjZSxcbiAgSW1tdXRhYmxlLFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIGNsYXNzTmFtZXMsXG4gIENPTlNUQU5UUyxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICB0eXBlIERhdGFSZWNvcmRTZXQsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIERhdGFTb3VyY2VTdGF0dXMsXG4gIERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlLFxuICBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UsXG4gIFJlY29yZFNldENoYW5nZVR5cGUsXG4gIE1lc3NhZ2VNYW5hZ2VyLFxuICBNdXRhYmxlU3RvcmVNYW5hZ2VyLFxuICBEYXRhQWN0aW9uTWFuYWdlcixcbiAgRGF0YUxldmVsLFxuICB0eXBlIFF1ZXJpYWJsZURhdGFTb3VyY2UsXG4gIHR5cGUgRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMsXG4gIGhvb2tzLFxuICBsb2Rhc2gsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZSxcbiAgUmVhY3RSZWR1eCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgVG9vbHRpcCwgRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTUywgVGFicywgVGFiLCBTZWxlY3QgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgVHJhc2hPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3RyYXNoJ1xuaW1wb3J0IHsgUGFnaW5nVHlwZSwgdHlwZSBRdWVyeUl0ZW1UeXBlLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmogfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVRhc2tGb3JtIH0gZnJvbSAnLi9xdWVyeS10YXNrLWZvcm0nXG5pbXBvcnQgeyBRdWVyeVRhc2tSZXN1bHQgfSBmcm9tICcuL3F1ZXJ5LXJlc3VsdCdcbmltcG9ydCB7IERhdGFTb3VyY2VUaXAsIHVzZURhdGFTb3VyY2VFeGlzdHMsIEVycm9yTWVzc2FnZSB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGFiZWwgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGFiZWwnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBnZW5lcmF0ZVF1ZXJ5UGFyYW1zLCBleGVjdXRlUXVlcnksIGV4ZWN1dGVDb3VudFF1ZXJ5IH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IE1lbnVPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL21lbnUnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IEFycm93TGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0J1xuaW1wb3J0IHsgTG9hZGluZ1Jlc3VsdCB9IGZyb20gJy4vbG9hZGluZy1yZXN1bHQnXG5pbXBvcnQgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMsIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoLCBmaW5kQ2xlYXJSZXN1bHRzQnV0dG9uIH0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyBkZWJ1Z0xvZ2dlciB9IGZyb20gJy4vZGVidWctbG9nZ2VyJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza1Byb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBpbmRleDogbnVtYmVyXG4gIHRvdGFsOiBudW1iZXJcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgZGVmYXVsdFBhZ2VTaXplPzogbnVtYmVyXG4gIHdyYXBwZWRJblBvcHBlcj86IGJvb2xlYW5cbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIGlzSW5Qb3BwZXI/OiBib29sZWFuXG4gIG9uTmF2QmFjaz86ICgpID0+IHZvaWRcbiAgaW5pdGlhbElucHV0VmFsdWU/OiBzdHJpbmdcbiAgb25IYXNoUGFyYW1ldGVyVXNlZD86IChzaG9ydElkOiBzdHJpbmcpID0+IHZvaWRcbiAgcXVlcnlJdGVtU2hvcnRJZD86IHN0cmluZ1xuICAvLyBQcm9wcyBmb3IgU2VhcmNoIExheWVyIGRyb3Bkb3duICh3aGVuIG11bHRpcGxlIHF1ZXJpZXMpXG4gIHF1ZXJ5SXRlbXM/OiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBzZWxlY3RlZFF1ZXJ5SW5kZXg/OiBudW1iZXJcbiAgb25RdWVyeUNoYW5nZT86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gIC8vIEdyb3VwaW5nIHByb3BzXG4gIGdyb3Vwcz86IHsgW2dyb3VwSWQ6IHN0cmluZ106IHsgaXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+LCBkaXNwbGF5TmFtZTogc3RyaW5nLCBpY29uPzogYW55IH0gfVxuICB1bmdyb3VwZWQ/OiBBcnJheTx7IGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiwgaW5kZXg6IG51bWJlciB9PlxuICBncm91cE9yZGVyPzogc3RyaW5nW11cbiAgc2VsZWN0ZWRHcm91cElkPzogc3RyaW5nIHwgbnVsbFxuICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleD86IG51bWJlclxuICBvbkdyb3VwQ2hhbmdlPzogKGdyb3VwSWQ6IHN0cmluZyB8IG51bGwpID0+IHZvaWRcbiAgb25Hcm91cFF1ZXJ5Q2hhbmdlPzogKGluZGV4OiBudW1iZXIpID0+IHZvaWRcbiAgb25Vbmdyb3VwZWRDaGFuZ2U/OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGRpc3BsYXkgbmFtZSBmb3IgcXVlcnkgaW4gZHJvcGRvd25cbi8vIFVzZXM6IHNlYXJjaEFsaWFzIHx8IGppbXVGaWVsZE5hbWUgfHwgaXRlbS5uYW1lIHx8IGZhbGxiYWNrXG5jb25zdCBnZXRRdWVyeURpc3BsYXlOYW1lID0gKGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPik6IHN0cmluZyA9PiB7XG4gIC8vIEZpcnN0IHByaW9yaXR5OiBzZWFyY2hBbGlhcyBpZiBzZXRcbiAgaWYgKGl0ZW0uc2VhcmNoQWxpYXMpIHtcbiAgICByZXR1cm4gaXRlbS5zZWFyY2hBbGlhc1xuICB9XG4gIFxuICAvLyBTZWNvbmQgcHJpb3JpdHk6IGZpZWxkIG5hbWUgZnJvbSBTUUwgZXhwcmVzc2lvblxuICBjb25zdCBqaW11RmllbGROYW1lID0gaXRlbS5zcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy5qaW11RmllbGROYW1lXG4gIGlmIChqaW11RmllbGROYW1lKSB7XG4gICAgcmV0dXJuIGppbXVGaWVsZE5hbWVcbiAgfVxuICBcbiAgLy8gVGhpcmQgcHJpb3JpdHk6IGl0ZW0gbmFtZVxuICBpZiAoaXRlbS5uYW1lKSB7XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG4gIFxuICAvLyBGYWxsYmFja1xuICByZXR1cm4gJ1F1ZXJ5J1xufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgJi53cmFwcGVkIC5xdWVyeS1mb3JtIHtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gIH1cbiAgLnF1ZXJ5LXRhc2tfX2NvbnRlbnQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nLXRvcDogOHB4O1xuICAgICY6aGFzKD4gLnF1ZXJ5LWZvcm1fX2hlYWRlciA+IGRpdjpub3QoLmQtbm9uZSkpLCAmOmhhcyg+IC5xdWVyeS1yZXN1bHQpIHtcbiAgICAgIHBhZGRpbmctdG9wOiAxNnB4O1xuICAgIH1cbiAgfVxuICAucXVlcnktZm9ybV9faGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgICYuaGFzLWNvbnRlbnQge1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICAgIH1cbiAgICAubmF2LWFjdGlvbiB7XG4gICAgICBmbGV4OiAxIDEgMDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgLmppbXUtYnRuIHtcbiAgICAgICAgbWluLXdpZHRoOiAyNnB4O1xuICAgICAgfVxuICAgIH1cbiAgICAucmVzdWx0LW1lbnUge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICB9XG4gIH1cbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFzayAocHJvcHM6IFF1ZXJ5VGFza1Byb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtLCBvbk5hdkJhY2ssIHRvdGFsLCBpc0luUG9wcGVyID0gZmFsc2UsIGRlZmF1bHRQYWdlU2l6ZSA9IENPTlNUQU5UUy5ERUZBVUxUX1FVRVJZX1BBR0VfU0laRSwgd3JhcHBlZEluUG9wcGVyID0gZmFsc2UsIGNsYXNzTmFtZSA9ICcnLCBpbmRleCwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbXMsIHNlbGVjdGVkUXVlcnlJbmRleCwgb25RdWVyeUNoYW5nZSwgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIsIHNlbGVjdGVkR3JvdXBJZCwgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIG9uR3JvdXBDaGFuZ2UsIG9uR3JvdXBRdWVyeUNoYW5nZSwgb25Vbmdyb3VwZWRDaGFuZ2UsIC4uLm90aGVyUHJvcHMgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IFtzdGFnZSwgc2V0U3RhZ2VdID0gUmVhY3QudXNlU3RhdGUoMCkgLy8gMCA9IGZvcm0sIDEgPSByZXN1bHRzLCAyID0gbG9hZGluZ1xuICBjb25zdCBbYWN0aXZlVGFiLCBzZXRBY3RpdmVUYWJdID0gUmVhY3QudXNlU3RhdGU8J3F1ZXJ5JyB8ICdyZXN1bHRzJz4oJ3F1ZXJ5JylcbiAgY29uc3QgW2VuYWJsZWQsIHNldEVuYWJsZWRdID0gUmVhY3QudXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgW3Jlc3VsdENvdW50LCBzZXRSZXN1bHRDb3VudF0gPSBSZWFjdC51c2VTdGF0ZSgwKVxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IHNlbGVjdGVkIHJlY29yZHMgZm9yIHRoZSBjdXJyZW50IHF1ZXJ5IHJlc3VsdHNcbiAgY29uc3QgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBUcmFjayBxdWVyeSBleGVjdXRpb24gY291bnQgdG8gZm9yY2UgUXVlcnlUYXNrUmVzdWx0IHJlbW91bnQgb24gbmV3IHF1ZXJpZXNcbiAgY29uc3QgcXVlcnlFeGVjdXRpb25LZXlSZWYgPSBSZWFjdC51c2VSZWYoMClcbiAgY29uc3QgcXVlcnlQYXJhbVJlZiA9IFJlYWN0LnVzZVJlZjxRdWVyeVBhcmFtcz4obnVsbClcbiAgY29uc3QgcmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxEYXRhUmVjb3JkW10+KG51bGwpXG4gIGNvbnN0IFtvdXRwdXREUywgc2V0T3V0cHV0RFNdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3QgW3NwYXRpYWxGaWx0ZXJFbmFibGVkLCBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZF0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqID0gUmVhY3QudXNlUmVmPElNU3FsRXhwcmVzc2lvbj4ocXVlcnlJdGVtLnNxbEV4cHJPYmopXG4gIGNvbnN0IHNwYXRpYWxGaWx0ZXJPYmogPSBSZWFjdC51c2VSZWYobnVsbClcbiAgY29uc3QgYmFja0J0blJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBjbGVhclJlc3VsdEJ0blJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBbZGF0YUFjdGlvbkZpbHRlciwgc2V0RGF0YUFjdGlvbkZpbHRlcl0gPSBSZWFjdC51c2VTdGF0ZShudWxsKVxuICBjb25zdCBwcmV2aW91c0NvbmZpZ0lkUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZz4ocXVlcnlJdGVtLmNvbmZpZ0lkKVxuICAvLyBUcmFjayBtYW51YWwgdGFiIHN3aXRjaGVzIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgY29uc3QgbWFudWFsVGFiU3dpdGNoUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBTdG9yZSB0aGUgbGFzdCBydW50aW1lIHpvb20gb3ZlcnJpZGUgdmFsdWUgZnJvbSB0aGUgZm9ybSBmb3IgdXNlIGJ5IEFkZCB0byBNYXAgYWN0aW9uXG4gIGNvbnN0IGxhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbiB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKVxuICAvLyBFcnJvciBzdGF0ZXMgZm9yIHVzZXItZmFjaW5nIGVycm9yc1xuICBjb25zdCBbc2VsZWN0aW9uRXJyb3IsIHNldFNlbGVjdGlvbkVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcbiAgY29uc3QgW3pvb21FcnJvciwgc2V0Wm9vbUVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4obnVsbClcblxuICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICBjb25zdCB7IGljb24sIG5hbWUsIGRpc3BsYXlMYWJlbCB9ID0gY3VycmVudEl0ZW1cbiAgY29uc3QgZHNFeGlzdHM6IGJvb2xlYW4gPSB1c2VEYXRhU291cmNlRXhpc3RzKHsgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLCB1c2VEYXRhU291cmNlSWQ6IGN1cnJlbnRJdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCB9KVxuXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIHRhYiBjb250ZW50IHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnktdGFiLWNvbnRlbnQtcmVuZGVyJyxcbiAgICAgIGFjdGl2ZVRhYixcbiAgICAgIGVuYWJsZWQsXG4gICAgICBkc0V4aXN0cyxcbiAgICAgIGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICBub3RlOiAnUXVlcnkgdGFiIGNvbnRlbnQgc3RhdGUgY2hlY2snXG4gICAgfSlcbiAgfSwgW2FjdGl2ZVRhYiwgZW5hYmxlZCwgZHNFeGlzdHMsIGRhdGFTb3VyY2UsIHF1ZXJ5SXRlbS5jb25maWdJZF0pXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgVGFiIGNoaWxkcmVuIHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhY3RpdmVUYWIgPT09ICdxdWVyeScpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeS10YWItY2hpbGRyZW4tcmVuZGVyJyxcbiAgICAgICAgYWN0aXZlVGFiLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBub3RlOiAnUXVlcnkgVGFiIGNoaWxkcmVuIHNob3VsZCBiZSByZW5kZXJpbmcnXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW2FjdGl2ZVRhYiwgcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICAvLyBmb2N1cyB0aGUgYmFjayBidXR0b24gd2hlbiBpdCBpcyByZW5kZXJlZFxuICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgfSlcblxuICAvLyBHZXQgdGhlIHBhZ2luYXRpb24gc3R5bGUgZnJvbSB3aWRnZXQgY29uZmlnIChNdWx0aVBhZ2Ugb3IgTGF6eUxvYWQvU2luZ2xlLXBhZ2UpXG4gIGNvbnN0IHBhZ2luZ1R5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3Byb3BzLndpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRQYWdpbmdTdHlsZVxuICB9KVxuXG4gIC8vIEdldCB0aGUgaW5pdGlhbCBwYWdlIHNpemUgZm9yIHNpbmdsZS1wYWdlIChMYXp5TG9hZCkgcmVzdWx0c1xuICAvLyBUaGlzIGFsbG93cyB1c2VycyB0byBjb25maWd1cmUgaG93IG1hbnkgcmVjb3JkcyBhcmUgbG9hZGVkIGluaXRpYWxseSB3aGVuIHVzaW5nIHNpbmdsZS1wYWdlIG1vZGVcbiAgLy8gRGVmYXVsdHMgdG8gMTAwIGlmIG5vdCBjb25maWd1cmVkXG4gIGNvbnN0IGxhenlMb2FkSW5pdGlhbFBhZ2VTaXplID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbcHJvcHMud2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLmxhenlMb2FkSW5pdGlhbFBhZ2VTaXplXG4gIH0pXG5cblxuICAvLyBXYXRjaCBmb3Igd2hlbiByZXN1bHRzIGFyZSByZWFkeSBhbmQgc3dpdGNoIHRvIFJlc3VsdHMgdGFiXG4gIC8vIFRoaXMgZW5zdXJlcyB3ZSB3YWl0IGZvciBSZWFjdCB0byByZW5kZXIgcmVzdWx0cywgbm90IGp1c3QgZm9yIHRoZSBxdWVyeSB0byBjb21wbGV0ZVxuICAvLyBUaGlzIGFwcHJvYWNoIG1hdGNoZXMgdGhlIGJlaGF2aW9yIG9mIG1hbnVhbCBpbnB1dCB3aGVyZSByZXN1bHRzIGFyZSByZW5kZXJlZCBiZWZvcmUgdGFiIHN3aXRjaFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIERvbid0IGF1dG8tc3dpdGNoIGlmIHVzZXIgbWFudWFsbHkgc3dpdGNoZWQgdGFic1xuICAgIGlmIChtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIE9ubHkgc3dpdGNoIHRhYnMgaWY6XG4gICAgLy8gMS4gV2UgaGF2ZSByZXN1bHRzIChyZXN1bHRDb3VudCA+IDApXG4gICAgLy8gMi4gUmVjb3JkcyBhcmUgYWN0dWFsbHkgbG9hZGVkIChyZWNvcmRzUmVmLmN1cnJlbnQgaGFzIGRhdGEpXG4gICAgLy8gMy4gV2UncmUgaW4gcmVzdWx0cyBzdGFnZSAoc3RhZ2UgPT09IDEpXG4gICAgLy8gNC4gV2UncmUgY3VycmVudGx5IG9uIHRoZSBxdWVyeSB0YWIgKGRvbid0IHN3aXRjaCBpZiBhbHJlYWR5IG9uIHJlc3VsdHMpXG4gICAgaWYgKHJlc3VsdENvdW50ID4gMCAmJiByZWNvcmRzUmVmLmN1cnJlbnQgJiYgcmVjb3Jkc1JlZi5jdXJyZW50Lmxlbmd0aCA+IDAgJiYgc3RhZ2UgPT09IDEgJiYgYWN0aXZlVGFiID09PSAncXVlcnknKSB7XG4gICAgICBzZXRBY3RpdmVUYWIoJ3Jlc3VsdHMnKVxuICAgIH1cbiAgfSwgW3Jlc3VsdENvdW50LCBzdGFnZSwgYWN0aXZlVGFiXSlcblxuICAvLyBWZXJpZnkgZHJvcGRvd25zIGFyZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlciB3aGVuIHByZXNlbnRcbiAgLy8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgZ3JvdXBlZCBxdWVyaWVzIHdoZXJlIGRyb3Bkb3ducyBuZWVkIHRvIGJlIHN5bmNocm9uaXplZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgdmVyaWZ5IGlmIHdlIGhhdmUgYSBoYXNoIHBhcmFtZXRlclxuICAgIGlmICghaW5pdGlhbElucHV0VmFsdWUgfHwgIXF1ZXJ5SXRlbS5zaG9ydElkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRoZSBjdXJyZW50IHF1ZXJ5SXRlbSBtYXRjaGVzIHdoYXQgd2UgZXhwZWN0IGZyb20gaGFzaCBwYXJhbWV0ZXJcbiAgICBjb25zdCBleHBlY3RlZFNob3J0SWQgPSBxdWVyeUl0ZW0uc2hvcnRJZFxuICAgIGNvbnN0IGlzR3JvdXBlZFF1ZXJ5ID0gcXVlcnlJdGVtLmdyb3VwSWQgIT09IG51bGwgJiYgcXVlcnlJdGVtLmdyb3VwSWQgIT09IHVuZGVmaW5lZFxuICAgIFxuICAgIC8vIENoZWNrIGlmIGRyb3Bkb3ducyBhcmUgY29ycmVjdGx5IHNldCBmb3IgZ3JvdXBlZCBxdWVyaWVzXG4gICAgaWYgKGlzR3JvdXBlZFF1ZXJ5KSB7XG4gICAgICBjb25zdCBleHBlY3RlZEdyb3VwSWQgPSBxdWVyeUl0ZW0uZ3JvdXBJZFxuICAgICAgY29uc3QgYWN0dWFsR3JvdXBJZCA9IHNlbGVjdGVkR3JvdXBJZFxuICAgICAgY29uc3QgZXhwZWN0ZWRRdWVyeUluZGV4ID0gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXhcbiAgICAgIFxuICAgICAgaWYgKGV4cGVjdGVkR3JvdXBJZCAhPT0gYWN0dWFsR3JvdXBJZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnZHJvcGRvd24tZ3JvdXAtbWlzbWF0Y2gnLFxuICAgICAgICAgIGV4cGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICBhY3R1YWxHcm91cElkLFxuICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICB3YXJuaW5nOiAnRmlyc3QgZHJvcGRvd24gbWF5IG5vdCBiZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoZXhwZWN0ZWRRdWVyeUluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gVmVyaWZ5IHRoZSBxdWVyeSBpbmRleCB3aXRoaW4gdGhlIGdyb3VwIG1hdGNoZXNcbiAgICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IGdyb3Vwcz8uW2V4cGVjdGVkR3JvdXBJZF0/Lml0ZW1zXG4gICAgICAgIGlmIChncm91cEl0ZW1zICYmIGdyb3VwSXRlbXMubGVuZ3RoID4gZXhwZWN0ZWRRdWVyeUluZGV4KSB7XG4gICAgICAgICAgY29uc3QgZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkID0gZ3JvdXBJdGVtc1tleHBlY3RlZFF1ZXJ5SW5kZXhdPy5jb25maWdJZFxuICAgICAgICAgIGNvbnN0IGFjdHVhbFF1ZXJ5Q29uZmlnSWQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICBpZiAoZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkICE9PSBhY3R1YWxRdWVyeUNvbmZpZ0lkKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICBldmVudDogJ2Ryb3Bkb3duLXF1ZXJ5LWluZGV4LW1pc21hdGNoJyxcbiAgICAgICAgICAgICAgZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkLFxuICAgICAgICAgICAgICBhY3R1YWxRdWVyeUNvbmZpZ0lkLFxuICAgICAgICAgICAgICBleHBlY3RlZFF1ZXJ5SW5kZXgsXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICAgICAgd2FybmluZzogJ1NlY29uZCBkcm9wZG93biBtYXkgbm90IGJlIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdkcm9wZG93bnMtc3luY2hyb25pemVkJyxcbiAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICAgICAgICBncm91cElkOiBleHBlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4OiBleHBlY3RlZFF1ZXJ5SW5kZXgsXG4gICAgICAgICAgICAgIG5vdGU6ICdEcm9wZG93bnMgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVbmdyb3VwZWQgcXVlcnkgLSB2ZXJpZnkgaXQncyBzZWxlY3RlZFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdkcm9wZG93bnMtc3luY2hyb25pemVkLXVuZ3JvdXBlZCcsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgbm90ZTogJ1VuZ3JvdXBlZCBxdWVyeSBkcm9wZG93biBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbaW5pdGlhbElucHV0VmFsdWUsIHF1ZXJ5SXRlbS5zaG9ydElkLCBxdWVyeUl0ZW0uZ3JvdXBJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBzZWxlY3RlZEdyb3VwSWQsIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LCBncm91cHNdKVxuXG4gIGNvbnN0IHVzZU91dHB1dERzOiBJbW11dGFibGVPYmplY3Q8VXNlRGF0YVNvdXJjZT4gPSBSZWFjdC51c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBJbW11dGFibGUoe1xuICAgICAgICBkYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWQsXG4gICAgICAgIG1haW5EYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRcbiAgICAgIH0pLFxuICAgIFtxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXVxuICApXG5cbiAgY29uc3QgdXBkYXRlRGF0YVNvdXJjZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChkcz86IERhdGFTb3VyY2UpID0+IHtcbiAgICBjb25zdCBjdXJyZW50RHMgPSBkcyA/PyBkYXRhU291cmNlXG4gICAgLy8gc2hvdWxkIGRpc2FibGUgc3BhdGlhbCBmaWx0ZXIgaWYgdGhlIGRhdGFTb3VyY2UgaXMgYW4gb3V0cHV0IGRzIGFuZCBpdCBhbHJlYWR5IGhhcyBzcGF0aWFsIGZpbHRlclxuICAgIGlmIChjdXJyZW50RHM/LmdldERhdGFTb3VyY2VKc29uKCk/LmlzT3V0cHV0RnJvbVdpZGdldCkge1xuICAgICAgY29uc3QgcURzOiBRdWVyaWFibGVEYXRhU291cmNlID0gY3VycmVudERzIGFzIFF1ZXJpYWJsZURhdGFTb3VyY2VcbiAgICAgIGNvbnN0IHFQYXJhbXMgPSBxRHMuZ2V0Q3VycmVudFF1ZXJ5UGFyYW1zPy4oKSBhcyBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtc1xuICAgICAgaWYgKHFQYXJhbXMuZ2VvbWV0cnkgIT0gbnVsbCkge1xuICAgICAgICBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZChmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFNwYXRpYWxGaWx0ZXJFbmFibGVkKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9LCBbZGF0YVNvdXJjZV0pXG5cbiAgY29uc3QgaGFuZGxlU3RhdHVzQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGVuYWJsZWQ6IGJvb2xlYW4pID0+IHtcbiAgICBzZXRFbmFibGVkKGVuYWJsZWQpXG4gICAgdXBkYXRlRGF0YVNvdXJjZSgpXG4gIH0sIFt1cGRhdGVEYXRhU291cmNlXSlcblxuICBjb25zdCBoYW5kbGVPdXRwdXREYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmZvLCBwcmVJbmZvKSA9PiB7XG4gICAgY29uc3Qgb3V0cHV0SWQgPSBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgY29uc3QgZmlsdGVyID0gaW5mbz8ud2lkZ2V0UXVlcmllcyA/IGluZm8ud2lkZ2V0UXVlcmllc1tgc2V0RmlsdGVyLSR7b3V0cHV0SWR9YF0gOiBudWxsXG4gICAgaWYgKGZpbHRlciA9PSBudWxsKSB7IC8vIGZpbHRlciBpcyBudWxsIG1lYW5zIHRoZXJlIGFyZSBpbmNvbXBsZXRlIHF1ZXJpZXMsIGlnbm9yZSB0aGlzIGNoYW5nZVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHByZUZpbHRlciA9IHByZUluZm8/LndpZGdldFF1ZXJpZXMgPyBwcmVJbmZvLndpZGdldFF1ZXJpZXNbYHNldEZpbHRlci0ke291dHB1dElkfWBdIDogbnVsbFxuICAgIGlmIChmaWx0ZXI/LndoZXJlICE9PSBwcmVGaWx0ZXI/LndoZXJlKSB7XG4gICAgICBzZXREYXRhQWN0aW9uRmlsdGVyKGZpbHRlcilcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXSlcblxuICBjb25zdCBwdWJsaXNoRGF0YUNsZWFyZWRNc2cgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG4gICAgY29uc3QgZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UgPSBuZXcgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UocHJvcHMud2lkZ2V0SWQsIFJlY29yZFNldENoYW5nZVR5cGUuUmVtb3ZlLCBbb3V0cHV0RFMuaWRdKVxuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UpXG4gICAgYXdhaXQgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHByb3BzLndpZGdldElkLCBbXSwgW291dHB1dERTLmlkXSkpXG4gIH0sIFtwcm9wcy53aWRnZXRJZCwgb3V0cHV0RFNdKVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIHF1ZXJ5IHJlc3VsdHMgZnJvbSB0aGUgVUkgYW5kIG1hcC5cbiAgICogVGhpcyBpcyB0aGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCBmb3IgY2xlYXJpbmcgcmVzdWx0cy5cbiAgICogSXQgY2xlYXJzIHRoZSByZWNvcmRzLCByZXNldHMgdGhlIHJlc3VsdCBjb3VudCwgY2xlYXJzIHNlbGVjdGlvbiBmcm9tIHRoZSBtYXAsXG4gICAqIHB1Ymxpc2hlcyBhIGNsZWFyZWQgbWVzc2FnZSB0byB0aGUgbWFwLCBzd2l0Y2hlcyBiYWNrIHRvIHRoZSBRdWVyeSB0YWIsXG4gICAqIGFuZCBpbmNyZW1lbnRzIHRoZSBxdWVyeSBleGVjdXRpb24ga2V5IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCB0byByZW1vdW50IHdpdGggZnJlc2ggc3RhdGUuXG4gICAqL1xuICBjb25zdCBjbGVhclJlc3VsdCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgb3V0cHV0RFM/LnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICAgIHNldFJlc3VsdENvdW50KDApXG4gICAgXG4gICAgLy8gQ2xlYXIgc2VsZWN0aW9uIGRpcmVjdGx5IGZyb20gZGF0YSBzb3VyY2UgdXNpbmcgdXRpbGl0eSBmdW5jdGlvblxuICAgIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhvdXRwdXREUylcbiAgICBcbiAgICBwdWJsaXNoRGF0YUNsZWFyZWRNc2coKVxuICAgIC8vIFN3aXRjaCBiYWNrIHRvIFF1ZXJ5IHRhYiB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICBzZXRTdGFnZSgwKVxuICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgc2VsZWN0aW9uIGZsYWcgd2hlbiBjbGVhcmluZ1xuICAgIC8vIEluY3JlbWVudCBxdWVyeSBleGVjdXRpb24ga2V5IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCByZW1vdW50IHdpdGggZnJlc2ggc3RhdGVcbiAgICBxdWVyeUV4ZWN1dGlvbktleVJlZi5jdXJyZW50ICs9IDFcbiAgICAvLyBDbGVhciBlcnJvciBzdGF0ZXMgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbClcbiAgICBzZXRab29tRXJyb3IobnVsbClcbiAgfSwgW291dHB1dERTLCBwdWJsaXNoRGF0YUNsZWFyZWRNc2csIHByb3BzLndpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGRhdGEgc291cmNlIGNyZWF0aW9uIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gcXVlcnkgaXRlbXMuXG4gICAqIFdoZW4gYSBuZXcgcXVlcnkgaXRlbSBpcyBzZWxlY3RlZCAoZS5nLiwgc3dpdGNoaW5nIGZyb20gUGFyY2VsIHRvIE1ham9yKSxcbiAgICogdGhpcyBjbGVhcnMgb2xkIHJlc3VsdHMgYnkgcHJvZ3JhbW1hdGljYWxseSBjbGlja2luZyB0aGUgdHJhc2ggY2FuIGJ1dHRvblxuICAgKiB0byBlbnN1cmUgYWxsIGNsZWFudXAgbG9naWMgcnVucyBwcm9wZXJseS5cbiAgICogXG4gICAqIEBwYXJhbSBkcyAtIFRoZSBuZXdseSBjcmVhdGVkIGRhdGEgc291cmNlIGZvciB0aGUgc2VsZWN0ZWQgcXVlcnkgaXRlbVxuICAgKi9cbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoZHM6IERhdGFTb3VyY2UpID0+IHtcbiAgICAvLyBDbGVhciBvbGQgcmVzdWx0cyBieSBwcm9ncmFtbWF0aWNhbGx5IGNsaWNraW5nIHRoZSB0cmFzaCBjYW4gYnV0dG9uIHdoZW4gc3dpdGNoaW5nIHF1ZXJ5IGl0ZW1zXG4gICAgLy8gVHJ5IHJlZiBmaXJzdCwgdGhlbiBmYWxsIGJhY2sgdG8gdXRpbGl0eSBmdW5jdGlvbiBpZiByZWYgaXNuJ3Qgc2V0IHlldFxuICAgIGxldCBjbGVhckJ1dHRvbiA9IGNsZWFyUmVzdWx0QnRuUmVmLmN1cnJlbnRcbiAgICBpZiAoIWNsZWFyQnV0dG9uKSB7XG4gICAgICAvLyBUcnkgdG8gZmluZCB0aGUgYnV0dG9uIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICAgIGNsZWFyQnV0dG9uID0gZmluZENsZWFyUmVzdWx0c0J1dHRvbigpXG4gICAgfVxuICAgIFxuICAgIC8vIENsaWNrIHRoZSBidXR0b24gaWYgaXQgZXhpc3RzIGFuZCB0aGVyZSBhcmUgcmVzdWx0cyB0byBjbGVhclxuICAgIC8vIE90aGVyd2lzZSwgY2FsbCBjbGVhclJlc3VsdCgpIGRpcmVjdGx5XG4gICAgaWYgKGNsZWFyQnV0dG9uICYmIHJlc3VsdENvdW50ID4gMCkge1xuICAgICAgY2xlYXJCdXR0b24uY2xpY2soKVxuICAgIH0gZWxzZSB7XG4gICAgICBjbGVhclJlc3VsdCgpXG4gICAgfVxuICAgIHNldERhdGFTb3VyY2UoZHMpXG4gICAgdXBkYXRlRGF0YVNvdXJjZShkcylcbiAgICBzZXRTdGFnZSgwKVxuICAgIHNldEFjdGl2ZVRhYigncXVlcnknKSAvLyBSZXR1cm4gdG8gUXVlcnkgdGFiIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgfSwgW3VwZGF0ZURhdGFTb3VyY2UsIGNsZWFyUmVzdWx0LCByZXN1bHRDb3VudF0pXG5cbiAgY29uc3QgaGFuZGxlT3V0cHV0RGF0YVNvdXJjZUNyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoZHM6IERhdGFTb3VyY2UpID0+IHtcbiAgICBzZXRPdXRwdXREUyhkcylcbiAgfSwgW10pXG5cbiAgLy8gQ2xlYXIgcmVzdWx0cyB3aGVuIHF1ZXJ5IGl0ZW0gY2hhbmdlcyAoZS5nLiwgd2hlbiBuZXcgaGFzaCBwYXJhbWV0ZXIgdHJpZ2dlcnMgZGlmZmVyZW50IHF1ZXJ5KVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgY2xlYXIgaWYgd2UncmUgYWN0dWFsbHkgc3dpdGNoaW5nIHRvIGEgZGlmZmVyZW50IHF1ZXJ5IChub3QganVzdCByZS1yZW5kZXJpbmcpXG4gICAgY29uc3QgaXNTd2l0Y2hpbmdRdWVyaWVzID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ICE9PSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICBcbiAgICBpZiAoaXNTd2l0Y2hpbmdRdWVyaWVzICYmIHJlc3VsdENvdW50ID4gMCkge1xuICAgICAgLy8gU3RvcmUgdGhlIG9sZCBjb25maWdJZCBiZWZvcmUgdXBkYXRpbmdcbiAgICAgIGNvbnN0IG9sZENvbmZpZ0lkID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50XG4gICAgICAvLyBVcGRhdGUgdGhlIHJlZiB0byB0cmFjayB0aGUgbmV3IHF1ZXJ5XG4gICAgICBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgaW1tZWRpYXRlbHkgd2hlbiBzd2l0Y2hpbmcgcXVlcmllcywgYnV0IHdyYXAgaW4gdHJ5LWNhdGNoIHRvIGhhbmRsZVxuICAgICAgLy8gcmFjZSBjb25kaXRpb25zIHdpdGggZmVhdHVyZSBpbmZvIHdpbmRvd3MgdGhhdCBtaWdodCBiZSByZW5kZXJpbmdcbiAgICAgIHRyeSB7XG4gICAgICAgIGNsZWFyUmVzdWx0KClcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIExvZyBmb3IgZGVidWdnaW5nIGJ1dCBkb24ndCBzaG93IHRvIHVzZXIgKGZyYW1ld29yayByYWNlIGNvbmRpdGlvbilcbiAgICAgICAgLy8gVGhlIGVycm9yIGlzIGluIGZyYW1ld29yayBjb2RlIChmZWF0dXJlLWluZm8udHN4KSwgbm90IG91ciBjb2RlXG4gICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiBmZWF0dXJlLWluZm8udHN4IGlzIHRyeWluZyB0byBhcHBlbmRDaGlsZCB0byBhIERPTSBlbGVtZW50XG4gICAgICAgIC8vIHRoYXQgZ2V0cyByZW1vdmVkIHdoZW4gd2UgY2xlYXIgc2VsZWN0aW9uXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ2NsZWFyLXJlc3VsdC1yYWNlLWNvbmRpdGlvbicsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBub3RlOiAnTGlrZWx5IHJhY2UgY29uZGl0aW9uIHdpdGggZmVhdHVyZS1pbmZvLnRzeCdcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBjbGVhcmluZyByZXN1bHRzIChsaWtlbHkgcmFjZSBjb25kaXRpb24gd2l0aCBmZWF0dXJlIGluZm8pOicsIGVycm9yKVxuICAgICAgICB9XG4gICAgICAgIC8vIERvbid0IHNldCBlcnJvciBzdGF0ZSAtIHRoaXMgaXMgZXhwZWN0ZWQgaW4gc29tZSBzY2VuYXJpb3NcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzU3dpdGNoaW5nUXVlcmllcykge1xuICAgICAgLy8gVXBkYXRlIHJlZiBldmVuIGlmIG5vIHJlc3VsdHMgdG8gY2xlYXJcbiAgICAgIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZCwgY2xlYXJSZXN1bHQsIHJlc3VsdENvdW50XSlcblxuICBjb25zdCBuYXZUb0Zvcm0gPSBSZWFjdC51c2VDYWxsYmFjaygoY2xlYXJSZXN1bHRzID0gZmFsc2UpID0+IHtcbiAgICBpZiAoY2xlYXJSZXN1bHRzKSB7XG4gICAgICAvLyBVc2UgdGhlIGNlbnRyYWxpemVkIGNsZWFyUmVzdWx0IG1ldGhvZCBpbnN0ZWFkIG9mIGR1cGxpY2F0aW5nIGxvZ2ljXG4gICAgICBjbGVhclJlc3VsdCgpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgLy8gU3dpdGNoIHRvIHF1ZXJ5IHRhYiBidXQgZG9uJ3QgY2xlYXIgcmVzdWx0cyB1bmxlc3MgZXhwbGljaXRseSByZXF1ZXN0ZWRcbiAgICAvLyBNYXJrIGFzIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICB9LCAxMDApXG4gICAgLy8gT25seSBjaGFuZ2Ugc3RhZ2UgaWYgd2UncmUgY2xlYXJpbmcgcmVzdWx0c1xuICAgIC8vIE90aGVyd2lzZSwga2VlcCBzdGFnZSBhdCAxIChyZXN1bHRzIGF2YWlsYWJsZSkgc28gcmVzdWx0cyBwZXJzaXN0XG4gICAgaWYgKCFjbGVhclJlc3VsdHMgJiYgcmVzdWx0Q291bnQgPiAwKSB7XG4gICAgICBzZXRTdGFnZSgxKSAvLyBLZWVwIHJlc3VsdHMgYXZhaWxhYmxlXG4gICAgfVxuICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XG4gICAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gICAgfSlcbiAgfSwgW2NsZWFyUmVzdWx0LCByZXN1bHRDb3VudF0pXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGFiIHN3aXRjaGluZyBiZXR3ZWVuIFF1ZXJ5IGFuZCBSZXN1bHRzIHRhYnMuXG4gICAqIFRhYiBzd2l0Y2hpbmcgcHJlc2VydmVzIHJlc3VsdHMgc3RhdGUgLSByZXN1bHRzIHJlbWFpbiB2aXNpYmxlIGFuZCBzZWxlY3RlZFxuICAgKiB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHRhYnMuIFJlc3VsdHMgYXJlIG9ubHkgY2xlYXJlZCB3aGVuIGV4cGxpY2l0bHlcbiAgICogY2xpY2tpbmcgdGhlIHRyYXNoIGNhbiBidXR0b24gb3Igd2hlbiBzdGFydGluZyBhIG5ldyBxdWVyeS5cbiAgICogXG4gICAqIEBwYXJhbSB0YWIgLSBUaGUgdGFiIHRvIHN3aXRjaCB0byAoJ3F1ZXJ5JyB8ICdyZXN1bHRzJylcbiAgICogQHBhcmFtIGV2ZW50IC0gT3B0aW9uYWwgbW91c2UgZXZlbnQgdG8gcHJldmVudCBkZWZhdWx0IGJlaGF2aW9yXG4gICAqL1xuICBjb25zdCBoYW5kbGVUYWJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnLCBldmVudD86IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ3RhYi1jaGFuZ2UnLFxuICAgICAgdGFiLFxuICAgICAgY3VycmVudFRhYjogYWN0aXZlVGFiLFxuICAgICAgcmVzdWx0Q291bnQsXG4gICAgICBldmVudFR5cGU6IGV2ZW50Py50eXBlXG4gICAgfSlcbiAgICBcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgfVxuICAgIC8vIERvbid0IGFsbG93IHN3aXRjaGluZyB0byByZXN1bHRzIGlmIHRoZXJlIGFyZSBubyByZXN1bHRzXG4gICAgaWYgKHRhYiA9PT0gJ3Jlc3VsdHMnICYmIHJlc3VsdENvdW50ID09PSAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAndGFiLWNoYW5nZS1ibG9ja2VkJyxcbiAgICAgICAgcmVhc29uOiAnbm8tcmVzdWx0cycsXG4gICAgICAgIHRhYixcbiAgICAgICAgcmVzdWx0Q291bnRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gTWFyayB0aGlzIGFzIGEgbWFudWFsIHN3aXRjaCB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgc2V0QWN0aXZlVGFiKHRhYilcbiAgICBcbiAgICAvLyBSZXNldCB0aGUgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IHRoZSBzdGF0ZSB1cGRhdGUgdG8gY29tcGxldGVcbiAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbW1lZGlhdGVseSBzd2l0Y2hpbmcgYmFja1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIH0sIDEwMClcbiAgICBcbiAgICAvLyBEb24ndCBjaGFuZ2Ugc3RhZ2UgaGVyZSAtIGp1c3Qgc3dpdGNoIHRoZSB2aWV3XG4gICAgLy8gU3RhZ2Ugc2hvdWxkIHJlbWFpbiBhdCAxIChyZXN1bHRzIGF2YWlsYWJsZSkgd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiB0YWJzXG4gIH0sIFtyZXN1bHRDb3VudCwgYWN0aXZlVGFiXSlcblxuICAvKipcbiAgICogSGFuZGxlcyBmb3JtIHN1Ym1pc3Npb24gd2hlbiB1c2VyIGNsaWNrcyBcIkFwcGx5XCIgYnV0dG9uLlxuICAgKiBDbGVhcnMgb2xkIHJlc3VsdHMgKGlmIGFueSkgYnkgcHJvZ3JhbW1hdGljYWxseSBjbGlja2luZyB0aGUgdHJhc2ggY2FuIGJ1dHRvbixcbiAgICogdGhlbiBleGVjdXRlcyB0aGUgcXVlcnkgd2l0aCB0aGUgcHJvdmlkZWQgU1FMIGV4cHJlc3Npb24gYW5kIHNwYXRpYWwgZmlsdGVyLlxuICAgKiBcbiAgICogQHBhcmFtIHNxbEV4cHIgLSBUaGUgU1FMIGV4cHJlc3Npb24gZm9yIGF0dHJpYnV0ZSBmaWx0ZXJpbmdcbiAgICogQHBhcmFtIHNwYXRpYWxGaWx0ZXIgLSBUaGUgc3BhdGlhbCBmaWx0ZXIgb2JqZWN0XG4gICAqIEBwYXJhbSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgLSBPcHRpb25hbCBydW50aW1lIG92ZXJyaWRlIGZvciB6b29tLXRvLXNlbGVjdGVkIGJlaGF2aW9yXG4gICAqL1xuICBjb25zdCBoYW5kbGVGb3JtU3VibWl0ID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvbiwgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaiwgcnVudGltZVpvb21Ub1NlbGVjdGVkPzogYm9vbGVhbikgPT4ge1xuICAgIC8vIENsZWFyIHByZXZpb3VzIGVycm9ycyB3aGVuIHN0YXJ0aW5nIGEgbmV3IHF1ZXJ5XG4gICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbClcbiAgICBzZXRab29tRXJyb3IobnVsbClcbiAgICBcbiAgICAvLyBTdG9yZSB0aGUgcnVudGltZSB6b29tIG92ZXJyaWRlIGZvciB1c2UgYnkgQWRkIHRvIE1hcCBhY3Rpb25cbiAgICBsYXN0UnVudGltZVpvb21Ub1NlbGVjdGVkUmVmLmN1cnJlbnQgPSBydW50aW1lWm9vbVRvU2VsZWN0ZWRcbiAgICBcbiAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLmN1cnJlbnQgPSBzcWxFeHByXG4gICAgc3BhdGlhbEZpbHRlck9iai5jdXJyZW50ID0gc3BhdGlhbEZpbHRlclxuICAgIC8vIExvYWQgdGhlIGZpcnN0IHBhZ2VcbiAgICBjb25zdCBmZWF0dXJlRFMgPSBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgLy8gQ2xlYXIgb2xkIHJlc3VsdHMgYnkgcHJvZ3JhbW1hdGljYWxseSBjbGlja2luZyB0aGUgdHJhc2ggY2FuIGJ1dHRvbiB3aGVuIHN0YXJ0aW5nIGEgbmV3IHF1ZXJ5XG4gICAgLy8gSWYgdGhlIGJ1dHRvbiBleGlzdHMsIGl0IG1lYW5zIHRoZXJlIGFyZSByZXN1bHRzIHRvIGNsZWFyXG4gICAgLy8gVGhpcyBlbnN1cmVzIHdlIHVzZSB0aGUgZXhhY3Qgc2FtZSBsb2dpYyB3aXRob3V0IGNvZGUgZHVwbGljYXRpb25cbiAgICBpZiAoY2xlYXJSZXN1bHRCdG5SZWYuY3VycmVudCkge1xuICAgICAgY2xlYXJSZXN1bHRCdG5SZWYuY3VycmVudC5jbGljaygpXG4gICAgICAvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgdGhlIGNsaWNrIGhhbmRsZXIgY29tcGxldGVzIGJlZm9yZSBwcm9jZWVkaW5nXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpXG4gICAgfVxuICAgIFxuICAgIC8vIFNldCBsb2FkaW5nIHN0YWdlXG4gICAgc2V0U3RhZ2UoMilcbiAgICBcbiAgICBhd2FpdCBwdWJsaXNoRGF0YUNsZWFyZWRNc2coKVxuICAgIFxuICAgIC8vIERldGVybWluZSBwYWdlIHNpemUgYmFzZWQgb24gcGFnaW5hdGlvbiBzdHlsZVxuICAgIC8vIEZvciBzaW5nbGUtcGFnZSAoTGF6eUxvYWQpIG1vZGUsIHVzZSB0aGUgY29uZmlndXJlZCBpbml0aWFsIHBhZ2Ugc2l6ZSAoZGVmYXVsdHMgdG8gMTAwKVxuICAgIC8vIEZvciBtdWx0aS1wYWdlIG1vZGUsIHVzZSB0aGUgZGVmYXVsdCBwYWdlIHNpemUgZnJvbSBwcm9wc1xuICAgIGxldCBwYWdlU2l6ZSA9IGRlZmF1bHRQYWdlU2l6ZVxuICAgIGlmIChwYWdpbmdUeXBlSW5Db25maWcgPT09IFBhZ2luZ1R5cGUuTGF6eUxvYWQpIHtcbiAgICAgIC8vIFVzZSBjb25maWd1cmVkIGxhenkgbG9hZCBpbml0aWFsIHBhZ2Ugc2l6ZSwgZmFsbGluZyBiYWNrIHRvIDEwMCBpZiBub3Qgc2V0XG4gICAgICBwYWdlU2l6ZSA9IGxhenlMb2FkSW5pdGlhbFBhZ2VTaXplID8/IDEwMFxuICAgIH1cbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IGdlbmVyYXRlUXVlcnlQYXJhbXMoZmVhdHVyZURTLCBzcWxFeHByLCBzcGF0aWFsRmlsdGVyLCBjdXJyZW50SXRlbSwgMSwgcGFnZVNpemUpXG4gICAgcXVlcnlQYXJhbVJlZi5jdXJyZW50ID0gcXVlcnlQYXJhbXNcbiAgICAvLyBDaGFuZ2Ugb3V0cHV0IGRzIHN0YXR1cyB0byB1bmxvYWRlZCBiZWZvcmUgdXNlIGl0IHRvIGxvYWQgY291bnQvcmVjb3Jkcy5cbiAgICBmZWF0dXJlRFMuc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuVW5sb2FkZWQpXG4gICAgZmVhdHVyZURTLnNldENvdW50U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuVW5sb2FkZWQpXG4gICAgbGV0IHF1ZXJ5UmVzdWx0Q291bnQgPSAwIC8vIENhcHR1cmUgY291bnQgZnJvbSBwcm9taXNlIGNoYWluIHRvIHVzZSBpbiBmaW5hbGx5IGJsb2NrXG4gICAgZXhlY3V0ZUNvdW50UXVlcnkocHJvcHMud2lkZ2V0SWQsIGZlYXR1cmVEUywgcXVlcnlQYXJhbXMpXG4gICAgICAudGhlbigoY291bnQpID0+IHtcbiAgICAgICAgcXVlcnlSZXN1bHRDb3VudCA9IGNvdW50IC8vIFN0b3JlIGNvdW50IGZvciB1c2UgaW4gZmluYWxseSBibG9ja1xuICAgICAgICBzZXRSZXN1bHRDb3VudChjb3VudClcbiAgICAgICAgLy8gdXBkYXRlIGRzIGluIG9yZGVyIHRvIGV4ZWN1dGUgcXVlcnlcbiAgICAgICAgZmVhdHVyZURTLnVwZGF0ZVF1ZXJ5UGFyYW1zKHF1ZXJ5UGFyYW1SZWYuY3VycmVudCwgcHJvcHMud2lkZ2V0SWQpXG4gICAgICAgIHJldHVybiBleGVjdXRlUXVlcnkocHJvcHMud2lkZ2V0SWQsIHF1ZXJ5SXRlbSwgZmVhdHVyZURTLCBxdWVyeVBhcmFtUmVmLmN1cnJlbnQpXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSByZXN1bHQucmVjb3Jkc1xuICAgICAgICAvLyBSZXNldCBzZWxlY3Rpb24gZmxhZyBmb3IgbmV3IHF1ZXJ5IHJlc3VsdHNcbiAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICBcbiAgICAgICAgLy8gU2VsZWN0IHF1ZXJ5IHJlc3VsdHMgaW4gb3V0cHV0IGRhdGEgc291cmNlIC0gdGhpcyB0ZWxscyB0aGUgbWFwIHRvIGhpZ2hsaWdodCBmZWF0dXJlc1xuICAgICAgICAvLyBUaGlzIG11c3QgaGFwcGVuIEJFRk9SRSB6b29tIHRvIGVuc3VyZSBzZWxlY3Rpb24gaXMgdmlzaWJsZVxuICAgICAgICAvLyBTZWxlY3Rpb24gaGFwcGVucyBvbmNlIHdoZW4gcmVzdWx0cyBmaXJzdCBjb21lIGJhY2sgLSBub3Qgb24gZXZlcnkgdGFiIHN3aXRjaFxuICAgICAgICAvLyBUaGlzIHByZXZlbnRzIGR1cGxpY2F0ZSBzZWxlY3Rpb25zIGFuZCBlbnN1cmVzIGZlYXR1cmVzIGFyZSBvbmx5IGFkZGVkIHRvXG4gICAgICAgIC8vIHRoZSBtYXAncyBzZWxlY3Rpb24gc2V0IG9uY2UgcGVyIHF1ZXJ5IGV4ZWN1dGlvblxuICAgICAgICBcbiAgICAgICAgLy8gU2VsZWN0IHJlY29yZHMgZGlyZWN0bHkgb24gdGhlIG9yaWdpbiBsYXllciAocGFyY2VsIGxheWVyKVxuICAgICAgICBpZiAocmVzdWx0LnJlY29yZHMgJiYgcmVzdWx0LnJlY29yZHMubGVuZ3RoID4gMCAmJiBvdXRwdXREUykge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkcyA9IHJlc3VsdC5yZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2VsZWN0IHJlY29yZHMgYW5kIHB1Ymxpc2ggc2VsZWN0aW9uIG1lc3NhZ2UgdXNpbmcgdXRpbGl0eSBmdW5jdGlvblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgb3V0cHV0RFMsXG4gICAgICAgICAgICAgIHJlY29yZElkcyxcbiAgICAgICAgICAgICAgcmVzdWx0LnJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSB0cnVlIC8vIE1hcmsgYXMgc2VsZWN0ZWRcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQnLFxuICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHVibGlzaGluZyBzZWxlY3Rpb24gbWVzc2FnZScsIGVycm9yKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIGV4aXN0aW5nIHpvb21Ub0ZlYXR1cmUgZGF0YSBhY3Rpb24gKHNhbWUgYXMgY2xpY2tpbmcgXCJab29tIFRvXCIgaW4gdGhlIG1lbnUpXG4gICAgICAgIC8vIFVzZSBydW50aW1lIHByZWZlcmVuY2UgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gY29uZmlnIHNldHRpbmcgKGRlZmF1bHRzIHRvIHRydWUpXG4gICAgICAgIGNvbnN0IHNob3VsZFpvb20gPSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCBcbiAgICAgICAgICA/IHJ1bnRpbWVab29tVG9TZWxlY3RlZCBcbiAgICAgICAgICA6IChxdWVyeUl0ZW0uem9vbVRvU2VsZWN0ZWQgIT09IGZhbHNlKVxuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3VsdC5yZWNvcmRzICYmIHJlc3VsdC5yZWNvcmRzLmxlbmd0aCA+IDAgJiYgb3V0cHV0RFMgJiYgc2hvdWxkWm9vbSkge1xuICAgICAgICAgIC8vIENyZWF0ZSBhIGRhdGEgc2V0IGZyb20gdGhlIG91dHB1dCBkYXRhIHNvdXJjZSBhbmQgc2VsZWN0ZWQgcmVjb3Jkc1xuICAgICAgICAgIGNvbnN0IGRhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICAgICAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICAgICAgICAgIHJlY29yZHM6IHJlc3VsdC5yZWNvcmRzLFxuICAgICAgICAgICAgbmFtZTogb3V0cHV0RFMuZ2V0TGFiZWwoKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEdldCBhdmFpbGFibGUgZGF0YSBhY3Rpb25zIGFuZCBmaW5kIHRoZSB6b29tVG9GZWF0dXJlIGFjdGlvblxuICAgICAgICAgIHJldHVybiBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN1cHBvcnRlZEFjdGlvbnMocHJvcHMud2lkZ2V0SWQsIFtkYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMpXG4gICAgICAgICAgICAudGhlbihhY3Rpb25DYXRlZ29yaWVzID0+IHtcbiAgICAgICAgICAgICAgLy8gTG9vayBmb3Igem9vbVRvRmVhdHVyZSBhY3Rpb24gaW4gYW55IGNhdGVnb3J5XG4gICAgICAgICAgICAgIGxldCB6b29tQWN0aW9uOiBhbnkgPSBudWxsXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgaW4gYWN0aW9uQ2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbnMgPSBhY3Rpb25DYXRlZ29yaWVzW2NhdGVnb3J5XVxuICAgICAgICAgICAgICAgIHpvb21BY3Rpb24gPSBhY3Rpb25zLmZpbmQoKGFjdGlvbjogYW55KSA9PiBhY3Rpb24ubmFtZSA9PT0gJ3pvb21Ub0ZlYXR1cmUnIHx8IGFjdGlvbi5pZCA9PT0gJ3pvb21Ub0ZlYXR1cmUnKVxuICAgICAgICAgICAgICAgIGlmICh6b29tQWN0aW9uKSBicmVha1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHpvb21BY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIHRoZSBzYW1lIHpvb20gYWN0aW9uIHRoYXQgd29ya3Mgd2hlbiBjbGlja2VkIG1hbnVhbGx5XG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFBY3Rpb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZXhlY3V0ZURhdGFBY3Rpb24oem9vbUFjdGlvbiwgW2RhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3JkcywgcHJvcHMud2lkZ2V0SWQpXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB6b29tIHRvIGZlYXR1cmVzJ1xuICAgICAgICAgICAgICBzZXRab29tRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1pPT00nLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICd6b29tLWFjdGlvbi1mYWlsZWQnLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyB6b29tVG9GZWF0dXJlIGRhdGEgYWN0aW9uJywgZXJyb3IpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKVxuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgaWYgKHNwYXRpYWxGaWx0ZXI/LmxheWVyICYmIHNwYXRpYWxGaWx0ZXI/LmNsZWFyQWZ0ZXJBcHBseSkge1xuICAgICAgICAgIHNwYXRpYWxGaWx0ZXIubGF5ZXIucmVtb3ZlQWxsKClcbiAgICAgICAgfVxuICAgICAgICBzZXRTdGFnZSgxKVxuICAgICAgICAvLyBUYWIgc3dpdGNoaW5nIGlzIG5vdyBoYW5kbGVkIGJ5IHVzZUVmZmVjdCB0aGF0IHdhdGNoZXMgZm9yIHJlc3VsdENvdW50LCByZWNvcmRzUmVmLmN1cnJlbnQsIGFuZCBzdGFnZVxuICAgICAgICAvLyBUaGlzIGVuc3VyZXMgd2Ugd2FpdCBmb3IgUmVhY3QgdG8gYWN0dWFsbHkgcmVuZGVyIHJlc3VsdHMgYmVmb3JlIHN3aXRjaGluZyB0YWJzXG4gICAgICAgIC8vIFRoaXMgbWF0Y2hlcyB0aGUgYmVoYXZpb3Igb2YgbWFudWFsIGlucHV0IHdoZXJlIHJlc3VsdHMgYXJlIHJlbmRlcmVkIGJlZm9yZSB0YWIgc3dpdGNoXG4gICAgICB9KVxuICB9LCBbY3VycmVudEl0ZW0sIHF1ZXJ5SXRlbSwgcHJvcHMud2lkZ2V0SWQsIG91dHB1dERTLCBkZWZhdWx0UGFnZVNpemUsIHBhZ2luZ1R5cGVJbkNvbmZpZywgbGF6eUxvYWRJbml0aWFsUGFnZVNpemUsIHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZywgY2xlYXJSZXN1bHRdKVxuXG4gIGNvbnN0IHsgdXNlQXR0cmlidXRlRmlsdGVyLCBzcWxFeHByT2JqLCB1c2VTcGF0aWFsRmlsdGVyLCBzcGF0aWFsRmlsdGVyVHlwZXMsIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IHNob3dBdHRyaWJ1dGVGaWx0ZXIgPSB1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwck9iaiAhPSBudWxsXG4gIGNvbnN0IHNob3dTcGF0aWFsRmlsdGVyID0gc3BhdGlhbEZpbHRlckVuYWJsZWQgJiYgdXNlU3BhdGlhbEZpbHRlciAmJiAoc3BhdGlhbEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgfHwgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSB8fCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMClcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrIGgtMTAwJywgY2xhc3NOYW1lLCB7IHdyYXBwZWQ6IHdyYXBwZWRJblBvcHBlciB9KX0gY3NzPXtjc3NgXG4gICAgICAke3N0eWxlfVxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGB9PlxuICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17dXNlT3V0cHV0RHN9IG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZU91dHB1dERhdGFTb3VyY2VDcmVhdGVkfSBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVPdXRwdXREYXRhU291cmNlSW5mb0NoYW5nZX0vPlxuICAgICAgXG4gICAgICB7LyogVGFiIE5hdmlnYXRpb24gLSBNb3ZlZCB0byB0b3AgKi99XG4gICAgICA8VGFic1xuICAgICAgICB2YWx1ZT17YWN0aXZlVGFifVxuICAgICAgICBvbkNoYW5nZT17KGlkKSA9PiBoYW5kbGVUYWJDaGFuZ2UoaWQgYXMgJ3F1ZXJ5JyB8ICdyZXN1bHRzJyl9XG4gICAgICAgIGZpbGw9e3RydWV9XG4gICAgICAgIHR5cGU9J3VuZGVybGluZSdcbiAgICAgICAga2VlcE1vdW50PXt0cnVlfVxuICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIGB9XG4gICAgICA+XG4gICAgICAgIDxUYWJcbiAgICAgICAgICBpZD0ncXVlcnknXG4gICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdxdWVyeVRhYicpfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktdGFza19fY29udGVudCcsIHtcbiAgICAgICAgICAgICAgW0ZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1NdOiBpc0luUG9wcGVyICYmIGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5J1xuICAgICAgICAgICAgfSl9IFxuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICBgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHsvKiBIZWFkZXIgd2l0aCBiYWNrIGJ1dHRvbiBhbmQgcXVlcnkgbGFiZWwgLSBRdWVyeSB0YWIgb25seSAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS1mb3JtX19oZWFkZXIgbXgtNCBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdpbi1wb3BwZXInOiBpc0luUG9wcGVyIH0pfSBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgcGFkZGluZzogNnB4IDA7XG4gICAgICAgICAgICAgIHBhZGRpbmctdG9wOiA4cHg7XG4gICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbmF2LWFjdGlvbiBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdkLW5vbmUnOiB3cmFwcGVkSW5Qb3BwZXIgfSl9PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncC0wIG1yLTInLCB7ICdkLW5vbmUnOiB0b3RhbCA9PT0gMSB8fCAhb25OYXZCYWNrIH0pfVxuICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uTmF2QmFja31cbiAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdiYWNrJyl9XG4gICAgICAgICAgICAgICAgICByZWY9e2JhY2tCdG5SZWZ9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPEFycm93TGVmdE91dGxpbmVkIGF1dG9GbGlwLz5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8UXVlcnlUYXNrTGFiZWwgaWNvbj17aWNvbn0gbmFtZT17ZGlzcGxheUxhYmVsID8gbmFtZSA6ICcnfSAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge3Jlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfSBwbGFjZW1lbnQ9J2JvdHRvbSc+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHJlZj17Y2xlYXJSZXN1bHRCdG5SZWZ9XG4gICAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9XG4gICAgICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtbC1hdXRvIHB5LTAnXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2NsZWFyUmVzdWx0fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VHJhc2hPdXRsaW5lZCAvPlxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7LyogU2VhcmNoIExheWVyIC8gR3JvdXAgZHJvcGRvd25zIC0gc2hvdyBiYXNlZCBvbiBncm91cGluZyAqL31cbiAgICAgICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgZHJvcGRvd25zIGlmIG11bHRpcGxlIHF1ZXJpZXMgZXhpc3RcbiAgICAgICAgICAgICAgaWYgKCFxdWVyeUl0ZW1zIHx8IHF1ZXJ5SXRlbXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBCdWlsZCBmbGF0IGxpc3Qgb2YgYWxsIHF1ZXJpZXMgd2l0aCB0aGVpciBkaXNwbGF5IGluZm9cbiAgICAgICAgICAgICAgLy8gRm9yIGdyb3VwZWQgcXVlcmllcywgdXNlIGdyb3VwIGRpc3BsYXkgbmFtZSAob25seSBzaG93IG9uY2UgcGVyIGdyb3VwKVxuICAgICAgICAgICAgICBjb25zdCBxdWVyeU9wdGlvbnM6IEFycmF5PHtcbiAgICAgICAgICAgICAgICBjb25maWdJZDogc3RyaW5nXG4gICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHN0cmluZ1xuICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHN0cmluZyB8IG51bGxcbiAgICAgICAgICAgICAgICBpbmRleDogbnVtYmVyXG4gICAgICAgICAgICAgIH0+ID0gW11cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFRyYWNrIHdoaWNoIGdyb3VwcyB3ZSd2ZSBhbHJlYWR5IGFkZGVkIHRvIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgICAgY29uc3QgYWRkZWRHcm91cHMgPSBuZXcgU2V0PHN0cmluZz4oKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcXVlcnlJdGVtcy5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBGb3IgZ3JvdXBlZCBxdWVyaWVzLCB1c2UgZ3JvdXAgZGlzcGxheSBuYW1lIChvbmx5IGFkZCBvbmNlIHBlciBncm91cClcbiAgICAgICAgICAgICAgICAgIGlmICghYWRkZWRHcm91cHMuaGFzKGl0ZW0uZ3JvdXBJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRHcm91cHMuYWRkKGl0ZW0uZ3JvdXBJZClcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBEaXNwbGF5TmFtZSA9IGdyb3Vwcz8uW2l0ZW0uZ3JvdXBJZF0/LmRpc3BsYXlOYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3Vwcz8uW2l0ZW0uZ3JvdXBJZF0/Lml0ZW1zWzBdPy5uYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ubmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgR3JvdXAgJHtpdGVtLmdyb3VwSWR9YFxuICAgICAgICAgICAgICAgICAgICBxdWVyeU9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGdyb3VwRGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogaXRlbS5ncm91cElkLFxuICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHhcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gVW5ncm91cGVkIHF1ZXJ5IC0gdXNlIGl0ZW0ubmFtZSBmb3IgZmlyc3QgZHJvcGRvd24gKG5vdCBzZWFyY2hBbGlhcy9qaW11RmllbGROYW1lKVxuICAgICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBjb25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGl0ZW0ubmFtZSB8fCBnZXRRdWVyeURpc3BsYXlOYW1lKGl0ZW0pLFxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERldGVybWluZSBjdXJyZW50bHkgc2VsZWN0ZWQgcXVlcnlcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFF1ZXJ5SXRlbSA9IHF1ZXJ5SXRlbVxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UXVlcnlHcm91cElkID0gY3VycmVudFF1ZXJ5SXRlbS5ncm91cElkIHx8IG51bGxcbiAgICAgICAgICAgICAgY29uc3QgaXNHcm91cGVkUXVlcnkgPSBjdXJyZW50UXVlcnlHcm91cElkICE9PSBudWxsXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBvcHRpb24gaW5kZXggZm9yIHRoZSBjdXJyZW50IHF1ZXJ5XG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPcHRpb25JbmRleCA9IHF1ZXJ5T3B0aW9ucy5maW5kSW5kZXgob3B0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNHcm91cGVkUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBvcHQuZ3JvdXBJZCA9PT0gY3VycmVudFF1ZXJ5R3JvdXBJZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0LmNvbmZpZ0lkID09PSBjdXJyZW50UXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbmRlcmluZy1kcm9wZG93bnMnLFxuICAgICAgICAgICAgICAgIHRvdGFsUXVlcmllczogcXVlcnlJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zQ291bnQ6IHF1ZXJ5T3B0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXJ5R3JvdXBJZCxcbiAgICAgICAgICAgICAgICBpc0dyb3VwZWRRdWVyeSxcbiAgICAgICAgICAgICAgICBjdXJyZW50T3B0aW9uSW5kZXgsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cElkLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LFxuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWVyeUNvbmZpZ0lkOiBjdXJyZW50UXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICB7LyogRmlyc3QgRHJvcGRvd246IEFsbCBxdWVyaWVzICovfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdzZWFyY2hMYXllcicpfVxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IFxuICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRPcHRpb25JbmRleCA+PSAwID8gY3VycmVudE9wdGlvbkluZGV4IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IHF1ZXJ5T3B0aW9uc1tvcHRpb25JbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1vcHRpb24tc2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzR3JvdXBlZDogc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZCAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JvdXBlZCBxdWVyeSBzZWxlY3RlZCAtIHNldCBncm91cCBhbmQgZmlyc3QgcXVlcnkgaW4gZ3JvdXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwQ2hhbmdlKHNlbGVjdGVkT3B0aW9uLmdyb3VwSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBRdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZSgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmdyb3VwZWQgcXVlcnkgc2VsZWN0ZWQgLSBjbGVhciBncm91cCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwQ2hhbmdlKG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uVW5ncm91cGVkQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdW5ncm91cGVkIGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdW5ncm91cGVkSW5kZXggPSB1bmdyb3VwZWQ/LmZpbmRJbmRleCgoeyBpdGVtIH0pID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jb25maWdJZCA9PT0gc2VsZWN0ZWRPcHRpb24uY29uZmlnSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApID8/IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuZ3JvdXBlZEluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVW5ncm91cGVkQ2hhbmdlKHVuZ3JvdXBlZEluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjazogdXNlIHRoZSBpbmRleCBmcm9tIHF1ZXJ5SXRlbXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAndW5ncm91cGVkLWZhbGxiYWNrLXRvLWluZGV4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb25JbmRleDogc2VsZWN0ZWRPcHRpb24uaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25RdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblF1ZXJ5Q2hhbmdlKHNlbGVjdGVkT3B0aW9uLmluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7cXVlcnlPcHRpb25zLm1hcCgob3B0aW9uLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAncmVuZGVyaW5nLXF1ZXJ5LW9wdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBvcHRpb24uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBvcHRpb24uZGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG9wdGlvbi5ncm91cElkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e29wdGlvbi5jb25maWdJZH0gdmFsdWU9e2lkeH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge29wdGlvbi5kaXNwbGF5TmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsvKiBTZWNvbmQgRHJvcGRvd246IFF1ZXJpZXMgd2l0aGluIHNlbGVjdGVkIGdyb3VwIChvbmx5IGlmIGdyb3VwZWQgcXVlcnkgc2VsZWN0ZWQpICovfVxuICAgICAgICAgICAgICAgICAge2lzR3JvdXBlZFF1ZXJ5ICYmIGN1cnJlbnRRdWVyeUdyb3VwSWQgJiYgZ3JvdXBzICYmIGdyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgICBTZWFyY2ggQWxpYXNcbiAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QgXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlbGVjdGVkR3JvdXBRdWVyeUluZGV4ICE9PSB1bmRlZmluZWQgPyBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SW5kZXggPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2dyb3VwLXF1ZXJ5LXNlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBjdXJyZW50UXVlcnlHcm91cElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwUXVlcnlJbmRleDogbmV3SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGdyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXS5pdGVtc1tuZXdJbmRleF0/LmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5RGlzcGxheU5hbWU6IGdldFF1ZXJ5RGlzcGxheU5hbWUoZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zW25ld0luZGV4XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBRdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZShuZXdJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zLm1hcCgoaXRlbSwgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpdGVtLmNvbmZpZ0lkfSB2YWx1ZT17aWR4fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICB7ZW5hYmxlZCAmJiBkc0V4aXN0cyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgPFF1ZXJ5VGFza0Zvcm1cbiAgICAgICAgICAgICAgICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkPXtxdWVyeUl0ZW0uY29uZmlnSWR9XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZVJlYWR5PXtkYXRhU291cmNlICE9IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIHNwYXRpYWxGaWx0ZXJFbmFibGVkPXtzcGF0aWFsRmlsdGVyRW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YUFjdGlvbkZpbHRlciA9IHtkYXRhQWN0aW9uRmlsdGVyfVxuICAgICAgICAgICAgICAgICAgICBvbkZvcm1TdWJtaXQ9e2hhbmRsZUZvcm1TdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtpbml0aWFsSW5wdXRWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17b25IYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZD17cXVlcnlJdGVtLnNob3J0SWR9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8RGF0YVNvdXJjZVRpcFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtwcm9wcy53aWRnZXRJZH1cbiAgICAgICAgICAgICAgICB1c2VEYXRhU291cmNlPXtxdWVyeUl0ZW0udXNlRGF0YVNvdXJjZX1cbiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICBvblN0YXR1c0NoYW5nZT17aGFuZGxlU3RhdHVzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvVGFiPlxuICAgICAgICA8VGFiXG4gICAgICAgICAgaWQ9J3Jlc3VsdHMnXG4gICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c1RhYicpfVxuICAgICAgICAgICAgICB7cmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAoe3Jlc3VsdENvdW50fSlcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgfVxuICAgICAgICAgIGRpc2FibGVkPXtyZXN1bHRDb3VudCA9PT0gMH1cbiAgICAgICAgPlxuICAgICAgICAgIHtyZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrX19jb250ZW50Jywge1xuICAgICAgICAgICAgICAgIFtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTXTogaXNJblBvcHBlciAmJiBhY3RpdmVUYWIgPT09ICdyZXN1bHRzJ1xuICAgICAgICAgICAgICB9KX0gXG4gICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCBjbGlja3MgZnJvbSBidWJibGluZyB1cCB3aGVuIFJlc3VsdHMgdGFiIGlzIGFjdGl2ZVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVUYWIgPT09ICdyZXN1bHRzJykge1xuICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza1Jlc3VsdFxuICAgICAgICAgICAgICAgIGtleT17YCR7cXVlcnlJdGVtLmNvbmZpZ0lkfS0ke3F1ZXJ5RXhlY3V0aW9uS2V5UmVmLmN1cnJlbnR9YH1cbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17cHJvcHMud2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtPXtxdWVyeUl0ZW19XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXM9e3F1ZXJ5UGFyYW1SZWYuY3VycmVudH1cbiAgICAgICAgICAgICAgICByZXN1bHRDb3VudD17cmVzdWx0Q291bnR9XG4gICAgICAgICAgICAgICAgbWF4UGVyUGFnZT17KGRhdGFTb3VyY2UgYXMgUXVlcmlhYmxlRGF0YVNvdXJjZSk/LmdldE1heFJlY29yZENvdW50Py4oKX1cbiAgICAgICAgICAgICAgICByZWNvcmRzPXtyZWNvcmRzUmVmLmN1cnJlbnR9XG4gICAgICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtkZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTfVxuICAgICAgICAgICAgICAgIHJ1bnRpbWVab29tVG9TZWxlY3RlZD17bGFzdFJ1bnRpbWVab29tVG9TZWxlY3RlZFJlZi5jdXJyZW50fVxuICAgICAgICAgICAgICAgIG9uTmF2QmFjaz17KGNsZWFyUmVzdWx0cyA9IGZhbHNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbmF2aWdhdGlvbiBmcm9tIFF1ZXJ5VGFza1Jlc3VsdFxuICAgICAgICAgICAgICAgICAgLy8gSWYgY2xlYXJSZXN1bHRzIGlzIHRydWUsIGNsZWFyIGV2ZXJ5dGhpbmcgYW5kIGdvIHRvIHF1ZXJ5IHRhYlxuICAgICAgICAgICAgICAgICAgLy8gSWYgZmFsc2UsIGp1c3Qgc3dpdGNoIHRvIHF1ZXJ5IHRhYiB3aXRob3V0IGNsZWFyaW5nXG4gICAgICAgICAgICAgICAgICBpZiAoY2xlYXJSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgZmxhZyB3aGVuIGNsZWFyaW5nXG4gICAgICAgICAgICAgICAgICAgIG5hdlRvRm9ybSh0cnVlKVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSnVzdCBzd2l0Y2ggdGFicywgZG9uJ3QgY2xlYXIgcmVzdWx0c1xuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGFzIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgICAgICAgICAgICAgICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXlcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvVGFiPlxuICAgICAgPC9UYWJzPlxuXG4gICAgICB7LyogRXJyb3IgTWVzc2FnZXMgKi99XG4gICAgICB7KHNlbGVjdGlvbkVycm9yIHx8IHpvb21FcnJvcikgJiYgKFxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDAgMTZweDtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgIGB9PlxuICAgICAgICAgIHtzZWxlY3Rpb25FcnJvciAmJiAoXG4gICAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgICBlcnJvcj17c2VsZWN0aW9uRXJyb3J9IFxuICAgICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFNlbGVjdGlvbkVycm9yKG51bGwpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHt6b29tRXJyb3IgJiYgKFxuICAgICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgICAgZXJyb3I9e3pvb21FcnJvcn0gXG4gICAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0Wm9vbUVycm9yKG51bGwpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBMb2FkaW5nIEluZGljYXRvciAtIG92ZXJsYXlzIG9uIHRvcCBvZiB0YWJzICovfVxuICAgICAge3N0YWdlID09PSAyICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICAgIHotaW5kZXg6IDEwMDA7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgYH0+XG4gICAgICAgICAgPExvYWRpbmdSZXN1bHQgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQge1xuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgdHlwZSBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyxcbiAgTWVzc2FnZU1hbmFnZXIsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UsXG4gIFJlY29yZFNldENoYW5nZVR5cGUsXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXG4gIGRhdGFTb3VyY2VVdGlsc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IElGaWVsZEluZm8gfSBmcm9tICdAZXNyaS9hcmNnaXMtcmVzdC1mZWF0dXJlLXNlcnZpY2UnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIFNwYXRpYWxSZWxhdGlvbiwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCBGaWVsZHNUeXBlLCBtYXBKU0FQSVVuaXRUb0RzVW5pdCwgbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWwgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbWJpbmVGaWVsZHMgKHJlc3VsdERpc3BsYXlGaWVsZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz4sIHJlc3VsdFRpdGxlRXhwcmVzc2lvbjogc3RyaW5nLCBpZEZpZWxkPzogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCBmaWVsZHMgPSBuZXcgU2V0PHN0cmluZz4oKVxuICByZXN1bHREaXNwbGF5RmllbGRzPy5mb3JFYWNoKGl0ZW0gPT4gZmllbGRzLmFkZChpdGVtKSlcbiAgaWYgKHJlc3VsdFRpdGxlRXhwcmVzc2lvbikge1xuICAgIGNvbnN0IHRlbXBsYXRlcyA9IHJlc3VsdFRpdGxlRXhwcmVzc2lvbi5tYXRjaCgvXFx7XFx3KlxcfS9nKVxuICAgIGlmICh0ZW1wbGF0ZXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgIHRlbXBsYXRlcy5mb3JFYWNoKGl0ZW0gPT4gZmllbGRzLmFkZChpdGVtLnN1YnN0cmluZygxLCBpdGVtLmxlbmd0aCAtIDEpKSlcbiAgICB9XG4gIH1cbiAgaWYgKGlkRmllbGQpIHtcbiAgICBmaWVsZHMuYWRkKGlkRmllbGQpXG4gIH1cbiAgcmV0dXJuIEFycmF5LmZyb20oZmllbGRzKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UG9wdXBUZW1wbGF0ZSAoXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPlxuKTogUHJvbWlzZTx7IHBvcHVwVGVtcGxhdGU/OiBfX2VzcmkuUG9wdXBUZW1wbGF0ZSwgZGVmYXVsdFBvcHVwVGVtcGxhdGU/OiBfX2VzcmkuUG9wdXBUZW1wbGF0ZSB9PiB7XG4gIGNvbnN0IHsgcmVzdWx0RmllbGRzVHlwZSwgcmVzdWx0RGlzcGxheUZpZWxkcywgcmVzdWx0VGl0bGVFeHByZXNzaW9uID0gJycgfSA9IHF1ZXJ5SXRlbVxuICBjb25zdCBjdXJyZW50T3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgY29uc3QgcG9wdXBJbmZvID0gY3VycmVudE9yaWdpbkRzLmdldFBvcHVwSW5mbygpXG5cbiAgaWYgKHJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcykge1xuICAgIGxldCBmaWVsZHM6IHN0cmluZ1tdXG4gICAgaWYgKHJlc3VsdERpc3BsYXlGaWVsZHMgPT0gbnVsbCkge1xuICAgICAgY29uc3QgZmllbGRzSW5Db250ZW50ID0gZ2V0RmllbGRJbmZvc0luUG9wdXBDb250ZW50KHBvcHVwSW5mbylcbiAgICAgIGlmIChmaWVsZHNJbkNvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB1bmlxdWVGaWVsZHMgPSBuZXcgU2V0KGZpZWxkc0luQ29udGVudC5tYXAoZWxlID0+IGVsZS5maWVsZE5hbWUpKVxuICAgICAgICBmaWVsZHMgPSBBcnJheS5mcm9tKHVuaXF1ZUZpZWxkcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJldHVybiBhbGwgZmllbGRzIGJ5IGRlZmF1bHRcbiAgICAgICAgY29uc3QgYWxsRmllbGRzU2NoZW1hID0gb3V0cHV0RFMuZ2V0U2NoZW1hKClcbiAgICAgICAgZmllbGRzID0gYWxsRmllbGRzU2NoZW1hPy5maWVsZHMgPyBPYmplY3QudmFsdWVzKGFsbEZpZWxkc1NjaGVtYS5maWVsZHMpLm1hcChmaWVsZCA9PiBmaWVsZC5qaW11TmFtZSkgOiBbXVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmaWVsZHMgPSByZXN1bHREaXNwbGF5RmllbGRzLmFzTXV0YWJsZSh7IGRlZXA6IHRydWUgfSlcbiAgICB9XG4gICAgaWYgKHBvcHVwSW5mbykge1xuICAgICAgY29uc3QgZmllbGRJbmZvcyA9IFtdXG4gICAgICBmaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgIGNvbnN0IGZpZWxkSW5mbyA9IHBvcHVwSW5mby5maWVsZEluZm9zLmZpbmQoZmllbGRJbmZvID0+IGZpZWxkSW5mby5maWVsZE5hbWUgPT09IGZpZWxkKVxuICAgICAgICBpZiAoZmllbGRJbmZvKSB7XG4gICAgICAgICAgZmllbGRJbmZvLnZpc2libGUgPSB0cnVlXG4gICAgICAgICAgZmllbGRJbmZvcy5wdXNoKGZpZWxkSW5mbylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaWVsZEluZm9zLnB1c2goe1xuICAgICAgICAgICAgZmllbGROYW1lOiBmaWVsZCxcbiAgICAgICAgICAgIGxhYmVsOiBmaWVsZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwb3B1cFRlbXBsYXRlOiB7XG4gICAgICAgICAgZmllbGRJbmZvcyxcbiAgICAgICAgICBjb250ZW50OiBbe1xuICAgICAgICAgICAgdHlwZTogJ2ZpZWxkcydcbiAgICAgICAgICB9XSxcbiAgICAgICAgICB0aXRsZTogcmVzdWx0VGl0bGVFeHByZXNzaW9uXG4gICAgICAgIH1cbiAgICAgIH0gYXMgYW55XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBwb3B1cFRlbXBsYXRlOiB7XG4gICAgICAgIGZpZWxkSW5mb3M6IGZpZWxkcy5tYXAoZmllbGQgPT4gKHtcbiAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkLFxuICAgICAgICAgIGxhYmVsOiBmaWVsZFxuICAgICAgICB9KSksXG4gICAgICAgIGNvbnRlbnQ6IFt7XG4gICAgICAgICAgdHlwZTogJ2ZpZWxkcydcbiAgICAgICAgfV0sXG4gICAgICAgIHRpdGxlOiByZXN1bHRUaXRsZUV4cHJlc3Npb25cbiAgICAgIH0gYXMgYW55XG4gICAgfVxuICB9XG4gIC8vIHRoZSBzb3VyY2UgbGF5ZXIgd2lsbCBwcm92aWRlIHBvcHVwIGluZm9cbiAgbGV0IGxheWVyT2JqZWN0XG4gIGlmIChjdXJyZW50T3JpZ2luRHMubGF5ZXIpIHtcbiAgICBsYXllck9iamVjdCA9IGN1cnJlbnRPcmlnaW5Ecy5sYXllclxuICB9IGVsc2Uge1xuICAgIGxheWVyT2JqZWN0ID0gYXdhaXQgY3VycmVudE9yaWdpbkRzLmNyZWF0ZUpTQVBJTGF5ZXJCeURhdGFTb3VyY2UoKVxuICB9XG4gIGlmIChsYXllck9iamVjdCkge1xuICAgIGF3YWl0IGxheWVyT2JqZWN0LmxvYWQoKVxuICB9XG4gIHJldHVybiB7IGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBsYXllck9iamVjdD8uYXNzb2NpYXRlZExheWVyPy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB8fCBsYXllck9iamVjdD8uZGVmYXVsdFBvcHVwVGVtcGxhdGUgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVRdWVyeVBhcmFtcyAoXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24sXG4gIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmosXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LFxuICBwYWdlOiBudW1iZXIsXG4gIHBhZ2VTaXplOiBudW1iZXJcbik6IFF1ZXJ5UGFyYW1zIHtcbiAgY29uc3QgY3VycmVudFF1ZXJ5RHNKc29uID0gb3V0cHV0RFMuZ2V0RGF0YVNvdXJjZUpzb24oKVxuICBjb25zdCBjdXJyZW50T3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgY29uc3QgaXNMb2NhbERzID0gY3VycmVudFF1ZXJ5RHNKc29uPy5pc0RhdGFJbkRhdGFTb3VyY2VJbnN0YW5jZVxuICBpZiAoaXNMb2NhbERzKSB7XG4gICAgb3V0cHV0RFMuc2V0U291cmNlUmVjb3JkcyhjdXJyZW50T3JpZ2luRHMuZ2V0U291cmNlUmVjb3JkcygpKVxuICB9XG5cbiAgY29uc3QgeyB1c2VBdHRyaWJ1dGVGaWx0ZXIsIHVzZVNwYXRpYWxGaWx0ZXIsIHNvcnRPcHRpb25zLCByZXN1bHRGaWVsZHNUeXBlLCByZXN1bHREaXNwbGF5RmllbGRzLCByZXN1bHRUaXRsZUV4cHJlc3Npb24gfSA9IHF1ZXJ5SXRlbVxuICBsZXQgb3V0cHV0RmllbGRzOiBzdHJpbmdbXSB8IEltbXV0YWJsZUFycmF5PHN0cmluZz4gPSByZXN1bHREaXNwbGF5RmllbGRzXG4gIGlmIChyZXN1bHREaXNwbGF5RmllbGRzID09IG51bGwpIHtcbiAgICAvLyByZXR1cm4gYWxsIGZpZWxkcyBieSBkZWZhdWx0XG4gICAgY29uc3QgYWxsRmllbGRzU2NoZW1hID0gb3V0cHV0RFMuZ2V0U2NoZW1hKClcbiAgICBvdXRwdXRGaWVsZHMgPSBhbGxGaWVsZHNTY2hlbWE/LmZpZWxkcyA/IE9iamVjdC52YWx1ZXMoYWxsRmllbGRzU2NoZW1hLmZpZWxkcykubWFwKGZpZWxkID0+IGZpZWxkLmppbXVOYW1lKSA6IFtdXG4gIH1cbiAgY29uc3QgbWVyZ2VkUXVlcnlQYXJhbXMgPSBvdXRwdXREUy5tZXJnZVF1ZXJ5UGFyYW1zKGN1cnJlbnRPcmlnaW5Ecy5nZXRDdXJyZW50UXVlcnlQYXJhbXMoKSA/PyB7fSwge1xuICAgIHdoZXJlOiAodXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHI/LnNxbCkgPyBkYXRhU291cmNlVXRpbHMuZ2V0QXJjR0lTU1FMKHNxbEV4cHIsIG91dHB1dERTKS5zcWwgOiAnMT0xJyxcbiAgICBzcWxFeHByZXNzaW9uOiAodXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHI/LnNxbCkgPyBzcWxFeHByIDogbnVsbFxuICB9IGFzIGFueSlcblxuICAvLyBjb21wb3NlIHF1ZXJ5IHBhcmFtcyBmb3IgcXVlcnlcbiAgY29uc3QgcXVlcnlQYXJhbXM6IEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zID0ge1xuICAgIC8vIHVybDogZHMudXJsLFxuICAgIHJldHVybkdlb21ldHJ5OiB0cnVlLFxuICAgIHBhZ2UsXG4gICAgcGFnZVNpemUsXG4gICAgLi4ubWVyZ2VkUXVlcnlQYXJhbXNcbiAgfVxuICBpZiAodXNlU3BhdGlhbEZpbHRlciAmJiBzcGF0aWFsRmlsdGVyPy5nZW9tZXRyeSkge1xuICAgIGNvbnN0IHsgZ2VvbWV0cnksIHJlbGF0aW9uID0gU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdCwgYnVmZmVyIH0gPSBzcGF0aWFsRmlsdGVyXG5cbiAgICBjb25zdCBzcGF0aWFsUXVlcnlQYXJhbXM6IEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zID0ge1xuICAgICAgZ2VvbWV0cnlUeXBlOiBkYXRhU291cmNlVXRpbHMuY2hhbmdlSlNBUElHZW9tZXRyeVR5cGVUb1Jlc3RBUElHZW9tZXRyeVR5cGUoZ2VvbWV0cnkudHlwZSksXG4gICAgICBnZW9tZXRyeTogZ2VvbWV0cnkudG9KU09OKCksXG4gICAgICBzcGF0aWFsUmVsOiBtYXBKU0FQSVNwYXRpYWxSZWxUb0RzU3BhdGlhbFJlbFtyZWxhdGlvbl0sXG4gICAgICBkaXN0YW5jZTogYnVmZmVyPy5kaXN0YW5jZSxcbiAgICAgIHVuaXRzOiBidWZmZXI/LnVuaXQgPyBtYXBKU0FQSVVuaXRUb0RzVW5pdFtidWZmZXIudW5pdF0gOiB1bmRlZmluZWRcbiAgICB9XG4gICAgT2JqZWN0LmFzc2lnbihxdWVyeVBhcmFtcywgc3BhdGlhbFF1ZXJ5UGFyYW1zKVxuICB9XG5cbiAgaWYgKHNvcnRPcHRpb25zPy5sZW5ndGggPiAwKSB7XG4gICAgT2JqZWN0LmFzc2lnbihxdWVyeVBhcmFtcywge1xuICAgICAgb3JkZXJCeUZpZWxkczogc29ydE9wdGlvbnMubWFwKGl0ZW0gPT4gYCR7aXRlbS5qaW11RmllbGROYW1lfSAke2l0ZW0ub3JkZXJ9YClcbiAgICB9KVxuICB9XG5cbiAgaWYgKHJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcykge1xuICAgIGNvbnN0IGZpZWxkcyA9IGNvbWJpbmVGaWVsZHMob3V0cHV0RmllbGRzIGFzIGFueSwgcmVzdWx0VGl0bGVFeHByZXNzaW9uLCBvdXRwdXREUy5nZXRJZEZpZWxkKCkpXG4gICAgT2JqZWN0LmFzc2lnbihxdWVyeVBhcmFtcywge1xuICAgICAgb3V0RmllbGRzOiBmaWVsZHNcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIC8vIHVzZSBwb3B1cCBzZXR0aW5nXG4gICAgY29uc3QgcG9wdXBJbmZvID0gY3VycmVudE9yaWdpbkRzLmdldFBvcHVwSW5mbygpXG4gICAgLy8gcG9wdXBJbmZvIG1heSBoYXZlIGV4cHJlc3Npb25zIGluIGl0cyBmaWVsZEluZm9zXG4gICAgY29uc3QgZmllbGROYW1lcyA9IE9iamVjdC52YWx1ZXMoY3VycmVudE9yaWdpbkRzLmdldFNjaGVtYSgpLmZpZWxkcyA/PyB7fSkubWFwKGYgPT4gZi5uYW1lKVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktYm9vbGVhbi1saXRlcmFsLWNvbXBhcmVcbiAgICBjb25zdCB2YWxpZEZpZWxkSW5mb3MgPSBwb3B1cEluZm8/LmZpZWxkSW5mb3M/LmZpbHRlcihmaWVsZEluZm8gPT4gZmllbGRJbmZvLnZpc2libGUgIT09IGZhbHNlICYmIGZpZWxkTmFtZXMuaW5jbHVkZXMoZmllbGRJbmZvLmZpZWxkTmFtZSkpXG4gICAgT2JqZWN0LmFzc2lnbihxdWVyeVBhcmFtcywge1xuICAgICAgb3V0RmllbGRzOiB2YWxpZEZpZWxkSW5mb3M/Lm1hcChmaWVsZEluZm8gPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgICB9KVxuICB9XG4gIHJldHVybiBxdWVyeVBhcmFtc1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvdW50UXVlcnkgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4pOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBvdXRwdXREUy5sb2FkQ291bnQocXVlcnlQYXJhbXMsIHsgd2lkZ2V0SWQsIHJlZnJlc2g6IHRydWUgfSlcbiAgcmV0dXJuIHJlc3VsdCAhPSBudWxsID8gcmVzdWx0IDogMFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVF1ZXJ5IChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBxdWVyeVBhcmFtczogUXVlcnlQYXJhbXNcbik6IFByb21pc2U8eyByZWNvcmRzPzogRGF0YVJlY29yZFtdLCBmaWVsZHM/OiBzdHJpbmdbXSB9PiB7XG4gIGNvbnN0IHBvcHVwSW5mbyA9IG91dHB1dERTLmdldFBvcHVwSW5mbygpXG5cbiAgY29uc3QgbGF5ZXJEZWZpbml0aW9uID0gb3V0cHV0RFMuZ2V0TGF5ZXJEZWZpbml0aW9uKClcbiAgY29uc3QgZ2V0RGVmYXVsdEZpZWxkSW5mb3MgPSAoKSA9PlxuICAgIFtcbiAgICAgIHsgZmllbGROYW1lOiBsYXllckRlZmluaXRpb24/Lm9iamVjdElkRmllbGQgPz8gJ29iamVjdGlkJywgbGFiZWw6ICdPQkpFQ1RJRCcsIHRvb2x0aXA6ICcnLCB2aXNpYmxlOiB0cnVlIH1cbiAgICBdIGFzIElGaWVsZEluZm9bXVxuICBjb25zdCBmaWVsZEluZm9zID0gKChmaWVsZEluZm9zKSA9PiAoZmllbGRJbmZvcy5sZW5ndGggPyBmaWVsZEluZm9zIDogZ2V0RGVmYXVsdEZpZWxkSW5mb3MoKSkpKFxuICAgIChwb3B1cEluZm8/LmZpZWxkSW5mb3MgfHwgW10pLmZpbHRlcigoaSkgPT4gaS52aXNpYmxlKVxuICApXG4gIC8vIGNvbnN0IGZpZWxkcyA9IG91dHB1dERTLmdldFNjaGVtYSgpPy5maWVsZHNcbiAgLy8gbGV0IHNlbGVjdGVkRmllbGROYW1lc1xuICAvLyBpZiAocXVlcnlJdGVtLnJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcykge1xuICAvLyAgIHNlbGVjdGVkRmllbGROYW1lcyA9IFtdLmNvbmNhdChxdWVyeUl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcywgcXVlcnlJdGVtLnJlc3VsdFRpdGxlRmllbGRzKVxuICAvLyB9IGVsc2Uge1xuICAvLyAgIHNlbGVjdGVkRmllbGROYW1lcyA9IGZpZWxkSW5mb3MubWFwKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby5maWVsZE5hbWUpXG4gIC8vIH1cbiAgLy8gY29uc3Qgc2VsZWN0ZWRGaWVsZEppbXVOYW1lcyA9IGZpZWxkc1xuICAvLyAgID8gT2JqZWN0LmtleXMoZmllbGRzKS5maWx0ZXIoKGppbXVOYW1lKSA9PiBzZWxlY3RlZEZpZWxkTmFtZXMuaW5jbHVkZXMoZmllbGRzW2ppbXVOYW1lXS5uYW1lKSlcbiAgLy8gICA6IFtdXG4gIC8vIG91dHB1dERTLnNldFNlbGVjdGVkRmllbGRzKHNlbGVjdGVkRmllbGRKaW11TmFtZXMpXG4gIGxldCByZWNvcmRzID0gYXdhaXQgb3V0cHV0RFMubG9hZChxdWVyeVBhcmFtcywgeyB3aWRnZXRJZCB9KVxuICBpZiAocmVjb3JkcyA9PSBudWxsKSB7XG4gICAgcmVjb3JkcyA9IFtdXG4gIH1cbiAgY29uc3Qgb3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgY29uc3QgbGF5ZXJPYmplY3QgPSBhd2FpdCBnZXRMYXllck9iamVjdChvcmlnaW5EcylcbiAgcmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQpID0+IHtcbiAgICBjb25zdCBmZWF0dXJlID0gKHJlY29yZCBhcyBhbnkpLmZlYXR1cmVcbiAgICBpZiAobGF5ZXJPYmplY3QpIHtcbiAgICAgIGZlYXR1cmUuc291cmNlTGF5ZXIgPSAobGF5ZXJPYmplY3QgYXMgYW55KS5hc3NvY2lhdGVkTGF5ZXIgfHwgbGF5ZXJPYmplY3RcbiAgICB9XG4gICAgZmVhdHVyZS5sYXllciA9IGZlYXR1cmUuc291cmNlTGF5ZXJcbiAgfSlcbiAgY29uc3QgcXVlcnlSZXN1bHQgPSB7XG4gICAgcmVjb3JkcyxcbiAgICBmaWVsZHM6IGZpZWxkSW5mb3MubWFwKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby5maWVsZE5hbWUpXG4gIH1cblxuICAvLyBwdWJsaXNoIG1lc3NhZ2VcbiAgY29uc3QgZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UgPSBuZXcgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIFJlY29yZFNldENoYW5nZVR5cGUuQ3JlYXRlVXBkYXRlLCBbe1xuICAgIHJlY29yZHM6IG91dHB1dERTLmdldEFsbExvYWRlZFJlY29yZHMoKSxcbiAgICBmaWVsZHM6IHF1ZXJ5UmVzdWx0LmZpZWxkcyxcbiAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICBuYW1lOiBvdXRwdXREUy5pZCxcbiAgICBsYWJlbDogb3V0cHV0RFMuZ2V0TGFiZWwoKVxuICB9XSlcbiAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSlcblxuICByZXR1cm4gcXVlcnlSZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0TGF5ZXJPYmplY3QgKGRhdGFTb3VyY2U6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UpIHtcbiAgY29uc3QgbGF5ZXJPYmplY3QgPSBhd2FpdCBkYXRhU291cmNlLmNyZWF0ZUpTQVBJTGF5ZXJCeURhdGFTb3VyY2UoKSBhcyBfX2VzcmkuTGF5ZXJcbiAgLy8gbGF5ZXJPYmplY3QgbWF5IGJlIHVuZGVmaW5lZCBpZiB0aGUgZGF0YSBzb3VyY2UgaXMgYWRkZWQgYnkgVVJMXG4gIGlmIChsYXllck9iamVjdCkge1xuICAgIGF3YWl0IGxheWVyT2JqZWN0LmxvYWQoKVxuICB9XG4gIHJldHVybiBsYXllck9iamVjdFxufVxuXG5cbiIsIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGZlYXR1cmUgc2VsZWN0aW9uIGluIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIENvbnNvbGlkYXRlcyByZXBlYXRlZCBzZWxlY3Rpb24gbG9naWMgdG8gZm9sbG93IERSWSBwcmluY2lwbGVzLlxuICovXG5cbmltcG9ydCB0eXBlIHsgRGF0YVNvdXJjZSwgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlIH0gZnJvbSAnamltdS1jb3JlJ1xuXG4vKipcbiAqIEdldHMgdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSBmcm9tIGFuIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEByZXR1cm5zIFRoZSBvcmlnaW4gZGF0YSBzb3VyY2UsIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JpZ2luRGF0YVNvdXJjZShcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkXG4pOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCB7XG4gIGlmICghb3V0cHV0RFMpIHJldHVybiBudWxsXG4gIGNvbnN0IG9yaWdpbkRhdGFTb3VyY2VzID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVxuICByZXR1cm4gb3JpZ2luRGF0YVNvdXJjZXM/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IG51bGxcbn1cblxuLyoqXG4gKiBTZWxlY3RzIHJlY29yZHMgaW4gYm90aCB0aGUgb3JpZ2luIGRhdGEgc291cmNlIGFuZCBvdXRwdXQgZGF0YSBzb3VyY2UuXG4gKiBUaGlzIGlzIHRoZSBzdGFuZGFyZCBwYXR0ZXJuIHVzZWQgdGhyb3VnaG91dCB0aGUgd2lkZ2V0IGZvciBzZWxlY3Rpb24uXG4gKiBcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiByZWNvcmQgSURzIHRvIHNlbGVjdFxuICogQHBhcmFtIHJlY29yZHMgLSBPcHRpb25hbCBhcnJheSBvZiBGZWF0dXJlRGF0YVJlY29yZCBvYmplY3RzIGZvciBwcm9wZXIgaGlnaGxpZ2h0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICByZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXVxuKTogdm9pZCB7XG4gIGlmICghb3V0cHV0RFMpIHJldHVyblxuICBcbiAgY29uc3Qgb3JpZ2luRFMgPSBnZXRPcmlnaW5EYXRhU291cmNlKG91dHB1dERTKVxuICBcbiAgLy8gU2VsZWN0IGluIG9yaWdpbiBkYXRhIHNvdXJjZSAodGhlIGFjdHVhbCBsYXllcilcbiAgaWYgKG9yaWdpbkRTICYmIHR5cGVvZiBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCByZWNvcmRzKVxuICB9XG4gIFxuICAvLyBBbHNvIHNlbGVjdCBpbiBvdXRwdXREUyBmb3Igd2lkZ2V0J3MgaW50ZXJuYWwgc3RhdGVcbiAgaWYgKHR5cGVvZiBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCByZWNvcmRzKVxuICB9XG59XG5cbi8qKlxuICogQ2xlYXJzIHNlbGVjdGlvbiBpbiBib3RoIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWRcbik6IHZvaWQge1xuICBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhvdXRwdXREUywgW10pXG59XG5cbi8qKlxuICogUHVibGlzaGVzIGEgc2VsZWN0aW9uIGNoYW5nZSBtZXNzYWdlIGZvciB0aGUgZ2l2ZW4gcmVjb3JkcyBhbmQgZGF0YSBzb3VyY2VzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgKGVtcHR5IGFycmF5IHRvIGNsZWFyKVxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIGFsc29QdWJsaXNoVG9PdXRwdXREUyAtIFdoZXRoZXIgdG8gYWxzbyBwdWJsaXNoIGEgbWVzc2FnZSBmb3Igb3V0cHV0RFMgKGRlZmF1bHQ6IGZhbHNlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2UoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgYWxzb1B1Ymxpc2hUb091dHB1dERTOiBib29sZWFuID0gZmFsc2Vcbik6IHZvaWQge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgXG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgXG4gIGlmIChvcmlnaW5EUykge1xuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBbb3JpZ2luRFMuaWRdKVxuICAgIClcbiAgfSBlbHNlIGlmIChhbHNvUHVibGlzaFRvT3V0cHV0RFMpIHtcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3JkcywgW291dHB1dERTLmlkXSlcbiAgICApXG4gIH1cbiAgXG4gIC8vIE9wdGlvbmFsbHkgcHVibGlzaCB0byBvdXRwdXREUyBhcyB3ZWxsIChmb3Igc29tZSBlZGdlIGNhc2VzKVxuICBpZiAoYWxzb1B1Ymxpc2hUb091dHB1dERTICYmIG9yaWdpbkRTKSB7XG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIFtvdXRwdXREUy5pZF0pXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogU2VsZWN0cyByZWNvcmRzIGFuZCBwdWJsaXNoZXMgdGhlIHNlbGVjdGlvbiBtZXNzYWdlIGluIG9uZSBjYWxsLlxuICogVGhpcyBpcyB0aGUgbW9zdCBjb21tb24gcGF0dGVybiAtIHNlbGVjdGluZyByZWNvcmRzIGFuZCBub3RpZnlpbmcgdGhlIG1hcC5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHJlY29yZCBJRHMgdG8gc2VsZWN0XG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgZm9yIHByb3BlciBoaWdobGlnaHRpbmdcbiAqIEBwYXJhbSBhbHNvUHVibGlzaFRvT3V0cHV0RFMgLSBXaGV0aGVyIHRvIGFsc28gcHVibGlzaCBhIG1lc3NhZ2UgZm9yIG91dHB1dERTIChkZWZhdWx0OiBmYWxzZSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHJlY29yZElkczogc3RyaW5nW10sXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIGFsc29QdWJsaXNoVG9PdXRwdXREUzogYm9vbGVhbiA9IGZhbHNlXG4pOiB2b2lkIHtcbiAgc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMob3V0cHV0RFMsIHJlY29yZElkcywgcmVjb3JkcylcbiAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIG91dHB1dERTLCBhbHNvUHVibGlzaFRvT3V0cHV0RFMpXG59XG5cbi8qKlxuICogRmluZHMgdGhlIFwiQ2xlYXIgcmVzdWx0c1wiIGJ1dHRvbiBpbiB0aGUgRE9NLlxuICogVXNlZCB3aGVuIHByb2dyYW1tYXRpY2FsbHkgdHJpZ2dlcmluZyB0aGUgY2xlYXIgYWN0aW9uLlxuICogXG4gKiBAcmV0dXJucyBUaGUgY2xlYXIgYnV0dG9uIGVsZW1lbnQsIG9yIG51bGwgaWYgbm90IGZvdW5kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kQ2xlYXJSZXN1bHRzQnV0dG9uKCk6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCB7XG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b25bYXJpYS1sYWJlbD1cIkNsZWFyIHJlc3VsdHNcIl0nKSBhcyBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGxcbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBfd2lkZ2V0TGFiZWw6ICdRdWVyeVNpbXBsZScsXG4gIHJlc2V0OiAnUmVzZXQnLFxuICBzZWFyY2hMYXllcjogJ1NlYXJjaCBMYXllcicsXG4gIGFwcGx5OiAnU2VhcmNoJyxcbiAgbm9EYXRhQXZhaWxhYmxlOiAnRXJyb3IgaW4gbG9hZGluZyBkYXRhJyxcbiAgbm9RdWVyeUl0ZW06ICdObyBxdWVyeScsXG4gIG5ld1F1ZXJ5SGludDogJ0FkZCBjb250ZW50IGJ5IGNsaWNraW5nIHRoZSBcIntsYWJlbH1cIiBidXR0b24gb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFuZWwnLFxuICBhdHRyaWJ1dGVGaWx0ZXI6ICdBdHRyaWJ1dGUgZmlsdGVyJyxcbiAgc3BhdGlhbEZpbHRlcjogJ1NwYXRpYWwgZmlsdGVyJyxcbiAgc3BhdGlhbEZpbHRlclR5cGVfQ3VycmVudE1hcEV4dGVudDogJ0N1cnJlbnQgbWFwIGV4dGVudCcsXG4gIHNwYXRpYWxGaWx0ZXJUeXBlX0ludGVyYWN0aXZlRHJhd01vZGU6ICdEcmF3biBncmFwaGljJyxcbiAgcmVzdWx0czogJ1Jlc3VsdHMnLFxuICBmZWF0dXJlc0Rpc3BsYXllZDogJ0ZlYXR1cmVzIGRpc3BsYXllZCcsXG4gIGNsZWFyUmVzdWx0OiAnQ2xlYXIgcmVzdWx0cycsXG4gIGNoZWNrUmVzdWx0OiAnQ2hlY2sgcmVzdWx0cycsXG4gIG1hcE11c3RCZVZpc2libGU6ICdNYXAgbXVzdCBiZSB2aXNpYmxlJyxcbiAgY2hvb3NlRmlsdGVyVHlwZTogJ0Nob29zZSB0aGUgZmlsdGVyIHR5cGUnLFxuICBjaG9vc2VHZW9tZXRyeVR5cGU6ICdDaG9vc2UgdGhlIGdlb21ldHJ5IHR5cGUnLFxuICBjbGVhckRyYXdpbmc6ICdDbGVhciB0aGUgZ3JhcGhpYyB3aGVuIGFwcGx5aW5nJyxcbiAgZmVhdHVyZUZyb21EczogJ1NlbGVjdGluZyBmZWF0dXJlcyBmcm9tIGRhdGEgc291cmNlJyxcbiAgZmVhdHVyZUZyb21NYXA6ICdHZW9tZXRyaWVzIGZyb20gYSBtYXAnLFxuICBjaG9vc2VGaWx0ZXJMYXllcjogJ0Nob29zZSBhIGZpbHRlciBsYXllcicsXG4gIHNlbGVjdGVkUmVjb3JkczogJ3tudW19IHJlY29yZHMgYXJlIHNlbGVjdGVkIGZvciB0aGUgZmlsdGVyJyxcbiAgc3BhdGlhbE5vdEF2YWlsYWJsZTogJ1NwYXRpYWwgZmlsdGVyIGlzIG5vdCBhdmFpbGFibGUgaGVyZS4nLFxuICBzcGF0aWFsTm90QXZhaWxhYmxlRGVzYzogJ1NwYXRpYWwgZmlsdGVyIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIGEgZGF0YSBzb3VyY2UgdGhhdCBhbHJlYWR5IGNvbnRhaW5zIGEgc3BhdGlhbCBxdWVyeS4nLFxuICBwcmVjb25maWd1cmVkOiAnUHJlY29uZmlndXJlZCcsXG4gIHJ1bnRpbWU6ICdSdW50aW1lJyxcbiAgc2VsZWN0TG9hZGVkOiAnU2VsZWN0IGxvYWRlZCcsXG4gIHJldHJpZXZpbmc6ICdSZXRyaWV2aW5nIHF1ZXJ5IHJlc3VsdHMuLi4nLFxuICB6b29tVG9TZWxlY3RlZDogJ1pvb20gdG8gc2VsZWN0ZWQnLFxuICBxdWVyeVRhYjogJ1F1ZXJ5JyxcbiAgcmVzdWx0c1RhYjogJ1Jlc3VsdHMnLFxuICBleHBhbmRBbGw6ICdFeHBhbmQgYWxsJyxcbiAgY29sbGFwc2VBbGw6ICdDb2xsYXBzZSBhbGwnLFxuICBhZGRUb01hcDogJ0FkZCB0byBtYXAnXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgTGF5b3V0SXRlbVNpemVNb2RlcyB9IGZyb20gJ2ppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZSdcbmltcG9ydCB7IFF1ZXJ5V2lkZ2V0Q29udGV4dCB9IGZyb20gJy4vd2lkZ2V0LWNvbnRleHQnXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VBdXRvSGVpZ2h0ICgpIHtcbiAgY29uc3QgbGF5b3V0SW5mbyA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlXaWRnZXRDb250ZXh0KVxuICBsZXQgbGF5b3V0SWRcbiAgbGV0IGxheW91dEl0ZW1JZFxuICBpZiAobGF5b3V0SW5mby5pbmNsdWRlcygnOicpKSB7XG4gICAgY29uc3QgciA9IGxheW91dEluZm8uc3BsaXQoJzonKVxuICAgIGxheW91dElkID0gclswXVxuICAgIGxheW91dEl0ZW1JZCA9IHJbMV1cbiAgfVxuICBjb25zdCBpc0F1dG8gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGxheW91dEl0ZW0gPSBzdGF0ZS5hcHBDb25maWcubGF5b3V0c1tsYXlvdXRJZF0/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdXG4gICAgcmV0dXJuIGxheW91dEl0ZW0/LnNldHRpbmc/LmF1dG9Qcm9wcz8uaGVpZ2h0ID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG9cbiAgfSlcblxuICByZXR1cm4gaXNBdXRvXG59XG5cblxuIiwiaW1wb3J0IGljb25XYXJuaW5nIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZydcbmltcG9ydCBpY29uRXJyb3IgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZydcbmltcG9ydCBhcnJvd05hdkJhY2sgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmcnXG5pbXBvcnQgYXJyb3dSaWdodCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC5zdmcnXG5pbXBvcnQgdG9vbERlbGV0ZSBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xuaW1wb3J0IGljb25Nb3JlIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2FwcGxpY2F0aW9uL21vcmUtaG9yaXpvbnRhbC5zdmcnXG5cbmV4cG9ydCBjb25zdCBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCA9ICgpID0+ICh7XG4gIGljb25NYXA6IHtcbiAgICBpY29uUXVlcnk6IHJlcXVpcmUoJy4uLy4uL2ljb24uc3ZnJyksXG4gICAgaWNvbldhcm5pbmcsXG4gICAgaWNvbkVycm9yLFxuICAgIGFycm93TmF2QmFjayxcbiAgICBhcnJvd1JpZ2h0LFxuICAgIHRvb2xEZWxldGUsXG4gICAgaWNvbk1vcmVcbiAgfVxufSlcblxuXG5cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgUXVlcnlXaWRnZXRDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxzdHJpbmc+KG51bGwpXG5cblxuIiwiaW1wb3J0IHsgQmFzZVZlcnNpb25NYW5hZ2VyIH0gZnJvbSAnamltdS1jb3JlJ1xuXG5jbGFzcyBWZXJzaW9uTWFuYWdlciBleHRlbmRzIEJhc2VWZXJzaW9uTWFuYWdlciB7XG4gIHZlcnNpb25zID0gW3tcbiAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgIGRlc2NyaXB0aW9uOiAnVGhlIGZpcnN0IHZlcnNpb24uJyxcbiAgICB1cGdyYWRlcjogKG9sZENvbmZpZykgPT4ge1xuICAgICAgcmV0dXJuIG9sZENvbmZpZ1xuICAgIH1cbiAgfV1cbn1cblxuZXhwb3J0IGNvbnN0IHZlcnNpb25NYW5hZ2VyID0gbmV3IFZlcnNpb25NYW5hZ2VyKClcblxuXG5cbiIsIi8qKlxuICogV2lkZ2V0IHZlcnNpb24gbnVtYmVyLlxuICogVXBkYXRlIHRoaXMgd2hlbiByZWxlYXNpbmcgYSBuZXcgdmVyc2lvbiBvZiB0aGUgd2lkZ2V0LlxuICogVGhpcyB2ZXJzaW9uIGlzIGRpc3BsYXllZCBpbiB0aGUgd2lkZ2V0IGZvb3RlciBmb3IgdXNlciByZWZlcmVuY2UuXG4gKi9cbmV4cG9ydCBjb25zdCBXSURHRVRfVkVSU0lPTiA9ICcxLjE5LjAnXG5cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fZW1vdGlvbl9yZWFjdF9qc3hfcnVudGltZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2FyY2dpc19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2NvcmVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9sYXlvdXRzX2xheW91dF9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdGhlbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX2Jhc2ljX3NxbF9leHByZXNzaW9uX3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfd2lkZ2V0c19zaGFyZWRfY29kZV9jb21tb25fXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIvKipcclxuICogV2VicGFjayB3aWxsIHJlcGxhY2UgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gd2l0aCBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgdG8gc2V0IHRoZSBwdWJsaWMgcGF0aCBkeW5hbWljYWxseS5cclxuICogVGhlIHJlYXNvbiB3aHkgd2UgY2FuJ3Qgc2V0IHRoZSBwdWJsaWNQYXRoIGluIHdlYnBhY2sgY29uZmlnIGlzOiB3ZSBjaGFuZ2UgdGhlIHB1YmxpY1BhdGggd2hlbiBkb3dubG9hZC5cclxuICogKi9cclxuX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB3aW5kb3cuamltdUNvbmZpZy5iYXNlVXJsXHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIEFsbFdpZGdldFByb3BzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgUGFwZXIsIFdpZGdldFBsYWNlaG9sZGVyIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHR5cGUgSU1Db25maWcsIFF1ZXJ5QXJyYW5nZVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcblxuaW1wb3J0IHsgdmVyc2lvbk1hbmFnZXIgfSBmcm9tICcuLi92ZXJzaW9uLW1hbmFnZXInXG5pbXBvcnQgeyBRdWVyeVRhc2tMaXN0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QnXG5pbXBvcnQgeyBUYXNrTGlzdElubGluZSB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LWlubGluZSdcbmltcG9ydCB7IFRhc2tMaXN0UG9wcGVyV3JhcHBlciB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyJ1xuaW1wb3J0IHsgUXVlcnlXaWRnZXRDb250ZXh0IH0gZnJvbSAnLi93aWRnZXQtY29udGV4dCdcbmltcG9ydCB7IGRlYnVnTG9nZ2VyIH0gZnJvbSAnLi9kZWJ1Zy1sb2dnZXInXG5pbXBvcnQgeyBXSURHRVRfVkVSU0lPTiB9IGZyb20gJy4uL3ZlcnNpb24nXG5cbmNvbnN0IHsgaWNvbk1hcCB9ID0gZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAoKVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaWRnZXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PEFsbFdpZGdldFByb3BzPElNQ29uZmlnPiwgeyBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0gfT4ge1xuICBzdGF0aWMgdmVyc2lvbk1hbmFnZXIgPSB2ZXJzaW9uTWFuYWdlclxuXG4gIHN0YXRlOiB7IGluaXRpYWxRdWVyeVZhbHVlPzogeyBzaG9ydElkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfSB9ID0ge31cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcygpXG4gICAgLy8gTGlzdGVuIGZvciBoYXNoIGNoYW5nZXMgdG8gZGV0ZWN0IHdoZW4gaGFzaCBwYXJhbWV0ZXJzIGFyZSB1cGRhdGVkXG4gICAgLy8gVGhpcyBpcyBuZWVkZWQgd2hlbiBIZWxwZXJTaW1wbGUgb3BlbnMgdGhlIHdpZGdldCB3aXRoIGEgaGFzaCBwYXJhbWV0ZXJcbiAgICAvLyBvciB3aGVuIGhhc2ggcGFyYW1ldGVycyBjaGFuZ2Ugd2hpbGUgdGhlIHdpZGdldCBpcyBhbHJlYWR5IG1vdW50ZWRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzKVxuICAgIFxuICAgIC8vIEFsc28gY2hlY2sgYWZ0ZXIgYSBzaG9ydCBkZWxheSB0byBjYXRjaCBjYXNlcyB3aGVyZSBoYXNoIHdhcyBhbHJlYWR5IHByZXNlbnRcbiAgICAvLyB3aGVuIHdpZGdldCB3YXMgb3BlbmVkIChlLmcuLCBieSBIZWxwZXJTaW1wbGUgb3BlbmluZyB0aGUgd2lkZ2V0KVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jaGVja1F1ZXJ5U3RyaW5nRm9yU2hvcnRJZHMoKVxuICAgIH0sIDEwMClcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIC8vIENsZWFuIHVwIGhhc2hjaGFuZ2UgbGlzdGVuZXJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzKVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogQWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+KSB7XG4gICAgaWYgKHByZXZQcm9wcy5jb25maWcucXVlcnlJdGVtcyAhPT0gdGhpcy5wcm9wcy5jb25maWcucXVlcnlJdGVtcykge1xuICAgICAgdGhpcy5jaGVja1F1ZXJ5U3RyaW5nRm9yU2hvcnRJZHMoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgaGFzaCBwYXJhbWV0ZXIgZnJvbSB0aGUgVVJMIGFmdGVyIGl0IGhhcyBiZWVuIHVzZWQgdG8gcG9wdWxhdGUgYSBxdWVyeS5cbiAgICogVGhpcyBwcmV2ZW50cyB0aGUgcGFyYW1ldGVyIGZyb20gYmVpbmcgcmUtYXBwbGllZCB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJpZXMuXG4gICAqL1xuICByZW1vdmVIYXNoUGFyYW1ldGVyID0gKHNob3J0SWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBpZiAoIWhhc2gpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgXG4gICAgaWYgKHVybFBhcmFtcy5oYXMoc2hvcnRJZCkpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdXJsUGFyYW1zLmdldChzaG9ydElkKVxuICAgICAgdXJsUGFyYW1zLmRlbGV0ZShzaG9ydElkKVxuICAgICAgY29uc3QgbmV3SGFzaCA9IHVybFBhcmFtcy50b1N0cmluZygpXG4gICAgICAvLyBVcGRhdGUgVVJMIHdpdGhvdXQgdHJpZ2dlcmluZyBuYXZpZ2F0aW9uXG4gICAgICAvLyBJZiBubyBoYXNoIHBhcmFtcyByZW1haW4sIHJlbW92ZSBoYXNoIGVudGlyZWx5LCBvdGhlcndpc2Uga2VlcCB0aGUgaGFzaFxuICAgICAgY29uc3QgbmV3VXJsID0gbmV3SGFzaCBcbiAgICAgICAgPyBgJHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9JHt3aW5kb3cubG9jYXRpb24uc2VhcmNofSMke25ld0hhc2h9YCBcbiAgICAgICAgOiBgJHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9JHt3aW5kb3cubG9jYXRpb24uc2VhcmNofWBcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ2hhc2gtcmVtb3ZlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBzaG9ydElkOiBzaG9ydElkLFxuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIG5ld0hhc2g6IG5ld0hhc2gsXG4gICAgICAgIG5ld1VybDogbmV3VXJsXG4gICAgICB9KVxuICAgICAgXG4gICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgJycsIG5ld1VybClcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgdGhlIHN0YXRlIHNvIGl0IHdvbid0IHRyaWdnZXIgYWdhaW5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID09PSBzaG9ydElkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbml0aWFsUXVlcnlWYWx1ZTogdW5kZWZpbmVkIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyB0aGUgVVJMIGhhc2ggcGFyYW1ldGVycyBmb3IgYW55IHNob3J0SWRzIHRoYXQgbWF0Y2ggcXVlcnkgaXRlbXMuXG4gICAqIElmIGZvdW5kLCBzdG9yZXMgdGhlIHZhbHVlIHRvIGJlIHVzZWQgdG8gYXV0by1wb3B1bGF0ZSBhbmQgZXhlY3V0ZSB0aGUgcXVlcnkuXG4gICAqIEV4cGVyaWVuY2UgQnVpbGRlciB1c2VzIGhhc2gtYmFzZWQgVVJMIHBhcmFtZXRlcnMgKGUuZy4sICNwaW49MjIyMzA1OTAxMykuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBwcmlvcml0aXplcyB0aGUgZmlyc3QgbWF0Y2hpbmcgc2hvcnRJZCBmb3VuZCBpbiB0aGUgcXVlcnkgaXRlbXMgb3JkZXIuXG4gICAqIElmIG11bHRpcGxlIGhhc2ggcGFyYW1ldGVycyBleGlzdCwgb25seSB0aGUgZmlyc3QgbWF0Y2ggaXMgdXNlZC5cbiAgICovXG4gIGNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xuICAgIGlmICghY29uZmlnLnF1ZXJ5SXRlbXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBhbGwgc2hvcnRJZHMgZnJvbSBxdWVyeSBpdGVtc1xuICAgIGNvbnN0IHNob3J0SWRzID0gY29uZmlnLnF1ZXJ5SXRlbXNcbiAgICAgIC5tYXAoaXRlbSA9PiBpdGVtLnNob3J0SWQpXG4gICAgICAuZmlsdGVyKHNob3J0SWQgPT4gc2hvcnRJZCAhPSBudWxsICYmIHNob3J0SWQudHJpbSgpICE9PSAnJylcblxuICAgIGlmIChzaG9ydElkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCBVUkwgaGFzaCBmcmFnbWVudCBwYXJhbWV0ZXJzIChFeEIgdXNlcyAjIGZvciBwYXJhbXMpXG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSAvLyBSZW1vdmUgdGhlICNcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG5cbiAgICAvLyBMb2cgaGFzaCBjaGVjayBmb3IgZGVidWdnaW5nXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdoYXNoLWNoZWNrJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaGFzaDogaGFzaCxcbiAgICAgIGF2YWlsYWJsZVNob3J0SWRzOiBzaG9ydElkcyxcbiAgICAgIGN1cnJlbnRTdGF0ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZVxuICAgIH0pXG5cbiAgICAvLyBGaW5kIHRoZSBmaXJzdCBtYXRjaGluZyBzaG9ydElkIChwcmlvcml0aXplIGZpcnN0IG1hdGNoIGluIHF1ZXJ5IGl0ZW1zIG9yZGVyKVxuICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBvbmx5IHNldCBzdGF0ZSBvbmNlIHBlciBjaGVjayBhbmQgbWFpbnRhaW5zIGNvbnNpc3RlbnQgYmVoYXZpb3JcbiAgICBmb3IgKGNvbnN0IHNob3J0SWQgb2Ygc2hvcnRJZHMpIHtcbiAgICAgIGlmICh1cmxQYXJhbXMuaGFzKHNob3J0SWQpKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdXJsUGFyYW1zLmdldChzaG9ydElkKVxuICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQgdG8gYXZvaWQgdW5uZWNlc3NhcnkgcmUtcmVuZGVyc1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCAhPT0gc2hvcnRJZCB8fCB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhc2gtZGV0ZWN0ZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICBzaG9ydElkOiBzaG9ydElkLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcHJldmlvdXNTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgICAgcHJldmlvdXNWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbml0aWFsUXVlcnlWYWx1ZTogeyBzaG9ydElkLCB2YWx1ZSB9IH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXNraXBwZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICBzaG9ydElkOiBzaG9ydElkLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcmVhc29uOiAndmFsdWUtdW5jaGFuZ2VkJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC8vIEV4aXQgYWZ0ZXIgZmlyc3QgbWF0Y2hcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBubyBoYXNoIHBhcmFtZXRlcnMgbWF0Y2ggYW55IHNob3J0SWQsIGNsZWFyIHRoZSBzdGF0ZVxuICAgIC8vIFRoaXMgaGFuZGxlcyBjYXNlcyB3aGVyZSBoYXNoIHBhcmFtZXRlcnMgd2VyZSByZW1vdmVkXG4gICAgaWYgKHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLWNsZWFyZWQnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcHJldmlvdXNTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLnNob3J0SWQsXG4gICAgICAgIHByZXZpb3VzVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUudmFsdWUsXG4gICAgICAgIHJlYXNvbjogJ25vLW1hdGNoaW5nLWhhc2gtcGFyYW1zJ1xuICAgICAgfSlcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbml0aWFsUXVlcnlWYWx1ZTogdW5kZWZpbmVkIH0pXG4gICAgfVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGNvbmZpZywgaWQsIGljb24sIGxhYmVsLCBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkLCBjb250cm9sbGVyV2lkZ2V0SWQgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB3aWRnZXRMYWJlbCA9IHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHtcbiAgICAgIGlkOiAnX3dpZGdldExhYmVsJyxcbiAgICAgIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuX3dpZGdldExhYmVsXG4gICAgfSlcbiAgICBpZiAoIWNvbmZpZy5xdWVyeUl0ZW1zPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiA8V2lkZ2V0UGxhY2Vob2xkZXIgaWNvbj17aWNvbk1hcC5pY29uUXVlcnl9IHdpZGdldElkPXt0aGlzLnByb3BzLmlkfSBuYW1lPXt3aWRnZXRMYWJlbH0gLz5cbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmFycmFuZ2VUeXBlID09PSBRdWVyeUFycmFuZ2VUeXBlLlBvcHBlciAmJiAhY29udHJvbGxlcldpZGdldElkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgICAgaWQ9ezB9XG4gICAgICAgICAgICBpY29uPXtpY29ufVxuICAgICAgICAgICAgcG9wcGVyVGl0bGU9e2xhYmVsfVxuICAgICAgICAgICAgbWluU2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8ubWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5kZWZhdWx0U2l6ZX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8UXVlcnlUYXNrTGlzdCB3aWRnZXRJZD17aWR9IGlzSW5Qb3BwZXIgcXVlcnlJdGVtcz17Y29uZmlnLnF1ZXJ5SXRlbXN9IGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX0gY2xhc3NOYW1lPSdwYi00JyBpbml0aWFsUXVlcnlWYWx1ZT17dGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZX0gb25IYXNoUGFyYW1ldGVyVXNlZD17dGhpcy5yZW1vdmVIYXNoUGFyYW1ldGVyfSAvPlxuICAgICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmFycmFuZ2VUeXBlID09PSBRdWVyeUFycmFuZ2VUeXBlLklubGluZSAmJiAhY29udHJvbGxlcldpZGdldElkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgPFRhc2tMaXN0SW5saW5lXG4gICAgICAgICAgICB3aWRnZXRJZD17aWR9XG4gICAgICAgICAgICB3aWRnZXRMYWJlbD17bGFiZWx9XG4gICAgICAgICAgICB3cmFwPXtjb25maWcuYXJyYW5nZVdyYXB9XG4gICAgICAgICAgICBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc31cbiAgICAgICAgICAgIG1pblNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/Lm1pblNpemV9XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8uZGVmYXVsdFNpemV9XG4gICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZT17dGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZX1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMucmVtb3ZlSGFzaFBhcmFtZXRlcn1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFBhcGVyIHZhcmlhbnQ9J2ZsYXQnIGNsYXNzTmFtZT0namltdS13aWRnZXQgcnVudGltZS1xdWVyeScgY3NzPXtjc3NgXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGB9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndpZGdldC1oZWFkZXJcIiBjc3M9e2Nzc2BcbiAgICAgICAgICBwYWRkaW5nOiA2cHggMTZweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZSk7XG4gICAgICAgIGB9PlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ3aWRnZXQtdGl0bGVcIiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICB7bGFiZWwgfHwgd2lkZ2V0TGFiZWx9XG4gICAgICAgICAgPC9oMz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgYH0+XG4gICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza0xpc3Qgd2lkZ2V0SWQ9e2lkfSBxdWVyeUl0ZW1zPXtjb25maWcucXVlcnlJdGVtc30gZGVmYXVsdFBhZ2VTaXplPXtjb25maWcuZGVmYXVsdFBhZ2VTaXplfSBpbml0aWFsUXVlcnlWYWx1ZT17dGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZX0gb25IYXNoUGFyYW1ldGVyVXNlZD17dGhpcy5yZW1vdmVIYXNoUGFyYW1ldGVyfS8+XG4gICAgICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGUub3JnXG4gICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9QYXBlcj5cbiAgICApXG4gIH1cbn1cblxuXG4gZXhwb3J0IGZ1bmN0aW9uIF9fc2V0X3dlYnBhY2tfcHVibGljX3BhdGhfXyh1cmwpIHsgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB1cmwgfSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==