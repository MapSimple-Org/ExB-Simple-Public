System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/sql-expression-runtime","jimu-theme","widgets/shared-code/common","jimu-layouts/layout-runtime","jimu-core/react"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	var __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_react__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_react__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_react__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/filled/directional/down.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/filled/directional/down.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownFilled: () => (/* binding */ DownFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/down.svg */ "./jimu-icons/svg/filled/directional/down.svg");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/filled/directional/right.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/filled/directional/right.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightFilled: () => (/* binding */ RightFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/right.svg */ "./jimu-icons/svg/filled/directional/right.svg");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowLeftOutlined: () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/collapse-all.tsx":
/*!**********************************************************!*\
  !*** ./jimu-icons/outlined/directional/collapse-all.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollapseAllOutlined: () => (/* binding */ CollapseAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/collapse-all.svg */ "./jimu-icons/svg/outlined/directional/collapse-all.svg");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CollapseAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/expand-all.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/expand-all.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExpandAllOutlined: () => (/* binding */ ExpandAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/expand-all.svg */ "./jimu-icons/svg/outlined/directional/expand-all.svg");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ExpandAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/trash.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TrashOutlined: () => (/* binding */ TrashOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/svg/filled/directional/down.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/down.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m14 4-6 8-6-8z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/directional/right.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/right.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m4 2 8 6-8 6z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/collapse-all.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/collapse-all.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/expand-all.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/expand-all.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/error.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/error.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/icon.svg":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/query-simple/icon.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" d=\"M8.5 3A5.5 5.5 0 0 1 14 8.5a5.5 5.5 0 0 1-1.273 3.527l4.053 4.054a.75.75 0 1 1-1.06 1.06l-4.054-4.053a5.5 5.5 0 0 1-3.527 1.273 5.5 5.5 0 1 1 0-11H8.5zm0 1.5h-.361a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\"></path><rect width=\"19\" height=\"19\" x=\".5\" y=\".5\" stroke=\"#000\" rx=\"1.5\"></rect></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/config.ts":
/*!************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateToolType: () => (/* binding */ CreateToolType),
/* harmony export */   FieldsType: () => (/* binding */ FieldsType),
/* harmony export */   ListDirection: () => (/* binding */ ListDirection),
/* harmony export */   PagingType: () => (/* binding */ PagingType),
/* harmony export */   QueryArrangeType: () => (/* binding */ QueryArrangeType),
/* harmony export */   ResultSelectMode: () => (/* binding */ ResultSelectMode),
/* harmony export */   SelectionType: () => (/* binding */ SelectionType),
/* harmony export */   SortDirection: () => (/* binding */ SortDirection),
/* harmony export */   SpatialFilterType: () => (/* binding */ SpatialFilterType),
/* harmony export */   SpatialRelation: () => (/* binding */ SpatialRelation),
/* harmony export */   SymbolType: () => (/* binding */ SymbolType),
/* harmony export */   UnitType: () => (/* binding */ UnitType),
/* harmony export */   mapJSAPISpatialRelToDsSpatialRel: () => (/* binding */ mapJSAPISpatialRelToDsSpatialRel),
/* harmony export */   mapJSAPIUnitToDsUnit: () => (/* binding */ mapJSAPIUnitToDsUnit)
/* harmony export */ });
var CreateToolType;
(function (CreateToolType) {
    CreateToolType["Point"] = "Point";
    CreateToolType["Polyline"] = "Polyline";
    CreateToolType["Polygon"] = "Polygon";
    CreateToolType["Rectangle"] = "Rectangle";
    CreateToolType["Circle"] = "Circle";
})(CreateToolType || (CreateToolType = {}));
var SelectionType;
(function (SelectionType) {
    SelectionType["NewSelection"] = "NEW_SELECTION";
    SelectionType["AddToSelection"] = "ADD_TO_CURRENT_SELECTION";
    SelectionType["RemoveFromSelection"] = "REMOVE_FROM_CURRENT_SELECTION";
    SelectionType["SubsetSelection"] = "SUBSET_FROM_CURRENT_SELECTION";
    SelectionType["SwitchSelection"] = "SWITCH_CURRENT_SELECTION";
})(SelectionType || (SelectionType = {}));
var QueryArrangeType;
(function (QueryArrangeType) {
    QueryArrangeType["Block"] = "BLOCK";
    QueryArrangeType["Inline"] = "INLINE";
    QueryArrangeType["Popper"] = "POPPER";
})(QueryArrangeType || (QueryArrangeType = {}));
var SpatialFilterType;
(function (SpatialFilterType) {
    SpatialFilterType["CurrentMapExtent"] = "CurrentMapExtent";
    SpatialFilterType["InteractiveDrawMode"] = "InteractiveDrawMode";
    SpatialFilterType["None"] = "";
})(SpatialFilterType || (SpatialFilterType = {}));
var SpatialRelation;
(function (SpatialRelation) {
    SpatialRelation["Intersect"] = "intersects";
    SpatialRelation["Contain"] = "contains";
    SpatialRelation["Cross"] = "crosses";
    SpatialRelation["EnvelopeIntersect"] = "envelope-intersects";
    SpatialRelation["IndexIntersect"] = "index-intersects";
    SpatialRelation["Overlap"] = "overlaps";
    SpatialRelation["Touch"] = "touches";
    SpatialRelation["Within"] = "within";
})(SpatialRelation || (SpatialRelation = {}));
const mapJSAPISpatialRelToDsSpatialRel = {
    [SpatialRelation.Intersect]: 'esriSpatialRelIntersects',
    [SpatialRelation.Contain]: 'esriSpatialRelContains',
    [SpatialRelation.Cross]: 'esriSpatialRelCrosses',
    [SpatialRelation.EnvelopeIntersect]: 'esriSpatialRelEnvelopeIntersects',
    [SpatialRelation.IndexIntersect]: 'esriSpatialRelIndexIntersects',
    [SpatialRelation.Overlap]: 'esriSpatialRelOverlaps',
    [SpatialRelation.Touch]: 'esriSpatialRelTouches',
    [SpatialRelation.Within]: 'esriSpatialRelWithin'
};
var UnitType;
(function (UnitType) {
    UnitType["Miles"] = "Miles";
    UnitType["Kilometers"] = "Kilometers";
    UnitType["Feet"] = "Feet";
    UnitType["Meters"] = "Meters";
    UnitType["NauticalMiles"] = "NauticalMiles";
})(UnitType || (UnitType = {}));
const mapJSAPIUnitToDsUnit = {
    [UnitType.Miles]: 'esriSRUnit_StatuteMile',
    [UnitType.Kilometers]: 'esriSRUnit_Kilometer',
    [UnitType.Feet]: 'esriSRUnit_Foot',
    [UnitType.Meters]: 'esriSRUnit_Meter',
    [UnitType.NauticalMiles]: 'esriSRUnit_NauticalMile'
};
var ListDirection;
(function (ListDirection) {
    ListDirection["Horizontal"] = "Horizontal";
    ListDirection["Vertical"] = "Vertical";
})(ListDirection || (ListDirection = {}));
var PagingType;
(function (PagingType) {
    PagingType["MultiPage"] = "MultiPage";
    PagingType["LazyLoad"] = "LazyLoad";
    PagingType["Simple"] = "Simple";
})(PagingType || (PagingType = {}));
var FieldsType;
(function (FieldsType) {
    FieldsType["PopupSetting"] = "PopupSetting";
    FieldsType["SelectAttributes"] = "SelectAttributes";
})(FieldsType || (FieldsType = {}));
var SortDirection;
(function (SortDirection) {
    SortDirection["Asc"] = "Asc";
    SortDirection["Desc"] = "Desc";
})(SortDirection || (SortDirection = {}));
var ResultSelectMode;
(function (ResultSelectMode) {
    ResultSelectMode["Single"] = "Single";
    ResultSelectMode["Multiple"] = "Multiple";
})(ResultSelectMode || (ResultSelectMode = {}));
var SymbolType;
(function (SymbolType) {
    SymbolType["DefaultSymbol"] = "DefaultSymbol";
    SymbolType["CustomSymbol"] = "CustomSymbol";
})(SymbolType || (SymbolType = {}));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAddToMapAction: () => (/* binding */ createAddToMapAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Custom "Add to Map" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Show on Map" action with a custom
 * implementation that uses QuerySimple's selection process (selectRecordsAndPublish).
 * This ensures consistent behavior with query results and proper integration
 * with the widget's "Clear results" functionality.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Add to Map" data action that uses QuerySimple's selection process.
 *
 * This action replaces the framework's "Show on Map" action and ensures consistent
 * behavior with QuerySimple's query results by using the same selection mechanism.
 *
 * @param widgetId - The widget ID that provides this action
 * @param outputDS - The output data source (used for selection on the origin layer)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration (for zoomToSelected setting)
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns A DataAction object that can be used by DataActionList
 */
function createAddToMapAction(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    return {
        id: `${widgetId}-addToMap`,
        name: 'addToMap',
        label: intl.formatMessage({ id: 'addToMap', defaultMessage: 'Add to map' }),
        // Icon matches the framework's "Show on Map" action for consistency
        icon: (__webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg"),
        // Note: Index may not control position if extraActions are always appended after framework actions
        index: -100,
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records
            if (!dataSets || dataSets.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'No data sets'
                });
                return false;
            }
            // Check if we have records and output data source
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            const supported = hasRecords && !!outputDS;
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                result: supported,
                hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return supported;
        }),
        /**
         * Executes the action by selecting records using QuerySimple's selection process.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            if (!outputDS || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: !outputDS ? 'No outputDS' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            // Get record IDs
            const recordIds = allRecords.map(record => record.getId());
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                recordsCount: allRecords.length,
                recordIds: recordIds.slice(0, 10), // Log first 10 IDs
                outputDSId: outputDS.id
            });
            // Use QuerySimple's selection process - selects on origin layer and publishes selection messages
            // This ensures consistent behavior with query results and proper integration with "Clear results"
            try {
                (0,_runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, allRecords, true);
                // Note: Zoom is now handled by the separate "Zoom To" action in the DataActionList
                // Users can click "Zoom To" from the action menu if they want to zoom to selected records
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: true,
                    message: 'Successfully selected records and published selection message'
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/index.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getExtraActions: () => (/* binding */ getExtraActions)
/* harmony export */ });
/* harmony import */ var _add_to_map_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-to-map-action */ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx");
/* harmony import */ var _zoom_to_action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./zoom-to-action */ "./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx");


/**
 * QuerySimple Custom Data Actions
 *
 * Returns custom data actions for the widget.
 * Includes custom "Zoom To" and "Add to Map" actions that use QuerySimple's processes.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source (null/undefined if not available)
 * @param mapView - The map view (null/undefined if not available)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns Array of custom DataAction objects (empty if conditions not met)
 */
function getExtraActions(widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected) {
    const actions = [];
    // Add "Zoom To" action if we have mapView and intl
    if (mapView && intl) {
        actions.push((0,_zoom_to_action__WEBPACK_IMPORTED_MODULE_1__.createZoomToAction)(widgetId, mapView, intl));
    }
    // Add "Add to Map" action if we have outputDS and intl
    if (outputDS && intl) {
        actions.push((0,_add_to_map_action__WEBPACK_IMPORTED_MODULE_0__.createAddToMapAction)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected));
    }
    return actions;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/zoom-to-action.tsx ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createZoomToAction: () => (/* binding */ createZoomToAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _runtime_zoom_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runtime/zoom-utils */ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts");
/**
 * Custom "Zoom To" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Zoom To" action with a custom
 * implementation that uses QuerySimple's zoom logic (mapView.goTo with padding).
 * This ensures consistent zoom behavior with proper padding.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Zoom To" data action that uses QuerySimple's zoom logic.
 *
 * This action replaces the framework's "Zoom To" action and ensures consistent
 * zoom behavior with padding using mapView.goTo().
 *
 * @param widgetId - The widget ID that provides this action
 * @param mapView - The map view to zoom (MapView or SceneView)
 * @param intl - The Intl object for internationalization
 * @returns A DataAction object that can be used by DataActionList
 */
function createZoomToAction(widgetId, mapView, intl) {
    return {
        id: `${widgetId}-zoomTo`,
        name: 'querySimpleZoomTo', // Use unique name to avoid conflict with framework action
        label: intl.formatMessage({ id: 'zoomToSelected', defaultMessage: 'Zoom to selected' }),
        // Use the same icon as the framework's zoom action (from ExB configuration page)
        icon: (__webpack_require__(/*! ../runtime/assets/icons/zoom-to.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/zoom-to.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg"),
        index: -90, // Position before Add to Map (-100)
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasMapView: !!mapView
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records and a map view
            if (!dataSets || dataSets.length === 0 || !mapView) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-isSupported',
                    result: false,
                    reason: !dataSets || dataSets.length === 0 ? 'No data sets' : 'No mapView'
                });
                return false;
            }
            // Check if we have records
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-isSupported',
                result: hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return hasRecords;
        }),
        /**
         * Executes the action by zooming to records using the shared zoom utility.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'zoomTo-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasMapView: !!mapView
            });
            if (!mapView || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
                if (!mapView) {
                    debugLogger.log('BUG', {
                        bugId: 'BUG-GRAPHICS-001',
                        category: 'GRAPHICS',
                        event: 'zoom-operation-failed-graphics-layer-disabled',
                        widgetId,
                        operation: 'zoom-to-selected-action',
                        dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                        description: 'Zoom to selected action attempted but mapView is unavailable (likely because useGraphicsLayerForHighlight is disabled)',
                        workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                        targetResolution: 'r019.0'
                    });
                }
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    reason: !mapView ? 'No mapView' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            try {
                // Use the shared zoom utility function
                yield (0,_runtime_zoom_utils__WEBPACK_IMPORTED_MODULE_2__.zoomToRecords)(mapView, allRecords);
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: true,
                    message: 'Successfully zoomed to features',
                    recordsCount: allRecords.length
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'zoomTo-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/default-query-item.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/default-query-item.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_QUERY_ITEM: () => (/* binding */ DEFAULT_QUERY_ITEM)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/query-simple/src/config.ts");

const DEFAULT_QUERY_ITEM = {
    icon: null,
    displayLabel: true,
    sqlExprObj: null,
    useAttributeFilter: true,
    useSpatialFilter: true,
    spatialMapWidgetIds: [],
    spatialFilterTypes: [],
    spatialInteractiveCreateToolTypes: [
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Point,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polyline,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polygon,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Rectangle,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Circle
    ],
    spatialInteractiveEnableBuffer: false,
    spatialInteractiveBufferDistance: 0,
    spatialInteractiveBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    spatialRelations: [_config__WEBPACK_IMPORTED_MODULE_0__.SpatialRelation.Intersect],
    spatialRelationUseDataSources: [],
    spatialRelationEnableSelectTool: false,
    spatialRelationEnableBuffer: false,
    spatialRelationBufferDistance: 0,
    spatialRelationBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    resultListDirection: _config__WEBPACK_IMPORTED_MODULE_0__.ListDirection.Vertical,
    resultPagingStyle: _config__WEBPACK_IMPORTED_MODULE_0__.PagingType.MultiPage,
    resultFieldsType: _config__WEBPACK_IMPORTED_MODULE_0__.FieldsType.PopupSetting,
    resultSymbolType: _config__WEBPACK_IMPORTED_MODULE_0__.SymbolType.DefaultSymbol,
    resultCustomSymbol: {
        angle: 0,
        color: [255, 255, 255, 255],
        outline: {
            color: [255, 255, 255, 255],
            style: 'esriSLSSolid',
            type: 'esriSLS',
            width: 1
        },
        size: 6,
        style: 'esriSMSCircle',
        type: 'esriSMS',
        xoffset: 0,
        yoffset: 0
    },
    resultAllowChangeSymbol: false,
    allowExport: false,
    sortOptions: [],
    zoomToSelected: true,
    itemSizeMap: {
        arrangementHorizontalPopper: {
            minSize: { width: 300, height: 300 },
            defaultSize: { width: 360, height: 480 }
        }
    }
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg":
/*!***********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/zoom-to.svg ***!
  \***********************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M0 10.5V12a1 1 0 0 0 1 1h1.5v-1H1v-1.5zM2.5 1H1a1 1 0 0 0-1 1v1.5h1V2h1.5zM0 8.5h1v-3H0zM4.5 1v1h3V1zm5 0v1H11v1.5h1V2a1 1 0 0 0-1-1zM6.318 13.682a4.5 4.5 0 0 0 5.991.334l1.848 1.848.707-.707-1.847-1.848a4.5 4.5 0 1 0-6.699.373m.707-.707a3.5 3.5 0 1 1 4.95-4.95 3.5 3.5 0 0 1-4.95 4.95M9 13v-2H7v-1h2V8h1v2h2v1h-2v2z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferInput: () => (/* binding */ BufferInput)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */





function BufferInput(props) {
    const { distance = 0, unit = _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters, onBufferChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const [d, setD] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(distance);
    const [u, setU] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(unit);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_5__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        let changed = false;
        if (distance !== d) {
            setD(distance);
            changed = true;
        }
        if (unit !== u) {
            setU(unit);
            changed = true;
        }
        if (changed) {
            onBufferChange(distance, unit);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [distance, unit]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setD(distance);
            setU(unit);
            onBufferChange(distance, unit);
        }
    }, [queryTaskContext.resetSymbol, distance, unit, onBufferChange]);
    const handleDistanceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
    }, []);
    const handleDistanceAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
        onBufferChange(value, u);
    }, [onBufferChange, u]);
    const handleBufferUnitChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        setU(e.target.value);
        onBufferChange(d, e.target.value);
    }, [onBufferChange, d]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": getI18nMessage('theBufferDistance'), className: 'mr-1', value: d, onChange: handleDistanceChange, onAcceptValue: handleDistanceAccepted }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('unit'), value: u, onChange: handleBufferUnitChange, children: Object.values(_config__WEBPACK_IMPORTED_MODULE_3__.UnitType).map((value) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: value, children: getI18nMessage(`unit_${value}`) }, value))) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadStatus: () => (/* binding */ LoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/filled/directional/right */ "./jimu-icons/filled/directional/right.tsx");
/* harmony import */ var jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/filled/directional/down */ "./jimu-icons/filled/directional/down.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */
// This file is duplicated from '../../../../feature-info/src/runtime/components/feature-info'






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
var LoadStatus;
(function (LoadStatus) {
    LoadStatus["Pending"] = "Pending";
    LoadStatus["Fulfilled"] = "Fulfilled";
    LoadStatus["Rejected"] = "Rejected";
})(LoadStatus || (LoadStatus = {}));
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  border: 1px solid var(--sys-color-divider-secondary);
  .esri-widget__heading {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    margin: 0;
    color: var(--sys-color-surface-paper-text);
  }

  .esri-feature__content-element {
    padding: 0;
  }

  .jimu-btn.expanded {
    align-self: flex-start;
  }
  
  // Larger expand/collapse button for better touch targets
  .jimu-btn[aria-label*="expand"],
  .jimu-btn[aria-label*="collapse"] {
    min-width: 32px;
    min-height: 32px;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .esri-feature.esri-widget {
    background-color: transparent;
  }
`;
class FeatureInfo extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor(props) {
        var _a, _b, _c, _d;
        super(props);
        this.toggleExpanded = (e) => {
            e.stopPropagation();
            this.setState({ showContent: !this.state.showContent });
        };
        const { togglable = false, expandByDefault } = this.props;
        const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
        const initialShowContent = !togglable || expandByDefault;
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'FeatureInfo-constructor',
            recordId,
            togglable,
            expandByDefault,
            initialShowContent,
            timestamp: Date.now()
        });
        this.featureContainer = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.state = {
            showContent: initialShowContent,
            loadStatus: LoadStatus.Pending
        };
    }
    componentDidMount() {
        this.createFeature();
    }
    componentDidUpdate(prevProps) {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        if (this.feature) {
            if (prevProps.popupTemplate !== this.props.popupTemplate ||
                prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate ||
                prevProps.graphic !== this.props.graphic) {
                this.destroyFeature();
                this.createFeature();
            }
            else {
                this.feature.visibleElements = this.getVisibleElements();
            }
        }
        // Sync expandByDefault prop changes (when user clicks Expand All/Collapse All)
        // This ensures all items respect the global expand/collapse state
        if (prevProps.expandByDefault !== this.props.expandByDefault) {
            const { togglable = false, expandByDefault } = this.props;
            const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'expandByDefault-prop-changed',
                recordId,
                prevExpandByDefault: prevProps.expandByDefault,
                newExpandByDefault: expandByDefault,
                togglable,
                currentShowContent: this.state.showContent,
                willUpdateState: togglable,
                timestamp: Date.now()
            });
            if (togglable) {
                this.setState({ showContent: expandByDefault }, () => {
                    debugLogger.log('EXPAND-COLLAPSE', {
                        event: 'FeatureInfo-state-updated',
                        recordId,
                        newShowContent: this.state.showContent,
                        timestamp: Date.now()
                    });
                });
            }
        }
        // Log all componentDidUpdate calls to track remounts
        const recordId = ((_f = (_e = this.props.graphic) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.OBJECTID) || ((_h = (_g = this.props.graphic) === null || _g === void 0 ? void 0 : _g.attributes) === null || _h === void 0 ? void 0 : _h.objectid) || 'unknown';
        if (prevProps.graphic !== this.props.graphic ||
            prevProps.popupTemplate !== this.props.popupTemplate ||
            prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate) {
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'FeatureInfo-props-changed-recreate',
                recordId,
                graphicChanged: prevProps.graphic !== this.props.graphic,
                popupTemplateChanged: prevProps.popupTemplate !== this.props.popupTemplate,
                defaultPopupTemplateChanged: prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate,
                expandByDefault: this.props.expandByDefault,
                currentShowContent: this.state.showContent,
                timestamp: Date.now()
            });
        }
    }
    destroyFeature() {
        this.feature && !this.feature.destroyed && this.feature.destroy();
    }
    getVisibleElements() {
        const { togglable = false } = this.props;
        const { showContent } = this.state;
        const expanded = togglable ? showContent : true;
        return {
            title: true,
            content: {
                fields: expanded,
                text: expanded,
                media: expanded,
                attachments: expanded
            },
            lastEditedInfo: false
        };
    }
    createFeature() {
        let featureModulePromise;
        if (this.Feature) {
            featureModulePromise = Promise.resolve();
        }
        else {
            featureModulePromise = (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Feature'
            ]).then(modules => {
                [
                    this.Feature
                ] = modules;
            });
        }
        return featureModulePromise.then(() => {
            var _a, _b, _c, _d;
            // Check if component is still mounted before trying to append
            // This prevents errors when component unmounts during async module loading
            if (!this.featureContainer.current) {
                // Component was unmounted, abort
                return;
            }
            const container = document && document.createElement('div');
            container.className = 'jimu-widget';
            this.featureContainer.current.appendChild(container);
            const originDS = this.props.dataSource.getOriginDataSources();
            const rootDataSource = (_a = originDS === null || originDS === void 0 ? void 0 : originDS[0]) === null || _a === void 0 ? void 0 : _a.getRootDataSource();
            this.destroyFeature();
            const layer = this.props.graphic.layer;
            if (this.props.popupTemplate) {
                this.props.graphic.popupTemplate = this.props.popupTemplate;
            }
            else if (layer) {
                // set popupTemplate with layer's popupTemplate or defaultPopupTemplate
                this.props.graphic.popupTemplate = (_b = layer.popupTemplate) !== null && _b !== void 0 ? _b : this.props.defaultPopupTemplate;
            }
            else {
                this.props.graphic.popupTemplate = this.props.defaultPopupTemplate;
            }
            if (layer && !layer.popupTemplate) {
                layer.popupTemplate = this.props.popupTemplate || this.props.defaultPopupTemplate;
            }
            this.feature = new this.Feature({
                container: container,
                defaultPopupTemplateEnabled: true,
                // @ts-expect-error
                spatialReference: ((_d = (_c = this.props.dataSource) === null || _c === void 0 ? void 0 : _c.layer) === null || _d === void 0 ? void 0 : _d.spatialReference) || null,
                // @ts-expect-error
                map: (rootDataSource === null || rootDataSource === void 0 ? void 0 : rootDataSource.map) || null,
                graphic: this.props.graphic,
                visibleElements: this.getVisibleElements()
            });
        }).then(() => {
            this.setState({ loadStatus: LoadStatus.Fulfilled });
        });
    }
    render() {
        const { togglable = false, intl } = this.props;
        const { showContent } = this.state;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'feature-info-component d-flex align-items-center p-1', css: style, children: [togglable && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { "aria-label": intl.formatMessage({ id: showContent ? 'collapse' : 'expand' }), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-outline-inside flex-shrink-0', { expanded: showContent }), variant: 'text', color: 'inherit', icon: true, size: 'sm', onClick: this.toggleExpanded, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              min-width: 32px;
              min-height: 32px;
              padding: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
            `, children: showContent ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__.DownFilled, { size: 'm' }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__.RightFilled, { size: 'm', autoFlip: true }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1', ref: this.featureContainer })] }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(FeatureInfo));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDraw: () => (/* binding */ GeometryFromDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-draw-tool */ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







function GeometryFromDraw(props) {
    const { onGeometryChange, createToolTypes, mapWidgetIds, enableBuffer, bufferDistance, bufferUnit, onBufferChange, widgetId } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_7__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geodesicBufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryServiceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferDistanceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferDistance);
    const bufferUnitRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferUnit);
    const bufferedGraphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (enableBuffer) {
            // Parent component query-task-spatial-form will reset buffer parameter when filter type changes,
            // so defer the init buffer option in order not to be override by its parent.
            jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
                onBufferChange(bufferDistance, bufferUnit);
            });
        }
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
            'esri/Graphic'
        ]).then((modules) => {
            const Graphic = modules[0];
            bufferedGraphicRef.current = new Graphic({
                symbol: {
                    type: 'simple-fill',
                    color: [51, 51, 204, 0.5],
                    style: 'solid',
                    outline: {
                        color: [51, 51, 204, 0.8],
                        width: 1
                    }
                }
            });
        });
    });
    const applyBufferEffect = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        if (!geometryRef.current || !enableBuffer || bufferDistanceRef.current === 0) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        // If the end user uses a point or line query geometry, then the negative buffer will not work (same effect as there is no buffer)
        const isPointNegativeBuffer = (((_a = geometryRef.current) === null || _a === void 0 ? void 0 : _a.type) === 'point' || ((_b = geometryRef.current) === null || _b === void 0 ? void 0 : _b.type) === 'multipoint') && bufferDistanceRef.current < 0;
        const isLineNegativeBuffer = ((_c = geometryRef.current) === null || _c === void 0 ? void 0 : _c.type) === 'polyline' && bufferDistanceRef.current < 0;
        if (isPointNegativeBuffer || isLineNegativeBuffer) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        const geometry = geometryRef.current;
        // https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html#buffer
        if (((_d = geometry.spatialReference) === null || _d === void 0 ? void 0 : _d.isGeographic) && !geometry.spatialReference.isWGS84) {
            const serviceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getGeometryService();
            if (!geometryServiceRef.current) {
                const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                    'esri/rest/geometryService',
                    'esri/rest/support/BufferParameters'
                ]);
                geometryServiceRef.current = {
                    geometryService: modules[0],
                    bufferParameters: modules[1]
                };
            }
            const { geometryService, bufferParameters: BufferParameters } = geometryServiceRef.current;
            const polygons = yield geometryService.buffer(serviceUrl, new BufferParameters({
                distances: [bufferDistanceRef.current],
                unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current),
                geodesic: true,
                bufferSpatialReference: geometry.spatialReference,
                outSpatialReference: geometry.spatialReference,
                geometries: [geometry]
            }));
            bufferedGraphicRef.current.geometry = polygons[0];
        }
        else {
            if (((_e = geometry.spatialReference) === null || _e === void 0 ? void 0 : _e.isWGS84) || ((_f = geometry.spatialReference) === null || _f === void 0 ? void 0 : _f.isWebMercator)) {
                if (!geodesicBufferOperatorRef.current) {
                    geodesicBufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/geodesicBufferOperator');
                }
                if (!geodesicBufferOperatorRef.current.isLoaded()) {
                    yield geodesicBufferOperatorRef.current.load();
                }
                bufferedGraphicRef.current.geometry = geodesicBufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
            else {
                if (!bufferOperatorRef.current) {
                    bufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/bufferOperator');
                }
                bufferedGraphicRef.current.geometry = bufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
        }
    }), [enableBuffer]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            getLayerFunRef.current && getLayerFunRef.current().removeAll();
            onGeometryChange(null);
        }
    }, [queryTaskContext.resetSymbol, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        // clear drawing graphics before switching map view
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        if (layer) {
            layer.removeAll();
            onGeometryChange(null);
        }
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, [onGeometryChange]);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferDistanceRef.current = distance;
        bufferUnitRef.current = unit;
        applyBufferEffect();
        onBufferChange(distance, unit);
    }, [onBufferChange, applyBufferEffect]);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic, getLayerFun, clearAfterApply) => {
        getLayerFunRef.current = getLayerFun;
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        // it's possible that the geometry is the same as the previous one, only the clearAfterApply is changed.
        if (geometryRef.current !== (graphic === null || graphic === void 0 ? void 0 : graphic.geometry)) {
            geometryRef.current = graphic === null || graphic === void 0 ? void 0 : graphic.geometry;
            applyBufferEffect().then(() => {
                if (bufferedGraphicRef.current.geometry) {
                    layer === null || layer === void 0 ? void 0 : layer.add(bufferedGraphicRef.current);
                }
            });
        }
        onGeometryChange(graphic === null || graphic === void 0 ? void 0 : graphic.geometry, layer, graphic, clearAfterApply);
    }, [onGeometryChange, applyBufferEffect]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))), (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__.InteractiveDraw, { jimuMapView: jimuMapView, widgetId: widgetId, toolTypes: createToolTypes, onDrawEnd: handleDrawEnd }), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'title3', "aria-label": getI18nMessage('theBufferDistance'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_5__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: handleBufferChange }) })] }))] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDataSource: () => (/* binding */ GeometryFromDataSource)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */






const marginStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`;
function getRuntimeDataSource() {
    const result = {};
    let notEmpty = false;
    const dsMap = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSources();
    Object.keys(dsMap).forEach(dsId => {
        const ds = dsMap[dsId];
        // only include the ds that has geometry
        if (ds.getGeometryType() != null && !ds.isInAppConfig() && ds.getMainDataSource().id === dsId && !ds.getDataSourceJson().isOutputFromWidget) {
            result[dsId] = ds;
            notEmpty = true;
        }
    });
    return notEmpty ? result : null;
}
function GeometryFromDataSource(props) {
    var _a;
    const { onSelectionChange, useDataSources = [], useRuntimeData, spatialRelations, enableBuffer, bufferDistance, bufferUnit, onBufferChange, onRelationChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [currentDataSource, setCurrentDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(useDataSources[0]);
    const [runtimeDataSource, setRuntimeDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [count, setCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const [currentRelation, setCurrentRelation] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_6__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation();
    const spatialRelationOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return Object.entries(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialRelation).map(([key, value]) => ({
            value,
            label: getI18nMessage(`spatialRelation_${key}`)
        }));
    }, [getI18nMessage]);
    const loadedUseDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const loaded = [];
        useDataSources.forEach((item) => {
            var _a, _b;
            if (((_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[item.mainDataSourceId]) === null || _b === void 0 ? void 0 : _b.instanceStatus) === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created) {
                loaded.push(item.dataSourceId);
            }
        });
        if (loaded.length > 0) {
            return loaded.join(',');
        }
        return '';
    });
    const numOfDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        if (!useRuntimeData) {
            return 0;
        }
        return Object.keys((_a = state.dataSourcesInfo) !== null && _a !== void 0 ? _a : {}).filter(dsId => state.dataSourcesInfo[dsId].instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created).length;
    });
    const runtimeDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (numOfDs > 0) {
            return getRuntimeDataSource();
        }
    }, [numOfDs]);
    const numOfRuntimeDs = Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).length;
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if ((spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0) {
            onRelationChange(spatialRelations[0]);
        }
        if (enableBuffer) {
            onBufferChange(bufferDistance, bufferUnit);
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setCurrentRelation(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
            onRelationChange(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
        }
    }, [queryTaskContext.resetSymbol, onRelationChange, spatialRelations]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!spatialRelations) {
            setCurrentRelation(null);
        }
        else if (!spatialRelations.includes(currentRelation)) {
            setCurrentRelation(spatialRelations[0]);
            onRelationChange(spatialRelations[0]);
        }
    }, [spatialRelations, currentRelation, onRelationChange]);
    const handleDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = useDataSources.find((item) => item.dataSourceId === dsId);
        setCurrentDataSource((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(ds));
        setRuntimeDataSource(null);
    }, [useDataSources]);
    const handleRuntimeDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(dsId);
        setRuntimeDataSource(ds);
        setCurrentDataSource(null);
    }, []);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource((_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        if ((records === null || records === void 0 ? void 0 : records.length) > 0) {
            const geometries = records.map((record) => record.getJSAPIGeometry());
            onSelectionChange(geometries);
            setCount(records.length);
        }
        else {
            onSelectionChange(null);
            setCount(0);
        }
    }, [currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId, runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, onSelectionChange]);
    const getLabelOfSpatialRelation = (relation) => {
        return spatialRelationOptions.find(item => item.value === relation).label;
    };
    const handleSpatialRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(e => {
        setCurrentRelation(e.target.value);
        onRelationChange(e.target.value);
    }, [onRelationChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: marginStyle, className: 'title3', children: getI18nMessage('chooseFilterLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterLayer'), value: (_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, children: [numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('preconfigured') }), useDataSources.map((item) => {
                        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(item.dataSourceId);
                        if (loadedUseDataSources.includes(item.dataSourceId) || (ds === null || ds === void 0 ? void 0 : ds.getLabel())) {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: item.dataSourceId, onClick: () => { handleDataSourceChange(item.dataSourceId); }, children: ds === null || ds === void 0 ? void 0 : ds.getLabel() }, item.dataSourceId));
                        }
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { children: translate('loading') }, item.dataSourceId));
                    }), numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { divider: true }), numOfRuntimeDs > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('runtime') }), Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).map(dsId => {
                        const ds = runtimeDataSources[dsId];
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: dsId, onClick: () => { handleRuntimeDataSourceChange(dsId); }, children: ds.getLabel() }, dsId));
                    })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-1 font-italic', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `color: var(--sys-color-surface-paper-hint);`, children: getI18nMessage('selectedRecords', { num: count }) }), (spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate title3 mb-0', children: getI18nMessage('relationship') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('relationship'), value: currentRelation, onChange: handleSpatialRelationChange, children: spatialRelations.map((item) => {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item, children: getLabelOfSpatialRelation(item) }, item));
                        }) })] })), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', "aria-label": getI18nMessage('theBufferDistance'), css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3 text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_4__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: onBufferChange }) })] })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: currentDataSource, dataSource: runtimeDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), useDataSources.map((item) => {
                // make sure the datasource is created
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: item }, item.dataSourceId));
            })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromMap: () => (/* binding */ GeometryFromMap)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");

/** @jsx jsx */


function GeometryFromMap(props) {
    const { onGeometryChange, mapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const PolygonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            let handler;
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/core/reactiveUtils').then((reactiveUtils) => {
                handler = reactiveUtils.watch(() => jimuMapView.view.extent, (extent) => {
                    if (PolygonRef.current) {
                        onGeometryChange(PolygonRef.current.fromExtent(extent));
                    }
                    else {
                        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/geometry/Polygon']).then(modules => {
                            PolygonRef.current = modules[0];
                            onGeometryChange(PolygonRef.current.fromExtent(extent));
                        });
                    }
                });
                // set initial extent
                onGeometryChange(jimuMapView.view.extent);
            });
            return () => {
                if (handler) {
                    handler.remove();
                }
            };
        }
    }, [jimuMapView, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addHighlightGraphics: () => (/* binding */ addHighlightGraphics),
/* harmony export */   cleanupGraphicsLayer: () => (/* binding */ cleanupGraphicsLayer),
/* harmony export */   clearGraphicsLayer: () => (/* binding */ clearGraphicsLayer),
/* harmony export */   createOrGetGraphicsLayer: () => (/* binding */ createOrGetGraphicsLayer),
/* harmony export */   getMapViewFromDataSource: () => (/* binding */ getMapViewFromDataSource),
/* harmony export */   removeHighlightGraphics: () => (/* binding */ removeHighlightGraphics)
/* harmony export */ });
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing graphics layer highlighting in QuerySimple widget.
 * Provides highlighting that works independently of layer visibility.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
// Global sequence counter for graphics operations to track timing across calls
let operationSequence = 0;
/**
 * Gets the map view from a data source's origin layer.
 * Accesses the view through the FeatureLayer's view property.
 * @param outputDS - The output data source (or any data source)
 * @returns Promise resolving to MapView or SceneView, or null if not available
 */
function getMapViewFromDataSource(outputDS) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        const seq = ++operationSequence;
        if (!outputDS) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-outputDS',
                seq,
                timestamp: Date.now()
            });
            return null;
        }
        try {
            // Get origin data source to access the layer
            const originDataSources = outputDS.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (!originDS) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-originDS',
                    outputDSId: outputDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Access the FeatureLayer from the data source
            const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
            if (!layer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-layer',
                    originDSId: originDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Log layer properties to understand structure
            const layerKeys = Object.keys(layer).filter(key => !key.startsWith('_') &&
                typeof layer[key] !== 'function').slice(0, 20); // Limit to first 20 properties
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-layer-inspection',
                originDSId: originDS.id,
                layerId: layer.id,
                layerType: layer.type || 'unknown',
                layerKeys: layerKeys,
                hasLayerMap: !!layer.map,
                hasLayerView: !!layer.view,
                hasLayerParent: !!layer.parent,
                layerMapType: layer.map ? typeof layer.map : 'none',
                timestamp: Date.now()
            });
            // Check layer.parent for map/view access (since hasLayerParent is true)
            const parent = layer.parent;
            if (parent) {
                // Log parent properties
                const parentKeys = Object.keys(parent).filter(key => !key.startsWith('_') &&
                    typeof parent[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-layer-parent-inspection',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    parentType: parent.type || 'unknown',
                    parentKeys: parentKeys,
                    hasParentMap: !!parent.map,
                    hasParentView: !!parent.view,
                    hasParentViews: !!parent.views,
                    parentViewsLength: ((_c = parent.views) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    hasParentExtent: !!parent.extent,
                    timestamp: Date.now()
                });
                // Try to get view from parent
                if (parent.view) {
                    const view = parent.view;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
                // Try to get map from parent and then view
                const parentMap = parent.map;
                if (parentMap) {
                    const view = parentMap.view ||
                        ((_e = (_d = parentMap.views) === null || _d === void 0 ? void 0 : _d.getItemAt) === null || _e === void 0 ? void 0 : _e.call(_d, 0)) ||
                        (((_f = parentMap.views) === null || _f === void 0 ? void 0 : _f.length) > 0 ? parentMap.views[0] : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-layer-parent-map',
                            originDSId: originDS.id,
                            layerId: layer.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                // Parent might BE the view (check if it has view-like properties)
                if (parent.type === 'map' || parent.type === 'scene' || parent.extent) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-is-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: parent.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return parent;
                }
            }
            // Try multiple approaches to get the view:
            // 1. Layer might have a direct view property
            if (layer.view) {
                const view = layer.view;
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-success-via-layer-view',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    viewType: view.type || 'unknown',
                    timestamp: Date.now()
                });
                return view;
            }
            // 2. Try to get map from layer and then view from map
            const map = layer.map ||
                ((_g = layer.parent) === null || _g === void 0 ? void 0 : _g.map) ||
                layer.__map ||
                layer._map;
            if (map) {
                // Log map properties
                const mapKeys = Object.keys(map).filter(key => !key.startsWith('_') &&
                    typeof map[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-map-found',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    mapId: map.id || 'unknown',
                    mapKeys: mapKeys,
                    hasMapView: !!map.view,
                    hasMapViews: !!(map.views),
                    mapViewsLength: ((_h = map.views) === null || _h === void 0 ? void 0 : _h.length) || 0,
                    timestamp: Date.now()
                });
                const view = map.view ||
                    ((_k = (_j = map.views) === null || _j === void 0 ? void 0 : _j.getItemAt) === null || _k === void 0 ? void 0 : _k.call(_j, 0)) ||
                    (((_l = map.views) === null || _l === void 0 ? void 0 : _l.length) > 0 ? map.views[0] : null) ||
                    (map.views && map.views.length > 0 ? map.views.getItemAt(0) : null);
                if (view) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-map',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
            }
            // 3. Try to get root data source and access map from there
            const rootDS = originDS.getRootDataSource();
            if (rootDS) {
                const rootMap = ((_o = (_m = rootDS).getMap) === null || _o === void 0 ? void 0 : _o.call(_m)) ||
                    rootDS.map ||
                    rootDS.__map ||
                    rootDS._map;
                if (rootMap) {
                    // Log root map properties
                    const rootMapKeys = Object.keys(rootMap).filter(key => !key.startsWith('_') &&
                        typeof rootMap[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-map-found',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootMapId: rootMap.id || 'unknown',
                        rootMapKeys: rootMapKeys,
                        hasRootMapView: !!rootMap.view,
                        hasRootMapViews: !!(rootMap.views),
                        rootMapViewsLength: ((_p = rootMap.views) === null || _p === void 0 ? void 0 : _p.length) || 0,
                        timestamp: Date.now()
                    });
                    const view = rootMap.view ||
                        ((_r = (_q = rootMap.views) === null || _q === void 0 ? void 0 : _q.getItemAt) === null || _r === void 0 ? void 0 : _r.call(_q, 0)) ||
                        (((_s = rootMap.views) === null || _s === void 0 ? void 0 : _s.length) > 0 ? rootMap.views[0] : null) ||
                        (rootMap.views && rootMap.views.length > 0 ? rootMap.views.getItemAt(0) : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-rootDS',
                            originDSId: originDS.id,
                            rootDSId: rootDS.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                else {
                    // Log root DS properties to see what's available
                    const rootDSKeys = Object.keys(rootDS).filter(key => !key.startsWith('_') &&
                        typeof rootDS[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-ds-inspection',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootDSKeys: rootDSKeys,
                        hasGetMap: typeof rootDS.getMap === 'function',
                        hasMap: !!rootDS.map,
                        timestamp: Date.now()
                    });
                }
            }
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-view',
                originDSId: originDS.id,
                layerId: layer.id,
                hasLayerMap: !!map,
                hasRootDS: !!rootDS,
                timestamp: Date.now()
            });
            return null;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-error',
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Gets the default highlight symbol based on geometry type.
 * Uses the map's actual highlight color from highlightOptions to match standard selection appearance.
 */
function getDefaultHighlightSymbol(geometryType, mapView) {
    // Get default highlight color from view's highlightOptions
    const highlightOptions = (mapView.highlightOptions || {});
    // Extract color - could be array [R,G,B,A] or Color object
    let highlightColor = null;
    if (highlightOptions.color) {
        // If it's a Color object, convert to array
        if (typeof highlightOptions.color === 'object' && 'toRgba' in highlightOptions.color) {
            highlightColor = highlightOptions.color.toRgba();
        }
        // If it's already an array
        else if (Array.isArray(highlightOptions.color)) {
            highlightColor = highlightOptions.color;
        }
    }
    // If no color in highlightOptions, use the ArcGIS documented default: cyan [0, 255, 255]
    if (!highlightColor) {
        highlightColor = [0, 255, 255, 1.0]; // Full opacity default
    }
    // Ensure we have 4 elements [R, G, B, A]
    const baseColor = highlightColor.slice(0, 3);
    const baseAlpha = highlightColor.length >= 4 ? highlightColor[3] : 1.0;
    // Get fill opacity from highlightOptions or use default
    const fillOpacity = highlightOptions.fillOpacity !== undefined
        ? highlightOptions.fillOpacity
        : 0.25; // Default 25% opacity for fill
    const fillColor = [...baseColor, fillOpacity];
    // Get halo opacity or use default - for outlines and lines
    const haloOpacity = highlightOptions.haloOpacity !== undefined
        ? highlightOptions.haloOpacity
        : baseAlpha; // Use the color's alpha if available, otherwise 1.0
    const outlineColor = [...baseColor, haloOpacity];
    // For lines, use full opacity to ensure visibility
    const lineOpacity = highlightOptions.haloOpacity !== undefined
        ? Math.max(highlightOptions.haloOpacity, 0.8) // At least 80% opacity
        : baseAlpha; // Use the color's alpha, or default to 1.0
    const lineColor = [...baseColor, lineOpacity];
    switch (geometryType) {
        case 'point':
        case 'multipoint':
            return {
                type: 'simple-marker',
                color: outlineColor,
                outline: {
                    color: outlineColor,
                    width: 2
                },
                size: 12
            };
        case 'polyline':
            return {
                type: 'simple-line',
                color: lineColor, // Use lineColor with proper opacity
                width: 4 // Increased width for visibility
            };
        case 'polygon':
        case 'multipolygon':
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
        default:
            // Fallback to polygon symbol
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
    }
}
/**
 * Creates or gets an existing graphics layer for the widget.
 * Uses a unique ID based on widget ID to ensure one layer per widget.
 */
function createOrGetGraphicsLayer(widgetId, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        const layerId = `querysimple-highlight-${widgetId}`;
        try {
            // Check if layer already exists
            const existingLayer = mapView.map.layers.find(layer => layer.id === layerId);
            if (existingLayer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'createOrGetGraphicsLayer-found-existing',
                    seq,
                    widgetId,
                    layerId,
                    timestamp: Date.now()
                });
                return existingLayer;
            }
            // Load GraphicsLayer module
            const [GraphicsLayer] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/layers/GraphicsLayer']);
            // Create new graphics layer
            const graphicsLayer = new GraphicsLayer({
                id: layerId,
                title: `QuerySimple Highlights (${widgetId})`,
                listMode: 'hide', // Hide from layer list
                visible: true
            });
            // Add to map
            mapView.map.add(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-created',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
            return graphicsLayer;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-error',
                seq,
                widgetId,
                layerId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Adds highlight graphics to the graphics layer using default map highlight color.
 * Note: This function should be called after GraphicsLayer module is loaded.
 */
function addHighlightGraphics(graphicsLayer, records, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        if (!graphicsLayer || !records || records.length === 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'addHighlightGraphics-skipped',
                seq,
                reason: !graphicsLayer ? 'no-graphics-layer' : 'no-records',
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                timestamp: Date.now()
            });
            return;
        }
        // Log existing state BEFORE adding - verify assumption about duplicates
        const existingGraphicsCount = graphicsLayer.graphics.length;
        const existingRecordIds = [];
        const existingRecordIdSet = new Set();
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                existingRecordIds.push(recordId);
                existingRecordIdSet.add(recordId);
            }
        });
        // Log what we're trying to add
        const incomingRecordIds = records.map(r => r.getId());
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-before-add',
            seq,
            graphicsLayerId: graphicsLayer.id,
            existingGraphicsCount,
            existingRecordIds: existingRecordIds.slice(0, 20), // Limit to first 20 for readability
            existingRecordIdsCount: existingRecordIds.length,
            incomingRecordIds: incomingRecordIds.slice(0, 20), // Limit to first 20
            incomingRecordIdsCount: incomingRecordIds.length,
            duplicateRecordIds: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).slice(0, 20),
            duplicateCount: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).length,
            timestamp: Date.now()
        });
        // Load Graphic module
        const [Graphic] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/Graphic']);
        let addedCount = 0;
        let skippedCount = 0;
        let duplicateCount = 0;
        const addedRecordIds = [];
        const skippedRecordIds = [];
        const duplicateRecordIds = [];
        records.forEach(record => {
            try {
                const recordId = record.getId();
                // Check if this record ID already exists in graphics layer
                if (existingRecordIdSet.has(recordId)) {
                    duplicateCount++;
                    duplicateRecordIds.push(recordId);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'addHighlightGraphics-duplicate-detected',
                        seq,
                        recordId,
                        graphicsLayerId: graphicsLayer.id,
                        timestamp: Date.now()
                    });
                    return; // Skip adding duplicate
                }
                const graphic = record.feature;
                if (!graphic || !graphic.geometry) {
                    skippedCount++;
                    skippedRecordIds.push(recordId);
                    return;
                }
                // Get geometry type from graphic
                const geometryType = graphic.geometry.type;
                // Create symbol using default highlight color
                const symbol = getDefaultHighlightSymbol(geometryType, mapView);
                // Create new graphic with highlight symbol
                const highlightGraphic = new Graphic({
                    geometry: graphic.geometry,
                    symbol: symbol,
                    attributes: {
                        recordId: recordId,
                        source: 'querysimple-highlight',
                        widgetId: graphicsLayer.id.replace('querysimple-highlight-', '')
                    }
                });
                graphicsLayer.add(highlightGraphic);
                addedCount++;
                addedRecordIds.push(recordId);
                // Add to tracking set to prevent duplicates within this batch
                existingRecordIdSet.add(recordId);
            }
            catch (error) {
                skippedCount++;
                skippedRecordIds.push(record.getId());
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'addHighlightGraphics-record-error',
                    seq,
                    recordId: record.getId(),
                    error: error instanceof Error ? error.message : String(error),
                    timestamp: Date.now()
                });
            }
        });
        // Log final state AFTER adding
        const finalGraphicsCount = graphicsLayer.graphics.length;
        const finalRecordIds = [];
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                finalRecordIds.push(recordId);
            }
        });
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-complete',
            seq,
            graphicsLayerId: graphicsLayer.id,
            recordsCount: records.length,
            addedCount,
            skippedCount,
            duplicateCount,
            addedRecordIds: addedRecordIds.slice(0, 20), // Limit to first 20
            skippedRecordIds: skippedRecordIds.slice(0, 20),
            duplicateRecordIds: duplicateRecordIds.slice(0, 20),
            existingGraphicsCount,
            finalGraphicsCount,
            expectedFinalCount: existingGraphicsCount + addedCount,
            finalRecordIds: finalRecordIds.slice(0, 20), // Limit to first 20
            finalRecordIdsCount: finalRecordIds.length,
            timestamp: Date.now()
        });
    });
}
/**
 * Removes highlight graphics from the graphics layer by record IDs.
 */
function removeHighlightGraphics(graphicsLayer, recordIds) {
    const seq = ++operationSequence;
    if (!graphicsLayer || !recordIds || recordIds.length === 0) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'removeHighlightGraphics-skipped',
            seq,
            reason: !graphicsLayer ? 'no-graphics-layer' : 'no-record-ids',
            recordIdsCount: (recordIds === null || recordIds === void 0 ? void 0 : recordIds.length) || 0,
            timestamp: Date.now()
        });
        return;
    }
    const recordIdSet = new Set(recordIds);
    let removedCount = 0;
    // Find and remove graphics matching record IDs
    const graphicsToRemove = [];
    graphicsLayer.graphics.forEach(graphic => {
        var _a;
        const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
        if (recordId && recordIdSet.has(recordId)) {
            graphicsToRemove.push(graphic);
        }
    });
    graphicsToRemove.forEach(graphic => {
        graphicsLayer.remove(graphic);
        removedCount++;
    });
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'removeHighlightGraphics-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        recordIdsCount: recordIds.length,
        removedCount,
        timestamp: Date.now()
    });
}
/**
 * Clears all highlight graphics from the graphics layer.
 */
function clearGraphicsLayer(graphicsLayer) {
    const seq = ++operationSequence;
    if (!graphicsLayer) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'clearGraphicsLayer-skipped',
            seq,
            reason: 'no-graphics-layer',
            timestamp: Date.now()
        });
        return;
    }
    const graphicsCount = graphicsLayer.graphics.length;
    graphicsLayer.removeAll();
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'clearGraphicsLayer-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        graphicsRemoved: graphicsCount,
        timestamp: Date.now()
    });
}
/**
 * Removes the graphics layer from the map and cleans up references.
 */
function cleanupGraphicsLayer(widgetId, mapView) {
    const seq = ++operationSequence;
    const layerId = `querysimple-highlight-${widgetId}`;
    try {
        const graphicsLayer = mapView.map.layers.find(layer => layer.id === layerId);
        if (graphicsLayer) {
            // Clear all graphics first
            graphicsLayer.removeAll();
            // Remove layer from map
            mapView.map.remove(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-complete',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
        else {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-not-found',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
    }
    catch (error) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'cleanupGraphicsLayer-error',
            seq,
            widgetId,
            layerId,
            error: error instanceof Error ? error.message : String(error),
            errorStack: error instanceof Error ? error.stack : undefined,
            timestamp: Date.now()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts":
/*!*******************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AccumulatedRecordsManager: () => (/* binding */ AccumulatedRecordsManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage accumulated records and results mode state.
 *
 * Centralizes accumulated records management logic for the widget.
 * Handles results mode changes, accumulated records updates, and mode reset logic.
 *
 * Part of Chunk 5: Accumulated Records Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class AccumulatedRecordsManager {
    constructor() {
        this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
        this.accumulatedRecords = [];
    }
    /**
     * Sets callbacks for mode change and accumulated records change events.
     *
     * @param callbacks - Callbacks for mode change and accumulated records change
     */
    setCallbacks(callbacks) {
        this.callbacks = callbacks;
    }
    /**
     * Gets the current results mode.
     *
     * @returns Current results mode
     */
    getResultsMode() {
        return this.resultsMode;
    }
    /**
     * Gets the current accumulated records.
     *
     * @returns Current accumulated records array
     */
    getAccumulatedRecords() {
        return this.accumulatedRecords;
    }
    /**
     * Gets the count of accumulated records.
     *
     * @returns Number of accumulated records
     */
    getAccumulatedRecordsCount() {
        return this.accumulatedRecords.length;
    }
    /**
     * Checks if the widget is in accumulation mode (Add to or Remove from).
     *
     * @returns True if in accumulation mode, false otherwise
     */
    isAccumulationMode() {
        return this.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection ||
            this.resultsMode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection;
    }
    /**
     * Checks if there are accumulated records.
     *
     * @returns True if accumulated records exist, false otherwise
     */
    hasAccumulatedRecords() {
        return this.accumulatedRecords.length > 0;
    }
    /**
     * Handles results mode change.
     *
     * Updates the results mode and optionally clears accumulated records when switching
     * to "New" mode. Also handles hash parameter consumption when switching to accumulation modes.
     *
     * @param widgetId - Widget ID for logging
     * @param mode - New results mode
     * @param shouldConsumeHash - Whether to consume hash parameter (for deep linking)
     * @param hashShortId - Optional shortId to consume from hash
     * @param removeHashParameter - Optional callback to remove hash parameter
     */
    handleResultsModeChange(widgetId, mode, shouldConsumeHash = false, hashShortId, removeHashParameter) {
        var _a;
        const previousMode = this.resultsMode;
        const currentAccumulatedCount = this.accumulatedRecords.length;
        debugLogger.log('RESULTS-MODE', {
            event: 'handleResultsModeChange-triggered',
            widgetId,
            previousMode,
            newMode: mode,
            currentAccumulatedCount,
            timestamp: Date.now()
        });
        // Consume deep link when switching to accumulation modes
        if (shouldConsumeHash && (mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.RemoveFromSelection)) {
            if (hashShortId && removeHashParameter) {
                debugLogger.log('HASH', {
                    event: 'consuming-hash-on-mode-switch',
                    widgetId,
                    mode,
                    shortId: hashShortId
                });
                removeHashParameter(hashShortId);
            }
        }
        // If switching to "New" mode, clear accumulated records
        if (mode === _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection) {
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-accumulated-records-on-mode-switch',
                widgetId,
                previousMode
            });
            this.resultsMode = mode;
            this.accumulatedRecords = [];
        }
        else {
            this.resultsMode = mode;
        }
        // Trigger callback
        if ((_a = this.callbacks) === null || _a === void 0 ? void 0 : _a.onModeChange) {
            this.callbacks.onModeChange(this.resultsMode);
        }
        return {
            resultsMode: this.resultsMode,
            accumulatedRecords: this.accumulatedRecords
        };
    }
    /**
     * Handles accumulated records change.
     *
     * Updates the accumulated records array.
     *
     * @param widgetId - Widget ID for logging
     * @param records - New accumulated records array
     */
    handleAccumulatedRecordsChange(widgetId, records) {
        var _a;
        const previousCount = this.accumulatedRecords.length;
        const newCount = records.length;
        debugLogger.log('RESULTS-MODE', {
            event: 'handleAccumulatedRecordsChange-triggered',
            widgetId,
            previousCount,
            newCount,
            timestamp: Date.now()
        });
        this.accumulatedRecords = records;
        // Trigger callback
        if ((_a = this.callbacks) === null || _a === void 0 ? void 0 : _a.onAccumulatedRecordsChange) {
            this.callbacks.onAccumulatedRecordsChange(this.accumulatedRecords);
        }
    }
    /**
     * Resets mode to "New Selection" and clears accumulated records.
     *
     * Called when hash parameters are detected to reset the widget to a clean state.
     *
     * @param widgetId - Widget ID for logging
     * @param currentMode - Current mode before reset
     */
    resetModeOnHashDetection(widgetId, currentMode) {
        if (currentMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection) {
            debugLogger.log('HASH', {
                event: 'mode-reset-needed-on-hash-detection',
                widgetId,
                currentMode,
                timestamp: Date.now()
            });
            this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
            this.accumulatedRecords = [];
        }
        return {
            resultsMode: this.resultsMode,
            accumulatedRecords: this.accumulatedRecords
        };
    }
    /**
     * Cleans up the manager.
     *
     * Resets state to initial values.
     */
    cleanup() {
        this.resultsMode = _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection;
        this.accumulatedRecords = [];
        this.callbacks = undefined;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GraphicsLayerManager: () => (/* binding */ GraphicsLayerManager)
/* harmony export */ });
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage graphics layer initialization and cleanup.
 *
 * Centralizes graphics layer management logic for the widget.
 * Handles graphics layer creation, initialization, and cleanup.
 *
 * Part of Chunk 4: Graphics Layer Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class GraphicsLayerManager {
    constructor(graphicsLayerRef, mapViewRef) {
        this.graphicsLayerRef = graphicsLayerRef;
        this.mapViewRef = mapViewRef;
    }
    /**
     * Initializes the graphics layer for map highlighting.
     *
     * Creates or retrieves a graphics layer and adds it to the map view.
     *
     * @param widgetId - Widget ID for graphics layer naming
     * @param mapView - The ArcGIS MapView or SceneView instance
     * @param callbacks - Optional callbacks for initialization events
     *
     * @returns Promise resolving to the graphics layer, or null if initialization failed
     */
    initialize(widgetId, mapView, callbacks) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c, _d;
            // Chunk 4: Comparison logging - new implementation
            const newStateBefore = {
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                hasMapView: !!this.mapViewRef.current,
                viewType: ((_b = this.mapViewRef.current) === null || _b === void 0 ? void 0 : _b.type) || null
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-initializeGraphicsLayer-before',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    mapViewType: mapView.type || 'unknown',
                    timestamp: Date.now()
                }
            });
            try {
                // Create or get graphics layer
                const graphicsLayer = yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__.createOrGetGraphicsLayer)(widgetId, mapView);
                if (!graphicsLayer) {
                    debugLogger.log('CHUNK-4-COMPARE', {
                        event: 'new-implementation-initializeGraphicsLayer-failed',
                        widgetId,
                        newImplementation: {
                            stateBefore: newStateBefore,
                            result: 'failed',
                            reason: 'graphics-layer-creation-failed',
                            timestamp: Date.now()
                        }
                    });
                    return null;
                }
                // Store references
                this.mapViewRef.current = mapView;
                this.graphicsLayerRef.current = graphicsLayer;
                const newStateAfter = {
                    hasGraphicsLayer: !!this.graphicsLayerRef.current,
                    graphicsLayerId: ((_c = this.graphicsLayerRef.current) === null || _c === void 0 ? void 0 : _c.id) || null,
                    hasMapView: !!this.mapViewRef.current,
                    viewType: ((_d = this.mapViewRef.current) === null || _d === void 0 ? void 0 : _d.type) || null
                };
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayer-success',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        stateAfter: newStateAfter,
                        result: 'success',
                        graphicsLayerId: graphicsLayer.id,
                        viewType: mapView.type || 'unknown',
                        timestamp: Date.now()
                    }
                });
                // Call callback if provided
                if (callbacks === null || callbacks === void 0 ? void 0 : callbacks.onGraphicsLayerInitialized) {
                    callbacks.onGraphicsLayerInitialized(graphicsLayer);
                }
                return graphicsLayer;
            }
            catch (error) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayer-error',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'error',
                        error: error instanceof Error ? error.message : String(error),
                        timestamp: Date.now()
                    }
                });
                return null;
            }
        });
    }
    /**
     * Initializes graphics layer lazily when output data source becomes available.
     *
     * @param widgetId - Widget ID
     * @param config - Widget configuration
     * @param outputDS - The output data source that was created
     * @param mapView - Optional map view (if not provided, uses mapViewRef)
     * @param callbacks - Optional callbacks
     */
    initializeFromOutputDS(widgetId, config, outputDS, mapView, callbacks) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a;
            // Chunk 4: Comparison logging - new implementation
            const newStateBefore = {
                useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                hasMapView: !!this.mapViewRef.current,
                outputDSId: outputDS.id
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-initializeGraphicsLayerFromOutputDS-before',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    timestamp: Date.now()
                }
            });
            // Only initialize if enabled and not already initialized
            if (!config.useGraphicsLayerForHighlight || this.graphicsLayerRef.current) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'skipped',
                        reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'already-initialized',
                        timestamp: Date.now()
                    }
                });
                return;
            }
            // Use provided map view or get from ref
            const mapViewToUse = mapView || this.mapViewRef.current;
            if (!mapViewToUse) {
                debugLogger.log('CHUNK-4-COMPARE', {
                    event: 'new-implementation-initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId,
                    newImplementation: {
                        stateBefore: newStateBefore,
                        result: 'skipped',
                        reason: 'map-view-not-available-yet',
                        timestamp: Date.now()
                    }
                });
                return;
            }
            // Initialize graphics layer
            yield this.initialize(widgetId, mapViewToUse, callbacks);
        });
    }
    /**
     * Cleans up the graphics layer.
     *
     * Removes the graphics layer from the map view and clears internal references.
     *
     * @param widgetId - Widget ID
     * @param callbacks - Optional callbacks
     */
    cleanup(widgetId, callbacks) {
        var _a, _b, _c, _d;
        // Chunk 4: Comparison logging - new implementation
        const newStateBefore = {
            hasGraphicsLayer: !!this.graphicsLayerRef.current,
            graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
            hasMapView: !!this.mapViewRef.current,
            viewType: ((_b = this.mapViewRef.current) === null || _b === void 0 ? void 0 : _b.type) || null
        };
        debugLogger.log('CHUNK-4-COMPARE', {
            event: 'new-implementation-cleanupGraphicsLayer-before',
            widgetId,
            newImplementation: {
                stateBefore: newStateBefore,
                timestamp: Date.now()
            }
        });
        const mapView = this.mapViewRef.current;
        if (mapView) {
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_0__.cleanupGraphicsLayer)(widgetId, mapView);
            this.mapViewRef.current = null;
            this.graphicsLayerRef.current = null;
            const newStateAfter = {
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_c = this.graphicsLayerRef.current) === null || _c === void 0 ? void 0 : _c.id) || null,
                hasMapView: !!this.mapViewRef.current,
                viewType: ((_d = this.mapViewRef.current) === null || _d === void 0 ? void 0 : _d.type) || null
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-cleanupGraphicsLayer-complete',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    stateAfter: newStateAfter,
                    result: 'complete',
                    timestamp: Date.now()
                }
            });
            // Call callback if provided
            if (callbacks === null || callbacks === void 0 ? void 0 : callbacks.onGraphicsLayerCleaned) {
                callbacks.onGraphicsLayerCleaned();
            }
        }
        else {
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-cleanupGraphicsLayer-skipped',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    result: 'skipped',
                    reason: 'no-map-view',
                    timestamp: Date.now()
                }
            });
        }
    }
    /**
     * Clears all graphics from the graphics layer if it exists.
     *
     * @param widgetId - Widget ID for logging
     * @param config - Widget configuration
     */
    clearGraphics(widgetId, config) {
        var _a, _b;
        // Chunk 4: Comparison logging - new implementation
        const graphicsLayer = this.graphicsLayerRef.current;
        const newStateBefore = {
            useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
            hasGraphicsLayer: !!graphicsLayer,
            graphicsLayerId: (graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.id) || null,
            graphicsCount: (graphicsLayer === null || graphicsLayer === void 0 ? void 0 : graphicsLayer.graphics.length) || 0
        };
        debugLogger.log('CHUNK-4-COMPARE', {
            event: 'new-implementation-clearGraphicsLayerIfExists-before',
            widgetId,
            newImplementation: {
                stateBefore: newStateBefore,
                timestamp: Date.now()
            }
        });
        if (config.useGraphicsLayerForHighlight && graphicsLayer) {
            const { clearGraphicsLayer } = __webpack_require__(/*! ../graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
            clearGraphicsLayer(graphicsLayer);
            const newStateAfter = {
                useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight,
                hasGraphicsLayer: !!this.graphicsLayerRef.current,
                graphicsLayerId: ((_a = this.graphicsLayerRef.current) === null || _a === void 0 ? void 0 : _a.id) || null,
                graphicsCount: ((_b = this.graphicsLayerRef.current) === null || _b === void 0 ? void 0 : _b.graphics.length) || 0
            };
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-clearGraphicsLayerIfExists-complete',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    stateAfter: newStateAfter,
                    result: 'complete',
                    graphicsLayerId: graphicsLayer.id,
                    timestamp: Date.now()
                }
            });
        }
        else {
            debugLogger.log('CHUNK-4-COMPARE', {
                event: 'new-implementation-clearGraphicsLayerIfExists-skipped',
                widgetId,
                newImplementation: {
                    stateBefore: newStateBefore,
                    result: 'skipped',
                    reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'no-graphics-layer',
                    timestamp: Date.now()
                }
            });
        }
    }
    /**
     * Gets the current graphics layer.
     */
    getGraphicsLayer() {
        return this.graphicsLayerRef.current;
    }
    /**
     * Checks if graphics layer should be initialized based on config and current state.
     *
     * @param config - Widget configuration
     * @param mapView - Map view to check
     * @returns true if graphics layer should be initialized
     */
    shouldInitialize(config, mapView) {
        return !!(mapView && config.useGraphicsLayerForHighlight && !this.graphicsLayerRef.current);
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapViewManager: () => (/* binding */ MapViewManager)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage map view ref and view change handlers.
 *
 * Centralizes map view management logic for the widget.
 * Handles JimuMapView changes and maintains refs for map view access.
 *
 * Part of Chunk 6: Map View Management extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class MapViewManager {
    constructor(mapViewRef) {
        this.jimuMapView = null;
        this.mapViewRef = mapViewRef;
    }
    /**
     * Handles JimuMapView change from JimuMapViewComponent.
     * Updates internal state and calls callbacks.
     */
    handleJimuMapViewChanged(jimuMapView, props, callbacks) {
        var _a;
        const { id } = props;
        debugLogger.log('MAP-EXTENT', {
            event: 'handleJimuMapViewChanged',
            widgetId: id,
            hasJimuMapView: !!jimuMapView,
            hasView: !!(jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view),
            viewType: ((_a = jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) === null || _a === void 0 ? void 0 : _a.type) || 'none',
            timestamp: Date.now()
        });
        // Store JimuMapView internally
        this.jimuMapView = jimuMapView;
        // Update map view ref if view is available
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            this.mapViewRef.current = jimuMapView.view;
        }
        else {
            this.mapViewRef.current = null;
        }
        // Call callback to update widget state
        if (callbacks.onMapViewChange) {
            callbacks.onMapViewChange(jimuMapView);
        }
    }
    /**
     * Gets the current JimuMapView.
     */
    getJimuMapView() {
        return this.jimuMapView;
    }
    /**
     * Gets the current map view from ref.
     */
    getMapView() {
        return this.mapViewRef.current;
    }
    /**
     * Cleans up map view references.
     */
    cleanup() {
        this.mapViewRef.current = null;
        this.jimuMapView = null;
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UrlConsumptionManager: () => (/* binding */ UrlConsumptionManager)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Utility to manage URL parameter consumption and deep linking.
 *
 * Handles both Hash fragments (#) and Query Strings (?), with Hash taking priority.
 * Implements atomic consumption to prevent infinite loops.
 *
 * Part of Chunk 1: URL Parameter Consumption extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class UrlConsumptionManager {
    constructor() {
        this.lastProcessedHash = '';
        this.isProcessing = false;
        this.hashChangeHandler = null;
    }
    /**
     * Checks URL for hash and query string parameters matching configured shortIds.
     * Hash parameters take priority over query string parameters.
     */
    checkUrlParameters(props, resultsMode, callbacks) {
        var _a;
        const { config, id } = props;
        const { onInitialValueFound, onModeResetNeeded } = callbacks;
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return;
        }
        // Prevent concurrent processing
        if (this.isProcessing) {
            return;
        }
        const shortIds = config.queryItems
            .map(item => item.shortId)
            .filter(sid => sid != null && sid.trim() !== '');
        if (shortIds.length === 0) {
            return;
        }
        const hash = window.location.hash.substring(1);
        const query = window.location.search.substring(1);
        // Skip hash-only if we've already processed this exact hash fragment
        // But always check query strings (they don't trigger hashchange events)
        // Only skip if we have a hash fragment AND we've already processed it
        if (hash && this.lastProcessedHash === hash) {
            return;
        }
        this.isProcessing = true;
        // Only update lastProcessedHash if we actually have a hash fragment
        // Query strings are always checked (no skip logic for them)
        if (hash) {
            this.lastProcessedHash = hash;
        }
        const hashParams = new URLSearchParams(hash);
        const queryParams = new URLSearchParams(query);
        let foundShortId = null;
        let foundValue = null;
        let foundIn = null;
        // PRIORITY 1: Hash fragments (always win)
        for (const sid of shortIds) {
            if (hashParams.has(sid)) {
                foundShortId = sid;
                foundValue = hashParams.get(sid);
                foundIn = 'hash';
                break;
            }
        }
        // PRIORITY 2: Query string (if no hash match)
        if (!foundShortId) {
            for (const sid of shortIds) {
                if (queryParams.has(sid)) {
                    foundShortId = sid;
                    foundValue = queryParams.get(sid);
                    foundIn = 'query';
                    break;
                }
            }
        }
        if (foundShortId && foundValue !== null) {
            debugLogger.log('HASH', {
                event: 'url-param-detected',
                widgetId: id,
                shortId: foundShortId,
                value: foundValue,
                foundIn,
                timestamp: Date.now()
            });
            // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
            if (resultsMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionType.NewSelection && onModeResetNeeded) {
                debugLogger.log('HASH', {
                    event: 'mode-reset-needed-on-hash-detection',
                    widgetId: id,
                    currentMode: resultsMode,
                    timestamp: Date.now()
                });
                onModeResetNeeded();
            }
            onInitialValueFound({ shortId: foundShortId, value: foundValue });
        }
        else {
            // No matching parameters found - clear state
            onInitialValueFound(undefined);
        }
        this.isProcessing = false;
    }
    /**
     * Removes a hash parameter from the URL.
     * Used when switching to accumulation modes to consume the deep link.
     */
    removeHashParameter(shortId, widgetId) {
        if (!shortId)
            return;
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        if (urlParams.has(shortId)) {
            urlParams.delete(shortId);
            const newHash = urlParams.toString();
            debugLogger.log('HASH', {
                event: 'removeHashParameter',
                widgetId,
                shortId,
                newHash: newHash ? `#${newHash}` : '(empty)',
                timestamp: Date.now()
            });
            // Update the URL without triggering a reload
            // Always preserve pathname and query string, only update hash
            window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
            // Reset tracking so it can be processed again if needed
            this.lastProcessedHash = '';
        }
    }
    /**
     * Sets up the manager (no autonomous URL checking).
     * QuerySimple should only process hash parameters when HelperSimple explicitly triggers it
     * via OPEN_WIDGET_EVENT. This ensures HelperSimple remains the orchestrator.
     */
    setup(props, resultsMode, callbacks) {
        // Do NOT automatically check URL parameters
        // Do NOT set up hashchange listener
        // QuerySimple will only process hash when HelperSimple explicitly opens the widget
        // This ensures HelperSimple remains the orchestrator
    }
    /**
     * Cleans up hash change listener.
     */
    cleanup() {
        if (this.hashChangeHandler) {
            window.removeEventListener('hashchange', this.hashChangeHandler);
            this.hashChangeHandler = null;
        }
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts":
/*!*****************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WidgetVisibilityManager: () => (/* binding */ WidgetVisibilityManager)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify HelperSimple of widget open/close state.
 */
const QUERYSIMPLE_WIDGET_STATE_EVENT = 'querysimple-widget-state-changed';
/**
 * Utility to manage widget panel visibility detection and HelperSimple notification.
 *
 * Uses IntersectionObserver for efficient DOM-level visibility tracking.
 * Falls back to periodic checking if IntersectionObserver is not available.
 *
 * Part of Chunk 2: Widget Visibility Engine extraction.
 *
 * Note: This is a utility class (not a hook) to work with class components.
 */
class WidgetVisibilityManager {
    constructor() {
        this.visibilityObserver = null;
        this.visibilityCheckInterval = null;
        this.isPanelVisible = false;
        this.widgetElement = null;
    }
    /**
     * Checks if the widget element is currently visible.
     * Fallback method when IntersectionObserver is not available.
     */
    checkVisibility() {
        if (!this.widgetElement)
            return false;
        const element = this.widgetElement;
        const style = window.getComputedStyle(element);
        const rect = element.getBoundingClientRect();
        const isVisible = (style.display !== 'none' &&
            style.visibility !== 'hidden' &&
            style.opacity !== '0' &&
            rect.width > 0 &&
            rect.height > 0 &&
            rect.top < window.innerHeight &&
            rect.bottom > 0 &&
            rect.left < window.innerWidth &&
            rect.right > 0);
        return isVisible;
    }
    /**
     * Notifies HelperSimple of panel visibility state changes.
     */
    notifyHelperSimpleOfPanelState(isVisible, widgetId) {
        const event = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: isVisible
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(event);
        debugLogger.log('WIDGET-STATE', {
            event: isVisible ? 'panel-opened' : 'panel-closed',
            widgetId,
            isVisible,
            method: 'notifyHelperSimpleOfPanelState',
            timestamp: new Date().toISOString()
        });
    }
    /**
     * Logs visibility state changes and calls callbacks.
     */
    logVisibilityChange(isVisible, method, widgetId, callbacks) {
        debugLogger.log('WIDGET-STATE', {
            event: isVisible ? 'panel-opened' : 'panel-closed',
            widgetId,
            isVisible,
            method,
            timestamp: new Date().toISOString()
        });
        // Notify HelperSimple
        this.notifyHelperSimpleOfPanelState(isVisible, widgetId);
        // Call optional callback
        if (callbacks.onVisibilityChange) {
            callbacks.onVisibilityChange(isVisible);
        }
    }
    /**
     * Sets up visibility detection.
     */
    setup(widgetElement, props, callbacks, onVisibilityStateChange) {
        const { id } = props;
        this.widgetElement = widgetElement;
        // Wait for next tick to ensure element is ready
        setTimeout(() => {
            if (!this.widgetElement) {
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup-failed',
                    widgetId: id,
                    reason: 'widget-element-not-available'
                });
                return;
            }
            const element = this.widgetElement;
            // Method 1: IntersectionObserver (most efficient)
            if ('IntersectionObserver' in window) {
                this.visibilityObserver = new IntersectionObserver((entries) => {
                    const entry = entries[0];
                    const isVisible = entry.isIntersecting && entry.intersectionRatio > 0;
                    // Only update if state changed
                    if (this.isPanelVisible !== isVisible) {
                        this.isPanelVisible = isVisible;
                        this.logVisibilityChange(isVisible, 'IntersectionObserver', id, callbacks);
                        onVisibilityStateChange(isVisible);
                    }
                }, {
                    threshold: [0, 0.1, 1.0], // Trigger at 0%, 10%, and 100% visibility
                    rootMargin: '0px'
                });
                this.visibilityObserver.observe(element);
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup',
                    widgetId: id,
                    method: 'IntersectionObserver'
                });
            }
            else {
                // Method 2: Fallback to periodic checking
                this.visibilityCheckInterval = window.setInterval(() => {
                    const isVisible = this.checkVisibility();
                    if (this.isPanelVisible !== isVisible) {
                        this.isPanelVisible = isVisible;
                        this.logVisibilityChange(isVisible, 'periodic-check', id, callbacks);
                        onVisibilityStateChange(isVisible);
                    }
                }, 250); // Check every 250ms
                debugLogger.log('WIDGET-STATE', {
                    event: 'visibility-detection-setup',
                    widgetId: id,
                    method: 'periodic-check'
                });
            }
        }, 100);
    }
    /**
     * Cleans up visibility detection observers/intervals.
     */
    cleanup() {
        // Clean up IntersectionObserver
        if (this.visibilityObserver) {
            this.visibilityObserver.disconnect();
            this.visibilityObserver = null;
        }
        // Clean up interval
        if (this.visibilityCheckInterval !== null) {
            clearInterval(this.visibilityCheckInterval);
            this.visibilityCheckInterval = null;
        }
        this.widgetElement = null;
    }
    /**
     * Gets current visibility state.
     */
    getIsPanelVisible() {
        return this.isPanelVisible;
    }
    /**
     * Notifies HelperSimple on mount.
     */
    notifyMount(widgetId) {
        const openEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: true
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(openEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-mounted',
            widgetId,
            timestamp: new Date().toISOString()
        });
    }
    /**
     * Notifies HelperSimple on unmount.
     */
    notifyUnmount(widgetId) {
        const closeEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId,
                isOpen: false
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(closeEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-unmounted',
            widgetId,
            timestamp: new Date().toISOString()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useZoomToRecords: () => (/* binding */ useZoomToRecords)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var _zoom_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../zoom-utils */ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts");
/**
 * Hook for zooming to feature records with padding.
 *
 * Wraps the shared zoomToRecords utility function in a React hook.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


/**
 * Custom hook that returns a function to zoom to records with padding.
 *
 * @param mapView - The map view to zoom
 * @returns A function that takes records and optional padding, and zooms to them
 */
function useZoomToRecords(mapView) {
    return react__WEBPACK_IMPORTED_MODULE_0__["default"].useCallback((records, options) => __awaiter(this, void 0, void 0, function* () {
        if (!mapView) {
            return;
        }
        yield (0,_zoom_utils__WEBPACK_IMPORTED_MODULE_1__.zoomToRecords)(mapView, records, options);
    }), [mapView]);
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveDraw: () => (/* binding */ InteractiveDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");

/** @jsx jsx */





const sketchToolInfoMap = {
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Point]: { drawToolName: 'point', esriClassName: 'esri-icon-point', toolIndex: 0 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polyline]: { drawToolName: 'polyline', esriClassName: 'esri-icon-polyline', toolIndex: 4 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polygon]: { drawToolName: 'polygon', esriClassName: 'esri-icon-polygon', toolIndex: 2 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Rectangle]: {
        drawToolName: 'rectangle',
        esriClassName: 'esri-icon-checkbox-unchecked',
        toolIndex: 1
    },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Circle]: { drawToolName: 'circle', esriClassName: 'esri-icon-radio-unchecked', toolIndex: 3 }
};
function InteractiveDraw(props) {
    const { toolTypes = [], jimuMapView, onDrawEnd, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [mapModule, setMapModule] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const graphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [clearAfterApply, setClearAfterApply] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const visibleElements = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return {
            createTools: Object.entries(sketchToolInfoMap).reduce((result, [key, value]) => (Object.assign(Object.assign({}, result), { [value.drawToolName]: toolTypes.includes(key) })), { point: false }),
            selectionTools: {
                'lasso-selection': false,
                'rectangle-selection': false
            },
            settingsMenu: false,
            undoRedoMenu: false,
            deleteButton: true
        };
    }, [toolTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.moduleLoader.loadModule('jimu-ui/advanced/map').then((result) => {
            setMapModule(result);
        });
    });
    const handleDrawToolCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuDrawToolsRef) => {
        getLayerFunRef.current = jimuDrawToolsRef.getGraphicsLayer;
    }, []);
    const handleDrawStart = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        getLayerFunRef.current && (getLayerFunRef.current)().removeAll();
    }, []);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic) => {
        graphicRef.current = graphic;
        onDrawEnd(graphic, getLayerFunRef.current, clearAfterApply);
    }, [onDrawEnd, clearAfterApply]);
    const handleCleared = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        graphicRef.current = null;
        onDrawEnd(null);
    }, [onDrawEnd]);
    const handleClearSettingChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        if (graphicRef.current) {
            onDrawEnd(graphicRef.current, getLayerFunRef.current, e.target.checked);
        }
        setClearAfterApply(e.target.checked);
    }, [onDrawEnd]);
    const JimuDraw = mapModule === null || mapModule === void 0 ? void 0 : mapModule.JimuDraw;
    if (!JimuDraw) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.StatusIndicator, { statusType: widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading });
    }
    const isAvailable = Object.keys(visibleElements.createTools).some(toolName => visibleElements.createTools[toolName]);
    if (!isAvailable) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JimuDraw, { jimuMapView: jimuMapView, operatorWidgetId: widgetId, disableSymbolSelector: true, drawingOptions: {
                    creationMode: mapModule.JimuDrawCreationMode.Single,
                    updateOnGraphicClick: false,
                    visibleElements: visibleElements
                }, uiOptions: {
                    isHideBorder: true
                }, onJimuDrawCreated: handleDrawToolCreated, onDrawingStarted: handleDrawStart, onDrawingFinished: handleDrawEnd, onDrawingCleared: handleCleared }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: clearAfterApply, onChange: handleClearSettingChange, className: 'mr-2' }), getI18nMessage('clearDrawing')] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingResult: () => (/* binding */ LoadingResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");





const Root = jimu_theme__WEBPACK_IMPORTED_MODULE_3__.styled.div `
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 2;

  .loading-content {
    .loading-tip {
      position: relative;
    }
  }
`;
function LoadingResult() {
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'loading-content w-100 px-4 d-flex flex-column justify-content-center align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { role: 'alert', "aria-live": 'assertive', className: 'text-paper', children: translate('retrieving') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { className: 'loading-tip mt-8', type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryResultItem: () => (/* binding */ QueryResultItem)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _components_feature_info__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/feature-info */ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  overflow: auto;
  flex-flow: row;
  cursor: pointer;
  flex-shrink: 0;
  min-height: 2rem;
  position: relative;
  &.selected {
    outline: 2px solid var(--sys-color-primary-main);
  }
  
  .remove-button {
    position: absolute;
    top: 4px;
    right: 4px;
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
    
    // Larger touch target for mobile/accessibility
    min-width: 32px;
    min-height: 32px;
  }
`;
/**
 * QueryResultItem component - displays a single query result record
 * Features:
 * - Clicking the item zooms to the feature on the map
 * - Remove button (trash icon) in upper-right corner to remove record from results
 * - Records are expanded by default to show full feature information
 */
const QueryResultItem = (props) => {
    const { widgetId, data, dataSource, popupTemplate, defaultPopupTemplate, onClick, onRemove, expandByDefault = false } = props;
    const recordId = data.getId();
    // Log when QueryResultItem renders
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'QueryResultItem-render',
            recordId,
            expandByDefault,
            timestamp: Date.now()
        });
    }, [recordId, expandByDefault]);
    // Check if this record is currently selected
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[dataSource.id]) === null || _b === void 0 ? void 0 : _b.selectedIds) === null || _c === void 0 ? void 0 : _c.includes(data.getId()); });
    // Determine if list is displayed vertically (affects FeatureInfo expandability)
    const isVerticalAlign = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection !== _config__WEBPACK_IMPORTED_MODULE_5__.ListDirection.Horizontal;
    });
    // Handle clicking on the result item - zooms to feature on map
    const handleClickResultItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        // Don't trigger zoom if clicking the remove button
        if (e.target.closest('.remove-button')) {
            return;
        }
        onClick(data);
    }, [onClick, data]);
    // Handle clicking the remove button - removes record from results and selection
    const handleRemove = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        e.stopPropagation(); // Prevent triggering the item click handler
        e.preventDefault();
        onRemove(data);
    }, [onRemove, data]);
    const onKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Enter' || evt.key === ' ') {
            evt.preventDefault();
            evt.stopPropagation();
            handleClickResultItem(evt);
        }
    }, [handleClickResultItem]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-result-item', { selected }), onClick: handleClickResultItem, onKeyUp: onKeyUp, css: style, role: 'option', "aria-selected": selected, tabIndex: 0, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_feature_info__WEBPACK_IMPORTED_MODULE_4__["default"], { graphic: data.feature, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, togglable: isVerticalAlign, expandByDefault: expandByDefault, dataSource: dataSource }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: "remove-button", icon: true, size: "sm", variant: "text", color: "inherit", onClick: handleRemove, "aria-label": "Remove record", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px;
          min-width: 32px;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__.TrashOutlined, { size: 18 }) })] }));
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskResult: () => (/* binding */ QueryTaskResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hooks/use-zoom-to-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts");
/* harmony import */ var _simple_list__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./simple-list */ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/directional/expand-all */ "./jimu-icons/outlined/directional/expand-all.tsx");
/* harmony import */ var jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jimu-icons/outlined/directional/collapse-all */ "./jimu-icons/outlined/directional/collapse-all.tsx");
/* harmony import */ var _data_actions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../data-actions */ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */






// FORCED: Always SimpleList - LazyList and PagingList removed










const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_16__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_3__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Detects if an identify popup is currently visible in the DOM.
 * Uses verified selectors based on Experience Builder's identify popup structure.
 *
 * @returns true if identify popup is detected and visible, false otherwise
 */
function isIdentifyPopupOpen() {
    // Primary selector: .esri-popup with role="dialog"
    const popup = document.querySelector('.esri-popup[role="dialog"]');
    if (!popup) {
        return false;
    }
    // Verify it's visible (not hidden)
    const ariaHidden = popup.getAttribute('aria-hidden');
    if (ariaHidden === 'true') {
        return false;
    }
    // Additional check: verify computed style shows it's visible
    const style = window.getComputedStyle(popup);
    if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
        return false;
    }
    // Verify it contains esri-features (identify popup structure)
    const hasFeatures = popup.querySelector('.esri-features');
    if (!hasFeatures) {
        return false;
    }
    return true;
}
const resultStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  display: flex;
  flex-direction: column;

  .query-result__header {
    color: var(--sys-color-surface-paper-text);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: 1.5;
    border-bottom: 1px solid var(--sys-color-divider-secondary);
    margin-bottom: 6px;
    padding-bottom: 8px;
  }

  .query-result-container {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    overflow: auto;
    min-height: 0;
  }

  .query-result-info {
    height: 18px;
  }
`;
function QueryTaskResult(props) {
    var _a, _b;
    const { queryItem, queryParams, resultCount, maxPerPage, records, widgetId, outputDS, runtimeZoomToSelected, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const intl = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
    const zoomToRecords = (0,_hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_6__.useZoomToRecords)(mapView);
    const [queryData, setQueryData] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [selectedRecords, setSelectedRecords] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState([]);
    const [removedRecordIds, setRemovedRecordIds] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Set());
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_QUERY_ITEM, queryItem);
    const [expandAll, setExpandAll] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    // Track individual item expansion states to maintain state when items are removed
    const [itemExpandStates, setItemExpandStates] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Map());
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Track expandAll changes for debugging
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-state-changed',
            widgetId,
            expandAll,
            queryItemConfigId: queryItem.configId,
            timestamp: Date.now()
        });
    }, [expandAll, widgetId, queryItem.configId]);
    // Track if we've already selected these records to prevent re-selection when switching tabs
    const hasSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track the last records we selected to detect when new records come in
    const lastSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the original query record IDs (not selected IDs) to detect when query results change
    const lastQueryRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the last selected FeatureDataRecords for restoration (if needed)
    const lastSelectedFeatureRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Ref to track removedRecordIds for use in callbacks (avoids stale closure issues)
    const removedRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(new Set());
    // Sync ref whenever removedRecordIds state changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        removedRecordIdsRef.current = removedRecordIds;
    }, [removedRecordIds]);
    // Error state for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const extraActions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,_data_actions__WEBPACK_IMPORTED_MODULE_13__.getExtraActions)(widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected);
    }, [widgetId, outputDS, mapView, intl, queryItem, runtimeZoomToSelected]);
    const enableDataAction = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_a = widgetJson.enableDataAction) !== null && _a !== void 0 ? _a : true;
    });
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    const directionTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection;
    });
    // FORCE SimpleList - ignore config, we're done with lazy loading issues
    const pagingType = _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.Simple;
    const direction = directionTypeInConfig !== null && directionTypeInConfig !== void 0 ? directionTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.ListDirection.Vertical;
    // Group records by origin data source for DataActionList
    // This ensures DataActionList recognizes records even when they come from different queries/origins
    const actionDataSets = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        // Debug: Log what records are available
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-calculation-start',
            widgetId: widgetId,
            selectedRecordsCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            queryDataRecordsCount: ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            hasSelectedRecords: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0,
            hasQueryDataRecords: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) > 0,
            hasRecordsProp: (records === null || records === void 0 ? void 0 : records.length) > 0
        });
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        // In accumulation modes (Add/Remove), prefer the 'records' prop (the accumulated set)
        // because outputDS.getSelectedRecords() will only return records that match the current query's where clause.
        const recordsToUse = isAccumulationMode
            ? (records || [])
            : ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0 ? selectedRecords : (((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.length) > 0 ? queryData.records : (records || [])));
        // If no records, return single DataRecordSet with empty records using outputDS
        if (!recordsToUse || recordsToUse.length === 0) {
            const emptyDataSet = {
                dataSource: outputDS,
                type: 'loaded',
                records: [],
                name: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                label: outputDS === null || outputDS === void 0 ? void 0 : outputDS.getLabel()
            };
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-empty-records',
                widgetId: widgetId,
                dataSetDataSourceId: (_d = emptyDataSet.dataSource) === null || _d === void 0 ? void 0 : _d.id
            });
            return [emptyDataSet];
        }
        // Group records by their origin data source
        const recordsByOriginDS = new Map();
        recordsToUse.forEach(record => {
            var _a, _b, _c, _d;
            const recordDS = (_b = (_a = record).getDataSource) === null || _b === void 0 ? void 0 : _b.call(_a);
            let originDS = null;
            if (recordDS) {
                originDS = ((_c = recordDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
            }
            else if (outputDS) {
                // Fallback: use outputDS's origin if record doesn't have dataSource
                originDS = ((_d = outputDS.getOriginDataSources()) === null || _d === void 0 ? void 0 : _d[0]) || outputDS;
            }
            if (originDS) {
                if (!recordsByOriginDS.has(originDS)) {
                    recordsByOriginDS.set(originDS, []);
                }
                recordsByOriginDS.get(originDS).push(record);
            }
        });
        // Create a DataRecordSet for each origin data source
        const dataSets = Array.from(recordsByOriginDS.entries()).map(([originDS, originRecords]) => {
            const dataSet = {
                dataSource: originDS, // Use origin DS, not outputDS
                type: 'selected',
                records: originRecords,
                name: originDS.id,
                label: originDS.getLabel()
            };
            // Add fields if needed (use currentItem's field settings)
            if (currentItem.resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_4__.FieldsType.SelectAttributes && currentItem.resultDisplayFields != null) {
                dataSet.fields = (0,_query_utils__WEBPACK_IMPORTED_MODULE_8__.combineFields)(currentItem.resultDisplayFields, currentItem.resultTitleExpression);
            }
            else if (originDS && 'getPopupInfo' in originDS) {
                // use fields in popup template from origin DS
                const popupInfo = originDS.getPopupInfo();
                if (popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) {
                    dataSet.fields = popupInfo.fieldInfos.filter((fieldInfo) => fieldInfo.visible).map((fieldInfo) => fieldInfo.fieldName);
                }
            }
            return dataSet;
        });
        // Debug: Log what the final dataSets contain
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-final',
            widgetId: widgetId,
            dataSetsCount: dataSets.length,
            totalRecordsCount: recordsToUse.length,
            dataSetsByOrigin: dataSets.map(ds => {
                var _a, _b;
                return ({
                    originDSId: (_a = ds.dataSource) === null || _a === void 0 ? void 0 : _a.id,
                    recordsCount: ((_b = ds.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                    type: ds.type
                });
            })
        });
        // If we couldn't group by origin (shouldn't happen), fallback to single DataRecordSet with outputDS
        if (dataSets.length === 0 && outputDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-fallback-to-outputDS',
                widgetId: widgetId,
                reason: 'could-not-determine-origin-ds'
            });
            return [{
                    dataSource: outputDS,
                    type: recordsToUse.length > 0 ? 'selected' : 'loaded',
                    records: recordsToUse,
                    name: outputDS.id,
                    label: outputDS.getLabel()
                }];
        }
        return dataSets;
    }, [selectedRecords, outputDS, queryData, currentItem, records, widgetId]);
    // Memoize filtered records to prevent unnecessary re-renders that reset scroll position
    // This ensures the records prop only changes when the actual data changes, not just the array reference
    const filteredRecordsForList = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        return ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.filter((record) => !removedRecordIds.has(record.getId()))) ||
            ((records === null || records === void 0 ? void 0 : records.filter(record => !removedRecordIds.has(record.getId()))) || []);
    }, [queryData === null || queryData === void 0 ? void 0 : queryData.records, records, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    /**
     * Effect hook that runs when new query results arrive.
     * Resets removed records, expand state, and query data for the new results.
     * Also handles auto-selection of records when they first arrive.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Check if these are new records (different from what we last queried)
        // IMPORTANT: Compare against original query results, not selected results
        // This prevents removedRecordIds from being reset when records are removed
        const currentRecordIds = (records === null || records === void 0 ? void 0 : records.map(record => record.getId())) || [];
        const recordsChanged = currentRecordIds.length !== lastQueryRecordIdsRef.current.length ||
            currentRecordIds.some((id, index) => id !== lastQueryRecordIdsRef.current[index]);
        // Debug: Log when records prop changes
        debugLogger.log('RESULTS-MODE', {
            event: 'records-prop-changed',
            widgetId: widgetId,
            recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            willSetQueryData: records && records.length > 0,
            removedRecordIdsCount: removedRecordIds.size,
            hasSelectedRef: hasSelectedRef.current,
            recordsChanged: recordsChanged,
            lastQueryRecordIdsCount: lastQueryRecordIdsRef.current.length,
            currentRecordIdsCount: currentRecordIds.length
        });
        // IMPORTANT: Only reset removed records if this is truly a NEW query with different records
        // Don't reset if records are the same (just a re-render or lazy load)
        if (recordsChanged) {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-truly-changed-resetting-removed',
                widgetId: widgetId,
                oldRecordIdsCount: lastQueryRecordIdsRef.current.length,
                newRecordIdsCount: currentRecordIds.length
            });
            setRemovedRecordIds(new Set());
            // Update the original query record IDs ref
            lastQueryRecordIdsRef.current = currentRecordIds;
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-not-changed-preserving-removed',
                widgetId: widgetId,
                recordIdsCount: currentRecordIds.length,
                removedRecordIdsCount: removedRecordIds.size
            });
        }
        // NOTE: Don't reset expandAll here - it's handled by the queryItem-change useEffect
        // Resetting it here causes the Expand/Collapse button to flip back when records are removed
        setQueryData({
            records,
            page: 1
        });
        // Only auto-select records if:
        // 1. We have records and outputDS
        // 2. We haven't already selected these records (hasSelectedRef is false)
        // 3. OR the records have actually changed (new query results)
        // 4. AND we don't have any removed records (to prevent re-selecting removed ones)
        if (records && records.length > 0 && outputDS &&
            (!hasSelectedRef.current || recordsChanged) &&
            removedRecordIds.size === 0) {
            const recordIds = records.map(record => record.getId());
            const fdr = records;
            (() => __awaiter(this, void 0, void 0, function* () {
                try {
                    setSelectionError(null); // Clear previous errors
                    yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                    hasSelectedRef.current = true; // Mark as selected
                    lastSelectedRecordsRef.current = recordIds; // Store the IDs we selected
                    lastSelectedFeatureRecordsRef.current = fdr; // Store the full records for potential restoration
                    // Notify Widget and HelperSimple of selection change
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.dispatchSelectionEvent)(widgetId, recordIds, outputDS, queryItem.configId);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-query-result',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }))();
        }
        else if (recordsChanged && records && records.length === 0) {
            // If records were cleared, reset the selection flag
            hasSelectedRef.current = false;
            lastSelectedRecordsRef.current = [];
            setSelectionError(null); // Clear errors when clearing records
        }
        else if (removedRecordIds.size > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'skipping-reselection-due-to-removed-records',
                widgetId: widgetId,
                removedRecordIdsCount: removedRecordIds.size,
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                hasSelectedRef: hasSelectedRef.current,
                recordsChanged: recordsChanged
            });
        }
    }, [records, outputDS, widgetId, queryItem.configId, queryItem.resultExpandByDefault, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear selection when resultSelectMode changed
        if (outputDS) {
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.publishSelectionMessage)(widgetId, [], outputDS, true);
        }
    }, [queryItem.resultSelectMode, outputDS, widgetId, useGraphicsLayerForHighlight, graphicsLayer]);
    // Update expandAll when queryItem changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        const newExpandAll = (_a = queryItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false;
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-reset-by-queryItem-change',
            widgetId,
            queryItemConfigId: queryItem.configId,
            resultExpandByDefault: queryItem.resultExpandByDefault,
            newExpandAll,
            timestamp: Date.now()
        });
        setExpandAll(newExpandAll);
        // Reset individual expansion states when query changes
        setItemExpandStates(new Map());
    }, [queryItem.configId]);
    /**
     * Monitor origin data source selection changes to detect when other widgets (like map identify)
     * clear our selections. Enhanced with identify popup detection for testing scenarios.
     * Watches the origin data source's selection state directly via polling.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (!outputDS)
            return;
        const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (!originDS)
            return;
        const originDSId = originDS.id;
        let previousSelectedIds = [];
        let identifyPopupWasOpen = false;
        let lastLogTime = 0;
        const LOG_THROTTLE_MS = 1000; // Throttle logs to once per second
        // Initial check
        previousSelectedIds = originDS.getSelectedRecordIds() || [];
        identifyPopupWasOpen = isIdentifyPopupOpen();
        // Watch for selection changes on the origin data source
        const checkSelection = () => {
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            const ourExpectedIds = lastSelectedRecordsRef.current;
            const hasOurSelection = ourExpectedIds.length > 0;
            const identifyPopupIsOpen = isIdentifyPopupOpen();
            // Detect if selection was cleared or changed externally
            const wasCleared = previousSelectedIds.length > 0 && currentSelectedIds.length === 0;
            const wasChanged = previousSelectedIds.length > 0 &&
                (currentSelectedIds.length !== previousSelectedIds.length ||
                    !currentSelectedIds.every(id => previousSelectedIds.includes(id)));
            // NEW: Detect if selection was added (went from empty to having records)
            const wasAdded = previousSelectedIds.length === 0 && currentSelectedIds.length > 0;
            // Track identify popup state changes
            const identifyPopupJustOpened = !identifyPopupWasOpen && identifyPopupIsOpen;
            const identifyPopupJustClosed = identifyPopupWasOpen && !identifyPopupIsOpen;
            const identifyPopupStillOpen = identifyPopupWasOpen && identifyPopupIsOpen;
            // Log identify popup state changes
            const now = Date.now();
            if (identifyPopupJustOpened || identifyPopupJustClosed) {
                debugLogger.log('SELECTION', {
                    event: identifyPopupJustOpened ? 'identify-popup-opened' : 'identify-popup-closed',
                    originDSId,
                    ourSelectionCount: ourExpectedIds.length,
                    currentSelectionCount: currentSelectedIds.length,
                    timestamp: new Date().toISOString()
                });
                // If identify popup just closed and selection was cleared, dispatch restore event
                if (identifyPopupJustClosed && wasCleared && hasOurSelection && ourExpectedIds.length > 0) {
                    const restoreEvent = new CustomEvent(RESTORE_ON_IDENTIFY_CLOSE_EVENT, {
                        detail: {
                            widgetId,
                            recordIds: ourExpectedIds,
                            outputDsId: outputDS.id,
                            queryItemConfigId: queryItem.configId
                        },
                        bubbles: true,
                        cancelable: true
                    });
                    window.dispatchEvent(restoreEvent);
                    debugLogger.log('SELECTION', {
                        event: 'identify-popup-closed-restore-requested',
                        widgetId,
                        recordCount: ourExpectedIds.length,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    });
                }
            }
            // Log ALL selection changes (not just when we have our own selection)
            if (wasCleared || wasChanged || wasAdded) {
                // Check if this matches our expected selection
                const matchesOurSelection = hasOurSelection &&
                    ourExpectedIds.length === currentSelectedIds.length &&
                    ourExpectedIds.every(id => currentSelectedIds.includes(id));
                // Determine what would happen (for testing/logging)
                const wouldRestore = wasCleared && identifyPopupIsOpen && hasOurSelection && ourExpectedIds.length > 0;
                // Determine scenario
                let scenario = 'Unknown';
                if (wasAdded && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 4: Another widget selected records (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 5: Another widget changed selection (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 2: Query  Identify (selection changed, not cleared)  Would NOT restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget  Would NOT restore';
                }
                else if (wasCleared && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 1: Query  Identify  Would restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget (cleared)  Would NOT restore';
                }
                else if (wasAdded && hasOurSelection) {
                    scenario = matchesOurSelection
                        ? 'Our widget selected records'
                        : 'Another widget selected different records';
                }
                // Log detection with identify popup state (throttled)
                if (now - lastLogTime > LOG_THROTTLE_MS) {
                    debugLogger.log('SELECTION', {
                        event: wasCleared ? 'selection-cleared' : wasChanged ? 'selection-changed' : 'selection-added',
                        originDSId,
                        ourExpectedCount: ourExpectedIds.length,
                        previousSelectedCount: previousSelectedIds.length,
                        currentSelectedCount: currentSelectedIds.length,
                        wasCleared,
                        wasChanged,
                        wasAdded,
                        hasOurSelection,
                        matchesOurSelection,
                        identifyPopupIsOpen,
                        identifyPopupJustOpened,
                        identifyPopupStillOpen,
                        identifyPopupJustClosed,
                        wouldRestore,
                        ourExpectedIds: ourExpectedIds.slice(0, 5),
                        previousSelectedIds: previousSelectedIds.slice(0, 5),
                        currentSelectedIds: currentSelectedIds.slice(0, 5),
                        timestamp: new Date().toISOString(),
                        note: wouldRestore
                            ? 'Would restore selection (cleared + identify popup open)'
                            : identifyPopupIsOpen && wasChanged
                                ? 'Identify popup open but selection changed (not cleared) - would not restore'
                                : wasCleared && !identifyPopupIsOpen
                                    ? 'Selection cleared, checking if identify popup opens...'
                                    : wasAdded
                                        ? hasOurSelection && matchesOurSelection
                                            ? 'Our widget selected records'
                                            : hasOurSelection && !matchesOurSelection
                                                ? 'Another widget selected different records'
                                                : 'Selection added (by another widget or external source)'
                                        : 'No identify popup detected - would not restore'
                    });
                    lastLogTime = now;
                }
            }
            previousSelectedIds = [...currentSelectedIds];
            identifyPopupWasOpen = identifyPopupIsOpen;
        };
        // Check periodically (every 500ms)
        const intervalId = setInterval(checkSelection, 500);
        return () => {
            clearInterval(intervalId);
        };
    }, [outputDS]);
    /**
     * Clears all results. Resets local state and delegates to parent's clearResult method.
     */
    const clearResults = () => __awaiter(this, void 0, void 0, function* () {
        // Log hash state before clearing
        const hashBefore = window.location.hash.substring(1);
        const urlParamsBefore = new URLSearchParams(hashBefore);
        const hashParamsBefore = {};
        urlParamsBefore.forEach((value, key) => {
            hashParamsBefore[key] = value;
        });
        debugLogger.log('HASH', {
            event: 'clearResults-called',
            widgetId,
            hashBefore: hashBefore,
            hashParamsBefore: hashParamsBefore,
            hashParamsCount: Object.keys(hashParamsBefore).length,
            timestamp: Date.now()
        });
        // Reset local selection flags
        hasSelectedRef.current = false;
        lastSelectedRecordsRef.current = [];
        // Reset local query data state
        setQueryData(null);
        setRemovedRecordIds(new Set());
        // Clear error state when clearing results
        setSelectionError(null);
        // Delegate to parent's clearResult method (via onNavBack) which handles
        // clearing selection from map, publishing messages, etc.
        yield onNavBack(true);
        // Log hash state after clearing (with delay to catch async updates)
        setTimeout(() => {
            const hashAfter = window.location.hash.substring(1);
            const urlParamsAfter = new URLSearchParams(hashAfter);
            const hashParamsAfter = {};
            urlParamsAfter.forEach((value, key) => {
                hashParamsAfter[key] = value;
            });
            debugLogger.log('HASH', {
                event: 'clearResults-completed',
                widgetId,
                hashBefore: hashBefore,
                hashAfter: hashAfter,
                hashParamsBefore: hashParamsBefore,
                hashParamsAfter: hashParamsAfter,
                hashParamsRemoved: Object.keys(hashParamsBefore).length - Object.keys(hashParamsAfter).length,
                hashParamsCountBefore: Object.keys(hashParamsBefore).length,
                hashParamsCountAfter: Object.keys(hashParamsAfter).length,
                stillHasHashParams: Object.keys(hashParamsAfter).length > 0,
                timestamp: Date.now()
            });
        }, 100);
    });
    const handleRenderDone = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(({ dataItems, pageSize, page }) => {
        debugLogger.log('RESULTS-MODE', {
            event: 'handleRenderDone-called',
            widgetId,
            queryItemConfigId: queryItem.configId,
            dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
            pageSize,
            page,
            timestamp: Date.now()
        });
        // Use ref to get latest removedRecordIds (avoids stale closure issues with lazy loading)
        const currentRemovedIds = removedRecordIdsRef.current;
        // Filter out removed records FIRST - before any selection logic
        // This ensures removed records stay removed even during lazy loading
        const filteredItems = (dataItems === null || dataItems === void 0 ? void 0 : dataItems.filter(item => !currentRemovedIds.has(item.getId()))) || [];
        // Check if queryData has actually changed before updating state
        // This prevents unnecessary re-renders that reset scroll position
        const currentRecords = (queryData === null || queryData === void 0 ? void 0 : queryData.records) || [];
        const currentRecordIds = currentRecords.map(r => r.getId()).sort();
        const newRecordIds = filteredItems.map(r => r.getId()).sort();
        const dataChanged = currentRecordIds.length !== newRecordIds.length ||
            !currentRecordIds.every((id, idx) => id === newRecordIds[idx]) ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.pageSize) !== pageSize ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.page) !== page;
        // Only update state if data has actually changed
        if (dataChanged) {
            setQueryData({
                records: filteredItems,
                pageSize,
                page
            });
        }
        // Only select records that are NOT removed
        // IMPORTANT: Only re-select if the selection has actually changed to avoid resetting scroll position
        if (filteredItems && filteredItems.length > 0 && outputDS) {
            const recordIds = filteredItems.map(record => record.getId());
            const fdr = filteredItems;
            // Check what's currently selected to avoid unnecessary re-selection (which resets scroll)
            const currentlySelectedIds = outputDS.getSelectedRecordIds() || [];
            const selectionChanged = currentlySelectedIds.length !== recordIds.length ||
                !recordIds.every(id => currentlySelectedIds.includes(id));
            // Only select if the selection has actually changed
            if (selectionChanged) {
                try {
                    setSelectionError(null); // Clear previous errors
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
                    debugLogger.log('RESULTS-MODE', {
                        event: 'handleRenderDone-selecting-filtered-records',
                        widgetId: widgetId,
                        dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                        filteredItemsCount: filteredItems.length,
                        removedRecordIdsCount: currentRemovedIds.size,
                        selectionChanged: true,
                        currentlySelectedCount: currentlySelectedIds.length,
                        newSelectionCount: recordIds.length
                    });
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-handleRenderDone',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'handleRenderDone-skipping-reselection',
                    widgetId: widgetId,
                    dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                    filteredItemsCount: filteredItems.length,
                    removedRecordIdsCount: currentRemovedIds.size,
                    reason: 'selection-unchanged',
                    currentlySelectedCount: currentlySelectedIds.length
                });
            }
        }
    }, [outputDS, widgetId, queryData]);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(outputDS === null || outputDS === void 0 ? void 0 : outputDS.id);
        const dsRecords = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        const selectedIds = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
        // Capture records prop before using it (to avoid shadowing)
        const recordsProp = records;
        // Debug: Log what handleDataSourceInfoChange sees
        debugLogger.log('RESULTS-MODE', {
            event: 'handleDataSourceInfoChange-fired',
            widgetId: widgetId,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            dsId: ds === null || ds === void 0 ? void 0 : ds.id,
            selectedRecordsFromDS: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
            selectedIdsFromDS: selectedIds.length,
            currentSelectedRecordsState: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            recordsPropCount: (recordsProp === null || recordsProp === void 0 ? void 0 : recordsProp.length) || 0,
            removedRecordIdsCount: removedRecordIds.size,
            timestamp: Date.now()
        });
        // If we have records in the prop (accumulated records) but DS shows 0 selected,
        // and we currently have selectedRecords, this is likely a query switch in "Add to" mode
        // where re-selection hasn't happened yet. Don't clear selectedRecords - wait for re-selection.
        if (recordsProp && recordsProp.length > 0 && selectedIds.length === 0 && selectedRecords && selectedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-clear-during-query-switch',
                widgetId: widgetId,
                reason: 'waiting-for-reselection',
                recordsPropCount: recordsProp.length,
                currentSelectedRecordsCount: selectedRecords.length
            });
            return; // Skip updating - re-selection is coming
        }
        // IMPORTANT: Filter out removed records from DS selection before comparing/syncing
        // This prevents removed records from being re-added when scrolling triggers this callback
        const filteredDsRecords = (_b = dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.filter((record) => !removedRecordIds.has(record.getId()))) !== null && _b !== void 0 ? _b : [];
        const filteredSelectedIds = selectedIds.filter(id => !removedRecordIds.has(id));
        // If DS has more selected than our state, but the difference is entirely removed records, don't sync
        if (filteredSelectedIds.length === ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0) && selectedIds.length > filteredSelectedIds.length) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-sync-due-to-removed-records',
                widgetId: widgetId,
                reason: 'ds-selection-includes-removed-records',
                dsSelectedCount: selectedIds.length,
                filteredCount: filteredSelectedIds.length,
                componentStateCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                removedRecordIdsCount: removedRecordIds.size
            });
            return; // Skip syncing - the mismatch is due to removed records
        }
        let shouldUpdate = false;
        if (filteredSelectedIds.length !== (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length)) {
            shouldUpdate = true;
        }
        else { // equal length
            shouldUpdate = filteredSelectedIds.some(id => {
                const target = selectedRecords.find((item) => item.getId() === id);
                return target == null;
            });
        }
        if (shouldUpdate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                note: 'filtered-out-removed-records'
            });
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                oldSelectedIds: (selectedRecords || []).map(r => r.getId()).slice(0, 5),
                newSelectedIds: filteredSelectedIds.slice(0, 5),
                note: 'filtered-out-removed-records',
                timestamp: Date.now()
            });
            setSelectedRecords(filteredDsRecords);
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-update',
                widgetId: widgetId,
                reason: 'no-change-detected',
                timestamp: Date.now()
            });
        }
    }, [outputDS === null || outputDS === void 0 ? void 0 : outputDS.id, selectedRecords, widgetId, records, removedRecordIds]);
    /**
     * Generates the tip message showing how many features are displayed.
     * Filters out removed records to show accurate counts.
     *
     * @returns Formatted string like "Features displayed: 118 / 121"
     */
    const getTipMessage = () => {
        if (queryData && queryData.records) {
            // Filter out removed records for display count
            const displayedRecords = queryData.records.filter((record) => !removedRecordIds.has(record.getId()));
            const displayedCount = displayedRecords.length;
            // FORCED: Always SimpleList, so always use simple display format
            return `${getI18nMessage('featuresDisplayed')}: ${displayedCount} / ${resultCount}`;
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
        }
        return '';
    };
    /**
     * Toggles expand/collapse state for all result items.
     * When toggled, all result items will be expanded or collapsed together.
     * Updates individual item expansion states in the map to maintain state when items are removed.
     */
    const toggleExpandAll = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setExpandAll(prev => {
            const newValue = !prev;
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'toggleExpandAll-clicked',
                widgetId,
                previousValue: prev,
                newValue,
                timestamp: Date.now()
            });
            // Update all current items in the map with the new expansion state
            setItemExpandStates(prevMap => {
                const newMap = new Map(prevMap);
                // Get all current record IDs from filtered records
                const allRecordIds = filteredRecordsForList.map(r => r.getId());
                allRecordIds.forEach(id => {
                    newMap.set(id, newValue);
                });
                debugLogger.log('EXPAND-COLLAPSE', {
                    event: 'itemExpandStates-updated',
                    widgetId,
                    newValue,
                    updatedCount: allRecordIds.length,
                    recordIds: allRecordIds.slice(0, 10), // Log first 10 IDs
                    timestamp: Date.now()
                });
                return newMap;
            });
            return newValue;
        });
    }, [widgetId, filteredRecordsForList]);
    const resultUseOutputDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
            dataSourceId: queryItem.outputDataSourceId,
            mainDataSourceId: queryItem.outputDataSourceId
        });
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.outputDataSourceId]);
    const handleEscape = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    }, []);
    // Keep records selected and zoom to clicked record
    // Records remain selected as long as they're in the results
    // Clicking a record always zooms to it on the map (this behavior is always enabled)
    const toggleSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        // Ensure the clicked record is selected (it should already be, but ensure it)
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        const dataId = data.getId();
        // If this record isn't already selected, add it to the selection
        if (!selectedIds.includes(dataId)) {
            const updatedSelectedDatas = [...selectedDatas, data];
            const recordIds = updatedSelectedDatas.map(record => record.getId());
            // Select records and publish selection message using utility function
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
        }
        // Zoom to the clicked record with padding (always enabled - user wants to keep this behavior)
        // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
        if (!mapView && !useGraphicsLayerForHighlight) {
            debugLogger.log('BUG', {
                bugId: 'BUG-GRAPHICS-001',
                category: 'GRAPHICS',
                event: 'zoom-operation-failed-graphics-layer-disabled',
                widgetId,
                operation: 'result-item-click-zoom',
                recordId: data.getId(),
                description: 'Zoom operation attempted on result item click but mapView is unavailable because useGraphicsLayerForHighlight is disabled',
                workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                targetResolution: 'r019.0'
            });
        }
        zoomToRecords([data]).catch(error => {
            // Silently handle errors - zoom is non-critical
        });
    }, [outputDS, widgetId, zoomToRecords]);
    /**
     * Removes a record from the results and selection.
     * If removing the last record, automatically clears all results
     * by calling the trash can logic (same as clicking Clear button).
     * This ensures the UI doesn't show "Features displayed: 0 / 1" when all results are removed.
     *
     * @param data - The feature data record to remove
     */
    const removeRecord = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        const dataId = data.getId();
        const currentExpandAll = expandAll;
        // Log hash state when removing individual record
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        const hashParams = {};
        urlParams.forEach((value, key) => {
            hashParams[key] = value;
        });
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'removeRecord-started',
            widgetId,
            removedRecordId: dataId,
            currentExpandAll,
            timestamp: Date.now()
        });
        debugLogger.log('HASH', {
            event: 'removeRecord-called',
            widgetId,
            removedRecordId: dataId,
            hash: hash,
            hashParams: hashParams,
            hashParamsCount: Object.keys(hashParams).length,
            timestamp: Date.now()
        });
        // Remove from expansion states map
        setItemExpandStates(prevMap => {
            const newMap = new Map(prevMap);
            newMap.delete(dataId);
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'itemExpandStates-cleaned-up',
                widgetId,
                removedRecordId: dataId,
                remainingCount: newMap.size,
                timestamp: Date.now()
            });
            return newMap;
        });
        // Add to removed records set
        setRemovedRecordIds(prev => {
            var _a, _b;
            const newSet = new Set(prev).add(dataId);
            // If all records are now removed, clear everything by calling trash can logic
            // IMPORTANT: Compare against actual displayed records count, not resultCount
            // resultCount only reflects the latest query, but in "Add to" mode we display accumulated records
            // Use queryData.records.length (before filtering) as the source of truth for displayed records
            // Fall back to accumulatedRecords.length if in accumulation mode, or resultCount as last resort
            let currentDisplayedCount = ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            if (currentDisplayedCount === 0) {
                // If queryData doesn't have records yet, check if we're in accumulation mode
                const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
                    resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
                if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                    currentDisplayedCount = accumulatedRecords.length;
                }
                else {
                    // Last resort: use resultCount (but this might be incorrect in accumulation mode)
                    currentDisplayedCount = resultCount;
                }
            }
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-checking-all-removed',
                widgetId,
                removedRecordIdsSize: newSet.size,
                currentDisplayedCount,
                resultCount,
                queryDataRecordsCount: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                resultsMode,
                willNavigateBack: newSet.size === currentDisplayedCount && currentDisplayedCount > 0,
                timestamp: Date.now()
            });
            if (newSet.size === currentDisplayedCount && currentDisplayedCount > 0) {
                // All displayed records removed - clear everything (same as clicking trash can button)
                onNavBack(true);
                return newSet;
            }
            return newSet;
        });
        // Update queryData to filter out the removed record
        setQueryData(prevData => {
            if (!prevData)
                return prevData;
            const filteredRecords = prevData.records.filter((record) => record.getId() !== dataId);
            return Object.assign(Object.assign({}, prevData), { records: filteredRecords });
        });
        // ALWAYS remove from origin data source selections (same as Remove mode)
        // This properly removes records from the map selection, handling single or multiple origin sources
        // Also removes graphics from graphics layer if using graphics layer highlighting
        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_15__.removeRecordsFromOriginSelections)(widgetId, [data], outputDS, useGraphicsLayerForHighlight, graphicsLayer);
        // Update outputDS selection
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const updatedSelectedDatas = selectedDatas.filter(record => record.getId() !== dataId);
        const recordIds = updatedSelectedDatas.map(record => record.getId());
        // Update outputDS selection
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, updatedSelectedDatas);
        }
        // IMPORTANT: Publish custom event so widget can update lastSelection state
        // This ensures restoration restores the correct (updated) count
        const originDS = (_b = outputDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0];
        const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
        const selectionEvent = new CustomEvent('querysimple-selection-changed', {
            detail: {
                widgetId,
                recordIds, // Updated record IDs (with removed record excluded)
                dataSourceId,
                outputDsId: outputDS.id,
                queryItemConfigId: queryItem.configId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(selectionEvent);
        // If in accumulation mode, also remove from accumulated records
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
            resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        if (isAccumulationMode && onAccumulatedRecordsChange && accumulatedRecords && accumulatedRecords.length > 0) {
            const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_15__.removeResultsFromAccumulated)(outputDS, [data], accumulatedRecords);
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removed-from-accumulated',
                widgetId,
                removedRecordId: dataId,
                accumulatedRecordsCountBefore: accumulatedRecords.length,
                remainingRecordsCount: remainingRecords.length,
                wasRemoved: remainingRecords.length < accumulatedRecords.length
            });
            onAccumulatedRecordsChange(remainingRecords);
        }
        // Log after removeRecord completes to check if expandAll changed
        setTimeout(() => {
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-completed',
                widgetId,
                removedRecordId: dataId,
                expandAllBefore: currentExpandAll,
                expandAllAfter: expandAll,
                expandAllChanged: currentExpandAll !== expandAll,
                expandByDefaultProp: expandAll, // What will be passed to SimpleList
                timestamp: Date.now()
            });
        }, 0);
    }, [outputDS, widgetId, resultCount, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, queryItem.configId, expandAll]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result h-100', css: resultStyle, role: 'listbox', "aria-label": getI18nMessage('results'), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: resultUseOutputDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding: 0 16px; margin-top: 8px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_16__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result__header d-flex align-items-center mx-4', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { "aria-label": getI18nMessage('back'), ref: backBtnRef, className: 'p-0 mr-2', size: 'sm', variant: 'text', color: 'inherit', icon: true, onClick: () => { onNavBack(); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_10__.ArrowLeftOutlined, { autoFlip: true }) }), (_b = currentItem.resultsLabel) !== null && _b !== void 0 ? _b : getI18nMessage('results'), ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, size: 'sm', variant: 'text', color: 'inherit', onClick: clearResults, "aria-label": getI18nMessage('clearResult'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: iconMap.toolDelete }) }) }), enableDataAction && outputDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `width: 1px; height: 16px; background-color: var(--sys-color-divider-input);` }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionList, { widgetId: widgetId, dataSets: actionDataSets, listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionListStyle.Dropdown, buttonSize: 'sm', buttonType: 'tertiary', extraActions: extraActions })] }))] }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-container mt-1', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-info mb-2 px-4 d-flex align-items-center justify-content-between', role: 'alert', "aria-live": 'polite', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: getTipMessage() }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), placement: 'top', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, onClick: toggleExpandAll, "aria-label": expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), children: expandAll ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_12__.CollapseAllOutlined, {}) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_11__.ExpandAllOutlined, {}) }) }) })] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_simple_list__WEBPACK_IMPORTED_MODULE_7__.SimpleList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, records: filteredRecordsForList, direction: direction, onEscape: handleEscape, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll, itemExpandStates: itemExpandStates, removedRecordIds: removedRecordIds, onRenderDone: handleRenderDone }, 'simple'))] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskContext: () => (/* binding */ QueryTaskContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    resetSymbol: null
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskForm: () => (/* binding */ QueryTaskForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-spatial-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");

/** @jsx jsx */











const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__.createQuerySimpleDebugLogger)();



/**
 * Event-Driven Hash Parameter Execution Pattern
 *
 * CRITICAL: This is the ONLY execution path for hash-triggered queries.
 *
 * Flow:
 * 1. Hash value set in state as STRING (e.g., "5568900000")
 * 2. DOM manipulation triggers SqlExpressionRuntime to process the value
 * 3. SqlExpressionRuntime converts string  array format [{value: "...", label: "..."}]
 * 4. handleSqlExprObjChange detects conversion  dispatches QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT
 * 5. Event listener in query-task.tsx executes query (OR handleSqlExprObjChange calls applyQuery directly)
 *
 * WHY THIS PATTERN EXISTS:
 * - SqlExpressionRuntime ONLY fires onChange when value is converted to array format
 * - Queries REQUIRE array format - executing with string format returns unfiltered results (1000 records)
 * - We MUST wait for conversion before executing queries
 *
 * ANTI-PATTERN TO AVOID:
 * - DO NOT add useEffect hooks that execute queries based on string values
 * - DO NOT execute queries before QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT is dispatched
 * - DO NOT circumvent the event-driven flow with early execution checks
 *
 * If you need to execute a query, wait for the conversion event or call applyQuery()
 * AFTER handleSqlExprObjChange has detected the conversion and dispatched the event.
 */
const QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT = 'querysimple-hash-value-converted';
const getFormStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    .form-title {
      color: var(--sys-color-surface-paper-text);
      font-weight: 500;
      font-size: 0.8125rem;
      line-height: 1.5;
      margin-top: 0 !important;
    }
    .query-form__content {
      flex: 1 1 ${isAutoHeight ? 'auto' : 'auto'};
      max-height: ${isAutoHeight ? '61.8vh' : 'none'};
      overflow: auto;
      padding-bottom: 0;
    }
    .query-form__actions {
      flex-shrink: 0;
      margin-top: 0;
      padding-top: 4px;
    }
  `;
};
function QueryTaskForm(props) {
    var _a;
    const { widgetId, configId, outputDS, spatialFilterEnabled, datasourceReady, onFormSubmit, dataActionFilter, initialInputValue, onHashParameterUsed, queryItemShortId, activeTab, onTabChange } = props;
    const preDataActionFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.usePrevious(dataActionFilter);
    const queryItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.queryItems.find(item => item.configId === configId);
    });
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_8__["default"]);
    const [resetSymbol, setResetSymbol] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Runtime zoom preference - initialized with config value, can be overridden by user
    const [runtimeZoomToSelected, setRuntimeZoomToSelected] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    // Sync runtime zoom preference when query item changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setRuntimeZoomToSelected((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected, queryItem === null || queryItem === void 0 ? void 0 : queryItem.configId]);
    // const [dataSource, setDataSource] = React.useState<DataSource>(null)
    const { useAttributeFilter, useSpatialFilter, spatialFilterTypes, sqlExprObj, spatialMapWidgetIds, spatialInteractiveCreateToolTypes, spatialRelationUseDataSources, spatialIncludeRuntimeData, spatialRelations, spatialRelationEnableBuffer, spatialRelationBufferDistance, spatialRelationBufferUnit, spatialInteractiveEnableBuffer, spatialInteractiveBufferDistance, spatialInteractiveBufferUnit, attributeFilterLabel = getI18nMessage('attributeFilter'), spatialFilterLabel = getI18nMessage('spatialFilter'), attributeFilterDesc, spatialFilterDesc } = currentItem;
    const [attributeFilterSqlExprObj, setAttributeFilterSqlExprObj] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(sqlExprObj);
    // Ref to track current SQL expression for synchronous access in applyQuery
    // This ensures hash values are immediately available when Apply is clicked
    const attributeFilterSqlExprObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(sqlExprObj);
    const spatialFilterObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const spatialRelationRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(_config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect);
    const bufferRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const applyButtonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const formContentRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_10__.useAutoHeight)();
    const showClauseNumber = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef((0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj));
    const initialValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track which configId we've set the value for
    const lastValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track the last value that was set
    const hashTriggeredRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false); // Track if query was triggered via hash parameter
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track previous configId to detect query switches
    const [isTypingValid, setIsTypingValid] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    // Monitor focus and input events within the query form
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleFocus = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                setIsTypingValid((0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val));
                debugLogger.log('FORM', {
                    event: 'input-focused',
                    configId,
                    tagName: target.tagName,
                    type: target.type,
                    value: val
                });
            }
        };
        const handleInput = (e) => {
            const target = e.target;
            if (target.tagName === 'INPUT') {
                const val = target.value;
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val);
                setIsTypingValid(isValid);
                debugLogger.log('FORM', {
                    event: 'input-typing',
                    configId,
                    value: val,
                    isTypingValid: isValid
                });
            }
        };
        const handleFocusOut = (e) => {
            // Small delay to allow state to catch up
            setTimeout(() => {
                setIsTypingValid(false);
            }, 50);
        };
        const container = formContentRef.current;
        if (container) {
            container.addEventListener('focusin', handleFocus);
            container.addEventListener('input', handleInput);
            container.addEventListener('focusout', handleFocusOut);
        }
        return () => {
            if (container) {
                container.removeEventListener('focusin', handleFocus);
                container.removeEventListener('input', handleInput);
                container.removeEventListener('focusout', handleFocusOut);
            }
        };
    }, [configId]);
    // Check if any attribute filter input is valid
    const isInputValid = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        // If the user is currently typing something valid, the form is valid
        if (isTypingValid) {
            debugLogger.log('FORM', {
                event: 'validation-check-instant',
                configId,
                isValid: true
            });
            return true;
        }
        if (!(attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) || attributeFilterSqlExprObj.parts.length === 0) {
            return true; // If no parts, we assume it's valid (e.g. spatial-only query)
        }
        // Check if at least one SINGLE part has a valid value
        const hasValidValue = attributeFilterSqlExprObj.parts.some(part => {
            var _a, _b, _c, _d;
            // Accessing Immutable structures requires care. If dot notation fails, 
            // the framework components might be using .get() or other methods.
            // We'll be inclusive here: if it's not a SINGLE part, we treat it as valid.
            if (part.type === 'SINGLE') {
                const val = (_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value;
                const source = (_b = part.valueOptions) === null || _b === void 0 ? void 0 : _b.source;
                // If the source is NOT 'USER_INPUT', it's likely a list/dropdown (UNIQUE_VALUES, FIELD_VALUE)
                // We also check for part.dataSource which is common for list-based selections
                // We treat these as "List" types which are exempted from the empty-string rule.
                const isList = (source && source !== 'USER_INPUT') || ((_c = part.dataSource) === null || _c === void 0 ? void 0 : _c.source);
                const isValid = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.isQueryInputValid)(val, !!isList);
                debugLogger.log('FORM', {
                    event: 'validation-check-detail',
                    configId,
                    partType: part.type,
                    source,
                    hasDataSource: !!part.dataSource,
                    dataSourceSource: (_d = part.dataSource) === null || _d === void 0 ? void 0 : _d.source,
                    isList: !!isList,
                    value: val,
                    isValid
                });
                debugLogger.log('FORM', {
                    event: 'validation-check',
                    configId,
                    partType: part.type,
                    source,
                    isList,
                    value: val,
                    valueType: typeof val,
                    isValid
                });
                return isValid;
            }
            return true;
        });
        return hasValidValue;
    }, [attributeFilterSqlExprObj, configId, isTypingValid]);
    const originDS = outputDS === null || outputDS === void 0 ? void 0 : outputDS.getOriginDataSources()[0];
    // Track configId changes (query switches)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('FORM', {
            event: 'configId-changed',
            configId,
            previousConfigId: initialValueSetRef.current,
            initialInputValue,
            timestamp: Date.now()
        });
    }, [configId, initialInputValue, datasourceReady, outputDS, widgetId, hashTriggeredRef]);
    /**
     * Sets the input value from URL hash parameters when:
     * 1. Datasource is ready
     * 2. We have an initialInputValue from URL hash
     * 3. We haven't already set it for this configId, OR the value has changed
     *
     * Uses both React state updates and DOM manipulation to ensure the value
     * is properly set in SqlExpressionRuntime's internal state.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v;
        debugLogger.log('FORM', {
            event: 'initialInputValue-prop-received',
            configId,
            initialInputValue,
            datasourceReady,
            hasSqlExprObj: !!sqlExprObj,
            sqlExprObjPartsLength: (_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length,
            initialValueSetRef: initialValueSetRef.current,
            willProcess: datasourceReady && initialInputValue && ((_b = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _b === void 0 ? void 0 : _b.length) > 0,
            timestamp: Date.now()
        });
        // Reset flag if configId changed (switched to different query)
        if (initialValueSetRef.current !== null && initialValueSetRef.current !== configId) {
            initialValueSetRef.current = null;
            lastValueSetRef.current = null;
            hashTriggeredRef.current = false; // Reset hash trigger flag when switching queries
            debugLogger.log('FORM', {
                event: 'hashTriggeredRef-reset',
                configId,
                reason: 'switching-queries',
                timestamp: Date.now()
            });
            setIsTypingValid(false); // Reset typing validation
        }
        // Check if value has changed for the same configId
        const valueChanged = lastValueSetRef.current !== null &&
            lastValueSetRef.current !== initialInputValue &&
            initialValueSetRef.current === configId;
        // Set the value if:
        // - We haven't set it for this configId yet, OR
        // - The value has changed for the same configId (hash parameter updated)
        const shouldSetValue = datasourceReady &&
            initialInputValue &&
            ((_c = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _c === void 0 ? void 0 : _c.length) > 0 &&
            (initialValueSetRef.current !== configId || valueChanged);
        if (shouldSetValue) {
            // Ensure Query tab is active before setting hash value
            // This ensures SqlExpressionRuntime is visible and can process the value
            if (activeTab !== 'query' && onTabChange) {
                debugLogger.log('FORM', {
                    event: 'hash-value-setting-switching-to-query-tab',
                    configId,
                    initialInputValue,
                    currentTab: activeTab,
                    note: 'Switching to Query tab before setting hash value to ensure SqlExpressionRuntime can process it'
                });
                onTabChange('query');
                // Return early - useEffect will run again when activeTab becomes 'query'
                return;
            }
            debugLogger.log('FORM', {
                event: 'hash-value-setting-start',
                configId,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                valueChanged,
                hashTriggeredRefBefore: hashTriggeredRef.current,
                sqlExprObjPartsLength: (_d = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _d === void 0 ? void 0 : _d.length,
                activeTab,
                timestamp: Date.now()
            });
            // Set hashTriggeredRef IMMEDIATELY when setting hash value
            // This ensures handleSqlExprObjChange can detect hash-triggered conversions
            hashTriggeredRef.current = true;
            debugLogger.log('FORM', {
                event: 'hashTriggeredRef-set-true',
                configId,
                initialInputValue,
                timestamp: Date.now()
            });
            const firstPart = sqlExprObj.parts[0];
            // Check if the first part is a SINGLE clause (not a SqlClauseSet)
            if (firstPart && 'type' in firstPart && firstPart.type === 'SINGLE' && 'valueOptions' in firstPart) {
                // Update the expression object with the initial value
                const updated = sqlExprObj.setIn(['parts', '0', 'valueOptions', 'value'], initialInputValue);
                debugLogger.log('FORM', {
                    event: 'hash-value-setting-react-state',
                    configId,
                    initialInputValue,
                    previousStateValue: (_g = (_f = (_e = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.valueOptions) === null || _g === void 0 ? void 0 : _g.value,
                    newStateValue: (_k = (_j = (_h = updated === null || updated === void 0 ? void 0 : updated.parts) === null || _h === void 0 ? void 0 : _h[0]) === null || _j === void 0 ? void 0 : _j.valueOptions) === null || _k === void 0 ? void 0 : _k.value,
                    willCallSetState: true,
                    note: 'Setting value in React state - SqlExpressionRuntime should receive via expression prop'
                });
                setAttributeFilterSqlExprObj(updated);
                // Update ref immediately for synchronous access in applyQuery
                attributeFilterSqlExprObjRef.current = updated;
                debugLogger.log('FORM', {
                    event: 'hash-value-ref-updated',
                    configId,
                    initialInputValue,
                    refValueAfterUpdate: (_p = (_o = (_m = (_l = attributeFilterSqlExprObjRef.current) === null || _l === void 0 ? void 0 : _l.parts) === null || _m === void 0 ? void 0 : _m[0]) === null || _o === void 0 ? void 0 : _o.valueOptions) === null || _p === void 0 ? void 0 : _p.value,
                    timestamp: Date.now()
                });
                // Update clause number for the updated expression
                showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(updated);
                initialValueSetRef.current = configId;
                lastValueSetRef.current = initialInputValue;
                // Also set the value directly on the input element after a delay to ensure component is rendered
                // This is necessary because SqlExpressionRuntime may not sync from the expression prop alone
                const timeoutId = setTimeout(() => {
                    var _a;
                    // Find the input element within SqlExpressionRuntime
                    // Use data-widgetid (standard ExB attribute) to isolate the correct widget instance
                    const formElement = ((_a = document.querySelector(`[data-widgetid="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.querySelector('.query-form')) ||
                        document.querySelector(`.widget-runtime[data-widgetid="${widgetId}"]`) ||
                        document.querySelector('.query-form');
                    debugLogger.log('FORM', {
                        event: 'hash-value-dom-manipulation-start',
                        configId,
                        initialInputValue,
                        formElementFound: !!formElement,
                        widgetId,
                        selector1: `[data-widgetid="${widgetId}"] .query-form`,
                        selector2: `.widget-runtime[data-widgetid="${widgetId}"]`,
                        selector3: '.query-form',
                        timestamp: Date.now()
                    });
                    if (formElement) {
                        // Look for text input elements
                        const textInputs = formElement.querySelectorAll('input[type="text"]');
                        debugLogger.log('FORM', {
                            event: 'hash-value-dom-manipulation-inputs-found',
                            configId,
                            initialInputValue,
                            inputsFound: textInputs.length,
                            formElementTag: formElement.tagName,
                            formElementClass: formElement.className,
                            timestamp: Date.now()
                        });
                        let inputsUpdated = 0;
                        textInputs.forEach((input, index) => {
                            var _a, _b;
                            // Update the value if input is empty OR if the value has changed (hash parameter updated)
                            const shouldUpdate = !input.value ||
                                input.value.trim() === '' ||
                                input.value !== initialInputValue;
                            debugLogger.log('FORM', {
                                event: 'hash-value-dom-manipulation-input-check',
                                configId,
                                initialInputValue,
                                inputIndex: index,
                                currentInputValue: input.value,
                                inputId: input.id,
                                inputName: input.name,
                                inputParentTag: (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.tagName,
                                shouldUpdate,
                                timestamp: Date.now()
                            });
                            if (shouldUpdate) {
                                // Focus the input first
                                input.focus();
                                // Set the value
                                input.value = initialInputValue;
                                debugLogger.log('FORM', {
                                    event: 'hash-value-dom-manipulation-input-value-set',
                                    configId,
                                    initialInputValue,
                                    inputIndex: index,
                                    valueAfterSet: input.value,
                                    isFocused: document.activeElement === input,
                                    timestamp: Date.now()
                                });
                                // Create and dispatch input event with proper properties
                                const inputEvent = new Event('input', { bubbles: true, cancelable: true });
                                Object.defineProperty(inputEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(inputEvent);
                                // Create and dispatch change event
                                const changeEvent = new Event('change', { bubbles: true, cancelable: true });
                                Object.defineProperty(changeEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(changeEvent);
                                // Also try React's synthetic event approach using native value setter
                                const nativeInputValueSetter = (_b = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value')) === null || _b === void 0 ? void 0 : _b.set;
                                if (nativeInputValueSetter) {
                                    nativeInputValueSetter.call(input, initialInputValue);
                                    const reactEvent = new Event('input', { bubbles: true });
                                    input.dispatchEvent(reactEvent);
                                }
                                debugLogger.log('FORM', {
                                    event: 'hash-value-dom-manipulation-events-dispatched',
                                    configId,
                                    initialInputValue,
                                    inputIndex: index,
                                    inputEventDispatched: true,
                                    changeEventDispatched: true,
                                    reactEventDispatched: !!nativeInputValueSetter,
                                    timestamp: Date.now()
                                });
                                // Blur to trigger any validation or state updates
                                input.blur();
                                inputsUpdated++;
                            }
                        });
                        // Hash-triggered queries: DOM manipulation triggers SqlExpressionRuntime onChange
                        // handleSqlExprObjChange detects conversion and fires QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT
                        // Event listener in query-task.tsx executes query directly - no Apply button click needed
                        debugLogger.log('FORM', {
                            event: 'hash-value-dom-manipulation-complete',
                            configId,
                            initialInputValue,
                            inputsFound: textInputs.length,
                            inputsUpdated,
                            note: 'DOM manipulation complete - SqlExpressionRuntime onChange should fire',
                            timestamp: Date.now()
                        });
                    }
                    else {
                        debugLogger.log('FORM', {
                            event: 'hash-value-dom-manipulation-failed',
                            configId,
                            initialInputValue,
                            reason: 'formElement-not-found',
                            widgetId,
                            timestamp: Date.now()
                        });
                    }
                }, 500); // Longer delay to ensure component is fully rendered
                return () => clearTimeout(timeoutId);
            }
        }
        // The sqlExprObj.parts may change but the displaySQL is the same
        if (!sqlExprObj) {
            showClauseNumber.current = 0;
            setAttributeFilterSqlExprObj(null);
            attributeFilterSqlExprObjRef.current = null;
            debugLogger.log('FORM', {
                event: 'sqlExprObj-cleared',
                configId,
                timestamp: Date.now()
            });
        }
        else {
            showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
            // Check if we already have a value set (from user input or hash)
            const currentValue = (_s = (_r = (_q = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _q === void 0 ? void 0 : _q[0]) === null || _r === void 0 ? void 0 : _r.valueOptions) === null || _s === void 0 ? void 0 : _s.value;
            const baseValue = (_v = (_u = (_t = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _t === void 0 ? void 0 : _t[0]) === null || _u === void 0 ? void 0 : _u.valueOptions) === null || _v === void 0 ? void 0 : _v.value;
            const hasValueSet = currentValue !== undefined && currentValue !== null && currentValue !== '';
            const configIdChanged = previousConfigIdRef.current !== null && previousConfigIdRef.current !== configId;
            // Only update if:
            // 1. We haven't set a value yet (no value in current state), OR
            // 2. configId changed (switching queries - reset to base sqlExprObj)
            // Otherwise, preserve the existing value as a visual record
            if (!hasValueSet || configIdChanged) {
                setAttributeFilterSqlExprObj(sqlExprObj);
                attributeFilterSqlExprObjRef.current = sqlExprObj;
                debugLogger.log('FORM', {
                    event: 'sqlExprObj-updated-ref',
                    configId,
                    previousConfigId: previousConfigIdRef.current,
                    initialInputValue,
                    initialValueSetRef: initialValueSetRef.current,
                    hasValueSet,
                    configIdChanged,
                    previousValue: currentValue,
                    newValue: baseValue,
                    reason: configIdChanged ? 'configId-changed-resetting' : 'no-value-set-initializing',
                    timestamp: Date.now()
                });
            }
            else {
                debugLogger.log('FORM', {
                    event: 'sqlExprObj-skipped-ref-update',
                    configId,
                    previousConfigId: previousConfigIdRef.current,
                    initialInputValue,
                    initialValueSetRef: initialValueSetRef.current,
                    currentValue,
                    baseValue,
                    reason: 'value-already-set-preserving-as-visual-record',
                    note: 'Skipping update to preserve user-entered or hash-set value as visual record',
                    timestamp: Date.now()
                });
            }
            // Update previousConfigIdRef for next comparison
            previousConfigIdRef.current = configId;
        }
    }, [sqlExprObj, initialInputValue, datasourceReady, configId, widgetId, onHashParameterUsed, queryItemShortId, activeTab, onTabChange]);
    // Keep ref in sync with state changes (for SqlExpressionRuntime updates)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        attributeFilterSqlExprObjRef.current = attributeFilterSqlExprObj;
        // Log when state changes - this is what SqlExpressionRuntime receives via expression prop
        debugLogger.log('FORM', {
            event: 'attributeFilterSqlExprObj-state-changed',
            configId,
            stateValue: (_c = (_b = (_a = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value,
            stateValueType: typeof ((_f = (_e = (_d = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.valueOptions) === null || _f === void 0 ? void 0 : _f.value),
            isArray: Array.isArray((_j = (_h = (_g = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _g === void 0 ? void 0 : _g[0]) === null || _h === void 0 ? void 0 : _h.valueOptions) === null || _j === void 0 ? void 0 : _j.value),
            hashTriggeredRef: hashTriggeredRef.current,
            initialInputValue,
            note: 'React state changed - SqlExpressionRuntime should receive this via expression prop'
        });
    }, [attributeFilterSqlExprObj, configId, initialInputValue]);
    const applyQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        // When the 'apply' button is clicked, it should clear the selection from the previous result list
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS);
        if (outputDS) {
            const originDs = outputDS.getOriginDataSources()[0];
            if (originDs) {
                const dataViewConfig = originDs.getDataViewConfig();
                const maximum = dataViewConfig === null || dataViewConfig === void 0 ? void 0 : dataViewConfig.maximum;
                if (maximum != null && maximum > 0) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(outputDS, outputDS.getDataSourceJson().setIn(['query', 'maximum'], maximum));
                }
            }
        }
        // Force zoom for hash-triggered queries, otherwise use runtime preference
        const zoomToUse = hashTriggeredRef.current ? true : runtimeZoomToSelected;
        // Sanitize user input before submission
        // Read from ref to get the latest value synchronously (including hash values)
        const currentSqlExprObj = attributeFilterSqlExprObjRef.current;
        const currentRefValue = (_c = (_b = (_a = currentSqlExprObj === null || currentSqlExprObj === void 0 ? void 0 : currentSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        debugLogger.log('FORM', {
            event: 'applyQuery-executing',
            configId,
            initialInputValue,
            currentRefValue,
            refHasValue: !!currentRefValue,
            hashTriggered: hashTriggeredRef.current,
            timestamp: Date.now()
        });
        const sanitizedSqlExprObj = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.sanitizeSqlExpression)(currentSqlExprObj);
        // Log the sanitized expression to see if value was preserved
        const sanitizedValue = (_f = (_e = (_d = sanitizedSqlExprObj === null || sanitizedSqlExprObj === void 0 ? void 0 : sanitizedSqlExprObj.parts) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e.valueOptions) === null || _f === void 0 ? void 0 : _f.value;
        debugLogger.log('FORM', {
            event: 'applyQuery-after-sanitize',
            configId,
            currentRefValue,
            sanitizedValue,
            valuesMatch: currentRefValue === sanitizedValue,
            sanitizedValueType: typeof sanitizedValue,
            currentRefValueType: typeof currentRefValue,
            isArrayCurrent: Array.isArray(currentRefValue),
            isArraySanitized: Array.isArray(sanitizedValue),
            timestamp: Date.now()
        });
        let rel = spatialRelationRef.current;
        if (((_g = spatialFilterObjRef.current) === null || _g === void 0 ? void 0 : _g.geometry) && rel == null) {
            rel = _config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect;
        }
        if (Array.isArray((_h = spatialFilterObjRef.current) === null || _h === void 0 ? void 0 : _h.geometry)) {
            if (spatialFilterObjRef.current.geometry.length === 1) {
                onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry: spatialFilterObjRef.current.geometry[0], relation: rel, buffer: bufferRef.current }), zoomToUse);
            }
            else {
                (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)([
                    'esri/geometry/operators/unionOperator'
                ]).then(modules => {
                    const operator = modules[0];
                    const geometry = operator.executeMany(spatialFilterObjRef.current.geometry);
                    onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry, relation: rel, buffer: bufferRef.current }), zoomToUse);
                });
            }
        }
        else {
            onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { relation: rel, buffer: bufferRef.current }), zoomToUse);
        }
        // Reset hashTriggeredRef after use
        hashTriggeredRef.current = false;
        debugLogger.log('FORM', {
            event: 'hashTriggeredRef-reset-after-apply',
            configId,
            timestamp: Date.now()
        });
    }, [onFormSubmit, outputDS, runtimeZoomToSelected]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((event) => {
        if (event.key === 'Enter' && datasourceReady && isInputValid) {
            event.preventDefault();
            // Find the active input field
            const activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT' && activeElement.type === 'text') {
                // Force blur to trigger SqlExpressionRuntime's input processing
                activeElement.blur();
                // Wait for blur processing, then click the Apply button
                // This uses the exact same code path as clicking the button manually
                setTimeout(() => {
                    if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                        applyButtonRef.current.click();
                    }
                    else {
                        applyQuery();
                    }
                }, 200);
            }
            else {
                // Not in an input field, safe to apply immediately
                if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                    applyButtonRef.current.click();
                }
                else {
                    applyQuery();
                }
            }
        }
    }, [datasourceReady, applyQuery, isInputValid]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c, _d;
        if (!dataActionFilter)
            return;
        if (dataActionFilter.where !== (preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where)) {
            // Log state when dataActionFilter changes (query switch)
            const currentRefValue = (_d = (_c = (_b = (_a = attributeFilterSqlExprObjRef.current) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.valueOptions) === null || _d === void 0 ? void 0 : _d.value;
            const hasPendingHashValue = initialInputValue &&
                (initialValueSetRef.current !== configId ||
                    currentRefValue !== initialInputValue);
            debugLogger.log('FORM', {
                event: 'dataActionFilter-changed-auto-trigger',
                configId,
                previousWhere: preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where,
                newWhere: dataActionFilter.where,
                initialInputValue,
                initialValueSetRef: initialValueSetRef.current,
                currentRefValue,
                hasPendingHashValue,
                willCallApplyQuery: !hasPendingHashValue,
                timestamp: Date.now()
            });
            applyQuery();
        }
    }, [dataActionFilter, preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where, applyQuery, initialInputValue, configId]);
    const resetQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        // 1. reset attribute filter
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
        setAttributeFilterSqlExprObj(sqlExprObj);
        // 2. reset spatial filter
        setResetSymbol(Symbol());
    }, [sqlExprObj]);
    const handleSqlExprObjChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlObj) => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        // LOG AT THE VERY START
        const sqlObjValue = (_c = (_b = (_a = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        const previousRefValue = (_g = (_f = (_e = (_d = attributeFilterSqlExprObjRef.current) === null || _d === void 0 ? void 0 : _d.parts) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.valueOptions) === null || _g === void 0 ? void 0 : _g.value;
        const previousStateValue = (_k = (_j = (_h = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _h === void 0 ? void 0 : _h[0]) === null || _j === void 0 ? void 0 : _j.valueOptions) === null || _k === void 0 ? void 0 : _k.value;
        // Check if this is from user typing or prop change
        const isFromUserTyping = typeof previousRefValue === 'string' &&
            typeof sqlObjValue === 'object' &&
            Array.isArray(sqlObjValue) &&
            ((_l = sqlObjValue[0]) === null || _l === void 0 ? void 0 : _l.value) === previousRefValue;
        const isFromPropChange = JSON.stringify(previousStateValue) === JSON.stringify(sqlObjValue);
        debugLogger.log('FORM', {
            event: 'handleSqlExprObjChange-called',
            configId,
            sqlObjExists: !!sqlObj,
            initialInputValue,
            hashTriggeredRef: hashTriggeredRef.current,
            sqlObjValue,
            sqlObjValueType: typeof sqlObjValue,
            sqlObjIsArray: Array.isArray(sqlObjValue),
            previousRefValue,
            previousStateValue,
            isFromUserTyping,
            isFromPropChange,
            triggerSource: isFromUserTyping ? 'user-typing' : (isFromPropChange ? 'prop-change' : 'unknown'),
            timestamp: Date.now()
        });
        const firstPart = (_m = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _m === void 0 ? void 0 : _m[0];
        const value = (firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' ? (_o = firstPart.valueOptions) === null || _o === void 0 ? void 0 : _o.value : 'not-single';
        debugLogger.log('FORM', {
            event: 'sql-expression-changed',
            configId,
            partsCount: ((_p = sqlObj === null || sqlObj === void 0 ? void 0 : sqlObj.parts) === null || _p === void 0 ? void 0 : _p.length) || 0,
            firstPartValue: value,
            hashTriggeredRefValue: hashTriggeredRef.current,
            initialInputValue: initialInputValue,
            isArrayFormat: Array.isArray(value),
            timestamp: Date.now()
        });
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlObj);
        setAttributeFilterSqlExprObj(sqlObj);
        // Check if this is a hash-triggered conversion (string -> array)
        // When hash value changes for same configId, SqlExpressionRuntime converts string to array format
        if ((firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' && ((_q = firstPart === null || firstPart === void 0 ? void 0 : firstPart.valueOptions) === null || _q === void 0 ? void 0 : _q.value)) {
            const value = firstPart.valueOptions.value;
            const isArrayFormat = Array.isArray(value);
            const hasInitialValue = initialInputValue && hashTriggeredRef.current;
            debugLogger.log('FORM', {
                event: 'sql-expression-changed-conversion-check',
                configId,
                isArrayFormat,
                hasInitialValue,
                hashTriggeredRefValue: hashTriggeredRef.current,
                initialInputValue,
                valueType: typeof value,
                value: Array.isArray(value) ? value : value,
                timestamp: Date.now()
            });
            // If value converted to array format AND this was hash-triggered, fire event
            if (isArrayFormat && hasInitialValue && initialInputValue) {
                const matchesHashValue = value.length > 0 && ((_r = value[0]) === null || _r === void 0 ? void 0 : _r.value) === initialInputValue;
                debugLogger.log('FORM', {
                    event: 'sql-expression-changed-matches-check',
                    configId,
                    matchesHashValue,
                    initialInputValue,
                    convertedValueFirstItem: (_s = value[0]) === null || _s === void 0 ? void 0 : _s.value,
                    timestamp: Date.now()
                });
                if (matchesHashValue) {
                    debugLogger.log('FORM', {
                        event: 'hash-value-converted-to-array',
                        configId,
                        initialInputValue,
                        convertedValue: value,
                        timestamp: Date.now()
                    });
                    // Fire custom event for query execution to wait on
                    const event = new CustomEvent(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, {
                        detail: {
                            configId,
                            widgetId,
                            initialInputValue,
                            convertedValue: value
                        },
                        bubbles: true
                    });
                    document.dispatchEvent(event);
                    debugLogger.log('FORM', {
                        event: 'hash-value-converted-event-dispatched',
                        configId,
                        widgetId,
                        timestamp: Date.now()
                    });
                    // EXECUTION POINT: Query execution happens HERE after conversion is confirmed
                    // This is the ONLY place where hash-triggered queries should execute
                    // The event QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT has been dispatched above
                    // This direct call handles the case where conversion happens synchronously
                    // The event listener in query-task.tsx handles the async case
                    if (hashTriggeredRef.current && datasourceReady && outputDS) {
                        debugLogger.log('FORM', {
                            event: 'hash-value-converted-executing-query-directly',
                            configId,
                            initialInputValue,
                            note: 'Conversion complete - executing query directly via applyQuery (event-driven pattern)',
                            timestamp: Date.now()
                        });
                        // Use setTimeout to ensure this happens after the current event loop
                        setTimeout(() => {
                            applyQuery();
                        }, 0);
                    }
                }
            }
        }
    }, [configId, initialInputValue, widgetId, datasourceReady, outputDS, applyQuery]);
    const handleSpatialFilterChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((filter) => {
        spatialFilterObjRef.current = filter;
    }, []);
    const handleRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((rel) => {
        spatialRelationRef.current = rel;
    }, []);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferRef.current = { distance, unit };
    }, []);
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // Debug logging for form rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        debugLogger.log('FORM', {
            event: 'form-render-check',
            configId,
            datasourceReady,
            useAttributeFilter,
            sqlExprObj: sqlExprObj ? 'exists' : 'null',
            sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            showAttributeFilter,
            originDS: originDS ? 'exists' : 'null',
            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'none',
            showSpatialFilter,
            isAutoHeight,
            outputDS: outputDS ? 'exists' : 'null'
        });
    }, [configId, datasourceReady, useAttributeFilter, sqlExprObj, showAttributeFilter, originDS, showSpatialFilter, isAutoHeight, outputDS]);
    // Log when form content should render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (showAttributeFilter && originDS) {
            debugLogger.log('FORM', {
                event: 'attribute-filter-ready',
                configId,
                originDSId: originDS.id,
                sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
                attributeFilterLabel,
                note: 'Input field should be visible'
            });
        }
        else {
            debugLogger.log('FORM', {
                event: 'attribute-filter-not-ready',
                configId,
                showAttributeFilter,
                originDS: originDS ? 'exists' : 'null',
                useAttributeFilter,
                sqlExprObj: sqlExprObj ? 'exists' : 'null',
                reason: !showAttributeFilter ? 'showAttributeFilter is false' : 'originDS is null'
            });
        }
    }, [showAttributeFilter, originDS, configId, sqlExprObj, useAttributeFilter, attributeFilterLabel]);
    // Check DOM visibility after render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (formContentRef.current) {
            const computedStyle = window.getComputedStyle(formContentRef.current);
            const rect = formContentRef.current.getBoundingClientRect();
            debugLogger.log('FORM', {
                event: 'form-content-dom-check',
                configId,
                exists: !!formContentRef.current,
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                height: computedStyle.height,
                maxHeight: computedStyle.maxHeight,
                flex: computedStyle.flex,
                flexBasis: computedStyle.flexBasis,
                rectHeight: rect.height,
                rectWidth: rect.width,
                isVisible: rect.height > 0 && rect.width > 0,
                parentHeight: ((_a = formContentRef.current.parentElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0
            });
        }
    }, [configId, showAttributeFilter, originDS]);
    // Log when SqlExpressionRuntime key changes (component remounts) OR expression prop changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b, _c;
        const sqlExprRuntimeKey = `${configId}-${initialInputValue || 'none'}`;
        const expressionValue = (_c = (_b = (_a = attributeFilterSqlExprObj === null || attributeFilterSqlExprObj === void 0 ? void 0 : attributeFilterSqlExprObj.parts) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.valueOptions) === null || _c === void 0 ? void 0 : _c.value;
        debugLogger.log('FORM', {
            event: 'SqlExpressionRuntime-props-changed',
            configId,
            initialInputValue,
            sqlExprRuntimeKey,
            expressionValue,
            expressionValueType: typeof expressionValue,
            isArray: Array.isArray(expressionValue),
            hashTriggeredRef: hashTriggeredRef.current,
            originDSExists: !!originDS,
            note: 'SqlExpressionRuntime receiving new expression prop - will it fire onChange?',
            timestamp: Date.now()
        });
    }, [configId, initialInputValue, attributeFilterSqlExprObj, originDS]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_context__WEBPACK_IMPORTED_MODULE_12__.QueryTaskContext.Provider, { value: { resetSymbol }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form', css: getFormStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: formContentRef, className: 'query-form__content', onKeyDown: handleKeyDown, children: [showAttributeFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding-top: 2px;`, "aria-label": attributeFilterLabel, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title d-flex align-items-center', { 'd-none': !attributeFilterLabel && !attributeFilterDesc }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-top: 0;
                margin-bottom: 4px;
              `, children: [attributeFilterLabel && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: attributeFilterLabel }), attributeFilterDesc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: attributeFilterDesc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), originDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin: -10px 0px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: originDS, expression: attributeFilterSqlExprObj, onChange: handleSqlExprObjChange }, `${configId}-${initialInputValue || 'none'}`) }))] })), showAttributeFilter && showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr", { className: 'm-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `border: none; height: 1px; background-color: var(--sys-color-divider-secondary);` })), showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__.QueryTaskSpatialForm, { widgetId: widgetId, label: spatialFilterLabel, desc: spatialFilterDesc, filterTypes: spatialFilterTypes, mapWidgetIds: spatialMapWidgetIds, createToolTypes: spatialInteractiveCreateToolTypes, onFilterChange: handleSpatialFilterChange, onRelationChange: handleRelationChange, onBufferChange: handleBufferChange, spatialRelations: spatialRelations, dsEnableBuffer: spatialRelationEnableBuffer, dsBufferDistance: spatialRelationBufferDistance, dsBufferUnit: spatialRelationBufferUnit, drawEnableBuffer: spatialInteractiveEnableBuffer, drawBufferDistance: spatialInteractiveBufferDistance, drawBufferUnit: spatialInteractiveBufferUnit, useDataSources: spatialRelationUseDataSources, useRuntimeData: spatialIncludeRuntimeData }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form__actions px-4 d-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: runtimeZoomToSelected, onChange: (_, checked) => setRuntimeZoomToSelected(checked), className: 'mr-2' }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-auto', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `font-size: 0.875rem; color: var(--sys-color-text-primary);`, children: getI18nMessage('zoomToSelected') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: applyButtonRef, color: 'primary', className: 'ml-auto', disabled: !datasourceReady || !isInputValid, onClick: applyQuery, children: getI18nMessage('apply') }), (showClauseNumber.current > 0 || showSpatialFilter) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-2', onClick: resetQuery, children: getI18nMessage('reset') }))] })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskLabel: () => (/* binding */ QueryTaskLabel)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

/** @jsx jsx */


const textStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  font-weight: 500;
  font-size: 0.875rem;
`;
function QueryTaskLabel(props) {
    const { icon, name } = props;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center text-truncate', css: textStyle, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { className: 'query-task-icon mr-2', icon: icon.svg }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', title: name, children: name })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListInline: () => (/* binding */ TaskListInline)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");

/** @jsx jsx */






const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
const SPACE = 8;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  > div {
    margin-right: 8px;
  }
`;
// show task label and an arrow to the task content
function TaskListInline(props) {
    const { queryItems, widgetId, minSize, defaultSize, defaultPageSize, widgetLabel, wrap = false } = props;
    const containerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const containerWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const contentWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef({});
    const [numOfExpanded, setNumOfExpanded] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(queryItems.length);
    const [openedPopper, setOpenedPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(-1);
    const resizeObserverRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const adjustContent = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        let total = 0;
        for (let i = 0; i < numOfExpanded; i++) {
            const item = queryItems[i];
            const itemWidth = contentWidthRef.current[item.configId];
            if (itemWidth > 0) {
                total += itemWidth + SPACE;
                if (total >= containerWidthRef.current && numOfExpanded !== i) {
                    setNumOfExpanded(i);
                    return;
                }
            }
            else {
                return; // content width not ready
            }
        }
        setNumOfExpanded(queryItems.length);
    }, [numOfExpanded, queryItems]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (resizeObserverRef.current) {
            resizeObserverRef.current.disconnect();
        }
        // bind with the new event handler
        resizeObserverRef.current = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
            const width = Math.round(entries[0].contentRect.width);
            if (containerWidthRef.current !== width) {
                containerWidthRef.current = width;
                adjustContent();
            }
        }, 200));
        resizeObserverRef.current.observe(containerRef.current);
        return () => {
            resizeObserverRef.current.disconnect();
        };
    }, [adjustContent]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        var _a;
        containerWidthRef.current = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth;
        adjustContent();
    });
    const handleItemWidthChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, width) => {
        const queryItem = queryItems[index];
        if (contentWidthRef.current[queryItem.configId] !== width) {
            contentWidthRef.current[queryItem.configId] = width;
            adjustContent();
        }
    }, [queryItems, adjustContent]);
    const handlePopperOpenedChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, isOpen) => {
        if (isOpen) {
            setOpenedPopper(index);
        }
        else if (index === openedPopper) {
            // current popper is closed
            setOpenedPopper(-1);
        }
    }, [openedPopper]);
    const [expandedArray, nonExpandedArray] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const expandedArray = [];
        const nonExpandedArray = [];
        for (let i = 0; i < queryItems.length; i++) {
            if (i < numOfExpanded) {
                expandedArray.push(queryItems[i]);
            }
            else {
                nonExpandedArray.push(queryItems[i]);
            }
        }
        return [expandedArray, nonExpandedArray];
    }, [queryItems, numOfExpanded]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: containerRef, css: style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('runtime-query__query-list h-100 d-flex', { 'flex-wrap': wrap, 'align-content-start': wrap }), children: [expandedArray.map((queryItem, index) => {
                var _a;
                const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
                return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: index, icon: currentItem.icon, buttonType: 'default', label: currentItem.displayLabel ? currentItem.name : undefined, popperTitle: currentItem.name, onWidthChange: handleItemWidthChange, minSize: minSize, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== index, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: index, total: 1, isInPopper: true, queryItem: currentItem, wrappedInPopper: true, className: 'pb-4', defaultPageSize: defaultPageSize, initialInputValue: currentItem.shortId === ((_a = props.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) ? props.initialQueryValue.value : undefined, onHashParameterUsed: props.onHashParameterUsed, queryItemShortId: currentItem.shortId }) }, currentItem.configId);
            }), nonExpandedArray.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: expandedArray.length + 1, icon: iconMap.iconMore, minSize: minSize, buttonType: 'default', popperTitle: widgetLabel, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== expandedArray.length + 1, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_3__.QueryTaskList, { widgetId: widgetId, isInPopper: true, defaultPageSize: defaultPageSize, queryItems: nonExpandedArray, className: 'pb-4', initialQueryValue: props.initialQueryValue, onHashParameterUsed: props.onHashParameterUsed }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListPopperWrapper: () => (/* binding */ TaskListPopperWrapper)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */



const shiftOptions = { padding: 1 };
function TaskListPopperWrapper(props) {
    const { id, icon, label, forceClose, onOpenedChange, popperTitle, minSize, defaultSize, onWidthChange, buttonType = 'tertiary', children } = props;
    const iconRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const widthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const [isOpen, setIsOpen] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const [popperVersion, setPopperVersion] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const isMobile = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useCheckSmallBrowserSizeMode();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (forceClose) {
            setIsOpen(false);
        }
    }, [forceClose]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (typeof onWidthChange === 'function') {
            widthRef.current = Math.round(iconRef.current.clientWidth);
            onWidthChange(id, widthRef.current);
            const resizeObserver = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
                const width = Math.round(entries[0].contentRect.width);
                if (widthRef.current !== width) {
                    widthRef.current = width;
                    onWidthChange(id, width);
                }
            }, 200));
            resizeObserver.observe(iconRef.current);
            return () => {
                resizeObserver.disconnect();
            };
        }
    });
    const togglePopper = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        if (typeof onOpenedChange === 'function') {
            onOpenedChange(id, !isOpen);
        }
        setIsOpen(!isOpen);
        setPopperVersion(popperVersion + 1);
        if (isOpen) {
            setTimeout(() => {
                if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.isKeyboardMode)()) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(iconRef.current);
                }
            }, 200);
        }
    }, [id, isOpen, popperVersion, onOpenedChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'runtime-query__widget-popper', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { title: label, "aria-label": label, icon: true, size: 'sm', variant: buttonType === 'tertiary' ? 'text' : undefined, color: buttonType === 'tertiary' ? 'inherit' : undefined, type: buttonType === 'tertiary' ? undefined : buttonType, ref: iconRef, onClick: togglePopper, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, Object.assign({ size: 16 }, (typeof icon === 'string' ? { icon } : { icon: icon.svg, color: buttonType === 'tertiary' ? undefined : icon.properties.color }))), label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
            line-height: 1.2;
          `, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ 'ml-2': icon != null }), children: label })] }), isMobile
                ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.MobilePanel, { open: isOpen, title: popperTitle, onClose: togglePopper, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })
                : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FloatingPanel, { className: 'ui-unit-popper ui-unit-popper_k-arrangement-icon flex-grow-1', headerClassName: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS, open: isOpen, onHeaderClose: togglePopper, toggle: togglePopper, headerTitle: popperTitle, minSize: minSize, defaultSize: defaultSize, dragBounds: 'body', version: popperVersion, reference: iconRef, placement: 'bottom-start', shiftOptions: shiftOptions, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskList: () => (/* binding */ QueryTaskList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */





const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__.createQuerySimpleDebugLogger)();
// Helper function to sort queries by display order (lower numbers appear first)
// Queries without order maintain their original relative positions
function sortQueryItemsByOrder(queryItems) {
    // Handle null/undefined/empty cases
    if (!queryItems || queryItems.length === 0) {
        return queryItems || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
    }
    // Safely convert to regular array for sorting
    // Handle both ImmutableArray (has toArray method) and regular arrays
    const itemsArray = (queryItems && typeof queryItems.toArray === 'function')
        ? queryItems.toArray()
        : (Array.isArray(queryItems) ? queryItems : []);
    const itemsWithIndex = itemsArray.map((item, index) => ({ item, originalIndex: index }));
    itemsWithIndex.sort((a, b) => {
        var _a, _b;
        const orderA = (_a = a.item.order) !== null && _a !== void 0 ? _a : Infinity;
        const orderB = (_b = b.item.order) !== null && _b !== void 0 ? _b : Infinity;
        if (orderA !== orderB) {
            return orderA - orderB;
        }
        // If order is equal (both Infinity or same number), maintain original index order
        return a.originalIndex - b.originalIndex;
    });
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(itemsWithIndex.map(({ item }) => item));
}
// Helper function to group queries by groupId
const groupQueries = (queryItems) => {
    const groups = {};
    const ungrouped = [];
    const groupOrder = [];
    const groupIndexMap = {};
    // First pass: collect items in regular arrays
    const groupItemsMap = {};
    queryItems.forEach((item, index) => {
        if (item.groupId) {
            if (!groupItemsMap[item.groupId]) {
                groupItemsMap[item.groupId] = [];
                groups[item.groupId] = {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]),
                    displayName: item.groupDisplayName || item.name || `Group ${item.groupId}`,
                    icon: item.icon
                };
                groupIndexMap[item.groupId] = index;
                groupOrder.push(item.groupId);
            }
            groupItemsMap[item.groupId].push(item);
        }
        else {
            ungrouped.push({ item, index });
        }
    });
    // Second pass: convert regular arrays to ImmutableArrays
    Object.keys(groupItemsMap).forEach(groupId => {
        groups[groupId].items = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(groupItemsMap[groupId]);
    });
    return { groups, ungrouped, groupOrder };
};
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
function QueryTaskList(props) {
    const { queryItems, widgetId, defaultPageSize, isInPopper = false, className = '', initialQueryValue, shouldUseInitialQueryValueForSelection = false, onHashParameterUsed, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab, onTabChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // Log when props are received
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-props-received',
            widgetId,
            props: {
                hasInitialQueryValue: !!initialQueryValue,
                initialQueryValueShortId: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId,
                initialQueryValueValue: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value,
                shouldUseInitialQueryValueForSelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'query-task-list-props-received',
            widgetId,
            hasInitialQueryValue: !!initialQueryValue,
            initialQueryValueShortId: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.shortId,
            initialQueryValueValue: initialQueryValue === null || initialQueryValue === void 0 ? void 0 : initialQueryValue.value,
            shouldUseInitialQueryValueForSelection,
            timestamp: Date.now()
        });
    }, [initialQueryValue, shouldUseInitialQueryValueForSelection, widgetId]);
    // Sort queries by display order before grouping
    // Handle case where queryItems might be undefined/null or not an ImmutableArray
    const sortedQueryItems = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (!queryItems) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
        }
        return sortQueryItemsByOrder(queryItems);
    }, [queryItems]);
    const { groups, ungrouped, groupOrder } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => groupQueries(sortedQueryItems), [sortedQueryItems]);
    // Only use the prop initialQueryValue when HelperSimple explicitly opens the widget
    // QuerySimple should not autonomously react to initialQueryValue prop changes
    // HelperSimple is the orchestrator and sets shouldUseInitialQueryValueForSelection flag
    const effectiveInitialQueryValue = shouldUseInitialQueryValueForSelection ? initialQueryValue : undefined;
    // Log when effectiveInitialQueryValue is calculated
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-effectiveinitialqueryvalue-calculated',
            widgetId,
            calculation: {
                shouldUseInitialQueryValueForSelection,
                hasInitialQueryValue: !!initialQueryValue,
                effectiveResult: effectiveInitialQueryValue ? 'USE_INITIAL_QUERY_VALUE' : 'UNDEFINED',
                effectiveShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
                effectiveValue: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'effectiveInitialQueryValue-calculated',
            widgetId,
            shouldUseInitialQueryValueForSelection,
            hasInitialQueryValue: !!initialQueryValue,
            hasEffectiveInitialQueryValue: !!effectiveInitialQueryValue,
            effectiveShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
            effectiveValue: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value,
            timestamp: Date.now()
        });
    }, [effectiveInitialQueryValue, shouldUseInitialQueryValueForSelection, initialQueryValue, widgetId]);
    // Find the query item matching the shortId from URL hash
    const matchingQueryIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const shortId = effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId;
        if (!shortId) {
            return -1;
        }
        return sortedQueryItems.findIndex(item => item.shortId === shortId);
    }, [sortedQueryItems, effectiveInitialQueryValue]);
    // Determine which group/ungrouped index the matching query is at
    const getQuerySelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        if (matchingQueryIndex < 0)
            return null;
        const item = sortedQueryItems[matchingQueryIndex];
        if (item.groupId) {
            const groupItems = ((_a = groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.items) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
            const indexInGroup = groupItems.findIndex(q => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-in-group',
                groupId: item.groupId,
                indexInGroup: indexInGroup >= 0 ? indexInGroup : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'group', groupId: item.groupId, index: indexInGroup >= 0 ? indexInGroup : 0 };
        }
        else {
            // Ungrouped query
            const indexInUngrouped = ungrouped.findIndex(({ item: q }) => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-ungrouped',
                indexInUngrouped: indexInUngrouped >= 0 ? indexInUngrouped : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'ungrouped', index: indexInUngrouped >= 0 ? indexInUngrouped : 0 };
        }
    }, [matchingQueryIndex, sortedQueryItems, groups, ungrouped]);
    // Helper to determine default selection based on display order
    const getDefaultSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        if (getQuerySelection) {
            return getQuerySelection;
        }
        // No hash parameter - determine default based on display order
        // Compare first ungrouped query vs first query in first group
        const firstUngroupedOrder = ungrouped.length > 0 ? ((_a = ungrouped[0].item.order) !== null && _a !== void 0 ? _a : Infinity) : Infinity;
        const firstGroupOrder = groupOrder.length > 0 && ((_c = (_b = groups[groupOrder[0]]) === null || _b === void 0 ? void 0 : _b.items) === null || _c === void 0 ? void 0 : _c.length) > 0
            ? ((_d = groups[groupOrder[0]].items[0].order) !== null && _d !== void 0 ? _d : Infinity)
            : Infinity;
        // Select whichever has lower order (or first if equal)
        if (firstUngroupedOrder < firstGroupOrder) {
            return { type: 'ungrouped', index: 0 };
        }
        else if (firstGroupOrder < Infinity || groupOrder.length > 0) {
            return { type: 'group', groupId: groupOrder[0], index: 0 };
        }
        else if (ungrouped.length > 0) {
            return { type: 'ungrouped', index: 0 };
        }
        return null;
    }, [getQuerySelection, ungrouped, groups, groupOrder]);
    // Track selected query - initialize with matching query if found from URL hash, or default based on display order
    const [selectedGroupId, setSelectedGroupId] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection',
                groupId: getDefaultSelection.groupId,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.groupId;
        }
        return null;
    });
    const [selectedGroupQueryIndex, setSelectedGroupQueryIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-query-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    const [selectedUngroupedIndex, setSelectedUngroupedIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'ungrouped') {
            debugLogger.log('GROUP', {
                event: 'initial-ungrouped-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    // Update selection when HelperSimple explicitly opens widget with hash parameter
    // Only react when shouldUseInitialQueryValueForSelection is true (set by HelperSimple)
    // This prevents autonomous query selection when switching queries
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytasklist-selection-useeffect-check',
            widgetId,
            check: {
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                getQuerySelectionType: getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type,
                willUpdateSelection: shouldUseInitialQueryValueForSelection && !!getQuerySelection
            },
            timestamp: Date.now()
        });
        debugLogger.log('GROUP', {
            event: 'query-selection-useeffect-check',
            widgetId,
            shouldUseInitialQueryValueForSelection,
            hasGetQuerySelection: !!getQuerySelection,
            getQuerySelectionType: getQuerySelection === null || getQuerySelection === void 0 ? void 0 : getQuerySelection.type,
            willUpdateSelection: shouldUseInitialQueryValueForSelection && !!getQuerySelection,
            timestamp: Date.now()
        });
        if (shouldUseInitialQueryValueForSelection && getQuerySelection) {
            // Hash parameter matched - HelperSimple explicitly opened us with this hash
            debugLogger.log('HASH-EXEC', {
                event: 'querytasklist-selection-useeffect-updating',
                widgetId,
                selectionType: getQuerySelection.type,
                selectionDetails: getQuerySelection.type === 'group'
                    ? { groupId: getQuerySelection.groupId, index: getQuerySelection.index }
                    : { index: getQuerySelection.index },
                timestamp: Date.now()
            });
            if (getQuerySelection.type === 'group') {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-group-from-hash',
                    groupId: getQuerySelection.groupId,
                    index: getQuerySelection.index,
                    note: 'HelperSimple explicitly opened widget with hash parameter'
                });
                setSelectedGroupId(getQuerySelection.groupId);
                setSelectedGroupQueryIndex(getQuerySelection.index);
            }
            else {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-ungrouped-from-hash',
                    index: getQuerySelection.index,
                    note: 'HelperSimple explicitly opened widget with hash parameter'
                });
                setSelectedGroupId(null);
                setSelectedUngroupedIndex(getQuerySelection.index);
            }
        }
        else {
            debugLogger.log('HASH-EXEC', {
                event: 'querytasklist-selection-useeffect-skipped',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'flag-is-false' : 'no-query-selection',
                check: {
                    shouldUseInitialQueryValueForSelection,
                    hasGetQuerySelection: !!getQuerySelection
                },
                timestamp: Date.now()
            });
            debugLogger.log('GROUP', {
                event: 'query-selection-useeffect-skipped',
                widgetId,
                reason: !shouldUseInitialQueryValueForSelection ? 'flag-is-false' : 'no-query-selection',
                shouldUseInitialQueryValueForSelection,
                hasGetQuerySelection: !!getQuerySelection,
                timestamp: Date.now()
            });
        }
    }, [shouldUseInitialQueryValueForSelection, getQuerySelection, widgetId]);
    // Get the currently selected query item
    const getSelectedQueryItem = () => {
        // PRIORITY 1: Use current state selection
        // The state is initialized with the hash match (if present) or default order,
        // and updated via useEffect if the hash changes later.
        debugLogger.log('GROUP', {
            event: 'getSelectedQueryItem-state-selection',
            selectedGroupId,
            hasSelectedGroup: selectedGroupId && groups[selectedGroupId],
            selectedGroupQueryIndex,
            selectedUngroupedIndex,
            ungroupedLength: ungrouped.length,
            groupOrderLength: groupOrder.length,
            note: 'Using state selection (hash-aware)'
        });
        // If a group is selected, get query from that group
        if (selectedGroupId && groups[selectedGroupId]) {
            const groupItems = groups[selectedGroupId].items;
            if (groupItems.length > 0) {
                const idx = selectedGroupQueryIndex < groupItems.length ? selectedGroupQueryIndex : 0;
                const selectedItem = groupItems[idx];
                debugLogger.log('GROUP', {
                    event: 'selected-query-from-group',
                    groupId: selectedGroupId,
                    groupQueryIndex: idx,
                    queryItemConfigId: selectedItem.configId,
                    queryDisplayName: getQueryDisplayName(selectedItem)
                });
                return selectedItem;
            }
        }
        // Otherwise, get from ungrouped queries
        if (ungrouped.length > 0) {
            const idx = selectedUngroupedIndex < ungrouped.length ? selectedUngroupedIndex : 0;
            const selectedItem = ungrouped[idx].item;
            debugLogger.log('GROUP', {
                event: 'selected-query-from-ungrouped',
                ungroupedIndex: idx,
                queryItemConfigId: selectedItem.configId,
                queryDisplayName: getQueryDisplayName(selectedItem)
            });
            return selectedItem;
        }
        // Fallback to first query item
        debugLogger.log('GROUP', {
            event: 'selected-query-fallback',
            note: 'No groups or ungrouped queries, using first item'
        });
        return sortedQueryItems[0];
    };
    const selectedQueryItem = getSelectedQueryItem();
    const selectedQueryRealIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return sortedQueryItems.findIndex(q => q.configId === selectedQueryItem.configId);
    }, [sortedQueryItems, selectedQueryItem]);
    // If only one query total, don't show dropdown
    const showDropdown = sortedQueryItems.length > 1 || groupOrder.length > 0;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `runtime-query__query-list h-100 ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      display: flex;
      flex-direction: column;
      .query-selector {
        padding: 16px;
        border-bottom: 1px solid var(--sys-color-divider-secondary);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .query-selector-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--sys-color-text-primary);
        margin-bottom: 4px;
      }
      .query-selector select {
        width: 100%;
      }
      .query-task-container {
        flex: 1;
        overflow: auto;
      }
    `, children: selectedQueryItem && (() => {
            const willPassInitialInputValue = selectedQueryItem.shortId === (effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId);
            const initialInputValueToPass = willPassInitialInputValue ? effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value : undefined;
            debugLogger.log('GROUP', {
                event: 'initialInputValue-being-passed-to-querytask',
                widgetId,
                selectedQueryItemShortId: selectedQueryItem.shortId,
                selectedQueryItemConfigId: selectedQueryItem.configId,
                effectiveInitialQueryValueShortId: effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId,
                willPassInitialInputValue,
                initialInputValue: initialInputValueToPass,
                timestamp: Date.now()
            });
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `query-task-container ${isInPopper ? jimu_ui__WEBPACK_IMPORTED_MODULE_3__.FOCUSABLE_CONTAINER_CLASS : ''}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: selectedQueryRealIndex >= 0 ? selectedQueryRealIndex : 0, total: sortedQueryItems.length, queryItem: selectedQueryItem, isInPopper: isInPopper, initialInputValue: initialInputValueToPass, onHashParameterUsed: onHashParameterUsed, queryItems: sortedQueryItems, selectedQueryIndex: selectedUngroupedIndex, onQueryChange: (index) => setSelectedUngroupedIndex(index), 
                    // Grouping props
                    groups: groups, ungrouped: ungrouped, 
                    // Graphics layer props
                    useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, onInitializeGraphicsLayer: onInitializeGraphicsLayer, onClearGraphicsLayer: onClearGraphicsLayer, groupOrder: groupOrder, selectedGroupId: selectedGroupId, selectedGroupQueryIndex: selectedGroupQueryIndex, onGroupChange: (groupId) => setSelectedGroupId(groupId), onGroupQueryChange: (index) => setSelectedGroupQueryIndex(index), onUngroupedChange: (index) => setSelectedUngroupedIndex(index), resultsMode: resultsMode, onResultsModeChange: onResultsModeChange, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, activeTab: activeTab, onTabChange: onTabChange }) }));
        })() }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskSpatialForm: () => (/* binding */ QueryTaskSpatialForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-from-ds */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx");
/* harmony import */ var _geometry_from_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry-from-map */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx");
/* harmony import */ var _geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./geometry-from-draw */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");

/** @jsx jsx */








function QueryTaskSpatialForm(props) {
    var _a;
    const { label, desc, filterTypes, mapWidgetIds, onFilterChange, onRelationChange, onBufferChange, useDataSources, spatialRelations, useRuntimeData, dsEnableBuffer, dsBufferDistance, dsBufferUnit, drawEnableBuffer, drawBufferDistance, drawBufferUnit, createToolTypes, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // used to store the selection of the data source in order to update the filter when option changes
    const selectedGeometriesRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const mapExists = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        if ((mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.length) > 0) {
            const mapWidgetId = mapWidgetIds[0];
            return state.appConfig.widgets[mapWidgetId] != null;
        }
        return false;
    });
    const canUseMapFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return mapExists && ((filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent)) || (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode)));
    }, [filterTypes, mapExists]);
    const supportedFilterTypes = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [];
        if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData) {
            result.push({ value: 'data', label: getI18nMessage('featureFromDs') });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent))) {
            result.push({ value: 'map', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent}`) });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode))) {
            result.push({ value: 'draw', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode}`) });
        }
        return result;
    }, [canUseMapFilter, useDataSources, useRuntimeData, getI18nMessage, filterTypes]);
    const [currentFilterType, setCurrentFilterType] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // in order to avoid invalid option being selected
        if (currentFilterType !== 'none' && !supportedFilterTypes.find((item) => item.value === currentFilterType)) {
            setCurrentFilterType((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
        }
    }, [currentFilterType, supportedFilterTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear the relationship and buffer if filter type is not 'data'
        if (currentFilterType === 'map' || currentFilterType === 'draw' || currentFilterType === 'none') {
            onRelationChange(null);
            onBufferChange(0, _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters);
            onFilterChange({ geometry: null });
        }
        // no need to update the filter if the data source has selection since it will be updated in the handleSelectionChange method
        if (currentFilterType === 'data' && selectedGeometriesRef.current == null) {
            onFilterChange({ geometry: null });
        }
    }, [currentFilterType, onRelationChange, onBufferChange, onFilterChange]);
    const handleFilterTypeChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => { setCurrentFilterType(evt.target.value); }, []);
    const handleGeometryChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometry, layer, graphic, clearAfterApply) => {
        onFilterChange({ geometry, graphic, layer, clearAfterApply });
    }, [onFilterChange]);
    const handleSelectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometries) => {
        selectedGeometriesRef.current = geometries;
        onFilterChange({ geometry: geometries });
    }, [onFilterChange]);
    if (!((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData || canUseMapFilter)) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4 pb-4', "aria-label": label, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !label && !desc }), children: [label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: label }), desc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: desc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), supportedFilterTypes.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3', children: getI18nMessage('chooseFilterType') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterType'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `height: 32px;`, value: currentFilterType, onChange: handleFilterTypeChanged, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'none', children: "-" }, '-'), supportedFilterTypes.map(item => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item.value, children: item.label }, item.value))] })] })), currentFilterType === 'data' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__.GeometryFromDataSource, { enableBuffer: dsEnableBuffer, bufferDistance: dsBufferDistance, bufferUnit: dsBufferUnit, spatialRelations: spatialRelations, useDataSources: useDataSources, useRuntimeData: useRuntimeData, onSelectionChange: handleSelectionChange, onRelationChange: onRelationChange, onBufferChange: onBufferChange })), currentFilterType === 'map' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_map__WEBPACK_IMPORTED_MODULE_6__.GeometryFromMap, { mapWidgetIds: mapWidgetIds, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange })), currentFilterType === 'draw' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__.GeometryFromDraw, { enableBuffer: drawEnableBuffer, bufferDistance: drawBufferDistance, bufferUnit: drawBufferUnit, mapWidgetIds: mapWidgetIds, widgetId: widgetId, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange, onBufferChange: onBufferChange }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTask: () => (/* binding */ QueryTask)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_task_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx");
/* harmony import */ var _query_result__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-result */ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_label__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-label */ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx");
/* harmony import */ var _hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./hooks/use-zoom-to-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-zoom-to-records.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var _loading_result__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./loading-result */ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

/** @jsx jsx */


















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.createQuerySimpleDebugLogger)();
// Event fired when SqlExpressionRuntime converts hash value from string to array format
const QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT = 'querysimple-hash-value-converted';
// Event fired when a hash-triggered query execution completes successfully
// This allows HelperSimple to track which hash parameters have been executed
const QUERYSIMPLE_HASH_QUERY_EXECUTED_EVENT = 'querysimple-hash-query-executed';
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  &.wrapped .query-form {
    height: 100%;
  }
  .query-task__content {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-top: 8px;
    &:has(> .query-form__header > div:not(.d-none)), &:has(> .query-result) {
      padding-top: 16px;
    }
  }
  .query-form__header {
    display: flex;
    &.has-content {
      border-bottom: 1px solid var(--sys-color-divider-secondary);
      margin-bottom: 6px;
      padding-bottom: 8px;
    }
    .nav-action {
      flex: 1 1 0;
      overflow: hidden;
      display: flex;
      .jimu-btn {
        min-width: 26px;
      }
    }
    .result-menu {
      display: flex;
    }
  }
`;
function QueryTask(props) {
    var _a, _b, _c, _d, _e;
    const { queryItem, onNavBack, total, isInPopper = false, wrappedInPopper = false, className = '', index, initialInputValue, onHashParameterUsed, queryItems, selectedQueryIndex, onQueryChange, groups, ungrouped, groupOrder, selectedGroupId, selectedGroupQueryIndex, onGroupChange, onGroupQueryChange, onUngroupedChange, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab: propActiveTab, onTabChange: propOnTabChange } = props, otherProps = __rest(props, ["queryItem", "onNavBack", "total", "isInPopper", "wrappedInPopper", "className", "index", "initialInputValue", "onHashParameterUsed", "queryItems", "selectedQueryIndex", "onQueryChange", "groups", "ungrouped", "groupOrder", "selectedGroupId", "selectedGroupQueryIndex", "onGroupChange", "onGroupQueryChange", "onUngroupedChange", "resultsMode", "onResultsModeChange", "accumulatedRecords", "onAccumulatedRecordsChange", "useGraphicsLayerForHighlight", "graphicsLayer", "mapView", "onInitializeGraphicsLayer", "onClearGraphicsLayer", "activeTab", "onTabChange"]);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_14__["default"]);
    const zoomToRecords = (0,_hooks_use_zoom_to_records__WEBPACK_IMPORTED_MODULE_10__.useZoomToRecords)(mapView);
    const [stage, setStage] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0); // 0 = form, 1 = results, 2 = loading
    const [internalActiveTab, setInternalActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState('query');
    // Log when initialInputValue prop is received
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('HASH-EXEC', {
            event: 'querytask-initialinputvalue-prop-received',
            widgetId: props.widgetId,
            queryItemConfigId: props.queryItem.configId,
            queryItemShortId: props.queryItemShortId,
            hasInitialInputValue: !!props.initialInputValue,
            initialInputValue: props.initialInputValue,
            timestamp: Date.now()
        });
    }, [props.initialInputValue, props.widgetId, props.queryItem.configId, props.queryItemShortId]);
    // Controlled tab state: use prop if provided, otherwise internal state
    const activeTab = propActiveTab || internalActiveTab;
    const setActiveTab = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab) => {
        if (propOnTabChange) {
            propOnTabChange(tab);
        }
        else {
            setInternalActiveTab(tab);
        }
    }, [propOnTabChange]);
    const [enabled, setEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const [resultCount, setResultCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    // Track if we've already selected records for the current query results
    const hasSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track query execution count to force QueryTaskResult remount on new queries
    const queryExecutionKeyRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const queryParamRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const recordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [outputDS, setOutputDS] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [spatialFilterEnabled, setSpatialFilterEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const attributeFilterSqlExprObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.sqlExprObj);
    const spatialFilterObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const clearResultBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const [dataActionFilter, setDataActionFilter] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.configId);
    // Track manual tab switches to prevent auto-switch useEffect from interfering
    const manualTabSwitchRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track when a query was just executed - only auto-switch after query execution completes
    const queryJustExecutedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Store the last runtime zoom override value from the form for use by Add to Map action
    const lastRuntimeZoomToSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Error states for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [zoomError, setZoomError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Store pending query when waiting for hash value conversion
    const pendingHashQueryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_QUERY_ITEM, queryItem);
    const { icon, name, displayLabel } = currentItem;
    const dsExists = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.useDataSourceExists)({ widgetId: props.widgetId, useDataSourceId: (_a = currentItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId });
    // Debug logging for tab content rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('TASK', {
            event: 'query-tab-content-render',
            activeTab,
            enabled,
            dsExists,
            dataSource: dataSource ? 'exists' : 'null',
            queryItemConfigId: queryItem.configId,
            note: 'Query tab content state check'
        });
    }, [activeTab, enabled, dsExists, dataSource, queryItem.configId]);
    // Debug logging for Tab children rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'query-tab-children-render',
                activeTab,
                queryItemConfigId: queryItem.configId,
                note: 'Query Tab children should be rendering'
            });
        }
    }, [activeTab, queryItem.configId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    // Get the pagination style from widget config (MultiPage or LazyLoad/Single-page)
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    // Get the initial page size for single-page (LazyLoad) results
    // This allows users to configure how many records are loaded initially when using single-page mode
    // Defaults to 100 if not configured
    const lazyLoadInitialPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.lazyLoadInitialPageSize;
    });
    // Watch for when results are ready and switch to Results tab
    // ONLY auto-switch when a query was just executed and results are loaded
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Don't auto-switch if user manually switched tabs
        if (manualTabSwitchRef.current) {
            debugLogger.log('TASK', {
                event: 'auto-switch-skipped',
                reason: 'manual-tab-switch-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                activeTab,
                resultCount,
                queryJustExecutedRef: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
            return;
        }
        // FORCED: Always use SimpleList - we're done with lazy loading issues
        // Records are available immediately, so we can switch as soon as resultCount > 0
        const isSimpleList = true;
        // ONLY auto-switch when:
        // 1. A query was just executed (queryJustExecutedRef.current === true)
        // 2. We have results (resultCount > 0)
        // 3. Records are actually loaded:
        //    - For SimpleList: resultCount > 0 is sufficient (records available immediately)
        //    - For LazyLoad: recordsRef.current must have data (wait for lazy loading)
        // 4. We're currently on the query tab (don't switch if already on results)
        const hasRecords = isSimpleList
            ? resultCount > 0
            : (recordsRef.current && recordsRef.current.length > 0);
        debugLogger.log('TASK', {
            event: 'auto-switch-check',
            widgetId: props.widgetId,
            queryItemConfigId: queryItem.configId,
            activeTab,
            resultCount,
            queryJustExecutedRef: queryJustExecutedRef.current,
            isSimpleList,
            pagingTypeInConfig,
            hasRecords,
            recordsRefLength: ((_a = recordsRef.current) === null || _a === void 0 ? void 0 : _a.length) || 0,
            manualTabSwitchRef: manualTabSwitchRef.current,
            willAutoSwitch: queryJustExecutedRef.current && resultCount > 0 && hasRecords && activeTab === 'query',
            timestamp: Date.now()
        });
        if (queryJustExecutedRef.current &&
            resultCount > 0 &&
            hasRecords &&
            activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'auto-switch-triggered',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                fromTab: activeTab,
                toTab: 'results',
                resultCount,
                timestamp: Date.now()
            });
            setActiveTab('results');
            queryJustExecutedRef.current = false; // Reset after switching
            debugLogger.log('TASK', {
                event: 'auto-switch-completed',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                queryJustExecutedRefReset: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
        }
    }, [resultCount, activeTab, pagingTypeInConfig]);
    // Verify dropdowns are synchronized with hash parameter when present
    // This is especially important for grouped queries where dropdowns need to be synchronized
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only verify if we have a hash parameter
        if (!initialInputValue || !queryItem.shortId) {
            return;
        }
        // Verify the current queryItem matches what we expect from hash parameter
        const expectedShortId = queryItem.shortId;
        const isGroupedQuery = queryItem.groupId !== null && queryItem.groupId !== undefined;
        // Check if dropdowns are correctly set for grouped queries
        if (isGroupedQuery) {
            const expectedGroupId = queryItem.groupId;
            const actualGroupId = selectedGroupId;
            const expectedQueryIndex = selectedGroupQueryIndex;
            if (expectedGroupId !== actualGroupId) {
                debugLogger.log('GROUP', {
                    event: 'dropdown-group-mismatch',
                    expectedGroupId,
                    actualGroupId,
                    queryItemShortId: expectedShortId,
                    warning: 'First dropdown may not be synchronized with hash parameter'
                });
            }
            else if (expectedQueryIndex !== undefined) {
                // Verify the query index within the group matches
                const groupItems = (_a = groups === null || groups === void 0 ? void 0 : groups[expectedGroupId]) === null || _a === void 0 ? void 0 : _a.items;
                if (groupItems && groupItems.length > expectedQueryIndex) {
                    const expectedQueryConfigId = (_b = groupItems[expectedQueryIndex]) === null || _b === void 0 ? void 0 : _b.configId;
                    const actualQueryConfigId = queryItem.configId;
                    if (expectedQueryConfigId !== actualQueryConfigId) {
                        debugLogger.log('GROUP', {
                            event: 'dropdown-query-index-mismatch',
                            expectedQueryConfigId,
                            actualQueryConfigId,
                            expectedQueryIndex,
                            queryItemShortId: expectedShortId,
                            warning: 'Second dropdown may not be synchronized with hash parameter'
                        });
                    }
                    else {
                        debugLogger.log('GROUP', {
                            event: 'dropdowns-synchronized',
                            queryItemShortId: expectedShortId,
                            groupId: expectedGroupId,
                            selectedGroupQueryIndex: expectedQueryIndex,
                            note: 'Dropdowns synchronized with hash parameter'
                        });
                    }
                }
            }
        }
        else {
            // Ungrouped query - verify it's selected
            debugLogger.log('GROUP', {
                event: 'dropdowns-synchronized-ungrouped',
                queryItemShortId: expectedShortId,
                note: 'Ungrouped query dropdown synchronized with hash parameter'
            });
        }
    }, [initialInputValue, queryItem.shortId, queryItem.groupId, queryItem.configId, selectedGroupId, selectedGroupQueryIndex, groups]);
    const useOutputDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
        dataSourceId: queryItem.outputDataSourceId,
        mainDataSourceId: queryItem.outputDataSourceId
    }), [queryItem.outputDataSourceId]);
    const updateDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        var _a, _b;
        const currentDs = ds !== null && ds !== void 0 ? ds : dataSource;
        // should disable spatial filter if the dataSource is an output ds and it already has spatial filter
        if ((_a = currentDs === null || currentDs === void 0 ? void 0 : currentDs.getDataSourceJson()) === null || _a === void 0 ? void 0 : _a.isOutputFromWidget) {
            const qDs = currentDs;
            const qParams = (_b = qDs.getCurrentQueryParams) === null || _b === void 0 ? void 0 : _b.call(qDs);
            if (qParams.geometry != null) {
                setSpatialFilterEnabled(false);
            }
            else {
                setSpatialFilterEnabled(true);
            }
        }
    }, [dataSource]);
    const handleStatusChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((enabled) => {
        setEnabled(enabled);
        updateDataSource();
    }, [updateDataSource]);
    const handleOutputDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info, preInfo) => {
        const outputId = queryItem.outputDataSourceId;
        const filter = (info === null || info === void 0 ? void 0 : info.widgetQueries) ? info.widgetQueries[`setFilter-${outputId}`] : null;
        if (filter == null) { // filter is null means there are incomplete queries, ignore this change
            return;
        }
        const preFilter = (preInfo === null || preInfo === void 0 ? void 0 : preInfo.widgetQueries) ? preInfo.widgetQueries[`setFilter-${outputId}`] : null;
        if ((filter === null || filter === void 0 ? void 0 : filter.where) !== (preFilter === null || preFilter === void 0 ? void 0 : preFilter.where)) {
            setDataActionFilter(filter);
        }
    }, [queryItem.outputDataSourceId]);
    const publishDataClearedMsg = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        if (!outputDS)
            return;
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordSetChangeMessage(props.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_1__.RecordSetChangeType.Remove, [outputDS.id]);
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        yield jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(props.widgetId, [], [outputDS.id]));
    }), [props.widgetId, outputDS]);
    /**
     * Clears all query results from the UI and map.
     * This is the single source of truth for clearing results.
     * It clears the records, resets the result count, clears selection from the map,
     * publishes a cleared message to the map, switches back to the Query tab,
     * and increments the query execution key to force QueryTaskResult to remount with fresh state.
     */
    const clearResult = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (reason = 'unknown') {
        debugLogger.log('TASK', {
            event: 'clearResult-called',
            widgetId: props.widgetId,
            hasOutputDS: !!outputDS,
            reason,
            timestamp: Date.now()
        });
        recordsRef.current = null;
        outputDS === null || outputDS === void 0 ? void 0 : outputDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady);
        setResultCount(0);
        // NOTE: Graphics layer clearing is now handled inside clearSelectionInDataSources
        // called below. We ensure this is awaited to prevent race conditions.
        // Clear selection directly from data source using utility function
        try {
            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.clearSelectionInDataSources)(props.widgetId, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            debugLogger.log('TASK', {
                event: 'clearResult-selection-cleared',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
        }
        catch (error) {
            debugLogger.log('TASK', {
                event: 'clearResult-selection-clear-failed',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                timestamp: Date.now()
            });
        }
        // Clear widget-level accumulated records when clearing results
        if (onAccumulatedRecordsChange) {
            onAccumulatedRecordsChange([]);
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-cleared-on-clear-results',
                widgetId: props.widgetId
            });
        }
        yield publishDataClearedMsg();
        // Switch back to Query tab when clearing results
        setActiveTab('query');
        setStage(0);
        hasSelectedRecordsRef.current = false; // Reset selection flag when clearing
        // Increment query execution key to force QueryTaskResult remount with fresh state
        queryExecutionKeyRef.current += 1;
        // Clear error states when clearing results
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'clearResult-complete',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
    }), [outputDS, publishDataClearedMsg, props.widgetId, queryItem.configId, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer]);
    /**
     * Handles data source creation when switching between query items.
     * When a new query item is selected (e.g., switching from Parcel to Major),
     * this clears old results to ensure all cleanup logic runs properly.
     *
     * @param ds - The newly created data source for the selected query item
     */
    const handleDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-start',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // In "Add to" and "Remove from" modes, preserve accumulated records and selection - don't clear
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'preserving-selection-on-query-switch-handleDataSourceCreated',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length
            });
            setDataSource(ds);
            updateDataSource(ds);
            setStage(0);
            setActiveTab('query');
            return; // Skip clearing - preserve selection
        }
        // For "New" mode, clear old results
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-clearing-results-for-new-mode',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
        yield clearResult('handleDataSourceCreated-new-mode');
        setDataSource(ds);
        updateDataSource(ds);
        setStage(0);
        setActiveTab('query'); // Return to Query tab when switching queries
    }), [updateDataSource, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const handleOutputDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        setOutputDS(ds);
        // CHECK rootDataSource.map to see how framework accesses map view
        try {
            const originDataSources = ds.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (originDS) {
                const rootDS = originDS.getRootDataSource();
                if (rootDS) {
                    // Expose rootDS to window for console inspection
                    ;
                    window.__querySimpleRootDS = rootDS;
                    window.__querySimpleRootDSMap = rootDS.map;
                    window.__querySimpleOriginDS = originDS;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'check-root-datasource-map',
                        widgetId: props.widgetId,
                        outputDSId: ds.id,
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        hasRootDSMap: !!rootDS.map,
                        rootDSMapType: rootDS.map ? typeof rootDS.map : 'none',
                        rootDSMapId: ((_a = rootDS.map) === null || _a === void 0 ? void 0 : _a.id) || 'none',
                        hasRootDSMapView: !!((_b = rootDS.map) === null || _b === void 0 ? void 0 : _b.view),
                        hasRootDSMapViews: !!((_c = rootDS.map) === null || _c === void 0 ? void 0 : _c.views),
                        rootDSMapViewsLength: ((_e = (_d = rootDS.map) === null || _d === void 0 ? void 0 : _d.views) === null || _e === void 0 ? void 0 : _e.length) || 0,
                        // Log some map properties if it exists
                        rootDSMapKeys: rootDS.map ? Object.keys(rootDS.map).filter(key => !key.startsWith('_') &&
                            typeof rootDS.map[key] !== 'function').slice(0, 20) : [],
                        // Log that objects are available on window for console inspection
                        consoleInspection: 'Check window.__querySimpleRootDS, window.__querySimpleRootDSMap, window.__querySimpleOriginDS',
                        timestamp: Date.now()
                    });
                    // If map exists, check its view
                    const rootMap = rootDS.map;
                    if (rootMap) {
                        const view = rootMap.view ||
                            ((_g = (_f = rootMap.views) === null || _f === void 0 ? void 0 : _f.getItemAt) === null || _g === void 0 ? void 0 : _g.call(_f, 0)) ||
                            (((_h = rootMap.views) === null || _h === void 0 ? void 0 : _h.length) > 0 ? rootMap.views[0] : null);
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'check-root-datasource-map-view',
                            widgetId: props.widgetId,
                            hasView: !!view,
                            viewType: (view === null || view === void 0 ? void 0 : view.type) || 'none',
                            viewId: (view === null || view === void 0 ? void 0 : view.id) || 'none',
                            timestamp: Date.now()
                        });
                    }
                }
            }
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'check-root-datasource-map-error',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
        }
        // Initialize graphics layer lazily if enabled and not already initialized
        if (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) {
            yield onInitializeGraphicsLayer(ds);
            // After initialization, graphicsLayer and mapView props should be updated
            // But since props come from refs, we need to wait for widget re-render
            // For now, use the props that will be updated on next render
        }
        // If in "Add to" or "Remove from" mode and we have accumulated records, re-select them
        // This uses the same logic as after query completion - selectRecordsAndPublish
        // This ensures records are selected both on the map and in the Results tab
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            // Use a delay to ensure the DS is fully ready and graphics layer props are updated after widget re-render
            // If graphics layer was just initialized, wait a bit longer for props to update
            const delay = (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) ? 200 : 100;
            setTimeout(() => {
                const featureDS = ds;
                if (featureDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    const recordIds = accumulatedRecords.map(record => record.getId());
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.selectRecordsAndPublish)(props.widgetId, featureDS, recordIds, accumulatedRecords, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            // Update recordsRef so results tab shows accumulated records
                            recordsRef.current = accumulatedRecords;
                            setResultCount(accumulatedRecords.length);
                            debugLogger.log('RESULTS-MODE', {
                                event: 're-selected-accumulated-records-after-query-switch',
                                widgetId: props.widgetId,
                                outputDSId: featureDS.id,
                                recordsCount: accumulatedRecords.length
                            });
                            // Verify what's actually selected in the DS after a delay
                            setTimeout(() => {
                                var _a;
                                const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(featureDS.id);
                                const selectedInDS = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
                                const selectedIdsInDS = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
                                debugLogger.log('RESULTS-MODE', {
                                    event: 'verify-records-after-reselection',
                                    widgetId: props.widgetId,
                                    outputDSId: featureDS.id,
                                    expectedCount: accumulatedRecords.length,
                                    actualSelectedInDS: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) || 0,
                                    selectedIdsInDS: selectedIdsInDS.length,
                                    recordsMatch: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) === accumulatedRecords.length
                                });
                            }, 200);
                        }
                        catch (error) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 're-selection-failed-after-switch',
                                widgetId: props.widgetId,
                                error: error instanceof Error ? error.message : 'Unknown error',
                                errorStack: error instanceof Error ? error.stack : undefined
                            });
                        }
                    }))();
                }
            }, 100);
        }
    }), [resultsMode, accumulatedRecords, props.widgetId, useGraphicsLayerForHighlight, onInitializeGraphicsLayer]);
    // Clear results when query item changes (e.g., when new hash parameter triggers different query)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Only clear if we're actually switching to a different query (not just re-rendering)
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        // Only clear results when switching queries if we're in "New" mode
        // In "Add to" and "Remove from" modes, we want to preserve accumulated records across query switches
        if (isSwitchingQueries && resultCount > 0 && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            // Store the old configId before updating
            const oldConfigId = previousConfigIdRef.current;
            // Update the ref to track the new query
            previousConfigIdRef.current = queryItem.configId;
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-results-on-query-switch-new-mode',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode
            });
            // Clear immediately when switching queries, but wrap in try-catch to handle
            // race conditions with feature info windows that might be rendering
            try {
                clearResult('query-item-switch-new-mode');
            }
            catch (error) {
                // Log for debugging but don't show to user (framework race condition)
                // The error is in framework code (feature-info.tsx), not our code
                // This can happen if feature-info.tsx is trying to appendChild to a DOM element
                // that gets removed when we clear selection
                debugLogger.log('TASK', {
                    event: 'clear-result-race-condition',
                    error: error instanceof Error ? error.message : String(error),
                    note: 'Likely race condition with feature-info.tsx'
                });
                if (true) {
                    console.warn('Error clearing results (likely race condition with feature info):', error);
                }
                // Don't set error state - this is expected in some scenarios
            }
        }
        else if (isSwitchingQueries) {
            // Just update the ref - don't clear results if in "Add to" or "Remove from" mode or no results
            previousConfigIdRef.current = queryItem.configId;
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'preserving-accumulated-records-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    oldConfigId: previousConfigIdRef.current,
                    newConfigId: queryItem.configId,
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
                });
            }
        }
    }, [queryItem.configId, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const navToForm = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
        if (clearResults) {
            // Use the centralized clearResult method instead of duplicating logic
            yield clearResult('navToForm-clearResults');
            return;
        }
        // Switch to query tab but don't clear results unless explicitly requested
        // Mark as manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab('query');
        // Reset the flag after a short delay
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Only change stage if we're clearing results
        // Otherwise, keep stage at 1 (results available) so results persist
        if (!clearResults && resultCount > 0) {
            setStage(1); // Keep results available
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
        });
    }), [clearResult, resultCount]);
    /**
     * Handles tab switching between Query and Results tabs.
     * Tab switching preserves results state - results remain visible and selected
     * when switching between tabs. Results are only cleared when explicitly
     * clicking the trash can button or when starting a new query.
     *
     * @param tab - The tab to switch to ('query' | 'results')
     * @param event - Optional mouse event to prevent default behavior
     */
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab, event) => {
        debugLogger.log('TASK', {
            event: 'tab-change',
            tab,
            currentTab: activeTab,
            resultCount,
            eventType: event === null || event === void 0 ? void 0 : event.type
        });
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        // Don't allow switching to results if there are no results
        if (tab === 'results' && resultCount === 0) {
            debugLogger.log('TASK', {
                event: 'tab-change-blocked',
                reason: 'no-results',
                tab,
                resultCount
            });
            return;
        }
        // Mark this as a manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab(tab);
        // Reset the flag after a short delay to allow the state update to complete
        // This prevents the auto-switch useEffect from immediately switching back
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Don't change stage here - just switch the view
        // Stage should remain at 1 (results available) when switching between tabs
    }, [resultCount, activeTab]);
    /**
     * Internal implementation of handleFormSubmit (without waiting logic)
     * This is called either directly or after hash value conversion
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmitInternal = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e;
        // Clear previous errors when starting a new query
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'handleFormSubmitInternal-executing',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // Store the runtime zoom override for use by Add to Map action
        lastRuntimeZoomToSelectedRef.current = runtimeZoomToSelected;
        attributeFilterSqlExprObj.current = sqlExpr;
        spatialFilterObj.current = spatialFilter;
        // Load the first page
        const featureDS = outputDS;
        // For "Add to" and "Remove from" modes, use widget-level accumulated records
        // These persist across query switches, unlike query-item-level records
        let existingRecordsForMerge = [];
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
            // Robust capture strategy:
            // 1. Try records from props (already merged by parent)
            // 2. Fallback to currently selected records in DS (captured during mode switch)
            const fromProp = accumulatedRecords || [];
            const fromDS = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
            existingRecordsForMerge = fromProp.length > 0 ? fromProp : fromDS;
            debugLogger.log('RESULTS-MODE', {
                event: 'captured-existing-records-diagnostic',
                widgetId: props.widgetId,
                resultsMode,
                fromPropCount: fromProp.length,
                fromDSCount: fromDS.length,
                finalCapturedCount: existingRecordsForMerge.length,
                firstRecordId: ((_b = (_a = existingRecordsForMerge[0]) === null || _a === void 0 ? void 0 : _a.getId) === null || _b === void 0 ? void 0 : _b.call(_a)) || 'none',
                allRecordIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                outputDSId: outputDS.id,
                timestamp: Date.now()
            });
        }
        // For "New" mode, clear old results and graphics layer
        // We call clearResult() directly and AWAIT it to ensure it's finished before query execution starts
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-clearing-results-for-new-mode',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
            yield clearResult('handleFormSubmit-new-mode');
        }
        // Set loading stage
        setStage(2);
        // FORCED: Always use SimpleList - fetch ALL records, not just a page
        // Use data source's max record count, or fall back to a large number (10000)
        const maxRecordCount = (_e = (_d = (_c = featureDS).getMaxRecordCount) === null || _d === void 0 ? void 0 : _d.call(_c)) !== null && _e !== void 0 ? _e : 10000;
        let pageSize = maxRecordCount;
        const queryParams = (0,_query_utils__WEBPACK_IMPORTED_MODULE_12__.generateQueryParams)(featureDS, sqlExpr, spatialFilter, currentItem, 1, pageSize);
        queryParamRef.current = queryParams;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-query',
            widgetId: props.widgetId,
            where: queryParams.where,
            resultsMode,
            timestamp: Date.now()
        });
        // Change output ds status to unloaded before use it to load count/records.
        featureDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        featureDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        let queryResultCount = 0; // Capture count from records to use in finally block
        const startTime = performance.now();
        debugLogger.log('TASK', {
            event: 'perf-query-chain-start',
            widgetId: props.widgetId,
            resultsMode,
            where: queryParams.where,
            timestamp: Date.now()
        });
        // PERFORMANCE OPTIMIZATION: Removed redundant executeCountQuery() round-trip.
        // Since we fetch ALL records (pageSize = maxRecordCount), we can just use records.length.
        featureDS.updateQueryParams(queryParamRef.current, props.widgetId);
        const fetchStartTime = performance.now();
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(props.widgetId, queryItem, featureDS, queryParamRef.current)
            .then((result) => __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c;
            const fetchDurationMs = Math.round(performance.now() - fetchStartTime);
            const processingStartTime = performance.now();
            queryResultCount = ((_a = result.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'query-execution-complete',
                widgetId: props.widgetId,
                resultsMode,
                recordsReturned: queryResultCount,
                fetchDurationMs,
                existingCapturedCount: existingRecordsForMerge.length,
                timestamp: Date.now()
            });
            let recordsToDisplay = result.records || [];
            let dsToUse = outputDS;
            // Handle "Add to" mode: merge new results with widget-level accumulated records
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection && result.records && result.records.length > 0) {
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-starting-merge-diagnostic',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        existingIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        newCount: result.records.length,
                        newIds: result.records.map((r) => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        timestamp: Date.now()
                    });
                    // Merge new query results with widget-level accumulated records
                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, // Use outputDS for key generation
                    result.records, existingRecordsForMerge // Use consistently captured records
                    );
                    recordsToDisplay = mergedRecords;
                    // Update widget-level accumulated records so they persist across query switches
                    if (onAccumulatedRecordsChange) {
                        onAccumulatedRecordsChange(mergedRecords);
                    }
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-merge-complete-diagnostic',
                        widgetId: props.widgetId,
                        mergedRecordsCount: mergedRecords.length,
                        mergedIds: mergedRecords.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                        timestamp: Date.now()
                    });
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to normal behavior on error
                    recordsToDisplay = result.records;
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                // Handle "Remove from" mode: remove matching records from widget-level accumulated records
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-starting-merge',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        removeCount: ((_b = result.records) === null || _b === void 0 ? void 0 : _b.length) || 0
                    });
                    // Check if we have accumulated records to remove from
                    if (existingRecordsForMerge.length === 0) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-accumulated-records',
                            widgetId: props.widgetId,
                            queryRecordsCount: ((_c = result.records) === null || _c === void 0 ? void 0 : _c.length) || 0,
                            note: 'No accumulated records to remove from - no-op'
                        });
                        // No accumulated records, so nothing to remove - show empty results
                        recordsToDisplay = [];
                    }
                    else if (result.records && result.records.length > 0) {
                        // Remove matching records from accumulated records
                        const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.removeResultsFromAccumulated)(outputDS, // Use outputDS for key generation
                        result.records, existingRecordsForMerge // Use consistently captured records
                        );
                        recordsToDisplay = remainingRecords;
                        // Update widget-level accumulated records
                        if (onAccumulatedRecordsChange) {
                            onAccumulatedRecordsChange(remainingRecords);
                        }
                        // Remove records from origin data source selections (map highlighting)
                        // Also removes graphics from graphics layer if using graphics layer highlighting
                        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.removeRecordsFromOriginSelections)(props.widgetId, result.records, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-complete',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            queryRecordsCount: result.records.length,
                            remainingRecordsCount: remainingRecords.length,
                            recordsRemoved: existingRecordsForMerge.length - remainingRecords.length,
                            outputDSId: outputDS.id,
                            widgetLevelRecordsUpdated: true,
                            originSelectionsUpdated: true
                        });
                        // If all records removed, auto-clear (consistent with user expectation)
                        if (remainingRecords.length === 0) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-all-records-removed',
                                widgetId: props.widgetId,
                                note: 'All accumulated records removed - auto-clearing'
                            });
                            // Clear widget-level accumulated records
                            if (onAccumulatedRecordsChange) {
                                onAccumulatedRecordsChange([]);
                            }
                        }
                    }
                    else {
                        // Query returned no results - nothing to remove
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-query-results',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            note: 'Query returned no results - no records to remove'
                        });
                        // Keep existing accumulated records displayed
                        recordsToDisplay = existingRecordsForMerge;
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to showing query results on error
                    recordsToDisplay = result.records || [];
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                // For "New" mode, clear widget-level accumulated records
                if (onAccumulatedRecordsChange) {
                    onAccumulatedRecordsChange([]);
                }
            }
            recordsRef.current = recordsToDisplay;
            // Reset selection flag for new query results
            hasSelectedRecordsRef.current = false;
            // Select records in the output DS
            // For "Add to" mode, select merged records
            // For "Remove from" mode, select remaining records (already updated via removeRecordsFromOriginSelections)
            // For "New" mode, select query results
            if (recordsToDisplay && recordsToDisplay.length > 0 && dsToUse) {
                const recordIdsToSelect = recordsToDisplay.map(record => record.getId());
                // For "Remove from" mode, selection was already updated via removeRecordsFromOriginSelections
                // But we still need to select in the outputDS for widget state consistency
                if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                    // Selection was already updated in origin DSs via removeRecordsFromOriginSelections
                    // Just update outputDS selection for widget state consistency
                    try {
                        if (typeof dsToUse.selectRecordsByIds === 'function') {
                            dsToUse.selectRecordsByIds(recordIdsToSelect, recordsToDisplay);
                        }
                        hasSelectedRecordsRef.current = true;
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-updated',
                            widgetId: props.widgetId,
                            recordCount: recordsToDisplay.length
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }
                else {
                    // For "Add to" and "New" modes, select records normally
                    setSelectionError(null) // Clear previous errors
                    ;
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.selectRecordsAndPublish)(props.widgetId, dsToUse, recordIdsToSelect, recordsToDisplay, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            hasSelectedRecordsRef.current = true; // Mark as selected
                            // Dispatch custom selection event so Widget state is updated immediately
                            // This is crucial for hash-based execution where QueryTask handles selection
                            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.dispatchSelectionEvent)(props.widgetId, recordIdsToSelect, dsToUse, queryItem.configId);
                        }
                        catch (error) {
                            const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                            setSelectionError(errorMessage);
                            debugLogger.log('TASK', {
                                event: 'selection-failed',
                                error: errorMessage,
                                errorStack: error instanceof Error ? error.stack : undefined,
                                recordCount: recordIdsToSelect.length
                            });
                        }
                    }))();
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection && recordsToDisplay.length === 0) {
                // All records removed - clear selection
                ;
                (() => __awaiter(this, void 0, void 0, function* () {
                    try {
                        yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.clearSelectionInDataSources)(props.widgetId, dsToUse, useGraphicsLayerForHighlight, graphicsLayer);
                        hasSelectedRecordsRef.current = false;
                        // Notify Widget that selection is cleared
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_17__.dispatchSelectionEvent)(props.widgetId, [], dsToUse, queryItem.configId);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-all-records-removed-selection-cleared',
                            widgetId: props.widgetId
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-clear-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }))();
            }
            // Mark that query just executed BEFORE updating resultCount
            // This ensures the auto-switch useEffect sees queryJustExecutedRef.current === true
            queryJustExecutedRef.current = true;
            debugLogger.log('TASK', {
                event: 'query-executed-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                resultsMode,
                recordsToDisplayCount: recordsToDisplay.length,
                queryResultCount,
                timestamp: Date.now()
            });
            // Update result count FIRST (before any parent callbacks that might cause re-renders)
            // For "Add to" and "Remove from" modes, use accumulated/remaining count
            // For "New" mode, use query count
            const newResultCount = resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection
                ? recordsToDisplay.length
                : queryResultCount;
            setResultCount(newResultCount);
            // INSTANT UI FIX (The "Spinner Bypass"): 
            // Decouple the "Retrieving results..." spinner from asynchronous actions like zooming. 
            // By calling setStage(1) now, the user sees the result list immediately while 
            // the map animation continues in the background.
            setStage(1);
            debugLogger.log('TASK', {
                event: 'perf-processing-complete',
                widgetId: props.widgetId,
                processingDurationMs: Math.round(performance.now() - processingStartTime),
                totalChainDurationMs: Math.round(performance.now() - startTime),
                newResultCount,
                resultsMode,
                timestamp: Date.now()
            });
            // Zoom to records using shared zoom utility (consistent padding behavior)
            // Use runtime preference if provided, otherwise fall back to config setting (defaults to true)
            const shouldZoom = runtimeZoomToSelected !== undefined
                ? runtimeZoomToSelected
                : (queryItem.zoomToSelected !== false);
            // Use the output DS and merged records
            const recordsForZoom = recordsToDisplay || result.records;
            const dsForZoom = dsToUse || outputDS;
            if (recordsForZoom && recordsForZoom.length > 0 && dsForZoom && shouldZoom) {
                // BUG-GRAPHICS-001: Zoom operations fail when graphics layer is disabled
                if (!mapView && !useGraphicsLayerForHighlight) {
                    debugLogger.log('BUG', {
                        bugId: 'BUG-GRAPHICS-001',
                        category: 'GRAPHICS',
                        event: 'zoom-operation-failed-graphics-layer-disabled',
                        widgetId: props.widgetId,
                        operation: 'query-result-zoom',
                        recordsCount: recordsForZoom.length,
                        description: 'Zoom operation attempted but mapView is unavailable because useGraphicsLayerForHighlight is disabled',
                        workaround: 'Enable useGraphicsLayerForHighlight in widget settings',
                        targetResolution: 'r019.0'
                    });
                }
                try {
                    yield zoomToRecords(recordsForZoom);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to zoom to features';
                    setZoomError(errorMessage);
                    debugLogger.log('ZOOM', {
                        event: 'zoom-goTo-error-query',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    if (true) {
                        console.error('Error executing zoomToRecords', error);
                    }
                }
            }
            // NOW call onHashParameterUsed AFTER all UI updates and zoom operations complete
            // This prevents the parent re-render from interrupting the promise chain
            // This prevents hash parameters from re-executing when switching queries
            if (initialInputValue && queryItem.shortId && onHashParameterUsed) {
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-calling-onhashparameterused',
                    widgetId: props.widgetId,
                    queryItemConfigId: props.queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    timestamp: Date.now()
                });
                debugLogger.log('TASK', {
                    event: 'hash-query-executed-notifying-parent',
                    widgetId: props.widgetId,
                    queryItemConfigId: queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    timestamp: Date.now()
                });
                onHashParameterUsed(queryItem.shortId);
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-onhashparameterused-called',
                    widgetId: props.widgetId,
                    queryItemConfigId: props.queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    timestamp: Date.now()
                });
                // Fire event to notify HelperSimple that hash query execution is complete
                // This allows HelperSimple to track which hash parameters have been executed
                // to prevent re-execution when switching queries
                const hashParam = `${queryItem.shortId}=${initialInputValue}`;
                const executedEvent = new CustomEvent(QUERYSIMPLE_HASH_QUERY_EXECUTED_EVENT, {
                    detail: {
                        widgetId: props.widgetId,
                        shortId: queryItem.shortId,
                        value: initialInputValue,
                        hashParam
                    },
                    bubbles: true,
                    cancelable: true
                });
                window.dispatchEvent(executedEvent);
                debugLogger.log('HASH-EXEC', {
                    event: 'querytask-hash-query-executed-event-dispatched',
                    widgetId: props.widgetId,
                    queryItemConfigId: queryItem.configId,
                    queryItemShortId: queryItem.shortId,
                    initialInputValue,
                    hashParam,
                    timestamp: Date.now()
                });
            }
            return Promise.resolve(true);
        }))
            .catch(error => {
            debugLogger.log('TASK', {
                event: 'query-chain-failed-diagnostic',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            setStage(1); // Return to results or form stage even on error
        })
            .finally(() => {
            if ((spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.layer) && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.clearAfterApply)) {
                spatialFilter.layer.removeAll();
            }
            // setStage(1) // Removed from here; now called in the main chain before background actions
        });
    }), [currentItem, queryItem, props.widgetId, outputDS, publishDataClearedMsg, clearResult, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, onClearGraphicsLayer, mapView, useGraphicsLayerForHighlight, zoomToRecords]);
    // Listen for hash value conversion event and execute pending query
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleHashValueConverted = (event) => {
            var _a, _b, _c, _d, _e, _f, _g;
            debugLogger.log('TASK', {
                event: 'hash-value-converted-event-received',
                widgetId: props.widgetId,
                eventWidgetId: (_a = event.detail) === null || _a === void 0 ? void 0 : _a.widgetId,
                eventConfigId: (_b = event.detail) === null || _b === void 0 ? void 0 : _b.configId,
                matchesWidget: ((_c = event.detail) === null || _c === void 0 ? void 0 : _c.widgetId) === props.widgetId,
                hasPendingQuery: !!pendingHashQueryRef.current,
                timestamp: Date.now()
            });
            // Only process events for this widget
            if (((_d = event.detail) === null || _d === void 0 ? void 0 : _d.widgetId) !== props.widgetId) {
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-event-ignored-wrong-widget',
                    widgetId: props.widgetId,
                    eventWidgetId: (_e = event.detail) === null || _e === void 0 ? void 0 : _e.widgetId,
                    timestamp: Date.now()
                });
                return;
            }
            if (pendingHashQueryRef.current) {
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-executing-pending-query',
                    widgetId: props.widgetId,
                    configId: event.detail.configId,
                    initialInputValue: event.detail.initialInputValue,
                    timestamp: Date.now()
                });
                const { sqlExpr, spatialFilter, runtimeZoomToSelected } = pendingHashQueryRef.current;
                pendingHashQueryRef.current = null;
                // Execute the pending query now that value is converted
                // Use setTimeout to ensure this happens after the current event loop
                setTimeout(() => {
                    handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
                }, 0);
            }
            else {
                // Conversion happened before handleFormSubmit was called
                // applyQuery() is called directly from handleSqlExprObjChange in query-task-form.tsx
                debugLogger.log('TASK', {
                    event: 'hash-value-converted-event-received-no-pending-query',
                    widgetId: props.widgetId,
                    configId: (_f = event.detail) === null || _f === void 0 ? void 0 : _f.configId,
                    initialInputValue: (_g = event.detail) === null || _g === void 0 ? void 0 : _g.initialInputValue,
                    note: 'Conversion happened before handleFormSubmit - applyQuery() called directly from form component',
                    timestamp: Date.now()
                });
            }
        };
        document.addEventListener(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, handleHashValueConverted);
        return () => {
            document.removeEventListener(QUERYSIMPLE_HASH_VALUE_CONVERTED_EVENT, handleHashValueConverted);
        };
    }, [props.widgetId, handleFormSubmitInternal]);
    /**
     * Handles form submission when user clicks "Apply" button.
     * Checks if hash value needs conversion and waits for event if needed.
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmit = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c;
        // LOG AT THE VERY START - before any checks
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-called',
            widgetId: props.widgetId,
            sqlExprExists: !!sqlExpr,
            firstPartExists: !!((_a = sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.parts) === null || _a === void 0 ? void 0 : _a[0]),
            timestamp: Date.now()
        });
        // Check if this is a hash-triggered query with unconverted value (string format)
        const firstPart = (_b = sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.parts) === null || _b === void 0 ? void 0 : _b[0];
        const value = (firstPart === null || firstPart === void 0 ? void 0 : firstPart.type) === 'SINGLE' ? (_c = firstPart.valueOptions) === null || _c === void 0 ? void 0 : _c.value : null;
        const isStringValue = typeof value === 'string' && value.length > 0;
        const isArrayValue = Array.isArray(value) && value.length > 0;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-checking-conversion',
            widgetId: props.widgetId,
            initialInputValue,
            valueType: typeof value,
            isStringValue,
            isArrayValue,
            value: Array.isArray(value) ? value : value,
            willCheckWaitCondition: isStringValue && !isArrayValue && initialInputValue && value === initialInputValue,
            timestamp: Date.now()
        });
        // If value is string (not converted to array yet), wait for conversion event
        // This happens when hash value changes for same configId
        if (isStringValue && !isArrayValue && initialInputValue && value === initialInputValue) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-waiting-for-conversion',
                widgetId: props.widgetId,
                currentValue: value,
                initialInputValue,
                timestamp: Date.now()
            });
            // Store pending query
            pendingHashQueryRef.current = {
                sqlExpr,
                spatialFilter,
                runtimeZoomToSelected
            };
            // Set a timeout to prevent infinite waiting (fallback after 2 seconds)
            setTimeout(() => {
                if (pendingHashQueryRef.current) {
                    debugLogger.log('TASK', {
                        event: 'handleFormSubmit-conversion-timeout-executing-anyway',
                        widgetId: props.widgetId,
                        timestamp: Date.now()
                    });
                    const { sqlExpr, spatialFilter, runtimeZoomToSelected } = pendingHashQueryRef.current;
                    pendingHashQueryRef.current = null;
                    // Execute anyway (fallback)
                    handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
                }
            }, 2000);
            return; // Exit early, will execute when event fires
        }
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-immediately',
            widgetId: props.widgetId,
            reason: isStringValue ? 'not-hash-triggered' : (isArrayValue ? 'already-converted' : 'no-value'),
            valueType: typeof value,
            isStringValue,
            isArrayValue,
            timestamp: Date.now()
        });
        // Value is already converted or not hash-triggered, execute immediately
        handleFormSubmitInternal(sqlExpr, spatialFilter, runtimeZoomToSelected);
    }), [props.widgetId, initialInputValue, handleFormSubmitInternal]);
    const { useAttributeFilter, sqlExprObj, useSpatialFilter, spatialFilterTypes, spatialIncludeRuntimeData, spatialRelationUseDataSources } = currentItem;
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // DETECT SWITCH IN RENDER
    const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
    const isVirtualClearActive = isSwitchingQueries && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
    // Use these "effective" values for the UI
    const effectiveResultCount = isVirtualClearActive ? 0 : resultCount;
    const effectiveRecords = isVirtualClearActive ? [] : (recordsRef.current || []);
    // Create a unique key for the current query result set to help E2E tests detect fresh data
    const resultQueryKey = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return `${queryItem.configId}_${Date.now()}`;
    }, [queryItem.configId, resultCount]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task h-100', className, { wrapped: wrappedInPopper }), "data-result-query-key": resultQueryKey, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      ${style}
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useOutputDs, onDataSourceCreated: handleOutputDataSourceCreated, onDataSourceInfoChange: handleOutputDataSourceInfoChange }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { value: activeTab, onChange: (id) => handleTabChange(id), fill: true, type: 'underline', keepMount: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'query', title: getI18nMessage('queryTab'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'query'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
              padding-top: 0 !important;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-form__header mx-4 align-items-center', { 'in-popper': isInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              padding: 6px 0;
              padding-top: 8px;
              border-bottom: 1px solid var(--sys-color-divider-secondary);
              flex-shrink: 0;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('nav-action align-items-center', { 'd-none': wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1 1 0;
                overflow: hidden;
                display: flex;
                align-items: center;
                gap: 4px;
                .jimu-btn {
                  min-width: 26px;
                }
              `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 mr-2', { 'd-none': total === 1 || !onNavBack }), size: 'sm', type: 'tertiary', icon: true, onClick: onNavBack, "aria-label": getI18nMessage('back'), ref: backBtnRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_15__.ArrowLeftOutlined, { autoFlip: true }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_label__WEBPACK_IMPORTED_MODULE_9__.QueryTaskLabel, { icon: icon, name: displayLabel ? name : '' }), (() => {
                                                    var _a;
                                                    if (!queryItems || queryItems.length <= 1)
                                                        return null;
                                                    // Get current query's origin data source ID
                                                    const currentOriginDSId = (_a = queryItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId;
                                                    if (!currentOriginDSId)
                                                        return null;
                                                    // Find all queries from the same origin data source that have shortIds
                                                    const sameLayerQueries = queryItems.filter(item => {
                                                        var _a;
                                                        return ((_a = item.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId) === currentOriginDSId &&
                                                            item.shortId &&
                                                            item.shortId.trim() !== '';
                                                    });
                                                    // Only show info button if there are queries with shortIds
                                                    if (sameLayerQueries.length === 0)
                                                        return null;
                                                    // Build tooltip content
                                                    const queryLines = sameLayerQueries.map(item => {
                                                        const queryName = getQueryDisplayName(item);
                                                        return `${queryName}: #${item.shortId}=value or ?${item.shortId}=value`;
                                                    });
                                                    const tooltipTitle = `This layer can be searched using the shortIds ${sameLayerQueries.map(q => q.shortId).join(' and ')} using #shortId=value or ?shortId=value in the URL.\n\n${queryLines.join('\n')}`;
                                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: tooltipTitle, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": 'Hash parameter search information', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex-shrink: 0;
                        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }));
                                                })()] }), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: clearResultBtnRef, size: 'sm', type: 'tertiary', "aria-label": getI18nMessage('clearResult'), icon: true, className: 'ml-auto py-0', onClick: () => { clearResult('user-trash-click'); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__.TrashOutlined, {}) }) }))] }), (() => {
                                    // Only show dropdowns if multiple queries exist
                                    if (!queryItems || queryItems.length <= 1) {
                                        return null;
                                    }
                                    // Build flat list of all queries with their display info
                                    // For grouped queries, use group display name (only show once per group)
                                    const queryOptions = [];
                                    // Track which groups we've already added to avoid duplicates
                                    const addedGroups = new Set();
                                    queryItems.forEach((item, idx) => {
                                        var _a, _b, _c;
                                        if (item.groupId) {
                                            // For grouped queries, use group display name (only add once per group)
                                            if (!addedGroups.has(item.groupId)) {
                                                addedGroups.add(item.groupId);
                                                const groupDisplayName = ((_a = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.displayName) ||
                                                    ((_c = (_b = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _b === void 0 ? void 0 : _b.items[0]) === null || _c === void 0 ? void 0 : _c.name) ||
                                                    item.name ||
                                                    `Group ${item.groupId}`;
                                                queryOptions.push({
                                                    configId: item.configId,
                                                    displayName: groupDisplayName,
                                                    groupId: item.groupId,
                                                    index: idx
                                                });
                                            }
                                        }
                                        else {
                                            // Ungrouped query - use item.name for first dropdown (not searchAlias/jimuFieldName)
                                            queryOptions.push({
                                                configId: item.configId,
                                                displayName: item.name || getQueryDisplayName(item),
                                                groupId: null,
                                                index: idx
                                            });
                                        }
                                    });
                                    // Determine currently selected query
                                    const currentQueryItem = queryItem;
                                    const currentQueryGroupId = currentQueryItem.groupId || null;
                                    const isGroupedQuery = currentQueryGroupId !== null;
                                    // Find the option index for the current query
                                    const currentOptionIndex = queryOptions.findIndex(opt => {
                                        if (isGroupedQuery) {
                                            return opt.groupId === currentQueryGroupId;
                                        }
                                        else {
                                            return opt.configId === currentQueryItem.configId;
                                        }
                                    });
                                    debugLogger.log('GROUP', {
                                        event: 'rendering-dropdowns',
                                        totalQueries: queryItems.length,
                                        queryOptionsCount: queryOptions.length,
                                        currentQueryGroupId,
                                        isGroupedQuery,
                                        currentOptionIndex,
                                        selectedGroupId,
                                        selectedGroupQueryIndex,
                                        currentQueryConfigId: currentQueryItem.configId
                                    });
                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 4px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      font-size: 0.875rem;
                      font-weight: 500;
                      color: var(--sys-color-text-primary);
                      margin-bottom: 4px;
                      display: block;
                    `, children: getI18nMessage('searchLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: currentOptionIndex >= 0 ? currentOptionIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const optionIndex = parseInt(e.target.value);
                                                            const selectedOption = queryOptions[optionIndex];
                                                            debugLogger.log('GROUP', {
                                                                event: 'query-option-selected',
                                                                optionIndex,
                                                                selectedOption,
                                                                isGrouped: selectedOption.groupId !== null
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-layer-switch-new-mode');
                                                            }
                                                            if (selectedOption.groupId) {
                                                                // Grouped query selected - set group and first query in group
                                                                if (onGroupChange) {
                                                                    onGroupChange(selectedOption.groupId);
                                                                }
                                                                if (onGroupQueryChange) {
                                                                    onGroupQueryChange(0);
                                                                }
                                                            }
                                                            else {
                                                                // Ungrouped query selected - clear group selection
                                                                if (onGroupChange) {
                                                                    onGroupChange(null);
                                                                }
                                                                if (onUngroupedChange) {
                                                                    // Find the ungrouped index
                                                                    const ungroupedIndex = (_a = ungrouped === null || ungrouped === void 0 ? void 0 : ungrouped.findIndex(({ item }) => item.configId === selectedOption.configId)) !== null && _a !== void 0 ? _a : -1;
                                                                    if (ungroupedIndex >= 0) {
                                                                        onUngroupedChange(ungroupedIndex);
                                                                    }
                                                                    else {
                                                                        // Fallback: use the index from queryItems
                                                                        debugLogger.log('GROUP', {
                                                                            event: 'ungrouped-fallback-to-index',
                                                                            selectedOptionIndex: selectedOption.index
                                                                        });
                                                                        if (onQueryChange) {
                                                                            onQueryChange(selectedOption.index);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }), children: queryOptions.map((option, idx) => {
                                                            debugLogger.log('GROUP', {
                                                                event: 'rendering-query-option',
                                                                index: idx,
                                                                configId: option.configId,
                                                                displayName: option.displayName,
                                                                groupId: option.groupId
                                                            });
                                                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: option.displayName }, option.configId));
                                                        }) })] }), isGroupedQuery && currentQueryGroupId && groups && groups[currentQueryGroupId] && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      padding: 4px 16px;
                      flex-shrink: 0;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        margin-bottom: 4px;
                        display: block;
                      `, children: "Search Alias" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: selectedGroupQueryIndex !== undefined ? selectedGroupQueryIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const newIndex = parseInt(e.target.value);
                                                            debugLogger.log('GROUP', {
                                                                event: 'group-query-selected',
                                                                groupId: currentQueryGroupId,
                                                                groupQueryIndex: newIndex,
                                                                queryItemConfigId: (_a = groups[currentQueryGroupId].items[newIndex]) === null || _a === void 0 ? void 0 : _a.configId,
                                                                queryDisplayName: getQueryDisplayName(groups[currentQueryGroupId].items[newIndex])
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-alias-switch-new-mode');
                                                            }
                                                            if (onGroupQueryChange) {
                                                                onGroupQueryChange(newIndex);
                                                            }
                                                        }), children: groups[currentQueryGroupId].items.map((item, idx) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: getQueryDisplayName(item) }, item.configId))) })] }))] }));
                                })(), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 8px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "d-flex align-items-center", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      gap: 0.5rem;
                      flex-wrap: nowrap;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "title2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        white-space: nowrap;
                        flex-shrink: 0;
                      `, children: [getI18nMessage('results'), ":"] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: getI18nMessage('resultsModeDesc'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": getI18nMessage('resultsModeDesc'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `flex-shrink: 0;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: "radiogroup", "aria-label": getI18nMessage('resultsMode'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          display: flex;
                          gap: 4px;
                          align-items: stretch;
                          flex: 1;
                          min-width: 0;
                        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode: resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection, "aria-label": `${getI18nMessage('createNewResults')}: ${((_b = getI18nMessage('resultsModeDesc').split('\n')[1]) === null || _b === void 0 ? void 0 : _b.trim()) || ''}`, title: getI18nMessage('createNewResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeNew') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Add to" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                const recordsToCapture = (effectiveRecords && effectiveRecords.length > 0)
                                                                    ? effectiveRecords
                                                                    : ((outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || []);
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection &&
                                                                    recordsToCapture.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, recordsToCapture, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCapture.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection, "aria-label": `${getI18nMessage('addToCurrentResults')}: ${((_c = getI18nMessage('resultsModeDesc').split('\n')[2]) === null || _c === void 0 ? void 0 : _c.trim()) || ''}`, title: getI18nMessage('addToCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeAdd') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'primary' : 'default', disabled: !accumulatedRecords || accumulatedRecords.length === 0, onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Remove from" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                // (same pattern as "Add to" mode)
                                                                const recordsToCaptureForRemove = (effectiveRecords && effectiveRecords.length > 0)
                                                                    ? effectiveRecords
                                                                    : ((outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || []);
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection &&
                                                                    recordsToCaptureForRemove.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_13__.mergeResultsIntoAccumulated)(outputDS, recordsToCaptureForRemove, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch-to-remove',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCaptureForRemove.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection, "aria-label": `${getI18nMessage('removeFromCurrentResults')}: ${((_d = getI18nMessage('resultsModeDesc').split('\n')[3]) === null || _d === void 0 ? void 0 : _d.trim()) || ''}`, title: (!accumulatedRecords || accumulatedRecords.length === 0)
                                                                ? getI18nMessage('resultsModeDisabledRemove')
                                                                : getI18nMessage('removeFromCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeRemove') })] })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `results-mode-description-${props.widgetId}`, className: "sr-only", "aria-live": "polite", role: "status", children: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection
                                                ? getI18nMessage('createNewResults')
                                                : resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection
                                                    ? getI18nMessage('addToCurrentResults')
                                                    : getI18nMessage('removeFromCurrentResults') })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
            `, children: [enabled && dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  min-height: 0;
                  overflow: hidden;
                `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_form__WEBPACK_IMPORTED_MODULE_6__.QueryTaskForm, Object.assign({}, otherProps, { configId: queryItem.configId, outputDS: outputDS, datasourceReady: dataSource != null, spatialFilterEnabled: spatialFilterEnabled, dataActionFilter: dataActionFilter, onFormSubmit: handleFormSubmit, initialInputValue: initialInputValue, onHashParameterUsed: onHashParameterUsed, queryItemShortId: queryItem.shortId, activeTab: activeTab, onTabChange: setActiveTab }), queryItem.configId) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.DataSourceTip, { widgetId: props.widgetId, useDataSource: queryItem.useDataSource, showMessage: true, onStatusChange: handleStatusChange, onDataSourceCreated: handleDataSourceCreated })] })] }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'results', title: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { children: [getI18nMessage('resultsTab'), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  margin-left: 6px;
                  font-size: 0.75rem;
                  opacity: 0.7;
                `, children: ["(", effectiveResultCount, ")"] }))] }), disabled: effectiveResultCount === 0, children: effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'results'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 0;
                height: 100%;
                padding-top: 0 !important;
              `, onClick: (e) => {
                                // Prevent clicks from bubbling up when Results tab is active
                                if (activeTab === 'results') {
                                    e.stopPropagation();
                                }
                            }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result__WEBPACK_IMPORTED_MODULE_7__.QueryTaskResult, { widgetId: props.widgetId, queryItem: queryItem, queryParams: queryParamRef.current, resultCount: effectiveResultCount, maxPerPage: (_e = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(dataSource), records: effectiveRecords, outputDS: outputDS, runtimeZoomToSelected: lastRuntimeZoomToSelectedRef.current, resultsMode: resultsMode, useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, onNavBack: (...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
                                    // Handle navigation from QueryTaskResult
                                    // If clearResults is true, clear everything and go to query tab
                                    // If false, just switch to query tab without clearing
                                    if (clearResults) {
                                        hasSelectedRecordsRef.current = false; // Reset flag when clearing
                                        yield navToForm(true);
                                    }
                                    else {
                                        // Just switch tabs, don't clear results
                                        // Mark as manual switch to prevent auto-switch useEffect from interfering
                                        manualTabSwitchRef.current = true;
                                        setActiveTab('query');
                                        // Reset the flag after a short delay
                                        setTimeout(() => {
                                            manualTabSwitchRef.current = false;
                                        }, 100);
                                    }
                                }) }, `${queryItem.configId}-${queryExecutionKeyRef.current}`) })) })] }), (selectionError || zoomError) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 0 16px;
          margin-top: 8px;
        `, children: [selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) })), zoomError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: zoomError, onDismiss: () => setZoomError(null) }))] })), stage === 2 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1000;
          background-color: rgba(255, 255, 255, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_loading_result__WEBPACK_IMPORTED_MODULE_16__.LoadingResult, {}) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-utils.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineFields: () => (/* binding */ combineFields),
/* harmony export */   executeCountQuery: () => (/* binding */ executeCountQuery),
/* harmony export */   executeQuery: () => (/* binding */ executeQuery),
/* harmony export */   generateQueryParams: () => (/* binding */ generateQueryParams),
/* harmony export */   getPopupTemplate: () => (/* binding */ getPopupTemplate),
/* harmony export */   isQueryInputValid: () => (/* binding */ isQueryInputValid),
/* harmony export */   sanitizeQueryInput: () => (/* binding */ sanitizeQueryInput),
/* harmony export */   sanitizeSqlExpression: () => (/* binding */ sanitizeSqlExpression)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared-code/common */ "./your-extensions/widgets/shared-code/common.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
function combineFields(resultDisplayFields, resultTitleExpression, idField) {
    const fields = new Set();
    resultDisplayFields === null || resultDisplayFields === void 0 ? void 0 : resultDisplayFields.forEach(item => fields.add(item));
    if (resultTitleExpression) {
        const templates = resultTitleExpression.match(/\{\w*\}/g);
        if ((templates === null || templates === void 0 ? void 0 : templates.length) > 0) {
            templates.forEach(item => fields.add(item.substring(1, item.length - 1)));
        }
    }
    if (idField) {
        fields.add(idField);
    }
    return Array.from(fields);
}
/**
 * Validates user input before query execution.
 * @param input - The raw user input (string, number, etc.)
 * @param isList - Optional flag indicating if the input is from a list/selector (lenient validation)
 * @returns boolean - true if input is valid, false otherwise
 */
function isQueryInputValid(input, isList = false) {
    // If it's a list-based selection (Unique Values, Field Values), 
    // we allow empty/null as it might represent "no filter" or the user 
    // intends to interact with the list.
    if (isList) {
        return true;
    }
    if (input === null || input === undefined) {
        return false;
    }
    // If it's a string, ensure it's not empty or just whitespace
    if (typeof input === 'string') {
        return input.trim() !== '';
    }
    // If it's an array (often used in unique values or multiple selection)
    if (Array.isArray(input)) {
        if (input.length === 0)
            return false;
        // Check if the first item is valid (usually {value: '...', label: '...'})
        const firstItem = input[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // If it's a jimu-core Immutable array
    if (input.asMutable && typeof input.toArray === 'function') {
        const arr = input.toArray();
        if (arr.length === 0)
            return false;
        const firstItem = arr[0];
        if (firstItem && typeof firstItem === 'object' && 'value' in firstItem) {
            return isQueryInputValid(firstItem.value);
        }
        return true;
    }
    // For other types (numbers, dates), if it exists, we count it as valid
    return true;
}
/**
 * Sanitizes user input for query tasks.
 * 1. Strips leading and trailing whitespace.
 * 2. Prevents basic SQL injection by escaping single quotes.
 * 3. Handles empty or whitespace-only strings.
 *
 * @param input - The raw user input string
 * @returns Sanitized string or null if input is empty
 */
function sanitizeQueryInput(input) {
    if (!input || typeof input !== 'string') {
        return null;
    }
    const trimmed = input.trim();
    if (trimmed === '') {
        return null;
    }
    // Basic SQL escaping: replace single quotes with double single quotes
    return trimmed.replace(/'/g, "''");
}
/**
 * Sanitizes all values within an IMSqlExpression object.
 *
 * @param sqlExpr - The raw SQL expression object
 * @returns A new sanitized IMSqlExpression object
 */
function sanitizeSqlExpression(sqlExpr) {
    if (!sqlExpr || !sqlExpr.parts) {
        return sqlExpr;
    }
    let sanitizedExpr = sqlExpr;
    sqlExpr.parts.forEach((part, index) => {
        var _a;
        if (part.type === 'SINGLE' && ((_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value) !== undefined) {
            const rawValue = part.valueOptions.value;
            // CASE 1: Simple String
            if (typeof rawValue === 'string') {
                const sanitizedValue = sanitizeQueryInput(rawValue);
                if (sanitizedValue !== rawValue) {
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedValue);
                }
            }
            // CASE 2: Array of objects (Unique Values / Dropdowns)
            // We must preserve the Immutable structure to avoid "asMutable" errors
            else if (Array.isArray(rawValue) || (rawValue && typeof rawValue.toArray === 'function')) {
                const isImmutable = typeof rawValue.toArray === 'function';
                const arr = isImmutable ? rawValue.toArray() : rawValue;
                let changed = false;
                const sanitizedArr = arr.map(item => {
                    if (item && typeof item === 'object' && 'value' in item && typeof item.value === 'string') {
                        const sanitizedVal = sanitizeQueryInput(item.value);
                        if (sanitizedVal !== item.value) {
                            changed = true;
                            return Object.assign(Object.assign({}, item), { value: sanitizedVal });
                        }
                    }
                    return item;
                });
                if (changed) {
                    // If it was Immutable, we should ideally use Immutable methods to update,
                    // but setIn on the top-level expression with a plain array/object 
                    // usually triggers the framework's auto-conversion.
                    sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedArr);
                }
            }
        }
    });
    return sanitizedExpr;
}
function getPopupTemplate(outputDS, queryItem) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const { resultFieldsType, resultDisplayFields, resultTitleExpression = '' } = queryItem;
        const currentOriginDs = outputDS.getOriginDataSources()[0];
        const popupInfo = currentOriginDs.getPopupInfo();
        if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
            let fields;
            if (resultDisplayFields == null) {
                const fieldsInContent = (0,_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.getFieldInfosInPopupContent)(popupInfo);
                if (fieldsInContent.length > 0) {
                    const uniqueFields = new Set(fieldsInContent.map(ele => ele.fieldName));
                    fields = Array.from(uniqueFields);
                }
                else {
                    // return all fields by default
                    const allFieldsSchema = outputDS.getSchema();
                    fields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
                }
            }
            else {
                fields = resultDisplayFields.asMutable({ deep: true });
            }
            if (popupInfo) {
                const fieldInfos = [];
                fields.forEach(field => {
                    const fieldInfo = popupInfo.fieldInfos.find(fieldInfo => fieldInfo.fieldName === field);
                    if (fieldInfo) {
                        fieldInfo.visible = true;
                        fieldInfos.push(fieldInfo);
                    }
                    else {
                        fieldInfos.push({
                            fieldName: field,
                            label: field
                        });
                    }
                });
                return {
                    popupTemplate: {
                        fieldInfos,
                        content: [{
                                type: 'fields'
                            }],
                        title: resultTitleExpression
                    }
                };
            }
            return {
                popupTemplate: {
                    fieldInfos: fields.map(field => ({
                        fieldName: field,
                        label: field
                    })),
                    content: [{
                            type: 'fields'
                        }],
                    title: resultTitleExpression
                }
            };
        }
        // the source layer will provide popup info
        let layerObject;
        if (currentOriginDs.layer) {
            layerObject = currentOriginDs.layer;
        }
        else {
            layerObject = yield currentOriginDs.createJSAPILayerByDataSource();
        }
        if (layerObject) {
            yield layerObject.load();
        }
        return { defaultPopupTemplate: ((_a = layerObject === null || layerObject === void 0 ? void 0 : layerObject.associatedLayer) === null || _a === void 0 ? void 0 : _a.defaultPopupTemplate) || (layerObject === null || layerObject === void 0 ? void 0 : layerObject.defaultPopupTemplate) };
    });
}
function generateQueryParams(outputDS, sqlExpr, spatialFilter, queryItem, page, pageSize) {
    var _a, _b, _c, _d, _e;
    const currentQueryDsJson = outputDS.getDataSourceJson();
    const currentOriginDs = outputDS.getOriginDataSources()[0];
    const isLocalDs = currentQueryDsJson === null || currentQueryDsJson === void 0 ? void 0 : currentQueryDsJson.isDataInDataSourceInstance;
    if (isLocalDs) {
        outputDS.setSourceRecords(currentOriginDs.getSourceRecords());
    }
    const { useAttributeFilter, useSpatialFilter, sortOptions, resultFieldsType, resultDisplayFields, resultTitleExpression } = queryItem;
    // DETERMINE MINIMAL FIELDS (The "Field Shredder" Optimization)
    // To achieve performance parity with Web AppBuilder, we must avoid fetching every 
    // column in the database (* or all). We surgically request only the fields 
    // needed for the Title, the Attribute List, and the ID field.
    let outputFields = [];
    if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes && resultDisplayFields) {
        outputFields = combineFields(resultDisplayFields, resultTitleExpression || '', outputDS.getIdField());
    }
    else {
        // Popup mode: Get only visible fields from popup info
        const popupInfo = currentOriginDs.getPopupInfo();
        const fieldNames = Object.values((_a = currentOriginDs.getSchema().fields) !== null && _a !== void 0 ? _a : {}).map(f => f.name);
        const validFieldInfos = (_b = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) === null || _b === void 0 ? void 0 : _b.filter(fieldInfo => fieldInfo.visible !== false && fieldNames.includes(fieldInfo.fieldName));
        outputFields = (validFieldInfos === null || validFieldInfos === void 0 ? void 0 : validFieldInfos.map(fieldInfo => fieldInfo.fieldName)) || [];
        // Always ensure ID field is included
        const idField = outputDS.getIdField();
        if (idField && !outputFields.includes(idField)) {
            outputFields.push(idField);
        }
    }
    const mergedQueryParams = outputDS.mergeQueryParams((_c = currentOriginDs.getCurrentQueryParams()) !== null && _c !== void 0 ? _c : {}, {
        where: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpr, outputDS).sql : '1=1',
        sqlExpression: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? sqlExpr : null,
        // FORCE minimal fields here to override any framework "*" or "all"
        outFields: outputFields
    });
    // PERFORMANCE OPTIMIZATION: Universal SQL Optimizer
    // We normalize the user's input to UPPERCASE to ensure case-insensitivity while 
    // unwrapping any LOWER() function around the field name. This allows the database 
    // to use its attribute indexes (SARGable query).
    if (mergedQueryParams.where && mergedQueryParams.where.includes('LOWER(')) {
        const optimizedWhere = mergedQueryParams.where.replace(/LOWER\(([^)]+)\)\s*(=|LIKE)\s*'([^']*)'/gi, (match, field, operator, value) => {
            // Normalize both sides to UPPERCASE. This works for ANY field name.
            // We keep the field name "naked" so the index is used.
            return `${field} ${operator} '${value.toUpperCase()}'`;
        });
        if (optimizedWhere !== mergedQueryParams.where) {
            debugLogger.log('TASK', {
                event: 'sql-optimized',
                original: mergedQueryParams.where,
                optimized: optimizedWhere
            });
            mergedQueryParams.where = optimizedWhere;
        }
    }
    // compose query params for query
    const queryParams = Object.assign({ 
        // url: ds.url,
        returnGeometry: true, 
        /**
         * PERFORMANCE OPTIMIZATION: Force lower precision for all display queries.
         */
        maxAllowableOffset: 0.1, page, 
        // Limit pageSize to a sane default if not provided or too large
        pageSize: (pageSize && pageSize < 1000) ? pageSize : 1000 }, mergedQueryParams);
    // Final override to ensure no "*" leaks through from any merge operation
    if (!queryParams.outFields || queryParams.outFields.includes('*')) {
        queryParams.outFields = outputFields;
    }
    // Diagnostic log: Show exactly WHICH fields are being sent
    debugLogger.log('TASK', {
        event: 'requesting-data',
        fieldsCount: (_d = queryParams.outFields) === null || _d === void 0 ? void 0 : _d.length,
        fields: (_e = queryParams.outFields) === null || _e === void 0 ? void 0 : _e.join(', '),
        pageSize: queryParams.pageSize,
        offset: queryParams.maxAllowableOffset
    });
    if (useSpatialFilter && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.geometry)) {
        const { geometry, relation = _config__WEBPACK_IMPORTED_MODULE_1__.SpatialRelation.Intersect, buffer } = spatialFilter;
        const spatialQueryParams = {
            geometryType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(geometry.type),
            geometry: geometry.toJSON(),
            spatialRel: _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPISpatialRelToDsSpatialRel[relation],
            distance: buffer === null || buffer === void 0 ? void 0 : buffer.distance,
            units: (buffer === null || buffer === void 0 ? void 0 : buffer.unit) ? _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPIUnitToDsUnit[buffer.unit] : undefined
        };
        Object.assign(queryParams, spatialQueryParams);
    }
    if ((sortOptions === null || sortOptions === void 0 ? void 0 : sortOptions.length) > 0) {
        Object.assign(queryParams, {
            orderByFields: sortOptions.map(item => `${item.jimuFieldName} ${item.order}`)
        });
    }
    return queryParams;
}
function executeCountQuery(widgetId, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield outputDS.loadCount(queryParams, { widgetId, refresh: true });
        return result != null ? result : 0;
    });
}
function executeQuery(widgetId, queryItem, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const popupInfo = outputDS.getPopupInfo();
        const layerDefinition = outputDS.getLayerDefinition();
        const getDefaultFieldInfos = () => {
            var _a;
            return [
                { fieldName: (_a = layerDefinition === null || layerDefinition === void 0 ? void 0 : layerDefinition.objectIdField) !== null && _a !== void 0 ? _a : 'objectid', label: 'OBJECTID', tooltip: '', visible: true }
            ];
        };
        const fieldInfos = ((fieldInfos) => (fieldInfos.length ? fieldInfos : getDefaultFieldInfos()))(((popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) || []).filter((i) => i.visible));
        // const fields = outputDS.getSchema()?.fields
        // let selectedFieldNames
        // if (queryItem.resultFieldsType === FieldsType.SelectAttributes) {
        //   selectedFieldNames = [].concat(queryItem.resultDisplayFields, queryItem.resultTitleFields)
        // } else {
        //   selectedFieldNames = fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        // }
        // const selectedFieldJimuNames = fields
        //   ? Object.keys(fields).filter((jimuName) => selectedFieldNames.includes(fields[jimuName].name))
        //   : []
        // outputDS.setSelectedFields(selectedFieldJimuNames)
        const startTime = performance.now();
        let records = yield outputDS.load(queryParams, { widgetId });
        const fetchTime = performance.now() - startTime;
        if (records == null) {
            records = [];
        }
        const originDs = outputDS.getOriginDataSources()[0];
        const layerStartTime = performance.now();
        const layerObject = yield getLayerObject(originDs);
        const layerTime = performance.now() - layerStartTime;
        debugLogger.log('TASK', {
            event: 'query-complete',
            fetchTime: Math.round(fetchTime),
            layerTime: Math.round(layerTime),
            totalTime: Math.round(performance.now() - startTime),
            recordCount: records.length
        });
        records.forEach((record) => {
            const feature = record.feature;
            if (layerObject) {
                feature.sourceLayer = layerObject.associatedLayer || layerObject;
            }
            feature.layer = feature.sourceLayer;
        });
        const queryResult = {
            records,
            fields: fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        };
        // publish message
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordSetChangeMessage(widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.RecordSetChangeType.CreateUpdate, [{
                records: outputDS.getAllLoadedRecords(),
                fields: queryResult.fields,
                dataSource: outputDS,
                name: outputDS.id,
                label: outputDS.getLabel()
            }]);
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        return queryResult;
    });
}
function getLayerObject(dataSource) {
    return __awaiter(this, void 0, void 0, function* () {
        const layerObject = yield dataSource.createJSAPILayerByDataSource();
        // layerObject may be undefined if the data source is added by URL
        if (layerObject) {
            yield layerObject.load();
        }
        return layerObject;
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearAccumulatedResults: () => (/* binding */ clearAccumulatedResults),
/* harmony export */   createAccumulatedResultsDataSource: () => (/* binding */ createAccumulatedResultsDataSource),
/* harmony export */   getRecordKey: () => (/* binding */ getRecordKey),
/* harmony export */   mergeResultsIntoAccumulated: () => (/* binding */ mergeResultsIntoAccumulated),
/* harmony export */   removeRecordsFromOriginSelections: () => (/* binding */ removeRecordsFromOriginSelections),
/* harmony export */   removeResultsFromAccumulated: () => (/* binding */ removeResultsFromAccumulated)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/**
 * Utility functions for managing results accumulation in QuerySimple widget.
 * Handles "Add to" and "Remove from" modes for accumulating query results.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Generates a composite key for a record that includes both origin data source ID and objectId.
 * This ensures uniqueness across different layers that may have the same objectId.
 *
 * @param record - The feature data record
 * @param outputDS - The output data source containing the record
 * @returns Composite key string: `${originDSId}_${objectId}`
 */
function getRecordKey(record, outputDS) {
    var _a;
    const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
    const originDSId = (originDS === null || originDS === void 0 ? void 0 : originDS.id) || outputDS.id; // Fallback to outputDS if no origin
    const objectId = record.getId();
    const key = `${originDSId}_${objectId}`;
    debugLogger.log('RESULTS-MODE', {
        event: 'record-key-generated',
        originDSId,
        objectId,
        key,
        hasOriginDS: !!originDS
    });
    return key;
}
/**
 * Creates an accumulated results data source for storing merged query results.
 * This data source is widget-level and persists across multiple queries.
 *
 * @param widgetId - The widget ID
 * @param originDS - The origin data source to use as the base
 * @returns The created accumulated results data source
 */
function createAccumulatedResultsDataSource(widgetId, originDS) {
    return __awaiter(this, void 0, void 0, function* () {
        const accumulatedDSId = `${widgetId}_accumulated_results`;
        debugLogger.log('RESULTS-MODE', {
            event: 'creating-accumulated-ds',
            widgetId,
            accumulatedDSId,
            originDSId: originDS.id
        });
        // Check if data source already exists
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        let accumulatedDS = dsManager.getDataSource(accumulatedDSId);
        if (accumulatedDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-ds-already-exists',
                accumulatedDSId
            });
            return accumulatedDS;
        }
        // Get origin data source JSON to create output data source
        const originDataSourceJson = originDS.getDataSourceJson();
        // Create output data source JSON similar to how query items create output DS
        const outputDataSourceJson = {
            id: accumulatedDSId,
            label: 'Accumulated Results',
            type: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.type,
            geometryType: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.geometryType,
            url: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.url,
            itemId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.itemId,
            portalUrl: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.portalUrl,
            originDataSources: [{
                    dataSourceId: originDS.id,
                    mainDataSourceId: originDS.id,
                    rootDataSourceId: originDS.id
                }],
            layerId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.layerId,
            isDataInDataSourceInstance: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.isDataInDataSourceInstance,
            isOutputFromWidget: true
        };
        // Create the data source using DataSourceManager
        // Note: This follows the pattern from setting.tsx for creating output data sources
        accumulatedDS = dsManager.createDataSourceByDataSourceJson(outputDataSourceJson);
        // Set initial status
        accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        debugLogger.log('RESULTS-MODE', {
            event: 'accumulated-ds-created',
            accumulatedDSId,
            originDSId: originDS.id,
            status: accumulatedDS.getStatus()
        });
        return accumulatedDS;
    });
}
/**
 * Merges new query results with existing records.
 * Deduplicates records using composite keys (originDSId_objectId).
 *
 * This function merges new records with existing records that were captured
 * before the query executed. The caller is responsible for storing the merged
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param newRecords - New records to merge in
 * @param existingRecords - Existing records captured before query execution (optional, defaults to empty array)
 * @returns Array of all merged records (existing + new unique records)
 */
function mergeResultsIntoAccumulated(outputDS, newRecords, existingRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'merging-results-start',
        outputDSId: outputDS.id,
        existingRecordsCount: existingRecords.length,
        newRecordsCount: newRecords.length
    });
    // Build Set of existing record keys for fast lookup
    const existingKeys = new Set(existingRecords.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'existing-records-check',
        existingRecordsCount: existingRecords.length,
        existingKeysCount: existingKeys.size
    });
    // Filter new records to only include those not already in output DS
    const uniqueNewRecords = newRecords.filter(record => {
        const key = getRecordKey(record, outputDS);
        const isDuplicate = existingKeys.has(key);
        if (isDuplicate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'duplicate-record-skipped',
                key,
                objectId: record.getId()
            });
        }
        return !isDuplicate;
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'deduplication-complete',
        newRecordsCount: newRecords.length,
        uniqueNewRecordsCount: uniqueNewRecords.length,
        duplicatesSkipped: newRecords.length - uniqueNewRecords.length
    });
    // Merge records
    const mergedRecords = [...existingRecords, ...uniqueNewRecords];
    debugLogger.log('RESULTS-MODE', {
        event: 'merge-complete',
        totalRecordsAfterMerge: mergedRecords.length,
        existingCount: existingRecords.length,
        newUniqueCount: uniqueNewRecords.length
    });
    return mergedRecords;
}
/**
 * Removes matching records from widget-level accumulated records.
 * Matches records using composite keys (originDSId_objectId).
 *
 * This function removes records from existing accumulated records that were captured
 * before the query executed. The caller is responsible for storing the remaining
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param recordsToRemove - Records to remove (from query results)
 * @param existingAccumulatedRecords - Existing accumulated records captured before query execution (optional, defaults to empty array)
 * @returns Array of remaining records after removal
 */
function removeResultsFromAccumulated(outputDS, recordsToRemove, existingAccumulatedRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-results-start',
        outputDSId: outputDS.id,
        recordsToRemoveCount: recordsToRemove.length,
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length
    });
    // If no accumulated records, nothing to remove
    if (existingAccumulatedRecords.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-accumulated-records-to-remove',
            outputDSId: outputDS.id
        });
        return [];
    }
    // If no records to remove, return existing records unchanged
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove',
            outputDSId: outputDS.id,
            existingAccumulatedRecordsCount: existingAccumulatedRecords.length
        });
        return existingAccumulatedRecords;
    }
    // Build Set of keys to remove for fast lookup
    const removeKeys = new Set(recordsToRemove.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'remove-keys-built',
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length,
        removeKeysCount: removeKeys.size
    });
    // Filter out records that match keys to remove
    const remainingRecords = [];
    const removedRecords = [];
    existingAccumulatedRecords.forEach(record => {
        var _a, _b, _c, _d;
        const key = getRecordKey(record, outputDS);
        const shouldRemove = removeKeys.has(key);
        if (shouldRemove) {
            removedRecords.push(record);
            debugLogger.log('RESULTS-MODE', {
                event: 'record-marked-for-removal',
                key,
                objectId: record.getId(),
                originDSId: ((_d = (_c = (_b = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record)) === null || _b === void 0 ? void 0 : _b.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.id) || 'unknown'
            });
        }
        else {
            remainingRecords.push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removal-complete',
        recordsRemoved: removedRecords.length,
        remainingRecordsCount: remainingRecords.length,
        recordsToRemoveCount: recordsToRemove.length,
        matchedRecordsCount: removedRecords.length,
        unmatchedRecordsCount: recordsToRemove.length - removedRecords.length
    });
    return remainingRecords;
}
/**
 * Removes records from origin data source selections.
 * Groups records by their origin data source and updates each origin DS's selection separately.
 * This ensures map selection is updated correctly when records come from multiple origin layers.
 * Also removes graphics from graphics layer if using graphics layer highlighting.
 *
 * @param widgetId - The widget ID for publishing messages
 * @param recordsToRemove - Records to remove from selection
 * @param outputDS - The output data source (used for key generation)
 * @param useGraphicsLayer - Whether to remove graphics from graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function removeRecordsFromOriginSelections(widgetId, recordsToRemove, outputDS, useGraphicsLayer, graphicsLayer) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-start',
        widgetId,
        recordsToRemoveCount: recordsToRemove.length,
        outputDSId: outputDS.id,
        useGraphicsLayer: !!useGraphicsLayer,
        hasGraphicsLayer: !!graphicsLayer
    });
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove-from-selection',
            widgetId
        });
        return;
    }
    // Remove from graphics layer if using graphics layer highlighting
    if (useGraphicsLayer && graphicsLayer) {
        const recordIdsToRemove = recordsToRemove.map(record => record.getId());
        debugLogger.log('RESULTS-MODE', {
            event: 'removing-graphics-from-layer',
            widgetId,
            recordIdsCount: recordIdsToRemove.length,
            graphicsLayerId: graphicsLayer.id
        });
        (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__.removeHighlightGraphics)(graphicsLayer, recordIdsToRemove);
    }
    // Group records by their origin data source
    const recordsByOriginDS = new Map();
    recordsToRemove.forEach(record => {
        var _a, _b, _c;
        const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
        let originDS = null;
        if (recordDS) {
            originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
        }
        else {
            // Fallback: try to get origin from outputDS
            originDS = ((_c = outputDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || null;
        }
        if (originDS) {
            if (!recordsByOriginDS.has(originDS)) {
                recordsByOriginDS.set(originDS, []);
            }
            recordsByOriginDS.get(originDS).push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'records-grouped-by-origin',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        recordsByOriginDS: Array.from(recordsByOriginDS.entries()).map(([ds, records]) => ({
            originDSId: ds.id,
            recordCount: records.length
        }))
    });
    // For each origin DS, get current selection and remove matching records
    recordsByOriginDS.forEach((recordsToRemoveForOrigin, originDS) => {
        try {
            // Get current selected records from this origin DS
            const currentSelectedRecords = originDS.getSelectedRecords() || [];
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'processing-origin-ds-removal',
                widgetId,
                originDSId: originDS.id,
                currentSelectedCount: currentSelectedRecords.length,
                recordsToRemoveCount: recordsToRemoveForOrigin.length
            });
            // Build Set of IDs to remove for fast lookup
            const idsToRemove = new Set(recordsToRemoveForOrigin.map(record => record.getId()));
            // Filter out records that match IDs to remove
            const remainingRecords = currentSelectedRecords.filter(record => {
                const recordId = record.getId();
                return !idsToRemove.has(recordId);
            });
            const remainingIds = remainingRecords.map(record => record.getId());
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-filtered',
                widgetId,
                originDSId: originDS.id,
                removedCount: currentSelectedRecords.length - remainingRecords.length,
                remainingCount: remainingRecords.length
            });
            // Update selection in origin DS
            if (typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(remainingIds, remainingRecords);
            }
            // Publish selection change message for this origin DS
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, remainingRecords, [originDS.id]));
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-selection-updated',
                widgetId,
                originDSId: originDS.id,
                remainingRecordsCount: remainingRecords.length,
                messagePublished: true
            });
        }
        catch (error) {
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-error',
                widgetId,
                originDSId: originDS.id,
                error: error instanceof Error ? error.message : 'Unknown error',
                errorStack: error instanceof Error ? error.stack : undefined
            });
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-complete',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        totalRecordsRemoved: recordsToRemove.length
    });
}
/**
 * Clears all records from the accumulated results data source.
 *
 * @param accumulatedDS - The accumulated results data source to clear
 */
function clearAccumulatedResults(accumulatedDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'clearing-accumulated-results',
        accumulatedDSId: accumulatedDS.id
    });
    // Set status to NotReady to clear records
    accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    // Clear any loaded records if possible
    // Note: May need to use DataSourceManager methods depending on ExB API
    debugLogger.log('RESULTS-MODE', {
        event: 'accumulated-results-cleared',
        accumulatedDSId: accumulatedDS.id
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QUERYSIMPLE_SELECTION_EVENT: () => (/* binding */ QUERYSIMPLE_SELECTION_EVENT),
/* harmony export */   clearSelectionInDataSources: () => (/* binding */ clearSelectionInDataSources),
/* harmony export */   dispatchSelectionEvent: () => (/* binding */ dispatchSelectionEvent),
/* harmony export */   findClearResultsButton: () => (/* binding */ findClearResultsButton),
/* harmony export */   getOriginDataSource: () => (/* binding */ getOriginDataSource),
/* harmony export */   publishSelectionMessage: () => (/* binding */ publishSelectionMessage),
/* harmony export */   selectRecordsAndPublish: () => (/* binding */ selectRecordsAndPublish),
/* harmony export */   selectRecordsInDataSources: () => (/* binding */ selectRecordsInDataSources)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing feature selection in QuerySimple widget.
 * Consolidates repeated selection logic to follow DRY principles.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify Widget of selection changes.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
/**
 * Dispatches a custom selection event to the window so the main Widget can track state.
 *
 * @param widgetId - The widget ID
 * @param recordIds - Array of selected record IDs
 * @param outputDS - The output data source
 * @param queryItemConfigId - The config ID of the query that produced these results
 */
function dispatchSelectionEvent(widgetId, recordIds, outputDS, queryItemConfigId) {
    const originDS = getOriginDataSource(outputDS);
    const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
    debugLogger.log('TASK', {
        event: 'dispatchSelectionEvent',
        widgetId,
        recordCount: recordIds.length,
        outputDsId: outputDS.id,
        queryItemConfigId
    });
    const selectionEvent = new CustomEvent(QUERYSIMPLE_SELECTION_EVENT, {
        detail: {
            widgetId,
            recordIds,
            dataSourceId,
            outputDsId: outputDS.id,
            queryItemConfigId
        },
        bubbles: true,
        cancelable: true
    });
    window.dispatchEvent(selectionEvent);
}
/**
 * Gets the origin data source from an output data source.
 * @param outputDS - The output data source
 * @returns The origin data source, or null if not available
 */
function getOriginDataSource(outputDS) {
    if (!outputDS)
        return null;
    // Try to get origin data sources
    const originDataSources = typeof outputDS.getOriginDataSources === 'function'
        ? outputDS.getOriginDataSources()
        : [];
    if (originDataSources && originDataSources.length > 0) {
        return originDataSources[0];
    }
    // If it doesn't have origin data sources, it might already be an origin data source
    // FeatureLayerDataSource should have a 'layer' property or 'getLayer' method
    if (outputDS.layer || outputDS.getLayer || outputDS.type === 'FeatureLayer') {
        return outputDS;
    }
    return null;
}
/**
 * Selects records in both the origin data source and output data source.
 * This is the standard pattern used throughout the widget for selection.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Optional array of FeatureDataRecord objects for proper highlighting
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsInDataSources(outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (outputDS, recordIds, records, useGraphicsLayer = false, graphicsLayer, mapView) {
        var _a, _b, _c, _d, _e, _f;
        if (!outputDS)
            return;
        const originDS = getOriginDataSource(outputDS);
        // If using graphics layer, add graphics for highlighting
        if (useGraphicsLayer && graphicsLayer && mapView && records && records.length > 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-graphics-layer',
                recordIdsCount: recordIds.length,
                recordsCount: records.length,
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.addHighlightGraphics)(graphicsLayer, records, mapView);
            // Still select in data source for state management (but layer selection won't show if layer is off)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        else {
            // Original behavior: use layer selection
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-layer-selection',
                recordIdsCount: recordIds.length,
                useGraphicsLayer,
                hasGraphicsLayer: !!graphicsLayer,
                hasMapView: !!mapView,
                timestamp: Date.now()
            });
            // Select in origin data source (the actual layer)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                // Log layer state right before selection to see what's available when selection works
                const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
                if (layer) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'selectRecordsByIds-layer-state',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        hasLayerMap: !!layer.map,
                        hasLayerView: !!layer.view,
                        hasLayerParent: !!layer.parent,
                        parentType: ((_c = layer.parent) === null || _c === void 0 ? void 0 : _c.type) || 'none',
                        parentHasMap: !!((_d = layer.parent) === null || _d === void 0 ? void 0 : _d.map),
                        parentHasView: !!((_e = layer.parent) === null || _e === void 0 ? void 0 : _e.view),
                        parentHasViews: !!((_f = layer.parent) === null || _f === void 0 ? void 0 : _f.views),
                        timestamp: Date.now()
                    });
                }
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        // Always update outputDS for widget's internal state
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, records);
        }
    });
}
/**
 * Clears the `data_s` parameter from the URL hash.
 * Experience Builder automatically adds `data_s` when selections are made,
 * but doesn't remove it when selections are cleared, causing "dirty hash" issues.
 *
 * This function ensures the hash is clean when selections are cleared.
 */
function clearDataSParameterFromHash() {
    const hash = window.location.hash.substring(1);
    if (!hash)
        return;
    const urlParams = new URLSearchParams(hash);
    if (urlParams.has('data_s')) {
        urlParams.delete('data_s');
        const newHash = urlParams.toString();
        debugLogger.log('HASH', {
            event: 'clearDataSParameterFromHash',
            hadDataS: true,
            newHash: newHash ? `#${newHash}` : '(empty)',
            timestamp: Date.now()
        });
        // Update the URL without triggering a reload
        // Always preserve pathname and query string, only update hash
        window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
    }
}
/**
 * Clears selection in both the origin data source and output data source.
 * Optionally clears graphics layer if using graphics layer mode.
 * Also clears the `data_s` parameter from the URL hash to prevent "dirty hash" issues.
 *
 * @param widgetId - The widget ID (needed to publish message)
 * @param outputDS - The output data source
 * @param useGraphicsLayer - Whether to clear graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function clearSelectionInDataSources(widgetId_1, outputDS_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, useGraphicsLayer = false, graphicsLayer) {
        // Clear graphics layer if using graphics layer mode
        if (useGraphicsLayer && graphicsLayer) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'clearSelectionInDataSources-clearing-graphics-layer',
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.clearGraphicsLayer)(graphicsLayer);
        }
        // Clear data source selection for state management
        yield selectRecordsInDataSources(outputDS, [], undefined, false);
        // Publish the empty selection message so the Map selection (blue boxes) clears
        if (outputDS) {
            publishSelectionMessage(widgetId, [], outputDS, true);
        }
        // Clear data_s parameter from hash to prevent dirty hash
        // Experience Builder adds data_s when selections are made but doesn't remove it when cleared
        clearDataSParameterFromHash();
    });
}
/**
 * Publishes a selection change message for the given records and data sources.
 *
 * @param widgetId - The widget ID
 * @param records - Array of FeatureDataRecord objects (empty array to clear)
 * @param outputDS - The output data source
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS = false) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    if (originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [originDS.id]));
    }
    else if (alsoPublishToOutputDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
    // Optionally publish to outputDS as well (for some edge cases)
    if (alsoPublishToOutputDS && originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
}
/**
 * Selects records and publishes the selection message in one call.
 * This is the most common pattern - selecting records and notifying the map.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Array of FeatureDataRecord objects for proper highlighting
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsAndPublish(widgetId_1, outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, recordIds, records, alsoPublishToOutputDS = false, useGraphicsLayer = false, graphicsLayer, mapView) {
        yield selectRecordsInDataSources(outputDS, recordIds, records, useGraphicsLayer, graphicsLayer, mapView);
        publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS);
    });
}
/**
 * Finds the "Clear results" button in the DOM.
 * Used when programmatically triggering the clear action.
 *
 * @returns The clear button element, or null if not found
 */
function findClearResultsButton() {
    // Hardened: Prioritize the one in the results header, fallback to any
    return (document.querySelector('.query-result__header button[aria-label="Clear results"]') ||
        document.querySelector('button[aria-label="Clear results"]'));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleList: () => (/* binding */ SimpleList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    flex: 1 1 ${isAutoHeight ? 'auto' : 0};
    overflow: auto;
    max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      flex-direction: column;
      .list-items {
        position: relative;
        flex-direction: column;
      }

      .feature-info-component {
        width: 100%;
      }

      .query-result-item + .query-result-item {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    .list-items {
      display: flex;
    }
  `;
};
function SimpleList(props) {
    const { widgetId, outputDS, queryItem, records, direction, onEscape, onSelectChange, onRemove, expandByDefault, itemExpandStates, removedRecordIds, onRenderDone } = props;
    const [popupTemplate, setPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_5__.useAutoHeight)();
    const resultContainerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    // Filter out removed records
    const filteredRecords = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (records === null || records === void 0 ? void 0 : records.filter(record => !(removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.has(record.getId())))) || [];
    }, [records, removedRecordIds]);
    // Notify parent when records are rendered (for auto-switch logic)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (onRenderDone && filteredRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'SimpleList-onRenderDone-called',
                widgetId,
                queryItemConfigId: queryItem.configId,
                filteredRecordsCount: filteredRecords.length,
                totalRecordsCount: records.length,
                removedRecordIdsCount: (removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.size) || 0,
                timestamp: Date.now()
            });
            onRenderDone({ dataItems: filteredRecords });
        }
    }, [filteredRecords, onRenderDone, widgetId, queryItem.configId, records.length, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_4__.getPopupTemplate)(outputDS, queryItem).then(rs => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_2__.ListDirection.Vertical }), css: getStyle(isAutoHeight), ref: resultContainerRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-items px-4 py-1', role: 'listbox', children: filteredRecords.map((dataItem) => {
                const recordId = dataItem.getId();
                // Use individual state from map if available, otherwise fall back to expandByDefault
                const individualExpandState = itemExpandStates === null || itemExpandStates === void 0 ? void 0 : itemExpandStates.get(recordId);
                const expandByDefaultValue = individualExpandState !== undefined ? individualExpandState : (expandByDefault !== null && expandByDefault !== void 0 ? expandByDefault : true);
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_3__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: expandByDefaultValue, onClick: onSelectChange, onRemove: onRemove }, recordId));
            }) }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'QuerySimple',
    reset: 'Reset',
    searchLayer: 'Search Layer',
    apply: 'Search',
    noDataAvailable: 'Error in loading data',
    noQueryItem: 'No query',
    newQueryHint: 'Add content by clicking the "{label}" button on the configuration panel',
    attributeFilter: 'Attribute filter',
    spatialFilter: 'Spatial filter',
    spatialFilterType_CurrentMapExtent: 'Current map extent',
    spatialFilterType_InteractiveDrawMode: 'Drawn graphic',
    results: 'Results',
    featuresDisplayed: 'Features displayed',
    clearResult: 'Clear results',
    checkResult: 'Check results',
    mapMustBeVisible: 'Map must be visible',
    chooseFilterType: 'Choose the filter type',
    chooseGeometryType: 'Choose the geometry type',
    clearDrawing: 'Clear the graphic when applying',
    featureFromDs: 'Selecting features from data source',
    featureFromMap: 'Geometries from a map',
    chooseFilterLayer: 'Choose a filter layer',
    selectedRecords: '{num} records are selected for the filter',
    spatialNotAvailable: 'Spatial filter is not available here.',
    spatialNotAvailableDesc: 'Spatial filter is not supported for a data source that already contains a spatial query.',
    preconfigured: 'Preconfigured',
    runtime: 'Runtime',
    selectLoaded: 'Select loaded',
    retrieving: 'Retrieving query results...',
    zoomToSelected: 'Zoom to selected',
    queryTab: 'Query',
    resultsTab: 'Results',
    expandAll: 'Expand all',
    collapseAll: 'Collapse all',
    addToMap: 'Add to map',
    resultsMode: 'Results mode',
    createNewResults: 'Create new results',
    addToCurrentResults: 'Add to current results',
    removeFromCurrentResults: 'Remove from current results',
    resultsModeDisabledRemove: 'Remove from current results (no accumulated results)',
    resultsModeDesc: 'Controls how query results are combined:\n New: Each query replaces previous results\n Add: New results are added to existing results\n Remove: Matching results are removed from existing results',
    resultsModeNew: 'New',
    resultsModeAdd: 'Add',
    resultsModeRemove: 'Remove'
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx":
/*!****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoHeight: () => (/* binding */ useAutoHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/** @jsx jsx */



function useAutoHeight() {
    const layoutInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_widget_context__WEBPACK_IMPORTED_MODULE_2__.QueryWidgetContext);
    let layoutId;
    let layoutItemId;
    if (layoutInfo.includes(':')) {
        const r = layoutInfo.split(':');
        layoutId = r[0];
        layoutItemId = r[1];
    }
    const isAuto = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c, _d;
        const layoutItem = (_b = (_a = state.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        return ((_d = (_c = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _c === void 0 ? void 0 : _c.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    });
    return isAuto;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-config.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getWidgetRuntimeDataMap: () => (/* binding */ getWidgetRuntimeDataMap)
/* harmony export */ });
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__);






const getWidgetRuntimeDataMap = () => ({
    iconMap: {
        iconQuery: __webpack_require__(/*! ../../icon.svg */ "./your-extensions/widgets/query-simple/icon.svg"),
        iconWarning: (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default()),
        iconError: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default()),
        arrowNavBack: (jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()),
        arrowRight: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        toolDelete: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        iconMore: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default())
    }
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryWidgetContext: () => (/* binding */ QueryWidgetContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryWidgetContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(null);


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/zoom-utils.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   zoomToRecords: () => (/* binding */ zoomToRecords)
/* harmony export */ });
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Shared zoom utilities for QuerySimple widget.
 *
 * Provides pure functions for zooming to feature records that can be used
 * by both React hooks and data actions.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_0__.createQuerySimpleDebugLogger)();
const DEFAULT_PADDING = {
    left: 50,
    right: 50,
    top: 50,
    bottom: 50
};
/**
 * Pure function to zoom to feature records with padding.
 *
 * Extracts geometries from records, calculates extent, and zooms the map view
 * using mapView.goTo() with configurable padding. Handles both single and
 * multiple geometries by calculating union extent when needed.
 *
 * @param mapView - The map view to zoom
 * @param records - Array of feature data records to zoom to
 * @param options - Optional zoom options including padding
 * @returns Promise that resolves when zoom completes
 */
function zoomToRecords(mapView, records, options) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b;
        if (!mapView || !records || records.length === 0) {
            return;
        }
        const padding = (options === null || options === void 0 ? void 0 : options.padding) || DEFAULT_PADDING;
        try {
            // Extract geometries from records
            const geometries = records
                .map(record => record.getJSAPIGeometry())
                .filter(geom => geom != null);
            if (geometries.length === 0) {
                return;
            }
            let extent = null;
            if (geometries.length === 1) {
                // Single geometry - get its extent
                extent = geometries[0].extent || ((_b = (_a = geometries[0]).getExtent) === null || _b === void 0 ? void 0 : _b.call(_a));
            }
            else {
                // Multiple geometries - calculate union extent
                const extents = geometries
                    .map(geom => { var _a, _b; return geom.extent || ((_b = (_a = geom).getExtent) === null || _b === void 0 ? void 0 : _b.call(_a)); })
                    .filter(e => e != null);
                if (extents.length > 0) {
                    extent = extents[0].clone();
                    for (let i = 1; i < extents.length; i++) {
                        extent = extent.union(extents[i]);
                    }
                }
            }
            if (extent) {
                yield mapView.goTo(extent, { padding });
            }
        }
        catch (error) {
            debugLogger.log('ZOOM', {
                event: 'zoom-goTo-error',
                error: error instanceof Error ? error.message : String(error),
                recordsCount: records.length
            });
            throw error;
        }
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.0.0',
                description: 'The first version.',
                upgrader: (oldConfig) => {
                    return oldConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version.ts":
/*!*************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WIDGET_VERSION: () => (/* binding */ WIDGET_VERSION)
/* harmony export */ });
/**
 * Widget version number.
 * Base version matches Experience Builder version (1.19.0).
 * Release number increments on major changes (001, 002, 003, ...).
 * Minor version increments on smaller fixes between major releases (r015.1, r015.2, ...).
 *
 * To increment:
 * - Major change: Update RELEASE_NUMBER (e.g., 015 -> 016) and reset MINOR_VERSION to 0
 * - Minor fix: Increment MINOR_VERSION (e.g., 1 -> 2) while keeping same RELEASE_NUMBER
 */
const BASE_VERSION = '1.19.0';
const RELEASE_NUMBER = '018'; // Increment on major changes (001, 002, 003, ...)
const MINOR_VERSION = '58'; // Increment on minor fixes between major releases (1, 2, 3, ...)
const WIDGET_VERSION = MINOR_VERSION && Number(MINOR_VERSION) > 0
    ? `${BASE_VERSION}-r${RELEASE_NUMBER}.${MINOR_VERSION}`
    : `${BASE_VERSION}-r${RELEASE_NUMBER}`;


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common.ts":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* reexport safe */ _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__.DataSourceTip),
/* harmony export */   DialogPanel: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.DialogPanel),
/* harmony export */   EntityStatusType: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.ErrorMessage),
/* harmony export */   StateHolder: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StateHolder),
/* harmony export */   StatusIndicator: () => (/* reexport safe */ _common_common_components__WEBPACK_IMPORTED_MODULE_0__.StatusIndicator),
/* harmony export */   createGetI18nMessage: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.createGetI18nMessage),
/* harmony export */   createHelperSimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* reexport safe */ _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__.createQuerySimpleDebugLogger),
/* harmony export */   getFieldInfosInPopupContent: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* reexport safe */ _common_utils__WEBPACK_IMPORTED_MODULE_1__.toggleItemInArray),
/* harmony export */   useDataSourceExists: () => (/* reexport safe */ _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__.useDataSourceExists)
/* harmony export */ });
/* harmony import */ var _common_common_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common/common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common/utils */ "./your-extensions/widgets/shared-code/common/utils.tsx");
/* harmony import */ var _common_use_ds_exists__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common/use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");
/* harmony import */ var _common_data_source_tip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common/data-source-tip */ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx");
/* harmony import */ var _common_debug_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common/debug-logger */ "./your-extensions/widgets/shared-code/common/debug-logger.ts");
/**
 * Shared common utilities and components for Experience Builder widgets
 *
 * This module exports common functionality that can be shared between
 * query-simple, helper-simple, and other custom widgets.
 *
 * This is the entry point for 'widgets/shared-code/common'
 */







/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/common-components.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/common-components.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DialogPanel: () => (/* binding */ DialogPanel),
/* harmony export */   EntityStatusType: () => (/* binding */ EntityStatusType),
/* harmony export */   ErrorMessage: () => (/* binding */ ErrorMessage),
/* harmony export */   StateHolder: () => (/* binding */ StateHolder),
/* harmony export */   StatusIndicator: () => (/* binding */ StatusIndicator)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4__);

/** @jsx jsx */




const { useState } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React;
/**
 * A simple Functional Component storing some States that are commonly used
 */
const StateHolder = (props) => {
    const { initState = {}, children } = props;
    const defaultStateMap = {
        visible: true,
        refContainer: null
    };
    const useStateMap = {
        visible: useState('visible' in initState ? initState.visible : defaultStateMap.visible),
        refContainer: useState('refContainer' in initState ? initState.refContainer : defaultStateMap.refContainer),
        customData: useState(Object.assign({}, initState.customData))
    };
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: children(useStateMap) });
};
/**
 * A dialog popup
 */
const DialogPanel = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, panelVisible, setPanelVisible, getI18nMessage, isModal = true, title = getI18nMessage('queryMessage'), bodyContent = '', hasHeader = true, hasFooter = true } = props;
    const toggle = () => { setPanelVisible(false); };
    const getContent = () => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [hasHeader &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.PanelHeader, { className: 'py-2', title: title, onClose: toggle }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalBody, { children: bodyContent }), hasFooter &&
                (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.ModalFooter, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { onClick: toggle, children: getI18nMessage('ok') }) })] });
    const generalClassName = 'ui-unit-dialog-panel';
    const renderModalContent = () => {
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Modal, { className: generalClassName, isOpen: panelVisible, toggle: toggle, backdrop: 'static', children: getContent() }));
    };
    const renderNonModalContent = () => {
        const getStyle = () => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      &.ui-unit-dialog-panel.modal-dialog {
        margin: 0;
        width: 100%;
        .modal-content {
          background-color: ${theme.ref.palette.neutral[600]};
          color: ${theme.ref.palette.black};
          font-size: .75rem;
          font-weight: 400;
          border: none;
          .panel-header {
            font-size: .8125rem;
            padding: .625rem;
          }
          .modal-body {
            padding: 0 .625rem .75rem;
            white-space: normal;
          }
        }
      }
    `;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${generalClassName} modal-dialog ${panelVisible ? '' : 'collapse'}`, css: getStyle(), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'modal-content', children: getContent() }) }));
    };
    return isModal ? renderModalContent() : renderNonModalContent();
});
var EntityStatusType;
(function (EntityStatusType) {
    EntityStatusType["None"] = "";
    EntityStatusType["Init"] = "init";
    EntityStatusType["Loading"] = "loading";
    EntityStatusType["Loaded"] = "loaded";
    EntityStatusType["Warning"] = "warning";
    EntityStatusType["Error"] = "error";
})(EntityStatusType || (EntityStatusType = {}));
/**
 * An animatable icon representing status
 */
const StatusIndicator = (0,jimu_theme__WEBPACK_IMPORTED_MODULE_3__.withTheme)((props) => {
    const { theme, className, title, statusType } = props;
    const getStyle = () => {
        var _a, _b, _c, _d;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    &.ui-unit-status-indicator {
      display: flex;
      &.ui-unit-status-indicator_status-type-loading {
        &:before {
          @keyframes loading {
            0% {transform: rotate(0deg); };
            100% {transform: rotate(360deg)};
          }
          content: '';
          width: 1rem;
          height: 1rem;
          display: block;
          border: 1px solid ${(_b = (_a = theme === null || theme === void 0 ? void 0 : theme.ref.palette) === null || _a === void 0 ? void 0 : _a.neutral) === null || _b === void 0 ? void 0 : _b[500]};
          border-radius: 50%;
          border-top: 1px solid ${(_d = (_c = theme === null || theme === void 0 ? void 0 : theme.sys.color) === null || _c === void 0 ? void 0 : _c.primary) === null || _d === void 0 ? void 0 : _d.main};
          box-sizing: border-box;
          animation: loading 2s infinite linear;
          margin-right: .25rem;
        }
      }
    }
  `;
    };
    return (statusType &&
        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${className !== null && className !== void 0 ? className : ''} ui-unit-status-indicator ui-unit-status-indicator_status-type-${statusType}`, title: title, css: getStyle() }));
});
/**
 * Simple error message component for displaying user-facing errors.
 * Use DataSourceTip for data source-related errors.
 */
const ErrorMessage = (props) => {
    const { error, className = '', onDismiss } = props;
    if (!error) {
        return null;
    }
    const errorStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    align-items: center;
    padding: 0.5rem;
    margin: 0.5rem 0;
    background-color: var(--sys-color-error-light);
    color: var(--sys-color-error-dark);
    border-radius: 4px;
    font-size: 0.875rem;
    gap: 0.5rem;
    
    .error-icon {
      flex-shrink: 0;
    }
    
    .error-text {
      flex: 1;
    }
    
    .error-dismiss {
      flex-shrink: 0;
      cursor: pointer;
      padding: 0.25rem;
      &:hover {
        opacity: 0.7;
      }
    }
  `;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: `error-message ${className}`, css: errorStyle, role: "alert", children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_4___default()), className: "error-icon", size: "sm" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "error-text", children: error }), onDismiss && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", type: "tertiary", icon: true, onClick: onDismiss, className: "error-dismiss", "aria-label": "Dismiss error", children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: (__webpack_require__(/*! jimu-icons/svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg")["default"]), size: "sm" }) }))] }));
};


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/data-source-tip.tsx":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/data-source-tip.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataSourceTip: () => (/* binding */ DataSourceTip)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _common_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common-components */ "./your-extensions/widgets/shared-code/common/common-components.tsx");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _use_ds_exists__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./use-ds-exists */ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx");

/** @jsx jsx */






/**
 * Show icon and message if the data source doesn't work.
 * @param props
 * @returns
 */
function DataSourceTip(props) {
    var _a, _b, _c;
    const { widgetId, useDataSource, onStatusChange, onDataSourceCreated, showMessage = false } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages);
    const dsExists = (0,_use_ds_exists__WEBPACK_IMPORTED_MODULE_6__.useDataSourceExists)({ widgetId, useDataSourceId: useDataSource.dataSourceId });
    const [dsStatus, setDsStatus] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const handleDsInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info) => {
        if (info) {
            const { status, instanceStatus } = info;
            if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotCreated) {
                setDsStatus('creating');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.CreateError || status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.LoadError) {
                setDsStatus('error');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else if (status === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady) {
                setDsStatus('warning');
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
            }
            else {
                setDsStatus(null);
                onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(true);
            }
        }
    }, [onStatusChange]);
    const handleDsCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        setDataSource(ds);
        onDataSourceCreated === null || onDataSourceCreated === void 0 ? void 0 : onDataSourceCreated(ds);
    }, [onDataSourceCreated]);
    const handleDsCreateFailed = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setDataSource(null);
        setDsStatus('error');
        onStatusChange === null || onStatusChange === void 0 ? void 0 : onStatusChange(false);
    }, [onStatusChange]);
    let statusIcon;
    let statusMsg;
    let color;
    if (dsStatus === 'creating') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('loading');
    }
    else if (!dsExists || dsStatus === 'error') {
        statusIcon = (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_5___default());
        statusMsg = getI18nMessage('dataSourceCreateError');
        color = 'var(--sys-color-error-main)';
    }
    else if (dsStatus === 'warning') {
        let label = '';
        const originDs = (_a = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (originDs) {
            label = originDs.getLabel() || originDs.getDataSourceJson().sourceLabel;
        }
        else if (dataSource) {
            label = dataSource.getLabel() || dataSource.getDataSourceJson().label;
        }
        const widgetId = jimu_core__WEBPACK_IMPORTED_MODULE_1__.appConfigUtils.getWidgetIdByOutputDataSource(useDataSource);
        const appState = ((_b = window === null || window === void 0 ? void 0 : window.jimuConfig) === null || _b === void 0 ? void 0 : _b.isBuilder)
            ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState().appStateInBuilder
            : (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)().getState();
        const widgetLabel = (_c = appState.appConfig.widgets[widgetId]) === null || _c === void 0 ? void 0 : _c.label;
        color = 'var(--sys-color-warning-dark)';
        statusIcon = (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_4___default());
        statusMsg = getI18nMessage('outputDataIsNotGenerated', {
            outputDsLabel: label !== null && label !== void 0 ? label : '',
            sourceWidgetName: widgetLabel !== null && widgetLabel !== void 0 ? widgetLabel : ''
        });
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useDataSource, onDataSourceInfoChange: handleDsInfoChange, onDataSourceCreated: handleDsCreated, onCreateDataSourceFailed: handleDsCreateFailed })), dsStatus === 'creating' && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_common_components__WEBPACK_IMPORTED_MODULE_3__.StatusIndicator, { statusType: _common_components__WEBPACK_IMPORTED_MODULE_3__.EntityStatusType.Loading, title: statusMsg }), (!dsExists || dsStatus === 'error' || dsStatus === 'warning') && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: statusMsg, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: statusIcon, color: color }) }) }), showMessage && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'status-message', children: statusMsg })] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/debug-logger.ts":
/*!********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/debug-logger.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createHelperSimpleDebugLogger: () => (/* binding */ createHelperSimpleDebugLogger),
/* harmony export */   createQuerySimpleDebugLogger: () => (/* binding */ createQuerySimpleDebugLogger)
/* harmony export */ });
/**
 * Configurable debug logging utility for Experience Builder widgets
 *
 * Usage:
 * - Add ?debug=all to URL to see all debug logs
 * - Add ?debug=HASH,FORM to see specific feature logs
 * - Add ?debug=false to disable all debug logs
 *
 * Features (QuerySimple):
 * - BUG: Known bugs/issues (always logs, even if debug=false) - Use format: bugId, category, description
 * - HASH: Hash parameter processing
 * - FORM: Query form interactions
 * - TASK: Query task management
 * - ZOOM: Zoom behavior
 * - MAP-EXTENT: Map extent changes
 * - DATA-ACTION: Data action execution (Add to Map, etc.)
 * - GROUP: Query grouping and dropdown selection
 * - SELECTION: Selection detection and identify popup tracking
 * - WIDGET-STATE: Widget lifecycle events (open/close handshake)
 * - RESTORE: Selection restoration when widget opens
 * - RESULTS-MODE: Results management mode selection (Create new, Add to, Remove from)
 * - EXPAND-COLLAPSE: Expand/collapse state management for result items
 * - GRAPHICS-LAYER: Graphics layer highlighting (independent of layer visibility)
 *
 * Temporary Migration Features (will be removed after migration complete):
 * - CHUNK-1-COMPARE: Chunk 1 (URL Parameter) comparison logs
 * - CHUNK-1-MISMATCH: Chunk 1 mismatch warnings
 * - CHUNK-2-COMPARE: Chunk 2 (Visibility) comparison logs
 * - CHUNK-2-MISMATCH: Chunk 2 mismatch warnings
 * - CHUNK-3-COMPARE: Chunk 3 (Selection/Restoration) comparison logs
 * - CHUNK-3-DECISION: Chunk 3 decision point logs
 * - CHUNK-3-FALLBACK: Chunk 3 fallback logic logs
 * - CHUNK-4-COMPARE: Chunk 4 (Graphics Layer) comparison logs
 * - CHUNK-5-COMPARE: Chunk 5 (Accumulated Records) comparison logs
 * - CHUNK-6-COMPARE: Chunk 6 (Map View) comparison logs
 * - CHUNK-6-MISMATCH: Chunk 6 mismatch warnings
 * - CHUNK-7-COMPARE: Chunk 7 (Events) comparison logs
 *
 * Features (HelperSimple):
 * - HASH: Hash parameter monitoring and widget opening
 * - SELECTION: Selection tracking from QuerySimple
 * - WIDGET-STATE: Widget state handshake (open/close events)
 * - RESTORE: Selection restoration attempts and results
 */
class DebugLogger {
    constructor(options) {
        this.enabledFeatures = new Set();
        this.initialized = false;
        this.widgetName = options.widgetName;
        this.features = options.features;
    }
    initialize() {
        if (this.initialized)
            return;
        // Check URL parameters (both current window and parent for iframes)
        let urlParams = new URLSearchParams(window.location.search);
        let debugValue = urlParams.get('debug');
        // If not found in current window, check parent (needed for ExB iframes)
        if (debugValue === null && window.parent !== window) {
            try {
                urlParams = new URLSearchParams(window.parent.location.search);
                debugValue = urlParams.get('debug');
            }
            catch (e) {
                // Cross-origin restriction might prevent access to parent location
            }
        }
        if (debugValue === 'false') {
            // Explicitly disabled
            this.initialized = true;
            return;
        }
        if (debugValue === 'all') {
            // Enable all features only if explicitly set to 'all'
            this.features.forEach(feature => {
                if (feature !== 'all' && feature !== 'false') {
                    this.enabledFeatures.add(feature);
                }
            });
            console.log(`[${this.widgetName}-DEBUG] Enabled ALL features:`, Array.from(this.enabledFeatures));
        }
        else if (debugValue !== null) {
            // Parse comma-separated feature list
            const requestedFeatures = debugValue.split(',').map(f => f.trim().toUpperCase());
            requestedFeatures.forEach(feature => {
                if (feature.toUpperCase() === 'ALL') {
                    // Enable all features for this widget
                    this.features.forEach(f => {
                        if (f !== 'all' && f !== 'false') {
                            this.enabledFeatures.add(f);
                        }
                    });
                }
                else if (this.features.includes(feature)) {
                    this.enabledFeatures.add(feature);
                }
            });
        }
        this.initialized = true;
    }
    isEnabled(feature) {
        this.initialize();
        // BUG level always enabled, regardless of debug switches (even if debug=false)
        if (feature === 'BUG') {
            return true;
        }
        if (this.enabledFeatures.has('all')) {
            return true;
        }
        return this.enabledFeatures.has(feature);
    }
    log(feature, data) {
        // BUG level always logs, even if debug=false
        if (feature === 'BUG') {
            const logData = Object.assign({ feature: 'BUG', bugId: data.bugId || 'UNKNOWN', category: data.category || 'GENERAL', timestamp: new Date().toISOString() }, data);
            // Use console.warn with emoji format to make bugs stand out
            console.warn(`[${this.widgetName.toUpperCase()}  BUG]`, JSON.stringify(logData, null, 2));
            return;
        }
        // Regular feature logging (existing behavior)
        if (!this.isEnabled(feature)) {
            return;
        }
        const logData = Object.assign({ feature, timestamp: new Date().toISOString() }, data);
        console.log(`[${this.widgetName.toUpperCase()}-${feature}]`, JSON.stringify(logData, null, 2));
    }
    getConfig() {
        this.initialize();
        const urlParams = new URLSearchParams(window.location.search);
        const debugValue = urlParams.get('debug');
        return {
            enabledFeatures: Array.from(this.enabledFeatures),
            debugValue
        };
    }
}
/**
 * Creates a debug logger instance for QuerySimple widget
 */
function createQuerySimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'QUERYSIMPLE',
        features: [
            'HASH', 'FORM', 'TASK', 'ZOOM', 'MAP-EXTENT', 'DATA-ACTION', 'GROUP',
            'SELECTION', 'WIDGET-STATE', 'RESTORE', 'RESULTS-MODE', 'EXPAND-COLLAPSE', 'GRAPHICS-LAYER',
            // Temporary migration features (will be removed after migration complete)
            'CHUNK-1-COMPARE', 'CHUNK-1-MISMATCH', 'CHUNK-2-COMPARE', 'CHUNK-2-MISMATCH', 'CHUNK-3-COMPARE', 'CHUNK-3-DECISION', 'CHUNK-3-FALLBACK',
            'CHUNK-4-COMPARE', 'CHUNK-5-COMPARE', 'CHUNK-6-COMPARE', 'CHUNK-6-MISMATCH', 'CHUNK-7-COMPARE'
        ]
    });
}
/**
 * Creates a debug logger instance for HelperSimple widget
 */
function createHelperSimpleDebugLogger() {
    return new DebugLogger({
        widgetName: 'HELPERSIMPLE',
        features: ['HASH', 'SELECTION', 'WIDGET-STATE', 'RESTORE']
    });
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/use-ds-exists.tsx":
/*!**********************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/use-ds-exists.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useDataSourceExists: () => (/* binding */ useDataSourceExists)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

function useDataSourceExists(props) {
    const { widgetId, useDataSourceId } = props;
    const exists = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a;
        let appConfig;
        if (window.jimuConfig.isBuilder) {
            appConfig = state.appStateInBuilder.appConfig;
        }
        else {
            appConfig = state.appConfig;
        }
        const useDataSources = (_a = appConfig.widgets[widgetId].useDataSources) !== null && _a !== void 0 ? _a : [];
        return useDataSources.some(useDs => useDs.dataSourceId === useDataSourceId);
    });
    return exists;
}


/***/ }),

/***/ "./your-extensions/widgets/shared-code/common/utils.tsx":
/*!**************************************************************!*\
  !*** ./your-extensions/widgets/shared-code/common/utils.tsx ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createGetI18nMessage: () => (/* binding */ createGetI18nMessage),
/* harmony export */   getFieldInfosInPopupContent: () => (/* binding */ getFieldInfosInPopupContent),
/* harmony export */   toggleItemInArray: () => (/* binding */ toggleItemInArray)
/* harmony export */ });
/**
 * Toggle items in an array
 */
const toggleItemInArray = (item, items = []) => items.includes(item) ? items.filter(i => i !== item) : [...items, item];
/**
 * A factory to create a function of getting i18n message
 */
function createGetI18nMessage(options) {
    const { intl, defaultMessages = {} } = options || {};
    const getI18nMessage = (id, options) => {
        const { messages, values } = options || {};
        return intl.formatMessage({ id, defaultMessage: (messages || defaultMessages)[id] }, values);
    };
    return getI18nMessage;
}
function getFieldInfosInPopupContent(popupInfo) {
    var _a;
    const result = [];
    if (((_a = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.popupElements) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        popupInfo.popupElements.forEach(element => {
            var _a;
            if (element.type === 'fields' && ((_a = element.fieldInfos) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                result.push(...element.fieldInfos);
            }
        });
    }
    return result;
}


/***/ }),

/***/ "@emotion/react/jsx-runtime":
/*!************************************!*\
  !*** external "jimu-core/emotion" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "react":
/*!**********************************!*\
  !*** external "jimu-core/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_react__;

/***/ }),

/***/ "widgets/shared-code/common":
/*!*********************************************!*\
  !*** external "widgets/shared-code/common" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/query-simple/src/version-manager.ts");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-list-inline */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");
/* harmony import */ var _hooks_use_url_consumption__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./hooks/use-url-consumption */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-url-consumption.ts");
/* harmony import */ var _hooks_use_widget_visibility__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./hooks/use-widget-visibility */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-widget-visibility.ts");
/* harmony import */ var _hooks_use_map_view__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./hooks/use-map-view */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-map-view.ts");
/* harmony import */ var _hooks_use_graphics_layer__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./hooks/use-graphics-layer */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-graphics-layer.ts");
/* harmony import */ var _hooks_use_accumulated_records__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./hooks/use-accumulated-records */ "./your-extensions/widgets/query-simple/src/runtime/hooks/use-accumulated-records.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */














// Chunk 1: URL Parameter Consumption Manager (r018.8)

// Chunk 2: Widget Visibility Engine Manager (r018.13) - Step 2.3: Switch to manager

// Chunk 6: Map View Management Manager (r018.14) - Step 6.1: Add manager without integration

// Chunk 4: Graphics Layer Management Manager (r018.24) - Step 4.2: Parallel execution

// Chunk 5: Accumulated Records Management Manager (r018.26) - Step 5.1: Add manager without integration

const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__.createQuerySimpleDebugLogger)();
const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 * Dispatched by query-result component when identify popup closes and selection was cleared.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Custom event name for HelperSimple to notify QuerySimple to process hash parameters.
 * Dispatched by HelperSimple after opening a widget in a controller.
 */
const OPEN_WIDGET_EVENT = 'helpersimple-open-widget';
/**
 * QuerySimple Widget
 *
 * A high-performance query widget for ArcGIS Experience Builder that provides:
 * - Universal SQL optimization for database index usage
 * - Dual-mode deep linking (hash fragments and query strings)
 * - Results accumulation across multiple queries
 * - Selection persistence and restoration
 * - Graphics layer highlighting for map visualization
 *
 * Architecture:
 * This widget follows a "Hook & Shell" pattern where complex logic is extracted into
 * manager classes (UrlConsumptionManager, WidgetVisibilityManager, MapViewManager)
 * to keep the main widget class clean and maintainable.
 *
 * @since 1.19.0-r018.18
 * @see {@link UrlConsumptionManager} for URL parameter handling
 * @see {@link WidgetVisibilityManager} for panel visibility detection
 * @see {@link MapViewManager} for map view reference management
 */
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor() {
        super(...arguments);
        // Chunk 1: URL Parameter Consumption Manager (r018.8)
        this.urlConsumptionManager = new _hooks_use_url_consumption__WEBPACK_IMPORTED_MODULE_15__.UrlConsumptionManager();
        // Chunk 2: Widget Visibility Engine Manager (r018.13) - Step 2.3: Switch to manager
        this.visibilityManager = new _hooks_use_widget_visibility__WEBPACK_IMPORTED_MODULE_16__.WidgetVisibilityManager();
        // Refs must be declared before managers that use them
        this.widgetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.graphicsLayerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.mapViewRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        // Chunk 6: Map View Management Manager (r018.16) - Step 6.3: Switch to manager
        this.mapViewManager = new _hooks_use_map_view__WEBPACK_IMPORTED_MODULE_17__.MapViewManager(this.mapViewRef);
        // Chunk 4: Graphics Layer Management Manager (r018.24) - Step 4.2: Parallel execution
        this.graphicsLayerManager = new _hooks_use_graphics_layer__WEBPACK_IMPORTED_MODULE_18__.GraphicsLayerManager(this.graphicsLayerRef, this.mapViewRef);
        // Chunk 5: Accumulated Records Management Manager (r018.26) - Step 5.1: Add manager without integration
        this.accumulatedRecordsManager = new _hooks_use_accumulated_records__WEBPACK_IMPORTED_MODULE_19__.AccumulatedRecordsManager();
        // Track processed hash parameters to prevent re-execution when switching queries
        // Key: "shortId:value" (e.g., "pin:2223059013")
        this.processedHashParamsRef = new Set();
        this.state = {
            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection, // Default mode
            activeTab: 'query'
        };
        /**
         * Handles tab change between "Query" and "Results" tabs.
         *
         * @param activeTab - The tab to switch to ('query' or 'results')
         *
         * @since 1.19.0-r017.0
         */
        this.handleTabChange = (activeTab) => {
            this.setState({ activeTab });
        };
        /**
         * Handles HelperSimple's open widget event.
         * QuerySimple should only process hash parameters when HelperSimple explicitly opens the widget.
         * This ensures HelperSimple remains the orchestrator and prevents autonomous hash processing.
         */
        this.handleOpenWidgetEvent = (event) => {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            const { id } = this.props;
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-handleopenwidgetevent-received',
                widgetId: id,
                eventWidgetId: (_a = event.detail) === null || _a === void 0 ? void 0 : _a.widgetId,
                matches: ((_b = event.detail) === null || _b === void 0 ? void 0 : _b.widgetId) === id,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.shortId,
                    initialQueryValueValue: (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.value,
                    processedHashParams: Array.from(this.processedHashParamsRef),
                    currentUrlHash: window.location.hash.substring(1)
                },
                timestamp: Date.now()
            });
            // Only process if this event is for our widget
            if (((_e = event.detail) === null || _e === void 0 ? void 0 : _e.widgetId) !== id) {
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-handleopenwidgetevent-ignored-wrong-widget',
                    widgetId: id,
                    eventWidgetId: (_f = event.detail) === null || _f === void 0 ? void 0 : _f.widgetId,
                    timestamp: Date.now()
                });
                return;
            }
            // NOTE: We don't check processed hashes here anymore
            // The check happens in onInitialValueFound after we know which shortId:value pair is being processed
            debugLogger.log('HASH', {
                event: 'open-widget-event-received-from-helpersimple',
                widgetId: id,
                timestamp: Date.now()
            });
            // Set flag to allow query-task-list to use initialQueryValue for selection
            // This ensures we only react to hash parameters when HelperSimple explicitly opens us
            // Using state instead of ref ensures React triggers re-render so query-task-list sees the change
            this.setState({ shouldUseInitialQueryValueForSelection: true }, () => {
                var _a, _b;
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-flag-set-true-state-updated',
                    widgetId: id,
                    newState: {
                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                        hasInitialQueryValue: !!this.state.initialQueryValue,
                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                    },
                    timestamp: Date.now()
                });
            });
            debugLogger.log('HASH', {
                event: 'shouldUseInitialQueryValueForSelection-flag-set-true',
                widgetId: id,
                flagValue: true,
                timestamp: Date.now()
            });
            // Now check URL parameters - HelperSimple has explicitly opened us
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-checkurlparameters-starting',
                widgetId: this.props.id,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_g = this.state.initialQueryValue) === null || _g === void 0 ? void 0 : _g.shortId,
                    initialQueryValueValue: (_h = this.state.initialQueryValue) === null || _h === void 0 ? void 0 : _h.value
                },
                timestamp: Date.now()
            });
            this.urlConsumptionManager.checkUrlParameters(this.props, this.state.resultsMode, {
                onInitialValueFound: (value) => {
                    var _a, _b, _c, _d, _e, _f, _g, _h;
                    debugLogger.log('HASH-EXEC', {
                        event: 'querysimple-oninitialvaluefound-called',
                        widgetId: this.props.id,
                        hasValue: !!value,
                        valueShortId: value === null || value === void 0 ? void 0 : value.shortId,
                        valueValue: value === null || value === void 0 ? void 0 : value.value,
                        currentState: {
                            shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                            hasInitialQueryValue: !!this.state.initialQueryValue,
                            initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                            initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                        },
                        timestamp: Date.now()
                    });
                    if (value) {
                        // Check if this specific shortId:value combination was already processed
                        const paramKey = `${value.shortId}:${value.value}`;
                        if (this.processedHashParamsRef.has(paramKey)) {
                            debugLogger.log('HASH-EXEC', {
                                event: 'querysimple-oninitialvaluefound-already-processed',
                                widgetId: this.props.id,
                                shortId: value.shortId,
                                value: value.value,
                                paramKey,
                                processedParams: Array.from(this.processedHashParamsRef),
                                timestamp: Date.now()
                            });
                            return;
                        }
                        // Only update if the value or shortId has changed to avoid unnecessary re-renders
                        const willUpdate = ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.shortId) !== value.shortId || ((_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.value) !== value.value;
                        debugLogger.log('HASH-EXEC', {
                            event: 'querysimple-oninitialvaluefound-will-update',
                            widgetId: this.props.id,
                            willUpdate,
                            previousShortId: (_e = this.state.initialQueryValue) === null || _e === void 0 ? void 0 : _e.shortId,
                            previousValue: (_f = this.state.initialQueryValue) === null || _f === void 0 ? void 0 : _f.value,
                            newShortId: value.shortId,
                            newValue: value.value,
                            timestamp: Date.now()
                        });
                        if (willUpdate) {
                            debugLogger.log('HASH', {
                                event: 'url-param-detected',
                                widgetId: this.props.id,
                                shortId: value.shortId,
                                value: value.value,
                                foundIn: 'manager',
                                triggeredBy: 'helpersimple-open-widget-event',
                                previousShortId: (_g = this.state.initialQueryValue) === null || _g === void 0 ? void 0 : _g.shortId,
                                previousValue: (_h = this.state.initialQueryValue) === null || _h === void 0 ? void 0 : _h.value,
                                timestamp: Date.now()
                            });
                            // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
                            // Using AccumulatedRecordsManager (r018.58)
                            const needsModeReset = this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                            const currentMode = this.state.resultsMode;
                            // Update initialQueryValue state
                            this.setState({
                                initialQueryValue: { shortId: value.shortId, value: value.value }
                            }, () => {
                                var _a, _b;
                                debugLogger.log('HASH-EXEC', {
                                    event: 'querysimple-initialqueryvalue-state-updated',
                                    widgetId: this.props.id,
                                    newState: {
                                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                                        hasInitialQueryValue: !!this.state.initialQueryValue,
                                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value,
                                        resultsMode: this.state.resultsMode
                                    },
                                    timestamp: Date.now()
                                });
                            });
                            // Reset mode via manager if needed
                            if (needsModeReset) {
                                const resetResult = this.accumulatedRecordsManager.resetModeOnHashDetection(this.props.id, currentMode);
                                // Update widget state from manager's return value
                                this.setState({
                                    resultsMode: resetResult.resultsMode,
                                    accumulatedRecords: resetResult.accumulatedRecords
                                });
                            }
                        }
                    }
                    else {
                        debugLogger.log('HASH-EXEC', {
                            event: 'querysimple-oninitialvaluefound-no-value-clearing',
                            widgetId: this.props.id,
                            hasCurrentInitialQueryValue: !!this.state.initialQueryValue,
                            timestamp: Date.now()
                        });
                        // No matching parameters found - clear state
                        if (this.state.initialQueryValue) {
                            this.setState({ initialQueryValue: undefined });
                        }
                    }
                },
                onModeResetNeeded: () => {
                    // Reset to New mode when hash parameter is detected
                    // Using AccumulatedRecordsManager (r018.58)
                    const currentMode = this.state.resultsMode;
                    const needsReset = currentMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                    if (needsReset) {
                        debugLogger.log('HASH', {
                            event: 'mode-reset-needed-on-hash-detection',
                            widgetId: this.props.id,
                            currentMode,
                            triggeredBy: 'helpersimple-open-widget-event',
                            timestamp: Date.now()
                        });
                        const resetResult = this.accumulatedRecordsManager.resetModeOnHashDetection(this.props.id, currentMode);
                        // Update widget state from manager's return value
                        this.setState({
                            resultsMode: resetResult.resultsMode,
                            accumulatedRecords: resetResult.accumulatedRecords
                        });
                    }
                }
            });
        };
        /**
         * Notifies HelperSimple widget of selection changes via custom event.
         *
         * This method dispatches a custom event that HelperSimple listens to for tracking
         * selection state. Called by QueryTaskResult component when user selects records.
         *
         * @param recordIds - Array of selected record IDs (objectIds from the feature layer)
         * @param dataSourceId - Optional data source ID for the selected records
         *
         * @since 1.19.0-r017.0
         */
        this.notifyHelperSimpleOfSelection = (recordIds, dataSourceId) => {
            const { id } = this.props;
            const event = new CustomEvent(_selection_utils__WEBPACK_IMPORTED_MODULE_13__.QUERYSIMPLE_SELECTION_EVENT, {
                detail: {
                    widgetId: id,
                    recordIds,
                    dataSourceId
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * Handles widget panel visibility changes from WidgetVisibilityManager.
         *
         * This method implements the selection restoration pattern:
         * - When panel opens: Restores selection to map if widget has accumulated records or last selection
         * - When panel closes: Clears selection from map (but preserves widget state for restoration)
         *
         * The restoration logic respects the current results mode:
         * - "Add to" / "Remove from" modes: Uses accumulated records for restoration
         * - "New" mode: Uses lastSelection state for restoration
         *
         * @param isVisible - True if widget panel is visible, false if hidden
         *
         * @since 1.19.0-r018.13 (Chunk 2: Manager implementation)
         * @see {@link WidgetVisibilityManager} for visibility detection implementation
         */
        this.handleVisibilityChange = (isVisible) => {
            var _a, _b, _c, _d;
            if (isVisible) {
                // When panel opens, check if we have selection to restore
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToRestore = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                    hasSelectionToRestore,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToRestore': hasSelectionToRestore,
                        'will-call-addSelectionToMap': hasSelectionToRestore
                    }
                });
                // Add selection to map if we have one
                if (hasSelectionToRestore) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-calling-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-true'
                    });
                    this.addSelectionToMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-skipping-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
            else {
                // When panel closes, clear selection from map only (keep widget state)
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToClear = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_d = this.state.lastSelection) === null || _d === void 0 ? void 0 : _d.recordIds.length) || 0,
                    hasSelectionToClear,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToClear': hasSelectionToClear,
                        'will-call-clearSelectionFromMap': hasSelectionToClear
                    }
                });
                if (hasSelectionToClear) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-calling-clearSelectionFromMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-true'
                    });
                    this.clearSelectionFromMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-no-selection-to-clear',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
        };
        /**
         * Handles map view change from JimuMapViewComponent.
         *
         * This method is called by JimuMapViewComponent when the map view becomes available
         * or changes. It delegates to MapViewManager for reference management and initializes
         * the graphics layer if enabled in widget configuration.
         *
         * @param jimuMapView - The JimuMapView instance from JimuMapViewComponent, or null if unavailable
         *
         * @since 1.19.0-r018.18 (Chunk 6: Manager implementation)
         * @see {@link MapViewManager} for map view reference management
         */
        this.handleJimuMapViewChanged = (jimuMapView) => {
            const { id, config } = this.props;
            // Manager implementation (r018.16 - Step 6.3: Switch to manager)
            this.mapViewManager.handleJimuMapViewChanged(jimuMapView, this.props, {
                onMapViewChange: (newJimuMapView) => {
                    // Get map view from manager
                    const newMapView = this.mapViewManager.getMapView();
                    // Chunk 4: Graphics layer initialization (r018.25 - Step 4.3: Remove old implementation)
                    // Initialize graphics layer if map view is available and graphics layer should be initialized
                    if (this.graphicsLayerManager.shouldInitialize(config, newMapView) && newMapView) {
                        // Use void to handle promise without blocking
                        void this.graphicsLayerManager.initialize(id, newMapView, {
                            onGraphicsLayerInitialized: (graphicsLayer) => {
                                // Update state to force re-render and update props
                                this.setState({ graphicsLayerInitialized: true });
                            }
                        });
                    }
                }
            });
        };
        /**
         * Initializes graphics layer lazily when output data source becomes available.
         *
         * This method is called by QueryTask component when an output data source is created.
         * It retrieves the map view from MapViewManager and initializes the graphics layer
         * using GraphicsLayerManager if not already initialized.
         *
         * @param outputDS - The output data source that was created
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.initializeFromOutputDS} for graphics layer initialization
         * @see {@link MapViewManager.getMapView} for map view retrieval
         */
        /**
         * Initializes graphics layer lazily when output data source becomes available.
         *
         * This method is called by QueryTask component when an output data source is created.
         * It retrieves the map view from MapViewManager and initializes the graphics layer
         * using GraphicsLayerManager if not already initialized.
         *
         * @param outputDS - The output data source that was created
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.initializeFromOutputDS} for graphics layer initialization
         * @see {@link MapViewManager.getMapView} for map view retrieval
         */
        this.initializeGraphicsLayerFromOutputDS = (outputDS) => __awaiter(this, void 0, void 0, function* () {
            const { id, config } = this.props;
            // Chunk 4: Graphics layer initialization (r018.25 - Step 4.3: Remove old implementation)
            // Use map view from manager if available
            const mapView = this.mapViewManager.getMapView() || this.mapViewRef.current;
            yield this.graphicsLayerManager.initializeFromOutputDS(id, config, outputDS, mapView, {
                onGraphicsLayerInitialized: (graphicsLayer) => {
                    this.setState({ graphicsLayerInitialized: true });
                }
            });
        });
        /**
         * Clears all graphics from the graphics layer if it exists.
         *
         * This method is called when clearing results or switching queries in "New" mode
         * to ensure graphics are removed from the map. It does not remove the graphics layer
         * itself, only clears its contents.
         *
         * @since 1.19.0-r017.0
         * @see {@link GraphicsLayerManager.clearGraphics} for graphics clearing logic
         */
        this.clearGraphicsLayerIfExists = () => {
            const { config } = this.props;
            // Chunk 4: Graphics layer clearing (r018.25 - Step 4.3: Remove old implementation)
            this.graphicsLayerManager.clearGraphics(this.props.id, config);
        };
        /**
         * Handles selection change events from QueryTaskResult component.
         *
         * This method updates widget state when records are selected or deselected in the
         * results tab. It respects the current results mode:
         * - "Add to" / "Remove from" modes: Uses accumulated records count for restoration state
         * - "New" mode: Uses event record IDs for restoration state
         *
         * Also handles automatic mode reset: If selection is cleared in "Remove from" mode,
         * the mode is automatically reset to "New" since Remove mode requires selection to function.
         *
         * @param event - Custom event containing selection details (widgetId, recordIds, outputDsId, queryItemConfigId)
         *
         * @since 1.19.0-r017.0
         */
        this.handleSelectionChange = (event) => {
            var _a;
            const customEvent = event;
            const { id } = this.props;
            // Only track if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const hasSelection = customEvent.detail.recordIds && customEvent.detail.recordIds.length > 0;
            // If the panel is NOT visible, and we are receiving an EMPTY selection,
            // it's almost certainly our own 'clearSelectionFromMap' logic firing.
            // We should IGNORE this so we don't wipe out the lastSelection state.
            if (!this.state.isPanelVisible && !hasSelection) {
                debugLogger.log('RESTORE', {
                    event: 'handleSelectionChange-ignoring-empty-selection-while-panel-closed',
                    widgetId: id,
                    timestamp: Date.now()
                });
                return;
            }
            // In "Add to" or "Remove from" mode, use accumulated records count for restoration
            // The accumulated records are the source of truth for what should be restored
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            const accumulatedRecordsCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const selectionCount = isAccumulationMode && accumulatedRecordsCount > 0
                ? accumulatedRecordsCount
                : (hasSelection ? customEvent.detail.recordIds.length : 0);
            // If selection is cleared and we're in Remove mode, reset to NewSelection mode
            // Remove mode requires selection to function, so it should be disabled when selection is empty
            const shouldResetMode = !hasSelection &&
                selectionCount === 0 &&
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-updating-state',
                widgetId: id,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelectionFromEvent: hasSelection,
                accumulatedRecordsCountBefore: accumulatedRecordsCount,
                calculatedSelectionCount: selectionCount,
                'will-set-hasSelection': selectionCount > 0,
                'will-set-lastSelection': hasSelection && !!customEvent.detail.outputDsId && !!customEvent.detail.queryItemConfigId,
                'will-reset-mode': shouldResetMode,
                decisionLogic: {
                    'isAccumulationMode': isAccumulationMode,
                    'accumulatedRecordsCount > 0': accumulatedRecordsCount > 0,
                    'use-accumulated-count': isAccumulationMode && accumulatedRecordsCount > 0,
                    'use-event-count': !(isAccumulationMode && accumulatedRecordsCount > 0),
                    'should-reset-mode': shouldResetMode
                }
            });
            this.setState(Object.assign({ hasSelection: selectionCount > 0, selectionRecordCount: selectionCount, 
                // Store lastSelection for compatibility, but restoration will use accumulatedRecords in Add/Remove modes
                lastSelection: hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? {
                        recordIds: customEvent.detail.recordIds,
                        outputDsId: customEvent.detail.outputDsId,
                        queryItemConfigId: customEvent.detail.queryItemConfigId
                    }
                    : undefined }, (shouldResetMode ? {
                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                accumulatedRecords: [] // Also clear accumulated records when resetting mode
            } : {})));
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-state-updated',
                widgetId: id,
                'new-hasSelection': selectionCount > 0,
                'new-selectionRecordCount': selectionCount,
                'new-lastSelection-recordIds-count': hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? customEvent.detail.recordIds.length
                    : 0,
                'mode-reset': shouldResetMode,
                'new-mode': shouldResetMode ? _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection : this.state.resultsMode,
                'note': shouldResetMode
                    ? 'Mode reset to NewSelection because selection was cleared in Remove mode'
                    : 'lastSelection-only-contains-current-query-records-not-all-accumulated-records'
            });
        };
        /**
         * Handles restore request when identify popup closes.
         *
         * This method restores selection to the map after the identify popup closes and
         * selection was cleared. It only restores if the widget panel is currently open
         * (users can't see restored selection if widget is closed).
         *
         * Restoration logic:
         * - "Add to" / "Remove from" modes: Restores all accumulated records grouped by origin data source
         * - "New" mode: Restores lastSelection state
         *
         * @param event - Custom event containing selection details (widgetId, recordIds, outputDsId, queryItemConfigId)
         *
         * @since 1.19.0-r017.0
         * @see {@link RESTORE_ON_IDENTIFY_CLOSE_EVENT} for event name constant
         */
        this.handleRestoreOnIdentifyClose = (event) => {
            var _a, _b, _c;
            const customEvent = event;
            const { id } = this.props;
            // Only handle if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            // Use manager as source of truth for visibility (r018.13)
            const isWidgetOpen = this.visibilityManager.getIsPanelVisible();
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restore-requested',
                widgetId: id,
                isWidgetOpen,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelection: this.state.hasSelection || false,
                accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                hasLastSelection: !!this.state.lastSelection,
                lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                outputDsId: customEvent.detail.outputDsId,
                queryItemConfigId: customEvent.detail.queryItemConfigId
            });
            // Only restore if widget is open
            if (!isWidgetOpen) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-widget-closed',
                    widgetId: id,
                    recordCount: customEvent.detail.recordIds.length
                });
                return;
            }
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-found-accumulated-records',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode,
                    'condition-result': isAccumulationMode
                });
            }
            // In Add/Remove modes, check accumulated records instead of lastSelection
            if (isAccumulationMode) {
                if (!this.state.hasSelection || !this.state.accumulatedRecords || this.state.accumulatedRecords.length === 0) {
                    debugLogger.log('RESTORE', {
                        event: 'identify-popup-closed-restore-skipped-no-accumulated-records',
                        widgetId: id,
                        hasSelection: this.state.hasSelection,
                        accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                        'hypothesis': 'hasSelection-is-false-or-no-accumulated-records',
                        'maybe-hasSelection-should-be-based-on-accumulated-records': true
                    });
                    return;
                }
                // Restore all accumulated records (grouped by origin DS)
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restoring-accumulated-records',
                    widgetId: id,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length
                });
                this.addSelectionToMap();
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // For "New" mode, use original validation logic
            // Check if we have matching selection state
            if (!this.state.hasSelection || !this.state.lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-no-selection',
                    widgetId: id,
                    hasSelection: this.state.hasSelection,
                    hasLastSelection: !!this.state.lastSelection
                });
                return;
            }
            // Verify the outputDsId matches
            if (this.state.lastSelection.outputDsId !== customEvent.detail.outputDsId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-ds-mismatch',
                    widgetId: id,
                    ourOutputDsId: this.state.lastSelection.outputDsId,
                    requestedOutputDsId: customEvent.detail.outputDsId
                });
                return;
            }
            // Verify the queryItemConfigId matches (optional but good to check)
            if (this.state.lastSelection.queryItemConfigId !== customEvent.detail.queryItemConfigId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-query-mismatch',
                    widgetId: id,
                    ourQueryItemConfigId: this.state.lastSelection.queryItemConfigId,
                    requestedQueryItemConfigId: customEvent.detail.queryItemConfigId
                });
                return;
            }
            // Restore selection to map (reuse existing method)
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restoring-selection',
                widgetId: id,
                recordCount: customEvent.detail.recordIds.length,
                outputDsId: customEvent.detail.outputDsId
            });
            this.addSelectionToMap();
        };
        /**
         * Restores selection to the map when widget panel opens.
         *
         * This method is called by handleVisibilityChange when the panel becomes visible.
         * It restores previously selected records to the map based on the current results mode:
         *
         * - "Add to" / "Remove from" modes: Restores all accumulated records, grouped by origin data source
         * - "New" mode: Restores lastSelection state from the most recent query
         *
         * The restoration uses selectRecordsAndPublish utility which handles:
         * - Selecting records in origin data sources
         * - Adding graphics to graphics layer (if enabled)
         * - Publishing selection messages to other widgets
         * - Deduplication of records
         *
         * Note: This method does NOT zoom to the selection (unlike the "Add to Map" action).
         *
         * @since 1.19.0-r017.0
         * @see {@link selectRecordsAndPublish} utility function for selection logic
         */
        this.addSelectionToMap = () => {
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            debugLogger.log('RESTORE', {
                event: 'addSelectionToMap-called',
                widgetId: id,
                resultsMode,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                lastSelectionOutputDsId: lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.outputDsId
            });
            // In Add/Remove modes, use accumulated records for restoration
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            // Adding log to see if accumulatedRecords exist but we're not using them
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-found-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0,
                    'condition-result': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0
                });
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: 0,
                    'will-fallback-to-lastSelection': !!lastSelection
                });
            }
            if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restoring-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Restore selection for each origin data source
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    const recordIds = records.map(r => r.getId());
                    try {
                        // Use originDS directly (not outputDS) since records are selected in origin layers
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield selectRecordsAndPublish(id, originDS, recordIds, records, true, useGraphicsLayer, graphicsLayer, mapView);
                        }))();
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restored-origin-ds',
                            widgetId: id,
                            originDSId: originDS.id,
                            recordCount: records.length,
                            zoomExecuted: false
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restore-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error),
                            errorStack: error instanceof Error ? error.stack : undefined
                        });
                    }
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            // Or maybe we should always check accumulatedRecords first?
            if (accumulatedRecords && accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-lastSelection-exiting',
                    widgetId: id,
                    resultsMode,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-early-maybe-should-check-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            // Get records from output DS (same as Add to Map)
            const allRecords = outputDS.getAllLoadedRecords() || [];
            const recordsToSelect = allRecords.filter(record => lastSelection.recordIds.includes(record.getId()));
            if (recordsToSelect.length === 0) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-no-matching-records',
                    widgetId: id,
                    ourRecordCount: lastSelection.recordIds.length
                });
                return;
            }
            // Same logic as Add to Map action - selectRecordsAndPublish handles duplicate checking
            // Don't zoom when restoring on widget open (Add to Map action handles zoom for manual clicks)
            try {
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield selectRecordsAndPublish(id, outputDS, lastSelection.recordIds, recordsToSelect, true, useGraphicsLayer, graphicsLayer, mapView);
                }))();
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-selection-added-to-map',
                    widgetId: id,
                    recordCount: recordsToSelect.length,
                    zoomExecuted: false
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-add-to-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error)
                });
            }
        };
        /**
         * Handles results mode change from the mode dropdown in QueryTask component.
         *
         * This method is called when the user switches between "Create new", "Add to", or
         * "Remove from" modes. It performs the following actions:
         *
         * 1. Consumes hash parameters when switching to accumulation modes (prevents re-triggering)
         * 2. Clears accumulated records when switching to "New" mode
         * 3. Updates widget state with the new mode
         *
         * @param mode - The new selection type mode (NewSelection, AddToSelection, or RemoveFromSelection)
         *
         * @since 1.19.0-r017.0
         */
        this.handleResultsModeChange = (mode) => {
            var _a, _b;
            // Using AccumulatedRecordsManager (r018.58)
            const shouldConsumeHash = (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection) && !!((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId);
            const result = this.accumulatedRecordsManager.handleResultsModeChange(this.props.id, mode, shouldConsumeHash, (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId, this.removeHashParameter);
            // Update widget state from manager's return value
            this.setState({
                resultsMode: result.resultsMode,
                accumulatedRecords: result.accumulatedRecords
            });
        };
        /**
         * Removes a hash parameter from the URL when switching to accumulation modes.
         *
         * This method is called when switching to "Add to" or "Remove from" modes to consume
         * the deep link parameter. This prevents the hash parameter from re-triggering the query
         * when the widget re-renders.
         *
         * The URL is updated using history.replaceState to avoid page reload, and both pathname
         * and query string are preserved (e.g., debug parameters remain intact).
         *
         * @param shortId - The shortId parameter to remove from the URL hash
         *
         * @since 1.19.0-r017.0
         */
        this.removeHashParameter = (shortId) => {
            var _a;
            if (!shortId)
                return;
            const hash = window.location.hash.substring(1);
            const urlParams = new URLSearchParams(hash);
            if (urlParams.has(shortId)) {
                urlParams.delete(shortId);
                const newHash = urlParams.toString();
                debugLogger.log('HASH', {
                    event: 'removeHashParameter',
                    shortId,
                    newHash: newHash ? `#${newHash}` : '(empty)',
                    timestamp: Date.now()
                });
                // Update the URL without triggering a reload
                // Always preserve pathname and query string, only update hash
                window.history.replaceState(null, '', window.location.pathname + window.location.search + (newHash ? `#${newHash}` : ''));
                // Also clear the state so it won't trigger again
                if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                    this.setState({ initialQueryValue: undefined });
                }
            }
        };
        this.handleAccumulatedRecordsChange = (records) => {
            // Using AccumulatedRecordsManager (r018.58)
            this.accumulatedRecordsManager.handleAccumulatedRecordsChange(this.props.id, records);
            // If we're in Remove mode and all accumulated records are cleared, reset to NewSelection mode
            // Remove mode requires accumulated records to function, so it should be disabled when records are empty
            const shouldResetMode = records.length === 0 &&
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            this.setState(Object.assign({ accumulatedRecords: records }, (shouldResetMode ? {
                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection
            } : {})));
            if (shouldResetMode) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'mode-reset-on-accumulated-records-cleared',
                    widgetId: this.props.id,
                    previousMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection,
                    newMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                    reason: 'all-accumulated-records-cleared-in-remove-mode',
                    timestamp: Date.now()
                });
            }
        };
        /**
         * NOTE: No longer needed - we use existing output DS instead of creating new one.
         * Kept for reference but not used.
         */
        this.getOrCreateAccumulatedResultsDS = (originDS) => __awaiter(this, void 0, void 0, function* () {
            // This is no longer used - we merge records into existing output DS
            throw new Error('This method is deprecated - use existing output DS instead');
        });
        /**
         * Clears selection from the map while preserving widget's internal state.
         *
         * This method is called when the widget panel closes to remove selection from the map
         * (cleaning up the visual selection) while keeping the selection state in the widget
         * for restoration when the panel reopens.
         *
         * The method handles both "New" mode (lastSelection) and accumulation modes (accumulatedRecords).
         * It groups records by origin data source and clears selection from each origin data source,
         * ensuring multi-layer selections are properly cleared.
         *
         * Graphics layer is also cleared if enabled, and empty selection messages are published
         * to notify other widgets (like HelperSimple) that selection has been cleared.
         *
         * @since 1.19.0-r017.0
         * @see {@link clearSelectionInDataSources} utility function for clearing logic
         */
        this.clearSelectionFromMap = () => {
            var _a;
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-called',
                widgetId: id,
                resultsMode,
                isAccumulationMode,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                selectionRecordCount: this.state.selectionRecordCount || 0
            });
            // Always clear accumulated records if they exist (regardless of mode)
            // This handles the case where mode might have changed but records still exist
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-checking-accumulated-records',
                widgetId: id,
                'condition': 'accumulatedRecords && accumulatedRecords.length > 0',
                'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
            });
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'clear-found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'clear-found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'clear-could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clearing-accumulated-records-from-map',
                    widgetId: id,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Clear selection from each origin data source
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    try {
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                            debugLogger.log('RESTORE', {
                                event: 'panel-closed-cleared-origin-ds-selection',
                                widgetId: id,
                                originDSId: originDS.id,
                                recordCount: records.length,
                                usedGraphicsLayer: useGraphicsLayer
                            });
                        }))();
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-closed-clear-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error)
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-cleared-accumulated-records-returning',
                    widgetId: id,
                    'will-not-fallback-to-lastSelection': true
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we didn't enter the if block?
            // Or maybe we should always clear accumulated records if they exist?
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-accumulated-records-exist-but-not-clearing',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-condition-failed-why',
                    'condition-was': 'accumulatedRecords && accumulatedRecords.length > 0',
                    'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0)
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-no-lastSelection-exiting',
                    widgetId: id,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-maybe-should-have-cleared-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            try {
                // Get origin DS (the map layer)
                const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
                if (!originDS) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-origin-ds-not-found',
                        widgetId: id,
                        outputDsId: lastSelection.outputDsId
                    });
                    return;
                }
                // Check current selection state before clearing
                const currentSelectedIds = originDS.getSelectedRecordIds() || [];
                const ourRecordIds = lastSelection.recordIds;
                const matchesOurSelection = ourRecordIds.length === currentSelectedIds.length &&
                    ourRecordIds.every(recordId => currentSelectedIds.includes(recordId));
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-map-selection',
                    widgetId: id,
                    ourRecordCount: ourRecordIds.length,
                    mapSelectedCount: currentSelectedIds.length,
                    matchesOurSelection,
                    ourRecordIds: ourRecordIds.slice(0, 5),
                    mapSelectedIds: currentSelectedIds.slice(0, 5)
                });
                // Use clearSelectionInDataSources utility which supports graphics layer
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-cleared-origin-ds-selection',
                        widgetId: id,
                        originDSId: originDS.id,
                        usedGraphicsLayer: useGraphicsLayer
                    });
                    // Verify selection was cleared
                    const afterClearIds = originDS.getSelectedRecordIds() || [];
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-selection-cleared-from-map',
                        widgetId: id,
                        recordCount: lastSelection.recordIds.length,
                        originDSId: originDS.id,
                        selectionAfterClear: afterClearIds.length,
                        verifiedCleared: afterClearIds.length === 0
                    });
                }))();
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clear-from-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
            }
        };
        /**
         * NOTIFY that a hash parameter has been used.
         * Previously this removed the hash from the URL, but per updated requirements,
         * user-entered hashes should remain in the URL.
         *
         * @param shortId - The shortId parameter that was used
         */
        this.handleHashParameterUsed = (shortId) => {
            var _a, _b;
            const { id } = this.props;
            const { initialQueryValue } = this.state;
            debugLogger.log('HASH-EXEC', {
                event: 'querysimple-handlehashparameterused-called',
                widgetId: id,
                shortId,
                currentState: {
                    shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                    hasInitialQueryValue: !!this.state.initialQueryValue,
                    initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                    initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                },
                timestamp: Date.now()
            });
            // NOTE: Hash parameters are NOT cleared here - they persist in URL
            // Hash parameters are only consumed when switching to accumulation modes (Add/Remove)
            // to prevent re-triggering when the user manually switches modes
            debugLogger.log('HASH', {
                event: 'handleHashParameterUsed-notified',
                widgetId: id,
                shortId: shortId,
                currentInitialQueryValue: initialQueryValue,
                note: 'Hash parameter used but NOT cleared - hash remains in URL per user requirement',
                timestamp: Date.now()
            });
            // Track this shortId:value pair as processed to prevent re-execution when switching queries
            // This prevents HelperSimple from re-triggering the same parameter when switching queries
            if (initialQueryValue) {
                const paramKey = `${initialQueryValue.shortId}:${initialQueryValue.value}`;
                this.processedHashParamsRef.add(paramKey);
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-hashparam-tracked-as-processed',
                    widgetId: id,
                    shortId: initialQueryValue.shortId,
                    value: initialQueryValue.value,
                    paramKey,
                    processedParams: Array.from(this.processedHashParamsRef),
                    timestamp: Date.now()
                });
            }
            // ALWAYS clear both hash state values after execution
            // QuerySimple should not remember hash state after HelperSimple-driven execution completes
            // This prevents autonomous re-processing when switching queries
            // Using a single setState ensures atomic update and prevents race conditions
            this.setState({
                shouldUseInitialQueryValueForSelection: false,
                initialQueryValue: undefined
            }, () => {
                var _a, _b;
                debugLogger.log('HASH-EXEC', {
                    event: 'querysimple-handlehashparameterused-state-cleared',
                    widgetId: id,
                    shortId,
                    newState: {
                        shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                        hasInitialQueryValue: !!this.state.initialQueryValue,
                        initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                        initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
                    },
                    timestamp: Date.now()
                });
            });
            debugLogger.log('HASH', {
                event: 'shouldUseInitialQueryValueForSelection-flag-cleared',
                widgetId: id,
                shortId: shortId,
                flagValue: false,
                timestamp: Date.now()
            });
        };
    }
    componentDidMount() {
        var _a, _b;
        // Chunk 1: Manager implementation (r018.8 - switched to manager)
        // Setup manager (no autonomous URL checking - HelperSimple orchestrates)
        // NOTE: setup() is a no-op - callbacks are never called
        this.urlConsumptionManager.setup(this.props, this.state.resultsMode, {} // Empty callbacks - setup() is a no-op
        );
        // Listen for HelperSimple's open widget event
        // QuerySimple should only process hash parameters when HelperSimple explicitly opens the widget
        // This ensures HelperSimple remains the orchestrator
        window.addEventListener(OPEN_WIDGET_EVENT, this.handleOpenWidgetEvent);
        debugLogger.log('HASH-EXEC', {
            event: 'querysimple-mounted-event-listener-setup',
            widgetId: this.props.id,
            currentState: {
                shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection,
                hasInitialQueryValue: !!this.state.initialQueryValue,
                initialQueryValueShortId: (_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId,
                initialQueryValueValue: (_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.value
            },
            timestamp: Date.now()
        });
        // Chunk 2: Manager implementation (r018.13 - Step 2.3: Switch to manager)
        if (this.widgetRef.current) {
            this.visibilityManager.setup(this.widgetRef.current, this.props, {
                onVisibilityChange: (isVisible) => {
                    // Update state
                    this.setState({ isPanelVisible: isVisible });
                    // Handle restoration logic
                    this.handleVisibilityChange(isVisible);
                }
            }, (isVisible) => {
                // Manager's internal state tracking callback
                // (no-op, restoration handled in onVisibilityChange)
            });
            // Notify mount via manager
            this.visibilityManager.notifyMount(this.props.id);
        }
        // Chunk 5: Initialize accumulated records manager state (r018.26 - Step 5.1: Add manager)
        // Sync manager state with widget state
        if (this.state.resultsMode) {
            this.accumulatedRecordsManager.handleResultsModeChange(this.props.id, this.state.resultsMode, false);
        }
        if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
            this.accumulatedRecordsManager.handleAccumulatedRecordsChange(this.props.id, this.state.accumulatedRecords);
        }
        // Set up callbacks for manager
        // Set up callbacks for manager (r018.57)
        // Note: Primary state updates come from manager return values in handleResultsModeChange/handleAccumulatedRecordsChange
        // These callbacks serve as backup/verification but shouldn't be needed since we update state directly from return values
        this.accumulatedRecordsManager.setCallbacks({
            onModeChange: (mode) => {
                // State is updated from handleResultsModeChange return value, so this is just a backup
                if (this.state.resultsMode !== mode) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'callback-onModeChange-state-sync',
                        widgetId: this.props.id,
                        callbackMode: mode,
                        currentStateMode: this.state.resultsMode,
                        note: 'State should already be synced from return value',
                        timestamp: Date.now()
                    });
                    this.setState({ resultsMode: mode });
                }
            },
            onAccumulatedRecordsChange: (records) => {
                var _a;
                // State is updated from handleAccumulatedRecordsChange, so this is just a backup
                const currentCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
                if (currentCount !== records.length) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'callback-onAccumulatedRecordsChange-state-sync',
                        widgetId: this.props.id,
                        callbackCount: records.length,
                        currentStateCount: currentCount,
                        note: 'State should already be synced from direct update',
                        timestamp: Date.now()
                    });
                    this.setState({ accumulatedRecords: records });
                }
            }
        });
        // Listen for selection changes from query-result
        window.addEventListener(_selection_utils__WEBPACK_IMPORTED_MODULE_13__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Listen for restore requests when identify popup closes
        window.addEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Graphics layer will be initialized when map view becomes available via JimuMapViewComponent
    }
    componentWillUnmount() {
        // Chunk 1: Clean up manager (r018.8)
        this.urlConsumptionManager.cleanup();
        // Clean up HelperSimple open widget event listener
        window.removeEventListener(OPEN_WIDGET_EVENT, this.handleOpenWidgetEvent);
        // Chunk 2: Clean up manager (r018.13 - Step 2.3: Switch to manager)
        this.visibilityManager.cleanup();
        this.visibilityManager.notifyUnmount(this.props.id);
        // Clean up selection change listener
        window.removeEventListener(_selection_utils__WEBPACK_IMPORTED_MODULE_13__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Clean up restore on identify close listener
        window.removeEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Chunk 4: Graphics layer cleanup (r018.25 - Step 4.3: Remove old implementation)
        this.graphicsLayerManager.cleanup(this.props.id);
        // Chunk 5: Clean up accumulated records manager (r018.26 - Step 5.1: Add manager)
        this.accumulatedRecordsManager.cleanup();
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-closed',
            widgetId: this.props.id,
            isOpen: false,
            timestamp: new Date().toISOString()
        });
    }
    componentDidUpdate(prevProps) {
        // QuerySimple no longer autonomously checks URL parameters
        // Only HelperSimple can trigger hash parameter processing via OPEN_WIDGET_EVENT
        // This ensures HelperSimple remains the orchestrator
        // Chunk 4: Graphics layer is now required (r018.25 - Step 4.3: Remove config change handling)
        // No need to handle config changes for graphics layer since it's always enabled
    }
    render() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        const { config, id, icon, label, layoutId, layoutItemId, controllerWidgetId } = this.props;
        const widgetLabel = this.props.intl.formatMessage({
            id: '_widgetLabel',
            defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]._widgetLabel
        });
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, { icon: iconMap.iconQuery, widgetId: this.props.id, name: widgetLabel });
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Popper && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__.TaskListPopperWrapper, { id: 0, icon: icon, popperTitle: label, minSize: (_c = (_b = config.sizeMap) === null || _b === void 0 ? void 0 : _b.arrangementIconPopper) === null || _c === void 0 ? void 0 : _c.minSize, defaultSize: (_e = (_d = config.sizeMap) === null || _d === void 0 ? void 0 : _d.arrangementIconPopper) === null || _e === void 0 ? void 0 : _e.defaultSize, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, isInPopper: true, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, className: 'pb-4', initialQueryValue: this.state.initialQueryValue, shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange }) }) }));
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Inline && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__.TaskListInline, { widgetId: id, widgetLabel: label, wrap: config.arrangeWrap, queryItems: config.queryItems, minSize: (_g = (_f = config.sizeMap) === null || _f === void 0 ? void 0 : _f.arrangementIconPopper) === null || _g === void 0 ? void 0 : _g.minSize, defaultSize: (_j = (_h = config.sizeMap) === null || _h === void 0 ? void 0 : _h.arrangementIconPopper) === null || _j === void 0 ? void 0 : _j.defaultSize, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed }) }));
        }
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Paper, { ref: this.widgetRef, variant: 'flat', className: 'jimu-widget runtime-query', "data-widgetid": id, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
        display: flex;
        flex-direction: column;
        height: 100%;
      `, children: [config.useGraphicsLayerForHighlight && config.highlightMapWidgetId && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__.JimuMapViewComponent, { useMapWidgetId: config.highlightMapWidgetId, onActiveViewChange: this.handleJimuMapViewChanged })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "widget-header", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px 16px;
          border-bottom: 1px solid var(--sys-color-divider-secondary);
          background-color: var(--sys-color-surface);
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "widget-title", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--sys-color-text-primary);
          `, children: label || widgetLabel }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            flex: 1;
            overflow: auto;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, shouldUseInitialQueryValueForSelection: this.state.shouldUseInitialQueryValueForSelection, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 4px 12px;
            border-top: 1px solid var(--sys-color-divider-secondary);
            background-color: var(--sys-color-surface-paper);
            flex-shrink: 0;
            text-align: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              font-size: 0.75rem;
              color: var(--sys-color-text-tertiary);
              font-weight: 400;
              letter-spacing: 0.025em;
              display: inline-flex;
              align-items: center;
              gap: 4px;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex-shrink: 0;
                  opacity: 0.6;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-left: 6px;
                opacity: 0.5;
                font-size: 0.7rem;
              `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_14__.WIDGET_VERSION] })] }) })] })] }));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_7__.versionManager;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9xdWVyeS1zaW1wbGUvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFFVTtBQUVoRCxNQUFNLFVBQVUsR0FBRyxDQUFDLEtBQXdCLEVBQUUsRUFBRTtJQUNyRCxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRztJQUN0QixNQUFNLEVBQUUsU0FBUyxLQUFnQixLQUFLLEVBQWhCLE1BQU0sVUFBSyxLQUFLLEVBQWhDLGFBQXdCLENBQVE7SUFFdEMsTUFBTSxPQUFPLEdBQUcscURBQVUsQ0FBQywrQkFBK0IsRUFBRSxTQUFTLENBQUM7SUFDdEUsSUFBSSxDQUFDLEdBQUc7UUFBRSxPQUFPLHVGQUFLLFNBQVMsRUFBRSxPQUFPLElBQU0sTUFBYSxFQUFJO0lBQy9ELE9BQU8sZ0VBQUMsR0FBRyxrQkFBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSx5RUFBRyxJQUFNLE1BQU0sRUFBSTtBQUMxRCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1g0QztBQUVXO0FBRWpELE1BQU0sV0FBVyxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQ3RELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFP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QUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQy9CLFdBQVcsRUFBRSxJQUFJLENBQUMsZUFBZSxHQUNqQyxHQUMwQixHQUMxQixFQUVOLHlFQUFLLEdBQUcsRUFBRSw4Q0FBRzs7Ozs7O1dBTVosWUFDQywyRUFBTSxHQUFHLEVBQUUsOENBQUc7Ozs7Ozs7O2FBUWIsYUFFQywwRUFDRSxLQUFLLEVBQUMsSUFBSSxFQUNWLE1BQU0sRUFBQyxJQUFJLEVBQ1gsT0FBTyxFQUFDLFdBQVcsRUFDbkIsSUFBSSxFQUFDLE1BQU0sRUFDWCxNQUFNLEVBQUMsY0FBYyxFQUNyQixXQUFXLEVBQUMsR0FBRyxFQUNmLEdBQUcsRUFBRSw4Q0FBRzs7O2lCQUdQLGFBRUQsOEVBQVUsTUFBTSxFQUFDLGtCQUFrQixHQUFFLEVBQ3JDLDhFQUFVLE1BQU0sRUFBQyxlQUFlLEdBQUUsSUFDOUIsOEJBRU4sMkVBQU0sR0FBRyxFQUFFLDhDQUFHOzs7O2VBSWIsa0JBQ0cscURBQWMsSUFDWCxJQUNGLEdBQ0gsSUFDRixJQUNBLENBQ1Q7SUFDSCxDQUFDOztBQXB6RE0scUJBQWMsR0FBRyw0REFBYztpRUFYbkIsTUFBTTtBQW0wRG5CLFNBQVMsMkJBQTJCLENBQUMsR0FBRyxJQUFJLHFCQUF1QixHQUFHLEdBQUcsRUFBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL2Rvd24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9yaWdodC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL2Rvd24uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9hcHBsaWNhdGlvbi9tb3JlLWhvcml6b250YWwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvY29sbGFwc2UtYWxsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvZXhwYW5kLWFsbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2Nsb3NlLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2Vycm9yLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvd2FybmluZy5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9pY29uLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9jb25maWcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGF0YS1hY3Rpb25zL2FkZC10by1tYXAtYWN0aW9uLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kYXRhLWFjdGlvbnMvaW5kZXgudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2RhdGEtYWN0aW9ucy96b29tLXRvLWFjdGlvbi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGVmYXVsdC1xdWVyeS1pdGVtLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2Fzc2V0cy9pY29ucy96b29tLXRvLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2J1ZmZlci1pbnB1dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9jb21wb25lbnRzL2ZlYXR1cmUtaW5mby50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLWRyYXcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvZ2VvbWV0cnktZnJvbS1kcy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLW1hcC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9ncmFwaGljcy1sYXllci11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2hvb2tzL3VzZS1hY2N1bXVsYXRlZC1yZWNvcmRzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLWdyYXBoaWNzLWxheWVyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLW1hcC12aWV3LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaG9va3MvdXNlLXVybC1jb25zdW1wdGlvbi50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2hvb2tzL3VzZS13aWRnZXQtdmlzaWJpbGl0eS50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2hvb2tzL3VzZS16b29tLXRvLXJlY29yZHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9pbnRlcmFjdGl2ZS1kcmF3LXRvb2wudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvbG9hZGluZy1yZXN1bHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktcmVzdWx0LWl0ZW0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktcmVzdWx0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stY29udGV4dC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWZvcm0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1sYWJlbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxpc3QtaW5saW5lLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGlzdC1wb3BwZXItd3JhcHBlci50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxpc3QudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1zcGF0aWFsLWZvcm0udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3Jlc3VsdHMtbWFuYWdlbWVudC11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3NlbGVjdGlvbi11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3NpbXBsZS1saXN0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3RyYW5zbGF0aW9ucy9kZWZhdWx0LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvdXNlQXV0b0hlaWdodC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS93aWRnZXQtY29uZmlnLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvd2lkZ2V0LWNvbnRleHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvem9vbS11dGlscy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy92ZXJzaW9uLW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvdmVyc2lvbi50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24vY29tbW9uLWNvbXBvbmVudHMudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24vZGF0YS1zb3VyY2UtdGlwLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uL2RlYnVnLWxvZ2dlci50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uL3VzZS1kcy1leGlzdHMudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24vdXRpbHMudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlL2Vtb3Rpb25cIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtYXJjZ2lzXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS10aGVtZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS11aVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS11aS9iYXNpYy9zcWwtZXhwcmVzc2lvbi1ydW50aW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmUvcmVhY3RcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcIndpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1jb3JlL2xpYi9zZXQtcHVibGljLXBhdGgudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS93aWRnZXQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL2Rvd24uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IERvd25GaWxsZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBSaWdodEZpbGxlZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBBcnJvd0xlZnRPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IENvbGxhcHNlQWxsT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvZXhwYW5kLWFsbC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgRXhwYW5kQWxsT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBUcmFzaE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBJbmZvT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJtMTQgNC02IDgtNi04elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm00IDIgOCA2LTggNnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0yIDdhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0ybTUgMWExIDEgMCAxIDEgMiAwIDEgMSAwIDAgMS0yIDBtNiAwYTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTE1IDcuNWEuNTIuNTIgMCAwIDEtLjUxNi41MjdIMi45NzZMNi40NzMgMTEuNmEuNTM1LjUzNSAwIDAgMSAwIC43NDYuNTEuNTEgMCAwIDEtLjczIDBMMSA3LjVsNC43NDMtNC44NDZhLjUxLjUxIDAgMCAxIC43MyAwIC41MzUuNTM1IDAgMCAxIDAgLjc0NkwyLjk3NiA2Ljk3M2gxMS41MDhjLjI4NSAwIC41MTYuMjM2LjUxNi41MjdcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMSAzaDE0djFIMXpNOSA3aDZ2MUg5ek01LjAzNiA2LjE0NmEuNS41IDAgMCAwLS43MDggMEwxLjE0NiA5LjMyOGEuNS41IDAgMSAwIC43MDguNzA4bDIuMzI4LTIuMzI5VjE0LjVoMVY3LjcwN2wyLjMyOCAyLjMyOWEuNS41IDAgMSAwIC43MDgtLjcwOHpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMSAzaDE0djFIMXpNOSA3aDZ2MUg5ek00LjMyOCAxNC4zNTRhLjUuNSAwIDAgMCAuNzA4IDBsMy4xODItMy4xODJhLjUuNSAwIDEgMC0uNzA4LS43MDhsLTIuMzI4IDIuMzI5VjZoLTF2Ni43OTNsLTIuMzI4LTIuMzI4YS41LjUgMCAxIDAtLjcwOC43MDd6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNNC42NTMgMTMuODU0YS40ODUuNDg1IDAgMCAxIDAtLjcwOEwxMC4yNCA4IDQuNjUzIDIuODU0YS40ODUuNDg1IDAgMCAxIDAtLjcwOC41NC41NCAwIDAgMSAuNzM4IDBsNS45NTYgNS41YS40ODUuNDg1IDAgMCAxIDAgLjcwOGwtNS45NTYgNS41YS41NC41NCAwIDAgMS0uNzM4IDBcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm04Ljc0NSA4IDYuMSA2LjFhLjUyNy41MjcgMCAxIDEtLjc0NS43NDZMOCA4Ljc0NmwtNi4xIDYuMWEuNTI3LjUyNyAwIDEgMS0uNzQ2LS43NDZsNi4xLTYuMS02LjEtNi4xYS41MjcuNTI3IDAgMCAxIC43NDYtLjc0Nmw2LjEgNi4xIDYuMS02LjFhLjUyNy41MjcgMCAwIDEgLjc0Ni43NDZ6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTYgNi41YS41LjUgMCAwIDEgMSAwdjZhLjUuNSAwIDAgMS0xIDB6TTkuNSA2YS41LjUgMCAwIDAtLjUuNXY2YS41LjUgMCAwIDAgMSAwdi02YS41LjUgMCAwIDAtLjUtLjVcXFwiPjwvcGF0aD48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xMSAwSDVhMSAxIDAgMCAwLTEgMXYySC41YS41LjUgMCAwIDAgMCAxaDEuNmwuODEgMTEuMWExIDEgMCAwIDAgLjk5NS45aDguMTlhMSAxIDAgMCAwIC45OTUtLjlMMTMuOSA0aDEuNmEuNS41IDAgMCAwIDAtMUgxMlYxYTEgMSAwIDAgMC0xLTFtMCAzVjFINXYyem0xLjg5NSAxaC05Ljc5bC44IDExaDguMTl6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk04IDE2QTggOCAwIDEgMSA4IDBhOCA4IDAgMCAxIDAgMTZtMC0xQTcgNyAwIDEgMCA4IDFhNyA3IDAgMCAwIDAgMTRNOCA0YS45MDUuOTA1IDAgMCAwLS45Ljk5NWwuMzUgMy41MDdhLjU1Mi41NTIgMCAwIDAgMS4xIDBsLjM1LTMuNTA3QS45MDUuOTA1IDAgMCAwIDggNG0xIDdhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNOCA1LjVhMSAxIDAgMSAwIDAtMiAxIDEgMCAwIDAgMCAyTTYuNSA3LjVBLjUuNSAwIDAgMSA3IDdoMS41djQuNWgxYS41LjUgMCAwIDEgMCAxaC0zYS41LjUgMCAwIDEgMC0xaDFWOEg3YS41LjUgMCAwIDEtLjUtLjVcXFwiPjwvcGF0aD48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk04IDE2QTggOCAwIDEgMSA4IDBhOCA4IDAgMCAxIDAgMTZtMC0xQTcgNyAwIDEgMCA4IDFhNyA3IDAgMCAwIDAgMTRcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMi4xMjUgMTQuMzM0IDE0SDEuNjY3em0tLjg4Mi0uNDdhMSAxIDAgMCAxIDEuNzY1IDBsNi4zMzMgMTEuODc0QTEgMSAwIDAgMSAxNC4zMzQgMTVIMS42NjdhMSAxIDAgMCAxLS44ODItMS40N3pNOCA0Ljg3NGEuOTA1LjkwNSAwIDAgMC0uOS45OTVsLjM1IDMuNTA3YS41NTIuNTUyIDAgMCAwIDEuMSAwTDguOSA1Ljg3YS45MDUuOTA1IDAgMCAwLS45LS45OTVtMSA3YTEgMSAwIDEgMS0yIDAgMSAxIDAgMCAxIDIgMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAyMCAyMFxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTguNSAzQTUuNSA1LjUgMCAwIDEgMTQgOC41YTUuNSA1LjUgMCAwIDEtMS4yNzMgMy41MjdsNC4wNTMgNC4wNTRhLjc1Ljc1IDAgMSAxLTEuMDYgMS4wNmwtNC4wNTQtNC4wNTNhNS41IDUuNSAwIDAgMS0zLjUyNyAxLjI3MyA1LjUgNS41IDAgMSAxIDAtMTFIOC41em0wIDEuNWgtLjM2MWE0IDQgMCAxIDAgMCA4IDQgNCAwIDAgMCAwLTh6XFxcIj48L3BhdGg+PHJlY3Qgd2lkdGg9XFxcIjE5XFxcIiBoZWlnaHQ9XFxcIjE5XFxcIiB4PVxcXCIuNVxcXCIgeT1cXFwiLjVcXFwiIHN0cm9rZT1cXFwiIzAwMFxcXCIgcng9XFxcIjEuNVxcXCI+PC9yZWN0Pjwvc3ZnPlwiIiwiaW1wb3J0IHR5cGUgeyBTcGF0aWFsUmVsYXRpb25zaGlwLCBVbml0cyB9IGZyb20gJ0Blc3JpL2FyY2dpcy1yZXN0LWZlYXR1cmUtc2VydmljZSdcbmltcG9ydCB0eXBlIHsgSW1tdXRhYmxlT2JqZWN0LCBJbW11dGFibGVBcnJheSwgU3FsRXhwcmVzc2lvbiwgVXNlRGF0YVNvdXJjZSwgSWNvblJlc3VsdCwgT3JkZXJCeU9wdGlvbiB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgU2l6ZSB9IGZyb20gJ2ppbXUtdWknXG5cbmV4cG9ydCBlbnVtIENyZWF0ZVRvb2xUeXBlIHtcbiAgUG9pbnQgPSAnUG9pbnQnLFxuICBQb2x5bGluZSA9ICdQb2x5bGluZScsXG4gIFBvbHlnb24gPSAnUG9seWdvbicsXG4gIFJlY3RhbmdsZSA9ICdSZWN0YW5nbGUnLFxuICBDaXJjbGUgPSAnQ2lyY2xlJ1xufVxuXG5leHBvcnQgZW51bSBTZWxlY3Rpb25UeXBlIHtcbiAgTmV3U2VsZWN0aW9uID0gJ05FV19TRUxFQ1RJT04nLFxuICBBZGRUb1NlbGVjdGlvbiA9ICdBRERfVE9fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBSZW1vdmVGcm9tU2VsZWN0aW9uID0gJ1JFTU9WRV9GUk9NX0NVUlJFTlRfU0VMRUNUSU9OJyxcbiAgU3Vic2V0U2VsZWN0aW9uID0gJ1NVQlNFVF9GUk9NX0NVUlJFTlRfU0VMRUNUSU9OJyxcbiAgU3dpdGNoU2VsZWN0aW9uID0gJ1NXSVRDSF9DVVJSRU5UX1NFTEVDVElPTicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmllbGQge1xuICBuYW1lOiBzdHJpbmdcbiAgYWxpYXM/OiBzdHJpbmdcbiAgbGFiZWw/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGVudW0gUXVlcnlBcnJhbmdlVHlwZSB7XG4gIEJsb2NrID0gJ0JMT0NLJyxcbiAgSW5saW5lID0gJ0lOTElORScsXG4gIFBvcHBlciA9ICdQT1BQRVInLFxufVxuXG5leHBvcnQgZW51bSBTcGF0aWFsRmlsdGVyVHlwZSB7XG4gIEN1cnJlbnRNYXBFeHRlbnQgPSAnQ3VycmVudE1hcEV4dGVudCcsXG4gIEludGVyYWN0aXZlRHJhd01vZGUgPSAnSW50ZXJhY3RpdmVEcmF3TW9kZScsXG4gIE5vbmUgPSAnJ1xufVxuXG5leHBvcnQgZW51bSBTcGF0aWFsUmVsYXRpb24ge1xuICBJbnRlcnNlY3QgPSAnaW50ZXJzZWN0cycsXG4gIENvbnRhaW4gPSAnY29udGFpbnMnLFxuICBDcm9zcyA9ICdjcm9zc2VzJyxcbiAgRW52ZWxvcGVJbnRlcnNlY3QgPSAnZW52ZWxvcGUtaW50ZXJzZWN0cycsXG4gIEluZGV4SW50ZXJzZWN0ID0gJ2luZGV4LWludGVyc2VjdHMnLFxuICBPdmVybGFwID0gJ292ZXJsYXBzJyxcbiAgVG91Y2ggPSAndG91Y2hlcycsXG4gIFdpdGhpbiA9ICd3aXRoaW4nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNwYXRpYWxGaWx0ZXJPYmoge1xuICBnZW9tZXRyeTogYW55XG4gIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpY1xuICBsYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4gIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW5cbiAgcmVsYXRpb24/OiBTcGF0aWFsUmVsYXRpb25cbiAgYnVmZmVyPzogeyBkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSB9XG59XG5cbmV4cG9ydCBjb25zdCBtYXBKU0FQSVNwYXRpYWxSZWxUb0RzU3BhdGlhbFJlbDogeyBba2V5OiBzdHJpbmddOiBTcGF0aWFsUmVsYXRpb25zaGlwIH0gPSB7XG4gIFtTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0XTogJ2VzcmlTcGF0aWFsUmVsSW50ZXJzZWN0cycsXG4gIFtTcGF0aWFsUmVsYXRpb24uQ29udGFpbl06ICdlc3JpU3BhdGlhbFJlbENvbnRhaW5zJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5Dcm9zc106ICdlc3JpU3BhdGlhbFJlbENyb3NzZXMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkVudmVsb3BlSW50ZXJzZWN0XTogJ2VzcmlTcGF0aWFsUmVsRW52ZWxvcGVJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5JbmRleEludGVyc2VjdF06ICdlc3JpU3BhdGlhbFJlbEluZGV4SW50ZXJzZWN0cycsXG4gIFtTcGF0aWFsUmVsYXRpb24uT3ZlcmxhcF06ICdlc3JpU3BhdGlhbFJlbE92ZXJsYXBzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5Ub3VjaF06ICdlc3JpU3BhdGlhbFJlbFRvdWNoZXMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLldpdGhpbl06ICdlc3JpU3BhdGlhbFJlbFdpdGhpbidcbn1cblxuZXhwb3J0IGVudW0gVW5pdFR5cGUge1xuICBNaWxlcyA9ICdNaWxlcycsXG4gIEtpbG9tZXRlcnMgPSAnS2lsb21ldGVycycsXG4gIEZlZXQgPSAnRmVldCcsXG4gIE1ldGVycyA9ICdNZXRlcnMnLFxuICBOYXV0aWNhbE1pbGVzID0gJ05hdXRpY2FsTWlsZXMnLFxufVxuXG5leHBvcnQgY29uc3QgbWFwSlNBUElVbml0VG9Ec1VuaXQ6IHsgW2tleTogc3RyaW5nXTogVW5pdHMgfSA9IHtcbiAgW1VuaXRUeXBlLk1pbGVzXTogJ2VzcmlTUlVuaXRfU3RhdHV0ZU1pbGUnLFxuICBbVW5pdFR5cGUuS2lsb21ldGVyc106ICdlc3JpU1JVbml0X0tpbG9tZXRlcicsXG4gIFtVbml0VHlwZS5GZWV0XTogJ2VzcmlTUlVuaXRfRm9vdCcsXG4gIFtVbml0VHlwZS5NZXRlcnNdOiAnZXNyaVNSVW5pdF9NZXRlcicsXG4gIFtVbml0VHlwZS5OYXV0aWNhbE1pbGVzXTogJ2VzcmlTUlVuaXRfTmF1dGljYWxNaWxlJ1xufVxuXG5leHBvcnQgZW51bSBMaXN0RGlyZWN0aW9uIHtcbiAgSG9yaXpvbnRhbCA9ICdIb3Jpem9udGFsJyxcbiAgVmVydGljYWwgPSAnVmVydGljYWwnLFxufVxuXG5leHBvcnQgZW51bSBQYWdpbmdUeXBlIHtcbiAgTXVsdGlQYWdlID0gJ011bHRpUGFnZScsXG4gIExhenlMb2FkID0gJ0xhenlMb2FkJyxcbiAgU2ltcGxlID0gJ1NpbXBsZScsIC8vIFJlbmRlciBhbGwgcmVjb3JkcyBhdCBvbmNlLCBubyBsYXp5IGxvYWRpbmcgb3IgcGFnaW5hdGlvblxufVxuXG5leHBvcnQgZW51bSBGaWVsZHNUeXBlIHtcbiAgUG9wdXBTZXR0aW5nID0gJ1BvcHVwU2V0dGluZycsXG4gIFNlbGVjdEF0dHJpYnV0ZXMgPSAnU2VsZWN0QXR0cmlidXRlcycsXG59XG5cbmV4cG9ydCBlbnVtIFNvcnREaXJlY3Rpb24ge1xuICBBc2MgPSAnQXNjJyxcbiAgRGVzYyA9ICdEZXNjJyxcbn1cblxuZXhwb3J0IGVudW0gUmVzdWx0U2VsZWN0TW9kZSB7XG4gIFNpbmdsZSA9ICdTaW5nbGUnLFxuICBNdWx0aXBsZSA9ICdNdWx0aXBsZScsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU29ydE9wdGlvbiB7XG4gIG5hbWU6IHN0cmluZ1xuICBkaXJlY3Rpb246IFNvcnREaXJlY3Rpb25cbn1cblxuZXhwb3J0IGVudW0gU3ltYm9sVHlwZSB7XG4gIERlZmF1bHRTeW1ib2wgPSAnRGVmYXVsdFN5bWJvbCcsXG4gIEN1c3RvbVN5bWJvbCA9ICdDdXN0b21TeW1ib2wnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5SXRlbVR5cGUge1xuICBjb25maWdJZDogc3RyaW5nXG4gIGljb24/OiBJY29uUmVzdWx0XG4gIG5hbWU/OiBzdHJpbmdcbiAgZGlzcGxheUxhYmVsPzogYm9vbGVhblxuICB1c2VEYXRhU291cmNlPzogVXNlRGF0YVNvdXJjZVxuICBvdXRwdXREYXRhU291cmNlSWQ/OiBzdHJpbmdcbiAgdXNlQXR0cmlidXRlRmlsdGVyPzogYm9vbGVhblxuICB1c2VTcGF0aWFsRmlsdGVyPzogYm9vbGVhblxuICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbD86IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyTGFiZWw/OiBzdHJpbmdcbiAgYXR0cmlidXRlRmlsdGVyRGVzYz86IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyRGVzYz86IHN0cmluZ1xuICByZXN1bHRzTGFiZWw/OiBzdHJpbmdcbiAgc3FsRXhwck9iaj86IFNxbEV4cHJlc3Npb25cbiAgc3BhdGlhbE1hcFdpZGdldElkcz86IHN0cmluZ1tdXG4gIHNwYXRpYWxGaWx0ZXJUeXBlcz86IFNwYXRpYWxGaWx0ZXJUeXBlW11cbiAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzPzogQ3JlYXRlVG9vbFR5cGVbXVxuICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXI/OiBib29sZWFuXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlPzogbnVtYmVyXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXQ/OiBVbml0VHlwZVxuICBzcGF0aWFsUmVsYXRpb25zPzogU3BhdGlhbFJlbGF0aW9uW11cbiAgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM/OiBVc2VEYXRhU291cmNlW11cbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlU2VsZWN0VG9vbD86IGJvb2xlYW5cbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyPzogYm9vbGVhblxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZT86IG51bWJlclxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJVbml0PzogVW5pdFR5cGVcbiAgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YT86IGJvb2xlYW5cbiAgcmVzdWx0TGlzdERpcmVjdGlvbj86IExpc3REaXJlY3Rpb25cbiAgcmVzdWx0UGFnaW5nU3R5bGU/OiBQYWdpbmdUeXBlXG4gIHJlc3VsdEZpZWxkc1R5cGU/OiBGaWVsZHNUeXBlXG4gIHJlc3VsdFRpdGxlRmllbGRzPzogc3RyaW5nW11cbiAgcmVzdWx0VGl0bGVFeHByZXNzaW9uPzogc3RyaW5nXG4gIHJlc3VsdERpc3BsYXlGaWVsZHM/OiBzdHJpbmdbXVxuICByZXN1bHRTeW1ib2xUeXBlPzogU3ltYm9sVHlwZVxuICByZXN1bHRDdXN0b21TeW1ib2w/OiBhbnlcbiAgcmVzdWx0QWxsb3dDaGFuZ2VTeW1ib2w/OiBib29sZWFuXG4gIHJlc3VsdEV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbiAgcmVzdWx0U2VsZWN0TW9kZT86IFJlc3VsdFNlbGVjdE1vZGVcbiAgYWxsb3dFeHBvcnQ/OiBib29sZWFuXG4gIHNvcnRPcHRpb25zPzogT3JkZXJCeU9wdGlvbltdXG4gIGl0ZW1TaXplTWFwPzoge1xuICAgIGFycmFuZ2VtZW50SG9yaXpvbnRhbFBvcHBlcj86IFNpemVNYXBcbiAgfVxuICAvLyBHcm91cGluZyBmaWVsZHNcbiAgZ3JvdXBJZD86IHN0cmluZ1xuICBncm91cERpc3BsYXlOYW1lPzogc3RyaW5nXG4gIHNlYXJjaEFsaWFzPzogc3RyaW5nXG4gIHNob3J0SWQ/OiBzdHJpbmdcbiAgem9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4gIC8vIERpc3BsYXkgb3JkZXIgKGxvd2VyIG51bWJlcnMgYXBwZWFyIGZpcnN0LCBvcHRpb25hbClcbiAgb3JkZXI/OiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaXplTWFwIHtcbiAgbWluU2l6ZT86IFNpemVcbiAgZGVmYXVsdFNpemU/OiBTaXplXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ0NvbmZpZyB7XG4gIHF1ZXJ5SXRlbXM/OiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBhcnJhbmdlVHlwZTogUXVlcnlBcnJhbmdlVHlwZVxuICBhcnJhbmdlV3JhcD86IGJvb2xlYW5cbiAgcmVzdWx0TGlzdERpcmVjdGlvbj86IExpc3REaXJlY3Rpb25cbiAgcmVzdWx0UGFnaW5nU3R5bGU/OiBQYWdpbmdUeXBlXG4gIGxhenlMb2FkSW5pdGlhbFBhZ2VTaXplPzogbnVtYmVyXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ6IGJvb2xlYW4gLy8gVXNlIGdyYXBoaWNzIGxheWVyIGZvciBoaWdobGlnaHRpbmcgKHJlcXVpcmVkIC0gaW5kZXBlbmRlbnQgb2YgbGF5ZXIgdmlzaWJpbGl0eSlcbiAgaGlnaGxpZ2h0TWFwV2lkZ2V0SWQ/OiBzdHJpbmcgLy8gTWFwIHdpZGdldCBJRCB0byB1c2UgZm9yIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZ1xuICBzaXplTWFwPzoge1xuICAgIGFycmFuZ2VtZW50SWNvblBvcHBlcj86IFNpemVNYXBcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBJTUNvbmZpZyA9IEltbXV0YWJsZU9iamVjdDxTZXR0aW5nQ29uZmlnPlxuXG5cbiIsIi8qKlxuICogQ3VzdG9tIFwiQWRkIHRvIE1hcFwiIGRhdGEgYWN0aW9uIGZvciBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBcbiAqIFRoaXMgYWN0aW9uIHJlcGxhY2VzIHRoZSBmcmFtZXdvcmsncyBcIlNob3cgb24gTWFwXCIgYWN0aW9uIHdpdGggYSBjdXN0b21cbiAqIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzIChzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCkuXG4gKiBUaGlzIGVuc3VyZXMgY29uc2lzdGVudCBiZWhhdmlvciB3aXRoIHF1ZXJ5IHJlc3VsdHMgYW5kIHByb3BlciBpbnRlZ3JhdGlvblxuICogd2l0aCB0aGUgd2lkZ2V0J3MgXCJDbGVhciByZXN1bHRzXCIgZnVuY3Rpb25hbGl0eS5cbiAqL1xuXG5pbXBvcnQgeyB0eXBlIERhdGFSZWNvcmRTZXQsIHR5cGUgRGF0YUFjdGlvbiwgRGF0YUxldmVsLCB0eXBlIEludGxTaGFwZSwgdHlwZSBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggfSBmcm9tICcuLi9ydW50aW1lL3NlbGVjdGlvbi11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcbmltcG9ydCB0eXBlIHsgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5cbi8qKlxuICogQ3JlYXRlcyBhIGN1c3RvbSBcIkFkZCB0byBNYXBcIiBkYXRhIGFjdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy5cbiAqIFxuICogVGhpcyBhY3Rpb24gcmVwbGFjZXMgdGhlIGZyYW1ld29yaydzIFwiU2hvdyBvbiBNYXBcIiBhY3Rpb24gYW5kIGVuc3VyZXMgY29uc2lzdGVudFxuICogYmVoYXZpb3Igd2l0aCBRdWVyeVNpbXBsZSdzIHF1ZXJ5IHJlc3VsdHMgYnkgdXNpbmcgdGhlIHNhbWUgc2VsZWN0aW9uIG1lY2hhbmlzbS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRCB0aGF0IHByb3ZpZGVzIHRoaXMgYWN0aW9uXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBzZWxlY3Rpb24gb24gdGhlIG9yaWdpbiBsYXllcilcbiAqIEBwYXJhbSBpbnRsIC0gVGhlIEludGwgb2JqZWN0IGZvciBpbnRlcm5hdGlvbmFsaXphdGlvblxuICogQHBhcmFtIHF1ZXJ5SXRlbSAtIE9wdGlvbmFsIHF1ZXJ5IGl0ZW0gY29uZmlndXJhdGlvbiAoZm9yIHpvb21Ub1NlbGVjdGVkIHNldHRpbmcpXG4gKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSB6b29tIG92ZXJyaWRlIGZyb20gdGhlIHF1ZXJ5IGZvcm1cbiAqIEByZXR1cm5zIEEgRGF0YUFjdGlvbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBieSBEYXRhQWN0aW9uTGlzdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWRkVG9NYXBBY3Rpb24oXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlLFxuICBpbnRsOiBJbnRsU2hhcGUsXG4gIHF1ZXJ5SXRlbT86IFF1ZXJ5SXRlbVR5cGUsXG4gIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbik6IERhdGFBY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIGlkOiBgJHt3aWRnZXRJZH0tYWRkVG9NYXBgLFxuICAgIG5hbWU6ICdhZGRUb01hcCcsXG4gICAgbGFiZWw6IGludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnYWRkVG9NYXAnLCBkZWZhdWx0TWVzc2FnZTogJ0FkZCB0byBtYXAnIH0pLFxuICAgIC8vIEljb24gbWF0Y2hlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiBmb3IgY29uc2lzdGVuY3lcbiAgICBpY29uOiByZXF1aXJlKCcuLi9ydW50aW1lL2Fzc2V0cy9pY29ucy9zaG93LW9uLW1hcC5zdmcnKS5kZWZhdWx0IHx8IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZycpLFxuICAgIC8vIE5vdGU6IEluZGV4IG1heSBub3QgY29udHJvbCBwb3NpdGlvbiBpZiBleHRyYUFjdGlvbnMgYXJlIGFsd2F5cyBhcHBlbmRlZCBhZnRlciBmcmFtZXdvcmsgYWN0aW9uc1xuICAgIGluZGV4OiAtMTAwLFxuICAgIHdpZGdldElkLFxuICAgIGludGwsXG4gICAgc3VwcG9ydFByb3ZpZGVyV2lkZ2V0OiB0cnVlLFxuICAgIFxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhpcyBhY3Rpb24gY2FuIHByb2Nlc3MgdGhlIGdpdmVuIGRhdGEgc2V0cy5cbiAgICAgKiBTdXBwb3J0cyBSZWNvcmRzIGxldmVsIGFjdGlvbnMgd2l0aCBmZWF0dXJlIGRhdGEgcmVjb3Jkcy5cbiAgICAgKi9cbiAgICBpc1N1cHBvcnRlZDogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBhY3Rpb25XaWRnZXRJZCxcbiAgICAgICAgZGF0YUxldmVsLFxuICAgICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBPbmx5IHN1cHBvcnQgUmVjb3JkcyBsZXZlbCBhY3Rpb25zXG4gICAgICBpZiAoZGF0YUxldmVsICE9PSBEYXRhTGV2ZWwuUmVjb3Jkcykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vdCBSZWNvcmRzIGxldmVsJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTmVlZCBhdCBsZWFzdCBvbmUgZGF0YSBzZXQgd2l0aCByZWNvcmRzXG4gICAgICBpZiAoIWRhdGFTZXRzIHx8IGRhdGFTZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vIGRhdGEgc2V0cydcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgcmVjb3JkcyBhbmQgb3V0cHV0IGRhdGEgc291cmNlXG4gICAgICBjb25zdCBoYXNSZWNvcmRzID0gZGF0YVNldHMuc29tZShkcyA9PiBkcy5yZWNvcmRzICYmIGRzLnJlY29yZHMubGVuZ3RoID4gMClcbiAgICAgIGNvbnN0IHN1cHBvcnRlZCA9IGhhc1JlY29yZHMgJiYgISFvdXRwdXREU1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgIHJlc3VsdDogc3VwcG9ydGVkLFxuICAgICAgICBoYXNSZWNvcmRzLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRhdGFTZXRzLnJlZHVjZSgoc3VtLCBkcykgPT4gc3VtICsgKGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwKSwgMClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVybiBzdXBwb3J0ZWRcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBhY3Rpb24gYnkgc2VsZWN0aW5nIHJlY29yZHMgdXNpbmcgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy5cbiAgICAgKi9cbiAgICBvbkV4ZWN1dGU6IGFzeW5jIChkYXRhU2V0czogRGF0YVJlY29yZFNldFtdLCBkYXRhTGV2ZWw6IERhdGFMZXZlbCwgYWN0aW9uV2lkZ2V0SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGFjdGlvbldpZGdldElkLFxuICAgICAgICBkYXRhTGV2ZWwsXG4gICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFNcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmICghb3V0cHV0RFMgfHwgZGF0YUxldmVsICE9PSBEYXRhTGV2ZWwuUmVjb3Jkcykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICFvdXRwdXREUyA/ICdObyBvdXRwdXREUycgOiAnTm90IFJlY29yZHMgbGV2ZWwnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDb2xsZWN0IGFsbCByZWNvcmRzIGZyb20gYWxsIGRhdGEgc2V0c1xuICAgICAgY29uc3QgYWxsUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gICAgICBkYXRhU2V0cy5mb3JFYWNoKGRhdGFTZXQgPT4ge1xuICAgICAgICBpZiAoZGF0YVNldC5yZWNvcmRzICYmIGRhdGFTZXQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gRmlsdGVyIHRvIG9ubHkgRmVhdHVyZURhdGFSZWNvcmQgdHlwZXNcbiAgICAgICAgICBjb25zdCBmZWF0dXJlUmVjb3JkcyA9IGRhdGFTZXQucmVjb3Jkcy5maWx0ZXIoXG4gICAgICAgICAgICAocmVjb3JkKTogcmVjb3JkIGlzIEZlYXR1cmVEYXRhUmVjb3JkID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlY29yZCAmJiB0eXBlb2YgKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZCkuZ2V0R2VvbWV0cnkgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApXG4gICAgICAgICAgYWxsUmVjb3Jkcy5wdXNoKC4uLmZlYXR1cmVSZWNvcmRzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoYWxsUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZmVhdHVyZSByZWNvcmRzIGZvdW5kJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gR2V0IHJlY29yZCBJRHNcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IGFsbFJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiBhbGxSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVjb3JkSWRzOiByZWNvcmRJZHMuc2xpY2UoMCwgMTApLCAvLyBMb2cgZmlyc3QgMTAgSURzXG4gICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVc2UgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2VzcyAtIHNlbGVjdHMgb24gb3JpZ2luIGxheWVyIGFuZCBwdWJsaXNoZXMgc2VsZWN0aW9uIG1lc3NhZ2VzXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgY29uc2lzdGVudCBiZWhhdmlvciB3aXRoIHF1ZXJ5IHJlc3VsdHMgYW5kIHByb3BlciBpbnRlZ3JhdGlvbiB3aXRoIFwiQ2xlYXIgcmVzdWx0c1wiXG4gICAgICB0cnkge1xuICAgICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCh3aWRnZXRJZCwgb3V0cHV0RFMsIHJlY29yZElkcywgYWxsUmVjb3JkcywgdHJ1ZSlcbiAgICAgICAgXG4gICAgICAgIC8vIE5vdGU6IFpvb20gaXMgbm93IGhhbmRsZWQgYnkgdGhlIHNlcGFyYXRlIFwiWm9vbSBUb1wiIGFjdGlvbiBpbiB0aGUgRGF0YUFjdGlvbkxpc3RcbiAgICAgICAgLy8gVXNlcnMgY2FuIGNsaWNrIFwiWm9vbSBUb1wiIGZyb20gdGhlIGFjdGlvbiBtZW51IGlmIHRoZXkgd2FudCB0byB6b29tIHRvIHNlbGVjdGVkIHJlY29yZHNcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBzZWxlY3RlZCByZWNvcmRzIGFuZCBwdWJsaXNoZWQgc2VsZWN0aW9uIG1lc3NhZ2UnXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBDbGVhbnVwIG1ldGhvZCAocmVxdWlyZWQgYnkgRGF0YUFjdGlvbiBpbnRlcmZhY2UpXG4gICAgICovXG4gICAgZGVzdHJveTogKCk6IHZvaWQgPT4ge1xuICAgICAgLy8gTm8gY2xlYW51cCBuZWVkZWRcbiAgICB9XG4gIH1cbn1cblxuIiwiaW1wb3J0IHsgdHlwZSBEYXRhUmVjb3JkU2V0LCB0eXBlIERhdGFBY3Rpb24sIERhdGFMZXZlbCwgdHlwZSBEYXRhU291cmNlLCB0eXBlIEludGxTaGFwZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGNyZWF0ZUFkZFRvTWFwQWN0aW9uIH0gZnJvbSAnLi9hZGQtdG8tbWFwLWFjdGlvbidcbmltcG9ydCB7IGNyZWF0ZVpvb21Ub0FjdGlvbiB9IGZyb20gJy4vem9vbS10by1hY3Rpb24nXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5cbi8qKlxuICogUXVlcnlTaW1wbGUgQ3VzdG9tIERhdGEgQWN0aW9uc1xuICogXG4gKiBSZXR1cm5zIGN1c3RvbSBkYXRhIGFjdGlvbnMgZm9yIHRoZSB3aWRnZXQuXG4gKiBJbmNsdWRlcyBjdXN0b20gXCJab29tIFRvXCIgYW5kIFwiQWRkIHRvIE1hcFwiIGFjdGlvbnMgdGhhdCB1c2UgUXVlcnlTaW1wbGUncyBwcm9jZXNzZXMuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKG51bGwvdW5kZWZpbmVkIGlmIG5vdCBhdmFpbGFibGUpXG4gKiBAcGFyYW0gbWFwVmlldyAtIFRoZSBtYXAgdmlldyAobnVsbC91bmRlZmluZWQgaWYgbm90IGF2YWlsYWJsZSlcbiAqIEBwYXJhbSBpbnRsIC0gVGhlIEludGwgb2JqZWN0IGZvciBpbnRlcm5hdGlvbmFsaXphdGlvblxuICogQHBhcmFtIHF1ZXJ5SXRlbSAtIE9wdGlvbmFsIHF1ZXJ5IGl0ZW0gY29uZmlndXJhdGlvblxuICogQHBhcmFtIHJ1bnRpbWVab29tVG9TZWxlY3RlZCAtIE9wdGlvbmFsIHJ1bnRpbWUgem9vbSBvdmVycmlkZSBmcm9tIHRoZSBxdWVyeSBmb3JtXG4gKiBAcmV0dXJucyBBcnJheSBvZiBjdXN0b20gRGF0YUFjdGlvbiBvYmplY3RzIChlbXB0eSBpZiBjb25kaXRpb25zIG5vdCBtZXQpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHRyYUFjdGlvbnMoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgdW5kZWZpbmVkLFxuICBpbnRsOiBJbnRsU2hhcGUsXG4gIHF1ZXJ5SXRlbT86IFF1ZXJ5SXRlbVR5cGUsXG4gIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbik6IERhdGFBY3Rpb25bXSB7XG4gIGNvbnN0IGFjdGlvbnM6IERhdGFBY3Rpb25bXSA9IFtdXG4gIFxuICAvLyBBZGQgXCJab29tIFRvXCIgYWN0aW9uIGlmIHdlIGhhdmUgbWFwVmlldyBhbmQgaW50bFxuICBpZiAobWFwVmlldyAmJiBpbnRsKSB7XG4gICAgYWN0aW9ucy5wdXNoKGNyZWF0ZVpvb21Ub0FjdGlvbih3aWRnZXRJZCwgbWFwVmlldywgaW50bCkpXG4gIH1cbiAgXG4gIC8vIEFkZCBcIkFkZCB0byBNYXBcIiBhY3Rpb24gaWYgd2UgaGF2ZSBvdXRwdXREUyBhbmQgaW50bFxuICBpZiAob3V0cHV0RFMgJiYgaW50bCkge1xuICAgIGFjdGlvbnMucHVzaChjcmVhdGVBZGRUb01hcEFjdGlvbih3aWRnZXRJZCwgb3V0cHV0RFMsIGludGwsIHF1ZXJ5SXRlbSwgcnVudGltZVpvb21Ub1NlbGVjdGVkKSlcbiAgfVxuICBcbiAgcmV0dXJuIGFjdGlvbnNcbn1cblxuIiwiLyoqXG4gKiBDdXN0b20gXCJab29tIFRvXCIgZGF0YSBhY3Rpb24gZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIFxuICogVGhpcyBhY3Rpb24gcmVwbGFjZXMgdGhlIGZyYW1ld29yaydzIFwiWm9vbSBUb1wiIGFjdGlvbiB3aXRoIGEgY3VzdG9tXG4gKiBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyB6b29tIGxvZ2ljIChtYXBWaWV3LmdvVG8gd2l0aCBwYWRkaW5nKS5cbiAqIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IHpvb20gYmVoYXZpb3Igd2l0aCBwcm9wZXIgcGFkZGluZy5cbiAqL1xuXG5pbXBvcnQgeyB0eXBlIERhdGFSZWNvcmRTZXQsIHR5cGUgRGF0YUFjdGlvbiwgRGF0YUxldmVsLCB0eXBlIEludGxTaGFwZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IHpvb21Ub1JlY29yZHMgfSBmcm9tICcuLi9ydW50aW1lL3pvb20tdXRpbHMnXG5pbXBvcnQgdHlwZSB7IEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjdXN0b20gXCJab29tIFRvXCIgZGF0YSBhY3Rpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgem9vbSBsb2dpYy5cbiAqIFxuICogVGhpcyBhY3Rpb24gcmVwbGFjZXMgdGhlIGZyYW1ld29yaydzIFwiWm9vbSBUb1wiIGFjdGlvbiBhbmQgZW5zdXJlcyBjb25zaXN0ZW50XG4gKiB6b29tIGJlaGF2aW9yIHdpdGggcGFkZGluZyB1c2luZyBtYXBWaWV3LmdvVG8oKS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRCB0aGF0IHByb3ZpZGVzIHRoaXMgYWN0aW9uXG4gKiBAcGFyYW0gbWFwVmlldyAtIFRoZSBtYXAgdmlldyB0byB6b29tIChNYXBWaWV3IG9yIFNjZW5lVmlldylcbiAqIEBwYXJhbSBpbnRsIC0gVGhlIEludGwgb2JqZWN0IGZvciBpbnRlcm5hdGlvbmFsaXphdGlvblxuICogQHJldHVybnMgQSBEYXRhQWN0aW9uIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGJ5IERhdGFBY3Rpb25MaXN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVab29tVG9BY3Rpb24oXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IHVuZGVmaW5lZCxcbiAgaW50bDogSW50bFNoYXBlXG4pOiBEYXRhQWN0aW9uIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogYCR7d2lkZ2V0SWR9LXpvb21Ub2AsXG4gICAgbmFtZTogJ3F1ZXJ5U2ltcGxlWm9vbVRvJywgLy8gVXNlIHVuaXF1ZSBuYW1lIHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggZnJhbWV3b3JrIGFjdGlvblxuICAgIGxhYmVsOiBpbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ3pvb21Ub1NlbGVjdGVkJywgZGVmYXVsdE1lc3NhZ2U6ICdab29tIHRvIHNlbGVjdGVkJyB9KSxcbiAgICAvLyBVc2UgdGhlIHNhbWUgaWNvbiBhcyB0aGUgZnJhbWV3b3JrJ3Mgem9vbSBhY3Rpb24gKGZyb20gRXhCIGNvbmZpZ3VyYXRpb24gcGFnZSlcbiAgICBpY29uOiByZXF1aXJlKCcuLi9ydW50aW1lL2Fzc2V0cy9pY29ucy96b29tLXRvLnN2ZycpLmRlZmF1bHQgfHwgcmVxdWlyZSgnLi4vcnVudGltZS9hc3NldHMvaWNvbnMvem9vbS10by5zdmcnKSxcbiAgICBpbmRleDogLTkwLCAvLyBQb3NpdGlvbiBiZWZvcmUgQWRkIHRvIE1hcCAoLTEwMClcbiAgICB3aWRnZXRJZCxcbiAgICBpbnRsLFxuICAgIHN1cHBvcnRQcm92aWRlcldpZGdldDogdHJ1ZSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgYWN0aW9uIGNhbiBwcm9jZXNzIHRoZSBnaXZlbiBkYXRhIHNldHMuXG4gICAgICogU3VwcG9ydHMgUmVjb3JkcyBsZXZlbCBhY3Rpb25zIHdpdGggZmVhdHVyZSBkYXRhIHJlY29yZHMuXG4gICAgICovXG4gICAgaXNTdXBwb3J0ZWQ6IGFzeW5jIChkYXRhU2V0czogRGF0YVJlY29yZFNldFtdLCBkYXRhTGV2ZWw6IERhdGFMZXZlbCwgYWN0aW9uV2lkZ2V0SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnem9vbVRvLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGFjdGlvbldpZGdldElkLFxuICAgICAgICBkYXRhTGV2ZWwsXG4gICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzTWFwVmlldzogISFtYXBWaWV3XG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBPbmx5IHN1cHBvcnQgUmVjb3JkcyBsZXZlbCBhY3Rpb25zXG4gICAgICBpZiAoZGF0YUxldmVsICE9PSBEYXRhTGV2ZWwuUmVjb3Jkcykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1pc1N1cHBvcnRlZCcsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICdOb3QgUmVjb3JkcyBsZXZlbCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE5lZWQgYXQgbGVhc3Qgb25lIGRhdGEgc2V0IHdpdGggcmVjb3JkcyBhbmQgYSBtYXAgdmlld1xuICAgICAgaWYgKCFkYXRhU2V0cyB8fCBkYXRhU2V0cy5sZW5ndGggPT09IDAgfHwgIW1hcFZpZXcpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICd6b29tVG8taXNTdXBwb3J0ZWQnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAhZGF0YVNldHMgfHwgZGF0YVNldHMubGVuZ3RoID09PSAwID8gJ05vIGRhdGEgc2V0cycgOiAnTm8gbWFwVmlldydcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgcmVjb3Jkc1xuICAgICAgY29uc3QgaGFzUmVjb3JkcyA9IGRhdGFTZXRzLnNvbWUoZHMgPT4gZHMucmVjb3JkcyAmJiBkcy5yZWNvcmRzLmxlbmd0aCA+IDApXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ3pvb21Uby1pc1N1cHBvcnRlZCcsXG4gICAgICAgIHJlc3VsdDogaGFzUmVjb3JkcyxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiBkYXRhU2V0cy5yZWR1Y2UoKHN1bSwgZHMpID0+IHN1bSArIChkcy5yZWNvcmRzPy5sZW5ndGggfHwgMCksIDApXG4gICAgICB9KVxuICAgICAgXG4gICAgICByZXR1cm4gaGFzUmVjb3Jkc1xuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGFjdGlvbiBieSB6b29taW5nIHRvIHJlY29yZHMgdXNpbmcgdGhlIHNoYXJlZCB6b29tIHV0aWxpdHkuXG4gICAgICovXG4gICAgb25FeGVjdXRlOiBhc3luYyAoZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSwgZGF0YUxldmVsOiBEYXRhTGV2ZWwsIGFjdGlvbldpZGdldElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgIGFjdGlvbjogJ3pvb21Uby1vbkV4ZWN1dGUnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgYWN0aW9uV2lkZ2V0SWQsXG4gICAgICAgIGRhdGFMZXZlbCxcbiAgICAgICAgZGF0YVNldHNDb3VudDogZGF0YVNldHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIW1hcFZpZXdcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmICghbWFwVmlldyB8fCBkYXRhTGV2ZWwgIT09IERhdGFMZXZlbC5SZWNvcmRzKSB7XG4gICAgICAgIC8vIEJVRy1HUkFQSElDUy0wMDE6IFpvb20gb3BlcmF0aW9ucyBmYWlsIHdoZW4gZ3JhcGhpY3MgbGF5ZXIgaXMgZGlzYWJsZWRcbiAgICAgICAgaWYgKCFtYXBWaWV3KSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdCVUcnLCB7XG4gICAgICAgICAgICBidWdJZDogJ0JVRy1HUkFQSElDUy0wMDEnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdHUkFQSElDUycsXG4gICAgICAgICAgICBldmVudDogJ3pvb20tb3BlcmF0aW9uLWZhaWxlZC1ncmFwaGljcy1sYXllci1kaXNhYmxlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgIG9wZXJhdGlvbjogJ3pvb20tdG8tc2VsZWN0ZWQtYWN0aW9uJyxcbiAgICAgICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnWm9vbSB0byBzZWxlY3RlZCBhY3Rpb24gYXR0ZW1wdGVkIGJ1dCBtYXBWaWV3IGlzIHVuYXZhaWxhYmxlIChsaWtlbHkgYmVjYXVzZSB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IGlzIGRpc2FibGVkKScsXG4gICAgICAgICAgICB3b3JrYXJvdW5kOiAnRW5hYmxlIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgaW4gd2lkZ2V0IHNldHRpbmdzJyxcbiAgICAgICAgICAgIHRhcmdldFJlc29sdXRpb246ICdyMDE5LjAnXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICd6b29tVG8tb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogIW1hcFZpZXcgPyAnTm8gbWFwVmlldycgOiAnTm90IFJlY29yZHMgbGV2ZWwnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDb2xsZWN0IGFsbCByZWNvcmRzIGZyb20gYWxsIGRhdGEgc2V0c1xuICAgICAgY29uc3QgYWxsUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gICAgICBkYXRhU2V0cy5mb3JFYWNoKGRhdGFTZXQgPT4ge1xuICAgICAgICBpZiAoZGF0YVNldC5yZWNvcmRzICYmIGRhdGFTZXQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gRmlsdGVyIHRvIG9ubHkgRmVhdHVyZURhdGFSZWNvcmQgdHlwZXNcbiAgICAgICAgICBjb25zdCBmZWF0dXJlUmVjb3JkcyA9IGRhdGFTZXQucmVjb3Jkcy5maWx0ZXIoXG4gICAgICAgICAgICAocmVjb3JkKTogcmVjb3JkIGlzIEZlYXR1cmVEYXRhUmVjb3JkID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlY29yZCAmJiB0eXBlb2YgKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZCkuZ2V0R2VvbWV0cnkgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApXG4gICAgICAgICAgYWxsUmVjb3Jkcy5wdXNoKC4uLmZlYXR1cmVSZWNvcmRzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoYWxsUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICd6b29tVG8tb25FeGVjdXRlJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vIGZlYXR1cmUgcmVjb3JkcyBmb3VuZCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFVzZSB0aGUgc2hhcmVkIHpvb20gdXRpbGl0eSBmdW5jdGlvblxuICAgICAgICBhd2FpdCB6b29tVG9SZWNvcmRzKG1hcFZpZXcsIGFsbFJlY29yZHMpXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ3pvb21Uby1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IHpvb21lZCB0byBmZWF0dXJlcycsXG4gICAgICAgICAgcmVjb3Jkc0NvdW50OiBhbGxSZWNvcmRzLmxlbmd0aFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnREFUQS1BQ1RJT04nLCB7XG4gICAgICAgICAgYWN0aW9uOiAnem9vbVRvLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIENsZWFudXAgbWV0aG9kIChyZXF1aXJlZCBieSBEYXRhQWN0aW9uIGludGVyZmFjZSlcbiAgICAgKi9cbiAgICBkZXN0cm95OiAoKTogdm9pZCA9PiB7XG4gICAgICAvLyBObyBjbGVhbnVwIG5lZWRlZFxuICAgIH1cbiAgfVxufVxuXG4iLCJpbXBvcnQge1xuICB0eXBlIFF1ZXJ5SXRlbVR5cGUsXG4gIENyZWF0ZVRvb2xUeXBlLFxuICBVbml0VHlwZSxcbiAgU3BhdGlhbFJlbGF0aW9uLFxuICBMaXN0RGlyZWN0aW9uLFxuICBQYWdpbmdUeXBlLFxuICBGaWVsZHNUeXBlLFxuICBTeW1ib2xUeXBlXG59IGZyb20gJy4vY29uZmlnJ1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9RVUVSWV9JVEVNOiBQYXJ0aWFsPFF1ZXJ5SXRlbVR5cGU+ID0ge1xuICBpY29uOiBudWxsLFxuICBkaXNwbGF5TGFiZWw6IHRydWUsXG4gIHNxbEV4cHJPYmo6IG51bGwsXG4gIHVzZUF0dHJpYnV0ZUZpbHRlcjogdHJ1ZSxcbiAgdXNlU3BhdGlhbEZpbHRlcjogdHJ1ZSxcbiAgc3BhdGlhbE1hcFdpZGdldElkczogW10sXG4gIHNwYXRpYWxGaWx0ZXJUeXBlczogW10sXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUNyZWF0ZVRvb2xUeXBlczogW1xuICAgIENyZWF0ZVRvb2xUeXBlLlBvaW50LFxuICAgIENyZWF0ZVRvb2xUeXBlLlBvbHlsaW5lLFxuICAgIENyZWF0ZVRvb2xUeXBlLlBvbHlnb24sXG4gICAgQ3JlYXRlVG9vbFR5cGUuUmVjdGFuZ2xlLFxuICAgIENyZWF0ZVRvb2xUeXBlLkNpcmNsZVxuICBdLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXI6IGZhbHNlLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJEaXN0YW5jZTogMCxcbiAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdDogVW5pdFR5cGUuTWV0ZXJzLFxuICBzcGF0aWFsUmVsYXRpb25zOiBbU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdF0sXG4gIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzOiBbXSxcbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlU2VsZWN0VG9vbDogZmFsc2UsXG4gIHNwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcjogZmFsc2UsXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlOiAwLFxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJVbml0OiBVbml0VHlwZS5NZXRlcnMsXG4gIHJlc3VsdExpc3REaXJlY3Rpb246IExpc3REaXJlY3Rpb24uVmVydGljYWwsXG4gIHJlc3VsdFBhZ2luZ1N0eWxlOiBQYWdpbmdUeXBlLk11bHRpUGFnZSxcbiAgcmVzdWx0RmllbGRzVHlwZTogRmllbGRzVHlwZS5Qb3B1cFNldHRpbmcsXG4gIHJlc3VsdFN5bWJvbFR5cGU6IFN5bWJvbFR5cGUuRGVmYXVsdFN5bWJvbCxcbiAgcmVzdWx0Q3VzdG9tU3ltYm9sOiB7XG4gICAgYW5nbGU6IDAsXG4gICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgIG91dGxpbmU6IHtcbiAgICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgIHN0eWxlOiAnZXNyaVNMU1NvbGlkJyxcbiAgICAgIHR5cGU6ICdlc3JpU0xTJyxcbiAgICAgIHdpZHRoOiAxXG4gICAgfSxcbiAgICBzaXplOiA2LFxuICAgIHN0eWxlOiAnZXNyaVNNU0NpcmNsZScsXG4gICAgdHlwZTogJ2VzcmlTTVMnLFxuICAgIHhvZmZzZXQ6IDAsXG4gICAgeW9mZnNldDogMFxuICB9LFxuICByZXN1bHRBbGxvd0NoYW5nZVN5bWJvbDogZmFsc2UsXG4gIGFsbG93RXhwb3J0OiBmYWxzZSxcbiAgc29ydE9wdGlvbnM6IFtdLFxuICB6b29tVG9TZWxlY3RlZDogdHJ1ZSxcbiAgaXRlbVNpemVNYXA6IHtcbiAgICBhcnJhbmdlbWVudEhvcml6b250YWxQb3BwZXI6IHtcbiAgICAgIG1pblNpemU6IHsgd2lkdGg6IDMwMCwgaGVpZ2h0OiAzMDAgfSxcbiAgICAgIGRlZmF1bHRTaXplOiB7IHdpZHRoOiAzNjAsIGhlaWdodDogNDgwIH1cbiAgICB9XG4gIH1cbn1cblxuXG4iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTEgMXYxNGgxNFYxem05LjA4MiAxM2MtLjAwNS0uMDM3LS4xMTMtLjI3NC0uMTIyLS4zMDlhMS41IDEuNSAwIDAgMCAuNzE4LTEuMjY3IDEuMiAxLjIgMCAwIDAtLjA1My0uMzU4Yy4xNTItLjE3Ni4yNjMtLjM4My4zMjYtLjYwN3EuMDQ2LjAwMy4wOTMuMDAzYy4zLjAwMi41OTMtLjA5MS44MzYtLjI2NnEuMDYuMDY2LjEyNi4xMjRjLjQyLjQxMi45NzcuNjU0IDEuNTY0LjY4SDE0djJoLTMuOTE4TTE0IDExaC0uNDNhMS40NiAxLjQ2IDAgMCAxLS45MDYtLjQzM2MtLjI2NC0uMjMtLjI1OC0uNzgyLS42MTctLjc4Mi0uNDgyIDAtLjUyLjY3Ny0xLjAwMy42NzctLjIxOSAwLS4zOC0uMTc3LS41OTktLjE3Ny0uMTkzIDAtLjQ0NS4xMDItLjQ0NS4yOTN2LjUwMmMwIC40MjQtLjUwNi41MDgtLjUwNi45MzQgMCAuMTcxLjE4NC4yMzYuMTg0LjQxIDAgLjU4LS44OTMuNTAyLS44OTMgMS4wOCAwIC4xOTEuMjE1LjMwNS4yMTUuNDg2VjE0SDYuMzc1cS4wODctLjI0My4wOS0uNTAyYzAtLjU0Ny0xLjA0My0uMzkzLTEuMjA3LS43Mi0uNDA3LS44MTMuNjkzLTEuMDIyLjY5My0xLjY3MyAwLS4xNi0uMDgyLS40ODgtLjMzNC0uNTEzLS4zNTEtLjAzNS0uNDQzLjE1NC0uNzk3LjE1NGEuNDA2LjQwNiAwIDAgMS0uNDM3LS4zNmMwLS4zODYuMzA4LS41NjYuMzA4LS45NTIgMC0uMjUtLjEwMi0uMzkzLS4xMDItLjY0M2EuNjIuNjIgMCAwIDEgLjU5LS42NDNjLjMyMyAwIC40NjQuMjY0LjYxOC41NGEuNjQuNjQgMCAwIDAgLjYxNy4zMDhjLjQ5IDAgLjc5OC0uNjEuNzk4LS45NzdhLjQ3LjQ3IDAgMCAxIC40MzctLjQ4OGMuMzQ3IDAgLjQ3Ni4zNi44MjQuMzYuNTcgMCAuNTUtLjc1NiAxLjA1My0xLjAzLjYxOC0uMzMyLjQzOC0xLjA1Mi4zNi0xLjQ0LS4wMzItLjE2OS4yOS0uNS40NjQtLjQ4Ny43Mi4wNS40MTItLjU0LjQxMi0uODIzcTAtLjA3My4wMjItLjE0MmMuMTExLS4zMzIuNTk1LS40MzguNTk1LS44MzYgMC0uMjgxLS4yMzMtLjQxLS4yMzMtLjY5M2EuNjUuNjUgMCAwIDEgLjIyLS40NEgxNHpNMiAxNFYyaDguMjc4Yy0uMDEzLjA3Ny0uMTMyLjM1Ni0uMTMyLjQ0IDAgLjE5NC4wMzguMzg3LjExMi41NjdhMS42IDEuNiAwIDAgMC0uNDIyLjY0MyAxLjQgMS40IDAgMCAwLS4wNzQuNDQyIDEuNyAxLjcgMCAwIDAtLjUzNi40MyAxLjMyIDEuMzIgMCAwIDAtLjMyIDEuMDkxcS4wNDYuMjA1LjA2Ni40MTRhMiAyIDAgMCAwLS42NDkuNjcgMS40NiAxLjQ2IDAgMCAwLS42NzQtLjE2NiAxLjQ1IDEuNDUgMCAwIDAtMS4zODMgMS4wODYgMS40NCAxLjQ0IDAgMCAwLTEuMDg2LS40NjkgMS42MiAxLjYyIDAgMCAwLTEuNTkxIDEuNjQzYzAgLjI1NC4xMTMuMjkzLjA4NC41NzRzLS4yOS41MzUtLjI5IDEuMDIyYTEuMzcgMS4zNyAwIDAgMCAuOTg0IDEuMjkgMS41OCAxLjU4IDAgMCAwLS4wMDMgMS41NDljLjE0My4yODYuNjM2Ljc3NC41MzQuNzc0elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcImN1cnJlbnRDb2xvclxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMCAxMC41VjEyYTEgMSAwIDAgMCAxIDFoMS41di0xSDF2LTEuNXpNMi41IDFIMWExIDEgMCAwIDAtMSAxdjEuNWgxVjJoMS41ek0wIDguNWgxdi0zSDB6TTQuNSAxdjFoM1Yxem01IDB2MUgxMXYxLjVoMVYyYTEgMSAwIDAgMC0xLTF6TTYuMzE4IDEzLjY4MmE0LjUgNC41IDAgMCAwIDUuOTkxLjMzNGwxLjg0OCAxLjg0OC43MDctLjcwNy0xLjg0Ny0xLjg0OGE0LjUgNC41IDAgMSAwLTYuNjk5LjM3M20uNzA3LS43MDdhMy41IDMuNSAwIDEgMSA0Ljk1LTQuOTUgMy41IDMuNSAwIDAgMS00Ljk1IDQuOTVNOSAxM3YtMkg3di0xaDJWOGgxdjJoMnYxaC0ydjJ6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQge1xyXG4gIFJlYWN0LFxyXG4gIGpzeCxcclxuICBob29rc1xyXG59IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU2VsZWN0LCBOdW1lcmljSW5wdXQsIGRlZmF1bHRNZXNzYWdlcyBhcyBqaW11VUlNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgZGlzdGFuY2U6IG51bWJlclxyXG4gIHVuaXQ6IFVuaXRUeXBlXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQnVmZmVySW5wdXQgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgZGlzdGFuY2UgPSAwLCB1bml0ID0gVW5pdFR5cGUuTWV0ZXJzLCBvbkJ1ZmZlckNoYW5nZSB9ID0gcHJvcHNcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGppbXVVSU1lc3NhZ2VzLCBkZWZhdWx0TWVzc2FnZSlcclxuICBjb25zdCBbZCwgc2V0RF0gPSBSZWFjdC51c2VTdGF0ZShkaXN0YW5jZSlcclxuICBjb25zdCBbdSwgc2V0VV0gPSBSZWFjdC51c2VTdGF0ZSh1bml0KVxyXG4gIGNvbnN0IHF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFF1ZXJ5VGFza0NvbnRleHQpXHJcbiAgY29uc3QgcmVzZXRTeW1ib2xSZWYgPSBSZWFjdC51c2VSZWYocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbClcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcclxuICAgIGlmIChkaXN0YW5jZSAhPT0gZCkge1xyXG4gICAgICBzZXREKGRpc3RhbmNlKVxyXG4gICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKHVuaXQgIT09IHUpIHtcclxuICAgICAgc2V0VSh1bml0KVxyXG4gICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKGNoYW5nZWQpIHtcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoZGlzdGFuY2UsIHVuaXQpXHJcbiAgICB9XHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xyXG4gIH0sIFtkaXN0YW5jZSwgdW5pdF0pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAmJiBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICE9PSByZXNldFN5bWJvbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQgPSBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sXHJcbiAgICAgIHNldEQoZGlzdGFuY2UpXHJcbiAgICAgIHNldFUodW5pdClcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoZGlzdGFuY2UsIHVuaXQpXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIGRpc3RhbmNlLCB1bml0LCBvbkJ1ZmZlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURpc3RhbmNlQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHZhbHVlKSA9PiB7XHJcbiAgICBzZXREKHZhbHVlKVxyXG4gIH0sIFtdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEaXN0YW5jZUFjY2VwdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKHZhbHVlKSA9PiB7XHJcbiAgICBzZXREKHZhbHVlKVxyXG4gICAgb25CdWZmZXJDaGFuZ2UodmFsdWUsIHUpXHJcbiAgfSwgW29uQnVmZmVyQ2hhbmdlLCB1XSlcclxuXHJcbiAgY29uc3QgaGFuZGxlQnVmZmVyVW5pdENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XHJcbiAgICBzZXRVKGUudGFyZ2V0LnZhbHVlKVxyXG4gICAgb25CdWZmZXJDaGFuZ2UoZCwgZS50YXJnZXQudmFsdWUpXHJcbiAgfSwgW29uQnVmZmVyQ2hhbmdlLCBkXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAgPE51bWVyaWNJbnB1dFxyXG4gICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfVxyXG4gICAgICAgIGNsYXNzTmFtZT0nbXItMSdcclxuICAgICAgICB2YWx1ZT17ZH1cclxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlRGlzdGFuY2VDaGFuZ2V9XHJcbiAgICAgICAgb25BY2NlcHRWYWx1ZT17aGFuZGxlRGlzdGFuY2VBY2NlcHRlZH1cclxuICAgICAgLz5cclxuICAgICAgPFNlbGVjdFxyXG4gICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd1bml0Jyl9XHJcbiAgICAgICAgdmFsdWU9e3V9XHJcbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUJ1ZmZlclVuaXRDaGFuZ2V9XHJcbiAgICAgID5cclxuICAgICAgICB7T2JqZWN0LnZhbHVlcyhVbml0VHlwZSkubWFwKCh2YWx1ZSkgPT4gKFxyXG4gICAgICAgICAgPG9wdGlvbiBrZXk9e3ZhbHVlfSB2YWx1ZT17dmFsdWV9PlxyXG4gICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoYHVuaXRfJHt2YWx1ZX1gKX1cclxuICAgICAgICAgIDwvb3B0aW9uPlxyXG4gICAgICAgICkpfVxyXG4gICAgICA8L1NlbGVjdD5cclxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgKVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuLy8gVGhpcyBmaWxlIGlzIGR1cGxpY2F0ZWQgZnJvbSAnLi4vLi4vLi4vLi4vZmVhdHVyZS1pbmZvL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvJ1xuaW1wb3J0IHsgUmVhY3QsIGNzcywganN4LCB0eXBlIERhdGFTb3VyY2UsIGluamVjdEludGwsIHR5cGUgSW50bFNoYXBlLCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFJpZ2h0RmlsbGVkIH0gZnJvbSAnamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQnXG5pbXBvcnQgeyBEb3duRmlsbGVkIH0gZnJvbSAnamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bidcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGVudW0gTG9hZFN0YXR1cyB7XG4gIFBlbmRpbmcgPSAnUGVuZGluZycsXG4gIEZ1bGZpbGxlZCA9ICdGdWxmaWxsZWQnLFxuICBSZWplY3RlZCA9ICdSZWplY3RlZCdcbn1cblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZVxuICBncmFwaGljOiBfX2VzcmkuR3JhcGhpY1xuICBwb3B1cFRlbXBsYXRlOiBfX2VzcmkuUG9wdXBUZW1wbGF0ZVxuICBkZWZhdWx0UG9wdXBUZW1wbGF0ZTogX19lc3JpLlBvcHVwVGVtcGxhdGVcbiAgdG9nZ2xhYmxlPzogYm9vbGVhblxuICBleHBhbmRCeURlZmF1bHQ/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGxvYWRTdGF0dXM6IExvYWRTdGF0dXNcbiAgc2hvd0NvbnRlbnQ6IGJvb2xlYW5cbn1cblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gIC5lc3JpLXdpZGdldF9faGVhZGluZyB7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbSAhaW1wb3J0YW50O1xuICAgIGZvbnQtd2VpZ2h0OiA1MDAgIWltcG9ydGFudDtcbiAgICBtYXJnaW46IDA7XG4gICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLXRleHQpO1xuICB9XG5cbiAgLmVzcmktZmVhdHVyZV9fY29udGVudC1lbGVtZW50IHtcbiAgICBwYWRkaW5nOiAwO1xuICB9XG5cbiAgLmppbXUtYnRuLmV4cGFuZGVkIHtcbiAgICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0O1xuICB9XG4gIFxuICAvLyBMYXJnZXIgZXhwYW5kL2NvbGxhcHNlIGJ1dHRvbiBmb3IgYmV0dGVyIHRvdWNoIHRhcmdldHNcbiAgLmppbXUtYnRuW2FyaWEtbGFiZWwqPVwiZXhwYW5kXCJdLFxuICAuamltdS1idG5bYXJpYS1sYWJlbCo9XCJjb2xsYXBzZVwiXSB7XG4gICAgbWluLXdpZHRoOiAzMnB4O1xuICAgIG1pbi1oZWlnaHQ6IDMycHg7XG4gICAgcGFkZGluZzogNnB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgfVxuXG4gIC5lc3JpLWZlYXR1cmUuZXNyaS13aWRnZXQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICB9XG5gXG5cbmludGVyZmFjZSBFeHRyYVByb3BzIHtcbiAgaW50bDogSW50bFNoYXBlXG59XG5cbmNsYXNzIEZlYXR1cmVJbmZvIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcyAmIEV4dHJhUHJvcHMsIFN0YXRlPiB7XG4gIHByaXZhdGUgRmVhdHVyZTogdHlwZW9mIF9fZXNyaS5GZWF0dXJlXG4gIHByaXZhdGUgZmVhdHVyZTogX19lc3JpLkZlYXR1cmVcbiAgcHJpdmF0ZSByZWFkb25seSBmZWF0dXJlQ29udGFpbmVyOiBSZWFjdC5SZWZPYmplY3Q8SFRNTElucHV0RWxlbWVudCB8IG51bGw+XG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSwgZXhwYW5kQnlEZWZhdWx0IH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgcmVjb3JkSWQgPSB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lk9CSkVDVElEIHx8IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8ub2JqZWN0aWQgfHwgJ3Vua25vd24nXG4gICAgY29uc3QgaW5pdGlhbFNob3dDb250ZW50ID0gIXRvZ2dsYWJsZSB8fCBleHBhbmRCeURlZmF1bHRcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgIGV2ZW50OiAnRmVhdHVyZUluZm8tY29uc3RydWN0b3InLFxuICAgICAgcmVjb3JkSWQsXG4gICAgICB0b2dnbGFibGUsXG4gICAgICBleHBhbmRCeURlZmF1bHQsXG4gICAgICBpbml0aWFsU2hvd0NvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIHRoaXMuZmVhdHVyZUNvbnRhaW5lciA9IFJlYWN0LmNyZWF0ZVJlZigpXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHNob3dDb250ZW50OiBpbml0aWFsU2hvd0NvbnRlbnQsXG4gICAgICBsb2FkU3RhdHVzOiBMb2FkU3RhdHVzLlBlbmRpbmdcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlKClcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAocHJldlByb3BzOiBQcm9wcykge1xuICAgIGlmICh0aGlzLmZlYXR1cmUpIHtcbiAgICAgIGlmIChwcmV2UHJvcHMucG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB8fFxuICAgICAgICBwcmV2UHJvcHMuZ3JhcGhpYyAhPT0gdGhpcy5wcm9wcy5ncmFwaGljKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveUZlYXR1cmUoKVxuICAgICAgICB0aGlzLmNyZWF0ZUZlYXR1cmUoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlLnZpc2libGVFbGVtZW50cyA9IHRoaXMuZ2V0VmlzaWJsZUVsZW1lbnRzKClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU3luYyBleHBhbmRCeURlZmF1bHQgcHJvcCBjaGFuZ2VzICh3aGVuIHVzZXIgY2xpY2tzIEV4cGFuZCBBbGwvQ29sbGFwc2UgQWxsKVxuICAgIC8vIFRoaXMgZW5zdXJlcyBhbGwgaXRlbXMgcmVzcGVjdCB0aGUgZ2xvYmFsIGV4cGFuZC9jb2xsYXBzZSBzdGF0ZVxuICAgIGlmIChwcmV2UHJvcHMuZXhwYW5kQnlEZWZhdWx0ICE9PSB0aGlzLnByb3BzLmV4cGFuZEJ5RGVmYXVsdCkge1xuICAgICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSwgZXhwYW5kQnlEZWZhdWx0IH0gPSB0aGlzLnByb3BzXG4gICAgICBjb25zdCByZWNvcmRJZCA9IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8uT0JKRUNUSUQgfHwgdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5vYmplY3RpZCB8fCAndW5rbm93bidcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgIGV2ZW50OiAnZXhwYW5kQnlEZWZhdWx0LXByb3AtY2hhbmdlZCcsXG4gICAgICAgIHJlY29yZElkLFxuICAgICAgICBwcmV2RXhwYW5kQnlEZWZhdWx0OiBwcmV2UHJvcHMuZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgICBuZXdFeHBhbmRCeURlZmF1bHQ6IGV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgICAgdG9nZ2xhYmxlLFxuICAgICAgICBjdXJyZW50U2hvd0NvbnRlbnQ6IHRoaXMuc3RhdGUuc2hvd0NvbnRlbnQsXG4gICAgICAgIHdpbGxVcGRhdGVTdGF0ZTogdG9nZ2xhYmxlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmICh0b2dnbGFibGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dDb250ZW50OiBleHBhbmRCeURlZmF1bHQgfSwgKCkgPT4ge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdGZWF0dXJlSW5mby1zdGF0ZS11cGRhdGVkJyxcbiAgICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgICAgbmV3U2hvd0NvbnRlbnQ6IHRoaXMuc3RhdGUuc2hvd0NvbnRlbnQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBMb2cgYWxsIGNvbXBvbmVudERpZFVwZGF0ZSBjYWxscyB0byB0cmFjayByZW1vdW50c1xuICAgIGNvbnN0IHJlY29yZElkID0gdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5PQkpFQ1RJRCB8fCB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lm9iamVjdGlkIHx8ICd1bmtub3duJ1xuICAgIGlmIChwcmV2UHJvcHMuZ3JhcGhpYyAhPT0gdGhpcy5wcm9wcy5ncmFwaGljIHx8IFxuICAgICAgICBwcmV2UHJvcHMucG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlIHx8XG4gICAgICAgIHByZXZQcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICAgIGV2ZW50OiAnRmVhdHVyZUluZm8tcHJvcHMtY2hhbmdlZC1yZWNyZWF0ZScsXG4gICAgICAgIHJlY29yZElkLFxuICAgICAgICBncmFwaGljQ2hhbmdlZDogcHJldlByb3BzLmdyYXBoaWMgIT09IHRoaXMucHJvcHMuZ3JhcGhpYyxcbiAgICAgICAgcG9wdXBUZW1wbGF0ZUNoYW5nZWQ6IHByZXZQcm9wcy5wb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUsXG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlQ2hhbmdlZDogcHJldlByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlICE9PSB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlLFxuICAgICAgICBleHBhbmRCeURlZmF1bHQ6IHRoaXMucHJvcHMuZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgICBjdXJyZW50U2hvd0NvbnRlbnQ6IHRoaXMuc3RhdGUuc2hvd0NvbnRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBkZXN0cm95RmVhdHVyZSAoKSB7XG4gICAgdGhpcy5mZWF0dXJlICYmICF0aGlzLmZlYXR1cmUuZGVzdHJveWVkICYmIHRoaXMuZmVhdHVyZS5kZXN0cm95KClcbiAgfVxuXG4gIGdldFZpc2libGVFbGVtZW50cyAoKSB7XG4gICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgc2hvd0NvbnRlbnQgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCBleHBhbmRlZCA9IHRvZ2dsYWJsZSA/IHNob3dDb250ZW50IDogdHJ1ZVxuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogdHJ1ZSxcbiAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgZmllbGRzOiBleHBhbmRlZCxcbiAgICAgICAgdGV4dDogZXhwYW5kZWQsXG4gICAgICAgIG1lZGlhOiBleHBhbmRlZCxcbiAgICAgICAgYXR0YWNobWVudHM6IGV4cGFuZGVkXG4gICAgICB9LFxuICAgICAgbGFzdEVkaXRlZEluZm86IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgY3JlYXRlRmVhdHVyZSAoKSB7XG4gICAgbGV0IGZlYXR1cmVNb2R1bGVQcm9taXNlXG4gICAgaWYgKHRoaXMuRmVhdHVyZSkge1xuICAgICAgZmVhdHVyZU1vZHVsZVByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKVxuICAgIH0gZWxzZSB7XG4gICAgICBmZWF0dXJlTW9kdWxlUHJvbWlzZSA9IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xuICAgICAgICAnZXNyaS93aWRnZXRzL0ZlYXR1cmUnXG4gICAgICBdKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgICAgICBbXG4gICAgICAgICAgdGhpcy5GZWF0dXJlXG4gICAgICAgIF0gPSBtb2R1bGVzXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gZmVhdHVyZU1vZHVsZVByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBjb21wb25lbnQgaXMgc3RpbGwgbW91bnRlZCBiZWZvcmUgdHJ5aW5nIHRvIGFwcGVuZFxuICAgICAgLy8gVGhpcyBwcmV2ZW50cyBlcnJvcnMgd2hlbiBjb21wb25lbnQgdW5tb3VudHMgZHVyaW5nIGFzeW5jIG1vZHVsZSBsb2FkaW5nXG4gICAgICBpZiAoIXRoaXMuZmVhdHVyZUNvbnRhaW5lci5jdXJyZW50KSB7XG4gICAgICAgIC8vIENvbXBvbmVudCB3YXMgdW5tb3VudGVkLCBhYm9ydFxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQgJiYgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnamltdS13aWRnZXQnXG4gICAgICB0aGlzLmZlYXR1cmVDb250YWluZXIuY3VycmVudC5hcHBlbmRDaGlsZChjb250YWluZXIpXG5cbiAgICAgIGNvbnN0IG9yaWdpbkRTID0gdGhpcy5wcm9wcy5kYXRhU291cmNlLmdldE9yaWdpbkRhdGFTb3VyY2VzKClcbiAgICAgIGNvbnN0IHJvb3REYXRhU291cmNlID0gb3JpZ2luRFM/LlswXT8uZ2V0Um9vdERhdGFTb3VyY2UoKVxuXG4gICAgICB0aGlzLmRlc3Ryb3lGZWF0dXJlKClcbiAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5wcm9wcy5ncmFwaGljLmxheWVyIGFzIF9fZXNyaS5GZWF0dXJlTGF5ZXJcbiAgICAgIGlmICh0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5ncmFwaGljLnBvcHVwVGVtcGxhdGUgPSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGVcbiAgICAgIH0gZWxzZSBpZiAobGF5ZXIpIHtcbiAgICAgICAgLy8gc2V0IHBvcHVwVGVtcGxhdGUgd2l0aCBsYXllcidzIHBvcHVwVGVtcGxhdGUgb3IgZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgICAgdGhpcy5wcm9wcy5ncmFwaGljLnBvcHVwVGVtcGxhdGUgPSBsYXllci5wb3B1cFRlbXBsYXRlID8/IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHJvcHMuZ3JhcGhpYy5wb3B1cFRlbXBsYXRlID0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgfVxuICAgICAgaWYgKGxheWVyICYmICFsYXllci5wb3B1cFRlbXBsYXRlKSB7XG4gICAgICAgIGxheWVyLnBvcHVwVGVtcGxhdGUgPSB0aGlzLnByb3BzLnBvcHVwVGVtcGxhdGUgfHwgdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZVxuICAgICAgfVxuICAgICAgdGhpcy5mZWF0dXJlID0gbmV3IHRoaXMuRmVhdHVyZSh7XG4gICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZUVuYWJsZWQ6IHRydWUsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgc3BhdGlhbFJlZmVyZW5jZTogdGhpcy5wcm9wcy5kYXRhU291cmNlPy5sYXllcj8uc3BhdGlhbFJlZmVyZW5jZSB8fCBudWxsLFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgIG1hcDogcm9vdERhdGFTb3VyY2U/Lm1hcCB8fCBudWxsLFxuICAgICAgICBncmFwaGljOiB0aGlzLnByb3BzLmdyYXBoaWMsXG4gICAgICAgIHZpc2libGVFbGVtZW50czogdGhpcy5nZXRWaXNpYmxlRWxlbWVudHMoKVxuICAgICAgfSlcbiAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBsb2FkU3RhdHVzOiBMb2FkU3RhdHVzLkZ1bGZpbGxlZCB9KVxuICAgIH0pXG4gIH1cblxuICB0b2dnbGVFeHBhbmRlZCA9IChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93Q29udGVudDogIXRoaXMuc3RhdGUuc2hvd0NvbnRlbnQgfSlcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyB0b2dnbGFibGUgPSBmYWxzZSwgaW50bCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgc2hvd0NvbnRlbnQgfSA9IHRoaXMuc3RhdGVcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZlYXR1cmUtaW5mby1jb21wb25lbnQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBwLTEnIGNzcz17c3R5bGV9PlxuICAgICAgICB7dG9nZ2xhYmxlICYmIChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtpbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogc2hvd0NvbnRlbnQgPyAnY29sbGFwc2UnIDogJ2V4cGFuZCcgfSl9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2ppbXUtb3V0bGluZS1pbnNpZGUgZmxleC1zaHJpbmstMCcsIHsgZXhwYW5kZWQ6IHNob3dDb250ZW50IH0pfVxuICAgICAgICAgICAgdmFyaWFudD0ndGV4dCdcbiAgICAgICAgICAgIGNvbG9yPSdpbmhlcml0J1xuICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZUV4cGFuZGVkfVxuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIG1pbi13aWR0aDogMzJweDtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMzJweDtcbiAgICAgICAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3Nob3dDb250ZW50ID8gPERvd25GaWxsZWQgc2l6ZT0nbScvPiA6IDxSaWdodEZpbGxlZCBzaXplPSdtJyBhdXRvRmxpcC8+fVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC1ncm93LTEnIHJlZj17dGhpcy5mZWF0dXJlQ29udGFpbmVyfSAvPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGluamVjdEludGwoRmVhdHVyZUluZm8pXG5cblxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcywgdHlwZSBJbW11dGFibGVBcnJheSwgbG9kYXNoLCBsb2FkQXJjR0lTSlNBUElNb2R1bGUsIHV0aWxzLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcclxuaW1wb3J0IHsgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHR5cGUgeyBDcmVhdGVUb29sVHlwZSwgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCB7IEludGVyYWN0aXZlRHJhdyB9IGZyb20gJy4vaW50ZXJhY3RpdmUtZHJhdy10b29sJ1xyXG5pbXBvcnQgeyBCdWZmZXJJbnB1dCB9IGZyb20gJy4vYnVmZmVyLWlucHV0J1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgbWFwV2lkZ2V0SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XHJcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xyXG4gIGNyZWF0ZVRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XHJcbiAgZW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgYnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGJ1ZmZlclVuaXQ6IFVuaXRUeXBlXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG4gIG9uR2VvbWV0cnlDaGFuZ2U6IChnZW9tOiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2VvbWV0cnlGcm9tRHJhdyAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvbkdlb21ldHJ5Q2hhbmdlLCBjcmVhdGVUb29sVHlwZXMsIG1hcFdpZGdldElkcywgZW5hYmxlQnVmZmVyLCBidWZmZXJEaXN0YW5jZSwgYnVmZmVyVW5pdCwgb25CdWZmZXJDaGFuZ2UsIHdpZGdldElkIH0gPSBwcm9wc1xyXG4gIGNvbnN0IFtqaW11TWFwVmlldywgc2V0SmltdU1hcFZpZXddID0gUmVhY3QudXNlU3RhdGU8SmltdU1hcFZpZXc+KG51bGwpXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihqaW11VUlNZXNzYWdlcywgZGVmYXVsdE1lc3NhZ2UpXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG4gIGNvbnN0IGdldExheWVyRnVuUmVmID0gUmVhY3QudXNlUmVmPCgpID0+IF9fZXNyaS5HcmFwaGljc0xheWVyPihudWxsKVxyXG4gIGNvbnN0IGJ1ZmZlck9wZXJhdG9yUmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5idWZmZXJPcGVyYXRvcj4obnVsbClcclxuICBjb25zdCBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5nZW9kZXNpY0J1ZmZlck9wZXJhdG9yPihudWxsKVxyXG4gIGNvbnN0IGdlb21ldHJ5U2VydmljZVJlZiA9IFJlYWN0LnVzZVJlZjx7IGdlb21ldHJ5U2VydmljZTogX19lc3JpLmdlb21ldHJ5U2VydmljZSwgYnVmZmVyUGFyYW1ldGVyczogdHlwZW9mIF9fZXNyaS5CdWZmZXJQYXJhbWV0ZXJzIH0+KG51bGwpXHJcbiAgY29uc3QgZ2VvbWV0cnlSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLkdlb21ldHJ5PihudWxsKVxyXG4gIGNvbnN0IGJ1ZmZlckRpc3RhbmNlUmVmID0gUmVhY3QudXNlUmVmKGJ1ZmZlckRpc3RhbmNlKVxyXG4gIGNvbnN0IGJ1ZmZlclVuaXRSZWYgPSBSZWFjdC51c2VSZWYoYnVmZmVyVW5pdClcclxuICBjb25zdCBidWZmZXJlZEdyYXBoaWNSZWYgPSBSZWFjdC51c2VSZWY8X19lc3JpLkdyYXBoaWM+KG51bGwpXHJcblxyXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xyXG4gICAgaWYgKGVuYWJsZUJ1ZmZlcikge1xyXG4gICAgICAvLyBQYXJlbnQgY29tcG9uZW50IHF1ZXJ5LXRhc2stc3BhdGlhbC1mb3JtIHdpbGwgcmVzZXQgYnVmZmVyIHBhcmFtZXRlciB3aGVuIGZpbHRlciB0eXBlIGNoYW5nZXMsXHJcbiAgICAgIC8vIHNvIGRlZmVyIHRoZSBpbml0IGJ1ZmZlciBvcHRpb24gaW4gb3JkZXIgbm90IHRvIGJlIG92ZXJyaWRlIGJ5IGl0cyBwYXJlbnQuXHJcbiAgICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XHJcbiAgICAgICAgb25CdWZmZXJDaGFuZ2UoYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcclxuICAgICAgJ2VzcmkvR3JhcGhpYydcclxuICAgIF0pLnRoZW4oKG1vZHVsZXMpID0+IHtcclxuICAgICAgY29uc3QgR3JhcGhpYyA9IG1vZHVsZXNbMF1cclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQgPSBuZXcgR3JhcGhpYyh7XHJcbiAgICAgICAgc3ltYm9sOiB7XHJcbiAgICAgICAgICB0eXBlOiAnc2ltcGxlLWZpbGwnLFxyXG4gICAgICAgICAgY29sb3I6IFs1MSwgNTEsIDIwNCwgMC41XSxcclxuICAgICAgICAgIHN0eWxlOiAnc29saWQnLFxyXG4gICAgICAgICAgb3V0bGluZToge1xyXG4gICAgICAgICAgICBjb2xvcjogWzUxLCA1MSwgMjA0LCAwLjhdLFxyXG4gICAgICAgICAgICB3aWR0aDogMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgYXBwbHlCdWZmZXJFZmZlY3QgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWdlb21ldHJ5UmVmLmN1cnJlbnQgfHwgIWVuYWJsZUJ1ZmZlciB8fCBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50ID09PSAwKSB7XHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gbnVsbFxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGUgZW5kIHVzZXIgdXNlcyBhIHBvaW50IG9yIGxpbmUgcXVlcnkgZ2VvbWV0cnksIHRoZW4gdGhlIG5lZ2F0aXZlIGJ1ZmZlciB3aWxsIG5vdCB3b3JrIChzYW1lIGVmZmVjdCBhcyB0aGVyZSBpcyBubyBidWZmZXIpXHJcbiAgICBjb25zdCBpc1BvaW50TmVnYXRpdmVCdWZmZXIgPSAoZ2VvbWV0cnlSZWYuY3VycmVudD8udHlwZSA9PT0gJ3BvaW50JyB8fCBnZW9tZXRyeVJlZi5jdXJyZW50Py50eXBlID09PSAnbXVsdGlwb2ludCcpICYmIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPCAwXHJcbiAgICBjb25zdCBpc0xpbmVOZWdhdGl2ZUJ1ZmZlciA9IGdlb21ldHJ5UmVmLmN1cnJlbnQ/LnR5cGUgPT09ICdwb2x5bGluZScgJiYgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA8IDBcclxuICAgIGlmIChpc1BvaW50TmVnYXRpdmVCdWZmZXIgfHwgaXNMaW5lTmVnYXRpdmVCdWZmZXIpIHtcclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBudWxsXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGdlb21ldHJ5ID0gZ2VvbWV0cnlSZWYuY3VycmVudFxyXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmFyY2dpcy5jb20vamF2YXNjcmlwdC9sYXRlc3QvYXBpLXJlZmVyZW5jZS9lc3JpLWdlb21ldHJ5LWdlb21ldHJ5RW5naW5lLmh0bWwjYnVmZmVyXHJcbiAgICBpZiAoZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT8uaXNHZW9ncmFwaGljICYmICFnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLmlzV0dTODQpIHtcclxuICAgICAgY29uc3Qgc2VydmljZVVybCA9IHV0aWxzLmdldEdlb21ldHJ5U2VydmljZSgpXHJcbiAgICAgIGlmICghZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBjb25zdCBtb2R1bGVzID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXHJcbiAgICAgICAgICAnZXNyaS9yZXN0L2dlb21ldHJ5U2VydmljZScsXHJcbiAgICAgICAgICAnZXNyaS9yZXN0L3N1cHBvcnQvQnVmZmVyUGFyYW1ldGVycydcclxuICAgICAgICBdKVxyXG4gICAgICAgIGdlb21ldHJ5U2VydmljZVJlZi5jdXJyZW50ID0ge1xyXG4gICAgICAgICAgZ2VvbWV0cnlTZXJ2aWNlOiBtb2R1bGVzWzBdLFxyXG4gICAgICAgICAgYnVmZmVyUGFyYW1ldGVyczogbW9kdWxlc1sxXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zdCB7IGdlb21ldHJ5U2VydmljZSwgYnVmZmVyUGFyYW1ldGVyczogQnVmZmVyUGFyYW1ldGVycyB9ID0gZ2VvbWV0cnlTZXJ2aWNlUmVmLmN1cnJlbnRcclxuICAgICAgY29uc3QgcG9seWdvbnMgPSBhd2FpdCBnZW9tZXRyeVNlcnZpY2UuYnVmZmVyKHNlcnZpY2VVcmwsIG5ldyBCdWZmZXJQYXJhbWV0ZXJzKHtcclxuICAgICAgICBkaXN0YW5jZXM6IFtidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50XSxcclxuICAgICAgICB1bml0OiBsb2Rhc2gua2ViYWJDYXNlKGJ1ZmZlclVuaXRSZWYuY3VycmVudCkgYXMgYW55LFxyXG4gICAgICAgIGdlb2Rlc2ljOiB0cnVlLFxyXG4gICAgICAgIGJ1ZmZlclNwYXRpYWxSZWZlcmVuY2U6IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UsXHJcbiAgICAgICAgb3V0U3BhdGlhbFJlZmVyZW5jZTogZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSxcclxuICAgICAgICBnZW9tZXRyaWVzOiBbZ2VvbWV0cnldXHJcbiAgICAgIH0pKVxyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IHBvbHlnb25zWzBdXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT8uaXNXR1M4NCB8fCBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPy5pc1dlYk1lcmNhdG9yKSB7XHJcbiAgICAgICAgaWYgKCFnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudCA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZSgnZXNyaS9nZW9tZXRyeS9vcGVyYXRvcnMvZ2VvZGVzaWNCdWZmZXJPcGVyYXRvcicpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmlzTG9hZGVkKCkpIHtcclxuICAgICAgICAgIGF3YWl0IGdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5sb2FkKClcclxuICAgICAgICB9XHJcbiAgICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQuZXhlY3V0ZShcclxuICAgICAgICAgIGdlb21ldHJ5IGFzIF9fZXNyaS5HZW9tZXRyeVVuaW9uLFxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdW5pdDogbG9kYXNoLmtlYmFiQ2FzZShidWZmZXJVbml0UmVmLmN1cnJlbnQpIGFzIGFueVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIWJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGJ1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGUoJ2VzcmkvZ2VvbWV0cnkvb3BlcmF0b3JzL2J1ZmZlck9wZXJhdG9yJylcclxuICAgICAgICB9XHJcbiAgICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBidWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmV4ZWN1dGUoXHJcbiAgICAgICAgICBnZW9tZXRyeSBhcyBfX2VzcmkuR2VvbWV0cnlVbmlvbixcclxuICAgICAgICAgIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHVuaXQ6IGxvZGFzaC5rZWJhYkNhc2UoYnVmZmVyVW5pdFJlZi5jdXJyZW50KSBhcyBhbnlcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbZW5hYmxlQnVmZmVyXSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KCkucmVtb3ZlQWxsKClcclxuICAgICAgb25HZW9tZXRyeUNoYW5nZShudWxsKVxyXG4gICAgfVxyXG4gIH0sIFtxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sLCBvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykgPT4ge1xyXG4gICAgLy8gY2xlYXIgZHJhd2luZyBncmFwaGljcyBiZWZvcmUgc3dpdGNoaW5nIG1hcCB2aWV3XHJcbiAgICBjb25zdCBsYXllciA9IGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCgpXHJcbiAgICBpZiAobGF5ZXIpIHtcclxuICAgICAgbGF5ZXIucmVtb3ZlQWxsKClcclxuICAgICAgb25HZW9tZXRyeUNoYW5nZShudWxsKVxyXG4gICAgfVxyXG4gICAgc2V0SmltdU1hcFZpZXcoamltdU1hcFZpZXc/LnZpZXcgIT0gbnVsbCA/IGppbXVNYXBWaWV3IDogbnVsbClcclxuICB9LCBbb25HZW9tZXRyeUNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUJ1ZmZlckNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChkaXN0YW5jZSwgdW5pdCkgPT4ge1xyXG4gICAgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA9IGRpc3RhbmNlXHJcbiAgICBidWZmZXJVbml0UmVmLmN1cnJlbnQgPSB1bml0XHJcbiAgICBhcHBseUJ1ZmZlckVmZmVjdCgpXHJcbiAgICBvbkJ1ZmZlckNoYW5nZShkaXN0YW5jZSwgdW5pdClcclxuICB9LCBbb25CdWZmZXJDaGFuZ2UsIGFwcGx5QnVmZmVyRWZmZWN0XSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRHJhd0VuZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChncmFwaGljLCBnZXRMYXllckZ1biwgY2xlYXJBZnRlckFwcGx5KSA9PiB7XHJcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ID0gZ2V0TGF5ZXJGdW5cclxuICAgIGNvbnN0IGxheWVyID0gZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCAmJiBnZXRMYXllckZ1blJlZi5jdXJyZW50KClcclxuICAgIC8vIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgZ2VvbWV0cnkgaXMgdGhlIHNhbWUgYXMgdGhlIHByZXZpb3VzIG9uZSwgb25seSB0aGUgY2xlYXJBZnRlckFwcGx5IGlzIGNoYW5nZWQuXHJcbiAgICBpZiAoZ2VvbWV0cnlSZWYuY3VycmVudCAhPT0gZ3JhcGhpYz8uZ2VvbWV0cnkpIHtcclxuICAgICAgZ2VvbWV0cnlSZWYuY3VycmVudCA9IGdyYXBoaWM/Lmdlb21ldHJ5XHJcbiAgICAgIGFwcGx5QnVmZmVyRWZmZWN0KCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgaWYgKGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5KSB7XHJcbiAgICAgICAgICBsYXllcj8uYWRkKGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50KVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIG9uR2VvbWV0cnlDaGFuZ2UoZ3JhcGhpYz8uZ2VvbWV0cnksIGxheWVyLCBncmFwaGljLCBjbGVhckFmdGVyQXBwbHkpXHJcbiAgfSwgW29uR2VvbWV0cnlDaGFuZ2UsIGFwcGx5QnVmZmVyRWZmZWN0XSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAge1xyXG4gICAgICAgIG1hcFdpZGdldElkcz8ubWFwKChtYXBXaWRnZXRJZCwgeCkgPT4gKFxyXG4gICAgICAgICAgPEppbXVNYXBWaWV3Q29tcG9uZW50XHJcbiAgICAgICAgICAgIGtleT17eH0gdXNlTWFwV2lkZ2V0SWQ9e21hcFdpZGdldElkfSBvbkFjdGl2ZVZpZXdDaGFuZ2U9e2hhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSlcclxuICAgICAgfVxyXG4gICAgICB7amltdU1hcFZpZXc/LnZpZXcgJiYgKFxyXG4gICAgICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAgICAgIDxJbnRlcmFjdGl2ZURyYXdcclxuICAgICAgICAgICAgamltdU1hcFZpZXc9e2ppbXVNYXBWaWV3fVxyXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XHJcbiAgICAgICAgICAgIHRvb2xUeXBlcz17Y3JlYXRlVG9vbFR5cGVzfVxyXG4gICAgICAgICAgICBvbkRyYXdFbmQ9e2hhbmRsZURyYXdFbmR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAge2VuYWJsZUJ1ZmZlciAmJiAoXHJcbiAgICAgICAgICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGNsYXNzTmFtZT0ndGl0bGUzJyBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX0gY3NzPXtjc3NgbWFyZ2luLXRvcDogMC43NXJlbTtgfT5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZSc+e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfTwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggbXQtMSc+XHJcbiAgICAgICAgICAgICAgICA8QnVmZmVySW5wdXQgZGlzdGFuY2U9e2J1ZmZlckRpc3RhbmNlfSB1bml0PXtidWZmZXJVbml0fSBvbkJ1ZmZlckNoYW5nZT17aGFuZGxlQnVmZmVyQ2hhbmdlfS8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICApfVxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAgUmVhY3RSZWR1eCxcclxuICBqc3gsXHJcbiAgY3NzLFxyXG4gIEltbXV0YWJsZSxcclxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxyXG4gIHR5cGUgVXNlRGF0YVNvdXJjZSxcclxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxyXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxyXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXHJcbiAgaG9va3MsXHJcbiAgdHlwZSBEYXRhU291cmNlLFxyXG4gIHR5cGUgSU1TdGF0ZSxcclxuICBEYXRhU291cmNlU3RhdHVzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIE9wdGlvbiwgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVVSU1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgeyBCdWZmZXJJbnB1dCB9IGZyb20gJy4vYnVmZmVyLWlucHV0J1xyXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xyXG5cclxuY29uc3QgbWFyZ2luU3R5bGUgPSBjc3NgbWFyZ2luLXRvcDogMC43NXJlbTtgXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNwYXRpYWxSZWxhdGlvbnM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxSZWxhdGlvbj5cclxuICB1c2VEYXRhU291cmNlczogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT5cclxuICB1c2VSdW50aW1lRGF0YTogYm9vbGVhblxyXG4gIGVuYWJsZUJ1ZmZlcjogYm9vbGVhblxyXG4gIGJ1ZmZlckRpc3RhbmNlOiBudW1iZXJcclxuICBidWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIG9uU2VsZWN0aW9uQ2hhbmdlOiAoZ2VvbXM6IF9fZXNyaS5HZW9tZXRyeVtdKSA9PiB2b2lkXHJcbiAgb25SZWxhdGlvbkNoYW5nZTogKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB2b2lkXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSdW50aW1lRGF0YVNvdXJjZSAoKTogeyBbZHNJZDogc3RyaW5nXTogRGF0YVNvdXJjZSB9IHtcclxuICBjb25zdCByZXN1bHQgPSB7fVxyXG4gIGxldCBub3RFbXB0eSA9IGZhbHNlXHJcbiAgY29uc3QgZHNNYXAgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2VzKClcclxuICBPYmplY3Qua2V5cyhkc01hcCkuZm9yRWFjaChkc0lkID0+IHtcclxuICAgIGNvbnN0IGRzID0gZHNNYXBbZHNJZF1cclxuICAgIC8vIG9ubHkgaW5jbHVkZSB0aGUgZHMgdGhhdCBoYXMgZ2VvbWV0cnlcclxuICAgIGlmIChkcy5nZXRHZW9tZXRyeVR5cGUoKSAhPSBudWxsICYmICFkcy5pc0luQXBwQ29uZmlnKCkgJiYgZHMuZ2V0TWFpbkRhdGFTb3VyY2UoKS5pZCA9PT0gZHNJZCAmJiAhZHMuZ2V0RGF0YVNvdXJjZUpzb24oKS5pc091dHB1dEZyb21XaWRnZXQpIHtcclxuICAgICAgcmVzdWx0W2RzSWRdID0gZHNcclxuICAgICAgbm90RW1wdHkgPSB0cnVlXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIG5vdEVtcHR5ID8gcmVzdWx0IDogbnVsbFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2VvbWV0cnlGcm9tRGF0YVNvdXJjZSAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgeyBvblNlbGVjdGlvbkNoYW5nZSwgdXNlRGF0YVNvdXJjZXMgPSBbXSwgdXNlUnVudGltZURhdGEsIHNwYXRpYWxSZWxhdGlvbnMsIGVuYWJsZUJ1ZmZlciwgYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQsIG9uQnVmZmVyQ2hhbmdlLCBvblJlbGF0aW9uQ2hhbmdlIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oamltdVVJTWVzc2FnZXMsIGRlZmF1bHRNZXNzYWdlKVxyXG4gIGNvbnN0IFtjdXJyZW50RGF0YVNvdXJjZSwgc2V0Q3VycmVudERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGUodXNlRGF0YVNvdXJjZXNbMF0pXHJcbiAgY29uc3QgW3J1bnRpbWVEYXRhU291cmNlLCBzZXRSdW50aW1lRGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPigpXHJcbiAgY29uc3QgW2NvdW50LCBzZXRDb3VudF0gPSBSZWFjdC51c2VTdGF0ZSgwKVxyXG4gIGNvbnN0IFtjdXJyZW50UmVsYXRpb24sIHNldEN1cnJlbnRSZWxhdGlvbl0gPSBSZWFjdC51c2VTdGF0ZShzcGF0aWFsUmVsYXRpb25zPy5bMF0pXHJcbiAgY29uc3QgcXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoUXVlcnlUYXNrQ29udGV4dClcclxuICBjb25zdCByZXNldFN5bWJvbFJlZiA9IFJlYWN0LnVzZVJlZihxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sKVxyXG4gIGNvbnN0IHRyYW5zbGF0ZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKClcclxuXHJcbiAgY29uc3Qgc3BhdGlhbFJlbGF0aW9uT3B0aW9uczogQXJyYXk8eyB2YWx1ZTogc3RyaW5nLCBsYWJlbDogc3RyaW5nIH0+ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoU3BhdGlhbFJlbGF0aW9uKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gKHtcclxuICAgICAgdmFsdWUsXHJcbiAgICAgIGxhYmVsOiBnZXRJMThuTWVzc2FnZShgc3BhdGlhbFJlbGF0aW9uXyR7a2V5fWApXHJcbiAgICB9KSlcclxuICB9LCBbZ2V0STE4bk1lc3NhZ2VdKVxyXG5cclxuICBjb25zdCBsb2FkZWRVc2VEYXRhU291cmNlcyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBjb25zdCBsb2FkZWQgPSBbXVxyXG4gICAgdXNlRGF0YVNvdXJjZXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBpZiAoc3RhdGUuZGF0YVNvdXJjZXNJbmZvPy5baXRlbS5tYWluRGF0YVNvdXJjZUlkXT8uaW5zdGFuY2VTdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuQ3JlYXRlZCkge1xyXG4gICAgICAgIGxvYWRlZC5wdXNoKGl0ZW0uZGF0YVNvdXJjZUlkKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgaWYgKGxvYWRlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiBsb2FkZWQuam9pbignLCcpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gJydcclxuICB9KVxyXG5cclxuICBjb25zdCBudW1PZkRzID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcclxuICAgIGlmICghdXNlUnVudGltZURhdGEpIHtcclxuICAgICAgcmV0dXJuIDBcclxuICAgIH1cclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhzdGF0ZS5kYXRhU291cmNlc0luZm8gPz8ge30pLmZpbHRlcihkc0lkID0+IHN0YXRlLmRhdGFTb3VyY2VzSW5mb1tkc0lkXS5pbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVkKS5sZW5ndGhcclxuICB9KVxyXG5cclxuICBjb25zdCBydW50aW1lRGF0YVNvdXJjZXMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIGlmIChudW1PZkRzID4gMCkge1xyXG4gICAgICByZXR1cm4gZ2V0UnVudGltZURhdGFTb3VyY2UoKVxyXG4gICAgfVxyXG4gIH0sIFtudW1PZkRzXSlcclxuXHJcbiAgY29uc3QgbnVtT2ZSdW50aW1lRHMgPSBPYmplY3Qua2V5cyhydW50aW1lRGF0YVNvdXJjZXMgPz8ge30pLmxlbmd0aFxyXG5cclxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcclxuICAgIGlmIChzcGF0aWFsUmVsYXRpb25zPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2Uoc3BhdGlhbFJlbGF0aW9uc1swXSlcclxuICAgIH1cclxuICAgIGlmIChlbmFibGVCdWZmZXIpIHtcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQpXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICYmIHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgIT09IHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQpIHtcclxuICAgICAgcmVzZXRTeW1ib2xSZWYuY3VycmVudCA9IHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2xcclxuICAgICAgc2V0Q3VycmVudFJlbGF0aW9uKHNwYXRpYWxSZWxhdGlvbnM/LlswXSlcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShzcGF0aWFsUmVsYXRpb25zPy5bMF0pXHJcbiAgICB9XHJcbiAgfSwgW3F1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wsIG9uUmVsYXRpb25DaGFuZ2UsIHNwYXRpYWxSZWxhdGlvbnNdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFzcGF0aWFsUmVsYXRpb25zKSB7XHJcbiAgICAgIHNldEN1cnJlbnRSZWxhdGlvbihudWxsKVxyXG4gICAgfSBlbHNlIGlmICghc3BhdGlhbFJlbGF0aW9ucy5pbmNsdWRlcyhjdXJyZW50UmVsYXRpb24pKSB7XHJcbiAgICAgIHNldEN1cnJlbnRSZWxhdGlvbihzcGF0aWFsUmVsYXRpb25zWzBdKVxyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKHNwYXRpYWxSZWxhdGlvbnNbMF0pXHJcbiAgICB9XHJcbiAgfSwgW3NwYXRpYWxSZWxhdGlvbnMsIGN1cnJlbnRSZWxhdGlvbiwgb25SZWxhdGlvbkNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhcclxuICAgIChkc0lkOiBzdHJpbmcpID0+IHtcclxuICAgICAgY29uc3QgZHMgPSB1c2VEYXRhU291cmNlcy5maW5kKChpdGVtKSA9PiBpdGVtLmRhdGFTb3VyY2VJZCA9PT0gZHNJZClcclxuICAgICAgc2V0Q3VycmVudERhdGFTb3VyY2UoSW1tdXRhYmxlKGRzKSlcclxuICAgICAgc2V0UnVudGltZURhdGFTb3VyY2UobnVsbClcclxuICAgIH0sXHJcbiAgICBbdXNlRGF0YVNvdXJjZXNdXHJcbiAgKVxyXG5cclxuICBjb25zdCBoYW5kbGVSdW50aW1lRGF0YVNvdXJjZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxyXG4gICAgKGRzSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShkc0lkKVxyXG4gICAgICBzZXRSdW50aW1lRGF0YVNvdXJjZShkcylcclxuICAgICAgc2V0Q3VycmVudERhdGFTb3VyY2UobnVsbClcclxuICAgIH0sXHJcbiAgICBbXVxyXG4gIClcclxuXHJcbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShjdXJyZW50RGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkID8/IHJ1bnRpbWVEYXRhU291cmNlPy5pZClcclxuICAgIGNvbnN0IHJlY29yZHMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxyXG4gICAgaWYgKHJlY29yZHM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgZ2VvbWV0cmllcyA9IHJlY29yZHMubWFwKChyZWNvcmQpID0+IHJlY29yZC5nZXRKU0FQSUdlb21ldHJ5KCkpXHJcbiAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlKGdlb21ldHJpZXMpXHJcbiAgICAgIHNldENvdW50KHJlY29yZHMubGVuZ3RoKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb25TZWxlY3Rpb25DaGFuZ2UobnVsbClcclxuICAgICAgc2V0Q291bnQoMClcclxuICAgIH1cclxuICB9LCBbY3VycmVudERhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCwgcnVudGltZURhdGFTb3VyY2U/LmlkLCBvblNlbGVjdGlvbkNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGdldExhYmVsT2ZTcGF0aWFsUmVsYXRpb24gPSAocmVsYXRpb246IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcbiAgICByZXR1cm4gc3BhdGlhbFJlbGF0aW9uT3B0aW9ucy5maW5kKGl0ZW0gPT4gaXRlbS52YWx1ZSA9PT0gcmVsYXRpb24pLmxhYmVsXHJcbiAgfVxyXG5cclxuICBjb25zdCBoYW5kbGVTcGF0aWFsUmVsYXRpb25DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhlID0+IHtcclxuICAgIHNldEN1cnJlbnRSZWxhdGlvbihlLnRhcmdldC52YWx1ZSlcclxuICAgIG9uUmVsYXRpb25DaGFuZ2UoZS50YXJnZXQudmFsdWUpXHJcbiAgfSwgW29uUmVsYXRpb25DaGFuZ2VdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdj5cclxuICAgICAgPGRpdiBjc3M9e21hcmdpblN0eWxlfSBjbGFzc05hbWU9J3RpdGxlMyc+e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJMYXllcicpfTwvZGl2PlxyXG4gICAgICA8U2VsZWN0XHJcbiAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ2Nob29zZUZpbHRlckxheWVyJyl9XHJcbiAgICAgICAgdmFsdWU9e2N1cnJlbnREYXRhU291cmNlPy5kYXRhU291cmNlSWQgPz8gcnVudGltZURhdGFTb3VyY2U/LmlkfVxyXG4gICAgICA+XHJcbiAgICAgICAge251bU9mUnVudGltZURzID4gMCAmJiB1c2VEYXRhU291cmNlcy5sZW5ndGggPiAwICYmIDxPcHRpb24gaGVhZGVyPntnZXRJMThuTWVzc2FnZSgncHJlY29uZmlndXJlZCcpfTwvT3B0aW9uPn1cclxuICAgICAgICB7dXNlRGF0YVNvdXJjZXMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShpdGVtLmRhdGFTb3VyY2VJZClcclxuICAgICAgICAgIGlmIChsb2FkZWRVc2VEYXRhU291cmNlcy5pbmNsdWRlcyhpdGVtLmRhdGFTb3VyY2VJZCkgfHwgZHM/LmdldExhYmVsKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICA8T3B0aW9uIGtleT17aXRlbS5kYXRhU291cmNlSWR9IHZhbHVlPXtpdGVtLmRhdGFTb3VyY2VJZH0gb25DbGljaz17KCkgPT4geyBoYW5kbGVEYXRhU291cmNlQ2hhbmdlKGl0ZW0uZGF0YVNvdXJjZUlkKSB9fT5cclxuICAgICAgICAgICAgICB7ZHM/LmdldExhYmVsKCl9XHJcbiAgICAgICAgICAgICAgPC9PcHRpb24+XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxPcHRpb24ga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0+XHJcbiAgICAgICAgICAgICAge3RyYW5zbGF0ZSgnbG9hZGluZycpfVxyXG4gICAgICAgICAgICA8L09wdGlvbj5cclxuICAgICAgICAgIClcclxuICAgICAgICB9KX1cclxuICAgICAgICB7bnVtT2ZSdW50aW1lRHMgPiAwICYmIHVzZURhdGFTb3VyY2VzLmxlbmd0aCA+IDAgJiYgPE9wdGlvbiBkaXZpZGVyLz59XHJcbiAgICAgICAge251bU9mUnVudGltZURzID4gMCAmJiA8T3B0aW9uIGhlYWRlcj57Z2V0STE4bk1lc3NhZ2UoJ3J1bnRpbWUnKX08L09wdGlvbj59XHJcbiAgICAgICAge09iamVjdC5rZXlzKHJ1bnRpbWVEYXRhU291cmNlcyA/PyB7fSkubWFwKGRzSWQgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZHMgPSBydW50aW1lRGF0YVNvdXJjZXNbZHNJZF1cclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxPcHRpb24ga2V5PXtkc0lkfSB2YWx1ZT17ZHNJZH0gb25DbGljaz17KCkgPT4geyBoYW5kbGVSdW50aW1lRGF0YVNvdXJjZUNoYW5nZShkc0lkKSB9fT5cclxuICAgICAgICAgICAgICB7ZHMuZ2V0TGFiZWwoKX1cclxuICAgICAgICAgICAgPC9PcHRpb24+XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfSl9XHJcbiAgICAgIDwvU2VsZWN0PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbXQtMSBmb250LWl0YWxpYycgY3NzPXtjc3NgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLWhpbnQpO2B9PntnZXRJMThuTWVzc2FnZSgnc2VsZWN0ZWRSZWNvcmRzJywgeyBudW06IGNvdW50IH0pfTwvZGl2PlxyXG4gICAgICB7c3BhdGlhbFJlbGF0aW9ucz8ubGVuZ3RoID4gMCAmJiAoXHJcbiAgICAgICAgPGRpdiBjc3M9e21hcmdpblN0eWxlfT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlIHRpdGxlMyBtYi0wJz57Z2V0STE4bk1lc3NhZ2UoJ3JlbGF0aW9uc2hpcCcpfTwvZGl2PlxyXG4gICAgICAgICAgPFNlbGVjdFxyXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVsYXRpb25zaGlwJyl9XHJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50UmVsYXRpb259XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTcGF0aWFsUmVsYXRpb25DaGFuZ2V9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtzcGF0aWFsUmVsYXRpb25zLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aXRlbX0gdmFsdWU9e2l0ZW19PntnZXRMYWJlbE9mU3BhdGlhbFJlbGF0aW9uKGl0ZW0pfTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAge2VuYWJsZUJ1ZmZlciAmJiAoXHJcbiAgICAgICAgPGRpdiByb2xlPSdncm91cCcgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9IGNzcz17bWFyZ2luU3R5bGV9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpdGxlMyB0ZXh0LXRydW5jYXRlJz57Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IG10LTEnPlxyXG4gICAgICAgICAgICA8QnVmZmVySW5wdXQgZGlzdGFuY2U9e2J1ZmZlckRpc3RhbmNlfSB1bml0PXtidWZmZXJVbml0fSBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9Lz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCB1c2VEYXRhU291cmNlPXtjdXJyZW50RGF0YVNvdXJjZX0gZGF0YVNvdXJjZT17cnVudGltZURhdGFTb3VyY2V9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlfSAvPlxyXG4gICAgICB7dXNlRGF0YVNvdXJjZXMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBkYXRhc291cmNlIGlzIGNyZWF0ZWRcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQga2V5PXtpdGVtLmRhdGFTb3VyY2VJZH0gdXNlRGF0YVNvdXJjZT17aXRlbX0vPlxyXG4gICAgICAgIClcclxuICAgICAgfSl9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBqc3gsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZSwgdHlwZSBJbW11dGFibGVBcnJheSB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcclxuaW1wb3J0IHR5cGUgeyBDcmVhdGVUb29sVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIG1hcFdpZGdldElkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxyXG4gIGNyZWF0ZVRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XHJcbiAgb25HZW9tZXRyeUNoYW5nZTogKGdlb206IF9fZXNyaS5HZW9tZXRyeSwgbGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllciwgZ3JhcGhpYz86IF9fZXNyaS5HcmFwaGljLCBjbGVhckFmdGVyQXBwbHk/OiBib29sZWFuKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyeUZyb21NYXAgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgb25HZW9tZXRyeUNoYW5nZSwgbWFwV2lkZ2V0SWRzIH0gPSBwcm9wc1xyXG4gIGNvbnN0IFtqaW11TWFwVmlldywgc2V0SmltdU1hcFZpZXddID0gUmVhY3QudXNlU3RhdGU8SmltdU1hcFZpZXc+KG51bGwpXHJcbiAgY29uc3QgUG9seWdvblJlZiA9IFJlYWN0LnVzZVJlZjx0eXBlb2YgX19lc3JpLlBvbHlnb24+KG51bGwpXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoamltdU1hcFZpZXc/LnZpZXcpIHtcclxuICAgICAgbGV0IGhhbmRsZXI6IElIYW5kbGVcclxuICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlKCdlc3JpL2NvcmUvcmVhY3RpdmVVdGlscycpLnRoZW4oKHJlYWN0aXZlVXRpbHM6IF9fZXNyaS5yZWFjdGl2ZVV0aWxzKSA9PiB7XHJcbiAgICAgICAgaGFuZGxlciA9IHJlYWN0aXZlVXRpbHMud2F0Y2goKCkgPT4gamltdU1hcFZpZXcudmlldy5leHRlbnQsIChleHRlbnQ6IF9fZXNyaS5FeHRlbnQpID0+IHtcclxuICAgICAgICAgIGlmIChQb2x5Z29uUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgb25HZW9tZXRyeUNoYW5nZShQb2x5Z29uUmVmLmN1cnJlbnQuZnJvbUV4dGVudChleHRlbnQpKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2VzcmkvZ2VvbWV0cnkvUG9seWdvbiddKS50aGVuKG1vZHVsZXMgPT4ge1xyXG4gICAgICAgICAgICAgIFBvbHlnb25SZWYuY3VycmVudCA9IG1vZHVsZXNbMF1cclxuICAgICAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKFBvbHlnb25SZWYuY3VycmVudC5mcm9tRXh0ZW50KGV4dGVudCkpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvLyBzZXQgaW5pdGlhbCBleHRlbnRcclxuICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlKGppbXVNYXBWaWV3LnZpZXcuZXh0ZW50KVxyXG4gICAgICB9KVxyXG4gICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICBoYW5kbGVyLnJlbW92ZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgW2ppbXVNYXBWaWV3LCBvbkdlb21ldHJ5Q2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykgPT4ge1xyXG4gICAgc2V0SmltdU1hcFZpZXcoamltdU1hcFZpZXc/LnZpZXcgIT0gbnVsbCA/IGppbXVNYXBWaWV3IDogbnVsbClcclxuICB9LCBbXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxSZWFjdC5GcmFnbWVudD5cclxuICAgICAge1xyXG4gICAgICAgIG1hcFdpZGdldElkcz8ubWFwKChtYXBXaWRnZXRJZCwgeCkgPT4gKFxyXG4gICAgICAgICAgPEppbXVNYXBWaWV3Q29tcG9uZW50XHJcbiAgICAgICAgICAgIGtleT17eH0gdXNlTWFwV2lkZ2V0SWQ9e21hcFdpZGdldElkfSBvbkFjdGl2ZVZpZXdDaGFuZ2U9e2hhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSlcclxuICAgICAgfVxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICApXHJcbn1cclxuIiwiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nIGluIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIFByb3ZpZGVzIGhpZ2hsaWdodGluZyB0aGF0IHdvcmtzIGluZGVwZW5kZW50bHkgb2YgbGF5ZXIgdmlzaWJpbGl0eS5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7IERhdGFTb3VyY2UsIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgRGF0YVNvdXJjZU1hbmFnZXIgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8vIEdsb2JhbCBzZXF1ZW5jZSBjb3VudGVyIGZvciBncmFwaGljcyBvcGVyYXRpb25zIHRvIHRyYWNrIHRpbWluZyBhY3Jvc3MgY2FsbHNcbmxldCBvcGVyYXRpb25TZXF1ZW5jZSA9IDBcblxuLyoqXG4gKiBHZXRzIHRoZSBtYXAgdmlldyBmcm9tIGEgZGF0YSBzb3VyY2UncyBvcmlnaW4gbGF5ZXIuXG4gKiBBY2Nlc3NlcyB0aGUgdmlldyB0aHJvdWdoIHRoZSBGZWF0dXJlTGF5ZXIncyB2aWV3IHByb3BlcnR5LlxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAob3IgYW55IGRhdGEgc291cmNlKVxuICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gTWFwVmlldyBvciBTY2VuZVZpZXcsIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWRcbik6IFByb21pc2U8X19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbD4ge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGlmICghb3V0cHV0RFMpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utbm8tb3V0cHV0RFMnLFxuICAgICAgc2VxLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBHZXQgb3JpZ2luIGRhdGEgc291cmNlIHRvIGFjY2VzcyB0aGUgbGF5ZXJcbiAgICBjb25zdCBvcmlnaW5EYXRhU291cmNlcyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClcbiAgICBjb25zdCBvcmlnaW5EUyA9IG9yaWdpbkRhdGFTb3VyY2VzPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIFxuICAgIGlmICghb3JpZ2luRFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLW5vLW9yaWdpbkRTJyxcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gQWNjZXNzIHRoZSBGZWF0dXJlTGF5ZXIgZnJvbSB0aGUgZGF0YSBzb3VyY2VcbiAgICBjb25zdCBsYXllciA9IChvcmlnaW5EUyBhcyBhbnkpLmxheWVyIHx8IChvcmlnaW5EUyBhcyBhbnkpLmdldExheWVyPy4oKVxuICAgIGlmICghbGF5ZXIpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLW5vLWxheWVyJyxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gTG9nIGxheWVyIHByb3BlcnRpZXMgdG8gdW5kZXJzdGFuZCBzdHJ1Y3R1cmVcbiAgICBjb25zdCBsYXllcktleXMgPSBPYmplY3Qua2V5cyhsYXllcikuZmlsdGVyKGtleSA9PiBcbiAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgdHlwZW9mIChsYXllciBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICApLnNsaWNlKDAsIDIwKSAvLyBMaW1pdCB0byBmaXJzdCAyMCBwcm9wZXJ0aWVzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLWxheWVyLWluc3BlY3Rpb24nLFxuICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgIGxheWVyVHlwZTogbGF5ZXIudHlwZSB8fCAndW5rbm93bicsXG4gICAgICBsYXllcktleXM6IGxheWVyS2V5cyxcbiAgICAgIGhhc0xheWVyTWFwOiAhIShsYXllciBhcyBhbnkpLm1hcCxcbiAgICAgIGhhc0xheWVyVmlldzogISEobGF5ZXIgYXMgYW55KS52aWV3LFxuICAgICAgaGFzTGF5ZXJQYXJlbnQ6ICEhKGxheWVyIGFzIGFueSkucGFyZW50LFxuICAgICAgbGF5ZXJNYXBUeXBlOiAobGF5ZXIgYXMgYW55KS5tYXAgPyB0eXBlb2YgKGxheWVyIGFzIGFueSkubWFwIDogJ25vbmUnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIENoZWNrIGxheWVyLnBhcmVudCBmb3IgbWFwL3ZpZXcgYWNjZXNzIChzaW5jZSBoYXNMYXllclBhcmVudCBpcyB0cnVlKVxuICAgIGNvbnN0IHBhcmVudCA9IChsYXllciBhcyBhbnkpLnBhcmVudFxuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIC8vIExvZyBwYXJlbnQgcHJvcGVydGllc1xuICAgICAgY29uc3QgcGFyZW50S2V5cyA9IE9iamVjdC5rZXlzKHBhcmVudCkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICAgIHR5cGVvZiAocGFyZW50IGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgKS5zbGljZSgwLCAyMClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtbGF5ZXItcGFyZW50LWluc3BlY3Rpb24nLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgIHBhcmVudFR5cGU6IHBhcmVudC50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgcGFyZW50S2V5czogcGFyZW50S2V5cyxcbiAgICAgICAgaGFzUGFyZW50TWFwOiAhIShwYXJlbnQgYXMgYW55KS5tYXAsXG4gICAgICAgIGhhc1BhcmVudFZpZXc6ICEhKHBhcmVudCBhcyBhbnkpLnZpZXcsXG4gICAgICAgIGhhc1BhcmVudFZpZXdzOiAhIShwYXJlbnQgYXMgYW55KS52aWV3cyxcbiAgICAgICAgcGFyZW50Vmlld3NMZW5ndGg6IChwYXJlbnQgYXMgYW55KS52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc1BhcmVudEV4dGVudDogISEocGFyZW50IGFzIGFueSkuZXh0ZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFRyeSB0byBnZXQgdmlldyBmcm9tIHBhcmVudFxuICAgICAgaWYgKChwYXJlbnQgYXMgYW55KS52aWV3KSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSAocGFyZW50IGFzIGFueSkudmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci1wYXJlbnQtdmlldycsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB2aWV3XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRyeSB0byBnZXQgbWFwIGZyb20gcGFyZW50IGFuZCB0aGVuIHZpZXdcbiAgICAgIGNvbnN0IHBhcmVudE1hcCA9IChwYXJlbnQgYXMgYW55KS5tYXBcbiAgICAgIGlmIChwYXJlbnRNYXApIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHBhcmVudE1hcC52aWV3IHx8IFxuICAgICAgICAgICAgICAgICAgICAgKHBhcmVudE1hcC52aWV3cz8uZ2V0SXRlbUF0Py4oMCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAocGFyZW50TWFwLnZpZXdzPy5sZW5ndGggPiAwID8gcGFyZW50TWFwLnZpZXdzWzBdIDogbnVsbClcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItcGFyZW50LW1hcCcsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIHJldHVybiB2aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFBhcmVudCBtaWdodCBCRSB0aGUgdmlldyAoY2hlY2sgaWYgaXQgaGFzIHZpZXctbGlrZSBwcm9wZXJ0aWVzKVxuICAgICAgaWYgKHBhcmVudC50eXBlID09PSAnbWFwJyB8fCBwYXJlbnQudHlwZSA9PT0gJ3NjZW5lJyB8fCAocGFyZW50IGFzIGFueSkuZXh0ZW50KSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItcGFyZW50LWlzLXZpZXcnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgIHZpZXdUeXBlOiBwYXJlbnQudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBwYXJlbnQgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IG11bHRpcGxlIGFwcHJvYWNoZXMgdG8gZ2V0IHRoZSB2aWV3OlxuICAgIC8vIDEuIExheWVyIG1pZ2h0IGhhdmUgYSBkaXJlY3QgdmlldyBwcm9wZXJ0eVxuICAgIGlmICgobGF5ZXIgYXMgYW55KS52aWV3KSB7XG4gICAgICBjb25zdCB2aWV3ID0gKGxheWVyIGFzIGFueSkudmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLXZpZXcnLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdmlld1xuICAgIH1cblxuICAgIC8vIDIuIFRyeSB0byBnZXQgbWFwIGZyb20gbGF5ZXIgYW5kIHRoZW4gdmlldyBmcm9tIG1hcFxuICAgIGNvbnN0IG1hcCA9IChsYXllciBhcyBhbnkpLm1hcCB8fCBcbiAgICAgICAgICAgICAgICAobGF5ZXIgYXMgYW55KS5wYXJlbnQ/Lm1hcCB8fFxuICAgICAgICAgICAgICAgIChsYXllciBhcyBhbnkpLl9fbWFwIHx8XG4gICAgICAgICAgICAgICAgKGxheWVyIGFzIGFueSkuX21hcFxuICAgIFxuICAgIGlmIChtYXApIHtcbiAgICAgIC8vIExvZyBtYXAgcHJvcGVydGllc1xuICAgICAgY29uc3QgbWFwS2V5cyA9IE9iamVjdC5rZXlzKG1hcCkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICAgIHR5cGVvZiAobWFwIGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgKS5zbGljZSgwLCAyMClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2UtbWFwLWZvdW5kJyxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICBtYXBJZDogbWFwLmlkIHx8ICd1bmtub3duJyxcbiAgICAgICAgbWFwS2V5czogbWFwS2V5cyxcbiAgICAgICAgaGFzTWFwVmlldzogISFtYXAudmlldyxcbiAgICAgICAgaGFzTWFwVmlld3M6ICEhKG1hcC52aWV3cyksXG4gICAgICAgIG1hcFZpZXdzTGVuZ3RoOiBtYXAudmlld3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IHZpZXcgPSBtYXAudmlldyB8fCBcbiAgICAgICAgICAgICAgICAgICAobWFwLnZpZXdzPy5nZXRJdGVtQXQ/LigwKSkgfHxcbiAgICAgICAgICAgICAgICAgICAobWFwLnZpZXdzPy5sZW5ndGggPiAwID8gbWFwLnZpZXdzWzBdIDogbnVsbCkgfHxcbiAgICAgICAgICAgICAgICAgICAobWFwLnZpZXdzICYmIG1hcC52aWV3cy5sZW5ndGggPiAwID8gbWFwLnZpZXdzLmdldEl0ZW1BdCgwKSA6IG51bGwpXG4gICAgICBcbiAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItbWFwJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMy4gVHJ5IHRvIGdldCByb290IGRhdGEgc291cmNlIGFuZCBhY2Nlc3MgbWFwIGZyb20gdGhlcmVcbiAgICBjb25zdCByb290RFMgPSBvcmlnaW5EUy5nZXRSb290RGF0YVNvdXJjZSgpXG4gICAgaWYgKHJvb3REUykge1xuICAgICAgY29uc3Qgcm9vdE1hcCA9IChyb290RFMgYXMgYW55KS5nZXRNYXA/LigpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgIChyb290RFMgYXMgYW55KS5tYXAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAocm9vdERTIGFzIGFueSkuX19tYXAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAocm9vdERTIGFzIGFueSkuX21hcFxuICAgICAgXG4gICAgICBpZiAocm9vdE1hcCkge1xuICAgICAgICAvLyBMb2cgcm9vdCBtYXAgcHJvcGVydGllc1xuICAgICAgICBjb25zdCByb290TWFwS2V5cyA9IE9iamVjdC5rZXlzKHJvb3RNYXApLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICAgICAgdHlwZW9mIChyb290TWFwIGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1yb290LW1hcC1mb3VuZCcsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgcm9vdERTSWQ6IHJvb3REUy5pZCxcbiAgICAgICAgICByb290RFNUeXBlOiByb290RFMudHlwZSxcbiAgICAgICAgICByb290TWFwSWQ6IHJvb3RNYXAuaWQgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIHJvb3RNYXBLZXlzOiByb290TWFwS2V5cyxcbiAgICAgICAgICBoYXNSb290TWFwVmlldzogISFyb290TWFwLnZpZXcsXG4gICAgICAgICAgaGFzUm9vdE1hcFZpZXdzOiAhIShyb290TWFwLnZpZXdzKSxcbiAgICAgICAgICByb290TWFwVmlld3NMZW5ndGg6IHJvb3RNYXAudmlld3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgY29uc3QgdmlldyA9IHJvb3RNYXAudmlldyB8fCBcbiAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzPy5nZXRJdGVtQXQ/LigwKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzPy5sZW5ndGggPiAwID8gcm9vdE1hcC52aWV3c1swXSA6IG51bGwpIHx8XG4gICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cyAmJiByb290TWFwLnZpZXdzLmxlbmd0aCA+IDAgPyByb290TWFwLnZpZXdzLmdldEl0ZW1BdCgwKSA6IG51bGwpXG4gICAgICAgIFxuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1yb290RFMnLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIHJldHVybiB2aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBMb2cgcm9vdCBEUyBwcm9wZXJ0aWVzIHRvIHNlZSB3aGF0J3MgYXZhaWxhYmxlXG4gICAgICAgIGNvbnN0IHJvb3REU0tleXMgPSBPYmplY3Qua2V5cyhyb290RFMpLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICAgIWtleS5zdGFydHNXaXRoKCdfJykgJiYgXG4gICAgICAgICAgdHlwZW9mIChyb290RFMgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkuc2xpY2UoMCwgMjApXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXJvb3QtZHMtaW5zcGVjdGlvbicsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgcm9vdERTSWQ6IHJvb3REUy5pZCxcbiAgICAgICAgICByb290RFNUeXBlOiByb290RFMudHlwZSxcbiAgICAgICAgICByb290RFNLZXlzOiByb290RFNLZXlzLFxuICAgICAgICAgIGhhc0dldE1hcDogdHlwZW9mIChyb290RFMgYXMgYW55KS5nZXRNYXAgPT09ICdmdW5jdGlvbicsXG4gICAgICAgICAgaGFzTWFwOiAhIShyb290RFMgYXMgYW55KS5tYXAsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLW5vLXZpZXcnLFxuICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgIGhhc0xheWVyTWFwOiAhIW1hcCxcbiAgICAgIGhhc1Jvb3REUzogISFyb290RFMsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLWVycm9yJyxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBkZWZhdWx0IGhpZ2hsaWdodCBzeW1ib2wgYmFzZWQgb24gZ2VvbWV0cnkgdHlwZS5cbiAqIFVzZXMgdGhlIG1hcCdzIGFjdHVhbCBoaWdobGlnaHQgY29sb3IgZnJvbSBoaWdobGlnaHRPcHRpb25zIHRvIG1hdGNoIHN0YW5kYXJkIHNlbGVjdGlvbiBhcHBlYXJhbmNlLlxuICovXG5mdW5jdGlvbiBnZXREZWZhdWx0SGlnaGxpZ2h0U3ltYm9sKFxuICBnZW9tZXRyeVR5cGU6IHN0cmluZyxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBfX2VzcmkuU3ltYm9sIHtcbiAgLy8gR2V0IGRlZmF1bHQgaGlnaGxpZ2h0IGNvbG9yIGZyb20gdmlldydzIGhpZ2hsaWdodE9wdGlvbnNcbiAgY29uc3QgaGlnaGxpZ2h0T3B0aW9ucyA9IChtYXBWaWV3LmhpZ2hsaWdodE9wdGlvbnMgfHwge30pIGFzIF9fZXNyaS5IaWdobGlnaHRPcHRpb25zXG4gIFxuICAvLyBFeHRyYWN0IGNvbG9yIC0gY291bGQgYmUgYXJyYXkgW1IsRyxCLEFdIG9yIENvbG9yIG9iamVjdFxuICBsZXQgaGlnaGxpZ2h0Q29sb3I6IG51bWJlcltdIHwgbnVsbCA9IG51bGxcbiAgXG4gIGlmIChoaWdobGlnaHRPcHRpb25zLmNvbG9yKSB7XG4gICAgLy8gSWYgaXQncyBhIENvbG9yIG9iamVjdCwgY29udmVydCB0byBhcnJheVxuICAgIGlmICh0eXBlb2YgaGlnaGxpZ2h0T3B0aW9ucy5jb2xvciA9PT0gJ29iamVjdCcgJiYgJ3RvUmdiYScgaW4gaGlnaGxpZ2h0T3B0aW9ucy5jb2xvcikge1xuICAgICAgaGlnaGxpZ2h0Q29sb3IgPSAoaGlnaGxpZ2h0T3B0aW9ucy5jb2xvciBhcyBhbnkpLnRvUmdiYSgpXG4gICAgfSBcbiAgICAvLyBJZiBpdCdzIGFscmVhZHkgYW4gYXJyYXlcbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGhpZ2hsaWdodE9wdGlvbnMuY29sb3IpKSB7XG4gICAgICBoaWdobGlnaHRDb2xvciA9IGhpZ2hsaWdodE9wdGlvbnMuY29sb3JcbiAgICB9XG4gIH1cbiAgXG4gIC8vIElmIG5vIGNvbG9yIGluIGhpZ2hsaWdodE9wdGlvbnMsIHVzZSB0aGUgQXJjR0lTIGRvY3VtZW50ZWQgZGVmYXVsdDogY3lhbiBbMCwgMjU1LCAyNTVdXG4gIGlmICghaGlnaGxpZ2h0Q29sb3IpIHtcbiAgICBoaWdobGlnaHRDb2xvciA9IFswLCAyNTUsIDI1NSwgMS4wXSAvLyBGdWxsIG9wYWNpdHkgZGVmYXVsdFxuICB9XG4gIFxuICAvLyBFbnN1cmUgd2UgaGF2ZSA0IGVsZW1lbnRzIFtSLCBHLCBCLCBBXVxuICBjb25zdCBiYXNlQ29sb3IgPSBoaWdobGlnaHRDb2xvci5zbGljZSgwLCAzKVxuICBjb25zdCBiYXNlQWxwaGEgPSBoaWdobGlnaHRDb2xvci5sZW5ndGggPj0gNCA/IGhpZ2hsaWdodENvbG9yWzNdIDogMS4wXG4gIFxuICAvLyBHZXQgZmlsbCBvcGFjaXR5IGZyb20gaGlnaGxpZ2h0T3B0aW9ucyBvciB1c2UgZGVmYXVsdFxuICBjb25zdCBmaWxsT3BhY2l0eSA9IGhpZ2hsaWdodE9wdGlvbnMuZmlsbE9wYWNpdHkgIT09IHVuZGVmaW5lZCBcbiAgICA/IGhpZ2hsaWdodE9wdGlvbnMuZmlsbE9wYWNpdHkgXG4gICAgOiAwLjI1IC8vIERlZmF1bHQgMjUlIG9wYWNpdHkgZm9yIGZpbGxcbiAgY29uc3QgZmlsbENvbG9yID0gWy4uLmJhc2VDb2xvciwgZmlsbE9wYWNpdHldXG4gIFxuICAvLyBHZXQgaGFsbyBvcGFjaXR5IG9yIHVzZSBkZWZhdWx0IC0gZm9yIG91dGxpbmVzIGFuZCBsaW5lc1xuICBjb25zdCBoYWxvT3BhY2l0eSA9IGhpZ2hsaWdodE9wdGlvbnMuaGFsb09wYWNpdHkgIT09IHVuZGVmaW5lZFxuICAgID8gaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eVxuICAgIDogYmFzZUFscGhhIC8vIFVzZSB0aGUgY29sb3IncyBhbHBoYSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSAxLjBcbiAgY29uc3Qgb3V0bGluZUNvbG9yID0gWy4uLmJhc2VDb2xvciwgaGFsb09wYWNpdHldXG4gIFxuICAvLyBGb3IgbGluZXMsIHVzZSBmdWxsIG9wYWNpdHkgdG8gZW5zdXJlIHZpc2liaWxpdHlcbiAgY29uc3QgbGluZU9wYWNpdHkgPSBoaWdobGlnaHRPcHRpb25zLmhhbG9PcGFjaXR5ICE9PSB1bmRlZmluZWRcbiAgICA/IE1hdGgubWF4KGhpZ2hsaWdodE9wdGlvbnMuaGFsb09wYWNpdHksIDAuOCkgLy8gQXQgbGVhc3QgODAlIG9wYWNpdHlcbiAgICA6IGJhc2VBbHBoYSAvLyBVc2UgdGhlIGNvbG9yJ3MgYWxwaGEsIG9yIGRlZmF1bHQgdG8gMS4wXG4gIGNvbnN0IGxpbmVDb2xvciA9IFsuLi5iYXNlQ29sb3IsIGxpbmVPcGFjaXR5XVxuICBcbiAgc3dpdGNoIChnZW9tZXRyeVR5cGUpIHtcbiAgICBjYXNlICdwb2ludCc6XG4gICAgY2FzZSAnbXVsdGlwb2ludCc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLW1hcmtlcicsXG4gICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgIG91dGxpbmU6IHtcbiAgICAgICAgICBjb2xvcjogb3V0bGluZUNvbG9yLFxuICAgICAgICAgIHdpZHRoOiAyXG4gICAgICAgIH0sXG4gICAgICAgIHNpemU6IDEyXG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZU1hcmtlclN5bWJvbFxuICAgICAgXG4gICAgY2FzZSAncG9seWxpbmUnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NpbXBsZS1saW5lJyxcbiAgICAgICAgY29sb3I6IGxpbmVDb2xvciwgLy8gVXNlIGxpbmVDb2xvciB3aXRoIHByb3BlciBvcGFjaXR5XG4gICAgICAgIHdpZHRoOiA0IC8vIEluY3JlYXNlZCB3aWR0aCBmb3IgdmlzaWJpbGl0eVxuICAgICAgfSBhcyB1bmtub3duIGFzIF9fZXNyaS5TaW1wbGVMaW5lU3ltYm9sXG4gICAgICBcbiAgICBjYXNlICdwb2x5Z29uJzpcbiAgICBjYXNlICdtdWx0aXBvbHlnb24nOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NpbXBsZS1maWxsJyxcbiAgICAgICAgY29sb3I6IGZpbGxDb2xvcixcbiAgICAgICAgb3V0bGluZToge1xuICAgICAgICAgIGNvbG9yOiBvdXRsaW5lQ29sb3IsXG4gICAgICAgICAgd2lkdGg6IDJcbiAgICAgICAgfVxuICAgICAgfSBhcyB1bmtub3duIGFzIF9fZXNyaS5TaW1wbGVGaWxsU3ltYm9sXG4gICAgICBcbiAgICBkZWZhdWx0OlxuICAgICAgLy8gRmFsbGJhY2sgdG8gcG9seWdvbiBzeW1ib2xcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzaW1wbGUtZmlsbCcsXG4gICAgICAgIGNvbG9yOiBmaWxsQ29sb3IsXG4gICAgICAgIG91dGxpbmU6IHtcbiAgICAgICAgICBjb2xvcjogb3V0bGluZUNvbG9yLFxuICAgICAgICAgIHdpZHRoOiAyXG4gICAgICAgIH1cbiAgICAgIH0gYXMgdW5rbm93biBhcyBfX2VzcmkuU2ltcGxlRmlsbFN5bWJvbFxuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBvciBnZXRzIGFuIGV4aXN0aW5nIGdyYXBoaWNzIGxheWVyIGZvciB0aGUgd2lkZ2V0LlxuICogVXNlcyBhIHVuaXF1ZSBJRCBiYXNlZCBvbiB3aWRnZXQgSUQgdG8gZW5zdXJlIG9uZSBsYXllciBwZXIgd2lkZ2V0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8X19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBudWxsPiB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgY29uc3QgbGF5ZXJJZCA9IGBxdWVyeXNpbXBsZS1oaWdobGlnaHQtJHt3aWRnZXRJZH1gXG4gIFxuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIGxheWVyIGFscmVhZHkgZXhpc3RzXG4gICAgY29uc3QgZXhpc3RpbmdMYXllciA9IG1hcFZpZXcubWFwLmxheWVycy5maW5kKGxheWVyID0+IGxheWVyLmlkID09PSBsYXllcklkKSBhcyBfX2VzcmkuR3JhcGhpY3NMYXllclxuICAgIGlmIChleGlzdGluZ0xheWVyKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NyZWF0ZU9yR2V0R3JhcGhpY3NMYXllci1mb3VuZC1leGlzdGluZycsXG4gICAgICAgIHNlcSxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGxheWVySWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVybiBleGlzdGluZ0xheWVyXG4gICAgfVxuXG4gICAgLy8gTG9hZCBHcmFwaGljc0xheWVyIG1vZHVsZVxuICAgIGNvbnN0IFtHcmFwaGljc0xheWVyXSA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL2xheWVycy9HcmFwaGljc0xheWVyJ10pXG4gICAgXG4gICAgLy8gQ3JlYXRlIG5ldyBncmFwaGljcyBsYXllclxuICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSBuZXcgR3JhcGhpY3NMYXllcih7XG4gICAgICBpZDogbGF5ZXJJZCxcbiAgICAgIHRpdGxlOiBgUXVlcnlTaW1wbGUgSGlnaGxpZ2h0cyAoJHt3aWRnZXRJZH0pYCxcbiAgICAgIGxpc3RNb2RlOiAnaGlkZScsIC8vIEhpZGUgZnJvbSBsYXllciBsaXN0XG4gICAgICB2aXNpYmxlOiB0cnVlXG4gICAgfSlcbiAgICBcbiAgICAvLyBBZGQgdG8gbWFwXG4gICAgbWFwVmlldy5tYXAuYWRkKGdyYXBoaWNzTGF5ZXIpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY3JlYXRlT3JHZXRHcmFwaGljc0xheWVyLWNyZWF0ZWQnLFxuICAgICAgc2VxLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBsYXllcklkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICByZXR1cm4gZ3JhcGhpY3NMYXllclxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NyZWF0ZU9yR2V0R3JhcGhpY3NMYXllci1lcnJvcicsXG4gICAgICBzZXEsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGxheWVySWQsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8qKlxuICogQWRkcyBoaWdobGlnaHQgZ3JhcGhpY3MgdG8gdGhlIGdyYXBoaWNzIGxheWVyIHVzaW5nIGRlZmF1bHQgbWFwIGhpZ2hsaWdodCBjb2xvci5cbiAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBHcmFwaGljc0xheWVyIG1vZHVsZSBpcyBsb2FkZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRIaWdobGlnaHRHcmFwaGljcyhcbiAgZ3JhcGhpY3NMYXllcjogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgaWYgKCFncmFwaGljc0xheWVyIHx8ICFyZWNvcmRzIHx8IHJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnYWRkSGlnaGxpZ2h0R3JhcGhpY3Mtc2tpcHBlZCcsXG4gICAgICBzZXEsXG4gICAgICByZWFzb246ICFncmFwaGljc0xheWVyID8gJ25vLWdyYXBoaWNzLWxheWVyJyA6ICduby1yZWNvcmRzJyxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVyblxuICB9XG5cbiAgLy8gTG9nIGV4aXN0aW5nIHN0YXRlIEJFRk9SRSBhZGRpbmcgLSB2ZXJpZnkgYXNzdW1wdGlvbiBhYm91dCBkdXBsaWNhdGVzXG4gIGNvbnN0IGV4aXN0aW5nR3JhcGhpY3NDb3VudCA9IGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MubGVuZ3RoXG4gIGNvbnN0IGV4aXN0aW5nUmVjb3JkSWRzOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IGV4aXN0aW5nUmVjb3JkSWRTZXQgPSBuZXcgU2V0PHN0cmluZz4oKVxuICBcbiAgZ3JhcGhpY3NMYXllci5ncmFwaGljcy5mb3JFYWNoKGdyYXBoaWMgPT4ge1xuICAgIGNvbnN0IHJlY29yZElkID0gZ3JhcGhpYy5hdHRyaWJ1dGVzPy5yZWNvcmRJZFxuICAgIGlmIChyZWNvcmRJZCkge1xuICAgICAgZXhpc3RpbmdSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICAgIGV4aXN0aW5nUmVjb3JkSWRTZXQuYWRkKHJlY29yZElkKVxuICAgIH1cbiAgfSlcblxuICAvLyBMb2cgd2hhdCB3ZSdyZSB0cnlpbmcgdG8gYWRkXG4gIGNvbnN0IGluY29taW5nUmVjb3JkSWRzID0gcmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpXG5cbiAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICBldmVudDogJ2FkZEhpZ2hsaWdodEdyYXBoaWNzLWJlZm9yZS1hZGQnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgZXhpc3RpbmdHcmFwaGljc0NvdW50LFxuICAgIGV4aXN0aW5nUmVjb3JkSWRzOiBleGlzdGluZ1JlY29yZElkcy5zbGljZSgwLCAyMCksIC8vIExpbWl0IHRvIGZpcnN0IDIwIGZvciByZWFkYWJpbGl0eVxuICAgIGV4aXN0aW5nUmVjb3JkSWRzQ291bnQ6IGV4aXN0aW5nUmVjb3JkSWRzLmxlbmd0aCxcbiAgICBpbmNvbWluZ1JlY29yZElkczogaW5jb21pbmdSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMFxuICAgIGluY29taW5nUmVjb3JkSWRzQ291bnQ6IGluY29taW5nUmVjb3JkSWRzLmxlbmd0aCxcbiAgICBkdXBsaWNhdGVSZWNvcmRJZHM6IGluY29taW5nUmVjb3JkSWRzLmZpbHRlcihpZCA9PiBleGlzdGluZ1JlY29yZElkU2V0LmhhcyhpZCkpLnNsaWNlKDAsIDIwKSxcbiAgICBkdXBsaWNhdGVDb3VudDogaW5jb21pbmdSZWNvcmRJZHMuZmlsdGVyKGlkID0+IGV4aXN0aW5nUmVjb3JkSWRTZXQuaGFzKGlkKSkubGVuZ3RoLFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICB9KVxuXG4gIC8vIExvYWQgR3JhcGhpYyBtb2R1bGVcbiAgY29uc3QgW0dyYXBoaWNdID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2VzcmkvR3JhcGhpYyddKVxuXG4gIGxldCBhZGRlZENvdW50ID0gMFxuICBsZXQgc2tpcHBlZENvdW50ID0gMFxuICBsZXQgZHVwbGljYXRlQ291bnQgPSAwXG4gIGNvbnN0IGFkZGVkUmVjb3JkSWRzOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IHNraXBwZWRSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgZHVwbGljYXRlUmVjb3JkSWRzOiBzdHJpbmdbXSA9IFtdXG5cbiAgcmVjb3Jkcy5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyByZWNvcmQgSUQgYWxyZWFkeSBleGlzdHMgaW4gZ3JhcGhpY3MgbGF5ZXJcbiAgICAgIGlmIChleGlzdGluZ1JlY29yZElkU2V0LmhhcyhyZWNvcmRJZCkpIHtcbiAgICAgICAgZHVwbGljYXRlQ291bnQrK1xuICAgICAgICBkdXBsaWNhdGVSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2FkZEhpZ2hsaWdodEdyYXBoaWNzLWR1cGxpY2F0ZS1kZXRlY3RlZCcsXG4gICAgICAgICAgc2VxLFxuICAgICAgICAgIHJlY29yZElkLFxuICAgICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIC8vIFNraXAgYWRkaW5nIGR1cGxpY2F0ZVxuICAgICAgfVxuXG4gICAgICBjb25zdCBncmFwaGljID0gcmVjb3JkLmZlYXR1cmUgYXMgX19lc3JpLkdyYXBoaWNcbiAgICAgIGlmICghZ3JhcGhpYyB8fCAhZ3JhcGhpYy5nZW9tZXRyeSkge1xuICAgICAgICBza2lwcGVkQ291bnQrK1xuICAgICAgICBza2lwcGVkUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgZ2VvbWV0cnkgdHlwZSBmcm9tIGdyYXBoaWNcbiAgICAgIGNvbnN0IGdlb21ldHJ5VHlwZSA9IGdyYXBoaWMuZ2VvbWV0cnkudHlwZVxuXG4gICAgICAvLyBDcmVhdGUgc3ltYm9sIHVzaW5nIGRlZmF1bHQgaGlnaGxpZ2h0IGNvbG9yXG4gICAgICBjb25zdCBzeW1ib2wgPSBnZXREZWZhdWx0SGlnaGxpZ2h0U3ltYm9sKGdlb21ldHJ5VHlwZSwgbWFwVmlldylcblxuICAgICAgLy8gQ3JlYXRlIG5ldyBncmFwaGljIHdpdGggaGlnaGxpZ2h0IHN5bWJvbFxuICAgICAgY29uc3QgaGlnaGxpZ2h0R3JhcGhpYyA9IG5ldyBHcmFwaGljKHtcbiAgICAgICAgZ2VvbWV0cnk6IGdyYXBoaWMuZ2VvbWV0cnksXG4gICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgcmVjb3JkSWQ6IHJlY29yZElkLFxuICAgICAgICAgIHNvdXJjZTogJ3F1ZXJ5c2ltcGxlLWhpZ2hsaWdodCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGdyYXBoaWNzTGF5ZXIuaWQucmVwbGFjZSgncXVlcnlzaW1wbGUtaGlnaGxpZ2h0LScsICcnKVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBncmFwaGljc0xheWVyLmFkZChoaWdobGlnaHRHcmFwaGljKVxuICAgICAgYWRkZWRDb3VudCsrXG4gICAgICBhZGRlZFJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgXG4gICAgICAvLyBBZGQgdG8gdHJhY2tpbmcgc2V0IHRvIHByZXZlbnQgZHVwbGljYXRlcyB3aXRoaW4gdGhpcyBiYXRjaFxuICAgICAgZXhpc3RpbmdSZWNvcmRJZFNldC5hZGQocmVjb3JkSWQpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHNraXBwZWRDb3VudCsrXG4gICAgICBza2lwcGVkUmVjb3JkSWRzLnB1c2gocmVjb3JkLmdldElkKCkpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2FkZEhpZ2hsaWdodEdyYXBoaWNzLXJlY29yZC1lcnJvcicsXG4gICAgICAgIHNlcSxcbiAgICAgICAgcmVjb3JkSWQ6IHJlY29yZC5nZXRJZCgpLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9KVxuXG4gIC8vIExvZyBmaW5hbCBzdGF0ZSBBRlRFUiBhZGRpbmdcbiAgY29uc3QgZmluYWxHcmFwaGljc0NvdW50ID0gZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGhcbiAgY29uc3QgZmluYWxSZWNvcmRJZHM6IHN0cmluZ1tdID0gW11cbiAgZ3JhcGhpY3NMYXllci5ncmFwaGljcy5mb3JFYWNoKGdyYXBoaWMgPT4ge1xuICAgIGNvbnN0IHJlY29yZElkID0gZ3JhcGhpYy5hdHRyaWJ1dGVzPy5yZWNvcmRJZFxuICAgIGlmIChyZWNvcmRJZCkge1xuICAgICAgZmluYWxSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICB9XG4gIH0pXG5cbiAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICBldmVudDogJ2FkZEhpZ2hsaWdodEdyYXBoaWNzLWNvbXBsZXRlJyxcbiAgICBzZXEsXG4gICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgYWRkZWRDb3VudCxcbiAgICBza2lwcGVkQ291bnQsXG4gICAgZHVwbGljYXRlQ291bnQsXG4gICAgYWRkZWRSZWNvcmRJZHM6IGFkZGVkUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSwgLy8gTGltaXQgdG8gZmlyc3QgMjBcbiAgICBza2lwcGVkUmVjb3JkSWRzOiBza2lwcGVkUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSxcbiAgICBkdXBsaWNhdGVSZWNvcmRJZHM6IGR1cGxpY2F0ZVJlY29yZElkcy5zbGljZSgwLCAyMCksXG4gICAgZXhpc3RpbmdHcmFwaGljc0NvdW50LFxuICAgIGZpbmFsR3JhcGhpY3NDb3VudCxcbiAgICBleHBlY3RlZEZpbmFsQ291bnQ6IGV4aXN0aW5nR3JhcGhpY3NDb3VudCArIGFkZGVkQ291bnQsXG4gICAgZmluYWxSZWNvcmRJZHM6IGZpbmFsUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSwgLy8gTGltaXQgdG8gZmlyc3QgMjBcbiAgICBmaW5hbFJlY29yZElkc0NvdW50OiBmaW5hbFJlY29yZElkcy5sZW5ndGgsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pXG59XG5cbi8qKlxuICogUmVtb3ZlcyBoaWdobGlnaHQgZ3JhcGhpY3MgZnJvbSB0aGUgZ3JhcGhpY3MgbGF5ZXIgYnkgcmVjb3JkIElEcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZ2hsaWdodEdyYXBoaWNzKFxuICBncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcixcbiAgcmVjb3JkSWRzOiBzdHJpbmdbXVxuKTogdm9pZCB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgaWYgKCFncmFwaGljc0xheWVyIHx8ICFyZWNvcmRJZHMgfHwgcmVjb3JkSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ3JlbW92ZUhpZ2hsaWdodEdyYXBoaWNzLXNraXBwZWQnLFxuICAgICAgc2VxLFxuICAgICAgcmVhc29uOiAhZ3JhcGhpY3NMYXllciA/ICduby1ncmFwaGljcy1sYXllcicgOiAnbm8tcmVjb3JkLWlkcycsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCByZWNvcmRJZFNldCA9IG5ldyBTZXQocmVjb3JkSWRzKVxuICBsZXQgcmVtb3ZlZENvdW50ID0gMFxuXG4gIC8vIEZpbmQgYW5kIHJlbW92ZSBncmFwaGljcyBtYXRjaGluZyByZWNvcmQgSURzXG4gIGNvbnN0IGdyYXBoaWNzVG9SZW1vdmU6IF9fZXNyaS5HcmFwaGljW10gPSBbXVxuICBncmFwaGljc0xheWVyLmdyYXBoaWNzLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgY29uc3QgcmVjb3JkSWQgPSBncmFwaGljLmF0dHJpYnV0ZXM/LnJlY29yZElkXG4gICAgaWYgKHJlY29yZElkICYmIHJlY29yZElkU2V0LmhhcyhyZWNvcmRJZCkpIHtcbiAgICAgIGdyYXBoaWNzVG9SZW1vdmUucHVzaChncmFwaGljKVxuICAgIH1cbiAgfSlcblxuICBncmFwaGljc1RvUmVtb3ZlLmZvckVhY2goZ3JhcGhpYyA9PiB7XG4gICAgZ3JhcGhpY3NMYXllci5yZW1vdmUoZ3JhcGhpYylcbiAgICByZW1vdmVkQ291bnQrK1xuICB9KVxuXG4gIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmVIaWdobGlnaHRHcmFwaGljcy1jb21wbGV0ZScsXG4gICAgc2VxLFxuICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICByZW1vdmVkQ291bnQsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pXG59XG5cbi8qKlxuICogQ2xlYXJzIGFsbCBoaWdobGlnaHQgZ3JhcGhpY3MgZnJvbSB0aGUgZ3JhcGhpY3MgbGF5ZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckdyYXBoaWNzTGF5ZXIoZ3JhcGhpY3NMYXllcjogX19lc3JpLkdyYXBoaWNzTGF5ZXIpOiB2b2lkIHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIWdyYXBoaWNzTGF5ZXIpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjbGVhckdyYXBoaWNzTGF5ZXItc2tpcHBlZCcsXG4gICAgICBzZXEsXG4gICAgICByZWFzb246ICduby1ncmFwaGljcy1sYXllcicsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgZ3JhcGhpY3NDb3VudCA9IGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MubGVuZ3RoXG4gIGdyYXBoaWNzTGF5ZXIucmVtb3ZlQWxsKClcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAnY2xlYXJHcmFwaGljc0xheWVyLWNvbXBsZXRlJyxcbiAgICBzZXEsXG4gICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgIGdyYXBoaWNzUmVtb3ZlZDogZ3JhcGhpY3NDb3VudCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBncmFwaGljcyBsYXllciBmcm9tIHRoZSBtYXAgYW5kIGNsZWFucyB1cCByZWZlcmVuY2VzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYW51cEdyYXBoaWNzTGF5ZXIoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogdm9pZCB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgY29uc3QgbGF5ZXJJZCA9IGBxdWVyeXNpbXBsZS1oaWdobGlnaHQtJHt3aWRnZXRJZH1gXG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSBtYXBWaWV3Lm1hcC5sYXllcnMuZmluZChsYXllciA9PiBsYXllci5pZCA9PT0gbGF5ZXJJZCkgYXMgX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgICBpZiAoZ3JhcGhpY3NMYXllcikge1xuICAgICAgLy8gQ2xlYXIgYWxsIGdyYXBoaWNzIGZpcnN0XG4gICAgICBncmFwaGljc0xheWVyLnJlbW92ZUFsbCgpXG4gICAgICBcbiAgICAgIC8vIFJlbW92ZSBsYXllciBmcm9tIG1hcFxuICAgICAgbWFwVmlldy5tYXAucmVtb3ZlKGdyYXBoaWNzTGF5ZXIpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYW51cEdyYXBoaWNzTGF5ZXItY29tcGxldGUnLFxuICAgICAgICBzZXEsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBsYXllcklkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYW51cEdyYXBoaWNzTGF5ZXItbm90LWZvdW5kJyxcbiAgICAgICAgc2VxLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbGF5ZXJJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjbGVhbnVwR3JhcGhpY3NMYXllci1lcnJvcicsXG4gICAgICBzZXEsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGxheWVySWQsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfVxufVxuXG4iLCJpbXBvcnQgeyB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuaW50ZXJmYWNlIEFjY3VtdWxhdGVkUmVjb3Jkc0NhbGxiYWNrcyB7XG4gIG9uTW9kZUNoYW5nZT86IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB2b2lkXG4gIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPzogKHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10pID0+IHZvaWRcbn1cblxuLyoqXG4gKiBVdGlsaXR5IHRvIG1hbmFnZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFuZCByZXN1bHRzIG1vZGUgc3RhdGUuXG4gKiBcbiAqIENlbnRyYWxpemVzIGFjY3VtdWxhdGVkIHJlY29yZHMgbWFuYWdlbWVudCBsb2dpYyBmb3IgdGhlIHdpZGdldC5cbiAqIEhhbmRsZXMgcmVzdWx0cyBtb2RlIGNoYW5nZXMsIGFjY3VtdWxhdGVkIHJlY29yZHMgdXBkYXRlcywgYW5kIG1vZGUgcmVzZXQgbG9naWMuXG4gKiBcbiAqIFBhcnQgb2YgQ2h1bmsgNTogQWNjdW11bGF0ZWQgUmVjb3JkcyBNYW5hZ2VtZW50IGV4dHJhY3Rpb24uXG4gKiBcbiAqIE5vdGU6IFRoaXMgaXMgYSB1dGlsaXR5IGNsYXNzIChub3QgYSBob29rKSB0byB3b3JrIHdpdGggY2xhc3MgY29tcG9uZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIge1xuICBwcml2YXRlIHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlID0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgcHJpdmF0ZSBhY2N1bXVsYXRlZFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICBwcml2YXRlIGNhbGxiYWNrcz86IEFjY3VtdWxhdGVkUmVjb3Jkc0NhbGxiYWNrc1xuXG4gIC8qKlxuICAgKiBTZXRzIGNhbGxiYWNrcyBmb3IgbW9kZSBjaGFuZ2UgYW5kIGFjY3VtdWxhdGVkIHJlY29yZHMgY2hhbmdlIGV2ZW50cy5cbiAgICogXG4gICAqIEBwYXJhbSBjYWxsYmFja3MgLSBDYWxsYmFja3MgZm9yIG1vZGUgY2hhbmdlIGFuZCBhY2N1bXVsYXRlZCByZWNvcmRzIGNoYW5nZVxuICAgKi9cbiAgc2V0Q2FsbGJhY2tzKGNhbGxiYWNrczogQWNjdW11bGF0ZWRSZWNvcmRzQ2FsbGJhY2tzKTogdm9pZCB7XG4gICAgdGhpcy5jYWxsYmFja3MgPSBjYWxsYmFja3NcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IHJlc3VsdHMgbW9kZS5cbiAgICogXG4gICAqIEByZXR1cm5zIEN1cnJlbnQgcmVzdWx0cyBtb2RlXG4gICAqL1xuICBnZXRSZXN1bHRzTW9kZSgpOiBTZWxlY3Rpb25UeXBlIHtcbiAgICByZXR1cm4gdGhpcy5yZXN1bHRzTW9kZVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAgICogXG4gICAqIEByZXR1cm5zIEN1cnJlbnQgYWNjdW11bGF0ZWQgcmVjb3JkcyBhcnJheVxuICAgKi9cbiAgZ2V0QWNjdW11bGF0ZWRSZWNvcmRzKCk6IEZlYXR1cmVEYXRhUmVjb3JkW10ge1xuICAgIHJldHVybiB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNvdW50IG9mIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gICAqIFxuICAgKiBAcmV0dXJucyBOdW1iZXIgb2YgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgKi9cbiAgZ2V0QWNjdW11bGF0ZWRSZWNvcmRzQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSB3aWRnZXQgaXMgaW4gYWNjdW11bGF0aW9uIG1vZGUgKEFkZCB0byBvciBSZW1vdmUgZnJvbSkuXG4gICAqIFxuICAgKiBAcmV0dXJucyBUcnVlIGlmIGluIGFjY3VtdWxhdGlvbiBtb2RlLCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG4gIGlzQWNjdW11bGF0aW9uTW9kZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgdGhpcy5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZXJlIGFyZSBhY2N1bXVsYXRlZCByZWNvcmRzLlxuICAgKiBcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBhY2N1bXVsYXRlZCByZWNvcmRzIGV4aXN0LCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG4gIGhhc0FjY3VtdWxhdGVkUmVjb3JkcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgcmVzdWx0cyBtb2RlIGNoYW5nZS5cbiAgICogXG4gICAqIFVwZGF0ZXMgdGhlIHJlc3VsdHMgbW9kZSBhbmQgb3B0aW9uYWxseSBjbGVhcnMgYWNjdW11bGF0ZWQgcmVjb3JkcyB3aGVuIHN3aXRjaGluZ1xuICAgKiB0byBcIk5ld1wiIG1vZGUuIEFsc28gaGFuZGxlcyBoYXNoIHBhcmFtZXRlciBjb25zdW1wdGlvbiB3aGVuIHN3aXRjaGluZyB0byBhY2N1bXVsYXRpb24gbW9kZXMuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSUQgZm9yIGxvZ2dpbmdcbiAgICogQHBhcmFtIG1vZGUgLSBOZXcgcmVzdWx0cyBtb2RlXG4gICAqIEBwYXJhbSBzaG91bGRDb25zdW1lSGFzaCAtIFdoZXRoZXIgdG8gY29uc3VtZSBoYXNoIHBhcmFtZXRlciAoZm9yIGRlZXAgbGlua2luZylcbiAgICogQHBhcmFtIGhhc2hTaG9ydElkIC0gT3B0aW9uYWwgc2hvcnRJZCB0byBjb25zdW1lIGZyb20gaGFzaFxuICAgKiBAcGFyYW0gcmVtb3ZlSGFzaFBhcmFtZXRlciAtIE9wdGlvbmFsIGNhbGxiYWNrIHRvIHJlbW92ZSBoYXNoIHBhcmFtZXRlclxuICAgKi9cbiAgaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UoXG4gICAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgICBtb2RlOiBTZWxlY3Rpb25UeXBlLFxuICAgIHNob3VsZENvbnN1bWVIYXNoOiBib29sZWFuID0gZmFsc2UsXG4gICAgaGFzaFNob3J0SWQ/OiBzdHJpbmcsXG4gICAgcmVtb3ZlSGFzaFBhcmFtZXRlcj86IChzaG9ydElkOiBzdHJpbmcpID0+IHZvaWRcbiAgKTogeyByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZSwgYWNjdW11bGF0ZWRSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdIH0ge1xuICAgIGNvbnN0IHByZXZpb3VzTW9kZSA9IHRoaXMucmVzdWx0c01vZGVcbiAgICBjb25zdCBjdXJyZW50QWNjdW11bGF0ZWRDb3VudCA9IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlLXRyaWdnZXJlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgIG5ld01vZGU6IG1vZGUsXG4gICAgICBjdXJyZW50QWNjdW11bGF0ZWRDb3VudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBDb25zdW1lIGRlZXAgbGluayB3aGVuIHN3aXRjaGluZyB0byBhY2N1bXVsYXRpb24gbW9kZXNcbiAgICBpZiAoc2hvdWxkQ29uc3VtZUhhc2ggJiYgKG1vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgbW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSkge1xuICAgICAgaWYgKGhhc2hTaG9ydElkICYmIHJlbW92ZUhhc2hQYXJhbWV0ZXIpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgIGV2ZW50OiAnY29uc3VtaW5nLWhhc2gtb24tbW9kZS1zd2l0Y2gnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIG1vZGUsXG4gICAgICAgICAgc2hvcnRJZDogaGFzaFNob3J0SWRcbiAgICAgICAgfSlcbiAgICAgICAgcmVtb3ZlSGFzaFBhcmFtZXRlcihoYXNoU2hvcnRJZClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBzd2l0Y2hpbmcgdG8gXCJOZXdcIiBtb2RlLCBjbGVhciBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgaWYgKG1vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzLW9uLW1vZGUtc3dpdGNoJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHByZXZpb3VzTW9kZVxuICAgICAgfSlcbiAgICAgIHRoaXMucmVzdWx0c01vZGUgPSBtb2RlXG4gICAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3JkcyA9IFtdXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzdWx0c01vZGUgPSBtb2RlXG4gICAgfVxuXG4gICAgLy8gVHJpZ2dlciBjYWxsYmFja1xuICAgIGlmICh0aGlzLmNhbGxiYWNrcz8ub25Nb2RlQ2hhbmdlKSB7XG4gICAgICB0aGlzLmNhbGxiYWNrcy5vbk1vZGVDaGFuZ2UodGhpcy5yZXN1bHRzTW9kZSlcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0c01vZGU6IHRoaXMucmVzdWx0c01vZGUsXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBjaGFuZ2UuXG4gICAqIFxuICAgKiBVcGRhdGVzIHRoZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFycmF5LlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEIGZvciBsb2dnaW5nXG4gICAqIEBwYXJhbSByZWNvcmRzIC0gTmV3IGFjY3VtdWxhdGVkIHJlY29yZHMgYXJyYXlcbiAgICovXG4gIGhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSh3aWRnZXRJZDogc3RyaW5nLCByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKTogdm9pZCB7XG4gICAgY29uc3QgcHJldmlvdXNDb3VudCA9IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgIGNvbnN0IG5ld0NvdW50ID0gcmVjb3Jkcy5sZW5ndGhcblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UtdHJpZ2dlcmVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcHJldmlvdXNDb3VudCxcbiAgICAgIG5ld0NvdW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzID0gcmVjb3Jkc1xuXG4gICAgLy8gVHJpZ2dlciBjYWxsYmFja1xuICAgIGlmICh0aGlzLmNhbGxiYWNrcz8ub25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldHMgbW9kZSB0byBcIk5ldyBTZWxlY3Rpb25cIiBhbmQgY2xlYXJzIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gICAqIFxuICAgKiBDYWxsZWQgd2hlbiBoYXNoIHBhcmFtZXRlcnMgYXJlIGRldGVjdGVkIHRvIHJlc2V0IHRoZSB3aWRnZXQgdG8gYSBjbGVhbiBzdGF0ZS5cbiAgICogXG4gICAqIEBwYXJhbSB3aWRnZXRJZCAtIFdpZGdldCBJRCBmb3IgbG9nZ2luZ1xuICAgKiBAcGFyYW0gY3VycmVudE1vZGUgLSBDdXJyZW50IG1vZGUgYmVmb3JlIHJlc2V0XG4gICAqL1xuICByZXNldE1vZGVPbkhhc2hEZXRlY3Rpb24od2lkZ2V0SWQ6IHN0cmluZywgY3VycmVudE1vZGU6IFNlbGVjdGlvblR5cGUpOiB7IHJlc3VsdHNNb2RlOiBTZWxlY3Rpb25UeXBlLCBhY2N1bXVsYXRlZFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gfSB7XG4gICAgaWYgKGN1cnJlbnRNb2RlICE9PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ21vZGUtcmVzZXQtbmVlZGVkLW9uLWhhc2gtZGV0ZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGN1cnJlbnRNb2RlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICB0aGlzLnJlc3VsdHNNb2RlID0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzID0gW11cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0c01vZGU6IHRoaXMucmVzdWx0c01vZGUsXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCB0aGUgbWFuYWdlci5cbiAgICogXG4gICAqIFJlc2V0cyBzdGF0ZSB0byBpbml0aWFsIHZhbHVlcy5cbiAgICovXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgdGhpcy5yZXN1bHRzTW9kZSA9IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHMgPSBbXVxuICAgIHRoaXMuY2FsbGJhY2tzID0gdW5kZWZpbmVkXG4gIH1cbn1cblxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdHlwZSBBbGxXaWRnZXRQcm9wcywgdHlwZSBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZyB9IGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZU9yR2V0R3JhcGhpY3NMYXllciwgY2xlYW51cEdyYXBoaWNzTGF5ZXIgfSBmcm9tICcuLi9ncmFwaGljcy1sYXllci11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuaW50ZXJmYWNlIEdyYXBoaWNzTGF5ZXJDYWxsYmFja3Mge1xuICBvbkdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZD86IChncmFwaGljc0xheWVyOiBfX2VzcmkuR3JhcGhpY3NMYXllcikgPT4gdm9pZFxuICBvbkdyYXBoaWNzTGF5ZXJDbGVhbmVkPzogKCkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIGdyYXBoaWNzIGxheWVyIGluaXRpYWxpemF0aW9uIGFuZCBjbGVhbnVwLlxuICogXG4gKiBDZW50cmFsaXplcyBncmFwaGljcyBsYXllciBtYW5hZ2VtZW50IGxvZ2ljIGZvciB0aGUgd2lkZ2V0LlxuICogSGFuZGxlcyBncmFwaGljcyBsYXllciBjcmVhdGlvbiwgaW5pdGlhbGl6YXRpb24sIGFuZCBjbGVhbnVwLlxuICogXG4gKiBQYXJ0IG9mIENodW5rIDQ6IEdyYXBoaWNzIExheWVyIE1hbmFnZW1lbnQgZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgR3JhcGhpY3NMYXllck1hbmFnZXIge1xuICBwcml2YXRlIGdyYXBoaWNzTGF5ZXJSZWY6IFJlYWN0LlJlZk9iamVjdDxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+XG4gIHByaXZhdGUgbWFwVmlld1JlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+XG5cbiAgY29uc3RydWN0b3IoXG4gICAgZ3JhcGhpY3NMYXllclJlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbD4sXG4gICAgbWFwVmlld1JlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+XG4gICkge1xuICAgIHRoaXMuZ3JhcGhpY3NMYXllclJlZiA9IGdyYXBoaWNzTGF5ZXJSZWZcbiAgICB0aGlzLm1hcFZpZXdSZWYgPSBtYXBWaWV3UmVmXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGdyYXBoaWNzIGxheWVyIGZvciBtYXAgaGlnaGxpZ2h0aW5nLlxuICAgKiBcbiAgICogQ3JlYXRlcyBvciByZXRyaWV2ZXMgYSBncmFwaGljcyBsYXllciBhbmQgYWRkcyBpdCB0byB0aGUgbWFwIHZpZXcuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSUQgZm9yIGdyYXBoaWNzIGxheWVyIG5hbWluZ1xuICAgKiBAcGFyYW0gbWFwVmlldyAtIFRoZSBBcmNHSVMgTWFwVmlldyBvciBTY2VuZVZpZXcgaW5zdGFuY2VcbiAgICogQHBhcmFtIGNhbGxiYWNrcyAtIE9wdGlvbmFsIGNhbGxiYWNrcyBmb3IgaW5pdGlhbGl6YXRpb24gZXZlbnRzXG4gICAqIFxuICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byB0aGUgZ3JhcGhpY3MgbGF5ZXIsIG9yIG51bGwgaWYgaW5pdGlhbGl6YXRpb24gZmFpbGVkXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplKFxuICAgIHdpZGdldElkOiBzdHJpbmcsXG4gICAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3LFxuICAgIGNhbGxiYWNrcz86IEdyYXBoaWNzTGF5ZXJDYWxsYmFja3NcbiAgKTogUHJvbWlzZTxfX2VzcmkuR3JhcGhpY3NMYXllciB8IG51bGw+IHtcbiAgICAvLyBDaHVuayA0OiBDb21wYXJpc29uIGxvZ2dpbmcgLSBuZXcgaW1wbGVtZW50YXRpb25cbiAgICBjb25zdCBuZXdTdGF0ZUJlZm9yZSA9IHtcbiAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQsXG4gICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5pZCB8fCBudWxsLFxuICAgICAgaGFzTWFwVmlldzogISF0aGlzLm1hcFZpZXdSZWYuY3VycmVudCxcbiAgICAgIHZpZXdUeXBlOiB0aGlzLm1hcFZpZXdSZWYuY3VycmVudD8udHlwZSB8fCBudWxsXG4gICAgfVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXItYmVmb3JlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICBtYXBWaWV3VHlwZTogbWFwVmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIG9yIGdldCBncmFwaGljcyBsYXllclxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IGF3YWl0IGNyZWF0ZU9yR2V0R3JhcGhpY3NMYXllcih3aWRnZXRJZCwgbWFwVmlldylcbiAgICAgIGlmICghZ3JhcGhpY3NMYXllcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1pbml0aWFsaXplR3JhcGhpY3NMYXllci1mYWlsZWQnLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgICByZXN1bHQ6ICdmYWlsZWQnLFxuICAgICAgICAgICAgcmVhc29uOiAnZ3JhcGhpY3MtbGF5ZXItY3JlYXRpb24tZmFpbGVkJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cblxuICAgICAgLy8gU3RvcmUgcmVmZXJlbmNlc1xuICAgICAgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgPSBtYXBWaWV3XG4gICAgICB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCA9IGdyYXBoaWNzTGF5ZXJcblxuICAgICAgY29uc3QgbmV3U3RhdGVBZnRlciA9IHtcbiAgICAgICAgaGFzR3JhcGhpY3NMYXllcjogISF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCxcbiAgICAgICAgZ3JhcGhpY3NMYXllcklkOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudD8uaWQgfHwgbnVsbCxcbiAgICAgICAgaGFzTWFwVmlldzogISF0aGlzLm1hcFZpZXdSZWYuY3VycmVudCxcbiAgICAgICAgdmlld1R5cGU6IHRoaXMubWFwVmlld1JlZi5jdXJyZW50Py50eXBlIHx8IG51bGxcbiAgICAgIH1cblxuICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWluaXRpYWxpemVHcmFwaGljc0xheWVyLXN1Y2Nlc3MnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgc3RhdGVBZnRlcjogbmV3U3RhdGVBZnRlcixcbiAgICAgICAgICByZXN1bHQ6ICdzdWNjZXNzJyxcbiAgICAgICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICAgICAgdmlld1R5cGU6IG1hcFZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vIENhbGwgY2FsbGJhY2sgaWYgcHJvdmlkZWRcbiAgICAgIGlmIChjYWxsYmFja3M/Lm9uR3JhcGhpY3NMYXllckluaXRpYWxpemVkKSB7XG4gICAgICAgIGNhbGxiYWNrcy5vbkdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZChncmFwaGljc0xheWVyKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ3JhcGhpY3NMYXllclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXItZXJyb3InLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgcmVzdWx0OiAnZXJyb3InLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBncmFwaGljcyBsYXllciBsYXppbHkgd2hlbiBvdXRwdXQgZGF0YSBzb3VyY2UgYmVjb21lcyBhdmFpbGFibGUuXG4gICAqIFxuICAgKiBAcGFyYW0gd2lkZ2V0SWQgLSBXaWRnZXQgSURcbiAgICogQHBhcmFtIGNvbmZpZyAtIFdpZGdldCBjb25maWd1cmF0aW9uXG4gICAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgdGhhdCB3YXMgY3JlYXRlZFxuICAgKiBAcGFyYW0gbWFwVmlldyAtIE9wdGlvbmFsIG1hcCB2aWV3IChpZiBub3QgcHJvdmlkZWQsIHVzZXMgbWFwVmlld1JlZilcbiAgICogQHBhcmFtIGNhbGxiYWNrcyAtIE9wdGlvbmFsIGNhbGxiYWNrc1xuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZUZyb21PdXRwdXREUyhcbiAgICB3aWRnZXRJZDogc3RyaW5nLFxuICAgIGNvbmZpZzogSU1Db25maWcsXG4gICAgb3V0cHV0RFM6IERhdGFTb3VyY2UsXG4gICAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbCxcbiAgICBjYWxsYmFja3M/OiBHcmFwaGljc0xheWVyQ2FsbGJhY2tzXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIENodW5rIDQ6IENvbXBhcmlzb24gbG9nZ2luZyAtIG5ldyBpbXBsZW1lbnRhdGlvblxuICAgIGNvbnN0IG5ld1N0YXRlQmVmb3JlID0ge1xuICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodDogY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICBoYXNHcmFwaGljc0xheWVyOiAhIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudD8uaWQgfHwgbnVsbCxcbiAgICAgIGhhc01hcFZpZXc6ICEhdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZFxuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTLWJlZm9yZScsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBPbmx5IGluaXRpYWxpemUgaWYgZW5hYmxlZCBhbmQgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWRcbiAgICBpZiAoIWNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IHx8IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50KSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFMtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICByZXN1bHQ6ICdza2lwcGVkJyxcbiAgICAgICAgICByZWFzb246ICFjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCA/ICdub3QtZW5hYmxlZCcgOiAnYWxyZWFkeS1pbml0aWFsaXplZCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBVc2UgcHJvdmlkZWQgbWFwIHZpZXcgb3IgZ2V0IGZyb20gcmVmXG4gICAgY29uc3QgbWFwVmlld1RvVXNlID0gbWFwVmlldyB8fCB0aGlzLm1hcFZpZXdSZWYuY3VycmVudFxuICAgIGlmICghbWFwVmlld1RvVXNlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24taW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFMtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICByZXN1bHQ6ICdza2lwcGVkJyxcbiAgICAgICAgICByZWFzb246ICdtYXAtdmlldy1ub3QtYXZhaWxhYmxlLXlldCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIGdyYXBoaWNzIGxheWVyXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKHdpZGdldElkLCBtYXBWaWV3VG9Vc2UsIGNhbGxiYWNrcylcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgdGhlIGdyYXBoaWNzIGxheWVyLlxuICAgKiBcbiAgICogUmVtb3ZlcyB0aGUgZ3JhcGhpY3MgbGF5ZXIgZnJvbSB0aGUgbWFwIHZpZXcgYW5kIGNsZWFycyBpbnRlcm5hbCByZWZlcmVuY2VzLlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEXG4gICAqIEBwYXJhbSBjYWxsYmFja3MgLSBPcHRpb25hbCBjYWxsYmFja3NcbiAgICovXG4gIGNsZWFudXAoXG4gICAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgICBjYWxsYmFja3M/OiBHcmFwaGljc0xheWVyQ2FsbGJhY2tzXG4gICk6IHZvaWQge1xuICAgIC8vIENodW5rIDQ6IENvbXBhcmlzb24gbG9nZ2luZyAtIG5ldyBpbXBsZW1lbnRhdGlvblxuICAgIGNvbnN0IG5ld1N0YXRlQmVmb3JlID0ge1xuICAgICAgaGFzR3JhcGhpY3NMYXllcjogISF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCxcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQ/LmlkIHx8IG51bGwsXG4gICAgICBoYXNNYXBWaWV3OiAhIXRoaXMubWFwVmlld1JlZi5jdXJyZW50LFxuICAgICAgdmlld1R5cGU6IHRoaXMubWFwVmlld1JlZi5jdXJyZW50Py50eXBlIHx8IG51bGxcbiAgICB9XG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICBldmVudDogJ25ldy1pbXBsZW1lbnRhdGlvbi1jbGVhbnVwR3JhcGhpY3NMYXllci1iZWZvcmUnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBtYXBWaWV3ID0gdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnRcbiAgICBpZiAobWFwVmlldykge1xuICAgICAgY2xlYW51cEdyYXBoaWNzTGF5ZXIod2lkZ2V0SWQsIG1hcFZpZXcpXG4gICAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50ID0gbnVsbFxuXG4gICAgICBjb25zdCBuZXdTdGF0ZUFmdGVyID0ge1xuICAgICAgICBoYXNHcmFwaGljc0xheWVyOiAhIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LFxuICAgICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5pZCB8fCBudWxsLFxuICAgICAgICBoYXNNYXBWaWV3OiAhIXRoaXMubWFwVmlld1JlZi5jdXJyZW50LFxuICAgICAgICB2aWV3VHlwZTogdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQ/LnR5cGUgfHwgbnVsbFxuICAgICAgfVxuXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24tY2xlYW51cEdyYXBoaWNzTGF5ZXItY29tcGxldGUnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgc3RhdGVBZnRlcjogbmV3U3RhdGVBZnRlcixcbiAgICAgICAgICByZXN1bHQ6ICdjb21wbGV0ZScsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vIENhbGwgY2FsbGJhY2sgaWYgcHJvdmlkZWRcbiAgICAgIGlmIChjYWxsYmFja3M/Lm9uR3JhcGhpY3NMYXllckNsZWFuZWQpIHtcbiAgICAgICAgY2FsbGJhY2tzLm9uR3JhcGhpY3NMYXllckNsZWFuZWQoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0NIVU5LLTQtQ09NUEFSRScsIHtcbiAgICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24tY2xlYW51cEdyYXBoaWNzTGF5ZXItc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBuZXdJbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIHN0YXRlQmVmb3JlOiBuZXdTdGF0ZUJlZm9yZSxcbiAgICAgICAgICByZXN1bHQ6ICdza2lwcGVkJyxcbiAgICAgICAgICByZWFzb246ICduby1tYXAtdmlldycsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgZ3JhcGhpY3MgZnJvbSB0aGUgZ3JhcGhpY3MgbGF5ZXIgaWYgaXQgZXhpc3RzLlxuICAgKiBcbiAgICogQHBhcmFtIHdpZGdldElkIC0gV2lkZ2V0IElEIGZvciBsb2dnaW5nXG4gICAqIEBwYXJhbSBjb25maWcgLSBXaWRnZXQgY29uZmlndXJhdGlvblxuICAgKi9cbiAgY2xlYXJHcmFwaGljcyh3aWRnZXRJZDogc3RyaW5nLCBjb25maWc6IElNQ29uZmlnKTogdm9pZCB7XG4gICAgLy8gQ2h1bmsgNDogQ29tcGFyaXNvbiBsb2dnaW5nIC0gbmV3IGltcGxlbWVudGF0aW9uXG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50XG4gICAgY29uc3QgbmV3U3RhdGVCZWZvcmUgPSB7XG4gICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0OiBjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhZ3JhcGhpY3NMYXllcixcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllcj8uaWQgfHwgbnVsbCxcbiAgICAgIGdyYXBoaWNzQ291bnQ6IGdyYXBoaWNzTGF5ZXI/LmdyYXBoaWNzLmxlbmd0aCB8fCAwXG4gICAgfVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnQ0hVTkstNC1DT01QQVJFJywge1xuICAgICAgZXZlbnQ6ICduZXctaW1wbGVtZW50YXRpb24tY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtYmVmb3JlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGlmIChjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBncmFwaGljc0xheWVyKSB7XG4gICAgICBjb25zdCB7IGNsZWFyR3JhcGhpY3NMYXllciB9ID0gcmVxdWlyZSgnLi4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnKVxuICAgICAgY2xlYXJHcmFwaGljc0xheWVyKGdyYXBoaWNzTGF5ZXIpXG4gICAgICBcbiAgICAgIGNvbnN0IG5ld1N0YXRlQWZ0ZXIgPSB7XG4gICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ6IGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICBoYXNHcmFwaGljc0xheWVyOiAhIXRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50LFxuICAgICAgICBncmFwaGljc0xheWVySWQ6IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50Py5pZCB8fCBudWxsLFxuICAgICAgICBncmFwaGljc0NvdW50OiB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudD8uZ3JhcGhpY3MubGVuZ3RoIHx8IDBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzLWNvbXBsZXRlJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG5ld0ltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgc3RhdGVCZWZvcmU6IG5ld1N0YXRlQmVmb3JlLFxuICAgICAgICAgIHN0YXRlQWZ0ZXI6IG5ld1N0YXRlQWZ0ZXIsXG4gICAgICAgICAgcmVzdWx0OiAnY29tcGxldGUnLFxuICAgICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdDSFVOSy00LUNPTVBBUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnbmV3LWltcGxlbWVudGF0aW9uLWNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzLXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbmV3SW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBzdGF0ZUJlZm9yZTogbmV3U3RhdGVCZWZvcmUsXG4gICAgICAgICAgcmVzdWx0OiAnc2tpcHBlZCcsXG4gICAgICAgICAgcmVhc29uOiAhY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgPyAnbm90LWVuYWJsZWQnIDogJ25vLWdyYXBoaWNzLWxheWVyJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBncmFwaGljcyBsYXllci5cbiAgICovXG4gIGdldEdyYXBoaWNzTGF5ZXIoKTogX19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnRcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgZ3JhcGhpY3MgbGF5ZXIgc2hvdWxkIGJlIGluaXRpYWxpemVkIGJhc2VkIG9uIGNvbmZpZyBhbmQgY3VycmVudCBzdGF0ZS5cbiAgICogXG4gICAqIEBwYXJhbSBjb25maWcgLSBXaWRnZXQgY29uZmlndXJhdGlvblxuICAgKiBAcGFyYW0gbWFwVmlldyAtIE1hcCB2aWV3IHRvIGNoZWNrXG4gICAqIEByZXR1cm5zIHRydWUgaWYgZ3JhcGhpY3MgbGF5ZXIgc2hvdWxkIGJlIGluaXRpYWxpemVkXG4gICAqL1xuICBzaG91bGRJbml0aWFsaXplKFxuICAgIGNvbmZpZzogSU1Db25maWcsXG4gICAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbFxuICApOiBib29sZWFuIHtcbiAgICByZXR1cm4gISEobWFwVmlldyAmJiBjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiAhdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQpXG4gIH1cbn1cblxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdHlwZSBBbGxXaWRnZXRQcm9wcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgSU1Db25maWcgfSBmcm9tICcuLi8uLi9jb25maWcnXG5pbXBvcnQgeyB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmludGVyZmFjZSBNYXBWaWV3Q2FsbGJhY2tzIHtcbiAgb25NYXBWaWV3Q2hhbmdlPzogKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyB8IG51bGwpID0+IHZvaWRcbn1cblxuLyoqXG4gKiBVdGlsaXR5IHRvIG1hbmFnZSBtYXAgdmlldyByZWYgYW5kIHZpZXcgY2hhbmdlIGhhbmRsZXJzLlxuICogXG4gKiBDZW50cmFsaXplcyBtYXAgdmlldyBtYW5hZ2VtZW50IGxvZ2ljIGZvciB0aGUgd2lkZ2V0LlxuICogSGFuZGxlcyBKaW11TWFwVmlldyBjaGFuZ2VzIGFuZCBtYWludGFpbnMgcmVmcyBmb3IgbWFwIHZpZXcgYWNjZXNzLlxuICogXG4gKiBQYXJ0IG9mIENodW5rIDY6IE1hcCBWaWV3IE1hbmFnZW1lbnQgZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgTWFwVmlld01hbmFnZXIge1xuICBwcml2YXRlIG1hcFZpZXdSZWY6IFJlYWN0LlJlZk9iamVjdDxfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsPlxuICBwcml2YXRlIGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyB8IG51bGwgPSBudWxsXG5cbiAgY29uc3RydWN0b3IobWFwVmlld1JlZjogUmVhY3QuUmVmT2JqZWN0PF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+KSB7XG4gICAgdGhpcy5tYXBWaWV3UmVmID0gbWFwVmlld1JlZlxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgSmltdU1hcFZpZXcgY2hhbmdlIGZyb20gSmltdU1hcFZpZXdDb21wb25lbnQuXG4gICAqIFVwZGF0ZXMgaW50ZXJuYWwgc3RhdGUgYW5kIGNhbGxzIGNhbGxiYWNrcy5cbiAgICovXG4gIGhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZChcbiAgICBqaW11TWFwVmlldzogSmltdU1hcFZpZXcgfCBudWxsLFxuICAgIHByb3BzOiBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4sXG4gICAgY2FsbGJhY2tzOiBNYXBWaWV3Q2FsbGJhY2tzXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHsgaWQgfSA9IHByb3BzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdNQVAtRVhURU5UJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgaGFzSmltdU1hcFZpZXc6ICEhamltdU1hcFZpZXcsXG4gICAgICBoYXNWaWV3OiAhIShqaW11TWFwVmlldz8udmlldyksXG4gICAgICB2aWV3VHlwZTogamltdU1hcFZpZXc/LnZpZXc/LnR5cGUgfHwgJ25vbmUnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBTdG9yZSBKaW11TWFwVmlldyBpbnRlcm5hbGx5XG4gICAgdGhpcy5qaW11TWFwVmlldyA9IGppbXVNYXBWaWV3XG4gICAgXG4gICAgLy8gVXBkYXRlIG1hcCB2aWV3IHJlZiBpZiB2aWV3IGlzIGF2YWlsYWJsZVxuICAgIGlmIChqaW11TWFwVmlldz8udmlldykge1xuICAgICAgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgPSBqaW11TWFwVmlldy52aWV3XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFwVmlld1JlZi5jdXJyZW50ID0gbnVsbFxuICAgIH1cbiAgICBcbiAgICAvLyBDYWxsIGNhbGxiYWNrIHRvIHVwZGF0ZSB3aWRnZXQgc3RhdGVcbiAgICBpZiAoY2FsbGJhY2tzLm9uTWFwVmlld0NoYW5nZSkge1xuICAgICAgY2FsbGJhY2tzLm9uTWFwVmlld0NoYW5nZShqaW11TWFwVmlldylcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBKaW11TWFwVmlldy5cbiAgICovXG4gIGdldEppbXVNYXBWaWV3KCk6IEppbXVNYXBWaWV3IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuamltdU1hcFZpZXdcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IG1hcCB2aWV3IGZyb20gcmVmLlxuICAgKi9cbiAgZ2V0TWFwVmlldygpOiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnRcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgbWFwIHZpZXcgcmVmZXJlbmNlcy5cbiAgICovXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgdGhpcy5qaW11TWFwVmlldyA9IG51bGxcbiAgfVxufVxuXG4iLCJpbXBvcnQgeyB0eXBlIEFsbFdpZGdldFByb3BzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZywgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uLy4uL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuaW50ZXJmYWNlIFVybENvbnN1bXB0aW9uQ2FsbGJhY2tzIHtcbiAgb25Jbml0aWFsVmFsdWVGb3VuZDogKHZhbHVlOiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9IHwgdW5kZWZpbmVkKSA9PiB2b2lkXG4gIG9uTW9kZVJlc2V0TmVlZGVkPzogKCkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFV0aWxpdHkgdG8gbWFuYWdlIFVSTCBwYXJhbWV0ZXIgY29uc3VtcHRpb24gYW5kIGRlZXAgbGlua2luZy5cbiAqIFxuICogSGFuZGxlcyBib3RoIEhhc2ggZnJhZ21lbnRzICgjKSBhbmQgUXVlcnkgU3RyaW5ncyAoPyksIHdpdGggSGFzaCB0YWtpbmcgcHJpb3JpdHkuXG4gKiBJbXBsZW1lbnRzIGF0b21pYyBjb25zdW1wdGlvbiB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzLlxuICogXG4gKiBQYXJ0IG9mIENodW5rIDE6IFVSTCBQYXJhbWV0ZXIgQ29uc3VtcHRpb24gZXh0cmFjdGlvbi5cbiAqIFxuICogTm90ZTogVGhpcyBpcyBhIHV0aWxpdHkgY2xhc3MgKG5vdCBhIGhvb2spIHRvIHdvcmsgd2l0aCBjbGFzcyBjb21wb25lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgVXJsQ29uc3VtcHRpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSBsYXN0UHJvY2Vzc2VkSGFzaDogc3RyaW5nID0gJydcbiAgcHJpdmF0ZSBpc1Byb2Nlc3Npbmc6IGJvb2xlYW4gPSBmYWxzZVxuICBwcml2YXRlIGhhc2hDaGFuZ2VIYW5kbGVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbFxuXG4gIC8qKlxuICAgKiBDaGVja3MgVVJMIGZvciBoYXNoIGFuZCBxdWVyeSBzdHJpbmcgcGFyYW1ldGVycyBtYXRjaGluZyBjb25maWd1cmVkIHNob3J0SWRzLlxuICAgKiBIYXNoIHBhcmFtZXRlcnMgdGFrZSBwcmlvcml0eSBvdmVyIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzLlxuICAgKi9cbiAgY2hlY2tVcmxQYXJhbWV0ZXJzKFxuICAgIHByb3BzOiBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4sXG4gICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUsXG4gICAgY2FsbGJhY2tzOiBVcmxDb25zdW1wdGlvbkNhbGxiYWNrc1xuICApOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbmZpZywgaWQgfSA9IHByb3BzXG4gICAgY29uc3QgeyBvbkluaXRpYWxWYWx1ZUZvdW5kLCBvbk1vZGVSZXNldE5lZWRlZCB9ID0gY2FsbGJhY2tzXG5cbiAgICBpZiAoIWNvbmZpZy5xdWVyeUl0ZW1zPy5sZW5ndGgpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFByZXZlbnQgY29uY3VycmVudCBwcm9jZXNzaW5nXG4gICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBzaG9ydElkcyA9IGNvbmZpZy5xdWVyeUl0ZW1zXG4gICAgICAubWFwKGl0ZW0gPT4gaXRlbS5zaG9ydElkKVxuICAgICAgLmZpbHRlcihzaWQgPT4gc2lkICE9IG51bGwgJiYgc2lkLnRyaW0oKSAhPT0gJycpXG5cbiAgICBpZiAoc2hvcnRJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKVxuICAgIFxuICAgIC8vIFNraXAgaGFzaC1vbmx5IGlmIHdlJ3ZlIGFscmVhZHkgcHJvY2Vzc2VkIHRoaXMgZXhhY3QgaGFzaCBmcmFnbWVudFxuICAgIC8vIEJ1dCBhbHdheXMgY2hlY2sgcXVlcnkgc3RyaW5ncyAodGhleSBkb24ndCB0cmlnZ2VyIGhhc2hjaGFuZ2UgZXZlbnRzKVxuICAgIC8vIE9ubHkgc2tpcCBpZiB3ZSBoYXZlIGEgaGFzaCBmcmFnbWVudCBBTkQgd2UndmUgYWxyZWFkeSBwcm9jZXNzZWQgaXRcbiAgICBpZiAoaGFzaCAmJiB0aGlzLmxhc3RQcm9jZXNzZWRIYXNoID09PSBoYXNoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgdGhpcy5pc1Byb2Nlc3NpbmcgPSB0cnVlXG4gICAgLy8gT25seSB1cGRhdGUgbGFzdFByb2Nlc3NlZEhhc2ggaWYgd2UgYWN0dWFsbHkgaGF2ZSBhIGhhc2ggZnJhZ21lbnRcbiAgICAvLyBRdWVyeSBzdHJpbmdzIGFyZSBhbHdheXMgY2hlY2tlZCAobm8gc2tpcCBsb2dpYyBmb3IgdGhlbSlcbiAgICBpZiAoaGFzaCkge1xuICAgICAgdGhpcy5sYXN0UHJvY2Vzc2VkSGFzaCA9IGhhc2hcbiAgICB9XG5cbiAgICBjb25zdCBoYXNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeSlcblxuICAgIGxldCBmb3VuZFNob3J0SWQ6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gICAgbGV0IGZvdW5kVmFsdWU6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gICAgbGV0IGZvdW5kSW46ICdoYXNoJyB8ICdxdWVyeScgfCBudWxsID0gbnVsbFxuXG4gICAgLy8gUFJJT1JJVFkgMTogSGFzaCBmcmFnbWVudHMgKGFsd2F5cyB3aW4pXG4gICAgZm9yIChjb25zdCBzaWQgb2Ygc2hvcnRJZHMpIHtcbiAgICAgIGlmIChoYXNoUGFyYW1zLmhhcyhzaWQpKSB7XG4gICAgICAgIGZvdW5kU2hvcnRJZCA9IHNpZFxuICAgICAgICBmb3VuZFZhbHVlID0gaGFzaFBhcmFtcy5nZXQoc2lkKVxuICAgICAgICBmb3VuZEluID0gJ2hhc2gnXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUFJJT1JJVFkgMjogUXVlcnkgc3RyaW5nIChpZiBubyBoYXNoIG1hdGNoKVxuICAgIGlmICghZm91bmRTaG9ydElkKSB7XG4gICAgICBmb3IgKGNvbnN0IHNpZCBvZiBzaG9ydElkcykge1xuICAgICAgICBpZiAocXVlcnlQYXJhbXMuaGFzKHNpZCkpIHtcbiAgICAgICAgICBmb3VuZFNob3J0SWQgPSBzaWRcbiAgICAgICAgICBmb3VuZFZhbHVlID0gcXVlcnlQYXJhbXMuZ2V0KHNpZClcbiAgICAgICAgICBmb3VuZEluID0gJ3F1ZXJ5J1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZm91bmRTaG9ydElkICYmIGZvdW5kVmFsdWUgIT09IG51bGwpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgZXZlbnQ6ICd1cmwtcGFyYW0tZGV0ZWN0ZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHNob3J0SWQ6IGZvdW5kU2hvcnRJZCxcbiAgICAgICAgdmFsdWU6IGZvdW5kVmFsdWUsXG4gICAgICAgIGZvdW5kSW4sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gUmVzZXQgdG8gTmV3IG1vZGUgd2hlbiBoYXNoIHBhcmFtZXRlciBpcyBkZXRlY3RlZCB0byBhdm9pZCBidWdzIHdpdGggYWNjdW11bGF0aW9uIG1vZGVzXG4gICAgICBpZiAocmVzdWx0c01vZGUgIT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uICYmIG9uTW9kZVJlc2V0TmVlZGVkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICBldmVudDogJ21vZGUtcmVzZXQtbmVlZGVkLW9uLWhhc2gtZGV0ZWN0aW9uJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgY3VycmVudE1vZGU6IHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBvbk1vZGVSZXNldE5lZWRlZCgpXG4gICAgICB9XG4gICAgICBcbiAgICAgIG9uSW5pdGlhbFZhbHVlRm91bmQoeyBzaG9ydElkOiBmb3VuZFNob3J0SWQsIHZhbHVlOiBmb3VuZFZhbHVlIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vIG1hdGNoaW5nIHBhcmFtZXRlcnMgZm91bmQgLSBjbGVhciBzdGF0ZVxuICAgICAgb25Jbml0aWFsVmFsdWVGb3VuZCh1bmRlZmluZWQpXG4gICAgfVxuICAgIFxuICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgaGFzaCBwYXJhbWV0ZXIgZnJvbSB0aGUgVVJMLlxuICAgKiBVc2VkIHdoZW4gc3dpdGNoaW5nIHRvIGFjY3VtdWxhdGlvbiBtb2RlcyB0byBjb25zdW1lIHRoZSBkZWVwIGxpbmsuXG4gICAqL1xuICByZW1vdmVIYXNoUGFyYW1ldGVyKHNob3J0SWQ6IHN0cmluZywgd2lkZ2V0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghc2hvcnRJZCkgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgICBcbiAgICBpZiAodXJsUGFyYW1zLmhhcyhzaG9ydElkKSkge1xuICAgICAgdXJsUGFyYW1zLmRlbGV0ZShzaG9ydElkKVxuICAgICAgY29uc3QgbmV3SGFzaCA9IHVybFBhcmFtcy50b1N0cmluZygpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgZXZlbnQ6ICdyZW1vdmVIYXNoUGFyYW1ldGVyJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHNob3J0SWQsXG4gICAgICAgIG5ld0hhc2g6IG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJyhlbXB0eSknLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgVVJMIHdpdGhvdXQgdHJpZ2dlcmluZyBhIHJlbG9hZFxuICAgICAgLy8gQWx3YXlzIHByZXNlcnZlIHBhdGhuYW1lIGFuZCBxdWVyeSBzdHJpbmcsIG9ubHkgdXBkYXRlIGhhc2hcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyAobmV3SGFzaCA/IGAjJHtuZXdIYXNofWAgOiAnJylcbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gUmVzZXQgdHJhY2tpbmcgc28gaXQgY2FuIGJlIHByb2Nlc3NlZCBhZ2FpbiBpZiBuZWVkZWRcbiAgICAgIHRoaXMubGFzdFByb2Nlc3NlZEhhc2ggPSAnJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHRoZSBtYW5hZ2VyIChubyBhdXRvbm9tb3VzIFVSTCBjaGVja2luZykuXG4gICAqIFF1ZXJ5U2ltcGxlIHNob3VsZCBvbmx5IHByb2Nlc3MgaGFzaCBwYXJhbWV0ZXJzIHdoZW4gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgdHJpZ2dlcnMgaXRcbiAgICogdmlhIE9QRU5fV0lER0VUX0VWRU5ULiBUaGlzIGVuc3VyZXMgSGVscGVyU2ltcGxlIHJlbWFpbnMgdGhlIG9yY2hlc3RyYXRvci5cbiAgICovXG4gIHNldHVwKFxuICAgIHByb3BzOiBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4sXG4gICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUsXG4gICAgY2FsbGJhY2tzOiBVcmxDb25zdW1wdGlvbkNhbGxiYWNrc1xuICApOiB2b2lkIHtcbiAgICAvLyBEbyBOT1QgYXV0b21hdGljYWxseSBjaGVjayBVUkwgcGFyYW1ldGVyc1xuICAgIC8vIERvIE5PVCBzZXQgdXAgaGFzaGNoYW5nZSBsaXN0ZW5lclxuICAgIC8vIFF1ZXJ5U2ltcGxlIHdpbGwgb25seSBwcm9jZXNzIGhhc2ggd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVucyB0aGUgd2lkZ2V0XG4gICAgLy8gVGhpcyBlbnN1cmVzIEhlbHBlclNpbXBsZSByZW1haW5zIHRoZSBvcmNoZXN0cmF0b3JcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgaGFzaCBjaGFuZ2UgbGlzdGVuZXIuXG4gICAqL1xuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc2hDaGFuZ2VIYW5kbGVyKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuaGFzaENoYW5nZUhhbmRsZXIpXG4gICAgICB0aGlzLmhhc2hDaGFuZ2VIYW5kbGVyID0gbnVsbFxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgdHlwZSBBbGxXaWRnZXRQcm9wcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IHR5cGUgSU1Db25maWcgfSBmcm9tICcuLi8uLi9jb25maWcnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIFF1ZXJ5U2ltcGxlIHRvIG5vdGlmeSBIZWxwZXJTaW1wbGUgb2Ygd2lkZ2V0IG9wZW4vY2xvc2Ugc3RhdGUuXG4gKi9cbmNvbnN0IFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCA9ICdxdWVyeXNpbXBsZS13aWRnZXQtc3RhdGUtY2hhbmdlZCdcblxuaW50ZXJmYWNlIFZpc2liaWxpdHlDYWxsYmFja3Mge1xuICBvblZpc2liaWxpdHlDaGFuZ2U/OiAoaXNWaXNpYmxlOiBib29sZWFuKSA9PiB2b2lkXG59XG5cbi8qKlxuICogVXRpbGl0eSB0byBtYW5hZ2Ugd2lkZ2V0IHBhbmVsIHZpc2liaWxpdHkgZGV0ZWN0aW9uIGFuZCBIZWxwZXJTaW1wbGUgbm90aWZpY2F0aW9uLlxuICogXG4gKiBVc2VzIEludGVyc2VjdGlvbk9ic2VydmVyIGZvciBlZmZpY2llbnQgRE9NLWxldmVsIHZpc2liaWxpdHkgdHJhY2tpbmcuXG4gKiBGYWxscyBiYWNrIHRvIHBlcmlvZGljIGNoZWNraW5nIGlmIEludGVyc2VjdGlvbk9ic2VydmVyIGlzIG5vdCBhdmFpbGFibGUuXG4gKiBcbiAqIFBhcnQgb2YgQ2h1bmsgMjogV2lkZ2V0IFZpc2liaWxpdHkgRW5naW5lIGV4dHJhY3Rpb24uXG4gKiBcbiAqIE5vdGU6IFRoaXMgaXMgYSB1dGlsaXR5IGNsYXNzIChub3QgYSBob29rKSB0byB3b3JrIHdpdGggY2xhc3MgY29tcG9uZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFdpZGdldFZpc2liaWxpdHlNYW5hZ2VyIHtcbiAgcHJpdmF0ZSB2aXNpYmlsaXR5T2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSB2aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBpc1BhbmVsVmlzaWJsZTogYm9vbGVhbiA9IGZhbHNlXG4gIHByaXZhdGUgd2lkZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbFxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIHdpZGdldCBlbGVtZW50IGlzIGN1cnJlbnRseSB2aXNpYmxlLlxuICAgKiBGYWxsYmFjayBtZXRob2Qgd2hlbiBJbnRlcnNlY3Rpb25PYnNlcnZlciBpcyBub3QgYXZhaWxhYmxlLlxuICAgKi9cbiAgcHJpdmF0ZSBjaGVja1Zpc2liaWxpdHkoKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLndpZGdldEVsZW1lbnQpIHJldHVybiBmYWxzZVxuICAgIFxuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndpZGdldEVsZW1lbnRcbiAgICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpXG4gICAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBcbiAgICBjb25zdCBpc1Zpc2libGUgPSAoXG4gICAgICBzdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScgJiZcbiAgICAgIHN0eWxlLnZpc2liaWxpdHkgIT09ICdoaWRkZW4nICYmXG4gICAgICBzdHlsZS5vcGFjaXR5ICE9PSAnMCcgJiZcbiAgICAgIHJlY3Qud2lkdGggPiAwICYmXG4gICAgICByZWN0LmhlaWdodCA+IDAgJiZcbiAgICAgIHJlY3QudG9wIDwgd2luZG93LmlubmVySGVpZ2h0ICYmXG4gICAgICByZWN0LmJvdHRvbSA+IDAgJiZcbiAgICAgIHJlY3QubGVmdCA8IHdpbmRvdy5pbm5lcldpZHRoICYmXG4gICAgICByZWN0LnJpZ2h0ID4gMFxuICAgIClcbiAgICBcbiAgICByZXR1cm4gaXNWaXNpYmxlXG4gIH1cblxuICAvKipcbiAgICogTm90aWZpZXMgSGVscGVyU2ltcGxlIG9mIHBhbmVsIHZpc2liaWxpdHkgc3RhdGUgY2hhbmdlcy5cbiAgICovXG4gIHByaXZhdGUgbm90aWZ5SGVscGVyU2ltcGxlT2ZQYW5lbFN0YXRlKGlzVmlzaWJsZTogYm9vbGVhbiwgd2lkZ2V0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBpc09wZW46IGlzVmlzaWJsZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiBpc1Zpc2libGUgPyAncGFuZWwtb3BlbmVkJyA6ICdwYW5lbC1jbG9zZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBpc1Zpc2libGUsXG4gICAgICBtZXRob2Q6ICdub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIExvZ3MgdmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VzIGFuZCBjYWxscyBjYWxsYmFja3MuXG4gICAqL1xuICBwcml2YXRlIGxvZ1Zpc2liaWxpdHlDaGFuZ2UoXG4gICAgaXNWaXNpYmxlOiBib29sZWFuLFxuICAgIG1ldGhvZDogc3RyaW5nLFxuICAgIHdpZGdldElkOiBzdHJpbmcsXG4gICAgY2FsbGJhY2tzOiBWaXNpYmlsaXR5Q2FsbGJhY2tzXG4gICk6IHZvaWQge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6IGlzVmlzaWJsZSA/ICdwYW5lbC1vcGVuZWQnIDogJ3BhbmVsLWNsb3NlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGlzVmlzaWJsZSxcbiAgICAgIG1ldGhvZCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBOb3RpZnkgSGVscGVyU2ltcGxlXG4gICAgdGhpcy5ub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUoaXNWaXNpYmxlLCB3aWRnZXRJZClcbiAgICBcbiAgICAvLyBDYWxsIG9wdGlvbmFsIGNhbGxiYWNrXG4gICAgaWYgKGNhbGxiYWNrcy5vblZpc2liaWxpdHlDaGFuZ2UpIHtcbiAgICAgIGNhbGxiYWNrcy5vblZpc2liaWxpdHlDaGFuZ2UoaXNWaXNpYmxlKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHZpc2liaWxpdHkgZGV0ZWN0aW9uLlxuICAgKi9cbiAgc2V0dXAoXG4gICAgd2lkZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPixcbiAgICBjYWxsYmFja3M6IFZpc2liaWxpdHlDYWxsYmFja3MsXG4gICAgb25WaXNpYmlsaXR5U3RhdGVDaGFuZ2U6IChpc1Zpc2libGU6IGJvb2xlYW4pID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgeyBpZCB9ID0gcHJvcHNcbiAgICB0aGlzLndpZGdldEVsZW1lbnQgPSB3aWRnZXRFbGVtZW50XG5cbiAgICAvLyBXYWl0IGZvciBuZXh0IHRpY2sgdG8gZW5zdXJlIGVsZW1lbnQgaXMgcmVhZHlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghdGhpcy53aWRnZXRFbGVtZW50KSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAtZmFpbGVkJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgcmVhc29uOiAnd2lkZ2V0LWVsZW1lbnQtbm90LWF2YWlsYWJsZSdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndpZGdldEVsZW1lbnRcblxuICAgICAgLy8gTWV0aG9kIDE6IEludGVyc2VjdGlvbk9ic2VydmVyIChtb3N0IGVmZmljaWVudClcbiAgICAgIGlmICgnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdykge1xuICAgICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICAoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBlbnRyaWVzWzBdXG4gICAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSBlbnRyeS5pc0ludGVyc2VjdGluZyAmJiBlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+IDBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgc3RhdGUgY2hhbmdlZFxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQYW5lbFZpc2libGUgIT09IGlzVmlzaWJsZSkge1xuICAgICAgICAgICAgICB0aGlzLmlzUGFuZWxWaXNpYmxlID0gaXNWaXNpYmxlXG4gICAgICAgICAgICAgIHRoaXMubG9nVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGUsICdJbnRlcnNlY3Rpb25PYnNlcnZlcicsIGlkLCBjYWxsYmFja3MpXG4gICAgICAgICAgICAgIG9uVmlzaWJpbGl0eVN0YXRlQ2hhbmdlKGlzVmlzaWJsZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRocmVzaG9sZDogWzAsIDAuMSwgMS4wXSwgLy8gVHJpZ2dlciBhdCAwJSwgMTAlLCBhbmQgMTAwJSB2aXNpYmlsaXR5XG4gICAgICAgICAgICByb290TWFyZ2luOiAnMHB4J1xuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgICAgICBldmVudDogJ3Zpc2liaWxpdHktZGV0ZWN0aW9uLXNldHVwJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgbWV0aG9kOiAnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNZXRob2QgMjogRmFsbGJhY2sgdG8gcGVyaW9kaWMgY2hlY2tpbmdcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gdGhpcy5jaGVja1Zpc2liaWxpdHkoKVxuICAgICAgICAgIGlmICh0aGlzLmlzUGFuZWxWaXNpYmxlICE9PSBpc1Zpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuaXNQYW5lbFZpc2libGUgPSBpc1Zpc2libGVcbiAgICAgICAgICAgIHRoaXMubG9nVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGUsICdwZXJpb2RpYy1jaGVjaycsIGlkLCBjYWxsYmFja3MpXG4gICAgICAgICAgICBvblZpc2liaWxpdHlTdGF0ZUNoYW5nZShpc1Zpc2libGUpXG4gICAgICAgICAgfVxuICAgICAgICB9LCAyNTApIC8vIENoZWNrIGV2ZXJ5IDI1MG1zXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgICAgICBldmVudDogJ3Zpc2liaWxpdHktZGV0ZWN0aW9uLXNldHVwJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgbWV0aG9kOiAncGVyaW9kaWMtY2hlY2snXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSwgMTAwKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCB2aXNpYmlsaXR5IGRldGVjdGlvbiBvYnNlcnZlcnMvaW50ZXJ2YWxzLlxuICAgKi9cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAvLyBDbGVhbiB1cCBJbnRlcnNlY3Rpb25PYnNlcnZlclxuICAgIGlmICh0aGlzLnZpc2liaWxpdHlPYnNlcnZlcikge1xuICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlciA9IG51bGxcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgaW50ZXJ2YWxcbiAgICBpZiAodGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbCAhPT0gbnVsbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnZpc2liaWxpdHlDaGVja0ludGVydmFsKVxuICAgICAgdGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbCA9IG51bGxcbiAgICB9XG4gICAgXG4gICAgdGhpcy53aWRnZXRFbGVtZW50ID0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY3VycmVudCB2aXNpYmlsaXR5IHN0YXRlLlxuICAgKi9cbiAgZ2V0SXNQYW5lbFZpc2libGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNQYW5lbFZpc2libGVcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZmllcyBIZWxwZXJTaW1wbGUgb24gbW91bnQuXG4gICAqL1xuICBub3RpZnlNb3VudCh3aWRnZXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3Qgb3BlbkV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBpc09wZW46IHRydWVcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQob3BlbkV2ZW50KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6ICd3aWRnZXQtbW91bnRlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZmllcyBIZWxwZXJTaW1wbGUgb24gdW5tb3VudC5cbiAgICovXG4gIG5vdGlmeVVubW91bnQod2lkZ2V0SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGNsb3NlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGlzT3BlbjogZmFsc2VcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoY2xvc2VFdmVudClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1dJREdFVC1TVEFURScsIHtcbiAgICAgIGV2ZW50OiAnd2lkZ2V0LXVubW91bnRlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgfVxufVxuIiwiLyoqXG4gKiBIb29rIGZvciB6b29taW5nIHRvIGZlYXR1cmUgcmVjb3JkcyB3aXRoIHBhZGRpbmcuXG4gKiBcbiAqIFdyYXBzIHRoZSBzaGFyZWQgem9vbVRvUmVjb3JkcyB1dGlsaXR5IGZ1bmN0aW9uIGluIGEgUmVhY3QgaG9vay5cbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgdHlwZSB7IEZlYXR1cmVEYXRhUmVjb3JkIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgem9vbVRvUmVjb3JkcywgdHlwZSBab29tVG9SZWNvcmRzT3B0aW9ucyB9IGZyb20gJy4uL3pvb20tdXRpbHMnXG5cbi8qKlxuICogQ3VzdG9tIGhvb2sgdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdG8gem9vbSB0byByZWNvcmRzIHdpdGggcGFkZGluZy5cbiAqIFxuICogQHBhcmFtIG1hcFZpZXcgLSBUaGUgbWFwIHZpZXcgdG8gem9vbVxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHRha2VzIHJlY29yZHMgYW5kIG9wdGlvbmFsIHBhZGRpbmcsIGFuZCB6b29tcyB0byB0aGVtXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2Vab29tVG9SZWNvcmRzKFxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSwgb3B0aW9ucz86IFpvb21Ub1JlY29yZHNPcHRpb25zKSA9PiBQcm9taXNlPHZvaWQ+IHtcbiAgXG4gIHJldHVybiBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoXG4gICAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICBvcHRpb25zPzogWm9vbVRvUmVjb3Jkc09wdGlvbnNcbiAgKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgaWYgKCFtYXBWaWV3KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgYXdhaXQgem9vbVRvUmVjb3JkcyhtYXBWaWV3LCByZWNvcmRzLCBvcHRpb25zKVxuICB9LCBbbWFwVmlld10pXG59XG5cbi8vIFJlLWV4cG9ydCB0eXBlcyBmb3IgY29udmVuaWVuY2VcbmV4cG9ydCB0eXBlIHsgWm9vbVRvUmVjb3Jkc09wdGlvbnMgfSBmcm9tICcuLi96b29tLXV0aWxzJ1xuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIHR5cGUgSW1tdXRhYmxlQXJyYXksIG1vZHVsZUxvYWRlciwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgdHlwZSAqIGFzIGppbXVNYXAgZnJvbSAnamltdS11aS9hZHZhbmNlZC9tYXAnXG5pbXBvcnQgeyBDcmVhdGVUb29sVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IEVudGl0eVN0YXR1c1R5cGUsIFN0YXR1c0luZGljYXRvciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5leHBvcnQgaW50ZXJmYWNlIEludGVyYWN0aXZlRHJhd1Byb3BzIHtcbiAgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgdG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cbiAgb25EcmF3RW5kOiAoZ3JhcGhpYzogX19lc3JpLkdyYXBoaWMsIGdldExheWVyRnVuPywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4gdm9pZFxufVxuXG5jb25zdCBza2V0Y2hUb29sSW5mb01hcCA9IHtcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvaW50XTogeyBkcmF3VG9vbE5hbWU6ICdwb2ludCcsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcG9pbnQnLCB0b29sSW5kZXg6IDAgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvbHlsaW5lXTogeyBkcmF3VG9vbE5hbWU6ICdwb2x5bGluZScsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcG9seWxpbmUnLCB0b29sSW5kZXg6IDQgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlBvbHlnb25dOiB7IGRyYXdUb29sTmFtZTogJ3BvbHlnb24nLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvbHlnb24nLCB0b29sSW5kZXg6IDIgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLlJlY3RhbmdsZV06IHtcbiAgICBkcmF3VG9vbE5hbWU6ICdyZWN0YW5nbGUnLFxuICAgIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tY2hlY2tib3gtdW5jaGVja2VkJyxcbiAgICB0b29sSW5kZXg6IDFcbiAgfSxcbiAgW0NyZWF0ZVRvb2xUeXBlLkNpcmNsZV06IHsgZHJhd1Rvb2xOYW1lOiAnY2lyY2xlJywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1yYWRpby11bmNoZWNrZWQnLCB0b29sSW5kZXg6IDMgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gSW50ZXJhY3RpdmVEcmF3IChwcm9wczogSW50ZXJhY3RpdmVEcmF3UHJvcHMpIHtcbiAgY29uc3QgeyB0b29sVHlwZXMgPSBbXSwgamltdU1hcFZpZXcsIG9uRHJhd0VuZCwgd2lkZ2V0SWQgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IFttYXBNb2R1bGUsIHNldE1hcE1vZHVsZV0gPSBSZWFjdC51c2VTdGF0ZTx0eXBlb2YgamltdU1hcD4obnVsbClcbiAgY29uc3QgZ2V0TGF5ZXJGdW5SZWYgPSBSZWFjdC51c2VSZWY8KCkgPT4gX19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBfX2VzcmkuTWFwTm90ZXNMYXllcj4obnVsbClcbiAgY29uc3QgZ3JhcGhpY1JlZiA9IFJlYWN0LnVzZVJlZihudWxsKVxuICBjb25zdCBbY2xlYXJBZnRlckFwcGx5LCBzZXRDbGVhckFmdGVyQXBwbHldID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG5cbiAgY29uc3QgdmlzaWJsZUVsZW1lbnRzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZVRvb2xzOiBPYmplY3QuZW50cmllcyhza2V0Y2hUb29sSW5mb01hcCkucmVkdWNlKFxuICAgICAgICAocmVzdWx0LCBba2V5LCB2YWx1ZV0pID0+ICh7IC4uLnJlc3VsdCwgW3ZhbHVlLmRyYXdUb29sTmFtZV06IHRvb2xUeXBlcy5pbmNsdWRlcyhrZXkgYXMgQ3JlYXRlVG9vbFR5cGUpIH0pLFxuICAgICAgICB7IHBvaW50OiBmYWxzZSB9XG4gICAgICApIGFzIGFueSxcbiAgICAgIHNlbGVjdGlvblRvb2xzOiB7XG4gICAgICAgICdsYXNzby1zZWxlY3Rpb24nOiBmYWxzZSxcbiAgICAgICAgJ3JlY3RhbmdsZS1zZWxlY3Rpb24nOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHNldHRpbmdzTWVudTogZmFsc2UsXG4gICAgICB1bmRvUmVkb01lbnU6IGZhbHNlLFxuICAgICAgZGVsZXRlQnV0dG9uOiB0cnVlXG4gICAgfVxuICB9LCBbdG9vbFR5cGVzXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBtb2R1bGVMb2FkZXIubG9hZE1vZHVsZTx0eXBlb2YgamltdU1hcD4oJ2ppbXUtdWkvYWR2YW5jZWQvbWFwJykudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBzZXRNYXBNb2R1bGUocmVzdWx0KVxuICAgIH0pXG4gIH0pXG5cbiAgY29uc3QgaGFuZGxlRHJhd1Rvb2xDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soKGppbXVEcmF3VG9vbHNSZWY6IGppbXVNYXAuSmltdURyYXdDcmVhdGVkRGVzY3JpcHRvcikgPT4ge1xuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgPSBqaW11RHJhd1Rvb2xzUmVmLmdldEdyYXBoaWNzTGF5ZXJcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlRHJhd1N0YXJ0ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgKChnZXRMYXllckZ1blJlZi5jdXJyZW50KSgpIGFzIF9fZXNyaS5HcmFwaGljc0xheWVyKS5yZW1vdmVBbGwoKVxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVEcmF3RW5kID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKGdyYXBoaWMpID0+IHtcbiAgICAgIGdyYXBoaWNSZWYuY3VycmVudCA9IGdyYXBoaWNcbiAgICAgIG9uRHJhd0VuZChncmFwaGljLCBnZXRMYXllckZ1blJlZi5jdXJyZW50LCBjbGVhckFmdGVyQXBwbHkpXG4gICAgfSxcbiAgICBbb25EcmF3RW5kLCBjbGVhckFmdGVyQXBwbHldXG4gIClcblxuICBjb25zdCBoYW5kbGVDbGVhcmVkID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGdyYXBoaWNSZWYuY3VycmVudCA9IG51bGxcbiAgICBvbkRyYXdFbmQobnVsbClcbiAgfSwgW29uRHJhd0VuZF0pXG5cbiAgY29uc3QgaGFuZGxlQ2xlYXJTZXR0aW5nQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBpZiAoZ3JhcGhpY1JlZi5jdXJyZW50KSB7XG4gICAgICBvbkRyYXdFbmQoZ3JhcGhpY1JlZi5jdXJyZW50LCBnZXRMYXllckZ1blJlZi5jdXJyZW50LCBlLnRhcmdldC5jaGVja2VkKVxuICAgIH1cbiAgICBzZXRDbGVhckFmdGVyQXBwbHkoZS50YXJnZXQuY2hlY2tlZClcbiAgfSwgW29uRHJhd0VuZF0pXG5cbiAgY29uc3QgSmltdURyYXcgPSBtYXBNb2R1bGU/LkppbXVEcmF3XG4gIGlmICghSmltdURyYXcpIHtcbiAgICByZXR1cm4gPFN0YXR1c0luZGljYXRvciBzdGF0dXNUeXBlPXtFbnRpdHlTdGF0dXNUeXBlLkxvYWRpbmd9IC8+XG4gIH1cbiAgY29uc3QgaXNBdmFpbGFibGUgPSBPYmplY3Qua2V5cyh2aXNpYmxlRWxlbWVudHMuY3JlYXRlVG9vbHMpLnNvbWUodG9vbE5hbWUgPT4gdmlzaWJsZUVsZW1lbnRzLmNyZWF0ZVRvb2xzW3Rvb2xOYW1lXSlcbiAgaWYgKCFpc0F2YWlsYWJsZSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPEppbXVEcmF3XG4gICAgICAgIGppbXVNYXBWaWV3PXtqaW11TWFwVmlld31cbiAgICAgICAgb3BlcmF0b3JXaWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgIGRpc2FibGVTeW1ib2xTZWxlY3RvclxuICAgICAgICBkcmF3aW5nT3B0aW9ucz17e1xuICAgICAgICAgIGNyZWF0aW9uTW9kZTogbWFwTW9kdWxlLkppbXVEcmF3Q3JlYXRpb25Nb2RlLlNpbmdsZSxcbiAgICAgICAgICB1cGRhdGVPbkdyYXBoaWNDbGljazogZmFsc2UsXG4gICAgICAgICAgdmlzaWJsZUVsZW1lbnRzOiB2aXNpYmxlRWxlbWVudHNcbiAgICAgICAgfX1cbiAgICAgICAgdWlPcHRpb25zPXt7XG4gICAgICAgICAgaXNIaWRlQm9yZGVyOiB0cnVlXG4gICAgICAgIH19XG4gICAgICAgIG9uSmltdURyYXdDcmVhdGVkPXtoYW5kbGVEcmF3VG9vbENyZWF0ZWR9XG4gICAgICAgIG9uRHJhd2luZ1N0YXJ0ZWQ9e2hhbmRsZURyYXdTdGFydH1cbiAgICAgICAgb25EcmF3aW5nRmluaXNoZWQ9e2hhbmRsZURyYXdFbmR9XG4gICAgICAgIG9uRHJhd2luZ0NsZWFyZWQ9e2hhbmRsZUNsZWFyZWR9XG4gICAgICAvPlxuICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgIDxDaGVja2JveCBjaGVja2VkPXtjbGVhckFmdGVyQXBwbHl9IG9uQ2hhbmdlPXtoYW5kbGVDbGVhclNldHRpbmdDaGFuZ2V9IGNsYXNzTmFtZT0nbXItMicgLz5cbiAgICAgICAge2dldEkxOG5NZXNzYWdlKCdjbGVhckRyYXdpbmcnKX1cbiAgICAgIDwvbGFiZWw+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7IFJlYWN0LCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IExvYWRpbmcsIExvYWRpbmdUeXBlIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHN0eWxlZCB9IGZyb20gJ2ppbXUtdGhlbWUnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcblxuY29uc3QgUm9vdCA9IHN0eWxlZC5kaXZgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBib3R0b206IDA7XG4gIHJpZ2h0OiAwO1xuICBsZWZ0OiAwO1xuICB6LWluZGV4OiAyO1xuXG4gIC5sb2FkaW5nLWNvbnRlbnQge1xuICAgIC5sb2FkaW5nLXRpcCB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuICB9XG5gXG5leHBvcnQgZnVuY3Rpb24gTG9hZGluZ1Jlc3VsdCAoKSB7XG4gIGNvbnN0IHRyYW5zbGF0ZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICByZXR1cm4gKFxuICAgIDxSb290PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2xvYWRpbmctY29udGVudCB3LTEwMCBweC00IGQtZmxleCBmbGV4LWNvbHVtbiBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgIDxkaXYgcm9sZT0nYWxlcnQnIGFyaWEtbGl2ZT0nYXNzZXJ0aXZlJyBjbGFzc05hbWU9J3RleHQtcGFwZXInPlxuICAgICAgICAgIHt0cmFuc2xhdGUoJ3JldHJpZXZpbmcnKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxMb2FkaW5nIGNsYXNzTmFtZT0nbG9hZGluZy10aXAgbXQtOCcgdHlwZT17TG9hZGluZ1R5cGUuRG9udXR9Lz5cbiAgICAgIDwvZGl2PlxuICAgIDwvUm9vdD5cbiAgKVxufVxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIFJlYWN0UmVkdXgsXG4gIGpzeCxcbiAgY3NzLFxuICB0eXBlIERhdGFTb3VyY2UsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgY2xhc3NOYW1lc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgVHJhc2hPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3RyYXNoJ1xuaW1wb3J0IEZlYXR1cmVJbmZvIGZyb20gJy4vY29tcG9uZW50cy9mZWF0dXJlLWluZm8nXG5pbXBvcnQgeyBMaXN0RGlyZWN0aW9uIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlc3VsdEl0ZW1Qcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcG9wdXBUZW1wbGF0ZTogYW55XG4gIGRlZmF1bHRQb3B1cFRlbXBsYXRlOiBhbnlcbiAgZGF0YTogRmVhdHVyZURhdGFSZWNvcmRcbiAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZVxuICBleHBhbmRCeURlZmF1bHQ6IGJvb2xlYW5cbiAgb25DbGljazogKHJlY29yZDogRmVhdHVyZURhdGFSZWNvcmQpID0+IHZvaWRcbiAgb25SZW1vdmU6IChyZWNvcmQ6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG59XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICBvdmVyZmxvdzogYXV0bztcbiAgZmxleC1mbG93OiByb3c7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZmxleC1zaHJpbms6IDA7XG4gIG1pbi1oZWlnaHQ6IDJyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgJi5zZWxlY3RlZCB7XG4gICAgb3V0bGluZTogMnB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pO1xuICB9XG4gIFxuICAucmVtb3ZlLWJ1dHRvbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gICAgei1pbmRleDogMTA7XG4gICAgb3BhY2l0eTogMC43O1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycztcbiAgICBcbiAgICAmOmhvdmVyIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICAgIFxuICAgIC8vIExhcmdlciB0b3VjaCB0YXJnZXQgZm9yIG1vYmlsZS9hY2Nlc3NpYmlsaXR5XG4gICAgbWluLXdpZHRoOiAzMnB4O1xuICAgIG1pbi1oZWlnaHQ6IDMycHg7XG4gIH1cbmBcblxuLyoqXG4gKiBRdWVyeVJlc3VsdEl0ZW0gY29tcG9uZW50IC0gZGlzcGxheXMgYSBzaW5nbGUgcXVlcnkgcmVzdWx0IHJlY29yZFxuICogRmVhdHVyZXM6XG4gKiAtIENsaWNraW5nIHRoZSBpdGVtIHpvb21zIHRvIHRoZSBmZWF0dXJlIG9uIHRoZSBtYXBcbiAqIC0gUmVtb3ZlIGJ1dHRvbiAodHJhc2ggaWNvbikgaW4gdXBwZXItcmlnaHQgY29ybmVyIHRvIHJlbW92ZSByZWNvcmQgZnJvbSByZXN1bHRzXG4gKiAtIFJlY29yZHMgYXJlIGV4cGFuZGVkIGJ5IGRlZmF1bHQgdG8gc2hvdyBmdWxsIGZlYXR1cmUgaW5mb3JtYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IFF1ZXJ5UmVzdWx0SXRlbSA9IChwcm9wczogUmVzdWx0SXRlbVByb3BzKSA9PiB7XG4gIGNvbnN0IHsgd2lkZ2V0SWQsIGRhdGEsIGRhdGFTb3VyY2UsIHBvcHVwVGVtcGxhdGUsIGRlZmF1bHRQb3B1cFRlbXBsYXRlLCBvbkNsaWNrLCBvblJlbW92ZSwgZXhwYW5kQnlEZWZhdWx0ID0gZmFsc2UgfSA9IHByb3BzXG4gIFxuICBjb25zdCByZWNvcmRJZCA9IGRhdGEuZ2V0SWQoKVxuICBcbiAgLy8gTG9nIHdoZW4gUXVlcnlSZXN1bHRJdGVtIHJlbmRlcnNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgIGV2ZW50OiAnUXVlcnlSZXN1bHRJdGVtLXJlbmRlcicsXG4gICAgICByZWNvcmRJZCxcbiAgICAgIGV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtyZWNvcmRJZCwgZXhwYW5kQnlEZWZhdWx0XSlcbiAgXG4gIC8vIENoZWNrIGlmIHRoaXMgcmVjb3JkIGlzIGN1cnJlbnRseSBzZWxlY3RlZFxuICBjb25zdCBzZWxlY3RlZCA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PlxuICAgIHN0YXRlLmRhdGFTb3VyY2VzSW5mbz8uW2RhdGFTb3VyY2UuaWRdPy5zZWxlY3RlZElkcz8uaW5jbHVkZXMoZGF0YS5nZXRJZCgpKVxuICApXG4gIFxuICAvLyBEZXRlcm1pbmUgaWYgbGlzdCBpcyBkaXNwbGF5ZWQgdmVydGljYWxseSAoYWZmZWN0cyBGZWF0dXJlSW5mbyBleHBhbmRhYmlsaXR5KVxuICBjb25zdCBpc1ZlcnRpY2FsQWxpZ24gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0TGlzdERpcmVjdGlvbiAhPT0gTGlzdERpcmVjdGlvbi5Ib3Jpem9udGFsXG4gIH0pXG5cbiAgLy8gSGFuZGxlIGNsaWNraW5nIG9uIHRoZSByZXN1bHQgaXRlbSAtIHpvb21zIHRvIGZlYXR1cmUgb24gbWFwXG4gIGNvbnN0IGhhbmRsZUNsaWNrUmVzdWx0SXRlbSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgLy8gRG9uJ3QgdHJpZ2dlciB6b29tIGlmIGNsaWNraW5nIHRoZSByZW1vdmUgYnV0dG9uXG4gICAgaWYgKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnLnJlbW92ZS1idXR0b24nKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIG9uQ2xpY2soZGF0YSlcbiAgfSwgW29uQ2xpY2ssIGRhdGFdKVxuXG4gIC8vIEhhbmRsZSBjbGlja2luZyB0aGUgcmVtb3ZlIGJ1dHRvbiAtIHJlbW92ZXMgcmVjb3JkIGZyb20gcmVzdWx0cyBhbmQgc2VsZWN0aW9uXG4gIGNvbnN0IGhhbmRsZVJlbW92ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKSAvLyBQcmV2ZW50IHRyaWdnZXJpbmcgdGhlIGl0ZW0gY2xpY2sgaGFuZGxlclxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIG9uUmVtb3ZlKGRhdGEpXG4gIH0sIFtvblJlbW92ZSwgZGF0YV0pXG5cbiAgY29uc3Qgb25LZXlVcCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VudGVyJyB8fCBldnQua2V5ID09PSAnICcpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIGhhbmRsZUNsaWNrUmVzdWx0SXRlbShldnQgYXMgYW55KVxuICAgIH1cbiAgfSwgW2hhbmRsZUNsaWNrUmVzdWx0SXRlbV0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXJlc3VsdC1pdGVtJywgeyBzZWxlY3RlZCB9KX1cbiAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsaWNrUmVzdWx0SXRlbX1cbiAgICAgIG9uS2V5VXA9e29uS2V5VXB9XG4gICAgICBjc3M9e3N0eWxlfVxuICAgICAgcm9sZT0nb3B0aW9uJ1xuICAgICAgYXJpYS1zZWxlY3RlZD17c2VsZWN0ZWR9XG4gICAgICB0YWJJbmRleD17MH1cbiAgICA+XG4gICAgICA8RmVhdHVyZUluZm9cbiAgICAgICAgZ3JhcGhpYz17ZGF0YS5mZWF0dXJlIGFzIF9fZXNyaS5HcmFwaGljfVxuICAgICAgICBwb3B1cFRlbXBsYXRlPXtwb3B1cFRlbXBsYXRlfVxuICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZT17ZGVmYXVsdFBvcHVwVGVtcGxhdGV9XG4gICAgICAgIHRvZ2dsYWJsZT17aXNWZXJ0aWNhbEFsaWdufVxuICAgICAgICBleHBhbmRCeURlZmF1bHQ9e2V4cGFuZEJ5RGVmYXVsdH1cbiAgICAgICAgZGF0YVNvdXJjZT17ZGF0YVNvdXJjZX1cbiAgICAgIC8+XG4gICAgICA8QnV0dG9uXG4gICAgICAgIGNsYXNzTmFtZT1cInJlbW92ZS1idXR0b25cIlxuICAgICAgICBpY29uXG4gICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgIHZhcmlhbnQ9XCJ0ZXh0XCJcbiAgICAgICAgY29sb3I9XCJpbmhlcml0XCJcbiAgICAgICAgb25DbGljaz17aGFuZGxlUmVtb3ZlfVxuICAgICAgICBhcmlhLWxhYmVsPVwiUmVtb3ZlIHJlY29yZFwiXG4gICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDZweDtcbiAgICAgICAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgYH1cbiAgICAgID5cbiAgICAgICAgPFRyYXNoT3V0bGluZWQgc2l6ZT17MTh9IC8+XG4gICAgICA8L0J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBEYXRhUmVjb3JkLFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICBEYXRhU291cmNlQ29tcG9uZW50LFxuICBEYXRhU291cmNlTWFuYWdlcixcbiAgSW1tdXRhYmxlLFxuICBob29rcyxcbiAgTWVzc2FnZU1hbmFnZXIsXG4gIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCxcbiAgdHlwZSBEYXRhUmVjb3JkU2V0LFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlLFxuICBEYXRhQWN0aW9uTWFuYWdlcixcbiAgRGF0YUxldmVsLFxuICB1c2VJbnRsXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJ1dHRvbiwgSWNvbiwgVG9vbHRpcCwgRGF0YUFjdGlvbkxpc3QsIERhdGFBY3Rpb25MaXN0U3R5bGUgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAgfSBmcm9tICcuL3dpZGdldC1jb25maWcnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIEZpZWxkc1R5cGUsIFBhZ2luZ1R5cGUsIExpc3REaXJlY3Rpb24sIFJlc3VsdFNlbGVjdE1vZGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IHVzZVpvb21Ub1JlY29yZHMgfSBmcm9tICcuL2hvb2tzL3VzZS16b29tLXRvLXJlY29yZHMnXG4vLyBGT1JDRUQ6IEFsd2F5cyBTaW1wbGVMaXN0IC0gTGF6eUxpc3QgYW5kIFBhZ2luZ0xpc3QgcmVtb3ZlZFxuaW1wb3J0IHsgU2ltcGxlTGlzdCB9IGZyb20gJy4vc2ltcGxlLWxpc3QnXG5pbXBvcnQgeyBjb21iaW5lRmllbGRzIH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcbmltcG9ydCB7IEFycm93TGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0J1xuaW1wb3J0IHsgRXhwYW5kQWxsT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwnXG5pbXBvcnQgeyBDb2xsYXBzZUFsbE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwnXG5pbXBvcnQgeyBnZXRFeHRyYUFjdGlvbnMgfSBmcm9tICcuLi9kYXRhLWFjdGlvbnMnXG5pbXBvcnQgeyBcbiAgc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMsIFxuICBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMsIFxuICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCxcbiAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2UsXG4gIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQgXG59IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZCwgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zIH0gZnJvbSAnLi9yZXN1bHRzLW1hbmFnZW1lbnQtdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5pbXBvcnQgeyBFcnJvck1lc3NhZ2UgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmNvbnN0IHsgaWNvbk1hcCB9ID0gZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAoKVxuXG4vKipcbiAqIEN1c3RvbSBldmVudCBuYW1lIGZvciByZXF1ZXN0aW5nIHJlc3RvcmF0aW9uIHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzLlxuICovXG5jb25zdCBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXJlc3RvcmUtb24taWRlbnRpZnktY2xvc2UnXG5cbi8qKlxuICogRGV0ZWN0cyBpZiBhbiBpZGVudGlmeSBwb3B1cCBpcyBjdXJyZW50bHkgdmlzaWJsZSBpbiB0aGUgRE9NLlxuICogVXNlcyB2ZXJpZmllZCBzZWxlY3RvcnMgYmFzZWQgb24gRXhwZXJpZW5jZSBCdWlsZGVyJ3MgaWRlbnRpZnkgcG9wdXAgc3RydWN0dXJlLlxuICogXG4gKiBAcmV0dXJucyB0cnVlIGlmIGlkZW50aWZ5IHBvcHVwIGlzIGRldGVjdGVkIGFuZCB2aXNpYmxlLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZnVuY3Rpb24gaXNJZGVudGlmeVBvcHVwT3BlbigpOiBib29sZWFuIHtcbiAgLy8gUHJpbWFyeSBzZWxlY3RvcjogLmVzcmktcG9wdXAgd2l0aCByb2xlPVwiZGlhbG9nXCJcbiAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXNyaS1wb3B1cFtyb2xlPVwiZGlhbG9nXCJdJylcbiAgXG4gIGlmICghcG9wdXApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgLy8gVmVyaWZ5IGl0J3MgdmlzaWJsZSAobm90IGhpZGRlbilcbiAgY29uc3QgYXJpYUhpZGRlbiA9IHBvcHVwLmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKVxuICBpZiAoYXJpYUhpZGRlbiA9PT0gJ3RydWUnKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIEFkZGl0aW9uYWwgY2hlY2s6IHZlcmlmeSBjb21wdXRlZCBzdHlsZSBzaG93cyBpdCdzIHZpc2libGVcbiAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShwb3B1cClcbiAgaWYgKHN0eWxlLmRpc3BsYXkgPT09ICdub25lJyB8fCBzdHlsZS52aXNpYmlsaXR5ID09PSAnaGlkZGVuJyB8fCBzdHlsZS5vcGFjaXR5ID09PSAnMCcpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgLy8gVmVyaWZ5IGl0IGNvbnRhaW5zIGVzcmktZmVhdHVyZXMgKGlkZW50aWZ5IHBvcHVwIHN0cnVjdHVyZSlcbiAgY29uc3QgaGFzRmVhdHVyZXMgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCcuZXNyaS1mZWF0dXJlcycpXG4gIGlmICghaGFzRmVhdHVyZXMpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgcmV0dXJuIHRydWVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tSZXN1bHRQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcmVzdWx0Q291bnQ6IG51bWJlclxuICBtYXhQZXJQYWdlOiBudW1iZXJcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4gIG91dHB1dERTOiBEYXRhU291cmNlXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4gIHJlY29yZHM6IERhdGFSZWNvcmRbXVxuICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4gIG9uTmF2QmFjazogKGNsZWFyUmVzdWx0cz86IGJvb2xlYW4pID0+IFByb21pc2U8dm9pZD4gfCB2b2lkXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdXG4gIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPzogKHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10pID0+IHZvaWRcbn1cblxuY29uc3QgcmVzdWx0U3R5bGUgPSBjc3NgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgLnF1ZXJ5LXJlc3VsdF9faGVhZGVyIHtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XG4gIH1cblxuICAucXVlcnktcmVzdWx0LWNvbnRhaW5lciB7XG4gICAgZmxleDogMSAxIDA7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIG1pbi1oZWlnaHQ6IDA7XG4gIH1cblxuICAucXVlcnktcmVzdWx0LWluZm8ge1xuICAgIGhlaWdodDogMThweDtcbiAgfVxuYFxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrUmVzdWx0IChwcm9wczogUXVlcnlUYXNrUmVzdWx0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW0sIHF1ZXJ5UGFyYW1zLCByZXN1bHRDb3VudCwgbWF4UGVyUGFnZSwgcmVjb3Jkcywgd2lkZ2V0SWQsIG91dHB1dERTLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQsIG9uTmF2QmFjaywgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IGludGwgPSB1c2VJbnRsKClcbiAgY29uc3Qgem9vbVRvUmVjb3JkcyA9IHVzZVpvb21Ub1JlY29yZHMobWFwVmlldylcbiAgY29uc3QgW3F1ZXJ5RGF0YSwgc2V0UXVlcnlEYXRhXSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IFtzZWxlY3RlZFJlY29yZHMsIHNldFNlbGVjdGVkUmVjb3Jkc10gPSBSZWFjdC51c2VTdGF0ZTxEYXRhUmVjb3JkW10+KFtdKVxuICBjb25zdCBbcmVtb3ZlZFJlY29yZElkcywgc2V0UmVtb3ZlZFJlY29yZElkc10gPSBSZWFjdC51c2VTdGF0ZTxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKVxuICBcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgW2V4cGFuZEFsbCwgc2V0RXhwYW5kQWxsXSA9IFJlYWN0LnVzZVN0YXRlKGN1cnJlbnRJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCA/PyBmYWxzZSlcbiAgLy8gVHJhY2sgaW5kaXZpZHVhbCBpdGVtIGV4cGFuc2lvbiBzdGF0ZXMgdG8gbWFpbnRhaW4gc3RhdGUgd2hlbiBpdGVtcyBhcmUgcmVtb3ZlZFxuICBjb25zdCBbaXRlbUV4cGFuZFN0YXRlcywgc2V0SXRlbUV4cGFuZFN0YXRlc10gPSBSZWFjdC51c2VTdGF0ZTxNYXA8c3RyaW5nLCBib29sZWFuPj4obmV3IE1hcCgpKVxuICBjb25zdCBiYWNrQnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIFxuICAvLyBUcmFjayBleHBhbmRBbGwgY2hhbmdlcyBmb3IgZGVidWdnaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2V4cGFuZEFsbC1zdGF0ZS1jaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgZXhwYW5kQWxsLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtleHBhbmRBbGwsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IHNlbGVjdGVkIHRoZXNlIHJlY29yZHMgdG8gcHJldmVudCByZS1zZWxlY3Rpb24gd2hlbiBzd2l0Y2hpbmcgdGFic1xuICBjb25zdCBoYXNTZWxlY3RlZFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgdGhlIGxhc3QgcmVjb3JkcyB3ZSBzZWxlY3RlZCB0byBkZXRlY3Qgd2hlbiBuZXcgcmVjb3JkcyBjb21lIGluXG4gIGNvbnN0IGxhc3RTZWxlY3RlZFJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nW10+KFtdKVxuICAvLyBUcmFjayB0aGUgb3JpZ2luYWwgcXVlcnkgcmVjb3JkIElEcyAobm90IHNlbGVjdGVkIElEcykgdG8gZGV0ZWN0IHdoZW4gcXVlcnkgcmVzdWx0cyBjaGFuZ2VcbiAgY29uc3QgbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZ1tdPihbXSlcbiAgLy8gVHJhY2sgdGhlIGxhc3Qgc2VsZWN0ZWQgRmVhdHVyZURhdGFSZWNvcmRzIGZvciByZXN0b3JhdGlvbiAoaWYgbmVlZGVkKVxuICBjb25zdCBsYXN0U2VsZWN0ZWRGZWF0dXJlUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxGZWF0dXJlRGF0YVJlY29yZFtdPihbXSlcbiAgLy8gUmVmIHRvIHRyYWNrIHJlbW92ZWRSZWNvcmRJZHMgZm9yIHVzZSBpbiBjYWxsYmFja3MgKGF2b2lkcyBzdGFsZSBjbG9zdXJlIGlzc3VlcylcbiAgY29uc3QgcmVtb3ZlZFJlY29yZElkc1JlZiA9IFJlYWN0LnVzZVJlZjxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKVxuICBcbiAgLy8gU3luYyByZWYgd2hlbmV2ZXIgcmVtb3ZlZFJlY29yZElkcyBzdGF0ZSBjaGFuZ2VzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVtb3ZlZFJlY29yZElkc1JlZi5jdXJyZW50ID0gcmVtb3ZlZFJlY29yZElkc1xuICB9LCBbcmVtb3ZlZFJlY29yZElkc10pXG4gIC8vIEVycm9yIHN0YXRlIGZvciB1c2VyLWZhY2luZyBlcnJvcnNcbiAgY29uc3QgW3NlbGVjdGlvbkVycm9yLCBzZXRTZWxlY3Rpb25FcnJvcl0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmc+KG51bGwpXG5cbiAgY29uc3QgZXh0cmFBY3Rpb25zID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGdldEV4dHJhQWN0aW9ucyh3aWRnZXRJZCwgb3V0cHV0RFMsIG1hcFZpZXcsIGludGwsIHF1ZXJ5SXRlbSwgcnVudGltZVpvb21Ub1NlbGVjdGVkKVxuICB9LCBbd2lkZ2V0SWQsIG91dHB1dERTLCBtYXBWaWV3LCBpbnRsLCBxdWVyeUl0ZW0sIHJ1bnRpbWVab29tVG9TZWxlY3RlZF0pXG5cbiAgY29uc3QgZW5hYmxlRGF0YUFjdGlvbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmVuYWJsZURhdGFBY3Rpb24gPz8gdHJ1ZVxuICB9KVxuXG4gIGNvbnN0IHBhZ2luZ1R5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRQYWdpbmdTdHlsZVxuICB9KVxuICBjb25zdCBkaXJlY3Rpb25UeXBlSW5Db25maWcgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0TGlzdERpcmVjdGlvblxuICB9KVxuICAvLyBGT1JDRSBTaW1wbGVMaXN0IC0gaWdub3JlIGNvbmZpZywgd2UncmUgZG9uZSB3aXRoIGxhenkgbG9hZGluZyBpc3N1ZXNcbiAgY29uc3QgcGFnaW5nVHlwZSA9IFBhZ2luZ1R5cGUuU2ltcGxlXG4gIGNvbnN0IGRpcmVjdGlvbiA9IGRpcmVjdGlvblR5cGVJbkNvbmZpZyA/PyBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsXG5cbiAgLy8gR3JvdXAgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2UgZm9yIERhdGFBY3Rpb25MaXN0XG4gIC8vIFRoaXMgZW5zdXJlcyBEYXRhQWN0aW9uTGlzdCByZWNvZ25pemVzIHJlY29yZHMgZXZlbiB3aGVuIHRoZXkgY29tZSBmcm9tIGRpZmZlcmVudCBxdWVyaWVzL29yaWdpbnNcbiAgY29uc3QgYWN0aW9uRGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIC8vIERlYnVnOiBMb2cgd2hhdCByZWNvcmRzIGFyZSBhdmFpbGFibGVcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtY2FsY3VsYXRpb24tc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgc2VsZWN0ZWRSZWNvcmRzQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBxdWVyeURhdGFSZWNvcmRzQ291bnQ6IHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTPy5pZCxcbiAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkczogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggPiAwLFxuICAgICAgaGFzUXVlcnlEYXRhUmVjb3JkczogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggPiAwLFxuICAgICAgaGFzUmVjb3Jkc1Byb3A6IHJlY29yZHM/Lmxlbmd0aCA+IDBcbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICAvLyBJbiBhY2N1bXVsYXRpb24gbW9kZXMgKEFkZC9SZW1vdmUpLCBwcmVmZXIgdGhlICdyZWNvcmRzJyBwcm9wICh0aGUgYWNjdW11bGF0ZWQgc2V0KVxuICAgIC8vIGJlY2F1c2Ugb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgd2lsbCBvbmx5IHJldHVybiByZWNvcmRzIHRoYXQgbWF0Y2ggdGhlIGN1cnJlbnQgcXVlcnkncyB3aGVyZSBjbGF1c2UuXG4gICAgY29uc3QgcmVjb3Jkc1RvVXNlID0gaXNBY2N1bXVsYXRpb25Nb2RlXG4gICAgICA/IChyZWNvcmRzIHx8IFtdKVxuICAgICAgOiAoc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggPiAwID8gc2VsZWN0ZWRSZWNvcmRzIDogKHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoID4gMCA/IHF1ZXJ5RGF0YS5yZWNvcmRzIDogKHJlY29yZHMgfHwgW10pKSlcbiAgICBcbiAgICAvLyBJZiBubyByZWNvcmRzLCByZXR1cm4gc2luZ2xlIERhdGFSZWNvcmRTZXQgd2l0aCBlbXB0eSByZWNvcmRzIHVzaW5nIG91dHB1dERTXG4gICAgaWYgKCFyZWNvcmRzVG9Vc2UgfHwgcmVjb3Jkc1RvVXNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZW1wdHlEYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICAgICAgdHlwZTogJ2xvYWRlZCcsXG4gICAgICAgIHJlY29yZHM6IFtdLFxuICAgICAgICBuYW1lOiBvdXRwdXREUz8uaWQsXG4gICAgICAgIGxhYmVsOiBvdXRwdXREUz8uZ2V0TGFiZWwoKVxuICAgICAgfVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtZW1wdHktcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgZGF0YVNldERhdGFTb3VyY2VJZDogZW1wdHlEYXRhU2V0LmRhdGFTb3VyY2U/LmlkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIFtlbXB0eURhdGFTZXRdXG4gICAgfVxuICAgIFxuICAgIC8vIEdyb3VwIHJlY29yZHMgYnkgdGhlaXIgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+KClcbiAgICBcbiAgICByZWNvcmRzVG9Vc2UuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgICAgY29uc3QgcmVjb3JkRFMgPSAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICBsZXQgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsID0gbnVsbFxuICAgICAgXG4gICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgb3JpZ2luRFMgPSByZWNvcmREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCByZWNvcmREU1xuICAgICAgfSBlbHNlIGlmIChvdXRwdXREUykge1xuICAgICAgICAvLyBGYWxsYmFjazogdXNlIG91dHB1dERTJ3Mgb3JpZ2luIGlmIHJlY29yZCBkb2Vzbid0IGhhdmUgZGF0YVNvdXJjZVxuICAgICAgICBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICAgIH1cbiAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKS5wdXNoKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIENyZWF0ZSBhIERhdGFSZWNvcmRTZXQgZm9yIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSA9IEFycmF5LmZyb20ocmVjb3Jkc0J5T3JpZ2luRFMuZW50cmllcygpKS5tYXAoKFtvcmlnaW5EUywgb3JpZ2luUmVjb3Jkc10pID0+IHtcbiAgICAgIGNvbnN0IGRhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICAgIGRhdGFTb3VyY2U6IG9yaWdpbkRTLCAvLyBVc2Ugb3JpZ2luIERTLCBub3Qgb3V0cHV0RFNcbiAgICAgICAgdHlwZTogJ3NlbGVjdGVkJyxcbiAgICAgICAgcmVjb3Jkczogb3JpZ2luUmVjb3JkcyxcbiAgICAgICAgbmFtZTogb3JpZ2luRFMuaWQsXG4gICAgICAgIGxhYmVsOiBvcmlnaW5EUy5nZXRMYWJlbCgpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZCBmaWVsZHMgaWYgbmVlZGVkICh1c2UgY3VycmVudEl0ZW0ncyBmaWVsZCBzZXR0aW5ncylcbiAgICAgIGlmIChjdXJyZW50SXRlbS5yZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMgJiYgY3VycmVudEl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcyAhPSBudWxsKSB7XG4gICAgICAgIGRhdGFTZXQuZmllbGRzID0gY29tYmluZUZpZWxkcyhjdXJyZW50SXRlbS5yZXN1bHREaXNwbGF5RmllbGRzLCBjdXJyZW50SXRlbS5yZXN1bHRUaXRsZUV4cHJlc3Npb24pXG4gICAgICB9IGVsc2UgaWYgKG9yaWdpbkRTICYmICdnZXRQb3B1cEluZm8nIGluIG9yaWdpbkRTKSB7XG4gICAgICAgIC8vIHVzZSBmaWVsZHMgaW4gcG9wdXAgdGVtcGxhdGUgZnJvbSBvcmlnaW4gRFNcbiAgICAgICAgY29uc3QgcG9wdXBJbmZvID0gb3JpZ2luRFMuZ2V0UG9wdXBJbmZvKClcbiAgICAgICAgaWYgKHBvcHVwSW5mbz8uZmllbGRJbmZvcykge1xuICAgICAgICAgIGRhdGFTZXQuZmllbGRzID0gcG9wdXBJbmZvLmZpZWxkSW5mb3MuZmlsdGVyKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby52aXNpYmxlKS5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YVNldFxuICAgIH0pXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGF0IHRoZSBmaW5hbCBkYXRhU2V0cyBjb250YWluXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2FjdGlvbkRhdGFTZXRzLWZpbmFsJyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzLmxlbmd0aCxcbiAgICAgIHRvdGFsUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9Vc2UubGVuZ3RoLFxuICAgICAgZGF0YVNldHNCeU9yaWdpbjogZGF0YVNldHMubWFwKGRzID0+ICh7XG4gICAgICAgIG9yaWdpbkRTSWQ6IGRzLmRhdGFTb3VyY2U/LmlkLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICB0eXBlOiBkcy50eXBlXG4gICAgICB9KSlcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIHdlIGNvdWxkbid0IGdyb3VwIGJ5IG9yaWdpbiAoc2hvdWxkbid0IGhhcHBlbiksIGZhbGxiYWNrIHRvIHNpbmdsZSBEYXRhUmVjb3JkU2V0IHdpdGggb3V0cHV0RFNcbiAgICBpZiAoZGF0YVNldHMubGVuZ3RoID09PSAwICYmIG91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1mYWxsYmFjay10by1vdXRwdXREUycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnY291bGQtbm90LWRldGVybWluZS1vcmlnaW4tZHMnXG4gICAgICB9KVxuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgICB0eXBlOiByZWNvcmRzVG9Vc2UubGVuZ3RoID4gMCA/ICdzZWxlY3RlZCcgOiAnbG9hZGVkJyxcbiAgICAgICAgcmVjb3JkczogcmVjb3Jkc1RvVXNlLFxuICAgICAgICBuYW1lOiBvdXRwdXREUy5pZCxcbiAgICAgICAgbGFiZWw6IG91dHB1dERTLmdldExhYmVsKClcbiAgICAgIH1dXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhU2V0c1xuICB9LCBbc2VsZWN0ZWRSZWNvcmRzLCBvdXRwdXREUywgcXVlcnlEYXRhLCBjdXJyZW50SXRlbSwgcmVjb3Jkcywgd2lkZ2V0SWRdKVxuXG4gIC8vIE1lbW9pemUgZmlsdGVyZWQgcmVjb3JkcyB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMgdGhhdCByZXNldCBzY3JvbGwgcG9zaXRpb25cbiAgLy8gVGhpcyBlbnN1cmVzIHRoZSByZWNvcmRzIHByb3Agb25seSBjaGFuZ2VzIHdoZW4gdGhlIGFjdHVhbCBkYXRhIGNoYW5nZXMsIG5vdCBqdXN0IHRoZSBhcnJheSByZWZlcmVuY2VcbiAgY29uc3QgZmlsdGVyZWRSZWNvcmRzRm9yTGlzdCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBxdWVyeURhdGE/LnJlY29yZHM/LmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCBcbiAgICAgICAgICAgKHJlY29yZHM/LmZpbHRlcihyZWNvcmQgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKSkgfHwgW10pXG4gIH0sIFtxdWVyeURhdGE/LnJlY29yZHMsIHJlY29yZHMsIHJlbW92ZWRSZWNvcmRJZHNdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIC8vIGZvY3VzIHRoZSBiYWNrIGJ1dHRvbiB3aGVuIGl0IGlzIHJlbmRlcmVkXG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9KVxuXG4gIC8qKlxuICAgKiBFZmZlY3QgaG9vayB0aGF0IHJ1bnMgd2hlbiBuZXcgcXVlcnkgcmVzdWx0cyBhcnJpdmUuXG4gICAqIFJlc2V0cyByZW1vdmVkIHJlY29yZHMsIGV4cGFuZCBzdGF0ZSwgYW5kIHF1ZXJ5IGRhdGEgZm9yIHRoZSBuZXcgcmVzdWx0cy5cbiAgICogQWxzbyBoYW5kbGVzIGF1dG8tc2VsZWN0aW9uIG9mIHJlY29yZHMgd2hlbiB0aGV5IGZpcnN0IGFycml2ZS5cbiAgICovXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQ2hlY2sgaWYgdGhlc2UgYXJlIG5ldyByZWNvcmRzIChkaWZmZXJlbnQgZnJvbSB3aGF0IHdlIGxhc3QgcXVlcmllZClcbiAgICAvLyBJTVBPUlRBTlQ6IENvbXBhcmUgYWdhaW5zdCBvcmlnaW5hbCBxdWVyeSByZXN1bHRzLCBub3Qgc2VsZWN0ZWQgcmVzdWx0c1xuICAgIC8vIFRoaXMgcHJldmVudHMgcmVtb3ZlZFJlY29yZElkcyBmcm9tIGJlaW5nIHJlc2V0IHdoZW4gcmVjb3JkcyBhcmUgcmVtb3ZlZFxuICAgIGNvbnN0IGN1cnJlbnRSZWNvcmRJZHMgPSByZWNvcmRzPy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKSB8fCBbXVxuICAgIGNvbnN0IHJlY29yZHNDaGFuZ2VkID0gY3VycmVudFJlY29yZElkcy5sZW5ndGggIT09IGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50Lmxlbmd0aCB8fFxuICAgICAgY3VycmVudFJlY29yZElkcy5zb21lKChpZCwgaW5kZXgpID0+IGlkICE9PSBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudFtpbmRleF0pXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGVuIHJlY29yZHMgcHJvcCBjaGFuZ2VzXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3JlY29yZHMtcHJvcC1jaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICB3aWxsU2V0UXVlcnlEYXRhOiByZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID4gMCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplLFxuICAgICAgaGFzU2VsZWN0ZWRSZWY6IGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQsXG4gICAgICByZWNvcmRzQ2hhbmdlZDogcmVjb3Jkc0NoYW5nZWQsXG4gICAgICBsYXN0UXVlcnlSZWNvcmRJZHNDb3VudDogbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQubGVuZ3RoLFxuICAgICAgY3VycmVudFJlY29yZElkc0NvdW50OiBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aFxuICAgIH0pXG4gICAgXG4gICAgLy8gSU1QT1JUQU5UOiBPbmx5IHJlc2V0IHJlbW92ZWQgcmVjb3JkcyBpZiB0aGlzIGlzIHRydWx5IGEgTkVXIHF1ZXJ5IHdpdGggZGlmZmVyZW50IHJlY29yZHNcbiAgICAvLyBEb24ndCByZXNldCBpZiByZWNvcmRzIGFyZSB0aGUgc2FtZSAoanVzdCBhIHJlLXJlbmRlciBvciBsYXp5IGxvYWQpXG4gICAgaWYgKHJlY29yZHNDaGFuZ2VkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZWNvcmRzLXRydWx5LWNoYW5nZWQtcmVzZXR0aW5nLXJlbW92ZWQnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIG9sZFJlY29yZElkc0NvdW50OiBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudC5sZW5ndGgsXG4gICAgICAgIG5ld1JlY29yZElkc0NvdW50OiBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIHNldFJlbW92ZWRSZWNvcmRJZHMobmV3IFNldCgpKVxuICAgICAgLy8gVXBkYXRlIHRoZSBvcmlnaW5hbCBxdWVyeSByZWNvcmQgSURzIHJlZlxuICAgICAgbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQgPSBjdXJyZW50UmVjb3JkSWRzXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlY29yZHMtbm90LWNoYW5nZWQtcHJlc2VydmluZy1yZW1vdmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWNvcmRJZHNDb3VudDogY3VycmVudFJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBOT1RFOiBEb24ndCByZXNldCBleHBhbmRBbGwgaGVyZSAtIGl0J3MgaGFuZGxlZCBieSB0aGUgcXVlcnlJdGVtLWNoYW5nZSB1c2VFZmZlY3RcbiAgICAvLyBSZXNldHRpbmcgaXQgaGVyZSBjYXVzZXMgdGhlIEV4cGFuZC9Db2xsYXBzZSBidXR0b24gdG8gZmxpcCBiYWNrIHdoZW4gcmVjb3JkcyBhcmUgcmVtb3ZlZFxuICAgIHNldFF1ZXJ5RGF0YSh7XG4gICAgICByZWNvcmRzLFxuICAgICAgcGFnZTogMVxuICAgIH0pXG4gICAgXG4gICAgLy8gT25seSBhdXRvLXNlbGVjdCByZWNvcmRzIGlmOlxuICAgIC8vIDEuIFdlIGhhdmUgcmVjb3JkcyBhbmQgb3V0cHV0RFNcbiAgICAvLyAyLiBXZSBoYXZlbid0IGFscmVhZHkgc2VsZWN0ZWQgdGhlc2UgcmVjb3JkcyAoaGFzU2VsZWN0ZWRSZWYgaXMgZmFsc2UpXG4gICAgLy8gMy4gT1IgdGhlIHJlY29yZHMgaGF2ZSBhY3R1YWxseSBjaGFuZ2VkIChuZXcgcXVlcnkgcmVzdWx0cylcbiAgICAvLyA0LiBBTkQgd2UgZG9uJ3QgaGF2ZSBhbnkgcmVtb3ZlZCByZWNvcmRzICh0byBwcmV2ZW50IHJlLXNlbGVjdGluZyByZW1vdmVkIG9uZXMpXG4gICAgaWYgKHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwICYmIG91dHB1dERTICYmIFxuICAgICAgICAoIWhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgfHwgcmVjb3Jkc0NoYW5nZWQpICYmIFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzLnNpemUgPT09IDApIHtcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IHJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGNvbnN0IGZkciA9IHJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgICAgXG4gICAgICAvLyBTZWxlY3QgcmVjb3JkcyBhbmQgcHVibGlzaCBzZWxlY3Rpb24gbWVzc2FnZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICAvLyBVc2UgYXN5bmMgSUlGRSBzaW5jZSB1c2VFZmZlY3QgY2FuJ3QgYmUgYXN5bmNcbiAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIHByZXZpb3VzIGVycm9yc1xuICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgICAgd2lkZ2V0SWQsIFxuICAgICAgICAgICAgb3V0cHV0RFMsIFxuICAgICAgICAgICAgcmVjb3JkSWRzLCBcbiAgICAgICAgICAgIGZkciwgXG4gICAgICAgICAgICBmYWxzZSwgXG4gICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBcbiAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXIsIFxuICAgICAgICAgICAgbWFwVmlld1xuICAgICAgICAgIClcbiAgICAgICAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gdHJ1ZSAvLyBNYXJrIGFzIHNlbGVjdGVkXG4gICAgICAgICAgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gcmVjb3JkSWRzIC8vIFN0b3JlIHRoZSBJRHMgd2Ugc2VsZWN0ZWRcbiAgICAgICAgICBsYXN0U2VsZWN0ZWRGZWF0dXJlUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmRyIC8vIFN0b3JlIHRoZSBmdWxsIHJlY29yZHMgZm9yIHBvdGVudGlhbCByZXN0b3JhdGlvblxuICAgICAgICAgIFxuICAgICAgICAgIC8vIE5vdGlmeSBXaWRnZXQgYW5kIEhlbHBlclNpbXBsZSBvZiBzZWxlY3Rpb24gY2hhbmdlXG4gICAgICAgICAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCh3aWRnZXRJZCwgcmVjb3JkSWRzLCBvdXRwdXREUywgcXVlcnlJdGVtLmNvbmZpZ0lkKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZWxlY3QgcXVlcnkgcmVzdWx0cydcbiAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdzZWxlY3Rpb24tZmFpbGVkLXF1ZXJ5LXJlc3VsdCcsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZElkcy5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KSgpXG4gICAgfSBlbHNlIGlmIChyZWNvcmRzQ2hhbmdlZCAmJiByZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBJZiByZWNvcmRzIHdlcmUgY2xlYXJlZCwgcmVzZXQgdGhlIHNlbGVjdGlvbiBmbGFnXG4gICAgICBoYXNTZWxlY3RlZFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgIGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IFtdXG4gICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBlcnJvcnMgd2hlbiBjbGVhcmluZyByZWNvcmRzXG4gICAgfSBlbHNlIGlmIChyZW1vdmVkUmVjb3JkSWRzLnNpemUgPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdza2lwcGluZy1yZXNlbGVjdGlvbi1kdWUtdG8tcmVtb3ZlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzU2VsZWN0ZWRSZWY6IGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHJlY29yZHNDaGFuZ2VkOiByZWNvcmRzQ2hhbmdlZFxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtyZWNvcmRzLCBvdXRwdXREUywgd2lkZ2V0SWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgcXVlcnlJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCwgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBjbGVhciBzZWxlY3Rpb24gd2hlbiByZXN1bHRTZWxlY3RNb2RlIGNoYW5nZWRcbiAgICBpZiAob3V0cHV0RFMpIHtcbiAgICAgIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhvdXRwdXREUywgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcilcbiAgICAgIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlKHdpZGdldElkLCBbXSwgb3V0cHV0RFMsIHRydWUpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtLnJlc3VsdFNlbGVjdE1vZGUsIG91dHB1dERTLCB3aWRnZXRJZCwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcl0pXG5cbiAgLy8gVXBkYXRlIGV4cGFuZEFsbCB3aGVuIHF1ZXJ5SXRlbSBjaGFuZ2VzIChlLmcuLCBzd2l0Y2hpbmcgYmV0d2VlbiBxdWVyaWVzKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG5ld0V4cGFuZEFsbCA9IHF1ZXJ5SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQgPz8gZmFsc2VcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnZXhwYW5kQWxsLXJlc2V0LWJ5LXF1ZXJ5SXRlbS1jaGFuZ2UnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgcmVzdWx0RXhwYW5kQnlEZWZhdWx0OiBxdWVyeUl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0LFxuICAgICAgbmV3RXhwYW5kQWxsLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBzZXRFeHBhbmRBbGwobmV3RXhwYW5kQWxsKVxuICAgIC8vIFJlc2V0IGluZGl2aWR1YWwgZXhwYW5zaW9uIHN0YXRlcyB3aGVuIHF1ZXJ5IGNoYW5nZXNcbiAgICBzZXRJdGVtRXhwYW5kU3RhdGVzKG5ldyBNYXAoKSlcbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZF0pXG5cbiAgLyoqXG4gICAqIE1vbml0b3Igb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbiBjaGFuZ2VzIHRvIGRldGVjdCB3aGVuIG90aGVyIHdpZGdldHMgKGxpa2UgbWFwIGlkZW50aWZ5KVxuICAgKiBjbGVhciBvdXIgc2VsZWN0aW9ucy4gRW5oYW5jZWQgd2l0aCBpZGVudGlmeSBwb3B1cCBkZXRlY3Rpb24gZm9yIHRlc3Rpbmcgc2NlbmFyaW9zLlxuICAgKiBXYXRjaGVzIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UncyBzZWxlY3Rpb24gc3RhdGUgZGlyZWN0bHkgdmlhIHBvbGxpbmcuXG4gICAqL1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghb3V0cHV0RFMpIHJldHVyblxuXG4gICAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIGlmICghb3JpZ2luRFMpIHJldHVyblxuXG4gICAgY29uc3Qgb3JpZ2luRFNJZCA9IG9yaWdpbkRTLmlkXG4gICAgbGV0IHByZXZpb3VzU2VsZWN0ZWRJZHM6IHN0cmluZ1tdID0gW11cbiAgICBsZXQgaWRlbnRpZnlQb3B1cFdhc09wZW4gPSBmYWxzZVxuICAgIGxldCBsYXN0TG9nVGltZSA9IDBcbiAgICBjb25zdCBMT0dfVEhST1RUTEVfTVMgPSAxMDAwIC8vIFRocm90dGxlIGxvZ3MgdG8gb25jZSBwZXIgc2Vjb25kXG4gICAgXG4gICAgLy8gSW5pdGlhbCBjaGVja1xuICAgIHByZXZpb3VzU2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgaWRlbnRpZnlQb3B1cFdhc09wZW4gPSBpc0lkZW50aWZ5UG9wdXBPcGVuKClcblxuICAgIC8vIFdhdGNoIGZvciBzZWxlY3Rpb24gY2hhbmdlcyBvbiB0aGUgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgY2hlY2tTZWxlY3Rpb24gPSAoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBjb25zdCBvdXJFeHBlY3RlZElkcyA9IGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudFxuICAgICAgY29uc3QgaGFzT3VyU2VsZWN0aW9uID0gb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaWRlbnRpZnlQb3B1cElzT3BlbiA9IGlzSWRlbnRpZnlQb3B1cE9wZW4oKVxuICAgICAgXG4gICAgICAvLyBEZXRlY3QgaWYgc2VsZWN0aW9uIHdhcyBjbGVhcmVkIG9yIGNoYW5nZWQgZXh0ZXJuYWxseVxuICAgICAgY29uc3Qgd2FzQ2xlYXJlZCA9IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoID4gMCAmJiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwXG4gICAgICBjb25zdCB3YXNDaGFuZ2VkID0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggPiAwICYmIFxuICAgICAgICAoY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCAhPT0gcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGggfHxcbiAgICAgICAgICFjdXJyZW50U2VsZWN0ZWRJZHMuZXZlcnkoaWQgPT4gcHJldmlvdXNTZWxlY3RlZElkcy5pbmNsdWRlcyhpZCkpKVxuICAgICAgXG4gICAgICAvLyBORVc6IERldGVjdCBpZiBzZWxlY3Rpb24gd2FzIGFkZGVkICh3ZW50IGZyb20gZW1wdHkgdG8gaGF2aW5nIHJlY29yZHMpXG4gICAgICBjb25zdCB3YXNBZGRlZCA9IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwICYmIGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggPiAwXG4gICAgICBcbiAgICAgIC8vIFRyYWNrIGlkZW50aWZ5IHBvcHVwIHN0YXRlIGNoYW5nZXNcbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkID0gIWlkZW50aWZ5UG9wdXBXYXNPcGVuICYmIGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkID0gaWRlbnRpZnlQb3B1cFdhc09wZW4gJiYgIWlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBTdGlsbE9wZW4gPSBpZGVudGlmeVBvcHVwV2FzT3BlbiAmJiBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICBcbiAgICAgIC8vIExvZyBpZGVudGlmeSBwb3B1cCBzdGF0ZSBjaGFuZ2VzXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG4gICAgICBpZiAoaWRlbnRpZnlQb3B1cEp1c3RPcGVuZWQgfHwgaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdTRUxFQ1RJT04nLCB7XG4gICAgICAgICAgZXZlbnQ6IGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkID8gJ2lkZW50aWZ5LXBvcHVwLW9wZW5lZCcgOiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkJyxcbiAgICAgICAgICBvcmlnaW5EU0lkLFxuICAgICAgICAgIG91clNlbGVjdGlvbkNvdW50OiBvdXJFeHBlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgY3VycmVudFNlbGVjdGlvbkNvdW50OiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBJZiBpZGVudGlmeSBwb3B1cCBqdXN0IGNsb3NlZCBhbmQgc2VsZWN0aW9uIHdhcyBjbGVhcmVkLCBkaXNwYXRjaCByZXN0b3JlIGV2ZW50XG4gICAgICAgIGlmIChpZGVudGlmeVBvcHVwSnVzdENsb3NlZCAmJiB3YXNDbGVhcmVkICYmIGhhc091clNlbGVjdGlvbiAmJiBvdXJFeHBlY3RlZElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgcmVzdG9yZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgICAgcmVjb3JkSWRzOiBvdXJFeHBlY3RlZElkcyxcbiAgICAgICAgICAgICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQocmVzdG9yZUV2ZW50KVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnU0VMRUNUSU9OJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1yZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogb3VyRXhwZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBMb2cgQUxMIHNlbGVjdGlvbiBjaGFuZ2VzIChub3QganVzdCB3aGVuIHdlIGhhdmUgb3VyIG93biBzZWxlY3Rpb24pXG4gICAgICBpZiAod2FzQ2xlYXJlZCB8fCB3YXNDaGFuZ2VkIHx8IHdhc0FkZGVkKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgbWF0Y2hlcyBvdXIgZXhwZWN0ZWQgc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IG1hdGNoZXNPdXJTZWxlY3Rpb24gPSBoYXNPdXJTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID09PSBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoICYmXG4gICAgICAgICAgb3VyRXhwZWN0ZWRJZHMuZXZlcnkoaWQgPT4gY3VycmVudFNlbGVjdGVkSWRzLmluY2x1ZGVzKGlkKSlcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluZSB3aGF0IHdvdWxkIGhhcHBlbiAoZm9yIHRlc3RpbmcvbG9nZ2luZylcbiAgICAgICAgY29uc3Qgd291bGRSZXN0b3JlID0gd2FzQ2xlYXJlZCAmJiBpZGVudGlmeVBvcHVwSXNPcGVuICYmIGhhc091clNlbGVjdGlvbiAmJiBvdXJFeHBlY3RlZElkcy5sZW5ndGggPiAwXG4gICAgICAgIFxuICAgICAgICAvLyBEZXRlcm1pbmUgc2NlbmFyaW9cbiAgICAgICAgbGV0IHNjZW5hcmlvID0gJ1Vua25vd24nXG4gICAgICAgIGlmICh3YXNBZGRlZCAmJiAhaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSAnVEVTVCBTQ0VOQVJJTyA0OiBBbm90aGVyIHdpZGdldCBzZWxlY3RlZCByZWNvcmRzICh3ZSBoYXZlIG5vIHNlbGVjdGlvbiknXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQ2hhbmdlZCAmJiAhbWF0Y2hlc091clNlbGVjdGlvbiAmJiAhaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSAnVEVTVCBTQ0VOQVJJTyA1OiBBbm90aGVyIHdpZGdldCBjaGFuZ2VkIHNlbGVjdGlvbiAod2UgaGF2ZSBubyBzZWxlY3Rpb24pJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0NoYW5nZWQgJiYgIW1hdGNoZXNPdXJTZWxlY3Rpb24gJiYgaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICAgICAgICA/ICdURVNUIFNDRU5BUklPIDI6IFF1ZXJ5IOKGkiBJZGVudGlmeSAoc2VsZWN0aW9uIGNoYW5nZWQsIG5vdCBjbGVhcmVkKSDihpIgV291bGQgTk9UIHJlc3RvcmUnXG4gICAgICAgICAgICA6ICdURVNUIFNDRU5BUklPIDM6IFF1ZXJ5IOKGkiBBbm90aGVyIFF1ZXJ5U2ltcGxlIHdpZGdldCDihpIgV291bGQgTk9UIHJlc3RvcmUnXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQ2xlYXJlZCAmJiBoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9IGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgICAgICAgID8gJ1RFU1QgU0NFTkFSSU8gMTogUXVlcnkg4oaSIElkZW50aWZ5IOKGkiBXb3VsZCByZXN0b3JlJ1xuICAgICAgICAgICAgOiAnVEVTVCBTQ0VOQVJJTyAzOiBRdWVyeSDihpIgQW5vdGhlciBRdWVyeVNpbXBsZSB3aWRnZXQgKGNsZWFyZWQpIOKGkiBXb3VsZCBOT1QgcmVzdG9yZSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNBZGRlZCAmJiBoYXNPdXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICBzY2VuYXJpbyA9IG1hdGNoZXNPdXJTZWxlY3Rpb25cbiAgICAgICAgICAgID8gJ091ciB3aWRnZXQgc2VsZWN0ZWQgcmVjb3JkcydcbiAgICAgICAgICAgIDogJ0Fub3RoZXIgd2lkZ2V0IHNlbGVjdGVkIGRpZmZlcmVudCByZWNvcmRzJ1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBMb2cgZGV0ZWN0aW9uIHdpdGggaWRlbnRpZnkgcG9wdXAgc3RhdGUgKHRocm90dGxlZClcbiAgICAgICAgaWYgKG5vdyAtIGxhc3RMb2dUaW1lID4gTE9HX1RIUk9UVExFX01TKSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdTRUxFQ1RJT04nLCB7XG4gICAgICAgICAgICBldmVudDogd2FzQ2xlYXJlZCA/ICdzZWxlY3Rpb24tY2xlYXJlZCcgOiB3YXNDaGFuZ2VkID8gJ3NlbGVjdGlvbi1jaGFuZ2VkJyA6ICdzZWxlY3Rpb24tYWRkZWQnLFxuICAgICAgICAgICAgb3JpZ2luRFNJZCxcbiAgICAgICAgICAgIG91ckV4cGVjdGVkQ291bnQ6IG91ckV4cGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRDb3VudDogcHJldmlvdXNTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRDb3VudDogY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIHdhc0NsZWFyZWQsXG4gICAgICAgICAgICB3YXNDaGFuZ2VkLFxuICAgICAgICAgICAgd2FzQWRkZWQsXG4gICAgICAgICAgICBoYXNPdXJTZWxlY3Rpb24sXG4gICAgICAgICAgICBtYXRjaGVzT3VyU2VsZWN0aW9uLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cElzT3BlbixcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkLFxuICAgICAgICAgICAgaWRlbnRpZnlQb3B1cFN0aWxsT3BlbixcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkLFxuICAgICAgICAgICAgd291bGRSZXN0b3JlLFxuICAgICAgICAgICAgb3VyRXhwZWN0ZWRJZHM6IG91ckV4cGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZElkczogcHJldmlvdXNTZWxlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZElkczogY3VycmVudFNlbGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBub3RlOiB3b3VsZFJlc3RvcmUgXG4gICAgICAgICAgICAgID8gJ1dvdWxkIHJlc3RvcmUgc2VsZWN0aW9uIChjbGVhcmVkICsgaWRlbnRpZnkgcG9wdXAgb3BlbiknXG4gICAgICAgICAgICAgIDogaWRlbnRpZnlQb3B1cElzT3BlbiAmJiB3YXNDaGFuZ2VkXG4gICAgICAgICAgICAgICAgPyAnSWRlbnRpZnkgcG9wdXAgb3BlbiBidXQgc2VsZWN0aW9uIGNoYW5nZWQgKG5vdCBjbGVhcmVkKSAtIHdvdWxkIG5vdCByZXN0b3JlJ1xuICAgICAgICAgICAgICAgIDogd2FzQ2xlYXJlZCAmJiAhaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgICAgICAgICAgICAgPyAnU2VsZWN0aW9uIGNsZWFyZWQsIGNoZWNraW5nIGlmIGlkZW50aWZ5IHBvcHVwIG9wZW5zLi4uJ1xuICAgICAgICAgICAgICAgICAgOiB3YXNBZGRlZFxuICAgICAgICAgICAgICAgICAgICA/IGhhc091clNlbGVjdGlvbiAmJiBtYXRjaGVzT3VyU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgPyAnT3VyIHdpZGdldCBzZWxlY3RlZCByZWNvcmRzJ1xuICAgICAgICAgICAgICAgICAgICAgIDogaGFzT3VyU2VsZWN0aW9uICYmICFtYXRjaGVzT3VyU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdBbm90aGVyIHdpZGdldCBzZWxlY3RlZCBkaWZmZXJlbnQgcmVjb3JkcydcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ1NlbGVjdGlvbiBhZGRlZCAoYnkgYW5vdGhlciB3aWRnZXQgb3IgZXh0ZXJuYWwgc291cmNlKSdcbiAgICAgICAgICAgICAgICAgICAgOiAnTm8gaWRlbnRpZnkgcG9wdXAgZGV0ZWN0ZWQgLSB3b3VsZCBub3QgcmVzdG9yZSdcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGxhc3RMb2dUaW1lID0gbm93XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcHJldmlvdXNTZWxlY3RlZElkcyA9IFsuLi5jdXJyZW50U2VsZWN0ZWRJZHNdXG4gICAgICBpZGVudGlmeVBvcHVwV2FzT3BlbiA9IGlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICB9XG5cbiAgICAvLyBDaGVjayBwZXJpb2RpY2FsbHkgKGV2ZXJ5IDUwMG1zKVxuICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbChjaGVja1NlbGVjdGlvbiwgNTAwKVxuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpXG4gICAgfVxuICB9LCBbb3V0cHV0RFNdKVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIHJlc3VsdHMuIFJlc2V0cyBsb2NhbCBzdGF0ZSBhbmQgZGVsZWdhdGVzIHRvIHBhcmVudCdzIGNsZWFyUmVzdWx0IG1ldGhvZC5cbiAgICovXG4gIGNvbnN0IGNsZWFyUmVzdWx0cyA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBMb2cgaGFzaCBzdGF0ZSBiZWZvcmUgY2xlYXJpbmdcbiAgICBjb25zdCBoYXNoQmVmb3JlID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgY29uc3QgdXJsUGFyYW1zQmVmb3JlID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoQmVmb3JlKVxuICAgIGNvbnN0IGhhc2hQYXJhbXNCZWZvcmU6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fVxuICAgIHVybFBhcmFtc0JlZm9yZS5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBoYXNoUGFyYW1zQmVmb3JlW2tleV0gPSB2YWx1ZVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdHMtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgaGFzaEJlZm9yZTogaGFzaEJlZm9yZSxcbiAgICAgIGhhc2hQYXJhbXNCZWZvcmU6IGhhc2hQYXJhbXNCZWZvcmUsXG4gICAgICBoYXNoUGFyYW1zQ291bnQ6IE9iamVjdC5rZXlzKGhhc2hQYXJhbXNCZWZvcmUpLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gUmVzZXQgbG9jYWwgc2VsZWN0aW9uIGZsYWdzXG4gICAgaGFzU2VsZWN0ZWRSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgbGFzdFNlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gW11cbiAgICAvLyBSZXNldCBsb2NhbCBxdWVyeSBkYXRhIHN0YXRlXG4gICAgc2V0UXVlcnlEYXRhKG51bGwpXG4gICAgc2V0UmVtb3ZlZFJlY29yZElkcyhuZXcgU2V0KCkpXG4gICAgLy8gQ2xlYXIgZXJyb3Igc3RhdGUgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbClcbiAgICAvLyBEZWxlZ2F0ZSB0byBwYXJlbnQncyBjbGVhclJlc3VsdCBtZXRob2QgKHZpYSBvbk5hdkJhY2spIHdoaWNoIGhhbmRsZXNcbiAgICAvLyBjbGVhcmluZyBzZWxlY3Rpb24gZnJvbSBtYXAsIHB1Ymxpc2hpbmcgbWVzc2FnZXMsIGV0Yy5cbiAgICBhd2FpdCBvbk5hdkJhY2sodHJ1ZSlcbiAgICBcbiAgICAvLyBMb2cgaGFzaCBzdGF0ZSBhZnRlciBjbGVhcmluZyAod2l0aCBkZWxheSB0byBjYXRjaCBhc3luYyB1cGRhdGVzKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgaGFzaEFmdGVyID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpXG4gICAgICBjb25zdCB1cmxQYXJhbXNBZnRlciA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaEFmdGVyKVxuICAgICAgY29uc3QgaGFzaFBhcmFtc0FmdGVyOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge31cbiAgICAgIHVybFBhcmFtc0FmdGVyLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgaGFzaFBhcmFtc0FmdGVyW2tleV0gPSB2YWx1ZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICBldmVudDogJ2NsZWFyUmVzdWx0cy1jb21wbGV0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgaGFzaEJlZm9yZTogaGFzaEJlZm9yZSxcbiAgICAgICAgaGFzaEFmdGVyOiBoYXNoQWZ0ZXIsXG4gICAgICAgIGhhc2hQYXJhbXNCZWZvcmU6IGhhc2hQYXJhbXNCZWZvcmUsXG4gICAgICAgIGhhc2hQYXJhbXNBZnRlcjogaGFzaFBhcmFtc0FmdGVyLFxuICAgICAgICBoYXNoUGFyYW1zUmVtb3ZlZDogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0JlZm9yZSkubGVuZ3RoIC0gT2JqZWN0LmtleXMoaGFzaFBhcmFtc0FmdGVyKS5sZW5ndGgsXG4gICAgICAgIGhhc2hQYXJhbXNDb3VudEJlZm9yZTogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0JlZm9yZSkubGVuZ3RoLFxuICAgICAgICBoYXNoUGFyYW1zQ291bnRBZnRlcjogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0FmdGVyKS5sZW5ndGgsXG4gICAgICAgIHN0aWxsSGFzSGFzaFBhcmFtczogT2JqZWN0LmtleXMoaGFzaFBhcmFtc0FmdGVyKS5sZW5ndGggPiAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSwgMTAwKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlUmVuZGVyRG9uZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCh7IGRhdGFJdGVtcywgcGFnZVNpemUsIHBhZ2UgfSkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVSZW5kZXJEb25lLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgIHBhZ2VTaXplLFxuICAgICAgcGFnZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gVXNlIHJlZiB0byBnZXQgbGF0ZXN0IHJlbW92ZWRSZWNvcmRJZHMgKGF2b2lkcyBzdGFsZSBjbG9zdXJlIGlzc3VlcyB3aXRoIGxhenkgbG9hZGluZylcbiAgICBjb25zdCBjdXJyZW50UmVtb3ZlZElkcyA9IHJlbW92ZWRSZWNvcmRJZHNSZWYuY3VycmVudFxuICAgIFxuICAgIC8vIEZpbHRlciBvdXQgcmVtb3ZlZCByZWNvcmRzIEZJUlNUIC0gYmVmb3JlIGFueSBzZWxlY3Rpb24gbG9naWNcbiAgICAvLyBUaGlzIGVuc3VyZXMgcmVtb3ZlZCByZWNvcmRzIHN0YXkgcmVtb3ZlZCBldmVuIGR1cmluZyBsYXp5IGxvYWRpbmdcbiAgICBjb25zdCBmaWx0ZXJlZEl0ZW1zID0gZGF0YUl0ZW1zPy5maWx0ZXIoaXRlbSA9PiAhY3VycmVudFJlbW92ZWRJZHMuaGFzKGl0ZW0uZ2V0SWQoKSkpIHx8IFtdXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgcXVlcnlEYXRhIGhhcyBhY3R1YWxseSBjaGFuZ2VkIGJlZm9yZSB1cGRhdGluZyBzdGF0ZVxuICAgIC8vIFRoaXMgcHJldmVudHMgdW5uZWNlc3NhcnkgcmUtcmVuZGVycyB0aGF0IHJlc2V0IHNjcm9sbCBwb3NpdGlvblxuICAgIGNvbnN0IGN1cnJlbnRSZWNvcmRzID0gcXVlcnlEYXRhPy5yZWNvcmRzIHx8IFtdXG4gICAgY29uc3QgY3VycmVudFJlY29yZElkcyA9IGN1cnJlbnRSZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSkuc29ydCgpXG4gICAgY29uc3QgbmV3UmVjb3JkSWRzID0gZmlsdGVyZWRJdGVtcy5tYXAociA9PiByLmdldElkKCkpLnNvcnQoKVxuICAgIGNvbnN0IGRhdGFDaGFuZ2VkID0gY3VycmVudFJlY29yZElkcy5sZW5ndGggIT09IG5ld1JlY29yZElkcy5sZW5ndGggfHxcbiAgICAgICFjdXJyZW50UmVjb3JkSWRzLmV2ZXJ5KChpZCwgaWR4KSA9PiBpZCA9PT0gbmV3UmVjb3JkSWRzW2lkeF0pIHx8XG4gICAgICBxdWVyeURhdGE/LnBhZ2VTaXplICE9PSBwYWdlU2l6ZSB8fFxuICAgICAgcXVlcnlEYXRhPy5wYWdlICE9PSBwYWdlXG4gICAgXG4gICAgLy8gT25seSB1cGRhdGUgc3RhdGUgaWYgZGF0YSBoYXMgYWN0dWFsbHkgY2hhbmdlZFxuICAgIGlmIChkYXRhQ2hhbmdlZCkge1xuICAgICAgc2V0UXVlcnlEYXRhKHtcbiAgICAgICAgcmVjb3JkczogZmlsdGVyZWRJdGVtcyxcbiAgICAgICAgcGFnZVNpemUsXG4gICAgICAgIHBhZ2VcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIE9ubHkgc2VsZWN0IHJlY29yZHMgdGhhdCBhcmUgTk9UIHJlbW92ZWRcbiAgICAvLyBJTVBPUlRBTlQ6IE9ubHkgcmUtc2VsZWN0IGlmIHRoZSBzZWxlY3Rpb24gaGFzIGFjdHVhbGx5IGNoYW5nZWQgdG8gYXZvaWQgcmVzZXR0aW5nIHNjcm9sbCBwb3NpdGlvblxuICAgIGlmIChmaWx0ZXJlZEl0ZW1zICYmIGZpbHRlcmVkSXRlbXMubGVuZ3RoID4gMCAmJiBvdXRwdXREUykge1xuICAgICAgY29uc3QgcmVjb3JkSWRzID0gZmlsdGVyZWRJdGVtcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgY29uc3QgZmRyID0gZmlsdGVyZWRJdGVtcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdXG4gICAgICBcbiAgICAgIC8vIENoZWNrIHdoYXQncyBjdXJyZW50bHkgc2VsZWN0ZWQgdG8gYXZvaWQgdW5uZWNlc3NhcnkgcmUtc2VsZWN0aW9uICh3aGljaCByZXNldHMgc2Nyb2xsKVxuICAgICAgY29uc3QgY3VycmVudGx5U2VsZWN0ZWRJZHMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBjb25zdCBzZWxlY3Rpb25DaGFuZ2VkID0gY3VycmVudGx5U2VsZWN0ZWRJZHMubGVuZ3RoICE9PSByZWNvcmRJZHMubGVuZ3RoIHx8XG4gICAgICAgICFyZWNvcmRJZHMuZXZlcnkoaWQgPT4gY3VycmVudGx5U2VsZWN0ZWRJZHMuaW5jbHVkZXMoaWQpKVxuICAgICAgXG4gICAgICAvLyBPbmx5IHNlbGVjdCBpZiB0aGUgc2VsZWN0aW9uIGhhcyBhY3R1YWxseSBjaGFuZ2VkXG4gICAgICBpZiAoc2VsZWN0aW9uQ2hhbmdlZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIHByZXZpb3VzIGVycm9yc1xuICAgICAgICAgIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKHdpZGdldElkLCBvdXRwdXREUywgcmVjb3JkSWRzLCBmZHIpXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhbmRsZVJlbmRlckRvbmUtc2VsZWN0aW5nLWZpbHRlcmVkLXJlY29yZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICAgICAgZGF0YUl0ZW1zQ291bnQ6IGRhdGFJdGVtcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICBmaWx0ZXJlZEl0ZW1zQ291bnQ6IGZpbHRlcmVkSXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiBjdXJyZW50UmVtb3ZlZElkcy5zaXplLFxuICAgICAgICAgICAgc2VsZWN0aW9uQ2hhbmdlZDogdHJ1ZSxcbiAgICAgICAgICAgIGN1cnJlbnRseVNlbGVjdGVkQ291bnQ6IGN1cnJlbnRseVNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIG5ld1NlbGVjdGlvbkNvdW50OiByZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VsZWN0IHF1ZXJ5IHJlc3VsdHMnXG4gICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWZhaWxlZC1oYW5kbGVSZW5kZXJEb25lJyxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1za2lwcGluZy1yZXNlbGVjdGlvbicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICAgIGRhdGFJdGVtc0NvdW50OiBkYXRhSXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIGZpbHRlcmVkSXRlbXNDb3VudDogZmlsdGVyZWRJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiBjdXJyZW50UmVtb3ZlZElkcy5zaXplLFxuICAgICAgICAgIHJlYXNvbjogJ3NlbGVjdGlvbi11bmNoYW5nZWQnLFxuICAgICAgICAgIGN1cnJlbnRseVNlbGVjdGVkQ291bnQ6IGN1cnJlbnRseVNlbGVjdGVkSWRzLmxlbmd0aFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSwgW291dHB1dERTLCB3aWRnZXRJZCwgcXVlcnlEYXRhXSlcblxuICBjb25zdCBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShvdXRwdXREUz8uaWQpXG4gICAgY29uc3QgZHNSZWNvcmRzID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgY29uc3Qgc2VsZWN0ZWRJZHMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSA/PyBbXVxuICAgIFxuICAgIC8vIENhcHR1cmUgcmVjb3JkcyBwcm9wIGJlZm9yZSB1c2luZyBpdCAodG8gYXZvaWQgc2hhZG93aW5nKVxuICAgIGNvbnN0IHJlY29yZHNQcm9wID0gcmVjb3Jkc1xuICAgIFxuICAgIC8vIERlYnVnOiBMb2cgd2hhdCBoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZSBzZWVzXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLWZpcmVkJyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTPy5pZCxcbiAgICAgIGRzSWQ6IGRzPy5pZCxcbiAgICAgIHNlbGVjdGVkUmVjb3Jkc0Zyb21EUzogZHNSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHNlbGVjdGVkSWRzRnJvbURTOiBzZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzU3RhdGU6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzUHJvcD8ubGVuZ3RoIHx8IDAsXG4gICAgICByZW1vdmVkUmVjb3JkSWRzQ291bnQ6IHJlbW92ZWRSZWNvcmRJZHMuc2l6ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gSWYgd2UgaGF2ZSByZWNvcmRzIGluIHRoZSBwcm9wIChhY2N1bXVsYXRlZCByZWNvcmRzKSBidXQgRFMgc2hvd3MgMCBzZWxlY3RlZCxcbiAgICAvLyBhbmQgd2UgY3VycmVudGx5IGhhdmUgc2VsZWN0ZWRSZWNvcmRzLCB0aGlzIGlzIGxpa2VseSBhIHF1ZXJ5IHN3aXRjaCBpbiBcIkFkZCB0b1wiIG1vZGVcbiAgICAvLyB3aGVyZSByZS1zZWxlY3Rpb24gaGFzbid0IGhhcHBlbmVkIHlldC4gRG9uJ3QgY2xlYXIgc2VsZWN0ZWRSZWNvcmRzIC0gd2FpdCBmb3IgcmUtc2VsZWN0aW9uLlxuICAgIGlmIChyZWNvcmRzUHJvcCAmJiByZWNvcmRzUHJvcC5sZW5ndGggPiAwICYmIHNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMCAmJiBzZWxlY3RlZFJlY29yZHMgJiYgc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXNraXBwaW5nLWNsZWFyLWR1cmluZy1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogJ3dhaXRpbmctZm9yLXJlc2VsZWN0aW9uJyxcbiAgICAgICAgcmVjb3Jkc1Byb3BDb3VudDogcmVjb3Jkc1Byb3AubGVuZ3RoLFxuICAgICAgICBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm4gLy8gU2tpcCB1cGRhdGluZyAtIHJlLXNlbGVjdGlvbiBpcyBjb21pbmdcbiAgICB9XG4gICAgXG4gICAgLy8gSU1QT1JUQU5UOiBGaWx0ZXIgb3V0IHJlbW92ZWQgcmVjb3JkcyBmcm9tIERTIHNlbGVjdGlvbiBiZWZvcmUgY29tcGFyaW5nL3N5bmNpbmdcbiAgICAvLyBUaGlzIHByZXZlbnRzIHJlbW92ZWQgcmVjb3JkcyBmcm9tIGJlaW5nIHJlLWFkZGVkIHdoZW4gc2Nyb2xsaW5nIHRyaWdnZXJzIHRoaXMgY2FsbGJhY2tcbiAgICBjb25zdCBmaWx0ZXJlZERzUmVjb3JkcyA9IGRzUmVjb3Jkcz8uZmlsdGVyKChyZWNvcmQ6IERhdGFSZWNvcmQpID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpID8/IFtdXG4gICAgY29uc3QgZmlsdGVyZWRTZWxlY3RlZElkcyA9IHNlbGVjdGVkSWRzLmZpbHRlcihpZCA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMoaWQpKVxuICAgIFxuICAgIC8vIElmIERTIGhhcyBtb3JlIHNlbGVjdGVkIHRoYW4gb3VyIHN0YXRlLCBidXQgdGhlIGRpZmZlcmVuY2UgaXMgZW50aXJlbHkgcmVtb3ZlZCByZWNvcmRzLCBkb24ndCBzeW5jXG4gICAgaWYgKGZpbHRlcmVkU2VsZWN0ZWRJZHMubGVuZ3RoID09PSAoc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCkgJiYgc2VsZWN0ZWRJZHMubGVuZ3RoID4gZmlsdGVyZWRTZWxlY3RlZElkcy5sZW5ndGgpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXNraXBwaW5nLXN5bmMtZHVlLXRvLXJlbW92ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnZHMtc2VsZWN0aW9uLWluY2x1ZGVzLXJlbW92ZWQtcmVjb3JkcycsXG4gICAgICAgIGRzU2VsZWN0ZWRDb3VudDogc2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICBmaWx0ZXJlZENvdW50OiBmaWx0ZXJlZFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgY29tcG9uZW50U3RhdGVDb3VudDogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzLnNpemVcbiAgICAgIH0pXG4gICAgICByZXR1cm4gLy8gU2tpcCBzeW5jaW5nIC0gdGhlIG1pc21hdGNoIGlzIGR1ZSB0byByZW1vdmVkIHJlY29yZHNcbiAgICB9XG4gICAgXG4gICAgbGV0IHNob3VsZFVwZGF0ZSA9IGZhbHNlXG4gICAgaWYgKGZpbHRlcmVkU2VsZWN0ZWRJZHMubGVuZ3RoICE9PSBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCkge1xuICAgICAgc2hvdWxkVXBkYXRlID0gdHJ1ZVxuICAgIH0gZWxzZSB7IC8vIGVxdWFsIGxlbmd0aFxuICAgICAgc2hvdWxkVXBkYXRlID0gZmlsdGVyZWRTZWxlY3RlZElkcy5zb21lKGlkID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gc2VsZWN0ZWRSZWNvcmRzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uZ2V0SWQoKSA9PT0gaWQpXG4gICAgICAgIHJldHVybiB0YXJnZXQgPT0gbnVsbFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UtdXBkYXRpbmctc2VsZWN0ZWRSZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICBvbGRDb3VudDogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgbmV3Q291bnQ6IGZpbHRlcmVkRHNSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgbm90ZTogJ2ZpbHRlcmVkLW91dC1yZW1vdmVkLXJlY29yZHMnXG4gICAgICB9KVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UtdXBkYXRpbmctc2VsZWN0ZWRSZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICBvbGRDb3VudDogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgbmV3Q291bnQ6IGZpbHRlcmVkRHNSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgb2xkU2VsZWN0ZWRJZHM6IChzZWxlY3RlZFJlY29yZHMgfHwgW10pLm1hcChyID0+IHIuZ2V0SWQoKSkuc2xpY2UoMCwgNSksXG4gICAgICAgIG5ld1NlbGVjdGVkSWRzOiBmaWx0ZXJlZFNlbGVjdGVkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICBub3RlOiAnZmlsdGVyZWQtb3V0LXJlbW92ZWQtcmVjb3JkcycsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHNldFNlbGVjdGVkUmVjb3JkcyhmaWx0ZXJlZERzUmVjb3JkcylcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Utc2tpcHBpbmctdXBkYXRlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWFzb246ICduby1jaGFuZ2UtZGV0ZWN0ZWQnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbb3V0cHV0RFM/LmlkLCBzZWxlY3RlZFJlY29yZHMsIHdpZGdldElkLCByZWNvcmRzLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICAvKipcbiAgICogR2VuZXJhdGVzIHRoZSB0aXAgbWVzc2FnZSBzaG93aW5nIGhvdyBtYW55IGZlYXR1cmVzIGFyZSBkaXNwbGF5ZWQuXG4gICAqIEZpbHRlcnMgb3V0IHJlbW92ZWQgcmVjb3JkcyB0byBzaG93IGFjY3VyYXRlIGNvdW50cy5cbiAgICogXG4gICAqIEByZXR1cm5zIEZvcm1hdHRlZCBzdHJpbmcgbGlrZSBcIkZlYXR1cmVzIGRpc3BsYXllZDogMTE4IC8gMTIxXCJcbiAgICovXG4gIGNvbnN0IGdldFRpcE1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgaWYgKHF1ZXJ5RGF0YSAmJiBxdWVyeURhdGEucmVjb3Jkcykge1xuICAgICAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHMgZm9yIGRpc3BsYXkgY291bnRcbiAgICAgIGNvbnN0IGRpc3BsYXllZFJlY29yZHMgPSBxdWVyeURhdGEucmVjb3Jkcy5maWx0ZXIoKHJlY29yZDogRGF0YVJlY29yZCkgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKSlcbiAgICAgIGNvbnN0IGRpc3BsYXllZENvdW50ID0gZGlzcGxheWVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgIFxuICAgICAgLy8gRk9SQ0VEOiBBbHdheXMgU2ltcGxlTGlzdCwgc28gYWx3YXlzIHVzZSBzaW1wbGUgZGlzcGxheSBmb3JtYXRcbiAgICAgIHJldHVybiBgJHtnZXRJMThuTWVzc2FnZSgnZmVhdHVyZXNEaXNwbGF5ZWQnKX06ICR7ZGlzcGxheWVkQ291bnR9IC8gJHtyZXN1bHRDb3VudH1gXG4gICAgICBjb25zdCB7IHBhZ2UgPSAxLCBwYWdlU2l6ZSA9IGRlZmF1bHRQYWdlU2l6ZSB9ID0gcXVlcnlEYXRhXG4gICAgICBjb25zdCBmcm9tID0gKHBhZ2UgLSAxKSAqIHBhZ2VTaXplICsgMVxuICAgICAgY29uc3QgdG8gPSBmcm9tICsgcGFnZVNpemUgLSAxXG4gICAgICBpZiAocmVzdWx0Q291bnQgPiAwKSB7XG4gICAgICAgIHJldHVybiBgJHtnZXRJMThuTWVzc2FnZSgnZmVhdHVyZXNEaXNwbGF5ZWQnKX06ICR7ZnJvbX0gLSAke01hdGgubWluKHRvLCBkaXNwbGF5ZWRDb3VudCl9IC8gJHtyZXN1bHRDb3VudH1gXG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7Z2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVzRGlzcGxheWVkJyl9OiAwIC0gMCAvIDBgXG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZXMgZXhwYW5kL2NvbGxhcHNlIHN0YXRlIGZvciBhbGwgcmVzdWx0IGl0ZW1zLlxuICAgKiBXaGVuIHRvZ2dsZWQsIGFsbCByZXN1bHQgaXRlbXMgd2lsbCBiZSBleHBhbmRlZCBvciBjb2xsYXBzZWQgdG9nZXRoZXIuXG4gICAqIFVwZGF0ZXMgaW5kaXZpZHVhbCBpdGVtIGV4cGFuc2lvbiBzdGF0ZXMgaW4gdGhlIG1hcCB0byBtYWludGFpbiBzdGF0ZSB3aGVuIGl0ZW1zIGFyZSByZW1vdmVkLlxuICAgKi9cbiAgY29uc3QgdG9nZ2xlRXhwYW5kQWxsID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldEV4cGFuZEFsbChwcmV2ID0+IHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gIXByZXZcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICBldmVudDogJ3RvZ2dsZUV4cGFuZEFsbC1jbGlja2VkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHByZXZpb3VzVmFsdWU6IHByZXYsXG4gICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBhbGwgY3VycmVudCBpdGVtcyBpbiB0aGUgbWFwIHdpdGggdGhlIG5ldyBleHBhbnNpb24gc3RhdGVcbiAgICAgIHNldEl0ZW1FeHBhbmRTdGF0ZXMocHJldk1hcCA9PiB7XG4gICAgICAgIGNvbnN0IG5ld01hcCA9IG5ldyBNYXAocHJldk1hcClcbiAgICAgICAgLy8gR2V0IGFsbCBjdXJyZW50IHJlY29yZCBJRHMgZnJvbSBmaWx0ZXJlZCByZWNvcmRzXG4gICAgICAgIGNvbnN0IGFsbFJlY29yZElkcyA9IGZpbHRlcmVkUmVjb3Jkc0Zvckxpc3QubWFwKHIgPT4gci5nZXRJZCgpKVxuICAgICAgICBhbGxSZWNvcmRJZHMuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgICAgbmV3TWFwLnNldChpZCwgbmV3VmFsdWUpXG4gICAgICAgIH0pXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICAgIGV2ZW50OiAnaXRlbUV4cGFuZFN0YXRlcy11cGRhdGVkJyxcbiAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgICB1cGRhdGVkQ291bnQ6IGFsbFJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgICAgcmVjb3JkSWRzOiBhbGxSZWNvcmRJZHMuc2xpY2UoMCwgMTApLCAvLyBMb2cgZmlyc3QgMTAgSURzXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBuZXdNYXBcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVybiBuZXdWYWx1ZVxuICAgIH0pXG4gIH0sIFt3aWRnZXRJZCwgZmlsdGVyZWRSZWNvcmRzRm9yTGlzdF0pXG5cbiAgY29uc3QgcmVzdWx0VXNlT3V0cHV0RGF0YVNvdXJjZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBJbW11dGFibGUoe1xuICAgICAgZGF0YVNvdXJjZUlkOiBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkLFxuICAgICAgbWFpbkRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZFxuICAgIH0pXG4gIH0sIFtxdWVyeUl0ZW0/Lm91dHB1dERhdGFTb3VyY2VJZF0pXG5cbiAgY29uc3QgaGFuZGxlRXNjYXBlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgfSwgW10pXG5cbiAgLy8gS2VlcCByZWNvcmRzIHNlbGVjdGVkIGFuZCB6b29tIHRvIGNsaWNrZWQgcmVjb3JkXG4gIC8vIFJlY29yZHMgcmVtYWluIHNlbGVjdGVkIGFzIGxvbmcgYXMgdGhleSdyZSBpbiB0aGUgcmVzdWx0c1xuICAvLyBDbGlja2luZyBhIHJlY29yZCBhbHdheXMgem9vbXMgdG8gaXQgb24gdGhlIG1hcCAodGhpcyBiZWhhdmlvciBpcyBhbHdheXMgZW5hYmxlZClcbiAgY29uc3QgdG9nZ2xlU2VsZWN0aW9uID0gUmVhY3QudXNlQ2FsbGJhY2soKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB7XG4gICAgLy8gRW5zdXJlIHRoZSBjbGlja2VkIHJlY29yZCBpcyBzZWxlY3RlZCAoaXQgc2hvdWxkIGFscmVhZHkgYmUsIGJ1dCBlbnN1cmUgaXQpXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRhcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpID8/IFtdXG4gICAgY29uc3Qgc2VsZWN0ZWRJZHMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZElkcygpID8/IFtdXG4gICAgY29uc3QgZGF0YUlkID0gZGF0YS5nZXRJZCgpXG4gICAgXG4gICAgLy8gSWYgdGhpcyByZWNvcmQgaXNuJ3QgYWxyZWFkeSBzZWxlY3RlZCwgYWRkIGl0IHRvIHRoZSBzZWxlY3Rpb25cbiAgICBpZiAoIXNlbGVjdGVkSWRzLmluY2x1ZGVzKGRhdGFJZCkpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRTZWxlY3RlZERhdGFzID0gWy4uLnNlbGVjdGVkRGF0YXMsIGRhdGFdXG4gICAgICBjb25zdCByZWNvcmRJZHMgPSB1cGRhdGVkU2VsZWN0ZWREYXRhcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICAvLyBTZWxlY3QgcmVjb3JkcyBhbmQgcHVibGlzaCBzZWxlY3Rpb24gbWVzc2FnZSB1c2luZyB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCh3aWRnZXRJZCwgb3V0cHV0RFMsIHJlY29yZElkcywgdXBkYXRlZFNlbGVjdGVkRGF0YXMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSwgdHJ1ZSlcbiAgICB9XG4gICAgXG4gICAgLy8gWm9vbSB0byB0aGUgY2xpY2tlZCByZWNvcmQgd2l0aCBwYWRkaW5nIChhbHdheXMgZW5hYmxlZCAtIHVzZXIgd2FudHMgdG8ga2VlcCB0aGlzIGJlaGF2aW9yKVxuICAgIC8vIEJVRy1HUkFQSElDUy0wMDE6IFpvb20gb3BlcmF0aW9ucyBmYWlsIHdoZW4gZ3JhcGhpY3MgbGF5ZXIgaXMgZGlzYWJsZWRcbiAgICBpZiAoIW1hcFZpZXcgJiYgIXVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQlVHJywge1xuICAgICAgICBidWdJZDogJ0JVRy1HUkFQSElDUy0wMDEnLFxuICAgICAgICBjYXRlZ29yeTogJ0dSQVBISUNTJyxcbiAgICAgICAgZXZlbnQ6ICd6b29tLW9wZXJhdGlvbi1mYWlsZWQtZ3JhcGhpY3MtbGF5ZXItZGlzYWJsZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVzdWx0LWl0ZW0tY2xpY2stem9vbScsXG4gICAgICAgIHJlY29yZElkOiBkYXRhLmdldElkKCksXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnWm9vbSBvcGVyYXRpb24gYXR0ZW1wdGVkIG9uIHJlc3VsdCBpdGVtIGNsaWNrIGJ1dCBtYXBWaWV3IGlzIHVuYXZhaWxhYmxlIGJlY2F1c2UgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBpcyBkaXNhYmxlZCcsXG4gICAgICAgIHdvcmthcm91bmQ6ICdFbmFibGUgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBpbiB3aWRnZXQgc2V0dGluZ3MnLFxuICAgICAgICB0YXJnZXRSZXNvbHV0aW9uOiAncjAxOS4wJ1xuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgem9vbVRvUmVjb3JkcyhbZGF0YV0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIC8vIFNpbGVudGx5IGhhbmRsZSBlcnJvcnMgLSB6b29tIGlzIG5vbi1jcml0aWNhbFxuICAgIH0pXG4gIH0sIFtvdXRwdXREUywgd2lkZ2V0SWQsIHpvb21Ub1JlY29yZHNdKVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgcmVjb3JkIGZyb20gdGhlIHJlc3VsdHMgYW5kIHNlbGVjdGlvbi5cbiAgICogSWYgcmVtb3ZpbmcgdGhlIGxhc3QgcmVjb3JkLCBhdXRvbWF0aWNhbGx5IGNsZWFycyBhbGwgcmVzdWx0c1xuICAgKiBieSBjYWxsaW5nIHRoZSB0cmFzaCBjYW4gbG9naWMgKHNhbWUgYXMgY2xpY2tpbmcgQ2xlYXIgYnV0dG9uKS5cbiAgICogVGhpcyBlbnN1cmVzIHRoZSBVSSBkb2Vzbid0IHNob3cgXCJGZWF0dXJlcyBkaXNwbGF5ZWQ6IDAgLyAxXCIgd2hlbiBhbGwgcmVzdWx0cyBhcmUgcmVtb3ZlZC5cbiAgICogXG4gICAqIEBwYXJhbSBkYXRhIC0gVGhlIGZlYXR1cmUgZGF0YSByZWNvcmQgdG8gcmVtb3ZlXG4gICAqL1xuICBjb25zdCByZW1vdmVSZWNvcmQgPSBSZWFjdC51c2VDYWxsYmFjaygoZGF0YTogRmVhdHVyZURhdGFSZWNvcmQpID0+IHtcbiAgICBjb25zdCBkYXRhSWQgPSBkYXRhLmdldElkKClcbiAgICBjb25zdCBjdXJyZW50RXhwYW5kQWxsID0gZXhwYW5kQWxsXG4gICAgXG4gICAgLy8gTG9nIGhhc2ggc3RhdGUgd2hlbiByZW1vdmluZyBpbmRpdmlkdWFsIHJlY29yZFxuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgY29uc3QgaGFzaFBhcmFtczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9XG4gICAgdXJsUGFyYW1zLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIGhhc2hQYXJhbXNba2V5XSA9IHZhbHVlXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZlUmVjb3JkLXN0YXJ0ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgIGN1cnJlbnRFeHBhbmRBbGwsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgIGV2ZW50OiAncmVtb3ZlUmVjb3JkLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgaGFzaDogaGFzaCxcbiAgICAgIGhhc2hQYXJhbXM6IGhhc2hQYXJhbXMsXG4gICAgICBoYXNoUGFyYW1zQ291bnQ6IE9iamVjdC5rZXlzKGhhc2hQYXJhbXMpLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gUmVtb3ZlIGZyb20gZXhwYW5zaW9uIHN0YXRlcyBtYXBcbiAgICBzZXRJdGVtRXhwYW5kU3RhdGVzKHByZXZNYXAgPT4ge1xuICAgICAgY29uc3QgbmV3TWFwID0gbmV3IE1hcChwcmV2TWFwKVxuICAgICAgbmV3TWFwLmRlbGV0ZShkYXRhSWQpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpdGVtRXhwYW5kU3RhdGVzLWNsZWFuZWQtdXAnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgIHJlbWFpbmluZ0NvdW50OiBuZXdNYXAuc2l6ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIG5ld01hcFxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIHRvIHJlbW92ZWQgcmVjb3JkcyBzZXRcbiAgICBzZXRSZW1vdmVkUmVjb3JkSWRzKHByZXYgPT4ge1xuICAgICAgY29uc3QgbmV3U2V0ID0gbmV3IFNldChwcmV2KS5hZGQoZGF0YUlkKVxuICAgICAgXG4gICAgICAvLyBJZiBhbGwgcmVjb3JkcyBhcmUgbm93IHJlbW92ZWQsIGNsZWFyIGV2ZXJ5dGhpbmcgYnkgY2FsbGluZyB0cmFzaCBjYW4gbG9naWNcbiAgICAgIC8vIElNUE9SVEFOVDogQ29tcGFyZSBhZ2FpbnN0IGFjdHVhbCBkaXNwbGF5ZWQgcmVjb3JkcyBjb3VudCwgbm90IHJlc3VsdENvdW50XG4gICAgICAvLyByZXN1bHRDb3VudCBvbmx5IHJlZmxlY3RzIHRoZSBsYXRlc3QgcXVlcnksIGJ1dCBpbiBcIkFkZCB0b1wiIG1vZGUgd2UgZGlzcGxheSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAvLyBVc2UgcXVlcnlEYXRhLnJlY29yZHMubGVuZ3RoIChiZWZvcmUgZmlsdGVyaW5nKSBhcyB0aGUgc291cmNlIG9mIHRydXRoIGZvciBkaXNwbGF5ZWQgcmVjb3Jkc1xuICAgICAgLy8gRmFsbCBiYWNrIHRvIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggaWYgaW4gYWNjdW11bGF0aW9uIG1vZGUsIG9yIHJlc3VsdENvdW50IGFzIGxhc3QgcmVzb3J0XG4gICAgICBsZXQgY3VycmVudERpc3BsYXllZENvdW50ID0gcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgaWYgKGN1cnJlbnREaXNwbGF5ZWRDb3VudCA9PT0gMCkge1xuICAgICAgICAvLyBJZiBxdWVyeURhdGEgZG9lc24ndCBoYXZlIHJlY29yZHMgeWV0LCBjaGVjayBpZiB3ZSdyZSBpbiBhY2N1bXVsYXRpb24gbW9kZVxuICAgICAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGN1cnJlbnREaXNwbGF5ZWRDb3VudCA9IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBMYXN0IHJlc29ydDogdXNlIHJlc3VsdENvdW50IChidXQgdGhpcyBtaWdodCBiZSBpbmNvcnJlY3QgaW4gYWNjdW11bGF0aW9uIG1vZGUpXG4gICAgICAgICAgY3VycmVudERpc3BsYXllZENvdW50ID0gcmVzdWx0Q291bnRcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtY2hlY2tpbmctYWxsLXJlbW92ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkc1NpemU6IG5ld1NldC5zaXplLFxuICAgICAgICBjdXJyZW50RGlzcGxheWVkQ291bnQsXG4gICAgICAgIHJlc3VsdENvdW50LFxuICAgICAgICBxdWVyeURhdGFSZWNvcmRzQ291bnQ6IHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgd2lsbE5hdmlnYXRlQmFjazogbmV3U2V0LnNpemUgPT09IGN1cnJlbnREaXNwbGF5ZWRDb3VudCAmJiBjdXJyZW50RGlzcGxheWVkQ291bnQgPiAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChuZXdTZXQuc2l6ZSA9PT0gY3VycmVudERpc3BsYXllZENvdW50ICYmIGN1cnJlbnREaXNwbGF5ZWRDb3VudCA+IDApIHtcbiAgICAgICAgLy8gQWxsIGRpc3BsYXllZCByZWNvcmRzIHJlbW92ZWQgLSBjbGVhciBldmVyeXRoaW5nIChzYW1lIGFzIGNsaWNraW5nIHRyYXNoIGNhbiBidXR0b24pXG4gICAgICAgIG9uTmF2QmFjayh0cnVlKVxuICAgICAgICByZXR1cm4gbmV3U2V0XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBuZXdTZXRcbiAgICB9KVxuICAgIFxuICAgIC8vIFVwZGF0ZSBxdWVyeURhdGEgdG8gZmlsdGVyIG91dCB0aGUgcmVtb3ZlZCByZWNvcmRcbiAgICBzZXRRdWVyeURhdGEocHJldkRhdGEgPT4ge1xuICAgICAgaWYgKCFwcmV2RGF0YSkgcmV0dXJuIHByZXZEYXRhXG4gICAgICBjb25zdCBmaWx0ZXJlZFJlY29yZHMgPSBwcmV2RGF0YS5yZWNvcmRzLmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiByZWNvcmQuZ2V0SWQoKSAhPT0gZGF0YUlkKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucHJldkRhdGEsXG4gICAgICAgIHJlY29yZHM6IGZpbHRlcmVkUmVjb3Jkc1xuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gQUxXQVlTIHJlbW92ZSBmcm9tIG9yaWdpbiBkYXRhIHNvdXJjZSBzZWxlY3Rpb25zIChzYW1lIGFzIFJlbW92ZSBtb2RlKVxuICAgIC8vIFRoaXMgcHJvcGVybHkgcmVtb3ZlcyByZWNvcmRzIGZyb20gdGhlIG1hcCBzZWxlY3Rpb24sIGhhbmRsaW5nIHNpbmdsZSBvciBtdWx0aXBsZSBvcmlnaW4gc291cmNlc1xuICAgIC8vIEFsc28gcmVtb3ZlcyBncmFwaGljcyBmcm9tIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZ1xuICAgIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyhcbiAgICAgIHdpZGdldElkLCBcbiAgICAgIFtkYXRhXSwgXG4gICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgIGdyYXBoaWNzTGF5ZXJcbiAgICApXG4gICAgXG4gICAgLy8gVXBkYXRlIG91dHB1dERTIHNlbGVjdGlvblxuICAgIGNvbnN0IHNlbGVjdGVkRGF0YXMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSA/PyBbXVxuICAgIGNvbnN0IHVwZGF0ZWRTZWxlY3RlZERhdGFzID0gc2VsZWN0ZWREYXRhcy5maWx0ZXIocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpICE9PSBkYXRhSWQpXG4gICAgY29uc3QgcmVjb3JkSWRzID0gdXBkYXRlZFNlbGVjdGVkRGF0YXMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICBcbiAgICAvLyBVcGRhdGUgb3V0cHV0RFMgc2VsZWN0aW9uXG4gICAgaWYgKHR5cGVvZiBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHVwZGF0ZWRTZWxlY3RlZERhdGFzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgfVxuICAgIFxuICAgIC8vIElNUE9SVEFOVDogUHVibGlzaCBjdXN0b20gZXZlbnQgc28gd2lkZ2V0IGNhbiB1cGRhdGUgbGFzdFNlbGVjdGlvbiBzdGF0ZVxuICAgIC8vIFRoaXMgZW5zdXJlcyByZXN0b3JhdGlvbiByZXN0b3JlcyB0aGUgY29ycmVjdCAodXBkYXRlZCkgY291bnRcbiAgICBjb25zdCBvcmlnaW5EUyA9IChvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIGNvbnN0IGRhdGFTb3VyY2VJZCA9IG9yaWdpbkRTPy5pZFxuICAgIGNvbnN0IHNlbGVjdGlvbkV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdxdWVyeXNpbXBsZS1zZWxlY3Rpb24tY2hhbmdlZCcsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVjb3JkSWRzLCAvLyBVcGRhdGVkIHJlY29yZCBJRHMgKHdpdGggcmVtb3ZlZCByZWNvcmQgZXhjbHVkZWQpXG4gICAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoc2VsZWN0aW9uRXZlbnQpXG4gICAgXG4gICAgLy8gSWYgaW4gYWNjdW11bGF0aW9uIG1vZGUsIGFsc28gcmVtb3ZlIGZyb20gYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlICYmIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcmVtYWluaW5nUmVjb3JkcyA9IHJlbW92ZVJlc3VsdHNGcm9tQWNjdW11bGF0ZWQoXG4gICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICAgIFtkYXRhXSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICApXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3gtYnV0dG9uLXJlbW92ZWQtZnJvbS1hY2N1bXVsYXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRCZWZvcmU6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlbWFpbmluZ1JlY29yZHNDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHdhc1JlbW92ZWQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoIDwgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UocmVtYWluaW5nUmVjb3JkcylcbiAgICB9XG4gICAgXG4gICAgLy8gTG9nIGFmdGVyIHJlbW92ZVJlY29yZCBjb21wbGV0ZXMgdG8gY2hlY2sgaWYgZXhwYW5kQWxsIGNoYW5nZWRcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1jb21wbGV0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICAgIGV4cGFuZEFsbEJlZm9yZTogY3VycmVudEV4cGFuZEFsbCxcbiAgICAgICAgZXhwYW5kQWxsQWZ0ZXI6IGV4cGFuZEFsbCxcbiAgICAgICAgZXhwYW5kQWxsQ2hhbmdlZDogY3VycmVudEV4cGFuZEFsbCAhPT0gZXhwYW5kQWxsLFxuICAgICAgICBleHBhbmRCeURlZmF1bHRQcm9wOiBleHBhbmRBbGwsIC8vIFdoYXQgd2lsbCBiZSBwYXNzZWQgdG8gU2ltcGxlTGlzdFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSwgMClcbiAgfSwgW291dHB1dERTLCB3aWRnZXRJZCwgcmVzdWx0Q291bnQsIG9uTmF2QmFjaywgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHF1ZXJ5SXRlbS5jb25maWdJZCwgZXhwYW5kQWxsXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHQgaC0xMDAnIGNzcz17cmVzdWx0U3R5bGV9IHJvbGU9J2xpc3Rib3gnIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzJyl9PlxuICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17cmVzdWx0VXNlT3V0cHV0RGF0YVNvdXJjZX0gb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2V9IC8+XG4gICAgICBcbiAgICAgIHsvKiBFcnJvciBNZXNzYWdlICovfVxuICAgICAge3NlbGVjdGlvbkVycm9yICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BwYWRkaW5nOiAwIDE2cHg7IG1hcmdpbi10b3A6IDhweDtgfT5cbiAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgZXJyb3I9e3NlbGVjdGlvbkVycm9yfSBcbiAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0U2VsZWN0aW9uRXJyb3IobnVsbCl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0X19oZWFkZXIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBteC00Jz5cbiAgICAgICAgPEJ1dHRvbiBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnYmFjaycpfSByZWY9e2JhY2tCdG5SZWZ9IGNsYXNzTmFtZT0ncC0wIG1yLTInIHNpemU9J3NtJyB2YXJpYW50PSd0ZXh0JyBjb2xvcj0naW5oZXJpdCcgaWNvbiBvbkNsaWNrPXsoKSA9PiB7IG9uTmF2QmFjaygpIH19PlxuICAgICAgICAgIDxBcnJvd0xlZnRPdXRsaW5lZCBhdXRvRmxpcC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgICB7Y3VycmVudEl0ZW0ucmVzdWx0c0xhYmVsID8/IGdldEkxOG5NZXNzYWdlKCdyZXN1bHRzJyl9XG4gICAgICAgIHsoXG4gICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfSBwbGFjZW1lbnQ9J2JvdHRvbSc+XG4gICAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSdtbC1hdXRvJyBpY29uIHNpemU9J3NtJyB2YXJpYW50PSd0ZXh0JyBjb2xvcj0naW5oZXJpdCcgb25DbGljaz17Y2xlYXJSZXN1bHRzfSBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0+XG4gICAgICAgICAgICAgICAgPEljb24gaWNvbj17aWNvbk1hcC50b29sRGVsZXRlfSAvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgIHsvKiBEYXRhIGFjdGlvbnMgZmlsdGVyZWQgdmlhIG1hbmlmZXN0Lmpzb24gZXhjbHVkZURhdGFBY3Rpb25zIC0gU2hvdyBvbiBNYXAsIFNlbGVjdCBMb2FkZWQsIGFuZCBDbGVhciBTZWxlY3Rpb24gYXJlIGV4Y2x1ZGVkLlxuICAgICAgICAgICAgICAgIEN1c3RvbSBcIkFkZCB0byBNYXBcIiBhY3Rpb24gaXMgcHJvdmlkZWQgdmlhIGV4dHJhQWN0aW9ucyBhbmQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLiAqL31cbiAgICAgICAgICAgIHtlbmFibGVEYXRhQWN0aW9uICYmIG91dHB1dERTICYmIChcbiAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3Ngd2lkdGg6IDFweDsgaGVpZ2h0OiAxNnB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1pbnB1dCk7YH0+PC9kaXY+XG4gICAgICAgICAgICAgICAgPERhdGFBY3Rpb25MaXN0XG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgICBkYXRhU2V0cz17YWN0aW9uRGF0YVNldHN9XG4gICAgICAgICAgICAgICAgICBsaXN0U3R5bGU9e0RhdGFBY3Rpb25MaXN0U3R5bGUuRHJvcGRvd259XG4gICAgICAgICAgICAgICAgICBidXR0b25TaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgIGJ1dHRvblR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICAgICAgZXh0cmFBY3Rpb25zPXtleHRyYUFjdGlvbnN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdC1jb250YWluZXIgbXQtMSc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHQtaW5mbyBtYi0yIHB4LTQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtYmV0d2Vlbicgcm9sZT0nYWxlcnQnIGFyaWEtbGl2ZT0ncG9saXRlJz5cbiAgICAgICAgICA8c3Bhbj57Z2V0VGlwTWVzc2FnZSgpfTwvc3Bhbj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17ZXhwYW5kQWxsID8gZ2V0STE4bk1lc3NhZ2UoJ2NvbGxhcHNlQWxsJykgOiBnZXRJMThuTWVzc2FnZSgnZXhwYW5kQWxsJyl9IHBsYWNlbWVudD0ndG9wJz5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVFeHBhbmRBbGx9XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17ZXhwYW5kQWxsID8gZ2V0STE4bk1lc3NhZ2UoJ2NvbGxhcHNlQWxsJykgOiBnZXRJMThuTWVzc2FnZSgnZXhwYW5kQWxsJyl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7ZXhwYW5kQWxsID8gPENvbGxhcHNlQWxsT3V0bGluZWQgLz4gOiA8RXhwYW5kQWxsT3V0bGluZWQgLz59XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgey8qIEZPUkNFRDogQWx3YXlzIFNpbXBsZUxpc3QgLSBMYXp5TG9hZCBhbmQgTXVsdGlQYWdlIHJlbW92ZWQgKi99XG4gICAgICAgIHtyZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgIDxTaW1wbGVMaXN0XG4gICAgICAgICAgICBrZXk9J3NpbXBsZSdcbiAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbT17cXVlcnlJdGVtfVxuICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTIGFzIGFueX1cbiAgICAgICAgICAgIHJlY29yZHM9e2ZpbHRlcmVkUmVjb3Jkc0Zvckxpc3R9XG4gICAgICAgICAgICBkaXJlY3Rpb249e2RpcmVjdGlvbn1cbiAgICAgICAgICAgIG9uRXNjYXBlPXtoYW5kbGVFc2NhcGV9XG4gICAgICAgICAgICBvblNlbGVjdENoYW5nZT17dG9nZ2xlU2VsZWN0aW9ufVxuICAgICAgICAgICAgb25SZW1vdmU9e3JlbW92ZVJlY29yZH1cbiAgICAgICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQWxsfVxuICAgICAgICAgICAgaXRlbUV4cGFuZFN0YXRlcz17aXRlbUV4cGFuZFN0YXRlc31cbiAgICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZHM9e3JlbW92ZWRSZWNvcmRJZHN9XG4gICAgICAgICAgICBvblJlbmRlckRvbmU9e2hhbmRsZVJlbmRlckRvbmV9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgeyBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcblxuZXhwb3J0IGNvbnN0IFF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PFF1ZXJ5VGFza0NvbnRleHRQcm9wcz4oe1xuICByZXNldFN5bWJvbDogbnVsbFxufSlcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tDb250ZXh0UHJvcHMge1xuICByZXNldFN5bWJvbD86IHN5bWJvbCAvLyB1c2VkIHRvIHRyaWdnZXIgcmVzZXQgb3BlcmF0aW9uXG59XG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIGNsYXNzTmFtZXMsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBJTVNxbEV4cHJlc3Npb24sXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgUmVhY3RSZWR1eCxcbiAgaG9va3MsXG4gIERhdGFTb3VyY2VNYW5hZ2VyLFxuICB0eXBlIFNxbFF1ZXJ5UGFyYW1zLFxuICBJbW11dGFibGVcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBUb29sdGlwLCBDaGVja2JveCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBTcWxFeHByZXNzaW9uUnVudGltZSwgZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24gfSBmcm9tICdqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWUnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9JVEVNIH0gZnJvbSAnLi4vZGVmYXVsdC1xdWVyeS1pdGVtJ1xuaW1wb3J0IHsgc2FuaXRpemVTcWxFeHByZXNzaW9uLCBpc1F1ZXJ5SW5wdXRWYWxpZCB9IGZyb20gJy4vcXVlcnktdXRpbHMnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2UgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IFF1ZXJ5VGFza1NwYXRpYWxGb3JtIH0gZnJvbSAnLi9xdWVyeS10YXNrLXNwYXRpYWwtZm9ybSdcbmltcG9ydCB7IHVzZUF1dG9IZWlnaHQgfSBmcm9tICcuL3VzZUF1dG9IZWlnaHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmltcG9ydCB7IFF1ZXJ5VGFza0NvbnRleHQgfSBmcm9tICcuL3F1ZXJ5LXRhc2stY29udGV4dCdcbmltcG9ydCB7IEluZm9PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8nXG5pbXBvcnQgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgfSBmcm9tICcuL3NlbGVjdGlvbi11dGlscydcblxuLyoqXG4gKiBFdmVudC1Ecml2ZW4gSGFzaCBQYXJhbWV0ZXIgRXhlY3V0aW9uIFBhdHRlcm5cbiAqIFxuICogQ1JJVElDQUw6IFRoaXMgaXMgdGhlIE9OTFkgZXhlY3V0aW9uIHBhdGggZm9yIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXMuXG4gKiBcbiAqIEZsb3c6XG4gKiAxLiBIYXNoIHZhbHVlIHNldCBpbiBzdGF0ZSBhcyBTVFJJTkcgKGUuZy4sIFwiNTU2ODkwMDAwMFwiKVxuICogMi4gRE9NIG1hbmlwdWxhdGlvbiB0cmlnZ2VycyBTcWxFeHByZXNzaW9uUnVudGltZSB0byBwcm9jZXNzIHRoZSB2YWx1ZVxuICogMy4gU3FsRXhwcmVzc2lvblJ1bnRpbWUgY29udmVydHMgc3RyaW5nIOKGkiBhcnJheSBmb3JtYXQgW3t2YWx1ZTogXCIuLi5cIiwgbGFiZWw6IFwiLi4uXCJ9XVxuICogNC4gaGFuZGxlU3FsRXhwck9iakNoYW5nZSBkZXRlY3RzIGNvbnZlcnNpb24g4oaSIGRpc3BhdGNoZXMgUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlRcbiAqIDUuIEV2ZW50IGxpc3RlbmVyIGluIHF1ZXJ5LXRhc2sudHN4IGV4ZWN1dGVzIHF1ZXJ5IChPUiBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGNhbGxzIGFwcGx5UXVlcnkgZGlyZWN0bHkpXG4gKiBcbiAqIFdIWSBUSElTIFBBVFRFUk4gRVhJU1RTOlxuICogLSBTcWxFeHByZXNzaW9uUnVudGltZSBPTkxZIGZpcmVzIG9uQ2hhbmdlIHdoZW4gdmFsdWUgaXMgY29udmVydGVkIHRvIGFycmF5IGZvcm1hdFxuICogLSBRdWVyaWVzIFJFUVVJUkUgYXJyYXkgZm9ybWF0IC0gZXhlY3V0aW5nIHdpdGggc3RyaW5nIGZvcm1hdCByZXR1cm5zIHVuZmlsdGVyZWQgcmVzdWx0cyAoMTAwMCByZWNvcmRzKVxuICogLSBXZSBNVVNUIHdhaXQgZm9yIGNvbnZlcnNpb24gYmVmb3JlIGV4ZWN1dGluZyBxdWVyaWVzXG4gKiBcbiAqIEFOVEktUEFUVEVSTiBUTyBBVk9JRDpcbiAqIC0gRE8gTk9UIGFkZCB1c2VFZmZlY3QgaG9va3MgdGhhdCBleGVjdXRlIHF1ZXJpZXMgYmFzZWQgb24gc3RyaW5nIHZhbHVlc1xuICogLSBETyBOT1QgZXhlY3V0ZSBxdWVyaWVzIGJlZm9yZSBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCBpcyBkaXNwYXRjaGVkXG4gKiAtIERPIE5PVCBjaXJjdW12ZW50IHRoZSBldmVudC1kcml2ZW4gZmxvdyB3aXRoIGVhcmx5IGV4ZWN1dGlvbiBjaGVja3NcbiAqIFxuICogSWYgeW91IG5lZWQgdG8gZXhlY3V0ZSBhIHF1ZXJ5LCB3YWl0IGZvciB0aGUgY29udmVyc2lvbiBldmVudCBvciBjYWxsIGFwcGx5UXVlcnkoKVxuICogQUZURVIgaGFuZGxlU3FsRXhwck9iakNoYW5nZSBoYXMgZGV0ZWN0ZWQgdGhlIGNvbnZlcnNpb24gYW5kIGRpc3BhdGNoZWQgdGhlIGV2ZW50LlxuICovXG5jb25zdCBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCA9ICdxdWVyeXNpbXBsZS1oYXNoLXZhbHVlLWNvbnZlcnRlZCdcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tJdGVtUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIGNvbmZpZ0lkOiBzdHJpbmdcbiAgc3BhdGlhbEZpbHRlckVuYWJsZWQ6IGJvb2xlYW5cbiAgZGF0YXNvdXJjZVJlYWR5OiBib29sZWFuXG4gIG91dHB1dERTPzogRGF0YVNvdXJjZVxuICBvbkZvcm1TdWJtaXQ6IChzcWxFeHByT2JqOiBJTVNxbEV4cHJlc3Npb24sIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmosIHpvb21Ub1NlbGVjdGVkPzogYm9vbGVhbikgPT4gdm9pZFxuICBkYXRhQWN0aW9uRmlsdGVyPzogU3FsUXVlcnlQYXJhbXNcbiAgaW5pdGlhbElucHV0VmFsdWU/OiBzdHJpbmdcbiAgb25IYXNoUGFyYW1ldGVyVXNlZD86IChzaG9ydElkOiBzdHJpbmcpID0+IHZvaWRcbiAgcXVlcnlJdGVtU2hvcnRJZD86IHN0cmluZ1xuICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnXG4gIG9uVGFiQ2hhbmdlPzogKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4gdm9pZFxufVxuXG5jb25zdCBnZXRGb3JtU3R5bGUgPSAoaXNBdXRvSGVpZ2h0OiBib29sZWFuKSA9PiB7XG4gIHJldHVybiBjc3NgXG4gICAgZmxleDogMSAxIGF1dG87XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgLmZvcm0tdGl0bGUge1xuICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyLXRleHQpO1xuICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIGZvbnQtc2l6ZTogMC44MTI1cmVtO1xuICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgIG1hcmdpbi10b3A6IDAgIWltcG9ydGFudDtcbiAgICB9XG4gICAgLnF1ZXJ5LWZvcm1fX2NvbnRlbnQge1xuICAgICAgZmxleDogMSAxICR7aXNBdXRvSGVpZ2h0ID8gJ2F1dG8nIDogJ2F1dG8nfTtcbiAgICAgIG1heC1oZWlnaHQ6ICR7aXNBdXRvSGVpZ2h0ID8gJzYxLjh2aCcgOiAnbm9uZSd9O1xuICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICBwYWRkaW5nLWJvdHRvbTogMDtcbiAgICB9XG4gICAgLnF1ZXJ5LWZvcm1fX2FjdGlvbnMge1xuICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgcGFkZGluZy10b3A6IDRweDtcbiAgICB9XG4gIGBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza0Zvcm0gKHByb3BzOiBRdWVyeVRhc2tJdGVtUHJvcHMpIHtcbiAgY29uc3QgeyB3aWRnZXRJZCwgY29uZmlnSWQsIG91dHB1dERTLCBzcGF0aWFsRmlsdGVyRW5hYmxlZCwgZGF0YXNvdXJjZVJlYWR5LCBvbkZvcm1TdWJtaXQsIGRhdGFBY3Rpb25GaWx0ZXIsIGluaXRpYWxJbnB1dFZhbHVlLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCBxdWVyeUl0ZW1TaG9ydElkLCBhY3RpdmVUYWIsIG9uVGFiQ2hhbmdlIH0gPSBwcm9wc1xuICBjb25zdCBwcmVEYXRhQWN0aW9uRmlsdGVyID0gaG9va3MudXNlUHJldmlvdXMoZGF0YUFjdGlvbkZpbHRlcilcbiAgY29uc3QgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucXVlcnlJdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5jb25maWdJZCA9PT0gY29uZmlnSWQpXG4gIH0pXG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9RVUVSWV9JVEVNLCBxdWVyeUl0ZW0pXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IFtyZXNldFN5bWJvbCwgc2V0UmVzZXRTeW1ib2xdID0gUmVhY3QudXNlU3RhdGU8c3ltYm9sPihudWxsKVxuICAvLyBSdW50aW1lIHpvb20gcHJlZmVyZW5jZSAtIGluaXRpYWxpemVkIHdpdGggY29uZmlnIHZhbHVlLCBjYW4gYmUgb3ZlcnJpZGRlbiBieSB1c2VyXG4gIGNvbnN0IFtydW50aW1lWm9vbVRvU2VsZWN0ZWQsIHNldFJ1bnRpbWVab29tVG9TZWxlY3RlZF0gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPihcbiAgICBxdWVyeUl0ZW0/Lnpvb21Ub1NlbGVjdGVkID8/IHRydWVcbiAgKVxuXG4gIC8vIFN5bmMgcnVudGltZSB6b29tIHByZWZlcmVuY2Ugd2hlbiBxdWVyeSBpdGVtIGNoYW5nZXMgKGUuZy4sIHN3aXRjaGluZyBiZXR3ZWVuIHF1ZXJpZXMpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0UnVudGltZVpvb21Ub1NlbGVjdGVkKHF1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQgPz8gdHJ1ZSlcbiAgfSwgW3F1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQsIHF1ZXJ5SXRlbT8uY29uZmlnSWRdKVxuXG4gIC8vIGNvbnN0IFtkYXRhU291cmNlLCBzZXREYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG4gIGNvbnN0IHtcbiAgICB1c2VBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgdXNlU3BhdGlhbEZpbHRlcixcbiAgICBzcGF0aWFsRmlsdGVyVHlwZXMsXG4gICAgc3FsRXhwck9iaixcbiAgICBzcGF0aWFsTWFwV2lkZ2V0SWRzLFxuICAgIHNwYXRpYWxJbnRlcmFjdGl2ZUNyZWF0ZVRvb2xUeXBlcyxcbiAgICBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcyxcbiAgICBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhLFxuICAgIHNwYXRpYWxSZWxhdGlvbnMsXG4gICAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyLFxuICAgIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlLFxuICAgIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXQsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyLFxuICAgIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlLFxuICAgIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXQsXG4gICAgYXR0cmlidXRlRmlsdGVyTGFiZWwgPSBnZXRJMThuTWVzc2FnZSgnYXR0cmlidXRlRmlsdGVyJyksXG4gICAgc3BhdGlhbEZpbHRlckxhYmVsID0gZ2V0STE4bk1lc3NhZ2UoJ3NwYXRpYWxGaWx0ZXInKSxcbiAgICBhdHRyaWJ1dGVGaWx0ZXJEZXNjLFxuICAgIHNwYXRpYWxGaWx0ZXJEZXNjXG4gIH0gPSBjdXJyZW50SXRlbVxuICBjb25zdCBbYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiwgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9ial0gPSBSZWFjdC51c2VTdGF0ZTxJTVNxbEV4cHJlc3Npb24+KHNxbEV4cHJPYmopXG4gIC8vIFJlZiB0byB0cmFjayBjdXJyZW50IFNRTCBleHByZXNzaW9uIGZvciBzeW5jaHJvbm91cyBhY2Nlc3MgaW4gYXBwbHlRdWVyeVxuICAvLyBUaGlzIGVuc3VyZXMgaGFzaCB2YWx1ZXMgYXJlIGltbWVkaWF0ZWx5IGF2YWlsYWJsZSB3aGVuIEFwcGx5IGlzIGNsaWNrZWRcbiAgY29uc3QgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9ialJlZiA9IFJlYWN0LnVzZVJlZjxJTVNxbEV4cHJlc3Npb24+KHNxbEV4cHJPYmopXG4gIGNvbnN0IHNwYXRpYWxGaWx0ZXJPYmpSZWYgPSBSZWFjdC51c2VSZWY8U3BhdGlhbEZpbHRlck9iaj4obnVsbClcbiAgY29uc3Qgc3BhdGlhbFJlbGF0aW9uUmVmID0gUmVhY3QudXNlUmVmPFNwYXRpYWxSZWxhdGlvbj4oU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdClcbiAgY29uc3QgYnVmZmVyUmVmID0gUmVhY3QudXNlUmVmPHsgZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUgfT4obnVsbClcbiAgY29uc3QgYXBwbHlCdXR0b25SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IGZvcm1Db250ZW50UmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICBjb25zdCBpc0F1dG9IZWlnaHQgPSB1c2VBdXRvSGVpZ2h0KClcbiAgY29uc3Qgc2hvd0NsYXVzZU51bWJlciA9IFJlYWN0LnVzZVJlZihnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxFeHByT2JqKSlcbiAgY29uc3QgaW5pdGlhbFZhbHVlU2V0UmVmID0gUmVhY3QudXNlUmVmPHN0cmluZyB8IG51bGw+KG51bGwpIC8vIFRyYWNrIHdoaWNoIGNvbmZpZ0lkIHdlJ3ZlIHNldCB0aGUgdmFsdWUgZm9yXG4gIGNvbnN0IGxhc3RWYWx1ZVNldFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKSAvLyBUcmFjayB0aGUgbGFzdCB2YWx1ZSB0aGF0IHdhcyBzZXRcbiAgY29uc3QgaGFzaFRyaWdnZXJlZFJlZiA9IFJlYWN0LnVzZVJlZjxib29sZWFuPihmYWxzZSkgLy8gVHJhY2sgaWYgcXVlcnkgd2FzIHRyaWdnZXJlZCB2aWEgaGFzaCBwYXJhbWV0ZXJcbiAgY29uc3QgcHJldmlvdXNDb25maWdJZFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKSAvLyBUcmFjayBwcmV2aW91cyBjb25maWdJZCB0byBkZXRlY3QgcXVlcnkgc3dpdGNoZXNcbiAgY29uc3QgW2lzVHlwaW5nVmFsaWQsIHNldElzVHlwaW5nVmFsaWRdID0gUmVhY3QudXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG5cbiAgLy8gTW9uaXRvciBmb2N1cyBhbmQgaW5wdXQgZXZlbnRzIHdpdGhpbiB0aGUgcXVlcnkgZm9ybVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUZvY3VzID0gKGU6IEZvY3VzRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgICBpZiAodGFyZ2V0LnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcbiAgICAgICAgY29uc3QgdmFsID0gKHRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZVxuICAgICAgICBzZXRJc1R5cGluZ1ZhbGlkKGlzUXVlcnlJbnB1dFZhbGlkKHZhbCkpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ2lucHV0LWZvY3VzZWQnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHRhZ05hbWU6IHRhcmdldC50YWdOYW1lLFxuICAgICAgICAgIHR5cGU6ICh0YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudHlwZSxcbiAgICAgICAgICB2YWx1ZTogdmFsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlSW5wdXQgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgICBpZiAodGFyZ2V0LnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcbiAgICAgICAgY29uc3QgdmFsID0gKHRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZVxuICAgICAgICBjb25zdCBpc1ZhbGlkID0gaXNRdWVyeUlucHV0VmFsaWQodmFsKVxuICAgICAgICBzZXRJc1R5cGluZ1ZhbGlkKGlzVmFsaWQpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ2lucHV0LXR5cGluZycsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgdmFsdWU6IHZhbCxcbiAgICAgICAgICBpc1R5cGluZ1ZhbGlkOiBpc1ZhbGlkXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlRm9jdXNPdXQgPSAoZTogRm9jdXNFdmVudCkgPT4ge1xuICAgICAgLy8gU21hbGwgZGVsYXkgdG8gYWxsb3cgc3RhdGUgdG8gY2F0Y2ggdXBcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzZXRJc1R5cGluZ1ZhbGlkKGZhbHNlKVxuICAgICAgfSwgNTApXG4gICAgfVxuXG4gICAgY29uc3QgY29udGFpbmVyID0gZm9ybUNvbnRlbnRSZWYuY3VycmVudFxuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgaGFuZGxlRm9jdXMpXG4gICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBoYW5kbGVJbnB1dClcbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGhhbmRsZUZvY3VzT3V0KVxuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgaGFuZGxlRm9jdXMpXG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIGhhbmRsZUlucHV0KVxuICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBoYW5kbGVGb2N1c091dClcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25maWdJZF0pXG5cbiAgLy8gQ2hlY2sgaWYgYW55IGF0dHJpYnV0ZSBmaWx0ZXIgaW5wdXQgaXMgdmFsaWRcbiAgY29uc3QgaXNJbnB1dFZhbGlkID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgLy8gSWYgdGhlIHVzZXIgaXMgY3VycmVudGx5IHR5cGluZyBzb21ldGhpbmcgdmFsaWQsIHRoZSBmb3JtIGlzIHZhbGlkXG4gICAgaWYgKGlzVHlwaW5nVmFsaWQpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICd2YWxpZGF0aW9uLWNoZWNrLWluc3RhbnQnLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgaXNWYWxpZDogdHJ1ZVxuICAgICAgfSlcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgaWYgKCFhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cyB8fCBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLnBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWUgLy8gSWYgbm8gcGFydHMsIHdlIGFzc3VtZSBpdCdzIHZhbGlkIChlLmcuIHNwYXRpYWwtb25seSBxdWVyeSlcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgYXQgbGVhc3Qgb25lIFNJTkdMRSBwYXJ0IGhhcyBhIHZhbGlkIHZhbHVlXG4gICAgY29uc3QgaGFzVmFsaWRWYWx1ZSA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmoucGFydHMuc29tZShwYXJ0ID0+IHtcbiAgICAgIC8vIEFjY2Vzc2luZyBJbW11dGFibGUgc3RydWN0dXJlcyByZXF1aXJlcyBjYXJlLiBJZiBkb3Qgbm90YXRpb24gZmFpbHMsIFxuICAgICAgLy8gdGhlIGZyYW1ld29yayBjb21wb25lbnRzIG1pZ2h0IGJlIHVzaW5nIC5nZXQoKSBvciBvdGhlciBtZXRob2RzLlxuICAgICAgLy8gV2UnbGwgYmUgaW5jbHVzaXZlIGhlcmU6IGlmIGl0J3Mgbm90IGEgU0lOR0xFIHBhcnQsIHdlIHRyZWF0IGl0IGFzIHZhbGlkLlxuICAgICAgaWYgKHBhcnQudHlwZSA9PT0gJ1NJTkdMRScpIHtcbiAgICAgICAgY29uc3QgdmFsID0gcGFydC52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHBhcnQudmFsdWVPcHRpb25zPy5zb3VyY2VcbiAgICAgICAgXG4gICAgICAgIC8vIElmIHRoZSBzb3VyY2UgaXMgTk9UICdVU0VSX0lOUFVUJywgaXQncyBsaWtlbHkgYSBsaXN0L2Ryb3Bkb3duIChVTklRVUVfVkFMVUVTLCBGSUVMRF9WQUxVRSlcbiAgICAgICAgLy8gV2UgYWxzbyBjaGVjayBmb3IgcGFydC5kYXRhU291cmNlIHdoaWNoIGlzIGNvbW1vbiBmb3IgbGlzdC1iYXNlZCBzZWxlY3Rpb25zXG4gICAgICAgIC8vIFdlIHRyZWF0IHRoZXNlIGFzIFwiTGlzdFwiIHR5cGVzIHdoaWNoIGFyZSBleGVtcHRlZCBmcm9tIHRoZSBlbXB0eS1zdHJpbmcgcnVsZS5cbiAgICAgICAgY29uc3QgaXNMaXN0ID0gKHNvdXJjZSAmJiBzb3VyY2UgIT09ICdVU0VSX0lOUFVUJykgfHwgKHBhcnQuZGF0YVNvdXJjZT8uc291cmNlKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGlzUXVlcnlJbnB1dFZhbGlkKHZhbCwgISFpc0xpc3QpXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2YWxpZGF0aW9uLWNoZWNrLWRldGFpbCcsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgcGFydFR5cGU6IHBhcnQudHlwZSxcbiAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgaGFzRGF0YVNvdXJjZTogISFwYXJ0LmRhdGFTb3VyY2UsXG4gICAgICAgICAgZGF0YVNvdXJjZVNvdXJjZTogcGFydC5kYXRhU291cmNlPy5zb3VyY2UsXG4gICAgICAgICAgaXNMaXN0OiAhIWlzTGlzdCxcbiAgICAgICAgICB2YWx1ZTogdmFsLFxuICAgICAgICAgIGlzVmFsaWRcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ3ZhbGlkYXRpb24tY2hlY2snLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHBhcnRUeXBlOiBwYXJ0LnR5cGUsXG4gICAgICAgICAgc291cmNlLFxuICAgICAgICAgIGlzTGlzdCxcbiAgICAgICAgICB2YWx1ZTogdmFsLFxuICAgICAgICAgIHZhbHVlVHlwZTogdHlwZW9mIHZhbCxcbiAgICAgICAgICBpc1ZhbGlkXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gaXNWYWxpZFxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWUgXG4gICAgfSlcblxuICAgIHJldHVybiBoYXNWYWxpZFZhbHVlXG4gIH0sIFthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBjb25maWdJZCwgaXNUeXBpbmdWYWxpZF0pXG5cbiAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUz8uZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXVxuXG4gIC8vIFRyYWNrIGNvbmZpZ0lkIGNoYW5nZXMgKHF1ZXJ5IHN3aXRjaGVzKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnY29uZmlnSWQtY2hhbmdlZCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIHByZXZpb3VzQ29uZmlnSWQ6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbY29uZmlnSWQsIGluaXRpYWxJbnB1dFZhbHVlLCBkYXRhc291cmNlUmVhZHksIG91dHB1dERTLCB3aWRnZXRJZCwgaGFzaFRyaWdnZXJlZFJlZl0pXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGlucHV0IHZhbHVlIGZyb20gVVJMIGhhc2ggcGFyYW1ldGVycyB3aGVuOlxuICAgKiAxLiBEYXRhc291cmNlIGlzIHJlYWR5XG4gICAqIDIuIFdlIGhhdmUgYW4gaW5pdGlhbElucHV0VmFsdWUgZnJvbSBVUkwgaGFzaFxuICAgKiAzLiBXZSBoYXZlbid0IGFscmVhZHkgc2V0IGl0IGZvciB0aGlzIGNvbmZpZ0lkLCBPUiB0aGUgdmFsdWUgaGFzIGNoYW5nZWRcbiAgICogXG4gICAqIFVzZXMgYm90aCBSZWFjdCBzdGF0ZSB1cGRhdGVzIGFuZCBET00gbWFuaXB1bGF0aW9uIHRvIGVuc3VyZSB0aGUgdmFsdWVcbiAgICogaXMgcHJvcGVybHkgc2V0IGluIFNxbEV4cHJlc3Npb25SdW50aW1lJ3MgaW50ZXJuYWwgc3RhdGUuXG4gICAqL1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnaW5pdGlhbElucHV0VmFsdWUtcHJvcC1yZWNlaXZlZCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgZGF0YXNvdXJjZVJlYWR5LFxuICAgICAgaGFzU3FsRXhwck9iajogISFzcWxFeHByT2JqLFxuICAgICAgc3FsRXhwck9ialBhcnRzTGVuZ3RoOiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoLFxuICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgIHdpbGxQcm9jZXNzOiBkYXRhc291cmNlUmVhZHkgJiYgaW5pdGlhbElucHV0VmFsdWUgJiYgc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCA+IDAsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFJlc2V0IGZsYWcgaWYgY29uZmlnSWQgY2hhbmdlZCAoc3dpdGNoZWQgdG8gZGlmZmVyZW50IHF1ZXJ5KVxuICAgIGlmIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQpIHtcbiAgICAgIGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgbGFzdFZhbHVlU2V0UmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBoYXNoIHRyaWdnZXIgZmxhZyB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaFRyaWdnZXJlZFJlZi1yZXNldCcsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICByZWFzb246ICdzd2l0Y2hpbmctcXVlcmllcycsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHNldElzVHlwaW5nVmFsaWQoZmFsc2UpIC8vIFJlc2V0IHR5cGluZyB2YWxpZGF0aW9uXG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHZhbHVlIGhhcyBjaGFuZ2VkIGZvciB0aGUgc2FtZSBjb25maWdJZFxuICAgIGNvbnN0IHZhbHVlQ2hhbmdlZCA9IGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBudWxsICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBpbml0aWFsSW5wdXRWYWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ID09PSBjb25maWdJZFxuICAgIFxuICAgIC8vIFNldCB0aGUgdmFsdWUgaWY6XG4gICAgLy8gLSBXZSBoYXZlbid0IHNldCBpdCBmb3IgdGhpcyBjb25maWdJZCB5ZXQsIE9SXG4gICAgLy8gLSBUaGUgdmFsdWUgaGFzIGNoYW5nZWQgZm9yIHRoZSBzYW1lIGNvbmZpZ0lkIChoYXNoIHBhcmFtZXRlciB1cGRhdGVkKVxuICAgIGNvbnN0IHNob3VsZFNldFZhbHVlID0gZGF0YXNvdXJjZVJlYWR5ICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBjb25maWdJZCB8fCB2YWx1ZUNoYW5nZWQpXG4gICAgXG4gICAgaWYgKHNob3VsZFNldFZhbHVlKSB7XG4gICAgICAvLyBFbnN1cmUgUXVlcnkgdGFiIGlzIGFjdGl2ZSBiZWZvcmUgc2V0dGluZyBoYXNoIHZhbHVlXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgU3FsRXhwcmVzc2lvblJ1bnRpbWUgaXMgdmlzaWJsZSBhbmQgY2FuIHByb2Nlc3MgdGhlIHZhbHVlXG4gICAgICBpZiAoYWN0aXZlVGFiICE9PSAncXVlcnknICYmIG9uVGFiQ2hhbmdlKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtc2V0dGluZy1zd2l0Y2hpbmctdG8tcXVlcnktdGFiJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICBjdXJyZW50VGFiOiBhY3RpdmVUYWIsXG4gICAgICAgICAgbm90ZTogJ1N3aXRjaGluZyB0byBRdWVyeSB0YWIgYmVmb3JlIHNldHRpbmcgaGFzaCB2YWx1ZSB0byBlbnN1cmUgU3FsRXhwcmVzc2lvblJ1bnRpbWUgY2FuIHByb2Nlc3MgaXQnXG4gICAgICAgIH0pXG4gICAgICAgIG9uVGFiQ2hhbmdlKCdxdWVyeScpXG4gICAgICAgIC8vIFJldHVybiBlYXJseSAtIHVzZUVmZmVjdCB3aWxsIHJ1biBhZ2FpbiB3aGVuIGFjdGl2ZVRhYiBiZWNvbWVzICdxdWVyeSdcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLXNldHRpbmctc3RhcnQnLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZjogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICAgIHZhbHVlQ2hhbmdlZCxcbiAgICAgICAgaGFzaFRyaWdnZXJlZFJlZkJlZm9yZTogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgICBzcWxFeHByT2JqUGFydHNMZW5ndGg6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGgsXG4gICAgICAgIGFjdGl2ZVRhYixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBTZXQgaGFzaFRyaWdnZXJlZFJlZiBJTU1FRElBVEVMWSB3aGVuIHNldHRpbmcgaGFzaCB2YWx1ZVxuICAgICAgLy8gVGhpcyBlbnN1cmVzIGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgY2FuIGRldGVjdCBoYXNoLXRyaWdnZXJlZCBjb252ZXJzaW9uc1xuICAgICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICBldmVudDogJ2hhc2hUcmlnZ2VyZWRSZWYtc2V0LXRydWUnLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgZmlyc3RQYXJ0ID0gc3FsRXhwck9iai5wYXJ0c1swXVxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IHBhcnQgaXMgYSBTSU5HTEUgY2xhdXNlIChub3QgYSBTcWxDbGF1c2VTZXQpXG4gICAgICBpZiAoZmlyc3RQYXJ0ICYmICd0eXBlJyBpbiBmaXJzdFBhcnQgJiYgZmlyc3RQYXJ0LnR5cGUgPT09ICdTSU5HTEUnICYmICd2YWx1ZU9wdGlvbnMnIGluIGZpcnN0UGFydCkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGV4cHJlc3Npb24gb2JqZWN0IHdpdGggdGhlIGluaXRpYWwgdmFsdWVcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHNxbEV4cHJPYmouc2V0SW4oWydwYXJ0cycsICcwJywgJ3ZhbHVlT3B0aW9ucycsICd2YWx1ZSddLCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtc2V0dGluZy1yZWFjdC1zdGF0ZScsXG4gICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgcHJldmlvdXNTdGF0ZVZhbHVlOiBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlLFxuICAgICAgICAgIG5ld1N0YXRlVmFsdWU6IHVwZGF0ZWQ/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWUsXG4gICAgICAgICAgd2lsbENhbGxTZXRTdGF0ZTogdHJ1ZSxcbiAgICAgICAgICBub3RlOiAnU2V0dGluZyB2YWx1ZSBpbiBSZWFjdCBzdGF0ZSAtIFNxbEV4cHJlc3Npb25SdW50aW1lIHNob3VsZCByZWNlaXZlIHZpYSBleHByZXNzaW9uIHByb3AnXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHVwZGF0ZWQpXG4gICAgICAgIC8vIFVwZGF0ZSByZWYgaW1tZWRpYXRlbHkgZm9yIHN5bmNocm9ub3VzIGFjY2VzcyBpbiBhcHBseVF1ZXJ5XG4gICAgICAgIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudCA9IHVwZGF0ZWRcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtcmVmLXVwZGF0ZWQnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIHJlZlZhbHVlQWZ0ZXJVcGRhdGU6IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudD8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgLy8gVXBkYXRlIGNsYXVzZSBudW1iZXIgZm9yIHRoZSB1cGRhdGVkIGV4cHJlc3Npb25cbiAgICAgICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24odXBkYXRlZClcbiAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgPSBjb25maWdJZFxuICAgICAgICBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCA9IGluaXRpYWxJbnB1dFZhbHVlXG4gICAgICAgIFxuICAgICAgICAvLyBBbHNvIHNldCB0aGUgdmFsdWUgZGlyZWN0bHkgb24gdGhlIGlucHV0IGVsZW1lbnQgYWZ0ZXIgYSBkZWxheSB0byBlbnN1cmUgY29tcG9uZW50IGlzIHJlbmRlcmVkXG4gICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgU3FsRXhwcmVzc2lvblJ1bnRpbWUgbWF5IG5vdCBzeW5jIGZyb20gdGhlIGV4cHJlc3Npb24gcHJvcCBhbG9uZVxuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAvLyBGaW5kIHRoZSBpbnB1dCBlbGVtZW50IHdpdGhpbiBTcWxFeHByZXNzaW9uUnVudGltZVxuICAgICAgICAgIC8vIFVzZSBkYXRhLXdpZGdldGlkIChzdGFuZGFyZCBFeEIgYXR0cmlidXRlKSB0byBpc29sYXRlIHRoZSBjb3JyZWN0IHdpZGdldCBpbnN0YW5jZVxuICAgICAgICAgIGNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtd2lkZ2V0aWQ9XCIke3dpZGdldElkfVwiXWApPy5xdWVyeVNlbGVjdG9yKCcucXVlcnktZm9ybScpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAud2lkZ2V0LXJ1bnRpbWVbZGF0YS13aWRnZXRpZD1cIiR7d2lkZ2V0SWR9XCJdYCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1ZXJ5LWZvcm0nKVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1kb20tbWFuaXB1bGF0aW9uLXN0YXJ0JyxcbiAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICBmb3JtRWxlbWVudEZvdW5kOiAhIWZvcm1FbGVtZW50LFxuICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICBzZWxlY3RvcjE6IGBbZGF0YS13aWRnZXRpZD1cIiR7d2lkZ2V0SWR9XCJdIC5xdWVyeS1mb3JtYCxcbiAgICAgICAgICAgIHNlbGVjdG9yMjogYC53aWRnZXQtcnVudGltZVtkYXRhLXdpZGdldGlkPVwiJHt3aWRnZXRJZH1cIl1gLFxuICAgICAgICAgICAgc2VsZWN0b3IzOiAnLnF1ZXJ5LWZvcm0nLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIExvb2sgZm9yIHRleHQgaW5wdXQgZWxlbWVudHNcbiAgICAgICAgICAgIGNvbnN0IHRleHRJbnB1dHMgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWRvbS1tYW5pcHVsYXRpb24taW5wdXRzLWZvdW5kJyxcbiAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICBpbnB1dHNGb3VuZDogdGV4dElucHV0cy5sZW5ndGgsXG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50VGFnOiBmb3JtRWxlbWVudC50YWdOYW1lLFxuICAgICAgICAgICAgICBmb3JtRWxlbWVudENsYXNzOiBmb3JtRWxlbWVudC5jbGFzc05hbWUsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGlucHV0c1VwZGF0ZWQgPSAwXG4gICAgICAgICAgICB0ZXh0SW5wdXRzLmZvckVhY2goKGlucHV0OiBIVE1MSW5wdXRFbGVtZW50LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWUgaWYgaW5wdXQgaXMgZW1wdHkgT1IgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIChoYXNoIHBhcmFtZXRlciB1cGRhdGVkKVxuICAgICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGUgPSAhaW5wdXQudmFsdWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUudHJpbSgpID09PSAnJyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSAhPT0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtZG9tLW1hbmlwdWxhdGlvbi1pbnB1dC1jaGVjaycsXG4gICAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgaW5wdXRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgY3VycmVudElucHV0VmFsdWU6IGlucHV0LnZhbHVlLFxuICAgICAgICAgICAgICAgIGlucHV0SWQ6IGlucHV0LmlkLFxuICAgICAgICAgICAgICAgIGlucHV0TmFtZTogaW5wdXQubmFtZSxcbiAgICAgICAgICAgICAgICBpbnB1dFBhcmVudFRhZzogaW5wdXQucGFyZW50RWxlbWVudD8udGFnTmFtZSxcbiAgICAgICAgICAgICAgICBzaG91bGRVcGRhdGUsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgLy8gRm9jdXMgdGhlIGlucHV0IGZpcnN0XG4gICAgICAgICAgICAgICAgaW5wdXQuZm9jdXMoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgdmFsdWVcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGluaXRpYWxJbnB1dFZhbHVlXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWRvbS1tYW5pcHVsYXRpb24taW5wdXQtdmFsdWUtc2V0JyxcbiAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgICBpbnB1dEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgIHZhbHVlQWZ0ZXJTZXQ6IGlucHV0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgaXNGb2N1c2VkOiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBpbnB1dCxcbiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkaXNwYXRjaCBpbnB1dCBldmVudCB3aXRoIHByb3BlciBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRFdmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5wdXRFdmVudCwgJ3RhcmdldCcsIHsgdmFsdWU6IGlucHV0LCBlbnVtZXJhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgaW5wdXQuZGlzcGF0Y2hFdmVudChpbnB1dEV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgZGlzcGF0Y2ggY2hhbmdlIGV2ZW50XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlRXZlbnQgPSBuZXcgRXZlbnQoJ2NoYW5nZScsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjaGFuZ2VFdmVudCwgJ3RhcmdldCcsIHsgdmFsdWU6IGlucHV0LCBlbnVtZXJhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgaW5wdXQuZGlzcGF0Y2hFdmVudChjaGFuZ2VFdmVudClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBbHNvIHRyeSBSZWFjdCdzIHN5bnRoZXRpYyBldmVudCBhcHByb2FjaCB1c2luZyBuYXRpdmUgdmFsdWUgc2V0dGVyXG4gICAgICAgICAgICAgICAgY29uc3QgbmF0aXZlSW5wdXRWYWx1ZVNldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLCAndmFsdWUnKT8uc2V0XG4gICAgICAgICAgICAgICAgaWYgKG5hdGl2ZUlucHV0VmFsdWVTZXR0ZXIpIHtcbiAgICAgICAgICAgICAgICAgIG5hdGl2ZUlucHV0VmFsdWVTZXR0ZXIuY2FsbChpbnB1dCwgaW5pdGlhbElucHV0VmFsdWUpXG4gICAgICAgICAgICAgICAgICBjb25zdCByZWFjdEV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICAgaW5wdXQuZGlzcGF0Y2hFdmVudChyZWFjdEV2ZW50KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtZG9tLW1hbmlwdWxhdGlvbi1ldmVudHMtZGlzcGF0Y2hlZCcsXG4gICAgICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICAgICAgaW5wdXRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICBpbnB1dEV2ZW50RGlzcGF0Y2hlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGNoYW5nZUV2ZW50RGlzcGF0Y2hlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHJlYWN0RXZlbnREaXNwYXRjaGVkOiAhIW5hdGl2ZUlucHV0VmFsdWVTZXR0ZXIsXG4gICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsdXIgdG8gdHJpZ2dlciBhbnkgdmFsaWRhdGlvbiBvciBzdGF0ZSB1cGRhdGVzXG4gICAgICAgICAgICAgICAgaW5wdXQuYmx1cigpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaW5wdXRzVXBkYXRlZCsrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXM6IERPTSBtYW5pcHVsYXRpb24gdHJpZ2dlcnMgU3FsRXhwcmVzc2lvblJ1bnRpbWUgb25DaGFuZ2VcbiAgICAgICAgICAgIC8vIGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgZGV0ZWN0cyBjb252ZXJzaW9uIGFuZCBmaXJlcyBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVFxuICAgICAgICAgICAgLy8gRXZlbnQgbGlzdGVuZXIgaW4gcXVlcnktdGFzay50c3ggZXhlY3V0ZXMgcXVlcnkgZGlyZWN0bHkgLSBubyBBcHBseSBidXR0b24gY2xpY2sgbmVlZGVkXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1kb20tbWFuaXB1bGF0aW9uLWNvbXBsZXRlJyxcbiAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICBpbnB1dHNGb3VuZDogdGV4dElucHV0cy5sZW5ndGgsXG4gICAgICAgICAgICAgIGlucHV0c1VwZGF0ZWQsXG4gICAgICAgICAgICAgIG5vdGU6ICdET00gbWFuaXB1bGF0aW9uIGNvbXBsZXRlIC0gU3FsRXhwcmVzc2lvblJ1bnRpbWUgb25DaGFuZ2Ugc2hvdWxkIGZpcmUnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWRvbS1tYW5pcHVsYXRpb24tZmFpbGVkJyxcbiAgICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICByZWFzb246ICdmb3JtRWxlbWVudC1ub3QtZm91bmQnLFxuICAgICAgICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgNTAwKSAvLyBMb25nZXIgZGVsYXkgdG8gZW5zdXJlIGNvbXBvbmVudCBpcyBmdWxseSByZW5kZXJlZFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFRoZSBzcWxFeHByT2JqLnBhcnRzIG1heSBjaGFuZ2UgYnV0IHRoZSBkaXNwbGF5U1FMIGlzIHRoZSBzYW1lXG4gICAgaWYgKCFzcWxFeHByT2JqKSB7XG4gICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSAwXG4gICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKG51bGwpXG4gICAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdzcWxFeHByT2JqLWNsZWFyZWQnLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxFeHByT2JqKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB3ZSBhbHJlYWR5IGhhdmUgYSB2YWx1ZSBzZXQgKGZyb20gdXNlciBpbnB1dCBvciBoYXNoKVxuICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgICAgY29uc3QgYmFzZVZhbHVlID0gc3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgICAgY29uc3QgaGFzVmFsdWVTZXQgPSBjdXJyZW50VmFsdWUgIT09IHVuZGVmaW5lZCAmJiBjdXJyZW50VmFsdWUgIT09IG51bGwgJiYgY3VycmVudFZhbHVlICE9PSAnJ1xuICAgICAgY29uc3QgY29uZmlnSWRDaGFuZ2VkID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ICE9PSBudWxsICYmIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCAhPT0gY29uZmlnSWRcbiAgICAgIFxuICAgICAgLy8gT25seSB1cGRhdGUgaWY6XG4gICAgICAvLyAxLiBXZSBoYXZlbid0IHNldCBhIHZhbHVlIHlldCAobm8gdmFsdWUgaW4gY3VycmVudCBzdGF0ZSksIE9SXG4gICAgICAvLyAyLiBjb25maWdJZCBjaGFuZ2VkIChzd2l0Y2hpbmcgcXVlcmllcyAtIHJlc2V0IHRvIGJhc2Ugc3FsRXhwck9iailcbiAgICAgIC8vIE90aGVyd2lzZSwgcHJlc2VydmUgdGhlIGV4aXN0aW5nIHZhbHVlIGFzIGEgdmlzdWFsIHJlY29yZFxuICAgICAgaWYgKCFoYXNWYWx1ZVNldCB8fCBjb25maWdJZENoYW5nZWQpIHtcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihzcWxFeHByT2JqKVxuICAgICAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnQgPSBzcWxFeHByT2JqXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzcWxFeHByT2JqLXVwZGF0ZWQtcmVmJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBwcmV2aW91c0NvbmZpZ0lkOiBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgaW5pdGlhbFZhbHVlU2V0UmVmOiBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCxcbiAgICAgICAgICBoYXNWYWx1ZVNldCxcbiAgICAgICAgICBjb25maWdJZENoYW5nZWQsXG4gICAgICAgICAgcHJldmlvdXNWYWx1ZTogY3VycmVudFZhbHVlLFxuICAgICAgICAgIG5ld1ZhbHVlOiBiYXNlVmFsdWUsXG4gICAgICAgICAgcmVhc29uOiBjb25maWdJZENoYW5nZWQgPyAnY29uZmlnSWQtY2hhbmdlZC1yZXNldHRpbmcnIDogJ25vLXZhbHVlLXNldC1pbml0aWFsaXppbmcnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnc3FsRXhwck9iai1za2lwcGVkLXJlZi11cGRhdGUnLFxuICAgICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICAgIHByZXZpb3VzQ29uZmlnSWQ6IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCxcbiAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWY6IGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50LFxuICAgICAgICAgIGN1cnJlbnRWYWx1ZSxcbiAgICAgICAgICBiYXNlVmFsdWUsXG4gICAgICAgICAgcmVhc29uOiAndmFsdWUtYWxyZWFkeS1zZXQtcHJlc2VydmluZy1hcy12aXN1YWwtcmVjb3JkJyxcbiAgICAgICAgICBub3RlOiAnU2tpcHBpbmcgdXBkYXRlIHRvIHByZXNlcnZlIHVzZXItZW50ZXJlZCBvciBoYXNoLXNldCB2YWx1ZSBhcyB2aXN1YWwgcmVjb3JkJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHByZXZpb3VzQ29uZmlnSWRSZWYgZm9yIG5leHQgY29tcGFyaXNvblxuICAgICAgcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ID0gY29uZmlnSWRcbiAgICB9XG4gIH0sIFtzcWxFeHByT2JqLCBpbml0aWFsSW5wdXRWYWx1ZSwgZGF0YXNvdXJjZVJlYWR5LCBjb25maWdJZCwgd2lkZ2V0SWQsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbVNob3J0SWQsIGFjdGl2ZVRhYiwgb25UYWJDaGFuZ2VdKVxuICBcbiAgLy8gS2VlcCByZWYgaW4gc3luYyB3aXRoIHN0YXRlIGNoYW5nZXMgKGZvciBTcWxFeHByZXNzaW9uUnVudGltZSB1cGRhdGVzKVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudCA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpcbiAgICBcbiAgICAvLyBMb2cgd2hlbiBzdGF0ZSBjaGFuZ2VzIC0gdGhpcyBpcyB3aGF0IFNxbEV4cHJlc3Npb25SdW50aW1lIHJlY2VpdmVzIHZpYSBleHByZXNzaW9uIHByb3BcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ2F0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmotc3RhdGUtY2hhbmdlZCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIHN0YXRlVmFsdWU6IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWUsXG4gICAgICBzdGF0ZVZhbHVlVHlwZTogdHlwZW9mIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWUsXG4gICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5KGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWUpLFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZjogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBub3RlOiAnUmVhY3Qgc3RhdGUgY2hhbmdlZCAtIFNxbEV4cHJlc3Npb25SdW50aW1lIHNob3VsZCByZWNlaXZlIHRoaXMgdmlhIGV4cHJlc3Npb24gcHJvcCdcbiAgICB9KVxuICB9LCBbYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiwgY29uZmlnSWQsIGluaXRpYWxJbnB1dFZhbHVlXSlcblxuICBjb25zdCBhcHBseVF1ZXJ5ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIFdoZW4gdGhlICdhcHBseScgYnV0dG9uIGlzIGNsaWNrZWQsIGl0IHNob3VsZCBjbGVhciB0aGUgc2VsZWN0aW9uIGZyb20gdGhlIHByZXZpb3VzIHJlc3VsdCBsaXN0XG4gICAgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKG91dHB1dERTKVxuXG4gICAgaWYgKG91dHB1dERTKSB7XG4gICAgICBjb25zdCBvcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgaWYgKG9yaWdpbkRzKSB7XG4gICAgICAgIGNvbnN0IGRhdGFWaWV3Q29uZmlnID0gb3JpZ2luRHMuZ2V0RGF0YVZpZXdDb25maWcoKVxuICAgICAgICBjb25zdCBtYXhpbXVtID0gZGF0YVZpZXdDb25maWc/Lm1heGltdW1cbiAgICAgICAgaWYgKG1heGltdW0gIT0gbnVsbCAmJiBtYXhpbXVtID4gMCkge1xuICAgICAgICAgIERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkudXBkYXRlRGF0YVNvdXJjZUJ5RGF0YVNvdXJjZUpzb24oXG4gICAgICAgICAgICBvdXRwdXREUyxcbiAgICAgICAgICAgIG91dHB1dERTLmdldERhdGFTb3VyY2VKc29uKCkuc2V0SW4oWydxdWVyeScsICdtYXhpbXVtJ10sIG1heGltdW0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9yY2Ugem9vbSBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllcywgb3RoZXJ3aXNlIHVzZSBydW50aW1lIHByZWZlcmVuY2VcbiAgICBjb25zdCB6b29tVG9Vc2UgPSBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPyB0cnVlIDogcnVudGltZVpvb21Ub1NlbGVjdGVkXG5cbiAgICAvLyBTYW5pdGl6ZSB1c2VyIGlucHV0IGJlZm9yZSBzdWJtaXNzaW9uXG4gICAgLy8gUmVhZCBmcm9tIHJlZiB0byBnZXQgdGhlIGxhdGVzdCB2YWx1ZSBzeW5jaHJvbm91c2x5IChpbmNsdWRpbmcgaGFzaCB2YWx1ZXMpXG4gICAgY29uc3QgY3VycmVudFNxbEV4cHJPYmogPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqUmVmLmN1cnJlbnRcbiAgICBjb25zdCBjdXJyZW50UmVmVmFsdWUgPSBjdXJyZW50U3FsRXhwck9iaj8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnYXBwbHlRdWVyeS1leGVjdXRpbmcnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGN1cnJlbnRSZWZWYWx1ZSxcbiAgICAgIHJlZkhhc1ZhbHVlOiAhIWN1cnJlbnRSZWZWYWx1ZSxcbiAgICAgIGhhc2hUcmlnZ2VyZWQ6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgY29uc3Qgc2FuaXRpemVkU3FsRXhwck9iaiA9IHNhbml0aXplU3FsRXhwcmVzc2lvbihjdXJyZW50U3FsRXhwck9iailcbiAgICBcbiAgICAvLyBMb2cgdGhlIHNhbml0aXplZCBleHByZXNzaW9uIHRvIHNlZSBpZiB2YWx1ZSB3YXMgcHJlc2VydmVkXG4gICAgY29uc3Qgc2FuaXRpemVkVmFsdWUgPSBzYW5pdGl6ZWRTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdhcHBseVF1ZXJ5LWFmdGVyLXNhbml0aXplJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgY3VycmVudFJlZlZhbHVlLFxuICAgICAgc2FuaXRpemVkVmFsdWUsXG4gICAgICB2YWx1ZXNNYXRjaDogY3VycmVudFJlZlZhbHVlID09PSBzYW5pdGl6ZWRWYWx1ZSxcbiAgICAgIHNhbml0aXplZFZhbHVlVHlwZTogdHlwZW9mIHNhbml0aXplZFZhbHVlLFxuICAgICAgY3VycmVudFJlZlZhbHVlVHlwZTogdHlwZW9mIGN1cnJlbnRSZWZWYWx1ZSxcbiAgICAgIGlzQXJyYXlDdXJyZW50OiBBcnJheS5pc0FycmF5KGN1cnJlbnRSZWZWYWx1ZSksXG4gICAgICBpc0FycmF5U2FuaXRpemVkOiBBcnJheS5pc0FycmF5KHNhbml0aXplZFZhbHVlKSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICBsZXQgcmVsID0gc3BhdGlhbFJlbGF0aW9uUmVmLmN1cnJlbnRcbiAgICBpZiAoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Py5nZW9tZXRyeSAmJiByZWwgPT0gbnVsbCkge1xuICAgICAgcmVsID0gU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdFxuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQ/Lmdlb21ldHJ5KSkge1xuICAgICAgaWYgKHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudC5nZW9tZXRyeS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgb25Gb3JtU3VibWl0KHNhbml0aXplZFNxbEV4cHJPYmosIHsgLi4uc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50LCBnZW9tZXRyeTogc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Lmdlb21ldHJ5WzBdLCByZWxhdGlvbjogcmVsLCBidWZmZXI6IGJ1ZmZlclJlZi5jdXJyZW50IH0sIHpvb21Ub1VzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xuICAgICAgICAgICdlc3JpL2dlb21ldHJ5L29wZXJhdG9ycy91bmlvbk9wZXJhdG9yJ1xuICAgICAgICBdKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgICAgICAgIGNvbnN0IG9wZXJhdG9yOiAodHlwZW9mIF9fZXNyaS51bmlvbk9wZXJhdG9yKSA9IG1vZHVsZXNbMF1cbiAgICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG9wZXJhdG9yLmV4ZWN1dGVNYW55KHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudC5nZW9tZXRyeSlcbiAgICAgICAgICBvbkZvcm1TdWJtaXQoc2FuaXRpemVkU3FsRXhwck9iaiwgeyAuLi5zcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQsIGdlb21ldHJ5LCByZWxhdGlvbjogcmVsLCBidWZmZXI6IGJ1ZmZlclJlZi5jdXJyZW50IH0sIHpvb21Ub1VzZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgb25Gb3JtU3VibWl0KHNhbml0aXplZFNxbEV4cHJPYmosIHsgLi4uc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50LCByZWxhdGlvbjogcmVsLCBidWZmZXI6IGJ1ZmZlclJlZi5jdXJyZW50IH0sIHpvb21Ub1VzZSlcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgaGFzaFRyaWdnZXJlZFJlZiBhZnRlciB1c2VcbiAgICBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnaGFzaFRyaWdnZXJlZFJlZi1yZXNldC1hZnRlci1hcHBseScsXG4gICAgICBjb25maWdJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtvbkZvcm1TdWJtaXQsIG91dHB1dERTLCBydW50aW1lWm9vbVRvU2VsZWN0ZWRdKVxuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSBSZWFjdC51c2VDYWxsYmFjaygoZXZlbnQ6IFJlYWN0LktleWJvYXJkRXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInICYmIGRhdGFzb3VyY2VSZWFkeSAmJiBpc0lucHV0VmFsaWQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIFxuICAgICAgLy8gRmluZCB0aGUgYWN0aXZlIGlucHV0IGZpZWxkXG4gICAgICBjb25zdCBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICBpZiAoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCcgJiYgYWN0aXZlRWxlbWVudC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgLy8gRm9yY2UgYmx1ciB0byB0cmlnZ2VyIFNxbEV4cHJlc3Npb25SdW50aW1lJ3MgaW5wdXQgcHJvY2Vzc2luZ1xuICAgICAgICBhY3RpdmVFbGVtZW50LmJsdXIoKVxuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgYmx1ciBwcm9jZXNzaW5nLCB0aGVuIGNsaWNrIHRoZSBBcHBseSBidXR0b25cbiAgICAgICAgLy8gVGhpcyB1c2VzIHRoZSBleGFjdCBzYW1lIGNvZGUgcGF0aCBhcyBjbGlja2luZyB0aGUgYnV0dG9uIG1hbnVhbGx5XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmIChhcHBseUJ1dHRvblJlZi5jdXJyZW50ICYmICFhcHBseUJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkKSB7XG4gICAgICAgICAgICBhcHBseUJ1dHRvblJlZi5jdXJyZW50LmNsaWNrKClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBwbHlRdWVyeSgpXG4gICAgICAgICAgfVxuICAgICAgICB9LCAyMDApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3QgaW4gYW4gaW5wdXQgZmllbGQsIHNhZmUgdG8gYXBwbHkgaW1tZWRpYXRlbHlcbiAgICAgICAgaWYgKGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQgJiYgIWFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuZGlzYWJsZWQpIHtcbiAgICAgICAgICBhcHBseUJ1dHRvblJlZi5jdXJyZW50LmNsaWNrKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcHBseVF1ZXJ5KClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2RhdGFzb3VyY2VSZWFkeSwgYXBwbHlRdWVyeSwgaXNJbnB1dFZhbGlkXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZGF0YUFjdGlvbkZpbHRlcikgcmV0dXJuXG4gICAgaWYgKGRhdGFBY3Rpb25GaWx0ZXIud2hlcmUgIT09IHByZURhdGFBY3Rpb25GaWx0ZXI/LndoZXJlKSB7XG4gICAgICAvLyBMb2cgc3RhdGUgd2hlbiBkYXRhQWN0aW9uRmlsdGVyIGNoYW5nZXMgKHF1ZXJ5IHN3aXRjaClcbiAgICAgIGNvbnN0IGN1cnJlbnRSZWZWYWx1ZSA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudD8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgICAgY29uc3QgaGFzUGVuZGluZ0hhc2hWYWx1ZSA9IGluaXRpYWxJbnB1dFZhbHVlICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZWZWYWx1ZSAhPT0gaW5pdGlhbElucHV0VmFsdWUpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdkYXRhQWN0aW9uRmlsdGVyLWNoYW5nZWQtYXV0by10cmlnZ2VyJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIHByZXZpb3VzV2hlcmU6IHByZURhdGFBY3Rpb25GaWx0ZXI/LndoZXJlLFxuICAgICAgICBuZXdXaGVyZTogZGF0YUFjdGlvbkZpbHRlci53aGVyZSxcbiAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIGluaXRpYWxWYWx1ZVNldFJlZjogaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQsXG4gICAgICAgIGN1cnJlbnRSZWZWYWx1ZSxcbiAgICAgICAgaGFzUGVuZGluZ0hhc2hWYWx1ZSxcbiAgICAgICAgd2lsbENhbGxBcHBseVF1ZXJ5OiAhaGFzUGVuZGluZ0hhc2hWYWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBhcHBseVF1ZXJ5KClcbiAgICB9XG4gIH0sIFtkYXRhQWN0aW9uRmlsdGVyLCBwcmVEYXRhQWN0aW9uRmlsdGVyPy53aGVyZSwgYXBwbHlRdWVyeSwgaW5pdGlhbElucHV0VmFsdWUsIGNvbmZpZ0lkXSlcblxuICBjb25zdCByZXNldFF1ZXJ5ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIDEuIHJlc2V0IGF0dHJpYnV0ZSBmaWx0ZXJcbiAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxFeHByT2JqKVxuICAgIHNldEF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmooc3FsRXhwck9iailcbiAgICAvLyAyLiByZXNldCBzcGF0aWFsIGZpbHRlclxuICAgIHNldFJlc2V0U3ltYm9sKFN5bWJvbCgpKVxuICB9LCBbc3FsRXhwck9ial0pXG5cbiAgY29uc3QgaGFuZGxlU3FsRXhwck9iakNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChzcWxPYmo6IElNU3FsRXhwcmVzc2lvbikgPT4ge1xuICAgIC8vIExPRyBBVCBUSEUgVkVSWSBTVEFSVFxuICAgIGNvbnN0IHNxbE9ialZhbHVlID0gc3FsT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgY29uc3QgcHJldmlvdXNSZWZWYWx1ZSA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmpSZWYuY3VycmVudD8ucGFydHM/LlswXT8udmFsdWVPcHRpb25zPy52YWx1ZVxuICAgIGNvbnN0IHByZXZpb3VzU3RhdGVWYWx1ZSA9IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LnZhbHVlT3B0aW9ucz8udmFsdWVcbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGZyb20gdXNlciB0eXBpbmcgb3IgcHJvcCBjaGFuZ2VcbiAgICBjb25zdCBpc0Zyb21Vc2VyVHlwaW5nID0gdHlwZW9mIHByZXZpb3VzUmVmVmFsdWUgPT09ICdzdHJpbmcnICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygc3FsT2JqVmFsdWUgPT09ICdvYmplY3QnICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHNxbE9ialZhbHVlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWxPYmpWYWx1ZVswXT8udmFsdWUgPT09IHByZXZpb3VzUmVmVmFsdWVcbiAgICBjb25zdCBpc0Zyb21Qcm9wQ2hhbmdlID0gSlNPTi5zdHJpbmdpZnkocHJldmlvdXNTdGF0ZVZhbHVlKSA9PT0gSlNPTi5zdHJpbmdpZnkoc3FsT2JqVmFsdWUpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVTcWxFeHByT2JqQ2hhbmdlLWNhbGxlZCcsXG4gICAgICBjb25maWdJZCxcbiAgICAgIHNxbE9iakV4aXN0czogISFzcWxPYmosXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWY6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgIHNxbE9ialZhbHVlLFxuICAgICAgc3FsT2JqVmFsdWVUeXBlOiB0eXBlb2Ygc3FsT2JqVmFsdWUsXG4gICAgICBzcWxPYmpJc0FycmF5OiBBcnJheS5pc0FycmF5KHNxbE9ialZhbHVlKSxcbiAgICAgIHByZXZpb3VzUmVmVmFsdWUsXG4gICAgICBwcmV2aW91c1N0YXRlVmFsdWUsXG4gICAgICBpc0Zyb21Vc2VyVHlwaW5nLFxuICAgICAgaXNGcm9tUHJvcENoYW5nZSxcbiAgICAgIHRyaWdnZXJTb3VyY2U6IGlzRnJvbVVzZXJUeXBpbmcgPyAndXNlci10eXBpbmcnIDogKGlzRnJvbVByb3BDaGFuZ2UgPyAncHJvcC1jaGFuZ2UnIDogJ3Vua25vd24nKSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgY29uc3QgZmlyc3RQYXJ0ID0gc3FsT2JqPy5wYXJ0cz8uWzBdXG4gICAgY29uc3QgdmFsdWUgPSBmaXJzdFBhcnQ/LnR5cGUgPT09ICdTSU5HTEUnID8gKGZpcnN0UGFydCBhcyBhbnkpLnZhbHVlT3B0aW9ucz8udmFsdWUgOiAnbm90LXNpbmdsZSdcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICBldmVudDogJ3NxbC1leHByZXNzaW9uLWNoYW5nZWQnLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBwYXJ0c0NvdW50OiBzcWxPYmo/LnBhcnRzPy5sZW5ndGggfHwgMCxcbiAgICAgIGZpcnN0UGFydFZhbHVlOiB2YWx1ZSxcbiAgICAgIGhhc2hUcmlnZ2VyZWRSZWZWYWx1ZTogaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50LFxuICAgICAgaW5pdGlhbElucHV0VmFsdWU6IGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgaXNBcnJheUZvcm1hdDogQXJyYXkuaXNBcnJheSh2YWx1ZSksXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbE9iailcbiAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHNxbE9iailcbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgaGFzaC10cmlnZ2VyZWQgY29udmVyc2lvbiAoc3RyaW5nIC0+IGFycmF5KVxuICAgIC8vIFdoZW4gaGFzaCB2YWx1ZSBjaGFuZ2VzIGZvciBzYW1lIGNvbmZpZ0lkLCBTcWxFeHByZXNzaW9uUnVudGltZSBjb252ZXJ0cyBzdHJpbmcgdG8gYXJyYXkgZm9ybWF0XG4gICAgaWYgKGZpcnN0UGFydD8udHlwZSA9PT0gJ1NJTkdMRScgJiYgZmlyc3RQYXJ0Py52YWx1ZU9wdGlvbnM/LnZhbHVlKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGZpcnN0UGFydC52YWx1ZU9wdGlvbnMudmFsdWVcbiAgICAgIGNvbnN0IGlzQXJyYXlGb3JtYXQgPSBBcnJheS5pc0FycmF5KHZhbHVlKVxuICAgICAgY29uc3QgaGFzSW5pdGlhbFZhbHVlID0gaW5pdGlhbElucHV0VmFsdWUgJiYgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50XG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdzcWwtZXhwcmVzc2lvbi1jaGFuZ2VkLWNvbnZlcnNpb24tY2hlY2snLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgaXNBcnJheUZvcm1hdCxcbiAgICAgICAgaGFzSW5pdGlhbFZhbHVlLFxuICAgICAgICBoYXNoVHJpZ2dlcmVkUmVmVmFsdWU6IGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCxcbiAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgIHZhbHVlVHlwZTogdHlwZW9mIHZhbHVlLFxuICAgICAgICB2YWx1ZTogQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IHZhbHVlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIElmIHZhbHVlIGNvbnZlcnRlZCB0byBhcnJheSBmb3JtYXQgQU5EIHRoaXMgd2FzIGhhc2gtdHJpZ2dlcmVkLCBmaXJlIGV2ZW50XG4gICAgICBpZiAoaXNBcnJheUZvcm1hdCAmJiBoYXNJbml0aWFsVmFsdWUgJiYgaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlc0hhc2hWYWx1ZSA9IHZhbHVlLmxlbmd0aCA+IDAgJiYgdmFsdWVbMF0/LnZhbHVlID09PSBpbml0aWFsSW5wdXRWYWx1ZVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgICAgIGV2ZW50OiAnc3FsLWV4cHJlc3Npb24tY2hhbmdlZC1tYXRjaGVzLWNoZWNrJyxcbiAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICBtYXRjaGVzSGFzaFZhbHVlLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIGNvbnZlcnRlZFZhbHVlRmlyc3RJdGVtOiB2YWx1ZVswXT8udmFsdWUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBpZiAobWF0Y2hlc0hhc2hWYWx1ZSkge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtdG8tYXJyYXknLFxuICAgICAgICAgICAgY29uZmlnSWQsXG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgIGNvbnZlcnRlZFZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmlyZSBjdXN0b20gZXZlbnQgZm9yIHF1ZXJ5IGV4ZWN1dGlvbiB0byB3YWl0IG9uXG4gICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlQsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICBjb252ZXJ0ZWRWYWx1ZTogdmFsdWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXZlbnQtZGlzcGF0Y2hlZCcsXG4gICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBFWEVDVVRJT04gUE9JTlQ6IFF1ZXJ5IGV4ZWN1dGlvbiBoYXBwZW5zIEhFUkUgYWZ0ZXIgY29udmVyc2lvbiBpcyBjb25maXJtZWRcbiAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBPTkxZIHBsYWNlIHdoZXJlIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXMgc2hvdWxkIGV4ZWN1dGVcbiAgICAgICAgICAvLyBUaGUgZXZlbnQgUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlQgaGFzIGJlZW4gZGlzcGF0Y2hlZCBhYm92ZVxuICAgICAgICAgIC8vIFRoaXMgZGlyZWN0IGNhbGwgaGFuZGxlcyB0aGUgY2FzZSB3aGVyZSBjb252ZXJzaW9uIGhhcHBlbnMgc3luY2hyb25vdXNseVxuICAgICAgICAgIC8vIFRoZSBldmVudCBsaXN0ZW5lciBpbiBxdWVyeS10YXNrLnRzeCBoYW5kbGVzIHRoZSBhc3luYyBjYXNlXG4gICAgICAgICAgaWYgKGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCAmJiBkYXRhc291cmNlUmVhZHkgJiYgb3V0cHV0RFMpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLXZhbHVlLWNvbnZlcnRlZC1leGVjdXRpbmctcXVlcnktZGlyZWN0bHknLFxuICAgICAgICAgICAgICBjb25maWdJZCxcbiAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgIG5vdGU6ICdDb252ZXJzaW9uIGNvbXBsZXRlIC0gZXhlY3V0aW5nIHF1ZXJ5IGRpcmVjdGx5IHZpYSBhcHBseVF1ZXJ5IChldmVudC1kcml2ZW4gcGF0dGVybiknLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVzZSBzZXRUaW1lb3V0IHRvIGVuc3VyZSB0aGlzIGhhcHBlbnMgYWZ0ZXIgdGhlIGN1cnJlbnQgZXZlbnQgbG9vcFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGFwcGx5UXVlcnkoKVxuICAgICAgICAgICAgfSwgMClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjb25maWdJZCwgaW5pdGlhbElucHV0VmFsdWUsIHdpZGdldElkLCBkYXRhc291cmNlUmVhZHksIG91dHB1dERTLCBhcHBseVF1ZXJ5XSlcblxuICBjb25zdCBoYW5kbGVTcGF0aWFsRmlsdGVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGZpbHRlcjogU3BhdGlhbEZpbHRlck9iaikgPT4ge1xuICAgIHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCA9IGZpbHRlclxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVSZWxhdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChyZWw6IFNwYXRpYWxSZWxhdGlvbikgPT4ge1xuICAgIHNwYXRpYWxSZWxhdGlvblJlZi5jdXJyZW50ID0gcmVsXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZUJ1ZmZlckNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4ge1xuICAgIGJ1ZmZlclJlZi5jdXJyZW50ID0geyBkaXN0YW5jZSwgdW5pdCB9XG4gIH0sIFtdKVxuXG4gIGNvbnN0IHNob3dBdHRyaWJ1dGVGaWx0ZXIgPSB1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwck9iaiAhPSBudWxsXG4gIGNvbnN0IHNob3dTcGF0aWFsRmlsdGVyID0gc3BhdGlhbEZpbHRlckVuYWJsZWQgJiYgdXNlU3BhdGlhbEZpbHRlciAmJiAoc3BhdGlhbEZpbHRlclR5cGVzLmxlbmd0aCA+IDAgfHwgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSB8fCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMClcblxuICAvLyBEZWJ1ZyBsb2dnaW5nIGZvciBmb3JtIHJlbmRlcmluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgIGV2ZW50OiAnZm9ybS1yZW5kZXItY2hlY2snLFxuICAgICAgY29uZmlnSWQsXG4gICAgICBkYXRhc291cmNlUmVhZHksXG4gICAgICB1c2VBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICBzcWxFeHByT2JqOiBzcWxFeHByT2JqID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICBzcWxFeHByT2JqUGFydHM6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHNob3dBdHRyaWJ1dGVGaWx0ZXIsXG4gICAgICBvcmlnaW5EUzogb3JpZ2luRFMgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbm9uZScsXG4gICAgICBzaG93U3BhdGlhbEZpbHRlcixcbiAgICAgIGlzQXV0b0hlaWdodCxcbiAgICAgIG91dHB1dERTOiBvdXRwdXREUyA/ICdleGlzdHMnIDogJ251bGwnXG4gICAgfSlcbiAgfSwgW2NvbmZpZ0lkLCBkYXRhc291cmNlUmVhZHksIHVzZUF0dHJpYnV0ZUZpbHRlciwgc3FsRXhwck9iaiwgc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFMsIHNob3dTcGF0aWFsRmlsdGVyLCBpc0F1dG9IZWlnaHQsIG91dHB1dERTXSlcblxuICAvLyBMb2cgd2hlbiBmb3JtIGNvbnRlbnQgc2hvdWxkIHJlbmRlclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzaG93QXR0cmlidXRlRmlsdGVyICYmIG9yaWdpbkRTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnYXR0cmlidXRlLWZpbHRlci1yZWFkeScsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgc3FsRXhwck9ialBhcnRzOiBzcWxFeHByT2JqPy5wYXJ0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGF0dHJpYnV0ZUZpbHRlckxhYmVsLFxuICAgICAgICBub3RlOiAnSW5wdXQgZmllbGQgc2hvdWxkIGJlIHZpc2libGUnXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgIGV2ZW50OiAnYXR0cmlidXRlLWZpbHRlci1ub3QtcmVhZHknLFxuICAgICAgICBjb25maWdJZCxcbiAgICAgICAgc2hvd0F0dHJpYnV0ZUZpbHRlcixcbiAgICAgICAgb3JpZ2luRFM6IG9yaWdpbkRTID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICAgICAgc3FsRXhwck9iajogc3FsRXhwck9iaiA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgICByZWFzb246ICFzaG93QXR0cmlidXRlRmlsdGVyID8gJ3Nob3dBdHRyaWJ1dGVGaWx0ZXIgaXMgZmFsc2UnIDogJ29yaWdpbkRTIGlzIG51bGwnXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3Nob3dBdHRyaWJ1dGVGaWx0ZXIsIG9yaWdpbkRTLCBjb25maWdJZCwgc3FsRXhwck9iaiwgdXNlQXR0cmlidXRlRmlsdGVyLCBhdHRyaWJ1dGVGaWx0ZXJMYWJlbF0pXG5cbiAgLy8gQ2hlY2sgRE9NIHZpc2liaWxpdHkgYWZ0ZXIgcmVuZGVyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGZvcm1Db250ZW50UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShmb3JtQ29udGVudFJlZi5jdXJyZW50KVxuICAgICAgY29uc3QgcmVjdCA9IGZvcm1Db250ZW50UmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdmb3JtLWNvbnRlbnQtZG9tLWNoZWNrJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGV4aXN0czogISFmb3JtQ29udGVudFJlZi5jdXJyZW50LFxuICAgICAgICBkaXNwbGF5OiBjb21wdXRlZFN0eWxlLmRpc3BsYXksXG4gICAgICAgIHZpc2liaWxpdHk6IGNvbXB1dGVkU3R5bGUudmlzaWJpbGl0eSxcbiAgICAgICAgb3BhY2l0eTogY29tcHV0ZWRTdHlsZS5vcGFjaXR5LFxuICAgICAgICBoZWlnaHQ6IGNvbXB1dGVkU3R5bGUuaGVpZ2h0LFxuICAgICAgICBtYXhIZWlnaHQ6IGNvbXB1dGVkU3R5bGUubWF4SGVpZ2h0LFxuICAgICAgICBmbGV4OiBjb21wdXRlZFN0eWxlLmZsZXgsXG4gICAgICAgIGZsZXhCYXNpczogY29tcHV0ZWRTdHlsZS5mbGV4QmFzaXMsXG4gICAgICAgIHJlY3RIZWlnaHQ6IHJlY3QuaGVpZ2h0LFxuICAgICAgICByZWN0V2lkdGg6IHJlY3Qud2lkdGgsXG4gICAgICAgIGlzVmlzaWJsZTogcmVjdC5oZWlnaHQgPiAwICYmIHJlY3Qud2lkdGggPiAwLFxuICAgICAgICBwYXJlbnRIZWlnaHQ6IGZvcm1Db250ZW50UmVmLmN1cnJlbnQucGFyZW50RWxlbWVudD8uY2xpZW50SGVpZ2h0IHx8IDBcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbY29uZmlnSWQsIHNob3dBdHRyaWJ1dGVGaWx0ZXIsIG9yaWdpbkRTXSlcblxuICAvLyBMb2cgd2hlbiBTcWxFeHByZXNzaW9uUnVudGltZSBrZXkgY2hhbmdlcyAoY29tcG9uZW50IHJlbW91bnRzKSBPUiBleHByZXNzaW9uIHByb3AgY2hhbmdlc1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHNxbEV4cHJSdW50aW1lS2V5ID0gYCR7Y29uZmlnSWR9LSR7aW5pdGlhbElucHV0VmFsdWUgfHwgJ25vbmUnfWBcbiAgICBjb25zdCBleHByZXNzaW9uVmFsdWUgPSBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy52YWx1ZU9wdGlvbnM/LnZhbHVlXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdTcWxFeHByZXNzaW9uUnVudGltZS1wcm9wcy1jaGFuZ2VkJyxcbiAgICAgIGNvbmZpZ0lkLFxuICAgICAgaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICBzcWxFeHByUnVudGltZUtleSxcbiAgICAgIGV4cHJlc3Npb25WYWx1ZSxcbiAgICAgIGV4cHJlc3Npb25WYWx1ZVR5cGU6IHR5cGVvZiBleHByZXNzaW9uVmFsdWUsXG4gICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5KGV4cHJlc3Npb25WYWx1ZSksXG4gICAgICBoYXNoVHJpZ2dlcmVkUmVmOiBoYXNoVHJpZ2dlcmVkUmVmLmN1cnJlbnQsXG4gICAgICBvcmlnaW5EU0V4aXN0czogISFvcmlnaW5EUyxcbiAgICAgIG5vdGU6ICdTcWxFeHByZXNzaW9uUnVudGltZSByZWNlaXZpbmcgbmV3IGV4cHJlc3Npb24gcHJvcCAtIHdpbGwgaXQgZmlyZSBvbkNoYW5nZT8nLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgfSwgW2NvbmZpZ0lkLCBpbml0aWFsSW5wdXRWYWx1ZSwgYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaiwgb3JpZ2luRFNdKVxuXG4gIHJldHVybiAoXG4gICAgPFF1ZXJ5VGFza0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgcmVzZXRTeW1ib2wgfX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktZm9ybScgY3NzPXtnZXRGb3JtU3R5bGUoaXNBdXRvSGVpZ2h0KX0+XG4gICAgICAgIDxkaXYgcmVmPXtmb3JtQ29udGVudFJlZn0gY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19jb250ZW50JyBvbktleURvd249e2hhbmRsZUtleURvd259PlxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgIHJvbGU9J2dyb3VwJyBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdweC00JyBcbiAgICAgICAgICAgICAgY3NzPXtjc3NgcGFkZGluZy10b3A6IDJweDtgfVxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPXthdHRyaWJ1dGVGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2Zvcm0tdGl0bGUgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6ICFhdHRyaWJ1dGVGaWx0ZXJMYWJlbCAmJiAhYXR0cmlidXRlRmlsdGVyRGVzYyB9KX0gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHthdHRyaWJ1dGVGaWx0ZXJMYWJlbCAmJiA8ZGl2IGNsYXNzTmFtZT0nbXItMiB0aXRsZTInPnthdHRyaWJ1dGVGaWx0ZXJMYWJlbH08L2Rpdj59XG4gICAgICAgICAgICAgICAge2F0dHJpYnV0ZUZpbHRlckRlc2MgJiYgKFxuICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIGNzcz17Y3NzYHdoaXRlLXNwYWNlOiBwcmUtbGluZTtgfSB0aXRsZT17YXR0cmlidXRlRmlsdGVyRGVzY30+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIGljb24gdHlwZT0ndGVydGlhcnknPjxJbmZvT3V0bGluZWQgY29sb3I9J3ZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pJyBzaXplPSdzJy8+PC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtvcmlnaW5EUyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BtYXJnaW46IC0xMHB4IDBweDtgfT5cbiAgICAgICAgICAgICAgICAgIDxTcWxFeHByZXNzaW9uUnVudGltZVxuICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake2NvbmZpZ0lkfS0ke2luaXRpYWxJbnB1dFZhbHVlIHx8ICdub25lJ31gfVxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e29yaWdpbkRTfVxuICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uPXthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlU3FsRXhwck9iakNoYW5nZX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtzaG93QXR0cmlidXRlRmlsdGVyICYmIHNob3dTcGF0aWFsRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxociBjbGFzc05hbWU9J20tNCcgY3NzPXtjc3NgYm9yZGVyOiBub25lOyBoZWlnaHQ6IDFweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtgfS8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7c2hvd1NwYXRpYWxGaWx0ZXIgJiYgKFxuICAgICAgICAgICAgPFF1ZXJ5VGFza1NwYXRpYWxGb3JtXG4gICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgbGFiZWw9e3NwYXRpYWxGaWx0ZXJMYWJlbH1cbiAgICAgICAgICAgICAgZGVzYz17c3BhdGlhbEZpbHRlckRlc2N9XG4gICAgICAgICAgICAgIGZpbHRlclR5cGVzPXtzcGF0aWFsRmlsdGVyVHlwZXN9XG4gICAgICAgICAgICAgIG1hcFdpZGdldElkcz17c3BhdGlhbE1hcFdpZGdldElkc31cbiAgICAgICAgICAgICAgY3JlYXRlVG9vbFR5cGVzPXtzcGF0aWFsSW50ZXJhY3RpdmVDcmVhdGVUb29sVHlwZXN9XG4gICAgICAgICAgICAgIG9uRmlsdGVyQ2hhbmdlPXtoYW5kbGVTcGF0aWFsRmlsdGVyQ2hhbmdlfVxuICAgICAgICAgICAgICBvblJlbGF0aW9uQ2hhbmdlPXtoYW5kbGVSZWxhdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e2hhbmRsZUJ1ZmZlckNoYW5nZX1cbiAgICAgICAgICAgICAgc3BhdGlhbFJlbGF0aW9ucz17c3BhdGlhbFJlbGF0aW9uc31cbiAgICAgICAgICAgICAgZHNFbmFibGVCdWZmZXI9e3NwYXRpYWxSZWxhdGlvbkVuYWJsZUJ1ZmZlcn1cbiAgICAgICAgICAgICAgZHNCdWZmZXJEaXN0YW5jZT17c3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2V9XG4gICAgICAgICAgICAgIGRzQnVmZmVyVW5pdD17c3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgZHJhd0VuYWJsZUJ1ZmZlcj17c3BhdGlhbEludGVyYWN0aXZlRW5hYmxlQnVmZmVyfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyRGlzdGFuY2U9e3NwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlfVxuICAgICAgICAgICAgICBkcmF3QnVmZmVyVW5pdD17c3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdH1cbiAgICAgICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3NwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzfVxuICAgICAgICAgICAgICB1c2VSdW50aW1lRGF0YT17c3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1mb3JtX19hY3Rpb25zIHB4LTQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICBjaGVja2VkPXtydW50aW1lWm9vbVRvU2VsZWN0ZWR9XG4gICAgICAgICAgICBvbkNoYW5nZT17KF8sIGNoZWNrZWQpID0+IHNldFJ1bnRpbWVab29tVG9TZWxlY3RlZChjaGVja2VkKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbXItMidcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbXItYXV0bycgY3NzPXtjc3NgZm9udC1zaXplOiAwLjg3NXJlbTsgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO2B9PlxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCd6b29tVG9TZWxlY3RlZCcpfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8QnV0dG9uIHJlZj17YXBwbHlCdXR0b25SZWZ9IGNvbG9yPSdwcmltYXJ5JyBjbGFzc05hbWU9J21sLWF1dG8nIGRpc2FibGVkPXshZGF0YXNvdXJjZVJlYWR5IHx8ICFpc0lucHV0VmFsaWR9IG9uQ2xpY2s9e2FwcGx5UXVlcnl9PlxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdhcHBseScpfVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIHsoc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID4gMCB8fCBzaG93U3BhdGlhbEZpbHRlcikgJiYgKFxuICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J21sLTInIG9uQ2xpY2s9e3Jlc2V0UXVlcnl9PntnZXRJMThuTWVzc2FnZSgncmVzZXQnKX08L0J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvUXVlcnlUYXNrQ29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgdHlwZSBJY29uUmVzdWx0LCB0eXBlIEltbXV0YWJsZU9iamVjdCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEljb24gfSBmcm9tICdqaW11LXVpJ1xuXG5pbnRlcmZhY2UgQ29udGVudFByb3BzIHtcbiAgaWNvbj86IEljb25SZXN1bHQgfCBJbW11dGFibGVPYmplY3Q8SWNvblJlc3VsdD5cbiAgbmFtZTogc3RyaW5nXG59XG5cbmNvbnN0IHRleHRTdHlsZSA9IGNzc2BcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgZm9udC1zaXplOiAwLjg3NXJlbTtcbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza0xhYmVsIChwcm9wczogQ29udGVudFByb3BzKSB7XG4gIGNvbnN0IHsgaWNvbiwgbmFtZSB9ID0gcHJvcHNcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIHRleHQtdHJ1bmNhdGUnIGNzcz17dGV4dFN0eWxlfT5cbiAgICAgIHtpY29uICYmIDxJY29uIGNsYXNzTmFtZT0ncXVlcnktdGFzay1pY29uIG1yLTInIGljb249e2ljb24uc3ZnfSAvPn1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXRydW5jYXRlJyB0aXRsZT17bmFtZX0+XG4gICAgICAgIHtuYW1lfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCBSZWFjdCwgdHlwZSBJbW11dGFibGVBcnJheSwgY2xhc3NOYW1lcywgbG9kYXNoLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgU2l6ZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVRhc2sgfSBmcm9tICcuL3F1ZXJ5LXRhc2snXG5pbXBvcnQgeyBRdWVyeVRhc2tMaXN0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QnXG5pbXBvcnQgeyBUYXNrTGlzdFBvcHBlcldyYXBwZXIgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1wb3BwZXItd3JhcHBlcidcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuaW1wb3J0IHsgREVGQVVMVF9RVUVSWV9JVEVNIH0gZnJvbSAnLi4vZGVmYXVsdC1xdWVyeS1pdGVtJ1xuXG5jb25zdCB7IGljb25NYXAgfSA9IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwKClcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHdpZGdldExhYmVsOiBzdHJpbmdcbiAgd3JhcDogYm9vbGVhblxuICBtaW5TaXplOiBTaXplXG4gIGRlZmF1bHRTaXplOiBTaXplXG4gIHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGRlZmF1bHRQYWdlU2l6ZT86IG51bWJlclxuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH1cbiAgb25IYXNoUGFyYW1ldGVyVXNlZD86IChzaG9ydElkOiBzdHJpbmcpID0+IHZvaWRcbn1cblxuY29uc3QgU1BBQ0UgPSA4XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICA+IGRpdiB7XG4gICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gIH1cbmBcblxuLy8gc2hvdyB0YXNrIGxhYmVsIGFuZCBhbiBhcnJvdyB0byB0aGUgdGFzayBjb250ZW50XG5leHBvcnQgZnVuY3Rpb24gVGFza0xpc3RJbmxpbmUgKHByb3BzOiBRdWVyeVRhc2tMaXN0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW1zLCB3aWRnZXRJZCwgbWluU2l6ZSwgZGVmYXVsdFNpemUsIGRlZmF1bHRQYWdlU2l6ZSwgd2lkZ2V0TGFiZWwsIHdyYXAgPSBmYWxzZSB9ID0gcHJvcHNcbiAgY29uc3QgY29udGFpbmVyUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IGNvbnRhaW5lcldpZHRoUmVmID0gUmVhY3QudXNlUmVmPG51bWJlcj4oMClcbiAgY29uc3QgY29udGVudFdpZHRoUmVmID0gUmVhY3QudXNlUmVmPHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0+KHt9KVxuICBjb25zdCBbbnVtT2ZFeHBhbmRlZCwgc2V0TnVtT2ZFeHBhbmRlZF0gPSBSZWFjdC51c2VTdGF0ZShxdWVyeUl0ZW1zLmxlbmd0aClcbiAgY29uc3QgW29wZW5lZFBvcHBlciwgc2V0T3BlbmVkUG9wcGVyXSA9IFJlYWN0LnVzZVN0YXRlKC0xKVxuICBjb25zdCByZXNpemVPYnNlcnZlclJlZiA9IFJlYWN0LnVzZVJlZjxSZXNpemVPYnNlcnZlcj4obnVsbClcblxuICBjb25zdCBhZGp1c3RDb250ZW50ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGxldCB0b3RhbCA9IDBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bU9mRXhwYW5kZWQ7IGkrKykge1xuICAgICAgY29uc3QgaXRlbSA9IHF1ZXJ5SXRlbXNbaV1cbiAgICAgIGNvbnN0IGl0ZW1XaWR0aCA9IGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W2l0ZW0uY29uZmlnSWRdXG4gICAgICBpZiAoaXRlbVdpZHRoID4gMCkge1xuICAgICAgICB0b3RhbCArPSBpdGVtV2lkdGggKyBTUEFDRVxuICAgICAgICBpZiAodG90YWwgPj0gY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCAmJiBudW1PZkV4cGFuZGVkICE9PSBpKSB7XG4gICAgICAgICAgc2V0TnVtT2ZFeHBhbmRlZChpKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLy8gY29udGVudCB3aWR0aCBub3QgcmVhZHlcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0TnVtT2ZFeHBhbmRlZChxdWVyeUl0ZW1zLmxlbmd0aClcbiAgfSwgW251bU9mRXhwYW5kZWQsIHF1ZXJ5SXRlbXNdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpXG4gICAgfVxuICAgIC8vIGJpbmQgd2l0aCB0aGUgbmV3IGV2ZW50IGhhbmRsZXJcbiAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50ID0gbmV3IFJlc2l6ZU9ic2VydmVyKGxvZGFzaC50aHJvdHRsZSgoZW50cmllcykgPT4ge1xuICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLnJvdW5kKGVudHJpZXNbMF0uY29udGVudFJlY3Qud2lkdGgpXG4gICAgICBpZiAoY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCAhPT0gd2lkdGgpIHtcbiAgICAgICAgY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCA9IHdpZHRoXG4gICAgICAgIGFkanVzdENvbnRlbnQoKVxuICAgICAgfVxuICAgIH0sIDIwMCkpXG4gICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudC5vYnNlcnZlKGNvbnRhaW5lclJlZi5jdXJyZW50KVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpXG4gICAgfVxuICB9LCBbYWRqdXN0Q29udGVudF0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgY29udGFpbmVyV2lkdGhSZWYuY3VycmVudCA9IGNvbnRhaW5lclJlZi5jdXJyZW50Py5jbGllbnRXaWR0aFxuICAgIGFkanVzdENvbnRlbnQoKVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZUl0ZW1XaWR0aENoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgcXVlcnlJdGVtID0gcXVlcnlJdGVtc1tpbmRleF1cbiAgICBpZiAoY29udGVudFdpZHRoUmVmLmN1cnJlbnRbcXVlcnlJdGVtLmNvbmZpZ0lkXSAhPT0gd2lkdGgpIHtcbiAgICAgIGNvbnRlbnRXaWR0aFJlZi5jdXJyZW50W3F1ZXJ5SXRlbS5jb25maWdJZF0gPSB3aWR0aFxuICAgICAgYWRqdXN0Q29udGVudCgpXG4gICAgfVxuICB9LCBbcXVlcnlJdGVtcywgYWRqdXN0Q29udGVudF0pXG5cbiAgY29uc3QgaGFuZGxlUG9wcGVyT3BlbmVkQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZGV4OiBudW1iZXIsIGlzT3BlbjogYm9vbGVhbikgPT4ge1xuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHNldE9wZW5lZFBvcHBlcihpbmRleClcbiAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBvcGVuZWRQb3BwZXIpIHtcbiAgICAgIC8vIGN1cnJlbnQgcG9wcGVyIGlzIGNsb3NlZFxuICAgICAgc2V0T3BlbmVkUG9wcGVyKC0xKVxuICAgIH1cbiAgfSwgW29wZW5lZFBvcHBlcl0pXG5cbiAgY29uc3QgW2V4cGFuZGVkQXJyYXksIG5vbkV4cGFuZGVkQXJyYXldID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgZXhwYW5kZWRBcnJheSA9IFtdXG4gICAgY29uc3Qgbm9uRXhwYW5kZWRBcnJheSA9IFtdXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWVyeUl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaSA8IG51bU9mRXhwYW5kZWQpIHtcbiAgICAgICAgZXhwYW5kZWRBcnJheS5wdXNoKHF1ZXJ5SXRlbXNbaV0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub25FeHBhbmRlZEFycmF5LnB1c2gocXVlcnlJdGVtc1tpXSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFtleHBhbmRlZEFycmF5LCBub25FeHBhbmRlZEFycmF5XVxuICB9LCBbcXVlcnlJdGVtcywgbnVtT2ZFeHBhbmRlZF0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHJlZj17Y29udGFpbmVyUmVmfSBjc3M9e3N0eWxlfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3J1bnRpbWUtcXVlcnlfX3F1ZXJ5LWxpc3QgaC0xMDAgZC1mbGV4JywgeyAnZmxleC13cmFwJzogd3JhcCwgJ2FsaWduLWNvbnRlbnQtc3RhcnQnOiB3cmFwIH0pfT5cbiAgICAgIHtleHBhbmRlZEFycmF5Lm1hcCgocXVlcnlJdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUVVFUllfSVRFTSwgcXVlcnlJdGVtKVxuICAgICAgICByZXR1cm4gPFRhc2tMaXN0UG9wcGVyV3JhcHBlclxuICAgICAgICAgIGlkPXtpbmRleH1cbiAgICAgICAgICBrZXk9e2N1cnJlbnRJdGVtLmNvbmZpZ0lkfVxuICAgICAgICAgIGljb249e2N1cnJlbnRJdGVtLmljb259XG4gICAgICAgICAgYnV0dG9uVHlwZT0nZGVmYXVsdCdcbiAgICAgICAgICBsYWJlbD17Y3VycmVudEl0ZW0uZGlzcGxheUxhYmVsID8gY3VycmVudEl0ZW0ubmFtZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICBwb3BwZXJUaXRsZT17Y3VycmVudEl0ZW0ubmFtZX1cbiAgICAgICAgICBvbldpZHRoQ2hhbmdlPXtoYW5kbGVJdGVtV2lkdGhDaGFuZ2V9XG4gICAgICAgICAgbWluU2l6ZT17bWluU2l6ZX1cbiAgICAgICAgICBkZWZhdWx0U2l6ZT17ZGVmYXVsdFNpemV9XG4gICAgICAgICAgb25PcGVuZWRDaGFuZ2U9e2hhbmRsZVBvcHBlck9wZW5lZENoYW5nZX1cbiAgICAgICAgICBmb3JjZUNsb3NlPXtvcGVuZWRQb3BwZXIgPj0gMCAmJiBvcGVuZWRQb3BwZXIgIT09IGluZGV4fVxuICAgICAgICA+XG4gICAgICAgICAgPFF1ZXJ5VGFza1xuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgdG90YWw9ezF9XG4gICAgICAgICAgICBpc0luUG9wcGVyXG4gICAgICAgICAgICBxdWVyeUl0ZW09e2N1cnJlbnRJdGVtfVxuICAgICAgICAgICAgd3JhcHBlZEluUG9wcGVyPXt0cnVlfVxuICAgICAgICAgICAgY2xhc3NOYW1lPSdwYi00J1xuICAgICAgICAgICAgZGVmYXVsdFBhZ2VTaXplPXtkZWZhdWx0UGFnZVNpemV9XG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZT17Y3VycmVudEl0ZW0uc2hvcnRJZCA9PT0gcHJvcHMuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgPyBwcm9wcy5pbml0aWFsUXVlcnlWYWx1ZS52YWx1ZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3Byb3BzLm9uSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkPXtjdXJyZW50SXRlbS5zaG9ydElkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVGFza0xpc3RQb3BwZXJXcmFwcGVyPlxuICAgICAgfSl9XG5cbiAgICAgIHtub25FeHBhbmRlZEFycmF5Lmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8VGFza0xpc3RQb3BwZXJXcmFwcGVyXG4gICAgICAgICAgaWQ9e2V4cGFuZGVkQXJyYXkubGVuZ3RoICsgMX1cbiAgICAgICAgICBpY29uPXtpY29uTWFwLmljb25Nb3JlfVxuICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgYnV0dG9uVHlwZT0nZGVmYXVsdCdcbiAgICAgICAgICBwb3BwZXJUaXRsZT17d2lkZ2V0TGFiZWx9XG4gICAgICAgICAgZGVmYXVsdFNpemU9e2RlZmF1bHRTaXplfVxuICAgICAgICAgIG9uT3BlbmVkQ2hhbmdlPXtoYW5kbGVQb3BwZXJPcGVuZWRDaGFuZ2V9XG4gICAgICAgICAgZm9yY2VDbG9zZT17b3BlbmVkUG9wcGVyID49IDAgJiYgb3BlbmVkUG9wcGVyICE9PSBleHBhbmRlZEFycmF5Lmxlbmd0aCArIDF9XG4gICAgICAgID5cbiAgICAgICAgICA8UXVlcnlUYXNrTGlzdCB3aWRnZXRJZD17d2lkZ2V0SWR9IGlzSW5Qb3BwZXIgZGVmYXVsdFBhZ2VTaXplPXtkZWZhdWx0UGFnZVNpemV9IHF1ZXJ5SXRlbXM9e25vbkV4cGFuZGVkQXJyYXkgYXMgYW55fSBjbGFzc05hbWU9J3BiLTQnIGluaXRpYWxRdWVyeVZhbHVlPXtwcm9wcy5pbml0aWFsUXVlcnlWYWx1ZX0gb25IYXNoUGFyYW1ldGVyVXNlZD17cHJvcHMub25IYXNoUGFyYW1ldGVyVXNlZH0gLz5cbiAgICAgICAgPC9UYXNrTGlzdFBvcHBlcldyYXBwZXI+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCBSZWFjdCwgdHlwZSBJY29uUmVzdWx0LCB0eXBlIEltbXV0YWJsZU9iamVjdCwgbG9kYXNoLCBjbGFzc05hbWVzLCBob29rcywgaXNLZXlib2FyZE1vZGUsIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uLCBNb2JpbGVQYW5lbCwgdHlwZSBTaXplLCB0eXBlIEJ1dHRvblR5cGUsIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MsIEZsb2F0aW5nUGFuZWwsIHR5cGUgU2hpZnRPcHRpb25zIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFdJREdFVF9WRVJTSU9OIH0gZnJvbSAnLi4vdmVyc2lvbidcblxuZXhwb3J0IGludGVyZmFjZSBUYXNrTGlzdFBvcHBlcldyYXBwZXJQcm9wcyB7XG4gIGlkOiBudW1iZXJcbiAgaWNvbj86IHN0cmluZyB8IEltbXV0YWJsZU9iamVjdDxJY29uUmVzdWx0PlxuICBsYWJlbD86IHN0cmluZ1xuICBmb3JjZUNsb3NlPzogYm9vbGVhblxuICBwb3BwZXJUaXRsZT86IHN0cmluZ1xuICBidXR0b25UeXBlPzogQnV0dG9uVHlwZVxuICBvbldpZHRoQ2hhbmdlPzogKGlkOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpID0+IHZvaWRcbiAgb25PcGVuZWRDaGFuZ2U/OiAoaWQ6IG51bWJlciwgaXNPcGVuOiBib29sZWFuKSA9PiB2b2lkXG4gIG1pblNpemU6IFNpemVcbiAgZGVmYXVsdFNpemU6IFNpemVcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0RWxlbWVudDxhbnk+XG59XG5cbmNvbnN0IHNoaWZ0T3B0aW9uczogU2hpZnRPcHRpb25zID0geyBwYWRkaW5nOiAxIH1cblxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tMaXN0UG9wcGVyV3JhcHBlciAocHJvcHM6IFRhc2tMaXN0UG9wcGVyV3JhcHBlclByb3BzKSB7XG4gIGNvbnN0IHsgaWQsIGljb24sIGxhYmVsLCBmb3JjZUNsb3NlLCBvbk9wZW5lZENoYW5nZSwgcG9wcGVyVGl0bGUsIG1pblNpemUsIGRlZmF1bHRTaXplLCBvbldpZHRoQ2hhbmdlLCBidXR0b25UeXBlID0gJ3RlcnRpYXJ5JywgY2hpbGRyZW4gfSA9IHByb3BzXG4gIGNvbnN0IGljb25SZWYgPSBSZWFjdC51c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3Qgd2lkdGhSZWYgPSBSZWFjdC51c2VSZWYoMClcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbcG9wcGVyVmVyc2lvbiwgc2V0UG9wcGVyVmVyc2lvbl0gPSBSZWFjdC51c2VTdGF0ZSgwKVxuICBjb25zdCBpc01vYmlsZSA9IGhvb2tzLnVzZUNoZWNrU21hbGxCcm93c2VyU2l6ZU1vZGUoKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGZvcmNlQ2xvc2UpIHtcbiAgICAgIHNldElzT3BlbihmYWxzZSlcbiAgICB9XG4gIH0sIFtmb3JjZUNsb3NlXSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIG9uV2lkdGhDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHdpZHRoUmVmLmN1cnJlbnQgPSBNYXRoLnJvdW5kKGljb25SZWYuY3VycmVudC5jbGllbnRXaWR0aClcbiAgICAgIG9uV2lkdGhDaGFuZ2UoaWQsIHdpZHRoUmVmLmN1cnJlbnQpXG4gICAgICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihsb2Rhc2gudGhyb3R0bGUoKGVudHJpZXMpID0+IHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLnJvdW5kKGVudHJpZXNbMF0uY29udGVudFJlY3Qud2lkdGgpXG4gICAgICAgIGlmICh3aWR0aFJlZi5jdXJyZW50ICE9PSB3aWR0aCkge1xuICAgICAgICAgIHdpZHRoUmVmLmN1cnJlbnQgPSB3aWR0aFxuICAgICAgICAgIG9uV2lkdGhDaGFuZ2UoaWQsIHdpZHRoKVxuICAgICAgICB9XG4gICAgICB9LCAyMDApKVxuICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShpY29uUmVmLmN1cnJlbnQpXG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCB0b2dnbGVQb3BwZXIgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBvbk9wZW5lZENoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb25PcGVuZWRDaGFuZ2UoaWQsICFpc09wZW4pXG4gICAgfVxuICAgIHNldElzT3BlbighaXNPcGVuKVxuICAgIHNldFBvcHBlclZlcnNpb24ocG9wcGVyVmVyc2lvbiArIDEpXG4gICAgaWYgKGlzT3Blbikge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChpc0tleWJvYXJkTW9kZSgpKSB7XG4gICAgICAgICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoaWNvblJlZi5jdXJyZW50KVxuICAgICAgICB9XG4gICAgICB9LCAyMDApXG4gICAgfVxuICB9LCBbaWQsIGlzT3BlbiwgcG9wcGVyVmVyc2lvbiwgb25PcGVuZWRDaGFuZ2VdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3J1bnRpbWUtcXVlcnlfX3dpZGdldC1wb3BwZXInPlxuICAgICAgPEJ1dHRvblxuICAgICAgICB0aXRsZT17bGFiZWx9XG4gICAgICAgIGFyaWEtbGFiZWw9e2xhYmVsfVxuICAgICAgICBpY29uIHNpemU9J3NtJ1xuICAgICAgICB2YXJpYW50PXtidXR0b25UeXBlID09PSAndGVydGlhcnknID8gJ3RleHQnIDogdW5kZWZpbmVkfVxuICAgICAgICBjb2xvcj17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/ICdpbmhlcml0JyA6IHVuZGVmaW5lZH1cbiAgICAgICAgdHlwZT17YnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/IHVuZGVmaW5lZCA6IGJ1dHRvblR5cGV9XG4gICAgICAgIHJlZj17aWNvblJlZn1cbiAgICAgICAgb25DbGljaz17dG9nZ2xlUG9wcGVyfVxuICAgICAgPlxuICAgICAgICB7aWNvbiAmJiA8SWNvblxuICAgICAgICAgIHNpemU9ezE2fVxuICAgICAgICAgIHsuLi4odHlwZW9mIGljb24gPT09ICdzdHJpbmcnID8geyBpY29uIH0gOiB7IGljb246IGljb24uc3ZnLCBjb2xvcjogYnV0dG9uVHlwZSA9PT0gJ3RlcnRpYXJ5JyA/IHVuZGVmaW5lZCA6IGljb24ucHJvcGVydGllcy5jb2xvciB9KX1cbiAgICAgICAgLz59XG4gICAgICAgIHtsYWJlbCAmJiA8ZGl2XG4gICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWJveDtcbiAgICAgICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMjtcbiAgICAgICAgICAgIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7XG4gICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICAgICAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgICAgICAgICBgfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyh7ICdtbC0yJzogaWNvbiAhPSBudWxsIH0pfT57bGFiZWx9PC9kaXY+fVxuICAgICAgPC9CdXR0b24+XG4gICAgICB7aXNNb2JpbGVcbiAgICAgICAgPyA8TW9iaWxlUGFuZWwgb3Blbj17aXNPcGVufSB0aXRsZT17cG9wcGVyVGl0bGV9IG9uQ2xvc2U9e3RvZ2dsZVBvcHBlcn0+XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxcmVtOyAvKiBTY29wZWQgcGFkZGluZyB0byBzcGFjZSBjb250ZW50IGZyb20gZm9vdGVyICovXG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsvKiBTdGF0aW9uYXJ5IGZvb3RlciAqL31cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuMDI1ZW07XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgICAgIDxzdmcgXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTYgMTggMjIgMTIgMTYgNlwiLz5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIFF1ZXJ5U2ltcGxlIGJ5IE1hcFNpbXBsZVxuICAgICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07XG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgdntXSURHRVRfVkVSU0lPTn1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Nb2JpbGVQYW5lbD5cbiAgICAgICAgOiA8RmxvYXRpbmdQYW5lbFxuICAgICAgICAgICAgY2xhc3NOYW1lPSd1aS11bml0LXBvcHBlciB1aS11bml0LXBvcHBlcl9rLWFycmFuZ2VtZW50LWljb24gZmxleC1ncm93LTEnXG4gICAgICAgICAgICBoZWFkZXJDbGFzc05hbWU9e0ZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1N9XG4gICAgICAgICAgICBvcGVuPXtpc09wZW59XG4gICAgICAgICAgICBvbkhlYWRlckNsb3NlPXt0b2dnbGVQb3BwZXJ9XG4gICAgICAgICAgICB0b2dnbGU9e3RvZ2dsZVBvcHBlcn1cbiAgICAgICAgICAgIGhlYWRlclRpdGxlPXtwb3BwZXJUaXRsZX1cbiAgICAgICAgICAgIG1pblNpemU9e21pblNpemV9XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZT17ZGVmYXVsdFNpemV9XG4gICAgICAgICAgICBkcmFnQm91bmRzPSdib2R5J1xuICAgICAgICAgICAgdmVyc2lvbj17cG9wcGVyVmVyc2lvbn1cbiAgICAgICAgICAgIHJlZmVyZW5jZT17aWNvblJlZn1cbiAgICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tLXN0YXJ0J1xuICAgICAgICAgICAgc2hpZnRPcHRpb25zPXtzaGlmdE9wdGlvbnN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMXJlbTsgLyogU2NvcGVkIHBhZGRpbmcgdG8gc3BhY2UgY29udGVudCBmcm9tIGZvb3RlciAqL1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDEycHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXIpO1xuICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtdGVydGlhcnkpO1xuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICB7LyogQ29kZS9PcGVuIFNvdXJjZSBTeW1ib2wgKi99XG4gICAgICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCIgXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI4IDYgMiAxMiA4IDE4XCIvPlxuICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGVcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvRmxvYXRpbmdQYW5lbD5cbiAgICAgIH1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3gsIGNzcywgUmVhY3QsIHR5cGUgSW1tdXRhYmxlQXJyYXksIEltbXV0YWJsZSwgdHlwZSBJbW11dGFibGVPYmplY3QsIGhvb2tzLCB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsIHR5cGUgRGF0YVNvdXJjZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFNlbGVjdCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVRhc2sgfSBmcm9tICcuL3F1ZXJ5LXRhc2snXG5pbXBvcnQgeyBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIGlzSW5Qb3BwZXI/OiBib29sZWFuXG4gIGRlZmF1bHRQYWdlU2l6ZT86IG51bWJlclxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9XG4gIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uPzogYm9vbGVhblxuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGVcbiAgb25SZXN1bHRzTW9kZUNoYW5nZT86IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB2b2lkXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxuICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PzogYm9vbGVhblxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPzogKG91dHB1dERTOiBEYXRhU291cmNlKSA9PiBQcm9taXNlPHZvaWQ+XG4gIG9uQ2xlYXJHcmFwaGljc0xheWVyPzogKCkgPT4gdm9pZFxuICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnXG4gIG9uVGFiQ2hhbmdlPzogKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4gdm9pZFxufVxuXG5pbnRlcmZhY2UgR3JvdXBlZFF1ZXJpZXMge1xuICBncm91cHM6IHsgW2dyb3VwSWQ6IHN0cmluZ106IHsgaXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+LCBkaXNwbGF5TmFtZTogc3RyaW5nLCBpY29uPzogYW55IH0gfVxuICB1bmdyb3VwZWQ6IEFycmF5PHsgaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LCBpbmRleDogbnVtYmVyIH0+XG4gIGdyb3VwT3JkZXI6IHN0cmluZ1tdXG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBzb3J0IHF1ZXJpZXMgYnkgZGlzcGxheSBvcmRlciAobG93ZXIgbnVtYmVycyBhcHBlYXIgZmlyc3QpXG4vLyBRdWVyaWVzIHdpdGhvdXQgb3JkZXIgbWFpbnRhaW4gdGhlaXIgb3JpZ2luYWwgcmVsYXRpdmUgcG9zaXRpb25zXG5mdW5jdGlvbiBzb3J0UXVlcnlJdGVtc0J5T3JkZXIocXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4pOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPiB7XG4gIC8vIEhhbmRsZSBudWxsL3VuZGVmaW5lZC9lbXB0eSBjYXNlc1xuICBpZiAoIXF1ZXJ5SXRlbXMgfHwgcXVlcnlJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gcXVlcnlJdGVtcyB8fCBJbW11dGFibGUoW10pXG4gIH1cbiAgXG4gIC8vIFNhZmVseSBjb252ZXJ0IHRvIHJlZ3VsYXIgYXJyYXkgZm9yIHNvcnRpbmdcbiAgLy8gSGFuZGxlIGJvdGggSW1tdXRhYmxlQXJyYXkgKGhhcyB0b0FycmF5IG1ldGhvZCkgYW5kIHJlZ3VsYXIgYXJyYXlzXG4gIGNvbnN0IGl0ZW1zQXJyYXkgPSAocXVlcnlJdGVtcyAmJiB0eXBlb2YgcXVlcnlJdGVtcy50b0FycmF5ID09PSAnZnVuY3Rpb24nKSBcbiAgICA/IHF1ZXJ5SXRlbXMudG9BcnJheSgpIFxuICAgIDogKEFycmF5LmlzQXJyYXkocXVlcnlJdGVtcykgPyBxdWVyeUl0ZW1zIDogW10pXG4gIFxuICBjb25zdCBpdGVtc1dpdGhJbmRleCA9IGl0ZW1zQXJyYXkubWFwKChpdGVtLCBpbmRleCkgPT4gKHsgaXRlbSwgb3JpZ2luYWxJbmRleDogaW5kZXggfSkpXG4gIGl0ZW1zV2l0aEluZGV4LnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBvcmRlckEgPSBhLml0ZW0ub3JkZXIgPz8gSW5maW5pdHlcbiAgICBjb25zdCBvcmRlckIgPSBiLml0ZW0ub3JkZXIgPz8gSW5maW5pdHlcbiAgICBpZiAob3JkZXJBICE9PSBvcmRlckIpIHtcbiAgICAgIHJldHVybiBvcmRlckEgLSBvcmRlckJcbiAgICB9XG4gICAgLy8gSWYgb3JkZXIgaXMgZXF1YWwgKGJvdGggSW5maW5pdHkgb3Igc2FtZSBudW1iZXIpLCBtYWludGFpbiBvcmlnaW5hbCBpbmRleCBvcmRlclxuICAgIHJldHVybiBhLm9yaWdpbmFsSW5kZXggLSBiLm9yaWdpbmFsSW5kZXhcbiAgfSlcbiAgcmV0dXJuIEltbXV0YWJsZShpdGVtc1dpdGhJbmRleC5tYXAoKHsgaXRlbSB9KSA9PiBpdGVtKSlcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdyb3VwIHF1ZXJpZXMgYnkgZ3JvdXBJZFxuY29uc3QgZ3JvdXBRdWVyaWVzID0gKHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+KTogR3JvdXBlZFF1ZXJpZXMgPT4ge1xuICBjb25zdCBncm91cHM6IHsgW2dyb3VwSWQ6IHN0cmluZ106IHsgaXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+LCBkaXNwbGF5TmFtZTogc3RyaW5nLCBpY29uPzogYW55IH0gfSA9IHt9XG4gIGNvbnN0IHVuZ3JvdXBlZDogQXJyYXk8eyBpdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sIGluZGV4OiBudW1iZXIgfT4gPSBbXVxuICBjb25zdCBncm91cE9yZGVyOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IGdyb3VwSW5kZXhNYXA6IHsgW2dyb3VwSWQ6IHN0cmluZ106IG51bWJlciB9ID0ge31cbiAgXG4gIC8vIEZpcnN0IHBhc3M6IGNvbGxlY3QgaXRlbXMgaW4gcmVndWxhciBhcnJheXNcbiAgY29uc3QgZ3JvdXBJdGVtc01hcDogeyBbZ3JvdXBJZDogc3RyaW5nXTogUXVlcnlJdGVtVHlwZVtdIH0gPSB7fVxuXG4gIHF1ZXJ5SXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICBpZiAoIWdyb3VwSXRlbXNNYXBbaXRlbS5ncm91cElkXSkge1xuICAgICAgICBncm91cEl0ZW1zTWFwW2l0ZW0uZ3JvdXBJZF0gPSBbXVxuICAgICAgICBncm91cHNbaXRlbS5ncm91cElkXSA9IHtcbiAgICAgICAgICBpdGVtczogSW1tdXRhYmxlKFtdKSxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogaXRlbS5ncm91cERpc3BsYXlOYW1lIHx8IGl0ZW0ubmFtZSB8fCBgR3JvdXAgJHtpdGVtLmdyb3VwSWR9YCxcbiAgICAgICAgICBpY29uOiBpdGVtLmljb25cbiAgICAgICAgfVxuICAgICAgICBncm91cEluZGV4TWFwW2l0ZW0uZ3JvdXBJZF0gPSBpbmRleFxuICAgICAgICBncm91cE9yZGVyLnB1c2goaXRlbS5ncm91cElkKVxuICAgICAgfVxuICAgICAgZ3JvdXBJdGVtc01hcFtpdGVtLmdyb3VwSWRdLnB1c2goaXRlbSlcbiAgICB9IGVsc2Uge1xuICAgICAgdW5ncm91cGVkLnB1c2goeyBpdGVtLCBpbmRleCB9KVxuICAgIH1cbiAgfSlcblxuICAvLyBTZWNvbmQgcGFzczogY29udmVydCByZWd1bGFyIGFycmF5cyB0byBJbW11dGFibGVBcnJheXNcbiAgT2JqZWN0LmtleXMoZ3JvdXBJdGVtc01hcCkuZm9yRWFjaChncm91cElkID0+IHtcbiAgICBncm91cHNbZ3JvdXBJZF0uaXRlbXMgPSBJbW11dGFibGUoZ3JvdXBJdGVtc01hcFtncm91cElkXSlcbiAgfSlcblxuICByZXR1cm4geyBncm91cHMsIHVuZ3JvdXBlZCwgZ3JvdXBPcmRlciB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZGlzcGxheSBuYW1lIGZvciBxdWVyeSBpbiBkcm9wZG93blxuLy8gVXNlczogc2VhcmNoQWxpYXMgfHwgamltdUZpZWxkTmFtZSB8fCBpdGVtLm5hbWUgfHwgZmFsbGJhY2tcbmNvbnN0IGdldFF1ZXJ5RGlzcGxheU5hbWUgPSAoaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+KTogc3RyaW5nID0+IHtcbiAgLy8gRmlyc3QgcHJpb3JpdHk6IHNlYXJjaEFsaWFzIGlmIHNldFxuICBpZiAoaXRlbS5zZWFyY2hBbGlhcykge1xuICAgIHJldHVybiBpdGVtLnNlYXJjaEFsaWFzXG4gIH1cbiAgXG4gIC8vIFNlY29uZCBwcmlvcml0eTogZmllbGQgbmFtZSBmcm9tIFNRTCBleHByZXNzaW9uXG4gIGNvbnN0IGppbXVGaWVsZE5hbWUgPSBpdGVtLnNxbEV4cHJPYmo/LnBhcnRzPy5bMF0/LmppbXVGaWVsZE5hbWVcbiAgaWYgKGppbXVGaWVsZE5hbWUpIHtcbiAgICByZXR1cm4gamltdUZpZWxkTmFtZVxuICB9XG4gIFxuICAvLyBUaGlyZCBwcmlvcml0eTogaXRlbSBuYW1lXG4gIGlmIChpdGVtLm5hbWUpIHtcbiAgICByZXR1cm4gaXRlbS5uYW1lXG4gIH1cbiAgXG4gIC8vIEZhbGxiYWNrXG4gIHJldHVybiAnUXVlcnknXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVRhc2tMaXN0IChwcm9wczogUXVlcnlUYXNrTGlzdFByb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtcywgd2lkZ2V0SWQsIGRlZmF1bHRQYWdlU2l6ZSwgaXNJblBvcHBlciA9IGZhbHNlLCBjbGFzc05hbWUgPSAnJywgaW5pdGlhbFF1ZXJ5VmFsdWUsIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uID0gZmFsc2UsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHJlc3VsdHNNb2RlLCBvblJlc3VsdHNNb2RlQ2hhbmdlLCBhY2N1bXVsYXRlZFJlY29yZHMsIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyLCBtYXBWaWV3LCBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyLCBvbkNsZWFyR3JhcGhpY3NMYXllciwgYWN0aXZlVGFiLCBvblRhYkNoYW5nZSB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZXMpXG4gIFxuICAvLyBMb2cgd2hlbiBwcm9wcyBhcmUgcmVjZWl2ZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnl0YXNrbGlzdC1wcm9wcy1yZWNlaXZlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHByb3BzOiB7XG4gICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIWluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IGluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiBpbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeS10YXNrLWxpc3QtcHJvcHMtcmVjZWl2ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISFpbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiBpbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtpbml0aWFsUXVlcnlWYWx1ZSwgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sIHdpZGdldElkXSlcbiAgXG4gIC8vIFNvcnQgcXVlcmllcyBieSBkaXNwbGF5IG9yZGVyIGJlZm9yZSBncm91cGluZ1xuICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBxdWVyeUl0ZW1zIG1pZ2h0IGJlIHVuZGVmaW5lZC9udWxsIG9yIG5vdCBhbiBJbW11dGFibGVBcnJheVxuICBjb25zdCBzb3J0ZWRRdWVyeUl0ZW1zID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFxdWVyeUl0ZW1zKSB7XG4gICAgICByZXR1cm4gSW1tdXRhYmxlKFtdKVxuICAgIH1cbiAgICByZXR1cm4gc29ydFF1ZXJ5SXRlbXNCeU9yZGVyKHF1ZXJ5SXRlbXMpXG4gIH0sIFtxdWVyeUl0ZW1zXSlcbiAgXG4gIGNvbnN0IHsgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIgfSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gZ3JvdXBRdWVyaWVzKHNvcnRlZFF1ZXJ5SXRlbXMpLCBbc29ydGVkUXVlcnlJdGVtc10pXG4gIFxuICAvLyBPbmx5IHVzZSB0aGUgcHJvcCBpbml0aWFsUXVlcnlWYWx1ZSB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5zIHRoZSB3aWRnZXRcbiAgLy8gUXVlcnlTaW1wbGUgc2hvdWxkIG5vdCBhdXRvbm9tb3VzbHkgcmVhY3QgdG8gaW5pdGlhbFF1ZXJ5VmFsdWUgcHJvcCBjaGFuZ2VzXG4gIC8vIEhlbHBlclNpbXBsZSBpcyB0aGUgb3JjaGVzdHJhdG9yIGFuZCBzZXRzIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uIGZsYWdcbiAgY29uc3QgZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUgPSBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbiA/IGluaXRpYWxRdWVyeVZhbHVlIDogdW5kZWZpbmVkXG4gIFxuICAvLyBMb2cgd2hlbiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSBpcyBjYWxjdWxhdGVkXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5dGFza2xpc3QtZWZmZWN0aXZlaW5pdGlhbHF1ZXJ5dmFsdWUtY2FsY3VsYXRlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGNhbGN1bGF0aW9uOiB7XG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISFpbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgZWZmZWN0aXZlUmVzdWx0OiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSA/ICdVU0VfSU5JVElBTF9RVUVSWV9WQUxVRScgOiAnVU5ERUZJTkVEJyxcbiAgICAgICAgZWZmZWN0aXZlU2hvcnRJZDogZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgIGVmZmVjdGl2ZVZhbHVlOiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICBldmVudDogJ2VmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlLWNhbGN1bGF0ZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIWluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgaGFzRWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICBlZmZlY3RpdmVTaG9ydElkOiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgIGVmZmVjdGl2ZVZhbHVlOiBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWUsIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLCBpbml0aWFsUXVlcnlWYWx1ZSwgd2lkZ2V0SWRdKVxuXG4gIC8vIEZpbmQgdGhlIHF1ZXJ5IGl0ZW0gbWF0Y2hpbmcgdGhlIHNob3J0SWQgZnJvbSBVUkwgaGFzaFxuICBjb25zdCBtYXRjaGluZ1F1ZXJ5SW5kZXggPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBzaG9ydElkID0gZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWRcbiAgICBpZiAoIXNob3J0SWQpIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cbiAgICByZXR1cm4gc29ydGVkUXVlcnlJdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLnNob3J0SWQgPT09IHNob3J0SWQpXG4gIH0sIFtzb3J0ZWRRdWVyeUl0ZW1zLCBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZV0pXG4gIFxuICAvLyBEZXRlcm1pbmUgd2hpY2ggZ3JvdXAvdW5ncm91cGVkIGluZGV4IHRoZSBtYXRjaGluZyBxdWVyeSBpcyBhdFxuICBjb25zdCBnZXRRdWVyeVNlbGVjdGlvbiA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChtYXRjaGluZ1F1ZXJ5SW5kZXggPCAwKSByZXR1cm4gbnVsbFxuICAgIFxuICAgIGNvbnN0IGl0ZW0gPSBzb3J0ZWRRdWVyeUl0ZW1zW21hdGNoaW5nUXVlcnlJbmRleF1cbiAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzW2l0ZW0uZ3JvdXBJZF0/Lml0ZW1zIHx8IEltbXV0YWJsZShbXSlcbiAgICAgIGNvbnN0IGluZGV4SW5Hcm91cCA9IGdyb3VwSXRlbXMuZmluZEluZGV4KHEgPT4gcS5jb25maWdJZCA9PT0gaXRlbS5jb25maWdJZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1xdWVyeS1mb3VuZC1pbi1ncm91cCcsXG4gICAgICAgIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgaW5kZXhJbkdyb3VwOiBpbmRleEluR3JvdXAgPj0gMCA/IGluZGV4SW5Hcm91cCA6IDAsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBpdGVtLnNob3J0SWRcbiAgICAgIH0pXG4gICAgICByZXR1cm4geyB0eXBlOiAnZ3JvdXAnIGFzIGNvbnN0LCBncm91cElkOiBpdGVtLmdyb3VwSWQsIGluZGV4OiBpbmRleEluR3JvdXAgPj0gMCA/IGluZGV4SW5Hcm91cCA6IDAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVbmdyb3VwZWQgcXVlcnlcbiAgICAgIGNvbnN0IGluZGV4SW5Vbmdyb3VwZWQgPSB1bmdyb3VwZWQuZmluZEluZGV4KCh7IGl0ZW06IHEgfSkgPT4gcS5jb25maWdJZCA9PT0gaXRlbS5jb25maWdJZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1xdWVyeS1mb3VuZC11bmdyb3VwZWQnLFxuICAgICAgICBpbmRleEluVW5ncm91cGVkOiBpbmRleEluVW5ncm91cGVkID49IDAgPyBpbmRleEluVW5ncm91cGVkIDogMCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGl0ZW0uc2hvcnRJZFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7IHR5cGU6ICd1bmdyb3VwZWQnIGFzIGNvbnN0LCBpbmRleDogaW5kZXhJblVuZ3JvdXBlZCA+PSAwID8gaW5kZXhJblVuZ3JvdXBlZCA6IDAgfVxuICAgIH1cbiAgfSwgW21hdGNoaW5nUXVlcnlJbmRleCwgc29ydGVkUXVlcnlJdGVtcywgZ3JvdXBzLCB1bmdyb3VwZWRdKVxuICBcbiAgLy8gSGVscGVyIHRvIGRldGVybWluZSBkZWZhdWx0IHNlbGVjdGlvbiBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyXG4gIGNvbnN0IGdldERlZmF1bHRTZWxlY3Rpb24gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBnZXRRdWVyeVNlbGVjdGlvblxuICAgIH1cbiAgICBcbiAgICAvLyBObyBoYXNoIHBhcmFtZXRlciAtIGRldGVybWluZSBkZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXJcbiAgICAvLyBDb21wYXJlIGZpcnN0IHVuZ3JvdXBlZCBxdWVyeSB2cyBmaXJzdCBxdWVyeSBpbiBmaXJzdCBncm91cFxuICAgIGNvbnN0IGZpcnN0VW5ncm91cGVkT3JkZXIgPSB1bmdyb3VwZWQubGVuZ3RoID4gMCA/ICh1bmdyb3VwZWRbMF0uaXRlbS5vcmRlciA/PyBJbmZpbml0eSkgOiBJbmZpbml0eVxuICAgIGNvbnN0IGZpcnN0R3JvdXBPcmRlciA9IGdyb3VwT3JkZXIubGVuZ3RoID4gMCAmJiBncm91cHNbZ3JvdXBPcmRlclswXV0/Lml0ZW1zPy5sZW5ndGggPiAwXG4gICAgICA/IChncm91cHNbZ3JvdXBPcmRlclswXV0uaXRlbXNbMF0ub3JkZXIgPz8gSW5maW5pdHkpXG4gICAgICA6IEluZmluaXR5XG4gICAgXG4gICAgLy8gU2VsZWN0IHdoaWNoZXZlciBoYXMgbG93ZXIgb3JkZXIgKG9yIGZpcnN0IGlmIGVxdWFsKVxuICAgIGlmIChmaXJzdFVuZ3JvdXBlZE9yZGVyIDwgZmlyc3RHcm91cE9yZGVyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAndW5ncm91cGVkJyBhcyBjb25zdCwgaW5kZXg6IDAgfVxuICAgIH0gZWxzZSBpZiAoZmlyc3RHcm91cE9yZGVyIDwgSW5maW5pdHkgfHwgZ3JvdXBPcmRlci5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAnZ3JvdXAnIGFzIGNvbnN0LCBncm91cElkOiBncm91cE9yZGVyWzBdLCBpbmRleDogMCB9XG4gICAgfSBlbHNlIGlmICh1bmdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ3VuZ3JvdXBlZCcgYXMgY29uc3QsIGluZGV4OiAwIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSwgW2dldFF1ZXJ5U2VsZWN0aW9uLCB1bmdyb3VwZWQsIGdyb3VwcywgZ3JvdXBPcmRlcl0pXG4gIFxuICAvLyBUcmFjayBzZWxlY3RlZCBxdWVyeSAtIGluaXRpYWxpemUgd2l0aCBtYXRjaGluZyBxdWVyeSBpZiBmb3VuZCBmcm9tIFVSTCBoYXNoLCBvciBkZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXJcbiAgY29uc3QgW3NlbGVjdGVkR3JvdXBJZCwgc2V0U2VsZWN0ZWRHcm91cElkXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZyB8IG51bGw+KCgpID0+IHtcbiAgICBpZiAoZ2V0RGVmYXVsdFNlbGVjdGlvbj8udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLWdyb3VwLXNlbGVjdGlvbicsXG4gICAgICAgIGdyb3VwSWQ6IGdldERlZmF1bHRTZWxlY3Rpb24uZ3JvdXBJZCxcbiAgICAgICAgbm90ZTogZ2V0UXVlcnlTZWxlY3Rpb24gPyAnSGFzaC1tYXRjaGVkJyA6ICdEZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXInXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldERlZmF1bHRTZWxlY3Rpb24uZ3JvdXBJZFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9KVxuICBjb25zdCBbc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIHNldFNlbGVjdGVkR3JvdXBRdWVyeUluZGV4XSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IHtcbiAgICBpZiAoZ2V0RGVmYXVsdFNlbGVjdGlvbj8udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLWdyb3VwLXF1ZXJ5LWluZGV4JyxcbiAgICAgICAgaW5kZXg6IGdldERlZmF1bHRTZWxlY3Rpb24uaW5kZXgsXG4gICAgICAgIG5vdGU6IGdldFF1ZXJ5U2VsZWN0aW9uID8gJ0hhc2gtbWF0Y2hlZCcgOiAnRGVmYXVsdCBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyJ1xuICAgICAgfSlcbiAgICAgIHJldHVybiBnZXREZWZhdWx0U2VsZWN0aW9uLmluZGV4XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH0pXG4gIGNvbnN0IFtzZWxlY3RlZFVuZ3JvdXBlZEluZGV4LCBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4XSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IHtcbiAgICBpZiAoZ2V0RGVmYXVsdFNlbGVjdGlvbj8udHlwZSA9PT0gJ3VuZ3JvdXBlZCcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbC11bmdyb3VwZWQtaW5kZXgnLFxuICAgICAgICBpbmRleDogZ2V0RGVmYXVsdFNlbGVjdGlvbi5pbmRleCxcbiAgICAgICAgbm90ZTogZ2V0UXVlcnlTZWxlY3Rpb24gPyAnSGFzaC1tYXRjaGVkJyA6ICdEZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXInXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldERlZmF1bHRTZWxlY3Rpb24uaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfSlcbiAgXG4gIC8vIFVwZGF0ZSBzZWxlY3Rpb24gd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVucyB3aWRnZXQgd2l0aCBoYXNoIHBhcmFtZXRlclxuICAvLyBPbmx5IHJlYWN0IHdoZW4gc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gaXMgdHJ1ZSAoc2V0IGJ5IEhlbHBlclNpbXBsZSlcbiAgLy8gVGhpcyBwcmV2ZW50cyBhdXRvbm9tb3VzIHF1ZXJ5IHNlbGVjdGlvbiB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5dGFza2xpc3Qtc2VsZWN0aW9uLXVzZWVmZmVjdC1jaGVjaycsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGNoZWNrOiB7XG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNHZXRRdWVyeVNlbGVjdGlvbjogISFnZXRRdWVyeVNlbGVjdGlvbixcbiAgICAgICAgZ2V0UXVlcnlTZWxlY3Rpb25UeXBlOiBnZXRRdWVyeVNlbGVjdGlvbj8udHlwZSxcbiAgICAgICAgd2lsbFVwZGF0ZVNlbGVjdGlvbjogc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gJiYgISFnZXRRdWVyeVNlbGVjdGlvblxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAncXVlcnktc2VsZWN0aW9uLXVzZWVmZmVjdC1jaGVjaycsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgaGFzR2V0UXVlcnlTZWxlY3Rpb246ICEhZ2V0UXVlcnlTZWxlY3Rpb24sXG4gICAgICBnZXRRdWVyeVNlbGVjdGlvblR5cGU6IGdldFF1ZXJ5U2VsZWN0aW9uPy50eXBlLFxuICAgICAgd2lsbFVwZGF0ZVNlbGVjdGlvbjogc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gJiYgISFnZXRRdWVyeVNlbGVjdGlvbixcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgaWYgKHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uICYmIGdldFF1ZXJ5U2VsZWN0aW9uKSB7XG4gICAgICAvLyBIYXNoIHBhcmFtZXRlciBtYXRjaGVkIC0gSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbmVkIHVzIHdpdGggdGhpcyBoYXNoXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeXRhc2tsaXN0LXNlbGVjdGlvbi11c2VlZmZlY3QtdXBkYXRpbmcnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgc2VsZWN0aW9uVHlwZTogZ2V0UXVlcnlTZWxlY3Rpb24udHlwZSxcbiAgICAgICAgc2VsZWN0aW9uRGV0YWlsczogZ2V0UXVlcnlTZWxlY3Rpb24udHlwZSA9PT0gJ2dyb3VwJyBcbiAgICAgICAgICA/IHsgZ3JvdXBJZDogZ2V0UXVlcnlTZWxlY3Rpb24uZ3JvdXBJZCwgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4IH1cbiAgICAgICAgICA6IHsgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4IH0sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKGdldFF1ZXJ5U2VsZWN0aW9uLnR5cGUgPT09ICdncm91cCcpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1jaGFuZ2VkLXRvLWdyb3VwLWZyb20taGFzaCcsXG4gICAgICAgICAgZ3JvdXBJZDogZ2V0UXVlcnlTZWxlY3Rpb24uZ3JvdXBJZCxcbiAgICAgICAgICBpbmRleDogZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgsXG4gICAgICAgICAgbm90ZTogJ0hlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5lZCB3aWRnZXQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgfSlcbiAgICAgICAgc2V0U2VsZWN0ZWRHcm91cElkKGdldFF1ZXJ5U2VsZWN0aW9uLmdyb3VwSWQpXG4gICAgICAgIHNldFNlbGVjdGVkR3JvdXBRdWVyeUluZGV4KGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1jaGFuZ2VkLXRvLXVuZ3JvdXBlZC1mcm9tLWhhc2gnLFxuICAgICAgICAgIGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleCxcbiAgICAgICAgICBub3RlOiAnSGVscGVyU2ltcGxlIGV4cGxpY2l0bHkgb3BlbmVkIHdpZGdldCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICB9KVxuICAgICAgICBzZXRTZWxlY3RlZEdyb3VwSWQobnVsbClcbiAgICAgICAgc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleChnZXRRdWVyeVNlbGVjdGlvbi5pbmRleClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnl0YXNrbGlzdC1zZWxlY3Rpb24tdXNlZWZmZWN0LXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAhc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24gPyAnZmxhZy1pcy1mYWxzZScgOiAnbm8tcXVlcnktc2VsZWN0aW9uJyxcbiAgICAgICAgY2hlY2s6IHtcbiAgICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgICBoYXNHZXRRdWVyeVNlbGVjdGlvbjogISFnZXRRdWVyeVNlbGVjdGlvblxuICAgICAgICB9LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnktc2VsZWN0aW9uLXVzZWVmZmVjdC1za2lwcGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogIXNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uID8gJ2ZsYWctaXMtZmFsc2UnIDogJ25vLXF1ZXJ5LXNlbGVjdGlvbicsXG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNHZXRRdWVyeVNlbGVjdGlvbjogISFnZXRRdWVyeVNlbGVjdGlvbixcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW3Nob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLCBnZXRRdWVyeVNlbGVjdGlvbiwgd2lkZ2V0SWRdKVxuICBcbiAgLy8gR2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcXVlcnkgaXRlbVxuICBjb25zdCBnZXRTZWxlY3RlZFF1ZXJ5SXRlbSA9ICgpOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4gPT4ge1xuICAgIC8vIFBSSU9SSVRZIDE6IFVzZSBjdXJyZW50IHN0YXRlIHNlbGVjdGlvblxuICAgIC8vIFRoZSBzdGF0ZSBpcyBpbml0aWFsaXplZCB3aXRoIHRoZSBoYXNoIG1hdGNoIChpZiBwcmVzZW50KSBvciBkZWZhdWx0IG9yZGVyLFxuICAgIC8vIGFuZCB1cGRhdGVkIHZpYSB1c2VFZmZlY3QgaWYgdGhlIGhhc2ggY2hhbmdlcyBsYXRlci5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdnZXRTZWxlY3RlZFF1ZXJ5SXRlbS1zdGF0ZS1zZWxlY3Rpb24nLFxuICAgICAgc2VsZWN0ZWRHcm91cElkLFxuICAgICAgaGFzU2VsZWN0ZWRHcm91cDogc2VsZWN0ZWRHcm91cElkICYmIGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdLFxuICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsXG4gICAgICBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4LFxuICAgICAgdW5ncm91cGVkTGVuZ3RoOiB1bmdyb3VwZWQubGVuZ3RoLFxuICAgICAgZ3JvdXBPcmRlckxlbmd0aDogZ3JvdXBPcmRlci5sZW5ndGgsXG4gICAgICBub3RlOiAnVXNpbmcgc3RhdGUgc2VsZWN0aW9uIChoYXNoLWF3YXJlKSdcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIGEgZ3JvdXAgaXMgc2VsZWN0ZWQsIGdldCBxdWVyeSBmcm9tIHRoYXQgZ3JvdXBcbiAgICBpZiAoc2VsZWN0ZWRHcm91cElkICYmIGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdKSB7XG4gICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzW3NlbGVjdGVkR3JvdXBJZF0uaXRlbXNcbiAgICAgIGlmIChncm91cEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgaWR4ID0gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggPCBncm91cEl0ZW1zLmxlbmd0aCA/IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDogMFxuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSBncm91cEl0ZW1zW2lkeF1cbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdGVkLXF1ZXJ5LWZyb20tZ3JvdXAnLFxuICAgICAgICAgIGdyb3VwSWQ6IHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICBncm91cFF1ZXJ5SW5kZXg6IGlkeCxcbiAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIHF1ZXJ5RGlzcGxheU5hbWU6IGdldFF1ZXJ5RGlzcGxheU5hbWUoc2VsZWN0ZWRJdGVtKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIE90aGVyd2lzZSwgZ2V0IGZyb20gdW5ncm91cGVkIHF1ZXJpZXNcbiAgICBpZiAodW5ncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGlkeCA9IHNlbGVjdGVkVW5ncm91cGVkSW5kZXggPCB1bmdyb3VwZWQubGVuZ3RoID8gc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCA6IDBcbiAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVuZ3JvdXBlZFtpZHhdLml0ZW1cbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnc2VsZWN0ZWQtcXVlcnktZnJvbS11bmdyb3VwZWQnLFxuICAgICAgICB1bmdyb3VwZWRJbmRleDogaWR4LFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogc2VsZWN0ZWRJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKHNlbGVjdGVkSXRlbSlcbiAgICAgIH0pXG4gICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtXG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvIGZpcnN0IHF1ZXJ5IGl0ZW1cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RlZC1xdWVyeS1mYWxsYmFjaycsXG4gICAgICBub3RlOiAnTm8gZ3JvdXBzIG9yIHVuZ3JvdXBlZCBxdWVyaWVzLCB1c2luZyBmaXJzdCBpdGVtJ1xuICAgIH0pXG4gICAgcmV0dXJuIHNvcnRlZFF1ZXJ5SXRlbXNbMF1cbiAgfVxuICBcbiAgY29uc3Qgc2VsZWN0ZWRRdWVyeUl0ZW0gPSBnZXRTZWxlY3RlZFF1ZXJ5SXRlbSgpXG4gIGNvbnN0IHNlbGVjdGVkUXVlcnlSZWFsSW5kZXggPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gc29ydGVkUXVlcnlJdGVtcy5maW5kSW5kZXgocSA9PiBxLmNvbmZpZ0lkID09PSBzZWxlY3RlZFF1ZXJ5SXRlbS5jb25maWdJZClcbiAgfSwgW3NvcnRlZFF1ZXJ5SXRlbXMsIHNlbGVjdGVkUXVlcnlJdGVtXSlcbiAgXG4gIC8vIElmIG9ubHkgb25lIHF1ZXJ5IHRvdGFsLCBkb24ndCBzaG93IGRyb3Bkb3duXG4gIGNvbnN0IHNob3dEcm9wZG93biA9IHNvcnRlZFF1ZXJ5SXRlbXMubGVuZ3RoID4gMSB8fCBncm91cE9yZGVyLmxlbmd0aCA+IDBcbiAgXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2BydW50aW1lLXF1ZXJ5X19xdWVyeS1saXN0IGgtMTAwICR7Y2xhc3NOYW1lfWB9IGNzcz17Y3NzYFxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAucXVlcnktc2VsZWN0b3Ige1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG4gICAgICAucXVlcnktc2VsZWN0b3ItbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS1zZWxlY3RvciBzZWxlY3Qge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICAgIC5xdWVyeS10YXNrLWNvbnRhaW5lciB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgfVxuICAgIGB9PlxuICAgICAgey8qIFNlYXJjaCBMYXllciBkcm9wZG93biBtb3ZlZCB0byBRdWVyeVRhc2sgUXVlcnkgdGFiIGNvbnRlbnQgKi99XG4gICAgICBcbiAgICAgIHsvKiBTaG93IHNlbGVjdGVkIHF1ZXJ5IGZvcm0gZGlyZWN0bHkgYmVsb3cgKi99XG4gICAgICB7c2VsZWN0ZWRRdWVyeUl0ZW0gJiYgKCgpID0+IHtcbiAgICAgICAgY29uc3Qgd2lsbFBhc3NJbml0aWFsSW5wdXRWYWx1ZSA9IHNlbGVjdGVkUXVlcnlJdGVtLnNob3J0SWQgPT09IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkXG4gICAgICAgIGNvbnN0IGluaXRpYWxJbnB1dFZhbHVlVG9QYXNzID0gd2lsbFBhc3NJbml0aWFsSW5wdXRWYWx1ZSA/IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSA6IHVuZGVmaW5lZFxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICBldmVudDogJ2luaXRpYWxJbnB1dFZhbHVlLWJlaW5nLXBhc3NlZC10by1xdWVyeXRhc2snLFxuICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgIHNlbGVjdGVkUXVlcnlJdGVtU2hvcnRJZDogc2VsZWN0ZWRRdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICBzZWxlY3RlZFF1ZXJ5SXRlbUNvbmZpZ0lkOiBzZWxlY3RlZFF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IGVmZmVjdGl2ZUluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgIHdpbGxQYXNzSW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU6IGluaXRpYWxJbnB1dFZhbHVlVG9QYXNzLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHF1ZXJ5LXRhc2stY29udGFpbmVyICR7aXNJblBvcHBlciA/IEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MgOiAnJ31gfT5cbiAgICAgICAgICAgIDxRdWVyeVRhc2tcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICBpbmRleD17c2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA+PSAwID8gc2VsZWN0ZWRRdWVyeVJlYWxJbmRleCA6IDB9XG4gICAgICAgICAgICAgIHRvdGFsPXtzb3J0ZWRRdWVyeUl0ZW1zLmxlbmd0aH1cbiAgICAgICAgICAgICAgcXVlcnlJdGVtPXtzZWxlY3RlZFF1ZXJ5SXRlbX1cbiAgICAgICAgICAgICAgaXNJblBvcHBlcj17aXNJblBvcHBlcn1cbiAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU9e2luaXRpYWxJbnB1dFZhbHVlVG9QYXNzfVxuICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtvbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgcXVlcnlJdGVtcz17c29ydGVkUXVlcnlJdGVtc31cbiAgICAgICAgICAgIHNlbGVjdGVkUXVlcnlJbmRleD17c2VsZWN0ZWRVbmdyb3VwZWRJbmRleH1cbiAgICAgICAgICAgIG9uUXVlcnlDaGFuZ2U9eyhpbmRleCkgPT4gc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleChpbmRleCl9XG4gICAgICAgICAgICAvLyBHcm91cGluZyBwcm9wc1xuICAgICAgICAgICAgZ3JvdXBzPXtncm91cHN9XG4gICAgICAgICAgICB1bmdyb3VwZWQ9e3VuZ3JvdXBlZH1cbiAgICAgICAgICAgIC8vIEdyYXBoaWNzIGxheWVyIHByb3BzXG4gICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXt1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0fVxuICAgICAgICAgICAgZ3JhcGhpY3NMYXllcj17Z3JhcGhpY3NMYXllcn1cbiAgICAgICAgICAgIG1hcFZpZXc9e21hcFZpZXd9XG4gICAgICAgICAgICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPXtvbkluaXRpYWxpemVHcmFwaGljc0xheWVyfVxuICAgICAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXI9e29uQ2xlYXJHcmFwaGljc0xheWVyfVxuICAgICAgICAgICAgZ3JvdXBPcmRlcj17Z3JvdXBPcmRlcn1cbiAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZD17c2VsZWN0ZWRHcm91cElkfVxuICAgICAgICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXg9e3NlbGVjdGVkR3JvdXBRdWVyeUluZGV4fVxuICAgICAgICAgICAgb25Hcm91cENoYW5nZT17KGdyb3VwSWQpID0+IHNldFNlbGVjdGVkR3JvdXBJZChncm91cElkKX1cbiAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleChpbmRleCl9XG4gICAgICAgICAgICBvblVuZ3JvdXBlZENoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIHJlc3VsdHNNb2RlPXtyZXN1bHRzTW9kZX1cbiAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2U9e29uUmVzdWx0c01vZGVDaGFuZ2V9XG4gICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e2FjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXtvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgIGFjdGl2ZVRhYj17YWN0aXZlVGFifVxuICAgICAgICAgICAgb25UYWJDaGFuZ2U9e29uVGFiQ2hhbmdlfVxuICAgICAgICAgICAgICAvLyBObyBvbk5hdkJhY2sgLSBubyBuYXZpZ2F0aW9uIG5lZWRlZFxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgICAgfSkoKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5cblxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCB0eXBlIElNU3RhdGUsIGpzeCwgY3NzLCBjbGFzc05hbWVzLCB0eXBlIEltbXV0YWJsZUFycmF5LCB0eXBlIFVzZURhdGFTb3VyY2UsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTZWxlY3QsIFRvb2x0aXAsIEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IHR5cGUgQ3JlYXRlVG9vbFR5cGUsIFNwYXRpYWxGaWx0ZXJUeXBlLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIHR5cGUgU3BhdGlhbFJlbGF0aW9uLCBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURhdGFTb3VyY2UgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHMnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbU1hcCB9IGZyb20gJy4vZ2VvbWV0cnktZnJvbS1tYXAnXHJcbmltcG9ydCB7IEdlb21ldHJ5RnJvbURyYXcgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tZHJhdydcclxuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlUYXNrSXRlbVByb3BzIHtcclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIGRlc2M6IHN0cmluZ1xyXG4gIGRzRW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgZHNCdWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgZHNCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIGRyYXdFbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBkcmF3QnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGRyYXdCdWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIHNwYXRpYWxSZWxhdGlvbnM6IEltbXV0YWJsZUFycmF5PFNwYXRpYWxSZWxhdGlvbj5cclxuICB1c2VEYXRhU291cmNlczogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT5cclxuICB1c2VSdW50aW1lRGF0YTogYm9vbGVhblxyXG4gIGZpbHRlclR5cGVzOiBJbW11dGFibGVBcnJheTxTcGF0aWFsRmlsdGVyVHlwZT5cclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICBjcmVhdGVUb29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxyXG4gIG9uRmlsdGVyQ2hhbmdlOiAoZmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqKSA9PiB2b2lkXHJcbiAgb25SZWxhdGlvbkNoYW5nZTogKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB2b2lkXHJcbiAgb25CdWZmZXJDaGFuZ2U6IChkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrU3BhdGlhbEZvcm0gKHByb3BzOiBRdWVyeVRhc2tJdGVtUHJvcHMpIHtcclxuICBjb25zdCB7XHJcbiAgICBsYWJlbCwgZGVzYywgZmlsdGVyVHlwZXMsIG1hcFdpZGdldElkcywgb25GaWx0ZXJDaGFuZ2UsIG9uUmVsYXRpb25DaGFuZ2UsIG9uQnVmZmVyQ2hhbmdlLCB1c2VEYXRhU291cmNlcywgc3BhdGlhbFJlbGF0aW9ucywgdXNlUnVudGltZURhdGEsXHJcbiAgICBkc0VuYWJsZUJ1ZmZlciwgZHNCdWZmZXJEaXN0YW5jZSwgZHNCdWZmZXJVbml0LCBkcmF3RW5hYmxlQnVmZmVyLCBkcmF3QnVmZmVyRGlzdGFuY2UsIGRyYXdCdWZmZXJVbml0LCBjcmVhdGVUb29sVHlwZXMsIHdpZGdldElkXHJcbiAgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcclxuICAvLyB1c2VkIHRvIHN0b3JlIHRoZSBzZWxlY3Rpb24gb2YgdGhlIGRhdGEgc291cmNlIGluIG9yZGVyIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIHdoZW4gb3B0aW9uIGNoYW5nZXNcclxuICBjb25zdCBzZWxlY3RlZEdlb21ldHJpZXNSZWYgPSBSZWFjdC51c2VSZWY8YW55PihudWxsKVxyXG4gIGNvbnN0IG1hcEV4aXN0cyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBpZiAobWFwV2lkZ2V0SWRzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IG1hcFdpZGdldElkID0gbWFwV2lkZ2V0SWRzWzBdXHJcbiAgICAgIHJldHVybiBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1ttYXBXaWRnZXRJZF0gIT0gbnVsbFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfSlcclxuICBjb25zdCBjYW5Vc2VNYXBGaWx0ZXIgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiBtYXBFeGlzdHMgJiYgKGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5DdXJyZW50TWFwRXh0ZW50KSB8fCBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpXHJcbiAgfSwgW2ZpbHRlclR5cGVzLCBtYXBFeGlzdHNdKVxyXG4gIGNvbnN0IHN1cHBvcnRlZEZpbHRlclR5cGVzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBbXVxyXG4gICAgaWYgKHVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwIHx8IHVzZVJ1bnRpbWVEYXRhKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdkYXRhJywgbGFiZWw6IGdldEkxOG5NZXNzYWdlKCdmZWF0dXJlRnJvbURzJykgfSlcclxuICAgIH1cclxuICAgIGlmIChjYW5Vc2VNYXBGaWx0ZXIgJiYgZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkN1cnJlbnRNYXBFeHRlbnQpKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdtYXAnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuQ3VycmVudE1hcEV4dGVudH1gKSB9KVxyXG4gICAgfVxyXG4gICAgaWYgKGNhblVzZU1hcEZpbHRlciAmJiBmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZSkpIHtcclxuICAgICAgcmVzdWx0LnB1c2goeyB2YWx1ZTogJ2RyYXcnLCBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxGaWx0ZXJUeXBlXyR7U3BhdGlhbEZpbHRlclR5cGUuSW50ZXJhY3RpdmVEcmF3TW9kZX1gKSB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4gIH0sIFtjYW5Vc2VNYXBGaWx0ZXIsIHVzZURhdGFTb3VyY2VzLCB1c2VSdW50aW1lRGF0YSwgZ2V0STE4bk1lc3NhZ2UsIGZpbHRlclR5cGVzXSlcclxuXHJcbiAgY29uc3QgW2N1cnJlbnRGaWx0ZXJUeXBlLCBzZXRDdXJyZW50RmlsdGVyVHlwZV0gPSBSZWFjdC51c2VTdGF0ZShzdXBwb3J0ZWRGaWx0ZXJUeXBlcz8uWzBdPy52YWx1ZSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIGluIG9yZGVyIHRvIGF2b2lkIGludmFsaWQgb3B0aW9uIGJlaW5nIHNlbGVjdGVkXHJcbiAgICBpZiAoY3VycmVudEZpbHRlclR5cGUgIT09ICdub25lJyAmJiAhc3VwcG9ydGVkRmlsdGVyVHlwZXMuZmluZCgoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gY3VycmVudEZpbHRlclR5cGUpKSB7XHJcbiAgICAgIHNldEN1cnJlbnRGaWx0ZXJUeXBlKHN1cHBvcnRlZEZpbHRlclR5cGVzPy5bMF0/LnZhbHVlKVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RmlsdGVyVHlwZSwgc3VwcG9ydGVkRmlsdGVyVHlwZXNdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gY2xlYXIgdGhlIHJlbGF0aW9uc2hpcCBhbmQgYnVmZmVyIGlmIGZpbHRlciB0eXBlIGlzIG5vdCAnZGF0YSdcclxuICAgIGlmIChjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ21hcCcgfHwgY3VycmVudEZpbHRlclR5cGUgPT09ICdkcmF3JyB8fCBjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ25vbmUnKSB7XHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2UobnVsbClcclxuICAgICAgb25CdWZmZXJDaGFuZ2UoMCwgVW5pdFR5cGUuTWV0ZXJzKVxyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgICAvLyBubyBuZWVkIHRvIHVwZGF0ZSB0aGUgZmlsdGVyIGlmIHRoZSBkYXRhIHNvdXJjZSBoYXMgc2VsZWN0aW9uIHNpbmNlIGl0IHdpbGwgYmUgdXBkYXRlZCBpbiB0aGUgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIG1ldGhvZFxyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgc2VsZWN0ZWRHZW9tZXRyaWVzUmVmLmN1cnJlbnQgPT0gbnVsbCkge1xyXG4gICAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBudWxsIH0pXHJcbiAgICB9XHJcbiAgfSwgW2N1cnJlbnRGaWx0ZXJUeXBlLCBvblJlbGF0aW9uQ2hhbmdlLCBvbkJ1ZmZlckNoYW5nZSwgb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHsgc2V0Q3VycmVudEZpbHRlclR5cGUoZXZ0LnRhcmdldC52YWx1ZSkgfSwgW10pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUdlb21ldHJ5Q2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGdlb21ldHJ5OiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4ge1xyXG4gICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeSwgZ3JhcGhpYywgbGF5ZXIsIGNsZWFyQWZ0ZXJBcHBseSB9KVxyXG4gIH0sIFtvbkZpbHRlckNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChnZW9tZXRyaWVzKSA9PiB7XHJcbiAgICBzZWxlY3RlZEdlb21ldHJpZXNSZWYuY3VycmVudCA9IGdlb21ldHJpZXNcclxuICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnk6IGdlb21ldHJpZXMgfSlcclxuICB9LCBbb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBpZiAoISh1c2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMCB8fCB1c2VSdW50aW1lRGF0YSB8fCBjYW5Vc2VNYXBGaWx0ZXIpKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGNsYXNzTmFtZT0ncHgtNCBwYi00JyBhcmlhLWxhYmVsPXtsYWJlbH0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmb3JtLXRpdGxlIG15LTIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6ICFsYWJlbCAmJiAhZGVzYyB9KX0+XHJcbiAgICAgICAge2xhYmVsICYmIDxkaXYgY2xhc3NOYW1lPSdtci0yIHRpdGxlMic+e2xhYmVsfTwvZGl2Pn1cclxuICAgICAgICB7ZGVzYyAmJiAoXHJcbiAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXtkZXNjfT5cclxuICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeSc+XHJcbiAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8L1Rvb2x0aXA+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RpdGxlMyc+e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9PC9kaXY+XHJcbiAgICAgICAgICA8U2VsZWN0XHJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJUeXBlJyl9XHJcbiAgICAgICAgICAgIGNzcz17Y3NzYGhlaWdodDogMzJweDtgfVxyXG4gICAgICAgICAgICB2YWx1ZT17Y3VycmVudEZpbHRlclR5cGV9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWx0ZXJUeXBlQ2hhbmdlZH1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPG9wdGlvbiBrZXk9Jy0nIHZhbHVlPSdub25lJz4tPC9vcHRpb24+XHJcbiAgICAgICAgICAgIHtzdXBwb3J0ZWRGaWx0ZXJUeXBlcy5tYXAoaXRlbSA9PiA8b3B0aW9uIGtleT17aXRlbS52YWx1ZX0gdmFsdWU9e2l0ZW0udmFsdWV9PntpdGVtLmxhYmVsfTwvb3B0aW9uPil9XHJcbiAgICAgICAgICA8L1NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnZGF0YScgJiYgKFxyXG4gICAgICAgIDxHZW9tZXRyeUZyb21EYXRhU291cmNlXHJcbiAgICAgICAgICBlbmFibGVCdWZmZXI9e2RzRW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RzQnVmZmVyRGlzdGFuY2V9XHJcbiAgICAgICAgICBidWZmZXJVbml0PXtkc0J1ZmZlclVuaXR9XHJcbiAgICAgICAgICBzcGF0aWFsUmVsYXRpb25zPXtzcGF0aWFsUmVsYXRpb25zfVxyXG4gICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3VzZURhdGFTb3VyY2VzfVxyXG4gICAgICAgICAgdXNlUnVudGltZURhdGE9e3VzZVJ1bnRpbWVEYXRhfVxyXG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e2hhbmRsZVNlbGVjdGlvbkNoYW5nZX1cclxuICAgICAgICAgIG9uUmVsYXRpb25DaGFuZ2U9e29uUmVsYXRpb25DaGFuZ2V9XHJcbiAgICAgICAgICBvbkJ1ZmZlckNoYW5nZT17b25CdWZmZXJDaGFuZ2V9XHJcbiAgICAgICAgLz5cclxuICAgICAgKX1cclxuICAgICAge2N1cnJlbnRGaWx0ZXJUeXBlID09PSAnbWFwJyAmJiAoXHJcbiAgICAgICAgPEdlb21ldHJ5RnJvbU1hcFxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICAgIHtjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RyYXcnICYmIChcclxuICAgICAgICA8R2VvbWV0cnlGcm9tRHJhd1xyXG4gICAgICAgICAgZW5hYmxlQnVmZmVyPXtkcmF3RW5hYmxlQnVmZmVyfVxyXG4gICAgICAgICAgYnVmZmVyRGlzdGFuY2U9e2RyYXdCdWZmZXJEaXN0YW5jZX1cclxuICAgICAgICAgIGJ1ZmZlclVuaXQ9e2RyYXdCdWZmZXJVbml0fVxyXG4gICAgICAgICAgbWFwV2lkZ2V0SWRzPXttYXBXaWRnZXRJZHN9XHJcbiAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XHJcbiAgICAgICAgICBjcmVhdGVUb29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2U9e2hhbmRsZUdlb21ldHJ5Q2hhbmdlfVxyXG4gICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e29uQnVmZmVyQ2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQge1xuICBSZWFjdCxcbiAganN4LFxuICBjc3MsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIFVzZURhdGFTb3VyY2UsXG4gIEltbXV0YWJsZSxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBjbGFzc05hbWVzLFxuICBDT05TVEFOVFMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBEYXRhUmVjb3JkU2V0LFxuICB0eXBlIFF1ZXJ5UGFyYW1zLFxuICBEYXRhU291cmNlU3RhdHVzLFxuICBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSxcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxuICBSZWNvcmRTZXRDaGFuZ2VUeXBlLFxuICBNZXNzYWdlTWFuYWdlcixcbiAgTXV0YWJsZVN0b3JlTWFuYWdlcixcbiAgRGF0YUFjdGlvbk1hbmFnZXIsXG4gIERhdGFMZXZlbCxcbiAgdHlwZSBRdWVyaWFibGVEYXRhU291cmNlLFxuICB0eXBlIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zLFxuICBob29rcyxcbiAgbG9kYXNoLFxuICBEYXRhU291cmNlTWFuYWdlcixcbiAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUsXG4gIFJlYWN0UmVkdXgsXG4gIHR5cGUgSU1TdGF0ZSxcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MsIFRhYnMsIFRhYiwgU2VsZWN0IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IEluZm9PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8nXG5pbXBvcnQgeyBUcmFzaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gnXG5pbXBvcnQgeyBQYWdpbmdUeXBlLCB0eXBlIFF1ZXJ5SXRlbVR5cGUsIHR5cGUgU3BhdGlhbEZpbHRlck9iaiwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5VGFza0Zvcm0gfSBmcm9tICcuL3F1ZXJ5LXRhc2stZm9ybSdcbmltcG9ydCB7IFF1ZXJ5VGFza1Jlc3VsdCB9IGZyb20gJy4vcXVlcnktcmVzdWx0J1xuaW1wb3J0IHsgRGF0YVNvdXJjZVRpcCwgdXNlRGF0YVNvdXJjZUV4aXN0cywgRXJyb3JNZXNzYWdlIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyBRdWVyeVRhc2tMYWJlbCB9IGZyb20gJy4vcXVlcnktdGFzay1sYWJlbCdcbmltcG9ydCB7IHVzZVpvb21Ub1JlY29yZHMgfSBmcm9tICcuL2hvb2tzL3VzZS16b29tLXRvLXJlY29yZHMnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBnZW5lcmF0ZVF1ZXJ5UGFyYW1zLCBleGVjdXRlUXVlcnksIGV4ZWN1dGVDb3VudFF1ZXJ5IH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZCwgcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZCwgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zIH0gZnJvbSAnLi9yZXN1bHRzLW1hbmFnZW1lbnQtdXRpbHMnXG5pbXBvcnQgeyBNZW51T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9tZW51J1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdCdcbmltcG9ydCB7IExvYWRpbmdSZXN1bHQgfSBmcm9tICcuL2xvYWRpbmctcmVzdWx0J1xuaW1wb3J0IHsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzLCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCwgZmluZENsZWFyUmVzdWx0c0J1dHRvbiwgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vLyBFdmVudCBmaXJlZCB3aGVuIFNxbEV4cHJlc3Npb25SdW50aW1lIGNvbnZlcnRzIGhhc2ggdmFsdWUgZnJvbSBzdHJpbmcgdG8gYXJyYXkgZm9ybWF0XG5jb25zdCBRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCA9ICdxdWVyeXNpbXBsZS1oYXNoLXZhbHVlLWNvbnZlcnRlZCdcblxuLy8gRXZlbnQgZmlyZWQgd2hlbiBhIGhhc2gtdHJpZ2dlcmVkIHF1ZXJ5IGV4ZWN1dGlvbiBjb21wbGV0ZXMgc3VjY2Vzc2Z1bGx5XG4vLyBUaGlzIGFsbG93cyBIZWxwZXJTaW1wbGUgdG8gdHJhY2sgd2hpY2ggaGFzaCBwYXJhbWV0ZXJzIGhhdmUgYmVlbiBleGVjdXRlZFxuY29uc3QgUVVFUllTSU1QTEVfSEFTSF9RVUVSWV9FWEVDVVRFRF9FVkVOVCA9ICdxdWVyeXNpbXBsZS1oYXNoLXF1ZXJ5LWV4ZWN1dGVkJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza1Byb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBpbmRleDogbnVtYmVyXG4gIHRvdGFsOiBudW1iZXJcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgd3JhcHBlZEluUG9wcGVyPzogYm9vbGVhblxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgaXNJblBvcHBlcj86IGJvb2xlYW5cbiAgb25OYXZCYWNrPzogKCkgPT4gdm9pZFxuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG4gIC8vIFByb3BzIGZvciBTZWFyY2ggTGF5ZXIgZHJvcGRvd24gKHdoZW4gbXVsdGlwbGUgcXVlcmllcylcbiAgcXVlcnlJdGVtcz86IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIHNlbGVjdGVkUXVlcnlJbmRleD86IG51bWJlclxuICBvblF1ZXJ5Q2hhbmdlPzogKGluZGV4OiBudW1iZXIpID0+IHZvaWRcbiAgLy8gR3JvdXBpbmcgcHJvcHNcbiAgZ3JvdXBzPzogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9XG4gIHVuZ3JvdXBlZD86IEFycmF5PHsgaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LCBpbmRleDogbnVtYmVyIH0+XG4gIGdyb3VwT3JkZXI/OiBzdHJpbmdbXVxuICBzZWxlY3RlZEdyb3VwSWQ/OiBzdHJpbmcgfCBudWxsXG4gIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4PzogbnVtYmVyXG4gIG9uR3JvdXBDaGFuZ2U/OiAoZ3JvdXBJZDogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZFxuICBvbkdyb3VwUXVlcnlDaGFuZ2U/OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxuICBvblVuZ3JvdXBlZENoYW5nZT86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gIC8vIFJlc3VsdHMgbW9kZSBwcm9wc1xuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGVcbiAgb25SZXN1bHRzTW9kZUNoYW5nZT86IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB2b2lkXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxuICAvLyBHcmFwaGljcyBsYXllciBwcm9wc1xuICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PzogYm9vbGVhblxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPzogKG91dHB1dERTOiBEYXRhU291cmNlKSA9PiBQcm9taXNlPHZvaWQ+XG4gIG9uQ2xlYXJHcmFwaGljc0xheWVyPzogKCkgPT4gdm9pZFxuICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnXG4gIG9uVGFiQ2hhbmdlPzogKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4gdm9pZFxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGRpc3BsYXkgbmFtZSBmb3IgcXVlcnkgaW4gZHJvcGRvd25cbi8vIFVzZXM6IHNlYXJjaEFsaWFzIHx8IGppbXVGaWVsZE5hbWUgfHwgaXRlbS5uYW1lIHx8IGZhbGxiYWNrXG5jb25zdCBnZXRRdWVyeURpc3BsYXlOYW1lID0gKGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPik6IHN0cmluZyA9PiB7XG4gIC8vIEZpcnN0IHByaW9yaXR5OiBzZWFyY2hBbGlhcyBpZiBzZXRcbiAgaWYgKGl0ZW0uc2VhcmNoQWxpYXMpIHtcbiAgICByZXR1cm4gaXRlbS5zZWFyY2hBbGlhc1xuICB9XG4gIFxuICAvLyBTZWNvbmQgcHJpb3JpdHk6IGZpZWxkIG5hbWUgZnJvbSBTUUwgZXhwcmVzc2lvblxuICBjb25zdCBqaW11RmllbGROYW1lID0gaXRlbS5zcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy5qaW11RmllbGROYW1lXG4gIGlmIChqaW11RmllbGROYW1lKSB7XG4gICAgcmV0dXJuIGppbXVGaWVsZE5hbWVcbiAgfVxuICBcbiAgLy8gVGhpcmQgcHJpb3JpdHk6IGl0ZW0gbmFtZVxuICBpZiAoaXRlbS5uYW1lKSB7XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG4gIFxuICAvLyBGYWxsYmFja1xuICByZXR1cm4gJ1F1ZXJ5J1xufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgJi53cmFwcGVkIC5xdWVyeS1mb3JtIHtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gIH1cbiAgLnF1ZXJ5LXRhc2tfX2NvbnRlbnQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nLXRvcDogOHB4O1xuICAgICY6aGFzKD4gLnF1ZXJ5LWZvcm1fX2hlYWRlciA+IGRpdjpub3QoLmQtbm9uZSkpLCAmOmhhcyg+IC5xdWVyeS1yZXN1bHQpIHtcbiAgICAgIHBhZGRpbmctdG9wOiAxNnB4O1xuICAgIH1cbiAgfVxuICAucXVlcnktZm9ybV9faGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgICYuaGFzLWNvbnRlbnQge1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICAgIH1cbiAgICAubmF2LWFjdGlvbiB7XG4gICAgICBmbGV4OiAxIDEgMDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgLmppbXUtYnRuIHtcbiAgICAgICAgbWluLXdpZHRoOiAyNnB4O1xuICAgICAgfVxuICAgIH1cbiAgICAucmVzdWx0LW1lbnUge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICB9XG4gIH1cbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFzayAocHJvcHM6IFF1ZXJ5VGFza1Byb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtLCBvbk5hdkJhY2ssIHRvdGFsLCBpc0luUG9wcGVyID0gZmFsc2UsIHdyYXBwZWRJblBvcHBlciA9IGZhbHNlLCBjbGFzc05hbWUgPSAnJywgaW5kZXgsIGluaXRpYWxJbnB1dFZhbHVlLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCBxdWVyeUl0ZW1zLCBzZWxlY3RlZFF1ZXJ5SW5kZXgsIG9uUXVlcnlDaGFuZ2UsIGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyLCBzZWxlY3RlZEdyb3VwSWQsIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LCBvbkdyb3VwQ2hhbmdlLCBvbkdyb3VwUXVlcnlDaGFuZ2UsIG9uVW5ncm91cGVkQ2hhbmdlLCByZXN1bHRzTW9kZSwgb25SZXN1bHRzTW9kZUNoYW5nZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllciwgbWFwVmlldywgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllciwgb25DbGVhckdyYXBoaWNzTGF5ZXIsIGFjdGl2ZVRhYjogcHJvcEFjdGl2ZVRhYiwgb25UYWJDaGFuZ2U6IHByb3BPblRhYkNoYW5nZSwgLi4ub3RoZXJQcm9wcyB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3Qgem9vbVRvUmVjb3JkcyA9IHVzZVpvb21Ub1JlY29yZHMobWFwVmlldylcbiAgY29uc3QgW3N0YWdlLCBzZXRTdGFnZV0gPSBSZWFjdC51c2VTdGF0ZSgwKSAvLyAwID0gZm9ybSwgMSA9IHJlc3VsdHMsIDIgPSBsb2FkaW5nXG4gIGNvbnN0IFtpbnRlcm5hbEFjdGl2ZVRhYiwgc2V0SW50ZXJuYWxBY3RpdmVUYWJdID0gUmVhY3QudXNlU3RhdGU8J3F1ZXJ5JyB8ICdyZXN1bHRzJz4oJ3F1ZXJ5JylcbiAgXG4gIC8vIExvZyB3aGVuIGluaXRpYWxJbnB1dFZhbHVlIHByb3AgaXMgcmVjZWl2ZWRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnl0YXNrLWluaXRpYWxpbnB1dHZhbHVlLXByb3AtcmVjZWl2ZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHByb3BzLnF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IHByb3BzLnF1ZXJ5SXRlbVNob3J0SWQsXG4gICAgICBoYXNJbml0aWFsSW5wdXRWYWx1ZTogISFwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtwcm9wcy5pbml0aWFsSW5wdXRWYWx1ZSwgcHJvcHMud2lkZ2V0SWQsIHByb3BzLnF1ZXJ5SXRlbS5jb25maWdJZCwgcHJvcHMucXVlcnlJdGVtU2hvcnRJZF0pXG4gIFxuICAvLyBDb250cm9sbGVkIHRhYiBzdGF0ZTogdXNlIHByb3AgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBpbnRlcm5hbCBzdGF0ZVxuICBjb25zdCBhY3RpdmVUYWIgPSBwcm9wQWN0aXZlVGFiIHx8IGludGVybmFsQWN0aXZlVGFiXG4gIGNvbnN0IHNldEFjdGl2ZVRhYiA9IFJlYWN0LnVzZUNhbGxiYWNrKCh0YWI6ICdxdWVyeScgfCAncmVzdWx0cycpID0+IHtcbiAgICBpZiAocHJvcE9uVGFiQ2hhbmdlKSB7XG4gICAgICBwcm9wT25UYWJDaGFuZ2UodGFiKVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXRJbnRlcm5hbEFjdGl2ZVRhYih0YWIpXG4gICAgfVxuICB9LCBbcHJvcE9uVGFiQ2hhbmdlXSlcbiAgY29uc3QgW2VuYWJsZWQsIHNldEVuYWJsZWRdID0gUmVhY3QudXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgW3Jlc3VsdENvdW50LCBzZXRSZXN1bHRDb3VudF0gPSBSZWFjdC51c2VTdGF0ZSgwKVxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IHNlbGVjdGVkIHJlY29yZHMgZm9yIHRoZSBjdXJyZW50IHF1ZXJ5IHJlc3VsdHNcbiAgY29uc3QgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBUcmFjayBxdWVyeSBleGVjdXRpb24gY291bnQgdG8gZm9yY2UgUXVlcnlUYXNrUmVzdWx0IHJlbW91bnQgb24gbmV3IHF1ZXJpZXNcbiAgY29uc3QgcXVlcnlFeGVjdXRpb25LZXlSZWYgPSBSZWFjdC51c2VSZWYoMClcbiAgY29uc3QgcXVlcnlQYXJhbVJlZiA9IFJlYWN0LnVzZVJlZjxRdWVyeVBhcmFtcz4obnVsbClcbiAgY29uc3QgcmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxEYXRhUmVjb3JkW10+KG51bGwpXG4gIGNvbnN0IFtvdXRwdXREUywgc2V0T3V0cHV0RFNdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3QgW3NwYXRpYWxGaWx0ZXJFbmFibGVkLCBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZF0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqID0gUmVhY3QudXNlUmVmPElNU3FsRXhwcmVzc2lvbj4ocXVlcnlJdGVtLnNxbEV4cHJPYmopXG4gIGNvbnN0IHNwYXRpYWxGaWx0ZXJPYmogPSBSZWFjdC51c2VSZWYobnVsbClcbiAgY29uc3QgYmFja0J0blJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBjbGVhclJlc3VsdEJ0blJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCBbZGF0YUFjdGlvbkZpbHRlciwgc2V0RGF0YUFjdGlvbkZpbHRlcl0gPSBSZWFjdC51c2VTdGF0ZShudWxsKVxuICBjb25zdCBwcmV2aW91c0NvbmZpZ0lkUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZz4ocXVlcnlJdGVtLmNvbmZpZ0lkKVxuICAvLyBUcmFjayBtYW51YWwgdGFiIHN3aXRjaGVzIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgY29uc3QgbWFudWFsVGFiU3dpdGNoUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKVxuICAvLyBUcmFjayB3aGVuIGEgcXVlcnkgd2FzIGp1c3QgZXhlY3V0ZWQgLSBvbmx5IGF1dG8tc3dpdGNoIGFmdGVyIHF1ZXJ5IGV4ZWN1dGlvbiBjb21wbGV0ZXNcbiAgY29uc3QgcXVlcnlKdXN0RXhlY3V0ZWRSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFN0b3JlIHRoZSBsYXN0IHJ1bnRpbWUgem9vbSBvdmVycmlkZSB2YWx1ZSBmcm9tIHRoZSBmb3JtIGZvciB1c2UgYnkgQWRkIHRvIE1hcCBhY3Rpb25cbiAgY29uc3QgbGFzdFJ1bnRpbWVab29tVG9TZWxlY3RlZFJlZiA9IFJlYWN0LnVzZVJlZjxib29sZWFuIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpXG4gIC8vIEVycm9yIHN0YXRlcyBmb3IgdXNlci1mYWNpbmcgZXJyb3JzXG4gIGNvbnN0IFtzZWxlY3Rpb25FcnJvciwgc2V0U2VsZWN0aW9uRXJyb3JdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihudWxsKVxuICBjb25zdCBbem9vbUVycm9yLCBzZXRab29tRXJyb3JdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihudWxsKVxuICAvLyBTdG9yZSBwZW5kaW5nIHF1ZXJ5IHdoZW4gd2FpdGluZyBmb3IgaGFzaCB2YWx1ZSBjb252ZXJzaW9uXG4gIGNvbnN0IHBlbmRpbmdIYXNoUXVlcnlSZWYgPSBSZWFjdC51c2VSZWY8e1xuICAgIHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvblxuICAgIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmpcbiAgICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4gIH0gfCBudWxsPihudWxsKVxuXG4gIGNvbnN0IGN1cnJlbnRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9RVUVSWV9JVEVNLCBxdWVyeUl0ZW0pXG4gIGNvbnN0IHsgaWNvbiwgbmFtZSwgZGlzcGxheUxhYmVsIH0gPSBjdXJyZW50SXRlbVxuICBjb25zdCBkc0V4aXN0czogYm9vbGVhbiA9IHVzZURhdGFTb3VyY2VFeGlzdHMoeyB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsIHVzZURhdGFTb3VyY2VJZDogY3VycmVudEl0ZW0udXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkIH0pXG5cbiAgLy8gRGVidWcgbG9nZ2luZyBmb3IgdGFiIGNvbnRlbnQgcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeS10YWItY29udGVudC1yZW5kZXInLFxuICAgICAgYWN0aXZlVGFiLFxuICAgICAgZW5hYmxlZCxcbiAgICAgIGRzRXhpc3RzLFxuICAgICAgZGF0YVNvdXJjZTogZGF0YVNvdXJjZSA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIG5vdGU6ICdRdWVyeSB0YWIgY29udGVudCBzdGF0ZSBjaGVjaydcbiAgICB9KVxuICB9LCBbYWN0aXZlVGFiLCBlbmFibGVkLCBkc0V4aXN0cywgZGF0YVNvdXJjZSwgcXVlcnlJdGVtLmNvbmZpZ0lkXSlcblxuICAvLyBEZWJ1ZyBsb2dnaW5nIGZvciBUYWIgY2hpbGRyZW4gcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5LXRhYi1jaGlsZHJlbi1yZW5kZXInLFxuICAgICAgICBhY3RpdmVUYWIsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIG5vdGU6ICdRdWVyeSBUYWIgY2hpbGRyZW4gc2hvdWxkIGJlIHJlbmRlcmluZydcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbYWN0aXZlVGFiLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIC8vIGZvY3VzIHRoZSBiYWNrIGJ1dHRvbiB3aGVuIGl0IGlzIHJlbmRlcmVkXG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9KVxuXG4gIC8vIEdldCB0aGUgcGFnaW5hdGlvbiBzdHlsZSBmcm9tIHdpZGdldCBjb25maWcgKE11bHRpUGFnZSBvciBMYXp5TG9hZC9TaW5nbGUtcGFnZSlcbiAgY29uc3QgcGFnaW5nVHlwZUluQ29uZmlnID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbcHJvcHMud2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdFBhZ2luZ1N0eWxlXG4gIH0pXG5cbiAgLy8gR2V0IHRoZSBpbml0aWFsIHBhZ2Ugc2l6ZSBmb3Igc2luZ2xlLXBhZ2UgKExhenlMb2FkKSByZXN1bHRzXG4gIC8vIFRoaXMgYWxsb3dzIHVzZXJzIHRvIGNvbmZpZ3VyZSBob3cgbWFueSByZWNvcmRzIGFyZSBsb2FkZWQgaW5pdGlhbGx5IHdoZW4gdXNpbmcgc2luZ2xlLXBhZ2UgbW9kZVxuICAvLyBEZWZhdWx0cyB0byAxMDAgaWYgbm90IGNvbmZpZ3VyZWRcbiAgY29uc3QgbGF6eUxvYWRJbml0aWFsUGFnZVNpemUgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1twcm9wcy53aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcubGF6eUxvYWRJbml0aWFsUGFnZVNpemVcbiAgfSlcblxuXG4gIC8vIFdhdGNoIGZvciB3aGVuIHJlc3VsdHMgYXJlIHJlYWR5IGFuZCBzd2l0Y2ggdG8gUmVzdWx0cyB0YWJcbiAgLy8gT05MWSBhdXRvLXN3aXRjaCB3aGVuIGEgcXVlcnkgd2FzIGp1c3QgZXhlY3V0ZWQgYW5kIHJlc3VsdHMgYXJlIGxvYWRlZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIERvbid0IGF1dG8tc3dpdGNoIGlmIHVzZXIgbWFudWFsbHkgc3dpdGNoZWQgdGFic1xuICAgIGlmIChtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2F1dG8tc3dpdGNoLXNraXBwZWQnLFxuICAgICAgICByZWFzb246ICdtYW51YWwtdGFiLXN3aXRjaC1mbGFnLXNldCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgYWN0aXZlVGFiLFxuICAgICAgICByZXN1bHRDb3VudCxcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWY6IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBGT1JDRUQ6IEFsd2F5cyB1c2UgU2ltcGxlTGlzdCAtIHdlJ3JlIGRvbmUgd2l0aCBsYXp5IGxvYWRpbmcgaXNzdWVzXG4gICAgLy8gUmVjb3JkcyBhcmUgYXZhaWxhYmxlIGltbWVkaWF0ZWx5LCBzbyB3ZSBjYW4gc3dpdGNoIGFzIHNvb24gYXMgcmVzdWx0Q291bnQgPiAwXG4gICAgY29uc3QgaXNTaW1wbGVMaXN0ID0gdHJ1ZVxuICAgIFxuICAgIC8vIE9OTFkgYXV0by1zd2l0Y2ggd2hlbjpcbiAgICAvLyAxLiBBIHF1ZXJ5IHdhcyBqdXN0IGV4ZWN1dGVkIChxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ID09PSB0cnVlKVxuICAgIC8vIDIuIFdlIGhhdmUgcmVzdWx0cyAocmVzdWx0Q291bnQgPiAwKVxuICAgIC8vIDMuIFJlY29yZHMgYXJlIGFjdHVhbGx5IGxvYWRlZDpcbiAgICAvLyAgICAtIEZvciBTaW1wbGVMaXN0OiByZXN1bHRDb3VudCA+IDAgaXMgc3VmZmljaWVudCAocmVjb3JkcyBhdmFpbGFibGUgaW1tZWRpYXRlbHkpXG4gICAgLy8gICAgLSBGb3IgTGF6eUxvYWQ6IHJlY29yZHNSZWYuY3VycmVudCBtdXN0IGhhdmUgZGF0YSAod2FpdCBmb3IgbGF6eSBsb2FkaW5nKVxuICAgIC8vIDQuIFdlJ3JlIGN1cnJlbnRseSBvbiB0aGUgcXVlcnkgdGFiIChkb24ndCBzd2l0Y2ggaWYgYWxyZWFkeSBvbiByZXN1bHRzKVxuICAgIGNvbnN0IGhhc1JlY29yZHMgPSBpc1NpbXBsZUxpc3QgXG4gICAgICA/IHJlc3VsdENvdW50ID4gMCBcbiAgICAgIDogKHJlY29yZHNSZWYuY3VycmVudCAmJiByZWNvcmRzUmVmLmN1cnJlbnQubGVuZ3RoID4gMClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2F1dG8tc3dpdGNoLWNoZWNrJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICBhY3RpdmVUYWIsXG4gICAgICByZXN1bHRDb3VudCxcbiAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmOiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50LFxuICAgICAgaXNTaW1wbGVMaXN0LFxuICAgICAgcGFnaW5nVHlwZUluQ29uZmlnLFxuICAgICAgaGFzUmVjb3JkcyxcbiAgICAgIHJlY29yZHNSZWZMZW5ndGg6IHJlY29yZHNSZWYuY3VycmVudD8ubGVuZ3RoIHx8IDAsXG4gICAgICBtYW51YWxUYWJTd2l0Y2hSZWY6IG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50LFxuICAgICAgd2lsbEF1dG9Td2l0Y2g6IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgJiYgcmVzdWx0Q291bnQgPiAwICYmIGhhc1JlY29yZHMgJiYgYWN0aXZlVGFiID09PSAncXVlcnknLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBpZiAocXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCAmJiBcbiAgICAgICAgcmVzdWx0Q291bnQgPiAwICYmIFxuICAgICAgICBoYXNSZWNvcmRzICYmIFxuICAgICAgICBhY3RpdmVUYWIgPT09ICdxdWVyeScpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC10cmlnZ2VyZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIGZyb21UYWI6IGFjdGl2ZVRhYixcbiAgICAgICAgdG9UYWI6ICdyZXN1bHRzJyxcbiAgICAgICAgcmVzdWx0Q291bnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHNldEFjdGl2ZVRhYigncmVzdWx0cycpXG4gICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgYWZ0ZXIgc3dpdGNoaW5nXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnYXV0by1zd2l0Y2gtY29tcGxldGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZlJlc2V0OiBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbcmVzdWx0Q291bnQsIGFjdGl2ZVRhYiwgcGFnaW5nVHlwZUluQ29uZmlnXSlcblxuICAvLyBWZXJpZnkgZHJvcGRvd25zIGFyZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlciB3aGVuIHByZXNlbnRcbiAgLy8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgZ3JvdXBlZCBxdWVyaWVzIHdoZXJlIGRyb3Bkb3ducyBuZWVkIHRvIGJlIHN5bmNocm9uaXplZFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgdmVyaWZ5IGlmIHdlIGhhdmUgYSBoYXNoIHBhcmFtZXRlclxuICAgIGlmICghaW5pdGlhbElucHV0VmFsdWUgfHwgIXF1ZXJ5SXRlbS5zaG9ydElkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRoZSBjdXJyZW50IHF1ZXJ5SXRlbSBtYXRjaGVzIHdoYXQgd2UgZXhwZWN0IGZyb20gaGFzaCBwYXJhbWV0ZXJcbiAgICBjb25zdCBleHBlY3RlZFNob3J0SWQgPSBxdWVyeUl0ZW0uc2hvcnRJZFxuICAgIGNvbnN0IGlzR3JvdXBlZFF1ZXJ5ID0gcXVlcnlJdGVtLmdyb3VwSWQgIT09IG51bGwgJiYgcXVlcnlJdGVtLmdyb3VwSWQgIT09IHVuZGVmaW5lZFxuICAgIFxuICAgIC8vIENoZWNrIGlmIGRyb3Bkb3ducyBhcmUgY29ycmVjdGx5IHNldCBmb3IgZ3JvdXBlZCBxdWVyaWVzXG4gICAgaWYgKGlzR3JvdXBlZFF1ZXJ5KSB7XG4gICAgICBjb25zdCBleHBlY3RlZEdyb3VwSWQgPSBxdWVyeUl0ZW0uZ3JvdXBJZFxuICAgICAgY29uc3QgYWN0dWFsR3JvdXBJZCA9IHNlbGVjdGVkR3JvdXBJZFxuICAgICAgY29uc3QgZXhwZWN0ZWRRdWVyeUluZGV4ID0gc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXhcbiAgICAgIFxuICAgICAgaWYgKGV4cGVjdGVkR3JvdXBJZCAhPT0gYWN0dWFsR3JvdXBJZCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnZHJvcGRvd24tZ3JvdXAtbWlzbWF0Y2gnLFxuICAgICAgICAgIGV4cGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICBhY3R1YWxHcm91cElkLFxuICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICB3YXJuaW5nOiAnRmlyc3QgZHJvcGRvd24gbWF5IG5vdCBiZSBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoZXhwZWN0ZWRRdWVyeUluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gVmVyaWZ5IHRoZSBxdWVyeSBpbmRleCB3aXRoaW4gdGhlIGdyb3VwIG1hdGNoZXNcbiAgICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IGdyb3Vwcz8uW2V4cGVjdGVkR3JvdXBJZF0/Lml0ZW1zXG4gICAgICAgIGlmIChncm91cEl0ZW1zICYmIGdyb3VwSXRlbXMubGVuZ3RoID4gZXhwZWN0ZWRRdWVyeUluZGV4KSB7XG4gICAgICAgICAgY29uc3QgZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkID0gZ3JvdXBJdGVtc1tleHBlY3RlZFF1ZXJ5SW5kZXhdPy5jb25maWdJZFxuICAgICAgICAgIGNvbnN0IGFjdHVhbFF1ZXJ5Q29uZmlnSWQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICBpZiAoZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkICE9PSBhY3R1YWxRdWVyeUNvbmZpZ0lkKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICBldmVudDogJ2Ryb3Bkb3duLXF1ZXJ5LWluZGV4LW1pc21hdGNoJyxcbiAgICAgICAgICAgICAgZXhwZWN0ZWRRdWVyeUNvbmZpZ0lkLFxuICAgICAgICAgICAgICBhY3R1YWxRdWVyeUNvbmZpZ0lkLFxuICAgICAgICAgICAgICBleHBlY3RlZFF1ZXJ5SW5kZXgsXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgICAgICAgd2FybmluZzogJ1NlY29uZCBkcm9wZG93biBtYXkgbm90IGJlIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdkcm9wZG93bnMtc3luY2hyb25pemVkJyxcbiAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICAgICAgICBncm91cElkOiBleHBlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4OiBleHBlY3RlZFF1ZXJ5SW5kZXgsXG4gICAgICAgICAgICAgIG5vdGU6ICdEcm9wZG93bnMgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVbmdyb3VwZWQgcXVlcnkgLSB2ZXJpZnkgaXQncyBzZWxlY3RlZFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdkcm9wZG93bnMtc3luY2hyb25pemVkLXVuZ3JvdXBlZCcsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGV4cGVjdGVkU2hvcnRJZCxcbiAgICAgICAgbm90ZTogJ1VuZ3JvdXBlZCBxdWVyeSBkcm9wZG93biBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbaW5pdGlhbElucHV0VmFsdWUsIHF1ZXJ5SXRlbS5zaG9ydElkLCBxdWVyeUl0ZW0uZ3JvdXBJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBzZWxlY3RlZEdyb3VwSWQsIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LCBncm91cHNdKVxuXG4gIGNvbnN0IHVzZU91dHB1dERzOiBJbW11dGFibGVPYmplY3Q8VXNlRGF0YVNvdXJjZT4gPSBSZWFjdC51c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBJbW11dGFibGUoe1xuICAgICAgICBkYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWQsXG4gICAgICAgIG1haW5EYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRcbiAgICAgIH0pLFxuICAgIFtxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXVxuICApXG5cbiAgY29uc3QgdXBkYXRlRGF0YVNvdXJjZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChkcz86IERhdGFTb3VyY2UpID0+IHtcbiAgICBjb25zdCBjdXJyZW50RHMgPSBkcyA/PyBkYXRhU291cmNlXG4gICAgLy8gc2hvdWxkIGRpc2FibGUgc3BhdGlhbCBmaWx0ZXIgaWYgdGhlIGRhdGFTb3VyY2UgaXMgYW4gb3V0cHV0IGRzIGFuZCBpdCBhbHJlYWR5IGhhcyBzcGF0aWFsIGZpbHRlclxuICAgIGlmIChjdXJyZW50RHM/LmdldERhdGFTb3VyY2VKc29uKCk/LmlzT3V0cHV0RnJvbVdpZGdldCkge1xuICAgICAgY29uc3QgcURzOiBRdWVyaWFibGVEYXRhU291cmNlID0gY3VycmVudERzIGFzIFF1ZXJpYWJsZURhdGFTb3VyY2VcbiAgICAgIGNvbnN0IHFQYXJhbXMgPSBxRHMuZ2V0Q3VycmVudFF1ZXJ5UGFyYW1zPy4oKSBhcyBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtc1xuICAgICAgaWYgKHFQYXJhbXMuZ2VvbWV0cnkgIT0gbnVsbCkge1xuICAgICAgICBzZXRTcGF0aWFsRmlsdGVyRW5hYmxlZChmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFNwYXRpYWxGaWx0ZXJFbmFibGVkKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9LCBbZGF0YVNvdXJjZV0pXG5cbiAgY29uc3QgaGFuZGxlU3RhdHVzQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGVuYWJsZWQ6IGJvb2xlYW4pID0+IHtcbiAgICBzZXRFbmFibGVkKGVuYWJsZWQpXG4gICAgdXBkYXRlRGF0YVNvdXJjZSgpXG4gIH0sIFt1cGRhdGVEYXRhU291cmNlXSlcblxuICBjb25zdCBoYW5kbGVPdXRwdXREYXRhU291cmNlSW5mb0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChpbmZvLCBwcmVJbmZvKSA9PiB7XG4gICAgY29uc3Qgb3V0cHV0SWQgPSBxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXG4gICAgY29uc3QgZmlsdGVyID0gaW5mbz8ud2lkZ2V0UXVlcmllcyA/IGluZm8ud2lkZ2V0UXVlcmllc1tgc2V0RmlsdGVyLSR7b3V0cHV0SWR9YF0gOiBudWxsXG4gICAgaWYgKGZpbHRlciA9PSBudWxsKSB7IC8vIGZpbHRlciBpcyBudWxsIG1lYW5zIHRoZXJlIGFyZSBpbmNvbXBsZXRlIHF1ZXJpZXMsIGlnbm9yZSB0aGlzIGNoYW5nZVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHByZUZpbHRlciA9IHByZUluZm8/LndpZGdldFF1ZXJpZXMgPyBwcmVJbmZvLndpZGdldFF1ZXJpZXNbYHNldEZpbHRlci0ke291dHB1dElkfWBdIDogbnVsbFxuICAgIGlmIChmaWx0ZXI/LndoZXJlICE9PSBwcmVGaWx0ZXI/LndoZXJlKSB7XG4gICAgICBzZXREYXRhQWN0aW9uRmlsdGVyKGZpbHRlcilcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0ub3V0cHV0RGF0YVNvdXJjZUlkXSlcblxuICBjb25zdCBwdWJsaXNoRGF0YUNsZWFyZWRNc2cgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG4gICAgY29uc3QgZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UgPSBuZXcgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UocHJvcHMud2lkZ2V0SWQsIFJlY29yZFNldENoYW5nZVR5cGUuUmVtb3ZlLCBbb3V0cHV0RFMuaWRdKVxuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UpXG4gICAgYXdhaXQgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHByb3BzLndpZGdldElkLCBbXSwgW291dHB1dERTLmlkXSkpXG4gIH0sIFtwcm9wcy53aWRnZXRJZCwgb3V0cHV0RFNdKVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIHF1ZXJ5IHJlc3VsdHMgZnJvbSB0aGUgVUkgYW5kIG1hcC5cbiAgICogVGhpcyBpcyB0aGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCBmb3IgY2xlYXJpbmcgcmVzdWx0cy5cbiAgICogSXQgY2xlYXJzIHRoZSByZWNvcmRzLCByZXNldHMgdGhlIHJlc3VsdCBjb3VudCwgY2xlYXJzIHNlbGVjdGlvbiBmcm9tIHRoZSBtYXAsXG4gICAqIHB1Ymxpc2hlcyBhIGNsZWFyZWQgbWVzc2FnZSB0byB0aGUgbWFwLCBzd2l0Y2hlcyBiYWNrIHRvIHRoZSBRdWVyeSB0YWIsXG4gICAqIGFuZCBpbmNyZW1lbnRzIHRoZSBxdWVyeSBleGVjdXRpb24ga2V5IHRvIGZvcmNlIFF1ZXJ5VGFza1Jlc3VsdCB0byByZW1vdW50IHdpdGggZnJlc2ggc3RhdGUuXG4gICAqL1xuICBjb25zdCBjbGVhclJlc3VsdCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChyZWFzb246IHN0cmluZyA9ICd1bmtub3duJykgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTLFxuICAgICAgcmVhc29uLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIHJlY29yZHNSZWYuY3VycmVudCA9IG51bGxcbiAgICBvdXRwdXREUz8uc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gICAgc2V0UmVzdWx0Q291bnQoMClcbiAgICBcbiAgICAvLyBOT1RFOiBHcmFwaGljcyBsYXllciBjbGVhcmluZyBpcyBub3cgaGFuZGxlZCBpbnNpZGUgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzXG4gICAgLy8gY2FsbGVkIGJlbG93LiBXZSBlbnN1cmUgdGhpcyBpcyBhd2FpdGVkIHRvIHByZXZlbnQgcmFjZSBjb25kaXRpb25zLlxuICAgIFxuICAgIC8vIENsZWFyIHNlbGVjdGlvbiBkaXJlY3RseSBmcm9tIGRhdGEgc291cmNlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cbiAgICB0cnkge1xuICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKHByb3BzLndpZGdldElkLCBvdXRwdXREUywgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcilcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdC1zZWxlY3Rpb24tY2xlYXJlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHQtc2VsZWN0aW9uLWNsZWFyLWZhaWxlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhciB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3JkcyB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1jbGVhcmVkLW9uLWNsZWFyLXJlc3VsdHMnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWRcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIGF3YWl0IHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZygpXG4gICAgLy8gU3dpdGNoIGJhY2sgdG8gUXVlcnkgdGFiIHdoZW4gY2xlYXJpbmcgcmVzdWx0c1xuICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgIHNldFN0YWdlKDApXG4gICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBzZWxlY3Rpb24gZmxhZyB3aGVuIGNsZWFyaW5nXG4gICAgLy8gSW5jcmVtZW50IHF1ZXJ5IGV4ZWN1dGlvbiBrZXkgdG8gZm9yY2UgUXVlcnlUYXNrUmVzdWx0IHJlbW91bnQgd2l0aCBmcmVzaCBzdGF0ZVxuICAgIHF1ZXJ5RXhlY3V0aW9uS2V5UmVmLmN1cnJlbnQgKz0gMVxuICAgIC8vIENsZWFyIGVycm9yIHN0YXRlcyB3aGVuIGNsZWFyaW5nIHJlc3VsdHNcbiAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKVxuICAgIHNldFpvb21FcnJvcihudWxsKVxuXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdC1jb21wbGV0ZScsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbb3V0cHV0RFMsIHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZywgcHJvcHMud2lkZ2V0SWQsIHF1ZXJ5SXRlbS5jb25maWdJZCwgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXJdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGRhdGEgc291cmNlIGNyZWF0aW9uIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gcXVlcnkgaXRlbXMuXG4gICAqIFdoZW4gYSBuZXcgcXVlcnkgaXRlbSBpcyBzZWxlY3RlZCAoZS5nLiwgc3dpdGNoaW5nIGZyb20gUGFyY2VsIHRvIE1ham9yKSxcbiAgICogdGhpcyBjbGVhcnMgb2xkIHJlc3VsdHMgdG8gZW5zdXJlIGFsbCBjbGVhbnVwIGxvZ2ljIHJ1bnMgcHJvcGVybHkuXG4gICAqIFxuICAgKiBAcGFyYW0gZHMgLSBUaGUgbmV3bHkgY3JlYXRlZCBkYXRhIHNvdXJjZSBmb3IgdGhlIHNlbGVjdGVkIHF1ZXJ5IGl0ZW1cbiAgICovXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VDcmVhdGVkID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKGRzOiBEYXRhU291cmNlKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlQ3JlYXRlZC1zdGFydCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBJbiBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHByZXNlcnZlIGFjY3VtdWxhdGVkIHJlY29yZHMgYW5kIHNlbGVjdGlvbiAtIGRvbid0IGNsZWFyXG4gICAgaWYgKChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSBcbiAgICAgICAgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdwcmVzZXJ2aW5nLXNlbGVjdGlvbi1vbi1xdWVyeS1zd2l0Y2gtaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgc2V0RGF0YVNvdXJjZShkcylcbiAgICAgIHVwZGF0ZURhdGFTb3VyY2UoZHMpXG4gICAgICBzZXRTdGFnZSgwKVxuICAgICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgICByZXR1cm4gLy8gU2tpcCBjbGVhcmluZyAtIHByZXNlcnZlIHNlbGVjdGlvblxuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBjbGVhciBvbGQgcmVzdWx0c1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQtY2xlYXJpbmctcmVzdWx0cy1mb3ItbmV3LW1vZGUnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBhd2FpdCBjbGVhclJlc3VsdCgnaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQtbmV3LW1vZGUnKVxuXG4gICAgc2V0RGF0YVNvdXJjZShkcylcbiAgICB1cGRhdGVEYXRhU291cmNlKGRzKVxuICAgIHNldFN0YWdlKDApXG4gICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpIC8vIFJldHVybiB0byBRdWVyeSB0YWIgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICB9LCBbdXBkYXRlRGF0YVNvdXJjZSwgY2xlYXJSZXN1bHQsIHJlc3VsdENvdW50LCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBwcm9wcy53aWRnZXRJZF0pXG5cbiAgY29uc3QgaGFuZGxlT3V0cHV0RGF0YVNvdXJjZUNyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoZHM6IERhdGFTb3VyY2UpID0+IHtcbiAgICBzZXRPdXRwdXREUyhkcylcbiAgICBcbiAgICAvLyBDSEVDSyByb290RGF0YVNvdXJjZS5tYXAgdG8gc2VlIGhvdyBmcmFtZXdvcmsgYWNjZXNzZXMgbWFwIHZpZXdcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3JpZ2luRGF0YVNvdXJjZXMgPSBkcy5nZXRPcmlnaW5EYXRhU291cmNlcygpXG4gICAgICBjb25zdCBvcmlnaW5EUyA9IG9yaWdpbkRhdGFTb3VyY2VzPy5bMF1cbiAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICBjb25zdCByb290RFMgPSBvcmlnaW5EUy5nZXRSb290RGF0YVNvdXJjZSgpXG4gICAgICAgIGlmIChyb290RFMpIHtcbiAgICAgICAgICAvLyBFeHBvc2Ugcm9vdERTIHRvIHdpbmRvdyBmb3IgY29uc29sZSBpbnNwZWN0aW9uXG4gICAgICAgICAgOyh3aW5kb3cgYXMgYW55KS5fX3F1ZXJ5U2ltcGxlUm9vdERTID0gcm9vdERTXG4gICAgICAgICAgOyh3aW5kb3cgYXMgYW55KS5fX3F1ZXJ5U2ltcGxlUm9vdERTTWFwID0gKHJvb3REUyBhcyBhbnkpLm1hcFxuICAgICAgICAgIDsod2luZG93IGFzIGFueSkuX19xdWVyeVNpbXBsZU9yaWdpbkRTID0gb3JpZ2luRFNcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjaGVjay1yb290LWRhdGFzb3VyY2UtbWFwJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIG91dHB1dERTSWQ6IGRzLmlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICByb290RFNJZDogcm9vdERTLmlkLFxuICAgICAgICAgICAgcm9vdERTVHlwZTogcm9vdERTLnR5cGUsXG4gICAgICAgICAgICBoYXNSb290RFNNYXA6ICEhKHJvb3REUyBhcyBhbnkpLm1hcCxcbiAgICAgICAgICAgIHJvb3REU01hcFR5cGU6IChyb290RFMgYXMgYW55KS5tYXAgPyB0eXBlb2YgKHJvb3REUyBhcyBhbnkpLm1hcCA6ICdub25lJyxcbiAgICAgICAgICAgIHJvb3REU01hcElkOiAocm9vdERTIGFzIGFueSkubWFwPy5pZCB8fCAnbm9uZScsXG4gICAgICAgICAgICBoYXNSb290RFNNYXBWaWV3OiAhIShyb290RFMgYXMgYW55KS5tYXA/LnZpZXcsXG4gICAgICAgICAgICBoYXNSb290RFNNYXBWaWV3czogISEocm9vdERTIGFzIGFueSkubWFwPy52aWV3cyxcbiAgICAgICAgICAgIHJvb3REU01hcFZpZXdzTGVuZ3RoOiAocm9vdERTIGFzIGFueSkubWFwPy52aWV3cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAvLyBMb2cgc29tZSBtYXAgcHJvcGVydGllcyBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIHJvb3REU01hcEtleXM6IChyb290RFMgYXMgYW55KS5tYXAgPyBPYmplY3Qua2V5cygocm9vdERTIGFzIGFueSkubWFwKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAgICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgICAgICAgICAgdHlwZW9mIChyb290RFMgYXMgYW55KS5tYXBba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgKS5zbGljZSgwLCAyMCkgOiBbXSxcbiAgICAgICAgICAgIC8vIExvZyB0aGF0IG9iamVjdHMgYXJlIGF2YWlsYWJsZSBvbiB3aW5kb3cgZm9yIGNvbnNvbGUgaW5zcGVjdGlvblxuICAgICAgICAgICAgY29uc29sZUluc3BlY3Rpb246ICdDaGVjayB3aW5kb3cuX19xdWVyeVNpbXBsZVJvb3REUywgd2luZG93Ll9fcXVlcnlTaW1wbGVSb290RFNNYXAsIHdpbmRvdy5fX3F1ZXJ5U2ltcGxlT3JpZ2luRFMnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJZiBtYXAgZXhpc3RzLCBjaGVjayBpdHMgdmlld1xuICAgICAgICAgIGNvbnN0IHJvb3RNYXAgPSAocm9vdERTIGFzIGFueSkubWFwXG4gICAgICAgICAgaWYgKHJvb3RNYXApIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSByb290TWFwLnZpZXcgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIChyb290TWFwLnZpZXdzPy5sZW5ndGggPiAwID8gcm9vdE1hcC52aWV3c1swXSA6IG51bGwpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnY2hlY2stcm9vdC1kYXRhc291cmNlLW1hcC12aWV3JyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBoYXNWaWV3OiAhIXZpZXcsXG4gICAgICAgICAgICAgIHZpZXdUeXBlOiB2aWV3Py50eXBlIHx8ICdub25lJyxcbiAgICAgICAgICAgICAgdmlld0lkOiB2aWV3Py5pZCB8fCAnbm9uZScsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjaGVjay1yb290LWRhdGFzb3VyY2UtbWFwLWVycm9yJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSBncmFwaGljcyBsYXllciBsYXppbHkgaWYgZW5hYmxlZCBhbmQgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWRcbiAgICBpZiAodXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyKSB7XG4gICAgICBhd2FpdCBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyKGRzKVxuICAgICAgLy8gQWZ0ZXIgaW5pdGlhbGl6YXRpb24sIGdyYXBoaWNzTGF5ZXIgYW5kIG1hcFZpZXcgcHJvcHMgc2hvdWxkIGJlIHVwZGF0ZWRcbiAgICAgIC8vIEJ1dCBzaW5jZSBwcm9wcyBjb21lIGZyb20gcmVmcywgd2UgbmVlZCB0byB3YWl0IGZvciB3aWRnZXQgcmUtcmVuZGVyXG4gICAgICAvLyBGb3Igbm93LCB1c2UgdGhlIHByb3BzIHRoYXQgd2lsbCBiZSB1cGRhdGVkIG9uIG5leHQgcmVuZGVyXG4gICAgfVxuICAgIFxuICAgIC8vIElmIGluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUgYW5kIHdlIGhhdmUgYWNjdW11bGF0ZWQgcmVjb3JkcywgcmUtc2VsZWN0IHRoZW1cbiAgICAvLyBUaGlzIHVzZXMgdGhlIHNhbWUgbG9naWMgYXMgYWZ0ZXIgcXVlcnkgY29tcGxldGlvbiAtIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoXG4gICAgLy8gVGhpcyBlbnN1cmVzIHJlY29yZHMgYXJlIHNlbGVjdGVkIGJvdGggb24gdGhlIG1hcCBhbmQgaW4gdGhlIFJlc3VsdHMgdGFiXG4gICAgaWYgKChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSBcbiAgICAgICAgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBVc2UgYSBkZWxheSB0byBlbnN1cmUgdGhlIERTIGlzIGZ1bGx5IHJlYWR5IGFuZCBncmFwaGljcyBsYXllciBwcm9wcyBhcmUgdXBkYXRlZCBhZnRlciB3aWRnZXQgcmUtcmVuZGVyXG4gICAgICAvLyBJZiBncmFwaGljcyBsYXllciB3YXMganVzdCBpbml0aWFsaXplZCwgd2FpdCBhIGJpdCBsb25nZXIgZm9yIHByb3BzIHRvIHVwZGF0ZVxuICAgICAgY29uc3QgZGVsYXkgPSAodXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyKSA/IDIwMCA6IDEwMFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVEUyA9IGRzIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgICAgaWYgKGZlYXR1cmVEUyAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCByZWNvcmRJZHMgPSBhY2N1bXVsYXRlZFJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgICAgICAvLyBVc2UgdGhlIHNhbWUgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggdGhhdCdzIHVzZWQgYWZ0ZXIgcXVlcnkgY29tcGxldGlvblxuICAgICAgICAgIC8vIFRoaXMgd2lsbCBzZWxlY3QgcmVjb3JkcyBvbiB0aGUgbWFwIGFuZCB0cmlnZ2VyIGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlXG4gICAgICAgICAgLy8gaW4gcXVlcnktcmVzdWx0LnRzeCB0byB1cGRhdGUgc2VsZWN0ZWRSZWNvcmRzIHN0YXRlIGZvciB0aGUgUmVzdWx0cyB0YWJcbiAgICAgICAgICAvLyBVc2UgZ3JhcGhpY3MgbGF5ZXIgaWYgZW5hYmxlZCAocHJvcHMgc2hvdWxkIGJlIHVwZGF0ZWQgYWZ0ZXIgd2lkZ2V0IHJlLXJlbmRlcilcbiAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIGZlYXR1cmVEUyxcbiAgICAgICAgICAgICAgICAgIHJlY29yZElkcyxcbiAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXIsXG4gICAgICAgICAgICAgICAgICBtYXBWaWV3XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcmVjb3Jkc1JlZiBzbyByZXN1bHRzIHRhYiBzaG93cyBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgICAgcmVjb3Jkc1JlZi5jdXJyZW50ID0gYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgICAgICAgc2V0UmVzdWx0Q291bnQoYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAncmUtc2VsZWN0ZWQtYWNjdW11bGF0ZWQtcmVjb3Jkcy1hZnRlci1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogZmVhdHVyZURTLmlkLFxuICAgICAgICAgICAgICAgICAgcmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZnkgd2hhdCdzIGFjdHVhbGx5IHNlbGVjdGVkIGluIHRoZSBEUyBhZnRlciBhIGRlbGF5XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBkcyA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShmZWF0dXJlRFMuaWQpXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZEluRFMgPSBkcz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSWRzSW5EUyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZElkcygpID8/IFtdXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogJ3ZlcmlmeS1yZWNvcmRzLWFmdGVyLXJlc2VsZWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBmZWF0dXJlRFMuaWQsXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbFNlbGVjdGVkSW5EUzogc2VsZWN0ZWRJbkRTPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJZHNJbkRTOiBzZWxlY3RlZElkc0luRFMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRzTWF0Y2g6IHNlbGVjdGVkSW5EUz8ubGVuZ3RoID09PSBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sIDIwMClcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAncmUtc2VsZWN0aW9uLWZhaWxlZC1hZnRlci1zd2l0Y2gnLFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkoKVxuICAgICAgICB9XG4gICAgICB9LCAxMDApXG4gICAgfVxuICB9LCBbcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcHJvcHMud2lkZ2V0SWQsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJdKVxuXG4gIC8vIENsZWFyIHJlc3VsdHMgd2hlbiBxdWVyeSBpdGVtIGNoYW5nZXMgKGUuZy4sIHdoZW4gbmV3IGhhc2ggcGFyYW1ldGVyIHRyaWdnZXJzIGRpZmZlcmVudCBxdWVyeSlcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IGNsZWFyIGlmIHdlJ3JlIGFjdHVhbGx5IHN3aXRjaGluZyB0byBhIGRpZmZlcmVudCBxdWVyeSAobm90IGp1c3QgcmUtcmVuZGVyaW5nKVxuICAgIGNvbnN0IGlzU3dpdGNoaW5nUXVlcmllcyA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCAhPT0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgXG4gICAgLy8gT25seSBjbGVhciByZXN1bHRzIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXMgaWYgd2UncmUgaW4gXCJOZXdcIiBtb2RlXG4gICAgLy8gSW4gXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB3ZSB3YW50IHRvIHByZXNlcnZlIGFjY3VtdWxhdGVkIHJlY29yZHMgYWNyb3NzIHF1ZXJ5IHN3aXRjaGVzXG4gICAgaWYgKGlzU3dpdGNoaW5nUXVlcmllcyAmJiByZXN1bHRDb3VudCA+IDAgJiYgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAvLyBTdG9yZSB0aGUgb2xkIGNvbmZpZ0lkIGJlZm9yZSB1cGRhdGluZ1xuICAgICAgY29uc3Qgb2xkQ29uZmlnSWQgPSBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnRcbiAgICAgIC8vIFVwZGF0ZSB0aGUgcmVmIHRvIHRyYWNrIHRoZSBuZXcgcXVlcnlcbiAgICAgIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhcmluZy1yZXN1bHRzLW9uLXF1ZXJ5LXN3aXRjaC1uZXctbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgb2xkQ29uZmlnSWQsXG4gICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHJlc3VsdHNNb2RlXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBDbGVhciBpbW1lZGlhdGVseSB3aGVuIHN3aXRjaGluZyBxdWVyaWVzLCBidXQgd3JhcCBpbiB0cnktY2F0Y2ggdG8gaGFuZGxlXG4gICAgICAvLyByYWNlIGNvbmRpdGlvbnMgd2l0aCBmZWF0dXJlIGluZm8gd2luZG93cyB0aGF0IG1pZ2h0IGJlIHJlbmRlcmluZ1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2xlYXJSZXN1bHQoJ3F1ZXJ5LWl0ZW0tc3dpdGNoLW5ldy1tb2RlJylcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIExvZyBmb3IgZGVidWdnaW5nIGJ1dCBkb24ndCBzaG93IHRvIHVzZXIgKGZyYW1ld29yayByYWNlIGNvbmRpdGlvbilcbiAgICAgICAgLy8gVGhlIGVycm9yIGlzIGluIGZyYW1ld29yayBjb2RlIChmZWF0dXJlLWluZm8udHN4KSwgbm90IG91ciBjb2RlXG4gICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiBmZWF0dXJlLWluZm8udHN4IGlzIHRyeWluZyB0byBhcHBlbmRDaGlsZCB0byBhIERPTSBlbGVtZW50XG4gICAgICAgIC8vIHRoYXQgZ2V0cyByZW1vdmVkIHdoZW4gd2UgY2xlYXIgc2VsZWN0aW9uXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ2NsZWFyLXJlc3VsdC1yYWNlLWNvbmRpdGlvbicsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBub3RlOiAnTGlrZWx5IHJhY2UgY29uZGl0aW9uIHdpdGggZmVhdHVyZS1pbmZvLnRzeCdcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBjbGVhcmluZyByZXN1bHRzIChsaWtlbHkgcmFjZSBjb25kaXRpb24gd2l0aCBmZWF0dXJlIGluZm8pOicsIGVycm9yKVxuICAgICAgICB9XG4gICAgICAgIC8vIERvbid0IHNldCBlcnJvciBzdGF0ZSAtIHRoaXMgaXMgZXhwZWN0ZWQgaW4gc29tZSBzY2VuYXJpb3NcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzU3dpdGNoaW5nUXVlcmllcykge1xuICAgICAgLy8gSnVzdCB1cGRhdGUgdGhlIHJlZiAtIGRvbid0IGNsZWFyIHJlc3VsdHMgaWYgaW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSBvciBubyByZXN1bHRzXG4gICAgICBwcmV2aW91c0NvbmZpZ0lkUmVmLmN1cnJlbnQgPSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwcmVzZXJ2aW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtb24tcXVlcnktc3dpdGNoJyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgICAgb2xkQ29uZmlnSWQ6IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCxcbiAgICAgICAgICBuZXdDb25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LCBbcXVlcnlJdGVtLmNvbmZpZ0lkLCBjbGVhclJlc3VsdCwgcmVzdWx0Q291bnQsIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIHByb3BzLndpZGdldElkXSlcblxuICBjb25zdCBuYXZUb0Zvcm0gPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoY2xlYXJSZXN1bHRzID0gZmFsc2UpID0+IHtcbiAgICBpZiAoY2xlYXJSZXN1bHRzKSB7XG4gICAgICAvLyBVc2UgdGhlIGNlbnRyYWxpemVkIGNsZWFyUmVzdWx0IG1ldGhvZCBpbnN0ZWFkIG9mIGR1cGxpY2F0aW5nIGxvZ2ljXG4gICAgICBhd2FpdCBjbGVhclJlc3VsdCgnbmF2VG9Gb3JtLWNsZWFyUmVzdWx0cycpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgLy8gU3dpdGNoIHRvIHF1ZXJ5IHRhYiBidXQgZG9uJ3QgY2xlYXIgcmVzdWx0cyB1bmxlc3MgZXhwbGljaXRseSByZXF1ZXN0ZWRcbiAgICAvLyBNYXJrIGFzIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gdHJ1ZVxuICAgIHNldEFjdGl2ZVRhYigncXVlcnknKVxuICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50ID0gZmFsc2VcbiAgICB9LCAxMDApXG4gICAgLy8gT25seSBjaGFuZ2Ugc3RhZ2UgaWYgd2UncmUgY2xlYXJpbmcgcmVzdWx0c1xuICAgIC8vIE90aGVyd2lzZSwga2VlcCBzdGFnZSBhdCAxIChyZXN1bHRzIGF2YWlsYWJsZSkgc28gcmVzdWx0cyBwZXJzaXN0XG4gICAgaWYgKCFjbGVhclJlc3VsdHMgJiYgcmVzdWx0Q291bnQgPiAwKSB7XG4gICAgICBzZXRTdGFnZSgxKSAvLyBLZWVwIHJlc3VsdHMgYXZhaWxhYmxlXG4gICAgfVxuICAgIGxvZGFzaC5kZWZlcigoKSA9PiB7XG4gICAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gICAgfSlcbiAgfSwgW2NsZWFyUmVzdWx0LCByZXN1bHRDb3VudF0pXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGFiIHN3aXRjaGluZyBiZXR3ZWVuIFF1ZXJ5IGFuZCBSZXN1bHRzIHRhYnMuXG4gICAqIFRhYiBzd2l0Y2hpbmcgcHJlc2VydmVzIHJlc3VsdHMgc3RhdGUgLSByZXN1bHRzIHJlbWFpbiB2aXNpYmxlIGFuZCBzZWxlY3RlZFxuICAgKiB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHRhYnMuIFJlc3VsdHMgYXJlIG9ubHkgY2xlYXJlZCB3aGVuIGV4cGxpY2l0bHlcbiAgICogY2xpY2tpbmcgdGhlIHRyYXNoIGNhbiBidXR0b24gb3Igd2hlbiBzdGFydGluZyBhIG5ldyBxdWVyeS5cbiAgICogXG4gICAqIEBwYXJhbSB0YWIgLSBUaGUgdGFiIHRvIHN3aXRjaCB0byAoJ3F1ZXJ5JyB8ICdyZXN1bHRzJylcbiAgICogQHBhcmFtIGV2ZW50IC0gT3B0aW9uYWwgbW91c2UgZXZlbnQgdG8gcHJldmVudCBkZWZhdWx0IGJlaGF2aW9yXG4gICAqL1xuICBjb25zdCBoYW5kbGVUYWJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygodGFiOiAncXVlcnknIHwgJ3Jlc3VsdHMnLCBldmVudD86IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ3RhYi1jaGFuZ2UnLFxuICAgICAgdGFiLFxuICAgICAgY3VycmVudFRhYjogYWN0aXZlVGFiLFxuICAgICAgcmVzdWx0Q291bnQsXG4gICAgICBldmVudFR5cGU6IGV2ZW50Py50eXBlXG4gICAgfSlcbiAgICBcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgfVxuICAgIC8vIERvbid0IGFsbG93IHN3aXRjaGluZyB0byByZXN1bHRzIGlmIHRoZXJlIGFyZSBubyByZXN1bHRzXG4gICAgaWYgKHRhYiA9PT0gJ3Jlc3VsdHMnICYmIHJlc3VsdENvdW50ID09PSAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAndGFiLWNoYW5nZS1ibG9ja2VkJyxcbiAgICAgICAgcmVhc29uOiAnbm8tcmVzdWx0cycsXG4gICAgICAgIHRhYixcbiAgICAgICAgcmVzdWx0Q291bnRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gTWFyayB0aGlzIGFzIGEgbWFudWFsIHN3aXRjaCB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgc2V0QWN0aXZlVGFiKHRhYilcbiAgICBcbiAgICAvLyBSZXNldCB0aGUgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IHRoZSBzdGF0ZSB1cGRhdGUgdG8gY29tcGxldGVcbiAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbW1lZGlhdGVseSBzd2l0Y2hpbmcgYmFja1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIH0sIDEwMClcbiAgICBcbiAgICAvLyBEb24ndCBjaGFuZ2Ugc3RhZ2UgaGVyZSAtIGp1c3Qgc3dpdGNoIHRoZSB2aWV3XG4gICAgLy8gU3RhZ2Ugc2hvdWxkIHJlbWFpbiBhdCAxIChyZXN1bHRzIGF2YWlsYWJsZSkgd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiB0YWJzXG4gIH0sIFtyZXN1bHRDb3VudCwgYWN0aXZlVGFiXSlcblxuICAvKipcbiAgICogSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgaGFuZGxlRm9ybVN1Ym1pdCAod2l0aG91dCB3YWl0aW5nIGxvZ2ljKVxuICAgKiBUaGlzIGlzIGNhbGxlZCBlaXRoZXIgZGlyZWN0bHkgb3IgYWZ0ZXIgaGFzaCB2YWx1ZSBjb252ZXJzaW9uXG4gICAqIFxuICAgKiBAcGFyYW0gc3FsRXhwciAtIFRoZSBTUUwgZXhwcmVzc2lvbiBmb3IgYXR0cmlidXRlIGZpbHRlcmluZ1xuICAgKiBAcGFyYW0gc3BhdGlhbEZpbHRlciAtIFRoZSBzcGF0aWFsIGZpbHRlciBvYmplY3RcbiAgICogQHBhcmFtIHJ1bnRpbWVab29tVG9TZWxlY3RlZCAtIE9wdGlvbmFsIHJ1bnRpbWUgb3ZlcnJpZGUgZm9yIHpvb20tdG8tc2VsZWN0ZWQgYmVoYXZpb3JcbiAgICovXG4gIGNvbnN0IGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24sIHNwYXRpYWxGaWx0ZXI6IFNwYXRpYWxGaWx0ZXJPYmosIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW4pID0+IHtcbiAgICAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnMgd2hlbiBzdGFydGluZyBhIG5ldyBxdWVyeVxuICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpXG4gICAgc2V0Wm9vbUVycm9yKG51bGwpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWwtZXhlY3V0aW5nJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIFN0b3JlIHRoZSBydW50aW1lIHpvb20gb3ZlcnJpZGUgZm9yIHVzZSBieSBBZGQgdG8gTWFwIGFjdGlvblxuICAgIGxhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYuY3VycmVudCA9IHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuICAgIFxuICAgIGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmouY3VycmVudCA9IHNxbEV4cHJcbiAgICBzcGF0aWFsRmlsdGVyT2JqLmN1cnJlbnQgPSBzcGF0aWFsRmlsdGVyXG4gICAgLy8gTG9hZCB0aGUgZmlyc3QgcGFnZVxuICAgIGNvbnN0IGZlYXR1cmVEUyA9IG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICAvLyBGb3IgXCJBZGQgdG9cIiBhbmQgXCJSZW1vdmUgZnJvbVwiIG1vZGVzLCB1c2Ugd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAvLyBUaGVzZSBwZXJzaXN0IGFjcm9zcyBxdWVyeSBzd2l0Y2hlcywgdW5saWtlIHF1ZXJ5LWl0ZW0tbGV2ZWwgcmVjb3Jkc1xuICAgIGxldCBleGlzdGluZ1JlY29yZHNGb3JNZXJnZTogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgIC8vIFJvYnVzdCBjYXB0dXJlIHN0cmF0ZWd5OlxuICAgICAgLy8gMS4gVHJ5IHJlY29yZHMgZnJvbSBwcm9wcyAoYWxyZWFkeSBtZXJnZWQgYnkgcGFyZW50KVxuICAgICAgLy8gMi4gRmFsbGJhY2sgdG8gY3VycmVudGx5IHNlbGVjdGVkIHJlY29yZHMgaW4gRFMgKGNhcHR1cmVkIGR1cmluZyBtb2RlIHN3aXRjaClcbiAgICAgIGNvbnN0IGZyb21Qcm9wID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICBjb25zdCBmcm9tRFMgPSBvdXRwdXREUz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXVxuICAgICAgXG4gICAgICBleGlzdGluZ1JlY29yZHNGb3JNZXJnZSA9IGZyb21Qcm9wLmxlbmd0aCA+IDAgPyBmcm9tUHJvcCA6IGZyb21EU1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdjYXB0dXJlZC1leGlzdGluZy1yZWNvcmRzLWRpYWdub3N0aWMnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBmcm9tUHJvcENvdW50OiBmcm9tUHJvcC5sZW5ndGgsXG4gICAgICAgIGZyb21EU0NvdW50OiBmcm9tRFMubGVuZ3RoLFxuICAgICAgICBmaW5hbENhcHR1cmVkQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgZmlyc3RSZWNvcmRJZDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2VbMF0/LmdldElkPy4oKSB8fCAnbm9uZScsXG4gICAgICAgIGFsbFJlY29yZElkczogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubWFwKHIgPT4gci5nZXRJZD8uKCkpLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgb2xkIHJlc3VsdHMgYW5kIGdyYXBoaWNzIGxheWVyXG4gICAgLy8gV2UgY2FsbCBjbGVhclJlc3VsdCgpIGRpcmVjdGx5IGFuZCBBV0FJVCBpdCB0byBlbnN1cmUgaXQncyBmaW5pc2hlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIHN0YXJ0c1xuICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWNsZWFyaW5nLXJlc3VsdHMtZm9yLW5ldy1tb2RlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBhd2FpdCBjbGVhclJlc3VsdCgnaGFuZGxlRm9ybVN1Ym1pdC1uZXctbW9kZScpXG4gICAgfVxuICAgIFxuICAgIC8vIFNldCBsb2FkaW5nIHN0YWdlXG4gICAgc2V0U3RhZ2UoMilcbiAgICBcbiAgICAvLyBGT1JDRUQ6IEFsd2F5cyB1c2UgU2ltcGxlTGlzdCAtIGZldGNoIEFMTCByZWNvcmRzLCBub3QganVzdCBhIHBhZ2VcbiAgICAvLyBVc2UgZGF0YSBzb3VyY2UncyBtYXggcmVjb3JkIGNvdW50LCBvciBmYWxsIGJhY2sgdG8gYSBsYXJnZSBudW1iZXIgKDEwMDAwKVxuICAgIGNvbnN0IG1heFJlY29yZENvdW50ID0gKGZlYXR1cmVEUyBhcyBhbnkpLmdldE1heFJlY29yZENvdW50Py4oKSA/PyAxMDAwMFxuICAgIGxldCBwYWdlU2l6ZSA9IG1heFJlY29yZENvdW50XG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSBnZW5lcmF0ZVF1ZXJ5UGFyYW1zKGZlYXR1cmVEUywgc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgY3VycmVudEl0ZW0sIDEsIHBhZ2VTaXplKVxuICAgIHF1ZXJ5UGFyYW1SZWYuY3VycmVudCA9IHF1ZXJ5UGFyYW1zXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWV4ZWN1dGluZy1xdWVyeScsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICB3aGVyZTogcXVlcnlQYXJhbXMud2hlcmUsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgLy8gQ2hhbmdlIG91dHB1dCBkcyBzdGF0dXMgdG8gdW5sb2FkZWQgYmVmb3JlIHVzZSBpdCB0byBsb2FkIGNvdW50L3JlY29yZHMuXG4gICAgZmVhdHVyZURTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLlVubG9hZGVkKVxuICAgIGZlYXR1cmVEUy5zZXRDb3VudFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLlVubG9hZGVkKVxuICAgIGxldCBxdWVyeVJlc3VsdENvdW50ID0gMCAvLyBDYXB0dXJlIGNvdW50IGZyb20gcmVjb3JkcyB0byB1c2UgaW4gZmluYWxseSBibG9ja1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdwZXJmLXF1ZXJ5LWNoYWluLXN0YXJ0JyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgd2hlcmU6IHF1ZXJ5UGFyYW1zLndoZXJlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogUmVtb3ZlZCByZWR1bmRhbnQgZXhlY3V0ZUNvdW50UXVlcnkoKSByb3VuZC10cmlwLlxuICAgIC8vIFNpbmNlIHdlIGZldGNoIEFMTCByZWNvcmRzIChwYWdlU2l6ZSA9IG1heFJlY29yZENvdW50KSwgd2UgY2FuIGp1c3QgdXNlIHJlY29yZHMubGVuZ3RoLlxuICAgIGZlYXR1cmVEUy51cGRhdGVRdWVyeVBhcmFtcyhxdWVyeVBhcmFtUmVmLmN1cnJlbnQsIHByb3BzLndpZGdldElkKVxuICAgIFxuICAgIGNvbnN0IGZldGNoU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBleGVjdXRlUXVlcnkocHJvcHMud2lkZ2V0SWQsIHF1ZXJ5SXRlbSwgZmVhdHVyZURTLCBxdWVyeVBhcmFtUmVmLmN1cnJlbnQpXG4gICAgICAudGhlbihhc3luYyAocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZldGNoRHVyYXRpb25NcyA9IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBmZXRjaFN0YXJ0VGltZSlcbiAgICAgICAgY29uc3QgcHJvY2Vzc2luZ1N0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICAgIFxuICAgICAgICBxdWVyeVJlc3VsdENvdW50ID0gcmVzdWx0LnJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3F1ZXJ5LWV4ZWN1dGlvbi1jb21wbGV0ZScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHJlY29yZHNSZXR1cm5lZDogcXVlcnlSZXN1bHRDb3VudCxcbiAgICAgICAgICBmZXRjaER1cmF0aW9uTXMsXG4gICAgICAgICAgZXhpc3RpbmdDYXB0dXJlZENvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG5cbiAgICAgICAgbGV0IHJlY29yZHNUb0Rpc3BsYXkgPSByZXN1bHQucmVjb3JkcyB8fCBbXVxuICAgICAgICBsZXQgZHNUb1VzZSA9IG91dHB1dERTXG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgXCJBZGQgdG9cIiBtb2RlOiBtZXJnZSBuZXcgcmVzdWx0cyB3aXRoIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiAmJiByZXN1bHQucmVjb3JkcyAmJiByZXN1bHQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FkZC1tb2RlLXN0YXJ0aW5nLW1lcmdlLWRpYWdub3N0aWMnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGV4aXN0aW5nQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdJZHM6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLm1hcChyID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgICAgbmV3Q291bnQ6IHJlc3VsdC5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgbmV3SWRzOiByZXN1bHQucmVjb3Jkcy5tYXAoKHI6IGFueSkgPT4gci5nZXRJZD8uKCkpLnNsaWNlKDAsIDUpLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBNZXJnZSBuZXcgcXVlcnkgcmVzdWx0cyB3aXRoIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICBjb25zdCBtZXJnZWRSZWNvcmRzID0gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCAvLyBVc2Ugb3V0cHV0RFMgZm9yIGtleSBnZW5lcmF0aW9uXG4gICAgICAgICAgICAgIHJlc3VsdC5yZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgIGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlIC8vIFVzZSBjb25zaXN0ZW50bHkgY2FwdHVyZWQgcmVjb3Jkc1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gbWVyZ2VkUmVjb3Jkc1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHMgc28gdGhleSBwZXJzaXN0IGFjcm9zcyBxdWVyeSBzd2l0Y2hlc1xuICAgICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKG1lcmdlZFJlY29yZHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FkZC1tb2RlLW1lcmdlLWNvbXBsZXRlLWRpYWdub3N0aWMnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIG1lcmdlZElkczogbWVyZ2VkUmVjb3Jkcy5tYXAociA9PiByLmdldElkPy4oKSkuc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ2FkZC1tb2RlLWVycm9yJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byBub3JtYWwgYmVoYXZpb3Igb24gZXJyb3JcbiAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSByZXN1bHQucmVjb3Jkc1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAgICAgLy8gSGFuZGxlIFwiUmVtb3ZlIGZyb21cIiBtb2RlOiByZW1vdmUgbWF0Y2hpbmcgcmVjb3JkcyBmcm9tIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLXN0YXJ0aW5nLW1lcmdlJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBleGlzdGluZ0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgIHJlbW92ZUNvdW50OiByZXN1bHQucmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFjY3VtdWxhdGVkIHJlY29yZHMgdG8gcmVtb3ZlIGZyb21cbiAgICAgICAgICAgIGlmIChleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgcXVlcnlSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICBub3RlOiAnTm8gYWNjdW11bGF0ZWQgcmVjb3JkcyB0byByZW1vdmUgZnJvbSAtIG5vLW9wJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAvLyBObyBhY2N1bXVsYXRlZCByZWNvcmRzLCBzbyBub3RoaW5nIHRvIHJlbW92ZSAtIHNob3cgZW1wdHkgcmVzdWx0c1xuICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gW11cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnJlY29yZHMgJiYgcmVzdWx0LnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAvLyBSZW1vdmUgbWF0Y2hpbmcgcmVjb3JkcyBmcm9tIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nUmVjb3JkcyA9IHJlbW92ZVJlc3VsdHNGcm9tQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgLy8gVXNlIG91dHB1dERTIGZvciBrZXkgZ2VuZXJhdGlvblxuICAgICAgICAgICAgICAgIHJlc3VsdC5yZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UgLy8gVXNlIGNvbnNpc3RlbnRseSBjYXB0dXJlZCByZWNvcmRzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSByZW1haW5pbmdSZWNvcmRzXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBVcGRhdGUgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UocmVtYWluaW5nUmVjb3JkcylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHJlY29yZHMgZnJvbSBvcmlnaW4gZGF0YSBzb3VyY2Ugc2VsZWN0aW9ucyAobWFwIGhpZ2hsaWdodGluZylcbiAgICAgICAgICAgICAgLy8gQWxzbyByZW1vdmVzIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gICAgICAgICAgICAgIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucyhcbiAgICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICByZXN1bHQucmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtY29tcGxldGUnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcXVlcnlSZWNvcmRzQ291bnQ6IHJlc3VsdC5yZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHJlY29yZHNSZW1vdmVkOiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGggLSByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgICAgICAgICB3aWRnZXRMZXZlbFJlY29yZHNVcGRhdGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG9yaWdpblNlbGVjdGlvbnNVcGRhdGVkOiB0cnVlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBJZiBhbGwgcmVjb3JkcyByZW1vdmVkLCBhdXRvLWNsZWFyIChjb25zaXN0ZW50IHdpdGggdXNlciBleHBlY3RhdGlvbilcbiAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWFsbC1yZWNvcmRzLXJlbW92ZWQnLFxuICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgbm90ZTogJ0FsbCBhY2N1bXVsYXRlZCByZWNvcmRzIHJlbW92ZWQgLSBhdXRvLWNsZWFyaW5nJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUXVlcnkgcmV0dXJuZWQgbm8gcmVzdWx0cyAtIG5vdGhpbmcgdG8gcmVtb3ZlXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtbm8tcXVlcnktcmVzdWx0cycsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBub3RlOiAnUXVlcnkgcmV0dXJuZWQgbm8gcmVzdWx0cyAtIG5vIHJlY29yZHMgdG8gcmVtb3ZlJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAvLyBLZWVwIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgZGlzcGxheWVkXG4gICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgPSBleGlzdGluZ1JlY29yZHNGb3JNZXJnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1lcnJvcicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gc2hvd2luZyBxdWVyeSByZXN1bHRzIG9uIGVycm9yXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVzdWx0LnJlY29yZHMgfHwgW11cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgY2xlYXIgd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICBpZiAob25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKFtdKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmVjb3Jkc1JlZi5jdXJyZW50ID0gcmVjb3Jkc1RvRGlzcGxheVxuICAgICAgICAvLyBSZXNldCBzZWxlY3Rpb24gZmxhZyBmb3IgbmV3IHF1ZXJ5IHJlc3VsdHNcbiAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICBcbiAgICAgICAgLy8gU2VsZWN0IHJlY29yZHMgaW4gdGhlIG91dHB1dCBEU1xuICAgICAgICAvLyBGb3IgXCJBZGQgdG9cIiBtb2RlLCBzZWxlY3QgbWVyZ2VkIHJlY29yZHNcbiAgICAgICAgLy8gRm9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCBzZWxlY3QgcmVtYWluaW5nIHJlY29yZHMgKGFscmVhZHkgdXBkYXRlZCB2aWEgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKVxuICAgICAgICAvLyBGb3IgXCJOZXdcIiBtb2RlLCBzZWxlY3QgcXVlcnkgcmVzdWx0c1xuICAgICAgICBpZiAocmVjb3Jkc1RvRGlzcGxheSAmJiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aCA+IDAgJiYgZHNUb1VzZSkge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkc1RvU2VsZWN0ID0gcmVjb3Jkc1RvRGlzcGxheS5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSwgc2VsZWN0aW9uIHdhcyBhbHJlYWR5IHVwZGF0ZWQgdmlhIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9uc1xuICAgICAgICAgIC8vIEJ1dCB3ZSBzdGlsbCBuZWVkIHRvIHNlbGVjdCBpbiB0aGUgb3V0cHV0RFMgZm9yIHdpZGdldCBzdGF0ZSBjb25zaXN0ZW5jeVxuICAgICAgICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBTZWxlY3Rpb24gd2FzIGFscmVhZHkgdXBkYXRlZCBpbiBvcmlnaW4gRFNzIHZpYSByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnNcbiAgICAgICAgICAgIC8vIEp1c3QgdXBkYXRlIG91dHB1dERTIHNlbGVjdGlvbiBmb3Igd2lkZ2V0IHN0YXRlIGNvbnNpc3RlbmN5XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGRzVG9Vc2Uuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgZHNUb1VzZS5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzVG9TZWxlY3QsIHJlY29yZHNUb0Rpc3BsYXkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1vdXRwdXQtZHMtc2VsZWN0aW9uLXVwZGF0ZWQnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGhcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtb3V0cHV0LWRzLXNlbGVjdGlvbi1lcnJvcicsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgXCJBZGQgdG9cIiBhbmQgXCJOZXdcIiBtb2Rlcywgc2VsZWN0IHJlY29yZHMgbm9ybWFsbHlcbiAgICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpIC8vIENsZWFyIHByZXZpb3VzIGVycm9yc1xuICAgICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goXG4gICAgICAgICAgICAgICAgICBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIGRzVG9Vc2UsXG4gICAgICAgICAgICAgICAgICByZWNvcmRJZHNUb1NlbGVjdCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICAgIGdyYXBoaWNzTGF5ZXIsXG4gICAgICAgICAgICAgICAgICBtYXBWaWV3XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gdHJ1ZSAvLyBNYXJrIGFzIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRGlzcGF0Y2ggY3VzdG9tIHNlbGVjdGlvbiBldmVudCBzbyBXaWRnZXQgc3RhdGUgaXMgdXBkYXRlZCBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgY3J1Y2lhbCBmb3IgaGFzaC1iYXNlZCBleGVjdXRpb24gd2hlcmUgUXVlcnlUYXNrIGhhbmRsZXMgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudChwcm9wcy53aWRnZXRJZCwgcmVjb3JkSWRzVG9TZWxlY3QsIGRzVG9Vc2UsIHF1ZXJ5SXRlbS5jb25maWdJZClcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VsZWN0IHF1ZXJ5IHJlc3VsdHMnXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWZhaWxlZCcsXG4gICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZElkc1RvU2VsZWN0Lmxlbmd0aFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKClcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiAmJiByZWNvcmRzVG9EaXNwbGF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIC8vIEFsbCByZWNvcmRzIHJlbW92ZWQgLSBjbGVhciBzZWxlY3Rpb25cbiAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF3YWl0IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhwcm9wcy53aWRnZXRJZCwgZHNUb1VzZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcilcbiAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gTm90aWZ5IFdpZGdldCB0aGF0IHNlbGVjdGlvbiBpcyBjbGVhcmVkXG4gICAgICAgICAgICAgIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQocHJvcHMud2lkZ2V0SWQsIFtdLCBkc1RvVXNlLCBxdWVyeUl0ZW0uY29uZmlnSWQpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWFsbC1yZWNvcmRzLXJlbW92ZWQtc2VsZWN0aW9uLWNsZWFyZWQnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1jbGVhci1zZWxlY3Rpb24tZXJyb3InLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSgpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1hcmsgdGhhdCBxdWVyeSBqdXN0IGV4ZWN1dGVkIEJFRk9SRSB1cGRhdGluZyByZXN1bHRDb3VudFxuICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBzZWVzIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgPT09IHRydWVcbiAgICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAncXVlcnktZXhlY3V0ZWQtZmxhZy1zZXQnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHJlY29yZHNUb0Rpc3BsYXlDb3VudDogcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGgsXG4gICAgICAgICAgcXVlcnlSZXN1bHRDb3VudCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSByZXN1bHQgY291bnQgRklSU1QgKGJlZm9yZSBhbnkgcGFyZW50IGNhbGxiYWNrcyB0aGF0IG1pZ2h0IGNhdXNlIHJlLXJlbmRlcnMpXG4gICAgICAgIC8vIEZvciBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHVzZSBhY2N1bXVsYXRlZC9yZW1haW5pbmcgY291bnRcbiAgICAgICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgdXNlIHF1ZXJ5IGNvdW50XG4gICAgICAgIGNvbnN0IG5ld1Jlc3VsdENvdW50ID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgICAgID8gcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGhcbiAgICAgICAgICA6IHF1ZXJ5UmVzdWx0Q291bnRcbiAgICAgICAgXG4gICAgICAgIHNldFJlc3VsdENvdW50KG5ld1Jlc3VsdENvdW50KVxuICAgICAgICBcbiAgICAgICAgLy8gSU5TVEFOVCBVSSBGSVggKFRoZSBcIlNwaW5uZXIgQnlwYXNzXCIpOiBcbiAgICAgICAgLy8gRGVjb3VwbGUgdGhlIFwiUmV0cmlldmluZyByZXN1bHRzLi4uXCIgc3Bpbm5lciBmcm9tIGFzeW5jaHJvbm91cyBhY3Rpb25zIGxpa2Ugem9vbWluZy4gXG4gICAgICAgIC8vIEJ5IGNhbGxpbmcgc2V0U3RhZ2UoMSkgbm93LCB0aGUgdXNlciBzZWVzIHRoZSByZXN1bHQgbGlzdCBpbW1lZGlhdGVseSB3aGlsZSBcbiAgICAgICAgLy8gdGhlIG1hcCBhbmltYXRpb24gY29udGludWVzIGluIHRoZSBiYWNrZ3JvdW5kLlxuICAgICAgICBzZXRTdGFnZSgxKSBcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3BlcmYtcHJvY2Vzc2luZy1jb21wbGV0ZScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHByb2Nlc3NpbmdEdXJhdGlvbk1zOiBNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvY2Vzc2luZ1N0YXJ0VGltZSksXG4gICAgICAgICAgdG90YWxDaGFpbkR1cmF0aW9uTXM6IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUpLFxuICAgICAgICAgIG5ld1Jlc3VsdENvdW50LFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIFpvb20gdG8gcmVjb3JkcyB1c2luZyBzaGFyZWQgem9vbSB1dGlsaXR5IChjb25zaXN0ZW50IHBhZGRpbmcgYmVoYXZpb3IpXG4gICAgICAgIC8vIFVzZSBydW50aW1lIHByZWZlcmVuY2UgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gY29uZmlnIHNldHRpbmcgKGRlZmF1bHRzIHRvIHRydWUpXG4gICAgICAgIGNvbnN0IHNob3VsZFpvb20gPSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCBcbiAgICAgICAgICA/IHJ1bnRpbWVab29tVG9TZWxlY3RlZCBcbiAgICAgICAgICA6IChxdWVyeUl0ZW0uem9vbVRvU2VsZWN0ZWQgIT09IGZhbHNlKVxuICAgICAgICBcbiAgICAgICAgLy8gVXNlIHRoZSBvdXRwdXQgRFMgYW5kIG1lcmdlZCByZWNvcmRzXG4gICAgICAgIGNvbnN0IHJlY29yZHNGb3Jab29tID0gcmVjb3Jkc1RvRGlzcGxheSB8fCByZXN1bHQucmVjb3Jkc1xuICAgICAgICBjb25zdCBkc0Zvclpvb20gPSBkc1RvVXNlIHx8IG91dHB1dERTXG4gICAgICAgIFxuICAgICAgICBpZiAocmVjb3Jkc0Zvclpvb20gJiYgcmVjb3Jkc0Zvclpvb20ubGVuZ3RoID4gMCAmJiBkc0Zvclpvb20gJiYgc2hvdWxkWm9vbSkge1xuICAgICAgICAgIC8vIEJVRy1HUkFQSElDUy0wMDE6IFpvb20gb3BlcmF0aW9ucyBmYWlsIHdoZW4gZ3JhcGhpY3MgbGF5ZXIgaXMgZGlzYWJsZWRcbiAgICAgICAgICBpZiAoIW1hcFZpZXcgJiYgIXVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnQlVHJywge1xuICAgICAgICAgICAgICBidWdJZDogJ0JVRy1HUkFQSElDUy0wMDEnLFxuICAgICAgICAgICAgICBjYXRlZ29yeTogJ0dSQVBISUNTJyxcbiAgICAgICAgICAgICAgZXZlbnQ6ICd6b29tLW9wZXJhdGlvbi1mYWlsZWQtZ3JhcGhpY3MtbGF5ZXItZGlzYWJsZWQnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3F1ZXJ5LXJlc3VsdC16b29tJyxcbiAgICAgICAgICAgICAgcmVjb3Jkc0NvdW50OiByZWNvcmRzRm9yWm9vbS5sZW5ndGgsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnWm9vbSBvcGVyYXRpb24gYXR0ZW1wdGVkIGJ1dCBtYXBWaWV3IGlzIHVuYXZhaWxhYmxlIGJlY2F1c2UgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBpcyBkaXNhYmxlZCcsXG4gICAgICAgICAgICAgIHdvcmthcm91bmQ6ICdFbmFibGUgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCBpbiB3aWRnZXQgc2V0dGluZ3MnLFxuICAgICAgICAgICAgICB0YXJnZXRSZXNvbHV0aW9uOiAncjAxOS4wJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHpvb21Ub1JlY29yZHMocmVjb3Jkc0Zvclpvb20gYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHpvb20gdG8gZmVhdHVyZXMnXG4gICAgICAgICAgICBzZXRab29tRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdaT09NJywge1xuICAgICAgICAgICAgICBldmVudDogJ3pvb20tZ29Uby1lcnJvci1xdWVyeScsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleGVjdXRpbmcgem9vbVRvUmVjb3JkcycsIGVycm9yKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTk9XIGNhbGwgb25IYXNoUGFyYW1ldGVyVXNlZCBBRlRFUiBhbGwgVUkgdXBkYXRlcyBhbmQgem9vbSBvcGVyYXRpb25zIGNvbXBsZXRlXG4gICAgICAgIC8vIFRoaXMgcHJldmVudHMgdGhlIHBhcmVudCByZS1yZW5kZXIgZnJvbSBpbnRlcnJ1cHRpbmcgdGhlIHByb21pc2UgY2hhaW5cbiAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyBoYXNoIHBhcmFtZXRlcnMgZnJvbSByZS1leGVjdXRpbmcgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgICAgICBpZiAoaW5pdGlhbElucHV0VmFsdWUgJiYgcXVlcnlJdGVtLnNob3J0SWQgJiYgb25IYXNoUGFyYW1ldGVyVXNlZCkge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXRhc2stY2FsbGluZy1vbmhhc2hwYXJhbWV0ZXJ1c2VkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBwcm9wcy5xdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBxdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhc2gtcXVlcnktZXhlY3V0ZWQtbm90aWZ5aW5nLXBhcmVudCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogcXVlcnlJdGVtLnNob3J0SWQsXG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZChxdWVyeUl0ZW0uc2hvcnRJZClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncXVlcnl0YXNrLW9uaGFzaHBhcmFtZXRlcnVzZWQtY2FsbGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBwcm9wcy5xdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBxdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmlyZSBldmVudCB0byBub3RpZnkgSGVscGVyU2ltcGxlIHRoYXQgaGFzaCBxdWVyeSBleGVjdXRpb24gaXMgY29tcGxldGVcbiAgICAgICAgICAvLyBUaGlzIGFsbG93cyBIZWxwZXJTaW1wbGUgdG8gdHJhY2sgd2hpY2ggaGFzaCBwYXJhbWV0ZXJzIGhhdmUgYmVlbiBleGVjdXRlZFxuICAgICAgICAgIC8vIHRvIHByZXZlbnQgcmUtZXhlY3V0aW9uIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgICAgICAgICBjb25zdCBoYXNoUGFyYW0gPSBgJHtxdWVyeUl0ZW0uc2hvcnRJZH09JHtpbml0aWFsSW5wdXRWYWx1ZX1gXG4gICAgICAgICAgY29uc3QgZXhlY3V0ZWRFdmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9IQVNIX1FVRVJZX0VYRUNVVEVEX0VWRU5ULCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBzaG9ydElkOiBxdWVyeUl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICAgICAgdmFsdWU6IGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgICAgICBoYXNoUGFyYW1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXhlY3V0ZWRFdmVudClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncXVlcnl0YXNrLWhhc2gtcXVlcnktZXhlY3V0ZWQtZXZlbnQtZGlzcGF0Y2hlZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogcXVlcnlJdGVtLnNob3J0SWQsXG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgIGhhc2hQYXJhbSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSlcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdxdWVyeS1jaGFpbi1mYWlsZWQtZGlhZ25vc3RpYycsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBzZXRTdGFnZSgxKSAvLyBSZXR1cm4gdG8gcmVzdWx0cyBvciBmb3JtIHN0YWdlIGV2ZW4gb24gZXJyb3JcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGlmIChzcGF0aWFsRmlsdGVyPy5sYXllciAmJiBzcGF0aWFsRmlsdGVyPy5jbGVhckFmdGVyQXBwbHkpIHtcbiAgICAgICAgICBzcGF0aWFsRmlsdGVyLmxheWVyLnJlbW92ZUFsbCgpXG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0U3RhZ2UoMSkgLy8gUmVtb3ZlZCBmcm9tIGhlcmU7IG5vdyBjYWxsZWQgaW4gdGhlIG1haW4gY2hhaW4gYmVmb3JlIGJhY2tncm91bmQgYWN0aW9uc1xuICAgICAgfSlcbiAgfSwgW2N1cnJlbnRJdGVtLCBxdWVyeUl0ZW0sIHByb3BzLndpZGdldElkLCBvdXRwdXREUywgcHVibGlzaERhdGFDbGVhcmVkTXNnLCBjbGVhclJlc3VsdCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIG9uQ2xlYXJHcmFwaGljc0xheWVyLCBtYXBWaWV3LCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCB6b29tVG9SZWNvcmRzXSlcblxuICAvLyBMaXN0ZW4gZm9yIGhhc2ggdmFsdWUgY29udmVyc2lvbiBldmVudCBhbmQgZXhlY3V0ZSBwZW5kaW5nIHF1ZXJ5XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlSGFzaFZhbHVlQ29udmVydGVkID0gKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtY29udmVydGVkLWV2ZW50LXJlY2VpdmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBldmVudFdpZGdldElkOiBldmVudC5kZXRhaWw/LndpZGdldElkLFxuICAgICAgICBldmVudENvbmZpZ0lkOiBldmVudC5kZXRhaWw/LmNvbmZpZ0lkLFxuICAgICAgICBtYXRjaGVzV2lkZ2V0OiBldmVudC5kZXRhaWw/LndpZGdldElkID09PSBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgaGFzUGVuZGluZ1F1ZXJ5OiAhIXBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBPbmx5IHByb2Nlc3MgZXZlbnRzIGZvciB0aGlzIHdpZGdldFxuICAgICAgaWYgKGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQgIT09IHByb3BzLndpZGdldElkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ2hhc2gtdmFsdWUtY29udmVydGVkLWV2ZW50LWlnbm9yZWQtd3Jvbmctd2lkZ2V0JyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgZXZlbnRXaWRnZXRJZDogZXZlbnQuZGV0YWlsPy53aWRnZXRJZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXhlY3V0aW5nLXBlbmRpbmctcXVlcnknLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICBjb25maWdJZDogZXZlbnQuZGV0YWlsLmNvbmZpZ0lkLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBldmVudC5kZXRhaWwuaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBjb25zdCB7IHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIHJ1bnRpbWVab29tVG9TZWxlY3RlZCB9ID0gcGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50XG4gICAgICAgIHBlbmRpbmdIYXNoUXVlcnlSZWYuY3VycmVudCA9IG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIHBlbmRpbmcgcXVlcnkgbm93IHRoYXQgdmFsdWUgaXMgY29udmVydGVkXG4gICAgICAgIC8vIFVzZSBzZXRUaW1lb3V0IHRvIGVuc3VyZSB0aGlzIGhhcHBlbnMgYWZ0ZXIgdGhlIGN1cnJlbnQgZXZlbnQgbG9vcFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWwoc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgcnVudGltZVpvb21Ub1NlbGVjdGVkKVxuICAgICAgICB9LCAwKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ29udmVyc2lvbiBoYXBwZW5lZCBiZWZvcmUgaGFuZGxlRm9ybVN1Ym1pdCB3YXMgY2FsbGVkXG4gICAgICAgIC8vIGFwcGx5UXVlcnkoKSBpcyBjYWxsZWQgZGlyZWN0bHkgZnJvbSBoYW5kbGVTcWxFeHByT2JqQ2hhbmdlIGluIHF1ZXJ5LXRhc2stZm9ybS50c3hcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAnaGFzaC12YWx1ZS1jb252ZXJ0ZWQtZXZlbnQtcmVjZWl2ZWQtbm8tcGVuZGluZy1xdWVyeScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIGNvbmZpZ0lkOiBldmVudC5kZXRhaWw/LmNvbmZpZ0lkLFxuICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlOiBldmVudC5kZXRhaWw/LmluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgICAgIG5vdGU6ICdDb252ZXJzaW9uIGhhcHBlbmVkIGJlZm9yZSBoYW5kbGVGb3JtU3VibWl0IC0gYXBwbHlRdWVyeSgpIGNhbGxlZCBkaXJlY3RseSBmcm9tIGZvcm0gY29tcG9uZW50JyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihRVUVSWVNJTVBMRV9IQVNIX1ZBTFVFX0NPTlZFUlRFRF9FVkVOVCwgaGFuZGxlSGFzaFZhbHVlQ29udmVydGVkIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfSEFTSF9WQUxVRV9DT05WRVJURURfRVZFTlQsIGhhbmRsZUhhc2hWYWx1ZUNvbnZlcnRlZCBhcyBFdmVudExpc3RlbmVyKVxuICAgIH1cbiAgfSwgW3Byb3BzLndpZGdldElkLCBoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWxdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGZvcm0gc3VibWlzc2lvbiB3aGVuIHVzZXIgY2xpY2tzIFwiQXBwbHlcIiBidXR0b24uXG4gICAqIENoZWNrcyBpZiBoYXNoIHZhbHVlIG5lZWRzIGNvbnZlcnNpb24gYW5kIHdhaXRzIGZvciBldmVudCBpZiBuZWVkZWQuXG4gICAqIFxuICAgKiBAcGFyYW0gc3FsRXhwciAtIFRoZSBTUUwgZXhwcmVzc2lvbiBmb3IgYXR0cmlidXRlIGZpbHRlcmluZ1xuICAgKiBAcGFyYW0gc3BhdGlhbEZpbHRlciAtIFRoZSBzcGF0aWFsIGZpbHRlciBvYmplY3RcbiAgICogQHBhcmFtIHJ1bnRpbWVab29tVG9TZWxlY3RlZCAtIE9wdGlvbmFsIHJ1bnRpbWUgb3ZlcnJpZGUgZm9yIHpvb20tdG8tc2VsZWN0ZWQgYmVoYXZpb3JcbiAgICovXG4gIGNvbnN0IGhhbmRsZUZvcm1TdWJtaXQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uLCBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB7XG4gICAgLy8gTE9HIEFUIFRIRSBWRVJZIFNUQVJUIC0gYmVmb3JlIGFueSBjaGVja3NcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXQtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHNxbEV4cHJFeGlzdHM6ICEhc3FsRXhwcixcbiAgICAgIGZpcnN0UGFydEV4aXN0czogISFzcWxFeHByPy5wYXJ0cz8uWzBdLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgaGFzaC10cmlnZ2VyZWQgcXVlcnkgd2l0aCB1bmNvbnZlcnRlZCB2YWx1ZSAoc3RyaW5nIGZvcm1hdClcbiAgICBjb25zdCBmaXJzdFBhcnQgPSBzcWxFeHByPy5wYXJ0cz8uWzBdXG4gICAgY29uc3QgdmFsdWUgPSBmaXJzdFBhcnQ/LnR5cGUgPT09ICdTSU5HTEUnID8gKGZpcnN0UGFydCBhcyBhbnkpLnZhbHVlT3B0aW9ucz8udmFsdWUgOiBudWxsXG4gICAgY29uc3QgaXNTdHJpbmdWYWx1ZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubGVuZ3RoID4gMFxuICAgIGNvbnN0IGlzQXJyYXlWYWx1ZSA9IEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA+IDBcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXQtY2hlY2tpbmctY29udmVyc2lvbicsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgIHZhbHVlVHlwZTogdHlwZW9mIHZhbHVlLFxuICAgICAgaXNTdHJpbmdWYWx1ZSxcbiAgICAgIGlzQXJyYXlWYWx1ZSxcbiAgICAgIHZhbHVlOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogdmFsdWUsXG4gICAgICB3aWxsQ2hlY2tXYWl0Q29uZGl0aW9uOiBpc1N0cmluZ1ZhbHVlICYmICFpc0FycmF5VmFsdWUgJiYgaW5pdGlhbElucHV0VmFsdWUgJiYgdmFsdWUgPT09IGluaXRpYWxJbnB1dFZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiB2YWx1ZSBpcyBzdHJpbmcgKG5vdCBjb252ZXJ0ZWQgdG8gYXJyYXkgeWV0KSwgd2FpdCBmb3IgY29udmVyc2lvbiBldmVudFxuICAgIC8vIFRoaXMgaGFwcGVucyB3aGVuIGhhc2ggdmFsdWUgY2hhbmdlcyBmb3Igc2FtZSBjb25maWdJZFxuICAgIGlmIChpc1N0cmluZ1ZhbHVlICYmICFpc0FycmF5VmFsdWUgJiYgaW5pdGlhbElucHV0VmFsdWUgJiYgdmFsdWUgPT09IGluaXRpYWxJbnB1dFZhbHVlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC13YWl0aW5nLWZvci1jb252ZXJzaW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBjdXJyZW50VmFsdWU6IHZhbHVlLFxuICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBTdG9yZSBwZW5kaW5nIHF1ZXJ5XG4gICAgICBwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnQgPSB7XG4gICAgICAgIHNxbEV4cHIsXG4gICAgICAgIHNwYXRpYWxGaWx0ZXIsXG4gICAgICAgIHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTZXQgYSB0aW1lb3V0IHRvIHByZXZlbnQgaW5maW5pdGUgd2FpdGluZyAoZmFsbGJhY2sgYWZ0ZXIgMiBzZWNvbmRzKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChwZW5kaW5nSGFzaFF1ZXJ5UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhbmRsZUZvcm1TdWJtaXQtY29udmVyc2lvbi10aW1lb3V0LWV4ZWN1dGluZy1hbnl3YXknLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCB7IHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIHJ1bnRpbWVab29tVG9TZWxlY3RlZCB9ID0gcGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50XG4gICAgICAgICAgcGVuZGluZ0hhc2hRdWVyeVJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEV4ZWN1dGUgYW55d2F5IChmYWxsYmFjaylcbiAgICAgICAgICBoYW5kbGVGb3JtU3VibWl0SW50ZXJuYWwoc3FsRXhwciwgc3BhdGlhbEZpbHRlciwgcnVudGltZVpvb21Ub1NlbGVjdGVkKVxuICAgICAgICB9XG4gICAgICB9LCAyMDAwKVxuICAgICAgXG4gICAgICByZXR1cm4gLy8gRXhpdCBlYXJseSwgd2lsbCBleGVjdXRlIHdoZW4gZXZlbnQgZmlyZXNcbiAgICB9XG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVGb3JtU3VibWl0LWV4ZWN1dGluZy1pbW1lZGlhdGVseScsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICByZWFzb246IGlzU3RyaW5nVmFsdWUgPyAnbm90LWhhc2gtdHJpZ2dlcmVkJyA6IChpc0FycmF5VmFsdWUgPyAnYWxyZWFkeS1jb252ZXJ0ZWQnIDogJ25vLXZhbHVlJyksXG4gICAgICB2YWx1ZVR5cGU6IHR5cGVvZiB2YWx1ZSxcbiAgICAgIGlzU3RyaW5nVmFsdWUsXG4gICAgICBpc0FycmF5VmFsdWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFZhbHVlIGlzIGFscmVhZHkgY29udmVydGVkIG9yIG5vdCBoYXNoLXRyaWdnZXJlZCwgZXhlY3V0ZSBpbW1lZGlhdGVseVxuICAgIGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbChzcWxFeHByLCBzcGF0aWFsRmlsdGVyLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQpXG4gIH0sIFtwcm9wcy53aWRnZXRJZCwgaW5pdGlhbElucHV0VmFsdWUsIGhhbmRsZUZvcm1TdWJtaXRJbnRlcm5hbF0pXG5cbiAgY29uc3QgeyB1c2VBdHRyaWJ1dGVGaWx0ZXIsIHNxbEV4cHJPYmosIHVzZVNwYXRpYWxGaWx0ZXIsIHNwYXRpYWxGaWx0ZXJUeXBlcywgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YSwgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXN9ID0gY3VycmVudEl0ZW1cbiAgY29uc3Qgc2hvd0F0dHJpYnV0ZUZpbHRlciA9IHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByT2JqICE9IG51bGxcbiAgY29uc3Qgc2hvd1NwYXRpYWxGaWx0ZXIgPSBzcGF0aWFsRmlsdGVyRW5hYmxlZCAmJiB1c2VTcGF0aWFsRmlsdGVyICYmIChzcGF0aWFsRmlsdGVyVHlwZXMubGVuZ3RoID4gMCB8fCBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhIHx8IHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwKVxuXG4gIC8vIERFVEVDVCBTV0lUQ0ggSU4gUkVOREVSXG4gIGNvbnN0IGlzU3dpdGNoaW5nUXVlcmllcyA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCAhPT0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gIGNvbnN0IGlzVmlydHVhbENsZWFyQWN0aXZlID0gaXNTd2l0Y2hpbmdRdWVyaWVzICYmIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICBcbiAgLy8gVXNlIHRoZXNlIFwiZWZmZWN0aXZlXCIgdmFsdWVzIGZvciB0aGUgVUlcbiAgY29uc3QgZWZmZWN0aXZlUmVzdWx0Q291bnQgPSBpc1ZpcnR1YWxDbGVhckFjdGl2ZSA/IDAgOiByZXN1bHRDb3VudFxuICBjb25zdCBlZmZlY3RpdmVSZWNvcmRzID0gaXNWaXJ0dWFsQ2xlYXJBY3RpdmUgPyBbXSA6IChyZWNvcmRzUmVmLmN1cnJlbnQgfHwgW10pXG5cbiAgLy8gQ3JlYXRlIGEgdW5pcXVlIGtleSBmb3IgdGhlIGN1cnJlbnQgcXVlcnkgcmVzdWx0IHNldCB0byBoZWxwIEUyRSB0ZXN0cyBkZXRlY3QgZnJlc2ggZGF0YVxuICBjb25zdCByZXN1bHRRdWVyeUtleSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBgJHtxdWVyeUl0ZW0uY29uZmlnSWR9XyR7RGF0ZS5ub3coKX1gXG4gIH0sIFtxdWVyeUl0ZW0uY29uZmlnSWQsIHJlc3VsdENvdW50XSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrIGgtMTAwJywgY2xhc3NOYW1lLCB7IHdyYXBwZWQ6IHdyYXBwZWRJblBvcHBlciB9KX0gXG4gICAgICBkYXRhLXJlc3VsdC1xdWVyeS1rZXk9e3Jlc3VsdFF1ZXJ5S2V5fVxuICAgICAgY3NzPXtjc3NgXG4gICAgICAke3N0eWxlfVxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGB9PlxuICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17dXNlT3V0cHV0RHN9IG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZU91dHB1dERhdGFTb3VyY2VDcmVhdGVkfSBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVPdXRwdXREYXRhU291cmNlSW5mb0NoYW5nZX0vPlxuICAgICAgXG4gICAgICB7LyogVGFiIE5hdmlnYXRpb24gLSBNb3ZlZCB0byB0b3AgKi99XG4gICAgICA8VGFic1xuICAgICAgICB2YWx1ZT17YWN0aXZlVGFifVxuICAgICAgICBvbkNoYW5nZT17KGlkKSA9PiBoYW5kbGVUYWJDaGFuZ2UoaWQgYXMgJ3F1ZXJ5JyB8ICdyZXN1bHRzJyl9XG4gICAgICAgIGZpbGw9e3RydWV9XG4gICAgICAgIHR5cGU9J3VuZGVybGluZSdcbiAgICAgICAga2VlcE1vdW50PXt0cnVlfVxuICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIGB9XG4gICAgICA+XG4gICAgICAgIDxUYWJcbiAgICAgICAgICBpZD0ncXVlcnknXG4gICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdxdWVyeVRhYicpfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncXVlcnktdGFza19fY29udGVudCcsIHtcbiAgICAgICAgICAgICAgW0ZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1NdOiBpc0luUG9wcGVyICYmIGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5J1xuICAgICAgICAgICAgfSl9IFxuICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICBgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHsvKiBIZWFkZXIgd2l0aCBiYWNrIGJ1dHRvbiBhbmQgcXVlcnkgbGFiZWwgLSBRdWVyeSB0YWIgb25seSAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS1mb3JtX19oZWFkZXIgbXgtNCBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdpbi1wb3BwZXInOiBpc0luUG9wcGVyIH0pfSBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgcGFkZGluZzogNnB4IDA7XG4gICAgICAgICAgICAgIHBhZGRpbmctdG9wOiA4cHg7XG4gICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbmF2LWFjdGlvbiBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdkLW5vbmUnOiB3cmFwcGVkSW5Qb3BwZXIgfSl9IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDEgMSAwO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgIC5qaW11LWJ0biB7XG4gICAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDI2cHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3AtMCBtci0yJywgeyAnZC1ub25lJzogdG90YWwgPT09IDEgfHwgIW9uTmF2QmFjayB9KX1cbiAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbk5hdkJhY2t9XG4gICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnYmFjaycpfVxuICAgICAgICAgICAgICAgICAgcmVmPXtiYWNrQnRuUmVmfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxBcnJvd0xlZnRPdXRsaW5lZCBhdXRvRmxpcC8+XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPFF1ZXJ5VGFza0xhYmVsIGljb249e2ljb259IG5hbWU9e2Rpc3BsYXlMYWJlbCA/IG5hbWUgOiAnJ30gLz5cbiAgICAgICAgICAgICAgICB7LyogSGFzaCBwYXJhbWV0ZXIgaW5mbyBidXR0b24gLSBzaG93cyBxdWVyaWVzIGZyb20gc2FtZSBsYXllciB3aXRoIHNob3J0SWRzICovfVxuICAgICAgICAgICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKCFxdWVyeUl0ZW1zIHx8IHF1ZXJ5SXRlbXMubGVuZ3RoIDw9IDEpIHJldHVybiBudWxsXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIEdldCBjdXJyZW50IHF1ZXJ5J3Mgb3JpZ2luIGRhdGEgc291cmNlIElEXG4gICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50T3JpZ2luRFNJZCA9IHF1ZXJ5SXRlbS51c2VEYXRhU291cmNlPy5kYXRhU291cmNlSWRcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50T3JpZ2luRFNJZCkgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gRmluZCBhbGwgcXVlcmllcyBmcm9tIHRoZSBzYW1lIG9yaWdpbiBkYXRhIHNvdXJjZSB0aGF0IGhhdmUgc2hvcnRJZHNcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNhbWVMYXllclF1ZXJpZXMgPSBxdWVyeUl0ZW1zLmZpbHRlcihpdGVtID0+IFxuICAgICAgICAgICAgICAgICAgICBpdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCA9PT0gY3VycmVudE9yaWdpbkRTSWQgJiYgXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2hvcnRJZCAmJiBcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG9ydElkLnRyaW0oKSAhPT0gJydcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gT25seSBzaG93IGluZm8gYnV0dG9uIGlmIHRoZXJlIGFyZSBxdWVyaWVzIHdpdGggc2hvcnRJZHNcbiAgICAgICAgICAgICAgICAgIGlmIChzYW1lTGF5ZXJRdWVyaWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gQnVpbGQgdG9vbHRpcCBjb250ZW50XG4gICAgICAgICAgICAgICAgICBjb25zdCBxdWVyeUxpbmVzID0gc2FtZUxheWVyUXVlcmllcy5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5TmFtZSA9IGdldFF1ZXJ5RGlzcGxheU5hbWUoaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke3F1ZXJ5TmFtZX06ICMke2l0ZW0uc2hvcnRJZH09dmFsdWUgb3IgPyR7aXRlbS5zaG9ydElkfT12YWx1ZWBcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRvb2x0aXBUaXRsZSA9IGBUaGlzIGxheWVyIGNhbiBiZSBzZWFyY2hlZCB1c2luZyB0aGUgc2hvcnRJZHMgJHtzYW1lTGF5ZXJRdWVyaWVzLm1hcChxID0+IHEuc2hvcnRJZCkuam9pbignIGFuZCAnKX0gdXNpbmcgI3Nob3J0SWQ9dmFsdWUgb3IgP3Nob3J0SWQ9dmFsdWUgaW4gdGhlIFVSTC5cXG5cXG4ke3F1ZXJ5TGluZXMuam9pbignXFxuJyl9YFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcCBcbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9J2JvdHRvbScgXG4gICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0b29sdGlwVGl0bGV9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5JyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9J0hhc2ggcGFyYW1ldGVyIHNlYXJjaCBpbmZvcm1hdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pKCl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7ZWZmZWN0aXZlUmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9IHBsYWNlbWVudD0nYm90dG9tJz5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgcmVmPXtjbGVhclJlc3VsdEJ0blJlZn1cbiAgICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX1cbiAgICAgICAgICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J21sLWF1dG8gcHktMCdcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBjbGVhclJlc3VsdCgndXNlci10cmFzaC1jbGljaycpIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUcmFzaE91dGxpbmVkIC8+XG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHsvKiBTZWFyY2ggTGF5ZXIgLyBHcm91cCBkcm9wZG93bnMgLSBzaG93IGJhc2VkIG9uIGdyb3VwaW5nICovfVxuICAgICAgICAgICAgeygoKSA9PiB7XG4gICAgICAgICAgICAgIC8vIE9ubHkgc2hvdyBkcm9wZG93bnMgaWYgbXVsdGlwbGUgcXVlcmllcyBleGlzdFxuICAgICAgICAgICAgICBpZiAoIXF1ZXJ5SXRlbXMgfHwgcXVlcnlJdGVtcy5sZW5ndGggPD0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEJ1aWxkIGZsYXQgbGlzdCBvZiBhbGwgcXVlcmllcyB3aXRoIHRoZWlyIGRpc3BsYXkgaW5mb1xuICAgICAgICAgICAgICAvLyBGb3IgZ3JvdXBlZCBxdWVyaWVzLCB1c2UgZ3JvdXAgZGlzcGxheSBuYW1lIChvbmx5IHNob3cgb25jZSBwZXIgZ3JvdXApXG4gICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5T3B0aW9uczogQXJyYXk8e1xuICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBzdHJpbmdcbiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogc3RyaW5nXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogc3RyaW5nIHwgbnVsbFxuICAgICAgICAgICAgICAgIGluZGV4OiBudW1iZXJcbiAgICAgICAgICAgICAgfT4gPSBbXVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gVHJhY2sgd2hpY2ggZ3JvdXBzIHdlJ3ZlIGFscmVhZHkgYWRkZWQgdG8gYXZvaWQgZHVwbGljYXRlc1xuICAgICAgICAgICAgICBjb25zdCBhZGRlZEdyb3VwcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1zLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZvciBncm91cGVkIHF1ZXJpZXMsIHVzZSBncm91cCBkaXNwbGF5IG5hbWUgKG9ubHkgYWRkIG9uY2UgcGVyIGdyb3VwKVxuICAgICAgICAgICAgICAgICAgaWYgKCFhZGRlZEdyb3Vwcy5oYXMoaXRlbS5ncm91cElkKSkge1xuICAgICAgICAgICAgICAgICAgICBhZGRlZEdyb3Vwcy5hZGQoaXRlbS5ncm91cElkKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cERpc3BsYXlOYW1lID0gZ3JvdXBzPy5baXRlbS5ncm91cElkXT8uZGlzcGxheU5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBzPy5baXRlbS5ncm91cElkXT8uaXRlbXNbMF0/Lm5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5uYW1lIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBHcm91cCAke2l0ZW0uZ3JvdXBJZH1gXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25maWdJZDogaXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogZ3JvdXBEaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBpdGVtLmdyb3VwSWQsXG4gICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBVbmdyb3VwZWQgcXVlcnkgLSB1c2UgaXRlbS5uYW1lIGZvciBmaXJzdCBkcm9wZG93biAobm90IHNlYXJjaEFsaWFzL2ppbXVGaWVsZE5hbWUpXG4gICAgICAgICAgICAgICAgICBxdWVyeU9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogaXRlbS5uYW1lIHx8IGdldFF1ZXJ5RGlzcGxheU5hbWUoaXRlbSksXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHhcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGN1cnJlbnRseSBzZWxlY3RlZCBxdWVyeVxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UXVlcnlJdGVtID0gcXVlcnlJdGVtXG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRRdWVyeUdyb3VwSWQgPSBjdXJyZW50UXVlcnlJdGVtLmdyb3VwSWQgfHwgbnVsbFxuICAgICAgICAgICAgICBjb25zdCBpc0dyb3VwZWRRdWVyeSA9IGN1cnJlbnRRdWVyeUdyb3VwSWQgIT09IG51bGxcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEZpbmQgdGhlIG9wdGlvbiBpbmRleCBmb3IgdGhlIGN1cnJlbnQgcXVlcnlcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudE9wdGlvbkluZGV4ID0gcXVlcnlPcHRpb25zLmZpbmRJbmRleChvcHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc0dyb3VwZWRRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdC5ncm91cElkID09PSBjdXJyZW50UXVlcnlHcm91cElkXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBvcHQuY29uZmlnSWQgPT09IGN1cnJlbnRRdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVuZGVyaW5nLWRyb3Bkb3ducycsXG4gICAgICAgICAgICAgICAgdG90YWxRdWVyaWVzOiBxdWVyeUl0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBxdWVyeU9wdGlvbnNDb3VudDogcXVlcnlPcHRpb25zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVlcnlHcm91cElkLFxuICAgICAgICAgICAgICAgIGlzR3JvdXBlZFF1ZXJ5LFxuICAgICAgICAgICAgICAgIGN1cnJlbnRPcHRpb25JbmRleCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsXG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXJ5Q29uZmlnSWQ6IGN1cnJlbnRRdWVyeUl0ZW0uY29uZmlnSWRcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgey8qIEZpcnN0IERyb3Bkb3duOiBBbGwgcXVlcmllcyAqL31cbiAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgnc2VhcmNoTGF5ZXInKX1cbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBcbiAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50T3B0aW9uSW5kZXggPj0gMCA/IGN1cnJlbnRPcHRpb25JbmRleCA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25JbmRleCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRPcHRpb24gPSBxdWVyeU9wdGlvbnNbb3B0aW9uSW5kZXhdXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAncXVlcnktb3B0aW9uLXNlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpc0dyb3VwZWQ6IHNlbGVjdGVkT3B0aW9uLmdyb3VwSWQgIT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNUQVJUIENMRUFSSU5HIElNTUVESUFURUxZIElGIFNXSVRDSElOR1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGVhclJlc3VsdCgnZHJvcGRvd24tbGF5ZXItc3dpdGNoLW5ldy1tb2RlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JvdXBlZCBxdWVyeSBzZWxlY3RlZCAtIHNldCBncm91cCBhbmQgZmlyc3QgcXVlcnkgaW4gZ3JvdXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwQ2hhbmdlKHNlbGVjdGVkT3B0aW9uLmdyb3VwSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBRdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZSgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmdyb3VwZWQgcXVlcnkgc2VsZWN0ZWQgLSBjbGVhciBncm91cCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdyb3VwQ2hhbmdlKG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uVW5ncm91cGVkQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdW5ncm91cGVkIGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdW5ncm91cGVkSW5kZXggPSB1bmdyb3VwZWQ/LmZpbmRJbmRleCgoeyBpdGVtIH0pID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jb25maWdJZCA9PT0gc2VsZWN0ZWRPcHRpb24uY29uZmlnSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApID8/IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuZ3JvdXBlZEluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVW5ncm91cGVkQ2hhbmdlKHVuZ3JvdXBlZEluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjazogdXNlIHRoZSBpbmRleCBmcm9tIHF1ZXJ5SXRlbXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAndW5ncm91cGVkLWZhbGxiYWNrLXRvLWluZGV4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb25JbmRleDogc2VsZWN0ZWRPcHRpb24uaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25RdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblF1ZXJ5Q2hhbmdlKHNlbGVjdGVkT3B0aW9uLmluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7cXVlcnlPcHRpb25zLm1hcCgob3B0aW9uLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAncmVuZGVyaW5nLXF1ZXJ5LW9wdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBvcHRpb24uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBvcHRpb24uZGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IG9wdGlvbi5ncm91cElkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e29wdGlvbi5jb25maWdJZH0gdmFsdWU9e2lkeH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge29wdGlvbi5kaXNwbGF5TmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsvKiBTZWNvbmQgRHJvcGRvd246IFF1ZXJpZXMgd2l0aGluIHNlbGVjdGVkIGdyb3VwIChvbmx5IGlmIGdyb3VwZWQgcXVlcnkgc2VsZWN0ZWQpICovfVxuICAgICAgICAgICAgICAgICAge2lzR3JvdXBlZFF1ZXJ5ICYmIGN1cnJlbnRRdWVyeUdyb3VwSWQgJiYgZ3JvdXBzICYmIGdyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgICBTZWFyY2ggQWxpYXNcbiAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3QgXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlbGVjdGVkR3JvdXBRdWVyeUluZGV4ICE9PSB1bmRlZmluZWQgPyBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17YXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SW5kZXggPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2dyb3VwLXF1ZXJ5LXNlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBjdXJyZW50UXVlcnlHcm91cElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwUXVlcnlJbmRleDogbmV3SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGdyb3Vwc1tjdXJyZW50UXVlcnlHcm91cElkXS5pdGVtc1tuZXdJbmRleF0/LmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5RGlzcGxheU5hbWU6IGdldFF1ZXJ5RGlzcGxheU5hbWUoZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zW25ld0luZGV4XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTVEFSVCBDTEVBUklORyBJTU1FRElBVEVMWSBJRiBTV0lUQ0hJTkdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFyUmVzdWx0KCdkcm9wZG93bi1hbGlhcy1zd2l0Y2gtbmV3LW1vZGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uR3JvdXBRdWVyeUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZShuZXdJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zLm1hcCgoaXRlbSwgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpdGVtLmNvbmZpZ0lkfSB2YWx1ZT17aWR4fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pKCl9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHsvKiBSZXN1bHRzIE1vZGUgQnV0dG9uIEdyb3VwIC0gQWx3YXlzIHNob3csIHJlZ2FyZGxlc3Mgb2YgcXVlcnkgY291bnQgKi99XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZ2FwOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgZmxleC13cmFwOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBSZXN1bHRzIGxhYmVsIGFuZCBpbmZvIGJ1dHRvbiAqL31cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRpdGxlMlwiIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHMnKX06XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIGNzcz17Y3NzYHdoaXRlLXNwYWNlOiBwcmUtbGluZTtgfSB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIGljb24gdHlwZT0ndGVydGlhcnknIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKX0gY3NzPXtjc3NgZmxleC1zaHJpbms6IDA7YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbmZvT3V0bGluZWQgY29sb3I9J3ZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pJyBzaXplPSdzJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgey8qIE1vZGUgYnV0dG9ucyAqL31cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT1cInJhZGlvZ3JvdXBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uID8gJ2NvbnRhaW5lZCcgOiAnb3V0bGluZWQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnYnV0dG9uLW1vZGUtY2hhbmdlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlOiByZXN1bHRzTW9kZSB8fCBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblJlc3VsdHNNb2RlQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZShuZXdNb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtnZXRJMThuTWVzc2FnZSgnY3JlYXRlTmV3UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzFdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY3JlYXRlTmV3UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVOZXcnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gPyAnY29udGFpbmVkJyA6ICdvdXRsaW5lZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gPyAncHJpbWFyeScgOiAnZGVmYXVsdCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld01vZGUgPSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzTW9kZSA9IHJlc3VsdHNNb2RlIHx8IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2J1dHRvbi1tb2RlLWNoYW5nZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBzd2l0Y2hpbmcgRlJPTSBcIk5ld1wiIFRPIFwiQWRkIHRvXCIgbW9kZSBhbmQgd2UgaGF2ZSBjdXJyZW50IHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHRoZW0gd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGJlZm9yZSBjaGFuZ2luZyBtb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY29yZHNUb0NhcHR1cmUgPSAoZWZmZWN0aXZlUmVjb3JkcyAmJiBlZmZlY3RpdmVSZWNvcmRzLmxlbmd0aCA+IDApIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGVmZmVjdGl2ZVJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChvdXRwdXREUz8uZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSB8fCBbXSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmUubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBY2N1bXVsYXRlZCA9IGFjY3VtdWxhdGVkUmVjb3JkcyB8fCBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1lcmdlIGN1cnJlbnQgcmVzdWx0cyB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRSZWNvcmRzID0gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjYXB0dXJpbmctY3VycmVudC1yZXN1bHRzLW9uLW1vZGUtc3dpdGNoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlZFJlY29yZHNDb3VudDogcmVjb3Jkc1RvQ2FwdHVyZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWQubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUmVjb3Jkc0NvdW50OiBtZXJnZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UobWVyZ2VkUmVjb3JkcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVzdWx0c01vZGVDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlKG5ld01vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YCR7Z2V0STE4bk1lc3NhZ2UoJ2FkZFRvQ3VycmVudFJlc3VsdHMnKX06ICR7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpLnNwbGl0KCdcXG4nKVsyXT8udHJpbSgpIHx8ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ2FkZFRvQ3VycmVudFJlc3VsdHMnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlQWRkJyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24gPyAnY29udGFpbmVkJyA6ICdvdXRsaW5lZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshYWNjdW11bGF0ZWRSZWNvcmRzIHx8IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld01vZGUgPSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNNb2RlID0gcmVzdWx0c01vZGUgfHwgU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnYnV0dG9uLW1vZGUtY2hhbmdlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHN3aXRjaGluZyBGUk9NIFwiTmV3XCIgVE8gXCJSZW1vdmUgZnJvbVwiIG1vZGUgYW5kIHdlIGhhdmUgY3VycmVudCByZXN1bHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtZXJnZSB0aGVtIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyBiZWZvcmUgY2hhbmdpbmcgbW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAoc2FtZSBwYXR0ZXJuIGFzIFwiQWRkIHRvXCIgbW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjb3Jkc1RvQ2FwdHVyZUZvclJlbW92ZSA9IChlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCkgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZWZmZWN0aXZlUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKG91dHB1dERTPy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdIHx8IFtdKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzVG9DYXB0dXJlRm9yUmVtb3ZlLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQWNjdW11bGF0ZWQgPSBhY2N1bXVsYXRlZFJlY29yZHMgfHwgW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSBjdXJyZW50IHJlc3VsdHMgd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkUmVjb3JkcyA9IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzVG9DYXB0dXJlRm9yUmVtb3ZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnY2FwdHVyaW5nLWN1cnJlbnQtcmVzdWx0cy1vbi1tb2RlLXN3aXRjaC10by1yZW1vdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVkUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9DYXB0dXJlRm9yUmVtb3ZlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWNvcmRzQ291bnQ6IG1lcmdlZFJlY29yZHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShtZXJnZWRSZWNvcmRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25SZXN1bHRzTW9kZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2UobmV3TW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake2dldEkxOG5NZXNzYWdlKCdyZW1vdmVGcm9tQ3VycmVudFJlc3VsdHMnKX06ICR7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpLnNwbGl0KCdcXG4nKVszXT8udHJpbSgpIHx8ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17KCFhY2N1bXVsYXRlZFJlY29yZHMgfHwgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMCkgXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGlzYWJsZWRSZW1vdmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGdldEkxOG5NZXNzYWdlKCdyZW1vdmVGcm9tQ3VycmVudFJlc3VsdHMnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI4cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlUmVtb3ZlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICAgIGlkPXtgcmVzdWx0cy1tb2RlLWRlc2NyaXB0aW9uLSR7cHJvcHMud2lkZ2V0SWR9YH1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzci1vbmx5XCJcbiAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxpdmU9XCJwb2xpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJzdGF0dXNcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gZ2V0STE4bk1lc3NhZ2UoJ2NyZWF0ZU5ld1Jlc3VsdHMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGdldEkxOG5NZXNzYWdlKCdyZW1vdmVGcm9tQ3VycmVudFJlc3VsdHMnKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAge2VuYWJsZWQgJiYgZHNFeGlzdHMgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgIDxRdWVyeVRhc2tGb3JtXG4gICAgICAgICAgICAgICAgICAgIGtleT17cXVlcnlJdGVtLmNvbmZpZ0lkfVxuICAgICAgICAgICAgICAgICAgICB7Li4ub3RoZXJQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ9e3F1ZXJ5SXRlbS5jb25maWdJZH1cbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFM9e291dHB1dERTfVxuICAgICAgICAgICAgICAgICAgICBkYXRhc291cmNlUmVhZHk9e2RhdGFTb3VyY2UgIT0gbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgc3BhdGlhbEZpbHRlckVuYWJsZWQ9e3NwYXRpYWxGaWx0ZXJFbmFibGVkfVxuICAgICAgICAgICAgICAgICAgICBkYXRhQWN0aW9uRmlsdGVyID0ge2RhdGFBY3Rpb25GaWx0ZXJ9XG4gICAgICAgICAgICAgICAgICAgIG9uRm9ybVN1Ym1pdD17aGFuZGxlRm9ybVN1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWU9e2luaXRpYWxJbnB1dFZhbHVlfVxuICAgICAgICAgICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtvbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkPXtxdWVyeUl0ZW0uc2hvcnRJZH1cbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiPXthY3RpdmVUYWJ9XG4gICAgICAgICAgICAgICAgICAgIG9uVGFiQ2hhbmdlPXtzZXRBY3RpdmVUYWJ9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8RGF0YVNvdXJjZVRpcFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtwcm9wcy53aWRnZXRJZH1cbiAgICAgICAgICAgICAgICB1c2VEYXRhU291cmNlPXtxdWVyeUl0ZW0udXNlRGF0YVNvdXJjZX1cbiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICBvblN0YXR1c0NoYW5nZT17aGFuZGxlU3RhdHVzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvVGFiPlxuICAgICAgICA8VGFiXG4gICAgICAgICAgaWQ9J3Jlc3VsdHMnXG4gICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c1RhYicpfVxuICAgICAgICAgICAgICB7ZWZmZWN0aXZlUmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAoe2VmZmVjdGl2ZVJlc3VsdENvdW50fSlcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgfVxuICAgICAgICAgIGRpc2FibGVkPXtlZmZlY3RpdmVSZXN1bHRDb3VudCA9PT0gMH1cbiAgICAgICAgPlxuICAgICAgICAgIHtlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrX19jb250ZW50Jywge1xuICAgICAgICAgICAgICAgIFtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTXTogaXNJblBvcHBlciAmJiBhY3RpdmVUYWIgPT09ICdyZXN1bHRzJ1xuICAgICAgICAgICAgICB9KX0gXG4gICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCBjbGlja3MgZnJvbSBidWJibGluZyB1cCB3aGVuIFJlc3VsdHMgdGFiIGlzIGFjdGl2ZVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVUYWIgPT09ICdyZXN1bHRzJykge1xuICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza1Jlc3VsdFxuICAgICAgICAgICAgICAgIGtleT17YCR7cXVlcnlJdGVtLmNvbmZpZ0lkfS0ke3F1ZXJ5RXhlY3V0aW9uS2V5UmVmLmN1cnJlbnR9YH1cbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17cHJvcHMud2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtPXtxdWVyeUl0ZW19XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXM9e3F1ZXJ5UGFyYW1SZWYuY3VycmVudH1cbiAgICAgICAgICAgICAgICByZXN1bHRDb3VudD17ZWZmZWN0aXZlUmVzdWx0Q291bnR9XG4gICAgICAgICAgICAgICAgbWF4UGVyUGFnZT17KGRhdGFTb3VyY2UgYXMgUXVlcmlhYmxlRGF0YVNvdXJjZSk/LmdldE1heFJlY29yZENvdW50Py4oKX1cbiAgICAgICAgICAgICAgICByZWNvcmRzPXtlZmZlY3RpdmVSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ9e2xhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYuY3VycmVudH1cbiAgICAgICAgICAgICAgICByZXN1bHRzTW9kZT17cmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17dXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXtncmFwaGljc0xheWVyfVxuICAgICAgICAgICAgICAgIG1hcFZpZXc9e21hcFZpZXd9XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXthY2N1bXVsYXRlZFJlY29yZHN9XG4gICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e29uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uTmF2QmFjaz17YXN5bmMgKGNsZWFyUmVzdWx0cyA9IGZhbHNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbmF2aWdhdGlvbiBmcm9tIFF1ZXJ5VGFza1Jlc3VsdFxuICAgICAgICAgICAgICAgICAgLy8gSWYgY2xlYXJSZXN1bHRzIGlzIHRydWUsIGNsZWFyIGV2ZXJ5dGhpbmcgYW5kIGdvIHRvIHF1ZXJ5IHRhYlxuICAgICAgICAgICAgICAgICAgLy8gSWYgZmFsc2UsIGp1c3Qgc3dpdGNoIHRvIHF1ZXJ5IHRhYiB3aXRob3V0IGNsZWFyaW5nXG4gICAgICAgICAgICAgICAgICBpZiAoY2xlYXJSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgZmxhZyB3aGVuIGNsZWFyaW5nXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5hdlRvRm9ybSh0cnVlKVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSnVzdCBzd2l0Y2ggdGFicywgZG9uJ3QgY2xlYXIgcmVzdWx0c1xuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGFzIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgICAgICAgICAgICAgICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXlcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvVGFiPlxuICAgICAgPC9UYWJzPlxuXG4gICAgICB7LyogRXJyb3IgTWVzc2FnZXMgKi99XG4gICAgICB7KHNlbGVjdGlvbkVycm9yIHx8IHpvb21FcnJvcikgJiYgKFxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDAgMTZweDtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgIGB9PlxuICAgICAgICAgIHtzZWxlY3Rpb25FcnJvciAmJiAoXG4gICAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgICBlcnJvcj17c2VsZWN0aW9uRXJyb3J9IFxuICAgICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFNlbGVjdGlvbkVycm9yKG51bGwpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHt6b29tRXJyb3IgJiYgKFxuICAgICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgICAgZXJyb3I9e3pvb21FcnJvcn0gXG4gICAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0Wm9vbUVycm9yKG51bGwpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBMb2FkaW5nIEluZGljYXRvciAtIG92ZXJsYXlzIG9uIHRvcCBvZiB0YWJzICovfVxuICAgICAge3N0YWdlID09PSAyICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICAgIHotaW5kZXg6IDEwMDA7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgYH0+XG4gICAgICAgICAgPExvYWRpbmdSZXN1bHQgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQge1xuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgdHlwZSBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyxcbiAgTWVzc2FnZU1hbmFnZXIsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UsXG4gIFJlY29yZFNldENoYW5nZVR5cGUsXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXG4gIGRhdGFTb3VyY2VVdGlsc1xufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IElGaWVsZEluZm8gfSBmcm9tICdAZXNyaS9hcmNnaXMtcmVzdC1mZWF0dXJlLXNlcnZpY2UnXG5pbXBvcnQgeyB0eXBlIFF1ZXJ5SXRlbVR5cGUsIFNwYXRpYWxSZWxhdGlvbiwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCBGaWVsZHNUeXBlLCBtYXBKU0FQSVVuaXRUb0RzVW5pdCwgbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWwgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQsIGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBmdW5jdGlvbiBjb21iaW5lRmllbGRzIChyZXN1bHREaXNwbGF5RmllbGRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+LCByZXN1bHRUaXRsZUV4cHJlc3Npb246IHN0cmluZywgaWRGaWVsZD86IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgZmllbGRzID0gbmV3IFNldDxzdHJpbmc+KClcbiAgcmVzdWx0RGlzcGxheUZpZWxkcz8uZm9yRWFjaChpdGVtID0+IGZpZWxkcy5hZGQoaXRlbSkpXG4gIGlmIChyZXN1bHRUaXRsZUV4cHJlc3Npb24pIHtcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSByZXN1bHRUaXRsZUV4cHJlc3Npb24ubWF0Y2goL1xce1xcdypcXH0vZylcbiAgICBpZiAodGVtcGxhdGVzPy5sZW5ndGggPiAwKSB7XG4gICAgICB0ZW1wbGF0ZXMuZm9yRWFjaChpdGVtID0+IGZpZWxkcy5hZGQoaXRlbS5zdWJzdHJpbmcoMSwgaXRlbS5sZW5ndGggLSAxKSkpXG4gICAgfVxuICB9XG4gIGlmIChpZEZpZWxkKSB7XG4gICAgZmllbGRzLmFkZChpZEZpZWxkKVxuICB9XG4gIHJldHVybiBBcnJheS5mcm9tKGZpZWxkcylcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdXNlciBpbnB1dCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uLlxuICogQHBhcmFtIGlucHV0IC0gVGhlIHJhdyB1c2VyIGlucHV0IChzdHJpbmcsIG51bWJlciwgZXRjLilcbiAqIEBwYXJhbSBpc0xpc3QgLSBPcHRpb25hbCBmbGFnIGluZGljYXRpbmcgaWYgdGhlIGlucHV0IGlzIGZyb20gYSBsaXN0L3NlbGVjdG9yIChsZW5pZW50IHZhbGlkYXRpb24pXG4gKiBAcmV0dXJucyBib29sZWFuIC0gdHJ1ZSBpZiBpbnB1dCBpcyB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1F1ZXJ5SW5wdXRWYWxpZCAoaW5wdXQ6IGFueSwgaXNMaXN0OiBib29sZWFuID0gZmFsc2UpOiBib29sZWFuIHtcbiAgLy8gSWYgaXQncyBhIGxpc3QtYmFzZWQgc2VsZWN0aW9uIChVbmlxdWUgVmFsdWVzLCBGaWVsZCBWYWx1ZXMpLCBcbiAgLy8gd2UgYWxsb3cgZW1wdHkvbnVsbCBhcyBpdCBtaWdodCByZXByZXNlbnQgXCJubyBmaWx0ZXJcIiBvciB0aGUgdXNlciBcbiAgLy8gaW50ZW5kcyB0byBpbnRlcmFjdCB3aXRoIHRoZSBsaXN0LlxuICBpZiAoaXNMaXN0KSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGlmIChpbnB1dCA9PT0gbnVsbCB8fCBpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIElmIGl0J3MgYSBzdHJpbmcsIGVuc3VyZSBpdCdzIG5vdCBlbXB0eSBvciBqdXN0IHdoaXRlc3BhY2VcbiAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gaW5wdXQudHJpbSgpICE9PSAnJ1xuICB9XG5cbiAgLy8gSWYgaXQncyBhbiBhcnJheSAob2Z0ZW4gdXNlZCBpbiB1bmlxdWUgdmFsdWVzIG9yIG11bHRpcGxlIHNlbGVjdGlvbilcbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgaWYgKGlucHV0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IGl0ZW0gaXMgdmFsaWQgKHVzdWFsbHkge3ZhbHVlOiAnLi4uJywgbGFiZWw6ICcuLi4nfSlcbiAgICBjb25zdCBmaXJzdEl0ZW0gPSBpbnB1dFswXVxuICAgIGlmIChmaXJzdEl0ZW0gJiYgdHlwZW9mIGZpcnN0SXRlbSA9PT0gJ29iamVjdCcgJiYgJ3ZhbHVlJyBpbiBmaXJzdEl0ZW0pIHtcbiAgICAgIHJldHVybiBpc1F1ZXJ5SW5wdXRWYWxpZChmaXJzdEl0ZW0udmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyBJZiBpdCdzIGEgamltdS1jb3JlIEltbXV0YWJsZSBhcnJheVxuICBpZiAoaW5wdXQuYXNNdXRhYmxlICYmIHR5cGVvZiBpbnB1dC50b0FycmF5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc3QgYXJyID0gaW5wdXQudG9BcnJheSgpXG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZVxuICAgIGNvbnN0IGZpcnN0SXRlbSA9IGFyclswXVxuICAgIGlmIChmaXJzdEl0ZW0gJiYgdHlwZW9mIGZpcnN0SXRlbSA9PT0gJ29iamVjdCcgJiYgJ3ZhbHVlJyBpbiBmaXJzdEl0ZW0pIHtcbiAgICAgIHJldHVybiBpc1F1ZXJ5SW5wdXRWYWxpZChmaXJzdEl0ZW0udmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgXG4gIC8vIEZvciBvdGhlciB0eXBlcyAobnVtYmVycywgZGF0ZXMpLCBpZiBpdCBleGlzdHMsIHdlIGNvdW50IGl0IGFzIHZhbGlkXG4gIHJldHVybiB0cnVlXG59XG5cbi8qKlxuICogU2FuaXRpemVzIHVzZXIgaW5wdXQgZm9yIHF1ZXJ5IHRhc2tzLlxuICogMS4gU3RyaXBzIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuXG4gKiAyLiBQcmV2ZW50cyBiYXNpYyBTUUwgaW5qZWN0aW9uIGJ5IGVzY2FwaW5nIHNpbmdsZSBxdW90ZXMuXG4gKiAzLiBIYW5kbGVzIGVtcHR5IG9yIHdoaXRlc3BhY2Utb25seSBzdHJpbmdzLlxuICogXG4gKiBAcGFyYW0gaW5wdXQgLSBUaGUgcmF3IHVzZXIgaW5wdXQgc3RyaW5nXG4gKiBAcmV0dXJucyBTYW5pdGl6ZWQgc3RyaW5nIG9yIG51bGwgaWYgaW5wdXQgaXMgZW1wdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplUXVlcnlJbnB1dCAoaW5wdXQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKCFpbnB1dCB8fCB0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBcbiAgY29uc3QgdHJpbW1lZCA9IGlucHV0LnRyaW0oKVxuICBpZiAodHJpbW1lZCA9PT0gJycpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICAvLyBCYXNpYyBTUUwgZXNjYXBpbmc6IHJlcGxhY2Ugc2luZ2xlIHF1b3RlcyB3aXRoIGRvdWJsZSBzaW5nbGUgcXVvdGVzXG4gIHJldHVybiB0cmltbWVkLnJlcGxhY2UoLycvZywgXCInJ1wiKVxufVxuXG4vKipcbiAqIFNhbml0aXplcyBhbGwgdmFsdWVzIHdpdGhpbiBhbiBJTVNxbEV4cHJlc3Npb24gb2JqZWN0LlxuICogXG4gKiBAcGFyYW0gc3FsRXhwciAtIFRoZSByYXcgU1FMIGV4cHJlc3Npb24gb2JqZWN0XG4gKiBAcmV0dXJucyBBIG5ldyBzYW5pdGl6ZWQgSU1TcWxFeHByZXNzaW9uIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVTcWxFeHByZXNzaW9uIChzcWxFeHByOiBJTVNxbEV4cHJlc3Npb24pOiBJTVNxbEV4cHJlc3Npb24ge1xuICBpZiAoIXNxbEV4cHIgfHwgIXNxbEV4cHIucGFydHMpIHtcbiAgICByZXR1cm4gc3FsRXhwclxuICB9XG5cbiAgbGV0IHNhbml0aXplZEV4cHIgPSBzcWxFeHByXG4gIHNxbEV4cHIucGFydHMuZm9yRWFjaCgocGFydCwgaW5kZXgpID0+IHtcbiAgICBpZiAocGFydC50eXBlID09PSAnU0lOR0xFJyAmJiBwYXJ0LnZhbHVlT3B0aW9ucz8udmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgcmF3VmFsdWUgPSBwYXJ0LnZhbHVlT3B0aW9ucy52YWx1ZVxuICAgICAgXG4gICAgICAvLyBDQVNFIDE6IFNpbXBsZSBTdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgcmF3VmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnN0IHNhbml0aXplZFZhbHVlID0gc2FuaXRpemVRdWVyeUlucHV0KHJhd1ZhbHVlKVxuICAgICAgICBpZiAoc2FuaXRpemVkVmFsdWUgIT09IHJhd1ZhbHVlKSB7XG4gICAgICAgICAgc2FuaXRpemVkRXhwciA9IHNhbml0aXplZEV4cHIuc2V0SW4oWydwYXJ0cycsIGluZGV4LCAndmFsdWVPcHRpb25zJywgJ3ZhbHVlJ10sIHNhbml0aXplZFZhbHVlKVxuICAgICAgICB9XG4gICAgICB9IFxuICAgICAgLy8gQ0FTRSAyOiBBcnJheSBvZiBvYmplY3RzIChVbmlxdWUgVmFsdWVzIC8gRHJvcGRvd25zKVxuICAgICAgLy8gV2UgbXVzdCBwcmVzZXJ2ZSB0aGUgSW1tdXRhYmxlIHN0cnVjdHVyZSB0byBhdm9pZCBcImFzTXV0YWJsZVwiIGVycm9yc1xuICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyYXdWYWx1ZSkgfHwgKHJhd1ZhbHVlICYmIHR5cGVvZiAocmF3VmFsdWUgYXMgYW55KS50b0FycmF5ID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICBjb25zdCBpc0ltbXV0YWJsZSA9IHR5cGVvZiAocmF3VmFsdWUgYXMgYW55KS50b0FycmF5ID09PSAnZnVuY3Rpb24nXG4gICAgICAgIGNvbnN0IGFyciA9IGlzSW1tdXRhYmxlID8gKHJhd1ZhbHVlIGFzIGFueSkudG9BcnJheSgpIDogKHJhd1ZhbHVlIGFzIGFueVtdKVxuICAgICAgICBcbiAgICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgICBjb25zdCBzYW5pdGl6ZWRBcnIgPSBhcnIubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiAndmFsdWUnIGluIGl0ZW0gJiYgdHlwZW9mIGl0ZW0udmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWRWYWwgPSBzYW5pdGl6ZVF1ZXJ5SW5wdXQoaXRlbS52YWx1ZSlcbiAgICAgICAgICAgIGlmIChzYW5pdGl6ZWRWYWwgIT09IGl0ZW0udmFsdWUpIHtcbiAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uaXRlbSwgdmFsdWU6IHNhbml0aXplZFZhbCB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBpdGVtXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgIC8vIElmIGl0IHdhcyBJbW11dGFibGUsIHdlIHNob3VsZCBpZGVhbGx5IHVzZSBJbW11dGFibGUgbWV0aG9kcyB0byB1cGRhdGUsXG4gICAgICAgICAgLy8gYnV0IHNldEluIG9uIHRoZSB0b3AtbGV2ZWwgZXhwcmVzc2lvbiB3aXRoIGEgcGxhaW4gYXJyYXkvb2JqZWN0IFxuICAgICAgICAgIC8vIHVzdWFsbHkgdHJpZ2dlcnMgdGhlIGZyYW1ld29yaydzIGF1dG8tY29udmVyc2lvbi5cbiAgICAgICAgICBzYW5pdGl6ZWRFeHByID0gc2FuaXRpemVkRXhwci5zZXRJbihbJ3BhcnRzJywgaW5kZXgsICd2YWx1ZU9wdGlvbnMnLCAndmFsdWUnXSwgc2FuaXRpemVkQXJyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIHJldHVybiBzYW5pdGl6ZWRFeHByXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQb3B1cFRlbXBsYXRlIChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4pOiBQcm9taXNlPHsgcG9wdXBUZW1wbGF0ZT86IF9fZXNyaS5Qb3B1cFRlbXBsYXRlLCBkZWZhdWx0UG9wdXBUZW1wbGF0ZT86IF9fZXNyaS5Qb3B1cFRlbXBsYXRlIH0+IHtcbiAgY29uc3QgeyByZXN1bHRGaWVsZHNUeXBlLCByZXN1bHREaXNwbGF5RmllbGRzLCByZXN1bHRUaXRsZUV4cHJlc3Npb24gPSAnJyB9ID0gcXVlcnlJdGVtXG4gIGNvbnN0IGN1cnJlbnRPcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBwb3B1cEluZm8gPSBjdXJyZW50T3JpZ2luRHMuZ2V0UG9wdXBJbmZvKClcblxuICBpZiAocmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzKSB7XG4gICAgbGV0IGZpZWxkczogc3RyaW5nW11cbiAgICBpZiAocmVzdWx0RGlzcGxheUZpZWxkcyA9PSBudWxsKSB7XG4gICAgICBjb25zdCBmaWVsZHNJbkNvbnRlbnQgPSBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQocG9wdXBJbmZvKVxuICAgICAgaWYgKGZpZWxkc0luQ29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHVuaXF1ZUZpZWxkcyA9IG5ldyBTZXQoZmllbGRzSW5Db250ZW50Lm1hcChlbGUgPT4gZWxlLmZpZWxkTmFtZSkpXG4gICAgICAgIGZpZWxkcyA9IEFycmF5LmZyb20odW5pcXVlRmllbGRzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmV0dXJuIGFsbCBmaWVsZHMgYnkgZGVmYXVsdFxuICAgICAgICBjb25zdCBhbGxGaWVsZHNTY2hlbWEgPSBvdXRwdXREUy5nZXRTY2hlbWEoKVxuICAgICAgICBmaWVsZHMgPSBhbGxGaWVsZHNTY2hlbWE/LmZpZWxkcyA/IE9iamVjdC52YWx1ZXMoYWxsRmllbGRzU2NoZW1hLmZpZWxkcykubWFwKGZpZWxkID0+IGZpZWxkLmppbXVOYW1lKSA6IFtdXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpZWxkcyA9IHJlc3VsdERpc3BsYXlGaWVsZHMuYXNNdXRhYmxlKHsgZGVlcDogdHJ1ZSB9KVxuICAgIH1cbiAgICBpZiAocG9wdXBJbmZvKSB7XG4gICAgICBjb25zdCBmaWVsZEluZm9zID0gW11cbiAgICAgIGZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgY29uc3QgZmllbGRJbmZvID0gcG9wdXBJbmZvLmZpZWxkSW5mb3MuZmluZChmaWVsZEluZm8gPT4gZmllbGRJbmZvLmZpZWxkTmFtZSA9PT0gZmllbGQpXG4gICAgICAgIGlmIChmaWVsZEluZm8pIHtcbiAgICAgICAgICBmaWVsZEluZm8udmlzaWJsZSA9IHRydWVcbiAgICAgICAgICBmaWVsZEluZm9zLnB1c2goZmllbGRJbmZvKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpZWxkSW5mb3MucHVzaCh7XG4gICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkLFxuICAgICAgICAgICAgbGFiZWw6IGZpZWxkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgICBmaWVsZEluZm9zLFxuICAgICAgICAgIGNvbnRlbnQ6IFt7XG4gICAgICAgICAgICB0eXBlOiAnZmllbGRzJ1xuICAgICAgICAgIH1dLFxuICAgICAgICAgIHRpdGxlOiByZXN1bHRUaXRsZUV4cHJlc3Npb25cbiAgICAgICAgfVxuICAgICAgfSBhcyBhbnlcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgZmllbGRJbmZvczogZmllbGRzLm1hcChmaWVsZCA9PiAoe1xuICAgICAgICAgIGZpZWxkTmFtZTogZmllbGQsXG4gICAgICAgICAgbGFiZWw6IGZpZWxkXG4gICAgICAgIH0pKSxcbiAgICAgICAgY29udGVudDogW3tcbiAgICAgICAgICB0eXBlOiAnZmllbGRzJ1xuICAgICAgICB9XSxcbiAgICAgICAgdGl0bGU6IHJlc3VsdFRpdGxlRXhwcmVzc2lvblxuICAgICAgfSBhcyBhbnlcbiAgICB9XG4gIH1cbiAgLy8gdGhlIHNvdXJjZSBsYXllciB3aWxsIHByb3ZpZGUgcG9wdXAgaW5mb1xuICBsZXQgbGF5ZXJPYmplY3RcbiAgaWYgKGN1cnJlbnRPcmlnaW5Ecy5sYXllcikge1xuICAgIGxheWVyT2JqZWN0ID0gY3VycmVudE9yaWdpbkRzLmxheWVyXG4gIH0gZWxzZSB7XG4gICAgbGF5ZXJPYmplY3QgPSBhd2FpdCBjdXJyZW50T3JpZ2luRHMuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpXG4gIH1cbiAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgYXdhaXQgbGF5ZXJPYmplY3QubG9hZCgpXG4gIH1cbiAgcmV0dXJuIHsgZGVmYXVsdFBvcHVwVGVtcGxhdGU6IGxheWVyT2JqZWN0Py5hc3NvY2lhdGVkTGF5ZXI/LmRlZmF1bHRQb3B1cFRlbXBsYXRlIHx8IGxheWVyT2JqZWN0Py5kZWZhdWx0UG9wdXBUZW1wbGF0ZSB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5UGFyYW1zIChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvbixcbiAgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaixcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sXG4gIHBhZ2U6IG51bWJlcixcbiAgcGFnZVNpemU6IG51bWJlclxuKTogUXVlcnlQYXJhbXMge1xuICBjb25zdCBjdXJyZW50UXVlcnlEc0pzb24gPSBvdXRwdXREUy5nZXREYXRhU291cmNlSnNvbigpXG4gIGNvbnN0IGN1cnJlbnRPcmlnaW5EczogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKClbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBjb25zdCBpc0xvY2FsRHMgPSBjdXJyZW50UXVlcnlEc0pzb24/LmlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlXG4gIGlmIChpc0xvY2FsRHMpIHtcbiAgICBvdXRwdXREUy5zZXRTb3VyY2VSZWNvcmRzKGN1cnJlbnRPcmlnaW5Ecy5nZXRTb3VyY2VSZWNvcmRzKCkpXG4gIH1cblxuICBjb25zdCB7IHVzZUF0dHJpYnV0ZUZpbHRlciwgdXNlU3BhdGlhbEZpbHRlciwgc29ydE9wdGlvbnMsIHJlc3VsdEZpZWxkc1R5cGUsIHJlc3VsdERpc3BsYXlGaWVsZHMsIHJlc3VsdFRpdGxlRXhwcmVzc2lvbiB9ID0gcXVlcnlJdGVtXG4gIFxuICAvLyBERVRFUk1JTkUgTUlOSU1BTCBGSUVMRFMgKFRoZSBcIkZpZWxkIFNocmVkZGVyXCIgT3B0aW1pemF0aW9uKVxuICAvLyBUbyBhY2hpZXZlIHBlcmZvcm1hbmNlIHBhcml0eSB3aXRoIFdlYiBBcHBCdWlsZGVyLCB3ZSBtdXN0IGF2b2lkIGZldGNoaW5nIGV2ZXJ5IFxuICAvLyBjb2x1bW4gaW4gdGhlIGRhdGFiYXNlICgqIG9yIGFsbCkuIFdlIHN1cmdpY2FsbHkgcmVxdWVzdCBvbmx5IHRoZSBmaWVsZHMgXG4gIC8vIG5lZWRlZCBmb3IgdGhlIFRpdGxlLCB0aGUgQXR0cmlidXRlIExpc3QsIGFuZCB0aGUgSUQgZmllbGQuXG4gIGxldCBvdXRwdXRGaWVsZHM6IHN0cmluZ1tdID0gW11cbiAgaWYgKHJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcyAmJiByZXN1bHREaXNwbGF5RmllbGRzKSB7XG4gICAgb3V0cHV0RmllbGRzID0gY29tYmluZUZpZWxkcyhyZXN1bHREaXNwbGF5RmllbGRzIGFzIGFueSwgcmVzdWx0VGl0bGVFeHByZXNzaW9uIHx8ICcnLCBvdXRwdXREUy5nZXRJZEZpZWxkKCkpXG4gIH0gZWxzZSB7XG4gICAgLy8gUG9wdXAgbW9kZTogR2V0IG9ubHkgdmlzaWJsZSBmaWVsZHMgZnJvbSBwb3B1cCBpbmZvXG4gICAgY29uc3QgcG9wdXBJbmZvID0gY3VycmVudE9yaWdpbkRzLmdldFBvcHVwSW5mbygpXG4gICAgY29uc3QgZmllbGROYW1lcyA9IE9iamVjdC52YWx1ZXMoY3VycmVudE9yaWdpbkRzLmdldFNjaGVtYSgpLmZpZWxkcyA/PyB7fSkubWFwKGYgPT4gZi5uYW1lKVxuICAgIGNvbnN0IHZhbGlkRmllbGRJbmZvcyA9IHBvcHVwSW5mbz8uZmllbGRJbmZvcz8uZmlsdGVyKGZpZWxkSW5mbyA9PiBmaWVsZEluZm8udmlzaWJsZSAhPT0gZmFsc2UgJiYgZmllbGROYW1lcy5pbmNsdWRlcyhmaWVsZEluZm8uZmllbGROYW1lKSlcbiAgICBvdXRwdXRGaWVsZHMgPSB2YWxpZEZpZWxkSW5mb3M/Lm1hcChmaWVsZEluZm8gPT4gZmllbGRJbmZvLmZpZWxkTmFtZSkgfHwgW11cbiAgICBcbiAgICAvLyBBbHdheXMgZW5zdXJlIElEIGZpZWxkIGlzIGluY2x1ZGVkXG4gICAgY29uc3QgaWRGaWVsZCA9IG91dHB1dERTLmdldElkRmllbGQoKVxuICAgIGlmIChpZEZpZWxkICYmICFvdXRwdXRGaWVsZHMuaW5jbHVkZXMoaWRGaWVsZCkpIHtcbiAgICAgIG91dHB1dEZpZWxkcy5wdXNoKGlkRmllbGQpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgbWVyZ2VkUXVlcnlQYXJhbXMgPSBvdXRwdXREUy5tZXJnZVF1ZXJ5UGFyYW1zKGN1cnJlbnRPcmlnaW5Ecy5nZXRDdXJyZW50UXVlcnlQYXJhbXMoKSA/PyB7fSwge1xuICAgIHdoZXJlOiAodXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHI/LnNxbCkgPyBkYXRhU291cmNlVXRpbHMuZ2V0QXJjR0lTU1FMKHNxbEV4cHIsIG91dHB1dERTKS5zcWwgOiAnMT0xJyxcbiAgICBzcWxFeHByZXNzaW9uOiAodXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHI/LnNxbCkgPyBzcWxFeHByIDogbnVsbCxcbiAgICAvLyBGT1JDRSBtaW5pbWFsIGZpZWxkcyBoZXJlIHRvIG92ZXJyaWRlIGFueSBmcmFtZXdvcmsgXCIqXCIgb3IgXCJhbGxcIlxuICAgIG91dEZpZWxkczogb3V0cHV0RmllbGRzXG4gIH0gYXMgYW55KVxuXG4gIC8vIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogVW5pdmVyc2FsIFNRTCBPcHRpbWl6ZXJcbiAgLy8gV2Ugbm9ybWFsaXplIHRoZSB1c2VyJ3MgaW5wdXQgdG8gVVBQRVJDQVNFIHRvIGVuc3VyZSBjYXNlLWluc2Vuc2l0aXZpdHkgd2hpbGUgXG4gIC8vIHVud3JhcHBpbmcgYW55IExPV0VSKCkgZnVuY3Rpb24gYXJvdW5kIHRoZSBmaWVsZCBuYW1lLiBUaGlzIGFsbG93cyB0aGUgZGF0YWJhc2UgXG4gIC8vIHRvIHVzZSBpdHMgYXR0cmlidXRlIGluZGV4ZXMgKFNBUkdhYmxlIHF1ZXJ5KS5cbiAgaWYgKG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlICYmIG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlLmluY2x1ZGVzKCdMT1dFUignKSkge1xuICAgIGNvbnN0IG9wdGltaXplZFdoZXJlID0gbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUucmVwbGFjZSgvTE9XRVJcXCgoW14pXSspXFwpXFxzKig9fExJS0UpXFxzKicoW14nXSopJy9naSwgKG1hdGNoLCBmaWVsZCwgb3BlcmF0b3IsIHZhbHVlKSA9PiB7XG4gICAgICAvLyBOb3JtYWxpemUgYm90aCBzaWRlcyB0byBVUFBFUkNBU0UuIFRoaXMgd29ya3MgZm9yIEFOWSBmaWVsZCBuYW1lLlxuICAgICAgLy8gV2Uga2VlcCB0aGUgZmllbGQgbmFtZSBcIm5ha2VkXCIgc28gdGhlIGluZGV4IGlzIHVzZWQuXG4gICAgICByZXR1cm4gYCR7ZmllbGR9ICR7b3BlcmF0b3J9ICcke3ZhbHVlLnRvVXBwZXJDYXNlKCl9J2BcbiAgICB9KVxuICAgIFxuICAgIGlmIChvcHRpbWl6ZWRXaGVyZSAhPT0gbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdzcWwtb3B0aW1pemVkJyxcbiAgICAgICAgb3JpZ2luYWw6IG1lcmdlZFF1ZXJ5UGFyYW1zLndoZXJlLFxuICAgICAgICBvcHRpbWl6ZWQ6IG9wdGltaXplZFdoZXJlXG4gICAgICB9KVxuICAgICAgbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUgPSBvcHRpbWl6ZWRXaGVyZVxuICAgIH1cbiAgfVxuXG4gIC8vIGNvbXBvc2UgcXVlcnkgcGFyYW1zIGZvciBxdWVyeVxuICBjb25zdCBxdWVyeVBhcmFtczogRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMgPSB7XG4gICAgLy8gdXJsOiBkcy51cmwsXG4gICAgcmV0dXJuR2VvbWV0cnk6IHRydWUsXG4gICAgLyoqIFxuICAgICAqIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogRm9yY2UgbG93ZXIgcHJlY2lzaW9uIGZvciBhbGwgZGlzcGxheSBxdWVyaWVzLlxuICAgICAqL1xuICAgIG1heEFsbG93YWJsZU9mZnNldDogMC4xLCBcbiAgICBwYWdlLFxuICAgIC8vIExpbWl0IHBhZ2VTaXplIHRvIGEgc2FuZSBkZWZhdWx0IGlmIG5vdCBwcm92aWRlZCBvciB0b28gbGFyZ2VcbiAgICBwYWdlU2l6ZTogKHBhZ2VTaXplICYmIHBhZ2VTaXplIDwgMTAwMCkgPyBwYWdlU2l6ZSA6IDEwMDAsXG4gICAgLi4ubWVyZ2VkUXVlcnlQYXJhbXNcbiAgfVxuXG4gIC8vIEZpbmFsIG92ZXJyaWRlIHRvIGVuc3VyZSBubyBcIipcIiBsZWFrcyB0aHJvdWdoIGZyb20gYW55IG1lcmdlIG9wZXJhdGlvblxuICBpZiAoIXF1ZXJ5UGFyYW1zLm91dEZpZWxkcyB8fCBxdWVyeVBhcmFtcy5vdXRGaWVsZHMuaW5jbHVkZXMoJyonKSkge1xuICAgIHF1ZXJ5UGFyYW1zLm91dEZpZWxkcyA9IG91dHB1dEZpZWxkc1xuICB9XG5cbiAgLy8gRGlhZ25vc3RpYyBsb2c6IFNob3cgZXhhY3RseSBXSElDSCBmaWVsZHMgYXJlIGJlaW5nIHNlbnRcbiAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgIGV2ZW50OiAncmVxdWVzdGluZy1kYXRhJyxcbiAgICBmaWVsZHNDb3VudDogcXVlcnlQYXJhbXMub3V0RmllbGRzPy5sZW5ndGgsXG4gICAgZmllbGRzOiBxdWVyeVBhcmFtcy5vdXRGaWVsZHM/LmpvaW4oJywgJyksXG4gICAgcGFnZVNpemU6IHF1ZXJ5UGFyYW1zLnBhZ2VTaXplLFxuICAgIG9mZnNldDogcXVlcnlQYXJhbXMubWF4QWxsb3dhYmxlT2Zmc2V0XG4gIH0pXG5cbiAgaWYgKHVzZVNwYXRpYWxGaWx0ZXIgJiYgc3BhdGlhbEZpbHRlcj8uZ2VvbWV0cnkpIHtcbiAgICBjb25zdCB7IGdlb21ldHJ5LCByZWxhdGlvbiA9IFNwYXRpYWxSZWxhdGlvbi5JbnRlcnNlY3QsIGJ1ZmZlciB9ID0gc3BhdGlhbEZpbHRlclxuXG4gICAgY29uc3Qgc3BhdGlhbFF1ZXJ5UGFyYW1zOiBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyA9IHtcbiAgICAgIGdlb21ldHJ5VHlwZTogZGF0YVNvdXJjZVV0aWxzLmNoYW5nZUpTQVBJR2VvbWV0cnlUeXBlVG9SZXN0QVBJR2VvbWV0cnlUeXBlKGdlb21ldHJ5LnR5cGUpLFxuICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LnRvSlNPTigpLFxuICAgICAgc3BhdGlhbFJlbDogbWFwSlNBUElTcGF0aWFsUmVsVG9Ec1NwYXRpYWxSZWxbcmVsYXRpb25dLFxuICAgICAgZGlzdGFuY2U6IGJ1ZmZlcj8uZGlzdGFuY2UsXG4gICAgICB1bml0czogYnVmZmVyPy51bml0ID8gbWFwSlNBUElVbml0VG9Ec1VuaXRbYnVmZmVyLnVuaXRdIDogdW5kZWZpbmVkXG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHNwYXRpYWxRdWVyeVBhcmFtcylcbiAgfVxuXG4gIGlmIChzb3J0T3B0aW9ucz8ubGVuZ3RoID4gMCkge1xuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlQYXJhbXMsIHtcbiAgICAgIG9yZGVyQnlGaWVsZHM6IHNvcnRPcHRpb25zLm1hcChpdGVtID0+IGAke2l0ZW0uamltdUZpZWxkTmFtZX0gJHtpdGVtLm9yZGVyfWApXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiBxdWVyeVBhcmFtc1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvdW50UXVlcnkgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4pOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBvdXRwdXREUy5sb2FkQ291bnQocXVlcnlQYXJhbXMsIHsgd2lkZ2V0SWQsIHJlZnJlc2g6IHRydWUgfSlcbiAgcmV0dXJuIHJlc3VsdCAhPSBudWxsID8gcmVzdWx0IDogMFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVF1ZXJ5IChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT4sXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBxdWVyeVBhcmFtczogUXVlcnlQYXJhbXNcbik6IFByb21pc2U8eyByZWNvcmRzPzogRGF0YVJlY29yZFtdLCBmaWVsZHM/OiBzdHJpbmdbXSB9PiB7XG4gIGNvbnN0IHBvcHVwSW5mbyA9IG91dHB1dERTLmdldFBvcHVwSW5mbygpXG5cbiAgY29uc3QgbGF5ZXJEZWZpbml0aW9uID0gb3V0cHV0RFMuZ2V0TGF5ZXJEZWZpbml0aW9uKClcbiAgY29uc3QgZ2V0RGVmYXVsdEZpZWxkSW5mb3MgPSAoKSA9PlxuICAgIFtcbiAgICAgIHsgZmllbGROYW1lOiBsYXllckRlZmluaXRpb24/Lm9iamVjdElkRmllbGQgPz8gJ29iamVjdGlkJywgbGFiZWw6ICdPQkpFQ1RJRCcsIHRvb2x0aXA6ICcnLCB2aXNpYmxlOiB0cnVlIH1cbiAgICBdIGFzIElGaWVsZEluZm9bXVxuICBjb25zdCBmaWVsZEluZm9zID0gKChmaWVsZEluZm9zKSA9PiAoZmllbGRJbmZvcy5sZW5ndGggPyBmaWVsZEluZm9zIDogZ2V0RGVmYXVsdEZpZWxkSW5mb3MoKSkpKFxuICAgIChwb3B1cEluZm8/LmZpZWxkSW5mb3MgfHwgW10pLmZpbHRlcigoaSkgPT4gaS52aXNpYmxlKVxuICApXG4gIC8vIGNvbnN0IGZpZWxkcyA9IG91dHB1dERTLmdldFNjaGVtYSgpPy5maWVsZHNcbiAgLy8gbGV0IHNlbGVjdGVkRmllbGROYW1lc1xuICAvLyBpZiAocXVlcnlJdGVtLnJlc3VsdEZpZWxkc1R5cGUgPT09IEZpZWxkc1R5cGUuU2VsZWN0QXR0cmlidXRlcykge1xuICAvLyAgIHNlbGVjdGVkRmllbGROYW1lcyA9IFtdLmNvbmNhdChxdWVyeUl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcywgcXVlcnlJdGVtLnJlc3VsdFRpdGxlRmllbGRzKVxuICAvLyB9IGVsc2Uge1xuICAvLyAgIHNlbGVjdGVkRmllbGROYW1lcyA9IGZpZWxkSW5mb3MubWFwKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby5maWVsZE5hbWUpXG4gIC8vIH1cbiAgLy8gY29uc3Qgc2VsZWN0ZWRGaWVsZEppbXVOYW1lcyA9IGZpZWxkc1xuICAvLyAgID8gT2JqZWN0LmtleXMoZmllbGRzKS5maWx0ZXIoKGppbXVOYW1lKSA9PiBzZWxlY3RlZEZpZWxkTmFtZXMuaW5jbHVkZXMoZmllbGRzW2ppbXVOYW1lXS5uYW1lKSlcbiAgLy8gICA6IFtdXG4gIC8vIG91dHB1dERTLnNldFNlbGVjdGVkRmllbGRzKHNlbGVjdGVkRmllbGRKaW11TmFtZXMpXG4gIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gIGxldCByZWNvcmRzID0gYXdhaXQgb3V0cHV0RFMubG9hZChxdWVyeVBhcmFtcywgeyB3aWRnZXRJZCB9KVxuICBjb25zdCBmZXRjaFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICBcbiAgaWYgKHJlY29yZHMgPT0gbnVsbCkge1xuICAgIHJlY29yZHMgPSBbXVxuICB9XG4gIGNvbnN0IG9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIFxuICBjb25zdCBsYXllclN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gIGNvbnN0IGxheWVyT2JqZWN0ID0gYXdhaXQgZ2V0TGF5ZXJPYmplY3Qob3JpZ2luRHMpXG4gIGNvbnN0IGxheWVyVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gbGF5ZXJTdGFydFRpbWVcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgZXZlbnQ6ICdxdWVyeS1jb21wbGV0ZScsXG4gICAgZmV0Y2hUaW1lOiBNYXRoLnJvdW5kKGZldGNoVGltZSksXG4gICAgbGF5ZXJUaW1lOiBNYXRoLnJvdW5kKGxheWVyVGltZSksXG4gICAgdG90YWxUaW1lOiBNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lKSxcbiAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIHJlY29yZHMuZm9yRWFjaCgocmVjb3JkKSA9PiB7XG4gICAgY29uc3QgZmVhdHVyZSA9IChyZWNvcmQgYXMgYW55KS5mZWF0dXJlXG4gICAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgICBmZWF0dXJlLnNvdXJjZUxheWVyID0gKGxheWVyT2JqZWN0IGFzIGFueSkuYXNzb2NpYXRlZExheWVyIHx8IGxheWVyT2JqZWN0XG4gICAgfVxuICAgIGZlYXR1cmUubGF5ZXIgPSBmZWF0dXJlLnNvdXJjZUxheWVyXG4gIH0pXG4gIGNvbnN0IHF1ZXJ5UmVzdWx0ID0ge1xuICAgIHJlY29yZHMsXG4gICAgZmllbGRzOiBmaWVsZEluZm9zLm1hcCgoZmllbGRJbmZvKSA9PiBmaWVsZEluZm8uZmllbGROYW1lKVxuICB9XG5cbiAgLy8gcHVibGlzaCBtZXNzYWdlXG4gIGNvbnN0IGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlID0gbmV3IERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKHdpZGdldElkLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLkNyZWF0ZVVwZGF0ZSwgW3tcbiAgICByZWNvcmRzOiBvdXRwdXREUy5nZXRBbGxMb2FkZWRSZWNvcmRzKCksXG4gICAgZmllbGRzOiBxdWVyeVJlc3VsdC5maWVsZHMsXG4gICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgbmFtZTogb3V0cHV0RFMuaWQsXG4gICAgbGFiZWw6IG91dHB1dERTLmdldExhYmVsKClcbiAgfV0pXG4gIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoZGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UpXG5cbiAgcmV0dXJuIHF1ZXJ5UmVzdWx0XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldExheWVyT2JqZWN0IChkYXRhU291cmNlOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKSB7XG4gIGNvbnN0IGxheWVyT2JqZWN0ID0gYXdhaXQgZGF0YVNvdXJjZS5jcmVhdGVKU0FQSUxheWVyQnlEYXRhU291cmNlKCkgYXMgX19lc3JpLkxheWVyXG4gIC8vIGxheWVyT2JqZWN0IG1heSBiZSB1bmRlZmluZWQgaWYgdGhlIGRhdGEgc291cmNlIGlzIGFkZGVkIGJ5IFVSTFxuICBpZiAobGF5ZXJPYmplY3QpIHtcbiAgICBhd2FpdCBsYXllck9iamVjdC5sb2FkKClcbiAgfVxuICByZXR1cm4gbGF5ZXJPYmplY3Rcbn1cblxuXG4iLCIvKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyByZXN1bHRzIGFjY3VtdWxhdGlvbiBpbiBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBIYW5kbGVzIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcyBmb3IgYWNjdW11bGF0aW5nIHF1ZXJ5IHJlc3VsdHMuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZCwgRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IERhdGFTb3VyY2VNYW5hZ2VyLCBEYXRhU291cmNlU3RhdHVzLCBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UsIFJlY29yZFNldENoYW5nZVR5cGUsIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IHJlbW92ZUhpZ2hsaWdodEdyYXBoaWNzIH0gZnJvbSAnLi9ncmFwaGljcy1sYXllci11dGlscydcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBjb21wb3NpdGUga2V5IGZvciBhIHJlY29yZCB0aGF0IGluY2x1ZGVzIGJvdGggb3JpZ2luIGRhdGEgc291cmNlIElEIGFuZCBvYmplY3RJZC5cbiAqIFRoaXMgZW5zdXJlcyB1bmlxdWVuZXNzIGFjcm9zcyBkaWZmZXJlbnQgbGF5ZXJzIHRoYXQgbWF5IGhhdmUgdGhlIHNhbWUgb2JqZWN0SWQuXG4gKiBcbiAqIEBwYXJhbSByZWNvcmQgLSBUaGUgZmVhdHVyZSBkYXRhIHJlY29yZFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSBjb250YWluaW5nIHRoZSByZWNvcmRcbiAqIEByZXR1cm5zIENvbXBvc2l0ZSBrZXkgc3RyaW5nOiBgJHtvcmlnaW5EU0lkfV8ke29iamVjdElkfWBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlY29yZEtleShcbiAgcmVjb3JkOiBGZWF0dXJlRGF0YVJlY29yZCxcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IHN0cmluZyB7XG4gIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgY29uc3Qgb3JpZ2luRFNJZCA9IG9yaWdpbkRTPy5pZCB8fCBvdXRwdXREUy5pZCAvLyBGYWxsYmFjayB0byBvdXRwdXREUyBpZiBubyBvcmlnaW5cbiAgY29uc3Qgb2JqZWN0SWQgPSByZWNvcmQuZ2V0SWQoKVxuICBjb25zdCBrZXkgPSBgJHtvcmlnaW5EU0lkfV8ke29iamVjdElkfWBcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVjb3JkLWtleS1nZW5lcmF0ZWQnLFxuICAgIG9yaWdpbkRTSWQsXG4gICAgb2JqZWN0SWQsXG4gICAga2V5LFxuICAgIGhhc09yaWdpbkRTOiAhIW9yaWdpbkRTXG4gIH0pXG4gIFxuICByZXR1cm4ga2V5XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlIGZvciBzdG9yaW5nIG1lcmdlZCBxdWVyeSByZXN1bHRzLlxuICogVGhpcyBkYXRhIHNvdXJjZSBpcyB3aWRnZXQtbGV2ZWwgYW5kIHBlcnNpc3RzIGFjcm9zcyBtdWx0aXBsZSBxdWVyaWVzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gb3JpZ2luRFMgLSBUaGUgb3JpZ2luIGRhdGEgc291cmNlIHRvIHVzZSBhcyB0aGUgYmFzZVxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQWNjdW11bGF0ZWRSZXN1bHRzRGF0YVNvdXJjZShcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2Vcbik6IFByb21pc2U8RmVhdHVyZUxheWVyRGF0YVNvdXJjZT4ge1xuICBjb25zdCBhY2N1bXVsYXRlZERTSWQgPSBgJHt3aWRnZXRJZH1fYWNjdW11bGF0ZWRfcmVzdWx0c2BcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnY3JlYXRpbmctYWNjdW11bGF0ZWQtZHMnLFxuICAgIHdpZGdldElkLFxuICAgIGFjY3VtdWxhdGVkRFNJZCxcbiAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZFxuICB9KVxuICBcbiAgLy8gQ2hlY2sgaWYgZGF0YSBzb3VyY2UgYWxyZWFkeSBleGlzdHNcbiAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICBsZXQgYWNjdW11bGF0ZWREUyA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlKGFjY3VtdWxhdGVkRFNJZCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBcbiAgaWYgKGFjY3VtdWxhdGVkRFMpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtZHMtYWxyZWFkeS1leGlzdHMnLFxuICAgICAgYWNjdW11bGF0ZWREU0lkXG4gICAgfSlcbiAgICByZXR1cm4gYWNjdW11bGF0ZWREU1xuICB9XG4gIFxuICAvLyBHZXQgb3JpZ2luIGRhdGEgc291cmNlIEpTT04gdG8gY3JlYXRlIG91dHB1dCBkYXRhIHNvdXJjZVxuICBjb25zdCBvcmlnaW5EYXRhU291cmNlSnNvbiA9IG9yaWdpbkRTLmdldERhdGFTb3VyY2VKc29uKClcbiAgXG4gIC8vIENyZWF0ZSBvdXRwdXQgZGF0YSBzb3VyY2UgSlNPTiBzaW1pbGFyIHRvIGhvdyBxdWVyeSBpdGVtcyBjcmVhdGUgb3V0cHV0IERTXG4gIGNvbnN0IG91dHB1dERhdGFTb3VyY2VKc29uID0ge1xuICAgIGlkOiBhY2N1bXVsYXRlZERTSWQsXG4gICAgbGFiZWw6ICdBY2N1bXVsYXRlZCBSZXN1bHRzJyxcbiAgICB0eXBlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8udHlwZSxcbiAgICBnZW9tZXRyeVR5cGU6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5nZW9tZXRyeVR5cGUsXG4gICAgdXJsOiBvcmlnaW5EYXRhU291cmNlSnNvbj8udXJsLFxuICAgIGl0ZW1JZDogb3JpZ2luRGF0YVNvdXJjZUpzb24/Lml0ZW1JZCxcbiAgICBwb3J0YWxVcmw6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5wb3J0YWxVcmwsXG4gICAgb3JpZ2luRGF0YVNvdXJjZXM6IFt7XG4gICAgICBkYXRhU291cmNlSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgbWFpbkRhdGFTb3VyY2VJZDogb3JpZ2luRFMuaWQsXG4gICAgICByb290RGF0YVNvdXJjZUlkOiBvcmlnaW5EUy5pZFxuICAgIH1dLFxuICAgIGxheWVySWQ6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5sYXllcklkLFxuICAgIGlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8uaXNEYXRhSW5EYXRhU291cmNlSW5zdGFuY2UsXG4gICAgaXNPdXRwdXRGcm9tV2lkZ2V0OiB0cnVlXG4gIH1cbiAgXG4gIC8vIENyZWF0ZSB0aGUgZGF0YSBzb3VyY2UgdXNpbmcgRGF0YVNvdXJjZU1hbmFnZXJcbiAgLy8gTm90ZTogVGhpcyBmb2xsb3dzIHRoZSBwYXR0ZXJuIGZyb20gc2V0dGluZy50c3ggZm9yIGNyZWF0aW5nIG91dHB1dCBkYXRhIHNvdXJjZXNcbiAgYWNjdW11bGF0ZWREUyA9IGRzTWFuYWdlci5jcmVhdGVEYXRhU291cmNlQnlEYXRhU291cmNlSnNvbihvdXRwdXREYXRhU291cmNlSnNvbikgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICBcbiAgLy8gU2V0IGluaXRpYWwgc3RhdHVzXG4gIGFjY3VtdWxhdGVkRFMuc2V0U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIGFjY3VtdWxhdGVkRFMuc2V0Q291bnRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtZHMtY3JlYXRlZCcsXG4gICAgYWNjdW11bGF0ZWREU0lkLFxuICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgIHN0YXR1czogYWNjdW11bGF0ZWREUy5nZXRTdGF0dXMoKVxuICB9KVxuICBcbiAgcmV0dXJuIGFjY3VtdWxhdGVkRFNcbn1cblxuLyoqXG4gKiBNZXJnZXMgbmV3IHF1ZXJ5IHJlc3VsdHMgd2l0aCBleGlzdGluZyByZWNvcmRzLlxuICogRGVkdXBsaWNhdGVzIHJlY29yZHMgdXNpbmcgY29tcG9zaXRlIGtleXMgKG9yaWdpbkRTSWRfb2JqZWN0SWQpLlxuICogXG4gKiBUaGlzIGZ1bmN0aW9uIG1lcmdlcyBuZXcgcmVjb3JkcyB3aXRoIGV4aXN0aW5nIHJlY29yZHMgdGhhdCB3ZXJlIGNhcHR1cmVkXG4gKiBiZWZvcmUgdGhlIHF1ZXJ5IGV4ZWN1dGVkLiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciBzdG9yaW5nIHRoZSBtZXJnZWRcbiAqIHJlY29yZHMgKHR5cGljYWxseSBpbiByZWNvcmRzUmVmIG9yIHN0YXRlKS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKiBAcGFyYW0gbmV3UmVjb3JkcyAtIE5ldyByZWNvcmRzIHRvIG1lcmdlIGluXG4gKiBAcGFyYW0gZXhpc3RpbmdSZWNvcmRzIC0gRXhpc3RpbmcgcmVjb3JkcyBjYXB0dXJlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIChvcHRpb25hbCwgZGVmYXVsdHMgdG8gZW1wdHkgYXJyYXkpXG4gKiBAcmV0dXJucyBBcnJheSBvZiBhbGwgbWVyZ2VkIHJlY29yZHMgKGV4aXN0aW5nICsgbmV3IHVuaXF1ZSByZWNvcmRzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgbmV3UmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgZXhpc3RpbmdSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbik6IEZlYXR1cmVEYXRhUmVjb3JkW10ge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ21lcmdpbmctcmVzdWx0cy1zdGFydCcsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgZXhpc3RpbmdSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgbmV3UmVjb3Jkc0NvdW50OiBuZXdSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgLy8gQnVpbGQgU2V0IG9mIGV4aXN0aW5nIHJlY29yZCBrZXlzIGZvciBmYXN0IGxvb2t1cFxuICBjb25zdCBleGlzdGluZ0tleXMgPSBuZXcgU2V0KFxuICAgIGV4aXN0aW5nUmVjb3Jkcy5tYXAocmVjb3JkID0+IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKSlcbiAgKVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdleGlzdGluZy1yZWNvcmRzLWNoZWNrJyxcbiAgICBleGlzdGluZ1JlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzLmxlbmd0aCxcbiAgICBleGlzdGluZ0tleXNDb3VudDogZXhpc3RpbmdLZXlzLnNpemVcbiAgfSlcbiAgXG4gIC8vIEZpbHRlciBuZXcgcmVjb3JkcyB0byBvbmx5IGluY2x1ZGUgdGhvc2Ugbm90IGFscmVhZHkgaW4gb3V0cHV0IERTXG4gIGNvbnN0IHVuaXF1ZU5ld1JlY29yZHMgPSBuZXdSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4ge1xuICAgIGNvbnN0IGtleSA9IGdldFJlY29yZEtleShyZWNvcmQsIG91dHB1dERTKVxuICAgIGNvbnN0IGlzRHVwbGljYXRlID0gZXhpc3RpbmdLZXlzLmhhcyhrZXkpXG4gICAgXG4gICAgaWYgKGlzRHVwbGljYXRlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdkdXBsaWNhdGUtcmVjb3JkLXNraXBwZWQnLFxuICAgICAgICBrZXksXG4gICAgICAgIG9iamVjdElkOiByZWNvcmQuZ2V0SWQoKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuICFpc0R1cGxpY2F0ZVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdkZWR1cGxpY2F0aW9uLWNvbXBsZXRlJyxcbiAgICBuZXdSZWNvcmRzQ291bnQ6IG5ld1JlY29yZHMubGVuZ3RoLFxuICAgIHVuaXF1ZU5ld1JlY29yZHNDb3VudDogdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGgsXG4gICAgZHVwbGljYXRlc1NraXBwZWQ6IG5ld1JlY29yZHMubGVuZ3RoIC0gdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIE1lcmdlIHJlY29yZHNcbiAgY29uc3QgbWVyZ2VkUmVjb3JkcyA9IFsuLi5leGlzdGluZ1JlY29yZHMsIC4uLnVuaXF1ZU5ld1JlY29yZHNdXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ21lcmdlLWNvbXBsZXRlJyxcbiAgICB0b3RhbFJlY29yZHNBZnRlck1lcmdlOiBtZXJnZWRSZWNvcmRzLmxlbmd0aCxcbiAgICBleGlzdGluZ0NvdW50OiBleGlzdGluZ1JlY29yZHMubGVuZ3RoLFxuICAgIG5ld1VuaXF1ZUNvdW50OiB1bmlxdWVOZXdSZWNvcmRzLmxlbmd0aFxuICB9KVxuICBcbiAgcmV0dXJuIG1lcmdlZFJlY29yZHNcbn1cblxuLyoqXG4gKiBSZW1vdmVzIG1hdGNoaW5nIHJlY29yZHMgZnJvbSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkcy5cbiAqIE1hdGNoZXMgcmVjb3JkcyB1c2luZyBjb21wb3NpdGUga2V5cyAob3JpZ2luRFNJZF9vYmplY3RJZCkuXG4gKiBcbiAqIFRoaXMgZnVuY3Rpb24gcmVtb3ZlcyByZWNvcmRzIGZyb20gZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyB0aGF0IHdlcmUgY2FwdHVyZWRcbiAqIGJlZm9yZSB0aGUgcXVlcnkgZXhlY3V0ZWQuIFRoZSBjYWxsZXIgaXMgcmVzcG9uc2libGUgZm9yIHN0b3JpbmcgdGhlIHJlbWFpbmluZ1xuICogcmVjb3JkcyAodHlwaWNhbGx5IGluIHJlY29yZHNSZWYgb3Igc3RhdGUpLlxuICogXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBrZXkgZ2VuZXJhdGlvbilcbiAqIEBwYXJhbSByZWNvcmRzVG9SZW1vdmUgLSBSZWNvcmRzIHRvIHJlbW92ZSAoZnJvbSBxdWVyeSByZXN1bHRzKVxuICogQHBhcmFtIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzIC0gRXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3JkcyBjYXB0dXJlZCBiZWZvcmUgcXVlcnkgZXhlY3V0aW9uIChvcHRpb25hbCwgZGVmYXVsdHMgdG8gZW1wdHkgYXJyYXkpXG4gKiBAcmV0dXJucyBBcnJheSBvZiByZW1haW5pbmcgcmVjb3JkcyBhZnRlciByZW1vdmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcmVjb3Jkc1RvUmVtb3ZlOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4pOiBGZWF0dXJlRGF0YVJlY29yZFtdIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmluZy1yZXN1bHRzLXN0YXJ0JyxcbiAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIElmIG5vIGFjY3VtdWxhdGVkIHJlY29yZHMsIG5vdGhpbmcgdG8gcmVtb3ZlXG4gIGlmIChleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnbm8tYWNjdW11bGF0ZWQtcmVjb3Jkcy10by1yZW1vdmUnLFxuICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWRcbiAgICB9KVxuICAgIHJldHVybiBbXVxuICB9XG4gIFxuICAvLyBJZiBubyByZWNvcmRzIHRvIHJlbW92ZSwgcmV0dXJuIGV4aXN0aW5nIHJlY29yZHMgdW5jaGFuZ2VkXG4gIGlmIChyZWNvcmRzVG9SZW1vdmUubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLXJlY29yZHMtdG8tcmVtb3ZlJyxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgfSlcbiAgICByZXR1cm4gZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNcbiAgfVxuICBcbiAgLy8gQnVpbGQgU2V0IG9mIGtleXMgdG8gcmVtb3ZlIGZvciBmYXN0IGxvb2t1cFxuICBjb25zdCByZW1vdmVLZXlzID0gbmV3IFNldChcbiAgICByZWNvcmRzVG9SZW1vdmUubWFwKHJlY29yZCA9PiBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUykpXG4gIClcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZlLWtleXMtYnVpbHQnLFxuICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICByZW1vdmVLZXlzQ291bnQ6IHJlbW92ZUtleXMuc2l6ZVxuICB9KVxuICBcbiAgLy8gRmlsdGVyIG91dCByZWNvcmRzIHRoYXQgbWF0Y2gga2V5cyB0byByZW1vdmVcbiAgY29uc3QgcmVtYWluaW5nUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gIGNvbnN0IHJlbW92ZWRSZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdID0gW11cbiAgXG4gIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICBjb25zdCBrZXkgPSBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUylcbiAgICBjb25zdCBzaG91bGRSZW1vdmUgPSByZW1vdmVLZXlzLmhhcyhrZXkpXG4gICAgXG4gICAgaWYgKHNob3VsZFJlbW92ZSkge1xuICAgICAgcmVtb3ZlZFJlY29yZHMucHVzaChyZWNvcmQpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZWNvcmQtbWFya2VkLWZvci1yZW1vdmFsJyxcbiAgICAgICAga2V5LFxuICAgICAgICBvYmplY3RJZDogcmVjb3JkLmdldElkKCksXG4gICAgICAgIG9yaWdpbkRTSWQ6IChyZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSk/LmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXT8uaWQgfHwgJ3Vua25vd24nXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZW1haW5pbmdSZWNvcmRzLnB1c2gocmVjb3JkKVxuICAgIH1cbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZhbC1jb21wbGV0ZScsXG4gICAgcmVjb3Jkc1JlbW92ZWQ6IHJlbW92ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoLFxuICAgIG1hdGNoZWRSZWNvcmRzQ291bnQ6IHJlbW92ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICB1bm1hdGNoZWRSZWNvcmRzQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGggLSByZW1vdmVkUmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIHJldHVybiByZW1haW5pbmdSZWNvcmRzXG59XG5cbi8qKlxuICogUmVtb3ZlcyByZWNvcmRzIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMuXG4gKiBHcm91cHMgcmVjb3JkcyBieSB0aGVpciBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIHVwZGF0ZXMgZWFjaCBvcmlnaW4gRFMncyBzZWxlY3Rpb24gc2VwYXJhdGVseS5cbiAqIFRoaXMgZW5zdXJlcyBtYXAgc2VsZWN0aW9uIGlzIHVwZGF0ZWQgY29ycmVjdGx5IHdoZW4gcmVjb3JkcyBjb21lIGZyb20gbXVsdGlwbGUgb3JpZ2luIGxheWVycy5cbiAqIEFsc28gcmVtb3ZlcyBncmFwaGljcyBmcm9tIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRCBmb3IgcHVibGlzaGluZyBtZXNzYWdlc1xuICogQHBhcmFtIHJlY29yZHNUb1JlbW92ZSAtIFJlY29yZHMgdG8gcmVtb3ZlIGZyb20gc2VsZWN0aW9uXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBrZXkgZ2VuZXJhdGlvbilcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byByZW1vdmUgZ3JhcGhpY3MgZnJvbSBncmFwaGljcyBsYXllciAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZHNUb1JlbW92ZTogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHVzZUdyYXBoaWNzTGF5ZXI/OiBib29sZWFuLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbik6IHZvaWQge1xuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92aW5nLXJlY29yZHMtZnJvbS1vcmlnaW4tc2VsZWN0aW9ucy1zdGFydCcsXG4gICAgd2lkZ2V0SWQsXG4gICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgdXNlR3JhcGhpY3NMYXllcjogISF1c2VHcmFwaGljc0xheWVyLFxuICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhZ3JhcGhpY3NMYXllclxuICB9KVxuICBcbiAgaWYgKHJlY29yZHNUb1JlbW92ZS5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnbm8tcmVjb3Jkcy10by1yZW1vdmUtZnJvbS1zZWxlY3Rpb24nLFxuICAgICAgd2lkZ2V0SWRcbiAgICB9KVxuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBSZW1vdmUgZnJvbSBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmdcbiAgaWYgKHVzZUdyYXBoaWNzTGF5ZXIgJiYgZ3JhcGhpY3NMYXllcikge1xuICAgIGNvbnN0IHJlY29yZElkc1RvUmVtb3ZlID0gcmVjb3Jkc1RvUmVtb3ZlLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3JlbW92aW5nLWdyYXBoaWNzLWZyb20tbGF5ZXInLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzVG9SZW1vdmUubGVuZ3RoLFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkXG4gICAgfSlcbiAgICByZW1vdmVIaWdobGlnaHRHcmFwaGljcyhncmFwaGljc0xheWVyLCByZWNvcmRJZHNUb1JlbW92ZSlcbiAgfVxuICBcbiAgLy8gR3JvdXAgcmVjb3JkcyBieSB0aGVpciBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+KClcbiAgXG4gIHJlY29yZHNUb1JlbW92ZS5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgY29uc3QgcmVjb3JkRFMgPSByZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgXG4gICAgaWYgKHJlY29yZERTKSB7XG4gICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrOiB0cnkgdG8gZ2V0IG9yaWdpbiBmcm9tIG91dHB1dERTXG4gICAgICBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IG51bGxcbiAgICB9XG4gICAgXG4gICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgIH1cbiAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykhLnB1c2gocmVjb3JkKVxuICAgIH1cbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVjb3Jkcy1ncm91cGVkLWJ5LW9yaWdpbicsXG4gICAgd2lkZ2V0SWQsXG4gICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZSxcbiAgICByZWNvcmRzQnlPcmlnaW5EUzogQXJyYXkuZnJvbShyZWNvcmRzQnlPcmlnaW5EUy5lbnRyaWVzKCkpLm1hcCgoW2RzLCByZWNvcmRzXSkgPT4gKHtcbiAgICAgIG9yaWdpbkRTSWQ6IGRzLmlkLFxuICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHMubGVuZ3RoXG4gICAgfSkpXG4gIH0pXG4gIFxuICAvLyBGb3IgZWFjaCBvcmlnaW4gRFMsIGdldCBjdXJyZW50IHNlbGVjdGlvbiBhbmQgcmVtb3ZlIG1hdGNoaW5nIHJlY29yZHNcbiAgcmVjb3Jkc0J5T3JpZ2luRFMuZm9yRWFjaCgocmVjb3Jkc1RvUmVtb3ZlRm9yT3JpZ2luLCBvcmlnaW5EUykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgY3VycmVudCBzZWxlY3RlZCByZWNvcmRzIGZyb20gdGhpcyBvcmlnaW4gRFNcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkSWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdwcm9jZXNzaW5nLW9yaWdpbi1kcy1yZW1vdmFsJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBjdXJyZW50U2VsZWN0ZWRDb3VudDogY3VycmVudFNlbGVjdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmVGb3JPcmlnaW4ubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBCdWlsZCBTZXQgb2YgSURzIHRvIHJlbW92ZSBmb3IgZmFzdCBsb29rdXBcbiAgICAgIGNvbnN0IGlkc1RvUmVtb3ZlID0gbmV3IFNldChcbiAgICAgICAgcmVjb3Jkc1RvUmVtb3ZlRm9yT3JpZ2luLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICApXG4gICAgICBcbiAgICAgIC8vIEZpbHRlciBvdXQgcmVjb3JkcyB0aGF0IG1hdGNoIElEcyB0byByZW1vdmVcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1JlY29yZHMgPSBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZC5nZXRJZCgpXG4gICAgICAgIHJldHVybiAhaWRzVG9SZW1vdmUuaGFzKHJlY29yZElkKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgcmVtYWluaW5nSWRzID0gcmVtYWluaW5nUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdvcmlnaW4tZHMtcmVtb3ZhbC1maWx0ZXJlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgcmVtb3ZlZENvdW50OiBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCAtIHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICByZW1haW5pbmdDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBzZWxlY3Rpb24gaW4gb3JpZ2luIERTXG4gICAgICBpZiAodHlwZW9mIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVtYWluaW5nSWRzLCByZW1haW5pbmdSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFB1Ymxpc2ggc2VsZWN0aW9uIGNoYW5nZSBtZXNzYWdlIGZvciB0aGlzIG9yaWdpbiBEU1xuICAgICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVtYWluaW5nUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLCBbb3JpZ2luRFMuaWRdKVxuICAgICAgKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdvcmlnaW4tZHMtc2VsZWN0aW9uLXVwZGF0ZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHJlbWFpbmluZ1JlY29yZHNDb3VudDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG1lc3NhZ2VQdWJsaXNoZWQ6IHRydWVcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ29yaWdpbi1kcy1yZW1vdmFsLWVycm9yJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgfSlcbiAgICB9XG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92aW5nLXJlY29yZHMtZnJvbS1vcmlnaW4tc2VsZWN0aW9ucy1jb21wbGV0ZScsXG4gICAgd2lkZ2V0SWQsXG4gICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZSxcbiAgICB0b3RhbFJlY29yZHNSZW1vdmVkOiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoXG4gIH0pXG59XG5cbi8qKlxuICogQ2xlYXJzIGFsbCByZWNvcmRzIGZyb20gdGhlIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2UuXG4gKiBcbiAqIEBwYXJhbSBhY2N1bXVsYXRlZERTIC0gVGhlIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2UgdG8gY2xlYXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQWNjdW11bGF0ZWRSZXN1bHRzKFxuICBhY2N1bXVsYXRlZERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiB2b2lkIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdjbGVhcmluZy1hY2N1bXVsYXRlZC1yZXN1bHRzJyxcbiAgICBhY2N1bXVsYXRlZERTSWQ6IGFjY3VtdWxhdGVkRFMuaWRcbiAgfSlcbiAgXG4gIC8vIFNldCBzdGF0dXMgdG8gTm90UmVhZHkgdG8gY2xlYXIgcmVjb3Jkc1xuICBhY2N1bXVsYXRlZERTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBhY2N1bXVsYXRlZERTLnNldENvdW50U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIFxuICAvLyBDbGVhciBhbnkgbG9hZGVkIHJlY29yZHMgaWYgcG9zc2libGVcbiAgLy8gTm90ZTogTWF5IG5lZWQgdG8gdXNlIERhdGFTb3VyY2VNYW5hZ2VyIG1ldGhvZHMgZGVwZW5kaW5nIG9uIEV4QiBBUElcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnYWNjdW11bGF0ZWQtcmVzdWx0cy1jbGVhcmVkJyxcbiAgICBhY2N1bXVsYXRlZERTSWQ6IGFjY3VtdWxhdGVkRFMuaWRcbiAgfSlcbn1cblxuIiwiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZmVhdHVyZSBzZWxlY3Rpb24gaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogQ29uc29saWRhdGVzIHJlcGVhdGVkIHNlbGVjdGlvbiBsb2dpYyB0byBmb2xsb3cgRFJZIHByaW5jaXBsZXMuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBEYXRhU291cmNlLCBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IE1lc3NhZ2VNYW5hZ2VyLCBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBhZGRIaWdobGlnaHRHcmFwaGljcyBhcyBhZGRHcmFwaGljc0xheWVyR3JhcGhpY3MsIGNsZWFyR3JhcGhpY3NMYXllciB9IGZyb20gJy4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIFF1ZXJ5U2ltcGxlIHRvIG5vdGlmeSBXaWRnZXQgb2Ygc2VsZWN0aW9uIGNoYW5nZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQgPSAncXVlcnlzaW1wbGUtc2VsZWN0aW9uLWNoYW5nZWQnXG5cbi8qKlxuICogRGlzcGF0Y2hlcyBhIGN1c3RvbSBzZWxlY3Rpb24gZXZlbnQgdG8gdGhlIHdpbmRvdyBzbyB0aGUgbWFpbiBXaWRnZXQgY2FuIHRyYWNrIHN0YXRlLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gcmVjb3JkSWRzIC0gQXJyYXkgb2Ygc2VsZWN0ZWQgcmVjb3JkIElEc1xuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHF1ZXJ5SXRlbUNvbmZpZ0lkIC0gVGhlIGNvbmZpZyBJRCBvZiB0aGUgcXVlcnkgdGhhdCBwcm9kdWNlZCB0aGVzZSByZXN1bHRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50KFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSxcbiAgcXVlcnlJdGVtQ29uZmlnSWQ6IHN0cmluZ1xuKTogdm9pZCB7XG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgY29uc3QgZGF0YVNvdXJjZUlkID0gb3JpZ2luRFM/LmlkXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgZXZlbnQ6ICdkaXNwYXRjaFNlbGVjdGlvbkV2ZW50JyxcbiAgICB3aWRnZXRJZCxcbiAgICByZWNvcmRDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICBxdWVyeUl0ZW1Db25maWdJZFxuICB9KVxuXG4gIGNvbnN0IHNlbGVjdGlvbkV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwge1xuICAgIGRldGFpbDoge1xuICAgICAgd2lkZ2V0SWQsXG4gICAgICByZWNvcmRJZHMsXG4gICAgICBkYXRhU291cmNlSWQsXG4gICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgfSxcbiAgICBidWJibGVzOiB0cnVlLFxuICAgIGNhbmNlbGFibGU6IHRydWVcbiAgfSlcbiAgd2luZG93LmRpc3BhdGNoRXZlbnQoc2VsZWN0aW9uRXZlbnQpXG59XG5cbi8qKlxuICogR2V0cyB0aGUgb3JpZ2luIGRhdGEgc291cmNlIGZyb20gYW4gb3V0cHV0IGRhdGEgc291cmNlLlxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHJldHVybnMgVGhlIG9yaWdpbiBkYXRhIHNvdXJjZSwgb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcmlnaW5EYXRhU291cmNlKFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWRcbik6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsIHtcbiAgaWYgKCFvdXRwdXREUykgcmV0dXJuIG51bGxcbiAgXG4gIC8vIFRyeSB0byBnZXQgb3JpZ2luIGRhdGEgc291cmNlc1xuICBjb25zdCBvcmlnaW5EYXRhU291cmNlcyA9IHR5cGVvZiBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcyA9PT0gJ2Z1bmN0aW9uJyBcbiAgICA/IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCkgXG4gICAgOiBbXVxuICAgIFxuICBpZiAob3JpZ2luRGF0YVNvdXJjZXMgJiYgb3JpZ2luRGF0YVNvdXJjZXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBvcmlnaW5EYXRhU291cmNlc1swXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIH1cbiAgXG4gIC8vIElmIGl0IGRvZXNuJ3QgaGF2ZSBvcmlnaW4gZGF0YSBzb3VyY2VzLCBpdCBtaWdodCBhbHJlYWR5IGJlIGFuIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAvLyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHNob3VsZCBoYXZlIGEgJ2xheWVyJyBwcm9wZXJ0eSBvciAnZ2V0TGF5ZXInIG1ldGhvZFxuICBpZiAoKG91dHB1dERTIGFzIGFueSkubGF5ZXIgfHwgKG91dHB1dERTIGFzIGFueSkuZ2V0TGF5ZXIgfHwgKG91dHB1dERTIGFzIGFueSkudHlwZSA9PT0gJ0ZlYXR1cmVMYXllcicpIHtcbiAgICByZXR1cm4gb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICB9XG4gIFxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIFNlbGVjdHMgcmVjb3JkcyBpbiBib3RoIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIFRoaXMgaXMgdGhlIHN0YW5kYXJkIHBhdHRlcm4gdXNlZCB0aHJvdWdob3V0IHRoZSB3aWRnZXQgZm9yIHNlbGVjdGlvbi5cbiAqIE9wdGlvbmFsbHkgdXNlcyBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHJlY29yZCBJRHMgdG8gc2VsZWN0XG4gKiBAcGFyYW0gcmVjb3JkcyAtIE9wdGlvbmFsIGFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgZm9yIHByb3BlciBoaWdobGlnaHRpbmdcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byB1c2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKiBAcGFyYW0gbWFwVmlldyAtIE1hcCB2aWV3IGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICByZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgXG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgXG4gIC8vIElmIHVzaW5nIGdyYXBoaWNzIGxheWVyLCBhZGQgZ3JhcGhpY3MgZm9yIGhpZ2hsaWdodGluZ1xuICBpZiAodXNlR3JhcGhpY3NMYXllciAmJiBncmFwaGljc0xheWVyICYmIG1hcFZpZXcgJiYgcmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcy11c2luZy1ncmFwaGljcy1sYXllcicsXG4gICAgICByZWNvcmRJZHNDb3VudDogcmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGF3YWl0IGFkZEdyYXBoaWNzTGF5ZXJHcmFwaGljcyhncmFwaGljc0xheWVyLCByZWNvcmRzLCBtYXBWaWV3KVxuICAgIFxuICAgIC8vIFN0aWxsIHNlbGVjdCBpbiBkYXRhIHNvdXJjZSBmb3Igc3RhdGUgbWFuYWdlbWVudCAoYnV0IGxheWVyIHNlbGVjdGlvbiB3b24ndCBzaG93IGlmIGxheWVyIGlzIG9mZilcbiAgICBpZiAob3JpZ2luRFMgJiYgdHlwZW9mIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgcmVjb3JkcylcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gT3JpZ2luYWwgYmVoYXZpb3I6IHVzZSBsYXllciBzZWxlY3Rpb25cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcy11c2luZy1sYXllci1zZWxlY3Rpb24nLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICB1c2VHcmFwaGljc0xheWVyLFxuICAgICAgaGFzR3JhcGhpY3NMYXllcjogISFncmFwaGljc0xheWVyLFxuICAgICAgaGFzTWFwVmlldzogISFtYXBWaWV3LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBTZWxlY3QgaW4gb3JpZ2luIGRhdGEgc291cmNlICh0aGUgYWN0dWFsIGxheWVyKVxuICAgIGlmIChvcmlnaW5EUyAmJiB0eXBlb2Ygb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBMb2cgbGF5ZXIgc3RhdGUgcmlnaHQgYmVmb3JlIHNlbGVjdGlvbiB0byBzZWUgd2hhdCdzIGF2YWlsYWJsZSB3aGVuIHNlbGVjdGlvbiB3b3Jrc1xuICAgICAgY29uc3QgbGF5ZXIgPSAob3JpZ2luRFMgYXMgYW55KS5sYXllciB8fCAob3JpZ2luRFMgYXMgYW55KS5nZXRMYXllcj8uKClcbiAgICAgIGlmIChsYXllcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0UmVjb3Jkc0J5SWRzLWxheWVyLXN0YXRlJyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICBoYXNMYXllck1hcDogISEobGF5ZXIgYXMgYW55KS5tYXAsXG4gICAgICAgICAgaGFzTGF5ZXJWaWV3OiAhIShsYXllciBhcyBhbnkpLnZpZXcsXG4gICAgICAgICAgaGFzTGF5ZXJQYXJlbnQ6ICEhKGxheWVyIGFzIGFueSkucGFyZW50LFxuICAgICAgICAgIHBhcmVudFR5cGU6IChsYXllciBhcyBhbnkpLnBhcmVudD8udHlwZSB8fCAnbm9uZScsXG4gICAgICAgICAgcGFyZW50SGFzTWFwOiAhIShsYXllciBhcyBhbnkpLnBhcmVudD8ubWFwLFxuICAgICAgICAgIHBhcmVudEhhc1ZpZXc6ICEhKGxheWVyIGFzIGFueSkucGFyZW50Py52aWV3LFxuICAgICAgICAgIHBhcmVudEhhc1ZpZXdzOiAhIShsYXllciBhcyBhbnkpLnBhcmVudD8udmlld3MsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gICAgfVxuICB9XG4gIFxuICAvLyBBbHdheXMgdXBkYXRlIG91dHB1dERTIGZvciB3aWRnZXQncyBpbnRlcm5hbCBzdGF0ZVxuICBpZiAodHlwZW9mIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGBkYXRhX3NgIHBhcmFtZXRlciBmcm9tIHRoZSBVUkwgaGFzaC5cbiAqIEV4cGVyaWVuY2UgQnVpbGRlciBhdXRvbWF0aWNhbGx5IGFkZHMgYGRhdGFfc2Agd2hlbiBzZWxlY3Rpb25zIGFyZSBtYWRlLFxuICogYnV0IGRvZXNuJ3QgcmVtb3ZlIGl0IHdoZW4gc2VsZWN0aW9ucyBhcmUgY2xlYXJlZCwgY2F1c2luZyBcImRpcnR5IGhhc2hcIiBpc3N1ZXMuXG4gKiBcbiAqIFRoaXMgZnVuY3Rpb24gZW5zdXJlcyB0aGUgaGFzaCBpcyBjbGVhbiB3aGVuIHNlbGVjdGlvbnMgYXJlIGNsZWFyZWQuXG4gKi9cbmZ1bmN0aW9uIGNsZWFyRGF0YVNQYXJhbWV0ZXJGcm9tSGFzaCgpOiB2b2lkIHtcbiAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICBpZiAoIWhhc2gpIHJldHVyblxuICBcbiAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKVxuICBcbiAgaWYgKHVybFBhcmFtcy5oYXMoJ2RhdGFfcycpKSB7XG4gICAgdXJsUGFyYW1zLmRlbGV0ZSgnZGF0YV9zJylcbiAgICBjb25zdCBuZXdIYXNoID0gdXJsUGFyYW1zLnRvU3RyaW5nKClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2NsZWFyRGF0YVNQYXJhbWV0ZXJGcm9tSGFzaCcsXG4gICAgICBoYWREYXRhUzogdHJ1ZSxcbiAgICAgIG5ld0hhc2g6IG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJyhlbXB0eSknLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIFVSTCB3aXRob3V0IHRyaWdnZXJpbmcgYSByZWxvYWRcbiAgICAvLyBBbHdheXMgcHJlc2VydmUgcGF0aG5hbWUgYW5kIHF1ZXJ5IHN0cmluZywgb25seSB1cGRhdGUgaGFzaFxuICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgXG4gICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgKG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJycpXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogQ2xlYXJzIHNlbGVjdGlvbiBpbiBib3RoIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIE9wdGlvbmFsbHkgY2xlYXJzIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIG1vZGUuXG4gKiBBbHNvIGNsZWFycyB0aGUgYGRhdGFfc2AgcGFyYW1ldGVyIGZyb20gdGhlIFVSTCBoYXNoIHRvIHByZXZlbnQgXCJkaXJ0eSBoYXNoXCIgaXNzdWVzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEIChuZWVkZWQgdG8gcHVibGlzaCBtZXNzYWdlKVxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHVzZUdyYXBoaWNzTGF5ZXIgLSBXaGV0aGVyIHRvIGNsZWFyIGdyYXBoaWNzIGxheWVyIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSBncmFwaGljc0xheWVyIC0gR3JhcGhpY3MgbGF5ZXIgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyAoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbik6IFByb21pc2U8dm9pZD4ge1xuICAvLyBDbGVhciBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBtb2RlXG4gIGlmICh1c2VHcmFwaGljc0xheWVyICYmIGdyYXBoaWNzTGF5ZXIpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMtY2xlYXJpbmctZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBjbGVhckdyYXBoaWNzTGF5ZXIoZ3JhcGhpY3NMYXllcilcbiAgfVxuXG4gIC8vIENsZWFyIGRhdGEgc291cmNlIHNlbGVjdGlvbiBmb3Igc3RhdGUgbWFuYWdlbWVudFxuICBhd2FpdCBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhvdXRwdXREUywgW10sIHVuZGVmaW5lZCwgZmFsc2UpXG5cbiAgLy8gUHVibGlzaCB0aGUgZW1wdHkgc2VsZWN0aW9uIG1lc3NhZ2Ugc28gdGhlIE1hcCBzZWxlY3Rpb24gKGJsdWUgYm94ZXMpIGNsZWFyc1xuICBpZiAob3V0cHV0RFMpIHtcbiAgICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgW10sIG91dHB1dERTLCB0cnVlKVxuICB9XG4gIFxuICAvLyBDbGVhciBkYXRhX3MgcGFyYW1ldGVyIGZyb20gaGFzaCB0byBwcmV2ZW50IGRpcnR5IGhhc2hcbiAgLy8gRXhwZXJpZW5jZSBCdWlsZGVyIGFkZHMgZGF0YV9zIHdoZW4gc2VsZWN0aW9ucyBhcmUgbWFkZSBidXQgZG9lc24ndCByZW1vdmUgaXQgd2hlbiBjbGVhcmVkXG4gIGNsZWFyRGF0YVNQYXJhbWV0ZXJGcm9tSGFzaCgpXG59XG5cbi8qKlxuICogUHVibGlzaGVzIGEgc2VsZWN0aW9uIGNoYW5nZSBtZXNzYWdlIGZvciB0aGUgZ2l2ZW4gcmVjb3JkcyBhbmQgZGF0YSBzb3VyY2VzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgKGVtcHR5IGFycmF5IHRvIGNsZWFyKVxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIGFsc29QdWJsaXNoVG9PdXRwdXREUyAtIFdoZXRoZXIgdG8gYWxzbyBwdWJsaXNoIGEgbWVzc2FnZSBmb3Igb3V0cHV0RFMgKGRlZmF1bHQ6IGZhbHNlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2UoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgYWxzb1B1Ymxpc2hUb091dHB1dERTOiBib29sZWFuID0gZmFsc2Vcbik6IHZvaWQge1xuICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgXG4gIGNvbnN0IG9yaWdpbkRTID0gZ2V0T3JpZ2luRGF0YVNvdXJjZShvdXRwdXREUylcbiAgXG4gIGlmIChvcmlnaW5EUykge1xuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBbb3JpZ2luRFMuaWRdKVxuICAgIClcbiAgfSBlbHNlIGlmIChhbHNvUHVibGlzaFRvT3V0cHV0RFMpIHtcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3JkcywgW291dHB1dERTLmlkXSlcbiAgICApXG4gIH1cbiAgXG4gIC8vIE9wdGlvbmFsbHkgcHVibGlzaCB0byBvdXRwdXREUyBhcyB3ZWxsIChmb3Igc29tZSBlZGdlIGNhc2VzKVxuICBpZiAoYWxzb1B1Ymxpc2hUb091dHB1dERTICYmIG9yaWdpbkRTKSB7XG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIFtvdXRwdXREUy5pZF0pXG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogU2VsZWN0cyByZWNvcmRzIGFuZCBwdWJsaXNoZXMgdGhlIHNlbGVjdGlvbiBtZXNzYWdlIGluIG9uZSBjYWxsLlxuICogVGhpcyBpcyB0aGUgbW9zdCBjb21tb24gcGF0dGVybiAtIHNlbGVjdGluZyByZWNvcmRzIGFuZCBub3RpZnlpbmcgdGhlIG1hcC5cbiAqIE9wdGlvbmFsbHkgdXNlcyBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZVxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHJlY29yZCBJRHMgdG8gc2VsZWN0XG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIEZlYXR1cmVEYXRhUmVjb3JkIG9iamVjdHMgZm9yIHByb3BlciBoaWdobGlnaHRpbmdcbiAqIEBwYXJhbSBhbHNvUHVibGlzaFRvT3V0cHV0RFMgLSBXaGV0aGVyIHRvIGFsc28gcHVibGlzaCBhIG1lc3NhZ2UgZm9yIG91dHB1dERTIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSB1c2VHcmFwaGljc0xheWVyIC0gV2hldGhlciB0byB1c2UgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoZGVmYXVsdDogZmFsc2UpXG4gKiBAcGFyYW0gZ3JhcGhpY3NMYXllciAtIEdyYXBoaWNzIGxheWVyIGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKiBAcGFyYW0gbWFwVmlldyAtIE1hcCB2aWV3IGluc3RhbmNlIChyZXF1aXJlZCBpZiB1c2VHcmFwaGljc0xheWVyIGlzIHRydWUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICByZWNvcmRJZHM6IHN0cmluZ1tdLFxuICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBhbHNvUHVibGlzaFRvT3V0cHV0RFM6IGJvb2xlYW4gPSBmYWxzZSxcbiAgdXNlR3JhcGhpY3NMYXllcjogYm9vbGVhbiA9IGZhbHNlLFxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBzZWxlY3RSZWNvcmRzSW5EYXRhU291cmNlcyhvdXRwdXREUywgcmVjb3JkSWRzLCByZWNvcmRzLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3Jkcywgb3V0cHV0RFMsIGFsc29QdWJsaXNoVG9PdXRwdXREUylcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgXCJDbGVhciByZXN1bHRzXCIgYnV0dG9uIGluIHRoZSBET00uXG4gKiBVc2VkIHdoZW4gcHJvZ3JhbW1hdGljYWxseSB0cmlnZ2VyaW5nIHRoZSBjbGVhciBhY3Rpb24uXG4gKiBcbiAqIEByZXR1cm5zIFRoZSBjbGVhciBidXR0b24gZWxlbWVudCwgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRDbGVhclJlc3VsdHNCdXR0b24oKTogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsIHtcbiAgLy8gSGFyZGVuZWQ6IFByaW9yaXRpemUgdGhlIG9uZSBpbiB0aGUgcmVzdWx0cyBoZWFkZXIsIGZhbGxiYWNrIHRvIGFueVxuICByZXR1cm4gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWVyeS1yZXN1bHRfX2hlYWRlciBidXR0b25bYXJpYS1sYWJlbD1cIkNsZWFyIHJlc3VsdHNcIl0nKSB8fCBcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b25bYXJpYS1sYWJlbD1cIkNsZWFyIHJlc3VsdHNcIl0nKSkgYXMgSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsXG59XG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBjbGFzc05hbWVzLFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmRcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCBMaXN0RGlyZWN0aW9uIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlSZXN1bHRJdGVtIH0gZnJvbSAnLi9xdWVyeS1yZXN1bHQtaXRlbSdcbmltcG9ydCB7IGdldFBvcHVwVGVtcGxhdGUgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgdXNlQXV0b0hlaWdodCB9IGZyb20gJy4vdXNlQXV0b0hlaWdodCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBTaW1wbGVMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIHJlY29yZHM6IERhdGFSZWNvcmRbXVxuICBkaXJlY3Rpb246IExpc3REaXJlY3Rpb25cbiAgb25Fc2NhcGU6ICgpID0+IHZvaWRcbiAgb25TZWxlY3RDaGFuZ2U6IChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxuICBvblJlbW92ZTogKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIGV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbiAgaXRlbUV4cGFuZFN0YXRlcz86IE1hcDxzdHJpbmcsIGJvb2xlYW4+XG4gIHJlbW92ZWRSZWNvcmRJZHM/OiBTZXQ8c3RyaW5nPlxuICBvblJlbmRlckRvbmU/OiAob3B0aW9uczogeyBkYXRhSXRlbXM6IGFueVtdIH0pID0+IHZvaWRcbn1cblxuY29uc3QgZ2V0U3R5bGUgPSAoaXNBdXRvSGVpZ2h0OiBib29sZWFuKSA9PiB7XG4gIHJldHVybiBjc3NgXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAwfTtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBtYXgtaGVpZ2h0OiAke2lzQXV0b0hlaWdodCA/ICdjYWxjKDYxLjh2aCAtIDEwMHB4KScgOiAnbm9uZSd9O1xuXG4gICAgLnF1ZXJ5LXJlc3VsdC1pdGVtICsgLnF1ZXJ5LXJlc3VsdC1pdGVtIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAwLjVyZW07XG4gICAgICBtYXJnaW4tdG9wOiAwO1xuICAgIH1cblxuICAgICYudmVydGljYWwge1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIC5saXN0LWl0ZW1zIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICAuZmVhdHVyZS1pbmZvLWNvbXBvbmVudCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAucXVlcnktcmVzdWx0LWl0ZW0gKyAucXVlcnktcmVzdWx0LWl0ZW0ge1xuICAgICAgICBtYXJnaW4tbGVmdDogMDtcbiAgICAgICAgbWFyZ2luLXRvcDogMC41cmVtO1xuICAgICAgfVxuICAgIH1cbiAgICAubGlzdC1pdGVtcyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gU2ltcGxlTGlzdCAocHJvcHM6IFNpbXBsZUxpc3RQcm9wcykge1xuICBjb25zdCB7XG4gICAgd2lkZ2V0SWQsXG4gICAgb3V0cHV0RFMsXG4gICAgcXVlcnlJdGVtLFxuICAgIHJlY29yZHMsXG4gICAgZGlyZWN0aW9uLFxuICAgIG9uRXNjYXBlLFxuICAgIG9uU2VsZWN0Q2hhbmdlLFxuICAgIG9uUmVtb3ZlLFxuICAgIGV4cGFuZEJ5RGVmYXVsdCxcbiAgICBpdGVtRXhwYW5kU3RhdGVzLFxuICAgIHJlbW92ZWRSZWNvcmRJZHMsXG4gICAgb25SZW5kZXJEb25lXG4gIH0gPSBwcm9wc1xuICBcbiAgY29uc3QgW3BvcHVwVGVtcGxhdGUsIHNldFBvcHVwVGVtcGxhdGVdID0gUmVhY3QudXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IFtkZWZhdWx0UG9wdXBUZW1wbGF0ZSwgc2V0RGVmYXVsdFBvcHVwVGVtcGxhdGVdID0gUmVhY3QudXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IGlzQXV0b0hlaWdodCA9IHVzZUF1dG9IZWlnaHQoKVxuICBjb25zdCByZXN1bHRDb250YWluZXJSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG5cbiAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHNcbiAgY29uc3QgZmlsdGVyZWRSZWNvcmRzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHJlY29yZHM/LmZpbHRlcihyZWNvcmQgPT4gIXJlbW92ZWRSZWNvcmRJZHM/LmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IFtdXG4gIH0sIFtyZWNvcmRzLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICAvLyBOb3RpZnkgcGFyZW50IHdoZW4gcmVjb3JkcyBhcmUgcmVuZGVyZWQgKGZvciBhdXRvLXN3aXRjaCBsb2dpYylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAob25SZW5kZXJEb25lICYmIGZpbHRlcmVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdTaW1wbGVMaXN0LW9uUmVuZGVyRG9uZS1jYWxsZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgZmlsdGVyZWRSZWNvcmRzQ291bnQ6IGZpbHRlcmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHRvdGFsUmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzPy5zaXplIHx8IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIG9uUmVuZGVyRG9uZSh7IGRhdGFJdGVtczogZmlsdGVyZWRSZWNvcmRzIH0pXG4gICAgfVxuICB9LCBbZmlsdGVyZWRSZWNvcmRzLCBvblJlbmRlckRvbmUsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIHJlY29yZHMubGVuZ3RoLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGdldFBvcHVwVGVtcGxhdGUob3V0cHV0RFMsIHF1ZXJ5SXRlbSkudGhlbihycyA9PiB7XG4gICAgICBzZXRQb3B1cFRlbXBsYXRlKHJzLnBvcHVwVGVtcGxhdGUpXG4gICAgICBzZXREZWZhdWx0UG9wdXBUZW1wbGF0ZShycy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSlcbiAgICB9KVxuICB9LCBbb3V0cHV0RFMsIHF1ZXJ5SXRlbV0pXG5cbiAgY29uc3QgaGFuZGxlS2V5VXAgPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIG9uRXNjYXBlKClcbiAgICB9XG4gIH0sIFtvbkVzY2FwZV0pXG5cbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJyAnKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IFxuICAgICAgb25LZXlVcD17aGFuZGxlS2V5VXB9IFxuICAgICAgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufSBcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyh7IHZlcnRpY2FsOiBkaXJlY3Rpb24gPT09IExpc3REaXJlY3Rpb24uVmVydGljYWwgfSl9IFxuICAgICAgY3NzPXtnZXRTdHlsZShpc0F1dG9IZWlnaHQpfVxuICAgICAgcmVmPXtyZXN1bHRDb250YWluZXJSZWZ9XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2xpc3QtaXRlbXMgcHgtNCBweS0xJyByb2xlPSdsaXN0Ym94Jz5cbiAgICAgICAge2ZpbHRlcmVkUmVjb3Jkcy5tYXAoKGRhdGFJdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkSWQgPSBkYXRhSXRlbS5nZXRJZCgpXG4gICAgICAgICAgLy8gVXNlIGluZGl2aWR1YWwgc3RhdGUgZnJvbSBtYXAgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIGV4cGFuZEJ5RGVmYXVsdFxuICAgICAgICAgIGNvbnN0IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSA9IGl0ZW1FeHBhbmRTdGF0ZXM/LmdldChyZWNvcmRJZClcbiAgICAgICAgICBjb25zdCBleHBhbmRCeURlZmF1bHRWYWx1ZSA9IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSAhPT0gdW5kZWZpbmVkID8gaW5kaXZpZHVhbEV4cGFuZFN0YXRlIDogKGV4cGFuZEJ5RGVmYXVsdCA/PyB0cnVlKVxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8UXVlcnlSZXN1bHRJdGVtXG4gICAgICAgICAgICAgIGtleT17cmVjb3JkSWR9XG4gICAgICAgICAgICAgIGRhdGE9e2RhdGFJdGVtIGFzIEZlYXR1cmVEYXRhUmVjb3JkfVxuICAgICAgICAgICAgICBkYXRhU291cmNlPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICBwb3B1cFRlbXBsYXRlPXtwb3B1cFRlbXBsYXRlfVxuICAgICAgICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZT17ZGVmYXVsdFBvcHVwVGVtcGxhdGV9XG4gICAgICAgICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQnlEZWZhdWx0VmFsdWV9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e29uU2VsZWN0Q2hhbmdlfVxuICAgICAgICAgICAgICBvblJlbW92ZT17b25SZW1vdmV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIClcbiAgICAgICAgfSl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIF93aWRnZXRMYWJlbDogJ1F1ZXJ5U2ltcGxlJyxcbiAgcmVzZXQ6ICdSZXNldCcsXG4gIHNlYXJjaExheWVyOiAnU2VhcmNoIExheWVyJyxcbiAgYXBwbHk6ICdTZWFyY2gnLFxuICBub0RhdGFBdmFpbGFibGU6ICdFcnJvciBpbiBsb2FkaW5nIGRhdGEnLFxuICBub1F1ZXJ5SXRlbTogJ05vIHF1ZXJ5JyxcbiAgbmV3UXVlcnlIaW50OiAnQWRkIGNvbnRlbnQgYnkgY2xpY2tpbmcgdGhlIFwie2xhYmVsfVwiIGJ1dHRvbiBvbiB0aGUgY29uZmlndXJhdGlvbiBwYW5lbCcsXG4gIGF0dHJpYnV0ZUZpbHRlcjogJ0F0dHJpYnV0ZSBmaWx0ZXInLFxuICBzcGF0aWFsRmlsdGVyOiAnU3BhdGlhbCBmaWx0ZXInLFxuICBzcGF0aWFsRmlsdGVyVHlwZV9DdXJyZW50TWFwRXh0ZW50OiAnQ3VycmVudCBtYXAgZXh0ZW50JyxcbiAgc3BhdGlhbEZpbHRlclR5cGVfSW50ZXJhY3RpdmVEcmF3TW9kZTogJ0RyYXduIGdyYXBoaWMnLFxuICByZXN1bHRzOiAnUmVzdWx0cycsXG4gIGZlYXR1cmVzRGlzcGxheWVkOiAnRmVhdHVyZXMgZGlzcGxheWVkJyxcbiAgY2xlYXJSZXN1bHQ6ICdDbGVhciByZXN1bHRzJyxcbiAgY2hlY2tSZXN1bHQ6ICdDaGVjayByZXN1bHRzJyxcbiAgbWFwTXVzdEJlVmlzaWJsZTogJ01hcCBtdXN0IGJlIHZpc2libGUnLFxuICBjaG9vc2VGaWx0ZXJUeXBlOiAnQ2hvb3NlIHRoZSBmaWx0ZXIgdHlwZScsXG4gIGNob29zZUdlb21ldHJ5VHlwZTogJ0Nob29zZSB0aGUgZ2VvbWV0cnkgdHlwZScsXG4gIGNsZWFyRHJhd2luZzogJ0NsZWFyIHRoZSBncmFwaGljIHdoZW4gYXBwbHlpbmcnLFxuICBmZWF0dXJlRnJvbURzOiAnU2VsZWN0aW5nIGZlYXR1cmVzIGZyb20gZGF0YSBzb3VyY2UnLFxuICBmZWF0dXJlRnJvbU1hcDogJ0dlb21ldHJpZXMgZnJvbSBhIG1hcCcsXG4gIGNob29zZUZpbHRlckxheWVyOiAnQ2hvb3NlIGEgZmlsdGVyIGxheWVyJyxcbiAgc2VsZWN0ZWRSZWNvcmRzOiAne251bX0gcmVjb3JkcyBhcmUgc2VsZWN0ZWQgZm9yIHRoZSBmaWx0ZXInLFxuICBzcGF0aWFsTm90QXZhaWxhYmxlOiAnU3BhdGlhbCBmaWx0ZXIgaXMgbm90IGF2YWlsYWJsZSBoZXJlLicsXG4gIHNwYXRpYWxOb3RBdmFpbGFibGVEZXNjOiAnU3BhdGlhbCBmaWx0ZXIgaXMgbm90IHN1cHBvcnRlZCBmb3IgYSBkYXRhIHNvdXJjZSB0aGF0IGFscmVhZHkgY29udGFpbnMgYSBzcGF0aWFsIHF1ZXJ5LicsXG4gIHByZWNvbmZpZ3VyZWQ6ICdQcmVjb25maWd1cmVkJyxcbiAgcnVudGltZTogJ1J1bnRpbWUnLFxuICBzZWxlY3RMb2FkZWQ6ICdTZWxlY3QgbG9hZGVkJyxcbiAgcmV0cmlldmluZzogJ1JldHJpZXZpbmcgcXVlcnkgcmVzdWx0cy4uLicsXG4gIHpvb21Ub1NlbGVjdGVkOiAnWm9vbSB0byBzZWxlY3RlZCcsXG4gIHF1ZXJ5VGFiOiAnUXVlcnknLFxuICByZXN1bHRzVGFiOiAnUmVzdWx0cycsXG4gIGV4cGFuZEFsbDogJ0V4cGFuZCBhbGwnLFxuICBjb2xsYXBzZUFsbDogJ0NvbGxhcHNlIGFsbCcsXG4gIGFkZFRvTWFwOiAnQWRkIHRvIG1hcCcsXG4gIHJlc3VsdHNNb2RlOiAnUmVzdWx0cyBtb2RlJyxcbiAgY3JlYXRlTmV3UmVzdWx0czogJ0NyZWF0ZSBuZXcgcmVzdWx0cycsXG4gIGFkZFRvQ3VycmVudFJlc3VsdHM6ICdBZGQgdG8gY3VycmVudCByZXN1bHRzJyxcbiAgcmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzOiAnUmVtb3ZlIGZyb20gY3VycmVudCByZXN1bHRzJyxcbiAgcmVzdWx0c01vZGVEaXNhYmxlZFJlbW92ZTogJ1JlbW92ZSBmcm9tIGN1cnJlbnQgcmVzdWx0cyAobm8gYWNjdW11bGF0ZWQgcmVzdWx0cyknLFxuICByZXN1bHRzTW9kZURlc2M6ICdDb250cm9scyBob3cgcXVlcnkgcmVzdWx0cyBhcmUgY29tYmluZWQ6XFxu4oCiIE5ldzogRWFjaCBxdWVyeSByZXBsYWNlcyBwcmV2aW91cyByZXN1bHRzXFxu4oCiIEFkZDogTmV3IHJlc3VsdHMgYXJlIGFkZGVkIHRvIGV4aXN0aW5nIHJlc3VsdHNcXG7igKIgUmVtb3ZlOiBNYXRjaGluZyByZXN1bHRzIGFyZSByZW1vdmVkIGZyb20gZXhpc3RpbmcgcmVzdWx0cycsXG4gIHJlc3VsdHNNb2RlTmV3OiAnTmV3JyxcbiAgcmVzdWx0c01vZGVBZGQ6ICdBZGQnLFxuICByZXN1bHRzTW9kZVJlbW92ZTogJ1JlbW92ZSdcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCB0eXBlIElNU3RhdGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBMYXlvdXRJdGVtU2l6ZU1vZGVzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgUXVlcnlXaWRnZXRDb250ZXh0IH0gZnJvbSAnLi93aWRnZXQtY29udGV4dCdcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUF1dG9IZWlnaHQgKCkge1xuICBjb25zdCBsYXlvdXRJbmZvID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVdpZGdldENvbnRleHQpXG4gIGxldCBsYXlvdXRJZFxuICBsZXQgbGF5b3V0SXRlbUlkXG4gIGlmIChsYXlvdXRJbmZvLmluY2x1ZGVzKCc6JykpIHtcbiAgICBjb25zdCByID0gbGF5b3V0SW5mby5zcGxpdCgnOicpXG4gICAgbGF5b3V0SWQgPSByWzBdXG4gICAgbGF5b3V0SXRlbUlkID0gclsxXVxuICB9XG4gIGNvbnN0IGlzQXV0byA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXT8uY29udGVudD8uW2xheW91dEl0ZW1JZF1cbiAgICByZXR1cm4gbGF5b3V0SXRlbT8uc2V0dGluZz8uYXV0b1Byb3BzPy5oZWlnaHQgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuICB9KVxuXG4gIHJldHVybiBpc0F1dG9cbn1cblxuXG4iLCJpbXBvcnQgaWNvbldhcm5pbmcgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcuc3ZnJ1xuaW1wb3J0IGljb25FcnJvciBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvZXJyb3Iuc3ZnJ1xuaW1wb3J0IGFycm93TmF2QmFjayBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnN2ZydcbmltcG9ydCBhcnJvd1JpZ2h0IGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZydcbmltcG9ydCB0b29sRGVsZXRlIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmcnXG5pbXBvcnQgaWNvbk1vcmUgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vbW9yZS1ob3Jpem9udGFsLnN2ZydcblxuZXhwb3J0IGNvbnN0IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwID0gKCkgPT4gKHtcbiAgaWNvbk1hcDoge1xuICAgIGljb25RdWVyeTogcmVxdWlyZSgnLi4vLi4vaWNvbi5zdmcnKSxcbiAgICBpY29uV2FybmluZyxcbiAgICBpY29uRXJyb3IsXG4gICAgYXJyb3dOYXZCYWNrLFxuICAgIGFycm93UmlnaHQsXG4gICAgdG9vbERlbGV0ZSxcbiAgICBpY29uTW9yZVxuICB9XG59KVxuXG5cblxuIiwiaW1wb3J0IHsgUmVhY3QgfSBmcm9tICdqaW11LWNvcmUnXG5cbmV4cG9ydCBjb25zdCBRdWVyeVdpZGdldENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PHN0cmluZz4obnVsbClcblxuXG4iLCIvKipcbiAqIFNoYXJlZCB6b29tIHV0aWxpdGllcyBmb3IgUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogXG4gKiBQcm92aWRlcyBwdXJlIGZ1bmN0aW9ucyBmb3Igem9vbWluZyB0byBmZWF0dXJlIHJlY29yZHMgdGhhdCBjYW4gYmUgdXNlZFxuICogYnkgYm90aCBSZWFjdCBob29rcyBhbmQgZGF0YSBhY3Rpb25zLlxuICovXG5cbmltcG9ydCB0eXBlIHsgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBpbnRlcmZhY2UgWm9vbVRvUmVjb3Jkc09wdGlvbnMge1xuICBwYWRkaW5nPzoge1xuICAgIGxlZnQ6IG51bWJlclxuICAgIHJpZ2h0OiBudW1iZXJcbiAgICB0b3A6IG51bWJlclxuICAgIGJvdHRvbTogbnVtYmVyXG4gIH1cbn1cblxuY29uc3QgREVGQVVMVF9QQURESU5HID0ge1xuICBsZWZ0OiA1MCxcbiAgcmlnaHQ6IDUwLFxuICB0b3A6IDUwLFxuICBib3R0b206IDUwXG59XG5cbi8qKlxuICogUHVyZSBmdW5jdGlvbiB0byB6b29tIHRvIGZlYXR1cmUgcmVjb3JkcyB3aXRoIHBhZGRpbmcuXG4gKiBcbiAqIEV4dHJhY3RzIGdlb21ldHJpZXMgZnJvbSByZWNvcmRzLCBjYWxjdWxhdGVzIGV4dGVudCwgYW5kIHpvb21zIHRoZSBtYXAgdmlld1xuICogdXNpbmcgbWFwVmlldy5nb1RvKCkgd2l0aCBjb25maWd1cmFibGUgcGFkZGluZy4gSGFuZGxlcyBib3RoIHNpbmdsZSBhbmRcbiAqIG11bHRpcGxlIGdlb21ldHJpZXMgYnkgY2FsY3VsYXRpbmcgdW5pb24gZXh0ZW50IHdoZW4gbmVlZGVkLlxuICogXG4gKiBAcGFyYW0gbWFwVmlldyAtIFRoZSBtYXAgdmlldyB0byB6b29tXG4gKiBAcGFyYW0gcmVjb3JkcyAtIEFycmF5IG9mIGZlYXR1cmUgZGF0YSByZWNvcmRzIHRvIHpvb20gdG9cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgem9vbSBvcHRpb25zIGluY2x1ZGluZyBwYWRkaW5nXG4gKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB6b29tIGNvbXBsZXRlc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gem9vbVRvUmVjb3JkcyhcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3LFxuICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBvcHRpb25zPzogWm9vbVRvUmVjb3Jkc09wdGlvbnNcbik6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIW1hcFZpZXcgfHwgIXJlY29yZHMgfHwgcmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IHBhZGRpbmcgPSBvcHRpb25zPy5wYWRkaW5nIHx8IERFRkFVTFRfUEFERElOR1xuXG4gIHRyeSB7XG4gICAgLy8gRXh0cmFjdCBnZW9tZXRyaWVzIGZyb20gcmVjb3Jkc1xuICAgIGNvbnN0IGdlb21ldHJpZXMgPSByZWNvcmRzXG4gICAgICAubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SlNBUElHZW9tZXRyeSgpKVxuICAgICAgLmZpbHRlcihnZW9tID0+IGdlb20gIT0gbnVsbClcbiAgICBcbiAgICBpZiAoZ2VvbWV0cmllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCBleHRlbnQ6IF9fZXNyaS5FeHRlbnQgfCBudWxsID0gbnVsbFxuICAgIFxuICAgIGlmIChnZW9tZXRyaWVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gU2luZ2xlIGdlb21ldHJ5IC0gZ2V0IGl0cyBleHRlbnRcbiAgICAgIGV4dGVudCA9IGdlb21ldHJpZXNbMF0uZXh0ZW50IHx8IChnZW9tZXRyaWVzWzBdIGFzIGFueSkuZ2V0RXh0ZW50Py4oKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNdWx0aXBsZSBnZW9tZXRyaWVzIC0gY2FsY3VsYXRlIHVuaW9uIGV4dGVudFxuICAgICAgY29uc3QgZXh0ZW50cyA9IGdlb21ldHJpZXNcbiAgICAgICAgLm1hcChnZW9tID0+IGdlb20uZXh0ZW50IHx8IChnZW9tIGFzIGFueSkuZ2V0RXh0ZW50Py4oKSlcbiAgICAgICAgLmZpbHRlcihlID0+IGUgIT0gbnVsbClcbiAgICAgIFxuICAgICAgaWYgKGV4dGVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICBleHRlbnQgPSBleHRlbnRzWzBdLmNsb25lKClcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBleHRlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZXh0ZW50ID0gZXh0ZW50LnVuaW9uKGV4dGVudHNbaV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKGV4dGVudCkge1xuICAgICAgYXdhaXQgbWFwVmlldy5nb1RvKGV4dGVudCwgeyBwYWRkaW5nIH0pXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnWk9PTScsIHtcbiAgICAgIGV2ZW50OiAnem9vbS1nb1RvLWVycm9yJyxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHMubGVuZ3RoXG4gICAgfSlcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cblxuXG5cbiIsImltcG9ydCB7IEJhc2VWZXJzaW9uTWFuYWdlciB9IGZyb20gJ2ppbXUtY29yZSdcblxuY2xhc3MgVmVyc2lvbk1hbmFnZXIgZXh0ZW5kcyBCYXNlVmVyc2lvbk1hbmFnZXIge1xuICB2ZXJzaW9ucyA9IFt7XG4gICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICBkZXNjcmlwdGlvbjogJ1RoZSBmaXJzdCB2ZXJzaW9uLicsXG4gICAgdXBncmFkZXI6IChvbGRDb25maWcpID0+IHtcbiAgICAgIHJldHVybiBvbGRDb25maWdcbiAgICB9XG4gIH1dXG59XG5cbmV4cG9ydCBjb25zdCB2ZXJzaW9uTWFuYWdlciA9IG5ldyBWZXJzaW9uTWFuYWdlcigpXG5cblxuXG4iLCIvKipcbiAqIFdpZGdldCB2ZXJzaW9uIG51bWJlci5cbiAqIEJhc2UgdmVyc2lvbiBtYXRjaGVzIEV4cGVyaWVuY2UgQnVpbGRlciB2ZXJzaW9uICgxLjE5LjApLlxuICogUmVsZWFzZSBudW1iZXIgaW5jcmVtZW50cyBvbiBtYWpvciBjaGFuZ2VzICgwMDEsIDAwMiwgMDAzLCAuLi4pLlxuICogTWlub3IgdmVyc2lvbiBpbmNyZW1lbnRzIG9uIHNtYWxsZXIgZml4ZXMgYmV0d2VlbiBtYWpvciByZWxlYXNlcyAocjAxNS4xLCByMDE1LjIsIC4uLikuXG4gKiBcbiAqIFRvIGluY3JlbWVudDpcbiAqIC0gTWFqb3IgY2hhbmdlOiBVcGRhdGUgUkVMRUFTRV9OVU1CRVIgKGUuZy4sIDAxNSAtPiAwMTYpIGFuZCByZXNldCBNSU5PUl9WRVJTSU9OIHRvIDBcbiAqIC0gTWlub3IgZml4OiBJbmNyZW1lbnQgTUlOT1JfVkVSU0lPTiAoZS5nLiwgMSAtPiAyKSB3aGlsZSBrZWVwaW5nIHNhbWUgUkVMRUFTRV9OVU1CRVJcbiAqL1xuY29uc3QgQkFTRV9WRVJTSU9OID0gJzEuMTkuMCdcbmNvbnN0IFJFTEVBU0VfTlVNQkVSID0gJzAxOCcgLy8gSW5jcmVtZW50IG9uIG1ham9yIGNoYW5nZXMgKDAwMSwgMDAyLCAwMDMsIC4uLilcbmNvbnN0IE1JTk9SX1ZFUlNJT04gPSAnNTgnIC8vIEluY3JlbWVudCBvbiBtaW5vciBmaXhlcyBiZXR3ZWVuIG1ham9yIHJlbGVhc2VzICgxLCAyLCAzLCAuLi4pXG5cbmV4cG9ydCBjb25zdCBXSURHRVRfVkVSU0lPTiA9IE1JTk9SX1ZFUlNJT04gJiYgTnVtYmVyKE1JTk9SX1ZFUlNJT04pID4gMFxuICA/IGAke0JBU0VfVkVSU0lPTn0tciR7UkVMRUFTRV9OVU1CRVJ9LiR7TUlOT1JfVkVSU0lPTn1gXG4gIDogYCR7QkFTRV9WRVJTSU9OfS1yJHtSRUxFQVNFX05VTUJFUn1gXG5cbiIsIi8qKlxuICogU2hhcmVkIGNvbW1vbiB1dGlsaXRpZXMgYW5kIGNvbXBvbmVudHMgZm9yIEV4cGVyaWVuY2UgQnVpbGRlciB3aWRnZXRzXG4gKiBcbiAqIFRoaXMgbW9kdWxlIGV4cG9ydHMgY29tbW9uIGZ1bmN0aW9uYWxpdHkgdGhhdCBjYW4gYmUgc2hhcmVkIGJldHdlZW5cbiAqIHF1ZXJ5LXNpbXBsZSwgaGVscGVyLXNpbXBsZSwgYW5kIG90aGVyIGN1c3RvbSB3aWRnZXRzLlxuICogXG4gKiBUaGlzIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vY29tbW9uL2NvbW1vbi1jb21wb25lbnRzJ1xuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vdXRpbHMnXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi91c2UtZHMtZXhpc3RzJ1xuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vZGF0YS1zb3VyY2UtdGlwJ1xuZXhwb3J0ICogZnJvbSAnLi9jb21tb24vZGVidWctbG9nZ2VyJ1xuXG5cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwganN4LCBjc3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIE1vZGFsLCBNb2RhbEJvZHksIE1vZGFsRm9vdGVyLCBQYW5lbEhlYWRlciwgSWNvbiwgdHlwZSBUaGVtZVByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHdpdGhUaGVtZSB9IGZyb20gJ2ppbXUtdGhlbWUnXG5pbXBvcnQgaWNvbkVycm9yIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmcnXG5jb25zdCB7IHVzZVN0YXRlIH0gPSBSZWFjdFxuXG4vKipcbiAqIEEgc2ltcGxlIEZ1bmN0aW9uYWwgQ29tcG9uZW50IHN0b3Jpbmcgc29tZSBTdGF0ZXMgdGhhdCBhcmUgY29tbW9ubHkgdXNlZFxuICovXG5leHBvcnQgY29uc3QgU3RhdGVIb2xkZXIgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyBpbml0U3RhdGUgPSB7fSwgY2hpbGRyZW4gfSA9IHByb3BzXG4gIGNvbnN0IGRlZmF1bHRTdGF0ZU1hcCA9IHtcbiAgICB2aXNpYmxlOiB0cnVlLFxuICAgIHJlZkNvbnRhaW5lcjogbnVsbFxuICB9XG4gIGNvbnN0IHVzZVN0YXRlTWFwID0ge1xuICAgIHZpc2libGU6IHVzZVN0YXRlKCd2aXNpYmxlJyBpbiBpbml0U3RhdGUgPyBpbml0U3RhdGUudmlzaWJsZSA6IGRlZmF1bHRTdGF0ZU1hcC52aXNpYmxlKSxcbiAgICByZWZDb250YWluZXI6IHVzZVN0YXRlKCdyZWZDb250YWluZXInIGluIGluaXRTdGF0ZSA/IGluaXRTdGF0ZS5yZWZDb250YWluZXIgOiBkZWZhdWx0U3RhdGVNYXAucmVmQ29udGFpbmVyKSxcbiAgICBjdXN0b21EYXRhOiB1c2VTdGF0ZSh7IC4uLmluaXRTdGF0ZS5jdXN0b21EYXRhIH0pXG4gIH1cbiAgcmV0dXJuIDxSZWFjdC5GcmFnbWVudD57Y2hpbGRyZW4odXNlU3RhdGVNYXApfTwvUmVhY3QuRnJhZ21lbnQ+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlhbG9nUGFuZWxQcm9wcyB7XG4gIHBhbmVsVmlzaWJsZTogYm9vbGVhblxuICBzZXRQYW5lbFZpc2libGU6ICh2aXNpYmxlOiBib29sZWFuKSA9PiB2b2lkXG4gIGdldEkxOG5NZXNzYWdlOiAoaWQ6IHN0cmluZykgPT4gYW55XG4gIGlzTW9kYWw/OiBib29sZWFuXG4gIHRpdGxlPzogYW55XG4gIGJvZHlDb250ZW50PzogYW55XG4gIGhhc0hlYWRlcj86IGJvb2xlYW5cbiAgaGFzRm9vdGVyPzogYm9vbGVhblxufVxuXG4vKipcbiAqIEEgZGlhbG9nIHBvcHVwXG4gKi9cbmV4cG9ydCBjb25zdCBEaWFsb2dQYW5lbCA9IHdpdGhUaGVtZSgocHJvcHM6IERpYWxvZ1BhbmVsUHJvcHMgJiBUaGVtZVByb3BzKSA9PiB7XG4gIGNvbnN0IHsgdGhlbWUsIHBhbmVsVmlzaWJsZSwgc2V0UGFuZWxWaXNpYmxlLCBnZXRJMThuTWVzc2FnZSwgaXNNb2RhbCA9IHRydWUsIHRpdGxlID0gZ2V0STE4bk1lc3NhZ2UoJ3F1ZXJ5TWVzc2FnZScpLCBib2R5Q29udGVudCA9ICcnLCBoYXNIZWFkZXIgPSB0cnVlLCBoYXNGb290ZXIgPSB0cnVlIH0gPSBwcm9wc1xuICBjb25zdCB0b2dnbGUgPSAoKSA9PiB7IHNldFBhbmVsVmlzaWJsZShmYWxzZSkgfVxuICBjb25zdCBnZXRDb250ZW50ID0gKCkgPT4gPFJlYWN0LkZyYWdtZW50PlxuICAgIHtcbiAgICAgIGhhc0hlYWRlciAmJlxuICAgICAgICA8UGFuZWxIZWFkZXIgY2xhc3NOYW1lPSdweS0yJyB0aXRsZT17dGl0bGV9IG9uQ2xvc2U9e3RvZ2dsZX0gLz5cbiAgICB9XG4gICAgPE1vZGFsQm9keT57Ym9keUNvbnRlbnR9PC9Nb2RhbEJvZHk+XG4gICAge1xuICAgICAgaGFzRm9vdGVyICYmXG4gICAgICAgIDxNb2RhbEZvb3Rlcj5cbiAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZX0+e2dldEkxOG5NZXNzYWdlKCdvaycpfTwvQnV0dG9uPlxuICAgICAgICA8L01vZGFsRm9vdGVyPlxuICAgIH1cbiAgPC9SZWFjdC5GcmFnbWVudD5cbiAgY29uc3QgZ2VuZXJhbENsYXNzTmFtZSA9ICd1aS11bml0LWRpYWxvZy1wYW5lbCdcbiAgY29uc3QgcmVuZGVyTW9kYWxDb250ZW50ID0gKCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICA8TW9kYWwgY2xhc3NOYW1lPXtnZW5lcmFsQ2xhc3NOYW1lfSBpc09wZW49e3BhbmVsVmlzaWJsZX0gdG9nZ2xlPXt0b2dnbGV9IGJhY2tkcm9wPSdzdGF0aWMnPlxuICAgICAgICB7Z2V0Q29udGVudCgpfVxuICAgICAgPC9Nb2RhbD5cbiAgICApXG4gIH1cbiAgY29uc3QgcmVuZGVyTm9uTW9kYWxDb250ZW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IGdldFN0eWxlID0gKCkgPT4gY3NzYFxuICAgICAgJi51aS11bml0LWRpYWxvZy1wYW5lbC5tb2RhbC1kaWFsb2cge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAubW9kYWwtY29udGVudCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5yZWYucGFsZXR0ZS5uZXV0cmFsWzYwMF19O1xuICAgICAgICAgIGNvbG9yOiAke3RoZW1lLnJlZi5wYWxldHRlLmJsYWNrfTtcbiAgICAgICAgICBmb250LXNpemU6IC43NXJlbTtcbiAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAucGFuZWwtaGVhZGVyIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogLjgxMjVyZW07XG4gICAgICAgICAgICBwYWRkaW5nOiAuNjI1cmVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICAubW9kYWwtYm9keSB7XG4gICAgICAgICAgICBwYWRkaW5nOiAwIC42MjVyZW0gLjc1cmVtO1xuICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtnZW5lcmFsQ2xhc3NOYW1lfSBtb2RhbC1kaWFsb2cgJHtwYW5lbFZpc2libGUgPyAnJyA6ICdjb2xsYXBzZSd9YH0gY3NzPXtnZXRTdHlsZSgpfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWNvbnRlbnQnPlxuICAgICAgICAgIHtnZXRDb250ZW50KCl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG4gIHJldHVybiBpc01vZGFsID8gcmVuZGVyTW9kYWxDb250ZW50KCkgOiByZW5kZXJOb25Nb2RhbENvbnRlbnQoKVxufSlcblxuZXhwb3J0IGVudW0gRW50aXR5U3RhdHVzVHlwZSB7XG4gIE5vbmUgPSAnJyxcbiAgSW5pdCA9ICdpbml0JyxcbiAgTG9hZGluZyA9ICdsb2FkaW5nJyxcbiAgTG9hZGVkID0gJ2xvYWRlZCcsXG4gIFdhcm5pbmcgPSAnd2FybmluZycsXG4gIEVycm9yID0gJ2Vycm9yJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGF0dXNJbmRpY2F0b3JQcm9wcyB7XG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBzdGF0dXNUeXBlPzogRW50aXR5U3RhdHVzVHlwZVxuICB0aXRsZT86IHN0cmluZ1xufVxuXG4vKipcbiAqIEFuIGFuaW1hdGFibGUgaWNvbiByZXByZXNlbnRpbmcgc3RhdHVzXG4gKi9cbmV4cG9ydCBjb25zdCBTdGF0dXNJbmRpY2F0b3IgPSB3aXRoVGhlbWUoKHByb3BzOiBTdGF0dXNJbmRpY2F0b3JQcm9wcyAmIFRoZW1lUHJvcHMpID0+IHtcbiAgY29uc3QgeyB0aGVtZSwgY2xhc3NOYW1lLCB0aXRsZSwgc3RhdHVzVHlwZSB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0U3R5bGUgPSAoKSA9PiBjc3NgXG4gICAgJi51aS11bml0LXN0YXR1cy1pbmRpY2F0b3Ige1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICYudWktdW5pdC1zdGF0dXMtaW5kaWNhdG9yX3N0YXR1cy10eXBlLWxvYWRpbmcge1xuICAgICAgICAmOmJlZm9yZSB7XG4gICAgICAgICAgQGtleWZyYW1lcyBsb2FkaW5nIHtcbiAgICAgICAgICAgIDAlIHt0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfTtcbiAgICAgICAgICAgIDEwMCUge3RyYW5zZm9ybTogcm90YXRlKDM2MGRlZyl9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICB3aWR0aDogMXJlbTtcbiAgICAgICAgICBoZWlnaHQ6IDFyZW07XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgJHt0aGVtZT8ucmVmLnBhbGV0dGU/Lm5ldXRyYWw/Lls1MDBdfTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICR7dGhlbWU/LnN5cy5jb2xvcj8ucHJpbWFyeT8ubWFpbn07XG4gICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICBhbmltYXRpb246IGxvYWRpbmcgMnMgaW5maW5pdGUgbGluZWFyO1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogLjI1cmVtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICBgXG4gIHJldHVybiAoXG4gICAgc3RhdHVzVHlwZSAmJlxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2NsYXNzTmFtZSA/PyAnJ30gdWktdW5pdC1zdGF0dXMtaW5kaWNhdG9yIHVpLXVuaXQtc3RhdHVzLWluZGljYXRvcl9zdGF0dXMtdHlwZS0ke3N0YXR1c1R5cGV9YH0gdGl0bGU9e3RpdGxlfSBjc3M9e2dldFN0eWxlKCl9IC8+XG4gIClcbn0pXG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JNZXNzYWdlUHJvcHMge1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbFxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgb25EaXNtaXNzPzogKCkgPT4gdm9pZFxufVxuXG4vKipcbiAqIFNpbXBsZSBlcnJvciBtZXNzYWdlIGNvbXBvbmVudCBmb3IgZGlzcGxheWluZyB1c2VyLWZhY2luZyBlcnJvcnMuXG4gKiBVc2UgRGF0YVNvdXJjZVRpcCBmb3IgZGF0YSBzb3VyY2UtcmVsYXRlZCBlcnJvcnMuXG4gKi9cbmV4cG9ydCBjb25zdCBFcnJvck1lc3NhZ2UgPSAocHJvcHM6IEVycm9yTWVzc2FnZVByb3BzKSA9PiB7XG4gIGNvbnN0IHsgZXJyb3IsIGNsYXNzTmFtZSA9ICcnLCBvbkRpc21pc3MgfSA9IHByb3BzXG4gIFxuICBpZiAoIWVycm9yKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBcbiAgY29uc3QgZXJyb3JTdHlsZSA9IGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcGFkZGluZzogMC41cmVtO1xuICAgIG1hcmdpbjogMC41cmVtIDA7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLWVycm9yLWxpZ2h0KTtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLWVycm9yLWRhcmspO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgIGdhcDogMC41cmVtO1xuICAgIFxuICAgIC5lcnJvci1pY29uIHtcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIH1cbiAgICBcbiAgICAuZXJyb3ItdGV4dCB7XG4gICAgICBmbGV4OiAxO1xuICAgIH1cbiAgICBcbiAgICAuZXJyb3ItZGlzbWlzcyB7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIHBhZGRpbmc6IDAuMjVyZW07XG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgfVxuICAgIH1cbiAgYFxuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17YGVycm9yLW1lc3NhZ2UgJHtjbGFzc05hbWV9YH0gY3NzPXtlcnJvclN0eWxlfSByb2xlPVwiYWxlcnRcIj5cbiAgICAgIDxJY29uIGljb249e2ljb25FcnJvcn0gY2xhc3NOYW1lPVwiZXJyb3ItaWNvblwiIHNpemU9XCJzbVwiIC8+XG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJlcnJvci10ZXh0XCI+e2Vycm9yfTwvc3Bhbj5cbiAgICAgIHtvbkRpc21pc3MgJiYgKFxuICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgIHNpemU9XCJzbVwiIFxuICAgICAgICAgIHR5cGU9XCJ0ZXJ0aWFyeVwiIFxuICAgICAgICAgIGljb24gXG4gICAgICAgICAgb25DbGljaz17b25EaXNtaXNzfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImVycm9yLWRpc21pc3NcIlxuICAgICAgICAgIGFyaWEtbGFiZWw9XCJEaXNtaXNzIGVycm9yXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxJY29uIGljb249e3JlcXVpcmUoJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9jbG9zZS5zdmcnKS5kZWZhdWx0fSBzaXplPVwic21cIiAvPlxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgZ2V0QXBwU3RvcmUsXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBVc2VEYXRhU291cmNlLFxuICBhcHBDb25maWdVdGlscyxcbiAgdHlwZSBJTURhdGFTb3VyY2VJbmZvLFxuICBEYXRhU291cmNlU3RhdHVzLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgaG9va3Ncbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgSWNvbiwgVG9vbHRpcCwgQnV0dG9uLCBkZWZhdWx0TWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgRW50aXR5U3RhdHVzVHlwZSwgU3RhdHVzSW5kaWNhdG9yIH0gZnJvbSAnLi9jb21tb24tY29tcG9uZW50cydcbmltcG9ydCBpY29uV2FybmluZyBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvd2FybmluZy5zdmcnXG5pbXBvcnQgaWNvbkVycm9yIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmcnXG5pbXBvcnQgeyB1c2VEYXRhU291cmNlRXhpc3RzIH0gZnJvbSAnLi91c2UtZHMtZXhpc3RzJ1xuXG5pbnRlcmZhY2UgQ29udGVudFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB1c2VEYXRhU291cmNlOiBJbW11dGFibGVPYmplY3Q8VXNlRGF0YVNvdXJjZT5cbiAgb25TdGF0dXNDaGFuZ2U/OiAoZW5hYmxlZDogYm9vbGVhbikgPT4gdm9pZFxuICBvbkRhdGFTb3VyY2VDcmVhdGVkPzogKGRzOiBEYXRhU291cmNlKSA9PiB2b2lkXG4gIHNob3dNZXNzYWdlPzogYm9vbGVhblxufVxuXG4vKipcbiAqIFNob3cgaWNvbiBhbmQgbWVzc2FnZSBpZiB0aGUgZGF0YSBzb3VyY2UgZG9lc24ndCB3b3JrLlxuICogQHBhcmFtIHByb3BzXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gRGF0YVNvdXJjZVRpcCAocHJvcHM6IENvbnRlbnRQcm9wcykge1xuICBjb25zdCB7IHdpZGdldElkLCB1c2VEYXRhU291cmNlLCBvblN0YXR1c0NoYW5nZSwgb25EYXRhU291cmNlQ3JlYXRlZCwgc2hvd01lc3NhZ2UgPSBmYWxzZSB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZXMpXG4gIGNvbnN0IGRzRXhpc3RzOiBib29sZWFuID0gdXNlRGF0YVNvdXJjZUV4aXN0cyh7IHdpZGdldElkLCB1c2VEYXRhU291cmNlSWQ6IHVzZURhdGFTb3VyY2UuZGF0YVNvdXJjZUlkIH0pXG4gIGNvbnN0IFtkc1N0YXR1cywgc2V0RHNTdGF0dXNdID0gUmVhY3QudXNlU3RhdGU8J2Vycm9yJyB8ICd3YXJuaW5nJyB8ICdjcmVhdGluZyc+KG51bGwpXG4gIGNvbnN0IFtkYXRhU291cmNlLCBzZXREYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlPERhdGFTb3VyY2U+KG51bGwpXG5cbiAgY29uc3QgaGFuZGxlRHNJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZm86IElNRGF0YVNvdXJjZUluZm8pID0+IHtcbiAgICBpZiAoaW5mbykge1xuICAgICAgY29uc3QgeyBzdGF0dXMsIGluc3RhbmNlU3RhdHVzIH0gPSBpbmZvXG4gICAgICBpZiAoaW5zdGFuY2VTdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuTm90Q3JlYXRlZCkge1xuICAgICAgICBzZXREc1N0YXR1cygnY3JlYXRpbmcnKVxuICAgICAgICBvblN0YXR1c0NoYW5nZT8uKGZhbHNlKVxuICAgICAgfSBlbHNlIGlmIChpbnN0YW5jZVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5DcmVhdGVFcnJvciB8fCBzdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuTG9hZEVycm9yKSB7XG4gICAgICAgIHNldERzU3RhdHVzKCdlcnJvcicpXG4gICAgICAgIG9uU3RhdHVzQ2hhbmdlPy4oZmFsc2UpXG4gICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSkge1xuICAgICAgICBzZXREc1N0YXR1cygnd2FybmluZycpXG4gICAgICAgIG9uU3RhdHVzQ2hhbmdlPy4oZmFsc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXREc1N0YXR1cyhudWxsKVxuICAgICAgICBvblN0YXR1c0NoYW5nZT8uKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9LCBbb25TdGF0dXNDaGFuZ2VdKVxuXG4gIGNvbnN0IGhhbmRsZURzQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChkczogRGF0YVNvdXJjZSkgPT4ge1xuICAgIHNldERhdGFTb3VyY2UoZHMpXG4gICAgb25EYXRhU291cmNlQ3JlYXRlZD8uKGRzKVxuICB9LCBbb25EYXRhU291cmNlQ3JlYXRlZF0pXG5cbiAgY29uc3QgaGFuZGxlRHNDcmVhdGVGYWlsZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0RGF0YVNvdXJjZShudWxsKVxuICAgIHNldERzU3RhdHVzKCdlcnJvcicpXG4gICAgb25TdGF0dXNDaGFuZ2U/LihmYWxzZSlcbiAgfSwgW29uU3RhdHVzQ2hhbmdlXSlcblxuICBsZXQgc3RhdHVzSWNvblxuICBsZXQgc3RhdHVzTXNnXG4gIGxldCBjb2xvclxuICBpZiAoZHNTdGF0dXMgPT09ICdjcmVhdGluZycpIHtcbiAgICBzdGF0dXNJY29uID0gaWNvbkVycm9yXG4gICAgc3RhdHVzTXNnID0gZ2V0STE4bk1lc3NhZ2UoJ2xvYWRpbmcnKVxuICB9IGVsc2UgaWYgKCFkc0V4aXN0cyB8fCBkc1N0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgIHN0YXR1c0ljb24gPSBpY29uRXJyb3JcbiAgICBzdGF0dXNNc2cgPSBnZXRJMThuTWVzc2FnZSgnZGF0YVNvdXJjZUNyZWF0ZUVycm9yJylcbiAgICBjb2xvciA9ICd2YXIoLS1zeXMtY29sb3ItZXJyb3ItbWFpbiknXG4gIH0gZWxzZSBpZiAoZHNTdGF0dXMgPT09ICd3YXJuaW5nJykge1xuICAgIGxldCBsYWJlbCA9ICcnXG4gICAgY29uc3Qgb3JpZ2luRHMgPSBkYXRhU291cmNlPy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF1cbiAgICBpZiAob3JpZ2luRHMpIHtcbiAgICAgIGxhYmVsID0gb3JpZ2luRHMuZ2V0TGFiZWwoKSB8fCBvcmlnaW5Ecy5nZXREYXRhU291cmNlSnNvbigpLnNvdXJjZUxhYmVsXG4gICAgfSBlbHNlIGlmIChkYXRhU291cmNlKSB7XG4gICAgICBsYWJlbCA9IGRhdGFTb3VyY2UuZ2V0TGFiZWwoKSB8fCBkYXRhU291cmNlLmdldERhdGFTb3VyY2VKc29uKCkubGFiZWxcbiAgICB9XG5cbiAgICBjb25zdCB3aWRnZXRJZCA9IGFwcENvbmZpZ1V0aWxzLmdldFdpZGdldElkQnlPdXRwdXREYXRhU291cmNlKHVzZURhdGFTb3VyY2UpXG4gICAgY29uc3QgYXBwU3RhdGUgPSB3aW5kb3c/LmppbXVDb25maWc/LmlzQnVpbGRlclxuICAgICAgPyBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwU3RhdGVJbkJ1aWxkZXJcbiAgICAgIDogZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpXG4gICAgY29uc3Qgd2lkZ2V0TGFiZWwgPSBhcHBTdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF0/LmxhYmVsXG5cbiAgICBjb2xvciA9ICd2YXIoLS1zeXMtY29sb3Itd2FybmluZy1kYXJrKSdcbiAgICBzdGF0dXNJY29uID0gaWNvbldhcm5pbmdcbiAgICBzdGF0dXNNc2cgPSBnZXRJMThuTWVzc2FnZSgnb3V0cHV0RGF0YUlzTm90R2VuZXJhdGVkJywge1xuICAgICAgb3V0cHV0RHNMYWJlbDogbGFiZWwgPz8gJycsXG4gICAgICBzb3VyY2VXaWRnZXROYW1lOiB3aWRnZXRMYWJlbCA/PyAnJ1xuICAgIH0pXG4gIH1cbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICB7ZHNFeGlzdHMgJiYgKFxuICAgICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudFxuICAgICAgICAgIHVzZURhdGFTb3VyY2U9e3VzZURhdGFTb3VyY2V9XG4gICAgICAgICAgb25EYXRhU291cmNlSW5mb0NoYW5nZT17aGFuZGxlRHNJbmZvQ2hhbmdlfVxuICAgICAgICAgIG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZURzQ3JlYXRlZH1cbiAgICAgICAgICBvbkNyZWF0ZURhdGFTb3VyY2VGYWlsZWQ9e2hhbmRsZURzQ3JlYXRlRmFpbGVkfVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICAgIHtkc1N0YXR1cyA9PT0gJ2NyZWF0aW5nJyAmJiA8U3RhdHVzSW5kaWNhdG9yIHN0YXR1c1R5cGU9e0VudGl0eVN0YXR1c1R5cGUuTG9hZGluZ30gdGl0bGU9e3N0YXR1c01zZ30gLz59XG4gICAgICB7KCFkc0V4aXN0cyB8fCBkc1N0YXR1cyA9PT0gJ2Vycm9yJyB8fCBkc1N0YXR1cyA9PT0gJ3dhcm5pbmcnKSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17c3RhdHVzTXNnfT5cbiAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIHR5cGU9J3RlcnRpYXJ5JyBpY29uPjxJY29uIGljb249e3N0YXR1c0ljb259IGNvbG9yPXtjb2xvcn0gLz48L0J1dHRvbj5cbiAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAge3Nob3dNZXNzYWdlICYmIDxkaXYgY2xhc3NOYW1lPSdzdGF0dXMtbWVzc2FnZSc+e3N0YXR1c01zZ308L2Rpdj59XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApXG59XG5cblxuXG4iLCIvKipcbiAqIENvbmZpZ3VyYWJsZSBkZWJ1ZyBsb2dnaW5nIHV0aWxpdHkgZm9yIEV4cGVyaWVuY2UgQnVpbGRlciB3aWRnZXRzXG4gKiBcbiAqIFVzYWdlOlxuICogLSBBZGQgP2RlYnVnPWFsbCB0byBVUkwgdG8gc2VlIGFsbCBkZWJ1ZyBsb2dzXG4gKiAtIEFkZCA/ZGVidWc9SEFTSCxGT1JNIHRvIHNlZSBzcGVjaWZpYyBmZWF0dXJlIGxvZ3NcbiAqIC0gQWRkID9kZWJ1Zz1mYWxzZSB0byBkaXNhYmxlIGFsbCBkZWJ1ZyBsb2dzXG4gKiBcbiAqIEZlYXR1cmVzIChRdWVyeVNpbXBsZSk6XG4gKiAtIEJVRzogS25vd24gYnVncy9pc3N1ZXMgKGFsd2F5cyBsb2dzLCBldmVuIGlmIGRlYnVnPWZhbHNlKSAtIFVzZSBmb3JtYXQ6IGJ1Z0lkLCBjYXRlZ29yeSwgZGVzY3JpcHRpb25cbiAqIC0gSEFTSDogSGFzaCBwYXJhbWV0ZXIgcHJvY2Vzc2luZ1xuICogLSBGT1JNOiBRdWVyeSBmb3JtIGludGVyYWN0aW9uc1xuICogLSBUQVNLOiBRdWVyeSB0YXNrIG1hbmFnZW1lbnRcbiAqIC0gWk9PTTogWm9vbSBiZWhhdmlvclxuICogLSBNQVAtRVhURU5UOiBNYXAgZXh0ZW50IGNoYW5nZXNcbiAqIC0gREFUQS1BQ1RJT046IERhdGEgYWN0aW9uIGV4ZWN1dGlvbiAoQWRkIHRvIE1hcCwgZXRjLilcbiAqIC0gR1JPVVA6IFF1ZXJ5IGdyb3VwaW5nIGFuZCBkcm9wZG93biBzZWxlY3Rpb25cbiAqIC0gU0VMRUNUSU9OOiBTZWxlY3Rpb24gZGV0ZWN0aW9uIGFuZCBpZGVudGlmeSBwb3B1cCB0cmFja2luZ1xuICogLSBXSURHRVQtU1RBVEU6IFdpZGdldCBsaWZlY3ljbGUgZXZlbnRzIChvcGVuL2Nsb3NlIGhhbmRzaGFrZSlcbiAqIC0gUkVTVE9SRTogU2VsZWN0aW9uIHJlc3RvcmF0aW9uIHdoZW4gd2lkZ2V0IG9wZW5zXG4gKiAtIFJFU1VMVFMtTU9ERTogUmVzdWx0cyBtYW5hZ2VtZW50IG1vZGUgc2VsZWN0aW9uIChDcmVhdGUgbmV3LCBBZGQgdG8sIFJlbW92ZSBmcm9tKVxuICogLSBFWFBBTkQtQ09MTEFQU0U6IEV4cGFuZC9jb2xsYXBzZSBzdGF0ZSBtYW5hZ2VtZW50IGZvciByZXN1bHQgaXRlbXNcbiAqIC0gR1JBUEhJQ1MtTEFZRVI6IEdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZyAoaW5kZXBlbmRlbnQgb2YgbGF5ZXIgdmlzaWJpbGl0eSlcbiAqIFxuICogVGVtcG9yYXJ5IE1pZ3JhdGlvbiBGZWF0dXJlcyAod2lsbCBiZSByZW1vdmVkIGFmdGVyIG1pZ3JhdGlvbiBjb21wbGV0ZSk6XG4gKiAtIENIVU5LLTEtQ09NUEFSRTogQ2h1bmsgMSAoVVJMIFBhcmFtZXRlcikgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTEtTUlTTUFUQ0g6IENodW5rIDEgbWlzbWF0Y2ggd2FybmluZ3NcbiAqIC0gQ0hVTkstMi1DT01QQVJFOiBDaHVuayAyIChWaXNpYmlsaXR5KSBjb21wYXJpc29uIGxvZ3NcbiAqIC0gQ0hVTkstMi1NSVNNQVRDSDogQ2h1bmsgMiBtaXNtYXRjaCB3YXJuaW5nc1xuICogLSBDSFVOSy0zLUNPTVBBUkU6IENodW5rIDMgKFNlbGVjdGlvbi9SZXN0b3JhdGlvbikgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTMtREVDSVNJT046IENodW5rIDMgZGVjaXNpb24gcG9pbnQgbG9nc1xuICogLSBDSFVOSy0zLUZBTExCQUNLOiBDaHVuayAzIGZhbGxiYWNrIGxvZ2ljIGxvZ3NcbiAqIC0gQ0hVTkstNC1DT01QQVJFOiBDaHVuayA0IChHcmFwaGljcyBMYXllcikgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTUtQ09NUEFSRTogQ2h1bmsgNSAoQWNjdW11bGF0ZWQgUmVjb3JkcykgY29tcGFyaXNvbiBsb2dzXG4gKiAtIENIVU5LLTYtQ09NUEFSRTogQ2h1bmsgNiAoTWFwIFZpZXcpIGNvbXBhcmlzb24gbG9nc1xuICogLSBDSFVOSy02LU1JU01BVENIOiBDaHVuayA2IG1pc21hdGNoIHdhcm5pbmdzXG4gKiAtIENIVU5LLTctQ09NUEFSRTogQ2h1bmsgNyAoRXZlbnRzKSBjb21wYXJpc29uIGxvZ3NcbiAqIFxuICogRmVhdHVyZXMgKEhlbHBlclNpbXBsZSk6XG4gKiAtIEhBU0g6IEhhc2ggcGFyYW1ldGVyIG1vbml0b3JpbmcgYW5kIHdpZGdldCBvcGVuaW5nXG4gKiAtIFNFTEVDVElPTjogU2VsZWN0aW9uIHRyYWNraW5nIGZyb20gUXVlcnlTaW1wbGVcbiAqIC0gV0lER0VULVNUQVRFOiBXaWRnZXQgc3RhdGUgaGFuZHNoYWtlIChvcGVuL2Nsb3NlIGV2ZW50cylcbiAqIC0gUkVTVE9SRTogU2VsZWN0aW9uIHJlc3RvcmF0aW9uIGF0dGVtcHRzIGFuZCByZXN1bHRzXG4gKi9cblxudHlwZSBEZWJ1Z0ZlYXR1cmUgPSAnQlVHJyB8ICdIQVNIJyB8ICdIQVNILUVYRUMnIHwgJ0ZPUk0nIHwgJ1RBU0snIHwgJ1pPT00nIHwgJ01BUC1FWFRFTlQnIHwgJ0RBVEEtQUNUSU9OJyB8ICdHUk9VUCcgfCAnU0VMRUNUSU9OJyB8ICdXSURHRVQtU1RBVEUnIHwgJ1JFU1RPUkUnIHwgJ1JFU1VMVFMtTU9ERScgfCAnRVhQQU5ELUNPTExBUFNFJyB8ICdHUkFQSElDUy1MQVlFUicgfCAnQ0hVTkstMS1DT01QQVJFJyB8ICdDSFVOSy0xLU1JU01BVENIJyB8ICdDSFVOSy0yLUNPTVBBUkUnIHwgJ0NIVU5LLTItTUlTTUFUQ0gnIHwgJ0NIVU5LLTMtQ09NUEFSRScgfCAnQ0hVTkstMy1ERUNJU0lPTicgfCAnQ0hVTkstMy1GQUxMQkFDSycgfCAnQ0hVTkstNC1DT01QQVJFJyB8ICdDSFVOSy01LUNPTVBBUkUnIHwgJ0NIVU5LLTYtQ09NUEFSRScgfCAnQ0hVTkstNi1NSVNNQVRDSCcgfCAnQ0hVTkstNy1DT01QQVJFJyB8ICdhbGwnIHwgJ2ZhbHNlJ1xuXG5pbnRlcmZhY2UgRGVidWdMb2dnZXJPcHRpb25zIHtcbiAgd2lkZ2V0TmFtZTogc3RyaW5nXG4gIGZlYXR1cmVzOiBEZWJ1Z0ZlYXR1cmVbXVxufVxuXG5jbGFzcyBEZWJ1Z0xvZ2dlciB7XG4gIHByaXZhdGUgZW5hYmxlZEZlYXR1cmVzOiBTZXQ8RGVidWdGZWF0dXJlPiA9IG5ldyBTZXQoKVxuICBwcml2YXRlIGluaXRpYWxpemVkID0gZmFsc2VcbiAgcHJpdmF0ZSB3aWRnZXROYW1lOiBzdHJpbmdcbiAgcHJpdmF0ZSBmZWF0dXJlczogRGVidWdGZWF0dXJlW11cblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBEZWJ1Z0xvZ2dlck9wdGlvbnMpIHtcbiAgICB0aGlzLndpZGdldE5hbWUgPSBvcHRpb25zLndpZGdldE5hbWVcbiAgICB0aGlzLmZlYXR1cmVzID0gb3B0aW9ucy5mZWF0dXJlc1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSByZXR1cm5cblxuICAgIC8vIENoZWNrIFVSTCBwYXJhbWV0ZXJzIChib3RoIGN1cnJlbnQgd2luZG93IGFuZCBwYXJlbnQgZm9yIGlmcmFtZXMpXG4gICAgbGV0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICBsZXQgZGVidWdWYWx1ZSA9IHVybFBhcmFtcy5nZXQoJ2RlYnVnJylcblxuICAgIC8vIElmIG5vdCBmb3VuZCBpbiBjdXJyZW50IHdpbmRvdywgY2hlY2sgcGFyZW50IChuZWVkZWQgZm9yIEV4QiBpZnJhbWVzKVxuICAgIGlmIChkZWJ1Z1ZhbHVlID09PSBudWxsICYmIHdpbmRvdy5wYXJlbnQgIT09IHdpbmRvdykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cucGFyZW50LmxvY2F0aW9uLnNlYXJjaClcbiAgICAgICAgZGVidWdWYWx1ZSA9IHVybFBhcmFtcy5nZXQoJ2RlYnVnJylcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gQ3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uIG1pZ2h0IHByZXZlbnQgYWNjZXNzIHRvIHBhcmVudCBsb2NhdGlvblxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWJ1Z1ZhbHVlID09PSAnZmFsc2UnKSB7XG4gICAgICAvLyBFeHBsaWNpdGx5IGRpc2FibGVkXG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGRlYnVnVmFsdWUgPT09ICdhbGwnKSB7XG4gICAgICAvLyBFbmFibGUgYWxsIGZlYXR1cmVzIG9ubHkgaWYgZXhwbGljaXRseSBzZXQgdG8gJ2FsbCdcbiAgICAgIHRoaXMuZmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IHtcbiAgICAgICAgaWYgKGZlYXR1cmUgIT09ICdhbGwnICYmIGZlYXR1cmUgIT09ICdmYWxzZScpIHtcbiAgICAgICAgICB0aGlzLmVuYWJsZWRGZWF0dXJlcy5hZGQoZmVhdHVyZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aGlzLndpZGdldE5hbWV9LURFQlVHXSBFbmFibGVkIEFMTCBmZWF0dXJlczpgLCBBcnJheS5mcm9tKHRoaXMuZW5hYmxlZEZlYXR1cmVzKSlcbiAgICB9IGVsc2UgaWYgKGRlYnVnVmFsdWUgIT09IG51bGwpIHtcbiAgICAgIC8vIFBhcnNlIGNvbW1hLXNlcGFyYXRlZCBmZWF0dXJlIGxpc3RcbiAgICAgIGNvbnN0IHJlcXVlc3RlZEZlYXR1cmVzID0gZGVidWdWYWx1ZS5zcGxpdCgnLCcpLm1hcChmID0+IGYudHJpbSgpLnRvVXBwZXJDYXNlKCkgYXMgRGVidWdGZWF0dXJlKVxuICAgICAgcmVxdWVzdGVkRmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IHtcbiAgICAgICAgaWYgKGZlYXR1cmUudG9VcHBlckNhc2UoKSA9PT0gJ0FMTCcpIHtcbiAgICAgICAgICAvLyBFbmFibGUgYWxsIGZlYXR1cmVzIGZvciB0aGlzIHdpZGdldFxuICAgICAgICAgIHRoaXMuZmVhdHVyZXMuZm9yRWFjaChmID0+IHtcbiAgICAgICAgICAgIGlmIChmICE9PSAnYWxsJyAmJiBmICE9PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZChmKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5mZWF0dXJlcy5pbmNsdWRlcyhmZWF0dXJlKSkge1xuICAgICAgICAgIHRoaXMuZW5hYmxlZEZlYXR1cmVzLmFkZChmZWF0dXJlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlXG4gIH1cblxuICBwcml2YXRlIGlzRW5hYmxlZChmZWF0dXJlOiBEZWJ1Z0ZlYXR1cmUpOiBib29sZWFuIHtcbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICAgIFxuICAgIC8vIEJVRyBsZXZlbCBhbHdheXMgZW5hYmxlZCwgcmVnYXJkbGVzcyBvZiBkZWJ1ZyBzd2l0Y2hlcyAoZXZlbiBpZiBkZWJ1Zz1mYWxzZSlcbiAgICBpZiAoZmVhdHVyZSA9PT0gJ0JVRycpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmVuYWJsZWRGZWF0dXJlcy5oYXMoJ2FsbCcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcy5lbmFibGVkRmVhdHVyZXMuaGFzKGZlYXR1cmUpXG4gIH1cblxuICBsb2coZmVhdHVyZTogRGVidWdGZWF0dXJlLCBkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICAvLyBCVUcgbGV2ZWwgYWx3YXlzIGxvZ3MsIGV2ZW4gaWYgZGVidWc9ZmFsc2VcbiAgICBpZiAoZmVhdHVyZSA9PT0gJ0JVRycpIHtcbiAgICAgIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgICAgIGZlYXR1cmU6ICdCVUcnLFxuICAgICAgICBidWdJZDogZGF0YS5idWdJZCB8fCAnVU5LTk9XTicsXG4gICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdHRU5FUkFMJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIC4uLmRhdGFcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXNlIGNvbnNvbGUud2FybiB3aXRoIGVtb2ppIGZvcm1hdCB0byBtYWtlIGJ1Z3Mgc3RhbmQgb3V0XG4gICAgICBjb25zb2xlLndhcm4oYFske3RoaXMud2lkZ2V0TmFtZS50b1VwcGVyQ2FzZSgpfSDimqDvuI8gQlVHXWAsIEpTT04uc3RyaW5naWZ5KGxvZ0RhdGEsIG51bGwsIDIpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFJlZ3VsYXIgZmVhdHVyZSBsb2dnaW5nIChleGlzdGluZyBiZWhhdmlvcilcbiAgICBpZiAoIXRoaXMuaXNFbmFibGVkKGZlYXR1cmUpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBsb2dEYXRhID0ge1xuICAgICAgZmVhdHVyZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgLi4uZGF0YVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBbJHt0aGlzLndpZGdldE5hbWUudG9VcHBlckNhc2UoKX0tJHtmZWF0dXJlfV1gLCBKU09OLnN0cmluZ2lmeShsb2dEYXRhLCBudWxsLCAyKSlcbiAgfVxuXG4gIGdldENvbmZpZygpOiB7IGVuYWJsZWRGZWF0dXJlczogc3RyaW5nW10sIGRlYnVnVmFsdWU6IHN0cmluZyB8IG51bGwgfSB7XG4gICAgdGhpcy5pbml0aWFsaXplKClcbiAgICBcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgY29uc3QgZGVidWdWYWx1ZSA9IHVybFBhcmFtcy5nZXQoJ2RlYnVnJylcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgZW5hYmxlZEZlYXR1cmVzOiBBcnJheS5mcm9tKHRoaXMuZW5hYmxlZEZlYXR1cmVzKSxcbiAgICAgIGRlYnVnVmFsdWVcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVidWcgbG9nZ2VyIGluc3RhbmNlIGZvciBRdWVyeVNpbXBsZSB3aWRnZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKSB7XG4gIHJldHVybiBuZXcgRGVidWdMb2dnZXIoe1xuICAgIHdpZGdldE5hbWU6ICdRVUVSWVNJTVBMRScsXG4gICAgZmVhdHVyZXM6IFtcbiAgICAgICdIQVNIJywgJ0ZPUk0nLCAnVEFTSycsICdaT09NJywgJ01BUC1FWFRFTlQnLCAnREFUQS1BQ1RJT04nLCAnR1JPVVAnLCBcbiAgICAgICdTRUxFQ1RJT04nLCAnV0lER0VULVNUQVRFJywgJ1JFU1RPUkUnLCAnUkVTVUxUUy1NT0RFJywgJ0VYUEFORC1DT0xMQVBTRScsICdHUkFQSElDUy1MQVlFUicsXG4gICAgICAvLyBUZW1wb3JhcnkgbWlncmF0aW9uIGZlYXR1cmVzICh3aWxsIGJlIHJlbW92ZWQgYWZ0ZXIgbWlncmF0aW9uIGNvbXBsZXRlKVxuICAgICAgJ0NIVU5LLTEtQ09NUEFSRScsICdDSFVOSy0xLU1JU01BVENIJywgJ0NIVU5LLTItQ09NUEFSRScsICdDSFVOSy0yLU1JU01BVENIJywgJ0NIVU5LLTMtQ09NUEFSRScsICdDSFVOSy0zLURFQ0lTSU9OJywgJ0NIVU5LLTMtRkFMTEJBQ0snLFxuICAgICAgJ0NIVU5LLTQtQ09NUEFSRScsICdDSFVOSy01LUNPTVBBUkUnLCAnQ0hVTkstNi1DT01QQVJFJywgJ0NIVU5LLTYtTUlTTUFUQ0gnLCAnQ0hVTkstNy1DT01QQVJFJ1xuICAgIF1cbiAgfSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVidWcgbG9nZ2VyIGluc3RhbmNlIGZvciBIZWxwZXJTaW1wbGUgd2lkZ2V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIZWxwZXJTaW1wbGVEZWJ1Z0xvZ2dlcigpIHtcbiAgcmV0dXJuIG5ldyBEZWJ1Z0xvZ2dlcih7XG4gICAgd2lkZ2V0TmFtZTogJ0hFTFBFUlNJTVBMRScsXG4gICAgZmVhdHVyZXM6IFsnSEFTSCcsICdTRUxFQ1RJT04nLCAnV0lER0VULVNUQVRFJywgJ1JFU1RPUkUnXVxuICB9KVxufVxuXG4iLCJpbXBvcnQge1xuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgSU1BcHBDb25maWdcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW50ZXJmYWNlIFByb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICB1c2VEYXRhU291cmNlSWQ6IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlRGF0YVNvdXJjZUV4aXN0cyAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHsgd2lkZ2V0SWQsIHVzZURhdGFTb3VyY2VJZCB9ID0gcHJvcHNcblxuICBjb25zdCBleGlzdHM6IGJvb2xlYW4gPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGxldCBhcHBDb25maWc6IElNQXBwQ29uZmlnXG4gICAgaWYgKHdpbmRvdy5qaW11Q29uZmlnLmlzQnVpbGRlcikge1xuICAgICAgYXBwQ29uZmlnID0gc3RhdGUuYXBwU3RhdGVJbkJ1aWxkZXIuYXBwQ29uZmlnXG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcENvbmZpZyA9IHN0YXRlLmFwcENvbmZpZ1xuICAgIH1cbiAgICBjb25zdCB1c2VEYXRhU291cmNlcyA9IGFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXS51c2VEYXRhU291cmNlcyA/PyBbXVxuICAgIHJldHVybiB1c2VEYXRhU291cmNlcy5zb21lKHVzZURzID0+IHVzZURzLmRhdGFTb3VyY2VJZCA9PT0gdXNlRGF0YVNvdXJjZUlkKVxuICB9KVxuXG4gIHJldHVybiBleGlzdHNcbn1cblxuXG5cbiIsImltcG9ydCB0eXBlIHsgSVBvcHVwSW5mbyB9IGZyb20gJ0Blc3JpL2FyY2dpcy1yZXN0LWZlYXR1cmUtc2VydmljZSdcbmltcG9ydCB0eXBlIHsgSW50bFNoYXBlLCBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuXG4vKipcbiAqIFRvZ2dsZSBpdGVtcyBpbiBhbiBhcnJheVxuICovXG5leHBvcnQgY29uc3QgdG9nZ2xlSXRlbUluQXJyYXkgPSAoaXRlbSwgaXRlbXMgPSBbXSkgPT4gaXRlbXMuaW5jbHVkZXMoaXRlbSkgPyBpdGVtcy5maWx0ZXIoaSA9PiBpICE9PSBpdGVtKSA6IFsuLi5pdGVtcywgaXRlbV1cblxuZXhwb3J0IGludGVyZmFjZSBEYXRhU291cmNlTWFwIHtcbiAgW2RhdGFTb3VyY2VJZDogc3RyaW5nXTogRGF0YVNvdXJjZVxufVxuXG5leHBvcnQgdHlwZSBHZXRJMThuTWVzc2FnZVR5cGUgPSAoaWQ6IHN0cmluZywgb3B0aW9ucz86IHsgbWVzc2FnZXM/OiBhbnksIHZhbHVlcz86IGFueSB9KSA9PiBzdHJpbmdcbi8qKlxuICogQSBmYWN0b3J5IHRvIGNyZWF0ZSBhIGZ1bmN0aW9uIG9mIGdldHRpbmcgaTE4biBtZXNzYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHZXRJMThuTWVzc2FnZSAob3B0aW9uczogeyBpbnRsOiBJbnRsU2hhcGUsIGRlZmF1bHRNZXNzYWdlcz86IGFueSB9KSB7XG4gIGNvbnN0IHsgaW50bCwgZGVmYXVsdE1lc3NhZ2VzID0ge30gfSA9IG9wdGlvbnMgfHwge31cbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2U6IEdldEkxOG5NZXNzYWdlVHlwZSA9IChpZCwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgbWVzc2FnZXMsIHZhbHVlcyB9ID0gb3B0aW9ucyB8fCB7fVxuICAgIHJldHVybiBpbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZCwgZGVmYXVsdE1lc3NhZ2U6IChtZXNzYWdlcyB8fCBkZWZhdWx0TWVzc2FnZXMpW2lkXSB9LCB2YWx1ZXMpXG4gIH1cbiAgcmV0dXJuIGdldEkxOG5NZXNzYWdlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWVsZEluZm9zSW5Qb3B1cENvbnRlbnQgKHBvcHVwSW5mbzogSVBvcHVwSW5mbykge1xuICBjb25zdCByZXN1bHQgPSBbXVxuICBpZiAocG9wdXBJbmZvPy5wb3B1cEVsZW1lbnRzPy5sZW5ndGggPiAwKSB7XG4gICAgcG9wdXBJbmZvLnBvcHVwRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICdmaWVsZHMnICYmIGVsZW1lbnQuZmllbGRJbmZvcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICByZXN1bHQucHVzaCguLi5lbGVtZW50LmZpZWxkSW5mb3MpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuICByZXR1cm4gcmVzdWx0XG59XG5cblxuXG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfX2Vtb3Rpb25fcmVhY3RfanN4X3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9hcmNnaXNfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9jb3JlX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfbGF5b3V0c19sYXlvdXRfcnVudGltZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3RoZW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdWlfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9iYXNpY19zcWxfZXhwcmVzc2lvbl9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3JlYWN0X187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3dpZGdldHNfc2hhcmVkX2NvZGVfY29tbW9uX187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiLyoqXHJcbiAqIFdlYnBhY2sgd2lsbCByZXBsYWNlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHdpdGggX193ZWJwYWNrX3JlcXVpcmVfXy5wIHRvIHNldCB0aGUgcHVibGljIHBhdGggZHluYW1pY2FsbHkuXHJcbiAqIFRoZSByZWFzb24gd2h5IHdlIGNhbid0IHNldCB0aGUgcHVibGljUGF0aCBpbiB3ZWJwYWNrIGNvbmZpZyBpczogd2UgY2hhbmdlIHRoZSBwdWJsaWNQYXRoIHdoZW4gZG93bmxvYWQuXHJcbiAqICovXHJcbl9fd2VicGFja19wdWJsaWNfcGF0aF9fID0gd2luZG93LmppbXVDb25maWcuYmFzZVVybFxyXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBqc3gsIGNzcywgdHlwZSBBbGxXaWRnZXRQcm9wcywgRGF0YVNvdXJjZU1hbmFnZXIsIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCwgTWVzc2FnZU1hbmFnZXIsIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSwgdHlwZSBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgUGFwZXIsIFdpZGdldFBsYWNlaG9sZGVyIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IHR5cGUgSU1Db25maWcsIFF1ZXJ5QXJyYW5nZVR5cGUsIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBnZXRXaWRnZXRSdW50aW1lRGF0YU1hcCB9IGZyb20gJy4vd2lkZ2V0LWNvbmZpZydcbmltcG9ydCB7IEppbXVNYXBWaWV3Q29tcG9uZW50LCB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5cbmltcG9ydCB7IHZlcnNpb25NYW5hZ2VyIH0gZnJvbSAnLi4vdmVyc2lvbi1tYW5hZ2VyJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGlzdCB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0J1xuaW1wb3J0IHsgVGFza0xpc3RJbmxpbmUgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1pbmxpbmUnXG5pbXBvcnQgeyBUYXNrTGlzdFBvcHBlcldyYXBwZXIgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdC1wb3BwZXItd3JhcHBlcidcbmltcG9ydCB7IFF1ZXJ5V2lkZ2V0Q29udGV4dCB9IGZyb20gJy4vd2lkZ2V0LWNvbnRleHQnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyBRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQgfSBmcm9tICcuL3NlbGVjdGlvbi11dGlscydcbmltcG9ydCB7IFdJREdFVF9WRVJTSU9OIH0gZnJvbSAnLi4vdmVyc2lvbidcbi8vIENodW5rIDE6IFVSTCBQYXJhbWV0ZXIgQ29uc3VtcHRpb24gTWFuYWdlciAocjAxOC44KVxuaW1wb3J0IHsgVXJsQ29uc3VtcHRpb25NYW5hZ2VyIH0gZnJvbSAnLi9ob29rcy91c2UtdXJsLWNvbnN1bXB0aW9uJ1xuLy8gQ2h1bmsgMjogV2lkZ2V0IFZpc2liaWxpdHkgRW5naW5lIE1hbmFnZXIgKHIwMTguMTMpIC0gU3RlcCAyLjM6IFN3aXRjaCB0byBtYW5hZ2VyXG5pbXBvcnQgeyBXaWRnZXRWaXNpYmlsaXR5TWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLXdpZGdldC12aXNpYmlsaXR5J1xuLy8gQ2h1bmsgNjogTWFwIFZpZXcgTWFuYWdlbWVudCBNYW5hZ2VyIChyMDE4LjE0KSAtIFN0ZXAgNi4xOiBBZGQgbWFuYWdlciB3aXRob3V0IGludGVncmF0aW9uXG5pbXBvcnQgeyBNYXBWaWV3TWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLW1hcC12aWV3J1xuLy8gQ2h1bmsgNDogR3JhcGhpY3MgTGF5ZXIgTWFuYWdlbWVudCBNYW5hZ2VyIChyMDE4LjI0KSAtIFN0ZXAgNC4yOiBQYXJhbGxlbCBleGVjdXRpb25cbmltcG9ydCB7IEdyYXBoaWNzTGF5ZXJNYW5hZ2VyIH0gZnJvbSAnLi9ob29rcy91c2UtZ3JhcGhpY3MtbGF5ZXInXG4vLyBDaHVuayA1OiBBY2N1bXVsYXRlZCBSZWNvcmRzIE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4yNikgLSBTdGVwIDUuMTogQWRkIG1hbmFnZXIgd2l0aG91dCBpbnRlZ3JhdGlvblxuaW1wb3J0IHsgQWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciB9IGZyb20gJy4vaG9va3MvdXNlLWFjY3VtdWxhdGVkLXJlY29yZHMnXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5jb25zdCB7IGljb25NYXAgfSA9IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgcmVxdWVzdGluZyByZXN0b3JhdGlvbiB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlcy5cbiAqIERpc3BhdGNoZWQgYnkgcXVlcnktcmVzdWx0IGNvbXBvbmVudCB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3NlcyBhbmQgc2VsZWN0aW9uIHdhcyBjbGVhcmVkLlxuICovXG5jb25zdCBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXJlc3RvcmUtb24taWRlbnRpZnktY2xvc2UnXG5cbi8qKlxuICogQ3VzdG9tIGV2ZW50IG5hbWUgZm9yIEhlbHBlclNpbXBsZSB0byBub3RpZnkgUXVlcnlTaW1wbGUgdG8gcHJvY2VzcyBoYXNoIHBhcmFtZXRlcnMuXG4gKiBEaXNwYXRjaGVkIGJ5IEhlbHBlclNpbXBsZSBhZnRlciBvcGVuaW5nIGEgd2lkZ2V0IGluIGEgY29udHJvbGxlci5cbiAqL1xuY29uc3QgT1BFTl9XSURHRVRfRVZFTlQgPSAnaGVscGVyc2ltcGxlLW9wZW4td2lkZ2V0J1xuXG4vKipcbiAqIFF1ZXJ5U2ltcGxlIFdpZGdldFxuICogXG4gKiBBIGhpZ2gtcGVyZm9ybWFuY2UgcXVlcnkgd2lkZ2V0IGZvciBBcmNHSVMgRXhwZXJpZW5jZSBCdWlsZGVyIHRoYXQgcHJvdmlkZXM6XG4gKiAtIFVuaXZlcnNhbCBTUUwgb3B0aW1pemF0aW9uIGZvciBkYXRhYmFzZSBpbmRleCB1c2FnZVxuICogLSBEdWFsLW1vZGUgZGVlcCBsaW5raW5nIChoYXNoIGZyYWdtZW50cyBhbmQgcXVlcnkgc3RyaW5ncylcbiAqIC0gUmVzdWx0cyBhY2N1bXVsYXRpb24gYWNyb3NzIG11bHRpcGxlIHF1ZXJpZXNcbiAqIC0gU2VsZWN0aW9uIHBlcnNpc3RlbmNlIGFuZCByZXN0b3JhdGlvblxuICogLSBHcmFwaGljcyBsYXllciBoaWdobGlnaHRpbmcgZm9yIG1hcCB2aXN1YWxpemF0aW9uXG4gKiBcbiAqIEFyY2hpdGVjdHVyZTpcbiAqIFRoaXMgd2lkZ2V0IGZvbGxvd3MgYSBcIkhvb2sgJiBTaGVsbFwiIHBhdHRlcm4gd2hlcmUgY29tcGxleCBsb2dpYyBpcyBleHRyYWN0ZWQgaW50b1xuICogbWFuYWdlciBjbGFzc2VzIChVcmxDb25zdW1wdGlvbk1hbmFnZXIsIFdpZGdldFZpc2liaWxpdHlNYW5hZ2VyLCBNYXBWaWV3TWFuYWdlcilcbiAqIHRvIGtlZXAgdGhlIG1haW4gd2lkZ2V0IGNsYXNzIGNsZWFuIGFuZCBtYWludGFpbmFibGUuXG4gKiBcbiAqIEBzaW5jZSAxLjE5LjAtcjAxOC4xOFxuICogQHNlZSB7QGxpbmsgVXJsQ29uc3VtcHRpb25NYW5hZ2VyfSBmb3IgVVJMIHBhcmFtZXRlciBoYW5kbGluZ1xuICogQHNlZSB7QGxpbmsgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXJ9IGZvciBwYW5lbCB2aXNpYmlsaXR5IGRldGVjdGlvblxuICogQHNlZSB7QGxpbmsgTWFwVmlld01hbmFnZXJ9IGZvciBtYXAgdmlldyByZWZlcmVuY2UgbWFuYWdlbWVudFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaWRnZXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PEFsbFdpZGdldFByb3BzPElNQ29uZmlnPiwgeyBcbiAgaW5pdGlhbFF1ZXJ5VmFsdWU/OiB7IHNob3J0SWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9LCBcbiAgaXNQYW5lbFZpc2libGU/OiBib29sZWFuLCBcbiAgaGFzU2VsZWN0aW9uPzogYm9vbGVhbiwgXG4gIHNlbGVjdGlvblJlY29yZENvdW50PzogbnVtYmVyLCBcbiAgbGFzdFNlbGVjdGlvbj86IHsgcmVjb3JkSWRzOiBzdHJpbmdbXSwgb3V0cHV0RHNJZDogc3RyaW5nLCBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nIH0sIFxuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGUsIFxuICBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdLCBcbiAgZ3JhcGhpY3NMYXllckluaXRpYWxpemVkPzogYm9vbGVhbiwgXG4gIGFjdGl2ZVRhYj86ICdxdWVyeScgfCAncmVzdWx0cydcbn0+IHtcbiAgc3RhdGljIHZlcnNpb25NYW5hZ2VyID0gdmVyc2lvbk1hbmFnZXJcbiAgLy8gQ2h1bmsgMTogVVJMIFBhcmFtZXRlciBDb25zdW1wdGlvbiBNYW5hZ2VyIChyMDE4LjgpXG4gIHByaXZhdGUgdXJsQ29uc3VtcHRpb25NYW5hZ2VyID0gbmV3IFVybENvbnN1bXB0aW9uTWFuYWdlcigpXG4gIC8vIENodW5rIDI6IFdpZGdldCBWaXNpYmlsaXR5IEVuZ2luZSBNYW5hZ2VyIChyMDE4LjEzKSAtIFN0ZXAgMi4zOiBTd2l0Y2ggdG8gbWFuYWdlclxuICBwcml2YXRlIHZpc2liaWxpdHlNYW5hZ2VyID0gbmV3IFdpZGdldFZpc2liaWxpdHlNYW5hZ2VyKClcbiAgXG4gIC8vIFJlZnMgbXVzdCBiZSBkZWNsYXJlZCBiZWZvcmUgbWFuYWdlcnMgdGhhdCB1c2UgdGhlbVxuICBwcml2YXRlIHdpZGdldFJlZiA9IFJlYWN0LmNyZWF0ZVJlZjxIVE1MRGl2RWxlbWVudD4oKVxuICBwcml2YXRlIGdyYXBoaWNzTGF5ZXJSZWYgPSBSZWFjdC5jcmVhdGVSZWY8X19lc3JpLkdyYXBoaWNzTGF5ZXIgfCBudWxsPigpXG4gIHByaXZhdGUgbWFwVmlld1JlZiA9IFJlYWN0LmNyZWF0ZVJlZjxfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcgfCBudWxsPigpXG4gIFxuICAvLyBDaHVuayA2OiBNYXAgVmlldyBNYW5hZ2VtZW50IE1hbmFnZXIgKHIwMTguMTYpIC0gU3RlcCA2LjM6IFN3aXRjaCB0byBtYW5hZ2VyXG4gIHByaXZhdGUgbWFwVmlld01hbmFnZXIgPSBuZXcgTWFwVmlld01hbmFnZXIodGhpcy5tYXBWaWV3UmVmKVxuICAvLyBDaHVuayA0OiBHcmFwaGljcyBMYXllciBNYW5hZ2VtZW50IE1hbmFnZXIgKHIwMTguMjQpIC0gU3RlcCA0LjI6IFBhcmFsbGVsIGV4ZWN1dGlvblxuICBwcml2YXRlIGdyYXBoaWNzTGF5ZXJNYW5hZ2VyID0gbmV3IEdyYXBoaWNzTGF5ZXJNYW5hZ2VyKHRoaXMuZ3JhcGhpY3NMYXllclJlZiwgdGhpcy5tYXBWaWV3UmVmKVxuICAvLyBDaHVuayA1OiBBY2N1bXVsYXRlZCBSZWNvcmRzIE1hbmFnZW1lbnQgTWFuYWdlciAocjAxOC4yNikgLSBTdGVwIDUuMTogQWRkIG1hbmFnZXIgd2l0aG91dCBpbnRlZ3JhdGlvblxuICBwcml2YXRlIGFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIgPSBuZXcgQWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlcigpXG4gIFxuICAvLyBUcmFjayBwcm9jZXNzZWQgaGFzaCBwYXJhbWV0ZXJzIHRvIHByZXZlbnQgcmUtZXhlY3V0aW9uIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgLy8gS2V5OiBcInNob3J0SWQ6dmFsdWVcIiAoZS5nLiwgXCJwaW46MjIyMzA1OTAxM1wiKVxuICBwcml2YXRlIHByb2Nlc3NlZEhhc2hQYXJhbXNSZWYgPSBuZXcgU2V0PHN0cmluZz4oKVxuXG4gIHN0YXRlOiB7IFxuICAgIGluaXRpYWxRdWVyeVZhbHVlPzogeyBzaG9ydElkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfSwgXG4gICAgaXNQYW5lbFZpc2libGU/OiBib29sZWFuLCBcbiAgICBoYXNTZWxlY3Rpb24/OiBib29sZWFuLCBcbiAgICBzZWxlY3Rpb25SZWNvcmRDb3VudD86IG51bWJlciwgXG4gICAgbGFzdFNlbGVjdGlvbj86IHsgcmVjb3JkSWRzOiBzdHJpbmdbXSwgb3V0cHV0RHNJZDogc3RyaW5nLCBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nIH0sIFxuICAgIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZSwgXG4gICAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXSwgXG4gICAgZ3JhcGhpY3NMYXllckluaXRpYWxpemVkPzogYm9vbGVhbiwgXG4gICAgYWN0aXZlVGFiPzogJ3F1ZXJ5JyB8ICdyZXN1bHRzJyxcbiAgICAvLyBUcmFjayB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5zIHdpZGdldCAtIG9ubHkgdGhlbiBzaG91bGQgcXVlcnktdGFzay1saXN0IHVzZSBpbml0aWFsUXVlcnlWYWx1ZSBmb3Igc2VsZWN0aW9uXG4gICAgLy8gVXNpbmcgc3RhdGUgaW5zdGVhZCBvZiByZWYgZW5zdXJlcyBSZWFjdCB0cmlnZ2VycyByZS1yZW5kZXJzIHdoZW4gZmxhZyBjaGFuZ2VzXG4gICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24/OiBib29sZWFuXG4gIH0gPSB7XG4gICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLCAvLyBEZWZhdWx0IG1vZGVcbiAgICBhY3RpdmVUYWI6ICdxdWVyeSdcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRhYiBjaGFuZ2UgYmV0d2VlbiBcIlF1ZXJ5XCIgYW5kIFwiUmVzdWx0c1wiIHRhYnMuXG4gICAqIFxuICAgKiBAcGFyYW0gYWN0aXZlVGFiIC0gVGhlIHRhYiB0byBzd2l0Y2ggdG8gKCdxdWVyeScgb3IgJ3Jlc3VsdHMnKVxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICovXG4gIGhhbmRsZVRhYkNoYW5nZSA9IChhY3RpdmVUYWI6ICdxdWVyeScgfCAncmVzdWx0cycpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgYWN0aXZlVGFiIH0pXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBIZWxwZXJTaW1wbGUncyBvcGVuIHdpZGdldCBldmVudC5cbiAgICogUXVlcnlTaW1wbGUgc2hvdWxkIG9ubHkgcHJvY2VzcyBoYXNoIHBhcmFtZXRlcnMgd2hlbiBIZWxwZXJTaW1wbGUgZXhwbGljaXRseSBvcGVucyB0aGUgd2lkZ2V0LlxuICAgKiBUaGlzIGVuc3VyZXMgSGVscGVyU2ltcGxlIHJlbWFpbnMgdGhlIG9yY2hlc3RyYXRvciBhbmQgcHJldmVudHMgYXV0b25vbW91cyBoYXNoIHByb2Nlc3NpbmcuXG4gICAqL1xuICBoYW5kbGVPcGVuV2lkZ2V0RXZlbnQgPSAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1oYW5kbGVvcGVud2lkZ2V0ZXZlbnQtcmVjZWl2ZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgZXZlbnRXaWRnZXRJZDogZXZlbnQuZGV0YWlsPy53aWRnZXRJZCxcbiAgICAgIG1hdGNoZXM6IGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQgPT09IGlkLFxuICAgICAgY3VycmVudFN0YXRlOiB7XG4gICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uOiB0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uLFxuICAgICAgICBoYXNJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlVmFsdWU6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnZhbHVlLFxuICAgICAgICBwcm9jZXNzZWRIYXNoUGFyYW1zOiBBcnJheS5mcm9tKHRoaXMucHJvY2Vzc2VkSGFzaFBhcmFtc1JlZiksXG4gICAgICAgIGN1cnJlbnRVcmxIYXNoOiB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIE9ubHkgcHJvY2VzcyBpZiB0aGlzIGV2ZW50IGlzIGZvciBvdXIgd2lkZ2V0XG4gICAgaWYgKGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQgIT09IGlkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1oYW5kbGVvcGVud2lkZ2V0ZXZlbnQtaWdub3JlZC13cm9uZy13aWRnZXQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGV2ZW50V2lkZ2V0SWQ6IGV2ZW50LmRldGFpbD8ud2lkZ2V0SWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBjaGVjayBwcm9jZXNzZWQgaGFzaGVzIGhlcmUgYW55bW9yZVxuICAgIC8vIFRoZSBjaGVjayBoYXBwZW5zIGluIG9uSW5pdGlhbFZhbHVlRm91bmQgYWZ0ZXIgd2Uga25vdyB3aGljaCBzaG9ydElkOnZhbHVlIHBhaXIgaXMgYmVpbmcgcHJvY2Vzc2VkXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdvcGVuLXdpZGdldC1ldmVudC1yZWNlaXZlZC1mcm9tLWhlbHBlcnNpbXBsZScsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFNldCBmbGFnIHRvIGFsbG93IHF1ZXJ5LXRhc2stbGlzdCB0byB1c2UgaW5pdGlhbFF1ZXJ5VmFsdWUgZm9yIHNlbGVjdGlvblxuICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBvbmx5IHJlYWN0IHRvIGhhc2ggcGFyYW1ldGVycyB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5zIHVzXG4gICAgLy8gVXNpbmcgc3RhdGUgaW5zdGVhZCBvZiByZWYgZW5zdXJlcyBSZWFjdCB0cmlnZ2VycyByZS1yZW5kZXIgc28gcXVlcnktdGFzay1saXN0IHNlZXMgdGhlIGNoYW5nZVxuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdHJ1ZSB9LCAoKSA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1mbGFnLXNldC10cnVlLXN0YXRlLXVwZGF0ZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG5ld1N0YXRlOiB7XG4gICAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgICAgfSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbi1mbGFnLXNldC10cnVlJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIGZsYWdWYWx1ZTogdHJ1ZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gTm93IGNoZWNrIFVSTCBwYXJhbWV0ZXJzIC0gSGVscGVyU2ltcGxlIGhhcyBleHBsaWNpdGx5IG9wZW5lZCB1c1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1jaGVja3VybHBhcmFtZXRlcnMtc3RhcnRpbmcnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBjdXJyZW50U3RhdGU6IHtcbiAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgIH0sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIHRoaXMudXJsQ29uc3VtcHRpb25NYW5hZ2VyLmNoZWNrVXJsUGFyYW1ldGVycyhcbiAgICAgIHRoaXMucHJvcHMsXG4gICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAge1xuICAgICAgICBvbkluaXRpYWxWYWx1ZUZvdW5kOiAodmFsdWUpID0+IHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtb25pbml0aWFsdmFsdWVmb3VuZC1jYWxsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICBoYXNWYWx1ZTogISF2YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlU2hvcnRJZDogdmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgICB2YWx1ZVZhbHVlOiB2YWx1ZT8udmFsdWUsXG4gICAgICAgICAgICBjdXJyZW50U3RhdGU6IHtcbiAgICAgICAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBzcGVjaWZpYyBzaG9ydElkOnZhbHVlIGNvbWJpbmF0aW9uIHdhcyBhbHJlYWR5IHByb2Nlc3NlZFxuICAgICAgICAgICAgY29uc3QgcGFyYW1LZXkgPSBgJHt2YWx1ZS5zaG9ydElkfToke3ZhbHVlLnZhbHVlfWBcbiAgICAgICAgICAgIGlmICh0aGlzLnByb2Nlc3NlZEhhc2hQYXJhbXNSZWYuaGFzKHBhcmFtS2V5KSkge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLW9uaW5pdGlhbHZhbHVlZm91bmQtYWxyZWFkeS1wcm9jZXNzZWQnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICAgIHNob3J0SWQ6IHZhbHVlLnNob3J0SWQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlLFxuICAgICAgICAgICAgICAgIHBhcmFtS2V5LFxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZFBhcmFtczogQXJyYXkuZnJvbSh0aGlzLnByb2Nlc3NlZEhhc2hQYXJhbXNSZWYpLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgdGhlIHZhbHVlIG9yIHNob3J0SWQgaGFzIGNoYW5nZWQgdG8gYXZvaWQgdW5uZWNlc3NhcnkgcmUtcmVuZGVyc1xuICAgICAgICAgICAgY29uc3Qgd2lsbFVwZGF0ZSA9IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgIT09IHZhbHVlLnNob3J0SWQgfHwgdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUgIT09IHZhbHVlLnZhbHVlXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLW9uaW5pdGlhbHZhbHVlZm91bmQtd2lsbC11cGRhdGUnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgd2lsbFVwZGF0ZSxcbiAgICAgICAgICAgICAgcHJldmlvdXNTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSxcbiAgICAgICAgICAgICAgbmV3U2hvcnRJZDogdmFsdWUuc2hvcnRJZCxcbiAgICAgICAgICAgICAgbmV3VmFsdWU6IHZhbHVlLnZhbHVlLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh3aWxsVXBkYXRlKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3VybC1wYXJhbS1kZXRlY3RlZCcsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgc2hvcnRJZDogdmFsdWUuc2hvcnRJZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICAgICAgICAgICAgZm91bmRJbjogJ21hbmFnZXInLFxuICAgICAgICAgICAgICAgIHRyaWdnZXJlZEJ5OiAnaGVscGVyc2ltcGxlLW9wZW4td2lkZ2V0LWV2ZW50JyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Nob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBSZXNldCB0byBOZXcgbW9kZSB3aGVuIGhhc2ggcGFyYW1ldGVyIGlzIGRldGVjdGVkIHRvIGF2b2lkIGJ1Z3Mgd2l0aCBhY2N1bXVsYXRpb24gbW9kZXNcbiAgICAgICAgICAgICAgLy8gVXNpbmcgQWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciAocjAxOC41OClcbiAgICAgICAgICAgICAgY29uc3QgbmVlZHNNb2RlUmVzZXQgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlICE9PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50TW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGVcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSBpbml0aWFsUXVlcnlWYWx1ZSBzdGF0ZVxuICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgXG4gICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU6IHsgc2hvcnRJZDogdmFsdWUuc2hvcnRJZCwgdmFsdWU6IHZhbHVlLnZhbHVlIH1cbiAgICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1pbml0aWFscXVlcnl2YWx1ZS1zdGF0ZS11cGRhdGVkJyxcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICAgICAgbmV3U3RhdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGhhc0luaXRpYWxRdWVyeVZhbHVlOiAhIXRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAvLyBSZXNldCBtb2RlIHZpYSBtYW5hZ2VyIGlmIG5lZWRlZFxuICAgICAgICAgICAgICBpZiAobmVlZHNNb2RlUmVzZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNldFJlc3VsdCA9IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5yZXNldE1vZGVPbkhhc2hEZXRlY3Rpb24oXG4gICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICAgICAgY3VycmVudE1vZGVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHdpZGdldCBzdGF0ZSBmcm9tIG1hbmFnZXIncyByZXR1cm4gdmFsdWVcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlOiByZXNldFJlc3VsdC5yZXN1bHRzTW9kZSxcbiAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogcmVzZXRSZXN1bHQuYWNjdW11bGF0ZWRSZWNvcmRzXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1vbmluaXRpYWx2YWx1ZWZvdW5kLW5vLXZhbHVlLWNsZWFyaW5nJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgIGhhc0N1cnJlbnRJbml0aWFsUXVlcnlWYWx1ZTogISF0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBObyBtYXRjaGluZyBwYXJhbWV0ZXJzIGZvdW5kIC0gY2xlYXIgc3RhdGVcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbml0aWFsUXVlcnlWYWx1ZTogdW5kZWZpbmVkIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbk1vZGVSZXNldE5lZWRlZDogKCkgPT4ge1xuICAgICAgICAgIC8vIFJlc2V0IHRvIE5ldyBtb2RlIHdoZW4gaGFzaCBwYXJhbWV0ZXIgaXMgZGV0ZWN0ZWRcbiAgICAgICAgICAvLyBVc2luZyBBY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyIChyMDE4LjU4KVxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRNb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZVxuICAgICAgICAgIGNvbnN0IG5lZWRzUmVzZXQgPSBjdXJyZW50TW9kZSAhPT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAobmVlZHNSZXNldCkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgICBldmVudDogJ21vZGUtcmVzZXQtbmVlZGVkLW9uLWhhc2gtZGV0ZWN0aW9uJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgIGN1cnJlbnRNb2RlLFxuICAgICAgICAgICAgICB0cmlnZ2VyZWRCeTogJ2hlbHBlcnNpbXBsZS1vcGVuLXdpZGdldC1ldmVudCcsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzZXRSZXN1bHQgPSB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIucmVzZXRNb2RlT25IYXNoRGV0ZWN0aW9uKFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICBjdXJyZW50TW9kZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgd2lkZ2V0IHN0YXRlIGZyb20gbWFuYWdlcidzIHJldHVybiB2YWx1ZVxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgIHJlc3VsdHNNb2RlOiByZXNldFJlc3VsdC5yZXN1bHRzTW9kZSxcbiAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiByZXNldFJlc3VsdC5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLy8gQ2h1bmsgMTogTWFuYWdlciBpbXBsZW1lbnRhdGlvbiAocjAxOC44IC0gc3dpdGNoZWQgdG8gbWFuYWdlcilcbiAgICAvLyBTZXR1cCBtYW5hZ2VyIChubyBhdXRvbm9tb3VzIFVSTCBjaGVja2luZyAtIEhlbHBlclNpbXBsZSBvcmNoZXN0cmF0ZXMpXG4gICAgLy8gTk9URTogc2V0dXAoKSBpcyBhIG5vLW9wIC0gY2FsbGJhY2tzIGFyZSBuZXZlciBjYWxsZWRcbiAgICB0aGlzLnVybENvbnN1bXB0aW9uTWFuYWdlci5zZXR1cChcbiAgICAgIHRoaXMucHJvcHMsXG4gICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAge30gLy8gRW1wdHkgY2FsbGJhY2tzIC0gc2V0dXAoKSBpcyBhIG5vLW9wXG4gICAgKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgSGVscGVyU2ltcGxlJ3Mgb3BlbiB3aWRnZXQgZXZlbnRcbiAgICAvLyBRdWVyeVNpbXBsZSBzaG91bGQgb25seSBwcm9jZXNzIGhhc2ggcGFyYW1ldGVycyB3aGVuIEhlbHBlclNpbXBsZSBleHBsaWNpdGx5IG9wZW5zIHRoZSB3aWRnZXRcbiAgICAvLyBUaGlzIGVuc3VyZXMgSGVscGVyU2ltcGxlIHJlbWFpbnMgdGhlIG9yY2hlc3RyYXRvclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKE9QRU5fV0lER0VUX0VWRU5ULCB0aGlzLmhhbmRsZU9wZW5XaWRnZXRFdmVudClcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gtRVhFQycsIHtcbiAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtbW91bnRlZC1ldmVudC1saXN0ZW5lci1zZXR1cCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gQ2h1bmsgMjogTWFuYWdlciBpbXBsZW1lbnRhdGlvbiAocjAxOC4xMyAtIFN0ZXAgMi4zOiBTd2l0Y2ggdG8gbWFuYWdlcilcbiAgICBpZiAodGhpcy53aWRnZXRSZWYuY3VycmVudCkge1xuICAgICAgdGhpcy52aXNpYmlsaXR5TWFuYWdlci5zZXR1cChcbiAgICAgICAgdGhpcy53aWRnZXRSZWYuY3VycmVudCxcbiAgICAgICAgdGhpcy5wcm9wcyxcbiAgICAgICAge1xuICAgICAgICAgIG9uVmlzaWJpbGl0eUNoYW5nZTogKGlzVmlzaWJsZSkgPT4ge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHN0YXRlXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNQYW5lbFZpc2libGU6IGlzVmlzaWJsZSB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYW5kbGUgcmVzdG9yYXRpb24gbG9naWNcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZShpc1Zpc2libGUpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAoaXNWaXNpYmxlKSA9PiB7XG4gICAgICAgICAgLy8gTWFuYWdlcidzIGludGVybmFsIHN0YXRlIHRyYWNraW5nIGNhbGxiYWNrXG4gICAgICAgICAgLy8gKG5vLW9wLCByZXN0b3JhdGlvbiBoYW5kbGVkIGluIG9uVmlzaWJpbGl0eUNoYW5nZSlcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBOb3RpZnkgbW91bnQgdmlhIG1hbmFnZXJcbiAgICAgIHRoaXMudmlzaWJpbGl0eU1hbmFnZXIubm90aWZ5TW91bnQodGhpcy5wcm9wcy5pZClcbiAgICB9XG5cbiAgICAvLyBDaHVuayA1OiBJbml0aWFsaXplIGFjY3VtdWxhdGVkIHJlY29yZHMgbWFuYWdlciBzdGF0ZSAocjAxOC4yNiAtIFN0ZXAgNS4xOiBBZGQgbWFuYWdlcilcbiAgICAvLyBTeW5jIG1hbmFnZXIgc3RhdGUgd2l0aCB3aWRnZXQgc3RhdGVcbiAgICBpZiAodGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSkge1xuICAgICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLmhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlKFxuICAgICAgICB0aGlzLnByb3BzLmlkLFxuICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBmYWxzZVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShcbiAgICAgICAgdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgIClcbiAgICB9XG4gICAgXG4gICAgLy8gU2V0IHVwIGNhbGxiYWNrcyBmb3IgbWFuYWdlclxuICAgIC8vIFNldCB1cCBjYWxsYmFja3MgZm9yIG1hbmFnZXIgKHIwMTguNTcpXG4gICAgLy8gTm90ZTogUHJpbWFyeSBzdGF0ZSB1cGRhdGVzIGNvbWUgZnJvbSBtYW5hZ2VyIHJldHVybiB2YWx1ZXMgaW4gaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UvaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlXG4gICAgLy8gVGhlc2UgY2FsbGJhY2tzIHNlcnZlIGFzIGJhY2t1cC92ZXJpZmljYXRpb24gYnV0IHNob3VsZG4ndCBiZSBuZWVkZWQgc2luY2Ugd2UgdXBkYXRlIHN0YXRlIGRpcmVjdGx5IGZyb20gcmV0dXJuIHZhbHVlc1xuICAgIHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5zZXRDYWxsYmFja3Moe1xuICAgICAgb25Nb2RlQ2hhbmdlOiAobW9kZSkgPT4ge1xuICAgICAgICAvLyBTdGF0ZSBpcyB1cGRhdGVkIGZyb20gaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UgcmV0dXJuIHZhbHVlLCBzbyB0aGlzIGlzIGp1c3QgYSBiYWNrdXBcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucmVzdWx0c01vZGUgIT09IG1vZGUpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2FsbGJhY2stb25Nb2RlQ2hhbmdlLXN0YXRlLXN5bmMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICBjYWxsYmFja01vZGU6IG1vZGUsXG4gICAgICAgICAgICBjdXJyZW50U3RhdGVNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICAgICAgbm90ZTogJ1N0YXRlIHNob3VsZCBhbHJlYWR5IGJlIHN5bmNlZCBmcm9tIHJldHVybiB2YWx1ZScsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZXN1bHRzTW9kZTogbW9kZSB9KVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U6IChyZWNvcmRzKSA9PiB7XG4gICAgICAgIC8vIFN0YXRlIGlzIHVwZGF0ZWQgZnJvbSBoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHNvIHRoaXMgaXMganVzdCBhIGJhY2t1cFxuICAgICAgICBjb25zdCBjdXJyZW50Q291bnQgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgaWYgKGN1cnJlbnRDb3VudCAhPT0gcmVjb3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2FsbGJhY2stb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2Utc3RhdGUtc3luYycsXG4gICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgIGNhbGxiYWNrQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgY3VycmVudFN0YXRlQ291bnQ6IGN1cnJlbnRDb3VudCxcbiAgICAgICAgICAgIG5vdGU6ICdTdGF0ZSBzaG91bGQgYWxyZWFkeSBiZSBzeW5jZWQgZnJvbSBkaXJlY3QgdXBkYXRlJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGFjY3VtdWxhdGVkUmVjb3JkczogcmVjb3JkcyB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHNlbGVjdGlvbiBjaGFuZ2VzIGZyb20gcXVlcnktcmVzdWx0XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3IgcmVzdG9yZSByZXF1ZXN0cyB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlc1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQsIHRoaXMuaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIEdyYXBoaWNzIGxheWVyIHdpbGwgYmUgaW5pdGlhbGl6ZWQgd2hlbiBtYXAgdmlldyBiZWNvbWVzIGF2YWlsYWJsZSB2aWEgSmltdU1hcFZpZXdDb21wb25lbnRcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIC8vIENodW5rIDE6IENsZWFuIHVwIG1hbmFnZXIgKHIwMTguOClcbiAgICB0aGlzLnVybENvbnN1bXB0aW9uTWFuYWdlci5jbGVhbnVwKClcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBIZWxwZXJTaW1wbGUgb3BlbiB3aWRnZXQgZXZlbnQgbGlzdGVuZXJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihPUEVOX1dJREdFVF9FVkVOVCwgdGhpcy5oYW5kbGVPcGVuV2lkZ2V0RXZlbnQpXG4gICAgXG4gICAgLy8gQ2h1bmsgMjogQ2xlYW4gdXAgbWFuYWdlciAocjAxOC4xMyAtIFN0ZXAgMi4zOiBTd2l0Y2ggdG8gbWFuYWdlcilcbiAgICB0aGlzLnZpc2liaWxpdHlNYW5hZ2VyLmNsZWFudXAoKVxuICAgIHRoaXMudmlzaWJpbGl0eU1hbmFnZXIubm90aWZ5VW5tb3VudCh0aGlzLnByb3BzLmlkKVxuICAgIFxuICAgIC8vIENsZWFuIHVwIHNlbGVjdGlvbiBjaGFuZ2UgbGlzdGVuZXJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQsIHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgcmVzdG9yZSBvbiBpZGVudGlmeSBjbG9zZSBsaXN0ZW5lclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlQsIHRoaXMuaGFuZGxlUmVzdG9yZU9uSWRlbnRpZnlDbG9zZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIENodW5rIDQ6IEdyYXBoaWNzIGxheWVyIGNsZWFudXAgKHIwMTguMjUgLSBTdGVwIDQuMzogUmVtb3ZlIG9sZCBpbXBsZW1lbnRhdGlvbilcbiAgICB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmNsZWFudXAodGhpcy5wcm9wcy5pZClcbiAgICBcbiAgICAvLyBDaHVuayA1OiBDbGVhbiB1cCBhY2N1bXVsYXRlZCByZWNvcmRzIG1hbmFnZXIgKHIwMTguMjYgLSBTdGVwIDUuMTogQWRkIG1hbmFnZXIpXG4gICAgdGhpcy5hY2N1bXVsYXRlZFJlY29yZHNNYW5hZ2VyLmNsZWFudXAoKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6ICd3aWRnZXQtY2xvc2VkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPikge1xuICAgIC8vIFF1ZXJ5U2ltcGxlIG5vIGxvbmdlciBhdXRvbm9tb3VzbHkgY2hlY2tzIFVSTCBwYXJhbWV0ZXJzXG4gICAgLy8gT25seSBIZWxwZXJTaW1wbGUgY2FuIHRyaWdnZXIgaGFzaCBwYXJhbWV0ZXIgcHJvY2Vzc2luZyB2aWEgT1BFTl9XSURHRVRfRVZFTlRcbiAgICAvLyBUaGlzIGVuc3VyZXMgSGVscGVyU2ltcGxlIHJlbWFpbnMgdGhlIG9yY2hlc3RyYXRvclxuICAgIFxuICAgIC8vIENodW5rIDQ6IEdyYXBoaWNzIGxheWVyIGlzIG5vdyByZXF1aXJlZCAocjAxOC4yNSAtIFN0ZXAgNC4zOiBSZW1vdmUgY29uZmlnIGNoYW5nZSBoYW5kbGluZylcbiAgICAvLyBObyBuZWVkIHRvIGhhbmRsZSBjb25maWcgY2hhbmdlcyBmb3IgZ3JhcGhpY3MgbGF5ZXIgc2luY2UgaXQncyBhbHdheXMgZW5hYmxlZFxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSB3aWRnZXQgb2Ygc2VsZWN0aW9uIGNoYW5nZXMgdmlhIGN1c3RvbSBldmVudC5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGRpc3BhdGNoZXMgYSBjdXN0b20gZXZlbnQgdGhhdCBIZWxwZXJTaW1wbGUgbGlzdGVucyB0byBmb3IgdHJhY2tpbmdcbiAgICogc2VsZWN0aW9uIHN0YXRlLiBDYWxsZWQgYnkgUXVlcnlUYXNrUmVzdWx0IGNvbXBvbmVudCB3aGVuIHVzZXIgc2VsZWN0cyByZWNvcmRzLlxuICAgKiBcbiAgICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHNlbGVjdGVkIHJlY29yZCBJRHMgKG9iamVjdElkcyBmcm9tIHRoZSBmZWF0dXJlIGxheWVyKVxuICAgKiBAcGFyYW0gZGF0YVNvdXJjZUlkIC0gT3B0aW9uYWwgZGF0YSBzb3VyY2UgSUQgZm9yIHRoZSBzZWxlY3RlZCByZWNvcmRzXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKi9cbiAgbm90aWZ5SGVscGVyU2ltcGxlT2ZTZWxlY3Rpb24gPSAocmVjb3JkSWRzOiBzdHJpbmdbXSwgZGF0YVNvdXJjZUlkPzogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1NFTEVDVElPTl9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVjb3JkSWRzLFxuICAgICAgICBkYXRhU291cmNlSWRcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB3aWRnZXQgcGFuZWwgdmlzaWJpbGl0eSBjaGFuZ2VzIGZyb20gV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXIuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpbXBsZW1lbnRzIHRoZSBzZWxlY3Rpb24gcmVzdG9yYXRpb24gcGF0dGVybjpcbiAgICogLSBXaGVuIHBhbmVsIG9wZW5zOiBSZXN0b3JlcyBzZWxlY3Rpb24gdG8gbWFwIGlmIHdpZGdldCBoYXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBvciBsYXN0IHNlbGVjdGlvblxuICAgKiAtIFdoZW4gcGFuZWwgY2xvc2VzOiBDbGVhcnMgc2VsZWN0aW9uIGZyb20gbWFwIChidXQgcHJlc2VydmVzIHdpZGdldCBzdGF0ZSBmb3IgcmVzdG9yYXRpb24pXG4gICAqIFxuICAgKiBUaGUgcmVzdG9yYXRpb24gbG9naWMgcmVzcGVjdHMgdGhlIGN1cnJlbnQgcmVzdWx0cyBtb2RlOlxuICAgKiAtIFwiQWRkIHRvXCIgLyBcIlJlbW92ZSBmcm9tXCIgbW9kZXM6IFVzZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBmb3IgcmVzdG9yYXRpb25cbiAgICogLSBcIk5ld1wiIG1vZGU6IFVzZXMgbGFzdFNlbGVjdGlvbiBzdGF0ZSBmb3IgcmVzdG9yYXRpb25cbiAgICogXG4gICAqIEBwYXJhbSBpc1Zpc2libGUgLSBUcnVlIGlmIHdpZGdldCBwYW5lbCBpcyB2aXNpYmxlLCBmYWxzZSBpZiBoaWRkZW5cbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxOC4xMyAoQ2h1bmsgMjogTWFuYWdlciBpbXBsZW1lbnRhdGlvbilcbiAgICogQHNlZSB7QGxpbmsgV2lkZ2V0VmlzaWJpbGl0eU1hbmFnZXJ9IGZvciB2aXNpYmlsaXR5IGRldGVjdGlvbiBpbXBsZW1lbnRhdGlvblxuICAgKi9cbiAgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSA9IChpc1Zpc2libGU6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNWaXNpYmxlKSB7XG4gICAgICAvLyBXaGVuIHBhbmVsIG9wZW5zLCBjaGVjayBpZiB3ZSBoYXZlIHNlbGVjdGlvbiB0byByZXN0b3JlXG4gICAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICBjb25zdCBoYXNBY2N1bXVsYXRlZFJlY29yZHMgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25TdGF0ZSA9IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUgPSBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgID8gaGFzQWNjdW11bGF0ZWRSZWNvcmRzIFxuICAgICAgICA6IGhhc1NlbGVjdGlvblN0YXRlXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtY2hlY2tpbmctc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGhhc1NlbGVjdGlvbjogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUuc2VsZWN0aW9uUmVjb3JkQ291bnQgfHwgMCxcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24sXG4gICAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc1NlbGVjdGlvblRvUmVzdG9yZSxcbiAgICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAgICdpc0FjY3VtdWxhdGlvbk1vZGUnOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICAgJ2hhc0FjY3VtdWxhdGVkUmVjb3Jkcyc6IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgICAnaGFzU2VsZWN0aW9uU3RhdGUnOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgICAnY2FsY3VsYXRlZC1oYXNTZWxlY3Rpb25Ub1Jlc3RvcmUnOiBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUsXG4gICAgICAgICAgJ3dpbGwtY2FsbC1hZGRTZWxlY3Rpb25Ub01hcCc6IGhhc1NlbGVjdGlvblRvUmVzdG9yZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBBZGQgc2VsZWN0aW9uIHRvIG1hcCBpZiB3ZSBoYXZlIG9uZVxuICAgICAgaWYgKGhhc1NlbGVjdGlvblRvUmVzdG9yZSkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtY2FsbGluZy1hZGRTZWxlY3Rpb25Ub01hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9SZXN0b3JlLWlzLXRydWUnXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuYWRkU2VsZWN0aW9uVG9NYXAoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXNraXBwaW5nLWFkZFNlbGVjdGlvblRvTWFwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUtaXMtZmFsc2UnLFxuICAgICAgICAgIHdoeTogaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICAgICAgPyAnbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycgXG4gICAgICAgICAgICA6ICduby1oYXNTZWxlY3Rpb24tc3RhdGUnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdoZW4gcGFuZWwgY2xvc2VzLCBjbGVhciBzZWxlY3Rpb24gZnJvbSBtYXAgb25seSAoa2VlcCB3aWRnZXQgc3RhdGUpXG4gICAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICBjb25zdCBoYXNBY2N1bXVsYXRlZFJlY29yZHMgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25TdGF0ZSA9IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25Ub0NsZWFyID0gaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICA/IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyBcbiAgICAgICAgOiBoYXNTZWxlY3Rpb25TdGF0ZVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNoZWNraW5nLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBoYXNTZWxlY3Rpb246IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDAsXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLFxuICAgICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNTZWxlY3Rpb25Ub0NsZWFyLFxuICAgICAgICBkZWNpc2lvbkxvZ2ljOiB7XG4gICAgICAgICAgJ2lzQWNjdW11bGF0aW9uTW9kZSc6IGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgICAnaGFzQWNjdW11bGF0ZWRSZWNvcmRzJzogaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICAgICdoYXNTZWxlY3Rpb25TdGF0ZSc6IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICAgICdjYWxjdWxhdGVkLWhhc1NlbGVjdGlvblRvQ2xlYXInOiBoYXNTZWxlY3Rpb25Ub0NsZWFyLFxuICAgICAgICAgICd3aWxsLWNhbGwtY2xlYXJTZWxlY3Rpb25Gcm9tTWFwJzogaGFzU2VsZWN0aW9uVG9DbGVhclxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoaGFzU2VsZWN0aW9uVG9DbGVhcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2FsbGluZy1jbGVhclNlbGVjdGlvbkZyb21NYXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvQ2xlYXItaXMtdHJ1ZSdcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbkZyb21NYXAoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLW5vLXNlbGVjdGlvbi10by1jbGVhcicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9DbGVhci1pcy1mYWxzZScsXG4gICAgICAgICAgd2h5OiBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgICAgICA/ICduby1hY2N1bXVsYXRlZC1yZWNvcmRzJyBcbiAgICAgICAgICAgIDogJ25vLWhhc1NlbGVjdGlvbi1zdGF0ZSdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBtYXAgdmlldyBjaGFuZ2UgZnJvbSBKaW11TWFwVmlld0NvbXBvbmVudC5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSBKaW11TWFwVmlld0NvbXBvbmVudCB3aGVuIHRoZSBtYXAgdmlldyBiZWNvbWVzIGF2YWlsYWJsZVxuICAgKiBvciBjaGFuZ2VzLiBJdCBkZWxlZ2F0ZXMgdG8gTWFwVmlld01hbmFnZXIgZm9yIHJlZmVyZW5jZSBtYW5hZ2VtZW50IGFuZCBpbml0aWFsaXplc1xuICAgKiB0aGUgZ3JhcGhpY3MgbGF5ZXIgaWYgZW5hYmxlZCBpbiB3aWRnZXQgY29uZmlndXJhdGlvbi5cbiAgICogXG4gICAqIEBwYXJhbSBqaW11TWFwVmlldyAtIFRoZSBKaW11TWFwVmlldyBpbnN0YW5jZSBmcm9tIEppbXVNYXBWaWV3Q29tcG9uZW50LCBvciBudWxsIGlmIHVuYXZhaWxhYmxlXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTguMTggKENodW5rIDY6IE1hbmFnZXIgaW1wbGVtZW50YXRpb24pXG4gICAqIEBzZWUge0BsaW5rIE1hcFZpZXdNYW5hZ2VyfSBmb3IgbWFwIHZpZXcgcmVmZXJlbmNlIG1hbmFnZW1lbnRcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyB8IG51bGwpID0+IHtcbiAgICBjb25zdCB7IGlkLCBjb25maWcgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBNYW5hZ2VyIGltcGxlbWVudGF0aW9uIChyMDE4LjE2IC0gU3RlcCA2LjM6IFN3aXRjaCB0byBtYW5hZ2VyKVxuICAgIHRoaXMubWFwVmlld01hbmFnZXIuaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkKFxuICAgICAgamltdU1hcFZpZXcsXG4gICAgICB0aGlzLnByb3BzLFxuICAgICAge1xuICAgICAgICBvbk1hcFZpZXdDaGFuZ2U6IChuZXdKaW11TWFwVmlldykgPT4ge1xuICAgICAgICAgIC8vIEdldCBtYXAgdmlldyBmcm9tIG1hbmFnZXJcbiAgICAgICAgICBjb25zdCBuZXdNYXBWaWV3ID0gdGhpcy5tYXBWaWV3TWFuYWdlci5nZXRNYXBWaWV3KClcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaHVuayA0OiBHcmFwaGljcyBsYXllciBpbml0aWFsaXphdGlvbiAocjAxOC4yNSAtIFN0ZXAgNC4zOiBSZW1vdmUgb2xkIGltcGxlbWVudGF0aW9uKVxuICAgICAgICAgIC8vIEluaXRpYWxpemUgZ3JhcGhpY3MgbGF5ZXIgaWYgbWFwIHZpZXcgaXMgYXZhaWxhYmxlIGFuZCBncmFwaGljcyBsYXllciBzaG91bGQgYmUgaW5pdGlhbGl6ZWRcbiAgICAgICAgICBpZiAodGhpcy5ncmFwaGljc0xheWVyTWFuYWdlci5zaG91bGRJbml0aWFsaXplKGNvbmZpZywgbmV3TWFwVmlldykgJiYgbmV3TWFwVmlldykge1xuICAgICAgICAgICAgLy8gVXNlIHZvaWQgdG8gaGFuZGxlIHByb21pc2Ugd2l0aG91dCBibG9ja2luZ1xuICAgICAgICAgICAgdm9pZCB0aGlzLmdyYXBoaWNzTGF5ZXJNYW5hZ2VyLmluaXRpYWxpemUoaWQsIG5ld01hcFZpZXcsIHtcbiAgICAgICAgICAgICAgb25HcmFwaGljc0xheWVySW5pdGlhbGl6ZWQ6IChncmFwaGljc0xheWVyKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHN0YXRlIHRvIGZvcmNlIHJlLXJlbmRlciBhbmQgdXBkYXRlIHByb3BzXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZDogdHJ1ZSB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBncmFwaGljcyBsYXllciBsYXppbHkgd2hlbiBvdXRwdXQgZGF0YSBzb3VyY2UgYmVjb21lcyBhdmFpbGFibGUuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgUXVlcnlUYXNrIGNvbXBvbmVudCB3aGVuIGFuIG91dHB1dCBkYXRhIHNvdXJjZSBpcyBjcmVhdGVkLlxuICAgKiBJdCByZXRyaWV2ZXMgdGhlIG1hcCB2aWV3IGZyb20gTWFwVmlld01hbmFnZXIgYW5kIGluaXRpYWxpemVzIHRoZSBncmFwaGljcyBsYXllclxuICAgKiB1c2luZyBHcmFwaGljc0xheWVyTWFuYWdlciBpZiBub3QgYWxyZWFkeSBpbml0aWFsaXplZC5cbiAgICogXG4gICAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgdGhhdCB3YXMgY3JlYXRlZFxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICogQHNlZSB7QGxpbmsgR3JhcGhpY3NMYXllck1hbmFnZXIuaW5pdGlhbGl6ZUZyb21PdXRwdXREU30gZm9yIGdyYXBoaWNzIGxheWVyIGluaXRpYWxpemF0aW9uXG4gICAqIEBzZWUge0BsaW5rIE1hcFZpZXdNYW5hZ2VyLmdldE1hcFZpZXd9IGZvciBtYXAgdmlldyByZXRyaWV2YWxcbiAgICovXG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIGdyYXBoaWNzIGxheWVyIGxhemlseSB3aGVuIG91dHB1dCBkYXRhIHNvdXJjZSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSBRdWVyeVRhc2sgY29tcG9uZW50IHdoZW4gYW4gb3V0cHV0IGRhdGEgc291cmNlIGlzIGNyZWF0ZWQuXG4gICAqIEl0IHJldHJpZXZlcyB0aGUgbWFwIHZpZXcgZnJvbSBNYXBWaWV3TWFuYWdlciBhbmQgaW5pdGlhbGl6ZXMgdGhlIGdyYXBoaWNzIGxheWVyXG4gICAqIHVzaW5nIEdyYXBoaWNzTGF5ZXJNYW5hZ2VyIGlmIG5vdCBhbHJlYWR5IGluaXRpYWxpemVkLlxuICAgKiBcbiAgICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSB0aGF0IHdhcyBjcmVhdGVkXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKiBAc2VlIHtAbGluayBHcmFwaGljc0xheWVyTWFuYWdlci5pbml0aWFsaXplRnJvbU91dHB1dERTfSBmb3IgZ3JhcGhpY3MgbGF5ZXIgaW5pdGlhbGl6YXRpb25cbiAgICogQHNlZSB7QGxpbmsgTWFwVmlld01hbmFnZXIuZ2V0TWFwVmlld30gZm9yIG1hcCB2aWV3IHJldHJpZXZhbFxuICAgKi9cbiAgcHVibGljIGluaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTID0gYXN5bmMgKG91dHB1dERTOiBEYXRhU291cmNlKSA9PiB7XG4gICAgY29uc3QgeyBpZCwgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gQ2h1bmsgNDogR3JhcGhpY3MgbGF5ZXIgaW5pdGlhbGl6YXRpb24gKHIwMTguMjUgLSBTdGVwIDQuMzogUmVtb3ZlIG9sZCBpbXBsZW1lbnRhdGlvbilcbiAgICAvLyBVc2UgbWFwIHZpZXcgZnJvbSBtYW5hZ2VyIGlmIGF2YWlsYWJsZVxuICAgIGNvbnN0IG1hcFZpZXcgPSB0aGlzLm1hcFZpZXdNYW5hZ2VyLmdldE1hcFZpZXcoKSB8fCB0aGlzLm1hcFZpZXdSZWYuY3VycmVudFxuICAgIFxuICAgIGF3YWl0IHRoaXMuZ3JhcGhpY3NMYXllck1hbmFnZXIuaW5pdGlhbGl6ZUZyb21PdXRwdXREUyhcbiAgICAgIGlkLFxuICAgICAgY29uZmlnLFxuICAgICAgb3V0cHV0RFMsXG4gICAgICBtYXBWaWV3LFxuICAgICAge1xuICAgICAgICBvbkdyYXBoaWNzTGF5ZXJJbml0aWFsaXplZDogKGdyYXBoaWNzTGF5ZXIpID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZ3JhcGhpY3NMYXllckluaXRpYWxpemVkOiB0cnVlIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIH1cblxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIGdyYXBoaWNzIGZyb20gdGhlIGdyYXBoaWNzIGxheWVyIGlmIGl0IGV4aXN0cy5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIGNsZWFyaW5nIHJlc3VsdHMgb3Igc3dpdGNoaW5nIHF1ZXJpZXMgaW4gXCJOZXdcIiBtb2RlXG4gICAqIHRvIGVuc3VyZSBncmFwaGljcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBtYXAuIEl0IGRvZXMgbm90IHJlbW92ZSB0aGUgZ3JhcGhpY3MgbGF5ZXJcbiAgICogaXRzZWxmLCBvbmx5IGNsZWFycyBpdHMgY29udGVudHMuXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKiBAc2VlIHtAbGluayBHcmFwaGljc0xheWVyTWFuYWdlci5jbGVhckdyYXBoaWNzfSBmb3IgZ3JhcGhpY3MgY2xlYXJpbmcgbG9naWNcbiAgICovXG4gIHB1YmxpYyBjbGVhckdyYXBoaWNzTGF5ZXJJZkV4aXN0cyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIENodW5rIDQ6IEdyYXBoaWNzIGxheWVyIGNsZWFyaW5nIChyMDE4LjI1IC0gU3RlcCA0LjM6IFJlbW92ZSBvbGQgaW1wbGVtZW50YXRpb24pXG4gICAgdGhpcy5ncmFwaGljc0xheWVyTWFuYWdlci5jbGVhckdyYXBoaWNzKHRoaXMucHJvcHMuaWQsIGNvbmZpZylcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgc2VsZWN0aW9uIGNoYW5nZSBldmVudHMgZnJvbSBRdWVyeVRhc2tSZXN1bHQgY29tcG9uZW50LlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgdXBkYXRlcyB3aWRnZXQgc3RhdGUgd2hlbiByZWNvcmRzIGFyZSBzZWxlY3RlZCBvciBkZXNlbGVjdGVkIGluIHRoZVxuICAgKiByZXN1bHRzIHRhYi4gSXQgcmVzcGVjdHMgdGhlIGN1cnJlbnQgcmVzdWx0cyBtb2RlOlxuICAgKiAtIFwiQWRkIHRvXCIgLyBcIlJlbW92ZSBmcm9tXCIgbW9kZXM6IFVzZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBjb3VudCBmb3IgcmVzdG9yYXRpb24gc3RhdGVcbiAgICogLSBcIk5ld1wiIG1vZGU6IFVzZXMgZXZlbnQgcmVjb3JkIElEcyBmb3IgcmVzdG9yYXRpb24gc3RhdGVcbiAgICogXG4gICAqIEFsc28gaGFuZGxlcyBhdXRvbWF0aWMgbW9kZSByZXNldDogSWYgc2VsZWN0aW9uIGlzIGNsZWFyZWQgaW4gXCJSZW1vdmUgZnJvbVwiIG1vZGUsXG4gICAqIHRoZSBtb2RlIGlzIGF1dG9tYXRpY2FsbHkgcmVzZXQgdG8gXCJOZXdcIiBzaW5jZSBSZW1vdmUgbW9kZSByZXF1aXJlcyBzZWxlY3Rpb24gdG8gZnVuY3Rpb24uXG4gICAqIFxuICAgKiBAcGFyYW0gZXZlbnQgLSBDdXN0b20gZXZlbnQgY29udGFpbmluZyBzZWxlY3Rpb24gZGV0YWlscyAod2lkZ2V0SWQsIHJlY29yZElkcywgb3V0cHV0RHNJZCwgcXVlcnlJdGVtQ29uZmlnSWQpXG4gICAqIFxuICAgKiBAc2luY2UgMS4xOS4wLXIwMTcuMFxuICAgKi9cbiAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ8eyB3aWRnZXRJZDogc3RyaW5nLCByZWNvcmRJZHM6IHN0cmluZ1tdLCBkYXRhU291cmNlSWQ/OiBzdHJpbmcsIG91dHB1dERzSWQ/OiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkPzogc3RyaW5nIH0+XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIC8vIE9ubHkgdHJhY2sgaWYgdGhpcyBpcyBmb3Igb3VyIHdpZGdldFxuICAgIGlmIChjdXN0b21FdmVudC5kZXRhaWwud2lkZ2V0SWQgIT09IGlkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgY29uc3QgaGFzU2VsZWN0aW9uID0gY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcyAmJiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCA+IDBcbiAgICBcbiAgICAvLyBJZiB0aGUgcGFuZWwgaXMgTk9UIHZpc2libGUsIGFuZCB3ZSBhcmUgcmVjZWl2aW5nIGFuIEVNUFRZIHNlbGVjdGlvbixcbiAgICAvLyBpdCdzIGFsbW9zdCBjZXJ0YWlubHkgb3VyIG93biAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwJyBsb2dpYyBmaXJpbmcuXG4gICAgLy8gV2Ugc2hvdWxkIElHTk9SRSB0aGlzIHNvIHdlIGRvbid0IHdpcGUgb3V0IHRoZSBsYXN0U2VsZWN0aW9uIHN0YXRlLlxuICAgIGlmICghdGhpcy5zdGF0ZS5pc1BhbmVsVmlzaWJsZSAmJiAhaGFzU2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlU2VsZWN0aW9uQ2hhbmdlLWlnbm9yaW5nLWVtcHR5LXNlbGVjdGlvbi13aGlsZS1wYW5lbC1jbG9zZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBJbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlLCB1c2UgYWNjdW11bGF0ZWQgcmVjb3JkcyBjb3VudCBmb3IgcmVzdG9yYXRpb25cbiAgICAvLyBUaGUgYWNjdW11bGF0ZWQgcmVjb3JkcyBhcmUgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3Igd2hhdCBzaG91bGQgYmUgcmVzdG9yZWRcbiAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIGNvbnN0IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID0gdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgY29uc3Qgc2VsZWN0aW9uQ291bnQgPSBpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwXG4gICAgICA/IGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50XG4gICAgICA6IChoYXNTZWxlY3Rpb24gPyBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCA6IDApXG4gICAgXG4gICAgLy8gSWYgc2VsZWN0aW9uIGlzIGNsZWFyZWQgYW5kIHdlJ3JlIGluIFJlbW92ZSBtb2RlLCByZXNldCB0byBOZXdTZWxlY3Rpb24gbW9kZVxuICAgIC8vIFJlbW92ZSBtb2RlIHJlcXVpcmVzIHNlbGVjdGlvbiB0byBmdW5jdGlvbiwgc28gaXQgc2hvdWxkIGJlIGRpc2FibGVkIHdoZW4gc2VsZWN0aW9uIGlzIGVtcHR5XG4gICAgY29uc3Qgc2hvdWxkUmVzZXRNb2RlID0gIWhhc1NlbGVjdGlvbiAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Db3VudCA9PT0gMCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS11cGRhdGluZy1zdGF0ZScsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGV2ZW50UmVjb3JkSWRzQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgaGFzU2VsZWN0aW9uRnJvbUV2ZW50OiBoYXNTZWxlY3Rpb24sXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEJlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQsXG4gICAgICBjYWxjdWxhdGVkU2VsZWN0aW9uQ291bnQ6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgJ3dpbGwtc2V0LWhhc1NlbGVjdGlvbic6IHNlbGVjdGlvbkNvdW50ID4gMCxcbiAgICAgICd3aWxsLXNldC1sYXN0U2VsZWN0aW9uJzogaGFzU2VsZWN0aW9uICYmICEhY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQgJiYgISFjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWQsXG4gICAgICAnd2lsbC1yZXNldC1tb2RlJzogc2hvdWxkUmVzZXRNb2RlLFxuICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAnaXNBY2N1bXVsYXRpb25Nb2RlJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAnYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwJzogYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwLFxuICAgICAgICAndXNlLWFjY3VtdWxhdGVkLWNvdW50JzogaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCxcbiAgICAgICAgJ3VzZS1ldmVudC1jb3VudCc6ICEoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50ID4gMCksXG4gICAgICAgICdzaG91bGQtcmVzZXQtbW9kZSc6IHNob3VsZFJlc2V0TW9kZVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBoYXNTZWxlY3Rpb246IHNlbGVjdGlvbkNvdW50ID4gMCxcbiAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiBzZWxlY3Rpb25Db3VudCxcbiAgICAgIC8vIFN0b3JlIGxhc3RTZWxlY3Rpb24gZm9yIGNvbXBhdGliaWxpdHksIGJ1dCByZXN0b3JhdGlvbiB3aWxsIHVzZSBhY2N1bXVsYXRlZFJlY29yZHMgaW4gQWRkL1JlbW92ZSBtb2Rlc1xuICAgICAgbGFzdFNlbGVjdGlvbjogaGFzU2VsZWN0aW9uICYmIGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkICYmIGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHJlY29yZElkczogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcyxcbiAgICAgICAgICAgIG91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICAgIH1cbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAvLyBSZXNldCBtb2RlIHRvIE5ld1NlbGVjdGlvbiBpZiBzZWxlY3Rpb24gaXMgY2xlYXJlZCBpbiBSZW1vdmUgbW9kZVxuICAgICAgLi4uKHNob3VsZFJlc2V0TW9kZSA/IHtcbiAgICAgICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IFtdIC8vIEFsc28gY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyB3aGVuIHJlc2V0dGluZyBtb2RlXG4gICAgICB9IDoge30pXG4gICAgfSlcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVNlbGVjdGlvbkNoYW5nZS1zdGF0ZS11cGRhdGVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICduZXctaGFzU2VsZWN0aW9uJzogc2VsZWN0aW9uQ291bnQgPiAwLFxuICAgICAgJ25ldy1zZWxlY3Rpb25SZWNvcmRDb3VudCc6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgJ25ldy1sYXN0U2VsZWN0aW9uLXJlY29yZElkcy1jb3VudCc6IGhhc1NlbGVjdGlvbiAmJiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCAmJiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICAgICAgPyBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICA6IDAsXG4gICAgICAnbW9kZS1yZXNldCc6IHNob3VsZFJlc2V0TW9kZSxcbiAgICAgICduZXctbW9kZSc6IHNob3VsZFJlc2V0TW9kZSA/IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uIDogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICdub3RlJzogc2hvdWxkUmVzZXRNb2RlIFxuICAgICAgICA/ICdNb2RlIHJlc2V0IHRvIE5ld1NlbGVjdGlvbiBiZWNhdXNlIHNlbGVjdGlvbiB3YXMgY2xlYXJlZCBpbiBSZW1vdmUgbW9kZSdcbiAgICAgICAgOiAnbGFzdFNlbGVjdGlvbi1vbmx5LWNvbnRhaW5zLWN1cnJlbnQtcXVlcnktcmVjb3Jkcy1ub3QtYWxsLWFjY3VtdWxhdGVkLXJlY29yZHMnXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHJlc3RvcmUgcmVxdWVzdCB3aGVuIGlkZW50aWZ5IHBvcHVwIGNsb3Nlcy5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIHJlc3RvcmVzIHNlbGVjdGlvbiB0byB0aGUgbWFwIGFmdGVyIHRoZSBpZGVudGlmeSBwb3B1cCBjbG9zZXMgYW5kXG4gICAqIHNlbGVjdGlvbiB3YXMgY2xlYXJlZC4gSXQgb25seSByZXN0b3JlcyBpZiB0aGUgd2lkZ2V0IHBhbmVsIGlzIGN1cnJlbnRseSBvcGVuXG4gICAqICh1c2VycyBjYW4ndCBzZWUgcmVzdG9yZWQgc2VsZWN0aW9uIGlmIHdpZGdldCBpcyBjbG9zZWQpLlxuICAgKiBcbiAgICogUmVzdG9yYXRpb24gbG9naWM6XG4gICAqIC0gXCJBZGQgdG9cIiAvIFwiUmVtb3ZlIGZyb21cIiBtb2RlczogUmVzdG9yZXMgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgZ3JvdXBlZCBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICogLSBcIk5ld1wiIG1vZGU6IFJlc3RvcmVzIGxhc3RTZWxlY3Rpb24gc3RhdGVcbiAgICogXG4gICAqIEBwYXJhbSBldmVudCAtIEN1c3RvbSBldmVudCBjb250YWluaW5nIHNlbGVjdGlvbiBkZXRhaWxzICh3aWRnZXRJZCwgcmVjb3JkSWRzLCBvdXRwdXREc0lkLCBxdWVyeUl0ZW1Db25maWdJZClcbiAgICogXG4gICAqIEBzaW5jZSAxLjE5LjAtcjAxNy4wXG4gICAqIEBzZWUge0BsaW5rIFJFU1RPUkVfT05fSURFTlRJRllfQ0xPU0VfRVZFTlR9IGZvciBldmVudCBuYW1lIGNvbnN0YW50XG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2UgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudDx7IFxuICAgICAgd2lkZ2V0SWQ6IHN0cmluZywgXG4gICAgICByZWNvcmRJZHM6IHN0cmluZ1tdLCBcbiAgICAgIG91dHB1dERzSWQ6IHN0cmluZyxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmdcbiAgICB9PlxuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBPbmx5IGhhbmRsZSBpZiB0aGlzIGlzIGZvciBvdXIgd2lkZ2V0XG4gICAgaWYgKGN1c3RvbUV2ZW50LmRldGFpbC53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBVc2UgbWFuYWdlciBhcyBzb3VyY2Ugb2YgdHJ1dGggZm9yIHZpc2liaWxpdHkgKHIwMTguMTMpXG4gICAgY29uc3QgaXNXaWRnZXRPcGVuID0gdGhpcy52aXNpYmlsaXR5TWFuYWdlci5nZXRJc1BhbmVsVmlzaWJsZSgpXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXJlcXVlc3RlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBpc1dpZGdldE9wZW4sXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGV2ZW50UmVjb3JkSWRzQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICB9KVxuICAgIFxuICAgIC8vIE9ubHkgcmVzdG9yZSBpZiB3aWRnZXQgaXMgb3BlblxuICAgIGlmICghaXNXaWRnZXRPcGVuKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC13aWRnZXQtY2xvc2VkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvcmRDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogU2hvdWxkIGFsd2F5cyBjaGVjayBhY2N1bXVsYXRlZFJlY29yZHMgZmlyc3QsIHJlZ2FyZGxlc3Mgb2YgbW9kZVxuICAgIGlmICh0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdzaG91bGQtdXNlLWFjY3VtdWxhdGVkJzogdHJ1ZSxcbiAgICAgICAgJ2N1cnJlbnQtY29uZGl0aW9uLWNoZWNrJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6IGlzQWNjdW11bGF0aW9uTW9kZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gSW4gQWRkL1JlbW92ZSBtb2RlcywgY2hlY2sgYWNjdW11bGF0ZWQgcmVjb3JkcyBpbnN0ZWFkIG9mIGxhc3RTZWxlY3Rpb25cbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBpZiAoIXRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8ICF0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyB8fCB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbixcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICdoeXBvdGhlc2lzJzogJ2hhc1NlbGVjdGlvbi1pcy1mYWxzZS1vci1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAnbWF5YmUtaGFzU2VsZWN0aW9uLXNob3VsZC1iZS1iYXNlZC1vbi1hY2N1bXVsYXRlZC1yZWNvcmRzJzogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBhbGwgYWNjdW11bGF0ZWQgcmVjb3JkcyAoZ3JvdXBlZCBieSBvcmlnaW4gRFMpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBNYXliZSBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCBpbiBhY2N1bXVsYXRpb24gbW9kZT9cbiAgICBpZiAodGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCAmJiAhaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1hY2N1bXVsYXRpb24tbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbW9kZS1pcy1ub3QtYWRkLW9yLXJlbW92ZScsXG4gICAgICAgICdzaG91bGQtd2Utc3RpbGwtdXNlLXRoZW0nOiAnTkVFRFMtSU5WRVNUSUdBVElPTidcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIHVzZSBvcmlnaW5hbCB2YWxpZGF0aW9uIGxvZ2ljXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBtYXRjaGluZyBzZWxlY3Rpb24gc3RhdGVcbiAgICBpZiAoIXRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8ICF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLW5vLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbixcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb25cbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRoZSBvdXRwdXREc0lkIG1hdGNoZXNcbiAgICBpZiAodGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLm91dHB1dERzSWQgIT09IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1kcy1taXNtYXRjaCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyT3V0cHV0RHNJZDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLm91dHB1dERzSWQsXG4gICAgICAgIHJlcXVlc3RlZE91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgcXVlcnlJdGVtQ29uZmlnSWQgbWF0Y2hlcyAob3B0aW9uYWwgYnV0IGdvb2QgdG8gY2hlY2spXG4gICAgaWYgKHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5xdWVyeUl0ZW1Db25maWdJZCAhPT0gY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1xdWVyeS1taXNtYXRjaCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyUXVlcnlJdGVtQ29uZmlnSWQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5xdWVyeUl0ZW1Db25maWdJZCxcbiAgICAgICAgcmVxdWVzdGVkUXVlcnlJdGVtQ29uZmlnSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBSZXN0b3JlIHNlbGVjdGlvbiB0byBtYXAgKHJldXNlIGV4aXN0aW5nIG1ldGhvZClcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3Jpbmctc2VsZWN0aW9uJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHJlY29yZENvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIG91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0b3JlcyBzZWxlY3Rpb24gdG8gdGhlIG1hcCB3aGVuIHdpZGdldCBwYW5lbCBvcGVucy5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlIHdoZW4gdGhlIHBhbmVsIGJlY29tZXMgdmlzaWJsZS5cbiAgICogSXQgcmVzdG9yZXMgcHJldmlvdXNseSBzZWxlY3RlZCByZWNvcmRzIHRvIHRoZSBtYXAgYmFzZWQgb24gdGhlIGN1cnJlbnQgcmVzdWx0cyBtb2RlOlxuICAgKiBcbiAgICogLSBcIkFkZCB0b1wiIC8gXCJSZW1vdmUgZnJvbVwiIG1vZGVzOiBSZXN0b3JlcyBhbGwgYWNjdW11bGF0ZWQgcmVjb3JkcywgZ3JvdXBlZCBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICogLSBcIk5ld1wiIG1vZGU6IFJlc3RvcmVzIGxhc3RTZWxlY3Rpb24gc3RhdGUgZnJvbSB0aGUgbW9zdCByZWNlbnQgcXVlcnlcbiAgICogXG4gICAqIFRoZSByZXN0b3JhdGlvbiB1c2VzIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIHV0aWxpdHkgd2hpY2ggaGFuZGxlczpcbiAgICogLSBTZWxlY3RpbmcgcmVjb3JkcyBpbiBvcmlnaW4gZGF0YSBzb3VyY2VzXG4gICAqIC0gQWRkaW5nIGdyYXBoaWNzIHRvIGdyYXBoaWNzIGxheWVyIChpZiBlbmFibGVkKVxuICAgKiAtIFB1Ymxpc2hpbmcgc2VsZWN0aW9uIG1lc3NhZ2VzIHRvIG90aGVyIHdpZGdldHNcbiAgICogLSBEZWR1cGxpY2F0aW9uIG9mIHJlY29yZHNcbiAgICogXG4gICAqIE5vdGU6IFRoaXMgbWV0aG9kIGRvZXMgTk9UIHpvb20gdG8gdGhlIHNlbGVjdGlvbiAodW5saWtlIHRoZSBcIkFkZCB0byBNYXBcIiBhY3Rpb24pLlxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICogQHNlZSB7QGxpbmsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2h9IHV0aWxpdHkgZnVuY3Rpb24gZm9yIHNlbGVjdGlvbiBsb2dpY1xuICAgKi9cbiAgcHJpdmF0ZSBhZGRTZWxlY3Rpb25Ub01hcCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGxhc3RTZWxlY3Rpb24sIGFjY3VtdWxhdGVkUmVjb3JkcywgcmVzdWx0c01vZGUgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhbGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgbGFzdFNlbGVjdGlvbk91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24/Lm91dHB1dERzSWRcbiAgICB9KVxuICAgIFxuICAgIC8vIEluIEFkZC9SZW1vdmUgbW9kZXMsIHVzZSBhY2N1bXVsYXRlZCByZWNvcmRzIGZvciByZXN0b3JhdGlvblxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IFNob3VsZCBhbHdheXMgY2hlY2sgYWNjdW11bGF0ZWRSZWNvcmRzIGZpcnN0LCByZWdhcmRsZXNzIG9mIG1vZGVcbiAgICAvLyBBZGRpbmcgbG9nIHRvIHNlZSBpZiBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCB1c2luZyB0aGVtXG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnc2hvdWxkLXVzZS1hY2N1bXVsYXRlZCc6IHRydWUsXG4gICAgICAgICdjdXJyZW50LWNvbmRpdGlvbi1jaGVjayc6IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICAgICdjb25kaXRpb24tcmVzdWx0JzogaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiAwLFxuICAgICAgICAnd2lsbC1mYWxsYmFjay10by1sYXN0U2VsZWN0aW9uJzogISFsYXN0U2VsZWN0aW9uXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gR3JvdXAgYWNjdW11bGF0ZWQgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gICAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgICBcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAxOiBUcnkgdG8gZ2V0IGZyb20gcmVjb3JkLmdldERhdGFTb3VyY2UoKVxuICAgICAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2ZvdW5kLW9yaWdpbi1kcy1mcm9tLXJlY29yZC1kcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbnVsbCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdyZWNvcmQuZ2V0RGF0YVNvdXJjZSgpJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAyOiBJZiB0aGF0IGZhaWxlZCwgc2VhcmNoIGFsbCBkYXRhIHNvdXJjZXMgZm9yIGEgcmVjb3JkIHdpdGggbWF0Y2hpbmcgSURcbiAgICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICAgIGNvbnN0IGRzTWFwID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2VzKClcbiAgICAgICAgICBjb25zdCBhbGxEYXRhU291cmNlcyA9IE9iamVjdC52YWx1ZXMoZHNNYXApXG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCBkcyBvZiBhbGxEYXRhU291cmNlcykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgYnkgY2hlY2tpbmcgZm9yIGdldEFsbExvYWRlZFJlY29yZHMgbWV0aG9kXG4gICAgICAgICAgICBpZiAoZHMgJiYgdHlwZW9mIChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIERTIGhhcyB0aGUgcmVjb3JkXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmVjb3JkcyA9IChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gYWxsUmVjb3Jkcy5maW5kKChyOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gci5nZXRJZCgpID09PSByZWNvcmRJZClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIHRoZSByZWNvcmQgLSBnZXQgb3JpZ2luIERTIGZyb20gdGhpcyBEU1xuICAgICAgICAgICAgICAgICAgb3JpZ2luRFMgPSAoZHMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdmb3VuZC1vcmlnaW4tZHMtdmlhLXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NlYXJjaGVkLWFsbC1kYXRhLXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hlZERTSWQ6IGRzLmlkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjb3VsZC1ub3QtZmluZC1vcmlnaW4tZHMtZm9yLXJlY29yZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIHdhcm5pbmc6ICdyZWNvcmQtd2lsbC1iZS1za2lwcGVkJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBzZWxlY3Rpb24gZm9yIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCB7IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIH0gPSByZXF1aXJlKCcuL3NlbGVjdGlvbi11dGlscycpXG4gICAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgY29uc3QgbWFwVmlldyA9IHRoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgXG4gICAgICByZWNvcmRzQnlPcmlnaW5EUy5mb3JFYWNoKChyZWNvcmRzLCBvcmlnaW5EUykgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBVc2Ugb3JpZ2luRFMgZGlyZWN0bHkgKG5vdCBvdXRwdXREUykgc2luY2UgcmVjb3JkcyBhcmUgc2VsZWN0ZWQgaW4gb3JpZ2luIGxheWVyc1xuICAgICAgICAgIC8vIFVzZSBhc3luYyBJSUZFIHNpbmNlIGZvckVhY2ggY2FsbGJhY2sgY2FuJ3QgYmUgYXN5bmNcbiAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKGlkLCBvcmlnaW5EUywgcmVjb3JkSWRzLCByZWNvcmRzLCB0cnVlLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICAgICAgICAgIH0pKClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlZC1vcmlnaW4tZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICB6b29tRXhlY3V0ZWQ6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlLW9yaWdpbi1kcy1mYWlsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IE1heWJlIGFjY3VtdWxhdGVkUmVjb3JkcyBleGlzdCBidXQgd2UncmUgbm90IGluIGFjY3VtdWxhdGlvbiBtb2RlP1xuICAgIC8vIE9yIG1heWJlIHdlIHNob3VsZCBhbHdheXMgY2hlY2sgYWNjdW11bGF0ZWRSZWNvcmRzIGZpcnN0P1xuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgJiYgIWlzQWNjdW11bGF0aW9uTW9kZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1hY2N1bXVsYXRpb24tbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ2FjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW1vZGUtaXMtbm90LWFkZC1vci1yZW1vdmUnLFxuICAgICAgICAnc2hvdWxkLXdlLXN0aWxsLXVzZS10aGVtJzogJ05FRURTLUlOVkVTVElHQVRJT04nXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsIGJhY2sgdG8gb3JpZ2luYWwgbG9naWMgZm9yIFwiTmV3XCIgbW9kZVxuICAgIGlmICghbGFzdFNlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLW5vLWxhc3RTZWxlY3Rpb24tZXhpdGluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ25vLWxhc3RTZWxlY3Rpb24tc28tZXhpdGluZy1lYXJseS1tYXliZS1zaG91bGQtY2hlY2stYWNjdW11bGF0ZWQtcmVjb3Jkcy1maXJzdCdcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3Qgb3V0cHV0RFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShsYXN0U2VsZWN0aW9uLm91dHB1dERzSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICBpZiAoIW91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLW91dHB1dC1kcy1ub3QtZm91bmQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCByZWNvcmRzIGZyb20gb3V0cHV0IERTIChzYW1lIGFzIEFkZCB0byBNYXApXG4gICAgY29uc3QgYWxsUmVjb3JkcyA9IG91dHB1dERTLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgIGNvbnN0IHJlY29yZHNUb1NlbGVjdCA9IGFsbFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiBcbiAgICAgIGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzLmluY2x1ZGVzKHJlY29yZC5nZXRJZCgpKVxuICAgICkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgIFxuICAgIGlmIChyZWNvcmRzVG9TZWxlY3QubGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLW5vLW1hdGNoaW5nLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91clJlY29yZENvdW50OiBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBTYW1lIGxvZ2ljIGFzIEFkZCB0byBNYXAgYWN0aW9uIC0gc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggaGFuZGxlcyBkdXBsaWNhdGUgY2hlY2tpbmdcbiAgICAvLyBEb24ndCB6b29tIHdoZW4gcmVzdG9yaW5nIG9uIHdpZGdldCBvcGVuIChBZGQgdG8gTWFwIGFjdGlvbiBoYW5kbGVzIHpvb20gZm9yIG1hbnVhbCBjbGlja3MpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSB0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICBjb25zdCBtYXBWaWV3ID0gdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goaWQsIG91dHB1dERTLCBsYXN0U2VsZWN0aW9uLnJlY29yZElkcywgcmVjb3Jkc1RvU2VsZWN0LCB0cnVlLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICAgICAgfSkoKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXNlbGVjdGlvbi1hZGRlZC10by1tYXAnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzVG9TZWxlY3QubGVuZ3RoLFxuICAgICAgICB6b29tRXhlY3V0ZWQ6IGZhbHNlXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWFkZC10by1tYXAtZmFpbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHJlc3VsdHMgbW9kZSBjaGFuZ2UgZnJvbSB0aGUgbW9kZSBkcm9wZG93biBpbiBRdWVyeVRhc2sgY29tcG9uZW50LlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgc3dpdGNoZXMgYmV0d2VlbiBcIkNyZWF0ZSBuZXdcIiwgXCJBZGQgdG9cIiwgb3JcbiAgICogXCJSZW1vdmUgZnJvbVwiIG1vZGVzLiBJdCBwZXJmb3JtcyB0aGUgZm9sbG93aW5nIGFjdGlvbnM6XG4gICAqIFxuICAgKiAxLiBDb25zdW1lcyBoYXNoIHBhcmFtZXRlcnMgd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzIChwcmV2ZW50cyByZS10cmlnZ2VyaW5nKVxuICAgKiAyLiBDbGVhcnMgYWNjdW11bGF0ZWQgcmVjb3JkcyB3aGVuIHN3aXRjaGluZyB0byBcIk5ld1wiIG1vZGVcbiAgICogMy4gVXBkYXRlcyB3aWRnZXQgc3RhdGUgd2l0aCB0aGUgbmV3IG1vZGVcbiAgICogXG4gICAqIEBwYXJhbSBtb2RlIC0gVGhlIG5ldyBzZWxlY3Rpb24gdHlwZSBtb2RlIChOZXdTZWxlY3Rpb24sIEFkZFRvU2VsZWN0aW9uLCBvciBSZW1vdmVGcm9tU2VsZWN0aW9uKVxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlUmVzdWx0c01vZGVDaGFuZ2UgPSAobW9kZTogU2VsZWN0aW9uVHlwZSkgPT4ge1xuICAgIC8vIFVzaW5nIEFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIgKHIwMTguNTgpXG4gICAgY29uc3Qgc2hvdWxkQ29uc3VtZUhhc2ggPSAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBtb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pICYmICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZFxuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlci5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZShcbiAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICBtb2RlLFxuICAgICAgc2hvdWxkQ29uc3VtZUhhc2gsXG4gICAgICB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgdGhpcy5yZW1vdmVIYXNoUGFyYW1ldGVyXG4gICAgKVxuXG4gICAgLy8gVXBkYXRlIHdpZGdldCBzdGF0ZSBmcm9tIG1hbmFnZXIncyByZXR1cm4gdmFsdWVcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHJlc3VsdHNNb2RlOiByZXN1bHQucmVzdWx0c01vZGUsXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHM6IHJlc3VsdC5hY2N1bXVsYXRlZFJlY29yZHNcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBoYXNoIHBhcmFtZXRlciBmcm9tIHRoZSBVUkwgd2hlbiBzd2l0Y2hpbmcgdG8gYWNjdW11bGF0aW9uIG1vZGVzLlxuICAgKiBcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gc3dpdGNoaW5nIHRvIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGVzIHRvIGNvbnN1bWVcbiAgICogdGhlIGRlZXAgbGluayBwYXJhbWV0ZXIuIFRoaXMgcHJldmVudHMgdGhlIGhhc2ggcGFyYW1ldGVyIGZyb20gcmUtdHJpZ2dlcmluZyB0aGUgcXVlcnlcbiAgICogd2hlbiB0aGUgd2lkZ2V0IHJlLXJlbmRlcnMuXG4gICAqIFxuICAgKiBUaGUgVVJMIGlzIHVwZGF0ZWQgdXNpbmcgaGlzdG9yeS5yZXBsYWNlU3RhdGUgdG8gYXZvaWQgcGFnZSByZWxvYWQsIGFuZCBib3RoIHBhdGhuYW1lXG4gICAqIGFuZCBxdWVyeSBzdHJpbmcgYXJlIHByZXNlcnZlZCAoZS5nLiwgZGVidWcgcGFyYW1ldGVycyByZW1haW4gaW50YWN0KS5cbiAgICogXG4gICAqIEBwYXJhbSBzaG9ydElkIC0gVGhlIHNob3J0SWQgcGFyYW1ldGVyIHRvIHJlbW92ZSBmcm9tIHRoZSBVUkwgaGFzaFxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICovXG4gIHByaXZhdGUgcmVtb3ZlSGFzaFBhcmFtZXRlciA9IChzaG9ydElkOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXNob3J0SWQpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgXG4gICAgaWYgKHVybFBhcmFtcy5oYXMoc2hvcnRJZCkpIHtcbiAgICAgIHVybFBhcmFtcy5kZWxldGUoc2hvcnRJZClcbiAgICAgIGNvbnN0IG5ld0hhc2ggPSB1cmxQYXJhbXMudG9TdHJpbmcoKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAncmVtb3ZlSGFzaFBhcmFtZXRlcicsXG4gICAgICAgIHNob3J0SWQsXG4gICAgICAgIG5ld0hhc2g6IG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJyhlbXB0eSknLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgVVJMIHdpdGhvdXQgdHJpZ2dlcmluZyBhIHJlbG9hZFxuICAgICAgLy8gQWx3YXlzIHByZXNlcnZlIHBhdGhuYW1lIGFuZCBxdWVyeSBzdHJpbmcsIG9ubHkgdXBkYXRlIGhhc2hcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCAnJywgXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyAobmV3SGFzaCA/IGAjJHtuZXdIYXNofWAgOiAnJylcbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gQWxzbyBjbGVhciB0aGUgc3RhdGUgc28gaXQgd29uJ3QgdHJpZ2dlciBhZ2FpblxuICAgICAgaWYgKHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgPT09IHNob3J0SWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWQgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSA9IChyZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdKSA9PiB7XG4gICAgLy8gVXNpbmcgQWNjdW11bGF0ZWRSZWNvcmRzTWFuYWdlciAocjAxOC41OClcbiAgICB0aGlzLmFjY3VtdWxhdGVkUmVjb3Jkc01hbmFnZXIuaGFuZGxlQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHRoaXMucHJvcHMuaWQsIHJlY29yZHMpXG5cbiAgICAvLyBJZiB3ZSdyZSBpbiBSZW1vdmUgbW9kZSBhbmQgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgYXJlIGNsZWFyZWQsIHJlc2V0IHRvIE5ld1NlbGVjdGlvbiBtb2RlXG4gICAgLy8gUmVtb3ZlIG1vZGUgcmVxdWlyZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyB0byBmdW5jdGlvbiwgc28gaXQgc2hvdWxkIGJlIGRpc2FibGVkIHdoZW4gcmVjb3JkcyBhcmUgZW1wdHlcbiAgICBjb25zdCBzaG91bGRSZXNldE1vZGUgPSByZWNvcmRzLmxlbmd0aCA9PT0gMCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7IFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzOiByZWNvcmRzLFxuICAgICAgLy8gUmVzZXQgbW9kZSB0byBOZXdTZWxlY3Rpb24gaWYgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMgY2xlYXJlZCBpbiBSZW1vdmUgbW9kZVxuICAgICAgLi4uKHNob3VsZFJlc2V0TW9kZSA/IHtcbiAgICAgICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICB9IDoge30pXG4gICAgfSlcblxuICAgIGlmIChzaG91bGRSZXNldE1vZGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ21vZGUtcmVzZXQtb24tYWNjdW11bGF0ZWQtcmVjb3Jkcy1jbGVhcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHByZXZpb3VzTW9kZTogU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uLFxuICAgICAgICBuZXdNb2RlOiBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbixcbiAgICAgICAgcmVhc29uOiAnYWxsLWFjY3VtdWxhdGVkLXJlY29yZHMtY2xlYXJlZC1pbi1yZW1vdmUtbW9kZScsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTk9URTogTm8gbG9uZ2VyIG5lZWRlZCAtIHdlIHVzZSBleGlzdGluZyBvdXRwdXQgRFMgaW5zdGVhZCBvZiBjcmVhdGluZyBuZXcgb25lLlxuICAgKiBLZXB0IGZvciByZWZlcmVuY2UgYnV0IG5vdCB1c2VkLlxuICAgKi9cbiAgcHJpdmF0ZSBnZXRPckNyZWF0ZUFjY3VtdWxhdGVkUmVzdWx0c0RTID0gYXN5bmMgKG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKTogUHJvbWlzZTxGZWF0dXJlTGF5ZXJEYXRhU291cmNlPiA9PiB7XG4gICAgLy8gVGhpcyBpcyBubyBsb25nZXIgdXNlZCAtIHdlIG1lcmdlIHJlY29yZHMgaW50byBleGlzdGluZyBvdXRwdXQgRFNcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgLSB1c2UgZXhpc3Rpbmcgb3V0cHV0IERTIGluc3RlYWQnKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBzZWxlY3Rpb24gZnJvbSB0aGUgbWFwIHdoaWxlIHByZXNlcnZpbmcgd2lkZ2V0J3MgaW50ZXJuYWwgc3RhdGUuXG4gICAqIFxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2hlbiB0aGUgd2lkZ2V0IHBhbmVsIGNsb3NlcyB0byByZW1vdmUgc2VsZWN0aW9uIGZyb20gdGhlIG1hcFxuICAgKiAoY2xlYW5pbmcgdXAgdGhlIHZpc3VhbCBzZWxlY3Rpb24pIHdoaWxlIGtlZXBpbmcgdGhlIHNlbGVjdGlvbiBzdGF0ZSBpbiB0aGUgd2lkZ2V0XG4gICAqIGZvciByZXN0b3JhdGlvbiB3aGVuIHRoZSBwYW5lbCByZW9wZW5zLlxuICAgKiBcbiAgICogVGhlIG1ldGhvZCBoYW5kbGVzIGJvdGggXCJOZXdcIiBtb2RlIChsYXN0U2VsZWN0aW9uKSBhbmQgYWNjdW11bGF0aW9uIG1vZGVzIChhY2N1bXVsYXRlZFJlY29yZHMpLlxuICAgKiBJdCBncm91cHMgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIGNsZWFycyBzZWxlY3Rpb24gZnJvbSBlYWNoIG9yaWdpbiBkYXRhIHNvdXJjZSxcbiAgICogZW5zdXJpbmcgbXVsdGktbGF5ZXIgc2VsZWN0aW9ucyBhcmUgcHJvcGVybHkgY2xlYXJlZC5cbiAgICogXG4gICAqIEdyYXBoaWNzIGxheWVyIGlzIGFsc28gY2xlYXJlZCBpZiBlbmFibGVkLCBhbmQgZW1wdHkgc2VsZWN0aW9uIG1lc3NhZ2VzIGFyZSBwdWJsaXNoZWRcbiAgICogdG8gbm90aWZ5IG90aGVyIHdpZGdldHMgKGxpa2UgSGVscGVyU2ltcGxlKSB0aGF0IHNlbGVjdGlvbiBoYXMgYmVlbiBjbGVhcmVkLlxuICAgKiBcbiAgICogQHNpbmNlIDEuMTkuMC1yMDE3LjBcbiAgICogQHNlZSB7QGxpbmsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzfSB1dGlsaXR5IGZ1bmN0aW9uIGZvciBjbGVhcmluZyBsb2dpY1xuICAgKi9cbiAgcHJpdmF0ZSBjbGVhclNlbGVjdGlvbkZyb21NYXAgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBsYXN0U2VsZWN0aW9uLCBhY2N1bXVsYXRlZFJlY29yZHMsIHJlc3VsdHNNb2RlIH0gPSB0aGlzLnN0YXRlXG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIFxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIWxhc3RTZWxlY3Rpb24sXG4gICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IGxhc3RTZWxlY3Rpb24/LnJlY29yZElkcy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUuc2VsZWN0aW9uUmVjb3JkQ291bnQgfHwgMFxuICAgIH0pXG4gICAgXG4gICAgLy8gQWx3YXlzIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHMgaWYgdGhleSBleGlzdCAocmVnYXJkbGVzcyBvZiBtb2RlKVxuICAgIC8vIFRoaXMgaGFuZGxlcyB0aGUgY2FzZSB3aGVyZSBtb2RlIG1pZ2h0IGhhdmUgY2hhbmdlZCBidXQgcmVjb3JkcyBzdGlsbCBleGlzdFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLWNoZWNraW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgJ2NvbmRpdGlvbic6ICdhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAnLFxuICAgICAgJ2NvbmRpdGlvbi1yZXN1bHQnOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICB9KVxuICAgIFxuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEdyb3VwIGFjY3VtdWxhdGVkIHJlY29yZHMgYnkgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCByZWNvcmRzQnlPcmlnaW5EUyA9IG5ldyBNYXA8RmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmRbXT4oKVxuICAgICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgICAgXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHMuZm9yRWFjaCgocmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZC5nZXRJZCgpXG4gICAgICAgIGxldCBvcmlnaW5EUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8IG51bGwgPSBudWxsXG4gICAgICAgIFxuICAgICAgICAvLyBNZXRob2QgMTogVHJ5IHRvIGdldCBmcm9tIHJlY29yZC5nZXREYXRhU291cmNlKClcbiAgICAgICAgY29uc3QgcmVjb3JkRFMgPSByZWNvcmQuZ2V0RGF0YVNvdXJjZT8uKCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgICBvcmlnaW5EUyA9IHJlY29yZERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IHJlY29yZERTXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1mb3VuZC1vcmlnaW4tZHMtZnJvbS1yZWNvcmQtZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUz8uaWQgfHwgJ251bGwnLFxuICAgICAgICAgICAgbWV0aG9kOiAncmVjb3JkLmdldERhdGFTb3VyY2UoKSdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBNZXRob2QgMjogSWYgdGhhdCBmYWlsZWQsIHNlYXJjaCBhbGwgZGF0YSBzb3VyY2VzIGZvciBhIHJlY29yZCB3aXRoIG1hdGNoaW5nIElEXG4gICAgICAgIGlmICghb3JpZ2luRFMpIHtcbiAgICAgICAgICBjb25zdCBkc01hcCA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlcygpXG4gICAgICAgICAgY29uc3QgYWxsRGF0YVNvdXJjZXMgPSBPYmplY3QudmFsdWVzKGRzTWFwKVxuICAgICAgICAgIFxuICAgICAgICAgIGZvciAoY29uc3QgZHMgb2YgYWxsRGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIGJ5IGNoZWNraW5nIGZvciBnZXRBbGxMb2FkZWRSZWNvcmRzIG1ldGhvZFxuICAgICAgICAgICAgaWYgKGRzICYmIHR5cGVvZiAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBEUyBoYXMgdGhlIHJlY29yZFxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJlY29yZHMgPSAoZHMgYXMgYW55KS5nZXRBbGxMb2FkZWRSZWNvcmRzKCkgfHwgW11cbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGluZ1JlY29yZCA9IGFsbFJlY29yZHMuZmluZCgocjogRmVhdHVyZURhdGFSZWNvcmQpID0+IHIuZ2V0SWQoKSA9PT0gcmVjb3JkSWQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBGb3VuZCB0aGUgcmVjb3JkIC0gZ2V0IG9yaWdpbiBEUyBmcm9tIHRoaXMgRFNcbiAgICAgICAgICAgICAgICAgIG9yaWdpbkRTID0gKGRzIGFzIGFueSkuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgZHMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnY2xlYXItZm91bmQtb3JpZ2luLWRzLXZpYS1zZWFyY2gnLFxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdzZWFyY2hlZC1hbGwtZGF0YS1zb3VyY2VzJyxcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoZWREU0lkOiBkcy5pZFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIHNlYXJjaGluZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAob3JpZ2luRFMpIHtcbiAgICAgICAgICBpZiAoIXJlY29yZHNCeU9yaWdpbkRTLmhhcyhvcmlnaW5EUykpIHtcbiAgICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICAgICAgfVxuICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmdldChvcmlnaW5EUykhLnB1c2gocmVjb3JkKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnY2xlYXItY291bGQtbm90LWZpbmQtb3JpZ2luLWRzLWZvci1yZWNvcmQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgcmVjb3JkSWQsXG4gICAgICAgICAgICB3YXJuaW5nOiAncmVjb3JkLXdpbGwtYmUtc2tpcHBlZCdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtZnJvbS1tYXAnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICBvcmlnaW5EU0NvdW50OiByZWNvcmRzQnlPcmlnaW5EUy5zaXplXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBDbGVhciBzZWxlY3Rpb24gZnJvbSBlYWNoIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgICAgY29uc3QgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSB0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICBcbiAgICAgIHJlY29yZHNCeU9yaWdpbkRTLmZvckVhY2goKHJlY29yZHMsIG9yaWdpbkRTKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVXNlIGFzeW5jIElJRkUgc2luY2UgZm9yRWFjaCBjYWxsYmFjayBjYW4ndCBiZSBhc3luY1xuICAgICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKGlkLCBvcmlnaW5EUywgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllcilcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmVkLW9yaWdpbi1kcy1zZWxlY3Rpb24nLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHVzZWRHcmFwaGljc0xheWVyOiB1c2VHcmFwaGljc0xheWVyXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pKClcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhci1vcmlnaW4tZHMtZmFpbGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtY2xlYXJlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLXJldHVybmluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgJ3dpbGwtbm90LWZhbGxiYWNrLXRvLWxhc3RTZWxlY3Rpb24nOiB0cnVlXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IE1heWJlIGFjY3VtdWxhdGVkUmVjb3JkcyBleGlzdCBidXQgd2UgZGlkbid0IGVudGVyIHRoZSBpZiBibG9jaz9cbiAgICAvLyBPciBtYXliZSB3ZSBzaG91bGQgYWx3YXlzIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHMgaWYgdGhleSBleGlzdD9cbiAgICBpZiAoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1jbGVhcmluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ2FjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LWNvbmRpdGlvbi1mYWlsZWQtd2h5JyxcbiAgICAgICAgJ2NvbmRpdGlvbi13YXMnOiAnYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwJyxcbiAgICAgICAgJ2NvbmRpdGlvbi1yZXN1bHQnOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsIGJhY2sgdG8gb3JpZ2luYWwgbG9naWMgZm9yIFwiTmV3XCIgbW9kZVxuICAgIGlmICghbGFzdFNlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1uby1sYXN0U2VsZWN0aW9uLWV4aXRpbmcnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ25vLWxhc3RTZWxlY3Rpb24tc28tZXhpdGluZy1tYXliZS1zaG91bGQtaGF2ZS1jbGVhcmVkLWFjY3VtdWxhdGVkLXJlY29yZHMtZmlyc3QnXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNvbnN0IG91dHB1dERTID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2UobGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgaWYgKCFvdXRwdXREUykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1vdXRwdXQtZHMtbm90LWZvdW5kJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXRwdXREc0lkOiBsYXN0U2VsZWN0aW9uLm91dHB1dERzSWRcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gR2V0IG9yaWdpbiBEUyAodGhlIG1hcCBsYXllcilcbiAgICAgIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIFxuICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtb3JpZ2luLWRzLW5vdC1mb3VuZCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgY3VycmVudCBzZWxlY3Rpb24gc3RhdGUgYmVmb3JlIGNsZWFyaW5nXG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICBjb25zdCBvdXJSZWNvcmRJZHMgPSBsYXN0U2VsZWN0aW9uLnJlY29yZElkc1xuICAgICAgY29uc3QgbWF0Y2hlc091clNlbGVjdGlvbiA9IG91clJlY29yZElkcy5sZW5ndGggPT09IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggJiZcbiAgICAgICAgb3VyUmVjb3JkSWRzLmV2ZXJ5KHJlY29yZElkID0+IGN1cnJlbnRTZWxlY3RlZElkcy5pbmNsdWRlcyhyZWNvcmRJZCkpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2hlY2tpbmctbWFwLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyUmVjb3JkQ291bnQ6IG91clJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgIG1hcFNlbGVjdGVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgIG1hdGNoZXNPdXJTZWxlY3Rpb24sXG4gICAgICAgIG91clJlY29yZElkczogb3VyUmVjb3JkSWRzLnNsaWNlKDAsIDUpLFxuICAgICAgICBtYXBTZWxlY3RlZElkczogY3VycmVudFNlbGVjdGVkSWRzLnNsaWNlKDAsIDUpXG4gICAgICB9KVxuXG4gICAgICAvLyBVc2UgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIHV0aWxpdHkgd2hpY2ggc3VwcG9ydHMgZ3JhcGhpY3MgbGF5ZXJcbiAgICAgIGNvbnN0IHsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIH0gPSByZXF1aXJlKCcuL3NlbGVjdGlvbi11dGlscycpXG4gICAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgXG4gICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzKGlkLCBvcmlnaW5EUywgdXNlR3JhcGhpY3NMYXllciwgZ3JhcGhpY3NMYXllcilcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhcmVkLW9yaWdpbi1kcy1zZWxlY3Rpb24nLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICB1c2VkR3JhcGhpY3NMYXllcjogdXNlR3JhcGhpY3NMYXllclxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gVmVyaWZ5IHNlbGVjdGlvbiB3YXMgY2xlYXJlZFxuICAgICAgICBjb25zdCBhZnRlckNsZWFySWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtc2VsZWN0aW9uLWNsZWFyZWQtZnJvbS1tYXAnLFxuICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICByZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbi5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIHNlbGVjdGlvbkFmdGVyQ2xlYXI6IGFmdGVyQ2xlYXJJZHMubGVuZ3RoLFxuICAgICAgICAgIHZlcmlmaWVkQ2xlYXJlZDogYWZ0ZXJDbGVhcklkcy5sZW5ndGggPT09IDBcbiAgICAgICAgfSlcbiAgICAgIH0pKClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jbGVhci1mcm9tLW1hcC1mYWlsZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBOT1RJRlkgdGhhdCBhIGhhc2ggcGFyYW1ldGVyIGhhcyBiZWVuIHVzZWQuXG4gICAqIFByZXZpb3VzbHkgdGhpcyByZW1vdmVkIHRoZSBoYXNoIGZyb20gdGhlIFVSTCwgYnV0IHBlciB1cGRhdGVkIHJlcXVpcmVtZW50cyxcbiAgICogdXNlci1lbnRlcmVkIGhhc2hlcyBzaG91bGQgcmVtYWluIGluIHRoZSBVUkwuXG4gICAqIFxuICAgKiBAcGFyYW0gc2hvcnRJZCAtIFRoZSBzaG9ydElkIHBhcmFtZXRlciB0aGF0IHdhcyB1c2VkXG4gICAqL1xuICBoYW5kbGVIYXNoUGFyYW1ldGVyVXNlZCA9IChzaG9ydElkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBpbml0aWFsUXVlcnlWYWx1ZSB9ID0gdGhpcy5zdGF0ZVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgZXZlbnQ6ICdxdWVyeXNpbXBsZS1oYW5kbGVoYXNocGFyYW1ldGVydXNlZC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgc2hvcnRJZCxcbiAgICAgIGN1cnJlbnRTdGF0ZToge1xuICAgICAgICBzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbjogdGhpcy5zdGF0ZS5zaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbixcbiAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZVxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gTk9URTogSGFzaCBwYXJhbWV0ZXJzIGFyZSBOT1QgY2xlYXJlZCBoZXJlIC0gdGhleSBwZXJzaXN0IGluIFVSTFxuICAgIC8vIEhhc2ggcGFyYW1ldGVycyBhcmUgb25seSBjb25zdW1lZCB3aGVuIHN3aXRjaGluZyB0byBhY2N1bXVsYXRpb24gbW9kZXMgKEFkZC9SZW1vdmUpXG4gICAgLy8gdG8gcHJldmVudCByZS10cmlnZ2VyaW5nIHdoZW4gdGhlIHVzZXIgbWFudWFsbHkgc3dpdGNoZXMgbW9kZXNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkLW5vdGlmaWVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHNob3J0SWQ6IHNob3J0SWQsXG4gICAgICBjdXJyZW50SW5pdGlhbFF1ZXJ5VmFsdWU6IGluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgbm90ZTogJ0hhc2ggcGFyYW1ldGVyIHVzZWQgYnV0IE5PVCBjbGVhcmVkIC0gaGFzaCByZW1haW5zIGluIFVSTCBwZXIgdXNlciByZXF1aXJlbWVudCcsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgLy8gVHJhY2sgdGhpcyBzaG9ydElkOnZhbHVlIHBhaXIgYXMgcHJvY2Vzc2VkIHRvIHByZXZlbnQgcmUtZXhlY3V0aW9uIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgICAvLyBUaGlzIHByZXZlbnRzIEhlbHBlclNpbXBsZSBmcm9tIHJlLXRyaWdnZXJpbmcgdGhlIHNhbWUgcGFyYW1ldGVyIHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXNcbiAgICBpZiAoaW5pdGlhbFF1ZXJ5VmFsdWUpIHtcbiAgICAgIGNvbnN0IHBhcmFtS2V5ID0gYCR7aW5pdGlhbFF1ZXJ5VmFsdWUuc2hvcnRJZH06JHtpbml0aWFsUXVlcnlWYWx1ZS52YWx1ZX1gXG4gICAgICB0aGlzLnByb2Nlc3NlZEhhc2hQYXJhbXNSZWYuYWRkKHBhcmFtS2V5KVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNILUVYRUMnLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnlzaW1wbGUtaGFzaHBhcmFtLXRyYWNrZWQtYXMtcHJvY2Vzc2VkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBzaG9ydElkOiBpbml0aWFsUXVlcnlWYWx1ZS5zaG9ydElkLFxuICAgICAgICB2YWx1ZTogaW5pdGlhbFF1ZXJ5VmFsdWUudmFsdWUsXG4gICAgICAgIHBhcmFtS2V5LFxuICAgICAgICBwcm9jZXNzZWRQYXJhbXM6IEFycmF5LmZyb20odGhpcy5wcm9jZXNzZWRIYXNoUGFyYW1zUmVmKSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBBTFdBWVMgY2xlYXIgYm90aCBoYXNoIHN0YXRlIHZhbHVlcyBhZnRlciBleGVjdXRpb25cbiAgICAvLyBRdWVyeVNpbXBsZSBzaG91bGQgbm90IHJlbWVtYmVyIGhhc2ggc3RhdGUgYWZ0ZXIgSGVscGVyU2ltcGxlLWRyaXZlbiBleGVjdXRpb24gY29tcGxldGVzXG4gICAgLy8gVGhpcyBwcmV2ZW50cyBhdXRvbm9tb3VzIHJlLXByb2Nlc3Npbmcgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgIC8vIFVzaW5nIGEgc2luZ2xlIHNldFN0YXRlIGVuc3VyZXMgYXRvbWljIHVwZGF0ZSBhbmQgcHJldmVudHMgcmFjZSBjb25kaXRpb25zXG4gICAgdGhpcy5zZXRTdGF0ZSh7IFxuICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IGZhbHNlLFxuICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU6IHVuZGVmaW5lZFxuICAgIH0sICgpID0+IHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSC1FWEVDJywge1xuICAgICAgICBldmVudDogJ3F1ZXJ5c2ltcGxlLWhhbmRsZWhhc2hwYXJhbWV0ZXJ1c2VkLXN0YXRlLWNsZWFyZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHNob3J0SWQsXG4gICAgICAgIG5ld1N0YXRlOiB7XG4gICAgICAgICAgc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb246IHRoaXMuc3RhdGUuc2hvdWxkVXNlSW5pdGlhbFF1ZXJ5VmFsdWVGb3JTZWxlY3Rpb24sXG4gICAgICAgICAgaGFzSW5pdGlhbFF1ZXJ5VmFsdWU6ICEhdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZSxcbiAgICAgICAgICBpbml0aWFsUXVlcnlWYWx1ZVNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQsXG4gICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWVWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWVcbiAgICAgICAgfSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdzaG91bGRVc2VJbml0aWFsUXVlcnlWYWx1ZUZvclNlbGVjdGlvbi1mbGFnLWNsZWFyZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgc2hvcnRJZDogc2hvcnRJZCxcbiAgICAgIGZsYWdWYWx1ZTogZmFsc2UsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9XG5cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgY29uZmlnLCBpZCwgaWNvbiwgbGFiZWwsIGxheW91dElkLCBsYXlvdXRJdGVtSWQsIGNvbnRyb2xsZXJXaWRnZXRJZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHdpZGdldExhYmVsID0gdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2Uoe1xuICAgICAgaWQ6ICdfd2lkZ2V0TGFiZWwnLFxuICAgICAgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5fd2lkZ2V0TGFiZWxcbiAgICB9KVxuICAgIGlmICghY29uZmlnLnF1ZXJ5SXRlbXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIDxXaWRnZXRQbGFjZWhvbGRlciBpY29uPXtpY29uTWFwLmljb25RdWVyeX0gd2lkZ2V0SWQ9e3RoaXMucHJvcHMuaWR9IG5hbWU9e3dpZGdldExhYmVsfSAvPlxuICAgIH1cblxuICAgIGlmIChjb25maWcuYXJyYW5nZVR5cGUgPT09IFF1ZXJ5QXJyYW5nZVR5cGUuUG9wcGVyICYmICFjb250cm9sbGVyV2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICA8VGFza0xpc3RQb3BwZXJXcmFwcGVyXG4gICAgICAgICAgICBpZD17MH1cbiAgICAgICAgICAgIGljb249e2ljb259XG4gICAgICAgICAgICBwb3BwZXJUaXRsZT17bGFiZWx9XG4gICAgICAgICAgICBtaW5TaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5taW5TaXplfVxuICAgICAgICAgICAgZGVmYXVsdFNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/LmRlZmF1bHRTaXplfVxuICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza0xpc3QgXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e2lkfSBcbiAgICAgICAgICAgICAgICBpc0luUG9wcGVyIFxuICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfSBcbiAgICAgICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9IFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncGItNCcgXG4gICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9IFxuICAgICAgICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uPXt0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMuaGFuZGxlSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICAgICAgcmVzdWx0c01vZGU9e3RoaXMuc3RhdGUucmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17dGhpcy5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e3RoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXt0aGlzLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXt0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgbWFwVmlldz17dGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI9e3RoaXMuaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXI9e3RoaXMuY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHN9XG4gICAgICAgICAgICAgICAgYWN0aXZlVGFiPXt0aGlzLnN0YXRlLmFjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICBvblRhYkNoYW5nZT17dGhpcy5oYW5kbGVUYWJDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9UYXNrTGlzdFBvcHBlcldyYXBwZXI+XG4gICAgICAgIDwvUXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChjb25maWcuYXJyYW5nZVR5cGUgPT09IFF1ZXJ5QXJyYW5nZVR5cGUuSW5saW5lICYmICFjb250cm9sbGVyV2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICA8VGFza0xpc3RJbmxpbmVcbiAgICAgICAgICAgIHdpZGdldElkPXtpZH1cbiAgICAgICAgICAgIHdpZGdldExhYmVsPXtsYWJlbH1cbiAgICAgICAgICAgIHdyYXA9e2NvbmZpZy5hcnJhbmdlV3JhcH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfVxuICAgICAgICAgICAgbWluU2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8ubWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5kZWZhdWx0U2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX1cbiAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlPXt0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlfVxuICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17dGhpcy5oYW5kbGVIYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFBhcGVyIHJlZj17dGhpcy53aWRnZXRSZWZ9IHZhcmlhbnQ9J2ZsYXQnIGNsYXNzTmFtZT0namltdS13aWRnZXQgcnVudGltZS1xdWVyeScgZGF0YS13aWRnZXRpZD17aWR9IGNzcz17Y3NzYFxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBgfT5cbiAgICAgICAgey8qIEhpZGRlbiBKaW11TWFwVmlld0NvbXBvbmVudCB0byBnZXQgbWFwIHZpZXcgZm9yIGdyYXBoaWNzIGxheWVyICovfVxuICAgICAgICB7LyogVXNlcyBleHBsaWNpdCBtYXAgd2lkZ2V0IElEIGZyb20gY29uZmlnICh3aWRnZXQtbGV2ZWwgYmluZGluZykgKi99XG4gICAgICAgIHtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBjb25maWcuaGlnaGxpZ2h0TWFwV2lkZ2V0SWQgJiYgKFxuICAgICAgICAgIDxKaW11TWFwVmlld0NvbXBvbmVudFxuICAgICAgICAgICAgdXNlTWFwV2lkZ2V0SWQ9e2NvbmZpZy5oaWdobGlnaHRNYXBXaWRnZXRJZH1cbiAgICAgICAgICAgIG9uQWN0aXZlVmlld0NoYW5nZT17dGhpcy5oYW5kbGVKaW11TWFwVmlld0NoYW5nZWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3aWRnZXQtaGVhZGVyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogNnB4IDE2cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UpO1xuICAgICAgICBgfT5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwid2lkZ2V0LXRpdGxlXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgIGB9PlxuICAgICAgICAgICAge2xhYmVsIHx8IHdpZGdldExhYmVsfVxuICAgICAgICAgIDwvaDM+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIGB9PlxuICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgICAgIDxRdWVyeVRhc2tMaXN0IFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtpZH0gXG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtcz17Y29uZmlnLnF1ZXJ5SXRlbXN9IFxuICAgICAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX0gXG4gICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9IFxuICAgICAgICAgICAgICAgIHNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9uPXt0aGlzLnN0YXRlLnNob3VsZFVzZUluaXRpYWxRdWVyeVZhbHVlRm9yU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMuaGFuZGxlSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICAgICAgcmVzdWx0c01vZGU9e3RoaXMuc3RhdGUucmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17dGhpcy5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e3RoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXt0aGlzLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXt0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgbWFwVmlldz17dGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI9e3RoaXMuaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXI9e3RoaXMuY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHN9XG4gICAgICAgICAgICAgICAgYWN0aXZlVGFiPXt0aGlzLnN0YXRlLmFjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICBvblRhYkNoYW5nZT17dGhpcy5oYW5kbGVUYWJDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGVcbiAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1BhcGVyPlxuICAgIClcbiAgfVxufVxuXG5cbiBleHBvcnQgZnVuY3Rpb24gX19zZXRfd2VicGFja19wdWJsaWNfcGF0aF9fKHVybCkgeyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyA9IHVybCB9Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9