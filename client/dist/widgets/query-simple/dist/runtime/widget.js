System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/sql-expression-runtime","widgets/shared-code/common","jimu-layouts/layout-runtime","jimu-theme"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./jimu-icons/filled/directional/down.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/filled/directional/down.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownFilled: () => (/* binding */ DownFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/down.svg */ "./jimu-icons/svg/filled/directional/down.svg");
/* harmony import */ var _svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/filled/directional/right.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/filled/directional/right.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightFilled: () => (/* binding */ RightFilled)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/filled/directional/right.svg */ "./jimu-icons/svg/filled/directional/right.svg");
/* harmony import */ var _svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_filled_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowLeftOutlined: () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/collapse-all.tsx":
/*!**********************************************************!*\
  !*** ./jimu-icons/outlined/directional/collapse-all.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollapseAllOutlined: () => (/* binding */ CollapseAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/collapse-all.svg */ "./jimu-icons/svg/outlined/directional/collapse-all.svg");
/* harmony import */ var _svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CollapseAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/expand-all.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/expand-all.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExpandAllOutlined: () => (/* binding */ ExpandAllOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/expand-all.svg */ "./jimu-icons/svg/outlined/directional/expand-all.svg");
/* harmony import */ var _svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ExpandAllOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/trash.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TrashOutlined: () => (/* binding */ TrashOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var _svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/info.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/suggested/info.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InfoOutlined: () => (/* binding */ InfoOutlined)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/info.svg */ "./jimu-icons/svg/outlined/suggested/info.svg");
/* harmony import */ var _svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const InfoOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", Object.assign({ className: classes }, others));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_info_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/svg/filled/directional/down.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/down.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m14 4-6 8-6-8z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/directional/right.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/filled/directional/right.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m4 2 8 6-8 6z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/application/more-horizontal.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/application/more-horizontal.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/collapse-all.svg":
/*!**************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/collapse-all.svg ***!
  \**************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/expand-all.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/expand-all.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/error.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/error.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/info.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/info.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/icon.svg":
/*!*******************************************************!*\
  !*** ./your-extensions/widgets/query-simple/icon.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" d=\"M8.5 3A5.5 5.5 0 0 1 14 8.5a5.5 5.5 0 0 1-1.273 3.527l4.053 4.054a.75.75 0 1 1-1.06 1.06l-4.054-4.053a5.5 5.5 0 0 1-3.527 1.273 5.5 5.5 0 1 1 0-11H8.5zm0 1.5h-.361a4 4 0 1 0 0 8 4 4 0 0 0 0-8z\"></path><rect width=\"19\" height=\"19\" x=\".5\" y=\".5\" stroke=\"#000\" rx=\"1.5\"></rect></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/config.ts":
/*!************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CreateToolType: () => (/* binding */ CreateToolType),
/* harmony export */   FieldsType: () => (/* binding */ FieldsType),
/* harmony export */   ListDirection: () => (/* binding */ ListDirection),
/* harmony export */   PagingType: () => (/* binding */ PagingType),
/* harmony export */   QueryArrangeType: () => (/* binding */ QueryArrangeType),
/* harmony export */   ResultSelectMode: () => (/* binding */ ResultSelectMode),
/* harmony export */   SelectionType: () => (/* binding */ SelectionType),
/* harmony export */   SortDirection: () => (/* binding */ SortDirection),
/* harmony export */   SpatialFilterType: () => (/* binding */ SpatialFilterType),
/* harmony export */   SpatialRelation: () => (/* binding */ SpatialRelation),
/* harmony export */   SymbolType: () => (/* binding */ SymbolType),
/* harmony export */   UnitType: () => (/* binding */ UnitType),
/* harmony export */   mapJSAPISpatialRelToDsSpatialRel: () => (/* binding */ mapJSAPISpatialRelToDsSpatialRel),
/* harmony export */   mapJSAPIUnitToDsUnit: () => (/* binding */ mapJSAPIUnitToDsUnit)
/* harmony export */ });
var CreateToolType;
(function (CreateToolType) {
    CreateToolType["Point"] = "Point";
    CreateToolType["Polyline"] = "Polyline";
    CreateToolType["Polygon"] = "Polygon";
    CreateToolType["Rectangle"] = "Rectangle";
    CreateToolType["Circle"] = "Circle";
})(CreateToolType || (CreateToolType = {}));
var SelectionType;
(function (SelectionType) {
    SelectionType["NewSelection"] = "NEW_SELECTION";
    SelectionType["AddToSelection"] = "ADD_TO_CURRENT_SELECTION";
    SelectionType["RemoveFromSelection"] = "REMOVE_FROM_CURRENT_SELECTION";
    SelectionType["SubsetSelection"] = "SUBSET_FROM_CURRENT_SELECTION";
    SelectionType["SwitchSelection"] = "SWITCH_CURRENT_SELECTION";
})(SelectionType || (SelectionType = {}));
var QueryArrangeType;
(function (QueryArrangeType) {
    QueryArrangeType["Block"] = "BLOCK";
    QueryArrangeType["Inline"] = "INLINE";
    QueryArrangeType["Popper"] = "POPPER";
})(QueryArrangeType || (QueryArrangeType = {}));
var SpatialFilterType;
(function (SpatialFilterType) {
    SpatialFilterType["CurrentMapExtent"] = "CurrentMapExtent";
    SpatialFilterType["InteractiveDrawMode"] = "InteractiveDrawMode";
    SpatialFilterType["None"] = "";
})(SpatialFilterType || (SpatialFilterType = {}));
var SpatialRelation;
(function (SpatialRelation) {
    SpatialRelation["Intersect"] = "intersects";
    SpatialRelation["Contain"] = "contains";
    SpatialRelation["Cross"] = "crosses";
    SpatialRelation["EnvelopeIntersect"] = "envelope-intersects";
    SpatialRelation["IndexIntersect"] = "index-intersects";
    SpatialRelation["Overlap"] = "overlaps";
    SpatialRelation["Touch"] = "touches";
    SpatialRelation["Within"] = "within";
})(SpatialRelation || (SpatialRelation = {}));
const mapJSAPISpatialRelToDsSpatialRel = {
    [SpatialRelation.Intersect]: 'esriSpatialRelIntersects',
    [SpatialRelation.Contain]: 'esriSpatialRelContains',
    [SpatialRelation.Cross]: 'esriSpatialRelCrosses',
    [SpatialRelation.EnvelopeIntersect]: 'esriSpatialRelEnvelopeIntersects',
    [SpatialRelation.IndexIntersect]: 'esriSpatialRelIndexIntersects',
    [SpatialRelation.Overlap]: 'esriSpatialRelOverlaps',
    [SpatialRelation.Touch]: 'esriSpatialRelTouches',
    [SpatialRelation.Within]: 'esriSpatialRelWithin'
};
var UnitType;
(function (UnitType) {
    UnitType["Miles"] = "Miles";
    UnitType["Kilometers"] = "Kilometers";
    UnitType["Feet"] = "Feet";
    UnitType["Meters"] = "Meters";
    UnitType["NauticalMiles"] = "NauticalMiles";
})(UnitType || (UnitType = {}));
const mapJSAPIUnitToDsUnit = {
    [UnitType.Miles]: 'esriSRUnit_StatuteMile',
    [UnitType.Kilometers]: 'esriSRUnit_Kilometer',
    [UnitType.Feet]: 'esriSRUnit_Foot',
    [UnitType.Meters]: 'esriSRUnit_Meter',
    [UnitType.NauticalMiles]: 'esriSRUnit_NauticalMile'
};
var ListDirection;
(function (ListDirection) {
    ListDirection["Horizontal"] = "Horizontal";
    ListDirection["Vertical"] = "Vertical";
})(ListDirection || (ListDirection = {}));
var PagingType;
(function (PagingType) {
    PagingType["MultiPage"] = "MultiPage";
    PagingType["LazyLoad"] = "LazyLoad";
    PagingType["Simple"] = "Simple";
})(PagingType || (PagingType = {}));
var FieldsType;
(function (FieldsType) {
    FieldsType["PopupSetting"] = "PopupSetting";
    FieldsType["SelectAttributes"] = "SelectAttributes";
})(FieldsType || (FieldsType = {}));
var SortDirection;
(function (SortDirection) {
    SortDirection["Asc"] = "Asc";
    SortDirection["Desc"] = "Desc";
})(SortDirection || (SortDirection = {}));
var ResultSelectMode;
(function (ResultSelectMode) {
    ResultSelectMode["Single"] = "Single";
    ResultSelectMode["Multiple"] = "Multiple";
})(ResultSelectMode || (ResultSelectMode = {}));
var SymbolType;
(function (SymbolType) {
    SymbolType["DefaultSymbol"] = "DefaultSymbol";
    SymbolType["CustomSymbol"] = "CustomSymbol";
})(SymbolType || (SymbolType = {}));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAddToMapAction: () => (/* binding */ createAddToMapAction)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime/selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Custom "Add to Map" data action for QuerySimple widget.
 *
 * This action replaces the framework's "Show on Map" action with a custom
 * implementation that uses QuerySimple's selection process (selectRecordsAndPublish).
 * This ensures consistent behavior with query results and proper integration
 * with the widget's "Clear results" functionality.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Creates a custom "Add to Map" data action that uses QuerySimple's selection process.
 *
 * This action replaces the framework's "Show on Map" action and ensures consistent
 * behavior with QuerySimple's query results by using the same selection mechanism.
 *
 * @param widgetId - The widget ID that provides this action
 * @param outputDS - The output data source (used for selection on the origin layer)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration (for zoomToSelected setting)
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns A DataAction object that can be used by DataActionList
 */
function createAddToMapAction(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    return {
        id: `${widgetId}-addToMap`,
        name: 'addToMap',
        label: intl.formatMessage({ id: 'addToMap', defaultMessage: 'Add to map' }),
        // Icon matches the framework's "Show on Map" action for consistency
        icon: (__webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg")["default"]) || __webpack_require__(/*! ../runtime/assets/icons/show-on-map.svg */ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg"),
        // Note: Index may not control position if extraActions are always appended after framework actions
        index: -100,
        widgetId,
        intl,
        supportProviderWidget: true,
        /**
         * Determines if this action can process the given data sets.
         * Supports Records level actions with feature data records.
         */
        isSupported: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            // Only support Records level actions
            if (dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'Not Records level'
                });
                return false;
            }
            // Need at least one data set with records
            if (!dataSets || dataSets.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-isSupported',
                    result: false,
                    reason: 'No data sets'
                });
                return false;
            }
            // Check if we have records and output data source
            const hasRecords = dataSets.some(ds => ds.records && ds.records.length > 0);
            const supported = hasRecords && !!outputDS;
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-isSupported',
                result: supported,
                hasRecords,
                recordsCount: dataSets.reduce((sum, ds) => { var _a; return sum + (((_a = ds.records) === null || _a === void 0 ? void 0 : _a.length) || 0); }, 0)
            });
            return supported;
        }),
        /**
         * Executes the action by selecting records using QuerySimple's selection process.
         */
        onExecute: (dataSets, dataLevel, actionWidgetId) => __awaiter(this, void 0, void 0, function* () {
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                widgetId,
                actionWidgetId,
                dataLevel,
                dataSetsCount: (dataSets === null || dataSets === void 0 ? void 0 : dataSets.length) || 0,
                hasOutputDS: !!outputDS
            });
            if (!outputDS || dataLevel !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: !outputDS ? 'No outputDS' : 'Not Records level'
                });
                return false;
            }
            // Collect all records from all data sets
            const allRecords = [];
            dataSets.forEach(dataSet => {
                if (dataSet.records && dataSet.records.length > 0) {
                    // Filter to only FeatureDataRecord types
                    const featureRecords = dataSet.records.filter((record) => {
                        return record && typeof record.getGeometry === 'function';
                    });
                    allRecords.push(...featureRecords);
                }
            });
            if (allRecords.length === 0) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    reason: 'No feature records found'
                });
                return false;
            }
            // Get record IDs
            const recordIds = allRecords.map(record => record.getId());
            debugLogger.log('DATA-ACTION', {
                action: 'addToMap-onExecute',
                recordsCount: allRecords.length,
                recordIds: recordIds.slice(0, 10), // Log first 10 IDs
                outputDSId: outputDS.id
            });
            // Use QuerySimple's selection process - selects on origin layer and publishes selection messages
            // This ensures consistent behavior with query results and proper integration with "Clear results"
            try {
                (0,_runtime_selection_utils__WEBPACK_IMPORTED_MODULE_1__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, allRecords, true);
                // Determine zoom behavior: runtime override takes precedence, then queryItem config, defaults to true
                const shouldZoom = runtimeZoomToSelected !== undefined
                    ? runtimeZoomToSelected
                    : ((queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== false);
                if (shouldZoom && allRecords.length > 0) {
                    const zoomDataSet = {
                        dataSource: outputDS,
                        records: allRecords,
                        name: outputDS.getLabel()
                    };
                    // Find and execute the zoomToFeature action from available framework actions
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().getSupportedActions(widgetId, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records)
                        .then(actionCategories => {
                        // Search through all action categories to find zoomToFeature action
                        let zoomAction = null;
                        for (const category in actionCategories) {
                            const actions = actionCategories[category];
                            zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature') || null;
                            if (zoomAction)
                                break;
                        }
                        if (zoomAction) {
                            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataActionManager.getInstance().executeDataAction(zoomAction, [zoomDataSet], jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataLevel.Records, widgetId);
                        }
                    })
                        .catch(error => {
                        debugLogger.log('DATA-ACTION', {
                            action: 'addToMap-onExecute-zoom',
                            error: error instanceof Error ? error.message : String(error)
                        });
                    });
                }
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: true,
                    message: 'Successfully selected records and published selection message',
                    zoomExecuted: shouldZoom
                });
                return true;
            }
            catch (error) {
                debugLogger.log('DATA-ACTION', {
                    action: 'addToMap-onExecute',
                    result: false,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
                return false;
            }
        }),
        /**
         * Cleanup method (required by DataAction interface)
         */
        destroy: () => {
            // No cleanup needed
        }
    };
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/data-actions/index.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getExtraActions: () => (/* binding */ getExtraActions)
/* harmony export */ });
/* harmony import */ var _add_to_map_action__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-to-map-action */ "./your-extensions/widgets/query-simple/src/data-actions/add-to-map-action.tsx");

/**
 * QuerySimple Custom Data Actions
 *
 * Returns custom data actions for the widget.
 * Includes a custom "Add to Map" action that uses QuerySimple's selection process.
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source (null/undefined if not available)
 * @param intl - The Intl object for internationalization
 * @param queryItem - Optional query item configuration
 * @param runtimeZoomToSelected - Optional runtime zoom override from the query form
 * @returns Array of custom DataAction objects (empty if conditions not met)
 */
function getExtraActions(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected) {
    // Only create the action if we have both an output data source and intl object
    if (outputDS && intl) {
        return [(0,_add_to_map_action__WEBPACK_IMPORTED_MODULE_0__.createAddToMapAction)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected)];
    }
    return [];
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/default-query-item.ts":
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/default-query-item.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_QUERY_ITEM: () => (/* binding */ DEFAULT_QUERY_ITEM)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/query-simple/src/config.ts");

const DEFAULT_QUERY_ITEM = {
    icon: null,
    displayLabel: true,
    sqlExprObj: null,
    useAttributeFilter: true,
    useSpatialFilter: true,
    spatialMapWidgetIds: [],
    spatialFilterTypes: [],
    spatialInteractiveCreateToolTypes: [
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Point,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polyline,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Polygon,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Rectangle,
        _config__WEBPACK_IMPORTED_MODULE_0__.CreateToolType.Circle
    ],
    spatialInteractiveEnableBuffer: false,
    spatialInteractiveBufferDistance: 0,
    spatialInteractiveBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    spatialRelations: [_config__WEBPACK_IMPORTED_MODULE_0__.SpatialRelation.Intersect],
    spatialRelationUseDataSources: [],
    spatialRelationEnableSelectTool: false,
    spatialRelationEnableBuffer: false,
    spatialRelationBufferDistance: 0,
    spatialRelationBufferUnit: _config__WEBPACK_IMPORTED_MODULE_0__.UnitType.Meters,
    resultListDirection: _config__WEBPACK_IMPORTED_MODULE_0__.ListDirection.Vertical,
    resultPagingStyle: _config__WEBPACK_IMPORTED_MODULE_0__.PagingType.MultiPage,
    resultFieldsType: _config__WEBPACK_IMPORTED_MODULE_0__.FieldsType.PopupSetting,
    resultSymbolType: _config__WEBPACK_IMPORTED_MODULE_0__.SymbolType.DefaultSymbol,
    resultCustomSymbol: {
        angle: 0,
        color: [255, 255, 255, 255],
        outline: {
            color: [255, 255, 255, 255],
            style: 'esriSLSSolid',
            type: 'esriSLS',
            width: 1
        },
        size: 6,
        style: 'esriSMSCircle',
        type: 'esriSMS',
        xoffset: 0,
        yoffset: 0
    },
    resultAllowChangeSymbol: false,
    allowExport: false,
    sortOptions: [],
    zoomToSelected: true,
    itemSizeMap: {
        arrangementHorizontalPopper: {
            minSize: { width: 300, height: 300 },
            defaultSize: { width: 360, height: 480 }
        }
    }
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg":
/*!***************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/assets/icons/show-on-map.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferInput: () => (/* binding */ BufferInput)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */





function BufferInput(props) {
    const { distance = 0, unit = _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters, onBufferChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    const [d, setD] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(distance);
    const [u, setU] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(unit);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_5__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        let changed = false;
        if (distance !== d) {
            setD(distance);
            changed = true;
        }
        if (unit !== u) {
            setU(unit);
            changed = true;
        }
        if (changed) {
            onBufferChange(distance, unit);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [distance, unit]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setD(distance);
            setU(unit);
            onBufferChange(distance, unit);
        }
    }, [queryTaskContext.resetSymbol, distance, unit, onBufferChange]);
    const handleDistanceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
    }, []);
    const handleDistanceAccepted = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((value) => {
        setD(value);
        onBufferChange(value, u);
    }, [onBufferChange, u]);
    const handleBufferUnitChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        setU(e.target.value);
        onBufferChange(d, e.target.value);
    }, [onBufferChange, d]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.NumericInput, { "aria-label": getI18nMessage('theBufferDistance'), className: 'mr-1', value: d, onChange: handleDistanceChange, onAcceptValue: handleDistanceAccepted }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('unit'), value: u, onChange: handleBufferUnitChange, children: Object.values(_config__WEBPACK_IMPORTED_MODULE_3__.UnitType).map((value) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: value, children: getI18nMessage(`unit_${value}`) }, value))) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadStatus: () => (/* binding */ LoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/filled/directional/right */ "./jimu-icons/filled/directional/right.tsx");
/* harmony import */ var jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/filled/directional/down */ "./jimu-icons/filled/directional/down.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */
// This file is duplicated from '../../../../feature-info/src/runtime/components/feature-info'






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
var LoadStatus;
(function (LoadStatus) {
    LoadStatus["Pending"] = "Pending";
    LoadStatus["Fulfilled"] = "Fulfilled";
    LoadStatus["Rejected"] = "Rejected";
})(LoadStatus || (LoadStatus = {}));
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  border: 1px solid var(--sys-color-divider-secondary);
  .esri-widget__heading {
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    margin: 0;
    color: var(--sys-color-surface-paper-text);
  }

  .esri-feature__content-element {
    padding: 0;
  }

  .jimu-btn.expanded {
    align-self: flex-start;
  }
  
  // Larger expand/collapse button for better touch targets
  .jimu-btn[aria-label*="expand"],
  .jimu-btn[aria-label*="collapse"] {
    min-width: 32px;
    min-height: 32px;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .esri-feature.esri-widget {
    background-color: transparent;
  }
`;
class FeatureInfo extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor(props) {
        var _a, _b, _c, _d;
        super(props);
        this.toggleExpanded = (e) => {
            e.stopPropagation();
            this.setState({ showContent: !this.state.showContent });
        };
        const { togglable = false, expandByDefault } = this.props;
        const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
        const initialShowContent = !togglable || expandByDefault;
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'FeatureInfo-constructor',
            recordId,
            togglable,
            expandByDefault,
            initialShowContent,
            timestamp: Date.now()
        });
        this.featureContainer = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.state = {
            showContent: initialShowContent,
            loadStatus: LoadStatus.Pending
        };
    }
    componentDidMount() {
        this.createFeature();
    }
    componentDidUpdate(prevProps) {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        if (this.feature) {
            if (prevProps.popupTemplate !== this.props.popupTemplate ||
                prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate ||
                prevProps.graphic !== this.props.graphic) {
                this.destroyFeature();
                this.createFeature();
            }
            else {
                this.feature.visibleElements = this.getVisibleElements();
            }
        }
        // Sync expandByDefault prop changes (when user clicks Expand All/Collapse All)
        // This ensures all items respect the global expand/collapse state
        if (prevProps.expandByDefault !== this.props.expandByDefault) {
            const { togglable = false, expandByDefault } = this.props;
            const recordId = ((_b = (_a = this.props.graphic) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.OBJECTID) || ((_d = (_c = this.props.graphic) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.objectid) || 'unknown';
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'expandByDefault-prop-changed',
                recordId,
                prevExpandByDefault: prevProps.expandByDefault,
                newExpandByDefault: expandByDefault,
                togglable,
                currentShowContent: this.state.showContent,
                willUpdateState: togglable,
                timestamp: Date.now()
            });
            if (togglable) {
                this.setState({ showContent: expandByDefault }, () => {
                    debugLogger.log('EXPAND-COLLAPSE', {
                        event: 'FeatureInfo-state-updated',
                        recordId,
                        newShowContent: this.state.showContent,
                        timestamp: Date.now()
                    });
                });
            }
        }
        // Log all componentDidUpdate calls to track remounts
        const recordId = ((_f = (_e = this.props.graphic) === null || _e === void 0 ? void 0 : _e.attributes) === null || _f === void 0 ? void 0 : _f.OBJECTID) || ((_h = (_g = this.props.graphic) === null || _g === void 0 ? void 0 : _g.attributes) === null || _h === void 0 ? void 0 : _h.objectid) || 'unknown';
        if (prevProps.graphic !== this.props.graphic ||
            prevProps.popupTemplate !== this.props.popupTemplate ||
            prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate) {
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'FeatureInfo-props-changed-recreate',
                recordId,
                graphicChanged: prevProps.graphic !== this.props.graphic,
                popupTemplateChanged: prevProps.popupTemplate !== this.props.popupTemplate,
                defaultPopupTemplateChanged: prevProps.defaultPopupTemplate !== this.props.defaultPopupTemplate,
                expandByDefault: this.props.expandByDefault,
                currentShowContent: this.state.showContent,
                timestamp: Date.now()
            });
        }
    }
    destroyFeature() {
        this.feature && !this.feature.destroyed && this.feature.destroy();
    }
    getVisibleElements() {
        const { togglable = false } = this.props;
        const { showContent } = this.state;
        const expanded = togglable ? showContent : true;
        return {
            title: true,
            content: {
                fields: expanded,
                text: expanded,
                media: expanded,
                attachments: expanded
            },
            lastEditedInfo: false
        };
    }
    createFeature() {
        let featureModulePromise;
        if (this.Feature) {
            featureModulePromise = Promise.resolve();
        }
        else {
            featureModulePromise = (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Feature'
            ]).then(modules => {
                [
                    this.Feature
                ] = modules;
            });
        }
        return featureModulePromise.then(() => {
            var _a, _b, _c, _d;
            // Check if component is still mounted before trying to append
            // This prevents errors when component unmounts during async module loading
            if (!this.featureContainer.current) {
                // Component was unmounted, abort
                return;
            }
            const container = document && document.createElement('div');
            container.className = 'jimu-widget';
            this.featureContainer.current.appendChild(container);
            const originDS = this.props.dataSource.getOriginDataSources();
            const rootDataSource = (_a = originDS === null || originDS === void 0 ? void 0 : originDS[0]) === null || _a === void 0 ? void 0 : _a.getRootDataSource();
            this.destroyFeature();
            const layer = this.props.graphic.layer;
            if (this.props.popupTemplate) {
                this.props.graphic.popupTemplate = this.props.popupTemplate;
            }
            else if (layer) {
                // set popupTemplate with layer's popupTemplate or defaultPopupTemplate
                this.props.graphic.popupTemplate = (_b = layer.popupTemplate) !== null && _b !== void 0 ? _b : this.props.defaultPopupTemplate;
            }
            else {
                this.props.graphic.popupTemplate = this.props.defaultPopupTemplate;
            }
            if (layer && !layer.popupTemplate) {
                layer.popupTemplate = this.props.popupTemplate || this.props.defaultPopupTemplate;
            }
            this.feature = new this.Feature({
                container: container,
                defaultPopupTemplateEnabled: true,
                // @ts-expect-error
                spatialReference: ((_d = (_c = this.props.dataSource) === null || _c === void 0 ? void 0 : _c.layer) === null || _d === void 0 ? void 0 : _d.spatialReference) || null,
                // @ts-expect-error
                map: (rootDataSource === null || rootDataSource === void 0 ? void 0 : rootDataSource.map) || null,
                graphic: this.props.graphic,
                visibleElements: this.getVisibleElements()
            });
        }).then(() => {
            this.setState({ loadStatus: LoadStatus.Fulfilled });
        });
    }
    render() {
        const { togglable = false, intl } = this.props;
        const { showContent } = this.state;
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'feature-info-component d-flex align-items-center p-1', css: style, children: [togglable && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button, { "aria-label": intl.formatMessage({ id: showContent ? 'collapse' : 'expand' }), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('jimu-outline-inside flex-shrink-0', { expanded: showContent }), variant: 'text', color: 'inherit', icon: true, size: 'sm', onClick: this.toggleExpanded, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              min-width: 32px;
              min-height: 32px;
              padding: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
            `, children: showContent ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_down__WEBPACK_IMPORTED_MODULE_5__.DownFilled, { size: 'm' }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_filled_directional_right__WEBPACK_IMPORTED_MODULE_4__.RightFilled, { size: 'm', autoFlip: true }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1', ref: this.featureContainer })] }));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.injectIntl)(FeatureInfo));


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDraw: () => (/* binding */ GeometryFromDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-draw-tool */ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */







function GeometryFromDraw(props) {
    const { onGeometryChange, createToolTypes, mapWidgetIds, enableBuffer, bufferDistance, bufferUnit, onBufferChange, widgetId } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_6__["default"]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_7__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geodesicBufferOperatorRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryServiceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const geometryRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const bufferDistanceRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferDistance);
    const bufferUnitRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(bufferUnit);
    const bufferedGraphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (enableBuffer) {
            // Parent component query-task-spatial-form will reset buffer parameter when filter type changes,
            // so defer the init buffer option in order not to be override by its parent.
            jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
                onBufferChange(bufferDistance, bufferUnit);
            });
        }
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
            'esri/Graphic'
        ]).then((modules) => {
            const Graphic = modules[0];
            bufferedGraphicRef.current = new Graphic({
                symbol: {
                    type: 'simple-fill',
                    color: [51, 51, 204, 0.5],
                    style: 'solid',
                    outline: {
                        color: [51, 51, 204, 0.8],
                        width: 1
                    }
                }
            });
        });
    });
    const applyBufferEffect = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f;
        if (!geometryRef.current || !enableBuffer || bufferDistanceRef.current === 0) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        // If the end user uses a point or line query geometry, then the negative buffer will not work (same effect as there is no buffer)
        const isPointNegativeBuffer = (((_a = geometryRef.current) === null || _a === void 0 ? void 0 : _a.type) === 'point' || ((_b = geometryRef.current) === null || _b === void 0 ? void 0 : _b.type) === 'multipoint') && bufferDistanceRef.current < 0;
        const isLineNegativeBuffer = ((_c = geometryRef.current) === null || _c === void 0 ? void 0 : _c.type) === 'polyline' && bufferDistanceRef.current < 0;
        if (isPointNegativeBuffer || isLineNegativeBuffer) {
            bufferedGraphicRef.current.geometry = null;
            return;
        }
        const geometry = geometryRef.current;
        // https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html#buffer
        if (((_d = geometry.spatialReference) === null || _d === void 0 ? void 0 : _d.isGeographic) && !geometry.spatialReference.isWGS84) {
            const serviceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.utils.getGeometryService();
            if (!geometryServiceRef.current) {
                const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                    'esri/rest/geometryService',
                    'esri/rest/support/BufferParameters'
                ]);
                geometryServiceRef.current = {
                    geometryService: modules[0],
                    bufferParameters: modules[1]
                };
            }
            const { geometryService, bufferParameters: BufferParameters } = geometryServiceRef.current;
            const polygons = yield geometryService.buffer(serviceUrl, new BufferParameters({
                distances: [bufferDistanceRef.current],
                unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current),
                geodesic: true,
                bufferSpatialReference: geometry.spatialReference,
                outSpatialReference: geometry.spatialReference,
                geometries: [geometry]
            }));
            bufferedGraphicRef.current.geometry = polygons[0];
        }
        else {
            if (((_e = geometry.spatialReference) === null || _e === void 0 ? void 0 : _e.isWGS84) || ((_f = geometry.spatialReference) === null || _f === void 0 ? void 0 : _f.isWebMercator)) {
                if (!geodesicBufferOperatorRef.current) {
                    geodesicBufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/geodesicBufferOperator');
                }
                if (!geodesicBufferOperatorRef.current.isLoaded()) {
                    yield geodesicBufferOperatorRef.current.load();
                }
                bufferedGraphicRef.current.geometry = geodesicBufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
            else {
                if (!bufferOperatorRef.current) {
                    bufferOperatorRef.current = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/geometry/operators/bufferOperator');
                }
                bufferedGraphicRef.current.geometry = bufferOperatorRef.current.execute(geometry, bufferDistanceRef.current, {
                    unit: jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.kebabCase(bufferUnitRef.current)
                });
            }
        }
    }), [enableBuffer]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            getLayerFunRef.current && getLayerFunRef.current().removeAll();
            onGeometryChange(null);
        }
    }, [queryTaskContext.resetSymbol, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        // clear drawing graphics before switching map view
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        if (layer) {
            layer.removeAll();
            onGeometryChange(null);
        }
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, [onGeometryChange]);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferDistanceRef.current = distance;
        bufferUnitRef.current = unit;
        applyBufferEffect();
        onBufferChange(distance, unit);
    }, [onBufferChange, applyBufferEffect]);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic, getLayerFun, clearAfterApply) => {
        getLayerFunRef.current = getLayerFun;
        const layer = getLayerFunRef.current && getLayerFunRef.current();
        // it's possible that the geometry is the same as the previous one, only the clearAfterApply is changed.
        if (geometryRef.current !== (graphic === null || graphic === void 0 ? void 0 : graphic.geometry)) {
            geometryRef.current = graphic === null || graphic === void 0 ? void 0 : graphic.geometry;
            applyBufferEffect().then(() => {
                if (bufferedGraphicRef.current.geometry) {
                    layer === null || layer === void 0 ? void 0 : layer.add(bufferedGraphicRef.current);
                }
            });
        }
        onGeometryChange(graphic === null || graphic === void 0 ? void 0 : graphic.geometry, layer, graphic, clearAfterApply);
    }, [onGeometryChange, applyBufferEffect]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))), (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_interactive_draw_tool__WEBPACK_IMPORTED_MODULE_4__.InteractiveDraw, { jimuMapView: jimuMapView, widgetId: widgetId, toolTypes: createToolTypes, onDrawEnd: handleDrawEnd }), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'title3', "aria-label": getI18nMessage('theBufferDistance'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_5__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: handleBufferChange }) })] }))] }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromDataSource: () => (/* binding */ GeometryFromDataSource)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _buffer_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-input */ "./your-extensions/widgets/query-simple/src/runtime/buffer-input.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");

/** @jsx jsx */






const marginStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin-top: 0.75rem;`;
function getRuntimeDataSource() {
    const result = {};
    let notEmpty = false;
    const dsMap = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSources();
    Object.keys(dsMap).forEach(dsId => {
        const ds = dsMap[dsId];
        // only include the ds that has geometry
        if (ds.getGeometryType() != null && !ds.isInAppConfig() && ds.getMainDataSource().id === dsId && !ds.getDataSourceJson().isOutputFromWidget) {
            result[dsId] = ds;
            notEmpty = true;
        }
    });
    return notEmpty ? result : null;
}
function GeometryFromDataSource(props) {
    var _a;
    const { onSelectionChange, useDataSources = [], useRuntimeData, spatialRelations, enableBuffer, bufferDistance, bufferUnit, onBufferChange, onRelationChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages, _translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [currentDataSource, setCurrentDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(useDataSources[0]);
    const [runtimeDataSource, setRuntimeDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [count, setCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const [currentRelation, setCurrentRelation] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
    const queryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useContext(_query_task_context__WEBPACK_IMPORTED_MODULE_6__.QueryTaskContext);
    const resetSymbolRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryTaskContext.resetSymbol);
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation();
    const spatialRelationOptions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return Object.entries(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialRelation).map(([key, value]) => ({
            value,
            label: getI18nMessage(`spatialRelation_${key}`)
        }));
    }, [getI18nMessage]);
    const loadedUseDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const loaded = [];
        useDataSources.forEach((item) => {
            var _a, _b;
            if (((_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[item.mainDataSourceId]) === null || _b === void 0 ? void 0 : _b.instanceStatus) === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created) {
                loaded.push(item.dataSourceId);
            }
        });
        if (loaded.length > 0) {
            return loaded.join(',');
        }
        return '';
    });
    const numOfDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        if (!useRuntimeData) {
            return 0;
        }
        return Object.keys((_a = state.dataSourcesInfo) !== null && _a !== void 0 ? _a : {}).filter(dsId => state.dataSourcesInfo[dsId].instanceStatus === jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Created).length;
    });
    const runtimeDataSources = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (numOfDs > 0) {
            return getRuntimeDataSource();
        }
    }, [numOfDs]);
    const numOfRuntimeDs = Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).length;
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if ((spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0) {
            onRelationChange(spatialRelations[0]);
        }
        if (enableBuffer) {
            onBufferChange(bufferDistance, bufferUnit);
        }
    });
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (queryTaskContext.resetSymbol && queryTaskContext.resetSymbol !== resetSymbolRef.current) {
            resetSymbolRef.current = queryTaskContext.resetSymbol;
            setCurrentRelation(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
            onRelationChange(spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations[0]);
        }
    }, [queryTaskContext.resetSymbol, onRelationChange, spatialRelations]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!spatialRelations) {
            setCurrentRelation(null);
        }
        else if (!spatialRelations.includes(currentRelation)) {
            setCurrentRelation(spatialRelations[0]);
            onRelationChange(spatialRelations[0]);
        }
    }, [spatialRelations, currentRelation, onRelationChange]);
    const handleDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = useDataSources.find((item) => item.dataSourceId === dsId);
        setCurrentDataSource((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(ds));
        setRuntimeDataSource(null);
    }, [useDataSources]);
    const handleRuntimeDataSourceChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((dsId) => {
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(dsId);
        setRuntimeDataSource(ds);
        setCurrentDataSource(null);
    }, []);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource((_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id);
        const records = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        if ((records === null || records === void 0 ? void 0 : records.length) > 0) {
            const geometries = records.map((record) => record.getJSAPIGeometry());
            onSelectionChange(geometries);
            setCount(records.length);
        }
        else {
            onSelectionChange(null);
            setCount(0);
        }
    }, [currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId, runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, onSelectionChange]);
    const getLabelOfSpatialRelation = (relation) => {
        return spatialRelationOptions.find(item => item.value === relation).label;
    };
    const handleSpatialRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(e => {
        setCurrentRelation(e.target.value);
        onRelationChange(e.target.value);
    }, [onRelationChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: marginStyle, className: 'title3', children: getI18nMessage('chooseFilterLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterLayer'), value: (_a = currentDataSource === null || currentDataSource === void 0 ? void 0 : currentDataSource.dataSourceId) !== null && _a !== void 0 ? _a : runtimeDataSource === null || runtimeDataSource === void 0 ? void 0 : runtimeDataSource.id, children: [numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('preconfigured') }), useDataSources.map((item) => {
                        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(item.dataSourceId);
                        if (loadedUseDataSources.includes(item.dataSourceId) || (ds === null || ds === void 0 ? void 0 : ds.getLabel())) {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: item.dataSourceId, onClick: () => { handleDataSourceChange(item.dataSourceId); }, children: ds === null || ds === void 0 ? void 0 : ds.getLabel() }, item.dataSourceId));
                        }
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { children: translate('loading') }, item.dataSourceId));
                    }), numOfRuntimeDs > 0 && useDataSources.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { divider: true }), numOfRuntimeDs > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { header: true, children: getI18nMessage('runtime') }), Object.keys(runtimeDataSources !== null && runtimeDataSources !== void 0 ? runtimeDataSources : {}).map(dsId => {
                        const ds = runtimeDataSources[dsId];
                        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Option, { value: dsId, onClick: () => { handleRuntimeDataSourceChange(dsId); }, children: ds.getLabel() }, dsId));
                    })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-1 font-italic', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `color: var(--sys-color-surface-paper-hint);`, children: getI18nMessage('selectedRecords', { num: count }) }), (spatialRelations === null || spatialRelations === void 0 ? void 0 : spatialRelations.length) > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate title3 mb-0', children: getI18nMessage('relationship') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('relationship'), value: currentRelation, onChange: handleSpatialRelationChange, children: spatialRelations.map((item) => {
                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item, children: getLabelOfSpatialRelation(item) }, item));
                        }) })] })), enableBuffer && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', "aria-label": getI18nMessage('theBufferDistance'), css: marginStyle, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3 text-truncate', children: getI18nMessage('theBufferDistance') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mt-1', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_buffer_input__WEBPACK_IMPORTED_MODULE_4__.BufferInput, { distance: bufferDistance, unit: bufferUnit, onBufferChange: onBufferChange }) })] })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: currentDataSource, dataSource: runtimeDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), useDataSources.map((item) => {
                // make sure the datasource is created
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: item }, item.dataSourceId));
            })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GeometryFromMap: () => (/* binding */ GeometryFromMap)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");

/** @jsx jsx */


function GeometryFromMap(props) {
    const { onGeometryChange, mapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const PolygonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) {
            let handler;
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModule)('esri/core/reactiveUtils').then((reactiveUtils) => {
                handler = reactiveUtils.watch(() => jimuMapView.view.extent, (extent) => {
                    if (PolygonRef.current) {
                        onGeometryChange(PolygonRef.current.fromExtent(extent));
                    }
                    else {
                        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/geometry/Polygon']).then(modules => {
                            PolygonRef.current = modules[0];
                            onGeometryChange(PolygonRef.current.fromExtent(extent));
                        });
                    }
                });
                // set initial extent
                onGeometryChange(jimuMapView.view.extent);
            });
            return () => {
                if (handler) {
                    handler.remove();
                }
            };
        }
    }, [jimuMapView, onGeometryChange]);
    const handleJimuMapViewChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuMapView) => {
        setJimuMapView((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) != null ? jimuMapView : null);
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.map((mapWidgetId, x) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.JimuMapViewComponent, { useMapWidgetId: mapWidgetId, onActiveViewChange: handleJimuMapViewChanged }, x))) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addHighlightGraphics: () => (/* binding */ addHighlightGraphics),
/* harmony export */   cleanupGraphicsLayer: () => (/* binding */ cleanupGraphicsLayer),
/* harmony export */   clearGraphicsLayer: () => (/* binding */ clearGraphicsLayer),
/* harmony export */   createOrGetGraphicsLayer: () => (/* binding */ createOrGetGraphicsLayer),
/* harmony export */   getMapViewFromDataSource: () => (/* binding */ getMapViewFromDataSource),
/* harmony export */   removeHighlightGraphics: () => (/* binding */ removeHighlightGraphics)
/* harmony export */ });
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing graphics layer highlighting in QuerySimple widget.
 * Provides highlighting that works independently of layer visibility.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
// Global sequence counter for graphics operations to track timing across calls
let operationSequence = 0;
/**
 * Gets the map view from a data source's origin layer.
 * Accesses the view through the FeatureLayer's view property.
 * @param outputDS - The output data source (or any data source)
 * @returns Promise resolving to MapView or SceneView, or null if not available
 */
function getMapViewFromDataSource(outputDS) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
        const seq = ++operationSequence;
        if (!outputDS) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-outputDS',
                seq,
                timestamp: Date.now()
            });
            return null;
        }
        try {
            // Get origin data source to access the layer
            const originDataSources = outputDS.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (!originDS) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-originDS',
                    outputDSId: outputDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Access the FeatureLayer from the data source
            const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
            if (!layer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-no-layer',
                    originDSId: originDS.id,
                    timestamp: Date.now()
                });
                return null;
            }
            // Log layer properties to understand structure
            const layerKeys = Object.keys(layer).filter(key => !key.startsWith('_') &&
                typeof layer[key] !== 'function').slice(0, 20); // Limit to first 20 properties
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-layer-inspection',
                originDSId: originDS.id,
                layerId: layer.id,
                layerType: layer.type || 'unknown',
                layerKeys: layerKeys,
                hasLayerMap: !!layer.map,
                hasLayerView: !!layer.view,
                hasLayerParent: !!layer.parent,
                layerMapType: layer.map ? typeof layer.map : 'none',
                timestamp: Date.now()
            });
            // Check layer.parent for map/view access (since hasLayerParent is true)
            const parent = layer.parent;
            if (parent) {
                // Log parent properties
                const parentKeys = Object.keys(parent).filter(key => !key.startsWith('_') &&
                    typeof parent[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-layer-parent-inspection',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    parentType: parent.type || 'unknown',
                    parentKeys: parentKeys,
                    hasParentMap: !!parent.map,
                    hasParentView: !!parent.view,
                    hasParentViews: !!parent.views,
                    parentViewsLength: ((_c = parent.views) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    hasParentExtent: !!parent.extent,
                    timestamp: Date.now()
                });
                // Try to get view from parent
                if (parent.view) {
                    const view = parent.view;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
                // Try to get map from parent and then view
                const parentMap = parent.map;
                if (parentMap) {
                    const view = parentMap.view ||
                        ((_e = (_d = parentMap.views) === null || _d === void 0 ? void 0 : _d.getItemAt) === null || _e === void 0 ? void 0 : _e.call(_d, 0)) ||
                        (((_f = parentMap.views) === null || _f === void 0 ? void 0 : _f.length) > 0 ? parentMap.views[0] : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-layer-parent-map',
                            originDSId: originDS.id,
                            layerId: layer.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                // Parent might BE the view (check if it has view-like properties)
                if (parent.type === 'map' || parent.type === 'scene' || parent.extent) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-parent-is-view',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: parent.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return parent;
                }
            }
            // Try multiple approaches to get the view:
            // 1. Layer might have a direct view property
            if (layer.view) {
                const view = layer.view;
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-success-via-layer-view',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    viewType: view.type || 'unknown',
                    timestamp: Date.now()
                });
                return view;
            }
            // 2. Try to get map from layer and then view from map
            const map = layer.map ||
                ((_g = layer.parent) === null || _g === void 0 ? void 0 : _g.map) ||
                layer.__map ||
                layer._map;
            if (map) {
                // Log map properties
                const mapKeys = Object.keys(map).filter(key => !key.startsWith('_') &&
                    typeof map[key] !== 'function').slice(0, 20);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'getMapViewFromDataSource-map-found',
                    originDSId: originDS.id,
                    layerId: layer.id,
                    mapId: map.id || 'unknown',
                    mapKeys: mapKeys,
                    hasMapView: !!map.view,
                    hasMapViews: !!(map.views),
                    mapViewsLength: ((_h = map.views) === null || _h === void 0 ? void 0 : _h.length) || 0,
                    timestamp: Date.now()
                });
                const view = map.view ||
                    ((_k = (_j = map.views) === null || _j === void 0 ? void 0 : _j.getItemAt) === null || _k === void 0 ? void 0 : _k.call(_j, 0)) ||
                    (((_l = map.views) === null || _l === void 0 ? void 0 : _l.length) > 0 ? map.views[0] : null) ||
                    (map.views && map.views.length > 0 ? map.views.getItemAt(0) : null);
                if (view) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-success-via-layer-map',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        viewType: view.type || 'unknown',
                        timestamp: Date.now()
                    });
                    return view;
                }
            }
            // 3. Try to get root data source and access map from there
            const rootDS = originDS.getRootDataSource();
            if (rootDS) {
                const rootMap = ((_o = (_m = rootDS).getMap) === null || _o === void 0 ? void 0 : _o.call(_m)) ||
                    rootDS.map ||
                    rootDS.__map ||
                    rootDS._map;
                if (rootMap) {
                    // Log root map properties
                    const rootMapKeys = Object.keys(rootMap).filter(key => !key.startsWith('_') &&
                        typeof rootMap[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-map-found',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootMapId: rootMap.id || 'unknown',
                        rootMapKeys: rootMapKeys,
                        hasRootMapView: !!rootMap.view,
                        hasRootMapViews: !!(rootMap.views),
                        rootMapViewsLength: ((_p = rootMap.views) === null || _p === void 0 ? void 0 : _p.length) || 0,
                        timestamp: Date.now()
                    });
                    const view = rootMap.view ||
                        ((_r = (_q = rootMap.views) === null || _q === void 0 ? void 0 : _q.getItemAt) === null || _r === void 0 ? void 0 : _r.call(_q, 0)) ||
                        (((_s = rootMap.views) === null || _s === void 0 ? void 0 : _s.length) > 0 ? rootMap.views[0] : null) ||
                        (rootMap.views && rootMap.views.length > 0 ? rootMap.views.getItemAt(0) : null);
                    if (view) {
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'getMapViewFromDataSource-success-via-rootDS',
                            originDSId: originDS.id,
                            rootDSId: rootDS.id,
                            viewType: view.type || 'unknown',
                            timestamp: Date.now()
                        });
                        return view;
                    }
                }
                else {
                    // Log root DS properties to see what's available
                    const rootDSKeys = Object.keys(rootDS).filter(key => !key.startsWith('_') &&
                        typeof rootDS[key] !== 'function').slice(0, 20);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'getMapViewFromDataSource-root-ds-inspection',
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        rootDSKeys: rootDSKeys,
                        hasGetMap: typeof rootDS.getMap === 'function',
                        hasMap: !!rootDS.map,
                        timestamp: Date.now()
                    });
                }
            }
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-no-view',
                originDSId: originDS.id,
                layerId: layer.id,
                hasLayerMap: !!map,
                hasRootDS: !!rootDS,
                timestamp: Date.now()
            });
            return null;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'getMapViewFromDataSource-error',
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Gets the default highlight symbol based on geometry type.
 * Uses the map's actual highlight color from highlightOptions to match standard selection appearance.
 */
function getDefaultHighlightSymbol(geometryType, mapView) {
    // Get default highlight color from view's highlightOptions
    const highlightOptions = (mapView.highlightOptions || {});
    // Extract color - could be array [R,G,B,A] or Color object
    let highlightColor = null;
    if (highlightOptions.color) {
        // If it's a Color object, convert to array
        if (typeof highlightOptions.color === 'object' && 'toRgba' in highlightOptions.color) {
            highlightColor = highlightOptions.color.toRgba();
        }
        // If it's already an array
        else if (Array.isArray(highlightOptions.color)) {
            highlightColor = highlightOptions.color;
        }
    }
    // If no color in highlightOptions, use the ArcGIS documented default: cyan [0, 255, 255]
    if (!highlightColor) {
        highlightColor = [0, 255, 255, 1.0]; // Full opacity default
    }
    // Ensure we have 4 elements [R, G, B, A]
    const baseColor = highlightColor.slice(0, 3);
    const baseAlpha = highlightColor.length >= 4 ? highlightColor[3] : 1.0;
    // Get fill opacity from highlightOptions or use default
    const fillOpacity = highlightOptions.fillOpacity !== undefined
        ? highlightOptions.fillOpacity
        : 0.25; // Default 25% opacity for fill
    const fillColor = [...baseColor, fillOpacity];
    // Get halo opacity or use default - for outlines and lines
    const haloOpacity = highlightOptions.haloOpacity !== undefined
        ? highlightOptions.haloOpacity
        : baseAlpha; // Use the color's alpha if available, otherwise 1.0
    const outlineColor = [...baseColor, haloOpacity];
    // For lines, use full opacity to ensure visibility
    const lineOpacity = highlightOptions.haloOpacity !== undefined
        ? Math.max(highlightOptions.haloOpacity, 0.8) // At least 80% opacity
        : baseAlpha; // Use the color's alpha, or default to 1.0
    const lineColor = [...baseColor, lineOpacity];
    switch (geometryType) {
        case 'point':
        case 'multipoint':
            return {
                type: 'simple-marker',
                color: outlineColor,
                outline: {
                    color: outlineColor,
                    width: 2
                },
                size: 12
            };
        case 'polyline':
            return {
                type: 'simple-line',
                color: lineColor, // Use lineColor with proper opacity
                width: 4 // Increased width for visibility
            };
        case 'polygon':
        case 'multipolygon':
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
        default:
            // Fallback to polygon symbol
            return {
                type: 'simple-fill',
                color: fillColor,
                outline: {
                    color: outlineColor,
                    width: 2
                }
            };
    }
}
/**
 * Creates or gets an existing graphics layer for the widget.
 * Uses a unique ID based on widget ID to ensure one layer per widget.
 */
function createOrGetGraphicsLayer(widgetId, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        const layerId = `querysimple-highlight-${widgetId}`;
        try {
            // Check if layer already exists
            const existingLayer = mapView.map.layers.find(layer => layer.id === layerId);
            if (existingLayer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'createOrGetGraphicsLayer-found-existing',
                    seq,
                    widgetId,
                    layerId,
                    timestamp: Date.now()
                });
                return existingLayer;
            }
            // Load GraphicsLayer module
            const [GraphicsLayer] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/layers/GraphicsLayer']);
            // Create new graphics layer
            const graphicsLayer = new GraphicsLayer({
                id: layerId,
                title: `QuerySimple Highlights (${widgetId})`,
                listMode: 'hide', // Hide from layer list
                visible: true
            });
            // Add to map
            mapView.map.add(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-created',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
            return graphicsLayer;
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'createOrGetGraphicsLayer-error',
                seq,
                widgetId,
                layerId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            return null;
        }
    });
}
/**
 * Adds highlight graphics to the graphics layer using default map highlight color.
 * Note: This function should be called after GraphicsLayer module is loaded.
 */
function addHighlightGraphics(graphicsLayer, records, mapView) {
    return __awaiter(this, void 0, void 0, function* () {
        const seq = ++operationSequence;
        if (!graphicsLayer || !records || records.length === 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'addHighlightGraphics-skipped',
                seq,
                reason: !graphicsLayer ? 'no-graphics-layer' : 'no-records',
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                timestamp: Date.now()
            });
            return;
        }
        // Log existing state BEFORE adding - verify assumption about duplicates
        const existingGraphicsCount = graphicsLayer.graphics.length;
        const existingRecordIds = [];
        const existingRecordIdSet = new Set();
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                existingRecordIds.push(recordId);
                existingRecordIdSet.add(recordId);
            }
        });
        // Log what we're trying to add
        const incomingRecordIds = records.map(r => r.getId());
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-before-add',
            seq,
            graphicsLayerId: graphicsLayer.id,
            existingGraphicsCount,
            existingRecordIds: existingRecordIds.slice(0, 20), // Limit to first 20 for readability
            existingRecordIdsCount: existingRecordIds.length,
            incomingRecordIds: incomingRecordIds.slice(0, 20), // Limit to first 20
            incomingRecordIdsCount: incomingRecordIds.length,
            duplicateRecordIds: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).slice(0, 20),
            duplicateCount: incomingRecordIds.filter(id => existingRecordIdSet.has(id)).length,
            timestamp: Date.now()
        });
        // Load Graphic module
        const [Graphic] = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/Graphic']);
        let addedCount = 0;
        let skippedCount = 0;
        let duplicateCount = 0;
        const addedRecordIds = [];
        const skippedRecordIds = [];
        const duplicateRecordIds = [];
        records.forEach(record => {
            try {
                const recordId = record.getId();
                // Check if this record ID already exists in graphics layer
                if (existingRecordIdSet.has(recordId)) {
                    duplicateCount++;
                    duplicateRecordIds.push(recordId);
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'addHighlightGraphics-duplicate-detected',
                        seq,
                        recordId,
                        graphicsLayerId: graphicsLayer.id,
                        timestamp: Date.now()
                    });
                    return; // Skip adding duplicate
                }
                const graphic = record.feature;
                if (!graphic || !graphic.geometry) {
                    skippedCount++;
                    skippedRecordIds.push(recordId);
                    return;
                }
                // Get geometry type from graphic
                const geometryType = graphic.geometry.type;
                // Create symbol using default highlight color
                const symbol = getDefaultHighlightSymbol(geometryType, mapView);
                // Create new graphic with highlight symbol
                const highlightGraphic = new Graphic({
                    geometry: graphic.geometry,
                    symbol: symbol,
                    attributes: {
                        recordId: recordId,
                        source: 'querysimple-highlight',
                        widgetId: graphicsLayer.id.replace('querysimple-highlight-', '')
                    }
                });
                graphicsLayer.add(highlightGraphic);
                addedCount++;
                addedRecordIds.push(recordId);
                // Add to tracking set to prevent duplicates within this batch
                existingRecordIdSet.add(recordId);
            }
            catch (error) {
                skippedCount++;
                skippedRecordIds.push(record.getId());
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'addHighlightGraphics-record-error',
                    seq,
                    recordId: record.getId(),
                    error: error instanceof Error ? error.message : String(error),
                    timestamp: Date.now()
                });
            }
        });
        // Log final state AFTER adding
        const finalGraphicsCount = graphicsLayer.graphics.length;
        const finalRecordIds = [];
        graphicsLayer.graphics.forEach(graphic => {
            var _a;
            const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
            if (recordId) {
                finalRecordIds.push(recordId);
            }
        });
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'addHighlightGraphics-complete',
            seq,
            graphicsLayerId: graphicsLayer.id,
            recordsCount: records.length,
            addedCount,
            skippedCount,
            duplicateCount,
            addedRecordIds: addedRecordIds.slice(0, 20), // Limit to first 20
            skippedRecordIds: skippedRecordIds.slice(0, 20),
            duplicateRecordIds: duplicateRecordIds.slice(0, 20),
            existingGraphicsCount,
            finalGraphicsCount,
            expectedFinalCount: existingGraphicsCount + addedCount,
            finalRecordIds: finalRecordIds.slice(0, 20), // Limit to first 20
            finalRecordIdsCount: finalRecordIds.length,
            timestamp: Date.now()
        });
    });
}
/**
 * Removes highlight graphics from the graphics layer by record IDs.
 */
function removeHighlightGraphics(graphicsLayer, recordIds) {
    const seq = ++operationSequence;
    if (!graphicsLayer || !recordIds || recordIds.length === 0) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'removeHighlightGraphics-skipped',
            seq,
            reason: !graphicsLayer ? 'no-graphics-layer' : 'no-record-ids',
            recordIdsCount: (recordIds === null || recordIds === void 0 ? void 0 : recordIds.length) || 0,
            timestamp: Date.now()
        });
        return;
    }
    const recordIdSet = new Set(recordIds);
    let removedCount = 0;
    // Find and remove graphics matching record IDs
    const graphicsToRemove = [];
    graphicsLayer.graphics.forEach(graphic => {
        var _a;
        const recordId = (_a = graphic.attributes) === null || _a === void 0 ? void 0 : _a.recordId;
        if (recordId && recordIdSet.has(recordId)) {
            graphicsToRemove.push(graphic);
        }
    });
    graphicsToRemove.forEach(graphic => {
        graphicsLayer.remove(graphic);
        removedCount++;
    });
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'removeHighlightGraphics-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        recordIdsCount: recordIds.length,
        removedCount,
        timestamp: Date.now()
    });
}
/**
 * Clears all highlight graphics from the graphics layer.
 */
function clearGraphicsLayer(graphicsLayer) {
    const seq = ++operationSequence;
    if (!graphicsLayer) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'clearGraphicsLayer-skipped',
            seq,
            reason: 'no-graphics-layer',
            timestamp: Date.now()
        });
        return;
    }
    const graphicsCount = graphicsLayer.graphics.length;
    graphicsLayer.removeAll();
    debugLogger.log('GRAPHICS-LAYER', {
        event: 'clearGraphicsLayer-complete',
        seq,
        graphicsLayerId: graphicsLayer.id,
        graphicsRemoved: graphicsCount,
        timestamp: Date.now()
    });
}
/**
 * Removes the graphics layer from the map and cleans up references.
 */
function cleanupGraphicsLayer(widgetId, mapView) {
    const seq = ++operationSequence;
    const layerId = `querysimple-highlight-${widgetId}`;
    try {
        const graphicsLayer = mapView.map.layers.find(layer => layer.id === layerId);
        if (graphicsLayer) {
            // Clear all graphics first
            graphicsLayer.removeAll();
            // Remove layer from map
            mapView.map.remove(graphicsLayer);
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-complete',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
        else {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'cleanupGraphicsLayer-not-found',
                seq,
                widgetId,
                layerId,
                timestamp: Date.now()
            });
        }
    }
    catch (error) {
        debugLogger.log('GRAPHICS-LAYER', {
            event: 'cleanupGraphicsLayer-error',
            seq,
            widgetId,
            layerId,
            error: error instanceof Error ? error.message : String(error),
            errorStack: error instanceof Error ? error.stack : undefined,
            timestamp: Date.now()
        });
    }
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/interactive-draw-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveDraw: () => (/* binding */ InteractiveDraw)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");

/** @jsx jsx */





const sketchToolInfoMap = {
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Point]: { drawToolName: 'point', esriClassName: 'esri-icon-point', toolIndex: 0 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polyline]: { drawToolName: 'polyline', esriClassName: 'esri-icon-polyline', toolIndex: 4 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Polygon]: { drawToolName: 'polygon', esriClassName: 'esri-icon-polygon', toolIndex: 2 },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Rectangle]: {
        drawToolName: 'rectangle',
        esriClassName: 'esri-icon-checkbox-unchecked',
        toolIndex: 1
    },
    [_config__WEBPACK_IMPORTED_MODULE_3__.CreateToolType.Circle]: { drawToolName: 'circle', esriClassName: 'esri-icon-radio-unchecked', toolIndex: 3 }
};
function InteractiveDraw(props) {
    const { toolTypes = [], jimuMapView, onDrawEnd, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const [mapModule, setMapModule] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const getLayerFunRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const graphicRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [clearAfterApply, setClearAfterApply] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const visibleElements = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return {
            createTools: Object.entries(sketchToolInfoMap).reduce((result, [key, value]) => (Object.assign(Object.assign({}, result), { [value.drawToolName]: toolTypes.includes(key) })), { point: false }),
            selectionTools: {
                'lasso-selection': false,
                'rectangle-selection': false
            },
            settingsMenu: false,
            undoRedoMenu: false,
            deleteButton: true
        };
    }, [toolTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.moduleLoader.loadModule('jimu-ui/advanced/map').then((result) => {
            setMapModule(result);
        });
    });
    const handleDrawToolCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((jimuDrawToolsRef) => {
        getLayerFunRef.current = jimuDrawToolsRef.getGraphicsLayer;
    }, []);
    const handleDrawStart = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        getLayerFunRef.current && (getLayerFunRef.current)().removeAll();
    }, []);
    const handleDrawEnd = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((graphic) => {
        graphicRef.current = graphic;
        onDrawEnd(graphic, getLayerFunRef.current, clearAfterApply);
    }, [onDrawEnd, clearAfterApply]);
    const handleCleared = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        graphicRef.current = null;
        onDrawEnd(null);
    }, [onDrawEnd]);
    const handleClearSettingChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        if (graphicRef.current) {
            onDrawEnd(graphicRef.current, getLayerFunRef.current, e.target.checked);
        }
        setClearAfterApply(e.target.checked);
    }, [onDrawEnd]);
    const JimuDraw = mapModule === null || mapModule === void 0 ? void 0 : mapModule.JimuDraw;
    if (!JimuDraw) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.StatusIndicator, { statusType: widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_4__.EntityStatusType.Loading });
    }
    const isAvailable = Object.keys(visibleElements.createTools).some(toolName => visibleElements.createTools[toolName]);
    if (!isAvailable) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(JimuDraw, { jimuMapView: jimuMapView, operatorWidgetId: widgetId, disableSymbolSelector: true, drawingOptions: {
                    creationMode: mapModule.JimuDrawCreationMode.Single,
                    updateOnGraphicClick: false,
                    visibleElements: visibleElements
                }, uiOptions: {
                    isHideBorder: true
                }, onJimuDrawCreated: handleDrawToolCreated, onDrawingStarted: handleDrawStart, onDrawingFinished: handleDrawEnd, onDrawingCleared: handleCleared }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", { className: 'd-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: clearAfterApply, onChange: handleClearSettingChange, className: 'mr-2' }), getI18nMessage('clearDrawing')] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingResult: () => (/* binding */ LoadingResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-theme */ "jimu-theme");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");





const Root = jimu_theme__WEBPACK_IMPORTED_MODULE_3__.styled.div `
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 2;

  .loading-content {
    .loading-tip {
      position: relative;
    }
  }
`;
function LoadingResult() {
    const translate = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root, { children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'loading-content w-100 px-4 d-flex flex-column justify-content-center align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { role: 'alert', "aria-live": 'assertive', className: 'text-paper', children: translate('retrieving') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Loading, { className: 'loading-tip mt-8', type: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.LoadingType.Donut })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryResultItem: () => (/* binding */ QueryResultItem)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _components_feature_info__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/feature-info */ "./your-extensions/widgets/query-simple/src/runtime/components/feature-info.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  overflow: auto;
  flex-flow: row;
  cursor: pointer;
  flex-shrink: 0;
  min-height: 2rem;
  position: relative;
  &.selected {
    outline: 2px solid var(--sys-color-primary-main);
  }
  
  .remove-button {
    position: absolute;
    top: 4px;
    right: 4px;
    z-index: 10;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
    
    // Larger touch target for mobile/accessibility
    min-width: 32px;
    min-height: 32px;
  }
`;
/**
 * QueryResultItem component - displays a single query result record
 * Features:
 * - Clicking the item zooms to the feature on the map
 * - Remove button (trash icon) in upper-right corner to remove record from results
 * - Records are expanded by default to show full feature information
 */
const QueryResultItem = (props) => {
    const { widgetId, data, dataSource, popupTemplate, defaultPopupTemplate, onClick, onRemove, expandByDefault = false } = props;
    const recordId = data.getId();
    // Log when QueryResultItem renders
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'QueryResultItem-render',
            recordId,
            expandByDefault,
            timestamp: Date.now()
        });
    }, [recordId, expandByDefault]);
    // Check if this record is currently selected
    const selected = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => { var _a, _b, _c; return (_c = (_b = (_a = state.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[dataSource.id]) === null || _b === void 0 ? void 0 : _b.selectedIds) === null || _c === void 0 ? void 0 : _c.includes(data.getId()); });
    // Determine if list is displayed vertically (affects FeatureInfo expandability)
    const isVerticalAlign = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection !== _config__WEBPACK_IMPORTED_MODULE_5__.ListDirection.Horizontal;
    });
    // Handle clicking on the result item - zooms to feature on map
    const handleClickResultItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        // Don't trigger zoom if clicking the remove button
        if (e.target.closest('.remove-button')) {
            return;
        }
        onClick(data);
    }, [onClick, data]);
    // Handle clicking the remove button - removes record from results and selection
    const handleRemove = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((e) => {
        e.stopPropagation(); // Prevent triggering the item click handler
        e.preventDefault();
        onRemove(data);
    }, [onRemove, data]);
    const onKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Enter' || evt.key === ' ') {
            evt.preventDefault();
            evt.stopPropagation();
            handleClickResultItem(evt);
        }
    }, [handleClickResultItem]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-result-item', { selected }), onClick: handleClickResultItem, onKeyUp: onKeyUp, css: style, role: 'option', "aria-selected": selected, tabIndex: 0, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_feature_info__WEBPACK_IMPORTED_MODULE_4__["default"], { graphic: data.feature, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, togglable: isVerticalAlign, expandByDefault: expandByDefault, dataSource: dataSource }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: "remove-button", icon: true, size: "sm", variant: "text", color: "inherit", onClick: handleRemove, "aria-label": "Remove record", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px;
          min-width: 32px;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_3__.TrashOutlined, { size: 18 }) })] }));
};


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-result.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskResult: () => (/* binding */ QueryTaskResult)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _simple_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./simple-list */ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jimu-icons/outlined/directional/expand-all */ "./jimu-icons/outlined/directional/expand-all.tsx");
/* harmony import */ var jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jimu-icons/outlined/directional/collapse-all */ "./jimu-icons/outlined/directional/collapse-all.tsx");
/* harmony import */ var _data_actions__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../data-actions */ "./your-extensions/widgets/query-simple/src/data-actions/index.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */





// FORCED: Always SimpleList - LazyList and PagingList removed










const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__.createQuerySimpleDebugLogger)();

const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_3__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
/**
 * Detects if an identify popup is currently visible in the DOM.
 * Uses verified selectors based on Experience Builder's identify popup structure.
 *
 * @returns true if identify popup is detected and visible, false otherwise
 */
function isIdentifyPopupOpen() {
    // Primary selector: .esri-popup with role="dialog"
    const popup = document.querySelector('.esri-popup[role="dialog"]');
    if (!popup) {
        return false;
    }
    // Verify it's visible (not hidden)
    const ariaHidden = popup.getAttribute('aria-hidden');
    if (ariaHidden === 'true') {
        return false;
    }
    // Additional check: verify computed style shows it's visible
    const style = window.getComputedStyle(popup);
    if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
        return false;
    }
    // Verify it contains esri-features (identify popup structure)
    const hasFeatures = popup.querySelector('.esri-features');
    if (!hasFeatures) {
        return false;
    }
    return true;
}
const resultStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  display: flex;
  flex-direction: column;

  .query-result__header {
    color: var(--sys-color-surface-paper-text);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: 1.5;
    border-bottom: 1px solid var(--sys-color-divider-secondary);
    margin-bottom: 6px;
    padding-bottom: 8px;
  }

  .query-result-container {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    overflow: auto;
    min-height: 0;
  }

  .query-result-info {
    height: 18px;
  }
`;
function QueryTaskResult(props) {
    var _a, _b;
    const { queryItem, queryParams, resultCount, maxPerPage, records, widgetId, outputDS, runtimeZoomToSelected, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_5__["default"]);
    const intl = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.useIntl)();
    const [queryData, setQueryData] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [selectedRecords, setSelectedRecords] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState([]);
    const [removedRecordIds, setRemovedRecordIds] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Set());
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_8__.DEFAULT_QUERY_ITEM, queryItem);
    const [expandAll, setExpandAll] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
    // Track individual item expansion states to maintain state when items are removed
    const [itemExpandStates, setItemExpandStates] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(new Map());
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Track expandAll changes for debugging
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-state-changed',
            widgetId,
            expandAll,
            queryItemConfigId: queryItem.configId,
            timestamp: Date.now()
        });
    }, [expandAll, widgetId, queryItem.configId]);
    // Track if we've already selected these records to prevent re-selection when switching tabs
    const hasSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track the last records we selected to detect when new records come in
    const lastSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the original query record IDs (not selected IDs) to detect when query results change
    const lastQueryRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Track the last selected FeatureDataRecords for restoration (if needed)
    const lastSelectedFeatureRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef([]);
    // Ref to track removedRecordIds for use in callbacks (avoids stale closure issues)
    const removedRecordIdsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(new Set());
    // Sync ref whenever removedRecordIds state changes
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        removedRecordIdsRef.current = removedRecordIds;
    }, [removedRecordIds]);
    // Error state for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const extraActions = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,_data_actions__WEBPACK_IMPORTED_MODULE_12__.getExtraActions)(widgetId, outputDS, intl, queryItem, runtimeZoomToSelected);
    }, [widgetId, outputDS, intl, queryItem, runtimeZoomToSelected]);
    const enableDataAction = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        var _a;
        const widgetJson = state.appConfig.widgets[widgetId];
        return (_a = widgetJson.enableDataAction) !== null && _a !== void 0 ? _a : true;
    });
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    const directionTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.resultListDirection;
    });
    // FORCE SimpleList - ignore config, we're done with lazy loading issues
    const pagingType = _config__WEBPACK_IMPORTED_MODULE_4__.PagingType.Simple;
    const direction = directionTypeInConfig !== null && directionTypeInConfig !== void 0 ? directionTypeInConfig : _config__WEBPACK_IMPORTED_MODULE_4__.ListDirection.Vertical;
    // Group records by origin data source for DataActionList
    // This ensures DataActionList recognizes records even when they come from different queries/origins
    const actionDataSets = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        // Debug: Log what records are available
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-calculation-start',
            widgetId: widgetId,
            selectedRecordsCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            queryDataRecordsCount: ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0,
            recordsPropCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            hasSelectedRecords: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0,
            hasQueryDataRecords: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) > 0,
            hasRecordsProp: (records === null || records === void 0 ? void 0 : records.length) > 0
        });
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        // In accumulation modes (Add/Remove), prefer the 'records' prop (the accumulated set)
        // because outputDS.getSelectedRecords() will only return records that match the current query's where clause.
        const recordsToUse = isAccumulationMode
            ? (records || [])
            : ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) > 0 ? selectedRecords : (((_c = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _c === void 0 ? void 0 : _c.length) > 0 ? queryData.records : (records || [])));
        // If no records, return single DataRecordSet with empty records using outputDS
        if (!recordsToUse || recordsToUse.length === 0) {
            const emptyDataSet = {
                dataSource: outputDS,
                type: 'loaded',
                records: [],
                name: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
                label: outputDS === null || outputDS === void 0 ? void 0 : outputDS.getLabel()
            };
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-empty-records',
                widgetId: widgetId,
                dataSetDataSourceId: (_d = emptyDataSet.dataSource) === null || _d === void 0 ? void 0 : _d.id
            });
            return [emptyDataSet];
        }
        // Group records by their origin data source
        const recordsByOriginDS = new Map();
        recordsToUse.forEach(record => {
            var _a, _b, _c, _d;
            const recordDS = (_b = (_a = record).getDataSource) === null || _b === void 0 ? void 0 : _b.call(_a);
            let originDS = null;
            if (recordDS) {
                originDS = ((_c = recordDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || recordDS;
            }
            else if (outputDS) {
                // Fallback: use outputDS's origin if record doesn't have dataSource
                originDS = ((_d = outputDS.getOriginDataSources()) === null || _d === void 0 ? void 0 : _d[0]) || outputDS;
            }
            if (originDS) {
                if (!recordsByOriginDS.has(originDS)) {
                    recordsByOriginDS.set(originDS, []);
                }
                recordsByOriginDS.get(originDS).push(record);
            }
        });
        // Create a DataRecordSet for each origin data source
        const dataSets = Array.from(recordsByOriginDS.entries()).map(([originDS, originRecords]) => {
            const dataSet = {
                dataSource: originDS, // Use origin DS, not outputDS
                type: 'selected',
                records: originRecords,
                name: originDS.id,
                label: originDS.getLabel()
            };
            // Add fields if needed (use currentItem's field settings)
            if (currentItem.resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_4__.FieldsType.SelectAttributes && currentItem.resultDisplayFields != null) {
                dataSet.fields = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.combineFields)(currentItem.resultDisplayFields, currentItem.resultTitleExpression);
            }
            else if (originDS && 'getPopupInfo' in originDS) {
                // use fields in popup template from origin DS
                const popupInfo = originDS.getPopupInfo();
                if (popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) {
                    dataSet.fields = popupInfo.fieldInfos.filter((fieldInfo) => fieldInfo.visible).map((fieldInfo) => fieldInfo.fieldName);
                }
            }
            return dataSet;
        });
        // Debug: Log what the final dataSets contain
        debugLogger.log('RESULTS-MODE', {
            event: 'actionDataSets-final',
            widgetId: widgetId,
            dataSetsCount: dataSets.length,
            totalRecordsCount: recordsToUse.length,
            dataSetsByOrigin: dataSets.map(ds => {
                var _a, _b;
                return ({
                    originDSId: (_a = ds.dataSource) === null || _a === void 0 ? void 0 : _a.id,
                    recordsCount: ((_b = ds.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                    type: ds.type
                });
            })
        });
        // If we couldn't group by origin (shouldn't happen), fallback to single DataRecordSet with outputDS
        if (dataSets.length === 0 && outputDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'actionDataSets-fallback-to-outputDS',
                widgetId: widgetId,
                reason: 'could-not-determine-origin-ds'
            });
            return [{
                    dataSource: outputDS,
                    type: recordsToUse.length > 0 ? 'selected' : 'loaded',
                    records: recordsToUse,
                    name: outputDS.id,
                    label: outputDS.getLabel()
                }];
        }
        return dataSets;
    }, [selectedRecords, outputDS, queryData, currentItem, records, widgetId]);
    // Memoize filtered records to prevent unnecessary re-renders that reset scroll position
    // This ensures the records prop only changes when the actual data changes, not just the array reference
    const filteredRecordsForList = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        return ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.filter((record) => !removedRecordIds.has(record.getId()))) ||
            ((records === null || records === void 0 ? void 0 : records.filter(record => !removedRecordIds.has(record.getId()))) || []);
    }, [queryData === null || queryData === void 0 ? void 0 : queryData.records, records, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    /**
     * Effect hook that runs when new query results arrive.
     * Resets removed records, expand state, and query data for the new results.
     * Also handles auto-selection of records when they first arrive.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Check if these are new records (different from what we last queried)
        // IMPORTANT: Compare against original query results, not selected results
        // This prevents removedRecordIds from being reset when records are removed
        const currentRecordIds = (records === null || records === void 0 ? void 0 : records.map(record => record.getId())) || [];
        const recordsChanged = currentRecordIds.length !== lastQueryRecordIdsRef.current.length ||
            currentRecordIds.some((id, index) => id !== lastQueryRecordIdsRef.current[index]);
        // Debug: Log when records prop changes
        debugLogger.log('RESULTS-MODE', {
            event: 'records-prop-changed',
            widgetId: widgetId,
            recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
            willSetQueryData: records && records.length > 0,
            removedRecordIdsCount: removedRecordIds.size,
            hasSelectedRef: hasSelectedRef.current,
            recordsChanged: recordsChanged,
            lastQueryRecordIdsCount: lastQueryRecordIdsRef.current.length,
            currentRecordIdsCount: currentRecordIds.length
        });
        // IMPORTANT: Only reset removed records if this is truly a NEW query with different records
        // Don't reset if records are the same (just a re-render or lazy load)
        if (recordsChanged) {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-truly-changed-resetting-removed',
                widgetId: widgetId,
                oldRecordIdsCount: lastQueryRecordIdsRef.current.length,
                newRecordIdsCount: currentRecordIds.length
            });
            setRemovedRecordIds(new Set());
            // Update the original query record IDs ref
            lastQueryRecordIdsRef.current = currentRecordIds;
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'records-not-changed-preserving-removed',
                widgetId: widgetId,
                recordIdsCount: currentRecordIds.length,
                removedRecordIdsCount: removedRecordIds.size
            });
        }
        // Reset expand all to queryItem's resultExpandByDefault setting
        setExpandAll((_a = currentItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false);
        setQueryData({
            records,
            page: 1
        });
        // Only auto-select records if:
        // 1. We have records and outputDS
        // 2. We haven't already selected these records (hasSelectedRef is false)
        // 3. OR the records have actually changed (new query results)
        // 4. AND we don't have any removed records (to prevent re-selecting removed ones)
        if (records && records.length > 0 && outputDS &&
            (!hasSelectedRef.current || recordsChanged) &&
            removedRecordIds.size === 0) {
            const recordIds = records.map(record => record.getId());
            const fdr = records;
            (() => __awaiter(this, void 0, void 0, function* () {
                try {
                    setSelectionError(null); // Clear previous errors
                    yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                    hasSelectedRef.current = true; // Mark as selected
                    lastSelectedRecordsRef.current = recordIds; // Store the IDs we selected
                    lastSelectedFeatureRecordsRef.current = fdr; // Store the full records for potential restoration
                    // Notify Widget and HelperSimple of selection change
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.dispatchSelectionEvent)(widgetId, recordIds, outputDS, queryItem.configId);
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-query-result',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }))();
        }
        else if (recordsChanged && records && records.length === 0) {
            // If records were cleared, reset the selection flag
            hasSelectedRef.current = false;
            lastSelectedRecordsRef.current = [];
            setSelectionError(null); // Clear errors when clearing records
        }
        else if (removedRecordIds.size > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'skipping-reselection-due-to-removed-records',
                widgetId: widgetId,
                removedRecordIdsCount: removedRecordIds.size,
                recordsCount: (records === null || records === void 0 ? void 0 : records.length) || 0,
                hasSelectedRef: hasSelectedRef.current,
                recordsChanged: recordsChanged
            });
        }
    }, [records, outputDS, widgetId, queryItem.configId, queryItem.resultExpandByDefault, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear selection when resultSelectMode changed
        if (outputDS) {
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.clearSelectionInDataSources)(outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.publishSelectionMessage)(widgetId, [], outputDS, true);
        }
    }, [queryItem.resultSelectMode, outputDS, widgetId, useGraphicsLayerForHighlight, graphicsLayer]);
    // Update expandAll when queryItem changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        const newExpandAll = (_a = queryItem.resultExpandByDefault) !== null && _a !== void 0 ? _a : false;
        debugLogger.log('RESULTS-MODE', {
            event: 'expandAll-reset-by-queryItem-change',
            widgetId,
            queryItemConfigId: queryItem.configId,
            resultExpandByDefault: queryItem.resultExpandByDefault,
            newExpandAll,
            timestamp: Date.now()
        });
        setExpandAll(newExpandAll);
        // Reset individual expansion states when query changes
        setItemExpandStates(new Map());
    }, [queryItem.configId]);
    /**
     * Monitor origin data source selection changes to detect when other widgets (like map identify)
     * clear our selections. Enhanced with identify popup detection for testing scenarios.
     * Watches the origin data source's selection state directly via polling.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (!outputDS)
            return;
        const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
        if (!originDS)
            return;
        const originDSId = originDS.id;
        let previousSelectedIds = [];
        let identifyPopupWasOpen = false;
        let lastLogTime = 0;
        const LOG_THROTTLE_MS = 1000; // Throttle logs to once per second
        // Initial check
        previousSelectedIds = originDS.getSelectedRecordIds() || [];
        identifyPopupWasOpen = isIdentifyPopupOpen();
        // Watch for selection changes on the origin data source
        const checkSelection = () => {
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            const ourExpectedIds = lastSelectedRecordsRef.current;
            const hasOurSelection = ourExpectedIds.length > 0;
            const identifyPopupIsOpen = isIdentifyPopupOpen();
            // Detect if selection was cleared or changed externally
            const wasCleared = previousSelectedIds.length > 0 && currentSelectedIds.length === 0;
            const wasChanged = previousSelectedIds.length > 0 &&
                (currentSelectedIds.length !== previousSelectedIds.length ||
                    !currentSelectedIds.every(id => previousSelectedIds.includes(id)));
            // NEW: Detect if selection was added (went from empty to having records)
            const wasAdded = previousSelectedIds.length === 0 && currentSelectedIds.length > 0;
            // Track identify popup state changes
            const identifyPopupJustOpened = !identifyPopupWasOpen && identifyPopupIsOpen;
            const identifyPopupJustClosed = identifyPopupWasOpen && !identifyPopupIsOpen;
            const identifyPopupStillOpen = identifyPopupWasOpen && identifyPopupIsOpen;
            // Log identify popup state changes
            const now = Date.now();
            if (identifyPopupJustOpened || identifyPopupJustClosed) {
                debugLogger.log('SELECTION', {
                    event: identifyPopupJustOpened ? 'identify-popup-opened' : 'identify-popup-closed',
                    originDSId,
                    ourSelectionCount: ourExpectedIds.length,
                    currentSelectionCount: currentSelectedIds.length,
                    timestamp: new Date().toISOString()
                });
                // If identify popup just closed and selection was cleared, dispatch restore event
                if (identifyPopupJustClosed && wasCleared && hasOurSelection && ourExpectedIds.length > 0) {
                    const restoreEvent = new CustomEvent(RESTORE_ON_IDENTIFY_CLOSE_EVENT, {
                        detail: {
                            widgetId,
                            recordIds: ourExpectedIds,
                            outputDsId: outputDS.id,
                            queryItemConfigId: queryItem.configId
                        },
                        bubbles: true,
                        cancelable: true
                    });
                    window.dispatchEvent(restoreEvent);
                    debugLogger.log('SELECTION', {
                        event: 'identify-popup-closed-restore-requested',
                        widgetId,
                        recordCount: ourExpectedIds.length,
                        outputDsId: outputDS.id,
                        queryItemConfigId: queryItem.configId
                    });
                }
            }
            // Log ALL selection changes (not just when we have our own selection)
            if (wasCleared || wasChanged || wasAdded) {
                // Check if this matches our expected selection
                const matchesOurSelection = hasOurSelection &&
                    ourExpectedIds.length === currentSelectedIds.length &&
                    ourExpectedIds.every(id => currentSelectedIds.includes(id));
                // Determine what would happen (for testing/logging)
                const wouldRestore = wasCleared && identifyPopupIsOpen && hasOurSelection && ourExpectedIds.length > 0;
                // Determine scenario
                let scenario = 'Unknown';
                if (wasAdded && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 4: Another widget selected records (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && !hasOurSelection) {
                    scenario = 'TEST SCENARIO 5: Another widget changed selection (we have no selection)';
                }
                else if (wasChanged && !matchesOurSelection && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 2: Query  Identify (selection changed, not cleared)  Would NOT restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget  Would NOT restore';
                }
                else if (wasCleared && hasOurSelection) {
                    scenario = identifyPopupIsOpen
                        ? 'TEST SCENARIO 1: Query  Identify  Would restore'
                        : 'TEST SCENARIO 3: Query  Another QuerySimple widget (cleared)  Would NOT restore';
                }
                else if (wasAdded && hasOurSelection) {
                    scenario = matchesOurSelection
                        ? 'Our widget selected records'
                        : 'Another widget selected different records';
                }
                // Log detection with identify popup state (throttled)
                if (now - lastLogTime > LOG_THROTTLE_MS) {
                    debugLogger.log('SELECTION', {
                        event: wasCleared ? 'selection-cleared' : wasChanged ? 'selection-changed' : 'selection-added',
                        originDSId,
                        ourExpectedCount: ourExpectedIds.length,
                        previousSelectedCount: previousSelectedIds.length,
                        currentSelectedCount: currentSelectedIds.length,
                        wasCleared,
                        wasChanged,
                        wasAdded,
                        hasOurSelection,
                        matchesOurSelection,
                        identifyPopupIsOpen,
                        identifyPopupJustOpened,
                        identifyPopupStillOpen,
                        identifyPopupJustClosed,
                        wouldRestore,
                        ourExpectedIds: ourExpectedIds.slice(0, 5),
                        previousSelectedIds: previousSelectedIds.slice(0, 5),
                        currentSelectedIds: currentSelectedIds.slice(0, 5),
                        timestamp: new Date().toISOString(),
                        note: wouldRestore
                            ? 'Would restore selection (cleared + identify popup open)'
                            : identifyPopupIsOpen && wasChanged
                                ? 'Identify popup open but selection changed (not cleared) - would not restore'
                                : wasCleared && !identifyPopupIsOpen
                                    ? 'Selection cleared, checking if identify popup opens...'
                                    : wasAdded
                                        ? hasOurSelection && matchesOurSelection
                                            ? 'Our widget selected records'
                                            : hasOurSelection && !matchesOurSelection
                                                ? 'Another widget selected different records'
                                                : 'Selection added (by another widget or external source)'
                                        : 'No identify popup detected - would not restore'
                    });
                    lastLogTime = now;
                }
            }
            previousSelectedIds = [...currentSelectedIds];
            identifyPopupWasOpen = identifyPopupIsOpen;
        };
        // Check periodically (every 500ms)
        const intervalId = setInterval(checkSelection, 500);
        return () => {
            clearInterval(intervalId);
        };
    }, [outputDS]);
    /**
     * Clears all results. Resets local state and delegates to parent's clearResult method.
     */
    const clearResults = () => __awaiter(this, void 0, void 0, function* () {
        // Log hash state before clearing
        const hashBefore = window.location.hash.substring(1);
        const urlParamsBefore = new URLSearchParams(hashBefore);
        const hashParamsBefore = {};
        urlParamsBefore.forEach((value, key) => {
            hashParamsBefore[key] = value;
        });
        debugLogger.log('HASH', {
            event: 'clearResults-called',
            widgetId,
            hashBefore: hashBefore,
            hashParamsBefore: hashParamsBefore,
            hashParamsCount: Object.keys(hashParamsBefore).length,
            timestamp: Date.now()
        });
        // Reset local selection flags
        hasSelectedRef.current = false;
        lastSelectedRecordsRef.current = [];
        // Reset local query data state
        setQueryData(null);
        setRemovedRecordIds(new Set());
        // Clear error state when clearing results
        setSelectionError(null);
        // Delegate to parent's clearResult method (via onNavBack) which handles
        // clearing selection from map, publishing messages, etc.
        yield onNavBack(true);
        // Log hash state after clearing (with delay to catch async updates)
        setTimeout(() => {
            const hashAfter = window.location.hash.substring(1);
            const urlParamsAfter = new URLSearchParams(hashAfter);
            const hashParamsAfter = {};
            urlParamsAfter.forEach((value, key) => {
                hashParamsAfter[key] = value;
            });
            debugLogger.log('HASH', {
                event: 'clearResults-completed',
                widgetId,
                hashBefore: hashBefore,
                hashAfter: hashAfter,
                hashParamsBefore: hashParamsBefore,
                hashParamsAfter: hashParamsAfter,
                hashParamsRemoved: Object.keys(hashParamsBefore).length - Object.keys(hashParamsAfter).length,
                hashParamsCountBefore: Object.keys(hashParamsBefore).length,
                hashParamsCountAfter: Object.keys(hashParamsAfter).length,
                stillHasHashParams: Object.keys(hashParamsAfter).length > 0,
                timestamp: Date.now()
            });
        }, 100);
    });
    const handleRenderDone = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(({ dataItems, pageSize, page }) => {
        debugLogger.log('RESULTS-MODE', {
            event: 'handleRenderDone-called',
            widgetId,
            queryItemConfigId: queryItem.configId,
            dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
            pageSize,
            page,
            timestamp: Date.now()
        });
        // Use ref to get latest removedRecordIds (avoids stale closure issues with lazy loading)
        const currentRemovedIds = removedRecordIdsRef.current;
        // Filter out removed records FIRST - before any selection logic
        // This ensures removed records stay removed even during lazy loading
        const filteredItems = (dataItems === null || dataItems === void 0 ? void 0 : dataItems.filter(item => !currentRemovedIds.has(item.getId()))) || [];
        // Check if queryData has actually changed before updating state
        // This prevents unnecessary re-renders that reset scroll position
        const currentRecords = (queryData === null || queryData === void 0 ? void 0 : queryData.records) || [];
        const currentRecordIds = currentRecords.map(r => r.getId()).sort();
        const newRecordIds = filteredItems.map(r => r.getId()).sort();
        const dataChanged = currentRecordIds.length !== newRecordIds.length ||
            !currentRecordIds.every((id, idx) => id === newRecordIds[idx]) ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.pageSize) !== pageSize ||
            (queryData === null || queryData === void 0 ? void 0 : queryData.page) !== page;
        // Only update state if data has actually changed
        if (dataChanged) {
            setQueryData({
                records: filteredItems,
                pageSize,
                page
            });
        }
        // Only select records that are NOT removed
        // IMPORTANT: Only re-select if the selection has actually changed to avoid resetting scroll position
        if (filteredItems && filteredItems.length > 0 && outputDS) {
            const recordIds = filteredItems.map(record => record.getId());
            const fdr = filteredItems;
            // Check what's currently selected to avoid unnecessary re-selection (which resets scroll)
            const currentlySelectedIds = outputDS.getSelectedRecordIds() || [];
            const selectionChanged = currentlySelectedIds.length !== recordIds.length ||
                !recordIds.every(id => currentlySelectedIds.includes(id));
            // Only select if the selection has actually changed
            if (selectionChanged) {
                try {
                    setSelectionError(null); // Clear previous errors
                    (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, fdr);
                    debugLogger.log('RESULTS-MODE', {
                        event: 'handleRenderDone-selecting-filtered-records',
                        widgetId: widgetId,
                        dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                        filteredItemsCount: filteredItems.length,
                        removedRecordIdsCount: currentRemovedIds.size,
                        selectionChanged: true,
                        currentlySelectedCount: currentlySelectedIds.length,
                        newSelectionCount: recordIds.length
                    });
                }
                catch (error) {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                    setSelectionError(errorMessage);
                    debugLogger.log('TASK', {
                        event: 'selection-failed-handleRenderDone',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined,
                        recordCount: recordIds.length
                    });
                }
            }
            else {
                debugLogger.log('RESULTS-MODE', {
                    event: 'handleRenderDone-skipping-reselection',
                    widgetId: widgetId,
                    dataItemsCount: (dataItems === null || dataItems === void 0 ? void 0 : dataItems.length) || 0,
                    filteredItemsCount: filteredItems.length,
                    removedRecordIdsCount: currentRemovedIds.size,
                    reason: 'selection-unchanged',
                    currentlySelectedCount: currentlySelectedIds.length
                });
            }
        }
    }, [outputDS, widgetId, queryData]);
    const handleDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(outputDS === null || outputDS === void 0 ? void 0 : outputDS.id);
        const dsRecords = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
        const selectedIds = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
        // Capture records prop before using it (to avoid shadowing)
        const recordsProp = records;
        // Debug: Log what handleDataSourceInfoChange sees
        debugLogger.log('RESULTS-MODE', {
            event: 'handleDataSourceInfoChange-fired',
            widgetId: widgetId,
            outputDSId: outputDS === null || outputDS === void 0 ? void 0 : outputDS.id,
            dsId: ds === null || ds === void 0 ? void 0 : ds.id,
            selectedRecordsFromDS: (dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.length) || 0,
            selectedIdsFromDS: selectedIds.length,
            currentSelectedRecordsState: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
            recordsPropCount: (recordsProp === null || recordsProp === void 0 ? void 0 : recordsProp.length) || 0,
            removedRecordIdsCount: removedRecordIds.size,
            timestamp: Date.now()
        });
        // If we have records in the prop (accumulated records) but DS shows 0 selected,
        // and we currently have selectedRecords, this is likely a query switch in "Add to" mode
        // where re-selection hasn't happened yet. Don't clear selectedRecords - wait for re-selection.
        if (recordsProp && recordsProp.length > 0 && selectedIds.length === 0 && selectedRecords && selectedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-clear-during-query-switch',
                widgetId: widgetId,
                reason: 'waiting-for-reselection',
                recordsPropCount: recordsProp.length,
                currentSelectedRecordsCount: selectedRecords.length
            });
            return; // Skip updating - re-selection is coming
        }
        // IMPORTANT: Filter out removed records from DS selection before comparing/syncing
        // This prevents removed records from being re-added when scrolling triggers this callback
        const filteredDsRecords = (_b = dsRecords === null || dsRecords === void 0 ? void 0 : dsRecords.filter((record) => !removedRecordIds.has(record.getId()))) !== null && _b !== void 0 ? _b : [];
        const filteredSelectedIds = selectedIds.filter(id => !removedRecordIds.has(id));
        // If DS has more selected than our state, but the difference is entirely removed records, don't sync
        if (filteredSelectedIds.length === ((selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0) && selectedIds.length > filteredSelectedIds.length) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-sync-due-to-removed-records',
                widgetId: widgetId,
                reason: 'ds-selection-includes-removed-records',
                dsSelectedCount: selectedIds.length,
                filteredCount: filteredSelectedIds.length,
                componentStateCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                removedRecordIdsCount: removedRecordIds.size
            });
            return; // Skip syncing - the mismatch is due to removed records
        }
        let shouldUpdate = false;
        if (filteredSelectedIds.length !== (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length)) {
            shouldUpdate = true;
        }
        else { // equal length
            shouldUpdate = filteredSelectedIds.some(id => {
                const target = selectedRecords.find((item) => item.getId() === id);
                return target == null;
            });
        }
        if (shouldUpdate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                note: 'filtered-out-removed-records'
            });
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-updating-selectedRecords',
                widgetId: widgetId,
                oldCount: (selectedRecords === null || selectedRecords === void 0 ? void 0 : selectedRecords.length) || 0,
                newCount: filteredDsRecords.length,
                oldSelectedIds: (selectedRecords || []).map(r => r.getId()).slice(0, 5),
                newSelectedIds: filteredSelectedIds.slice(0, 5),
                note: 'filtered-out-removed-records',
                timestamp: Date.now()
            });
            setSelectedRecords(filteredDsRecords);
        }
        else {
            debugLogger.log('RESULTS-MODE', {
                event: 'handleDataSourceInfoChange-skipping-update',
                widgetId: widgetId,
                reason: 'no-change-detected',
                timestamp: Date.now()
            });
        }
    }, [outputDS === null || outputDS === void 0 ? void 0 : outputDS.id, selectedRecords, widgetId, records, removedRecordIds]);
    /**
     * Generates the tip message showing how many features are displayed.
     * Filters out removed records to show accurate counts.
     *
     * @returns Formatted string like "Features displayed: 118 / 121"
     */
    const getTipMessage = () => {
        if (queryData && queryData.records) {
            // Filter out removed records for display count
            const displayedRecords = queryData.records.filter((record) => !removedRecordIds.has(record.getId()));
            const displayedCount = displayedRecords.length;
            // FORCED: Always SimpleList, so always use simple display format
            return `${getI18nMessage('featuresDisplayed')}: ${displayedCount} / ${resultCount}`;
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
            // removed by dead control flow
{}
        }
        return '';
    };
    /**
     * Toggles expand/collapse state for all result items.
     * When toggled, all result items will be expanded or collapsed together.
     * Updates individual item expansion states in the map to maintain state when items are removed.
     */
    const toggleExpandAll = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        setExpandAll(prev => {
            const newValue = !prev;
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'toggleExpandAll-clicked',
                widgetId,
                previousValue: prev,
                newValue,
                timestamp: Date.now()
            });
            // Update all current items in the map with the new expansion state
            setItemExpandStates(prevMap => {
                const newMap = new Map(prevMap);
                // Get all current record IDs from filtered records
                const allRecordIds = filteredRecordsForList.map(r => r.getId());
                allRecordIds.forEach(id => {
                    newMap.set(id, newValue);
                });
                debugLogger.log('EXPAND-COLLAPSE', {
                    event: 'itemExpandStates-updated',
                    widgetId,
                    newValue,
                    updatedCount: allRecordIds.length,
                    recordIds: allRecordIds.slice(0, 10), // Log first 10 IDs
                    timestamp: Date.now()
                });
                return newMap;
            });
            return newValue;
        });
    }, [widgetId, filteredRecordsForList]);
    const resultUseOutputDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
            dataSourceId: queryItem.outputDataSourceId,
            mainDataSourceId: queryItem.outputDataSourceId
        });
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.outputDataSourceId]);
    const handleEscape = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    }, []);
    // Keep records selected and zoom to clicked record
    // Records remain selected as long as they're in the results
    // Clicking a record always zooms to it on the map (this behavior is always enabled)
    const toggleSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        // Ensure the clicked record is selected (it should already be, but ensure it)
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const selectedIds = (_b = outputDS.getSelectedRecordIds()) !== null && _b !== void 0 ? _b : [];
        const dataId = data.getId();
        // If this record isn't already selected, add it to the selection
        if (!selectedIds.includes(dataId)) {
            const updatedSelectedDatas = [...selectedDatas, data];
            const recordIds = updatedSelectedDatas.map(record => record.getId());
            // Select records and publish selection message using utility function
            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_13__.selectRecordsAndPublish)(widgetId, outputDS, recordIds, updatedSelectedDatas, true);
        }
        // Zoom to the clicked record using data actions (always enabled - user wants to keep this behavior)
        const dataSet = {
            dataSource: outputDS,
            records: [data],
            type: 'selected',
            name: outputDS.getLabel()
        };
        // Get available data actions and find the zoomToFeature action
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
            .then(actionCategories => {
            // Look for zoomToFeature action in any category
            let zoomAction = null;
            for (const category in actionCategories) {
                const actions = actionCategories[category];
                zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                if (zoomAction)
                    break;
            }
            if (zoomAction) {
                // Execute the zoom action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, widgetId);
            }
        })
            .catch(error => {
            // Silently handle errors
        });
    }, [outputDS, widgetId]);
    /**
     * Removes a record from the results and selection.
     * If removing the last record, automatically clears all results
     * by calling the trash can logic (same as clicking Clear button).
     * This ensures the UI doesn't show "Features displayed: 0 / 1" when all results are removed.
     *
     * @param data - The feature data record to remove
     */
    const removeRecord = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((data) => {
        var _a, _b;
        const dataId = data.getId();
        const currentExpandAll = expandAll;
        // Log hash state when removing individual record
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        const hashParams = {};
        urlParams.forEach((value, key) => {
            hashParams[key] = value;
        });
        debugLogger.log('EXPAND-COLLAPSE', {
            event: 'removeRecord-started',
            widgetId,
            removedRecordId: dataId,
            currentExpandAll,
            timestamp: Date.now()
        });
        debugLogger.log('HASH', {
            event: 'removeRecord-called',
            widgetId,
            removedRecordId: dataId,
            hash: hash,
            hashParams: hashParams,
            hashParamsCount: Object.keys(hashParams).length,
            timestamp: Date.now()
        });
        // Remove from expansion states map
        setItemExpandStates(prevMap => {
            const newMap = new Map(prevMap);
            newMap.delete(dataId);
            debugLogger.log('EXPAND-COLLAPSE', {
                event: 'itemExpandStates-cleaned-up',
                widgetId,
                removedRecordId: dataId,
                remainingCount: newMap.size,
                timestamp: Date.now()
            });
            return newMap;
        });
        // Add to removed records set
        setRemovedRecordIds(prev => {
            var _a, _b;
            const newSet = new Set(prev).add(dataId);
            // If all records are now removed, clear everything by calling trash can logic
            // IMPORTANT: Compare against actual displayed records count, not resultCount
            // resultCount only reflects the latest query, but in "Add to" mode we display accumulated records
            // Use queryData.records.length (before filtering) as the source of truth for displayed records
            // Fall back to accumulatedRecords.length if in accumulation mode, or resultCount as last resort
            let currentDisplayedCount = ((_a = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            if (currentDisplayedCount === 0) {
                // If queryData doesn't have records yet, check if we're in accumulation mode
                const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
                    resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
                if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                    currentDisplayedCount = accumulatedRecords.length;
                }
                else {
                    // Last resort: use resultCount (but this might be incorrect in accumulation mode)
                    currentDisplayedCount = resultCount;
                }
            }
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-checking-all-removed',
                widgetId,
                removedRecordIdsSize: newSet.size,
                currentDisplayedCount,
                resultCount,
                queryDataRecordsCount: ((_b = queryData === null || queryData === void 0 ? void 0 : queryData.records) === null || _b === void 0 ? void 0 : _b.length) || 0,
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                resultsMode,
                willNavigateBack: newSet.size === currentDisplayedCount && currentDisplayedCount > 0,
                timestamp: Date.now()
            });
            if (newSet.size === currentDisplayedCount && currentDisplayedCount > 0) {
                // All displayed records removed - clear everything (same as clicking trash can button)
                onNavBack(true);
                return newSet;
            }
            return newSet;
        });
        // Update queryData to filter out the removed record
        setQueryData(prevData => {
            if (!prevData)
                return prevData;
            const filteredRecords = prevData.records.filter((record) => record.getId() !== dataId);
            return Object.assign(Object.assign({}, prevData), { records: filteredRecords });
        });
        // ALWAYS remove from origin data source selections (same as Remove mode)
        // This properly removes records from the map selection, handling single or multiple origin sources
        // Also removes graphics from graphics layer if using graphics layer highlighting
        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_14__.removeRecordsFromOriginSelections)(widgetId, [data], outputDS, useGraphicsLayerForHighlight, graphicsLayer);
        // Update outputDS selection
        const selectedDatas = (_a = outputDS.getSelectedRecords()) !== null && _a !== void 0 ? _a : [];
        const updatedSelectedDatas = selectedDatas.filter(record => record.getId() !== dataId);
        const recordIds = updatedSelectedDatas.map(record => record.getId());
        // Update outputDS selection
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, updatedSelectedDatas);
        }
        // IMPORTANT: Publish custom event so widget can update lastSelection state
        // This ensures restoration restores the correct (updated) count
        const originDS = (_b = outputDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0];
        const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
        const selectionEvent = new CustomEvent('querysimple-selection-changed', {
            detail: {
                widgetId,
                recordIds, // Updated record IDs (with removed record excluded)
                dataSourceId,
                outputDsId: outputDS.id,
                queryItemConfigId: queryItem.configId
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(selectionEvent);
        // If in accumulation mode, also remove from accumulated records
        const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.AddToSelection ||
            resultsMode === _config__WEBPACK_IMPORTED_MODULE_4__.SelectionType.RemoveFromSelection;
        if (isAccumulationMode && onAccumulatedRecordsChange && accumulatedRecords && accumulatedRecords.length > 0) {
            const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_14__.removeResultsFromAccumulated)(outputDS, [data], accumulatedRecords);
            debugLogger.log('RESULTS-MODE', {
                event: 'x-button-removed-from-accumulated',
                widgetId,
                removedRecordId: dataId,
                accumulatedRecordsCountBefore: accumulatedRecords.length,
                remainingRecordsCount: remainingRecords.length,
                wasRemoved: remainingRecords.length < accumulatedRecords.length
            });
            onAccumulatedRecordsChange(remainingRecords);
        }
        // Log after removeRecord completes to check if expandAll changed
        setTimeout(() => {
            debugLogger.log('RESULTS-MODE', {
                event: 'removeRecord-completed',
                widgetId,
                removedRecordId: dataId,
                expandAllBefore: currentExpandAll,
                expandAllAfter: expandAll,
                expandAllChanged: currentExpandAll !== expandAll,
                expandByDefaultProp: expandAll, // What will be passed to SimpleList
                timestamp: Date.now()
            });
        }, 0);
    }, [outputDS, widgetId, resultCount, onNavBack, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, queryItem.configId, expandAll]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result h-100', css: resultStyle, role: 'listbox', "aria-label": getI18nMessage('results'), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: resultUseOutputDataSource, onDataSourceInfoChange: handleDataSourceInfoChange }), selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding: 0 16px; margin-top: 8px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_15__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) }) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result__header d-flex align-items-center mx-4', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { "aria-label": getI18nMessage('back'), ref: backBtnRef, className: 'p-0 mr-2', size: 'sm', variant: 'text', color: 'inherit', icon: true, onClick: () => { onNavBack(); }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_9__.ArrowLeftOutlined, { autoFlip: true }) }), (_b = currentItem.resultsLabel) !== null && _b !== void 0 ? _b : getI18nMessage('results'), ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-auto', icon: true, size: 'sm', variant: 'text', color: 'inherit', onClick: clearResults, "aria-label": getI18nMessage('clearResult'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { icon: iconMap.toolDelete }) }) }), enableDataAction && outputDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `width: 1px; height: 16px; background-color: var(--sys-color-divider-input);` }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionList, { widgetId: widgetId, dataSets: actionDataSets, listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DataActionListStyle.Dropdown, buttonSize: 'sm', buttonType: 'tertiary', extraActions: extraActions })] }))] }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-container mt-1', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-result-info mb-2 px-4 d-flex align-items-center justify-content-between', role: 'alert', "aria-live": 'polite', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: getTipMessage() }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), placement: 'top', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', type: 'tertiary', icon: true, onClick: toggleExpandAll, "aria-label": expandAll ? getI18nMessage('collapseAll') : getI18nMessage('expandAll'), children: expandAll ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_11__.CollapseAllOutlined, {}) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_10__.ExpandAllOutlined, {}) }) }) })] }), resultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_simple_list__WEBPACK_IMPORTED_MODULE_6__.SimpleList, { widgetId: widgetId, queryItem: queryItem, outputDS: outputDS, records: filteredRecordsForList, direction: direction, onEscape: handleEscape, onSelectChange: toggleSelection, onRemove: removeRecord, expandByDefault: expandAll, itemExpandStates: itemExpandStates, removedRecordIds: removedRecordIds, onRenderDone: handleRenderDone }, 'simple'))] })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskContext: () => (/* binding */ QueryTaskContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryTaskContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    resetSymbol: null
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskForm: () => (/* binding */ QueryTaskForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-spatial-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_context__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./query-task-context */ "./your-extensions/widgets/query-simple/src/runtime/query-task-context.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");

/** @jsx jsx */











const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_11__.createQuerySimpleDebugLogger)();



const getFormStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    .form-title {
      color: var(--sys-color-surface-paper-text);
      font-weight: 500;
      font-size: 0.8125rem;
      line-height: 1.5;
      margin-top: 0 !important;
    }
    .query-form__content {
      flex: 1 1 ${isAutoHeight ? 'auto' : 'auto'};
      max-height: ${isAutoHeight ? '61.8vh' : 'none'};
      overflow: auto;
      padding-bottom: 0;
    }
    .query-form__actions {
      flex-shrink: 0;
      margin-top: 0;
      padding-top: 4px;
    }
  `;
};
function QueryTaskForm(props) {
    var _a;
    const { widgetId, configId, outputDS, spatialFilterEnabled, datasourceReady, onFormSubmit, dataActionFilter, initialInputValue, onHashParameterUsed, queryItemShortId } = props;
    const preDataActionFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.usePrevious(dataActionFilter);
    const queryItem = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[widgetId];
        return widgetJson.config.queryItems.find(item => item.configId === configId);
    });
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_8__["default"]);
    const [resetSymbol, setResetSymbol] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    // Runtime zoom preference - initialized with config value, can be overridden by user
    const [runtimeZoomToSelected, setRuntimeZoomToSelected] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    // Sync runtime zoom preference when query item changes (e.g., switching between queries)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        setRuntimeZoomToSelected((_a = queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected) !== null && _a !== void 0 ? _a : true);
    }, [queryItem === null || queryItem === void 0 ? void 0 : queryItem.zoomToSelected, queryItem === null || queryItem === void 0 ? void 0 : queryItem.configId]);
    // const [dataSource, setDataSource] = React.useState<DataSource>(null)
    const { useAttributeFilter, useSpatialFilter, spatialFilterTypes, sqlExprObj, spatialMapWidgetIds, spatialInteractiveCreateToolTypes, spatialRelationUseDataSources, spatialIncludeRuntimeData, spatialRelations, spatialRelationEnableBuffer, spatialRelationBufferDistance, spatialRelationBufferUnit, spatialInteractiveEnableBuffer, spatialInteractiveBufferDistance, spatialInteractiveBufferUnit, attributeFilterLabel = getI18nMessage('attributeFilter'), spatialFilterLabel = getI18nMessage('spatialFilter'), attributeFilterDesc, spatialFilterDesc } = currentItem;
    const [attributeFilterSqlExprObj, setAttributeFilterSqlExprObj] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(sqlExprObj);
    const spatialFilterObjRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const spatialRelationRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(_config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect);
    const bufferRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const applyButtonRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_10__.useAutoHeight)();
    const showClauseNumber = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef((0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj));
    const initialValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track which configId we've set the value for
    const lastValueSetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null); // Track the last value that was set
    const hashTriggeredRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false); // Track if query was triggered via hash parameter
    const originDS = outputDS === null || outputDS === void 0 ? void 0 : outputDS.getOriginDataSources()[0];
    /**
     * Sets the input value from URL hash parameters when:
     * 1. Datasource is ready
     * 2. We have an initialInputValue from URL hash
     * 3. We haven't already set it for this configId, OR the value has changed
     *
     * Uses both React state updates and DOM manipulation to ensure the value
     * is properly set in SqlExpressionRuntime's internal state.
     */
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Reset flag if configId changed (switched to different query)
        if (initialValueSetRef.current !== null && initialValueSetRef.current !== configId) {
            initialValueSetRef.current = null;
            lastValueSetRef.current = null;
            hashTriggeredRef.current = false; // Reset hash trigger flag when switching queries
        }
        // Check if value has changed for the same configId
        const valueChanged = lastValueSetRef.current !== null &&
            lastValueSetRef.current !== initialInputValue &&
            initialValueSetRef.current === configId;
        // Set the value if:
        // - We haven't set it for this configId yet, OR
        // - The value has changed for the same configId (hash parameter updated)
        const shouldSetValue = datasourceReady &&
            initialInputValue &&
            ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) > 0 &&
            (initialValueSetRef.current !== configId || valueChanged);
        if (shouldSetValue) {
            const firstPart = sqlExprObj.parts[0];
            // Check if the first part is a SINGLE clause (not a SqlClauseSet)
            if (firstPart && 'type' in firstPart && firstPart.type === 'SINGLE' && 'valueOptions' in firstPart) {
                // Update the expression object with the initial value
                const updated = sqlExprObj.setIn(['parts', '0', 'valueOptions', 'value'], initialInputValue);
                setAttributeFilterSqlExprObj(updated);
                // Update clause number for the updated expression
                showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(updated);
                initialValueSetRef.current = configId;
                lastValueSetRef.current = initialInputValue;
                // Also set the value directly on the input element after a delay to ensure component is rendered
                // This is necessary because SqlExpressionRuntime may not sync from the expression prop alone
                const timeoutId = setTimeout(() => {
                    var _a;
                    // Find the input element within SqlExpressionRuntime
                    const formElement = ((_a = document.querySelector(`[data-widget-id="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.closest('.query-form')) ||
                        document.querySelector('.query-form');
                    if (formElement) {
                        // Look for text input elements
                        const textInputs = formElement.querySelectorAll('input[type="text"]');
                        textInputs.forEach((input) => {
                            var _a;
                            // Update the value if input is empty OR if the value has changed (hash parameter updated)
                            const shouldUpdate = !input.value ||
                                input.value.trim() === '' ||
                                input.value !== initialInputValue;
                            if (shouldUpdate) {
                                // Focus the input first
                                input.focus();
                                // Set the value
                                input.value = initialInputValue;
                                // Create and dispatch input event with proper properties
                                const inputEvent = new Event('input', { bubbles: true, cancelable: true });
                                Object.defineProperty(inputEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(inputEvent);
                                // Create and dispatch change event
                                const changeEvent = new Event('change', { bubbles: true, cancelable: true });
                                Object.defineProperty(changeEvent, 'target', { value: input, enumerable: true });
                                input.dispatchEvent(changeEvent);
                                // Also try React's synthetic event approach using native value setter
                                const nativeInputValueSetter = (_a = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value')) === null || _a === void 0 ? void 0 : _a.set;
                                if (nativeInputValueSetter) {
                                    nativeInputValueSetter.call(input, initialInputValue);
                                    const reactEvent = new Event('input', { bubbles: true });
                                    input.dispatchEvent(reactEvent);
                                }
                                // Blur to trigger any validation or state updates
                                input.blur();
                            }
                        });
                        // After setting values and blurring, verify input value is set before triggering Apply button
                        setTimeout(() => {
                            var _a;
                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                // VERIFICATION: Ensure input value is actually set before executing query
                                // This is especially important for grouped queries where dropdowns need to be synchronized first
                                const formElement = ((_a = document.querySelector(`[data-widget-id="${widgetId}"]`)) === null || _a === void 0 ? void 0 : _a.closest('.query-form')) ||
                                    document.querySelector('.query-form');
                                if (formElement && initialInputValue) {
                                    const textInputs = formElement.querySelectorAll('input[type="text"]');
                                    let inputValueSet = false;
                                    textInputs.forEach((input) => {
                                        if (input.value === initialInputValue) {
                                            inputValueSet = true;
                                        }
                                    });
                                    if (!inputValueSet) {
                                        debugLogger.log('FORM', {
                                            event: 'input-value-not-set-retrying',
                                            expectedValue: initialInputValue,
                                            queryItemShortId,
                                            action: 'will-retry-after-delay',
                                            note: 'Input value not set, retrying to ensure synchronization'
                                        });
                                        // Retry after a short delay to allow state to sync
                                        setTimeout(() => {
                                            // Recursively call verifyAndApply if needed, but limit retries
                                            // For now, just retry once more
                                            if (applyButtonRef.current && !applyButtonRef.current.disabled && datasourceReady) {
                                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                                hashTriggeredRef.current = true;
                                                // Remove hash parameter from URL before Apply is triggered
                                                if (onHashParameterUsed && queryItemShortId) {
                                                    onHashParameterUsed(queryItemShortId);
                                                }
                                                // Auto-trigger Apply button
                                                applyButtonRef.current.click();
                                            }
                                        }, 300);
                                        return; // Exit early, will retry
                                    }
                                }
                                // Input value is set correctly, proceed with execution
                                debugLogger.log('FORM', {
                                    event: 'input-value-verified',
                                    expectedValue: initialInputValue,
                                    queryItemShortId,
                                    note: 'Input value verified, proceeding with query execution'
                                });
                                // Set hashTriggeredRef to force zoom for hash-triggered queries
                                hashTriggeredRef.current = true;
                                // Remove hash parameter from URL before Apply is triggered to prevent re-execution
                                if (onHashParameterUsed && queryItemShortId) {
                                    onHashParameterUsed(queryItemShortId);
                                }
                                // Auto-trigger Apply button to execute the query with the populated value
                                applyButtonRef.current.click();
                            }
                        }, 200); // Small delay after blur to ensure state is synced
                    }
                }, 500); // Longer delay to ensure component is fully rendered
                return () => clearTimeout(timeoutId);
            }
        }
        // The sqlExprObj.parts may change but the displaySQL is the same
        if (!sqlExprObj) {
            showClauseNumber.current = 0;
            setAttributeFilterSqlExprObj(null);
        }
        else {
            showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
            // Only update if we haven't set the initial value for this configId yet, or if we don't have an initial value
            if (initialValueSetRef.current !== configId || !initialInputValue) {
                setAttributeFilterSqlExprObj(sqlExprObj);
            }
        }
    }, [sqlExprObj, initialInputValue, datasourceReady, configId, widgetId, onHashParameterUsed, queryItemShortId]);
    const applyQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        var _a, _b;
        // When the 'apply' button is clicked, it should clear the selection from the previous result list
        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_14__.clearSelectionInDataSources)(outputDS);
        if (outputDS) {
            const originDs = outputDS.getOriginDataSources()[0];
            if (originDs) {
                const dataViewConfig = originDs.getDataViewConfig();
                const maximum = dataViewConfig === null || dataViewConfig === void 0 ? void 0 : dataViewConfig.maximum;
                if (maximum != null && maximum > 0) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(outputDS, outputDS.getDataSourceJson().setIn(['query', 'maximum'], maximum));
                }
            }
        }
        // Force zoom for hash-triggered queries, otherwise use runtime preference
        const zoomToUse = hashTriggeredRef.current ? true : runtimeZoomToSelected;
        // Sanitize user input before submission
        const sanitizedSqlExprObj = (0,_query_utils__WEBPACK_IMPORTED_MODULE_7__.sanitizeSqlExpression)(attributeFilterSqlExprObj);
        let rel = spatialRelationRef.current;
        if (((_a = spatialFilterObjRef.current) === null || _a === void 0 ? void 0 : _a.geometry) && rel == null) {
            rel = _config__WEBPACK_IMPORTED_MODULE_5__.SpatialRelation.Intersect;
        }
        if (Array.isArray((_b = spatialFilterObjRef.current) === null || _b === void 0 ? void 0 : _b.geometry)) {
            if (spatialFilterObjRef.current.geometry.length === 1) {
                onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry: spatialFilterObjRef.current.geometry[0], relation: rel, buffer: bufferRef.current }), zoomToUse);
            }
            else {
                (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)([
                    'esri/geometry/operators/unionOperator'
                ]).then(modules => {
                    const operator = modules[0];
                    const geometry = operator.executeMany(spatialFilterObjRef.current.geometry);
                    onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { geometry, relation: rel, buffer: bufferRef.current }), zoomToUse);
                });
            }
        }
        else {
            onFormSubmit(sanitizedSqlExprObj, Object.assign(Object.assign({}, spatialFilterObjRef.current), { relation: rel, buffer: bufferRef.current }), zoomToUse);
        }
        // Reset hashTriggeredRef after use
        hashTriggeredRef.current = false;
    }, [onFormSubmit, outputDS, attributeFilterSqlExprObj, runtimeZoomToSelected]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((event) => {
        if (event.key === 'Enter' && datasourceReady) {
            event.preventDefault();
            // Find the active input field
            const activeElement = document.activeElement;
            if (activeElement && activeElement.tagName === 'INPUT' && activeElement.type === 'text') {
                // Force blur to trigger SqlExpressionRuntime's input processing
                activeElement.blur();
                // Wait for blur processing, then click the Apply button
                // This uses the exact same code path as clicking the button manually
                setTimeout(() => {
                    if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                        applyButtonRef.current.click();
                    }
                    else {
                        applyQuery();
                    }
                }, 200);
            }
            else {
                // Not in an input field, safe to apply immediately
                if (applyButtonRef.current && !applyButtonRef.current.disabled) {
                    applyButtonRef.current.click();
                }
                else {
                    applyQuery();
                }
            }
        }
    }, [datasourceReady, applyQuery]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (!dataActionFilter)
            return;
        if (dataActionFilter.where !== (preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where)) {
            applyQuery();
        }
    }, [dataActionFilter, preDataActionFilter === null || preDataActionFilter === void 0 ? void 0 : preDataActionFilter.where, applyQuery]);
    const resetQuery = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        // 1. reset attribute filter
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlExprObj);
        setAttributeFilterSqlExprObj(sqlExprObj);
        // 2. reset spatial filter
        setResetSymbol(Symbol());
    }, [sqlExprObj]);
    const handleSqlExprObjChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlObj) => {
        showClauseNumber.current = (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.getShownClauseNumberByExpression)(sqlObj);
        setAttributeFilterSqlExprObj(sqlObj);
    }, []);
    const handleSpatialFilterChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((filter) => {
        spatialFilterObjRef.current = filter;
    }, []);
    const handleRelationChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((rel) => {
        spatialRelationRef.current = rel;
    }, []);
    const handleBufferChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((distance, unit) => {
        bufferRef.current = { distance, unit };
    }, []);
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // Debug logging for form rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        debugLogger.log('FORM', {
            event: 'form-render-check',
            configId,
            datasourceReady,
            useAttributeFilter,
            sqlExprObj: sqlExprObj ? 'exists' : 'null',
            sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
            showAttributeFilter,
            originDS: originDS ? 'exists' : 'null',
            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'none',
            showSpatialFilter,
            isAutoHeight,
            outputDS: outputDS ? 'exists' : 'null'
        });
    }, [configId, datasourceReady, useAttributeFilter, sqlExprObj, showAttributeFilter, originDS, showSpatialFilter, isAutoHeight, outputDS]);
    // Log when form content should render
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (showAttributeFilter && originDS) {
            debugLogger.log('FORM', {
                event: 'attribute-filter-ready',
                configId,
                originDSId: originDS.id,
                sqlExprObjParts: ((_a = sqlExprObj === null || sqlExprObj === void 0 ? void 0 : sqlExprObj.parts) === null || _a === void 0 ? void 0 : _a.length) || 0,
                attributeFilterLabel,
                note: 'Input field should be visible'
            });
        }
        else {
            debugLogger.log('FORM', {
                event: 'attribute-filter-not-ready',
                configId,
                showAttributeFilter,
                originDS: originDS ? 'exists' : 'null',
                useAttributeFilter,
                sqlExprObj: sqlExprObj ? 'exists' : 'null',
                reason: !showAttributeFilter ? 'showAttributeFilter is false' : 'originDS is null'
            });
        }
    }, [showAttributeFilter, originDS, configId, sqlExprObj, useAttributeFilter, attributeFilterLabel]);
    // Check DOM visibility after render
    const formContentRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        if (formContentRef.current) {
            const computedStyle = window.getComputedStyle(formContentRef.current);
            const rect = formContentRef.current.getBoundingClientRect();
            debugLogger.log('FORM', {
                event: 'form-content-dom-check',
                configId,
                exists: !!formContentRef.current,
                display: computedStyle.display,
                visibility: computedStyle.visibility,
                opacity: computedStyle.opacity,
                height: computedStyle.height,
                maxHeight: computedStyle.maxHeight,
                flex: computedStyle.flex,
                flexBasis: computedStyle.flexBasis,
                rectHeight: rect.height,
                rectWidth: rect.width,
                isVisible: rect.height > 0 && rect.width > 0,
                parentHeight: ((_a = formContentRef.current.parentElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0
            });
        }
    }, [configId, showAttributeFilter, originDS]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_context__WEBPACK_IMPORTED_MODULE_12__.QueryTaskContext.Provider, { value: { resetSymbol }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form', css: getFormStyle(isAutoHeight), children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: formContentRef, className: 'query-form__content', onKeyDown: handleKeyDown, children: [showAttributeFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `padding-top: 2px;`, "aria-label": attributeFilterLabel, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title d-flex align-items-center', { 'd-none': !attributeFilterLabel && !attributeFilterDesc }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-top: 0;
                margin-bottom: 4px;
              `, children: [attributeFilterLabel && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: attributeFilterLabel }), attributeFilterDesc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: attributeFilterDesc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_13__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), originDS && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `margin: -10px 0px;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_4__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: originDS, expression: attributeFilterSqlExprObj, onChange: handleSqlExprObjChange }, `${configId}-${initialInputValue || 'none'}`) }))] })), showAttributeFilter && showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("hr", { className: 'm-4', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `border: none; height: 1px; background-color: var(--sys-color-divider-secondary);` })), showSpatialFilter && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_spatial_form__WEBPACK_IMPORTED_MODULE_9__.QueryTaskSpatialForm, { widgetId: widgetId, label: spatialFilterLabel, desc: spatialFilterDesc, filterTypes: spatialFilterTypes, mapWidgetIds: spatialMapWidgetIds, createToolTypes: spatialInteractiveCreateToolTypes, onFilterChange: handleSpatialFilterChange, onRelationChange: handleRelationChange, onBufferChange: handleBufferChange, spatialRelations: spatialRelations, dsEnableBuffer: spatialRelationEnableBuffer, dsBufferDistance: spatialRelationBufferDistance, dsBufferUnit: spatialRelationBufferUnit, drawEnableBuffer: spatialInteractiveEnableBuffer, drawBufferDistance: spatialInteractiveBufferDistance, drawBufferUnit: spatialInteractiveBufferUnit, useDataSources: spatialRelationUseDataSources, useRuntimeData: spatialIncludeRuntimeData }))] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'query-form__actions px-4 d-flex align-items-center', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Checkbox, { checked: runtimeZoomToSelected, onChange: (_, checked) => setRuntimeZoomToSelected(checked), className: 'mr-2' }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: 'mr-auto', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `font-size: 0.875rem; color: var(--sys-color-text-primary);`, children: getI18nMessage('zoomToSelected') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: applyButtonRef, color: 'primary', className: 'ml-auto', disabled: !datasourceReady, onClick: applyQuery, children: getI18nMessage('apply') }), (showClauseNumber.current > 0 || showSpatialFilter) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: 'ml-2', onClick: resetQuery, children: getI18nMessage('reset') }))] })] }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx":
/*!*******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskLabel: () => (/* binding */ QueryTaskLabel)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");

/** @jsx jsx */


const textStyle = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  font-weight: 500;
  font-size: 0.875rem;
`;
function QueryTaskLabel(props) {
    const { icon, name } = props;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'd-flex align-items-center text-truncate', css: textStyle, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { className: 'query-task-icon mr-2', icon: icon.svg }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'text-truncate', title: name, children: name })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx":
/*!*************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListInline: () => (/* binding */ TaskListInline)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");

/** @jsx jsx */






const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
const SPACE = 8;
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  > div {
    margin-right: 8px;
  }
`;
// show task label and an arrow to the task content
function TaskListInline(props) {
    const { queryItems, widgetId, minSize, defaultSize, defaultPageSize, widgetLabel, wrap = false } = props;
    const containerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const containerWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const contentWidthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef({});
    const [numOfExpanded, setNumOfExpanded] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(queryItems.length);
    const [openedPopper, setOpenedPopper] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(-1);
    const resizeObserverRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const adjustContent = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        let total = 0;
        for (let i = 0; i < numOfExpanded; i++) {
            const item = queryItems[i];
            const itemWidth = contentWidthRef.current[item.configId];
            if (itemWidth > 0) {
                total += itemWidth + SPACE;
                if (total >= containerWidthRef.current && numOfExpanded !== i) {
                    setNumOfExpanded(i);
                    return;
                }
            }
            else {
                return; // content width not ready
            }
        }
        setNumOfExpanded(queryItems.length);
    }, [numOfExpanded, queryItems]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (resizeObserverRef.current) {
            resizeObserverRef.current.disconnect();
        }
        // bind with the new event handler
        resizeObserverRef.current = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
            const width = Math.round(entries[0].contentRect.width);
            if (containerWidthRef.current !== width) {
                containerWidthRef.current = width;
                adjustContent();
            }
        }, 200));
        resizeObserverRef.current.observe(containerRef.current);
        return () => {
            resizeObserverRef.current.disconnect();
        };
    }, [adjustContent]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        var _a;
        containerWidthRef.current = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth;
        adjustContent();
    });
    const handleItemWidthChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, width) => {
        const queryItem = queryItems[index];
        if (contentWidthRef.current[queryItem.configId] !== width) {
            contentWidthRef.current[queryItem.configId] = width;
            adjustContent();
        }
    }, [queryItems, adjustContent]);
    const handlePopperOpenedChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((index, isOpen) => {
        if (isOpen) {
            setOpenedPopper(index);
        }
        else if (index === openedPopper) {
            // current popper is closed
            setOpenedPopper(-1);
        }
    }, [openedPopper]);
    const [expandedArray, nonExpandedArray] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const expandedArray = [];
        const nonExpandedArray = [];
        for (let i = 0; i < queryItems.length; i++) {
            if (i < numOfExpanded) {
                expandedArray.push(queryItems[i]);
            }
            else {
                nonExpandedArray.push(queryItems[i]);
            }
        }
        return [expandedArray, nonExpandedArray];
    }, [queryItems, numOfExpanded]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { ref: containerRef, css: style, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('runtime-query__query-list h-100 d-flex', { 'flex-wrap': wrap, 'align-content-start': wrap }), children: [expandedArray.map((queryItem, index) => {
                var _a;
                const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUERY_ITEM, queryItem);
                return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: index, icon: currentItem.icon, buttonType: 'default', label: currentItem.displayLabel ? currentItem.name : undefined, popperTitle: currentItem.name, onWidthChange: handleItemWidthChange, minSize: minSize, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== index, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: index, total: 1, isInPopper: true, queryItem: currentItem, wrappedInPopper: true, className: 'pb-4', defaultPageSize: defaultPageSize, initialInputValue: currentItem.shortId === ((_a = props.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) ? props.initialQueryValue.value : undefined, onHashParameterUsed: props.onHashParameterUsed, queryItemShortId: currentItem.shortId }) }, currentItem.configId);
            }), nonExpandedArray.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_4__.TaskListPopperWrapper, { id: expandedArray.length + 1, icon: iconMap.iconMore, minSize: minSize, buttonType: 'default', popperTitle: widgetLabel, defaultSize: defaultSize, onOpenedChange: handlePopperOpenedChange, forceClose: openedPopper >= 0 && openedPopper !== expandedArray.length + 1, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_3__.QueryTaskList, { widgetId: widgetId, isInPopper: true, defaultPageSize: defaultPageSize, queryItems: nonExpandedArray, className: 'pb-4', initialQueryValue: props.initialQueryValue, onHashParameterUsed: props.onHashParameterUsed }) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx":
/*!*********************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TaskListPopperWrapper: () => (/* binding */ TaskListPopperWrapper)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");

/** @jsx jsx */



const shiftOptions = { padding: 1 };
function TaskListPopperWrapper(props) {
    const { id, icon, label, forceClose, onOpenedChange, popperTitle, minSize, defaultSize, onWidthChange, buttonType = 'tertiary', children } = props;
    const iconRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const widthRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const [isOpen, setIsOpen] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(false);
    const [popperVersion, setPopperVersion] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    const isMobile = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useCheckSmallBrowserSizeMode();
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (forceClose) {
            setIsOpen(false);
        }
    }, [forceClose]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        if (typeof onWidthChange === 'function') {
            widthRef.current = Math.round(iconRef.current.clientWidth);
            onWidthChange(id, widthRef.current);
            const resizeObserver = new ResizeObserver(jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.throttle((entries) => {
                const width = Math.round(entries[0].contentRect.width);
                if (widthRef.current !== width) {
                    widthRef.current = width;
                    onWidthChange(id, width);
                }
            }, 200));
            resizeObserver.observe(iconRef.current);
            return () => {
                resizeObserver.disconnect();
            };
        }
    });
    const togglePopper = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => {
        if (typeof onOpenedChange === 'function') {
            onOpenedChange(id, !isOpen);
        }
        setIsOpen(!isOpen);
        setPopperVersion(popperVersion + 1);
        if (isOpen) {
            setTimeout(() => {
                if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.isKeyboardMode)()) {
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(iconRef.current);
                }
            }, 200);
        }
    }, [id, isOpen, popperVersion, onOpenedChange]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: 'runtime-query__widget-popper', children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { title: label, "aria-label": label, icon: true, size: 'sm', variant: buttonType === 'tertiary' ? 'text' : undefined, color: buttonType === 'tertiary' ? 'inherit' : undefined, type: buttonType === 'tertiary' ? undefined : buttonType, ref: iconRef, onClick: togglePopper, children: [icon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, Object.assign({ size: 16 }, (typeof icon === 'string' ? { icon } : { icon: icon.svg, color: buttonType === 'tertiary' ? undefined : icon.properties.color }))), label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
            line-height: 1.2;
          `, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ 'ml-2': icon != null }), children: label })] }), isMobile
                ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.MobilePanel, { open: isOpen, title: popperTitle, onClose: togglePopper, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })
                : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FloatingPanel, { className: 'ui-unit-popper ui-unit-popper_k-arrangement-icon flex-grow-1', headerClassName: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS, open: isOpen, onHeaderClose: togglePopper, toggle: togglePopper, headerTitle: popperTitle, minSize: minSize, defaultSize: defaultSize, dragBounds: 'body', version: popperVersion, reference: iconRef, placement: 'bottom-start', shiftOptions: shiftOptions, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              flex-direction: column;
              height: 100%;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                overflow: auto;
                padding-bottom: 1rem; /* Scoped padding to space content from footer */
              `, children: children }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                padding: 4px 12px;
                border-top: 1px solid var(--sys-color-divider-secondary);
                background-color: var(--sys-color-surface-paper);
                flex-shrink: 0;
                text-align: center;
              `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  font-size: 0.75rem;
                  color: var(--sys-color-text-tertiary);
                  font-weight: 400;
                  letter-spacing: 0.025em;
                  display: inline-flex;
                  align-items: center;
                  gap: 4px;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      flex-shrink: 0;
                      opacity: 0.6;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    margin-left: 6px;
                    opacity: 0.5;
                    font-size: 0.7rem;
                  `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_3__.WIDGET_VERSION] })] }) })] }) })] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskList: () => (/* binding */ QueryTaskList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _query_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-task */ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */





const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_5__.createQuerySimpleDebugLogger)();
// Helper function to sort queries by display order (lower numbers appear first)
// Queries without order maintain their original relative positions
function sortQueryItemsByOrder(queryItems) {
    // Handle null/undefined/empty cases
    if (!queryItems || queryItems.length === 0) {
        return queryItems || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
    }
    // Safely convert to regular array for sorting
    // Handle both ImmutableArray (has toArray method) and regular arrays
    const itemsArray = (queryItems && typeof queryItems.toArray === 'function')
        ? queryItems.toArray()
        : (Array.isArray(queryItems) ? queryItems : []);
    const itemsWithIndex = itemsArray.map((item, index) => ({ item, originalIndex: index }));
    itemsWithIndex.sort((a, b) => {
        var _a, _b;
        const orderA = (_a = a.item.order) !== null && _a !== void 0 ? _a : Infinity;
        const orderB = (_b = b.item.order) !== null && _b !== void 0 ? _b : Infinity;
        if (orderA !== orderB) {
            return orderA - orderB;
        }
        // If order is equal (both Infinity or same number), maintain original index order
        return a.originalIndex - b.originalIndex;
    });
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(itemsWithIndex.map(({ item }) => item));
}
// Helper function to group queries by groupId
const groupQueries = (queryItems) => {
    const groups = {};
    const ungrouped = [];
    const groupOrder = [];
    const groupIndexMap = {};
    // First pass: collect items in regular arrays
    const groupItemsMap = {};
    queryItems.forEach((item, index) => {
        if (item.groupId) {
            if (!groupItemsMap[item.groupId]) {
                groupItemsMap[item.groupId] = [];
                groups[item.groupId] = {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]),
                    displayName: item.groupDisplayName || item.name || `Group ${item.groupId}`,
                    icon: item.icon
                };
                groupIndexMap[item.groupId] = index;
                groupOrder.push(item.groupId);
            }
            groupItemsMap[item.groupId].push(item);
        }
        else {
            ungrouped.push({ item, index });
        }
    });
    // Second pass: convert regular arrays to ImmutableArrays
    Object.keys(groupItemsMap).forEach(groupId => {
        groups[groupId].items = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)(groupItemsMap[groupId]);
    });
    return { groups, ungrouped, groupOrder };
};
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
function QueryTaskList(props) {
    const { queryItems, widgetId, defaultPageSize, isInPopper = false, className = '', initialQueryValue, onHashParameterUsed, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab, onTabChange } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // Sort queries by display order before grouping
    // Handle case where queryItems might be undefined/null or not an ImmutableArray
    const sortedQueryItems = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        if (!queryItems) {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
        }
        return sortQueryItemsByOrder(queryItems);
    }, [queryItems]);
    const { groups, ungrouped, groupOrder } = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => groupQueries(sortedQueryItems), [sortedQueryItems]);
    // State to track the current URL hash and query string
    const [urlParams, setUrlParams] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => ({
        hash: window.location.hash.substring(1),
        query: window.location.search.substring(1)
    }));
    // Listen for hashchange events to update our local state
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        const handleUrlChange = () => {
            debugLogger.log('HASH', {
                event: 'url-change-detected-in-task-list',
                newHash: window.location.hash,
                newQuery: window.location.search,
                timestamp: Date.now()
            });
            setUrlParams({
                hash: window.location.hash.substring(1),
                query: window.location.search.substring(1)
            });
        };
        window.addEventListener('hashchange', handleUrlChange);
        // Also listen for popstate in case query parameters change without hash change
        window.addEventListener('popstate', handleUrlChange);
        return () => {
            window.removeEventListener('hashchange', handleUrlChange);
            window.removeEventListener('popstate', handleUrlChange);
        };
    }, []);
    // Determine if we have an initial query value from the URL hash or query string
    const initialQueryValueFromUrl = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const { hash, query } = urlParams;
        const hashParams = new URLSearchParams(hash);
        const queryParams = new URLSearchParams(query);
        const allQueryItems = [...ungrouped.map(u => u.item), ...Object.values(groups).flatMap(g => g.items)];
        for (const item of allQueryItems) {
            if (item.shortId) {
                if (hashParams.has(item.shortId)) {
                    return {
                        shortId: item.shortId,
                        value: hashParams.get(item.shortId)
                    };
                }
                if (queryParams.has(item.shortId)) {
                    return {
                        shortId: item.shortId,
                        value: queryParams.get(item.shortId)
                    };
                }
            }
        }
        return null;
    }, [ungrouped, groups, urlParams]);
    // Use the prop initialQueryValue if provided, otherwise fallback to our own URL parsing
    const effectiveInitialQueryValue = initialQueryValue || initialQueryValueFromUrl;
    // Find the query item matching the shortId from URL hash
    const matchingQueryIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const shortId = effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId;
        if (!shortId) {
            return -1;
        }
        return sortedQueryItems.findIndex(item => item.shortId === shortId);
    }, [sortedQueryItems, effectiveInitialQueryValue]);
    // Determine which group/ungrouped index the matching query is at
    const getQuerySelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a;
        if (matchingQueryIndex < 0)
            return null;
        const item = sortedQueryItems[matchingQueryIndex];
        if (item.groupId) {
            const groupItems = ((_a = groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.items) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)([]);
            const indexInGroup = groupItems.findIndex(q => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-in-group',
                groupId: item.groupId,
                indexInGroup: indexInGroup >= 0 ? indexInGroup : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'group', groupId: item.groupId, index: indexInGroup >= 0 ? indexInGroup : 0 };
        }
        else {
            // Ungrouped query
            const indexInUngrouped = ungrouped.findIndex(({ item: q }) => q.configId === item.configId);
            debugLogger.log('GROUP', {
                event: 'hash-query-found-ungrouped',
                indexInUngrouped: indexInUngrouped >= 0 ? indexInUngrouped : 0,
                queryItemConfigId: item.configId,
                queryItemShortId: item.shortId
            });
            return { type: 'ungrouped', index: indexInUngrouped >= 0 ? indexInUngrouped : 0 };
        }
    }, [matchingQueryIndex, sortedQueryItems, groups, ungrouped]);
    // Helper to determine default selection based on display order
    const getDefaultSelection = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        var _a, _b, _c, _d;
        if (getQuerySelection) {
            return getQuerySelection;
        }
        // No hash parameter - determine default based on display order
        // Compare first ungrouped query vs first query in first group
        const firstUngroupedOrder = ungrouped.length > 0 ? ((_a = ungrouped[0].item.order) !== null && _a !== void 0 ? _a : Infinity) : Infinity;
        const firstGroupOrder = groupOrder.length > 0 && ((_c = (_b = groups[groupOrder[0]]) === null || _b === void 0 ? void 0 : _b.items) === null || _c === void 0 ? void 0 : _c.length) > 0
            ? ((_d = groups[groupOrder[0]].items[0].order) !== null && _d !== void 0 ? _d : Infinity)
            : Infinity;
        // Select whichever has lower order (or first if equal)
        if (firstUngroupedOrder < firstGroupOrder) {
            return { type: 'ungrouped', index: 0 };
        }
        else if (firstGroupOrder < Infinity || groupOrder.length > 0) {
            return { type: 'group', groupId: groupOrder[0], index: 0 };
        }
        else if (ungrouped.length > 0) {
            return { type: 'ungrouped', index: 0 };
        }
        return null;
    }, [getQuerySelection, ungrouped, groups, groupOrder]);
    // Track selected query - initialize with matching query if found from URL hash, or default based on display order
    const [selectedGroupId, setSelectedGroupId] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-selection',
                groupId: getDefaultSelection.groupId,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.groupId;
        }
        return null;
    });
    const [selectedGroupQueryIndex, setSelectedGroupQueryIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'group') {
            debugLogger.log('GROUP', {
                event: 'initial-group-query-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    const [selectedUngroupedIndex, setSelectedUngroupedIndex] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(() => {
        if ((getDefaultSelection === null || getDefaultSelection === void 0 ? void 0 : getDefaultSelection.type) === 'ungrouped') {
            debugLogger.log('GROUP', {
                event: 'initial-ungrouped-index',
                index: getDefaultSelection.index,
                note: getQuerySelection ? 'Hash-matched' : 'Default based on display order'
            });
            return getDefaultSelection.index;
        }
        return 0;
    });
    // Update selection when initialQueryValue changes (e.g., when URL hash is detected)
    // We only want to update based on the hash if one is PRESENT.
    // If the hash is removed (initialQueryValue becomes null), we DON'T want to reset to default.
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (getQuerySelection) {
            // Hash parameter matched - use that selection and STAY THERE
            if (getQuerySelection.type === 'group') {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-group-from-hash',
                    groupId: getQuerySelection.groupId,
                    index: getQuerySelection.index,
                    note: 'Sticky selection from hash parameter'
                });
                setSelectedGroupId(getQuerySelection.groupId);
                setSelectedGroupQueryIndex(getQuerySelection.index);
            }
            else {
                debugLogger.log('GROUP', {
                    event: 'selection-changed-to-ungrouped-from-hash',
                    index: getQuerySelection.index,
                    note: 'Sticky selection from hash parameter'
                });
                setSelectedGroupId(null);
                setSelectedUngroupedIndex(getQuerySelection.index);
            }
        }
    }, [getQuerySelection]);
    // Get the currently selected query item
    const getSelectedQueryItem = () => {
        // PRIORITY 1: Use current state selection
        // The state is initialized with the hash match (if present) or default order,
        // and updated via useEffect if the hash changes later.
        debugLogger.log('GROUP', {
            event: 'getSelectedQueryItem-state-selection',
            selectedGroupId,
            hasSelectedGroup: selectedGroupId && groups[selectedGroupId],
            selectedGroupQueryIndex,
            selectedUngroupedIndex,
            ungroupedLength: ungrouped.length,
            groupOrderLength: groupOrder.length,
            note: 'Using state selection (hash-aware)'
        });
        // If a group is selected, get query from that group
        if (selectedGroupId && groups[selectedGroupId]) {
            const groupItems = groups[selectedGroupId].items;
            if (groupItems.length > 0) {
                const idx = selectedGroupQueryIndex < groupItems.length ? selectedGroupQueryIndex : 0;
                const selectedItem = groupItems[idx];
                debugLogger.log('GROUP', {
                    event: 'selected-query-from-group',
                    groupId: selectedGroupId,
                    groupQueryIndex: idx,
                    queryItemConfigId: selectedItem.configId,
                    queryDisplayName: getQueryDisplayName(selectedItem)
                });
                return selectedItem;
            }
        }
        // Otherwise, get from ungrouped queries
        if (ungrouped.length > 0) {
            const idx = selectedUngroupedIndex < ungrouped.length ? selectedUngroupedIndex : 0;
            const selectedItem = ungrouped[idx].item;
            debugLogger.log('GROUP', {
                event: 'selected-query-from-ungrouped',
                ungroupedIndex: idx,
                queryItemConfigId: selectedItem.configId,
                queryDisplayName: getQueryDisplayName(selectedItem)
            });
            return selectedItem;
        }
        // Fallback to first query item
        debugLogger.log('GROUP', {
            event: 'selected-query-fallback',
            note: 'No groups or ungrouped queries, using first item'
        });
        return sortedQueryItems[0];
    };
    const selectedQueryItem = getSelectedQueryItem();
    const selectedQueryRealIndex = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return sortedQueryItems.findIndex(q => q.configId === selectedQueryItem.configId);
    }, [sortedQueryItems, selectedQueryItem]);
    // If only one query total, don't show dropdown
    const showDropdown = sortedQueryItems.length > 1 || groupOrder.length > 0;
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `runtime-query__query-list h-100 ${className}`, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      display: flex;
      flex-direction: column;
      .query-selector {
        padding: 16px;
        border-bottom: 1px solid var(--sys-color-divider-secondary);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .query-selector-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--sys-color-text-primary);
        margin-bottom: 4px;
      }
      .query-selector select {
        width: 100%;
      }
      .query-task-container {
        flex: 1;
        overflow: auto;
      }
    `, children: selectedQueryItem && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `query-task-container ${isInPopper ? jimu_ui__WEBPACK_IMPORTED_MODULE_3__.FOCUSABLE_CONTAINER_CLASS : ''}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task__WEBPACK_IMPORTED_MODULE_2__.QueryTask, { widgetId: widgetId, index: selectedQueryRealIndex >= 0 ? selectedQueryRealIndex : 0, total: sortedQueryItems.length, queryItem: selectedQueryItem, isInPopper: isInPopper, initialInputValue: selectedQueryItem.shortId === (effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.shortId) ? effectiveInitialQueryValue === null || effectiveInitialQueryValue === void 0 ? void 0 : effectiveInitialQueryValue.value : undefined, onHashParameterUsed: onHashParameterUsed, queryItems: sortedQueryItems, selectedQueryIndex: selectedUngroupedIndex, onQueryChange: (index) => setSelectedUngroupedIndex(index), 
                // Grouping props
                groups: groups, ungrouped: ungrouped, 
                // Graphics layer props
                useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, onInitializeGraphicsLayer: onInitializeGraphicsLayer, onClearGraphicsLayer: onClearGraphicsLayer, groupOrder: groupOrder, selectedGroupId: selectedGroupId, selectedGroupQueryIndex: selectedGroupQueryIndex, onGroupChange: (groupId) => setSelectedGroupId(groupId), onGroupQueryChange: (index) => setSelectedGroupQueryIndex(index), onUngroupedChange: (index) => setSelectedUngroupedIndex(index), resultsMode: resultsMode, onResultsModeChange: onResultsModeChange, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, activeTab: activeTab, onTabChange: onTabChange }) })) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task-spatial-form.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTaskSpatialForm: () => (/* binding */ QueryTaskSpatialForm)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-from-ds */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-ds.tsx");
/* harmony import */ var _geometry_from_map__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry-from-map */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-map.tsx");
/* harmony import */ var _geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./geometry-from-draw */ "./your-extensions/widgets/query-simple/src/runtime/geometry-from-draw.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");

/** @jsx jsx */








function QueryTaskSpatialForm(props) {
    var _a;
    const { label, desc, filterTypes, mapWidgetIds, onFilterChange, onRelationChange, onBufferChange, useDataSources, spatialRelations, useRuntimeData, dsEnableBuffer, dsBufferDistance, dsBufferUnit, drawEnableBuffer, drawBufferDistance, drawBufferUnit, createToolTypes, widgetId } = props;
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]);
    // used to store the selection of the data source in order to update the filter when option changes
    const selectedGeometriesRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const mapExists = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        if ((mapWidgetIds === null || mapWidgetIds === void 0 ? void 0 : mapWidgetIds.length) > 0) {
            const mapWidgetId = mapWidgetIds[0];
            return state.appConfig.widgets[mapWidgetId] != null;
        }
        return false;
    });
    const canUseMapFilter = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return mapExists && ((filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent)) || (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode)));
    }, [filterTypes, mapExists]);
    const supportedFilterTypes = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        const result = [];
        if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData) {
            result.push({ value: 'data', label: getI18nMessage('featureFromDs') });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent))) {
            result.push({ value: 'map', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.CurrentMapExtent}`) });
        }
        if (canUseMapFilter && (filterTypes === null || filterTypes === void 0 ? void 0 : filterTypes.includes(_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode))) {
            result.push({ value: 'draw', label: getI18nMessage(`spatialFilterType_${_config__WEBPACK_IMPORTED_MODULE_3__.SpatialFilterType.InteractiveDrawMode}`) });
        }
        return result;
    }, [canUseMapFilter, useDataSources, useRuntimeData, getI18nMessage, filterTypes]);
    const [currentFilterType, setCurrentFilterType] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // in order to avoid invalid option being selected
        if (currentFilterType !== 'none' && !supportedFilterTypes.find((item) => item.value === currentFilterType)) {
            setCurrentFilterType((_a = supportedFilterTypes === null || supportedFilterTypes === void 0 ? void 0 : supportedFilterTypes[0]) === null || _a === void 0 ? void 0 : _a.value);
        }
    }, [currentFilterType, supportedFilterTypes]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // clear the relationship and buffer if filter type is not 'data'
        if (currentFilterType === 'map' || currentFilterType === 'draw' || currentFilterType === 'none') {
            onRelationChange(null);
            onBufferChange(0, _config__WEBPACK_IMPORTED_MODULE_3__.UnitType.Meters);
            onFilterChange({ geometry: null });
        }
        // no need to update the filter if the data source has selection since it will be updated in the handleSelectionChange method
        if (currentFilterType === 'data' && selectedGeometriesRef.current == null) {
            onFilterChange({ geometry: null });
        }
    }, [currentFilterType, onRelationChange, onBufferChange, onFilterChange]);
    const handleFilterTypeChanged = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => { setCurrentFilterType(evt.target.value); }, []);
    const handleGeometryChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometry, layer, graphic, clearAfterApply) => {
        onFilterChange({ geometry, graphic, layer, clearAfterApply });
    }, [onFilterChange]);
    const handleSelectionChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((geometries) => {
        selectedGeometriesRef.current = geometries;
        onFilterChange({ geometry: geometries });
    }, [onFilterChange]);
    if (!((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) > 0 || useRuntimeData || canUseMapFilter)) {
        return null;
    }
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: 'group', className: 'px-4 pb-4', "aria-label": label, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('form-title my-2 d-flex align-items-center', { 'd-none': !label && !desc }), children: [label && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mr-2 title2', children: label }), desc && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: desc, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_8__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }))] }), supportedFilterTypes.length > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'title3', children: getI18nMessage('chooseFilterType') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { "aria-label": getI18nMessage('chooseFilterType'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `height: 32px;`, value: currentFilterType, onChange: handleFilterTypeChanged, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: 'none', children: "-" }, '-'), supportedFilterTypes.map(item => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: item.value, children: item.label }, item.value))] })] })), currentFilterType === 'data' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_ds__WEBPACK_IMPORTED_MODULE_5__.GeometryFromDataSource, { enableBuffer: dsEnableBuffer, bufferDistance: dsBufferDistance, bufferUnit: dsBufferUnit, spatialRelations: spatialRelations, useDataSources: useDataSources, useRuntimeData: useRuntimeData, onSelectionChange: handleSelectionChange, onRelationChange: onRelationChange, onBufferChange: onBufferChange })), currentFilterType === 'map' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_map__WEBPACK_IMPORTED_MODULE_6__.GeometryFromMap, { mapWidgetIds: mapWidgetIds, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange })), currentFilterType === 'draw' && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_geometry_from_draw__WEBPACK_IMPORTED_MODULE_7__.GeometryFromDraw, { enableBuffer: drawEnableBuffer, bufferDistance: drawBufferDistance, bufferUnit: drawBufferUnit, mapWidgetIds: mapWidgetIds, widgetId: widgetId, createToolTypes: createToolTypes, onGeometryChange: handleGeometryChange, onBufferChange: onBufferChange }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-task.tsx":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-task.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryTask: () => (/* binding */ QueryTask)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/suggested/info */ "./jimu-icons/outlined/suggested/info.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash */ "./jimu-icons/outlined/editor/trash.tsx");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_task_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-task-form */ "./your-extensions/widgets/query-simple/src/runtime/query-task-form.tsx");
/* harmony import */ var _query_result__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./query-result */ "./your-extensions/widgets/query-simple/src/runtime/query-result.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _query_task_label__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-label */ "./your-extensions/widgets/query-simple/src/runtime/query-task-label.tsx");
/* harmony import */ var _default_query_item__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../default-query-item */ "./your-extensions/widgets/query-simple/src/default-query-item.ts");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _results_management_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./results-management-utils */ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/* harmony import */ var _loading_result__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./loading-result */ "./your-extensions/widgets/query-simple/src/runtime/loading-result.tsx");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

/** @jsx jsx */

















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.createQuerySimpleDebugLogger)();
// Helper function to get display name for query in dropdown
// Uses: searchAlias || jimuFieldName || item.name || fallback
const getQueryDisplayName = (item) => {
    var _a, _b, _c;
    // First priority: searchAlias if set
    if (item.searchAlias) {
        return item.searchAlias;
    }
    // Second priority: field name from SQL expression
    const jimuFieldName = (_c = (_b = (_a = item.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.jimuFieldName;
    if (jimuFieldName) {
        return jimuFieldName;
    }
    // Third priority: item name
    if (item.name) {
        return item.name;
    }
    // Fallback
    return 'Query';
};
const style = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
  &.wrapped .query-form {
    height: 100%;
  }
  .query-task__content {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding-top: 8px;
    &:has(> .query-form__header > div:not(.d-none)), &:has(> .query-result) {
      padding-top: 16px;
    }
  }
  .query-form__header {
    display: flex;
    &.has-content {
      border-bottom: 1px solid var(--sys-color-divider-secondary);
      margin-bottom: 6px;
      padding-bottom: 8px;
    }
    .nav-action {
      flex: 1 1 0;
      overflow: hidden;
      display: flex;
      .jimu-btn {
        min-width: 26px;
      }
    }
    .result-menu {
      display: flex;
    }
  }
`;
function QueryTask(props) {
    var _a, _b, _c, _d, _e;
    const { queryItem, onNavBack, total, isInPopper = false, wrappedInPopper = false, className = '', index, initialInputValue, onHashParameterUsed, queryItems, selectedQueryIndex, onQueryChange, groups, ungrouped, groupOrder, selectedGroupId, selectedGroupQueryIndex, onGroupChange, onGroupQueryChange, onUngroupedChange, resultsMode, onResultsModeChange, accumulatedRecords, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer, mapView, onInitializeGraphicsLayer, onClearGraphicsLayer, activeTab: propActiveTab, onTabChange: propOnTabChange } = props, otherProps = __rest(props, ["queryItem", "onNavBack", "total", "isInPopper", "wrappedInPopper", "className", "index", "initialInputValue", "onHashParameterUsed", "queryItems", "selectedQueryIndex", "onQueryChange", "groups", "ungrouped", "groupOrder", "selectedGroupId", "selectedGroupQueryIndex", "onGroupChange", "onGroupQueryChange", "onUngroupedChange", "resultsMode", "onResultsModeChange", "accumulatedRecords", "onAccumulatedRecordsChange", "useGraphicsLayerForHighlight", "graphicsLayer", "mapView", "onInitializeGraphicsLayer", "onClearGraphicsLayer", "activeTab", "onTabChange"]);
    const getI18nMessage = jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useTranslation(_translations_default__WEBPACK_IMPORTED_MODULE_13__["default"]);
    const [stage, setStage] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0); // 0 = form, 1 = results, 2 = loading
    const [internalActiveTab, setInternalActiveTab] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState('query');
    // Controlled tab state: use prop if provided, otherwise internal state
    const activeTab = propActiveTab || internalActiveTab;
    const setActiveTab = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab) => {
        if (propOnTabChange) {
            propOnTabChange(tab);
        }
        else {
            setInternalActiveTab(tab);
        }
    }, [propOnTabChange]);
    const [enabled, setEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const [resultCount, setResultCount] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(0);
    // Track if we've already selected records for the current query results
    const hasSelectedRecordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track query execution count to force QueryTaskResult remount on new queries
    const queryExecutionKeyRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(0);
    const queryParamRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const recordsRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const [outputDS, setOutputDS] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [dataSource, setDataSource] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [spatialFilterEnabled, setSpatialFilterEnabled] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(true);
    const attributeFilterSqlExprObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.sqlExprObj);
    const spatialFilterObj = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    const backBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const clearResultBtnRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    const [dataActionFilter, setDataActionFilter] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const previousConfigIdRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(queryItem.configId);
    // Track manual tab switches to prevent auto-switch useEffect from interfering
    const manualTabSwitchRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Track when a query was just executed - only auto-switch after query execution completes
    const queryJustExecutedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(false);
    // Store the last runtime zoom override value from the form for use by Add to Map action
    const lastRuntimeZoomToSelectedRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(undefined);
    // Error states for user-facing errors
    const [selectionError, setSelectionError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const [zoomError, setZoomError] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState(null);
    const currentItem = Object.assign({}, _default_query_item__WEBPACK_IMPORTED_MODULE_10__.DEFAULT_QUERY_ITEM, queryItem);
    const { icon, name, displayLabel } = currentItem;
    const dsExists = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.useDataSourceExists)({ widgetId: props.widgetId, useDataSourceId: (_a = currentItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId });
    // Debug logging for tab content rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        debugLogger.log('TASK', {
            event: 'query-tab-content-render',
            activeTab,
            enabled,
            dsExists,
            dataSource: dataSource ? 'exists' : 'null',
            queryItemConfigId: queryItem.configId,
            note: 'Query tab content state check'
        });
    }, [activeTab, enabled, dsExists, dataSource, queryItem.configId]);
    // Debug logging for Tab children rendering
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'query-tab-children-render',
                activeTab,
                queryItemConfigId: queryItem.configId,
                note: 'Query Tab children should be rendering'
            });
        }
    }, [activeTab, queryItem.configId]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.hooks.useEffectOnce(() => {
        // focus the back button when it is rendered
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
    });
    // Get the pagination style from widget config (MultiPage or LazyLoad/Single-page)
    const pagingTypeInConfig = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.resultPagingStyle;
    });
    // Get the initial page size for single-page (LazyLoad) results
    // This allows users to configure how many records are loaded initially when using single-page mode
    // Defaults to 100 if not configured
    const lazyLoadInitialPageSize = jimu_core__WEBPACK_IMPORTED_MODULE_1__.ReactRedux.useSelector((state) => {
        const widgetJson = state.appConfig.widgets[props.widgetId];
        return widgetJson.config.lazyLoadInitialPageSize;
    });
    // Watch for when results are ready and switch to Results tab
    // ONLY auto-switch when a query was just executed and results are loaded
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a;
        // Don't auto-switch if user manually switched tabs
        if (manualTabSwitchRef.current) {
            debugLogger.log('TASK', {
                event: 'auto-switch-skipped',
                reason: 'manual-tab-switch-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                activeTab,
                resultCount,
                queryJustExecutedRef: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
            return;
        }
        // FORCED: Always use SimpleList - we're done with lazy loading issues
        // Records are available immediately, so we can switch as soon as resultCount > 0
        const isSimpleList = true;
        // ONLY auto-switch when:
        // 1. A query was just executed (queryJustExecutedRef.current === true)
        // 2. We have results (resultCount > 0)
        // 3. Records are actually loaded:
        //    - For SimpleList: resultCount > 0 is sufficient (records available immediately)
        //    - For LazyLoad: recordsRef.current must have data (wait for lazy loading)
        // 4. We're currently on the query tab (don't switch if already on results)
        const hasRecords = isSimpleList
            ? resultCount > 0
            : (recordsRef.current && recordsRef.current.length > 0);
        debugLogger.log('TASK', {
            event: 'auto-switch-check',
            widgetId: props.widgetId,
            queryItemConfigId: queryItem.configId,
            activeTab,
            resultCount,
            queryJustExecutedRef: queryJustExecutedRef.current,
            isSimpleList,
            pagingTypeInConfig,
            hasRecords,
            recordsRefLength: ((_a = recordsRef.current) === null || _a === void 0 ? void 0 : _a.length) || 0,
            manualTabSwitchRef: manualTabSwitchRef.current,
            willAutoSwitch: queryJustExecutedRef.current && resultCount > 0 && hasRecords && activeTab === 'query',
            timestamp: Date.now()
        });
        if (queryJustExecutedRef.current &&
            resultCount > 0 &&
            hasRecords &&
            activeTab === 'query') {
            debugLogger.log('TASK', {
                event: 'auto-switch-triggered',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                fromTab: activeTab,
                toTab: 'results',
                resultCount,
                timestamp: Date.now()
            });
            setActiveTab('results');
            queryJustExecutedRef.current = false; // Reset after switching
            debugLogger.log('TASK', {
                event: 'auto-switch-completed',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                queryJustExecutedRefReset: queryJustExecutedRef.current,
                timestamp: Date.now()
            });
        }
    }, [resultCount, activeTab, pagingTypeInConfig]);
    // Verify dropdowns are synchronized with hash parameter when present
    // This is especially important for grouped queries where dropdowns need to be synchronized
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        var _a, _b;
        // Only verify if we have a hash parameter
        if (!initialInputValue || !queryItem.shortId) {
            return;
        }
        // Verify the current queryItem matches what we expect from hash parameter
        const expectedShortId = queryItem.shortId;
        const isGroupedQuery = queryItem.groupId !== null && queryItem.groupId !== undefined;
        // Check if dropdowns are correctly set for grouped queries
        if (isGroupedQuery) {
            const expectedGroupId = queryItem.groupId;
            const actualGroupId = selectedGroupId;
            const expectedQueryIndex = selectedGroupQueryIndex;
            if (expectedGroupId !== actualGroupId) {
                debugLogger.log('GROUP', {
                    event: 'dropdown-group-mismatch',
                    expectedGroupId,
                    actualGroupId,
                    queryItemShortId: expectedShortId,
                    warning: 'First dropdown may not be synchronized with hash parameter'
                });
            }
            else if (expectedQueryIndex !== undefined) {
                // Verify the query index within the group matches
                const groupItems = (_a = groups === null || groups === void 0 ? void 0 : groups[expectedGroupId]) === null || _a === void 0 ? void 0 : _a.items;
                if (groupItems && groupItems.length > expectedQueryIndex) {
                    const expectedQueryConfigId = (_b = groupItems[expectedQueryIndex]) === null || _b === void 0 ? void 0 : _b.configId;
                    const actualQueryConfigId = queryItem.configId;
                    if (expectedQueryConfigId !== actualQueryConfigId) {
                        debugLogger.log('GROUP', {
                            event: 'dropdown-query-index-mismatch',
                            expectedQueryConfigId,
                            actualQueryConfigId,
                            expectedQueryIndex,
                            queryItemShortId: expectedShortId,
                            warning: 'Second dropdown may not be synchronized with hash parameter'
                        });
                    }
                    else {
                        debugLogger.log('GROUP', {
                            event: 'dropdowns-synchronized',
                            queryItemShortId: expectedShortId,
                            groupId: expectedGroupId,
                            selectedGroupQueryIndex: expectedQueryIndex,
                            note: 'Dropdowns synchronized with hash parameter'
                        });
                    }
                }
            }
        }
        else {
            // Ungrouped query - verify it's selected
            debugLogger.log('GROUP', {
                event: 'dropdowns-synchronized-ungrouped',
                queryItemShortId: expectedShortId,
                note: 'Ungrouped query dropdown synchronized with hash parameter'
            });
        }
    }, [initialInputValue, queryItem.shortId, queryItem.groupId, queryItem.configId, selectedGroupId, selectedGroupQueryIndex, groups]);
    const useOutputDs = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.Immutable)({
        dataSourceId: queryItem.outputDataSourceId,
        mainDataSourceId: queryItem.outputDataSourceId
    }), [queryItem.outputDataSourceId]);
    const updateDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => {
        var _a, _b;
        const currentDs = ds !== null && ds !== void 0 ? ds : dataSource;
        // should disable spatial filter if the dataSource is an output ds and it already has spatial filter
        if ((_a = currentDs === null || currentDs === void 0 ? void 0 : currentDs.getDataSourceJson()) === null || _a === void 0 ? void 0 : _a.isOutputFromWidget) {
            const qDs = currentDs;
            const qParams = (_b = qDs.getCurrentQueryParams) === null || _b === void 0 ? void 0 : _b.call(qDs);
            if (qParams.geometry != null) {
                setSpatialFilterEnabled(false);
            }
            else {
                setSpatialFilterEnabled(true);
            }
        }
    }, [dataSource]);
    const handleStatusChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((enabled) => {
        setEnabled(enabled);
        updateDataSource();
    }, [updateDataSource]);
    const handleOutputDataSourceInfoChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((info, preInfo) => {
        const outputId = queryItem.outputDataSourceId;
        const filter = (info === null || info === void 0 ? void 0 : info.widgetQueries) ? info.widgetQueries[`setFilter-${outputId}`] : null;
        if (filter == null) { // filter is null means there are incomplete queries, ignore this change
            return;
        }
        const preFilter = (preInfo === null || preInfo === void 0 ? void 0 : preInfo.widgetQueries) ? preInfo.widgetQueries[`setFilter-${outputId}`] : null;
        if ((filter === null || filter === void 0 ? void 0 : filter.where) !== (preFilter === null || preFilter === void 0 ? void 0 : preFilter.where)) {
            setDataActionFilter(filter);
        }
    }, [queryItem.outputDataSourceId]);
    const publishDataClearedMsg = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback(() => __awaiter(this, void 0, void 0, function* () {
        if (!outputDS)
            return;
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordSetChangeMessage(props.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_1__.RecordSetChangeType.Remove, [outputDS.id]);
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        yield jimu_core__WEBPACK_IMPORTED_MODULE_1__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataRecordsSelectionChangeMessage(props.widgetId, [], [outputDS.id]));
    }), [props.widgetId, outputDS]);
    /**
     * Clears all query results from the UI and map.
     * This is the single source of truth for clearing results.
     * It clears the records, resets the result count, clears selection from the map,
     * publishes a cleared message to the map, switches back to the Query tab,
     * and increments the query execution key to force QueryTaskResult to remount with fresh state.
     */
    const clearResult = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (reason = 'unknown') {
        debugLogger.log('TASK', {
            event: 'clearResult-called',
            widgetId: props.widgetId,
            hasOutputDS: !!outputDS,
            reason,
            timestamp: Date.now()
        });
        recordsRef.current = null;
        outputDS === null || outputDS === void 0 ? void 0 : outputDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.NotReady);
        setResultCount(0);
        // NOTE: Graphics layer clearing is now handled inside clearSelectionInDataSources
        // called below. We ensure this is awaited to prevent race conditions.
        // Clear selection directly from data source using utility function
        try {
            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.clearSelectionInDataSources)(props.widgetId, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
            debugLogger.log('TASK', {
                event: 'clearResult-selection-cleared',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
        }
        catch (error) {
            debugLogger.log('TASK', {
                event: 'clearResult-selection-clear-failed',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                timestamp: Date.now()
            });
        }
        // Clear widget-level accumulated records when clearing results
        if (onAccumulatedRecordsChange) {
            onAccumulatedRecordsChange([]);
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-records-cleared-on-clear-results',
                widgetId: props.widgetId
            });
        }
        yield publishDataClearedMsg();
        // Switch back to Query tab when clearing results
        setActiveTab('query');
        setStage(0);
        hasSelectedRecordsRef.current = false; // Reset selection flag when clearing
        // Increment query execution key to force QueryTaskResult remount with fresh state
        queryExecutionKeyRef.current += 1;
        // Clear error states when clearing results
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'clearResult-complete',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
    }), [outputDS, publishDataClearedMsg, props.widgetId, queryItem.configId, onAccumulatedRecordsChange, useGraphicsLayerForHighlight, graphicsLayer]);
    /**
     * Handles data source creation when switching between query items.
     * When a new query item is selected (e.g., switching from Parcel to Major),
     * this clears old results to ensure all cleanup logic runs properly.
     *
     * @param ds - The newly created data source for the selected query item
     */
    const handleDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-start',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // In "Add to" and "Remove from" modes, preserve accumulated records and selection - don't clear
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'preserving-selection-on-query-switch-handleDataSourceCreated',
                widgetId: props.widgetId,
                resultsMode,
                accumulatedRecordsCount: accumulatedRecords.length
            });
            setDataSource(ds);
            updateDataSource(ds);
            setStage(0);
            setActiveTab('query');
            return; // Skip clearing - preserve selection
        }
        // For "New" mode, clear old results
        debugLogger.log('TASK', {
            event: 'handleDataSourceCreated-clearing-results-for-new-mode',
            widgetId: props.widgetId,
            timestamp: Date.now()
        });
        yield clearResult('handleDataSourceCreated-new-mode');
        setDataSource(ds);
        updateDataSource(ds);
        setStage(0);
        setActiveTab('query'); // Return to Query tab when switching queries
    }), [updateDataSource, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const handleOutputDataSourceCreated = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((ds) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e, _f, _g, _h;
        setOutputDS(ds);
        // CHECK rootDataSource.map to see how framework accesses map view
        try {
            const originDataSources = ds.getOriginDataSources();
            const originDS = originDataSources === null || originDataSources === void 0 ? void 0 : originDataSources[0];
            if (originDS) {
                const rootDS = originDS.getRootDataSource();
                if (rootDS) {
                    // Expose rootDS to window for console inspection
                    ;
                    window.__querySimpleRootDS = rootDS;
                    window.__querySimpleRootDSMap = rootDS.map;
                    window.__querySimpleOriginDS = originDS;
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'check-root-datasource-map',
                        widgetId: props.widgetId,
                        outputDSId: ds.id,
                        originDSId: originDS.id,
                        rootDSId: rootDS.id,
                        rootDSType: rootDS.type,
                        hasRootDSMap: !!rootDS.map,
                        rootDSMapType: rootDS.map ? typeof rootDS.map : 'none',
                        rootDSMapId: ((_a = rootDS.map) === null || _a === void 0 ? void 0 : _a.id) || 'none',
                        hasRootDSMapView: !!((_b = rootDS.map) === null || _b === void 0 ? void 0 : _b.view),
                        hasRootDSMapViews: !!((_c = rootDS.map) === null || _c === void 0 ? void 0 : _c.views),
                        rootDSMapViewsLength: ((_e = (_d = rootDS.map) === null || _d === void 0 ? void 0 : _d.views) === null || _e === void 0 ? void 0 : _e.length) || 0,
                        // Log some map properties if it exists
                        rootDSMapKeys: rootDS.map ? Object.keys(rootDS.map).filter(key => !key.startsWith('_') &&
                            typeof rootDS.map[key] !== 'function').slice(0, 20) : [],
                        // Log that objects are available on window for console inspection
                        consoleInspection: 'Check window.__querySimpleRootDS, window.__querySimpleRootDSMap, window.__querySimpleOriginDS',
                        timestamp: Date.now()
                    });
                    // If map exists, check its view
                    const rootMap = rootDS.map;
                    if (rootMap) {
                        const view = rootMap.view ||
                            ((_g = (_f = rootMap.views) === null || _f === void 0 ? void 0 : _f.getItemAt) === null || _g === void 0 ? void 0 : _g.call(_f, 0)) ||
                            (((_h = rootMap.views) === null || _h === void 0 ? void 0 : _h.length) > 0 ? rootMap.views[0] : null);
                        debugLogger.log('GRAPHICS-LAYER', {
                            event: 'check-root-datasource-map-view',
                            widgetId: props.widgetId,
                            hasView: !!view,
                            viewType: (view === null || view === void 0 ? void 0 : view.type) || 'none',
                            viewId: (view === null || view === void 0 ? void 0 : view.id) || 'none',
                            timestamp: Date.now()
                        });
                    }
                }
            }
        }
        catch (error) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'check-root-datasource-map-error',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
        }
        // Initialize graphics layer lazily if enabled and not already initialized
        if (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) {
            yield onInitializeGraphicsLayer(ds);
            // After initialization, graphicsLayer and mapView props should be updated
            // But since props come from refs, we need to wait for widget re-render
            // For now, use the props that will be updated on next render
        }
        // If in "Add to" or "Remove from" mode and we have accumulated records, re-select them
        // This uses the same logic as after query completion - selectRecordsAndPublish
        // This ensures records are selected both on the map and in the Results tab
        if ((resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection)
            && accumulatedRecords && accumulatedRecords.length > 0) {
            // Use a delay to ensure the DS is fully ready and graphics layer props are updated after widget re-render
            // If graphics layer was just initialized, wait a bit longer for props to update
            const delay = (useGraphicsLayerForHighlight && onInitializeGraphicsLayer) ? 200 : 100;
            setTimeout(() => {
                const featureDS = ds;
                if (featureDS && accumulatedRecords && accumulatedRecords.length > 0) {
                    const recordIds = accumulatedRecords.map(record => record.getId());
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.selectRecordsAndPublish)(props.widgetId, featureDS, recordIds, accumulatedRecords, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            // Update recordsRef so results tab shows accumulated records
                            recordsRef.current = accumulatedRecords;
                            setResultCount(accumulatedRecords.length);
                            debugLogger.log('RESULTS-MODE', {
                                event: 're-selected-accumulated-records-after-query-switch',
                                widgetId: props.widgetId,
                                outputDSId: featureDS.id,
                                recordsCount: accumulatedRecords.length
                            });
                            // Verify what's actually selected in the DS after a delay
                            setTimeout(() => {
                                var _a;
                                const ds = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance().getDataSource(featureDS.id);
                                const selectedInDS = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecords();
                                const selectedIdsInDS = (_a = ds === null || ds === void 0 ? void 0 : ds.getSelectedRecordIds()) !== null && _a !== void 0 ? _a : [];
                                debugLogger.log('RESULTS-MODE', {
                                    event: 'verify-records-after-reselection',
                                    widgetId: props.widgetId,
                                    outputDSId: featureDS.id,
                                    expectedCount: accumulatedRecords.length,
                                    actualSelectedInDS: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) || 0,
                                    selectedIdsInDS: selectedIdsInDS.length,
                                    recordsMatch: (selectedInDS === null || selectedInDS === void 0 ? void 0 : selectedInDS.length) === accumulatedRecords.length
                                });
                            }, 200);
                        }
                        catch (error) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 're-selection-failed-after-switch',
                                widgetId: props.widgetId,
                                error: error instanceof Error ? error.message : 'Unknown error',
                                errorStack: error instanceof Error ? error.stack : undefined
                            });
                        }
                    }))();
                }
            }, 100);
        }
    }), [resultsMode, accumulatedRecords, props.widgetId, useGraphicsLayerForHighlight, onInitializeGraphicsLayer]);
    // Clear results when query item changes (e.g., when new hash parameter triggers different query)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        // Only clear if we're actually switching to a different query (not just re-rendering)
        const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
        // Only clear results when switching queries if we're in "New" mode
        // In "Add to" and "Remove from" modes, we want to preserve accumulated records across query switches
        if (isSwitchingQueries && resultCount > 0 && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            // Store the old configId before updating
            const oldConfigId = previousConfigIdRef.current;
            // Update the ref to track the new query
            previousConfigIdRef.current = queryItem.configId;
            debugLogger.log('RESULTS-MODE', {
                event: 'clearing-results-on-query-switch-new-mode',
                widgetId: props.widgetId,
                oldConfigId,
                newConfigId: queryItem.configId,
                resultsMode
            });
            // Clear immediately when switching queries, but wrap in try-catch to handle
            // race conditions with feature info windows that might be rendering
            try {
                clearResult('query-item-switch-new-mode');
            }
            catch (error) {
                // Log for debugging but don't show to user (framework race condition)
                // The error is in framework code (feature-info.tsx), not our code
                // This can happen if feature-info.tsx is trying to appendChild to a DOM element
                // that gets removed when we clear selection
                debugLogger.log('TASK', {
                    event: 'clear-result-race-condition',
                    error: error instanceof Error ? error.message : String(error),
                    note: 'Likely race condition with feature-info.tsx'
                });
                if (true) {
                    console.warn('Error clearing results (likely race condition with feature info):', error);
                }
                // Don't set error state - this is expected in some scenarios
            }
        }
        else if (isSwitchingQueries) {
            // Just update the ref - don't clear results if in "Add to" or "Remove from" mode or no results
            previousConfigIdRef.current = queryItem.configId;
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'preserving-accumulated-records-on-query-switch',
                    widgetId: props.widgetId,
                    resultsMode,
                    oldConfigId: previousConfigIdRef.current,
                    newConfigId: queryItem.configId,
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
                });
            }
        }
    }, [queryItem.configId, clearResult, resultCount, resultsMode, accumulatedRecords, props.widgetId]);
    const navToForm = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
        if (clearResults) {
            // Use the centralized clearResult method instead of duplicating logic
            yield clearResult('navToForm-clearResults');
            return;
        }
        // Switch to query tab but don't clear results unless explicitly requested
        // Mark as manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab('query');
        // Reset the flag after a short delay
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Only change stage if we're clearing results
        // Otherwise, keep stage at 1 (results available) so results persist
        if (!clearResults && resultCount > 0) {
            setStage(1); // Keep results available
        }
        jimu_core__WEBPACK_IMPORTED_MODULE_1__.lodash.defer(() => {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.focusElementInKeyboardMode)(backBtnRef.current);
        });
    }), [clearResult, resultCount]);
    /**
     * Handles tab switching between Query and Results tabs.
     * Tab switching preserves results state - results remain visible and selected
     * when switching between tabs. Results are only cleared when explicitly
     * clicking the trash can button or when starting a new query.
     *
     * @param tab - The tab to switch to ('query' | 'results')
     * @param event - Optional mouse event to prevent default behavior
     */
    const handleTabChange = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((tab, event) => {
        debugLogger.log('TASK', {
            event: 'tab-change',
            tab,
            currentTab: activeTab,
            resultCount,
            eventType: event === null || event === void 0 ? void 0 : event.type
        });
        if (event) {
            event.preventDefault();
            event.stopPropagation();
        }
        // Don't allow switching to results if there are no results
        if (tab === 'results' && resultCount === 0) {
            debugLogger.log('TASK', {
                event: 'tab-change-blocked',
                reason: 'no-results',
                tab,
                resultCount
            });
            return;
        }
        // Mark this as a manual switch to prevent auto-switch useEffect from interfering
        manualTabSwitchRef.current = true;
        setActiveTab(tab);
        // Reset the flag after a short delay to allow the state update to complete
        // This prevents the auto-switch useEffect from immediately switching back
        setTimeout(() => {
            manualTabSwitchRef.current = false;
        }, 100);
        // Don't change stage here - just switch the view
        // Stage should remain at 1 (results available) when switching between tabs
    }, [resultCount, activeTab]);
    /**
     * Handles form submission when user clicks "Apply" button.
     * Clears old results (if any) by programmatically clicking the trash can button,
     * then executes the query with the provided SQL expression and spatial filter.
     *
     * @param sqlExpr - The SQL expression for attribute filtering
     * @param spatialFilter - The spatial filter object
     * @param runtimeZoomToSelected - Optional runtime override for zoom-to-selected behavior
     */
    const handleFormSubmit = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((sqlExpr, spatialFilter, runtimeZoomToSelected) => __awaiter(this, void 0, void 0, function* () {
        var _a, _b, _c, _d, _e;
        // Clear previous errors when starting a new query
        setSelectionError(null);
        setZoomError(null);
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-start',
            widgetId: props.widgetId,
            resultsMode,
            timestamp: Date.now()
        });
        // Store the runtime zoom override for use by Add to Map action
        lastRuntimeZoomToSelectedRef.current = runtimeZoomToSelected;
        attributeFilterSqlExprObj.current = sqlExpr;
        spatialFilterObj.current = spatialFilter;
        // Load the first page
        const featureDS = outputDS;
        // For "Add to" and "Remove from" modes, use widget-level accumulated records
        // These persist across query switches, unlike query-item-level records
        let existingRecordsForMerge = [];
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
            // Robust capture strategy:
            // 1. Try records from props (already merged by parent)
            // 2. Fallback to currently selected records in DS (captured during mode switch)
            const fromProp = accumulatedRecords || [];
            const fromDS = (outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || [];
            existingRecordsForMerge = fromProp.length > 0 ? fromProp : fromDS;
            debugLogger.log('RESULTS-MODE', {
                event: 'captured-existing-records-diagnostic',
                widgetId: props.widgetId,
                resultsMode,
                fromPropCount: fromProp.length,
                fromDSCount: fromDS.length,
                finalCapturedCount: existingRecordsForMerge.length,
                firstRecordId: ((_b = (_a = existingRecordsForMerge[0]) === null || _a === void 0 ? void 0 : _a.getId) === null || _b === void 0 ? void 0 : _b.call(_a)) || 'none',
                allRecordIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                outputDSId: outputDS.id,
                timestamp: Date.now()
            });
        }
        // For "New" mode, clear old results and graphics layer
        // We call clearResult() directly and AWAIT it to ensure it's finished before query execution starts
        if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
            debugLogger.log('TASK', {
                event: 'handleFormSubmit-clearing-results-for-new-mode',
                widgetId: props.widgetId,
                timestamp: Date.now()
            });
            yield clearResult('handleFormSubmit-new-mode');
        }
        // Set loading stage
        setStage(2);
        // FORCED: Always use SimpleList - fetch ALL records, not just a page
        // Use data source's max record count, or fall back to a large number (10000)
        const maxRecordCount = (_e = (_d = (_c = featureDS).getMaxRecordCount) === null || _d === void 0 ? void 0 : _d.call(_c)) !== null && _e !== void 0 ? _e : 10000;
        let pageSize = maxRecordCount;
        const queryParams = (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.generateQueryParams)(featureDS, sqlExpr, spatialFilter, currentItem, 1, pageSize);
        queryParamRef.current = queryParams;
        debugLogger.log('TASK', {
            event: 'handleFormSubmit-executing-query',
            widgetId: props.widgetId,
            where: queryParams.where,
            resultsMode,
            timestamp: Date.now()
        });
        // Change output ds status to unloaded before use it to load count/records.
        featureDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        featureDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceStatus.Unloaded);
        let queryResultCount = 0; // Capture count from records to use in finally block
        const startTime = performance.now();
        debugLogger.log('TASK', {
            event: 'perf-query-chain-start',
            widgetId: props.widgetId,
            resultsMode,
            where: queryParams.where,
            timestamp: Date.now()
        });
        // PERFORMANCE OPTIMIZATION: Removed redundant executeCountQuery() round-trip.
        // Since we fetch ALL records (pageSize = maxRecordCount), we can just use records.length.
        featureDS.updateQueryParams(queryParamRef.current, props.widgetId);
        const fetchStartTime = performance.now();
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_11__.executeQuery)(props.widgetId, queryItem, featureDS, queryParamRef.current)
            .then((result) => __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c;
            const fetchDurationMs = Math.round(performance.now() - fetchStartTime);
            const processingStartTime = performance.now();
            queryResultCount = ((_a = result.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            debugLogger.log('RESULTS-MODE', {
                event: 'query-execution-complete',
                widgetId: props.widgetId,
                resultsMode,
                recordsReturned: queryResultCount,
                fetchDurationMs,
                existingCapturedCount: existingRecordsForMerge.length,
                timestamp: Date.now()
            });
            let recordsToDisplay = result.records || [];
            let dsToUse = outputDS;
            // Handle "Add to" mode: merge new results with widget-level accumulated records
            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection && result.records && result.records.length > 0) {
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-starting-merge-diagnostic',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        existingIds: existingRecordsForMerge.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        newCount: result.records.length,
                        newIds: result.records.map((r) => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 5),
                        timestamp: Date.now()
                    });
                    // Merge new query results with widget-level accumulated records
                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, // Use outputDS for key generation
                    result.records, existingRecordsForMerge // Use consistently captured records
                    );
                    recordsToDisplay = mergedRecords;
                    // Update widget-level accumulated records so they persist across query switches
                    if (onAccumulatedRecordsChange) {
                        onAccumulatedRecordsChange(mergedRecords);
                    }
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-merge-complete-diagnostic',
                        widgetId: props.widgetId,
                        mergedRecordsCount: mergedRecords.length,
                        mergedIds: mergedRecords.map(r => { var _a; return (_a = r.getId) === null || _a === void 0 ? void 0 : _a.call(r); }).slice(0, 10),
                        timestamp: Date.now()
                    });
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'add-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to normal behavior on error
                    recordsToDisplay = result.records;
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                // Handle "Remove from" mode: remove matching records from widget-level accumulated records
                try {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-starting-merge',
                        widgetId: props.widgetId,
                        existingCount: existingRecordsForMerge.length,
                        removeCount: ((_b = result.records) === null || _b === void 0 ? void 0 : _b.length) || 0
                    });
                    // Check if we have accumulated records to remove from
                    if (existingRecordsForMerge.length === 0) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-accumulated-records',
                            widgetId: props.widgetId,
                            queryRecordsCount: ((_c = result.records) === null || _c === void 0 ? void 0 : _c.length) || 0,
                            note: 'No accumulated records to remove from - no-op'
                        });
                        // No accumulated records, so nothing to remove - show empty results
                        recordsToDisplay = [];
                    }
                    else if (result.records && result.records.length > 0) {
                        // Remove matching records from accumulated records
                        const remainingRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.removeResultsFromAccumulated)(outputDS, // Use outputDS for key generation
                        result.records, existingRecordsForMerge // Use consistently captured records
                        );
                        recordsToDisplay = remainingRecords;
                        // Update widget-level accumulated records
                        if (onAccumulatedRecordsChange) {
                            onAccumulatedRecordsChange(remainingRecords);
                        }
                        // Remove records from origin data source selections (map highlighting)
                        // Also removes graphics from graphics layer if using graphics layer highlighting
                        (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.removeRecordsFromOriginSelections)(props.widgetId, result.records, outputDS, useGraphicsLayerForHighlight, graphicsLayer);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-complete',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            queryRecordsCount: result.records.length,
                            remainingRecordsCount: remainingRecords.length,
                            recordsRemoved: existingRecordsForMerge.length - remainingRecords.length,
                            outputDSId: outputDS.id,
                            widgetLevelRecordsUpdated: true,
                            originSelectionsUpdated: true
                        });
                        // If all records removed, auto-clear (consistent with user expectation)
                        if (remainingRecords.length === 0) {
                            debugLogger.log('RESULTS-MODE', {
                                event: 'remove-mode-all-records-removed',
                                widgetId: props.widgetId,
                                note: 'All accumulated records removed - auto-clearing'
                            });
                            // Clear widget-level accumulated records
                            if (onAccumulatedRecordsChange) {
                                onAccumulatedRecordsChange([]);
                            }
                        }
                    }
                    else {
                        // Query returned no results - nothing to remove
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-no-query-results',
                            widgetId: props.widgetId,
                            existingAccumulatedRecordsCount: existingRecordsForMerge.length,
                            note: 'Query returned no results - no records to remove'
                        });
                        // Keep existing accumulated records displayed
                        recordsToDisplay = existingRecordsForMerge;
                    }
                }
                catch (error) {
                    debugLogger.log('RESULTS-MODE', {
                        event: 'remove-mode-error',
                        widgetId: props.widgetId,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    // Fall back to showing query results on error
                    recordsToDisplay = result.records || [];
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                // For "New" mode, clear widget-level accumulated records
                if (onAccumulatedRecordsChange) {
                    onAccumulatedRecordsChange([]);
                }
            }
            recordsRef.current = recordsToDisplay;
            // Reset selection flag for new query results
            hasSelectedRecordsRef.current = false;
            // Select records in the output DS
            // For "Add to" mode, select merged records
            // For "Remove from" mode, select remaining records (already updated via removeRecordsFromOriginSelections)
            // For "New" mode, select query results
            if (recordsToDisplay && recordsToDisplay.length > 0 && dsToUse) {
                const recordIdsToSelect = recordsToDisplay.map(record => record.getId());
                // For "Remove from" mode, selection was already updated via removeRecordsFromOriginSelections
                // But we still need to select in the outputDS for widget state consistency
                if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection) {
                    // Selection was already updated in origin DSs via removeRecordsFromOriginSelections
                    // Just update outputDS selection for widget state consistency
                    try {
                        if (typeof dsToUse.selectRecordsByIds === 'function') {
                            dsToUse.selectRecordsByIds(recordIdsToSelect, recordsToDisplay);
                        }
                        hasSelectedRecordsRef.current = true;
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-updated',
                            widgetId: props.widgetId,
                            recordCount: recordsToDisplay.length
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-output-ds-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }
                else {
                    // For "Add to" and "New" modes, select records normally
                    setSelectionError(null) // Clear previous errors
                    ;
                    (() => __awaiter(this, void 0, void 0, function* () {
                        try {
                            yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.selectRecordsAndPublish)(props.widgetId, dsToUse, recordIdsToSelect, recordsToDisplay, false, useGraphicsLayerForHighlight, graphicsLayer, mapView);
                            hasSelectedRecordsRef.current = true; // Mark as selected
                            // Dispatch custom selection event so Widget state is updated immediately
                            // This is crucial for hash-based execution where QueryTask handles selection
                            (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.dispatchSelectionEvent)(props.widgetId, recordIdsToSelect, dsToUse, queryItem.configId);
                        }
                        catch (error) {
                            const errorMessage = error instanceof Error ? error.message : 'Failed to select query results';
                            setSelectionError(errorMessage);
                            debugLogger.log('TASK', {
                                event: 'selection-failed',
                                error: errorMessage,
                                errorStack: error instanceof Error ? error.stack : undefined,
                                recordCount: recordIdsToSelect.length
                            });
                        }
                    }))();
                }
            }
            else if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection && recordsToDisplay.length === 0) {
                // All records removed - clear selection
                ;
                (() => __awaiter(this, void 0, void 0, function* () {
                    try {
                        yield (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.clearSelectionInDataSources)(props.widgetId, dsToUse, useGraphicsLayerForHighlight, graphicsLayer);
                        hasSelectedRecordsRef.current = false;
                        // Notify Widget that selection is cleared
                        (0,_selection_utils__WEBPACK_IMPORTED_MODULE_16__.dispatchSelectionEvent)(props.widgetId, [], dsToUse, queryItem.configId);
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-all-records-removed-selection-cleared',
                            widgetId: props.widgetId
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESULTS-MODE', {
                            event: 'remove-mode-clear-selection-error',
                            widgetId: props.widgetId,
                            error: error instanceof Error ? error.message : 'Unknown error'
                        });
                    }
                }))();
            }
            // Mark that query just executed BEFORE updating resultCount
            // This ensures the auto-switch useEffect sees queryJustExecutedRef.current === true
            queryJustExecutedRef.current = true;
            debugLogger.log('TASK', {
                event: 'query-executed-flag-set',
                widgetId: props.widgetId,
                queryItemConfigId: queryItem.configId,
                resultsMode,
                recordsToDisplayCount: recordsToDisplay.length,
                queryResultCount,
                timestamp: Date.now()
            });
            // Update result count
            // For "Add to" and "Remove from" modes, use accumulated/remaining count
            // For "New" mode, use query count
            const newResultCount = resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection || resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection
                ? recordsToDisplay.length
                : queryResultCount;
            setResultCount(newResultCount);
            // INSTANT UI FIX (The "Spinner Bypass"): 
            // Decouple the "Retrieving results..." spinner from asynchronous actions like zooming. 
            // By calling setStage(1) now, the user sees the result list immediately while 
            // the map animation continues in the background.
            setStage(1);
            debugLogger.log('TASK', {
                event: 'perf-processing-complete',
                widgetId: props.widgetId,
                processingDurationMs: Math.round(performance.now() - processingStartTime),
                totalChainDurationMs: Math.round(performance.now() - startTime),
                newResultCount,
                resultsMode,
                timestamp: Date.now()
            });
            // Trigger the existing zoomToFeature data action (same as clicking "Zoom To" in the menu)
            // Use runtime preference if provided, otherwise fall back to config setting (defaults to true)
            const shouldZoom = runtimeZoomToSelected !== undefined
                ? runtimeZoomToSelected
                : (queryItem.zoomToSelected !== false);
            // Use the output DS and merged records
            const recordsForZoom = recordsToDisplay || result.records;
            const dsForZoom = dsToUse || outputDS;
            if (recordsForZoom && recordsForZoom.length > 0 && dsForZoom && shouldZoom) {
                // Create a data set from the appropriate data source and records
                const dataSet = {
                    dataSource: dsForZoom,
                    records: recordsForZoom,
                    name: dsForZoom.getLabel()
                };
                // Get available data actions and find the zoomToFeature action
                return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().getSupportedActions(props.widgetId, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records)
                    .then(actionCategories => {
                    // Look for zoomToFeature action in any category
                    let zoomAction = null;
                    for (const category in actionCategories) {
                        const actions = actionCategories[category];
                        zoomAction = actions.find((action) => action.name === 'zoomToFeature' || action.id === 'zoomToFeature');
                        if (zoomAction)
                            break;
                    }
                    if (zoomAction) {
                        // Execute the same zoom action that works when clicked manually
                        return jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataActionManager.getInstance().executeDataAction(zoomAction, [dataSet], jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataLevel.Records, props.widgetId);
                    }
                    else {
                        return Promise.resolve(false);
                    }
                })
                    .catch(error => {
                    const errorMessage = error instanceof Error ? error.message : 'Failed to zoom to features';
                    setZoomError(errorMessage);
                    debugLogger.log('ZOOM', {
                        event: 'zoom-action-failed',
                        error: errorMessage,
                        errorStack: error instanceof Error ? error.stack : undefined
                    });
                    if (true) {
                        console.error('Error executing zoomToFeature data action', error);
                    }
                    return Promise.resolve(false);
                });
            }
            return Promise.resolve(true);
        }))
            .catch(error => {
            debugLogger.log('TASK', {
                event: 'query-chain-failed-diagnostic',
                widgetId: props.widgetId,
                error: error instanceof Error ? error.message : String(error),
                errorStack: error instanceof Error ? error.stack : undefined,
                timestamp: Date.now()
            });
            setStage(1); // Return to results or form stage even on error
        })
            .finally(() => {
            if ((spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.layer) && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.clearAfterApply)) {
                spatialFilter.layer.removeAll();
            }
            // setStage(1) // Removed from here; now called in the main chain before background actions
        });
    }), [currentItem, queryItem, props.widgetId, outputDS, publishDataClearedMsg, clearResult, resultsMode, accumulatedRecords, onAccumulatedRecordsChange, onClearGraphicsLayer]);
    const { useAttributeFilter, sqlExprObj, useSpatialFilter, spatialFilterTypes, spatialIncludeRuntimeData, spatialRelationUseDataSources } = currentItem;
    const showAttributeFilter = useAttributeFilter && sqlExprObj != null;
    const showSpatialFilter = spatialFilterEnabled && useSpatialFilter && (spatialFilterTypes.length > 0 || spatialIncludeRuntimeData || (spatialRelationUseDataSources === null || spatialRelationUseDataSources === void 0 ? void 0 : spatialRelationUseDataSources.length) > 0);
    // DETECT SWITCH IN RENDER
    const isSwitchingQueries = previousConfigIdRef.current !== queryItem.configId;
    const isVirtualClearActive = isSwitchingQueries && resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
    // Use these "effective" values for the UI
    const effectiveResultCount = isVirtualClearActive ? 0 : resultCount;
    const effectiveRecords = isVirtualClearActive ? [] : (recordsRef.current || []);
    // Create a unique key for the current query result set to help E2E tests detect fresh data
    const resultQueryKey = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return `${queryItem.configId}_${Date.now()}`;
    }, [queryItem.configId, resultCount]);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task h-100', className, { wrapped: wrappedInPopper }), "data-result-query-key": resultQueryKey, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
      ${style}
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceComponent, { useDataSource: useOutputDs, onDataSourceCreated: handleOutputDataSourceCreated, onDataSourceInfoChange: handleOutputDataSourceInfoChange }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tabs, { value: activeTab, onChange: (id) => handleTabChange(id), fill: true, type: 'underline', keepMount: true, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          min-height: 0;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'query', title: getI18nMessage('queryTab'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'query'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
              padding-top: 0 !important;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-form__header mx-4 align-items-center', { 'in-popper': isInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              display: flex;
              padding: 6px 0;
              padding-top: 8px;
              border-bottom: 1px solid var(--sys-color-divider-secondary);
              flex-shrink: 0;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('nav-action align-items-center', { 'd-none': wrappedInPopper }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1 1 0;
                overflow: hidden;
                display: flex;
                align-items: center;
                gap: 4px;
                .jimu-btn {
                  min-width: 26px;
                }
              `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('p-0 mr-2', { 'd-none': total === 1 || !onNavBack }), size: 'sm', type: 'tertiary', icon: true, onClick: onNavBack, "aria-label": getI18nMessage('back'), ref: backBtnRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_14__.ArrowLeftOutlined, { autoFlip: true }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_label__WEBPACK_IMPORTED_MODULE_9__.QueryTaskLabel, { icon: icon, name: displayLabel ? name : '' }), (() => {
                                                    var _a;
                                                    if (!queryItems || queryItems.length <= 1)
                                                        return null;
                                                    // Get current query's origin data source ID
                                                    const currentOriginDSId = (_a = queryItem.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId;
                                                    if (!currentOriginDSId)
                                                        return null;
                                                    // Find all queries from the same origin data source that have shortIds
                                                    const sameLayerQueries = queryItems.filter(item => {
                                                        var _a;
                                                        return ((_a = item.useDataSource) === null || _a === void 0 ? void 0 : _a.dataSourceId) === currentOriginDSId &&
                                                            item.shortId &&
                                                            item.shortId.trim() !== '';
                                                    });
                                                    // Only show info button if there are queries with shortIds
                                                    if (sameLayerQueries.length === 0)
                                                        return null;
                                                    // Build tooltip content
                                                    const queryLines = sameLayerQueries.map(item => {
                                                        const queryName = getQueryDisplayName(item);
                                                        return `${queryName}: #${item.shortId}=value or ?${item.shortId}=value`;
                                                    });
                                                    const tooltipTitle = `This layer can be searched using the shortIds ${sameLayerQueries.map(q => q.shortId).join(' and ')} using #shortId=value or ?shortId=value in the URL.\n\n${queryLines.join('\n')}`;
                                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: tooltipTitle, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": 'Hash parameter search information', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex-shrink: 0;
                        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }));
                                                })()] }), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { title: getI18nMessage('clearResult'), placement: 'bottom', children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { ref: clearResultBtnRef, size: 'sm', type: 'tertiary', "aria-label": getI18nMessage('clearResult'), icon: true, className: 'ml-auto py-0', onClick: clearResult, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash__WEBPACK_IMPORTED_MODULE_4__.TrashOutlined, {}) }) }))] }), (() => {
                                    // Only show dropdowns if multiple queries exist
                                    if (!queryItems || queryItems.length <= 1) {
                                        return null;
                                    }
                                    // Build flat list of all queries with their display info
                                    // For grouped queries, use group display name (only show once per group)
                                    const queryOptions = [];
                                    // Track which groups we've already added to avoid duplicates
                                    const addedGroups = new Set();
                                    queryItems.forEach((item, idx) => {
                                        var _a, _b, _c;
                                        if (item.groupId) {
                                            // For grouped queries, use group display name (only add once per group)
                                            if (!addedGroups.has(item.groupId)) {
                                                addedGroups.add(item.groupId);
                                                const groupDisplayName = ((_a = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _a === void 0 ? void 0 : _a.displayName) ||
                                                    ((_c = (_b = groups === null || groups === void 0 ? void 0 : groups[item.groupId]) === null || _b === void 0 ? void 0 : _b.items[0]) === null || _c === void 0 ? void 0 : _c.name) ||
                                                    item.name ||
                                                    `Group ${item.groupId}`;
                                                queryOptions.push({
                                                    configId: item.configId,
                                                    displayName: groupDisplayName,
                                                    groupId: item.groupId,
                                                    index: idx
                                                });
                                            }
                                        }
                                        else {
                                            // Ungrouped query - use item.name for first dropdown (not searchAlias/jimuFieldName)
                                            queryOptions.push({
                                                configId: item.configId,
                                                displayName: item.name || getQueryDisplayName(item),
                                                groupId: null,
                                                index: idx
                                            });
                                        }
                                    });
                                    // Determine currently selected query
                                    const currentQueryItem = queryItem;
                                    const currentQueryGroupId = currentQueryItem.groupId || null;
                                    const isGroupedQuery = currentQueryGroupId !== null;
                                    // Find the option index for the current query
                                    const currentOptionIndex = queryOptions.findIndex(opt => {
                                        if (isGroupedQuery) {
                                            return opt.groupId === currentQueryGroupId;
                                        }
                                        else {
                                            return opt.configId === currentQueryItem.configId;
                                        }
                                    });
                                    debugLogger.log('GROUP', {
                                        event: 'rendering-dropdowns',
                                        totalQueries: queryItems.length,
                                        queryOptionsCount: queryOptions.length,
                                        currentQueryGroupId,
                                        isGroupedQuery,
                                        currentOptionIndex,
                                        selectedGroupId,
                                        selectedGroupQueryIndex,
                                        currentQueryConfigId: currentQueryItem.configId
                                    });
                                    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.Fragment, { children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 4px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      font-size: 0.875rem;
                      font-weight: 500;
                      color: var(--sys-color-text-primary);
                      margin-bottom: 4px;
                      display: block;
                    `, children: getI18nMessage('searchLayer') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: currentOptionIndex >= 0 ? currentOptionIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const optionIndex = parseInt(e.target.value);
                                                            const selectedOption = queryOptions[optionIndex];
                                                            debugLogger.log('GROUP', {
                                                                event: 'query-option-selected',
                                                                optionIndex,
                                                                selectedOption,
                                                                isGrouped: selectedOption.groupId !== null
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-layer-switch-new-mode');
                                                            }
                                                            if (selectedOption.groupId) {
                                                                // Grouped query selected - set group and first query in group
                                                                if (onGroupChange) {
                                                                    onGroupChange(selectedOption.groupId);
                                                                }
                                                                if (onGroupQueryChange) {
                                                                    onGroupQueryChange(0);
                                                                }
                                                            }
                                                            else {
                                                                // Ungrouped query selected - clear group selection
                                                                if (onGroupChange) {
                                                                    onGroupChange(null);
                                                                }
                                                                if (onUngroupedChange) {
                                                                    // Find the ungrouped index
                                                                    const ungroupedIndex = (_a = ungrouped === null || ungrouped === void 0 ? void 0 : ungrouped.findIndex(({ item }) => item.configId === selectedOption.configId)) !== null && _a !== void 0 ? _a : -1;
                                                                    if (ungroupedIndex >= 0) {
                                                                        onUngroupedChange(ungroupedIndex);
                                                                    }
                                                                    else {
                                                                        // Fallback: use the index from queryItems
                                                                        debugLogger.log('GROUP', {
                                                                            event: 'ungrouped-fallback-to-index',
                                                                            selectedOptionIndex: selectedOption.index
                                                                        });
                                                                        if (onQueryChange) {
                                                                            onQueryChange(selectedOption.index);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }), children: queryOptions.map((option, idx) => {
                                                            debugLogger.log('GROUP', {
                                                                event: 'rendering-query-option',
                                                                index: idx,
                                                                configId: option.configId,
                                                                displayName: option.displayName,
                                                                groupId: option.groupId
                                                            });
                                                            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: option.displayName }, option.configId));
                                                        }) })] }), isGroupedQuery && currentQueryGroupId && groups && groups[currentQueryGroupId] && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      padding: 4px 16px;
                      flex-shrink: 0;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        margin-bottom: 4px;
                        display: block;
                      `, children: "Search Alias" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Select, { size: "sm", value: selectedGroupQueryIndex !== undefined ? selectedGroupQueryIndex : 0, onChange: (e) => __awaiter(this, void 0, void 0, function* () {
                                                            var _a;
                                                            const newIndex = parseInt(e.target.value);
                                                            debugLogger.log('GROUP', {
                                                                event: 'group-query-selected',
                                                                groupId: currentQueryGroupId,
                                                                groupQueryIndex: newIndex,
                                                                queryItemConfigId: (_a = groups[currentQueryGroupId].items[newIndex]) === null || _a === void 0 ? void 0 : _a.configId,
                                                                queryDisplayName: getQueryDisplayName(groups[currentQueryGroupId].items[newIndex])
                                                            });
                                                            // START CLEARING IMMEDIATELY IF SWITCHING
                                                            if (resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection) {
                                                                yield clearResult('dropdown-alias-switch-new-mode');
                                                            }
                                                            if (onGroupQueryChange) {
                                                                onGroupQueryChange(newIndex);
                                                            }
                                                        }), children: groups[currentQueryGroupId].items.map((item, idx) => ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: idx, children: getQueryDisplayName(item) }, item.configId))) })] }))] }));
                                })(), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                    padding: 8px 16px;
                    flex-shrink: 0;
                  `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "d-flex align-items-center", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                      gap: 0.5rem;
                      flex-wrap: nowrap;
                    `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "title2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                        font-size: 0.875rem;
                        font-weight: 500;
                        color: var(--sys-color-text-primary);
                        white-space: nowrap;
                        flex-shrink: 0;
                      `, children: [getI18nMessage('results'), ":"] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tooltip, { placement: 'bottom', css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `white-space: pre-line;`, title: getI18nMessage('resultsModeDesc'), children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: 'sm', icon: true, type: 'tertiary', "aria-label": getI18nMessage('resultsModeDesc'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `flex-shrink: 0;`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_info__WEBPACK_IMPORTED_MODULE_3__.InfoOutlined, { color: 'var(--sys-color-primary-main)', size: 's' }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { role: "radiogroup", "aria-label": getI18nMessage('resultsMode'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          display: flex;
                          gap: 4px;
                          align-items: stretch;
                          flex: 1;
                          min-width: 0;
                        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode: resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection, "aria-label": `${getI18nMessage('createNewResults')}: ${((_b = getI18nMessage('resultsModeDesc').split('\n')[1]) === null || _b === void 0 ? void 0 : _b.trim()) || ''}`, title: getI18nMessage('createNewResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeNew') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection ? 'primary' : 'default', onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Add to" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                const recordsToCapture = (effectiveRecords && effectiveRecords.length > 0)
                                                                    ? effectiveRecords
                                                                    : ((outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || []);
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection &&
                                                                    recordsToCapture.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, recordsToCapture, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCapture.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection, "aria-label": `${getI18nMessage('addToCurrentResults')}: ${((_c = getI18nMessage('resultsModeDesc').split('\n')[2]) === null || _c === void 0 ? void 0 : _c.trim()) || ''}`, title: getI18nMessage('addToCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeAdd') }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: "sm", variant: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'contained' : 'outlined', color: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection ? 'primary' : 'default', disabled: !accumulatedRecords || accumulatedRecords.length === 0, onClick: () => {
                                                                const newMode = _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection;
                                                                const previousMode = resultsMode || _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection;
                                                                debugLogger.log('RESULTS-MODE', {
                                                                    event: 'button-mode-changed',
                                                                    widgetId: props.widgetId,
                                                                    queryItemConfigId: queryItem.configId,
                                                                    previousMode,
                                                                    newMode,
                                                                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                                                                    timestamp: new Date().toISOString()
                                                                });
                                                                // If switching FROM "New" TO "Remove from" mode and we have current results,
                                                                // merge them with existing accumulated records before changing mode
                                                                // (same pattern as "Add to" mode)
                                                                const recordsToCaptureForRemove = (effectiveRecords && effectiveRecords.length > 0)
                                                                    ? effectiveRecords
                                                                    : ((outputDS === null || outputDS === void 0 ? void 0 : outputDS.getSelectedRecords()) || []);
                                                                if (previousMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection &&
                                                                    newMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection &&
                                                                    recordsToCaptureForRemove.length > 0 &&
                                                                    outputDS &&
                                                                    onAccumulatedRecordsChange) {
                                                                    const existingAccumulated = accumulatedRecords || [];
                                                                    // Merge current results with existing accumulated records
                                                                    const mergedRecords = (0,_results_management_utils__WEBPACK_IMPORTED_MODULE_12__.mergeResultsIntoAccumulated)(outputDS, recordsToCaptureForRemove, existingAccumulated);
                                                                    debugLogger.log('RESULTS-MODE', {
                                                                        event: 'capturing-current-results-on-mode-switch-to-remove',
                                                                        widgetId: props.widgetId,
                                                                        previousMode,
                                                                        newMode,
                                                                        capturedRecordsCount: recordsToCaptureForRemove.length,
                                                                        existingAccumulatedCount: existingAccumulated.length,
                                                                        mergedRecordsCount: mergedRecords.length
                                                                    });
                                                                    onAccumulatedRecordsChange(mergedRecords);
                                                                }
                                                                if (onResultsModeChange) {
                                                                    onResultsModeChange(newMode);
                                                                }
                                                            }, "aria-pressed": resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.RemoveFromSelection, "aria-label": `${getI18nMessage('removeFromCurrentResults')}: ${((_d = getI18nMessage('resultsModeDesc').split('\n')[3]) === null || _d === void 0 ? void 0 : _d.trim()) || ''}`, title: (!accumulatedRecords || accumulatedRecords.length === 0)
                                                                ? getI18nMessage('resultsModeDisabledRemove')
                                                                : getI18nMessage('removeFromCurrentResults'), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                          flex: 1;
                          font-size: 0.75rem;
                          padding: 4px 8px;
                          min-height: 28px;
                          white-space: nowrap;
                          text-overflow: ellipsis;
                          overflow: hidden;
                        `, children: getI18nMessage('resultsModeRemove') })] })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `results-mode-description-${props.widgetId}`, className: "sr-only", "aria-live": "polite", role: "status", children: resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.NewSelection
                                                ? getI18nMessage('createNewResults')
                                                : resultsMode === _config__WEBPACK_IMPORTED_MODULE_5__.SelectionType.AddToSelection
                                                    ? getI18nMessage('addToCurrentResults')
                                                    : getI18nMessage('removeFromCurrentResults') })] }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
              min-height: 0;
            `, children: [enabled && dsExists && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  min-height: 0;
                  overflow: hidden;
                `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_form__WEBPACK_IMPORTED_MODULE_6__.QueryTaskForm, Object.assign({}, otherProps, { configId: queryItem.configId, outputDS: outputDS, datasourceReady: dataSource != null, spatialFilterEnabled: spatialFilterEnabled, dataActionFilter: dataActionFilter, onFormSubmit: handleFormSubmit, initialInputValue: initialInputValue, onHashParameterUsed: onHashParameterUsed, queryItemShortId: queryItem.shortId })) })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.DataSourceTip, { widgetId: props.widgetId, useDataSource: queryItem.useDataSource, showMessage: true, onStatusChange: handleStatusChange, onDataSourceCreated: handleDataSourceCreated })] })] }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Tab, { id: 'results', title: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { children: [getI18nMessage('resultsTab'), effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  margin-left: 6px;
                  font-size: 0.75rem;
                  opacity: 0.7;
                `, children: ["(", effectiveResultCount, ")"] }))] }), disabled: effectiveResultCount === 0, children: effectiveResultCount > 0 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)('query-task__content', {
                                [jimu_ui__WEBPACK_IMPORTED_MODULE_2__.FOCUSABLE_CONTAINER_CLASS]: isInPopper && activeTab === 'results'
                            }), css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 0;
                height: 100%;
                padding-top: 0 !important;
              `, onClick: (e) => {
                                // Prevent clicks from bubbling up when Results tab is active
                                if (activeTab === 'results') {
                                    e.stopPropagation();
                                }
                            }, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result__WEBPACK_IMPORTED_MODULE_7__.QueryTaskResult, { widgetId: props.widgetId, queryItem: queryItem, queryParams: queryParamRef.current, resultCount: effectiveResultCount, maxPerPage: (_e = dataSource === null || dataSource === void 0 ? void 0 : dataSource.getMaxRecordCount) === null || _e === void 0 ? void 0 : _e.call(dataSource), records: effectiveRecords, outputDS: outputDS, runtimeZoomToSelected: lastRuntimeZoomToSelectedRef.current, resultsMode: resultsMode, useGraphicsLayerForHighlight: useGraphicsLayerForHighlight, graphicsLayer: graphicsLayer, mapView: mapView, accumulatedRecords: accumulatedRecords, onAccumulatedRecordsChange: onAccumulatedRecordsChange, onNavBack: (...args_1) => __awaiter(this, [...args_1], void 0, function* (clearResults = false) {
                                    // Handle navigation from QueryTaskResult
                                    // If clearResults is true, clear everything and go to query tab
                                    // If false, just switch to query tab without clearing
                                    if (clearResults) {
                                        hasSelectedRecordsRef.current = false; // Reset flag when clearing
                                        yield navToForm(true);
                                    }
                                    else {
                                        // Just switch tabs, don't clear results
                                        // Mark as manual switch to prevent auto-switch useEffect from interfering
                                        manualTabSwitchRef.current = true;
                                        setActiveTab('query');
                                        // Reset the flag after a short delay
                                        setTimeout(() => {
                                            manualTabSwitchRef.current = false;
                                        }, 100);
                                    }
                                }) }, `${queryItem.configId}-${queryExecutionKeyRef.current}`) })) })] }), (selectionError || zoomError) && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 0 16px;
          margin-top: 8px;
        `, children: [selectionError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: selectionError, onDismiss: () => setSelectionError(null) })), zoomError && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_8__.ErrorMessage, { error: zoomError, onDismiss: () => setZoomError(null) }))] })), stage === 2 && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 1000;
          background-color: rgba(255, 255, 255, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_loading_result__WEBPACK_IMPORTED_MODULE_15__.LoadingResult, {}) }))] }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts":
/*!*************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/query-utils.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineFields: () => (/* binding */ combineFields),
/* harmony export */   executeCountQuery: () => (/* binding */ executeCountQuery),
/* harmony export */   executeQuery: () => (/* binding */ executeQuery),
/* harmony export */   generateQueryParams: () => (/* binding */ generateQueryParams),
/* harmony export */   getPopupTemplate: () => (/* binding */ getPopupTemplate),
/* harmony export */   sanitizeQueryInput: () => (/* binding */ sanitizeQueryInput),
/* harmony export */   sanitizeSqlExpression: () => (/* binding */ sanitizeSqlExpression)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



function combineFields(resultDisplayFields, resultTitleExpression, idField) {
    const fields = new Set();
    resultDisplayFields === null || resultDisplayFields === void 0 ? void 0 : resultDisplayFields.forEach(item => fields.add(item));
    if (resultTitleExpression) {
        const templates = resultTitleExpression.match(/\{\w*\}/g);
        if ((templates === null || templates === void 0 ? void 0 : templates.length) > 0) {
            templates.forEach(item => fields.add(item.substring(1, item.length - 1)));
        }
    }
    if (idField) {
        fields.add(idField);
    }
    return Array.from(fields);
}
/**
 * Sanitizes user input for query tasks.
 * 1. Strips leading and trailing whitespace.
 * 2. Prevents basic SQL injection by escaping single quotes.
 * 3. Handles empty or whitespace-only strings.
 *
 * @param input - The raw user input string
 * @returns Sanitized string or null if input is empty
 */
function sanitizeQueryInput(input) {
    if (!input || typeof input !== 'string') {
        return null;
    }
    const trimmed = input.trim();
    if (trimmed === '') {
        return null;
    }
    // Basic SQL escaping: replace single quotes with double single quotes
    // This is a safety measure in case jimu-core's getArcGISSQL fails to catch something.
    return trimmed.replace(/'/g, "''");
}
/**
 * Sanitizes all values within an IMSqlExpression object.
 *
 * @param sqlExpr - The raw SQL expression object
 * @returns A new sanitized IMSqlExpression object
 */
function sanitizeSqlExpression(sqlExpr) {
    if (!sqlExpr || !sqlExpr.parts) {
        return sqlExpr;
    }
    let sanitizedExpr = sqlExpr;
    sqlExpr.parts.forEach((part, index) => {
        var _a;
        if (part.type === 'SINGLE' && ((_a = part.valueOptions) === null || _a === void 0 ? void 0 : _a.value) !== undefined) {
            const rawValue = part.valueOptions.value;
            const sanitizedValue = sanitizeQueryInput(String(rawValue));
            if (sanitizedValue !== rawValue) {
                sanitizedExpr = sanitizedExpr.setIn(['parts', index, 'valueOptions', 'value'], sanitizedValue);
            }
        }
    });
    return sanitizedExpr;
}
function getPopupTemplate(outputDS, queryItem) {
    return __awaiter(this, void 0, void 0, function* () {
        var _a;
        const { resultFieldsType, resultDisplayFields, resultTitleExpression = '' } = queryItem;
        const currentOriginDs = outputDS.getOriginDataSources()[0];
        const popupInfo = currentOriginDs.getPopupInfo();
        if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes) {
            let fields;
            if (resultDisplayFields == null) {
                const fieldsInContent = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.getFieldInfosInPopupContent)(popupInfo);
                if (fieldsInContent.length > 0) {
                    const uniqueFields = new Set(fieldsInContent.map(ele => ele.fieldName));
                    fields = Array.from(uniqueFields);
                }
                else {
                    // return all fields by default
                    const allFieldsSchema = outputDS.getSchema();
                    fields = (allFieldsSchema === null || allFieldsSchema === void 0 ? void 0 : allFieldsSchema.fields) ? Object.values(allFieldsSchema.fields).map(field => field.jimuName) : [];
                }
            }
            else {
                fields = resultDisplayFields.asMutable({ deep: true });
            }
            if (popupInfo) {
                const fieldInfos = [];
                fields.forEach(field => {
                    const fieldInfo = popupInfo.fieldInfos.find(fieldInfo => fieldInfo.fieldName === field);
                    if (fieldInfo) {
                        fieldInfo.visible = true;
                        fieldInfos.push(fieldInfo);
                    }
                    else {
                        fieldInfos.push({
                            fieldName: field,
                            label: field
                        });
                    }
                });
                return {
                    popupTemplate: {
                        fieldInfos,
                        content: [{
                                type: 'fields'
                            }],
                        title: resultTitleExpression
                    }
                };
            }
            return {
                popupTemplate: {
                    fieldInfos: fields.map(field => ({
                        fieldName: field,
                        label: field
                    })),
                    content: [{
                            type: 'fields'
                        }],
                    title: resultTitleExpression
                }
            };
        }
        // the source layer will provide popup info
        let layerObject;
        if (currentOriginDs.layer) {
            layerObject = currentOriginDs.layer;
        }
        else {
            layerObject = yield currentOriginDs.createJSAPILayerByDataSource();
        }
        if (layerObject) {
            yield layerObject.load();
        }
        return { defaultPopupTemplate: ((_a = layerObject === null || layerObject === void 0 ? void 0 : layerObject.associatedLayer) === null || _a === void 0 ? void 0 : _a.defaultPopupTemplate) || (layerObject === null || layerObject === void 0 ? void 0 : layerObject.defaultPopupTemplate) };
    });
}
function generateQueryParams(outputDS, sqlExpr, spatialFilter, queryItem, page, pageSize) {
    var _a, _b, _c, _d, _e;
    const currentQueryDsJson = outputDS.getDataSourceJson();
    const currentOriginDs = outputDS.getOriginDataSources()[0];
    const isLocalDs = currentQueryDsJson === null || currentQueryDsJson === void 0 ? void 0 : currentQueryDsJson.isDataInDataSourceInstance;
    if (isLocalDs) {
        outputDS.setSourceRecords(currentOriginDs.getSourceRecords());
    }
    const { useAttributeFilter, useSpatialFilter, sortOptions, resultFieldsType, resultDisplayFields, resultTitleExpression } = queryItem;
    // DETERMINE MINIMAL FIELDS (The "Field Shredder" Optimization)
    // To achieve performance parity with Web AppBuilder, we must avoid fetching every 
    // column in the database (* or all). We surgically request only the fields 
    // needed for the Title, the Attribute List, and the ID field.
    let outputFields = [];
    if (resultFieldsType === _config__WEBPACK_IMPORTED_MODULE_1__.FieldsType.SelectAttributes && resultDisplayFields) {
        outputFields = combineFields(resultDisplayFields, resultTitleExpression || '', outputDS.getIdField());
    }
    else {
        // Popup mode: Get only visible fields from popup info
        const popupInfo = currentOriginDs.getPopupInfo();
        const fieldNames = Object.values((_a = currentOriginDs.getSchema().fields) !== null && _a !== void 0 ? _a : {}).map(f => f.name);
        const validFieldInfos = (_b = popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) === null || _b === void 0 ? void 0 : _b.filter(fieldInfo => fieldInfo.visible !== false && fieldNames.includes(fieldInfo.fieldName));
        outputFields = (validFieldInfos === null || validFieldInfos === void 0 ? void 0 : validFieldInfos.map(fieldInfo => fieldInfo.fieldName)) || [];
        // Always ensure ID field is included
        const idField = outputDS.getIdField();
        if (idField && !outputFields.includes(idField)) {
            outputFields.push(idField);
        }
    }
    const mergedQueryParams = outputDS.mergeQueryParams((_c = currentOriginDs.getCurrentQueryParams()) !== null && _c !== void 0 ? _c : {}, {
        where: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpr, outputDS).sql : '1=1',
        sqlExpression: (useAttributeFilter && (sqlExpr === null || sqlExpr === void 0 ? void 0 : sqlExpr.sql)) ? sqlExpr : null,
        // FORCE minimal fields here to override any framework "*" or "all"
        outFields: outputFields
    });
    // PERFORMANCE OPTIMIZATION: Universal SQL Optimizer
    // We normalize the user's input to UPPERCASE to ensure case-insensitivity while 
    // unwrapping any LOWER() function around the field name. This allows the database 
    // to use its attribute indexes (SARGable query).
    if (mergedQueryParams.where && mergedQueryParams.where.includes('LOWER(')) {
        const optimizedWhere = mergedQueryParams.where.replace(/LOWER\(([^)]+)\)\s*(=|LIKE)\s*'([^']*)'/gi, (match, field, operator, value) => {
            // Normalize both sides to UPPERCASE. This works for ANY field name.
            // We keep the field name "naked" so the index is used.
            return `${field} ${operator} '${value.toUpperCase()}'`;
        });
        if (optimizedWhere !== mergedQueryParams.where) {
            console.log(`[QUERYSIMPLE-PERF] Universal SQL Optimization: ${mergedQueryParams.where} -> ${optimizedWhere}`);
            mergedQueryParams.where = optimizedWhere;
        }
    }
    // compose query params for query
    const queryParams = Object.assign({ 
        // url: ds.url,
        returnGeometry: true, 
        /**
         * PERFORMANCE OPTIMIZATION: Force lower precision for all display queries.
         */
        maxAllowableOffset: 0.1, page, 
        // Limit pageSize to a sane default if not provided or too large
        pageSize: (pageSize && pageSize < 1000) ? pageSize : 1000 }, mergedQueryParams);
    // Final override to ensure no "*" leaks through from any merge operation
    if (!queryParams.outFields || queryParams.outFields.includes('*')) {
        queryParams.outFields = outputFields;
    }
    // Diagnostic log: Show exactly WHICH fields are being sent
    console.log(`[QUERYSIMPLE-PERF] Requesting data: 
    - Fields Count: ${(_d = queryParams.outFields) === null || _d === void 0 ? void 0 : _d.length} 
    - Fields: ${(_e = queryParams.outFields) === null || _e === void 0 ? void 0 : _e.join(', ')}
    - PageSize: ${queryParams.pageSize}
    - Offset: ${queryParams.maxAllowableOffset}`);
    if (useSpatialFilter && (spatialFilter === null || spatialFilter === void 0 ? void 0 : spatialFilter.geometry)) {
        const { geometry, relation = _config__WEBPACK_IMPORTED_MODULE_1__.SpatialRelation.Intersect, buffer } = spatialFilter;
        const spatialQueryParams = {
            geometryType: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.changeJSAPIGeometryTypeToRestAPIGeometryType(geometry.type),
            geometry: geometry.toJSON(),
            spatialRel: _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPISpatialRelToDsSpatialRel[relation],
            distance: buffer === null || buffer === void 0 ? void 0 : buffer.distance,
            units: (buffer === null || buffer === void 0 ? void 0 : buffer.unit) ? _config__WEBPACK_IMPORTED_MODULE_1__.mapJSAPIUnitToDsUnit[buffer.unit] : undefined
        };
        Object.assign(queryParams, spatialQueryParams);
    }
    if ((sortOptions === null || sortOptions === void 0 ? void 0 : sortOptions.length) > 0) {
        Object.assign(queryParams, {
            orderByFields: sortOptions.map(item => `${item.jimuFieldName} ${item.order}`)
        });
    }
    return queryParams;
}
function executeCountQuery(widgetId, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const result = yield outputDS.loadCount(queryParams, { widgetId, refresh: true });
        return result != null ? result : 0;
    });
}
function executeQuery(widgetId, queryItem, outputDS, queryParams) {
    return __awaiter(this, void 0, void 0, function* () {
        const popupInfo = outputDS.getPopupInfo();
        const layerDefinition = outputDS.getLayerDefinition();
        const getDefaultFieldInfos = () => {
            var _a;
            return [
                { fieldName: (_a = layerDefinition === null || layerDefinition === void 0 ? void 0 : layerDefinition.objectIdField) !== null && _a !== void 0 ? _a : 'objectid', label: 'OBJECTID', tooltip: '', visible: true }
            ];
        };
        const fieldInfos = ((fieldInfos) => (fieldInfos.length ? fieldInfos : getDefaultFieldInfos()))(((popupInfo === null || popupInfo === void 0 ? void 0 : popupInfo.fieldInfos) || []).filter((i) => i.visible));
        // const fields = outputDS.getSchema()?.fields
        // let selectedFieldNames
        // if (queryItem.resultFieldsType === FieldsType.SelectAttributes) {
        //   selectedFieldNames = [].concat(queryItem.resultDisplayFields, queryItem.resultTitleFields)
        // } else {
        //   selectedFieldNames = fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        // }
        // const selectedFieldJimuNames = fields
        //   ? Object.keys(fields).filter((jimuName) => selectedFieldNames.includes(fields[jimuName].name))
        //   : []
        // outputDS.setSelectedFields(selectedFieldJimuNames)
        const startTime = performance.now();
        let records = yield outputDS.load(queryParams, { widgetId });
        const fetchTime = performance.now() - startTime;
        if (records == null) {
            records = [];
        }
        const originDs = outputDS.getOriginDataSources()[0];
        const layerStartTime = performance.now();
        const layerObject = yield getLayerObject(originDs);
        const layerTime = performance.now() - layerStartTime;
        console.log(`[QUERYSIMPLE-PERF] executeQuery complete. Fetch: ${Math.round(fetchTime)}ms, Layer: ${Math.round(layerTime)}ms, Total: ${Math.round(performance.now() - startTime)}ms, Count: ${records.length}`);
        records.forEach((record) => {
            const feature = record.feature;
            if (layerObject) {
                feature.sourceLayer = layerObject.associatedLayer || layerObject;
            }
            feature.layer = feature.sourceLayer;
        });
        const queryResult = {
            records,
            fields: fieldInfos.map((fieldInfo) => fieldInfo.fieldName)
        };
        // publish message
        const dataRecordSetChangeMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordSetChangeMessage(widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.RecordSetChangeType.CreateUpdate, [{
                records: outputDS.getAllLoadedRecords(),
                fields: queryResult.fields,
                dataSource: outputDS,
                name: outputDS.id,
                label: outputDS.getLabel()
            }]);
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(dataRecordSetChangeMessage);
        return queryResult;
    });
}
function getLayerObject(dataSource) {
    return __awaiter(this, void 0, void 0, function* () {
        const layerObject = yield dataSource.createJSAPILayerByDataSource();
        // layerObject may be undefined if the data source is added by URL
        if (layerObject) {
            yield layerObject.load();
        }
        return layerObject;
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/results-management-utils.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearAccumulatedResults: () => (/* binding */ clearAccumulatedResults),
/* harmony export */   createAccumulatedResultsDataSource: () => (/* binding */ createAccumulatedResultsDataSource),
/* harmony export */   getRecordKey: () => (/* binding */ getRecordKey),
/* harmony export */   mergeResultsIntoAccumulated: () => (/* binding */ mergeResultsIntoAccumulated),
/* harmony export */   removeRecordsFromOriginSelections: () => (/* binding */ removeRecordsFromOriginSelections),
/* harmony export */   removeResultsFromAccumulated: () => (/* binding */ removeResultsFromAccumulated)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/**
 * Utility functions for managing results accumulation in QuerySimple widget.
 * Handles "Add to" and "Remove from" modes for accumulating query results.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_1__.createQuerySimpleDebugLogger)();
/**
 * Generates a composite key for a record that includes both origin data source ID and objectId.
 * This ensures uniqueness across different layers that may have the same objectId.
 *
 * @param record - The feature data record
 * @param outputDS - The output data source containing the record
 * @returns Composite key string: `${originDSId}_${objectId}`
 */
function getRecordKey(record, outputDS) {
    var _a;
    const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
    const originDSId = (originDS === null || originDS === void 0 ? void 0 : originDS.id) || outputDS.id; // Fallback to outputDS if no origin
    const objectId = record.getId();
    const key = `${originDSId}_${objectId}`;
    debugLogger.log('RESULTS-MODE', {
        event: 'record-key-generated',
        originDSId,
        objectId,
        key,
        hasOriginDS: !!originDS
    });
    return key;
}
/**
 * Creates an accumulated results data source for storing merged query results.
 * This data source is widget-level and persists across multiple queries.
 *
 * @param widgetId - The widget ID
 * @param originDS - The origin data source to use as the base
 * @returns The created accumulated results data source
 */
function createAccumulatedResultsDataSource(widgetId, originDS) {
    return __awaiter(this, void 0, void 0, function* () {
        const accumulatedDSId = `${widgetId}_accumulated_results`;
        debugLogger.log('RESULTS-MODE', {
            event: 'creating-accumulated-ds',
            widgetId,
            accumulatedDSId,
            originDSId: originDS.id
        });
        // Check if data source already exists
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        let accumulatedDS = dsManager.getDataSource(accumulatedDSId);
        if (accumulatedDS) {
            debugLogger.log('RESULTS-MODE', {
                event: 'accumulated-ds-already-exists',
                accumulatedDSId
            });
            return accumulatedDS;
        }
        // Get origin data source JSON to create output data source
        const originDataSourceJson = originDS.getDataSourceJson();
        // Create output data source JSON similar to how query items create output DS
        const outputDataSourceJson = {
            id: accumulatedDSId,
            label: 'Accumulated Results',
            type: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.type,
            geometryType: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.geometryType,
            url: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.url,
            itemId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.itemId,
            portalUrl: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.portalUrl,
            originDataSources: [{
                    dataSourceId: originDS.id,
                    mainDataSourceId: originDS.id,
                    rootDataSourceId: originDS.id
                }],
            layerId: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.layerId,
            isDataInDataSourceInstance: originDataSourceJson === null || originDataSourceJson === void 0 ? void 0 : originDataSourceJson.isDataInDataSourceInstance,
            isOutputFromWidget: true
        };
        // Create the data source using DataSourceManager
        // Note: This follows the pattern from setting.tsx for creating output data sources
        accumulatedDS = dsManager.createDataSourceByDataSourceJson(outputDataSourceJson);
        // Set initial status
        accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
        debugLogger.log('RESULTS-MODE', {
            event: 'accumulated-ds-created',
            accumulatedDSId,
            originDSId: originDS.id,
            status: accumulatedDS.getStatus()
        });
        return accumulatedDS;
    });
}
/**
 * Merges new query results with existing records.
 * Deduplicates records using composite keys (originDSId_objectId).
 *
 * This function merges new records with existing records that were captured
 * before the query executed. The caller is responsible for storing the merged
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param newRecords - New records to merge in
 * @param existingRecords - Existing records captured before query execution (optional, defaults to empty array)
 * @returns Array of all merged records (existing + new unique records)
 */
function mergeResultsIntoAccumulated(outputDS, newRecords, existingRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'merging-results-start',
        outputDSId: outputDS.id,
        existingRecordsCount: existingRecords.length,
        newRecordsCount: newRecords.length
    });
    // Build Set of existing record keys for fast lookup
    const existingKeys = new Set(existingRecords.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'existing-records-check',
        existingRecordsCount: existingRecords.length,
        existingKeysCount: existingKeys.size
    });
    // Filter new records to only include those not already in output DS
    const uniqueNewRecords = newRecords.filter(record => {
        const key = getRecordKey(record, outputDS);
        const isDuplicate = existingKeys.has(key);
        if (isDuplicate) {
            debugLogger.log('RESULTS-MODE', {
                event: 'duplicate-record-skipped',
                key,
                objectId: record.getId()
            });
        }
        return !isDuplicate;
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'deduplication-complete',
        newRecordsCount: newRecords.length,
        uniqueNewRecordsCount: uniqueNewRecords.length,
        duplicatesSkipped: newRecords.length - uniqueNewRecords.length
    });
    // Merge records
    const mergedRecords = [...existingRecords, ...uniqueNewRecords];
    debugLogger.log('RESULTS-MODE', {
        event: 'merge-complete',
        totalRecordsAfterMerge: mergedRecords.length,
        existingCount: existingRecords.length,
        newUniqueCount: uniqueNewRecords.length
    });
    return mergedRecords;
}
/**
 * Removes matching records from widget-level accumulated records.
 * Matches records using composite keys (originDSId_objectId).
 *
 * This function removes records from existing accumulated records that were captured
 * before the query executed. The caller is responsible for storing the remaining
 * records (typically in recordsRef or state).
 *
 * @param outputDS - The output data source (used for key generation)
 * @param recordsToRemove - Records to remove (from query results)
 * @param existingAccumulatedRecords - Existing accumulated records captured before query execution (optional, defaults to empty array)
 * @returns Array of remaining records after removal
 */
function removeResultsFromAccumulated(outputDS, recordsToRemove, existingAccumulatedRecords = []) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-results-start',
        outputDSId: outputDS.id,
        recordsToRemoveCount: recordsToRemove.length,
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length
    });
    // If no accumulated records, nothing to remove
    if (existingAccumulatedRecords.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-accumulated-records-to-remove',
            outputDSId: outputDS.id
        });
        return [];
    }
    // If no records to remove, return existing records unchanged
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove',
            outputDSId: outputDS.id,
            existingAccumulatedRecordsCount: existingAccumulatedRecords.length
        });
        return existingAccumulatedRecords;
    }
    // Build Set of keys to remove for fast lookup
    const removeKeys = new Set(recordsToRemove.map(record => getRecordKey(record, outputDS)));
    debugLogger.log('RESULTS-MODE', {
        event: 'remove-keys-built',
        existingAccumulatedRecordsCount: existingAccumulatedRecords.length,
        removeKeysCount: removeKeys.size
    });
    // Filter out records that match keys to remove
    const remainingRecords = [];
    const removedRecords = [];
    existingAccumulatedRecords.forEach(record => {
        var _a, _b, _c, _d;
        const key = getRecordKey(record, outputDS);
        const shouldRemove = removeKeys.has(key);
        if (shouldRemove) {
            removedRecords.push(record);
            debugLogger.log('RESULTS-MODE', {
                event: 'record-marked-for-removal',
                key,
                objectId: record.getId(),
                originDSId: ((_d = (_c = (_b = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record)) === null || _b === void 0 ? void 0 : _b.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.id) || 'unknown'
            });
        }
        else {
            remainingRecords.push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removal-complete',
        recordsRemoved: removedRecords.length,
        remainingRecordsCount: remainingRecords.length,
        recordsToRemoveCount: recordsToRemove.length,
        matchedRecordsCount: removedRecords.length,
        unmatchedRecordsCount: recordsToRemove.length - removedRecords.length
    });
    return remainingRecords;
}
/**
 * Removes records from origin data source selections.
 * Groups records by their origin data source and updates each origin DS's selection separately.
 * This ensures map selection is updated correctly when records come from multiple origin layers.
 * Also removes graphics from graphics layer if using graphics layer highlighting.
 *
 * @param widgetId - The widget ID for publishing messages
 * @param recordsToRemove - Records to remove from selection
 * @param outputDS - The output data source (used for key generation)
 * @param useGraphicsLayer - Whether to remove graphics from graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function removeRecordsFromOriginSelections(widgetId, recordsToRemove, outputDS, useGraphicsLayer, graphicsLayer) {
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-start',
        widgetId,
        recordsToRemoveCount: recordsToRemove.length,
        outputDSId: outputDS.id,
        useGraphicsLayer: !!useGraphicsLayer,
        hasGraphicsLayer: !!graphicsLayer
    });
    if (recordsToRemove.length === 0) {
        debugLogger.log('RESULTS-MODE', {
            event: 'no-records-to-remove-from-selection',
            widgetId
        });
        return;
    }
    // Remove from graphics layer if using graphics layer highlighting
    if (useGraphicsLayer && graphicsLayer) {
        const recordIdsToRemove = recordsToRemove.map(record => record.getId());
        debugLogger.log('RESULTS-MODE', {
            event: 'removing-graphics-from-layer',
            widgetId,
            recordIdsCount: recordIdsToRemove.length,
            graphicsLayerId: graphicsLayer.id
        });
        (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_2__.removeHighlightGraphics)(graphicsLayer, recordIdsToRemove);
    }
    // Group records by their origin data source
    const recordsByOriginDS = new Map();
    recordsToRemove.forEach(record => {
        var _a, _b, _c;
        const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
        let originDS = null;
        if (recordDS) {
            originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
        }
        else {
            // Fallback: try to get origin from outputDS
            originDS = ((_c = outputDS.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || null;
        }
        if (originDS) {
            if (!recordsByOriginDS.has(originDS)) {
                recordsByOriginDS.set(originDS, []);
            }
            recordsByOriginDS.get(originDS).push(record);
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'records-grouped-by-origin',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        recordsByOriginDS: Array.from(recordsByOriginDS.entries()).map(([ds, records]) => ({
            originDSId: ds.id,
            recordCount: records.length
        }))
    });
    // For each origin DS, get current selection and remove matching records
    recordsByOriginDS.forEach((recordsToRemoveForOrigin, originDS) => {
        try {
            // Get current selected records from this origin DS
            const currentSelectedRecords = originDS.getSelectedRecords() || [];
            const currentSelectedIds = originDS.getSelectedRecordIds() || [];
            debugLogger.log('RESULTS-MODE', {
                event: 'processing-origin-ds-removal',
                widgetId,
                originDSId: originDS.id,
                currentSelectedCount: currentSelectedRecords.length,
                recordsToRemoveCount: recordsToRemoveForOrigin.length
            });
            // Build Set of IDs to remove for fast lookup
            const idsToRemove = new Set(recordsToRemoveForOrigin.map(record => record.getId()));
            // Filter out records that match IDs to remove
            const remainingRecords = currentSelectedRecords.filter(record => {
                const recordId = record.getId();
                return !idsToRemove.has(recordId);
            });
            const remainingIds = remainingRecords.map(record => record.getId());
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-filtered',
                widgetId,
                originDSId: originDS.id,
                removedCount: currentSelectedRecords.length - remainingRecords.length,
                remainingCount: remainingRecords.length
            });
            // Update selection in origin DS
            if (typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(remainingIds, remainingRecords);
            }
            // Publish selection change message for this origin DS
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, remainingRecords, [originDS.id]));
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-selection-updated',
                widgetId,
                originDSId: originDS.id,
                remainingRecordsCount: remainingRecords.length,
                messagePublished: true
            });
        }
        catch (error) {
            debugLogger.log('RESULTS-MODE', {
                event: 'origin-ds-removal-error',
                widgetId,
                originDSId: originDS.id,
                error: error instanceof Error ? error.message : 'Unknown error',
                errorStack: error instanceof Error ? error.stack : undefined
            });
        }
    });
    debugLogger.log('RESULTS-MODE', {
        event: 'removing-records-from-origin-selections-complete',
        widgetId,
        originDSCount: recordsByOriginDS.size,
        totalRecordsRemoved: recordsToRemove.length
    });
}
/**
 * Clears all records from the accumulated results data source.
 *
 * @param accumulatedDS - The accumulated results data source to clear
 */
function clearAccumulatedResults(accumulatedDS) {
    debugLogger.log('RESULTS-MODE', {
        event: 'clearing-accumulated-results',
        accumulatedDSId: accumulatedDS.id
    });
    // Set status to NotReady to clear records
    accumulatedDS.setStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    accumulatedDS.setCountStatus(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady);
    // Clear any loaded records if possible
    // Note: May need to use DataSourceManager methods depending on ExB API
    debugLogger.log('RESULTS-MODE', {
        event: 'accumulated-results-cleared',
        accumulatedDSId: accumulatedDS.id
    });
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QUERYSIMPLE_SELECTION_EVENT: () => (/* binding */ QUERYSIMPLE_SELECTION_EVENT),
/* harmony export */   clearSelectionInDataSources: () => (/* binding */ clearSelectionInDataSources),
/* harmony export */   dispatchSelectionEvent: () => (/* binding */ dispatchSelectionEvent),
/* harmony export */   findClearResultsButton: () => (/* binding */ findClearResultsButton),
/* harmony export */   getOriginDataSource: () => (/* binding */ getOriginDataSource),
/* harmony export */   publishSelectionMessage: () => (/* binding */ publishSelectionMessage),
/* harmony export */   selectRecordsAndPublish: () => (/* binding */ selectRecordsAndPublish),
/* harmony export */   selectRecordsInDataSources: () => (/* binding */ selectRecordsInDataSources)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/**
 * Utility functions for managing feature selection in QuerySimple widget.
 * Consolidates repeated selection logic to follow DRY principles.
 */
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_2__.createQuerySimpleDebugLogger)();
/**
 * Custom event name for QuerySimple to notify Widget of selection changes.
 */
const QUERYSIMPLE_SELECTION_EVENT = 'querysimple-selection-changed';
/**
 * Dispatches a custom selection event to the window so the main Widget can track state.
 *
 * @param widgetId - The widget ID
 * @param recordIds - Array of selected record IDs
 * @param outputDS - The output data source
 * @param queryItemConfigId - The config ID of the query that produced these results
 */
function dispatchSelectionEvent(widgetId, recordIds, outputDS, queryItemConfigId) {
    const originDS = getOriginDataSource(outputDS);
    const dataSourceId = originDS === null || originDS === void 0 ? void 0 : originDS.id;
    debugLogger.log('TASK', {
        event: 'dispatchSelectionEvent',
        widgetId,
        recordCount: recordIds.length,
        outputDsId: outputDS.id,
        queryItemConfigId
    });
    const selectionEvent = new CustomEvent(QUERYSIMPLE_SELECTION_EVENT, {
        detail: {
            widgetId,
            recordIds,
            dataSourceId,
            outputDsId: outputDS.id,
            queryItemConfigId
        },
        bubbles: true,
        cancelable: true
    });
    window.dispatchEvent(selectionEvent);
}
/**
 * Gets the origin data source from an output data source.
 * @param outputDS - The output data source
 * @returns The origin data source, or null if not available
 */
function getOriginDataSource(outputDS) {
    if (!outputDS)
        return null;
    // Try to get origin data sources
    const originDataSources = typeof outputDS.getOriginDataSources === 'function'
        ? outputDS.getOriginDataSources()
        : [];
    if (originDataSources && originDataSources.length > 0) {
        return originDataSources[0];
    }
    // If it doesn't have origin data sources, it might already be an origin data source
    // FeatureLayerDataSource should have a 'layer' property or 'getLayer' method
    if (outputDS.layer || outputDS.getLayer || outputDS.type === 'FeatureLayer') {
        return outputDS;
    }
    return null;
}
/**
 * Selects records in both the origin data source and output data source.
 * This is the standard pattern used throughout the widget for selection.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Optional array of FeatureDataRecord objects for proper highlighting
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsInDataSources(outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (outputDS, recordIds, records, useGraphicsLayer = false, graphicsLayer, mapView) {
        var _a, _b, _c, _d, _e, _f;
        if (!outputDS)
            return;
        const originDS = getOriginDataSource(outputDS);
        // If using graphics layer, add graphics for highlighting
        if (useGraphicsLayer && graphicsLayer && mapView && records && records.length > 0) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-graphics-layer',
                recordIdsCount: recordIds.length,
                recordsCount: records.length,
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.addHighlightGraphics)(graphicsLayer, records, mapView);
            // Still select in data source for state management (but layer selection won't show if layer is off)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        else {
            // Original behavior: use layer selection
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'selectRecordsInDataSources-using-layer-selection',
                recordIdsCount: recordIds.length,
                useGraphicsLayer,
                hasGraphicsLayer: !!graphicsLayer,
                hasMapView: !!mapView,
                timestamp: Date.now()
            });
            // Select in origin data source (the actual layer)
            if (originDS && typeof originDS.selectRecordsByIds === 'function') {
                // Log layer state right before selection to see what's available when selection works
                const layer = originDS.layer || ((_b = (_a = originDS).getLayer) === null || _b === void 0 ? void 0 : _b.call(_a));
                if (layer) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'selectRecordsByIds-layer-state',
                        originDSId: originDS.id,
                        layerId: layer.id,
                        hasLayerMap: !!layer.map,
                        hasLayerView: !!layer.view,
                        hasLayerParent: !!layer.parent,
                        parentType: ((_c = layer.parent) === null || _c === void 0 ? void 0 : _c.type) || 'none',
                        parentHasMap: !!((_d = layer.parent) === null || _d === void 0 ? void 0 : _d.map),
                        parentHasView: !!((_e = layer.parent) === null || _e === void 0 ? void 0 : _e.view),
                        parentHasViews: !!((_f = layer.parent) === null || _f === void 0 ? void 0 : _f.views),
                        timestamp: Date.now()
                    });
                }
                originDS.selectRecordsByIds(recordIds, records);
            }
        }
        // Always update outputDS for widget's internal state
        if (typeof outputDS.selectRecordsByIds === 'function') {
            outputDS.selectRecordsByIds(recordIds, records);
        }
    });
}
/**
 * Clears selection in both the origin data source and output data source.
 * Optionally clears graphics layer if using graphics layer mode.
 *
 * @param widgetId - The widget ID (needed to publish message)
 * @param outputDS - The output data source
 * @param useGraphicsLayer - Whether to clear graphics layer (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 */
function clearSelectionInDataSources(widgetId_1, outputDS_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, useGraphicsLayer = false, graphicsLayer) {
        // Clear graphics layer if using graphics layer mode
        if (useGraphicsLayer && graphicsLayer) {
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'clearSelectionInDataSources-clearing-graphics-layer',
                graphicsLayerId: graphicsLayer.id,
                timestamp: Date.now()
            });
            (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_1__.clearGraphicsLayer)(graphicsLayer);
        }
        // Clear data source selection for state management
        yield selectRecordsInDataSources(outputDS, [], undefined, false);
        // Publish the empty selection message so the Map selection (blue boxes) clears
        if (outputDS) {
            publishSelectionMessage(widgetId, [], outputDS, true);
        }
    });
}
/**
 * Publishes a selection change message for the given records and data sources.
 *
 * @param widgetId - The widget ID
 * @param records - Array of FeatureDataRecord objects (empty array to clear)
 * @param outputDS - The output data source
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 */
function publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS = false) {
    if (!outputDS)
        return;
    const originDS = getOriginDataSource(outputDS);
    if (originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [originDS.id]));
    }
    else if (alsoPublishToOutputDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
    // Optionally publish to outputDS as well (for some edge cases)
    if (alsoPublishToOutputDS && originDS) {
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(widgetId, records, [outputDS.id]));
    }
}
/**
 * Selects records and publishes the selection message in one call.
 * This is the most common pattern - selecting records and notifying the map.
 * Optionally uses graphics layer for highlighting (independent of layer visibility).
 *
 * @param widgetId - The widget ID
 * @param outputDS - The output data source
 * @param recordIds - Array of record IDs to select
 * @param records - Array of FeatureDataRecord objects for proper highlighting
 * @param alsoPublishToOutputDS - Whether to also publish a message for outputDS (default: false)
 * @param useGraphicsLayer - Whether to use graphics layer for highlighting (default: false)
 * @param graphicsLayer - Graphics layer instance (required if useGraphicsLayer is true)
 * @param mapView - Map view instance (required if useGraphicsLayer is true)
 */
function selectRecordsAndPublish(widgetId_1, outputDS_1, recordIds_1, records_1) {
    return __awaiter(this, arguments, void 0, function* (widgetId, outputDS, recordIds, records, alsoPublishToOutputDS = false, useGraphicsLayer = false, graphicsLayer, mapView) {
        yield selectRecordsInDataSources(outputDS, recordIds, records, useGraphicsLayer, graphicsLayer, mapView);
        publishSelectionMessage(widgetId, records, outputDS, alsoPublishToOutputDS);
    });
}
/**
 * Finds the "Clear results" button in the DOM.
 * Used when programmatically triggering the clear action.
 *
 * @returns The clear button element, or null if not found
 */
function findClearResultsButton() {
    return document.querySelector('button[aria-label="Clear results"]');
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx":
/*!**************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/simple-list.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleList: () => (/* binding */ SimpleList)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _query_result_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-result-item */ "./your-extensions/widgets/query-simple/src/runtime/query-result-item.tsx");
/* harmony import */ var _query_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./query-utils */ "./your-extensions/widgets/query-simple/src/runtime/query-utils.ts");
/* harmony import */ var _useAutoHeight__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useAutoHeight */ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");

/** @jsx jsx */






const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_6__.createQuerySimpleDebugLogger)();
const getStyle = (isAutoHeight) => {
    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
    display: flex;
    flex: 1 1 ${isAutoHeight ? 'auto' : 0};
    overflow: auto;
    max-height: ${isAutoHeight ? 'calc(61.8vh - 100px)' : 'none'};

    .query-result-item + .query-result-item {
      margin-left: 0.5rem;
      margin-top: 0;
    }

    &.vertical {
      flex-direction: column;
      .list-items {
        position: relative;
        flex-direction: column;
      }

      .feature-info-component {
        width: 100%;
      }

      .query-result-item + .query-result-item {
        margin-left: 0;
        margin-top: 0.5rem;
      }
    }
    .list-items {
      display: flex;
    }
  `;
};
function SimpleList(props) {
    const { widgetId, outputDS, queryItem, records, direction, onEscape, onSelectChange, onRemove, expandByDefault, itemExpandStates, removedRecordIds, onRenderDone } = props;
    const [popupTemplate, setPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const [defaultPopupTemplate, setDefaultPopupTemplate] = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useState();
    const isAutoHeight = (0,_useAutoHeight__WEBPACK_IMPORTED_MODULE_5__.useAutoHeight)();
    const resultContainerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useRef(null);
    // Filter out removed records
    const filteredRecords = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useMemo(() => {
        return (records === null || records === void 0 ? void 0 : records.filter(record => !(removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.has(record.getId())))) || [];
    }, [records, removedRecordIds]);
    // Notify parent when records are rendered (for auto-switch logic)
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        if (onRenderDone && filteredRecords.length > 0) {
            debugLogger.log('RESULTS-MODE', {
                event: 'SimpleList-onRenderDone-called',
                widgetId,
                queryItemConfigId: queryItem.configId,
                filteredRecordsCount: filteredRecords.length,
                totalRecordsCount: records.length,
                removedRecordIdsCount: (removedRecordIds === null || removedRecordIds === void 0 ? void 0 : removedRecordIds.size) || 0,
                timestamp: Date.now()
            });
            onRenderDone({ dataItems: filteredRecords });
        }
    }, [filteredRecords, onRenderDone, widgetId, queryItem.configId, records.length, removedRecordIds]);
    jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useEffect(() => {
        (0,_query_utils__WEBPACK_IMPORTED_MODULE_4__.getPopupTemplate)(outputDS, queryItem).then(rs => {
            setPopupTemplate(rs.popupTemplate);
            setDefaultPopupTemplate(rs.defaultPopupTemplate);
        });
    }, [outputDS, queryItem]);
    const handleKeyUp = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === 'Escape') {
            evt.stopPropagation();
            onEscape();
        }
    }, [onEscape]);
    const handleKeyDown = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.useCallback((evt) => {
        if (evt.key === ' ') {
            evt.preventDefault();
        }
    }, []);
    return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onKeyUp: handleKeyUp, onKeyDown: handleKeyDown, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.classNames)({ vertical: direction === _config__WEBPACK_IMPORTED_MODULE_2__.ListDirection.Vertical }), css: getStyle(isAutoHeight), ref: resultContainerRef, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-items px-4 py-1', role: 'listbox', children: filteredRecords.map((dataItem) => {
                const recordId = dataItem.getId();
                // Use individual state from map if available, otherwise fall back to expandByDefault
                const individualExpandState = itemExpandStates === null || itemExpandStates === void 0 ? void 0 : itemExpandStates.get(recordId);
                const expandByDefaultValue = individualExpandState !== undefined ? individualExpandState : (expandByDefault !== null && expandByDefault !== void 0 ? expandByDefault : true);
                return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_result_item__WEBPACK_IMPORTED_MODULE_3__.QueryResultItem, { data: dataItem, dataSource: outputDS, widgetId: widgetId, popupTemplate: popupTemplate, defaultPopupTemplate: defaultPopupTemplate, expandByDefault: expandByDefaultValue, onClick: onSelectChange, onRemove: onRemove }, recordId));
            }) }) }));
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'QuerySimple',
    reset: 'Reset',
    searchLayer: 'Search Layer',
    apply: 'Search',
    noDataAvailable: 'Error in loading data',
    noQueryItem: 'No query',
    newQueryHint: 'Add content by clicking the "{label}" button on the configuration panel',
    attributeFilter: 'Attribute filter',
    spatialFilter: 'Spatial filter',
    spatialFilterType_CurrentMapExtent: 'Current map extent',
    spatialFilterType_InteractiveDrawMode: 'Drawn graphic',
    results: 'Results',
    featuresDisplayed: 'Features displayed',
    clearResult: 'Clear results',
    checkResult: 'Check results',
    mapMustBeVisible: 'Map must be visible',
    chooseFilterType: 'Choose the filter type',
    chooseGeometryType: 'Choose the geometry type',
    clearDrawing: 'Clear the graphic when applying',
    featureFromDs: 'Selecting features from data source',
    featureFromMap: 'Geometries from a map',
    chooseFilterLayer: 'Choose a filter layer',
    selectedRecords: '{num} records are selected for the filter',
    spatialNotAvailable: 'Spatial filter is not available here.',
    spatialNotAvailableDesc: 'Spatial filter is not supported for a data source that already contains a spatial query.',
    preconfigured: 'Preconfigured',
    runtime: 'Runtime',
    selectLoaded: 'Select loaded',
    retrieving: 'Retrieving query results...',
    zoomToSelected: 'Zoom to selected',
    queryTab: 'Query',
    resultsTab: 'Results',
    expandAll: 'Expand all',
    collapseAll: 'Collapse all',
    addToMap: 'Add to map',
    resultsMode: 'Results mode',
    createNewResults: 'Create new results',
    addToCurrentResults: 'Add to current results',
    removeFromCurrentResults: 'Remove from current results',
    resultsModeDisabledRemove: 'Remove from current results (no accumulated results)',
    resultsModeDesc: 'Controls how query results are combined:\n New: Each query replaces previous results\n Add: New results are added to existing results\n Remove: Matching results are removed from existing results',
    resultsModeNew: 'New',
    resultsModeAdd: 'Add',
    resultsModeRemove: 'Remove'
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx":
/*!****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/useAutoHeight.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useAutoHeight: () => (/* binding */ useAutoHeight)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/** @jsx jsx */



function useAutoHeight() {
    const layoutInfo = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useContext(_widget_context__WEBPACK_IMPORTED_MODULE_2__.QueryWidgetContext);
    let layoutId;
    let layoutItemId;
    if (layoutInfo.includes(':')) {
        const r = layoutInfo.split(':');
        layoutId = r[0];
        layoutItemId = r[1];
    }
    const isAuto = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.useSelector((state) => {
        var _a, _b, _c, _d;
        const layoutItem = (_b = (_a = state.appConfig.layouts[layoutId]) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b[layoutItemId];
        return ((_d = (_c = layoutItem === null || layoutItem === void 0 ? void 0 : layoutItem.setting) === null || _c === void 0 ? void 0 : _c.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutItemSizeModes.Auto;
    });
    return isAuto;
}


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts":
/*!***************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-config.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getWidgetRuntimeDataMap: () => (/* binding */ getWidgetRuntimeDataMap)
/* harmony export */ });
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-icons/svg/outlined/suggested/error.svg */ "./jimu-icons/svg/outlined/suggested/error.svg");
/* harmony import */ var jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg");
/* harmony import */ var jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/svg/outlined/application/more-horizontal.svg */ "./jimu-icons/svg/outlined/application/more-horizontal.svg");
/* harmony import */ var jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5__);






const getWidgetRuntimeDataMap = () => ({
    iconMap: {
        iconQuery: __webpack_require__(/*! ../../icon.svg */ "./your-extensions/widgets/query-simple/icon.svg"),
        iconWarning: (jimu_icons_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_0___default()),
        iconError: (jimu_icons_svg_outlined_suggested_error_svg__WEBPACK_IMPORTED_MODULE_1___default()),
        arrowNavBack: (jimu_icons_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()),
        arrowRight: (jimu_icons_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_3___default()),
        toolDelete: (jimu_icons_svg_outlined_editor_trash_svg__WEBPACK_IMPORTED_MODULE_4___default()),
        iconMore: (jimu_icons_svg_outlined_application_more_horizontal_svg__WEBPACK_IMPORTED_MODULE_5___default())
    }
});


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryWidgetContext: () => (/* binding */ QueryWidgetContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const QueryWidgetContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext(null);


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.0.0',
                description: 'The first version.',
                upgrader: (oldConfig) => {
                    return oldConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./your-extensions/widgets/query-simple/src/version.ts":
/*!*************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/version.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WIDGET_VERSION: () => (/* binding */ WIDGET_VERSION)
/* harmony export */ });
/**
 * Widget version number.
 * Base version matches Experience Builder version (1.19.0).
 * Release number increments on major changes (001, 002, 003, ...).
 * Minor version increments on smaller fixes between major releases (r015.1, r015.2, ...).
 *
 * To increment:
 * - Major change: Update RELEASE_NUMBER (e.g., 015 -> 016) and reset MINOR_VERSION to 0
 * - Minor fix: Increment MINOR_VERSION (e.g., 1 -> 2) while keeping same RELEASE_NUMBER
 */
const BASE_VERSION = '1.19.0';
const RELEASE_NUMBER = '017'; // Increment on major changes (001, 002, 003, ...)
const MINOR_VERSION = '41'; // Increment on minor fixes between major releases (1, 2, 3, ...)
const WIDGET_VERSION = MINOR_VERSION && MINOR_VERSION !== '0'
    ? `${BASE_VERSION}-r${RELEASE_NUMBER}.${MINOR_VERSION}`
    : `${BASE_VERSION}-r${RELEASE_NUMBER}`;


/***/ }),

/***/ "@emotion/react/jsx-runtime":
/*!************************************!*\
  !*** external "jimu-core/emotion" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_react_jsx_runtime__;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "widgets/shared-code/common":
/*!*********************************************!*\
  !*** external "widgets/shared-code/common" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_widgets_shared_code_common__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./your-extensions/widgets/query-simple/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "@emotion/react/jsx-runtime");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/query-simple/src/config.ts");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/query-simple/src/runtime/translations/default.ts");
/* harmony import */ var _widget_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./widget-config */ "./your-extensions/widgets/query-simple/src/runtime/widget-config.ts");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/query-simple/src/version-manager.ts");
/* harmony import */ var _query_task_list__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./query-task-list */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list.tsx");
/* harmony import */ var _query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-task-list-inline */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-inline.tsx");
/* harmony import */ var _query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./query-task-list-popper-wrapper */ "./your-extensions/widgets/query-simple/src/runtime/query-task-list-popper-wrapper.tsx");
/* harmony import */ var _widget_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./widget-context */ "./your-extensions/widgets/query-simple/src/runtime/widget-context.tsx");
/* harmony import */ var widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! widgets/shared-code/common */ "widgets/shared-code/common");
/* harmony import */ var _graphics_layer_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
/* harmony import */ var _selection_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../version */ "./your-extensions/widgets/query-simple/src/version.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/** @jsx jsx */















const debugLogger = (0,widgets_shared_code_common__WEBPACK_IMPORTED_MODULE_12__.createQuerySimpleDebugLogger)();
const { iconMap } = (0,_widget_config__WEBPACK_IMPORTED_MODULE_5__.getWidgetRuntimeDataMap)();
/**
 * Custom event name for QuerySimple to notify HelperSimple of widget open/close state.
 */
const QUERYSIMPLE_WIDGET_STATE_EVENT = 'querysimple-widget-state-changed';
/**
 * Custom event name for requesting restoration when identify popup closes.
 */
const RESTORE_ON_IDENTIFY_CLOSE_EVENT = 'querysimple-restore-on-identify-close';
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.lastProcessedHash = '';
        this.state = {
            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection, // Default mode
            activeTab: 'query'
        };
        this.handleTabChange = (activeTab) => {
            this.setState({ activeTab });
        };
        this.widgetRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.visibilityObserver = null;
        this.visibilityCheckInterval = null;
        this.graphicsLayerRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        this.mapViewRef = jimu_core__WEBPACK_IMPORTED_MODULE_1__.React.createRef();
        /**
         * Notifies HelperSimple of selection changes.
         * Called by QueryTaskResult when selection is made.
         *
         * @param recordIds - Array of selected record IDs
         * @param dataSourceId - Optional data source ID
         */
        this.notifyHelperSimpleOfSelection = (recordIds, dataSourceId) => {
            const { id } = this.props;
            const event = new CustomEvent(_selection_utils__WEBPACK_IMPORTED_MODULE_14__.QUERYSIMPLE_SELECTION_EVENT, {
                detail: {
                    widgetId: id,
                    recordIds,
                    dataSourceId
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * Sets up visibility detection to track when the widget panel is open/closed.
         * Uses IntersectionObserver if available, falls back to periodic checking.
         */
        this.setupVisibilityDetection = () => {
            // Wait for next tick to ensure ref is set
            setTimeout(() => {
                if (!this.widgetRef.current) {
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup-failed',
                        widgetId: this.props.id,
                        reason: 'widget-ref-not-available'
                    });
                    return;
                }
                const element = this.widgetRef.current;
                // Method 1: IntersectionObserver (most efficient)
                if ('IntersectionObserver' in window) {
                    this.visibilityObserver = new IntersectionObserver((entries) => {
                        const entry = entries[0];
                        const isVisible = entry.isIntersecting && entry.intersectionRatio > 0;
                        // Only log if state changed
                        if (this.state.isPanelVisible !== isVisible) {
                            this.setState({ isPanelVisible: isVisible });
                            this.logVisibilityChange(isVisible, 'IntersectionObserver');
                            this.notifyHelperSimpleOfPanelState(isVisible);
                        }
                    }, {
                        threshold: [0, 0.1, 1.0], // Trigger at 0%, 10%, and 100% visibility
                        rootMargin: '0px'
                    });
                    this.visibilityObserver.observe(element);
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup',
                        widgetId: this.props.id,
                        method: 'IntersectionObserver'
                    });
                }
                else {
                    // Method 2: Fallback to periodic checking
                    this.visibilityCheckInterval = window.setInterval(() => {
                        const isVisible = this.checkVisibility();
                        if (this.state.isPanelVisible !== isVisible) {
                            this.setState({ isPanelVisible: isVisible });
                            this.logVisibilityChange(isVisible, 'periodic-check');
                            this.notifyHelperSimpleOfPanelState(isVisible);
                        }
                    }, 250); // Check every 250ms
                    debugLogger.log('WIDGET-STATE', {
                        event: 'visibility-detection-setup',
                        widgetId: this.props.id,
                        method: 'periodic-check'
                    });
                }
            }, 100);
        };
        /**
         * Cleans up visibility detection observers/intervals.
         */
        this.cleanupVisibilityDetection = () => {
            if (this.visibilityObserver) {
                this.visibilityObserver.disconnect();
                this.visibilityObserver = null;
            }
            if (this.visibilityCheckInterval !== null) {
                clearInterval(this.visibilityCheckInterval);
                this.visibilityCheckInterval = null;
            }
        };
        /**
         * Handles map view change from JimuMapViewComponent.
         * When map view becomes available, initialize graphics layer if enabled.
         */
        this.handleJimuMapViewChanged = (jimuMapView) => {
            var _a;
            const { id, config } = this.props;
            debugLogger.log('GRAPHICS-LAYER', {
                event: 'handleJimuMapViewChanged',
                widgetId: id,
                hasJimuMapView: !!jimuMapView,
                hasView: !!(jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view),
                viewType: ((_a = jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) === null || _a === void 0 ? void 0 : _a.type) || 'none',
                timestamp: Date.now()
            });
            // Store JimuMapView in state
            this.setState({ jimuMapView: jimuMapView || undefined });
            // If map view is available and graphics layer is enabled, initialize it
            if ((jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) && config.useGraphicsLayerForHighlight && !this.graphicsLayerRef.current) {
                this.initializeGraphicsLayer(jimuMapView.view);
            }
        };
        /**
         * Initializes the graphics layer using the provided map view.
         */
        this.initializeGraphicsLayer = (mapView) => __awaiter(this, void 0, void 0, function* () {
            const { id } = this.props;
            try {
                // Create or get graphics layer
                const graphicsLayer = yield (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_13__.createOrGetGraphicsLayer)(id, mapView);
                if (!graphicsLayer) {
                    debugLogger.log('GRAPHICS-LAYER', {
                        event: 'initializeGraphicsLayer-failed',
                        widgetId: id,
                        reason: 'graphics-layer-creation-failed',
                        timestamp: Date.now()
                    });
                    return;
                }
                // Store references
                this.mapViewRef.current = mapView;
                this.graphicsLayerRef.current = graphicsLayer;
                // Update state to force re-render and update props
                this.setState({ graphicsLayerInitialized: true });
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayer-success',
                    widgetId: id,
                    graphicsLayerId: graphicsLayer.id,
                    viewType: mapView.type || 'unknown',
                    timestamp: Date.now()
                });
            }
            catch (error) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayer-error',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined,
                    timestamp: Date.now()
                });
            }
        });
        /**
         * Initializes graphics layer lazily when outputDS becomes available.
         * Now uses the map view from JimuMapViewComponent instead of trying to get it from data source.
         */
        this.initializeGraphicsLayerFromOutputDS = (outputDS) => __awaiter(this, void 0, void 0, function* () {
            var _a;
            const { id, config } = this.props;
            // Only initialize if enabled and not already initialized
            if (!config.useGraphicsLayerForHighlight || this.graphicsLayerRef.current) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId: id,
                    reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'already-initialized',
                    timestamp: Date.now()
                });
                return;
            }
            // Use map view from JimuMapViewComponent if available
            const mapView = ((_a = this.state.jimuMapView) === null || _a === void 0 ? void 0 : _a.view) || this.mapViewRef.current;
            if (!mapView) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'initializeGraphicsLayerFromOutputDS-skipped',
                    widgetId: id,
                    reason: 'map-view-not-available-yet',
                    outputDSId: outputDS.id,
                    hasJimuMapView: !!this.state.jimuMapView,
                    timestamp: Date.now()
                });
                return;
            }
            // Initialize graphics layer with the map view
            yield this.initializeGraphicsLayer(mapView);
        });
        /**
         * Cleans up the graphics layer when widget unmounts or config changes.
         */
        this.cleanupGraphicsLayer = () => {
            const { id } = this.props;
            const mapView = this.mapViewRef.current;
            if (mapView) {
                (0,_graphics_layer_utils__WEBPACK_IMPORTED_MODULE_13__.cleanupGraphicsLayer)(id, mapView);
                this.mapViewRef.current = null;
                this.graphicsLayerRef.current = null;
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'cleanupGraphicsLayer-complete',
                    widgetId: id,
                    timestamp: Date.now()
                });
            }
        };
        /**
         * Clears the graphics layer if it exists.
         * This is called when clearing results or switching queries in New mode to ensure graphics are removed.
         */
        this.clearGraphicsLayerIfExists = () => {
            const { config } = this.props;
            const graphicsLayer = this.graphicsLayerRef.current;
            if (config.useGraphicsLayerForHighlight && graphicsLayer) {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'clearGraphicsLayerIfExists-called',
                    widgetId: this.props.id,
                    graphicsLayerId: graphicsLayer.id,
                    graphicsCount: graphicsLayer.graphics.length,
                    timestamp: Date.now()
                });
                const { clearGraphicsLayer } = __webpack_require__(/*! ./graphics-layer-utils */ "./your-extensions/widgets/query-simple/src/runtime/graphics-layer-utils.ts");
                clearGraphicsLayer(graphicsLayer);
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'clearGraphicsLayerIfExists-complete',
                    widgetId: this.props.id,
                    graphicsLayerId: graphicsLayer.id,
                    timestamp: Date.now()
                });
            }
            else {
                debugLogger.log('GRAPHICS-LAYER', {
                    event: 'clearGraphicsLayerIfExists-skipped',
                    widgetId: this.props.id,
                    reason: !config.useGraphicsLayerForHighlight ? 'not-enabled' : 'no-graphics-layer',
                    hasGraphicsLayer: !!graphicsLayer,
                    timestamp: Date.now()
                });
            }
        };
        /**
         * Checks if the widget element is currently visible.
         * Fallback method when IntersectionObserver is not available.
         */
        this.checkVisibility = () => {
            if (!this.widgetRef.current)
                return false;
            const element = this.widgetRef.current;
            const style = window.getComputedStyle(element);
            const rect = element.getBoundingClientRect();
            const isVisible = (style.display !== 'none' &&
                style.visibility !== 'hidden' &&
                style.opacity !== '0' &&
                rect.width > 0 &&
                rect.height > 0 &&
                rect.top < window.innerHeight &&
                rect.bottom > 0 &&
                rect.left < window.innerWidth &&
                rect.right > 0);
            return isVisible;
        };
        /**
         * Tracks selection changes from query-result.
         * In "Add to" or "Remove from" modes, uses accumulated records count for restoration.
         */
        this.handleSelectionChange = (event) => {
            var _a;
            const customEvent = event;
            const { id } = this.props;
            // Only track if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const hasSelection = customEvent.detail.recordIds && customEvent.detail.recordIds.length > 0;
            // If the panel is NOT visible, and we are receiving an EMPTY selection,
            // it's almost certainly our own 'clearSelectionFromMap' logic firing.
            // We should IGNORE this so we don't wipe out the lastSelection state.
            if (!this.state.isPanelVisible && !hasSelection) {
                debugLogger.log('RESTORE', {
                    event: 'handleSelectionChange-ignoring-empty-selection-while-panel-closed',
                    widgetId: id,
                    timestamp: Date.now()
                });
                return;
            }
            // In "Add to" or "Remove from" mode, use accumulated records count for restoration
            // The accumulated records are the source of truth for what should be restored
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            const accumulatedRecordsCount = ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const selectionCount = isAccumulationMode && accumulatedRecordsCount > 0
                ? accumulatedRecordsCount
                : (hasSelection ? customEvent.detail.recordIds.length : 0);
            // If selection is cleared and we're in Remove mode, reset to NewSelection mode
            // Remove mode requires selection to function, so it should be disabled when selection is empty
            const shouldResetMode = !hasSelection &&
                selectionCount === 0 &&
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-updating-state',
                widgetId: id,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelectionFromEvent: hasSelection,
                accumulatedRecordsCountBefore: accumulatedRecordsCount,
                calculatedSelectionCount: selectionCount,
                'will-set-hasSelection': selectionCount > 0,
                'will-set-lastSelection': hasSelection && !!customEvent.detail.outputDsId && !!customEvent.detail.queryItemConfigId,
                'will-reset-mode': shouldResetMode,
                decisionLogic: {
                    'isAccumulationMode': isAccumulationMode,
                    'accumulatedRecordsCount > 0': accumulatedRecordsCount > 0,
                    'use-accumulated-count': isAccumulationMode && accumulatedRecordsCount > 0,
                    'use-event-count': !(isAccumulationMode && accumulatedRecordsCount > 0),
                    'should-reset-mode': shouldResetMode
                }
            });
            this.setState(Object.assign({ hasSelection: selectionCount > 0, selectionRecordCount: selectionCount, 
                // Store lastSelection for compatibility, but restoration will use accumulatedRecords in Add/Remove modes
                lastSelection: hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? {
                        recordIds: customEvent.detail.recordIds,
                        outputDsId: customEvent.detail.outputDsId,
                        queryItemConfigId: customEvent.detail.queryItemConfigId
                    }
                    : undefined }, (shouldResetMode ? {
                resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                accumulatedRecords: [] // Also clear accumulated records when resetting mode
            } : {})));
            debugLogger.log('RESTORE', {
                event: 'handleSelectionChange-state-updated',
                widgetId: id,
                'new-hasSelection': selectionCount > 0,
                'new-selectionRecordCount': selectionCount,
                'new-lastSelection-recordIds-count': hasSelection && customEvent.detail.outputDsId && customEvent.detail.queryItemConfigId
                    ? customEvent.detail.recordIds.length
                    : 0,
                'mode-reset': shouldResetMode,
                'new-mode': shouldResetMode ? _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection : this.state.resultsMode,
                'note': shouldResetMode
                    ? 'Mode reset to NewSelection because selection was cleared in Remove mode'
                    : 'lastSelection-only-contains-current-query-records-not-all-accumulated-records'
            });
        };
        /**
         * Handles restore request when identify popup closes.
         * Only restores if widget panel is open.
         * In "Add to" or "Remove from" modes, restores all accumulated records.
         */
        this.handleRestoreOnIdentifyClose = (event) => {
            var _a, _b, _c;
            const customEvent = event;
            const { id } = this.props;
            // Only handle if this is for our widget
            if (customEvent.detail.widgetId !== id) {
                return;
            }
            const isWidgetOpen = this.state.isPanelVisible === true;
            const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restore-requested',
                widgetId: id,
                isWidgetOpen,
                resultsMode: this.state.resultsMode,
                isAccumulationMode,
                eventRecordIdsCount: customEvent.detail.recordIds.length,
                hasSelection: this.state.hasSelection || false,
                accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                hasLastSelection: !!this.state.lastSelection,
                lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                outputDsId: customEvent.detail.outputDsId,
                queryItemConfigId: customEvent.detail.queryItemConfigId
            });
            // Only restore if widget is open
            if (!isWidgetOpen) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-widget-closed',
                    widgetId: id,
                    recordCount: customEvent.detail.recordIds.length
                });
                return;
            }
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-found-accumulated-records',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode,
                    'condition-result': isAccumulationMode
                });
            }
            // In Add/Remove modes, check accumulated records instead of lastSelection
            if (isAccumulationMode) {
                if (!this.state.hasSelection || !this.state.accumulatedRecords || this.state.accumulatedRecords.length === 0) {
                    debugLogger.log('RESTORE', {
                        event: 'identify-popup-closed-restore-skipped-no-accumulated-records',
                        widgetId: id,
                        hasSelection: this.state.hasSelection,
                        accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                        'hypothesis': 'hasSelection-is-false-or-no-accumulated-records',
                        'maybe-hasSelection-should-be-based-on-accumulated-records': true
                    });
                    return;
                }
                // Restore all accumulated records (grouped by origin DS)
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restoring-accumulated-records',
                    widgetId: id,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length
                });
                this.addSelectionToMap();
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            if (this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: this.state.accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // For "New" mode, use original validation logic
            // Check if we have matching selection state
            if (!this.state.hasSelection || !this.state.lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-no-selection',
                    widgetId: id,
                    hasSelection: this.state.hasSelection,
                    hasLastSelection: !!this.state.lastSelection
                });
                return;
            }
            // Verify the outputDsId matches
            if (this.state.lastSelection.outputDsId !== customEvent.detail.outputDsId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-ds-mismatch',
                    widgetId: id,
                    ourOutputDsId: this.state.lastSelection.outputDsId,
                    requestedOutputDsId: customEvent.detail.outputDsId
                });
                return;
            }
            // Verify the queryItemConfigId matches (optional but good to check)
            if (this.state.lastSelection.queryItemConfigId !== customEvent.detail.queryItemConfigId) {
                debugLogger.log('RESTORE', {
                    event: 'identify-popup-closed-restore-skipped-query-mismatch',
                    widgetId: id,
                    ourQueryItemConfigId: this.state.lastSelection.queryItemConfigId,
                    requestedQueryItemConfigId: customEvent.detail.queryItemConfigId
                });
                return;
            }
            // Restore selection to map (reuse existing method)
            debugLogger.log('RESTORE', {
                event: 'identify-popup-closed-restoring-selection',
                widgetId: id,
                recordCount: customEvent.detail.recordIds.length,
                outputDsId: customEvent.detail.outputDsId
            });
            this.addSelectionToMap();
        };
        /**
         * Adds selection to map when widget opens (reuses Add to Map logic).
         * In "Add to" or "Remove from" modes, restores all accumulated records grouped by origin data source.
         */
        this.addSelectionToMap = () => {
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            debugLogger.log('RESTORE', {
                event: 'addSelectionToMap-called',
                widgetId: id,
                resultsMode,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                lastSelectionOutputDsId: lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.outputDsId
            });
            // In Add/Remove modes, use accumulated records for restoration
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            // HYPOTHESIS: Should always check accumulatedRecords first, regardless of mode
            // Adding log to see if accumulatedRecords exist but we're not using them
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-found-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'should-use-accumulated': true,
                    'current-condition-check': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0,
                    'condition-result': isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0
                });
            }
            else {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: 0,
                    'will-fallback-to-lastSelection': !!lastSelection
                });
            }
            if (isAccumulationMode && accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-restoring-accumulated-records',
                    widgetId: id,
                    resultsMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Restore selection for each origin data source
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    const recordIds = records.map(r => r.getId());
                    try {
                        // Use originDS directly (not outputDS) since records are selected in origin layers
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield selectRecordsAndPublish(id, originDS, recordIds, records, true, useGraphicsLayer, graphicsLayer, mapView);
                        }))();
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restored-origin-ds',
                            widgetId: id,
                            originDSId: originDS.id,
                            recordCount: records.length,
                            zoomExecuted: false
                        });
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-opened-restore-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error),
                            errorStack: error instanceof Error ? error.stack : undefined
                        });
                    }
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we're not in accumulation mode?
            // Or maybe we should always check accumulatedRecords first?
            if (accumulatedRecords && accumulatedRecords.length > 0 && !isAccumulationMode) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-accumulated-records-exist-but-not-accumulation-mode',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-mode-is-not-add-or-remove',
                    'should-we-still-use-them': 'NEEDS-INVESTIGATION'
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'addSelectionToMap-no-lastSelection-exiting',
                    widgetId: id,
                    resultsMode,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-early-maybe-should-check-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            // Get records from output DS (same as Add to Map)
            const allRecords = outputDS.getAllLoadedRecords() || [];
            const recordsToSelect = allRecords.filter(record => lastSelection.recordIds.includes(record.getId()));
            if (recordsToSelect.length === 0) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-no-matching-records',
                    widgetId: id,
                    ourRecordCount: lastSelection.recordIds.length
                });
                return;
            }
            // Same logic as Add to Map action - selectRecordsAndPublish handles duplicate checking
            // Don't zoom when restoring on widget open (Add to Map action handles zoom for manual clicks)
            try {
                const { selectRecordsAndPublish } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                const mapView = this.mapViewRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield selectRecordsAndPublish(id, outputDS, lastSelection.recordIds, recordsToSelect, true, useGraphicsLayer, graphicsLayer, mapView);
                }))();
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-selection-added-to-map',
                    widgetId: id,
                    recordCount: recordsToSelect.length,
                    zoomExecuted: false
                });
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-add-to-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error)
                });
            }
        };
        /**
         * Handles results mode change from dropdown.
         * Updates widget state and logs the change for debugging.
         */
        this.handleResultsModeChange = (mode) => {
            var _a, _b;
            debugLogger.log('RESULTS-MODE', {
                event: 'handleResultsModeChange-triggered',
                widgetId: this.props.id,
                previousMode: this.state.resultsMode,
                newMode: mode,
                currentAccumulatedCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                timestamp: Date.now()
            });
            // Consume deep link when switching to accumulation modes
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection || mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection) {
                if ((_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId) {
                    debugLogger.log('HASH', {
                        event: 'consuming-hash-on-mode-switch',
                        widgetId: this.props.id,
                        mode,
                        shortId: this.state.initialQueryValue.shortId
                    });
                    this.removeHashParameter(this.state.initialQueryValue.shortId);
                }
            }
            // If switching to "New" mode, clear accumulated records
            if (mode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection) {
                debugLogger.log('RESULTS-MODE', {
                    event: 'clearing-accumulated-records-on-mode-switch',
                    widgetId: this.props.id,
                    previousMode: this.state.resultsMode
                });
                this.setState({ resultsMode: mode, accumulatedRecords: [] });
            }
            else {
                this.setState({ resultsMode: mode });
            }
        };
        this.removeHashParameter = (shortId) => {
            var _a;
            if (!shortId)
                return;
            const hash = window.location.hash.substring(1);
            const urlParams = new URLSearchParams(hash);
            if (urlParams.has(shortId)) {
                urlParams.delete(shortId);
                const newHash = urlParams.toString();
                debugLogger.log('HASH', {
                    event: 'removeHashParameter',
                    shortId,
                    newHash: newHash ? `#${newHash}` : '(empty)',
                    timestamp: Date.now()
                });
                // Update the URL without triggering a reload
                window.history.replaceState(null, '', newHash ? `#${newHash}` : window.location.pathname + window.location.search);
                // Also clear the state so it won't trigger again
                if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                    this.setState({ initialQueryValue: undefined });
                }
            }
        };
        this.handleAccumulatedRecordsChange = (records) => {
            var _a;
            debugLogger.log('RESULTS-MODE', {
                event: 'handleAccumulatedRecordsChange-triggered',
                widgetId: this.props.id,
                previousCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                newCount: records.length,
                timestamp: Date.now()
            });
            this.setState({ accumulatedRecords: records });
        };
        /**
         * NOTE: No longer needed - we use existing output DS instead of creating new one.
         * Kept for reference but not used.
         */
        this.getOrCreateAccumulatedResultsDS = (originDS) => __awaiter(this, void 0, void 0, function* () {
            // This is no longer used - we merge records into existing output DS
            throw new Error('This method is deprecated - use existing output DS instead');
        });
        /**
         * Clears selection from map only (keeps selection in widget's internal state).
         * Called when widget panel closes to remove selection from map while preserving widget state.
         * Always clears accumulated records if they exist, regardless of current mode.
         */
        this.clearSelectionFromMap = () => {
            var _a;
            const { lastSelection, accumulatedRecords, resultsMode } = this.state;
            const { id } = this.props;
            const isAccumulationMode = resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-called',
                widgetId: id,
                resultsMode,
                isAccumulationMode,
                hasLastSelection: !!lastSelection,
                lastSelectionRecordCount: (lastSelection === null || lastSelection === void 0 ? void 0 : lastSelection.recordIds.length) || 0,
                hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                selectionRecordCount: this.state.selectionRecordCount || 0
            });
            // Always clear accumulated records if they exist (regardless of mode)
            // This handles the case where mode might have changed but records still exist
            debugLogger.log('RESTORE', {
                event: 'clearSelectionFromMap-checking-accumulated-records',
                widgetId: id,
                'condition': 'accumulatedRecords && accumulatedRecords.length > 0',
                'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0),
                accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0
            });
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                // Group accumulated records by origin data source
                const recordsByOriginDS = new Map();
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
                accumulatedRecords.forEach((record, index) => {
                    var _a, _b, _c;
                    const recordId = record.getId();
                    let originDS = null;
                    // Method 1: Try to get from record.getDataSource()
                    const recordDS = (_a = record.getDataSource) === null || _a === void 0 ? void 0 : _a.call(record);
                    if (recordDS) {
                        originDS = ((_b = recordDS.getOriginDataSources()) === null || _b === void 0 ? void 0 : _b[0]) || recordDS;
                        debugLogger.log('RESTORE', {
                            event: 'clear-found-origin-ds-from-record-ds',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            originDSId: (originDS === null || originDS === void 0 ? void 0 : originDS.id) || 'null',
                            method: 'record.getDataSource()'
                        });
                    }
                    // Method 2: If that failed, search all data sources for a record with matching ID
                    if (!originDS) {
                        const dsMap = dsManager.getDataSources();
                        const allDataSources = Object.values(dsMap);
                        for (const ds of allDataSources) {
                            // Check if this is a FeatureLayerDataSource by checking for getAllLoadedRecords method
                            if (ds && typeof ds.getAllLoadedRecords === 'function') {
                                try {
                                    // Check if this DS has the record
                                    const allRecords = ds.getAllLoadedRecords() || [];
                                    const matchingRecord = allRecords.find((r) => r.getId() === recordId);
                                    if (matchingRecord) {
                                        // Found the record - get origin DS from this DS
                                        originDS = ((_c = ds.getOriginDataSources()) === null || _c === void 0 ? void 0 : _c[0]) || ds;
                                        debugLogger.log('RESTORE', {
                                            event: 'clear-found-origin-ds-via-search',
                                            widgetId: id,
                                            recordIndex: index,
                                            recordId,
                                            originDSId: originDS.id,
                                            method: 'searched-all-data-sources',
                                            searchedDSId: ds.id
                                        });
                                        break;
                                    }
                                }
                                catch (error) {
                                    // Continue searching
                                }
                            }
                        }
                    }
                    if (originDS) {
                        if (!recordsByOriginDS.has(originDS)) {
                            recordsByOriginDS.set(originDS, []);
                        }
                        recordsByOriginDS.get(originDS).push(record);
                    }
                    else {
                        debugLogger.log('RESTORE', {
                            event: 'clear-could-not-find-origin-ds-for-record',
                            widgetId: id,
                            recordIndex: index,
                            recordId,
                            warning: 'record-will-be-skipped'
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clearing-accumulated-records-from-map',
                    widgetId: id,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    originDSCount: recordsByOriginDS.size
                });
                // Clear selection from each origin data source
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                recordsByOriginDS.forEach((records, originDS) => {
                    try {
                        // Use async IIFE since forEach callback can't be async
                        ;
                        (() => __awaiter(this, void 0, void 0, function* () {
                            yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                            debugLogger.log('RESTORE', {
                                event: 'panel-closed-cleared-origin-ds-selection',
                                widgetId: id,
                                originDSId: originDS.id,
                                recordCount: records.length,
                                usedGraphicsLayer: useGraphicsLayer
                            });
                        }))();
                    }
                    catch (error) {
                        debugLogger.log('RESTORE', {
                            event: 'panel-closed-clear-origin-ds-failed',
                            widgetId: id,
                            originDSId: originDS.id,
                            error: error instanceof Error ? error.message : String(error)
                        });
                    }
                });
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-cleared-accumulated-records-returning',
                    widgetId: id,
                    'will-not-fallback-to-lastSelection': true
                });
                return;
            }
            // HYPOTHESIS: Maybe accumulatedRecords exist but we didn't enter the if block?
            // Or maybe we should always clear accumulated records if they exist?
            if (accumulatedRecords && accumulatedRecords.length > 0) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-accumulated-records-exist-but-not-clearing',
                    widgetId: id,
                    resultsMode,
                    isAccumulationMode,
                    accumulatedRecordsCount: accumulatedRecords.length,
                    'hypothesis': 'accumulated-records-exist-but-condition-failed-why',
                    'condition-was': 'accumulatedRecords && accumulatedRecords.length > 0',
                    'condition-result': !!(accumulatedRecords && accumulatedRecords.length > 0)
                });
            }
            // Fall back to original logic for "New" mode
            if (!lastSelection) {
                debugLogger.log('RESTORE', {
                    event: 'clearSelectionFromMap-no-lastSelection-exiting',
                    widgetId: id,
                    hasAccumulatedRecords: !!(accumulatedRecords && accumulatedRecords.length > 0),
                    accumulatedRecordsCount: (accumulatedRecords === null || accumulatedRecords === void 0 ? void 0 : accumulatedRecords.length) || 0,
                    'hypothesis': 'no-lastSelection-so-exiting-maybe-should-have-cleared-accumulated-records-first'
                });
                return;
            }
            const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
            const outputDS = dsManager.getDataSource(lastSelection.outputDsId);
            if (!outputDS) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-output-ds-not-found',
                    widgetId: id,
                    outputDsId: lastSelection.outputDsId
                });
                return;
            }
            try {
                // Get origin DS (the map layer)
                const originDS = (_a = outputDS.getOriginDataSources()) === null || _a === void 0 ? void 0 : _a[0];
                if (!originDS) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-origin-ds-not-found',
                        widgetId: id,
                        outputDsId: lastSelection.outputDsId
                    });
                    return;
                }
                // Check current selection state before clearing
                const currentSelectedIds = originDS.getSelectedRecordIds() || [];
                const ourRecordIds = lastSelection.recordIds;
                const matchesOurSelection = ourRecordIds.length === currentSelectedIds.length &&
                    ourRecordIds.every(recordId => currentSelectedIds.includes(recordId));
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-map-selection',
                    widgetId: id,
                    ourRecordCount: ourRecordIds.length,
                    mapSelectedCount: currentSelectedIds.length,
                    matchesOurSelection,
                    ourRecordIds: ourRecordIds.slice(0, 5),
                    mapSelectedIds: currentSelectedIds.slice(0, 5)
                });
                // Use clearSelectionInDataSources utility which supports graphics layer
                const { clearSelectionInDataSources } = __webpack_require__(/*! ./selection-utils */ "./your-extensions/widgets/query-simple/src/runtime/selection-utils.ts");
                const useGraphicsLayer = this.props.config.useGraphicsLayerForHighlight;
                const graphicsLayer = this.graphicsLayerRef.current || undefined;
                (() => __awaiter(this, void 0, void 0, function* () {
                    yield clearSelectionInDataSources(id, originDS, useGraphicsLayer, graphicsLayer);
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-cleared-origin-ds-selection',
                        widgetId: id,
                        originDSId: originDS.id,
                        usedGraphicsLayer: useGraphicsLayer
                    });
                    // Verify selection was cleared
                    const afterClearIds = originDS.getSelectedRecordIds() || [];
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-selection-cleared-from-map',
                        widgetId: id,
                        recordCount: lastSelection.recordIds.length,
                        originDSId: originDS.id,
                        selectionAfterClear: afterClearIds.length,
                        verifiedCleared: afterClearIds.length === 0
                    });
                }))();
            }
            catch (error) {
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-clear-from-map-failed',
                    widgetId: id,
                    error: error instanceof Error ? error.message : String(error),
                    errorStack: error instanceof Error ? error.stack : undefined
                });
            }
        };
        /**
         * Logs visibility state changes.
         */
        this.logVisibilityChange = (isVisible, method) => {
            var _a, _b, _c, _d;
            debugLogger.log('WIDGET-STATE', {
                event: isVisible ? 'panel-opened' : 'panel-closed',
                widgetId: this.props.id,
                isVisible,
                method,
                timestamp: new Date().toISOString()
            });
            if (isVisible) {
                // When panel opens, check if we have selection to restore
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToRestore = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-opened-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_a = this.state.accumulatedRecords) === null || _a === void 0 ? void 0 : _a.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_b = this.state.lastSelection) === null || _b === void 0 ? void 0 : _b.recordIds.length) || 0,
                    hasSelectionToRestore,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToRestore': hasSelectionToRestore,
                        'will-call-addSelectionToMap': hasSelectionToRestore
                    }
                });
                // Add selection to map if we have one
                if (hasSelectionToRestore) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-calling-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-true'
                    });
                    this.addSelectionToMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-opened-skipping-addSelectionToMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToRestore-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
            else {
                // When panel closes, clear selection from map only (keep widget state)
                const isAccumulationMode = this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.AddToSelection ||
                    this.state.resultsMode === _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.RemoveFromSelection;
                const hasAccumulatedRecords = this.state.accumulatedRecords && this.state.accumulatedRecords.length > 0;
                const hasSelectionState = this.state.hasSelection || false;
                const hasSelectionToClear = isAccumulationMode
                    ? hasAccumulatedRecords
                    : hasSelectionState;
                debugLogger.log('RESTORE', {
                    event: 'panel-closed-checking-selection',
                    widgetId: this.props.id,
                    resultsMode: this.state.resultsMode,
                    isAccumulationMode,
                    hasSelection: hasSelectionState,
                    hasAccumulatedRecords,
                    accumulatedRecordsCount: ((_c = this.state.accumulatedRecords) === null || _c === void 0 ? void 0 : _c.length) || 0,
                    selectionRecordCount: this.state.selectionRecordCount || 0,
                    hasLastSelection: !!this.state.lastSelection,
                    lastSelectionRecordCount: ((_d = this.state.lastSelection) === null || _d === void 0 ? void 0 : _d.recordIds.length) || 0,
                    hasSelectionToClear,
                    decisionLogic: {
                        'isAccumulationMode': isAccumulationMode,
                        'hasAccumulatedRecords': hasAccumulatedRecords,
                        'hasSelectionState': hasSelectionState,
                        'calculated-hasSelectionToClear': hasSelectionToClear,
                        'will-call-clearSelectionFromMap': hasSelectionToClear
                    }
                });
                if (hasSelectionToClear) {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-calling-clearSelectionFromMap',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-true'
                    });
                    this.clearSelectionFromMap();
                }
                else {
                    debugLogger.log('RESTORE', {
                        event: 'panel-closed-no-selection-to-clear',
                        widgetId: this.props.id,
                        reason: 'hasSelectionToClear-is-false',
                        why: isAccumulationMode
                            ? 'no-accumulated-records'
                            : 'no-hasSelection-state'
                    });
                }
            }
        };
        /**
         * Notifies HelperSimple of panel visibility state changes.
         */
        this.notifyHelperSimpleOfPanelState = (isVisible) => {
            const event = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
                detail: {
                    widgetId: this.props.id,
                    isOpen: isVisible
                },
                bubbles: true,
                cancelable: true
            });
            window.dispatchEvent(event);
        };
        /**
         * NOTIFY that a hash parameter has been used.
         * Previously this removed the hash from the URL, but per updated requirements,
         * user-entered hashes should remain in the URL.
         *
         * @param shortId - The shortId parameter that was used
         */
        this.handleHashParameterUsed = (shortId) => {
            var _a;
            const { id } = this.props;
            const { initialQueryValue } = this.state;
            debugLogger.log('HASH', {
                event: 'handleHashParameterUsed-notified',
                widgetId: id,
                shortId: shortId,
                currentInitialQueryValue: initialQueryValue,
                note: 'Hash remains in URL per user requirement',
                timestamp: Date.now()
            });
            // Clear the state so it won't trigger again within this session/mount
            if (((_a = this.state.initialQueryValue) === null || _a === void 0 ? void 0 : _a.shortId) === shortId) {
                this.setState({ initialQueryValue: undefined });
            }
        };
        /**
         * Checks the URL hash parameters for any shortIds that match query items.
         * If found, stores the value to be used to auto-populate and execute the query.
         * Experience Builder uses hash-based URL parameters (e.g., #pin=2223059013).
         *
         * This method prioritizes the first matching shortId found in the query items order.
         * If multiple hash parameters exist, only the first match is used.
         */
        this.checkQueryStringForShortIds = () => {
            var _a, _b, _c, _d, _e;
            const { config } = this.props;
            if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
                return;
            }
            // Extract all shortIds from query items
            const shortIds = config.queryItems
                .map(item => item.shortId)
                .filter(shortId => shortId != null && shortId.trim() !== '');
            if (shortIds.length === 0) {
                return;
            }
            // Get URL hash fragment parameters (ExB uses # for params)
            const hash = window.location.hash.substring(1); // Remove the #
            const urlParams = new URLSearchParams(hash);
            // Check if we've already processed this specific hash string
            if (this.lastProcessedHash === hash) {
                return;
            }
            // Update immediately to prevent re-entry race conditions
            this.lastProcessedHash = hash;
            // Log all hash params for debugging
            const allHashParams = {};
            urlParams.forEach((value, key) => {
                allHashParams[key] = value;
            });
            // Log hash check for debugging
            debugLogger.log('HASH', {
                event: 'hash-check',
                widgetId: this.props.id,
                hash: hash,
                allHashParams: allHashParams,
                hashParamsCount: Object.keys(allHashParams).length,
                availableShortIds: shortIds,
                currentState: this.state.initialQueryValue,
                timestamp: Date.now()
            });
            // Find the first matching shortId (prioritize first match in query items order)
            // This ensures we only set state once per check and maintains consistent behavior
            let foundMatch = false;
            for (const shortId of shortIds) {
                if (urlParams.has(shortId)) {
                    foundMatch = true;
                    const value = urlParams.get(shortId);
                    // Only update if the value has changed to avoid unnecessary re-renders
                    if (((_b = this.state.initialQueryValue) === null || _b === void 0 ? void 0 : _b.shortId) !== shortId || ((_c = this.state.initialQueryValue) === null || _c === void 0 ? void 0 : _c.value) !== value) {
                        debugLogger.log('HASH', {
                            event: 'hash-detected',
                            widgetId: this.props.id,
                            shortId: shortId,
                            value: value,
                            previousShortId: (_d = this.state.initialQueryValue) === null || _d === void 0 ? void 0 : _d.shortId,
                            previousValue: (_e = this.state.initialQueryValue) === null || _e === void 0 ? void 0 : _e.value,
                            allHashParams: allHashParams,
                            timestamp: Date.now()
                        });
                        // Reset to New mode when hash parameter is detected to avoid bugs with accumulation modes
                        const needsModeReset = this.state.resultsMode !== _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection;
                        debugLogger.log('HASH', {
                            event: 'hash-detected-setting-state',
                            widgetId: this.props.id,
                            shortId,
                            value,
                            needsModeReset,
                            currentMode: this.state.resultsMode,
                            timestamp: Date.now()
                        });
                        this.setState(Object.assign({ initialQueryValue: { shortId, value } }, (needsModeReset ? {
                            resultsMode: _config__WEBPACK_IMPORTED_MODULE_3__.SelectionType.NewSelection,
                            accumulatedRecords: []
                        } : {})));
                        if (needsModeReset) {
                            debugLogger.log('HASH', {
                                event: 'hash-reset-mode-to-new',
                                widgetId: this.props.id,
                                previousMode: this.state.resultsMode,
                                reason: 'hash-parameter-detected'
                            });
                        }
                    }
                    else {
                        debugLogger.log('HASH', {
                            event: 'hash-skipped',
                            widgetId: this.props.id,
                            shortId: shortId,
                            value: value,
                            reason: 'value-unchanged'
                        });
                    }
                    return; // Exit after first match
                }
            }
            // If no hash parameters match any shortId, log what's in the hash
            if (!foundMatch && Object.keys(allHashParams).length > 0) {
                debugLogger.log('HASH', {
                    event: 'hash-check-no-matching-shortId',
                    widgetId: this.props.id,
                    hash: hash,
                    allHashParams: allHashParams,
                    availableShortIds: shortIds,
                    note: 'Hash contains params but none match configured shortIds',
                    timestamp: Date.now()
                });
            }
            // If no hash parameters match any shortId, clear the state
            // This handles cases where hash parameters were removed
            if (this.state.initialQueryValue) {
                debugLogger.log('HASH', {
                    event: 'hash-cleared',
                    widgetId: this.props.id,
                    previousShortId: this.state.initialQueryValue.shortId,
                    previousValue: this.state.initialQueryValue.value,
                    reason: 'no-matching-hash-params',
                    allHashParams: allHashParams,
                    timestamp: Date.now()
                });
                this.setState({
                    initialQueryValue: undefined
                });
            }
        };
    }
    componentDidMount() {
        this.checkQueryStringForShortIds();
        // Listen for hash changes to detect when hash parameters are updated
        // This is needed when HelperSimple opens the widget with a hash parameter
        // or when hash parameters change while the widget is already mounted
        window.addEventListener('hashchange', this.checkQueryStringForShortIds);
        // Set up visibility detection
        this.setupVisibilityDetection();
        // Listen for selection changes from query-result
        window.addEventListener(_selection_utils__WEBPACK_IMPORTED_MODULE_14__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Listen for restore requests when identify popup closes
        window.addEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Notify HelperSimple that this widget is now open
        const openEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId: this.props.id,
                isOpen: true
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(openEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-opened',
            widgetId: this.props.id,
            isOpen: true,
            timestamp: new Date().toISOString()
        });
        // Also check after a short delay to catch cases where hash was already present
        // when widget was opened (e.g., by HelperSimple opening the widget)
        setTimeout(() => {
            this.checkQueryStringForShortIds();
        }, 100);
        // Graphics layer will be initialized when map view becomes available via JimuMapViewComponent
    }
    componentWillUnmount() {
        // Clean up hashchange listener
        window.removeEventListener('hashchange', this.checkQueryStringForShortIds);
        // Clean up selection change listener
        window.removeEventListener(_selection_utils__WEBPACK_IMPORTED_MODULE_14__.QUERYSIMPLE_SELECTION_EVENT, this.handleSelectionChange);
        // Clean up restore on identify close listener
        window.removeEventListener(RESTORE_ON_IDENTIFY_CLOSE_EVENT, this.handleRestoreOnIdentifyClose);
        // Clean up visibility detection
        this.cleanupVisibilityDetection();
        // Clean up graphics layer
        this.cleanupGraphicsLayer();
        // Notify HelperSimple that this widget is now closed
        const closeEvent = new CustomEvent(QUERYSIMPLE_WIDGET_STATE_EVENT, {
            detail: {
                widgetId: this.props.id,
                isOpen: false
            },
            bubbles: true,
            cancelable: true
        });
        window.dispatchEvent(closeEvent);
        debugLogger.log('WIDGET-STATE', {
            event: 'widget-closed',
            widgetId: this.props.id,
            isOpen: false,
            timestamp: new Date().toISOString()
        });
    }
    componentDidUpdate(prevProps) {
        if (prevProps.config.queryItems !== this.props.config.queryItems) {
            this.checkQueryStringForShortIds();
        }
        // Clean up graphics layer if config changed to disabled
        if (prevProps.config.useGraphicsLayerForHighlight !== this.props.config.useGraphicsLayerForHighlight) {
            if (!this.props.config.useGraphicsLayerForHighlight) {
                this.cleanupGraphicsLayer();
            }
            // If enabled, initialization will happen when map view becomes available via JimuMapViewComponent
        }
    }
    render() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        const { config, id, icon, label, layoutId, layoutItemId, controllerWidgetId } = this.props;
        const widgetLabel = this.props.intl.formatMessage({
            id: '_widgetLabel',
            defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_4__["default"]._widgetLabel
        });
        if (!((_a = config.queryItems) === null || _a === void 0 ? void 0 : _a.length)) {
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.WidgetPlaceholder, { icon: iconMap.iconQuery, widgetId: this.props.id, name: widgetLabel });
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Popper && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_popper_wrapper__WEBPACK_IMPORTED_MODULE_10__.TaskListPopperWrapper, { id: 0, icon: icon, popperTitle: label, minSize: (_c = (_b = config.sizeMap) === null || _b === void 0 ? void 0 : _b.arrangementIconPopper) === null || _c === void 0 ? void 0 : _c.minSize, defaultSize: (_e = (_d = config.sizeMap) === null || _d === void 0 ? void 0 : _d.arrangementIconPopper) === null || _e === void 0 ? void 0 : _e.defaultSize, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, isInPopper: true, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, className: 'pb-4', initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange }) }) }));
        }
        if (config.arrangeType === _config__WEBPACK_IMPORTED_MODULE_3__.QueryArrangeType.Inline && !controllerWidgetId) {
            return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list_inline__WEBPACK_IMPORTED_MODULE_9__.TaskListInline, { widgetId: id, widgetLabel: label, wrap: config.arrangeWrap, queryItems: config.queryItems, minSize: (_g = (_f = config.sizeMap) === null || _f === void 0 ? void 0 : _f.arrangementIconPopper) === null || _g === void 0 ? void 0 : _g.minSize, defaultSize: (_j = (_h = config.sizeMap) === null || _h === void 0 ? void 0 : _h.arrangementIconPopper) === null || _j === void 0 ? void 0 : _j.defaultSize, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed }) }));
        }
        return ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Paper, { ref: this.widgetRef, variant: 'flat', className: 'jimu-widget runtime-query', "data-widgetid": id, css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
        display: flex;
        flex-direction: column;
        height: 100%;
      `, children: [config.useGraphicsLayerForHighlight && config.highlightMapWidgetId && ((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_6__.JimuMapViewComponent, { useMapWidgetId: config.highlightMapWidgetId, onActiveViewChange: this.handleJimuMapViewChanged })), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "widget-header", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          padding: 6px 16px;
          border-bottom: 1px solid var(--sys-color-divider-secondary);
          background-color: var(--sys-color-surface);
        `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "widget-title", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--sys-color-text-primary);
          `, children: label || widgetLabel }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            flex: 1;
            overflow: auto;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_widget_context__WEBPACK_IMPORTED_MODULE_11__.QueryWidgetContext.Provider, { value: `${layoutId}:${layoutItemId}`, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_query_task_list__WEBPACK_IMPORTED_MODULE_8__.QueryTaskList, { widgetId: id, queryItems: config.queryItems, defaultPageSize: config.defaultPageSize, initialQueryValue: this.state.initialQueryValue, onHashParameterUsed: this.handleHashParameterUsed, resultsMode: this.state.resultsMode, onResultsModeChange: this.handleResultsModeChange, accumulatedRecords: this.state.accumulatedRecords, onAccumulatedRecordsChange: this.handleAccumulatedRecordsChange, useGraphicsLayerForHighlight: config.useGraphicsLayerForHighlight, graphicsLayer: this.graphicsLayerRef.current || undefined, mapView: this.mapViewRef.current || undefined, onInitializeGraphicsLayer: this.initializeGraphicsLayerFromOutputDS, onClearGraphicsLayer: this.clearGraphicsLayerIfExists, activeTab: this.state.activeTab, onTabChange: this.handleTabChange }) }) }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
            padding: 4px 12px;
            border-top: 1px solid var(--sys-color-divider-secondary);
            background-color: var(--sys-color-surface-paper);
            flex-shrink: 0;
            text-align: center;
          `, children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
              font-size: 0.75rem;
              color: var(--sys-color-text-tertiary);
              font-weight: 400;
              letter-spacing: 0.025em;
              display: inline-flex;
              align-items: center;
              gap: 4px;
            `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                  flex-shrink: 0;
                  opacity: 0.6;
                `, children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "16 18 22 12 16 6" }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("polyline", { points: "8 6 2 12 8 18" })] }), "QuerySimple by MapSimple", (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { css: (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.css) `
                margin-left: 6px;
                opacity: 0.5;
                font-size: 0.7rem;
              `, children: ["v", _version__WEBPACK_IMPORTED_MODULE_15__.WIDGET_VERSION] })] }) })] })] }));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_7__.versionManager;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9xdWVyeS1zaW1wbGUvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2QztBQUVVO0FBRWhELE1BQU0sVUFBVSxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO0lBQ3JELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHO0lBQ3RCLE1BQU0sRUFBRSxTQUFTLEtBQWdCLEtBQUssRUFBaEIsTUFBTSxVQUFLLEtBQUssRUFBaEMsYUFBd0IsQ0FBUTtJQUV0QyxNQUFNLE9BQU8sR0FBRyxxREFBVSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQztJQUN0RSxJQUFJLENBQUMsR0FBRztRQUFFLE9BQU8sdUZBQUssU0FBUyxFQUFFLE9BQU8sSUFBTSxNQUFhLEVBQUk7SUFDL0QsT0FBTyxnRUFBQyxHQUFHLGtCQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLHlFQUFHLElBQU0sTUFBTSxFQUFJO0FBQzFELENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWDRDO0FBRVc7QUFFakQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxLQUF3QixFQUFFLEVBQUU7SUFDdEQsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUc7SUFDdEIsTUFBTSxFQUFFLFNBQVMsS0FBZ0IsS0FBSyxFQUFoQixNQUFNLFVBQUssS0FBSyxFQUFoQyxhQUF3QixDQUFRO0lBRXRDLE1BQU0sT0FBTyxHQUFHLHFEQUFVLENBQUMsK0JBQStCLEVBQUUsU0FBUyxDQUFDO0lBQ3RFLElBQUksQ0FBQyxHQUFHO1FBQUUsT0FBTyx1RkFBSyxTQUFTLEVBQUUsT0FBTyxJQUFNLE1BQWEsRUFBSTtJQUMvRCxPQUFPLGdFQUFDLEdBQUcsa0JBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxH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LE9BQU8sRUFBQyxXQUFXLEVBQ25CLElBQUksRUFBQyxNQUFNLEVBQ1gsTUFBTSxFQUFDLGNBQWMsRUFDckIsV0FBVyxFQUFDLEdBQUcsRUFDZixHQUFHLEVBQUUsOENBQUc7OztpQkFHUCxhQUVELDhFQUFVLE1BQU0sRUFBQyxrQkFBa0IsR0FBRSxFQUNyQyw4RUFBVSxNQUFNLEVBQUMsZUFBZSxHQUFFLElBQzlCLDhCQUVOLDJFQUFNLEdBQUcsRUFBRSw4Q0FBRzs7OztlQUliLGtCQUNHLHFEQUFjLElBQ1gsSUFDRixHQUNILElBQ0YsSUFDQSxDQUNUO0lBQ0gsQ0FBQzs7QUE3cURNLHFCQUFjLEdBQUcsNERBQWM7aUVBWm5CLE1BQU07QUE2ckRuQixTQUFTLDJCQUEyQixDQUFDLEdBQUcsSUFBSSxxQkFBdUIsR0FBRyxHQUFHLEVBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvZXhwYW5kLWFsbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mby50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL2ZpbGxlZC9kaXJlY3Rpb25hbC9kb3duLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vbW9yZS1ob3Jpem9udGFsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9lcnJvci5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvaWNvbi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvY29uZmlnLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL2RhdGEtYWN0aW9ucy9hZGQtdG8tbWFwLWFjdGlvbi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvZGF0YS1hY3Rpb25zL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9kZWZhdWx0LXF1ZXJ5LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9hc3NldHMvaWNvbnMvc2hvdy1vbi1tYXAuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvYnVmZmVyLWlucHV0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tZHJhdy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9nZW9tZXRyeS1mcm9tLWRzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dlb21ldHJ5LWZyb20tbWFwLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2dyYXBoaWNzLWxheWVyLXV0aWxzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvaW50ZXJhY3RpdmUtZHJhdy10b29sLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL2xvYWRpbmctcmVzdWx0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXJlc3VsdC1pdGVtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXJlc3VsdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWNvbnRleHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1mb3JtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stbGFiZWwudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1saXN0LWlubGluZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9xdWVyeS10YXNrLWxpc3QtcG9wcGVyLXdyYXBwZXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdGFzay1saXN0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2stc3BhdGlhbC1mb3JtLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3F1ZXJ5LXRhc2sudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvcXVlcnktdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9yZXN1bHRzLW1hbmFnZW1lbnQtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9zZWxlY3Rpb24tdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS9zaW1wbGUtbGlzdC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvcnVudGltZS90cmFuc2xhdGlvbnMvZGVmYXVsdC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3VzZUF1dG9IZWlnaHQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9xdWVyeS1zaW1wbGUvc3JjL3J1bnRpbWUvd2lkZ2V0LWNvbmZpZy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC1jb250ZXh0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy92ZXJzaW9uLW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL3F1ZXJ5LXNpbXBsZS9zcmMvdmVyc2lvbi50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZS9lbW90aW9uXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWFyY2dpc1wiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdGhlbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdWlcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdWkvYmFzaWMvc3FsLWV4cHJlc3Npb24tcnVudGltZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwid2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb25cIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWNvcmUvbGliL3NldC1wdWJsaWMtcGF0aC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvcXVlcnktc2ltcGxlL3NyYy9ydW50aW1lL3dpZGdldC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvZG93bi5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgRG93bkZpbGxlZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9maWxsZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFJpZ2h0RmlsbGVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEFycm93TGVmdE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHR5cGUgeyBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2NvbGxhcHNlLWFsbC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgQ29sbGFwc2VBbGxPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9leHBhbmQtYWxsLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBFeHBhbmRBbGxPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB0eXBlIHsgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2guc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFRyYXNoT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgdHlwZSB7IFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEluZm9PdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm0xNCA0LTYgOC02LTh6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTQgMiA4IDYtOCA2elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTIgN2ExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJtNSAxYTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMG02IDBhMSAxIDAgMSAxIDIgMCAxIDEgMCAwIDEtMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMTUgNy41YS41Mi41MiAwIDAgMS0uNTE2LjUyN0gyLjk3Nkw2LjQ3MyAxMS42YS41MzUuNTM1IDAgMCAxIDAgLjc0Ni41MS41MSAwIDAgMS0uNzMgMEwxIDcuNWw0Ljc0My00Ljg0NmEuNTEuNTEgMCAwIDEgLjczIDAgLjUzNS41MzUgMCAwIDEgMCAuNzQ2TDIuOTc2IDYuOTczaDExLjUwOGMuMjg1IDAgLjUxNi4yMzYuNTE2LjUyN1xcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTUuMDM2IDYuMTQ2YS41LjUgMCAwIDAtLjcwOCAwTDEuMTQ2IDkuMzI4YS41LjUgMCAxIDAgLjcwOC43MDhsMi4zMjgtMi4zMjlWMTQuNWgxVjcuNzA3bDIuMzI4IDIuMzI5YS41LjUgMCAxIDAgLjcwOC0uNzA4elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xIDNoMTR2MUgxek05IDdoNnYxSDl6TTQuMzI4IDE0LjM1NGEuNS41IDAgMCAwIC43MDggMGwzLjE4Mi0zLjE4MmEuNS41IDAgMSAwLS43MDgtLjcwOGwtMi4zMjggMi4zMjlWNmgtMXY2Ljc5M2wtMi4zMjgtMi4zMjhhLjUuNSAwIDEgMC0uNzA4LjcwN3pcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk00LjY1MyAxMy44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4TDEwLjI0IDggNC42NTMgMi44NTRhLjQ4NS40ODUgMCAwIDEgMC0uNzA4LjU0LjU0IDAgMCAxIC43MzggMGw1Ljk1NiA1LjVhLjQ4NS40ODUgMCAwIDEgMCAuNzA4bC01Ljk1NiA1LjVhLjU0LjU0IDAgMCAxLS43MzggMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTYgNi41YS41LjUgMCAwIDEgMSAwdjZhLjUuNSAwIDAgMS0xIDB6TTkuNSA2YS41LjUgMCAwIDAtLjUuNXY2YS41LjUgMCAwIDAgMSAwdi02YS41LjUgMCAwIDAtLjUtLjVcXFwiPjwvcGF0aD48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xMSAwSDVhMSAxIDAgMCAwLTEgMXYySC41YS41LjUgMCAwIDAgMCAxaDEuNmwuODEgMTEuMWExIDEgMCAwIDAgLjk5NS45aDguMTlhMSAxIDAgMCAwIC45OTUtLjlMMTMuOSA0aDEuNmEuNS41IDAgMCAwIDAtMUgxMlYxYTEgMSAwIDAgMC0xLTFtMCAzVjFINXYyem0xLjg5NSAxaC05Ljc5bC44IDExaDguMTl6XFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk04IDE2QTggOCAwIDEgMSA4IDBhOCA4IDAgMCAxIDAgMTZtMC0xQTcgNyAwIDEgMCA4IDFhNyA3IDAgMCAwIDAgMTRNOCA0YS45MDUuOTA1IDAgMCAwLS45Ljk5NWwuMzUgMy41MDdhLjU1Mi41NTIgMCAwIDAgMS4xIDBsLjM1LTMuNTA3QS45MDUuOTA1IDAgMCAwIDggNG0xIDdhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNOCA1LjVhMSAxIDAgMSAwIDAtMiAxIDEgMCAwIDAgMCAyTTYuNSA3LjVBLjUuNSAwIDAgMSA3IDdoMS41djQuNWgxYS41LjUgMCAwIDEgMCAxaC0zYS41LjUgMCAwIDEgMC0xaDFWOEg3YS41LjUgMCAwIDEtLjUtLjVcXFwiPjwvcGF0aD48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk04IDE2QTggOCAwIDEgMSA4IDBhOCA4IDAgMCAxIDAgMTZtMC0xQTcgNyAwIDEgMCA4IDFhNyA3IDAgMCAwIDAgMTRcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMi4xMjUgMTQuMzM0IDE0SDEuNjY3em0tLjg4Mi0uNDdhMSAxIDAgMCAxIDEuNzY1IDBsNi4zMzMgMTEuODc0QTEgMSAwIDAgMSAxNC4zMzQgMTVIMS42NjdhMSAxIDAgMCAxLS44ODItMS40N3pNOCA0Ljg3NGEuOTA1LjkwNSAwIDAgMC0uOS45OTVsLjM1IDMuNTA3YS41NTIuNTUyIDAgMCAwIDEuMSAwTDguOSA1Ljg3YS45MDUuOTA1IDAgMCAwLS45LS45OTVtMSA3YTEgMSAwIDEgMS0yIDAgMSAxIDAgMCAxIDIgMFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAyMCAyMFxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTguNSAzQTUuNSA1LjUgMCAwIDEgMTQgOC41YTUuNSA1LjUgMCAwIDEtMS4yNzMgMy41MjdsNC4wNTMgNC4wNTRhLjc1Ljc1IDAgMSAxLTEuMDYgMS4wNmwtNC4wNTQtNC4wNTNhNS41IDUuNSAwIDAgMS0zLjUyNyAxLjI3MyA1LjUgNS41IDAgMSAxIDAtMTFIOC41em0wIDEuNWgtLjM2MWE0IDQgMCAxIDAgMCA4IDQgNCAwIDAgMCAwLTh6XFxcIj48L3BhdGg+PHJlY3Qgd2lkdGg9XFxcIjE5XFxcIiBoZWlnaHQ9XFxcIjE5XFxcIiB4PVxcXCIuNVxcXCIgeT1cXFwiLjVcXFwiIHN0cm9rZT1cXFwiIzAwMFxcXCIgcng9XFxcIjEuNVxcXCI+PC9yZWN0Pjwvc3ZnPlwiIiwiaW1wb3J0IHR5cGUgeyBTcGF0aWFsUmVsYXRpb25zaGlwLCBVbml0cyB9IGZyb20gJ0Blc3JpL2FyY2dpcy1yZXN0LWZlYXR1cmUtc2VydmljZSdcbmltcG9ydCB0eXBlIHsgSW1tdXRhYmxlT2JqZWN0LCBJbW11dGFibGVBcnJheSwgU3FsRXhwcmVzc2lvbiwgVXNlRGF0YVNvdXJjZSwgSWNvblJlc3VsdCwgT3JkZXJCeU9wdGlvbiB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgU2l6ZSB9IGZyb20gJ2ppbXUtdWknXG5cbmV4cG9ydCBlbnVtIENyZWF0ZVRvb2xUeXBlIHtcbiAgUG9pbnQgPSAnUG9pbnQnLFxuICBQb2x5bGluZSA9ICdQb2x5bGluZScsXG4gIFBvbHlnb24gPSAnUG9seWdvbicsXG4gIFJlY3RhbmdsZSA9ICdSZWN0YW5nbGUnLFxuICBDaXJjbGUgPSAnQ2lyY2xlJ1xufVxuXG5leHBvcnQgZW51bSBTZWxlY3Rpb25UeXBlIHtcbiAgTmV3U2VsZWN0aW9uID0gJ05FV19TRUxFQ1RJT04nLFxuICBBZGRUb1NlbGVjdGlvbiA9ICdBRERfVE9fQ1VSUkVOVF9TRUxFQ1RJT04nLFxuICBSZW1vdmVGcm9tU2VsZWN0aW9uID0gJ1JFTU9WRV9GUk9NX0NVUlJFTlRfU0VMRUNUSU9OJyxcbiAgU3Vic2V0U2VsZWN0aW9uID0gJ1NVQlNFVF9GUk9NX0NVUlJFTlRfU0VMRUNUSU9OJyxcbiAgU3dpdGNoU2VsZWN0aW9uID0gJ1NXSVRDSF9DVVJSRU5UX1NFTEVDVElPTicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmllbGQge1xuICBuYW1lOiBzdHJpbmdcbiAgYWxpYXM/OiBzdHJpbmdcbiAgbGFiZWw/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGVudW0gUXVlcnlBcnJhbmdlVHlwZSB7XG4gIEJsb2NrID0gJ0JMT0NLJyxcbiAgSW5saW5lID0gJ0lOTElORScsXG4gIFBvcHBlciA9ICdQT1BQRVInLFxufVxuXG5leHBvcnQgZW51bSBTcGF0aWFsRmlsdGVyVHlwZSB7XG4gIEN1cnJlbnRNYXBFeHRlbnQgPSAnQ3VycmVudE1hcEV4dGVudCcsXG4gIEludGVyYWN0aXZlRHJhd01vZGUgPSAnSW50ZXJhY3RpdmVEcmF3TW9kZScsXG4gIE5vbmUgPSAnJ1xufVxuXG5leHBvcnQgZW51bSBTcGF0aWFsUmVsYXRpb24ge1xuICBJbnRlcnNlY3QgPSAnaW50ZXJzZWN0cycsXG4gIENvbnRhaW4gPSAnY29udGFpbnMnLFxuICBDcm9zcyA9ICdjcm9zc2VzJyxcbiAgRW52ZWxvcGVJbnRlcnNlY3QgPSAnZW52ZWxvcGUtaW50ZXJzZWN0cycsXG4gIEluZGV4SW50ZXJzZWN0ID0gJ2luZGV4LWludGVyc2VjdHMnLFxuICBPdmVybGFwID0gJ292ZXJsYXBzJyxcbiAgVG91Y2ggPSAndG91Y2hlcycsXG4gIFdpdGhpbiA9ICd3aXRoaW4nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNwYXRpYWxGaWx0ZXJPYmoge1xuICBnZW9tZXRyeTogYW55XG4gIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpY1xuICBsYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4gIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW5cbiAgcmVsYXRpb24/OiBTcGF0aWFsUmVsYXRpb25cbiAgYnVmZmVyPzogeyBkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSB9XG59XG5cbmV4cG9ydCBjb25zdCBtYXBKU0FQSVNwYXRpYWxSZWxUb0RzU3BhdGlhbFJlbDogeyBba2V5OiBzdHJpbmddOiBTcGF0aWFsUmVsYXRpb25zaGlwIH0gPSB7XG4gIFtTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0XTogJ2VzcmlTcGF0aWFsUmVsSW50ZXJzZWN0cycsXG4gIFtTcGF0aWFsUmVsYXRpb24uQ29udGFpbl06ICdlc3JpU3BhdGlhbFJlbENvbnRhaW5zJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5Dcm9zc106ICdlc3JpU3BhdGlhbFJlbENyb3NzZXMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLkVudmVsb3BlSW50ZXJzZWN0XTogJ2VzcmlTcGF0aWFsUmVsRW52ZWxvcGVJbnRlcnNlY3RzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5JbmRleEludGVyc2VjdF06ICdlc3JpU3BhdGlhbFJlbEluZGV4SW50ZXJzZWN0cycsXG4gIFtTcGF0aWFsUmVsYXRpb24uT3ZlcmxhcF06ICdlc3JpU3BhdGlhbFJlbE92ZXJsYXBzJyxcbiAgW1NwYXRpYWxSZWxhdGlvbi5Ub3VjaF06ICdlc3JpU3BhdGlhbFJlbFRvdWNoZXMnLFxuICBbU3BhdGlhbFJlbGF0aW9uLldpdGhpbl06ICdlc3JpU3BhdGlhbFJlbFdpdGhpbidcbn1cblxuZXhwb3J0IGVudW0gVW5pdFR5cGUge1xuICBNaWxlcyA9ICdNaWxlcycsXG4gIEtpbG9tZXRlcnMgPSAnS2lsb21ldGVycycsXG4gIEZlZXQgPSAnRmVldCcsXG4gIE1ldGVycyA9ICdNZXRlcnMnLFxuICBOYXV0aWNhbE1pbGVzID0gJ05hdXRpY2FsTWlsZXMnLFxufVxuXG5leHBvcnQgY29uc3QgbWFwSlNBUElVbml0VG9Ec1VuaXQ6IHsgW2tleTogc3RyaW5nXTogVW5pdHMgfSA9IHtcbiAgW1VuaXRUeXBlLk1pbGVzXTogJ2VzcmlTUlVuaXRfU3RhdHV0ZU1pbGUnLFxuICBbVW5pdFR5cGUuS2lsb21ldGVyc106ICdlc3JpU1JVbml0X0tpbG9tZXRlcicsXG4gIFtVbml0VHlwZS5GZWV0XTogJ2VzcmlTUlVuaXRfRm9vdCcsXG4gIFtVbml0VHlwZS5NZXRlcnNdOiAnZXNyaVNSVW5pdF9NZXRlcicsXG4gIFtVbml0VHlwZS5OYXV0aWNhbE1pbGVzXTogJ2VzcmlTUlVuaXRfTmF1dGljYWxNaWxlJ1xufVxuXG5leHBvcnQgZW51bSBMaXN0RGlyZWN0aW9uIHtcbiAgSG9yaXpvbnRhbCA9ICdIb3Jpem9udGFsJyxcbiAgVmVydGljYWwgPSAnVmVydGljYWwnLFxufVxuXG5leHBvcnQgZW51bSBQYWdpbmdUeXBlIHtcbiAgTXVsdGlQYWdlID0gJ011bHRpUGFnZScsXG4gIExhenlMb2FkID0gJ0xhenlMb2FkJyxcbiAgU2ltcGxlID0gJ1NpbXBsZScsIC8vIFJlbmRlciBhbGwgcmVjb3JkcyBhdCBvbmNlLCBubyBsYXp5IGxvYWRpbmcgb3IgcGFnaW5hdGlvblxufVxuXG5leHBvcnQgZW51bSBGaWVsZHNUeXBlIHtcbiAgUG9wdXBTZXR0aW5nID0gJ1BvcHVwU2V0dGluZycsXG4gIFNlbGVjdEF0dHJpYnV0ZXMgPSAnU2VsZWN0QXR0cmlidXRlcycsXG59XG5cbmV4cG9ydCBlbnVtIFNvcnREaXJlY3Rpb24ge1xuICBBc2MgPSAnQXNjJyxcbiAgRGVzYyA9ICdEZXNjJyxcbn1cblxuZXhwb3J0IGVudW0gUmVzdWx0U2VsZWN0TW9kZSB7XG4gIFNpbmdsZSA9ICdTaW5nbGUnLFxuICBNdWx0aXBsZSA9ICdNdWx0aXBsZScsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU29ydE9wdGlvbiB7XG4gIG5hbWU6IHN0cmluZ1xuICBkaXJlY3Rpb246IFNvcnREaXJlY3Rpb25cbn1cblxuZXhwb3J0IGVudW0gU3ltYm9sVHlwZSB7XG4gIERlZmF1bHRTeW1ib2wgPSAnRGVmYXVsdFN5bWJvbCcsXG4gIEN1c3RvbVN5bWJvbCA9ICdDdXN0b21TeW1ib2wnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5SXRlbVR5cGUge1xuICBjb25maWdJZDogc3RyaW5nXG4gIGljb24/OiBJY29uUmVzdWx0XG4gIG5hbWU/OiBzdHJpbmdcbiAgZGlzcGxheUxhYmVsPzogYm9vbGVhblxuICB1c2VEYXRhU291cmNlPzogVXNlRGF0YVNvdXJjZVxuICBvdXRwdXREYXRhU291cmNlSWQ/OiBzdHJpbmdcbiAgdXNlQXR0cmlidXRlRmlsdGVyPzogYm9vbGVhblxuICB1c2VTcGF0aWFsRmlsdGVyPzogYm9vbGVhblxuICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbD86IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyTGFiZWw/OiBzdHJpbmdcbiAgYXR0cmlidXRlRmlsdGVyRGVzYz86IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyRGVzYz86IHN0cmluZ1xuICByZXN1bHRzTGFiZWw/OiBzdHJpbmdcbiAgc3FsRXhwck9iaj86IFNxbEV4cHJlc3Npb25cbiAgc3BhdGlhbE1hcFdpZGdldElkcz86IHN0cmluZ1tdXG4gIHNwYXRpYWxGaWx0ZXJUeXBlcz86IFNwYXRpYWxGaWx0ZXJUeXBlW11cbiAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzPzogQ3JlYXRlVG9vbFR5cGVbXVxuICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXI/OiBib29sZWFuXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlPzogbnVtYmVyXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXQ/OiBVbml0VHlwZVxuICBzcGF0aWFsUmVsYXRpb25zPzogU3BhdGlhbFJlbGF0aW9uW11cbiAgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM/OiBVc2VEYXRhU291cmNlW11cbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlU2VsZWN0VG9vbD86IGJvb2xlYW5cbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyPzogYm9vbGVhblxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJEaXN0YW5jZT86IG51bWJlclxuICBzcGF0aWFsUmVsYXRpb25CdWZmZXJVbml0PzogVW5pdFR5cGVcbiAgc3BhdGlhbEluY2x1ZGVSdW50aW1lRGF0YT86IGJvb2xlYW5cbiAgcmVzdWx0TGlzdERpcmVjdGlvbj86IExpc3REaXJlY3Rpb25cbiAgcmVzdWx0UGFnaW5nU3R5bGU/OiBQYWdpbmdUeXBlXG4gIHJlc3VsdEZpZWxkc1R5cGU/OiBGaWVsZHNUeXBlXG4gIHJlc3VsdFRpdGxlRmllbGRzPzogc3RyaW5nW11cbiAgcmVzdWx0VGl0bGVFeHByZXNzaW9uPzogc3RyaW5nXG4gIHJlc3VsdERpc3BsYXlGaWVsZHM/OiBzdHJpbmdbXVxuICByZXN1bHRTeW1ib2xUeXBlPzogU3ltYm9sVHlwZVxuICByZXN1bHRDdXN0b21TeW1ib2w/OiBhbnlcbiAgcmVzdWx0QWxsb3dDaGFuZ2VTeW1ib2w/OiBib29sZWFuXG4gIHJlc3VsdEV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbiAgcmVzdWx0U2VsZWN0TW9kZT86IFJlc3VsdFNlbGVjdE1vZGVcbiAgYWxsb3dFeHBvcnQ/OiBib29sZWFuXG4gIHNvcnRPcHRpb25zPzogT3JkZXJCeU9wdGlvbltdXG4gIGl0ZW1TaXplTWFwPzoge1xuICAgIGFycmFuZ2VtZW50SG9yaXpvbnRhbFBvcHBlcj86IFNpemVNYXBcbiAgfVxuICAvLyBHcm91cGluZyBmaWVsZHNcbiAgZ3JvdXBJZD86IHN0cmluZ1xuICBncm91cERpc3BsYXlOYW1lPzogc3RyaW5nXG4gIHNlYXJjaEFsaWFzPzogc3RyaW5nXG4gIHNob3J0SWQ/OiBzdHJpbmdcbiAgem9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4gIC8vIERpc3BsYXkgb3JkZXIgKGxvd2VyIG51bWJlcnMgYXBwZWFyIGZpcnN0LCBvcHRpb25hbClcbiAgb3JkZXI/OiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaXplTWFwIHtcbiAgbWluU2l6ZT86IFNpemVcbiAgZGVmYXVsdFNpemU/OiBTaXplXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ0NvbmZpZyB7XG4gIHF1ZXJ5SXRlbXM/OiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPlxuICBhcnJhbmdlVHlwZTogUXVlcnlBcnJhbmdlVHlwZVxuICBhcnJhbmdlV3JhcD86IGJvb2xlYW5cbiAgcmVzdWx0TGlzdERpcmVjdGlvbj86IExpc3REaXJlY3Rpb25cbiAgcmVzdWx0UGFnaW5nU3R5bGU/OiBQYWdpbmdUeXBlXG4gIGxhenlMb2FkSW5pdGlhbFBhZ2VTaXplPzogbnVtYmVyXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuIC8vIFVzZSBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChpbmRlcGVuZGVudCBvZiBsYXllciB2aXNpYmlsaXR5KVxuICBoaWdobGlnaHRNYXBXaWRnZXRJZD86IHN0cmluZyAvLyBNYXAgd2lkZ2V0IElEIHRvIHVzZSBmb3IgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gIHNpemVNYXA/OiB7XG4gICAgYXJyYW5nZW1lbnRJY29uUG9wcGVyPzogU2l6ZU1hcFxuICB9XG59XG5cbmV4cG9ydCB0eXBlIElNQ29uZmlnID0gSW1tdXRhYmxlT2JqZWN0PFNldHRpbmdDb25maWc+XG5cblxuIiwiLyoqXG4gKiBDdXN0b20gXCJBZGQgdG8gTWFwXCIgZGF0YSBhY3Rpb24gZm9yIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIFxuICogVGhpcyBhY3Rpb24gcmVwbGFjZXMgdGhlIGZyYW1ld29yaydzIFwiU2hvdyBvbiBNYXBcIiBhY3Rpb24gd2l0aCBhIGN1c3RvbVxuICogaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MgKHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKS5cbiAqIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IGJlaGF2aW9yIHdpdGggcXVlcnkgcmVzdWx0cyBhbmQgcHJvcGVyIGludGVncmF0aW9uXG4gKiB3aXRoIHRoZSB3aWRnZXQncyBcIkNsZWFyIHJlc3VsdHNcIiBmdW5jdGlvbmFsaXR5LlxuICovXG5cbmltcG9ydCB7IHR5cGUgRGF0YVJlY29yZFNldCwgdHlwZSBEYXRhQWN0aW9uLCBEYXRhTGV2ZWwsIHR5cGUgSW50bFNoYXBlLCBEYXRhQWN0aW9uTWFuYWdlciwgdHlwZSBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggfSBmcm9tICcuLi9ydW50aW1lL3NlbGVjdGlvbi11dGlscydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcbmltcG9ydCB0eXBlIHsgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgdHlwZSB7IFF1ZXJ5SXRlbVR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5cbi8qKlxuICogQ3JlYXRlcyBhIGN1c3RvbSBcIkFkZCB0byBNYXBcIiBkYXRhIGFjdGlvbiB0aGF0IHVzZXMgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy5cbiAqIFxuICogVGhpcyBhY3Rpb24gcmVwbGFjZXMgdGhlIGZyYW1ld29yaydzIFwiU2hvdyBvbiBNYXBcIiBhY3Rpb24gYW5kIGVuc3VyZXMgY29uc2lzdGVudFxuICogYmVoYXZpb3Igd2l0aCBRdWVyeVNpbXBsZSdzIHF1ZXJ5IHJlc3VsdHMgYnkgdXNpbmcgdGhlIHNhbWUgc2VsZWN0aW9uIG1lY2hhbmlzbS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRCB0aGF0IHByb3ZpZGVzIHRoaXMgYWN0aW9uXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlICh1c2VkIGZvciBzZWxlY3Rpb24gb24gdGhlIG9yaWdpbiBsYXllcilcbiAqIEBwYXJhbSBpbnRsIC0gVGhlIEludGwgb2JqZWN0IGZvciBpbnRlcm5hdGlvbmFsaXphdGlvblxuICogQHBhcmFtIHF1ZXJ5SXRlbSAtIE9wdGlvbmFsIHF1ZXJ5IGl0ZW0gY29uZmlndXJhdGlvbiAoZm9yIHpvb21Ub1NlbGVjdGVkIHNldHRpbmcpXG4gKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSB6b29tIG92ZXJyaWRlIGZyb20gdGhlIHF1ZXJ5IGZvcm1cbiAqIEByZXR1cm5zIEEgRGF0YUFjdGlvbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBieSBEYXRhQWN0aW9uTGlzdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWRkVG9NYXBBY3Rpb24oXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlLFxuICBpbnRsOiBJbnRsU2hhcGUsXG4gIHF1ZXJ5SXRlbT86IFF1ZXJ5SXRlbVR5cGUsXG4gIHJ1bnRpbWVab29tVG9TZWxlY3RlZD86IGJvb2xlYW5cbik6IERhdGFBY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIGlkOiBgJHt3aWRnZXRJZH0tYWRkVG9NYXBgLFxuICAgIG5hbWU6ICdhZGRUb01hcCcsXG4gICAgbGFiZWw6IGludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnYWRkVG9NYXAnLCBkZWZhdWx0TWVzc2FnZTogJ0FkZCB0byBtYXAnIH0pLFxuICAgIC8vIEljb24gbWF0Y2hlcyB0aGUgZnJhbWV3b3JrJ3MgXCJTaG93IG9uIE1hcFwiIGFjdGlvbiBmb3IgY29uc2lzdGVuY3lcbiAgICBpY29uOiByZXF1aXJlKCcuLi9ydW50aW1lL2Fzc2V0cy9pY29ucy9zaG93LW9uLW1hcC5zdmcnKS5kZWZhdWx0IHx8IHJlcXVpcmUoJy4uL3J1bnRpbWUvYXNzZXRzL2ljb25zL3Nob3ctb24tbWFwLnN2ZycpLFxuICAgIC8vIE5vdGU6IEluZGV4IG1heSBub3QgY29udHJvbCBwb3NpdGlvbiBpZiBleHRyYUFjdGlvbnMgYXJlIGFsd2F5cyBhcHBlbmRlZCBhZnRlciBmcmFtZXdvcmsgYWN0aW9uc1xuICAgIGluZGV4OiAtMTAwLFxuICAgIHdpZGdldElkLFxuICAgIGludGwsXG4gICAgc3VwcG9ydFByb3ZpZGVyV2lkZ2V0OiB0cnVlLFxuICAgIFxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhpcyBhY3Rpb24gY2FuIHByb2Nlc3MgdGhlIGdpdmVuIGRhdGEgc2V0cy5cbiAgICAgKiBTdXBwb3J0cyBSZWNvcmRzIGxldmVsIGFjdGlvbnMgd2l0aCBmZWF0dXJlIGRhdGEgcmVjb3Jkcy5cbiAgICAgKi9cbiAgICBpc1N1cHBvcnRlZDogYXN5bmMgKGRhdGFTZXRzOiBEYXRhUmVjb3JkU2V0W10sIGRhdGFMZXZlbDogRGF0YUxldmVsLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBhY3Rpb25XaWRnZXRJZCxcbiAgICAgICAgZGF0YUxldmVsLFxuICAgICAgICBkYXRhU2V0c0NvdW50OiBkYXRhU2V0cz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc091dHB1dERTOiAhIW91dHB1dERTXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBPbmx5IHN1cHBvcnQgUmVjb3JkcyBsZXZlbCBhY3Rpb25zXG4gICAgICBpZiAoZGF0YUxldmVsICE9PSBEYXRhTGV2ZWwuUmVjb3Jkcykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vdCBSZWNvcmRzIGxldmVsJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTmVlZCBhdCBsZWFzdCBvbmUgZGF0YSBzZXQgd2l0aCByZWNvcmRzXG4gICAgICBpZiAoIWRhdGFTZXRzIHx8IGRhdGFTZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLWlzU3VwcG9ydGVkJyxcbiAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgIHJlYXNvbjogJ05vIGRhdGEgc2V0cydcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgcmVjb3JkcyBhbmQgb3V0cHV0IGRhdGEgc291cmNlXG4gICAgICBjb25zdCBoYXNSZWNvcmRzID0gZGF0YVNldHMuc29tZShkcyA9PiBkcy5yZWNvcmRzICYmIGRzLnJlY29yZHMubGVuZ3RoID4gMClcbiAgICAgIGNvbnN0IHN1cHBvcnRlZCA9IGhhc1JlY29yZHMgJiYgISFvdXRwdXREU1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1pc1N1cHBvcnRlZCcsXG4gICAgICAgIHJlc3VsdDogc3VwcG9ydGVkLFxuICAgICAgICBoYXNSZWNvcmRzLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRhdGFTZXRzLnJlZHVjZSgoc3VtLCBkcykgPT4gc3VtICsgKGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwKSwgMClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVybiBzdXBwb3J0ZWRcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBhY3Rpb24gYnkgc2VsZWN0aW5nIHJlY29yZHMgdXNpbmcgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2Vzcy5cbiAgICAgKi9cbiAgICBvbkV4ZWN1dGU6IGFzeW5jIChkYXRhU2V0czogRGF0YVJlY29yZFNldFtdLCBkYXRhTGV2ZWw6IERhdGFMZXZlbCwgYWN0aW9uV2lkZ2V0SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGFjdGlvbldpZGdldElkLFxuICAgICAgICBkYXRhTGV2ZWwsXG4gICAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFNcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmICghb3V0cHV0RFMgfHwgZGF0YUxldmVsICE9PSBEYXRhTGV2ZWwuUmVjb3Jkcykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb246ICFvdXRwdXREUyA/ICdObyBvdXRwdXREUycgOiAnTm90IFJlY29yZHMgbGV2ZWwnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDb2xsZWN0IGFsbCByZWNvcmRzIGZyb20gYWxsIGRhdGEgc2V0c1xuICAgICAgY29uc3QgYWxsUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gICAgICBkYXRhU2V0cy5mb3JFYWNoKGRhdGFTZXQgPT4ge1xuICAgICAgICBpZiAoZGF0YVNldC5yZWNvcmRzICYmIGRhdGFTZXQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gRmlsdGVyIHRvIG9ubHkgRmVhdHVyZURhdGFSZWNvcmQgdHlwZXNcbiAgICAgICAgICBjb25zdCBmZWF0dXJlUmVjb3JkcyA9IGRhdGFTZXQucmVjb3Jkcy5maWx0ZXIoXG4gICAgICAgICAgICAocmVjb3JkKTogcmVjb3JkIGlzIEZlYXR1cmVEYXRhUmVjb3JkID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlY29yZCAmJiB0eXBlb2YgKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZCkuZ2V0R2VvbWV0cnkgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApXG4gICAgICAgICAgYWxsUmVjb3Jkcy5wdXNoKC4uLmZlYXR1cmVSZWNvcmRzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoYWxsUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgICBhY3Rpb246ICdhZGRUb01hcC1vbkV4ZWN1dGUnLFxuICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgcmVhc29uOiAnTm8gZmVhdHVyZSByZWNvcmRzIGZvdW5kJ1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gR2V0IHJlY29yZCBJRHNcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IGFsbFJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdEQVRBLUFDVElPTicsIHtcbiAgICAgICAgYWN0aW9uOiAnYWRkVG9NYXAtb25FeGVjdXRlJyxcbiAgICAgICAgcmVjb3Jkc0NvdW50OiBhbGxSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVjb3JkSWRzOiByZWNvcmRJZHMuc2xpY2UoMCwgMTApLCAvLyBMb2cgZmlyc3QgMTAgSURzXG4gICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVc2UgUXVlcnlTaW1wbGUncyBzZWxlY3Rpb24gcHJvY2VzcyAtIHNlbGVjdHMgb24gb3JpZ2luIGxheWVyIGFuZCBwdWJsaXNoZXMgc2VsZWN0aW9uIG1lc3NhZ2VzXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgY29uc2lzdGVudCBiZWhhdmlvciB3aXRoIHF1ZXJ5IHJlc3VsdHMgYW5kIHByb3BlciBpbnRlZ3JhdGlvbiB3aXRoIFwiQ2xlYXIgcmVzdWx0c1wiXG4gICAgICB0cnkge1xuICAgICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCh3aWRnZXRJZCwgb3V0cHV0RFMsIHJlY29yZElkcywgYWxsUmVjb3JkcywgdHJ1ZSlcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluZSB6b29tIGJlaGF2aW9yOiBydW50aW1lIG92ZXJyaWRlIHRha2VzIHByZWNlZGVuY2UsIHRoZW4gcXVlcnlJdGVtIGNvbmZpZywgZGVmYXVsdHMgdG8gdHJ1ZVxuICAgICAgICBjb25zdCBzaG91bGRab29tID0gcnVudGltZVpvb21Ub1NlbGVjdGVkICE9PSB1bmRlZmluZWQgXG4gICAgICAgICAgPyBydW50aW1lWm9vbVRvU2VsZWN0ZWQgXG4gICAgICAgICAgOiAocXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCAhPT0gZmFsc2UpXG4gICAgICAgIFxuICAgICAgICBpZiAoc2hvdWxkWm9vbSAmJiBhbGxSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCB6b29tRGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgICAgICAgcmVjb3JkczogYWxsUmVjb3JkcyxcbiAgICAgICAgICAgIG5hbWU6IG91dHB1dERTLmdldExhYmVsKClcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmluZCBhbmQgZXhlY3V0ZSB0aGUgem9vbVRvRmVhdHVyZSBhY3Rpb24gZnJvbSBhdmFpbGFibGUgZnJhbWV3b3JrIGFjdGlvbnNcbiAgICAgICAgICBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN1cHBvcnRlZEFjdGlvbnMod2lkZ2V0SWQsIFt6b29tRGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzKVxuICAgICAgICAgICAgLnRoZW4oYWN0aW9uQ2F0ZWdvcmllcyA9PiB7XG4gICAgICAgICAgICAgIC8vIFNlYXJjaCB0aHJvdWdoIGFsbCBhY3Rpb24gY2F0ZWdvcmllcyB0byBmaW5kIHpvb21Ub0ZlYXR1cmUgYWN0aW9uXG4gICAgICAgICAgICAgIGxldCB6b29tQWN0aW9uOiBEYXRhQWN0aW9uIHwgbnVsbCA9IG51bGxcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBpbiBhY3Rpb25DYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9ucyA9IGFjdGlvbkNhdGVnb3JpZXNbY2F0ZWdvcnldXG4gICAgICAgICAgICAgICAgem9vbUFjdGlvbiA9IGFjdGlvbnMuZmluZCgoYWN0aW9uOiBEYXRhQWN0aW9uKSA9PiBcbiAgICAgICAgICAgICAgICAgIGFjdGlvbi5uYW1lID09PSAnem9vbVRvRmVhdHVyZScgfHwgYWN0aW9uLmlkID09PSAnem9vbVRvRmVhdHVyZSdcbiAgICAgICAgICAgICAgICApIHx8IG51bGxcbiAgICAgICAgICAgICAgICBpZiAoem9vbUFjdGlvbikgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKHpvb21BY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YUFjdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5leGVjdXRlRGF0YUFjdGlvbih6b29tQWN0aW9uLCBbem9vbURhdGFTZXRdLCBEYXRhTGV2ZWwuUmVjb3Jkcywgd2lkZ2V0SWQpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZS16b29tJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgc2VsZWN0ZWQgcmVjb3JkcyBhbmQgcHVibGlzaGVkIHNlbGVjdGlvbiBtZXNzYWdlJyxcbiAgICAgICAgICB6b29tRXhlY3V0ZWQ6IHNob3VsZFpvb21cbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0RBVEEtQUNUSU9OJywge1xuICAgICAgICAgIGFjdGlvbjogJ2FkZFRvTWFwLW9uRXhlY3V0ZScsXG4gICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIENsZWFudXAgbWV0aG9kIChyZXF1aXJlZCBieSBEYXRhQWN0aW9uIGludGVyZmFjZSlcbiAgICAgKi9cbiAgICBkZXN0cm95OiAoKTogdm9pZCA9PiB7XG4gICAgICAvLyBObyBjbGVhbnVwIG5lZWRlZFxuICAgIH1cbiAgfVxufVxuXG4iLCJpbXBvcnQgeyB0eXBlIERhdGFSZWNvcmRTZXQsIHR5cGUgRGF0YUFjdGlvbiwgRGF0YUxldmVsLCB0eXBlIERhdGFTb3VyY2UsIHR5cGUgSW50bFNoYXBlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgY3JlYXRlQWRkVG9NYXBBY3Rpb24gfSBmcm9tICcuL2FkZC10by1tYXAtYWN0aW9uJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeUl0ZW1UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuXG4vKipcbiAqIFF1ZXJ5U2ltcGxlIEN1c3RvbSBEYXRhIEFjdGlvbnNcbiAqIFxuICogUmV0dXJucyBjdXN0b20gZGF0YSBhY3Rpb25zIGZvciB0aGUgd2lkZ2V0LlxuICogSW5jbHVkZXMgYSBjdXN0b20gXCJBZGQgdG8gTWFwXCIgYWN0aW9uIHRoYXQgdXNlcyBRdWVyeVNpbXBsZSdzIHNlbGVjdGlvbiBwcm9jZXNzLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlIChudWxsL3VuZGVmaW5lZCBpZiBub3QgYXZhaWxhYmxlKVxuICogQHBhcmFtIGludGwgLSBUaGUgSW50bCBvYmplY3QgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG4gKiBAcGFyYW0gcXVlcnlJdGVtIC0gT3B0aW9uYWwgcXVlcnkgaXRlbSBjb25maWd1cmF0aW9uXG4gKiBAcGFyYW0gcnVudGltZVpvb21Ub1NlbGVjdGVkIC0gT3B0aW9uYWwgcnVudGltZSB6b29tIG92ZXJyaWRlIGZyb20gdGhlIHF1ZXJ5IGZvcm1cbiAqIEByZXR1cm5zIEFycmF5IG9mIGN1c3RvbSBEYXRhQWN0aW9uIG9iamVjdHMgKGVtcHR5IGlmIGNvbmRpdGlvbnMgbm90IG1ldClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4dHJhQWN0aW9ucyAoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgaW50bDogSW50bFNoYXBlLFxuICBxdWVyeUl0ZW0/OiBRdWVyeUl0ZW1UeXBlLFxuICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4pOiBEYXRhQWN0aW9uW10ge1xuICAvLyBPbmx5IGNyZWF0ZSB0aGUgYWN0aW9uIGlmIHdlIGhhdmUgYm90aCBhbiBvdXRwdXQgZGF0YSBzb3VyY2UgYW5kIGludGwgb2JqZWN0XG4gIGlmIChvdXRwdXREUyAmJiBpbnRsKSB7XG4gICAgcmV0dXJuIFtjcmVhdGVBZGRUb01hcEFjdGlvbih3aWRnZXRJZCwgb3V0cHV0RFMsIGludGwsIHF1ZXJ5SXRlbSwgcnVudGltZVpvb21Ub1NlbGVjdGVkKV1cbiAgfVxuICBcbiAgcmV0dXJuIFtdXG59XG5cbiIsImltcG9ydCB7XG4gIHR5cGUgUXVlcnlJdGVtVHlwZSxcbiAgQ3JlYXRlVG9vbFR5cGUsXG4gIFVuaXRUeXBlLFxuICBTcGF0aWFsUmVsYXRpb24sXG4gIExpc3REaXJlY3Rpb24sXG4gIFBhZ2luZ1R5cGUsXG4gIEZpZWxkc1R5cGUsXG4gIFN5bWJvbFR5cGVcbn0gZnJvbSAnLi9jb25maWcnXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1FVRVJZX0lURU06IFBhcnRpYWw8UXVlcnlJdGVtVHlwZT4gPSB7XG4gIGljb246IG51bGwsXG4gIGRpc3BsYXlMYWJlbDogdHJ1ZSxcbiAgc3FsRXhwck9iajogbnVsbCxcbiAgdXNlQXR0cmlidXRlRmlsdGVyOiB0cnVlLFxuICB1c2VTcGF0aWFsRmlsdGVyOiB0cnVlLFxuICBzcGF0aWFsTWFwV2lkZ2V0SWRzOiBbXSxcbiAgc3BhdGlhbEZpbHRlclR5cGVzOiBbXSxcbiAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzOiBbXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9pbnQsXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9seWxpbmUsXG4gICAgQ3JlYXRlVG9vbFR5cGUuUG9seWdvbixcbiAgICBDcmVhdGVUb29sVHlwZS5SZWN0YW5nbGUsXG4gICAgQ3JlYXRlVG9vbFR5cGUuQ2lyY2xlXG4gIF0sXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcjogZmFsc2UsXG4gIHNwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlckRpc3RhbmNlOiAwLFxuICBzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJVbml0OiBVbml0VHlwZS5NZXRlcnMsXG4gIHNwYXRpYWxSZWxhdGlvbnM6IFtTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0XSxcbiAgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM6IFtdLFxuICBzcGF0aWFsUmVsYXRpb25FbmFibGVTZWxlY3RUb29sOiBmYWxzZSxcbiAgc3BhdGlhbFJlbGF0aW9uRW5hYmxlQnVmZmVyOiBmYWxzZSxcbiAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2U6IDAsXG4gIHNwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXQ6IFVuaXRUeXBlLk1ldGVycyxcbiAgcmVzdWx0TGlzdERpcmVjdGlvbjogTGlzdERpcmVjdGlvbi5WZXJ0aWNhbCxcbiAgcmVzdWx0UGFnaW5nU3R5bGU6IFBhZ2luZ1R5cGUuTXVsdGlQYWdlLFxuICByZXN1bHRGaWVsZHNUeXBlOiBGaWVsZHNUeXBlLlBvcHVwU2V0dGluZyxcbiAgcmVzdWx0U3ltYm9sVHlwZTogU3ltYm9sVHlwZS5EZWZhdWx0U3ltYm9sLFxuICByZXN1bHRDdXN0b21TeW1ib2w6IHtcbiAgICBhbmdsZTogMCxcbiAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgb3V0bGluZToge1xuICAgICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgc3R5bGU6ICdlc3JpU0xTU29saWQnLFxuICAgICAgdHlwZTogJ2VzcmlTTFMnLFxuICAgICAgd2lkdGg6IDFcbiAgICB9LFxuICAgIHNpemU6IDYsXG4gICAgc3R5bGU6ICdlc3JpU01TQ2lyY2xlJyxcbiAgICB0eXBlOiAnZXNyaVNNUycsXG4gICAgeG9mZnNldDogMCxcbiAgICB5b2Zmc2V0OiAwXG4gIH0sXG4gIHJlc3VsdEFsbG93Q2hhbmdlU3ltYm9sOiBmYWxzZSxcbiAgYWxsb3dFeHBvcnQ6IGZhbHNlLFxuICBzb3J0T3B0aW9uczogW10sXG4gIHpvb21Ub1NlbGVjdGVkOiB0cnVlLFxuICBpdGVtU2l6ZU1hcDoge1xuICAgIGFycmFuZ2VtZW50SG9yaXpvbnRhbFBvcHBlcjoge1xuICAgICAgbWluU2l6ZTogeyB3aWR0aDogMzAwLCBoZWlnaHQ6IDMwMCB9LFxuICAgICAgZGVmYXVsdFNpemU6IHsgd2lkdGg6IDM2MCwgaGVpZ2h0OiA0ODAgfVxuICAgIH1cbiAgfVxufVxuXG5cbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNMSAxdjE0aDE0VjF6bTkuMDgyIDEzYy0uMDA1LS4wMzctLjExMy0uMjc0LS4xMjItLjMwOWExLjUgMS41IDAgMCAwIC43MTgtMS4yNjcgMS4yIDEuMiAwIDAgMC0uMDUzLS4zNThjLjE1Mi0uMTc2LjI2My0uMzgzLjMyNi0uNjA3cS4wNDYuMDAzLjA5My4wMDNjLjMuMDAyLjU5My0uMDkxLjgzNi0uMjY2cS4wNi4wNjYuMTI2LjEyNGMuNDIuNDEyLjk3Ny42NTQgMS41NjQuNjhIMTR2MmgtMy45MThNMTQgMTFoLS40M2ExLjQ2IDEuNDYgMCAwIDEtLjkwNi0uNDMzYy0uMjY0LS4yMy0uMjU4LS43ODItLjYxNy0uNzgyLS40ODIgMC0uNTIuNjc3LTEuMDAzLjY3Ny0uMjE5IDAtLjM4LS4xNzctLjU5OS0uMTc3LS4xOTMgMC0uNDQ1LjEwMi0uNDQ1LjI5M3YuNTAyYzAgLjQyNC0uNTA2LjUwOC0uNTA2LjkzNCAwIC4xNzEuMTg0LjIzNi4xODQuNDEgMCAuNTgtLjg5My41MDItLjg5MyAxLjA4IDAgLjE5MS4yMTUuMzA1LjIxNS40ODZWMTRINi4zNzVxLjA4Ny0uMjQzLjA5LS41MDJjMC0uNTQ3LTEuMDQzLS4zOTMtMS4yMDctLjcyLS40MDctLjgxMy42OTMtMS4wMjIuNjkzLTEuNjczIDAtLjE2LS4wODItLjQ4OC0uMzM0LS41MTMtLjM1MS0uMDM1LS40NDMuMTU0LS43OTcuMTU0YS40MDYuNDA2IDAgMCAxLS40MzctLjM2YzAtLjM4Ni4zMDgtLjU2Ni4zMDgtLjk1MiAwLS4yNS0uMTAyLS4zOTMtLjEwMi0uNjQzYS42Mi42MiAwIDAgMSAuNTktLjY0M2MuMzIzIDAgLjQ2NC4yNjQuNjE4LjU0YS42NC42NCAwIDAgMCAuNjE3LjMwOGMuNDkgMCAuNzk4LS42MS43OTgtLjk3N2EuNDcuNDcgMCAwIDEgLjQzNy0uNDg4Yy4zNDcgMCAuNDc2LjM2LjgyNC4zNi41NyAwIC41NS0uNzU2IDEuMDUzLTEuMDMuNjE4LS4zMzIuNDM4LTEuMDUyLjM2LTEuNDQtLjAzMi0uMTY5LjI5LS41LjQ2NC0uNDg3LjcyLjA1LjQxMi0uNTQuNDEyLS44MjNxMC0uMDczLjAyMi0uMTQyYy4xMTEtLjMzMi41OTUtLjQzOC41OTUtLjgzNiAwLS4yODEtLjIzMy0uNDEtLjIzMy0uNjkzYS42NS42NSAwIDAgMSAuMjItLjQ0SDE0ek0yIDE0VjJoOC4yNzhjLS4wMTMuMDc3LS4xMzIuMzU2LS4xMzIuNDQgMCAuMTk0LjAzOC4zODcuMTEyLjU2N2ExLjYgMS42IDAgMCAwLS40MjIuNjQzIDEuNCAxLjQgMCAwIDAtLjA3NC40NDIgMS43IDEuNyAwIDAgMC0uNTM2LjQzIDEuMzIgMS4zMiAwIDAgMC0uMzIgMS4wOTFxLjA0Ni4yMDUuMDY2LjQxNGEyIDIgMCAwIDAtLjY0OS42NyAxLjQ2IDEuNDYgMCAwIDAtLjY3NC0uMTY2IDEuNDUgMS40NSAwIDAgMC0xLjM4MyAxLjA4NiAxLjQ0IDEuNDQgMCAwIDAtMS4wODYtLjQ2OSAxLjYyIDEuNjIgMCAwIDAtMS41OTEgMS42NDNjMCAuMjU0LjExMy4yOTMuMDg0LjU3NHMtLjI5LjUzNS0uMjkgMS4wMjJhMS4zNyAxLjM3IDAgMCAwIC45ODQgMS4yOSAxLjU4IDEuNTggMCAwIDAtLjAwMyAxLjU0OWMuMTQzLjI4Ni42MzYuNzc0LjUzNC43NzR6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBqc3gsXHJcbiAgaG9va3NcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNlbGVjdCwgTnVtZXJpY0lucHV0LCBkZWZhdWx0TWVzc2FnZXMgYXMgamltdVVJTWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgeyBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IFF1ZXJ5VGFza0NvbnRleHQgfSBmcm9tICcuL3F1ZXJ5LXRhc2stY29udGV4dCdcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIGRpc3RhbmNlOiBudW1iZXJcclxuICB1bml0OiBVbml0VHlwZVxyXG4gIG9uQnVmZmVyQ2hhbmdlOiAoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEJ1ZmZlcklucHV0IChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IGRpc3RhbmNlID0gMCwgdW5pdCA9IFVuaXRUeXBlLk1ldGVycywgb25CdWZmZXJDaGFuZ2UgfSA9IHByb3BzXHJcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihqaW11VUlNZXNzYWdlcywgZGVmYXVsdE1lc3NhZ2UpXHJcbiAgY29uc3QgW2QsIHNldERdID0gUmVhY3QudXNlU3RhdGUoZGlzdGFuY2UpXHJcbiAgY29uc3QgW3UsIHNldFVdID0gUmVhY3QudXNlU3RhdGUodW5pdClcclxuICBjb25zdCBxdWVyeVRhc2tDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVRhc2tDb250ZXh0KVxyXG4gIGNvbnN0IHJlc2V0U3ltYm9sUmVmID0gUmVhY3QudXNlUmVmKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wpXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXHJcbiAgICBpZiAoZGlzdGFuY2UgIT09IGQpIHtcclxuICAgICAgc2V0RChkaXN0YW5jZSlcclxuICAgICAgY2hhbmdlZCA9IHRydWVcclxuICAgIH1cclxuICAgIGlmICh1bml0ICE9PSB1KSB7XHJcbiAgICAgIHNldFUodW5pdClcclxuICAgICAgY2hhbmdlZCA9IHRydWVcclxuICAgIH1cclxuICAgIGlmIChjaGFuZ2VkKSB7XHJcbiAgICAgIG9uQnVmZmVyQ2hhbmdlKGRpc3RhbmNlLCB1bml0KVxyXG4gICAgfVxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcclxuICB9LCBbZGlzdGFuY2UsIHVuaXRdKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHF1ZXJ5VGFza0NvbnRleHQucmVzZXRTeW1ib2wgJiYgcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAhPT0gcmVzZXRTeW1ib2xSZWYuY3VycmVudCkge1xyXG4gICAgICByZXNldFN5bWJvbFJlZi5jdXJyZW50ID0gcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbFxyXG4gICAgICBzZXREKGRpc3RhbmNlKVxyXG4gICAgICBzZXRVKHVuaXQpXHJcbiAgICAgIG9uQnVmZmVyQ2hhbmdlKGRpc3RhbmNlLCB1bml0KVxyXG4gICAgfVxyXG4gIH0sIFtxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sLCBkaXN0YW5jZSwgdW5pdCwgb25CdWZmZXJDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEaXN0YW5jZUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCh2YWx1ZSkgPT4ge1xyXG4gICAgc2V0RCh2YWx1ZSlcclxuICB9LCBbXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRGlzdGFuY2VBY2NlcHRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCh2YWx1ZSkgPT4ge1xyXG4gICAgc2V0RCh2YWx1ZSlcclxuICAgIG9uQnVmZmVyQ2hhbmdlKHZhbHVlLCB1KVxyXG4gIH0sIFtvbkJ1ZmZlckNoYW5nZSwgdV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUJ1ZmZlclVuaXRDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZSkgPT4ge1xyXG4gICAgc2V0VShlLnRhcmdldC52YWx1ZSlcclxuICAgIG9uQnVmZmVyQ2hhbmdlKGQsIGUudGFyZ2V0LnZhbHVlKVxyXG4gIH0sIFtvbkJ1ZmZlckNoYW5nZSwgZF0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgIDxOdW1lcmljSW5wdXRcclxuICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX1cclxuICAgICAgICBjbGFzc05hbWU9J21yLTEnXHJcbiAgICAgICAgdmFsdWU9e2R9XHJcbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZURpc3RhbmNlQ2hhbmdlfVxyXG4gICAgICAgIG9uQWNjZXB0VmFsdWU9e2hhbmRsZURpc3RhbmNlQWNjZXB0ZWR9XHJcbiAgICAgIC8+XHJcbiAgICAgIDxTZWxlY3RcclxuICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgndW5pdCcpfVxyXG4gICAgICAgIHZhbHVlPXt1fVxyXG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVCdWZmZXJVbml0Q2hhbmdlfVxyXG4gICAgICA+XHJcbiAgICAgICAge09iamVjdC52YWx1ZXMoVW5pdFR5cGUpLm1hcCgodmFsdWUpID0+IChcclxuICAgICAgICAgIDxvcHRpb24ga2V5PXt2YWx1ZX0gdmFsdWU9e3ZhbHVlfT5cclxuICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKGB1bml0XyR7dmFsdWV9YCl9XHJcbiAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICApKX1cclxuICAgICAgPC9TZWxlY3Q+XHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cbi8vIFRoaXMgZmlsZSBpcyBkdXBsaWNhdGVkIGZyb20gJy4uLy4uLy4uLy4uL2ZlYXR1cmUtaW5mby9zcmMvcnVudGltZS9jb21wb25lbnRzL2ZlYXR1cmUtaW5mbydcbmltcG9ydCB7IFJlYWN0LCBjc3MsIGpzeCwgdHlwZSBEYXRhU291cmNlLCBpbmplY3RJbnRsLCB0eXBlIEludGxTaGFwZSwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBSaWdodEZpbGxlZCB9IGZyb20gJ2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL3JpZ2h0J1xuaW1wb3J0IHsgRG93bkZpbGxlZCB9IGZyb20gJ2ppbXUtaWNvbnMvZmlsbGVkL2RpcmVjdGlvbmFsL2Rvd24nXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbmV4cG9ydCBlbnVtIExvYWRTdGF0dXMge1xuICBQZW5kaW5nID0gJ1BlbmRpbmcnLFxuICBGdWxmaWxsZWQgPSAnRnVsZmlsbGVkJyxcbiAgUmVqZWN0ZWQgPSAnUmVqZWN0ZWQnXG59XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VcbiAgZ3JhcGhpYzogX19lc3JpLkdyYXBoaWNcbiAgcG9wdXBUZW1wbGF0ZTogX19lc3JpLlBvcHVwVGVtcGxhdGVcbiAgZGVmYXVsdFBvcHVwVGVtcGxhdGU6IF9fZXNyaS5Qb3B1cFRlbXBsYXRlXG4gIHRvZ2dsYWJsZT86IGJvb2xlYW5cbiAgZXhwYW5kQnlEZWZhdWx0PzogYm9vbGVhblxufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBsb2FkU3RhdHVzOiBMb2FkU3RhdHVzXG4gIHNob3dDb250ZW50OiBib29sZWFuXG59XG5cbmNvbnN0IHN0eWxlID0gY3NzYFxuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAuZXNyaS13aWRnZXRfX2hlYWRpbmcge1xuICAgIGZvbnQtc2l6ZTogMC44NzVyZW0gIWltcG9ydGFudDtcbiAgICBmb250LXdlaWdodDogNTAwICFpbXBvcnRhbnQ7XG4gICAgbWFyZ2luOiAwO1xuICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlci10ZXh0KTtcbiAgfVxuXG4gIC5lc3JpLWZlYXR1cmVfX2NvbnRlbnQtZWxlbWVudCB7XG4gICAgcGFkZGluZzogMDtcbiAgfVxuXG4gIC5qaW11LWJ0bi5leHBhbmRlZCB7XG4gICAgYWxpZ24tc2VsZjogZmxleC1zdGFydDtcbiAgfVxuICBcbiAgLy8gTGFyZ2VyIGV4cGFuZC9jb2xsYXBzZSBidXR0b24gZm9yIGJldHRlciB0b3VjaCB0YXJnZXRzXG4gIC5qaW11LWJ0blthcmlhLWxhYmVsKj1cImV4cGFuZFwiXSxcbiAgLmppbXUtYnRuW2FyaWEtbGFiZWwqPVwiY29sbGFwc2VcIl0ge1xuICAgIG1pbi13aWR0aDogMzJweDtcbiAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICAgIHBhZGRpbmc6IDZweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIH1cblxuICAuZXNyaS1mZWF0dXJlLmVzcmktd2lkZ2V0IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgfVxuYFxuXG5pbnRlcmZhY2UgRXh0cmFQcm9wcyB7XG4gIGludGw6IEludGxTaGFwZVxufVxuXG5jbGFzcyBGZWF0dXJlSW5mbyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHMgJiBFeHRyYVByb3BzLCBTdGF0ZT4ge1xuICBwcml2YXRlIEZlYXR1cmU6IHR5cGVvZiBfX2VzcmkuRmVhdHVyZVxuICBwcml2YXRlIGZlYXR1cmU6IF9fZXNyaS5GZWF0dXJlXG4gIHByaXZhdGUgcmVhZG9ubHkgZmVhdHVyZUNvbnRhaW5lcjogUmVhY3QuUmVmT2JqZWN0PEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsPlxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIGNvbnN0IHsgdG9nZ2xhYmxlID0gZmFsc2UsIGV4cGFuZEJ5RGVmYXVsdCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHJlY29yZElkID0gdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5PQkpFQ1RJRCB8fCB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lm9iamVjdGlkIHx8ICd1bmtub3duJ1xuICAgIGNvbnN0IGluaXRpYWxTaG93Q29udGVudCA9ICF0b2dnbGFibGUgfHwgZXhwYW5kQnlEZWZhdWx0XG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICBldmVudDogJ0ZlYXR1cmVJbmZvLWNvbnN0cnVjdG9yJyxcbiAgICAgIHJlY29yZElkLFxuICAgICAgdG9nZ2xhYmxlLFxuICAgICAgZXhwYW5kQnlEZWZhdWx0LFxuICAgICAgaW5pdGlhbFNob3dDb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmZlYXR1cmVDb250YWluZXIgPSBSZWFjdC5jcmVhdGVSZWYoKVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzaG93Q29udGVudDogaW5pdGlhbFNob3dDb250ZW50LFxuICAgICAgbG9hZFN0YXR1czogTG9hZFN0YXR1cy5QZW5kaW5nXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIHRoaXMuY3JlYXRlRmVhdHVyZSgpXG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUgKHByZXZQcm9wczogUHJvcHMpIHtcbiAgICBpZiAodGhpcy5mZWF0dXJlKSB7XG4gICAgICBpZiAocHJldlByb3BzLnBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSB8fFxuICAgICAgICBwcmV2UHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUgfHxcbiAgICAgICAgcHJldlByb3BzLmdyYXBoaWMgIT09IHRoaXMucHJvcHMuZ3JhcGhpYykge1xuICAgICAgICB0aGlzLmRlc3Ryb3lGZWF0dXJlKClcbiAgICAgICAgdGhpcy5jcmVhdGVGZWF0dXJlKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZmVhdHVyZS52aXNpYmxlRWxlbWVudHMgPSB0aGlzLmdldFZpc2libGVFbGVtZW50cygpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFN5bmMgZXhwYW5kQnlEZWZhdWx0IHByb3AgY2hhbmdlcyAod2hlbiB1c2VyIGNsaWNrcyBFeHBhbmQgQWxsL0NvbGxhcHNlIEFsbClcbiAgICAvLyBUaGlzIGVuc3VyZXMgYWxsIGl0ZW1zIHJlc3BlY3QgdGhlIGdsb2JhbCBleHBhbmQvY29sbGFwc2Ugc3RhdGVcbiAgICBpZiAocHJldlByb3BzLmV4cGFuZEJ5RGVmYXVsdCAhPT0gdGhpcy5wcm9wcy5leHBhbmRCeURlZmF1bHQpIHtcbiAgICAgIGNvbnN0IHsgdG9nZ2xhYmxlID0gZmFsc2UsIGV4cGFuZEJ5RGVmYXVsdCB9ID0gdGhpcy5wcm9wc1xuICAgICAgY29uc3QgcmVjb3JkSWQgPSB0aGlzLnByb3BzLmdyYXBoaWM/LmF0dHJpYnV0ZXM/Lk9CSkVDVElEIHx8IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8ub2JqZWN0aWQgfHwgJ3Vua25vd24nXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICBldmVudDogJ2V4cGFuZEJ5RGVmYXVsdC1wcm9wLWNoYW5nZWQnLFxuICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgcHJldkV4cGFuZEJ5RGVmYXVsdDogcHJldlByb3BzLmV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgICAgbmV3RXhwYW5kQnlEZWZhdWx0OiBleHBhbmRCeURlZmF1bHQsXG4gICAgICAgIHRvZ2dsYWJsZSxcbiAgICAgICAgY3VycmVudFNob3dDb250ZW50OiB0aGlzLnN0YXRlLnNob3dDb250ZW50LFxuICAgICAgICB3aWxsVXBkYXRlU3RhdGU6IHRvZ2dsYWJsZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAodG9nZ2xhYmxlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93Q29udGVudDogZXhwYW5kQnlEZWZhdWx0IH0sICgpID0+IHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnRmVhdHVyZUluZm8tc3RhdGUtdXBkYXRlZCcsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIG5ld1Nob3dDb250ZW50OiB0aGlzLnN0YXRlLnNob3dDb250ZW50LFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gTG9nIGFsbCBjb21wb25lbnREaWRVcGRhdGUgY2FsbHMgdG8gdHJhY2sgcmVtb3VudHNcbiAgICBjb25zdCByZWNvcmRJZCA9IHRoaXMucHJvcHMuZ3JhcGhpYz8uYXR0cmlidXRlcz8uT0JKRUNUSUQgfHwgdGhpcy5wcm9wcy5ncmFwaGljPy5hdHRyaWJ1dGVzPy5vYmplY3RpZCB8fCAndW5rbm93bidcbiAgICBpZiAocHJldlByb3BzLmdyYXBoaWMgIT09IHRoaXMucHJvcHMuZ3JhcGhpYyB8fCBcbiAgICAgICAgcHJldlByb3BzLnBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMucG9wdXBUZW1wbGF0ZSB8fFxuICAgICAgICBwcmV2UHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUgIT09IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICBldmVudDogJ0ZlYXR1cmVJbmZvLXByb3BzLWNoYW5nZWQtcmVjcmVhdGUnLFxuICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgZ3JhcGhpY0NoYW5nZWQ6IHByZXZQcm9wcy5ncmFwaGljICE9PSB0aGlzLnByb3BzLmdyYXBoaWMsXG4gICAgICAgIHBvcHVwVGVtcGxhdGVDaGFuZ2VkOiBwcmV2UHJvcHMucG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlLFxuICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZUNoYW5nZWQ6IHByZXZQcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSAhPT0gdGhpcy5wcm9wcy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSxcbiAgICAgICAgZXhwYW5kQnlEZWZhdWx0OiB0aGlzLnByb3BzLmV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgICAgY3VycmVudFNob3dDb250ZW50OiB0aGlzLnN0YXRlLnNob3dDb250ZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgZGVzdHJveUZlYXR1cmUgKCkge1xuICAgIHRoaXMuZmVhdHVyZSAmJiAhdGhpcy5mZWF0dXJlLmRlc3Ryb3llZCAmJiB0aGlzLmZlYXR1cmUuZGVzdHJveSgpXG4gIH1cblxuICBnZXRWaXNpYmxlRWxlbWVudHMgKCkge1xuICAgIGNvbnN0IHsgdG9nZ2xhYmxlID0gZmFsc2UgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IHNob3dDb250ZW50IH0gPSB0aGlzLnN0YXRlXG4gICAgY29uc3QgZXhwYW5kZWQgPSB0b2dnbGFibGUgPyBzaG93Q29udGVudCA6IHRydWVcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IHRydWUsXG4gICAgICBjb250ZW50OiB7XG4gICAgICAgIGZpZWxkczogZXhwYW5kZWQsXG4gICAgICAgIHRleHQ6IGV4cGFuZGVkLFxuICAgICAgICBtZWRpYTogZXhwYW5kZWQsXG4gICAgICAgIGF0dGFjaG1lbnRzOiBleHBhbmRlZFxuICAgICAgfSxcbiAgICAgIGxhc3RFZGl0ZWRJbmZvOiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUZlYXR1cmUgKCkge1xuICAgIGxldCBmZWF0dXJlTW9kdWxlUHJvbWlzZVxuICAgIGlmICh0aGlzLkZlYXR1cmUpIHtcbiAgICAgIGZlYXR1cmVNb2R1bGVQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKClcbiAgICB9IGVsc2Uge1xuICAgICAgZmVhdHVyZU1vZHVsZVByb21pc2UgPSBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcbiAgICAgICAgJ2Vzcmkvd2lkZ2V0cy9GZWF0dXJlJ1xuICAgICAgXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgICAgW1xuICAgICAgICAgIHRoaXMuRmVhdHVyZVxuICAgICAgICBdID0gbW9kdWxlc1xuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIGZlYXR1cmVNb2R1bGVQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgY29tcG9uZW50IGlzIHN0aWxsIG1vdW50ZWQgYmVmb3JlIHRyeWluZyB0byBhcHBlbmRcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgZXJyb3JzIHdoZW4gY29tcG9uZW50IHVubW91bnRzIGR1cmluZyBhc3luYyBtb2R1bGUgbG9hZGluZ1xuICAgICAgaWYgKCF0aGlzLmZlYXR1cmVDb250YWluZXIuY3VycmVudCkge1xuICAgICAgICAvLyBDb21wb25lbnQgd2FzIHVubW91bnRlZCwgYWJvcnRcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50ICYmIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ2ppbXUtd2lkZ2V0J1xuICAgICAgdGhpcy5mZWF0dXJlQ29udGFpbmVyLmN1cnJlbnQuYXBwZW5kQ2hpbGQoY29udGFpbmVyKVxuXG4gICAgICBjb25zdCBvcmlnaW5EUyA9IHRoaXMucHJvcHMuZGF0YVNvdXJjZS5nZXRPcmlnaW5EYXRhU291cmNlcygpXG4gICAgICBjb25zdCByb290RGF0YVNvdXJjZSA9IG9yaWdpbkRTPy5bMF0/LmdldFJvb3REYXRhU291cmNlKClcblxuICAgICAgdGhpcy5kZXN0cm95RmVhdHVyZSgpXG4gICAgICBjb25zdCBsYXllciA9IHRoaXMucHJvcHMuZ3JhcGhpYy5sYXllciBhcyBfX2VzcmkuRmVhdHVyZUxheWVyXG4gICAgICBpZiAodGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMucHJvcHMuZ3JhcGhpYy5wb3B1cFRlbXBsYXRlID0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlXG4gICAgICB9IGVsc2UgaWYgKGxheWVyKSB7XG4gICAgICAgIC8vIHNldCBwb3B1cFRlbXBsYXRlIHdpdGggbGF5ZXIncyBwb3B1cFRlbXBsYXRlIG9yIGRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICAgIHRoaXMucHJvcHMuZ3JhcGhpYy5wb3B1cFRlbXBsYXRlID0gbGF5ZXIucG9wdXBUZW1wbGF0ZSA/PyB0aGlzLnByb3BzLmRlZmF1bHRQb3B1cFRlbXBsYXRlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByb3BzLmdyYXBoaWMucG9wdXBUZW1wbGF0ZSA9IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgIH1cbiAgICAgIGlmIChsYXllciAmJiAhbGF5ZXIucG9wdXBUZW1wbGF0ZSkge1xuICAgICAgICBsYXllci5wb3B1cFRlbXBsYXRlID0gdGhpcy5wcm9wcy5wb3B1cFRlbXBsYXRlIHx8IHRoaXMucHJvcHMuZGVmYXVsdFBvcHVwVGVtcGxhdGVcbiAgICAgIH1cbiAgICAgIHRoaXMuZmVhdHVyZSA9IG5ldyB0aGlzLkZlYXR1cmUoe1xuICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGVFbmFibGVkOiB0cnVlLFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgIHNwYXRpYWxSZWZlcmVuY2U6IHRoaXMucHJvcHMuZGF0YVNvdXJjZT8ubGF5ZXI/LnNwYXRpYWxSZWZlcmVuY2UgfHwgbnVsbCxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBtYXA6IHJvb3REYXRhU291cmNlPy5tYXAgfHwgbnVsbCxcbiAgICAgICAgZ3JhcGhpYzogdGhpcy5wcm9wcy5ncmFwaGljLFxuICAgICAgICB2aXNpYmxlRWxlbWVudHM6IHRoaXMuZ2V0VmlzaWJsZUVsZW1lbnRzKClcbiAgICAgIH0pXG4gICAgfSkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgbG9hZFN0YXR1czogTG9hZFN0YXR1cy5GdWxmaWxsZWQgfSlcbiAgICB9KVxuICB9XG5cbiAgdG9nZ2xlRXhwYW5kZWQgPSAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB0aGlzLnNldFN0YXRlKHsgc2hvd0NvbnRlbnQ6ICF0aGlzLnN0YXRlLnNob3dDb250ZW50IH0pXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgdG9nZ2xhYmxlID0gZmFsc2UsIGludGwgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IHNob3dDb250ZW50IH0gPSB0aGlzLnN0YXRlXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmZWF0dXJlLWluZm8tY29tcG9uZW50IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgcC0xJyBjc3M9e3N0eWxlfT5cbiAgICAgICAge3RvZ2dsYWJsZSAmJiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgYXJpYS1sYWJlbD17aW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6IHNob3dDb250ZW50ID8gJ2NvbGxhcHNlJyA6ICdleHBhbmQnIH0pfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdqaW11LW91dGxpbmUtaW5zaWRlIGZsZXgtc2hyaW5rLTAnLCB7IGV4cGFuZGVkOiBzaG93Q29udGVudCB9KX1cbiAgICAgICAgICAgIHZhcmlhbnQ9J3RleHQnXG4gICAgICAgICAgICBjb2xvcj0naW5oZXJpdCdcbiAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgb25DbGljaz17dGhpcy50b2dnbGVFeHBhbmRlZH1cbiAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDMycHg7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDZweDtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtzaG93Q29udGVudCA/IDxEb3duRmlsbGVkIHNpemU9J20nLz4gOiA8UmlnaHRGaWxsZWQgc2l6ZT0nbScgYXV0b0ZsaXAvPn1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtZ3Jvdy0xJyByZWY9e3RoaXMuZmVhdHVyZUNvbnRhaW5lcn0gLz5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBpbmplY3RJbnRsKEZlYXR1cmVJbmZvKVxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQgeyBSZWFjdCwganN4LCBjc3MsIHR5cGUgSW1tdXRhYmxlQXJyYXksIGxvZGFzaCwgbG9hZEFyY0dJU0pTQVBJTW9kdWxlLCB1dGlscywgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IEppbXVNYXBWaWV3Q29tcG9uZW50LCB0eXBlIEppbXVNYXBWaWV3LCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXHJcbmltcG9ydCB7IGRlZmF1bHRNZXNzYWdlcyBhcyBqaW11VUlNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB0eXBlIHsgQ3JlYXRlVG9vbFR5cGUsIFVuaXRUeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xyXG5pbXBvcnQgeyBJbnRlcmFjdGl2ZURyYXcgfSBmcm9tICcuL2ludGVyYWN0aXZlLWRyYXctdG9vbCdcclxuaW1wb3J0IHsgQnVmZmVySW5wdXQgfSBmcm9tICcuL2J1ZmZlci1pbnB1dCdcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IFF1ZXJ5VGFza0NvbnRleHQgfSBmcm9tICcuL3F1ZXJ5LXRhc2stY29udGV4dCdcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xyXG4gIG1hcFdpZGdldElkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPlxyXG4gIHdpZGdldElkOiBzdHJpbmdcclxuICBjcmVhdGVUb29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxyXG4gIGVuYWJsZUJ1ZmZlcjogYm9vbGVhblxyXG4gIGJ1ZmZlckRpc3RhbmNlOiBudW1iZXJcclxuICBidWZmZXJVbml0OiBVbml0VHlwZVxyXG4gIG9uQnVmZmVyQ2hhbmdlOiAoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHZvaWRcclxuICBvbkdlb21ldHJ5Q2hhbmdlOiAoZ2VvbTogX19lc3JpLkdlb21ldHJ5LCBsYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLCBncmFwaGljPzogX19lc3JpLkdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdlb21ldHJ5RnJvbURyYXcgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgb25HZW9tZXRyeUNoYW5nZSwgY3JlYXRlVG9vbFR5cGVzLCBtYXBXaWRnZXRJZHMsIGVuYWJsZUJ1ZmZlciwgYnVmZmVyRGlzdGFuY2UsIGJ1ZmZlclVuaXQsIG9uQnVmZmVyQ2hhbmdlLCB3aWRnZXRJZCB9ID0gcHJvcHNcclxuICBjb25zdCBbamltdU1hcFZpZXcsIHNldEppbXVNYXBWaWV3XSA9IFJlYWN0LnVzZVN0YXRlPEppbXVNYXBWaWV3PihudWxsKVxyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oamltdVVJTWVzc2FnZXMsIGRlZmF1bHRNZXNzYWdlKVxyXG4gIGNvbnN0IHF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFF1ZXJ5VGFza0NvbnRleHQpXHJcbiAgY29uc3QgcmVzZXRTeW1ib2xSZWYgPSBSZWFjdC51c2VSZWYocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbClcclxuICBjb25zdCBnZXRMYXllckZ1blJlZiA9IFJlYWN0LnVzZVJlZjwoKSA9PiBfX2VzcmkuR3JhcGhpY3NMYXllcj4obnVsbClcclxuICBjb25zdCBidWZmZXJPcGVyYXRvclJlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuYnVmZmVyT3BlcmF0b3I+KG51bGwpXHJcbiAgY29uc3QgZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZiA9IFJlYWN0LnVzZVJlZjxfX2VzcmkuZ2VvZGVzaWNCdWZmZXJPcGVyYXRvcj4obnVsbClcclxuICBjb25zdCBnZW9tZXRyeVNlcnZpY2VSZWYgPSBSZWFjdC51c2VSZWY8eyBnZW9tZXRyeVNlcnZpY2U6IF9fZXNyaS5nZW9tZXRyeVNlcnZpY2UsIGJ1ZmZlclBhcmFtZXRlcnM6IHR5cGVvZiBfX2VzcmkuQnVmZmVyUGFyYW1ldGVycyB9PihudWxsKVxyXG4gIGNvbnN0IGdlb21ldHJ5UmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5HZW9tZXRyeT4obnVsbClcclxuICBjb25zdCBidWZmZXJEaXN0YW5jZVJlZiA9IFJlYWN0LnVzZVJlZihidWZmZXJEaXN0YW5jZSlcclxuICBjb25zdCBidWZmZXJVbml0UmVmID0gUmVhY3QudXNlUmVmKGJ1ZmZlclVuaXQpXHJcbiAgY29uc3QgYnVmZmVyZWRHcmFwaGljUmVmID0gUmVhY3QudXNlUmVmPF9fZXNyaS5HcmFwaGljPihudWxsKVxyXG5cclxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcclxuICAgIGlmIChlbmFibGVCdWZmZXIpIHtcclxuICAgICAgLy8gUGFyZW50IGNvbXBvbmVudCBxdWVyeS10YXNrLXNwYXRpYWwtZm9ybSB3aWxsIHJlc2V0IGJ1ZmZlciBwYXJhbWV0ZXIgd2hlbiBmaWx0ZXIgdHlwZSBjaGFuZ2VzLFxyXG4gICAgICAvLyBzbyBkZWZlciB0aGUgaW5pdCBidWZmZXIgb3B0aW9uIGluIG9yZGVyIG5vdCB0byBiZSBvdmVycmlkZSBieSBpdHMgcGFyZW50LlxyXG4gICAgICBsb2Rhc2guZGVmZXIoKCkgPT4ge1xyXG4gICAgICAgIG9uQnVmZmVyQ2hhbmdlKGJ1ZmZlckRpc3RhbmNlLCBidWZmZXJVbml0KVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXHJcbiAgICAgICdlc3JpL0dyYXBoaWMnXHJcbiAgICBdKS50aGVuKChtb2R1bGVzKSA9PiB7XHJcbiAgICAgIGNvbnN0IEdyYXBoaWMgPSBtb2R1bGVzWzBdXHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50ID0gbmV3IEdyYXBoaWMoe1xyXG4gICAgICAgIHN5bWJvbDoge1xyXG4gICAgICAgICAgdHlwZTogJ3NpbXBsZS1maWxsJyxcclxuICAgICAgICAgIGNvbG9yOiBbNTEsIDUxLCAyMDQsIDAuNV0sXHJcbiAgICAgICAgICBzdHlsZTogJ3NvbGlkJyxcclxuICAgICAgICAgIG91dGxpbmU6IHtcclxuICAgICAgICAgICAgY29sb3I6IFs1MSwgNTEsIDIwNCwgMC44XSxcclxuICAgICAgICAgICAgd2lkdGg6IDFcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGNvbnN0IGFwcGx5QnVmZmVyRWZmZWN0ID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFnZW9tZXRyeVJlZi5jdXJyZW50IHx8ICFlbmFibGVCdWZmZXIgfHwgYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudCA9PT0gMCkge1xyXG4gICAgICBidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSA9IG51bGxcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlIGVuZCB1c2VyIHVzZXMgYSBwb2ludCBvciBsaW5lIHF1ZXJ5IGdlb21ldHJ5LCB0aGVuIHRoZSBuZWdhdGl2ZSBidWZmZXIgd2lsbCBub3Qgd29yayAoc2FtZSBlZmZlY3QgYXMgdGhlcmUgaXMgbm8gYnVmZmVyKVxyXG4gICAgY29uc3QgaXNQb2ludE5lZ2F0aXZlQnVmZmVyID0gKGdlb21ldHJ5UmVmLmN1cnJlbnQ/LnR5cGUgPT09ICdwb2ludCcgfHwgZ2VvbWV0cnlSZWYuY3VycmVudD8udHlwZSA9PT0gJ211bHRpcG9pbnQnKSAmJiBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50IDwgMFxyXG4gICAgY29uc3QgaXNMaW5lTmVnYXRpdmVCdWZmZXIgPSBnZW9tZXRyeVJlZi5jdXJyZW50Py50eXBlID09PSAncG9seWxpbmUnICYmIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPCAwXHJcbiAgICBpZiAoaXNQb2ludE5lZ2F0aXZlQnVmZmVyIHx8IGlzTGluZU5lZ2F0aXZlQnVmZmVyKSB7XHJcbiAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gbnVsbFxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBnZW9tZXRyeSA9IGdlb21ldHJ5UmVmLmN1cnJlbnRcclxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5hcmNnaXMuY29tL2phdmFzY3JpcHQvbGF0ZXN0L2FwaS1yZWZlcmVuY2UvZXNyaS1nZW9tZXRyeS1nZW9tZXRyeUVuZ2luZS5odG1sI2J1ZmZlclxyXG4gICAgaWYgKGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2U/LmlzR2VvZ3JhcGhpYyAmJiAhZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZS5pc1dHUzg0KSB7XHJcbiAgICAgIGNvbnN0IHNlcnZpY2VVcmwgPSB1dGlscy5nZXRHZW9tZXRyeVNlcnZpY2UoKVxyXG4gICAgICBpZiAoIWdlb21ldHJ5U2VydmljZVJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgY29uc3QgbW9kdWxlcyA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xyXG4gICAgICAgICAgJ2VzcmkvcmVzdC9nZW9tZXRyeVNlcnZpY2UnLFxyXG4gICAgICAgICAgJ2VzcmkvcmVzdC9zdXBwb3J0L0J1ZmZlclBhcmFtZXRlcnMnXHJcbiAgICAgICAgXSlcclxuICAgICAgICBnZW9tZXRyeVNlcnZpY2VSZWYuY3VycmVudCA9IHtcclxuICAgICAgICAgIGdlb21ldHJ5U2VydmljZTogbW9kdWxlc1swXSxcclxuICAgICAgICAgIGJ1ZmZlclBhcmFtZXRlcnM6IG1vZHVsZXNbMV1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgeyBnZW9tZXRyeVNlcnZpY2UsIGJ1ZmZlclBhcmFtZXRlcnM6IEJ1ZmZlclBhcmFtZXRlcnMgfSA9IGdlb21ldHJ5U2VydmljZVJlZi5jdXJyZW50XHJcbiAgICAgIGNvbnN0IHBvbHlnb25zID0gYXdhaXQgZ2VvbWV0cnlTZXJ2aWNlLmJ1ZmZlcihzZXJ2aWNlVXJsLCBuZXcgQnVmZmVyUGFyYW1ldGVycyh7XHJcbiAgICAgICAgZGlzdGFuY2VzOiBbYnVmZmVyRGlzdGFuY2VSZWYuY3VycmVudF0sXHJcbiAgICAgICAgdW5pdDogbG9kYXNoLmtlYmFiQ2FzZShidWZmZXJVbml0UmVmLmN1cnJlbnQpIGFzIGFueSxcclxuICAgICAgICBnZW9kZXNpYzogdHJ1ZSxcclxuICAgICAgICBidWZmZXJTcGF0aWFsUmVmZXJlbmNlOiBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLFxyXG4gICAgICAgIG91dFNwYXRpYWxSZWZlcmVuY2U6IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UsXHJcbiAgICAgICAgZ2VvbWV0cmllczogW2dlb21ldHJ5XVxyXG4gICAgICB9KSlcclxuICAgICAgYnVmZmVyZWRHcmFwaGljUmVmLmN1cnJlbnQuZ2VvbWV0cnkgPSBwb2x5Z29uc1swXVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2U/LmlzV0dTODQgfHwgZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT8uaXNXZWJNZXJjYXRvcikge1xyXG4gICAgICAgIGlmICghZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGUoJ2VzcmkvZ2VvbWV0cnkvb3BlcmF0b3JzL2dlb2Rlc2ljQnVmZmVyT3BlcmF0b3InKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWdlb2Rlc2ljQnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5pc0xvYWRlZCgpKSB7XHJcbiAgICAgICAgICBhd2FpdCBnZW9kZXNpY0J1ZmZlck9wZXJhdG9yUmVmLmN1cnJlbnQubG9hZCgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gZ2VvZGVzaWNCdWZmZXJPcGVyYXRvclJlZi5jdXJyZW50LmV4ZWN1dGUoXHJcbiAgICAgICAgICBnZW9tZXRyeSBhcyBfX2VzcmkuR2VvbWV0cnlVbmlvbixcclxuICAgICAgICAgIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHVuaXQ6IGxvZGFzaC5rZWJhYkNhc2UoYnVmZmVyVW5pdFJlZi5jdXJyZW50KSBhcyBhbnlcclxuICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCFidWZmZXJPcGVyYXRvclJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICBidWZmZXJPcGVyYXRvclJlZi5jdXJyZW50ID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlKCdlc3JpL2dlb21ldHJ5L29wZXJhdG9ycy9idWZmZXJPcGVyYXRvcicpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJ1ZmZlcmVkR3JhcGhpY1JlZi5jdXJyZW50Lmdlb21ldHJ5ID0gYnVmZmVyT3BlcmF0b3JSZWYuY3VycmVudC5leGVjdXRlKFxyXG4gICAgICAgICAgZ2VvbWV0cnkgYXMgX19lc3JpLkdlb21ldHJ5VW5pb24sXHJcbiAgICAgICAgICBidWZmZXJEaXN0YW5jZVJlZi5jdXJyZW50LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB1bml0OiBsb2Rhc2gua2ViYWJDYXNlKGJ1ZmZlclVuaXRSZWYuY3VycmVudCkgYXMgYW55XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgW2VuYWJsZUJ1ZmZlcl0pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAmJiBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICE9PSByZXNldFN5bWJvbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQgPSBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sXHJcbiAgICAgIGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCgpLnJlbW92ZUFsbCgpXHJcbiAgICAgIG9uR2VvbWV0cnlDaGFuZ2UobnVsbClcclxuICAgIH1cclxuICB9LCBbcXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCwgb25HZW9tZXRyeUNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChqaW11TWFwVmlldzogSmltdU1hcFZpZXcpID0+IHtcclxuICAgIC8vIGNsZWFyIGRyYXdpbmcgZ3JhcGhpY3MgYmVmb3JlIHN3aXRjaGluZyBtYXAgdmlld1xyXG4gICAgY29uc3QgbGF5ZXIgPSBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmIGdldExheWVyRnVuUmVmLmN1cnJlbnQoKVxyXG4gICAgaWYgKGxheWVyKSB7XHJcbiAgICAgIGxheWVyLnJlbW92ZUFsbCgpXHJcbiAgICAgIG9uR2VvbWV0cnlDaGFuZ2UobnVsbClcclxuICAgIH1cclxuICAgIHNldEppbXVNYXBWaWV3KGppbXVNYXBWaWV3Py52aWV3ICE9IG51bGwgPyBqaW11TWFwVmlldyA6IG51bGwpXHJcbiAgfSwgW29uR2VvbWV0cnlDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVCdWZmZXJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZGlzdGFuY2UsIHVuaXQpID0+IHtcclxuICAgIGJ1ZmZlckRpc3RhbmNlUmVmLmN1cnJlbnQgPSBkaXN0YW5jZVxyXG4gICAgYnVmZmVyVW5pdFJlZi5jdXJyZW50ID0gdW5pdFxyXG4gICAgYXBwbHlCdWZmZXJFZmZlY3QoKVxyXG4gICAgb25CdWZmZXJDaGFuZ2UoZGlzdGFuY2UsIHVuaXQpXHJcbiAgfSwgW29uQnVmZmVyQ2hhbmdlLCBhcHBseUJ1ZmZlckVmZmVjdF0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZURyYXdFbmQgPSBSZWFjdC51c2VDYWxsYmFjaygoZ3JhcGhpYywgZ2V0TGF5ZXJGdW4sIGNsZWFyQWZ0ZXJBcHBseSkgPT4ge1xyXG4gICAgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCA9IGdldExheWVyRnVuXHJcbiAgICBjb25zdCBsYXllciA9IGdldExheWVyRnVuUmVmLmN1cnJlbnQgJiYgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCgpXHJcbiAgICAvLyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIGdlb21ldHJ5IGlzIHRoZSBzYW1lIGFzIHRoZSBwcmV2aW91cyBvbmUsIG9ubHkgdGhlIGNsZWFyQWZ0ZXJBcHBseSBpcyBjaGFuZ2VkLlxyXG4gICAgaWYgKGdlb21ldHJ5UmVmLmN1cnJlbnQgIT09IGdyYXBoaWM/Lmdlb21ldHJ5KSB7XHJcbiAgICAgIGdlb21ldHJ5UmVmLmN1cnJlbnQgPSBncmFwaGljPy5nZW9tZXRyeVxyXG4gICAgICBhcHBseUJ1ZmZlckVmZmVjdCgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGlmIChidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudC5nZW9tZXRyeSkge1xyXG4gICAgICAgICAgbGF5ZXI/LmFkZChidWZmZXJlZEdyYXBoaWNSZWYuY3VycmVudClcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBvbkdlb21ldHJ5Q2hhbmdlKGdyYXBoaWM/Lmdlb21ldHJ5LCBsYXllciwgZ3JhcGhpYywgY2xlYXJBZnRlckFwcGx5KVxyXG4gIH0sIFtvbkdlb21ldHJ5Q2hhbmdlLCBhcHBseUJ1ZmZlckVmZmVjdF0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgIHtcclxuICAgICAgICBtYXBXaWRnZXRJZHM/Lm1hcCgobWFwV2lkZ2V0SWQsIHgpID0+IChcclxuICAgICAgICAgIDxKaW11TWFwVmlld0NvbXBvbmVudFxyXG4gICAgICAgICAgICBrZXk9e3h9IHVzZU1hcFdpZGdldElkPXttYXBXaWRnZXRJZH0gb25BY3RpdmVWaWV3Q2hhbmdlPXtoYW5kbGVKaW11TWFwVmlld0NoYW5nZWR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICkpXHJcbiAgICAgIH1cclxuICAgICAge2ppbXVNYXBWaWV3Py52aWV3ICYmIChcclxuICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICAgICA8SW50ZXJhY3RpdmVEcmF3XHJcbiAgICAgICAgICAgIGppbXVNYXBWaWV3PXtqaW11TWFwVmlld31cclxuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxyXG4gICAgICAgICAgICB0b29sVHlwZXM9e2NyZWF0ZVRvb2xUeXBlc31cclxuICAgICAgICAgICAgb25EcmF3RW5kPXtoYW5kbGVEcmF3RW5kfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICAgIHtlbmFibGVCdWZmZXIgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IHJvbGU9J2dyb3VwJyBjbGFzc05hbWU9J3RpdGxlMycgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3RoZUJ1ZmZlckRpc3RhbmNlJyl9IGNzcz17Y3NzYG1hcmdpbi10b3A6IDAuNzVyZW07YH0+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtdHJ1bmNhdGUnPntnZXRJMThuTWVzc2FnZSgndGhlQnVmZmVyRGlzdGFuY2UnKX08L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IG10LTEnPlxyXG4gICAgICAgICAgICAgICAgPEJ1ZmZlcklucHV0IGRpc3RhbmNlPXtidWZmZXJEaXN0YW5jZX0gdW5pdD17YnVmZmVyVW5pdH0gb25CdWZmZXJDaGFuZ2U9e2hhbmRsZUJ1ZmZlckNoYW5nZX0vPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICAgICAgKX1cclxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgKVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQge1xyXG4gIFJlYWN0LFxyXG4gIFJlYWN0UmVkdXgsXHJcbiAganN4LFxyXG4gIGNzcyxcclxuICBJbW11dGFibGUsXHJcbiAgdHlwZSBJbW11dGFibGVBcnJheSxcclxuICB0eXBlIFVzZURhdGFTb3VyY2UsXHJcbiAgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCxcclxuICBEYXRhU291cmNlTWFuYWdlcixcclxuICBEYXRhU291cmNlQ29tcG9uZW50LFxyXG4gIGhvb2tzLFxyXG4gIHR5cGUgRGF0YVNvdXJjZSxcclxuICB0eXBlIElNU3RhdGUsXHJcbiAgRGF0YVNvdXJjZVN0YXR1c1xyXG59IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU2VsZWN0LCBPcHRpb24sIGRlZmF1bHRNZXNzYWdlcyBhcyBqaW11VUlNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IFNwYXRpYWxSZWxhdGlvbiwgdHlwZSBVbml0VHlwZSB9IGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IHsgQnVmZmVySW5wdXQgfSBmcm9tICcuL2J1ZmZlci1pbnB1dCdcclxuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXHJcbmltcG9ydCB7IFF1ZXJ5VGFza0NvbnRleHQgfSBmcm9tICcuL3F1ZXJ5LXRhc2stY29udGV4dCdcclxuXHJcbmNvbnN0IG1hcmdpblN0eWxlID0gY3NzYG1hcmdpbi10b3A6IDAuNzVyZW07YFxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBzcGF0aWFsUmVsYXRpb25zOiBJbW11dGFibGVBcnJheTxTcGF0aWFsUmVsYXRpb24+XHJcbiAgdXNlRGF0YVNvdXJjZXM6IEltbXV0YWJsZUFycmF5PFVzZURhdGFTb3VyY2U+XHJcbiAgdXNlUnVudGltZURhdGE6IGJvb2xlYW5cclxuICBlbmFibGVCdWZmZXI6IGJvb2xlYW5cclxuICBidWZmZXJEaXN0YW5jZTogbnVtYmVyXHJcbiAgYnVmZmVyVW5pdDogVW5pdFR5cGVcclxuICBvblNlbGVjdGlvbkNoYW5nZTogKGdlb21zOiBfX2VzcmkuR2VvbWV0cnlbXSkgPT4gdm9pZFxyXG4gIG9uUmVsYXRpb25DaGFuZ2U6IChyZWw6IFNwYXRpYWxSZWxhdGlvbikgPT4gdm9pZFxyXG4gIG9uQnVmZmVyQ2hhbmdlOiAoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHZvaWRcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UnVudGltZURhdGFTb3VyY2UgKCk6IHsgW2RzSWQ6IHN0cmluZ106IERhdGFTb3VyY2UgfSB7XHJcbiAgY29uc3QgcmVzdWx0ID0ge31cclxuICBsZXQgbm90RW1wdHkgPSBmYWxzZVxyXG4gIGNvbnN0IGRzTWFwID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlcygpXHJcbiAgT2JqZWN0LmtleXMoZHNNYXApLmZvckVhY2goZHNJZCA9PiB7XHJcbiAgICBjb25zdCBkcyA9IGRzTWFwW2RzSWRdXHJcbiAgICAvLyBvbmx5IGluY2x1ZGUgdGhlIGRzIHRoYXQgaGFzIGdlb21ldHJ5XHJcbiAgICBpZiAoZHMuZ2V0R2VvbWV0cnlUeXBlKCkgIT0gbnVsbCAmJiAhZHMuaXNJbkFwcENvbmZpZygpICYmIGRzLmdldE1haW5EYXRhU291cmNlKCkuaWQgPT09IGRzSWQgJiYgIWRzLmdldERhdGFTb3VyY2VKc29uKCkuaXNPdXRwdXRGcm9tV2lkZ2V0KSB7XHJcbiAgICAgIHJlc3VsdFtkc0lkXSA9IGRzXHJcbiAgICAgIG5vdEVtcHR5ID0gdHJ1ZVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIHJldHVybiBub3RFbXB0eSA/IHJlc3VsdCA6IG51bGxcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdlb21ldHJ5RnJvbURhdGFTb3VyY2UgKHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHsgb25TZWxlY3Rpb25DaGFuZ2UsIHVzZURhdGFTb3VyY2VzID0gW10sIHVzZVJ1bnRpbWVEYXRhLCBzcGF0aWFsUmVsYXRpb25zLCBlbmFibGVCdWZmZXIsIGJ1ZmZlckRpc3RhbmNlLCBidWZmZXJVbml0LCBvbkJ1ZmZlckNoYW5nZSwgb25SZWxhdGlvbkNoYW5nZSB9ID0gcHJvcHNcclxuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGppbXVVSU1lc3NhZ2VzLCBkZWZhdWx0TWVzc2FnZSlcclxuICBjb25zdCBbY3VycmVudERhdGFTb3VyY2UsIHNldEN1cnJlbnREYXRhU291cmNlXSA9IFJlYWN0LnVzZVN0YXRlKHVzZURhdGFTb3VyY2VzWzBdKVxyXG4gIGNvbnN0IFtydW50aW1lRGF0YVNvdXJjZSwgc2V0UnVudGltZURhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4oKVxyXG4gIGNvbnN0IFtjb3VudCwgc2V0Q291bnRdID0gUmVhY3QudXNlU3RhdGUoMClcclxuICBjb25zdCBbY3VycmVudFJlbGF0aW9uLCBzZXRDdXJyZW50UmVsYXRpb25dID0gUmVhY3QudXNlU3RhdGUoc3BhdGlhbFJlbGF0aW9ucz8uWzBdKVxyXG4gIGNvbnN0IHF1ZXJ5VGFza0NvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFF1ZXJ5VGFza0NvbnRleHQpXHJcbiAgY29uc3QgcmVzZXRTeW1ib2xSZWYgPSBSZWFjdC51c2VSZWYocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbClcclxuICBjb25zdCB0cmFuc2xhdGUgPSBob29rcy51c2VUcmFuc2xhdGlvbigpXHJcblxyXG4gIGNvbnN0IHNwYXRpYWxSZWxhdGlvbk9wdGlvbnM6IEFycmF5PHsgdmFsdWU6IHN0cmluZywgbGFiZWw6IHN0cmluZyB9PiA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKFNwYXRpYWxSZWxhdGlvbikubWFwKChba2V5LCB2YWx1ZV0pID0+ICh7XHJcbiAgICAgIHZhbHVlLFxyXG4gICAgICBsYWJlbDogZ2V0STE4bk1lc3NhZ2UoYHNwYXRpYWxSZWxhdGlvbl8ke2tleX1gKVxyXG4gICAgfSkpXHJcbiAgfSwgW2dldEkxOG5NZXNzYWdlXSlcclxuXHJcbiAgY29uc3QgbG9hZGVkVXNlRGF0YVNvdXJjZXMgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xyXG4gICAgY29uc3QgbG9hZGVkID0gW11cclxuICAgIHVzZURhdGFTb3VyY2VzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgaWYgKHN0YXRlLmRhdGFTb3VyY2VzSW5mbz8uW2l0ZW0ubWFpbkRhdGFTb3VyY2VJZF0/Lmluc3RhbmNlU3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLkNyZWF0ZWQpIHtcclxuICAgICAgICBsb2FkZWQucHVzaChpdGVtLmRhdGFTb3VyY2VJZClcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIGlmIChsb2FkZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICByZXR1cm4gbG9hZGVkLmpvaW4oJywnKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICcnXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgbnVtT2ZEcyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XHJcbiAgICBpZiAoIXVzZVJ1bnRpbWVEYXRhKSB7XHJcbiAgICAgIHJldHVybiAwXHJcbiAgICB9XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoc3RhdGUuZGF0YVNvdXJjZXNJbmZvID8/IHt9KS5maWx0ZXIoZHNJZCA9PiBzdGF0ZS5kYXRhU291cmNlc0luZm9bZHNJZF0uaW5zdGFuY2VTdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuQ3JlYXRlZCkubGVuZ3RoXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgcnVudGltZURhdGFTb3VyY2VzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICBpZiAobnVtT2ZEcyA+IDApIHtcclxuICAgICAgcmV0dXJuIGdldFJ1bnRpbWVEYXRhU291cmNlKClcclxuICAgIH1cclxuICB9LCBbbnVtT2ZEc10pXHJcblxyXG4gIGNvbnN0IG51bU9mUnVudGltZURzID0gT2JqZWN0LmtleXMocnVudGltZURhdGFTb3VyY2VzID8/IHt9KS5sZW5ndGhcclxuXHJcbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XHJcbiAgICBpZiAoc3BhdGlhbFJlbGF0aW9ucz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKHNwYXRpYWxSZWxhdGlvbnNbMF0pXHJcbiAgICB9XHJcbiAgICBpZiAoZW5hYmxlQnVmZmVyKSB7XHJcbiAgICAgIG9uQnVmZmVyQ2hhbmdlKGJ1ZmZlckRpc3RhbmNlLCBidWZmZXJVbml0KVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAocXVlcnlUYXNrQ29udGV4dC5yZXNldFN5bWJvbCAmJiBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sICE9PSByZXNldFN5bWJvbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIHJlc2V0U3ltYm9sUmVmLmN1cnJlbnQgPSBxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sXHJcbiAgICAgIHNldEN1cnJlbnRSZWxhdGlvbihzcGF0aWFsUmVsYXRpb25zPy5bMF0pXHJcbiAgICAgIG9uUmVsYXRpb25DaGFuZ2Uoc3BhdGlhbFJlbGF0aW9ucz8uWzBdKVxyXG4gICAgfVxyXG4gIH0sIFtxdWVyeVRhc2tDb250ZXh0LnJlc2V0U3ltYm9sLCBvblJlbGF0aW9uQ2hhbmdlLCBzcGF0aWFsUmVsYXRpb25zXSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghc3BhdGlhbFJlbGF0aW9ucykge1xyXG4gICAgICBzZXRDdXJyZW50UmVsYXRpb24obnVsbClcclxuICAgIH0gZWxzZSBpZiAoIXNwYXRpYWxSZWxhdGlvbnMuaW5jbHVkZXMoY3VycmVudFJlbGF0aW9uKSkge1xyXG4gICAgICBzZXRDdXJyZW50UmVsYXRpb24oc3BhdGlhbFJlbGF0aW9uc1swXSlcclxuICAgICAgb25SZWxhdGlvbkNoYW5nZShzcGF0aWFsUmVsYXRpb25zWzBdKVxyXG4gICAgfVxyXG4gIH0sIFtzcGF0aWFsUmVsYXRpb25zLCBjdXJyZW50UmVsYXRpb24sIG9uUmVsYXRpb25DaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVEYXRhU291cmNlQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soXHJcbiAgICAoZHNJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRzID0gdXNlRGF0YVNvdXJjZXMuZmluZCgoaXRlbSkgPT4gaXRlbS5kYXRhU291cmNlSWQgPT09IGRzSWQpXHJcbiAgICAgIHNldEN1cnJlbnREYXRhU291cmNlKEltbXV0YWJsZShkcykpXHJcbiAgICAgIHNldFJ1bnRpbWVEYXRhU291cmNlKG51bGwpXHJcbiAgICB9LFxyXG4gICAgW3VzZURhdGFTb3VyY2VzXVxyXG4gIClcclxuXHJcbiAgY29uc3QgaGFuZGxlUnVudGltZURhdGFTb3VyY2VDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhcclxuICAgIChkc0lkOiBzdHJpbmcpID0+IHtcclxuICAgICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2UoZHNJZClcclxuICAgICAgc2V0UnVudGltZURhdGFTb3VyY2UoZHMpXHJcbiAgICAgIHNldEN1cnJlbnREYXRhU291cmNlKG51bGwpXHJcbiAgICB9LFxyXG4gICAgW11cclxuICApXHJcblxyXG4gIGNvbnN0IGhhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2UoY3VycmVudERhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZCA/PyBydW50aW1lRGF0YVNvdXJjZT8uaWQpXHJcbiAgICBjb25zdCByZWNvcmRzID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cclxuICAgIGlmIChyZWNvcmRzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IGdlb21ldHJpZXMgPSByZWNvcmRzLm1hcCgocmVjb3JkKSA9PiByZWNvcmQuZ2V0SlNBUElHZW9tZXRyeSgpKVxyXG4gICAgICBvblNlbGVjdGlvbkNoYW5nZShnZW9tZXRyaWVzKVxyXG4gICAgICBzZXRDb3VudChyZWNvcmRzLmxlbmd0aClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlKG51bGwpXHJcbiAgICAgIHNldENvdW50KDApXHJcbiAgICB9XHJcbiAgfSwgW2N1cnJlbnREYXRhU291cmNlPy5kYXRhU291cmNlSWQsIHJ1bnRpbWVEYXRhU291cmNlPy5pZCwgb25TZWxlY3Rpb25DaGFuZ2VdKVxyXG5cclxuICBjb25zdCBnZXRMYWJlbE9mU3BhdGlhbFJlbGF0aW9uID0gKHJlbGF0aW9uOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gICAgcmV0dXJuIHNwYXRpYWxSZWxhdGlvbk9wdGlvbnMuZmluZChpdGVtID0+IGl0ZW0udmFsdWUgPT09IHJlbGF0aW9uKS5sYWJlbFxyXG4gIH1cclxuXHJcbiAgY29uc3QgaGFuZGxlU3BhdGlhbFJlbGF0aW9uQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soZSA9PiB7XHJcbiAgICBzZXRDdXJyZW50UmVsYXRpb24oZS50YXJnZXQudmFsdWUpXHJcbiAgICBvblJlbGF0aW9uQ2hhbmdlKGUudGFyZ2V0LnZhbHVlKVxyXG4gIH0sIFtvblJlbGF0aW9uQ2hhbmdlXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXY+XHJcbiAgICAgIDxkaXYgY3NzPXttYXJnaW5TdHlsZX0gY2xhc3NOYW1lPSd0aXRsZTMnPntnZXRJMThuTWVzc2FnZSgnY2hvb3NlRmlsdGVyTGF5ZXInKX08L2Rpdj5cclxuICAgICAgPFNlbGVjdFxyXG4gICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjaG9vc2VGaWx0ZXJMYXllcicpfVxyXG4gICAgICAgIHZhbHVlPXtjdXJyZW50RGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkID8/IHJ1bnRpbWVEYXRhU291cmNlPy5pZH1cclxuICAgICAgPlxyXG4gICAgICAgIHtudW1PZlJ1bnRpbWVEcyA+IDAgJiYgdXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMCAmJiA8T3B0aW9uIGhlYWRlcj57Z2V0STE4bk1lc3NhZ2UoJ3ByZWNvbmZpZ3VyZWQnKX08L09wdGlvbj59XHJcbiAgICAgICAge3VzZURhdGFTb3VyY2VzLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2UoaXRlbS5kYXRhU291cmNlSWQpXHJcbiAgICAgICAgICBpZiAobG9hZGVkVXNlRGF0YVNvdXJjZXMuaW5jbHVkZXMoaXRlbS5kYXRhU291cmNlSWQpIHx8IGRzPy5nZXRMYWJlbCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgPE9wdGlvbiBrZXk9e2l0ZW0uZGF0YVNvdXJjZUlkfSB2YWx1ZT17aXRlbS5kYXRhU291cmNlSWR9IG9uQ2xpY2s9eygpID0+IHsgaGFuZGxlRGF0YVNvdXJjZUNoYW5nZShpdGVtLmRhdGFTb3VyY2VJZCkgfX0+XHJcbiAgICAgICAgICAgICAge2RzPy5nZXRMYWJlbCgpfVxyXG4gICAgICAgICAgICAgIDwvT3B0aW9uPlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8T3B0aW9uIGtleT17aXRlbS5kYXRhU291cmNlSWR9PlxyXG4gICAgICAgICAgICAgIHt0cmFuc2xhdGUoJ2xvYWRpbmcnKX1cclxuICAgICAgICAgICAgPC9PcHRpb24+XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfSl9XHJcbiAgICAgICAge251bU9mUnVudGltZURzID4gMCAmJiB1c2VEYXRhU291cmNlcy5sZW5ndGggPiAwICYmIDxPcHRpb24gZGl2aWRlci8+fVxyXG4gICAgICAgIHtudW1PZlJ1bnRpbWVEcyA+IDAgJiYgPE9wdGlvbiBoZWFkZXI+e2dldEkxOG5NZXNzYWdlKCdydW50aW1lJyl9PC9PcHRpb24+fVxyXG4gICAgICAgIHtPYmplY3Qua2V5cyhydW50aW1lRGF0YVNvdXJjZXMgPz8ge30pLm1hcChkc0lkID0+IHtcclxuICAgICAgICAgIGNvbnN0IGRzID0gcnVudGltZURhdGFTb3VyY2VzW2RzSWRdXHJcbiAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8T3B0aW9uIGtleT17ZHNJZH0gdmFsdWU9e2RzSWR9IG9uQ2xpY2s9eygpID0+IHsgaGFuZGxlUnVudGltZURhdGFTb3VyY2VDaGFuZ2UoZHNJZCkgfX0+XHJcbiAgICAgICAgICAgICAge2RzLmdldExhYmVsKCl9XHJcbiAgICAgICAgICAgIDwvT3B0aW9uPlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0pfVxyXG4gICAgICA8L1NlbGVjdD5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9J210LTEgZm9udC1pdGFsaWMnIGNzcz17Y3NzYGNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlci1oaW50KTtgfT57Z2V0STE4bk1lc3NhZ2UoJ3NlbGVjdGVkUmVjb3JkcycsIHsgbnVtOiBjb3VudCB9KX08L2Rpdj5cclxuICAgICAge3NwYXRpYWxSZWxhdGlvbnM/Lmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgIDxkaXYgY3NzPXttYXJnaW5TdHlsZX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC10cnVuY2F0ZSB0aXRsZTMgbWItMCc+e2dldEkxOG5NZXNzYWdlKCdyZWxhdGlvbnNoaXAnKX08L2Rpdj5cclxuICAgICAgICAgIDxTZWxlY3RcclxuICAgICAgICAgICAgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3JlbGF0aW9uc2hpcCcpfVxyXG4gICAgICAgICAgICB2YWx1ZT17Y3VycmVudFJlbGF0aW9ufVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlU3BhdGlhbFJlbGF0aW9uQ2hhbmdlfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICB7c3BhdGlhbFJlbGF0aW9ucy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2l0ZW19IHZhbHVlPXtpdGVtfT57Z2V0TGFiZWxPZlNwYXRpYWxSZWxhdGlvbihpdGVtKX08L29wdGlvbj5cclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICAgIHtlbmFibGVCdWZmZXIgJiYgKFxyXG4gICAgICAgIDxkaXYgcm9sZT0nZ3JvdXAnIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfSBjc3M9e21hcmdpblN0eWxlfT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0aXRsZTMgdGV4dC10cnVuY2F0ZSc+e2dldEkxOG5NZXNzYWdlKCd0aGVCdWZmZXJEaXN0YW5jZScpfTwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBtdC0xJz5cclxuICAgICAgICAgICAgPEJ1ZmZlcklucHV0IGRpc3RhbmNlPXtidWZmZXJEaXN0YW5jZX0gdW5pdD17YnVmZmVyVW5pdH0gb25CdWZmZXJDaGFuZ2U9e29uQnVmZmVyQ2hhbmdlfS8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17Y3VycmVudERhdGFTb3VyY2V9IGRhdGFTb3VyY2U9e3J1bnRpbWVEYXRhU291cmNlfSBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZX0gLz5cclxuICAgICAge3VzZURhdGFTb3VyY2VzLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgZGF0YXNvdXJjZSBpcyBjcmVhdGVkXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IGtleT17aXRlbS5kYXRhU291cmNlSWR9IHVzZURhdGFTb3VyY2U9e2l0ZW19Lz5cclxuICAgICAgICApXHJcbiAgICAgIH0pfVxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQgeyBSZWFjdCwganN4LCBsb2FkQXJjR0lTSlNBUElNb2R1bGUsIHR5cGUgSW1tdXRhYmxlQXJyYXkgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IEppbXVNYXBWaWV3Q29tcG9uZW50LCB0eXBlIEppbXVNYXBWaWV3LCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1hcmNnaXMnXHJcbmltcG9ydCB0eXBlIHsgQ3JlYXRlVG9vbFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcclxuICBtYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cclxuICBjcmVhdGVUb29sVHlwZXM6IEltbXV0YWJsZUFycmF5PENyZWF0ZVRvb2xUeXBlPlxyXG4gIG9uR2VvbWV0cnlDaGFuZ2U6IChnZW9tOiBfX2VzcmkuR2VvbWV0cnksIGxheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXIsIGdyYXBoaWM/OiBfX2VzcmkuR3JhcGhpYywgY2xlYXJBZnRlckFwcGx5PzogYm9vbGVhbikgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2VvbWV0cnlGcm9tTWFwIChwcm9wczogUHJvcHMpIHtcclxuICBjb25zdCB7IG9uR2VvbWV0cnlDaGFuZ2UsIG1hcFdpZGdldElkcyB9ID0gcHJvcHNcclxuICBjb25zdCBbamltdU1hcFZpZXcsIHNldEppbXVNYXBWaWV3XSA9IFJlYWN0LnVzZVN0YXRlPEppbXVNYXBWaWV3PihudWxsKVxyXG4gIGNvbnN0IFBvbHlnb25SZWYgPSBSZWFjdC51c2VSZWY8dHlwZW9mIF9fZXNyaS5Qb2x5Z29uPihudWxsKVxyXG5cclxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGppbXVNYXBWaWV3Py52aWV3KSB7XHJcbiAgICAgIGxldCBoYW5kbGVyOiBJSGFuZGxlXHJcbiAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZSgnZXNyaS9jb3JlL3JlYWN0aXZlVXRpbHMnKS50aGVuKChyZWFjdGl2ZVV0aWxzOiBfX2VzcmkucmVhY3RpdmVVdGlscykgPT4ge1xyXG4gICAgICAgIGhhbmRsZXIgPSByZWFjdGl2ZVV0aWxzLndhdGNoKCgpID0+IGppbXVNYXBWaWV3LnZpZXcuZXh0ZW50LCAoZXh0ZW50OiBfX2VzcmkuRXh0ZW50KSA9PiB7XHJcbiAgICAgICAgICBpZiAoUG9seWdvblJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIG9uR2VvbWV0cnlDaGFuZ2UoUG9seWdvblJlZi5jdXJyZW50LmZyb21FeHRlbnQoZXh0ZW50KSlcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL2dlb21ldHJ5L1BvbHlnb24nXSkudGhlbihtb2R1bGVzID0+IHtcclxuICAgICAgICAgICAgICBQb2x5Z29uUmVmLmN1cnJlbnQgPSBtb2R1bGVzWzBdXHJcbiAgICAgICAgICAgICAgb25HZW9tZXRyeUNoYW5nZShQb2x5Z29uUmVmLmN1cnJlbnQuZnJvbUV4dGVudChleHRlbnQpKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gc2V0IGluaXRpYWwgZXh0ZW50XHJcbiAgICAgICAgb25HZW9tZXRyeUNoYW5nZShqaW11TWFwVmlldy52aWV3LmV4dGVudClcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICBpZiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgaGFuZGxlci5yZW1vdmUoKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFtqaW11TWFwVmlldywgb25HZW9tZXRyeUNoYW5nZV0pXHJcblxyXG4gIGNvbnN0IGhhbmRsZUppbXVNYXBWaWV3Q2hhbmdlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChqaW11TWFwVmlldzogSmltdU1hcFZpZXcpID0+IHtcclxuICAgIHNldEppbXVNYXBWaWV3KGppbXVNYXBWaWV3Py52aWV3ICE9IG51bGwgPyBqaW11TWFwVmlldyA6IG51bGwpXHJcbiAgfSwgW10pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgIHtcclxuICAgICAgICBtYXBXaWRnZXRJZHM/Lm1hcCgobWFwV2lkZ2V0SWQsIHgpID0+IChcclxuICAgICAgICAgIDxKaW11TWFwVmlld0NvbXBvbmVudFxyXG4gICAgICAgICAgICBrZXk9e3h9IHVzZU1hcFdpZGdldElkPXttYXBXaWRnZXRJZH0gb25BY3RpdmVWaWV3Q2hhbmdlPXtoYW5kbGVKaW11TWFwVmlld0NoYW5nZWR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICkpXHJcbiAgICAgIH1cclxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgKVxyXG59XHJcbiIsIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZyBpbiBRdWVyeVNpbXBsZSB3aWRnZXQuXG4gKiBQcm92aWRlcyBoaWdobGlnaHRpbmcgdGhhdCB3b3JrcyBpbmRlcGVuZGVudGx5IG9mIGxheWVyIHZpc2liaWxpdHkuXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBEYXRhU291cmNlLCBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IERhdGFTb3VyY2VNYW5hZ2VyIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vLyBHbG9iYWwgc2VxdWVuY2UgY291bnRlciBmb3IgZ3JhcGhpY3Mgb3BlcmF0aW9ucyB0byB0cmFjayB0aW1pbmcgYWNyb3NzIGNhbGxzXG5sZXQgb3BlcmF0aW9uU2VxdWVuY2UgPSAwXG5cbi8qKlxuICogR2V0cyB0aGUgbWFwIHZpZXcgZnJvbSBhIGRhdGEgc291cmNlJ3Mgb3JpZ2luIGxheWVyLlxuICogQWNjZXNzZXMgdGhlIHZpZXcgdGhyb3VnaCB0aGUgRmVhdHVyZUxheWVyJ3MgdmlldyBwcm9wZXJ0eS5cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKG9yIGFueSBkYXRhIHNvdXJjZSlcbiAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIE1hcFZpZXcgb3IgU2NlbmVWaWV3LCBvciBudWxsIGlmIG5vdCBhdmFpbGFibGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1hcFZpZXdGcm9tRGF0YVNvdXJjZShcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkXG4pOiBQcm9taXNlPF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldyB8IG51bGw+IHtcbiAgY29uc3Qgc2VxID0gKytvcGVyYXRpb25TZXF1ZW5jZVxuICBpZiAoIW91dHB1dERTKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLW5vLW91dHB1dERTJyxcbiAgICAgIHNlcSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gR2V0IG9yaWdpbiBkYXRhIHNvdXJjZSB0byBhY2Nlc3MgdGhlIGxheWVyXG4gICAgY29uc3Qgb3JpZ2luRGF0YVNvdXJjZXMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpXG4gICAgY29uc3Qgb3JpZ2luRFMgPSBvcmlnaW5EYXRhU291cmNlcz8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICBpZiAoIW9yaWdpbkRTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1uby1vcmlnaW5EUycsXG4gICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIC8vIEFjY2VzcyB0aGUgRmVhdHVyZUxheWVyIGZyb20gdGhlIGRhdGEgc291cmNlXG4gICAgY29uc3QgbGF5ZXIgPSAob3JpZ2luRFMgYXMgYW55KS5sYXllciB8fCAob3JpZ2luRFMgYXMgYW55KS5nZXRMYXllcj8uKClcbiAgICBpZiAoIWxheWVyKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1uby1sYXllcicsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIC8vIExvZyBsYXllciBwcm9wZXJ0aWVzIHRvIHVuZGVyc3RhbmQgc3RydWN0dXJlXG4gICAgY29uc3QgbGF5ZXJLZXlzID0gT2JqZWN0LmtleXMobGF5ZXIpLmZpbHRlcihrZXkgPT4gXG4gICAgICAha2V5LnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgIHR5cGVvZiAobGF5ZXIgYXMgYW55KVtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgKS5zbGljZSgwLCAyMCkgLy8gTGltaXQgdG8gZmlyc3QgMjAgcHJvcGVydGllc1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1sYXllci1pbnNwZWN0aW9uJyxcbiAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICBsYXllclR5cGU6IGxheWVyLnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgbGF5ZXJLZXlzOiBsYXllcktleXMsXG4gICAgICBoYXNMYXllck1hcDogISEobGF5ZXIgYXMgYW55KS5tYXAsXG4gICAgICBoYXNMYXllclZpZXc6ICEhKGxheWVyIGFzIGFueSkudmlldyxcbiAgICAgIGhhc0xheWVyUGFyZW50OiAhIShsYXllciBhcyBhbnkpLnBhcmVudCxcbiAgICAgIGxheWVyTWFwVHlwZTogKGxheWVyIGFzIGFueSkubWFwID8gdHlwZW9mIChsYXllciBhcyBhbnkpLm1hcCA6ICdub25lJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBDaGVjayBsYXllci5wYXJlbnQgZm9yIG1hcC92aWV3IGFjY2VzcyAoc2luY2UgaGFzTGF5ZXJQYXJlbnQgaXMgdHJ1ZSlcbiAgICBjb25zdCBwYXJlbnQgPSAobGF5ZXIgYXMgYW55KS5wYXJlbnRcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICAvLyBMb2cgcGFyZW50IHByb3BlcnRpZXNcbiAgICAgIGNvbnN0IHBhcmVudEtleXMgPSBPYmplY3Qua2V5cyhwYXJlbnQpLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICB0eXBlb2YgKHBhcmVudCBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICkuc2xpY2UoMCwgMjApXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLWxheWVyLXBhcmVudC1pbnNwZWN0aW9uJyxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICBwYXJlbnRUeXBlOiBwYXJlbnQudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgIHBhcmVudEtleXM6IHBhcmVudEtleXMsXG4gICAgICAgIGhhc1BhcmVudE1hcDogISEocGFyZW50IGFzIGFueSkubWFwLFxuICAgICAgICBoYXNQYXJlbnRWaWV3OiAhIShwYXJlbnQgYXMgYW55KS52aWV3LFxuICAgICAgICBoYXNQYXJlbnRWaWV3czogISEocGFyZW50IGFzIGFueSkudmlld3MsXG4gICAgICAgIHBhcmVudFZpZXdzTGVuZ3RoOiAocGFyZW50IGFzIGFueSkudmlld3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNQYXJlbnRFeHRlbnQ6ICEhKHBhcmVudCBhcyBhbnkpLmV4dGVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBUcnkgdG8gZ2V0IHZpZXcgZnJvbSBwYXJlbnRcbiAgICAgIGlmICgocGFyZW50IGFzIGFueSkudmlldykge1xuICAgICAgICBjb25zdCB2aWV3ID0gKHBhcmVudCBhcyBhbnkpLnZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtbGF5ZXItcGFyZW50LXZpZXcnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdmlld1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBUcnkgdG8gZ2V0IG1hcCBmcm9tIHBhcmVudCBhbmQgdGhlbiB2aWV3XG4gICAgICBjb25zdCBwYXJlbnRNYXAgPSAocGFyZW50IGFzIGFueSkubWFwXG4gICAgICBpZiAocGFyZW50TWFwKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBwYXJlbnRNYXAudmlldyB8fCBcbiAgICAgICAgICAgICAgICAgICAgIChwYXJlbnRNYXAudmlld3M/LmdldEl0ZW1BdD8uKDApKSB8fFxuICAgICAgICAgICAgICAgICAgICAgKHBhcmVudE1hcC52aWV3cz8ubGVuZ3RoID4gMCA/IHBhcmVudE1hcC52aWV3c1swXSA6IG51bGwpXG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLXBhcmVudC1tYXAnLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICByZXR1cm4gdmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQYXJlbnQgbWlnaHQgQkUgdGhlIHZpZXcgKGNoZWNrIGlmIGl0IGhhcyB2aWV3LWxpa2UgcHJvcGVydGllcylcbiAgICAgIGlmIChwYXJlbnQudHlwZSA9PT0gJ21hcCcgfHwgcGFyZW50LnR5cGUgPT09ICdzY2VuZScgfHwgKHBhcmVudCBhcyBhbnkpLmV4dGVudCkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLXBhcmVudC1pcy12aWV3JyxcbiAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgICB2aWV3VHlwZTogcGFyZW50LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcGFyZW50IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyeSBtdWx0aXBsZSBhcHByb2FjaGVzIHRvIGdldCB0aGUgdmlldzpcbiAgICAvLyAxLiBMYXllciBtaWdodCBoYXZlIGEgZGlyZWN0IHZpZXcgcHJvcGVydHlcbiAgICBpZiAoKGxheWVyIGFzIGFueSkudmlldykge1xuICAgICAgY29uc3QgdmlldyA9IChsYXllciBhcyBhbnkpLnZpZXcgYXMgX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1zdWNjZXNzLXZpYS1sYXllci12aWV3JyxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIGxheWVySWQ6IGxheWVyLmlkLFxuICAgICAgICB2aWV3VHlwZTogdmlldy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHZpZXdcbiAgICB9XG5cbiAgICAvLyAyLiBUcnkgdG8gZ2V0IG1hcCBmcm9tIGxheWVyIGFuZCB0aGVuIHZpZXcgZnJvbSBtYXBcbiAgICBjb25zdCBtYXAgPSAobGF5ZXIgYXMgYW55KS5tYXAgfHwgXG4gICAgICAgICAgICAgICAgKGxheWVyIGFzIGFueSkucGFyZW50Py5tYXAgfHxcbiAgICAgICAgICAgICAgICAobGF5ZXIgYXMgYW55KS5fX21hcCB8fFxuICAgICAgICAgICAgICAgIChsYXllciBhcyBhbnkpLl9tYXBcbiAgICBcbiAgICBpZiAobWFwKSB7XG4gICAgICAvLyBMb2cgbWFwIHByb3BlcnRpZXNcbiAgICAgIGNvbnN0IG1hcEtleXMgPSBPYmplY3Qua2V5cyhtYXApLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICB0eXBlb2YgKG1hcCBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICkuc2xpY2UoMCwgMjApXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLW1hcC1mb3VuZCcsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBsYXllcklkOiBsYXllci5pZCxcbiAgICAgICAgbWFwSWQ6IG1hcC5pZCB8fCAndW5rbm93bicsXG4gICAgICAgIG1hcEtleXM6IG1hcEtleXMsXG4gICAgICAgIGhhc01hcFZpZXc6ICEhbWFwLnZpZXcsXG4gICAgICAgIGhhc01hcFZpZXdzOiAhIShtYXAudmlld3MpLFxuICAgICAgICBtYXBWaWV3c0xlbmd0aDogbWFwLnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCB2aWV3ID0gbWFwLnZpZXcgfHwgXG4gICAgICAgICAgICAgICAgICAgKG1hcC52aWV3cz8uZ2V0SXRlbUF0Py4oMCkpIHx8XG4gICAgICAgICAgICAgICAgICAgKG1hcC52aWV3cz8ubGVuZ3RoID4gMCA/IG1hcC52aWV3c1swXSA6IG51bGwpIHx8XG4gICAgICAgICAgICAgICAgICAgKG1hcC52aWV3cyAmJiBtYXAudmlld3MubGVuZ3RoID4gMCA/IG1hcC52aWV3cy5nZXRJdGVtQXQoMCkgOiBudWxsKVxuICAgICAgXG4gICAgICBpZiAodmlldykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgIGV2ZW50OiAnZ2V0TWFwVmlld0Zyb21EYXRhU291cmNlLXN1Y2Nlc3MtdmlhLWxheWVyLW1hcCcsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgdmlld1R5cGU6IHZpZXcudHlwZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB2aWV3IGFzIF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDMuIFRyeSB0byBnZXQgcm9vdCBkYXRhIHNvdXJjZSBhbmQgYWNjZXNzIG1hcCBmcm9tIHRoZXJlXG4gICAgY29uc3Qgcm9vdERTID0gb3JpZ2luRFMuZ2V0Um9vdERhdGFTb3VyY2UoKVxuICAgIGlmIChyb290RFMpIHtcbiAgICAgIGNvbnN0IHJvb3RNYXAgPSAocm9vdERTIGFzIGFueSkuZ2V0TWFwPy4oKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAocm9vdERTIGFzIGFueSkubWFwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgKHJvb3REUyBhcyBhbnkpLl9fbWFwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgKHJvb3REUyBhcyBhbnkpLl9tYXBcbiAgICAgIFxuICAgICAgaWYgKHJvb3RNYXApIHtcbiAgICAgICAgLy8gTG9nIHJvb3QgbWFwIHByb3BlcnRpZXNcbiAgICAgICAgY29uc3Qgcm9vdE1hcEtleXMgPSBPYmplY3Qua2V5cyhyb290TWFwKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICAgIHR5cGVvZiAocm9vdE1hcCBhcyBhbnkpW2tleV0gIT09ICdmdW5jdGlvbidcbiAgICAgICAgKS5zbGljZSgwLCAyMClcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utcm9vdC1tYXAtZm91bmQnLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgcm9vdERTVHlwZTogcm9vdERTLnR5cGUsXG4gICAgICAgICAgcm9vdE1hcElkOiByb290TWFwLmlkIHx8ICd1bmtub3duJyxcbiAgICAgICAgICByb290TWFwS2V5czogcm9vdE1hcEtleXMsXG4gICAgICAgICAgaGFzUm9vdE1hcFZpZXc6ICEhcm9vdE1hcC52aWV3LFxuICAgICAgICAgIGhhc1Jvb3RNYXBWaWV3czogISEocm9vdE1hcC52aWV3cyksXG4gICAgICAgICAgcm9vdE1hcFZpZXdzTGVuZ3RoOiByb290TWFwLnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHZpZXcgPSByb290TWFwLnZpZXcgfHwgXG4gICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cz8uZ2V0SXRlbUF0Py4oMCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cz8ubGVuZ3RoID4gMCA/IHJvb3RNYXAudmlld3NbMF0gOiBudWxsKSB8fFxuICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3MgJiYgcm9vdE1hcC52aWV3cy5sZW5ndGggPiAwID8gcm9vdE1hcC52aWV3cy5nZXRJdGVtQXQoMCkgOiBudWxsKVxuICAgICAgICBcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdnZXRNYXBWaWV3RnJvbURhdGFTb3VyY2Utc3VjY2Vzcy12aWEtcm9vdERTJyxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgICAgcm9vdERTSWQ6IHJvb3REUy5pZCxcbiAgICAgICAgICAgIHZpZXdUeXBlOiB2aWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICByZXR1cm4gdmlldyBhcyBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTG9nIHJvb3QgRFMgcHJvcGVydGllcyB0byBzZWUgd2hhdCdzIGF2YWlsYWJsZVxuICAgICAgICBjb25zdCByb290RFNLZXlzID0gT2JqZWN0LmtleXMocm9vdERTKS5maWx0ZXIoa2V5ID0+IFxuICAgICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICAgIHR5cGVvZiAocm9vdERTIGFzIGFueSlba2V5XSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApLnNsaWNlKDAsIDIwKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1yb290LWRzLWluc3BlY3Rpb24nLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgcm9vdERTVHlwZTogcm9vdERTLnR5cGUsXG4gICAgICAgICAgcm9vdERTS2V5czogcm9vdERTS2V5cyxcbiAgICAgICAgICBoYXNHZXRNYXA6IHR5cGVvZiAocm9vdERTIGFzIGFueSkuZ2V0TWFwID09PSAnZnVuY3Rpb24nLFxuICAgICAgICAgIGhhc01hcDogISEocm9vdERTIGFzIGFueSkubWFwLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1uby12aWV3JyxcbiAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICBoYXNMYXllck1hcDogISFtYXAsXG4gICAgICBoYXNSb290RFM6ICEhcm9vdERTLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm4gbnVsbFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2dldE1hcFZpZXdGcm9tRGF0YVNvdXJjZS1lcnJvcicsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8qKlxuICogR2V0cyB0aGUgZGVmYXVsdCBoaWdobGlnaHQgc3ltYm9sIGJhc2VkIG9uIGdlb21ldHJ5IHR5cGUuXG4gKiBVc2VzIHRoZSBtYXAncyBhY3R1YWwgaGlnaGxpZ2h0IGNvbG9yIGZyb20gaGlnaGxpZ2h0T3B0aW9ucyB0byBtYXRjaCBzdGFuZGFyZCBzZWxlY3Rpb24gYXBwZWFyYW5jZS5cbiAqL1xuZnVuY3Rpb24gZ2V0RGVmYXVsdEhpZ2hsaWdodFN5bWJvbChcbiAgZ2VvbWV0cnlUeXBlOiBzdHJpbmcsXG4gIG1hcFZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogX19lc3JpLlN5bWJvbCB7XG4gIC8vIEdldCBkZWZhdWx0IGhpZ2hsaWdodCBjb2xvciBmcm9tIHZpZXcncyBoaWdobGlnaHRPcHRpb25zXG4gIGNvbnN0IGhpZ2hsaWdodE9wdGlvbnMgPSAobWFwVmlldy5oaWdobGlnaHRPcHRpb25zIHx8IHt9KSBhcyBfX2VzcmkuSGlnaGxpZ2h0T3B0aW9uc1xuICBcbiAgLy8gRXh0cmFjdCBjb2xvciAtIGNvdWxkIGJlIGFycmF5IFtSLEcsQixBXSBvciBDb2xvciBvYmplY3RcbiAgbGV0IGhpZ2hsaWdodENvbG9yOiBudW1iZXJbXSB8IG51bGwgPSBudWxsXG4gIFxuICBpZiAoaGlnaGxpZ2h0T3B0aW9ucy5jb2xvcikge1xuICAgIC8vIElmIGl0J3MgYSBDb2xvciBvYmplY3QsIGNvbnZlcnQgdG8gYXJyYXlcbiAgICBpZiAodHlwZW9mIGhpZ2hsaWdodE9wdGlvbnMuY29sb3IgPT09ICdvYmplY3QnICYmICd0b1JnYmEnIGluIGhpZ2hsaWdodE9wdGlvbnMuY29sb3IpIHtcbiAgICAgIGhpZ2hsaWdodENvbG9yID0gKGhpZ2hsaWdodE9wdGlvbnMuY29sb3IgYXMgYW55KS50b1JnYmEoKVxuICAgIH0gXG4gICAgLy8gSWYgaXQncyBhbHJlYWR5IGFuIGFycmF5XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShoaWdobGlnaHRPcHRpb25zLmNvbG9yKSkge1xuICAgICAgaGlnaGxpZ2h0Q29sb3IgPSBoaWdobGlnaHRPcHRpb25zLmNvbG9yXG4gICAgfVxuICB9XG4gIFxuICAvLyBJZiBubyBjb2xvciBpbiBoaWdobGlnaHRPcHRpb25zLCB1c2UgdGhlIEFyY0dJUyBkb2N1bWVudGVkIGRlZmF1bHQ6IGN5YW4gWzAsIDI1NSwgMjU1XVxuICBpZiAoIWhpZ2hsaWdodENvbG9yKSB7XG4gICAgaGlnaGxpZ2h0Q29sb3IgPSBbMCwgMjU1LCAyNTUsIDEuMF0gLy8gRnVsbCBvcGFjaXR5IGRlZmF1bHRcbiAgfVxuICBcbiAgLy8gRW5zdXJlIHdlIGhhdmUgNCBlbGVtZW50cyBbUiwgRywgQiwgQV1cbiAgY29uc3QgYmFzZUNvbG9yID0gaGlnaGxpZ2h0Q29sb3Iuc2xpY2UoMCwgMylcbiAgY29uc3QgYmFzZUFscGhhID0gaGlnaGxpZ2h0Q29sb3IubGVuZ3RoID49IDQgPyBoaWdobGlnaHRDb2xvclszXSA6IDEuMFxuICBcbiAgLy8gR2V0IGZpbGwgb3BhY2l0eSBmcm9tIGhpZ2hsaWdodE9wdGlvbnMgb3IgdXNlIGRlZmF1bHRcbiAgY29uc3QgZmlsbE9wYWNpdHkgPSBoaWdobGlnaHRPcHRpb25zLmZpbGxPcGFjaXR5ICE9PSB1bmRlZmluZWQgXG4gICAgPyBoaWdobGlnaHRPcHRpb25zLmZpbGxPcGFjaXR5IFxuICAgIDogMC4yNSAvLyBEZWZhdWx0IDI1JSBvcGFjaXR5IGZvciBmaWxsXG4gIGNvbnN0IGZpbGxDb2xvciA9IFsuLi5iYXNlQ29sb3IsIGZpbGxPcGFjaXR5XVxuICBcbiAgLy8gR2V0IGhhbG8gb3BhY2l0eSBvciB1c2UgZGVmYXVsdCAtIGZvciBvdXRsaW5lcyBhbmQgbGluZXNcbiAgY29uc3QgaGFsb09wYWNpdHkgPSBoaWdobGlnaHRPcHRpb25zLmhhbG9PcGFjaXR5ICE9PSB1bmRlZmluZWRcbiAgICA/IGhpZ2hsaWdodE9wdGlvbnMuaGFsb09wYWNpdHlcbiAgICA6IGJhc2VBbHBoYSAvLyBVc2UgdGhlIGNvbG9yJ3MgYWxwaGEgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgMS4wXG4gIGNvbnN0IG91dGxpbmVDb2xvciA9IFsuLi5iYXNlQ29sb3IsIGhhbG9PcGFjaXR5XVxuICBcbiAgLy8gRm9yIGxpbmVzLCB1c2UgZnVsbCBvcGFjaXR5IHRvIGVuc3VyZSB2aXNpYmlsaXR5XG4gIGNvbnN0IGxpbmVPcGFjaXR5ID0gaGlnaGxpZ2h0T3B0aW9ucy5oYWxvT3BhY2l0eSAhPT0gdW5kZWZpbmVkXG4gICAgPyBNYXRoLm1heChoaWdobGlnaHRPcHRpb25zLmhhbG9PcGFjaXR5LCAwLjgpIC8vIEF0IGxlYXN0IDgwJSBvcGFjaXR5XG4gICAgOiBiYXNlQWxwaGEgLy8gVXNlIHRoZSBjb2xvcidzIGFscGhhLCBvciBkZWZhdWx0IHRvIDEuMFxuICBjb25zdCBsaW5lQ29sb3IgPSBbLi4uYmFzZUNvbG9yLCBsaW5lT3BhY2l0eV1cbiAgXG4gIHN3aXRjaCAoZ2VvbWV0cnlUeXBlKSB7XG4gICAgY2FzZSAncG9pbnQnOlxuICAgIGNhc2UgJ211bHRpcG9pbnQnOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3NpbXBsZS1tYXJrZXInLFxuICAgICAgICBjb2xvcjogb3V0bGluZUNvbG9yLFxuICAgICAgICBvdXRsaW5lOiB7XG4gICAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgICB3aWR0aDogMlxuICAgICAgICB9LFxuICAgICAgICBzaXplOiAxMlxuICAgICAgfSBhcyB1bmtub3duIGFzIF9fZXNyaS5TaW1wbGVNYXJrZXJTeW1ib2xcbiAgICAgIFxuICAgIGNhc2UgJ3BvbHlsaW5lJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzaW1wbGUtbGluZScsXG4gICAgICAgIGNvbG9yOiBsaW5lQ29sb3IsIC8vIFVzZSBsaW5lQ29sb3Igd2l0aCBwcm9wZXIgb3BhY2l0eVxuICAgICAgICB3aWR0aDogNCAvLyBJbmNyZWFzZWQgd2lkdGggZm9yIHZpc2liaWxpdHlcbiAgICAgIH0gYXMgdW5rbm93biBhcyBfX2VzcmkuU2ltcGxlTGluZVN5bWJvbFxuICAgICAgXG4gICAgY2FzZSAncG9seWdvbic6XG4gICAgY2FzZSAnbXVsdGlwb2x5Z29uJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzaW1wbGUtZmlsbCcsXG4gICAgICAgIGNvbG9yOiBmaWxsQ29sb3IsXG4gICAgICAgIG91dGxpbmU6IHtcbiAgICAgICAgICBjb2xvcjogb3V0bGluZUNvbG9yLFxuICAgICAgICAgIHdpZHRoOiAyXG4gICAgICAgIH1cbiAgICAgIH0gYXMgdW5rbm93biBhcyBfX2VzcmkuU2ltcGxlRmlsbFN5bWJvbFxuICAgICAgXG4gICAgZGVmYXVsdDpcbiAgICAgIC8vIEZhbGxiYWNrIHRvIHBvbHlnb24gc3ltYm9sXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2ltcGxlLWZpbGwnLFxuICAgICAgICBjb2xvcjogZmlsbENvbG9yLFxuICAgICAgICBvdXRsaW5lOiB7XG4gICAgICAgICAgY29sb3I6IG91dGxpbmVDb2xvcixcbiAgICAgICAgICB3aWR0aDogMlxuICAgICAgICB9XG4gICAgICB9IGFzIHVua25vd24gYXMgX19lc3JpLlNpbXBsZUZpbGxTeW1ib2xcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgb3IgZ2V0cyBhbiBleGlzdGluZyBncmFwaGljcyBsYXllciBmb3IgdGhlIHdpZGdldC5cbiAqIFVzZXMgYSB1bmlxdWUgSUQgYmFzZWQgb24gd2lkZ2V0IElEIHRvIGVuc3VyZSBvbmUgbGF5ZXIgcGVyIHdpZGdldC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU9yR2V0R3JhcGhpY3NMYXllcihcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgbWFwVmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBQcm9taXNlPF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbD4ge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGNvbnN0IGxheWVySWQgPSBgcXVlcnlzaW1wbGUtaGlnaGxpZ2h0LSR7d2lkZ2V0SWR9YFxuICBcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBpZiBsYXllciBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nTGF5ZXIgPSBtYXBWaWV3Lm1hcC5sYXllcnMuZmluZChsYXllciA9PiBsYXllci5pZCA9PT0gbGF5ZXJJZCkgYXMgX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgICBpZiAoZXhpc3RpbmdMYXllcikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXItZm91bmQtZXhpc3RpbmcnLFxuICAgICAgICBzZXEsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBsYXllcklkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZXhpc3RpbmdMYXllclxuICAgIH1cblxuICAgIC8vIExvYWQgR3JhcGhpY3NMYXllciBtb2R1bGVcbiAgICBjb25zdCBbR3JhcGhpY3NMYXllcl0gPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9sYXllcnMvR3JhcGhpY3NMYXllciddKVxuICAgIFxuICAgIC8vIENyZWF0ZSBuZXcgZ3JhcGhpY3MgbGF5ZXJcbiAgICBjb25zdCBncmFwaGljc0xheWVyID0gbmV3IEdyYXBoaWNzTGF5ZXIoe1xuICAgICAgaWQ6IGxheWVySWQsXG4gICAgICB0aXRsZTogYFF1ZXJ5U2ltcGxlIEhpZ2hsaWdodHMgKCR7d2lkZ2V0SWR9KWAsXG4gICAgICBsaXN0TW9kZTogJ2hpZGUnLCAvLyBIaWRlIGZyb20gbGF5ZXIgbGlzdFxuICAgICAgdmlzaWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIHRvIG1hcFxuICAgIG1hcFZpZXcubWFwLmFkZChncmFwaGljc0xheWVyKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NyZWF0ZU9yR2V0R3JhcGhpY3NMYXllci1jcmVhdGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHdpZGdldElkLFxuICAgICAgbGF5ZXJJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgcmV0dXJuIGdyYXBoaWNzTGF5ZXJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXItZXJyb3InLFxuICAgICAgc2VxLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBsYXllcklkLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vKipcbiAqIEFkZHMgaGlnaGxpZ2h0IGdyYXBoaWNzIHRvIHRoZSBncmFwaGljcyBsYXllciB1c2luZyBkZWZhdWx0IG1hcCBoaWdobGlnaHQgY29sb3IuXG4gKiBOb3RlOiBUaGlzIGZ1bmN0aW9uIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgR3JhcGhpY3NMYXllciBtb2R1bGUgaXMgbG9hZGVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkSGlnaGxpZ2h0R3JhcGhpY3MoXG4gIGdyYXBoaWNzTGF5ZXI6IF9fZXNyaS5HcmFwaGljc0xheWVyLFxuICByZWNvcmRzOiBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGlmICghZ3JhcGhpY3NMYXllciB8fCAhcmVjb3JkcyB8fCByZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2FkZEhpZ2hsaWdodEdyYXBoaWNzLXNraXBwZWQnLFxuICAgICAgc2VxLFxuICAgICAgcmVhc29uOiAhZ3JhcGhpY3NMYXllciA/ICduby1ncmFwaGljcy1sYXllcicgOiAnbm8tcmVjb3JkcycsXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIExvZyBleGlzdGluZyBzdGF0ZSBCRUZPUkUgYWRkaW5nIC0gdmVyaWZ5IGFzc3VtcHRpb24gYWJvdXQgZHVwbGljYXRlc1xuICBjb25zdCBleGlzdGluZ0dyYXBoaWNzQ291bnQgPSBncmFwaGljc0xheWVyLmdyYXBoaWNzLmxlbmd0aFxuICBjb25zdCBleGlzdGluZ1JlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBjb25zdCBleGlzdGluZ1JlY29yZElkU2V0ID0gbmV3IFNldDxzdHJpbmc+KClcbiAgXG4gIGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBjb25zdCByZWNvcmRJZCA9IGdyYXBoaWMuYXR0cmlidXRlcz8ucmVjb3JkSWRcbiAgICBpZiAocmVjb3JkSWQpIHtcbiAgICAgIGV4aXN0aW5nUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgICBleGlzdGluZ1JlY29yZElkU2V0LmFkZChyZWNvcmRJZClcbiAgICB9XG4gIH0pXG5cbiAgLy8gTG9nIHdoYXQgd2UncmUgdHJ5aW5nIHRvIGFkZFxuICBjb25zdCBpbmNvbWluZ1JlY29yZElkcyA9IHJlY29yZHMubWFwKHIgPT4gci5nZXRJZCgpKVxuXG4gIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1iZWZvcmUtYWRkJyxcbiAgICBzZXEsXG4gICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgIGV4aXN0aW5nR3JhcGhpY3NDb3VudCxcbiAgICBleGlzdGluZ1JlY29yZElkczogZXhpc3RpbmdSZWNvcmRJZHMuc2xpY2UoMCwgMjApLCAvLyBMaW1pdCB0byBmaXJzdCAyMCBmb3IgcmVhZGFiaWxpdHlcbiAgICBleGlzdGluZ1JlY29yZElkc0NvdW50OiBleGlzdGluZ1JlY29yZElkcy5sZW5ndGgsXG4gICAgaW5jb21pbmdSZWNvcmRJZHM6IGluY29taW5nUmVjb3JkSWRzLnNsaWNlKDAsIDIwKSwgLy8gTGltaXQgdG8gZmlyc3QgMjBcbiAgICBpbmNvbWluZ1JlY29yZElkc0NvdW50OiBpbmNvbWluZ1JlY29yZElkcy5sZW5ndGgsXG4gICAgZHVwbGljYXRlUmVjb3JkSWRzOiBpbmNvbWluZ1JlY29yZElkcy5maWx0ZXIoaWQgPT4gZXhpc3RpbmdSZWNvcmRJZFNldC5oYXMoaWQpKS5zbGljZSgwLCAyMCksXG4gICAgZHVwbGljYXRlQ291bnQ6IGluY29taW5nUmVjb3JkSWRzLmZpbHRlcihpZCA9PiBleGlzdGluZ1JlY29yZElkU2V0LmhhcyhpZCkpLmxlbmd0aCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgfSlcblxuICAvLyBMb2FkIEdyYXBoaWMgbW9kdWxlXG4gIGNvbnN0IFtHcmFwaGljXSA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL0dyYXBoaWMnXSlcblxuICBsZXQgYWRkZWRDb3VudCA9IDBcbiAgbGV0IHNraXBwZWRDb3VudCA9IDBcbiAgbGV0IGR1cGxpY2F0ZUNvdW50ID0gMFxuICBjb25zdCBhZGRlZFJlY29yZElkczogc3RyaW5nW10gPSBbXVxuICBjb25zdCBza2lwcGVkUmVjb3JkSWRzOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IGR1cGxpY2F0ZVJlY29yZElkczogc3RyaW5nW10gPSBbXVxuXG4gIHJlY29yZHMuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZC5nZXRJZCgpXG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgcmVjb3JkIElEIGFscmVhZHkgZXhpc3RzIGluIGdyYXBoaWNzIGxheWVyXG4gICAgICBpZiAoZXhpc3RpbmdSZWNvcmRJZFNldC5oYXMocmVjb3JkSWQpKSB7XG4gICAgICAgIGR1cGxpY2F0ZUNvdW50KytcbiAgICAgICAgZHVwbGljYXRlUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1kdXBsaWNhdGUtZGV0ZWN0ZWQnLFxuICAgICAgICAgIHNlcSxcbiAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiAvLyBTa2lwIGFkZGluZyBkdXBsaWNhdGVcbiAgICAgIH1cblxuICAgICAgY29uc3QgZ3JhcGhpYyA9IHJlY29yZC5mZWF0dXJlIGFzIF9fZXNyaS5HcmFwaGljXG4gICAgICBpZiAoIWdyYXBoaWMgfHwgIWdyYXBoaWMuZ2VvbWV0cnkpIHtcbiAgICAgICAgc2tpcHBlZENvdW50KytcbiAgICAgICAgc2tpcHBlZFJlY29yZElkcy5wdXNoKHJlY29yZElkKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGdlb21ldHJ5IHR5cGUgZnJvbSBncmFwaGljXG4gICAgICBjb25zdCBnZW9tZXRyeVR5cGUgPSBncmFwaGljLmdlb21ldHJ5LnR5cGVcblxuICAgICAgLy8gQ3JlYXRlIHN5bWJvbCB1c2luZyBkZWZhdWx0IGhpZ2hsaWdodCBjb2xvclxuICAgICAgY29uc3Qgc3ltYm9sID0gZ2V0RGVmYXVsdEhpZ2hsaWdodFN5bWJvbChnZW9tZXRyeVR5cGUsIG1hcFZpZXcpXG5cbiAgICAgIC8vIENyZWF0ZSBuZXcgZ3JhcGhpYyB3aXRoIGhpZ2hsaWdodCBzeW1ib2xcbiAgICAgIGNvbnN0IGhpZ2hsaWdodEdyYXBoaWMgPSBuZXcgR3JhcGhpYyh7XG4gICAgICAgIGdlb21ldHJ5OiBncmFwaGljLmdlb21ldHJ5LFxuICAgICAgICBzeW1ib2w6IHN5bWJvbCxcbiAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgIHJlY29yZElkOiByZWNvcmRJZCxcbiAgICAgICAgICBzb3VyY2U6ICdxdWVyeXNpbXBsZS1oaWdobGlnaHQnLFxuICAgICAgICAgIHdpZGdldElkOiBncmFwaGljc0xheWVyLmlkLnJlcGxhY2UoJ3F1ZXJ5c2ltcGxlLWhpZ2hsaWdodC0nLCAnJylcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgZ3JhcGhpY3NMYXllci5hZGQoaGlnaGxpZ2h0R3JhcGhpYylcbiAgICAgIGFkZGVkQ291bnQrK1xuICAgICAgYWRkZWRSZWNvcmRJZHMucHVzaChyZWNvcmRJZClcbiAgICAgIFxuICAgICAgLy8gQWRkIHRvIHRyYWNraW5nIHNldCB0byBwcmV2ZW50IGR1cGxpY2F0ZXMgd2l0aGluIHRoaXMgYmF0Y2hcbiAgICAgIGV4aXN0aW5nUmVjb3JkSWRTZXQuYWRkKHJlY29yZElkKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBza2lwcGVkQ291bnQrK1xuICAgICAgc2tpcHBlZFJlY29yZElkcy5wdXNoKHJlY29yZC5nZXRJZCgpKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1yZWNvcmQtZXJyb3InLFxuICAgICAgICBzZXEsXG4gICAgICAgIHJlY29yZElkOiByZWNvcmQuZ2V0SWQoKSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSlcblxuICAvLyBMb2cgZmluYWwgc3RhdGUgQUZURVIgYWRkaW5nXG4gIGNvbnN0IGZpbmFsR3JhcGhpY3NDb3VudCA9IGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MubGVuZ3RoXG4gIGNvbnN0IGZpbmFsUmVjb3JkSWRzOiBzdHJpbmdbXSA9IFtdXG4gIGdyYXBoaWNzTGF5ZXIuZ3JhcGhpY3MuZm9yRWFjaChncmFwaGljID0+IHtcbiAgICBjb25zdCByZWNvcmRJZCA9IGdyYXBoaWMuYXR0cmlidXRlcz8ucmVjb3JkSWRcbiAgICBpZiAocmVjb3JkSWQpIHtcbiAgICAgIGZpbmFsUmVjb3JkSWRzLnB1c2gocmVjb3JkSWQpXG4gICAgfVxuICB9KVxuXG4gIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgZXZlbnQ6ICdhZGRIaWdobGlnaHRHcmFwaGljcy1jb21wbGV0ZScsXG4gICAgc2VxLFxuICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICByZWNvcmRzQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgIGFkZGVkQ291bnQsXG4gICAgc2tpcHBlZENvdW50LFxuICAgIGR1cGxpY2F0ZUNvdW50LFxuICAgIGFkZGVkUmVjb3JkSWRzOiBhZGRlZFJlY29yZElkcy5zbGljZSgwLCAyMCksIC8vIExpbWl0IHRvIGZpcnN0IDIwXG4gICAgc2tpcHBlZFJlY29yZElkczogc2tpcHBlZFJlY29yZElkcy5zbGljZSgwLCAyMCksXG4gICAgZHVwbGljYXRlUmVjb3JkSWRzOiBkdXBsaWNhdGVSZWNvcmRJZHMuc2xpY2UoMCwgMjApLFxuICAgIGV4aXN0aW5nR3JhcGhpY3NDb3VudCxcbiAgICBmaW5hbEdyYXBoaWNzQ291bnQsXG4gICAgZXhwZWN0ZWRGaW5hbENvdW50OiBleGlzdGluZ0dyYXBoaWNzQ291bnQgKyBhZGRlZENvdW50LFxuICAgIGZpbmFsUmVjb3JkSWRzOiBmaW5hbFJlY29yZElkcy5zbGljZSgwLCAyMCksIC8vIExpbWl0IHRvIGZpcnN0IDIwXG4gICAgZmluYWxSZWNvcmRJZHNDb3VudDogZmluYWxSZWNvcmRJZHMubGVuZ3RoLFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICB9KVxufVxuXG4vKipcbiAqIFJlbW92ZXMgaGlnaGxpZ2h0IGdyYXBoaWNzIGZyb20gdGhlIGdyYXBoaWNzIGxheWVyIGJ5IHJlY29yZCBJRHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIaWdobGlnaHRHcmFwaGljcyhcbiAgZ3JhcGhpY3NMYXllcjogX19lc3JpLkdyYXBoaWNzTGF5ZXIsXG4gIHJlY29yZElkczogc3RyaW5nW11cbik6IHZvaWQge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGlmICghZ3JhcGhpY3NMYXllciB8fCAhcmVjb3JkSWRzIHx8IHJlY29yZElkcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmVIaWdobGlnaHRHcmFwaGljcy1za2lwcGVkJyxcbiAgICAgIHNlcSxcbiAgICAgIHJlYXNvbjogIWdyYXBoaWNzTGF5ZXIgPyAnbm8tZ3JhcGhpY3MtbGF5ZXInIDogJ25vLXJlY29yZC1pZHMnLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgcmVjb3JkSWRTZXQgPSBuZXcgU2V0KHJlY29yZElkcylcbiAgbGV0IHJlbW92ZWRDb3VudCA9IDBcblxuICAvLyBGaW5kIGFuZCByZW1vdmUgZ3JhcGhpY3MgbWF0Y2hpbmcgcmVjb3JkIElEc1xuICBjb25zdCBncmFwaGljc1RvUmVtb3ZlOiBfX2VzcmkuR3JhcGhpY1tdID0gW11cbiAgZ3JhcGhpY3NMYXllci5ncmFwaGljcy5mb3JFYWNoKGdyYXBoaWMgPT4ge1xuICAgIGNvbnN0IHJlY29yZElkID0gZ3JhcGhpYy5hdHRyaWJ1dGVzPy5yZWNvcmRJZFxuICAgIGlmIChyZWNvcmRJZCAmJiByZWNvcmRJZFNldC5oYXMocmVjb3JkSWQpKSB7XG4gICAgICBncmFwaGljc1RvUmVtb3ZlLnB1c2goZ3JhcGhpYylcbiAgICB9XG4gIH0pXG5cbiAgZ3JhcGhpY3NUb1JlbW92ZS5mb3JFYWNoKGdyYXBoaWMgPT4ge1xuICAgIGdyYXBoaWNzTGF5ZXIucmVtb3ZlKGdyYXBoaWMpXG4gICAgcmVtb3ZlZENvdW50KytcbiAgfSlcblxuICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgIGV2ZW50OiAncmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MtY29tcGxldGUnLFxuICAgIHNlcSxcbiAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgcmVtb3ZlZENvdW50LFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICB9KVxufVxuXG4vKipcbiAqIENsZWFycyBhbGwgaGlnaGxpZ2h0IGdyYXBoaWNzIGZyb20gdGhlIGdyYXBoaWNzIGxheWVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJHcmFwaGljc0xheWVyKGdyYXBoaWNzTGF5ZXI6IF9fZXNyaS5HcmFwaGljc0xheWVyKTogdm9pZCB7XG4gIGNvbnN0IHNlcSA9ICsrb3BlcmF0aW9uU2VxdWVuY2VcbiAgaWYgKCFncmFwaGljc0xheWVyKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJHcmFwaGljc0xheWVyLXNraXBwZWQnLFxuICAgICAgc2VxLFxuICAgICAgcmVhc29uOiAnbm8tZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IGdyYXBoaWNzQ291bnQgPSBncmFwaGljc0xheWVyLmdyYXBoaWNzLmxlbmd0aFxuICBncmFwaGljc0xheWVyLnJlbW92ZUFsbCgpXG5cbiAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICBldmVudDogJ2NsZWFyR3JhcGhpY3NMYXllci1jb21wbGV0ZScsXG4gICAgc2VxLFxuICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICBncmFwaGljc1JlbW92ZWQ6IGdyYXBoaWNzQ291bnQsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pXG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgZ3JhcGhpY3MgbGF5ZXIgZnJvbSB0aGUgbWFwIGFuZCBjbGVhbnMgdXAgcmVmZXJlbmNlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFudXBHcmFwaGljc0xheWVyKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbik6IHZvaWQge1xuICBjb25zdCBzZXEgPSArK29wZXJhdGlvblNlcXVlbmNlXG4gIGNvbnN0IGxheWVySWQgPSBgcXVlcnlzaW1wbGUtaGlnaGxpZ2h0LSR7d2lkZ2V0SWR9YFxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBncmFwaGljc0xheWVyID0gbWFwVmlldy5tYXAubGF5ZXJzLmZpbmQobGF5ZXIgPT4gbGF5ZXIuaWQgPT09IGxheWVySWQpIGFzIF9fZXNyaS5HcmFwaGljc0xheWVyXG4gICAgaWYgKGdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgIC8vIENsZWFyIGFsbCBncmFwaGljcyBmaXJzdFxuICAgICAgZ3JhcGhpY3NMYXllci5yZW1vdmVBbGwoKVxuICAgICAgXG4gICAgICAvLyBSZW1vdmUgbGF5ZXIgZnJvbSBtYXBcbiAgICAgIG1hcFZpZXcubWFwLnJlbW92ZShncmFwaGljc0xheWVyKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NsZWFudXBHcmFwaGljc0xheWVyLWNvbXBsZXRlJyxcbiAgICAgICAgc2VxLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgbGF5ZXJJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NsZWFudXBHcmFwaGljc0xheWVyLW5vdC1mb3VuZCcsXG4gICAgICAgIHNlcSxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGxheWVySWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnY2xlYW51cEdyYXBoaWNzTGF5ZXItZXJyb3InLFxuICAgICAgc2VxLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBsYXllcklkLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH1cbn1cblxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwganN4LCB0eXBlIEltbXV0YWJsZUFycmF5LCBtb2R1bGVMb2FkZXIsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHR5cGUgeyBKaW11TWFwVmlldyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHR5cGUgKiBhcyBqaW11TWFwIGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvbWFwJ1xuaW1wb3J0IHsgQ3JlYXRlVG9vbFR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBFbnRpdHlTdGF0dXNUeXBlLCBTdGF0dXNJbmRpY2F0b3IgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuZXhwb3J0IGludGVyZmFjZSBJbnRlcmFjdGl2ZURyYXdQcm9wcyB7XG4gIGppbXVNYXBWaWV3OiBKaW11TWFwVmlld1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHRvb2xUeXBlczogSW1tdXRhYmxlQXJyYXk8Q3JlYXRlVG9vbFR5cGU+XG4gIG9uRHJhd0VuZDogKGdyYXBoaWM6IF9fZXNyaS5HcmFwaGljLCBnZXRMYXllckZ1bj8sIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHZvaWRcbn1cblxuY29uc3Qgc2tldGNoVG9vbEluZm9NYXAgPSB7XG4gIFtDcmVhdGVUb29sVHlwZS5Qb2ludF06IHsgZHJhd1Rvb2xOYW1lOiAncG9pbnQnLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvaW50JywgdG9vbEluZGV4OiAwIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5Qb2x5bGluZV06IHsgZHJhd1Rvb2xOYW1lOiAncG9seWxpbmUnLCBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLXBvbHlsaW5lJywgdG9vbEluZGV4OiA0IH0sXG4gIFtDcmVhdGVUb29sVHlwZS5Qb2x5Z29uXTogeyBkcmF3VG9vbE5hbWU6ICdwb2x5Z29uJywgZXNyaUNsYXNzTmFtZTogJ2VzcmktaWNvbi1wb2x5Z29uJywgdG9vbEluZGV4OiAyIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5SZWN0YW5nbGVdOiB7XG4gICAgZHJhd1Rvb2xOYW1lOiAncmVjdGFuZ2xlJyxcbiAgICBlc3JpQ2xhc3NOYW1lOiAnZXNyaS1pY29uLWNoZWNrYm94LXVuY2hlY2tlZCcsXG4gICAgdG9vbEluZGV4OiAxXG4gIH0sXG4gIFtDcmVhdGVUb29sVHlwZS5DaXJjbGVdOiB7IGRyYXdUb29sTmFtZTogJ2NpcmNsZScsIGVzcmlDbGFzc05hbWU6ICdlc3JpLWljb24tcmFkaW8tdW5jaGVja2VkJywgdG9vbEluZGV4OiAzIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEludGVyYWN0aXZlRHJhdyAocHJvcHM6IEludGVyYWN0aXZlRHJhd1Byb3BzKSB7XG4gIGNvbnN0IHsgdG9vbFR5cGVzID0gW10sIGppbXVNYXBWaWV3LCBvbkRyYXdFbmQsIHdpZGdldElkIH0gPSBwcm9wc1xuICBjb25zdCBnZXRJMThuTWVzc2FnZSA9IGhvb2tzLnVzZVRyYW5zbGF0aW9uKGRlZmF1bHRNZXNzYWdlKVxuICBjb25zdCBbbWFwTW9kdWxlLCBzZXRNYXBNb2R1bGVdID0gUmVhY3QudXNlU3RhdGU8dHlwZW9mIGppbXVNYXA+KG51bGwpXG4gIGNvbnN0IGdldExheWVyRnVuUmVmID0gUmVhY3QudXNlUmVmPCgpID0+IF9fZXNyaS5HcmFwaGljc0xheWVyIHwgX19lc3JpLk1hcE5vdGVzTGF5ZXI+KG51bGwpXG4gIGNvbnN0IGdyYXBoaWNSZWYgPSBSZWFjdC51c2VSZWYobnVsbClcbiAgY29uc3QgW2NsZWFyQWZ0ZXJBcHBseSwgc2V0Q2xlYXJBZnRlckFwcGx5XSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKVxuXG4gIGNvbnN0IHZpc2libGVFbGVtZW50cyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBjcmVhdGVUb29sczogT2JqZWN0LmVudHJpZXMoc2tldGNoVG9vbEluZm9NYXApLnJlZHVjZShcbiAgICAgICAgKHJlc3VsdCwgW2tleSwgdmFsdWVdKSA9PiAoeyAuLi5yZXN1bHQsIFt2YWx1ZS5kcmF3VG9vbE5hbWVdOiB0b29sVHlwZXMuaW5jbHVkZXMoa2V5IGFzIENyZWF0ZVRvb2xUeXBlKSB9KSxcbiAgICAgICAgeyBwb2ludDogZmFsc2UgfVxuICAgICAgKSBhcyBhbnksXG4gICAgICBzZWxlY3Rpb25Ub29sczoge1xuICAgICAgICAnbGFzc28tc2VsZWN0aW9uJzogZmFsc2UsXG4gICAgICAgICdyZWN0YW5nbGUtc2VsZWN0aW9uJzogZmFsc2VcbiAgICAgIH0sXG4gICAgICBzZXR0aW5nc01lbnU6IGZhbHNlLFxuICAgICAgdW5kb1JlZG9NZW51OiBmYWxzZSxcbiAgICAgIGRlbGV0ZUJ1dHRvbjogdHJ1ZVxuICAgIH1cbiAgfSwgW3Rvb2xUeXBlc10pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgbW9kdWxlTG9hZGVyLmxvYWRNb2R1bGU8dHlwZW9mIGppbXVNYXA+KCdqaW11LXVpL2FkdmFuY2VkL21hcCcpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgc2V0TWFwTW9kdWxlKHJlc3VsdClcbiAgICB9KVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZURyYXdUb29sQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChqaW11RHJhd1Rvb2xzUmVmOiBqaW11TWFwLkppbXVEcmF3Q3JlYXRlZERlc2NyaXB0b3IpID0+IHtcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ID0gamltdURyYXdUb29sc1JlZi5nZXRHcmFwaGljc0xheWVyXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZURyYXdTdGFydCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBnZXRMYXllckZ1blJlZi5jdXJyZW50ICYmICgoZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCkoKSBhcyBfX2VzcmkuR3JhcGhpY3NMYXllcikucmVtb3ZlQWxsKClcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlRHJhd0VuZCA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChncmFwaGljKSA9PiB7XG4gICAgICBncmFwaGljUmVmLmN1cnJlbnQgPSBncmFwaGljXG4gICAgICBvbkRyYXdFbmQoZ3JhcGhpYywgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCwgY2xlYXJBZnRlckFwcGx5KVxuICAgIH0sXG4gICAgW29uRHJhd0VuZCwgY2xlYXJBZnRlckFwcGx5XVxuICApXG5cbiAgY29uc3QgaGFuZGxlQ2xlYXJlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBncmFwaGljUmVmLmN1cnJlbnQgPSBudWxsXG4gICAgb25EcmF3RW5kKG51bGwpXG4gIH0sIFtvbkRyYXdFbmRdKVxuXG4gIGNvbnN0IGhhbmRsZUNsZWFyU2V0dGluZ0NoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgaWYgKGdyYXBoaWNSZWYuY3VycmVudCkge1xuICAgICAgb25EcmF3RW5kKGdyYXBoaWNSZWYuY3VycmVudCwgZ2V0TGF5ZXJGdW5SZWYuY3VycmVudCwgZS50YXJnZXQuY2hlY2tlZClcbiAgICB9XG4gICAgc2V0Q2xlYXJBZnRlckFwcGx5KGUudGFyZ2V0LmNoZWNrZWQpXG4gIH0sIFtvbkRyYXdFbmRdKVxuXG4gIGNvbnN0IEppbXVEcmF3ID0gbWFwTW9kdWxlPy5KaW11RHJhd1xuICBpZiAoIUppbXVEcmF3KSB7XG4gICAgcmV0dXJuIDxTdGF0dXNJbmRpY2F0b3Igc3RhdHVzVHlwZT17RW50aXR5U3RhdHVzVHlwZS5Mb2FkaW5nfSAvPlxuICB9XG4gIGNvbnN0IGlzQXZhaWxhYmxlID0gT2JqZWN0LmtleXModmlzaWJsZUVsZW1lbnRzLmNyZWF0ZVRvb2xzKS5zb21lKHRvb2xOYW1lID0+IHZpc2libGVFbGVtZW50cy5jcmVhdGVUb29sc1t0b29sTmFtZV0pXG4gIGlmICghaXNBdmFpbGFibGUpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxKaW11RHJhd1xuICAgICAgICBqaW11TWFwVmlldz17amltdU1hcFZpZXd9XG4gICAgICAgIG9wZXJhdG9yV2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICBkaXNhYmxlU3ltYm9sU2VsZWN0b3JcbiAgICAgICAgZHJhd2luZ09wdGlvbnM9e3tcbiAgICAgICAgICBjcmVhdGlvbk1vZGU6IG1hcE1vZHVsZS5KaW11RHJhd0NyZWF0aW9uTW9kZS5TaW5nbGUsXG4gICAgICAgICAgdXBkYXRlT25HcmFwaGljQ2xpY2s6IGZhbHNlLFxuICAgICAgICAgIHZpc2libGVFbGVtZW50czogdmlzaWJsZUVsZW1lbnRzXG4gICAgICAgIH19XG4gICAgICAgIHVpT3B0aW9ucz17e1xuICAgICAgICAgIGlzSGlkZUJvcmRlcjogdHJ1ZVxuICAgICAgICB9fVxuICAgICAgICBvbkppbXVEcmF3Q3JlYXRlZD17aGFuZGxlRHJhd1Rvb2xDcmVhdGVkfVxuICAgICAgICBvbkRyYXdpbmdTdGFydGVkPXtoYW5kbGVEcmF3U3RhcnR9XG4gICAgICAgIG9uRHJhd2luZ0ZpbmlzaGVkPXtoYW5kbGVEcmF3RW5kfVxuICAgICAgICBvbkRyYXdpbmdDbGVhcmVkPXtoYW5kbGVDbGVhcmVkfVxuICAgICAgLz5cbiAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICA8Q2hlY2tib3ggY2hlY2tlZD17Y2xlYXJBZnRlckFwcGx5fSBvbkNoYW5nZT17aGFuZGxlQ2xlYXJTZXR0aW5nQ2hhbmdlfSBjbGFzc05hbWU9J21yLTInIC8+XG4gICAgICAgIHtnZXRJMThuTWVzc2FnZSgnY2xlYXJEcmF3aW5nJyl9XG4gICAgICA8L2xhYmVsPlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgaG9va3MgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBMb2FkaW5nLCBMb2FkaW5nVHlwZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBzdHlsZWQgfSBmcm9tICdqaW11LXRoZW1lJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5cbmNvbnN0IFJvb3QgPSBzdHlsZWQuZGl2YFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICByaWdodDogMDtcbiAgbGVmdDogMDtcbiAgei1pbmRleDogMjtcblxuICAubG9hZGluZy1jb250ZW50IHtcbiAgICAubG9hZGluZy10aXAge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgfVxuYFxuZXhwb3J0IGZ1bmN0aW9uIExvYWRpbmdSZXN1bHQgKCkge1xuICBjb25zdCB0cmFuc2xhdGUgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgcmV0dXJuIChcbiAgICA8Um9vdD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsb2FkaW5nLWNvbnRlbnQgdy0xMDAgcHgtNCBkLWZsZXggZmxleC1jb2x1bW4ganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICA8ZGl2IHJvbGU9J2FsZXJ0JyBhcmlhLWxpdmU9J2Fzc2VydGl2ZScgY2xhc3NOYW1lPSd0ZXh0LXBhcGVyJz5cbiAgICAgICAgICB7dHJhbnNsYXRlKCdyZXRyaWV2aW5nJyl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8TG9hZGluZyBjbGFzc05hbWU9J2xvYWRpbmctdGlwIG10LTgnIHR5cGU9e0xvYWRpbmdUeXBlLkRvbnV0fS8+XG4gICAgICA8L2Rpdj5cbiAgICA8L1Jvb3Q+XG4gIClcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBSZWFjdFJlZHV4LFxuICBqc3gsXG4gIGNzcyxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLFxuICB0eXBlIElNU3RhdGUsXG4gIGNsYXNzTmFtZXNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFRyYXNoT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci90cmFzaCdcbmltcG9ydCBGZWF0dXJlSW5mbyBmcm9tICcuL2NvbXBvbmVudHMvZmVhdHVyZS1pbmZvJ1xuaW1wb3J0IHsgTGlzdERpcmVjdGlvbiB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBSZXN1bHRJdGVtUHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHBvcHVwVGVtcGxhdGU6IGFueVxuICBkZWZhdWx0UG9wdXBUZW1wbGF0ZTogYW55XG4gIGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkXG4gIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VcbiAgZXhwYW5kQnlEZWZhdWx0OiBib29sZWFuXG4gIG9uQ2xpY2s6IChyZWNvcmQ6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIG9uUmVtb3ZlOiAocmVjb3JkOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIGZsZXgtZmxvdzogcm93O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBtaW4taGVpZ2h0OiAycmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICYuc2VsZWN0ZWQge1xuICAgIG91dGxpbmU6IDJweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKTtcbiAgfVxuICBcbiAgLnJlbW92ZS1idXR0b24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDRweDtcbiAgICByaWdodDogNHB4O1xuICAgIHotaW5kZXg6IDEwO1xuICAgIG9wYWNpdHk6IDAuNztcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnM7XG4gICAgXG4gICAgJjpob3ZlciB7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgIH1cbiAgICBcbiAgICAvLyBMYXJnZXIgdG91Y2ggdGFyZ2V0IGZvciBtb2JpbGUvYWNjZXNzaWJpbGl0eVxuICAgIG1pbi13aWR0aDogMzJweDtcbiAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICB9XG5gXG5cbi8qKlxuICogUXVlcnlSZXN1bHRJdGVtIGNvbXBvbmVudCAtIGRpc3BsYXlzIGEgc2luZ2xlIHF1ZXJ5IHJlc3VsdCByZWNvcmRcbiAqIEZlYXR1cmVzOlxuICogLSBDbGlja2luZyB0aGUgaXRlbSB6b29tcyB0byB0aGUgZmVhdHVyZSBvbiB0aGUgbWFwXG4gKiAtIFJlbW92ZSBidXR0b24gKHRyYXNoIGljb24pIGluIHVwcGVyLXJpZ2h0IGNvcm5lciB0byByZW1vdmUgcmVjb3JkIGZyb20gcmVzdWx0c1xuICogLSBSZWNvcmRzIGFyZSBleHBhbmRlZCBieSBkZWZhdWx0IHRvIHNob3cgZnVsbCBmZWF0dXJlIGluZm9ybWF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBRdWVyeVJlc3VsdEl0ZW0gPSAocHJvcHM6IFJlc3VsdEl0ZW1Qcm9wcykgPT4ge1xuICBjb25zdCB7IHdpZGdldElkLCBkYXRhLCBkYXRhU291cmNlLCBwb3B1cFRlbXBsYXRlLCBkZWZhdWx0UG9wdXBUZW1wbGF0ZSwgb25DbGljaywgb25SZW1vdmUsIGV4cGFuZEJ5RGVmYXVsdCA9IGZhbHNlIH0gPSBwcm9wc1xuICBcbiAgY29uc3QgcmVjb3JkSWQgPSBkYXRhLmdldElkKClcbiAgXG4gIC8vIExvZyB3aGVuIFF1ZXJ5UmVzdWx0SXRlbSByZW5kZXJzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdFWFBBTkQtQ09MTEFQU0UnLCB7XG4gICAgICBldmVudDogJ1F1ZXJ5UmVzdWx0SXRlbS1yZW5kZXInLFxuICAgICAgcmVjb3JkSWQsXG4gICAgICBleHBhbmRCeURlZmF1bHQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICB9LCBbcmVjb3JkSWQsIGV4cGFuZEJ5RGVmYXVsdF0pXG4gIFxuICAvLyBDaGVjayBpZiB0aGlzIHJlY29yZCBpcyBjdXJyZW50bHkgc2VsZWN0ZWRcbiAgY29uc3Qgc2VsZWN0ZWQgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT5cbiAgICBzdGF0ZS5kYXRhU291cmNlc0luZm8/LltkYXRhU291cmNlLmlkXT8uc2VsZWN0ZWRJZHM/LmluY2x1ZGVzKGRhdGEuZ2V0SWQoKSlcbiAgKVxuICBcbiAgLy8gRGV0ZXJtaW5lIGlmIGxpc3QgaXMgZGlzcGxheWVkIHZlcnRpY2FsbHkgKGFmZmVjdHMgRmVhdHVyZUluZm8gZXhwYW5kYWJpbGl0eSlcbiAgY29uc3QgaXNWZXJ0aWNhbEFsaWduID0gUmVhY3RSZWR1eC51c2VTZWxlY3Rvcigoc3RhdGU6IElNU3RhdGUpID0+IHtcbiAgICBjb25zdCB3aWRnZXRKc29uID0gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdXG4gICAgcmV0dXJuIHdpZGdldEpzb24uY29uZmlnLnJlc3VsdExpc3REaXJlY3Rpb24gIT09IExpc3REaXJlY3Rpb24uSG9yaXpvbnRhbFxuICB9KVxuXG4gIC8vIEhhbmRsZSBjbGlja2luZyBvbiB0aGUgcmVzdWx0IGl0ZW0gLSB6b29tcyB0byBmZWF0dXJlIG9uIG1hcFxuICBjb25zdCBoYW5kbGVDbGlja1Jlc3VsdEl0ZW0gPSBSZWFjdC51c2VDYWxsYmFjaygoZTogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIC8vIERvbid0IHRyaWdnZXIgem9vbSBpZiBjbGlja2luZyB0aGUgcmVtb3ZlIGJ1dHRvblxuICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJy5yZW1vdmUtYnV0dG9uJykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBvbkNsaWNrKGRhdGEpXG4gIH0sIFtvbkNsaWNrLCBkYXRhXSlcblxuICAvLyBIYW5kbGUgY2xpY2tpbmcgdGhlIHJlbW92ZSBidXR0b24gLSByZW1vdmVzIHJlY29yZCBmcm9tIHJlc3VsdHMgYW5kIHNlbGVjdGlvblxuICBjb25zdCBoYW5kbGVSZW1vdmUgPSBSZWFjdC51c2VDYWxsYmFjaygoZTogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCkgLy8gUHJldmVudCB0cmlnZ2VyaW5nIHRoZSBpdGVtIGNsaWNrIGhhbmRsZXJcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBvblJlbW92ZShkYXRhKVxuICB9LCBbb25SZW1vdmUsIGRhdGFdKVxuXG4gIGNvbnN0IG9uS2V5VXAgPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFbnRlcicgfHwgZXZ0LmtleSA9PT0gJyAnKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBoYW5kbGVDbGlja1Jlc3VsdEl0ZW0oZXZ0IGFzIGFueSlcbiAgICB9XG4gIH0sIFtoYW5kbGVDbGlja1Jlc3VsdEl0ZW1dKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS1yZXN1bHQtaXRlbScsIHsgc2VsZWN0ZWQgfSl9XG4gICAgICBvbkNsaWNrPXtoYW5kbGVDbGlja1Jlc3VsdEl0ZW19XG4gICAgICBvbktleVVwPXtvbktleVVwfVxuICAgICAgY3NzPXtzdHlsZX1cbiAgICAgIHJvbGU9J29wdGlvbidcbiAgICAgIGFyaWEtc2VsZWN0ZWQ9e3NlbGVjdGVkfVxuICAgICAgdGFiSW5kZXg9ezB9XG4gICAgPlxuICAgICAgPEZlYXR1cmVJbmZvXG4gICAgICAgIGdyYXBoaWM9e2RhdGEuZmVhdHVyZSBhcyBfX2VzcmkuR3JhcGhpY31cbiAgICAgICAgcG9wdXBUZW1wbGF0ZT17cG9wdXBUZW1wbGF0ZX1cbiAgICAgICAgZGVmYXVsdFBvcHVwVGVtcGxhdGU9e2RlZmF1bHRQb3B1cFRlbXBsYXRlfVxuICAgICAgICB0b2dnbGFibGU9e2lzVmVydGljYWxBbGlnbn1cbiAgICAgICAgZXhwYW5kQnlEZWZhdWx0PXtleHBhbmRCeURlZmF1bHR9XG4gICAgICAgIGRhdGFTb3VyY2U9e2RhdGFTb3VyY2V9XG4gICAgICAvPlxuICAgICAgPEJ1dHRvblxuICAgICAgICBjbGFzc05hbWU9XCJyZW1vdmUtYnV0dG9uXCJcbiAgICAgICAgaWNvblxuICAgICAgICBzaXplPVwic21cIlxuICAgICAgICB2YXJpYW50PVwidGV4dFwiXG4gICAgICAgIGNvbG9yPVwiaW5oZXJpdFwiXG4gICAgICAgIG9uQ2xpY2s9e2hhbmRsZVJlbW92ZX1cbiAgICAgICAgYXJpYS1sYWJlbD1cIlJlbW92ZSByZWNvcmRcIlxuICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICBwYWRkaW5nOiA2cHg7XG4gICAgICAgICAgbWluLXdpZHRoOiAzMnB4O1xuICAgICAgICAgIHdpZHRoOiAzMnB4O1xuICAgICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGB9XG4gICAgICA+XG4gICAgICAgIDxUcmFzaE91dGxpbmVkIHNpemU9ezE4fSAvPlxuICAgICAgPC9CdXR0b24+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBJbW11dGFibGVPYmplY3QsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgdHlwZSBRdWVyeVBhcmFtcyxcbiAgRGF0YVNvdXJjZUNvbXBvbmVudCxcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXG4gIEltbXV0YWJsZSxcbiAgaG9va3MsXG4gIE1lc3NhZ2VNYW5hZ2VyLFxuICBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmQsXG4gIHR5cGUgRGF0YVJlY29yZFNldCxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZSxcbiAgRGF0YUFjdGlvbk1hbmFnZXIsXG4gIERhdGFMZXZlbCxcbiAgdXNlSW50bFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIEljb24sIFRvb2x0aXAsIERhdGFBY3Rpb25MaXN0LCBEYXRhQWN0aW9uTGlzdFN0eWxlIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCBGaWVsZHNUeXBlLCBQYWdpbmdUeXBlLCBMaXN0RGlyZWN0aW9uLCBSZXN1bHRTZWxlY3RNb2RlLCBTZWxlY3Rpb25UeXBlIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG4vLyBGT1JDRUQ6IEFsd2F5cyBTaW1wbGVMaXN0IC0gTGF6eUxpc3QgYW5kIFBhZ2luZ0xpc3QgcmVtb3ZlZFxuaW1wb3J0IHsgU2ltcGxlTGlzdCB9IGZyb20gJy4vc2ltcGxlLWxpc3QnXG5pbXBvcnQgeyBjb21iaW5lRmllbGRzIH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IERFRkFVTFRfUVVFUllfSVRFTSB9IGZyb20gJy4uL2RlZmF1bHQtcXVlcnktaXRlbSdcbmltcG9ydCB7IEFycm93TGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0J1xuaW1wb3J0IHsgRXhwYW5kQWxsT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2V4cGFuZC1hbGwnXG5pbXBvcnQgeyBDb2xsYXBzZUFsbE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9jb2xsYXBzZS1hbGwnXG5pbXBvcnQgeyBnZXRFeHRyYUFjdGlvbnMgfSBmcm9tICcuLi9kYXRhLWFjdGlvbnMnXG5pbXBvcnQgeyBcbiAgc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMsIFxuICBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMsIFxuICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCxcbiAgcHVibGlzaFNlbGVjdGlvbk1lc3NhZ2UsXG4gIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQgXG59IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZCwgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zIH0gZnJvbSAnLi9yZXN1bHRzLW1hbmFnZW1lbnQtdXRpbHMnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5pbXBvcnQgeyBFcnJvck1lc3NhZ2UgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmNvbnN0IHsgaWNvbk1hcCB9ID0gZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAoKVxuXG4vKipcbiAqIEN1c3RvbSBldmVudCBuYW1lIGZvciByZXF1ZXN0aW5nIHJlc3RvcmF0aW9uIHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzLlxuICovXG5jb25zdCBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXJlc3RvcmUtb24taWRlbnRpZnktY2xvc2UnXG5cbi8qKlxuICogRGV0ZWN0cyBpZiBhbiBpZGVudGlmeSBwb3B1cCBpcyBjdXJyZW50bHkgdmlzaWJsZSBpbiB0aGUgRE9NLlxuICogVXNlcyB2ZXJpZmllZCBzZWxlY3RvcnMgYmFzZWQgb24gRXhwZXJpZW5jZSBCdWlsZGVyJ3MgaWRlbnRpZnkgcG9wdXAgc3RydWN0dXJlLlxuICogXG4gKiBAcmV0dXJucyB0cnVlIGlmIGlkZW50aWZ5IHBvcHVwIGlzIGRldGVjdGVkIGFuZCB2aXNpYmxlLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZnVuY3Rpb24gaXNJZGVudGlmeVBvcHVwT3BlbigpOiBib29sZWFuIHtcbiAgLy8gUHJpbWFyeSBzZWxlY3RvcjogLmVzcmktcG9wdXAgd2l0aCByb2xlPVwiZGlhbG9nXCJcbiAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXNyaS1wb3B1cFtyb2xlPVwiZGlhbG9nXCJdJylcbiAgXG4gIGlmICghcG9wdXApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgLy8gVmVyaWZ5IGl0J3MgdmlzaWJsZSAobm90IGhpZGRlbilcbiAgY29uc3QgYXJpYUhpZGRlbiA9IHBvcHVwLmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKVxuICBpZiAoYXJpYUhpZGRlbiA9PT0gJ3RydWUnKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgXG4gIC8vIEFkZGl0aW9uYWwgY2hlY2s6IHZlcmlmeSBjb21wdXRlZCBzdHlsZSBzaG93cyBpdCdzIHZpc2libGVcbiAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShwb3B1cClcbiAgaWYgKHN0eWxlLmRpc3BsYXkgPT09ICdub25lJyB8fCBzdHlsZS52aXNpYmlsaXR5ID09PSAnaGlkZGVuJyB8fCBzdHlsZS5vcGFjaXR5ID09PSAnMCcpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgLy8gVmVyaWZ5IGl0IGNvbnRhaW5zIGVzcmktZmVhdHVyZXMgKGlkZW50aWZ5IHBvcHVwIHN0cnVjdHVyZSlcbiAgY29uc3QgaGFzRmVhdHVyZXMgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCcuZXNyaS1mZWF0dXJlcycpXG4gIGlmICghaGFzRmVhdHVyZXMpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgcmV0dXJuIHRydWVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWVyeVRhc2tSZXN1bHRQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcmVzdWx0Q291bnQ6IG51bWJlclxuICBtYXhQZXJQYWdlOiBudW1iZXJcbiAgcXVlcnlQYXJhbXM6IFF1ZXJ5UGFyYW1zXG4gIG91dHB1dERTOiBEYXRhU291cmNlXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4gIHJlY29yZHM6IERhdGFSZWNvcmRbXVxuICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuXG4gIG9uTmF2QmFjazogKGNsZWFyUmVzdWx0cz86IGJvb2xlYW4pID0+IFByb21pc2U8dm9pZD4gfCB2b2lkXG4gIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQ/OiBib29sZWFuXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZVxuICBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdXG4gIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPzogKHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10pID0+IHZvaWRcbn1cblxuY29uc3QgcmVzdWx0U3R5bGUgPSBjc3NgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgLnF1ZXJ5LXJlc3VsdF9faGVhZGVyIHtcbiAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XG4gIH1cblxuICAucXVlcnktcmVzdWx0LWNvbnRhaW5lciB7XG4gICAgZmxleDogMSAxIDA7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIG1pbi1oZWlnaHQ6IDA7XG4gIH1cblxuICAucXVlcnktcmVzdWx0LWluZm8ge1xuICAgIGhlaWdodDogMThweDtcbiAgfVxuYFxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrUmVzdWx0IChwcm9wczogUXVlcnlUYXNrUmVzdWx0UHJvcHMpIHtcbiAgY29uc3QgeyBxdWVyeUl0ZW0sIHF1ZXJ5UGFyYW1zLCByZXN1bHRDb3VudCwgbWF4UGVyUGFnZSwgcmVjb3Jkcywgd2lkZ2V0SWQsIG91dHB1dERTLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQsIG9uTmF2QmFjaywgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXG4gIGNvbnN0IGludGwgPSB1c2VJbnRsKClcbiAgY29uc3QgW3F1ZXJ5RGF0YSwgc2V0UXVlcnlEYXRhXSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IFtzZWxlY3RlZFJlY29yZHMsIHNldFNlbGVjdGVkUmVjb3Jkc10gPSBSZWFjdC51c2VTdGF0ZTxEYXRhUmVjb3JkW10+KFtdKVxuICBjb25zdCBbcmVtb3ZlZFJlY29yZElkcywgc2V0UmVtb3ZlZFJlY29yZElkc10gPSBSZWFjdC51c2VTdGF0ZTxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKVxuICBcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgW2V4cGFuZEFsbCwgc2V0RXhwYW5kQWxsXSA9IFJlYWN0LnVzZVN0YXRlKGN1cnJlbnRJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCA/PyBmYWxzZSlcbiAgLy8gVHJhY2sgaW5kaXZpZHVhbCBpdGVtIGV4cGFuc2lvbiBzdGF0ZXMgdG8gbWFpbnRhaW4gc3RhdGUgd2hlbiBpdGVtcyBhcmUgcmVtb3ZlZFxuICBjb25zdCBbaXRlbUV4cGFuZFN0YXRlcywgc2V0SXRlbUV4cGFuZFN0YXRlc10gPSBSZWFjdC51c2VTdGF0ZTxNYXA8c3RyaW5nLCBib29sZWFuPj4obmV3IE1hcCgpKVxuICBjb25zdCBiYWNrQnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIFxuICAvLyBUcmFjayBleHBhbmRBbGwgY2hhbmdlcyBmb3IgZGVidWdnaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2V4cGFuZEFsbC1zdGF0ZS1jaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgZXhwYW5kQWxsLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtleHBhbmRBbGwsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IHNlbGVjdGVkIHRoZXNlIHJlY29yZHMgdG8gcHJldmVudCByZS1zZWxlY3Rpb24gd2hlbiBzd2l0Y2hpbmcgdGFic1xuICBjb25zdCBoYXNTZWxlY3RlZFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gVHJhY2sgdGhlIGxhc3QgcmVjb3JkcyB3ZSBzZWxlY3RlZCB0byBkZXRlY3Qgd2hlbiBuZXcgcmVjb3JkcyBjb21lIGluXG4gIGNvbnN0IGxhc3RTZWxlY3RlZFJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nW10+KFtdKVxuICAvLyBUcmFjayB0aGUgb3JpZ2luYWwgcXVlcnkgcmVjb3JkIElEcyAobm90IHNlbGVjdGVkIElEcykgdG8gZGV0ZWN0IHdoZW4gcXVlcnkgcmVzdWx0cyBjaGFuZ2VcbiAgY29uc3QgbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmID0gUmVhY3QudXNlUmVmPHN0cmluZ1tdPihbXSlcbiAgLy8gVHJhY2sgdGhlIGxhc3Qgc2VsZWN0ZWQgRmVhdHVyZURhdGFSZWNvcmRzIGZvciByZXN0b3JhdGlvbiAoaWYgbmVlZGVkKVxuICBjb25zdCBsYXN0U2VsZWN0ZWRGZWF0dXJlUmVjb3Jkc1JlZiA9IFJlYWN0LnVzZVJlZjxGZWF0dXJlRGF0YVJlY29yZFtdPihbXSlcbiAgLy8gUmVmIHRvIHRyYWNrIHJlbW92ZWRSZWNvcmRJZHMgZm9yIHVzZSBpbiBjYWxsYmFja3MgKGF2b2lkcyBzdGFsZSBjbG9zdXJlIGlzc3VlcylcbiAgY29uc3QgcmVtb3ZlZFJlY29yZElkc1JlZiA9IFJlYWN0LnVzZVJlZjxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKVxuICBcbiAgLy8gU3luYyByZWYgd2hlbmV2ZXIgcmVtb3ZlZFJlY29yZElkcyBzdGF0ZSBjaGFuZ2VzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVtb3ZlZFJlY29yZElkc1JlZi5jdXJyZW50ID0gcmVtb3ZlZFJlY29yZElkc1xuICB9LCBbcmVtb3ZlZFJlY29yZElkc10pXG4gIC8vIEVycm9yIHN0YXRlIGZvciB1c2VyLWZhY2luZyBlcnJvcnNcbiAgY29uc3QgW3NlbGVjdGlvbkVycm9yLCBzZXRTZWxlY3Rpb25FcnJvcl0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmc+KG51bGwpXG5cbiAgY29uc3QgZXh0cmFBY3Rpb25zID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGdldEV4dHJhQWN0aW9ucyh3aWRnZXRJZCwgb3V0cHV0RFMsIGludGwsIHF1ZXJ5SXRlbSwgcnVudGltZVpvb21Ub1NlbGVjdGVkKVxuICB9LCBbd2lkZ2V0SWQsIG91dHB1dERTLCBpbnRsLCBxdWVyeUl0ZW0sIHJ1bnRpbWVab29tVG9TZWxlY3RlZF0pXG5cbiAgY29uc3QgZW5hYmxlRGF0YUFjdGlvbiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmVuYWJsZURhdGFBY3Rpb24gPz8gdHJ1ZVxuICB9KVxuXG4gIGNvbnN0IHBhZ2luZ1R5cGVJbkNvbmZpZyA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5yZXN1bHRQYWdpbmdTdHlsZVxuICB9KVxuICBjb25zdCBkaXJlY3Rpb25UeXBlSW5Db25maWcgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0TGlzdERpcmVjdGlvblxuICB9KVxuICAvLyBGT1JDRSBTaW1wbGVMaXN0IC0gaWdub3JlIGNvbmZpZywgd2UncmUgZG9uZSB3aXRoIGxhenkgbG9hZGluZyBpc3N1ZXNcbiAgY29uc3QgcGFnaW5nVHlwZSA9IFBhZ2luZ1R5cGUuU2ltcGxlXG4gIGNvbnN0IGRpcmVjdGlvbiA9IGRpcmVjdGlvblR5cGVJbkNvbmZpZyA/PyBMaXN0RGlyZWN0aW9uLlZlcnRpY2FsXG5cbiAgLy8gR3JvdXAgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2UgZm9yIERhdGFBY3Rpb25MaXN0XG4gIC8vIFRoaXMgZW5zdXJlcyBEYXRhQWN0aW9uTGlzdCByZWNvZ25pemVzIHJlY29yZHMgZXZlbiB3aGVuIHRoZXkgY29tZSBmcm9tIGRpZmZlcmVudCBxdWVyaWVzL29yaWdpbnNcbiAgY29uc3QgYWN0aW9uRGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIC8vIERlYnVnOiBMb2cgd2hhdCByZWNvcmRzIGFyZSBhdmFpbGFibGVcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtY2FsY3VsYXRpb24tc3RhcnQnLFxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgc2VsZWN0ZWRSZWNvcmRzQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBxdWVyeURhdGFSZWNvcmRzQ291bnQ6IHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICByZWNvcmRzUHJvcENvdW50OiByZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTPy5pZCxcbiAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkczogc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggPiAwLFxuICAgICAgaGFzUXVlcnlEYXRhUmVjb3JkczogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggPiAwLFxuICAgICAgaGFzUmVjb3Jkc1Byb3A6IHJlY29yZHM/Lmxlbmd0aCA+IDBcbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICAvLyBJbiBhY2N1bXVsYXRpb24gbW9kZXMgKEFkZC9SZW1vdmUpLCBwcmVmZXIgdGhlICdyZWNvcmRzJyBwcm9wICh0aGUgYWNjdW11bGF0ZWQgc2V0KVxuICAgIC8vIGJlY2F1c2Ugb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgd2lsbCBvbmx5IHJldHVybiByZWNvcmRzIHRoYXQgbWF0Y2ggdGhlIGN1cnJlbnQgcXVlcnkncyB3aGVyZSBjbGF1c2UuXG4gICAgY29uc3QgcmVjb3Jkc1RvVXNlID0gaXNBY2N1bXVsYXRpb25Nb2RlXG4gICAgICA/IChyZWNvcmRzIHx8IFtdKVxuICAgICAgOiAoc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGggPiAwID8gc2VsZWN0ZWRSZWNvcmRzIDogKHF1ZXJ5RGF0YT8ucmVjb3Jkcz8ubGVuZ3RoID4gMCA/IHF1ZXJ5RGF0YS5yZWNvcmRzIDogKHJlY29yZHMgfHwgW10pKSlcbiAgICBcbiAgICAvLyBJZiBubyByZWNvcmRzLCByZXR1cm4gc2luZ2xlIERhdGFSZWNvcmRTZXQgd2l0aCBlbXB0eSByZWNvcmRzIHVzaW5nIG91dHB1dERTXG4gICAgaWYgKCFyZWNvcmRzVG9Vc2UgfHwgcmVjb3Jkc1RvVXNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZW1wdHlEYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICBkYXRhU291cmNlOiBvdXRwdXREUyxcbiAgICAgICAgdHlwZTogJ2xvYWRlZCcsXG4gICAgICAgIHJlY29yZHM6IFtdLFxuICAgICAgICBuYW1lOiBvdXRwdXREUz8uaWQsXG4gICAgICAgIGxhYmVsOiBvdXRwdXREUz8uZ2V0TGFiZWwoKVxuICAgICAgfVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnYWN0aW9uRGF0YVNldHMtZW1wdHktcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgZGF0YVNldERhdGFTb3VyY2VJZDogZW1wdHlEYXRhU2V0LmRhdGFTb3VyY2U/LmlkXG4gICAgICB9KVxuICAgICAgcmV0dXJuIFtlbXB0eURhdGFTZXRdXG4gICAgfVxuICAgIFxuICAgIC8vIEdyb3VwIHJlY29yZHMgYnkgdGhlaXIgb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgcmVjb3Jkc0J5T3JpZ2luRFMgPSBuZXcgTWFwPEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIEZlYXR1cmVEYXRhUmVjb3JkW10+KClcbiAgICBcbiAgICByZWNvcmRzVG9Vc2UuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgICAgY29uc3QgcmVjb3JkRFMgPSAocmVjb3JkIGFzIEZlYXR1cmVEYXRhUmVjb3JkKS5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICBsZXQgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsID0gbnVsbFxuICAgICAgXG4gICAgICBpZiAocmVjb3JkRFMpIHtcbiAgICAgICAgb3JpZ2luRFMgPSByZWNvcmREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCByZWNvcmREU1xuICAgICAgfSBlbHNlIGlmIChvdXRwdXREUykge1xuICAgICAgICAvLyBGYWxsYmFjazogdXNlIG91dHB1dERTJ3Mgb3JpZ2luIGlmIHJlY29yZCBkb2Vzbid0IGhhdmUgZGF0YVNvdXJjZVxuICAgICAgICBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHx8IG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICAgIH1cbiAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKS5wdXNoKHJlY29yZCBhcyBGZWF0dXJlRGF0YVJlY29yZClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIENyZWF0ZSBhIERhdGFSZWNvcmRTZXQgZm9yIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgY29uc3QgZGF0YVNldHM6IERhdGFSZWNvcmRTZXRbXSA9IEFycmF5LmZyb20ocmVjb3Jkc0J5T3JpZ2luRFMuZW50cmllcygpKS5tYXAoKFtvcmlnaW5EUywgb3JpZ2luUmVjb3Jkc10pID0+IHtcbiAgICAgIGNvbnN0IGRhdGFTZXQ6IERhdGFSZWNvcmRTZXQgPSB7XG4gICAgICAgIGRhdGFTb3VyY2U6IG9yaWdpbkRTLCAvLyBVc2Ugb3JpZ2luIERTLCBub3Qgb3V0cHV0RFNcbiAgICAgICAgdHlwZTogJ3NlbGVjdGVkJyxcbiAgICAgICAgcmVjb3Jkczogb3JpZ2luUmVjb3JkcyxcbiAgICAgICAgbmFtZTogb3JpZ2luRFMuaWQsXG4gICAgICAgIGxhYmVsOiBvcmlnaW5EUy5nZXRMYWJlbCgpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZCBmaWVsZHMgaWYgbmVlZGVkICh1c2UgY3VycmVudEl0ZW0ncyBmaWVsZCBzZXR0aW5ncylcbiAgICAgIGlmIChjdXJyZW50SXRlbS5yZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMgJiYgY3VycmVudEl0ZW0ucmVzdWx0RGlzcGxheUZpZWxkcyAhPSBudWxsKSB7XG4gICAgICAgIGRhdGFTZXQuZmllbGRzID0gY29tYmluZUZpZWxkcyhjdXJyZW50SXRlbS5yZXN1bHREaXNwbGF5RmllbGRzLCBjdXJyZW50SXRlbS5yZXN1bHRUaXRsZUV4cHJlc3Npb24pXG4gICAgICB9IGVsc2UgaWYgKG9yaWdpbkRTICYmICdnZXRQb3B1cEluZm8nIGluIG9yaWdpbkRTKSB7XG4gICAgICAgIC8vIHVzZSBmaWVsZHMgaW4gcG9wdXAgdGVtcGxhdGUgZnJvbSBvcmlnaW4gRFNcbiAgICAgICAgY29uc3QgcG9wdXBJbmZvID0gb3JpZ2luRFMuZ2V0UG9wdXBJbmZvKClcbiAgICAgICAgaWYgKHBvcHVwSW5mbz8uZmllbGRJbmZvcykge1xuICAgICAgICAgIGRhdGFTZXQuZmllbGRzID0gcG9wdXBJbmZvLmZpZWxkSW5mb3MuZmlsdGVyKChmaWVsZEluZm8pID0+IGZpZWxkSW5mby52aXNpYmxlKS5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YVNldFxuICAgIH0pXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGF0IHRoZSBmaW5hbCBkYXRhU2V0cyBjb250YWluXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2FjdGlvbkRhdGFTZXRzLWZpbmFsJyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIGRhdGFTZXRzQ291bnQ6IGRhdGFTZXRzLmxlbmd0aCxcbiAgICAgIHRvdGFsUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9Vc2UubGVuZ3RoLFxuICAgICAgZGF0YVNldHNCeU9yaWdpbjogZGF0YVNldHMubWFwKGRzID0+ICh7XG4gICAgICAgIG9yaWdpbkRTSWQ6IGRzLmRhdGFTb3VyY2U/LmlkLFxuICAgICAgICByZWNvcmRzQ291bnQ6IGRzLnJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICB0eXBlOiBkcy50eXBlXG4gICAgICB9KSlcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIHdlIGNvdWxkbid0IGdyb3VwIGJ5IG9yaWdpbiAoc2hvdWxkbid0IGhhcHBlbiksIGZhbGxiYWNrIHRvIHNpbmdsZSBEYXRhUmVjb3JkU2V0IHdpdGggb3V0cHV0RFNcbiAgICBpZiAoZGF0YVNldHMubGVuZ3RoID09PSAwICYmIG91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhY3Rpb25EYXRhU2V0cy1mYWxsYmFjay10by1vdXRwdXREUycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnY291bGQtbm90LWRldGVybWluZS1vcmlnaW4tZHMnXG4gICAgICB9KVxuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgICAgICB0eXBlOiByZWNvcmRzVG9Vc2UubGVuZ3RoID4gMCA/ICdzZWxlY3RlZCcgOiAnbG9hZGVkJyxcbiAgICAgICAgcmVjb3JkczogcmVjb3Jkc1RvVXNlLFxuICAgICAgICBuYW1lOiBvdXRwdXREUy5pZCxcbiAgICAgICAgbGFiZWw6IG91dHB1dERTLmdldExhYmVsKClcbiAgICAgIH1dXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhU2V0c1xuICB9LCBbc2VsZWN0ZWRSZWNvcmRzLCBvdXRwdXREUywgcXVlcnlEYXRhLCBjdXJyZW50SXRlbSwgcmVjb3Jkcywgd2lkZ2V0SWRdKVxuXG4gIC8vIE1lbW9pemUgZmlsdGVyZWQgcmVjb3JkcyB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMgdGhhdCByZXNldCBzY3JvbGwgcG9zaXRpb25cbiAgLy8gVGhpcyBlbnN1cmVzIHRoZSByZWNvcmRzIHByb3Agb25seSBjaGFuZ2VzIHdoZW4gdGhlIGFjdHVhbCBkYXRhIGNoYW5nZXMsIG5vdCBqdXN0IHRoZSBhcnJheSByZWZlcmVuY2VcbiAgY29uc3QgZmlsdGVyZWRSZWNvcmRzRm9yTGlzdCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBxdWVyeURhdGE/LnJlY29yZHM/LmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKSB8fCBcbiAgICAgICAgICAgKHJlY29yZHM/LmZpbHRlcihyZWNvcmQgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKHJlY29yZC5nZXRJZCgpKSkgfHwgW10pXG4gIH0sIFtxdWVyeURhdGE/LnJlY29yZHMsIHJlY29yZHMsIHJlbW92ZWRSZWNvcmRJZHNdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIC8vIGZvY3VzIHRoZSBiYWNrIGJ1dHRvbiB3aGVuIGl0IGlzIHJlbmRlcmVkXG4gICAgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUoYmFja0J0blJlZi5jdXJyZW50KVxuICB9KVxuXG4gIC8qKlxuICAgKiBFZmZlY3QgaG9vayB0aGF0IHJ1bnMgd2hlbiBuZXcgcXVlcnkgcmVzdWx0cyBhcnJpdmUuXG4gICAqIFJlc2V0cyByZW1vdmVkIHJlY29yZHMsIGV4cGFuZCBzdGF0ZSwgYW5kIHF1ZXJ5IGRhdGEgZm9yIHRoZSBuZXcgcmVzdWx0cy5cbiAgICogQWxzbyBoYW5kbGVzIGF1dG8tc2VsZWN0aW9uIG9mIHJlY29yZHMgd2hlbiB0aGV5IGZpcnN0IGFycml2ZS5cbiAgICovXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQ2hlY2sgaWYgdGhlc2UgYXJlIG5ldyByZWNvcmRzIChkaWZmZXJlbnQgZnJvbSB3aGF0IHdlIGxhc3QgcXVlcmllZClcbiAgICAvLyBJTVBPUlRBTlQ6IENvbXBhcmUgYWdhaW5zdCBvcmlnaW5hbCBxdWVyeSByZXN1bHRzLCBub3Qgc2VsZWN0ZWQgcmVzdWx0c1xuICAgIC8vIFRoaXMgcHJldmVudHMgcmVtb3ZlZFJlY29yZElkcyBmcm9tIGJlaW5nIHJlc2V0IHdoZW4gcmVjb3JkcyBhcmUgcmVtb3ZlZFxuICAgIGNvbnN0IGN1cnJlbnRSZWNvcmRJZHMgPSByZWNvcmRzPy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKSB8fCBbXVxuICAgIGNvbnN0IHJlY29yZHNDaGFuZ2VkID0gY3VycmVudFJlY29yZElkcy5sZW5ndGggIT09IGxhc3RRdWVyeVJlY29yZElkc1JlZi5jdXJyZW50Lmxlbmd0aCB8fFxuICAgICAgY3VycmVudFJlY29yZElkcy5zb21lKChpZCwgaW5kZXgpID0+IGlkICE9PSBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudFtpbmRleF0pXG4gICAgXG4gICAgLy8gRGVidWc6IExvZyB3aGVuIHJlY29yZHMgcHJvcCBjaGFuZ2VzXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ3JlY29yZHMtcHJvcC1jaGFuZ2VkJyxcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICB3aWxsU2V0UXVlcnlEYXRhOiByZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID4gMCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplLFxuICAgICAgaGFzU2VsZWN0ZWRSZWY6IGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQsXG4gICAgICByZWNvcmRzQ2hhbmdlZDogcmVjb3Jkc0NoYW5nZWQsXG4gICAgICBsYXN0UXVlcnlSZWNvcmRJZHNDb3VudDogbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQubGVuZ3RoLFxuICAgICAgY3VycmVudFJlY29yZElkc0NvdW50OiBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aFxuICAgIH0pXG4gICAgXG4gICAgLy8gSU1QT1JUQU5UOiBPbmx5IHJlc2V0IHJlbW92ZWQgcmVjb3JkcyBpZiB0aGlzIGlzIHRydWx5IGEgTkVXIHF1ZXJ5IHdpdGggZGlmZmVyZW50IHJlY29yZHNcbiAgICAvLyBEb24ndCByZXNldCBpZiByZWNvcmRzIGFyZSB0aGUgc2FtZSAoanVzdCBhIHJlLXJlbmRlciBvciBsYXp5IGxvYWQpXG4gICAgaWYgKHJlY29yZHNDaGFuZ2VkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdyZWNvcmRzLXRydWx5LWNoYW5nZWQtcmVzZXR0aW5nLXJlbW92ZWQnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIG9sZFJlY29yZElkc0NvdW50OiBsYXN0UXVlcnlSZWNvcmRJZHNSZWYuY3VycmVudC5sZW5ndGgsXG4gICAgICAgIG5ld1JlY29yZElkc0NvdW50OiBjdXJyZW50UmVjb3JkSWRzLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIHNldFJlbW92ZWRSZWNvcmRJZHMobmV3IFNldCgpKVxuICAgICAgLy8gVXBkYXRlIHRoZSBvcmlnaW5hbCBxdWVyeSByZWNvcmQgSURzIHJlZlxuICAgICAgbGFzdFF1ZXJ5UmVjb3JkSWRzUmVmLmN1cnJlbnQgPSBjdXJyZW50UmVjb3JkSWRzXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlY29yZHMtbm90LWNoYW5nZWQtcHJlc2VydmluZy1yZW1vdmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWNvcmRJZHNDb3VudDogY3VycmVudFJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBSZXNldCBleHBhbmQgYWxsIHRvIHF1ZXJ5SXRlbSdzIHJlc3VsdEV4cGFuZEJ5RGVmYXVsdCBzZXR0aW5nXG4gICAgc2V0RXhwYW5kQWxsKGN1cnJlbnRJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCA/PyBmYWxzZSlcbiAgICBzZXRRdWVyeURhdGEoe1xuICAgICAgcmVjb3JkcyxcbiAgICAgIHBhZ2U6IDFcbiAgICB9KVxuICAgIFxuICAgIC8vIE9ubHkgYXV0by1zZWxlY3QgcmVjb3JkcyBpZjpcbiAgICAvLyAxLiBXZSBoYXZlIHJlY29yZHMgYW5kIG91dHB1dERTXG4gICAgLy8gMi4gV2UgaGF2ZW4ndCBhbHJlYWR5IHNlbGVjdGVkIHRoZXNlIHJlY29yZHMgKGhhc1NlbGVjdGVkUmVmIGlzIGZhbHNlKVxuICAgIC8vIDMuIE9SIHRoZSByZWNvcmRzIGhhdmUgYWN0dWFsbHkgY2hhbmdlZCAobmV3IHF1ZXJ5IHJlc3VsdHMpXG4gICAgLy8gNC4gQU5EIHdlIGRvbid0IGhhdmUgYW55IHJlbW92ZWQgcmVjb3JkcyAodG8gcHJldmVudCByZS1zZWxlY3RpbmcgcmVtb3ZlZCBvbmVzKVxuICAgIGlmIChyZWNvcmRzICYmIHJlY29yZHMubGVuZ3RoID4gMCAmJiBvdXRwdXREUyAmJiBcbiAgICAgICAgKCFoYXNTZWxlY3RlZFJlZi5jdXJyZW50IHx8IHJlY29yZHNDaGFuZ2VkKSAmJiBcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkcy5zaXplID09PSAwKSB7XG4gICAgICBjb25zdCByZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpXG4gICAgICBjb25zdCBmZHIgPSByZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgICAgIFxuICAgICAgLy8gU2VsZWN0IHJlY29yZHMgYW5kIHB1Ymxpc2ggc2VsZWN0aW9uIG1lc3NhZ2UgdXNpbmcgdXRpbGl0eSBmdW5jdGlvblxuICAgICAgLy8gVXNlIGFzeW5jIElJRkUgc2luY2UgdXNlRWZmZWN0IGNhbid0IGJlIGFzeW5jXG4gICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgICBhd2FpdCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChcbiAgICAgICAgICAgIHdpZGdldElkLCBcbiAgICAgICAgICAgIG91dHB1dERTLCBcbiAgICAgICAgICAgIHJlY29yZElkcywgXG4gICAgICAgICAgICBmZHIsIFxuICAgICAgICAgICAgZmFsc2UsIFxuICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgXG4gICAgICAgICAgICBncmFwaGljc0xheWVyLCBcbiAgICAgICAgICAgIG1hcFZpZXdcbiAgICAgICAgICApXG4gICAgICAgICAgaGFzU2VsZWN0ZWRSZWYuY3VycmVudCA9IHRydWUgLy8gTWFyayBhcyBzZWxlY3RlZFxuICAgICAgICAgIGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IHJlY29yZElkcyAvLyBTdG9yZSB0aGUgSURzIHdlIHNlbGVjdGVkXG4gICAgICAgICAgbGFzdFNlbGVjdGVkRmVhdHVyZVJlY29yZHNSZWYuY3VycmVudCA9IGZkciAvLyBTdG9yZSB0aGUgZnVsbCByZWNvcmRzIGZvciBwb3RlbnRpYWwgcmVzdG9yYXRpb25cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBOb3RpZnkgV2lkZ2V0IGFuZCBIZWxwZXJTaW1wbGUgb2Ygc2VsZWN0aW9uIGNoYW5nZVxuICAgICAgICAgIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQod2lkZ2V0SWQsIHJlY29yZElkcywgb3V0cHV0RFMsIHF1ZXJ5SXRlbS5jb25maWdJZClcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VsZWN0IHF1ZXJ5IHJlc3VsdHMnXG4gICAgICAgICAgc2V0U2VsZWN0aW9uRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWZhaWxlZC1xdWVyeS1yZXN1bHQnLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSkoKVxuICAgIH0gZWxzZSBpZiAocmVjb3Jkc0NoYW5nZWQgJiYgcmVjb3JkcyAmJiByZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gSWYgcmVjb3JkcyB3ZXJlIGNsZWFyZWQsIHJlc2V0IHRoZSBzZWxlY3Rpb24gZmxhZ1xuICAgICAgaGFzU2VsZWN0ZWRSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgICBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSBbXVxuICAgICAgc2V0U2VsZWN0aW9uRXJyb3IobnVsbCkgLy8gQ2xlYXIgZXJyb3JzIHdoZW4gY2xlYXJpbmcgcmVjb3Jkc1xuICAgIH0gZWxzZSBpZiAocmVtb3ZlZFJlY29yZElkcy5zaXplID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnc2tpcHBpbmctcmVzZWxlY3Rpb24tZHVlLXRvLXJlbW92ZWQtcmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzLnNpemUsXG4gICAgICAgIHJlY29yZHNDb3VudDogcmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc1NlbGVjdGVkUmVmOiBoYXNTZWxlY3RlZFJlZi5jdXJyZW50LFxuICAgICAgICByZWNvcmRzQ2hhbmdlZDogcmVjb3Jkc0NoYW5nZWRcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbcmVjb3Jkcywgb3V0cHV0RFMsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIHF1ZXJ5SXRlbS5yZXN1bHRFeHBhbmRCeURlZmF1bHQsIHJlbW92ZWRSZWNvcmRJZHNdKVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gY2xlYXIgc2VsZWN0aW9uIHdoZW4gcmVzdWx0U2VsZWN0TW9kZSBjaGFuZ2VkXG4gICAgaWYgKG91dHB1dERTKSB7XG4gICAgICBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMob3V0cHV0RFMsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIpXG4gICAgICBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZSh3aWRnZXRJZCwgW10sIG91dHB1dERTLCB0cnVlKVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbS5yZXN1bHRTZWxlY3RNb2RlLCBvdXRwdXREUywgd2lkZ2V0SWQsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXJdKVxuXG4gIC8vIFVwZGF0ZSBleHBhbmRBbGwgd2hlbiBxdWVyeUl0ZW0gY2hhbmdlcyAoZS5nLiwgc3dpdGNoaW5nIGJldHdlZW4gcXVlcmllcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBuZXdFeHBhbmRBbGwgPSBxdWVyeUl0ZW0ucmVzdWx0RXhwYW5kQnlEZWZhdWx0ID8/IGZhbHNlXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2V4cGFuZEFsbC1yZXNldC1ieS1xdWVyeUl0ZW0tY2hhbmdlJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIHJlc3VsdEV4cGFuZEJ5RGVmYXVsdDogcXVlcnlJdGVtLnJlc3VsdEV4cGFuZEJ5RGVmYXVsdCxcbiAgICAgIG5ld0V4cGFuZEFsbCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgc2V0RXhwYW5kQWxsKG5ld0V4cGFuZEFsbClcbiAgICAvLyBSZXNldCBpbmRpdmlkdWFsIGV4cGFuc2lvbiBzdGF0ZXMgd2hlbiBxdWVyeSBjaGFuZ2VzXG4gICAgc2V0SXRlbUV4cGFuZFN0YXRlcyhuZXcgTWFwKCkpXG4gIH0sIFtxdWVyeUl0ZW0uY29uZmlnSWRdKVxuXG4gIC8qKlxuICAgKiBNb25pdG9yIG9yaWdpbiBkYXRhIHNvdXJjZSBzZWxlY3Rpb24gY2hhbmdlcyB0byBkZXRlY3Qgd2hlbiBvdGhlciB3aWRnZXRzIChsaWtlIG1hcCBpZGVudGlmeSlcbiAgICogY2xlYXIgb3VyIHNlbGVjdGlvbnMuIEVuaGFuY2VkIHdpdGggaWRlbnRpZnkgcG9wdXAgZGV0ZWN0aW9uIGZvciB0ZXN0aW5nIHNjZW5hcmlvcy5cbiAgICogV2F0Y2hlcyB0aGUgb3JpZ2luIGRhdGEgc291cmNlJ3Mgc2VsZWN0aW9uIHN0YXRlIGRpcmVjdGx5IHZpYSBwb2xsaW5nLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW91dHB1dERTKSByZXR1cm5cblxuICAgIGNvbnN0IG9yaWdpbkRTID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBpZiAoIW9yaWdpbkRTKSByZXR1cm5cblxuICAgIGNvbnN0IG9yaWdpbkRTSWQgPSBvcmlnaW5EUy5pZFxuICAgIGxldCBwcmV2aW91c1NlbGVjdGVkSWRzOiBzdHJpbmdbXSA9IFtdXG4gICAgbGV0IGlkZW50aWZ5UG9wdXBXYXNPcGVuID0gZmFsc2VcbiAgICBsZXQgbGFzdExvZ1RpbWUgPSAwXG4gICAgY29uc3QgTE9HX1RIUk9UVExFX01TID0gMTAwMCAvLyBUaHJvdHRsZSBsb2dzIHRvIG9uY2UgcGVyIHNlY29uZFxuICAgIFxuICAgIC8vIEluaXRpYWwgY2hlY2tcbiAgICBwcmV2aW91c1NlbGVjdGVkSWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgIGlkZW50aWZ5UG9wdXBXYXNPcGVuID0gaXNJZGVudGlmeVBvcHVwT3BlbigpXG5cbiAgICAvLyBXYXRjaCBmb3Igc2VsZWN0aW9uIGNoYW5nZXMgb24gdGhlIG9yaWdpbiBkYXRhIHNvdXJjZVxuICAgIGNvbnN0IGNoZWNrU2VsZWN0aW9uID0gKCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkSWRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgY29uc3Qgb3VyRXhwZWN0ZWRJZHMgPSBsYXN0U2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnRcbiAgICAgIGNvbnN0IGhhc091clNlbGVjdGlvbiA9IG91ckV4cGVjdGVkSWRzLmxlbmd0aCA+IDBcbiAgICAgIGNvbnN0IGlkZW50aWZ5UG9wdXBJc09wZW4gPSBpc0lkZW50aWZ5UG9wdXBPcGVuKClcbiAgICAgIFxuICAgICAgLy8gRGV0ZWN0IGlmIHNlbGVjdGlvbiB3YXMgY2xlYXJlZCBvciBjaGFuZ2VkIGV4dGVybmFsbHlcbiAgICAgIGNvbnN0IHdhc0NsZWFyZWQgPSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCA+IDAgJiYgY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMFxuICAgICAgY29uc3Qgd2FzQ2hhbmdlZCA9IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgKGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGggIT09IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoIHx8XG4gICAgICAgICAhY3VycmVudFNlbGVjdGVkSWRzLmV2ZXJ5KGlkID0+IHByZXZpb3VzU2VsZWN0ZWRJZHMuaW5jbHVkZXMoaWQpKSlcbiAgICAgIFxuICAgICAgLy8gTkVXOiBEZXRlY3QgaWYgc2VsZWN0aW9uIHdhcyBhZGRlZCAod2VudCBmcm9tIGVtcHR5IHRvIGhhdmluZyByZWNvcmRzKVxuICAgICAgY29uc3Qgd2FzQWRkZWQgPSBwcmV2aW91c1NlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMCAmJiBjdXJyZW50U2VsZWN0ZWRJZHMubGVuZ3RoID4gMFxuICAgICAgXG4gICAgICAvLyBUcmFjayBpZGVudGlmeSBwb3B1cCBzdGF0ZSBjaGFuZ2VzXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCA9ICFpZGVudGlmeVBvcHVwV2FzT3BlbiAmJiBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwSnVzdENsb3NlZCA9IGlkZW50aWZ5UG9wdXBXYXNPcGVuICYmICFpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICBjb25zdCBpZGVudGlmeVBvcHVwU3RpbGxPcGVuID0gaWRlbnRpZnlQb3B1cFdhc09wZW4gJiYgaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgXG4gICAgICAvLyBMb2cgaWRlbnRpZnkgcG9wdXAgc3RhdGUgY2hhbmdlc1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICAgICAgaWYgKGlkZW50aWZ5UG9wdXBKdXN0T3BlbmVkIHx8IGlkZW50aWZ5UG9wdXBKdXN0Q2xvc2VkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnU0VMRUNUSU9OJywge1xuICAgICAgICAgIGV2ZW50OiBpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCA/ICdpZGVudGlmeS1wb3B1cC1vcGVuZWQnIDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZCcsXG4gICAgICAgICAgb3JpZ2luRFNJZCxcbiAgICAgICAgICBvdXJTZWxlY3Rpb25Db3VudDogb3VyRXhwZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgIGN1cnJlbnRTZWxlY3Rpb25Db3VudDogY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgaWRlbnRpZnkgcG9wdXAganVzdCBjbG9zZWQgYW5kIHNlbGVjdGlvbiB3YXMgY2xlYXJlZCwgZGlzcGF0Y2ggcmVzdG9yZSBldmVudFxuICAgICAgICBpZiAoaWRlbnRpZnlQb3B1cEp1c3RDbG9zZWQgJiYgd2FzQ2xlYXJlZCAmJiBoYXNPdXJTZWxlY3Rpb24gJiYgb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHJlc3RvcmVFdmVudCA9IG5ldyBDdXN0b21FdmVudChSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5ULCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgICAgIHJlY29yZElkczogb3VyRXhwZWN0ZWRJZHMsXG4gICAgICAgICAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHJlc3RvcmVFdmVudClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1NFTEVDVElPTicsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtcmVxdWVzdGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkLFxuICAgICAgICAgICAgcmVjb3JkQ291bnQ6IG91ckV4cGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgICAgIG91dHB1dERzSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTG9nIEFMTCBzZWxlY3Rpb24gY2hhbmdlcyAobm90IGp1c3Qgd2hlbiB3ZSBoYXZlIG91ciBvd24gc2VsZWN0aW9uKVxuICAgICAgaWYgKHdhc0NsZWFyZWQgfHwgd2FzQ2hhbmdlZCB8fCB3YXNBZGRlZCkge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIG1hdGNoZXMgb3VyIGV4cGVjdGVkIHNlbGVjdGlvblxuICAgICAgICBjb25zdCBtYXRjaGVzT3VyU2VsZWN0aW9uID0gaGFzT3VyU2VsZWN0aW9uICYmIFxuICAgICAgICAgIG91ckV4cGVjdGVkSWRzLmxlbmd0aCA9PT0gY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCAmJlxuICAgICAgICAgIG91ckV4cGVjdGVkSWRzLmV2ZXJ5KGlkID0+IGN1cnJlbnRTZWxlY3RlZElkcy5pbmNsdWRlcyhpZCkpXG4gICAgICAgIFxuICAgICAgICAvLyBEZXRlcm1pbmUgd2hhdCB3b3VsZCBoYXBwZW4gKGZvciB0ZXN0aW5nL2xvZ2dpbmcpXG4gICAgICAgIGNvbnN0IHdvdWxkUmVzdG9yZSA9IHdhc0NsZWFyZWQgJiYgaWRlbnRpZnlQb3B1cElzT3BlbiAmJiBoYXNPdXJTZWxlY3Rpb24gJiYgb3VyRXhwZWN0ZWRJZHMubGVuZ3RoID4gMFxuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHNjZW5hcmlvXG4gICAgICAgIGxldCBzY2VuYXJpbyA9ICdVbmtub3duJ1xuICAgICAgICBpZiAod2FzQWRkZWQgJiYgIWhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gJ1RFU1QgU0NFTkFSSU8gNDogQW5vdGhlciB3aWRnZXQgc2VsZWN0ZWQgcmVjb3JkcyAod2UgaGF2ZSBubyBzZWxlY3Rpb24pJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0NoYW5nZWQgJiYgIW1hdGNoZXNPdXJTZWxlY3Rpb24gJiYgIWhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gJ1RFU1QgU0NFTkFSSU8gNTogQW5vdGhlciB3aWRnZXQgY2hhbmdlZCBzZWxlY3Rpb24gKHdlIGhhdmUgbm8gc2VsZWN0aW9uKSdcbiAgICAgICAgfSBlbHNlIGlmICh3YXNDaGFuZ2VkICYmICFtYXRjaGVzT3VyU2VsZWN0aW9uICYmIGhhc091clNlbGVjdGlvbikge1xuICAgICAgICAgIHNjZW5hcmlvID0gaWRlbnRpZnlQb3B1cElzT3BlblxuICAgICAgICAgICAgPyAnVEVTVCBTQ0VOQVJJTyAyOiBRdWVyeSDihpIgSWRlbnRpZnkgKHNlbGVjdGlvbiBjaGFuZ2VkLCBub3QgY2xlYXJlZCkg4oaSIFdvdWxkIE5PVCByZXN0b3JlJ1xuICAgICAgICAgICAgOiAnVEVTVCBTQ0VOQVJJTyAzOiBRdWVyeSDihpIgQW5vdGhlciBRdWVyeVNpbXBsZSB3aWRnZXQg4oaSIFdvdWxkIE5PVCByZXN0b3JlJ1xuICAgICAgICB9IGVsc2UgaWYgKHdhc0NsZWFyZWQgJiYgaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgICAgICAgICA/ICdURVNUIFNDRU5BUklPIDE6IFF1ZXJ5IOKGkiBJZGVudGlmeSDihpIgV291bGQgcmVzdG9yZSdcbiAgICAgICAgICAgIDogJ1RFU1QgU0NFTkFSSU8gMzogUXVlcnkg4oaSIEFub3RoZXIgUXVlcnlTaW1wbGUgd2lkZ2V0IChjbGVhcmVkKSDihpIgV291bGQgTk9UIHJlc3RvcmUnXG4gICAgICAgIH0gZWxzZSBpZiAod2FzQWRkZWQgJiYgaGFzT3VyU2VsZWN0aW9uKSB7XG4gICAgICAgICAgc2NlbmFyaW8gPSBtYXRjaGVzT3VyU2VsZWN0aW9uXG4gICAgICAgICAgICA/ICdPdXIgd2lkZ2V0IHNlbGVjdGVkIHJlY29yZHMnXG4gICAgICAgICAgICA6ICdBbm90aGVyIHdpZGdldCBzZWxlY3RlZCBkaWZmZXJlbnQgcmVjb3JkcydcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTG9nIGRldGVjdGlvbiB3aXRoIGlkZW50aWZ5IHBvcHVwIHN0YXRlICh0aHJvdHRsZWQpXG4gICAgICAgIGlmIChub3cgLSBsYXN0TG9nVGltZSA+IExPR19USFJPVFRMRV9NUykge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnU0VMRUNUSU9OJywge1xuICAgICAgICAgICAgZXZlbnQ6IHdhc0NsZWFyZWQgPyAnc2VsZWN0aW9uLWNsZWFyZWQnIDogd2FzQ2hhbmdlZCA/ICdzZWxlY3Rpb24tY2hhbmdlZCcgOiAnc2VsZWN0aW9uLWFkZGVkJyxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQsXG4gICAgICAgICAgICBvdXJFeHBlY3RlZENvdW50OiBvdXJFeHBlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkQ291bnQ6IHByZXZpb3VzU2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICB3YXNDbGVhcmVkLFxuICAgICAgICAgICAgd2FzQ2hhbmdlZCxcbiAgICAgICAgICAgIHdhc0FkZGVkLFxuICAgICAgICAgICAgaGFzT3VyU2VsZWN0aW9uLFxuICAgICAgICAgICAgbWF0Y2hlc091clNlbGVjdGlvbixcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBJc09wZW4sXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwSnVzdE9wZW5lZCxcbiAgICAgICAgICAgIGlkZW50aWZ5UG9wdXBTdGlsbE9wZW4sXG4gICAgICAgICAgICBpZGVudGlmeVBvcHVwSnVzdENsb3NlZCxcbiAgICAgICAgICAgIHdvdWxkUmVzdG9yZSxcbiAgICAgICAgICAgIG91ckV4cGVjdGVkSWRzOiBvdXJFeHBlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRJZHM6IHByZXZpb3VzU2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJZHM6IGN1cnJlbnRTZWxlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgbm90ZTogd291bGRSZXN0b3JlIFxuICAgICAgICAgICAgICA/ICdXb3VsZCByZXN0b3JlIHNlbGVjdGlvbiAoY2xlYXJlZCArIGlkZW50aWZ5IHBvcHVwIG9wZW4pJ1xuICAgICAgICAgICAgICA6IGlkZW50aWZ5UG9wdXBJc09wZW4gJiYgd2FzQ2hhbmdlZFxuICAgICAgICAgICAgICAgID8gJ0lkZW50aWZ5IHBvcHVwIG9wZW4gYnV0IHNlbGVjdGlvbiBjaGFuZ2VkIChub3QgY2xlYXJlZCkgLSB3b3VsZCBub3QgcmVzdG9yZSdcbiAgICAgICAgICAgICAgICA6IHdhc0NsZWFyZWQgJiYgIWlkZW50aWZ5UG9wdXBJc09wZW5cbiAgICAgICAgICAgICAgICAgID8gJ1NlbGVjdGlvbiBjbGVhcmVkLCBjaGVja2luZyBpZiBpZGVudGlmeSBwb3B1cCBvcGVucy4uLidcbiAgICAgICAgICAgICAgICAgIDogd2FzQWRkZWRcbiAgICAgICAgICAgICAgICAgICAgPyBoYXNPdXJTZWxlY3Rpb24gJiYgbWF0Y2hlc091clNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgID8gJ091ciB3aWRnZXQgc2VsZWN0ZWQgcmVjb3JkcydcbiAgICAgICAgICAgICAgICAgICAgICA6IGhhc091clNlbGVjdGlvbiAmJiAhbWF0Y2hlc091clNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgPyAnQW5vdGhlciB3aWRnZXQgc2VsZWN0ZWQgZGlmZmVyZW50IHJlY29yZHMnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdTZWxlY3Rpb24gYWRkZWQgKGJ5IGFub3RoZXIgd2lkZ2V0IG9yIGV4dGVybmFsIHNvdXJjZSknXG4gICAgICAgICAgICAgICAgICAgIDogJ05vIGlkZW50aWZ5IHBvcHVwIGRldGVjdGVkIC0gd291bGQgbm90IHJlc3RvcmUnXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBsYXN0TG9nVGltZSA9IG5vd1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHByZXZpb3VzU2VsZWN0ZWRJZHMgPSBbLi4uY3VycmVudFNlbGVjdGVkSWRzXVxuICAgICAgaWRlbnRpZnlQb3B1cFdhc09wZW4gPSBpZGVudGlmeVBvcHVwSXNPcGVuXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgcGVyaW9kaWNhbGx5IChldmVyeSA1MDBtcylcbiAgICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoY2hlY2tTZWxlY3Rpb24sIDUwMClcbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKVxuICAgIH1cbiAgfSwgW291dHB1dERTXSlcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCByZXN1bHRzLiBSZXNldHMgbG9jYWwgc3RhdGUgYW5kIGRlbGVnYXRlcyB0byBwYXJlbnQncyBjbGVhclJlc3VsdCBtZXRob2QuXG4gICAqL1xuICBjb25zdCBjbGVhclJlc3VsdHMgPSBhc3luYyAoKSA9PiB7XG4gICAgLy8gTG9nIGhhc2ggc3RhdGUgYmVmb3JlIGNsZWFyaW5nXG4gICAgY29uc3QgaGFzaEJlZm9yZSA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgIGNvbnN0IHVybFBhcmFtc0JlZm9yZSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaEJlZm9yZSlcbiAgICBjb25zdCBoYXNoUGFyYW1zQmVmb3JlOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge31cbiAgICB1cmxQYXJhbXNCZWZvcmUuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgaGFzaFBhcmFtc0JlZm9yZVtrZXldID0gdmFsdWVcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJSZXN1bHRzLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIGhhc2hCZWZvcmU6IGhhc2hCZWZvcmUsXG4gICAgICBoYXNoUGFyYW1zQmVmb3JlOiBoYXNoUGFyYW1zQmVmb3JlLFxuICAgICAgaGFzaFBhcmFtc0NvdW50OiBPYmplY3Qua2V5cyhoYXNoUGFyYW1zQmVmb3JlKS5sZW5ndGgsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFJlc2V0IGxvY2FsIHNlbGVjdGlvbiBmbGFnc1xuICAgIGhhc1NlbGVjdGVkUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIGxhc3RTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IFtdXG4gICAgLy8gUmVzZXQgbG9jYWwgcXVlcnkgZGF0YSBzdGF0ZVxuICAgIHNldFF1ZXJ5RGF0YShudWxsKVxuICAgIHNldFJlbW92ZWRSZWNvcmRJZHMobmV3IFNldCgpKVxuICAgIC8vIENsZWFyIGVycm9yIHN0YXRlIHdoZW4gY2xlYXJpbmcgcmVzdWx0c1xuICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpXG4gICAgLy8gRGVsZWdhdGUgdG8gcGFyZW50J3MgY2xlYXJSZXN1bHQgbWV0aG9kICh2aWEgb25OYXZCYWNrKSB3aGljaCBoYW5kbGVzXG4gICAgLy8gY2xlYXJpbmcgc2VsZWN0aW9uIGZyb20gbWFwLCBwdWJsaXNoaW5nIG1lc3NhZ2VzLCBldGMuXG4gICAgYXdhaXQgb25OYXZCYWNrKHRydWUpXG4gICAgXG4gICAgLy8gTG9nIGhhc2ggc3RhdGUgYWZ0ZXIgY2xlYXJpbmcgKHdpdGggZGVsYXkgdG8gY2F0Y2ggYXN5bmMgdXBkYXRlcylcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IGhhc2hBZnRlciA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgICAgY29uc3QgdXJsUGFyYW1zQWZ0ZXIgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2hBZnRlcilcbiAgICAgIGNvbnN0IGhhc2hQYXJhbXNBZnRlcjogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9XG4gICAgICB1cmxQYXJhbXNBZnRlci5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgIGhhc2hQYXJhbXNBZnRlcltrZXldID0gdmFsdWVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdHMtY29tcGxldGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIGhhc2hCZWZvcmU6IGhhc2hCZWZvcmUsXG4gICAgICAgIGhhc2hBZnRlcjogaGFzaEFmdGVyLFxuICAgICAgICBoYXNoUGFyYW1zQmVmb3JlOiBoYXNoUGFyYW1zQmVmb3JlLFxuICAgICAgICBoYXNoUGFyYW1zQWZ0ZXI6IGhhc2hQYXJhbXNBZnRlcixcbiAgICAgICAgaGFzaFBhcmFtc1JlbW92ZWQ6IE9iamVjdC5rZXlzKGhhc2hQYXJhbXNCZWZvcmUpLmxlbmd0aCAtIE9iamVjdC5rZXlzKGhhc2hQYXJhbXNBZnRlcikubGVuZ3RoLFxuICAgICAgICBoYXNoUGFyYW1zQ291bnRCZWZvcmU6IE9iamVjdC5rZXlzKGhhc2hQYXJhbXNCZWZvcmUpLmxlbmd0aCxcbiAgICAgICAgaGFzaFBhcmFtc0NvdW50QWZ0ZXI6IE9iamVjdC5rZXlzKGhhc2hQYXJhbXNBZnRlcikubGVuZ3RoLFxuICAgICAgICBzdGlsbEhhc0hhc2hQYXJhbXM6IE9iamVjdC5rZXlzKGhhc2hQYXJhbXNBZnRlcikubGVuZ3RoID4gMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH0sIDEwMClcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZVJlbmRlckRvbmUgPSBSZWFjdC51c2VDYWxsYmFjaygoeyBkYXRhSXRlbXMsIHBhZ2VTaXplLCBwYWdlIH0pID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlUmVuZGVyRG9uZS1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgZGF0YUl0ZW1zQ291bnQ6IGRhdGFJdGVtcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBwYWdlU2l6ZSxcbiAgICAgIHBhZ2UsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIFVzZSByZWYgdG8gZ2V0IGxhdGVzdCByZW1vdmVkUmVjb3JkSWRzIChhdm9pZHMgc3RhbGUgY2xvc3VyZSBpc3N1ZXMgd2l0aCBsYXp5IGxvYWRpbmcpXG4gICAgY29uc3QgY3VycmVudFJlbW92ZWRJZHMgPSByZW1vdmVkUmVjb3JkSWRzUmVmLmN1cnJlbnRcbiAgICBcbiAgICAvLyBGaWx0ZXIgb3V0IHJlbW92ZWQgcmVjb3JkcyBGSVJTVCAtIGJlZm9yZSBhbnkgc2VsZWN0aW9uIGxvZ2ljXG4gICAgLy8gVGhpcyBlbnN1cmVzIHJlbW92ZWQgcmVjb3JkcyBzdGF5IHJlbW92ZWQgZXZlbiBkdXJpbmcgbGF6eSBsb2FkaW5nXG4gICAgY29uc3QgZmlsdGVyZWRJdGVtcyA9IGRhdGFJdGVtcz8uZmlsdGVyKGl0ZW0gPT4gIWN1cnJlbnRSZW1vdmVkSWRzLmhhcyhpdGVtLmdldElkKCkpKSB8fCBbXVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHF1ZXJ5RGF0YSBoYXMgYWN0dWFsbHkgY2hhbmdlZCBiZWZvcmUgdXBkYXRpbmcgc3RhdGVcbiAgICAvLyBUaGlzIHByZXZlbnRzIHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMgdGhhdCByZXNldCBzY3JvbGwgcG9zaXRpb25cbiAgICBjb25zdCBjdXJyZW50UmVjb3JkcyA9IHF1ZXJ5RGF0YT8ucmVjb3JkcyB8fCBbXVxuICAgIGNvbnN0IGN1cnJlbnRSZWNvcmRJZHMgPSBjdXJyZW50UmVjb3Jkcy5tYXAociA9PiByLmdldElkKCkpLnNvcnQoKVxuICAgIGNvbnN0IG5ld1JlY29yZElkcyA9IGZpbHRlcmVkSXRlbXMubWFwKHIgPT4gci5nZXRJZCgpKS5zb3J0KClcbiAgICBjb25zdCBkYXRhQ2hhbmdlZCA9IGN1cnJlbnRSZWNvcmRJZHMubGVuZ3RoICE9PSBuZXdSZWNvcmRJZHMubGVuZ3RoIHx8XG4gICAgICAhY3VycmVudFJlY29yZElkcy5ldmVyeSgoaWQsIGlkeCkgPT4gaWQgPT09IG5ld1JlY29yZElkc1tpZHhdKSB8fFxuICAgICAgcXVlcnlEYXRhPy5wYWdlU2l6ZSAhPT0gcGFnZVNpemUgfHxcbiAgICAgIHF1ZXJ5RGF0YT8ucGFnZSAhPT0gcGFnZVxuICAgIFxuICAgIC8vIE9ubHkgdXBkYXRlIHN0YXRlIGlmIGRhdGEgaGFzIGFjdHVhbGx5IGNoYW5nZWRcbiAgICBpZiAoZGF0YUNoYW5nZWQpIHtcbiAgICAgIHNldFF1ZXJ5RGF0YSh7XG4gICAgICAgIHJlY29yZHM6IGZpbHRlcmVkSXRlbXMsXG4gICAgICAgIHBhZ2VTaXplLFxuICAgICAgICBwYWdlXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBPbmx5IHNlbGVjdCByZWNvcmRzIHRoYXQgYXJlIE5PVCByZW1vdmVkXG4gICAgLy8gSU1QT1JUQU5UOiBPbmx5IHJlLXNlbGVjdCBpZiB0aGUgc2VsZWN0aW9uIGhhcyBhY3R1YWxseSBjaGFuZ2VkIHRvIGF2b2lkIHJlc2V0dGluZyBzY3JvbGwgcG9zaXRpb25cbiAgICBpZiAoZmlsdGVyZWRJdGVtcyAmJiBmaWx0ZXJlZEl0ZW1zLmxlbmd0aCA+IDAgJiYgb3V0cHV0RFMpIHtcbiAgICAgIGNvbnN0IHJlY29yZElkcyA9IGZpbHRlcmVkSXRlbXMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIGNvbnN0IGZkciA9IGZpbHRlcmVkSXRlbXMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgICAgXG4gICAgICAvLyBDaGVjayB3aGF0J3MgY3VycmVudGx5IHNlbGVjdGVkIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHJlLXNlbGVjdGlvbiAod2hpY2ggcmVzZXRzIHNjcm9sbClcbiAgICAgIGNvbnN0IGN1cnJlbnRseVNlbGVjdGVkSWRzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxuICAgICAgY29uc3Qgc2VsZWN0aW9uQ2hhbmdlZCA9IGN1cnJlbnRseVNlbGVjdGVkSWRzLmxlbmd0aCAhPT0gcmVjb3JkSWRzLmxlbmd0aCB8fFxuICAgICAgICAhcmVjb3JkSWRzLmV2ZXJ5KGlkID0+IGN1cnJlbnRseVNlbGVjdGVkSWRzLmluY2x1ZGVzKGlkKSlcbiAgICAgIFxuICAgICAgLy8gT25seSBzZWxlY3QgaWYgdGhlIHNlbGVjdGlvbiBoYXMgYWN0dWFsbHkgY2hhbmdlZFxuICAgICAgaWYgKHNlbGVjdGlvbkNoYW5nZWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgICBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCh3aWRnZXRJZCwgb3V0cHV0RFMsIHJlY29yZElkcywgZmRyKVxuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYW5kbGVSZW5kZXJEb25lLXNlbGVjdGluZy1maWx0ZXJlZC1yZWNvcmRzJyxcbiAgICAgICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgICAgIGRhdGFJdGVtc0NvdW50OiBkYXRhSXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgZmlsdGVyZWRJdGVtc0NvdW50OiBmaWx0ZXJlZEl0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogY3VycmVudFJlbW92ZWRJZHMuc2l6ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbkNoYW5nZWQ6IHRydWUsXG4gICAgICAgICAgICBjdXJyZW50bHlTZWxlY3RlZENvdW50OiBjdXJyZW50bHlTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICBuZXdTZWxlY3Rpb25Db3VudDogcmVjb3JkSWRzLmxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQtaGFuZGxlUmVuZGVyRG9uZScsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZElkcy5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ2hhbmRsZVJlbmRlckRvbmUtc2tpcHBpbmctcmVzZWxlY3Rpb24nLFxuICAgICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgICBkYXRhSXRlbXNDb3VudDogZGF0YUl0ZW1zPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICBmaWx0ZXJlZEl0ZW1zQ291bnQ6IGZpbHRlcmVkSXRlbXMubGVuZ3RoLFxuICAgICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogY3VycmVudFJlbW92ZWRJZHMuc2l6ZSxcbiAgICAgICAgICByZWFzb246ICdzZWxlY3Rpb24tdW5jaGFuZ2VkJyxcbiAgICAgICAgICBjdXJyZW50bHlTZWxlY3RlZENvdW50OiBjdXJyZW50bHlTZWxlY3RlZElkcy5sZW5ndGhcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtvdXRwdXREUywgd2lkZ2V0SWQsIHF1ZXJ5RGF0YV0pXG5cbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgZHMgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2Uob3V0cHV0RFM/LmlkKVxuICAgIGNvbnN0IGRzUmVjb3JkcyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgIGNvbnN0IHNlbGVjdGVkSWRzID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICBcbiAgICAvLyBDYXB0dXJlIHJlY29yZHMgcHJvcCBiZWZvcmUgdXNpbmcgaXQgKHRvIGF2b2lkIHNoYWRvd2luZylcbiAgICBjb25zdCByZWNvcmRzUHJvcCA9IHJlY29yZHNcbiAgICBcbiAgICAvLyBEZWJ1ZzogTG9nIHdoYXQgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2Ugc2Vlc1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS1maXJlZCcsXG4gICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUz8uaWQsXG4gICAgICBkc0lkOiBkcz8uaWQsXG4gICAgICBzZWxlY3RlZFJlY29yZHNGcm9tRFM6IGRzUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzZWxlY3RlZElkc0Zyb21EUzogc2VsZWN0ZWRJZHMubGVuZ3RoLFxuICAgICAgY3VycmVudFNlbGVjdGVkUmVjb3Jkc1N0YXRlOiBzZWxlY3RlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgcmVjb3Jkc1Byb3BDb3VudDogcmVjb3Jkc1Byb3A/Lmxlbmd0aCB8fCAwLFxuICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzLnNpemUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIC8vIElmIHdlIGhhdmUgcmVjb3JkcyBpbiB0aGUgcHJvcCAoYWNjdW11bGF0ZWQgcmVjb3JkcykgYnV0IERTIHNob3dzIDAgc2VsZWN0ZWQsXG4gICAgLy8gYW5kIHdlIGN1cnJlbnRseSBoYXZlIHNlbGVjdGVkUmVjb3JkcywgdGhpcyBpcyBsaWtlbHkgYSBxdWVyeSBzd2l0Y2ggaW4gXCJBZGQgdG9cIiBtb2RlXG4gICAgLy8gd2hlcmUgcmUtc2VsZWN0aW9uIGhhc24ndCBoYXBwZW5lZCB5ZXQuIERvbid0IGNsZWFyIHNlbGVjdGVkUmVjb3JkcyAtIHdhaXQgZm9yIHJlLXNlbGVjdGlvbi5cbiAgICBpZiAocmVjb3Jkc1Byb3AgJiYgcmVjb3Jkc1Byb3AubGVuZ3RoID4gMCAmJiBzZWxlY3RlZElkcy5sZW5ndGggPT09IDAgJiYgc2VsZWN0ZWRSZWNvcmRzICYmIHNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS1za2lwcGluZy1jbGVhci1kdXJpbmctcXVlcnktc3dpdGNoJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxuICAgICAgICByZWFzb246ICd3YWl0aW5nLWZvci1yZXNlbGVjdGlvbicsXG4gICAgICAgIHJlY29yZHNQcm9wQ291bnQ6IHJlY29yZHNQcm9wLmxlbmd0aCxcbiAgICAgICAgY3VycmVudFNlbGVjdGVkUmVjb3Jkc0NvdW50OiBzZWxlY3RlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgcmV0dXJuIC8vIFNraXAgdXBkYXRpbmcgLSByZS1zZWxlY3Rpb24gaXMgY29taW5nXG4gICAgfVxuICAgIFxuICAgIC8vIElNUE9SVEFOVDogRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHMgZnJvbSBEUyBzZWxlY3Rpb24gYmVmb3JlIGNvbXBhcmluZy9zeW5jaW5nXG4gICAgLy8gVGhpcyBwcmV2ZW50cyByZW1vdmVkIHJlY29yZHMgZnJvbSBiZWluZyByZS1hZGRlZCB3aGVuIHNjcm9sbGluZyB0cmlnZ2VycyB0aGlzIGNhbGxiYWNrXG4gICAgY29uc3QgZmlsdGVyZWREc1JlY29yZHMgPSBkc1JlY29yZHM/LmZpbHRlcigocmVjb3JkOiBEYXRhUmVjb3JkKSA9PiAhcmVtb3ZlZFJlY29yZElkcy5oYXMocmVjb3JkLmdldElkKCkpKSA/PyBbXVxuICAgIGNvbnN0IGZpbHRlcmVkU2VsZWN0ZWRJZHMgPSBzZWxlY3RlZElkcy5maWx0ZXIoaWQgPT4gIXJlbW92ZWRSZWNvcmRJZHMuaGFzKGlkKSlcbiAgICBcbiAgICAvLyBJZiBEUyBoYXMgbW9yZSBzZWxlY3RlZCB0aGFuIG91ciBzdGF0ZSwgYnV0IHRoZSBkaWZmZXJlbmNlIGlzIGVudGlyZWx5IHJlbW92ZWQgcmVjb3JkcywgZG9uJ3Qgc3luY1xuICAgIGlmIChmaWx0ZXJlZFNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gKHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDApICYmIHNlbGVjdGVkSWRzLmxlbmd0aCA+IGZpbHRlcmVkU2VsZWN0ZWRJZHMubGVuZ3RoKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZS1za2lwcGluZy1zeW5jLWR1ZS10by1yZW1vdmVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogd2lkZ2V0SWQsXG4gICAgICAgIHJlYXNvbjogJ2RzLXNlbGVjdGlvbi1pbmNsdWRlcy1yZW1vdmVkLXJlY29yZHMnLFxuICAgICAgICBkc1NlbGVjdGVkQ291bnQ6IHNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgZmlsdGVyZWRDb3VudDogZmlsdGVyZWRTZWxlY3RlZElkcy5sZW5ndGgsXG4gICAgICAgIGNvbXBvbmVudFN0YXRlQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZHNDb3VudDogcmVtb3ZlZFJlY29yZElkcy5zaXplXG4gICAgICB9KVxuICAgICAgcmV0dXJuIC8vIFNraXAgc3luY2luZyAtIHRoZSBtaXNtYXRjaCBpcyBkdWUgdG8gcmVtb3ZlZCByZWNvcmRzXG4gICAgfVxuICAgIFxuICAgIGxldCBzaG91bGRVcGRhdGUgPSBmYWxzZVxuICAgIGlmIChmaWx0ZXJlZFNlbGVjdGVkSWRzLmxlbmd0aCAhPT0gc2VsZWN0ZWRSZWNvcmRzPy5sZW5ndGgpIHtcbiAgICAgIHNob3VsZFVwZGF0ZSA9IHRydWVcbiAgICB9IGVsc2UgeyAvLyBlcXVhbCBsZW5ndGhcbiAgICAgIHNob3VsZFVwZGF0ZSA9IGZpbHRlcmVkU2VsZWN0ZWRJZHMuc29tZShpZCA9PiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHNlbGVjdGVkUmVjb3Jkcy5maW5kKChpdGVtKSA9PiBpdGVtLmdldElkKCkgPT09IGlkKVxuICAgICAgICByZXR1cm4gdGFyZ2V0ID09IG51bGxcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXVwZGF0aW5nLXNlbGVjdGVkUmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgb2xkQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIG5ld0NvdW50OiBmaWx0ZXJlZERzUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG5vdGU6ICdmaWx0ZXJlZC1vdXQtcmVtb3ZlZC1yZWNvcmRzJ1xuICAgICAgfSlcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXVwZGF0aW5nLXNlbGVjdGVkUmVjb3JkcycsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgb2xkQ291bnQ6IHNlbGVjdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIG5ld0NvdW50OiBmaWx0ZXJlZERzUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG9sZFNlbGVjdGVkSWRzOiAoc2VsZWN0ZWRSZWNvcmRzIHx8IFtdKS5tYXAociA9PiByLmdldElkKCkpLnNsaWNlKDAsIDUpLFxuICAgICAgICBuZXdTZWxlY3RlZElkczogZmlsdGVyZWRTZWxlY3RlZElkcy5zbGljZSgwLCA1KSxcbiAgICAgICAgbm90ZTogJ2ZpbHRlcmVkLW91dC1yZW1vdmVkLXJlY29yZHMnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBzZXRTZWxlY3RlZFJlY29yZHMoZmlsdGVyZWREc1JlY29yZHMpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VJbmZvQ2hhbmdlLXNraXBwaW5nLXVwZGF0ZScsXG4gICAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcbiAgICAgICAgcmVhc29uOiAnbm8tY2hhbmdlLWRldGVjdGVkJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfSwgW291dHB1dERTPy5pZCwgc2VsZWN0ZWRSZWNvcmRzLCB3aWRnZXRJZCwgcmVjb3JkcywgcmVtb3ZlZFJlY29yZElkc10pXG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyB0aGUgdGlwIG1lc3NhZ2Ugc2hvd2luZyBob3cgbWFueSBmZWF0dXJlcyBhcmUgZGlzcGxheWVkLlxuICAgKiBGaWx0ZXJzIG91dCByZW1vdmVkIHJlY29yZHMgdG8gc2hvdyBhY2N1cmF0ZSBjb3VudHMuXG4gICAqIFxuICAgKiBAcmV0dXJucyBGb3JtYXR0ZWQgc3RyaW5nIGxpa2UgXCJGZWF0dXJlcyBkaXNwbGF5ZWQ6IDExOCAvIDEyMVwiXG4gICAqL1xuICBjb25zdCBnZXRUaXBNZXNzYWdlID0gKCkgPT4ge1xuICAgIGlmIChxdWVyeURhdGEgJiYgcXVlcnlEYXRhLnJlY29yZHMpIHtcbiAgICAgIC8vIEZpbHRlciBvdXQgcmVtb3ZlZCByZWNvcmRzIGZvciBkaXNwbGF5IGNvdW50XG4gICAgICBjb25zdCBkaXNwbGF5ZWRSZWNvcmRzID0gcXVlcnlEYXRhLnJlY29yZHMuZmlsdGVyKChyZWNvcmQ6IERhdGFSZWNvcmQpID0+ICFyZW1vdmVkUmVjb3JkSWRzLmhhcyhyZWNvcmQuZ2V0SWQoKSkpXG4gICAgICBjb25zdCBkaXNwbGF5ZWRDb3VudCA9IGRpc3BsYXllZFJlY29yZHMubGVuZ3RoXG4gICAgICBcbiAgICAgIC8vIEZPUkNFRDogQWx3YXlzIFNpbXBsZUxpc3QsIHNvIGFsd2F5cyB1c2Ugc2ltcGxlIGRpc3BsYXkgZm9ybWF0XG4gICAgICByZXR1cm4gYCR7Z2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVzRGlzcGxheWVkJyl9OiAke2Rpc3BsYXllZENvdW50fSAvICR7cmVzdWx0Q291bnR9YFxuICAgICAgY29uc3QgeyBwYWdlID0gMSwgcGFnZVNpemUgPSBkZWZhdWx0UGFnZVNpemUgfSA9IHF1ZXJ5RGF0YVxuICAgICAgY29uc3QgZnJvbSA9IChwYWdlIC0gMSkgKiBwYWdlU2l6ZSArIDFcbiAgICAgIGNvbnN0IHRvID0gZnJvbSArIHBhZ2VTaXplIC0gMVxuICAgICAgaWYgKHJlc3VsdENvdW50ID4gMCkge1xuICAgICAgICByZXR1cm4gYCR7Z2V0STE4bk1lc3NhZ2UoJ2ZlYXR1cmVzRGlzcGxheWVkJyl9OiAke2Zyb219IC0gJHtNYXRoLm1pbih0bywgZGlzcGxheWVkQ291bnQpfSAvICR7cmVzdWx0Q291bnR9YFxuICAgICAgfVxuICAgICAgcmV0dXJuIGAke2dldEkxOG5NZXNzYWdlKCdmZWF0dXJlc0Rpc3BsYXllZCcpfTogMCAtIDAgLyAwYFxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIGV4cGFuZC9jb2xsYXBzZSBzdGF0ZSBmb3IgYWxsIHJlc3VsdCBpdGVtcy5cbiAgICogV2hlbiB0b2dnbGVkLCBhbGwgcmVzdWx0IGl0ZW1zIHdpbGwgYmUgZXhwYW5kZWQgb3IgY29sbGFwc2VkIHRvZ2V0aGVyLlxuICAgKiBVcGRhdGVzIGluZGl2aWR1YWwgaXRlbSBleHBhbnNpb24gc3RhdGVzIGluIHRoZSBtYXAgdG8gbWFpbnRhaW4gc3RhdGUgd2hlbiBpdGVtcyBhcmUgcmVtb3ZlZC5cbiAgICovXG4gIGNvbnN0IHRvZ2dsZUV4cGFuZEFsbCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRFeHBhbmRBbGwocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdWYWx1ZSA9ICFwcmV2XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgZXZlbnQ6ICd0b2dnbGVFeHBhbmRBbGwtY2xpY2tlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBwcmV2aW91c1ZhbHVlOiBwcmV2LFxuICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgYWxsIGN1cnJlbnQgaXRlbXMgaW4gdGhlIG1hcCB3aXRoIHRoZSBuZXcgZXhwYW5zaW9uIHN0YXRlXG4gICAgICBzZXRJdGVtRXhwYW5kU3RhdGVzKHByZXZNYXAgPT4ge1xuICAgICAgICBjb25zdCBuZXdNYXAgPSBuZXcgTWFwKHByZXZNYXApXG4gICAgICAgIC8vIEdldCBhbGwgY3VycmVudCByZWNvcmQgSURzIGZyb20gZmlsdGVyZWQgcmVjb3Jkc1xuICAgICAgICBjb25zdCBhbGxSZWNvcmRJZHMgPSBmaWx0ZXJlZFJlY29yZHNGb3JMaXN0Lm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgYWxsUmVjb3JkSWRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgIG5ld01hcC5zZXQoaWQsIG5ld1ZhbHVlKVxuICAgICAgICB9KVxuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0VYUEFORC1DT0xMQVBTRScsIHtcbiAgICAgICAgICBldmVudDogJ2l0ZW1FeHBhbmRTdGF0ZXMtdXBkYXRlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgICAgdXBkYXRlZENvdW50OiBhbGxSZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgICAgIHJlY29yZElkczogYWxsUmVjb3JkSWRzLnNsaWNlKDAsIDEwKSwgLy8gTG9nIGZpcnN0IDEwIElEc1xuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gbmV3TWFwXG4gICAgICB9KVxuICAgICAgXG4gICAgICByZXR1cm4gbmV3VmFsdWVcbiAgICB9KVxuICB9LCBbd2lkZ2V0SWQsIGZpbHRlcmVkUmVjb3Jkc0Zvckxpc3RdKVxuXG4gIGNvbnN0IHJlc3VsdFVzZU91dHB1dERhdGFTb3VyY2UgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gSW1tdXRhYmxlKHtcbiAgICAgIGRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZCxcbiAgICAgIG1haW5EYXRhU291cmNlSWQ6IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRcbiAgICB9KVxuICB9LCBbcXVlcnlJdGVtPy5vdXRwdXREYXRhU291cmNlSWRdKVxuXG4gIGNvbnN0IGhhbmRsZUVzY2FwZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gIH0sIFtdKVxuXG4gIC8vIEtlZXAgcmVjb3JkcyBzZWxlY3RlZCBhbmQgem9vbSB0byBjbGlja2VkIHJlY29yZFxuICAvLyBSZWNvcmRzIHJlbWFpbiBzZWxlY3RlZCBhcyBsb25nIGFzIHRoZXkncmUgaW4gdGhlIHJlc3VsdHNcbiAgLy8gQ2xpY2tpbmcgYSByZWNvcmQgYWx3YXlzIHpvb21zIHRvIGl0IG9uIHRoZSBtYXAgKHRoaXMgYmVoYXZpb3IgaXMgYWx3YXlzIGVuYWJsZWQpXG4gIGNvbnN0IHRvZ2dsZVNlbGVjdGlvbiA9IFJlYWN0LnVzZUNhbGxiYWNrKChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4ge1xuICAgIC8vIEVuc3VyZSB0aGUgY2xpY2tlZCByZWNvcmQgaXMgc2VsZWN0ZWQgKGl0IHNob3VsZCBhbHJlYWR5IGJlLCBidXQgZW5zdXJlIGl0KVxuICAgIGNvbnN0IHNlbGVjdGVkRGF0YXMgPSBvdXRwdXREUy5nZXRTZWxlY3RlZFJlY29yZHMoKSA/PyBbXVxuICAgIGNvbnN0IHNlbGVjdGVkSWRzID0gb3V0cHV0RFMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSA/PyBbXVxuICAgIGNvbnN0IGRhdGFJZCA9IGRhdGEuZ2V0SWQoKVxuICAgIFxuICAgIC8vIElmIHRoaXMgcmVjb3JkIGlzbid0IGFscmVhZHkgc2VsZWN0ZWQsIGFkZCBpdCB0byB0aGUgc2VsZWN0aW9uXG4gICAgaWYgKCFzZWxlY3RlZElkcy5pbmNsdWRlcyhkYXRhSWQpKSB7XG4gICAgICBjb25zdCB1cGRhdGVkU2VsZWN0ZWREYXRhcyA9IFsuLi5zZWxlY3RlZERhdGFzLCBkYXRhXVxuICAgICAgY29uc3QgcmVjb3JkSWRzID0gdXBkYXRlZFNlbGVjdGVkRGF0YXMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIFxuICAgICAgLy8gU2VsZWN0IHJlY29yZHMgYW5kIHB1Ymxpc2ggc2VsZWN0aW9uIG1lc3NhZ2UgdXNpbmcgdXRpbGl0eSBmdW5jdGlvblxuICAgICAgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2god2lkZ2V0SWQsIG91dHB1dERTLCByZWNvcmRJZHMsIHVwZGF0ZWRTZWxlY3RlZERhdGFzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sIHRydWUpXG4gICAgfVxuICAgIFxuICAgIC8vIFpvb20gdG8gdGhlIGNsaWNrZWQgcmVjb3JkIHVzaW5nIGRhdGEgYWN0aW9ucyAoYWx3YXlzIGVuYWJsZWQgLSB1c2VyIHdhbnRzIHRvIGtlZXAgdGhpcyBiZWhhdmlvcilcbiAgICBjb25zdCBkYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgZGF0YVNvdXJjZTogb3V0cHV0RFMsXG4gICAgICByZWNvcmRzOiBbZGF0YV0sXG4gICAgICB0eXBlOiAnc2VsZWN0ZWQnLFxuICAgICAgbmFtZTogb3V0cHV0RFMuZ2V0TGFiZWwoKVxuICAgIH1cbiAgICBcbiAgICAvLyBHZXQgYXZhaWxhYmxlIGRhdGEgYWN0aW9ucyBhbmQgZmluZCB0aGUgem9vbVRvRmVhdHVyZSBhY3Rpb25cbiAgICBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN1cHBvcnRlZEFjdGlvbnMod2lkZ2V0SWQsIFtkYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMpXG4gICAgICAudGhlbihhY3Rpb25DYXRlZ29yaWVzID0+IHtcbiAgICAgICAgLy8gTG9vayBmb3Igem9vbVRvRmVhdHVyZSBhY3Rpb24gaW4gYW55IGNhdGVnb3J5XG4gICAgICAgIGxldCB6b29tQWN0aW9uOiBhbnkgPSBudWxsXG4gICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgaW4gYWN0aW9uQ2F0ZWdvcmllcykge1xuICAgICAgICAgIGNvbnN0IGFjdGlvbnMgPSBhY3Rpb25DYXRlZ29yaWVzW2NhdGVnb3J5XVxuICAgICAgICAgIHpvb21BY3Rpb24gPSBhY3Rpb25zLmZpbmQoKGFjdGlvbjogYW55KSA9PiBhY3Rpb24ubmFtZSA9PT0gJ3pvb21Ub0ZlYXR1cmUnIHx8IGFjdGlvbi5pZCA9PT0gJ3pvb21Ub0ZlYXR1cmUnKVxuICAgICAgICAgIGlmICh6b29tQWN0aW9uKSBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHpvb21BY3Rpb24pIHtcbiAgICAgICAgICAvLyBFeGVjdXRlIHRoZSB6b29tIGFjdGlvblxuICAgICAgICAgIHJldHVybiBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmV4ZWN1dGVEYXRhQWN0aW9uKHpvb21BY3Rpb24sIFtkYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMsIHdpZGdldElkKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgLy8gU2lsZW50bHkgaGFuZGxlIGVycm9yc1xuICAgICAgfSlcbiAgfSwgW291dHB1dERTLCB3aWRnZXRJZF0pXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSByZWNvcmQgZnJvbSB0aGUgcmVzdWx0cyBhbmQgc2VsZWN0aW9uLlxuICAgKiBJZiByZW1vdmluZyB0aGUgbGFzdCByZWNvcmQsIGF1dG9tYXRpY2FsbHkgY2xlYXJzIGFsbCByZXN1bHRzXG4gICAqIGJ5IGNhbGxpbmcgdGhlIHRyYXNoIGNhbiBsb2dpYyAoc2FtZSBhcyBjbGlja2luZyBDbGVhciBidXR0b24pLlxuICAgKiBUaGlzIGVuc3VyZXMgdGhlIFVJIGRvZXNuJ3Qgc2hvdyBcIkZlYXR1cmVzIGRpc3BsYXllZDogMCAvIDFcIiB3aGVuIGFsbCByZXN1bHRzIGFyZSByZW1vdmVkLlxuICAgKiBcbiAgICogQHBhcmFtIGRhdGEgLSBUaGUgZmVhdHVyZSBkYXRhIHJlY29yZCB0byByZW1vdmVcbiAgICovXG4gIGNvbnN0IHJlbW92ZVJlY29yZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4ge1xuICAgIGNvbnN0IGRhdGFJZCA9IGRhdGEuZ2V0SWQoKVxuICAgIGNvbnN0IGN1cnJlbnRFeHBhbmRBbGwgPSBleHBhbmRBbGxcbiAgICBcbiAgICAvLyBMb2cgaGFzaCBzdGF0ZSB3aGVuIHJlbW92aW5nIGluZGl2aWR1YWwgcmVjb3JkXG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgICBjb25zdCBoYXNoUGFyYW1zOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge31cbiAgICB1cmxQYXJhbXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgaGFzaFBhcmFtc1trZXldID0gdmFsdWVcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtc3RhcnRlZCcsXG4gICAgICB3aWRnZXRJZCxcbiAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgY3VycmVudEV4cGFuZEFsbCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmVSZWNvcmQtY2FsbGVkJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVtb3ZlZFJlY29yZElkOiBkYXRhSWQsXG4gICAgICBoYXNoOiBoYXNoLFxuICAgICAgaGFzaFBhcmFtczogaGFzaFBhcmFtcyxcbiAgICAgIGhhc2hQYXJhbXNDb3VudDogT2JqZWN0LmtleXMoaGFzaFBhcmFtcykubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBSZW1vdmUgZnJvbSBleHBhbnNpb24gc3RhdGVzIG1hcFxuICAgIHNldEl0ZW1FeHBhbmRTdGF0ZXMocHJldk1hcCA9PiB7XG4gICAgICBjb25zdCBuZXdNYXAgPSBuZXcgTWFwKHByZXZNYXApXG4gICAgICBuZXdNYXAuZGVsZXRlKGRhdGFJZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRVhQQU5ELUNPTExBUFNFJywge1xuICAgICAgICBldmVudDogJ2l0ZW1FeHBhbmRTdGF0ZXMtY2xlYW5lZC11cCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgcmVtYWluaW5nQ291bnQ6IG5ld01hcC5zaXplLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gbmV3TWFwXG4gICAgfSlcbiAgICBcbiAgICAvLyBBZGQgdG8gcmVtb3ZlZCByZWNvcmRzIHNldFxuICAgIHNldFJlbW92ZWRSZWNvcmRJZHMocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpLmFkZChkYXRhSWQpXG4gICAgICBcbiAgICAgIC8vIElmIGFsbCByZWNvcmRzIGFyZSBub3cgcmVtb3ZlZCwgY2xlYXIgZXZlcnl0aGluZyBieSBjYWxsaW5nIHRyYXNoIGNhbiBsb2dpY1xuICAgICAgLy8gSU1QT1JUQU5UOiBDb21wYXJlIGFnYWluc3QgYWN0dWFsIGRpc3BsYXllZCByZWNvcmRzIGNvdW50LCBub3QgcmVzdWx0Q291bnRcbiAgICAgIC8vIHJlc3VsdENvdW50IG9ubHkgcmVmbGVjdHMgdGhlIGxhdGVzdCBxdWVyeSwgYnV0IGluIFwiQWRkIHRvXCIgbW9kZSB3ZSBkaXNwbGF5IGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgIC8vIFVzZSBxdWVyeURhdGEucmVjb3Jkcy5sZW5ndGggKGJlZm9yZSBmaWx0ZXJpbmcpIGFzIHRoZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIGRpc3BsYXllZCByZWNvcmRzXG4gICAgICAvLyBGYWxsIGJhY2sgdG8gYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCBpZiBpbiBhY2N1bXVsYXRpb24gbW9kZSwgb3IgcmVzdWx0Q291bnQgYXMgbGFzdCByZXNvcnRcbiAgICAgIGxldCBjdXJyZW50RGlzcGxheWVkQ291bnQgPSBxdWVyeURhdGE/LnJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICBpZiAoY3VycmVudERpc3BsYXllZENvdW50ID09PSAwKSB7XG4gICAgICAgIC8vIElmIHF1ZXJ5RGF0YSBkb2Vzbid0IGhhdmUgcmVjb3JkcyB5ZXQsIGNoZWNrIGlmIHdlJ3JlIGluIGFjY3VtdWxhdGlvbiBtb2RlXG4gICAgICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICAgIGlmIChpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY3VycmVudERpc3BsYXllZENvdW50ID0gYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIExhc3QgcmVzb3J0OiB1c2UgcmVzdWx0Q291bnQgKGJ1dCB0aGlzIG1pZ2h0IGJlIGluY29ycmVjdCBpbiBhY2N1bXVsYXRpb24gbW9kZSlcbiAgICAgICAgICBjdXJyZW50RGlzcGxheWVkQ291bnQgPSByZXN1bHRDb3VudFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3JlbW92ZVJlY29yZC1jaGVja2luZy1hbGwtcmVtb3ZlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWRzU2l6ZTogbmV3U2V0LnNpemUsXG4gICAgICAgIGN1cnJlbnREaXNwbGF5ZWRDb3VudCxcbiAgICAgICAgcmVzdWx0Q291bnQsXG4gICAgICAgIHF1ZXJ5RGF0YVJlY29yZHNDb3VudDogcXVlcnlEYXRhPy5yZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICB3aWxsTmF2aWdhdGVCYWNrOiBuZXdTZXQuc2l6ZSA9PT0gY3VycmVudERpc3BsYXllZENvdW50ICYmIGN1cnJlbnREaXNwbGF5ZWRDb3VudCA+IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKG5ld1NldC5zaXplID09PSBjdXJyZW50RGlzcGxheWVkQ291bnQgJiYgY3VycmVudERpc3BsYXllZENvdW50ID4gMCkge1xuICAgICAgICAvLyBBbGwgZGlzcGxheWVkIHJlY29yZHMgcmVtb3ZlZCAtIGNsZWFyIGV2ZXJ5dGhpbmcgKHNhbWUgYXMgY2xpY2tpbmcgdHJhc2ggY2FuIGJ1dHRvbilcbiAgICAgICAgb25OYXZCYWNrKHRydWUpXG4gICAgICAgIHJldHVybiBuZXdTZXRcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIG5ld1NldFxuICAgIH0pXG4gICAgXG4gICAgLy8gVXBkYXRlIHF1ZXJ5RGF0YSB0byBmaWx0ZXIgb3V0IHRoZSByZW1vdmVkIHJlY29yZFxuICAgIHNldFF1ZXJ5RGF0YShwcmV2RGF0YSA9PiB7XG4gICAgICBpZiAoIXByZXZEYXRhKSByZXR1cm4gcHJldkRhdGFcbiAgICAgIGNvbnN0IGZpbHRlcmVkUmVjb3JkcyA9IHByZXZEYXRhLnJlY29yZHMuZmlsdGVyKChyZWNvcmQ6IERhdGFSZWNvcmQpID0+IHJlY29yZC5nZXRJZCgpICE9PSBkYXRhSWQpXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5wcmV2RGF0YSxcbiAgICAgICAgcmVjb3JkczogZmlsdGVyZWRSZWNvcmRzXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICAvLyBBTFdBWVMgcmVtb3ZlIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMgKHNhbWUgYXMgUmVtb3ZlIG1vZGUpXG4gICAgLy8gVGhpcyBwcm9wZXJseSByZW1vdmVzIHJlY29yZHMgZnJvbSB0aGUgbWFwIHNlbGVjdGlvbiwgaGFuZGxpbmcgc2luZ2xlIG9yIG11bHRpcGxlIG9yaWdpbiBzb3VyY2VzXG4gICAgLy8gQWxzbyByZW1vdmVzIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gICAgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKFxuICAgICAgd2lkZ2V0SWQsIFxuICAgICAgW2RhdGFdLCBcbiAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgZ3JhcGhpY3NMYXllclxuICAgIClcbiAgICBcbiAgICAvLyBVcGRhdGUgb3V0cHV0RFMgc2VsZWN0aW9uXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRhcyA9IG91dHB1dERTLmdldFNlbGVjdGVkUmVjb3JkcygpID8/IFtdXG4gICAgY29uc3QgdXBkYXRlZFNlbGVjdGVkRGF0YXMgPSBzZWxlY3RlZERhdGFzLmZpbHRlcihyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkgIT09IGRhdGFJZClcbiAgICBjb25zdCByZWNvcmRJZHMgPSB1cGRhdGVkU2VsZWN0ZWREYXRhcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgIFxuICAgIC8vIFVwZGF0ZSBvdXRwdXREUyBzZWxlY3Rpb25cbiAgICBpZiAodHlwZW9mIG91dHB1dERTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3V0cHV0RFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkcywgdXBkYXRlZFNlbGVjdGVkRGF0YXMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSlcbiAgICB9XG4gICAgXG4gICAgLy8gSU1QT1JUQU5UOiBQdWJsaXNoIGN1c3RvbSBldmVudCBzbyB3aWRnZXQgY2FuIHVwZGF0ZSBsYXN0U2VsZWN0aW9uIHN0YXRlXG4gICAgLy8gVGhpcyBlbnN1cmVzIHJlc3RvcmF0aW9uIHJlc3RvcmVzIHRoZSBjb3JyZWN0ICh1cGRhdGVkKSBjb3VudFxuICAgIGNvbnN0IG9yaWdpbkRTID0gKG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UpLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgY29uc3QgZGF0YVNvdXJjZUlkID0gb3JpZ2luRFM/LmlkXG4gICAgY29uc3Qgc2VsZWN0aW9uRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3F1ZXJ5c2ltcGxlLXNlbGVjdGlvbi1jaGFuZ2VkJywge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZWNvcmRJZHMsIC8vIFVwZGF0ZWQgcmVjb3JkIElEcyAod2l0aCByZW1vdmVkIHJlY29yZCBleGNsdWRlZClcbiAgICAgICAgZGF0YVNvdXJjZUlkLFxuICAgICAgICBvdXRwdXREc0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChzZWxlY3Rpb25FdmVudClcbiAgICBcbiAgICAvLyBJZiBpbiBhY2N1bXVsYXRpb24gbW9kZSwgYWxzbyByZW1vdmUgZnJvbSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIGlmIChpc0FjY3VtdWxhdGlvbk1vZGUgJiYgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UgJiYgYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCByZW1haW5pbmdSZWNvcmRzID0gcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZChcbiAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgICAgICAgW2RhdGFdLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgIClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAneC1idXR0b24tcmVtb3ZlZC1mcm9tLWFjY3VtdWxhdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIHJlbW92ZWRSZWNvcmRJZDogZGF0YUlkLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudEJlZm9yZTogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgd2FzUmVtb3ZlZDogcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGggPCBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShyZW1haW5pbmdSZWNvcmRzKVxuICAgIH1cbiAgICBcbiAgICAvLyBMb2cgYWZ0ZXIgcmVtb3ZlUmVjb3JkIGNvbXBsZXRlcyB0byBjaGVjayBpZiBleHBhbmRBbGwgY2hhbmdlZFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVtb3ZlUmVjb3JkLWNvbXBsZXRlZCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICByZW1vdmVkUmVjb3JkSWQ6IGRhdGFJZCxcbiAgICAgICAgZXhwYW5kQWxsQmVmb3JlOiBjdXJyZW50RXhwYW5kQWxsLFxuICAgICAgICBleHBhbmRBbGxBZnRlcjogZXhwYW5kQWxsLFxuICAgICAgICBleHBhbmRBbGxDaGFuZ2VkOiBjdXJyZW50RXhwYW5kQWxsICE9PSBleHBhbmRBbGwsXG4gICAgICAgIGV4cGFuZEJ5RGVmYXVsdFByb3A6IGV4cGFuZEFsbCwgLy8gV2hhdCB3aWxsIGJlIHBhc3NlZCB0byBTaW1wbGVMaXN0XG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9LCAwKVxuICB9LCBbb3V0cHV0RFMsIHdpZGdldElkLCByZXN1bHRDb3VudCwgb25OYXZCYWNrLCByZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBleHBhbmRBbGxdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdCBoLTEwMCcgY3NzPXtyZXN1bHRTdHlsZX0gcm9sZT0nbGlzdGJveCcgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHMnKX0+XG4gICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCB1c2VEYXRhU291cmNlPXtyZXN1bHRVc2VPdXRwdXREYXRhU291cmNlfSBvbkRhdGFTb3VyY2VJbmZvQ2hhbmdlPXtoYW5kbGVEYXRhU291cmNlSW5mb0NoYW5nZX0gLz5cbiAgICAgIFxuICAgICAgey8qIEVycm9yIE1lc3NhZ2UgKi99XG4gICAgICB7c2VsZWN0aW9uRXJyb3IgJiYgKFxuICAgICAgICA8ZGl2IGNzcz17Y3NzYHBhZGRpbmc6IDAgMTZweDsgbWFyZ2luLXRvcDogOHB4O2B9PlxuICAgICAgICAgIDxFcnJvck1lc3NhZ2UgXG4gICAgICAgICAgICBlcnJvcj17c2VsZWN0aW9uRXJyb3J9IFxuICAgICAgICAgICAgb25EaXNtaXNzPXsoKSA9PiBzZXRTZWxlY3Rpb25FcnJvcihudWxsKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdxdWVyeS1yZXN1bHRfX2hlYWRlciBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIG14LTQnPlxuICAgICAgICA8QnV0dG9uIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdiYWNrJyl9IHJlZj17YmFja0J0blJlZn0gY2xhc3NOYW1lPSdwLTAgbXItMicgc2l6ZT0nc20nIHZhcmlhbnQ9J3RleHQnIGNvbG9yPSdpbmhlcml0JyBpY29uIG9uQ2xpY2s9eygpID0+IHsgb25OYXZCYWNrKCkgfX0+XG4gICAgICAgICAgPEFycm93TGVmdE91dGxpbmVkIGF1dG9GbGlwLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIHtjdXJyZW50SXRlbS5yZXN1bHRzTGFiZWwgPz8gZ2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHMnKX1cbiAgICAgICAgeyhcbiAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ2NsZWFyUmVzdWx0Jyl9IHBsYWNlbWVudD0nYm90dG9tJz5cbiAgICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J21sLWF1dG8nIGljb24gc2l6ZT0nc20nIHZhcmlhbnQ9J3RleHQnIGNvbG9yPSdpbmhlcml0JyBvbkNsaWNrPXtjbGVhclJlc3VsdHN9IGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfT5cbiAgICAgICAgICAgICAgICA8SWNvbiBpY29uPXtpY29uTWFwLnRvb2xEZWxldGV9IC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgey8qIERhdGEgYWN0aW9ucyBmaWx0ZXJlZCB2aWEgbWFuaWZlc3QuanNvbiBleGNsdWRlRGF0YUFjdGlvbnMgLSBTaG93IG9uIE1hcCwgU2VsZWN0IExvYWRlZCwgYW5kIENsZWFyIFNlbGVjdGlvbiBhcmUgZXhjbHVkZWQuXG4gICAgICAgICAgICAgICAgQ3VzdG9tIFwiQWRkIHRvIE1hcFwiIGFjdGlvbiBpcyBwcm92aWRlZCB2aWEgZXh0cmFBY3Rpb25zIGFuZCB1c2VzIFF1ZXJ5U2ltcGxlJ3Mgc2VsZWN0aW9uIHByb2Nlc3MuICovfVxuICAgICAgICAgICAge2VuYWJsZURhdGFBY3Rpb24gJiYgb3V0cHV0RFMgJiYgKFxuICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2B3aWR0aDogMXB4OyBoZWlnaHQ6IDE2cHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLWlucHV0KTtgfT48L2Rpdj5cbiAgICAgICAgICAgICAgICA8RGF0YUFjdGlvbkxpc3RcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cbiAgICAgICAgICAgICAgICAgIGRhdGFTZXRzPXthY3Rpb25EYXRhU2V0c31cbiAgICAgICAgICAgICAgICAgIGxpc3RTdHlsZT17RGF0YUFjdGlvbkxpc3RTdHlsZS5Ecm9wZG93bn1cbiAgICAgICAgICAgICAgICAgIGJ1dHRvblNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgYnV0dG9uVHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICBleHRyYUFjdGlvbnM9e2V4dHJhQWN0aW9uc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktcmVzdWx0LWNvbnRhaW5lciBtdC0xJz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LXJlc3VsdC1pbmZvIG1iLTIgcHgtNCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1iZXR3ZWVuJyByb2xlPSdhbGVydCcgYXJpYS1saXZlPSdwb2xpdGUnPlxuICAgICAgICAgIDxzcGFuPntnZXRUaXBNZXNzYWdlKCl9PC9zcGFuPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyJz5cbiAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtleHBhbmRBbGwgPyBnZXRJMThuTWVzc2FnZSgnY29sbGFwc2VBbGwnKSA6IGdldEkxOG5NZXNzYWdlKCdleHBhbmRBbGwnKX0gcGxhY2VtZW50PSd0b3AnPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgaWNvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZUV4cGFuZEFsbH1cbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtleHBhbmRBbGwgPyBnZXRJMThuTWVzc2FnZSgnY29sbGFwc2VBbGwnKSA6IGdldEkxOG5NZXNzYWdlKCdleHBhbmRBbGwnKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtleHBhbmRBbGwgPyA8Q29sbGFwc2VBbGxPdXRsaW5lZCAvPiA6IDxFeHBhbmRBbGxPdXRsaW5lZCAvPn1cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7LyogRk9SQ0VEOiBBbHdheXMgU2ltcGxlTGlzdCAtIExhenlMb2FkIGFuZCBNdWx0aVBhZ2UgcmVtb3ZlZCAqL31cbiAgICAgICAge3Jlc3VsdENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgPFNpbXBsZUxpc3RcbiAgICAgICAgICAgIGtleT0nc2ltcGxlJ1xuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgcXVlcnlJdGVtPXtxdWVyeUl0ZW19XG4gICAgICAgICAgICBvdXRwdXREUz17b3V0cHV0RFMgYXMgYW55fVxuICAgICAgICAgICAgcmVjb3Jkcz17ZmlsdGVyZWRSZWNvcmRzRm9yTGlzdH1cbiAgICAgICAgICAgIGRpcmVjdGlvbj17ZGlyZWN0aW9ufVxuICAgICAgICAgICAgb25Fc2NhcGU9e2hhbmRsZUVzY2FwZX1cbiAgICAgICAgICAgIG9uU2VsZWN0Q2hhbmdlPXt0b2dnbGVTZWxlY3Rpb259XG4gICAgICAgICAgICBvblJlbW92ZT17cmVtb3ZlUmVjb3JkfVxuICAgICAgICAgICAgZXhwYW5kQnlEZWZhdWx0PXtleHBhbmRBbGx9XG4gICAgICAgICAgICBpdGVtRXhwYW5kU3RhdGVzPXtpdGVtRXhwYW5kU3RhdGVzfVxuICAgICAgICAgICAgcmVtb3ZlZFJlY29yZElkcz17cmVtb3ZlZFJlY29yZElkc31cbiAgICAgICAgICAgIG9uUmVuZGVyRG9uZT17aGFuZGxlUmVuZGVyRG9uZX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuXG5leHBvcnQgY29uc3QgUXVlcnlUYXNrQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8UXVlcnlUYXNrQ29udGV4dFByb3BzPih7XG4gIHJlc2V0U3ltYm9sOiBudWxsXG59KVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0NvbnRleHRQcm9wcyB7XG4gIHJlc2V0U3ltYm9sPzogc3ltYm9sIC8vIHVzZWQgdG8gdHJpZ2dlciByZXNldCBvcGVyYXRpb25cbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LFxuICBqc3gsXG4gIGNzcyxcbiAgY2xhc3NOYW1lcyxcbiAgdHlwZSBEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBJTVN0YXRlLFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBSZWFjdFJlZHV4LFxuICBob29rcyxcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXG4gIHR5cGUgU3FsUXVlcnlQYXJhbXMsXG4gIEltbXV0YWJsZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIFRvb2x0aXAsIENoZWNrYm94IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IFNxbEV4cHJlc3Npb25SdW50aW1lLCBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbiB9IGZyb20gJ2ppbXUtdWkvYmFzaWMvc3FsLWV4cHJlc3Npb24tcnVudGltZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCBTcGF0aWFsUmVsYXRpb24sIHR5cGUgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBzYW5pdGl6ZVNxbEV4cHJlc3Npb24gfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBRdWVyeVRhc2tTcGF0aWFsRm9ybSB9IGZyb20gJy4vcXVlcnktdGFzay1zcGF0aWFsLWZvcm0nXG5pbXBvcnQgeyB1c2VBdXRvSGVpZ2h0IH0gZnJvbSAnLi91c2VBdXRvSGVpZ2h0J1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuaW1wb3J0IHsgUXVlcnlUYXNrQ29udGV4dCB9IGZyb20gJy4vcXVlcnktdGFzay1jb250ZXh0J1xuaW1wb3J0IHsgSW5mb091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9zdWdnZXN0ZWQvaW5mbydcbmltcG9ydCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0l0ZW1Qcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgY29uZmlnSWQ6IHN0cmluZ1xuICBzcGF0aWFsRmlsdGVyRW5hYmxlZDogYm9vbGVhblxuICBkYXRhc291cmNlUmVhZHk6IGJvb2xlYW5cbiAgb3V0cHV0RFM/OiBEYXRhU291cmNlXG4gIG9uRm9ybVN1Ym1pdDogKHNxbEV4cHJPYmo6IElNU3FsRXhwcmVzc2lvbiwgc3BhdGlhbEZpbHRlcjogU3BhdGlhbEZpbHRlck9iaiwgem9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB2b2lkXG4gIGRhdGFBY3Rpb25GaWx0ZXI/OiBTcWxRdWVyeVBhcmFtc1xuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG59XG5cbmNvbnN0IGdldEZvcm1TdHlsZSA9IChpc0F1dG9IZWlnaHQ6IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgbWluLWhlaWdodDogMDtcbiAgICAuZm9ybS10aXRsZSB7XG4gICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UtcGFwZXItdGV4dCk7XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgZm9udC1zaXplOiAwLjgxMjVyZW07XG4gICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fY29udGVudCB7XG4gICAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAnYXV0byd9O1xuICAgICAgbWF4LWhlaWdodDogJHtpc0F1dG9IZWlnaHQgPyAnNjEuOHZoJyA6ICdub25lJ307XG4gICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIHBhZGRpbmctYm90dG9tOiAwO1xuICAgIH1cbiAgICAucXVlcnktZm9ybV9fYWN0aW9ucyB7XG4gICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICBwYWRkaW5nLXRvcDogNHB4O1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrRm9ybSAocHJvcHM6IFF1ZXJ5VGFza0l0ZW1Qcm9wcykge1xuICBjb25zdCB7IHdpZGdldElkLCBjb25maWdJZCwgb3V0cHV0RFMsIHNwYXRpYWxGaWx0ZXJFbmFibGVkLCBkYXRhc291cmNlUmVhZHksIG9uRm9ybVN1Ym1pdCwgZGF0YUFjdGlvbkZpbHRlciwgaW5pdGlhbElucHV0VmFsdWUsIG9uSGFzaFBhcmFtZXRlclVzZWQsIHF1ZXJ5SXRlbVNob3J0SWQgfSA9IHByb3BzXG4gIGNvbnN0IHByZURhdGFBY3Rpb25GaWx0ZXIgPSBob29rcy51c2VQcmV2aW91cyhkYXRhQWN0aW9uRmlsdGVyKVxuICBjb25zdCBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3dpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5xdWVyeUl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmNvbmZpZ0lkID09PSBjb25maWdJZClcbiAgfSlcbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW3Jlc2V0U3ltYm9sLCBzZXRSZXNldFN5bWJvbF0gPSBSZWFjdC51c2VTdGF0ZTxzeW1ib2w+KG51bGwpXG4gIC8vIFJ1bnRpbWUgem9vbSBwcmVmZXJlbmNlIC0gaW5pdGlhbGl6ZWQgd2l0aCBjb25maWcgdmFsdWUsIGNhbiBiZSBvdmVycmlkZGVuIGJ5IHVzZXJcbiAgY29uc3QgW3J1bnRpbWVab29tVG9TZWxlY3RlZCwgc2V0UnVudGltZVpvb21Ub1NlbGVjdGVkXSA9IFJlYWN0LnVzZVN0YXRlPGJvb2xlYW4+KFxuICAgIHF1ZXJ5SXRlbT8uem9vbVRvU2VsZWN0ZWQgPz8gdHJ1ZVxuICApXG5cbiAgLy8gU3luYyBydW50aW1lIHpvb20gcHJlZmVyZW5jZSB3aGVuIHF1ZXJ5IGl0ZW0gY2hhbmdlcyAoZS5nLiwgc3dpdGNoaW5nIGJldHdlZW4gcXVlcmllcylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWQocXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCA/PyB0cnVlKVxuICB9LCBbcXVlcnlJdGVtPy56b29tVG9TZWxlY3RlZCwgcXVlcnlJdGVtPy5jb25maWdJZF0pXG5cbiAgLy8gY29uc3QgW2RhdGFTb3VyY2UsIHNldERhdGFTb3VyY2VdID0gUmVhY3QudXNlU3RhdGU8RGF0YVNvdXJjZT4obnVsbClcbiAgY29uc3Qge1xuICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICB1c2VTcGF0aWFsRmlsdGVyLFxuICAgIHNwYXRpYWxGaWx0ZXJUeXBlcyxcbiAgICBzcWxFeHByT2JqLFxuICAgIHNwYXRpYWxNYXBXaWRnZXRJZHMsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzLFxuICAgIHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzLFxuICAgIHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEsXG4gICAgc3BhdGlhbFJlbGF0aW9ucyxcbiAgICBzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbFJlbGF0aW9uQnVmZmVyVW5pdCxcbiAgICBzcGF0aWFsSW50ZXJhY3RpdmVFbmFibGVCdWZmZXIsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyRGlzdGFuY2UsXG4gICAgc3BhdGlhbEludGVyYWN0aXZlQnVmZmVyVW5pdCxcbiAgICBhdHRyaWJ1dGVGaWx0ZXJMYWJlbCA9IGdldEkxOG5NZXNzYWdlKCdhdHRyaWJ1dGVGaWx0ZXInKSxcbiAgICBzcGF0aWFsRmlsdGVyTGFiZWwgPSBnZXRJMThuTWVzc2FnZSgnc3BhdGlhbEZpbHRlcicpLFxuICAgIGF0dHJpYnV0ZUZpbHRlckRlc2MsXG4gICAgc3BhdGlhbEZpbHRlckRlc2NcbiAgfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IFthdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqXSA9IFJlYWN0LnVzZVN0YXRlPElNU3FsRXhwcmVzc2lvbj4oc3FsRXhwck9iailcbiAgY29uc3Qgc3BhdGlhbEZpbHRlck9ialJlZiA9IFJlYWN0LnVzZVJlZjxTcGF0aWFsRmlsdGVyT2JqPihudWxsKVxuICBjb25zdCBzcGF0aWFsUmVsYXRpb25SZWYgPSBSZWFjdC51c2VSZWY8U3BhdGlhbFJlbGF0aW9uPihTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0KVxuICBjb25zdCBidWZmZXJSZWYgPSBSZWFjdC51c2VSZWY8eyBkaXN0YW5jZTogbnVtYmVyLCB1bml0OiBVbml0VHlwZSB9PihudWxsKVxuICBjb25zdCBhcHBseUJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3QgaXNBdXRvSGVpZ2h0ID0gdXNlQXV0b0hlaWdodCgpXG4gIGNvbnN0IHNob3dDbGF1c2VOdW1iZXIgPSBSZWFjdC51c2VSZWYoZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iaikpXG4gIGNvbnN0IGluaXRpYWxWYWx1ZVNldFJlZiA9IFJlYWN0LnVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKSAvLyBUcmFjayB3aGljaCBjb25maWdJZCB3ZSd2ZSBzZXQgdGhlIHZhbHVlIGZvclxuICBjb25zdCBsYXN0VmFsdWVTZXRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkgLy8gVHJhY2sgdGhlIGxhc3QgdmFsdWUgdGhhdCB3YXMgc2V0XG4gIGNvbnN0IGhhc2hUcmlnZ2VyZWRSZWYgPSBSZWFjdC51c2VSZWY8Ym9vbGVhbj4oZmFsc2UpIC8vIFRyYWNrIGlmIHF1ZXJ5IHdhcyB0cmlnZ2VyZWQgdmlhIGhhc2ggcGFyYW1ldGVyXG5cbiAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUz8uZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBpbnB1dCB2YWx1ZSBmcm9tIFVSTCBoYXNoIHBhcmFtZXRlcnMgd2hlbjpcbiAgICogMS4gRGF0YXNvdXJjZSBpcyByZWFkeVxuICAgKiAyLiBXZSBoYXZlIGFuIGluaXRpYWxJbnB1dFZhbHVlIGZyb20gVVJMIGhhc2hcbiAgICogMy4gV2UgaGF2ZW4ndCBhbHJlYWR5IHNldCBpdCBmb3IgdGhpcyBjb25maWdJZCwgT1IgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAqIFxuICAgKiBVc2VzIGJvdGggUmVhY3Qgc3RhdGUgdXBkYXRlcyBhbmQgRE9NIG1hbmlwdWxhdGlvbiB0byBlbnN1cmUgdGhlIHZhbHVlXG4gICAqIGlzIHByb3Blcmx5IHNldCBpbiBTcWxFeHByZXNzaW9uUnVudGltZSdzIGludGVybmFsIHN0YXRlLlxuICAgKi9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBSZXNldCBmbGFnIGlmIGNvbmZpZ0lkIGNoYW5nZWQgKHN3aXRjaGVkIHRvIGRpZmZlcmVudCBxdWVyeSlcbiAgICBpZiAoaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IG51bGwgJiYgaW5pdGlhbFZhbHVlU2V0UmVmLmN1cnJlbnQgIT09IGNvbmZpZ0lkKSB7XG4gICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgaGFzaCB0cmlnZ2VyIGZsYWcgd2hlbiBzd2l0Y2hpbmcgcXVlcmllc1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB2YWx1ZSBoYXMgY2hhbmdlZCBmb3IgdGhlIHNhbWUgY29uZmlnSWRcbiAgICBjb25zdCB2YWx1ZUNoYW5nZWQgPSBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gbnVsbCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VmFsdWVTZXRSZWYuY3VycmVudCAhPT0gaW5pdGlhbElucHV0VmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9PT0gY29uZmlnSWRcbiAgICBcbiAgICAvLyBTZXQgdGhlIHZhbHVlIGlmOlxuICAgIC8vIC0gV2UgaGF2ZW4ndCBzZXQgaXQgZm9yIHRoaXMgY29uZmlnSWQgeWV0LCBPUlxuICAgIC8vIC0gVGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGZvciB0aGUgc2FtZSBjb25maWdJZCAoaGFzaCBwYXJhbWV0ZXIgdXBkYXRlZClcbiAgICBjb25zdCBzaG91bGRTZXRWYWx1ZSA9IGRhdGFzb3VyY2VSZWFkeSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbElucHV0VmFsdWUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCAhPT0gY29uZmlnSWQgfHwgdmFsdWVDaGFuZ2VkKVxuICAgIFxuICAgIGlmIChzaG91bGRTZXRWYWx1ZSkge1xuICAgICAgY29uc3QgZmlyc3RQYXJ0ID0gc3FsRXhwck9iai5wYXJ0c1swXVxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IHBhcnQgaXMgYSBTSU5HTEUgY2xhdXNlIChub3QgYSBTcWxDbGF1c2VTZXQpXG4gICAgICBpZiAoZmlyc3RQYXJ0ICYmICd0eXBlJyBpbiBmaXJzdFBhcnQgJiYgZmlyc3RQYXJ0LnR5cGUgPT09ICdTSU5HTEUnICYmICd2YWx1ZU9wdGlvbnMnIGluIGZpcnN0UGFydCkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGV4cHJlc3Npb24gb2JqZWN0IHdpdGggdGhlIGluaXRpYWwgdmFsdWVcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHNxbEV4cHJPYmouc2V0SW4oWydwYXJ0cycsICcwJywgJ3ZhbHVlT3B0aW9ucycsICd2YWx1ZSddLCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaih1cGRhdGVkKVxuICAgICAgICAvLyBVcGRhdGUgY2xhdXNlIG51bWJlciBmb3IgdGhlIHVwZGF0ZWQgZXhwcmVzc2lvblxuICAgICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbih1cGRhdGVkKVxuICAgICAgICBpbml0aWFsVmFsdWVTZXRSZWYuY3VycmVudCA9IGNvbmZpZ0lkXG4gICAgICAgIGxhc3RWYWx1ZVNldFJlZi5jdXJyZW50ID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgXG4gICAgICAgIC8vIEFsc28gc2V0IHRoZSB2YWx1ZSBkaXJlY3RseSBvbiB0aGUgaW5wdXQgZWxlbWVudCBhZnRlciBhIGRlbGF5IHRvIGVuc3VyZSBjb21wb25lbnQgaXMgcmVuZGVyZWRcbiAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBTcWxFeHByZXNzaW9uUnVudGltZSBtYXkgbm90IHN5bmMgZnJvbSB0aGUgZXhwcmVzc2lvbiBwcm9wIGFsb25lXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIEZpbmQgdGhlIGlucHV0IGVsZW1lbnQgd2l0aGluIFNxbEV4cHJlc3Npb25SdW50aW1lXG4gICAgICAgICAgY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS13aWRnZXQtaWQ9XCIke3dpZGdldElkfVwiXWApPy5jbG9zZXN0KCcucXVlcnktZm9ybScpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVlcnktZm9ybScpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGZvcm1FbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBMb29rIGZvciB0ZXh0IGlucHV0IGVsZW1lbnRzXG4gICAgICAgICAgICBjb25zdCB0ZXh0SW5wdXRzID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ZXh0SW5wdXRzLmZvckVhY2goKGlucHV0OiBIVE1MSW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWUgaWYgaW5wdXQgaXMgZW1wdHkgT1IgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIChoYXNoIHBhcmFtZXRlciB1cGRhdGVkKVxuICAgICAgICAgICAgICBjb25zdCBzaG91bGRVcGRhdGUgPSAhaW5wdXQudmFsdWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUudHJpbSgpID09PSAnJyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSAhPT0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBGb2N1cyB0aGUgaW5wdXQgZmlyc3RcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZVxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaW5pdGlhbElucHV0VmFsdWVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRpc3BhdGNoIGlucHV0IGV2ZW50IHdpdGggcHJvcGVyIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dEV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnB1dEV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGlucHV0RXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkaXNwYXRjaCBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VFdmVudCA9IG5ldyBFdmVudCgnY2hhbmdlJywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNoYW5nZUV2ZW50LCAndGFyZ2V0JywgeyB2YWx1ZTogaW5wdXQsIGVudW1lcmFibGU6IHRydWUgfSlcbiAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFsc28gdHJ5IFJlYWN0J3Mgc3ludGhldGljIGV2ZW50IGFwcHJvYWNoIHVzaW5nIG5hdGl2ZSB2YWx1ZSBzZXR0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBuYXRpdmVJbnB1dFZhbHVlU2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUsICd2YWx1ZScpPy5zZXRcbiAgICAgICAgICAgICAgICBpZiAobmF0aXZlSW5wdXRWYWx1ZVNldHRlcikge1xuICAgICAgICAgICAgICAgICAgbmF0aXZlSW5wdXRWYWx1ZVNldHRlci5jYWxsKGlucHV0LCBpbml0aWFsSW5wdXRWYWx1ZSlcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWN0RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KHJlYWN0RXZlbnQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsdXIgdG8gdHJpZ2dlciBhbnkgdmFsaWRhdGlvbiBvciBzdGF0ZSB1cGRhdGVzXG4gICAgICAgICAgICAgICAgaW5wdXQuYmx1cigpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFmdGVyIHNldHRpbmcgdmFsdWVzIGFuZCBibHVycmluZywgdmVyaWZ5IGlucHV0IHZhbHVlIGlzIHNldCBiZWZvcmUgdHJpZ2dlcmluZyBBcHBseSBidXR0b25cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCAmJiBkYXRhc291cmNlUmVhZHkpIHtcbiAgICAgICAgICAgICAgICAvLyBWRVJJRklDQVRJT046IEVuc3VyZSBpbnB1dCB2YWx1ZSBpcyBhY3R1YWxseSBzZXQgYmVmb3JlIGV4ZWN1dGluZyBxdWVyeVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGdyb3VwZWQgcXVlcmllcyB3aGVyZSBkcm9wZG93bnMgbmVlZCB0byBiZSBzeW5jaHJvbml6ZWQgZmlyc3RcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldC1pZD1cIiR7d2lkZ2V0SWR9XCJdYCk/LmNsb3Nlc3QoJy5xdWVyeS1mb3JtJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWVyeS1mb3JtJylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZm9ybUVsZW1lbnQgJiYgaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRJbnB1dHMgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpXG4gICAgICAgICAgICAgICAgICBsZXQgaW5wdXRWYWx1ZVNldCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHRleHRJbnB1dHMuZm9yRWFjaCgoaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlID09PSBpbml0aWFsSW5wdXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWVTZXQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmICghaW5wdXRWYWx1ZVNldCkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0ZPUk0nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdpbnB1dC12YWx1ZS1ub3Qtc2V0LXJldHJ5aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZFZhbHVlOiBpbml0aWFsSW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkLFxuICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3dpbGwtcmV0cnktYWZ0ZXItZGVsYXknLFxuICAgICAgICAgICAgICAgICAgICAgIG5vdGU6ICdJbnB1dCB2YWx1ZSBub3Qgc2V0LCByZXRyeWluZyB0byBlbnN1cmUgc3luY2hyb25pemF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAvLyBSZXRyeSBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IHN0YXRlIHRvIHN5bmNcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgY2FsbCB2ZXJpZnlBbmRBcHBseSBpZiBuZWVkZWQsIGJ1dCBsaW1pdCByZXRyaWVzXG4gICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIG5vdywganVzdCByZXRyeSBvbmNlIG1vcmVcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCAmJiBkYXRhc291cmNlUmVhZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBoYXNoVHJpZ2dlcmVkUmVmIHRvIGZvcmNlIHpvb20gZm9yIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGhhc2ggcGFyYW1ldGVyIGZyb20gVVJMIGJlZm9yZSBBcHBseSBpcyB0cmlnZ2VyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkhhc2hQYXJhbWV0ZXJVc2VkICYmIHF1ZXJ5SXRlbVNob3J0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZChxdWVyeUl0ZW1TaG9ydElkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdXRvLXRyaWdnZXIgQXBwbHkgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseUJ1dHRvblJlZi5jdXJyZW50LmNsaWNrKClcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC8vIEV4aXQgZWFybHksIHdpbGwgcmV0cnlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSW5wdXQgdmFsdWUgaXMgc2V0IGNvcnJlY3RseSwgcHJvY2VlZCB3aXRoIGV4ZWN1dGlvblxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiAnaW5wdXQtdmFsdWUtdmVyaWZpZWQnLFxuICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRWYWx1ZTogaW5pdGlhbElucHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkLFxuICAgICAgICAgICAgICAgICAgbm90ZTogJ0lucHV0IHZhbHVlIHZlcmlmaWVkLCBwcm9jZWVkaW5nIHdpdGggcXVlcnkgZXhlY3V0aW9uJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2V0IGhhc2hUcmlnZ2VyZWRSZWYgdG8gZm9yY2Ugem9vbSBmb3IgaGFzaC10cmlnZ2VyZWQgcXVlcmllc1xuICAgICAgICAgICAgICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgaGFzaCBwYXJhbWV0ZXIgZnJvbSBVUkwgYmVmb3JlIEFwcGx5IGlzIHRyaWdnZXJlZCB0byBwcmV2ZW50IHJlLWV4ZWN1dGlvblxuICAgICAgICAgICAgICAgIGlmIChvbkhhc2hQYXJhbWV0ZXJVc2VkICYmIHF1ZXJ5SXRlbVNob3J0SWQpIHtcbiAgICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQocXVlcnlJdGVtU2hvcnRJZClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBdXRvLXRyaWdnZXIgQXBwbHkgYnV0dG9uIHRvIGV4ZWN1dGUgdGhlIHF1ZXJ5IHdpdGggdGhlIHBvcHVsYXRlZCB2YWx1ZVxuICAgICAgICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAyMDApIC8vIFNtYWxsIGRlbGF5IGFmdGVyIGJsdXIgdG8gZW5zdXJlIHN0YXRlIGlzIHN5bmNlZFxuICAgICAgICAgIH1cbiAgICAgICAgfSwgNTAwKSAvLyBMb25nZXIgZGVsYXkgdG8gZW5zdXJlIGNvbXBvbmVudCBpcyBmdWxseSByZW5kZXJlZFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFRoZSBzcWxFeHByT2JqLnBhcnRzIG1heSBjaGFuZ2UgYnV0IHRoZSBkaXNwbGF5U1FMIGlzIHRoZSBzYW1lXG4gICAgaWYgKCFzcWxFeHByT2JqKSB7XG4gICAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSAwXG4gICAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKG51bGwpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dDbGF1c2VOdW1iZXIuY3VycmVudCA9IGdldFNob3duQ2xhdXNlTnVtYmVyQnlFeHByZXNzaW9uKHNxbEV4cHJPYmopXG4gICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB3ZSBoYXZlbid0IHNldCB0aGUgaW5pdGlhbCB2YWx1ZSBmb3IgdGhpcyBjb25maWdJZCB5ZXQsIG9yIGlmIHdlIGRvbid0IGhhdmUgYW4gaW5pdGlhbCB2YWx1ZVxuICAgICAgaWYgKGluaXRpYWxWYWx1ZVNldFJlZi5jdXJyZW50ICE9PSBjb25maWdJZCB8fCAhaW5pdGlhbElucHV0VmFsdWUpIHtcbiAgICAgICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihzcWxFeHByT2JqKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW3NxbEV4cHJPYmosIGluaXRpYWxJbnB1dFZhbHVlLCBkYXRhc291cmNlUmVhZHksIGNvbmZpZ0lkLCB3aWRnZXRJZCwgb25IYXNoUGFyYW1ldGVyVXNlZCwgcXVlcnlJdGVtU2hvcnRJZF0pXG5cbiAgY29uc3QgYXBwbHlRdWVyeSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyBXaGVuIHRoZSAnYXBwbHknIGJ1dHRvbiBpcyBjbGlja2VkLCBpdCBzaG91bGQgY2xlYXIgdGhlIHNlbGVjdGlvbiBmcm9tIHRoZSBwcmV2aW91cyByZXN1bHQgbGlzdFxuICAgIGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyhvdXRwdXREUylcblxuICAgIGlmIChvdXRwdXREUykge1xuICAgICAgY29uc3Qgb3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIGlmIChvcmlnaW5Ecykge1xuICAgICAgICBjb25zdCBkYXRhVmlld0NvbmZpZyA9IG9yaWdpbkRzLmdldERhdGFWaWV3Q29uZmlnKClcbiAgICAgICAgY29uc3QgbWF4aW11bSA9IGRhdGFWaWV3Q29uZmlnPy5tYXhpbXVtXG4gICAgICAgIGlmIChtYXhpbXVtICE9IG51bGwgJiYgbWF4aW11bSA+IDApIHtcbiAgICAgICAgICBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZURhdGFTb3VyY2VCeURhdGFTb3VyY2VKc29uKFxuICAgICAgICAgICAgb3V0cHV0RFMsXG4gICAgICAgICAgICBvdXRwdXREUy5nZXREYXRhU291cmNlSnNvbigpLnNldEluKFsncXVlcnknLCAnbWF4aW11bSddLCBtYXhpbXVtKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvcmNlIHpvb20gZm9yIGhhc2gtdHJpZ2dlcmVkIHF1ZXJpZXMsIG90aGVyd2lzZSB1c2UgcnVudGltZSBwcmVmZXJlbmNlXG4gICAgY29uc3Qgem9vbVRvVXNlID0gaGFzaFRyaWdnZXJlZFJlZi5jdXJyZW50ID8gdHJ1ZSA6IHJ1bnRpbWVab29tVG9TZWxlY3RlZFxuXG4gICAgLy8gU2FuaXRpemUgdXNlciBpbnB1dCBiZWZvcmUgc3VibWlzc2lvblxuICAgIGNvbnN0IHNhbml0aXplZFNxbEV4cHJPYmogPSBzYW5pdGl6ZVNxbEV4cHJlc3Npb24oYXR0cmlidXRlRmlsdGVyU3FsRXhwck9iailcblxuICAgIGxldCByZWwgPSBzcGF0aWFsUmVsYXRpb25SZWYuY3VycmVudFxuICAgIGlmIChzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQ/Lmdlb21ldHJ5ICYmIHJlbCA9PSBudWxsKSB7XG4gICAgICByZWwgPSBTcGF0aWFsUmVsYXRpb24uSW50ZXJzZWN0XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudD8uZ2VvbWV0cnkpKSB7XG4gICAgICBpZiAoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Lmdlb21ldHJ5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBvbkZvcm1TdWJtaXQoc2FuaXRpemVkU3FsRXhwck9iaiwgeyAuLi5zcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQsIGdlb21ldHJ5OiBzcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQuZ2VvbWV0cnlbMF0sIHJlbGF0aW9uOiByZWwsIGJ1ZmZlcjogYnVmZmVyUmVmLmN1cnJlbnQgfSwgem9vbVRvVXNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAgICAgJ2VzcmkvZ2VvbWV0cnkvb3BlcmF0b3JzL3VuaW9uT3BlcmF0b3InXG4gICAgICAgIF0pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgICAgY29uc3Qgb3BlcmF0b3I6ICh0eXBlb2YgX19lc3JpLnVuaW9uT3BlcmF0b3IpID0gbW9kdWxlc1swXVxuICAgICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gb3BlcmF0b3IuZXhlY3V0ZU1hbnkoc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50Lmdlb21ldHJ5KVxuICAgICAgICAgIG9uRm9ybVN1Ym1pdChzYW5pdGl6ZWRTcWxFeHByT2JqLCB7IC4uLnNwYXRpYWxGaWx0ZXJPYmpSZWYuY3VycmVudCwgZ2VvbWV0cnksIHJlbGF0aW9uOiByZWwsIGJ1ZmZlcjogYnVmZmVyUmVmLmN1cnJlbnQgfSwgem9vbVRvVXNlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvbkZvcm1TdWJtaXQoc2FuaXRpemVkU3FsRXhwck9iaiwgeyAuLi5zcGF0aWFsRmlsdGVyT2JqUmVmLmN1cnJlbnQsIHJlbGF0aW9uOiByZWwsIGJ1ZmZlcjogYnVmZmVyUmVmLmN1cnJlbnQgfSwgem9vbVRvVXNlKVxuICAgIH1cbiAgICBcbiAgICAvLyBSZXNldCBoYXNoVHJpZ2dlcmVkUmVmIGFmdGVyIHVzZVxuICAgIGhhc2hUcmlnZ2VyZWRSZWYuY3VycmVudCA9IGZhbHNlXG4gIH0sIFtvbkZvcm1TdWJtaXQsIG91dHB1dERTLCBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLCBydW50aW1lWm9vbVRvU2VsZWN0ZWRdKVxuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSBSZWFjdC51c2VDYWxsYmFjaygoZXZlbnQ6IFJlYWN0LktleWJvYXJkRXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInICYmIGRhdGFzb3VyY2VSZWFkeSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgXG4gICAgICAvLyBGaW5kIHRoZSBhY3RpdmUgaW5wdXQgZmllbGRcbiAgICAgIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgIGlmIChhY3RpdmVFbGVtZW50ICYmIGFjdGl2ZUVsZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJyAmJiBhY3RpdmVFbGVtZW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAvLyBGb3JjZSBibHVyIHRvIHRyaWdnZXIgU3FsRXhwcmVzc2lvblJ1bnRpbWUncyBpbnB1dCBwcm9jZXNzaW5nXG4gICAgICAgIGFjdGl2ZUVsZW1lbnQuYmx1cigpXG4gICAgICAgIFxuICAgICAgICAvLyBXYWl0IGZvciBibHVyIHByb2Nlc3NpbmcsIHRoZW4gY2xpY2sgdGhlIEFwcGx5IGJ1dHRvblxuICAgICAgICAvLyBUaGlzIHVzZXMgdGhlIGV4YWN0IHNhbWUgY29kZSBwYXRoIGFzIGNsaWNraW5nIHRoZSBidXR0b24gbWFudWFsbHlcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQgJiYgIWFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcHBseVF1ZXJ5KClcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDIwMClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vdCBpbiBhbiBpbnB1dCBmaWVsZCwgc2FmZSB0byBhcHBseSBpbW1lZGlhdGVseVxuICAgICAgICBpZiAoYXBwbHlCdXR0b25SZWYuY3VycmVudCAmJiAhYXBwbHlCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCkge1xuICAgICAgICAgIGFwcGx5QnV0dG9uUmVmLmN1cnJlbnQuY2xpY2soKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFwcGx5UXVlcnkoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbZGF0YXNvdXJjZVJlYWR5LCBhcHBseVF1ZXJ5XSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZGF0YUFjdGlvbkZpbHRlcikgcmV0dXJuXG4gICAgaWYgKGRhdGFBY3Rpb25GaWx0ZXIud2hlcmUgIT09IHByZURhdGFBY3Rpb25GaWx0ZXI/LndoZXJlKSB7XG4gICAgICBhcHBseVF1ZXJ5KClcbiAgICB9XG4gIH0sIFtkYXRhQWN0aW9uRmlsdGVyLCBwcmVEYXRhQWN0aW9uRmlsdGVyPy53aGVyZSwgYXBwbHlRdWVyeV0pXG5cbiAgY29uc3QgcmVzZXRRdWVyeSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyAxLiByZXNldCBhdHRyaWJ1dGUgZmlsdGVyXG4gICAgc2hvd0NsYXVzZU51bWJlci5jdXJyZW50ID0gZ2V0U2hvd25DbGF1c2VOdW1iZXJCeUV4cHJlc3Npb24oc3FsRXhwck9iailcbiAgICBzZXRBdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqKHNxbEV4cHJPYmopXG4gICAgLy8gMi4gcmVzZXQgc3BhdGlhbCBmaWx0ZXJcbiAgICBzZXRSZXNldFN5bWJvbChTeW1ib2woKSlcbiAgfSwgW3NxbEV4cHJPYmpdKVxuXG4gIGNvbnN0IGhhbmRsZVNxbEV4cHJPYmpDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoc3FsT2JqOiBJTVNxbEV4cHJlc3Npb24pID0+IHtcbiAgICBzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPSBnZXRTaG93bkNsYXVzZU51bWJlckJ5RXhwcmVzc2lvbihzcWxPYmopXG4gICAgc2V0QXR0cmlidXRlRmlsdGVyU3FsRXhwck9iaihzcWxPYmopXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZVNwYXRpYWxGaWx0ZXJDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqKSA9PiB7XG4gICAgc3BhdGlhbEZpbHRlck9ialJlZi5jdXJyZW50ID0gZmlsdGVyXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZVJlbGF0aW9uQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKHJlbDogU3BhdGlhbFJlbGF0aW9uKSA9PiB7XG4gICAgc3BhdGlhbFJlbGF0aW9uUmVmLmN1cnJlbnQgPSByZWxcbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlQnVmZmVyQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRpc3RhbmNlOiBudW1iZXIsIHVuaXQ6IFVuaXRUeXBlKSA9PiB7XG4gICAgYnVmZmVyUmVmLmN1cnJlbnQgPSB7IGRpc3RhbmNlLCB1bml0IH1cbiAgfSwgW10pXG5cbiAgY29uc3Qgc2hvd0F0dHJpYnV0ZUZpbHRlciA9IHVzZUF0dHJpYnV0ZUZpbHRlciAmJiBzcWxFeHByT2JqICE9IG51bGxcbiAgY29uc3Qgc2hvd1NwYXRpYWxGaWx0ZXIgPSBzcGF0aWFsRmlsdGVyRW5hYmxlZCAmJiB1c2VTcGF0aWFsRmlsdGVyICYmIChzcGF0aWFsRmlsdGVyVHlwZXMubGVuZ3RoID4gMCB8fCBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhIHx8IHNwYXRpYWxSZWxhdGlvblVzZURhdGFTb3VyY2VzPy5sZW5ndGggPiAwKVxuXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIGZvcm0gcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdGT1JNJywge1xuICAgICAgZXZlbnQ6ICdmb3JtLXJlbmRlci1jaGVjaycsXG4gICAgICBjb25maWdJZCxcbiAgICAgIGRhdGFzb3VyY2VSZWFkeSxcbiAgICAgIHVzZUF0dHJpYnV0ZUZpbHRlcixcbiAgICAgIHNxbEV4cHJPYmo6IHNxbEV4cHJPYmogPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgIHNxbEV4cHJPYmpQYXJ0czogc3FsRXhwck9iaj8ucGFydHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgc2hvd0F0dHJpYnV0ZUZpbHRlcixcbiAgICAgIG9yaWdpbkRTOiBvcmlnaW5EUyA/ICdleGlzdHMnIDogJ251bGwnLFxuICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFM/LmlkIHx8ICdub25lJyxcbiAgICAgIHNob3dTcGF0aWFsRmlsdGVyLFxuICAgICAgaXNBdXRvSGVpZ2h0LFxuICAgICAgb3V0cHV0RFM6IG91dHB1dERTID8gJ2V4aXN0cycgOiAnbnVsbCdcbiAgICB9KVxuICB9LCBbY29uZmlnSWQsIGRhdGFzb3VyY2VSZWFkeSwgdXNlQXR0cmlidXRlRmlsdGVyLCBzcWxFeHByT2JqLCBzaG93QXR0cmlidXRlRmlsdGVyLCBvcmlnaW5EUywgc2hvd1NwYXRpYWxGaWx0ZXIsIGlzQXV0b0hlaWdodCwgb3V0cHV0RFNdKVxuXG4gIC8vIExvZyB3aGVuIGZvcm0gY29udGVudCBzaG91bGQgcmVuZGVyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3dBdHRyaWJ1dGVGaWx0ZXIgJiYgb3JpZ2luRFMpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdhdHRyaWJ1dGUtZmlsdGVyLXJlYWR5JyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICBzcWxFeHByT2JqUGFydHM6IHNxbEV4cHJPYmo/LnBhcnRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgYXR0cmlidXRlRmlsdGVyTGFiZWwsXG4gICAgICAgIG5vdGU6ICdJbnB1dCBmaWVsZCBzaG91bGQgYmUgdmlzaWJsZSdcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdhdHRyaWJ1dGUtZmlsdGVyLW5vdC1yZWFkeScsXG4gICAgICAgIGNvbmZpZ0lkLFxuICAgICAgICBzaG93QXR0cmlidXRlRmlsdGVyLFxuICAgICAgICBvcmlnaW5EUzogb3JpZ2luRFMgPyAnZXhpc3RzJyA6ICdudWxsJyxcbiAgICAgICAgdXNlQXR0cmlidXRlRmlsdGVyLFxuICAgICAgICBzcWxFeHByT2JqOiBzcWxFeHByT2JqID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICAgIHJlYXNvbjogIXNob3dBdHRyaWJ1dGVGaWx0ZXIgPyAnc2hvd0F0dHJpYnV0ZUZpbHRlciBpcyBmYWxzZScgOiAnb3JpZ2luRFMgaXMgbnVsbCdcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbc2hvd0F0dHJpYnV0ZUZpbHRlciwgb3JpZ2luRFMsIGNvbmZpZ0lkLCBzcWxFeHByT2JqLCB1c2VBdHRyaWJ1dGVGaWx0ZXIsIGF0dHJpYnV0ZUZpbHRlckxhYmVsXSlcblxuICAvLyBDaGVjayBET00gdmlzaWJpbGl0eSBhZnRlciByZW5kZXJcbiAgY29uc3QgZm9ybUNvbnRlbnRSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGZvcm1Db250ZW50UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShmb3JtQ29udGVudFJlZi5jdXJyZW50KVxuICAgICAgY29uc3QgcmVjdCA9IGZvcm1Db250ZW50UmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnRk9STScsIHtcbiAgICAgICAgZXZlbnQ6ICdmb3JtLWNvbnRlbnQtZG9tLWNoZWNrJyxcbiAgICAgICAgY29uZmlnSWQsXG4gICAgICAgIGV4aXN0czogISFmb3JtQ29udGVudFJlZi5jdXJyZW50LFxuICAgICAgICBkaXNwbGF5OiBjb21wdXRlZFN0eWxlLmRpc3BsYXksXG4gICAgICAgIHZpc2liaWxpdHk6IGNvbXB1dGVkU3R5bGUudmlzaWJpbGl0eSxcbiAgICAgICAgb3BhY2l0eTogY29tcHV0ZWRTdHlsZS5vcGFjaXR5LFxuICAgICAgICBoZWlnaHQ6IGNvbXB1dGVkU3R5bGUuaGVpZ2h0LFxuICAgICAgICBtYXhIZWlnaHQ6IGNvbXB1dGVkU3R5bGUubWF4SGVpZ2h0LFxuICAgICAgICBmbGV4OiBjb21wdXRlZFN0eWxlLmZsZXgsXG4gICAgICAgIGZsZXhCYXNpczogY29tcHV0ZWRTdHlsZS5mbGV4QmFzaXMsXG4gICAgICAgIHJlY3RIZWlnaHQ6IHJlY3QuaGVpZ2h0LFxuICAgICAgICByZWN0V2lkdGg6IHJlY3Qud2lkdGgsXG4gICAgICAgIGlzVmlzaWJsZTogcmVjdC5oZWlnaHQgPiAwICYmIHJlY3Qud2lkdGggPiAwLFxuICAgICAgICBwYXJlbnRIZWlnaHQ6IGZvcm1Db250ZW50UmVmLmN1cnJlbnQucGFyZW50RWxlbWVudD8uY2xpZW50SGVpZ2h0IHx8IDBcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbY29uZmlnSWQsIHNob3dBdHRyaWJ1dGVGaWx0ZXIsIG9yaWdpbkRTXSlcblxuICByZXR1cm4gKFxuICAgIDxRdWVyeVRhc2tDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IHJlc2V0U3ltYm9sIH19PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3F1ZXJ5LWZvcm0nIGNzcz17Z2V0Rm9ybVN0eWxlKGlzQXV0b0hlaWdodCl9PlxuICAgICAgICA8ZGl2IHJlZj17Zm9ybUNvbnRlbnRSZWZ9IGNsYXNzTmFtZT0ncXVlcnktZm9ybV9fY29udGVudCcgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufT5cbiAgICAgICAgICB7c2hvd0F0dHJpYnV0ZUZpbHRlciAmJiAoXG4gICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICByb2xlPSdncm91cCcgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0ncHgtNCcgXG4gICAgICAgICAgICAgIGNzcz17Y3NzYHBhZGRpbmctdG9wOiAycHg7YH1cbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YXR0cmlidXRlRmlsdGVyTGFiZWx9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmb3JtLXRpdGxlIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdkLW5vbmUnOiAhYXR0cmlidXRlRmlsdGVyTGFiZWwgJiYgIWF0dHJpYnV0ZUZpbHRlckRlc2MgfSl9IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICB7YXR0cmlidXRlRmlsdGVyTGFiZWwgJiYgPGRpdiBjbGFzc05hbWU9J21yLTIgdGl0bGUyJz57YXR0cmlidXRlRmlsdGVyTGFiZWx9PC9kaXY+fVxuICAgICAgICAgICAgICAgIHthdHRyaWJ1dGVGaWx0ZXJEZXNjICYmIChcbiAgICAgICAgICAgICAgICAgIDxUb29sdGlwIHBsYWNlbWVudD0nYm90dG9tJyBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gdGl0bGU9e2F0dHJpYnV0ZUZpbHRlckRlc2N9PlxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHNpemU9J3NtJyBpY29uIHR5cGU9J3RlcnRpYXJ5Jz48SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPjwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7b3JpZ2luRFMgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgbWFyZ2luOiAtMTBweCAwcHg7YH0+XG4gICAgICAgICAgICAgICAgICA8U3FsRXhwcmVzc2lvblJ1bnRpbWVcbiAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtjb25maWdJZH0tJHtpbml0aWFsSW5wdXRWYWx1ZSB8fCAnbm9uZSd9YH1cbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlPXtvcmlnaW5EU31cbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbj17YXR0cmlidXRlRmlsdGVyU3FsRXhwck9ian1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNxbEV4cHJPYmpDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7c2hvd0F0dHJpYnV0ZUZpbHRlciAmJiBzaG93U3BhdGlhbEZpbHRlciAmJiAoXG4gICAgICAgICAgICA8aHIgY2xhc3NOYW1lPSdtLTQnIGNzcz17Y3NzYGJvcmRlcjogbm9uZTsgaGVpZ2h0OiAxcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7YH0vPlxuICAgICAgICAgICl9XG4gICAgICAgICAge3Nob3dTcGF0aWFsRmlsdGVyICYmIChcbiAgICAgICAgICAgIDxRdWVyeVRhc2tTcGF0aWFsRm9ybVxuICAgICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICAgIGxhYmVsPXtzcGF0aWFsRmlsdGVyTGFiZWx9XG4gICAgICAgICAgICAgIGRlc2M9e3NwYXRpYWxGaWx0ZXJEZXNjfVxuICAgICAgICAgICAgICBmaWx0ZXJUeXBlcz17c3BhdGlhbEZpbHRlclR5cGVzfVxuICAgICAgICAgICAgICBtYXBXaWRnZXRJZHM9e3NwYXRpYWxNYXBXaWRnZXRJZHN9XG4gICAgICAgICAgICAgIGNyZWF0ZVRvb2xUeXBlcz17c3BhdGlhbEludGVyYWN0aXZlQ3JlYXRlVG9vbFR5cGVzfVxuICAgICAgICAgICAgICBvbkZpbHRlckNoYW5nZT17aGFuZGxlU3BhdGlhbEZpbHRlckNoYW5nZX1cbiAgICAgICAgICAgICAgb25SZWxhdGlvbkNoYW5nZT17aGFuZGxlUmVsYXRpb25DaGFuZ2V9XG4gICAgICAgICAgICAgIG9uQnVmZmVyQ2hhbmdlPXtoYW5kbGVCdWZmZXJDaGFuZ2V9XG4gICAgICAgICAgICAgIHNwYXRpYWxSZWxhdGlvbnM9e3NwYXRpYWxSZWxhdGlvbnN9XG4gICAgICAgICAgICAgIGRzRW5hYmxlQnVmZmVyPXtzcGF0aWFsUmVsYXRpb25FbmFibGVCdWZmZXJ9XG4gICAgICAgICAgICAgIGRzQnVmZmVyRGlzdGFuY2U9e3NwYXRpYWxSZWxhdGlvbkJ1ZmZlckRpc3RhbmNlfVxuICAgICAgICAgICAgICBkc0J1ZmZlclVuaXQ9e3NwYXRpYWxSZWxhdGlvbkJ1ZmZlclVuaXR9XG4gICAgICAgICAgICAgIGRyYXdFbmFibGVCdWZmZXI9e3NwYXRpYWxJbnRlcmFjdGl2ZUVuYWJsZUJ1ZmZlcn1cbiAgICAgICAgICAgICAgZHJhd0J1ZmZlckRpc3RhbmNlPXtzcGF0aWFsSW50ZXJhY3RpdmVCdWZmZXJEaXN0YW5jZX1cbiAgICAgICAgICAgICAgZHJhd0J1ZmZlclVuaXQ9e3NwYXRpYWxJbnRlcmFjdGl2ZUJ1ZmZlclVuaXR9XG4gICAgICAgICAgICAgIHVzZURhdGFTb3VyY2VzPXtzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlc31cbiAgICAgICAgICAgICAgdXNlUnVudGltZURhdGE9e3NwYXRpYWxJbmNsdWRlUnVudGltZURhdGF9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncXVlcnktZm9ybV9fYWN0aW9ucyBweC00IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgY2hlY2tlZD17cnVudGltZVpvb21Ub1NlbGVjdGVkfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhfLCBjaGVja2VkKSA9PiBzZXRSdW50aW1lWm9vbVRvU2VsZWN0ZWQoY2hlY2tlZCl9XG4gICAgICAgICAgICBjbGFzc05hbWU9J21yLTInXG4gICAgICAgICAgLz5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21yLWF1dG8nIGNzcz17Y3NzYGZvbnQtc2l6ZTogMC44NzVyZW07IGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtgfT5cbiAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgnem9vbVRvU2VsZWN0ZWQnKX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPEJ1dHRvbiByZWY9e2FwcGx5QnV0dG9uUmVmfSBjb2xvcj0ncHJpbWFyeScgY2xhc3NOYW1lPSdtbC1hdXRvJyBkaXNhYmxlZD17IWRhdGFzb3VyY2VSZWFkeX0gb25DbGljaz17YXBwbHlRdWVyeX0+XG4gICAgICAgICAgICB7Z2V0STE4bk1lc3NhZ2UoJ2FwcGx5Jyl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgeyhzaG93Q2xhdXNlTnVtYmVyLmN1cnJlbnQgPiAwIHx8IHNob3dTcGF0aWFsRmlsdGVyKSAmJiAoXG4gICAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT0nbWwtMicgb25DbGljaz17cmVzZXRRdWVyeX0+e2dldEkxOG5NZXNzYWdlKCdyZXNldCcpfTwvQnV0dG9uPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9RdWVyeVRhc2tDb250ZXh0LlByb3ZpZGVyPlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCB0eXBlIEljb25SZXN1bHQsIHR5cGUgSW1tdXRhYmxlT2JqZWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgSWNvbiB9IGZyb20gJ2ppbXUtdWknXG5cbmludGVyZmFjZSBDb250ZW50UHJvcHMge1xuICBpY29uPzogSWNvblJlc3VsdCB8IEltbXV0YWJsZU9iamVjdDxJY29uUmVzdWx0PlxuICBuYW1lOiBzdHJpbmdcbn1cblxuY29uc3QgdGV4dFN0eWxlID0gY3NzYFxuICBmb250LXdlaWdodDogNTAwO1xuICBmb250LXNpemU6IDAuODc1cmVtO1xuYFxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrTGFiZWwgKHByb3BzOiBDb250ZW50UHJvcHMpIHtcbiAgY29uc3QgeyBpY29uLCBuYW1lIH0gPSBwcm9wc1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgdGV4dC10cnVuY2F0ZScgY3NzPXt0ZXh0U3R5bGV9PlxuICAgICAge2ljb24gJiYgPEljb24gY2xhc3NOYW1lPSdxdWVyeS10YXNrLWljb24gbXItMicgaWNvbj17aWNvbi5zdmd9IC8+fVxuICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtdHJ1bmNhdGUnIHRpdGxlPXtuYW1lfT5cbiAgICAgICAge25hbWV9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIFJlYWN0LCB0eXBlIEltbXV0YWJsZUFycmF5LCBjbGFzc05hbWVzLCBsb2Rhc2gsIGhvb2tzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHR5cGUgeyBTaXplIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5VGFzayB9IGZyb20gJy4vcXVlcnktdGFzaydcbmltcG9ydCB7IFF1ZXJ5VGFza0xpc3QgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGlzdCdcbmltcG9ydCB7IFRhc2tMaXN0UG9wcGVyV3JhcHBlciB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyJ1xuaW1wb3J0IHsgZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAgfSBmcm9tICcuL3dpZGdldC1jb25maWcnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5cbmNvbnN0IHsgaWNvbk1hcCB9ID0gZ2V0V2lkZ2V0UnVudGltZURhdGFNYXAoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0xpc3RQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgd2lkZ2V0TGFiZWw6IHN0cmluZ1xuICB3cmFwOiBib29sZWFuXG4gIG1pblNpemU6IFNpemVcbiAgZGVmYXVsdFNpemU6IFNpemVcbiAgcXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgZGVmYXVsdFBhZ2VTaXplPzogbnVtYmVyXG4gIGluaXRpYWxRdWVyeVZhbHVlPzogeyBzaG9ydElkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfVxuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxufVxuXG5jb25zdCBTUEFDRSA9IDhcblxuY29uc3Qgc3R5bGUgPSBjc3NgXG4gID4gZGl2IHtcbiAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgfVxuYFxuXG4vLyBzaG93IHRhc2sgbGFiZWwgYW5kIGFuIGFycm93IHRvIHRoZSB0YXNrIGNvbnRlbnRcbmV4cG9ydCBmdW5jdGlvbiBUYXNrTGlzdElubGluZSAocHJvcHM6IFF1ZXJ5VGFza0xpc3RQcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5SXRlbXMsIHdpZGdldElkLCBtaW5TaXplLCBkZWZhdWx0U2l6ZSwgZGVmYXVsdFBhZ2VTaXplLCB3aWRnZXRMYWJlbCwgd3JhcCA9IGZhbHNlIH0gPSBwcm9wc1xuICBjb25zdCBjb250YWluZXJSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KHVuZGVmaW5lZClcbiAgY29uc3QgY29udGFpbmVyV2lkdGhSZWYgPSBSZWFjdC51c2VSZWY8bnVtYmVyPigwKVxuICBjb25zdCBjb250ZW50V2lkdGhSZWYgPSBSZWFjdC51c2VSZWY8eyBba2V5OiBzdHJpbmddOiBudW1iZXIgfT4oe30pXG4gIGNvbnN0IFtudW1PZkV4cGFuZGVkLCBzZXROdW1PZkV4cGFuZGVkXSA9IFJlYWN0LnVzZVN0YXRlKHF1ZXJ5SXRlbXMubGVuZ3RoKVxuICBjb25zdCBbb3BlbmVkUG9wcGVyLCBzZXRPcGVuZWRQb3BwZXJdID0gUmVhY3QudXNlU3RhdGUoLTEpXG4gIGNvbnN0IHJlc2l6ZU9ic2VydmVyUmVmID0gUmVhY3QudXNlUmVmPFJlc2l6ZU9ic2VydmVyPihudWxsKVxuXG4gIGNvbnN0IGFkanVzdENvbnRlbnQgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgbGV0IHRvdGFsID0gMFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtT2ZFeHBhbmRlZDsgaSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gcXVlcnlJdGVtc1tpXVxuICAgICAgY29uc3QgaXRlbVdpZHRoID0gY29udGVudFdpZHRoUmVmLmN1cnJlbnRbaXRlbS5jb25maWdJZF1cbiAgICAgIGlmIChpdGVtV2lkdGggPiAwKSB7XG4gICAgICAgIHRvdGFsICs9IGl0ZW1XaWR0aCArIFNQQUNFXG4gICAgICAgIGlmICh0b3RhbCA+PSBjb250YWluZXJXaWR0aFJlZi5jdXJyZW50ICYmIG51bU9mRXhwYW5kZWQgIT09IGkpIHtcbiAgICAgICAgICBzZXROdW1PZkV4cGFuZGVkKGkpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAvLyBjb250ZW50IHdpZHRoIG5vdCByZWFkeVxuICAgICAgfVxuICAgIH1cbiAgICBzZXROdW1PZkV4cGFuZGVkKHF1ZXJ5SXRlbXMubGVuZ3RoKVxuICB9LCBbbnVtT2ZFeHBhbmRlZCwgcXVlcnlJdGVtc10pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudCkge1xuICAgICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudC5kaXNjb25uZWN0KClcbiAgICB9XG4gICAgLy8gYmluZCB3aXRoIHRoZSBuZXcgZXZlbnQgaGFuZGxlclxuICAgIHJlc2l6ZU9ic2VydmVyUmVmLmN1cnJlbnQgPSBuZXcgUmVzaXplT2JzZXJ2ZXIobG9kYXNoLnRocm90dGxlKChlbnRyaWVzKSA9PiB7XG4gICAgICBjb25zdCB3aWR0aCA9IE1hdGgucm91bmQoZW50cmllc1swXS5jb250ZW50UmVjdC53aWR0aClcbiAgICAgIGlmIChjb250YWluZXJXaWR0aFJlZi5jdXJyZW50ICE9PSB3aWR0aCkge1xuICAgICAgICBjb250YWluZXJXaWR0aFJlZi5jdXJyZW50ID0gd2lkdGhcbiAgICAgICAgYWRqdXN0Q29udGVudCgpXG4gICAgICB9XG4gICAgfSwgMjAwKSlcbiAgICByZXNpemVPYnNlcnZlclJlZi5jdXJyZW50Lm9ic2VydmUoY29udGFpbmVyUmVmLmN1cnJlbnQpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmVzaXplT2JzZXJ2ZXJSZWYuY3VycmVudC5kaXNjb25uZWN0KClcbiAgICB9XG4gIH0sIFthZGp1c3RDb250ZW50XSlcblxuICBob29rcy51c2VFZmZlY3RPbmNlKCgpID0+IHtcbiAgICBjb250YWluZXJXaWR0aFJlZi5jdXJyZW50ID0gY29udGFpbmVyUmVmLmN1cnJlbnQ/LmNsaWVudFdpZHRoXG4gICAgYWRqdXN0Q29udGVudCgpXG4gIH0pXG5cbiAgY29uc3QgaGFuZGxlSXRlbVdpZHRoQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZGV4OiBudW1iZXIsIHdpZHRoOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBxdWVyeUl0ZW0gPSBxdWVyeUl0ZW1zW2luZGV4XVxuICAgIGlmIChjb250ZW50V2lkdGhSZWYuY3VycmVudFtxdWVyeUl0ZW0uY29uZmlnSWRdICE9PSB3aWR0aCkge1xuICAgICAgY29udGVudFdpZHRoUmVmLmN1cnJlbnRbcXVlcnlJdGVtLmNvbmZpZ0lkXSA9IHdpZHRoXG4gICAgICBhZGp1c3RDb250ZW50KClcbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW1zLCBhZGp1c3RDb250ZW50XSlcblxuICBjb25zdCBoYW5kbGVQb3BwZXJPcGVuZWRDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5kZXg6IG51bWJlciwgaXNPcGVuOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKGlzT3Blbikge1xuICAgICAgc2V0T3BlbmVkUG9wcGVyKGluZGV4KVxuICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IG9wZW5lZFBvcHBlcikge1xuICAgICAgLy8gY3VycmVudCBwb3BwZXIgaXMgY2xvc2VkXG4gICAgICBzZXRPcGVuZWRQb3BwZXIoLTEpXG4gICAgfVxuICB9LCBbb3BlbmVkUG9wcGVyXSlcblxuICBjb25zdCBbZXhwYW5kZWRBcnJheSwgbm9uRXhwYW5kZWRBcnJheV0gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBleHBhbmRlZEFycmF5ID0gW11cbiAgICBjb25zdCBub25FeHBhbmRlZEFycmF5ID0gW11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXJ5SXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpIDwgbnVtT2ZFeHBhbmRlZCkge1xuICAgICAgICBleHBhbmRlZEFycmF5LnB1c2gocXVlcnlJdGVtc1tpXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vbkV4cGFuZGVkQXJyYXkucHVzaChxdWVyeUl0ZW1zW2ldKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW2V4cGFuZGVkQXJyYXksIG5vbkV4cGFuZGVkQXJyYXldXG4gIH0sIFtxdWVyeUl0ZW1zLCBudW1PZkV4cGFuZGVkXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgcmVmPXtjb250YWluZXJSZWZ9IGNzcz17c3R5bGV9IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncnVudGltZS1xdWVyeV9fcXVlcnktbGlzdCBoLTEwMCBkLWZsZXgnLCB7ICdmbGV4LXdyYXAnOiB3cmFwLCAnYWxpZ24tY29udGVudC1zdGFydCc6IHdyYXAgfSl9PlxuICAgICAge2V4cGFuZGVkQXJyYXkubWFwKChxdWVyeUl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9RVUVSWV9JVEVNLCBxdWVyeUl0ZW0pXG4gICAgICAgIHJldHVybiA8VGFza0xpc3RQb3BwZXJXcmFwcGVyXG4gICAgICAgICAgaWQ9e2luZGV4fVxuICAgICAgICAgIGtleT17Y3VycmVudEl0ZW0uY29uZmlnSWR9XG4gICAgICAgICAgaWNvbj17Y3VycmVudEl0ZW0uaWNvbn1cbiAgICAgICAgICBidXR0b25UeXBlPSdkZWZhdWx0J1xuICAgICAgICAgIGxhYmVsPXtjdXJyZW50SXRlbS5kaXNwbGF5TGFiZWwgPyBjdXJyZW50SXRlbS5uYW1lIDogdW5kZWZpbmVkfVxuICAgICAgICAgIHBvcHBlclRpdGxlPXtjdXJyZW50SXRlbS5uYW1lfVxuICAgICAgICAgIG9uV2lkdGhDaGFuZ2U9e2hhbmRsZUl0ZW1XaWR0aENoYW5nZX1cbiAgICAgICAgICBtaW5TaXplPXttaW5TaXplfVxuICAgICAgICAgIGRlZmF1bHRTaXplPXtkZWZhdWx0U2l6ZX1cbiAgICAgICAgICBvbk9wZW5lZENoYW5nZT17aGFuZGxlUG9wcGVyT3BlbmVkQ2hhbmdlfVxuICAgICAgICAgIGZvcmNlQ2xvc2U9e29wZW5lZFBvcHBlciA+PSAwICYmIG9wZW5lZFBvcHBlciAhPT0gaW5kZXh9XG4gICAgICAgID5cbiAgICAgICAgICA8UXVlcnlUYXNrXG4gICAgICAgICAgICB3aWRnZXRJZD17d2lkZ2V0SWR9XG4gICAgICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgICAgICB0b3RhbD17MX1cbiAgICAgICAgICAgIGlzSW5Qb3BwZXJcbiAgICAgICAgICAgIHF1ZXJ5SXRlbT17Y3VycmVudEl0ZW19XG4gICAgICAgICAgICB3cmFwcGVkSW5Qb3BwZXI9e3RydWV9XG4gICAgICAgICAgICBjbGFzc05hbWU9J3BiLTQnXG4gICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2RlZmF1bHRQYWdlU2l6ZX1cbiAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtjdXJyZW50SXRlbS5zaG9ydElkID09PSBwcm9wcy5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCA/IHByb3BzLmluaXRpYWxRdWVyeVZhbHVlLnZhbHVlIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17cHJvcHMub25IYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ9e2N1cnJlbnRJdGVtLnNob3J0SWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9UYXNrTGlzdFBvcHBlcldyYXBwZXI+XG4gICAgICB9KX1cblxuICAgICAge25vbkV4cGFuZGVkQXJyYXkubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgIDxUYXNrTGlzdFBvcHBlcldyYXBwZXJcbiAgICAgICAgICBpZD17ZXhwYW5kZWRBcnJheS5sZW5ndGggKyAxfVxuICAgICAgICAgIGljb249e2ljb25NYXAuaWNvbk1vcmV9XG4gICAgICAgICAgbWluU2l6ZT17bWluU2l6ZX1cbiAgICAgICAgICBidXR0b25UeXBlPSdkZWZhdWx0J1xuICAgICAgICAgIHBvcHBlclRpdGxlPXt3aWRnZXRMYWJlbH1cbiAgICAgICAgICBkZWZhdWx0U2l6ZT17ZGVmYXVsdFNpemV9XG4gICAgICAgICAgb25PcGVuZWRDaGFuZ2U9e2hhbmRsZVBvcHBlck9wZW5lZENoYW5nZX1cbiAgICAgICAgICBmb3JjZUNsb3NlPXtvcGVuZWRQb3BwZXIgPj0gMCAmJiBvcGVuZWRQb3BwZXIgIT09IGV4cGFuZGVkQXJyYXkubGVuZ3RoICsgMX1cbiAgICAgICAgPlxuICAgICAgICAgIDxRdWVyeVRhc2tMaXN0IHdpZGdldElkPXt3aWRnZXRJZH0gaXNJblBvcHBlciBkZWZhdWx0UGFnZVNpemU9e2RlZmF1bHRQYWdlU2l6ZX0gcXVlcnlJdGVtcz17bm9uRXhwYW5kZWRBcnJheSBhcyBhbnl9IGNsYXNzTmFtZT0ncGItNCcgaW5pdGlhbFF1ZXJ5VmFsdWU9e3Byb3BzLmluaXRpYWxRdWVyeVZhbHVlfSBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtwcm9wcy5vbkhhc2hQYXJhbWV0ZXJVc2VkfSAvPlxuICAgICAgICA8L1Rhc2tMaXN0UG9wcGVyV3JhcHBlcj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4LCBjc3MsIFJlYWN0LCB0eXBlIEljb25SZXN1bHQsIHR5cGUgSW1tdXRhYmxlT2JqZWN0LCBsb2Rhc2gsIGNsYXNzTmFtZXMsIGhvb2tzLCBpc0tleWJvYXJkTW9kZSwgZm9jdXNFbGVtZW50SW5LZXlib2FyZE1vZGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIEljb24sIE1vYmlsZVBhbmVsLCB0eXBlIFNpemUsIHR5cGUgQnV0dG9uVHlwZSwgRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTUywgRmxvYXRpbmdQYW5lbCwgdHlwZSBTaGlmdE9wdGlvbnMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgV0lER0VUX1ZFUlNJT04gfSBmcm9tICcuLi92ZXJzaW9uJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tMaXN0UG9wcGVyV3JhcHBlclByb3BzIHtcbiAgaWQ6IG51bWJlclxuICBpY29uPzogc3RyaW5nIHwgSW1tdXRhYmxlT2JqZWN0PEljb25SZXN1bHQ+XG4gIGxhYmVsPzogc3RyaW5nXG4gIGZvcmNlQ2xvc2U/OiBib29sZWFuXG4gIHBvcHBlclRpdGxlPzogc3RyaW5nXG4gIGJ1dHRvblR5cGU/OiBCdXR0b25UeXBlXG4gIG9uV2lkdGhDaGFuZ2U/OiAoaWQ6IG51bWJlciwgd2lkdGg6IG51bWJlcikgPT4gdm9pZFxuICBvbk9wZW5lZENoYW5nZT86IChpZDogbnVtYmVyLCBpc09wZW46IGJvb2xlYW4pID0+IHZvaWRcbiAgbWluU2l6ZTogU2l6ZVxuICBkZWZhdWx0U2l6ZTogU2l6ZVxuICBjaGlsZHJlbjogUmVhY3QuUmVhY3RFbGVtZW50PGFueT5cbn1cblxuY29uc3Qgc2hpZnRPcHRpb25zOiBTaGlmdE9wdGlvbnMgPSB7IHBhZGRpbmc6IDEgfVxuXG5leHBvcnQgZnVuY3Rpb24gVGFza0xpc3RQb3BwZXJXcmFwcGVyIChwcm9wczogVGFza0xpc3RQb3BwZXJXcmFwcGVyUHJvcHMpIHtcbiAgY29uc3QgeyBpZCwgaWNvbiwgbGFiZWwsIGZvcmNlQ2xvc2UsIG9uT3BlbmVkQ2hhbmdlLCBwb3BwZXJUaXRsZSwgbWluU2l6ZSwgZGVmYXVsdFNpemUsIG9uV2lkdGhDaGFuZ2UsIGJ1dHRvblR5cGUgPSAndGVydGlhcnknLCBjaGlsZHJlbiB9ID0gcHJvcHNcbiAgY29uc3QgaWNvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4odW5kZWZpbmVkKVxuICBjb25zdCB3aWR0aFJlZiA9IFJlYWN0LnVzZVJlZigwKVxuICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtwb3BwZXJWZXJzaW9uLCBzZXRQb3BwZXJWZXJzaW9uXSA9IFJlYWN0LnVzZVN0YXRlKDApXG4gIGNvbnN0IGlzTW9iaWxlID0gaG9va3MudXNlQ2hlY2tTbWFsbEJyb3dzZXJTaXplTW9kZSgpXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZm9yY2VDbG9zZSkge1xuICAgICAgc2V0SXNPcGVuKGZhbHNlKVxuICAgIH1cbiAgfSwgW2ZvcmNlQ2xvc2VdKVxuXG4gIGhvb2tzLnVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygb25XaWR0aENoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgd2lkdGhSZWYuY3VycmVudCA9IE1hdGgucm91bmQoaWNvblJlZi5jdXJyZW50LmNsaWVudFdpZHRoKVxuICAgICAgb25XaWR0aENoYW5nZShpZCwgd2lkdGhSZWYuY3VycmVudClcbiAgICAgIGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGxvZGFzaC50aHJvdHRsZSgoZW50cmllcykgPT4ge1xuICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGgucm91bmQoZW50cmllc1swXS5jb250ZW50UmVjdC53aWR0aClcbiAgICAgICAgaWYgKHdpZHRoUmVmLmN1cnJlbnQgIT09IHdpZHRoKSB7XG4gICAgICAgICAgd2lkdGhSZWYuY3VycmVudCA9IHdpZHRoXG4gICAgICAgICAgb25XaWR0aENoYW5nZShpZCwgd2lkdGgpXG4gICAgICAgIH1cbiAgICAgIH0sIDIwMCkpXG4gICAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKGljb25SZWYuY3VycmVudClcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgcmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IHRvZ2dsZVBvcHBlciA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIG9uT3BlbmVkQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvbk9wZW5lZENoYW5nZShpZCwgIWlzT3BlbilcbiAgICB9XG4gICAgc2V0SXNPcGVuKCFpc09wZW4pXG4gICAgc2V0UG9wcGVyVmVyc2lvbihwb3BwZXJWZXJzaW9uICsgMSlcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKGlzS2V5Ym9hcmRNb2RlKCkpIHtcbiAgICAgICAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShpY29uUmVmLmN1cnJlbnQpXG4gICAgICAgIH1cbiAgICAgIH0sIDIwMClcbiAgICB9XG4gIH0sIFtpZCwgaXNPcGVuLCBwb3BwZXJWZXJzaW9uLCBvbk9wZW5lZENoYW5nZV0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0ncnVudGltZS1xdWVyeV9fd2lkZ2V0LXBvcHBlcic+XG4gICAgICA8QnV0dG9uXG4gICAgICAgIHRpdGxlPXtsYWJlbH1cbiAgICAgICAgYXJpYS1sYWJlbD17bGFiZWx9XG4gICAgICAgIGljb24gc2l6ZT0nc20nXG4gICAgICAgIHZhcmlhbnQ9e2J1dHRvblR5cGUgPT09ICd0ZXJ0aWFyeScgPyAndGV4dCcgOiB1bmRlZmluZWR9XG4gICAgICAgIGNvbG9yPXtidXR0b25UeXBlID09PSAndGVydGlhcnknID8gJ2luaGVyaXQnIDogdW5kZWZpbmVkfVxuICAgICAgICB0eXBlPXtidXR0b25UeXBlID09PSAndGVydGlhcnknID8gdW5kZWZpbmVkIDogYnV0dG9uVHlwZX1cbiAgICAgICAgcmVmPXtpY29uUmVmfVxuICAgICAgICBvbkNsaWNrPXt0b2dnbGVQb3BwZXJ9XG4gICAgICA+XG4gICAgICAgIHtpY29uICYmIDxJY29uXG4gICAgICAgICAgc2l6ZT17MTZ9XG4gICAgICAgICAgey4uLih0eXBlb2YgaWNvbiA9PT0gJ3N0cmluZycgPyB7IGljb24gfSA6IHsgaWNvbjogaWNvbi5zdmcsIGNvbG9yOiBidXR0b25UeXBlID09PSAndGVydGlhcnknID8gdW5kZWZpbmVkIDogaWNvbi5wcm9wZXJ0aWVzLmNvbG9yIH0pfVxuICAgICAgICAvPn1cbiAgICAgICAge2xhYmVsICYmIDxkaXZcbiAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICAgICAgICAgICAgLXdlYmtpdC1saW5lLWNsYW1wOiAyO1xuICAgICAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcbiAgICAgICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gICAgICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICAgICAgICBsaW5lLWhlaWdodDogMS4yO1xuICAgICAgICAgIGB9XG4gICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKHsgJ21sLTInOiBpY29uICE9IG51bGwgfSl9PntsYWJlbH08L2Rpdj59XG4gICAgICA8L0J1dHRvbj5cbiAgICAgIHtpc01vYmlsZVxuICAgICAgICA/IDxNb2JpbGVQYW5lbCBvcGVuPXtpc09wZW59IHRpdGxlPXtwb3BwZXJUaXRsZX0gb25DbG9zZT17dG9nZ2xlUG9wcGVyfT5cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDFyZW07IC8qIFNjb3BlZCBwYWRkaW5nIHRvIHNwYWNlIGNvbnRlbnQgZnJvbSBmb290ZXIgKi9cbiAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgey8qIFN0YXRpb25hcnkgZm9vdGVyICovfVxuICAgICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1zeXMtY29sb3ItZGl2aWRlci1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN5cy1jb2xvci1zdXJmYWNlLXBhcGVyKTtcbiAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXRlcnRpYXJ5KTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCIgXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIxNiAxOCAyMiAxMiAxNiA2XCIvPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiOCA2IDIgMTIgOCAxOFwiLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgUXVlcnlTaW1wbGUgYnkgTWFwU2ltcGxlXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuN3JlbTtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICB2e1dJREdFVF9WRVJTSU9OfVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L01vYmlsZVBhbmVsPlxuICAgICAgICA6IDxGbG9hdGluZ1BhbmVsXG4gICAgICAgICAgICBjbGFzc05hbWU9J3VpLXVuaXQtcG9wcGVyIHVpLXVuaXQtcG9wcGVyX2stYXJyYW5nZW1lbnQtaWNvbiBmbGV4LWdyb3ctMSdcbiAgICAgICAgICAgIGhlYWRlckNsYXNzTmFtZT17Rk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU31cbiAgICAgICAgICAgIG9wZW49e2lzT3Blbn1cbiAgICAgICAgICAgIG9uSGVhZGVyQ2xvc2U9e3RvZ2dsZVBvcHBlcn1cbiAgICAgICAgICAgIHRvZ2dsZT17dG9nZ2xlUG9wcGVyfVxuICAgICAgICAgICAgaGVhZGVyVGl0bGU9e3BvcHBlclRpdGxlfVxuICAgICAgICAgICAgbWluU2l6ZT17bWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtkZWZhdWx0U2l6ZX1cbiAgICAgICAgICAgIGRyYWdCb3VuZHM9J2JvZHknXG4gICAgICAgICAgICB2ZXJzaW9uPXtwb3BwZXJWZXJzaW9ufVxuICAgICAgICAgICAgcmVmZXJlbmNlPXtpY29uUmVmfVxuICAgICAgICAgICAgcGxhY2VtZW50PSdib3R0b20tc3RhcnQnXG4gICAgICAgICAgICBzaGlmdE9wdGlvbnM9e3NoaWZ0T3B0aW9uc31cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxcmVtOyAvKiBTY29wZWQgcGFkZGluZyB0byBzcGFjZSBjb250ZW50IGZyb20gZm9vdGVyICovXG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsvKiBTdGF0aW9uYXJ5IGZvb3RlciAqL31cbiAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tc3lzLWNvbG9yLWRpdmlkZXItc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuMDI1ZW07XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgIHsvKiBDb2RlL09wZW4gU291cmNlIFN5bWJvbCAqL31cbiAgICAgICAgICAgICAgICAgIDxzdmcgXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIiBcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTYgMTggMjIgMTIgMTYgNlwiLz5cbiAgICAgICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIFF1ZXJ5U2ltcGxlIGJ5IE1hcFNpbXBsZVxuICAgICAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07XG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgdntXSURHRVRfVkVSU0lPTn1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9GbG9hdGluZ1BhbmVsPlxuICAgICAgfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY3NzLCBSZWFjdCwgdHlwZSBJbW11dGFibGVBcnJheSwgSW1tdXRhYmxlLCB0eXBlIEltbXV0YWJsZU9iamVjdCwgaG9va3MsIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgdHlwZSBGZWF0dXJlRGF0YVJlY29yZCwgdHlwZSBEYXRhU291cmNlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgU2VsZWN0IH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB0eXBlIHsgUXVlcnlJdGVtVHlwZSwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IFF1ZXJ5VGFzayB9IGZyb20gJy4vcXVlcnktdGFzaydcbmltcG9ydCB7IEZPQ1VTQUJMRV9DT05UQUlORVJfQ0xBU1MgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlcyBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0xpc3RQcm9wcyB7XG4gIHdpZGdldElkOiBzdHJpbmdcbiAgcXVlcnlJdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT5cbiAgaXNJblBvcHBlcj86IGJvb2xlYW5cbiAgZGVmYXVsdFBhZ2VTaXplPzogbnVtYmVyXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH1cbiAgb25IYXNoUGFyYW1ldGVyVXNlZD86IChzaG9ydElkOiBzdHJpbmcpID0+IHZvaWRcbiAgcmVzdWx0c01vZGU/OiBTZWxlY3Rpb25UeXBlXG4gIG9uUmVzdWx0c01vZGVDaGFuZ2U/OiAobW9kZTogU2VsZWN0aW9uVHlwZSkgPT4gdm9pZFxuICBhY2N1bXVsYXRlZFJlY29yZHM/OiBGZWF0dXJlRGF0YVJlY29yZFtdXG4gIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPzogKHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10pID0+IHZvaWRcbiAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD86IGJvb2xlYW5cbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4gIG1hcFZpZXc/OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXdcbiAgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcj86IChvdXRwdXREUzogRGF0YVNvdXJjZSkgPT4gUHJvbWlzZTx2b2lkPlxuICBvbkNsZWFyR3JhcGhpY3NMYXllcj86ICgpID0+IHZvaWRcbiAgYWN0aXZlVGFiPzogJ3F1ZXJ5JyB8ICdyZXN1bHRzJ1xuICBvblRhYkNoYW5nZT86ICh0YWI6ICdxdWVyeScgfCAncmVzdWx0cycpID0+IHZvaWRcbn1cblxuaW50ZXJmYWNlIEdyb3VwZWRRdWVyaWVzIHtcbiAgZ3JvdXBzOiB7IFtncm91cElkOiBzdHJpbmddOiB7IGl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPiwgZGlzcGxheU5hbWU6IHN0cmluZywgaWNvbj86IGFueSB9IH1cbiAgdW5ncm91cGVkOiBBcnJheTx7IGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPiwgaW5kZXg6IG51bWJlciB9PlxuICBncm91cE9yZGVyOiBzdHJpbmdbXVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gc29ydCBxdWVyaWVzIGJ5IGRpc3BsYXkgb3JkZXIgKGxvd2VyIG51bWJlcnMgYXBwZWFyIGZpcnN0KVxuLy8gUXVlcmllcyB3aXRob3V0IG9yZGVyIG1haW50YWluIHRoZWlyIG9yaWdpbmFsIHJlbGF0aXZlIHBvc2l0aW9uc1xuZnVuY3Rpb24gc29ydFF1ZXJ5SXRlbXNCeU9yZGVyKHF1ZXJ5SXRlbXM6IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+KTogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4ge1xuICAvLyBIYW5kbGUgbnVsbC91bmRlZmluZWQvZW1wdHkgY2FzZXNcbiAgaWYgKCFxdWVyeUl0ZW1zIHx8IHF1ZXJ5SXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHF1ZXJ5SXRlbXMgfHwgSW1tdXRhYmxlKFtdKVxuICB9XG4gIFxuICAvLyBTYWZlbHkgY29udmVydCB0byByZWd1bGFyIGFycmF5IGZvciBzb3J0aW5nXG4gIC8vIEhhbmRsZSBib3RoIEltbXV0YWJsZUFycmF5IChoYXMgdG9BcnJheSBtZXRob2QpIGFuZCByZWd1bGFyIGFycmF5c1xuICBjb25zdCBpdGVtc0FycmF5ID0gKHF1ZXJ5SXRlbXMgJiYgdHlwZW9mIHF1ZXJ5SXRlbXMudG9BcnJheSA9PT0gJ2Z1bmN0aW9uJykgXG4gICAgPyBxdWVyeUl0ZW1zLnRvQXJyYXkoKSBcbiAgICA6IChBcnJheS5pc0FycmF5KHF1ZXJ5SXRlbXMpID8gcXVlcnlJdGVtcyA6IFtdKVxuICBcbiAgY29uc3QgaXRlbXNXaXRoSW5kZXggPSBpdGVtc0FycmF5Lm1hcCgoaXRlbSwgaW5kZXgpID0+ICh7IGl0ZW0sIG9yaWdpbmFsSW5kZXg6IGluZGV4IH0pKVxuICBpdGVtc1dpdGhJbmRleC5zb3J0KChhLCBiKSA9PiB7XG4gICAgY29uc3Qgb3JkZXJBID0gYS5pdGVtLm9yZGVyID8/IEluZmluaXR5XG4gICAgY29uc3Qgb3JkZXJCID0gYi5pdGVtLm9yZGVyID8/IEluZmluaXR5XG4gICAgaWYgKG9yZGVyQSAhPT0gb3JkZXJCKSB7XG4gICAgICByZXR1cm4gb3JkZXJBIC0gb3JkZXJCXG4gICAgfVxuICAgIC8vIElmIG9yZGVyIGlzIGVxdWFsIChib3RoIEluZmluaXR5IG9yIHNhbWUgbnVtYmVyKSwgbWFpbnRhaW4gb3JpZ2luYWwgaW5kZXggb3JkZXJcbiAgICByZXR1cm4gYS5vcmlnaW5hbEluZGV4IC0gYi5vcmlnaW5hbEluZGV4XG4gIH0pXG4gIHJldHVybiBJbW11dGFibGUoaXRlbXNXaXRoSW5kZXgubWFwKCh7IGl0ZW0gfSkgPT4gaXRlbSkpXG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBncm91cCBxdWVyaWVzIGJ5IGdyb3VwSWRcbmNvbnN0IGdyb3VwUXVlcmllcyA9IChxdWVyeUl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPik6IEdyb3VwZWRRdWVyaWVzID0+IHtcbiAgY29uc3QgZ3JvdXBzOiB7IFtncm91cElkOiBzdHJpbmddOiB7IGl0ZW1zOiBJbW11dGFibGVBcnJheTxRdWVyeUl0ZW1UeXBlPiwgZGlzcGxheU5hbWU6IHN0cmluZywgaWNvbj86IGFueSB9IH0gPSB7fVxuICBjb25zdCB1bmdyb3VwZWQ6IEFycmF5PHsgaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LCBpbmRleDogbnVtYmVyIH0+ID0gW11cbiAgY29uc3QgZ3JvdXBPcmRlcjogc3RyaW5nW10gPSBbXVxuICBjb25zdCBncm91cEluZGV4TWFwOiB7IFtncm91cElkOiBzdHJpbmddOiBudW1iZXIgfSA9IHt9XG4gIFxuICAvLyBGaXJzdCBwYXNzOiBjb2xsZWN0IGl0ZW1zIGluIHJlZ3VsYXIgYXJyYXlzXG4gIGNvbnN0IGdyb3VwSXRlbXNNYXA6IHsgW2dyb3VwSWQ6IHN0cmluZ106IFF1ZXJ5SXRlbVR5cGVbXSB9ID0ge31cblxuICBxdWVyeUl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgaWYgKGl0ZW0uZ3JvdXBJZCkge1xuICAgICAgaWYgKCFncm91cEl0ZW1zTWFwW2l0ZW0uZ3JvdXBJZF0pIHtcbiAgICAgICAgZ3JvdXBJdGVtc01hcFtpdGVtLmdyb3VwSWRdID0gW11cbiAgICAgICAgZ3JvdXBzW2l0ZW0uZ3JvdXBJZF0gPSB7XG4gICAgICAgICAgaXRlbXM6IEltbXV0YWJsZShbXSksXG4gICAgICAgICAgZGlzcGxheU5hbWU6IGl0ZW0uZ3JvdXBEaXNwbGF5TmFtZSB8fCBpdGVtLm5hbWUgfHwgYEdyb3VwICR7aXRlbS5ncm91cElkfWAsXG4gICAgICAgICAgaWNvbjogaXRlbS5pY29uXG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXBJbmRleE1hcFtpdGVtLmdyb3VwSWRdID0gaW5kZXhcbiAgICAgICAgZ3JvdXBPcmRlci5wdXNoKGl0ZW0uZ3JvdXBJZClcbiAgICAgIH1cbiAgICAgIGdyb3VwSXRlbXNNYXBbaXRlbS5ncm91cElkXS5wdXNoKGl0ZW0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHVuZ3JvdXBlZC5wdXNoKHsgaXRlbSwgaW5kZXggfSlcbiAgICB9XG4gIH0pXG5cbiAgLy8gU2Vjb25kIHBhc3M6IGNvbnZlcnQgcmVndWxhciBhcnJheXMgdG8gSW1tdXRhYmxlQXJyYXlzXG4gIE9iamVjdC5rZXlzKGdyb3VwSXRlbXNNYXApLmZvckVhY2goZ3JvdXBJZCA9PiB7XG4gICAgZ3JvdXBzW2dyb3VwSWRdLml0ZW1zID0gSW1tdXRhYmxlKGdyb3VwSXRlbXNNYXBbZ3JvdXBJZF0pXG4gIH0pXG5cbiAgcmV0dXJuIHsgZ3JvdXBzLCB1bmdyb3VwZWQsIGdyb3VwT3JkZXIgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGRpc3BsYXkgbmFtZSBmb3IgcXVlcnkgaW4gZHJvcGRvd25cbi8vIFVzZXM6IHNlYXJjaEFsaWFzIHx8IGppbXVGaWVsZE5hbWUgfHwgaXRlbS5uYW1lIHx8IGZhbGxiYWNrXG5jb25zdCBnZXRRdWVyeURpc3BsYXlOYW1lID0gKGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPik6IHN0cmluZyA9PiB7XG4gIC8vIEZpcnN0IHByaW9yaXR5OiBzZWFyY2hBbGlhcyBpZiBzZXRcbiAgaWYgKGl0ZW0uc2VhcmNoQWxpYXMpIHtcbiAgICByZXR1cm4gaXRlbS5zZWFyY2hBbGlhc1xuICB9XG4gIFxuICAvLyBTZWNvbmQgcHJpb3JpdHk6IGZpZWxkIG5hbWUgZnJvbSBTUUwgZXhwcmVzc2lvblxuICBjb25zdCBqaW11RmllbGROYW1lID0gaXRlbS5zcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy5qaW11RmllbGROYW1lXG4gIGlmIChqaW11RmllbGROYW1lKSB7XG4gICAgcmV0dXJuIGppbXVGaWVsZE5hbWVcbiAgfVxuICBcbiAgLy8gVGhpcmQgcHJpb3JpdHk6IGl0ZW0gbmFtZVxuICBpZiAoaXRlbS5uYW1lKSB7XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG4gIFxuICAvLyBGYWxsYmFja1xuICByZXR1cm4gJ1F1ZXJ5J1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUXVlcnlUYXNrTGlzdCAocHJvcHM6IFF1ZXJ5VGFza0xpc3RQcm9wcykge1xuICBjb25zdCB7IHF1ZXJ5SXRlbXMsIHdpZGdldElkLCBkZWZhdWx0UGFnZVNpemUsIGlzSW5Qb3BwZXIgPSBmYWxzZSwgY2xhc3NOYW1lID0gJycsIGluaXRpYWxRdWVyeVZhbHVlLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCByZXN1bHRzTW9kZSwgb25SZXN1bHRzTW9kZUNoYW5nZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllciwgbWFwVmlldywgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllciwgb25DbGVhckdyYXBoaWNzTGF5ZXIsIGFjdGl2ZVRhYiwgb25UYWJDaGFuZ2UgfSA9IHByb3BzXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2VzKVxuICBcbiAgLy8gU29ydCBxdWVyaWVzIGJ5IGRpc3BsYXkgb3JkZXIgYmVmb3JlIGdyb3VwaW5nXG4gIC8vIEhhbmRsZSBjYXNlIHdoZXJlIHF1ZXJ5SXRlbXMgbWlnaHQgYmUgdW5kZWZpbmVkL251bGwgb3Igbm90IGFuIEltbXV0YWJsZUFycmF5XG4gIGNvbnN0IHNvcnRlZFF1ZXJ5SXRlbXMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIXF1ZXJ5SXRlbXMpIHtcbiAgICAgIHJldHVybiBJbW11dGFibGUoW10pXG4gICAgfVxuICAgIHJldHVybiBzb3J0UXVlcnlJdGVtc0J5T3JkZXIocXVlcnlJdGVtcylcbiAgfSwgW3F1ZXJ5SXRlbXNdKVxuICBcbiAgY29uc3QgeyBncm91cHMsIHVuZ3JvdXBlZCwgZ3JvdXBPcmRlciB9ID0gUmVhY3QudXNlTWVtbygoKSA9PiBncm91cFF1ZXJpZXMoc29ydGVkUXVlcnlJdGVtcyksIFtzb3J0ZWRRdWVyeUl0ZW1zXSlcbiAgXG4gIC8vIFN0YXRlIHRvIHRyYWNrIHRoZSBjdXJyZW50IFVSTCBoYXNoIGFuZCBxdWVyeSBzdHJpbmdcbiAgY29uc3QgW3VybFBhcmFtcywgc2V0VXJsUGFyYW1zXSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+ICh7XG4gICAgaGFzaDogd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpLFxuICAgIHF1ZXJ5OiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKVxuICB9KSlcblxuICAvLyBMaXN0ZW4gZm9yIGhhc2hjaGFuZ2UgZXZlbnRzIHRvIHVwZGF0ZSBvdXIgbG9jYWwgc3RhdGVcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVVcmxDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAndXJsLWNoYW5nZS1kZXRlY3RlZC1pbi10YXNrLWxpc3QnLFxuICAgICAgICBuZXdIYXNoOiB3aW5kb3cubG9jYXRpb24uaGFzaCxcbiAgICAgICAgbmV3UXVlcnk6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHNldFVybFBhcmFtcyh7XG4gICAgICAgIGhhc2g6IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSxcbiAgICAgICAgcXVlcnk6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpXG4gICAgICB9KVxuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIGhhbmRsZVVybENoYW5nZSlcbiAgICAvLyBBbHNvIGxpc3RlbiBmb3IgcG9wc3RhdGUgaW4gY2FzZSBxdWVyeSBwYXJhbWV0ZXJzIGNoYW5nZSB3aXRob3V0IGhhc2ggY2hhbmdlXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgaGFuZGxlVXJsQ2hhbmdlKVxuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIGhhbmRsZVVybENoYW5nZSlcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIGhhbmRsZVVybENoYW5nZSlcbiAgICB9XG4gIH0sIFtdKVxuXG4gIC8vIERldGVybWluZSBpZiB3ZSBoYXZlIGFuIGluaXRpYWwgcXVlcnkgdmFsdWUgZnJvbSB0aGUgVVJMIGhhc2ggb3IgcXVlcnkgc3RyaW5nXG4gIGNvbnN0IGluaXRpYWxRdWVyeVZhbHVlRnJvbVVybCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHsgaGFzaCwgcXVlcnkgfSA9IHVybFBhcmFtc1xuICAgIFxuICAgIGNvbnN0IGhhc2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5KVxuICAgIFxuICAgIGNvbnN0IGFsbFF1ZXJ5SXRlbXMgPSBbLi4udW5ncm91cGVkLm1hcCh1ID0+IHUuaXRlbSksIC4uLk9iamVjdC52YWx1ZXMoZ3JvdXBzKS5mbGF0TWFwKGcgPT4gZy5pdGVtcyldXG4gICAgXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGFsbFF1ZXJ5SXRlbXMpIHtcbiAgICAgIGlmIChpdGVtLnNob3J0SWQpIHtcbiAgICAgICAgaWYgKGhhc2hQYXJhbXMuaGFzKGl0ZW0uc2hvcnRJZCkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2hvcnRJZDogaXRlbS5zaG9ydElkLFxuICAgICAgICAgICAgdmFsdWU6IGhhc2hQYXJhbXMuZ2V0KGl0ZW0uc2hvcnRJZClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXJ5UGFyYW1zLmhhcyhpdGVtLnNob3J0SWQpKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNob3J0SWQ6IGl0ZW0uc2hvcnRJZCxcbiAgICAgICAgICAgIHZhbHVlOiBxdWVyeVBhcmFtcy5nZXQoaXRlbS5zaG9ydElkKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9LCBbdW5ncm91cGVkLCBncm91cHMsIHVybFBhcmFtc10pXG5cbiAgLy8gVXNlIHRoZSBwcm9wIGluaXRpYWxRdWVyeVZhbHVlIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UgZmFsbGJhY2sgdG8gb3VyIG93biBVUkwgcGFyc2luZ1xuICBjb25zdCBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZSA9IGluaXRpYWxRdWVyeVZhbHVlIHx8IGluaXRpYWxRdWVyeVZhbHVlRnJvbVVybFxuXG4gIC8vIEZpbmQgdGhlIHF1ZXJ5IGl0ZW0gbWF0Y2hpbmcgdGhlIHNob3J0SWQgZnJvbSBVUkwgaGFzaFxuICBjb25zdCBtYXRjaGluZ1F1ZXJ5SW5kZXggPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBzaG9ydElkID0gZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWRcbiAgICBpZiAoIXNob3J0SWQpIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cbiAgICByZXR1cm4gc29ydGVkUXVlcnlJdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLnNob3J0SWQgPT09IHNob3J0SWQpXG4gIH0sIFtzb3J0ZWRRdWVyeUl0ZW1zLCBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZV0pXG4gIFxuICAvLyBEZXRlcm1pbmUgd2hpY2ggZ3JvdXAvdW5ncm91cGVkIGluZGV4IHRoZSBtYXRjaGluZyBxdWVyeSBpcyBhdFxuICBjb25zdCBnZXRRdWVyeVNlbGVjdGlvbiA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChtYXRjaGluZ1F1ZXJ5SW5kZXggPCAwKSByZXR1cm4gbnVsbFxuICAgIFxuICAgIGNvbnN0IGl0ZW0gPSBzb3J0ZWRRdWVyeUl0ZW1zW21hdGNoaW5nUXVlcnlJbmRleF1cbiAgICBpZiAoaXRlbS5ncm91cElkKSB7XG4gICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzW2l0ZW0uZ3JvdXBJZF0/Lml0ZW1zIHx8IEltbXV0YWJsZShbXSlcbiAgICAgIGNvbnN0IGluZGV4SW5Hcm91cCA9IGdyb3VwSXRlbXMuZmluZEluZGV4KHEgPT4gcS5jb25maWdJZCA9PT0gaXRlbS5jb25maWdJZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1xdWVyeS1mb3VuZC1pbi1ncm91cCcsXG4gICAgICAgIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgaW5kZXhJbkdyb3VwOiBpbmRleEluR3JvdXAgPj0gMCA/IGluZGV4SW5Hcm91cCA6IDAsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBpdGVtLnNob3J0SWRcbiAgICAgIH0pXG4gICAgICByZXR1cm4geyB0eXBlOiAnZ3JvdXAnIGFzIGNvbnN0LCBncm91cElkOiBpdGVtLmdyb3VwSWQsIGluZGV4OiBpbmRleEluR3JvdXAgPj0gMCA/IGluZGV4SW5Hcm91cCA6IDAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVbmdyb3VwZWQgcXVlcnlcbiAgICAgIGNvbnN0IGluZGV4SW5Vbmdyb3VwZWQgPSB1bmdyb3VwZWQuZmluZEluZGV4KCh7IGl0ZW06IHEgfSkgPT4gcS5jb25maWdJZCA9PT0gaXRlbS5jb25maWdJZClcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1xdWVyeS1mb3VuZC11bmdyb3VwZWQnLFxuICAgICAgICBpbmRleEluVW5ncm91cGVkOiBpbmRleEluVW5ncm91cGVkID49IDAgPyBpbmRleEluVW5ncm91cGVkIDogMCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5SXRlbVNob3J0SWQ6IGl0ZW0uc2hvcnRJZFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7IHR5cGU6ICd1bmdyb3VwZWQnIGFzIGNvbnN0LCBpbmRleDogaW5kZXhJblVuZ3JvdXBlZCA+PSAwID8gaW5kZXhJblVuZ3JvdXBlZCA6IDAgfVxuICAgIH1cbiAgfSwgW21hdGNoaW5nUXVlcnlJbmRleCwgc29ydGVkUXVlcnlJdGVtcywgZ3JvdXBzLCB1bmdyb3VwZWRdKVxuICBcbiAgLy8gSGVscGVyIHRvIGRldGVybWluZSBkZWZhdWx0IHNlbGVjdGlvbiBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyXG4gIGNvbnN0IGdldERlZmF1bHRTZWxlY3Rpb24gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBnZXRRdWVyeVNlbGVjdGlvblxuICAgIH1cbiAgICBcbiAgICAvLyBObyBoYXNoIHBhcmFtZXRlciAtIGRldGVybWluZSBkZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXJcbiAgICAvLyBDb21wYXJlIGZpcnN0IHVuZ3JvdXBlZCBxdWVyeSB2cyBmaXJzdCBxdWVyeSBpbiBmaXJzdCBncm91cFxuICAgIGNvbnN0IGZpcnN0VW5ncm91cGVkT3JkZXIgPSB1bmdyb3VwZWQubGVuZ3RoID4gMCA/ICh1bmdyb3VwZWRbMF0uaXRlbS5vcmRlciA/PyBJbmZpbml0eSkgOiBJbmZpbml0eVxuICAgIGNvbnN0IGZpcnN0R3JvdXBPcmRlciA9IGdyb3VwT3JkZXIubGVuZ3RoID4gMCAmJiBncm91cHNbZ3JvdXBPcmRlclswXV0/Lml0ZW1zPy5sZW5ndGggPiAwXG4gICAgICA/IChncm91cHNbZ3JvdXBPcmRlclswXV0uaXRlbXNbMF0ub3JkZXIgPz8gSW5maW5pdHkpXG4gICAgICA6IEluZmluaXR5XG4gICAgXG4gICAgLy8gU2VsZWN0IHdoaWNoZXZlciBoYXMgbG93ZXIgb3JkZXIgKG9yIGZpcnN0IGlmIGVxdWFsKVxuICAgIGlmIChmaXJzdFVuZ3JvdXBlZE9yZGVyIDwgZmlyc3RHcm91cE9yZGVyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAndW5ncm91cGVkJyBhcyBjb25zdCwgaW5kZXg6IDAgfVxuICAgIH0gZWxzZSBpZiAoZmlyc3RHcm91cE9yZGVyIDwgSW5maW5pdHkgfHwgZ3JvdXBPcmRlci5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAnZ3JvdXAnIGFzIGNvbnN0LCBncm91cElkOiBncm91cE9yZGVyWzBdLCBpbmRleDogMCB9XG4gICAgfSBlbHNlIGlmICh1bmdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ3VuZ3JvdXBlZCcgYXMgY29uc3QsIGluZGV4OiAwIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSwgW2dldFF1ZXJ5U2VsZWN0aW9uLCB1bmdyb3VwZWQsIGdyb3VwcywgZ3JvdXBPcmRlcl0pXG4gIFxuICAvLyBUcmFjayBzZWxlY3RlZCBxdWVyeSAtIGluaXRpYWxpemUgd2l0aCBtYXRjaGluZyBxdWVyeSBpZiBmb3VuZCBmcm9tIFVSTCBoYXNoLCBvciBkZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXJcbiAgY29uc3QgW3NlbGVjdGVkR3JvdXBJZCwgc2V0U2VsZWN0ZWRHcm91cElkXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZyB8IG51bGw+KCgpID0+IHtcbiAgICBpZiAoZ2V0RGVmYXVsdFNlbGVjdGlvbj8udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLWdyb3VwLXNlbGVjdGlvbicsXG4gICAgICAgIGdyb3VwSWQ6IGdldERlZmF1bHRTZWxlY3Rpb24uZ3JvdXBJZCxcbiAgICAgICAgbm90ZTogZ2V0UXVlcnlTZWxlY3Rpb24gPyAnSGFzaC1tYXRjaGVkJyA6ICdEZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXInXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldERlZmF1bHRTZWxlY3Rpb24uZ3JvdXBJZFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9KVxuICBjb25zdCBbc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIHNldFNlbGVjdGVkR3JvdXBRdWVyeUluZGV4XSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IHtcbiAgICBpZiAoZ2V0RGVmYXVsdFNlbGVjdGlvbj8udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsLWdyb3VwLXF1ZXJ5LWluZGV4JyxcbiAgICAgICAgaW5kZXg6IGdldERlZmF1bHRTZWxlY3Rpb24uaW5kZXgsXG4gICAgICAgIG5vdGU6IGdldFF1ZXJ5U2VsZWN0aW9uID8gJ0hhc2gtbWF0Y2hlZCcgOiAnRGVmYXVsdCBiYXNlZCBvbiBkaXNwbGF5IG9yZGVyJ1xuICAgICAgfSlcbiAgICAgIHJldHVybiBnZXREZWZhdWx0U2VsZWN0aW9uLmluZGV4XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH0pXG4gIGNvbnN0IFtzZWxlY3RlZFVuZ3JvdXBlZEluZGV4LCBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4XSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IHtcbiAgICBpZiAoZ2V0RGVmYXVsdFNlbGVjdGlvbj8udHlwZSA9PT0gJ3VuZ3JvdXBlZCcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbC11bmdyb3VwZWQtaW5kZXgnLFxuICAgICAgICBpbmRleDogZ2V0RGVmYXVsdFNlbGVjdGlvbi5pbmRleCxcbiAgICAgICAgbm90ZTogZ2V0UXVlcnlTZWxlY3Rpb24gPyAnSGFzaC1tYXRjaGVkJyA6ICdEZWZhdWx0IGJhc2VkIG9uIGRpc3BsYXkgb3JkZXInXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGdldERlZmF1bHRTZWxlY3Rpb24uaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfSlcbiAgXG4gIC8vIFVwZGF0ZSBzZWxlY3Rpb24gd2hlbiBpbml0aWFsUXVlcnlWYWx1ZSBjaGFuZ2VzIChlLmcuLCB3aGVuIFVSTCBoYXNoIGlzIGRldGVjdGVkKVxuICAvLyBXZSBvbmx5IHdhbnQgdG8gdXBkYXRlIGJhc2VkIG9uIHRoZSBoYXNoIGlmIG9uZSBpcyBQUkVTRU5ULlxuICAvLyBJZiB0aGUgaGFzaCBpcyByZW1vdmVkIChpbml0aWFsUXVlcnlWYWx1ZSBiZWNvbWVzIG51bGwpLCB3ZSBET04nVCB3YW50IHRvIHJlc2V0IHRvIGRlZmF1bHQuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGdldFF1ZXJ5U2VsZWN0aW9uKSB7XG4gICAgICAvLyBIYXNoIHBhcmFtZXRlciBtYXRjaGVkIC0gdXNlIHRoYXQgc2VsZWN0aW9uIGFuZCBTVEFZIFRIRVJFXG4gICAgICBpZiAoZ2V0UXVlcnlTZWxlY3Rpb24udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWNoYW5nZWQtdG8tZ3JvdXAtZnJvbS1oYXNoJyxcbiAgICAgICAgICBncm91cElkOiBnZXRRdWVyeVNlbGVjdGlvbi5ncm91cElkLFxuICAgICAgICAgIGluZGV4OiBnZXRRdWVyeVNlbGVjdGlvbi5pbmRleCxcbiAgICAgICAgICBub3RlOiAnU3RpY2t5IHNlbGVjdGlvbiBmcm9tIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICB9KVxuICAgICAgICBzZXRTZWxlY3RlZEdyb3VwSWQoZ2V0UXVlcnlTZWxlY3Rpb24uZ3JvdXBJZClcbiAgICAgICAgc2V0U2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgoZ2V0UXVlcnlTZWxlY3Rpb24uaW5kZXgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgIGV2ZW50OiAnc2VsZWN0aW9uLWNoYW5nZWQtdG8tdW5ncm91cGVkLWZyb20taGFzaCcsXG4gICAgICAgICAgaW5kZXg6IGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4LFxuICAgICAgICAgIG5vdGU6ICdTdGlja3kgc2VsZWN0aW9uIGZyb20gaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgIH0pXG4gICAgICAgIHNldFNlbGVjdGVkR3JvdXBJZChudWxsKVxuICAgICAgICBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGdldFF1ZXJ5U2VsZWN0aW9uLmluZGV4KVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2dldFF1ZXJ5U2VsZWN0aW9uXSlcbiAgXG4gIC8vIEdldCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHF1ZXJ5IGl0ZW1cbiAgY29uc3QgZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0gPSAoKTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+ID0+IHtcbiAgICAvLyBQUklPUklUWSAxOiBVc2UgY3VycmVudCBzdGF0ZSBzZWxlY3Rpb25cbiAgICAvLyBUaGUgc3RhdGUgaXMgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgaGFzaCBtYXRjaCAoaWYgcHJlc2VudCkgb3IgZGVmYXVsdCBvcmRlcixcbiAgICAvLyBhbmQgdXBkYXRlZCB2aWEgdXNlRWZmZWN0IGlmIHRoZSBoYXNoIGNoYW5nZXMgbGF0ZXIuXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAnZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0tc3RhdGUtc2VsZWN0aW9uJyxcbiAgICAgIHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgIGhhc1NlbGVjdGVkR3JvdXA6IHNlbGVjdGVkR3JvdXBJZCAmJiBncm91cHNbc2VsZWN0ZWRHcm91cElkXSxcbiAgICAgIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LFxuICAgICAgc2VsZWN0ZWRVbmdyb3VwZWRJbmRleCxcbiAgICAgIHVuZ3JvdXBlZExlbmd0aDogdW5ncm91cGVkLmxlbmd0aCxcbiAgICAgIGdyb3VwT3JkZXJMZW5ndGg6IGdyb3VwT3JkZXIubGVuZ3RoLFxuICAgICAgbm90ZTogJ1VzaW5nIHN0YXRlIHNlbGVjdGlvbiAoaGFzaC1hd2FyZSknXG4gICAgfSlcbiAgICBcbiAgICAvLyBJZiBhIGdyb3VwIGlzIHNlbGVjdGVkLCBnZXQgcXVlcnkgZnJvbSB0aGF0IGdyb3VwXG4gICAgaWYgKHNlbGVjdGVkR3JvdXBJZCAmJiBncm91cHNbc2VsZWN0ZWRHcm91cElkXSkge1xuICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IGdyb3Vwc1tzZWxlY3RlZEdyb3VwSWRdLml0ZW1zXG4gICAgICBpZiAoZ3JvdXBJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDwgZ3JvdXBJdGVtcy5sZW5ndGggPyBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCA6IDBcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gZ3JvdXBJdGVtc1tpZHhdXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdzZWxlY3RlZC1xdWVyeS1mcm9tLWdyb3VwJyxcbiAgICAgICAgICBncm91cElkOiBzZWxlY3RlZEdyb3VwSWQsXG4gICAgICAgICAgZ3JvdXBRdWVyeUluZGV4OiBpZHgsXG4gICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHNlbGVjdGVkSXRlbS5jb25maWdJZCxcbiAgICAgICAgICBxdWVyeURpc3BsYXlOYW1lOiBnZXRRdWVyeURpc3BsYXlOYW1lKHNlbGVjdGVkSXRlbSlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBPdGhlcndpc2UsIGdldCBmcm9tIHVuZ3JvdXBlZCBxdWVyaWVzXG4gICAgaWYgKHVuZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpZHggPSBzZWxlY3RlZFVuZ3JvdXBlZEluZGV4IDwgdW5ncm91cGVkLmxlbmd0aCA/IHNlbGVjdGVkVW5ncm91cGVkSW5kZXggOiAwXG4gICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB1bmdyb3VwZWRbaWR4XS5pdGVtXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ3NlbGVjdGVkLXF1ZXJ5LWZyb20tdW5ncm91cGVkJyxcbiAgICAgICAgdW5ncm91cGVkSW5kZXg6IGlkeCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHNlbGVjdGVkSXRlbS5jb25maWdJZCxcbiAgICAgICAgcXVlcnlEaXNwbGF5TmFtZTogZ2V0UXVlcnlEaXNwbGF5TmFtZShzZWxlY3RlZEl0ZW0pXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbVxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byBmaXJzdCBxdWVyeSBpdGVtXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgIGV2ZW50OiAnc2VsZWN0ZWQtcXVlcnktZmFsbGJhY2snLFxuICAgICAgbm90ZTogJ05vIGdyb3VwcyBvciB1bmdyb3VwZWQgcXVlcmllcywgdXNpbmcgZmlyc3QgaXRlbSdcbiAgICB9KVxuICAgIHJldHVybiBzb3J0ZWRRdWVyeUl0ZW1zWzBdXG4gIH1cbiAgXG4gIGNvbnN0IHNlbGVjdGVkUXVlcnlJdGVtID0gZ2V0U2VsZWN0ZWRRdWVyeUl0ZW0oKVxuICBjb25zdCBzZWxlY3RlZFF1ZXJ5UmVhbEluZGV4ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHNvcnRlZFF1ZXJ5SXRlbXMuZmluZEluZGV4KHEgPT4gcS5jb25maWdJZCA9PT0gc2VsZWN0ZWRRdWVyeUl0ZW0uY29uZmlnSWQpXG4gIH0sIFtzb3J0ZWRRdWVyeUl0ZW1zLCBzZWxlY3RlZFF1ZXJ5SXRlbV0pXG4gIFxuICAvLyBJZiBvbmx5IG9uZSBxdWVyeSB0b3RhbCwgZG9uJ3Qgc2hvdyBkcm9wZG93blxuICBjb25zdCBzaG93RHJvcGRvd24gPSBzb3J0ZWRRdWVyeUl0ZW1zLmxlbmd0aCA+IDEgfHwgZ3JvdXBPcmRlci5sZW5ndGggPiAwXG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgcnVudGltZS1xdWVyeV9fcXVlcnktbGlzdCBoLTEwMCAke2NsYXNzTmFtZX1gfSBjc3M9e2Nzc2BcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgLnF1ZXJ5LXNlbGVjdG9yIHtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgfVxuICAgICAgLnF1ZXJ5LXNlbGVjdG9yLWxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICB9XG4gICAgICAucXVlcnktc2VsZWN0b3Igc2VsZWN0IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgICAucXVlcnktdGFzay1jb250YWluZXIge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIH1cbiAgICBgfT5cbiAgICAgIHsvKiBTZWFyY2ggTGF5ZXIgZHJvcGRvd24gbW92ZWQgdG8gUXVlcnlUYXNrIFF1ZXJ5IHRhYiBjb250ZW50ICovfVxuICAgICAgXG4gICAgICB7LyogU2hvdyBzZWxlY3RlZCBxdWVyeSBmb3JtIGRpcmVjdGx5IGJlbG93ICovfVxuICAgICAge3NlbGVjdGVkUXVlcnlJdGVtICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BxdWVyeS10YXNrLWNvbnRhaW5lciAke2lzSW5Qb3BwZXIgPyBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTIDogJyd9YH0+XG4gICAgICAgICAgPFF1ZXJ5VGFza1xuICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgaW5kZXg9e3NlbGVjdGVkUXVlcnlSZWFsSW5kZXggPj0gMCA/IHNlbGVjdGVkUXVlcnlSZWFsSW5kZXggOiAwfVxuICAgICAgICAgICAgdG90YWw9e3NvcnRlZFF1ZXJ5SXRlbXMubGVuZ3RofVxuICAgICAgICAgICAgcXVlcnlJdGVtPXtzZWxlY3RlZFF1ZXJ5SXRlbX1cbiAgICAgICAgICAgIGlzSW5Qb3BwZXI9e2lzSW5Qb3BwZXJ9XG4gICAgICAgICAgICBpbml0aWFsSW5wdXRWYWx1ZT17c2VsZWN0ZWRRdWVyeUl0ZW0uc2hvcnRJZCA9PT0gZWZmZWN0aXZlSW5pdGlhbFF1ZXJ5VmFsdWU/LnNob3J0SWQgPyBlZmZlY3RpdmVJbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBvbkhhc2hQYXJhbWV0ZXJVc2VkPXtvbkhhc2hQYXJhbWV0ZXJVc2VkfVxuICAgICAgICAgICAgcXVlcnlJdGVtcz17c29ydGVkUXVlcnlJdGVtc31cbiAgICAgICAgICAgIHNlbGVjdGVkUXVlcnlJbmRleD17c2VsZWN0ZWRVbmdyb3VwZWRJbmRleH1cbiAgICAgICAgICAgIG9uUXVlcnlDaGFuZ2U9eyhpbmRleCkgPT4gc2V0U2VsZWN0ZWRVbmdyb3VwZWRJbmRleChpbmRleCl9XG4gICAgICAgICAgICAvLyBHcm91cGluZyBwcm9wc1xuICAgICAgICAgICAgZ3JvdXBzPXtncm91cHN9XG4gICAgICAgICAgICB1bmdyb3VwZWQ9e3VuZ3JvdXBlZH1cbiAgICAgICAgICAgIC8vIEdyYXBoaWNzIGxheWVyIHByb3BzXG4gICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXt1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0fVxuICAgICAgICAgICAgZ3JhcGhpY3NMYXllcj17Z3JhcGhpY3NMYXllcn1cbiAgICAgICAgICAgIG1hcFZpZXc9e21hcFZpZXd9XG4gICAgICAgICAgICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPXtvbkluaXRpYWxpemVHcmFwaGljc0xheWVyfVxuICAgICAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXI9e29uQ2xlYXJHcmFwaGljc0xheWVyfVxuICAgICAgICAgICAgZ3JvdXBPcmRlcj17Z3JvdXBPcmRlcn1cbiAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZD17c2VsZWN0ZWRHcm91cElkfVxuICAgICAgICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXg9e3NlbGVjdGVkR3JvdXBRdWVyeUluZGV4fVxuICAgICAgICAgICAgb25Hcm91cENoYW5nZT17KGdyb3VwSWQpID0+IHNldFNlbGVjdGVkR3JvdXBJZChncm91cElkKX1cbiAgICAgICAgICAgIG9uR3JvdXBRdWVyeUNoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZEdyb3VwUXVlcnlJbmRleChpbmRleCl9XG4gICAgICAgICAgICBvblVuZ3JvdXBlZENoYW5nZT17KGluZGV4KSA9PiBzZXRTZWxlY3RlZFVuZ3JvdXBlZEluZGV4KGluZGV4KX1cbiAgICAgICAgICAgIHJlc3VsdHNNb2RlPXtyZXN1bHRzTW9kZX1cbiAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2U9e29uUmVzdWx0c01vZGVDaGFuZ2V9XG4gICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e2FjY3VtdWxhdGVkUmVjb3Jkc31cbiAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXtvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgIGFjdGl2ZVRhYj17YWN0aXZlVGFifVxuICAgICAgICAgICAgb25UYWJDaGFuZ2U9e29uVGFiQ2hhbmdlfVxuICAgICAgICAgICAgLy8gTm8gb25OYXZCYWNrIC0gbm8gbmF2aWdhdGlvbiBuZWVkZWRcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuXG5cbiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgdHlwZSBJTVN0YXRlLCBqc3gsIGNzcywgY2xhc3NOYW1lcywgdHlwZSBJbW11dGFibGVBcnJheSwgdHlwZSBVc2VEYXRhU291cmNlLCBob29rcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU2VsZWN0LCBUb29sdGlwLCBCdXR0b24gfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgeyB0eXBlIENyZWF0ZVRvb2xUeXBlLCBTcGF0aWFsRmlsdGVyVHlwZSwgdHlwZSBTcGF0aWFsRmlsdGVyT2JqLCB0eXBlIFNwYXRpYWxSZWxhdGlvbiwgVW5pdFR5cGUgfSBmcm9tICcuLi9jb25maWcnXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZSBmcm9tICcuL3RyYW5zbGF0aW9ucy9kZWZhdWx0J1xyXG5pbXBvcnQgeyBHZW9tZXRyeUZyb21EYXRhU291cmNlIH0gZnJvbSAnLi9nZW9tZXRyeS1mcm9tLWRzJ1xyXG5pbXBvcnQgeyBHZW9tZXRyeUZyb21NYXAgfSBmcm9tICcuL2dlb21ldHJ5LWZyb20tbWFwJ1xyXG5pbXBvcnQgeyBHZW9tZXRyeUZyb21EcmF3IH0gZnJvbSAnLi9nZW9tZXRyeS1mcm9tLWRyYXcnXHJcbmltcG9ydCB7IEluZm9PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL2luZm8nXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza0l0ZW1Qcm9wcyB7XHJcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xyXG4gIGxhYmVsOiBzdHJpbmdcclxuICBkZXNjOiBzdHJpbmdcclxuICBkc0VuYWJsZUJ1ZmZlcjogYm9vbGVhblxyXG4gIGRzQnVmZmVyRGlzdGFuY2U6IG51bWJlclxyXG4gIGRzQnVmZmVyVW5pdDogVW5pdFR5cGVcclxuICBkcmF3RW5hYmxlQnVmZmVyOiBib29sZWFuXHJcbiAgZHJhd0J1ZmZlckRpc3RhbmNlOiBudW1iZXJcclxuICBkcmF3QnVmZmVyVW5pdDogVW5pdFR5cGVcclxuICBzcGF0aWFsUmVsYXRpb25zOiBJbW11dGFibGVBcnJheTxTcGF0aWFsUmVsYXRpb24+XHJcbiAgdXNlRGF0YVNvdXJjZXM6IEltbXV0YWJsZUFycmF5PFVzZURhdGFTb3VyY2U+XHJcbiAgdXNlUnVudGltZURhdGE6IGJvb2xlYW5cclxuICBmaWx0ZXJUeXBlczogSW1tdXRhYmxlQXJyYXk8U3BhdGlhbEZpbHRlclR5cGU+XHJcbiAgbWFwV2lkZ2V0SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+XHJcbiAgY3JlYXRlVG9vbFR5cGVzOiBJbW11dGFibGVBcnJheTxDcmVhdGVUb29sVHlwZT5cclxuICBvbkZpbHRlckNoYW5nZTogKGZpbHRlcjogU3BhdGlhbEZpbHRlck9iaikgPT4gdm9pZFxyXG4gIG9uUmVsYXRpb25DaGFuZ2U6IChyZWw6IFNwYXRpYWxSZWxhdGlvbikgPT4gdm9pZFxyXG4gIG9uQnVmZmVyQ2hhbmdlOiAoZGlzdGFuY2U6IG51bWJlciwgdW5pdDogVW5pdFR5cGUpID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFza1NwYXRpYWxGb3JtIChwcm9wczogUXVlcnlUYXNrSXRlbVByb3BzKSB7XHJcbiAgY29uc3Qge1xyXG4gICAgbGFiZWwsIGRlc2MsIGZpbHRlclR5cGVzLCBtYXBXaWRnZXRJZHMsIG9uRmlsdGVyQ2hhbmdlLCBvblJlbGF0aW9uQ2hhbmdlLCBvbkJ1ZmZlckNoYW5nZSwgdXNlRGF0YVNvdXJjZXMsIHNwYXRpYWxSZWxhdGlvbnMsIHVzZVJ1bnRpbWVEYXRhLFxyXG4gICAgZHNFbmFibGVCdWZmZXIsIGRzQnVmZmVyRGlzdGFuY2UsIGRzQnVmZmVyVW5pdCwgZHJhd0VuYWJsZUJ1ZmZlciwgZHJhd0J1ZmZlckRpc3RhbmNlLCBkcmF3QnVmZmVyVW5pdCwgY3JlYXRlVG9vbFR5cGVzLCB3aWRnZXRJZFxyXG4gIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGdldEkxOG5NZXNzYWdlID0gaG9va3MudXNlVHJhbnNsYXRpb24oZGVmYXVsdE1lc3NhZ2UpXHJcbiAgLy8gdXNlZCB0byBzdG9yZSB0aGUgc2VsZWN0aW9uIG9mIHRoZSBkYXRhIHNvdXJjZSBpbiBvcmRlciB0byB1cGRhdGUgdGhlIGZpbHRlciB3aGVuIG9wdGlvbiBjaGFuZ2VzXHJcbiAgY29uc3Qgc2VsZWN0ZWRHZW9tZXRyaWVzUmVmID0gUmVhY3QudXNlUmVmPGFueT4obnVsbClcclxuICBjb25zdCBtYXBFeGlzdHMgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xyXG4gICAgaWYgKG1hcFdpZGdldElkcz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBtYXBXaWRnZXRJZCA9IG1hcFdpZGdldElkc1swXVxyXG4gICAgICByZXR1cm4gc3RhdGUuYXBwQ29uZmlnLndpZGdldHNbbWFwV2lkZ2V0SWRdICE9IG51bGxcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH0pXHJcbiAgY29uc3QgY2FuVXNlTWFwRmlsdGVyID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICByZXR1cm4gbWFwRXhpc3RzICYmIChmaWx0ZXJUeXBlcz8uaW5jbHVkZXMoU3BhdGlhbEZpbHRlclR5cGUuQ3VycmVudE1hcEV4dGVudCkgfHwgZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkludGVyYWN0aXZlRHJhd01vZGUpKVxyXG4gIH0sIFtmaWx0ZXJUeXBlcywgbWFwRXhpc3RzXSlcclxuICBjb25zdCBzdXBwb3J0ZWRGaWx0ZXJUeXBlcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gW11cclxuICAgIGlmICh1c2VEYXRhU291cmNlcz8ubGVuZ3RoID4gMCB8fCB1c2VSdW50aW1lRGF0YSkge1xyXG4gICAgICByZXN1bHQucHVzaCh7IHZhbHVlOiAnZGF0YScsIGxhYmVsOiBnZXRJMThuTWVzc2FnZSgnZmVhdHVyZUZyb21EcycpIH0pXHJcbiAgICB9XHJcbiAgICBpZiAoY2FuVXNlTWFwRmlsdGVyICYmIGZpbHRlclR5cGVzPy5pbmNsdWRlcyhTcGF0aWFsRmlsdGVyVHlwZS5DdXJyZW50TWFwRXh0ZW50KSkge1xyXG4gICAgICByZXN1bHQucHVzaCh7IHZhbHVlOiAnbWFwJywgbGFiZWw6IGdldEkxOG5NZXNzYWdlKGBzcGF0aWFsRmlsdGVyVHlwZV8ke1NwYXRpYWxGaWx0ZXJUeXBlLkN1cnJlbnRNYXBFeHRlbnR9YCkgfSlcclxuICAgIH1cclxuICAgIGlmIChjYW5Vc2VNYXBGaWx0ZXIgJiYgZmlsdGVyVHlwZXM/LmluY2x1ZGVzKFNwYXRpYWxGaWx0ZXJUeXBlLkludGVyYWN0aXZlRHJhd01vZGUpKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHsgdmFsdWU6ICdkcmF3JywgbGFiZWw6IGdldEkxOG5NZXNzYWdlKGBzcGF0aWFsRmlsdGVyVHlwZV8ke1NwYXRpYWxGaWx0ZXJUeXBlLkludGVyYWN0aXZlRHJhd01vZGV9YCkgfSlcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHRcclxuICB9LCBbY2FuVXNlTWFwRmlsdGVyLCB1c2VEYXRhU291cmNlcywgdXNlUnVudGltZURhdGEsIGdldEkxOG5NZXNzYWdlLCBmaWx0ZXJUeXBlc10pXHJcblxyXG4gIGNvbnN0IFtjdXJyZW50RmlsdGVyVHlwZSwgc2V0Q3VycmVudEZpbHRlclR5cGVdID0gUmVhY3QudXNlU3RhdGUoc3VwcG9ydGVkRmlsdGVyVHlwZXM/LlswXT8udmFsdWUpXHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBpbiBvcmRlciB0byBhdm9pZCBpbnZhbGlkIG9wdGlvbiBiZWluZyBzZWxlY3RlZFxyXG4gICAgaWYgKGN1cnJlbnRGaWx0ZXJUeXBlICE9PSAnbm9uZScgJiYgIXN1cHBvcnRlZEZpbHRlclR5cGVzLmZpbmQoKGl0ZW0pID0+IGl0ZW0udmFsdWUgPT09IGN1cnJlbnRGaWx0ZXJUeXBlKSkge1xyXG4gICAgICBzZXRDdXJyZW50RmlsdGVyVHlwZShzdXBwb3J0ZWRGaWx0ZXJUeXBlcz8uWzBdPy52YWx1ZSlcclxuICAgIH1cclxuICB9LCBbY3VycmVudEZpbHRlclR5cGUsIHN1cHBvcnRlZEZpbHRlclR5cGVzXSlcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIGNsZWFyIHRoZSByZWxhdGlvbnNoaXAgYW5kIGJ1ZmZlciBpZiBmaWx0ZXIgdHlwZSBpcyBub3QgJ2RhdGEnXHJcbiAgICBpZiAoY3VycmVudEZpbHRlclR5cGUgPT09ICdtYXAnIHx8IGN1cnJlbnRGaWx0ZXJUeXBlID09PSAnZHJhdycgfHwgY3VycmVudEZpbHRlclR5cGUgPT09ICdub25lJykge1xyXG4gICAgICBvblJlbGF0aW9uQ2hhbmdlKG51bGwpXHJcbiAgICAgIG9uQnVmZmVyQ2hhbmdlKDAsIFVuaXRUeXBlLk1ldGVycylcclxuICAgICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeTogbnVsbCB9KVxyXG4gICAgfVxyXG4gICAgLy8gbm8gbmVlZCB0byB1cGRhdGUgdGhlIGZpbHRlciBpZiB0aGUgZGF0YSBzb3VyY2UgaGFzIHNlbGVjdGlvbiBzaW5jZSBpdCB3aWxsIGJlIHVwZGF0ZWQgaW4gdGhlIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSBtZXRob2RcclxuICAgIGlmIChjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RhdGEnICYmIHNlbGVjdGVkR2VvbWV0cmllc1JlZi5jdXJyZW50ID09IG51bGwpIHtcclxuICAgICAgb25GaWx0ZXJDaGFuZ2UoeyBnZW9tZXRyeTogbnVsbCB9KVxyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50RmlsdGVyVHlwZSwgb25SZWxhdGlvbkNoYW5nZSwgb25CdWZmZXJDaGFuZ2UsIG9uRmlsdGVyQ2hhbmdlXSlcclxuXHJcbiAgY29uc3QgaGFuZGxlRmlsdGVyVHlwZUNoYW5nZWQgPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7IHNldEN1cnJlbnRGaWx0ZXJUeXBlKGV2dC50YXJnZXQudmFsdWUpIH0sIFtdKVxyXG5cclxuICBjb25zdCBoYW5kbGVHZW9tZXRyeUNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChnZW9tZXRyeTogX19lc3JpLkdlb21ldHJ5LCBsYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLCBncmFwaGljPzogX19lc3JpLkdyYXBoaWMsIGNsZWFyQWZ0ZXJBcHBseT86IGJvb2xlYW4pID0+IHtcclxuICAgIG9uRmlsdGVyQ2hhbmdlKHsgZ2VvbWV0cnksIGdyYXBoaWMsIGxheWVyLCBjbGVhckFmdGVyQXBwbHkgfSlcclxuICB9LCBbb25GaWx0ZXJDaGFuZ2VdKVxyXG5cclxuICBjb25zdCBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZ2VvbWV0cmllcykgPT4ge1xyXG4gICAgc2VsZWN0ZWRHZW9tZXRyaWVzUmVmLmN1cnJlbnQgPSBnZW9tZXRyaWVzXHJcbiAgICBvbkZpbHRlckNoYW5nZSh7IGdlb21ldHJ5OiBnZW9tZXRyaWVzIH0pXHJcbiAgfSwgW29uRmlsdGVyQ2hhbmdlXSlcclxuXHJcbiAgaWYgKCEodXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDAgfHwgdXNlUnVudGltZURhdGEgfHwgY2FuVXNlTWFwRmlsdGVyKSkge1xyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IHJvbGU9J2dyb3VwJyBjbGFzc05hbWU9J3B4LTQgcGItNCcgYXJpYS1sYWJlbD17bGFiZWx9PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZm9ybS10aXRsZSBteS0yIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInLCB7ICdkLW5vbmUnOiAhbGFiZWwgJiYgIWRlc2MgfSl9PlxyXG4gICAgICAgIHtsYWJlbCAmJiA8ZGl2IGNsYXNzTmFtZT0nbXItMiB0aXRsZTInPntsYWJlbH08L2Rpdj59XHJcbiAgICAgICAge2Rlc2MgJiYgKFxyXG4gICAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PSdib3R0b20nIGNzcz17Y3NzYHdoaXRlLXNwYWNlOiBwcmUtbGluZTtgfSB0aXRsZT17ZGVzY30+XHJcbiAgICAgICAgICAgIDxCdXR0b24gc2l6ZT0nc20nIGljb24gdHlwZT0ndGVydGlhcnknPlxyXG4gICAgICAgICAgICAgIDxJbmZvT3V0bGluZWQgY29sb3I9J3ZhcigtLXN5cy1jb2xvci1wcmltYXJ5LW1haW4pJyBzaXplPSdzJy8+XHJcbiAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgPC9Ub29sdGlwPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICB7c3VwcG9ydGVkRmlsdGVyVHlwZXMubGVuZ3RoID4gMCAmJiAoXHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0aXRsZTMnPntnZXRJMThuTWVzc2FnZSgnY2hvb3NlRmlsdGVyVHlwZScpfTwvZGl2PlxyXG4gICAgICAgICAgPFNlbGVjdFxyXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgnY2hvb3NlRmlsdGVyVHlwZScpfVxyXG4gICAgICAgICAgICBjc3M9e2Nzc2BoZWlnaHQ6IDMycHg7YH1cclxuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRGaWx0ZXJUeXBlfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlRmlsdGVyVHlwZUNoYW5nZWR9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxvcHRpb24ga2V5PSctJyB2YWx1ZT0nbm9uZSc+LTwvb3B0aW9uPlxyXG4gICAgICAgICAgICB7c3VwcG9ydGVkRmlsdGVyVHlwZXMubWFwKGl0ZW0gPT4gPG9wdGlvbiBrZXk9e2l0ZW0udmFsdWV9IHZhbHVlPXtpdGVtLnZhbHVlfT57aXRlbS5sYWJlbH08L29wdGlvbj4pfVxyXG4gICAgICAgICAgPC9TZWxlY3Q+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICAgIHtjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ2RhdGEnICYmIChcclxuICAgICAgICA8R2VvbWV0cnlGcm9tRGF0YVNvdXJjZVxyXG4gICAgICAgICAgZW5hYmxlQnVmZmVyPXtkc0VuYWJsZUJ1ZmZlcn1cclxuICAgICAgICAgIGJ1ZmZlckRpc3RhbmNlPXtkc0J1ZmZlckRpc3RhbmNlfVxyXG4gICAgICAgICAgYnVmZmVyVW5pdD17ZHNCdWZmZXJVbml0fVxyXG4gICAgICAgICAgc3BhdGlhbFJlbGF0aW9ucz17c3BhdGlhbFJlbGF0aW9uc31cclxuICAgICAgICAgIHVzZURhdGFTb3VyY2VzPXt1c2VEYXRhU291cmNlc31cclxuICAgICAgICAgIHVzZVJ1bnRpbWVEYXRhPXt1c2VSdW50aW1lRGF0YX1cclxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtoYW5kbGVTZWxlY3Rpb25DaGFuZ2V9XHJcbiAgICAgICAgICBvblJlbGF0aW9uQ2hhbmdlPXtvblJlbGF0aW9uQ2hhbmdlfVxyXG4gICAgICAgICAgb25CdWZmZXJDaGFuZ2U9e29uQnVmZmVyQ2hhbmdlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcbiAgICAgIHtjdXJyZW50RmlsdGVyVHlwZSA9PT0gJ21hcCcgJiYgKFxyXG4gICAgICAgIDxHZW9tZXRyeUZyb21NYXBcclxuICAgICAgICAgIG1hcFdpZGdldElkcz17bWFwV2lkZ2V0SWRzfVxyXG4gICAgICAgICAgY3JlYXRlVG9vbFR5cGVzPXtjcmVhdGVUb29sVHlwZXN9XHJcbiAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlPXtoYW5kbGVHZW9tZXRyeUNoYW5nZX1cclxuICAgICAgICAvPlxyXG4gICAgICApfVxyXG4gICAgICB7Y3VycmVudEZpbHRlclR5cGUgPT09ICdkcmF3JyAmJiAoXHJcbiAgICAgICAgPEdlb21ldHJ5RnJvbURyYXdcclxuICAgICAgICAgIGVuYWJsZUJ1ZmZlcj17ZHJhd0VuYWJsZUJ1ZmZlcn1cclxuICAgICAgICAgIGJ1ZmZlckRpc3RhbmNlPXtkcmF3QnVmZmVyRGlzdGFuY2V9XHJcbiAgICAgICAgICBidWZmZXJVbml0PXtkcmF3QnVmZmVyVW5pdH1cclxuICAgICAgICAgIG1hcFdpZGdldElkcz17bWFwV2lkZ2V0SWRzfVxyXG4gICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxyXG4gICAgICAgICAgY3JlYXRlVG9vbFR5cGVzPXtjcmVhdGVUb29sVHlwZXN9XHJcbiAgICAgICAgICBvbkdlb21ldHJ5Q2hhbmdlPXtoYW5kbGVHZW9tZXRyeUNoYW5nZX1cclxuICAgICAgICAgIG9uQnVmZmVyQ2hhbmdlPXtvbkJ1ZmZlckNoYW5nZX1cclxuICAgICAgICAvPlxyXG4gICAgICApfVxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcbiAgdHlwZSBJbW11dGFibGVBcnJheSxcbiAgdHlwZSBJTVNxbEV4cHJlc3Npb24sXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXG4gIHR5cGUgRGF0YVNvdXJjZSxcbiAgdHlwZSBVc2VEYXRhU291cmNlLFxuICBJbW11dGFibGUsXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgY2xhc3NOYW1lcyxcbiAgQ09OU1RBTlRTLFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgRGF0YVJlY29yZFNldCxcbiAgdHlwZSBRdWVyeVBhcmFtcyxcbiAgRGF0YVNvdXJjZVN0YXR1cyxcbiAgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UsXG4gIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSxcbiAgUmVjb3JkU2V0Q2hhbmdlVHlwZSxcbiAgTWVzc2FnZU1hbmFnZXIsXG4gIE11dGFibGVTdG9yZU1hbmFnZXIsXG4gIERhdGFBY3Rpb25NYW5hZ2VyLFxuICBEYXRhTGV2ZWwsXG4gIHR5cGUgUXVlcmlhYmxlRGF0YVNvdXJjZSxcbiAgdHlwZSBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyxcbiAgaG9va3MsXG4gIGxvZGFzaCxcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXG4gIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlLFxuICBSZWFjdFJlZHV4LFxuICB0eXBlIElNU3RhdGUsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmRcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBUb29sdGlwLCBGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTLCBUYWJzLCBUYWIsIFNlbGVjdCB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBJbmZvT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC9pbmZvJ1xuaW1wb3J0IHsgVHJhc2hPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3RyYXNoJ1xuaW1wb3J0IHsgUGFnaW5nVHlwZSwgdHlwZSBRdWVyeUl0ZW1UeXBlLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIFNlbGVjdGlvblR5cGUgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgeyBRdWVyeVRhc2tGb3JtIH0gZnJvbSAnLi9xdWVyeS10YXNrLWZvcm0nXG5pbXBvcnQgeyBRdWVyeVRhc2tSZXN1bHQgfSBmcm9tICcuL3F1ZXJ5LXJlc3VsdCdcbmltcG9ydCB7IERhdGFTb3VyY2VUaXAsIHVzZURhdGFTb3VyY2VFeGlzdHMsIEVycm9yTWVzc2FnZSB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuaW1wb3J0IHsgUXVlcnlUYXNrTGFiZWwgfSBmcm9tICcuL3F1ZXJ5LXRhc2stbGFiZWwnXG5pbXBvcnQgeyBERUZBVUxUX1FVRVJZX0lURU0gfSBmcm9tICcuLi9kZWZhdWx0LXF1ZXJ5LWl0ZW0nXG5pbXBvcnQgeyBnZW5lcmF0ZVF1ZXJ5UGFyYW1zLCBleGVjdXRlUXVlcnksIGV4ZWN1dGVDb3VudFF1ZXJ5IH0gZnJvbSAnLi9xdWVyeS11dGlscydcbmltcG9ydCB7IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZCwgcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZCwgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zIH0gZnJvbSAnLi9yZXN1bHRzLW1hbmFnZW1lbnQtdXRpbHMnXG5pbXBvcnQgeyBNZW51T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9tZW51J1xuaW1wb3J0IGRlZmF1bHRNZXNzYWdlIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdCdcbmltcG9ydCB7IExvYWRpbmdSZXN1bHQgfSBmcm9tICcuL2xvYWRpbmctcmVzdWx0J1xuaW1wb3J0IHsgY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzLCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCwgZmluZENsZWFyUmVzdWx0c0J1dHRvbiwgZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCB9IGZyb20gJy4vc2VsZWN0aW9uLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5VGFza1Byb3BzIHtcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xuICBpbmRleDogbnVtYmVyXG4gIHRvdGFsOiBudW1iZXJcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbiAgd3JhcHBlZEluUG9wcGVyPzogYm9vbGVhblxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgaXNJblBvcHBlcj86IGJvb2xlYW5cbiAgb25OYXZCYWNrPzogKCkgPT4gdm9pZFxuICBpbml0aWFsSW5wdXRWYWx1ZT86IHN0cmluZ1xuICBvbkhhc2hQYXJhbWV0ZXJVc2VkPzogKHNob3J0SWQ6IHN0cmluZykgPT4gdm9pZFxuICBxdWVyeUl0ZW1TaG9ydElkPzogc3RyaW5nXG4gIC8vIFByb3BzIGZvciBTZWFyY2ggTGF5ZXIgZHJvcGRvd24gKHdoZW4gbXVsdGlwbGUgcXVlcmllcylcbiAgcXVlcnlJdGVtcz86IEltbXV0YWJsZUFycmF5PFF1ZXJ5SXRlbVR5cGU+XG4gIHNlbGVjdGVkUXVlcnlJbmRleD86IG51bWJlclxuICBvblF1ZXJ5Q2hhbmdlPzogKGluZGV4OiBudW1iZXIpID0+IHZvaWRcbiAgLy8gR3JvdXBpbmcgcHJvcHNcbiAgZ3JvdXBzPzogeyBbZ3JvdXBJZDogc3RyaW5nXTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8UXVlcnlJdGVtVHlwZT4sIGRpc3BsYXlOYW1lOiBzdHJpbmcsIGljb24/OiBhbnkgfSB9XG4gIHVuZ3JvdXBlZD86IEFycmF5PHsgaXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+LCBpbmRleDogbnVtYmVyIH0+XG4gIGdyb3VwT3JkZXI/OiBzdHJpbmdbXVxuICBzZWxlY3RlZEdyb3VwSWQ/OiBzdHJpbmcgfCBudWxsXG4gIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4PzogbnVtYmVyXG4gIG9uR3JvdXBDaGFuZ2U/OiAoZ3JvdXBJZDogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZFxuICBvbkdyb3VwUXVlcnlDaGFuZ2U/OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZFxuICBvblVuZ3JvdXBlZENoYW5nZT86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gIC8vIFJlc3VsdHMgbW9kZSBwcm9wc1xuICByZXN1bHRzTW9kZT86IFNlbGVjdGlvblR5cGVcbiAgb25SZXN1bHRzTW9kZUNoYW5nZT86IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB2b2lkXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW11cbiAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U/OiAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4gdm9pZFxuICAvLyBHcmFwaGljcyBsYXllciBwcm9wc1xuICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PzogYm9vbGVhblxuICBncmFwaGljc0xheWVyPzogX19lc3JpLkdyYXBoaWNzTGF5ZXJcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuICBvbkluaXRpYWxpemVHcmFwaGljc0xheWVyPzogKG91dHB1dERTOiBEYXRhU291cmNlKSA9PiBQcm9taXNlPHZvaWQ+XG4gIG9uQ2xlYXJHcmFwaGljc0xheWVyPzogKCkgPT4gdm9pZFxuICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnXG4gIG9uVGFiQ2hhbmdlPzogKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4gdm9pZFxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGRpc3BsYXkgbmFtZSBmb3IgcXVlcnkgaW4gZHJvcGRvd25cbi8vIFVzZXM6IHNlYXJjaEFsaWFzIHx8IGppbXVGaWVsZE5hbWUgfHwgaXRlbS5uYW1lIHx8IGZhbGxiYWNrXG5jb25zdCBnZXRRdWVyeURpc3BsYXlOYW1lID0gKGl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPik6IHN0cmluZyA9PiB7XG4gIC8vIEZpcnN0IHByaW9yaXR5OiBzZWFyY2hBbGlhcyBpZiBzZXRcbiAgaWYgKGl0ZW0uc2VhcmNoQWxpYXMpIHtcbiAgICByZXR1cm4gaXRlbS5zZWFyY2hBbGlhc1xuICB9XG4gIFxuICAvLyBTZWNvbmQgcHJpb3JpdHk6IGZpZWxkIG5hbWUgZnJvbSBTUUwgZXhwcmVzc2lvblxuICBjb25zdCBqaW11RmllbGROYW1lID0gaXRlbS5zcWxFeHByT2JqPy5wYXJ0cz8uWzBdPy5qaW11RmllbGROYW1lXG4gIGlmIChqaW11RmllbGROYW1lKSB7XG4gICAgcmV0dXJuIGppbXVGaWVsZE5hbWVcbiAgfVxuICBcbiAgLy8gVGhpcmQgcHJpb3JpdHk6IGl0ZW0gbmFtZVxuICBpZiAoaXRlbS5uYW1lKSB7XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG4gIFxuICAvLyBGYWxsYmFja1xuICByZXR1cm4gJ1F1ZXJ5J1xufVxuXG5jb25zdCBzdHlsZSA9IGNzc2BcbiAgJi53cmFwcGVkIC5xdWVyeS1mb3JtIHtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gIH1cbiAgLnF1ZXJ5LXRhc2tfX2NvbnRlbnQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nLXRvcDogOHB4O1xuICAgICY6aGFzKD4gLnF1ZXJ5LWZvcm1fX2hlYWRlciA+IGRpdjpub3QoLmQtbm9uZSkpLCAmOmhhcyg+IC5xdWVyeS1yZXN1bHQpIHtcbiAgICAgIHBhZGRpbmctdG9wOiAxNnB4O1xuICAgIH1cbiAgfVxuICAucXVlcnktZm9ybV9faGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgICYuaGFzLWNvbnRlbnQge1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICAgIH1cbiAgICAubmF2LWFjdGlvbiB7XG4gICAgICBmbGV4OiAxIDEgMDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgLmppbXUtYnRuIHtcbiAgICAgICAgbWluLXdpZHRoOiAyNnB4O1xuICAgICAgfVxuICAgIH1cbiAgICAucmVzdWx0LW1lbnUge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICB9XG4gIH1cbmBcblxuZXhwb3J0IGZ1bmN0aW9uIFF1ZXJ5VGFzayAocHJvcHM6IFF1ZXJ5VGFza1Byb3BzKSB7XG4gIGNvbnN0IHsgcXVlcnlJdGVtLCBvbk5hdkJhY2ssIHRvdGFsLCBpc0luUG9wcGVyID0gZmFsc2UsIHdyYXBwZWRJblBvcHBlciA9IGZhbHNlLCBjbGFzc05hbWUgPSAnJywgaW5kZXgsIGluaXRpYWxJbnB1dFZhbHVlLCBvbkhhc2hQYXJhbWV0ZXJVc2VkLCBxdWVyeUl0ZW1zLCBzZWxlY3RlZFF1ZXJ5SW5kZXgsIG9uUXVlcnlDaGFuZ2UsIGdyb3VwcywgdW5ncm91cGVkLCBncm91cE9yZGVyLCBzZWxlY3RlZEdyb3VwSWQsIHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4LCBvbkdyb3VwQ2hhbmdlLCBvbkdyb3VwUXVlcnlDaGFuZ2UsIG9uVW5ncm91cGVkQ2hhbmdlLCByZXN1bHRzTW9kZSwgb25SZXN1bHRzTW9kZUNoYW5nZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllciwgbWFwVmlldywgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllciwgb25DbGVhckdyYXBoaWNzTGF5ZXIsIGFjdGl2ZVRhYjogcHJvcEFjdGl2ZVRhYiwgb25UYWJDaGFuZ2U6IHByb3BPblRhYkNoYW5nZSwgLi4ub3RoZXJQcm9wcyB9ID0gcHJvcHNcbiAgY29uc3QgZ2V0STE4bk1lc3NhZ2UgPSBob29rcy51c2VUcmFuc2xhdGlvbihkZWZhdWx0TWVzc2FnZSlcbiAgY29uc3QgW3N0YWdlLCBzZXRTdGFnZV0gPSBSZWFjdC51c2VTdGF0ZSgwKSAvLyAwID0gZm9ybSwgMSA9IHJlc3VsdHMsIDIgPSBsb2FkaW5nXG4gIGNvbnN0IFtpbnRlcm5hbEFjdGl2ZVRhYiwgc2V0SW50ZXJuYWxBY3RpdmVUYWJdID0gUmVhY3QudXNlU3RhdGU8J3F1ZXJ5JyB8ICdyZXN1bHRzJz4oJ3F1ZXJ5JylcbiAgXG4gIC8vIENvbnRyb2xsZWQgdGFiIHN0YXRlOiB1c2UgcHJvcCBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGludGVybmFsIHN0YXRlXG4gIGNvbnN0IGFjdGl2ZVRhYiA9IHByb3BBY3RpdmVUYWIgfHwgaW50ZXJuYWxBY3RpdmVUYWJcbiAgY29uc3Qgc2V0QWN0aXZlVGFiID0gUmVhY3QudXNlQ2FsbGJhY2soKHRhYjogJ3F1ZXJ5JyB8ICdyZXN1bHRzJykgPT4ge1xuICAgIGlmIChwcm9wT25UYWJDaGFuZ2UpIHtcbiAgICAgIHByb3BPblRhYkNoYW5nZSh0YWIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNldEludGVybmFsQWN0aXZlVGFiKHRhYilcbiAgICB9XG4gIH0sIFtwcm9wT25UYWJDaGFuZ2VdKVxuICBjb25zdCBbZW5hYmxlZCwgc2V0RW5hYmxlZF0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBbcmVzdWx0Q291bnQsIHNldFJlc3VsdENvdW50XSA9IFJlYWN0LnVzZVN0YXRlKDApXG4gIC8vIFRyYWNrIGlmIHdlJ3ZlIGFscmVhZHkgc2VsZWN0ZWQgcmVjb3JkcyBmb3IgdGhlIGN1cnJlbnQgcXVlcnkgcmVzdWx0c1xuICBjb25zdCBoYXNTZWxlY3RlZFJlY29yZHNSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFRyYWNrIHF1ZXJ5IGV4ZWN1dGlvbiBjb3VudCB0byBmb3JjZSBRdWVyeVRhc2tSZXN1bHQgcmVtb3VudCBvbiBuZXcgcXVlcmllc1xuICBjb25zdCBxdWVyeUV4ZWN1dGlvbktleVJlZiA9IFJlYWN0LnVzZVJlZigwKVxuICBjb25zdCBxdWVyeVBhcmFtUmVmID0gUmVhY3QudXNlUmVmPFF1ZXJ5UGFyYW1zPihudWxsKVxuICBjb25zdCByZWNvcmRzUmVmID0gUmVhY3QudXNlUmVmPERhdGFSZWNvcmRbXT4obnVsbClcbiAgY29uc3QgW291dHB1dERTLCBzZXRPdXRwdXREU10gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPihudWxsKVxuICBjb25zdCBbZGF0YVNvdXJjZSwgc2V0RGF0YVNvdXJjZV0gPSBSZWFjdC51c2VTdGF0ZTxEYXRhU291cmNlPihudWxsKVxuICBjb25zdCBbc3BhdGlhbEZpbHRlckVuYWJsZWQsIHNldFNwYXRpYWxGaWx0ZXJFbmFibGVkXSA9IFJlYWN0LnVzZVN0YXRlKHRydWUpXG4gIGNvbnN0IGF0dHJpYnV0ZUZpbHRlclNxbEV4cHJPYmogPSBSZWFjdC51c2VSZWY8SU1TcWxFeHByZXNzaW9uPihxdWVyeUl0ZW0uc3FsRXhwck9iailcbiAgY29uc3Qgc3BhdGlhbEZpbHRlck9iaiA9IFJlYWN0LnVzZVJlZihudWxsKVxuICBjb25zdCBiYWNrQnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IGNsZWFyUmVzdWx0QnRuUmVmID0gUmVhY3QudXNlUmVmPEhUTUxCdXR0b25FbGVtZW50Pih1bmRlZmluZWQpXG4gIGNvbnN0IFtkYXRhQWN0aW9uRmlsdGVyLCBzZXREYXRhQWN0aW9uRmlsdGVyXSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IHByZXZpb3VzQ29uZmlnSWRSZWYgPSBSZWFjdC51c2VSZWY8c3RyaW5nPihxdWVyeUl0ZW0uY29uZmlnSWQpXG4gIC8vIFRyYWNrIG1hbnVhbCB0YWIgc3dpdGNoZXMgdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICBjb25zdCBtYW51YWxUYWJTd2l0Y2hSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpXG4gIC8vIFRyYWNrIHdoZW4gYSBxdWVyeSB3YXMganVzdCBleGVjdXRlZCAtIG9ubHkgYXV0by1zd2l0Y2ggYWZ0ZXIgcXVlcnkgZXhlY3V0aW9uIGNvbXBsZXRlc1xuICBjb25zdCBxdWVyeUp1c3RFeGVjdXRlZFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSlcbiAgLy8gU3RvcmUgdGhlIGxhc3QgcnVudGltZSB6b29tIG92ZXJyaWRlIHZhbHVlIGZyb20gdGhlIGZvcm0gZm9yIHVzZSBieSBBZGQgdG8gTWFwIGFjdGlvblxuICBjb25zdCBsYXN0UnVudGltZVpvb21Ub1NlbGVjdGVkUmVmID0gUmVhY3QudXNlUmVmPGJvb2xlYW4gfCB1bmRlZmluZWQ+KHVuZGVmaW5lZClcbiAgLy8gRXJyb3Igc3RhdGVzIGZvciB1c2VyLWZhY2luZyBlcnJvcnNcbiAgY29uc3QgW3NlbGVjdGlvbkVycm9yLCBzZXRTZWxlY3Rpb25FcnJvcl0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmc+KG51bGwpXG4gIGNvbnN0IFt6b29tRXJyb3IsIHNldFpvb21FcnJvcl0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmc+KG51bGwpXG5cbiAgY29uc3QgY3VycmVudEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1FVRVJZX0lURU0sIHF1ZXJ5SXRlbSlcbiAgY29uc3QgeyBpY29uLCBuYW1lLCBkaXNwbGF5TGFiZWwgfSA9IGN1cnJlbnRJdGVtXG4gIGNvbnN0IGRzRXhpc3RzOiBib29sZWFuID0gdXNlRGF0YVNvdXJjZUV4aXN0cyh7IHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCwgdXNlRGF0YVNvdXJjZUlkOiBjdXJyZW50SXRlbS51c2VEYXRhU291cmNlPy5kYXRhU291cmNlSWQgfSlcblxuICAvLyBEZWJ1ZyBsb2dnaW5nIGZvciB0YWIgY29udGVudCByZW5kZXJpbmdcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ3F1ZXJ5LXRhYi1jb250ZW50LXJlbmRlcicsXG4gICAgICBhY3RpdmVUYWIsXG4gICAgICBlbmFibGVkLFxuICAgICAgZHNFeGlzdHMsXG4gICAgICBkYXRhU291cmNlOiBkYXRhU291cmNlID8gJ2V4aXN0cycgOiAnbnVsbCcsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgbm90ZTogJ1F1ZXJ5IHRhYiBjb250ZW50IHN0YXRlIGNoZWNrJ1xuICAgIH0pXG4gIH0sIFthY3RpdmVUYWIsIGVuYWJsZWQsIGRzRXhpc3RzLCBkYXRhU291cmNlLCBxdWVyeUl0ZW0uY29uZmlnSWRdKVxuXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIFRhYiBjaGlsZHJlbiByZW5kZXJpbmdcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWN0aXZlVGFiID09PSAncXVlcnknKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAncXVlcnktdGFiLWNoaWxkcmVuLXJlbmRlcicsXG4gICAgICAgIGFjdGl2ZVRhYixcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgbm90ZTogJ1F1ZXJ5IFRhYiBjaGlsZHJlbiBzaG91bGQgYmUgcmVuZGVyaW5nJ1xuICAgICAgfSlcbiAgICB9XG4gIH0sIFthY3RpdmVUYWIsIHF1ZXJ5SXRlbS5jb25maWdJZF0pXG5cbiAgaG9va3MudXNlRWZmZWN0T25jZSgoKSA9PiB7XG4gICAgLy8gZm9jdXMgdGhlIGJhY2sgYnV0dG9uIHdoZW4gaXQgaXMgcmVuZGVyZWRcbiAgICBmb2N1c0VsZW1lbnRJbktleWJvYXJkTW9kZShiYWNrQnRuUmVmLmN1cnJlbnQpXG4gIH0pXG5cbiAgLy8gR2V0IHRoZSBwYWdpbmF0aW9uIHN0eWxlIGZyb20gd2lkZ2V0IGNvbmZpZyAoTXVsdGlQYWdlIG9yIExhenlMb2FkL1NpbmdsZS1wYWdlKVxuICBjb25zdCBwYWdpbmdUeXBlSW5Db25maWcgPSBSZWFjdFJlZHV4LnVzZVNlbGVjdG9yKChzdGF0ZTogSU1TdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBzdGF0ZS5hcHBDb25maWcud2lkZ2V0c1twcm9wcy53aWRnZXRJZF1cbiAgICByZXR1cm4gd2lkZ2V0SnNvbi5jb25maWcucmVzdWx0UGFnaW5nU3R5bGVcbiAgfSlcblxuICAvLyBHZXQgdGhlIGluaXRpYWwgcGFnZSBzaXplIGZvciBzaW5nbGUtcGFnZSAoTGF6eUxvYWQpIHJlc3VsdHNcbiAgLy8gVGhpcyBhbGxvd3MgdXNlcnMgdG8gY29uZmlndXJlIGhvdyBtYW55IHJlY29yZHMgYXJlIGxvYWRlZCBpbml0aWFsbHkgd2hlbiB1c2luZyBzaW5nbGUtcGFnZSBtb2RlXG4gIC8vIERlZmF1bHRzIHRvIDEwMCBpZiBub3QgY29uZmlndXJlZFxuICBjb25zdCBsYXp5TG9hZEluaXRpYWxQYWdlU2l6ZSA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IHN0YXRlLmFwcENvbmZpZy53aWRnZXRzW3Byb3BzLndpZGdldElkXVxuICAgIHJldHVybiB3aWRnZXRKc29uLmNvbmZpZy5sYXp5TG9hZEluaXRpYWxQYWdlU2l6ZVxuICB9KVxuXG5cbiAgLy8gV2F0Y2ggZm9yIHdoZW4gcmVzdWx0cyBhcmUgcmVhZHkgYW5kIHN3aXRjaCB0byBSZXN1bHRzIHRhYlxuICAvLyBPTkxZIGF1dG8tc3dpdGNoIHdoZW4gYSBxdWVyeSB3YXMganVzdCBleGVjdXRlZCBhbmQgcmVzdWx0cyBhcmUgbG9hZGVkXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gRG9uJ3QgYXV0by1zd2l0Y2ggaWYgdXNlciBtYW51YWxseSBzd2l0Y2hlZCB0YWJzXG4gICAgaWYgKG1hbnVhbFRhYlN3aXRjaFJlZi5jdXJyZW50KSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnYXV0by1zd2l0Y2gtc2tpcHBlZCcsXG4gICAgICAgIHJlYXNvbjogJ21hbnVhbC10YWItc3dpdGNoLWZsYWctc2V0JyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogcXVlcnlJdGVtLmNvbmZpZ0lkLFxuICAgICAgICBhY3RpdmVUYWIsXG4gICAgICAgIHJlc3VsdENvdW50LFxuICAgICAgICBxdWVyeUp1c3RFeGVjdXRlZFJlZjogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEZPUkNFRDogQWx3YXlzIHVzZSBTaW1wbGVMaXN0IC0gd2UncmUgZG9uZSB3aXRoIGxhenkgbG9hZGluZyBpc3N1ZXNcbiAgICAvLyBSZWNvcmRzIGFyZSBhdmFpbGFibGUgaW1tZWRpYXRlbHksIHNvIHdlIGNhbiBzd2l0Y2ggYXMgc29vbiBhcyByZXN1bHRDb3VudCA+IDBcbiAgICBjb25zdCBpc1NpbXBsZUxpc3QgPSB0cnVlXG4gICAgXG4gICAgLy8gT05MWSBhdXRvLXN3aXRjaCB3aGVuOlxuICAgIC8vIDEuIEEgcXVlcnkgd2FzIGp1c3QgZXhlY3V0ZWQgKHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgPT09IHRydWUpXG4gICAgLy8gMi4gV2UgaGF2ZSByZXN1bHRzIChyZXN1bHRDb3VudCA+IDApXG4gICAgLy8gMy4gUmVjb3JkcyBhcmUgYWN0dWFsbHkgbG9hZGVkOlxuICAgIC8vICAgIC0gRm9yIFNpbXBsZUxpc3Q6IHJlc3VsdENvdW50ID4gMCBpcyBzdWZmaWNpZW50IChyZWNvcmRzIGF2YWlsYWJsZSBpbW1lZGlhdGVseSlcbiAgICAvLyAgICAtIEZvciBMYXp5TG9hZDogcmVjb3Jkc1JlZi5jdXJyZW50IG11c3QgaGF2ZSBkYXRhICh3YWl0IGZvciBsYXp5IGxvYWRpbmcpXG4gICAgLy8gNC4gV2UncmUgY3VycmVudGx5IG9uIHRoZSBxdWVyeSB0YWIgKGRvbid0IHN3aXRjaCBpZiBhbHJlYWR5IG9uIHJlc3VsdHMpXG4gICAgY29uc3QgaGFzUmVjb3JkcyA9IGlzU2ltcGxlTGlzdCBcbiAgICAgID8gcmVzdWx0Q291bnQgPiAwIFxuICAgICAgOiAocmVjb3Jkc1JlZi5jdXJyZW50ICYmIHJlY29yZHNSZWYuY3VycmVudC5sZW5ndGggPiAwKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnYXV0by1zd2l0Y2gtY2hlY2snLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgIGFjdGl2ZVRhYixcbiAgICAgIHJlc3VsdENvdW50LFxuICAgICAgcXVlcnlKdXN0RXhlY3V0ZWRSZWY6IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQsXG4gICAgICBpc1NpbXBsZUxpc3QsXG4gICAgICBwYWdpbmdUeXBlSW5Db25maWcsXG4gICAgICBoYXNSZWNvcmRzLFxuICAgICAgcmVjb3Jkc1JlZkxlbmd0aDogcmVjb3Jkc1JlZi5jdXJyZW50Py5sZW5ndGggfHwgMCxcbiAgICAgIG1hbnVhbFRhYlN3aXRjaFJlZjogbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQsXG4gICAgICB3aWxsQXV0b1N3aXRjaDogcXVlcnlKdXN0RXhlY3V0ZWRSZWYuY3VycmVudCAmJiByZXN1bHRDb3VudCA+IDAgJiYgaGFzUmVjb3JkcyAmJiBhY3RpdmVUYWIgPT09ICdxdWVyeScsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIFxuICAgIGlmIChxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ICYmIFxuICAgICAgICByZXN1bHRDb3VudCA+IDAgJiYgXG4gICAgICAgIGhhc1JlY29yZHMgJiYgXG4gICAgICAgIGFjdGl2ZVRhYiA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2F1dG8tc3dpdGNoLXRyaWdnZXJlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgZnJvbVRhYjogYWN0aXZlVGFiLFxuICAgICAgICB0b1RhYjogJ3Jlc3VsdHMnLFxuICAgICAgICByZXN1bHRDb3VudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgc2V0QWN0aXZlVGFiKCdyZXN1bHRzJylcbiAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgPSBmYWxzZSAvLyBSZXNldCBhZnRlciBzd2l0Y2hpbmdcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdhdXRvLXN3aXRjaC1jb21wbGV0ZWQnLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmUmVzZXQ6IHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtyZXN1bHRDb3VudCwgYWN0aXZlVGFiLCBwYWdpbmdUeXBlSW5Db25maWddKVxuXG4gIC8vIFZlcmlmeSBkcm9wZG93bnMgYXJlIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyIHdoZW4gcHJlc2VudFxuICAvLyBUaGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IGZvciBncm91cGVkIHF1ZXJpZXMgd2hlcmUgZHJvcGRvd25zIG5lZWQgdG8gYmUgc3luY2hyb25pemVkXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gT25seSB2ZXJpZnkgaWYgd2UgaGF2ZSBhIGhhc2ggcGFyYW1ldGVyXG4gICAgaWYgKCFpbml0aWFsSW5wdXRWYWx1ZSB8fCAhcXVlcnlJdGVtLnNob3J0SWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgdGhlIGN1cnJlbnQgcXVlcnlJdGVtIG1hdGNoZXMgd2hhdCB3ZSBleHBlY3QgZnJvbSBoYXNoIHBhcmFtZXRlclxuICAgIGNvbnN0IGV4cGVjdGVkU2hvcnRJZCA9IHF1ZXJ5SXRlbS5zaG9ydElkXG4gICAgY29uc3QgaXNHcm91cGVkUXVlcnkgPSBxdWVyeUl0ZW0uZ3JvdXBJZCAhPT0gbnVsbCAmJiBxdWVyeUl0ZW0uZ3JvdXBJZCAhPT0gdW5kZWZpbmVkXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgZHJvcGRvd25zIGFyZSBjb3JyZWN0bHkgc2V0IGZvciBncm91cGVkIHF1ZXJpZXNcbiAgICBpZiAoaXNHcm91cGVkUXVlcnkpIHtcbiAgICAgIGNvbnN0IGV4cGVjdGVkR3JvdXBJZCA9IHF1ZXJ5SXRlbS5ncm91cElkXG4gICAgICBjb25zdCBhY3R1YWxHcm91cElkID0gc2VsZWN0ZWRHcm91cElkXG4gICAgICBjb25zdCBleHBlY3RlZFF1ZXJ5SW5kZXggPSBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleFxuICAgICAgXG4gICAgICBpZiAoZXhwZWN0ZWRHcm91cElkICE9PSBhY3R1YWxHcm91cElkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdkcm9wZG93bi1ncm91cC1taXNtYXRjaCcsXG4gICAgICAgICAgZXhwZWN0ZWRHcm91cElkLFxuICAgICAgICAgIGFjdHVhbEdyb3VwSWQsXG4gICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICAgIHdhcm5pbmc6ICdGaXJzdCBkcm9wZG93biBtYXkgbm90IGJlIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmIChleHBlY3RlZFF1ZXJ5SW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBWZXJpZnkgdGhlIHF1ZXJ5IGluZGV4IHdpdGhpbiB0aGUgZ3JvdXAgbWF0Y2hlc1xuICAgICAgICBjb25zdCBncm91cEl0ZW1zID0gZ3JvdXBzPy5bZXhwZWN0ZWRHcm91cElkXT8uaXRlbXNcbiAgICAgICAgaWYgKGdyb3VwSXRlbXMgJiYgZ3JvdXBJdGVtcy5sZW5ndGggPiBleHBlY3RlZFF1ZXJ5SW5kZXgpIHtcbiAgICAgICAgICBjb25zdCBleHBlY3RlZFF1ZXJ5Q29uZmlnSWQgPSBncm91cEl0ZW1zW2V4cGVjdGVkUXVlcnlJbmRleF0/LmNvbmZpZ0lkXG4gICAgICAgICAgY29uc3QgYWN0dWFsUXVlcnlDb25maWdJZCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgIGlmIChleHBlY3RlZFF1ZXJ5Q29uZmlnSWQgIT09IGFjdHVhbFF1ZXJ5Q29uZmlnSWQpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAnZHJvcGRvd24tcXVlcnktaW5kZXgtbWlzbWF0Y2gnLFxuICAgICAgICAgICAgICBleHBlY3RlZFF1ZXJ5Q29uZmlnSWQsXG4gICAgICAgICAgICAgIGFjdHVhbFF1ZXJ5Q29uZmlnSWQsXG4gICAgICAgICAgICAgIGV4cGVjdGVkUXVlcnlJbmRleCxcbiAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICAgICAgICB3YXJuaW5nOiAnU2Vjb25kIGRyb3Bkb3duIG1heSBub3QgYmUgc3luY2hyb25pemVkIHdpdGggaGFzaCBwYXJhbWV0ZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICBldmVudDogJ2Ryb3Bkb3ducy1zeW5jaHJvbml6ZWQnLFxuICAgICAgICAgICAgICBxdWVyeUl0ZW1TaG9ydElkOiBleHBlY3RlZFNob3J0SWQsXG4gICAgICAgICAgICAgIGdyb3VwSWQ6IGV4cGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXg6IGV4cGVjdGVkUXVlcnlJbmRleCxcbiAgICAgICAgICAgICAgbm90ZTogJ0Ryb3Bkb3ducyBzeW5jaHJvbml6ZWQgd2l0aCBoYXNoIHBhcmFtZXRlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSAtIHZlcmlmeSBpdCdzIHNlbGVjdGVkXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICBldmVudDogJ2Ryb3Bkb3ducy1zeW5jaHJvbml6ZWQtdW5ncm91cGVkJyxcbiAgICAgICAgcXVlcnlJdGVtU2hvcnRJZDogZXhwZWN0ZWRTaG9ydElkLFxuICAgICAgICBub3RlOiAnVW5ncm91cGVkIHF1ZXJ5IGRyb3Bkb3duIHN5bmNocm9uaXplZCB3aXRoIGhhc2ggcGFyYW1ldGVyJ1xuICAgICAgfSlcbiAgICB9XG4gIH0sIFtpbml0aWFsSW5wdXRWYWx1ZSwgcXVlcnlJdGVtLnNob3J0SWQsIHF1ZXJ5SXRlbS5ncm91cElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIHNlbGVjdGVkR3JvdXBJZCwgc2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXgsIGdyb3Vwc10pXG5cbiAgY29uc3QgdXNlT3V0cHV0RHM6IEltbXV0YWJsZU9iamVjdDxVc2VEYXRhU291cmNlPiA9IFJlYWN0LnVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIEltbXV0YWJsZSh7XG4gICAgICAgIGRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZCxcbiAgICAgICAgbWFpbkRhdGFTb3VyY2VJZDogcXVlcnlJdGVtLm91dHB1dERhdGFTb3VyY2VJZFxuICAgICAgfSksXG4gICAgW3F1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRdXG4gIClcblxuICBjb25zdCB1cGRhdGVEYXRhU291cmNlID0gUmVhY3QudXNlQ2FsbGJhY2soKGRzPzogRGF0YVNvdXJjZSkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnREcyA9IGRzID8/IGRhdGFTb3VyY2VcbiAgICAvLyBzaG91bGQgZGlzYWJsZSBzcGF0aWFsIGZpbHRlciBpZiB0aGUgZGF0YVNvdXJjZSBpcyBhbiBvdXRwdXQgZHMgYW5kIGl0IGFscmVhZHkgaGFzIHNwYXRpYWwgZmlsdGVyXG4gICAgaWYgKGN1cnJlbnREcz8uZ2V0RGF0YVNvdXJjZUpzb24oKT8uaXNPdXRwdXRGcm9tV2lkZ2V0KSB7XG4gICAgICBjb25zdCBxRHM6IFF1ZXJpYWJsZURhdGFTb3VyY2UgPSBjdXJyZW50RHMgYXMgUXVlcmlhYmxlRGF0YVNvdXJjZVxuICAgICAgY29uc3QgcVBhcmFtcyA9IHFEcy5nZXRDdXJyZW50UXVlcnlQYXJhbXM/LigpIGFzIEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zXG4gICAgICBpZiAocVBhcmFtcy5nZW9tZXRyeSAhPSBudWxsKSB7XG4gICAgICAgIHNldFNwYXRpYWxGaWx0ZXJFbmFibGVkKGZhbHNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0U3BhdGlhbEZpbHRlckVuYWJsZWQodHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtkYXRhU291cmNlXSlcblxuICBjb25zdCBoYW5kbGVTdGF0dXNDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygoZW5hYmxlZDogYm9vbGVhbikgPT4ge1xuICAgIHNldEVuYWJsZWQoZW5hYmxlZClcbiAgICB1cGRhdGVEYXRhU291cmNlKClcbiAgfSwgW3VwZGF0ZURhdGFTb3VyY2VdKVxuXG4gIGNvbnN0IGhhbmRsZU91dHB1dERhdGFTb3VyY2VJbmZvQ2hhbmdlID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZm8sIHByZUluZm8pID0+IHtcbiAgICBjb25zdCBvdXRwdXRJZCA9IHF1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRcbiAgICBjb25zdCBmaWx0ZXIgPSBpbmZvPy53aWRnZXRRdWVyaWVzID8gaW5mby53aWRnZXRRdWVyaWVzW2BzZXRGaWx0ZXItJHtvdXRwdXRJZH1gXSA6IG51bGxcbiAgICBpZiAoZmlsdGVyID09IG51bGwpIHsgLy8gZmlsdGVyIGlzIG51bGwgbWVhbnMgdGhlcmUgYXJlIGluY29tcGxldGUgcXVlcmllcywgaWdub3JlIHRoaXMgY2hhbmdlXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgcHJlRmlsdGVyID0gcHJlSW5mbz8ud2lkZ2V0UXVlcmllcyA/IHByZUluZm8ud2lkZ2V0UXVlcmllc1tgc2V0RmlsdGVyLSR7b3V0cHV0SWR9YF0gOiBudWxsXG4gICAgaWYgKGZpbHRlcj8ud2hlcmUgIT09IHByZUZpbHRlcj8ud2hlcmUpIHtcbiAgICAgIHNldERhdGFBY3Rpb25GaWx0ZXIoZmlsdGVyKVxuICAgIH1cbiAgfSwgW3F1ZXJ5SXRlbS5vdXRwdXREYXRhU291cmNlSWRdKVxuXG4gIGNvbnN0IHB1Ymxpc2hEYXRhQ2xlYXJlZE1zZyA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIW91dHB1dERTKSByZXR1cm5cbiAgICBjb25zdCBkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSA9IG5ldyBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZShwcm9wcy53aWRnZXRJZCwgUmVjb3JkU2V0Q2hhbmdlVHlwZS5SZW1vdmUsIFtvdXRwdXREUy5pZF0pXG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSlcbiAgICBhd2FpdCBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UocHJvcHMud2lkZ2V0SWQsIFtdLCBbb3V0cHV0RFMuaWRdKSlcbiAgfSwgW3Byb3BzLndpZGdldElkLCBvdXRwdXREU10pXG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgcXVlcnkgcmVzdWx0cyBmcm9tIHRoZSBVSSBhbmQgbWFwLlxuICAgKiBUaGlzIGlzIHRoZSBzaW5nbGUgc291cmNlIG9mIHRydXRoIGZvciBjbGVhcmluZyByZXN1bHRzLlxuICAgKiBJdCBjbGVhcnMgdGhlIHJlY29yZHMsIHJlc2V0cyB0aGUgcmVzdWx0IGNvdW50LCBjbGVhcnMgc2VsZWN0aW9uIGZyb20gdGhlIG1hcCxcbiAgICogcHVibGlzaGVzIGEgY2xlYXJlZCBtZXNzYWdlIHRvIHRoZSBtYXAsIHN3aXRjaGVzIGJhY2sgdG8gdGhlIFF1ZXJ5IHRhYixcbiAgICogYW5kIGluY3JlbWVudHMgdGhlIHF1ZXJ5IGV4ZWN1dGlvbiBrZXkgdG8gZm9yY2UgUXVlcnlUYXNrUmVzdWx0IHRvIHJlbW91bnQgd2l0aCBmcmVzaCBzdGF0ZS5cbiAgICovXG4gIGNvbnN0IGNsZWFyUmVzdWx0ID0gUmVhY3QudXNlQ2FsbGJhY2soYXN5bmMgKHJlYXNvbjogc3RyaW5nID0gJ3Vua25vd24nKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgaGFzT3V0cHV0RFM6ICEhb3V0cHV0RFMsXG4gICAgICByZWFzb24sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuXG4gICAgcmVjb3Jkc1JlZi5jdXJyZW50ID0gbnVsbFxuICAgIG91dHB1dERTPy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgICBzZXRSZXN1bHRDb3VudCgwKVxuICAgIFxuICAgIC8vIE5PVEU6IEdyYXBoaWNzIGxheWVyIGNsZWFyaW5nIGlzIG5vdyBoYW5kbGVkIGluc2lkZSBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXNcbiAgICAvLyBjYWxsZWQgYmVsb3cuIFdlIGVuc3VyZSB0aGlzIGlzIGF3YWl0ZWQgdG8gcHJldmVudCByYWNlIGNvbmRpdGlvbnMuXG4gICAgXG4gICAgLy8gQ2xlYXIgc2VsZWN0aW9uIGRpcmVjdGx5IGZyb20gZGF0YSBzb3VyY2UgdXNpbmcgdXRpbGl0eSBmdW5jdGlvblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMocHJvcHMud2lkZ2V0SWQsIG91dHB1dERTLCB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LCBncmFwaGljc0xheWVyKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICBldmVudDogJ2NsZWFyUmVzdWx0LXNlbGVjdGlvbi1jbGVhcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclJlc3VsdC1zZWxlY3Rpb24tY2xlYXItZmFpbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIENsZWFyIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzIHdoZW4gY2xlYXJpbmcgcmVzdWx0c1xuICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UoW10pXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdhY2N1bXVsYXRlZC1yZWNvcmRzLWNsZWFyZWQtb24tY2xlYXItcmVzdWx0cycsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZFxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgYXdhaXQgcHVibGlzaERhdGFDbGVhcmVkTXNnKClcbiAgICAvLyBTd2l0Y2ggYmFjayB0byBRdWVyeSB0YWIgd2hlbiBjbGVhcmluZyByZXN1bHRzXG4gICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgc2V0U3RhZ2UoMClcbiAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IGZhbHNlIC8vIFJlc2V0IHNlbGVjdGlvbiBmbGFnIHdoZW4gY2xlYXJpbmdcbiAgICAvLyBJbmNyZW1lbnQgcXVlcnkgZXhlY3V0aW9uIGtleSB0byBmb3JjZSBRdWVyeVRhc2tSZXN1bHQgcmVtb3VudCB3aXRoIGZyZXNoIHN0YXRlXG4gICAgcXVlcnlFeGVjdXRpb25LZXlSZWYuY3VycmVudCArPSAxXG4gICAgLy8gQ2xlYXIgZXJyb3Igc3RhdGVzIHdoZW4gY2xlYXJpbmcgcmVzdWx0c1xuICAgIHNldFNlbGVjdGlvbkVycm9yKG51bGwpXG4gICAgc2V0Wm9vbUVycm9yKG51bGwpXG5cbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2NsZWFyUmVzdWx0LWNvbXBsZXRlJyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gIH0sIFtvdXRwdXREUywgcHVibGlzaERhdGFDbGVhcmVkTXNnLCBwcm9wcy53aWRnZXRJZCwgcXVlcnlJdGVtLmNvbmZpZ0lkLCBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgZ3JhcGhpY3NMYXllcl0pXG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgZGF0YSBzb3VyY2UgY3JlYXRpb24gd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiBxdWVyeSBpdGVtcy5cbiAgICogV2hlbiBhIG5ldyBxdWVyeSBpdGVtIGlzIHNlbGVjdGVkIChlLmcuLCBzd2l0Y2hpbmcgZnJvbSBQYXJjZWwgdG8gTWFqb3IpLFxuICAgKiB0aGlzIGNsZWFycyBvbGQgcmVzdWx0cyB0byBlbnN1cmUgYWxsIGNsZWFudXAgbG9naWMgcnVucyBwcm9wZXJseS5cbiAgICogXG4gICAqIEBwYXJhbSBkcyAtIFRoZSBuZXdseSBjcmVhdGVkIGRhdGEgc291cmNlIGZvciB0aGUgc2VsZWN0ZWQgcXVlcnkgaXRlbVxuICAgKi9cbiAgY29uc3QgaGFuZGxlRGF0YVNvdXJjZUNyZWF0ZWQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoZHM6IERhdGFTb3VyY2UpID0+IHtcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICBldmVudDogJ2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkLXN0YXJ0JyxcbiAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIEluIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgcHJlc2VydmUgYWNjdW11bGF0ZWQgcmVjb3JkcyBhbmQgc2VsZWN0aW9uIC0gZG9uJ3QgY2xlYXJcbiAgICBpZiAoKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIFxuICAgICAgICAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ3ByZXNlcnZpbmctc2VsZWN0aW9uLW9uLXF1ZXJ5LXN3aXRjaC1oYW5kbGVEYXRhU291cmNlQ3JlYXRlZCcsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICBzZXREYXRhU291cmNlKGRzKVxuICAgICAgdXBkYXRlRGF0YVNvdXJjZShkcylcbiAgICAgIHNldFN0YWdlKDApXG4gICAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JylcbiAgICAgIHJldHVybiAvLyBTa2lwIGNsZWFyaW5nIC0gcHJlc2VydmUgc2VsZWN0aW9uXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIGNsZWFyIG9sZCByZXN1bHRzXG4gICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVEYXRhU291cmNlQ3JlYXRlZC1jbGVhcmluZy1yZXN1bHRzLWZvci1uZXctbW9kZScsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIGF3YWl0IGNsZWFyUmVzdWx0KCdoYW5kbGVEYXRhU291cmNlQ3JlYXRlZC1uZXctbW9kZScpXG5cbiAgICBzZXREYXRhU291cmNlKGRzKVxuICAgIHVwZGF0ZURhdGFTb3VyY2UoZHMpXG4gICAgc2V0U3RhZ2UoMClcbiAgICBzZXRBY3RpdmVUYWIoJ3F1ZXJ5JykgLy8gUmV0dXJuIHRvIFF1ZXJ5IHRhYiB3aGVuIHN3aXRjaGluZyBxdWVyaWVzXG4gIH0sIFt1cGRhdGVEYXRhU291cmNlLCBjbGVhclJlc3VsdCwgcmVzdWx0Q291bnQsIHJlc3VsdHNNb2RlLCBhY2N1bXVsYXRlZFJlY29yZHMsIHByb3BzLndpZGdldElkXSlcblxuICBjb25zdCBoYW5kbGVPdXRwdXREYXRhU291cmNlQ3JlYXRlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChkczogRGF0YVNvdXJjZSkgPT4ge1xuICAgIHNldE91dHB1dERTKGRzKVxuICAgIFxuICAgIC8vIENIRUNLIHJvb3REYXRhU291cmNlLm1hcCB0byBzZWUgaG93IGZyYW1ld29yayBhY2Nlc3NlcyBtYXAgdmlld1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcmlnaW5EYXRhU291cmNlcyA9IGRzLmdldE9yaWdpbkRhdGFTb3VyY2VzKClcbiAgICAgIGNvbnN0IG9yaWdpbkRTID0gb3JpZ2luRGF0YVNvdXJjZXM/LlswXVxuICAgICAgaWYgKG9yaWdpbkRTKSB7XG4gICAgICAgIGNvbnN0IHJvb3REUyA9IG9yaWdpbkRTLmdldFJvb3REYXRhU291cmNlKClcbiAgICAgICAgaWYgKHJvb3REUykge1xuICAgICAgICAgIC8vIEV4cG9zZSByb290RFMgdG8gd2luZG93IGZvciBjb25zb2xlIGluc3BlY3Rpb25cbiAgICAgICAgICA7KHdpbmRvdyBhcyBhbnkpLl9fcXVlcnlTaW1wbGVSb290RFMgPSByb290RFNcbiAgICAgICAgICA7KHdpbmRvdyBhcyBhbnkpLl9fcXVlcnlTaW1wbGVSb290RFNNYXAgPSAocm9vdERTIGFzIGFueSkubWFwXG4gICAgICAgICAgOyh3aW5kb3cgYXMgYW55KS5fX3F1ZXJ5U2ltcGxlT3JpZ2luRFMgPSBvcmlnaW5EU1xuICAgICAgICAgIFxuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgICAgICBldmVudDogJ2NoZWNrLXJvb3QtZGF0YXNvdXJjZS1tYXAnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgb3V0cHV0RFNJZDogZHMuaWQsXG4gICAgICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgICAgIHJvb3REU0lkOiByb290RFMuaWQsXG4gICAgICAgICAgICByb290RFNUeXBlOiByb290RFMudHlwZSxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcDogISEocm9vdERTIGFzIGFueSkubWFwLFxuICAgICAgICAgICAgcm9vdERTTWFwVHlwZTogKHJvb3REUyBhcyBhbnkpLm1hcCA/IHR5cGVvZiAocm9vdERTIGFzIGFueSkubWFwIDogJ25vbmUnLFxuICAgICAgICAgICAgcm9vdERTTWFwSWQ6IChyb290RFMgYXMgYW55KS5tYXA/LmlkIHx8ICdub25lJyxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcFZpZXc6ICEhKHJvb3REUyBhcyBhbnkpLm1hcD8udmlldyxcbiAgICAgICAgICAgIGhhc1Jvb3REU01hcFZpZXdzOiAhIShyb290RFMgYXMgYW55KS5tYXA/LnZpZXdzLFxuICAgICAgICAgICAgcm9vdERTTWFwVmlld3NMZW5ndGg6IChyb290RFMgYXMgYW55KS5tYXA/LnZpZXdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIC8vIExvZyBzb21lIG1hcCBwcm9wZXJ0aWVzIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgcm9vdERTTWFwS2V5czogKHJvb3REUyBhcyBhbnkpLm1hcCA/IE9iamVjdC5rZXlzKChyb290RFMgYXMgYW55KS5tYXApLmZpbHRlcihrZXkgPT4gXG4gICAgICAgICAgICAgICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIFxuICAgICAgICAgICAgICB0eXBlb2YgKHJvb3REUyBhcyBhbnkpLm1hcFtrZXldICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICApLnNsaWNlKDAsIDIwKSA6IFtdLFxuICAgICAgICAgICAgLy8gTG9nIHRoYXQgb2JqZWN0cyBhcmUgYXZhaWxhYmxlIG9uIHdpbmRvdyBmb3IgY29uc29sZSBpbnNwZWN0aW9uXG4gICAgICAgICAgICBjb25zb2xlSW5zcGVjdGlvbjogJ0NoZWNrIHdpbmRvdy5fX3F1ZXJ5U2ltcGxlUm9vdERTLCB3aW5kb3cuX19xdWVyeVNpbXBsZVJvb3REU01hcCwgd2luZG93Ll9fcXVlcnlTaW1wbGVPcmlnaW5EUycsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIG1hcCBleGlzdHMsIGNoZWNrIGl0cyB2aWV3XG4gICAgICAgICAgY29uc3Qgcm9vdE1hcCA9IChyb290RFMgYXMgYW55KS5tYXBcbiAgICAgICAgICBpZiAocm9vdE1hcCkge1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IHJvb3RNYXAudmlldyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAocm9vdE1hcC52aWV3cz8uZ2V0SXRlbUF0Py4oMCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHJvb3RNYXAudmlld3M/Lmxlbmd0aCA+IDAgPyByb290TWFwLnZpZXdzWzBdIDogbnVsbClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdjaGVjay1yb290LWRhdGFzb3VyY2UtbWFwLXZpZXcnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGhhc1ZpZXc6ICEhdmlldyxcbiAgICAgICAgICAgICAgdmlld1R5cGU6IHZpZXc/LnR5cGUgfHwgJ25vbmUnLFxuICAgICAgICAgICAgICB2aWV3SWQ6IHZpZXc/LmlkIHx8ICdub25lJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NoZWNrLXJvb3QtZGF0YXNvdXJjZS1tYXAtZXJyb3InLFxuICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGdyYXBoaWNzIGxheWVyIGxhemlseSBpZiBlbmFibGVkIGFuZCBub3QgYWxyZWFkeSBpbml0aWFsaXplZFxuICAgIGlmICh1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgIGF3YWl0IG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIoZHMpXG4gICAgICAvLyBBZnRlciBpbml0aWFsaXphdGlvbiwgZ3JhcGhpY3NMYXllciBhbmQgbWFwVmlldyBwcm9wcyBzaG91bGQgYmUgdXBkYXRlZFxuICAgICAgLy8gQnV0IHNpbmNlIHByb3BzIGNvbWUgZnJvbSByZWZzLCB3ZSBuZWVkIHRvIHdhaXQgZm9yIHdpZGdldCByZS1yZW5kZXJcbiAgICAgIC8vIEZvciBub3csIHVzZSB0aGUgcHJvcHMgdGhhdCB3aWxsIGJlIHVwZGF0ZWQgb24gbmV4dCByZW5kZXJcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgaW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSBhbmQgd2UgaGF2ZSBhY2N1bXVsYXRlZCByZWNvcmRzLCByZS1zZWxlY3QgdGhlbVxuICAgIC8vIFRoaXMgdXNlcyB0aGUgc2FtZSBsb2dpYyBhcyBhZnRlciBxdWVyeSBjb21wbGV0aW9uIC0gc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2hcbiAgICAvLyBUaGlzIGVuc3VyZXMgcmVjb3JkcyBhcmUgc2VsZWN0ZWQgYm90aCBvbiB0aGUgbWFwIGFuZCBpbiB0aGUgUmVzdWx0cyB0YWJcbiAgICBpZiAoKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIFxuICAgICAgICAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIFVzZSBhIGRlbGF5IHRvIGVuc3VyZSB0aGUgRFMgaXMgZnVsbHkgcmVhZHkgYW5kIGdyYXBoaWNzIGxheWVyIHByb3BzIGFyZSB1cGRhdGVkIGFmdGVyIHdpZGdldCByZS1yZW5kZXJcbiAgICAgIC8vIElmIGdyYXBoaWNzIGxheWVyIHdhcyBqdXN0IGluaXRpYWxpemVkLCB3YWl0IGEgYml0IGxvbmdlciBmb3IgcHJvcHMgdG8gdXBkYXRlXG4gICAgICBjb25zdCBkZWxheSA9ICh1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIpID8gMjAwIDogMTAwXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgZmVhdHVyZURTID0gZHMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgICBpZiAoZmVhdHVyZURTICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHJlY29yZElkcyA9IGFjY3VtdWxhdGVkUmVjb3Jkcy5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgICAgIC8vIFVzZSB0aGUgc2FtZSBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaCB0aGF0J3MgdXNlZCBhZnRlciBxdWVyeSBjb21wbGV0aW9uXG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHNlbGVjdCByZWNvcmRzIG9uIHRoZSBtYXAgYW5kIHRyaWdnZXIgaGFuZGxlRGF0YVNvdXJjZUluZm9DaGFuZ2VcbiAgICAgICAgICAvLyBpbiBxdWVyeS1yZXN1bHQudHN4IHRvIHVwZGF0ZSBzZWxlY3RlZFJlY29yZHMgc3RhdGUgZm9yIHRoZSBSZXN1bHRzIHRhYlxuICAgICAgICAgIC8vIFVzZSBncmFwaGljcyBsYXllciBpZiBlbmFibGVkIChwcm9wcyBzaG91bGQgYmUgdXBkYXRlZCBhZnRlciB3aWRnZXQgcmUtcmVuZGVyKVxuICAgICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxlY3RSZWNvcmRzQW5kUHVibGlzaChcbiAgICAgICAgICAgICAgICAgIHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgZmVhdHVyZURTLFxuICAgICAgICAgICAgICAgICAgcmVjb3JkSWRzLFxuICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllcixcbiAgICAgICAgICAgICAgICAgIG1hcFZpZXdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSByZWNvcmRzUmVmIHNvIHJlc3VsdHMgdGFiIHNob3dzIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICByZWNvcmRzUmVmLmN1cnJlbnQgPSBhY2N1bXVsYXRlZFJlY29yZHNcbiAgICAgICAgICAgICAgICBzZXRSZXN1bHRDb3VudChhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZS1zZWxlY3RlZC1hY2N1bXVsYXRlZC1yZWNvcmRzLWFmdGVyLXF1ZXJ5LXN3aXRjaCcsXG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICBvdXRwdXREU0lkOiBmZWF0dXJlRFMuaWQsXG4gICAgICAgICAgICAgICAgICByZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFZlcmlmeSB3aGF0J3MgYWN0dWFsbHkgc2VsZWN0ZWQgaW4gdGhlIERTIGFmdGVyIGEgZGVsYXlcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGRzID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGZlYXR1cmVEUy5pZClcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5EUyA9IGRzPy5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJZHNJbkRTID0gZHM/LmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgPz8gW11cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAndmVyaWZ5LXJlY29yZHMtYWZ0ZXItcmVzZWxlY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dERTSWQ6IGZlYXR1cmVEUy5pZCxcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsU2VsZWN0ZWRJbkRTOiBzZWxlY3RlZEluRFM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZElkc0luRFM6IHNlbGVjdGVkSWRzSW5EUy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZHNNYXRjaDogc2VsZWN0ZWRJbkRTPy5sZW5ndGggPT09IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSwgMjAwKVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZS1zZWxlY3Rpb24tZmFpbGVkLWFmdGVyLXN3aXRjaCcsXG4gICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSgpXG4gICAgICAgIH1cbiAgICAgIH0sIDEwMClcbiAgICB9XG4gIH0sIFtyZXN1bHRzTW9kZSwgYWNjdW11bGF0ZWRSZWNvcmRzLCBwcm9wcy53aWRnZXRJZCwgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCwgb25Jbml0aWFsaXplR3JhcGhpY3NMYXllcl0pXG5cbiAgLy8gQ2xlYXIgcmVzdWx0cyB3aGVuIHF1ZXJ5IGl0ZW0gY2hhbmdlcyAoZS5nLiwgd2hlbiBuZXcgaGFzaCBwYXJhbWV0ZXIgdHJpZ2dlcnMgZGlmZmVyZW50IHF1ZXJ5KVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgY2xlYXIgaWYgd2UncmUgYWN0dWFsbHkgc3dpdGNoaW5nIHRvIGEgZGlmZmVyZW50IHF1ZXJ5IChub3QganVzdCByZS1yZW5kZXJpbmcpXG4gICAgY29uc3QgaXNTd2l0Y2hpbmdRdWVyaWVzID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ICE9PSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgICBcbiAgICAvLyBPbmx5IGNsZWFyIHJlc3VsdHMgd2hlbiBzd2l0Y2hpbmcgcXVlcmllcyBpZiB3ZSdyZSBpbiBcIk5ld1wiIG1vZGVcbiAgICAvLyBJbiBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHdlIHdhbnQgdG8gcHJlc2VydmUgYWNjdW11bGF0ZWQgcmVjb3JkcyBhY3Jvc3MgcXVlcnkgc3dpdGNoZXNcbiAgICBpZiAoaXNTd2l0Y2hpbmdRdWVyaWVzICYmIHJlc3VsdENvdW50ID4gMCAmJiByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIC8vIFN0b3JlIHRoZSBvbGQgY29uZmlnSWQgYmVmb3JlIHVwZGF0aW5nXG4gICAgICBjb25zdCBvbGRDb25maWdJZCA9IHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudFxuICAgICAgLy8gVXBkYXRlIHRoZSByZWYgdG8gdHJhY2sgdGhlIG5ldyBxdWVyeVxuICAgICAgcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ID0gcXVlcnlJdGVtLmNvbmZpZ0lkXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyaW5nLXJlc3VsdHMtb24tcXVlcnktc3dpdGNoLW5ldy1tb2RlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICBvbGRDb25maWdJZCxcbiAgICAgICAgbmV3Q29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgcmVzdWx0c01vZGVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIENsZWFyIGltbWVkaWF0ZWx5IHdoZW4gc3dpdGNoaW5nIHF1ZXJpZXMsIGJ1dCB3cmFwIGluIHRyeS1jYXRjaCB0byBoYW5kbGVcbiAgICAgIC8vIHJhY2UgY29uZGl0aW9ucyB3aXRoIGZlYXR1cmUgaW5mbyB3aW5kb3dzIHRoYXQgbWlnaHQgYmUgcmVuZGVyaW5nXG4gICAgICB0cnkge1xuICAgICAgICBjbGVhclJlc3VsdCgncXVlcnktaXRlbS1zd2l0Y2gtbmV3LW1vZGUnKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gTG9nIGZvciBkZWJ1Z2dpbmcgYnV0IGRvbid0IHNob3cgdG8gdXNlciAoZnJhbWV3b3JrIHJhY2UgY29uZGl0aW9uKVxuICAgICAgICAvLyBUaGUgZXJyb3IgaXMgaW4gZnJhbWV3b3JrIGNvZGUgKGZlYXR1cmUtaW5mby50c3gpLCBub3Qgb3VyIGNvZGVcbiAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIGZlYXR1cmUtaW5mby50c3ggaXMgdHJ5aW5nIHRvIGFwcGVuZENoaWxkIHRvIGEgRE9NIGVsZW1lbnRcbiAgICAgICAgLy8gdGhhdCBnZXRzIHJlbW92ZWQgd2hlbiB3ZSBjbGVhciBzZWxlY3Rpb25cbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgICAgICAgIGV2ZW50OiAnY2xlYXItcmVzdWx0LXJhY2UtY29uZGl0aW9uJyxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgIG5vdGU6ICdMaWtlbHkgcmFjZSBjb25kaXRpb24gd2l0aCBmZWF0dXJlLWluZm8udHN4J1xuICAgICAgICB9KVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGNsZWFyaW5nIHJlc3VsdHMgKGxpa2VseSByYWNlIGNvbmRpdGlvbiB3aXRoIGZlYXR1cmUgaW5mbyk6JywgZXJyb3IpXG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9uJ3Qgc2V0IGVycm9yIHN0YXRlIC0gdGhpcyBpcyBleHBlY3RlZCBpbiBzb21lIHNjZW5hcmlvc1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNTd2l0Y2hpbmdRdWVyaWVzKSB7XG4gICAgICAvLyBKdXN0IHVwZGF0ZSB0aGUgcmVmIC0gZG9uJ3QgY2xlYXIgcmVzdWx0cyBpZiBpbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlIG9yIG5vIHJlc3VsdHNcbiAgICAgIHByZXZpb3VzQ29uZmlnSWRSZWYuY3VycmVudCA9IHF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgXG4gICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICBldmVudDogJ3ByZXNlcnZpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1vbi1xdWVyeS1zd2l0Y2gnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICBvbGRDb25maWdJZDogcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50LFxuICAgICAgICAgIG5ld0NvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtxdWVyeUl0ZW0uY29uZmlnSWQsIGNsZWFyUmVzdWx0LCByZXN1bHRDb3VudCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3JkcywgcHJvcHMud2lkZ2V0SWRdKVxuXG4gIGNvbnN0IG5hdlRvRm9ybSA9IFJlYWN0LnVzZUNhbGxiYWNrKGFzeW5jIChjbGVhclJlc3VsdHMgPSBmYWxzZSkgPT4ge1xuICAgIGlmIChjbGVhclJlc3VsdHMpIHtcbiAgICAgIC8vIFVzZSB0aGUgY2VudHJhbGl6ZWQgY2xlYXJSZXN1bHQgbWV0aG9kIGluc3RlYWQgb2YgZHVwbGljYXRpbmcgbG9naWNcbiAgICAgIGF3YWl0IGNsZWFyUmVzdWx0KCduYXZUb0Zvcm0tY2xlYXJSZXN1bHRzJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICAvLyBTd2l0Y2ggdG8gcXVlcnkgdGFiIGJ1dCBkb24ndCBjbGVhciByZXN1bHRzIHVubGVzcyBleHBsaWNpdGx5IHJlcXVlc3RlZFxuICAgIC8vIE1hcmsgYXMgbWFudWFsIHN3aXRjaCB0byBwcmV2ZW50IGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGludGVyZmVyaW5nXG4gICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgLy8gUmVzZXQgdGhlIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgIH0sIDEwMClcbiAgICAvLyBPbmx5IGNoYW5nZSBzdGFnZSBpZiB3ZSdyZSBjbGVhcmluZyByZXN1bHRzXG4gICAgLy8gT3RoZXJ3aXNlLCBrZWVwIHN0YWdlIGF0IDEgKHJlc3VsdHMgYXZhaWxhYmxlKSBzbyByZXN1bHRzIHBlcnNpc3RcbiAgICBpZiAoIWNsZWFyUmVzdWx0cyAmJiByZXN1bHRDb3VudCA+IDApIHtcbiAgICAgIHNldFN0YWdlKDEpIC8vIEtlZXAgcmVzdWx0cyBhdmFpbGFibGVcbiAgICB9XG4gICAgbG9kYXNoLmRlZmVyKCgpID0+IHtcbiAgICAgIGZvY3VzRWxlbWVudEluS2V5Ym9hcmRNb2RlKGJhY2tCdG5SZWYuY3VycmVudClcbiAgICB9KVxuICB9LCBbY2xlYXJSZXN1bHQsIHJlc3VsdENvdW50XSlcblxuICAvKipcbiAgICogSGFuZGxlcyB0YWIgc3dpdGNoaW5nIGJldHdlZW4gUXVlcnkgYW5kIFJlc3VsdHMgdGFicy5cbiAgICogVGFiIHN3aXRjaGluZyBwcmVzZXJ2ZXMgcmVzdWx0cyBzdGF0ZSAtIHJlc3VsdHMgcmVtYWluIHZpc2libGUgYW5kIHNlbGVjdGVkXG4gICAqIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gdGFicy4gUmVzdWx0cyBhcmUgb25seSBjbGVhcmVkIHdoZW4gZXhwbGljaXRseVxuICAgKiBjbGlja2luZyB0aGUgdHJhc2ggY2FuIGJ1dHRvbiBvciB3aGVuIHN0YXJ0aW5nIGEgbmV3IHF1ZXJ5LlxuICAgKiBcbiAgICogQHBhcmFtIHRhYiAtIFRoZSB0YWIgdG8gc3dpdGNoIHRvICgncXVlcnknIHwgJ3Jlc3VsdHMnKVxuICAgKiBAcGFyYW0gZXZlbnQgLSBPcHRpb25hbCBtb3VzZSBldmVudCB0byBwcmV2ZW50IGRlZmF1bHQgYmVoYXZpb3JcbiAgICovXG4gIGNvbnN0IGhhbmRsZVRhYkNoYW5nZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCh0YWI6ICdxdWVyeScgfCAncmVzdWx0cycsIGV2ZW50PzogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAndGFiLWNoYW5nZScsXG4gICAgICB0YWIsXG4gICAgICBjdXJyZW50VGFiOiBhY3RpdmVUYWIsXG4gICAgICByZXN1bHRDb3VudCxcbiAgICAgIGV2ZW50VHlwZTogZXZlbnQ/LnR5cGVcbiAgICB9KVxuICAgIFxuICAgIGlmIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB9XG4gICAgLy8gRG9uJ3QgYWxsb3cgc3dpdGNoaW5nIHRvIHJlc3VsdHMgaWYgdGhlcmUgYXJlIG5vIHJlc3VsdHNcbiAgICBpZiAodGFiID09PSAncmVzdWx0cycgJiYgcmVzdWx0Q291bnQgPT09IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgZXZlbnQ6ICd0YWItY2hhbmdlLWJsb2NrZWQnLFxuICAgICAgICByZWFzb246ICduby1yZXN1bHRzJyxcbiAgICAgICAgdGFiLFxuICAgICAgICByZXN1bHRDb3VudFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBNYXJrIHRoaXMgYXMgYSBtYW51YWwgc3dpdGNoIHRvIHByZXZlbnQgYXV0by1zd2l0Y2ggdXNlRWZmZWN0IGZyb20gaW50ZXJmZXJpbmdcbiAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICBzZXRBY3RpdmVUYWIodGFiKVxuICAgIFxuICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gYWxsb3cgdGhlIHN0YXRlIHVwZGF0ZSB0byBjb21wbGV0ZVxuICAgIC8vIFRoaXMgcHJldmVudHMgdGhlIGF1dG8tc3dpdGNoIHVzZUVmZmVjdCBmcm9tIGltbWVkaWF0ZWx5IHN3aXRjaGluZyBiYWNrXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IGZhbHNlXG4gICAgfSwgMTAwKVxuICAgIFxuICAgIC8vIERvbid0IGNoYW5nZSBzdGFnZSBoZXJlIC0ganVzdCBzd2l0Y2ggdGhlIHZpZXdcbiAgICAvLyBTdGFnZSBzaG91bGQgcmVtYWluIGF0IDEgKHJlc3VsdHMgYXZhaWxhYmxlKSB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIHRhYnNcbiAgfSwgW3Jlc3VsdENvdW50LCBhY3RpdmVUYWJdKVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGZvcm0gc3VibWlzc2lvbiB3aGVuIHVzZXIgY2xpY2tzIFwiQXBwbHlcIiBidXR0b24uXG4gICAqIENsZWFycyBvbGQgcmVzdWx0cyAoaWYgYW55KSBieSBwcm9ncmFtbWF0aWNhbGx5IGNsaWNraW5nIHRoZSB0cmFzaCBjYW4gYnV0dG9uLFxuICAgKiB0aGVuIGV4ZWN1dGVzIHRoZSBxdWVyeSB3aXRoIHRoZSBwcm92aWRlZCBTUUwgZXhwcmVzc2lvbiBhbmQgc3BhdGlhbCBmaWx0ZXIuXG4gICAqIFxuICAgKiBAcGFyYW0gc3FsRXhwciAtIFRoZSBTUUwgZXhwcmVzc2lvbiBmb3IgYXR0cmlidXRlIGZpbHRlcmluZ1xuICAgKiBAcGFyYW0gc3BhdGlhbEZpbHRlciAtIFRoZSBzcGF0aWFsIGZpbHRlciBvYmplY3RcbiAgICogQHBhcmFtIHJ1bnRpbWVab29tVG9TZWxlY3RlZCAtIE9wdGlvbmFsIHJ1bnRpbWUgb3ZlcnJpZGUgZm9yIHpvb20tdG8tc2VsZWN0ZWQgYmVoYXZpb3JcbiAgICovXG4gIGNvbnN0IGhhbmRsZUZvcm1TdWJtaXQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uLCBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqLCBydW50aW1lWm9vbVRvU2VsZWN0ZWQ/OiBib29sZWFuKSA9PiB7XG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzIHdoZW4gc3RhcnRpbmcgYSBuZXcgcXVlcnlcbiAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKVxuICAgIHNldFpvb21FcnJvcihudWxsKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1zdGFydCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBTdG9yZSB0aGUgcnVudGltZSB6b29tIG92ZXJyaWRlIGZvciB1c2UgYnkgQWRkIHRvIE1hcCBhY3Rpb25cbiAgICBsYXN0UnVudGltZVpvb21Ub1NlbGVjdGVkUmVmLmN1cnJlbnQgPSBydW50aW1lWm9vbVRvU2VsZWN0ZWRcbiAgICBcbiAgICBhdHRyaWJ1dGVGaWx0ZXJTcWxFeHByT2JqLmN1cnJlbnQgPSBzcWxFeHByXG4gICAgc3BhdGlhbEZpbHRlck9iai5jdXJyZW50ID0gc3BhdGlhbEZpbHRlclxuICAgIC8vIExvYWQgdGhlIGZpcnN0IHBhZ2VcbiAgICBjb25zdCBmZWF0dXJlRFMgPSBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgXG4gICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgdXNlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgLy8gVGhlc2UgcGVyc2lzdCBhY3Jvc3MgcXVlcnkgc3dpdGNoZXMsIHVubGlrZSBxdWVyeS1pdGVtLWxldmVsIHJlY29yZHNcbiAgICBsZXQgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2U6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICAgIGlmIChyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCByZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uKSB7XG4gICAgICAvLyBSb2J1c3QgY2FwdHVyZSBzdHJhdGVneTpcbiAgICAgIC8vIDEuIFRyeSByZWNvcmRzIGZyb20gcHJvcHMgKGFscmVhZHkgbWVyZ2VkIGJ5IHBhcmVudClcbiAgICAgIC8vIDIuIEZhbGxiYWNrIHRvIGN1cnJlbnRseSBzZWxlY3RlZCByZWNvcmRzIGluIERTIChjYXB0dXJlZCBkdXJpbmcgbW9kZSBzd2l0Y2gpXG4gICAgICBjb25zdCBmcm9tUHJvcCA9IGFjY3VtdWxhdGVkUmVjb3JkcyB8fCBbXVxuICAgICAgY29uc3QgZnJvbURTID0gb3V0cHV0RFM/LmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW11cbiAgICAgIFxuICAgICAgZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UgPSBmcm9tUHJvcC5sZW5ndGggPiAwID8gZnJvbVByb3AgOiBmcm9tRFNcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2FwdHVyZWQtZXhpc3RpbmctcmVjb3Jkcy1kaWFnbm9zdGljJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgZnJvbVByb3BDb3VudDogZnJvbVByb3AubGVuZ3RoLFxuICAgICAgICBmcm9tRFNDb3VudDogZnJvbURTLmxlbmd0aCxcbiAgICAgICAgZmluYWxDYXB0dXJlZENvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgIGZpcnN0UmVjb3JkSWQ6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlWzBdPy5nZXRJZD8uKCkgfHwgJ25vbmUnLFxuICAgICAgICBhbGxSZWNvcmRJZHM6IGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlLm1hcChyID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCAxMCksXG4gICAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIGNsZWFyIG9sZCByZXN1bHRzIGFuZCBncmFwaGljcyBsYXllclxuICAgIC8vIFdlIGNhbGwgY2xlYXJSZXN1bHQoKSBkaXJlY3RseSBhbmQgQVdBSVQgaXQgdG8gZW5zdXJlIGl0J3MgZmluaXNoZWQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbiBzdGFydHNcbiAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1jbGVhcmluZy1yZXN1bHRzLWZvci1uZXctbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2hhbmRsZUZvcm1TdWJtaXQtbmV3LW1vZGUnKVxuICAgIH1cbiAgICBcbiAgICAvLyBTZXQgbG9hZGluZyBzdGFnZVxuICAgIHNldFN0YWdlKDIpXG4gICAgXG4gICAgLy8gRk9SQ0VEOiBBbHdheXMgdXNlIFNpbXBsZUxpc3QgLSBmZXRjaCBBTEwgcmVjb3Jkcywgbm90IGp1c3QgYSBwYWdlXG4gICAgLy8gVXNlIGRhdGEgc291cmNlJ3MgbWF4IHJlY29yZCBjb3VudCwgb3IgZmFsbCBiYWNrIHRvIGEgbGFyZ2UgbnVtYmVyICgxMDAwMClcbiAgICBjb25zdCBtYXhSZWNvcmRDb3VudCA9IChmZWF0dXJlRFMgYXMgYW55KS5nZXRNYXhSZWNvcmRDb3VudD8uKCkgPz8gMTAwMDBcbiAgICBsZXQgcGFnZVNpemUgPSBtYXhSZWNvcmRDb3VudFxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gZ2VuZXJhdGVRdWVyeVBhcmFtcyhmZWF0dXJlRFMsIHNxbEV4cHIsIHNwYXRpYWxGaWx0ZXIsIGN1cnJlbnRJdGVtLCAxLCBwYWdlU2l6ZSlcbiAgICBxdWVyeVBhcmFtUmVmLmN1cnJlbnQgPSBxdWVyeVBhcmFtc1xuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlRm9ybVN1Ym1pdC1leGVjdXRpbmctcXVlcnknLFxuICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgd2hlcmU6IHF1ZXJ5UGFyYW1zLndoZXJlLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIC8vIENoYW5nZSBvdXRwdXQgZHMgc3RhdHVzIHRvIHVubG9hZGVkIGJlZm9yZSB1c2UgaXQgdG8gbG9hZCBjb3VudC9yZWNvcmRzLlxuICAgIGZlYXR1cmVEUy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5VbmxvYWRlZClcbiAgICBmZWF0dXJlRFMuc2V0Q291bnRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5VbmxvYWRlZClcbiAgICBsZXQgcXVlcnlSZXN1bHRDb3VudCA9IDAgLy8gQ2FwdHVyZSBjb3VudCBmcm9tIHJlY29yZHMgdG8gdXNlIGluIGZpbmFsbHkgYmxvY2tcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgIGV2ZW50OiAncGVyZi1xdWVyeS1jaGFpbi1zdGFydCcsXG4gICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIHdoZXJlOiBxdWVyeVBhcmFtcy53aGVyZSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG5cbiAgICAvLyBQRVJGT1JNQU5DRSBPUFRJTUlaQVRJT046IFJlbW92ZWQgcmVkdW5kYW50IGV4ZWN1dGVDb3VudFF1ZXJ5KCkgcm91bmQtdHJpcC5cbiAgICAvLyBTaW5jZSB3ZSBmZXRjaCBBTEwgcmVjb3JkcyAocGFnZVNpemUgPSBtYXhSZWNvcmRDb3VudCksIHdlIGNhbiBqdXN0IHVzZSByZWNvcmRzLmxlbmd0aC5cbiAgICBmZWF0dXJlRFMudXBkYXRlUXVlcnlQYXJhbXMocXVlcnlQYXJhbVJlZi5jdXJyZW50LCBwcm9wcy53aWRnZXRJZClcbiAgICBcbiAgICBjb25zdCBmZXRjaFN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgZXhlY3V0ZVF1ZXJ5KHByb3BzLndpZGdldElkLCBxdWVyeUl0ZW0sIGZlYXR1cmVEUywgcXVlcnlQYXJhbVJlZi5jdXJyZW50KVxuICAgICAgLnRoZW4oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaER1cmF0aW9uTXMgPSBNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpIC0gZmV0Y2hTdGFydFRpbWUpXG4gICAgICAgIGNvbnN0IHByb2Nlc3NpbmdTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgICBcbiAgICAgICAgcXVlcnlSZXN1bHRDb3VudCA9IHJlc3VsdC5yZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdxdWVyeS1leGVjdXRpb24tY29tcGxldGUnLFxuICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICByZWNvcmRzUmV0dXJuZWQ6IHF1ZXJ5UmVzdWx0Q291bnQsXG4gICAgICAgICAgZmV0Y2hEdXJhdGlvbk1zLFxuICAgICAgICAgIGV4aXN0aW5nQ2FwdHVyZWRDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuXG4gICAgICAgIGxldCByZWNvcmRzVG9EaXNwbGF5ID0gcmVzdWx0LnJlY29yZHMgfHwgW11cbiAgICAgICAgbGV0IGRzVG9Vc2UgPSBvdXRwdXREU1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIFwiQWRkIHRvXCIgbW9kZTogbWVyZ2UgbmV3IHJlc3VsdHMgd2l0aCB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gJiYgcmVzdWx0LnJlY29yZHMgJiYgcmVzdWx0LnJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdhZGQtbW9kZS1zdGFydGluZy1tZXJnZS1kaWFnbm9zdGljJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBleGlzdGluZ0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgIGV4aXN0aW5nSWRzOiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5tYXAociA9PiByLmdldElkPy4oKSkuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICAgIG5ld0NvdW50OiByZXN1bHQucmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgIG5ld0lkczogcmVzdWx0LnJlY29yZHMubWFwKChyOiBhbnkpID0+IHIuZ2V0SWQ/LigpKS5zbGljZSgwLCA1KSxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gTWVyZ2UgbmV3IHF1ZXJ5IHJlc3VsdHMgd2l0aCB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgY29uc3QgbWVyZ2VkUmVjb3JkcyA9IG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZChcbiAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgLy8gVXNlIG91dHB1dERTIGZvciBrZXkgZ2VuZXJhdGlvblxuICAgICAgICAgICAgICByZXN1bHQucmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICBleGlzdGluZ1JlY29yZHNGb3JNZXJnZSAvLyBVc2UgY29uc2lzdGVudGx5IGNhcHR1cmVkIHJlY29yZHNcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IG1lcmdlZFJlY29yZHNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzIHNvIHRoZXkgcGVyc2lzdCBhY3Jvc3MgcXVlcnkgc3dpdGNoZXNcbiAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShtZXJnZWRSZWNvcmRzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdhZGQtbW9kZS1tZXJnZS1jb21wbGV0ZS1kaWFnbm9zdGljJyxcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICBtZXJnZWRSZWNvcmRzQ291bnQ6IG1lcmdlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAgICAgICBtZXJnZWRJZHM6IG1lcmdlZFJlY29yZHMubWFwKHIgPT4gci5nZXRJZD8uKCkpLnNsaWNlKDAsIDEwKSxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdhZGQtbW9kZS1lcnJvcicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBGYWxsIGJhY2sgdG8gbm9ybWFsIGJlaGF2aW9yIG9uIGVycm9yXG4gICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVzdWx0LnJlY29yZHNcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICAgIC8vIEhhbmRsZSBcIlJlbW92ZSBmcm9tXCIgbW9kZTogcmVtb3ZlIG1hdGNoaW5nIHJlY29yZHMgZnJvbSB3aWRnZXQtbGV2ZWwgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1zdGFydGluZy1tZXJnZScsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgZXhpc3RpbmdDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICByZW1vdmVDb3VudDogcmVzdWx0LnJlY29yZHM/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhY2N1bXVsYXRlZCByZWNvcmRzIHRvIHJlbW92ZSBmcm9tXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgIHF1ZXJ5UmVjb3Jkc0NvdW50OiByZXN1bHQucmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgbm90ZTogJ05vIGFjY3VtdWxhdGVkIHJlY29yZHMgdG8gcmVtb3ZlIGZyb20gLSBuby1vcCdcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLy8gTm8gYWNjdW11bGF0ZWQgcmVjb3Jkcywgc28gbm90aGluZyB0byByZW1vdmUgLSBzaG93IGVtcHR5IHJlc3VsdHNcbiAgICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IFtdXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5yZWNvcmRzICYmIHJlc3VsdC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIG1hdGNoaW5nIHJlY29yZHMgZnJvbSBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1JlY29yZHMgPSByZW1vdmVSZXN1bHRzRnJvbUFjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICAgIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsIC8vIFVzZSBvdXRwdXREUyBmb3Iga2V5IGdlbmVyYXRpb25cbiAgICAgICAgICAgICAgICByZXN1bHQucmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nUmVjb3Jkc0Zvck1lcmdlIC8vIFVzZSBjb25zaXN0ZW50bHkgY2FwdHVyZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gcmVtYWluaW5nUmVjb3Jkc1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gVXBkYXRlIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgIGlmIChvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKHJlbWFpbmluZ1JlY29yZHMpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFJlbW92ZSByZWNvcmRzIGZyb20gb3JpZ2luIGRhdGEgc291cmNlIHNlbGVjdGlvbnMgKG1hcCBoaWdobGlnaHRpbmcpXG4gICAgICAgICAgICAgIC8vIEFsc28gcmVtb3ZlcyBncmFwaGljcyBmcm9tIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIGhpZ2hsaWdodGluZ1xuICAgICAgICAgICAgICByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnMoXG4gICAgICAgICAgICAgICAgcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgcmVzdWx0LnJlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgICAgICAgICAgZ3JhcGhpY3NMYXllclxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLWNvbXBsZXRlJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHF1ZXJ5UmVjb3Jkc0NvdW50OiByZXN1bHQucmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICByZWNvcmRzUmVtb3ZlZDogZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2UubGVuZ3RoIC0gcmVtYWluaW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgICAgICAgICAgICAgd2lkZ2V0TGV2ZWxSZWNvcmRzVXBkYXRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvcmlnaW5TZWxlY3Rpb25zVXBkYXRlZDogdHJ1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gSWYgYWxsIHJlY29yZHMgcmVtb3ZlZCwgYXV0by1jbGVhciAoY29uc2lzdGVudCB3aXRoIHVzZXIgZXhwZWN0YXRpb24pXG4gICAgICAgICAgICAgIGlmIChyZW1haW5pbmdSZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1hbGwtcmVjb3Jkcy1yZW1vdmVkJyxcbiAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICAgIG5vdGU6ICdBbGwgYWNjdW11bGF0ZWQgcmVjb3JkcyByZW1vdmVkIC0gYXV0by1jbGVhcmluZydcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC8vIENsZWFyIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShbXSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFF1ZXJ5IHJldHVybmVkIG5vIHJlc3VsdHMgLSBub3RoaW5nIHRvIHJlbW92ZVxuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLW5vLXF1ZXJ5LXJlc3VsdHMnLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHNGb3JNZXJnZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgbm90ZTogJ1F1ZXJ5IHJldHVybmVkIG5vIHJlc3VsdHMgLSBubyByZWNvcmRzIHRvIHJlbW92ZSdcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLy8gS2VlcCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGRpc3BsYXllZFxuICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5ID0gZXhpc3RpbmdSZWNvcmRzRm9yTWVyZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtZXJyb3InLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gRmFsbCBiYWNrIHRvIHNob3dpbmcgcXVlcnkgcmVzdWx0cyBvbiBlcnJvclxuICAgICAgICAgICAgcmVjb3Jkc1RvRGlzcGxheSA9IHJlc3VsdC5yZWNvcmRzIHx8IFtdXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbikge1xuICAgICAgICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIGNsZWFyIHdpZGdldC1sZXZlbCBhY2N1bXVsYXRlZCByZWNvcmRzXG4gICAgICAgICAgaWYgKG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShbXSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJlY29yZHNSZWYuY3VycmVudCA9IHJlY29yZHNUb0Rpc3BsYXlcbiAgICAgICAgLy8gUmVzZXQgc2VsZWN0aW9uIGZsYWcgZm9yIG5ldyBxdWVyeSByZXN1bHRzXG4gICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgXG4gICAgICAgIC8vIFNlbGVjdCByZWNvcmRzIGluIHRoZSBvdXRwdXQgRFNcbiAgICAgICAgLy8gRm9yIFwiQWRkIHRvXCIgbW9kZSwgc2VsZWN0IG1lcmdlZCByZWNvcmRzXG4gICAgICAgIC8vIEZvciBcIlJlbW92ZSBmcm9tXCIgbW9kZSwgc2VsZWN0IHJlbWFpbmluZyByZWNvcmRzIChhbHJlYWR5IHVwZGF0ZWQgdmlhIHJlbW92ZVJlY29yZHNGcm9tT3JpZ2luU2VsZWN0aW9ucylcbiAgICAgICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgc2VsZWN0IHF1ZXJ5IHJlc3VsdHNcbiAgICAgICAgaWYgKHJlY29yZHNUb0Rpc3BsYXkgJiYgcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGggPiAwICYmIGRzVG9Vc2UpIHtcbiAgICAgICAgICBjb25zdCByZWNvcmRJZHNUb1NlbGVjdCA9IHJlY29yZHNUb0Rpc3BsYXkubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUsIHNlbGVjdGlvbiB3YXMgYWxyZWFkeSB1cGRhdGVkIHZpYSByZW1vdmVSZWNvcmRzRnJvbU9yaWdpblNlbGVjdGlvbnNcbiAgICAgICAgICAvLyBCdXQgd2Ugc3RpbGwgbmVlZCB0byBzZWxlY3QgaW4gdGhlIG91dHB1dERTIGZvciB3aWRnZXQgc3RhdGUgY29uc2lzdGVuY3lcbiAgICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbikge1xuICAgICAgICAgICAgLy8gU2VsZWN0aW9uIHdhcyBhbHJlYWR5IHVwZGF0ZWQgaW4gb3JpZ2luIERTcyB2aWEgcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zXG4gICAgICAgICAgICAvLyBKdXN0IHVwZGF0ZSBvdXRwdXREUyBzZWxlY3Rpb24gZm9yIHdpZGdldCBzdGF0ZSBjb25zaXN0ZW5jeVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkc1RvVXNlLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGRzVG9Vc2Uuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZElkc1RvU2VsZWN0LCByZWNvcmRzVG9EaXNwbGF5IGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaGFzU2VsZWN0ZWRSZWNvcmRzUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtb3V0cHV0LWRzLXNlbGVjdGlvbi11cGRhdGVkJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgcmVjb3JkQ291bnQ6IHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZS1tb2RlLW91dHB1dC1kcy1zZWxlY3Rpb24tZXJyb3InLFxuICAgICAgICAgICAgICAgIHdpZGdldElkOiBwcm9wcy53aWRnZXRJZCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIFwiQWRkIHRvXCIgYW5kIFwiTmV3XCIgbW9kZXMsIHNlbGVjdCByZWNvcmRzIG5vcm1hbGx5XG4gICAgICAgICAgICBzZXRTZWxlY3Rpb25FcnJvcihudWxsKSAvLyBDbGVhciBwcmV2aW91cyBlcnJvcnNcbiAgICAgICAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICAgICAgICAgICAgICAgICAgcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICBkc1RvVXNlLFxuICAgICAgICAgICAgICAgICAgcmVjb3JkSWRzVG9TZWxlY3QsXG4gICAgICAgICAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5IGFzIEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsXG4gICAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyLFxuICAgICAgICAgICAgICAgICAgbWFwVmlld1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBoYXNTZWxlY3RlZFJlY29yZHNSZWYuY3VycmVudCA9IHRydWUgLy8gTWFyayBhcyBzZWxlY3RlZFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIERpc3BhdGNoIGN1c3RvbSBzZWxlY3Rpb24gZXZlbnQgc28gV2lkZ2V0IHN0YXRlIGlzIHVwZGF0ZWQgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGNydWNpYWwgZm9yIGhhc2gtYmFzZWQgZXhlY3V0aW9uIHdoZXJlIFF1ZXJ5VGFzayBoYW5kbGVzIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgIGRpc3BhdGNoU2VsZWN0aW9uRXZlbnQocHJvcHMud2lkZ2V0SWQsIHJlY29yZElkc1RvU2VsZWN0LCBkc1RvVXNlLCBxdWVyeUl0ZW0uY29uZmlnSWQpXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNlbGVjdCBxdWVyeSByZXN1bHRzJ1xuICAgICAgICAgICAgICAgIHNldFNlbGVjdGlvbkVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgICAgICAgICBldmVudDogJ3NlbGVjdGlvbi1mYWlsZWQnLFxuICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRJZHNUb1NlbGVjdC5sZW5ndGhcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSgpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24gJiYgcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAvLyBBbGwgcmVjb3JkcyByZW1vdmVkIC0gY2xlYXIgc2VsZWN0aW9uXG4gICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMocHJvcHMud2lkZ2V0SWQsIGRzVG9Vc2UsIHVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQsIGdyYXBoaWNzTGF5ZXIpXG4gICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2VcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIE5vdGlmeSBXaWRnZXQgdGhhdCBzZWxlY3Rpb24gaXMgY2xlYXJlZFxuICAgICAgICAgICAgICBkaXNwYXRjaFNlbGVjdGlvbkV2ZW50KHByb3BzLndpZGdldElkLCBbXSwgZHNUb1VzZSwgcXVlcnlJdGVtLmNvbmZpZ0lkKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW1vdmUtbW9kZS1hbGwtcmVjb3Jkcy1yZW1vdmVkLXNlbGVjdGlvbi1jbGVhcmVkJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWRcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlLW1vZGUtY2xlYXItc2VsZWN0aW9uLWVycm9yJyxcbiAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkoKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBNYXJrIHRoYXQgcXVlcnkganVzdCBleGVjdXRlZCBCRUZPUkUgdXBkYXRpbmcgcmVzdWx0Q291bnRcbiAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBhdXRvLXN3aXRjaCB1c2VFZmZlY3Qgc2VlcyBxdWVyeUp1c3RFeGVjdXRlZFJlZi5jdXJyZW50ID09PSB0cnVlXG4gICAgICAgIHF1ZXJ5SnVzdEV4ZWN1dGVkUmVmLmN1cnJlbnQgPSB0cnVlXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3F1ZXJ5LWV4ZWN1dGVkLWZsYWctc2V0JyxcbiAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgICByZWNvcmRzVG9EaXNwbGF5Q291bnQ6IHJlY29yZHNUb0Rpc3BsYXkubGVuZ3RoLFxuICAgICAgICAgIHF1ZXJ5UmVzdWx0Q291bnQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgcmVzdWx0IGNvdW50XG4gICAgICAgIC8vIEZvciBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHVzZSBhY2N1bXVsYXRlZC9yZW1haW5pbmcgY291bnRcbiAgICAgICAgLy8gRm9yIFwiTmV3XCIgbW9kZSwgdXNlIHF1ZXJ5IGNvdW50XG4gICAgICAgIGNvbnN0IG5ld1Jlc3VsdENvdW50ID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgICAgID8gcmVjb3Jkc1RvRGlzcGxheS5sZW5ndGhcbiAgICAgICAgICA6IHF1ZXJ5UmVzdWx0Q291bnRcbiAgICAgICAgXG4gICAgICAgIHNldFJlc3VsdENvdW50KG5ld1Jlc3VsdENvdW50KVxuICAgICAgICBcbiAgICAgICAgLy8gSU5TVEFOVCBVSSBGSVggKFRoZSBcIlNwaW5uZXIgQnlwYXNzXCIpOiBcbiAgICAgICAgLy8gRGVjb3VwbGUgdGhlIFwiUmV0cmlldmluZyByZXN1bHRzLi4uXCIgc3Bpbm5lciBmcm9tIGFzeW5jaHJvbm91cyBhY3Rpb25zIGxpa2Ugem9vbWluZy4gXG4gICAgICAgIC8vIEJ5IGNhbGxpbmcgc2V0U3RhZ2UoMSkgbm93LCB0aGUgdXNlciBzZWVzIHRoZSByZXN1bHQgbGlzdCBpbW1lZGlhdGVseSB3aGlsZSBcbiAgICAgICAgLy8gdGhlIG1hcCBhbmltYXRpb24gY29udGludWVzIGluIHRoZSBiYWNrZ3JvdW5kLlxuICAgICAgICBzZXRTdGFnZSgxKSBcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnVEFTSycsIHtcbiAgICAgICAgICBldmVudDogJ3BlcmYtcHJvY2Vzc2luZy1jb21wbGV0ZScsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIHByb2Nlc3NpbmdEdXJhdGlvbk1zOiBNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvY2Vzc2luZ1N0YXJ0VGltZSksXG4gICAgICAgICAgdG90YWxDaGFpbkR1cmF0aW9uTXM6IE1hdGgucm91bmQocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUpLFxuICAgICAgICAgIG5ld1Jlc3VsdENvdW50LFxuICAgICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIGV4aXN0aW5nIHpvb21Ub0ZlYXR1cmUgZGF0YSBhY3Rpb24gKHNhbWUgYXMgY2xpY2tpbmcgXCJab29tIFRvXCIgaW4gdGhlIG1lbnUpXG4gICAgICAgIC8vIFVzZSBydW50aW1lIHByZWZlcmVuY2UgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gY29uZmlnIHNldHRpbmcgKGRlZmF1bHRzIHRvIHRydWUpXG4gICAgICAgIGNvbnN0IHNob3VsZFpvb20gPSBydW50aW1lWm9vbVRvU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCBcbiAgICAgICAgICA/IHJ1bnRpbWVab29tVG9TZWxlY3RlZCBcbiAgICAgICAgICA6IChxdWVyeUl0ZW0uem9vbVRvU2VsZWN0ZWQgIT09IGZhbHNlKVxuICAgICAgICBcbiAgICAgICAgLy8gVXNlIHRoZSBvdXRwdXQgRFMgYW5kIG1lcmdlZCByZWNvcmRzXG4gICAgICAgIGNvbnN0IHJlY29yZHNGb3Jab29tID0gcmVjb3Jkc1RvRGlzcGxheSB8fCByZXN1bHQucmVjb3Jkc1xuICAgICAgICBjb25zdCBkc0Zvclpvb20gPSBkc1RvVXNlIHx8IG91dHB1dERTXG4gICAgICAgIFxuICAgICAgICBpZiAocmVjb3Jkc0Zvclpvb20gJiYgcmVjb3Jkc0Zvclpvb20ubGVuZ3RoID4gMCAmJiBkc0Zvclpvb20gJiYgc2hvdWxkWm9vbSkge1xuICAgICAgICAgIC8vIENyZWF0ZSBhIGRhdGEgc2V0IGZyb20gdGhlIGFwcHJvcHJpYXRlIGRhdGEgc291cmNlIGFuZCByZWNvcmRzXG4gICAgICAgICAgY29uc3QgZGF0YVNldDogRGF0YVJlY29yZFNldCA9IHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2U6IGRzRm9yWm9vbSxcbiAgICAgICAgICAgIHJlY29yZHM6IHJlY29yZHNGb3Jab29tLFxuICAgICAgICAgICAgbmFtZTogZHNGb3Jab29tLmdldExhYmVsKClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBHZXQgYXZhaWxhYmxlIGRhdGEgYWN0aW9ucyBhbmQgZmluZCB0aGUgem9vbVRvRmVhdHVyZSBhY3Rpb25cbiAgICAgICAgICByZXR1cm4gRGF0YUFjdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRTdXBwb3J0ZWRBY3Rpb25zKHByb3BzLndpZGdldElkLCBbZGF0YVNldF0sIERhdGFMZXZlbC5SZWNvcmRzKVxuICAgICAgICAgICAgLnRoZW4oYWN0aW9uQ2F0ZWdvcmllcyA9PiB7XG4gICAgICAgICAgICAgIC8vIExvb2sgZm9yIHpvb21Ub0ZlYXR1cmUgYWN0aW9uIGluIGFueSBjYXRlZ29yeVxuICAgICAgICAgICAgICBsZXQgem9vbUFjdGlvbjogYW55ID0gbnVsbFxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IGluIGFjdGlvbkNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25zID0gYWN0aW9uQ2F0ZWdvcmllc1tjYXRlZ29yeV1cbiAgICAgICAgICAgICAgICB6b29tQWN0aW9uID0gYWN0aW9ucy5maW5kKChhY3Rpb246IGFueSkgPT4gYWN0aW9uLm5hbWUgPT09ICd6b29tVG9GZWF0dXJlJyB8fCBhY3Rpb24uaWQgPT09ICd6b29tVG9GZWF0dXJlJylcbiAgICAgICAgICAgICAgICBpZiAoem9vbUFjdGlvbikgYnJlYWtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh6b29tQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSB0aGUgc2FtZSB6b29tIGFjdGlvbiB0aGF0IHdvcmtzIHdoZW4gY2xpY2tlZCBtYW51YWxseVxuICAgICAgICAgICAgICAgIHJldHVybiBEYXRhQWN0aW9uTWFuYWdlci5nZXRJbnN0YW5jZSgpLmV4ZWN1dGVEYXRhQWN0aW9uKHpvb21BY3Rpb24sIFtkYXRhU2V0XSwgRGF0YUxldmVsLlJlY29yZHMsIHByb3BzLndpZGdldElkKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gem9vbSB0byBmZWF0dXJlcydcbiAgICAgICAgICAgICAgc2V0Wm9vbUVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdaT09NJywge1xuICAgICAgICAgICAgICAgIGV2ZW50OiAnem9vbS1hY3Rpb24tZmFpbGVkJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleGVjdXRpbmcgem9vbVRvRmVhdHVyZSBkYXRhIGFjdGlvbicsIGVycm9yKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSlcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1RBU0snLCB7XG4gICAgICAgICAgZXZlbnQ6ICdxdWVyeS1jaGFpbi1mYWlsZWQtZGlhZ25vc3RpYycsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgICBzZXRTdGFnZSgxKSAvLyBSZXR1cm4gdG8gcmVzdWx0cyBvciBmb3JtIHN0YWdlIGV2ZW4gb24gZXJyb3JcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGlmIChzcGF0aWFsRmlsdGVyPy5sYXllciAmJiBzcGF0aWFsRmlsdGVyPy5jbGVhckFmdGVyQXBwbHkpIHtcbiAgICAgICAgICBzcGF0aWFsRmlsdGVyLmxheWVyLnJlbW92ZUFsbCgpXG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0U3RhZ2UoMSkgLy8gUmVtb3ZlZCBmcm9tIGhlcmU7IG5vdyBjYWxsZWQgaW4gdGhlIG1haW4gY2hhaW4gYmVmb3JlIGJhY2tncm91bmQgYWN0aW9uc1xuICAgICAgfSlcbiAgfSwgW2N1cnJlbnRJdGVtLCBxdWVyeUl0ZW0sIHByb3BzLndpZGdldElkLCBvdXRwdXREUywgcHVibGlzaERhdGFDbGVhcmVkTXNnLCBjbGVhclJlc3VsdCwgcmVzdWx0c01vZGUsIGFjY3VtdWxhdGVkUmVjb3Jkcywgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UsIG9uQ2xlYXJHcmFwaGljc0xheWVyXSlcblxuICBjb25zdCB7IHVzZUF0dHJpYnV0ZUZpbHRlciwgc3FsRXhwck9iaiwgdXNlU3BhdGlhbEZpbHRlciwgc3BhdGlhbEZpbHRlclR5cGVzLCBzcGF0aWFsSW5jbHVkZVJ1bnRpbWVEYXRhLCBzcGF0aWFsUmVsYXRpb25Vc2VEYXRhU291cmNlc30gPSBjdXJyZW50SXRlbVxuICBjb25zdCBzaG93QXR0cmlidXRlRmlsdGVyID0gdXNlQXR0cmlidXRlRmlsdGVyICYmIHNxbEV4cHJPYmogIT0gbnVsbFxuICBjb25zdCBzaG93U3BhdGlhbEZpbHRlciA9IHNwYXRpYWxGaWx0ZXJFbmFibGVkICYmIHVzZVNwYXRpYWxGaWx0ZXIgJiYgKHNwYXRpYWxGaWx0ZXJUeXBlcy5sZW5ndGggPiAwIHx8IHNwYXRpYWxJbmNsdWRlUnVudGltZURhdGEgfHwgc3BhdGlhbFJlbGF0aW9uVXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA+IDApXG5cbiAgLy8gREVURUNUIFNXSVRDSCBJTiBSRU5ERVJcbiAgY29uc3QgaXNTd2l0Y2hpbmdRdWVyaWVzID0gcHJldmlvdXNDb25maWdJZFJlZi5jdXJyZW50ICE9PSBxdWVyeUl0ZW0uY29uZmlnSWRcbiAgY29uc3QgaXNWaXJ0dWFsQ2xlYXJBY3RpdmUgPSBpc1N3aXRjaGluZ1F1ZXJpZXMgJiYgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gIFxuICAvLyBVc2UgdGhlc2UgXCJlZmZlY3RpdmVcIiB2YWx1ZXMgZm9yIHRoZSBVSVxuICBjb25zdCBlZmZlY3RpdmVSZXN1bHRDb3VudCA9IGlzVmlydHVhbENsZWFyQWN0aXZlID8gMCA6IHJlc3VsdENvdW50XG4gIGNvbnN0IGVmZmVjdGl2ZVJlY29yZHMgPSBpc1ZpcnR1YWxDbGVhckFjdGl2ZSA/IFtdIDogKHJlY29yZHNSZWYuY3VycmVudCB8fCBbXSlcblxuICAvLyBDcmVhdGUgYSB1bmlxdWUga2V5IGZvciB0aGUgY3VycmVudCBxdWVyeSByZXN1bHQgc2V0IHRvIGhlbHAgRTJFIHRlc3RzIGRldGVjdCBmcmVzaCBkYXRhXG4gIGNvbnN0IHJlc3VsdFF1ZXJ5S2V5ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGAke3F1ZXJ5SXRlbS5jb25maWdJZH1fJHtEYXRlLm5vdygpfWBcbiAgfSwgW3F1ZXJ5SXRlbS5jb25maWdJZCwgcmVzdWx0Q291bnRdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LXRhc2sgaC0xMDAnLCBjbGFzc05hbWUsIHsgd3JhcHBlZDogd3JhcHBlZEluUG9wcGVyIH0pfSBcbiAgICAgIGRhdGEtcmVzdWx0LXF1ZXJ5LWtleT17cmVzdWx0UXVlcnlLZXl9XG4gICAgICBjc3M9e2Nzc2BcbiAgICAgICR7c3R5bGV9XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgYH0+XG4gICAgICA8RGF0YVNvdXJjZUNvbXBvbmVudCB1c2VEYXRhU291cmNlPXt1c2VPdXRwdXREc30gb25EYXRhU291cmNlQ3JlYXRlZD17aGFuZGxlT3V0cHV0RGF0YVNvdXJjZUNyZWF0ZWR9IG9uRGF0YVNvdXJjZUluZm9DaGFuZ2U9e2hhbmRsZU91dHB1dERhdGFTb3VyY2VJbmZvQ2hhbmdlfS8+XG4gICAgICBcbiAgICAgIHsvKiBUYWIgTmF2aWdhdGlvbiAtIE1vdmVkIHRvIHRvcCAqL31cbiAgICAgIDxUYWJzXG4gICAgICAgIHZhbHVlPXthY3RpdmVUYWJ9XG4gICAgICAgIG9uQ2hhbmdlPXsoaWQpID0+IGhhbmRsZVRhYkNoYW5nZShpZCBhcyAncXVlcnknIHwgJ3Jlc3VsdHMnKX1cbiAgICAgICAgZmlsbD17dHJ1ZX1cbiAgICAgICAgdHlwZT0ndW5kZXJsaW5lJ1xuICAgICAgICBrZWVwTW91bnQ9e3RydWV9XG4gICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgYH1cbiAgICAgID5cbiAgICAgICAgPFRhYlxuICAgICAgICAgIGlkPSdxdWVyeSdcbiAgICAgICAgICB0aXRsZT17Z2V0STE4bk1lc3NhZ2UoJ3F1ZXJ5VGFiJyl9XG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrX19jb250ZW50Jywge1xuICAgICAgICAgICAgICBbRk9DVVNBQkxFX0NPTlRBSU5FUl9DTEFTU106IGlzSW5Qb3BwZXIgJiYgYWN0aXZlVGFiID09PSAncXVlcnknXG4gICAgICAgICAgICB9KX0gXG4gICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIEhlYWRlciB3aXRoIGJhY2sgYnV0dG9uIGFuZCBxdWVyeSBsYWJlbCAtIFF1ZXJ5IHRhYiBvbmx5ICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3F1ZXJ5LWZvcm1fX2hlYWRlciBteC00IGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2luLXBvcHBlcic6IGlzSW5Qb3BwZXIgfSl9IGNzcz17Y3NzYFxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICBwYWRkaW5nOiA2cHggMDtcbiAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDhweDtcbiAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCduYXYtYWN0aW9uIGFsaWduLWl0ZW1zLWNlbnRlcicsIHsgJ2Qtbm9uZSc6IHdyYXBwZWRJblBvcHBlciB9KX0gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZmxleDogMSAxIDA7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICAgICAgLmppbXUtYnRuIHtcbiAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMjZweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygncC0wIG1yLTInLCB7ICdkLW5vbmUnOiB0b3RhbCA9PT0gMSB8fCAhb25OYXZCYWNrIH0pfVxuICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgIGljb25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uTmF2QmFja31cbiAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdiYWNrJyl9XG4gICAgICAgICAgICAgICAgICByZWY9e2JhY2tCdG5SZWZ9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPEFycm93TGVmdE91dGxpbmVkIGF1dG9GbGlwLz5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8UXVlcnlUYXNrTGFiZWwgaWNvbj17aWNvbn0gbmFtZT17ZGlzcGxheUxhYmVsID8gbmFtZSA6ICcnfSAvPlxuICAgICAgICAgICAgICAgIHsvKiBIYXNoIHBhcmFtZXRlciBpbmZvIGJ1dHRvbiAtIHNob3dzIHF1ZXJpZXMgZnJvbSBzYW1lIGxheWVyIHdpdGggc2hvcnRJZHMgKi99XG4gICAgICAgICAgICAgICAgeygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5SXRlbXMgfHwgcXVlcnlJdGVtcy5sZW5ndGggPD0gMSkgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgcXVlcnkncyBvcmlnaW4gZGF0YSBzb3VyY2UgSURcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPcmlnaW5EU0lkID0gcXVlcnlJdGVtLnVzZURhdGFTb3VyY2U/LmRhdGFTb3VyY2VJZFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRPcmlnaW5EU0lkKSByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBGaW5kIGFsbCBxdWVyaWVzIGZyb20gdGhlIHNhbWUgb3JpZ2luIGRhdGEgc291cmNlIHRoYXQgaGF2ZSBzaG9ydElkc1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc2FtZUxheWVyUXVlcmllcyA9IHF1ZXJ5SXRlbXMuZmlsdGVyKGl0ZW0gPT4gXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkID09PSBjdXJyZW50T3JpZ2luRFNJZCAmJiBcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG9ydElkICYmIFxuICAgICAgICAgICAgICAgICAgICBpdGVtLnNob3J0SWQudHJpbSgpICE9PSAnJ1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgaW5mbyBidXR0b24gaWYgdGhlcmUgYXJlIHF1ZXJpZXMgd2l0aCBzaG9ydElkc1xuICAgICAgICAgICAgICAgICAgaWYgKHNhbWVMYXllclF1ZXJpZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBCdWlsZCB0b29sdGlwIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5TGluZXMgPSBzYW1lTGF5ZXJRdWVyaWVzLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXVlcnlOYW1lID0gZ2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7cXVlcnlOYW1lfTogIyR7aXRlbS5zaG9ydElkfT12YWx1ZSBvciA/JHtpdGVtLnNob3J0SWR9PXZhbHVlYFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgY29uc3QgdG9vbHRpcFRpdGxlID0gYFRoaXMgbGF5ZXIgY2FuIGJlIHNlYXJjaGVkIHVzaW5nIHRoZSBzaG9ydElkcyAke3NhbWVMYXllclF1ZXJpZXMubWFwKHEgPT4gcS5zaG9ydElkKS5qb2luKCcgYW5kICcpfSB1c2luZyAjc2hvcnRJZD12YWx1ZSBvciA/c2hvcnRJZD12YWx1ZSBpbiB0aGUgVVJMLlxcblxcbiR7cXVlcnlMaW5lcy5qb2luKCdcXG4nKX1gXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxUb29sdGlwIFxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tJyBcbiAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2B3aGl0ZS1zcGFjZTogcHJlLWxpbmU7YH0gXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3Rvb2x0aXBUaXRsZX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPSdzbScgXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uIFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nSGFzaCBwYXJhbWV0ZXIgc2VhcmNoIGluZm9ybWF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5mb091dGxpbmVkIGNvbG9yPSd2YXIoLS1zeXMtY29sb3ItcHJpbWFyeS1tYWluKScgc2l6ZT0ncycvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHtlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnY2xlYXJSZXN1bHQnKX0gcGxhY2VtZW50PSdib3R0b20nPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICByZWY9e2NsZWFyUmVzdWx0QnRuUmVmfVxuICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2dldEkxOG5NZXNzYWdlKCdjbGVhclJlc3VsdCcpfVxuICAgICAgICAgICAgICAgICAgICBpY29uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbWwtYXV0byBweS0wJ1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtjbGVhclJlc3VsdH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRyYXNoT3V0bGluZWQgLz5cbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgey8qIFNlYXJjaCBMYXllciAvIEdyb3VwIGRyb3Bkb3ducyAtIHNob3cgYmFzZWQgb24gZ3JvdXBpbmcgKi99XG4gICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgLy8gT25seSBzaG93IGRyb3Bkb3ducyBpZiBtdWx0aXBsZSBxdWVyaWVzIGV4aXN0XG4gICAgICAgICAgICAgIGlmICghcXVlcnlJdGVtcyB8fCBxdWVyeUl0ZW1zLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQnVpbGQgZmxhdCBsaXN0IG9mIGFsbCBxdWVyaWVzIHdpdGggdGhlaXIgZGlzcGxheSBpbmZvXG4gICAgICAgICAgICAgIC8vIEZvciBncm91cGVkIHF1ZXJpZXMsIHVzZSBncm91cCBkaXNwbGF5IG5hbWUgKG9ubHkgc2hvdyBvbmNlIHBlciBncm91cClcbiAgICAgICAgICAgICAgY29uc3QgcXVlcnlPcHRpb25zOiBBcnJheTx7XG4gICAgICAgICAgICAgICAgY29uZmlnSWQ6IHN0cmluZ1xuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmdcbiAgICAgICAgICAgICAgICBncm91cElkOiBzdHJpbmcgfCBudWxsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlclxuICAgICAgICAgICAgICB9PiA9IFtdXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBUcmFjayB3aGljaCBncm91cHMgd2UndmUgYWxyZWFkeSBhZGRlZCB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgICAgICAgIGNvbnN0IGFkZGVkR3JvdXBzID0gbmV3IFNldDxzdHJpbmc+KClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHF1ZXJ5SXRlbXMuZm9yRWFjaCgoaXRlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgICAgLy8gRm9yIGdyb3VwZWQgcXVlcmllcywgdXNlIGdyb3VwIGRpc3BsYXkgbmFtZSAob25seSBhZGQgb25jZSBwZXIgZ3JvdXApXG4gICAgICAgICAgICAgICAgICBpZiAoIWFkZGVkR3JvdXBzLmhhcyhpdGVtLmdyb3VwSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZGVkR3JvdXBzLmFkZChpdGVtLmdyb3VwSWQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwRGlzcGxheU5hbWUgPSBncm91cHM/LltpdGVtLmdyb3VwSWRdPy5kaXNwbGF5TmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cHM/LltpdGVtLmdyb3VwSWRdPy5pdGVtc1swXT8ubmFtZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEdyb3VwICR7aXRlbS5ncm91cElkfWBcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkOiBpdGVtLmNvbmZpZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBncm91cERpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGl0ZW0uZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSAtIHVzZSBpdGVtLm5hbWUgZm9yIGZpcnN0IGRyb3Bkb3duIChub3Qgc2VhcmNoQWxpYXMvamltdUZpZWxkTmFtZSlcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IGl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBpdGVtLm5hbWUgfHwgZ2V0UXVlcnlEaXNwbGF5TmFtZShpdGVtKSxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgY3VycmVudGx5IHNlbGVjdGVkIHF1ZXJ5XG4gICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRRdWVyeUl0ZW0gPSBxdWVyeUl0ZW1cbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFF1ZXJ5R3JvdXBJZCA9IGN1cnJlbnRRdWVyeUl0ZW0uZ3JvdXBJZCB8fCBudWxsXG4gICAgICAgICAgICAgIGNvbnN0IGlzR3JvdXBlZFF1ZXJ5ID0gY3VycmVudFF1ZXJ5R3JvdXBJZCAhPT0gbnVsbFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRmluZCB0aGUgb3B0aW9uIGluZGV4IGZvciB0aGUgY3VycmVudCBxdWVyeVxuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50T3B0aW9uSW5kZXggPSBxdWVyeU9wdGlvbnMuZmluZEluZGV4KG9wdCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzR3JvdXBlZFF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0Lmdyb3VwSWQgPT09IGN1cnJlbnRRdWVyeUdyb3VwSWRcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdC5jb25maWdJZCA9PT0gY3VycmVudFF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JPVVAnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW5kZXJpbmctZHJvcGRvd25zJyxcbiAgICAgICAgICAgICAgICB0b3RhbFF1ZXJpZXM6IHF1ZXJ5SXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHF1ZXJ5T3B0aW9uc0NvdW50OiBxdWVyeU9wdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWVyeUdyb3VwSWQsXG4gICAgICAgICAgICAgICAgaXNHcm91cGVkUXVlcnksXG4gICAgICAgICAgICAgICAgY3VycmVudE9wdGlvbkluZGV4LFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXBJZCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwUXVlcnlJbmRleCxcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVlcnlDb25maWdJZDogY3VycmVudFF1ZXJ5SXRlbS5jb25maWdJZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICB7LyogRmlyc3QgRHJvcGRvd246IEFsbCBxdWVyaWVzICovfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdzZWFyY2hMYXllcicpfVxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IFxuICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRPcHRpb25JbmRleCA+PSAwID8gY3VycmVudE9wdGlvbkluZGV4IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17YXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IHF1ZXJ5T3B0aW9uc1tvcHRpb25JbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdxdWVyeS1vcHRpb24tc2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzR3JvdXBlZDogc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZCAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU1RBUlQgQ0xFQVJJTkcgSU1NRURJQVRFTFkgSUYgU1dJVENISU5HXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFyUmVzdWx0KCdkcm9wZG93bi1sYXllci1zd2l0Y2gtbmV3LW1vZGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHcm91cGVkIHF1ZXJ5IHNlbGVjdGVkIC0gc2V0IGdyb3VwIGFuZCBmaXJzdCBxdWVyeSBpbiBncm91cFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBDaGFuZ2Uoc2VsZWN0ZWRPcHRpb24uZ3JvdXBJZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cFF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlKDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZ3JvdXBlZCBxdWVyeSBzZWxlY3RlZCAtIGNsZWFyIGdyb3VwIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cENoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR3JvdXBDaGFuZ2UobnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Vbmdyb3VwZWRDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSB1bmdyb3VwZWQgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmdyb3VwZWRJbmRleCA9IHVuZ3JvdXBlZD8uZmluZEluZGV4KCh7IGl0ZW0gfSkgPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbmZpZ0lkID09PSBzZWxlY3RlZE9wdGlvbi5jb25maWdJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgPz8gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5ncm91cGVkSW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Vbmdyb3VwZWRDaGFuZ2UodW5ncm91cGVkSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiB1c2UgdGhlIGluZGV4IGZyb20gcXVlcnlJdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICd1bmdyb3VwZWQtZmFsbGJhY2stdG8taW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbkluZGV4OiBzZWxlY3RlZE9wdGlvbi5pbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUXVlcnlDaGFuZ2Uoc2VsZWN0ZWRPcHRpb24uaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtxdWVyeU9wdGlvbnMubWFwKChvcHRpb24sIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUk9VUCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdyZW5kZXJpbmctcXVlcnktb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQ6IG9wdGlvbi5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IG9wdGlvbi5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogb3B0aW9uLmdyb3VwSWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17b3B0aW9uLmNvbmZpZ0lkfSB2YWx1ZT17aWR4fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9uLmRpc3BsYXlOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgey8qIFNlY29uZCBEcm9wZG93bjogUXVlcmllcyB3aXRoaW4gc2VsZWN0ZWQgZ3JvdXAgKG9ubHkgaWYgZ3JvdXBlZCBxdWVyeSBzZWxlY3RlZCkgKi99XG4gICAgICAgICAgICAgICAgICB7aXNHcm91cGVkUXVlcnkgJiYgY3VycmVudFF1ZXJ5R3JvdXBJZCAmJiBncm91cHMgJiYgZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggMTZweDtcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tc3lzLWNvbG9yLXRleHQtcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIFNlYXJjaCBBbGlhc1xuICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2VsZWN0ZWRHcm91cFF1ZXJ5SW5kZXggIT09IHVuZGVmaW5lZCA/IHNlbGVjdGVkR3JvdXBRdWVyeUluZGV4IDogMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXthc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJbmRleCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dST1VQJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnZ3JvdXAtcXVlcnktc2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IGN1cnJlbnRRdWVyeUdyb3VwSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBRdWVyeUluZGV4OiBuZXdJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogZ3JvdXBzW2N1cnJlbnRRdWVyeUdyb3VwSWRdLml0ZW1zW25ld0luZGV4XT8uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlEaXNwbGF5TmFtZTogZ2V0UXVlcnlEaXNwbGF5TmFtZShncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0uaXRlbXNbbmV3SW5kZXhdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNUQVJUIENMRUFSSU5HIElNTUVESUFURUxZIElGIFNXSVRDSElOR1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xlYXJSZXN1bHQoJ2Ryb3Bkb3duLWFsaWFzLXN3aXRjaC1uZXctbW9kZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Hcm91cFF1ZXJ5Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Hcm91cFF1ZXJ5Q2hhbmdlKG5ld0luZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtncm91cHNbY3VycmVudFF1ZXJ5R3JvdXBJZF0uaXRlbXMubWFwKChpdGVtLCBpZHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2l0ZW0uY29uZmlnSWR9IHZhbHVlPXtpZHh9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRRdWVyeURpc3BsYXlOYW1lKGl0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIFJlc3VsdHMgTW9kZSBCdXR0b24gR3JvdXAgLSBBbHdheXMgc2hvdywgcmVnYXJkbGVzcyBvZiBxdWVyeSBjb3VudCAqL31cbiAgICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICBnYXA6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAgICAgey8qIFJlc3VsdHMgbGFiZWwgYW5kIGluZm8gYnV0dG9uICovfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGl0bGUyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0cycpfTpcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8VG9vbHRpcCBwbGFjZW1lbnQ9J2JvdHRvbScgY3NzPXtjc3Ngd2hpdGUtc3BhY2U6IHByZS1saW5lO2B9IHRpdGxlPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgaWNvbiB0eXBlPSd0ZXJ0aWFyeScgYXJpYS1sYWJlbD17Z2V0STE4bk1lc3NhZ2UoJ3Jlc3VsdHNNb2RlRGVzYycpfSBjc3M9e2Nzc2BmbGV4LXNocmluazogMDtgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEluZm9PdXRsaW5lZCBjb2xvcj0ndmFyKC0tc3lzLWNvbG9yLXByaW1hcnktbWFpbiknIHNpemU9J3MnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICB7LyogTW9kZSBidXR0b25zICovfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwicmFkaW9ncm91cFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gPyAnY29udGFpbmVkJyA6ICdvdXRsaW5lZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNb2RlID0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGU6IHJlc3VsdHNNb2RlIHx8IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVzdWx0c01vZGVDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJlc3VsdHNNb2RlQ2hhbmdlKG5ld01vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3Jlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake2dldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJyl9OiAke2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZURlc2MnKS5zcGxpdCgnXFxuJylbMV0/LnRyaW0oKSB8fCAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2dldEkxOG5NZXNzYWdlKCdjcmVhdGVOZXdSZXN1bHRzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldEkxOG5NZXNzYWdlKCdyZXN1bHRzTW9kZU5ldycpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNNb2RlID0gcmVzdWx0c01vZGUgfHwgU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnYnV0dG9uLW1vZGUtY2hhbmdlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBxdWVyeUl0ZW0uY29uZmlnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHN3aXRjaGluZyBGUk9NIFwiTmV3XCIgVE8gXCJBZGQgdG9cIiBtb2RlIGFuZCB3ZSBoYXZlIGN1cnJlbnQgcmVzdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2UgdGhlbSB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgYmVmb3JlIGNoYW5naW5nIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjb3Jkc1RvQ2FwdHVyZSA9IChlZmZlY3RpdmVSZWNvcmRzICYmIGVmZmVjdGl2ZVJlY29yZHMubGVuZ3RoID4gMCkgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZWZmZWN0aXZlUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKG91dHB1dERTPy5nZXRTZWxlY3RlZFJlY29yZHMoKSBhcyBGZWF0dXJlRGF0YVJlY29yZFtdIHx8IFtdKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZS5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0FjY3VtdWxhdGVkID0gYWNjdW11bGF0ZWRSZWNvcmRzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgY3VycmVudCByZXN1bHRzIHdpdGggZXhpc3RpbmcgYWNjdW11bGF0ZWQgcmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBtZXJnZVJlc3VsdHNJbnRvQWNjdW11bGF0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXREUyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvQ2FwdHVyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NhcHR1cmluZy1jdXJyZW50LXJlc3VsdHMtb24tbW9kZS1zd2l0Y2gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0SWQ6IHByb3BzLndpZGdldElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVkUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9DYXB0dXJlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWNvcmRzQ291bnQ6IG1lcmdlZFJlY29yZHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZShtZXJnZWRSZWNvcmRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25SZXN1bHRzTW9kZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0c01vZGVDaGFuZ2UobmV3TW9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzJdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtnZXRJMThuTWVzc2FnZSgnYWRkVG9DdXJyZW50UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVBZGQnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvbiA/ICdjb250YWluZWQnIDogJ291dGxpbmVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFhY2N1bXVsYXRlZFJlY29yZHMgfHwgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA9PT0gMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TW9kZSA9IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c01vZGUgPSByZXN1bHRzTW9kZSB8fCBTZWxlY3Rpb25UeXBlLk5ld1NlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidXR0b24tbW9kZS1jaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3dpdGNoaW5nIEZST00gXCJOZXdcIiBUTyBcIlJlbW92ZSBmcm9tXCIgbW9kZSBhbmQgd2UgaGF2ZSBjdXJyZW50IHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHRoZW0gd2l0aCBleGlzdGluZyBhY2N1bXVsYXRlZCByZWNvcmRzIGJlZm9yZSBjaGFuZ2luZyBtb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChzYW1lIHBhdHRlcm4gYXMgXCJBZGQgdG9cIiBtb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNvcmRzVG9DYXB0dXJlRm9yUmVtb3ZlID0gKGVmZmVjdGl2ZVJlY29yZHMgJiYgZWZmZWN0aXZlUmVjb3Jkcy5sZW5ndGggPiAwKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChlZmZlY3RpdmVSZWNvcmRzIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAob3V0cHV0RFM/LmdldFNlbGVjdGVkUmVjb3JkcygpIGFzIEZlYXR1cmVEYXRhUmVjb3JkW10gfHwgW10pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBY2N1bXVsYXRlZCA9IGFjY3VtdWxhdGVkUmVjb3JkcyB8fCBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1lcmdlIGN1cnJlbnQgcmVzdWx0cyB3aXRoIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRSZWNvcmRzID0gbWVyZ2VSZXN1bHRzSW50b0FjY3VtdWxhdGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0RFMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0FjY3VtdWxhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjYXB0dXJpbmctY3VycmVudC1yZXN1bHRzLW9uLW1vZGUtc3dpdGNoLXRvLXJlbW92ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZDogcHJvcHMud2lkZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c01vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyZWRSZWNvcmRzQ291bnQ6IHJlY29yZHNUb0NhcHR1cmVGb3JSZW1vdmUubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdBY2N1bXVsYXRlZENvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlY29yZHNDb3VudDogbWVyZ2VkUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlKG1lcmdlZFJlY29yZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblJlc3VsdHNNb2RlQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZShuZXdNb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1wcmVzc2VkPXtyZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17YCR7Z2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpfTogJHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEZXNjJykuc3BsaXQoJ1xcbicpWzNdPy50cmltKCkgfHwgJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXsoIWFjY3VtdWxhdGVkUmVjb3JkcyB8fCBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVEaXNhYmxlZFJlbW92ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c01vZGVSZW1vdmUnKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgaWQ9e2ByZXN1bHRzLW1vZGUtZGVzY3JpcHRpb24tJHtwcm9wcy53aWRnZXRJZH1gfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNyLW9ubHlcIlxuICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGl2ZT1cInBvbGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgcm9sZT1cInN0YXR1c1wiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRJMThuTWVzc2FnZSgnY3JlYXRlTmV3UmVzdWx0cycpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGdldEkxOG5NZXNzYWdlKCdhZGRUb0N1cnJlbnRSZXN1bHRzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0STE4bk1lc3NhZ2UoJ3JlbW92ZUZyb21DdXJyZW50UmVzdWx0cycpXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICB7ZW5hYmxlZCAmJiBkc0V4aXN0cyAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgPFF1ZXJ5VGFza0Zvcm1cbiAgICAgICAgICAgICAgICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ0lkPXtxdWVyeUl0ZW0uY29uZmlnSWR9XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZVJlYWR5PXtkYXRhU291cmNlICE9IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIHNwYXRpYWxGaWx0ZXJFbmFibGVkPXtzcGF0aWFsRmlsdGVyRW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YUFjdGlvbkZpbHRlciA9IHtkYXRhQWN0aW9uRmlsdGVyfVxuICAgICAgICAgICAgICAgICAgICBvbkZvcm1TdWJtaXQ9e2hhbmRsZUZvcm1TdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxJbnB1dFZhbHVlPXtpbml0aWFsSW5wdXRWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17b25IYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAgICAgICAgICAgcXVlcnlJdGVtU2hvcnRJZD17cXVlcnlJdGVtLnNob3J0SWR9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8RGF0YVNvdXJjZVRpcFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtwcm9wcy53aWRnZXRJZH1cbiAgICAgICAgICAgICAgICB1c2VEYXRhU291cmNlPXtxdWVyeUl0ZW0udXNlRGF0YVNvdXJjZX1cbiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICBvblN0YXR1c0NoYW5nZT17aGFuZGxlU3RhdHVzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e2hhbmRsZURhdGFTb3VyY2VDcmVhdGVkfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvVGFiPlxuICAgICAgICA8VGFiXG4gICAgICAgICAgaWQ9J3Jlc3VsdHMnXG4gICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgIHtnZXRJMThuTWVzc2FnZSgncmVzdWx0c1RhYicpfVxuICAgICAgICAgICAgICB7ZWZmZWN0aXZlUmVzdWx0Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgICAgICAgICAgYH0+XG4gICAgICAgICAgICAgICAgICAoe2VmZmVjdGl2ZVJlc3VsdENvdW50fSlcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgfVxuICAgICAgICAgIGRpc2FibGVkPXtlZmZlY3RpdmVSZXN1bHRDb3VudCA9PT0gMH1cbiAgICAgICAgPlxuICAgICAgICAgIHtlZmZlY3RpdmVSZXN1bHRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWVyeS10YXNrX19jb250ZW50Jywge1xuICAgICAgICAgICAgICAgIFtGT0NVU0FCTEVfQ09OVEFJTkVSX0NMQVNTXTogaXNJblBvcHBlciAmJiBhY3RpdmVUYWIgPT09ICdyZXN1bHRzJ1xuICAgICAgICAgICAgICB9KX0gXG4gICAgICAgICAgICAgIGNzcz17Y3NzYFxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCBjbGlja3MgZnJvbSBidWJibGluZyB1cCB3aGVuIFJlc3VsdHMgdGFiIGlzIGFjdGl2ZVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVUYWIgPT09ICdyZXN1bHRzJykge1xuICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza1Jlc3VsdFxuICAgICAgICAgICAgICAgIGtleT17YCR7cXVlcnlJdGVtLmNvbmZpZ0lkfS0ke3F1ZXJ5RXhlY3V0aW9uS2V5UmVmLmN1cnJlbnR9YH1cbiAgICAgICAgICAgICAgICB3aWRnZXRJZD17cHJvcHMud2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtPXtxdWVyeUl0ZW19XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXM9e3F1ZXJ5UGFyYW1SZWYuY3VycmVudH1cbiAgICAgICAgICAgICAgICByZXN1bHRDb3VudD17ZWZmZWN0aXZlUmVzdWx0Q291bnR9XG4gICAgICAgICAgICAgICAgbWF4UGVyUGFnZT17KGRhdGFTb3VyY2UgYXMgUXVlcmlhYmxlRGF0YVNvdXJjZSk/LmdldE1heFJlY29yZENvdW50Py4oKX1cbiAgICAgICAgICAgICAgICByZWNvcmRzPXtlZmZlY3RpdmVSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG91dHB1dERTPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgICBydW50aW1lWm9vbVRvU2VsZWN0ZWQ9e2xhc3RSdW50aW1lWm9vbVRvU2VsZWN0ZWRSZWYuY3VycmVudH1cbiAgICAgICAgICAgICAgICByZXN1bHRzTW9kZT17cmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgdXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodD17dXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXtncmFwaGljc0xheWVyfVxuICAgICAgICAgICAgICAgIG1hcFZpZXc9e21hcFZpZXd9XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzPXthY2N1bXVsYXRlZFJlY29yZHN9XG4gICAgICAgICAgICAgICAgb25BY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2U9e29uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uTmF2QmFjaz17YXN5bmMgKGNsZWFyUmVzdWx0cyA9IGZhbHNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbmF2aWdhdGlvbiBmcm9tIFF1ZXJ5VGFza1Jlc3VsdFxuICAgICAgICAgICAgICAgICAgLy8gSWYgY2xlYXJSZXN1bHRzIGlzIHRydWUsIGNsZWFyIGV2ZXJ5dGhpbmcgYW5kIGdvIHRvIHF1ZXJ5IHRhYlxuICAgICAgICAgICAgICAgICAgLy8gSWYgZmFsc2UsIGp1c3Qgc3dpdGNoIHRvIHF1ZXJ5IHRhYiB3aXRob3V0IGNsZWFyaW5nXG4gICAgICAgICAgICAgICAgICBpZiAoY2xlYXJSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc1NlbGVjdGVkUmVjb3Jkc1JlZi5jdXJyZW50ID0gZmFsc2UgLy8gUmVzZXQgZmxhZyB3aGVuIGNsZWFyaW5nXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5hdlRvRm9ybSh0cnVlKVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSnVzdCBzd2l0Y2ggdGFicywgZG9uJ3QgY2xlYXIgcmVzdWx0c1xuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGFzIG1hbnVhbCBzd2l0Y2ggdG8gcHJldmVudCBhdXRvLXN3aXRjaCB1c2VFZmZlY3QgZnJvbSBpbnRlcmZlcmluZ1xuICAgICAgICAgICAgICAgICAgICBtYW51YWxUYWJTd2l0Y2hSZWYuY3VycmVudCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlVGFiKCdxdWVyeScpXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXlcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgbWFudWFsVGFiU3dpdGNoUmVmLmN1cnJlbnQgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvVGFiPlxuICAgICAgPC9UYWJzPlxuXG4gICAgICB7LyogRXJyb3IgTWVzc2FnZXMgKi99XG4gICAgICB7KHNlbGVjdGlvbkVycm9yIHx8IHpvb21FcnJvcikgJiYgKFxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIHBhZGRpbmc6IDAgMTZweDtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgIGB9PlxuICAgICAgICAgIHtzZWxlY3Rpb25FcnJvciAmJiAoXG4gICAgICAgICAgICA8RXJyb3JNZXNzYWdlIFxuICAgICAgICAgICAgICBlcnJvcj17c2VsZWN0aW9uRXJyb3J9IFxuICAgICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IHNldFNlbGVjdGlvbkVycm9yKG51bGwpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHt6b29tRXJyb3IgJiYgKFxuICAgICAgICAgICAgPEVycm9yTWVzc2FnZSBcbiAgICAgICAgICAgICAgZXJyb3I9e3pvb21FcnJvcn0gXG4gICAgICAgICAgICAgIG9uRGlzbWlzcz17KCkgPT4gc2V0Wm9vbUVycm9yKG51bGwpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBMb2FkaW5nIEluZGljYXRvciAtIG92ZXJsYXlzIG9uIHRvcCBvZiB0YWJzICovfVxuICAgICAge3N0YWdlID09PSAyICYmIChcbiAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICAgIHotaW5kZXg6IDEwMDA7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgYH0+XG4gICAgICAgICAgPExvYWRpbmdSZXN1bHQgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQge1xuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcbiAgdHlwZSBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtcyxcbiAgTWVzc2FnZU1hbmFnZXIsXG4gIHR5cGUgUXVlcnlQYXJhbXMsXG4gIHR5cGUgRGF0YVJlY29yZCxcbiAgRGF0YVJlY29yZFNldENoYW5nZU1lc3NhZ2UsXG4gIFJlY29yZFNldENoYW5nZVR5cGUsXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXG4gIGRhdGFTb3VyY2VVdGlscyxcbiAgSW1tdXRhYmxlXG59IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB0eXBlIHsgSUZpZWxkSW5mbyB9IGZyb20gJ0Blc3JpL2FyY2dpcy1yZXN0LWZlYXR1cmUtc2VydmljZSdcbmltcG9ydCB7IHR5cGUgUXVlcnlJdGVtVHlwZSwgU3BhdGlhbFJlbGF0aW9uLCB0eXBlIFNwYXRpYWxGaWx0ZXJPYmosIEZpZWxkc1R5cGUsIG1hcEpTQVBJVW5pdFRvRHNVbml0LCBtYXBKU0FQSVNwYXRpYWxSZWxUb0RzU3BhdGlhbFJlbCB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCB7IGdldEZpZWxkSW5mb3NJblBvcHVwQ29udGVudCB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5leHBvcnQgZnVuY3Rpb24gY29tYmluZUZpZWxkcyAocmVzdWx0RGlzcGxheUZpZWxkczogSW1tdXRhYmxlQXJyYXk8c3RyaW5nPiwgcmVzdWx0VGl0bGVFeHByZXNzaW9uOiBzdHJpbmcsIGlkRmllbGQ/OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGZpZWxkcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIHJlc3VsdERpc3BsYXlGaWVsZHM/LmZvckVhY2goaXRlbSA9PiBmaWVsZHMuYWRkKGl0ZW0pKVxuICBpZiAocmVzdWx0VGl0bGVFeHByZXNzaW9uKSB7XG4gICAgY29uc3QgdGVtcGxhdGVzID0gcmVzdWx0VGl0bGVFeHByZXNzaW9uLm1hdGNoKC9cXHtcXHcqXFx9L2cpXG4gICAgaWYgKHRlbXBsYXRlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgdGVtcGxhdGVzLmZvckVhY2goaXRlbSA9PiBmaWVsZHMuYWRkKGl0ZW0uc3Vic3RyaW5nKDEsIGl0ZW0ubGVuZ3RoIC0gMSkpKVxuICAgIH1cbiAgfVxuICBpZiAoaWRGaWVsZCkge1xuICAgIGZpZWxkcy5hZGQoaWRGaWVsZClcbiAgfVxuICByZXR1cm4gQXJyYXkuZnJvbShmaWVsZHMpXG59XG5cbi8qKlxuICogU2FuaXRpemVzIHVzZXIgaW5wdXQgZm9yIHF1ZXJ5IHRhc2tzLlxuICogMS4gU3RyaXBzIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuXG4gKiAyLiBQcmV2ZW50cyBiYXNpYyBTUUwgaW5qZWN0aW9uIGJ5IGVzY2FwaW5nIHNpbmdsZSBxdW90ZXMuXG4gKiAzLiBIYW5kbGVzIGVtcHR5IG9yIHdoaXRlc3BhY2Utb25seSBzdHJpbmdzLlxuICogXG4gKiBAcGFyYW0gaW5wdXQgLSBUaGUgcmF3IHVzZXIgaW5wdXQgc3RyaW5nXG4gKiBAcmV0dXJucyBTYW5pdGl6ZWQgc3RyaW5nIG9yIG51bGwgaWYgaW5wdXQgaXMgZW1wdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplUXVlcnlJbnB1dCAoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICBpZiAoIWlucHV0IHx8IHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICBjb25zdCB0cmltbWVkID0gaW5wdXQudHJpbSgpXG4gIGlmICh0cmltbWVkID09PSAnJykge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgXG4gIC8vIEJhc2ljIFNRTCBlc2NhcGluZzogcmVwbGFjZSBzaW5nbGUgcXVvdGVzIHdpdGggZG91YmxlIHNpbmdsZSBxdW90ZXNcbiAgLy8gVGhpcyBpcyBhIHNhZmV0eSBtZWFzdXJlIGluIGNhc2UgamltdS1jb3JlJ3MgZ2V0QXJjR0lTU1FMIGZhaWxzIHRvIGNhdGNoIHNvbWV0aGluZy5cbiAgcmV0dXJuIHRyaW1tZWQucmVwbGFjZSgvJy9nLCBcIicnXCIpXG59XG5cbi8qKlxuICogU2FuaXRpemVzIGFsbCB2YWx1ZXMgd2l0aGluIGFuIElNU3FsRXhwcmVzc2lvbiBvYmplY3QuXG4gKiBcbiAqIEBwYXJhbSBzcWxFeHByIC0gVGhlIHJhdyBTUUwgZXhwcmVzc2lvbiBvYmplY3RcbiAqIEByZXR1cm5zIEEgbmV3IHNhbml0aXplZCBJTVNxbEV4cHJlc3Npb24gb2JqZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVNxbEV4cHJlc3Npb24gKHNxbEV4cHI6IElNU3FsRXhwcmVzc2lvbik6IElNU3FsRXhwcmVzc2lvbiB7XG4gIGlmICghc3FsRXhwciB8fCAhc3FsRXhwci5wYXJ0cykge1xuICAgIHJldHVybiBzcWxFeHByXG4gIH1cblxuICBsZXQgc2FuaXRpemVkRXhwciA9IHNxbEV4cHJcbiAgc3FsRXhwci5wYXJ0cy5mb3JFYWNoKChwYXJ0LCBpbmRleCkgPT4ge1xuICAgIGlmIChwYXJ0LnR5cGUgPT09ICdTSU5HTEUnICYmIHBhcnQudmFsdWVPcHRpb25zPy52YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCByYXdWYWx1ZSA9IHBhcnQudmFsdWVPcHRpb25zLnZhbHVlXG4gICAgICBjb25zdCBzYW5pdGl6ZWRWYWx1ZSA9IHNhbml0aXplUXVlcnlJbnB1dChTdHJpbmcocmF3VmFsdWUpKVxuICAgICAgXG4gICAgICBpZiAoc2FuaXRpemVkVmFsdWUgIT09IHJhd1ZhbHVlKSB7XG4gICAgICAgIHNhbml0aXplZEV4cHIgPSBzYW5pdGl6ZWRFeHByLnNldEluKFsncGFydHMnLCBpbmRleCwgJ3ZhbHVlT3B0aW9ucycsICd2YWx1ZSddLCBzYW5pdGl6ZWRWYWx1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIHNhbml0aXplZEV4cHJcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBvcHVwVGVtcGxhdGUgKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgcXVlcnlJdGVtOiBJbW11dGFibGVPYmplY3Q8UXVlcnlJdGVtVHlwZT5cbik6IFByb21pc2U8eyBwb3B1cFRlbXBsYXRlPzogX19lc3JpLlBvcHVwVGVtcGxhdGUsIGRlZmF1bHRQb3B1cFRlbXBsYXRlPzogX19lc3JpLlBvcHVwVGVtcGxhdGUgfT4ge1xuICBjb25zdCB7IHJlc3VsdEZpZWxkc1R5cGUsIHJlc3VsdERpc3BsYXlGaWVsZHMsIHJlc3VsdFRpdGxlRXhwcmVzc2lvbiA9ICcnIH0gPSBxdWVyeUl0ZW1cbiAgY29uc3QgY3VycmVudE9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIGNvbnN0IHBvcHVwSW5mbyA9IGN1cnJlbnRPcmlnaW5Ecy5nZXRQb3B1cEluZm8oKVxuXG4gIGlmIChyZXN1bHRGaWVsZHNUeXBlID09PSBGaWVsZHNUeXBlLlNlbGVjdEF0dHJpYnV0ZXMpIHtcbiAgICBsZXQgZmllbGRzOiBzdHJpbmdbXVxuICAgIGlmIChyZXN1bHREaXNwbGF5RmllbGRzID09IG51bGwpIHtcbiAgICAgIGNvbnN0IGZpZWxkc0luQ29udGVudCA9IGdldEZpZWxkSW5mb3NJblBvcHVwQ29udGVudChwb3B1cEluZm8pXG4gICAgICBpZiAoZmllbGRzSW5Db250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdW5pcXVlRmllbGRzID0gbmV3IFNldChmaWVsZHNJbkNvbnRlbnQubWFwKGVsZSA9PiBlbGUuZmllbGROYW1lKSlcbiAgICAgICAgZmllbGRzID0gQXJyYXkuZnJvbSh1bmlxdWVGaWVsZHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyByZXR1cm4gYWxsIGZpZWxkcyBieSBkZWZhdWx0XG4gICAgICAgIGNvbnN0IGFsbEZpZWxkc1NjaGVtYSA9IG91dHB1dERTLmdldFNjaGVtYSgpXG4gICAgICAgIGZpZWxkcyA9IGFsbEZpZWxkc1NjaGVtYT8uZmllbGRzID8gT2JqZWN0LnZhbHVlcyhhbGxGaWVsZHNTY2hlbWEuZmllbGRzKS5tYXAoZmllbGQgPT4gZmllbGQuamltdU5hbWUpIDogW11cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZmllbGRzID0gcmVzdWx0RGlzcGxheUZpZWxkcy5hc011dGFibGUoeyBkZWVwOiB0cnVlIH0pXG4gICAgfVxuICAgIGlmIChwb3B1cEluZm8pIHtcbiAgICAgIGNvbnN0IGZpZWxkSW5mb3MgPSBbXVxuICAgICAgZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgICBjb25zdCBmaWVsZEluZm8gPSBwb3B1cEluZm8uZmllbGRJbmZvcy5maW5kKGZpZWxkSW5mbyA9PiBmaWVsZEluZm8uZmllbGROYW1lID09PSBmaWVsZClcbiAgICAgICAgaWYgKGZpZWxkSW5mbykge1xuICAgICAgICAgIGZpZWxkSW5mby52aXNpYmxlID0gdHJ1ZVxuICAgICAgICAgIGZpZWxkSW5mb3MucHVzaChmaWVsZEluZm8pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmllbGRJbmZvcy5wdXNoKHtcbiAgICAgICAgICAgIGZpZWxkTmFtZTogZmllbGQsXG4gICAgICAgICAgICBsYWJlbDogZmllbGRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcG9wdXBUZW1wbGF0ZToge1xuICAgICAgICAgIGZpZWxkSW5mb3MsXG4gICAgICAgICAgY29udGVudDogW3tcbiAgICAgICAgICAgIHR5cGU6ICdmaWVsZHMnXG4gICAgICAgICAgfV0sXG4gICAgICAgICAgdGl0bGU6IHJlc3VsdFRpdGxlRXhwcmVzc2lvblxuICAgICAgICB9XG4gICAgICB9IGFzIGFueVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcG9wdXBUZW1wbGF0ZToge1xuICAgICAgICBmaWVsZEluZm9zOiBmaWVsZHMubWFwKGZpZWxkID0+ICh7XG4gICAgICAgICAgZmllbGROYW1lOiBmaWVsZCxcbiAgICAgICAgICBsYWJlbDogZmllbGRcbiAgICAgICAgfSkpLFxuICAgICAgICBjb250ZW50OiBbe1xuICAgICAgICAgIHR5cGU6ICdmaWVsZHMnXG4gICAgICAgIH1dLFxuICAgICAgICB0aXRsZTogcmVzdWx0VGl0bGVFeHByZXNzaW9uXG4gICAgICB9IGFzIGFueVxuICAgIH1cbiAgfVxuICAvLyB0aGUgc291cmNlIGxheWVyIHdpbGwgcHJvdmlkZSBwb3B1cCBpbmZvXG4gIGxldCBsYXllck9iamVjdFxuICBpZiAoY3VycmVudE9yaWdpbkRzLmxheWVyKSB7XG4gICAgbGF5ZXJPYmplY3QgPSBjdXJyZW50T3JpZ2luRHMubGF5ZXJcbiAgfSBlbHNlIHtcbiAgICBsYXllck9iamVjdCA9IGF3YWl0IGN1cnJlbnRPcmlnaW5Ecy5jcmVhdGVKU0FQSUxheWVyQnlEYXRhU291cmNlKClcbiAgfVxuICBpZiAobGF5ZXJPYmplY3QpIHtcbiAgICBhd2FpdCBsYXllck9iamVjdC5sb2FkKClcbiAgfVxuICByZXR1cm4geyBkZWZhdWx0UG9wdXBUZW1wbGF0ZTogbGF5ZXJPYmplY3Q/LmFzc29jaWF0ZWRMYXllcj8uZGVmYXVsdFBvcHVwVGVtcGxhdGUgfHwgbGF5ZXJPYmplY3Q/LmRlZmF1bHRQb3B1cFRlbXBsYXRlIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUXVlcnlQYXJhbXMgKFxuICBvdXRwdXREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcbiAgc3FsRXhwcjogSU1TcWxFeHByZXNzaW9uLFxuICBzcGF0aWFsRmlsdGVyOiBTcGF0aWFsRmlsdGVyT2JqLFxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPixcbiAgcGFnZTogbnVtYmVyLFxuICBwYWdlU2l6ZTogbnVtYmVyXG4pOiBRdWVyeVBhcmFtcyB7XG4gIGNvbnN0IGN1cnJlbnRRdWVyeURzSnNvbiA9IG91dHB1dERTLmdldERhdGFTb3VyY2VKc29uKClcbiAgY29uc3QgY3VycmVudE9yaWdpbkRzOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlID0gb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKVswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIGNvbnN0IGlzTG9jYWxEcyA9IGN1cnJlbnRRdWVyeURzSnNvbj8uaXNEYXRhSW5EYXRhU291cmNlSW5zdGFuY2VcbiAgaWYgKGlzTG9jYWxEcykge1xuICAgIG91dHB1dERTLnNldFNvdXJjZVJlY29yZHMoY3VycmVudE9yaWdpbkRzLmdldFNvdXJjZVJlY29yZHMoKSlcbiAgfVxuXG4gIGNvbnN0IHsgdXNlQXR0cmlidXRlRmlsdGVyLCB1c2VTcGF0aWFsRmlsdGVyLCBzb3J0T3B0aW9ucywgcmVzdWx0RmllbGRzVHlwZSwgcmVzdWx0RGlzcGxheUZpZWxkcywgcmVzdWx0VGl0bGVFeHByZXNzaW9uIH0gPSBxdWVyeUl0ZW1cbiAgXG4gIC8vIERFVEVSTUlORSBNSU5JTUFMIEZJRUxEUyAoVGhlIFwiRmllbGQgU2hyZWRkZXJcIiBPcHRpbWl6YXRpb24pXG4gIC8vIFRvIGFjaGlldmUgcGVyZm9ybWFuY2UgcGFyaXR5IHdpdGggV2ViIEFwcEJ1aWxkZXIsIHdlIG11c3QgYXZvaWQgZmV0Y2hpbmcgZXZlcnkgXG4gIC8vIGNvbHVtbiBpbiB0aGUgZGF0YWJhc2UgKCogb3IgYWxsKS4gV2Ugc3VyZ2ljYWxseSByZXF1ZXN0IG9ubHkgdGhlIGZpZWxkcyBcbiAgLy8gbmVlZGVkIGZvciB0aGUgVGl0bGUsIHRoZSBBdHRyaWJ1dGUgTGlzdCwgYW5kIHRoZSBJRCBmaWVsZC5cbiAgbGV0IG91dHB1dEZpZWxkczogc3RyaW5nW10gPSBbXVxuICBpZiAocmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzICYmIHJlc3VsdERpc3BsYXlGaWVsZHMpIHtcbiAgICBvdXRwdXRGaWVsZHMgPSBjb21iaW5lRmllbGRzKHJlc3VsdERpc3BsYXlGaWVsZHMgYXMgYW55LCByZXN1bHRUaXRsZUV4cHJlc3Npb24gfHwgJycsIG91dHB1dERTLmdldElkRmllbGQoKSlcbiAgfSBlbHNlIHtcbiAgICAvLyBQb3B1cCBtb2RlOiBHZXQgb25seSB2aXNpYmxlIGZpZWxkcyBmcm9tIHBvcHVwIGluZm9cbiAgICBjb25zdCBwb3B1cEluZm8gPSBjdXJyZW50T3JpZ2luRHMuZ2V0UG9wdXBJbmZvKClcbiAgICBjb25zdCBmaWVsZE5hbWVzID0gT2JqZWN0LnZhbHVlcyhjdXJyZW50T3JpZ2luRHMuZ2V0U2NoZW1hKCkuZmllbGRzID8/IHt9KS5tYXAoZiA9PiBmLm5hbWUpXG4gICAgY29uc3QgdmFsaWRGaWVsZEluZm9zID0gcG9wdXBJbmZvPy5maWVsZEluZm9zPy5maWx0ZXIoZmllbGRJbmZvID0+IGZpZWxkSW5mby52aXNpYmxlICE9PSBmYWxzZSAmJiBmaWVsZE5hbWVzLmluY2x1ZGVzKGZpZWxkSW5mby5maWVsZE5hbWUpKVxuICAgIG91dHB1dEZpZWxkcyA9IHZhbGlkRmllbGRJbmZvcz8ubWFwKGZpZWxkSW5mbyA9PiBmaWVsZEluZm8uZmllbGROYW1lKSB8fCBbXVxuICAgIFxuICAgIC8vIEFsd2F5cyBlbnN1cmUgSUQgZmllbGQgaXMgaW5jbHVkZWRcbiAgICBjb25zdCBpZEZpZWxkID0gb3V0cHV0RFMuZ2V0SWRGaWVsZCgpXG4gICAgaWYgKGlkRmllbGQgJiYgIW91dHB1dEZpZWxkcy5pbmNsdWRlcyhpZEZpZWxkKSkge1xuICAgICAgb3V0cHV0RmllbGRzLnB1c2goaWRGaWVsZClcbiAgICB9XG4gIH1cblxuICBjb25zdCBtZXJnZWRRdWVyeVBhcmFtcyA9IG91dHB1dERTLm1lcmdlUXVlcnlQYXJhbXMoY3VycmVudE9yaWdpbkRzLmdldEN1cnJlbnRRdWVyeVBhcmFtcygpID8/IHt9LCB7XG4gICAgd2hlcmU6ICh1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwcj8uc3FsKSA/IGRhdGFTb3VyY2VVdGlscy5nZXRBcmNHSVNTUUwoc3FsRXhwciwgb3V0cHV0RFMpLnNxbCA6ICcxPTEnLFxuICAgIHNxbEV4cHJlc3Npb246ICh1c2VBdHRyaWJ1dGVGaWx0ZXIgJiYgc3FsRXhwcj8uc3FsKSA/IHNxbEV4cHIgOiBudWxsLFxuICAgIC8vIEZPUkNFIG1pbmltYWwgZmllbGRzIGhlcmUgdG8gb3ZlcnJpZGUgYW55IGZyYW1ld29yayBcIipcIiBvciBcImFsbFwiXG4gICAgb3V0RmllbGRzOiBvdXRwdXRGaWVsZHNcbiAgfSBhcyBhbnkpXG5cbiAgLy8gUEVSRk9STUFOQ0UgT1BUSU1JWkFUSU9OOiBVbml2ZXJzYWwgU1FMIE9wdGltaXplclxuICAvLyBXZSBub3JtYWxpemUgdGhlIHVzZXIncyBpbnB1dCB0byBVUFBFUkNBU0UgdG8gZW5zdXJlIGNhc2UtaW5zZW5zaXRpdml0eSB3aGlsZSBcbiAgLy8gdW53cmFwcGluZyBhbnkgTE9XRVIoKSBmdW5jdGlvbiBhcm91bmQgdGhlIGZpZWxkIG5hbWUuIFRoaXMgYWxsb3dzIHRoZSBkYXRhYmFzZSBcbiAgLy8gdG8gdXNlIGl0cyBhdHRyaWJ1dGUgaW5kZXhlcyAoU0FSR2FibGUgcXVlcnkpLlxuICBpZiAobWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUgJiYgbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUuaW5jbHVkZXMoJ0xPV0VSKCcpKSB7XG4gICAgY29uc3Qgb3B0aW1pemVkV2hlcmUgPSBtZXJnZWRRdWVyeVBhcmFtcy53aGVyZS5yZXBsYWNlKC9MT1dFUlxcKChbXildKylcXClcXHMqKD18TElLRSlcXHMqJyhbXiddKiknL2dpLCAobWF0Y2gsIGZpZWxkLCBvcGVyYXRvciwgdmFsdWUpID0+IHtcbiAgICAgIC8vIE5vcm1hbGl6ZSBib3RoIHNpZGVzIHRvIFVQUEVSQ0FTRS4gVGhpcyB3b3JrcyBmb3IgQU5ZIGZpZWxkIG5hbWUuXG4gICAgICAvLyBXZSBrZWVwIHRoZSBmaWVsZCBuYW1lIFwibmFrZWRcIiBzbyB0aGUgaW5kZXggaXMgdXNlZC5cbiAgICAgIHJldHVybiBgJHtmaWVsZH0gJHtvcGVyYXRvcn0gJyR7dmFsdWUudG9VcHBlckNhc2UoKX0nYFxuICAgIH0pXG4gICAgXG4gICAgaWYgKG9wdGltaXplZFdoZXJlICE9PSBtZXJnZWRRdWVyeVBhcmFtcy53aGVyZSkge1xuICAgICAgY29uc29sZS5sb2coYFtRVUVSWVNJTVBMRS1QRVJGXSBVbml2ZXJzYWwgU1FMIE9wdGltaXphdGlvbjogJHttZXJnZWRRdWVyeVBhcmFtcy53aGVyZX0gLT4gJHtvcHRpbWl6ZWRXaGVyZX1gKVxuICAgICAgbWVyZ2VkUXVlcnlQYXJhbXMud2hlcmUgPSBvcHRpbWl6ZWRXaGVyZVxuICAgIH1cbiAgfVxuXG4gIC8vIGNvbXBvc2UgcXVlcnkgcGFyYW1zIGZvciBxdWVyeVxuICBjb25zdCBxdWVyeVBhcmFtczogRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMgPSB7XG4gICAgLy8gdXJsOiBkcy51cmwsXG4gICAgcmV0dXJuR2VvbWV0cnk6IHRydWUsXG4gICAgLyoqIFxuICAgICAqIFBFUkZPUk1BTkNFIE9QVElNSVpBVElPTjogRm9yY2UgbG93ZXIgcHJlY2lzaW9uIGZvciBhbGwgZGlzcGxheSBxdWVyaWVzLlxuICAgICAqL1xuICAgIG1heEFsbG93YWJsZU9mZnNldDogMC4xLCBcbiAgICBwYWdlLFxuICAgIC8vIExpbWl0IHBhZ2VTaXplIHRvIGEgc2FuZSBkZWZhdWx0IGlmIG5vdCBwcm92aWRlZCBvciB0b28gbGFyZ2VcbiAgICBwYWdlU2l6ZTogKHBhZ2VTaXplICYmIHBhZ2VTaXplIDwgMTAwMCkgPyBwYWdlU2l6ZSA6IDEwMDAsXG4gICAgLi4ubWVyZ2VkUXVlcnlQYXJhbXNcbiAgfVxuXG4gIC8vIEZpbmFsIG92ZXJyaWRlIHRvIGVuc3VyZSBubyBcIipcIiBsZWFrcyB0aHJvdWdoIGZyb20gYW55IG1lcmdlIG9wZXJhdGlvblxuICBpZiAoIXF1ZXJ5UGFyYW1zLm91dEZpZWxkcyB8fCBxdWVyeVBhcmFtcy5vdXRGaWVsZHMuaW5jbHVkZXMoJyonKSkge1xuICAgIHF1ZXJ5UGFyYW1zLm91dEZpZWxkcyA9IG91dHB1dEZpZWxkc1xuICB9XG5cbiAgLy8gRGlhZ25vc3RpYyBsb2c6IFNob3cgZXhhY3RseSBXSElDSCBmaWVsZHMgYXJlIGJlaW5nIHNlbnRcbiAgY29uc29sZS5sb2coYFtRVUVSWVNJTVBMRS1QRVJGXSBSZXF1ZXN0aW5nIGRhdGE6IFxuICAgIC0gRmllbGRzIENvdW50OiAke3F1ZXJ5UGFyYW1zLm91dEZpZWxkcz8ubGVuZ3RofSBcbiAgICAtIEZpZWxkczogJHtxdWVyeVBhcmFtcy5vdXRGaWVsZHM/LmpvaW4oJywgJyl9XG4gICAgLSBQYWdlU2l6ZTogJHtxdWVyeVBhcmFtcy5wYWdlU2l6ZX1cbiAgICAtIE9mZnNldDogJHtxdWVyeVBhcmFtcy5tYXhBbGxvd2FibGVPZmZzZXR9YClcblxuICBpZiAodXNlU3BhdGlhbEZpbHRlciAmJiBzcGF0aWFsRmlsdGVyPy5nZW9tZXRyeSkge1xuICAgIGNvbnN0IHsgZ2VvbWV0cnksIHJlbGF0aW9uID0gU3BhdGlhbFJlbGF0aW9uLkludGVyc2VjdCwgYnVmZmVyIH0gPSBzcGF0aWFsRmlsdGVyXG5cbiAgICBjb25zdCBzcGF0aWFsUXVlcnlQYXJhbXM6IEZlYXR1cmVMYXllclF1ZXJ5UGFyYW1zID0ge1xuICAgICAgZ2VvbWV0cnlUeXBlOiBkYXRhU291cmNlVXRpbHMuY2hhbmdlSlNBUElHZW9tZXRyeVR5cGVUb1Jlc3RBUElHZW9tZXRyeVR5cGUoZ2VvbWV0cnkudHlwZSksXG4gICAgICBnZW9tZXRyeTogZ2VvbWV0cnkudG9KU09OKCksXG4gICAgICBzcGF0aWFsUmVsOiBtYXBKU0FQSVNwYXRpYWxSZWxUb0RzU3BhdGlhbFJlbFtyZWxhdGlvbl0sXG4gICAgICBkaXN0YW5jZTogYnVmZmVyPy5kaXN0YW5jZSxcbiAgICAgIHVuaXRzOiBidWZmZXI/LnVuaXQgPyBtYXBKU0FQSVVuaXRUb0RzVW5pdFtidWZmZXIudW5pdF0gOiB1bmRlZmluZWRcbiAgICB9XG4gICAgT2JqZWN0LmFzc2lnbihxdWVyeVBhcmFtcywgc3BhdGlhbFF1ZXJ5UGFyYW1zKVxuICB9XG5cbiAgaWYgKHNvcnRPcHRpb25zPy5sZW5ndGggPiAwKSB7XG4gICAgT2JqZWN0LmFzc2lnbihxdWVyeVBhcmFtcywge1xuICAgICAgb3JkZXJCeUZpZWxkczogc29ydE9wdGlvbnMubWFwKGl0ZW0gPT4gYCR7aXRlbS5qaW11RmllbGROYW1lfSAke2l0ZW0ub3JkZXJ9YClcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHF1ZXJ5UGFyYW1zXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlQ291bnRRdWVyeSAoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICBxdWVyeVBhcmFtczogUXVlcnlQYXJhbXNcbik6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG91dHB1dERTLmxvYWRDb3VudChxdWVyeVBhcmFtcywgeyB3aWRnZXRJZCwgcmVmcmVzaDogdHJ1ZSB9KVxuICByZXR1cm4gcmVzdWx0ICE9IG51bGwgPyByZXN1bHQgOiAwXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlUXVlcnkgKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBxdWVyeUl0ZW06IEltbXV0YWJsZU9iamVjdDxRdWVyeUl0ZW1UeXBlPixcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHF1ZXJ5UGFyYW1zOiBRdWVyeVBhcmFtc1xuKTogUHJvbWlzZTx7IHJlY29yZHM/OiBEYXRhUmVjb3JkW10sIGZpZWxkcz86IHN0cmluZ1tdIH0+IHtcbiAgY29uc3QgcG9wdXBJbmZvID0gb3V0cHV0RFMuZ2V0UG9wdXBJbmZvKClcblxuICBjb25zdCBsYXllckRlZmluaXRpb24gPSBvdXRwdXREUy5nZXRMYXllckRlZmluaXRpb24oKVxuICBjb25zdCBnZXREZWZhdWx0RmllbGRJbmZvcyA9ICgpID0+XG4gICAgW1xuICAgICAgeyBmaWVsZE5hbWU6IGxheWVyRGVmaW5pdGlvbj8ub2JqZWN0SWRGaWVsZCA/PyAnb2JqZWN0aWQnLCBsYWJlbDogJ09CSkVDVElEJywgdG9vbHRpcDogJycsIHZpc2libGU6IHRydWUgfVxuICAgIF0gYXMgSUZpZWxkSW5mb1tdXG4gIGNvbnN0IGZpZWxkSW5mb3MgPSAoKGZpZWxkSW5mb3MpID0+IChmaWVsZEluZm9zLmxlbmd0aCA/IGZpZWxkSW5mb3MgOiBnZXREZWZhdWx0RmllbGRJbmZvcygpKSkoXG4gICAgKHBvcHVwSW5mbz8uZmllbGRJbmZvcyB8fCBbXSkuZmlsdGVyKChpKSA9PiBpLnZpc2libGUpXG4gIClcbiAgLy8gY29uc3QgZmllbGRzID0gb3V0cHV0RFMuZ2V0U2NoZW1hKCk/LmZpZWxkc1xuICAvLyBsZXQgc2VsZWN0ZWRGaWVsZE5hbWVzXG4gIC8vIGlmIChxdWVyeUl0ZW0ucmVzdWx0RmllbGRzVHlwZSA9PT0gRmllbGRzVHlwZS5TZWxlY3RBdHRyaWJ1dGVzKSB7XG4gIC8vICAgc2VsZWN0ZWRGaWVsZE5hbWVzID0gW10uY29uY2F0KHF1ZXJ5SXRlbS5yZXN1bHREaXNwbGF5RmllbGRzLCBxdWVyeUl0ZW0ucmVzdWx0VGl0bGVGaWVsZHMpXG4gIC8vIH0gZWxzZSB7XG4gIC8vICAgc2VsZWN0ZWRGaWVsZE5hbWVzID0gZmllbGRJbmZvcy5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgLy8gfVxuICAvLyBjb25zdCBzZWxlY3RlZEZpZWxkSmltdU5hbWVzID0gZmllbGRzXG4gIC8vICAgPyBPYmplY3Qua2V5cyhmaWVsZHMpLmZpbHRlcigoamltdU5hbWUpID0+IHNlbGVjdGVkRmllbGROYW1lcy5pbmNsdWRlcyhmaWVsZHNbamltdU5hbWVdLm5hbWUpKVxuICAvLyAgIDogW11cbiAgLy8gb3V0cHV0RFMuc2V0U2VsZWN0ZWRGaWVsZHMoc2VsZWN0ZWRGaWVsZEppbXVOYW1lcylcbiAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgbGV0IHJlY29yZHMgPSBhd2FpdCBvdXRwdXREUy5sb2FkKHF1ZXJ5UGFyYW1zLCB7IHdpZGdldElkIH0pXG4gIGNvbnN0IGZldGNoVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gIFxuICBpZiAocmVjb3JkcyA9PSBudWxsKSB7XG4gICAgcmVjb3JkcyA9IFtdXG4gIH1cbiAgY29uc3Qgb3JpZ2luRHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgXG4gIGNvbnN0IGxheWVyU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgY29uc3QgbGF5ZXJPYmplY3QgPSBhd2FpdCBnZXRMYXllck9iamVjdChvcmlnaW5EcylcbiAgY29uc3QgbGF5ZXJUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBsYXllclN0YXJ0VGltZVxuXG4gIGNvbnNvbGUubG9nKGBbUVVFUllTSU1QTEUtUEVSRl0gZXhlY3V0ZVF1ZXJ5IGNvbXBsZXRlLiBGZXRjaDogJHtNYXRoLnJvdW5kKGZldGNoVGltZSl9bXMsIExheWVyOiAke01hdGgucm91bmQobGF5ZXJUaW1lKX1tcywgVG90YWw6ICR7TWF0aC5yb3VuZChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSl9bXMsIENvdW50OiAke3JlY29yZHMubGVuZ3RofWApXG4gIFxuICByZWNvcmRzLmZvckVhY2goKHJlY29yZCkgPT4ge1xuICAgIGNvbnN0IGZlYXR1cmUgPSAocmVjb3JkIGFzIGFueSkuZmVhdHVyZVxuICAgIGlmIChsYXllck9iamVjdCkge1xuICAgICAgZmVhdHVyZS5zb3VyY2VMYXllciA9IChsYXllck9iamVjdCBhcyBhbnkpLmFzc29jaWF0ZWRMYXllciB8fCBsYXllck9iamVjdFxuICAgIH1cbiAgICBmZWF0dXJlLmxheWVyID0gZmVhdHVyZS5zb3VyY2VMYXllclxuICB9KVxuICBjb25zdCBxdWVyeVJlc3VsdCA9IHtcbiAgICByZWNvcmRzLFxuICAgIGZpZWxkczogZmllbGRJbmZvcy5tYXAoKGZpZWxkSW5mbykgPT4gZmllbGRJbmZvLmZpZWxkTmFtZSlcbiAgfVxuXG4gIC8vIHB1Ymxpc2ggbWVzc2FnZVxuICBjb25zdCBkYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSA9IG5ldyBEYXRhUmVjb3JkU2V0Q2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgUmVjb3JkU2V0Q2hhbmdlVHlwZS5DcmVhdGVVcGRhdGUsIFt7XG4gICAgcmVjb3Jkczogb3V0cHV0RFMuZ2V0QWxsTG9hZGVkUmVjb3JkcygpLFxuICAgIGZpZWxkczogcXVlcnlSZXN1bHQuZmllbGRzLFxuICAgIGRhdGFTb3VyY2U6IG91dHB1dERTLFxuICAgIG5hbWU6IG91dHB1dERTLmlkLFxuICAgIGxhYmVsOiBvdXRwdXREUy5nZXRMYWJlbCgpXG4gIH1dKVxuICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKGRhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlKVxuXG4gIHJldHVybiBxdWVyeVJlc3VsdFxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRMYXllck9iamVjdCAoZGF0YVNvdXJjZTogRmVhdHVyZUxheWVyRGF0YVNvdXJjZSkge1xuICBjb25zdCBsYXllck9iamVjdCA9IGF3YWl0IGRhdGFTb3VyY2UuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpIGFzIF9fZXNyaS5MYXllclxuICAvLyBsYXllck9iamVjdCBtYXkgYmUgdW5kZWZpbmVkIGlmIHRoZSBkYXRhIHNvdXJjZSBpcyBhZGRlZCBieSBVUkxcbiAgaWYgKGxheWVyT2JqZWN0KSB7XG4gICAgYXdhaXQgbGF5ZXJPYmplY3QubG9hZCgpXG4gIH1cbiAgcmV0dXJuIGxheWVyT2JqZWN0XG59XG5cblxuIiwiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgcmVzdWx0cyBhY2N1bXVsYXRpb24gaW4gUXVlcnlTaW1wbGUgd2lkZ2V0LlxuICogSGFuZGxlcyBcIkFkZCB0b1wiIGFuZCBcIlJlbW92ZSBmcm9tXCIgbW9kZXMgZm9yIGFjY3VtdWxhdGluZyBxdWVyeSByZXN1bHRzLlxuICovXG5cbmltcG9ydCB0eXBlIHsgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQsIERhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBEYXRhU291cmNlTWFuYWdlciwgRGF0YVNvdXJjZVN0YXR1cywgTWVzc2FnZU1hbmFnZXIsIERhdGFSZWNvcmRTZXRDaGFuZ2VNZXNzYWdlLCBSZWNvcmRTZXRDaGFuZ2VUeXBlLCBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyIH0gZnJvbSAnd2lkZ2V0cy9zaGFyZWQtY29kZS9jb21tb24nXG5pbXBvcnQgeyByZW1vdmVIaWdobGlnaHRHcmFwaGljcyB9IGZyb20gJy4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5cbi8qKlxuICogR2VuZXJhdGVzIGEgY29tcG9zaXRlIGtleSBmb3IgYSByZWNvcmQgdGhhdCBpbmNsdWRlcyBib3RoIG9yaWdpbiBkYXRhIHNvdXJjZSBJRCBhbmQgb2JqZWN0SWQuXG4gKiBUaGlzIGVuc3VyZXMgdW5pcXVlbmVzcyBhY3Jvc3MgZGlmZmVyZW50IGxheWVycyB0aGF0IG1heSBoYXZlIHRoZSBzYW1lIG9iamVjdElkLlxuICogXG4gKiBAcGFyYW0gcmVjb3JkIC0gVGhlIGZlYXR1cmUgZGF0YSByZWNvcmRcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgY29udGFpbmluZyB0aGUgcmVjb3JkXG4gKiBAcmV0dXJucyBDb21wb3NpdGUga2V5IHN0cmluZzogYCR7b3JpZ2luRFNJZH1fJHtvYmplY3RJZH1gXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWNvcmRLZXkoXG4gIHJlY29yZDogRmVhdHVyZURhdGFSZWNvcmQsXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiBzdHJpbmcge1xuICBjb25zdCBvcmlnaW5EUyA9IG91dHB1dERTLmdldE9yaWdpbkRhdGFTb3VyY2VzKCk/LlswXSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIGNvbnN0IG9yaWdpbkRTSWQgPSBvcmlnaW5EUz8uaWQgfHwgb3V0cHV0RFMuaWQgLy8gRmFsbGJhY2sgdG8gb3V0cHV0RFMgaWYgbm8gb3JpZ2luXG4gIGNvbnN0IG9iamVjdElkID0gcmVjb3JkLmdldElkKClcbiAgY29uc3Qga2V5ID0gYCR7b3JpZ2luRFNJZH1fJHtvYmplY3RJZH1gXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlY29yZC1rZXktZ2VuZXJhdGVkJyxcbiAgICBvcmlnaW5EU0lkLFxuICAgIG9iamVjdElkLFxuICAgIGtleSxcbiAgICBoYXNPcmlnaW5EUzogISFvcmlnaW5EU1xuICB9KVxuICBcbiAgcmV0dXJuIGtleVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYWNjdW11bGF0ZWQgcmVzdWx0cyBkYXRhIHNvdXJjZSBmb3Igc3RvcmluZyBtZXJnZWQgcXVlcnkgcmVzdWx0cy5cbiAqIFRoaXMgZGF0YSBzb3VyY2UgaXMgd2lkZ2V0LWxldmVsIGFuZCBwZXJzaXN0cyBhY3Jvc3MgbXVsdGlwbGUgcXVlcmllcy5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIG9yaWdpbkRTIC0gVGhlIG9yaWdpbiBkYXRhIHNvdXJjZSB0byB1c2UgYXMgdGhlIGJhc2VcbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGFjY3VtdWxhdGVkIHJlc3VsdHMgZGF0YSBzb3VyY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFjY3VtdWxhdGVkUmVzdWx0c0RhdGFTb3VyY2UoXG4gIHdpZGdldElkOiBzdHJpbmcsXG4gIG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4pOiBQcm9taXNlPEZlYXR1cmVMYXllckRhdGFTb3VyY2U+IHtcbiAgY29uc3QgYWNjdW11bGF0ZWREU0lkID0gYCR7d2lkZ2V0SWR9X2FjY3VtdWxhdGVkX3Jlc3VsdHNgXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2NyZWF0aW5nLWFjY3VtdWxhdGVkLWRzJyxcbiAgICB3aWRnZXRJZCxcbiAgICBhY2N1bXVsYXRlZERTSWQsXG4gICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWRcbiAgfSlcbiAgXG4gIC8vIENoZWNrIGlmIGRhdGEgc291cmNlIGFscmVhZHkgZXhpc3RzXG4gIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgbGV0IGFjY3VtdWxhdGVkRFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShhY2N1bXVsYXRlZERTSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgXG4gIGlmIChhY2N1bXVsYXRlZERTKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2FjY3VtdWxhdGVkLWRzLWFscmVhZHktZXhpc3RzJyxcbiAgICAgIGFjY3VtdWxhdGVkRFNJZFxuICAgIH0pXG4gICAgcmV0dXJuIGFjY3VtdWxhdGVkRFNcbiAgfVxuICBcbiAgLy8gR2V0IG9yaWdpbiBkYXRhIHNvdXJjZSBKU09OIHRvIGNyZWF0ZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAgY29uc3Qgb3JpZ2luRGF0YVNvdXJjZUpzb24gPSBvcmlnaW5EUy5nZXREYXRhU291cmNlSnNvbigpXG4gIFxuICAvLyBDcmVhdGUgb3V0cHV0IGRhdGEgc291cmNlIEpTT04gc2ltaWxhciB0byBob3cgcXVlcnkgaXRlbXMgY3JlYXRlIG91dHB1dCBEU1xuICBjb25zdCBvdXRwdXREYXRhU291cmNlSnNvbiA9IHtcbiAgICBpZDogYWNjdW11bGF0ZWREU0lkLFxuICAgIGxhYmVsOiAnQWNjdW11bGF0ZWQgUmVzdWx0cycsXG4gICAgdHlwZTogb3JpZ2luRGF0YVNvdXJjZUpzb24/LnR5cGUsXG4gICAgZ2VvbWV0cnlUeXBlOiBvcmlnaW5EYXRhU291cmNlSnNvbj8uZ2VvbWV0cnlUeXBlLFxuICAgIHVybDogb3JpZ2luRGF0YVNvdXJjZUpzb24/LnVybCxcbiAgICBpdGVtSWQ6IG9yaWdpbkRhdGFTb3VyY2VKc29uPy5pdGVtSWQsXG4gICAgcG9ydGFsVXJsOiBvcmlnaW5EYXRhU291cmNlSnNvbj8ucG9ydGFsVXJsLFxuICAgIG9yaWdpbkRhdGFTb3VyY2VzOiBbe1xuICAgICAgZGF0YVNvdXJjZUlkOiBvcmlnaW5EUy5pZCxcbiAgICAgIG1haW5EYXRhU291cmNlSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgcm9vdERhdGFTb3VyY2VJZDogb3JpZ2luRFMuaWRcbiAgICB9XSxcbiAgICBsYXllcklkOiBvcmlnaW5EYXRhU291cmNlSnNvbj8ubGF5ZXJJZCxcbiAgICBpc0RhdGFJbkRhdGFTb3VyY2VJbnN0YW5jZTogb3JpZ2luRGF0YVNvdXJjZUpzb24/LmlzRGF0YUluRGF0YVNvdXJjZUluc3RhbmNlLFxuICAgIGlzT3V0cHV0RnJvbVdpZGdldDogdHJ1ZVxuICB9XG4gIFxuICAvLyBDcmVhdGUgdGhlIGRhdGEgc291cmNlIHVzaW5nIERhdGFTb3VyY2VNYW5hZ2VyXG4gIC8vIE5vdGU6IFRoaXMgZm9sbG93cyB0aGUgcGF0dGVybiBmcm9tIHNldHRpbmcudHN4IGZvciBjcmVhdGluZyBvdXRwdXQgZGF0YSBzb3VyY2VzXG4gIGFjY3VtdWxhdGVkRFMgPSBkc01hbmFnZXIuY3JlYXRlRGF0YVNvdXJjZUJ5RGF0YVNvdXJjZUpzb24ob3V0cHV0RGF0YVNvdXJjZUpzb24pIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgXG4gIC8vIFNldCBpbml0aWFsIHN0YXR1c1xuICBhY2N1bXVsYXRlZERTLnNldFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBhY2N1bXVsYXRlZERTLnNldENvdW50U3RhdHVzKERhdGFTb3VyY2VTdGF0dXMuTm90UmVhZHkpXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2FjY3VtdWxhdGVkLWRzLWNyZWF0ZWQnLFxuICAgIGFjY3VtdWxhdGVkRFNJZCxcbiAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICBzdGF0dXM6IGFjY3VtdWxhdGVkRFMuZ2V0U3RhdHVzKClcbiAgfSlcbiAgXG4gIHJldHVybiBhY2N1bXVsYXRlZERTXG59XG5cbi8qKlxuICogTWVyZ2VzIG5ldyBxdWVyeSByZXN1bHRzIHdpdGggZXhpc3RpbmcgcmVjb3Jkcy5cbiAqIERlZHVwbGljYXRlcyByZWNvcmRzIHVzaW5nIGNvbXBvc2l0ZSBrZXlzIChvcmlnaW5EU0lkX29iamVjdElkKS5cbiAqIFxuICogVGhpcyBmdW5jdGlvbiBtZXJnZXMgbmV3IHJlY29yZHMgd2l0aCBleGlzdGluZyByZWNvcmRzIHRoYXQgd2VyZSBjYXB0dXJlZFxuICogYmVmb3JlIHRoZSBxdWVyeSBleGVjdXRlZC4gVGhlIGNhbGxlciBpcyByZXNwb25zaWJsZSBmb3Igc3RvcmluZyB0aGUgbWVyZ2VkXG4gKiByZWNvcmRzICh0eXBpY2FsbHkgaW4gcmVjb3Jkc1JlZiBvciBzdGF0ZSkuXG4gKiBcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2UgKHVzZWQgZm9yIGtleSBnZW5lcmF0aW9uKVxuICogQHBhcmFtIG5ld1JlY29yZHMgLSBOZXcgcmVjb3JkcyB0byBtZXJnZSBpblxuICogQHBhcmFtIGV4aXN0aW5nUmVjb3JkcyAtIEV4aXN0aW5nIHJlY29yZHMgY2FwdHVyZWQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbiAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIGVtcHR5IGFycmF5KVxuICogQHJldHVybnMgQXJyYXkgb2YgYWxsIG1lcmdlZCByZWNvcmRzIChleGlzdGluZyArIG5ldyB1bmlxdWUgcmVjb3JkcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlUmVzdWx0c0ludG9BY2N1bXVsYXRlZChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIG5ld1JlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIGV4aXN0aW5nUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4pOiBGZWF0dXJlRGF0YVJlY29yZFtdIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdtZXJnaW5nLXJlc3VsdHMtc3RhcnQnLFxuICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgIGV4aXN0aW5nUmVjb3Jkc0NvdW50OiBleGlzdGluZ1JlY29yZHMubGVuZ3RoLFxuICAgIG5ld1JlY29yZHNDb3VudDogbmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIC8vIEJ1aWxkIFNldCBvZiBleGlzdGluZyByZWNvcmQga2V5cyBmb3IgZmFzdCBsb29rdXBcbiAgY29uc3QgZXhpc3RpbmdLZXlzID0gbmV3IFNldChcbiAgICBleGlzdGluZ1JlY29yZHMubWFwKHJlY29yZCA9PiBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUykpXG4gIClcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnZXhpc3RpbmctcmVjb3Jkcy1jaGVjaycsXG4gICAgZXhpc3RpbmdSZWNvcmRzQ291bnQ6IGV4aXN0aW5nUmVjb3Jkcy5sZW5ndGgsXG4gICAgZXhpc3RpbmdLZXlzQ291bnQ6IGV4aXN0aW5nS2V5cy5zaXplXG4gIH0pXG4gIFxuICAvLyBGaWx0ZXIgbmV3IHJlY29yZHMgdG8gb25seSBpbmNsdWRlIHRob3NlIG5vdCBhbHJlYWR5IGluIG91dHB1dCBEU1xuICBjb25zdCB1bmlxdWVOZXdSZWNvcmRzID0gbmV3UmVjb3Jkcy5maWx0ZXIocmVjb3JkID0+IHtcbiAgICBjb25zdCBrZXkgPSBnZXRSZWNvcmRLZXkocmVjb3JkLCBvdXRwdXREUylcbiAgICBjb25zdCBpc0R1cGxpY2F0ZSA9IGV4aXN0aW5nS2V5cy5oYXMoa2V5KVxuICAgIFxuICAgIGlmIChpc0R1cGxpY2F0ZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnZHVwbGljYXRlLXJlY29yZC1za2lwcGVkJyxcbiAgICAgICAga2V5LFxuICAgICAgICBvYmplY3RJZDogcmVjb3JkLmdldElkKClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIHJldHVybiAhaXNEdXBsaWNhdGVcbiAgfSlcbiAgXG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnZGVkdXBsaWNhdGlvbi1jb21wbGV0ZScsXG4gICAgbmV3UmVjb3Jkc0NvdW50OiBuZXdSZWNvcmRzLmxlbmd0aCxcbiAgICB1bmlxdWVOZXdSZWNvcmRzQ291bnQ6IHVuaXF1ZU5ld1JlY29yZHMubGVuZ3RoLFxuICAgIGR1cGxpY2F0ZXNTa2lwcGVkOiBuZXdSZWNvcmRzLmxlbmd0aCAtIHVuaXF1ZU5ld1JlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBNZXJnZSByZWNvcmRzXG4gIGNvbnN0IG1lcmdlZFJlY29yZHMgPSBbLi4uZXhpc3RpbmdSZWNvcmRzLCAuLi51bmlxdWVOZXdSZWNvcmRzXVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdtZXJnZS1jb21wbGV0ZScsXG4gICAgdG90YWxSZWNvcmRzQWZ0ZXJNZXJnZTogbWVyZ2VkUmVjb3Jkcy5sZW5ndGgsXG4gICAgZXhpc3RpbmdDb3VudDogZXhpc3RpbmdSZWNvcmRzLmxlbmd0aCxcbiAgICBuZXdVbmlxdWVDb3VudDogdW5pcXVlTmV3UmVjb3Jkcy5sZW5ndGhcbiAgfSlcbiAgXG4gIHJldHVybiBtZXJnZWRSZWNvcmRzXG59XG5cbi8qKlxuICogUmVtb3ZlcyBtYXRjaGluZyByZWNvcmRzIGZyb20gd2lkZ2V0LWxldmVsIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gKiBNYXRjaGVzIHJlY29yZHMgdXNpbmcgY29tcG9zaXRlIGtleXMgKG9yaWdpbkRTSWRfb2JqZWN0SWQpLlxuICogXG4gKiBUaGlzIGZ1bmN0aW9uIHJlbW92ZXMgcmVjb3JkcyBmcm9tIGV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgdGhhdCB3ZXJlIGNhcHR1cmVkXG4gKiBiZWZvcmUgdGhlIHF1ZXJ5IGV4ZWN1dGVkLiBUaGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlIGZvciBzdG9yaW5nIHRoZSByZW1haW5pbmdcbiAqIHJlY29yZHMgKHR5cGljYWxseSBpbiByZWNvcmRzUmVmIG9yIHN0YXRlKS5cbiAqIFxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKiBAcGFyYW0gcmVjb3Jkc1RvUmVtb3ZlIC0gUmVjb3JkcyB0byByZW1vdmUgKGZyb20gcXVlcnkgcmVzdWx0cylcbiAqIEBwYXJhbSBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3JkcyAtIEV4aXN0aW5nIGFjY3VtdWxhdGVkIHJlY29yZHMgY2FwdHVyZWQgYmVmb3JlIHF1ZXJ5IGV4ZWN1dGlvbiAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIGVtcHR5IGFycmF5KVxuICogQHJldHVybnMgQXJyYXkgb2YgcmVtYWluaW5nIHJlY29yZHMgYWZ0ZXIgcmVtb3ZhbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUmVzdWx0c0Zyb21BY2N1bXVsYXRlZChcbiAgb3V0cHV0RFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHJlY29yZHNUb1JlbW92ZTogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuKTogRmVhdHVyZURhdGFSZWNvcmRbXSB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAncmVtb3ZpbmctcmVzdWx0cy1zdGFydCcsXG4gICAgb3V0cHV0RFNJZDogb3V0cHV0RFMuaWQsXG4gICAgcmVjb3Jkc1RvUmVtb3ZlQ291bnQ6IHJlY29yZHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHNDb3VudDogZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBJZiBubyBhY2N1bXVsYXRlZCByZWNvcmRzLCBub3RoaW5nIHRvIHJlbW92ZVxuICBpZiAoZXhpc3RpbmdBY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLWFjY3VtdWxhdGVkLXJlY29yZHMtdG8tcmVtb3ZlJyxcbiAgICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkXG4gICAgfSlcbiAgICByZXR1cm4gW11cbiAgfVxuICBcbiAgLy8gSWYgbm8gcmVjb3JkcyB0byByZW1vdmUsIHJldHVybiBleGlzdGluZyByZWNvcmRzIHVuY2hhbmdlZFxuICBpZiAocmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICduby1yZWNvcmRzLXRvLXJlbW92ZScsXG4gICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aFxuICAgIH0pXG4gICAgcmV0dXJuIGV4aXN0aW5nQWNjdW11bGF0ZWRSZWNvcmRzXG4gIH1cbiAgXG4gIC8vIEJ1aWxkIFNldCBvZiBrZXlzIHRvIHJlbW92ZSBmb3IgZmFzdCBsb29rdXBcbiAgY29uc3QgcmVtb3ZlS2V5cyA9IG5ldyBTZXQoXG4gICAgcmVjb3Jkc1RvUmVtb3ZlLm1hcChyZWNvcmQgPT4gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpKVxuICApXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92ZS1rZXlzLWJ1aWx0JyxcbiAgICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgcmVtb3ZlS2V5c0NvdW50OiByZW1vdmVLZXlzLnNpemVcbiAgfSlcbiAgXG4gIC8vIEZpbHRlciBvdXQgcmVjb3JkcyB0aGF0IG1hdGNoIGtleXMgdG8gcmVtb3ZlXG4gIGNvbnN0IHJlbWFpbmluZ1JlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10gPSBbXVxuICBjb25zdCByZW1vdmVkUmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSA9IFtdXG4gIFxuICBleGlzdGluZ0FjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgY29uc3Qga2V5ID0gZ2V0UmVjb3JkS2V5KHJlY29yZCwgb3V0cHV0RFMpXG4gICAgY29uc3Qgc2hvdWxkUmVtb3ZlID0gcmVtb3ZlS2V5cy5oYXMoa2V5KVxuICAgIFxuICAgIGlmIChzaG91bGRSZW1vdmUpIHtcbiAgICAgIHJlbW92ZWRSZWNvcmRzLnB1c2gocmVjb3JkKVxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncmVjb3JkLW1hcmtlZC1mb3ItcmVtb3ZhbCcsXG4gICAgICAgIGtleSxcbiAgICAgICAgb2JqZWN0SWQ6IHJlY29yZC5nZXRJZCgpLFxuICAgICAgICBvcmlnaW5EU0lkOiAocmVjb3JkLmdldERhdGFTb3VyY2U/LigpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UpPy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0/LmlkIHx8ICd1bmtub3duJ1xuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtYWluaW5nUmVjb3Jkcy5wdXNoKHJlY29yZClcbiAgICB9XG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlbW92YWwtY29tcGxldGUnLFxuICAgIHJlY29yZHNSZW1vdmVkOiByZW1vdmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgcmVtYWluaW5nUmVjb3Jkc0NvdW50OiByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICBtYXRjaGVkUmVjb3Jkc0NvdW50OiByZW1vdmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgdW5tYXRjaGVkUmVjb3Jkc0NvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoIC0gcmVtb3ZlZFJlY29yZHMubGVuZ3RoXG4gIH0pXG4gIFxuICByZXR1cm4gcmVtYWluaW5nUmVjb3Jkc1xufVxuXG4vKipcbiAqIFJlbW92ZXMgcmVjb3JkcyBmcm9tIG9yaWdpbiBkYXRhIHNvdXJjZSBzZWxlY3Rpb25zLlxuICogR3JvdXBzIHJlY29yZHMgYnkgdGhlaXIgb3JpZ2luIGRhdGEgc291cmNlIGFuZCB1cGRhdGVzIGVhY2ggb3JpZ2luIERTJ3Mgc2VsZWN0aW9uIHNlcGFyYXRlbHkuXG4gKiBUaGlzIGVuc3VyZXMgbWFwIHNlbGVjdGlvbiBpcyB1cGRhdGVkIGNvcnJlY3RseSB3aGVuIHJlY29yZHMgY29tZSBmcm9tIG11bHRpcGxlIG9yaWdpbiBsYXllcnMuXG4gKiBBbHNvIHJlbW92ZXMgZ3JhcGhpY3MgZnJvbSBncmFwaGljcyBsYXllciBpZiB1c2luZyBncmFwaGljcyBsYXllciBoaWdobGlnaHRpbmcuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSUQgZm9yIHB1Ymxpc2hpbmcgbWVzc2FnZXNcbiAqIEBwYXJhbSByZWNvcmRzVG9SZW1vdmUgLSBSZWNvcmRzIHRvIHJlbW92ZSBmcm9tIHNlbGVjdGlvblxuICogQHBhcmFtIG91dHB1dERTIC0gVGhlIG91dHB1dCBkYXRhIHNvdXJjZSAodXNlZCBmb3Iga2V5IGdlbmVyYXRpb24pXG4gKiBAcGFyYW0gdXNlR3JhcGhpY3NMYXllciAtIFdoZXRoZXIgdG8gcmVtb3ZlIGdyYXBoaWNzIGZyb20gZ3JhcGhpY3MgbGF5ZXIgKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIGdyYXBoaWNzTGF5ZXIgLSBHcmFwaGljcyBsYXllciBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUmVjb3Jkc0Zyb21PcmlnaW5TZWxlY3Rpb25zKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICByZWNvcmRzVG9SZW1vdmU6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLFxuICB1c2VHcmFwaGljc0xheWVyPzogYm9vbGVhbixcbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyXG4pOiB2b2lkIHtcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmluZy1yZWNvcmRzLWZyb20tb3JpZ2luLXNlbGVjdGlvbnMtc3RhcnQnLFxuICAgIHdpZGdldElkLFxuICAgIHJlY29yZHNUb1JlbW92ZUNvdW50OiByZWNvcmRzVG9SZW1vdmUubGVuZ3RoLFxuICAgIG91dHB1dERTSWQ6IG91dHB1dERTLmlkLFxuICAgIHVzZUdyYXBoaWNzTGF5ZXI6ICEhdXNlR3JhcGhpY3NMYXllcixcbiAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXJcbiAgfSlcbiAgXG4gIGlmIChyZWNvcmRzVG9SZW1vdmUubGVuZ3RoID09PSAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ25vLXJlY29yZHMtdG8tcmVtb3ZlLWZyb20tc2VsZWN0aW9uJyxcbiAgICAgIHdpZGdldElkXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuICBcbiAgLy8gUmVtb3ZlIGZyb20gZ3JhcGhpY3MgbGF5ZXIgaWYgdXNpbmcgZ3JhcGhpY3MgbGF5ZXIgaGlnaGxpZ2h0aW5nXG4gIGlmICh1c2VHcmFwaGljc0xheWVyICYmIGdyYXBoaWNzTGF5ZXIpIHtcbiAgICBjb25zdCByZWNvcmRJZHNUb1JlbW92ZSA9IHJlY29yZHNUb1JlbW92ZS5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdyZW1vdmluZy1ncmFwaGljcy1mcm9tLWxheWVyJyxcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkc1RvUmVtb3ZlLmxlbmd0aCxcbiAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZFxuICAgIH0pXG4gICAgcmVtb3ZlSGlnaGxpZ2h0R3JhcGhpY3MoZ3JhcGhpY3NMYXllciwgcmVjb3JkSWRzVG9SZW1vdmUpXG4gIH1cbiAgXG4gIC8vIEdyb3VwIHJlY29yZHMgYnkgdGhlaXIgb3JpZ2luIGRhdGEgc291cmNlXG4gIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gIFxuICByZWNvcmRzVG9SZW1vdmUuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgIGNvbnN0IHJlY29yZERTID0gcmVjb3JkLmdldERhdGFTb3VyY2U/LigpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBsZXQgb3JpZ2luRFM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBudWxsID0gbnVsbFxuICAgIFxuICAgIGlmIChyZWNvcmREUykge1xuICAgICAgb3JpZ2luRFMgPSByZWNvcmREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCByZWNvcmREU1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjazogdHJ5IHRvIGdldCBvcmlnaW4gZnJvbSBvdXRwdXREU1xuICAgICAgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBudWxsXG4gICAgfVxuICAgIFxuICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgaWYgKCFyZWNvcmRzQnlPcmlnaW5EUy5oYXMob3JpZ2luRFMpKSB7XG4gICAgICAgIHJlY29yZHNCeU9yaWdpbkRTLnNldChvcmlnaW5EUywgW10pXG4gICAgICB9XG4gICAgICByZWNvcmRzQnlPcmlnaW5EUy5nZXQob3JpZ2luRFMpIS5wdXNoKHJlY29yZClcbiAgICB9XG4gIH0pXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ3JlY29yZHMtZ3JvdXBlZC1ieS1vcmlnaW4nLFxuICAgIHdpZGdldElkLFxuICAgIG9yaWdpbkRTQ291bnQ6IHJlY29yZHNCeU9yaWdpbkRTLnNpemUsXG4gICAgcmVjb3Jkc0J5T3JpZ2luRFM6IEFycmF5LmZyb20ocmVjb3Jkc0J5T3JpZ2luRFMuZW50cmllcygpKS5tYXAoKFtkcywgcmVjb3Jkc10pID0+ICh7XG4gICAgICBvcmlnaW5EU0lkOiBkcy5pZCxcbiAgICAgIHJlY29yZENvdW50OiByZWNvcmRzLmxlbmd0aFxuICAgIH0pKVxuICB9KVxuICBcbiAgLy8gRm9yIGVhY2ggb3JpZ2luIERTLCBnZXQgY3VycmVudCBzZWxlY3Rpb24gYW5kIHJlbW92ZSBtYXRjaGluZyByZWNvcmRzXG4gIHJlY29yZHNCeU9yaWdpbkRTLmZvckVhY2goKHJlY29yZHNUb1JlbW92ZUZvck9yaWdpbiwgb3JpZ2luRFMpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGN1cnJlbnQgc2VsZWN0ZWQgcmVjb3JkcyBmcm9tIHRoaXMgb3JpZ2luIERTXG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRSZWNvcmRzID0gb3JpZ2luRFMuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgfHwgW11cbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAncHJvY2Vzc2luZy1vcmlnaW4tZHMtcmVtb3ZhbCcsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgY3VycmVudFNlbGVjdGVkQ291bnQ6IGN1cnJlbnRTZWxlY3RlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICByZWNvcmRzVG9SZW1vdmVDb3VudDogcmVjb3Jkc1RvUmVtb3ZlRm9yT3JpZ2luLmxlbmd0aFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQnVpbGQgU2V0IG9mIElEcyB0byByZW1vdmUgZm9yIGZhc3QgbG9va3VwXG4gICAgICBjb25zdCBpZHNUb1JlbW92ZSA9IG5ldyBTZXQoXG4gICAgICAgIHJlY29yZHNUb1JlbW92ZUZvck9yaWdpbi5tYXAocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpKVxuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBGaWx0ZXIgb3V0IHJlY29yZHMgdGhhdCBtYXRjaCBJRHMgdG8gcmVtb3ZlXG4gICAgICBjb25zdCByZW1haW5pbmdSZWNvcmRzID0gY3VycmVudFNlbGVjdGVkUmVjb3Jkcy5maWx0ZXIocmVjb3JkID0+IHtcbiAgICAgICAgY29uc3QgcmVjb3JkSWQgPSByZWNvcmQuZ2V0SWQoKVxuICAgICAgICByZXR1cm4gIWlkc1RvUmVtb3ZlLmhhcyhyZWNvcmRJZClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IHJlbWFpbmluZ0lkcyA9IHJlbWFpbmluZ1JlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnb3JpZ2luLWRzLXJlbW92YWwtZmlsdGVyZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgIHJlbW92ZWRDb3VudDogY3VycmVudFNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggLSByZW1haW5pbmdSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVtYWluaW5nQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgc2VsZWN0aW9uIGluIG9yaWdpbiBEU1xuICAgICAgaWYgKHR5cGVvZiBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgb3JpZ2luRFMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlbWFpbmluZ0lkcywgcmVtYWluaW5nUmVjb3JkcyBhcyBGZWF0dXJlRGF0YVJlY29yZFtdKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQdWJsaXNoIHNlbGVjdGlvbiBjaGFuZ2UgbWVzc2FnZSBmb3IgdGhpcyBvcmlnaW4gRFNcbiAgICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlbWFpbmluZ1JlY29yZHMgYXMgRmVhdHVyZURhdGFSZWNvcmRbXSwgW29yaWdpbkRTLmlkXSlcbiAgICAgIClcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICAgIGV2ZW50OiAnb3JpZ2luLWRzLXNlbGVjdGlvbi11cGRhdGVkJyxcbiAgICAgICAgd2lkZ2V0SWQsXG4gICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICByZW1haW5pbmdSZWNvcmRzQ291bnQ6IHJlbWFpbmluZ1JlY29yZHMubGVuZ3RoLFxuICAgICAgICBtZXNzYWdlUHVibGlzaGVkOiB0cnVlXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdvcmlnaW4tZHMtcmVtb3ZhbC1lcnJvcicsXG4gICAgICAgIHdpZGdldElkLFxuICAgICAgICBvcmlnaW5EU0lkOiBvcmlnaW5EUy5pZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgIH0pXG4gICAgfVxuICB9KVxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgZXZlbnQ6ICdyZW1vdmluZy1yZWNvcmRzLWZyb20tb3JpZ2luLXNlbGVjdGlvbnMtY29tcGxldGUnLFxuICAgIHdpZGdldElkLFxuICAgIG9yaWdpbkRTQ291bnQ6IHJlY29yZHNCeU9yaWdpbkRTLnNpemUsXG4gICAgdG90YWxSZWNvcmRzUmVtb3ZlZDogcmVjb3Jkc1RvUmVtb3ZlLmxlbmd0aFxuICB9KVxufVxuXG4vKipcbiAqIENsZWFycyBhbGwgcmVjb3JkcyBmcm9tIHRoZSBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlLlxuICogXG4gKiBAcGFyYW0gYWNjdW11bGF0ZWREUyAtIFRoZSBhY2N1bXVsYXRlZCByZXN1bHRzIGRhdGEgc291cmNlIHRvIGNsZWFyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckFjY3VtdWxhdGVkUmVzdWx0cyhcbiAgYWNjdW11bGF0ZWREUzogRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuKTogdm9pZCB7XG4gIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgIGV2ZW50OiAnY2xlYXJpbmctYWNjdW11bGF0ZWQtcmVzdWx0cycsXG4gICAgYWNjdW11bGF0ZWREU0lkOiBhY2N1bXVsYXRlZERTLmlkXG4gIH0pXG4gIFxuICAvLyBTZXQgc3RhdHVzIHRvIE5vdFJlYWR5IHRvIGNsZWFyIHJlY29yZHNcbiAgYWNjdW11bGF0ZWREUy5zZXRTdGF0dXMoRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSlcbiAgYWNjdW11bGF0ZWREUy5zZXRDb3VudFN0YXR1cyhEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5KVxuICBcbiAgLy8gQ2xlYXIgYW55IGxvYWRlZCByZWNvcmRzIGlmIHBvc3NpYmxlXG4gIC8vIE5vdGU6IE1heSBuZWVkIHRvIHVzZSBEYXRhU291cmNlTWFuYWdlciBtZXRob2RzIGRlcGVuZGluZyBvbiBFeEIgQVBJXG4gIFxuICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICBldmVudDogJ2FjY3VtdWxhdGVkLXJlc3VsdHMtY2xlYXJlZCcsXG4gICAgYWNjdW11bGF0ZWREU0lkOiBhY2N1bXVsYXRlZERTLmlkXG4gIH0pXG59XG5cbiIsIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGZlYXR1cmUgc2VsZWN0aW9uIGluIFF1ZXJ5U2ltcGxlIHdpZGdldC5cbiAqIENvbnNvbGlkYXRlcyByZXBlYXRlZCBzZWxlY3Rpb24gbG9naWMgdG8gZm9sbG93IERSWSBwcmluY2lwbGVzLlxuICovXG5cbmltcG9ydCB0eXBlIHsgRGF0YVNvdXJjZSwgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgRmVhdHVyZURhdGFSZWNvcmQgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgYWRkSGlnaGxpZ2h0R3JhcGhpY3MgYXMgYWRkR3JhcGhpY3NMYXllckdyYXBoaWNzLCBjbGVhckdyYXBoaWNzTGF5ZXIgfSBmcm9tICcuL2dyYXBoaWNzLWxheWVyLXV0aWxzJ1xuaW1wb3J0IHsgY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlciB9IGZyb20gJ3dpZGdldHMvc2hhcmVkLWNvZGUvY29tbW9uJ1xuXG5jb25zdCBkZWJ1Z0xvZ2dlciA9IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIoKVxuXG4vKipcbiAqIEN1c3RvbSBldmVudCBuYW1lIGZvciBRdWVyeVNpbXBsZSB0byBub3RpZnkgV2lkZ2V0IG9mIHNlbGVjdGlvbiBjaGFuZ2VzLlxuICovXG5leHBvcnQgY29uc3QgUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXNlbGVjdGlvbi1jaGFuZ2VkJ1xuXG4vKipcbiAqIERpc3BhdGNoZXMgYSBjdXN0b20gc2VsZWN0aW9uIGV2ZW50IHRvIHRoZSB3aW5kb3cgc28gdGhlIG1haW4gV2lkZ2V0IGNhbiB0cmFjayBzdGF0ZS5cbiAqIFxuICogQHBhcmFtIHdpZGdldElkIC0gVGhlIHdpZGdldCBJRFxuICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHNlbGVjdGVkIHJlY29yZCBJRHNcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSBxdWVyeUl0ZW1Db25maWdJZCAtIFRoZSBjb25maWcgSUQgb2YgdGhlIHF1ZXJ5IHRoYXQgcHJvZHVjZWQgdGhlc2UgcmVzdWx0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzcGF0Y2hTZWxlY3Rpb25FdmVudChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcmVjb3JkSWRzOiBzdHJpbmdbXSxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UsXG4gIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmdcbik6IHZvaWQge1xuICBjb25zdCBvcmlnaW5EUyA9IGdldE9yaWdpbkRhdGFTb3VyY2Uob3V0cHV0RFMpXG4gIGNvbnN0IGRhdGFTb3VyY2VJZCA9IG9yaWdpbkRTPy5pZFxuICBcbiAgZGVidWdMb2dnZXIubG9nKCdUQVNLJywge1xuICAgIGV2ZW50OiAnZGlzcGF0Y2hTZWxlY3Rpb25FdmVudCcsXG4gICAgd2lkZ2V0SWQsXG4gICAgcmVjb3JkQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgcXVlcnlJdGVtQ29uZmlnSWRcbiAgfSlcblxuICBjb25zdCBzZWxlY3Rpb25FdmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQsIHtcbiAgICBkZXRhaWw6IHtcbiAgICAgIHdpZGdldElkLFxuICAgICAgcmVjb3JkSWRzLFxuICAgICAgZGF0YVNvdXJjZUlkLFxuICAgICAgb3V0cHV0RHNJZDogb3V0cHV0RFMuaWQsXG4gICAgICBxdWVyeUl0ZW1Db25maWdJZFxuICAgIH0sXG4gICAgYnViYmxlczogdHJ1ZSxcbiAgICBjYW5jZWxhYmxlOiB0cnVlXG4gIH0pXG4gIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHNlbGVjdGlvbkV2ZW50KVxufVxuXG4vKipcbiAqIEdldHMgdGhlIG9yaWdpbiBkYXRhIHNvdXJjZSBmcm9tIGFuIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEByZXR1cm5zIFRoZSBvcmlnaW4gZGF0YSBzb3VyY2UsIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JpZ2luRGF0YVNvdXJjZShcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkXG4pOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCB7XG4gIGlmICghb3V0cHV0RFMpIHJldHVybiBudWxsXG4gIFxuICAvLyBUcnkgdG8gZ2V0IG9yaWdpbiBkYXRhIHNvdXJjZXNcbiAgY29uc3Qgb3JpZ2luRGF0YVNvdXJjZXMgPSB0eXBlb2Ygb3V0cHV0RFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMgPT09ICdmdW5jdGlvbicgXG4gICAgPyBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpIFxuICAgIDogW11cbiAgICBcbiAgaWYgKG9yaWdpbkRhdGFTb3VyY2VzICYmIG9yaWdpbkRhdGFTb3VyY2VzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gb3JpZ2luRGF0YVNvdXJjZXNbMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICB9XG4gIFxuICAvLyBJZiBpdCBkb2Vzbid0IGhhdmUgb3JpZ2luIGRhdGEgc291cmNlcywgaXQgbWlnaHQgYWxyZWFkeSBiZSBhbiBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgLy8gRmVhdHVyZUxheWVyRGF0YVNvdXJjZSBzaG91bGQgaGF2ZSBhICdsYXllcicgcHJvcGVydHkgb3IgJ2dldExheWVyJyBtZXRob2RcbiAgaWYgKChvdXRwdXREUyBhcyBhbnkpLmxheWVyIHx8IChvdXRwdXREUyBhcyBhbnkpLmdldExheWVyIHx8IChvdXRwdXREUyBhcyBhbnkpLnR5cGUgPT09ICdGZWF0dXJlTGF5ZXInKSB7XG4gICAgcmV0dXJuIG91dHB1dERTIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgfVxuICBcbiAgcmV0dXJuIG51bGxcbn1cblxuLyoqXG4gKiBTZWxlY3RzIHJlY29yZHMgaW4gYm90aCB0aGUgb3JpZ2luIGRhdGEgc291cmNlIGFuZCBvdXRwdXQgZGF0YSBzb3VyY2UuXG4gKiBUaGlzIGlzIHRoZSBzdGFuZGFyZCBwYXR0ZXJuIHVzZWQgdGhyb3VnaG91dCB0aGUgd2lkZ2V0IGZvciBzZWxlY3Rpb24uXG4gKiBPcHRpb25hbGx5IHVzZXMgZ3JhcGhpY3MgbGF5ZXIgZm9yIGhpZ2hsaWdodGluZyAoaW5kZXBlbmRlbnQgb2YgbGF5ZXIgdmlzaWJpbGl0eSkuXG4gKiBcbiAqIEBwYXJhbSBvdXRwdXREUyAtIFRoZSBvdXRwdXQgZGF0YSBzb3VyY2VcbiAqIEBwYXJhbSByZWNvcmRJZHMgLSBBcnJheSBvZiByZWNvcmQgSURzIHRvIHNlbGVjdFxuICogQHBhcmFtIHJlY29yZHMgLSBPcHRpb25hbCBhcnJheSBvZiBGZWF0dXJlRGF0YVJlY29yZCBvYmplY3RzIGZvciBwcm9wZXIgaGlnaGxpZ2h0aW5nXG4gKiBAcGFyYW0gdXNlR3JhcGhpY3NMYXllciAtIFdoZXRoZXIgdG8gdXNlIGdyYXBoaWNzIGxheWVyIGZvciBoaWdobGlnaHRpbmcgKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIGdyYXBoaWNzTGF5ZXIgLSBHcmFwaGljcyBsYXllciBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICogQHBhcmFtIG1hcFZpZXcgLSBNYXAgdmlldyBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMoXG4gIG91dHB1dERTOiBEYXRhU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgcmVjb3JkSWRzOiBzdHJpbmdbXSxcbiAgcmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIHVzZUdyYXBoaWNzTGF5ZXI6IGJvb2xlYW4gPSBmYWxzZSxcbiAgZ3JhcGhpY3NMYXllcj86IF9fZXNyaS5HcmFwaGljc0xheWVyLFxuICBtYXBWaWV3PzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKCFvdXRwdXREUykgcmV0dXJuXG4gIFxuICBjb25zdCBvcmlnaW5EUyA9IGdldE9yaWdpbkRhdGFTb3VyY2Uob3V0cHV0RFMpXG4gIFxuICAvLyBJZiB1c2luZyBncmFwaGljcyBsYXllciwgYWRkIGdyYXBoaWNzIGZvciBoaWdobGlnaHRpbmdcbiAgaWYgKHVzZUdyYXBoaWNzTGF5ZXIgJiYgZ3JhcGhpY3NMYXllciAmJiBtYXBWaWV3ICYmIHJlY29yZHMgJiYgcmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMtdXNpbmctZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgcmVjb3JkSWRzQ291bnQ6IHJlY29yZElkcy5sZW5ndGgsXG4gICAgICByZWNvcmRzQ291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICBhd2FpdCBhZGRHcmFwaGljc0xheWVyR3JhcGhpY3MoZ3JhcGhpY3NMYXllciwgcmVjb3JkcywgbWFwVmlldylcbiAgICBcbiAgICAvLyBTdGlsbCBzZWxlY3QgaW4gZGF0YSBzb3VyY2UgZm9yIHN0YXRlIG1hbmFnZW1lbnQgKGJ1dCBsYXllciBzZWxlY3Rpb24gd29uJ3Qgc2hvdyBpZiBsYXllciBpcyBvZmYpXG4gICAgaWYgKG9yaWdpbkRTICYmIHR5cGVvZiBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRJZHMsIHJlY29yZHMpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIE9yaWdpbmFsIGJlaGF2aW9yOiB1c2UgbGF5ZXIgc2VsZWN0aW9uXG4gICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgIGV2ZW50OiAnc2VsZWN0UmVjb3Jkc0luRGF0YVNvdXJjZXMtdXNpbmctbGF5ZXItc2VsZWN0aW9uJyxcbiAgICAgIHJlY29yZElkc0NvdW50OiByZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgdXNlR3JhcGhpY3NMYXllcixcbiAgICAgIGhhc0dyYXBoaWNzTGF5ZXI6ICEhZ3JhcGhpY3NMYXllcixcbiAgICAgIGhhc01hcFZpZXc6ICEhbWFwVmlldyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pXG4gICAgXG4gICAgLy8gU2VsZWN0IGluIG9yaWdpbiBkYXRhIHNvdXJjZSAodGhlIGFjdHVhbCBsYXllcilcbiAgICBpZiAob3JpZ2luRFMgJiYgdHlwZW9mIG9yaWdpbkRTLnNlbGVjdFJlY29yZHNCeUlkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gTG9nIGxheWVyIHN0YXRlIHJpZ2h0IGJlZm9yZSBzZWxlY3Rpb24gdG8gc2VlIHdoYXQncyBhdmFpbGFibGUgd2hlbiBzZWxlY3Rpb24gd29ya3NcbiAgICAgIGNvbnN0IGxheWVyID0gKG9yaWdpbkRTIGFzIGFueSkubGF5ZXIgfHwgKG9yaWdpbkRTIGFzIGFueSkuZ2V0TGF5ZXI/LigpXG4gICAgICBpZiAobGF5ZXIpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ3NlbGVjdFJlY29yZHNCeUlkcy1sYXllci1zdGF0ZScsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgbGF5ZXJJZDogbGF5ZXIuaWQsXG4gICAgICAgICAgaGFzTGF5ZXJNYXA6ICEhKGxheWVyIGFzIGFueSkubWFwLFxuICAgICAgICAgIGhhc0xheWVyVmlldzogISEobGF5ZXIgYXMgYW55KS52aWV3LFxuICAgICAgICAgIGhhc0xheWVyUGFyZW50OiAhIShsYXllciBhcyBhbnkpLnBhcmVudCxcbiAgICAgICAgICBwYXJlbnRUeXBlOiAobGF5ZXIgYXMgYW55KS5wYXJlbnQ/LnR5cGUgfHwgJ25vbmUnLFxuICAgICAgICAgIHBhcmVudEhhc01hcDogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQ/Lm1hcCxcbiAgICAgICAgICBwYXJlbnRIYXNWaWV3OiAhIShsYXllciBhcyBhbnkpLnBhcmVudD8udmlldyxcbiAgICAgICAgICBwYXJlbnRIYXNWaWV3czogISEobGF5ZXIgYXMgYW55KS5wYXJlbnQ/LnZpZXdzLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICBvcmlnaW5EUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCByZWNvcmRzKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gQWx3YXlzIHVwZGF0ZSBvdXRwdXREUyBmb3Igd2lkZ2V0J3MgaW50ZXJuYWwgc3RhdGVcbiAgaWYgKHR5cGVvZiBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvdXRwdXREUy5zZWxlY3RSZWNvcmRzQnlJZHMocmVjb3JkSWRzLCByZWNvcmRzKVxuICB9XG59XG5cbi8qKlxuICogQ2xlYXJzIHNlbGVjdGlvbiBpbiBib3RoIHRoZSBvcmlnaW4gZGF0YSBzb3VyY2UgYW5kIG91dHB1dCBkYXRhIHNvdXJjZS5cbiAqIE9wdGlvbmFsbHkgY2xlYXJzIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIG1vZGUuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSUQgKG5lZWRlZCB0byBwdWJsaXNoIG1lc3NhZ2UpXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gdXNlR3JhcGhpY3NMYXllciAtIFdoZXRoZXIgdG8gY2xlYXIgZ3JhcGhpY3MgbGF5ZXIgKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIGdyYXBoaWNzTGF5ZXIgLSBHcmFwaGljcyBsYXllciBpbnN0YW5jZSAocmVxdWlyZWQgaWYgdXNlR3JhcGhpY3NMYXllciBpcyB0cnVlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb25JbkRhdGFTb3VyY2VzIChcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICB1c2VHcmFwaGljc0xheWVyOiBib29sZWFuID0gZmFsc2UsXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllclxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIC8vIENsZWFyIGdyYXBoaWNzIGxheWVyIGlmIHVzaW5nIGdyYXBoaWNzIGxheWVyIG1vZGVcbiAgaWYgKHVzZUdyYXBoaWNzTGF5ZXIgJiYgZ3JhcGhpY3NMYXllcikge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcy1jbGVhcmluZy1ncmFwaGljcy1sYXllcicsXG4gICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KVxuICAgIGNsZWFyR3JhcGhpY3NMYXllcihncmFwaGljc0xheWVyKVxuICB9XG5cbiAgLy8gQ2xlYXIgZGF0YSBzb3VyY2Ugc2VsZWN0aW9uIGZvciBzdGF0ZSBtYW5hZ2VtZW50XG4gIGF3YWl0IHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzKG91dHB1dERTLCBbXSwgdW5kZWZpbmVkLCBmYWxzZSlcblxuICAvLyBQdWJsaXNoIHRoZSBlbXB0eSBzZWxlY3Rpb24gbWVzc2FnZSBzbyB0aGUgTWFwIHNlbGVjdGlvbiAoYmx1ZSBib3hlcykgY2xlYXJzXG4gIGlmIChvdXRwdXREUykge1xuICAgIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlKHdpZGdldElkLCBbXSwgb3V0cHV0RFMsIHRydWUpXG4gIH1cbn1cblxuLyoqXG4gKiBQdWJsaXNoZXMgYSBzZWxlY3Rpb24gY2hhbmdlIG1lc3NhZ2UgZm9yIHRoZSBnaXZlbiByZWNvcmRzIGFuZCBkYXRhIHNvdXJjZXMuXG4gKiBcbiAqIEBwYXJhbSB3aWRnZXRJZCAtIFRoZSB3aWRnZXQgSURcbiAqIEBwYXJhbSByZWNvcmRzIC0gQXJyYXkgb2YgRmVhdHVyZURhdGFSZWNvcmQgb2JqZWN0cyAoZW1wdHkgYXJyYXkgdG8gY2xlYXIpXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gYWxzb1B1Ymxpc2hUb091dHB1dERTIC0gV2hldGhlciB0byBhbHNvIHB1Ymxpc2ggYSBtZXNzYWdlIGZvciBvdXRwdXREUyAoZGVmYXVsdDogZmFsc2UpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdWJsaXNoU2VsZWN0aW9uTWVzc2FnZShcbiAgd2lkZ2V0SWQ6IHN0cmluZyxcbiAgcmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSxcbiAgb3V0cHV0RFM6IERhdGFTb3VyY2UgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBhbHNvUHVibGlzaFRvT3V0cHV0RFM6IGJvb2xlYW4gPSBmYWxzZVxuKTogdm9pZCB7XG4gIGlmICghb3V0cHV0RFMpIHJldHVyblxuICBcbiAgY29uc3Qgb3JpZ2luRFMgPSBnZXRPcmlnaW5EYXRhU291cmNlKG91dHB1dERTKVxuICBcbiAgaWYgKG9yaWdpbkRTKSB7XG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcbiAgICAgIG5ldyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2Uod2lkZ2V0SWQsIHJlY29yZHMsIFtvcmlnaW5EUy5pZF0pXG4gICAgKVxuICB9IGVsc2UgaWYgKGFsc29QdWJsaXNoVG9PdXRwdXREUykge1xuICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXG4gICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBbb3V0cHV0RFMuaWRdKVxuICAgIClcbiAgfVxuICBcbiAgLy8gT3B0aW9uYWxseSBwdWJsaXNoIHRvIG91dHB1dERTIGFzIHdlbGwgKGZvciBzb21lIGVkZ2UgY2FzZXMpXG4gIGlmIChhbHNvUHVibGlzaFRvT3V0cHV0RFMgJiYgb3JpZ2luRFMpIHtcbiAgICBNZXNzYWdlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnB1Ymxpc2hNZXNzYWdlKFxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh3aWRnZXRJZCwgcmVjb3JkcywgW291dHB1dERTLmlkXSlcbiAgICApXG4gIH1cbn1cblxuLyoqXG4gKiBTZWxlY3RzIHJlY29yZHMgYW5kIHB1Ymxpc2hlcyB0aGUgc2VsZWN0aW9uIG1lc3NhZ2UgaW4gb25lIGNhbGwuXG4gKiBUaGlzIGlzIHRoZSBtb3N0IGNvbW1vbiBwYXR0ZXJuIC0gc2VsZWN0aW5nIHJlY29yZHMgYW5kIG5vdGlmeWluZyB0aGUgbWFwLlxuICogT3B0aW9uYWxseSB1c2VzIGdyYXBoaWNzIGxheWVyIGZvciBoaWdobGlnaHRpbmcgKGluZGVwZW5kZW50IG9mIGxheWVyIHZpc2liaWxpdHkpLlxuICogXG4gKiBAcGFyYW0gd2lkZ2V0SWQgLSBUaGUgd2lkZ2V0IElEXG4gKiBAcGFyYW0gb3V0cHV0RFMgLSBUaGUgb3V0cHV0IGRhdGEgc291cmNlXG4gKiBAcGFyYW0gcmVjb3JkSWRzIC0gQXJyYXkgb2YgcmVjb3JkIElEcyB0byBzZWxlY3RcbiAqIEBwYXJhbSByZWNvcmRzIC0gQXJyYXkgb2YgRmVhdHVyZURhdGFSZWNvcmQgb2JqZWN0cyBmb3IgcHJvcGVyIGhpZ2hsaWdodGluZ1xuICogQHBhcmFtIGFsc29QdWJsaXNoVG9PdXRwdXREUyAtIFdoZXRoZXIgdG8gYWxzbyBwdWJsaXNoIGEgbWVzc2FnZSBmb3Igb3V0cHV0RFMgKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIHVzZUdyYXBoaWNzTGF5ZXIgLSBXaGV0aGVyIHRvIHVzZSBncmFwaGljcyBsYXllciBmb3IgaGlnaGxpZ2h0aW5nIChkZWZhdWx0OiBmYWxzZSlcbiAqIEBwYXJhbSBncmFwaGljc0xheWVyIC0gR3JhcGhpY3MgbGF5ZXIgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqIEBwYXJhbSBtYXBWaWV3IC0gTWFwIHZpZXcgaW5zdGFuY2UgKHJlcXVpcmVkIGlmIHVzZUdyYXBoaWNzTGF5ZXIgaXMgdHJ1ZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKFxuICB3aWRnZXRJZDogc3RyaW5nLFxuICBvdXRwdXREUzogRGF0YVNvdXJjZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHJlY29yZElkczogc3RyaW5nW10sXG4gIHJlY29yZHM6IEZlYXR1cmVEYXRhUmVjb3JkW10sXG4gIGFsc29QdWJsaXNoVG9PdXRwdXREUzogYm9vbGVhbiA9IGZhbHNlLFxuICB1c2VHcmFwaGljc0xheWVyOiBib29sZWFuID0gZmFsc2UsXG4gIGdyYXBoaWNzTGF5ZXI/OiBfX2VzcmkuR3JhcGhpY3NMYXllcixcbiAgbWFwVmlldz86IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlld1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHNlbGVjdFJlY29yZHNJbkRhdGFTb3VyY2VzKG91dHB1dERTLCByZWNvcmRJZHMsIHJlY29yZHMsIHVzZUdyYXBoaWNzTGF5ZXIsIGdyYXBoaWNzTGF5ZXIsIG1hcFZpZXcpXG4gIHB1Ymxpc2hTZWxlY3Rpb25NZXNzYWdlKHdpZGdldElkLCByZWNvcmRzLCBvdXRwdXREUywgYWxzb1B1Ymxpc2hUb091dHB1dERTKVxufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBcIkNsZWFyIHJlc3VsdHNcIiBidXR0b24gaW4gdGhlIERPTS5cbiAqIFVzZWQgd2hlbiBwcm9ncmFtbWF0aWNhbGx5IHRyaWdnZXJpbmcgdGhlIGNsZWFyIGFjdGlvbi5cbiAqIFxuICogQHJldHVybnMgVGhlIGNsZWFyIGJ1dHRvbiBlbGVtZW50LCBvciBudWxsIGlmIG5vdCBmb3VuZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZENsZWFyUmVzdWx0c0J1dHRvbigpOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uW2FyaWEtbGFiZWw9XCJDbGVhciByZXN1bHRzXCJdJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsXG59XG5cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsXG4gIGpzeCxcbiAgY3NzLFxuICBjbGFzc05hbWVzLFxuICB0eXBlIEZlYXR1cmVMYXllckRhdGFTb3VyY2UsXG4gIHR5cGUgSW1tdXRhYmxlT2JqZWN0LFxuICB0eXBlIERhdGFSZWNvcmQsXG4gIHR5cGUgRmVhdHVyZURhdGFSZWNvcmRcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBRdWVyeUl0ZW1UeXBlLCBMaXN0RGlyZWN0aW9uIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IHsgUXVlcnlSZXN1bHRJdGVtIH0gZnJvbSAnLi9xdWVyeS1yZXN1bHQtaXRlbSdcbmltcG9ydCB7IGdldFBvcHVwVGVtcGxhdGUgfSBmcm9tICcuL3F1ZXJ5LXV0aWxzJ1xuaW1wb3J0IHsgdXNlQXV0b0hlaWdodCB9IGZyb20gJy4vdXNlQXV0b0hlaWdodCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcblxuY29uc3QgZGVidWdMb2dnZXIgPSBjcmVhdGVRdWVyeVNpbXBsZURlYnVnTG9nZ2VyKClcblxuZXhwb3J0IGludGVyZmFjZSBTaW1wbGVMaXN0UHJvcHMge1xuICB3aWRnZXRJZDogc3RyaW5nXG4gIHF1ZXJ5SXRlbTogSW1tdXRhYmxlT2JqZWN0PFF1ZXJ5SXRlbVR5cGU+XG4gIG91dHB1dERTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gIHJlY29yZHM6IERhdGFSZWNvcmRbXVxuICBkaXJlY3Rpb246IExpc3REaXJlY3Rpb25cbiAgb25Fc2NhcGU6ICgpID0+IHZvaWRcbiAgb25TZWxlY3RDaGFuZ2U6IChkYXRhOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gdm9pZFxuICBvblJlbW92ZTogKGRhdGE6IEZlYXR1cmVEYXRhUmVjb3JkKSA9PiB2b2lkXG4gIGV4cGFuZEJ5RGVmYXVsdD86IGJvb2xlYW5cbiAgaXRlbUV4cGFuZFN0YXRlcz86IE1hcDxzdHJpbmcsIGJvb2xlYW4+XG4gIHJlbW92ZWRSZWNvcmRJZHM/OiBTZXQ8c3RyaW5nPlxuICBvblJlbmRlckRvbmU/OiAob3B0aW9uczogeyBkYXRhSXRlbXM6IGFueVtdIH0pID0+IHZvaWRcbn1cblxuY29uc3QgZ2V0U3R5bGUgPSAoaXNBdXRvSGVpZ2h0OiBib29sZWFuKSA9PiB7XG4gIHJldHVybiBjc3NgXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4OiAxIDEgJHtpc0F1dG9IZWlnaHQgPyAnYXV0bycgOiAwfTtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBtYXgtaGVpZ2h0OiAke2lzQXV0b0hlaWdodCA/ICdjYWxjKDYxLjh2aCAtIDEwMHB4KScgOiAnbm9uZSd9O1xuXG4gICAgLnF1ZXJ5LXJlc3VsdC1pdGVtICsgLnF1ZXJ5LXJlc3VsdC1pdGVtIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAwLjVyZW07XG4gICAgICBtYXJnaW4tdG9wOiAwO1xuICAgIH1cblxuICAgICYudmVydGljYWwge1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIC5saXN0LWl0ZW1zIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICAuZmVhdHVyZS1pbmZvLWNvbXBvbmVudCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAucXVlcnktcmVzdWx0LWl0ZW0gKyAucXVlcnktcmVzdWx0LWl0ZW0ge1xuICAgICAgICBtYXJnaW4tbGVmdDogMDtcbiAgICAgICAgbWFyZ2luLXRvcDogMC41cmVtO1xuICAgICAgfVxuICAgIH1cbiAgICAubGlzdC1pdGVtcyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gU2ltcGxlTGlzdCAocHJvcHM6IFNpbXBsZUxpc3RQcm9wcykge1xuICBjb25zdCB7XG4gICAgd2lkZ2V0SWQsXG4gICAgb3V0cHV0RFMsXG4gICAgcXVlcnlJdGVtLFxuICAgIHJlY29yZHMsXG4gICAgZGlyZWN0aW9uLFxuICAgIG9uRXNjYXBlLFxuICAgIG9uU2VsZWN0Q2hhbmdlLFxuICAgIG9uUmVtb3ZlLFxuICAgIGV4cGFuZEJ5RGVmYXVsdCxcbiAgICBpdGVtRXhwYW5kU3RhdGVzLFxuICAgIHJlbW92ZWRSZWNvcmRJZHMsXG4gICAgb25SZW5kZXJEb25lXG4gIH0gPSBwcm9wc1xuICBcbiAgY29uc3QgW3BvcHVwVGVtcGxhdGUsIHNldFBvcHVwVGVtcGxhdGVdID0gUmVhY3QudXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IFtkZWZhdWx0UG9wdXBUZW1wbGF0ZSwgc2V0RGVmYXVsdFBvcHVwVGVtcGxhdGVdID0gUmVhY3QudXNlU3RhdGU8YW55PigpXG4gIGNvbnN0IGlzQXV0b0hlaWdodCA9IHVzZUF1dG9IZWlnaHQoKVxuICBjb25zdCByZXN1bHRDb250YWluZXJSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG5cbiAgLy8gRmlsdGVyIG91dCByZW1vdmVkIHJlY29yZHNcbiAgY29uc3QgZmlsdGVyZWRSZWNvcmRzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHJlY29yZHM/LmZpbHRlcihyZWNvcmQgPT4gIXJlbW92ZWRSZWNvcmRJZHM/LmhhcyhyZWNvcmQuZ2V0SWQoKSkpIHx8IFtdXG4gIH0sIFtyZWNvcmRzLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICAvLyBOb3RpZnkgcGFyZW50IHdoZW4gcmVjb3JkcyBhcmUgcmVuZGVyZWQgKGZvciBhdXRvLXN3aXRjaCBsb2dpYylcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAob25SZW5kZXJEb25lICYmIGZpbHRlcmVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1VMVFMtTU9ERScsIHtcbiAgICAgICAgZXZlbnQ6ICdTaW1wbGVMaXN0LW9uUmVuZGVyRG9uZS1jYWxsZWQnLFxuICAgICAgICB3aWRnZXRJZCxcbiAgICAgICAgcXVlcnlJdGVtQ29uZmlnSWQ6IHF1ZXJ5SXRlbS5jb25maWdJZCxcbiAgICAgICAgZmlsdGVyZWRSZWNvcmRzQ291bnQ6IGZpbHRlcmVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIHRvdGFsUmVjb3Jkc0NvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgcmVtb3ZlZFJlY29yZElkc0NvdW50OiByZW1vdmVkUmVjb3JkSWRzPy5zaXplIHx8IDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIG9uUmVuZGVyRG9uZSh7IGRhdGFJdGVtczogZmlsdGVyZWRSZWNvcmRzIH0pXG4gICAgfVxuICB9LCBbZmlsdGVyZWRSZWNvcmRzLCBvblJlbmRlckRvbmUsIHdpZGdldElkLCBxdWVyeUl0ZW0uY29uZmlnSWQsIHJlY29yZHMubGVuZ3RoLCByZW1vdmVkUmVjb3JkSWRzXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGdldFBvcHVwVGVtcGxhdGUob3V0cHV0RFMsIHF1ZXJ5SXRlbSkudGhlbihycyA9PiB7XG4gICAgICBzZXRQb3B1cFRlbXBsYXRlKHJzLnBvcHVwVGVtcGxhdGUpXG4gICAgICBzZXREZWZhdWx0UG9wdXBUZW1wbGF0ZShycy5kZWZhdWx0UG9wdXBUZW1wbGF0ZSlcbiAgICB9KVxuICB9LCBbb3V0cHV0RFMsIHF1ZXJ5SXRlbV0pXG5cbiAgY29uc3QgaGFuZGxlS2V5VXAgPSBSZWFjdC51c2VDYWxsYmFjaygoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIG9uRXNjYXBlKClcbiAgICB9XG4gIH0sIFtvbkVzY2FwZV0pXG5cbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IFJlYWN0LnVzZUNhbGxiYWNrKChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJyAnKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IFxuICAgICAgb25LZXlVcD17aGFuZGxlS2V5VXB9IFxuICAgICAgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufSBcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyh7IHZlcnRpY2FsOiBkaXJlY3Rpb24gPT09IExpc3REaXJlY3Rpb24uVmVydGljYWwgfSl9IFxuICAgICAgY3NzPXtnZXRTdHlsZShpc0F1dG9IZWlnaHQpfVxuICAgICAgcmVmPXtyZXN1bHRDb250YWluZXJSZWZ9XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2xpc3QtaXRlbXMgcHgtNCBweS0xJyByb2xlPSdsaXN0Ym94Jz5cbiAgICAgICAge2ZpbHRlcmVkUmVjb3Jkcy5tYXAoKGRhdGFJdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkSWQgPSBkYXRhSXRlbS5nZXRJZCgpXG4gICAgICAgICAgLy8gVXNlIGluZGl2aWR1YWwgc3RhdGUgZnJvbSBtYXAgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIGV4cGFuZEJ5RGVmYXVsdFxuICAgICAgICAgIGNvbnN0IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSA9IGl0ZW1FeHBhbmRTdGF0ZXM/LmdldChyZWNvcmRJZClcbiAgICAgICAgICBjb25zdCBleHBhbmRCeURlZmF1bHRWYWx1ZSA9IGluZGl2aWR1YWxFeHBhbmRTdGF0ZSAhPT0gdW5kZWZpbmVkID8gaW5kaXZpZHVhbEV4cGFuZFN0YXRlIDogKGV4cGFuZEJ5RGVmYXVsdCA/PyB0cnVlKVxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8UXVlcnlSZXN1bHRJdGVtXG4gICAgICAgICAgICAgIGtleT17cmVjb3JkSWR9XG4gICAgICAgICAgICAgIGRhdGE9e2RhdGFJdGVtIGFzIEZlYXR1cmVEYXRhUmVjb3JkfVxuICAgICAgICAgICAgICBkYXRhU291cmNlPXtvdXRwdXREU31cbiAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxuICAgICAgICAgICAgICBwb3B1cFRlbXBsYXRlPXtwb3B1cFRlbXBsYXRlfVxuICAgICAgICAgICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZT17ZGVmYXVsdFBvcHVwVGVtcGxhdGV9XG4gICAgICAgICAgICAgIGV4cGFuZEJ5RGVmYXVsdD17ZXhwYW5kQnlEZWZhdWx0VmFsdWV9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e29uU2VsZWN0Q2hhbmdlfVxuICAgICAgICAgICAgICBvblJlbW92ZT17b25SZW1vdmV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIClcbiAgICAgICAgfSl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIF93aWRnZXRMYWJlbDogJ1F1ZXJ5U2ltcGxlJyxcbiAgcmVzZXQ6ICdSZXNldCcsXG4gIHNlYXJjaExheWVyOiAnU2VhcmNoIExheWVyJyxcbiAgYXBwbHk6ICdTZWFyY2gnLFxuICBub0RhdGFBdmFpbGFibGU6ICdFcnJvciBpbiBsb2FkaW5nIGRhdGEnLFxuICBub1F1ZXJ5SXRlbTogJ05vIHF1ZXJ5JyxcbiAgbmV3UXVlcnlIaW50OiAnQWRkIGNvbnRlbnQgYnkgY2xpY2tpbmcgdGhlIFwie2xhYmVsfVwiIGJ1dHRvbiBvbiB0aGUgY29uZmlndXJhdGlvbiBwYW5lbCcsXG4gIGF0dHJpYnV0ZUZpbHRlcjogJ0F0dHJpYnV0ZSBmaWx0ZXInLFxuICBzcGF0aWFsRmlsdGVyOiAnU3BhdGlhbCBmaWx0ZXInLFxuICBzcGF0aWFsRmlsdGVyVHlwZV9DdXJyZW50TWFwRXh0ZW50OiAnQ3VycmVudCBtYXAgZXh0ZW50JyxcbiAgc3BhdGlhbEZpbHRlclR5cGVfSW50ZXJhY3RpdmVEcmF3TW9kZTogJ0RyYXduIGdyYXBoaWMnLFxuICByZXN1bHRzOiAnUmVzdWx0cycsXG4gIGZlYXR1cmVzRGlzcGxheWVkOiAnRmVhdHVyZXMgZGlzcGxheWVkJyxcbiAgY2xlYXJSZXN1bHQ6ICdDbGVhciByZXN1bHRzJyxcbiAgY2hlY2tSZXN1bHQ6ICdDaGVjayByZXN1bHRzJyxcbiAgbWFwTXVzdEJlVmlzaWJsZTogJ01hcCBtdXN0IGJlIHZpc2libGUnLFxuICBjaG9vc2VGaWx0ZXJUeXBlOiAnQ2hvb3NlIHRoZSBmaWx0ZXIgdHlwZScsXG4gIGNob29zZUdlb21ldHJ5VHlwZTogJ0Nob29zZSB0aGUgZ2VvbWV0cnkgdHlwZScsXG4gIGNsZWFyRHJhd2luZzogJ0NsZWFyIHRoZSBncmFwaGljIHdoZW4gYXBwbHlpbmcnLFxuICBmZWF0dXJlRnJvbURzOiAnU2VsZWN0aW5nIGZlYXR1cmVzIGZyb20gZGF0YSBzb3VyY2UnLFxuICBmZWF0dXJlRnJvbU1hcDogJ0dlb21ldHJpZXMgZnJvbSBhIG1hcCcsXG4gIGNob29zZUZpbHRlckxheWVyOiAnQ2hvb3NlIGEgZmlsdGVyIGxheWVyJyxcbiAgc2VsZWN0ZWRSZWNvcmRzOiAne251bX0gcmVjb3JkcyBhcmUgc2VsZWN0ZWQgZm9yIHRoZSBmaWx0ZXInLFxuICBzcGF0aWFsTm90QXZhaWxhYmxlOiAnU3BhdGlhbCBmaWx0ZXIgaXMgbm90IGF2YWlsYWJsZSBoZXJlLicsXG4gIHNwYXRpYWxOb3RBdmFpbGFibGVEZXNjOiAnU3BhdGlhbCBmaWx0ZXIgaXMgbm90IHN1cHBvcnRlZCBmb3IgYSBkYXRhIHNvdXJjZSB0aGF0IGFscmVhZHkgY29udGFpbnMgYSBzcGF0aWFsIHF1ZXJ5LicsXG4gIHByZWNvbmZpZ3VyZWQ6ICdQcmVjb25maWd1cmVkJyxcbiAgcnVudGltZTogJ1J1bnRpbWUnLFxuICBzZWxlY3RMb2FkZWQ6ICdTZWxlY3QgbG9hZGVkJyxcbiAgcmV0cmlldmluZzogJ1JldHJpZXZpbmcgcXVlcnkgcmVzdWx0cy4uLicsXG4gIHpvb21Ub1NlbGVjdGVkOiAnWm9vbSB0byBzZWxlY3RlZCcsXG4gIHF1ZXJ5VGFiOiAnUXVlcnknLFxuICByZXN1bHRzVGFiOiAnUmVzdWx0cycsXG4gIGV4cGFuZEFsbDogJ0V4cGFuZCBhbGwnLFxuICBjb2xsYXBzZUFsbDogJ0NvbGxhcHNlIGFsbCcsXG4gIGFkZFRvTWFwOiAnQWRkIHRvIG1hcCcsXG4gIHJlc3VsdHNNb2RlOiAnUmVzdWx0cyBtb2RlJyxcbiAgY3JlYXRlTmV3UmVzdWx0czogJ0NyZWF0ZSBuZXcgcmVzdWx0cycsXG4gIGFkZFRvQ3VycmVudFJlc3VsdHM6ICdBZGQgdG8gY3VycmVudCByZXN1bHRzJyxcbiAgcmVtb3ZlRnJvbUN1cnJlbnRSZXN1bHRzOiAnUmVtb3ZlIGZyb20gY3VycmVudCByZXN1bHRzJyxcbiAgcmVzdWx0c01vZGVEaXNhYmxlZFJlbW92ZTogJ1JlbW92ZSBmcm9tIGN1cnJlbnQgcmVzdWx0cyAobm8gYWNjdW11bGF0ZWQgcmVzdWx0cyknLFxuICByZXN1bHRzTW9kZURlc2M6ICdDb250cm9scyBob3cgcXVlcnkgcmVzdWx0cyBhcmUgY29tYmluZWQ6XFxu4oCiIE5ldzogRWFjaCBxdWVyeSByZXBsYWNlcyBwcmV2aW91cyByZXN1bHRzXFxu4oCiIEFkZDogTmV3IHJlc3VsdHMgYXJlIGFkZGVkIHRvIGV4aXN0aW5nIHJlc3VsdHNcXG7igKIgUmVtb3ZlOiBNYXRjaGluZyByZXN1bHRzIGFyZSByZW1vdmVkIGZyb20gZXhpc3RpbmcgcmVzdWx0cycsXG4gIHJlc3VsdHNNb2RlTmV3OiAnTmV3JyxcbiAgcmVzdWx0c01vZGVBZGQ6ICdBZGQnLFxuICByZXN1bHRzTW9kZVJlbW92ZTogJ1JlbW92ZSdcbn1cblxuXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBSZWFjdFJlZHV4LCB0eXBlIElNU3RhdGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBMYXlvdXRJdGVtU2l6ZU1vZGVzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xuaW1wb3J0IHsgUXVlcnlXaWRnZXRDb250ZXh0IH0gZnJvbSAnLi93aWRnZXQtY29udGV4dCdcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUF1dG9IZWlnaHQgKCkge1xuICBjb25zdCBsYXlvdXRJbmZvID0gUmVhY3QudXNlQ29udGV4dChRdWVyeVdpZGdldENvbnRleHQpXG4gIGxldCBsYXlvdXRJZFxuICBsZXQgbGF5b3V0SXRlbUlkXG4gIGlmIChsYXlvdXRJbmZvLmluY2x1ZGVzKCc6JykpIHtcbiAgICBjb25zdCByID0gbGF5b3V0SW5mby5zcGxpdCgnOicpXG4gICAgbGF5b3V0SWQgPSByWzBdXG4gICAgbGF5b3V0SXRlbUlkID0gclsxXVxuICB9XG4gIGNvbnN0IGlzQXV0byA9IFJlYWN0UmVkdXgudXNlU2VsZWN0b3IoKHN0YXRlOiBJTVN0YXRlKSA9PiB7XG4gICAgY29uc3QgbGF5b3V0SXRlbSA9IHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW2xheW91dElkXT8uY29udGVudD8uW2xheW91dEl0ZW1JZF1cbiAgICByZXR1cm4gbGF5b3V0SXRlbT8uc2V0dGluZz8uYXV0b1Byb3BzPy5oZWlnaHQgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0b1xuICB9KVxuXG4gIHJldHVybiBpc0F1dG9cbn1cblxuXG4iLCJpbXBvcnQgaWNvbldhcm5pbmcgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcuc3ZnJ1xuaW1wb3J0IGljb25FcnJvciBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvZXJyb3Iuc3ZnJ1xuaW1wb3J0IGFycm93TmF2QmFjayBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnN2ZydcbmltcG9ydCBhcnJvd1JpZ2h0IGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3JpZ2h0LnN2ZydcbmltcG9ydCB0b29sRGVsZXRlIGZyb20gJ2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmcnXG5pbXBvcnQgaWNvbk1vcmUgZnJvbSAnamltdS1pY29ucy9zdmcvb3V0bGluZWQvYXBwbGljYXRpb24vbW9yZS1ob3Jpem9udGFsLnN2ZydcblxuZXhwb3J0IGNvbnN0IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwID0gKCkgPT4gKHtcbiAgaWNvbk1hcDoge1xuICAgIGljb25RdWVyeTogcmVxdWlyZSgnLi4vLi4vaWNvbi5zdmcnKSxcbiAgICBpY29uV2FybmluZyxcbiAgICBpY29uRXJyb3IsXG4gICAgYXJyb3dOYXZCYWNrLFxuICAgIGFycm93UmlnaHQsXG4gICAgdG9vbERlbGV0ZSxcbiAgICBpY29uTW9yZVxuICB9XG59KVxuXG5cblxuIiwiaW1wb3J0IHsgUmVhY3QgfSBmcm9tICdqaW11LWNvcmUnXG5cbmV4cG9ydCBjb25zdCBRdWVyeVdpZGdldENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PHN0cmluZz4obnVsbClcblxuXG4iLCJpbXBvcnQgeyBCYXNlVmVyc2lvbk1hbmFnZXIgfSBmcm9tICdqaW11LWNvcmUnXG5cbmNsYXNzIFZlcnNpb25NYW5hZ2VyIGV4dGVuZHMgQmFzZVZlcnNpb25NYW5hZ2VyIHtcbiAgdmVyc2lvbnMgPSBbe1xuICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgZGVzY3JpcHRpb246ICdUaGUgZmlyc3QgdmVyc2lvbi4nLFxuICAgIHVwZ3JhZGVyOiAob2xkQ29uZmlnKSA9PiB7XG4gICAgICByZXR1cm4gb2xkQ29uZmlnXG4gICAgfVxuICB9XVxufVxuXG5leHBvcnQgY29uc3QgdmVyc2lvbk1hbmFnZXIgPSBuZXcgVmVyc2lvbk1hbmFnZXIoKVxuXG5cblxuIiwiLyoqXG4gKiBXaWRnZXQgdmVyc2lvbiBudW1iZXIuXG4gKiBCYXNlIHZlcnNpb24gbWF0Y2hlcyBFeHBlcmllbmNlIEJ1aWxkZXIgdmVyc2lvbiAoMS4xOS4wKS5cbiAqIFJlbGVhc2UgbnVtYmVyIGluY3JlbWVudHMgb24gbWFqb3IgY2hhbmdlcyAoMDAxLCAwMDIsIDAwMywgLi4uKS5cbiAqIE1pbm9yIHZlcnNpb24gaW5jcmVtZW50cyBvbiBzbWFsbGVyIGZpeGVzIGJldHdlZW4gbWFqb3IgcmVsZWFzZXMgKHIwMTUuMSwgcjAxNS4yLCAuLi4pLlxuICogXG4gKiBUbyBpbmNyZW1lbnQ6XG4gKiAtIE1ham9yIGNoYW5nZTogVXBkYXRlIFJFTEVBU0VfTlVNQkVSIChlLmcuLCAwMTUgLT4gMDE2KSBhbmQgcmVzZXQgTUlOT1JfVkVSU0lPTiB0byAwXG4gKiAtIE1pbm9yIGZpeDogSW5jcmVtZW50IE1JTk9SX1ZFUlNJT04gKGUuZy4sIDEgLT4gMikgd2hpbGUga2VlcGluZyBzYW1lIFJFTEVBU0VfTlVNQkVSXG4gKi9cbmNvbnN0IEJBU0VfVkVSU0lPTiA9ICcxLjE5LjAnXG5jb25zdCBSRUxFQVNFX05VTUJFUiA9ICcwMTcnIC8vIEluY3JlbWVudCBvbiBtYWpvciBjaGFuZ2VzICgwMDEsIDAwMiwgMDAzLCAuLi4pXG5jb25zdCBNSU5PUl9WRVJTSU9OID0gJzQxJyAvLyBJbmNyZW1lbnQgb24gbWlub3IgZml4ZXMgYmV0d2VlbiBtYWpvciByZWxlYXNlcyAoMSwgMiwgMywgLi4uKVxuXG5leHBvcnQgY29uc3QgV0lER0VUX1ZFUlNJT04gPSBNSU5PUl9WRVJTSU9OICYmIE1JTk9SX1ZFUlNJT04gIT09ICcwJ1xuICA/IGAke0JBU0VfVkVSU0lPTn0tciR7UkVMRUFTRV9OVU1CRVJ9LiR7TUlOT1JfVkVSU0lPTn1gXG4gIDogYCR7QkFTRV9WRVJTSU9OfS1yJHtSRUxFQVNFX05VTUJFUn1gXG5cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fZW1vdGlvbl9yZWFjdF9qc3hfcnVudGltZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2FyY2dpc19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2NvcmVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9sYXlvdXRzX2xheW91dF9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdGhlbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX2Jhc2ljX3NxbF9leHByZXNzaW9uX3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfd2lkZ2V0c19zaGFyZWRfY29kZV9jb21tb25fXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIvKipcclxuICogV2VicGFjayB3aWxsIHJlcGxhY2UgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gd2l0aCBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgdG8gc2V0IHRoZSBwdWJsaWMgcGF0aCBkeW5hbWljYWxseS5cclxuICogVGhlIHJlYXNvbiB3aHkgd2UgY2FuJ3Qgc2V0IHRoZSBwdWJsaWNQYXRoIGluIHdlYnBhY2sgY29uZmlnIGlzOiB3ZSBjaGFuZ2UgdGhlIHB1YmxpY1BhdGggd2hlbiBkb3dubG9hZC5cclxuICogKi9cclxuX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB3aW5kb3cuamltdUNvbmZpZy5iYXNlVXJsXHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgY3NzLCB0eXBlIEFsbFdpZGdldFByb3BzLCBEYXRhU291cmNlTWFuYWdlciwgdHlwZSBGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCB0eXBlIEZlYXR1cmVEYXRhUmVjb3JkLCBNZXNzYWdlTWFuYWdlciwgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLCB0eXBlIERhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBQYXBlciwgV2lkZ2V0UGxhY2Vob2xkZXIgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZywgUXVlcnlBcnJhbmdlVHlwZSwgU2VsZWN0aW9uVHlwZSB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCB7IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwIH0gZnJvbSAnLi93aWRnZXQtY29uZmlnJ1xuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcblxuaW1wb3J0IHsgdmVyc2lvbk1hbmFnZXIgfSBmcm9tICcuLi92ZXJzaW9uLW1hbmFnZXInXG5pbXBvcnQgeyBRdWVyeVRhc2tMaXN0IH0gZnJvbSAnLi9xdWVyeS10YXNrLWxpc3QnXG5pbXBvcnQgeyBUYXNrTGlzdElubGluZSB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LWlubGluZSdcbmltcG9ydCB7IFRhc2tMaXN0UG9wcGVyV3JhcHBlciB9IGZyb20gJy4vcXVlcnktdGFzay1saXN0LXBvcHBlci13cmFwcGVyJ1xuaW1wb3J0IHsgUXVlcnlXaWRnZXRDb250ZXh0IH0gZnJvbSAnLi93aWRnZXQtY29udGV4dCdcbmltcG9ydCB7IGNyZWF0ZVF1ZXJ5U2ltcGxlRGVidWdMb2dnZXIgfSBmcm9tICd3aWRnZXRzL3NoYXJlZC1jb2RlL2NvbW1vbidcbmltcG9ydCB7IGNyZWF0ZU9yR2V0R3JhcGhpY3NMYXllciwgY2xlYW51cEdyYXBoaWNzTGF5ZXIgfSBmcm9tICcuL2dyYXBoaWNzLWxheWVyLXV0aWxzJ1xuaW1wb3J0IHsgUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5UIH0gZnJvbSAnLi9zZWxlY3Rpb24tdXRpbHMnXG5pbXBvcnQgeyBXSURHRVRfVkVSU0lPTiB9IGZyb20gJy4uL3ZlcnNpb24nXG5cbmNvbnN0IGRlYnVnTG9nZ2VyID0gY3JlYXRlUXVlcnlTaW1wbGVEZWJ1Z0xvZ2dlcigpXG5jb25zdCB7IGljb25NYXAgfSA9IGdldFdpZGdldFJ1bnRpbWVEYXRhTWFwKClcblxuLyoqXG4gKiBDdXN0b20gZXZlbnQgbmFtZSBmb3IgUXVlcnlTaW1wbGUgdG8gbm90aWZ5IEhlbHBlclNpbXBsZSBvZiB3aWRnZXQgb3Blbi9jbG9zZSBzdGF0ZS5cbiAqL1xuY29uc3QgUVVFUllTSU1QTEVfV0lER0VUX1NUQVRFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXdpZGdldC1zdGF0ZS1jaGFuZ2VkJ1xuXG4vKipcbiAqIEN1c3RvbSBldmVudCBuYW1lIGZvciByZXF1ZXN0aW5nIHJlc3RvcmF0aW9uIHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzLlxuICovXG5jb25zdCBSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5UID0gJ3F1ZXJ5c2ltcGxlLXJlc3RvcmUtb24taWRlbnRpZnktY2xvc2UnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpZGdldCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8QWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+LCB7IFxuICBpbml0aWFsUXVlcnlWYWx1ZT86IHsgc2hvcnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0sIFxuICBpc1BhbmVsVmlzaWJsZT86IGJvb2xlYW4sIFxuICBoYXNTZWxlY3Rpb24/OiBib29sZWFuLCBcbiAgc2VsZWN0aW9uUmVjb3JkQ291bnQ/OiBudW1iZXIsIFxuICBsYXN0U2VsZWN0aW9uPzogeyByZWNvcmRJZHM6IHN0cmluZ1tdLCBvdXRwdXREc0lkOiBzdHJpbmcsIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmcgfSwgXG4gIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZSwgXG4gIGFjY3VtdWxhdGVkUmVjb3Jkcz86IEZlYXR1cmVEYXRhUmVjb3JkW10sIFxuICBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ/OiBib29sZWFuLCBcbiAgamltdU1hcFZpZXc/OiBKaW11TWFwVmlldyxcbiAgYWN0aXZlVGFiPzogJ3F1ZXJ5JyB8ICdyZXN1bHRzJ1xufT4ge1xuICBzdGF0aWMgdmVyc2lvbk1hbmFnZXIgPSB2ZXJzaW9uTWFuYWdlclxuICBwcml2YXRlIGxhc3RQcm9jZXNzZWRIYXNoOiBzdHJpbmcgPSAnJ1xuXG4gIHN0YXRlOiB7IFxuICAgIGluaXRpYWxRdWVyeVZhbHVlPzogeyBzaG9ydElkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfSwgXG4gICAgaXNQYW5lbFZpc2libGU/OiBib29sZWFuLCBcbiAgICBoYXNTZWxlY3Rpb24/OiBib29sZWFuLCBcbiAgICBzZWxlY3Rpb25SZWNvcmRDb3VudD86IG51bWJlciwgXG4gICAgbGFzdFNlbGVjdGlvbj86IHsgcmVjb3JkSWRzOiBzdHJpbmdbXSwgb3V0cHV0RHNJZDogc3RyaW5nLCBxdWVyeUl0ZW1Db25maWdJZDogc3RyaW5nIH0sIFxuICAgIHJlc3VsdHNNb2RlPzogU2VsZWN0aW9uVHlwZSwgXG4gICAgYWNjdW11bGF0ZWRSZWNvcmRzPzogRmVhdHVyZURhdGFSZWNvcmRbXSwgXG4gICAgZ3JhcGhpY3NMYXllckluaXRpYWxpemVkPzogYm9vbGVhbiwgXG4gICAgamltdU1hcFZpZXc/OiBKaW11TWFwVmlldyxcbiAgICBhY3RpdmVUYWI/OiAncXVlcnknIHwgJ3Jlc3VsdHMnXG4gIH0gPSB7XG4gICAgcmVzdWx0c01vZGU6IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uLCAvLyBEZWZhdWx0IG1vZGVcbiAgICBhY3RpdmVUYWI6ICdxdWVyeSdcbiAgfVxuXG4gIGhhbmRsZVRhYkNoYW5nZSA9IChhY3RpdmVUYWI6ICdxdWVyeScgfCAncmVzdWx0cycpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgYWN0aXZlVGFiIH0pXG4gIH1cbiAgcHJpdmF0ZSB3aWRnZXRSZWYgPSBSZWFjdC5jcmVhdGVSZWY8SFRNTERpdkVsZW1lbnQ+KClcbiAgcHJpdmF0ZSB2aXNpYmlsaXR5T2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSB2aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBncmFwaGljc0xheWVyUmVmID0gUmVhY3QuY3JlYXRlUmVmPF9fZXNyaS5HcmFwaGljc0xheWVyIHwgbnVsbD4oKVxuICBwcml2YXRlIG1hcFZpZXdSZWYgPSBSZWFjdC5jcmVhdGVSZWY8X19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3IHwgbnVsbD4oKVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzKClcbiAgICAvLyBMaXN0ZW4gZm9yIGhhc2ggY2hhbmdlcyB0byBkZXRlY3Qgd2hlbiBoYXNoIHBhcmFtZXRlcnMgYXJlIHVwZGF0ZWRcbiAgICAvLyBUaGlzIGlzIG5lZWRlZCB3aGVuIEhlbHBlclNpbXBsZSBvcGVucyB0aGUgd2lkZ2V0IHdpdGggYSBoYXNoIHBhcmFtZXRlclxuICAgIC8vIG9yIHdoZW4gaGFzaCBwYXJhbWV0ZXJzIGNoYW5nZSB3aGlsZSB0aGUgd2lkZ2V0IGlzIGFscmVhZHkgbW91bnRlZFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1F1ZXJ5U3RyaW5nRm9yU2hvcnRJZHMpXG4gICAgXG4gICAgLy8gU2V0IHVwIHZpc2liaWxpdHkgZGV0ZWN0aW9uXG4gICAgdGhpcy5zZXR1cFZpc2liaWxpdHlEZXRlY3Rpb24oKVxuICAgIFxuICAgIC8vIExpc3RlbiBmb3Igc2VsZWN0aW9uIGNoYW5nZXMgZnJvbSBxdWVyeS1yZXN1bHRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihRVUVSWVNJTVBMRV9TRUxFQ1RJT05fRVZFTlQsIHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgLy8gTGlzdGVuIGZvciByZXN0b3JlIHJlcXVlc3RzIHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUkVTVE9SRV9PTl9JREVOVElGWV9DTE9TRV9FVkVOVCwgdGhpcy5oYW5kbGVSZXN0b3JlT25JZGVudGlmeUNsb3NlIGFzIEV2ZW50TGlzdGVuZXIpXG4gICAgXG4gICAgLy8gTm90aWZ5IEhlbHBlclNpbXBsZSB0aGF0IHRoaXMgd2lkZ2V0IGlzIG5vdyBvcGVuXG4gICAgY29uc3Qgb3BlbkV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBpc09wZW46IHRydWVcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQob3BlbkV2ZW50KVxuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6ICd3aWRnZXQtb3BlbmVkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgaXNPcGVuOiB0cnVlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICAgIFxuICAgIC8vIEFsc28gY2hlY2sgYWZ0ZXIgYSBzaG9ydCBkZWxheSB0byBjYXRjaCBjYXNlcyB3aGVyZSBoYXNoIHdhcyBhbHJlYWR5IHByZXNlbnRcbiAgICAvLyB3aGVuIHdpZGdldCB3YXMgb3BlbmVkIChlLmcuLCBieSBIZWxwZXJTaW1wbGUgb3BlbmluZyB0aGUgd2lkZ2V0KVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jaGVja1F1ZXJ5U3RyaW5nRm9yU2hvcnRJZHMoKVxuICAgIH0sIDEwMClcbiAgICBcbiAgICAvLyBHcmFwaGljcyBsYXllciB3aWxsIGJlIGluaXRpYWxpemVkIHdoZW4gbWFwIHZpZXcgYmVjb21lcyBhdmFpbGFibGUgdmlhIEppbXVNYXBWaWV3Q29tcG9uZW50XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAvLyBDbGVhbiB1cCBoYXNoY2hhbmdlIGxpc3RlbmVyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoZWNrUXVlcnlTdHJpbmdGb3JTaG9ydElkcylcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBzZWxlY3Rpb24gY2hhbmdlIGxpc3RlbmVyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZSBhcyBFdmVudExpc3RlbmVyKVxuICAgIFxuICAgIC8vIENsZWFuIHVwIHJlc3RvcmUgb24gaWRlbnRpZnkgY2xvc2UgbGlzdGVuZXJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihSRVNUT1JFX09OX0lERU5USUZZX0NMT1NFX0VWRU5ULCB0aGlzLmhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2UgYXMgRXZlbnRMaXN0ZW5lcilcbiAgICBcbiAgICAvLyBDbGVhbiB1cCB2aXNpYmlsaXR5IGRldGVjdGlvblxuICAgIHRoaXMuY2xlYW51cFZpc2liaWxpdHlEZXRlY3Rpb24oKVxuICAgIFxuICAgIC8vIENsZWFuIHVwIGdyYXBoaWNzIGxheWVyXG4gICAgdGhpcy5jbGVhbnVwR3JhcGhpY3NMYXllcigpXG4gICAgXG4gICAgLy8gTm90aWZ5IEhlbHBlclNpbXBsZSB0aGF0IHRoaXMgd2lkZ2V0IGlzIG5vdyBjbG9zZWRcbiAgICBjb25zdCBjbG9zZUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFFVRVJZU0lNUExFX1dJREdFVF9TVEFURV9FVkVOVCwge1xuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBpc09wZW46IGZhbHNlXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGNsb3NlRXZlbnQpXG4gICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICBldmVudDogJ3dpZGdldC1jbG9zZWQnLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogQWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+KSB7XG4gICAgaWYgKHByZXZQcm9wcy5jb25maWcucXVlcnlJdGVtcyAhPT0gdGhpcy5wcm9wcy5jb25maWcucXVlcnlJdGVtcykge1xuICAgICAgdGhpcy5jaGVja1F1ZXJ5U3RyaW5nRm9yU2hvcnRJZHMoKVxuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhbiB1cCBncmFwaGljcyBsYXllciBpZiBjb25maWcgY2hhbmdlZCB0byBkaXNhYmxlZFxuICAgIGlmIChwcmV2UHJvcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQgIT09IHRoaXMucHJvcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHQpIHtcbiAgICAgIGlmICghdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCkge1xuICAgICAgICB0aGlzLmNsZWFudXBHcmFwaGljc0xheWVyKClcbiAgICAgIH1cbiAgICAgIC8vIElmIGVuYWJsZWQsIGluaXRpYWxpemF0aW9uIHdpbGwgaGFwcGVuIHdoZW4gbWFwIHZpZXcgYmVjb21lcyBhdmFpbGFibGUgdmlhIEppbXVNYXBWaWV3Q29tcG9uZW50XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIEhlbHBlclNpbXBsZSBvZiBzZWxlY3Rpb24gY2hhbmdlcy5cbiAgICogQ2FsbGVkIGJ5IFF1ZXJ5VGFza1Jlc3VsdCB3aGVuIHNlbGVjdGlvbiBpcyBtYWRlLlxuICAgKiBcbiAgICogQHBhcmFtIHJlY29yZElkcyAtIEFycmF5IG9mIHNlbGVjdGVkIHJlY29yZCBJRHNcbiAgICogQHBhcmFtIGRhdGFTb3VyY2VJZCAtIE9wdGlvbmFsIGRhdGEgc291cmNlIElEXG4gICAqL1xuICBub3RpZnlIZWxwZXJTaW1wbGVPZlNlbGVjdGlvbiA9IChyZWNvcmRJZHM6IHN0cmluZ1tdLCBkYXRhU291cmNlSWQ/OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoUVVFUllTSU1QTEVfU0VMRUNUSU9OX0VWRU5ULCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvcmRJZHMsXG4gICAgICAgIGRhdGFTb3VyY2VJZFxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSlcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHZpc2liaWxpdHkgZGV0ZWN0aW9uIHRvIHRyYWNrIHdoZW4gdGhlIHdpZGdldCBwYW5lbCBpcyBvcGVuL2Nsb3NlZC5cbiAgICogVXNlcyBJbnRlcnNlY3Rpb25PYnNlcnZlciBpZiBhdmFpbGFibGUsIGZhbGxzIGJhY2sgdG8gcGVyaW9kaWMgY2hlY2tpbmcuXG4gICAqL1xuICBzZXR1cFZpc2liaWxpdHlEZXRlY3Rpb24gPSAoKSA9PiB7XG4gICAgLy8gV2FpdCBmb3IgbmV4dCB0aWNrIHRvIGVuc3VyZSByZWYgaXMgc2V0XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMud2lkZ2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdXSURHRVQtU1RBVEUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICd2aXNpYmlsaXR5LWRldGVjdGlvbi1zZXR1cC1mYWlsZWQnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ3dpZGdldC1yZWYtbm90LWF2YWlsYWJsZSdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndpZGdldFJlZi5jdXJyZW50XG5cbiAgICAgIC8vIE1ldGhvZCAxOiBJbnRlcnNlY3Rpb25PYnNlcnZlciAobW9zdCBlZmZpY2llbnQpXG4gICAgICBpZiAoJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAgICAgKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gZW50cmllc1swXVxuICAgICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gZW50cnkuaXNJbnRlcnNlY3RpbmcgJiYgZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPiAwXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE9ubHkgbG9nIGlmIHN0YXRlIGNoYW5nZWRcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmlzUGFuZWxWaXNpYmxlICE9PSBpc1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzUGFuZWxWaXNpYmxlOiBpc1Zpc2libGUgfSlcbiAgICAgICAgICAgICAgdGhpcy5sb2dWaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSwgJ0ludGVyc2VjdGlvbk9ic2VydmVyJylcbiAgICAgICAgICAgICAgdGhpcy5ub3RpZnlIZWxwZXJTaW1wbGVPZlBhbmVsU3RhdGUoaXNWaXNpYmxlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGhyZXNob2xkOiBbMCwgMC4xLCAxLjBdLCAvLyBUcmlnZ2VyIGF0IDAlLCAxMCUsIGFuZCAxMDAlIHZpc2liaWxpdHlcbiAgICAgICAgICAgIHJvb3RNYXJnaW46ICcwcHgnXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIG1ldGhvZDogJ0ludGVyc2VjdGlvbk9ic2VydmVyJ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTWV0aG9kIDI6IEZhbGxiYWNrIHRvIHBlcmlvZGljIGNoZWNraW5nXG4gICAgICAgIHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IHRoaXMuY2hlY2tWaXNpYmlsaXR5KClcbiAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc1BhbmVsVmlzaWJsZSAhPT0gaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNQYW5lbFZpc2libGU6IGlzVmlzaWJsZSB9KVxuICAgICAgICAgICAgdGhpcy5sb2dWaXNpYmlsaXR5Q2hhbmdlKGlzVmlzaWJsZSwgJ3BlcmlvZGljLWNoZWNrJylcbiAgICAgICAgICAgIHRoaXMubm90aWZ5SGVscGVyU2ltcGxlT2ZQYW5lbFN0YXRlKGlzVmlzaWJsZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDI1MCkgLy8gQ2hlY2sgZXZlcnkgMjUwbXNcbiAgICAgICAgXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgICAgIGV2ZW50OiAndmlzaWJpbGl0eS1kZXRlY3Rpb24tc2V0dXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIG1ldGhvZDogJ3BlcmlvZGljLWNoZWNrJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sIDEwMClcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgdmlzaWJpbGl0eSBkZXRlY3Rpb24gb2JzZXJ2ZXJzL2ludGVydmFscy5cbiAgICovXG4gIGNsZWFudXBWaXNpYmlsaXR5RGV0ZWN0aW9uID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnZpc2liaWxpdHlPYnNlcnZlcikge1xuICAgICAgdGhpcy52aXNpYmlsaXR5T2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZlciA9IG51bGxcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgIT09IG51bGwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy52aXNpYmlsaXR5Q2hlY2tJbnRlcnZhbClcbiAgICAgIHRoaXMudmlzaWJpbGl0eUNoZWNrSW50ZXJ2YWwgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgbWFwIHZpZXcgY2hhbmdlIGZyb20gSmltdU1hcFZpZXdDb21wb25lbnQuXG4gICAqIFdoZW4gbWFwIHZpZXcgYmVjb21lcyBhdmFpbGFibGUsIGluaXRpYWxpemUgZ3JhcGhpY3MgbGF5ZXIgaWYgZW5hYmxlZC5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlSmltdU1hcFZpZXdDaGFuZ2VkID0gKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyB8IG51bGwpID0+IHtcbiAgICBjb25zdCB7IGlkLCBjb25maWcgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVKaW11TWFwVmlld0NoYW5nZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgaGFzSmltdU1hcFZpZXc6ICEhamltdU1hcFZpZXcsXG4gICAgICBoYXNWaWV3OiAhIShqaW11TWFwVmlldz8udmlldyksXG4gICAgICB2aWV3VHlwZTogamltdU1hcFZpZXc/LnZpZXc/LnR5cGUgfHwgJ25vbmUnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBTdG9yZSBKaW11TWFwVmlldyBpbiBzdGF0ZVxuICAgIHRoaXMuc2V0U3RhdGUoeyBqaW11TWFwVmlldzogamltdU1hcFZpZXcgfHwgdW5kZWZpbmVkIH0pXG4gICAgXG4gICAgLy8gSWYgbWFwIHZpZXcgaXMgYXZhaWxhYmxlIGFuZCBncmFwaGljcyBsYXllciBpcyBlbmFibGVkLCBpbml0aWFsaXplIGl0XG4gICAgaWYgKGppbXVNYXBWaWV3Py52aWV3ICYmIGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmICF0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCkge1xuICAgICAgdGhpcy5pbml0aWFsaXplR3JhcGhpY3NMYXllcihqaW11TWFwVmlldy52aWV3KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgZ3JhcGhpY3MgbGF5ZXIgdXNpbmcgdGhlIHByb3ZpZGVkIG1hcCB2aWV3LlxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplR3JhcGhpY3NMYXllciA9IGFzeW5jIChtYXBWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBvciBnZXQgZ3JhcGhpY3MgbGF5ZXJcbiAgICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSBhd2FpdCBjcmVhdGVPckdldEdyYXBoaWNzTGF5ZXIoaWQsIG1hcFZpZXcpXG4gICAgICBpZiAoIWdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgICBldmVudDogJ2luaXRpYWxpemVHcmFwaGljc0xheWVyLWZhaWxlZCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIHJlYXNvbjogJ2dyYXBoaWNzLWxheWVyLWNyZWF0aW9uLWZhaWxlZCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBTdG9yZSByZWZlcmVuY2VzXG4gICAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IG1hcFZpZXdcbiAgICAgIHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50ID0gZ3JhcGhpY3NMYXllclxuXG4gICAgICAvLyBVcGRhdGUgc3RhdGUgdG8gZm9yY2UgcmUtcmVuZGVyIGFuZCB1cGRhdGUgcHJvcHNcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBncmFwaGljc0xheWVySW5pdGlhbGl6ZWQ6IHRydWUgfSlcblxuICAgICAgZGVidWdMb2dnZXIubG9nKCdHUkFQSElDUy1MQVlFUicsIHtcbiAgICAgICAgZXZlbnQ6ICdpbml0aWFsaXplR3JhcGhpY3NMYXllci1zdWNjZXNzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBncmFwaGljc0xheWVySWQ6IGdyYXBoaWNzTGF5ZXIuaWQsXG4gICAgICAgIHZpZXdUeXBlOiBtYXBWaWV3LnR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXItZXJyb3InLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBncmFwaGljcyBsYXllciBsYXppbHkgd2hlbiBvdXRwdXREUyBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICogTm93IHVzZXMgdGhlIG1hcCB2aWV3IGZyb20gSmltdU1hcFZpZXdDb21wb25lbnQgaW5zdGVhZCBvZiB0cnlpbmcgdG8gZ2V0IGl0IGZyb20gZGF0YSBzb3VyY2UuXG4gICAqL1xuICBwdWJsaWMgaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFMgPSBhc3luYyAob3V0cHV0RFM6IERhdGFTb3VyY2UpID0+IHtcbiAgICBjb25zdCB7IGlkLCBjb25maWcgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBPbmx5IGluaXRpYWxpemUgaWYgZW5hYmxlZCBhbmQgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWRcbiAgICBpZiAoIWNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0IHx8IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50KSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2luaXRpYWxpemVHcmFwaGljc0xheWVyRnJvbU91dHB1dERTLXNraXBwZWQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlYXNvbjogIWNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ID8gJ25vdC1lbmFibGVkJyA6ICdhbHJlYWR5LWluaXRpYWxpemVkJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVXNlIG1hcCB2aWV3IGZyb20gSmltdU1hcFZpZXdDb21wb25lbnQgaWYgYXZhaWxhYmxlXG4gICAgY29uc3QgbWFwVmlldyA9IHRoaXMuc3RhdGUuamltdU1hcFZpZXc/LnZpZXcgfHwgdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnRcbiAgICBpZiAoIW1hcFZpZXcpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFMtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVhc29uOiAnbWFwLXZpZXctbm90LWF2YWlsYWJsZS15ZXQnLFxuICAgICAgICBvdXRwdXREU0lkOiBvdXRwdXREUy5pZCxcbiAgICAgICAgaGFzSmltdU1hcFZpZXc6ICEhdGhpcy5zdGF0ZS5qaW11TWFwVmlldyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBncmFwaGljcyBsYXllciB3aXRoIHRoZSBtYXAgdmlld1xuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXIobWFwVmlldylcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgdGhlIGdyYXBoaWNzIGxheWVyIHdoZW4gd2lkZ2V0IHVubW91bnRzIG9yIGNvbmZpZyBjaGFuZ2VzLlxuICAgKi9cbiAgcHJpdmF0ZSBjbGVhbnVwR3JhcGhpY3NMYXllciA9ICgpID0+IHtcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgbWFwVmlldyA9IHRoaXMubWFwVmlld1JlZi5jdXJyZW50XG5cbiAgICBpZiAobWFwVmlldykge1xuICAgICAgY2xlYW51cEdyYXBoaWNzTGF5ZXIoaWQsIG1hcFZpZXcpXG4gICAgICB0aGlzLm1hcFZpZXdSZWYuY3VycmVudCA9IG51bGxcbiAgICAgIHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50ID0gbnVsbFxuXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0dSQVBISUNTLUxBWUVSJywge1xuICAgICAgICBldmVudDogJ2NsZWFudXBHcmFwaGljc0xheWVyLWNvbXBsZXRlJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgZ3JhcGhpY3MgbGF5ZXIgaWYgaXQgZXhpc3RzLlxuICAgKiBUaGlzIGlzIGNhbGxlZCB3aGVuIGNsZWFyaW5nIHJlc3VsdHMgb3Igc3dpdGNoaW5nIHF1ZXJpZXMgaW4gTmV3IG1vZGUgdG8gZW5zdXJlIGdyYXBoaWNzIGFyZSByZW1vdmVkLlxuICAgKi9cbiAgcHVibGljIGNsZWFyR3JhcGhpY3NMYXllcklmRXhpc3RzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50XG4gICAgXG4gICAgaWYgKGNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0ICYmIGdyYXBoaWNzTGF5ZXIpIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtY2FsbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIGdyYXBoaWNzTGF5ZXJJZDogZ3JhcGhpY3NMYXllci5pZCxcbiAgICAgICAgZ3JhcGhpY3NDb3VudDogZ3JhcGhpY3NMYXllci5ncmFwaGljcy5sZW5ndGgsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgeyBjbGVhckdyYXBoaWNzTGF5ZXIgfSA9IHJlcXVpcmUoJy4vZ3JhcGhpY3MtbGF5ZXItdXRpbHMnKVxuICAgICAgY2xlYXJHcmFwaGljc0xheWVyKGdyYXBoaWNzTGF5ZXIpXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtY29tcGxldGUnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgZ3JhcGhpY3NMYXllcklkOiBncmFwaGljc0xheWVyLmlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnR1JBUEhJQ1MtTEFZRVInLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHMtc2tpcHBlZCcsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICByZWFzb246ICFjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCA/ICdub3QtZW5hYmxlZCcgOiAnbm8tZ3JhcGhpY3MtbGF5ZXInLFxuICAgICAgICBoYXNHcmFwaGljc0xheWVyOiAhIWdyYXBoaWNzTGF5ZXIsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSB3aWRnZXQgZWxlbWVudCBpcyBjdXJyZW50bHkgdmlzaWJsZS5cbiAgICogRmFsbGJhY2sgbWV0aG9kIHdoZW4gSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaXMgbm90IGF2YWlsYWJsZS5cbiAgICovXG4gIGNoZWNrVmlzaWJpbGl0eSA9ICgpOiBib29sZWFuID0+IHtcbiAgICBpZiAoIXRoaXMud2lkZ2V0UmVmLmN1cnJlbnQpIHJldHVybiBmYWxzZVxuICAgIFxuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLndpZGdldFJlZi5jdXJyZW50XG4gICAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KVxuICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgXG4gICAgY29uc3QgaXNWaXNpYmxlID0gKFxuICAgICAgc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnICYmXG4gICAgICBzdHlsZS52aXNpYmlsaXR5ICE9PSAnaGlkZGVuJyAmJlxuICAgICAgc3R5bGUub3BhY2l0eSAhPT0gJzAnICYmXG4gICAgICByZWN0LndpZHRoID4gMCAmJlxuICAgICAgcmVjdC5oZWlnaHQgPiAwICYmXG4gICAgICByZWN0LnRvcCA8IHdpbmRvdy5pbm5lckhlaWdodCAmJlxuICAgICAgcmVjdC5ib3R0b20gPiAwICYmXG4gICAgICByZWN0LmxlZnQgPCB3aW5kb3cuaW5uZXJXaWR0aCAmJlxuICAgICAgcmVjdC5yaWdodCA+IDBcbiAgICApXG4gICAgXG4gICAgcmV0dXJuIGlzVmlzaWJsZVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYWNrcyBzZWxlY3Rpb24gY2hhbmdlcyBmcm9tIHF1ZXJ5LXJlc3VsdC5cbiAgICogSW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHVzZXMgYWNjdW11bGF0ZWQgcmVjb3JkcyBjb3VudCBmb3IgcmVzdG9yYXRpb24uXG4gICAqL1xuICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudDx7IHdpZGdldElkOiBzdHJpbmcsIHJlY29yZElkczogc3RyaW5nW10sIGRhdGFTb3VyY2VJZD86IHN0cmluZywgb3V0cHV0RHNJZD86IHN0cmluZywgcXVlcnlJdGVtQ29uZmlnSWQ/OiBzdHJpbmcgfT5cbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgLy8gT25seSB0cmFjayBpZiB0aGlzIGlzIGZvciBvdXIgd2lkZ2V0XG4gICAgaWYgKGN1c3RvbUV2ZW50LmRldGFpbC53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zdCBoYXNTZWxlY3Rpb24gPSBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzICYmIGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoID4gMFxuICAgIFxuICAgIC8vIElmIHRoZSBwYW5lbCBpcyBOT1QgdmlzaWJsZSwgYW5kIHdlIGFyZSByZWNlaXZpbmcgYW4gRU1QVFkgc2VsZWN0aW9uLFxuICAgIC8vIGl0J3MgYWxtb3N0IGNlcnRhaW5seSBvdXIgb3duICdjbGVhclNlbGVjdGlvbkZyb21NYXAnIGxvZ2ljIGZpcmluZy5cbiAgICAvLyBXZSBzaG91bGQgSUdOT1JFIHRoaXMgc28gd2UgZG9uJ3Qgd2lwZSBvdXQgdGhlIGxhc3RTZWxlY3Rpb24gc3RhdGUuXG4gICAgaWYgKCF0aGlzLnN0YXRlLmlzUGFuZWxWaXNpYmxlICYmICFoYXNTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdoYW5kbGVTZWxlY3Rpb25DaGFuZ2UtaWdub3JpbmctZW1wdHktc2VsZWN0aW9uLXdoaWxlLXBhbmVsLWNsb3NlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEluIFwiQWRkIHRvXCIgb3IgXCJSZW1vdmUgZnJvbVwiIG1vZGUsIHVzZSBhY2N1bXVsYXRlZCByZWNvcmRzIGNvdW50IGZvciByZXN0b3JhdGlvblxuICAgIC8vIFRoZSBhY2N1bXVsYXRlZCByZWNvcmRzIGFyZSB0aGUgc291cmNlIG9mIHRydXRoIGZvciB3aGF0IHNob3VsZCBiZSByZXN0b3JlZFxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgY29uc3QgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDBcbiAgICBjb25zdCBzZWxlY3Rpb25Db3VudCA9IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDBcbiAgICAgID8gYWNjdW11bGF0ZWRSZWNvcmRzQ291bnRcbiAgICAgIDogKGhhc1NlbGVjdGlvbiA/IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoIDogMClcbiAgICBcbiAgICAvLyBJZiBzZWxlY3Rpb24gaXMgY2xlYXJlZCBhbmQgd2UncmUgaW4gUmVtb3ZlIG1vZGUsIHJlc2V0IHRvIE5ld1NlbGVjdGlvbiBtb2RlXG4gICAgLy8gUmVtb3ZlIG1vZGUgcmVxdWlyZXMgc2VsZWN0aW9uIHRvIGZ1bmN0aW9uLCBzbyBpdCBzaG91bGQgYmUgZGlzYWJsZWQgd2hlbiBzZWxlY3Rpb24gaXMgZW1wdHlcbiAgICBjb25zdCBzaG91bGRSZXNldE1vZGUgPSAhaGFzU2VsZWN0aW9uICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkNvdW50ID09PSAwICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlU2VsZWN0aW9uQ2hhbmdlLXVwZGF0aW5nLXN0YXRlJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgZXZlbnRSZWNvcmRJZHNDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGgsXG4gICAgICBoYXNTZWxlY3Rpb25Gcm9tRXZlbnQ6IGhhc1NlbGVjdGlvbixcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50QmVmb3JlOiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCxcbiAgICAgIGNhbGN1bGF0ZWRTZWxlY3Rpb25Db3VudDogc2VsZWN0aW9uQ291bnQsXG4gICAgICAnd2lsbC1zZXQtaGFzU2VsZWN0aW9uJzogc2VsZWN0aW9uQ291bnQgPiAwLFxuICAgICAgJ3dpbGwtc2V0LWxhc3RTZWxlY3Rpb24nOiBoYXNTZWxlY3Rpb24gJiYgISFjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCAmJiAhIWN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZCxcbiAgICAgICd3aWxsLXJlc2V0LW1vZGUnOiBzaG91bGRSZXNldE1vZGUsXG4gICAgICBkZWNpc2lvbkxvZ2ljOiB7XG4gICAgICAgICdpc0FjY3VtdWxhdGlvbk1vZGUnOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICdhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDAnOiBhY2N1bXVsYXRlZFJlY29yZHNDb3VudCA+IDAsXG4gICAgICAgICd1c2UtYWNjdW11bGF0ZWQtY291bnQnOiBpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwLFxuICAgICAgICAndXNlLWV2ZW50LWNvdW50JzogIShpc0FjY3VtdWxhdGlvbk1vZGUgJiYgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQgPiAwKSxcbiAgICAgICAgJ3Nob3VsZC1yZXNldC1tb2RlJzogc2hvdWxkUmVzZXRNb2RlXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGhhc1NlbGVjdGlvbjogc2VsZWN0aW9uQ291bnQgPiAwLFxuICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHNlbGVjdGlvbkNvdW50LFxuICAgICAgLy8gU3RvcmUgbGFzdFNlbGVjdGlvbiBmb3IgY29tcGF0aWJpbGl0eSwgYnV0IHJlc3RvcmF0aW9uIHdpbGwgdXNlIGFjY3VtdWxhdGVkUmVjb3JkcyBpbiBBZGQvUmVtb3ZlIG1vZGVzXG4gICAgICBsYXN0U2VsZWN0aW9uOiBoYXNTZWxlY3Rpb24gJiYgY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQgJiYgY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgICAgID8ge1xuICAgICAgICAgICAgcmVjb3JkSWRzOiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLFxuICAgICAgICAgICAgb3V0cHV0RHNJZDogY3VzdG9tRXZlbnQuZGV0YWlsLm91dHB1dERzSWQsXG4gICAgICAgICAgICBxdWVyeUl0ZW1Db25maWdJZDogY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkXG4gICAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIC8vIFJlc2V0IG1vZGUgdG8gTmV3U2VsZWN0aW9uIGlmIHNlbGVjdGlvbiBpcyBjbGVhcmVkIGluIFJlbW92ZSBtb2RlXG4gICAgICAuLi4oc2hvdWxkUmVzZXRNb2RlID8ge1xuICAgICAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogW10gLy8gQWxzbyBjbGVhciBhY2N1bXVsYXRlZCByZWNvcmRzIHdoZW4gcmVzZXR0aW5nIG1vZGVcbiAgICAgIH0gOiB7fSlcbiAgICB9KVxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnaGFuZGxlU2VsZWN0aW9uQ2hhbmdlLXN0YXRlLXVwZGF0ZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgJ25ldy1oYXNTZWxlY3Rpb24nOiBzZWxlY3Rpb25Db3VudCA+IDAsXG4gICAgICAnbmV3LXNlbGVjdGlvblJlY29yZENvdW50Jzogc2VsZWN0aW9uQ291bnQsXG4gICAgICAnbmV3LWxhc3RTZWxlY3Rpb24tcmVjb3JkSWRzLWNvdW50JzogaGFzU2VsZWN0aW9uICYmIGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkICYmIGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgICA/IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoXG4gICAgICAgIDogMCxcbiAgICAgICdtb2RlLXJlc2V0Jzogc2hvdWxkUmVzZXRNb2RlLFxuICAgICAgJ25ldy1tb2RlJzogc2hvdWxkUmVzZXRNb2RlID8gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24gOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgJ25vdGUnOiBzaG91bGRSZXNldE1vZGUgXG4gICAgICAgID8gJ01vZGUgcmVzZXQgdG8gTmV3U2VsZWN0aW9uIGJlY2F1c2Ugc2VsZWN0aW9uIHdhcyBjbGVhcmVkIGluIFJlbW92ZSBtb2RlJ1xuICAgICAgICA6ICdsYXN0U2VsZWN0aW9uLW9ubHktY29udGFpbnMtY3VycmVudC1xdWVyeS1yZWNvcmRzLW5vdC1hbGwtYWNjdW11bGF0ZWQtcmVjb3JkcydcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgcmVzdG9yZSByZXF1ZXN0IHdoZW4gaWRlbnRpZnkgcG9wdXAgY2xvc2VzLlxuICAgKiBPbmx5IHJlc3RvcmVzIGlmIHdpZGdldCBwYW5lbCBpcyBvcGVuLlxuICAgKiBJbiBcIkFkZCB0b1wiIG9yIFwiUmVtb3ZlIGZyb21cIiBtb2RlcywgcmVzdG9yZXMgYWxsIGFjY3VtdWxhdGVkIHJlY29yZHMuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVJlc3RvcmVPbklkZW50aWZ5Q2xvc2UgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudDx7IFxuICAgICAgd2lkZ2V0SWQ6IHN0cmluZywgXG4gICAgICByZWNvcmRJZHM6IHN0cmluZ1tdLCBcbiAgICAgIG91dHB1dERzSWQ6IHN0cmluZyxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBzdHJpbmdcbiAgICB9PlxuICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMucHJvcHNcbiAgICBcbiAgICAvLyBPbmx5IGhhbmRsZSBpZiB0aGlzIGlzIGZvciBvdXIgd2lkZ2V0XG4gICAgaWYgKGN1c3RvbUV2ZW50LmRldGFpbC53aWRnZXRJZCAhPT0gaWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBjb25zdCBpc1dpZGdldE9wZW4gPSB0aGlzLnN0YXRlLmlzUGFuZWxWaXNpYmxlID09PSB0cnVlXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb25cbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3JlLXJlcXVlc3RlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICBpc1dpZGdldE9wZW4sXG4gICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGV2ZW50UmVjb3JkSWRzQ291bnQ6IGN1c3RvbUV2ZW50LmRldGFpbC5yZWNvcmRJZHMubGVuZ3RoLFxuICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbiB8fCBmYWxzZSxcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBoYXNMYXN0U2VsZWN0aW9uOiAhIXRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICBvdXRwdXREc0lkOiBjdXN0b21FdmVudC5kZXRhaWwub3V0cHV0RHNJZCxcbiAgICAgIHF1ZXJ5SXRlbUNvbmZpZ0lkOiBjdXN0b21FdmVudC5kZXRhaWwucXVlcnlJdGVtQ29uZmlnSWRcbiAgICB9KVxuICAgIFxuICAgIC8vIE9ubHkgcmVzdG9yZSBpZiB3aWRnZXQgaXMgb3BlblxuICAgIGlmICghaXNXaWRnZXRPcGVuKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC13aWRnZXQtY2xvc2VkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZWNvcmRDb3VudDogY3VzdG9tRXZlbnQuZGV0YWlsLnJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogU2hvdWxkIGFsd2F5cyBjaGVjayBhY2N1bXVsYXRlZFJlY29yZHMgZmlyc3QsIHJlZ2FyZGxlc3Mgb2YgbW9kZVxuICAgIGlmICh0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdzaG91bGQtdXNlLWFjY3VtdWxhdGVkJzogdHJ1ZSxcbiAgICAgICAgJ2N1cnJlbnQtY29uZGl0aW9uLWNoZWNrJzogaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6IGlzQWNjdW11bGF0aW9uTW9kZVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gSW4gQWRkL1JlbW92ZSBtb2RlcywgY2hlY2sgYWNjdW11bGF0ZWQgcmVjb3JkcyBpbnN0ZWFkIG9mIGxhc3RTZWxlY3Rpb25cbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBpZiAoIXRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8ICF0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyB8fCB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbixcbiAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICdoeXBvdGhlc2lzJzogJ2hhc1NlbGVjdGlvbi1pcy1mYWxzZS1vci1uby1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgICAnbWF5YmUtaGFzU2VsZWN0aW9uLXNob3VsZC1iZS1iYXNlZC1vbi1hY2N1bXVsYXRlZC1yZWNvcmRzJzogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBhbGwgYWNjdW11bGF0ZWQgcmVjb3JkcyAoZ3JvdXBlZCBieSBvcmlnaW4gRFMpXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmluZy1hY2N1bXVsYXRlZC1yZWNvcmRzJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgXG4gICAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBIWVBPVEhFU0lTOiBNYXliZSBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCBpbiBhY2N1bXVsYXRpb24gbW9kZT9cbiAgICBpZiAodGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMgJiYgdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCAmJiAhaXNBY2N1bXVsYXRpb25Nb2RlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1hY2N1bXVsYXRpb24tbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGU6IHRoaXMuc3RhdGUucmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbW9kZS1pcy1ub3QtYWRkLW9yLXJlbW92ZScsXG4gICAgICAgICdzaG91bGQtd2Utc3RpbGwtdXNlLXRoZW0nOiAnTkVFRFMtSU5WRVNUSUdBVElPTidcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBcIk5ld1wiIG1vZGUsIHVzZSBvcmlnaW5hbCB2YWxpZGF0aW9uIGxvZ2ljXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBtYXRjaGluZyBzZWxlY3Rpb24gc3RhdGVcbiAgICBpZiAoIXRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8ICF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdpZGVudGlmeS1wb3B1cC1jbG9zZWQtcmVzdG9yZS1za2lwcGVkLW5vLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiB0aGlzLnN0YXRlLmhhc1NlbGVjdGlvbixcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb25cbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRoZSBvdXRwdXREc0lkIG1hdGNoZXNcbiAgICBpZiAodGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLm91dHB1dERzSWQgIT09IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1kcy1taXNtYXRjaCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyT3V0cHV0RHNJZDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLm91dHB1dERzSWQsXG4gICAgICAgIHJlcXVlc3RlZE91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSB0aGUgcXVlcnlJdGVtQ29uZmlnSWQgbWF0Y2hlcyAob3B0aW9uYWwgYnV0IGdvb2QgdG8gY2hlY2spXG4gICAgaWYgKHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5xdWVyeUl0ZW1Db25maWdJZCAhPT0gY3VzdG9tRXZlbnQuZGV0YWlsLnF1ZXJ5SXRlbUNvbmZpZ0lkKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnaWRlbnRpZnktcG9wdXAtY2xvc2VkLXJlc3RvcmUtc2tpcHBlZC1xdWVyeS1taXNtYXRjaCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgb3VyUXVlcnlJdGVtQ29uZmlnSWQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbi5xdWVyeUl0ZW1Db25maWdJZCxcbiAgICAgICAgcmVxdWVzdGVkUXVlcnlJdGVtQ29uZmlnSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5xdWVyeUl0ZW1Db25maWdJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBSZXN0b3JlIHNlbGVjdGlvbiB0byBtYXAgKHJldXNlIGV4aXN0aW5nIG1ldGhvZClcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICBldmVudDogJ2lkZW50aWZ5LXBvcHVwLWNsb3NlZC1yZXN0b3Jpbmctc2VsZWN0aW9uJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHJlY29yZENvdW50OiBjdXN0b21FdmVudC5kZXRhaWwucmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgIG91dHB1dERzSWQ6IGN1c3RvbUV2ZW50LmRldGFpbC5vdXRwdXREc0lkXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmFkZFNlbGVjdGlvblRvTWFwKClcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHNlbGVjdGlvbiB0byBtYXAgd2hlbiB3aWRnZXQgb3BlbnMgKHJldXNlcyBBZGQgdG8gTWFwIGxvZ2ljKS5cbiAgICogSW4gXCJBZGQgdG9cIiBvciBcIlJlbW92ZSBmcm9tXCIgbW9kZXMsIHJlc3RvcmVzIGFsbCBhY2N1bXVsYXRlZCByZWNvcmRzIGdyb3VwZWQgYnkgb3JpZ2luIGRhdGEgc291cmNlLlxuICAgKi9cbiAgcHJpdmF0ZSBhZGRTZWxlY3Rpb25Ub01hcCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGxhc3RTZWxlY3Rpb24sIGFjY3VtdWxhdGVkUmVjb3JkcywgcmVzdWx0c01vZGUgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdhZGRTZWxlY3Rpb25Ub01hcC1jYWxsZWQnLFxuICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgcmVzdWx0c01vZGUsXG4gICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHM6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhbGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgbGFzdFNlbGVjdGlvbk91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24/Lm91dHB1dERzSWRcbiAgICB9KVxuICAgIFxuICAgIC8vIEluIEFkZC9SZW1vdmUgbW9kZXMsIHVzZSBhY2N1bXVsYXRlZCByZWNvcmRzIGZvciByZXN0b3JhdGlvblxuICAgIGNvbnN0IGlzQWNjdW11bGF0aW9uTW9kZSA9IHJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IFNob3VsZCBhbHdheXMgY2hlY2sgYWNjdW11bGF0ZWRSZWNvcmRzIGZpcnN0LCByZWdhcmRsZXNzIG9mIG1vZGVcbiAgICAvLyBBZGRpbmcgbG9nIHRvIHNlZSBpZiBhY2N1bXVsYXRlZFJlY29yZHMgZXhpc3QgYnV0IHdlJ3JlIG5vdCB1c2luZyB0aGVtXG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWZvdW5kLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoLFxuICAgICAgICAnc2hvdWxkLXVzZS1hY2N1bXVsYXRlZCc6IHRydWUsXG4gICAgICAgICdjdXJyZW50LWNvbmRpdGlvbi1jaGVjayc6IGlzQWNjdW11bGF0aW9uTW9kZSAmJiBhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAsXG4gICAgICAgICdjb25kaXRpb24tcmVzdWx0JzogaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMFxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLW5vLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiAwLFxuICAgICAgICAnd2lsbC1mYWxsYmFjay10by1sYXN0U2VsZWN0aW9uJzogISFsYXN0U2VsZWN0aW9uXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBpZiAoaXNBY2N1bXVsYXRpb25Nb2RlICYmIGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gR3JvdXAgYWNjdW11bGF0ZWQgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gICAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgICBcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAxOiBUcnkgdG8gZ2V0IGZyb20gcmVjb3JkLmdldERhdGFTb3VyY2UoKVxuICAgICAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2ZvdW5kLW9yaWdpbi1kcy1mcm9tLXJlY29yZC1kcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbnVsbCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdyZWNvcmQuZ2V0RGF0YVNvdXJjZSgpJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAyOiBJZiB0aGF0IGZhaWxlZCwgc2VhcmNoIGFsbCBkYXRhIHNvdXJjZXMgZm9yIGEgcmVjb3JkIHdpdGggbWF0Y2hpbmcgSURcbiAgICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICAgIGNvbnN0IGRzTWFwID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2VzKClcbiAgICAgICAgICBjb25zdCBhbGxEYXRhU291cmNlcyA9IE9iamVjdC52YWx1ZXMoZHNNYXApXG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCBkcyBvZiBhbGxEYXRhU291cmNlcykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgYnkgY2hlY2tpbmcgZm9yIGdldEFsbExvYWRlZFJlY29yZHMgbWV0aG9kXG4gICAgICAgICAgICBpZiAoZHMgJiYgdHlwZW9mIChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIERTIGhhcyB0aGUgcmVjb3JkXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmVjb3JkcyA9IChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gYWxsUmVjb3Jkcy5maW5kKChyOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gci5nZXRJZCgpID09PSByZWNvcmRJZClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIHRoZSByZWNvcmQgLSBnZXQgb3JpZ2luIERTIGZyb20gdGhpcyBEU1xuICAgICAgICAgICAgICAgICAgb3JpZ2luRFMgPSAoZHMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdmb3VuZC1vcmlnaW4tZHMtdmlhLXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NlYXJjaGVkLWFsbC1kYXRhLXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hlZERTSWQ6IGRzLmlkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjb3VsZC1ub3QtZmluZC1vcmlnaW4tZHMtZm9yLXJlY29yZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIHdhcm5pbmc6ICdyZWNvcmQtd2lsbC1iZS1za2lwcGVkJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtcmVzdG9yaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgb3JpZ2luRFNDb3VudDogcmVjb3Jkc0J5T3JpZ2luRFMuc2l6ZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBzZWxlY3Rpb24gZm9yIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCB7IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoIH0gPSByZXF1aXJlKCcuL3NlbGVjdGlvbi11dGlscycpXG4gICAgICBjb25zdCB1c2VHcmFwaGljc0xheWVyID0gdGhpcy5wcm9wcy5jb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodFxuICAgICAgY29uc3QgZ3JhcGhpY3NMYXllciA9IHRoaXMuZ3JhcGhpY3NMYXllclJlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgY29uc3QgbWFwVmlldyA9IHRoaXMubWFwVmlld1JlZi5jdXJyZW50IHx8IHVuZGVmaW5lZFxuICAgICAgXG4gICAgICByZWNvcmRzQnlPcmlnaW5EUy5mb3JFYWNoKChyZWNvcmRzLCBvcmlnaW5EUykgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRJZHMgPSByZWNvcmRzLm1hcChyID0+IHIuZ2V0SWQoKSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBVc2Ugb3JpZ2luRFMgZGlyZWN0bHkgKG5vdCBvdXRwdXREUykgc2luY2UgcmVjb3JkcyBhcmUgc2VsZWN0ZWQgaW4gb3JpZ2luIGxheWVyc1xuICAgICAgICAgIC8vIFVzZSBhc3luYyBJSUZFIHNpbmNlIGZvckVhY2ggY2FsbGJhY2sgY2FuJ3QgYmUgYXN5bmNcbiAgICAgICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHNlbGVjdFJlY29yZHNBbmRQdWJsaXNoKGlkLCBvcmlnaW5EUywgcmVjb3JkSWRzLCByZWNvcmRzLCB0cnVlLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICAgICAgICAgIH0pKClcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlZC1vcmlnaW4tZHMnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICByZWNvcmRDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICAgICB6b29tRXhlY3V0ZWQ6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ3BhbmVsLW9wZW5lZC1yZXN0b3JlLW9yaWdpbi1kcy1mYWlsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEhZUE9USEVTSVM6IE1heWJlIGFjY3VtdWxhdGVkUmVjb3JkcyBleGlzdCBidXQgd2UncmUgbm90IGluIGFjY3VtdWxhdGlvbiBtb2RlP1xuICAgIC8vIE9yIG1heWJlIHdlIHNob3VsZCBhbHdheXMgY2hlY2sgYWNjdW11bGF0ZWRSZWNvcmRzIGZpcnN0P1xuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAgJiYgIWlzQWNjdW11bGF0aW9uTW9kZSkge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLWFjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW5vdC1hY2N1bXVsYXRpb24tbW9kZScsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ2FjY3VtdWxhdGVkLXJlY29yZHMtZXhpc3QtYnV0LW1vZGUtaXMtbm90LWFkZC1vci1yZW1vdmUnLFxuICAgICAgICAnc2hvdWxkLXdlLXN0aWxsLXVzZS10aGVtJzogJ05FRURTLUlOVkVTVElHQVRJT04nXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsIGJhY2sgdG8gb3JpZ2luYWwgbG9naWMgZm9yIFwiTmV3XCIgbW9kZVxuICAgIGlmICghbGFzdFNlbGVjdGlvbikge1xuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2FkZFNlbGVjdGlvblRvTWFwLW5vLWxhc3RTZWxlY3Rpb24tZXhpdGluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgcmVzdWx0c01vZGUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkczogISEoYWNjdW11bGF0ZWRSZWNvcmRzICYmIGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwKSxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICdoeXBvdGhlc2lzJzogJ25vLWxhc3RTZWxlY3Rpb24tc28tZXhpdGluZy1lYXJseS1tYXliZS1zaG91bGQtY2hlY2stYWNjdW11bGF0ZWQtcmVjb3Jkcy1maXJzdCdcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3Qgb3V0cHV0RFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShsYXN0U2VsZWN0aW9uLm91dHB1dERzSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICBpZiAoIW91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLW91dHB1dC1kcy1ub3QtZm91bmQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEdldCByZWNvcmRzIGZyb20gb3V0cHV0IERTIChzYW1lIGFzIEFkZCB0byBNYXApXG4gICAgY29uc3QgYWxsUmVjb3JkcyA9IG91dHB1dERTLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgIGNvbnN0IHJlY29yZHNUb1NlbGVjdCA9IGFsbFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiBcbiAgICAgIGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzLmluY2x1ZGVzKHJlY29yZC5nZXRJZCgpKVxuICAgICkgYXMgRmVhdHVyZURhdGFSZWNvcmRbXVxuICAgIFxuICAgIGlmIChyZWNvcmRzVG9TZWxlY3QubGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLW5vLW1hdGNoaW5nLXJlY29yZHMnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91clJlY29yZENvdW50OiBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5sZW5ndGhcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBTYW1lIGxvZ2ljIGFzIEFkZCB0byBNYXAgYWN0aW9uIC0gc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggaGFuZGxlcyBkdXBsaWNhdGUgY2hlY2tpbmdcbiAgICAvLyBEb24ndCB6b29tIHdoZW4gcmVzdG9yaW5nIG9uIHdpZGdldCBvcGVuIChBZGQgdG8gTWFwIGFjdGlvbiBoYW5kbGVzIHpvb20gZm9yIG1hbnVhbCBjbGlja3MpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2ggfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSB0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICBjb25zdCBtYXBWaWV3ID0gdGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICA7KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgc2VsZWN0UmVjb3Jkc0FuZFB1Ymxpc2goaWQsIG91dHB1dERTLCBsYXN0U2VsZWN0aW9uLnJlY29yZElkcywgcmVjb3Jkc1RvU2VsZWN0LCB0cnVlLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyLCBtYXBWaWV3KVxuICAgICAgfSkoKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXNlbGVjdGlvbi1hZGRlZC10by1tYXAnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzVG9TZWxlY3QubGVuZ3RoLFxuICAgICAgICB6b29tRXhlY3V0ZWQ6IGZhbHNlXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLWFkZC10by1tYXAtZmFpbGVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHJlc3VsdHMgbW9kZSBjaGFuZ2UgZnJvbSBkcm9wZG93bi5cbiAgICogVXBkYXRlcyB3aWRnZXQgc3RhdGUgYW5kIGxvZ3MgdGhlIGNoYW5nZSBmb3IgZGVidWdnaW5nLlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVSZXN1bHRzTW9kZUNoYW5nZSA9IChtb2RlOiBTZWxlY3Rpb25UeXBlKSA9PiB7XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNVTFRTLU1PREUnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlLXRyaWdnZXJlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIHByZXZpb3VzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgIG5ld01vZGU6IG1vZGUsXG4gICAgICBjdXJyZW50QWNjdW11bGF0ZWRDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICBcbiAgICAvLyBDb25zdW1lIGRlZXAgbGluayB3aGVuIHN3aXRjaGluZyB0byBhY2N1bXVsYXRpb24gbW9kZXNcbiAgICBpZiAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5BZGRUb1NlbGVjdGlvbiB8fCBtb2RlID09PSBTZWxlY3Rpb25UeXBlLlJlbW92ZUZyb21TZWxlY3Rpb24pIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICBldmVudDogJ2NvbnN1bWluZy1oYXNoLW9uLW1vZGUtc3dpdGNoJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICBtb2RlLFxuICAgICAgICAgIHNob3J0SWQ6IHRoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWUuc2hvcnRJZFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnJlbW92ZUhhc2hQYXJhbWV0ZXIodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZS5zaG9ydElkKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHN3aXRjaGluZyB0byBcIk5ld1wiIG1vZGUsIGNsZWFyIGFjY3VtdWxhdGVkIHJlY29yZHNcbiAgICBpZiAobW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24pIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyaW5nLWFjY3VtdWxhdGVkLXJlY29yZHMtb24tbW9kZS1zd2l0Y2gnLFxuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcHJldmlvdXNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlXG4gICAgICB9KVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlc3VsdHNNb2RlOiBtb2RlLCBhY2N1bXVsYXRlZFJlY29yZHM6IFtdIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyByZXN1bHRzTW9kZTogbW9kZSB9KVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlSGFzaFBhcmFtZXRlciA9IChzaG9ydElkOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXNob3J0SWQpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSlcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGhhc2gpXG4gICAgXG4gICAgaWYgKHVybFBhcmFtcy5oYXMoc2hvcnRJZCkpIHtcbiAgICAgIHVybFBhcmFtcy5kZWxldGUoc2hvcnRJZClcbiAgICAgIGNvbnN0IG5ld0hhc2ggPSB1cmxQYXJhbXMudG9TdHJpbmcoKVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAncmVtb3ZlSGFzaFBhcmFtZXRlcicsXG4gICAgICAgIHNob3J0SWQsXG4gICAgICAgIG5ld0hhc2g6IG5ld0hhc2ggPyBgIyR7bmV3SGFzaH1gIDogJyhlbXB0eSknLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgVVJMIHdpdGhvdXQgdHJpZ2dlcmluZyBhIHJlbG9hZFxuICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnLCBcbiAgICAgICAgbmV3SGFzaCA/IGAjJHtuZXdIYXNofWAgOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoXG4gICAgICApXG4gICAgICBcbiAgICAgIC8vIEFsc28gY2xlYXIgdGhlIHN0YXRlIHNvIGl0IHdvbid0IHRyaWdnZXIgYWdhaW5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkID09PSBzaG9ydElkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbml0aWFsUXVlcnlWYWx1ZTogdW5kZWZpbmVkIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UgPSAocmVjb3JkczogRmVhdHVyZURhdGFSZWNvcmRbXSkgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVUxUUy1NT0RFJywge1xuICAgICAgZXZlbnQ6ICdoYW5kbGVBY2N1bXVsYXRlZFJlY29yZHNDaGFuZ2UtdHJpZ2dlcmVkJyxcbiAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgcHJldmlvdXNDb3VudDogdGhpcy5zdGF0ZS5hY2N1bXVsYXRlZFJlY29yZHM/Lmxlbmd0aCB8fCAwLFxuICAgICAgbmV3Q291bnQ6IHJlY29yZHMubGVuZ3RoLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHsgYWNjdW11bGF0ZWRSZWNvcmRzOiByZWNvcmRzIH0pXG4gIH1cblxuICAvKipcbiAgICogTk9URTogTm8gbG9uZ2VyIG5lZWRlZCAtIHdlIHVzZSBleGlzdGluZyBvdXRwdXQgRFMgaW5zdGVhZCBvZiBjcmVhdGluZyBuZXcgb25lLlxuICAgKiBLZXB0IGZvciByZWZlcmVuY2UgYnV0IG5vdCB1c2VkLlxuICAgKi9cbiAgcHJpdmF0ZSBnZXRPckNyZWF0ZUFjY3VtdWxhdGVkUmVzdWx0c0RTID0gYXN5bmMgKG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlKTogUHJvbWlzZTxGZWF0dXJlTGF5ZXJEYXRhU291cmNlPiA9PiB7XG4gICAgLy8gVGhpcyBpcyBubyBsb25nZXIgdXNlZCAtIHdlIG1lcmdlIHJlY29yZHMgaW50byBleGlzdGluZyBvdXRwdXQgRFNcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgLSB1c2UgZXhpc3Rpbmcgb3V0cHV0IERTIGluc3RlYWQnKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBzZWxlY3Rpb24gZnJvbSBtYXAgb25seSAoa2VlcHMgc2VsZWN0aW9uIGluIHdpZGdldCdzIGludGVybmFsIHN0YXRlKS5cbiAgICogQ2FsbGVkIHdoZW4gd2lkZ2V0IHBhbmVsIGNsb3NlcyB0byByZW1vdmUgc2VsZWN0aW9uIGZyb20gbWFwIHdoaWxlIHByZXNlcnZpbmcgd2lkZ2V0IHN0YXRlLlxuICAgKiBBbHdheXMgY2xlYXJzIGFjY3VtdWxhdGVkIHJlY29yZHMgaWYgdGhleSBleGlzdCwgcmVnYXJkbGVzcyBvZiBjdXJyZW50IG1vZGUuXG4gICAqL1xuICBwcml2YXRlIGNsZWFyU2VsZWN0aW9uRnJvbU1hcCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGxhc3RTZWxlY3Rpb24sIGFjY3VtdWxhdGVkUmVjb3JkcywgcmVzdWx0c01vZGUgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzXG4gICAgXG4gICAgY29uc3QgaXNBY2N1bXVsYXRpb25Nb2RlID0gcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuQWRkVG9TZWxlY3Rpb24gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01vZGUgPT09IFNlbGVjdGlvblR5cGUuUmVtb3ZlRnJvbVNlbGVjdGlvblxuICAgIFxuICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLWNhbGxlZCcsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICByZXN1bHRzTW9kZSxcbiAgICAgIGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhbGFzdFNlbGVjdGlvbixcbiAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogbGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICBzZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5zZWxlY3Rpb25SZWNvcmRDb3VudCB8fCAwXG4gICAgfSlcbiAgICBcbiAgICAvLyBBbHdheXMgY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyBpZiB0aGV5IGV4aXN0IChyZWdhcmRsZXNzIG9mIG1vZGUpXG4gICAgLy8gVGhpcyBoYW5kbGVzIHRoZSBjYXNlIHdoZXJlIG1vZGUgbWlnaHQgaGF2ZSBjaGFuZ2VkIGJ1dCByZWNvcmRzIHN0aWxsIGV4aXN0XG4gICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtY2hlY2tpbmctYWNjdW11bGF0ZWQtcmVjb3JkcycsXG4gICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAnY29uZGl0aW9uJzogJ2FjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCcsXG4gICAgICAnY29uZGl0aW9uLXJlc3VsdCc6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCksXG4gICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMFxuICAgIH0pXG4gICAgXG4gICAgaWYgKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gR3JvdXAgYWNjdW11bGF0ZWQgcmVjb3JkcyBieSBvcmlnaW4gZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IHJlY29yZHNCeU9yaWdpbkRTID0gbmV3IE1hcDxGZWF0dXJlTGF5ZXJEYXRhU291cmNlLCBGZWF0dXJlRGF0YVJlY29yZFtdPigpXG4gICAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgICBcbiAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVjb3JkLmdldElkKClcbiAgICAgICAgbGV0IG9yaWdpbkRTOiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlIHwgbnVsbCA9IG51bGxcbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAxOiBUcnkgdG8gZ2V0IGZyb20gcmVjb3JkLmdldERhdGFTb3VyY2UoKVxuICAgICAgICBjb25zdCByZWNvcmREUyA9IHJlY29yZC5nZXREYXRhU291cmNlPy4oKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGlmIChyZWNvcmREUykge1xuICAgICAgICAgIG9yaWdpbkRTID0gcmVjb3JkRFMuZ2V0T3JpZ2luRGF0YVNvdXJjZXMoKT8uWzBdIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfHwgcmVjb3JkRFNcbiAgICAgICAgICBcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICBldmVudDogJ2NsZWFyLWZvdW5kLW9yaWdpbi1kcy1mcm9tLXJlY29yZC1kcycsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTPy5pZCB8fCAnbnVsbCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdyZWNvcmQuZ2V0RGF0YVNvdXJjZSgpJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAyOiBJZiB0aGF0IGZhaWxlZCwgc2VhcmNoIGFsbCBkYXRhIHNvdXJjZXMgZm9yIGEgcmVjb3JkIHdpdGggbWF0Y2hpbmcgSURcbiAgICAgICAgaWYgKCFvcmlnaW5EUykge1xuICAgICAgICAgIGNvbnN0IGRzTWFwID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2VzKClcbiAgICAgICAgICBjb25zdCBhbGxEYXRhU291cmNlcyA9IE9iamVjdC52YWx1ZXMoZHNNYXApXG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCBkcyBvZiBhbGxEYXRhU291cmNlcykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIEZlYXR1cmVMYXllckRhdGFTb3VyY2UgYnkgY2hlY2tpbmcgZm9yIGdldEFsbExvYWRlZFJlY29yZHMgbWV0aG9kXG4gICAgICAgICAgICBpZiAoZHMgJiYgdHlwZW9mIChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIERTIGhhcyB0aGUgcmVjb3JkXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmVjb3JkcyA9IChkcyBhcyBhbnkpLmdldEFsbExvYWRlZFJlY29yZHMoKSB8fCBbXVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gYWxsUmVjb3Jkcy5maW5kKChyOiBGZWF0dXJlRGF0YVJlY29yZCkgPT4gci5nZXRJZCgpID09PSByZWNvcmRJZClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIHRoZSByZWNvcmQgLSBnZXQgb3JpZ2luIERTIGZyb20gdGhpcyBEU1xuICAgICAgICAgICAgICAgICAgb3JpZ2luRFMgPSAoZHMgYXMgYW55KS5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB8fCBkcyBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1mb3VuZC1vcmlnaW4tZHMtdmlhLXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NlYXJjaGVkLWFsbC1kYXRhLXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hlZERTSWQ6IGRzLmlkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udGludWUgc2VhcmNoaW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChvcmlnaW5EUykge1xuICAgICAgICAgIGlmICghcmVjb3Jkc0J5T3JpZ2luRFMuaGFzKG9yaWdpbkRTKSkge1xuICAgICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuc2V0KG9yaWdpbkRTLCBbXSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZ2V0KG9yaWdpbkRTKSEucHVzaChyZWNvcmQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdjbGVhci1jb3VsZC1ub3QtZmluZC1vcmlnaW4tZHMtZm9yLXJlY29yZCcsXG4gICAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgICByZWNvcmRJbmRleDogaW5kZXgsXG4gICAgICAgICAgICByZWNvcmRJZCxcbiAgICAgICAgICAgIHdhcm5pbmc6ICdyZWNvcmQtd2lsbC1iZS1za2lwcGVkJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2xlYXJpbmctYWNjdW11bGF0ZWQtcmVjb3Jkcy1mcm9tLW1hcCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IGFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGgsXG4gICAgICAgIG9yaWdpbkRTQ291bnQ6IHJlY29yZHNCeU9yaWdpbkRTLnNpemVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIENsZWFyIHNlbGVjdGlvbiBmcm9tIGVhY2ggb3JpZ2luIGRhdGEgc291cmNlXG4gICAgICBjb25zdCB7IGNsZWFyU2VsZWN0aW9uSW5EYXRhU291cmNlcyB9ID0gcmVxdWlyZSgnLi9zZWxlY3Rpb24tdXRpbHMnKVxuICAgICAgY29uc3QgdXNlR3JhcGhpY3NMYXllciA9IHRoaXMucHJvcHMuY29uZmlnLnVzZUdyYXBoaWNzTGF5ZXJGb3JIaWdobGlnaHRcbiAgICAgIGNvbnN0IGdyYXBoaWNzTGF5ZXIgPSB0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWRcbiAgICAgIFxuICAgICAgcmVjb3Jkc0J5T3JpZ2luRFMuZm9yRWFjaCgocmVjb3Jkcywgb3JpZ2luRFMpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBVc2UgYXN5bmMgSUlGRSBzaW5jZSBmb3JFYWNoIGNhbGxiYWNrIGNhbid0IGJlIGFzeW5jXG4gICAgICAgICAgOyhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMoaWQsIG9yaWdpbkRTLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyZWQtb3JpZ2luLWRzLXNlbGVjdGlvbicsXG4gICAgICAgICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICAgIHJlY29yZENvdW50OiByZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgdXNlZEdyYXBoaWNzTGF5ZXI6IHVzZUdyYXBoaWNzTGF5ZXJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSkoKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyLW9yaWdpbi1kcy1mYWlsZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ2NsZWFyU2VsZWN0aW9uRnJvbU1hcC1jbGVhcmVkLWFjY3VtdWxhdGVkLXJlY29yZHMtcmV0dXJuaW5nJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAnd2lsbC1ub3QtZmFsbGJhY2stdG8tbGFzdFNlbGVjdGlvbic6IHRydWVcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgXG4gICAgLy8gSFlQT1RIRVNJUzogTWF5YmUgYWNjdW11bGF0ZWRSZWNvcmRzIGV4aXN0IGJ1dCB3ZSBkaWRuJ3QgZW50ZXIgdGhlIGlmIGJsb2NrP1xuICAgIC8vIE9yIG1heWJlIHdlIHNob3VsZCBhbHdheXMgY2xlYXIgYWNjdW11bGF0ZWQgcmVjb3JkcyBpZiB0aGV5IGV4aXN0P1xuICAgIGlmIChhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdjbGVhclNlbGVjdGlvbkZyb21NYXAtYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtbm90LWNsZWFyaW5nJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICByZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnYWNjdW11bGF0ZWQtcmVjb3Jkcy1leGlzdC1idXQtY29uZGl0aW9uLWZhaWxlZC13aHknLFxuICAgICAgICAnY29uZGl0aW9uLXdhcyc6ICdhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDAnLFxuICAgICAgICAnY29uZGl0aW9uLXJlc3VsdCc6ICEhKGFjY3VtdWxhdGVkUmVjb3JkcyAmJiBhY2N1bXVsYXRlZFJlY29yZHMubGVuZ3RoID4gMClcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGwgYmFjayB0byBvcmlnaW5hbCBsb2dpYyBmb3IgXCJOZXdcIiBtb2RlXG4gICAgaWYgKCFsYXN0U2VsZWN0aW9uKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAnY2xlYXJTZWxlY3Rpb25Gcm9tTWFwLW5vLWxhc3RTZWxlY3Rpb24tZXhpdGluZycsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgaGFzQWNjdW11bGF0ZWRSZWNvcmRzOiAhIShhY2N1bXVsYXRlZFJlY29yZHMgJiYgYWNjdW11bGF0ZWRSZWNvcmRzLmxlbmd0aCA+IDApLFxuICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHNDb3VudDogYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgJ2h5cG90aGVzaXMnOiAnbm8tbGFzdFNlbGVjdGlvbi1zby1leGl0aW5nLW1heWJlLXNob3VsZC1oYXZlLWNsZWFyZWQtYWNjdW11bGF0ZWQtcmVjb3Jkcy1maXJzdCdcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3Qgb3V0cHV0RFMgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShsYXN0U2VsZWN0aW9uLm91dHB1dERzSWQpIGFzIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICBcbiAgICBpZiAoIW91dHB1dERTKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLW91dHB1dC1kcy1ub3QtZm91bmQnLFxuICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgIG91dHB1dERzSWQ6IGxhc3RTZWxlY3Rpb24ub3V0cHV0RHNJZFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgb3JpZ2luIERTICh0aGUgbWFwIGxheWVyKVxuICAgICAgY29uc3Qgb3JpZ2luRFMgPSBvdXRwdXREUy5nZXRPcmlnaW5EYXRhU291cmNlcygpPy5bMF0gYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgXG4gICAgICBpZiAoIW9yaWdpbkRTKSB7XG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1vcmlnaW4tZHMtbm90LWZvdW5kJyxcbiAgICAgICAgICB3aWRnZXRJZDogaWQsXG4gICAgICAgICAgb3V0cHV0RHNJZDogbGFzdFNlbGVjdGlvbi5vdXRwdXREc0lkXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBjdXJyZW50IHNlbGVjdGlvbiBzdGF0ZSBiZWZvcmUgY2xlYXJpbmdcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZElkcyA9IG9yaWdpbkRTLmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cbiAgICAgIGNvbnN0IG91clJlY29yZElkcyA9IGxhc3RTZWxlY3Rpb24ucmVjb3JkSWRzXG4gICAgICBjb25zdCBtYXRjaGVzT3VyU2VsZWN0aW9uID0gb3VyUmVjb3JkSWRzLmxlbmd0aCA9PT0gY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCAmJlxuICAgICAgICBvdXJSZWNvcmRJZHMuZXZlcnkocmVjb3JkSWQgPT4gY3VycmVudFNlbGVjdGVkSWRzLmluY2x1ZGVzKHJlY29yZElkKSlcbiAgICAgIFxuICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1jaGVja2luZy1tYXAtc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICBvdXJSZWNvcmRDb3VudDogb3VyUmVjb3JkSWRzLmxlbmd0aCxcbiAgICAgICAgbWFwU2VsZWN0ZWRDb3VudDogY3VycmVudFNlbGVjdGVkSWRzLmxlbmd0aCxcbiAgICAgICAgbWF0Y2hlc091clNlbGVjdGlvbixcbiAgICAgICAgb3VyUmVjb3JkSWRzOiBvdXJSZWNvcmRJZHMuc2xpY2UoMCwgNSksXG4gICAgICAgIG1hcFNlbGVjdGVkSWRzOiBjdXJyZW50U2VsZWN0ZWRJZHMuc2xpY2UoMCwgNSlcbiAgICAgIH0pXG5cbiAgICAgIC8vIFVzZSBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgdXRpbGl0eSB3aGljaCBzdXBwb3J0cyBncmFwaGljcyBsYXllclxuICAgICAgY29uc3QgeyBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMgfSA9IHJlcXVpcmUoJy4vc2VsZWN0aW9uLXV0aWxzJylcbiAgICAgIGNvbnN0IHVzZUdyYXBoaWNzTGF5ZXIgPSB0aGlzLnByb3BzLmNvbmZpZy51c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0XG4gICAgICBjb25zdCBncmFwaGljc0xheWVyID0gdGhpcy5ncmFwaGljc0xheWVyUmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkXG4gICAgICBcbiAgICAgIDsoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBjbGVhclNlbGVjdGlvbkluRGF0YVNvdXJjZXMoaWQsIG9yaWdpbkRTLCB1c2VHcmFwaGljc0xheWVyLCBncmFwaGljc0xheWVyKVxuICAgICAgICBcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyZWQtb3JpZ2luLWRzLXNlbGVjdGlvbicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIG9yaWdpbkRTSWQ6IG9yaWdpbkRTLmlkLFxuICAgICAgICAgIHVzZWRHcmFwaGljc0xheWVyOiB1c2VHcmFwaGljc0xheWVyXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBWZXJpZnkgc2VsZWN0aW9uIHdhcyBjbGVhcmVkXG4gICAgICAgIGNvbnN0IGFmdGVyQ2xlYXJJZHMgPSBvcmlnaW5EUy5nZXRTZWxlY3RlZFJlY29yZElkcygpIHx8IFtdXG4gICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgICBldmVudDogJ3BhbmVsLWNsb3NlZC1zZWxlY3Rpb24tY2xlYXJlZC1mcm9tLW1hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IGlkLFxuICAgICAgICAgIHJlY29yZENvdW50OiBsYXN0U2VsZWN0aW9uLnJlY29yZElkcy5sZW5ndGgsXG4gICAgICAgICAgb3JpZ2luRFNJZDogb3JpZ2luRFMuaWQsXG4gICAgICAgICAgc2VsZWN0aW9uQWZ0ZXJDbGVhcjogYWZ0ZXJDbGVhcklkcy5sZW5ndGgsXG4gICAgICAgICAgdmVyaWZpZWRDbGVhcmVkOiBhZnRlckNsZWFySWRzLmxlbmd0aCA9PT0gMFxuICAgICAgICB9KVxuICAgICAgfSkoKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNsZWFyLWZyb20tbWFwLWZhaWxlZCcsXG4gICAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dzIHZpc2liaWxpdHkgc3RhdGUgY2hhbmdlcy5cbiAgICovXG4gIGxvZ1Zpc2liaWxpdHlDaGFuZ2UgPSAoaXNWaXNpYmxlOiBib29sZWFuLCBtZXRob2Q6IHN0cmluZykgPT4ge1xuICAgIGRlYnVnTG9nZ2VyLmxvZygnV0lER0VULVNUQVRFJywge1xuICAgICAgZXZlbnQ6IGlzVmlzaWJsZSA/ICdwYW5lbC1vcGVuZWQnIDogJ3BhbmVsLWNsb3NlZCcsXG4gICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIGlzVmlzaWJsZSxcbiAgICAgIG1ldGhvZCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgICBcbiAgICBpZiAoaXNWaXNpYmxlKSB7XG4gICAgICAvLyBXaGVuIHBhbmVsIG9wZW5zLCBjaGVjayBpZiB3ZSBoYXZlIHNlbGVjdGlvbiB0byByZXN0b3JlXG4gICAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICBjb25zdCBoYXNBY2N1bXVsYXRlZFJlY29yZHMgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25TdGF0ZSA9IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUgPSBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgID8gaGFzQWNjdW11bGF0ZWRSZWNvcmRzIFxuICAgICAgICA6IGhhc1NlbGVjdGlvblN0YXRlXG4gICAgICBcbiAgICAgIGRlYnVnTG9nZ2VyLmxvZygnUkVTVE9SRScsIHtcbiAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtY2hlY2tpbmctc2VsZWN0aW9uJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHJlc3VsdHNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgIGhhc1NlbGVjdGlvbjogaGFzU2VsZWN0aW9uU3RhdGUsXG4gICAgICAgIGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgYWNjdW11bGF0ZWRSZWNvcmRzQ291bnQ6IHRoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgc2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUuc2VsZWN0aW9uUmVjb3JkQ291bnQgfHwgMCxcbiAgICAgICAgaGFzTGFzdFNlbGVjdGlvbjogISF0aGlzLnN0YXRlLmxhc3RTZWxlY3Rpb24sXG4gICAgICAgIGxhc3RTZWxlY3Rpb25SZWNvcmRDb3VudDogdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uPy5yZWNvcmRJZHMubGVuZ3RoIHx8IDAsXG4gICAgICAgIGhhc1NlbGVjdGlvblRvUmVzdG9yZSxcbiAgICAgICAgZGVjaXNpb25Mb2dpYzoge1xuICAgICAgICAgICdpc0FjY3VtdWxhdGlvbk1vZGUnOiBpc0FjY3VtdWxhdGlvbk1vZGUsXG4gICAgICAgICAgJ2hhc0FjY3VtdWxhdGVkUmVjb3Jkcyc6IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyxcbiAgICAgICAgICAnaGFzU2VsZWN0aW9uU3RhdGUnOiBoYXNTZWxlY3Rpb25TdGF0ZSxcbiAgICAgICAgICAnY2FsY3VsYXRlZC1oYXNTZWxlY3Rpb25Ub1Jlc3RvcmUnOiBoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUsXG4gICAgICAgICAgJ3dpbGwtY2FsbC1hZGRTZWxlY3Rpb25Ub01hcCc6IGhhc1NlbGVjdGlvblRvUmVzdG9yZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBBZGQgc2VsZWN0aW9uIHRvIG1hcCBpZiB3ZSBoYXZlIG9uZVxuICAgICAgaWYgKGhhc1NlbGVjdGlvblRvUmVzdG9yZSkge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1vcGVuZWQtY2FsbGluZy1hZGRTZWxlY3Rpb25Ub01hcCcsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9SZXN0b3JlLWlzLXRydWUnXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuYWRkU2VsZWN0aW9uVG9NYXAoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtb3BlbmVkLXNraXBwaW5nLWFkZFNlbGVjdGlvblRvTWFwJyxcbiAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICByZWFzb246ICdoYXNTZWxlY3Rpb25Ub1Jlc3RvcmUtaXMtZmFsc2UnLFxuICAgICAgICAgIHdoeTogaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICAgICAgPyAnbm8tYWNjdW11bGF0ZWQtcmVjb3JkcycgXG4gICAgICAgICAgICA6ICduby1oYXNTZWxlY3Rpb24tc3RhdGUnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdoZW4gcGFuZWwgY2xvc2VzLCBjbGVhciBzZWxlY3Rpb24gZnJvbSBtYXAgb25seSAoa2VlcCB3aWRnZXQgc3RhdGUpXG4gICAgICBjb25zdCBpc0FjY3VtdWxhdGlvbk1vZGUgPSB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlID09PSBTZWxlY3Rpb25UeXBlLkFkZFRvU2VsZWN0aW9uIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSA9PT0gU2VsZWN0aW9uVHlwZS5SZW1vdmVGcm9tU2VsZWN0aW9uXG4gICAgICBjb25zdCBoYXNBY2N1bXVsYXRlZFJlY29yZHMgPSB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3JkcyAmJiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcy5sZW5ndGggPiAwXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25TdGF0ZSA9IHRoaXMuc3RhdGUuaGFzU2VsZWN0aW9uIHx8IGZhbHNlXG4gICAgICBjb25zdCBoYXNTZWxlY3Rpb25Ub0NsZWFyID0gaXNBY2N1bXVsYXRpb25Nb2RlIFxuICAgICAgICA/IGhhc0FjY3VtdWxhdGVkUmVjb3JkcyBcbiAgICAgICAgOiBoYXNTZWxlY3Rpb25TdGF0ZVxuICAgICAgXG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLWNoZWNraW5nLXNlbGVjdGlvbicsXG4gICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICByZXN1bHRzTW9kZTogdGhpcy5zdGF0ZS5yZXN1bHRzTW9kZSxcbiAgICAgICAgaXNBY2N1bXVsYXRpb25Nb2RlLFxuICAgICAgICBoYXNTZWxlY3Rpb246IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICBoYXNBY2N1bXVsYXRlZFJlY29yZHMsXG4gICAgICAgIGFjY3VtdWxhdGVkUmVjb3Jkc0NvdW50OiB0aGlzLnN0YXRlLmFjY3VtdWxhdGVkUmVjb3Jkcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHNlbGVjdGlvblJlY29yZENvdW50OiB0aGlzLnN0YXRlLnNlbGVjdGlvblJlY29yZENvdW50IHx8IDAsXG4gICAgICAgIGhhc0xhc3RTZWxlY3Rpb246ICEhdGhpcy5zdGF0ZS5sYXN0U2VsZWN0aW9uLFxuICAgICAgICBsYXN0U2VsZWN0aW9uUmVjb3JkQ291bnQ6IHRoaXMuc3RhdGUubGFzdFNlbGVjdGlvbj8ucmVjb3JkSWRzLmxlbmd0aCB8fCAwLFxuICAgICAgICBoYXNTZWxlY3Rpb25Ub0NsZWFyLFxuICAgICAgICBkZWNpc2lvbkxvZ2ljOiB7XG4gICAgICAgICAgJ2lzQWNjdW11bGF0aW9uTW9kZSc6IGlzQWNjdW11bGF0aW9uTW9kZSxcbiAgICAgICAgICAnaGFzQWNjdW11bGF0ZWRSZWNvcmRzJzogaGFzQWNjdW11bGF0ZWRSZWNvcmRzLFxuICAgICAgICAgICdoYXNTZWxlY3Rpb25TdGF0ZSc6IGhhc1NlbGVjdGlvblN0YXRlLFxuICAgICAgICAgICdjYWxjdWxhdGVkLWhhc1NlbGVjdGlvblRvQ2xlYXInOiBoYXNTZWxlY3Rpb25Ub0NsZWFyLFxuICAgICAgICAgICd3aWxsLWNhbGwtY2xlYXJTZWxlY3Rpb25Gcm9tTWFwJzogaGFzU2VsZWN0aW9uVG9DbGVhclxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoaGFzU2VsZWN0aW9uVG9DbGVhcikge1xuICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ1JFU1RPUkUnLCB7XG4gICAgICAgICAgZXZlbnQ6ICdwYW5lbC1jbG9zZWQtY2FsbGluZy1jbGVhclNlbGVjdGlvbkZyb21NYXAnLFxuICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgIHJlYXNvbjogJ2hhc1NlbGVjdGlvblRvQ2xlYXItaXMtdHJ1ZSdcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbkZyb21NYXAoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWdMb2dnZXIubG9nKCdSRVNUT1JFJywge1xuICAgICAgICAgIGV2ZW50OiAncGFuZWwtY2xvc2VkLW5vLXNlbGVjdGlvbi10by1jbGVhcicsXG4gICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgcmVhc29uOiAnaGFzU2VsZWN0aW9uVG9DbGVhci1pcy1mYWxzZScsXG4gICAgICAgICAgd2h5OiBpc0FjY3VtdWxhdGlvbk1vZGUgXG4gICAgICAgICAgICA/ICduby1hY2N1bXVsYXRlZC1yZWNvcmRzJyBcbiAgICAgICAgICAgIDogJ25vLWhhc1NlbGVjdGlvbi1zdGF0ZSdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTm90aWZpZXMgSGVscGVyU2ltcGxlIG9mIHBhbmVsIHZpc2liaWxpdHkgc3RhdGUgY2hhbmdlcy5cbiAgICovXG4gIG5vdGlmeUhlbHBlclNpbXBsZU9mUGFuZWxTdGF0ZSA9IChpc1Zpc2libGU6IGJvb2xlYW4pID0+IHtcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChRVUVSWVNJTVBMRV9XSURHRVRfU1RBVEVfRVZFTlQsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgaXNPcGVuOiBpc1Zpc2libGVcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgIH0pXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gIH1cblxuICAvKipcbiAgICogTk9USUZZIHRoYXQgYSBoYXNoIHBhcmFtZXRlciBoYXMgYmVlbiB1c2VkLlxuICAgKiBQcmV2aW91c2x5IHRoaXMgcmVtb3ZlZCB0aGUgaGFzaCBmcm9tIHRoZSBVUkwsIGJ1dCBwZXIgdXBkYXRlZCByZXF1aXJlbWVudHMsXG4gICAqIHVzZXItZW50ZXJlZCBoYXNoZXMgc2hvdWxkIHJlbWFpbiBpbiB0aGUgVVJMLlxuICAgKiBcbiAgICogQHBhcmFtIHNob3J0SWQgLSBUaGUgc2hvcnRJZCBwYXJhbWV0ZXIgdGhhdCB3YXMgdXNlZFxuICAgKi9cbiAgaGFuZGxlSGFzaFBhcmFtZXRlclVzZWQgPSAoc2hvcnRJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgaW5pdGlhbFF1ZXJ5VmFsdWUgfSA9IHRoaXMuc3RhdGVcbiAgICBcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2hhbmRsZUhhc2hQYXJhbWV0ZXJVc2VkLW5vdGlmaWVkJyxcbiAgICAgIHdpZGdldElkOiBpZCxcbiAgICAgIHNob3J0SWQ6IHNob3J0SWQsXG4gICAgICBjdXJyZW50SW5pdGlhbFF1ZXJ5VmFsdWU6IGluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgbm90ZTogJ0hhc2ggcmVtYWlucyBpbiBVUkwgcGVyIHVzZXIgcmVxdWlyZW1lbnQnLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIENsZWFyIHRoZSBzdGF0ZSBzbyBpdCB3b24ndCB0cmlnZ2VyIGFnYWluIHdpdGhpbiB0aGlzIHNlc3Npb24vbW91bnRcbiAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCA9PT0gc2hvcnRJZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGluaXRpYWxRdWVyeVZhbHVlOiB1bmRlZmluZWQgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHRoZSBVUkwgaGFzaCBwYXJhbWV0ZXJzIGZvciBhbnkgc2hvcnRJZHMgdGhhdCBtYXRjaCBxdWVyeSBpdGVtcy5cbiAgICogSWYgZm91bmQsIHN0b3JlcyB0aGUgdmFsdWUgdG8gYmUgdXNlZCB0byBhdXRvLXBvcHVsYXRlIGFuZCBleGVjdXRlIHRoZSBxdWVyeS5cbiAgICogRXhwZXJpZW5jZSBCdWlsZGVyIHVzZXMgaGFzaC1iYXNlZCBVUkwgcGFyYW1ldGVycyAoZS5nLiwgI3Bpbj0yMjIzMDU5MDEzKS5cbiAgICogXG4gICAqIFRoaXMgbWV0aG9kIHByaW9yaXRpemVzIHRoZSBmaXJzdCBtYXRjaGluZyBzaG9ydElkIGZvdW5kIGluIHRoZSBxdWVyeSBpdGVtcyBvcmRlci5cbiAgICogSWYgbXVsdGlwbGUgaGFzaCBwYXJhbWV0ZXJzIGV4aXN0LCBvbmx5IHRoZSBmaXJzdCBtYXRjaCBpcyB1c2VkLlxuICAgKi9cbiAgY2hlY2tRdWVyeVN0cmluZ0ZvclNob3J0SWRzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKCFjb25maWcucXVlcnlJdGVtcz8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IGFsbCBzaG9ydElkcyBmcm9tIHF1ZXJ5IGl0ZW1zXG4gICAgY29uc3Qgc2hvcnRJZHMgPSBjb25maWcucXVlcnlJdGVtc1xuICAgICAgLm1hcChpdGVtID0+IGl0ZW0uc2hvcnRJZClcbiAgICAgIC5maWx0ZXIoc2hvcnRJZCA9PiBzaG9ydElkICE9IG51bGwgJiYgc2hvcnRJZC50cmltKCkgIT09ICcnKVxuXG4gICAgaWYgKHNob3J0SWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gR2V0IFVSTCBoYXNoIGZyYWdtZW50IHBhcmFtZXRlcnMgKEV4QiB1c2VzICMgZm9yIHBhcmFtcylcbiAgICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpIC8vIFJlbW92ZSB0aGUgI1xuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaClcbiAgICBcbiAgICAvLyBDaGVjayBpZiB3ZSd2ZSBhbHJlYWR5IHByb2Nlc3NlZCB0aGlzIHNwZWNpZmljIGhhc2ggc3RyaW5nXG4gICAgaWYgKHRoaXMubGFzdFByb2Nlc3NlZEhhc2ggPT09IGhhc2gpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgaW1tZWRpYXRlbHkgdG8gcHJldmVudCByZS1lbnRyeSByYWNlIGNvbmRpdGlvbnNcbiAgICB0aGlzLmxhc3RQcm9jZXNzZWRIYXNoID0gaGFzaFxuXG4gICAgLy8gTG9nIGFsbCBoYXNoIHBhcmFtcyBmb3IgZGVidWdnaW5nXG4gICAgY29uc3QgYWxsSGFzaFBhcmFtczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9XG4gICAgdXJsUGFyYW1zLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIGFsbEhhc2hQYXJhbXNba2V5XSA9IHZhbHVlXG4gICAgfSlcblxuICAgIC8vIExvZyBoYXNoIGNoZWNrIGZvciBkZWJ1Z2dpbmdcbiAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICBldmVudDogJ2hhc2gtY2hlY2snLFxuICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICBoYXNoOiBoYXNoLFxuICAgICAgYWxsSGFzaFBhcmFtczogYWxsSGFzaFBhcmFtcyxcbiAgICAgIGhhc2hQYXJhbXNDb3VudDogT2JqZWN0LmtleXMoYWxsSGFzaFBhcmFtcykubGVuZ3RoLFxuICAgICAgYXZhaWxhYmxlU2hvcnRJZHM6IHNob3J0SWRzLFxuICAgICAgY3VycmVudFN0YXRlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSlcblxuICAgIC8vIEZpbmQgdGhlIGZpcnN0IG1hdGNoaW5nIHNob3J0SWQgKHByaW9yaXRpemUgZmlyc3QgbWF0Y2ggaW4gcXVlcnkgaXRlbXMgb3JkZXIpXG4gICAgLy8gVGhpcyBlbnN1cmVzIHdlIG9ubHkgc2V0IHN0YXRlIG9uY2UgcGVyIGNoZWNrIGFuZCBtYWludGFpbnMgY29uc2lzdGVudCBiZWhhdmlvclxuICAgIGxldCBmb3VuZE1hdGNoID0gZmFsc2VcbiAgICBmb3IgKGNvbnN0IHNob3J0SWQgb2Ygc2hvcnRJZHMpIHtcbiAgICAgIGlmICh1cmxQYXJhbXMuaGFzKHNob3J0SWQpKSB7XG4gICAgICAgIGZvdW5kTWF0Y2ggPSB0cnVlXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdXJsUGFyYW1zLmdldChzaG9ydElkKVxuICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQgdG8gYXZvaWQgdW5uZWNlc3NhcnkgcmUtcmVuZGVyc1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8uc2hvcnRJZCAhPT0gc2hvcnRJZCB8fCB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy52YWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgICAgICBldmVudDogJ2hhc2gtZGV0ZWN0ZWQnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICBzaG9ydElkOiBzaG9ydElkLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcHJldmlvdXNTaG9ydElkOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlPy5zaG9ydElkLFxuICAgICAgICAgICAgcHJldmlvdXNWYWx1ZTogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZT8udmFsdWUsXG4gICAgICAgICAgICBhbGxIYXNoUGFyYW1zOiBhbGxIYXNoUGFyYW1zLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZXNldCB0byBOZXcgbW9kZSB3aGVuIGhhc2ggcGFyYW1ldGVyIGlzIGRldGVjdGVkIHRvIGF2b2lkIGJ1Z3Mgd2l0aCBhY2N1bXVsYXRpb24gbW9kZXNcbiAgICAgICAgICBjb25zdCBuZWVkc01vZGVSZXNldCA9IHRoaXMuc3RhdGUucmVzdWx0c01vZGUgIT09IFNlbGVjdGlvblR5cGUuTmV3U2VsZWN0aW9uXG4gICAgICAgICAgXG4gICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgZXZlbnQ6ICdoYXNoLWRldGVjdGVkLXNldHRpbmctc3RhdGUnLFxuICAgICAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICBzaG9ydElkLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBuZWVkc01vZGVSZXNldCxcbiAgICAgICAgICAgIGN1cnJlbnRNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlOiB7IHNob3J0SWQsIHZhbHVlIH0sXG4gICAgICAgICAgICAvLyBSZXNldCB0byBOZXcgbW9kZSBhbmQgY2xlYXIgYWNjdW11bGF0ZWRSZWNvcmRzIChzYW1lIGFzIGhhbmRsZVJlc3VsdHNNb2RlQ2hhbmdlIGRvZXMpXG4gICAgICAgICAgICAuLi4obmVlZHNNb2RlUmVzZXQgPyB7IFxuICAgICAgICAgICAgICByZXN1bHRzTW9kZTogU2VsZWN0aW9uVHlwZS5OZXdTZWxlY3Rpb24sXG4gICAgICAgICAgICAgIGFjY3VtdWxhdGVkUmVjb3JkczogW11cbiAgICAgICAgICAgIH0gOiB7fSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChuZWVkc01vZGVSZXNldCkge1xuICAgICAgICAgICAgZGVidWdMb2dnZXIubG9nKCdIQVNIJywge1xuICAgICAgICAgICAgICBldmVudDogJ2hhc2gtcmVzZXQtbW9kZS10by1uZXcnLFxuICAgICAgICAgICAgICB3aWRnZXRJZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgcHJldmlvdXNNb2RlOiB0aGlzLnN0YXRlLnJlc3VsdHNNb2RlLFxuICAgICAgICAgICAgICByZWFzb246ICdoYXNoLXBhcmFtZXRlci1kZXRlY3RlZCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYnVnTG9nZ2VyLmxvZygnSEFTSCcsIHtcbiAgICAgICAgICAgIGV2ZW50OiAnaGFzaC1za2lwcGVkJyxcbiAgICAgICAgICAgIHdpZGdldElkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgc2hvcnRJZDogc2hvcnRJZCxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHJlYXNvbjogJ3ZhbHVlLXVuY2hhbmdlZCdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAvLyBFeGl0IGFmdGVyIGZpcnN0IG1hdGNoXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIElmIG5vIGhhc2ggcGFyYW1ldGVycyBtYXRjaCBhbnkgc2hvcnRJZCwgbG9nIHdoYXQncyBpbiB0aGUgaGFzaFxuICAgIGlmICghZm91bmRNYXRjaCAmJiBPYmplY3Qua2V5cyhhbGxIYXNoUGFyYW1zKS5sZW5ndGggPiAwKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1jaGVjay1uby1tYXRjaGluZy1zaG9ydElkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIGhhc2g6IGhhc2gsXG4gICAgICAgIGFsbEhhc2hQYXJhbXM6IGFsbEhhc2hQYXJhbXMsXG4gICAgICAgIGF2YWlsYWJsZVNob3J0SWRzOiBzaG9ydElkcyxcbiAgICAgICAgbm90ZTogJ0hhc2ggY29udGFpbnMgcGFyYW1zIGJ1dCBub25lIG1hdGNoIGNvbmZpZ3VyZWQgc2hvcnRJZHMnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gSWYgbm8gaGFzaCBwYXJhbWV0ZXJzIG1hdGNoIGFueSBzaG9ydElkLCBjbGVhciB0aGUgc3RhdGVcbiAgICAvLyBUaGlzIGhhbmRsZXMgY2FzZXMgd2hlcmUgaGFzaCBwYXJhbWV0ZXJzIHdlcmUgcmVtb3ZlZFxuICAgIGlmICh0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlKSB7XG4gICAgICBkZWJ1Z0xvZ2dlci5sb2coJ0hBU0gnLCB7XG4gICAgICAgIGV2ZW50OiAnaGFzaC1jbGVhcmVkJyxcbiAgICAgICAgd2lkZ2V0SWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIHByZXZpb3VzU2hvcnRJZDogdGhpcy5zdGF0ZS5pbml0aWFsUXVlcnlWYWx1ZS5zaG9ydElkLFxuICAgICAgICBwcmV2aW91c1ZhbHVlOiB0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlLnZhbHVlLFxuICAgICAgICByZWFzb246ICduby1tYXRjaGluZy1oYXNoLXBhcmFtcycsXG4gICAgICAgIGFsbEhhc2hQYXJhbXM6IGFsbEhhc2hQYXJhbXMsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSlcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU6IHVuZGVmaW5lZFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHsgY29uZmlnLCBpZCwgaWNvbiwgbGFiZWwsIGxheW91dElkLCBsYXlvdXRJdGVtSWQsIGNvbnRyb2xsZXJXaWRnZXRJZCB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHdpZGdldExhYmVsID0gdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2Uoe1xuICAgICAgaWQ6ICdfd2lkZ2V0TGFiZWwnLFxuICAgICAgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5fd2lkZ2V0TGFiZWxcbiAgICB9KVxuICAgIGlmICghY29uZmlnLnF1ZXJ5SXRlbXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIDxXaWRnZXRQbGFjZWhvbGRlciBpY29uPXtpY29uTWFwLmljb25RdWVyeX0gd2lkZ2V0SWQ9e3RoaXMucHJvcHMuaWR9IG5hbWU9e3dpZGdldExhYmVsfSAvPlxuICAgIH1cblxuICAgIGlmIChjb25maWcuYXJyYW5nZVR5cGUgPT09IFF1ZXJ5QXJyYW5nZVR5cGUuUG9wcGVyICYmICFjb250cm9sbGVyV2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICA8VGFza0xpc3RQb3BwZXJXcmFwcGVyXG4gICAgICAgICAgICBpZD17MH1cbiAgICAgICAgICAgIGljb249e2ljb259XG4gICAgICAgICAgICBwb3BwZXJUaXRsZT17bGFiZWx9XG4gICAgICAgICAgICBtaW5TaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5taW5TaXplfVxuICAgICAgICAgICAgZGVmYXVsdFNpemU9e2NvbmZpZy5zaXplTWFwPy5hcnJhbmdlbWVudEljb25Qb3BwZXI/LmRlZmF1bHRTaXplfVxuICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFF1ZXJ5VGFza0xpc3QgXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e2lkfSBcbiAgICAgICAgICAgICAgICBpc0luUG9wcGVyIFxuICAgICAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfSBcbiAgICAgICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU9e2NvbmZpZy5kZWZhdWx0UGFnZVNpemV9IFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncGItNCcgXG4gICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9IFxuICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMuaGFuZGxlSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICAgICAgcmVzdWx0c01vZGU9e3RoaXMuc3RhdGUucmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17dGhpcy5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e3RoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXt0aGlzLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXt0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgbWFwVmlldz17dGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI9e3RoaXMuaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXI9e3RoaXMuY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHN9XG4gICAgICAgICAgICAgICAgYWN0aXZlVGFiPXt0aGlzLnN0YXRlLmFjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICBvblRhYkNoYW5nZT17dGhpcy5oYW5kbGVUYWJDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9UYXNrTGlzdFBvcHBlcldyYXBwZXI+XG4gICAgICAgIDwvUXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChjb25maWcuYXJyYW5nZVR5cGUgPT09IFF1ZXJ5QXJyYW5nZVR5cGUuSW5saW5lICYmICFjb250cm9sbGVyV2lkZ2V0SWQpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxRdWVyeVdpZGdldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Ake2xheW91dElkfToke2xheW91dEl0ZW1JZH1gfT5cbiAgICAgICAgICA8VGFza0xpc3RJbmxpbmVcbiAgICAgICAgICAgIHdpZGdldElkPXtpZH1cbiAgICAgICAgICAgIHdpZGdldExhYmVsPXtsYWJlbH1cbiAgICAgICAgICAgIHdyYXA9e2NvbmZpZy5hcnJhbmdlV3JhcH1cbiAgICAgICAgICAgIHF1ZXJ5SXRlbXM9e2NvbmZpZy5xdWVyeUl0ZW1zfVxuICAgICAgICAgICAgbWluU2l6ZT17Y29uZmlnLnNpemVNYXA/LmFycmFuZ2VtZW50SWNvblBvcHBlcj8ubWluU2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPXtjb25maWcuc2l6ZU1hcD8uYXJyYW5nZW1lbnRJY29uUG9wcGVyPy5kZWZhdWx0U2l6ZX1cbiAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX1cbiAgICAgICAgICAgIGluaXRpYWxRdWVyeVZhbHVlPXt0aGlzLnN0YXRlLmluaXRpYWxRdWVyeVZhbHVlfVxuICAgICAgICAgICAgb25IYXNoUGFyYW1ldGVyVXNlZD17dGhpcy5oYW5kbGVIYXNoUGFyYW1ldGVyVXNlZH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFBhcGVyIHJlZj17dGhpcy53aWRnZXRSZWZ9IHZhcmlhbnQ9J2ZsYXQnIGNsYXNzTmFtZT0namltdS13aWRnZXQgcnVudGltZS1xdWVyeScgZGF0YS13aWRnZXRpZD17aWR9IGNzcz17Y3NzYFxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBgfT5cbiAgICAgICAgey8qIEhpZGRlbiBKaW11TWFwVmlld0NvbXBvbmVudCB0byBnZXQgbWFwIHZpZXcgZm9yIGdyYXBoaWNzIGxheWVyICovfVxuICAgICAgICB7LyogVXNlcyBleHBsaWNpdCBtYXAgd2lkZ2V0IElEIGZyb20gY29uZmlnICh3aWRnZXQtbGV2ZWwgYmluZGluZykgKi99XG4gICAgICAgIHtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodCAmJiBjb25maWcuaGlnaGxpZ2h0TWFwV2lkZ2V0SWQgJiYgKFxuICAgICAgICAgIDxKaW11TWFwVmlld0NvbXBvbmVudFxuICAgICAgICAgICAgdXNlTWFwV2lkZ2V0SWQ9e2NvbmZpZy5oaWdobGlnaHRNYXBXaWRnZXRJZH1cbiAgICAgICAgICAgIG9uQWN0aXZlVmlld0NoYW5nZT17dGhpcy5oYW5kbGVKaW11TWFwVmlld0NoYW5nZWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3aWRnZXQtaGVhZGVyXCIgY3NzPXtjc3NgXG4gICAgICAgICAgcGFkZGluZzogNnB4IDE2cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3lzLWNvbG9yLXN1cmZhY2UpO1xuICAgICAgICBgfT5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwid2lkZ2V0LXRpdGxlXCIgY3NzPXtjc3NgXG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXN5cy1jb2xvci10ZXh0LXByaW1hcnkpO1xuICAgICAgICAgIGB9PlxuICAgICAgICAgICAge2xhYmVsIHx8IHdpZGdldExhYmVsfVxuICAgICAgICAgIDwvaDM+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNzcz17Y3NzYFxuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIGB9PlxuICAgICAgICAgIDxkaXYgY3NzPXtjc3NgXG4gICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgYH0+XG4gICAgICAgICAgICA8UXVlcnlXaWRnZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtgJHtsYXlvdXRJZH06JHtsYXlvdXRJdGVtSWR9YH0+XG4gICAgICAgICAgICAgIDxRdWVyeVRhc2tMaXN0IFxuICAgICAgICAgICAgICAgIHdpZGdldElkPXtpZH0gXG4gICAgICAgICAgICAgICAgcXVlcnlJdGVtcz17Y29uZmlnLnF1ZXJ5SXRlbXN9IFxuICAgICAgICAgICAgICAgIGRlZmF1bHRQYWdlU2l6ZT17Y29uZmlnLmRlZmF1bHRQYWdlU2l6ZX0gXG4gICAgICAgICAgICAgICAgaW5pdGlhbFF1ZXJ5VmFsdWU9e3RoaXMuc3RhdGUuaW5pdGlhbFF1ZXJ5VmFsdWV9IFxuICAgICAgICAgICAgICAgIG9uSGFzaFBhcmFtZXRlclVzZWQ9e3RoaXMuaGFuZGxlSGFzaFBhcmFtZXRlclVzZWR9XG4gICAgICAgICAgICAgICAgcmVzdWx0c01vZGU9e3RoaXMuc3RhdGUucmVzdWx0c01vZGV9XG4gICAgICAgICAgICAgICAgb25SZXN1bHRzTW9kZUNoYW5nZT17dGhpcy5oYW5kbGVSZXN1bHRzTW9kZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFJlY29yZHM9e3RoaXMuc3RhdGUuYWNjdW11bGF0ZWRSZWNvcmRzfVxuICAgICAgICAgICAgICAgIG9uQWNjdW11bGF0ZWRSZWNvcmRzQ2hhbmdlPXt0aGlzLmhhbmRsZUFjY3VtdWxhdGVkUmVjb3Jkc0NoYW5nZX1cbiAgICAgICAgICAgICAgICB1c2VHcmFwaGljc0xheWVyRm9ySGlnaGxpZ2h0PXtjb25maWcudXNlR3JhcGhpY3NMYXllckZvckhpZ2hsaWdodH1cbiAgICAgICAgICAgICAgICBncmFwaGljc0xheWVyPXt0aGlzLmdyYXBoaWNzTGF5ZXJSZWYuY3VycmVudCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgbWFwVmlldz17dGhpcy5tYXBWaWV3UmVmLmN1cnJlbnQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIG9uSW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXI9e3RoaXMuaW5pdGlhbGl6ZUdyYXBoaWNzTGF5ZXJGcm9tT3V0cHV0RFN9XG4gICAgICAgICAgICAgICAgb25DbGVhckdyYXBoaWNzTGF5ZXI9e3RoaXMuY2xlYXJHcmFwaGljc0xheWVySWZFeGlzdHN9XG4gICAgICAgICAgICAgICAgYWN0aXZlVGFiPXt0aGlzLnN0YXRlLmFjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICBvblRhYkNoYW5nZT17dGhpcy5oYW5kbGVUYWJDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1F1ZXJ5V2lkZ2V0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7LyogU3RhdGlvbmFyeSBmb290ZXIgKi99XG4gICAgICAgICAgPGRpdiBjc3M9e2Nzc2BcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xuICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXN5cy1jb2xvci1kaXZpZGVyLXNlY29uZGFyeSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zeXMtY29sb3Itc3VyZmFjZS1wYXBlcik7XG4gICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBgfT5cbiAgICAgICAgICAgIDxzcGFuIGNzcz17Y3NzYFxuICAgICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zeXMtY29sb3ItdGV4dC10ZXJ0aWFyeSk7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgey8qIENvZGUvT3BlbiBTb3VyY2UgU3ltYm9sICovfVxuICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIiBcbiAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxNFwiIFxuICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjE2IDE4IDIyIDEyIDE2IDZcIi8+XG4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIHBvaW50cz1cIjggNiAyIDEyIDggMThcIi8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICBRdWVyeVNpbXBsZSBieSBNYXBTaW1wbGVcbiAgICAgICAgICAgICAgPHNwYW4gY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07XG4gICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgIHZ7V0lER0VUX1ZFUlNJT059XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1BhcGVyPlxuICAgIClcbiAgfVxufVxuXG5cbiBleHBvcnQgZnVuY3Rpb24gX19zZXRfd2VicGFja19wdWJsaWNfcGF0aF9fKHVybCkgeyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyA9IHVybCB9Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9